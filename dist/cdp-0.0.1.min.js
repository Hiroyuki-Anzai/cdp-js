/*!
 * cdp.js 0.0.1
 *
 * Date: 2016-05-11T12:51:21+0900
 */
!function(a,b){"function"==typeof define&&define.amd?define("cdp.core",[],function(){return b(a)}):"object"==typeof exports?module.exports=b(a):b(a)}((this||0).self||global,function(a){function b(a){setTimeout(function(){try{e.apply(),a&&"function"==typeof a.success&&a.success()}catch(b){var d=b&&b.message?b.message:"initialize failed.";console.error(c+d),a&&"function"==typeof a.fail&&a.fail(b)}})}var c="[CDP] ",d=a.CDP||(a.CDP={}),e=function(){function b(){}function c(){null!=a.console&&null!=a.console.error||d(),"object"==typeof MSApp&&e()}function d(){a.console={count:function(){},groupEnd:function(){},time:function(){},timeEnd:function(){},trace:function(){},group:function(){},dirxml:function(){},debug:function(){},groupCollapsed:function(){},select:function(){},info:function(){},profile:function(){},assert:function(){},msIsIndependentlyComposed:function(){},clear:function(){},dir:function(){},warn:function(){},error:function(){},log:function(){},profileEnd:function(){}}}function e(){var a=Node.prototype.appendChild;Node.prototype.appendChild=function(b){var c=this;return MSApp.execUnsafeLocalFunction(function(){return a.call(c,b)})};var b=Node.prototype.insertBefore;Node.prototype.insertBefore=function(a,c){var d=this;return MSApp.execUnsafeLocalFunction(function(){return b.call(d,a,c)})}}return b.apply=c,b}(),f=function(){var a=/.+\/(.+)\/[^\/]*#[^\/]+/.exec(location.href);return a||(a=/.+\/(.+)\//.exec(location.href)),a[0]}();return d.global=a,d.initialize=b,d.webRoot=f,d}),function(a,b){"function"==typeof define&&define.amd?define("cdp.promise",["jquery"],function(c){return b(a.CDP||(a.CDP={}),c)}):"object"==typeof exports?module.exports=b(a.CDP||(a.CDP={}),require("jquery")):b(a.CDP||(a.CDP={}),a.jQuery||a.$)}((this||0).self||global,function(a,b){var a;return function(a){function c(a,c){var d=function(b){var c=b?b:{message:"abort"};null!=this.dependency?(this.dependency.abort?this.dependency.abort(c):console.error(e+"[call] dependency object doesn't have 'abort()' method."),this.callReject&&"pending"===this.state()&&a.reject(c)):"pending"===this.state()&&a.reject(c)},f=function(a){var b=this;return a.abort?(this.dependency=a,a.always(function(){b.dependency=null})):console.error(e+"[set] dependency object doesn't have 'abort()' method."),a},g=b.extend({},{dependency:null,callReject:!1},c),h=a.promise(g);return null==h.abort&&(h.abort=d.bind(h)),null==h.dependOn&&(h.dependOn=f.bind(h)),h}function d(){for(var a=[],c=0;c<arguments.length;c++)a[c-0]=arguments[c];var d=[].concat.apply([],a),e=b.Deferred(),f=[],g=!1,h=function(){return g?!f.some(function(a){return"pending"===a.status}):!1};return d.forEach(function(a,b){f.push({status:"pending",args:null}),a.then(function(){for(var a=[],c=0;c<arguments.length;c++)a[c-0]=arguments[c];f[b].status="resolved",f[b].args=a},function(){for(var a=[],c=0;c<arguments.length;c++)a[c-0]=arguments[c];f[b].status="rejected",f[b].args=a}).always(function(){h()&&e.resolve(f)})}),g=!0,h()&&e.resolve(f),e.promise()}var e="[CDP.Promise] ";a.makePromise=c,a.wait=d;var f=function(){function a(){this._pool=[],this._id=0}return a.prototype.add=function(a){var b=this;if(null==a)return null;if(!a.abort)return console.error(e+"[add] promise object doesn't have 'abort()' method."),a;var c={promise:a,id:this._id++};return this._pool.push(c),a.always(function(){b._pool=b._pool.filter(function(a){return a.id!==c.id})}),a},a.prototype.cancel=function(a){var b=this.promises();return b.forEach(function(b){b.abort&&b.abort(a)}),d.apply(null,b)},a.prototype.promises=function(){return this._pool.map(function(a){return a.promise})},a}();a.PromiseManager=f}(a||(a={})),a}),function(a,b){"function"==typeof define&&define.amd?define("cdp.framework.jqm",["cdp.core","cdp.promise","backbone"],function(){return b(a.CDP||(a.CDP={}))}):b(a.CDP||(a.CDP={}))}(this,function(a){a.Framework=a.Framework||{};var a;!function(a){var b;!function(b){b.Platform=function(){var b=navigator.userAgent.toLowerCase(),c=function(a){var c=b.match(new RegExp("("+a+")( |/)([0-9]+)"));return!c||c.length<4?0:parseInt(c[3],10)};return{ltIE6:"undefined"==typeof window.addEventListener&&"undefined"==typeof document.documentElement.style.maxHeight,ltIE7:"undefined"==typeof window.addEventListener&&"undefined"==typeof document.querySelectorAll,ltIE8:"undefined"==typeof window.addEventListener&&"undefined"==typeof document.getElementsByClassName,ltIE9:document.uniqueID&&"undefined"==typeof window.matchMedia,gtIE10:document.uniqueID&&window.matchMedia,Trident:document.uniqueID,Gecko:"MozAppearance"in document.documentElement.style,Presto:a.global.opera,Blink:a.global.chrome,Webkit:"undefined"==typeof a.global.chrome&&"WebkitAppearance"in document.documentElement.style,Touch:"undefined"!=typeof a.global.ontouchstart,Mobile:"undefined"!=typeof a.global.orientation,ltAd4_4:"undefined"!=typeof a.global.orientation&&("undefined"==typeof a.global.EventSource||30>c("chrome")),Pointer:a.global.navigator.pointerEnabled,MSPoniter:a.global.navigator.msPointerEnabled,Android:-1!==b.indexOf("android"),iOS:-1!==b.indexOf("iphone")||-1!==b.indexOf("ipad")||-1!==b.indexOf("ipod")}}()}(b=a.Framework||(a.Framework={}))}(a||(a={}));var a;!function(a){var b;!function(a){var b=function(){var a=$.fn.on,b=$.fn.off,c=function(b,c,d,e,f){return"string"==typeof b&&(b=b.replace(/vclick/g,"click")),_.bind(a,this)(b,c,d,e,f)},d=function(a,c,d){return"string"==typeof a&&(a=a.replace(/vclick/g,"click")),_.bind(b,this)(a,c,d)};$.fn.on=c,$.fn.off=d},c=function(){function c(){}return c.apply=function(){c.isSupportedVclick()||(b(),c.s_vclickEvent="click")},c.isSupportedVclick=function(){return!a.Platform.Android||a.Platform.ltAd4_4},c.s_vclickEvent="vclick",c}();a.Patch=c}(b=a.Framework||(a.Framework={}))}(a||(a={}));var a;!function(a){var b;!function(a){function b(){var a=$(window);return a.width()<a.height()?c.PORTRAIT:c.LANDSCAPE}!function(a){a[a.PORTRAIT=0]="PORTRAIT",a[a.LANDSCAPE=1]="LANDSCAPE"}(a.Orientation||(a.Orientation={}));var c=a.Orientation;a.getOrientation=b}(b=a.Framework||(a.Framework={}))}(a||(a={}));var a;!function(a){var b;!function(b){function c(b){return null!=b[0]&&"/"===b[0]?a.webRoot+b.slice(1):$.mobile.path.makeUrlAbsolute(b,d())}function d(){var a=$("body").pagecontainer("getActivePage");if(null==a)return $.mobile.path.documentBase.hrefNoHash;var b=$.mobile.activePage.closest(".ui-page").jqmData("url"),c=$.mobile.path.documentBase.hrefNoHash;return b&&$.mobile.path.isPath(b)||(b=c),$.mobile.path.makeUrlAbsolute(b,c)}function e(a){if(null==a)return f;var b=f;return f=a,b}b.toUrl=c;var f=function(){return $.Deferred().resolve().promise()},g=f;b.setBeforeRouteChangeHandler=e;var h=function(){function c(){}return c.initialize=function(a){var d=$("body");return c.s_router?(console.warn("logic error. initialize call twice."),!1):(c.s_initOptions=$.extend({},c.s_defaultInitOptions,a),c.s_loadUrl=_.bind(Backbone.history.loadUrl,Backbone.history),Backbone.history.loadUrl=c.customLoadUrl,c.s_router=new Backbone.Router,c.s_router.on("route",c.onRouteSucceeded),$.mobile.hashListeningEnabled||(c.s_back=_.bind($.mobile.back,$.mobile),$.mobile.back=c.customJqmBack),null==$.mobile.changePage&&($.mobile.changePage=function(a,b){d.pagecontainer("change",a,b)}),c.bindEvents(),b.setupEventHandlers(),!0)},c.register=function(a,b,d,e){void 0===d&&(d=!1);var f=c.stop(),g=a+b,h={route:a,regexp:c.s_router._routeToRegExp(a),page:b,top:d,callback:e||function(){return!1}};return c.pushContext(g,h)&&c.s_router.route(a,g,function(){}),f&&c.start({silent:!0}),c},c.start=function(a){return $.mobile.hashListeningEnabled?(console.log("setting error. confict: $.mobile.hashListeningEnabled = true, cannot start."),!1):Backbone.history.start(a)},c.stop=function(){var a=Backbone.History.started;return Backbone.history.stop(),a},c.isRouting=function(){return Backbone.History.started},c.navigate=function(a,b,d,e){if(c.s_lastNavigateInfo.inNavigation)return void console.log("Router.navigate() called in navigation proc.");if(!c.initFirstPageIfNeeded(a)){var h=$.extend({},c.s_defaultNavigateOptions,e),i=c.s_lastNavigateInfo.calledBeforeRouteChange?g:f;c.s_lastNavigateInfo={url:a,transition:b,reverse:d,backDestination:h.backDestination,noHashChange:h.noHashChange,intent:h.intent||{},positiveNavigate:!0,calledBeforeRouteChange:!0,inNavigation:!0},i().fail(function(){console.error("before route change call, failed.")}).always(function(){if(c.isRouting()&&!c.s_lastNavigateInfo.noHashChange){if(h.subFlow)switch(h.subFlow.operation){case"begin":c.beginSubFlow(h.subFlow);break;case"end":return void c.endSubFlow(h);default:console.warn("unknown subFlow.operation. operation: "+h.subFlow.operation)}c.s_router.navigate(a,h)}else!function(){var b,d=Backbone.history.getFragment(a);b=c.s_lastNavigateInfo.noHashChange?_.find(c.s_rootContexts,function(a){return a.regexp.test(d)}):_.findWhere(c.s_rootContexts,{route:d}),b&&(a=b.page)}(),c.changePage(a)})}},c.back=function(){if(c.s_lastNavigateInfo.inNavigation)return void console.log("Router.back() called in navigation proc.");if(c.isTopPage()){var a=navigator.app||{};if(a.exitApp)return void a.exitApp()}c.s_lastNavigateInfo={inNavigation:!0,calledBeforeRouteChange:!0},f().then(function(){$.mobile.back()}).fail(function(){console.error("before route change call, failed."),c.s_lastNavigateInfo={}})},c.pushIntent=function(a){c.s_lastIntent=$.extend({},c.s_lastIntent,a)},c.popIntent=function(){var a=c.s_lastIntent;return c.s_lastIntent={},a},c.getQueryParameters=function(){return c.s_lastNavigateInfo.intent&&c.s_lastNavigateInfo.intent.params?c.s_lastNavigateInfo.intent.params.queryParams:null},c.isInSubFlow=function(){var a=c.getJqmHistory().stack,b=_.some(a,function(a){return!!a[c.SUBFLOW_PARAM]});return b},c.fromHashChanged=function(){return c.s_lastNavigateInfo.inNavigation&&null==c.s_lastNavigateInfo.positiveNavigate},c.registerPageStack=function(a,b,d){var e=[],f=!1;return a=a instanceof Array?a:[a],b=null==b?!1:b,function(){for(var b=function(a){var b,d,e=Backbone.history.getFragment(a.route),f=_.find(c.s_rootContexts,function(a){return a.regexp.test(e)});return f?(b=c.pathToJqmDataUrl(f.page),d={route:a.route,pageUrl:b,title:a.title,transition:a.transition,url:b}):(console.warn("route is not registered. route: "+a.route),null)},d=0,g=a.length;g>d;d++){var h=b(a[d]);if(!h){f=!0;break}e.push(h)}}(),f?!1:(function(){var a=c.stop(),f=e.length-1,g=e.length-1;c.getJqmHistory().clearForward();for(var h=0,i=f;i>h;h++)location.hash=e[h].route,c.getJqmHistory().stack.push(e[h]),c.getJqmHistory().activeIndex=c.getJqmHistory().stack.length-1;b?(a=!1,c.start({silent:!0}),c.navigate(e[g].route,e[g].transition,!1,d)):(location.hash=e[g].route,c.getJqmHistory().stack.push(e[g]),c.getJqmHistory().activeIndex=c.getJqmHistory().stack.length-1),a&&c.start({silent:!0})}(),!0)},c.customLoadUrl=function(a){var b=c.s_loadUrl(a);return b||c.onRouteFailed(a),b},c.customJqmBack=function(){c.isRouting()?history.back():c.s_back()},c.bindEvents=function(){$(document).one("pagechange",function(){c.s_initOptions.anchorVclick&&$(document).on("vclick","[href]",function(a){c.onAnchorVclicked(a)})}).on("pagebeforeshow",function(a){if(null!=c.s_lastNavigateInfo.backDestination){var b=c.getJqmHistory().getActive();b[c.BACK_DESTINATION_URL]=c.s_lastNavigateInfo.backDestination}}).on("pageshow",function(a){var b=c.getJqmHistory().getActive();b[c.SUBFLOW_PARAM]&&delete b[c.SUBFLOW_PARAM]}).on("pagechange pagecontainerloadfailed",function(a){c.s_lastNavigateInfo={}}),a.setBackButtonHandler(c.back)},c.pushContext=function(a,b){return c.s_rootContexts[a]?(console.log("logic error. route is already registered. name: "+a),!1):(c.s_rootContexts[a]=b,!0)},c.initFirstPageIfNeeded=function(a){return $.mobile.autoInitializePage?!1:($(document).one("pagebeforechange",function(c,d){d.toPage=b.toUrl(a)}),$.mobile.initializePage(),$.mobile.autoInitializePage=!0,!0)},c.isTopPage=function(){var a=Backbone.history.getFragment($.mobile.path.parseUrl(location.href).hash),b=_.find(c.s_rootContexts,function(b){return b.regexp.test(a)});return null==b?!1:b.top},c.onAnchorVclicked=function(a){return c.isJustBeforeVclicked()?(a.preventDefault(),!1):c.followAnchor(a)},c.followAnchor=function(a){var b=$(a.currentTarget),d=b.jqmData("href")||b.attr("href"),e=b.jqmData("transition"),f=b.jqmData("direction"),g=b.attr(c.DATA_BACK_DESTINATION),h=b.attr(c.DATA_NO_HASH_CHANGE)?"true"===b.attr(c.DATA_NO_HASH_CHANGE):!1,i=b.attr(c.DATA_NO_VCLICK_HANDLE)?"true"===b.attr(c.DATA_NO_VCLICK_HANDLE):!1;return i||c.needDefaultOperation(d)?!0:(a.preventDefault(),c.isBackButtonClicked(a)?c.back():c.navigate(d,e,!!f,{noHashChange:h,backDestination:g}),!1)},c.needDefaultOperation=function(a){return a&&"#"!==a?"#"===a[0]?!c.canResolveRoute(a):!1:!0},c.canResolveRoute=function(a){var b=Backbone.history.getFragment(a);return _.any(Backbone.history.handlers,function(a){return a.route.test(b)?!0:void 0})},c.isJustBeforeVclicked=function(){var a=Date.now()-c.s_lastClickedTime<2*c.DELAY_TIME;return c.s_lastClickedTime=Date.now(),a},c.isBackButtonClicked=function(a){return"back"===$(a.currentTarget).jqmData("rel")},c.onRouteSucceeded=function(a){for(var b=[],d=1;d<arguments.length;d++)b[d-1]=arguments[d];var e=c.s_rootContexts[a];if(e){var f={params:{queryParams:b}};c.s_lastNavigateInfo.inNavigation=!0,null!=c.s_lastNavigateInfo.intent&&(f.params=$.extend({},f.params,c.s_lastNavigateInfo.intent.params||{})),c.s_lastNavigateInfo.intent=$.extend({},c.s_lastNavigateInfo.intent,f);var g=e.callback(b);g||c.changePage(e.page)}},c.onRouteFailed=function(a){if(c.s_lastNavigateInfo.inNavigation=!0,null==a&&(a=Backbone.history.getFragment()),c.s_lastNavigateInfo.positiveNavigate){var b=c.s_rootContexts[a];null==b&&(b={route:a,regexp:c.s_router._routeToRegExp(a),page:c.s_lastNavigateInfo.url,top:!1,callback:null},c.pushContext(a,b))}var d=a;null!=c.s_rootContexts[a]&&(d=c.s_rootContexts[a].page),c.changePage(d)},c.changePage=function(a){var d;if(!c.s_lastNavigateInfo.positiveNavigate){if(c.s_lastNavigateInfo.inAdditionalBack)c.s_lastNavigateInfo.inAdditionalBack=!1;else{c.decideDirection(a);var e=c.detectAdditionalBackDistance();if(e>0)return c.s_lastNavigateInfo.inAdditionalBack=!0,c.getJqmHistory().activeIndex-=e,void history.go(-e)}var h=c.detectSubFlowBaseInfo();h.isCurrent&&delete h.stack[c.SUBFLOW_PARAM]}d=c.s_lastNavigateInfo.calledBeforeRouteChange?g:f,d().then(function(){c.s_lastNavigateInfo.intent&&c.pushIntent(c.s_lastNavigateInfo.intent),c.treatUrlHistory(),$.mobile.changePage(b.toUrl(a),{showLoadMsg:!1,allowSamePageTransition:!0,transition:c.s_lastNavigateInfo.transition||"none",reverse:c.s_lastNavigateInfo.reverse,fromHashChange:!c.s_lastNavigateInfo.positiveNavigate,changeHash:!c.s_lastNavigateInfo.noHashChange})}).fail(function(){console.error("before route change call, failed."),c.s_lastNavigateInfo={}})},c.decideDirection=function(a){c.s_lastNavigateInfo.transition=c.getJqmHistory().getActive().transition;var d=$.mobile.path.convertUrlToDataUrl(b.toUrl(a));c.getJqmHistory().direct({url:d,present:function(a,b){switch(b){case"back":c.s_lastNavigateInfo.reverse=!0;break;case"forward":c.s_lastNavigateInfo.transition=a.transition;break;default:console.log("unknown direction: "+b)}},missing:function(){1===c.getJqmHistory().activeIndex?(c.getJqmHistory().previousIndex=1,c.getJqmHistory().activeIndex=0,c.s_lastNavigateInfo.reverse=!0):0!==c.getJqmHistory().activeIndex&&console.log("unknown direction.")}})},c.detectAdditionalBackDistance=function(){var a,b,d,e,f,g,h=c.getJqmHistory().stack,i=c.getJqmHistory().activeIndex,j=c.getJqmHistory().previousIndex;if(!c.s_lastNavigateInfo.reverse||null==j)return 0;if(b=h[j][c.BACK_DESTINATION_URL],null==b)return 0;if(e=Backbone.history.getFragment(b),""===e)return i;if(f=_.find(c.s_rootContexts,function(a){return a.regexp.test(e)}),null==f)return console.warn("back destination is not registered. back-dst: "+b),0;for(g=c.pathToJqmDataUrl(f.page),a=i,d=0;a>=0&&g!==h[a].pageUrl;a--,d++);return 0>a?(console.warn("back destination does not exist in history. back-dst: "+b),0):d},c.beginSubFlow=function(a){var b=c.getJqmHistory().getActive(),d=a;a.destBase?!function(){var b=0,e=Backbone.history.getFragment(a.destBase),f=_.find(c.s_rootContexts,function(a){return a.regexp.test(e)});if(null==f)return void console.warn("base destination is not registered. destBase: "+a.destBase);for(var g=c.pathToJqmDataUrl(f.page),h=c.getJqmHistory().stack,i=c.getJqmHistory().activeIndex;i>=0;i--,b++)if(g===h[i].pageUrl){d.additionalDistance=b;break}}():(d.destBase=location.hash,d.additionalDistance=0),b[c.SUBFLOW_PARAM]=d},c.endSubFlow=function(a){var b=$.extend(!0,{},a),d=c.detectSubFlowBaseInfo(),e=$.extend({},d.subFlowParam,b.subFlow),f=d.distance,g=d.stack,h=100,i=10,j=0,k=function(){j>=i?(console.error("reached navigate max retry count."),c.s_lastNavigateInfo={}):e.destBase!==location.hash?(j++,setTimeout(k,h)):(c.s_lastNavigateInfo.inNavigation=!1,c.registerPageStack(e.destStacks,!0,b))};g?(delete g[c.SUBFLOW_PARAM],c.getJqmHistory().activeIndex-=f,c.getJqmHistory().clearForward(),e.destStacks?(c.stop(),history.go(-f),delete b.subFlow,setTimeout(k,0)):(c.s_lastNavigateInfo.positiveNavigate=!1,history.go(-f))):(console.warn("subFlow begin status does not exist in history."),c.s_lastNavigateInfo={})},c.detectSubFlowBaseInfo=function(){var a,b,d,e=c.getJqmHistory().stack,f=c.getJqmHistory().activeIndex,g={};for(g.additionalDistance=0,a=f,b=0;a>=0;a--,b++)if(e[a][c.SUBFLOW_PARAM]){d=e[a],g=e[a][c.SUBFLOW_PARAM];break}return{stack:d,subFlowParam:g,distance:b+g.additionalDistance,isCurrent:function(){return!(!d||0!==b)}()}},c.pathToJqmDataUrl=function(a){var c=b.toUrl(a),d=$.mobile.path.convertUrlToDataUrl(c);return d},c.treatUrlHistory=function(){(c.s_lastNavigateInfo.positiveNavigate||history.length<c.getJqmHistory().stack.length)&&c.getJqmHistory().clearForward()},c.getJqmHistory=function(){return $.mobile.navigate.history},c.s_initOptions={},c.s_router=null,c.s_rootContexts={},c.s_lastNavigateInfo={},c.s_lastClickedTime=null,c.s_lastIntent={},c.s_loadUrl=null,c.s_back=null,c.DELAY_TIME=200,c.DATA_BACK_DESTINATION="data-back-dst",c.DATA_NO_HASH_CHANGE="data-no-hash-change",c.DATA_NO_VCLICK_HANDLE="data-no-vclick-handle",c.BACK_DESTINATION_URL="backDstUrl",c.SUBFLOW_PARAM="subFlowParam",c.s_defaultInitOptions={anchorVclick:!0},c.s_defaultNavigateOptions={trigger:!0,replace:!1,intent:null},c}();b.Router=h}(b=a.Framework||(a.Framework={}))}(a||(a={}));var a;!function(a){function b(){var b=$.Deferred();return a.Framework.Platform.Mobile?null==a.global.cordova||null==a.global.cordova.exec?$(document).one("deviceready",function(){b.resolve()}):b.resolve():setTimeout(function(){b.resolve()},100),b.promise()}function c(a){var b=d;return d=a,b}a.waitForDeviceReady=b;var d=null;a.setBackButtonHandler=c,function(){b().done(function(){$(document).on("backbutton",function(a){d&&d(a)})})}();var e;!function(b){function c(c){var d=$.Deferred(),e=j(c);return o.calling?(console.warn(n+"cdp.framework.jqm is already initialized, ignored."),d.resolve()):(o.calling=!0,a.initialize({success:function(){return e.applyPatch&&b.Patch.apply(),e.jquery(),k()?($(document).on("mobileinit",function(){e.jquerymobile(),m(e).always(function(a){$(document).one("pagebeforechange",function(a,b){b.options.showLoadMsg=!1}).on("pagebeforecreate",function(a){$(a.target).localize()}),b.Router.initialize({anchorVclick:e.anchorVclick})?(o.done=!0,d.resolve()):(console.error(n+"error. CDP.Framework.Router.initialize() failed."),o.calling=!1,d.reject())})}),void require(["jquery.mobile"])):(console.warn(n+"need to init for 'jquery.mobile', 'i18Next' and 'CDP.Framework.Router' manually, because cdp.framework depends on require.js."),o.done=!0,d.resolve())},fail:function(a){console.error(n+"error. CDP.initialize() failed."),o.calling=!1,d.reject()}}),d.promise())}function d(){return o.done}function e(a,b){q[a]=b}function f(a){delete q[a]}function g(){!function(){var b=a.setBackButtonHandler(null),c=function(a){p&&p.onHardwareBackButton(a)||b(a)};a.setBackButtonHandler(c)}(),function(){var b=a.Framework.setBeforeRouteChangeHandler(null),c=function(){return p?p.onBeforeRouteChange():b()};a.Framework.setBeforeRouteChangeHandler(c)}()}function h(a){p=a,p&&(r=b.getOrientation())}function i(){return b.Patch.s_vclickEvent}function j(b){var c={jquery:function(){$.support.cors=!0,$.ajaxSetup({cache:!1})},jquerymobile:function(){$.mobile.allowCrossDomainPages=!0,$.mobile.defaultPageTransition="none",$.mobile.hashListeningEnabled=!1,$.mobile.pushStateEnabled=!1},i18next:{},applyPatch:!0,anchorVclick:!0};return $.extend({},c,a.global.Config,b)}function k(){return"function"==typeof define&&define.amd}function l(a){var c;return $.ajax({url:b.toUrl(a),method:"GET",async:!1,dataType:"json",success:function(a){c=a},error:function(a,b){console.log(n+"ajax request failed. status: "+b)}}),c}function m(a){var b=$.Deferred(),c=a.i18next,d=function(a){return a?"/"!==a.substr(-1)?a+"/":a:""}(c.modulePath),e=function(a){if(a){for(var b in a)if(a.hasOwnProperty(b))for(var d in a[b])a[b].hasOwnProperty(d)&&(a[b][d]=l(a[b][d]));return c.options.resources=a,c.options}return c.options}(c.fallbackResources);return d&&require.config({paths:{i18next:d+"i18next",i18nextXHRBackend:d+"i18nextXHRBackend",i18nextLocalStorageCache:d+"i18nextLocalStorageCache",i18nextSprintfPostProcessor:d+"i18nextSprintfPostProcessor",i18nextBrowserLanguageDetector:d+"i18nextBrowserLanguageDetector",jqueryI18next:d+"jquery-i18next"}}),require(["jqueryI18next"],function(a){require(["i18next","i18nextXHRBackend","i18nextLocalStorageCache","i18nextSprintfPostProcessor","i18nextBrowserLanguageDetector"],function(c,d,f,g,h){c.use(d).use(f).use(g).use(h).init(e,function(d,e){a.init(c,$,{tName:"t",i18nName:"i18n",handleName:"localize",selectorAttr:"data-i18n",targetAttr:"i18n-target",optionsAttr:"i18n-options",useOptionsAttr:!1,parseDefaultValueFromContent:!0}),b.resolve()})})}),b.promise()}var n="[CDP.Framework] ",o={done:!1,calling:!1},p=null,q={},r=null;b.initialize=c,b.isInitialized=d,b.registerOrientationChangedListener=e,b.unregisterOrientationChangedListener=f,b.setupEventHandlers=g,b.setActivePage=h,b.getDefaultClickEvent=i,$(window).on("resize",function(a){var c=b.getOrientation();if(r!==c){for(var d in q)q[d].onOrientationChanged(c);p&&p.onOrientationChanged(c),r=c}})}(e=a.Framework||(a.Framework={}))}(a||(a={}));var a;return function(a){var b;!function(a){var b=function(){function b(a,b,c){this._url=a,this._id=b,this._owner=null,this._$page=null,this._$header=null,this._$footer=null,this._intent=null,this._initialized=!1,this.setup(c)}return Object.defineProperty(b.prototype,"active",{get:function(){return!!this._$page&&this._$page.hasClass("ui-page-active")},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"url",{get:function(){return this._url},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"$page",{get:function(){return this._$page},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"$header",{get:function(){return this._$header},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"$footer",{get:function(){return this._$footer},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"intent",{get:function(){return this._intent},set:function(a){this._intent=a,this._intent._update=!0},enumerable:!0,configurable:!0}),b.prototype.onOrientationChanged=function(a){this._owner&&this._owner.onOrientationChanged(a)},b.prototype.onHardwareBackButton=function(a){return this._owner?this._owner.onHardwareBackButton(a):!1},b.prototype.onBeforeRouteChange=function(){return this._owner?this._owner.onBeforeRouteChange():$.Deferred().resolve().promise()},b.prototype.onCommand=function(a,b){this._owner&&this._owner.onCommand(a,b)},b.prototype.onInitialize=function(a){this._owner&&this._owner.onInitialize(a)},b.prototype.onPageBeforeCreate=function(a){this._owner&&this._owner.onPageBeforeCreate(a)},b.prototype.onPageInit=function(a){this._owner&&this._owner.onPageInit(a)},b.prototype.onPageBeforeShow=function(a,b){this._owner&&this._owner.onPageBeforeShow(a,b)},b.prototype.onPageShow=function(a,b){this._owner&&this._owner.onPageShow(a,b)},b.prototype.onPageBeforeHide=function(a,b){this._owner&&this._owner.onPageBeforeHide(a,b)},b.prototype.onPageHide=function(a,b){this._owner&&this._owner.onPageHide(a,b)},b.prototype.onPageRemove=function(a){this._owner&&this._owner.onPageRemove(a)},b.prototype.setup=function(b){var c=this;this._initialized=!1,this._intent=null;var d="#"+this._id;$(document).off("pagebeforecreate",d).on("pagebeforecreate",d,function(a){c._$page=$(d).first(),c._$header=c._$page.children(":jqmData(role=header)").first(),c._$footer=c._$page.children(":jqmData(role=footer)").first(),c._$page.on("pagecreate",function(a){c.pageInit(a)}).on("pagebeforeshow",function(a,b){c.pageBeforeShow(a,b)}).on("pageshow",function(a,b){c.pageShow(a,b)}).on("pagebeforehide",function(a,b){c.pageBeforeHide(a,b)}).on("pagehide",function(a,b){c.pageHide(a,b)}).on("pageremove",function(a){c.pageRemove(a)}),c.pageBeforeCreate(a)}),b=b||{},this._owner=b.owner,this._keepIntent=b.keepIntent,null==b.route&&(b.route=this._id),a.Router.register(b.route,this._url,b.top,b.callback)},b.prototype.pageBeforeCreate=function(a){this.onPageBeforeCreate(a)},b.prototype.pageInit=function(a){this._initialized||(this.onInitialize(a),this._initialized=!0),this.onPageInit(a)},b.prototype.pageBeforeShow=function(b,c){a.setActivePage(this),this._intent=a.Router.popIntent(),this.onPageBeforeShow(b,c)},b.prototype.pageShow=function(a,b){this.onPageShow(a,b)},b.prototype.pageBeforeHide=function(b,c){this.onPageBeforeHide(b,c),null!=this._intent&&(this._keepIntent||this._intent._update)?(delete this._intent._update,a.Router.pushIntent(this._intent)):a.Router.fromHashChanged()&&a.Router.isInSubFlow()&&a.Router.pushIntent(this._intent),this._intent=null,a.setActivePage(null)},b.prototype.pageHide=function(a,b){this.onPageHide(a,b)},b.prototype.pageRemove=function(a){this.onPageRemove(a),this._$page.off(),this._$page=null,this._$header.off(),this._$header=null,this._$footer.off(),this._$footer=null},b}();a.Page=b}(b=a.Framework||(a.Framework={}))}(a||(a={})),a.Framework}),function(a,b){"function"==typeof define&&define.amd?define("cdp.tools",["jquery","underscore"],function(c,d){return b(a.CDP||(a.CDP={}),c,d)}):"object"==typeof exports?module.exports=b(a.CDP||(a.CDP={}),require("jquery"),require("underscore")):b(a.CDP||(a.CDP={}),a.jQuery||a.$,a._)}((this||0).self||global,function(a,b,c){a.Tools=a.Tools||{};var a;!function(a){var b;!function(a){a.global=a.global||window}(b=a.Tools||(a.Tools={}))}(a||(a={}));var a;!function(a){var b;!function(a){var b;!function(b){function c(){return a.global.BlobBuilder||a.global.WebKitBlobBuilder||a.global.MozBlobBuilder||a.global.MSBlobBuilder}function d(b,d){var e=null,f=c();if(null!=f){var g=new f;g.append(b),e=g.getBlob(d)}else e=new a.global.Blob([b],{type:d});return e}function e(b,d){var e=null,g=c();if(null!=g){var h=new g;h.append(f(b)),e=h.getBlob(d)}else e=new a.global.Blob([f(b)],{type:d});return e}function f(a){for(var b=window.atob(a),c=new ArrayBuffer(b.length),d=new Uint8Array(c),e=0,f=b.length;f>e;++e)d[e]=b.charCodeAt(e);return c}function g(a){for(var b=window.atob(a),c=new Uint8Array(b.length),d=0,e=b.length;e>d;++d)c[d]=b.charCodeAt(d);return c}function h(a){var b=new Uint8Array(a);return this.uint8ArrayToBase64(b)}function i(a){for(var b="",c=0,d=a.byteLength;d>c;++c)b+=String.fromCharCode(a[c]);return window.btoa(b)}b.arrayBufferToBlob=d,b.base64ToBlob=e,b.base64ToArrayBuffer=f,b.base64ToUint8Array=g,b.arrayBufferToBase64=h,b.uint8ArrayToBase64=i,b.URL=function(){return a.global.URL||a.global.webkitURL}()}(b=a.Blob||(a.Blob={}))}(b=a.Tools||(a.Tools={}))}(a||(a={}));var a;!function(a){var b;!function(a){var b="[CDP.Tools.DateTime] ",c=function(){function a(){}return a.computeDate=function(a,b){var c=new Date(a.getTime()),d=c.getTime(),e=864e5*b,f=d+e;return c.setTime(f),c},a.convertISOStringToDate=function(a){var b,c,d,e=a.split("T"),f=e[0].split("-");return e[1]&&(b=e[1].split(":"),c=b[2].split(".")),d=b?new Date(f[0],f[1]-1,f[2],b[0],b[1],c[0],c[1]):f[2]?new Date(f[0],f[1]-1,f[2]):f[1]?new Date(f[0],f[1]-1):new Date(f[0])},a.convertDateToISOString=function(c,d){void 0===d&&(d="msec");var e;switch(d){case"year":case"month":case"date":case"hour":case"min":case"sec":case"msec":break;default:console.warn(b+"unknown target: "+d),d="msec"}return e=c.getFullYear(),"year"===d?e:(e+="-"+a.numberToDoubleDigitsString(c.getMonth()+1),"month"===d?e:(e+="-"+a.numberToDoubleDigitsString(c.getDate()),"date"===d?e:(e+="T"+a.numberToDoubleDigitsString(c.getHours()),"hour"===d?e:(e+=":"+a.numberToDoubleDigitsString(c.getMinutes()),"min"===d?e:(e+=":"+a.numberToDoubleDigitsString(c.getSeconds()),"sec"===d?e:e+="."+String((c.getMilliseconds()/1e3).toFixed(3)).slice(2,5))))))},a.convertFileSystemStringToDate=function(a){var b,c,d=a.split("T"),e=d[0].split("_");return d[1]&&(b=d[1].split("_")),c=b?new Date(e[0],e[1]-1,e[2],b[0],b[1],b[2],b[3]):e[2]?new Date(e[0],e[1]-1,e[2]):e[1]?new Date(e[0],e[1]-1):new Date(e[0])},a.convertDateToFileSystemString=function(c,d){void 0===d&&(d="msec");var e;switch(d){case"year":case"month":case"date":case"hour":case"min":case"sec":case"msec":break;default:console.warn(b+"unknown target: "+d),d="msec"}return e=c.getFullYear(),"year"===d?e:(e+="_"+a.numberToDoubleDigitsString(c.getMonth()+1),"month"===d?e:(e+="_"+a.numberToDoubleDigitsString(c.getDate()),"date"===d?e:(e+="T"+a.numberToDoubleDigitsString(c.getHours()),"hour"===d?e:(e+="_"+a.numberToDoubleDigitsString(c.getMinutes()),"min"===d?e:(e+="_"+a.numberToDoubleDigitsString(c.getSeconds()),"sec"===d?e:e+="_"+String((c.getMilliseconds()/1e3).toFixed(3)).slice(2,5))))))},a.numberToDoubleDigitsString=function(a){return 0>a||a>100?null:10>a?"0"+a:""+a},a}();a.DateTime=c}(b=a.Tools||(a.Tools={}))}(a||(a={}));var a;!function(a){var c;!function(a){function c(a){return a>=0?a:-a}function d(a,b){return a>=b?a:b}function e(a,b){return b>=a?a:b}function f(a,c){void 0===c&&(c=0);var d=b.Deferred(),e=function(){a()?d.resolve():setTimeout(e,c)};return setTimeout(e,c),d.promise()}function g(b,c){var d="";return b=Number(b),isNaN(b)||isNaN(c)||0>=c?null:(0>b&&(b=a.abs(b),d="-"),d+(Array(c).join("0")+b).slice(-c))}function h(a,c){function d(){this.constructor=a}var e=a.prototype;d.prototype=c.prototype,a.prototype=new d,b.extend(a.prototype,e)}function i(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];b.forEach(function(b){Object.getOwnPropertyNames(b.prototype).forEach(function(c){a.prototype[c]=b.prototype[c]})})}function j(a,c){var d,e=this;d=a&&a.hasOwnProperty("constructor")?a.constructor:function(){return e.apply(this,arguments)},b.extend(d,e,c);var f=function(){this.constructor=d};return f.prototype=e.prototype,d.prototype=new f,a&&b.extend(d.prototype,a),d.__super__=e.prototype,d}function k(){var a,b=navigator.userAgent.toLowerCase().indexOf("firefox")>-1;return null==window.devicePixelRatio||b?window.matchMedia?(a="(-webkit-min-device-pixel-ratio: 1.5),                    (min--moz-device-pixel-ratio: 1.5),                    (-o-min-device-pixel-ratio: 3/2),                    (min-resolution: 1.5dppx)",window.matchMedia(a).matches?1.5:(a="(-webkit-min-device-pixel-ratio: 2),                    (min--moz-device-pixel-ratio: 2),                    (-o-min-device-pixel-ratio: 2/1),                    (min-resolution: 2dppx)",window.matchMedia(a).matches?2:(a="(-webkit-min-device-pixel-ratio: 0.75),                    (min--moz-device-pixel-ratio: 0.75),                    (-o-min-device-pixel-ratio: 3/4),                    (min-resolution: 0.75dppx)",window.matchMedia(a).matches?.7:void 0))):1:window.devicePixelRatio}function l(a,c){var d=b.Deferred();
if(!a)return d.reject("null argument");var e;switch(typeof a){case"object":e=a;break;case"string":try{e=new Worker(a)}catch(f){return console.error(m+f),d.reject(f)}break;default:return d.reject("invalid type argument")}return e.onerror=function(a){return d.reject(a)},e.onmessage=function(a){return d.resolve(a.data)},e.postMessage(c),d.promise()}var m="[CDP.Tools.Functions] ";a.abs=c,a.max=d,a.min=e,a.await=f,a.toZeroPadding=g,a.inherit=h,a.mixin=i,a.extend=j,a.getDevicePixcelRatio=k,a.doWork=l}(c=a.Tools||(a.Tools={}))}(a||(a={}));var a;return function(a){var d;!function(a){var d="[CDP.Tools.Template] ",e=function(){function e(){}return e.getTemplateElement=function(a,c){var f=e.getElementMap(),g=f[a];try{if(!g){if(c){var h=e.findHtmlFromSource(c);g=b(h).find(a)}else g=b(a);if(0>=g)throw"invalid [key, src] = ["+a+", "+c+"]";f[a]=g}}catch(i){return console.error(d+i),null}return g},e.empty=function(){e._mapElement=null,e._mapSource=null},e.getJST=function(b,d){var e,f=this.getTemplateElement(b,d),g=null;return null!=a.global.Hogan?(g=Hogan.compile(f.text()),e=function(a){return g.render(a)}):(g=c.template(f.html()),e=function(a){return g(a).replace(/\n|\t/g,"")}),e},e.getElementMap=function(){return e._mapElement||(e._mapElement={}),e._mapElement},e.getSourceMap=function(){return e._mapSource||(e._mapSource={}),e._mapSource},e.findHtmlFromSource=function(a){var c=e.getSourceMap(),d=c[a];return d||(b.ajax({url:a,method:"GET",async:!1,dataType:"html",success:function(a){d=a},error:function(a,b){throw"ajax request failed. status: "+b}}),c[a]=d),d},e}();a.Template=e}(d=a.Tools||(a.Tools={}))}(a||(a={})),a.Tools}),function(a,b){"function"==typeof define&&define.amd?define("cdp.ui.listview",["jquery","underscore","backbone"],function(c,d,e){return b(a.CDP||(a.CDP={}),c,d,e)}):"object"==typeof exports?module.exports=b(a.CDP||(a.CDP={}),require("jquery"),require("underscore"),require("backbone")):b(a.CDP||(a.CDP={}),a.$,a._,a.Backbone)}((this||0).self||global,function(a,b,c,d){a.UI=a.UI||{};var a,e=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};!function(a){var b;!function(a){var b;!function(a){a.WRAPPER_CLASS="listview-wrapper",a.WRAPPER_SELECTOR="."+a.WRAPPER_CLASS,a.SCROLL_MAP_CLASS="listview-scroll-map",a.SCROLL_MAP_SELECTOR="."+a.SCROLL_MAP_CLASS,a.INACTIVE_CLASS="inactive",a.INACTIVE_CLASS_SELECTOR="."+a.INACTIVE_CLASS,a.RECYCLE_CLASS="listview-recycle",a.RECYCLE_CLASS_SELECTOR="."+a.RECYCLE_CLASS,a.LISTITEM_BASE_CLASS="listview-item-base",a.LISTITEM_BASE_CLASS_SELECTOR="."+a.LISTITEM_BASE_CLASS,a.DATA_PAGE_INDEX="data-page-index",a.DATA_CONTAINER_INDEX="data-container-index"}(b=a.ListViewGlobalConfig||(a.ListViewGlobalConfig={}))}(b=a.UI||(a.UI={}))}(a||(a={}));var a;!function(a){var c;!function(c){var d=a.UI.ListViewGlobalConfig,e=a.UI._ListViewUtils,f="[CDP.UI.LineProfile] ",g=function(){function a(a,b,c,d){this._owner=a,this._height=b,this._initializer=c,this._info=d,this._index=null,this._pageIndex=null,this._offset=null,this._$base=null,this._instance=null}return a.prototype.activate=function(){if(null==this._instance){var a=void 0;this._$base=this.prepareBaseElement(),a=b.extend({},{el:this._$base,owner:this._owner,lineProfile:this},this._info),this._instance=new this._initializer(a),"none"===this._$base.css("display")&&this._$base.css("display","block")}this.updatePageIndex(this._$base),"visible"!==this._$base.css("visibility")&&this._$base.css("visibility","visible")},a.prototype.hide=function(){null==this._instance&&this.activate(),"hidden"!==this._$base.css("visibility")&&this._$base.css("visibility","hidden")},a.prototype.inactivate=function(){null!=this._instance&&("visible"!==this._$base.css("visibility")&&this._$base.css("visibility","visible"),this._instance.remove(),this._instance=null,this._$base.addClass(d.RECYCLE_CLASS),this._$base.css("display","none"),this._$base=null)},a.prototype.refresh=function(){null!=this._instance&&this._instance.render()},a.prototype.isActive=function(){return null!=this._instance},a.prototype.updateHeight=function(a,b){var c=a-this._height;this._height=a,this._owner.updateScrollMapHeight(c),null!=b&&b.reflectAll&&this._owner.updateProfiles(this._index)},a.prototype.resetDepth=function(){null!=this._instance&&this._$base.css("z-index",this._owner.getListViewOptions().baseDepth)},Object.defineProperty(a.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"index",{get:function(){return this._index},set:function(a){this._index=a,null!=this._$base&&this.updateIndex(this._$base)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"pageIndex",{get:function(){return this._pageIndex},set:function(a){this._pageIndex=a,null!=this._$base&&this.updatePageIndex(this._$base)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"offset",{get:function(){return this._offset},set:function(a){this._offset=a,null!=this._$base&&this.updateOffset(this._$base)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"info",{get:function(){return this._info},enumerable:!0,configurable:!0}),a.prototype.prepareBaseElement=function(){var a,c=this._owner.getScrollMapElement(),e=this._owner.findRecycleElements().first(),g=this._owner.getListViewOptions().itemTagName;return null!=this._$base?(console.warn(f+"this._$base is not null."),this._$base):(0<e.length?(a=e,a.removeAttr("z-index"),a.removeClass(d.RECYCLE_CLASS)):(a=b("<"+g+" class='"+d.LISTITEM_BASE_CLASS+"'></"+g+">"),a.css("display","none"),c.append(a)),a.height()!==this._height&&a.height(this._height),this.updateIndex(a),this.updateOffset(a),a)},a.prototype.updateIndex=function(a){a.attr(d.DATA_CONTAINER_INDEX)!==this._index.toString()&&a.attr(d.DATA_CONTAINER_INDEX,this._index.toString())},a.prototype.updatePageIndex=function(a){a.attr(d.DATA_PAGE_INDEX)!==this._pageIndex.toString()&&a.attr(d.DATA_PAGE_INDEX,this._pageIndex.toString())},a.prototype.updateOffset=function(a){var b={};if(this._owner.getListViewOptions().enableTransformOffset){if(e.getCssMatrixValue(a,"translateY")!==this._offset){for(var c=0;c<e.cssPrefixes.length;c++)b[e.cssPrefixes[c]+"transform"]="translate3d(0px,"+this._offset+"px,0px)";a.css(b)}}else parseInt(a.css("top"),10)!==this._offset&&a.css("top",this._offset+"px")},a}();c.LineProfile=g}(c=a.UI||(a.UI={}))}(a||(a={}));var a;!function(a){var c;!function(a){var c="[CDP.UI.GroupProfile] ",d=function(){function d(a,b){this._id=a,this._owner=b,this._parent=null,this._children=[],this._expanded=!1,this._status="unregistered",this._mapLines={}}return d.prototype.addItem=function(c,e,f,g){var h,i=b.extend({},{groupProfile:this},f);return null==g&&(g=d.LAYOUT_KEY_DEFAULT),null==this._mapLines[g]&&(this._mapLines[g]=[]),h=new a.LineProfile(this._owner.core,Math.floor(c),e,i),"registered"!==this._status||null!=this._owner.layoutKey&&g!==this._owner.layoutKey||(this._owner._addLine(h,this.getLastLineIndex()+1),this._owner.update()),this._mapLines[g].push(h),this},d.prototype.addChildren=function(a){var b=this,c=a instanceof Array?a:[a];return c.forEach(function(a){a.setParent(b)}),this._children=this._children.concat(c),this},d.prototype.getParent=function(){return this._parent},d.prototype.getChildren=function(){return this._children},d.prototype.hasChildren=function(a){return this._children.length<=0?!1:null!=a?this._children[0].hasLayoutKeyOf(a):!0},d.prototype.hasLayoutKeyOf=function(a){return null==a&&(a=d.LAYOUT_KEY_DEFAULT),null!=this._mapLines[a]},d.prototype.expand=function(){var a=this,b=[];this._lines.length<0?console.warn(c+"this group has no lines."):this.hasChildren()?this.isExpanded()||(b=this.queryOperationTarget("registered"),this._expanded=!0,0<b.length&&this._owner.statusScope("expanding",function(){a._lines.forEach(function(a){a.refresh()}),a._owner._addLine(b,a.getLastLineIndex()+1),a._owner.update()})):console.warn(c+"this group has no children.")},d.prototype.collapse=function(a){var b=this,d=[];this.hasChildren()?this.isExpanded()&&(d=this.queryOperationTarget("unregistered"),this._expanded=!1,0<d.length&&(a=null!=a?a:this._owner.core.getListViewOptions().animationDuration,this._owner.statusScope("collapsing",function(){b._lines.forEach(function(a){a.refresh()}),b._owner.removeItem(d[0].index,d.length,a),b._owner.update()}))):console.warn(c+"this group has no children.")},d.prototype.ensureVisible=function(a){0<this._lines.length?this._owner.ensureVisible(this._lines[0].index,a):null!=a.callback&&a.callback()},d.prototype.toggle=function(a){this._expanded?this.collapse(a):this.expand()},d.prototype.isExpanded=function(){return this._expanded},d.prototype.register=function(a){return this._parent?console.error(c+"logic error: 'register' method is acceptable only top group."):this._owner._addLine(this.preprocess("registered"),a),this},d.prototype.restore=function(){var a=[];return this._parent?console.error(c+"logic error: 'restore' method is acceptable only top group."):this._lines&&(a=this._expanded?this._lines.concat(this.queryOperationTarget("active")):this._lines,this._owner._addLine(a)),this},d.prototype.getLastLineIndex=function(a){var b=this;void 0===a&&(a=!1);var d=function(){var c;return a&&(c=b.queryOperationTarget("active")),(null==c||c.length<=0)&&(c=b._lines),c}();return d.length<=0?(console.error(c+"logic error: this group is stil not registered."),null):d[d.length-1].index},Object.defineProperty(d.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"status",{get:function(){return this._status},enumerable:!0,configurable:!0}),d.prototype.setParent=function(a){this._parent=a},d.prototype.preprocess=function(a){var b=[];return a!==this._status&&null!=this._lines&&(b=this._lines),this._status=a,b},d.prototype.queryOperationTarget=function(a){var b=function(d){var e=[];return d._children.forEach(function(d){switch(a){case"registered":e=e.concat(d.preprocess(a));break;case"unregistered":e=e.concat(d.preprocess(a));break;case"active":null!=d._lines&&(e=e.concat(d._lines));break;default:return void console.warn(c+"unknown operation: "+a)}d.isExpanded()&&(e=e.concat(b(d)))}),e};return b(this)},Object.defineProperty(d.prototype,"_lines",{get:function(){var a=this._owner.layoutKey;return null!=a?this._mapLines[a]:this._mapLines[d.LAYOUT_KEY_DEFAULT]},enumerable:!0,configurable:!0}),d.LAYOUT_KEY_DEFAULT="-layout-default",d}();a.GroupProfile=d}(c=a.UI||(a.UI={}))}(a||(a={}));var a;!function(a){var d;!function(d){function e(a,b){var d=a,e=b instanceof Array?b:[b];return e.forEach(function(a){var b={};c.extendOwn(b,a.prototype),delete b.constructor,d=d.extend(b)}),d}function f(a,b){var c,d=b instanceof Array?b:[b];c=2<=d.length?e(d[0],d.slice(1)):d[0],a=e(c,a)}function g(a,b){var c=b instanceof Array?b:[b];c.forEach(function(b){Object.getOwnPropertyNames(b.prototype).forEach(function(c){a.prototype[c]=b.prototype[c]})})}d.global=a.global||window,d.composeViews=e,d.deriveViews=f,d.mixinViews=g;var h;!function(a){a.cssPrefixes=["-webkit-","-moz-","-ms-","-o-",""],a.getCssMatrixValue=function(c,d){for(var e=0,f=0,g=0,h=0,i=0;i<a.cssPrefixes.length;i++){var j=b(c).css(a.cssPrefixes[i]+"transform");if(j){var k=-1!==j.indexOf("3d");j=j.replace("matrix3d","").replace("matrix","").replace(/[^\d.,-]/g,"");var l=j.split(",");e=Number(l[k?12:4]),f=Number(l[k?13:5]),g=Number(l[0]),h=Number(l[k?5:3]);break}}switch(d){case"translateX":return isNaN(e)?0:e;case"translateY":return isNaN(f)?0:f;case"scaleX":return isNaN(g)?1:g;case"scaleY":return isNaN(h)?1:h;default:return 0}},a.transitionEnd="transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",a.setTransformsTransitions=function(c,d,e,f){for(var g=b(c),h={},i=e/1e3+"s",j=" "+i+" "+f,k=", transform"+j,l=0;l<a.cssPrefixes.length;l++)h[a.cssPrefixes[l]+"transition"]=d+j+k;g.css(h)},a.clearTransitions=function(c){var d=b(c);d.off(a.transitionEnd);for(var e={},f=0;f<a.cssPrefixes.length;f++)e[a.cssPrefixes[f]+"transition"]="";d.css(e)},a.abs=function(a){return a>=0?a:-a},a.max=function(a,b){return a>=b?a:b}}(h=d._ListViewUtils||(d._ListViewUtils={}))}(d=a.UI||(a.UI={}))}(a||(a={}));var a;!function(a){var b;!function(a){var b=function(){function a(){this._status={}}return a.prototype.statusAddRef=function(a){return this._status[a]?this._status[a]++:this._status[a]=1,this._status[a]},a.prototype.statusRelease=function(a){var b;return this._status[a]?(this._status[a]--,b=this._status[a],0===b&&delete this._status[a]):b=0,b},a.prototype.statusScope=function(a,b){this.statusAddRef(a),b(),this.statusRelease(a)},a.prototype.isStatusIn=function(a){return!!this._status[a]},a}();a.StatusManager=b}(b=a.UI||(a.UI={}))}(a||(a={}));var a;!function(a){var b;!function(a){var b=function(){function a(){this._index=0,this._offset=0,this._height=0,this._lines=[],this._status="inactive"}return a.prototype.activate=function(){"active"!==this._status&&this._lines.forEach(function(a){a.activate()}),this._status="active"},a.prototype.hide=function(){"hidden"!==this._status&&this._lines.forEach(function(a){a.hide()}),this._status="hidden"},a.prototype.inactivate=function(){"inactive"!==this._status&&this._lines.forEach(function(a){a.inactivate()}),this._status="inactive"},a.prototype.push=function(a){this._lines.push(a),this._height+=a.height},a.prototype.normalize=function(){var a=c.every(this._lines,function(a){return a.isActive()});a||(this._status="inactive")},a.prototype.getLineProfile=function(a){return a>=0&&a<this._lines.length?this._lines[a]:null},a.prototype.getLineProfileFirst=function(){return this.getLineProfile(0)},a.prototype.getLineProfileLast=function(){return this.getLineProfile(this._lines.length-1)},Object.defineProperty(a.prototype,"index",{get:function(){return this._index},set:function(a){this._index=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"offset",{get:function(){return this._offset},set:function(a){this._offset=a},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"status",{get:function(){return this._status},enumerable:!0,configurable:!0}),a}();a.PageProfile=b}(b=a.UI||(a.UI={}))}(a||(a={}));var a;!function(a){var c;!function(c){var d=a.UI._ListViewUtils,e="[CDP.UI.ScrollerElement] ",f=function(){function a(a,c){this._$target=null,this._$scrollMap=null,this._listviewOptions=null,this._$target=b(a),this._listviewOptions=c}return a.prototype.getType=function(){return a.TYPE},a.prototype.getPos=function(){return this._$target.scrollTop()},a.prototype.getPosMax=function(){return null==this._$scrollMap&&(this._$scrollMap=this._$target.children().first()),d.max(this._$scrollMap.height()-this._$target.height(),0)},a.prototype.on=function(a,b){switch(a){case"scroll":this._$target.on("scroll",b);break;case"scrollstop":this._$target.on("scrollstop",b);break;default:console.warn(e+"unsupported type: "+a)}},a.prototype.off=function(a,b){switch(a){case"scroll":this._$target.off("scroll",b);break;case"scrollstop":this._$target.off("scrollstop",b);break;default:console.warn(e+"unsupported type: "+a)}},a.prototype.scrollTo=function(a,b,c){this._listviewOptions.enableAnimation&&b?(null==c&&(c=this._listviewOptions.animationDuration),this._$target.animate({scrollTop:a},c)):this._$target.scrollTop(a)},a.prototype.update=function(){},a.prototype.destroy=function(){this._$scrollMap=null,this._$target&&(this._$target.off(),this._$target=null)},Object.defineProperty(a,"TYPE",{get:function(){return"element-overflow"},enumerable:!0,configurable:!0}),a.getFactory=function(){var b=function(b,c){return new a(b,c)};return b.type=a.TYPE,b},a}();c.ScrollerElement=f}(c=a.UI||(a.UI={}))}(a||(a={}));var a;!function(a){var c;!function(c){var d=a.UI._ListViewUtils,e="[CDP.UI.ScrollerNative] ",f=function(){function a(a){this._$body=null,this._$target=null,this._$scrollMap=null,this._listviewOptions=null,this._$target=b(document),this._$body=b("body"),this._listviewOptions=a}return a.prototype.getType=function(){return a.TYPE},a.prototype.getPos=function(){return this._$target.scrollTop()},a.prototype.getPosMax=function(){return d.max(this._$target.height()-window.innerHeight,0)},a.prototype.on=function(a,c){switch(a){case"scroll":this._$target.on("scroll",c);break;case"scrollstop":b(window).on("scrollstop",c);break;default:console.warn(e+"unsupported type: "+a)}},a.prototype.off=function(a,c){switch(a){case"scroll":this._$target.off("scroll",c);break;case"scrollstop":b(window).off("scrollstop",c);break;default:console.warn(e+"unsupported type: "+a)}},a.prototype.scrollTo=function(a,b,c){this._listviewOptions.enableAnimation&&b?(null==c&&(c=this._listviewOptions.animationDuration),this._$body.animate({scrollTop:a},c)):this._$body.scrollTop(a)},a.prototype.update=function(){},a.prototype.destroy=function(){this._$scrollMap=null,this._$target=null},Object.defineProperty(a,"TYPE",{get:function(){return"native-scroll"},enumerable:!0,configurable:!0}),a.getFactory=function(){var b=function(b,c){return new a(c)};return b.type=a.TYPE,b},a}();c.ScrollerNative=f}(c=a.UI||(a.UI={}))}(a||(a={}));var a;!function(a){var d;!function(d){var e=a.UI.ListViewGlobalConfig,f=a.UI._ListViewUtils,g="[CDP.UI.ScrollerIScroll] ",h=function(){function a(a,c,e,f){this._$owner=null,this._iscroll=null,this._refreshTimerId=null,this._$wrapper=null,this._$scroller=null,this._listviewOptions=null,null!=d.global.IScroll?(this._$owner=a,this._iscroll=new IScroll(c,e),this._$wrapper=b(this._iscroll.wrapper),this._$scroller=b(this._iscroll.scroller),this._listviewOptions=f):console.error(g+"iscroll module doesn't load.")}return a.prototype.getType=function(){return a.TYPE},a.prototype.getPos=function(){var a=this._iscroll.getComputedPosition().y;return a=c.isNaN(a)?0:-a},a.prototype.getPosMax=function(){return f.max(-this._iscroll.maxScrollY,0)},a.prototype.on=function(a,b){switch(a){case"scroll":this._iscroll.on("scroll",b);break;case"scrollstop":this._iscroll.on("scrollEnd",b);break;default:console.warn(g+"unsupported type: "+a)}},a.prototype.off=function(a,b){switch(a){case"scroll":this._iscroll.off("scroll",b);break;case"scrollstop":this._iscroll.on("scrollEnd",b);break;default:console.warn(g+"unsupported type: "+a)}},a.prototype.scrollTo=function(a,b,c){c=0,this._listviewOptions.enableAnimation&&b&&(c=c||this._listviewOptions.animationDuration),this._iscroll.scrollTo(0,-a,c)},a.prototype.update=function(){var a=this;if(this._$owner){!function(){var b=a._$owner.height();b!==a._$wrapper.height()&&a._$wrapper.height(b)}(),null!=this._refreshTimerId&&clearTimeout(this._refreshTimerId);var b=function(){a._$scroller&&a._$scroller.height()!==a._iscroll.scrollerHeight?(a._iscroll.refresh(),a._refreshTimerId=setTimeout(b,a._listviewOptions.scrollMapRefreshInterval)):a._refreshTimerId=null};this._iscroll.refresh(),this._refreshTimerId=setTimeout(b,this._listviewOptions.scrollMapRefreshInterval)}},a.prototype.destroy=function(){this._$scroller=null,this._$wrapper=null,this._iscroll.destroy(),this._$owner=null},Object.defineProperty(a,"TYPE",{get:function(){return"iscroll"},enumerable:!0,configurable:!0}),a.getFactory=function(c){var d={scrollX:!1,bounce:!1,mouseWheel:!0,scrollbars:!0,interactiveScrollbars:!0,shrinkScrollbars:"scale",fadeScrollbars:!0,probeType:2},f=b.extend({},d,c),g=function(c,d){var g=b(c),h=g.find(e.SCROLL_MAP_SELECTOR),i=b("<div class='"+e.WRAPPER_CLASS+"'></div>").css({position:"absolute",width:"100%",height:"100%",overflow:"hidden"});return h.wrap(i),new a(g,e.WRAPPER_SELECTOR,f,d)};return g.type=a.TYPE,g},a}();d.ScrollerIScroll=h}(d=a.UI||(a.UI={}))}(a||(a={}));var a;!function(a){var b;!function(a){var b="[CDP.UI.ListItemView] ",c=function(c){function d(a){if(c.call(this,a),this._owner=null,this._lineProfile=null,this._owner=a.owner,a.$el){var b=!!this.events;this.setElement(a.$el,b)}this._lineProfile=a.lineProfile}return e(d,c),d.prototype.render=function(){return console.warn(b+"need override 'render()' method."),this},d.prototype.getIndex=function(){return this._lineProfile.index},d.prototype.getSpecifiedHeight=function(){return this._lineProfile.height},d.prototype.hasChildNode=function(){return this.$el?0<this.$el.children().length:!1},d.prototype.updateHeight=function(a,b){return this.$el&&this.getSpecifiedHeight()!==a&&(this._lineProfile.updateHeight(a,b),this.$el.height(a)),this},d.compose=function(b,c,e){var f=a.composeViews(d,b);return f.extend(c,e)},d.prototype.remove=function(){return this.$el.find("figure").css("background-image","none"),this.$el.children().remove(),this.$el.off(),this.$el=null,this.stopListening(),this._lineProfile=null,this},Object.defineProperty(d.prototype,"owner",{get:function(){return this._owner},enumerable:!0,configurable:!0}),d}(d.View);a.ListItemView=c}(b=a.UI||(a.UI={}))}(a||(a={}));var a;!function(a){var d;!function(d){var e=a.UI.ListViewGlobalConfig,f=a.UI._ListViewUtils,g="[CDP.UI.ScrollManager] ",h=function(){function a(a){var c=this;this._$root=null,this._$map=null,this._mapHeight=0,this._scroller=null,this._settings=null,this._active=!0,this._scrollEventHandler=null,this._scrollStopEventHandler=null,this._baseHeight=0,this._lines=[],this._pages=[],this._lastActivePageContext={index:0,from:0,to:0,pos:0},this._backup={};var e={scrollerFactory:d.ScrollerNative.getFactory(),enableHiddenPage:!1,enableTransformOffset:!1,scrollMapRefreshInterval:200,scrollRefreshDistance:200,pagePrepareCount:3,pagePreloadCount:1,enableAnimation:!0,animationDuration:0,baseDepth:"auto",itemTagName:"div",removeItemWithTransition:!0,useDummyInactiveScrollMap:!1};this._settings=b.extend({},e,a),this._scrollEventHandler=function(a){c.onScroll(c._scroller.getPos())},this._scrollStopEventHandler=function(a){c.onScrollStop(c._scroller.getPos())}}return a.prototype.initialize=function(a,b){return this._$root&&this.destroy(),this._$root=a,this._$map=a.hasClass(e.SCROLL_MAP_CLASS)?a:a.find(e.SCROLL_MAP_SELECTOR),this._$map.length<=0?(this._$root=null,!1):(this._scroller=this.createScroller(),this.setBaseHeight(b),this.setScrollerCondition(),!0)},a.prototype.destroy=function(){this._scroller&&(this.resetScrollerCondition(),this._scroller.destroy(),this._scroller=null),this.release(),this._$map=null,this._$root=null},a.prototype.setBaseHeight=function(a){this._baseHeight=a,this._baseHeight<=0&&console.warn(g+"invalid base height: "+this._baseHeight),this._scroller&&this._scroller.update()},a.prototype.setActiveState=function(a){this._active=a,this.treatScrollPosition()},a.prototype.isActive=function(){return this._active},a.prototype.getScrollerType=function(){return this._settings.scrollerFactory.type},a.prototype.treatScrollPosition=function(){var a,b=this,c={},d=function(d,e){if(e=e||b._scroller.getPos()-b._lastActivePageContext.pos,f.getCssMatrixValue(d,"translateY")!==e){for(a=0;a<f.cssPrefixes.length;a++)c[f.cssPrefixes[a]+"transform"]="translate3d(0px,"+e+"px,0px)";return d.css(c),d}},e=function(b){for(a=0;a<f.cssPrefixes.length;a++)c[f.cssPrefixes[a]+"transform"]="";return b.css(c),b};this._active?(!function(){b._scroller&&b._scroller.scrollTo(b._lastActivePageContext.pos,!1,0),e(b._$map).css("display","block")}(),this._settings.useDummyInactiveScrollMap&&this.prepareInactiveMap().remove()):d(this._settings.useDummyInactiveScrollMap?this.prepareInactiveMap():this._$map)},a.prototype.prepareInactiveMap=function(){var a=this._$map.parent(),c=a.find(e.INACTIVE_CLASS_SELECTOR);if(c.length<=0){var d=this.getPageIndex(),f=this._$map.clone().children().filter(function(a,c){var f=~~b(c).attr(e.DATA_PAGE_INDEX);return f>=d-1||d+1>=f});c=b("<section class='"+e.SCROLL_MAP_CLASS+" "+e.INACTIVE_CLASS+"'></section>").append(f).height(this._mapHeight),a.append(c),this._$map.css("display","none")}return c},a.prototype.isInitialized=function(){return!!this._$root},a.prototype.addItem=function(a,b,c,e){this._addLine(new d.LineProfile(this,Math.floor(a),b,c),e)},a.prototype._addLine=function(a,b){var c,d,e=0,f=a instanceof Array?a:[a],g=!1;for(null==b&&(b=this._lines.length),b===this._lines.length&&(g=!0),c=0,d=f.length;d>c;c++)e+=f[c].height;for(this.updateScrollMapHeight(e),c=f.length-1;c>=0;c--)this._lines.splice(b,0,f[c]);g||(0===b?this.clearPage():null!=this._lines[b-1].pageIndex&&this.clearPage(this._lines[b-1].pageIndex)),this.updateProfiles(b)},a.prototype.removeItem=function(a,b,c){var d=this;if(null==b&&(b=1),0>a||this._lines.length<a+b)return void console.error(g+"logic error. GroupProfile.removeItem(), invalid index: "+a);c=null!=c?c:0;var e=function(a,b){var c=function(b){a.off(f.transitionEnd),f.clearTransitions(a)};d._$map.on(f.transitionEnd,c),f.setTransformsTransitions(a,"height",b,"ease")},h=0,i=[],j=!1;!function(){for(var e,f=0;b>f;f++)e=d._lines[a+f],h+=e.height,e.resetDepth(),i.push(e);if(d._settings.removeItemWithTransition&&c>0){var g=d.getScrollPos(),k=d.getScrollPosMax()-h;j=g>k}}(),function(){j&&e(d._$map,c),null!=d._lines[a].pageIndex&&d.clearPage(d._lines[a].pageIndex),d.updateScrollMapHeight(-h),d._lines.splice(a,b),d.updateProfiles(a),setTimeout(function(){i.forEach(function(a){a.inactivate()})},c)}()},a.prototype.getItemInfo=function(a){var c,d=function(a){return a.hasClass(e.LISTITEM_BASE_CLASS)?~~a.attr(e.DATA_CONTAINER_INDEX):a.hasClass(e.SCROLL_MAP_CLASS)||a.length<=0?(console.warn(g+"cannot ditect line from event object."),null):d(a.parent())};return a instanceof b.Event?c=d(b(a.currentTarget)):"number"==typeof a&&(c=a),null==c?(console.error(g+"logic error. unsupported arg type. type: "+typeof a),null):0>c||this._lines.length<=c?(console.error(g+"logic error. invalid range. index: "+c),null):this._lines[c].info},a.prototype.refresh=function(){var a=this,b={},d=this._settings.pagePrepareCount+this._settings.pagePreloadCount,e=this.getPageIndex(),h=[],i=c.filter(this._pages,function(a){return"inactive"!==a.status}),j=function(c){c===e?(b[c]="activate",h.push(c)):f.abs(e-c)<=a._settings.pagePrepareCount?b[c]="activate":a._settings.enableHiddenPage?b[c]="hide":b[c]="activate",e+1!==c&&e-1!==c||h.push(c)};this._lines.length<=0||(!function(){var b=0,c=0,f=0,g=0,h=e-d,i=e+d;for(c=h;i>=c;c++)0>c?f++:a._pages.length<=c?g++:j(c);if(f>0)for(b=0,c=e+d+1;f>b&&!(a._pages.length<=c);b++,c++)j(c);if(g>0)for(b=0,c=e-d-1;g>b&&!(0>c);b++,c--)j(c)}(),i.forEach(function(a){var c=a.index;null==b[c]&&a.inactivate()}),h.sort(function(a,b){return b>a?-1:a>b?1:0}).forEach(function(b){setTimeout(function(){a.isInitialized()&&a._pages[b]&&a._pages[b].activate()},0)}),c.each(b,function(c,d){setTimeout(function(){if(a.isInitialized()){var e=~~d;switch(c){case"activate":a._pages[e]&&a._pages[e].activate();break;case"hide":a._pages[e]&&a._pages[e].hide();break;case"inactivate":console.warn(g+"unexpected operation: inactivate");break;default:console.warn(g+"unknown operation: "+b[d])}}},0)}),this.findRecycleElements().remove(),this._lastActivePageContext.from=this._pages[e].getLineProfileFirst().index,this._lastActivePageContext.to=this._pages[e].getLineProfileLast().index,this._lastActivePageContext.index=e)},a.prototype.update=function(){var a=this._pages.length;this.assignPage(a),this.refresh()},a.prototype.rebuild=function(){this.clearPage(),this.assignPage(),this.refresh()},a.prototype.release=function(){this._lines.forEach(function(a){a.inactivate()}),this._pages=[],this._lines=[],this._$map&&(this._mapHeight=0,this._$map.height(0))},a.prototype.backup=function(a){return null==this._backup[a]&&(this._backup[a]={lines:this._lines}),!0},a.prototype.restore=function(a,b){return void 0===b&&(b=!0),null==this._backup[a]?!1:(0<this._lines.length&&this.release(),this._addLine(this._backup[a].lines),b&&this.rebuild(),!0)},a.prototype.hasBackup=function(a){return null!=this._backup[a]},a.prototype.clearBackup=function(a){return null==a?(this._backup={},!0):null!=this._backup[a]?(delete this._backup[a],!0):!1},Object.defineProperty(a.prototype,"backupData",{get:function(){return this._backup},enumerable:!0,configurable:!0}),a.prototype.setScrollHandler=function(a,b){this._scroller&&(b?this._scroller.on("scroll",a):this._scroller.off("scroll",a))},a.prototype.setScrollStopHandler=function(a,b){this._scroller&&(b?this._scroller.on("scrollstop",a):this._scroller.off("scrollstop",a))},a.prototype.getScrollPos=function(){return this._scroller?this._scroller.getPos():0},a.prototype.getScrollPosMax=function(){return this._scroller?this._scroller.getPosMax():0},a.prototype.scrollTo=function(a,b,c){this._scroller&&(0>a?(console.warn(g+"invalid position, too small. [pos: "+a+"]"),a=0):this._scroller.getPosMax()<a&&(console.warn(g+"invalid position, too big. [pos: "+a+"]"),a=this._scroller.getPosMax()),this._lastActivePageContext.pos=a,a!==this._scroller.getPos()&&this._scroller.scrollTo(a,b,c))},a.prototype.ensureVisible=function(a,c){var d=this;return 0>a||this._lines.length<=a?void console.warn(g+"ensureVisible(), invalid index, noop. [index: "+a+"]"):this._scroller?void function(){var e,f=d._lines[a],h={partialOK:!0,setTop:!1,animate:d._settings.enableAnimation,time:d._settings.animationDuration,callback:function(){}},i=b.extend({},h,c),j={from:d._scroller.getPos(),to:d._scroller.getPos()+d._baseHeight},k={from:f.offset,to:f.offset+f.height},l=function(){return i.partialOK?k.from<=j.from?j.from<=k.to:k.from<=j.to:j.from<=k.from&&k.to<=j.to},m=function(){return k.from<j.from?k.from:j.from<k.from?f.offset-f.height:(console.warn(g+"logic error."),0)};if(i.setTop)e=k.from;else{if(l())return void i.callback();e=m()}0>e?e=0:d._scroller.getPosMax()<e&&(e=d._scroller.getPosMax()),setTimeout(i.callback,i.time),d.scrollTo(e,i.animate,i.time)}():void console.warn(g+"scroller is not ready.")},a.prototype.getScrollMapHeight=function(){return this._$map?this._mapHeight:0},a.prototype.updateScrollMapHeight=function(a){this._$map&&(this._mapHeight+=a,this._mapHeight<0&&(this._mapHeight=0),this._$map.height(this._mapHeight))},a.prototype.updateProfiles=function(a){var b,c,d;for(b=a,c=this._lines.length;c>b;b++)b>0?(d=this._lines[b-1],this._lines[b].index=d.index+1,this._lines[b].offset=d.offset+d.height):(this._lines[b].index=0,this._lines[b].offset=0)},a.prototype.getScrollMapElement=function(){return this._$map||b("")},a.prototype.findRecycleElements=function(){return this._$map?this._$map.find(e.RECYCLE_CLASS_SELECTOR):b("")},a.prototype.getListViewOptions=function(){return this._settings},a.prototype.setScrollerCondition=function(){this._scroller.on("scroll",this._scrollEventHandler),this._scroller.on("scrollstop",this._scrollStopEventHandler)},a.prototype.resetScrollerCondition=function(){this._scroller.off("scrollstop",this._scrollStopEventHandler),this._scroller.off("scroll",this._scrollEventHandler)},a.prototype.createScroller=function(){return this._settings.scrollerFactory(this._$root[0],this._settings)},a.prototype.getPageIndex=function(){var a,b,c,d,e=this,f=this._scroller?this._scroller.getPos():0,h=this._scroller?this._scroller.getPosMax():0,i=function(){var a=e.getLastPage();return null!=a?a.offset+a.height:e._baseHeight}(),j=function(){return 0===h||h<=e._baseHeight?0:f*i/h}(),k=function(a){return null==a?!1:a.offset<=j&&j<=a.offset+a.height};if(this._baseHeight<=0)return console.error(g+"invalid base height: "+this._baseHeight),0;if(d=Math.floor(j/this._baseHeight),this._pages.length<=d&&(d=this._pages.length-1),c=this._pages[d],k(c))return c.index;if(j<c.offset){for(a=d-1;a>=0;a--)if(c=this._pages[a],k(c))return c.index;return console.warn(g+"unknown page index."),0}for(a=d+1,b=this._pages.length;b>a;a++)if(c=this._pages[a],k(c))return c.index;return console.warn(g+"unknown page index."),this.getLastPage().index},a.prototype.onScroll=function(a){if(this._active&&0<this._pages.length){var b=this.getPageIndex();f.abs(a-this._lastActivePageContext.pos)<this._settings.scrollRefreshDistance&&this._lastActivePageContext.index!==b&&this.refresh(),
this._lastActivePageContext.pos=a}},a.prototype.onScrollStop=function(a){if(this._active&&0<this._pages.length){var b=this.getPageIndex();this._lastActivePageContext.index!==b&&this.refresh(),this._lastActivePageContext.pos=a}},a.prototype.getLastPage=function(){return 0<this._pages.length?this._pages[this._pages.length-1]:null},a.prototype.assignPage=function(a){var b,c,e=this;null==a?a=0:this.clearPage(a),function(){var a,f,g=0,h=e.getLastPage();null==h?(h=new d.PageProfile,e._pages.push(h)):(a=h.getLineProfileLast(),null!=a&&(g=a.index+1));var i=e._lines.slice(g);for(b=0,c=i.length;c>b;b++)e._baseHeight<=h.height&&(h.normalize(),f=h,f=new d.PageProfile,f.index=h.index+1,f.offset=h.offset+h.height,h=f,e._pages.push(h)),i[b].pageIndex=h.index,h.push(i[b]);h.normalize()}(),this._scroller&&this._scroller.update()},a.prototype.clearPage=function(a){null==a&&(a=0),this._pages=this._pages.slice(0,a)},a}();d.ScrollManager=h}(d=a.UI||(a.UI={}))}(a||(a={}));var a;!function(a){var c;!function(a){var c=function(c){function d(b){c.call(this,b),this._scrollMgr=null;var d=b||{};if(this._scrollMgr=new a.ScrollManager(b),d.$el){var e=!!this.events;this.setElement(d.$el,e)}else{var f=d.initialHeight||this.$el.height();this._scrollMgr.initialize(this.$el,f)}}return e(d,c),d.prototype.setElement=function(a,d){if(this._scrollMgr){var e=b(a);this._scrollMgr.destroy(),this._scrollMgr.initialize(e,e.height())}return c.prototype.setElement.call(this,a,d)},d.prototype.remove=function(){return this._scrollMgr.destroy(),c.prototype.remove.call(this)},d.prototype.isInitialized=function(){return this._scrollMgr.isInitialized()},d.prototype.addItem=function(b,c,d,e){this._addLine(new a.LineProfile(this._scrollMgr,Math.floor(b),c,d),e)},d.prototype.removeItem=function(a,b,c){this._scrollMgr.removeItem(a,b,c)},d.prototype.getItemInfo=function(a){return this._scrollMgr.getItemInfo(a)},d.prototype.refresh=function(){this._scrollMgr.refresh()},d.prototype.update=function(){this._scrollMgr.update()},d.prototype.rebuild=function(){this._scrollMgr.rebuild()},d.prototype.release=function(){this._scrollMgr.release()},d.prototype.backup=function(a){return this._scrollMgr.backup(a)},d.prototype.restore=function(a,b){return void 0===b&&(b=!0),this._scrollMgr.restore(a,b)},d.prototype.hasBackup=function(a){return this._scrollMgr.hasBackup(a)},d.prototype.clearBackup=function(a){return this._scrollMgr.clearBackup(a)},Object.defineProperty(d.prototype,"backupData",{get:function(){return this._scrollMgr?this._scrollMgr.backupData:null},enumerable:!0,configurable:!0}),d.prototype.setScrollHandler=function(a,b){this._scrollMgr.setScrollHandler(a,b)},d.prototype.setScrollStopHandler=function(a,b){this._scrollMgr.setScrollStopHandler(a,b)},d.prototype.getScrollPos=function(){return this._scrollMgr.getScrollPos()},d.prototype.getScrollPosMax=function(){return this._scrollMgr.getScrollPosMax()},d.prototype.scrollTo=function(a,b,c){this._scrollMgr.scrollTo(a,b,c)},d.prototype.ensureVisible=function(a,b){this._scrollMgr.ensureVisible(a,b)},Object.defineProperty(d.prototype,"core",{get:function(){return this._scrollMgr},enumerable:!0,configurable:!0}),d.prototype._addLine=function(a,b){this._scrollMgr._addLine(a,b)},d.compose=function(b,c,e){var f=a.composeViews(d,b);return f.extend(c,e)},d}(d.View);a.ListView=c}(c=a.UI||(a.UI={}))}(a||(a={}));var a;!function(a){var b;!function(a){var b=function(a){function b(b){a.call(this,b),this._groupProfile=null,this._groupProfile=b.groupProfile}return e(b,a),b.prototype.isExpanded=function(){return this._groupProfile.isExpanded()},b.prototype.isExpanding=function(){return this.owner.isExpanding()},b.prototype.isCollapsing=function(){return this.owner.isCollapsing()},b.prototype.isSwitching=function(){return this.owner.isSwitching()},b.prototype.hasChildren=function(a){return this._groupProfile.hasChildren(a)},b}(a.ListItemView);a.GroupListItemView=b}(b=a.UI||(a.UI={}))}(a||(a={}));var a;!function(a){var b;!function(a){var b="[CDP.UI.ExpandManager] ",d=function(){function d(a){this._owner=null,this._mapGroups={},this._aryTopGroups=[],this._layoutKey=null,this._owner=a}return d.prototype.newGroup=function(b){var c;return null==b&&(b="group-id:"+("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)),null!=this._mapGroups[b]?this._mapGroups[b]:(c=new a.GroupProfile(b,this._owner),this._mapGroups[b]=c,c)},d.prototype.getGroup=function(a){return null==this._mapGroups[a]?(console.warn(b+"group id: "+a+" is not registered."),null):this._mapGroups[a]},d.prototype.registerTopGroup=function(a){var d,e;return"registered"===a.status?void a.restore():(d=0<this._aryTopGroups.length?this._aryTopGroups[this._aryTopGroups.length-1]:null,e=null!=d?d.getLastLineIndex(!0)+1:0,c.isNaN(e)?void console.error(b+"logic error, 'insertTo' is NaN."):(this._aryTopGroups.push(a),void a.register(e)))},d.prototype.getTopGroups=function(){return this._aryTopGroups.slice(0)},d.prototype.expandAll=function(){this._aryTopGroups.forEach(function(a){a.hasChildren()&&a.expand()})},d.prototype.collapseAll=function(a){this._aryTopGroups.forEach(function(b){b.hasChildren()&&b.collapse(a)})},d.prototype.isExpanding=function(){return this._owner.isStatusIn("expanding")},d.prototype.isCollapsing=function(){return this._owner.isStatusIn("collapsing")},d.prototype.isSwitching=function(){return this.isExpanding()||this.isCollapsing()},d.prototype.statusAddRef=function(a){return this._owner.statusAddRef(a)},d.prototype.statusRelease=function(a){return this._owner.statusRelease(a)},d.prototype.statusScope=function(a,b){this._owner.statusScope(a,b)},d.prototype.isStatusIn=function(a){return this._owner.isStatusIn(a)},Object.defineProperty(d.prototype,"layoutKey",{get:function(){return this._layoutKey},set:function(a){this._layoutKey=a},enumerable:!0,configurable:!0}),d.prototype.release=function(){this._mapGroups={},this._aryTopGroups=[]},d.prototype.backup=function(a){var b=this.backupData;return null==b[a]&&(b[a]={map:this._mapGroups,tops:this._aryTopGroups}),!0},d.prototype.restore=function(a,b){void 0===b&&(b=!0);var c=this.backupData;return null==c[a]?!1:(0<this._aryTopGroups.length&&this.release(),this._mapGroups=c[a].map,this._aryTopGroups=c[a].tops,this._aryTopGroups.length<=0||!this._aryTopGroups[0].hasLayoutKeyOf(this.layoutKey)?!1:(this._aryTopGroups.forEach(function(a){a.restore()}),b&&this._owner.rebuild(),!0))},d.prototype.hasBackup=function(a){return this._owner.hasBackup(a)},d.prototype.clearBackup=function(a){return this._owner.clearBackup(a)},Object.defineProperty(d.prototype,"backupData",{get:function(){return this._owner.backupData},enumerable:!0,configurable:!0}),d}();a.ExpandManager=d}(b=a.UI||(a.UI={}))}(a||(a={}));var a;return function(a){var b;!function(a){var b=function(b){function c(c){b.call(this,c),this._statusMgr=null,this._expandManager=null,this._statusMgr=new a.StatusManager,this._expandManager=new a.ExpandManager(this)}return e(c,b),c.prototype.newGroup=function(a){return this._expandManager.newGroup(a)},c.prototype.getGroup=function(a){return this._expandManager.getGroup(a)},c.prototype.registerTopGroup=function(a){this._expandManager.registerTopGroup(a)},c.prototype.getTopGroups=function(){return this._expandManager.getTopGroups()},c.prototype.expandAll=function(){this._expandManager.expandAll()},c.prototype.collapseAll=function(a){this._expandManager.collapseAll(a)},c.prototype.isExpanding=function(){return this._expandManager.isExpanding()},c.prototype.isCollapsing=function(){return this._expandManager.isCollapsing()},c.prototype.isSwitching=function(){return this._expandManager.isSwitching()},c.prototype.statusAddRef=function(a){return this._statusMgr.statusAddRef(a)},c.prototype.statusRelease=function(a){return this._statusMgr.statusRelease(a)},c.prototype.statusScope=function(a,b){this._statusMgr.statusScope(a,b)},c.prototype.isStatusIn=function(a){return this._statusMgr.isStatusIn(a)},Object.defineProperty(c.prototype,"layoutKey",{get:function(){return this._expandManager.layoutKey},set:function(a){this._expandManager.layoutKey=a},enumerable:!0,configurable:!0}),c.prototype.release=function(){b.prototype.release.call(this),this._expandManager.release()},c.prototype.backup=function(a){return this._expandManager.backup(a)},c.prototype.restore=function(a,b){return void 0===b&&(b=!0),this._expandManager.restore(a,b)},c}(a.ListView);a.ExpandableListView=b}(b=a.UI||(a.UI={}))}(a||(a={})),a.UI}),function(a,b){"function"==typeof define&&define.amd?define("cdp.ui.jqm",["cdp.framework.jqm","cdp.tools","cdp.ui.listview"],function(){return b(a.CDP||(a.CDP={}))}):b(a.CDP||(a.CDP={}))}(this,function(a){a.UI=a.UI||{};var a,b=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};!function(a){var b;!function(a){var b,c="[CDP.UI.Toast] ";!function(a){function b(b,g,h){void 0===g&&(g=a.LENGTH_SHORT);var i=$.mobile,j=h||new f,k=!!j.getStyle(),l=b.replace(/\n/g,"<br/>"),m="<div>"+l+"</div>",n=$(m).addClass(j.getClass());k&&n.css(j.getStyle()),n.css({top:0,left:0}).appendTo(i.pageContainer);var o,p,q=j.getOffsetPoint(),r=$(window),s=n.width()+parseInt(n.css("padding-left"),10)+parseInt(n.css("padding-right"),10),t=n.height()+parseInt(n.css("padding-top"),10)+parseInt(n.css("padding-bottom"),10);switch(15&q){case d.LEFT:o=0+j.getOffsetX();break;case d.RIGHT:o=r.width()-s+j.getOffsetX();break;case d.CENTER:o=r.width()/2-s/2+j.getOffsetX();break;default:console.warn(c+"warn. unknown offsetPoint:"+(15&q)),o=r.width()/2-s/2+j.getOffsetX()}switch(240&q){case e.TOP:p=0+j.getOffsetY();break;case e.BOTTOM:p=r.height()-t+j.getOffsetY();break;case e.CENTER:p=r.height()/2-t/2+j.getOffsetY();break;default:console.warn(c+"warn. unknown offsetPoint:"+(240&q)),p=r.height()/2-t/2+j.getOffsetY()}n.css({top:p,left:o}).delay(g).fadeOut(400,function(){$(this).remove()})}a.LENGTH_SHORT=1500,a.LENGTH_LONG=4e3,function(a){a[a.LEFT=1]="LEFT",a[a.RIGHT=2]="RIGHT",a[a.CENTER=4]="CENTER"}(a.OffsetX||(a.OffsetX={}));var d=a.OffsetX;!function(a){a[a.TOP=16]="TOP",a[a.BOTTOM=32]="BOTTOM",a[a.CENTER=64]="CENTER"}(a.OffsetY||(a.OffsetY={}));var e=a.OffsetY,f=function(){function a(){}return a.prototype.getClass=function(){return"ui-loader ui-overlay-shadow ui-corner-all ui-body-b"},a.prototype.getStyle=function(){var a={padding:"7px 25px 7px 25px",display:"block",opacity:.8};return a},a.prototype.getOffsetPoint=function(){return d.CENTER|e.BOTTOM},a.prototype.getOffsetX=function(){return 0},a.prototype.getOffsetY=function(){return-75},a}();a.StyleBuilderDefault=f,a.show=b}(b=a.Toast||(a.Toast={}))}(b=a.UI||(a.UI={}))}(a||(a={}));var a;!function(a){var b;!function(b){var c=a.Framework,d="[CDP.UI.Dialog] ",e=function(){function b(c,d){this._template=null,this._settings=null,this._$dialog=null,b.initCommonCondition(),this._settings=$.extend({},b.s_defaultOptions,d),this._template=a.Tools.Template.getJST(c,this._settings.src)}return b.prototype.show=function(a){var c=this,d=$(document),e=$("body"),f=e.pagecontainer("getActivePage"),g="touchmove mousemove MSPointerMove",h=function(a){a.preventDefault()},i={overflow:"hidden","overflow-x":"hidden","overflow-y":"hidden"},j={overflow:e.css("overflow"),"overflow-x":e.css("overflow-x"),"overflow-y":e.css("overflow-y")},k={overflow:f.css("overflow"),"overflow-x":f.css("overflow-x"),"overflow-y":f.css("overflow-y")};return null!=a&&(this._settings=$.extend({},this._settings,a)),this._settings._header=this._settings.title?"has-title":"no-title",this._$dialog=$(this._template(this._settings)),e.append(this._$dialog),this._$dialog.popup({dismissible:this._settings.dismissible,transition:this._settings.transition,positionTo:"window",create:function(a,j){d.on(g,h),e.css(i),f.css(i),b.register(c)},afterclose:function(a,i){f.css(k),e.css(j),d.off(g,h),b.register(null),c._$dialog.remove(),c._$dialog=null}}).popup("open").on(this._settings.event,function(a){a.preventDefault(),"false"!==$(a.target).attr("data-auto-close")&&c.close()}),this._$dialog},b.prototype.close=function(){this._$dialog&&this._$dialog.popup("close")},Object.defineProperty(b.prototype,"$el",{get:function(){return this._$dialog},enumerable:!0,configurable:!0}),b.setDefaultOptions=function(a){b.initCommonCondition(),$.extend(!0,b.s_defaultOptions,a)},b.register=function(a){null!=a&&null!=b.s_activeDialog&&console.warn(d+"new dialog proc is called in the past dialog's one. use setTimeout() for post process."),b.s_activeDialog=a},b.initCommonCondition=function(){return c.isInitialized()?void(null==b.s_oldBackKeyHandler&&(b.s_oldBackKeyHandler=a.setBackButtonHandler(null),a.setBackButtonHandler(b.customBackKeyHandler),b.s_defaultOptions={idPositive:"dlg-btn-positive",idNegative:"dlg-btn-negative",event:c.getDefaultClickEvent(),dismissible:!1,transition:"pop",labelPositive:"OK",labelNegative:"Cancel"})):void console.warn(d+"initCommonCondition() should be called after Framework.initialized.")},b.customBackKeyHandler=function(a){var c;return null!=b.s_activeDialog?void(null!=b.s_activeDialog._settings.idNegative&&(c=b.s_activeDialog._$dialog.find("#"+b.s_activeDialog._settings.idNegative),0===c.length&&(c=b.s_activeDialog._$dialog),c.trigger(b.s_activeDialog._settings.event))):void b.s_oldBackKeyHandler(a)},b.s_activeDialog=null,b.s_oldBackKeyHandler=null,b.s_defaultOptions=null,b}();b.Dialog=e}(b=a.UI||(a.UI={}))}(a||(a={}));var a;!function(a){var c;!function(c){var d=a.Framework,e=function(a){function c(b){if(a.call(this,b),this._owner=null,this._owner=b.owner,b.$el){var c=!!this.events;this.setElement(b.$el,c)}}return b(c,a),Object.defineProperty(c.prototype,"owner",{get:function(){return this._owner},enumerable:!0,configurable:!0}),c}(Backbone.View);c.PageContainerView=e;var f=function(a){function e(b,e,f){a.call(this,f),this._pageOptions=null,this._basePage=null,this._statusMgr=null,this._pageOptions=$.extend({},{owner:this},f),this._basePage=this._pageOptions.basePage?new this._pageOptions.basePage(b,e,this._pageOptions):new d.Page(b,e,this._pageOptions),this._statusMgr=new c.StatusManager;var g=!!this.events;this.setElement(this.$page,g)}return b(e,a),e.prototype.statusAddRef=function(a){return this._statusMgr.statusAddRef(a)},e.prototype.statusRelease=function(a){return this._statusMgr.statusRelease(a)},e.prototype.statusScope=function(a,b){this._statusMgr.statusScope(a,b)},e.prototype.isStatusIn=function(a){return this._statusMgr.isStatusIn(a)},Object.defineProperty(e.prototype,"active",{get:function(){return this._basePage.active},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"url",{get:function(){return this._basePage.url},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._basePage?this._basePage.id:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"$page",{get:function(){return this._basePage.$page},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"$header",{get:function(){return this._basePage.$header},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"$footer",{get:function(){return this._basePage.$footer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"intent",{get:function(){return this._basePage.intent},set:function(a){this._basePage.intent=a},enumerable:!0,configurable:!0}),e.prototype.onOrientationChanged=function(a){},e.prototype.onHardwareBackButton=function(a){return!1},e.prototype.onBeforeRouteChange=function(){return $.Deferred().resolve().promise()},e.prototype.onCommand=function(a,b){},e.prototype.onInitialize=function(a){},e.prototype.onPageBeforeCreate=function(a){this.setElement(this.$page,!0)},e.prototype.onPageInit=function(a){},e.prototype.onPageBeforeShow=function(a,b){},e.prototype.onPageShow=function(a,b){},e.prototype.onPageBeforeHide=function(a,b){},e.prototype.onPageHide=function(a,b){},e.prototype.onPageRemove=function(a){this.remove()},e}(Backbone.View);c.PageView=f}(c=a.UI||(a.UI={}))}(a||(a={}));var a;!function(a){var c;!function(a){var c=function(c){function d(b,d,e){c.call(this,b,d,$.extend({},{autoDestoryElement:!1},e)),this._scrollMgr=null,this._needRebuild=!1,this._scrollMgr=new a.ScrollManager(e)}return b(d,c),d.prototype.reserveRebuild=function(){this._needRebuild=!0},d.prototype.onOrientationChanged=function(a){this._scrollMgr.setBaseHeight(this.getPageBaseHeight())},d.prototype.onBeforeRouteChange=function(){return this._pageOptions.autoDestoryElement&&this._scrollMgr.destroy(),c.prototype.onBeforeRouteChange.call(this)},d.prototype.onPageBeforeShow=function(a,b){c.prototype.onPageBeforeShow.call(this,a,b),this._scrollMgr.initialize(this.$page,this.getPageBaseHeight())},d.prototype.onPageShow=function(a,b){c.prototype.onPageShow.call(this,a,b),this._scrollMgr.setBaseHeight(this.getPageBaseHeight()),this._needRebuild&&(this.rebuild(),this._needRebuild=!1)},d.prototype.onPageRemove=function(a){c.prototype.onPageRemove.call(this,a),this.release()},d.prototype.isInitialized=function(){return this._scrollMgr.isInitialized()},d.prototype.addItem=function(b,c,d,e){this._addLine(new a.LineProfile(this._scrollMgr,Math.floor(b),c,d),e)},d.prototype.removeItem=function(a,b,c){this._scrollMgr.removeItem(a,b,c)},d.prototype.getItemInfo=function(a){return this._scrollMgr.getItemInfo(a)},d.prototype.refresh=function(){this._scrollMgr.refresh()},d.prototype.update=function(){this._scrollMgr.update()},d.prototype.rebuild=function(){this._scrollMgr.rebuild()},d.prototype.release=function(){this._scrollMgr.release()},d.prototype.backup=function(a){return this._scrollMgr.backup(a)},d.prototype.restore=function(a,b){void 0===b&&(b=!0);var c=this._scrollMgr.restore(a,b);return c&&!b&&this.reserveRebuild(),c},d.prototype.hasBackup=function(a){return this._scrollMgr.hasBackup(a)},d.prototype.clearBackup=function(a){return this._scrollMgr.clearBackup(a)},Object.defineProperty(d.prototype,"backupData",{get:function(){return this._scrollMgr.backupData},enumerable:!0,configurable:!0}),d.prototype.setScrollHandler=function(a,b){this._scrollMgr.setScrollHandler(a,b)},d.prototype.setScrollStopHandler=function(a,b){this._scrollMgr.setScrollStopHandler(a,b)},d.prototype.getScrollPos=function(){return this._scrollMgr.getScrollPos()},d.prototype.getScrollPosMax=function(){return this._scrollMgr.getScrollPosMax()},d.prototype.scrollTo=function(a,b,c){this._scrollMgr.scrollTo(a,b,c)},d.prototype.ensureVisible=function(a,b){this._scrollMgr.ensureVisible(a,b)},Object.defineProperty(d.prototype,"core",{get:function(){return this._scrollMgr},enumerable:!0,configurable:!0}),d.prototype._addLine=function(a,b){this._scrollMgr._addLine(a,b)},d.prototype.getPageBaseHeight=function(){return $(window).height()-parseInt(this.$page.css("padding-top"),10)},d}(a.PageView);a.PageListView=c}(c=a.UI||(a.UI={}))}(a||(a={}));var a;return function(a){var c;!function(a){var c=function(c){function d(b,d,e){c.call(this,b,d,e),this._expandManager=null,this._expandManager=new a.ExpandManager(this)}return b(d,c),d.prototype.newGroup=function(a){return this._expandManager.newGroup(a)},d.prototype.getGroup=function(a){return this._expandManager.getGroup(a)},d.prototype.registerTopGroup=function(a){this._expandManager.registerTopGroup(a)},d.prototype.getTopGroups=function(){return this._expandManager.getTopGroups()},d.prototype.expandAll=function(){this._expandManager.expandAll()},d.prototype.collapseAll=function(a){this._expandManager.collapseAll(a)},d.prototype.isExpanding=function(){return this._expandManager.isExpanding()},d.prototype.isCollapsing=function(){return this._expandManager.isCollapsing()},d.prototype.isSwitching=function(){return this._expandManager.isSwitching()},Object.defineProperty(d.prototype,"layoutKey",{get:function(){return this._expandManager.layoutKey},set:function(a){this._expandManager.layoutKey=a},enumerable:!0,configurable:!0}),d.prototype.release=function(){c.prototype.release.call(this),this._expandManager.release()},d.prototype.backup=function(a){return this._expandManager.backup(a)},d.prototype.restore=function(a,b){return void 0===b&&(b=!0),this._expandManager.restore(a,b)},d}(a.PageListView);a.PageExpandableListView=c}(c=a.UI||(a.UI={}))}(a||(a={})),a.UI}),define("cdp/core/core",["require","exports","cdp.core"],function(a,b,c){"use strict";b.global=c.global,b.initialize=c.initialize,b.webRoot=c.webRoot}),define("cdp/core/promise",["require","exports","cdp.promise"],function(a,b,c){"use strict";b.makePromise=c.makePromise,b.wait=c.wait,b.PromiseManager=c.PromiseManager}),define("cdp/core/framework.jqm",["require","exports","cdp.framework.jqm"],function(a,b){"use strict";b.waitForDeviceReady=CDP.waitForDeviceReady,b.setBackButtonHandler=CDP.setBackButtonHandler}),define("cdp/core",["require","exports","cdp/core/core","cdp/core/promise","cdp/core/framework.jqm"],function(a,b,c,d,e){"use strict";function f(a){for(var c in a)b.hasOwnProperty(c)||(b[c]=a[c])}f(c),f(d),f(e)}),define("cdp/framework/jqm",["require","exports","cdp.framework.jqm"],function(a,b,c){"use strict";b.Patch=c.Patch,b.Platform=c.Platform,b.getOrientation=c.getOrientation,b.toUrl=c.toUrl,b.setBeforeRouteChangeHandler=c.setBeforeRouteChangeHandler,b.Router=c.Router,b.initialize=c.initialize,b.isInitialized=c.isInitialized,b.registerOrientationChangedListener=c.registerOrientationChangedListener,b.unregisterOrientationChangedListener=c.unregisterOrientationChangedListener,b.setupEventHandlers=c.setupEventHandlers,b.setActivePage=c.setActivePage,b.getDefaultClickEvent=c.getDefaultClickEvent,b.Page=c.Page}),define("cdp/framework",["require","exports","cdp/framework/jqm"],function(a,b,c){"use strict";function d(a){for(var c in a)b.hasOwnProperty(c)||(b[c]=a[c])}d(c)}),define("cdp/tools/tools",["require","exports","cdp.tools"],function(a,b,c){"use strict";var d;!function(a){a.arrayBufferToBlob=c.Blob.arrayBufferToBlob,a.base64ToBlob=c.Blob.base64ToBlob,a.base64ToArrayBuffer=c.Blob.base64ToArrayBuffer,a.base64ToUint8Array=c.Blob.base64ToUint8Array,a.arrayBufferToBase64=c.Blob.arrayBufferToBase64,a.uint8ArrayToBase64=c.Blob.uint8ArrayToBase64,a.URL=c.Blob.URL}(d=b.Blob||(b.Blob={})),b.DateTime=c.DateTime,b.abs=c.abs,b.max=c.max,b.min=c.min,b.await=c.await,b.toZeroPadding=c.toZeroPadding,b.inherit=c.inherit,b.mixin=c.mixin,b.extend=c.extend,b.getDevicePixcelRatio=c.getDevicePixcelRatio,b.doWork=c.doWork,b.Template=c.Template}),define("cdp/tools",["require","exports","cdp/tools/tools"],function(a,b,c){"use strict";function d(a){for(var c in a)b.hasOwnProperty(c)||(b[c]=a[c])}d(c)}),define("cdp/ui/listview",["require","exports","cdp.ui.listview"],function(a,b,c){"use strict";b.ListViewGlobalConfig=c.ListViewGlobalConfig,b.LineProfile=c.LineProfile,b.GroupProfile=c.GroupProfile,b.composeViews=c.composeViews,b.deriveViews=c.deriveViews,b.mixinViews=c.mixinViews,b.StatusManager=c.StatusManager,b.PageProfile=c.PageProfile,b.ScrollerElement=c.ScrollerElement,b.ScrollerNative=c.ScrollerNative,b.ScrollerIScroll=c.ScrollerIScroll,b.ListItemView=c.ListItemView,b.ScrollManager=c.ScrollManager,b.ListView=c.ListView,b.GroupListItemView=c.GroupListItemView,b.ExpandManager=c.ExpandManager,b.ExpandableListView=c.ExpandableListView}),define("cdp/ui/jqm",["require","exports","cdp.ui.jqm"],function(a,b,c){"use strict";var d;!function(a){a.LENGTH_SHORT=c.Toast.LENGTH_SHORT,a.LENGTH_LONG=c.Toast.LENGTH_LONG,a.StyleBuilderDefault=c.Toast.StyleBuilderDefault,a.show=c.Toast.show}(d=b.Toast||(b.Toast={})),b.Dialog=c.Dialog,b.PageContainerView=c.PageContainerView,b.PageView=c.PageView,b.PageListView=c.PageListView,b.PageExpandableListView=c.PageExpandableListView}),define("cdp/ui",["require","exports","cdp/ui/listview","cdp/ui/jqm"],function(a,b,c,d){"use strict";function e(a){for(var c in a)b.hasOwnProperty(c)||(b[c]=a[c])}e(c),e(d)}),define("cdp",["require","exports","cdp/core","cdp/framework","cdp/tools","cdp/ui"],function(a,b,c,d,e,f){"use strict";function g(a){for(var c in a)b.hasOwnProperty(c)||(b[c]=a[c])}g(c),b.Framework=d,b.Tools=e,b.UI=f,b.initialize=d.initialize});
//# sourceMappingURL=cdp-0.0.1.min.map