/*!
 * cdp.js 1.0.0
 *
 * Date: 2017-04-17T12:43:00+0900
 *
 * including:
 *     cdp.core.js 2.0.0
 *     cdp.promise.js 2.0.0
 *     cdp.i18n.js 2.0.0
 *     cdp.framework.jqm.js 2.0.0
 *     cdp.tools.js 2.0.0
 *     cdp.ui.listview.js 2.0.0
 *     cdp.ui.jqm.js 2.0.0
 */

//======================================================//

/*!
 * cdp.core.js 2.0.0
 *
 * Date: 2017-04-13T10:16:11+0900
 */

((function (root, factory) {
    if (typeof define === "function" && define.amd) {
        // AMD
        define('cdp.core',[],function () {
            return factory(root);
        });
    } else if (typeof exports === "object") {
        // CommonJS
        module.exports = factory(root);
    } else {
        // Browser globals
        factory(root);
    }
})(((this || 0).self || global), function (root) {

    var TAG = "[CDP] ";

    // "CDP" global exports.
    var CDP = root.CDP || (root.CDP = {});

    /**
     * \~english
     * @class Patch
     * @brief This class applies patch codes to 3rd party libraries for they works good with the others.
     *
     * \~japanese
     * @class Patch
     * @brief 外部ライブラリに Patch を当てるクラス
     */
    var Patch = (function () {
        function Patch() {
        }

        /**
         * \~english
         * Apply patch.
         *
         * \~japanese
         * パッチの適用
         */
        function _apply() {
            if (null == root.console || null == root.console.error) {
                _consolePatch();
            }

            if (typeof MSApp === "object") {
                _nodePatch();
            }
        }

        function _consolePatch() {
            root.console = {
                count: function () {
                },
                groupEnd: function () {
                },
                time: function () {
                },
                timeEnd: function () {
                },
                trace: function () {
                },
                group: function () {
                },
                dirxml: function () {
                },
                debug: function () {
                },
                groupCollapsed: function () {
                },
                select: function () {
                },
                info: function () {
                },
                profile: function () {
                },
                assert: function () {
                },
                msIsIndependentlyComposed: function () {
                },
                clear: function () {
                },
                dir: function () {
                },
                warn: function () {
                },
                error: function () {
                },
                log: function () {
                },
                profileEnd: function () {
                }
            };
        }

        function _nodePatch() {
            var originalAppendChild = Node.prototype.appendChild;
            Node.prototype.appendChild = function (node) {
                var _this = this;
                return MSApp.execUnsafeLocalFunction(function () {
                    return originalAppendChild.call(_this, node);
                });
            };

            var originalInsertBefore = Node.prototype.insertBefore;
            Node.prototype.insertBefore = function (newElement, referenceElement) {
                var _this = this;
                return MSApp.execUnsafeLocalFunction(function () {
                    return originalInsertBefore.call(_this, newElement, referenceElement);
                });
            };
        }

        Patch.apply = _apply;

        return Patch;
    })();

    /**
     * \~english
     * Get web root.
     *
     * \~japanese
     * web root を取得
     */
    var _webRoot = (function () {
        if (root.location) {
            var baseUrl = /(.+\/)[^/]*#[^/]+/.exec(root.location.href);
            if (!baseUrl) {
                baseUrl = /(.+\/)/.exec(root.location.href);
            }
            return baseUrl[1];
        }
    })();

    /**
     * \~english
     * Initialization function of environment.
     *
     * @param options {CoreInitOptions} [in] init options.
     *
     * \~japanese
     * Framework の初期化関数
     * v1.2.0+ より options のコールバックに変更
     *
     * @param options {CoreInitOptions} [in] 初期化オプション.
     */
    function _init(options) {
        setTimeout(function () {
            try {
                Patch.apply();
                if (options && typeof options.success === 'function') {
                    options.success();
                }
            } catch (error) {
                var msg = (error && error.message) ? error.message : "initialize failed.";
                console.error(TAG + msg);
                if (options && typeof options.fail === 'function') {
                    options.fail(error);
                }
            }
        });
    }

    CDP.global = root;
    CDP.Config = CDP.Config || root.Config || {};
    CDP.initialize = _init;
    CDP.webRoot = _webRoot;

    return CDP;
}));
/*!
 * cdp.promise.js 2.0.0
 *
 * Date: 2017-04-13T10:23:21+0900
 */

(function (root, factory) { if (typeof define === "function" && define.amd) { define('cdp.promise',["jquery"], function ($) { return factory(root.CDP || (root.CDP = {}), $); }); } else if (typeof exports === "object") { module.exports = factory(root.CDP || (root.CDP = {}), require("jquery")); } else { factory(root.CDP || (root.CDP = {}), root.jQuery || root.$); } }(((this || 0).self || global), function (CDP, $) {

var CDP;
(function (CDP) {
    var TAG = "[CDP.Promise] ";
    /**
     * Promise オブジェクトの作成
     * jQueryDeferred オブジェクトから、Tools.Promise オブジェクトを作成する
     *
     * @param df       {JQueryDeferred}    [in] jQueryDeferred instance を指定
     * @param options? {Object | Function} [in] jQueryPromise を拡張するオブジェクト or キャンセル時に呼び出される関数を指定
     * @return {IPromise} Tools.IPromise オブジェクト
     */
    function makePromise(df, options) {
        var extendOptions;
        var cancel;
        if ("function" === typeof options) {
            cancel = options;
        }
        else {
            extendOptions = options;
            if (extendOptions && extendOptions.cancelCallback) {
                cancel = extendOptions.cancelCallback;
            }
            else {
                cancel = function () { };
            }
        }
        var _abort = function (info) {
            var detail = info ? info : { message: "abort" };
            if (null != this.dependency) {
                if (this.dependency.abort) {
                    this.dependency.abort(detail);
                }
                else {
                    console.error(TAG + "[call] dependency object doesn't have 'abort()' method.");
                }
                if (this.callReject && "pending" === this.state()) {
                    cancel(detail);
                    df.reject(detail);
                }
            }
            else if ("pending" === this.state()) {
                cancel(detail);
                df.reject(detail);
            }
        };
        var _dependOn = function (promise) {
            var _this = this;
            if (promise.abort) {
                this.dependency = promise;
                promise
                    .always(function () {
                    _this.dependency = null;
                });
            }
            else {
                console.error(TAG + "[set] dependency object doesn't have 'abort()' method.");
            }
            return promise;
        };
        var target = $.extend({}, {
            dependency: null,
            callReject: false,
        }, extendOptions);
        var promise = df.promise(target);
        if (null == promise.abort) {
            promise.abort = _abort.bind(promise);
        }
        if (null == promise.dependOn) {
            promise.dependOn = _dependOn.bind(promise);
        }
        return promise;
    }
    CDP.makePromise = makePromise;
    function wait() {
        var deferreds = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            deferreds[_i] = arguments[_i];
        }
        // 投入法が可変引数だった場合は配列に修正する
        var _deferreds = [].concat.apply([], deferreds);
        // 実際の作業
        var df = $.Deferred();
        var results = [];
        var initialized = false;
        var isFinished = function () {
            if (!initialized) {
                return false;
            }
            else {
                return !results.some(function (element) {
                    return "pending" === element.status;
                });
            }
        };
        _deferreds.forEach(function (deferred, index) {
            results.push({
                status: "pending",
                args: null,
            });
            deferred
                .then(function () {
                var args = [];
                for (var _i = 0; _i < arguments.length; _i++) {
                    args[_i] = arguments[_i];
                }
                results[index].status = "resolved";
                results[index].args = args;
            }, function () {
                var args = [];
                for (var _i = 0; _i < arguments.length; _i++) {
                    args[_i] = arguments[_i];
                }
                results[index].status = "rejected";
                results[index].args = args;
            })
                .always(function () {
                if (isFinished()) {
                    df.resolve(results);
                }
            });
        });
        initialized = true;
        if (isFinished()) {
            df.resolve(results);
        }
        return df.promise();
    }
    CDP.wait = wait;
    /**
     * @class PromiseManager
     * @brief 複数の DataProvider.Promise を管理するクラス
     */
    var PromiseManager = (function () {
        function PromiseManager() {
            this._pool = [];
            this._id = 0;
        }
        PromiseManager.prototype.add = function (promise) {
            var _this = this;
            if (promise == null) {
                return null;
            }
            // abort() を持っていない場合はエラー
            if (!promise.abort) {
                console.error(TAG + "[add] promise object doesn't have 'abort()' method.");
                return promise;
            }
            var cookie = {
                promise: promise,
                id: this._id++,
            };
            this._pool.push(cookie);
            promise
                .always(function () {
                _this._pool = _this._pool.filter(function (element) {
                    if (element.id !== cookie.id) {
                        return true;
                    }
                    else {
                        return false;
                    }
                });
            });
            return promise;
        };
        /**
         * 管理対象の Promise に対して abort を発行
         * キャンセル処理に対するキャンセルは不可
         *
         * @return {jQueryPromise}
         */
        PromiseManager.prototype.cancel = function (info) {
            var promises = this.promises();
            promises.forEach(function (element) {
                if (element.abort) {
                    element.abort(info);
                }
            });
            return wait.apply(null, promises);
        };
        /**
         * 管理対象の Promise を配列で返す
         *
         * @return {Promise[]}
         */
        PromiseManager.prototype.promises = function () {
            return this._pool.map(function (element) {
                return element.promise;
            });
        };
        return PromiseManager;
    }());
    CDP.PromiseManager = PromiseManager;
})(CDP || (CDP = {}));

return CDP; }));
/*!
 * cdp.i18n.js 2.0.0
 *
 * Date: 2017-04-17T11:33:28+0900
 */

(function webpackUniversalModuleDefinition(root, factory) {
    if(typeof exports === 'object' && typeof module === 'object')
        module.exports = factory(require("cdp.core"), require("jquery"));
    else if(typeof define === 'function' && define.amd)
        define("cdp.i18n", ["cdp.core", "jquery"], factory);
    else if(typeof exports === 'object')
        exports["CDP"] = factory(require("cdp.core"), require("jquery"));
    else
        root["CDP"] = factory(root["CDP"], root["jQuery"]);
})(this, function(__WEBPACK_EXTERNAL_MODULE_7__, __WEBPACK_EXTERNAL_MODULE_8__) {
return /******/ (function(modules) { // webpackBootstrap
/******/     // The module cache
/******/     var installedModules = {};
/******/
/******/     // The require function
/******/     function __webpack_require__(moduleId) {
/******/
/******/         // Check if module is in cache
/******/         if(installedModules[moduleId]) {
/******/             return installedModules[moduleId].exports;
/******/         }
/******/         // Create a new module (and put it into the cache)
/******/         var module = installedModules[moduleId] = {
/******/             i: moduleId,
/******/             l: false,
/******/             exports: {}
/******/         };
/******/
/******/         // Execute the module function
/******/         modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/         // Flag the module as loaded
/******/         module.l = true;
/******/
/******/         // Return the exports of the module
/******/         return module.exports;
/******/     }
/******/
/******/
/******/     // expose the modules object (__webpack_modules__)
/******/     __webpack_require__.m = modules;
/******/
/******/     // expose the module cache
/******/     __webpack_require__.c = installedModules;
/******/
/******/     // identity function for calling harmony imports with the correct context
/******/     __webpack_require__.i = function(value) { return value; };
/******/
/******/     // define getter function for harmony exports
/******/     __webpack_require__.d = function(exports, name, getter) {
/******/         if(!__webpack_require__.o(exports, name)) {
/******/             Object.defineProperty(exports, name, {
/******/                 configurable: false,
/******/                 enumerable: true,
/******/                 get: getter
/******/             });
/******/         }
/******/     };
/******/
/******/     // getDefaultExport function for compatibility with non-harmony modules
/******/     __webpack_require__.n = function(module) {
/******/         var getter = module && module.__esModule ?
/******/             function getDefault() { return module['default']; } :
/******/             function getModuleExports() { return module; };
/******/         __webpack_require__.d(getter, 'a', getter);
/******/         return getter;
/******/     };
/******/
/******/     // Object.prototype.hasOwnProperty.call
/******/     __webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/     // __webpack_public_path__
/******/     __webpack_require__.p = "";
/******/
/******/     // Load entry module and return exports
/******/     return __webpack_require__(__webpack_require__.s = 9);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports) {

var g;

// This works in non-strict mode
g = (function() {
    return this;
})();

try {
    // This works if eval is allowed (see CSP)
    g = g || Function("return this")() || (1,eval)("this");
} catch(e) {
    // This works if the window reference is available
    if(typeof window === "object")
        g = window;
}

// g can still be undefined, but nothing to do about it...
// We return undefined, instead of nothing here, so it's
// easier to handle this case. if(!global) { ...}

module.exports = g;


/***/ }),
/* 1 */
/***/ (function(module, exports, __webpack_require__) {

(function (global, factory) {
     true ? module.exports = factory() :
    typeof define === 'function' && define.amd ? define(factory) :
    (global.i18next = factory());
}(this, (function () { 'use strict';

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) {
  return typeof obj;
} : function (obj) {
  return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
};











var classCallCheck = function (instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
};









var _extends = Object.assign || function (target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i];

    for (var key in source) {
      if (Object.prototype.hasOwnProperty.call(source, key)) {
        target[key] = source[key];
      }
    }
  }

  return target;
};



var inherits = function (subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function, not " + typeof superClass);
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      enumerable: false,
      writable: true,
      configurable: true
    }
  });
  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
};











var possibleConstructorReturn = function (self, call) {
  if (!self) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return call && (typeof call === "object" || typeof call === "function") ? call : self;
};





var slicedToArray = function () {
  function sliceIterator(arr, i) {
    var _arr = [];
    var _n = true;
    var _d = false;
    var _e = undefined;

    try {
      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {
        _arr.push(_s.value);

        if (i && _arr.length === i) break;
      }
    } catch (err) {
      _d = true;
      _e = err;
    } finally {
      try {
        if (!_n && _i["return"]) _i["return"]();
      } finally {
        if (_d) throw _e;
      }
    }

    return _arr;
  }

  return function (arr, i) {
    if (Array.isArray(arr)) {
      return arr;
    } else if (Symbol.iterator in Object(arr)) {
      return sliceIterator(arr, i);
    } else {
      throw new TypeError("Invalid attempt to destructure non-iterable instance");
    }
  };
}();

var consoleLogger = {
  type: 'logger',

  log: function log(args) {
    this._output('log', args);
  },
  warn: function warn(args) {
    this._output('warn', args);
  },
  error: function error(args) {
    this._output('error', args);
  },
  _output: function _output(type, args) {
    if (console && console[type]) console[type].apply(console, Array.prototype.slice.call(args));
  }
};

var Logger = function () {
  function Logger(concreteLogger) {
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    classCallCheck(this, Logger);

    this.init(concreteLogger, options);
  }

  Logger.prototype.init = function init(concreteLogger) {
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

    this.prefix = options.prefix || 'i18next:';
    this.logger = concreteLogger || consoleLogger;
    this.options = options;
    this.debug = options.debug === false ? false : true;
  };

  Logger.prototype.setDebug = function setDebug(bool) {
    this.debug = bool;
  };

  Logger.prototype.log = function log() {
    this.forward(arguments, 'log', '', true);
  };

  Logger.prototype.warn = function warn() {
    this.forward(arguments, 'warn', '', true);
  };

  Logger.prototype.error = function error() {
    this.forward(arguments, 'error', '');
  };

  Logger.prototype.deprecate = function deprecate() {
    this.forward(arguments, 'warn', 'WARNING DEPRECATED: ', true);
  };

  Logger.prototype.forward = function forward(args, lvl, prefix, debugOnly) {
    if (debugOnly && !this.debug) return;
    if (typeof args[0] === 'string') args[0] = prefix + this.prefix + ' ' + args[0];
    this.logger[lvl](args);
  };

  Logger.prototype.create = function create(moduleName) {
    var sub = new Logger(this.logger, _extends({ prefix: this.prefix + ':' + moduleName + ':' }, this.options));

    return sub;
  };

  // createInstance(options = {}) {
  //   return new Logger(options, callback);
  // }

  return Logger;
}();



var baseLogger = new Logger();

var EventEmitter = function () {
    function EventEmitter() {
        classCallCheck(this, EventEmitter);

        this.observers = {};
    }

    EventEmitter.prototype.on = function on(events, listener) {
        var _this = this;

        events.split(' ').forEach(function (event) {
            _this.observers[event] = _this.observers[event] || [];
            _this.observers[event].push(listener);
        });
    };

    EventEmitter.prototype.off = function off(event, listener) {
        var _this2 = this;

        if (!this.observers[event]) {
            return;
        }

        this.observers[event].forEach(function () {
            if (!listener) {
                delete _this2.observers[event];
            } else {
                var index = _this2.observers[event].indexOf(listener);
                if (index > -1) {
                    _this2.observers[event].splice(index, 1);
                }
            }
        });
    };

    EventEmitter.prototype.emit = function emit(event) {
        for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
            args[_key - 1] = arguments[_key];
        }

        if (this.observers[event]) {
            var cloned = [].concat(this.observers[event]);
            cloned.forEach(function (observer) {
                observer.apply(undefined, args);
            });
        }

        if (this.observers['*']) {
            var _cloned = [].concat(this.observers['*']);
            _cloned.forEach(function (observer) {
                var _ref;

                observer.apply(observer, (_ref = [event]).concat.apply(_ref, args));
            });
        }
    };

    return EventEmitter;
}();

function makeString(object) {
  if (object == null) return '';
  return '' + object;
}

function copy(a, s, t) {
  a.forEach(function (m) {
    if (s[m]) t[m] = s[m];
  });
}

function getLastOfPath(object, path, Empty) {
  function cleanKey(key) {
    return key && key.indexOf('###') > -1 ? key.replace(/###/g, '.') : key;
  }

  function canNotTraverseDeeper() {
    return !object || typeof object === 'string';
  }

  var stack = typeof path !== 'string' ? [].concat(path) : path.split('.');
  while (stack.length > 1) {
    if (canNotTraverseDeeper()) return {};

    var key = cleanKey(stack.shift());
    if (!object[key] && Empty) object[key] = new Empty();
    object = object[key];
  }

  if (canNotTraverseDeeper()) return {};
  return {
    obj: object,
    k: cleanKey(stack.shift())
  };
}

function setPath(object, path, newValue) {
  var _getLastOfPath = getLastOfPath(object, path, Object),
      obj = _getLastOfPath.obj,
      k = _getLastOfPath.k;

  obj[k] = newValue;
}

function pushPath(object, path, newValue, concat) {
  var _getLastOfPath2 = getLastOfPath(object, path, Object),
      obj = _getLastOfPath2.obj,
      k = _getLastOfPath2.k;

  obj[k] = obj[k] || [];
  if (concat) obj[k] = obj[k].concat(newValue);
  if (!concat) obj[k].push(newValue);
}

function getPath(object, path) {
  var _getLastOfPath3 = getLastOfPath(object, path),
      obj = _getLastOfPath3.obj,
      k = _getLastOfPath3.k;

  if (!obj) return undefined;
  return obj[k];
}

function deepExtend(target, source, overwrite) {
  for (var prop in source) {
    if (prop in target) {
      // If we reached a leaf string in target or source then replace with source or skip depending on the 'overwrite' switch
      if (typeof target[prop] === 'string' || target[prop] instanceof String || typeof source[prop] === 'string' || source[prop] instanceof String) {
        if (overwrite) target[prop] = source[prop];
      } else {
        deepExtend(target[prop], source[prop], overwrite);
      }
    } else {
      target[prop] = source[prop];
    }
  }return target;
}

function regexEscape(str) {
  return str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, '\\$&');
}

/* eslint-disable */
var _entityMap = {
  "&": "&amp;",
  "<": "&lt;",
  ">": "&gt;",
  '"': '&quot;',
  "'": '&#39;',
  "/": '&#x2F;'
};
/* eslint-enable */

function escape(data) {
  if (typeof data === 'string') {
    return data.replace(/[&<>"'\/]/g, function (s) {
      return _entityMap[s];
    });
  } else {
    return data;
  }
}

var ResourceStore = function (_EventEmitter) {
  inherits(ResourceStore, _EventEmitter);

  function ResourceStore() {
    var data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : { ns: ['translation'], defaultNS: 'translation' };
    classCallCheck(this, ResourceStore);

    var _this = possibleConstructorReturn(this, _EventEmitter.call(this));

    _this.data = data;
    _this.options = options;
    return _this;
  }

  ResourceStore.prototype.addNamespaces = function addNamespaces(ns) {
    if (this.options.ns.indexOf(ns) < 0) {
      this.options.ns.push(ns);
    }
  };

  ResourceStore.prototype.removeNamespaces = function removeNamespaces(ns) {
    var index = this.options.ns.indexOf(ns);
    if (index > -1) {
      this.options.ns.splice(index, 1);
    }
  };

  ResourceStore.prototype.getResource = function getResource(lng, ns, key) {
    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};

    var keySeparator = options.keySeparator || this.options.keySeparator;
    if (keySeparator === undefined) keySeparator = '.';

    var path = [lng, ns];
    if (key && typeof key !== 'string') path = path.concat(key);
    if (key && typeof key === 'string') path = path.concat(keySeparator ? key.split(keySeparator) : key);

    if (lng.indexOf('.') > -1) {
      path = lng.split('.');
    }

    return getPath(this.data, path);
  };

  ResourceStore.prototype.addResource = function addResource(lng, ns, key, value) {
    var options = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : { silent: false };

    var keySeparator = this.options.keySeparator;
    if (keySeparator === undefined) keySeparator = '.';

    var path = [lng, ns];
    if (key) path = path.concat(keySeparator ? key.split(keySeparator) : key);

    if (lng.indexOf('.') > -1) {
      path = lng.split('.');
      value = ns;
      ns = path[1];
    }

    this.addNamespaces(ns);

    setPath(this.data, path, value);

    if (!options.silent) this.emit('added', lng, ns, key, value);
  };

  ResourceStore.prototype.addResources = function addResources(lng, ns, resources) {
    for (var m in resources) {
      if (typeof resources[m] === 'string') this.addResource(lng, ns, m, resources[m], { silent: true });
    }
    this.emit('added', lng, ns, resources);
  };

  ResourceStore.prototype.addResourceBundle = function addResourceBundle(lng, ns, resources, deep, overwrite) {
    var path = [lng, ns];
    if (lng.indexOf('.') > -1) {
      path = lng.split('.');
      deep = resources;
      resources = ns;
      ns = path[1];
    }

    this.addNamespaces(ns);

    var pack = getPath(this.data, path) || {};

    if (deep) {
      deepExtend(pack, resources, overwrite);
    } else {
      pack = _extends({}, pack, resources);
    }

    setPath(this.data, path, pack);

    this.emit('added', lng, ns, resources);
  };

  ResourceStore.prototype.removeResourceBundle = function removeResourceBundle(lng, ns) {
    if (this.hasResourceBundle(lng, ns)) {
      delete this.data[lng][ns];
    }
    this.removeNamespaces(ns);

    this.emit('removed', lng, ns);
  };

  ResourceStore.prototype.hasResourceBundle = function hasResourceBundle(lng, ns) {
    return this.getResource(lng, ns) !== undefined;
  };

  ResourceStore.prototype.getResourceBundle = function getResourceBundle(lng, ns) {
    if (!ns) ns = this.options.defaultNS;

    // TODO: COMPATIBILITY remove extend in v2.1.0
    if (this.options.compatibilityAPI === 'v1') return _extends({}, this.getResource(lng, ns));

    return this.getResource(lng, ns);
  };

  ResourceStore.prototype.toJSON = function toJSON() {
    return this.data;
  };

  return ResourceStore;
}(EventEmitter);

var postProcessor = {

  processors: {},

  addPostProcessor: function addPostProcessor(module) {
    this.processors[module.name] = module;
  },
  handle: function handle(processors, value, key, options, translator) {
    var _this = this;

    processors.forEach(function (processor) {
      if (_this.processors[processor]) value = _this.processors[processor].process(value, key, options, translator);
    });

    return value;
  }
};

function convertInterpolation(options) {

  options.interpolation = {
    unescapeSuffix: 'HTML'
  };

  options.interpolation.prefix = options.interpolationPrefix || '__';
  options.interpolation.suffix = options.interpolationSuffix || '__';
  options.interpolation.escapeValue = options.escapeInterpolation || false;

  options.interpolation.nestingPrefix = options.reusePrefix || '$t(';
  options.interpolation.nestingSuffix = options.reuseSuffix || ')';

  return options;
}

function convertAPIOptions(options) {
  if (options.resStore) options.resources = options.resStore;

  if (options.ns && options.ns.defaultNs) {
    options.defaultNS = options.ns.defaultNs;
    options.ns = options.ns.namespaces;
  } else {
    options.defaultNS = options.ns || 'translation';
  }

  if (options.fallbackToDefaultNS && options.defaultNS) options.fallbackNS = options.defaultNS;

  options.saveMissing = options.sendMissing;
  options.saveMissingTo = options.sendMissingTo || 'current';
  options.returnNull = options.fallbackOnNull ? false : true;
  options.returnEmptyString = options.fallbackOnEmpty ? false : true;
  options.returnObjects = options.returnObjectTrees;
  options.joinArrays = '\n';

  options.returnedObjectHandler = options.objectTreeKeyHandler;
  options.parseMissingKeyHandler = options.parseMissingKey;
  options.appendNamespaceToMissingKey = true;

  options.nsSeparator = options.nsseparator || ':';
  options.keySeparator = options.keyseparator || '.';

  if (options.shortcutFunction === 'sprintf') {
    options.overloadTranslationOptionHandler = function (args) {
      var values = [];

      for (var i = 1; i < args.length; i++) {
        values.push(args[i]);
      }

      return {
        postProcess: 'sprintf',
        sprintf: values
      };
    };
  }

  options.whitelist = options.lngWhitelist;
  options.preload = options.preload;
  if (options.load === 'current') options.load = 'currentOnly';
  if (options.load === 'unspecific') options.load = 'languageOnly';

  // backend
  options.backend = options.backend || {};
  options.backend.loadPath = options.resGetPath || 'locales/__lng__/__ns__.json';
  options.backend.addPath = options.resPostPath || 'locales/add/__lng__/__ns__';
  options.backend.allowMultiLoading = options.dynamicLoad;

  // cache
  options.cache = options.cache || {};
  options.cache.prefix = 'res_';
  options.cache.expirationTime = 7 * 24 * 60 * 60 * 1000;
  options.cache.enabled = options.useLocalStorage ? true : false;

  options = convertInterpolation(options);
  if (options.defaultVariables) options.interpolation.defaultVariables = options.defaultVariables;

  // TODO: deprecation
  // if (options.getAsync === false) throw deprecation error

  return options;
}

function convertJSONOptions(options) {
  options = convertInterpolation(options);
  options.joinArrays = '\n';

  return options;
}

function convertTOptions(options) {
  if (options.interpolationPrefix || options.interpolationSuffix || options.escapeInterpolation) {
    options = convertInterpolation(options);
  }

  options.nsSeparator = options.nsseparator;
  options.keySeparator = options.keyseparator;

  options.returnObjects = options.returnObjectTrees;

  return options;
}

function appendBackwardsAPI(i18n) {
  i18n.lng = function () {
    baseLogger.deprecate('i18next.lng() can be replaced by i18next.language for detected language or i18next.languages for languages ordered by translation lookup.');
    return i18n.services.languageUtils.toResolveHierarchy(i18n.language)[0];
  };

  i18n.preload = function (lngs, cb) {
    baseLogger.deprecate('i18next.preload() can be replaced with i18next.loadLanguages()');
    i18n.loadLanguages(lngs, cb);
  };

  i18n.setLng = function (lng, options, callback) {
    baseLogger.deprecate('i18next.setLng() can be replaced with i18next.changeLanguage() or i18next.getFixedT() to get a translation function with fixed language or namespace.');
    if (typeof options === 'function') {
      callback = options;
      options = {};
    }
    if (!options) options = {};

    if (options.fixLng === true) {
      if (callback) return callback(null, i18n.getFixedT(lng));
    }

    i18n.changeLanguage(lng, callback);
  };

  i18n.addPostProcessor = function (name, fc) {
    baseLogger.deprecate('i18next.addPostProcessor() can be replaced by i18next.use({ type: \'postProcessor\', name: \'name\', process: fc })');
    i18n.use({
      type: 'postProcessor',
      name: name,
      process: fc
    });
  };
}

var Translator = function (_EventEmitter) {
  inherits(Translator, _EventEmitter);

  function Translator(services) {
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    classCallCheck(this, Translator);

    var _this = possibleConstructorReturn(this, _EventEmitter.call(this));

    copy(['resourceStore', 'languageUtils', 'pluralResolver', 'interpolator', 'backendConnector'], services, _this);

    _this.options = options;
    _this.logger = baseLogger.create('translator');
    return _this;
  }

  Translator.prototype.changeLanguage = function changeLanguage(lng) {
    if (lng) this.language = lng;
  };

  Translator.prototype.exists = function exists(key) {
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : { interpolation: {} };

    if (this.options.compatibilityAPI === 'v1') {
      options = convertTOptions(options);
    }

    return this.resolve(key, options) !== undefined;
  };

  Translator.prototype.extractFromKey = function extractFromKey(key, options) {
    var nsSeparator = options.nsSeparator || this.options.nsSeparator;
    if (nsSeparator === undefined) nsSeparator = ':';
    var keySeparator = options.keySeparator || this.options.keySeparator || '.';

    var namespaces = options.ns || this.options.defaultNS;
    if (nsSeparator && key.indexOf(nsSeparator) > -1) {
      var parts = key.split(nsSeparator);
      if (nsSeparator !== keySeparator || nsSeparator === keySeparator && this.options.ns.indexOf(parts[0]) > -1) namespaces = parts.shift();
      key = parts.join(keySeparator);
    }
    if (typeof namespaces === 'string') namespaces = [namespaces];

    return {
      key: key,
      namespaces: namespaces
    };
  };

  Translator.prototype.translate = function translate(keys) {
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

    if ((typeof options === 'undefined' ? 'undefined' : _typeof(options)) !== 'object') {
      options = this.options.overloadTranslationOptionHandler(arguments);
    } else if (this.options.compatibilityAPI === 'v1') {
      options = convertTOptions(options);
    }

    // non valid keys handling
    if (keys === undefined || keys === null || keys === '') return '';
    if (typeof keys === 'number') keys = String(keys);
    if (typeof keys === 'string') keys = [keys];

    // separators
    var keySeparator = options.keySeparator || this.options.keySeparator || '.';

    // get namespace(s)

    var _extractFromKey = this.extractFromKey(keys[keys.length - 1], options),
        key = _extractFromKey.key,
        namespaces = _extractFromKey.namespaces;

    var namespace = namespaces[namespaces.length - 1];

    // return key on CIMode
    var lng = options.lng || this.language;
    var appendNamespaceToCIMode = options.appendNamespaceToCIMode || this.options.appendNamespaceToCIMode;
    if (lng && lng.toLowerCase() === 'cimode') {
      if (appendNamespaceToCIMode) {
        var nsSeparator = options.nsSeparator || this.options.nsSeparator;
        return namespace + nsSeparator + key;
      }

      return key;
    }

    // resolve from store
    var res = this.resolve(keys, options);

    var resType = Object.prototype.toString.apply(res);
    var noObject = ['[object Number]', '[object Function]', '[object RegExp]'];
    var joinArrays = options.joinArrays !== undefined ? options.joinArrays : this.options.joinArrays;

    // object
    if (res && typeof res !== 'string' && noObject.indexOf(resType) < 0 && !(joinArrays && resType === '[object Array]')) {
      if (!options.returnObjects && !this.options.returnObjects) {
        this.logger.warn('accessing an object - but returnObjects options is not enabled!');
        return this.options.returnedObjectHandler ? this.options.returnedObjectHandler(key, res, options) : 'key \'' + key + ' (' + this.language + ')\' returned an object instead of string.';
      }

      // if we got a separator we loop over children - else we just return object as is
      // as having it set to false means no hierarchy so no lookup for nested values
      if (options.keySeparator || this.options.keySeparator) {
        var copy$$1 = resType === '[object Array]' ? [] : {}; // apply child translation on a copy

        for (var m in res) {
          if (res.hasOwnProperty(m)) {
            copy$$1[m] = this.translate('' + key + keySeparator + m, _extends({}, options, { joinArrays: false, ns: namespaces }));
          }
        }
        res = copy$$1;
      }
    }
    // array special treatment
    else if (joinArrays && resType === '[object Array]') {
        res = res.join(joinArrays);
        if (res) res = this.extendTranslation(res, key, options);
      }
      // string, empty or null
      else {
          var usedDefault = false,
              usedKey = false;

          // fallback value
          if (!this.isValidLookup(res) && options.defaultValue !== undefined) {
            usedDefault = true;
            res = options.defaultValue;
          }
          if (!this.isValidLookup(res)) {
            usedKey = true;
            res = key;
          }

          // save missing
          if (usedKey || usedDefault) {
            this.logger.log('missingKey', lng, namespace, key, res);

            var lngs = [];
            var fallbackLngs = this.languageUtils.getFallbackCodes(this.options.fallbackLng, options.lng || this.language);
            if (this.options.saveMissingTo === 'fallback' && fallbackLngs && fallbackLngs[0]) {
              for (var i = 0; i < fallbackLngs.length; i++) {
                lngs.push(fallbackLngs[i]);
              }
            } else if (this.options.saveMissingTo === 'all') {
              lngs = this.languageUtils.toResolveHierarchy(options.lng || this.language);
            } else {
              //(this.options.saveMissingTo === 'current' || (this.options.saveMissingTo === 'fallback' && this.options.fallbackLng[0] === false) ) {
              lngs.push(options.lng || this.language);
            }

            if (this.options.saveMissing) {
              if (this.options.missingKeyHandler) {
                this.options.missingKeyHandler(lngs, namespace, key, res);
              } else if (this.backendConnector && this.backendConnector.saveMissing) {
                this.backendConnector.saveMissing(lngs, namespace, key, res);
              }
            }

            this.emit('missingKey', lngs, namespace, key, res);
          }

          // extend
          res = this.extendTranslation(res, key, options);

          // append namespace if still key
          if (usedKey && res === key && this.options.appendNamespaceToMissingKey) res = namespace + ':' + key;

          // parseMissingKeyHandler
          if (usedKey && this.options.parseMissingKeyHandler) res = this.options.parseMissingKeyHandler(res);
        }

    // return
    return res;
  };

  Translator.prototype.extendTranslation = function extendTranslation(res, key, options) {
    var _this2 = this;

    if (options.interpolation) this.interpolator.init(_extends({}, options, { interpolation: _extends({}, this.options.interpolation, options.interpolation) }));

    // interpolate
    var data = options.replace && typeof options.replace !== 'string' ? options.replace : options;
    if (this.options.interpolation.defaultVariables) data = _extends({}, this.options.interpolation.defaultVariables, data);
    res = this.interpolator.interpolate(res, data, this.language);

    // nesting
    res = this.interpolator.nest(res, function () {
      for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
        args[_key] = arguments[_key];
      }

      return _this2.translate.apply(_this2, args);
    }, options);

    if (options.interpolation) this.interpolator.reset();

    // post process
    var postProcess = options.postProcess || this.options.postProcess;
    var postProcessorNames = typeof postProcess === 'string' ? [postProcess] : postProcess;

    if (res !== undefined && postProcessorNames && postProcessorNames.length && options.applyPostProcessor !== false) {
      res = postProcessor.handle(postProcessorNames, res, key, options, this);
    }

    return res;
  };

  Translator.prototype.resolve = function resolve(keys) {
    var _this3 = this;

    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

    var found = void 0;

    if (typeof keys === 'string') keys = [keys];

    // forEach possible key
    keys.forEach(function (k) {
      if (_this3.isValidLookup(found)) return;

      var _extractFromKey2 = _this3.extractFromKey(k, options),
          key = _extractFromKey2.key,
          namespaces = _extractFromKey2.namespaces;

      if (_this3.options.fallbackNS) namespaces = namespaces.concat(_this3.options.fallbackNS);

      var needsPluralHandling = options.count !== undefined && typeof options.count !== 'string';
      var needsContextHandling = options.context !== undefined && typeof options.context === 'string' && options.context !== '';

      var codes = options.lngs ? options.lngs : _this3.languageUtils.toResolveHierarchy(options.lng || _this3.language);

      namespaces.forEach(function (ns) {
        if (_this3.isValidLookup(found)) return;

        codes.forEach(function (code) {
          if (_this3.isValidLookup(found)) return;

          var finalKey = key;
          var finalKeys = [finalKey];

          var pluralSuffix = void 0;
          if (needsPluralHandling) pluralSuffix = _this3.pluralResolver.getSuffix(code, options.count);

          // fallback for plural if context not found
          if (needsPluralHandling && needsContextHandling) finalKeys.push(finalKey + pluralSuffix);

          // get key for context if needed
          if (needsContextHandling) finalKeys.push(finalKey += '' + _this3.options.contextSeparator + options.context);

          // get key for plural if needed
          if (needsPluralHandling) finalKeys.push(finalKey += pluralSuffix);

          // iterate over finalKeys starting with most specific pluralkey (-> contextkey only) -> singularkey only
          var possibleKey = void 0;
          while (possibleKey = finalKeys.pop()) {
            if (_this3.isValidLookup(found)) continue;
            found = _this3.getResource(code, ns, possibleKey, options);
          }
        });
      });
    });

    return found;
  };

  Translator.prototype.isValidLookup = function isValidLookup(res) {
    return res !== undefined && !(!this.options.returnNull && res === null) && !(!this.options.returnEmptyString && res === '');
  };

  Translator.prototype.getResource = function getResource(code, ns, key) {
    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};

    return this.resourceStore.getResource(code, ns, key, options);
  };

  return Translator;
}(EventEmitter);

function capitalize(string) {
  return string.charAt(0).toUpperCase() + string.slice(1);
}

var LanguageUtil = function () {
  function LanguageUtil(options) {
    classCallCheck(this, LanguageUtil);

    this.options = options;

    this.whitelist = this.options.whitelist || false;
    this.logger = baseLogger.create('languageUtils');
  }

  LanguageUtil.prototype.getScriptPartFromCode = function getScriptPartFromCode(code) {
    if (!code || code.indexOf('-') < 0) return null;

    var p = code.split('-');
    if (p.length === 2) return null;
    p.pop();
    return this.formatLanguageCode(p.join('-'));
  };

  LanguageUtil.prototype.getLanguagePartFromCode = function getLanguagePartFromCode(code) {
    if (!code || code.indexOf('-') < 0) return code;

    var p = code.split('-');
    return this.formatLanguageCode(p[0]);
  };

  LanguageUtil.prototype.formatLanguageCode = function formatLanguageCode(code) {
    // http://www.iana.org/assignments/language-tags/language-tags.xhtml
    if (typeof code === 'string' && code.indexOf('-') > -1) {
      var specialCases = ['hans', 'hant', 'latn', 'cyrl', 'cans', 'mong', 'arab'];
      var p = code.split('-');

      if (this.options.lowerCaseLng) {
        p = p.map(function (part) {
          return part.toLowerCase();
        });
      } else if (p.length === 2) {
        p[0] = p[0].toLowerCase();
        p[1] = p[1].toUpperCase();

        if (specialCases.indexOf(p[1].toLowerCase()) > -1) p[1] = capitalize(p[1].toLowerCase());
      } else if (p.length === 3) {
        p[0] = p[0].toLowerCase();

        // if lenght 2 guess it's a country
        if (p[1].length === 2) p[1] = p[1].toUpperCase();
        if (p[0] !== 'sgn' && p[2].length === 2) p[2] = p[2].toUpperCase();

        if (specialCases.indexOf(p[1].toLowerCase()) > -1) p[1] = capitalize(p[1].toLowerCase());
        if (specialCases.indexOf(p[2].toLowerCase()) > -1) p[2] = capitalize(p[2].toLowerCase());
      }

      return p.join('-');
    } else {
      return this.options.cleanCode || this.options.lowerCaseLng ? code.toLowerCase() : code;
    }
  };

  LanguageUtil.prototype.isWhitelisted = function isWhitelisted(code, exactMatch) {
    if (this.options.load === 'languageOnly' || this.options.nonExplicitWhitelist && !exactMatch) {
      code = this.getLanguagePartFromCode(code);
    }
    return !this.whitelist || !this.whitelist.length || this.whitelist.indexOf(code) > -1 ? true : false;
  };

  LanguageUtil.prototype.getFallbackCodes = function getFallbackCodes(fallbacks, code) {
    if (!fallbacks) return [];
    if (typeof fallbacks === 'string') fallbacks = [fallbacks];
    if (Object.prototype.toString.apply(fallbacks) === '[object Array]') return fallbacks;

    if (!code) return fallbacks.default || [];

    // asume we have an object defining fallbacks
    var found = fallbacks[code];
    if (!found) found = fallbacks[this.getScriptPartFromCode(code)];
    if (!found) found = fallbacks[this.formatLanguageCode(code)];
    if (!found) found = fallbacks.default;

    return found || [];
  };

  LanguageUtil.prototype.toResolveHierarchy = function toResolveHierarchy(code, fallbackCode) {
    var _this = this;

    var fallbackCodes = this.getFallbackCodes(fallbackCode || this.options.fallbackLng || [], code);

    var codes = [];
    var addCode = function addCode(code) {
      var exactMatch = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;

      if (!code) return;
      if (_this.isWhitelisted(code, exactMatch)) {
        codes.push(code);
      } else {
        _this.logger.warn('rejecting non-whitelisted language code: ' + code);
      }
    };

    if (typeof code === 'string' && code.indexOf('-') > -1) {
      if (this.options.load !== 'languageOnly') addCode(this.formatLanguageCode(code), true);
      if (this.options.load !== 'languageOnly' && this.options.load !== 'currentOnly') addCode(this.getScriptPartFromCode(code), true);
      if (this.options.load !== 'currentOnly') addCode(this.getLanguagePartFromCode(code));
    } else if (typeof code === 'string') {
      addCode(this.formatLanguageCode(code));
    }

    fallbackCodes.forEach(function (fc) {
      if (codes.indexOf(fc) < 0) addCode(_this.formatLanguageCode(fc));
    });

    return codes;
  };

  return LanguageUtil;
}();

// definition http://translate.sourceforge.net/wiki/l10n/pluralforms
/* eslint-disable */
var sets = [{ lngs: ['ach', 'ak', 'am', 'arn', 'br', 'fil', 'gun', 'ln', 'mfe', 'mg', 'mi', 'oc', 'tg', 'ti', 'tr', 'uz', 'wa'], nr: [1, 2], fc: 1 }, { lngs: ['af', 'an', 'ast', 'az', 'bg', 'bn', 'ca', 'da', 'de', 'dev', 'el', 'en', 'eo', 'es', 'es_ar', 'et', 'eu', 'fi', 'fo', 'fur', 'fy', 'gl', 'gu', 'ha', 'he', 'hi', 'hu', 'hy', 'ia', 'it', 'kn', 'ku', 'lb', 'mai', 'ml', 'mn', 'mr', 'nah', 'nap', 'nb', 'ne', 'nl', 'nn', 'no', 'nso', 'pa', 'pap', 'pms', 'ps', 'pt', 'pt_br', 'rm', 'sco', 'se', 'si', 'so', 'son', 'sq', 'sv', 'sw', 'ta', 'te', 'tk', 'ur', 'yo'], nr: [1, 2], fc: 2 }, { lngs: ['ay', 'bo', 'cgg', 'fa', 'id', 'ja', 'jbo', 'ka', 'kk', 'km', 'ko', 'ky', 'lo', 'ms', 'sah', 'su', 'th', 'tt', 'ug', 'vi', 'wo', 'zh'], nr: [1], fc: 3 }, { lngs: ['be', 'bs', 'dz', 'hr', 'ru', 'sr', 'uk'], nr: [1, 2, 5], fc: 4 }, { lngs: ['ar'], nr: [0, 1, 2, 3, 11, 100], fc: 5 }, { lngs: ['cs', 'sk'], nr: [1, 2, 5], fc: 6 }, { lngs: ['csb', 'pl'], nr: [1, 2, 5], fc: 7 }, { lngs: ['cy'], nr: [1, 2, 3, 8], fc: 8 }, { lngs: ['fr'], nr: [1, 2], fc: 9 }, { lngs: ['ga'], nr: [1, 2, 3, 7, 11], fc: 10 }, { lngs: ['gd'], nr: [1, 2, 3, 20], fc: 11 }, { lngs: ['is'], nr: [1, 2], fc: 12 }, { lngs: ['jv'], nr: [0, 1], fc: 13 }, { lngs: ['kw'], nr: [1, 2, 3, 4], fc: 14 }, { lngs: ['lt'], nr: [1, 2, 10], fc: 15 }, { lngs: ['lv'], nr: [1, 2, 0], fc: 16 }, { lngs: ['mk'], nr: [1, 2], fc: 17 }, { lngs: ['mnk'], nr: [0, 1, 2], fc: 18 }, { lngs: ['mt'], nr: [1, 2, 11, 20], fc: 19 }, { lngs: ['or'], nr: [2, 1], fc: 2 }, { lngs: ['ro'], nr: [1, 2, 20], fc: 20 }, { lngs: ['sl'], nr: [5, 1, 2, 3], fc: 21 }];

var _rulesPluralsTypes = {
  1: function _(n) {
    return Number(n > 1);
  },
  2: function _(n) {
    return Number(n != 1);
  },
  3: function _(n) {
    return 0;
  },
  4: function _(n) {
    return Number(n % 10 == 1 && n % 100 != 11 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2);
  },
  5: function _(n) {
    return Number(n === 0 ? 0 : n == 1 ? 1 : n == 2 ? 2 : n % 100 >= 3 && n % 100 <= 10 ? 3 : n % 100 >= 11 ? 4 : 5);
  },
  6: function _(n) {
    return Number(n == 1 ? 0 : n >= 2 && n <= 4 ? 1 : 2);
  },
  7: function _(n) {
    return Number(n == 1 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2);
  },
  8: function _(n) {
    return Number(n == 1 ? 0 : n == 2 ? 1 : n != 8 && n != 11 ? 2 : 3);
  },
  9: function _(n) {
    return Number(n >= 2);
  },
  10: function _(n) {
    return Number(n == 1 ? 0 : n == 2 ? 1 : n < 7 ? 2 : n < 11 ? 3 : 4);
  },
  11: function _(n) {
    return Number(n == 1 || n == 11 ? 0 : n == 2 || n == 12 ? 1 : n > 2 && n < 20 ? 2 : 3);
  },
  12: function _(n) {
    return Number(n % 10 != 1 || n % 100 == 11);
  },
  13: function _(n) {
    return Number(n !== 0);
  },
  14: function _(n) {
    return Number(n == 1 ? 0 : n == 2 ? 1 : n == 3 ? 2 : 3);
  },
  15: function _(n) {
    return Number(n % 10 == 1 && n % 100 != 11 ? 0 : n % 10 >= 2 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2);
  },
  16: function _(n) {
    return Number(n % 10 == 1 && n % 100 != 11 ? 0 : n !== 0 ? 1 : 2);
  },
  17: function _(n) {
    return Number(n == 1 || n % 10 == 1 ? 0 : 1);
  },
  18: function _(n) {
    return Number(n == 0 ? 0 : n == 1 ? 1 : 2);
  },
  19: function _(n) {
    return Number(n == 1 ? 0 : n === 0 || n % 100 > 1 && n % 100 < 11 ? 1 : n % 100 > 10 && n % 100 < 20 ? 2 : 3);
  },
  20: function _(n) {
    return Number(n == 1 ? 0 : n === 0 || n % 100 > 0 && n % 100 < 20 ? 1 : 2);
  },
  21: function _(n) {
    return Number(n % 100 == 1 ? 1 : n % 100 == 2 ? 2 : n % 100 == 3 || n % 100 == 4 ? 3 : 0);
  }
};
/* eslint-enable */

function createRules() {
  var l,
      rules = {};
  sets.forEach(function (set$$1) {
    set$$1.lngs.forEach(function (l) {
      return rules[l] = {
        numbers: set$$1.nr,
        plurals: _rulesPluralsTypes[set$$1.fc]
      };
    });
  });
  return rules;
}

var PluralResolver = function () {
  function PluralResolver(languageUtils) {
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    classCallCheck(this, PluralResolver);

    this.languageUtils = languageUtils;
    this.options = options;

    this.logger = baseLogger.create('pluralResolver');

    this.rules = createRules();
  }

  PluralResolver.prototype.addRule = function addRule(lng, obj) {
    this.rules[lng] = obj;
  };

  PluralResolver.prototype.getRule = function getRule(code) {
    return this.rules[this.languageUtils.getLanguagePartFromCode(code)];
  };

  PluralResolver.prototype.needsPlural = function needsPlural(code) {
    var rule = this.getRule(code);

    return rule && rule.numbers.length <= 1 ? false : true;
  };

  PluralResolver.prototype.getSuffix = function getSuffix(code, count) {
    var _this = this;

    var rule = this.getRule(code);

    if (rule) {
      var _ret = function () {
        if (rule.numbers.length === 1) return {
            v: ''
          }; // only singular

        var idx = rule.noAbs ? rule.plurals(count) : rule.plurals(Math.abs(count));
        var suffix = rule.numbers[idx];

        // special treatment for lngs only having singular and plural
        if (_this.options.simplifyPluralSuffix && rule.numbers.length === 2 && rule.numbers[0] === 1) {
          if (suffix === 2) {
            suffix = 'plural';
          } else if (suffix === 1) {
            suffix = '';
          }
        }

        var returnSuffix = function returnSuffix() {
          return _this.options.prepend && suffix.toString() ? _this.options.prepend + suffix.toString() : suffix.toString();
        };

        // COMPATIBILITY JSON
        // v1
        if (_this.options.compatibilityJSON === 'v1') {
          if (suffix === 1) return {
              v: ''
            };
          if (typeof suffix === 'number') return {
              v: '_plural_' + suffix.toString()
            };
          return {
            v: returnSuffix()
          };
        }
        // v2
        else if (_this.options.compatibilityJSON === 'v2' || rule.numbers.length === 2 && rule.numbers[0] === 1) {
            return {
              v: returnSuffix()
            };
          }
          // v3 - gettext index
          else if (rule.numbers.length === 2 && rule.numbers[0] === 1) {
              return {
                v: returnSuffix()
              };
            }
        return {
          v: _this.options.prepend && idx.toString() ? _this.options.prepend + idx.toString() : idx.toString()
        };
      }();

      if ((typeof _ret === 'undefined' ? 'undefined' : _typeof(_ret)) === "object") return _ret.v;
    } else {
      this.logger.warn('no plural rule found for: ' + code);
      return '';
    }
  };

  return PluralResolver;
}();

var Interpolator = function () {
  function Interpolator() {
    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    classCallCheck(this, Interpolator);

    this.logger = baseLogger.create('interpolator');

    this.init(options, true);
  }

  Interpolator.prototype.init = function init() {
    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    var reset = arguments[1];

    if (reset) {
      this.options = options;
      this.format = options.interpolation && options.interpolation.format || function (value) {
        return value;
      };
      this.escape = options.interpolation && options.interpolation.escape || escape;
    }
    if (!options.interpolation) options.interpolation = { escapeValue: true };

    var iOpts = options.interpolation;

    this.escapeValue = iOpts.escapeValue !== undefined ? iOpts.escapeValue : true;

    this.prefix = iOpts.prefix ? regexEscape(iOpts.prefix) : iOpts.prefixEscaped || '{{';
    this.suffix = iOpts.suffix ? regexEscape(iOpts.suffix) : iOpts.suffixEscaped || '}}';

    this.formatSeparator = iOpts.formatSeparator ? iOpts.formatSeparator : iOpts.formatSeparator || ',';

    this.unescapePrefix = iOpts.unescapeSuffix ? '' : iOpts.unescapePrefix || '-';
    this.unescapeSuffix = this.unescapePrefix ? '' : iOpts.unescapeSuffix || '';

    this.nestingPrefix = iOpts.nestingPrefix ? regexEscape(iOpts.nestingPrefix) : iOpts.nestingPrefixEscaped || regexEscape('$t(');
    this.nestingSuffix = iOpts.nestingSuffix ? regexEscape(iOpts.nestingSuffix) : iOpts.nestingSuffixEscaped || regexEscape(')');

    // the regexp
    this.resetRegExp();
  };

  Interpolator.prototype.reset = function reset() {
    if (this.options) this.init(this.options);
  };

  Interpolator.prototype.resetRegExp = function resetRegExp() {
    // the regexp
    var regexpStr = this.prefix + '(.+?)' + this.suffix;
    this.regexp = new RegExp(regexpStr, 'g');

    var regexpUnescapeStr = this.prefix + this.unescapePrefix + '(.+?)' + this.unescapeSuffix + this.suffix;
    this.regexpUnescape = new RegExp(regexpUnescapeStr, 'g');

    var nestingRegexpStr = this.nestingPrefix + '(.+?)' + this.nestingSuffix;
    this.nestingRegexp = new RegExp(nestingRegexpStr, 'g');
  };

  Interpolator.prototype.interpolate = function interpolate(str, data, lng) {
    var _this = this;

    var match = void 0,
        value = void 0;

    function regexSafe(val) {
      return val.replace(/\$/g, '$$$$');
    }

    var handleFormat = function handleFormat(key) {
      if (key.indexOf(_this.formatSeparator) < 0) return getPath(data, key);

      var p = key.split(_this.formatSeparator);
      var k = p.shift().trim();
      var f = p.join(_this.formatSeparator).trim();

      return _this.format(getPath(data, k), f, lng);
    };

    this.resetRegExp();

    // unescape if has unescapePrefix/Suffix
    while (match = this.regexpUnescape.exec(str)) {
      var _value = handleFormat(match[1].trim());
      str = str.replace(match[0], _value);
      this.regexpUnescape.lastIndex = 0;
    }

    // regular escape on demand
    while (match = this.regexp.exec(str)) {
      value = handleFormat(match[1].trim());
      if (typeof value !== 'string') value = makeString(value);
      if (!value) {
        this.logger.warn('missed to pass in variable ' + match[1] + ' for interpolating ' + str);
        value = '';
      }
      value = this.escapeValue ? regexSafe(this.escape(value)) : regexSafe(value);
      str = str.replace(match[0], value);
      this.regexp.lastIndex = 0;
    }
    return str;
  };

  Interpolator.prototype.nest = function nest(str, fc) {
    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};

    var match = void 0,
        value = void 0;

    var clonedOptions = _extends({}, options);
    clonedOptions.applyPostProcessor = false; // avoid post processing on nested lookup

    function handleHasOptions(key) {
      if (key.indexOf(',') < 0) return key;

      var p = key.split(',');
      key = p.shift();
      var optionsString = p.join(',');
      optionsString = this.interpolate(optionsString, clonedOptions);
      optionsString = optionsString.replace(/'/g, '"');

      try {
        clonedOptions = JSON.parse(optionsString);
      } catch (e) {
        this.logger.error('failed parsing options string in nesting for key ' + key, e);
      }

      return key;
    }

    // regular escape on demand
    while (match = this.nestingRegexp.exec(str)) {
      value = fc(handleHasOptions.call(this, match[1].trim()), clonedOptions);
      if (typeof value !== 'string') value = makeString(value);
      if (!value) {
        this.logger.warn('missed to pass in variable ' + match[1] + ' for interpolating ' + str);
        value = '';
      }
      // Nested keys should not be escaped by default #854
      // value = this.escapeValue ? regexSafe(utils.escape(value)) : regexSafe(value);
      str = str.replace(match[0], value);
      this.regexp.lastIndex = 0;
    }
    return str;
  };

  return Interpolator;
}();

function remove(arr, what) {
  var found = arr.indexOf(what);

  while (found !== -1) {
    arr.splice(found, 1);
    found = arr.indexOf(what);
  }
}

var Connector = function (_EventEmitter) {
  inherits(Connector, _EventEmitter);

  function Connector(backend, store, services) {
    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};
    classCallCheck(this, Connector);

    var _this = possibleConstructorReturn(this, _EventEmitter.call(this));

    _this.backend = backend;
    _this.store = store;
    _this.services = services;
    _this.options = options;
    _this.logger = baseLogger.create('backendConnector');

    _this.state = {};
    _this.queue = [];

    _this.backend && _this.backend.init && _this.backend.init(services, options.backend, options);
    return _this;
  }

  Connector.prototype.queueLoad = function queueLoad(languages, namespaces, callback) {
    var _this2 = this;

    // find what needs to be loaded
    var toLoad = [],
        pending = [],
        toLoadLanguages = [],
        toLoadNamespaces = [];

    languages.forEach(function (lng) {
      var hasAllNamespaces = true;

      namespaces.forEach(function (ns) {
        var name = lng + '|' + ns;

        if (_this2.store.hasResourceBundle(lng, ns)) {
          _this2.state[name] = 2; // loaded
        } else if (_this2.state[name] < 0) {
          // nothing to do for err
        } else if (_this2.state[name] === 1) {
          if (pending.indexOf(name) < 0) pending.push(name);
        } else {
          _this2.state[name] = 1; // pending

          hasAllNamespaces = false;

          if (pending.indexOf(name) < 0) pending.push(name);
          if (toLoad.indexOf(name) < 0) toLoad.push(name);
          if (toLoadNamespaces.indexOf(ns) < 0) toLoadNamespaces.push(ns);
        }
      });

      if (!hasAllNamespaces) toLoadLanguages.push(lng);
    });

    if (toLoad.length || pending.length) {
      this.queue.push({
        pending: pending,
        loaded: {},
        errors: [],
        callback: callback
      });
    }

    return {
      toLoad: toLoad,
      pending: pending,
      toLoadLanguages: toLoadLanguages,
      toLoadNamespaces: toLoadNamespaces
    };
  };

  Connector.prototype.loaded = function loaded(name, err, data) {
    var _this3 = this;

    var _name$split = name.split('|'),
        _name$split2 = slicedToArray(_name$split, 2),
        lng = _name$split2[0],
        ns = _name$split2[1];

    if (err) this.emit('failedLoading', lng, ns, err);

    if (data) {
      this.store.addResourceBundle(lng, ns, data);
    }

    // set loaded
    this.state[name] = err ? -1 : 2;
    // callback if ready
    this.queue.forEach(function (q) {
      pushPath(q.loaded, [lng], ns);
      remove(q.pending, name);

      if (err) q.errors.push(err);

      if (q.pending.length === 0 && !q.done) {
        _this3.emit('loaded', q.loaded);
        q.errors.length ? q.callback(q.errors) : q.callback();
        q.done = true;
      }
    });

    // remove done load requests
    this.queue = this.queue.filter(function (q) {
      return !q.done;
    });
  };

  Connector.prototype.read = function read(lng, ns, fcName, tried, wait, callback) {
    var _this4 = this;

    if (!tried) tried = 0;
    if (!wait) wait = 250;

    if (!lng.length) return callback(null, {}); // noting to load

    this.backend[fcName](lng, ns, function (err, data) {
      if (err && data /* = retryFlag */ && tried < 5) {
        setTimeout(function () {
          _this4.read.call(_this4, lng, ns, fcName, ++tried, wait * 2, callback);
        }, wait);
        return;
      }
      callback(err, data);
    });
  };

  Connector.prototype.load = function load(languages, namespaces, callback) {
    var _this5 = this;

    if (!this.backend) {
      this.logger.warn('No backend was added via i18next.use. Will not load resources.');
      return callback && callback();
    }
    var options = _extends({}, this.backend.options, this.options.backend);

    if (typeof languages === 'string') languages = this.services.languageUtils.toResolveHierarchy(languages);
    if (typeof namespaces === 'string') namespaces = [namespaces];

    var toLoad = this.queueLoad(languages, namespaces, callback);
    if (!toLoad.toLoad.length) {
      if (!toLoad.pending.length) callback(); // nothing to load and no pendings...callback now
      return; // pendings will trigger callback
    }

    // load with multi-load
    if (options.allowMultiLoading && this.backend.readMulti) {
      this.read(toLoad.toLoadLanguages, toLoad.toLoadNamespaces, 'readMulti', null, null, function (err, data) {
        if (err) _this5.logger.warn('loading namespaces ' + toLoad.toLoadNamespaces.join(', ') + ' for languages ' + toLoad.toLoadLanguages.join(', ') + ' via multiloading failed', err);
        if (!err && data) _this5.logger.log('loaded namespaces ' + toLoad.toLoadNamespaces.join(', ') + ' for languages ' + toLoad.toLoadLanguages.join(', ') + ' via multiloading', data);

        toLoad.toLoad.forEach(function (name) {
          var _name$split3 = name.split('|'),
              _name$split4 = slicedToArray(_name$split3, 2),
              l = _name$split4[0],
              n = _name$split4[1];

          var bundle = getPath(data, [l, n]);
          if (bundle) {
            _this5.loaded(name, err, bundle);
          } else {
            var _err = 'loading namespace ' + n + ' for language ' + l + ' via multiloading failed';
            _this5.loaded(name, _err);
            _this5.logger.error(_err);
          }
        });
      });
    }

    // load one by one
    else {
        (function () {
          var readOne = function readOne(name) {
            var _this6 = this;

            var _name$split5 = name.split('|'),
                _name$split6 = slicedToArray(_name$split5, 2),
                lng = _name$split6[0],
                ns = _name$split6[1];

            this.read(lng, ns, 'read', null, null, function (err, data) {
              if (err) _this6.logger.warn('loading namespace ' + ns + ' for language ' + lng + ' failed', err);
              if (!err && data) _this6.logger.log('loaded namespace ' + ns + ' for language ' + lng, data);

              _this6.loaded(name, err, data);
            });
          };

          

          toLoad.toLoad.forEach(function (name) {
            readOne.call(_this5, name);
          });
        })();
      }
  };

  Connector.prototype.reload = function reload(languages, namespaces) {
    var _this7 = this;

    if (!this.backend) {
      this.logger.warn('No backend was added via i18next.use. Will not load resources.');
    }
    var options = _extends({}, this.backend.options, this.options.backend);

    if (typeof languages === 'string') languages = this.services.languageUtils.toResolveHierarchy(languages);
    if (typeof namespaces === 'string') namespaces = [namespaces];

    // load with multi-load
    if (options.allowMultiLoading && this.backend.readMulti) {
      this.read(languages, namespaces, 'readMulti', null, null, function (err, data) {
        if (err) _this7.logger.warn('reloading namespaces ' + namespaces.join(', ') + ' for languages ' + languages.join(', ') + ' via multiloading failed', err);
        if (!err && data) _this7.logger.log('reloaded namespaces ' + namespaces.join(', ') + ' for languages ' + languages.join(', ') + ' via multiloading', data);

        languages.forEach(function (l) {
          namespaces.forEach(function (n) {
            var bundle = getPath(data, [l, n]);
            if (bundle) {
              _this7.loaded(l + '|' + n, err, bundle);
            } else {
              var _err2 = 'reloading namespace ' + n + ' for language ' + l + ' via multiloading failed';
              _this7.loaded(l + '|' + n, _err2);
              _this7.logger.error(_err2);
            }
          });
        });
      });
    }

    // load one by one
    else {
        (function () {
          var readOne = function readOne(name) {
            var _this8 = this;

            var _name$split7 = name.split('|'),
                _name$split8 = slicedToArray(_name$split7, 2),
                lng = _name$split8[0],
                ns = _name$split8[1];

            this.read(lng, ns, 'read', null, null, function (err, data) {
              if (err) _this8.logger.warn('reloading namespace ' + ns + ' for language ' + lng + ' failed', err);
              if (!err && data) _this8.logger.log('reloaded namespace ' + ns + ' for language ' + lng, data);

              _this8.loaded(name, err, data);
            });
          };

          

          languages.forEach(function (l) {
            namespaces.forEach(function (n) {
              readOne.call(_this7, l + '|' + n);
            });
          });
        })();
      }
  };

  Connector.prototype.saveMissing = function saveMissing(languages, namespace, key, fallbackValue) {
    if (this.backend && this.backend.create) this.backend.create(languages, namespace, key, fallbackValue);

    // write to store to avoid resending
    if (!languages || !languages[0]) return;
    this.store.addResource(languages[0], namespace, key, fallbackValue);
  };

  return Connector;
}(EventEmitter);

var Connector$1 = function (_EventEmitter) {
  inherits(Connector, _EventEmitter);

  function Connector(cache, store, services) {
    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};
    classCallCheck(this, Connector);

    var _this = possibleConstructorReturn(this, _EventEmitter.call(this));

    _this.cache = cache;
    _this.store = store;
    _this.services = services;
    _this.options = options;
    _this.logger = baseLogger.create('cacheConnector');

    _this.cache && _this.cache.init && _this.cache.init(services, options.cache, options);
    return _this;
  }

  Connector.prototype.load = function load(languages, namespaces, callback) {
    var _this2 = this;

    if (!this.cache) return callback && callback();
    var options = _extends({}, this.cache.options, this.options.cache);

    if (typeof languages === 'string') languages = this.services.languageUtils.toResolveHierarchy(languages);
    if (typeof namespaces === 'string') namespaces = [namespaces];

    if (options.enabled) {
      this.cache.load(languages, function (err, data) {
        if (err) _this2.logger.error('loading languages ' + languages.join(', ') + ' from cache failed', err);
        if (data) {
          for (var l in data) {
            for (var n in data[l]) {
              if (n === 'i18nStamp') continue;
              var bundle = data[l][n];
              if (bundle) _this2.store.addResourceBundle(l, n, bundle);
            }
          }
        }
        if (callback) callback();
      });
    } else {
      if (callback) callback();
    }
  };

  Connector.prototype.save = function save() {
    if (this.cache && this.options.cache && this.options.cache.enabled) this.cache.save(this.store.data);
  };

  return Connector;
}(EventEmitter);

function get$1() {
  return {
    debug: false,
    initImmediate: true,

    ns: ['translation'],
    defaultNS: ['translation'],
    fallbackLng: ['dev'],
    fallbackNS: false, // string or array of namespaces

    whitelist: false, // array with whitelisted languages
    nonExplicitWhitelist: false,
    load: 'all', // | currentOnly | languageOnly
    preload: false, // array with preload languages

    simplifyPluralSuffix: true,
    keySeparator: '.',
    nsSeparator: ':',
    pluralSeparator: '_',
    contextSeparator: '_',

    saveMissing: false, // enable to send missing values
    saveMissingTo: 'fallback', // 'current' || 'all'
    missingKeyHandler: false, // function(lng, ns, key, fallbackValue) -> override if prefer on handling

    postProcess: false, // string or array of postProcessor names
    returnNull: true, // allows null value as valid translation
    returnEmptyString: true, // allows empty string value as valid translation
    returnObjects: false,
    joinArrays: false, // or string to join array
    returnedObjectHandler: function returnedObjectHandler() {}, // function(key, value, options) triggered if key returns object but returnObjects is set to false
    parseMissingKeyHandler: false, // function(key) parsed a key that was not found in t() before returning
    appendNamespaceToMissingKey: false,
    appendNamespaceToCIMode: false,
    overloadTranslationOptionHandler: function overloadTranslationOptionHandler(args) {
      return { defaultValue: args[1] };
    },

    interpolation: {
      escapeValue: true,
      format: function format(value, _format, lng) {
        return value;
      },
      prefix: '{{',
      suffix: '}}',
      formatSeparator: ',',
      // prefixEscaped: '{{',
      // suffixEscaped: '}}',
      // unescapeSuffix: '',
      unescapePrefix: '-',

      nestingPrefix: '$t(',
      nestingSuffix: ')',
      // nestingPrefixEscaped: '$t(',
      // nestingSuffixEscaped: ')',
      defaultVariables: undefined // object that can have values to interpolate on - extends passed in interpolation data
    }
  };
}

function transformOptions(options) {
  // create namespace object if namespace is passed in as string
  if (typeof options.ns === 'string') options.ns = [options.ns];
  if (typeof options.fallbackLng === 'string') options.fallbackLng = [options.fallbackLng];
  if (typeof options.fallbackNS === 'string') options.fallbackNS = [options.fallbackNS];

  // extend whitelist with cimode
  if (options.whitelist && options.whitelist.indexOf('cimode') < 0) options.whitelist.push('cimode');

  return options;
}

function noop() {}

var I18n = function (_EventEmitter) {
  inherits(I18n, _EventEmitter);

  function I18n() {
    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    var callback = arguments[1];
    classCallCheck(this, I18n);

    var _this = possibleConstructorReturn(this, _EventEmitter.call(this));

    _this.options = transformOptions(options);
    _this.services = {};
    _this.logger = baseLogger;
    _this.modules = { external: [] };

    if (callback && !_this.isInitialized && !options.isClone) {
      var _ret;

      // https://github.com/i18next/i18next/issues/879
      if (!_this.options.initImmediate) return _ret = _this.init(options, callback), possibleConstructorReturn(_this, _ret);
      setTimeout(function () {
        _this.init(options, callback);
      }, 0);
    }
    return _this;
  }

  I18n.prototype.init = function init(options, callback) {
    var _this2 = this;

    if (typeof options === 'function') {
      callback = options;
      options = {};
    }
    if (!options) options = {};

    if (options.compatibilityAPI === 'v1') {
      this.options = _extends({}, get$1(), transformOptions(convertAPIOptions(options)), {});
    } else if (options.compatibilityJSON === 'v1') {
      this.options = _extends({}, get$1(), transformOptions(convertJSONOptions(options)), {});
    } else {
      this.options = _extends({}, get$1(), this.options, transformOptions(options));
    }
    if (!callback) callback = noop;

    function createClassOnDemand(ClassOrObject) {
      if (!ClassOrObject) return;
      if (typeof ClassOrObject === 'function') return new ClassOrObject();
      return ClassOrObject;
    }

    // init services
    if (!this.options.isClone) {
      if (this.modules.logger) {
        baseLogger.init(createClassOnDemand(this.modules.logger), this.options);
      } else {
        baseLogger.init(null, this.options);
      }

      var lu = new LanguageUtil(this.options);
      this.store = new ResourceStore(this.options.resources, this.options);

      var s = this.services;
      s.logger = baseLogger;
      s.resourceStore = this.store;
      s.resourceStore.on('added removed', function (lng, ns) {
        s.cacheConnector.save();
      });
      s.languageUtils = lu;
      s.pluralResolver = new PluralResolver(lu, { prepend: this.options.pluralSeparator, compatibilityJSON: this.options.compatibilityJSON, simplifyPluralSuffix: this.options.simplifyPluralSuffix });
      s.interpolator = new Interpolator(this.options);

      s.backendConnector = new Connector(createClassOnDemand(this.modules.backend), s.resourceStore, s, this.options);
      // pipe events from backendConnector
      s.backendConnector.on('*', function (event) {
        for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
          args[_key - 1] = arguments[_key];
        }

        _this2.emit.apply(_this2, [event].concat(args));
      });

      s.backendConnector.on('loaded', function (loaded) {
        s.cacheConnector.save();
      });

      s.cacheConnector = new Connector$1(createClassOnDemand(this.modules.cache), s.resourceStore, s, this.options);
      // pipe events from backendConnector
      s.cacheConnector.on('*', function (event) {
        for (var _len2 = arguments.length, args = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
          args[_key2 - 1] = arguments[_key2];
        }

        _this2.emit.apply(_this2, [event].concat(args));
      });

      if (this.modules.languageDetector) {
        s.languageDetector = createClassOnDemand(this.modules.languageDetector);
        s.languageDetector.init(s, this.options.detection, this.options);
      }

      this.translator = new Translator(this.services, this.options);
      // pipe events from translator
      this.translator.on('*', function (event) {
        for (var _len3 = arguments.length, args = Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {
          args[_key3 - 1] = arguments[_key3];
        }

        _this2.emit.apply(_this2, [event].concat(args));
      });

      this.modules.external.forEach(function (m) {
        if (m.init) m.init(_this2);
      });
    }

    // append api
    var storeApi = ['getResource', 'addResource', 'addResources', 'addResourceBundle', 'removeResourceBundle', 'hasResourceBundle', 'getResourceBundle'];
    storeApi.forEach(function (fcName) {
      _this2[fcName] = function () {
        return this.store[fcName].apply(this.store, arguments);
      };
    });

    // TODO: COMPATIBILITY remove this
    if (this.options.compatibilityAPI === 'v1') appendBackwardsAPI(this);

    var load = function load() {
      _this2.changeLanguage(_this2.options.lng, function (err, t) {
        _this2.isInitialized = true;
        _this2.logger.log('initialized', _this2.options);
        _this2.emit('initialized', _this2.options);

        callback(err, t);
      });
    };

    if (this.options.resources || !this.options.initImmediate) {
      load();
    } else {
      setTimeout(load, 0);
    }

    return this;
  };

  I18n.prototype.loadResources = function loadResources() {
    var _this3 = this;

    var callback = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : noop;

    if (!this.options.resources) {
      var _ret2 = function () {
        if (_this3.language && _this3.language.toLowerCase() === 'cimode') return {
            v: callback()
          }; // avoid loading resources for cimode

        var toLoad = [];

        var append = function append(lng) {
          if (!lng) return;
          var lngs = _this3.services.languageUtils.toResolveHierarchy(lng);
          lngs.forEach(function (l) {
            if (toLoad.indexOf(l) < 0) toLoad.push(l);
          });
        };

        if (!_this3.language) {
          // at least load fallbacks in this case
          var fallbacks = _this3.services.languageUtils.getFallbackCodes(_this3.options.fallbackLng);
          fallbacks.forEach(function (l) {
            return append(l);
          });
        } else {
          append(_this3.language);
        }

        if (_this3.options.preload) {
          _this3.options.preload.forEach(function (l) {
            return append(l);
          });
        }

        _this3.services.cacheConnector.load(toLoad, _this3.options.ns, function () {
          _this3.services.backendConnector.load(toLoad, _this3.options.ns, callback);
        });
      }();

      if ((typeof _ret2 === 'undefined' ? 'undefined' : _typeof(_ret2)) === "object") return _ret2.v;
    } else {
      callback(null);
    }
  };

  I18n.prototype.reloadResources = function reloadResources(lngs, ns) {
    if (!lngs) lngs = this.languages;
    if (!ns) ns = this.options.ns;
    this.services.backendConnector.reload(lngs, ns);
  };

  I18n.prototype.use = function use(module) {
    if (module.type === 'backend') {
      this.modules.backend = module;
    }

    if (module.type === 'cache') {
      this.modules.cache = module;
    }

    if (module.type === 'logger' || module.log && module.warn && module.error) {
      this.modules.logger = module;
    }

    if (module.type === 'languageDetector') {
      this.modules.languageDetector = module;
    }

    if (module.type === 'postProcessor') {
      postProcessor.addPostProcessor(module);
    }

    if (module.type === '3rdParty') {
      this.modules.external.push(module);
    }

    return this;
  };

  I18n.prototype.changeLanguage = function changeLanguage(lng, callback) {
    var _this4 = this;

    var done = function done(err) {
      if (lng) {
        _this4.emit('languageChanged', lng);
        _this4.logger.log('languageChanged', lng);
      }

      if (callback) callback(err, function () {
        for (var _len4 = arguments.length, args = Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {
          args[_key4] = arguments[_key4];
        }

        return _this4.t.apply(_this4, args);
      });
    };

    if (!lng && this.services.languageDetector) lng = this.services.languageDetector.detect();

    if (lng) {
      this.language = lng;
      this.languages = this.services.languageUtils.toResolveHierarchy(lng);

      this.translator.changeLanguage(lng);

      if (this.services.languageDetector) this.services.languageDetector.cacheUserLanguage(lng);
    }

    this.loadResources(function (err) {
      done(err);
    });
  };

  I18n.prototype.getFixedT = function getFixedT(lng, ns) {
    var _this5 = this;

    var fixedT = function fixedT(key) {
      var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

      var options = _extends({}, opts);
      options.lng = options.lng || fixedT.lng;
      options.ns = options.ns || fixedT.ns;
      return _this5.t(key, options);
    };
    fixedT.lng = lng;
    fixedT.ns = ns;
    return fixedT;
  };

  I18n.prototype.t = function t() {
    return this.translator && this.translator.translate.apply(this.translator, arguments);
  };

  I18n.prototype.exists = function exists() {
    return this.translator && this.translator.exists.apply(this.translator, arguments);
  };

  I18n.prototype.setDefaultNamespace = function setDefaultNamespace(ns) {
    this.options.defaultNS = ns;
  };

  I18n.prototype.loadNamespaces = function loadNamespaces(ns, callback) {
    var _this6 = this;

    if (!this.options.ns) return callback && callback();
    if (typeof ns === 'string') ns = [ns];

    ns.forEach(function (n) {
      if (_this6.options.ns.indexOf(n) < 0) _this6.options.ns.push(n);
    });

    this.loadResources(callback);
  };

  I18n.prototype.loadLanguages = function loadLanguages(lngs, callback) {
    if (typeof lngs === 'string') lngs = [lngs];
    var preloaded = this.options.preload || [];

    var newLngs = lngs.filter(function (lng) {
      return preloaded.indexOf(lng) < 0;
    });
    // Exit early if all given languages are already preloaded
    if (!newLngs.length) return callback();

    this.options.preload = preloaded.concat(newLngs);
    this.loadResources(callback);
  };

  I18n.prototype.dir = function dir(lng) {
    if (!lng) lng = this.language;
    if (!lng) return 'rtl';

    var rtlLngs = ['ar', 'shu', 'sqr', 'ssh', 'xaa', 'yhd', 'yud', 'aao', 'abh', 'abv', 'acm', 'acq', 'acw', 'acx', 'acy', 'adf', 'ads', 'aeb', 'aec', 'afb', 'ajp', 'apc', 'apd', 'arb', 'arq', 'ars', 'ary', 'arz', 'auz', 'avl', 'ayh', 'ayl', 'ayn', 'ayp', 'bbz', 'pga', 'he', 'iw', 'ps', 'pbt', 'pbu', 'pst', 'prp', 'prd', 'ur', 'ydd', 'yds', 'yih', 'ji', 'yi', 'hbo', 'men', 'xmn', 'fa', 'jpr', 'peo', 'pes', 'prs', 'dv', 'sam'];

    return rtlLngs.indexOf(this.services.languageUtils.getLanguagePartFromCode(lng)) >= 0 ? 'rtl' : 'ltr';
  };

  I18n.prototype.createInstance = function createInstance() {
    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    var callback = arguments[1];

    return new I18n(options, callback);
  };

  I18n.prototype.cloneInstance = function cloneInstance() {
    var _this7 = this;

    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;

    var mergedOptions = _extends({}, options, this.options, { isClone: true });
    var clone = new I18n(mergedOptions, callback);
    var membersToCopy = ['store', 'services', 'language'];
    membersToCopy.forEach(function (m) {
      clone[m] = _this7[m];
    });
    clone.translator = new Translator(clone.services, clone.options);
    clone.translator.on('*', function (event) {
      for (var _len5 = arguments.length, args = Array(_len5 > 1 ? _len5 - 1 : 0), _key5 = 1; _key5 < _len5; _key5++) {
        args[_key5 - 1] = arguments[_key5];
      }

      clone.emit.apply(clone, [event].concat(args));
    });
    clone.init(mergedOptions, callback);

    return clone;
  };

  return I18n;
}(EventEmitter);

var i18next = new I18n();

return i18next;

})));


/***/ }),
/* 2 */
/***/ (function(module, exports, __webpack_require__) {

(function (global, factory) {
   true ? module.exports = factory() :
  typeof define === 'function' && define.amd ? define(factory) :
  (global.i18nextBrowserLanguageDetector = factory());
}(this, function () { 'use strict';

  var babelHelpers = {};

  babelHelpers.classCallCheck = function (instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  };

  babelHelpers.createClass = function () {
    function defineProperties(target, props) {
      for (var i = 0; i < props.length; i++) {
        var descriptor = props[i];
        descriptor.enumerable = descriptor.enumerable || false;
        descriptor.configurable = true;
        if ("value" in descriptor) descriptor.writable = true;
        Object.defineProperty(target, descriptor.key, descriptor);
      }
    }

    return function (Constructor, protoProps, staticProps) {
      if (protoProps) defineProperties(Constructor.prototype, protoProps);
      if (staticProps) defineProperties(Constructor, staticProps);
      return Constructor;
    };
  }();

  babelHelpers;

  var arr = [];
  var each = arr.forEach;
  var slice = arr.slice;

  function defaults(obj) {
    each.call(slice.call(arguments, 1), function (source) {
      if (source) {
        for (var prop in source) {
          if (obj[prop] === undefined) obj[prop] = source[prop];
        }
      }
    });
    return obj;
  }

  var cookie = {
    create: function create(name, value, minutes, domain) {
      var expires = void 0;
      if (minutes) {
        var date = new Date();
        date.setTime(date.getTime() + minutes * 60 * 1000);
        expires = '; expires=' + date.toGMTString();
      } else expires = '';
      domain = domain ? 'domain=' + domain + ';' : '';
      document.cookie = name + '=' + value + expires + ';' + domain + 'path=/';
    },

    read: function read(name) {
      var nameEQ = name + '=';
      var ca = document.cookie.split(';');
      for (var i = 0; i < ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0) === ' ') {
          c = c.substring(1, c.length);
        }if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length, c.length);
      }
      return null;
    },

    remove: function remove(name) {
      this.create(name, '', -1);
    }
  };

  var cookie$1 = {
    name: 'cookie',

    lookup: function lookup(options) {
      var found = void 0;

      if (options.lookupCookie && typeof document !== 'undefined') {
        var c = cookie.read(options.lookupCookie);
        if (c) found = c;
      }

      return found;
    },
    cacheUserLanguage: function cacheUserLanguage(lng, options) {
      if (options.lookupCookie && typeof document !== 'undefined') {
        cookie.create(options.lookupCookie, lng, options.cookieMinutes, options.cookieDomain);
      }
    }
  };

  var querystring = {
    name: 'querystring',

    lookup: function lookup(options) {
      var found = void 0;

      if (typeof window !== 'undefined') {
        var query = window.location.search.substring(1);
        var params = query.split('&');
        for (var i = 0; i < params.length; i++) {
          var pos = params[i].indexOf('=');
          if (pos > 0) {
            var key = params[i].substring(0, pos);
            if (key === options.lookupQuerystring) {
              found = params[i].substring(pos + 1);
            }
          }
        }
      }

      return found;
    }
  };

  var hasLocalStorageSupport = void 0;
  try {
    hasLocalStorageSupport = window !== 'undefined' && window.localStorage !== null;
    var testKey = 'i18next.translate.boo';
    window.localStorage.setItem(testKey, 'foo');
    window.localStorage.removeItem(testKey);
  } catch (e) {
    hasLocalStorageSupport = false;
  }

  var localStorage = {
    name: 'localStorage',

    lookup: function lookup(options) {
      var found = void 0;

      if (options.lookupLocalStorage && hasLocalStorageSupport) {
        var lng = window.localStorage.getItem(options.lookupLocalStorage);
        if (lng) found = lng;
      }

      return found;
    },
    cacheUserLanguage: function cacheUserLanguage(lng, options) {
      if (options.lookupLocalStorage && hasLocalStorageSupport) {
        window.localStorage.setItem(options.lookupLocalStorage, lng);
      }
    }
  };

  var navigator$1 = {
    name: 'navigator',

    lookup: function lookup(options) {
      var found = [];

      if (typeof navigator !== 'undefined') {
        if (navigator.languages) {
          // chrome only; not an array, so can't use .push.apply instead of iterating
          for (var i = 0; i < navigator.languages.length; i++) {
            found.push(navigator.languages[i]);
          }
        }
        if (navigator.userLanguage) {
          found.push(navigator.userLanguage);
        }
        if (navigator.language) {
          found.push(navigator.language);
        }
      }

      return found.length > 0 ? found : undefined;
    }
  };

  var htmlTag = {
    name: 'htmlTag',

    lookup: function lookup(options) {
      var found = void 0;
      var htmlTag = options.htmlTag || (typeof document !== 'undefined' ? document.documentElement : null);

      if (htmlTag && typeof htmlTag.getAttribute === 'function') {
        found = htmlTag.getAttribute('lang');
      }

      return found;
    }
  };

  function getDefaults() {
    return {
      order: ['querystring', 'cookie', 'localStorage', 'navigator', 'htmlTag'],
      lookupQuerystring: 'lng',
      lookupCookie: 'i18next',
      lookupLocalStorage: 'i18nextLng',

      // cache user language
      caches: ['localStorage']
      //cookieMinutes: 10,
      //cookieDomain: 'myDomain'
    };
  }

  var Browser = function () {
    function Browser(services) {
      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];
      babelHelpers.classCallCheck(this, Browser);

      this.type = 'languageDetector';
      this.detectors = {};

      this.init(services, options);
    }

    babelHelpers.createClass(Browser, [{
      key: 'init',
      value: function init(services) {
        var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];
        var i18nOptions = arguments.length <= 2 || arguments[2] === undefined ? {} : arguments[2];

        this.services = services;
        this.options = defaults(options, this.options || {}, getDefaults());
        this.i18nOptions = i18nOptions;

        this.addDetector(cookie$1);
        this.addDetector(querystring);
        this.addDetector(localStorage);
        this.addDetector(navigator$1);
        this.addDetector(htmlTag);
      }
    }, {
      key: 'addDetector',
      value: function addDetector(detector) {
        this.detectors[detector.name] = detector;
      }
    }, {
      key: 'detect',
      value: function detect(detectionOrder) {
        var _this = this;

        if (!detectionOrder) detectionOrder = this.options.order;

        var detected = [];
        detectionOrder.forEach(function (detectorName) {
          if (_this.detectors[detectorName]) {
            var lookup = _this.detectors[detectorName].lookup(_this.options);
            if (lookup && typeof lookup === 'string') lookup = [lookup];
            if (lookup) detected = detected.concat(lookup);
          }
        });

        var found = void 0;
        detected.forEach(function (lng) {
          if (found) return;
          var cleanedLng = _this.services.languageUtils.formatLanguageCode(lng);
          if (_this.services.languageUtils.isWhitelisted(cleanedLng)) found = cleanedLng;
        });

        return found || this.i18nOptions.fallbackLng[0];
      }
    }, {
      key: 'cacheUserLanguage',
      value: function cacheUserLanguage(lng, caches) {
        var _this2 = this;

        if (!caches) caches = this.options.caches;
        if (!caches) return;
        caches.forEach(function (cacheName) {
          if (_this2.detectors[cacheName]) _this2.detectors[cacheName].cacheUserLanguage(lng, _this2.options);
        });
      }
    }]);
    return Browser;
  }();

  Browser.type = 'languageDetector';

  return Browser;

}));

/***/ }),
/* 3 */
/***/ (function(module, exports, __webpack_require__) {

(function (global, factory) {
     true ? module.exports = factory() :
    typeof define === 'function' && define.amd ? define(factory) :
    (global.i18nextLocalStorageCache = factory());
}(this, (function () { 'use strict';

var arr = [];
var each = arr.forEach;
var slice = arr.slice;

function defaults(obj) {
  each.call(slice.call(arguments, 1), function (source) {
    if (source) {
      for (var prop in source) {
        if (obj[prop] === undefined) obj[prop] = source[prop];
      }
    }
  });
  return obj;
}



function debounce(func, wait, immediate) {
  var timeout;
  return function () {
    var context = this,
        args = arguments;
    var later = function later() {
      timeout = null;
      if (!immediate) func.apply(context, args);
    };
    var callNow = immediate && !timeout;
    clearTimeout(timeout);
    timeout = setTimeout(later, wait);
    if (callNow) func.apply(context, args);
  };
}

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var storage = {
  setItem: function setItem(key, value) {
    if (window.localStorage) {
      try {
        window.localStorage.setItem(key, value);
      } catch (e) {
        // f.log('failed to set value for key "' + key + '" to localStorage.');
      }
    }
  },
  getItem: function getItem(key, value) {
    if (window.localStorage) {
      try {
        return window.localStorage.getItem(key, value);
      } catch (e) {
        // f.log('failed to get value for key "' + key + '" from localStorage.');
      }
    }
    return undefined;
  }
};

function getDefaults() {
  return {
    enabled: false,
    prefix: 'i18next_res_',
    expirationTime: 7 * 24 * 60 * 60 * 1000,
    versions: {}
  };
}

var Cache = function () {
  function Cache(services) {
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

    _classCallCheck(this, Cache);

    this.init(services, options);

    this.type = 'cache';
    this.debouncedStore = debounce(this.store, 10000);
  }

  _createClass(Cache, [{
    key: 'init',
    value: function init(services) {
      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

      this.services = services;
      this.options = defaults(options, this.options || {}, getDefaults());
    }
  }, {
    key: 'load',
    value: function load(lngs, callback) {
      var _this = this;

      var store = {};
      var nowMS = new Date().getTime();

      if (!window.localStorage || !lngs.length) {
        return callback(null, null);
      }

      var todo = lngs.length;

      lngs.forEach(function (lng) {
        var local = storage.getItem(_this.options.prefix + lng);

        if (local) {
          local = JSON.parse(local);
          if (
          // expiration field is mandatory, and should not be expired
          local.i18nStamp && local.i18nStamp + _this.options.expirationTime > nowMS &&

          // there should be no language version set, or if it is, it should match the one in translation
          _this.options.versions[lng] === local.i18nVersion) {
            store[lng] = local;
          }
        }

        todo -= 1;
        if (todo === 0) {
          callback(null, store);
        }
      });
      return undefined;
    }
  }, {
    key: 'store',
    value: function store(storeParam) {
      var store = storeParam;
      if (window.localStorage) {
        for (var m in store) {
          // eslint-disable-line
          // timestamp
          store[m].i18nStamp = new Date().getTime();

          // language version (if set)
          if (this.options.versions[m]) {
            store[m].i18nVersion = this.options.versions[m];
          }

          // save
          storage.setItem(this.options.prefix + m, JSON.stringify(store[m]));
        }
      }
    }
  }, {
    key: 'save',
    value: function save(store) {
      this.debouncedStore(store);
    }
  }]);

  return Cache;
}();

Cache.type = 'cache';

return Cache;

})));


/***/ }),
/* 4 */
/***/ (function(module, exports, __webpack_require__) {

(function (global, factory) {
     true ? module.exports = factory() :
    typeof define === 'function' && define.amd ? define('i18nextSprintfPostProcessor', factory) :
    (global.i18nextSprintfPostProcessor = factory());
}(this, function () { 'use strict';

    var babelHelpers = {};
    babelHelpers.typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) {
      return typeof obj;
    } : function (obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol ? "symbol" : typeof obj;
    };
    babelHelpers;

    var re = {
        not_string: /[^s]/,
        number: /[diefg]/,
        json: /[j]/,
        not_json: /[^j]/,
        text: /^[^\x25]+/,
        modulo: /^\x25{2}/,
        placeholder: /^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijosuxX])/,
        key: /^([a-z_][a-z_\d]*)/i,
        key_access: /^\.([a-z_][a-z_\d]*)/i,
        index_access: /^\[(\d+)\]/,
        sign: /^[\+\-]/
    };

    function sprintf() {
        var key = arguments[0],
            cache = sprintf.cache;
        if (!(cache[key] && cache.hasOwnProperty(key))) {
            cache[key] = sprintf.parse(key);
        }
        return sprintf.format.call(null, cache[key], arguments);
    }

    sprintf.format = function (parse_tree, argv) {
        var cursor = 1,
            tree_length = parse_tree.length,
            node_type = "",
            arg,
            output = [],
            i,
            k,
            match,
            pad,
            pad_character,
            pad_length,
            is_positive = true,
            sign = "";
        for (i = 0; i < tree_length; i++) {
            node_type = get_type(parse_tree[i]);
            if (node_type === "string") {
                output[output.length] = parse_tree[i];
            } else if (node_type === "array") {
                match = parse_tree[i]; // convenience purposes only
                if (match[2]) {
                    // keyword argument
                    arg = argv[cursor];
                    for (k = 0; k < match[2].length; k++) {
                        if (!arg.hasOwnProperty(match[2][k])) {
                            throw new Error(sprintf("[sprintf] property '%s' does not exist", match[2][k]));
                        }
                        arg = arg[match[2][k]];
                    }
                } else if (match[1]) {
                    // positional argument (explicit)
                    arg = argv[match[1]];
                } else {
                    // positional argument (implicit)
                    arg = argv[cursor++];
                }

                if (get_type(arg) == "function") {
                    arg = arg();
                }

                if (re.not_string.test(match[8]) && re.not_json.test(match[8]) && get_type(arg) != "number" && isNaN(arg)) {
                    throw new TypeError(sprintf("[sprintf] expecting number but found %s", get_type(arg)));
                }

                if (re.number.test(match[8])) {
                    is_positive = arg >= 0;
                }

                switch (match[8]) {
                    case "b":
                        arg = arg.toString(2);
                        break;
                    case "c":
                        arg = String.fromCharCode(arg);
                        break;
                    case "d":
                    case "i":
                        arg = parseInt(arg, 10);
                        break;
                    case "j":
                        arg = JSON.stringify(arg, null, match[6] ? parseInt(match[6]) : 0);
                        break;
                    case "e":
                        arg = match[7] ? arg.toExponential(match[7]) : arg.toExponential();
                        break;
                    case "f":
                        arg = match[7] ? parseFloat(arg).toFixed(match[7]) : parseFloat(arg);
                        break;
                    case "g":
                        arg = match[7] ? parseFloat(arg).toPrecision(match[7]) : parseFloat(arg);
                        break;
                    case "o":
                        arg = arg.toString(8);
                        break;
                    case "s":
                        arg = (arg = String(arg)) && match[7] ? arg.substring(0, match[7]) : arg;
                        break;
                    case "u":
                        arg = arg >>> 0;
                        break;
                    case "x":
                        arg = arg.toString(16);
                        break;
                    case "X":
                        arg = arg.toString(16).toUpperCase();
                        break;
                }
                if (re.json.test(match[8])) {
                    output[output.length] = arg;
                } else {
                    if (re.number.test(match[8]) && (!is_positive || match[3])) {
                        sign = is_positive ? "+" : "-";
                        arg = arg.toString().replace(re.sign, "");
                    } else {
                        sign = "";
                    }
                    pad_character = match[4] ? match[4] === "0" ? "0" : match[4].charAt(1) : " ";
                    pad_length = match[6] - (sign + arg).length;
                    pad = match[6] ? pad_length > 0 ? str_repeat(pad_character, pad_length) : "" : "";
                    output[output.length] = match[5] ? sign + arg + pad : pad_character === "0" ? sign + pad + arg : pad + sign + arg;
                }
            }
        }
        return output.join("");
    };

    sprintf.cache = {};

    sprintf.parse = function (fmt) {
        var _fmt = fmt,
            match = [],
            parse_tree = [],
            arg_names = 0;
        while (_fmt) {
            if ((match = re.text.exec(_fmt)) !== null) {
                parse_tree[parse_tree.length] = match[0];
            } else if ((match = re.modulo.exec(_fmt)) !== null) {
                parse_tree[parse_tree.length] = "%";
            } else if ((match = re.placeholder.exec(_fmt)) !== null) {
                if (match[2]) {
                    arg_names |= 1;
                    var field_list = [],
                        replacement_field = match[2],
                        field_match = [];
                    if ((field_match = re.key.exec(replacement_field)) !== null) {
                        field_list[field_list.length] = field_match[1];
                        while ((replacement_field = replacement_field.substring(field_match[0].length)) !== "") {
                            if ((field_match = re.key_access.exec(replacement_field)) !== null) {
                                field_list[field_list.length] = field_match[1];
                            } else if ((field_match = re.index_access.exec(replacement_field)) !== null) {
                                field_list[field_list.length] = field_match[1];
                            } else {
                                throw new SyntaxError("[sprintf] failed to parse named argument key");
                            }
                        }
                    } else {
                        throw new SyntaxError("[sprintf] failed to parse named argument key");
                    }
                    match[2] = field_list;
                } else {
                    arg_names |= 2;
                }
                if (arg_names === 3) {
                    throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");
                }
                parse_tree[parse_tree.length] = match;
            } else {
                throw new SyntaxError("[sprintf] unexpected placeholder");
            }
            _fmt = _fmt.substring(match[0].length);
        }
        return parse_tree;
    };

    function vsprintf(fmt, argv, _argv) {
        _argv = (argv || []).slice(0);
        _argv.splice(0, 0, fmt);
        return sprintf.apply(null, _argv);
    }

    /**
     * helpers
     */
    function get_type(variable) {
        return Object.prototype.toString.call(variable).slice(8, -1).toLowerCase();
    }

    function str_repeat(input, multiplier) {
        return Array(multiplier + 1).join(input);
    }

    var index = {
      name: 'sprintf',
      type: 'postProcessor',

      process: function process(value, key, options) {
        if (!options.sprintf) return value;

        if (Object.prototype.toString.apply(options.sprintf) === '[object Array]') {
          return vsprintf(value, options.sprintf);
        } else if (babelHelpers.typeof(options.sprintf) === 'object') {
          return sprintf(value, options.sprintf);
        }

        return value;
      },
      overloadTranslationOptionHandler: function overloadTranslationOptionHandler(args) {
        var values = [];

        for (var i = 1; i < args.length; i++) {
          values.push(args[i]);
        }

        return {
          postProcess: 'sprintf',
          sprintf: values
        };
      }
    };

    return index;

}));

/***/ }),
/* 5 */
/***/ (function(module, exports, __webpack_require__) {

(function (global, factory) {
   true ? module.exports = factory() :
  typeof define === 'function' && define.amd ? define(factory) :
  (global.i18nextXHRBackend = factory());
}(this, (function () { 'use strict';

var arr = [];
var each = arr.forEach;
var slice = arr.slice;

function defaults(obj) {
  each.call(slice.call(arguments, 1), function (source) {
    if (source) {
      for (var prop in source) {
        if (obj[prop] === undefined) obj[prop] = source[prop];
      }
    }
  });
  return obj;
}

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

function addQueryString(url, params) {
  if (params && (typeof params === 'undefined' ? 'undefined' : _typeof(params)) === 'object') {
    var queryString = '',
        e = encodeURIComponent;

    // Must encode data
    for (var paramName in params) {
      queryString += '&' + e(paramName) + '=' + e(params[paramName]);
    }

    if (!queryString) {
      return url;
    }

    url = url + (url.indexOf('?') !== -1 ? '&' : '?') + queryString.slice(1);
  }

  return url;
}

// https://gist.github.com/Xeoncross/7663273
function ajax(url, options, callback, data, cache) {

  if (data && (typeof data === 'undefined' ? 'undefined' : _typeof(data)) === 'object') {
    if (!cache) {
      data['_t'] = new Date();
    }
    // URL encoded form data must be in querystring format
    data = addQueryString('', data).slice(1);
  }

  if (options.queryStringParams) {
    url = addQueryString(url, options.queryStringParams);
  }

  try {
    var x = new (XMLHttpRequest || ActiveXObject)('MSXML2.XMLHTTP.3.0');
    x.open(data ? 'POST' : 'GET', url, 1);
    if (!options.crossDomain) {
      x.setRequestHeader('X-Requested-With', 'XMLHttpRequest');
    }
    x.withCredentials = !!options.withCredentials;
    if (data) {
      x.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
    }
    var h = options.customHeaders;
    if (h) {
      for (var i in h) {
        x.setRequestHeader(i, h[i]);
      }
    }
    x.onreadystatechange = function () {
      x.readyState > 3 && callback && callback(x.responseText, x);
    };
    x.send(data);
  } catch (e) {
    console && console.log(e);
  }
}

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function getDefaults() {
  return {
    loadPath: '/locales/{{lng}}/{{ns}}.json',
    addPath: 'locales/add/{{lng}}/{{ns}}',
    allowMultiLoading: false,
    parse: JSON.parse,
    crossDomain: false,
    ajax: ajax
  };
}

var Backend = function () {
  function Backend(services) {
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

    _classCallCheck(this, Backend);

    this.init(services, options);

    this.type = 'backend';
  }

  _createClass(Backend, [{
    key: 'init',
    value: function init(services) {
      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

      this.services = services;
      this.options = defaults(options, this.options || {}, getDefaults());
    }
  }, {
    key: 'readMulti',
    value: function readMulti(languages, namespaces, callback) {
      var loadPath = this.options.loadPath;
      if (typeof this.options.loadPath === 'function') {
        loadPath = this.options.loadPath(languages, namespaces);
      }

      var url = this.services.interpolator.interpolate(loadPath, { lng: languages.join('+'), ns: namespaces.join('+') });

      this.loadUrl(url, callback);
    }
  }, {
    key: 'read',
    value: function read(language, namespace, callback) {
      var loadPath = this.options.loadPath;
      if (typeof this.options.loadPath === 'function') {
        loadPath = this.options.loadPath([language], [namespace]);
      }

      var url = this.services.interpolator.interpolate(loadPath, { lng: language, ns: namespace });

      this.loadUrl(url, callback);
    }
  }, {
    key: 'loadUrl',
    value: function loadUrl(url, callback) {
      var _this = this;

      this.options.ajax(url, this.options, function (data, xhr) {
        if (xhr.status >= 500 && xhr.status < 600) return callback('failed loading ' + url, true /* retry */);
        if (xhr.status >= 400 && xhr.status < 500) return callback('failed loading ' + url, false /* no retry */);

        var ret = void 0,
            err = void 0;
        try {
          ret = _this.options.parse(data, url);
        } catch (e) {
          err = 'failed parsing ' + url + ' to json';
        }
        if (err) return callback(err, false);
        callback(null, ret);
      });
    }
  }, {
    key: 'create',
    value: function create(languages, namespace, key, fallbackValue) {
      var _this2 = this;

      if (typeof languages === 'string') languages = [languages];

      var payload = {};
      payload[key] = fallbackValue || '';

      languages.forEach(function (lng) {
        var url = _this2.services.interpolator.interpolate(_this2.options.addPath, { lng: lng, ns: namespace });

        _this2.options.ajax(url, _this2.options, function (data, xhr) {
          //const statusCode = xhr.status.toString();
          // TODO: if statusCode === 4xx do log
        }, payload);
      });
    }
  }]);

  return Backend;
}();

Backend.type = 'backend';

return Backend;

})));


/***/ }),
/* 6 */
/***/ (function(module, exports, __webpack_require__) {

(function (global, factory) {
   true ? module.exports = factory() :
  typeof define === 'function' && define.amd ? define(factory) :
  (global.jqueryI18next = factory());
}(this, (function () { 'use strict';

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var defaults = {
  tName: 't',
  i18nName: 'i18n',
  handleName: 'localize',
  selectorAttr: 'data-i18n',
  targetAttr: 'i18n-target',
  optionsAttr: 'i18n-options',
  useOptionsAttr: false,
  parseDefaultValueFromContent: true
};

function init(i18next, $) {
  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};


  options = _extends({}, defaults, options);

  function parse(ele, key, opts) {
    if (key.length === 0) return;

    var attr = 'text';

    if (key.indexOf('[') === 0) {
      var parts = key.split(']');
      key = parts[1];
      attr = parts[0].substr(1, parts[0].length - 1);
    }

    if (key.indexOf(';') === key.length - 1) {
      key = key.substr(0, key.length - 2);
    }

    function extendDefault(o, val) {
      if (!options.parseDefaultValueFromContent) return o;
      return _extends({}, o, { defaultValue: val });
    }

    if (attr === 'html') {
      ele.html(i18next.t(key, extendDefault(opts, ele.html())));
    } else if (attr === 'text') {
      ele.text(i18next.t(key, extendDefault(opts, ele.text())));
    } else if (attr === 'prepend') {
      ele.prepend(i18next.t(key, extendDefault(opts, ele.html())));
    } else if (attr === 'append') {
      ele.append(i18next.t(key, extendDefault(opts, ele.html())));
    } else if (attr.indexOf('data-') === 0) {
      var dataAttr = attr.substr('data-'.length);
      var translated = i18next.t(key, extendDefault(opts, ele.data(dataAttr)));

      // we change into the data cache
      ele.data(dataAttr, translated);
      // we change into the dom
      ele.attr(attr, translated);
    } else {
      ele.attr(attr, i18next.t(key, extendDefault(opts, ele.attr(attr))));
    }
  }

  function localize(ele, opts) {
    var key = ele.attr(options.selectorAttr);
    if (!key && typeof key !== 'undefined' && key !== false) key = ele.text() || ele.val();
    if (!key) return;

    var target = ele,
        targetSelector = ele.data(options.targetAttr);

    if (targetSelector) target = ele.find(targetSelector) || ele;

    if (!opts && options.useOptionsAttr === true) opts = ele.data(options.optionsAttr);

    opts = opts || {};

    if (key.indexOf(';') >= 0) {
      var keys = key.split(';');

      $.each(keys, function (m, k) {
        if (k !== '') parse(target, k, opts);
      });
    } else {
      parse(target, key, opts);
    }

    if (options.useOptionsAttr === true) {
      var clone = {};
      clone = _extends({ clone: clone }, opts);

      delete clone.lng;
      ele.data(options.optionsAttr, clone);
    }
  }

  function handle(opts) {
    return this.each(function () {
      // localize element itself
      localize($(this), opts);

      // localize children
      var elements = $(this).find('[' + options.selectorAttr + ']');
      elements.each(function () {
        localize($(this), opts);
      });
    });
  };

  // $.t $.i18n shortcut
  $[options.tName] = i18next.t.bind(i18next);
  $[options.i18nName] = i18next;

  // selector function $(mySelector).localize(opts);
  $.fn[options.handleName] = handle;
}

var index = {
  init: init
};

return index;

})));

/***/ }),
/* 7 */
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE_7__;

/***/ }),
/* 8 */
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE_8__;

/***/ }),
/* 9 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(global) {var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;(function (root, factory) { if (true) { !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(8), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = function ($, CDP) { return factory($, CDP); }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
                __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__)); } else if (typeof exports === "object") { module.exports = factory(require("jquery"), require("cdp.core")); } else { factory(root.jQuery || root.$, root.CDP || (root.CDP = {})); } }(((this || 0).self || global), function ($, CDP) {




/* tslint:disable:max-line-length */
var CDP;
(function (CDP) {
    var TAG = "[CDP.i18n] ";
    /**
     * \~english
     * initialize i18next.
     *
     * \~japanese
     * i18next の初期化
     *
     * @private
     * @return {jQueryPromise}
     */
    function initializeI18N(options) {
        var df = $.Deferred();
        var i18nSettings = options || {};
        var i18nOptions = (function (resources) {
            if (resources) {
                for (var lng in resources) {
                    if (resources.hasOwnProperty(lng)) {
                        for (var ns in resources[lng]) {
                            if (resources[lng].hasOwnProperty(ns)) {
                                resources[lng][ns] = getLocaleFallbackResource(resources[lng][ns]);
                            }
                        }
                    }
                }
                i18nSettings.options.resources = resources;
                return i18nSettings.options;
            }
            else {
                return i18nSettings.options;
            }
        })(i18nSettings.fallbackResources);
        Promise.resolve().then(function() { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(6)]; (function ($18Next) {
            Promise.resolve().then(function() { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [
                __webpack_require__(1),
                __webpack_require__(5),
                __webpack_require__(3),
                __webpack_require__(4),
                __webpack_require__(2),
            ]; (function (i18next, Backend, Cache, PostProcessor, LanguageDetector) {
                i18next
                    .use(Backend)
                    .use(Cache)
                    .use(PostProcessor)
                    .use(LanguageDetector)
                    .init(i18nOptions, function (error, t) {
                    $18Next.init(i18next, $, {
                        tName: "t",
                        i18nName: "i18n",
                        handleName: "localize",
                        selectorAttr: "data-i18n",
                        targetAttr: "i18n-target",
                        optionsAttr: "i18n-options",
                        useOptionsAttr: false,
                        parseDefaultValueFromContent: true // parses default values from content ele.val or ele.text
                    });
                    // i18next 3.4.1: resources が指定されると preload が読み込まれないため、再読み込み処理を行う.
                    if (i18next.options.resources && i18next.options.preload) {
                        // options からプロパティを一旦削除.
                        var _preload_1 = i18next.options.preload;
                        var _resources_1 = i18next.options.resources;
                        delete i18next.options.resources;
                        delete i18next.options.preload;
                        i18next.loadLanguages(_preload_1, function () {
                            // options を元に戻す
                            i18next.options.resources = _resources_1;
                            i18next.options.preload = _preload_1;
                            CDP.i18n = i18next;
                            df.resolve();
                        });
                    }
                    else {
                        CDP.i18n = i18next;
                        df.resolve();
                    }
                });
            }.apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__));}).catch(__webpack_require__.oe);
        }.apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__));}).catch(__webpack_require__.oe);
        return df.promise();
    }
    CDP.initializeI18N = initializeI18N;
    /**
     * \~english
     * get string resource for fallback.
     *
     * \~japanese
     * Fallback 用ローカライズリソースの取得
     *
     * @private
     * @return {Object}
     */
    function getLocaleFallbackResource(path) {
        var json;
        $.ajax({
            url: toUrl(path),
            method: "GET",
            async: false,
            dataType: "json",
            success: function (data) {
                json = data;
            },
            error: function (xhr, status) {
                console.log(TAG + "ajax request failed. status: " + status);
            }
        });
        return json;
    }
    /**
     * \~english
     * Convert path to URL.
     *
     * @param path {String} [in] path string
     *
     * \~japanese
     * path を URL に変換
     *
     * @param path {String} [in] パスを指定。
     */
    function toUrl(path) {
        if (!path && "/" !== path[0]) {
            console.error(TAG + "invalid path. path: " + path);
        }
        else {
            return CDP.webRoot + path.slice(1);
        }
    }
})(CDP || (CDP = {}));

return CDP; }));

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ })
/******/ ]);
});
/*!
 * cdp.framework.jqm.js 2.0.0
 *
 * Date: 2017-04-17T11:37:55+0900
 */

(function webpackUniversalModuleDefinition(root, factory) {
    if(typeof exports === 'object' && typeof module === 'object')
        module.exports = factory(require("backbone"), require("cdp.i18n"), require("cdp.promise"), require("jquery"));
    else if(typeof define === 'function' && define.amd)
        define('cdp.framework.jqm',["backbone", "cdp.i18n", "cdp.promise", "jquery"], factory);
    else if(typeof exports === 'object')
        exports["CDP.Framework"] = factory(require("backbone"), require("cdp.i18n"), require("cdp.promise"), require("jquery"));
    else
        root["CDP.Framework"] = factory(root["Backbone"], root["CDP"], root["CDP"], root["jQuery"]);
})(this, function(__WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_4__, __WEBPACK_EXTERNAL_MODULE_6__) {
return /******/ (function(modules) { // webpackBootstrap
/******/     // The module cache
/******/     var installedModules = {};
/******/
/******/     // The require function
/******/     function __webpack_require__(moduleId) {
/******/
/******/         // Check if module is in cache
/******/         if(installedModules[moduleId]) {
/******/             return installedModules[moduleId].exports;
/******/         }
/******/         // Create a new module (and put it into the cache)
/******/         var module = installedModules[moduleId] = {
/******/             i: moduleId,
/******/             l: false,
/******/             exports: {}
/******/         };
/******/
/******/         // Execute the module function
/******/         modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/         // Flag the module as loaded
/******/         module.l = true;
/******/
/******/         // Return the exports of the module
/******/         return module.exports;
/******/     }
/******/
/******/
/******/     // expose the modules object (__webpack_modules__)
/******/     __webpack_require__.m = modules;
/******/
/******/     // expose the module cache
/******/     __webpack_require__.c = installedModules;
/******/
/******/     // identity function for calling harmony imports with the correct context
/******/     __webpack_require__.i = function(value) { return value; };
/******/
/******/     // define getter function for harmony exports
/******/     __webpack_require__.d = function(exports, name, getter) {
/******/         if(!__webpack_require__.o(exports, name)) {
/******/             Object.defineProperty(exports, name, {
/******/                 configurable: false,
/******/                 enumerable: true,
/******/                 get: getter
/******/             });
/******/         }
/******/     };
/******/
/******/     // getDefaultExport function for compatibility with non-harmony modules
/******/     __webpack_require__.n = function(module) {
/******/         var getter = module && module.__esModule ?
/******/             function getDefault() { return module['default']; } :
/******/             function getModuleExports() { return module; };
/******/         __webpack_require__.d(getter, 'a', getter);
/******/         return getter;
/******/     };
/******/
/******/     // Object.prototype.hasOwnProperty.call
/******/     __webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/     // __webpack_public_path__
/******/     __webpack_require__.p = "";
/******/
/******/     // Load entry module and return exports
/******/     return __webpack_require__(__webpack_require__.s = 5);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*** IMPORTS FROM imports-loader ***/
(function() {

/*!
* jQuery Mobile 1.4.5
* Git HEAD hash: 68e55e78b292634d3991c795f06f5e37a512decc <> Date: Fri Oct 31 2014 17:33:30 UTC
* http://jquerymobile.com
*
* Copyright 2010, 2014 jQuery Foundation, Inc. and othercontributors
* Released under the MIT license.
* http://jquery.org/license
*
*/


(function ( root, doc, factory ) {
    if ( true ) {
        // AMD. Register as an anonymous module.
        !(__WEBPACK_AMD_DEFINE_ARRAY__ = [ __webpack_require__(6) ], __WEBPACK_AMD_DEFINE_RESULT__ = function ( $ ) {
            factory( $, root, doc );
            return $.mobile;
        }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
                __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
    } else {
        // Browser globals
        factory( root.jQuery, root, doc );
    }
}( this, document, function ( jQuery, window, document, undefined ) {
(function( $ ) {
    $.mobile = {};
}( jQuery ));

/*!
 * jQuery UI Core c0ab71056b936627e8a7821f03c044aec6280a40
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/ui-core/
 */
(function( $, undefined ) {

var uuid = 0,
    runiqueId = /^ui-id-\d+$/;

// $.ui might exist from components with no dependencies, e.g., $.ui.position
$.ui = $.ui || {};

$.extend( $.ui, {
    version: "c0ab71056b936627e8a7821f03c044aec6280a40",

    keyCode: {
        BACKSPACE: 8,
        COMMA: 188,
        DELETE: 46,
        DOWN: 40,
        END: 35,
        ENTER: 13,
        ESCAPE: 27,
        HOME: 36,
        LEFT: 37,
        PAGE_DOWN: 34,
        PAGE_UP: 33,
        PERIOD: 190,
        RIGHT: 39,
        SPACE: 32,
        TAB: 9,
        UP: 38
    }
});

// plugins
$.fn.extend({
    focus: (function( orig ) {
        return function( delay, fn ) {
            return typeof delay === "number" ?
                this.each(function() {
                    var elem = this;
                    setTimeout(function() {
                        $( elem ).focus();
                        if ( fn ) {
                            fn.call( elem );
                        }
                    }, delay );
                }) :
                orig.apply( this, arguments );
        };
    })( $.fn.focus ),

    scrollParent: function() {
        var scrollParent;
        if (($.ui.ie && (/(static|relative)/).test(this.css("position"))) || (/absolute/).test(this.css("position"))) {
            scrollParent = this.parents().filter(function() {
                return (/(relative|absolute|fixed)/).test($.css(this,"position")) && (/(auto|scroll)/).test($.css(this,"overflow")+$.css(this,"overflow-y")+$.css(this,"overflow-x"));
            }).eq(0);
        } else {
            scrollParent = this.parents().filter(function() {
                return (/(auto|scroll)/).test($.css(this,"overflow")+$.css(this,"overflow-y")+$.css(this,"overflow-x"));
            }).eq(0);
        }

        return ( /fixed/ ).test( this.css( "position") ) || !scrollParent.length ? $( this[ 0 ].ownerDocument || document ) : scrollParent;
    },

    uniqueId: function() {
        return this.each(function() {
            if ( !this.id ) {
                this.id = "ui-id-" + (++uuid);
            }
        });
    },

    removeUniqueId: function() {
        return this.each(function() {
            if ( runiqueId.test( this.id ) ) {
                $( this ).removeAttr( "id" );
            }
        });
    }
});

// selectors
function focusable( element, isTabIndexNotNaN ) {
    var map, mapName, img,
        nodeName = element.nodeName.toLowerCase();
    if ( "area" === nodeName ) {
        map = element.parentNode;
        mapName = map.name;
        if ( !element.href || !mapName || map.nodeName.toLowerCase() !== "map" ) {
            return false;
        }
        img = $( "img[usemap=#" + mapName + "]" )[0];
        return !!img && visible( img );
    }
    return ( /input|select|textarea|button|object/.test( nodeName ) ?
        !element.disabled :
        "a" === nodeName ?
            element.href || isTabIndexNotNaN :
            isTabIndexNotNaN) &&
        // the element and all of its ancestors must be visible
        visible( element );
}

function visible( element ) {
    return $.expr.filters.visible( element ) &&
        !$( element ).parents().addBack().filter(function() {
            return $.css( this, "visibility" ) === "hidden";
        }).length;
}

$.extend( $.expr[ ":" ], {
    data: $.expr.createPseudo ?
        $.expr.createPseudo(function( dataName ) {
            return function( elem ) {
                return !!$.data( elem, dataName );
            };
        }) :
        // support: jQuery <1.8
        function( elem, i, match ) {
            return !!$.data( elem, match[ 3 ] );
        },

    focusable: function( element ) {
        return focusable( element, !isNaN( $.attr( element, "tabindex" ) ) );
    },

    tabbable: function( element ) {
        var tabIndex = $.attr( element, "tabindex" ),
            isTabIndexNaN = isNaN( tabIndex );
        return ( isTabIndexNaN || tabIndex >= 0 ) && focusable( element, !isTabIndexNaN );
    }
});

// support: jQuery <1.8
if ( !$( "<a>" ).outerWidth( 1 ).jquery ) {
    $.each( [ "Width", "Height" ], function( i, name ) {
        var side = name === "Width" ? [ "Left", "Right" ] : [ "Top", "Bottom" ],
            type = name.toLowerCase(),
            orig = {
                innerWidth: $.fn.innerWidth,
                innerHeight: $.fn.innerHeight,
                outerWidth: $.fn.outerWidth,
                outerHeight: $.fn.outerHeight
            };

        function reduce( elem, size, border, margin ) {
            $.each( side, function() {
                size -= parseFloat( $.css( elem, "padding" + this ) ) || 0;
                if ( border ) {
                    size -= parseFloat( $.css( elem, "border" + this + "Width" ) ) || 0;
                }
                if ( margin ) {
                    size -= parseFloat( $.css( elem, "margin" + this ) ) || 0;
                }
            });
            return size;
        }

        $.fn[ "inner" + name ] = function( size ) {
            if ( size === undefined ) {
                return orig[ "inner" + name ].call( this );
            }

            return this.each(function() {
                $( this ).css( type, reduce( this, size ) + "px" );
            });
        };

        $.fn[ "outer" + name] = function( size, margin ) {
            if ( typeof size !== "number" ) {
                return orig[ "outer" + name ].call( this, size );
            }

            return this.each(function() {
                $( this).css( type, reduce( this, size, true, margin ) + "px" );
            });
        };
    });
}

// support: jQuery <1.8
if ( !$.fn.addBack ) {
    $.fn.addBack = function( selector ) {
        return this.add( selector == null ?
            this.prevObject : this.prevObject.filter( selector )
        );
    };
}

// support: jQuery 1.6.1, 1.6.2 (http://bugs.jquery.com/ticket/9413)
if ( $( "<a>" ).data( "a-b", "a" ).removeData( "a-b" ).data( "a-b" ) ) {
    $.fn.removeData = (function( removeData ) {
        return function( key ) {
            if ( arguments.length ) {
                return removeData.call( this, $.camelCase( key ) );
            } else {
                return removeData.call( this );
            }
        };
    })( $.fn.removeData );
}





// deprecated
$.ui.ie = !!/msie [\w.]+/.exec( navigator.userAgent.toLowerCase() );

$.support.selectstart = "onselectstart" in document.createElement( "div" );
$.fn.extend({
    disableSelection: function() {
        return this.bind( ( $.support.selectstart ? "selectstart" : "mousedown" ) +
            ".ui-disableSelection", function( event ) {
                event.preventDefault();
            });
    },

    enableSelection: function() {
        return this.unbind( ".ui-disableSelection" );
    },

    zIndex: function( zIndex ) {
        if ( zIndex !== undefined ) {
            return this.css( "zIndex", zIndex );
        }

        if ( this.length ) {
            var elem = $( this[ 0 ] ), position, value;
            while ( elem.length && elem[ 0 ] !== document ) {
                // Ignore z-index if position is set to a value where z-index is ignored by the browser
                // This makes behavior of this function consistent across browsers
                // WebKit always returns auto if the element is positioned
                position = elem.css( "position" );
                if ( position === "absolute" || position === "relative" || position === "fixed" ) {
                    // IE returns 0 when zIndex is not specified
                    // other browsers return a string
                    // we ignore the case of nested elements with an explicit value of 0
                    // <div style="z-index: -10;"><div style="z-index: 0;"></div></div>
                    value = parseInt( elem.css( "zIndex" ), 10 );
                    if ( !isNaN( value ) && value !== 0 ) {
                        return value;
                    }
                }
                elem = elem.parent();
            }
        }

        return 0;
    }
});

// $.ui.plugin is deprecated. Use $.widget() extensions instead.
$.ui.plugin = {
    add: function( module, option, set ) {
        var i,
            proto = $.ui[ module ].prototype;
        for ( i in set ) {
            proto.plugins[ i ] = proto.plugins[ i ] || [];
            proto.plugins[ i ].push( [ option, set[ i ] ] );
        }
    },
    call: function( instance, name, args, allowDisconnected ) {
        var i,
            set = instance.plugins[ name ];

        if ( !set ) {
            return;
        }

        if ( !allowDisconnected && ( !instance.element[ 0 ].parentNode || instance.element[ 0 ].parentNode.nodeType === 11 ) ) {
            return;
        }

        for ( i = 0; i < set.length; i++ ) {
            if ( instance.options[ set[ i ][ 0 ] ] ) {
                set[ i ][ 1 ].apply( instance.element, args );
            }
        }
    }
};

})( jQuery );

(function( $, window, undefined ) {

    // Subtract the height of external toolbars from the page height, if the page does not have
    // internal toolbars of the same type. We take care to use the widget options if we find a
    // widget instance and the element's data-attributes otherwise.
    var compensateToolbars = function( page, desiredHeight ) {
        var pageParent = page.parent(),
            toolbarsAffectingHeight = [],

            // We use this function to filter fixed toolbars with option updatePagePadding set to
            // true (which is the default) from our height subtraction, because fixed toolbars with
            // option updatePagePadding set to true compensate for their presence by adding padding
            // to the active page. We want to avoid double-counting by also subtracting their
            // height from the desired page height.
            noPadders = function() {
                var theElement = $( this ),
                    widgetOptions = $.mobile.toolbar && theElement.data( "mobile-toolbar" ) ?
                        theElement.toolbar( "option" ) : {
                            position: theElement.attr( "data-" + $.mobile.ns + "position" ),
                            updatePagePadding: ( theElement.attr( "data-" + $.mobile.ns +
                                "update-page-padding" ) !== false )
                        };

                return !( widgetOptions.position === "fixed" &&
                    widgetOptions.updatePagePadding === true );
            },
            externalHeaders = pageParent.children( ":jqmData(role='header')" ).filter( noPadders ),
            internalHeaders = page.children( ":jqmData(role='header')" ),
            externalFooters = pageParent.children( ":jqmData(role='footer')" ).filter( noPadders ),
            internalFooters = page.children( ":jqmData(role='footer')" );

        // If we have no internal headers, but we do have external headers, then their height
        // reduces the page height
        if ( internalHeaders.length === 0 && externalHeaders.length > 0 ) {
            toolbarsAffectingHeight = toolbarsAffectingHeight.concat( externalHeaders.toArray() );
        }

        // If we have no internal footers, but we do have external footers, then their height
        // reduces the page height
        if ( internalFooters.length === 0 && externalFooters.length > 0 ) {
            toolbarsAffectingHeight = toolbarsAffectingHeight.concat( externalFooters.toArray() );
        }

        $.each( toolbarsAffectingHeight, function( index, value ) {
            desiredHeight -= $( value ).outerHeight();
        });

        // Height must be at least zero
        return Math.max( 0, desiredHeight );
    };

    $.extend( $.mobile, {
        // define the window and the document objects
        window: $( window ),
        document: $( document ),

        // TODO: Remove and use $.ui.keyCode directly
        keyCode: $.ui.keyCode,

        // Place to store various widget extensions
        behaviors: {},

        // Scroll page vertically: scroll to 0 to hide iOS address bar, or pass a Y value
        silentScroll: function( ypos ) {
            if ( $.type( ypos ) !== "number" ) {
                ypos = $.mobile.defaultHomeScroll;
            }

            // prevent scrollstart and scrollstop events
            $.event.special.scrollstart.enabled = false;

            setTimeout(function() {
                window.scrollTo( 0, ypos );
                $.mobile.document.trigger( "silentscroll", { x: 0, y: ypos });
            }, 20 );

            setTimeout(function() {
                $.event.special.scrollstart.enabled = true;
            }, 150 );
        },

        getClosestBaseUrl: function( ele )    {
            // Find the closest page and extract out its url.
            var url = $( ele ).closest( ".ui-page" ).jqmData( "url" ),
                base = $.mobile.path.documentBase.hrefNoHash;

            if ( !$.mobile.dynamicBaseEnabled || !url || !$.mobile.path.isPath( url ) ) {
                url = base;
            }

            return $.mobile.path.makeUrlAbsolute( url, base );
        },
        removeActiveLinkClass: function( forceRemoval ) {
            if ( !!$.mobile.activeClickedLink &&
                ( !$.mobile.activeClickedLink.closest( "." + $.mobile.activePageClass ).length ||
                    forceRemoval ) ) {

                $.mobile.activeClickedLink.removeClass( $.mobile.activeBtnClass );
            }
            $.mobile.activeClickedLink = null;
        },

        // DEPRECATED in 1.4
        // Find the closest parent with a theme class on it. Note that
        // we are not using $.fn.closest() on purpose here because this
        // method gets called quite a bit and we need it to be as fast
        // as possible.
        getInheritedTheme: function( el, defaultTheme ) {
            var e = el[ 0 ],
                ltr = "",
                re = /ui-(bar|body|overlay)-([a-z])\b/,
                c, m;
            while ( e ) {
                c = e.className || "";
                if ( c && ( m = re.exec( c ) ) && ( ltr = m[ 2 ] ) ) {
                    // We found a parent with a theme class
                    // on it so bail from this loop.
                    break;
                }

                e = e.parentNode;
            }
            // Return the theme letter we found, if none, return the
            // specified default.
            return ltr || defaultTheme || "a";
        },

        enhanceable: function( elements ) {
            return this.haveParents( elements, "enhance" );
        },

        hijackable: function( elements ) {
            return this.haveParents( elements, "ajax" );
        },

        haveParents: function( elements, attr ) {
            if ( !$.mobile.ignoreContentEnabled ) {
                return elements;
            }

            var count = elements.length,
                $newSet = $(),
                e, $element, excluded,
                i, c;

            for ( i = 0; i < count; i++ ) {
                $element = elements.eq( i );
                excluded = false;
                e = elements[ i ];

                while ( e ) {
                    c = e.getAttribute ? e.getAttribute( "data-" + $.mobile.ns + attr ) : "";

                    if ( c === "false" ) {
                        excluded = true;
                        break;
                    }

                    e = e.parentNode;
                }

                if ( !excluded ) {
                    $newSet = $newSet.add( $element );
                }
            }

            return $newSet;
        },

        getScreenHeight: function() {
            // Native innerHeight returns more accurate value for this across platforms,
            // jQuery version is here as a normalized fallback for platforms like Symbian
            return window.innerHeight || $.mobile.window.height();
        },

        //simply set the active page's minimum height to screen height, depending on orientation
        resetActivePageHeight: function( height ) {
            var page = $( "." + $.mobile.activePageClass ),
                pageHeight = page.height(),
                pageOuterHeight = page.outerHeight( true );

            height = compensateToolbars( page,
                ( typeof height === "number" ) ? height : $.mobile.getScreenHeight() );

            // Remove any previous min-height setting
            page.css( "min-height", "" );

            // Set the minimum height only if the height as determined by CSS is insufficient
            if ( page.height() < height ) {
                page.css( "min-height", height - ( pageOuterHeight - pageHeight ) );
            }
        },

        loading: function() {
            // If this is the first call to this function, instantiate a loader widget
            var loader = this.loading._widget || $( $.mobile.loader.prototype.defaultHtml ).loader(),

                // Call the appropriate method on the loader
                returnValue = loader.loader.apply( loader, arguments );

            // Make sure the loader is retained for future calls to this function.
            this.loading._widget = loader;

            return returnValue;
        }
    });

    $.addDependents = function( elem, newDependents ) {
        var $elem = $( elem ),
            dependents = $elem.jqmData( "dependents" ) || $();

        $elem.jqmData( "dependents", $( dependents ).add( newDependents ) );
    };

    // plugins
    $.fn.extend({
        removeWithDependents: function() {
            $.removeWithDependents( this );
        },

        // Enhance child elements
        enhanceWithin: function() {
            var index,
                widgetElements = {},
                keepNative = $.mobile.page.prototype.keepNativeSelector(),
                that = this;

            // Add no js class to elements
            if ( $.mobile.nojs ) {
                $.mobile.nojs( this );
            }

            // Bind links for ajax nav
            if ( $.mobile.links ) {
                $.mobile.links( this );
            }

            // Degrade inputs for styleing
            if ( $.mobile.degradeInputsWithin ) {
                $.mobile.degradeInputsWithin( this );
            }

            // Run buttonmarkup
            if ( $.fn.buttonMarkup ) {
                this.find( $.fn.buttonMarkup.initSelector ).not( keepNative )
                .jqmEnhanceable().buttonMarkup();
            }

            // Add classes for fieldContain
            if ( $.fn.fieldcontain ) {
                this.find( ":jqmData(role='fieldcontain')" ).not( keepNative )
                .jqmEnhanceable().fieldcontain();
            }

            // Enhance widgets
            $.each( $.mobile.widgets, function( name, constructor ) {

                // If initSelector not false find elements
                if ( constructor.initSelector ) {

                    // Filter elements that should not be enhanced based on parents
                    var elements = $.mobile.enhanceable( that.find( constructor.initSelector ) );

                    // If any matching elements remain filter ones with keepNativeSelector
                    if ( elements.length > 0 ) {

                        // $.mobile.page.prototype.keepNativeSelector is deprecated this is just for backcompat
                        // Switch to $.mobile.keepNative in 1.5 which is just a value not a function
                        elements = elements.not( keepNative );
                    }

                    // Enhance whatever is left
                    if ( elements.length > 0 ) {
                        widgetElements[ constructor.prototype.widgetName ] = elements;
                    }
                }
            });

            for ( index in widgetElements ) {
                widgetElements[ index ][ index ]();
            }

            return this;
        },

        addDependents: function( newDependents ) {
            $.addDependents( this, newDependents );
        },

        // note that this helper doesn't attempt to handle the callback
        // or setting of an html element's text, its only purpose is
        // to return the html encoded version of the text in all cases. (thus the name)
        getEncodedText: function() {
            return $( "<a>" ).text( this.text() ).html();
        },

        // fluent helper function for the mobile namespaced equivalent
        jqmEnhanceable: function() {
            return $.mobile.enhanceable( this );
        },

        jqmHijackable: function() {
            return $.mobile.hijackable( this );
        }
    });

    $.removeWithDependents = function( nativeElement ) {
        var element = $( nativeElement );

        ( element.jqmData( "dependents" ) || $() ).remove();
        element.remove();
    };
    $.addDependents = function( nativeElement, newDependents ) {
        var element = $( nativeElement ),
            dependents = element.jqmData( "dependents" ) || $();

        element.jqmData( "dependents", $( dependents ).add( newDependents ) );
    };

    $.find.matches = function( expr, set ) {
        return $.find( expr, null, null, set );
    };

    $.find.matchesSelector = function( node, expr ) {
        return $.find( expr, null, null, [ node ] ).length > 0;
    };

})( jQuery, this );

(function( $, window, undefined ) {
    $.extend( $.mobile, {

        // Version of the jQuery Mobile Framework
        version: "1.4.5",

        // Deprecated and no longer used in 1.4 remove in 1.5
        // Define the url parameter used for referencing widget-generated sub-pages.
        // Translates to example.html&ui-page=subpageIdentifier
        // hash segment before &ui-page= is used to make Ajax request
        subPageUrlKey: "ui-page",

        hideUrlBar: true,

        // Keepnative Selector
        keepNative: ":jqmData(role='none'), :jqmData(role='nojs')",

        // Deprecated in 1.4 remove in 1.5
        // Class assigned to page currently in view, and during transitions
        activePageClass: "ui-page-active",

        // Deprecated in 1.4 remove in 1.5
        // Class used for "active" button state, from CSS framework
        activeBtnClass: "ui-btn-active",

        // Deprecated in 1.4 remove in 1.5
        // Class used for "focus" form element state, from CSS framework
        focusClass: "ui-focus",

        // Automatically handle clicks and form submissions through Ajax, when same-domain
        ajaxEnabled: true,

        // Automatically load and show pages based on location.hash
        hashListeningEnabled: true,

        // disable to prevent jquery from bothering with links
        linkBindingEnabled: true,

        // Set default page transition - 'none' for no transitions
        defaultPageTransition: "fade",

        // Set maximum window width for transitions to apply - 'false' for no limit
        maxTransitionWidth: false,

        // Minimum scroll distance that will be remembered when returning to a page
        // Deprecated remove in 1.5
        minScrollBack: 0,

        // Set default dialog transition - 'none' for no transitions
        defaultDialogTransition: "pop",

        // Error response message - appears when an Ajax page request fails
        pageLoadErrorMessage: "Error Loading Page",

        // For error messages, which theme does the box use?
        pageLoadErrorMessageTheme: "a",

        // replace calls to window.history.back with phonegaps navigation helper
        // where it is provided on the window object
        phonegapNavigationEnabled: false,

        //automatically initialize the DOM when it's ready
        autoInitializePage: true,

        pushStateEnabled: true,

        // allows users to opt in to ignoring content by marking a parent element as
        // data-ignored
        ignoreContentEnabled: false,

        buttonMarkup: {
            hoverDelay: 200
        },

        // disable the alteration of the dynamic base tag or links in the case
        // that a dynamic base tag isn't supported
        dynamicBaseEnabled: true,

        // default the property to remove dependency on assignment in init module
        pageContainer: $(),

        //enable cross-domain page support
        allowCrossDomainPages: false,

        dialogHashKey: "&ui-state=dialog"
    });
})( jQuery, this );

/*!
 * jQuery UI Widget c0ab71056b936627e8a7821f03c044aec6280a40
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/jQuery.widget/
 */
(function( $, undefined ) {

var uuid = 0,
    slice = Array.prototype.slice,
    _cleanData = $.cleanData;
$.cleanData = function( elems ) {
    for ( var i = 0, elem; (elem = elems[i]) != null; i++ ) {
        try {
            $( elem ).triggerHandler( "remove" );
        // http://bugs.jquery.com/ticket/8235
        } catch( e ) {}
    }
    _cleanData( elems );
};

$.widget = function( name, base, prototype ) {
    var fullName, existingConstructor, constructor, basePrototype,
        // proxiedPrototype allows the provided prototype to remain unmodified
        // so that it can be used as a mixin for multiple widgets (#8876)
        proxiedPrototype = {},
        namespace = name.split( "." )[ 0 ];

    name = name.split( "." )[ 1 ];
    fullName = namespace + "-" + name;

    if ( !prototype ) {
        prototype = base;
        base = $.Widget;
    }

    // create selector for plugin
    $.expr[ ":" ][ fullName.toLowerCase() ] = function( elem ) {
        return !!$.data( elem, fullName );
    };

    $[ namespace ] = $[ namespace ] || {};
    existingConstructor = $[ namespace ][ name ];
    constructor = $[ namespace ][ name ] = function( options, element ) {
        // allow instantiation without "new" keyword
        if ( !this._createWidget ) {
            return new constructor( options, element );
        }

        // allow instantiation without initializing for simple inheritance
        // must use "new" keyword (the code above always passes args)
        if ( arguments.length ) {
            this._createWidget( options, element );
        }
    };
    // extend with the existing constructor to carry over any static properties
    $.extend( constructor, existingConstructor, {
        version: prototype.version,
        // copy the object used to create the prototype in case we need to
        // redefine the widget later
        _proto: $.extend( {}, prototype ),
        // track widgets that inherit from this widget in case this widget is
        // redefined after a widget inherits from it
        _childConstructors: []
    });

    basePrototype = new base();
    // we need to make the options hash a property directly on the new instance
    // otherwise we'll modify the options hash on the prototype that we're
    // inheriting from
    basePrototype.options = $.widget.extend( {}, basePrototype.options );
    $.each( prototype, function( prop, value ) {
        if ( !$.isFunction( value ) ) {
            proxiedPrototype[ prop ] = value;
            return;
        }
        proxiedPrototype[ prop ] = (function() {
            var _super = function() {
                    return base.prototype[ prop ].apply( this, arguments );
                },
                _superApply = function( args ) {
                    return base.prototype[ prop ].apply( this, args );
                };
            return function() {
                var __super = this._super,
                    __superApply = this._superApply,
                    returnValue;

                this._super = _super;
                this._superApply = _superApply;

                returnValue = value.apply( this, arguments );

                this._super = __super;
                this._superApply = __superApply;

                return returnValue;
            };
        })();
    });
    constructor.prototype = $.widget.extend( basePrototype, {
        // TODO: remove support for widgetEventPrefix
        // always use the name + a colon as the prefix, e.g., draggable:start
        // don't prefix for widgets that aren't DOM-based
        widgetEventPrefix: existingConstructor ? (basePrototype.widgetEventPrefix || name) : name
    }, proxiedPrototype, {
        constructor: constructor,
        namespace: namespace,
        widgetName: name,
        widgetFullName: fullName
    });

    // If this widget is being redefined then we need to find all widgets that
    // are inheriting from it and redefine all of them so that they inherit from
    // the new version of this widget. We're essentially trying to replace one
    // level in the prototype chain.
    if ( existingConstructor ) {
        $.each( existingConstructor._childConstructors, function( i, child ) {
            var childPrototype = child.prototype;

            // redefine the child widget using the same prototype that was
            // originally used, but inherit from the new version of the base
            $.widget( childPrototype.namespace + "." + childPrototype.widgetName, constructor, child._proto );
        });
        // remove the list of existing child constructors from the old constructor
        // so the old child constructors can be garbage collected
        delete existingConstructor._childConstructors;
    } else {
        base._childConstructors.push( constructor );
    }

    $.widget.bridge( name, constructor );

    return constructor;
};

$.widget.extend = function( target ) {
    var input = slice.call( arguments, 1 ),
        inputIndex = 0,
        inputLength = input.length,
        key,
        value;
    for ( ; inputIndex < inputLength; inputIndex++ ) {
        for ( key in input[ inputIndex ] ) {
            value = input[ inputIndex ][ key ];
            if ( input[ inputIndex ].hasOwnProperty( key ) && value !== undefined ) {
                // Clone objects
                if ( $.isPlainObject( value ) ) {
                    target[ key ] = $.isPlainObject( target[ key ] ) ?
                        $.widget.extend( {}, target[ key ], value ) :
                        // Don't extend strings, arrays, etc. with objects
                        $.widget.extend( {}, value );
                // Copy everything else by reference
                } else {
                    target[ key ] = value;
                }
            }
        }
    }
    return target;
};

$.widget.bridge = function( name, object ) {
    var fullName = object.prototype.widgetFullName || name;
    $.fn[ name ] = function( options ) {
        var isMethodCall = typeof options === "string",
            args = slice.call( arguments, 1 ),
            returnValue = this;

        // allow multiple hashes to be passed on init
        options = !isMethodCall && args.length ?
            $.widget.extend.apply( null, [ options ].concat(args) ) :
            options;

        if ( isMethodCall ) {
            this.each(function() {
                var methodValue,
                    instance = $.data( this, fullName );
                if ( options === "instance" ) {
                    returnValue = instance;
                    return false;
                }
                if ( !instance ) {
                    return $.error( "cannot call methods on " + name + " prior to initialization; " +
                        "attempted to call method '" + options + "'" );
                }
                if ( !$.isFunction( instance[options] ) || options.charAt( 0 ) === "_" ) {
                    return $.error( "no such method '" + options + "' for " + name + " widget instance" );
                }
                methodValue = instance[ options ].apply( instance, args );
                if ( methodValue !== instance && methodValue !== undefined ) {
                    returnValue = methodValue && methodValue.jquery ?
                        returnValue.pushStack( methodValue.get() ) :
                        methodValue;
                    return false;
                }
            });
        } else {
            this.each(function() {
                var instance = $.data( this, fullName );
                if ( instance ) {
                    instance.option( options || {} )._init();
                } else {
                    $.data( this, fullName, new object( options, this ) );
                }
            });
        }

        return returnValue;
    };
};

$.Widget = function( /* options, element */ ) {};
$.Widget._childConstructors = [];

$.Widget.prototype = {
    widgetName: "widget",
    widgetEventPrefix: "",
    defaultElement: "<div>",
    options: {
        disabled: false,

        // callbacks
        create: null
    },
    _createWidget: function( options, element ) {
        element = $( element || this.defaultElement || this )[ 0 ];
        this.element = $( element );
        this.uuid = uuid++;
        this.eventNamespace = "." + this.widgetName + this.uuid;
        this.options = $.widget.extend( {},
            this.options,
            this._getCreateOptions(),
            options );

        this.bindings = $();
        this.hoverable = $();
        this.focusable = $();

        if ( element !== this ) {
            $.data( element, this.widgetFullName, this );
            this._on( true, this.element, {
                remove: function( event ) {
                    if ( event.target === element ) {
                        this.destroy();
                    }
                }
            });
            this.document = $( element.style ?
                // element within the document
                element.ownerDocument :
                // element is window or document
                element.document || element );
            this.window = $( this.document[0].defaultView || this.document[0].parentWindow );
        }

        this._create();
        this._trigger( "create", null, this._getCreateEventData() );
        this._init();
    },
    _getCreateOptions: $.noop,
    _getCreateEventData: $.noop,
    _create: $.noop,
    _init: $.noop,

    destroy: function() {
        this._destroy();
        // we can probably remove the unbind calls in 2.0
        // all event bindings should go through this._on()
        this.element
            .unbind( this.eventNamespace )
            .removeData( this.widgetFullName )
            // support: jquery <1.6.3
            // http://bugs.jquery.com/ticket/9413
            .removeData( $.camelCase( this.widgetFullName ) );
        this.widget()
            .unbind( this.eventNamespace )
            .removeAttr( "aria-disabled" )
            .removeClass(
                this.widgetFullName + "-disabled " +
                "ui-state-disabled" );

        // clean up events and states
        this.bindings.unbind( this.eventNamespace );
        this.hoverable.removeClass( "ui-state-hover" );
        this.focusable.removeClass( "ui-state-focus" );
    },
    _destroy: $.noop,

    widget: function() {
        return this.element;
    },

    option: function( key, value ) {
        var options = key,
            parts,
            curOption,
            i;

        if ( arguments.length === 0 ) {
            // don't return a reference to the internal hash
            return $.widget.extend( {}, this.options );
        }

        if ( typeof key === "string" ) {
            // handle nested keys, e.g., "foo.bar" => { foo: { bar: ___ } }
            options = {};
            parts = key.split( "." );
            key = parts.shift();
            if ( parts.length ) {
                curOption = options[ key ] = $.widget.extend( {}, this.options[ key ] );
                for ( i = 0; i < parts.length - 1; i++ ) {
                    curOption[ parts[ i ] ] = curOption[ parts[ i ] ] || {};
                    curOption = curOption[ parts[ i ] ];
                }
                key = parts.pop();
                if ( value === undefined ) {
                    return curOption[ key ] === undefined ? null : curOption[ key ];
                }
                curOption[ key ] = value;
            } else {
                if ( value === undefined ) {
                    return this.options[ key ] === undefined ? null : this.options[ key ];
                }
                options[ key ] = value;
            }
        }

        this._setOptions( options );

        return this;
    },
    _setOptions: function( options ) {
        var key;

        for ( key in options ) {
            this._setOption( key, options[ key ] );
        }

        return this;
    },
    _setOption: function( key, value ) {
        this.options[ key ] = value;

        if ( key === "disabled" ) {
            this.widget()
                .toggleClass( this.widgetFullName + "-disabled", !!value );
            this.hoverable.removeClass( "ui-state-hover" );
            this.focusable.removeClass( "ui-state-focus" );
        }

        return this;
    },

    enable: function() {
        return this._setOptions({ disabled: false });
    },
    disable: function() {
        return this._setOptions({ disabled: true });
    },

    _on: function( suppressDisabledCheck, element, handlers ) {
        var delegateElement,
            instance = this;

        // no suppressDisabledCheck flag, shuffle arguments
        if ( typeof suppressDisabledCheck !== "boolean" ) {
            handlers = element;
            element = suppressDisabledCheck;
            suppressDisabledCheck = false;
        }

        // no element argument, shuffle and use this.element
        if ( !handlers ) {
            handlers = element;
            element = this.element;
            delegateElement = this.widget();
        } else {
            // accept selectors, DOM elements
            element = delegateElement = $( element );
            this.bindings = this.bindings.add( element );
        }

        $.each( handlers, function( event, handler ) {
            function handlerProxy() {
                // allow widgets to customize the disabled handling
                // - disabled as an array instead of boolean
                // - disabled class as method for disabling individual parts
                if ( !suppressDisabledCheck &&
                        ( instance.options.disabled === true ||
                            $( this ).hasClass( "ui-state-disabled" ) ) ) {
                    return;
                }
                return ( typeof handler === "string" ? instance[ handler ] : handler )
                    .apply( instance, arguments );
            }

            // copy the guid so direct unbinding works
            if ( typeof handler !== "string" ) {
                handlerProxy.guid = handler.guid =
                    handler.guid || handlerProxy.guid || $.guid++;
            }

            var match = event.match( /^(\w+)\s*(.*)$/ ),
                eventName = match[1] + instance.eventNamespace,
                selector = match[2];
            if ( selector ) {
                delegateElement.delegate( selector, eventName, handlerProxy );
            } else {
                element.bind( eventName, handlerProxy );
            }
        });
    },

    _off: function( element, eventName ) {
        eventName = (eventName || "").split( " " ).join( this.eventNamespace + " " ) + this.eventNamespace;
        element.unbind( eventName ).undelegate( eventName );
    },

    _delay: function( handler, delay ) {
        function handlerProxy() {
            return ( typeof handler === "string" ? instance[ handler ] : handler )
                .apply( instance, arguments );
        }
        var instance = this;
        return setTimeout( handlerProxy, delay || 0 );
    },

    _hoverable: function( element ) {
        this.hoverable = this.hoverable.add( element );
        this._on( element, {
            mouseenter: function( event ) {
                $( event.currentTarget ).addClass( "ui-state-hover" );
            },
            mouseleave: function( event ) {
                $( event.currentTarget ).removeClass( "ui-state-hover" );
            }
        });
    },

    _focusable: function( element ) {
        this.focusable = this.focusable.add( element );
        this._on( element, {
            focusin: function( event ) {
                $( event.currentTarget ).addClass( "ui-state-focus" );
            },
            focusout: function( event ) {
                $( event.currentTarget ).removeClass( "ui-state-focus" );
            }
        });
    },

    _trigger: function( type, event, data ) {
        var prop, orig,
            callback = this.options[ type ];

        data = data || {};
        event = $.Event( event );
        event.type = ( type === this.widgetEventPrefix ?
            type :
            this.widgetEventPrefix + type ).toLowerCase();
        // the original event may come from any element
        // so we need to reset the target on the new event
        event.target = this.element[ 0 ];

        // copy original event properties over to the new event
        orig = event.originalEvent;
        if ( orig ) {
            for ( prop in orig ) {
                if ( !( prop in event ) ) {
                    event[ prop ] = orig[ prop ];
                }
            }
        }

        this.element.trigger( event, data );
        return !( $.isFunction( callback ) &&
            callback.apply( this.element[0], [ event ].concat( data ) ) === false ||
            event.isDefaultPrevented() );
    }
};

$.each( { show: "fadeIn", hide: "fadeOut" }, function( method, defaultEffect ) {
    $.Widget.prototype[ "_" + method ] = function( element, options, callback ) {
        if ( typeof options === "string" ) {
            options = { effect: options };
        }
        var hasOptions,
            effectName = !options ?
                method :
                options === true || typeof options === "number" ?
                    defaultEffect :
                    options.effect || defaultEffect;
        options = options || {};
        if ( typeof options === "number" ) {
            options = { duration: options };
        }
        hasOptions = !$.isEmptyObject( options );
        options.complete = callback;
        if ( options.delay ) {
            element.delay( options.delay );
        }
        if ( hasOptions && $.effects && $.effects.effect[ effectName ] ) {
            element[ method ]( options );
        } else if ( effectName !== method && element[ effectName ] ) {
            element[ effectName ]( options.duration, options.easing, callback );
        } else {
            element.queue(function( next ) {
                $( this )[ method ]();
                if ( callback ) {
                    callback.call( element[ 0 ] );
                }
                next();
            });
        }
    };
});

})( jQuery );

(function( $, window, undefined ) {
    var nsNormalizeDict = {},
        oldFind = $.find,
        rbrace = /(?:\{[\s\S]*\}|\[[\s\S]*\])$/,
        jqmDataRE = /:jqmData\(([^)]*)\)/g;

    $.extend( $.mobile, {

        // Namespace used framework-wide for data-attrs. Default is no namespace

        ns: "",

        // Retrieve an attribute from an element and perform some massaging of the value

        getAttribute: function( element, key ) {
            var data;

            element = element.jquery ? element[0] : element;

            if ( element && element.getAttribute ) {
                data = element.getAttribute( "data-" + $.mobile.ns + key );
            }

            // Copied from core's src/data.js:dataAttr()
            // Convert from a string to a proper data type
            try {
                data = data === "true" ? true :
                    data === "false" ? false :
                    data === "null" ? null :
                    // Only convert to a number if it doesn't change the string
                    +data + "" === data ? +data :
                    rbrace.test( data ) ? JSON.parse( data ) :
                    data;
            } catch( err ) {}

            return data;
        },

        // Expose our cache for testing purposes.
        nsNormalizeDict: nsNormalizeDict,

        // Take a data attribute property, prepend the namespace
        // and then camel case the attribute string. Add the result
        // to our nsNormalizeDict so we don't have to do this again.
        nsNormalize: function( prop ) {
            return nsNormalizeDict[ prop ] ||
                ( nsNormalizeDict[ prop ] = $.camelCase( $.mobile.ns + prop ) );
        },

        // Find the closest javascript page element to gather settings data jsperf test
        // http://jsperf.com/single-complex-selector-vs-many-complex-selectors/edit
        // possibly naive, but it shows that the parsing overhead for *just* the page selector vs
        // the page and dialog selector is negligable. This could probably be speed up by
        // doing a similar parent node traversal to the one found in the inherited theme code above
        closestPageData: function( $target ) {
            return $target
                .closest( ":jqmData(role='page'), :jqmData(role='dialog')" )
                .data( "mobile-page" );
        }

    });

    // Mobile version of data and removeData and hasData methods
    // ensures all data is set and retrieved using jQuery Mobile's data namespace
    $.fn.jqmData = function( prop, value ) {
        var result;
        if ( typeof prop !== "undefined" ) {
            if ( prop ) {
                prop = $.mobile.nsNormalize( prop );
            }

            // undefined is permitted as an explicit input for the second param
            // in this case it returns the value and does not set it to undefined
            if ( arguments.length < 2 || value === undefined ) {
                result = this.data( prop );
            } else {
                result = this.data( prop, value );
            }
        }
        return result;
    };

    $.jqmData = function( elem, prop, value ) {
        var result;
        if ( typeof prop !== "undefined" ) {
            result = $.data( elem, prop ? $.mobile.nsNormalize( prop ) : prop, value );
        }
        return result;
    };

    $.fn.jqmRemoveData = function( prop ) {
        return this.removeData( $.mobile.nsNormalize( prop ) );
    };

    $.jqmRemoveData = function( elem, prop ) {
        return $.removeData( elem, $.mobile.nsNormalize( prop ) );
    };

    $.find = function( selector, context, ret, extra ) {
        if ( selector.indexOf( ":jqmData" ) > -1 ) {
            selector = selector.replace( jqmDataRE, "[data-" + ( $.mobile.ns || "" ) + "$1]" );
        }

        return oldFind.call( this, selector, context, ret, extra );
    };

    $.extend( $.find, oldFind );

})( jQuery, this );

(function( $, undefined ) {

var rcapitals = /[A-Z]/g,
    replaceFunction = function( c ) {
        return "-" + c.toLowerCase();
    };

$.extend( $.Widget.prototype, {
    _getCreateOptions: function() {
        var option, value,
            elem = this.element[ 0 ],
            options = {};

        //
        if ( !$.mobile.getAttribute( elem, "defaults" ) ) {
            for ( option in this.options ) {
                value = $.mobile.getAttribute( elem, option.replace( rcapitals, replaceFunction ) );

                if ( value != null ) {
                    options[ option ] = value;
                }
            }
        }

        return options;
    }
});

//TODO: Remove in 1.5 for backcompat only
$.mobile.widget = $.Widget;

})( jQuery );


(function( $ ) {
    // TODO move loader class down into the widget settings
    var loaderClass = "ui-loader", $html = $( "html" );

    $.widget( "mobile.loader", {
        // NOTE if the global config settings are defined they will override these
        //      options
        options: {
            // the theme for the loading message
            theme: "a",

            // whether the text in the loading message is shown
            textVisible: false,

            // custom html for the inner content of the loading message
            html: "",

            // the text to be displayed when the popup is shown
            text: "loading"
        },

        defaultHtml: "<div class='" + loaderClass + "'>" +
            "<span class='ui-icon-loading'></span>" +
            "<h1></h1>" +
            "</div>",

        // For non-fixed supportin browsers. Position at y center (if scrollTop supported), above the activeBtn (if defined), or just 100px from top
        fakeFixLoader: function() {
            var activeBtn = $( "." + $.mobile.activeBtnClass ).first();

            this.element
                .css({
                    top: $.support.scrollTop && this.window.scrollTop() + this.window.height() / 2 ||
                        activeBtn.length && activeBtn.offset().top || 100
                });
        },

        // check position of loader to see if it appears to be "fixed" to center
        // if not, use abs positioning
        checkLoaderPosition: function() {
            var offset = this.element.offset(),
                scrollTop = this.window.scrollTop(),
                screenHeight = $.mobile.getScreenHeight();

            if ( offset.top < scrollTop || ( offset.top - scrollTop ) > screenHeight ) {
                this.element.addClass( "ui-loader-fakefix" );
                this.fakeFixLoader();
                this.window
                    .unbind( "scroll", this.checkLoaderPosition )
                    .bind( "scroll", $.proxy( this.fakeFixLoader, this ) );
            }
        },

        resetHtml: function() {
            this.element.html( $( this.defaultHtml ).html() );
        },

        // Turn on/off page loading message. Theme doubles as an object argument
        // with the following shape: { theme: '', text: '', html: '', textVisible: '' }
        // NOTE that the $.mobile.loading* settings and params past the first are deprecated
        // TODO sweet jesus we need to break some of this out
        show: function( theme, msgText, textonly ) {
            var textVisible, message, loadSettings;

            this.resetHtml();

            // use the prototype options so that people can set them globally at
            // mobile init. Consistency, it's what's for dinner
            if ( $.type( theme ) === "object" ) {
                loadSettings = $.extend( {}, this.options, theme );

                theme = loadSettings.theme;
            } else {
                loadSettings = this.options;

                // here we prefer the theme value passed as a string argument, then
                // we prefer the global option because we can't use undefined default
                // prototype options, then the prototype option
                theme = theme || loadSettings.theme;
            }

            // set the message text, prefer the param, then the settings object
            // then loading message
            message = msgText || ( loadSettings.text === false ? "" : loadSettings.text );

            // prepare the dom
            $html.addClass( "ui-loading" );

            textVisible = loadSettings.textVisible;

            // add the proper css given the options (theme, text, etc)
            // Force text visibility if the second argument was supplied, or
            // if the text was explicitly set in the object args
            this.element.attr("class", loaderClass +
                " ui-corner-all ui-body-" + theme +
                " ui-loader-" + ( textVisible || msgText || theme.text ? "verbose" : "default" ) +
                ( loadSettings.textonly || textonly ? " ui-loader-textonly" : "" ) );

            // TODO verify that jquery.fn.html is ok to use in both cases here
            //      this might be overly defensive in preventing unknowing xss
            // if the html attribute is defined on the loading settings, use that
            // otherwise use the fallbacks from above
            if ( loadSettings.html ) {
                this.element.html( loadSettings.html );
            } else {
                this.element.find( "h1" ).text( message );
            }

            // If the pagecontainer widget has been defined we may use the :mobile-pagecontainer
            // and attach to the element on which the pagecontainer widget has been defined. If not,
            // we attach to the body.
            this.element.appendTo( $.mobile.pagecontainer ?
                $( ":mobile-pagecontainer" ) : $( "body" ) );

            // check that the loader is visible
            this.checkLoaderPosition();

            // on scroll check the loader position
            this.window.bind( "scroll", $.proxy( this.checkLoaderPosition, this ) );
        },

        hide: function() {
            $html.removeClass( "ui-loading" );

            if ( this.options.text ) {
                this.element.removeClass( "ui-loader-fakefix" );
            }

            this.window.unbind( "scroll", this.fakeFixLoader );
            this.window.unbind( "scroll", this.checkLoaderPosition );
        }
    });

})(jQuery, this);


/*!
 * jQuery hashchange event - v1.3 - 7/21/2010
 * http://benalman.com/projects/jquery-hashchange-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */

// Script: jQuery hashchange event
//
// *Version: 1.3, Last updated: 7/21/2010*
// 
// Project Home - http://benalman.com/projects/jquery-hashchange-plugin/
// GitHub       - http://github.com/cowboy/jquery-hashchange/
// Source       - http://github.com/cowboy/jquery-hashchange/raw/master/jquery.ba-hashchange.js
// (Minified)   - http://github.com/cowboy/jquery-hashchange/raw/master/jquery.ba-hashchange.min.js (0.8kb gzipped)
// 
// About: License
// 
// Copyright (c) 2010 "Cowboy" Ben Alman,
// Dual licensed under the MIT and GPL licenses.
// http://benalman.com/about/license/
// 
// About: Examples
// 
// These working examples, complete with fully commented code, illustrate a few
// ways in which this plugin can be used.
// 
// hashchange event - http://benalman.com/code/projects/jquery-hashchange/examples/hashchange/
// document.domain - http://benalman.com/code/projects/jquery-hashchange/examples/document_domain/
// 
// About: Support and Testing
// 
// Information about what version or versions of jQuery this plugin has been
// tested with, what browsers it has been tested in, and where the unit tests
// reside (so you can test it yourself).
// 
// jQuery Versions - 1.2.6, 1.3.2, 1.4.1, 1.4.2
// Browsers Tested - Internet Explorer 6-8, Firefox 2-4, Chrome 5-6, Safari 3.2-5,
//                   Opera 9.6-10.60, iPhone 3.1, Android 1.6-2.2, BlackBerry 4.6-5.
// Unit Tests      - http://benalman.com/code/projects/jquery-hashchange/unit/
// 
// About: Known issues
// 
// While this jQuery hashchange event implementation is quite stable and
// robust, there are a few unfortunate browser bugs surrounding expected
// hashchange event-based behaviors, independent of any JavaScript
// window.onhashchange abstraction. See the following examples for more
// information:
// 
// Chrome: Back Button - http://benalman.com/code/projects/jquery-hashchange/examples/bug-chrome-back-button/
// Firefox: Remote XMLHttpRequest - http://benalman.com/code/projects/jquery-hashchange/examples/bug-firefox-remote-xhr/
// WebKit: Back Button in an Iframe - http://benalman.com/code/projects/jquery-hashchange/examples/bug-webkit-hash-iframe/
// Safari: Back Button from a different domain - http://benalman.com/code/projects/jquery-hashchange/examples/bug-safari-back-from-diff-domain/
// 
// Also note that should a browser natively support the window.onhashchange 
// event, but not report that it does, the fallback polling loop will be used.
// 
// About: Release History
// 
// 1.3   - (7/21/2010) Reorganized IE6/7 Iframe code to make it more
//         "removable" for mobile-only development. Added IE6/7 document.title
//         support. Attempted to make Iframe as hidden as possible by using
//         techniques from http://www.paciellogroup.com/blog/?p=604. Added 
//         support for the "shortcut" format $(window).hashchange( fn ) and
//         $(window).hashchange() like jQuery provides for built-in events.
//         Renamed jQuery.hashchangeDelay to <jQuery.fn.hashchange.delay> and
//         lowered its default value to 50. Added <jQuery.fn.hashchange.domain>
//         and <jQuery.fn.hashchange.src> properties plus document-domain.html
//         file to address access denied issues when setting document.domain in
//         IE6/7.
// 1.2   - (2/11/2010) Fixed a bug where coming back to a page using this plugin
//         from a page on another domain would cause an error in Safari 4. Also,
//         IE6/7 Iframe is now inserted after the body (this actually works),
//         which prevents the page from scrolling when the event is first bound.
//         Event can also now be bound before DOM ready, but it won't be usable
//         before then in IE6/7.
// 1.1   - (1/21/2010) Incorporated document.documentMode test to fix IE8 bug
//         where browser version is incorrectly reported as 8.0, despite
//         inclusion of the X-UA-Compatible IE=EmulateIE7 meta tag.
// 1.0   - (1/9/2010) Initial Release. Broke out the jQuery BBQ event.special
//         window.onhashchange functionality into a separate plugin for users
//         who want just the basic event & back button support, without all the
//         extra awesomeness that BBQ provides. This plugin will be included as
//         part of jQuery BBQ, but also be available separately.

(function($,window,undefined){
  '$:nomunge'; // Used by YUI compressor.
  
  // Reused string.
  var str_hashchange = 'hashchange',
    
    // Method / object references.
    doc = document,
    fake_onhashchange,
    special = $.event.special,
    
    // Does the browser support window.onhashchange? Note that IE8 running in
    // IE7 compatibility mode reports true for 'onhashchange' in window, even
    // though the event isn't supported, so also test document.documentMode.
    doc_mode = doc.documentMode,
    supports_onhashchange = 'on' + str_hashchange in window && ( doc_mode === undefined || doc_mode > 7 );
  
  // Get location.hash (or what you'd expect location.hash to be) sans any
  // leading #. Thanks for making this necessary, Firefox!
  function get_fragment( url ) {
    url = url || location.href;
    return '#' + url.replace( /^[^#]*#?(.*)$/, '$1' );
  };
  
  // Method: jQuery.fn.hashchange
  // 
  // Bind a handler to the window.onhashchange event or trigger all bound
  // window.onhashchange event handlers. This behavior is consistent with
  // jQuery's built-in event handlers.
  // 
  // Usage:
  // 
  // > jQuery(window).hashchange( [ handler ] );
  // 
  // Arguments:
  // 
  //  handler - (Function) Optional handler to be bound to the hashchange
  //    event. This is a "shortcut" for the more verbose form:
  //    jQuery(window).bind( 'hashchange', handler ). If handler is omitted,
  //    all bound window.onhashchange event handlers will be triggered. This
  //    is a shortcut for the more verbose
  //    jQuery(window).trigger( 'hashchange' ). These forms are described in
  //    the <hashchange event> section.
  // 
  // Returns:
  // 
  //  (jQuery) The initial jQuery collection of elements.
  
  // Allow the "shortcut" format $(elem).hashchange( fn ) for binding and
  // $(elem).hashchange() for triggering, like jQuery does for built-in events.
  $.fn[ str_hashchange ] = function( fn ) {
    return fn ? this.bind( str_hashchange, fn ) : this.trigger( str_hashchange );
  };
  
  // Property: jQuery.fn.hashchange.delay
  // 
  // The numeric interval (in milliseconds) at which the <hashchange event>
  // polling loop executes. Defaults to 50.
  
  // Property: jQuery.fn.hashchange.domain
  // 
  // If you're setting document.domain in your JavaScript, and you want hash
  // history to work in IE6/7, not only must this property be set, but you must
  // also set document.domain BEFORE jQuery is loaded into the page. This
  // property is only applicable if you are supporting IE6/7 (or IE8 operating
  // in "IE7 compatibility" mode).
  // 
  // In addition, the <jQuery.fn.hashchange.src> property must be set to the
  // path of the included "document-domain.html" file, which can be renamed or
  // modified if necessary (note that the document.domain specified must be the
  // same in both your main JavaScript as well as in this file).
  // 
  // Usage:
  // 
  // jQuery.fn.hashchange.domain = document.domain;
  
  // Property: jQuery.fn.hashchange.src
  // 
  // If, for some reason, you need to specify an Iframe src file (for example,
  // when setting document.domain as in <jQuery.fn.hashchange.domain>), you can
  // do so using this property. Note that when using this property, history
  // won't be recorded in IE6/7 until the Iframe src file loads. This property
  // is only applicable if you are supporting IE6/7 (or IE8 operating in "IE7
  // compatibility" mode).
  // 
  // Usage:
  // 
  // jQuery.fn.hashchange.src = 'path/to/file.html';
  
  $.fn[ str_hashchange ].delay = 50;
  /*
  $.fn[ str_hashchange ].domain = null;
  $.fn[ str_hashchange ].src = null;
  */
  
  // Event: hashchange event
  // 
  // Fired when location.hash changes. In browsers that support it, the native
  // HTML5 window.onhashchange event is used, otherwise a polling loop is
  // initialized, running every <jQuery.fn.hashchange.delay> milliseconds to
  // see if the hash has changed. In IE6/7 (and IE8 operating in "IE7
  // compatibility" mode), a hidden Iframe is created to allow the back button
  // and hash-based history to work.
  // 
  // Usage as described in <jQuery.fn.hashchange>:
  // 
  // > // Bind an event handler.
  // > jQuery(window).hashchange( function(e) {
  // >   var hash = location.hash;
  // >   ...
  // > });
  // > 
  // > // Manually trigger the event handler.
  // > jQuery(window).hashchange();
  // 
  // A more verbose usage that allows for event namespacing:
  // 
  // > // Bind an event handler.
  // > jQuery(window).bind( 'hashchange', function(e) {
  // >   var hash = location.hash;
  // >   ...
  // > });
  // > 
  // > // Manually trigger the event handler.
  // > jQuery(window).trigger( 'hashchange' );
  // 
  // Additional Notes:
  // 
  // * The polling loop and Iframe are not created until at least one handler
  //   is actually bound to the 'hashchange' event.
  // * If you need the bound handler(s) to execute immediately, in cases where
  //   a location.hash exists on page load, via bookmark or page refresh for
  //   example, use jQuery(window).hashchange() or the more verbose 
  //   jQuery(window).trigger( 'hashchange' ).
  // * The event can be bound before DOM ready, but since it won't be usable
  //   before then in IE6/7 (due to the necessary Iframe), recommended usage is
  //   to bind it inside a DOM ready handler.
  
  // Override existing $.event.special.hashchange methods (allowing this plugin
  // to be defined after jQuery BBQ in BBQ's source code).
  special[ str_hashchange ] = $.extend( special[ str_hashchange ], {
    
    // Called only when the first 'hashchange' event is bound to window.
    setup: function() {
      // If window.onhashchange is supported natively, there's nothing to do..
      if ( supports_onhashchange ) { return false; }
      
      // Otherwise, we need to create our own. And we don't want to call this
      // until the user binds to the event, just in case they never do, since it
      // will create a polling loop and possibly even a hidden Iframe.
      $( fake_onhashchange.start );
    },
    
    // Called only when the last 'hashchange' event is unbound from window.
    teardown: function() {
      // If window.onhashchange is supported natively, there's nothing to do..
      if ( supports_onhashchange ) { return false; }
      
      // Otherwise, we need to stop ours (if possible).
      $( fake_onhashchange.stop );
    }
    
  });
  
  // fake_onhashchange does all the work of triggering the window.onhashchange
  // event for browsers that don't natively support it, including creating a
  // polling loop to watch for hash changes and in IE 6/7 creating a hidden
  // Iframe to enable back and forward.
  fake_onhashchange = (function(){
    var self = {},
      timeout_id,
      
      // Remember the initial hash so it doesn't get triggered immediately.
      last_hash = get_fragment(),
      
      fn_retval = function(val){ return val; },
      history_set = fn_retval,
      history_get = fn_retval;
    
    // Start the polling loop.
    self.start = function() {
      timeout_id || poll();
    };
    
    // Stop the polling loop.
    self.stop = function() {
      timeout_id && clearTimeout( timeout_id );
      timeout_id = undefined;
    };
    
    // This polling loop checks every $.fn.hashchange.delay milliseconds to see
    // if location.hash has changed, and triggers the 'hashchange' event on
    // window when necessary.
    function poll() {
      var hash = get_fragment(),
        history_hash = history_get( last_hash );
      
      if ( hash !== last_hash ) {
        history_set( last_hash = hash, history_hash );
        
        $(window).trigger( str_hashchange );
        
      } else if ( history_hash !== last_hash ) {
        location.href = location.href.replace( /#.*/, '' ) + history_hash;
      }
      
      timeout_id = setTimeout( poll, $.fn[ str_hashchange ].delay );
    };
    
    // vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv
    // vvvvvvvvvvvvvvvvvvv REMOVE IF NOT SUPPORTING IE6/7/8 vvvvvvvvvvvvvvvvvvv
    // vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv
    window.attachEvent && !window.addEventListener && !supports_onhashchange && (function(){
      // Not only do IE6/7 need the "magical" Iframe treatment, but so does IE8
      // when running in "IE7 compatibility" mode.
      
      var iframe,
        iframe_src;
      
      // When the event is bound and polling starts in IE 6/7, create a hidden
      // Iframe for history handling.
      self.start = function(){
        if ( !iframe ) {
          iframe_src = $.fn[ str_hashchange ].src;
          iframe_src = iframe_src && iframe_src + get_fragment();
          
          // Create hidden Iframe. Attempt to make Iframe as hidden as possible
          // by using techniques from http://www.paciellogroup.com/blog/?p=604.
          iframe = $('<iframe tabindex="-1" title="empty"/>').hide()
            
            // When Iframe has completely loaded, initialize the history and
            // start polling.
            .one( 'load', function(){
              iframe_src || history_set( get_fragment() );
              poll();
            })
            
            // Load Iframe src if specified, otherwise nothing.
            .attr( 'src', iframe_src || 'javascript:0' )
            
            // Append Iframe after the end of the body to prevent unnecessary
            // initial page scrolling (yes, this works).
            .insertAfter( 'body' )[0].contentWindow;
          
          // Whenever `document.title` changes, update the Iframe's title to
          // prettify the back/next history menu entries. Since IE sometimes
          // errors with "Unspecified error" the very first time this is set
          // (yes, very useful) wrap this with a try/catch block.
          doc.onpropertychange = function(){
            try {
              if ( event.propertyName === 'title' ) {
                iframe.document.title = doc.title;
              }
            } catch(e) {}
          };
          
        }
      };
      
      // Override the "stop" method since an IE6/7 Iframe was created. Even
      // if there are no longer any bound event handlers, the polling loop
      // is still necessary for back/next to work at all!
      self.stop = fn_retval;
      
      // Get history by looking at the hidden Iframe's location.hash.
      history_get = function() {
        return get_fragment( iframe.location.href );
      };
      
      // Set a new history item by opening and then closing the Iframe
      // document, *then* setting its location.hash. If document.domain has
      // been set, update that as well.
      history_set = function( hash, history_hash ) {
        var iframe_doc = iframe.document,
          domain = $.fn[ str_hashchange ].domain;
        
        if ( hash !== history_hash ) {
          // Update Iframe with any initial `document.title` that might be set.
          iframe_doc.title = doc.title;
          
          // Opening the Iframe's document after it has been closed is what
          // actually adds a history entry.
          iframe_doc.open();
          
          // Set document.domain for the Iframe document as well, if necessary.
          domain && iframe_doc.write( '\x3cscript>document.domain="' + domain + '"\x3c/script>' );
          
          iframe_doc.close();
          
          // Update the Iframe's hash, for great justice.
          iframe.location.hash = hash;
        }
      };
      
    })();
    // ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    // ^^^^^^^^^^^^^^^^^^^ REMOVE IF NOT SUPPORTING IE6/7/8 ^^^^^^^^^^^^^^^^^^^
    // ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    
    return self;
  })();
  
})(jQuery,this);


(function( $, undefined ) {

    /*! matchMedia() polyfill - Test a CSS media type/query in JS. Authors & copyright (c) 2012: Scott Jehl, Paul Irish, Nicholas Zakas. Dual MIT/BSD license */
    window.matchMedia = window.matchMedia || (function( doc, undefined ) {

        var bool,
            docElem = doc.documentElement,
            refNode = docElem.firstElementChild || docElem.firstChild,
            // fakeBody required for <FF4 when executed in <head>
            fakeBody = doc.createElement( "body" ),
            div = doc.createElement( "div" );

        div.id = "mq-test-1";
        div.style.cssText = "position:absolute;top:-100em";
        fakeBody.style.background = "none";
        fakeBody.appendChild(div);

        return function(q){

            div.innerHTML = "&shy;<style media=\"" + q + "\"> #mq-test-1 { width: 42px; }</style>";

            docElem.insertBefore( fakeBody, refNode );
            bool = div.offsetWidth === 42;
            docElem.removeChild( fakeBody );

            return {
                matches: bool,
                media: q
            };

        };

    }( document ));

    // $.mobile.media uses matchMedia to return a boolean.
    $.mobile.media = function( q ) {
        return window.matchMedia( q ).matches;
    };

})(jQuery);

    (function( $, undefined ) {
        var support = {
            touch: "ontouchend" in document
        };

        $.mobile.support = $.mobile.support || {};
        $.extend( $.support, support );
        $.extend( $.mobile.support, support );
    }( jQuery ));

    (function( $, undefined ) {
        $.extend( $.support, {
            orientation: "orientation" in window && "onorientationchange" in window
        });
    }( jQuery ));

(function( $, undefined ) {

// thx Modernizr
function propExists( prop ) {
    var uc_prop = prop.charAt( 0 ).toUpperCase() + prop.substr( 1 ),
        props = ( prop + " " + vendors.join( uc_prop + " " ) + uc_prop ).split( " " ),
        v;

    for ( v in props ) {
        if ( fbCSS[ props[ v ] ] !== undefined ) {
            return true;
        }
    }
}

var fakeBody = $( "<body>" ).prependTo( "html" ),
    fbCSS = fakeBody[ 0 ].style,
    vendors = [ "Webkit", "Moz", "O" ],
    webos = "palmGetResource" in window, //only used to rule out scrollTop
    operamini = window.operamini && ({}).toString.call( window.operamini ) === "[object OperaMini]",
    bb = window.blackberry && !propExists( "-webkit-transform" ), //only used to rule out box shadow, as it's filled opaque on BB 5 and lower
    nokiaLTE7_3;

// inline SVG support test
function inlineSVG() {
    // Thanks Modernizr & Erik Dahlstrom
    var w = window,
        svg = !!w.document.createElementNS && !!w.document.createElementNS( "http://www.w3.org/2000/svg", "svg" ).createSVGRect && !( w.opera && navigator.userAgent.indexOf( "Chrome" ) === -1 ),
        support = function( data ) {
            if ( !( data && svg ) ) {
                $( "html" ).addClass( "ui-nosvg" );
            }
        },
        img = new w.Image();

    img.onerror = function() {
        support( false );
    };
    img.onload = function() {
        support( img.width === 1 && img.height === 1 );
    };
    img.src = "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";
}

function transform3dTest() {
    var mqProp = "transform-3d",
        // Because the `translate3d` test below throws false positives in Android:
        ret = $.mobile.media( "(-" + vendors.join( "-" + mqProp + "),(-" ) + "-" + mqProp + "),(" + mqProp + ")" ),
        el, transforms, t;

    if ( ret ) {
        return !!ret;
    }

    el = document.createElement( "div" );
    transforms = {
        // We’re omitting Opera for the time being; MS uses unprefixed.
        "MozTransform": "-moz-transform",
        "transform": "transform"
    };

    fakeBody.append( el );

    for ( t in transforms ) {
        if ( el.style[ t ] !== undefined ) {
            el.style[ t ] = "translate3d( 100px, 1px, 1px )";
            ret = window.getComputedStyle( el ).getPropertyValue( transforms[ t ] );
        }
    }
    return ( !!ret && ret !== "none" );
}

// Test for dynamic-updating base tag support ( allows us to avoid href,src attr rewriting )
function baseTagTest() {
    var fauxBase = location.protocol + "//" + location.host + location.pathname + "ui-dir/",
        base = $( "head base" ),
        fauxEle = null,
        href = "",
        link, rebase;

    if ( !base.length ) {
        base = fauxEle = $( "<base>", { "href": fauxBase }).appendTo( "head" );
    } else {
        href = base.attr( "href" );
    }

    link = $( "<a href='testurl' />" ).prependTo( fakeBody );
    rebase = link[ 0 ].href;
    base[ 0 ].href = href || location.pathname;

    if ( fauxEle ) {
        fauxEle.remove();
    }
    return rebase.indexOf( fauxBase ) === 0;
}

// Thanks Modernizr
function cssPointerEventsTest() {
    var element = document.createElement( "x" ),
        documentElement = document.documentElement,
        getComputedStyle = window.getComputedStyle,
        supports;

    if ( !( "pointerEvents" in element.style ) ) {
        return false;
    }

    element.style.pointerEvents = "auto";
    element.style.pointerEvents = "x";
    documentElement.appendChild( element );
    supports = getComputedStyle &&
    getComputedStyle( element, "" ).pointerEvents === "auto";
    documentElement.removeChild( element );
    return !!supports;
}

function boundingRect() {
    var div = document.createElement( "div" );
    return typeof div.getBoundingClientRect !== "undefined";
}

// non-UA-based IE version check by James Padolsey, modified by jdalton - from http://gist.github.com/527683
// allows for inclusion of IE 6+, including Windows Mobile 7
$.extend( $.mobile, { browser: {} } );
$.mobile.browser.oldIE = (function() {
    var v = 3,
        div = document.createElement( "div" ),
        a = div.all || [];

    do {
        div.innerHTML = "<!--[if gt IE " + ( ++v ) + "]><br><![endif]-->";
    } while( a[0] );

    return v > 4 ? v : !v;
})();

function fixedPosition() {
    var w = window,
        ua = navigator.userAgent,
        platform = navigator.platform,
        // Rendering engine is Webkit, and capture major version
        wkmatch = ua.match( /AppleWebKit\/([0-9]+)/ ),
        wkversion = !!wkmatch && wkmatch[ 1 ],
        ffmatch = ua.match( /Fennec\/([0-9]+)/ ),
        ffversion = !!ffmatch && ffmatch[ 1 ],
        operammobilematch = ua.match( /Opera Mobi\/([0-9]+)/ ),
        omversion = !!operammobilematch && operammobilematch[ 1 ];

    if (
        // iOS 4.3 and older : Platform is iPhone/Pad/Touch and Webkit version is less than 534 (ios5)
        ( ( platform.indexOf( "iPhone" ) > -1 || platform.indexOf( "iPad" ) > -1  || platform.indexOf( "iPod" ) > -1 ) && wkversion && wkversion < 534 ) ||
        // Opera Mini
        ( w.operamini && ({}).toString.call( w.operamini ) === "[object OperaMini]" ) ||
        ( operammobilematch && omversion < 7458 )    ||
        //Android lte 2.1: Platform is Android and Webkit version is less than 533 (Android 2.2)
        ( ua.indexOf( "Android" ) > -1 && wkversion && wkversion < 533 ) ||
        // Firefox Mobile before 6.0 -
        ( ffversion && ffversion < 6 ) ||
        // WebOS less than 3
        ( "palmGetResource" in window && wkversion && wkversion < 534 )    ||
        // MeeGo
        ( ua.indexOf( "MeeGo" ) > -1 && ua.indexOf( "NokiaBrowser/8.5.0" ) > -1 ) ) {
        return false;
    }

    return true;
}

$.extend( $.support, {
    // Note, Chrome for iOS has an extremely quirky implementation of popstate.
    // We've chosen to take the shortest path to a bug fix here for issue #5426
    // See the following link for information about the regex chosen
    // https://developers.google.com/chrome/mobile/docs/user-agent#chrome_for_ios_user-agent
    pushState: "pushState" in history &&
        "replaceState" in history &&
        // When running inside a FF iframe, calling replaceState causes an error
        !( window.navigator.userAgent.indexOf( "Firefox" ) >= 0 && window.top !== window ) &&
        ( window.navigator.userAgent.search(/CriOS/) === -1 ),

    mediaquery: $.mobile.media( "only all" ),
    cssPseudoElement: !!propExists( "content" ),
    touchOverflow: !!propExists( "overflowScrolling" ),
    cssTransform3d: transform3dTest(),
    boxShadow: !!propExists( "boxShadow" ) && !bb,
    fixedPosition: fixedPosition(),
    scrollTop: ("pageXOffset" in window ||
        "scrollTop" in document.documentElement ||
        "scrollTop" in fakeBody[ 0 ]) && !webos && !operamini,

    dynamicBaseTag: baseTagTest(),
    cssPointerEvents: cssPointerEventsTest(),
    boundingRect: boundingRect(),
    inlineSVG: inlineSVG
});

fakeBody.remove();

// $.mobile.ajaxBlacklist is used to override ajaxEnabled on platforms that have known conflicts with hash history updates (BB5, Symbian)
// or that generally work better browsing in regular http for full page refreshes (Opera Mini)
// Note: This detection below is used as a last resort.
// We recommend only using these detection methods when all other more reliable/forward-looking approaches are not possible
nokiaLTE7_3 = (function() {

    var ua = window.navigator.userAgent;

    //The following is an attempt to match Nokia browsers that are running Symbian/s60, with webkit, version 7.3 or older
    return ua.indexOf( "Nokia" ) > -1 &&
            ( ua.indexOf( "Symbian/3" ) > -1 || ua.indexOf( "Series60/5" ) > -1 ) &&
            ua.indexOf( "AppleWebKit" ) > -1 &&
            ua.match( /(BrowserNG|NokiaBrowser)\/7\.[0-3]/ );
})();

// Support conditions that must be met in order to proceed
// default enhanced qualifications are media query support OR IE 7+

$.mobile.gradeA = function() {
    return ( ( $.support.mediaquery && $.support.cssPseudoElement ) || $.mobile.browser.oldIE && $.mobile.browser.oldIE >= 8 ) && ( $.support.boundingRect || $.fn.jquery.match(/1\.[0-7+]\.[0-9+]?/) !== null );
};

$.mobile.ajaxBlacklist =
            // BlackBerry browsers, pre-webkit
            window.blackberry && !window.WebKitPoint ||
            // Opera Mini
            operamini ||
            // Symbian webkits pre 7.3
            nokiaLTE7_3;

// Lastly, this workaround is the only way we've found so far to get pre 7.3 Symbian webkit devices
// to render the stylesheets when they're referenced before this script, as we'd recommend doing.
// This simply reappends the CSS in place, which for some reason makes it apply
if ( nokiaLTE7_3 ) {
    $(function() {
        $( "head link[rel='stylesheet']" ).attr( "rel", "alternate stylesheet" ).attr( "rel", "stylesheet" );
    });
}

// For ruling out shadows via css
if ( !$.support.boxShadow ) {
    $( "html" ).addClass( "ui-noboxshadow" );
}

})( jQuery );


(function( $, undefined ) {
    var $win = $.mobile.window, self,
        dummyFnToInitNavigate = function() {
        };

    $.event.special.beforenavigate = {
        setup: function() {
            $win.on( "navigate", dummyFnToInitNavigate );
        },

        teardown: function() {
            $win.off( "navigate", dummyFnToInitNavigate );
        }
    };

    $.event.special.navigate = self = {
        bound: false,

        pushStateEnabled: true,

        originalEventName: undefined,

        // If pushstate support is present and push state support is defined to
        // be true on the mobile namespace.
        isPushStateEnabled: function() {
            return $.support.pushState &&
                $.mobile.pushStateEnabled === true &&
                this.isHashChangeEnabled();
        },

        // !! assumes mobile namespace is present
        isHashChangeEnabled: function() {
            return $.mobile.hashListeningEnabled === true;
        },

        // TODO a lot of duplication between popstate and hashchange
        popstate: function( event ) {
            var newEvent = new $.Event( "navigate" ),
                beforeNavigate = new $.Event( "beforenavigate" ),
                state = event.originalEvent.state || {};

            beforeNavigate.originalEvent = event;
            $win.trigger( beforeNavigate );

            if ( beforeNavigate.isDefaultPrevented() ) {
                return;
            }

            if ( event.historyState ) {
                $.extend(state, event.historyState);
            }

            // Make sure the original event is tracked for the end
            // user to inspect incase they want to do something special
            newEvent.originalEvent = event;

            // NOTE we let the current stack unwind because any assignment to
            //      location.hash will stop the world and run this event handler. By
            //      doing this we create a similar behavior to hashchange on hash
            //      assignment
            setTimeout(function() {
                $win.trigger( newEvent, {
                    state: state
                });
            }, 0);
        },

        hashchange: function( event /*, data */ ) {
            var newEvent = new $.Event( "navigate" ),
                beforeNavigate = new $.Event( "beforenavigate" );

            beforeNavigate.originalEvent = event;
            $win.trigger( beforeNavigate );

            if ( beforeNavigate.isDefaultPrevented() ) {
                return;
            }

            // Make sure the original event is tracked for the end
            // user to inspect incase they want to do something special
            newEvent.originalEvent = event;

            // Trigger the hashchange with state provided by the user
            // that altered the hash
            $win.trigger( newEvent, {
                // Users that want to fully normalize the two events
                // will need to do history management down the stack and
                // add the state to the event before this binding is fired
                // TODO consider allowing for the explicit addition of callbacks
                //      to be fired before this value is set to avoid event timing issues
                state: event.hashchangeState || {}
            });
        },

        // TODO We really only want to set this up once
        //      but I'm not clear if there's a beter way to achieve
        //      this with the jQuery special event structure
        setup: function( /* data, namespaces */ ) {
            if ( self.bound ) {
                return;
            }

            self.bound = true;

            if ( self.isPushStateEnabled() ) {
                self.originalEventName = "popstate";
                $win.bind( "popstate.navigate", self.popstate );
            } else if ( self.isHashChangeEnabled() ) {
                self.originalEventName = "hashchange";
                $win.bind( "hashchange.navigate", self.hashchange );
            }
        }
    };
})( jQuery );



(function( $, undefined ) {
        var path, $base, dialogHashKey = "&ui-state=dialog";

        $.mobile.path = path = {
            uiStateKey: "&ui-state",

            // This scary looking regular expression parses an absolute URL or its relative
            // variants (protocol, site, document, query, and hash), into the various
            // components (protocol, host, path, query, fragment, etc that make up the
            // URL as well as some other commonly used sub-parts. When used with RegExp.exec()
            // or String.match, it parses the URL into a results array that looks like this:
            //
            //     [0]: http://jblas:password@mycompany.com:8080/mail/inbox?msg=1234&type=unread#msg-content
            //     [1]: http://jblas:password@mycompany.com:8080/mail/inbox?msg=1234&type=unread
            //     [2]: http://jblas:password@mycompany.com:8080/mail/inbox
            //     [3]: http://jblas:password@mycompany.com:8080
            //     [4]: http:
            //     [5]: //
            //     [6]: jblas:password@mycompany.com:8080
            //     [7]: jblas:password
            //     [8]: jblas
            //     [9]: password
            //    [10]: mycompany.com:8080
            //    [11]: mycompany.com
            //    [12]: 8080
            //    [13]: /mail/inbox
            //    [14]: /mail/
            //    [15]: inbox
            //    [16]: ?msg=1234&type=unread
            //    [17]: #msg-content
            //
            urlParseRE: /^\s*(((([^:\/#\?]+:)?(?:(\/\/)((?:(([^:@\/#\?]+)(?:\:([^:@\/#\?]+))?)@)?(([^:\/#\?\]\[]+|\[[^\/\]@#?]+\])(?:\:([0-9]+))?))?)?)?((\/?(?:[^\/\?#]+\/+)*)([^\?#]*)))?(\?[^#]+)?)(#.*)?/,

            // Abstraction to address xss (Issue #4787) by removing the authority in
            // browsers that auto-decode it. All references to location.href should be
            // replaced with a call to this method so that it can be dealt with properly here
            getLocation: function( url ) {
                var parsedUrl = this.parseUrl( url || location.href ),
                    uri = url ? parsedUrl : location,

                    // Make sure to parse the url or the location object for the hash because using
                    // location.hash is autodecoded in firefox, the rest of the url should be from
                    // the object (location unless we're testing) to avoid the inclusion of the
                    // authority
                    hash = parsedUrl.hash;

                // mimic the browser with an empty string when the hash is empty
                hash = hash === "#" ? "" : hash;

                return uri.protocol +
                    parsedUrl.doubleSlash +
                    uri.host +

                    // The pathname must start with a slash if there's a protocol, because you
                    // can't have a protocol followed by a relative path. Also, it's impossible to
                    // calculate absolute URLs from relative ones if the absolute one doesn't have
                    // a leading "/".
                    ( ( uri.protocol !== "" && uri.pathname.substring( 0, 1 ) !== "/" ) ?
                        "/" : "" ) +
                    uri.pathname +
                    uri.search +
                    hash;
            },

            //return the original document url
            getDocumentUrl: function( asParsedObject ) {
                return asParsedObject ? $.extend( {}, path.documentUrl ) : path.documentUrl.href;
            },

            parseLocation: function() {
                return this.parseUrl( this.getLocation() );
            },

            //Parse a URL into a structure that allows easy access to
            //all of the URL components by name.
            parseUrl: function( url ) {
                // If we're passed an object, we'll assume that it is
                // a parsed url object and just return it back to the caller.
                if ( $.type( url ) === "object" ) {
                    return url;
                }

                var matches = path.urlParseRE.exec( url || "" ) || [];

                    // Create an object that allows the caller to access the sub-matches
                    // by name. Note that IE returns an empty string instead of undefined,
                    // like all other browsers do, so we normalize everything so its consistent
                    // no matter what browser we're running on.
                    return {
                        href:         matches[  0 ] || "",
                        hrefNoHash:   matches[  1 ] || "",
                        hrefNoSearch: matches[  2 ] || "",
                        domain:       matches[  3 ] || "",
                        protocol:     matches[  4 ] || "",
                        doubleSlash:  matches[  5 ] || "",
                        authority:    matches[  6 ] || "",
                        username:     matches[  8 ] || "",
                        password:     matches[  9 ] || "",
                        host:         matches[ 10 ] || "",
                        hostname:     matches[ 11 ] || "",
                        port:         matches[ 12 ] || "",
                        pathname:     matches[ 13 ] || "",
                        directory:    matches[ 14 ] || "",
                        filename:     matches[ 15 ] || "",
                        search:       matches[ 16 ] || "",
                        hash:         matches[ 17 ] || ""
                    };
            },

            //Turn relPath into an asbolute path. absPath is
            //an optional absolute path which describes what
            //relPath is relative to.
            makePathAbsolute: function( relPath, absPath ) {
                var absStack,
                    relStack,
                    i, d;

                if ( relPath && relPath.charAt( 0 ) === "/" ) {
                    return relPath;
                }

                relPath = relPath || "";
                absPath = absPath ? absPath.replace( /^\/|(\/[^\/]*|[^\/]+)$/g, "" ) : "";

                absStack = absPath ? absPath.split( "/" ) : [];
                relStack = relPath.split( "/" );

                for ( i = 0; i < relStack.length; i++ ) {
                    d = relStack[ i ];
                    switch ( d ) {
                        case ".":
                            break;
                        case "..":
                            if ( absStack.length ) {
                                absStack.pop();
                            }
                            break;
                        default:
                            absStack.push( d );
                            break;
                    }
                }
                return "/" + absStack.join( "/" );
            },

            //Returns true if both urls have the same domain.
            isSameDomain: function( absUrl1, absUrl2 ) {
                return path.parseUrl( absUrl1 ).domain.toLowerCase() ===
                    path.parseUrl( absUrl2 ).domain.toLowerCase();
            },

            //Returns true for any relative variant.
            isRelativeUrl: function( url ) {
                // All relative Url variants have one thing in common, no protocol.
                return path.parseUrl( url ).protocol === "";
            },

            //Returns true for an absolute url.
            isAbsoluteUrl: function( url ) {
                return path.parseUrl( url ).protocol !== "";
            },

            //Turn the specified realtive URL into an absolute one. This function
            //can handle all relative variants (protocol, site, document, query, fragment).
            makeUrlAbsolute: function( relUrl, absUrl ) {
                if ( !path.isRelativeUrl( relUrl ) ) {
                    return relUrl;
                }

                if ( absUrl === undefined ) {
                    absUrl = this.documentBase;
                }

                var relObj = path.parseUrl( relUrl ),
                    absObj = path.parseUrl( absUrl ),
                    protocol = relObj.protocol || absObj.protocol,
                    doubleSlash = relObj.protocol ? relObj.doubleSlash : ( relObj.doubleSlash || absObj.doubleSlash ),
                    authority = relObj.authority || absObj.authority,
                    hasPath = relObj.pathname !== "",
                    pathname = path.makePathAbsolute( relObj.pathname || absObj.filename, absObj.pathname ),
                    search = relObj.search || ( !hasPath && absObj.search ) || "",
                    hash = relObj.hash;

                return protocol + doubleSlash + authority + pathname + search + hash;
            },

            //Add search (aka query) params to the specified url.
            addSearchParams: function( url, params ) {
                var u = path.parseUrl( url ),
                    p = ( typeof params === "object" ) ? $.param( params ) : params,
                    s = u.search || "?";
                return u.hrefNoSearch + s + ( s.charAt( s.length - 1 ) !== "?" ? "&" : "" ) + p + ( u.hash || "" );
            },

            convertUrlToDataUrl: function( absUrl ) {
                var result = absUrl,
                    u = path.parseUrl( absUrl );

                if ( path.isEmbeddedPage( u ) ) {
                    // For embedded pages, remove the dialog hash key as in getFilePath(),
                    // and remove otherwise the Data Url won't match the id of the embedded Page.
                    result = u.hash
                        .split( dialogHashKey )[0]
                        .replace( /^#/, "" )
                        .replace( /\?.*$/, "" );
                } else if ( path.isSameDomain( u, this.documentBase ) ) {
                    result = u.hrefNoHash.replace( this.documentBase.domain, "" ).split( dialogHashKey )[0];
                }

                return window.decodeURIComponent( result );
            },

            //get path from current hash, or from a file path
            get: function( newPath ) {
                if ( newPath === undefined ) {
                    newPath = path.parseLocation().hash;
                }
                return path.stripHash( newPath ).replace( /[^\/]*\.[^\/*]+$/, "" );
            },

            //set location hash to path
            set: function( path ) {
                location.hash = path;
            },

            //test if a given url (string) is a path
            //NOTE might be exceptionally naive
            isPath: function( url ) {
                return ( /\// ).test( url );
            },

            //return a url path with the window's location protocol/hostname/pathname removed
            clean: function( url ) {
                return url.replace( this.documentBase.domain, "" );
            },

            //just return the url without an initial #
            stripHash: function( url ) {
                return url.replace( /^#/, "" );
            },

            stripQueryParams: function( url ) {
                return url.replace( /\?.*$/, "" );
            },

            //remove the preceding hash, any query params, and dialog notations
            cleanHash: function( hash ) {
                return path.stripHash( hash.replace( /\?.*$/, "" ).replace( dialogHashKey, "" ) );
            },

            isHashValid: function( hash ) {
                return ( /^#[^#]+$/ ).test( hash );
            },

            //check whether a url is referencing the same domain, or an external domain or different protocol
            //could be mailto, etc
            isExternal: function( url ) {
                var u = path.parseUrl( url );

                return !!( u.protocol &&
                    ( u.domain.toLowerCase() !== this.documentUrl.domain.toLowerCase() ) );
            },

            hasProtocol: function( url ) {
                return ( /^(:?\w+:)/ ).test( url );
            },

            isEmbeddedPage: function( url ) {
                var u = path.parseUrl( url );

                //if the path is absolute, then we need to compare the url against
                //both the this.documentUrl and the documentBase. The main reason for this
                //is that links embedded within external documents will refer to the
                //application document, whereas links embedded within the application
                //document will be resolved against the document base.
                if ( u.protocol !== "" ) {
                    return ( !this.isPath(u.hash) && u.hash && ( u.hrefNoHash === this.documentUrl.hrefNoHash || ( this.documentBaseDiffers && u.hrefNoHash === this.documentBase.hrefNoHash ) ) );
                }
                return ( /^#/ ).test( u.href );
            },

            squash: function( url, resolutionUrl ) {
                var href, cleanedUrl, search, stateIndex, docUrl,
                    isPath = this.isPath( url ),
                    uri = this.parseUrl( url ),
                    preservedHash = uri.hash,
                    uiState = "";

                // produce a url against which we can resolve the provided path
                if ( !resolutionUrl ) {
                    if ( isPath ) {
                        resolutionUrl = path.getLocation();
                    } else {
                        docUrl = path.getDocumentUrl( true );
                        if ( path.isPath( docUrl.hash ) ) {
                            resolutionUrl = path.squash( docUrl.href );
                        } else {
                            resolutionUrl = docUrl.href;
                        }
                    }
                }

                // If the url is anything but a simple string, remove any preceding hash
                // eg #foo/bar -> foo/bar
                //    #foo -> #foo
                cleanedUrl = isPath ? path.stripHash( url ) : url;

                // If the url is a full url with a hash check if the parsed hash is a path
                // if it is, strip the #, and use it otherwise continue without change
                cleanedUrl = path.isPath( uri.hash ) ? path.stripHash( uri.hash ) : cleanedUrl;

                // Split the UI State keys off the href
                stateIndex = cleanedUrl.indexOf( this.uiStateKey );

                // store the ui state keys for use
                if ( stateIndex > -1 ) {
                    uiState = cleanedUrl.slice( stateIndex );
                    cleanedUrl = cleanedUrl.slice( 0, stateIndex );
                }

                // make the cleanedUrl absolute relative to the resolution url
                href = path.makeUrlAbsolute( cleanedUrl, resolutionUrl );

                // grab the search from the resolved url since parsing from
                // the passed url may not yield the correct result
                search = this.parseUrl( href ).search;

                // TODO all this crap is terrible, clean it up
                if ( isPath ) {
                    // reject the hash if it's a path or it's just a dialog key
                    if ( path.isPath( preservedHash ) || preservedHash.replace("#", "").indexOf( this.uiStateKey ) === 0) {
                        preservedHash = "";
                    }

                    // Append the UI State keys where it exists and it's been removed
                    // from the url
                    if ( uiState && preservedHash.indexOf( this.uiStateKey ) === -1) {
                        preservedHash += uiState;
                    }

                    // make sure that pound is on the front of the hash
                    if ( preservedHash.indexOf( "#" ) === -1 && preservedHash !== "" ) {
                        preservedHash = "#" + preservedHash;
                    }

                    // reconstruct each of the pieces with the new search string and hash
                    href = path.parseUrl( href );
                    href = href.protocol + href.doubleSlash + href.host + href.pathname + search +
                        preservedHash;
                } else {
                    href += href.indexOf( "#" ) > -1 ? uiState : "#" + uiState;
                }

                return href;
            },

            isPreservableHash: function( hash ) {
                return hash.replace( "#", "" ).indexOf( this.uiStateKey ) === 0;
            },

            // Escape weird characters in the hash if it is to be used as a selector
            hashToSelector: function( hash ) {
                var hasHash = ( hash.substring( 0, 1 ) === "#" );
                if ( hasHash ) {
                    hash = hash.substring( 1 );
                }
                return ( hasHash ? "#" : "" ) + hash.replace( /([!"#$%&'()*+,./:;<=>?@[\]^`{|}~])/g, "\\$1" );
            },

            // return the substring of a filepath before the dialogHashKey, for making a server
            // request
            getFilePath: function( path ) {
                return path && path.split( dialogHashKey )[0];
            },

            // check if the specified url refers to the first page in the main
            // application document.
            isFirstPageUrl: function( url ) {
                // We only deal with absolute paths.
                var u = path.parseUrl( path.makeUrlAbsolute( url, this.documentBase ) ),

                    // Does the url have the same path as the document?
                    samePath = u.hrefNoHash === this.documentUrl.hrefNoHash ||
                        ( this.documentBaseDiffers &&
                            u.hrefNoHash === this.documentBase.hrefNoHash ),

                    // Get the first page element.
                    fp = $.mobile.firstPage,

                    // Get the id of the first page element if it has one.
                    fpId = fp && fp[0] ? fp[0].id : undefined;

                // The url refers to the first page if the path matches the document and
                // it either has no hash value, or the hash is exactly equal to the id
                // of the first page element.
                return samePath &&
                    ( !u.hash ||
                        u.hash === "#" ||
                        ( fpId && u.hash.replace( /^#/, "" ) === fpId ) );
            },

            // Some embedded browsers, like the web view in Phone Gap, allow
            // cross-domain XHR requests if the document doing the request was loaded
            // via the file:// protocol. This is usually to allow the application to
            // "phone home" and fetch app specific data. We normally let the browser
            // handle external/cross-domain urls, but if the allowCrossDomainPages
            // option is true, we will allow cross-domain http/https requests to go
            // through our page loading logic.
            isPermittedCrossDomainRequest: function( docUrl, reqUrl ) {
                return $.mobile.allowCrossDomainPages &&
                    (docUrl.protocol === "file:" || docUrl.protocol === "content:") &&
                    reqUrl.search( /^https?:/ ) !== -1;
            }
        };

        path.documentUrl = path.parseLocation();

        $base = $( "head" ).find( "base" );

        path.documentBase = $base.length ?
            path.parseUrl( path.makeUrlAbsolute( $base.attr( "href" ), path.documentUrl.href ) ) :
            path.documentUrl;

        path.documentBaseDiffers = (path.documentUrl.hrefNoHash !== path.documentBase.hrefNoHash);

        //return the original document base url
        path.getDocumentBase = function( asParsedObject ) {
            return asParsedObject ? $.extend( {}, path.documentBase ) : path.documentBase.href;
        };

        // DEPRECATED as of 1.4.0 - remove in 1.5.0
        $.extend( $.mobile, {

            //return the original document url
            getDocumentUrl: path.getDocumentUrl,

            //return the original document base url
            getDocumentBase: path.getDocumentBase
        });
})( jQuery );



(function( $, undefined ) {
    $.mobile.History = function( stack, index ) {
        this.stack = stack || [];
        this.activeIndex = index || 0;
    };

    $.extend($.mobile.History.prototype, {
        getActive: function() {
            return this.stack[ this.activeIndex ];
        },

        getLast: function() {
            return this.stack[ this.previousIndex ];
        },

        getNext: function() {
            return this.stack[ this.activeIndex + 1 ];
        },

        getPrev: function() {
            return this.stack[ this.activeIndex - 1 ];
        },

        // addNew is used whenever a new page is added
        add: function( url, data ) {
            data = data || {};

            //if there's forward history, wipe it
            if ( this.getNext() ) {
                this.clearForward();
            }

            // if the hash is included in the data make sure the shape
            // is consistent for comparison
            if ( data.hash && data.hash.indexOf( "#" ) === -1) {
                data.hash = "#" + data.hash;
            }

            data.url = url;
            this.stack.push( data );
            this.activeIndex = this.stack.length - 1;
        },

        //wipe urls ahead of active index
        clearForward: function() {
            this.stack = this.stack.slice( 0, this.activeIndex + 1 );
        },

        find: function( url, stack, earlyReturn ) {
            stack = stack || this.stack;

            var entry, i, length = stack.length, index;

            for ( i = 0; i < length; i++ ) {
                entry = stack[i];

                if ( decodeURIComponent(url) === decodeURIComponent(entry.url) ||
                    decodeURIComponent(url) === decodeURIComponent(entry.hash) ) {
                    index = i;

                    if ( earlyReturn ) {
                        return index;
                    }
                }
            }

            return index;
        },

        closest: function( url ) {
            var closest, a = this.activeIndex;

            // First, take the slice of the history stack before the current index and search
            // for a url match. If one is found, we'll avoid avoid looking through forward history
            // NOTE the preference for backward history movement is driven by the fact that
            //      most mobile browsers only have a dedicated back button, and users rarely use
            //      the forward button in desktop browser anyhow
            closest = this.find( url, this.stack.slice(0, a) );

            // If nothing was found in backward history check forward. The `true`
            // value passed as the third parameter causes the find method to break
            // on the first match in the forward history slice. The starting index
            // of the slice must then be added to the result to get the element index
            // in the original history stack :( :(
            //
            // TODO this is hyper confusing and should be cleaned up (ugh so bad)
            if ( closest === undefined ) {
                closest = this.find( url, this.stack.slice(a), true );
                closest = closest === undefined ? closest : closest + a;
            }

            return closest;
        },

        direct: function( opts ) {
            var newActiveIndex = this.closest( opts.url ), a = this.activeIndex;

            // save new page index, null check to prevent falsey 0 result
            // record the previous index for reference
            if ( newActiveIndex !== undefined ) {
                this.activeIndex = newActiveIndex;
                this.previousIndex = a;
            }

            // invoke callbacks where appropriate
            //
            // TODO this is also convoluted and confusing
            if ( newActiveIndex < a ) {
                ( opts.present || opts.back || $.noop )( this.getActive(), "back" );
            } else if ( newActiveIndex > a ) {
                ( opts.present || opts.forward || $.noop )( this.getActive(), "forward" );
            } else if ( newActiveIndex === undefined && opts.missing ) {
                opts.missing( this.getActive() );
            }
        }
    });
})( jQuery );



(function( $, undefined ) {
    var path = $.mobile.path,
        initialHref = location.href;

    $.mobile.Navigator = function( history ) {
        this.history = history;
        this.ignoreInitialHashChange = true;

        $.mobile.window.bind({
            "popstate.history": $.proxy( this.popstate, this ),
            "hashchange.history": $.proxy( this.hashchange, this )
        });
    };

    $.extend($.mobile.Navigator.prototype, {
        squash: function( url, data ) {
            var state, href, hash = path.isPath(url) ? path.stripHash(url) : url;

            href = path.squash( url );

            // make sure to provide this information when it isn't explicitly set in the
            // data object that was passed to the squash method
            state = $.extend({
                hash: hash,
                url: href
            }, data);

            // replace the current url with the new href and store the state
            // Note that in some cases we might be replacing an url with the
            // same url. We do this anyways because we need to make sure that
            // all of our history entries have a state object associated with
            // them. This allows us to work around the case where $.mobile.back()
            // is called to transition from an external page to an embedded page.
            // In that particular case, a hashchange event is *NOT* generated by the browser.
            // Ensuring each history entry has a state object means that onPopState()
            // will always trigger our hashchange callback even when a hashchange event
            // is not fired.
            window.history.replaceState( state, state.title || document.title, href );

            return state;
        },

        hash: function( url, href ) {
            var parsed, loc, hash, resolved;

            // Grab the hash for recording. If the passed url is a path
            // we used the parsed version of the squashed url to reconstruct,
            // otherwise we assume it's a hash and store it directly
            parsed = path.parseUrl( url );
            loc = path.parseLocation();

            if ( loc.pathname + loc.search === parsed.pathname + parsed.search ) {
                // If the pathname and search of the passed url is identical to the current loc
                // then we must use the hash. Otherwise there will be no event
                // eg, url = "/foo/bar?baz#bang", location.href = "http://example.com/foo/bar?baz"
                hash = parsed.hash ? parsed.hash : parsed.pathname + parsed.search;
            } else if ( path.isPath(url) ) {
                resolved = path.parseUrl( href );
                // If the passed url is a path, make it domain relative and remove any trailing hash
                hash = resolved.pathname + resolved.search + (path.isPreservableHash( resolved.hash )? resolved.hash.replace( "#", "" ) : "");
            } else {
                hash = url;
            }

            return hash;
        },

        // TODO reconsider name
        go: function( url, data, noEvents ) {
            var state, href, hash, popstateEvent,
                isPopStateEvent = $.event.special.navigate.isPushStateEnabled();

            // Get the url as it would look squashed on to the current resolution url
            href = path.squash( url );

            // sort out what the hash sould be from the url
            hash = this.hash( url, href );

            // Here we prevent the next hash change or popstate event from doing any
            // history management. In the case of hashchange we don't swallow it
            // if there will be no hashchange fired (since that won't reset the value)
            // and will swallow the following hashchange
            if ( noEvents && hash !== path.stripHash(path.parseLocation().hash) ) {
                this.preventNextHashChange = noEvents;
            }

            // IMPORTANT in the case where popstate is supported the event will be triggered
            //      directly, stopping further execution - ie, interupting the flow of this
            //      method call to fire bindings at this expression. Below the navigate method
            //      there is a binding to catch this event and stop its propagation.
            //
            //      We then trigger a new popstate event on the window with a null state
            //      so that the navigate events can conclude their work properly
            //
            // if the url is a path we want to preserve the query params that are available on
            // the current url.
            this.preventHashAssignPopState = true;
            window.location.hash = hash;

            // If popstate is enabled and the browser triggers `popstate` events when the hash
            // is set (this often happens immediately in browsers like Chrome), then the
            // this flag will be set to false already. If it's a browser that does not trigger
            // a `popstate` on hash assignement or `replaceState` then we need avoid the branch
            // that swallows the event created by the popstate generated by the hash assignment
            // At the time of this writing this happens with Opera 12 and some version of IE
            this.preventHashAssignPopState = false;

            state = $.extend({
                url: href,
                hash: hash,
                title: document.title
            }, data);

            if ( isPopStateEvent ) {
                popstateEvent = new $.Event( "popstate" );
                popstateEvent.originalEvent = {
                    type: "popstate",
                    state: null
                };

                this.squash( url, state );

                // Trigger a new faux popstate event to replace the one that we
                // caught that was triggered by the hash setting above.
                if ( !noEvents ) {
                    this.ignorePopState = true;
                    $.mobile.window.trigger( popstateEvent );
                }
            }

            // record the history entry so that the information can be included
            // in hashchange event driven navigate events in a similar fashion to
            // the state that's provided by popstate
            this.history.add( state.url, state );
        },

        // This binding is intended to catch the popstate events that are fired
        // when execution of the `$.navigate` method stops at window.location.hash = url;
        // and completely prevent them from propagating. The popstate event will then be
        // retriggered after execution resumes
        //
        // TODO grab the original event here and use it for the synthetic event in the
        //      second half of the navigate execution that will follow this binding
        popstate: function( event ) {
            var hash, state;

            // Partly to support our test suite which manually alters the support
            // value to test hashchange. Partly to prevent all around weirdness
            if ( !$.event.special.navigate.isPushStateEnabled() ) {
                return;
            }

            // If this is the popstate triggered by the actual alteration of the hash
            // prevent it completely. History is tracked manually
            if ( this.preventHashAssignPopState ) {
                this.preventHashAssignPopState = false;
                event.stopImmediatePropagation();
                return;
            }

            // if this is the popstate triggered after the `replaceState` call in the go
            // method, then simply ignore it. The history entry has already been captured
            if ( this.ignorePopState ) {
                this.ignorePopState = false;
                return;
            }

            // If there is no state, and the history stack length is one were
            // probably getting the page load popstate fired by browsers like chrome
            // avoid it and set the one time flag to false.
            // TODO: Do we really need all these conditions? Comparing location hrefs
            // should be sufficient.
            if ( !event.originalEvent.state &&
                this.history.stack.length === 1 &&
                this.ignoreInitialHashChange ) {
                this.ignoreInitialHashChange = false;

                if ( location.href === initialHref ) {
                    event.preventDefault();
                    return;
                }
            }

            // account for direct manipulation of the hash. That is, we will receive a popstate
            // when the hash is changed by assignment, and it won't have a state associated. We
            // then need to squash the hash. See below for handling of hash assignment that
            // matches an existing history entry
            // TODO it might be better to only add to the history stack
            //      when the hash is adjacent to the active history entry
            hash = path.parseLocation().hash;
            if ( !event.originalEvent.state && hash ) {
                // squash the hash that's been assigned on the URL with replaceState
                // also grab the resulting state object for storage
                state = this.squash( hash );

                // record the new hash as an additional history entry
                // to match the browser's treatment of hash assignment
                this.history.add( state.url, state );

                // pass the newly created state information
                // along with the event
                event.historyState = state;

                // do not alter history, we've added a new history entry
                // so we know where we are
                return;
            }

            // If all else fails this is a popstate that comes from the back or forward buttons
            // make sure to set the state of our history stack properly, and record the directionality
            this.history.direct({
                url: (event.originalEvent.state || {}).url || hash,

                // When the url is either forward or backward in history include the entry
                // as data on the event object for merging as data in the navigate event
                present: function( historyEntry, direction ) {
                    // make sure to create a new object to pass down as the navigate event data
                    event.historyState = $.extend({}, historyEntry);
                    event.historyState.direction = direction;
                }
            });
        },

        // NOTE must bind before `navigate` special event hashchange binding otherwise the
        //      navigation data won't be attached to the hashchange event in time for those
        //      bindings to attach it to the `navigate` special event
        // TODO add a check here that `hashchange.navigate` is bound already otherwise it's
        //      broken (exception?)
        hashchange: function( event ) {
            var history, hash;

            // If hashchange listening is explicitly disabled or pushstate is supported
            // avoid making use of the hashchange handler.
            if (!$.event.special.navigate.isHashChangeEnabled() ||
                $.event.special.navigate.isPushStateEnabled() ) {
                return;
            }

            // On occasion explicitly want to prevent the next hash from propogating because we only
            // with to alter the url to represent the new state do so here
            if ( this.preventNextHashChange ) {
                this.preventNextHashChange = false;
                event.stopImmediatePropagation();
                return;
            }

            history = this.history;
            hash = path.parseLocation().hash;

            // If this is a hashchange caused by the back or forward button
            // make sure to set the state of our history stack properly
            this.history.direct({
                url: hash,

                // When the url is either forward or backward in history include the entry
                // as data on the event object for merging as data in the navigate event
                present: function( historyEntry, direction ) {
                    // make sure to create a new object to pass down as the navigate event data
                    event.hashchangeState = $.extend({}, historyEntry);
                    event.hashchangeState.direction = direction;
                },

                // When we don't find a hash in our history clearly we're aiming to go there
                // record the entry as new for future traversal
                //
                // NOTE it's not entirely clear that this is the right thing to do given that we
                //      can't know the users intention. It might be better to explicitly _not_
                //      support location.hash assignment in preference to $.navigate calls
                // TODO first arg to add should be the href, but it causes issues in identifying
                //      embeded pages
                missing: function() {
                    history.add( hash, {
                        hash: hash,
                        title: document.title
                    });
                }
            });
        }
    });
})( jQuery );



(function( $, undefined ) {
    // TODO consider queueing navigation activity until previous activities have completed
    //      so that end users don't have to think about it. Punting for now
    // TODO !! move the event bindings into callbacks on the navigate event
    $.mobile.navigate = function( url, data, noEvents ) {
        $.mobile.navigate.navigator.go( url, data, noEvents );
    };

    // expose the history on the navigate method in anticipation of full integration with
    // existing navigation functionalty that is tightly coupled to the history information
    $.mobile.navigate.history = new $.mobile.History();

    // instantiate an instance of the navigator for use within the $.navigate method
    $.mobile.navigate.navigator = new $.mobile.Navigator( $.mobile.navigate.history );

    var loc = $.mobile.path.parseLocation();
    $.mobile.navigate.history.add( loc.href, {hash: loc.hash} );
})( jQuery );


(function( $, undefined ) {
    var props = {
            "animation": {},
            "transition": {}
        },
        testElement = document.createElement( "a" ),
        vendorPrefixes = [ "", "webkit-", "moz-", "o-" ];

    $.each( [ "animation", "transition" ], function( i, test ) {

        // Get correct name for test
        var testName = ( i === 0 ) ? test + "-" + "name" : test;

        $.each( vendorPrefixes, function( j, prefix ) {
            if ( testElement.style[ $.camelCase( prefix + testName ) ] !== undefined ) {
                 props[ test ][ "prefix" ] = prefix;
                return false;
            }
        });

        // Set event and duration names for later use
        props[ test ][ "duration" ] =
            $.camelCase( props[ test ][ "prefix" ] + test + "-" + "duration" );
        props[ test ][ "event" ] =
            $.camelCase( props[ test ][ "prefix" ] + test + "-" + "end" );

        // All lower case if not a vendor prop
        if ( props[ test ][ "prefix" ] === "" ) {
            props[ test ][ "event" ] = props[ test ][ "event" ].toLowerCase();
        }
    });

    // If a valid prefix was found then the it is supported by the browser
    $.support.cssTransitions = ( props[ "transition" ][ "prefix" ] !== undefined );
    $.support.cssAnimations = ( props[ "animation" ][ "prefix" ] !== undefined );

    // Remove the testElement
    $( testElement ).remove();

    // Animation complete callback
    $.fn.animationComplete = function( callback, type, fallbackTime ) {
        var timer, duration,
            that = this,
            eventBinding = function() {

                // Clear the timer so we don't call callback twice
                clearTimeout( timer );
                callback.apply( this, arguments );
            },
            animationType = ( !type || type === "animation" ) ? "animation" : "transition";

        // Make sure selected type is supported by browser
        if ( ( $.support.cssTransitions && animationType === "transition" ) ||
            ( $.support.cssAnimations && animationType === "animation" ) ) {

            // If a fallback time was not passed set one
            if ( fallbackTime === undefined ) {

                // Make sure the was not bound to document before checking .css
                if ( $( this ).context !== document ) {

                    // Parse the durration since its in second multiple by 1000 for milliseconds
                    // Multiply by 3 to make sure we give the animation plenty of time.
                    duration = parseFloat(
                        $( this ).css( props[ animationType ].duration )
                    ) * 3000;
                }

                // If we could not read a duration use the default
                if ( duration === 0 || duration === undefined || isNaN( duration ) ) {
                    duration = $.fn.animationComplete.defaultDuration;
                }
            }

            // Sets up the fallback if event never comes
            timer = setTimeout( function() {
                $( that ).off( props[ animationType ].event, eventBinding );
                callback.apply( that );
            }, duration );

            // Bind the event
            return $( this ).one( props[ animationType ].event, eventBinding );
        } else {

            // CSS animation / transitions not supported
            // Defer execution for consistency between webkit/non webkit
            setTimeout( $.proxy( callback, this ), 0 );
            return $( this );
        }
    };

    // Allow default callback to be configured on mobileInit
    $.fn.animationComplete.defaultDuration = 1000;
})( jQuery );

// This plugin is an experiment for abstracting away the touch and mouse
// events so that developers don't have to worry about which method of input
// the device their document is loaded on supports.
//
// The idea here is to allow the developer to register listeners for the
// basic mouse events, such as mousedown, mousemove, mouseup, and click,
// and the plugin will take care of registering the correct listeners
// behind the scenes to invoke the listener at the fastest possible time
// for that device, while still retaining the order of event firing in
// the traditional mouse environment, should multiple handlers be registered
// on the same element for different events.
//
// The current version exposes the following virtual events to jQuery bind methods:
// "vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel"

(function( $, window, document, undefined ) {

var dataPropertyName = "virtualMouseBindings",
    touchTargetPropertyName = "virtualTouchID",
    virtualEventNames = "vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split( " " ),
    touchEventProps = "clientX clientY pageX pageY screenX screenY".split( " " ),
    mouseHookProps = $.event.mouseHooks ? $.event.mouseHooks.props : [],
    mouseEventProps = $.event.props.concat( mouseHookProps ),
    activeDocHandlers = {},
    resetTimerID = 0,
    startX = 0,
    startY = 0,
    didScroll = false,
    clickBlockList = [],
    blockMouseTriggers = false,
    blockTouchTriggers = false,
    eventCaptureSupported = "addEventListener" in document,
    $document = $( document ),
    nextTouchID = 1,
    lastTouchID = 0, threshold,
    i;

$.vmouse = {
    moveDistanceThreshold: 10,
    clickDistanceThreshold: 10,
    resetTimerDuration: 1500
};

function getNativeEvent( event ) {

    while ( event && typeof event.originalEvent !== "undefined" ) {
        event = event.originalEvent;
    }
    return event;
}

function createVirtualEvent( event, eventType ) {

    var t = event.type,
        oe, props, ne, prop, ct, touch, i, j, len;

    event = $.Event( event );
    event.type = eventType;

    oe = event.originalEvent;
    props = $.event.props;

    // addresses separation of $.event.props in to $.event.mouseHook.props and Issue 3280
    // https://github.com/jquery/jquery-mobile/issues/3280
    if ( t.search( /^(mouse|click)/ ) > -1 ) {
        props = mouseEventProps;
    }

    // copy original event properties over to the new event
    // this would happen if we could call $.event.fix instead of $.Event
    // but we don't have a way to force an event to be fixed multiple times
    if ( oe ) {
        for ( i = props.length, prop; i; ) {
            prop = props[ --i ];
            event[ prop ] = oe[ prop ];
        }
    }

    // make sure that if the mouse and click virtual events are generated
    // without a .which one is defined
    if ( t.search(/mouse(down|up)|click/) > -1 && !event.which ) {
        event.which = 1;
    }

    if ( t.search(/^touch/) !== -1 ) {
        ne = getNativeEvent( oe );
        t = ne.touches;
        ct = ne.changedTouches;
        touch = ( t && t.length ) ? t[0] : ( ( ct && ct.length ) ? ct[ 0 ] : undefined );

        if ( touch ) {
            for ( j = 0, len = touchEventProps.length; j < len; j++) {
                prop = touchEventProps[ j ];
                event[ prop ] = touch[ prop ];
            }
        }
    }

    return event;
}

function getVirtualBindingFlags( element ) {

    var flags = {},
        b, k;

    while ( element ) {

        b = $.data( element, dataPropertyName );

        for (  k in b ) {
            if ( b[ k ] ) {
                flags[ k ] = flags.hasVirtualBinding = true;
            }
        }
        element = element.parentNode;
    }
    return flags;
}

function getClosestElementWithVirtualBinding( element, eventType ) {
    var b;
    while ( element ) {

        b = $.data( element, dataPropertyName );

        if ( b && ( !eventType || b[ eventType ] ) ) {
            return element;
        }
        element = element.parentNode;
    }
    return null;
}

function enableTouchBindings() {
    blockTouchTriggers = false;
}

function disableTouchBindings() {
    blockTouchTriggers = true;
}

function enableMouseBindings() {
    lastTouchID = 0;
    clickBlockList.length = 0;
    blockMouseTriggers = false;

    // When mouse bindings are enabled, our
    // touch bindings are disabled.
    disableTouchBindings();
}

function disableMouseBindings() {
    // When mouse bindings are disabled, our
    // touch bindings are enabled.
    enableTouchBindings();
}

function startResetTimer() {
    clearResetTimer();
    resetTimerID = setTimeout( function() {
        resetTimerID = 0;
        enableMouseBindings();
    }, $.vmouse.resetTimerDuration );
}

function clearResetTimer() {
    if ( resetTimerID ) {
        clearTimeout( resetTimerID );
        resetTimerID = 0;
    }
}

function triggerVirtualEvent( eventType, event, flags ) {
    var ve;

    if ( ( flags && flags[ eventType ] ) ||
                ( !flags && getClosestElementWithVirtualBinding( event.target, eventType ) ) ) {

        ve = createVirtualEvent( event, eventType );

        $( event.target).trigger( ve );
    }

    return ve;
}

function mouseEventCallback( event ) {
    var touchID = $.data( event.target, touchTargetPropertyName ),
        ve;

    if ( !blockMouseTriggers && ( !lastTouchID || lastTouchID !== touchID ) ) {
        ve = triggerVirtualEvent( "v" + event.type, event );
        if ( ve ) {
            if ( ve.isDefaultPrevented() ) {
                event.preventDefault();
            }
            if ( ve.isPropagationStopped() ) {
                event.stopPropagation();
            }
            if ( ve.isImmediatePropagationStopped() ) {
                event.stopImmediatePropagation();
            }
        }
    }
}

function handleTouchStart( event ) {

    var touches = getNativeEvent( event ).touches,
        target, flags, t;

    if ( touches && touches.length === 1 ) {

        target = event.target;
        flags = getVirtualBindingFlags( target );

        if ( flags.hasVirtualBinding ) {

            lastTouchID = nextTouchID++;
            $.data( target, touchTargetPropertyName, lastTouchID );

            clearResetTimer();

            disableMouseBindings();
            didScroll = false;

            t = getNativeEvent( event ).touches[ 0 ];
            startX = t.pageX;
            startY = t.pageY;

            triggerVirtualEvent( "vmouseover", event, flags );
            triggerVirtualEvent( "vmousedown", event, flags );
        }
    }
}

function handleScroll( event ) {
    if ( blockTouchTriggers ) {
        return;
    }

    if ( !didScroll ) {
        triggerVirtualEvent( "vmousecancel", event, getVirtualBindingFlags( event.target ) );
    }

    didScroll = true;
    startResetTimer();
}

function handleTouchMove( event ) {
    if ( blockTouchTriggers ) {
        return;
    }

    var t = getNativeEvent( event ).touches[ 0 ],
        didCancel = didScroll,
        moveThreshold = $.vmouse.moveDistanceThreshold,
        flags = getVirtualBindingFlags( event.target );

        didScroll = didScroll ||
            ( Math.abs( t.pageX - startX ) > moveThreshold ||
                Math.abs( t.pageY - startY ) > moveThreshold );

    if ( didScroll && !didCancel ) {
        triggerVirtualEvent( "vmousecancel", event, flags );
    }

    triggerVirtualEvent( "vmousemove", event, flags );
    startResetTimer();
}

function handleTouchEnd( event ) {
    if ( blockTouchTriggers ) {
        return;
    }

    disableTouchBindings();

    var flags = getVirtualBindingFlags( event.target ),
        ve, t;
    triggerVirtualEvent( "vmouseup", event, flags );

    if ( !didScroll ) {
        ve = triggerVirtualEvent( "vclick", event, flags );
        if ( ve && ve.isDefaultPrevented() ) {
            // The target of the mouse events that follow the touchend
            // event don't necessarily match the target used during the
            // touch. This means we need to rely on coordinates for blocking
            // any click that is generated.
            t = getNativeEvent( event ).changedTouches[ 0 ];
            clickBlockList.push({
                touchID: lastTouchID,
                x: t.clientX,
                y: t.clientY
            });

            // Prevent any mouse events that follow from triggering
            // virtual event notifications.
            blockMouseTriggers = true;
        }
    }
    triggerVirtualEvent( "vmouseout", event, flags);
    didScroll = false;

    startResetTimer();
}

function hasVirtualBindings( ele ) {
    var bindings = $.data( ele, dataPropertyName ),
        k;

    if ( bindings ) {
        for ( k in bindings ) {
            if ( bindings[ k ] ) {
                return true;
            }
        }
    }
    return false;
}

function dummyMouseHandler() {}

function getSpecialEventObject( eventType ) {
    var realType = eventType.substr( 1 );

    return {
        setup: function(/* data, namespace */) {
            // If this is the first virtual mouse binding for this element,
            // add a bindings object to its data.

            if ( !hasVirtualBindings( this ) ) {
                $.data( this, dataPropertyName, {} );
            }

            // If setup is called, we know it is the first binding for this
            // eventType, so initialize the count for the eventType to zero.
            var bindings = $.data( this, dataPropertyName );
            bindings[ eventType ] = true;

            // If this is the first virtual mouse event for this type,
            // register a global handler on the document.

            activeDocHandlers[ eventType ] = ( activeDocHandlers[ eventType ] || 0 ) + 1;

            if ( activeDocHandlers[ eventType ] === 1 ) {
                $document.bind( realType, mouseEventCallback );
            }

            // Some browsers, like Opera Mini, won't dispatch mouse/click events
            // for elements unless they actually have handlers registered on them.
            // To get around this, we register dummy handlers on the elements.

            $( this ).bind( realType, dummyMouseHandler );

            // For now, if event capture is not supported, we rely on mouse handlers.
            if ( eventCaptureSupported ) {
                // If this is the first virtual mouse binding for the document,
                // register our touchstart handler on the document.

                activeDocHandlers[ "touchstart" ] = ( activeDocHandlers[ "touchstart" ] || 0) + 1;

                if ( activeDocHandlers[ "touchstart" ] === 1 ) {
                    $document.bind( "touchstart", handleTouchStart )
                        .bind( "touchend", handleTouchEnd )

                        // On touch platforms, touching the screen and then dragging your finger
                        // causes the window content to scroll after some distance threshold is
                        // exceeded. On these platforms, a scroll prevents a click event from being
                        // dispatched, and on some platforms, even the touchend is suppressed. To
                        // mimic the suppression of the click event, we need to watch for a scroll
                        // event. Unfortunately, some platforms like iOS don't dispatch scroll
                        // events until *AFTER* the user lifts their finger (touchend). This means
                        // we need to watch both scroll and touchmove events to figure out whether
                        // or not a scroll happenens before the touchend event is fired.

                        .bind( "touchmove", handleTouchMove )
                        .bind( "scroll", handleScroll );
                }
            }
        },

        teardown: function(/* data, namespace */) {
            // If this is the last virtual binding for this eventType,
            // remove its global handler from the document.

            --activeDocHandlers[ eventType ];

            if ( !activeDocHandlers[ eventType ] ) {
                $document.unbind( realType, mouseEventCallback );
            }

            if ( eventCaptureSupported ) {
                // If this is the last virtual mouse binding in existence,
                // remove our document touchstart listener.

                --activeDocHandlers[ "touchstart" ];

                if ( !activeDocHandlers[ "touchstart" ] ) {
                    $document.unbind( "touchstart", handleTouchStart )
                        .unbind( "touchmove", handleTouchMove )
                        .unbind( "touchend", handleTouchEnd )
                        .unbind( "scroll", handleScroll );
                }
            }

            var $this = $( this ),
                bindings = $.data( this, dataPropertyName );

            // teardown may be called when an element was
            // removed from the DOM. If this is the case,
            // jQuery core may have already stripped the element
            // of any data bindings so we need to check it before
            // using it.
            if ( bindings ) {
                bindings[ eventType ] = false;
            }

            // Unregister the dummy event handler.

            $this.unbind( realType, dummyMouseHandler );

            // If this is the last virtual mouse binding on the
            // element, remove the binding data from the element.

            if ( !hasVirtualBindings( this ) ) {
                $this.removeData( dataPropertyName );
            }
        }
    };
}

// Expose our custom events to the jQuery bind/unbind mechanism.

for ( i = 0; i < virtualEventNames.length; i++ ) {
    $.event.special[ virtualEventNames[ i ] ] = getSpecialEventObject( virtualEventNames[ i ] );
}

// Add a capture click handler to block clicks.
// Note that we require event capture support for this so if the device
// doesn't support it, we punt for now and rely solely on mouse events.
if ( eventCaptureSupported ) {
    document.addEventListener( "click", function( e ) {
        var cnt = clickBlockList.length,
            target = e.target,
            x, y, ele, i, o, touchID;

        if ( cnt ) {
            x = e.clientX;
            y = e.clientY;
            threshold = $.vmouse.clickDistanceThreshold;

            // The idea here is to run through the clickBlockList to see if
            // the current click event is in the proximity of one of our
            // vclick events that had preventDefault() called on it. If we find
            // one, then we block the click.
            //
            // Why do we have to rely on proximity?
            //
            // Because the target of the touch event that triggered the vclick
            // can be different from the target of the click event synthesized
            // by the browser. The target of a mouse/click event that is synthesized
            // from a touch event seems to be implementation specific. For example,
            // some browsers will fire mouse/click events for a link that is near
            // a touch event, even though the target of the touchstart/touchend event
            // says the user touched outside the link. Also, it seems that with most
            // browsers, the target of the mouse/click event is not calculated until the
            // time it is dispatched, so if you replace an element that you touched
            // with another element, the target of the mouse/click will be the new
            // element underneath that point.
            //
            // Aside from proximity, we also check to see if the target and any
            // of its ancestors were the ones that blocked a click. This is necessary
            // because of the strange mouse/click target calculation done in the
            // Android 2.1 browser, where if you click on an element, and there is a
            // mouse/click handler on one of its ancestors, the target will be the
            // innermost child of the touched element, even if that child is no where
            // near the point of touch.

            ele = target;

            while ( ele ) {
                for ( i = 0; i < cnt; i++ ) {
                    o = clickBlockList[ i ];
                    touchID = 0;

                    if ( ( ele === target && Math.abs( o.x - x ) < threshold && Math.abs( o.y - y ) < threshold ) ||
                                $.data( ele, touchTargetPropertyName ) === o.touchID ) {
                        // XXX: We may want to consider removing matches from the block list
                        //      instead of waiting for the reset timer to fire.
                        e.preventDefault();
                        e.stopPropagation();
                        return;
                    }
                }
                ele = ele.parentNode;
            }
        }
    }, true);
}
})( jQuery, window, document );


(function( $, window, undefined ) {
    var $document = $( document ),
        supportTouch = $.mobile.support.touch,
        scrollEvent = "touchmove scroll",
        touchStartEvent = supportTouch ? "touchstart" : "mousedown",
        touchStopEvent = supportTouch ? "touchend" : "mouseup",
        touchMoveEvent = supportTouch ? "touchmove" : "mousemove";

    // setup new event shortcuts
    $.each( ( "touchstart touchmove touchend " +
        "tap taphold " +
        "swipe swipeleft swiperight " +
        "scrollstart scrollstop" ).split( " " ), function( i, name ) {

        $.fn[ name ] = function( fn ) {
            return fn ? this.bind( name, fn ) : this.trigger( name );
        };

        // jQuery < 1.8
        if ( $.attrFn ) {
            $.attrFn[ name ] = true;
        }
    });

    function triggerCustomEvent( obj, eventType, event, bubble ) {
        var originalType = event.type;
        event.type = eventType;
        if ( bubble ) {
            $.event.trigger( event, undefined, obj );
        } else {
            $.event.dispatch.call( obj, event );
        }
        event.type = originalType;
    }

    // also handles scrollstop
    $.event.special.scrollstart = {

        enabled: true,
        setup: function() {

            var thisObject = this,
                $this = $( thisObject ),
                scrolling,
                timer;

            function trigger( event, state ) {
                scrolling = state;
                triggerCustomEvent( thisObject, scrolling ? "scrollstart" : "scrollstop", event );
            }

            // iPhone triggers scroll after a small delay; use touchmove instead
            $this.bind( scrollEvent, function( event ) {

                if ( !$.event.special.scrollstart.enabled ) {
                    return;
                }

                if ( !scrolling ) {
                    trigger( event, true );
                }

                clearTimeout( timer );
                timer = setTimeout( function() {
                    trigger( event, false );
                }, 50 );
            });
        },
        teardown: function() {
            $( this ).unbind( scrollEvent );
        }
    };

    // also handles taphold
    $.event.special.tap = {
        tapholdThreshold: 750,
        emitTapOnTaphold: true,
        setup: function() {
            var thisObject = this,
                $this = $( thisObject ),
                isTaphold = false;

            $this.bind( "vmousedown", function( event ) {
                isTaphold = false;
                if ( event.which && event.which !== 1 ) {
                    return false;
                }

                var origTarget = event.target,
                    timer;

                function clearTapTimer() {
                    clearTimeout( timer );
                }

                function clearTapHandlers() {
                    clearTapTimer();

                    $this.unbind( "vclick", clickHandler )
                        .unbind( "vmouseup", clearTapTimer );
                    $document.unbind( "vmousecancel", clearTapHandlers );
                }

                function clickHandler( event ) {
                    clearTapHandlers();

                    // ONLY trigger a 'tap' event if the start target is
                    // the same as the stop target.
                    if ( !isTaphold && origTarget === event.target ) {
                        triggerCustomEvent( thisObject, "tap", event );
                    } else if ( isTaphold ) {
                        event.preventDefault();
                    }
                }

                $this.bind( "vmouseup", clearTapTimer )
                    .bind( "vclick", clickHandler );
                $document.bind( "vmousecancel", clearTapHandlers );

                timer = setTimeout( function() {
                    if ( !$.event.special.tap.emitTapOnTaphold ) {
                        isTaphold = true;
                    }
                    triggerCustomEvent( thisObject, "taphold", $.Event( "taphold", { target: origTarget } ) );
                }, $.event.special.tap.tapholdThreshold );
            });
        },
        teardown: function() {
            $( this ).unbind( "vmousedown" ).unbind( "vclick" ).unbind( "vmouseup" );
            $document.unbind( "vmousecancel" );
        }
    };

    // Also handles swipeleft, swiperight
    $.event.special.swipe = {

        // More than this horizontal displacement, and we will suppress scrolling.
        scrollSupressionThreshold: 30,

        // More time than this, and it isn't a swipe.
        durationThreshold: 1000,

        // Swipe horizontal displacement must be more than this.
        horizontalDistanceThreshold: 30,

        // Swipe vertical displacement must be less than this.
        verticalDistanceThreshold: 30,

        getLocation: function ( event ) {
            var winPageX = window.pageXOffset,
                winPageY = window.pageYOffset,
                x = event.clientX,
                y = event.clientY;

            if ( event.pageY === 0 && Math.floor( y ) > Math.floor( event.pageY ) ||
                event.pageX === 0 && Math.floor( x ) > Math.floor( event.pageX ) ) {

                // iOS4 clientX/clientY have the value that should have been
                // in pageX/pageY. While pageX/page/ have the value 0
                x = x - winPageX;
                y = y - winPageY;
            } else if ( y < ( event.pageY - winPageY) || x < ( event.pageX - winPageX ) ) {

                // Some Android browsers have totally bogus values for clientX/Y
                // when scrolling/zooming a page. Detectable since clientX/clientY
                // should never be smaller than pageX/pageY minus page scroll
                x = event.pageX - winPageX;
                y = event.pageY - winPageY;
            }

            return {
                x: x,
                y: y
            };
        },

        start: function( event ) {
            var data = event.originalEvent.touches ?
                    event.originalEvent.touches[ 0 ] : event,
                location = $.event.special.swipe.getLocation( data );
            return {
                        time: ( new Date() ).getTime(),
                        coords: [ location.x, location.y ],
                        origin: $( event.target )
                    };
        },

        stop: function( event ) {
            var data = event.originalEvent.touches ?
                    event.originalEvent.touches[ 0 ] : event,
                location = $.event.special.swipe.getLocation( data );
            return {
                        time: ( new Date() ).getTime(),
                        coords: [ location.x, location.y ]
                    };
        },

        handleSwipe: function( start, stop, thisObject, origTarget ) {
            if ( stop.time - start.time < $.event.special.swipe.durationThreshold &&
                Math.abs( start.coords[ 0 ] - stop.coords[ 0 ] ) > $.event.special.swipe.horizontalDistanceThreshold &&
                Math.abs( start.coords[ 1 ] - stop.coords[ 1 ] ) < $.event.special.swipe.verticalDistanceThreshold ) {
                var direction = start.coords[0] > stop.coords[ 0 ] ? "swipeleft" : "swiperight";

                triggerCustomEvent( thisObject, "swipe", $.Event( "swipe", { target: origTarget, swipestart: start, swipestop: stop }), true );
                triggerCustomEvent( thisObject, direction,$.Event( direction, { target: origTarget, swipestart: start, swipestop: stop } ), true );
                return true;
            }
            return false;

        },

        // This serves as a flag to ensure that at most one swipe event event is
        // in work at any given time
        eventInProgress: false,

        setup: function() {
            var events,
                thisObject = this,
                $this = $( thisObject ),
                context = {};

            // Retrieve the events data for this element and add the swipe context
            events = $.data( this, "mobile-events" );
            if ( !events ) {
                events = { length: 0 };
                $.data( this, "mobile-events", events );
            }
            events.length++;
            events.swipe = context;

            context.start = function( event ) {

                // Bail if we're already working on a swipe event
                if ( $.event.special.swipe.eventInProgress ) {
                    return;
                }
                $.event.special.swipe.eventInProgress = true;

                var stop,
                    start = $.event.special.swipe.start( event ),
                    origTarget = event.target,
                    emitted = false;

                context.move = function( event ) {
                    if ( !start || event.isDefaultPrevented() ) {
                        return;
                    }

                    stop = $.event.special.swipe.stop( event );
                    if ( !emitted ) {
                        emitted = $.event.special.swipe.handleSwipe( start, stop, thisObject, origTarget );
                        if ( emitted ) {

                            // Reset the context to make way for the next swipe event
                            $.event.special.swipe.eventInProgress = false;
                        }
                    }
                    // prevent scrolling
                    if ( Math.abs( start.coords[ 0 ] - stop.coords[ 0 ] ) > $.event.special.swipe.scrollSupressionThreshold ) {
                        event.preventDefault();
                    }
                };

                context.stop = function() {
                        emitted = true;

                        // Reset the context to make way for the next swipe event
                        $.event.special.swipe.eventInProgress = false;
                        $document.off( touchMoveEvent, context.move );
                        context.move = null;
                };

                $document.on( touchMoveEvent, context.move )
                    .one( touchStopEvent, context.stop );
            };
            $this.on( touchStartEvent, context.start );
        },

        teardown: function() {
            var events, context;

            events = $.data( this, "mobile-events" );
            if ( events ) {
                context = events.swipe;
                delete events.swipe;
                events.length--;
                if ( events.length === 0 ) {
                    $.removeData( this, "mobile-events" );
                }
            }

            if ( context ) {
                if ( context.start ) {
                    $( this ).off( touchStartEvent, context.start );
                }
                if ( context.move ) {
                    $document.off( touchMoveEvent, context.move );
                }
                if ( context.stop ) {
                    $document.off( touchStopEvent, context.stop );
                }
            }
        }
    };
    $.each({
        scrollstop: "scrollstart",
        taphold: "tap",
        swipeleft: "swipe.left",
        swiperight: "swipe.right"
    }, function( event, sourceEvent ) {

        $.event.special[ event ] = {
            setup: function() {
                $( this ).bind( sourceEvent, $.noop );
            },
            teardown: function() {
                $( this ).unbind( sourceEvent );
            }
        };
    });

})( jQuery, this );


    // throttled resize event
    (function( $ ) {
        $.event.special.throttledresize = {
            setup: function() {
                $( this ).bind( "resize", handler );
            },
            teardown: function() {
                $( this ).unbind( "resize", handler );
            }
        };

        var throttle = 250,
            handler = function() {
                curr = ( new Date() ).getTime();
                diff = curr - lastCall;

                if ( diff >= throttle ) {

                    lastCall = curr;
                    $( this ).trigger( "throttledresize" );

                } else {

                    if ( heldCall ) {
                        clearTimeout( heldCall );
                    }

                    // Promise a held call will still execute
                    heldCall = setTimeout( handler, throttle - diff );
                }
            },
            lastCall = 0,
            heldCall,
            curr,
            diff;
    })( jQuery );


(function( $, window ) {
    var win = $( window ),
        event_name = "orientationchange",
        get_orientation,
        last_orientation,
        initial_orientation_is_landscape,
        initial_orientation_is_default,
        portrait_map = { "0": true, "180": true },
        ww, wh, landscape_threshold;

    // It seems that some device/browser vendors use window.orientation values 0 and 180 to
    // denote the "default" orientation. For iOS devices, and most other smart-phones tested,
    // the default orientation is always "portrait", but in some Android and RIM based tablets,
    // the default orientation is "landscape". The following code attempts to use the window
    // dimensions to figure out what the current orientation is, and then makes adjustments
    // to the to the portrait_map if necessary, so that we can properly decode the
    // window.orientation value whenever get_orientation() is called.
    //
    // Note that we used to use a media query to figure out what the orientation the browser
    // thinks it is in:
    //
    //     initial_orientation_is_landscape = $.mobile.media("all and (orientation: landscape)");
    //
    // but there was an iPhone/iPod Touch bug beginning with iOS 4.2, up through iOS 5.1,
    // where the browser *ALWAYS* applied the landscape media query. This bug does not
    // happen on iPad.

    if ( $.support.orientation ) {

        // Check the window width and height to figure out what the current orientation
        // of the device is at this moment. Note that we've initialized the portrait map
        // values to 0 and 180, *AND* we purposely check for landscape so that if we guess
        // wrong, , we default to the assumption that portrait is the default orientation.
        // We use a threshold check below because on some platforms like iOS, the iPhone
        // form-factor can report a larger width than height if the user turns on the
        // developer console. The actual threshold value is somewhat arbitrary, we just
        // need to make sure it is large enough to exclude the developer console case.

        ww = window.innerWidth || win.width();
        wh = window.innerHeight || win.height();
        landscape_threshold = 50;

        initial_orientation_is_landscape = ww > wh && ( ww - wh ) > landscape_threshold;

        // Now check to see if the current window.orientation is 0 or 180.
        initial_orientation_is_default = portrait_map[ window.orientation ];

        // If the initial orientation is landscape, but window.orientation reports 0 or 180, *OR*
        // if the initial orientation is portrait, but window.orientation reports 90 or -90, we
        // need to flip our portrait_map values because landscape is the default orientation for
        // this device/browser.
        if ( ( initial_orientation_is_landscape && initial_orientation_is_default ) || ( !initial_orientation_is_landscape && !initial_orientation_is_default ) ) {
            portrait_map = { "-90": true, "90": true };
        }
    }

    $.event.special.orientationchange = $.extend( {}, $.event.special.orientationchange, {
        setup: function() {
            // If the event is supported natively, return false so that jQuery
            // will bind to the event using DOM methods.
            if ( $.support.orientation && !$.event.special.orientationchange.disabled ) {
                return false;
            }

            // Get the current orientation to avoid initial double-triggering.
            last_orientation = get_orientation();

            // Because the orientationchange event doesn't exist, simulate the
            // event by testing window dimensions on resize.
            win.bind( "throttledresize", handler );
        },
        teardown: function() {
            // If the event is not supported natively, return false so that
            // jQuery will unbind the event using DOM methods.
            if ( $.support.orientation && !$.event.special.orientationchange.disabled ) {
                return false;
            }

            // Because the orientationchange event doesn't exist, unbind the
            // resize event handler.
            win.unbind( "throttledresize", handler );
        },
        add: function( handleObj ) {
            // Save a reference to the bound event handler.
            var old_handler = handleObj.handler;

            handleObj.handler = function( event ) {
                // Modify event object, adding the .orientation property.
                event.orientation = get_orientation();

                // Call the originally-bound event handler and return its result.
                return old_handler.apply( this, arguments );
            };
        }
    });

    // If the event is not supported natively, this handler will be bound to
    // the window resize event to simulate the orientationchange event.
    function handler() {
        // Get the current orientation.
        var orientation = get_orientation();

        if ( orientation !== last_orientation ) {
            // The orientation has changed, so trigger the orientationchange event.
            last_orientation = orientation;
            win.trigger( event_name );
        }
    }

    // Get the current page orientation. This method is exposed publicly, should it
    // be needed, as jQuery.event.special.orientationchange.orientation()
    $.event.special.orientationchange.orientation = get_orientation = function() {
        var isPortrait = true, elem = document.documentElement;

        // prefer window orientation to the calculation based on screensize as
        // the actual screen resize takes place before or after the orientation change event
        // has been fired depending on implementation (eg android 2.3 is before, iphone after).
        // More testing is required to determine if a more reliable method of determining the new screensize
        // is possible when orientationchange is fired. (eg, use media queries + element + opacity)
        if ( $.support.orientation ) {
            // if the window orientation registers as 0 or 180 degrees report
            // portrait, otherwise landscape
            isPortrait = portrait_map[ window.orientation ];
        } else {
            isPortrait = elem && elem.clientWidth / elem.clientHeight < 1.1;
        }

        return isPortrait ? "portrait" : "landscape";
    };

    $.fn[ event_name ] = function( fn ) {
        return fn ? this.bind( event_name, fn ) : this.trigger( event_name );
    };

    // jQuery < 1.8
    if ( $.attrFn ) {
        $.attrFn[ event_name ] = true;
    }

}( jQuery, this ));




(function( $, undefined ) {

    // existing base tag?
    var baseElement = $( "head" ).children( "base" ),

    // base element management, defined depending on dynamic base tag support
    // TODO move to external widget
    base = {

        // define base element, for use in routing asset urls that are referenced
        // in Ajax-requested markup
        element: ( baseElement.length ? baseElement :
            $( "<base>", { href: $.mobile.path.documentBase.hrefNoHash } ).prependTo( $( "head" ) ) ),

        linkSelector: "[src], link[href], a[rel='external'], :jqmData(ajax='false'), a[target]",

        // set the generated BASE element's href to a new page's base path
        set: function( href ) {

            // we should do nothing if the user wants to manage their url base
            // manually
            if ( !$.mobile.dynamicBaseEnabled ) {
                return;
            }

            // we should use the base tag if we can manipulate it dynamically
            if ( $.support.dynamicBaseTag ) {
                base.element.attr( "href",
                    $.mobile.path.makeUrlAbsolute( href, $.mobile.path.documentBase ) );
            }
        },

        rewrite: function( href, page ) {
            var newPath = $.mobile.path.get( href );

            page.find( base.linkSelector ).each(function( i, link ) {
                var thisAttr = $( link ).is( "[href]" ) ? "href" :
                    $( link ).is( "[src]" ) ? "src" : "action",
                theLocation = $.mobile.path.parseLocation(),
                thisUrl = $( link ).attr( thisAttr );

                // XXX_jblas: We need to fix this so that it removes the document
                //            base URL, and then prepends with the new page URL.
                // if full path exists and is same, chop it - helps IE out
                thisUrl = thisUrl.replace( theLocation.protocol + theLocation.doubleSlash +
                    theLocation.host + theLocation.pathname, "" );

                if ( !/^(\w+:|#|\/)/.test( thisUrl ) ) {
                    $( link ).attr( thisAttr, newPath + thisUrl );
                }
            });
        },

        // set the generated BASE element's href to a new page's base path
        reset: function(/* href */) {
            base.element.attr( "href", $.mobile.path.documentBase.hrefNoSearch );
        }
    };

    $.mobile.base = base;

})( jQuery );


(function( $, undefined ) {
$.mobile.widgets = {};

var originalWidget = $.widget,

    // Record the original, non-mobileinit-modified version of $.mobile.keepNative
    // so we can later determine whether someone has modified $.mobile.keepNative
    keepNativeFactoryDefault = $.mobile.keepNative;

$.widget = (function( orig ) {
    return function() {
        var constructor = orig.apply( this, arguments ),
            name = constructor.prototype.widgetName;

        constructor.initSelector = ( ( constructor.prototype.initSelector !== undefined ) ?
            constructor.prototype.initSelector : ":jqmData(role='" + name + "')" );

        $.mobile.widgets[ name ] = constructor;

        return constructor;
    };
})( $.widget );

// Make sure $.widget still has bridge and extend methods
$.extend( $.widget, originalWidget );

// For backcompat remove in 1.5
$.mobile.document.on( "create", function( event ) {
    $( event.target ).enhanceWithin();
});

$.widget( "mobile.page", {
    options: {
        theme: "a",
        domCache: false,

        // Deprecated in 1.4 remove in 1.5
        keepNativeDefault: $.mobile.keepNative,

        // Deprecated in 1.4 remove in 1.5
        contentTheme: null,
        enhanced: false
    },

    // DEPRECATED for > 1.4
    // TODO remove at 1.5
    _createWidget: function() {
        $.Widget.prototype._createWidget.apply( this, arguments );
        this._trigger( "init" );
    },

    _create: function() {
        // If false is returned by the callbacks do not create the page
        if ( this._trigger( "beforecreate" ) === false ) {
            return false;
        }

        if ( !this.options.enhanced ) {
            this._enhance();
        }

        this._on( this.element, {
            pagebeforehide: "removeContainerBackground",
            pagebeforeshow: "_handlePageBeforeShow"
        });

        this.element.enhanceWithin();
        // Dialog widget is deprecated in 1.4 remove this in 1.5
        if ( $.mobile.getAttribute( this.element[0], "role" ) === "dialog" && $.mobile.dialog ) {
            this.element.dialog();
        }
    },

    _enhance: function () {
        var attrPrefix = "data-" + $.mobile.ns,
            self = this;

        if ( this.options.role ) {
            this.element.attr( "data-" + $.mobile.ns + "role", this.options.role );
        }

        this.element
            .attr( "tabindex", "0" )
            .addClass( "ui-page ui-page-theme-" + this.options.theme );

        // Manipulation of content os Deprecated as of 1.4 remove in 1.5
        this.element.find( "[" + attrPrefix + "role='content']" ).each( function() {
            var $this = $( this ),
                theme = this.getAttribute( attrPrefix + "theme" ) || undefined;
                self.options.contentTheme = theme || self.options.contentTheme || ( self.options.dialog && self.options.theme ) || ( self.element.jqmData("role") === "dialog" &&  self.options.theme );
                $this.addClass( "ui-content" );
                if ( self.options.contentTheme ) {
                    $this.addClass( "ui-body-" + ( self.options.contentTheme ) );
                }
                // Add ARIA role
                $this.attr( "role", "main" ).addClass( "ui-content" );
        });
    },

    bindRemove: function( callback ) {
        var page = this.element;

        // when dom caching is not enabled or the page is embedded bind to remove the page on hide
        if ( !page.data( "mobile-page" ).options.domCache &&
            page.is( ":jqmData(external-page='true')" ) ) {

            // TODO use _on - that is, sort out why it doesn't work in this case
            page.bind( "pagehide.remove", callback || function( e, data ) {

                //check if this is a same page transition and if so don't remove the page
                if( !data.samePage ){
                    var $this = $( this ),
                        prEvent = new $.Event( "pageremove" );

                    $this.trigger( prEvent );

                    if ( !prEvent.isDefaultPrevented() ) {
                        $this.removeWithDependents();
                    }
                }
            });
        }
    },

    _setOptions: function( o ) {
        if ( o.theme !== undefined ) {
            this.element.removeClass( "ui-page-theme-" + this.options.theme ).addClass( "ui-page-theme-" + o.theme );
        }

        if ( o.contentTheme !== undefined ) {
            this.element.find( "[data-" + $.mobile.ns + "='content']" ).removeClass( "ui-body-" + this.options.contentTheme )
                .addClass( "ui-body-" + o.contentTheme );
        }
    },

    _handlePageBeforeShow: function(/* e */) {
        this.setContainerBackground();
    },
    // Deprecated in 1.4 remove in 1.5
    removeContainerBackground: function() {
        this.element.closest( ":mobile-pagecontainer" ).pagecontainer({ "theme": "none" });
    },
    // Deprecated in 1.4 remove in 1.5
    // set the page container background to the page theme
    setContainerBackground: function( theme ) {
        this.element.parent().pagecontainer( { "theme": theme || this.options.theme } );
    },
    // Deprecated in 1.4 remove in 1.5
    keepNativeSelector: function() {
        var options = this.options,
            keepNative = $.trim( options.keepNative || "" ),
            globalValue = $.trim( $.mobile.keepNative ),
            optionValue = $.trim( options.keepNativeDefault ),

            // Check if $.mobile.keepNative has changed from the factory default
            newDefault = ( keepNativeFactoryDefault === globalValue ?
                "" : globalValue ),

            // If $.mobile.keepNative has not changed, use options.keepNativeDefault
            oldDefault = ( newDefault === "" ? optionValue : "" );

        // Concatenate keepNative selectors from all sources where the value has
        // changed or, if nothing has changed, return the default
        return ( ( keepNative ? [ keepNative ] : [] )
            .concat( newDefault ? [ newDefault ] : [] )
            .concat( oldDefault ? [ oldDefault ] : [] )
            .join( ", " ) );
    }
});
})( jQuery );

(function( $, undefined ) {

    $.widget( "mobile.pagecontainer", {
        options: {
            theme: "a"
        },

        initSelector: false,

        _create: function() {
            this._trigger( "beforecreate" );
            this.setLastScrollEnabled = true;

            this._on( this.window, {
                // disable an scroll setting when a hashchange has been fired,
                // this only works because the recording of the scroll position
                // is delayed for 100ms after the browser might have changed the
                // position because of the hashchange
                navigate: "_disableRecordScroll",

                // bind to scrollstop for the first page, "pagechange" won't be
                // fired in that case
                scrollstop: "_delayedRecordScroll"
            });

            // TODO consider moving the navigation handler OUT of widget into
            //      some other object as glue between the navigate event and the
            //      content widget load and change methods
            this._on( this.window, { navigate: "_filterNavigateEvents" });

            // TODO move from page* events to content* events
            this._on({ pagechange: "_afterContentChange" });

            // handle initial hashchange from chrome :(
            this.window.one( "navigate", $.proxy(function() {
                this.setLastScrollEnabled = true;
            }, this));
        },

        _setOptions: function( options ) {
            if ( options.theme !== undefined && options.theme !== "none" ) {
                this.element.removeClass( "ui-overlay-" + this.options.theme )
                    .addClass( "ui-overlay-" + options.theme );
            } else if ( options.theme !== undefined ) {
                this.element.removeClass( "ui-overlay-" + this.options.theme );
            }

            this._super( options );
        },

        _disableRecordScroll: function() {
            this.setLastScrollEnabled = false;
        },

        _enableRecordScroll: function() {
            this.setLastScrollEnabled = true;
        },

        // TODO consider the name here, since it's purpose specific
        _afterContentChange: function() {
            // once the page has changed, re-enable the scroll recording
            this.setLastScrollEnabled = true;

            // remove any binding that previously existed on the get scroll
            // which may or may not be different than the scroll element
            // determined for this page previously
            this._off( this.window, "scrollstop" );

            // determine and bind to the current scoll element which may be the
            // window or in the case of touch overflow the element touch overflow
            this._on( this.window, { scrollstop: "_delayedRecordScroll" });
        },

        _recordScroll: function() {
            // this barrier prevents setting the scroll value based on
            // the browser scrolling the window based on a hashchange
            if ( !this.setLastScrollEnabled ) {
                return;
            }

            var active = this._getActiveHistory(),
                currentScroll, minScroll, defaultScroll;

            if ( active ) {
                currentScroll = this._getScroll();
                minScroll = this._getMinScroll();
                defaultScroll = this._getDefaultScroll();

                // Set active page's lastScroll prop. If the location we're
                // scrolling to is less than minScrollBack, let it go.
                active.lastScroll = currentScroll < minScroll ? defaultScroll : currentScroll;
            }
        },

        _delayedRecordScroll: function() {
            setTimeout( $.proxy(this, "_recordScroll"), 100 );
        },

        _getScroll: function() {
            return this.window.scrollTop();
        },

        _getMinScroll: function() {
            return $.mobile.minScrollBack;
        },

        _getDefaultScroll: function() {
            return $.mobile.defaultHomeScroll;
        },

        _filterNavigateEvents: function( e, data ) {
            var url;

            if ( e.originalEvent && e.originalEvent.isDefaultPrevented() ) {
                return;
            }

            url = e.originalEvent.type.indexOf( "hashchange" ) > -1 ? data.state.hash : data.state.url;

            if ( !url ) {
                url = this._getHash();
            }

            if ( !url || url === "#" || url.indexOf( "#" + $.mobile.path.uiStateKey ) === 0 ) {
                url = location.href;
            }

            this._handleNavigate( url, data.state );
        },

        _getHash: function() {
            return $.mobile.path.parseLocation().hash;
        },

        // TODO active page should be managed by the container (ie, it should be a property)
        getActivePage: function() {
            return this.activePage;
        },

        // TODO the first page should be a property set during _create using the logic
        //      that currently resides in init
        _getInitialContent: function() {
            return $.mobile.firstPage;
        },

        // TODO each content container should have a history object
        _getHistory: function() {
            return $.mobile.navigate.history;
        },

        _getActiveHistory: function() {
            return this._getHistory().getActive();
        },

        // TODO the document base should be determined at creation
        _getDocumentBase: function() {
            return $.mobile.path.documentBase;
        },

        back: function() {
            this.go( -1 );
        },

        forward: function() {
            this.go( 1 );
        },

        go: function( steps ) {

            //if hashlistening is enabled use native history method
            if ( $.mobile.hashListeningEnabled ) {
                window.history.go( steps );
            } else {

                //we are not listening to the hash so handle history internally
                var activeIndex = $.mobile.navigate.history.activeIndex,
                    index = activeIndex + parseInt( steps, 10 ),
                    url = $.mobile.navigate.history.stack[ index ].url,
                    direction = ( steps >= 1 )? "forward" : "back";

                //update the history object
                $.mobile.navigate.history.activeIndex = index;
                $.mobile.navigate.history.previousIndex = activeIndex;

                //change to the new page
                this.change( url, { direction: direction, changeHash: false, fromHashChange: true } );
            }
        },

        // TODO rename _handleDestination
        _handleDestination: function( to ) {
            var history;

            // clean the hash for comparison if it's a url
            if ( $.type(to) === "string" ) {
                to = $.mobile.path.stripHash( to );
            }

            if ( to ) {
                history = this._getHistory();

                // At this point, 'to' can be one of 3 things, a cached page
                // element from a history stack entry, an id, or site-relative /
                // absolute URL. If 'to' is an id, we need to resolve it against
                // the documentBase, not the location.href, since the hashchange
                // could've been the result of a forward/backward navigation
                // that crosses from an external page/dialog to an internal
                // page/dialog.
                //
                // TODO move check to history object or path object?
                to = !$.mobile.path.isPath( to ) ? ( $.mobile.path.makeUrlAbsolute( "#" + to, this._getDocumentBase() ) ) : to;
            }
            return to || this._getInitialContent();
        },

        _transitionFromHistory: function( direction, defaultTransition ) {
            var history = this._getHistory(),
                entry = ( direction === "back" ? history.getLast() : history.getActive() );

            return ( entry && entry.transition ) || defaultTransition;
        },

        _handleDialog: function( changePageOptions, data ) {
            var to, active, activeContent = this.getActivePage();

            // If current active page is not a dialog skip the dialog and continue
            // in the same direction
            // Note: The dialog widget is deprecated as of 1.4.0 and will be removed in 1.5.0.
            // Thus, as of 1.5.0 activeContent.data( "mobile-dialog" ) will always evaluate to
            // falsy, so the second condition in the if-statement below can be removed altogether.
            if ( activeContent && !activeContent.data( "mobile-dialog" ) ) {
                // determine if we're heading forward or backward and continue
                // accordingly past the current dialog
                if ( data.direction === "back" ) {
                    this.back();
                } else {
                    this.forward();
                }

                // prevent changePage call
                return false;
            } else {
                // if the current active page is a dialog and we're navigating
                // to a dialog use the dialog objected saved in the stack
                to = data.pageUrl;
                active = this._getActiveHistory();

                // make sure to set the role, transition and reversal
                // as most of this is lost by the domCache cleaning
                $.extend( changePageOptions, {
                    role: active.role,
                    transition: this._transitionFromHistory(
                        data.direction,
                        changePageOptions.transition ),
                    reverse: data.direction === "back"
                });
            }

            return to;
        },

        _handleNavigate: function( url, data ) {
            //find first page via hash
            // TODO stripping the hash twice with handleUrl
            var to = $.mobile.path.stripHash( url ), history = this._getHistory(),

                // transition is false if it's the first page, undefined
                // otherwise (and may be overridden by default)
                transition = history.stack.length === 0 ? "none" :
                    this._transitionFromHistory( data.direction ),

                // default options for the changPage calls made after examining
                // the current state of the page and the hash, NOTE that the
                // transition is derived from the previous history entry
                changePageOptions = {
                    changeHash: false,
                    fromHashChange: true,
                    reverse: data.direction === "back"
                };

            $.extend( changePageOptions, data, {
                transition: transition
            });

            // TODO move to _handleDestination ?
            // If this isn't the first page, if the current url is a dialog hash
            // key, and the initial destination isn't equal to the current target
            // page, use the special dialog handling
            if ( history.activeIndex > 0 &&
                to.indexOf( $.mobile.dialogHashKey ) > -1 ) {

                to = this._handleDialog( changePageOptions, data );

                if ( to === false ) {
                    return;
                }
            }

            this._changeContent( this._handleDestination( to ), changePageOptions );
        },

        _changeContent: function( to, opts ) {
            $.mobile.changePage( to, opts );
        },

        _getBase: function() {
            return $.mobile.base;
        },

        _getNs: function() {
            return $.mobile.ns;
        },

        _enhance: function( content, role ) {
            // TODO consider supporting a custom callback, and passing in
            // the settings which includes the role
            return content.page({ role: role });
        },

        _include: function( page, settings ) {
            // append to page and enhance
            page.appendTo( this.element );

            // use the page widget to enhance
            this._enhance( page, settings.role );

            // remove page on hide
            page.page( "bindRemove" );
        },

        _find: function( absUrl ) {
            // TODO consider supporting a custom callback
            var fileUrl = this._createFileUrl( absUrl ),
                dataUrl = this._createDataUrl( absUrl ),
                page, initialContent = this._getInitialContent();

            // Check to see if the page already exists in the DOM.
            // NOTE do _not_ use the :jqmData pseudo selector because parenthesis
            //      are a valid url char and it breaks on the first occurence
            page = this.element
                .children( "[data-" + this._getNs() +
                    "url='" + $.mobile.path.hashToSelector( dataUrl ) + "']" );

            // If we failed to find the page, check to see if the url is a
            // reference to an embedded page. If so, it may have been dynamically
            // injected by a developer, in which case it would be lacking a
            // data-url attribute and in need of enhancement.
            if ( page.length === 0 && dataUrl && !$.mobile.path.isPath( dataUrl ) ) {
                page = this.element.children( $.mobile.path.hashToSelector("#" + dataUrl) )
                    .attr( "data-" + this._getNs() + "url", dataUrl )
                    .jqmData( "url", dataUrl );
            }

            // If we failed to find a page in the DOM, check the URL to see if it
            // refers to the first page in the application. Also check to make sure
            // our cached-first-page is actually in the DOM. Some user deployed
            // apps are pruning the first page from the DOM for various reasons.
            // We check for this case here because we don't want a first-page with
            // an id falling through to the non-existent embedded page error case.
            if ( page.length === 0 &&
                $.mobile.path.isFirstPageUrl( fileUrl ) &&
                initialContent &&
                initialContent.parent().length ) {
                page = $( initialContent );
            }

            return page;
        },

        _getLoader: function() {
            return $.mobile.loading();
        },

        _showLoading: function( delay, theme, msg, textonly ) {
            // This configurable timeout allows cached pages a brief
            // delay to load without showing a message
            if ( this._loadMsg ) {
                return;
            }

            this._loadMsg = setTimeout($.proxy(function() {
                this._getLoader().loader( "show", theme, msg, textonly );
                this._loadMsg = 0;
            }, this), delay );
        },

        _hideLoading: function() {
            // Stop message show timer
            clearTimeout( this._loadMsg );
            this._loadMsg = 0;

            // Hide loading message
            this._getLoader().loader( "hide" );
        },

        _showError: function() {
            // make sure to remove the current loading message
            this._hideLoading();

            // show the error message
            this._showLoading( 0, $.mobile.pageLoadErrorMessageTheme, $.mobile.pageLoadErrorMessage, true );

            // hide the error message after a delay
            // TODO configuration
            setTimeout( $.proxy(this, "_hideLoading"), 1500 );
        },

        _parse: function( html, fileUrl ) {
            // TODO consider allowing customization of this method. It's very JQM specific
            var page, all = $( "<div></div>" );

            //workaround to allow scripts to execute when included in page divs
            all.get( 0 ).innerHTML = html;

            page = all.find( ":jqmData(role='page'), :jqmData(role='dialog')" ).first();

            //if page elem couldn't be found, create one and insert the body element's contents
            if ( !page.length ) {
                page = $( "<div data-" + this._getNs() + "role='page'>" +
                    ( html.split( /<\/?body[^>]*>/gmi )[1] || "" ) +
                    "</div>" );
            }

            // TODO tagging a page with external to make sure that embedded pages aren't
            // removed by the various page handling code is bad. Having page handling code
            // in many places is bad. Solutions post 1.0
            page.attr( "data-" + this._getNs() + "url", this._createDataUrl( fileUrl ) )
                .attr( "data-" + this._getNs() + "external-page", true );

            return page;
        },

        _setLoadedTitle: function( page, html ) {
            //page title regexp
            var newPageTitle = html.match( /<title[^>]*>([^<]*)/ ) && RegExp.$1;

            if ( newPageTitle && !page.jqmData("title") ) {
                newPageTitle = $( "<div>" + newPageTitle + "</div>" ).text();
                page.jqmData( "title", newPageTitle );
            }
        },

        _isRewritableBaseTag: function() {
            return $.mobile.dynamicBaseEnabled && !$.support.dynamicBaseTag;
        },

        _createDataUrl: function( absoluteUrl ) {
            return $.mobile.path.convertUrlToDataUrl( absoluteUrl );
        },

        _createFileUrl: function( absoluteUrl ) {
            return $.mobile.path.getFilePath( absoluteUrl );
        },

        _triggerWithDeprecated: function( name, data, page ) {
            var deprecatedEvent = $.Event( "page" + name ),
                newEvent = $.Event( this.widgetName + name );

            // DEPRECATED
            // trigger the old deprecated event on the page if it's provided
            ( page || this.element ).trigger( deprecatedEvent, data );

            // use the widget trigger method for the new content* event
            this._trigger( name, newEvent, data );

            return {
                deprecatedEvent: deprecatedEvent,
                event: newEvent
            };
        },

        // TODO it would be nice to split this up more but everything appears to be "one off"
        //      or require ordering such that other bits are sprinkled in between parts that
        //      could be abstracted out as a group
        _loadSuccess: function( absUrl, triggerData, settings, deferred ) {
            var fileUrl = this._createFileUrl( absUrl );

            return $.proxy(function( html, textStatus, xhr ) {
                //pre-parse html to check for a data-url,
                //use it as the new fileUrl, base path, etc
                var content,

                    // TODO handle dialogs again
                    pageElemRegex = new RegExp( "(<[^>]+\\bdata-" + this._getNs() + "role=[\"']?page[\"']?[^>]*>)" ),

                    dataUrlRegex = new RegExp( "\\bdata-" + this._getNs() + "url=[\"']?([^\"'>]*)[\"']?" );

                // data-url must be provided for the base tag so resource requests
                // can be directed to the correct url. loading into a temprorary
                // element makes these requests immediately
                if ( pageElemRegex.test( html ) &&
                    RegExp.$1 &&
                    dataUrlRegex.test( RegExp.$1 ) &&
                    RegExp.$1 ) {
                    fileUrl = $.mobile.path.getFilePath( $("<div>" + RegExp.$1 + "</div>").text() );

                    // We specify that, if a data-url attribute is given on the page div, its value
                    // must be given non-URL-encoded. However, in this part of the code, fileUrl is
                    // assumed to be URL-encoded, so we URL-encode the retrieved value here
                    fileUrl = this.window[ 0 ].encodeURIComponent( fileUrl );
                }

                //dont update the base tag if we are prefetching
                if ( settings.prefetch === undefined ) {
                    this._getBase().set( fileUrl );
                }

                content = this._parse( html, fileUrl );

                this._setLoadedTitle( content, html );

                // Add the content reference and xhr to our triggerData.
                triggerData.xhr = xhr;
                triggerData.textStatus = textStatus;

                // DEPRECATED
                triggerData.page = content;

                triggerData.content = content;

                triggerData.toPage = content;

                // If the default behavior is prevented, stop here!
                // Note that it is the responsibility of the listener/handler
                // that called preventDefault(), to resolve/reject the
                // deferred object within the triggerData.
                if ( this._triggerWithDeprecated( "load", triggerData ).event.isDefaultPrevented() ) {
                    return;
                }

                // rewrite src and href attrs to use a base url if the base tag won't work
                if ( this._isRewritableBaseTag() && content ) {
                    this._getBase().rewrite( fileUrl, content );
                }

                this._include( content, settings );

                // Remove loading message.
                if ( settings.showLoadMsg ) {
                    this._hideLoading();
                }

                deferred.resolve( absUrl, settings, content );
            }, this);
        },

        _loadDefaults: {
            type: "get",
            data: undefined,

            // DEPRECATED
            reloadPage: false,

            reload: false,

            // By default we rely on the role defined by the @data-role attribute.
            role: undefined,

            showLoadMsg: false,

            // This delay allows loads that pull from browser cache to
            // occur without showing the loading message.
            loadMsgDelay: 50
        },

        load: function( url, options ) {
            // This function uses deferred notifications to let callers
            // know when the content is done loading, or if an error has occurred.
            var deferred = ( options && options.deferred ) || $.Deferred(),

                // Examining the option "reloadPage" passed by the user is deprecated as of 1.4.0
                // and will be removed in 1.5.0.
                // Copy option "reloadPage" to "reload", but only if option "reload" is not present
                reloadOptionExtension =
                    ( ( options && options.reload === undefined &&
                        options.reloadPage !== undefined ) ?
                            { reload: options.reloadPage } : {} ),

                // The default load options with overrides specified by the caller.
                settings = $.extend( {}, this._loadDefaults, options, reloadOptionExtension ),

                // The DOM element for the content after it has been loaded.
                content = null,

                // The absolute version of the URL passed into the function. This
                // version of the URL may contain dialog/subcontent params in it.
                absUrl = $.mobile.path.makeUrlAbsolute( url, this._findBaseWithDefault() ),
                fileUrl, dataUrl, pblEvent, triggerData;

            // If the caller provided data, and we're using "get" request,
            // append the data to the URL.
            if ( settings.data && settings.type === "get" ) {
                absUrl = $.mobile.path.addSearchParams( absUrl, settings.data );
                settings.data = undefined;
            }

            // If the caller is using a "post" request, reload must be true
            if ( settings.data && settings.type === "post" ) {
                settings.reload = true;
            }

            // The absolute version of the URL minus any dialog/subcontent params.
            // In otherwords the real URL of the content to be loaded.
            fileUrl = this._createFileUrl( absUrl );

            // The version of the Url actually stored in the data-url attribute of
            // the content. For embedded content, it is just the id of the page. For
            // content within the same domain as the document base, it is the site
            // relative path. For cross-domain content (Phone Gap only) the entire
            // absolute Url is used to load the content.
            dataUrl = this._createDataUrl( absUrl );

            content = this._find( absUrl );

            // If it isn't a reference to the first content and refers to missing
            // embedded content reject the deferred and return
            if ( content.length === 0 &&
                $.mobile.path.isEmbeddedPage(fileUrl) &&
                !$.mobile.path.isFirstPageUrl(fileUrl) ) {
                deferred.reject( absUrl, settings );
                return deferred.promise();
            }

            // Reset base to the default document base
            // TODO figure out why we doe this
            this._getBase().reset();

            // If the content we are interested in is already in the DOM,
            // and the caller did not indicate that we should force a
            // reload of the file, we are done. Resolve the deferrred so that
            // users can bind to .done on the promise
            if ( content.length && !settings.reload ) {
                this._enhance( content, settings.role );
                deferred.resolve( absUrl, settings, content );

                //if we are reloading the content make sure we update
                // the base if its not a prefetch
                if ( !settings.prefetch ) {
                    this._getBase().set(url);
                }

                return deferred.promise();
            }

            triggerData = {
                url: url,
                absUrl: absUrl,
                toPage: url,
                prevPage: options ? options.fromPage : undefined,
                dataUrl: dataUrl,
                deferred: deferred,
                options: settings
            };

            // Let listeners know we're about to load content.
            pblEvent = this._triggerWithDeprecated( "beforeload", triggerData );

            // If the default behavior is prevented, stop here!
            if ( pblEvent.deprecatedEvent.isDefaultPrevented() ||
                pblEvent.event.isDefaultPrevented() ) {
                return deferred.promise();
            }

            if ( settings.showLoadMsg ) {
                this._showLoading( settings.loadMsgDelay );
            }

            // Reset base to the default document base.
            // only reset if we are not prefetching
            if ( settings.prefetch === undefined ) {
                this._getBase().reset();
            }

            if ( !( $.mobile.allowCrossDomainPages ||
                $.mobile.path.isSameDomain($.mobile.path.documentUrl, absUrl ) ) ) {
                deferred.reject( absUrl, settings );
                return deferred.promise();
            }

            // Load the new content.
            $.ajax({
                url: fileUrl,
                type: settings.type,
                data: settings.data,
                contentType: settings.contentType,
                dataType: "html",
                success: this._loadSuccess( absUrl, triggerData, settings, deferred ),
                error: this._loadError( absUrl, triggerData, settings, deferred )
            });

            return deferred.promise();
        },

        _loadError: function( absUrl, triggerData, settings, deferred ) {
            return $.proxy(function( xhr, textStatus, errorThrown ) {
                //set base back to current path
                this._getBase().set( $.mobile.path.get() );

                // Add error info to our triggerData.
                triggerData.xhr = xhr;
                triggerData.textStatus = textStatus;
                triggerData.errorThrown = errorThrown;

                // Let listeners know the page load failed.
                var plfEvent = this._triggerWithDeprecated( "loadfailed", triggerData );

                // If the default behavior is prevented, stop here!
                // Note that it is the responsibility of the listener/handler
                // that called preventDefault(), to resolve/reject the
                // deferred object within the triggerData.
                if ( plfEvent.deprecatedEvent.isDefaultPrevented() ||
                    plfEvent.event.isDefaultPrevented() ) {
                    return;
                }

                // Remove loading message.
                if ( settings.showLoadMsg ) {
                    this._showError();
                }

                deferred.reject( absUrl, settings );
            }, this);
        },

        _getTransitionHandler: function( transition ) {
            transition = $.mobile._maybeDegradeTransition( transition );

            //find the transition handler for the specified transition. If there
            //isn't one in our transitionHandlers dictionary, use the default one.
            //call the handler immediately to kick-off the transition.
            return $.mobile.transitionHandlers[ transition ] || $.mobile.defaultTransitionHandler;
        },

        // TODO move into transition handlers?
        _triggerCssTransitionEvents: function( to, from, prefix ) {
            var samePage = false;

            prefix = prefix || "";

            // TODO decide if these events should in fact be triggered on the container
            if ( from ) {

                //Check if this is a same page transition and tell the handler in page
                if( to[0] === from[0] ){
                    samePage = true;
                }

                //trigger before show/hide events
                // TODO deprecate nextPage in favor of next
                this._triggerWithDeprecated( prefix + "hide", {

                    // Deprecated in 1.4 remove in 1.5
                    nextPage: to,
                    toPage: to,
                    prevPage: from,
                    samePage: samePage
                }, from );
            }

            // TODO deprecate prevPage in favor of previous
            this._triggerWithDeprecated( prefix + "show", {
                prevPage: from || $( "" ),
                toPage: to
            }, to );
        },

        // TODO make private once change has been defined in the widget
        _cssTransition: function( to, from, options ) {
            var transition = options.transition,
                reverse = options.reverse,
                deferred = options.deferred,
                TransitionHandler,
                promise;

            this._triggerCssTransitionEvents( to, from, "before" );

            // TODO put this in a binding to events *outside* the widget
            this._hideLoading();

            TransitionHandler = this._getTransitionHandler( transition );

            promise = ( new TransitionHandler( transition, reverse, to, from ) ).transition();

            promise.done( $.proxy( function() {
                this._triggerCssTransitionEvents( to, from );
            }, this ));

            // TODO temporary accomodation of argument deferred
            promise.done(function() {
                deferred.resolve.apply( deferred, arguments );
            });
        },

        _releaseTransitionLock: function() {
            //release transition lock so navigation is free again
            isPageTransitioning = false;
            if ( pageTransitionQueue.length > 0 ) {
                $.mobile.changePage.apply( null, pageTransitionQueue.pop() );
            }
        },

        _removeActiveLinkClass: function( force ) {
            //clear out the active button state
            $.mobile.removeActiveLinkClass( force );
        },

        _loadUrl: function( to, triggerData, settings ) {
            // preserve the original target as the dataUrl value will be
            // simplified eg, removing ui-state, and removing query params
            // from the hash this is so that users who want to use query
            // params have access to them in the event bindings for the page
            // life cycle See issue #5085
            settings.target = to;
            settings.deferred = $.Deferred();

            this.load( to, settings );

            settings.deferred.done($.proxy(function( url, options, content ) {
                isPageTransitioning = false;

                // store the original absolute url so that it can be provided
                // to events in the triggerData of the subsequent changePage call
                options.absUrl = triggerData.absUrl;

                this.transition( content, triggerData, options );
            }, this));

            settings.deferred.fail($.proxy(function(/* url, options */) {
                this._removeActiveLinkClass( true );
                this._releaseTransitionLock();
                this._triggerWithDeprecated( "changefailed", triggerData );
            }, this));
        },

        _triggerPageBeforeChange: function( to, triggerData, settings ) {
            var returnEvents;

            triggerData.prevPage = this.activePage;
            $.extend( triggerData, {
                toPage: to,
                options: settings
            });

            // NOTE: preserve the original target as the dataUrl value will be
            // simplified eg, removing ui-state, and removing query params from
            // the hash this is so that users who want to use query params have
            // access to them in the event bindings for the page life cycle
            // See issue #5085
            if ( $.type(to) === "string" ) {
                // if the toPage is a string simply convert it
                triggerData.absUrl = $.mobile.path.makeUrlAbsolute( to, this._findBaseWithDefault() );
            } else {
                // if the toPage is a jQuery object grab the absolute url stored
                // in the loadPage callback where it exists
                triggerData.absUrl = settings.absUrl;
            }

            // Let listeners know we're about to change the current page.
            returnEvents = this._triggerWithDeprecated( "beforechange", triggerData );

            // If the default behavior is prevented, stop here!
            if ( returnEvents.event.isDefaultPrevented() ||
                returnEvents.deprecatedEvent.isDefaultPrevented() ) {
                return false;
            }

            return true;
        },

        change: function( to, options ) {
            // If we are in the midst of a transition, queue the current request.
            // We'll call changePage() once we're done with the current transition
            // to service the request.
            if ( isPageTransitioning ) {
                pageTransitionQueue.unshift( arguments );
                return;
            }

            var settings = $.extend( {}, $.mobile.changePage.defaults, options ),
                triggerData = {};

            // Make sure we have a fromPage.
            settings.fromPage = settings.fromPage || this.activePage;

            // if the page beforechange default is prevented return early
            if ( !this._triggerPageBeforeChange(to, triggerData, settings) ) {
                return;
            }

            // We allow "pagebeforechange" observers to modify the to in
            // the trigger data to allow for redirects. Make sure our to is
            // updated. We also need to re-evaluate whether it is a string,
            // because an object can also be replaced by a string
            to = triggerData.toPage;

            // If the caller passed us a url, call loadPage()
            // to make sure it is loaded into the DOM. We'll listen
            // to the promise object it returns so we know when
            // it is done loading or if an error ocurred.
            if ( $.type(to) === "string" ) {
                // Set the isPageTransitioning flag to prevent any requests from
                // entering this method while we are in the midst of loading a page
                // or transitioning.
                isPageTransitioning = true;

                this._loadUrl( to, triggerData, settings );
            } else {
                this.transition( to, triggerData, settings );
            }
        },

        transition: function( toPage, triggerData, settings ) {
            var fromPage, url, pageUrl, fileUrl,
                active, activeIsInitialPage,
                historyDir, pageTitle, isDialog,
                alreadyThere, newPageTitle,
                params,    cssTransitionDeferred,
                beforeTransition;

            // If we are in the midst of a transition, queue the current request.
            // We'll call changePage() once we're done with the current transition
            // to service the request.
            if ( isPageTransitioning ) {
                // make sure to only queue the to and settings values so the arguments
                // work with a call to the change method
                pageTransitionQueue.unshift( [toPage, settings] );
                return;
            }

            // DEPRECATED - this call only, in favor of the before transition
            // if the page beforechange default is prevented return early
            if ( !this._triggerPageBeforeChange(toPage, triggerData, settings) ) {
                return;
            }

            triggerData.prevPage = settings.fromPage;
            // if the (content|page)beforetransition default is prevented return early
            // Note, we have to check for both the deprecated and new events
            beforeTransition = this._triggerWithDeprecated( "beforetransition", triggerData );
            if (beforeTransition.deprecatedEvent.isDefaultPrevented() ||
                beforeTransition.event.isDefaultPrevented() ) {
                return;
            }

            // Set the isPageTransitioning flag to prevent any requests from
            // entering this method while we are in the midst of loading a page
            // or transitioning.
            isPageTransitioning = true;

            // If we are going to the first-page of the application, we need to make
            // sure settings.dataUrl is set to the application document url. This allows
            // us to avoid generating a document url with an id hash in the case where the
            // first-page of the document has an id attribute specified.
            if ( toPage[ 0 ] === $.mobile.firstPage[ 0 ] && !settings.dataUrl ) {
                settings.dataUrl = $.mobile.path.documentUrl.hrefNoHash;
            }

            // The caller passed us a real page DOM element. Update our
            // internal state and then trigger a transition to the page.
            fromPage = settings.fromPage;
            url = ( settings.dataUrl && $.mobile.path.convertUrlToDataUrl(settings.dataUrl) ) ||
                toPage.jqmData( "url" );

            // The pageUrl var is usually the same as url, except when url is obscured
            // as a dialog url. pageUrl always contains the file path
            pageUrl = url;
            fileUrl = $.mobile.path.getFilePath( url );
            active = $.mobile.navigate.history.getActive();
            activeIsInitialPage = $.mobile.navigate.history.activeIndex === 0;
            historyDir = 0;
            pageTitle = document.title;
            isDialog = ( settings.role === "dialog" ||
                toPage.jqmData( "role" ) === "dialog" ) &&
                toPage.jqmData( "dialog" ) !== true;

            // By default, we prevent changePage requests when the fromPage and toPage
            // are the same element, but folks that generate content
            // manually/dynamically and reuse pages want to be able to transition to
            // the same page. To allow this, they will need to change the default
            // value of allowSamePageTransition to true, *OR*, pass it in as an
            // option when they manually call changePage(). It should be noted that
            // our default transition animations assume that the formPage and toPage
            // are different elements, so they may behave unexpectedly. It is up to
            // the developer that turns on the allowSamePageTransitiona option to
            // either turn off transition animations, or make sure that an appropriate
            // animation transition is used.
            if ( fromPage && fromPage[0] === toPage[0] &&
                !settings.allowSamePageTransition ) {

                isPageTransitioning = false;
                this._triggerWithDeprecated( "transition", triggerData );
                this._triggerWithDeprecated( "change", triggerData );

                // Even if there is no page change to be done, we should keep the
                // urlHistory in sync with the hash changes
                if ( settings.fromHashChange ) {
                    $.mobile.navigate.history.direct({ url: url });
                }

                return;
            }

            // We need to make sure the page we are given has already been enhanced.
            toPage.page({ role: settings.role });

            // If the changePage request was sent from a hashChange event, check to
            // see if the page is already within the urlHistory stack. If so, we'll
            // assume the user hit the forward/back button and will try to match the
            // transition accordingly.
            if ( settings.fromHashChange ) {
                historyDir = settings.direction === "back" ? -1 : 1;
            }

            // Kill the keyboard.
            // XXX_jblas: We need to stop crawling the entire document to kill focus.
            //            Instead, we should be tracking focus with a delegate()
            //            handler so we already have the element in hand at this
            //            point.
            // Wrap this in a try/catch block since IE9 throw "Unspecified error" if
            // document.activeElement is undefined when we are in an IFrame.
            try {
                if ( document.activeElement &&
                    document.activeElement.nodeName.toLowerCase() !== "body" ) {

                    $( document.activeElement ).blur();
                } else {
                    $( "input:focus, textarea:focus, select:focus" ).blur();
                }
            } catch( e ) {}

            // Record whether we are at a place in history where a dialog used to be -
            // if so, do not add a new history entry and do not change the hash either
            alreadyThere = false;

            // If we're displaying the page as a dialog, we don't want the url
            // for the dialog content to be used in the hash. Instead, we want
            // to append the dialogHashKey to the url of the current page.
            if ( isDialog && active ) {
                // on the initial page load active.url is undefined and in that case
                // should be an empty string. Moving the undefined -> empty string back
                // into urlHistory.addNew seemed imprudent given undefined better
                // represents the url state

                // If we are at a place in history that once belonged to a dialog, reuse
                // this state without adding to urlHistory and without modifying the
                // hash. However, if a dialog is already displayed at this point, and
                // we're about to display another dialog, then we must add another hash
                // and history entry on top so that one may navigate back to the
                // original dialog
                if ( active.url &&
                    active.url.indexOf( $.mobile.dialogHashKey ) > -1 &&
                    this.activePage &&
                    !this.activePage.hasClass( "ui-dialog" ) &&
                    $.mobile.navigate.history.activeIndex > 0 ) {

                    settings.changeHash = false;
                    alreadyThere = true;
                }

                // Normally, we tack on a dialog hash key, but if this is the location
                // of a stale dialog, we reuse the URL from the entry
                url = ( active.url || "" );

                // account for absolute urls instead of just relative urls use as hashes
                if ( !alreadyThere && url.indexOf("#") > -1 ) {
                    url += $.mobile.dialogHashKey;
                } else {
                    url += "#" + $.mobile.dialogHashKey;
                }
            }

            // if title element wasn't found, try the page div data attr too
            // If this is a deep-link or a reload ( active === undefined ) then just
            // use pageTitle
            newPageTitle = ( !active ) ? pageTitle : toPage.jqmData( "title" ) ||
                toPage.children( ":jqmData(role='header')" ).find( ".ui-title" ).text();
            if ( !!newPageTitle && pageTitle === document.title ) {
                pageTitle = newPageTitle;
            }
            if ( !toPage.jqmData( "title" ) ) {
                toPage.jqmData( "title", pageTitle );
            }

            // Make sure we have a transition defined.
            settings.transition = settings.transition ||
                ( ( historyDir && !activeIsInitialPage ) ? active.transition : undefined ) ||
                ( isDialog ? $.mobile.defaultDialogTransition : $.mobile.defaultPageTransition );

            //add page to history stack if it's not back or forward
            if ( !historyDir && alreadyThere ) {
                $.mobile.navigate.history.getActive().pageUrl = pageUrl;
            }

            // Set the location hash.
            if ( url && !settings.fromHashChange ) {

                // rebuilding the hash here since we loose it earlier on
                // TODO preserve the originally passed in path
                if ( !$.mobile.path.isPath( url ) && url.indexOf( "#" ) < 0 ) {
                    url = "#" + url;
                }

                // TODO the property names here are just silly
                params = {
                    transition: settings.transition,
                    title: pageTitle,
                    pageUrl: pageUrl,
                    role: settings.role
                };

                if ( settings.changeHash !== false && $.mobile.hashListeningEnabled ) {
                    $.mobile.navigate( this.window[ 0 ].encodeURI( url ), params, true);
                } else if ( toPage[ 0 ] !== $.mobile.firstPage[ 0 ] ) {
                    $.mobile.navigate.history.add( url, params );
                }
            }

            //set page title
            document.title = pageTitle;

            //set "toPage" as activePage deprecated in 1.4 remove in 1.5
            $.mobile.activePage = toPage;

            //new way to handle activePage
            this.activePage = toPage;

            // If we're navigating back in the URL history, set reverse accordingly.
            settings.reverse = settings.reverse || historyDir < 0;

            cssTransitionDeferred = $.Deferred();

            this._cssTransition(toPage, fromPage, {
                transition: settings.transition,
                reverse: settings.reverse,
                deferred: cssTransitionDeferred
            });

            cssTransitionDeferred.done($.proxy(function( name, reverse, $to, $from, alreadyFocused ) {
                $.mobile.removeActiveLinkClass();

                //if there's a duplicateCachedPage, remove it from the DOM now that it's hidden
                if ( settings.duplicateCachedPage ) {
                    settings.duplicateCachedPage.remove();
                }

                // despite visibility: hidden addresses issue #2965
                // https://github.com/jquery/jquery-mobile/issues/2965
                if ( !alreadyFocused ) {
                    $.mobile.focusPage( toPage );
                }

                this._releaseTransitionLock();
                this._triggerWithDeprecated( "transition", triggerData );
                this._triggerWithDeprecated( "change", triggerData );
            }, this));
        },

        // determine the current base url
        _findBaseWithDefault: function() {
            var closestBase = ( this.activePage &&
            $.mobile.getClosestBaseUrl( this.activePage ) );
        return closestBase || $.mobile.path.documentBase.hrefNoHash;
        }
    });

    // The following handlers should be bound after mobileinit has been triggered
    // the following deferred is resolved in the init file
    $.mobile.navreadyDeferred = $.Deferred();

    //these variables make all page containers use the same queue and only navigate one at a time
    // queue to hold simultanious page transitions
    var pageTransitionQueue = [],

        // indicates whether or not page is in process of transitioning
        isPageTransitioning = false;

})( jQuery );

(function( $, undefined ) {

        // resolved on domready
    var domreadyDeferred = $.Deferred(),

        // resolved and nulled on window.load()
        loadDeferred = $.Deferred(),

        // function that resolves the above deferred
        pageIsFullyLoaded = function() {

            // Resolve and null the deferred
            loadDeferred.resolve();
            loadDeferred = null;
        },

        documentUrl = $.mobile.path.documentUrl,

        // used to track last vclicked element to make sure its value is added to form data
        $lastVClicked = null;

    /* Event Bindings - hashchange, submit, and click */
    function findClosestLink( ele )    {
        while ( ele ) {
            // Look for the closest element with a nodeName of "a".
            // Note that we are checking if we have a valid nodeName
            // before attempting to access it. This is because the
            // node we get called with could have originated from within
            // an embedded SVG document where some symbol instance elements
            // don't have nodeName defined on them, or strings are of type
            // SVGAnimatedString.
            if ( ( typeof ele.nodeName === "string" ) && ele.nodeName.toLowerCase() === "a" ) {
                break;
            }
            ele = ele.parentNode;
        }
        return ele;
    }

    $.mobile.loadPage = function( url, opts ) {
        var container;

        opts = opts || {};
        container = ( opts.pageContainer || $.mobile.pageContainer );

        // create the deferred that will be supplied to loadPage callers
        // and resolved by the content widget's load method
        opts.deferred = $.Deferred();

        // Preferring to allow exceptions for uninitialized opts.pageContainer
        // widgets so we know if we need to force init here for users
        container.pagecontainer( "load", url, opts );

        // provide the deferred
        return opts.deferred.promise();
    };

    //define vars for interal use

    /* internal utility functions */

    // NOTE Issue #4950 Android phonegap doesn't navigate back properly
    //      when a full page refresh has taken place. It appears that hashchange
    //      and replacestate history alterations work fine but we need to support
    //      both forms of history traversal in our code that uses backward history
    //      movement
    $.mobile.back = function() {
        var nav = window.navigator;

        // if the setting is on and the navigator object is
        // available use the phonegap navigation capability
        if ( this.phonegapNavigationEnabled &&
            nav &&
            nav.app &&
            nav.app.backHistory ) {
            nav.app.backHistory();
        } else {
            $.mobile.pageContainer.pagecontainer( "back" );
        }
    };

    // Direct focus to the page title, or otherwise first focusable element
    $.mobile.focusPage = function ( page ) {
        var autofocus = page.find( "[autofocus]" ),
            pageTitle = page.find( ".ui-title:eq(0)" );

        if ( autofocus.length ) {
            autofocus.focus();
            return;
        }

        if ( pageTitle.length ) {
            pageTitle.focus();
        } else{
            page.focus();
        }
    };

    // No-op implementation of transition degradation
    $.mobile._maybeDegradeTransition = $.mobile._maybeDegradeTransition || function( transition ) {
        return transition;
    };

    // Exposed $.mobile methods

    $.mobile.changePage = function( to, options ) {
        $.mobile.pageContainer.pagecontainer( "change", to, options );
    };

    $.mobile.changePage.defaults = {
        transition: undefined,
        reverse: false,
        changeHash: true,
        fromHashChange: false,
        role: undefined, // By default we rely on the role defined by the @data-role attribute.
        duplicateCachedPage: undefined,
        pageContainer: undefined,
        showLoadMsg: true, //loading message shows by default when pages are being fetched during changePage
        dataUrl: undefined,
        fromPage: undefined,
        allowSamePageTransition: false
    };

    $.mobile._registerInternalEvents = function() {
        var getAjaxFormData = function( $form, calculateOnly ) {
            var url, ret = true, formData, vclickedName, method;
            if ( !$.mobile.ajaxEnabled ||
                    // test that the form is, itself, ajax false
                    $form.is( ":jqmData(ajax='false')" ) ||
                    // test that $.mobile.ignoreContentEnabled is set and
                    // the form or one of it's parents is ajax=false
                    !$form.jqmHijackable().length ||
                    $form.attr( "target" ) ) {
                return false;
            }

            url = ( $lastVClicked && $lastVClicked.attr( "formaction" ) ) ||
                $form.attr( "action" );
            method = ( $form.attr( "method" ) || "get" ).toLowerCase();

            // If no action is specified, browsers default to using the
            // URL of the document containing the form. Since we dynamically
            // pull in pages from external documents, the form should submit
            // to the URL for the source document of the page containing
            // the form.
            if ( !url ) {
                // Get the @data-url for the page containing the form.
                url = $.mobile.getClosestBaseUrl( $form );

                // NOTE: If the method is "get", we need to strip off the query string
                // because it will get replaced with the new form data. See issue #5710.
                if ( method === "get" ) {
                    url = $.mobile.path.parseUrl( url ).hrefNoSearch;
                }

                if ( url === $.mobile.path.documentBase.hrefNoHash ) {
                    // The url we got back matches the document base,
                    // which means the page must be an internal/embedded page,
                    // so default to using the actual document url as a browser
                    // would.
                    url = documentUrl.hrefNoSearch;
                }
            }

            url = $.mobile.path.makeUrlAbsolute(  url, $.mobile.getClosestBaseUrl( $form ) );

            if ( ( $.mobile.path.isExternal( url ) && !$.mobile.path.isPermittedCrossDomainRequest( documentUrl, url ) ) ) {
                return false;
            }

            if ( !calculateOnly ) {
                formData = $form.serializeArray();

                if ( $lastVClicked && $lastVClicked[ 0 ].form === $form[ 0 ] ) {
                    vclickedName = $lastVClicked.attr( "name" );
                    if ( vclickedName ) {
                        // Make sure the last clicked element is included in the form
                        $.each( formData, function( key, value ) {
                            if ( value.name === vclickedName ) {
                                // Unset vclickedName - we've found it in the serialized data already
                                vclickedName = "";
                                return false;
                            }
                        });
                        if ( vclickedName ) {
                            formData.push( { name: vclickedName, value: $lastVClicked.attr( "value" ) } );
                        }
                    }
                }

                ret = {
                    url: url,
                    options: {
                        type:        method,
                        data:        $.param( formData ),
                        transition:    $form.jqmData( "transition" ),
                        reverse:    $form.jqmData( "direction" ) === "reverse",
                        reloadPage:    true
                    }
                };
            }

            return ret;
        };

        //bind to form submit events, handle with Ajax
        $.mobile.document.delegate( "form", "submit", function( event ) {
            var formData;

            if ( !event.isDefaultPrevented() ) {
                formData = getAjaxFormData( $( this ) );
                if ( formData ) {
                    $.mobile.changePage( formData.url, formData.options );
                    event.preventDefault();
                }
            }
        });

        //add active state on vclick
        $.mobile.document.bind( "vclick", function( event ) {
            var $btn, btnEls, target = event.target, needClosest = false;
            // if this isn't a left click we don't care. Its important to note
            // that when the virtual event is generated it will create the which attr
            if ( event.which > 1 || !$.mobile.linkBindingEnabled ) {
                return;
            }

            // Record that this element was clicked, in case we need it for correct
            // form submission during the "submit" handler above
            $lastVClicked = $( target );

            // Try to find a target element to which the active class will be applied
            if ( $.data( target, "mobile-button" ) ) {
                // If the form will not be submitted via AJAX, do not add active class
                if ( !getAjaxFormData( $( target ).closest( "form" ), true ) ) {
                    return;
                }
                // We will apply the active state to this button widget - the parent
                // of the input that was clicked will have the associated data
                if ( target.parentNode ) {
                    target = target.parentNode;
                }
            } else {
                target = findClosestLink( target );
                if ( !( target && $.mobile.path.parseUrl( target.getAttribute( "href" ) || "#" ).hash !== "#" ) ) {
                    return;
                }

                // TODO teach $.mobile.hijackable to operate on raw dom elements so the
                // link wrapping can be avoided
                if ( !$( target ).jqmHijackable().length ) {
                    return;
                }
            }

            // Avoid calling .closest by using the data set during .buttonMarkup()
            // List items have the button data in the parent of the element clicked
            if ( !!~target.className.indexOf( "ui-link-inherit" ) ) {
                if ( target.parentNode ) {
                    btnEls = $.data( target.parentNode, "buttonElements" );
                }
            // Otherwise, look for the data on the target itself
            } else {
                btnEls = $.data( target, "buttonElements" );
            }
            // If found, grab the button's outer element
            if ( btnEls ) {
                target = btnEls.outer;
            } else {
                needClosest = true;
            }

            $btn = $( target );
            // If the outer element wasn't found by the our heuristics, use .closest()
            if ( needClosest ) {
                $btn = $btn.closest( ".ui-btn" );
            }

            if ( $btn.length > 0 &&
                !( $btn.hasClass( "ui-state-disabled" ||

                    // DEPRECATED as of 1.4.0 - remove after 1.4.0 release
                    // only ui-state-disabled should be present thereafter
                    $btn.hasClass( "ui-disabled" ) ) ) ) {
                $.mobile.removeActiveLinkClass( true );
                $.mobile.activeClickedLink = $btn;
                $.mobile.activeClickedLink.addClass( $.mobile.activeBtnClass );
            }
        });

        // click routing - direct to HTTP or Ajax, accordingly
        $.mobile.document.bind( "click", function( event ) {
            if ( !$.mobile.linkBindingEnabled || event.isDefaultPrevented() ) {
                return;
            }

            var link = findClosestLink( event.target ),
                $link = $( link ),

                //remove active link class if external (then it won't be there if you come back)
                httpCleanup = function() {
                    window.setTimeout(function() { $.mobile.removeActiveLinkClass( true ); }, 200 );
                },
                baseUrl, href,
                useDefaultUrlHandling, isExternal,
                transition, reverse, role;

            // If a button was clicked, clean up the active class added by vclick above
            if ( $.mobile.activeClickedLink &&
                $.mobile.activeClickedLink[ 0 ] === event.target.parentNode ) {
                httpCleanup();
            }

            // If there is no link associated with the click or its not a left
            // click we want to ignore the click
            // TODO teach $.mobile.hijackable to operate on raw dom elements so the link wrapping
            // can be avoided
            if ( !link || event.which > 1 || !$link.jqmHijackable().length ) {
                return;
            }

            //if there's a data-rel=back attr, go back in history
            if ( $link.is( ":jqmData(rel='back')" ) ) {
                $.mobile.back();
                return false;
            }

            baseUrl = $.mobile.getClosestBaseUrl( $link );

            //get href, if defined, otherwise default to empty hash
            href = $.mobile.path.makeUrlAbsolute( $link.attr( "href" ) || "#", baseUrl );

            //if ajax is disabled, exit early
            if ( !$.mobile.ajaxEnabled && !$.mobile.path.isEmbeddedPage( href ) ) {
                httpCleanup();
                //use default click handling
                return;
            }

            // XXX_jblas: Ideally links to application pages should be specified as
            //            an url to the application document with a hash that is either
            //            the site relative path or id to the page. But some of the
            //            internal code that dynamically generates sub-pages for nested
            //            lists and select dialogs, just write a hash in the link they
            //            create. This means the actual URL path is based on whatever
            //            the current value of the base tag is at the time this code
            //            is called.
            if ( href.search( "#" ) !== -1 &&
                !( $.mobile.path.isExternal( href ) && $.mobile.path.isAbsoluteUrl( href ) ) ) {

                href = href.replace( /[^#]*#/, "" );
                if ( !href ) {
                    //link was an empty hash meant purely
                    //for interaction, so we ignore it.
                    event.preventDefault();
                    return;
                } else if ( $.mobile.path.isPath( href ) ) {
                    //we have apath so make it the href we want to load.
                    href = $.mobile.path.makeUrlAbsolute( href, baseUrl );
                } else {
                    //we have a simple id so use the documentUrl as its base.
                    href = $.mobile.path.makeUrlAbsolute( "#" + href, documentUrl.hrefNoHash );
                }
            }

            // Should we handle this link, or let the browser deal with it?
            useDefaultUrlHandling = $link.is( "[rel='external']" ) || $link.is( ":jqmData(ajax='false')" ) || $link.is( "[target]" );

            // Some embedded browsers, like the web view in Phone Gap, allow cross-domain XHR
            // requests if the document doing the request was loaded via the file:// protocol.
            // This is usually to allow the application to "phone home" and fetch app specific
            // data. We normally let the browser handle external/cross-domain urls, but if the
            // allowCrossDomainPages option is true, we will allow cross-domain http/https
            // requests to go through our page loading logic.

            //check for protocol or rel and its not an embedded page
            //TODO overlap in logic from isExternal, rel=external check should be
            //     moved into more comprehensive isExternalLink
            isExternal = useDefaultUrlHandling || ( $.mobile.path.isExternal( href ) && !$.mobile.path.isPermittedCrossDomainRequest( documentUrl, href ) );

            if ( isExternal ) {
                httpCleanup();
                //use default click handling
                return;
            }

            //use ajax
            transition = $link.jqmData( "transition" );
            reverse = $link.jqmData( "direction" ) === "reverse" ||
                        // deprecated - remove by 1.0
                        $link.jqmData( "back" );

            //this may need to be more specific as we use data-rel more
            role = $link.attr( "data-" + $.mobile.ns + "rel" ) || undefined;

            $.mobile.changePage( href, { transition: transition, reverse: reverse, role: role, link: $link } );
            event.preventDefault();
        });

        //prefetch pages when anchors with data-prefetch are encountered
        $.mobile.document.delegate( ".ui-page", "pageshow.prefetch", function() {
            var urls = [];
            $( this ).find( "a:jqmData(prefetch)" ).each(function() {
                var $link = $( this ),
                    url = $link.attr( "href" );

                if ( url && $.inArray( url, urls ) === -1 ) {
                    urls.push( url );

                    $.mobile.loadPage( url, { role: $link.attr( "data-" + $.mobile.ns + "rel" ),prefetch: true } );
                }
            });
        });

        // TODO ensure that the navigate binding in the content widget happens at the right time
        $.mobile.pageContainer.pagecontainer();

        //set page min-heights to be device specific
        $.mobile.document.bind( "pageshow", function() {

            // We need to wait for window.load to make sure that styles have already been rendered,
            // otherwise heights of external toolbars will have the wrong value
            if ( loadDeferred ) {
                loadDeferred.done( $.mobile.resetActivePageHeight );
            } else {
                $.mobile.resetActivePageHeight();
            }
        });
        $.mobile.window.bind( "throttledresize", $.mobile.resetActivePageHeight );

    };//navreadyDeferred done callback

    $( function() { domreadyDeferred.resolve(); } );

    // Account for the possibility that the load event has already fired
    if ( document.readyState === "complete" ) {
        pageIsFullyLoaded();
    } else {
        $.mobile.window.load( pageIsFullyLoaded );
    }

    $.when( domreadyDeferred, $.mobile.navreadyDeferred ).done( function() { $.mobile._registerInternalEvents(); } );
})( jQuery );


(function( $, window, undefined ) {

    // TODO remove direct references to $.mobile and properties, we should
    //      favor injection with params to the constructor
    $.mobile.Transition = function() {
        this.init.apply( this, arguments );
    };

    $.extend($.mobile.Transition.prototype, {
        toPreClass: " ui-page-pre-in",

        init: function( name, reverse, $to, $from ) {
            $.extend(this, {
                name: name,
                reverse: reverse,
                $to: $to,
                $from: $from,
                deferred: new $.Deferred()
            });
        },

        cleanFrom: function() {
            this.$from
                .removeClass( $.mobile.activePageClass + " out in reverse " + this.name )
                .height( "" );
        },

        // NOTE overridden by child object prototypes, noop'd here as defaults
        beforeDoneIn: function() {},
        beforeDoneOut: function() {},
        beforeStartOut: function() {},

        doneIn: function() {
            this.beforeDoneIn();

            this.$to.removeClass( "out in reverse " + this.name ).height( "" );

            this.toggleViewportClass();

            // In some browsers (iOS5), 3D transitions block the ability to scroll to the desired location during transition
            // This ensures we jump to that spot after the fact, if we aren't there already.
            if ( $.mobile.window.scrollTop() !== this.toScroll ) {
                this.scrollPage();
            }
            if ( !this.sequential ) {
                this.$to.addClass( $.mobile.activePageClass );
            }
            this.deferred.resolve( this.name, this.reverse, this.$to, this.$from, true );
        },

        doneOut: function( screenHeight, reverseClass, none, preventFocus ) {
            this.beforeDoneOut();
            this.startIn( screenHeight, reverseClass, none, preventFocus );
        },

        hideIn: function( callback ) {
            // Prevent flickering in phonegap container: see comments at #4024 regarding iOS
            this.$to.css( "z-index", -10 );
            callback.call( this );
            this.$to.css( "z-index", "" );
        },

        scrollPage: function() {
            // By using scrollTo instead of silentScroll, we can keep things better in order
            // Just to be precautios, disable scrollstart listening like silentScroll would
            $.event.special.scrollstart.enabled = false;
            //if we are hiding the url bar or the page was previously scrolled scroll to hide or return to position
            if ( $.mobile.hideUrlBar || this.toScroll !== $.mobile.defaultHomeScroll ) {
                window.scrollTo( 0, this.toScroll );
            }

            // reenable scrollstart listening like silentScroll would
            setTimeout( function() {
                $.event.special.scrollstart.enabled = true;
            }, 150 );
        },

        startIn: function( screenHeight, reverseClass, none, preventFocus ) {
            this.hideIn(function() {
                this.$to.addClass( $.mobile.activePageClass + this.toPreClass );

                // Send focus to page as it is now display: block
                if ( !preventFocus ) {
                    $.mobile.focusPage( this.$to );
                }

                // Set to page height
                this.$to.height( screenHeight + this.toScroll );

                if ( !none ) {
                    this.scrollPage();
                }
            });

            this.$to
                .removeClass( this.toPreClass )
                .addClass( this.name + " in " + reverseClass );

            if ( !none ) {
                this.$to.animationComplete( $.proxy(function() {
                    this.doneIn();
                }, this ));
            } else {
                this.doneIn();
            }

        },

        startOut: function( screenHeight, reverseClass, none ) {
            this.beforeStartOut( screenHeight, reverseClass, none );

            // Set the from page's height and start it transitioning out
            // Note: setting an explicit height helps eliminate tiling in the transitions
            this.$from
                .height( screenHeight + $.mobile.window.scrollTop() )
                .addClass( this.name + " out" + reverseClass );
        },

        toggleViewportClass: function() {
            $.mobile.pageContainer.toggleClass( "ui-mobile-viewport-transitioning viewport-" + this.name );
        },

        transition: function() {
            // NOTE many of these could be calculated/recorded in the constructor, it's my
            //      opinion that binding them as late as possible has value with regards to
            //      better transitions with fewer bugs. Ie, it's not guaranteed that the
            //      object will be created and transition will be run immediately after as
            //      it is today. So we wait until transition is invoked to gather the following
            var none,
                reverseClass = this.reverse ? " reverse" : "",
                screenHeight = $.mobile.getScreenHeight(),
                maxTransitionOverride = $.mobile.maxTransitionWidth !== false &&
                    $.mobile.window.width() > $.mobile.maxTransitionWidth;

            this.toScroll = $.mobile.navigate.history.getActive().lastScroll || $.mobile.defaultHomeScroll;

            none = !$.support.cssTransitions || !$.support.cssAnimations ||
                maxTransitionOverride || !this.name || this.name === "none" ||
                Math.max( $.mobile.window.scrollTop(), this.toScroll ) >
                    $.mobile.getMaxScrollForTransition();

            this.toggleViewportClass();

            if ( this.$from && !none ) {
                this.startOut( screenHeight, reverseClass, none );
            } else {
                this.doneOut( screenHeight, reverseClass, none, true );
            }

            return this.deferred.promise();
        }
    });
})( jQuery, this );


(function( $ ) {

    $.mobile.SerialTransition = function() {
        this.init.apply(this, arguments);
    };

    $.extend($.mobile.SerialTransition.prototype, $.mobile.Transition.prototype, {
        sequential: true,

        beforeDoneOut: function() {
            if ( this.$from ) {
                this.cleanFrom();
            }
        },

        beforeStartOut: function( screenHeight, reverseClass, none ) {
            this.$from.animationComplete($.proxy(function() {
                this.doneOut( screenHeight, reverseClass, none );
            }, this ));
        }
    });

})( jQuery );


(function( $ ) {

    $.mobile.ConcurrentTransition = function() {
        this.init.apply(this, arguments);
    };

    $.extend($.mobile.ConcurrentTransition.prototype, $.mobile.Transition.prototype, {
        sequential: false,

        beforeDoneIn: function() {
            if ( this.$from ) {
                this.cleanFrom();
            }
        },

        beforeStartOut: function( screenHeight, reverseClass, none ) {
            this.doneOut( screenHeight, reverseClass, none );
        }
    });

})( jQuery );


(function( $ ) {

    // generate the handlers from the above
    var defaultGetMaxScrollForTransition = function() {
        return $.mobile.getScreenHeight() * 3;
    };

    //transition handler dictionary for 3rd party transitions
    $.mobile.transitionHandlers = {
        "sequential": $.mobile.SerialTransition,
        "simultaneous": $.mobile.ConcurrentTransition
    };

    // Make our transition handler the public default.
    $.mobile.defaultTransitionHandler = $.mobile.transitionHandlers.sequential;

    $.mobile.transitionFallbacks = {};

    // If transition is defined, check if css 3D transforms are supported, and if not, if a fallback is specified
    $.mobile._maybeDegradeTransition = function( transition ) {
        if ( transition && !$.support.cssTransform3d && $.mobile.transitionFallbacks[ transition ] ) {
            transition = $.mobile.transitionFallbacks[ transition ];
        }

        return transition;
    };

    // Set the getMaxScrollForTransition to default if no implementation was set by user
    $.mobile.getMaxScrollForTransition = $.mobile.getMaxScrollForTransition || defaultGetMaxScrollForTransition;

})( jQuery );

/*
* fallback transition for flip in non-3D supporting browsers (which tend to handle complex transitions poorly in general
*/

(function( $, window, undefined ) {

$.mobile.transitionFallbacks.flip = "fade";

})( jQuery, this );

/*
* fallback transition for flow in non-3D supporting browsers (which tend to handle complex transitions poorly in general
*/

(function( $, window, undefined ) {

$.mobile.transitionFallbacks.flow = "fade";

})( jQuery, this );

/*
* fallback transition for pop in non-3D supporting browsers (which tend to handle complex transitions poorly in general
*/

(function( $, window, undefined ) {

$.mobile.transitionFallbacks.pop = "fade";

})( jQuery, this );

/*
* fallback transition for slide in non-3D supporting browsers (which tend to handle complex transitions poorly in general
*/

(function( $, window, undefined ) {

// Use the simultaneous transitions handler for slide transitions
$.mobile.transitionHandlers.slide = $.mobile.transitionHandlers.simultaneous;

// Set the slide transitions's fallback to "fade"
$.mobile.transitionFallbacks.slide = "fade";

})( jQuery, this );

/*
* fallback transition for slidedown in non-3D supporting browsers (which tend to handle complex transitions poorly in general
*/

(function( $, window, undefined ) {

$.mobile.transitionFallbacks.slidedown = "fade";

})( jQuery, this );

/*
* fallback transition for slidefade in non-3D supporting browsers (which tend to handle complex transitions poorly in general
*/

(function( $, window, undefined ) {

// Set the slide transitions's fallback to "fade"
$.mobile.transitionFallbacks.slidefade = "fade";

})( jQuery, this );

/*
* fallback transition for slideup in non-3D supporting browsers (which tend to handle complex transitions poorly in general
*/

(function( $, window, undefined ) {

$.mobile.transitionFallbacks.slideup = "fade";

})( jQuery, this );

/*
* fallback transition for turn in non-3D supporting browsers (which tend to handle complex transitions poorly in general
*/

(function( $, window, undefined ) {

$.mobile.transitionFallbacks.turn = "fade";

})( jQuery, this );


(function( $, undefined ) {

$.mobile.degradeInputs = {
    color: false,
    date: false,
    datetime: false,
    "datetime-local": false,
    email: false,
    month: false,
    number: false,
    range: "number",
    search: "text",
    tel: false,
    time: false,
    url: false,
    week: false
};
// Backcompat remove in 1.5
$.mobile.page.prototype.options.degradeInputs = $.mobile.degradeInputs;

// Auto self-init widgets
$.mobile.degradeInputsWithin = function( target ) {

    target = $( target );

    // Degrade inputs to avoid poorly implemented native functionality
    target.find( "input" ).not( $.mobile.page.prototype.keepNativeSelector() ).each(function() {
        var element = $( this ),
            type = this.getAttribute( "type" ),
            optType = $.mobile.degradeInputs[ type ] || "text",
            html, hasType, findstr, repstr;

        if ( $.mobile.degradeInputs[ type ] ) {
            html = $( "<div>" ).html( element.clone() ).html();
            // In IE browsers, the type sometimes doesn't exist in the cloned markup, so we replace the closing tag instead
            hasType = html.indexOf( " type=" ) > -1;
            findstr = hasType ? /\s+type=["']?\w+['"]?/ : /\/?>/;
            repstr = " type=\"" + optType + "\" data-" + $.mobile.ns + "type=\"" + type + "\"" + ( hasType ? "" : ">" );

            element.replaceWith( html.replace( findstr, repstr ) );
        }
    });

};

})( jQuery );

(function( $, window, undefined ) {

$.widget( "mobile.page", $.mobile.page, {
    options: {

        // Accepts left, right and none
        closeBtn: "left",
        closeBtnText: "Close",
        overlayTheme: "a",
        corners: true,
        dialog: false
    },

    _create: function() {
        this._super();
        if ( this.options.dialog ) {

            $.extend( this, {
                _inner: this.element.children(),
                _headerCloseButton: null
            });

            if ( !this.options.enhanced ) {
                this._setCloseBtn( this.options.closeBtn );
            }
        }
    },

    _enhance: function() {
        this._super();

        // Class the markup for dialog styling and wrap interior
        if ( this.options.dialog ) {
            this.element.addClass( "ui-dialog" )
                .wrapInner( $( "<div/>", {

                    // ARIA role
                    "role" : "dialog",
                    "class" : "ui-dialog-contain ui-overlay-shadow" +
                        ( this.options.corners ? " ui-corner-all" : "" )
                }));
        }
    },

    _setOptions: function( options ) {
        var closeButtonLocation, closeButtonText,
            currentOpts = this.options;

        if ( options.corners !== undefined ) {
            this._inner.toggleClass( "ui-corner-all", !!options.corners );
        }

        if ( options.overlayTheme !== undefined ) {
            if ( $.mobile.activePage[ 0 ] === this.element[ 0 ] ) {
                currentOpts.overlayTheme = options.overlayTheme;
                this._handlePageBeforeShow();
            }
        }

        if ( options.closeBtnText !== undefined ) {
            closeButtonLocation = currentOpts.closeBtn;
            closeButtonText = options.closeBtnText;
        }

        if ( options.closeBtn !== undefined ) {
            closeButtonLocation = options.closeBtn;
        }

        if ( closeButtonLocation ) {
            this._setCloseBtn( closeButtonLocation, closeButtonText );
        }

        this._super( options );
    },

    _handlePageBeforeShow: function () {
        if ( this.options.overlayTheme && this.options.dialog ) {
            this.removeContainerBackground();
            this.setContainerBackground( this.options.overlayTheme );
        } else {
            this._super();
        }
    },

    _setCloseBtn: function( location, text ) {
        var dst,
            btn = this._headerCloseButton;

        // Sanitize value
        location = "left" === location ? "left" : "right" === location ? "right" : "none";

        if ( "none" === location ) {
            if ( btn ) {
                btn.remove();
                btn = null;
            }
        } else if ( btn ) {
            btn.removeClass( "ui-btn-left ui-btn-right" ).addClass( "ui-btn-" + location );
            if ( text ) {
                btn.text( text );
            }
        } else {
            dst = this._inner.find( ":jqmData(role='header')" ).first();
            btn = $( "<a></a>", {
                    "href": "#",
                    "class": "ui-btn ui-corner-all ui-icon-delete ui-btn-icon-notext ui-btn-" + location
                })
                .attr( "data-" + $.mobile.ns + "rel", "back" )
                .text( text || this.options.closeBtnText || "" )
                .prependTo( dst );
        }

        this._headerCloseButton = btn;
    }
});

})( jQuery, this );

(function( $, window, undefined ) {

$.widget( "mobile.dialog", {
    options: {

        // Accepts left, right and none
        closeBtn: "left",
        closeBtnText: "Close",
        overlayTheme: "a",
        corners: true
    },

    // Override the theme set by the page plugin on pageshow
    _handlePageBeforeShow: function() {
        this._isCloseable = true;
        if ( this.options.overlayTheme ) {
            this.element
                .page( "removeContainerBackground" )
                .page( "setContainerBackground", this.options.overlayTheme );
        }
    },

    _handlePageBeforeHide: function() {
        this._isCloseable = false;
    },

    // click and submit events:
    // - clicks and submits should use the closing transition that the dialog
    //   opened with unless a data-transition is specified on the link/form
    // - if the click was on the close button, or the link has a data-rel="back"
    //   it'll go back in history naturally
    _handleVClickSubmit: function( event ) {
        var attrs,
            $target = $( event.target ).closest( event.type === "vclick" ? "a" : "form" );

        if ( $target.length && !$target.jqmData( "transition" ) ) {
            attrs = {};
            attrs[ "data-" + $.mobile.ns + "transition" ] =
                ( $.mobile.navigate.history.getActive() || {} )[ "transition" ] ||
                $.mobile.defaultDialogTransition;
            attrs[ "data-" + $.mobile.ns + "direction" ] = "reverse";
            $target.attr( attrs );
        }
    },

    _create: function() {
        var elem = this.element,
            opts = this.options;

        // Class the markup for dialog styling and wrap interior
        elem.addClass( "ui-dialog" )
            .wrapInner( $( "<div/>", {

                // ARIA role
                "role" : "dialog",
                "class" : "ui-dialog-contain ui-overlay-shadow" +
                    ( !!opts.corners ? " ui-corner-all" : "" )
            }));

        $.extend( this, {
            _isCloseable: false,
            _inner: elem.children(),
            _headerCloseButton: null
        });

        this._on( elem, {
            vclick: "_handleVClickSubmit",
            submit: "_handleVClickSubmit",
            pagebeforeshow: "_handlePageBeforeShow",
            pagebeforehide: "_handlePageBeforeHide"
        });

        this._setCloseBtn( opts.closeBtn );
    },

    _setOptions: function( options ) {
        var closeButtonLocation, closeButtonText,
            currentOpts = this.options;

        if ( options.corners !== undefined ) {
            this._inner.toggleClass( "ui-corner-all", !!options.corners );
        }

        if ( options.overlayTheme !== undefined ) {
            if ( $.mobile.activePage[ 0 ] === this.element[ 0 ] ) {
                currentOpts.overlayTheme = options.overlayTheme;
                this._handlePageBeforeShow();
            }
        }

        if ( options.closeBtnText !== undefined ) {
            closeButtonLocation = currentOpts.closeBtn;
            closeButtonText = options.closeBtnText;
        }

        if ( options.closeBtn !== undefined ) {
            closeButtonLocation = options.closeBtn;
        }

        if ( closeButtonLocation ) {
            this._setCloseBtn( closeButtonLocation, closeButtonText );
        }

        this._super( options );
    },

    _setCloseBtn: function( location, text ) {
        var dst,
            btn = this._headerCloseButton;

        // Sanitize value
        location = "left" === location ? "left" : "right" === location ? "right" : "none";

        if ( "none" === location ) {
            if ( btn ) {
                btn.remove();
                btn = null;
            }
        } else if ( btn ) {
            btn.removeClass( "ui-btn-left ui-btn-right" ).addClass( "ui-btn-" + location );
            if ( text ) {
                btn.text( text );
            }
        } else {
            dst = this._inner.find( ":jqmData(role='header')" ).first();
            btn = $( "<a></a>", {
                    "role": "button",
                    "href": "#",
                    "class": "ui-btn ui-corner-all ui-icon-delete ui-btn-icon-notext ui-btn-" + location
                })
                .text( text || this.options.closeBtnText || "" )
                .prependTo( dst );
            this._on( btn, { click: "close" } );
        }

        this._headerCloseButton = btn;
    },

    // Close method goes back in history
    close: function() {
        var hist = $.mobile.navigate.history;

        if ( this._isCloseable ) {
            this._isCloseable = false;
            // If the hash listening is enabled and there is at least one preceding history
            // entry it's ok to go back. Initial pages with the dialog hash state are an example
            // where the stack check is necessary
            if ( $.mobile.hashListeningEnabled && hist.activeIndex > 0 ) {
                $.mobile.back();
            } else {
                $.mobile.pageContainer.pagecontainer( "back" );
            }
        }
    }
});

})( jQuery, this );

(function( $, undefined ) {

var rInitialLetter = /([A-Z])/g,

    // Construct iconpos class from iconpos value
    iconposClass = function( iconpos ) {
        return ( "ui-btn-icon-" + ( iconpos === null ? "left" : iconpos ) );
    };

$.widget( "mobile.collapsible", {
    options: {
        enhanced: false,
        expandCueText: null,
        collapseCueText: null,
        collapsed: true,
        heading: "h1,h2,h3,h4,h5,h6,legend",
        collapsedIcon: null,
        expandedIcon: null,
        iconpos: null,
        theme: null,
        contentTheme: null,
        inset: null,
        corners: null,
        mini: null
    },

    _create: function() {
        var elem = this.element,
            ui = {
                accordion: elem
                    .closest( ":jqmData(role='collapsible-set')," +
                        ":jqmData(role='collapsibleset')" +
                        ( $.mobile.collapsibleset ? ", :mobile-collapsibleset" :
                            "" ) )
                    .addClass( "ui-collapsible-set" )
            };

        this._ui = ui;
        this._renderedOptions = this._getOptions( this.options );

        if ( this.options.enhanced ) {
            ui.heading = this.element.children( ".ui-collapsible-heading" );
            ui.content = ui.heading.next();
            ui.anchor = ui.heading.children();
            ui.status = ui.anchor.children( ".ui-collapsible-heading-status" );
        } else {
            this._enhance( elem, ui );
        }

        this._on( ui.heading, {
            "tap": function() {
                ui.heading.find( "a" ).first().addClass( $.mobile.activeBtnClass );
            },

            "click": function( event ) {
                this._handleExpandCollapse( !ui.heading.hasClass( "ui-collapsible-heading-collapsed" ) );
                event.preventDefault();
                event.stopPropagation();
            }
        });
    },

    // Adjust the keys inside options for inherited values
    _getOptions: function( options ) {
        var key,
            accordion = this._ui.accordion,
            accordionWidget = this._ui.accordionWidget;

        // Copy options
        options = $.extend( {}, options );

        if ( accordion.length && !accordionWidget ) {
            this._ui.accordionWidget =
            accordionWidget = accordion.data( "mobile-collapsibleset" );
        }

        for ( key in options ) {

            // Retrieve the option value first from the options object passed in and, if
            // null, from the parent accordion or, if that's null too, or if there's no
            // parent accordion, then from the defaults.
            options[ key ] =
                ( options[ key ] != null ) ? options[ key ] :
                ( accordionWidget ) ? accordionWidget.options[ key ] :
                accordion.length ? $.mobile.getAttribute( accordion[ 0 ],
                    key.replace( rInitialLetter, "-$1" ).toLowerCase() ):
                null;

            if ( null == options[ key ] ) {
                options[ key ] = $.mobile.collapsible.defaults[ key ];
            }
        }

        return options;
    },

    _themeClassFromOption: function( prefix, value ) {
        return ( value ? ( value === "none" ? "" : prefix + value ) : "" );
    },

    _enhance: function( elem, ui ) {
        var iconclass,
            opts = this._renderedOptions,
            contentThemeClass = this._themeClassFromOption( "ui-body-", opts.contentTheme );

        elem.addClass( "ui-collapsible " +
            ( opts.inset ? "ui-collapsible-inset " : "" ) +
            ( opts.inset && opts.corners ? "ui-corner-all " : "" ) +
            ( contentThemeClass ? "ui-collapsible-themed-content " : "" ) );
        ui.originalHeading = elem.children( this.options.heading ).first(),
        ui.content = elem
            .wrapInner( "<div " +
                "class='ui-collapsible-content " +
                contentThemeClass + "'></div>" )
            .children( ".ui-collapsible-content" ),
        ui.heading = ui.originalHeading;

        // Replace collapsibleHeading if it's a legend
        if ( ui.heading.is( "legend" ) ) {
            ui.heading = $( "<div role='heading'>"+ ui.heading.html() +"</div>" );
            ui.placeholder = $( "<div><!-- placeholder for legend --></div>" ).insertBefore( ui.originalHeading );
            ui.originalHeading.remove();
        }

        iconclass = ( opts.collapsed ? ( opts.collapsedIcon ? "ui-icon-" + opts.collapsedIcon : "" ):
            ( opts.expandedIcon ? "ui-icon-" + opts.expandedIcon : "" ) );

        ui.status = $( "<span class='ui-collapsible-heading-status'></span>" );
        ui.anchor = ui.heading
            .detach()
            //modify markup & attributes
            .addClass( "ui-collapsible-heading" )
            .append( ui.status )
            .wrapInner( "<a href='#' class='ui-collapsible-heading-toggle'></a>" )
            .find( "a" )
                .first()
                .addClass( "ui-btn " +
                    ( iconclass ? iconclass + " " : "" ) +
                    ( iconclass ? iconposClass( opts.iconpos ) +
                        " " : "" ) +
                    this._themeClassFromOption( "ui-btn-", opts.theme ) + " " +
                    ( opts.mini ? "ui-mini " : "" ) );

        //drop heading in before content
        ui.heading.insertBefore( ui.content );

        this._handleExpandCollapse( this.options.collapsed );

        return ui;
    },

    refresh: function() {
        this._applyOptions( this.options );
        this._renderedOptions = this._getOptions( this.options );
    },

    _applyOptions: function( options ) {
        var isCollapsed, newTheme, oldTheme, hasCorners, hasIcon,
            elem = this.element,
            currentOpts = this._renderedOptions,
            ui = this._ui,
            anchor = ui.anchor,
            status = ui.status,
            opts = this._getOptions( options );

        // First and foremost we need to make sure the collapsible is in the proper
        // state, in case somebody decided to change the collapsed option at the
        // same time as another option
        if ( options.collapsed !== undefined ) {
            this._handleExpandCollapse( options.collapsed );
        }

        isCollapsed = elem.hasClass( "ui-collapsible-collapsed" );

        // We only need to apply the cue text for the current state right away.
        // The cue text for the alternate state will be stored in the options
        // and applied the next time the collapsible's state is toggled
        if ( isCollapsed ) {
            if ( opts.expandCueText !== undefined ) {
                status.text( opts.expandCueText );
            }
        } else {
            if ( opts.collapseCueText !== undefined ) {
                status.text( opts.collapseCueText );
            }
        }

        // Update icon

        // Is it supposed to have an icon?
        hasIcon =

            // If the collapsedIcon is being set, consult that
            ( opts.collapsedIcon !== undefined ? opts.collapsedIcon !== false :

                // Otherwise consult the existing option value
                currentOpts.collapsedIcon !== false );


        // If any icon-related options have changed, make sure the new icon
        // state is reflected by first removing all icon-related classes
        // reflecting the current state and then adding all icon-related
        // classes for the new state
        if ( !( opts.iconpos === undefined &&
            opts.collapsedIcon === undefined &&
            opts.expandedIcon === undefined ) ) {

            // Remove all current icon-related classes
            anchor.removeClass( [ iconposClass( currentOpts.iconpos ) ]
                .concat( ( currentOpts.expandedIcon ?
                    [ "ui-icon-" + currentOpts.expandedIcon ] : [] ) )
                .concat( ( currentOpts.collapsedIcon ?
                    [ "ui-icon-" + currentOpts.collapsedIcon ] : [] ) )
                .join( " " ) );

            // Add new classes if an icon is supposed to be present
            if ( hasIcon ) {
                anchor.addClass(
                    [ iconposClass( opts.iconpos !== undefined ?
                        opts.iconpos : currentOpts.iconpos ) ]
                        .concat( isCollapsed ?
                            [ "ui-icon-" + ( opts.collapsedIcon !== undefined ?
                                opts.collapsedIcon :
                                currentOpts.collapsedIcon ) ] :
                            [ "ui-icon-" + ( opts.expandedIcon !== undefined ?
                                opts.expandedIcon :
                                currentOpts.expandedIcon ) ] )
                        .join( " " ) );
            }
        }

        if ( opts.theme !== undefined ) {
            oldTheme = this._themeClassFromOption( "ui-btn-", currentOpts.theme );
            newTheme = this._themeClassFromOption( "ui-btn-", opts.theme );
            anchor.removeClass( oldTheme ).addClass( newTheme );
        }

        if ( opts.contentTheme !== undefined ) {
            oldTheme = this._themeClassFromOption( "ui-body-",
                currentOpts.contentTheme );
            newTheme = this._themeClassFromOption( "ui-body-",
                opts.contentTheme );
            ui.content.removeClass( oldTheme ).addClass( newTheme );
        }

        if ( opts.inset !== undefined ) {
            elem.toggleClass( "ui-collapsible-inset", opts.inset );
            hasCorners = !!( opts.inset && ( opts.corners || currentOpts.corners ) );
        }

        if ( opts.corners !== undefined ) {
            hasCorners = !!( opts.corners && ( opts.inset || currentOpts.inset ) );
        }

        if ( hasCorners !== undefined ) {
            elem.toggleClass( "ui-corner-all", hasCorners );
        }

        if ( opts.mini !== undefined ) {
            anchor.toggleClass( "ui-mini", opts.mini );
        }
    },

    _setOptions: function( options ) {
        this._applyOptions( options );
        this._super( options );
        this._renderedOptions = this._getOptions( this.options );
    },

    _handleExpandCollapse: function( isCollapse ) {
        var opts = this._renderedOptions,
            ui = this._ui;

        ui.status.text( isCollapse ? opts.expandCueText : opts.collapseCueText );
        ui.heading
            .toggleClass( "ui-collapsible-heading-collapsed", isCollapse )
            .find( "a" ).first()
            .toggleClass( "ui-icon-" + opts.expandedIcon, !isCollapse )

            // logic or cause same icon for expanded/collapsed state would remove the ui-icon-class
            .toggleClass( "ui-icon-" + opts.collapsedIcon, ( isCollapse || opts.expandedIcon === opts.collapsedIcon ) )
            .removeClass( $.mobile.activeBtnClass );

        this.element.toggleClass( "ui-collapsible-collapsed", isCollapse );
        ui.content
            .toggleClass( "ui-collapsible-content-collapsed", isCollapse )
            .attr( "aria-hidden", isCollapse )
            .trigger( "updatelayout" );
        this.options.collapsed = isCollapse;
        this._trigger( isCollapse ? "collapse" : "expand" );
    },

    expand: function() {
        this._handleExpandCollapse( false );
    },

    collapse: function() {
        this._handleExpandCollapse( true );
    },

    _destroy: function() {
        var ui = this._ui,
            opts = this.options;

        if ( opts.enhanced ) {
            return;
        }

        if ( ui.placeholder ) {
            ui.originalHeading.insertBefore( ui.placeholder );
            ui.placeholder.remove();
            ui.heading.remove();
        } else {
            ui.status.remove();
            ui.heading
                .removeClass( "ui-collapsible-heading ui-collapsible-heading-collapsed" )
                .children()
                    .contents()
                        .unwrap();
        }

        ui.anchor.contents().unwrap();
        ui.content.contents().unwrap();
        this.element
            .removeClass( "ui-collapsible ui-collapsible-collapsed " +
                "ui-collapsible-themed-content ui-collapsible-inset ui-corner-all" );
    }
});

// Defaults to be used by all instances of collapsible if per-instance values
// are unset or if nothing is specified by way of inheritance from an accordion.
// Note that this hash does not contain options "collapsed" or "heading",
// because those are not inheritable.
$.mobile.collapsible.defaults = {
    expandCueText: " click to expand contents",
    collapseCueText: " click to collapse contents",
    collapsedIcon: "plus",
    contentTheme: "inherit",
    expandedIcon: "minus",
    iconpos: "left",
    inset: true,
    corners: true,
    theme: "inherit",
    mini: false
};

})( jQuery );

(function( $, undefined ) {

var uiScreenHiddenRegex = /\bui-screen-hidden\b/;
function noHiddenClass( elements ) {
    var index,
        length = elements.length,
        result = [];

    for ( index = 0; index < length; index++ ) {
        if ( !elements[ index ].className.match( uiScreenHiddenRegex ) ) {
            result.push( elements[ index ] );
        }
    }

    return $( result );
}

$.mobile.behaviors.addFirstLastClasses = {
    _getVisibles: function( $els, create ) {
        var visibles;

        if ( create ) {
            visibles = noHiddenClass( $els );
        } else {
            visibles = $els.filter( ":visible" );
            if ( visibles.length === 0 ) {
                visibles = noHiddenClass( $els );
            }
        }

        return visibles;
    },

    _addFirstLastClasses: function( $els, $visibles, create ) {
        $els.removeClass( "ui-first-child ui-last-child" );
        $visibles.eq( 0 ).addClass( "ui-first-child" ).end().last().addClass( "ui-last-child" );
        if ( !create ) {
            this.element.trigger( "updatelayout" );
        }
    },

    _removeFirstLastClasses: function( $els ) {
        $els.removeClass( "ui-first-child ui-last-child" );
    }
};

})( jQuery );

(function( $, undefined ) {

var childCollapsiblesSelector = ":mobile-collapsible, " + $.mobile.collapsible.initSelector;

$.widget( "mobile.collapsibleset", $.extend( {

    // The initSelector is deprecated as of 1.4.0. In 1.5.0 we will use
    // :jqmData(role='collapsibleset') which will allow us to get rid of the line
    // below altogether, because the autoinit will generate such an initSelector
    initSelector: ":jqmData(role='collapsible-set'),:jqmData(role='collapsibleset')",

    options: $.extend( {
        enhanced: false
    }, $.mobile.collapsible.defaults ),

    _handleCollapsibleExpand: function( event ) {
        var closestCollapsible = $( event.target ).closest( ".ui-collapsible" );

        if ( closestCollapsible.parent().is( ":mobile-collapsibleset, :jqmData(role='collapsible-set')" ) ) {
            closestCollapsible
                .siblings( ".ui-collapsible:not(.ui-collapsible-collapsed)" )
                .collapsible( "collapse" );
        }
    },

    _create: function() {
        var elem = this.element,
            opts = this.options;

        $.extend( this, {
            _classes: ""
        });

        if ( !opts.enhanced ) {
            elem.addClass( "ui-collapsible-set " +
                this._themeClassFromOption( "ui-group-theme-", opts.theme ) + " " +
                ( opts.corners && opts.inset ? "ui-corner-all " : "" ) );
            this.element.find( $.mobile.collapsible.initSelector ).collapsible();
        }

        this._on( elem, { collapsibleexpand: "_handleCollapsibleExpand" } );
    },

    _themeClassFromOption: function( prefix, value ) {
        return ( value ? ( value === "none" ? "" : prefix + value ) : "" );
    },

    _init: function() {
        this._refresh( true );

        // Because the corners are handled by the collapsible itself and the default state is collapsed
        // That was causing https://github.com/jquery/jquery-mobile/issues/4116
        this.element
            .children( childCollapsiblesSelector )
            .filter( ":jqmData(collapsed='false')" )
            .collapsible( "expand" );
    },

    _setOptions: function( options ) {
        var ret, hasCorners,
            elem = this.element,
            themeClass = this._themeClassFromOption( "ui-group-theme-", options.theme );

        if ( themeClass ) {
            elem
                .removeClass( this._themeClassFromOption( "ui-group-theme-", this.options.theme ) )
                .addClass( themeClass );
        }

        if ( options.inset !== undefined ) {
            hasCorners = !!( options.inset && ( options.corners || this.options.corners ) );
        }

        if ( options.corners !== undefined ) {
            hasCorners = !!( options.corners && ( options.inset || this.options.inset ) );
        }

        if ( hasCorners !== undefined ) {
            elem.toggleClass( "ui-corner-all", hasCorners );
        }

        ret = this._super( options );
        this.element.children( ":mobile-collapsible" ).collapsible( "refresh" );
        return ret;
    },

    _destroy: function() {
        var el = this.element;

        this._removeFirstLastClasses( el.children( childCollapsiblesSelector ) );
        el
            .removeClass( "ui-collapsible-set ui-corner-all " +
                this._themeClassFromOption( "ui-group-theme-", this.options.theme ) )
            .children( ":mobile-collapsible" )
            .collapsible( "destroy" );
    },

    _refresh: function( create ) {
        var collapsiblesInSet = this.element.children( childCollapsiblesSelector );

        this.element.find( $.mobile.collapsible.initSelector ).not( ".ui-collapsible" ).collapsible();

        this._addFirstLastClasses( collapsiblesInSet, this._getVisibles( collapsiblesInSet, create ), create );
    },

    refresh: function() {
        this._refresh( false );
    }
}, $.mobile.behaviors.addFirstLastClasses ) );

})( jQuery );

(function( $, undefined ) {

// Deprecated in 1.4
$.fn.fieldcontain = function(/* options */) {
    return this.addClass( "ui-field-contain" );
};

})( jQuery );

(function( $, undefined ) {

$.fn.grid = function( options ) {
    return this.each(function() {

        var $this = $( this ),
            o = $.extend({
                grid: null
            }, options ),
            $kids = $this.children(),
            gridCols = { solo:1, a:2, b:3, c:4, d:5 },
            grid = o.grid,
            iterator,
            letter;

            if ( !grid ) {
                if ( $kids.length <= 5 ) {
                    for ( letter in gridCols ) {
                        if ( gridCols[ letter ] === $kids.length ) {
                            grid = letter;
                        }
                    }
                } else {
                    grid = "a";
                    $this.addClass( "ui-grid-duo" );
                }
            }
            iterator = gridCols[grid];

        $this.addClass( "ui-grid-" + grid );

        $kids.filter( ":nth-child(" + iterator + "n+1)" ).addClass( "ui-block-a" );

        if ( iterator > 1 ) {
            $kids.filter( ":nth-child(" + iterator + "n+2)" ).addClass( "ui-block-b" );
        }
        if ( iterator > 2 ) {
            $kids.filter( ":nth-child(" + iterator + "n+3)" ).addClass( "ui-block-c" );
        }
        if ( iterator > 3 ) {
            $kids.filter( ":nth-child(" + iterator + "n+4)" ).addClass( "ui-block-d" );
        }
        if ( iterator > 4 ) {
            $kids.filter( ":nth-child(" + iterator + "n+5)" ).addClass( "ui-block-e" );
        }
    });
};
})( jQuery );

(function( $, undefined ) {

$.widget( "mobile.navbar", {
    options: {
        iconpos: "top",
        grid: null
    },

    _create: function() {

        var $navbar = this.element,
            $navbtns = $navbar.find( "a, button" ),
            iconpos = $navbtns.filter( ":jqmData(icon)" ).length ? this.options.iconpos : undefined;

        $navbar.addClass( "ui-navbar" )
            .attr( "role", "navigation" )
            .find( "ul" )
            .jqmEnhanceable()
            .grid({ grid: this.options.grid });

        $navbtns
            .each( function() {
                var icon = $.mobile.getAttribute( this, "icon" ),
                    theme = $.mobile.getAttribute( this, "theme" ),
                    classes = "ui-btn";

                if ( theme ) {
                    classes += " ui-btn-" + theme;
                }
                if ( icon ) {
                    classes += " ui-icon-" + icon + " ui-btn-icon-" + iconpos;
                }
                $( this ).addClass( classes );
            });

        $navbar.delegate( "a", "vclick", function( /* event */ ) {
            var activeBtn = $( this );

            if ( !( activeBtn.hasClass( "ui-state-disabled" ) ||

                // DEPRECATED as of 1.4.0 - remove after 1.4.0 release
                // only ui-state-disabled should be present thereafter
                activeBtn.hasClass( "ui-disabled" ) ||
                activeBtn.hasClass( $.mobile.activeBtnClass ) ) ) {

                $navbtns.removeClass( $.mobile.activeBtnClass );
                activeBtn.addClass( $.mobile.activeBtnClass );

                // The code below is a workaround to fix #1181
                $( document ).one( "pagehide", function() {
                    activeBtn.removeClass( $.mobile.activeBtnClass );
                });
            }
        });

        // Buttons in the navbar with ui-state-persist class should regain their active state before page show
        $navbar.closest( ".ui-page" ).bind( "pagebeforeshow", function() {
            $navbtns.filter( ".ui-state-persist" ).addClass( $.mobile.activeBtnClass );
        });
    }
});

})( jQuery );

(function( $, undefined ) {

var getAttr = $.mobile.getAttribute;

$.widget( "mobile.listview", $.extend( {

    options: {
        theme: null,
        countTheme: null, /* Deprecated in 1.4 */
        dividerTheme: null,
        icon: "carat-r",
        splitIcon: "carat-r",
        splitTheme: null,
        corners: true,
        shadow: true,
        inset: false
    },

    _create: function() {
        var t = this,
            listviewClasses = "";

        listviewClasses += t.options.inset ? " ui-listview-inset" : "";

        if ( !!t.options.inset ) {
            listviewClasses += t.options.corners ? " ui-corner-all" : "";
            listviewClasses += t.options.shadow ? " ui-shadow" : "";
        }

        // create listview markup
        t.element.addClass( " ui-listview" + listviewClasses );

        t.refresh( true );
    },

    // TODO: Remove in 1.5
    _findFirstElementByTagName: function( ele, nextProp, lcName, ucName ) {
        var dict = {};
        dict[ lcName ] = dict[ ucName ] = true;
        while ( ele ) {
            if ( dict[ ele.nodeName ] ) {
                return ele;
            }
            ele = ele[ nextProp ];
        }
        return null;
    },
    // TODO: Remove in 1.5
    _addThumbClasses: function( containers ) {
        var i, img, len = containers.length;
        for ( i = 0; i < len; i++ ) {
            img = $( this._findFirstElementByTagName( containers[ i ].firstChild, "nextSibling", "img", "IMG" ) );
            if ( img.length ) {
                $( this._findFirstElementByTagName( img[ 0 ].parentNode, "parentNode", "li", "LI" ) ).addClass( img.hasClass( "ui-li-icon" ) ? "ui-li-has-icon" : "ui-li-has-thumb" );
            }
        }
    },

    _getChildrenByTagName: function( ele, lcName, ucName ) {
        var results = [],
            dict = {};
        dict[ lcName ] = dict[ ucName ] = true;
        ele = ele.firstChild;
        while ( ele ) {
            if ( dict[ ele.nodeName ] ) {
                results.push( ele );
            }
            ele = ele.nextSibling;
        }
        return $( results );
    },

    _beforeListviewRefresh: $.noop,
    _afterListviewRefresh: $.noop,

    refresh: function( create ) {
        var buttonClass, pos, numli, item, itemClass, itemTheme, itemIcon, icon, a,
            isDivider, startCount, newStartCount, value, last, splittheme, splitThemeClass, spliticon,
            altButtonClass, dividerTheme, li,
            o = this.options,
            $list = this.element,
            ol = !!$.nodeName( $list[ 0 ], "ol" ),
            start = $list.attr( "start" ),
            itemClassDict = {},
            countBubbles = $list.find( ".ui-li-count" ),
            countTheme = getAttr( $list[ 0 ], "counttheme" ) || this.options.countTheme,
            countThemeClass = countTheme ? "ui-body-" + countTheme : "ui-body-inherit";

        if ( o.theme ) {
            $list.addClass( "ui-group-theme-" + o.theme );
        }

        // Check if a start attribute has been set while taking a value of 0 into account
        if ( ol && ( start || start === 0 ) ) {
            startCount = parseInt( start, 10 ) - 1;
            $list.css( "counter-reset", "listnumbering " + startCount );
        }

        this._beforeListviewRefresh();

        li = this._getChildrenByTagName( $list[ 0 ], "li", "LI" );

        for ( pos = 0, numli = li.length; pos < numli; pos++ ) {
            item = li.eq( pos );
            itemClass = "";

            if ( create || item[ 0 ].className.search( /\bui-li-static\b|\bui-li-divider\b/ ) < 0 ) {
                a = this._getChildrenByTagName( item[ 0 ], "a", "A" );
                isDivider = ( getAttr( item[ 0 ], "role" ) === "list-divider" );
                value = item.attr( "value" );
                itemTheme = getAttr( item[ 0 ], "theme" );

                if ( a.length && a[ 0 ].className.search( /\bui-btn\b/ ) < 0 && !isDivider ) {
                    itemIcon = getAttr( item[ 0 ], "icon" );
                    icon = ( itemIcon === false ) ? false : ( itemIcon || o.icon );

                    // TODO: Remove in 1.5 together with links.js (links.js / .ui-link deprecated in 1.4)
                    a.removeClass( "ui-link" );

                    buttonClass = "ui-btn";

                    if ( itemTheme ) {
                        buttonClass += " ui-btn-" + itemTheme;
                    }

                    if ( a.length > 1 ) {
                        itemClass = "ui-li-has-alt";

                        last = a.last();
                        splittheme = getAttr( last[ 0 ], "theme" ) || o.splitTheme || getAttr( item[ 0 ], "theme", true );
                        splitThemeClass = splittheme ? " ui-btn-" + splittheme : "";
                        spliticon = getAttr( last[ 0 ], "icon" ) || getAttr( item[ 0 ], "icon" ) || o.splitIcon;
                        altButtonClass = "ui-btn ui-btn-icon-notext ui-icon-" + spliticon + splitThemeClass;

                        last
                            .attr( "title", $.trim( last.getEncodedText() ) )
                            .addClass( altButtonClass )
                            .empty();

                        // Reduce to the first anchor, because only the first gets the buttonClass
                        a = a.first();
                    } else if ( icon ) {
                        buttonClass += " ui-btn-icon-right ui-icon-" + icon;
                    }

                    // Apply buttonClass to the (first) anchor
                    a.addClass( buttonClass );
                } else if ( isDivider ) {
                    dividerTheme = ( getAttr( item[ 0 ], "theme" ) || o.dividerTheme || o.theme );

                    itemClass = "ui-li-divider ui-bar-" + ( dividerTheme ? dividerTheme : "inherit" );

                    item.attr( "role", "heading" );
                } else if ( a.length <= 0 ) {
                    itemClass = "ui-li-static ui-body-" + ( itemTheme ? itemTheme : "inherit" );
                }
                if ( ol && value ) {
                    newStartCount = parseInt( value , 10 ) - 1;

                    item.css( "counter-reset", "listnumbering " + newStartCount );
                }
            }

            // Instead of setting item class directly on the list item
            // at this point in time, push the item into a dictionary
            // that tells us what class to set on it so we can do this after this
            // processing loop is finished.

            if ( !itemClassDict[ itemClass ] ) {
                itemClassDict[ itemClass ] = [];
            }

            itemClassDict[ itemClass ].push( item[ 0 ] );
        }

        // Set the appropriate listview item classes on each list item.
        // The main reason we didn't do this
        // in the for-loop above is because we can eliminate per-item function overhead
        // by calling addClass() and children() once or twice afterwards. This
        // can give us a significant boost on platforms like WP7.5.

        for ( itemClass in itemClassDict ) {
            $( itemClassDict[ itemClass ] ).addClass( itemClass );
        }

        countBubbles.each( function() {
            $( this ).closest( "li" ).addClass( "ui-li-has-count" );
        });
        if ( countThemeClass ) {
            countBubbles.not( "[class*='ui-body-']" ).addClass( countThemeClass );
        }

        // Deprecated in 1.4. From 1.5 you have to add class ui-li-has-thumb or ui-li-has-icon to the LI.
        this._addThumbClasses( li );
        this._addThumbClasses( li.find( ".ui-btn" ) );

        this._afterListviewRefresh();

        this._addFirstLastClasses( li, this._getVisibles( li, create ), create );
    }
}, $.mobile.behaviors.addFirstLastClasses ) );

})( jQuery );

(function( $, undefined ) {

function defaultAutodividersSelector( elt ) {
    // look for the text in the given element
    var text = $.trim( elt.text() ) || null;

    if ( !text ) {
        return null;
    }

    // create the text for the divider (first uppercased letter)
    text = text.slice( 0, 1 ).toUpperCase();

    return text;
}

$.widget( "mobile.listview", $.mobile.listview, {
    options: {
        autodividers: false,
        autodividersSelector: defaultAutodividersSelector
    },

    _beforeListviewRefresh: function() {
        if ( this.options.autodividers ) {
            this._replaceDividers();
            this._superApply( arguments );
        }
    },

    _replaceDividers: function() {
        var i, lis, li, dividerText,
            lastDividerText = null,
            list = this.element,
            divider;

        list.children( "li:jqmData(role='list-divider')" ).remove();

        lis = list.children( "li" );

        for ( i = 0; i < lis.length ; i++ ) {
            li = lis[ i ];
            dividerText = this.options.autodividersSelector( $( li ) );

            if ( dividerText && lastDividerText !== dividerText ) {
                divider = document.createElement( "li" );
                divider.appendChild( document.createTextNode( dividerText ) );
                divider.setAttribute( "data-" + $.mobile.ns + "role", "list-divider" );
                li.parentNode.insertBefore( divider, li );
            }

            lastDividerText = dividerText;
        }
    }
});

})( jQuery );

(function( $, undefined ) {

var rdivider = /(^|\s)ui-li-divider($|\s)/,
    rhidden = /(^|\s)ui-screen-hidden($|\s)/;

$.widget( "mobile.listview", $.mobile.listview, {
    options: {
        hideDividers: false
    },

    _afterListviewRefresh: function() {
        var items, idx, item, hideDivider = true;

        this._superApply( arguments );

        if ( this.options.hideDividers ) {
            items = this._getChildrenByTagName( this.element[ 0 ], "li", "LI" );
            for ( idx = items.length - 1 ; idx > -1 ; idx-- ) {
                item = items[ idx ];
                if ( item.className.match( rdivider ) ) {
                    if ( hideDivider ) {
                        item.className = item.className + " ui-screen-hidden";
                    }
                    hideDivider = true;
                } else {
                    if ( !item.className.match( rhidden ) ) {
                        hideDivider = false;
                    }
                }
            }
        }
    }
});

})( jQuery );

(function( $, undefined ) {

$.mobile.nojs = function( target ) {
    $( ":jqmData(role='nojs')", target ).addClass( "ui-nojs" );
};

})( jQuery );

(function( $, undefined ) {

$.mobile.behaviors.formReset = {
    _handleFormReset: function() {
        this._on( this.element.closest( "form" ), {
            reset: function() {
                this._delay( "_reset" );
            }
        });
    }
};

})( jQuery );

/*
* "checkboxradio" plugin
*/

(function( $, undefined ) {

var escapeId = $.mobile.path.hashToSelector;

$.widget( "mobile.checkboxradio", $.extend( {

    initSelector: "input:not( :jqmData(role='flipswitch' ) )[type='checkbox'],input[type='radio']:not( :jqmData(role='flipswitch' ))",

    options: {
        theme: "inherit",
        mini: false,
        wrapperClass: null,
        enhanced: false,
        iconpos: "left"

    },
    _create: function() {
        var input = this.element,
            o = this.options,
            inheritAttr = function( input, dataAttr ) {
                return input.jqmData( dataAttr ) ||
                    input.closest( "form, fieldset" ).jqmData( dataAttr );
            },
            label = this.options.enhanced ?
                {
                    element: this.element.siblings( "label" ),
                    isParent: false
                } :
                this._findLabel(),
            inputtype = input[0].type,
            checkedClass = "ui-" + inputtype + "-on",
            uncheckedClass = "ui-" + inputtype + "-off";

        if ( inputtype !== "checkbox" && inputtype !== "radio" ) {
            return;
        }

        if ( this.element[0].disabled ) {
            this.options.disabled = true;
        }

        o.iconpos = inheritAttr( input, "iconpos" ) ||
            label.element.attr( "data-" + $.mobile.ns + "iconpos" ) || o.iconpos,

        // Establish options
        o.mini = inheritAttr( input, "mini" ) || o.mini;

        // Expose for other methods
        $.extend( this, {
            input: input,
            label: label.element,
            labelIsParent: label.isParent,
            inputtype: inputtype,
            checkedClass: checkedClass,
            uncheckedClass: uncheckedClass
        });

        if ( !this.options.enhanced ) {
            this._enhance();
        }

        this._on( label.element, {
            vmouseover: "_handleLabelVMouseOver",
            vclick: "_handleLabelVClick"
        });

        this._on( input, {
            vmousedown: "_cacheVals",
            vclick: "_handleInputVClick",
            focus: "_handleInputFocus",
            blur: "_handleInputBlur"
        });

        this._handleFormReset();
        this.refresh();
    },

    _findLabel: function() {
        var parentLabel, label, isParent,
            input = this.element,
            labelsList = input[ 0 ].labels;

        if( labelsList && labelsList.length > 0 ) {
            label = $( labelsList[ 0 ] );
            isParent = $.contains( label[ 0 ], input[ 0 ] );
        } else {
            parentLabel = input.closest( "label" );
            isParent = ( parentLabel.length > 0 );

            // NOTE: Windows Phone could not find the label through a selector
            // filter works though.
            label = isParent ? parentLabel :
                $( this.document[ 0 ].getElementsByTagName( "label" ) )
                    .filter( "[for='" + escapeId( input[ 0 ].id ) + "']" )
                    .first();
        }

        return {
            element: label,
            isParent: isParent
        };
    },

    _enhance: function() {
        this.label.addClass( "ui-btn ui-corner-all");

        if ( this.labelIsParent ) {
            this.input.add( this.label ).wrapAll( this._wrapper() );
        } else {
            //this.element.replaceWith( this.input.add( this.label ).wrapAll( this._wrapper() ) );
            this.element.wrap( this._wrapper() );
            this.element.parent().prepend( this.label );
        }

        // Wrap the input + label in a div

        this._setOptions({
            "theme": this.options.theme,
            "iconpos": this.options.iconpos,
            "mini": this.options.mini
        });

    },

    _wrapper: function() {
        return $( "<div class='"  +
            ( this.options.wrapperClass ? this.options.wrapperClass : "" ) +
            " ui-" + this.inputtype +
            ( this.options.disabled ? " ui-state-disabled" : "" ) + "' ></div>" );
    },

    _handleInputFocus: function() {
        this.label.addClass( $.mobile.focusClass );
    },

    _handleInputBlur: function() {
        this.label.removeClass( $.mobile.focusClass );
    },

    _handleInputVClick: function() {
        // Adds checked attribute to checked input when keyboard is used
        this.element.prop( "checked", this.element.is( ":checked" ) );
        this._getInputSet().not( this.element ).prop( "checked", false );
        this._updateAll( true );
    },

    _handleLabelVMouseOver: function( event ) {
        if ( this.label.parent().hasClass( "ui-state-disabled" ) ) {
            event.stopPropagation();
        }
    },

    _handleLabelVClick: function( event ) {
        var input = this.element;

        if ( input.is( ":disabled" ) ) {
            event.preventDefault();
            return;
        }

        this._cacheVals();

        input.prop( "checked", this.inputtype === "radio" && true || !input.prop( "checked" ) );

        // trigger click handler's bound directly to the input as a substitute for
        // how label clicks behave normally in the browsers
        // TODO: it would be nice to let the browser's handle the clicks and pass them
        //       through to the associate input. we can swallow that click at the parent
        //       wrapper element level
        input.triggerHandler( "click" );

        // Input set for common radio buttons will contain all the radio
        // buttons, but will not for checkboxes. clearing the checked status
        // of other radios ensures the active button state is applied properly
        this._getInputSet().not( input ).prop( "checked", false );

        this._updateAll();
        return false;
    },

    _cacheVals: function() {
        this._getInputSet().each( function() {
            $( this ).attr("data-" + $.mobile.ns + "cacheVal", this.checked );
        });
    },

    // Returns those radio buttons that are supposed to be in the same group as
    // this radio button. In the case of a checkbox or a radio lacking a name
    // attribute, it returns this.element.
    _getInputSet: function() {
        var selector, formId,
            radio = this.element[ 0 ],
            name = radio.name,
            form = radio.form,
            doc = this.element.parents().last().get( 0 ),

            // A radio is always a member of its own group
            radios = this.element;

        // Only start running selectors if this is an attached radio button with a name
        if ( name && this.inputtype === "radio" && doc ) {
            selector = "input[type='radio'][name='" + escapeId( name ) + "']";

            // If we're inside a form
            if ( form ) {
                formId = form.getAttribute( "id" );

                // If the form has an ID, collect radios scattered throught the document which
                // nevertheless are part of the form by way of the value of their form attribute
                if ( formId ) {
                    radios = $( selector + "[form='" + escapeId( formId ) + "']", doc );
                }

                // Also add to those the radios in the form itself
                radios = $( form ).find( selector ).filter( function() {

                    // Some radios inside the form may belong to some other form by virtue of
                    // having a form attribute defined on them, so we must filter them out here
                    return ( this.form === form );
                }).add( radios );

            // If we're outside a form
            } else {

                // Collect all those radios which are also outside of a form and match our name
                radios = $( selector, doc ).filter( function() {
                    return !this.form;
                });
            }
        }
        return radios;
    },

    _updateAll: function( changeTriggered ) {
        var self = this;

        this._getInputSet().each( function() {
            var $this = $( this );

            if ( ( this.checked || self.inputtype === "checkbox" ) && !changeTriggered ) {
                $this.trigger( "change" );
            }
        })
        .checkboxradio( "refresh" );
    },

    _reset: function() {
        this.refresh();
    },

    // Is the widget supposed to display an icon?
    _hasIcon: function() {
        var controlgroup, controlgroupWidget,
            controlgroupConstructor = $.mobile.controlgroup;

        // If the controlgroup widget is defined ...
        if ( controlgroupConstructor ) {
            controlgroup = this.element.closest(
                ":mobile-controlgroup," +
                controlgroupConstructor.prototype.initSelector );

            // ... and the checkbox is in a controlgroup ...
            if ( controlgroup.length > 0 ) {

                // ... look for a controlgroup widget instance, and ...
                controlgroupWidget = $.data( controlgroup[ 0 ], "mobile-controlgroup" );

                // ... if found, decide based on the option value, ...
                return ( ( controlgroupWidget ? controlgroupWidget.options.type :

                    // ... otherwise decide based on the "type" data attribute.
                    controlgroup.attr( "data-" + $.mobile.ns + "type" ) ) !== "horizontal" );
            }
        }

        // Normally, the widget displays an icon.
        return true;
    },

    refresh: function() {
        var isChecked = this.element[ 0 ].checked,
            active = $.mobile.activeBtnClass,
            iconposClass = "ui-btn-icon-" + this.options.iconpos,
            addClasses = [],
            removeClasses = [];

        if ( this._hasIcon() ) {
            removeClasses.push( active );
            addClasses.push( iconposClass );
        } else {
            removeClasses.push( iconposClass );
            ( isChecked ? addClasses : removeClasses ).push( active );
        }

        if ( isChecked ) {
            addClasses.push( this.checkedClass );
            removeClasses.push( this.uncheckedClass );
        } else {
            addClasses.push( this.uncheckedClass );
            removeClasses.push( this.checkedClass );
        }

        this.widget().toggleClass( "ui-state-disabled", this.element.prop( "disabled" ) );

        this.label
            .addClass( addClasses.join( " " ) )
            .removeClass( removeClasses.join( " " ) );
    },

    widget: function() {
        return this.label.parent();
    },

    _setOptions: function( options ) {
        var label = this.label,
            currentOptions = this.options,
            outer = this.widget(),
            hasIcon = this._hasIcon();

        if ( options.disabled !== undefined ) {
            this.input.prop( "disabled", !!options.disabled );
            outer.toggleClass( "ui-state-disabled", !!options.disabled );
        }
        if ( options.mini !== undefined ) {
            outer.toggleClass( "ui-mini", !!options.mini );
        }
        if ( options.theme !== undefined ) {
            label
                .removeClass( "ui-btn-" + currentOptions.theme )
                .addClass( "ui-btn-" + options.theme );
        }
        if ( options.wrapperClass !== undefined ) {
            outer
                .removeClass( currentOptions.wrapperClass )
                .addClass( options.wrapperClass );
        }
        if ( options.iconpos !== undefined && hasIcon ) {
            label.removeClass( "ui-btn-icon-" + currentOptions.iconpos ).addClass( "ui-btn-icon-" + options.iconpos );
        } else if ( !hasIcon ) {
            label.removeClass( "ui-btn-icon-" + currentOptions.iconpos );
        }
        this._super( options );
    }

}, $.mobile.behaviors.formReset ) );

})( jQuery );

(function( $, undefined ) {

$.widget( "mobile.button", {

    initSelector: "input[type='button'], input[type='submit'], input[type='reset']",

    options: {
        theme: null,
        icon: null,
        iconpos: "left",
        iconshadow: false, /* TODO: Deprecated in 1.4, remove in 1.5. */
        corners: true,
        shadow: true,
        inline: null,
        mini: null,
        wrapperClass: null,
        enhanced: false
    },

    _create: function() {

        if ( this.element.is( ":disabled" ) ) {
            this.options.disabled = true;
        }

        if ( !this.options.enhanced ) {
            this._enhance();
        }

        $.extend( this, {
            wrapper: this.element.parent()
        });

        this._on( {
            focus: function() {
                this.widget().addClass( $.mobile.focusClass );
            },

            blur: function() {
                this.widget().removeClass( $.mobile.focusClass );
            }
        });

        this.refresh( true );
    },

    _enhance: function() {
        this.element.wrap( this._button() );
    },

    _button: function() {
        var options = this.options,
            iconClasses = this._getIconClasses( this.options );

        return $("<div class='ui-btn ui-input-btn" +
            ( options.wrapperClass ? " " + options.wrapperClass : "" ) +
            ( options.theme ? " ui-btn-" + options.theme : "" ) +
            ( options.corners ? " ui-corner-all" : "" ) +
            ( options.shadow ? " ui-shadow" : "" ) +
            ( options.inline ? " ui-btn-inline" : "" ) +
            ( options.mini ? " ui-mini" : "" ) +
            ( options.disabled ? " ui-state-disabled" : "" ) +
            ( iconClasses ? ( " " + iconClasses ) : "" ) +
            "' >" + this.element.val() + "</div>" );
    },

    widget: function() {
        return this.wrapper;
    },

    _destroy: function() {
            this.element.insertBefore( this.wrapper );
            this.wrapper.remove();
    },

    _getIconClasses: function( options ) {
        return ( options.icon ? ( "ui-icon-" + options.icon +
            ( options.iconshadow ? " ui-shadow-icon" : "" ) + /* TODO: Deprecated in 1.4, remove in 1.5. */
            " ui-btn-icon-" + options.iconpos ) : "" );
    },

    _setOptions: function( options ) {
        var outer = this.widget();

        if ( options.theme !== undefined ) {
            outer
                .removeClass( this.options.theme )
                .addClass( "ui-btn-" + options.theme );
        }
        if ( options.corners !== undefined ) {
            outer.toggleClass( "ui-corner-all", options.corners );
        }
        if ( options.shadow !== undefined ) {
            outer.toggleClass( "ui-shadow", options.shadow );
        }
        if ( options.inline !== undefined ) {
            outer.toggleClass( "ui-btn-inline", options.inline );
        }
        if ( options.mini !== undefined ) {
            outer.toggleClass( "ui-mini", options.mini );
        }
        if ( options.disabled !== undefined ) {
            this.element.prop( "disabled", options.disabled );
            outer.toggleClass( "ui-state-disabled", options.disabled );
        }

        if ( options.icon !== undefined ||
                options.iconshadow !== undefined || /* TODO: Deprecated in 1.4, remove in 1.5. */
                options.iconpos !== undefined ) {
            outer
                .removeClass( this._getIconClasses( this.options ) )
                .addClass( this._getIconClasses(
                    $.extend( {}, this.options, options ) ) );
        }

        this._super( options );
    },

    refresh: function( create ) {
        var originalElement,
            isDisabled = this.element.prop( "disabled" );

        if ( this.options.icon && this.options.iconpos === "notext" && this.element.attr( "title" ) ) {
            this.element.attr( "title", this.element.val() );
        }
        if ( !create ) {
            originalElement = this.element.detach();
            $( this.wrapper ).text( this.element.val() ).append( originalElement );
        }
        if ( this.options.disabled !== isDisabled ) {
            this._setOptions({ disabled: isDisabled });
        }
    }
});

})( jQuery );

(function( $ ) {
    var    meta = $( "meta[name=viewport]" ),
        initialContent = meta.attr( "content" ),
        disabledZoom = initialContent + ",maximum-scale=1, user-scalable=no",
        enabledZoom = initialContent + ",maximum-scale=10, user-scalable=yes",
        disabledInitially = /(user-scalable[\s]*=[\s]*no)|(maximum-scale[\s]*=[\s]*1)[$,\s]/.test( initialContent );

    $.mobile.zoom = $.extend( {}, {
        enabled: !disabledInitially,
        locked: false,
        disable: function( lock ) {
            if ( !disabledInitially && !$.mobile.zoom.locked ) {
                meta.attr( "content", disabledZoom );
                $.mobile.zoom.enabled = false;
                $.mobile.zoom.locked = lock || false;
            }
        },
        enable: function( unlock ) {
            if ( !disabledInitially && ( !$.mobile.zoom.locked || unlock === true ) ) {
                meta.attr( "content", enabledZoom );
                $.mobile.zoom.enabled = true;
                $.mobile.zoom.locked = false;
            }
        },
        restore: function() {
            if ( !disabledInitially ) {
                meta.attr( "content", initialContent );
                $.mobile.zoom.enabled = true;
            }
        }
    });

}( jQuery ));

(function( $, undefined ) {

$.widget( "mobile.textinput", {
    initSelector: "input[type='text']," +
        "input[type='search']," +
        ":jqmData(type='search')," +
        "input[type='number']," +
        ":jqmData(type='number')," +
        "input[type='password']," +
        "input[type='email']," +
        "input[type='url']," +
        "input[type='tel']," +
        "textarea," +
        "input[type='time']," +
        "input[type='date']," +
        "input[type='month']," +
        "input[type='week']," +
        "input[type='datetime']," +
        "input[type='datetime-local']," +
        "input[type='color']," +
        "input:not([type])," +
        "input[type='file']",

    options: {
        theme: null,
        corners: true,
        mini: false,
        // This option defaults to true on iOS devices.
        preventFocusZoom: /iPhone|iPad|iPod/.test( navigator.platform ) && navigator.userAgent.indexOf( "AppleWebKit" ) > -1,
        wrapperClass: "",
        enhanced: false
    },

    _create: function() {

        var options = this.options,
            isSearch = this.element.is( "[type='search'], :jqmData(type='search')" ),
            isTextarea = this.element[ 0 ].tagName === "TEXTAREA",
            isRange = this.element.is( "[data-" + ( $.mobile.ns || "" ) + "type='range']" ),
            inputNeedsWrap = ( (this.element.is( "input" ) ||
                this.element.is( "[data-" + ( $.mobile.ns || "" ) + "type='search']" ) ) &&
                    !isRange );

        if ( this.element.prop( "disabled" ) ) {
            options.disabled = true;
        }

        $.extend( this, {
            classes: this._classesFromOptions(),
            isSearch: isSearch,
            isTextarea: isTextarea,
            isRange: isRange,
            inputNeedsWrap: inputNeedsWrap
        });

        this._autoCorrect();

        if ( !options.enhanced ) {
            this._enhance();
        }

        this._on( {
            "focus": "_handleFocus",
            "blur": "_handleBlur"
        });

    },

    refresh: function() {
        this.setOptions({
            "disabled" : this.element.is( ":disabled" )
        });
    },

    _enhance: function() {
        var elementClasses = [];

        if ( this.isTextarea ) {
            elementClasses.push( "ui-input-text" );
        }

        if ( this.isTextarea || this.isRange ) {
            elementClasses.push( "ui-shadow-inset" );
        }

        //"search" and "text" input widgets
        if ( this.inputNeedsWrap ) {
            this.element.wrap( this._wrap() );
        } else {
            elementClasses = elementClasses.concat( this.classes );
        }

        this.element.addClass( elementClasses.join( " " ) );
    },

    widget: function() {
        return ( this.inputNeedsWrap ) ? this.element.parent() : this.element;
    },

    _classesFromOptions: function() {
        var options = this.options,
            classes = [];

        classes.push( "ui-body-" + ( ( options.theme === null ) ? "inherit" : options.theme ) );
        if ( options.corners ) {
            classes.push( "ui-corner-all" );
        }
        if ( options.mini ) {
            classes.push( "ui-mini" );
        }
        if ( options.disabled ) {
            classes.push( "ui-state-disabled" );
        }
        if ( options.wrapperClass ) {
            classes.push( options.wrapperClass );
        }

        return classes;
    },

    _wrap: function() {
        return $( "<div class='" +
            ( this.isSearch ? "ui-input-search " : "ui-input-text " ) +
            this.classes.join( " " ) + " " +
            "ui-shadow-inset'></div>" );
    },

    _autoCorrect: function() {
        // XXX: Temporary workaround for issue 785 (Apple bug 8910589).
        //      Turn off autocorrect and autocomplete on non-iOS 5 devices
        //      since the popup they use can't be dismissed by the user. Note
        //      that we test for the presence of the feature by looking for
        //      the autocorrect property on the input element. We currently
        //      have no test for iOS 5 or newer so we're temporarily using
        //      the touchOverflow support flag for jQM 1.0. Yes, I feel dirty.
        //      - jblas
        if ( typeof this.element[0].autocorrect !== "undefined" &&
            !$.support.touchOverflow ) {

            // Set the attribute instead of the property just in case there
            // is code that attempts to make modifications via HTML.
            this.element[0].setAttribute( "autocorrect", "off" );
            this.element[0].setAttribute( "autocomplete", "off" );
        }
    },

    _handleBlur: function() {
        this.widget().removeClass( $.mobile.focusClass );
        if ( this.options.preventFocusZoom ) {
            $.mobile.zoom.enable( true );
        }
    },

    _handleFocus: function() {
        // In many situations, iOS will zoom into the input upon tap, this
        // prevents that from happening
        if ( this.options.preventFocusZoom ) {
            $.mobile.zoom.disable( true );
        }
        this.widget().addClass( $.mobile.focusClass );
    },

    _setOptions: function ( options ) {
        var outer = this.widget();

        this._super( options );

        if ( !( options.disabled === undefined &&
            options.mini === undefined &&
            options.corners === undefined &&
            options.theme === undefined &&
            options.wrapperClass === undefined ) ) {

            outer.removeClass( this.classes.join( " " ) );
            this.classes = this._classesFromOptions();
            outer.addClass( this.classes.join( " " ) );
        }

        if ( options.disabled !== undefined ) {
            this.element.prop( "disabled", !!options.disabled );
        }
    },

    _destroy: function() {
        if ( this.options.enhanced ) {
            return;
        }
        if ( this.inputNeedsWrap ) {
            this.element.unwrap();
        }
        this.element.removeClass( "ui-input-text " + this.classes.join( " " ) );
    }
});

})( jQuery );

(function( $, undefined ) {

$.widget( "mobile.slider", $.extend( {
    initSelector: "input[type='range'], :jqmData(type='range'), :jqmData(role='slider')",

    widgetEventPrefix: "slide",

    options: {
        theme: null,
        trackTheme: null,
        corners: true,
        mini: false,
        highlight: false
    },

    _create: function() {

        // TODO: Each of these should have comments explain what they're for
        var self = this,
            control = this.element,
            trackTheme = this.options.trackTheme || $.mobile.getAttribute( control[ 0 ], "theme" ),
            trackThemeClass = trackTheme ? " ui-bar-" + trackTheme : " ui-bar-inherit",
            cornerClass = ( this.options.corners || control.jqmData( "corners" ) ) ? " ui-corner-all" : "",
            miniClass = ( this.options.mini || control.jqmData( "mini" ) ) ? " ui-mini" : "",
            cType = control[ 0 ].nodeName.toLowerCase(),
            isToggleSwitch = ( cType === "select" ),
            isRangeslider = control.parent().is( ":jqmData(role='rangeslider')" ),
            selectClass = ( isToggleSwitch ) ? "ui-slider-switch" : "",
            controlID = control.attr( "id" ),
            $label = $( "[for='" + controlID + "']" ),
            labelID = $label.attr( "id" ) || controlID + "-label",
            min = !isToggleSwitch ? parseFloat( control.attr( "min" ) ) : 0,
            max =  !isToggleSwitch ? parseFloat( control.attr( "max" ) ) : control.find( "option" ).length-1,
            step = window.parseFloat( control.attr( "step" ) || 1 ),
            domHandle = document.createElement( "a" ),
            handle = $( domHandle ),
            domSlider = document.createElement( "div" ),
            slider = $( domSlider ),
            valuebg = this.options.highlight && !isToggleSwitch ? (function() {
                var bg = document.createElement( "div" );
                bg.className = "ui-slider-bg " + $.mobile.activeBtnClass;
                return $( bg ).prependTo( slider );
            })() : false,
            options,
            wrapper,
            j, length,
            i, optionsCount, origTabIndex,
            side, activeClass, sliderImg;

        $label.attr( "id", labelID );
        this.isToggleSwitch = isToggleSwitch;

        domHandle.setAttribute( "href", "#" );
        domSlider.setAttribute( "role", "application" );
        domSlider.className = [ this.isToggleSwitch ? "ui-slider ui-slider-track ui-shadow-inset " : "ui-slider-track ui-shadow-inset ", selectClass, trackThemeClass, cornerClass, miniClass ].join( "" );
        domHandle.className = "ui-slider-handle";
        domSlider.appendChild( domHandle );

        handle.attr({
            "role": "slider",
            "aria-valuemin": min,
            "aria-valuemax": max,
            "aria-valuenow": this._value(),
            "aria-valuetext": this._value(),
            "title": this._value(),
            "aria-labelledby": labelID
        });

        $.extend( this, {
            slider: slider,
            handle: handle,
            control: control,
            type: cType,
            step: step,
            max: max,
            min: min,
            valuebg: valuebg,
            isRangeslider: isRangeslider,
            dragging: false,
            beforeStart: null,
            userModified: false,
            mouseMoved: false
        });

        if ( isToggleSwitch ) {
            // TODO: restore original tabindex (if any) in a destroy method
            origTabIndex = control.attr( "tabindex" );
            if ( origTabIndex ) {
                handle.attr( "tabindex", origTabIndex );
            }
            control.attr( "tabindex", "-1" ).focus(function() {
                $( this ).blur();
                handle.focus();
            });

            wrapper = document.createElement( "div" );
            wrapper.className = "ui-slider-inneroffset";

            for ( j = 0, length = domSlider.childNodes.length; j < length; j++ ) {
                wrapper.appendChild( domSlider.childNodes[j] );
            }

            domSlider.appendChild( wrapper );

            // slider.wrapInner( "<div class='ui-slider-inneroffset'></div>" );

            // make the handle move with a smooth transition
            handle.addClass( "ui-slider-handle-snapping" );

            options = control.find( "option" );

            for ( i = 0, optionsCount = options.length; i < optionsCount; i++ ) {
                side = !i ? "b" : "a";
                activeClass = !i ? "" : " " + $.mobile.activeBtnClass;
                sliderImg = document.createElement( "span" );

                sliderImg.className = [ "ui-slider-label ui-slider-label-", side, activeClass ].join( "" );
                sliderImg.setAttribute( "role", "img" );
                sliderImg.appendChild( document.createTextNode( options[i].innerHTML ) );
                $( sliderImg ).prependTo( slider );
            }

            self._labels = $( ".ui-slider-label", slider );

        }

        // monitor the input for updated values
        control.addClass( isToggleSwitch ? "ui-slider-switch" : "ui-slider-input" );

        this._on( control, {
            "change": "_controlChange",
            "keyup": "_controlKeyup",
            "blur": "_controlBlur",
            "vmouseup": "_controlVMouseUp"
        });

        slider.bind( "vmousedown", $.proxy( this._sliderVMouseDown, this ) )
            .bind( "vclick", false );

        // We have to instantiate a new function object for the unbind to work properly
        // since the method itself is defined in the prototype (causing it to unbind everything)
        this._on( document, { "vmousemove": "_preventDocumentDrag" });
        this._on( slider.add( document ), { "vmouseup": "_sliderVMouseUp" });

        slider.insertAfter( control );

        // wrap in a div for styling purposes
        if ( !isToggleSwitch && !isRangeslider ) {
            wrapper = this.options.mini ? "<div class='ui-slider ui-mini'>" : "<div class='ui-slider'>";

            control.add( slider ).wrapAll( wrapper );
        }

        // bind the handle event callbacks and set the context to the widget instance
        this._on( this.handle, {
            "vmousedown": "_handleVMouseDown",
            "keydown": "_handleKeydown",
            "keyup": "_handleKeyup"
        });

        this.handle.bind( "vclick", false );

        this._handleFormReset();

        this.refresh( undefined, undefined, true );
    },

    _setOptions: function( options ) {
        if ( options.theme !== undefined ) {
            this._setTheme( options.theme );
        }

        if ( options.trackTheme !== undefined ) {
            this._setTrackTheme( options.trackTheme );
        }

        if ( options.corners !== undefined ) {
            this._setCorners( options.corners );
        }

        if ( options.mini !== undefined ) {
            this._setMini( options.mini );
        }

        if ( options.highlight !== undefined ) {
            this._setHighlight( options.highlight );
        }

        if ( options.disabled !== undefined ) {
            this._setDisabled( options.disabled );
        }
        this._super( options );
    },

    _controlChange: function( event ) {
        // if the user dragged the handle, the "change" event was triggered from inside refresh(); don't call refresh() again
        if ( this._trigger( "controlchange", event ) === false ) {
            return false;
        }
        if ( !this.mouseMoved ) {
            this.refresh( this._value(), true );
        }
    },

    _controlKeyup: function(/* event */) { // necessary?
        this.refresh( this._value(), true, true );
    },

    _controlBlur: function(/* event */) {
        this.refresh( this._value(), true );
    },

    // it appears the clicking the up and down buttons in chrome on
    // range/number inputs doesn't trigger a change until the field is
    // blurred. Here we check thif the value has changed and refresh
    _controlVMouseUp: function(/* event */) {
        this._checkedRefresh();
    },

    // NOTE force focus on handle
    _handleVMouseDown: function(/* event */) {
        this.handle.focus();
    },

    _handleKeydown: function( event ) {
        var index = this._value();
        if ( this.options.disabled ) {
            return;
        }

        // In all cases prevent the default and mark the handle as active
        switch ( event.keyCode ) {
            case $.mobile.keyCode.HOME:
            case $.mobile.keyCode.END:
            case $.mobile.keyCode.PAGE_UP:
            case $.mobile.keyCode.PAGE_DOWN:
            case $.mobile.keyCode.UP:
            case $.mobile.keyCode.RIGHT:
            case $.mobile.keyCode.DOWN:
            case $.mobile.keyCode.LEFT:
                event.preventDefault();

                if ( !this._keySliding ) {
                    this._keySliding = true;
                    this.handle.addClass( "ui-state-active" ); /* TODO: We don't use this class for styling. Do we need to add it? */
                }

                break;
        }

        // move the slider according to the keypress
        switch ( event.keyCode ) {
            case $.mobile.keyCode.HOME:
                this.refresh( this.min );
                break;
            case $.mobile.keyCode.END:
                this.refresh( this.max );
                break;
            case $.mobile.keyCode.PAGE_UP:
            case $.mobile.keyCode.UP:
            case $.mobile.keyCode.RIGHT:
                this.refresh( index + this.step );
                break;
            case $.mobile.keyCode.PAGE_DOWN:
            case $.mobile.keyCode.DOWN:
            case $.mobile.keyCode.LEFT:
                this.refresh( index - this.step );
                break;
        }
    }, // remove active mark

    _handleKeyup: function(/* event */) {
        if ( this._keySliding ) {
            this._keySliding = false;
            this.handle.removeClass( "ui-state-active" ); /* See comment above. */
        }
    },

    _sliderVMouseDown: function( event ) {
        // NOTE: we don't do this in refresh because we still want to
        //       support programmatic alteration of disabled inputs
        if ( this.options.disabled || !( event.which === 1 || event.which === 0 || event.which === undefined ) ) {
            return false;
        }
        if ( this._trigger( "beforestart", event ) === false ) {
            return false;
        }
        this.dragging = true;
        this.userModified = false;
        this.mouseMoved = false;

        if ( this.isToggleSwitch ) {
            this.beforeStart = this.element[0].selectedIndex;
        }

        this.refresh( event );
        this._trigger( "start" );
        return false;
    },

    _sliderVMouseUp: function() {
        if ( this.dragging ) {
            this.dragging = false;

            if ( this.isToggleSwitch ) {
                // make the handle move with a smooth transition
                this.handle.addClass( "ui-slider-handle-snapping" );

                if ( this.mouseMoved ) {
                    // this is a drag, change the value only if user dragged enough
                    if ( this.userModified ) {
                        this.refresh( this.beforeStart === 0 ? 1 : 0 );
                    } else {
                        this.refresh( this.beforeStart );
                    }
                } else {
                    // this is just a click, change the value
                    this.refresh( this.beforeStart === 0 ? 1 : 0 );
                }
            }

            this.mouseMoved = false;
            this._trigger( "stop" );
            return false;
        }
    },

    _preventDocumentDrag: function( event ) {
            // NOTE: we don't do this in refresh because we still want to
            //       support programmatic alteration of disabled inputs
            if ( this._trigger( "drag", event ) === false) {
                return false;
            }
            if ( this.dragging && !this.options.disabled ) {

                // this.mouseMoved must be updated before refresh() because it will be used in the control "change" event
                this.mouseMoved = true;

                if ( this.isToggleSwitch ) {
                    // make the handle move in sync with the mouse
                    this.handle.removeClass( "ui-slider-handle-snapping" );
                }

                this.refresh( event );

                // only after refresh() you can calculate this.userModified
                this.userModified = this.beforeStart !== this.element[0].selectedIndex;
                return false;
            }
        },

    _checkedRefresh: function() {
        if ( this.value !== this._value() ) {
            this.refresh( this._value() );
        }
    },

    _value: function() {
        return  this.isToggleSwitch ? this.element[0].selectedIndex : parseFloat( this.element.val() ) ;
    },

    _reset: function() {
        this.refresh( undefined, false, true );
    },

    refresh: function( val, isfromControl, preventInputUpdate ) {
        // NOTE: we don't return here because we want to support programmatic
        //       alteration of the input value, which should still update the slider

        var self = this,
            parentTheme = $.mobile.getAttribute( this.element[ 0 ], "theme" ),
            theme = this.options.theme || parentTheme,
            themeClass =  theme ? " ui-btn-" + theme : "",
            trackTheme = this.options.trackTheme || parentTheme,
            trackThemeClass = trackTheme ? " ui-bar-" + trackTheme : " ui-bar-inherit",
            cornerClass = this.options.corners ? " ui-corner-all" : "",
            miniClass = this.options.mini ? " ui-mini" : "",
            left, width, data, tol,
            pxStep, percent,
            control, isInput, optionElements, min, max, step,
            newval, valModStep, alignValue, percentPerStep,
            handlePercent, aPercent, bPercent,
            valueChanged;

        self.slider[0].className = [ this.isToggleSwitch ? "ui-slider ui-slider-switch ui-slider-track ui-shadow-inset" : "ui-slider-track ui-shadow-inset", trackThemeClass, cornerClass, miniClass ].join( "" );
        if ( this.options.disabled || this.element.prop( "disabled" ) ) {
            this.disable();
        }

        // set the stored value for comparison later
        this.value = this._value();
        if ( this.options.highlight && !this.isToggleSwitch && this.slider.find( ".ui-slider-bg" ).length === 0 ) {
            this.valuebg = (function() {
                var bg = document.createElement( "div" );
                bg.className = "ui-slider-bg " + $.mobile.activeBtnClass;
                return $( bg ).prependTo( self.slider );
            })();
        }
        this.handle.addClass( "ui-btn" + themeClass + " ui-shadow" );

        control = this.element;
        isInput = !this.isToggleSwitch;
        optionElements = isInput ? [] : control.find( "option" );
        min =  isInput ? parseFloat( control.attr( "min" ) ) : 0;
        max = isInput ? parseFloat( control.attr( "max" ) ) : optionElements.length - 1;
        step = ( isInput && parseFloat( control.attr( "step" ) ) > 0 ) ? parseFloat( control.attr( "step" ) ) : 1;

        if ( typeof val === "object" ) {
            data = val;
            // a slight tolerance helped get to the ends of the slider
            tol = 8;

            left = this.slider.offset().left;
            width = this.slider.width();
            pxStep = width/((max-min)/step);
            if ( !this.dragging ||
                    data.pageX < left - tol ||
                    data.pageX > left + width + tol ) {
                return;
            }
            if ( pxStep > 1 ) {
                percent = ( ( data.pageX - left ) / width ) * 100;
            } else {
                percent = Math.round( ( ( data.pageX - left ) / width ) * 100 );
            }
        } else {
            if ( val == null ) {
                val = isInput ? parseFloat( control.val() || 0 ) : control[0].selectedIndex;
            }
            percent = ( parseFloat( val ) - min ) / ( max - min ) * 100;
        }

        if ( isNaN( percent ) ) {
            return;
        }

        newval = ( percent / 100 ) * ( max - min ) + min;

        //from jQuery UI slider, the following source will round to the nearest step
        valModStep = ( newval - min ) % step;
        alignValue = newval - valModStep;

        if ( Math.abs( valModStep ) * 2 >= step ) {
            alignValue += ( valModStep > 0 ) ? step : ( -step );
        }

        percentPerStep = 100/((max-min)/step);
        // Since JavaScript has problems with large floats, round
        // the final value to 5 digits after the decimal point (see jQueryUI: #4124)
        newval = parseFloat( alignValue.toFixed(5) );

        if ( typeof pxStep === "undefined" ) {
            pxStep = width / ( (max-min) / step );
        }
        if ( pxStep > 1 && isInput ) {
            percent = ( newval - min ) * percentPerStep * ( 1 / step );
        }
        if ( percent < 0 ) {
            percent = 0;
        }

        if ( percent > 100 ) {
            percent = 100;
        }

        if ( newval < min ) {
            newval = min;
        }

        if ( newval > max ) {
            newval = max;
        }

        this.handle.css( "left", percent + "%" );

        this.handle[0].setAttribute( "aria-valuenow", isInput ? newval : optionElements.eq( newval ).attr( "value" ) );

        this.handle[0].setAttribute( "aria-valuetext", isInput ? newval : optionElements.eq( newval ).getEncodedText() );

        this.handle[0].setAttribute( "title", isInput ? newval : optionElements.eq( newval ).getEncodedText() );

        if ( this.valuebg ) {
            this.valuebg.css( "width", percent + "%" );
        }

        // drag the label widths
        if ( this._labels ) {
            handlePercent = this.handle.width() / this.slider.width() * 100;
            aPercent = percent && handlePercent + ( 100 - handlePercent ) * percent / 100;
            bPercent = percent === 100 ? 0 : Math.min( handlePercent + 100 - aPercent, 100 );

            this._labels.each(function() {
                var ab = $( this ).hasClass( "ui-slider-label-a" );
                $( this ).width( ( ab ? aPercent : bPercent  ) + "%" );
            });
        }

        if ( !preventInputUpdate ) {
            valueChanged = false;

            // update control"s value
            if ( isInput ) {
                valueChanged = parseFloat( control.val() ) !== newval;
                control.val( newval );
            } else {
                valueChanged = control[ 0 ].selectedIndex !== newval;
                control[ 0 ].selectedIndex = newval;
            }
            if ( this._trigger( "beforechange", val ) === false) {
                    return false;
            }
            if ( !isfromControl && valueChanged ) {
                control.trigger( "change" );
            }
        }
    },

    _setHighlight: function( value ) {
        value = !!value;
        if ( value ) {
            this.options.highlight = !!value;
            this.refresh();
        } else if ( this.valuebg ) {
            this.valuebg.remove();
            this.valuebg = false;
        }
    },

    _setTheme: function( value ) {
        this.handle
            .removeClass( "ui-btn-" + this.options.theme )
            .addClass( "ui-btn-" + value );

        var currentTheme = this.options.theme ? this.options.theme : "inherit",
            newTheme = value ? value : "inherit";

        this.control
            .removeClass( "ui-body-" + currentTheme )
            .addClass( "ui-body-" + newTheme );
    },

    _setTrackTheme: function( value ) {
        var currentTrackTheme = this.options.trackTheme ? this.options.trackTheme : "inherit",
            newTrackTheme = value ? value : "inherit";

        this.slider
            .removeClass( "ui-body-" + currentTrackTheme )
            .addClass( "ui-body-" + newTrackTheme );
    },

    _setMini: function( value ) {
        value = !!value;
        if ( !this.isToggleSwitch && !this.isRangeslider ) {
            this.slider.parent().toggleClass( "ui-mini", value );
            this.element.toggleClass( "ui-mini", value );
        }
        this.slider.toggleClass( "ui-mini", value );
    },

    _setCorners: function( value ) {
        this.slider.toggleClass( "ui-corner-all", value );

        if ( !this.isToggleSwitch ) {
            this.control.toggleClass( "ui-corner-all", value );
        }
    },

    _setDisabled: function( value ) {
        value = !!value;
        this.element.prop( "disabled", value );
        this.slider
            .toggleClass( "ui-state-disabled", value )
            .attr( "aria-disabled", value );

        this.element.toggleClass( "ui-state-disabled", value );
    }

}, $.mobile.behaviors.formReset ) );

})( jQuery );

(function( $, undefined ) {

var popup;

function getPopup() {
    if ( !popup ) {
        popup = $( "<div></div>", {
            "class": "ui-slider-popup ui-shadow ui-corner-all"
        });
    }
    return popup.clone();
}

$.widget( "mobile.slider", $.mobile.slider, {
    options: {
        popupEnabled: false,
        showValue: false
    },

    _create: function() {
        this._super();

        $.extend( this, {
            _currentValue: null,
            _popup: null,
            _popupVisible: false
        });

        this._setOption( "popupEnabled", this.options.popupEnabled );

        this._on( this.handle, { "vmousedown" : "_showPopup" } );
        this._on( this.slider.add( this.document ), { "vmouseup" : "_hidePopup" } );
        this._refresh();
    },

    // position the popup centered 5px above the handle
    _positionPopup: function() {
        var dstOffset = this.handle.offset();

        this._popup.offset( {
            left: dstOffset.left + ( this.handle.width() - this._popup.width() ) / 2,
            top: dstOffset.top - this._popup.outerHeight() - 5
        });
    },

    _setOption: function( key, value ) {
        this._super( key, value );

        if ( key === "showValue" ) {
            this.handle.html( value && !this.options.mini ? this._value() : "" );
        } else if ( key === "popupEnabled" ) {
            if ( value && !this._popup ) {
                this._popup = getPopup()
                    .addClass( "ui-body-" + ( this.options.theme || "a" ) )
                    .hide()
                    .insertBefore( this.element );
            }
        }
    },

    // show value on the handle and in popup
    refresh: function() {
        this._super.apply( this, arguments );
        this._refresh();
    },

    _refresh: function() {
        var o = this.options, newValue;

        if ( o.popupEnabled ) {
            // remove the title attribute from the handle (which is
            // responsible for the annoying tooltip); NB we have
            // to do it here as the jqm slider sets it every time
            // the slider's value changes :(
            this.handle.removeAttr( "title" );
        }

        newValue = this._value();
        if ( newValue === this._currentValue ) {
            return;
        }
        this._currentValue = newValue;

        if ( o.popupEnabled && this._popup ) {
            this._positionPopup();
            this._popup.html( newValue );
        }

        if ( o.showValue && !this.options.mini ) {
            this.handle.html( newValue );
        }
    },

    _showPopup: function() {
        if ( this.options.popupEnabled && !this._popupVisible ) {
            this.handle.html( "" );
            this._popup.show();
            this._positionPopup();
            this._popupVisible = true;
        }
    },

    _hidePopup: function() {
        var o = this.options;

        if ( o.popupEnabled && this._popupVisible ) {
            if ( o.showValue && !o.mini ) {
                this.handle.html( this._value() );
            }
            this._popup.hide();
            this._popupVisible = false;
        }
    }
});

})( jQuery );

(function( $, undefined ) {

$.widget( "mobile.flipswitch", $.extend({

    options: {
        onText: "On",
        offText: "Off",
        theme: null,
        enhanced: false,
        wrapperClass: null,
        corners: true,
        mini: false
    },

    _create: function() {
            if ( !this.options.enhanced ) {
                this._enhance();
            } else {
                $.extend( this, {
                    flipswitch: this.element.parent(),
                    on: this.element.find( ".ui-flipswitch-on" ).eq( 0 ),
                    off: this.element.find( ".ui-flipswitch-off" ).eq(0),
                    type: this.element.get( 0 ).tagName
                });
            }

            this._handleFormReset();

            // Transfer tabindex to "on" element and make input unfocusable
            this._originalTabIndex = this.element.attr( "tabindex" );
            if ( this._originalTabIndex != null ) {
                this.on.attr( "tabindex", this._originalTabIndex );
            }
            this.element.attr( "tabindex", "-1" );
            this._on({
                "focus" : "_handleInputFocus"
            });

            if ( this.element.is( ":disabled" ) ) {
                this._setOptions({
                    "disabled": true
                });
            }

            this._on( this.flipswitch, {
                "click": "_toggle",
                "swipeleft": "_left",
                "swiperight": "_right"
            });

            this._on( this.on, {
                "keydown": "_keydown"
            });

            this._on( {
                "change": "refresh"
            });
    },

    _handleInputFocus: function() {
        this.on.focus();
    },

    widget: function() {
        return this.flipswitch;
    },

    _left: function() {
        this.flipswitch.removeClass( "ui-flipswitch-active" );
        if ( this.type === "SELECT" ) {
            this.element.get( 0 ).selectedIndex = 0;
        } else {
            this.element.prop( "checked", false );
        }
        this.element.trigger( "change" );
    },

    _right: function() {
        this.flipswitch.addClass( "ui-flipswitch-active" );
        if ( this.type === "SELECT" ) {
            this.element.get( 0 ).selectedIndex = 1;
        } else {
            this.element.prop( "checked", true );
        }
        this.element.trigger( "change" );
    },

    _enhance: function() {
        var flipswitch = $( "<div>" ),
            options = this.options,
            element = this.element,
            theme = options.theme ? options.theme : "inherit",

            // The "on" button is an anchor so it's focusable
            on = $( "<a></a>", {
                "href": "#"
            }),
            off = $( "<span></span>" ),
            type = element.get( 0 ).tagName,
            onText = ( type === "INPUT" ) ?
                options.onText : element.find( "option" ).eq( 1 ).text(),
            offText = ( type === "INPUT" ) ?
                options.offText : element.find( "option" ).eq( 0 ).text();

            on
                .addClass( "ui-flipswitch-on ui-btn ui-shadow ui-btn-inherit" )
                .text( onText );
            off
                .addClass( "ui-flipswitch-off" )
                .text( offText );

            flipswitch
                .addClass( "ui-flipswitch ui-shadow-inset " +
                    "ui-bar-" + theme + " " +
                    ( options.wrapperClass ? options.wrapperClass : "" ) + " " +
                    ( ( element.is( ":checked" ) ||
                        element
                            .find( "option" )
                            .eq( 1 )
                            .is( ":selected" ) ) ? "ui-flipswitch-active" : "" ) +
                    ( element.is(":disabled") ? " ui-state-disabled": "") +
                    ( options.corners ? " ui-corner-all": "" ) +
                    ( options.mini ? " ui-mini": "" ) )
                .append( on, off );

            element
                .addClass( "ui-flipswitch-input" )
                .after( flipswitch )
                .appendTo( flipswitch );

        $.extend( this, {
            flipswitch: flipswitch,
            on: on,
            off: off,
            type: type
        });
    },

    _reset: function() {
        this.refresh();
    },

    refresh: function() {
        var direction,
            existingDirection = this.flipswitch.hasClass( "ui-flipswitch-active" ) ? "_right" : "_left";

        if ( this.type === "SELECT" ) {
            direction = ( this.element.get( 0 ).selectedIndex > 0 ) ? "_right": "_left";
        } else {
            direction = this.element.prop( "checked" ) ? "_right": "_left";
        }

        if ( direction !== existingDirection ) {
            this[ direction ]();
        }
    },

    _toggle: function() {
        var direction = this.flipswitch.hasClass( "ui-flipswitch-active" ) ? "_left" : "_right";

        this[ direction ]();
    },

    _keydown: function( e ) {
        if ( e.which === $.mobile.keyCode.LEFT ) {
            this._left();
        } else if ( e.which === $.mobile.keyCode.RIGHT ) {
            this._right();
        } else if ( e.which === $.mobile.keyCode.SPACE ) {
            this._toggle();
            e.preventDefault();
        }
    },

    _setOptions: function( options ) {
        if ( options.theme !== undefined ) {
            var currentTheme = options.theme ? options.theme : "inherit",
                newTheme = options.theme ? options.theme : "inherit";

            this.widget()
                .removeClass( "ui-bar-" + currentTheme )
                .addClass( "ui-bar-" + newTheme );
        }
        if ( options.onText !== undefined ) {
            this.on.text( options.onText );
        }
        if ( options.offText !== undefined ) {
            this.off.text( options.offText );
        }
        if ( options.disabled !== undefined ) {
            this.widget().toggleClass( "ui-state-disabled", options.disabled );
        }
        if ( options.mini !== undefined ) {
            this.widget().toggleClass( "ui-mini", options.mini );
        }
        if ( options.corners !== undefined ) {
            this.widget().toggleClass( "ui-corner-all", options.corners );
        }

        this._super( options );
    },

    _destroy: function() {
        if ( this.options.enhanced ) {
            return;
        }
        if ( this._originalTabIndex != null ) {
            this.element.attr( "tabindex", this._originalTabIndex );
        } else {
            this.element.removeAttr( "tabindex" );
        }
        this.on.remove();
        this.off.remove();
        this.element.unwrap();
        this.flipswitch.remove();
        this.removeClass( "ui-flipswitch-input" );
    }

}, $.mobile.behaviors.formReset ) );

})( jQuery );

(function( $, undefined ) {
    $.widget( "mobile.rangeslider", $.extend( {

        options: {
            theme: null,
            trackTheme: null,
            corners: true,
            mini: false,
            highlight: true
        },

        _create: function() {
            var $el = this.element,
            elClass = this.options.mini ? "ui-rangeslider ui-mini" : "ui-rangeslider",
            _inputFirst = $el.find( "input" ).first(),
            _inputLast = $el.find( "input" ).last(),
            _label = $el.find( "label" ).first(),
            _sliderWidgetFirst = $.data( _inputFirst.get( 0 ), "mobile-slider" ) ||
                $.data( _inputFirst.slider().get( 0 ), "mobile-slider" ),
            _sliderWidgetLast = $.data( _inputLast.get(0), "mobile-slider" ) ||
                $.data( _inputLast.slider().get( 0 ), "mobile-slider" ),
            _sliderFirst = _sliderWidgetFirst.slider,
            _sliderLast = _sliderWidgetLast.slider,
            firstHandle = _sliderWidgetFirst.handle,
            _sliders = $( "<div class='ui-rangeslider-sliders' />" ).appendTo( $el );

            _inputFirst.addClass( "ui-rangeslider-first" );
            _inputLast.addClass( "ui-rangeslider-last" );
            $el.addClass( elClass );

            _sliderFirst.appendTo( _sliders );
            _sliderLast.appendTo( _sliders );
            _label.insertBefore( $el );
            firstHandle.prependTo( _sliderLast );

            $.extend( this, {
                _inputFirst: _inputFirst,
                _inputLast: _inputLast,
                _sliderFirst: _sliderFirst,
                _sliderLast: _sliderLast,
                _label: _label,
                _targetVal: null,
                _sliderTarget: false,
                _sliders: _sliders,
                _proxy: false
            });

            this.refresh();
            this._on( this.element.find( "input.ui-slider-input" ), {
                "slidebeforestart": "_slidebeforestart",
                "slidestop": "_slidestop",
                "slidedrag": "_slidedrag",
                "slidebeforechange": "_change",
                "blur": "_change",
                "keyup": "_change"
            });
            this._on({
                "mousedown":"_change"
            });
            this._on( this.element.closest( "form" ), {
                "reset":"_handleReset"
            });
            this._on( firstHandle, {
                "vmousedown": "_dragFirstHandle"
            });
        },
        _handleReset: function() {
            var self = this;
            //we must wait for the stack to unwind before updateing other wise sliders will not have updated yet
            setTimeout( function() {
                self._updateHighlight();
            },0);
        },

        _dragFirstHandle: function( event ) {
            //if the first handle is dragged send the event to the first slider
            $.data( this._inputFirst.get(0), "mobile-slider" ).dragging = true;
            $.data( this._inputFirst.get(0), "mobile-slider" ).refresh( event );
            $.data( this._inputFirst.get(0), "mobile-slider" )._trigger( "start" );
            return false;
        },

        _slidedrag: function( event ) {
            var first = $( event.target ).is( this._inputFirst ),
                otherSlider = ( first ) ? this._inputLast : this._inputFirst;

            this._sliderTarget = false;
            //if the drag was initiated on an extreme and the other handle is focused send the events to
            //the closest handle
            if ( ( this._proxy === "first" && first ) || ( this._proxy === "last" && !first ) ) {
                $.data( otherSlider.get(0), "mobile-slider" ).dragging = true;
                $.data( otherSlider.get(0), "mobile-slider" ).refresh( event );
                return false;
            }
        },

        _slidestop: function( event ) {
            var first = $( event.target ).is( this._inputFirst );

            this._proxy = false;
            //this stops dragging of the handle and brings the active track to the front
            //this makes clicks on the track go the the last handle used
            this.element.find( "input" ).trigger( "vmouseup" );
            this._sliderFirst.css( "z-index", first ? 1 : "" );
        },

        _slidebeforestart: function( event ) {
            this._sliderTarget = false;
            //if the track is the target remember this and the original value
            if ( $( event.originalEvent.target ).hasClass( "ui-slider-track" ) ) {
                this._sliderTarget = true;
                this._targetVal = $( event.target ).val();
            }
        },

        _setOptions: function( options ) {
            if ( options.theme !== undefined ) {
                this._setTheme( options.theme );
            }

            if ( options.trackTheme !== undefined ) {
                this._setTrackTheme( options.trackTheme );
            }

            if ( options.mini !== undefined ) {
                this._setMini( options.mini );
            }

            if ( options.highlight !== undefined ) {
                this._setHighlight( options.highlight );
            }

            if ( options.disabled !== undefined ) {
                this._setDisabled( options.disabled );
            }

            this._super( options );
            this.refresh();
        },

        refresh: function() {
            var $el = this.element,
                o = this.options;

            if ( this._inputFirst.is( ":disabled" ) || this._inputLast.is( ":disabled" ) ) {
                this.options.disabled = true;
            }

            $el.find( "input" ).slider({
                theme: o.theme,
                trackTheme: o.trackTheme,
                disabled: o.disabled,
                corners: o.corners,
                mini: o.mini,
                highlight: o.highlight
            }).slider( "refresh" );
            this._updateHighlight();
        },

        _change: function( event ) {
            if ( event.type === "keyup" ) {
                this._updateHighlight();
                return false;
            }

            var self = this,
                min = parseFloat( this._inputFirst.val(), 10 ),
                max = parseFloat( this._inputLast.val(), 10 ),
                first = $( event.target ).hasClass( "ui-rangeslider-first" ),
                thisSlider = first ? this._inputFirst : this._inputLast,
                otherSlider = first ? this._inputLast : this._inputFirst;

            if ( ( this._inputFirst.val() > this._inputLast.val() && event.type === "mousedown" && !$(event.target).hasClass("ui-slider-handle")) ) {
                thisSlider.blur();
            } else if ( event.type === "mousedown" ) {
                return;
            }
            if ( min > max && !this._sliderTarget ) {
                //this prevents min from being greater then max
                thisSlider.val( first ? max: min ).slider( "refresh" );
                this._trigger( "normalize" );
            } else if ( min > max ) {
                //this makes it so clicks on the target on either extreme go to the closest handle
                thisSlider.val( this._targetVal ).slider( "refresh" );

                //You must wait for the stack to unwind so first slider is updated before updating second
                setTimeout( function() {
                    otherSlider.val( first ? min: max ).slider( "refresh" );
                    $.data( otherSlider.get(0), "mobile-slider" ).handle.focus();
                    self._sliderFirst.css( "z-index", first ? "" : 1 );
                    self._trigger( "normalize" );
                }, 0 );
                this._proxy = ( first ) ? "first" : "last";
            }
            //fixes issue where when both _sliders are at min they cannot be adjusted
            if ( min === max ) {
                $.data( thisSlider.get(0), "mobile-slider" ).handle.css( "z-index", 1 );
                $.data( otherSlider.get(0), "mobile-slider" ).handle.css( "z-index", 0 );
            } else {
                $.data( otherSlider.get(0), "mobile-slider" ).handle.css( "z-index", "" );
                $.data( thisSlider.get(0), "mobile-slider" ).handle.css( "z-index", "" );
            }

            this._updateHighlight();

            if ( min >= max ) {
                return false;
            }
        },

        _updateHighlight: function() {
            var min = parseInt( $.data( this._inputFirst.get(0), "mobile-slider" ).handle.get(0).style.left, 10 ),
                max = parseInt( $.data( this._inputLast.get(0), "mobile-slider" ).handle.get(0).style.left, 10 ),
                width = (max - min);

            this.element.find( ".ui-slider-bg" ).css({
                "margin-left": min + "%",
                "width": width + "%"
            });
        },

        _setTheme: function( value ) {
            this._inputFirst.slider( "option", "theme", value );
            this._inputLast.slider( "option", "theme", value );
        },

        _setTrackTheme: function( value ) {
            this._inputFirst.slider( "option", "trackTheme", value );
            this._inputLast.slider( "option", "trackTheme", value );
        },

        _setMini: function( value ) {
            this._inputFirst.slider( "option", "mini", value );
            this._inputLast.slider( "option", "mini", value );
            this.element.toggleClass( "ui-mini", !!value );
        },

        _setHighlight: function( value ) {
            this._inputFirst.slider( "option", "highlight", value );
            this._inputLast.slider( "option", "highlight", value );
        },

        _setDisabled: function( value ) {
            this._inputFirst.prop( "disabled", value );
            this._inputLast.prop( "disabled", value );
        },

        _destroy: function() {
            this._label.prependTo( this.element );
            this.element.removeClass( "ui-rangeslider ui-mini" );
            this._inputFirst.after( this._sliderFirst );
            this._inputLast.after( this._sliderLast );
            this._sliders.remove();
            this.element.find( "input" ).removeClass( "ui-rangeslider-first ui-rangeslider-last" ).slider( "destroy" );
        }

    }, $.mobile.behaviors.formReset ) );

})( jQuery );

(function( $, undefined ) {

    $.widget( "mobile.textinput", $.mobile.textinput, {
        options: {
            clearBtn: false,
            clearBtnText: "Clear text"
        },

        _create: function() {
            this._super();

            if ( this.isSearch ) {
                this.options.clearBtn = true;
            }

            if ( !!this.options.clearBtn && this.inputNeedsWrap ) {
                this._addClearBtn();
            }
        },

        clearButton: function() {
            return $( "<a href='#' tabindex='-1' aria-hidden='true' " +
                "class='ui-input-clear ui-btn ui-icon-delete ui-btn-icon-notext ui-corner-all'>" +
                "</a>" )
                    .attr( "title", this.options.clearBtnText )
                    .text( this.options.clearBtnText );
        },

        _clearBtnClick: function( event ) {
            this.element.val( "" )
                    .focus()
                    .trigger( "change" );

            this._clearBtn.addClass( "ui-input-clear-hidden" );
            event.preventDefault();
        },

        _addClearBtn: function() {

            if ( !this.options.enhanced ) {
                this._enhanceClear();
            }

            $.extend( this, {
                _clearBtn: this.widget().find("a.ui-input-clear")
            });

            this._bindClearEvents();

            this._toggleClear();

        },

        _enhanceClear: function() {

            this.clearButton().appendTo( this.widget() );
            this.widget().addClass( "ui-input-has-clear" );

        },

        _bindClearEvents: function() {

            this._on( this._clearBtn, {
                "click": "_clearBtnClick"
            });

            this._on({
                "keyup": "_toggleClear",
                "change": "_toggleClear",
                "input": "_toggleClear",
                "focus": "_toggleClear",
                "blur": "_toggleClear",
                "cut": "_toggleClear",
                "paste": "_toggleClear"

            });

        },

        _unbindClear: function() {
            this._off( this._clearBtn, "click");
            this._off( this.element, "keyup change input focus blur cut paste" );
        },

        _setOptions: function( options ) {
            this._super( options );

            if ( options.clearBtn !== undefined &&
                !this.element.is( "textarea, :jqmData(type='range')" ) ) {
                if ( options.clearBtn ) {
                    this._addClearBtn();
                } else {
                    this._destroyClear();
                }
            }

            if ( options.clearBtnText !== undefined && this._clearBtn !== undefined ) {
                this._clearBtn.text( options.clearBtnText )
                    .attr("title", options.clearBtnText);
            }
        },

        _toggleClear: function() {
            this._delay( "_toggleClearClass", 0 );
        },

        _toggleClearClass: function() {
            this._clearBtn.toggleClass( "ui-input-clear-hidden", !this.element.val() );
        },

        _destroyClear: function() {
            this.widget().removeClass( "ui-input-has-clear" );
            this._unbindClear();
            this._clearBtn.remove();
        },

        _destroy: function() {
            this._super();
            if ( this.options.clearBtn ) {
                this._destroyClear();
            }
        }

    });

})( jQuery );

(function( $, undefined ) {

    $.widget( "mobile.textinput", $.mobile.textinput, {
        options: {
            autogrow:true,
            keyupTimeoutBuffer: 100
        },

        _create: function() {
            this._super();

            if ( this.options.autogrow && this.isTextarea ) {
                this._autogrow();
            }
        },

        _autogrow: function() {
            this.element.addClass( "ui-textinput-autogrow" );

            this._on({
                "keyup": "_timeout",
                "change": "_timeout",
                "input": "_timeout",
                "paste": "_timeout"
            });

            // Attach to the various you-have-become-visible notifications that the
            // various framework elements emit.
            // TODO: Remove all but the updatelayout handler once #6426 is fixed.
            this._on( true, this.document, {

                // TODO: Move to non-deprecated event
                "pageshow": "_handleShow",
                "popupbeforeposition": "_handleShow",
                "updatelayout": "_handleShow",
                "panelopen": "_handleShow"
            });
        },

        // Synchronously fix the widget height if this widget's parents are such
        // that they show/hide content at runtime. We still need to check whether
        // the widget is actually visible in case it is contained inside multiple
        // such containers. For example: panel contains collapsible contains
        // autogrow textinput. The panel may emit "panelopen" indicating that its
        // content has become visible, but the collapsible is still collapsed, so
        // the autogrow textarea is still not visible.
        _handleShow: function( event ) {
            if ( $.contains( event.target, this.element[ 0 ] ) &&
                this.element.is( ":visible" ) ) {

                if ( event.type !== "popupbeforeposition" ) {
                    this.element
                        .addClass( "ui-textinput-autogrow-resize" )
                        .animationComplete(
                            $.proxy( function() {
                                this.element.removeClass( "ui-textinput-autogrow-resize" );
                            }, this ),
                        "transition" );
                }
                this._prepareHeightUpdate();
            }
        },

        _unbindAutogrow: function() {
            this.element.removeClass( "ui-textinput-autogrow" );
            this._off( this.element, "keyup change input paste" );
            this._off( this.document,
                "pageshow popupbeforeposition updatelayout panelopen" );
        },

        keyupTimeout: null,

        _prepareHeightUpdate: function( delay ) {
            if ( this.keyupTimeout ) {
                clearTimeout( this.keyupTimeout );
            }
            if ( delay === undefined ) {
                this._updateHeight();
            } else {
                this.keyupTimeout = this._delay( "_updateHeight", delay );
            }
        },

        _timeout: function() {
            this._prepareHeightUpdate( this.options.keyupTimeoutBuffer );
        },

        _updateHeight: function() {
            var paddingTop, paddingBottom, paddingHeight, scrollHeight, clientHeight,
                borderTop, borderBottom, borderHeight, height,
                scrollTop = this.window.scrollTop();
            this.keyupTimeout = 0;

            // IE8 textareas have the onpage property - others do not
            if ( !( "onpage" in this.element[ 0 ] ) ) {
                this.element.css({
                    "height": 0,
                    "min-height": 0,
                    "max-height": 0
                });
            }

            scrollHeight = this.element[ 0 ].scrollHeight;
            clientHeight = this.element[ 0 ].clientHeight;
            borderTop = parseFloat( this.element.css( "border-top-width" ) );
            borderBottom = parseFloat( this.element.css( "border-bottom-width" ) );
            borderHeight = borderTop + borderBottom;
            height = scrollHeight + borderHeight + 15;

            // Issue 6179: Padding is not included in scrollHeight and
            // clientHeight by Firefox if no scrollbar is visible. Because
            // textareas use the border-box box-sizing model, padding should be
            // included in the new (assigned) height. Because the height is set
            // to 0, clientHeight == 0 in Firefox. Therefore, we can use this to
            // check if padding must be added.
            if ( clientHeight === 0 ) {
                paddingTop = parseFloat( this.element.css( "padding-top" ) );
                paddingBottom = parseFloat( this.element.css( "padding-bottom" ) );
                paddingHeight = paddingTop + paddingBottom;

                height += paddingHeight;
            }

            this.element.css({
                "height": height,
                "min-height": "",
                "max-height": ""
            });

            this.window.scrollTop( scrollTop );
        },

        refresh: function() {
            if ( this.options.autogrow && this.isTextarea ) {
                this._updateHeight();
            }
        },

        _setOptions: function( options ) {

            this._super( options );

            if ( options.autogrow !== undefined && this.isTextarea ) {
                if ( options.autogrow ) {
                    this._autogrow();
                } else {
                    this._unbindAutogrow();
                }
            }
        }

    });
})( jQuery );

(function( $, undefined ) {

$.widget( "mobile.selectmenu", $.extend( {
    initSelector: "select:not( :jqmData(role='slider')):not( :jqmData(role='flipswitch') )",

    options: {
        theme: null,
        icon: "carat-d",
        iconpos: "right",
        inline: false,
        corners: true,
        shadow: true,
        iconshadow: false, /* TODO: Deprecated in 1.4, remove in 1.5. */
        overlayTheme: null,
        dividerTheme: null,
        hidePlaceholderMenuItems: true,
        closeText: "Close",
        nativeMenu: true,
        // This option defaults to true on iOS devices.
        preventFocusZoom: /iPhone|iPad|iPod/.test( navigator.platform ) && navigator.userAgent.indexOf( "AppleWebKit" ) > -1,
        mini: false
    },

    _button: function() {
        return $( "<div/>" );
    },

    _setDisabled: function( value ) {
        this.element.attr( "disabled", value );
        this.button.attr( "aria-disabled", value );
        return this._setOption( "disabled", value );
    },

    _focusButton : function() {
        var self = this;

        setTimeout( function() {
            self.button.focus();
        }, 40);
    },

    _selectOptions: function() {
        return this.select.find( "option" );
    },

    // setup items that are generally necessary for select menu extension
    _preExtension: function() {
        var inline = this.options.inline || this.element.jqmData( "inline" ),
            mini = this.options.mini || this.element.jqmData( "mini" ),
            classes = "";
        // TODO: Post 1.1--once we have time to test thoroughly--any classes manually applied to the original element should be carried over to the enhanced element, with an `-enhanced` suffix. See https://github.com/jquery/jquery-mobile/issues/3577
        /* if ( $el[0].className.length ) {
            classes = $el[0].className;
        } */
        if ( !!~this.element[0].className.indexOf( "ui-btn-left" ) ) {
            classes = " ui-btn-left";
        }

        if (  !!~this.element[0].className.indexOf( "ui-btn-right" ) ) {
            classes = " ui-btn-right";
        }

        if ( inline ) {
            classes += " ui-btn-inline";
        }
        if ( mini ) {
            classes += " ui-mini";
        }

        this.select = this.element.removeClass( "ui-btn-left ui-btn-right" ).wrap( "<div class='ui-select" + classes + "'>" );
        this.selectId  = this.select.attr( "id" ) || ( "select-" + this.uuid );
        this.buttonId = this.selectId + "-button";
        this.label = $( "label[for='"+ this.selectId +"']" );
        this.isMultiple = this.select[ 0 ].multiple;
    },

    _destroy: function() {
        var wrapper = this.element.parents( ".ui-select" );
        if ( wrapper.length > 0 ) {
            if ( wrapper.is( ".ui-btn-left, .ui-btn-right" ) ) {
                this.element.addClass( wrapper.hasClass( "ui-btn-left" ) ? "ui-btn-left" : "ui-btn-right" );
            }
            this.element.insertAfter( wrapper );
            wrapper.remove();
        }
    },

    _create: function() {
        this._preExtension();

        this.button = this._button();

        var self = this,

            options = this.options,

            iconpos = options.icon ? ( options.iconpos || this.select.jqmData( "iconpos" ) ) : false,

            button = this.button
                .insertBefore( this.select )
                .attr( "id", this.buttonId )
                .addClass( "ui-btn" +
                    ( options.icon ? ( " ui-icon-" + options.icon + " ui-btn-icon-" + iconpos +
                    ( options.iconshadow ? " ui-shadow-icon" : "" ) ) :    "" ) + /* TODO: Remove in 1.5. */
                    ( options.theme ? " ui-btn-" + options.theme : "" ) +
                    ( options.corners ? " ui-corner-all" : "" ) +
                    ( options.shadow ? " ui-shadow" : "" ) );

        this.setButtonText();

        // Opera does not properly support opacity on select elements
        // In Mini, it hides the element, but not its text
        // On the desktop,it seems to do the opposite
        // for these reasons, using the nativeMenu option results in a full native select in Opera
        if ( options.nativeMenu && window.opera && window.opera.version ) {
            button.addClass( "ui-select-nativeonly" );
        }

        // Add counter for multi selects
        if ( this.isMultiple ) {
            this.buttonCount = $( "<span>" )
                .addClass( "ui-li-count ui-body-inherit" )
                .hide()
                .appendTo( button.addClass( "ui-li-has-count" ) );
        }

        // Disable if specified
        if ( options.disabled || this.element.attr( "disabled" )) {
            this.disable();
        }

        // Events on native select
        this.select.change(function() {
            self.refresh();

            if ( !!options.nativeMenu ) {
                self._delay( function() {
                    self.select.blur();
                });
            }
        });

        this._handleFormReset();

        this._on( this.button, {
            keydown: "_handleKeydown"
        });

        this.build();
    },

    build: function() {
        var self = this;

        this.select
            .appendTo( self.button )
            .bind( "vmousedown", function() {
                // Add active class to button
                self.button.addClass( $.mobile.activeBtnClass );
            })
            .bind( "focus", function() {
                self.button.addClass( $.mobile.focusClass );
            })
            .bind( "blur", function() {
                self.button.removeClass( $.mobile.focusClass );
            })
            .bind( "focus vmouseover", function() {
                self.button.trigger( "vmouseover" );
            })
            .bind( "vmousemove", function() {
                // Remove active class on scroll/touchmove
                self.button.removeClass( $.mobile.activeBtnClass );
            })
            .bind( "change blur vmouseout", function() {
                self.button.trigger( "vmouseout" )
                    .removeClass( $.mobile.activeBtnClass );
            });

        // In many situations, iOS will zoom into the select upon tap, this prevents that from happening
        self.button.bind( "vmousedown", function() {
            if ( self.options.preventFocusZoom ) {
                    $.mobile.zoom.disable( true );
            }
        });
        self.label.bind( "click focus", function() {
            if ( self.options.preventFocusZoom ) {
                    $.mobile.zoom.disable( true );
            }
        });
        self.select.bind( "focus", function() {
            if ( self.options.preventFocusZoom ) {
                    $.mobile.zoom.disable( true );
            }
        });
        self.button.bind( "mouseup", function() {
            if ( self.options.preventFocusZoom ) {
                setTimeout(function() {
                    $.mobile.zoom.enable( true );
                }, 0 );
            }
        });
        self.select.bind( "blur", function() {
            if ( self.options.preventFocusZoom ) {
                $.mobile.zoom.enable( true );
            }
        });

    },

    selected: function() {
        return this._selectOptions().filter( ":selected" );
    },

    selectedIndices: function() {
        var self = this;

        return this.selected().map(function() {
            return self._selectOptions().index( this );
        }).get();
    },

    setButtonText: function() {
        var self = this,
            selected = this.selected(),
            text = this.placeholder,
            span = $( document.createElement( "span" ) );

        this.button.children( "span" ).not( ".ui-li-count" ).remove().end().end().prepend( (function() {
            if ( selected.length ) {
                text = selected.map(function() {
                    return $( this ).text();
                }).get().join( ", " );
            } else {
                text = self.placeholder;
            }

            if ( text ) {
                span.text( text );
            } else {

                // Set the contents to &nbsp; which we write as &#160; to be XHTML compliant - see gh-6699
                span.html( "&#160;" );
            }

            // TODO possibly aggregate multiple select option classes
            return span
                .addClass( self.select.attr( "class" ) )
                .addClass( selected.attr( "class" ) )
                .removeClass( "ui-screen-hidden" );
        })());
    },

    setButtonCount: function() {
        var selected = this.selected();

        // multiple count inside button
        if ( this.isMultiple ) {
            this.buttonCount[ selected.length > 1 ? "show" : "hide" ]().text( selected.length );
        }
    },

    _handleKeydown: function( /* event */ ) {
        this._delay( "_refreshButton" );
    },

    _reset: function() {
        this.refresh();
    },

    _refreshButton: function() {
        this.setButtonText();
        this.setButtonCount();
    },

    refresh: function() {
        this._refreshButton();
    },

    // open and close preserved in native selects
    // to simplify users code when looping over selects
    open: $.noop,
    close: $.noop,

    disable: function() {
        this._setDisabled( true );
        this.button.addClass( "ui-state-disabled" );
    },

    enable: function() {
        this._setDisabled( false );
        this.button.removeClass( "ui-state-disabled" );
    }
}, $.mobile.behaviors.formReset ) );

})( jQuery );

(function( $, undefined ) {

$.mobile.links = function( target ) {

    //links within content areas, tests included with page
    $( target )
        .find( "a" )
        .jqmEnhanceable()
        .filter( ":jqmData(rel='popup')[href][href!='']" )
        .each( function() {
            // Accessibility info for popups
            var element = this,
                idref = element.getAttribute( "href" ).substring( 1 );

            if ( idref ) {
                element.setAttribute( "aria-haspopup", true );
                element.setAttribute( "aria-owns", idref );
                element.setAttribute( "aria-expanded", false );
            }
        })
        .end()
        .not( ".ui-btn, :jqmData(role='none'), :jqmData(role='nojs')" )
        .addClass( "ui-link" );

};

})( jQuery );


(function( $, undefined ) {

function fitSegmentInsideSegment( windowSize, segmentSize, offset, desired ) {
    var returnValue = desired;

    if ( windowSize < segmentSize ) {
        // Center segment if it's bigger than the window
        returnValue = offset + ( windowSize - segmentSize ) / 2;
    } else {
        // Otherwise center it at the desired coordinate while keeping it completely inside the window
        returnValue = Math.min( Math.max( offset, desired - segmentSize / 2 ), offset + windowSize - segmentSize );
    }

    return returnValue;
}

function getWindowCoordinates( theWindow ) {
    return {
        x: theWindow.scrollLeft(),
        y: theWindow.scrollTop(),
        cx: ( theWindow[ 0 ].innerWidth || theWindow.width() ),
        cy: ( theWindow[ 0 ].innerHeight || theWindow.height() )
    };
}

$.widget( "mobile.popup", {
    options: {
        wrapperClass: null,
        theme: null,
        overlayTheme: null,
        shadow: true,
        corners: true,
        transition: "none",
        positionTo: "origin",
        tolerance: null,
        closeLinkSelector: "a:jqmData(rel='back')",
        closeLinkEvents: "click.popup",
        navigateEvents: "navigate.popup",
        closeEvents: "navigate.popup pagebeforechange.popup",
        dismissible: true,
        enhanced: false,

        // NOTE Windows Phone 7 has a scroll position caching issue that
        //      requires us to disable popup history management by default
        //      https://github.com/jquery/jquery-mobile/issues/4784
        //
        // NOTE this option is modified in _create!
        history: !$.mobile.browser.oldIE
    },

    // When the user depresses the mouse/finger on an element inside the popup while the popup is
    // open, we ignore resize events for a short while. This prevents #6961.
    _handleDocumentVmousedown: function( theEvent ) {
        if ( this._isOpen && $.contains( this._ui.container[ 0 ], theEvent.target ) ) {
            this._ignoreResizeEvents();
        }
    },

    _create: function() {
        var theElement = this.element,
            myId = theElement.attr( "id" ),
            currentOptions = this.options;

        // We need to adjust the history option to be false if there's no AJAX nav.
        // We can't do it in the option declarations because those are run before
        // it is determined whether there shall be AJAX nav.
        currentOptions.history = currentOptions.history && $.mobile.ajaxEnabled && $.mobile.hashListeningEnabled;

        this._on( this.document, {
            "vmousedown": "_handleDocumentVmousedown"
        });

        // Define instance variables
        $.extend( this, {
            _scrollTop: 0,
            _page: theElement.closest( ".ui-page" ),
            _ui: null,
            _fallbackTransition: "",
            _currentTransition: false,
            _prerequisites: null,
            _isOpen: false,
            _tolerance: null,
            _resizeData: null,
            _ignoreResizeTo: 0,
            _orientationchangeInProgress: false
        });

        if ( this._page.length === 0 ) {
            this._page = $( "body" );
        }

        if ( currentOptions.enhanced ) {
            this._ui = {
                container: theElement.parent(),
                screen: theElement.parent().prev(),
                placeholder: $( this.document[ 0 ].getElementById( myId + "-placeholder" ) )
            };
        } else {
            this._ui = this._enhance( theElement, myId );
            this._applyTransition( currentOptions.transition );
        }
        this
            ._setTolerance( currentOptions.tolerance )
            ._ui.focusElement = this._ui.container;

        // Event handlers
        this._on( this._ui.screen, { "vclick": "_eatEventAndClose" } );
        this._on( this.window, {
            orientationchange: $.proxy( this, "_handleWindowOrientationchange" ),
            resize: $.proxy( this, "_handleWindowResize" ),
            keyup: $.proxy( this, "_handleWindowKeyUp" )
        });
        this._on( this.document, { "focusin": "_handleDocumentFocusIn" } );
    },

    _enhance: function( theElement, myId ) {
        var currentOptions = this.options,
            wrapperClass = currentOptions.wrapperClass,
            ui = {
                screen: $( "<div class='ui-screen-hidden ui-popup-screen " +
                this._themeClassFromOption( "ui-overlay-", currentOptions.overlayTheme ) + "'></div>" ),
                placeholder: $( "<div style='display: none;'><!-- placeholder --></div>" ),
                container: $( "<div class='ui-popup-container ui-popup-hidden ui-popup-truncate" +
                    ( wrapperClass ? ( " " + wrapperClass ) : "" ) + "'></div>" )
            },
            fragment = this.document[ 0 ].createDocumentFragment();

        fragment.appendChild( ui.screen[ 0 ] );
        fragment.appendChild( ui.container[ 0 ] );

        if ( myId ) {
            ui.screen.attr( "id", myId + "-screen" );
            ui.container.attr( "id", myId + "-popup" );
            ui.placeholder
                .attr( "id", myId + "-placeholder" )
                .html( "<!-- placeholder for " + myId + " -->" );
        }

        // Apply the proto
        this._page[ 0 ].appendChild( fragment );
        // Leave a placeholder where the element used to be
        ui.placeholder.insertAfter( theElement );
        theElement
            .detach()
            .addClass( "ui-popup " +
                this._themeClassFromOption( "ui-body-", currentOptions.theme ) + " " +
                ( currentOptions.shadow ? "ui-overlay-shadow " : "" ) +
                ( currentOptions.corners ? "ui-corner-all " : "" ) )
            .appendTo( ui.container );

        return ui;
    },

    _eatEventAndClose: function( theEvent ) {
        theEvent.preventDefault();
        theEvent.stopImmediatePropagation();
        if ( this.options.dismissible ) {
            this.close();
        }
        return false;
    },

    // Make sure the screen covers the entire document - CSS is sometimes not
    // enough to accomplish this.
    _resizeScreen: function() {
        var screen = this._ui.screen,
            popupHeight = this._ui.container.outerHeight( true ),
            screenHeight = screen.removeAttr( "style" ).height(),

            // Subtracting 1 here is necessary for an obscure Andrdoid 4.0 bug where
            // the browser hangs if the screen covers the entire document :/
            documentHeight = this.document.height() - 1;

        if ( screenHeight < documentHeight ) {
            screen.height( documentHeight );
        } else if ( popupHeight > screenHeight ) {
            screen.height( popupHeight );
        }
    },

    _handleWindowKeyUp: function( theEvent ) {
        if ( this._isOpen && theEvent.keyCode === $.mobile.keyCode.ESCAPE ) {
            return this._eatEventAndClose( theEvent );
        }
    },

    _expectResizeEvent: function() {
        var windowCoordinates = getWindowCoordinates( this.window );

        if ( this._resizeData ) {
            if ( windowCoordinates.x === this._resizeData.windowCoordinates.x &&
                windowCoordinates.y === this._resizeData.windowCoordinates.y &&
                windowCoordinates.cx === this._resizeData.windowCoordinates.cx &&
                windowCoordinates.cy === this._resizeData.windowCoordinates.cy ) {
                // timeout not refreshed
                return false;
            } else {
                // clear existing timeout - it will be refreshed below
                clearTimeout( this._resizeData.timeoutId );
            }
        }

        this._resizeData = {
            timeoutId: this._delay( "_resizeTimeout", 200 ),
            windowCoordinates: windowCoordinates
        };

        return true;
    },

    _resizeTimeout: function() {
        if ( this._isOpen ) {
            if ( !this._expectResizeEvent() ) {
                if ( this._ui.container.hasClass( "ui-popup-hidden" ) ) {
                    // effectively rapid-open the popup while leaving the screen intact
                    this._ui.container.removeClass( "ui-popup-hidden ui-popup-truncate" );
                    this.reposition( { positionTo: "window" } );
                    this._ignoreResizeEvents();
                }

                this._resizeScreen();
                this._resizeData = null;
                this._orientationchangeInProgress = false;
            }
        } else {
            this._resizeData = null;
            this._orientationchangeInProgress = false;
        }
    },

    _stopIgnoringResizeEvents: function() {
        this._ignoreResizeTo = 0;
    },

    _ignoreResizeEvents: function() {
        if ( this._ignoreResizeTo ) {
            clearTimeout( this._ignoreResizeTo );
        }
        this._ignoreResizeTo = this._delay( "_stopIgnoringResizeEvents", 1000 );
    },

    _handleWindowResize: function(/* theEvent */) {
        if ( this._isOpen && this._ignoreResizeTo === 0 ) {
            if ( ( this._expectResizeEvent() || this._orientationchangeInProgress ) &&
                !this._ui.container.hasClass( "ui-popup-hidden" ) ) {
                // effectively rapid-close the popup while leaving the screen intact
                this._ui.container
                    .addClass( "ui-popup-hidden ui-popup-truncate" )
                    .removeAttr( "style" );
            }
        }
    },

    _handleWindowOrientationchange: function(/* theEvent */) {
        if ( !this._orientationchangeInProgress && this._isOpen && this._ignoreResizeTo === 0 ) {
            this._expectResizeEvent();
            this._orientationchangeInProgress = true;
        }
    },

    // When the popup is open, attempting to focus on an element that is not a
    // child of the popup will redirect focus to the popup
    _handleDocumentFocusIn: function( theEvent ) {
        var target,
            targetElement = theEvent.target,
            ui = this._ui;

        if ( !this._isOpen ) {
            return;
        }

        if ( targetElement !== ui.container[ 0 ] ) {
            target = $( targetElement );
            if ( !$.contains( ui.container[ 0 ], targetElement ) ) {
                $( this.document[ 0 ].activeElement ).one( "focus", $.proxy( function() {
                    this._safelyBlur( targetElement );
                }, this ) );
                ui.focusElement.focus();
                theEvent.preventDefault();
                theEvent.stopImmediatePropagation();
                return false;
            } else if ( ui.focusElement[ 0 ] === ui.container[ 0 ] ) {
                ui.focusElement = target;
            }
        }

        this._ignoreResizeEvents();
    },

    _themeClassFromOption: function( prefix, value ) {
        return ( value ? ( value === "none" ? "" : ( prefix + value ) ) : ( prefix + "inherit" ) );
    },

    _applyTransition: function( value ) {
        if ( value ) {
            this._ui.container.removeClass( this._fallbackTransition );
            if ( value !== "none" ) {
                this._fallbackTransition = $.mobile._maybeDegradeTransition( value );
                if ( this._fallbackTransition === "none" ) {
                    this._fallbackTransition = "";
                }
                this._ui.container.addClass( this._fallbackTransition );
            }
        }

        return this;
    },

    _setOptions: function( newOptions ) {
        var currentOptions = this.options,
            theElement = this.element,
            screen = this._ui.screen;

        if ( newOptions.wrapperClass !== undefined ) {
            this._ui.container
                .removeClass( currentOptions.wrapperClass )
                .addClass( newOptions.wrapperClass );
        }

        if ( newOptions.theme !== undefined ) {
            theElement
                .removeClass( this._themeClassFromOption( "ui-body-", currentOptions.theme ) )
                .addClass( this._themeClassFromOption( "ui-body-", newOptions.theme ) );
        }

        if ( newOptions.overlayTheme !== undefined ) {
            screen
                .removeClass( this._themeClassFromOption( "ui-overlay-", currentOptions.overlayTheme ) )
                .addClass( this._themeClassFromOption( "ui-overlay-", newOptions.overlayTheme ) );

            if ( this._isOpen ) {
                screen.addClass( "in" );
            }
        }

        if ( newOptions.shadow !== undefined ) {
            theElement.toggleClass( "ui-overlay-shadow", newOptions.shadow );
        }

        if ( newOptions.corners !== undefined ) {
            theElement.toggleClass( "ui-corner-all", newOptions.corners );
        }

        if ( newOptions.transition !== undefined ) {
            if ( !this._currentTransition ) {
                this._applyTransition( newOptions.transition );
            }
        }

        if ( newOptions.tolerance !== undefined ) {
            this._setTolerance( newOptions.tolerance );
        }

        if ( newOptions.disabled !== undefined ) {
            if ( newOptions.disabled ) {
                this.close();
            }
        }

        return this._super( newOptions );
    },

    _setTolerance: function( value ) {
        var tol = { t: 30, r: 15, b: 30, l: 15 },
            ar;

        if ( value !== undefined ) {
            ar = String( value ).split( "," );

            $.each( ar, function( idx, val ) { ar[ idx ] = parseInt( val, 10 ); } );

            switch( ar.length ) {
                // All values are to be the same
                case 1:
                    if ( !isNaN( ar[ 0 ] ) ) {
                        tol.t = tol.r = tol.b = tol.l = ar[ 0 ];
                    }
                    break;

                // The first value denotes top/bottom tolerance, and the second value denotes left/right tolerance
                case 2:
                    if ( !isNaN( ar[ 0 ] ) ) {
                        tol.t = tol.b = ar[ 0 ];
                    }
                    if ( !isNaN( ar[ 1 ] ) ) {
                        tol.l = tol.r = ar[ 1 ];
                    }
                    break;

                // The array contains values in the order top, right, bottom, left
                case 4:
                    if ( !isNaN( ar[ 0 ] ) ) {
                        tol.t = ar[ 0 ];
                    }
                    if ( !isNaN( ar[ 1 ] ) ) {
                        tol.r = ar[ 1 ];
                    }
                    if ( !isNaN( ar[ 2 ] ) ) {
                        tol.b = ar[ 2 ];
                    }
                    if ( !isNaN( ar[ 3 ] ) ) {
                        tol.l = ar[ 3 ];
                    }
                    break;

                default:
                    break;
            }
        }

        this._tolerance = tol;
        return this;
    },

    _clampPopupWidth: function( infoOnly ) {
        var menuSize,
            windowCoordinates = getWindowCoordinates( this.window ),
            // rectangle within which the popup must fit
            rectangle = {
                x: this._tolerance.l,
                y: windowCoordinates.y + this._tolerance.t,
                cx: windowCoordinates.cx - this._tolerance.l - this._tolerance.r,
                cy: windowCoordinates.cy - this._tolerance.t - this._tolerance.b
            };

        if ( !infoOnly ) {
            // Clamp the width of the menu before grabbing its size
            this._ui.container.css( "max-width", rectangle.cx );
        }

        menuSize = {
            cx: this._ui.container.outerWidth( true ),
            cy: this._ui.container.outerHeight( true )
        };

        return { rc: rectangle, menuSize: menuSize };
    },

    _calculateFinalLocation: function( desired, clampInfo ) {
        var returnValue,
            rectangle = clampInfo.rc,
            menuSize = clampInfo.menuSize;

        // Center the menu over the desired coordinates, while not going outside
        // the window tolerances. This will center wrt. the window if the popup is
        // too large.
        returnValue = {
            left: fitSegmentInsideSegment( rectangle.cx, menuSize.cx, rectangle.x, desired.x ),
            top: fitSegmentInsideSegment( rectangle.cy, menuSize.cy, rectangle.y, desired.y )
        };

        // Make sure the top of the menu is visible
        returnValue.top = Math.max( 0, returnValue.top );

        // If the height of the menu is smaller than the height of the document
        // align the bottom with the bottom of the document

        returnValue.top -= Math.min( returnValue.top,
            Math.max( 0, returnValue.top + menuSize.cy - this.document.height() ) );

        return returnValue;
    },

    // Try and center the overlay over the given coordinates
    _placementCoords: function( desired ) {
        return this._calculateFinalLocation( desired, this._clampPopupWidth() );
    },

    _createPrerequisites: function( screenPrerequisite, containerPrerequisite, whenDone ) {
        var prerequisites,
            self = this;

        // It is important to maintain both the local variable prerequisites and
        // self._prerequisites. The local variable remains in the closure of the
        // functions which call the callbacks passed in. The comparison between the
        // local variable and self._prerequisites is necessary, because once a
        // function has been passed to .animationComplete() it will be called next
        // time an animation completes, even if that's not the animation whose end
        // the function was supposed to catch (for example, if an abort happens
        // during the opening animation, the .animationComplete handler is not
        // called for that animation anymore, but the handler remains attached, so
        // it is called the next time the popup is opened - making it stale.
        // Comparing the local variable prerequisites to the widget-level variable
        // self._prerequisites ensures that callbacks triggered by a stale
        // .animationComplete will be ignored.

        prerequisites = {
            screen: $.Deferred(),
            container: $.Deferred()
        };

        prerequisites.screen.then( function() {
            if ( prerequisites === self._prerequisites ) {
                screenPrerequisite();
            }
        });

        prerequisites.container.then( function() {
            if ( prerequisites === self._prerequisites ) {
                containerPrerequisite();
            }
        });

        $.when( prerequisites.screen, prerequisites.container ).done( function() {
            if ( prerequisites === self._prerequisites ) {
                self._prerequisites = null;
                whenDone();
            }
        });

        self._prerequisites = prerequisites;
    },

    _animate: function( args ) {
        // NOTE before removing the default animation of the screen
        //      this had an animate callback that would resolve the deferred
        //      now the deferred is resolved immediately
        // TODO remove the dependency on the screen deferred
        this._ui.screen
            .removeClass( args.classToRemove )
            .addClass( args.screenClassToAdd );

        args.prerequisites.screen.resolve();

        if ( args.transition && args.transition !== "none" ) {
            if ( args.applyTransition ) {
                this._applyTransition( args.transition );
            }
            if ( this._fallbackTransition ) {
                this._ui.container
                    .addClass( args.containerClassToAdd )
                    .removeClass( args.classToRemove )
                    .animationComplete( $.proxy( args.prerequisites.container, "resolve" ) );
                return;
            }
        }
        this._ui.container.removeClass( args.classToRemove );
        args.prerequisites.container.resolve();
    },

    // The desired coordinates passed in will be returned untouched if no reference element can be identified via
    // desiredPosition.positionTo. Nevertheless, this function ensures that its return value always contains valid
    // x and y coordinates by specifying the center middle of the window if the coordinates are absent.
    // options: { x: coordinate, y: coordinate, positionTo: string: "origin", "window", or jQuery selector
    _desiredCoords: function( openOptions ) {
        var offset,
            dst = null,
            windowCoordinates = getWindowCoordinates( this.window ),
            x = openOptions.x,
            y = openOptions.y,
            pTo = openOptions.positionTo;

        // Establish which element will serve as the reference
        if ( pTo && pTo !== "origin" ) {
            if ( pTo === "window" ) {
                x = windowCoordinates.cx / 2 + windowCoordinates.x;
                y = windowCoordinates.cy / 2 + windowCoordinates.y;
            } else {
                try {
                    dst = $( pTo );
                } catch( err ) {
                    dst = null;
                }
                if ( dst ) {
                    dst.filter( ":visible" );
                    if ( dst.length === 0 ) {
                        dst = null;
                    }
                }
            }
        }

        // If an element was found, center over it
        if ( dst ) {
            offset = dst.offset();
            x = offset.left + dst.outerWidth() / 2;
            y = offset.top + dst.outerHeight() / 2;
        }

        // Make sure x and y are valid numbers - center over the window
        if ( $.type( x ) !== "number" || isNaN( x ) ) {
            x = windowCoordinates.cx / 2 + windowCoordinates.x;
        }
        if ( $.type( y ) !== "number" || isNaN( y ) ) {
            y = windowCoordinates.cy / 2 + windowCoordinates.y;
        }

        return { x: x, y: y };
    },

    _reposition: function( openOptions ) {
        // We only care about position-related parameters for repositioning
        openOptions = {
            x: openOptions.x,
            y: openOptions.y,
            positionTo: openOptions.positionTo
        };
        this._trigger( "beforeposition", undefined, openOptions );
        this._ui.container.offset( this._placementCoords( this._desiredCoords( openOptions ) ) );
    },

    reposition: function( openOptions ) {
        if ( this._isOpen ) {
            this._reposition( openOptions );
        }
    },

    _safelyBlur: function( currentElement ){
        if ( currentElement !== this.window[ 0 ] &&
            currentElement.nodeName.toLowerCase() !== "body" ) {
                $( currentElement ).blur();
        }
    },

    _openPrerequisitesComplete: function() {
        var id = this.element.attr( "id" ),
            firstFocus = this._ui.container.find( ":focusable" ).first();

        this._ui.container.addClass( "ui-popup-active" );
        this._isOpen = true;
        this._resizeScreen();

        // Check to see if currElement is not a child of the container.  If it's not, blur
        if ( !$.contains( this._ui.container[ 0 ], this.document[ 0 ].activeElement ) ) {
            this._safelyBlur( this.document[ 0 ].activeElement );
        }
        if ( firstFocus.length > 0 ) {
            this._ui.focusElement = firstFocus;
        }
        this._ignoreResizeEvents();
        if ( id ) {
            this.document.find( "[aria-haspopup='true'][aria-owns='" +  id + "']" ).attr( "aria-expanded", true );
        }
        this._trigger( "afteropen" );
    },

    _open: function( options ) {
        var openOptions = $.extend( {}, this.options, options ),
            // TODO move blacklist to private method
            androidBlacklist = ( function() {
                var ua = navigator.userAgent,
                    // Rendering engine is Webkit, and capture major version
                    wkmatch = ua.match( /AppleWebKit\/([0-9\.]+)/ ),
                    wkversion = !!wkmatch && wkmatch[ 1 ],
                    androidmatch = ua.match( /Android (\d+(?:\.\d+))/ ),
                    andversion = !!androidmatch && androidmatch[ 1 ],
                    chromematch = ua.indexOf( "Chrome" ) > -1;

                // Platform is Android, WebKit version is greater than 534.13 ( Android 3.2.1 ) and not Chrome.
                if ( androidmatch !== null && andversion === "4.0" && wkversion && wkversion > 534.13 && !chromematch ) {
                    return true;
                }
                return false;
            }());

        // Count down to triggering "popupafteropen" - we have two prerequisites:
        // 1. The popup window animation completes (container())
        // 2. The screen opacity animation completes (screen())
        this._createPrerequisites(
            $.noop,
            $.noop,
            $.proxy( this, "_openPrerequisitesComplete" ) );

        this._currentTransition = openOptions.transition;
        this._applyTransition( openOptions.transition );

        this._ui.screen.removeClass( "ui-screen-hidden" );
        this._ui.container.removeClass( "ui-popup-truncate" );

        // Give applications a chance to modify the contents of the container before it appears
        this._reposition( openOptions );

        this._ui.container.removeClass( "ui-popup-hidden" );

        if ( this.options.overlayTheme && androidBlacklist ) {
            /* TODO: The native browser on Android 4.0.X ("Ice Cream Sandwich") suffers from an issue where the popup overlay appears to be z-indexed above the popup itself when certain other styles exist on the same page -- namely, any element set to `position: fixed` and certain types of input. These issues are reminiscent of previously uncovered bugs in older versions of Android's native browser: https://github.com/scottjehl/Device-Bugs/issues/3
            This fix closes the following bugs ( I use "closes" with reluctance, and stress that this issue should be revisited as soon as possible ):
            https://github.com/jquery/jquery-mobile/issues/4816
            https://github.com/jquery/jquery-mobile/issues/4844
            https://github.com/jquery/jquery-mobile/issues/4874
            */

            // TODO sort out why this._page isn't working
            this.element.closest( ".ui-page" ).addClass( "ui-popup-open" );
        }
        this._animate({
            additionalCondition: true,
            transition: openOptions.transition,
            classToRemove: "",
            screenClassToAdd: "in",
            containerClassToAdd: "in",
            applyTransition: false,
            prerequisites: this._prerequisites
        });
    },

    _closePrerequisiteScreen: function() {
        this._ui.screen
            .removeClass( "out" )
            .addClass( "ui-screen-hidden" );
    },

    _closePrerequisiteContainer: function() {
        this._ui.container
            .removeClass( "reverse out" )
            .addClass( "ui-popup-hidden ui-popup-truncate" )
            .removeAttr( "style" );
    },

    _closePrerequisitesDone: function() {
        var container = this._ui.container,
            id = this.element.attr( "id" );

        // remove the global mutex for popups
        $.mobile.popup.active = undefined;

        // Blur elements inside the container, including the container
        $( ":focus", container[ 0 ] ).add( container[ 0 ] ).blur();

        if ( id ) {
            this.document.find( "[aria-haspopup='true'][aria-owns='" +  id + "']" ).attr( "aria-expanded", false );
        }

        // alert users that the popup is closed
        this._trigger( "afterclose" );
    },

    _close: function( immediate ) {
        this._ui.container.removeClass( "ui-popup-active" );
        this._page.removeClass( "ui-popup-open" );

        this._isOpen = false;

        // Count down to triggering "popupafterclose" - we have two prerequisites:
        // 1. The popup window reverse animation completes (container())
        // 2. The screen opacity animation completes (screen())
        this._createPrerequisites(
            $.proxy( this, "_closePrerequisiteScreen" ),
            $.proxy( this, "_closePrerequisiteContainer" ),
            $.proxy( this, "_closePrerequisitesDone" ) );

        this._animate( {
            additionalCondition: this._ui.screen.hasClass( "in" ),
            transition: ( immediate ? "none" : ( this._currentTransition ) ),
            classToRemove: "in",
            screenClassToAdd: "out",
            containerClassToAdd: "reverse out",
            applyTransition: true,
            prerequisites: this._prerequisites
        });
    },

    _unenhance: function() {
        if ( this.options.enhanced ) {
            return;
        }

        // Put the element back to where the placeholder was and remove the "ui-popup" class
        this._setOptions( { theme: $.mobile.popup.prototype.options.theme } );
        this.element
            // Cannot directly insertAfter() - we need to detach() first, because
            // insertAfter() will do nothing if the payload div was not attached
            // to the DOM at the time the widget was created, and so the payload
            // will remain inside the container even after we call insertAfter().
            // If that happens and we remove the container a few lines below, we
            // will cause an infinite recursion - #5244
            .detach()
            .insertAfter( this._ui.placeholder )
            .removeClass( "ui-popup ui-overlay-shadow ui-corner-all ui-body-inherit" );
        this._ui.screen.remove();
        this._ui.container.remove();
        this._ui.placeholder.remove();
    },

    _destroy: function() {
        if ( $.mobile.popup.active === this ) {
            this.element.one( "popupafterclose", $.proxy( this, "_unenhance" ) );
            this.close();
        } else {
            this._unenhance();
        }

        return this;
    },

    _closePopup: function( theEvent, data ) {
        var parsedDst, toUrl,
            currentOptions = this.options,
            immediate = false;

        if ( ( theEvent && theEvent.isDefaultPrevented() ) || $.mobile.popup.active !== this ) {
            return;
        }

        // restore location on screen
        window.scrollTo( 0, this._scrollTop );

        if ( theEvent && theEvent.type === "pagebeforechange" && data ) {
            // Determine whether we need to rapid-close the popup, or whether we can
            // take the time to run the closing transition
            if ( typeof data.toPage === "string" ) {
                parsedDst = data.toPage;
            } else {
                parsedDst = data.toPage.jqmData( "url" );
            }
            parsedDst = $.mobile.path.parseUrl( parsedDst );
            toUrl = parsedDst.pathname + parsedDst.search + parsedDst.hash;

            if ( this._myUrl !== $.mobile.path.makeUrlAbsolute( toUrl ) ) {
                // Going to a different page - close immediately
                immediate = true;
            } else {
                theEvent.preventDefault();
            }
        }

        // remove nav bindings
        this.window.off( currentOptions.closeEvents );
        // unbind click handlers added when history is disabled
        this.element.undelegate( currentOptions.closeLinkSelector, currentOptions.closeLinkEvents );

        this._close( immediate );
    },

    // any navigation event after a popup is opened should close the popup
    // NOTE the pagebeforechange is bound to catch navigation events that don't
    //      alter the url (eg, dialogs from popups)
    _bindContainerClose: function() {
        this.window
            .on( this.options.closeEvents, $.proxy( this, "_closePopup" ) );
    },

    widget: function() {
        return this._ui.container;
    },

    // TODO no clear deliniation of what should be here and
    // what should be in _open. Seems to be "visual" vs "history" for now
    open: function( options ) {
        var url, hashkey, activePage, currentIsDialog, hasHash, urlHistory,
            self = this,
            currentOptions = this.options;

        // make sure open is idempotent
        if ( $.mobile.popup.active || currentOptions.disabled ) {
            return this;
        }

        // set the global popup mutex
        $.mobile.popup.active = this;
        this._scrollTop = this.window.scrollTop();

        // if history alteration is disabled close on navigate events
        // and leave the url as is
        if ( !( currentOptions.history ) ) {
            self._open( options );
            self._bindContainerClose();

            // When histoy is disabled we have to grab the data-rel
            // back link clicks so we can close the popup instead of
            // relying on history to do it for us
            self.element
                .delegate( currentOptions.closeLinkSelector, currentOptions.closeLinkEvents, function( theEvent ) {
                    self.close();
                    theEvent.preventDefault();
                });

            return this;
        }

        // cache some values for min/readability
        urlHistory = $.mobile.navigate.history;
        hashkey = $.mobile.dialogHashKey;
        activePage = $.mobile.activePage;
        currentIsDialog = ( activePage ? activePage.hasClass( "ui-dialog" ) : false );
        this._myUrl = url = urlHistory.getActive().url;
        hasHash = ( url.indexOf( hashkey ) > -1 ) && !currentIsDialog && ( urlHistory.activeIndex > 0 );

        if ( hasHash ) {
            self._open( options );
            self._bindContainerClose();
            return this;
        }

        // if the current url has no dialog hash key proceed as normal
        // otherwise, if the page is a dialog simply tack on the hash key
        if ( url.indexOf( hashkey ) === -1 && !currentIsDialog ) {
            url = url + (url.indexOf( "#" ) > -1 ? hashkey : "#" + hashkey);
        } else {
            url = $.mobile.path.parseLocation().hash + hashkey;
        }

        // swallow the the initial navigation event, and bind for the next
        this.window.one( "beforenavigate", function( theEvent ) {
            theEvent.preventDefault();
            self._open( options );
            self._bindContainerClose();
        });

        this.urlAltered = true;
        $.mobile.navigate( url, { role: "dialog" } );

        return this;
    },

    close: function() {
        // make sure close is idempotent
        if ( $.mobile.popup.active !== this ) {
            return this;
        }

        this._scrollTop = this.window.scrollTop();

        if ( this.options.history && this.urlAltered ) {
            $.mobile.back();
            this.urlAltered = false;
        } else {
            // simulate the nav bindings having fired
            this._closePopup();
        }

        return this;
    }
});

// TODO this can be moved inside the widget
$.mobile.popup.handleLink = function( $link ) {
    var offset,
        path = $.mobile.path,

        // NOTE make sure to get only the hash from the href because ie7 (wp7)
        //      returns the absolute href in this case ruining the element selection
        popup = $( path.hashToSelector( path.parseUrl( $link.attr( "href" ) ).hash ) ).first();

    if ( popup.length > 0 && popup.data( "mobile-popup" ) ) {
        offset = $link.offset();
        popup.popup( "open", {
            x: offset.left + $link.outerWidth() / 2,
            y: offset.top + $link.outerHeight() / 2,
            transition: $link.jqmData( "transition" ),
            positionTo: $link.jqmData( "position-to" )
        });
    }

    //remove after delay
    setTimeout( function() {
        $link.removeClass( $.mobile.activeBtnClass );
    }, 300 );
};

// TODO move inside _create
$.mobile.document.on( "pagebeforechange", function( theEvent, data ) {
    if ( data.options.role === "popup" ) {
        $.mobile.popup.handleLink( data.options.link );
        theEvent.preventDefault();
    }
});

})( jQuery );

/*
* custom "selectmenu" plugin
*/

(function( $, undefined ) {

var unfocusableItemSelector = ".ui-disabled,.ui-state-disabled,.ui-li-divider,.ui-screen-hidden,:jqmData(role='placeholder')",
    goToAdjacentItem = function( item, target, direction ) {
        var adjacent = item[ direction + "All" ]()
            .not( unfocusableItemSelector )
            .first();

        // if there's a previous option, focus it
        if ( adjacent.length ) {
            target
                .blur()
                .attr( "tabindex", "-1" );

            adjacent.find( "a" ).first().focus();
        }
    };

$.widget( "mobile.selectmenu", $.mobile.selectmenu, {
    _create: function() {
        var o = this.options;

        // Custom selects cannot exist inside popups, so revert the "nativeMenu"
        // option to true if a parent is a popup
        o.nativeMenu = o.nativeMenu || ( this.element.parents( ":jqmData(role='popup'),:mobile-popup" ).length > 0 );

        return this._super();
    },

    _handleSelectFocus: function() {
        this.element.blur();
        this.button.focus();
    },

    _handleKeydown: function( event ) {
        this._super( event );
        this._handleButtonVclickKeydown( event );
    },

    _handleButtonVclickKeydown: function( event ) {
        if ( this.options.disabled || this.isOpen || this.options.nativeMenu ) {
            return;
        }

        if (event.type === "vclick" ||
                event.keyCode && (event.keyCode === $.mobile.keyCode.ENTER || event.keyCode === $.mobile.keyCode.SPACE)) {

            this._decideFormat();
            if ( this.menuType === "overlay" ) {
                this.button.attr( "href", "#" + this.popupId ).attr( "data-" + ( $.mobile.ns || "" ) + "rel", "popup" );
            } else {
                this.button.attr( "href", "#" + this.dialogId ).attr( "data-" + ( $.mobile.ns || "" ) + "rel", "dialog" );
            }
            this.isOpen = true;
            // Do not prevent default, so the navigation may have a chance to actually open the chosen format
        }
    },

    _handleListFocus: function( e ) {
        var params = ( e.type === "focusin" ) ?
            { tabindex: "0", event: "vmouseover" }:
            { tabindex: "-1", event: "vmouseout" };

        $( e.target )
            .attr( "tabindex", params.tabindex )
            .trigger( params.event );
    },

    _handleListKeydown: function( event ) {
        var target = $( event.target ),
            li = target.closest( "li" );

        // switch logic based on which key was pressed
        switch ( event.keyCode ) {
            // up or left arrow keys
        case 38:
            goToAdjacentItem( li, target, "prev" );
            return false;
            // down or right arrow keys
        case 40:
            goToAdjacentItem( li, target, "next" );
            return false;
            // If enter or space is pressed, trigger click
        case 13:
        case 32:
            target.trigger( "click" );
            return false;
        }
    },

    _handleMenuPageHide: function() {

        // After the dialog's done, we may want to trigger change if the value has actually changed
        this._delayedTrigger();

        // TODO centralize page removal binding / handling in the page plugin.
        // Suggestion from @jblas to do refcounting
        //
        // TODO extremely confusing dependency on the open method where the pagehide.remove
        // bindings are stripped to prevent the parent page from disappearing. The way
        // we're keeping pages in the DOM right now sucks
        //
        // rebind the page remove that was unbound in the open function
        // to allow for the parent page removal from actions other than the use
        // of a dialog sized custom select
        //
        // doing this here provides for the back button on the custom select dialog
        this.thisPage.page( "bindRemove" );
    },

    _handleHeaderCloseClick: function() {
        if ( this.menuType === "overlay" ) {
            this.close();
            return false;
        }
    },

    _handleListItemClick: function( event ) {
        var listItem = $( event.target ).closest( "li" ),

            // Index of option tag to be selected
            oldIndex = this.select[ 0 ].selectedIndex,
            newIndex = $.mobile.getAttribute( listItem, "option-index" ),
            option = this._selectOptions().eq( newIndex )[ 0 ];

        // Toggle selected status on the tag for multi selects
        option.selected = this.isMultiple ? !option.selected : true;

        // Toggle checkbox class for multiple selects
        if ( this.isMultiple ) {
            listItem.find( "a" )
                .toggleClass( "ui-checkbox-on", option.selected )
                .toggleClass( "ui-checkbox-off", !option.selected );
        }

        // If it's not a multiple select, trigger change after it has finished closing
        if ( !this.isMultiple && oldIndex !== newIndex ) {
            this._triggerChange = true;
        }

        // Trigger change if it's a multiple select
        // Hide custom select for single selects only - otherwise focus clicked item
        // We need to grab the clicked item the hard way, because the list may have been rebuilt
        if ( this.isMultiple ) {
            this.select.trigger( "change" );
            this.list.find( "li:not(.ui-li-divider)" ).eq( newIndex )
                .find( "a" ).first().focus();
        }
        else {
            this.close();
        }

        event.preventDefault();
    },

    build: function() {
        var selectId, popupId, dialogId, label, thisPage, isMultiple, menuId,
            themeAttr, overlayTheme, overlayThemeAttr, dividerThemeAttr,
            menuPage, listbox, list, header, headerTitle, menuPageContent,
            menuPageClose, headerClose,
            o = this.options;

        if ( o.nativeMenu ) {
            return this._super();
        }

        selectId = this.selectId;
        popupId = selectId + "-listbox";
        dialogId = selectId + "-dialog";
        label = this.label;
        thisPage = this.element.closest( ".ui-page" );
        isMultiple = this.element[ 0 ].multiple;
        menuId = selectId + "-menu";
        themeAttr = o.theme ? ( " data-" + $.mobile.ns + "theme='" + o.theme + "'" ) : "";
        overlayTheme = o.overlayTheme || o.theme || null;
        overlayThemeAttr = overlayTheme ? ( " data-" + $.mobile.ns +
            "overlay-theme='" + overlayTheme + "'" ) : "";
        dividerThemeAttr = ( o.dividerTheme && isMultiple ) ? ( " data-" + $.mobile.ns + "divider-theme='" + o.dividerTheme + "'" ) : "";
        menuPage = $( "<div data-" + $.mobile.ns + "role='dialog' class='ui-selectmenu' id='" + dialogId + "'" + themeAttr + overlayThemeAttr + ">" +
            "<div data-" + $.mobile.ns + "role='header'>" +
            "<div class='ui-title'></div>"+
            "</div>"+
            "<div data-" + $.mobile.ns + "role='content'></div>"+
            "</div>" );
        listbox = $( "<div" + themeAttr + overlayThemeAttr + " id='" + popupId +
                "' class='ui-selectmenu'></div>" )
            .insertAfter( this.select )
            .popup();
        list = $( "<ul class='ui-selectmenu-list' id='" + menuId + "' role='listbox' aria-labelledby='" + this.buttonId + "'" + themeAttr + dividerThemeAttr + "></ul>" ).appendTo( listbox );
        header = $( "<div class='ui-header ui-bar-" + ( o.theme ? o.theme : "inherit" ) + "'></div>" ).prependTo( listbox );
        headerTitle = $( "<h1 class='ui-title'></h1>" ).appendTo( header );

        if ( this.isMultiple ) {
            headerClose = $( "<a>", {
                "role": "button",
                "text": o.closeText,
                "href": "#",
                "class": "ui-btn ui-corner-all ui-btn-left ui-btn-icon-notext ui-icon-delete"
            }).appendTo( header );
        }

        $.extend( this, {
            selectId: selectId,
            menuId: menuId,
            popupId: popupId,
            dialogId: dialogId,
            thisPage: thisPage,
            menuPage: menuPage,
            label: label,
            isMultiple: isMultiple,
            theme: o.theme,
            listbox: listbox,
            list: list,
            header: header,
            headerTitle: headerTitle,
            headerClose: headerClose,
            menuPageContent: menuPageContent,
            menuPageClose: menuPageClose,
            placeholder: ""
        });

        // Create list from select, update state
        this.refresh();

        if ( this._origTabIndex === undefined ) {
            // Map undefined to false, because this._origTabIndex === undefined
            // indicates that we have not yet checked whether the select has
            // originally had a tabindex attribute, whereas false indicates that
            // we have checked the select for such an attribute, and have found
            // none present.
            this._origTabIndex = ( this.select[ 0 ].getAttribute( "tabindex" ) === null ) ? false : this.select.attr( "tabindex" );
        }
        this.select.attr( "tabindex", "-1" );
        this._on( this.select, { focus : "_handleSelectFocus" } );

        // Button events
        this._on( this.button, {
            vclick: "_handleButtonVclickKeydown"
        });

        // Events for list items
        this.list.attr( "role", "listbox" );
        this._on( this.list, {
            "focusin": "_handleListFocus",
            "focusout": "_handleListFocus",
            "keydown": "_handleListKeydown",
            "click li:not(.ui-disabled,.ui-state-disabled,.ui-li-divider)": "_handleListItemClick"
        });

        // button refocus ensures proper height calculation
        // by removing the inline style and ensuring page inclusion
        this._on( this.menuPage, { pagehide: "_handleMenuPageHide" } );

        // Events on the popup
        this._on( this.listbox, { popupafterclose: "_popupClosed" } );

        // Close button on small overlays
        if ( this.isMultiple ) {
            this._on( this.headerClose, { click: "_handleHeaderCloseClick" } );
        }

        return this;
    },

    _popupClosed: function() {
        this.close();
        this._delayedTrigger();
    },

    _delayedTrigger: function() {
        if ( this._triggerChange ) {
            this.element.trigger( "change" );
        }
        this._triggerChange = false;
    },

    _isRebuildRequired: function() {
        var list = this.list.find( "li" ),
            options = this._selectOptions().not( ".ui-screen-hidden" );

        // TODO exceedingly naive method to determine difference
        // ignores value changes etc in favor of a forcedRebuild
        // from the user in the refresh method
        return options.text() !== list.text();
    },

    selected: function() {
        return this._selectOptions().filter( ":selected:not( :jqmData(placeholder='true') )" );
    },

    refresh: function( force ) {
        var self, indices;

        if ( this.options.nativeMenu ) {
            return this._super( force );
        }

        self = this;
        if ( force || this._isRebuildRequired() ) {
            self._buildList();
        }

        indices = this.selectedIndices();

        self.setButtonText();
        self.setButtonCount();

        self.list.find( "li:not(.ui-li-divider)" )
            .find( "a" ).removeClass( $.mobile.activeBtnClass ).end()
            .attr( "aria-selected", false )
            .each(function( i ) {
                var item = $( this );
                if ( $.inArray( i, indices ) > -1 ) {

                    // Aria selected attr
                    item.attr( "aria-selected", true );

                    // Multiple selects: add the "on" checkbox state to the icon
                    if ( self.isMultiple ) {
                        item.find( "a" ).removeClass( "ui-checkbox-off" ).addClass( "ui-checkbox-on" );
                    } else {
                        if ( item.hasClass( "ui-screen-hidden" ) ) {
                            item.next().find( "a" ).addClass( $.mobile.activeBtnClass );
                        } else {
                            item.find( "a" ).addClass( $.mobile.activeBtnClass );
                        }
                    }
                } else if ( self.isMultiple ) {
                    item.find( "a" ).removeClass( "ui-checkbox-on" ).addClass( "ui-checkbox-off" );
                }
            });
    },

    close: function() {
        if ( this.options.disabled || !this.isOpen ) {
            return;
        }

        var self = this;

        if ( self.menuType === "page" ) {
            self.menuPage.dialog( "close" );
            self.list.appendTo( self.listbox );
        } else {
            self.listbox.popup( "close" );
        }

        self._focusButton();
        // allow the dialog to be closed again
        self.isOpen = false;
    },

    open: function() {
        this.button.click();
    },

    _focusMenuItem: function() {
        var selector = this.list.find( "a." + $.mobile.activeBtnClass );
        if ( selector.length === 0 ) {
            selector = this.list.find( "li:not(" + unfocusableItemSelector + ") a.ui-btn" );
        }
        selector.first().focus();
    },

    _decideFormat: function() {
        var self = this,
            $window = this.window,
            selfListParent = self.list.parent(),
            menuHeight = selfListParent.outerHeight(),
            scrollTop = $window.scrollTop(),
            btnOffset = self.button.offset().top,
            screenHeight = $window.height();

        if ( menuHeight > screenHeight - 80 || !$.support.scrollTop ) {

            self.menuPage.appendTo( $.mobile.pageContainer ).page();
            self.menuPageContent = self.menuPage.find( ".ui-content" );
            self.menuPageClose = self.menuPage.find( ".ui-header a" );

            // prevent the parent page from being removed from the DOM,
            // otherwise the results of selecting a list item in the dialog
            // fall into a black hole
            self.thisPage.unbind( "pagehide.remove" );

            //for WebOS/Opera Mini (set lastscroll using button offset)
            if ( scrollTop === 0 && btnOffset > screenHeight ) {
                self.thisPage.one( "pagehide", function() {
                    $( this ).jqmData( "lastScroll", btnOffset );
                });
            }

            self.menuPage.one( {
                pageshow: $.proxy( this, "_focusMenuItem" ),
                pagehide: $.proxy( this, "close" )
            });

            self.menuType = "page";
            self.menuPageContent.append( self.list );
            self.menuPage
                .find( "div .ui-title" )
                    .text( self.label.getEncodedText() || self.placeholder );
        } else {
            self.menuType = "overlay";

            self.listbox.one( { popupafteropen: $.proxy( this, "_focusMenuItem" ) } );
        }
    },

    _buildList: function() {
        var self = this,
            o = this.options,
            placeholder = this.placeholder,
            needPlaceholder = true,
            dataIcon = "false",
            $options, numOptions, select,
            dataPrefix = "data-" + $.mobile.ns,
            dataIndexAttr = dataPrefix + "option-index",
            dataIconAttr = dataPrefix + "icon",
            dataRoleAttr = dataPrefix + "role",
            dataPlaceholderAttr = dataPrefix + "placeholder",
            fragment = document.createDocumentFragment(),
            isPlaceholderItem = false,
            optGroup,
            i,
            option, $option, parent, text, anchor, classes,
            optLabel, divider, item;

        self.list.empty().filter( ".ui-listview" ).listview( "destroy" );
        $options = this._selectOptions();
        numOptions = $options.length;
        select = this.select[ 0 ];

        for ( i = 0; i < numOptions;i++, isPlaceholderItem = false) {
            option = $options[i];
            $option = $( option );

            // Do not create options based on ui-screen-hidden select options
            if ( $option.hasClass( "ui-screen-hidden" ) ) {
                continue;
            }

            parent = option.parentNode;
            classes = [];

            // Although using .text() here raises the risk that, when we later paste this into the
            // list item we end up pasting possibly malicious things like <script> tags, that risk
            // only arises if we do something like $( "<li><a href='#'>" + text + "</a></li>" ). We
            // don't do that. We do document.createTextNode( text ) instead, which guarantees that
            // whatever we paste in will end up as text, with characters like <, > and & escaped.
            text = $option.text();
            anchor = document.createElement( "a" );
            anchor.setAttribute( "href", "#" );
            anchor.appendChild( document.createTextNode( text ) );

            // Are we inside an optgroup?
            if ( parent !== select && parent.nodeName.toLowerCase() === "optgroup" ) {
                optLabel = parent.getAttribute( "label" );
                if ( optLabel !== optGroup ) {
                    divider = document.createElement( "li" );
                    divider.setAttribute( dataRoleAttr, "list-divider" );
                    divider.setAttribute( "role", "option" );
                    divider.setAttribute( "tabindex", "-1" );
                    divider.appendChild( document.createTextNode( optLabel ) );
                    fragment.appendChild( divider );
                    optGroup = optLabel;
                }
            }

            if ( needPlaceholder && ( !option.getAttribute( "value" ) || text.length === 0 || $option.jqmData( "placeholder" ) ) ) {
                needPlaceholder = false;
                isPlaceholderItem = true;

                // If we have identified a placeholder, record the fact that it was
                // us who have added the placeholder to the option and mark it
                // retroactively in the select as well
                if ( null === option.getAttribute( dataPlaceholderAttr ) ) {
                    this._removePlaceholderAttr = true;
                }
                option.setAttribute( dataPlaceholderAttr, true );
                if ( o.hidePlaceholderMenuItems ) {
                    classes.push( "ui-screen-hidden" );
                }
                if ( placeholder !== text ) {
                    placeholder = self.placeholder = text;
                }
            }

            item = document.createElement( "li" );
            if ( option.disabled ) {
                classes.push( "ui-state-disabled" );
                item.setAttribute( "aria-disabled", true );
            }
            item.setAttribute( dataIndexAttr, i );
            item.setAttribute( dataIconAttr, dataIcon );
            if ( isPlaceholderItem ) {
                item.setAttribute( dataPlaceholderAttr, true );
            }
            item.className = classes.join( " " );
            item.setAttribute( "role", "option" );
            anchor.setAttribute( "tabindex", "-1" );
            if ( this.isMultiple ) {
                $( anchor ).addClass( "ui-btn ui-checkbox-off ui-btn-icon-right" );
            }

            item.appendChild( anchor );
            fragment.appendChild( item );
        }

        self.list[0].appendChild( fragment );

        // Hide header if it's not a multiselect and there's no placeholder
        if ( !this.isMultiple && !placeholder.length ) {
            this.header.addClass( "ui-screen-hidden" );
        } else {
            this.headerTitle.text( this.placeholder );
        }

        // Now populated, create listview
        self.list.listview();
    },

    _button: function() {
        return this.options.nativeMenu ?
            this._super() :
            $( "<a>", {
                "href": "#",
                "role": "button",
                // TODO value is undefined at creation
                "id": this.buttonId,
                "aria-haspopup": "true",

                // TODO value is undefined at creation
                "aria-owns": this.menuId
            });
    },

    _destroy: function() {

        if ( !this.options.nativeMenu ) {
            this.close();

            // Restore the tabindex attribute to its original value
            if ( this._origTabIndex !== undefined ) {
                if ( this._origTabIndex !== false ) {
                    this.select.attr( "tabindex", this._origTabIndex );
                } else {
                    this.select.removeAttr( "tabindex" );
                }
            }

            // Remove the placeholder attribute if we were the ones to add it
            if ( this._removePlaceholderAttr ) {
                this._selectOptions().removeAttr( "data-" + $.mobile.ns + "placeholder" );
            }

            // Remove the popup
            this.listbox.remove();

            // Remove the dialog
            this.menuPage.remove();
        }

        // Chain up
        this._super();
    }
});

})( jQuery );


// buttonMarkup is deprecated as of 1.4.0 and will be removed in 1.5.0.

(function( $, undefined ) {

// General policy: Do not access data-* attributes except during enhancement.
// In all other cases we determine the state of the button exclusively from its
// className. That's why optionsToClasses expects a full complement of options,
// and the jQuery plugin completes the set of options from the default values.

// Map classes to buttonMarkup boolean options - used in classNameToOptions()
var reverseBoolOptionMap = {
        "ui-shadow" : "shadow",
        "ui-corner-all" : "corners",
        "ui-btn-inline" : "inline",
        "ui-shadow-icon" : "iconshadow", /* TODO: Remove in 1.5 */
        "ui-mini" : "mini"
    },
    getAttrFixed = function() {
        var ret = $.mobile.getAttribute.apply( this, arguments );

        return ( ret == null ? undefined : ret );
    },
    capitalLettersRE = /[A-Z]/g;

// optionsToClasses:
// @options: A complete set of options to convert to class names.
// @existingClasses: extra classes to add to the result
//
// Converts @options to buttonMarkup classes and returns the result as an array
// that can be converted to an element's className with .join( " " ). All
// possible options must be set inside @options. Use $.fn.buttonMarkup.defaults
// to get a complete set and use $.extend to override your choice of options
// from that set.
function optionsToClasses( options, existingClasses ) {
    var classes = existingClasses ? existingClasses : [];

    // Add classes to the array - first ui-btn
    classes.push( "ui-btn" );

    // If there is a theme
    if ( options.theme ) {
        classes.push( "ui-btn-" + options.theme );
    }

    // If there's an icon, add the icon-related classes
    if ( options.icon ) {
        classes = classes.concat([
            "ui-icon-" + options.icon,
            "ui-btn-icon-" + options.iconpos
        ]);
        if ( options.iconshadow ) {
            classes.push( "ui-shadow-icon" ); /* TODO: Remove in 1.5 */
        }
    }

    // Add the appropriate class for each boolean option
    if ( options.inline ) {
        classes.push( "ui-btn-inline" );
    }
    if ( options.shadow ) {
        classes.push( "ui-shadow" );
    }
    if ( options.corners ) {
        classes.push( "ui-corner-all" );
    }
    if ( options.mini ) {
        classes.push( "ui-mini" );
    }

    // Create a string from the array and return it
    return classes;
}

// classNameToOptions:
// @classes: A string containing a .className-style space-separated class list
//
// Loops over @classes and calculates an options object based on the
// buttonMarkup-related classes it finds. It records unrecognized classes in an
// array.
//
// Returns: An object containing the following items:
//
// "options": buttonMarkup options found to be present because of the
// presence/absence of corresponding classes
//
// "unknownClasses": a string containing all the non-buttonMarkup-related
// classes found in @classes
//
// "alreadyEnhanced": A boolean indicating whether the ui-btn class was among
// those found to be present
function classNameToOptions( classes ) {
    var idx, map, unknownClass,
        alreadyEnhanced = false,
        noIcon = true,
        o = {
            icon: "",
            inline: false,
            shadow: false,
            corners: false,
            iconshadow: false,
            mini: false
        },
        unknownClasses = [];

    classes = classes.split( " " );

    // Loop over the classes
    for ( idx = 0 ; idx < classes.length ; idx++ ) {

        // Assume it's an unrecognized class
        unknownClass = true;

        // Recognize boolean options from the presence of classes
        map = reverseBoolOptionMap[ classes[ idx ] ];
        if ( map !== undefined ) {
            unknownClass = false;
            o[ map ] = true;

        // Recognize the presence of an icon and establish the icon position
        } else if ( classes[ idx ].indexOf( "ui-btn-icon-" ) === 0 ) {
            unknownClass = false;
            noIcon = false;
            o.iconpos = classes[ idx ].substring( 12 );

        // Establish which icon is present
        } else if ( classes[ idx ].indexOf( "ui-icon-" ) === 0 ) {
            unknownClass = false;
            o.icon = classes[ idx ].substring( 8 );

        // Establish the theme - this recognizes one-letter theme swatch names
        } else if ( classes[ idx ].indexOf( "ui-btn-" ) === 0 && classes[ idx ].length === 8 ) {
            unknownClass = false;
            o.theme = classes[ idx ].substring( 7 );

        // Recognize that this element has already been buttonMarkup-enhanced
        } else if ( classes[ idx ] === "ui-btn" ) {
            unknownClass = false;
            alreadyEnhanced = true;
        }

        // If this class has not been recognized, add it to the list
        if ( unknownClass ) {
            unknownClasses.push( classes[ idx ] );
        }
    }

    // If a "ui-btn-icon-*" icon position class is absent there cannot be an icon
    if ( noIcon ) {
        o.icon = "";
    }

    return {
        options: o,
        unknownClasses: unknownClasses,
        alreadyEnhanced: alreadyEnhanced
    };
}

function camelCase2Hyphenated( c ) {
    return "-" + c.toLowerCase();
}

// $.fn.buttonMarkup:
// DOM: gets/sets .className
//
// @options: options to apply to the elements in the jQuery object
// @overwriteClasses: boolean indicating whether to honour existing classes
//
// Calculates the classes to apply to the elements in the jQuery object based on
// the options passed in. If @overwriteClasses is true, it sets the className
// property of each element in the jQuery object to the buttonMarkup classes
// it calculates based on the options passed in.
//
// If you wish to preserve any classes that are already present on the elements
// inside the jQuery object, including buttonMarkup-related classes that were
// added by a previous call to $.fn.buttonMarkup() or during page enhancement
// then you should omit @overwriteClasses or set it to false.
$.fn.buttonMarkup = function( options, overwriteClasses ) {
    var idx, data, el, retrievedOptions, optionKey,
        defaults = $.fn.buttonMarkup.defaults;

    for ( idx = 0 ; idx < this.length ; idx++ ) {
        el = this[ idx ];
        data = overwriteClasses ?

            // Assume this element is not enhanced and ignore its classes
            { alreadyEnhanced: false, unknownClasses: [] } :

            // Otherwise analyze existing classes to establish existing options and
            // classes
            classNameToOptions( el.className );

        retrievedOptions = $.extend( {},

            // If the element already has the class ui-btn, then we assume that
            // it has passed through buttonMarkup before - otherwise, the options
            // returned by classNameToOptions do not correctly reflect the state of
            // the element
            ( data.alreadyEnhanced ? data.options : {} ),

            // Finally, apply the options passed in
            options );

        // If this is the first call on this element, retrieve remaining options
        // from the data-attributes
        if ( !data.alreadyEnhanced ) {
            for ( optionKey in defaults ) {
                if ( retrievedOptions[ optionKey ] === undefined ) {
                    retrievedOptions[ optionKey ] = getAttrFixed( el,
                        optionKey.replace( capitalLettersRE, camelCase2Hyphenated )
                    );
                }
            }
        }

        el.className = optionsToClasses(

            // Merge all the options and apply them as classes
            $.extend( {},

                // The defaults form the basis
                defaults,

                // Add the computed options
                retrievedOptions
            ),

            // ... and re-apply any unrecognized classes that were found
            data.unknownClasses ).join( " " );
        if ( el.tagName.toLowerCase() !== "button" ) {
            el.setAttribute( "role", "button" );
        }
    }

    return this;
};

// buttonMarkup defaults. This must be a complete set, i.e., a value must be
// given here for all recognized options
$.fn.buttonMarkup.defaults = {
    icon: "",
    iconpos: "left",
    theme: null,
    inline: false,
    shadow: true,
    corners: true,
    iconshadow: false, /* TODO: Remove in 1.5. Option deprecated in 1.4. */
    mini: false
};

$.extend( $.fn.buttonMarkup, {
    initSelector: "a:jqmData(role='button'), .ui-bar > a, .ui-bar > :jqmData(role='controlgroup') > a, button:not(:jqmData(role='navbar') button)"
});

})( jQuery );


(function( $, undefined ) {

$.widget( "mobile.controlgroup", $.extend( {
    options: {
        enhanced: false,
        theme: null,
        shadow: false,
        corners: true,
        excludeInvisible: true,
        type: "vertical",
        mini: false
    },

    _create: function() {
        var elem = this.element,
            opts = this.options,
            keepNative = $.mobile.page.prototype.keepNativeSelector();

        // Run buttonmarkup
        if ( $.fn.buttonMarkup ) {
            this.element
                .find( $.fn.buttonMarkup.initSelector )
                .not( keepNative )
                .buttonMarkup();
        }
        // Enhance child widgets
        $.each( this._childWidgets, $.proxy( function( number, widgetName ) {
            if ( $.mobile[ widgetName ] ) {
                this.element
                    .find( $.mobile[ widgetName ].initSelector )
                    .not( keepNative )[ widgetName ]();
            }
        }, this ));

        $.extend( this, {
            _ui: null,
            _initialRefresh: true
        });

        if ( opts.enhanced ) {
            this._ui = {
                groupLegend: elem.children( ".ui-controlgroup-label" ).children(),
                childWrapper: elem.children( ".ui-controlgroup-controls" )
            };
        } else {
            this._ui = this._enhance();
        }

    },

    _childWidgets: [ "checkboxradio", "selectmenu", "button" ],

    _themeClassFromOption: function( value ) {
        return ( value ? ( value === "none" ? "" : "ui-group-theme-" + value ) : "" );
    },

    _enhance: function() {
        var elem = this.element,
            opts = this.options,
            ui = {
                groupLegend: elem.children( "legend" ),
                childWrapper: elem
                    .addClass( "ui-controlgroup " +
                        "ui-controlgroup-" +
                            ( opts.type === "horizontal" ? "horizontal" : "vertical" ) + " " +
                        this._themeClassFromOption( opts.theme ) + " " +
                        ( opts.corners ? "ui-corner-all " : "" ) +
                        ( opts.mini ? "ui-mini " : "" ) )
                    .wrapInner( "<div " +
                        "class='ui-controlgroup-controls " +
                            ( opts.shadow === true ? "ui-shadow" : "" ) + "'></div>" )
                    .children()
            };

        if ( ui.groupLegend.length > 0 ) {
            $( "<div role='heading' class='ui-controlgroup-label'></div>" )
                .append( ui.groupLegend )
                .prependTo( elem );
        }

        return ui;
    },

    _init: function() {
        this.refresh();
    },

    _setOptions: function( options ) {
        var callRefresh, returnValue,
            elem = this.element;

        // Must have one of horizontal or vertical
        if ( options.type !== undefined ) {
            elem
                .removeClass( "ui-controlgroup-horizontal ui-controlgroup-vertical" )
                .addClass( "ui-controlgroup-" + ( options.type === "horizontal" ? "horizontal" : "vertical" ) );
            callRefresh = true;
        }

        if ( options.theme !== undefined ) {
            elem
                .removeClass( this._themeClassFromOption( this.options.theme ) )
                .addClass( this._themeClassFromOption( options.theme ) );
        }

        if ( options.corners !== undefined ) {
            elem.toggleClass( "ui-corner-all", options.corners );
        }

        if ( options.mini !== undefined ) {
            elem.toggleClass( "ui-mini", options.mini );
        }

        if ( options.shadow !== undefined ) {
            this._ui.childWrapper.toggleClass( "ui-shadow", options.shadow );
        }

        if ( options.excludeInvisible !== undefined ) {
            this.options.excludeInvisible = options.excludeInvisible;
            callRefresh = true;
        }

        returnValue = this._super( options );

        if ( callRefresh ) {
            this.refresh();
        }

        return returnValue;
    },

    container: function() {
        return this._ui.childWrapper;
    },

    refresh: function() {
        var $el = this.container(),
            els = $el.find( ".ui-btn" ).not( ".ui-slider-handle" ),
            create = this._initialRefresh;
        if ( $.mobile.checkboxradio ) {
            $el.find( ":mobile-checkboxradio" ).checkboxradio( "refresh" );
        }
        this._addFirstLastClasses( els,
            this.options.excludeInvisible ? this._getVisibles( els, create ) : els,
            create );
        this._initialRefresh = false;
    },

    // Caveat: If the legend is not the first child of the controlgroup at enhance
    // time, it will be after _destroy().
    _destroy: function() {
        var ui, buttons,
            opts = this.options;

        if ( opts.enhanced ) {
            return this;
        }

        ui = this._ui;
        buttons = this.element
            .removeClass( "ui-controlgroup " +
                "ui-controlgroup-horizontal ui-controlgroup-vertical ui-corner-all ui-mini " +
                this._themeClassFromOption( opts.theme ) )
            .find( ".ui-btn" )
            .not( ".ui-slider-handle" );

        this._removeFirstLastClasses( buttons );

        ui.groupLegend.unwrap();
        ui.childWrapper.children().unwrap();
    }
}, $.mobile.behaviors.addFirstLastClasses ) );

})(jQuery);

(function( $, undefined ) {

    $.widget( "mobile.toolbar", {
        initSelector: ":jqmData(role='footer'), :jqmData(role='header')",

        options: {
            theme: null,
            addBackBtn: false,
            backBtnTheme: null,
            backBtnText: "Back"
        },

        _create: function() {
            var leftbtn, rightbtn,
                role =  this.element.is( ":jqmData(role='header')" ) ? "header" : "footer",
                page = this.element.closest( ".ui-page" );
            if ( page.length === 0 ) {
                page = false;
                this._on( this.document, {
                    "pageshow": "refresh"
                });
            }
            $.extend( this, {
                role: role,
                page: page,
                leftbtn: leftbtn,
                rightbtn: rightbtn
            });
            this.element.attr( "role", role === "header" ? "banner" : "contentinfo" ).addClass( "ui-" + role );
            this.refresh();
            this._setOptions( this.options );
        },
        _setOptions: function( o ) {
            if ( o.addBackBtn !== undefined ) {
                this._updateBackButton();
            }
            if ( o.backBtnTheme != null ) {
                this.element
                    .find( ".ui-toolbar-back-btn" )
                    .addClass( "ui-btn ui-btn-" + o.backBtnTheme );
            }
            if ( o.backBtnText !== undefined ) {
                this.element.find( ".ui-toolbar-back-btn .ui-btn-text" ).text( o.backBtnText );
            }
            if ( o.theme !== undefined ) {
                var currentTheme = this.options.theme ? this.options.theme : "inherit",
                    newTheme = o.theme ? o.theme : "inherit";

                this.element.removeClass( "ui-bar-" + currentTheme ).addClass( "ui-bar-" + newTheme );
            }

            this._super( o );
        },
        refresh: function() {
            if ( this.role === "header" ) {
                this._addHeaderButtonClasses();
            }
            if ( !this.page ) {
                this._setRelative();
                if ( this.role === "footer" ) {
                    this.element.appendTo( "body" );
                } else if ( this.role === "header" ) {
                    this._updateBackButton();
                }
            }
            this._addHeadingClasses();
            this._btnMarkup();
        },

        //we only want this to run on non fixed toolbars so make it easy to override
        _setRelative: function() {
            $( "[data-"+ $.mobile.ns + "role='page']" ).css({ "position": "relative" });
        },

        // Deprecated in 1.4. As from 1.5 button classes have to be present in the markup.
        _btnMarkup: function() {
            this.element
                .children( "a" )
                .filter( ":not([data-" + $.mobile.ns + "role='none'])" )
                .attr( "data-" + $.mobile.ns + "role", "button" );
            this.element.trigger( "create" );
        },
        // Deprecated in 1.4. As from 1.5 ui-btn-left/right classes have to be present in the markup.
        _addHeaderButtonClasses: function() {
            var headerAnchors = this.element.children( "a, button" );

            // Do not mistake a back button for a left toolbar button
            this.leftbtn = headerAnchors.hasClass( "ui-btn-left" ) &&
                !headerAnchors.hasClass( "ui-toolbar-back-btn" );

            this.rightbtn = headerAnchors.hasClass( "ui-btn-right" );

            // Filter out right buttons and back buttons
            this.leftbtn = this.leftbtn ||
                headerAnchors.eq( 0 )
                    .not( ".ui-btn-right,.ui-toolbar-back-btn" )
                    .addClass( "ui-btn-left" )
                    .length;

            this.rightbtn = this.rightbtn || headerAnchors.eq( 1 ).addClass( "ui-btn-right" ).length;
        },
        _updateBackButton: function() {
            var backButton,
                options = this.options,
                theme = options.backBtnTheme || options.theme;

            // Retrieve the back button or create a new, empty one
            backButton = this._backButton = ( this._backButton || {} );

            // We add a back button only if the option to do so is on
            if ( this.options.addBackBtn &&

                    // This must also be a header toolbar
                    this.role === "header" &&

                    // There must be multiple pages in the DOM
                    $( ".ui-page" ).length > 1 &&
                    ( this.page ?

                        // If the toolbar is internal the page's URL must differ from the hash
                        ( this.page[ 0 ].getAttribute( "data-" + $.mobile.ns + "url" ) !==
                            $.mobile.path.stripHash( location.hash ) ) :

                        // Otherwise, if the toolbar is external there must be at least one
                        // history item to which one can go back
                        ( $.mobile.navigate && $.mobile.navigate.history &&
                            $.mobile.navigate.history.activeIndex > 0 ) ) &&

                    // The toolbar does not have a left button
                    !this.leftbtn ) {

                // Skip back button creation if one is already present
                if ( !backButton.attached ) {
                    this.backButton = backButton.element = ( backButton.element ||
                        $( "<a role='button' href='javascript:void(0);' " +
                            "class='ui-btn ui-corner-all ui-shadow ui-btn-left " +
                                ( theme ? "ui-btn-" + theme + " " : "" ) +
                                "ui-toolbar-back-btn ui-icon-carat-l ui-btn-icon-left' " +
                            "data-" + $.mobile.ns + "rel='back'>" + options.backBtnText +
                            "</a>" ) )
                            .prependTo( this.element );
                    backButton.attached = true;
                }

            // If we are not adding a back button, then remove the one present, if any
            } else if ( backButton.element ) {
                backButton.element.detach();
                backButton.attached = false;
            }
        },
        _addHeadingClasses: function() {
            this.element.children( "h1, h2, h3, h4, h5, h6" )
                .addClass( "ui-title" )
                // Regardless of h element number in src, it becomes h1 for the enhanced page
                .attr({
                    "role": "heading",
                    "aria-level": "1"
                });
        },
        _destroy: function() {
            var currentTheme;

            this.element.children( "h1, h2, h3, h4, h5, h6" )
                .removeClass( "ui-title" )
                .removeAttr( "role" )
                .removeAttr( "aria-level" );

            if ( this.role === "header" ) {
                this.element.children( "a, button" )
                    .removeClass( "ui-btn-left ui-btn-right ui-btn ui-shadow ui-corner-all" );
                if ( this.backButton) {
                    this.backButton.remove();
                }
            }

            currentTheme = this.options.theme ? this.options.theme : "inherit";
            this.element.removeClass( "ui-bar-" + currentTheme );

            this.element.removeClass( "ui-" + this.role ).removeAttr( "role" );
        }
    });

})( jQuery );

(function( $, undefined ) {

    $.widget( "mobile.toolbar", $.mobile.toolbar, {
        options: {
            position:null,
            visibleOnPageShow: true,
            disablePageZoom: true,
            transition: "slide", //can be none, fade, slide (slide maps to slideup or slidedown)
            fullscreen: false,
            tapToggle: true,
            tapToggleBlacklist: "a, button, input, select, textarea, .ui-header-fixed, .ui-footer-fixed, .ui-flipswitch, .ui-popup, .ui-panel, .ui-panel-dismiss-open",
            hideDuringFocus: "input, textarea, select",
            updatePagePadding: true,
            trackPersistentToolbars: true,

            // Browser detection! Weeee, here we go...
            // Unfortunately, position:fixed is costly, not to mention probably impossible, to feature-detect accurately.
            // Some tests exist, but they currently return false results in critical devices and browsers, which could lead to a broken experience.
            // Testing fixed positioning is also pretty obtrusive to page load, requiring injected elements and scrolling the window
            // The following function serves to rule out some popular browsers with known fixed-positioning issues
            // This is a plugin option like any other, so feel free to improve or overwrite it
            supportBlacklist: function() {
                return !$.support.fixedPosition;
            }
        },

        _create: function() {
            this._super();
            this.pagecontainer = $( ":mobile-pagecontainer" );
            if ( this.options.position === "fixed" && !this.options.supportBlacklist() ) {
                this._makeFixed();
            }
        },

        _makeFixed: function() {
            this.element.addClass( "ui-"+ this.role +"-fixed" );
            this.updatePagePadding();
            this._addTransitionClass();
            this._bindPageEvents();
            this._bindToggleHandlers();
        },

        _setOptions: function( o ) {
            if ( o.position === "fixed" && this.options.position !== "fixed" ) {
                this._makeFixed();
            }
            if ( this.options.position === "fixed" && !this.options.supportBlacklist() ) {
                var $page = ( !!this.page )? this.page: ( $(".ui-page-active").length > 0 )? $(".ui-page-active"): $(".ui-page").eq(0);

                if ( o.fullscreen !== undefined) {
                    if ( o.fullscreen ) {
                        this.element.addClass( "ui-"+ this.role +"-fullscreen" );
                        $page.addClass( "ui-page-" + this.role + "-fullscreen" );
                    }
                    // If not fullscreen, add class to page to set top or bottom padding
                    else {
                        this.element.removeClass( "ui-"+ this.role +"-fullscreen" );
                        $page.removeClass( "ui-page-" + this.role + "-fullscreen" ).addClass( "ui-page-" + this.role+ "-fixed" );
                    }
                }
            }
            this._super(o);
        },

        _addTransitionClass: function() {
            var tclass = this.options.transition;

            if ( tclass && tclass !== "none" ) {
                // use appropriate slide for header or footer
                if ( tclass === "slide" ) {
                    tclass = this.element.hasClass( "ui-header" ) ? "slidedown" : "slideup";
                }

                this.element.addClass( tclass );
            }
        },

        _bindPageEvents: function() {
            var page = ( !!this.page )? this.element.closest( ".ui-page" ): this.document;
            //page event bindings
            // Fixed toolbars require page zoom to be disabled, otherwise usability issues crop up
            // This method is meant to disable zoom while a fixed-positioned toolbar page is visible
            this._on( page , {
                "pagebeforeshow": "_handlePageBeforeShow",
                "webkitAnimationStart":"_handleAnimationStart",
                "animationstart":"_handleAnimationStart",
                "updatelayout": "_handleAnimationStart",
                "pageshow": "_handlePageShow",
                "pagebeforehide": "_handlePageBeforeHide"
            });
        },

        _handlePageBeforeShow: function( ) {
            var o = this.options;
            if ( o.disablePageZoom ) {
                $.mobile.zoom.disable( true );
            }
            if ( !o.visibleOnPageShow ) {
                this.hide( true );
            }
        },

        _handleAnimationStart: function() {
            if ( this.options.updatePagePadding ) {
                this.updatePagePadding( ( !!this.page )? this.page: ".ui-page-active" );
            }
        },

        _handlePageShow: function() {
            this.updatePagePadding( ( !!this.page )? this.page: ".ui-page-active" );
            if ( this.options.updatePagePadding ) {
                this._on( this.window, { "throttledresize": "updatePagePadding" } );
            }
        },

        _handlePageBeforeHide: function( e, ui ) {
            var o = this.options,
                thisFooter, thisHeader, nextFooter, nextHeader;

            if ( o.disablePageZoom ) {
                $.mobile.zoom.enable( true );
            }
            if ( o.updatePagePadding ) {
                this._off( this.window, "throttledresize" );
            }

            if ( o.trackPersistentToolbars ) {
                thisFooter = $( ".ui-footer-fixed:jqmData(id)", this.page );
                thisHeader = $( ".ui-header-fixed:jqmData(id)", this.page );
                nextFooter = thisFooter.length && ui.nextPage && $( ".ui-footer-fixed:jqmData(id='" + thisFooter.jqmData( "id" ) + "')", ui.nextPage ) || $();
                nextHeader = thisHeader.length && ui.nextPage && $( ".ui-header-fixed:jqmData(id='" + thisHeader.jqmData( "id" ) + "')", ui.nextPage ) || $();

                if ( nextFooter.length || nextHeader.length ) {

                    nextFooter.add( nextHeader ).appendTo( $.mobile.pageContainer );

                    ui.nextPage.one( "pageshow", function() {
                        nextHeader.prependTo( this );
                        nextFooter.appendTo( this );
                    });
                }
            }
        },

        _visible: true,

        // This will set the content element's top or bottom padding equal to the toolbar's height
        updatePagePadding: function( tbPage ) {
            var $el = this.element,
                header = ( this.role ==="header" ),
                pos = parseFloat( $el.css( header ? "top" : "bottom" ) );

            // This behavior only applies to "fixed", not "fullscreen"
            if ( this.options.fullscreen ) { return; }
            // tbPage argument can be a Page object or an event, if coming from throttled resize.
            tbPage = ( tbPage && tbPage.type === undefined && tbPage ) || this.page || $el.closest( ".ui-page" );
            tbPage = ( !!this.page )? this.page: ".ui-page-active";
            $( tbPage ).css( "padding-" + ( header ? "top" : "bottom" ), $el.outerHeight() + pos );
        },

        _useTransition: function( notransition ) {
            var $win = this.window,
                $el = this.element,
                scroll = $win.scrollTop(),
                elHeight = $el.height(),
                pHeight = ( !!this.page )? $el.closest( ".ui-page" ).height():$(".ui-page-active").height(),
                viewportHeight = $.mobile.getScreenHeight();

            return !notransition &&
                ( this.options.transition && this.options.transition !== "none" &&
                (
                    ( this.role === "header" && !this.options.fullscreen && scroll > elHeight ) ||
                    ( this.role === "footer" && !this.options.fullscreen && scroll + viewportHeight < pHeight - elHeight )
                ) || this.options.fullscreen
                );
        },

        show: function( notransition ) {
            var hideClass = "ui-fixed-hidden",
                $el = this.element;

            if ( this._useTransition( notransition ) ) {
                $el
                    .removeClass( "out " + hideClass )
                    .addClass( "in" )
                    .animationComplete(function () {
                        $el.removeClass( "in" );
                    });
            }
            else {
                $el.removeClass( hideClass );
            }
            this._visible = true;
        },

        hide: function( notransition ) {
            var hideClass = "ui-fixed-hidden",
                $el = this.element,
                // if it's a slide transition, our new transitions need the reverse class as well to slide outward
                outclass = "out" + ( this.options.transition === "slide" ? " reverse" : "" );

            if ( this._useTransition( notransition ) ) {
                $el
                    .addClass( outclass )
                    .removeClass( "in" )
                    .animationComplete(function() {
                        $el.addClass( hideClass ).removeClass( outclass );
                    });
            }
            else {
                $el.addClass( hideClass ).removeClass( outclass );
            }
            this._visible = false;
        },

        toggle: function() {
            this[ this._visible ? "hide" : "show" ]();
        },

        _bindToggleHandlers: function() {
            var self = this,
                o = self.options,
                delayShow, delayHide,
                isVisible = true,
                page = ( !!this.page )? this.page: $(".ui-page");

            // tap toggle
            page
                .bind( "vclick", function( e ) {
                    if ( o.tapToggle && !$( e.target ).closest( o.tapToggleBlacklist ).length ) {
                        self.toggle();
                    }
                })
                .bind( "focusin focusout", function( e ) {
                    //this hides the toolbars on a keyboard pop to give more screen room and prevent ios bug which
                    //positions fixed toolbars in the middle of the screen on pop if the input is near the top or
                    //bottom of the screen addresses issues #4410 Footer navbar moves up when clicking on a textbox in an Android environment
                    //and issue #4113 Header and footer change their position after keyboard popup - iOS
                    //and issue #4410 Footer navbar moves up when clicking on a textbox in an Android environment
                    if ( screen.width < 1025 && $( e.target ).is( o.hideDuringFocus ) && !$( e.target ).closest( ".ui-header-fixed, .ui-footer-fixed" ).length ) {
                        //Fix for issue #4724 Moving through form in Mobile Safari with "Next" and "Previous" system
                        //controls causes fixed position, tap-toggle false Header to reveal itself
                        // isVisible instead of self._visible because the focusin and focusout events fire twice at the same time
                        // Also use a delay for hiding the toolbars because on Android native browser focusin is direclty followed
                        // by a focusout when a native selects opens and the other way around when it closes.
                        if ( e.type === "focusout" && !isVisible ) {
                            isVisible = true;
                            //wait for the stack to unwind and see if we have jumped to another input
                            clearTimeout( delayHide );
                            delayShow = setTimeout( function() {
                                self.show();
                            }, 0 );
                        } else if ( e.type === "focusin" && !!isVisible ) {
                            //if we have jumped to another input clear the time out to cancel the show.
                            clearTimeout( delayShow );
                            isVisible = false;
                            delayHide = setTimeout( function() {
                                self.hide();
                            }, 0 );
                        }
                    }
                });
        },

        _setRelative: function() {
            if( this.options.position !== "fixed" ){
                $( "[data-"+ $.mobile.ns + "role='page']" ).css({ "position": "relative" });
            }
        },

        _destroy: function() {
            var pageClasses, toolbarClasses, hasFixed, header, hasFullscreen,
                page = this.pagecontainer.pagecontainer( "getActivePage" );

            this._super();
            if ( this.options.position === "fixed" ) {
                hasFixed = $(  "body>.ui-" + this.role + "-fixed" )
                            .add( page.find( ".ui-" + this.options.role + "-fixed" ) )
                            .not( this.element ).length > 0;
                hasFullscreen = $(  "body>.ui-" + this.role + "-fixed" )
                            .add( page.find( ".ui-" + this.options.role + "-fullscreen" ) )
                            .not( this.element ).length > 0;
                toolbarClasses =  "ui-header-fixed ui-footer-fixed ui-header-fullscreen in out" +
                    " ui-footer-fullscreen fade slidedown slideup ui-fixed-hidden";
                this.element.removeClass( toolbarClasses );
                if ( !hasFullscreen ) {
                    pageClasses = "ui-page-" + this.role + "-fullscreen";
                }
                if ( !hasFixed ) {
                    header = this.role === "header";
                    pageClasses += " ui-page-" + this.role + "-fixed";
                    page.css( "padding-" + ( header ? "top" : "bottom" ), "" );
                }
                page.removeClass( pageClasses );
            }
        }

    });
})( jQuery );

(function( $, undefined ) {
    $.widget( "mobile.toolbar", $.mobile.toolbar, {

        _makeFixed: function() {
            this._super();
            this._workarounds();
        },

        //check the browser and version and run needed workarounds
        _workarounds: function() {
            var ua = navigator.userAgent,
            platform = navigator.platform,
            // Rendering engine is Webkit, and capture major version
            wkmatch = ua.match( /AppleWebKit\/([0-9]+)/ ),
            wkversion = !!wkmatch && wkmatch[ 1 ],
            os = null,
            self = this;
            //set the os we are working in if it dosent match one with workarounds return
            if ( platform.indexOf( "iPhone" ) > -1 || platform.indexOf( "iPad" ) > -1  || platform.indexOf( "iPod" ) > -1 ) {
                os = "ios";
            } else if ( ua.indexOf( "Android" ) > -1 ) {
                os = "android";
            } else {
                return;
            }
            //check os version if it dosent match one with workarounds return
            if ( os === "ios" ) {
                //iOS  workarounds
                self._bindScrollWorkaround();
            } else if ( os === "android" && wkversion && wkversion < 534 ) {
                //Android 2.3 run all Android 2.3 workaround
                self._bindScrollWorkaround();
                self._bindListThumbWorkaround();
            } else {
                return;
            }
        },

        //Utility class for checking header and footer positions relative to viewport
        _viewportOffset: function() {
            var $el = this.element,
                header = $el.hasClass( "ui-header" ),
                offset = Math.abs( $el.offset().top - this.window.scrollTop() );
            if ( !header ) {
                offset = Math.round( offset - this.window.height() + $el.outerHeight() ) - 60;
            }
            return offset;
        },

        //bind events for _triggerRedraw() function
        _bindScrollWorkaround: function() {
            var self = this;
            //bind to scrollstop and check if the toolbars are correctly positioned
            this._on( this.window, { scrollstop: function() {
                var viewportOffset = self._viewportOffset();
                //check if the header is visible and if its in the right place
                if ( viewportOffset > 2 && self._visible ) {
                    self._triggerRedraw();
                }
            }});
        },

        //this addresses issue #4250 Persistent footer instability in v1.1 with long select lists in Android 2.3.3
        //and issue #3748 Android 2.x: Page transitions broken when fixed toolbars used
        //the absolutely positioned thumbnail in a list view causes problems with fixed position buttons above in a nav bar
        //setting the li's to -webkit-transform:translate3d(0,0,0); solves this problem to avoide potential issues in other
        //platforms we scope this with the class ui-android-2x-fix
        _bindListThumbWorkaround: function() {
            this.element.closest( ".ui-page" ).addClass( "ui-android-2x-fixed" );
        },
        //this addresses issues #4337 Fixed header problem after scrolling content on iOS and Android
        //and device bugs project issue #1 Form elements can lose click hit area in position: fixed containers.
        //this also addresses not on fixed toolbars page in docs
        //adding 1px of padding to the bottom then removing it causes a "redraw"
        //which positions the toolbars correctly (they will always be visually correct)
        _triggerRedraw: function() {
            var paddingBottom = parseFloat( $( ".ui-page-active" ).css( "padding-bottom" ) );
            //trigger page redraw to fix incorrectly positioned fixed elements
            $( ".ui-page-active" ).css( "padding-bottom", ( paddingBottom + 1 ) + "px" );
            //if the padding is reset with out a timeout the reposition will not occure.
            //this is independant of JQM the browser seems to need the time to react.
            setTimeout( function() {
                $( ".ui-page-active" ).css( "padding-bottom", paddingBottom + "px" );
            }, 0 );
        },

        destroy: function() {
            this._super();
            //Remove the class we added to the page previously in android 2.x
            this.element.closest( ".ui-page-active" ).removeClass( "ui-android-2x-fix" );
        }
    });

})( jQuery );


( function( $, undefined ) {

var ieHack = ( $.mobile.browser.oldIE && $.mobile.browser.oldIE <= 8 ),
    uiTemplate = $(
        "<div class='ui-popup-arrow-guide'></div>" +
        "<div class='ui-popup-arrow-container" + ( ieHack ? " ie" : "" ) + "'>" +
            "<div class='ui-popup-arrow'></div>" +
        "</div>"
    );

function getArrow() {
    var clone = uiTemplate.clone(),
        gd = clone.eq( 0 ),
        ct = clone.eq( 1 ),
        ar = ct.children();

    return { arEls: ct.add( gd ), gd: gd, ct: ct, ar: ar };
}

$.widget( "mobile.popup", $.mobile.popup, {
    options: {

        arrow: ""
    },

    _create: function() {
        var ar,
            ret = this._super();

        if ( this.options.arrow ) {
            this._ui.arrow = ar = this._addArrow();
        }

        return ret;
    },

    _addArrow: function() {
        var theme,
            opts = this.options,
            ar = getArrow();

        theme = this._themeClassFromOption( "ui-body-", opts.theme );
        ar.ar.addClass( theme + ( opts.shadow ? " ui-overlay-shadow" : "" ) );
        ar.arEls.hide().appendTo( this.element );

        return ar;
    },

    _unenhance: function() {
        var ar = this._ui.arrow;

        if ( ar ) {
            ar.arEls.remove();
        }

        return this._super();
    },

    // Pretend to show an arrow described by @p and @dir and calculate the
    // distance from the desired point. If a best-distance is passed in, return
    // the minimum of the one passed in and the one calculated.
    _tryAnArrow: function( p, dir, desired, s, best ) {
        var result, r, diff, desiredForArrow = {}, tip = {};

        // If the arrow has no wiggle room along the edge of the popup, it cannot
        // be displayed along the requested edge without it sticking out.
        if ( s.arFull[ p.dimKey ] > s.guideDims[ p.dimKey ] ) {
            return best;
        }

        desiredForArrow[ p.fst ] = desired[ p.fst ] +
            ( s.arHalf[ p.oDimKey ] + s.menuHalf[ p.oDimKey ] ) * p.offsetFactor -
            s.contentBox[ p.fst ] + ( s.clampInfo.menuSize[ p.oDimKey ] - s.contentBox[ p.oDimKey ] ) * p.arrowOffsetFactor;
        desiredForArrow[ p.snd ] = desired[ p.snd ];

        result = s.result || this._calculateFinalLocation( desiredForArrow, s.clampInfo );
        r = { x: result.left, y: result.top };

        tip[ p.fst ] = r[ p.fst ] + s.contentBox[ p.fst ] + p.tipOffset;
        tip[ p.snd ] = Math.max( result[ p.prop ] + s.guideOffset[ p.prop ] + s.arHalf[ p.dimKey ],
            Math.min( result[ p.prop ] + s.guideOffset[ p.prop ] + s.guideDims[ p.dimKey ] - s.arHalf[ p.dimKey ],
                desired[ p.snd ] ) );

        diff = Math.abs( desired.x - tip.x ) + Math.abs( desired.y - tip.y );
        if ( !best || diff < best.diff ) {
            // Convert tip offset to coordinates inside the popup
            tip[ p.snd ] -= s.arHalf[ p.dimKey ] + result[ p.prop ] + s.contentBox[ p.snd ];
            best = { dir: dir, diff: diff, result: result, posProp: p.prop, posVal: tip[ p.snd ] };
        }

        return best;
    },

    _getPlacementState: function( clamp ) {
        var offset, gdOffset,
            ar = this._ui.arrow,
            state = {
                clampInfo: this._clampPopupWidth( !clamp ),
                arFull: { cx: ar.ct.width(), cy: ar.ct.height() },
                guideDims: { cx: ar.gd.width(), cy: ar.gd.height() },
                guideOffset: ar.gd.offset()
            };

        offset = this.element.offset();

        ar.gd.css( { left: 0, top: 0, right: 0, bottom: 0 } );
        gdOffset = ar.gd.offset();
        state.contentBox = {
            x: gdOffset.left - offset.left,
            y: gdOffset.top - offset.top,
            cx: ar.gd.width(),
            cy: ar.gd.height()
        };
        ar.gd.removeAttr( "style" );

        // The arrow box moves between guideOffset and guideOffset + guideDims - arFull
        state.guideOffset = { left: state.guideOffset.left - offset.left, top: state.guideOffset.top - offset.top };
        state.arHalf = { cx: state.arFull.cx / 2, cy: state.arFull.cy / 2 };
        state.menuHalf = { cx: state.clampInfo.menuSize.cx / 2, cy: state.clampInfo.menuSize.cy / 2 };

        return state;
    },

    _placementCoords: function( desired ) {
        var state, best, params, elOffset, bgRef,
            optionValue = this.options.arrow,
            ar = this._ui.arrow;

        if ( !ar ) {
            return this._super( desired );
        }

        ar.arEls.show();

        bgRef = {};
        state = this._getPlacementState( true );
        params = {
            "l": { fst: "x", snd: "y", prop: "top", dimKey: "cy", oDimKey: "cx", offsetFactor: 1, tipOffset:  -state.arHalf.cx, arrowOffsetFactor: 0 },
            "r": { fst: "x", snd: "y", prop: "top", dimKey: "cy", oDimKey: "cx", offsetFactor: -1, tipOffset: state.arHalf.cx + state.contentBox.cx, arrowOffsetFactor: 1 },
            "b": { fst: "y", snd: "x", prop: "left", dimKey: "cx", oDimKey: "cy", offsetFactor: -1, tipOffset: state.arHalf.cy + state.contentBox.cy, arrowOffsetFactor: 1 },
            "t": { fst: "y", snd: "x", prop: "left", dimKey: "cx", oDimKey: "cy", offsetFactor: 1, tipOffset: -state.arHalf.cy, arrowOffsetFactor: 0 }
        };

        // Try each side specified in the options to see on which one the arrow
        // should be placed such that the distance between the tip of the arrow and
        // the desired coordinates is the shortest.
        $.each( ( optionValue === true ? "l,t,r,b" : optionValue ).split( "," ),
            $.proxy( function( key, value ) {
                best = this._tryAnArrow( params[ value ], value, desired, state, best );
            }, this ) );

        // Could not place the arrow along any of the edges - behave as if showing
        // the arrow was turned off.
        if ( !best ) {
            ar.arEls.hide();
            return this._super( desired );
        }

        // Move the arrow into place
        ar.ct
            .removeClass( "ui-popup-arrow-l ui-popup-arrow-t ui-popup-arrow-r ui-popup-arrow-b" )
            .addClass( "ui-popup-arrow-" + best.dir )
            .removeAttr( "style" ).css( best.posProp, best.posVal )
            .show();

        // Do not move/size the background div on IE, because we use the arrow div for background as well.
        if ( !ieHack ) {
            elOffset = this.element.offset();
            bgRef[ params[ best.dir ].fst ] = ar.ct.offset();
            bgRef[ params[ best.dir ].snd ] = {
                left: elOffset.left + state.contentBox.x,
                top: elOffset.top + state.contentBox.y
            };
        }

        return best.result;
    },

    _setOptions: function( opts ) {
        var newTheme,
            oldTheme = this.options.theme,
            ar = this._ui.arrow,
            ret = this._super( opts );

        if ( opts.arrow !== undefined ) {
            if ( !ar && opts.arrow ) {
                this._ui.arrow = this._addArrow();

                // Important to return here so we don't set the same options all over
                // again below.
                return;
            } else if ( ar && !opts.arrow ) {
                ar.arEls.remove();
                this._ui.arrow = null;
            }
        }

        // Reassign with potentially new arrow
        ar = this._ui.arrow;

        if ( ar ) {
            if ( opts.theme !== undefined ) {
                oldTheme = this._themeClassFromOption( "ui-body-", oldTheme );
                newTheme = this._themeClassFromOption( "ui-body-", opts.theme );
                ar.ar.removeClass( oldTheme ).addClass( newTheme );
            }

            if ( opts.shadow !== undefined ) {
                ar.ar.toggleClass( "ui-overlay-shadow", opts.shadow );
            }
        }

        return ret;
    },

    _destroy: function() {
        var ar = this._ui.arrow;

        if ( ar ) {
            ar.arEls.remove();
        }

        return this._super();
    }
});

})( jQuery );


(function( $, undefined ) {

$.widget( "mobile.panel", {
    options: {
        classes: {
            panel: "ui-panel",
            panelOpen: "ui-panel-open",
            panelClosed: "ui-panel-closed",
            panelFixed: "ui-panel-fixed",
            panelInner: "ui-panel-inner",
            modal: "ui-panel-dismiss",
            modalOpen: "ui-panel-dismiss-open",
            pageContainer: "ui-panel-page-container",
            pageWrapper: "ui-panel-wrapper",
            pageFixedToolbar: "ui-panel-fixed-toolbar",
            pageContentPrefix: "ui-panel-page-content", /* Used for wrapper and fixed toolbars position, display and open classes. */
            animate: "ui-panel-animate"
        },
        animate: true,
        theme: null,
        position: "left",
        dismissible: true,
        display: "reveal", //accepts reveal, push, overlay
        swipeClose: true,
        positionFixed: false
    },

    _closeLink: null,
    _parentPage: null,
    _page: null,
    _modal: null,
    _panelInner: null,
    _wrapper: null,
    _fixedToolbars: null,

    _create: function() {
        var el = this.element,
            parentPage = el.closest( ".ui-page, :jqmData(role='page')" );

        // expose some private props to other methods
        $.extend( this, {
            _closeLink: el.find( ":jqmData(rel='close')" ),
            _parentPage: ( parentPage.length > 0 ) ? parentPage : false,
            _openedPage: null,
            _page: this._getPage,
            _panelInner: this._getPanelInner(),
            _fixedToolbars: this._getFixedToolbars
        });
        if ( this.options.display !== "overlay" ){
            this._getWrapper();
        }
        this._addPanelClasses();

        // if animating, add the class to do so
        if ( $.support.cssTransform3d && !!this.options.animate ) {
            this.element.addClass( this.options.classes.animate );
        }

        this._bindUpdateLayout();
        this._bindCloseEvents();
        this._bindLinkListeners();
        this._bindPageEvents();

        if ( !!this.options.dismissible ) {
            this._createModal();
        }

        this._bindSwipeEvents();
    },

    _getPanelInner: function() {
        var panelInner = this.element.find( "." + this.options.classes.panelInner );

        if ( panelInner.length === 0 ) {
            panelInner = this.element.children().wrapAll( "<div class='" + this.options.classes.panelInner + "' />" ).parent();
        }

        return panelInner;
    },

    _createModal: function() {
        var self = this,
            target = self._parentPage ? self._parentPage.parent() : self.element.parent();

        self._modal = $( "<div class='" + self.options.classes.modal + "'></div>" )
            .on( "mousedown", function() {
                self.close();
            })
            .appendTo( target );
    },

    _getPage: function() {
        var page = this._openedPage || this._parentPage || $( "." + $.mobile.activePageClass );

        return page;
    },

    _getWrapper: function() {
        var wrapper = this._page().find( "." + this.options.classes.pageWrapper );
        if ( wrapper.length === 0 ) {
            wrapper = this._page().children( ".ui-header:not(.ui-header-fixed), .ui-content:not(.ui-popup), .ui-footer:not(.ui-footer-fixed)" )
                .wrapAll( "<div class='" + this.options.classes.pageWrapper + "'></div>" )
                .parent();
        }

        this._wrapper = wrapper;
    },

    _getFixedToolbars: function() {
        var extFixedToolbars = $( "body" ).children( ".ui-header-fixed, .ui-footer-fixed" ),
            intFixedToolbars = this._page().find( ".ui-header-fixed, .ui-footer-fixed" ),
            fixedToolbars = extFixedToolbars.add( intFixedToolbars ).addClass( this.options.classes.pageFixedToolbar );

        return fixedToolbars;
    },

    _getPosDisplayClasses: function( prefix ) {
        return prefix + "-position-" + this.options.position + " " + prefix + "-display-" + this.options.display;
    },

    _getPanelClasses: function() {
        var panelClasses = this.options.classes.panel +
            " " + this._getPosDisplayClasses( this.options.classes.panel ) +
            " " + this.options.classes.panelClosed +
            " " + "ui-body-" + ( this.options.theme ? this.options.theme : "inherit" );

        if ( !!this.options.positionFixed ) {
            panelClasses += " " + this.options.classes.panelFixed;
        }

        return panelClasses;
    },

    _addPanelClasses: function() {
        this.element.addClass( this._getPanelClasses() );
    },

    _handleCloseClick: function( event ) {
        if ( !event.isDefaultPrevented() ) {
            this.close();
        }
    },

    _bindCloseEvents: function() {
        this._on( this._closeLink, {
            "click": "_handleCloseClick"
        });

        this._on({
            "click a:jqmData(ajax='false')": "_handleCloseClick"
        });
    },

    _positionPanel: function( scrollToTop ) {
        var self = this,
            panelInnerHeight = self._panelInner.outerHeight(),
            expand = panelInnerHeight > $.mobile.getScreenHeight();

        if ( expand || !self.options.positionFixed ) {
            if ( expand ) {
                self._unfixPanel();
                $.mobile.resetActivePageHeight( panelInnerHeight );
            }
            if ( scrollToTop ) {
                this.window[ 0 ].scrollTo( 0, $.mobile.defaultHomeScroll );
            }
        } else {
            self._fixPanel();
        }
    },

    _bindFixListener: function() {
        this._on( $( window ), { "throttledresize": "_positionPanel" });
    },

    _unbindFixListener: function() {
        this._off( $( window ), "throttledresize" );
    },

    _unfixPanel: function() {
        if ( !!this.options.positionFixed && $.support.fixedPosition ) {
            this.element.removeClass( this.options.classes.panelFixed );
        }
    },

    _fixPanel: function() {
        if ( !!this.options.positionFixed && $.support.fixedPosition ) {
            this.element.addClass( this.options.classes.panelFixed );
        }
    },

    _bindUpdateLayout: function() {
        var self = this;

        self.element.on( "updatelayout", function(/* e */) {
            if ( self._open ) {
                self._positionPanel();
            }
        });
    },

    _bindLinkListeners: function() {
        this._on( "body", {
            "click a": "_handleClick"
        });

    },

    _handleClick: function( e ) {
        var link,
            panelId = this.element.attr( "id" );

        if ( e.currentTarget.href.split( "#" )[ 1 ] === panelId && panelId !== undefined ) {

            e.preventDefault();
            link = $( e.target );
            if ( link.hasClass( "ui-btn" ) ) {
                link.addClass( $.mobile.activeBtnClass );
                this.element.one( "panelopen panelclose", function() {
                    link.removeClass( $.mobile.activeBtnClass );
                });
            }
            this.toggle();
        }
    },

    _bindSwipeEvents: function() {
        var self = this,
            area = self._modal ? self.element.add( self._modal ) : self.element;

        // on swipe, close the panel
        if ( !!self.options.swipeClose ) {
            if ( self.options.position === "left" ) {
                area.on( "swipeleft.panel", function(/* e */) {
                    self.close();
                });
            } else {
                area.on( "swiperight.panel", function(/* e */) {
                    self.close();
                });
            }
        }
    },

    _bindPageEvents: function() {
        var self = this;

        this.document
            // Close the panel if another panel on the page opens
            .on( "panelbeforeopen", function( e ) {
                if ( self._open && e.target !== self.element[ 0 ] ) {
                    self.close();
                }
            })
            // On escape, close? might need to have a target check too...
            .on( "keyup.panel", function( e ) {
                if ( e.keyCode === 27 && self._open ) {
                    self.close();
                }
            });
        if ( !this._parentPage && this.options.display !== "overlay" ) {
            this._on( this.document, {
                "pageshow": function() {
                    this._openedPage = null;
                    this._getWrapper();
                }
            });
        }
        // Clean up open panels after page hide
        if ( self._parentPage ) {
            this.document.on( "pagehide", ":jqmData(role='page')", function() {
                if ( self._open ) {
                    self.close( true );
                }
            });
        } else {
            this.document.on( "pagebeforehide", function() {
                if ( self._open ) {
                    self.close( true );
                }
            });
        }
    },

    // state storage of open or closed
    _open: false,
    _pageContentOpenClasses: null,
    _modalOpenClasses: null,

    open: function( immediate ) {
        if ( !this._open ) {
            var self = this,
                o = self.options,

                _openPanel = function() {
                    self._off( self.document , "panelclose" );
                    self._page().jqmData( "panel", "open" );

                    if ( $.support.cssTransform3d && !!o.animate && o.display !== "overlay" ) {
                        self._wrapper.addClass( o.classes.animate );
                        self._fixedToolbars().addClass( o.classes.animate );
                    }

                    if ( !immediate && $.support.cssTransform3d && !!o.animate ) {
                        ( self._wrapper || self.element )
                            .animationComplete( complete, "transition" );
                    } else {
                        setTimeout( complete, 0 );
                    }

                    if ( o.theme && o.display !== "overlay" ) {
                        self._page().parent()
                            .addClass( o.classes.pageContainer + "-themed " + o.classes.pageContainer + "-" + o.theme );
                    }

                    self.element
                        .removeClass( o.classes.panelClosed )
                        .addClass( o.classes.panelOpen );

                    self._positionPanel( true );

                    self._pageContentOpenClasses = self._getPosDisplayClasses( o.classes.pageContentPrefix );

                    if ( o.display !== "overlay" ) {
                        self._page().parent().addClass( o.classes.pageContainer );
                        self._wrapper.addClass( self._pageContentOpenClasses );
                        self._fixedToolbars().addClass( self._pageContentOpenClasses );
                    }

                    self._modalOpenClasses = self._getPosDisplayClasses( o.classes.modal ) + " " + o.classes.modalOpen;
                    if ( self._modal ) {
                        self._modal
                            .addClass( self._modalOpenClasses )
                            .height( Math.max( self._modal.height(), self.document.height() ) );
                    }
                },
                complete = function() {

                    // Bail if the panel was closed before the opening animation has completed
                    if ( !self._open ) {
                        return;
                    }

                    if ( o.display !== "overlay" ) {
                        self._wrapper.addClass( o.classes.pageContentPrefix + "-open" );
                        self._fixedToolbars().addClass( o.classes.pageContentPrefix + "-open" );
                    }

                    self._bindFixListener();

                    self._trigger( "open" );

                    self._openedPage = self._page();
                };

            self._trigger( "beforeopen" );

            if ( self._page().jqmData( "panel" ) === "open" ) {
                self._on( self.document, {
                    "panelclose": _openPanel
                });
            } else {
                _openPanel();
            }

            self._open = true;
        }
    },

    close: function( immediate ) {
        if ( this._open ) {
            var self = this,
                o = this.options,

                _closePanel = function() {

                    self.element.removeClass( o.classes.panelOpen );

                    if ( o.display !== "overlay" ) {
                        self._wrapper.removeClass( self._pageContentOpenClasses );
                        self._fixedToolbars().removeClass( self._pageContentOpenClasses );
                    }

                    if ( !immediate && $.support.cssTransform3d && !!o.animate ) {
                        ( self._wrapper || self.element )
                            .animationComplete( complete, "transition" );
                    } else {
                        setTimeout( complete, 0 );
                    }

                    if ( self._modal ) {
                        self._modal
                            .removeClass( self._modalOpenClasses )
                            .height( "" );
                    }
                },
                complete = function() {
                    if ( o.theme && o.display !== "overlay" ) {
                        self._page().parent().removeClass( o.classes.pageContainer + "-themed " + o.classes.pageContainer + "-" + o.theme );
                    }

                    self.element.addClass( o.classes.panelClosed );

                    if ( o.display !== "overlay" ) {
                        self._page().parent().removeClass( o.classes.pageContainer );
                        self._wrapper.removeClass( o.classes.pageContentPrefix + "-open" );
                        self._fixedToolbars().removeClass( o.classes.pageContentPrefix + "-open" );
                    }

                    if ( $.support.cssTransform3d && !!o.animate && o.display !== "overlay" ) {
                        self._wrapper.removeClass( o.classes.animate );
                        self._fixedToolbars().removeClass( o.classes.animate );
                    }

                    self._fixPanel();
                    self._unbindFixListener();
                    $.mobile.resetActivePageHeight();

                    self._page().jqmRemoveData( "panel" );

                    self._trigger( "close" );

                    self._openedPage = null;
                };

            self._trigger( "beforeclose" );

            _closePanel();

            self._open = false;
        }
    },

    toggle: function() {
        this[ this._open ? "close" : "open" ]();
    },

    _destroy: function() {
        var otherPanels,
        o = this.options,
        multiplePanels = ( $( "body > :mobile-panel" ).length + $.mobile.activePage.find( ":mobile-panel" ).length ) > 1;

        if ( o.display !== "overlay" ) {

            //  remove the wrapper if not in use by another panel
            otherPanels = $( "body > :mobile-panel" ).add( $.mobile.activePage.find( ":mobile-panel" ) );
            if ( otherPanels.not( ".ui-panel-display-overlay" ).not( this.element ).length === 0 ) {
                this._wrapper.children().unwrap();
            }

            if ( this._open ) {

                this._fixedToolbars().removeClass( o.classes.pageContentPrefix + "-open" );

                if ( $.support.cssTransform3d && !!o.animate ) {
                    this._fixedToolbars().removeClass( o.classes.animate );
                }

                this._page().parent().removeClass( o.classes.pageContainer );

                if ( o.theme ) {
                    this._page().parent().removeClass( o.classes.pageContainer + "-themed " + o.classes.pageContainer + "-" + o.theme );
                }
            }
        }

        if ( !multiplePanels ) {

            this.document.off( "panelopen panelclose" );

        }

        if ( this._open ) {
            this._page().jqmRemoveData( "panel" );
        }

        this._panelInner.children().unwrap();

        this.element
            .removeClass( [ this._getPanelClasses(), o.classes.panelOpen, o.classes.animate ].join( " " ) )
            .off( "swipeleft.panel swiperight.panel" )
            .off( "panelbeforeopen" )
            .off( "panelhide" )
            .off( "keyup.panel" )
            .off( "updatelayout" );

        if ( this._modal ) {
            this._modal.remove();
        }
    }
});

})( jQuery );

(function( $, undefined ) {

$.widget( "mobile.table", {
    options: {
        classes: {
            table: "ui-table"
        },
        enhanced: false
    },

    _create: function() {
        if ( !this.options.enhanced ) {
            this.element.addClass( this.options.classes.table );
        }

        // extend here, assign on refresh > _setHeaders
        $.extend( this, {

            // Expose headers and allHeaders properties on the widget
            // headers references the THs within the first TR in the table
            headers: undefined,

            // allHeaders references headers, plus all THs in the thead, which may
            // include several rows, or not
            allHeaders: undefined
        });

        this._refresh( true );
    },

    _setHeaders: function() {
        var trs = this.element.find( "thead tr" );

        this.headers = this.element.find( "tr:eq(0)" ).children();
        this.allHeaders = this.headers.add( trs.children() );
    },

    refresh: function() {
        this._refresh();
    },

    rebuild: $.noop,

    _refresh: function( /* create */ ) {
        var table = this.element,
            trs = table.find( "thead tr" );

        // updating headers on refresh (fixes #5880)
        this._setHeaders();

        // Iterate over the trs
        trs.each( function() {
            var columnCount = 0;

            // Iterate over the children of the tr
            $( this ).children().each( function() {
                var span = parseInt( this.getAttribute( "colspan" ), 10 ),
                    selector = ":nth-child(" + ( columnCount + 1 ) + ")",
                    j;

                this.setAttribute( "data-" + $.mobile.ns + "colstart", columnCount + 1 );

                if ( span ) {
                    for( j = 0; j < span - 1; j++ ) {
                        columnCount++;
                        selector += ", :nth-child(" + ( columnCount + 1 ) + ")";
                    }
                }

                // Store "cells" data on header as a reference to all cells in the
                // same column as this TH
                $( this ).jqmData( "cells", table.find( "tr" ).not( trs.eq( 0 ) ).not( this ).children( selector ) );

                columnCount++;
            });
        });
    }
});

})( jQuery );


(function( $, undefined ) {

$.widget( "mobile.table", $.mobile.table, {
    options: {
        mode: "columntoggle",
        columnBtnTheme: null,
        columnPopupTheme: null,
        columnBtnText: "Columns...",
        classes: $.extend( $.mobile.table.prototype.options.classes, {
            popup: "ui-table-columntoggle-popup",
            columnBtn: "ui-table-columntoggle-btn",
            priorityPrefix: "ui-table-priority-",
            columnToggleTable: "ui-table-columntoggle"
        })
    },

    _create: function() {
        this._super();

        if ( this.options.mode !== "columntoggle" ) {
            return;
        }

        $.extend( this, {
            _menu: null
        });

        if ( this.options.enhanced ) {
            this._menu = $( this.document[ 0 ].getElementById( this._id() + "-popup" ) ).children().first();
            this._addToggles( this._menu, true );
        } else {
            this._menu = this._enhanceColToggle();
            this.element.addClass( this.options.classes.columnToggleTable );
        }

        this._setupEvents();

        this._setToggleState();
    },

    _id: function() {
        return ( this.element.attr( "id" ) || ( this.widgetName + this.uuid ) );
    },

    _setupEvents: function() {
        //NOTE: inputs are bound in bindToggles,
        // so it can be called on refresh, too

        // update column toggles on resize
        this._on( this.window, {
            throttledresize: "_setToggleState"
        });
        this._on( this._menu, {
            "change input": "_menuInputChange"
        });
    },

    _addToggles: function( menu, keep ) {
        var inputs,
            checkboxIndex = 0,
            opts = this.options,
            container = menu.controlgroup( "container" );

        // allow update of menu on refresh (fixes #5880)
        if ( keep ) {
            inputs = menu.find( "input" );
        } else {
            container.empty();
        }

        // create the hide/show toggles
        this.headers.not( "td" ).each( function() {
            var input, cells,
                header = $( this ),
                priority = $.mobile.getAttribute( this, "priority" );

            if ( priority ) {
                cells = header.add( header.jqmData( "cells" ) );
                cells.addClass( opts.classes.priorityPrefix + priority );

                // Make sure the (new?) checkbox is associated with its header via .jqmData() and
                // that, vice versa, the header is also associated with the checkbox
                input = ( keep ? inputs.eq( checkboxIndex++ ) :
                    $("<label><input type='checkbox' checked />" +
                        ( header.children( "abbr" ).first().attr( "title" ) ||
                            header.text() ) +
                        "</label>" )
                        .appendTo( container )
                        .children( 0 )
                        .checkboxradio( {
                            theme: opts.columnPopupTheme
                        }) )

                        // Associate the header with the checkbox
                        .jqmData( "header", header )
                        .jqmData( "cells", cells );

                // Associate the checkbox with the header
                header.jqmData( "input", input );
            }
        });

        // set bindings here
        if ( !keep ) {
            menu.controlgroup( "refresh" );
        }
    },

    _menuInputChange: function( evt ) {
        var input = $( evt.target ),
            checked = input[ 0 ].checked;

        input.jqmData( "cells" )
            .toggleClass( "ui-table-cell-hidden", !checked )
            .toggleClass( "ui-table-cell-visible", checked );
    },

    _unlockCells: function( cells ) {
        // allow hide/show via CSS only = remove all toggle-locks
        cells.removeClass( "ui-table-cell-hidden ui-table-cell-visible");
    },

    _enhanceColToggle: function() {
        var id , menuButton, popup, menu,
            table = this.element,
            opts = this.options,
            ns = $.mobile.ns,
            fragment = this.document[ 0 ].createDocumentFragment();

        id = this._id() + "-popup";
        menuButton = $( "<a href='#" + id + "' " +
            "class='" + opts.classes.columnBtn + " ui-btn " +
            "ui-btn-" + ( opts.columnBtnTheme || "a" ) +
            " ui-corner-all ui-shadow ui-mini' " +
            "data-" + ns + "rel='popup'>" + opts.columnBtnText + "</a>" );
        popup = $( "<div class='" + opts.classes.popup + "' id='" + id + "'></div>" );
        menu = $( "<fieldset></fieldset>" ).controlgroup();

        // set extension here, send "false" to trigger build/rebuild
        this._addToggles( menu, false );

        menu.appendTo( popup );

        fragment.appendChild( popup[ 0 ] );
        fragment.appendChild( menuButton[ 0 ] );
        table.before( fragment );

        popup.popup();

        return menu;
    },

    rebuild: function() {
        this._super();

        if ( this.options.mode === "columntoggle" ) {
            // NOTE: rebuild passes "false", while refresh passes "undefined"
            // both refresh the table, but inside addToggles, !false will be true,
            // so a rebuild call can be indentified
            this._refresh( false );
        }
    },

    _refresh: function( create ) {
        var headers, hiddenColumns, index;

        // Calling _super() here updates this.headers
        this._super( create );

        if ( !create && this.options.mode === "columntoggle" ) {
            headers = this.headers;
            hiddenColumns = [];

            // Find the index of the column header associated with each old checkbox among the
            // post-refresh headers and, if the header is still there, make sure the corresponding
            // column will be hidden if the pre-refresh checkbox indicates that the column is
            // hidden by recording its index in the array of hidden columns.
            this._menu.find( "input" ).each( function() {
                var input = $( this ),
                    header = input.jqmData( "header" ),
                    index = headers.index( header[ 0 ] );

                if ( index > -1 && !input.prop( "checked" ) ) {

                    // The column header associated with /this/ checkbox is still present in the
                    // post-refresh table and the checkbox is not checked, so the column associated
                    // with this column header is currently hidden. Let's record that.
                    hiddenColumns.push( index );
                }
            });

            // columns not being replaced must be cleared from input toggle-locks
            this._unlockCells( this.element.find( ".ui-table-cell-hidden, " +
                ".ui-table-cell-visible" ) );

            // update columntoggles and cells
            this._addToggles( this._menu, create );

            // At this point all columns are visible, so uncheck the checkboxes that correspond to
            // those columns we've found to be hidden
            for ( index = hiddenColumns.length - 1 ; index > -1 ; index-- ) {
                headers.eq( hiddenColumns[ index ] ).jqmData( "input" )
                    .prop( "checked", false )
                    .checkboxradio( "refresh" )
                    .trigger( "change" );
            }
        }
    },

    _setToggleState: function() {
        this._menu.find( "input" ).each( function() {
            var checkbox = $( this );

            this.checked = checkbox.jqmData( "cells" ).eq( 0 ).css( "display" ) === "table-cell";
            checkbox.checkboxradio( "refresh" );
        });
    },

    _destroy: function() {
        this._super();
    }
});

})( jQuery );

(function( $, undefined ) {

$.widget( "mobile.table", $.mobile.table, {
    options: {
        mode: "reflow",
        classes: $.extend( $.mobile.table.prototype.options.classes, {
            reflowTable: "ui-table-reflow",
            cellLabels: "ui-table-cell-label"
        })
    },

    _create: function() {
        this._super();

        // If it's not reflow mode, return here.
        if ( this.options.mode !== "reflow" ) {
            return;
        }

        if ( !this.options.enhanced ) {
            this.element.addClass( this.options.classes.reflowTable );

            this._updateReflow();
        }
    },

    rebuild: function() {
        this._super();

        if ( this.options.mode === "reflow" ) {
            this._refresh( false );
        }
    },

    _refresh: function( create ) {
        this._super( create );
        if ( !create && this.options.mode === "reflow" ) {
            this._updateReflow( );
        }
    },

    _updateReflow: function() {
        var table = this,
            opts = this.options;

        // get headers in reverse order so that top-level headers are appended last
        $( table.allHeaders.get().reverse() ).each( function() {
            var cells = $( this ).jqmData( "cells" ),
                colstart = $.mobile.getAttribute( this, "colstart" ),
                hierarchyClass = cells.not( this ).filter( "thead th" ).length && " ui-table-cell-label-top",
                contents = $( this ).clone().contents(),
                iteration, filter;

                if ( contents.length > 0  ) {

                    if ( hierarchyClass ) {
                        iteration = parseInt( this.getAttribute( "colspan" ), 10 );
                        filter = "";

                        if ( iteration ) {
                            filter = "td:nth-child("+ iteration +"n + " + ( colstart ) +")";
                        }

                        table._addLabels( cells.filter( filter ),
                            opts.classes.cellLabels + hierarchyClass, contents );
                    } else {
                        table._addLabels( cells, opts.classes.cellLabels, contents );
                    }

                }
        });
    },

    _addLabels: function( cells, label, contents ) {
        if ( contents.length === 1 && contents[ 0 ].nodeName.toLowerCase() === "abbr" ) {
            contents = contents.eq( 0 ).attr( "title" );
        }
        // .not fixes #6006
        cells
            .not( ":has(b." + label + ")" )
                .prepend( $( "<b class='" + label + "'></b>" ).append( contents ) );
    }
});

})( jQuery );

(function( $, undefined ) {

// TODO rename filterCallback/deprecate and default to the item itself as the first argument
var defaultFilterCallback = function( index, searchValue ) {
    return ( ( "" + ( $.mobile.getAttribute( this, "filtertext" ) || $( this ).text() ) )
        .toLowerCase().indexOf( searchValue ) === -1 );
};

$.widget( "mobile.filterable", {

    initSelector: ":jqmData(filter='true')",

    options: {
        filterReveal: false,
        filterCallback: defaultFilterCallback,
        enhanced: false,
        input: null,
        children: "> li, > option, > optgroup option, > tbody tr, > .ui-controlgroup-controls > .ui-btn, > .ui-controlgroup-controls > .ui-checkbox, > .ui-controlgroup-controls > .ui-radio"
    },

    _create: function() {
        var opts = this.options;

        $.extend( this, {
            _search: null,
            _timer: 0
        });

        this._setInput( opts.input );
        if ( !opts.enhanced ) {
            this._filterItems( ( ( this._search && this._search.val() ) || "" ).toLowerCase() );
        }
    },

    _onKeyUp: function() {
        var val, lastval,
            search = this._search;

        if ( search ) {
            val = search.val().toLowerCase(),
            lastval = $.mobile.getAttribute( search[ 0 ], "lastval" ) + "";

            if ( lastval && lastval === val ) {
                // Execute the handler only once per value change
                return;
            }

            if ( this._timer ) {
                window.clearTimeout( this._timer );
                this._timer = 0;
            }

            this._timer = this._delay( function() {
                if ( this._trigger( "beforefilter", null, { input: search } ) === false ) {
                    return false;
                }

                // Change val as lastval for next execution
                search[ 0 ].setAttribute( "data-" + $.mobile.ns + "lastval", val );

                this._filterItems( val );
                this._timer = 0;
            }, 250 );
        }
    },

    _getFilterableItems: function() {
        var elem = this.element,
            children = this.options.children,
            items = !children ? { length: 0 }:
                $.isFunction( children ) ? children():
                children.nodeName ? $( children ):
                children.jquery ? children:
                this.element.find( children );

        if ( items.length === 0 ) {
            items = elem.children();
        }

        return items;
    },

    _filterItems: function( val ) {
        var idx, callback, length, dst,
            show = [],
            hide = [],
            opts = this.options,
            filterItems = this._getFilterableItems();

        if ( val != null ) {
            callback = opts.filterCallback || defaultFilterCallback;
            length = filterItems.length;

            // Partition the items into those to be hidden and those to be shown
            for ( idx = 0 ; idx < length ; idx++ ) {
                dst = ( callback.call( filterItems[ idx ], idx, val ) ) ? hide : show;
                dst.push( filterItems[ idx ] );
            }
        }

        // If nothing is hidden, then the decision whether to hide or show the items
        // is based on the "filterReveal" option.
        if ( hide.length === 0 ) {
            filterItems[ ( opts.filterReveal && val.length === 0 ) ?
                "addClass" : "removeClass" ]( "ui-screen-hidden" );
        } else {
            $( hide ).addClass( "ui-screen-hidden" );
            $( show ).removeClass( "ui-screen-hidden" );
        }

        this._refreshChildWidget();

        this._trigger( "filter", null, {
            items: filterItems
        });
    },

    // The Default implementation of _refreshChildWidget attempts to call
    // refresh on collapsibleset, controlgroup, selectmenu, or listview
    _refreshChildWidget: function() {
        var widget, idx,
            recognizedWidgets = [ "collapsibleset", "selectmenu", "controlgroup", "listview" ];

        for ( idx = recognizedWidgets.length - 1 ; idx > -1 ; idx-- ) {
            widget = recognizedWidgets[ idx ];
            if ( $.mobile[ widget ] ) {
                widget = this.element.data( "mobile-" + widget );
                if ( widget && $.isFunction( widget.refresh ) ) {
                    widget.refresh();
                }
            }
        }
    },

    // TODO: When the input is not internal, do not even store it in this._search
    _setInput: function ( selector ) {
        var search = this._search;

        // Stop a pending filter operation
        if ( this._timer ) {
            window.clearTimeout( this._timer );
            this._timer = 0;
        }

        if ( search ) {
            this._off( search, "keyup change input" );
            search = null;
        }

        if ( selector ) {
            search = selector.jquery ? selector:
                selector.nodeName ? $( selector ):
                this.document.find( selector );

            this._on( search, {
                keydown: "_onKeyDown",
                keypress: "_onKeyPress",
                keyup: "_onKeyUp",
                change: "_onKeyUp",
                input: "_onKeyUp"
            });
        }

        this._search = search;
    },

    // Prevent form submission
    _onKeyDown: function( event ) {
        if ( event.keyCode === $.ui.keyCode.ENTER ) {
            event.preventDefault();
            this._preventKeyPress = true;
        }
    },

    _onKeyPress: function( event ) {
        if ( this._preventKeyPress ) {
            event.preventDefault();
            this._preventKeyPress = false;
        }
    },

    _setOptions: function( options ) {
        var refilter = !( ( options.filterReveal === undefined ) &&
                ( options.filterCallback === undefined ) &&
                ( options.children === undefined ) );

        this._super( options );

        if ( options.input !== undefined ) {
            this._setInput( options.input );
            refilter = true;
        }

        if ( refilter ) {
            this.refresh();
        }
    },

    _destroy: function() {
        var opts = this.options,
            items = this._getFilterableItems();

        if ( opts.enhanced ) {
            items.toggleClass( "ui-screen-hidden", opts.filterReveal );
        } else {
            items.removeClass( "ui-screen-hidden" );
        }
    },

    refresh: function() {
        if ( this._timer ) {
            window.clearTimeout( this._timer );
            this._timer = 0;
        }
        this._filterItems( ( ( this._search && this._search.val() ) || "" ).toLowerCase() );
    }
});

})( jQuery );

(function( $, undefined ) {

// Create a function that will replace the _setOptions function of a widget,
// and will pass the options on to the input of the filterable.
var replaceSetOptions = function( self, orig ) {
        return function( options ) {
            orig.call( this, options );
            self._syncTextInputOptions( options );
        };
    },
    rDividerListItem = /(^|\s)ui-li-divider(\s|$)/,
    origDefaultFilterCallback = $.mobile.filterable.prototype.options.filterCallback;

// Override the default filter callback with one that does not hide list dividers
$.mobile.filterable.prototype.options.filterCallback = function( index, searchValue ) {
    return !this.className.match( rDividerListItem ) &&
        origDefaultFilterCallback.call( this, index, searchValue );
};

$.widget( "mobile.filterable", $.mobile.filterable, {
    options: {
        filterPlaceholder: "Filter items...",
        filterTheme: null
    },

    _create: function() {
        var idx, widgetName,
            elem = this.element,
            recognizedWidgets = [ "collapsibleset", "selectmenu", "controlgroup", "listview" ],
            createHandlers = {};

        this._super();

        $.extend( this, {
            _widget: null
        });

        for ( idx = recognizedWidgets.length - 1 ; idx > -1 ; idx-- ) {
            widgetName = recognizedWidgets[ idx ];
            if ( $.mobile[ widgetName ] ) {
                if ( this._setWidget( elem.data( "mobile-" + widgetName ) ) ) {
                    break;
                } else {
                    createHandlers[ widgetName + "create" ] = "_handleCreate";
                }
            }
        }

        if ( !this._widget ) {
            this._on( elem, createHandlers );
        }
    },

    _handleCreate: function( evt ) {
        this._setWidget( this.element.data( "mobile-" + evt.type.substring( 0, evt.type.length - 6 ) ) );
    },

    _trigger: function( type, event, data ) {
        if ( this._widget && this._widget.widgetFullName === "mobile-listview" &&
            type === "beforefilter" ) {

            // Also trigger listviewbeforefilter if this widget is also a listview
            this._widget._trigger( "beforefilter", event, data );
        }

        // Passing back the response enables calling preventDefault()
        return this._super( type, event, data );
    },

    _setWidget: function( widget ) {
        if ( !this._widget && widget ) {
            this._widget = widget;
            this._widget._setOptions = replaceSetOptions( this, this._widget._setOptions );
        }

        if ( !!this._widget ) {
            this._syncTextInputOptions( this._widget.options );
            if ( this._widget.widgetName === "listview" ) {
                this._widget.options.hideDividers = true;
                this._widget.element.listview( "refresh" );
            }
        }

        return !!this._widget;
    },

    _isSearchInternal: function() {
        return ( this._search && this._search.jqmData( "ui-filterable-" + this.uuid + "-internal" ) );
    },

    _setInput: function( selector ) {
        var opts = this.options,
            updatePlaceholder = true,
            textinputOpts = {};

        if ( !selector ) {
            if ( this._isSearchInternal() ) {

                // Ignore the call to set a new input if the selector goes to falsy and
                // the current textinput is already of the internally generated variety.
                return;
            } else {

                // Generating a new textinput widget. No need to set the placeholder
                // further down the function.
                updatePlaceholder = false;
                selector = $( "<input " +
                    "data-" + $.mobile.ns + "type='search' " +
                    "placeholder='" + opts.filterPlaceholder + "'></input>" )
                    .jqmData( "ui-filterable-" + this.uuid + "-internal", true );
                $( "<form class='ui-filterable'></form>" )
                    .append( selector )
                    .submit( function( evt ) {
                        evt.preventDefault();
                        selector.blur();
                    })
                    .insertBefore( this.element );
                if ( $.mobile.textinput ) {
                    if ( this.options.filterTheme != null ) {
                        textinputOpts[ "theme" ] = opts.filterTheme;
                    }

                    selector.textinput( textinputOpts );
                }
            }
        }

        this._super( selector );

        if ( this._isSearchInternal() && updatePlaceholder ) {
            this._search.attr( "placeholder", this.options.filterPlaceholder );
        }
    },

    _setOptions: function( options ) {
        var ret = this._super( options );

        // Need to set the filterPlaceholder after having established the search input
        if ( options.filterPlaceholder !== undefined ) {
            if ( this._isSearchInternal() ) {
                this._search.attr( "placeholder", options.filterPlaceholder );
            }
        }

        if ( options.filterTheme !== undefined && this._search && $.mobile.textinput ) {
            this._search.textinput( "option", "theme", options.filterTheme );
        }

        return ret;
    },

    // The listview implementation accompanying this filterable backcompat layer will call
    // filterable.refresh() after it's done refreshing the listview to make sure the filterable
    // filters out any new items added. However, when the listview refresh has been initiated by
    // the filterable itself, then such filtering has already taken place, and calling the
    // filterable's refresh() method will cause an infinite recursion. We stop this by setting a
    // flag that will cause the filterable's refresh() method to short-circuit.
    _refreshChildWidget: function() {
        this._refreshingChildWidget = true;
        this._superApply( arguments );
        this._refreshingChildWidget = false;
    },

    refresh: function() {
        if ( !this._refreshingChildWidget ) {
            this._superApply( arguments );
        }
    },

    _destroy: function() {
        if ( this._isSearchInternal() ) {
            this._search.remove();
        }
        this._super();
    },

    _syncTextInputOptions: function( options ) {
        var idx,
            textinputOptions = {};

        // We only sync options if the filterable's textinput is of the internally
        // generated variety, rather than one specified by the user.
        if ( this._isSearchInternal() && $.mobile.textinput ) {

            // Apply only the options understood by textinput
            for ( idx in $.mobile.textinput.prototype.options ) {
                if ( options[ idx ] !== undefined ) {
                    if ( idx === "theme" && this.options.filterTheme != null ) {
                        textinputOptions[ idx ] = this.options.filterTheme;
                    } else {
                        textinputOptions[ idx ] = options[ idx ];
                    }
                }
            }
            this._search.textinput( "option", textinputOptions );
        }
    }
});

// Instantiate a filterable on a listview that has the data-filter="true" attribute
// This is not necessary for static content, because the auto-enhance takes care of instantiating
// the filterable upon encountering data-filter="true". However, because of 1.3.x it is expected
// that a listview with data-filter="true" will be filterable even if you just instantiate a
// listview on it. The extension below ensures that this continues to happen in 1.4.x.
$.widget( "mobile.listview", $.mobile.listview, {
    options: {
        filter: false
    },
    _create: function() {
        if ( this.options.filter === true &&
                !this.element.data( "mobile-filterable" ) ) {
            this.element.filterable();
        }
        return this._super();
    },

    refresh: function() {
        var filterable;

        this._superApply( arguments );

        if ( this.options.filter === true ) {
            filterable = this.element.data( "mobile-filterable" );

            if ( filterable ) {
                filterable.refresh();
            }
        }
    }
});

})( jQuery );

/*!
 * jQuery UI Tabs fadf2b312a05040436451c64bbfaf4814bc62c56
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/tabs/
 *
 * Depends:
 *    jquery.ui.core.js
 *    jquery.ui.widget.js
 */
(function( $, undefined ) {

var tabId = 0,
    rhash = /#.*$/;

function getNextTabId() {
    return ++tabId;
}

function isLocal( anchor ) {
    return anchor.hash.length > 1 &&
        decodeURIComponent( anchor.href.replace( rhash, "" ) ) ===
            decodeURIComponent( location.href.replace( rhash, "" ) );
}

$.widget( "ui.tabs", {
    version: "fadf2b312a05040436451c64bbfaf4814bc62c56",
    delay: 300,
    options: {
        active: null,
        collapsible: false,
        event: "click",
        heightStyle: "content",
        hide: null,
        show: null,

        // callbacks
        activate: null,
        beforeActivate: null,
        beforeLoad: null,
        load: null
    },

    _create: function() {
        var that = this,
            options = this.options;

        this.running = false;

        this.element
            .addClass( "ui-tabs ui-widget ui-widget-content ui-corner-all" )
            .toggleClass( "ui-tabs-collapsible", options.collapsible )
            // Prevent users from focusing disabled tabs via click
            .delegate( ".ui-tabs-nav > li", "mousedown" + this.eventNamespace, function( event ) {
                if ( $( this ).is( ".ui-state-disabled" ) ) {
                    event.preventDefault();
                }
            })
            // support: IE <9
            // Preventing the default action in mousedown doesn't prevent IE
            // from focusing the element, so if the anchor gets focused, blur.
            // We don't have to worry about focusing the previously focused
            // element since clicking on a non-focusable element should focus
            // the body anyway.
            .delegate( ".ui-tabs-anchor", "focus" + this.eventNamespace, function() {
                if ( $( this ).closest( "li" ).is( ".ui-state-disabled" ) ) {
                    this.blur();
                }
            });

        this._processTabs();
        options.active = this._initialActive();

        // Take disabling tabs via class attribute from HTML
        // into account and update option properly.
        if ( $.isArray( options.disabled ) ) {
            options.disabled = $.unique( options.disabled.concat(
                $.map( this.tabs.filter( ".ui-state-disabled" ), function( li ) {
                    return that.tabs.index( li );
                })
            ) ).sort();
        }

        // check for length avoids error when initializing empty list
        if ( this.options.active !== false && this.anchors.length ) {
            this.active = this._findActive( options.active );
        } else {
            this.active = $();
        }

        this._refresh();

        if ( this.active.length ) {
            this.load( options.active );
        }
    },

    _initialActive: function() {
        var active = this.options.active,
            collapsible = this.options.collapsible,
            locationHash = location.hash.substring( 1 );

        if ( active === null ) {
            // check the fragment identifier in the URL
            if ( locationHash ) {
                this.tabs.each(function( i, tab ) {
                    if ( $( tab ).attr( "aria-controls" ) === locationHash ) {
                        active = i;
                        return false;
                    }
                });
            }

            // check for a tab marked active via a class
            if ( active === null ) {
                active = this.tabs.index( this.tabs.filter( ".ui-tabs-active" ) );
            }

            // no active tab, set to false
            if ( active === null || active === -1 ) {
                active = this.tabs.length ? 0 : false;
            }
        }

        // handle numbers: negative, out of range
        if ( active !== false ) {
            active = this.tabs.index( this.tabs.eq( active ) );
            if ( active === -1 ) {
                active = collapsible ? false : 0;
            }
        }

        // don't allow collapsible: false and active: false
        if ( !collapsible && active === false && this.anchors.length ) {
            active = 0;
        }

        return active;
    },

    _getCreateEventData: function() {
        return {
            tab: this.active,
            panel: !this.active.length ? $() : this._getPanelForTab( this.active )
        };
    },

    _tabKeydown: function( event ) {
        var focusedTab = $( this.document[0].activeElement ).closest( "li" ),
            selectedIndex = this.tabs.index( focusedTab ),
            goingForward = true;

        if ( this._handlePageNav( event ) ) {
            return;
        }

        switch ( event.keyCode ) {
            case $.ui.keyCode.RIGHT:
            case $.ui.keyCode.DOWN:
                selectedIndex++;
                break;
            case $.ui.keyCode.UP:
            case $.ui.keyCode.LEFT:
                goingForward = false;
                selectedIndex--;
                break;
            case $.ui.keyCode.END:
                selectedIndex = this.anchors.length - 1;
                break;
            case $.ui.keyCode.HOME:
                selectedIndex = 0;
                break;
            case $.ui.keyCode.SPACE:
                // Activate only, no collapsing
                event.preventDefault();
                clearTimeout( this.activating );
                this._activate( selectedIndex );
                return;
            case $.ui.keyCode.ENTER:
                // Toggle (cancel delayed activation, allow collapsing)
                event.preventDefault();
                clearTimeout( this.activating );
                // Determine if we should collapse or activate
                this._activate( selectedIndex === this.options.active ? false : selectedIndex );
                return;
            default:
                return;
        }

        // Focus the appropriate tab, based on which key was pressed
        event.preventDefault();
        clearTimeout( this.activating );
        selectedIndex = this._focusNextTab( selectedIndex, goingForward );

        // Navigating with control key will prevent automatic activation
        if ( !event.ctrlKey ) {
            // Update aria-selected immediately so that AT think the tab is already selected.
            // Otherwise AT may confuse the user by stating that they need to activate the tab,
            // but the tab will already be activated by the time the announcement finishes.
            focusedTab.attr( "aria-selected", "false" );
            this.tabs.eq( selectedIndex ).attr( "aria-selected", "true" );

            this.activating = this._delay(function() {
                this.option( "active", selectedIndex );
            }, this.delay );
        }
    },

    _panelKeydown: function( event ) {
        if ( this._handlePageNav( event ) ) {
            return;
        }

        // Ctrl+up moves focus to the current tab
        if ( event.ctrlKey && event.keyCode === $.ui.keyCode.UP ) {
            event.preventDefault();
            this.active.focus();
        }
    },

    // Alt+page up/down moves focus to the previous/next tab (and activates)
    _handlePageNav: function( event ) {
        if ( event.altKey && event.keyCode === $.ui.keyCode.PAGE_UP ) {
            this._activate( this._focusNextTab( this.options.active - 1, false ) );
            return true;
        }
        if ( event.altKey && event.keyCode === $.ui.keyCode.PAGE_DOWN ) {
            this._activate( this._focusNextTab( this.options.active + 1, true ) );
            return true;
        }
    },

    _findNextTab: function( index, goingForward ) {
        var lastTabIndex = this.tabs.length - 1;

        function constrain() {
            if ( index > lastTabIndex ) {
                index = 0;
            }
            if ( index < 0 ) {
                index = lastTabIndex;
            }
            return index;
        }

        while ( $.inArray( constrain(), this.options.disabled ) !== -1 ) {
            index = goingForward ? index + 1 : index - 1;
        }

        return index;
    },

    _focusNextTab: function( index, goingForward ) {
        index = this._findNextTab( index, goingForward );
        this.tabs.eq( index ).focus();
        return index;
    },

    _setOption: function( key, value ) {
        if ( key === "active" ) {
            // _activate() will handle invalid values and update this.options
            this._activate( value );
            return;
        }

        if ( key === "disabled" ) {
            // don't use the widget factory's disabled handling
            this._setupDisabled( value );
            return;
        }

        this._super( key, value);

        if ( key === "collapsible" ) {
            this.element.toggleClass( "ui-tabs-collapsible", value );
            // Setting collapsible: false while collapsed; open first panel
            if ( !value && this.options.active === false ) {
                this._activate( 0 );
            }
        }

        if ( key === "event" ) {
            this._setupEvents( value );
        }

        if ( key === "heightStyle" ) {
            this._setupHeightStyle( value );
        }
    },

    _tabId: function( tab ) {
        return tab.attr( "aria-controls" ) || "ui-tabs-" + getNextTabId();
    },

    _sanitizeSelector: function( hash ) {
        return hash ? hash.replace( /[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g, "\\$&" ) : "";
    },

    refresh: function() {
        var options = this.options,
            lis = this.tablist.children( ":has(a[href])" );

        // get disabled tabs from class attribute from HTML
        // this will get converted to a boolean if needed in _refresh()
        options.disabled = $.map( lis.filter( ".ui-state-disabled" ), function( tab ) {
            return lis.index( tab );
        });

        this._processTabs();

        // was collapsed or no tabs
        if ( options.active === false || !this.anchors.length ) {
            options.active = false;
            this.active = $();
        // was active, but active tab is gone
        } else if ( this.active.length && !$.contains( this.tablist[ 0 ], this.active[ 0 ] ) ) {
            // all remaining tabs are disabled
            if ( this.tabs.length === options.disabled.length ) {
                options.active = false;
                this.active = $();
            // activate previous tab
            } else {
                this._activate( this._findNextTab( Math.max( 0, options.active - 1 ), false ) );
            }
        // was active, active tab still exists
        } else {
            // make sure active index is correct
            options.active = this.tabs.index( this.active );
        }

        this._refresh();
    },

    _refresh: function() {
        this._setupDisabled( this.options.disabled );
        this._setupEvents( this.options.event );
        this._setupHeightStyle( this.options.heightStyle );

        this.tabs.not( this.active ).attr({
            "aria-selected": "false",
            tabIndex: -1
        });
        this.panels.not( this._getPanelForTab( this.active ) )
            .hide()
            .attr({
                "aria-expanded": "false",
                "aria-hidden": "true"
            });

        // Make sure one tab is in the tab order
        if ( !this.active.length ) {
            this.tabs.eq( 0 ).attr( "tabIndex", 0 );
        } else {
            this.active
                .addClass( "ui-tabs-active ui-state-active" )
                .attr({
                    "aria-selected": "true",
                    tabIndex: 0
                });
            this._getPanelForTab( this.active )
                .show()
                .attr({
                    "aria-expanded": "true",
                    "aria-hidden": "false"
                });
        }
    },

    _processTabs: function() {
        var that = this;

        this.tablist = this._getList()
            .addClass( "ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all" )
            .attr( "role", "tablist" );

        this.tabs = this.tablist.find( "> li:has(a[href])" )
            .addClass( "ui-state-default ui-corner-top" )
            .attr({
                role: "tab",
                tabIndex: -1
            });

        this.anchors = this.tabs.map(function() {
                return $( "a", this )[ 0 ];
            })
            .addClass( "ui-tabs-anchor" )
            .attr({
                role: "presentation",
                tabIndex: -1
            });

        this.panels = $();

        this.anchors.each(function( i, anchor ) {
            var selector, panel, panelId,
                anchorId = $( anchor ).uniqueId().attr( "id" ),
                tab = $( anchor ).closest( "li" ),
                originalAriaControls = tab.attr( "aria-controls" );

            // inline tab
            if ( isLocal( anchor ) ) {
                selector = anchor.hash;
                panel = that.element.find( that._sanitizeSelector( selector ) );
            // remote tab
            } else {
                panelId = that._tabId( tab );
                selector = "#" + panelId;
                panel = that.element.find( selector );
                if ( !panel.length ) {
                    panel = that._createPanel( panelId );
                    panel.insertAfter( that.panels[ i - 1 ] || that.tablist );
                }
                panel.attr( "aria-live", "polite" );
            }

            if ( panel.length) {
                that.panels = that.panels.add( panel );
            }
            if ( originalAriaControls ) {
                tab.data( "ui-tabs-aria-controls", originalAriaControls );
            }
            tab.attr({
                "aria-controls": selector.substring( 1 ),
                "aria-labelledby": anchorId
            });
            panel.attr( "aria-labelledby", anchorId );
        });

        this.panels
            .addClass( "ui-tabs-panel ui-widget-content ui-corner-bottom" )
            .attr( "role", "tabpanel" );
    },

    // allow overriding how to find the list for rare usage scenarios (#7715)
    _getList: function() {
        return this.element.find( "ol,ul" ).eq( 0 );
    },

    _createPanel: function( id ) {
        return $( "<div>" )
            .attr( "id", id )
            .addClass( "ui-tabs-panel ui-widget-content ui-corner-bottom" )
            .data( "ui-tabs-destroy", true );
    },

    _setupDisabled: function( disabled ) {
        if ( $.isArray( disabled ) ) {
            if ( !disabled.length ) {
                disabled = false;
            } else if ( disabled.length === this.anchors.length ) {
                disabled = true;
            }
        }

        // disable tabs
        for ( var i = 0, li; ( li = this.tabs[ i ] ); i++ ) {
            if ( disabled === true || $.inArray( i, disabled ) !== -1 ) {
                $( li )
                    .addClass( "ui-state-disabled" )
                    .attr( "aria-disabled", "true" );
            } else {
                $( li )
                    .removeClass( "ui-state-disabled" )
                    .removeAttr( "aria-disabled" );
            }
        }

        this.options.disabled = disabled;
    },

    _setupEvents: function( event ) {
        var events = {
            click: function( event ) {
                event.preventDefault();
            }
        };
        if ( event ) {
            $.each( event.split(" "), function( index, eventName ) {
                events[ eventName ] = "_eventHandler";
            });
        }

        this._off( this.anchors.add( this.tabs ).add( this.panels ) );
        this._on( this.anchors, events );
        this._on( this.tabs, { keydown: "_tabKeydown" } );
        this._on( this.panels, { keydown: "_panelKeydown" } );

        this._focusable( this.tabs );
        this._hoverable( this.tabs );
    },

    _setupHeightStyle: function( heightStyle ) {
        var maxHeight,
            parent = this.element.parent();

        if ( heightStyle === "fill" ) {
            maxHeight = parent.height();
            maxHeight -= this.element.outerHeight() - this.element.height();

            this.element.siblings( ":visible" ).each(function() {
                var elem = $( this ),
                    position = elem.css( "position" );

                if ( position === "absolute" || position === "fixed" ) {
                    return;
                }
                maxHeight -= elem.outerHeight( true );
            });

            this.element.children().not( this.panels ).each(function() {
                maxHeight -= $( this ).outerHeight( true );
            });

            this.panels.each(function() {
                $( this ).height( Math.max( 0, maxHeight -
                    $( this ).innerHeight() + $( this ).height() ) );
            })
            .css( "overflow", "auto" );
        } else if ( heightStyle === "auto" ) {
            maxHeight = 0;
            this.panels.each(function() {
                maxHeight = Math.max( maxHeight, $( this ).height( "" ).height() );
            }).height( maxHeight );
        }
    },

    _eventHandler: function( event ) {
        var options = this.options,
            active = this.active,
            anchor = $( event.currentTarget ),
            tab = anchor.closest( "li" ),
            clickedIsActive = tab[ 0 ] === active[ 0 ],
            collapsing = clickedIsActive && options.collapsible,
            toShow = collapsing ? $() : this._getPanelForTab( tab ),
            toHide = !active.length ? $() : this._getPanelForTab( active ),
            eventData = {
                oldTab: active,
                oldPanel: toHide,
                newTab: collapsing ? $() : tab,
                newPanel: toShow
            };

        event.preventDefault();

        if ( tab.hasClass( "ui-state-disabled" ) ||
                // tab is already loading
                tab.hasClass( "ui-tabs-loading" ) ||
                // can't switch durning an animation
                this.running ||
                // click on active header, but not collapsible
                ( clickedIsActive && !options.collapsible ) ||
                // allow canceling activation
                ( this._trigger( "beforeActivate", event, eventData ) === false ) ) {
            return;
        }

        options.active = collapsing ? false : this.tabs.index( tab );

        this.active = clickedIsActive ? $() : tab;
        if ( this.xhr ) {
            this.xhr.abort();
        }

        if ( !toHide.length && !toShow.length ) {
            $.error( "jQuery UI Tabs: Mismatching fragment identifier." );
        }

        if ( toShow.length ) {
            this.load( this.tabs.index( tab ), event );
        }
        this._toggle( event, eventData );
    },

    // handles show/hide for selecting tabs
    _toggle: function( event, eventData ) {
        var that = this,
            toShow = eventData.newPanel,
            toHide = eventData.oldPanel;

        this.running = true;

        function complete() {
            that.running = false;
            that._trigger( "activate", event, eventData );
        }

        function show() {
            eventData.newTab.closest( "li" ).addClass( "ui-tabs-active ui-state-active" );

            if ( toShow.length && that.options.show ) {
                that._show( toShow, that.options.show, complete );
            } else {
                toShow.show();
                complete();
            }
        }

        // start out by hiding, then showing, then completing
        if ( toHide.length && this.options.hide ) {
            this._hide( toHide, this.options.hide, function() {
                eventData.oldTab.closest( "li" ).removeClass( "ui-tabs-active ui-state-active" );
                show();
            });
        } else {
            eventData.oldTab.closest( "li" ).removeClass( "ui-tabs-active ui-state-active" );
            toHide.hide();
            show();
        }

        toHide.attr({
            "aria-expanded": "false",
            "aria-hidden": "true"
        });
        eventData.oldTab.attr( "aria-selected", "false" );
        // If we're switching tabs, remove the old tab from the tab order.
        // If we're opening from collapsed state, remove the previous tab from the tab order.
        // If we're collapsing, then keep the collapsing tab in the tab order.
        if ( toShow.length && toHide.length ) {
            eventData.oldTab.attr( "tabIndex", -1 );
        } else if ( toShow.length ) {
            this.tabs.filter(function() {
                return $( this ).attr( "tabIndex" ) === 0;
            })
            .attr( "tabIndex", -1 );
        }

        toShow.attr({
            "aria-expanded": "true",
            "aria-hidden": "false"
        });
        eventData.newTab.attr({
            "aria-selected": "true",
            tabIndex: 0
        });
    },

    _activate: function( index ) {
        var anchor,
            active = this._findActive( index );

        // trying to activate the already active panel
        if ( active[ 0 ] === this.active[ 0 ] ) {
            return;
        }

        // trying to collapse, simulate a click on the current active header
        if ( !active.length ) {
            active = this.active;
        }

        anchor = active.find( ".ui-tabs-anchor" )[ 0 ];
        this._eventHandler({
            target: anchor,
            currentTarget: anchor,
            preventDefault: $.noop
        });
    },

    _findActive: function( index ) {
        return index === false ? $() : this.tabs.eq( index );
    },

    _getIndex: function( index ) {
        // meta-function to give users option to provide a href string instead of a numerical index.
        if ( typeof index === "string" ) {
            index = this.anchors.index( this.anchors.filter( "[href$='" + index + "']" ) );
        }

        return index;
    },

    _destroy: function() {
        if ( this.xhr ) {
            this.xhr.abort();
        }

        this.element.removeClass( "ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible" );

        this.tablist
            .removeClass( "ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all" )
            .removeAttr( "role" );

        this.anchors
            .removeClass( "ui-tabs-anchor" )
            .removeAttr( "role" )
            .removeAttr( "tabIndex" )
            .removeUniqueId();

        this.tabs.add( this.panels ).each(function() {
            if ( $.data( this, "ui-tabs-destroy" ) ) {
                $( this ).remove();
            } else {
                $( this )
                    .removeClass( "ui-state-default ui-state-active ui-state-disabled " +
                        "ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel" )
                    .removeAttr( "tabIndex" )
                    .removeAttr( "aria-live" )
                    .removeAttr( "aria-busy" )
                    .removeAttr( "aria-selected" )
                    .removeAttr( "aria-labelledby" )
                    .removeAttr( "aria-hidden" )
                    .removeAttr( "aria-expanded" )
                    .removeAttr( "role" );
            }
        });

        this.tabs.each(function() {
            var li = $( this ),
                prev = li.data( "ui-tabs-aria-controls" );
            if ( prev ) {
                li
                    .attr( "aria-controls", prev )
                    .removeData( "ui-tabs-aria-controls" );
            } else {
                li.removeAttr( "aria-controls" );
            }
        });

        this.panels.show();

        if ( this.options.heightStyle !== "content" ) {
            this.panels.css( "height", "" );
        }
    },

    enable: function( index ) {
        var disabled = this.options.disabled;
        if ( disabled === false ) {
            return;
        }

        if ( index === undefined ) {
            disabled = false;
        } else {
            index = this._getIndex( index );
            if ( $.isArray( disabled ) ) {
                disabled = $.map( disabled, function( num ) {
                    return num !== index ? num : null;
                });
            } else {
                disabled = $.map( this.tabs, function( li, num ) {
                    return num !== index ? num : null;
                });
            }
        }
        this._setupDisabled( disabled );
    },

    disable: function( index ) {
        var disabled = this.options.disabled;
        if ( disabled === true ) {
            return;
        }

        if ( index === undefined ) {
            disabled = true;
        } else {
            index = this._getIndex( index );
            if ( $.inArray( index, disabled ) !== -1 ) {
                return;
            }
            if ( $.isArray( disabled ) ) {
                disabled = $.merge( [ index ], disabled ).sort();
            } else {
                disabled = [ index ];
            }
        }
        this._setupDisabled( disabled );
    },

    load: function( index, event ) {
        index = this._getIndex( index );
        var that = this,
            tab = this.tabs.eq( index ),
            anchor = tab.find( ".ui-tabs-anchor" ),
            panel = this._getPanelForTab( tab ),
            eventData = {
                tab: tab,
                panel: panel
            };

        // not remote
        if ( isLocal( anchor[ 0 ] ) ) {
            return;
        }

        this.xhr = $.ajax( this._ajaxSettings( anchor, event, eventData ) );

        // support: jQuery <1.8
        // jQuery <1.8 returns false if the request is canceled in beforeSend,
        // but as of 1.8, $.ajax() always returns a jqXHR object.
        if ( this.xhr && this.xhr.statusText !== "canceled" ) {
            tab.addClass( "ui-tabs-loading" );
            panel.attr( "aria-busy", "true" );

            this.xhr
                .success(function( response ) {
                    // support: jQuery <1.8
                    // http://bugs.jquery.com/ticket/11778
                    setTimeout(function() {
                        panel.html( response );
                        that._trigger( "load", event, eventData );
                    }, 1 );
                })
                .complete(function( jqXHR, status ) {
                    // support: jQuery <1.8
                    // http://bugs.jquery.com/ticket/11778
                    setTimeout(function() {
                        if ( status === "abort" ) {
                            that.panels.stop( false, true );
                        }

                        tab.removeClass( "ui-tabs-loading" );
                        panel.removeAttr( "aria-busy" );

                        if ( jqXHR === that.xhr ) {
                            delete that.xhr;
                        }
                    }, 1 );
                });
        }
    },

    _ajaxSettings: function( anchor, event, eventData ) {
        var that = this;
        return {
            url: anchor.attr( "href" ),
            beforeSend: function( jqXHR, settings ) {
                return that._trigger( "beforeLoad", event,
                    $.extend( { jqXHR : jqXHR, ajaxSettings: settings }, eventData ) );
            }
        };
    },

    _getPanelForTab: function( tab ) {
        var id = $( tab ).attr( "aria-controls" );
        return this.element.find( this._sanitizeSelector( "#" + id ) );
    }
});

})( jQuery );

(function( $, undefined ) {

})( jQuery );

(function( $, window ) {

    $.mobile.iosorientationfixEnabled = true;

    // This fix addresses an iOS bug, so return early if the UA claims it's something else.
    var ua = navigator.userAgent,
        zoom,
        evt, x, y, z, aig;
    if ( !( /iPhone|iPad|iPod/.test( navigator.platform ) && /OS [1-5]_[0-9_]* like Mac OS X/i.test( ua ) && ua.indexOf( "AppleWebKit" ) > -1 ) ) {
        $.mobile.iosorientationfixEnabled = false;
        return;
    }

    zoom = $.mobile.zoom;

    function checkTilt( e ) {
        evt = e.originalEvent;
        aig = evt.accelerationIncludingGravity;

        x = Math.abs( aig.x );
        y = Math.abs( aig.y );
        z = Math.abs( aig.z );

        // If portrait orientation and in one of the danger zones
        if ( !window.orientation && ( x > 7 || ( ( z > 6 && y < 8 || z < 8 && y > 6 ) && x > 5 ) ) ) {
                if ( zoom.enabled ) {
                    zoom.disable();
                }
        }    else if ( !zoom.enabled ) {
                zoom.enable();
        }
    }

    $.mobile.document.on( "mobileinit", function() {
        if ( $.mobile.iosorientationfixEnabled ) {
            $.mobile.window
                .bind( "orientationchange.iosorientationfix", zoom.enable )
                .bind( "devicemotion.iosorientationfix", checkTilt );
        }
    });

}( jQuery, this ));

(function( $, window, undefined ) {
    var    $html = $( "html" ),
        $window = $.mobile.window;

    //remove initial build class (only present on first pageshow)
    function hideRenderingClass() {
        $html.removeClass( "ui-mobile-rendering" );
    }

    // trigger mobileinit event - useful hook for configuring $.mobile settings before they're used
    $( window.document ).trigger( "mobileinit" );

    // support conditions
    // if device support condition(s) aren't met, leave things as they are -> a basic, usable experience,
    // otherwise, proceed with the enhancements
    if ( !$.mobile.gradeA() ) {
        return;
    }

    // override ajaxEnabled on platforms that have known conflicts with hash history updates
    // or generally work better browsing in regular http for full page refreshes (BB5, Opera Mini)
    if ( $.mobile.ajaxBlacklist ) {
        $.mobile.ajaxEnabled = false;
    }

    // Add mobile, initial load "rendering" classes to docEl
    $html.addClass( "ui-mobile ui-mobile-rendering" );

    // This is a fallback. If anything goes wrong (JS errors, etc), or events don't fire,
    // this ensures the rendering class is removed after 5 seconds, so content is visible and accessible
    setTimeout( hideRenderingClass, 5000 );

    $.extend( $.mobile, {
        // find and enhance the pages in the dom and transition to the first page.
        initializePage: function() {
            // find present pages
            var path = $.mobile.path,
                $pages = $( ":jqmData(role='page'), :jqmData(role='dialog')" ),
                hash = path.stripHash( path.stripQueryParams(path.parseLocation().hash) ),
                theLocation = $.mobile.path.parseLocation(),
                hashPage = hash ? document.getElementById( hash ) : undefined;

            // if no pages are found, create one with body's inner html
            if ( !$pages.length ) {
                $pages = $( "body" ).wrapInner( "<div data-" + $.mobile.ns + "role='page'></div>" ).children( 0 );
            }

            // add dialogs, set data-url attrs
            $pages.each(function() {
                var $this = $( this );

                // unless the data url is already set set it to the pathname
                if ( !$this[ 0 ].getAttribute( "data-" + $.mobile.ns + "url" ) ) {
                    $this.attr( "data-" + $.mobile.ns + "url", $this.attr( "id" ) ||
                        path.convertUrlToDataUrl( theLocation.pathname + theLocation.search ) );
                }
            });

            // define first page in dom case one backs out to the directory root (not always the first page visited, but defined as fallback)
            $.mobile.firstPage = $pages.first();

            // define page container
            $.mobile.pageContainer = $.mobile.firstPage
                .parent()
                .addClass( "ui-mobile-viewport" )
                .pagecontainer();

            // initialize navigation events now, after mobileinit has occurred and the page container
            // has been created but before the rest of the library is alerted to that fact
            $.mobile.navreadyDeferred.resolve();

            // alert listeners that the pagecontainer has been determined for binding
            // to events triggered on it
            $window.trigger( "pagecontainercreate" );

            // cue page loading message
            $.mobile.loading( "show" );

            //remove initial build class (only present on first pageshow)
            hideRenderingClass();

            // if hashchange listening is disabled, there's no hash deeplink,
            // the hash is not valid (contains more than one # or does not start with #)
            // or there is no page with that hash, change to the first page in the DOM
            // Remember, however, that the hash can also be a path!
            if ( ! ( $.mobile.hashListeningEnabled &&
                $.mobile.path.isHashValid( location.hash ) &&
                ( $( hashPage ).is( ":jqmData(role='page')" ) ||
                    $.mobile.path.isPath( hash ) ||
                    hash === $.mobile.dialogHashKey ) ) ) {

                // make sure to set initial popstate state if it exists
                // so that navigation back to the initial page works properly
                if ( $.event.special.navigate.isPushStateEnabled() ) {
                    $.mobile.navigate.navigator.squash( path.parseLocation().href );
                }

                $.mobile.changePage( $.mobile.firstPage, {
                    transition: "none",
                    reverse: true,
                    changeHash: false,
                    fromHashChange: true
                });
            } else {
                // trigger hashchange or navigate to squash and record the correct
                // history entry for an initial hash path
                if ( !$.event.special.navigate.isPushStateEnabled() ) {
                    $window.trigger( "hashchange", [true] );
                } else {
                    // TODO figure out how to simplify this interaction with the initial history entry
                    // at the bottom js/navigate/navigate.js
                    $.mobile.navigate.history.stack = [];
                    $.mobile.navigate( $.mobile.path.isPath( location.hash ) ? location.hash : location.href );
                }
            }
        }
    });

    $(function() {
        //Run inlineSVG support test
        $.support.inlineSVG();

        // check which scrollTop value should be used by scrolling to 1 immediately at domready
        // then check what the scroll top is. Android will report 0... others 1
        // note that this initial scroll won't hide the address bar. It's just for the check.

        // hide iOS browser chrome on load if hideUrlBar is true this is to try and do it as soon as possible
        if ( $.mobile.hideUrlBar ) {
            window.scrollTo( 0, 1 );
        }

        // if defaultHomeScroll hasn't been set yet, see if scrollTop is 1
        // it should be 1 in most browsers, but android treats 1 as 0 (for hiding addr bar)
        // so if it's 1, use 0 from now on
        $.mobile.defaultHomeScroll = ( !$.support.scrollTop || $.mobile.window.scrollTop() === 1 ) ? 0 : 1;

        //dom-ready inits
        if ( $.mobile.autoInitializePage ) {
            $.mobile.initializePage();
        }

        // window load event
        // hide iOS browser chrome on load if hideUrlBar is true this is as fall back incase we were too early before
        if ( $.mobile.hideUrlBar ) {
            $window.load( $.mobile.silentScroll );
        }

        if ( !$.support.cssPointerEvents ) {
            // IE and Opera don't support CSS pointer-events: none that we use to disable link-based buttons
            // by adding the 'ui-disabled' class to them. Using a JavaScript workaround for those browser.
            // https://github.com/jquery/jquery-mobile/issues/3558

            // DEPRECATED as of 1.4.0 - remove ui-disabled after 1.4.0 release
            // only ui-state-disabled should be present thereafter
            $.mobile.document.delegate( ".ui-state-disabled,.ui-disabled", "vclick",
                function( e ) {
                    e.preventDefault();
                    e.stopImmediatePropagation();
                }
            );
        }
    });
}( jQuery, this ));


}));

}.call(window));

/***/ }),
/* 1 */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*** IMPORTS FROM imports-loader ***/
(function() {

/*!
 * jQuery Migrate - v3.0.1-hotfix - 2017-01-11
 * Copyright jQuery Foundation and other contributors
 */
;( function( factory ) {
    if ( true ) {

        // AMD. Register as an anonymous module.
        !(__WEBPACK_AMD_DEFINE_ARRAY__ = [ __webpack_require__(6) ], __WEBPACK_AMD_DEFINE_RESULT__ = function ($) {
            return factory($, window);
        }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
                __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
    } else if ( typeof module === "object" && module.exports ) {

        // Node/CommonJS
        // eslint-disable-next-line no-undef
        module.exports = factory( require( "jquery" ), window );
    } else {

        // Browser globals
        factory( jQuery, window );
    }
} )( function( jQuery, window ) {
"use strict";


jQuery.migrateVersion = "3.0.1-pre"; // with hotfix

/* exported migrateWarn, migrateWarnFunc, migrateWarnProp */

( function() {

    // Support: IE9 only
    // IE9 only creates console object when dev tools are first opened
    // Also, avoid Function#bind here to simplify PhantomJS usage
    var log = window.console && window.console.log &&
        function() {
            window.console.log.apply( window.console, arguments );
        },
        rbadVersions = /^[12]\./;

    if ( !log ) {
        return;
    }

    // Need jQuery 3.0.0+ and no older Migrate loaded
    if ( !jQuery || rbadVersions.test( jQuery.fn.jquery ) ) {
        log( "JQMIGRATE: jQuery 3.0.0+ REQUIRED" );
    }
    if ( jQuery.migrateWarnings ) {
        log( "JQMIGRATE: Migrate plugin loaded multiple times" );
    }

    // Show a message on the console so devs know we're active
    if ( !jQuery.migrateMute ) {
        log( "JQMIGRATE: Migrate is installed" +
            ( jQuery.migrateMute ? "" : " with logging active" ) +
            ", version " + jQuery.migrateVersion );
    }

} )();

var warnedAbout = {};

// List of warnings already given; public read only
jQuery.migrateWarnings = [];

// Set to false to disable traces that appear with warnings
if ( jQuery.migrateTrace === undefined ) {
    jQuery.migrateTrace = true;
}

// Forget any warnings we've already given; public
jQuery.migrateReset = function() {
    warnedAbout = {};
    jQuery.migrateWarnings.length = 0;
};

function migrateWarn( msg ) {
    var console = window.console;
    if ( !warnedAbout[ msg ] ) {
        warnedAbout[ msg ] = true;
        jQuery.migrateWarnings.push( msg );
        if ( console && console.warn && !jQuery.migrateMute ) {
            console.warn( "JQMIGRATE: " + msg );
            if ( jQuery.migrateTrace && console.trace ) {
                console.trace();
            }
        }
    }
}

function migrateWarnProp( obj, prop, value, msg ) {
    Object.defineProperty( obj, prop, {
        configurable: true,
        enumerable: true,
        get: function() {
            migrateWarn( msg );
            return value;
        },
        set: function( newValue ) {
            migrateWarn( msg );
            value = newValue;
        }
    } );
}

function migrateWarnFunc( obj, prop, newFunc, msg ) {
    obj[ prop ] = function() {
        migrateWarn( msg );
        return newFunc.apply( this, arguments );
    };
}

if ( window.document.compatMode === "BackCompat" ) {

    // JQuery has never supported or tested Quirks Mode
    migrateWarn( "jQuery is not compatible with Quirks Mode" );
}


var oldInit = jQuery.fn.init,
    oldIsNumeric = jQuery.isNumeric,
    oldFind = jQuery.find,
    rattrHashTest = /\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/,
    rattrHashGlob = /\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/g;

jQuery.fn.init = function( arg1 ) {
    var args = Array.prototype.slice.call( arguments );

    if ( typeof arg1 === "string" && arg1 === "#" ) {

        // JQuery( "#" ) is a bogus ID selector, but it returned an empty set before jQuery 3.0
        migrateWarn( "jQuery( '#' ) is not a valid selector" );
        args[ 0 ] = [];
    }

    return oldInit.apply( this, args );
};
jQuery.fn.init.prototype = jQuery.fn;

jQuery.find = function( selector ) {
    var args = Array.prototype.slice.call( arguments );

    // Support: PhantomJS 1.x
    // String#match fails to match when used with a //g RegExp, only on some strings
    if ( typeof selector === "string" && rattrHashTest.test( selector ) ) {

        // The nonstandard and undocumented unquoted-hash was removed in jQuery 1.12.0
        // First see if qS thinks it's a valid selector, if so avoid a false positive
        try {
            window.document.querySelector( selector );
        } catch ( err1 ) {

            // Didn't *look* valid to qSA, warn and try quoting what we think is the value
            selector = selector.replace( rattrHashGlob, function( _, attr, op, value ) {
                return "[" + attr + op + "\"" + value + "\"]";
            } );

            // If the regexp *may* have created an invalid selector, don't update it
            // Note that there may be false alarms if selector uses jQuery extensions
            try {
                window.document.querySelector( selector );
                migrateWarn( "Attribute selector with '#' must be quoted: " + args[ 0 ] );
                args[ 0 ] = selector;
            } catch ( err2 ) {
                migrateWarn( "Attribute selector with '#' was not fixed: " + args[ 0 ] );
            }
        }
    }

    return oldFind.apply( this, args );
};

// Copy properties attached to original jQuery.find method (e.g. .attr, .isXML)
var findProp;
for ( findProp in oldFind ) {
    if ( Object.prototype.hasOwnProperty.call( oldFind, findProp ) ) {
        jQuery.find[ findProp ] = oldFind[ findProp ];
    }
}

// The number of elements contained in the matched element set
jQuery.fn.size = function() {
    migrateWarn( "jQuery.fn.size() is deprecated and removed; use the .length property" );
    return this.length;
};

jQuery.parseJSON = function() {
    migrateWarn( "jQuery.parseJSON is deprecated; use JSON.parse" );
    return JSON.parse.apply( null, arguments );
};

jQuery.isNumeric = function( val ) {

    // The jQuery 2.2.3 implementation of isNumeric
    function isNumeric2( obj ) {
        var realStringObj = obj && obj.toString();
        return !jQuery.isArray( obj ) && ( realStringObj - parseFloat( realStringObj ) + 1 ) >= 0;
    }

    var newValue = oldIsNumeric( val ),
        oldValue = isNumeric2( val );

    if ( newValue !== oldValue ) {
        migrateWarn( "jQuery.isNumeric() should not be called on constructed objects" );
    }

    return oldValue;
};

migrateWarnFunc( jQuery, "unique", jQuery.uniqueSort,
    "jQuery.unique is deprecated; use jQuery.uniqueSort" );

// Now jQuery.expr.pseudos is the standard incantation
migrateWarnProp( jQuery.expr, "filters", jQuery.expr.pseudos,
    "jQuery.expr.filters is deprecated; use jQuery.expr.pseudos" );
migrateWarnProp( jQuery.expr, ":", jQuery.expr.pseudos,
    "jQuery.expr[':'] is deprecated; use jQuery.expr.pseudos" );


var oldAjax = jQuery.ajax;

jQuery.ajax = function( ) {
    var jQXHR = oldAjax.apply( this, arguments );

    // Be sure we got a jQXHR (e.g., not sync)
    if ( jQXHR.promise ) {
        migrateWarnFunc( jQXHR, "success", jQXHR.done,
            "jQXHR.success is deprecated and removed" );
        migrateWarnFunc( jQXHR, "error", jQXHR.fail,
            "jQXHR.error is deprecated and removed" );
        migrateWarnFunc( jQXHR, "complete", jQXHR.always,
            "jQXHR.complete is deprecated and removed" );
    }

    return jQXHR;
};


var oldRemoveAttr = jQuery.fn.removeAttr,
    oldToggleClass = jQuery.fn.toggleClass,
    rmatchNonSpace = /\S+/g;

jQuery.fn.removeAttr = function( name ) {
    var self = this;

    jQuery.each( name.match( rmatchNonSpace ), function( i, attr ) {
        if ( jQuery.expr.match.bool.test( attr ) ) {
            migrateWarn( "jQuery.fn.removeAttr no longer sets boolean properties: " + attr );
            self.prop( attr, false );
        }
    } );

    return oldRemoveAttr.apply( this, arguments );
};

jQuery.fn.toggleClass = function( state ) {

    // Only deprecating no-args or single boolean arg
    if ( state !== undefined && typeof state !== "boolean" ) {
        return oldToggleClass.apply( this, arguments );
    }

    migrateWarn( "jQuery.fn.toggleClass( boolean ) is deprecated" );

    // Toggle entire class name of each element
    return this.each( function() {
        var className = this.getAttribute && this.getAttribute( "class" ) || "";

        if ( className ) {
            jQuery.data( this, "__className__", className );
        }

        // If the element has a class name or if we're passed `false`,
        // then remove the whole classname (if there was one, the above saved it).
        // Otherwise bring back whatever was previously saved (if anything),
        // falling back to the empty string if nothing was stored.
        if ( this.setAttribute ) {
            this.setAttribute( "class",
                className || state === false ?
                "" :
                jQuery.data( this, "__className__" ) || ""
            );
        }
    } );
};


var internalSwapCall = false;

// If this version of jQuery has .swap(), don't false-alarm on internal uses
if ( jQuery.swap ) {
    jQuery.each( [ "height", "width", "reliableMarginRight" ], function( _, name ) {
        var oldHook = jQuery.cssHooks[ name ] && jQuery.cssHooks[ name ].get;

        if ( oldHook ) {
            jQuery.cssHooks[ name ].get = function() {
                var ret;

                internalSwapCall = true;
                ret = oldHook.apply( this, arguments );
                internalSwapCall = false;
                return ret;
            };
        }
    } );
}

jQuery.swap = function( elem, options, callback, args ) {
    var ret, name,
        old = {};

    if ( !internalSwapCall ) {
        migrateWarn( "jQuery.swap() is undocumented and deprecated" );
    }

    // Remember the old values, and insert the new ones
    for ( name in options ) {
        old[ name ] = elem.style[ name ];
        elem.style[ name ] = options[ name ];
    }

    ret = callback.apply( elem, args || [] );

    // Revert the old values
    for ( name in options ) {
        elem.style[ name ] = old[ name ];
    }

    return ret;
};

var oldData = jQuery.data;

jQuery.data = function( elem, name, value ) {
    var curData;

    // Name can be an object, and each entry in the object is meant to be set as data
    if ( name && typeof name === "object" && arguments.length === 2 ) {
        curData = jQuery.hasData( elem ) && oldData.call( this, elem );
        var sameKeys = {};
        for ( var key in name ) {
            if ( key !== jQuery.camelCase( key ) ) {
                migrateWarn( "jQuery.data() always sets/gets camelCased names: " + key );
                curData[ key ] = name[ key ];
            } else {
                sameKeys[ key ] = name[ key ];
            }
        }

        oldData.call( this, elem, sameKeys );

        return name;
    }

    // If the name is transformed, look for the un-transformed name in the data object
    if ( name && typeof name === "string" && name !== jQuery.camelCase( name ) ) {
        curData = jQuery.hasData( elem ) && oldData.call( this, elem );
        if ( curData && name in curData ) {
            migrateWarn( "jQuery.data() always sets/gets camelCased names: " + name );
            if ( arguments.length > 2 ) {
                curData[ name ] = value;
            }
            return curData[ name ];
        }
    }

    return oldData.apply( this, arguments );
};

var oldTweenRun = jQuery.Tween.prototype.run;

jQuery.Tween.prototype.run = function( ) {
    if ( jQuery.easing[ this.easing ].length > 1 ) {
        migrateWarn(
            "easing function " +
            "\"jQuery.easing." + this.easing.toString() +
            "\" should use only first argument"
        );

        var oldEasing = jQuery.easing[ this.easing ];
        jQuery.easing[ this.easing ] = function( percent ) {
            return oldEasing.call( jQuery.easing, percent, percent, 0, 1, 1 );
        }.bind( this );
    }

    oldTweenRun.apply( this, arguments );
};

jQuery.fx.interval = jQuery.fx.interval || 13;

// Support: IE9, Android <=4.4
// Avoid false positives on browsers that lack rAF
if ( window.requestAnimationFrame ) {
    migrateWarnProp( jQuery.fx, "interval", jQuery.fx.interval,
        "jQuery.fx.interval is deprecated" );
}

var oldLoad = jQuery.fn.load,
    oldEventAdd = jQuery.event.add,
    originalFix = jQuery.event.fix;

jQuery.event.props = [];
jQuery.event.fixHooks = {};

migrateWarnProp( jQuery.event.props, "concat", jQuery.event.props.concat,
    "jQuery.event.props.concat() is deprecated and removed" );

jQuery.event.fix = function( originalEvent ) {
    var event,
        type = originalEvent.type,
        fixHook = this.fixHooks[ type ],
        props = jQuery.event.props;

    if ( props.length ) {
        migrateWarn( "jQuery.event.props are deprecated and removed: " + props.join() );
        while ( props.length ) {
            jQuery.event.addProp( props.pop() );
        }
    }

    if ( fixHook && !fixHook._migrated_ ) {
        fixHook._migrated_ = true;
        migrateWarn( "jQuery.event.fixHooks are deprecated and removed: " + type );
        if ( ( props = fixHook.props ) && props.length ) {
            while ( props.length ) {
                jQuery.event.addProp( props.pop() );
            }
        }
    }

    event = originalFix.call( this, originalEvent );

    return fixHook && fixHook.filter ? fixHook.filter( event, originalEvent ) : event;
};

jQuery.event.add = function( elem, types ) {

    // This misses the multiple-types case but that seems awfully rare
    if ( elem === window && types === "load" && window.document.readyState === "complete" ) {
        migrateWarn( "jQuery(window).on('load'...) called after load event occurred" );
    }
    return oldEventAdd.apply( this, arguments );
};

jQuery.each( [ "load", "unload", "error" ], function( _, name ) {

    jQuery.fn[ name ] = function() {
        var args = Array.prototype.slice.call( arguments, 0 );

        // If this is an ajax load() the first arg should be the string URL;
        // technically this could also be the "Anything" arg of the event .load()
        // which just goes to show why this dumb signature has been deprecated!
        // jQuery custom builds that exclude the Ajax module justifiably die here.
        if ( name === "load" && typeof args[ 0 ] === "string" ) {
            return oldLoad.apply( this, args );
        }

        migrateWarn( "jQuery.fn." + name + "() is deprecated" );

        args.splice( 0, 0, name );
        if ( arguments.length ) {
            return this.on.apply( this, args );
        }

        // Use .triggerHandler here because:
        // - load and unload events don't need to bubble, only applied to window or image
        // - error event should not bubble to window, although it does pre-1.7
        // See http://bugs.jquery.com/ticket/11820
        this.triggerHandler.apply( this, args );
        return this;
    };

} );

// Trigger "ready" event only once, on document ready
jQuery( function() {
    jQuery( window.document ).triggerHandler( "ready" );
} );

jQuery.event.special.ready = {
    setup: function() {
        if ( this === window.document ) {
            migrateWarn( "'ready' event is deprecated" );
        }
    }
};

jQuery.fn.extend( {

    bind: function( types, data, fn ) {
        migrateWarn( "jQuery.fn.bind() is deprecated" );
        return this.on( types, null, data, fn );
    },
    unbind: function( types, fn ) {
        migrateWarn( "jQuery.fn.unbind() is deprecated" );
        return this.off( types, null, fn );
    },
    delegate: function( selector, types, data, fn ) {
        migrateWarn( "jQuery.fn.delegate() is deprecated" );
        return this.on( types, selector, data, fn );
    },
    undelegate: function( selector, types, fn ) {
        migrateWarn( "jQuery.fn.undelegate() is deprecated" );
        return arguments.length === 1 ?
            this.off( selector, "**" ) :
            this.off( types, selector || "**", fn );
    }
} );


var oldOffset = jQuery.fn.offset;

jQuery.fn.offset = function() {
    var docElem,
        elem = this[ 0 ],
        origin = { top: 0, left: 0 };

    if ( !elem || !elem.nodeType ) {
        migrateWarn( "jQuery.fn.offset() requires a valid DOM element" );
        return origin;
    }

    docElem = ( elem.ownerDocument || window.document ).documentElement;
    if ( !jQuery.contains( docElem, elem ) ) {
        migrateWarn( "jQuery.fn.offset() requires an element connected to a document" );
        return origin;
    }

    return oldOffset.apply( this, arguments );
};


var oldParam = jQuery.param;

jQuery.param = function( data, traditional ) {
    var ajaxTraditional = jQuery.ajaxSettings && jQuery.ajaxSettings.traditional;

    if ( traditional === undefined && ajaxTraditional ) {

        migrateWarn( "jQuery.param() no longer uses jQuery.ajaxSettings.traditional" );
        traditional = ajaxTraditional;
    }

    return oldParam.call( this, data, traditional );
};

var oldSelf = jQuery.fn.andSelf || jQuery.fn.addBack;

jQuery.fn.andSelf = function() {
    migrateWarn( "jQuery.fn.andSelf() is deprecated and removed, use jQuery.fn.addBack()" );
    return oldSelf.apply( this, arguments );
};


var oldDeferred = jQuery.Deferred,
    tuples = [

        // Action, add listener, callbacks, .then handlers, final state
        [ "resolve", "done", jQuery.Callbacks( "once memory" ),
            jQuery.Callbacks( "once memory" ), "resolved" ],
        [ "reject", "fail", jQuery.Callbacks( "once memory" ),
            jQuery.Callbacks( "once memory" ), "rejected" ],
        [ "notify", "progress", jQuery.Callbacks( "memory" ),
            jQuery.Callbacks( "memory" ) ]
    ];

jQuery.Deferred = function( func ) {
    var deferred = oldDeferred(),
        promise = deferred.promise();

    deferred.pipe = promise.pipe = function( /* fnDone, fnFail, fnProgress */ ) {
        var fns = arguments;

        migrateWarn( "deferred.pipe() is deprecated" );

        return jQuery.Deferred( function( newDefer ) {
            jQuery.each( tuples, function( i, tuple ) {
                var fn = jQuery.isFunction( fns[ i ] ) && fns[ i ];

                // Deferred.done(function() { bind to newDefer or newDefer.resolve })
                // deferred.fail(function() { bind to newDefer or newDefer.reject })
                // deferred.progress(function() { bind to newDefer or newDefer.notify })
                deferred[ tuple[ 1 ] ]( function() {
                    var returned = fn && fn.apply( this, arguments );
                    if ( returned && jQuery.isFunction( returned.promise ) ) {
                        returned.promise()
                            .done( newDefer.resolve )
                            .fail( newDefer.reject )
                            .progress( newDefer.notify );
                    } else {
                        newDefer[ tuple[ 0 ] + "With" ](
                            this === promise ? newDefer.promise() : this,
                            fn ? [ returned ] : arguments
                        );
                    }
                } );
            } );
            fns = null;
        } ).promise();

    };

    if ( func ) {
        func.call( deferred, deferred );
    }

    return deferred;
};


return jQuery;
} );

}.call(window));

/***/ }),
/* 2 */
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE_2__;

/***/ }),
/* 3 */
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE_3__;

/***/ }),
/* 4 */
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE_4__;

/***/ }),
/* 5 */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*** IMPORTS FROM imports-loader ***/
(function() {

(function (root, factory) { if (true) { !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(3), __webpack_require__(4), __webpack_require__(2)], __WEBPACK_AMD_DEFINE_RESULT__ = function () { return factory(root.CDP || (root.CDP = {})); }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
                __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__)); } else { factory(root.CDP || (root.CDP = {})); } }(this, function (CDP) { CDP.Framework = CDP.Framework || {};
/* tslint:disable:max-line-length */
var CDP;
(function (CDP) {
    var Framework;
    (function (Framework) {
        /**
         * platform 判定オブジェクト
         * [参考] https://w3g.jp/blog/tools/js_browser_sniffing
         */
        Framework.Platform = (function () {
            var ua = navigator.userAgent.toLowerCase();
            var majorVersion = function (browser) {
                var version = ua.match(new RegExp("(" + browser + ")( |/)([0-9]+)"));
                if (!version || version.length < 4) {
                    return 0;
                }
                return parseInt(version[3], 10);
            };
            return {
                ltIE6: typeof window.addEventListener === "undefined" && typeof document.documentElement.style.maxHeight === "undefined",
                ltIE7: typeof window.addEventListener === "undefined" && typeof document.querySelectorAll === "undefined",
                ltIE8: typeof window.addEventListener === "undefined" && typeof document.getElementsByClassName === "undefined",
                ltIE9: document.uniqueID && typeof window.matchMedia === "undefined",
                gtIE10: document.uniqueID && window.matchMedia,
                Trident: document.uniqueID,
                Gecko: "MozAppearance" in document.documentElement.style,
                Presto: CDP.global.opera,
                Blink: CDP.global.chrome,
                Webkit: typeof CDP.global.chrome === "undefined" && "WebkitAppearance" in document.documentElement.style,
                Touch: typeof CDP.global.ontouchstart !== "undefined",
                Mobile: typeof CDP.global.orientation !== "undefined",
                ltAd4_4: typeof CDP.global.orientation !== "undefined" && (typeof CDP.global.EventSource === "undefined" || 30 > majorVersion("chrome")),
                Pointer: CDP.global.navigator.pointerEnabled,
                MSPoniter: CDP.global.navigator.msPointerEnabled,
                Android: (ua.indexOf("android") !== -1),
                iOS: (ua.indexOf("iphone") !== -1 || ua.indexOf("ipad") !== -1 || ua.indexOf("ipod") !== -1),
            };
        })();
    })(Framework = CDP.Framework || (CDP.Framework = {}));
})(CDP || (CDP = {}));



/* tslint:disable:typedef */
var CDP;
(function (CDP) {
    var Framework;
    (function (Framework) {
        /**
         * vclick patch
         */
        var _vclickPatch = function () {
            var jquery_on = $.fn.on, jquery_off = $.fn.off;
            var custom_on = function (types, selector, data, fn, /*INTERNAL*/ one) {
                if (typeof types === "string") {
                    types = types.replace(/vclick/g, "click");
                }
                return _.bind(jquery_on, this)(types, selector, data, fn, one);
            };
            var custom_off = function (types, selector, fn) {
                if (typeof types === "string") {
                    types = types.replace(/vclick/g, "click");
                }
                return _.bind(jquery_off, this)(types, selector, fn);
            };
            // replace functions.
            $.fn.on = custom_on;
            $.fn.off = custom_off;
        };
        //___________________________________________________________________________________________________________________//
        /**
         * @class Patch
         * @brief patch class for jqm framework.
         *       [review] vclick のパッチを当てることがわかるとよい
         */
        var Patch = (function () {
            function Patch() {
            }
            ///////////////////////////////////////////////////////////////////////
            // public static methods
            /**
             * \~english
             * Apply patch.
             *
             * \~japanese
             * パッチの適用
             */
            Patch.apply = function () {
                if (!Patch.isSupportedVclick()) {
                    _vclickPatch();
                    Patch.s_vclickEvent = "click";
                }
            };
            /**
             * \~english
             * if "vclick" event is unsupported, returns false. ex: Android 4.4 (Kitkat)
             *
             * \~japanese
             * "vclick" event が非サポートである platform (KitKat) は false を返す。
             * jQM の version up により、解決される場合は無効かする。
             */
            Patch.isSupportedVclick = function () {
                // for Android 4.4+ (Kitkat ～)
                if (Framework.Platform.Android && !Framework.Platform.ltAd4_4) {
                    return false;
                }
                return true;
            };
            return Patch;
        }());
        Patch.s_vclickEvent = "vclick";
        Framework.Patch = Patch;
    })(Framework = CDP.Framework || (CDP.Framework = {}));
})(CDP || (CDP = {}));

var CDP;
(function (CDP) {
    var Framework;
    (function (Framework) {
        /**
         * @enum Orientation
         */
        var Orientation;
        (function (Orientation) {
            Orientation[Orientation["PORTRAIT"] = 0] = "PORTRAIT";
            Orientation[Orientation["LANDSCAPE"] = 1] = "LANDSCAPE";
        })(Orientation = Framework.Orientation || (Framework.Orientation = {}));
        /**
         * \~english
         * Get Orientation enum code
         *
         * @return {Number} Orientation Code.
         *
         * \~japanese
         * Orientation の取得
         *
         * @return {Number} Orientation Code.
         */
        function getOrientation() {
            var $window = $(window);
            return ($window.width() < $window.height()) ? Orientation.PORTRAIT : Orientation.LANDSCAPE;
        }
        Framework.getOrientation = getOrientation;
    })(Framework = CDP.Framework || (CDP.Framework = {}));
})(CDP || (CDP = {}));











/* tslint:disable:max-line-length no-string-literal */
var CDP;
(function (CDP) {
    var Framework;
    (function (Framework) {
        ///////////////////////////////////////////////////////////////////////
        // closure methods
        /**
         * \~english
         * Convert path to URL.
         * If the path starts from "/", the function translate the path as child folder of "web root".
         * Otherwise, it interprets as relative path from current page.
         * [Note] This behavior go along with jQM, NOT with require.toUrl().
         *
         * @param path {String} [in] path string
         *
         * \~japanese
         * path を URL に変換
         * "/" から始まるものは web root から、それ以外は現在のページから絶対パスURLに変換する。
         * jQM の挙動にあわせており、require.toUrl() と異なるので注意。
         *
         * @param path {String} [in] パスを指定。
         */
        function toUrl(path) {
            if (null != path[0] && "/" === path[0]) {
                return CDP.webRoot + path.slice(1);
            }
            else {
                return $.mobile.path.makeUrlAbsolute(path, getCurrentDocumentUrl());
            }
        }
        Framework.toUrl = toUrl;
        /**
         * \~english
         * Get current document url.
         *
         * @private
         *
         * \~japanese
         * 現在表示しているドキュメントの URL を取得
         *
         * @private
         */
        function getCurrentDocumentUrl() {
            var $activePage = $("body").pagecontainer("getActivePage");
            if (null == $activePage) {
                return $.mobile.path.documentBase.hrefNoHash;
            }
            var url = $.mobile.activePage.closest(".ui-page").jqmData("url"), base = $.mobile.path.documentBase.hrefNoHash;
            if (!url || !$.mobile.path.isPath(url)) {
                url = base;
            }
            return $.mobile.path.makeUrlAbsolute(url, base);
        }
        /**
         * \~english
         * Default "before route change" handler.
         *
         * @private
         *
         * \~japanese
         * 既定の "before route change" ハンドラ
         *
         * @private
         */
        var _beforeRouteChange = function () {
            return $.Deferred().resolve().promise();
        };
        // default "before route change" hanndler
        var _defaultBeforeRouteChange = _beforeRouteChange;
        /**
         * \~english
         * Setup "before route change" handler.
         *
         * @param  {Function} handler function.
         * @return {Function} old handler function.
         *
         * \~japanese
         * "before route change" ハンドラ設定
         *
         * @param  {Function} handler 指定.
         * @return {Function} 以前の handler.
         */
        function setBeforeRouteChangeHandler(handler) {
            if (null == handler) {
                return _beforeRouteChange;
            }
            else {
                var oldHandler = _beforeRouteChange;
                _beforeRouteChange = handler;
                return oldHandler;
            }
        }
        Framework.setBeforeRouteChangeHandler = setBeforeRouteChangeHandler;
        //___________________________________________________________________________________________________________________//
        /**
         * \~english
         * @class Router
         * @brief Router class for adjusting jQueryMobile functions and Backbone.Router functions.
         *        Even if Backbone.Router does not start routing, natigate() method works good with jQM framework.
         *
         * \~japanese
         * @class Router
         * @brief jQueryMobile と Backbone.Router を調停する Router クラス
         *        ルーティングを開始していない場合にも、navigate() は jQM フレームワークを使用して機能する。
         */
        var Router = (function () {
            function Router() {
            }
            ///////////////////////////////////////////////////////////////////////
            // public static methods
            /**
             * \~english
             * for initialize Router. this function is called in framework.
             *
             * @return {Boolean} true: succeeded / false: failed.
             *
             * \~japanese
             * 初期化
             * この関数はフレームワーク内部で使用される。
             *
             * @param  options {Object} [in] オプション
             * @return {Boolean} 成否
             */
            Router.initialize = function (options) {
                var $body = $("body");
                if (!!Router.s_router) {
                    console.warn("logic error. initialize call twice.");
                    return false;
                }
                Router.s_initOptions = $.extend({}, Router.s_defaultInitOptions, options);
                // Backbone.Router が、route を解決できなかった場合にも通知を捕捉するためのコールバックを設定
                Router.s_loadUrl = _.bind(Backbone.history.loadUrl, Backbone.history);
                Backbone.history.loadUrl = Router.customLoadUrl;
                Router.s_router = new Backbone.Router();
                Router.s_router.on("route", Router.onRouteSucceeded);
                // Backbone.Router を使用している場合、$.mobile.back() の挙動をブラウザの[戻る]に統一
                if (!$.mobile.hashListeningEnabled) {
                    Router.s_back = _.bind($.mobile.back, $.mobile);
                    $.mobile.back = Router.customJqmBack;
                }
                // changePage をサポート
                if (null == $.mobile.changePage) {
                    $.mobile.changePage = function (to, options) {
                        $body.pagecontainer("change", to, options);
                    };
                }
                Router.bindEvents();
                // Framework のイベントハンドラを更新
                Framework.setupEventHandlers();
                return true;
            };
            /**
             * \~english
             * Register to Router.
             *
             * @param route    {String}   [in] route string, it can be regular expression.
             * @param page     {String}   [in] page template path.
             * @param top      {Boolean}  [in] set "true" if application's top view. (optional)
             * @param callback {Function} [in] callback for custom page transition. If you don't want to trigger jQM.changePage(), return true by this callback. (optional)
             * @return {Router} Router instance.
             *
             * \~japanese
             * 登録
             *
             * @param route    {String}   [in] ルーティング文字列 / 正規表現
             * @param page     {String}   [in] page template path. イベント名にも使用される
             * @param top      {Boolean}  [in] Top ページの場合は true を指定 (任意)
             * @param callback {Function} [in] 遷移を自身で管理する場合に指定し、戻り値を true に設定すると changePage をコールしない (任意)
             * @return {Router} インスタンス。ただし method chain をしたい場合は、any cast が必要。
             */
            Router.register = function (route, page, top, callback) {
                if (top === void 0) { top = false; }
                // Backbone.Router への登録は history の停止が必要
                var restart = Router.stop();
                var name = route + page;
                var context = {
                    route: route,
                    regexp: Router.s_router._routeToRegExp(route),
                    page: page,
                    top: top,
                    callback: callback || function () { return false; }
                };
                if (Router.pushContext(name, context)) {
                    Router.s_router.route(route, name, function () { });
                }
                if (restart) {
                    // 再開時は再読み込みしない。
                    Router.start({ silent: true });
                }
                return Router;
            };
            /**
             * \~english
             * Start listening hash change.
             * It should be called after register().
             *
             * @param options {Object} [in] options object for Backbone.History.
             *
             * \~japanese
             * 履歴監視の開始
             * 登録完了後に呼び出す。
             *
             * @param options {Object} [in] Backbone.History にわたるオプション
             */
            Router.start = function (options) {
                if ($.mobile.hashListeningEnabled) {
                    console.log("setting error. confict: $.mobile.hashListeningEnabled = true, cannot start.");
                    return false;
                }
                return Backbone.history.start(options);
            };
            /**
             * \~english
             * Stop listening hash change.
             *
             * @return {Boolean} previous status.
             *
             * \~japanese
             * 履歴監視の終了
             *
             * @return {Boolean} 以前の開始状態を返却
             */
            Router.stop = function () {
                var prevState = Backbone.History.started;
                Backbone.history.stop();
                return prevState;
            };
            /**
             * \~english
             * Check routing status.
             *
             * @return {Boolean} true: routing / false: not routing
             *
             * \~japanese
             * ルーティングを開始しているか判定
             *
             * @return {Boolean} true: 有効 / false: 無効
             */
            Router.isRouting = function () {
                return Backbone.History.started;
            };
            /**
             * \~english
             * URL navigation.
             *
             * @param url        {String}          [in] set a navigate URL. (relative path / absolute path / fragment)
             * @param transition {String}          [in] set a transition string (optional)
             * @param reverse    {Boolean}         [in] set a direction string for transition. true:reverse / false:nomal (optional)
             * @param options    {NavigateOptions} [in] set a options object for Backbone.Router.navigate(). (optional)
             *
             * \~japanese
             * URL遷移
             *
             * @param url        {String}          [in] 遷移 URL を指定 (相対パス/絶対パス/フラグメント)
             * @param transition {String}          [in] transition に使用する effect を指定 (任意)
             * @param reverse    {Boolean}         [in] transition に使用する direction を指定 true:reverse/false:通常 (任意)
             * @param options    {NavigateOptions} [in] Backbone.Router.navigate() に渡されるオプション (任意)
             */
            Router.navigate = function (url, transition, reverse, options) {
                if (!!Router.s_lastNavigateInfo.inNavigation) {
                    // すでに Navigation 中であれば抑止
                    console.log("Router.navigate() called in navigation proc.");
                    return;
                }
                else if (Router.initFirstPageIfNeeded(url)) {
                    return;
                }
                var navOptions = $.extend({}, Router.s_defaultNavigateOptions, options);
                // ページ遷移開始通知. Sub Flow にてすでにコールされている場合は既定の何もしないコールバックを使用する.
                var notifyBeforeRouteChange = Router.s_lastNavigateInfo.calledBeforeRouteChange ? _defaultBeforeRouteChange : _beforeRouteChange;
                Router.s_lastNavigateInfo = {
                    url: url,
                    transition: transition,
                    reverse: reverse,
                    backDestination: navOptions.backDestination,
                    noHashChange: navOptions.noHashChange,
                    intent: navOptions.intent || {},
                    positiveNavigate: true,
                    calledBeforeRouteChange: true,
                    inNavigation: true,
                };
                // ページ遷移開始通知
                notifyBeforeRouteChange()
                    .fail(function () {
                    // beforeRouteChange() が失敗した場合、致命的な不具合となるため、error 記録のみにして先に進む。
                    console.error("before route change call, failed.");
                })
                    .always(function () {
                    if (Router.isRouting() && !Router.s_lastNavigateInfo.noHashChange) {
                        if (navOptions.subFlow) {
                            switch (navOptions.subFlow.operation) {
                                case "begin":
                                    Router.startSubFlow(navOptions.subFlow);
                                    break;
                                case "end":
                                    Router.finishSubFlow(navOptions);
                                    return; // navigation は呼ばない
                                default:
                                    console.warn("unknown subFlow.operation. operation: " + navOptions.subFlow.operation);
                                    break;
                            }
                        }
                        Router.s_router.navigate(url, navOptions);
                    }
                    else {
                        if (navOptions.subFlow) {
                            console.warn("subFlow only supported under routing and hash change condition.");
                        }
                        (function () {
                            var fragment = Backbone.history.getFragment(url);
                            var context;
                            if (Router.s_lastNavigateInfo.noHashChange) {
                                // noHashChange が指定されたとき
                                context = _.find(Router.s_rootContexts, function (context) {
                                    return context.regexp.test(fragment);
                                });
                            }
                            else {
                                // Backbone.Router が有効でないとき
                                context = _.findWhere(Router.s_rootContexts, { route: fragment });
                            }
                            if (context) {
                                url = context.page;
                            }
                        })();
                        Router.changePage(url);
                    }
                });
            };
            /**
             * \~english
             * Navigate from Top Page.
             * If SubFlow set up, the param is cleared.
             *
             * @param to         {String|PageStack|PageStack[]} [in] set a navigate URL or PageStackOptions object or array.
             * @param transition {String}                       [in] set a transition string (optional)
             * @param reverse    {Boolean}                      [in] set a direction string for transition. true:reverse / false:nomal (optional)
             * @param options    {NavigateOptions}              [in] set a options object for Backbone.Router.navigate(). (optional)
             *
             * \~japanese
             * トップページからの画面遷移
             * SubFlow が指定されていた場合はクリアされる
             *
             * @param to         {String|PageStack|PageStack[]} [in] 遷移 URL / PageStackOptions オブジェクト/配列
             * @param transition {String}                       [in] transition に使用する effect を指定 (任意)
             * @param reverse    {Boolean}                      [in] transition に使用する direction を指定 true:reverse/false:通常 (任意)
             * @param options    {NavigateOptions}              [in] Backbone.Router.navigate() に渡されるオプション (任意)
             */
            Router.navigateFromTop = function (to, transition, reverse, options) {
                var stack = Router.getJqmHistory().stack;
                var currentPage = stack[Router.getJqmHistory().activeIndex];
                var _transition = transition || currentPage.transition;
                var _reverse = (null != reverse) ? reverse : true;
                var destStacks = (function () {
                    if (!to) {
                        return null;
                    }
                    else if ("string" === typeof to) {
                        return [{ route: to }];
                    }
                    else if (to instanceof Array) {
                        return to;
                    }
                    else {
                        return [to];
                    }
                })();
                // 指定された SubFlow を削除
                stack.forEach(function (value) {
                    delete value[Router.SUBFLOW_PARAM];
                });
                // 初期ページに SubFlow パラメータを指定
                stack[0][Router.SUBFLOW_PARAM] = {
                    operation: "begin",
                    destBase: stack[0].hash,
                    destStacks: destStacks,
                    additionalDistance: 0,
                };
                Router.navigate(null, _transition, _reverse, $.extend({}, options, {
                    subFlow: {
                        operation: "end",
                    }
                }));
            };
            /**
             * \~english
             * Back to previous history.
             * It's same as browser back button's behaviour.
             * [Note] If set the jQM: data-rel="back", work as well.
             *
             * \~japanese
             * 履歴を戻る
             * ブラウザの戻るボタンと同じ挙動。
             * jQM: data-rel="back" を指定しても同じであることに注意。
             */
            Router.back = function () {
                if (!!Router.s_lastNavigateInfo.inNavigation) {
                    // すでに Navigation 中であれば抑止
                    console.log("Router.back() called in navigation proc.");
                    return;
                }
                else if (Router.isTopPage()) {
                    // Top ページに指定されていれば終了
                    var app = navigator.app || {};
                    if (!!app.exitApp) {
                        app.exitApp(); // note: never exit on iOS
                        return;
                    }
                }
                Router.s_lastNavigateInfo = {
                    inNavigation: true,
                    calledBeforeRouteChange: true,
                };
                // ページ遷移開始通知
                _beforeRouteChange()
                    .then(function () {
                    $.mobile.back();
                })
                    .fail(function () {
                    console.error("before route change call, failed.");
                    Router.s_lastNavigateInfo = {};
                });
            };
            /**
             * \~english
             * Store Intent object.
             *
             * \~japanese
             * Intent を格納
             */
            Router.pushIntent = function (intent) {
                Router.s_lastIntent = $.extend(true, Router.s_lastIntent, intent);
            };
            /**
             * \~english
             * Get Intent object.
             *
             * \~japanese
             * Intent を取得
             */
            Router.popIntent = function () {
                var intent = Router.s_lastIntent;
                Router.s_lastIntent = {};
                return intent;
            };
            /**
             * \~english
             * Get query parameters.
             *
             * \~japanese
             * query parameter に指定された引数の取得
             * ページ遷移中にのみアクセス可能 (pagebeforecreate ～ pagechange)
             */
            Router.getQueryParameters = function () {
                if (Router.s_lastNavigateInfo.intent && Router.s_lastNavigateInfo.intent.params) {
                    return Router.s_lastNavigateInfo.intent.params["queryParams"];
                }
                else {
                    return null;
                }
            };
            /**
             * \~english
             * Begin sub flow transaction.
             *
             * @param url        {String}          [in] set a navigate URL. (relative path / absolute path / fragment)
             * @param options    {NavigateOptions} [in] set a options object for Backbone.Router.navigate(). (optional)
             * @param transition {String}          [in] set a transition string (optional)
             * @param reverse    {Boolean}         [in] set a direction string for transition. true:reverse / false:nomal (optional)
             *
             * \~japanese
             * sub flow トランザクションの開始.
             * navigate() の 糖衣構文
             *
             * @param url        {String}          [in] 遷移 URL を指定 (相対パス/絶対パス/フラグメント)
             * @param options    {NavigateOptions} [in] Backbone.Router.navigate() に渡されるオプション (任意)
             * @param transition {String}          [in] transition に使用する effect を指定 (任意)
             * @param reverse    {Boolean}         [in] transition に使用する direction を指定 true:reverse/false:通常 (任意)
             */
            Router.beginSubFlow = function (url, options, transition, reverse) {
                var opt = $.extend({}, options);
                opt.subFlow = opt.subFlow || { operation: "begin" };
                if ("begin" !== opt.subFlow.operation) {
                    console.error("logic error. invalid subflow operation. [operation: " + opt.subFlow.operation + "]");
                    return;
                }
                Router.navigate(url, transition, reverse, opt);
            };
            /**
             * \~english
             * Commit sub flow transaction.
             *
             * @param transition {String}  [in] set a transition string (optional)
             * @param reverse    {Boolean} [in] set a direction string for transition. true:reverse / false:nomal (optional)
             *
             * \~japanese
             * sub flow トランザクションの終了.
             * navigate() の 糖衣構文
             *
             * @param transition {String}  [in] transition に使用する effect を指定 (任意)
             * @param reverse    {Boolean} [in] transition に使用する direction を指定 true:reverse/false:通常 (任意)
             */
            Router.commitSubFlow = function (transition, reverse) {
                Router.navigate(null, transition, reverse, {
                    subFlow: {
                        operation: "end",
                    }
                });
            };
            /**
             * \~english
             * Cancel sub flow transaction.
             *
             * @param transition {String}  [in] set a transition string (optional)
             * @param reverse    {Boolean} [in] set a direction string for transition. true:reverse[default] / false:nomal (optional)
             *
             * \~japanese
             * sub flow トランザクションのキャンセル.
             * navigate() の 糖衣構文
             *
             * @param transition {String}  [in] transition に使用する effect を指定 (任意)
             * @param reverse    {Boolean} [in] transition に使用する direction を指定 true:reverse[既定]/false:通常 (任意)
             */
            Router.cancelSubFlow = function (transition, reverse) {
                // 起点のページに戻る
                var baseInfo = Router.detectSubFlowBaseInfo();
                baseInfo.subFlowParam.additionalDistance = 0;
                Router.navigate(null, transition, (null != reverse) ? reverse : true, {
                    subFlow: {
                        operation: "end",
                        destStacks: null,
                    }
                });
            };
            /**
             * \~english
             * Check in sub flow.
             *
             * \~japanese
             * sub flow 内であるか判定
             */
            Router.isInSubFlow = function () {
                var stack = Router.getJqmHistory().stack;
                var has = _.some(stack, function (value) {
                    return !!value[Router.SUBFLOW_PARAM];
                });
                return has;
            };
            /**
             * \~english
             * Check from hash changed navigation.
             *
             * \~japanese
             * Hash 変更によって Navigate が起こったか判定
             * "pagechange" が発生するまでに判定可能
             */
            Router.fromHashChanged = function () {
                // positiveNavigate = false は含めない
                return Router.s_lastNavigateInfo.inNavigation && (null == Router.s_lastNavigateInfo.positiveNavigate);
            };
            Router.registerPageStack = function (pageStack, withNavigate, options) {
                var newStacks = [];
                var failed = false;
                pageStack = (pageStack instanceof Array) ? pageStack : [pageStack];
                withNavigate = (null == withNavigate) ? false : withNavigate;
                (function () {
                    var makeStack = function (info) {
                        var url;
                        var stack;
                        var fragment = Backbone.history.getFragment(info.route);
                        var context = _.find(Router.s_rootContexts, function (context) {
                            return context.regexp.test(fragment);
                        });
                        if (!context) {
                            console.warn("route is not registered. route: " + info.route);
                            return null;
                        }
                        else {
                            url = Router.pathToJqmDataUrl(context.page);
                        }
                        stack = {
                            route: info.route,
                            pageUrl: url,
                            title: info.title,
                            transition: info.transition,
                            url: url,
                        };
                        return stack;
                    };
                    for (var i = 0, n = pageStack.length; i < n; i++) {
                        var stack = makeStack(pageStack[i]);
                        if (!stack) {
                            failed = true;
                            break;
                        }
                        else {
                            newStacks.push(stack);
                        }
                    }
                })();
                if (failed) {
                    return false;
                }
                (function () {
                    // Router の停止
                    var restart = Router.stop();
                    var silentLength = newStacks.length - 1;
                    var finalIndex = newStacks.length - 1;
                    Router.getJqmHistory().clearForward();
                    for (var i = 0, n = silentLength; i < n; i++) {
                        location.hash = newStacks[i].route;
                        Router.getJqmHistory().stack.push(newStacks[i]);
                        Router.getJqmHistory().activeIndex = Router.getJqmHistory().stack.length - 1;
                    }
                    // final stack with navigate
                    if (withNavigate) {
                        var transition = (function () {
                            if (null != Router.s_lastNavigateInfo.transition) {
                                return Router.s_lastNavigateInfo.transition;
                            }
                            else {
                                return newStacks[finalIndex].transition;
                            }
                        })();
                        var reverse = (function () {
                            if (null != Router.s_lastNavigateInfo.reverse) {
                                return Router.s_lastNavigateInfo.reverse;
                            }
                            else {
                                return false;
                            }
                        })();
                        restart = false;
                        Router.start({ silent: true });
                        Router.navigate(newStacks[finalIndex].route, transition, reverse, options);
                    }
                    else {
                        location.hash = newStacks[finalIndex].route;
                        Router.getJqmHistory().stack.push(newStacks[finalIndex]);
                        Router.getJqmHistory().activeIndex = Router.getJqmHistory().stack.length - 1;
                    }
                    // Router の再開
                    if (restart) {
                        Router.start({ silent: true });
                    }
                })();
                return true;
            };
            /**
             * \~english
             * Get jQM's history object
             *
             * \~japanese
             * jQM の History オブジェクトの取得
             *
             */
            Router.getJqmHistory = function () {
                return $.mobile.navigate.history;
            };
            ///////////////////////////////////////////////////////////////////////
            // private static methods
            /**
             * \~english
             * Override: Backbone.History.loadUrl().
             *
             * @private
             *
             * \~japanese
             * Backbone.History.loadUrl() のオーバーライド
             *
             * @private
             */
            Router.customLoadUrl = function (fragment) {
                var handled = Router.s_loadUrl(fragment);
                if (!handled) {
                    Router.onRouteFailed(fragment);
                }
                return handled;
            };
            /**
             * \~english
             * Override: $.mobile.back().
             *
             * fail safe processing.
             *  If using Backbone's Router,
             *  this class unuses history object of jQuery Mobile 1.4,
             *  and standardize as browser back button's behaviour. (jQM 1.3 comparable)
             *
             * @private
             *
             * \~japanese
             * $.mobile.back() のオーバーライド
             *
             * [TBD] fail safe 処理
             *  Backbone の Router を使用している場合、
             *  jQuery Mobile 1.4 以降の内部の History 管理は使用せずに
             *  1.3 相当のブラウザの[戻る]の挙動に統一する。
             *
             * @private
             */
            Router.customJqmBack = function () {
                if (Router.isRouting()) {
                    history.back();
                }
                else {
                    // jQM 既定処理
                    Router.s_back();
                }
            };
            /**
             * \~english
             * Bind events.
             *
             * @private
             *
             * \~japanese
             * イベントバインド
             *
             * @private
             */
            Router.bindEvents = function () {
                $(document)
                    .one("pagechange", function () {
                    if (Router.s_initOptions.anchorVclick) {
                        // anchor vclick
                        $(document).on("vclick", "[href]", function (event) {
                            Router.onAnchorVclicked(event);
                        });
                    }
                })
                    .on("pagebeforeshow", function (event) {
                    // "data-back-dst" を page に設定
                    if (null != Router.s_lastNavigateInfo.backDestination) {
                        var active = Router.getJqmHistory().getActive();
                        active[Router.BACK_DESTINATION_URL] = Router.s_lastNavigateInfo.backDestination;
                    }
                })
                    .on("pageshow", function (event) {
                    var active = Router.getJqmHistory().getActive();
                    if (active[Router.SUBFLOW_PARAM]) {
                        delete active[Router.SUBFLOW_PARAM];
                    }
                })
                    .on("pagechange pagecontainerloadfailed", function (event) {
                    Router.s_lastNavigateInfo = {};
                });
                // back key assign
                CDP.setBackButtonHandler(Router.back);
            };
            /**
             * \~english
             * Store the RootContext.
             *
             * @private
             * @param name    {String}       [in] name of route
             * @param context {RouteContext} [in] context object
             * @return true: succeeded / false: already registered
             *
             * \~japanese
             * RootContext の格納
             *
             * @private
             * @param name    {String}       [in] route 名
             * @param context {RouteContext} [in] context オブジェクト
             * @return true: 登録成功 / false: すでに登録されている
             */
            Router.pushContext = function (name, context) {
                if (!!Router.s_rootContexts[name]) {
                    console.log("logic error. route is already registered. name: " + name);
                    return false;
                }
                Router.s_rootContexts[name] = context;
                return true;
            };
            /**
             * \~english
             * Check if $.mobile.initializePage() is called or not, and call it if needed.
             *
             * @private
             * @param url {String}  [in] set a navigate URL. (relative path / absolute path / fragment)
             *
             * \~japanese
             * $.mobile.initializePage() が呼ばれているか確認し、必要なら初期化する。
             *
             * @private
             * @param url {String} [in] 遷移 URL を指定 (相対パス/絶対パス/フラグメント)
             */
            Router.initFirstPageIfNeeded = function (url) {
                if (!$.mobile.autoInitializePage) {
                    $(document).one("pagebeforechange", function (event, data) {
                        data.toPage = Framework.toUrl(url);
                    });
                    $.mobile.initializePage();
                    $.mobile.autoInitializePage = true;
                    return true;
                }
                return false;
            };
            /**
             * \~english
             * Check for current page is top.
             *
             * @private
             * @return true: top page / false: not top page
             *
             * \~japanese
             * 現在のページが top に指定されているか判定
             *
             * @private
             * @return true: top 指定 / false: top ではない
             */
            Router.isTopPage = function () {
                var fragment = Backbone.history.getFragment($.mobile.path.parseUrl(location.href).hash);
                var context = _.find(Router.s_rootContexts, function (context) {
                    return context.regexp.test(fragment);
                });
                return (null == context) ? false : context.top;
            };
            /**
             * \~english
             * Called when anchor received "vclick" event.
             *
             * @private
             * @return true: need default processing / false: need custom processing
             *
             * \~japanese
             * anchor が vclick されたときにコールされる
             *
             * @private
             * @return true: default 処理 / false: カスタム処理
             */
            Router.onAnchorVclicked = function (event) {
                if (Router.isJustBeforeVclicked()) {
                    event.preventDefault();
                    return false;
                }
                return Router.followAnchor(event);
            };
            /**
             * \~english
             * Anchor processing.
             *
             * @private
             *
             * \~japanese
             * anchor 処理
             *
             * @private
             */
            Router.followAnchor = function (event) {
                var $target = $(event.currentTarget);
                var url = $target.jqmData("href") || $target.attr("href");
                var transition = $target.jqmData("transition");
                var direction = $target.jqmData("direction");
                var backDst = $target.attr(Router.DATA_BACK_DESTINATION);
                var noHashChange = $target.attr(Router.DATA_NO_HASH_CHANGE) ?
                    $target.attr(Router.DATA_NO_HASH_CHANGE) === "true" : false;
                var noHrefHandle = $target.attr(Router.DATA_NO_VCLICK_HANDLE) ?
                    $target.attr(Router.DATA_NO_VCLICK_HANDLE) === "true" : false;
                /*
                 * - 明示的にハンドルしない指定がある場合
                 * - jQM のフラグメントの場合
                 * 既定の処理を行う
                 */
                if (noHrefHandle || Router.needDefaultOperation(url)) {
                    return true;
                }
                // custom behavier
                event.preventDefault();
                if (Router.isBackButtonClicked(event)) {
                    Router.back();
                }
                else {
                    Router.navigate(url, transition, !!direction, { noHashChange: noHashChange, backDestination: backDst });
                }
                return false;
            };
            /**
             * \~english
             * Check default processing needed.
             *
             * @private
             * @param  url {String} [in] url string
             * @return true: need default processing / false: need not
             *
             * \~japanese
             * 既定の処理を行わせるか判定
             *
             * @private
             * @param  url {String} [in] url 文字列
             * @return true: 既定の処理が必要 / false: 不要
             */
            Router.needDefaultOperation = function (url) {
                if (!url || ("#" === url)) {
                    return true;
                }
                else if ("#" === url[0]) {
                    return !Router.canResolveRoute(url);
                }
                else {
                    return false;
                }
            };
            /**
             * \~english
             * Check status of Backbone.Router if they can resolve route.
             *
             * @private
             * @param  url {String} [in] url 文字列
             * @return true: can resolve / false: can not
             *
             * \~japanese
             * Backbone.Router が route を解決可能か判定
             *
             * @private
             * @param  url {String} [in] url 文字列
             * @return true: 解決可能 / false: 解決不可
             */
            Router.canResolveRoute = function (url) {
                var fragment = Backbone.history.getFragment(url);
                return _.any(Backbone.history.handlers, function (handler) {
                    if (handler.route.test(fragment)) {
                        return true;
                    }
                });
            };
            /**
             * \~english
             * Check "vclick" fired at the last minute.
             *
             * @private
             *
             * \~japanese
             * 直前に vclick が呼ばれたか判定
             *
             * @private
             */
            Router.isJustBeforeVclicked = function () {
                var isBefore = (Date.now() - Router.s_lastClickedTime) < Router.DELAY_TIME * 2;
                Router.s_lastClickedTime = Date.now();
                return isBefore;
            };
            /**
             * \~english
             * Check back button clicked.
             *
             * @private
             *
             * \~japanese
             * Back Button がクリックされたか判定
             *
             * @private
             */
            Router.isBackButtonClicked = function (event) {
                if ($(event.currentTarget).jqmData("rel") === "back") {
                    return true;
                }
                else {
                    return false;
                }
            };
            /**
             * \~english
             * It called on succeed routing triggered by changing hash.
             *
             * @private
             * @param name {String} [in] name of route
             * @param args {Array}  [in] array of paramter
             *
             * \~japanese
             * ハッシュ値が変更され、ルーティングが成功したときにコールされる
             *
             * @private
             * @param name {String} [in] route 名。page の値が渡る。
             * @param args {Array}  [in] パラメータ配列。
             */
            Router.onRouteSucceeded = function (name) {
                var args = [];
                for (var _i = 1; _i < arguments.length; _i++) {
                    args[_i - 1] = arguments[_i];
                }
                var context = Router.s_rootContexts[name];
                if (!!context) {
                    var intent = { params: { queryParams: args } };
                    Router.s_lastNavigateInfo.inNavigation = true;
                    if (null != Router.s_lastNavigateInfo.intent) {
                        intent.params = $.extend({}, intent.params, Router.s_lastNavigateInfo.intent.params || {});
                    }
                    Router.s_lastNavigateInfo.intent = $.extend({}, Router.s_lastNavigateInfo.intent, intent);
                    var handled = context.callback(args);
                    if (!handled) {
                        Router.changePage(context.page);
                    }
                }
            };
            /**
             * \~english
             * It called on failed routing triggered by changing hash.
             *
             * @private
             * @param name {String} [in] name of route
             * @param args {Array}  [in] array of paramter
             *
             * \~japanese
             * ハッシュ値が変更され、ルーティングが失敗したときにコールされる
             *
             * @private
             * @param name {String} [in] route 名。page の値が渡る。
             * @param args {Array}  [in] パラメータ配列。
             */
            Router.onRouteFailed = function (fragment) {
                Router.s_lastNavigateInfo.inNavigation = true;
                if (null == fragment) {
                    fragment = Backbone.history.getFragment();
                }
                // route が解決できなかったものを管理下に
                if (Router.s_lastNavigateInfo.positiveNavigate) {
                    var context = Router.s_rootContexts[fragment];
                    if (null == context) {
                        context = {
                            route: fragment,
                            regexp: Router.s_router._routeToRegExp(fragment),
                            page: Router.s_lastNavigateInfo.url,
                            top: false,
                            callback: null,
                        };
                        Router.pushContext(fragment, context);
                    }
                }
                // fragment から path を解決
                var path = fragment;
                if (null != Router.s_rootContexts[fragment]) {
                    path = Router.s_rootContexts[fragment].page;
                }
                Router.changePage(path);
            };
            /**
             * \~english
             * This function just calls jQuery Mobile's navigation method.
             *
             * @private
             * @param path {String} [in] to page path
             *
             * \~japanese
             * jQuery Mobile によるページ遷移指定
             *
             * @private
             * @param path {String} [in] 遷移先パスを指定
             */
            Router.changePage = function (path) {
                var notifyBeforeRouteChange;
                // data-rel="back", ブラウザボタン, H/W Back Key が押下されたとき
                if (!Router.s_lastNavigateInfo.positiveNavigate) {
                    if (Router.s_lastNavigateInfo.inAdditionalBack) {
                        Router.s_lastNavigateInfo.inAdditionalBack = false;
                    }
                    else {
                        Router.decideDirection(path);
                        // 指定先に戻るか判定
                        var additional = Router.detectAdditionalBackDistance();
                        if (0 < additional) {
                            // 2回目以降の hash change には反応させない.
                            Router.s_lastNavigateInfo.inAdditionalBack = true;
                            Router.getJqmHistory().activeIndex -= additional;
                            history.go(-additional);
                            return;
                        }
                    }
                    // 遷移先が subflow 開始点である場合、param を削除
                    var subFlowInfo = Router.detectSubFlowBaseInfo();
                    if (subFlowInfo.isCurrent) {
                        delete subFlowInfo.stack[Router.SUBFLOW_PARAM];
                    }
                }
                else {
                    // 能動的遷移の場合 previousIndex を更新
                    Router.getJqmHistory().previousIndex = Router.getJqmHistory().activeIndex;
                }
                // ページ遷移開始通知. すでにコールされている場合は既定の何もしないコールバックを使用する.
                notifyBeforeRouteChange = Router.s_lastNavigateInfo.calledBeforeRouteChange ? _defaultBeforeRouteChange : _beforeRouteChange;
                notifyBeforeRouteChange()
                    .then(function () {
                    // 付加情報
                    if (Router.s_lastNavigateInfo.intent) {
                        Router.pushIntent(Router.s_lastNavigateInfo.intent);
                    }
                    Router.treatUrlHistory();
                    $.mobile.changePage(Framework.toUrl(path), {
                        showLoadMsg: false,
                        allowSamePageTransition: true,
                        transition: Router.s_lastNavigateInfo.transition || "none",
                        reverse: Router.s_lastNavigateInfo.reverse,
                        fromHashChange: !Router.s_lastNavigateInfo.positiveNavigate,
                        changeHash: !Router.s_lastNavigateInfo.noHashChange,
                    });
                })
                    .fail(function () {
                    console.error("before route change call, failed.");
                    Router.s_lastNavigateInfo = {};
                });
            };
            /**
             * \~english
             * Decide direction parameter.
             * It's as same as jQM internal implement. (imperfection)
             *
             * @private
             * @param path {String} [in] to page path
             *
             * \~japanese
             * direction の判定
             * jQM の内部実装と等価 (不完全)
             *
             * @private
             * @param path {String} [in] 遷移先パスを指定
             */
            Router.decideDirection = function (path) {
                var url = $.mobile.path.convertUrlToDataUrl(Framework.toUrl(path));
                if (null == Router.s_lastNavigateInfo.transition) {
                    Router.s_lastNavigateInfo.transition = Router.getJqmHistory().getActive().transition;
                }
                Router.getJqmHistory().direct({
                    url: url,
                    present: function (newPage, direction) {
                        switch (direction) {
                            case "back":
                                if (null == Router.s_lastNavigateInfo.reverse) {
                                    Router.s_lastNavigateInfo.reverse = true;
                                }
                                break;
                            case "forward":
                                if (null == Router.s_lastNavigateInfo.transition) {
                                    Router.s_lastNavigateInfo.transition = newPage.transition;
                                }
                                break;
                            default:
                                console.log("unknown direction: " + direction);
                                break;
                        }
                    },
                    missing: function () {
                        // 初期ページ URL は判定できない。正常系。
                        if (1 === Router.getJqmHistory().activeIndex) {
                            Router.getJqmHistory().previousIndex = 1;
                            Router.getJqmHistory().activeIndex = 0;
                            if (null == Router.s_lastNavigateInfo.reverse) {
                                Router.s_lastNavigateInfo.reverse = true;
                            }
                        }
                        else if (0 !== Router.getJqmHistory().activeIndex) {
                            console.log("unknown direction.");
                        }
                    }
                });
            };
            /**
             * \~english
             * Return additional back distance count when back destination set.
             * (const function)
             *
             * @private
             * @return {Number} count of additiona back distance.
             *
             * \~japanese
             * 戻り先が指定されているとき、追加の Back 数を返します。
             * (この関数は Router の状態を変更しません。)
             *
             * @private
             * @return {String} 追加で Back に必要な距離.
             */
            Router.detectAdditionalBackDistance = function () {
                var stack = Router.getJqmHistory().stack;
                var historyActiveIndex = Router.getJqmHistory().activeIndex; // decideDirection() の Router.getJqmHistory().direct() によって、history の activeIndex はすでに変わっている
                var previousIndex = Router.getJqmHistory().previousIndex; // [戻る]が押下された場合に値が入る
                var i, backDst, distance, fragment, context, jqmDataUrl;
                // check "operation". [戻る]および clearForward() されていない状況をチェック
                if (!Router.s_lastNavigateInfo.reverse || null == previousIndex || !stack[previousIndex]) {
                    return 0;
                }
                // "backDst exists". [戻り先]が指定されているかチェック
                backDst = stack[previousIndex][Router.BACK_DESTINATION_URL];
                if ((null == backDst)) {
                    return 0;
                }
                fragment = Backbone.history.getFragment(backDst);
                // 初期ページ
                if ("" === fragment) {
                    return historyActiveIndex;
                }
                // rootContext から path を逆引き
                context = _.find(Router.s_rootContexts, function (context) {
                    return context.regexp.test(fragment);
                });
                if (null == context) {
                    console.warn("back destination is not registered. back-dst: " + backDst);
                    return 0;
                }
                // dataUrl を元に jQM History を検索
                jqmDataUrl = Router.pathToJqmDataUrl(context.page);
                for (i = historyActiveIndex, distance = 0; 0 <= i; i--, distance++) {
                    if (jqmDataUrl === stack[i].pageUrl) {
                        break;
                    }
                }
                if (i < 0) {
                    console.warn("back destination does not exist in history. back-dst: " + backDst);
                    return 0;
                }
                return distance;
            };
            /**
             * \~english
             * Start sub flow
             * Attach SubFlowParam to jqm history stack object.
             *
             * @param subFlowParam {SubFlowParam} [in] Sub Flow parameter
             *
             * \~japanese
             * Sub Flow の開始
             * SubFlowParam を jqm history stack にアタッチ
             *
             * @param subFlowParam {SubFlowParam} [in] Sub Flow パラメータ
             */
            Router.startSubFlow = function (subFlowParam) {
                var active = Router.getJqmHistory().getActive();
                var param = subFlowParam;
                if (subFlowParam.destBase) {
                    (function () {
                        var distance = 0;
                        var fragment = Backbone.history.getFragment(subFlowParam.destBase);
                        var context = _.find(Router.s_rootContexts, function (context) {
                            return context.regexp.test(fragment);
                        });
                        if (null == context) {
                            console.warn("base destination is not registered. destBase: " + subFlowParam.destBase);
                            return;
                        }
                        // dataUrl を元に jQM History を検索
                        var jqmDataUrl = Router.pathToJqmDataUrl(context.page);
                        var stack = Router.getJqmHistory().stack;
                        for (var i = Router.getJqmHistory().activeIndex; 0 <= i; i--, distance++) {
                            if (jqmDataUrl === stack[i].pageUrl) {
                                param.additionalDistance = distance;
                                break;
                            }
                        }
                    })();
                }
                else {
                    param.destBase = location.hash;
                    param.additionalDistance = 0;
                }
                active[Router.SUBFLOW_PARAM] = param;
            };
            /**
             * \~english
             * End sub flow
             * navigate and delete SubFlowParam from jqm history stack object.
             *
             * @param navOptions {NavigateOptions} [in] Sub Flow parameter
             *
             * \~japanese
             * Sub Flow の終了
             * 遷移と SubFlowParam を jqm history stack から削除
             *
             * @param navOptions {NavigateOptions} [in] Sub Flow パラメータ
             */
            Router.finishSubFlow = function (options) {
                var navOptions = $.extend(true, {}, options);
                var baseInfo = Router.detectSubFlowBaseInfo();
                // "end" 時に更新されたものを上書き
                var param = $.extend({}, baseInfo.subFlowParam, navOptions.subFlow);
                var distance = baseInfo.distance;
                var stack = baseInfo.stack;
                var retry = 0;
                var NAVIGATE_INTERVAL = 100;
                var MAX_RETRY_COUNT = 10;
                // hash 変更が完了した後に navigate を実行
                var _navigate = function () {
                    if (MAX_RETRY_COUNT <= retry) {
                        console.error("reached navigate max retry count.");
                        Router.s_lastNavigateInfo = {};
                    }
                    else if (param.destBase !== location.hash) {
                        retry++;
                        setTimeout(_navigate, NAVIGATE_INTERVAL);
                    }
                    else {
                        Router.s_lastNavigateInfo.inNavigation = false;
                        Router.registerPageStack(param.destStacks, true, navOptions);
                    }
                };
                if (stack) {
                    delete stack[Router.SUBFLOW_PARAM];
                    Router.getJqmHistory().activeIndex -= distance;
                    Router.getJqmHistory().clearForward();
                    if (param.destStacks) {
                        Router.stop();
                        // iOS 環境において index.html より history.go(0) が発生するとリロードが発生する.
                        // その後画面遷移を控えるため, 履歴を戻る必要があるときにのみ限定する.
                        if (0 !== distance) {
                            history.go(-distance);
                        }
                        delete navOptions.subFlow; // subFlow プロパティの破棄
                        setTimeout(_navigate, 0);
                    }
                    else {
                        Router.s_lastNavigateInfo.positiveNavigate = false;
                        history.go(-distance);
                    }
                }
                else {
                    console.warn("subFlow begin status does not exist in history.");
                    Router.s_lastNavigateInfo = {};
                }
            };
            /**
             * \~english
             * Return destination Sub Flow information.
             * (const function)
             *
             * @private
             * @return {Object} sub flow info.
             *
             * \~japanese
             * Sub Flow 情報を返却
             * (この関数は Router の状態を変更しません。)
             *
             * @private
             * @return {Object} Sub Flow 情報.
             */
            Router.detectSubFlowBaseInfo = function () {
                var stack = Router.getJqmHistory().stack;
                var historyActiveIndex = Router.getJqmHistory().activeIndex;
                var i, distance;
                var param = {};
                var target;
                for (i = historyActiveIndex, distance = 0; 0 <= i; i--, distance++) {
                    if (stack[i][Router.SUBFLOW_PARAM]) {
                        target = stack[i];
                        param = stack[i][Router.SUBFLOW_PARAM];
                        break;
                    }
                }
                if (null == param.additionalDistance) {
                    param.additionalDistance = 0;
                }
                return {
                    stack: target,
                    subFlowParam: param,
                    distance: distance + param.additionalDistance,
                    isCurrent: (function () {
                        if (target && 0 === distance) {
                            return true;
                        }
                        else {
                            return false;
                        }
                    })(),
                };
            };
            /**
             * \~english
             * Convert path to jQM dataUrl.
             *
             * @private
             * @return {String} jQM data url.
             *
             * \~japanese
             * パスを jQM dataUrl に変換
             *
             * @private
             * @return {String} jQM data url.
             */
            Router.pathToJqmDataUrl = function (path) {
                var url = Framework.toUrl(path);
                var dataUrl = $.mobile.path.convertUrlToDataUrl(url);
                return dataUrl;
            };
            /**
             * \~english
             * Update jQM urlHistory by window.history object.
             * To be natural browsing history behavior, application needs to update jQM urlHistory
             * when clicking back or next button of browser. (imperfection for decideDirection())
             *
             * @private
             *
             * \~japanese
             * ブラウザの履歴に基づき jQM urlHistory を更新
             * [戻る]/[進む]が押下された後、ページ遷移されるとき、jQM urlHistory を更新する。(decideDirection() により不完全)
             *
             * @private
             */
            Router.treatUrlHistory = function () {
                if (Router.s_lastNavigateInfo.positiveNavigate || history.length < Router.getJqmHistory().stack.length) {
                    Router.getJqmHistory().clearForward();
                }
            };
            return Router;
        }());
        Router.s_initOptions = {};
        Router.s_router = null;
        Router.s_rootContexts = {};
        Router.s_lastNavigateInfo = {};
        Router.s_lastClickedTime = null;
        Router.s_lastIntent = {};
        Router.s_loadUrl = null;
        Router.s_back = null;
        Router.DELAY_TIME = 200; // TBD: 暫定値
        Router.DATA_BACK_DESTINATION = "data-back-dst";
        Router.DATA_NO_HASH_CHANGE = "data-no-hash-change";
        Router.DATA_NO_VCLICK_HANDLE = "data-no-vclick-handle";
        Router.BACK_DESTINATION_URL = "backDstUrl";
        Router.SUBFLOW_PARAM = "subFlowParam";
        Router.s_defaultInitOptions = {
            anchorVclick: true,
        };
        Router.s_defaultNavigateOptions = {
            trigger: true,
            replace: false,
            intent: null,
        };
        Framework.Router = Router;
    })(Framework = CDP.Framework || (CDP.Framework = {}));
})(CDP || (CDP = {}));









/* tslint:disable:max-line-length forin no-bitwise */
var CDP;
(function (CDP) {
    /**
     * \~english
     * The function returned JQueryPromise waits until PhoneGap is ready.
     * [Note] emulate when PC enviroment.
     *
     * \~japanese
     * PhoneGap が有効になるまで待機
     * PC 環境ではエミュレートされる。
     */
    function waitForDeviceReady() {
        var df = $.Deferred();
        if (!CDP.Framework.Platform.Mobile) {
            setTimeout(function () {
                df.resolve();
            }, 100);
        }
        else {
            if (null == CDP.global.cordova || null == CDP.global.cordova.exec) {
                $(document).one("deviceready", function () {
                    df.resolve();
                });
            }
            else {
                df.resolve();
            }
        }
        return df.promise();
    }
    CDP.waitForDeviceReady = waitForDeviceReady;
    var _defaultBackButtonHandler = null;
    /**
     * \~english
     * Setup H/W Back key handler.
     *
     * @param  {Function} handler function.
     * @return {Function} old handler function.
     *
     * \~japanese
     *
     * @param  {Function} handler 指定.
     * @return {Function} 以前の handler.
     */
    function setBackButtonHandler(handler) {
        var oldHandler = _defaultBackButtonHandler;
        _defaultBackButtonHandler = handler;
        return oldHandler;
    }
    CDP.setBackButtonHandler = setBackButtonHandler;
    // back key handler implement.
    (function () {
        waitForDeviceReady().done(function () {
            $(document).on("backbutton", function (event) {
                if (_defaultBackButtonHandler) {
                    _defaultBackButtonHandler(event);
                }
            });
        });
    })();
    //___________________________________________________________________________________________________________________//
    var Framework;
    (function (Framework) {
        var TAG = "[CDP.Framework] ";
        var _dfInitialize = $.Deferred();
        var _activePage = null;
        var _orientationListenerHolder = {};
        var _lastOrientation = null;
        /**
         * \~english
         * Initialization function of Framework.
         *
         * \~japanese
         * Framework の初期化関数
         *
         * @param options {FrameworkOptions} [in] options object.
         */
        function initialize(options) {
            if ("pending" !== _dfInitialize.state()) {
                return _dfInitialize.promise();
            }
            var config = getConfig(options);
            // CDP 環境の初期化
            // 現状は、console オブジェクトの保証と jQuery の WinRT 対応。
            CDP.initialize({
                success: function () {
                    // Framework 用の Patch 適用
                    if (config.applyPatch) {
                        Framework.Patch.apply();
                    }
                    // jQuery の共通設定
                    config.jquery();
                    // jQuery Mobile の初期化
                    $(document).on("mobileinit", function () {
                        // config の反映
                        config.jquerymobile();
                        // cdp.i18n の初期化
                        CDP.initializeI18N(config.i18n)
                            .always(function (info) {
                            // i18next の初期化時のエラーは無視する. info が array の場合、エラー情報が格納されている.
                            $(document)
                                .one("pagebeforechange", function (event, data) {
                                data.options.showLoadMsg = false;
                            })
                                .on("pagebeforecreate", function (event) {
                                // i18nextライブラリによるhtml fragmentの翻訳処理
                                $(event.target).localize();
                            });
                            // Router の初期化
                            if (Framework.Router.initialize({ anchorVclick: config.anchorVclick, })) {
                                _dfInitialize.resolve();
                            }
                            else {
                                console.error(TAG + "error. CDP.Framework.Router.initialize() failed.");
                                _dfInitialize.reject();
                                _dfInitialize = $.Deferred();
                            }
                        });
                    });
                    {
                        // jquery 3+
                        var jqueryMajor = ~~$.fn.jquery.split(".")[0];
                        if (3 <= jqueryMajor) {
                            if (4 <= jqueryMajor) {
                                console.warn(TAG + "jquery-migrate for 3.0.0+ in use.");
                            }
                            Promise.resolve().then(function() { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(1)]; (function () {
                                Promise.resolve().then(function() {[__webpack_require__(0)];}).catch(__webpack_require__.oe);
                            }.apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__));}).catch(__webpack_require__.oe);
                        }
                        else {
                            Promise.resolve().then(function() {[__webpack_require__(0)];}).catch(__webpack_require__.oe);
                        }
                    }
                },
                fail: function (error) {
                    console.error(TAG + "error. CDP.initialize() failed.");
                    _dfInitialize.reject();
                    _dfInitialize = $.Deferred();
                },
            });
            return _dfInitialize.promise();
        }
        Framework.initialize = initialize;
        /**
         * \~english
         * Check for initialization status.
         *
         * @return {Boolean} true: initialized / false: uninitialized
         *
         * \~japanese
         * 初期化済みか判定
         *
         * @return {Boolean} true: 初期化済み / false: 未初期化
         */
        function isInitialized() {
            return "resolved" === _dfInitialize.state();
        }
        Framework.isInitialized = isInitialized;
        /**
         * \~english
         * Wait for initialization status.
         *
         * @return {JQueryPromise}
         *
         * \~japanese
         * 初期化待ち
         *
         * @return {JQueryPromise}
         */
        function waitForInitialize() {
            return _dfInitialize.promise();
        }
        Framework.waitForInitialize = waitForInitialize;
        /**
         * \~english
         * Register IOrientationChangedListener to framework.
         *
         * @param key      {String}                      [in] ID key
         * @param listener {IOrientationChangedListener} [in] IOrientationChangedListener instance
         *
         * \~japanese
         * IOrientationChangedListener を Framework に登録
         *
         * @param key      {String}                      [in] ID key
         * @param listener {IOrientationChangedListener} [in] IOrientationChangedListener instance
         */
        function registerOrientationChangedListener(key, listener) {
            _orientationListenerHolder[key] = listener;
        }
        Framework.registerOrientationChangedListener = registerOrientationChangedListener;
        /**
         * \~english
         * Unregister IOrientationChangedListener from framework.
         *
         * @param key {String} [in] ID key
         *
         * \~japanese
         * IOrientationChangedListener を Framework から登録解除
         *
         * @param key {String} [in] ID key
         */
        function unregisterOrientationChangedListener(key) {
            delete _orientationListenerHolder[key];
        }
        Framework.unregisterOrientationChangedListener = unregisterOrientationChangedListener;
        /**
         * \~english
         * Setup event handlers when after router initialized.
         *
         * @private
         *
         * \~japanese
         * イベントハンドラの設定. Router 初期化後に Framework がコールする.
         *
         * @private
         */
        function setupEventHandlers() {
            (function () {
                var oldBackButtonHandler = CDP.setBackButtonHandler(null);
                var baseBackButtonHandler = function (event) {
                    if (_activePage && _activePage.onHardwareBackButton(event)) {
                        // クライアント側でハンドリング済みと指定された場合、既定の処理を行わない
                        return;
                    }
                    else {
                        oldBackButtonHandler(event);
                    }
                };
                CDP.setBackButtonHandler(baseBackButtonHandler);
            })();
            (function () {
                var oldRouteChangeHandler = CDP.Framework.setBeforeRouteChangeHandler(null);
                var baseRouteChangeHandler = function () {
                    if (_activePage) {
                        return _activePage.onBeforeRouteChange();
                    }
                    else {
                        return oldRouteChangeHandler();
                    }
                };
                CDP.Framework.setBeforeRouteChangeHandler(baseRouteChangeHandler);
            })();
        }
        Framework.setupEventHandlers = setupEventHandlers;
        /**
         * \~english
         * Setup active IPage instance.
         *
         * @private
         * @param page {IPage} [in] IPage instance.
         *
         * \~japanese
         * active Page の設定. Framework がコールする.
         *
         * @private
         * @param page {IPage} [in] IPage instance.
         */
        function setActivePage(page) {
            _activePage = page;
            if (_activePage) {
                _lastOrientation = Framework.getOrientation();
            }
        }
        Framework.setActivePage = setActivePage;
        /**
         * \~english
         * Reterns framework default click event string.
         *
         * @private
         *
         * \~japanese
         * Framework が既定に使用するクリックイベント文字列を取得
         *
         * @private
         * @return {String} "vclick" / "click"
         */
        function getDefaultClickEvent() {
            return Framework.Patch.s_vclickEvent;
        }
        Framework.getDefaultClickEvent = getDefaultClickEvent;
        /**
         * \~english
         * Get Config object.
         *
         * @private
         * @return {FrameworkOptions} Config object.
         *
         * \~japanese
         * Config object の取得
         *
         * @private
         * @return {FrameworkOptions} Config object.
         */
        function getConfig(options) {
            var defConfig = {
                // for fail safe, default settings.
                jquery: function () {
                    $.support.cors = true;
                    $.ajaxSetup({ cache: false });
                },
                jquerymobile: function () {
                    $.mobile.allowCrossDomainPages = true;
                    $.mobile.defaultPageTransition = "none";
                    $.mobile.hashListeningEnabled = false;
                    $.mobile.pushStateEnabled = false;
                },
                i18n: {},
                applyPatch: true,
                anchorVclick: true,
            };
            return $.extend({}, defConfig, CDP.Config, options);
        }
        ///////////////////////////////////////////////////////////////////////
        // closure methods
        // resize handler
        $(window).on("resize", function (event) {
            var newOrientation = Framework.getOrientation();
            if (_lastOrientation !== newOrientation) {
                for (var key in _orientationListenerHolder) {
                    _orientationListenerHolder[key].onOrientationChanged(newOrientation);
                }
                if (_activePage) {
                    _activePage.onOrientationChanged(newOrientation);
                }
                _lastOrientation = newOrientation;
            }
        });
    })(Framework = CDP.Framework || (CDP.Framework = {}));
})(CDP || (CDP = {}));



var CDP;
(function (CDP) {
    var Framework;
    (function (Framework) {
        /**
         * \~english
         * @class Page
         * @brief Base class of all page unit.
         *
         * \~japanese
         * @class Page
         * @brief すべてのページの基本となる既定クラス
         */
        var Page = (function () {
            //////////////////////////////////////////
            // public methods
            /**
             * \~english
             * constructor
             *
             * @param _url    {String}               [in] page's URL
             * @param _id     {String}               [in] page's ID
             * @param options {PageConstructOptions} [in] options
             *
             * \~japanese
             * constructor
             *
             * @param _url    {String}               [in] ページ URL
             * @param _id     {String}               [in] ページ ID
             * @param options {PageConstructOptions} [in] オプション
             */
            function Page(_url, _id, options) {
                this._url = _url;
                this._id = _id;
                this.setup(options);
            }
            Object.defineProperty(Page.prototype, "active", {
                //////////////////////////////////////////
                // public accessor
                get: function () { return !!this._$page && this._$page.hasClass("ui-page-active"); },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Page.prototype, "url", {
                get: function () { return this._url; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Page.prototype, "id", {
                get: function () { return this._id; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Page.prototype, "$page", {
                get: function () { return this._$page; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Page.prototype, "$header", {
                get: function () { return this._$header; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Page.prototype, "$footer", {
                get: function () { return this._$footer; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Page.prototype, "intent", {
                get: function () { return this._intent; },
                set: function (newIntent) { this._intent = newIntent; this._intent._update = true; },
                enumerable: true,
                configurable: true
            });
            //////////////////////////////////////////
            // public Event Handler
            // Orientation の変更を受信
            Page.prototype.onOrientationChanged = function (newOrientation) {
                if (this._owner) {
                    this._owner.onOrientationChanged(newOrientation);
                }
            };
            // H/W Back Button ハンドラ
            Page.prototype.onHardwareBackButton = function (event) {
                if (this._owner) {
                    return this._owner.onHardwareBackButton(event);
                }
                else {
                    return false;
                }
            };
            // Router "before route change" ハンドラ
            Page.prototype.onBeforeRouteChange = function () {
                if (this._owner) {
                    return this._owner.onBeforeRouteChange();
                }
                else {
                    return $.Deferred().resolve().promise();
                }
            };
            // 汎用コマンドを受信
            Page.prototype.onCommand = function (event, kind) {
                if (this._owner) {
                    return this._owner.onCommand(event, kind);
                }
                else {
                    return false;
                }
            };
            // 最初の OnPageInit() のときにのみコールされる
            Page.prototype.onInitialize = function (event) {
                if (this._owner) {
                    this._owner.onInitialize(event);
                }
            };
            // jQM event: "pagebeforecreate" に対応
            Page.prototype.onPageBeforeCreate = function (event) {
                if (this._owner) {
                    this._owner.onPageBeforeCreate(event);
                }
            };
            // jQM event: "pagecreate" (旧:"pageinit") に対応
            Page.prototype.onPageInit = function (event) {
                if (this._owner) {
                    this._owner.onPageInit(event);
                }
            };
            // jQM event: "pagebeforeshow" に対応
            Page.prototype.onPageBeforeShow = function (event, data) {
                if (this._owner) {
                    this._owner.onPageBeforeShow(event, data);
                }
            };
            // jQM event: "pagecontainershow" (旧:"pageshow") に対応
            Page.prototype.onPageShow = function (event, data) {
                if (this._owner) {
                    this._owner.onPageShow(event, data);
                }
            };
            // jQM event: "pagebeforehide" に対応
            Page.prototype.onPageBeforeHide = function (event, data) {
                if (this._owner) {
                    this._owner.onPageBeforeHide(event, data);
                }
            };
            // jQM event: "pagecontainerhide" (旧:"pagehide") に対応
            Page.prototype.onPageHide = function (event, data) {
                if (this._owner) {
                    this._owner.onPageHide(event, data);
                }
            };
            // jQM event: "pageremove" に対応
            Page.prototype.onPageRemove = function (event) {
                if (this._owner) {
                    this._owner.onPageRemove(event);
                }
            };
            //////////////////////////////////////////
            // private methods
            // mixin 用疑似コンストラクタ
            Page.prototype.setup = function (options) {
                var _this = this;
                // mixin destination 用の再初期化
                this._initialized = false;
                this._intent = null;
                // イベントバインド
                var selector = "#" + this._id;
                $(document)
                    .off("pagebeforecreate", selector)
                    .on("pagebeforecreate", selector, function (event) {
                    _this._$page = $(selector).first();
                    _this._$header = _this._$page.children(":jqmData(role=header)").first();
                    _this._$footer = _this._$page.children(":jqmData(role=footer)").first();
                    _this._$page
                        .on("pagecreate", function (event) {
                        _this.pageInit(event);
                    })
                        .on("pagebeforeshow", function (event, data) {
                        _this.pageBeforeShow(event, data);
                    })
                        .on("pageshow", function (event, data) {
                        _this.pageShow(event, data);
                    })
                        .on("pagebeforehide", function (event, data) {
                        _this.pageBeforeHide(event, data);
                    })
                        .on("pagehide", function (event, data) {
                        _this.pageHide(event, data);
                    })
                        .on("pageremove", function (event) {
                        _this.pageRemove(event);
                    });
                    _this.pageBeforeCreate(event);
                });
                options = options || {};
                // owner 設定
                this._owner = options.owner;
                // intent 設定
                this._keepIntent = options.keepIntent;
                // Router へ登録
                if (null == options.route) {
                    options.route = this._id;
                }
                Framework.Router.register(options.route, this._url, options.top, options.callback);
            };
            // PageTransitionDirection の判定
            Page.prototype.getDirection = function () {
                var activeIndex = Framework.Router.getJqmHistory().activeIndex;
                var prevIndex = Framework.Router.getJqmHistory().previousIndex;
                if (null == activeIndex || null == prevIndex) {
                    return "unknown";
                }
                else if (prevIndex === activeIndex) {
                    return "same";
                }
                else if (activeIndex < prevIndex) {
                    return "back";
                }
                else {
                    return "forward";
                }
            };
            Page.prototype.pageBeforeCreate = function (event) {
                this.onPageBeforeCreate(event);
            };
            Page.prototype.pageInit = function (event) {
                if (!this._initialized) {
                    this.onInitialize(event);
                    this._initialized = true;
                }
                this.onPageInit(event);
            };
            Page.prototype.pageBeforeShow = function (event, data) {
                Framework.setActivePage(this);
                this._intent = Framework.Router.popIntent();
                this.onPageBeforeShow(event, $.extend(data, { direction: this.getDirection() }));
            };
            Page.prototype.pageShow = function (event, data) {
                this.onPageShow(event, $.extend(data, { direction: this.getDirection() }));
            };
            Page.prototype.pageBeforeHide = function (event, data) {
                this.onPageBeforeHide(event, $.extend(data, { direction: this.getDirection() }));
                if (null != this._intent && (this._keepIntent || this._intent._update)) {
                    delete this._intent._update;
                    Framework.Router.pushIntent(this._intent);
                }
                else if (Framework.Router.fromHashChanged() && Framework.Router.isInSubFlow()) {
                    Framework.Router.pushIntent(this._intent);
                }
                this._intent = null;
                Framework.setActivePage(null);
            };
            Page.prototype.pageHide = function (event, data) {
                this.onPageHide(event, $.extend(data, { direction: this.getDirection() }));
            };
            Page.prototype.pageRemove = function (event) {
                this.onPageRemove(event);
                this._$page.off();
                this._$page = null;
                this._$header.off();
                this._$header = null;
                this._$footer.off();
                this._$footer = null;
            };
            return Page;
        }());
        Framework.Page = Page;
        ///////////////////////////////////////////////////////////////////////
        // closure methods
        /*
         * jQM1.4 にて、duplicate とされている "pageshow", "pagehide" はまだ据え置き。
         * http://jquerymobile.com/upgrade-guide/1.4/#navigation
         *
         * 特定ページに対して、イベントを取得できないため。
         * Forum でも議論中なので、決着がついてから対応を考慮する。
         * https://github.com/jquery/jquery-mobile/issues/6865
         *
         * [参考] よくわかるイベントチートシート
         *  - 本家(1.4+) http://jqmtricks.wordpress.com/2014/03/26/jquery-mobile-page-events/
         *  - 有志(~1.3) http://dev.screw-axis.com/doc/jquery_mobile/resources/cheatsheet/
         *
         * 以下は不完全な対応予定コード
         *
         * 特に振る舞いが変わるのは、"pagehide" で、検討されている仕様では
         * DOM を特定できないため、onPageHide() をインスタンスに伝えることができない。
         *
         * 仕様が変わらない場合は
         * onPageBeforeHide() の中で post して onPageHide() を発行する予定(過去互換保証)
         *
         * 2015/03/25 追記:
         * 仕様は確定. jQM1.6 より削除される予定
         *  jQM1.4 相当の参考実装 plugin があり、この実装相当の機能を cdp.framework.jqm で抱える予定
         *  https://github.com/arschmitz/jquery-mobile-onpage
         *
         * 公式見解
         * https://github.com/jquery/jquery-mobile/issues/7283#issuecomment-40746622
         */
        /*
            // bind "pagecontainershow", and "pagecontainerhide".
            (() => {
                let $body: any = $("body");
                $(document)
                    .on("pagecontainershow", (event: JQueryEventObject, data: ShowEventData) => {
                        if (0 < data.prevPage.length) {
                            // "pagecontainershow" は "pagecontainerhide" よりも遅いので、やはり DOM にはアクセスできない
                            let $prevpage = $("#" + data.prevPage[0].id);
                            $prevpage.trigger("_pagehide", data);
                        }
                        // 以下の対応で、"pagecontainershow" は "pageshow" 同等の振る舞いにすることが可能
                        let pageId = $body.pagecontainer("getActivePage").prop("id");
                        let $page = $("#" + pageId);
                        $page.trigger("_pageshow", data);
                    })
                    .on("pagecontainerhide", (event: JQueryEventObject, data: HideEventData) => {
                        // "pagecontainerhide" を受けたときは既に DOM から消えているため、page は特定できない。
                        //let pageId = $body.pagecontainer('getActivePage').prop("id");
                        //let $page = $("#" + pageId);
                        //$page.trigger("_pagehide", data);
                    })
                    .on("pagecontainertransition", (event: JQueryEventObject, data: any) => {
                        // "pagecontainertransition" には toPage にしかアクセスはできない
                    })
                ;
            })();
        */
    })(Framework = CDP.Framework || (CDP.Framework = {}));
})(CDP || (CDP = {}));

return CDP.Framework; }));

}.call(window));

/***/ }),
/* 6 */
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE_6__;

/***/ })
/******/ ]);
});
/*!
 * cdp.tools.js 2.0.0
 *
 * Date: 2017-04-13T10:50:17+0900
 */

(function (root, factory) { if (typeof define === "function" && define.amd) { define('cdp.tools',["jquery", "underscore"], function ($, _) { return factory(root.CDP || (root.CDP = {}), $, _); }); } else if (typeof exports === "object") { module.exports = factory(root.CDP || (root.CDP = {}), require("jquery"), require("underscore")); } else { factory(root.CDP || (root.CDP = {}), root.jQuery || root.$, root._); } }(((this || 0).self || global), function (CDP, $, _) { CDP.Tools = CDP.Tools || {};
/**
 * @file  Utils.
 * @brief Tools 専用のユーティリティ
 */
var CDP;
(function (CDP) {
    var Tools;
    (function (Tools) {
        // cdp.tools は cdp.core に依存しないため、独自にglobal を提供する
        Tools.global = Tools.global || window;
    })(Tools = CDP.Tools || (CDP.Tools = {}));
})(CDP || (CDP = {}));

var CDP;
(function (CDP) {
    var Tools;
    (function (Tools) {
        var TAG = "[CDP.Tools.Blob] ";
        var Blob;
        (function (Blob) {
            /**
             * Get BlobBuilder
             *
             * @return {any} BlobBuilder
             */
            function getBlobBuilder() {
                return Tools.global.BlobBuilder || Tools.global.WebKitBlobBuilder || Tools.global.MozBlobBuilder || Tools.global.MSBlobBuilder;
            }
            /**
             * ArrayBuffer to Blob
             *
             * @param buf {ArrayBuffer} [in] ArrayBuffer data
             * @param mimeType {string} [in] MimeType of data
             * @return {Blob} Blob data
             */
            function arrayBufferToBlob(buf, mimeType) {
                var blob = null;
                var blobBuilderObject = getBlobBuilder();
                if (blobBuilderObject != null) {
                    var blobBuilder = new blobBuilderObject();
                    blobBuilder.append(buf);
                    blob = blobBuilder.getBlob(mimeType);
                }
                else {
                    // Android 4.4 KitKat Chromium WebView
                    blob = new Tools.global.Blob([buf], { type: mimeType });
                }
                return blob;
            }
            Blob.arrayBufferToBlob = arrayBufferToBlob;
            /**
             * Base64 string to Blob
             *
             * @param base64 {string} [in] Base64 string data
             * @param mimeType {string} [in] MimeType of data
             * @return {Blob} Blob data
             */
            function base64ToBlob(base64, mimeType) {
                var blob = null;
                var blobBuilderObject = getBlobBuilder();
                if (blobBuilderObject != null) {
                    var blobBuilder = new blobBuilderObject();
                    blobBuilder.append(base64ToArrayBuffer(base64));
                    blob = blobBuilder.getBlob(mimeType);
                }
                else {
                    // Android 4.4 KitKat Chromium WebView
                    blob = new Tools.global.Blob([base64ToArrayBuffer(base64)], { type: mimeType });
                }
                return blob;
            }
            Blob.base64ToBlob = base64ToBlob;
            /**
             * Base64 string to ArrayBuffer
             *
             * @param base64 {string} [in] Base64 string data
             * @return {ArrayBuffer} ArrayBuffer data
             */
            function base64ToArrayBuffer(base64) {
                var bytes = window.atob(base64);
                var arrayBuffer = new ArrayBuffer(bytes.length);
                var data = new Uint8Array(arrayBuffer);
                for (var i = 0, len = bytes.length; i < len; ++i) {
                    data[i] = bytes.charCodeAt(i);
                }
                return arrayBuffer;
            }
            Blob.base64ToArrayBuffer = base64ToArrayBuffer;
            /**
             * Base64 string to Uint8Array
             *
             * @param base64 {string} [in] Base64 string data
             * @return {Uint8Array} Uint8Array data
             */
            function base64ToUint8Array(encoded) {
                var bytes = window.atob(encoded);
                var data = new Uint8Array(bytes.length);
                for (var i = 0, len = bytes.length; i < len; ++i) {
                    data[i] = bytes.charCodeAt(i);
                }
                return data;
            }
            Blob.base64ToUint8Array = base64ToUint8Array;
            /**
             * ArrayBuffer to base64 string
             *
             * @param arrayBuffer {ArrayBuffer} [in] ArrayBuffer data
             * @return {string} base64 data
             */
            function arrayBufferToBase64(arrayBuffer) {
                var bytes = new Uint8Array(arrayBuffer);
                return uint8ArrayToBase64(bytes);
            }
            Blob.arrayBufferToBase64 = arrayBufferToBase64;
            /**
             * Uint8Array to base64 string
             *
             * @param bytes {Uint8Array} [in] Uint8Array data
             * @return {string} base64 data
             */
            function uint8ArrayToBase64(bytes) {
                var data = "";
                for (var i = 0, len = bytes.byteLength; i < len; ++i) {
                    data += String.fromCharCode(bytes[i]);
                }
                return window.btoa(data);
            }
            Blob.uint8ArrayToBase64 = uint8ArrayToBase64;
            /**
             * URL Object
             *
             * @return {any} URL Object
             */
            Blob.URL = (function () {
                return Tools.global.URL || Tools.global.webkitURL;
            })();
        })(Blob = Tools.Blob || (Tools.Blob = {}));
    })(Tools = CDP.Tools || (CDP.Tools = {}));
})(CDP || (CDP = {}));
/* tslint:disable:max-line-length */
var CDP;
(function (CDP) {
    var Tools;
    (function (Tools) {
        var TAG = "[CDP.Tools.DateTime] ";
        /**
         * @class DateTime
         * @brief 時刻操作のユーティリティクラス
         */
        var DateTime = (function () {
            function DateTime() {
            }
            ///////////////////////////////////////////////////////////////////////
            // public static method
            /**
             * 基点となる日付から、n日後、n日前を算出
             *
             * @param base    {Date}   [in] 基準日
             * @param addDays {Number} [in] 加算日. マイナス指定でn日前も設定可能
             * @return {Date} 日付オブジェクト
             */
            DateTime.computeDate = function (base, addDays) {
                var dt = new Date(base.getTime());
                var baseSec = dt.getTime();
                var addSec = addDays * 86400000; //日数 * 1日のミリ秒数
                var targetSec = baseSec + addSec;
                dt.setTime(targetSec);
                return dt;
            };
            /**
             * Convert string to date object
             *
             * @param {String} date string ex) YYYY-MM-DDTHH:mm:SS.SSS
             * @return {Object} date object
             */
            DateTime.convertISOStringToDate = function (dateString) {
                var dateTime = dateString.split("T"), dateArray = dateTime[0].split("-"), timeArray, secArray, dateObject;
                if (dateTime[1]) {
                    timeArray = dateTime[1].split(":");
                    secArray = timeArray[2].split(".");
                }
                if (timeArray) {
                    dateObject = new Date(dateArray[0], dateArray[1] - 1, dateArray[2], timeArray[0], timeArray[1], secArray[0], secArray[1]);
                }
                else {
                    if (dateArray[2]) {
                        dateObject = new Date(dateArray[0], dateArray[1] - 1, dateArray[2]);
                    }
                    else if (dateArray[1]) {
                        dateObject = new Date(dateArray[0], dateArray[1] - 1);
                    }
                    else {
                        dateObject = new Date(dateArray[0]);
                    }
                }
                return dateObject;
            };
            /**
             *  Convert a date object into a string in PMOAPI recorded_date format(the ISO 8601 Extended Format)
             *
             * @param date   {Date}   [in] date object
             * @param target {String} [in] {year | month | date | hour | min | sec | msec }
             * @return {String}
             */
            DateTime.convertDateToISOString = function (date, target) {
                if (target === void 0) { target = "msec"; }
                var isoDateString;
                switch (target) {
                    case "year":
                    case "month":
                    case "date":
                    case "hour":
                    case "min":
                    case "sec":
                    case "msec":
                        break;
                    default:
                        console.warn(TAG + "unknown target: " + target);
                        target = "msec";
                }
                isoDateString = date.getFullYear();
                if ("year" === target) {
                    return isoDateString;
                }
                isoDateString += ("-" + DateTime.numberToDoubleDigitsString(date.getMonth() + 1));
                if ("month" === target) {
                    return isoDateString;
                }
                isoDateString += ("-" + DateTime.numberToDoubleDigitsString(date.getDate()));
                if ("date" === target) {
                    return isoDateString;
                }
                isoDateString += ("T" + DateTime.numberToDoubleDigitsString(date.getHours()));
                if ("hour" === target) {
                    return isoDateString;
                }
                isoDateString += (":" + DateTime.numberToDoubleDigitsString(date.getMinutes()));
                if ("min" === target) {
                    return isoDateString;
                }
                isoDateString += (":" + DateTime.numberToDoubleDigitsString(date.getSeconds()));
                if ("sec" === target) {
                    return isoDateString;
                }
                isoDateString += ("." + String((date.getMilliseconds() / 1000).toFixed(3)).slice(2, 5));
                return isoDateString;
            };
            /**
             * Convert file system compatible string to date object
             *
             * @param {String} date string ex) yyyy_MM_ddTHH_mm_ss_SSS
             * @return {Object} date object
             */
            DateTime.convertFileSystemStringToDate = function (dateString) {
                var dateTime = dateString.split("T"), dateArray = dateTime[0].split("_"), timeArray, dateObject;
                if (dateTime[1]) {
                    timeArray = dateTime[1].split("_");
                }
                if (timeArray) {
                    dateObject = new Date(dateArray[0], dateArray[1] - 1, dateArray[2], timeArray[0], timeArray[1], timeArray[2], timeArray[3]);
                }
                else {
                    if (dateArray[2]) {
                        dateObject = new Date(dateArray[0], dateArray[1] - 1, dateArray[2]);
                    }
                    else if (dateArray[1]) {
                        dateObject = new Date(dateArray[0], dateArray[1] - 1);
                    }
                    else {
                        dateObject = new Date(dateArray[0]);
                    }
                }
                return dateObject;
            };
            /**
             *  Convert a date object into a string in file system compatible format(yyyy_MM_ddTHH_mm_ss_SSS)
             *
             * @param date   {Date}   [in] date object
             * @param target {String} [in] {year | month | date | hour | min | sec | msec }
             * @return {String}
             */
            DateTime.convertDateToFileSystemString = function (date, target) {
                if (target === void 0) { target = "msec"; }
                var fileSystemString;
                switch (target) {
                    case "year":
                    case "month":
                    case "date":
                    case "hour":
                    case "min":
                    case "sec":
                    case "msec":
                        break;
                    default:
                        console.warn(TAG + "unknown target: " + target);
                        target = "msec";
                }
                fileSystemString = date.getFullYear();
                if ("year" === target) {
                    return fileSystemString;
                }
                fileSystemString += ("_" + DateTime.numberToDoubleDigitsString(date.getMonth() + 1));
                if ("month" === target) {
                    return fileSystemString;
                }
                fileSystemString += ("_" + DateTime.numberToDoubleDigitsString(date.getDate()));
                if ("date" === target) {
                    return fileSystemString;
                }
                fileSystemString += ("T" + DateTime.numberToDoubleDigitsString(date.getHours()));
                if ("hour" === target) {
                    return fileSystemString;
                }
                fileSystemString += ("_" + DateTime.numberToDoubleDigitsString(date.getMinutes()));
                if ("min" === target) {
                    return fileSystemString;
                }
                fileSystemString += ("_" + DateTime.numberToDoubleDigitsString(date.getSeconds()));
                if ("sec" === target) {
                    return fileSystemString;
                }
                fileSystemString += ("_" + String((date.getMilliseconds() / 1000).toFixed(3)).slice(2, 5));
                return fileSystemString;
            };
            ///////////////////////////////////////////////////////////////////////
            // private static method
            /**
             * Convert num to string(double digits)
             *
             * @param  {Number} number (0 <number < 100)
             * @return {String} double digits string
             */
            DateTime.numberToDoubleDigitsString = function (num) {
                if (num < 0 || num > 100) {
                    return null;
                }
                if (num < 10) {
                    return "0" + num;
                }
                return "" + num;
            };
            return DateTime;
        }());
        Tools.DateTime = DateTime;
    })(Tools = CDP.Tools || (CDP.Tools = {}));
})(CDP || (CDP = {}));

/*jshint multistr: true */
var CDP;
(function (CDP) {
    var Tools;
    (function (Tools) {
        var TAG = "[CDP.Tools.Functions] ";
        /**
         * Math.abs よりも高速な abs
         */
        function abs(x) {
            return x >= 0 ? x : -x;
        }
        Tools.abs = abs;
        /**
         * Math.max よりも高速な max
         */
        function max(lhs, rhs) {
            return lhs >= rhs ? lhs : rhs;
        }
        Tools.max = max;
        /**
         * Math.min よりも高速な min
         */
        function min(lhs, rhs) {
            return lhs <= rhs ? lhs : rhs;
        }
        Tools.min = min;
        /**
         * condition() が true を返すまで deferred
         */
        function await(condition, msec) {
            if (msec === void 0) { msec = 0; }
            var df = $.Deferred();
            var proc = function () {
                if (!condition()) {
                    setTimeout(proc, msec);
                }
                else {
                    df.resolve();
                }
            };
            setTimeout(proc, msec);
            return df.promise();
        }
        Tools.await = await;
        /**
         * 数値を 0 詰めして文字列を生成
         */
        function toZeroPadding(no, limit) {
            var signed = "";
            no = Number(no);
            if (isNaN(no) || isNaN(limit) || limit <= 0) {
                return null;
            }
            if (no < 0) {
                no = Tools.abs(no);
                signed = "-";
            }
            return signed + (Array(limit).join("0") + no).slice(-limit);
        }
        Tools.toZeroPadding = toZeroPadding;
        /**
         * 多重継承のための実行時継承関数
         *
         * Sub Class 候補オブジェクトに対して Super Class 候補オブジェクトを直前の Super Class として挿入する。
         * prototype のみコピーする。
         * インスタンスメンバをコピーしたい場合、Super Class が疑似コンストラクタを提供する必要がある。
         * 詳細は cdp.tools.Functions.spec.ts を参照。
         *
         * @param subClass   {constructor} [in] オブジェクトの constructor を指定
         * @param superClass {constructor} [in] オブジェクトの constructor を指定
         */
        function inherit(subClass, superClass) {
            var _prototype = subClass.prototype;
            function _inherit() {
                this.constructor = subClass;
            }
            _inherit.prototype = superClass.prototype;
            subClass.prototype = new _inherit();
            $.extend(subClass.prototype, _prototype);
        }
        Tools.inherit = inherit;
        /**
         * mixin 関数
         *
         * TypeScript Official Site に載っている mixin 関数
         * http://www.typescriptlang.org/Handbook#mixins
         * 既に定義されているオブジェクトから、新規にオブジェクトを合成する。
         *
         * @param derived {constructor}    [in] 合成されるオブジェクトの constructor を指定
         * @param bases   {constructor...} [in] 合成元オブジェクトの constructor を指定 (可変引数)
         */
        function mixin(derived) {
            var bases = [];
            for (var _i = 1; _i < arguments.length; _i++) {
                bases[_i - 1] = arguments[_i];
            }
            bases.forEach(function (base) {
                Object.getOwnPropertyNames(base.prototype).forEach(function (name) {
                    derived.prototype[name] = base.prototype[name];
                });
            });
        }
        Tools.mixin = mixin;
        /**
         * \~english
         * Helper function to correctly set up the prototype chain, for subclasses.
         * The function behavior is same as extend() function of Backbone.js.
         *
         * @param protoProps  {Object} [in] set prototype properties as object.
         * @param staticProps {Object} [in] set static properties as object.
         * @return {Object} subclass constructor.
         *
         * \~japanese
         * クラス継承のためのヘルパー関数
         * Backbone.js extend() 関数と同等
         *
         * @param protoProps  {Object} [in] prototype properties をオブジェクトで指定
         * @param staticProps {Object} [in] static properties をオブジェクトで指定
         * @return {Object} サブクラスのコンストラクタ
         */
        function extend(protoProps, staticProps) {
            var parent = this;
            var child;
            if (protoProps && protoProps.hasOwnProperty("constructor")) {
                child = protoProps.constructor;
            }
            else {
                child = function () {
                    return parent.apply(this, arguments);
                };
            }
            $.extend(child, parent, staticProps);
            var Surrogate = function () {
                this.constructor = child;
            };
            Surrogate.prototype = parent.prototype;
            child.prototype = new Surrogate;
            if (protoProps) {
                $.extend(child.prototype, protoProps);
            }
            child.__super__ = parent.prototype;
            return child;
        }
        Tools.extend = extend;
        /**
         * DPI 取得
         */
        function getDevicePixcelRatio() {
            var mediaQuery;
            var is_firefox = navigator.userAgent.toLowerCase().indexOf("firefox") > -1;
            if (null != window.devicePixelRatio && !is_firefox) {
                return window.devicePixelRatio;
            }
            else if (window.matchMedia) {
                mediaQuery =
                    "(-webkit-min-device-pixel-ratio: 1.5),\
                    (min--moz-device-pixel-ratio: 1.5),\
                    (-o-min-device-pixel-ratio: 3/2),\
                    (min-resolution: 1.5dppx)";
                if (window.matchMedia(mediaQuery).matches) {
                    return 1.5;
                }
                mediaQuery =
                    "(-webkit-min-device-pixel-ratio: 2),\
                    (min--moz-device-pixel-ratio: 2),\
                    (-o-min-device-pixel-ratio: 2/1),\
                    (min-resolution: 2dppx)";
                if (window.matchMedia(mediaQuery).matches) {
                    return 2;
                }
                mediaQuery =
                    "(-webkit-min-device-pixel-ratio: 0.75),\
                    (min--moz-device-pixel-ratio: 0.75),\
                    (-o-min-device-pixel-ratio: 3/4),\
                    (min-resolution: 0.75dppx)";
                if (window.matchMedia(mediaQuery).matches) {
                    return 0.7;
                }
            }
            else {
                return 1;
            }
        }
        Tools.getDevicePixcelRatio = getDevicePixcelRatio;
        function doWork(worker, msg) {
            var df = $.Deferred();
            if (!worker) {
                return df.reject("null argument");
            }
            var wk;
            switch (typeof worker) {
                case "object":
                    wk = worker;
                    break;
                case "string":
                    try {
                        wk = new Worker(worker);
                    }
                    catch (ex) {
                        console.error(TAG + ex);
                        return df.reject(ex);
                    }
                    break;
                default:
                    return df.reject("invalid type argument");
            }
            wk.onerror = function (error) { return df.reject(error); };
            wk.onmessage = function (event) { return df.resolve(event.data); };
            wk.postMessage(msg);
            return df.promise();
        }
        Tools.doWork = doWork;
    })(Tools = CDP.Tools || (CDP.Tools = {}));
})(CDP || (CDP = {}));



var CDP;
(function (CDP) {
    var Tools;
    (function (Tools) {
        var TAG = "[CDP.Tools.Template] ";
        //___________________________________________________________________________________________________________________//
        /**
         * @class Template
         * @brief template script を管理するユーティリティクラス
         */
        var Template = (function () {
            function Template() {
            }
            ///////////////////////////////////////////////////////////////////////
            // 公開メソッド
            /**
             * 指定した id, class 名, Tag 名をキーにテンプレートの JQuery Element を取得する。
             *
             * @param {String}  key     [in] id, class, tag を表す文字列
             * @param {String}  [src]   [in] 外部 html を指定する場合は url を設定
             * @param {Boolean} [cache] [in] src html をキャッシュする場合は true. src が指定されているときのみ有効
             * @return template が格納されている JQuery Element
             */
            Template.getTemplateElement = function (key, src, cache) {
                if (src === void 0) { src = null; }
                if (cache === void 0) { cache = true; }
                var mapElement = Template.getElementMap();
                var $element = mapElement[key];
                try {
                    if (!$element) {
                        if (src) {
                            var html = Template.findHtmlFromSource(src);
                            $element = $(html).find(key);
                        }
                        else {
                            $element = $(key);
                        }
                        // 要素の検証
                        if ($element <= 0) {
                            throw ("invalid [key, src] = [" + key + ", " + src + "]");
                        }
                        if (src && cache) {
                            mapElement[key] = $element;
                        }
                    }
                }
                catch (exception) {
                    console.error(TAG + exception);
                    return null;
                }
                return $element;
            };
            /**
             * Map オブジェクトの削除
             * 明示的にキャッシュを開放する場合は本メソッドをコールする
             */
            Template.empty = function () {
                Template._mapElement = null;
                Template._mapSource = null;
            };
            Template.getJST = function (key, src, cache) {
                var template = null;
                var jst;
                var $element;
                if (key instanceof jQuery) {
                    $element = key;
                }
                else {
                    $element = this.getTemplateElement(key, src, cache);
                }
                if (null != Tools.global.Hogan) {
                    template = Hogan.compile($element.text());
                    jst = function (data) {
                        return template.render(data);
                    };
                }
                else {
                    template = _.template($element.html());
                    jst = function (data) {
                        // 改行とタブは削除する
                        return template(data).replace(/\n|\t/g, "");
                    };
                }
                return jst;
            };
            ///////////////////////////////////////////////////////////////////////
            // 内部メソッド
            // Element Map オブジェクトの取得
            Template.getElementMap = function () {
                if (!Template._mapElement) {
                    Template._mapElement = {};
                }
                return Template._mapElement;
            };
            // URL Map オブジェクトの取得
            Template.getSourceMap = function () {
                if (!Template._mapSource) {
                    Template._mapSource = {};
                }
                return Template._mapSource;
            };
            // URL Map から HTML を検索. 失敗した場合は undefined が返る
            Template.findHtmlFromSource = function (src) {
                var mapSource = Template.getSourceMap();
                var html = mapSource[src];
                if (!html) {
                    $.ajax({
                        url: src,
                        method: "GET",
                        async: false,
                        dataType: "html",
                        success: function (data) {
                            html = data;
                        },
                        error: function (data, status) {
                            throw ("ajax request failed. status: " + status);
                        }
                    });
                    // キャッシュに格納
                    mapSource[src] = html;
                }
                return html;
            };
            return Template;
        }());
        Tools.Template = Template;
    })(Tools = CDP.Tools || (CDP.Tools = {}));
})(CDP || (CDP = {}));

return CDP.Tools; }));
/*!
 * cdp.ui.listview.js 2.0.0
 *
 * Date: 2017-04-13T10:54:35+0900
 */

(function (root, factory) { if (typeof define === "function" && define.amd) { define('cdp.ui.listview',["jquery", "underscore", "backbone"], function ($, _, Backbone) { return factory(root.CDP || (root.CDP = {}), $, _, Backbone); }); } else if (typeof exports === "object") { module.exports = factory(root.CDP || (root.CDP = {}), require("jquery"), require("underscore"), require("backbone")); } else { factory(root.CDP || (root.CDP = {}), root.$, root._, root.Backbone); } }(((this || 0).self || global), function (CDP, $, _, Backbone) { CDP.UI = CDP.UI || {};
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        /**
         * @class ListViewGlobalConfig
         * @brief cdp.ui.listview の global confing
         */
        var ListViewGlobalConfig;
        (function (ListViewGlobalConfig) {
            ListViewGlobalConfig.WRAPPER_CLASS = "listview-wrapper";
            ListViewGlobalConfig.WRAPPER_SELECTOR = "." + ListViewGlobalConfig.WRAPPER_CLASS;
            ListViewGlobalConfig.SCROLL_MAP_CLASS = "listview-scroll-map";
            ListViewGlobalConfig.SCROLL_MAP_SELECTOR = "." + ListViewGlobalConfig.SCROLL_MAP_CLASS;
            ListViewGlobalConfig.INACTIVE_CLASS = "inactive";
            ListViewGlobalConfig.INACTIVE_CLASS_SELECTOR = "." + ListViewGlobalConfig.INACTIVE_CLASS;
            ListViewGlobalConfig.RECYCLE_CLASS = "listview-recycle";
            ListViewGlobalConfig.RECYCLE_CLASS_SELECTOR = "." + ListViewGlobalConfig.RECYCLE_CLASS;
            ListViewGlobalConfig.LISTITEM_BASE_CLASS = "listview-item-base";
            ListViewGlobalConfig.LISTITEM_BASE_CLASS_SELECTOR = "." + ListViewGlobalConfig.LISTITEM_BASE_CLASS;
            ListViewGlobalConfig.DATA_PAGE_INDEX = "data-page-index";
            ListViewGlobalConfig.DATA_CONTAINER_INDEX = "data-container-index";
        })(ListViewGlobalConfig = UI.ListViewGlobalConfig || (UI.ListViewGlobalConfig = {}));
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));



var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var _Config = CDP.UI.ListViewGlobalConfig;
        var _ToolCSS = CDP.UI._ListViewUtils;
        var TAG = "[CDP.UI.LineProfile] ";
        /**
         * @class LineProfile
         * @brief 1 ラインに関するプロファイルクラス
         *        framework が使用する
         */
        var LineProfile = (function () {
            /**
             * constructor
             *
             * @param _owner       {IListViewFramework} [in] 管理者である IListViewFramework インスタンス
             * @param _height      {Number}             [in] 初期の高さ
             * @param _initializer {Function}           [in] ListItemView 派生クラスのコンストラクタ
             * @param _info        {Object}             [in] ListItemView コンストラクタに渡されるオプション
             */
            function LineProfile(_owner, _height, _initializer, _info) {
                this._owner = _owner;
                this._height = _height;
                this._initializer = _initializer;
                this._info = _info;
                this._index = null; //< global index
                this._pageIndex = null; //< 所属する page index
                this._offset = null; //< global offset
                this._$base = null; //< 土台となる DOM インスタンスを格納
                this._instance = null; //< ListItemView インスタンスを格納
            }
            ///////////////////////////////////////////////////////////////////////
            // public methods
            // 有効化
            LineProfile.prototype.activate = function () {
                if (null == this._instance) {
                    var options = void 0;
                    this._$base = this.prepareBaseElement();
                    options = $.extend({}, {
                        el: this._$base,
                        owner: this._owner,
                        lineProfile: this,
                    }, this._info);
                    this._instance = new this._initializer(options);
                    if ("none" === this._$base.css("display")) {
                        this._$base.css("display", "block");
                    }
                }
                this.updatePageIndex(this._$base);
                if ("visible" !== this._$base.css("visibility")) {
                    this._$base.css("visibility", "visible");
                }
            };
            // 不可視化
            LineProfile.prototype.hide = function () {
                if (null == this._instance) {
                    this.activate();
                }
                if ("hidden" !== this._$base.css("visibility")) {
                    this._$base.css("visibility", "hidden");
                }
            };
            // 無効化
            LineProfile.prototype.inactivate = function () {
                if (null != this._instance) {
                    // xperia AX Jelly Bean (4.1.2)にて、 hidden element の削除でメモリーリークするため可視化する。
                    if ("visible" !== this._$base.css("visibility")) {
                        this._$base.css("visibility", "visible");
                    }
                    this._instance.remove();
                    this._instance = null;
                    this._$base.addClass(_Config.RECYCLE_CLASS);
                    this._$base.css("display", "none");
                    this._$base = null;
                }
            };
            // 更新
            LineProfile.prototype.refresh = function () {
                if (null != this._instance) {
                    this._instance.render();
                }
            };
            // 有効無効判定
            LineProfile.prototype.isActive = function () {
                return null != this._instance;
            };
            // 高さ情報の更新. ListItemView からコールされる。
            LineProfile.prototype.updateHeight = function (newHeight, options) {
                var delta = newHeight - this._height;
                this._height = newHeight;
                this._owner.updateScrollMapHeight(delta);
                if (null != options && options.reflectAll) {
                    this._owner.updateProfiles(this._index);
                }
            };
            // z-index のリセット. ScrollManager.removeItem() からコールされる。
            LineProfile.prototype.resetDepth = function () {
                if (null != this._instance) {
                    this._$base.css("z-index", this._owner.getListViewOptions().baseDepth);
                }
            };
            Object.defineProperty(LineProfile.prototype, "height", {
                ///////////////////////////////////////////////////////////////////////
                // getter/setter methods
                // getter: ラインの高さ
                get: function () {
                    return this._height;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(LineProfile.prototype, "index", {
                // getter: global index
                get: function () {
                    return this._index;
                },
                // setter: global index
                set: function (index) {
                    this._index = index;
                    if (null != this._$base) {
                        this.updateIndex(this._$base);
                    }
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(LineProfile.prototype, "pageIndex", {
                // getter: 所属ページ index
                get: function () {
                    return this._pageIndex;
                },
                // setter: 所属ページ index
                set: function (index) {
                    this._pageIndex = index;
                    if (null != this._$base) {
                        this.updatePageIndex(this._$base);
                    }
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(LineProfile.prototype, "offset", {
                // getter: line offset
                get: function () {
                    return this._offset;
                },
                // setter: line offset
                set: function (offset) {
                    this._offset = offset;
                    if (null != this._$base) {
                        this.updateOffset(this._$base);
                    }
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(LineProfile.prototype, "info", {
                // getter: info
                get: function () {
                    return this._info;
                },
                enumerable: true,
                configurable: true
            });
            ///////////////////////////////////////////////////////////////////////
            // private methods
            // Base jQuery オブジェクトの生成
            LineProfile.prototype.prepareBaseElement = function () {
                var $base;
                var $map = this._owner.getScrollMapElement();
                var $recycle = this._owner.findRecycleElements().first();
                var itemTagName = this._owner.getListViewOptions().itemTagName;
                if (null != this._$base) {
                    console.warn(TAG + "this._$base is not null.");
                    return this._$base;
                }
                if (0 < $recycle.length) {
                    $base = $recycle;
                    $base.removeAttr("z-index");
                    $base.removeClass(_Config.RECYCLE_CLASS);
                }
                else {
                    $base = $("<" + itemTagName + " class='" + _Config.LISTITEM_BASE_CLASS + "'></" + itemTagName + ">");
                    $base.css("display", "none");
                    $map.append($base);
                }
                // 高さの更新
                if ($base.height() !== this._height) {
                    $base.height(this._height);
                }
                // index の設定
                this.updateIndex($base);
                // offset の更新
                this.updateOffset($base);
                return $base;
            };
            // global index の更新
            LineProfile.prototype.updateIndex = function ($base) {
                if ($base.attr(_Config.DATA_CONTAINER_INDEX) !== this._index.toString()) {
                    $base.attr(_Config.DATA_CONTAINER_INDEX, this._index.toString());
                }
            };
            // page index の更新
            LineProfile.prototype.updatePageIndex = function ($base) {
                if ($base.attr(_Config.DATA_PAGE_INDEX) !== this._pageIndex.toString()) {
                    $base.attr(_Config.DATA_PAGE_INDEX, this._pageIndex.toString());
                }
            };
            // offset の更新
            LineProfile.prototype.updateOffset = function ($base) {
                var transform = {};
                if (this._owner.getListViewOptions().enableTransformOffset) {
                    if (_ToolCSS.getCssMatrixValue($base, "translateY") !== this._offset) {
                        for (var i = 0; i < _ToolCSS.cssPrefixes.length; i++) {
                            transform[_ToolCSS.cssPrefixes[i] + "transform"] = "translate3d(0px," + this._offset + "px,0px)";
                        }
                        $base.css(transform);
                    }
                }
                else {
                    if (parseInt($base.css("top"), 10) !== this._offset) {
                        $base.css("top", this._offset + "px");
                    }
                }
            };
            return LineProfile;
        }());
        UI.LineProfile = LineProfile;
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));

var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var TAG = "[CDP.UI.GroupProfile] ";
        /**
         * @class GroupProfile
         * @brief ラインをグループ管理するプロファイルクラス
         *        本クラスでは直接 DOM を操作してはいけない
         */
        var GroupProfile = (function () {
            /**
             * constructor
             *
             * @param _id    {String}             [in] GroupProfile の ID
             * @param _owner {ExpandableListView} [in] 管理者である ExpandableListView インスタンス
             */
            function GroupProfile(_id, _owner) {
                this._id = _id;
                this._owner = _owner;
                this._parent = null; //< 親 GroupProfile インスタンス
                this._children = []; //< 子 GroupProfile インスタンス
                this._expanded = false; //< 開閉情報
                this._status = "unregistered"; //< _owner への登録状態 [ unregistered | registered ]
                this._mapLines = {}; //< 自身が管轄する LineProfile を key とともに格納
            }
            ///////////////////////////////////////////////////////////////////////
            // public method
            /**
             * 本 GroupProfile が管理する List を作成して登録
             *
             * @param height      {Number}   [in] ラインの高さ
             * @param initializer {Function} [in] ListItemView 派生クラスのコンストラクタ
             * @param info        {Object}   [in] initializer に渡されるオプション引数
             * @param layoutKey   {String}   [in] layout 毎に使用する識別子 (オプショナル)
             * @return {GroupProfile} 本インスタンス
             */
            GroupProfile.prototype.addItem = function (height, initializer, info, layoutKey) {
                var line;
                var options = $.extend({}, { groupProfile: this }, info);
                if (null == layoutKey) {
                    layoutKey = GroupProfile.LAYOUT_KEY_DEFAULT;
                }
                if (null == this._mapLines[layoutKey]) {
                    this._mapLines[layoutKey] = [];
                }
                line = new UI.LineProfile(this._owner.core, Math.floor(height), initializer, options);
                // _owner の管理下にあるときは速やかに追加
                if (("registered" === this._status) &&
                    (null == this._owner.layoutKey || layoutKey === this._owner.layoutKey)) {
                    this._owner._addLine(line, this.getLastLineIndex() + 1);
                    this._owner.update();
                }
                this._mapLines[layoutKey].push(line);
                return this;
            };
            GroupProfile.prototype.addChildren = function (target) {
                var _this = this;
                var children = (target instanceof Array) ? target : [target];
                children.forEach(function (child) {
                    child.setParent(_this);
                });
                this._children = this._children.concat(children);
                return this;
            };
            /**
             * 親 GroupProfile を取得
             *
             * @return {GroupProfile} GroupProfile 親 インスタンス
             */
            GroupProfile.prototype.getParent = function () {
                return this._parent;
            };
            /**
             * 子 GroupProfile を取得
             *
             * @return {GroupProfile[]} GroupProfile 子 インスタンス配列
             */
            GroupProfile.prototype.getChildren = function () {
                return this._children;
            };
            /**
             * 子 Group を持っているか判定
             * layoutKey が指定されれば、layout の状態まで判定
             *
             * @param layoutKey {String} [in] layout 毎に使用する識別子 (オプショナル)
             * @return {Boolean} true: 有, false: 無
             */
            GroupProfile.prototype.hasChildren = function (layoutKey) {
                if (this._children.length <= 0) {
                    return false;
                }
                else if (null != layoutKey) {
                    return this._children[0].hasLayoutKeyOf(layoutKey);
                }
                else {
                    return true;
                }
            };
            /**
             * layout の状態を判定
             *
             * @param layoutKey {String} [in] layout 毎に使用する識別子
             * @return {Boolean} true: 有, false: 無
             */
            GroupProfile.prototype.hasLayoutKeyOf = function (layoutKey) {
                if (null == layoutKey) {
                    layoutKey = GroupProfile.LAYOUT_KEY_DEFAULT;
                }
                return (null != this._mapLines[layoutKey]);
            };
            /**
             * グループ展開
             */
            GroupProfile.prototype.expand = function () {
                var _this = this;
                var lines = [];
                if (this._lines.length < 0) {
                    console.warn(TAG + "this group has no lines.");
                }
                else if (!this.hasChildren()) {
                    console.warn(TAG + "this group has no children.");
                }
                else if (!this.isExpanded()) {
                    lines = this.queryOperationTarget("registered");
                    this._expanded = true;
                    if (0 < lines.length) {
                        this._owner.statusScope("expanding", function () {
                            // 自身を更新
                            _this._lines.forEach(function (line) {
                                line.refresh();
                            });
                            // 配下を更新
                            _this._owner._addLine(lines, _this.getLastLineIndex() + 1);
                            _this._owner.update();
                        });
                    }
                }
            };
            /**
             * グループ収束
             *
             * @param delay {Number} [in] 要素削除に費やす遅延時間. 既定: animationDuration 値
             */
            GroupProfile.prototype.collapse = function (delay) {
                var _this = this;
                var lines = [];
                if (!this.hasChildren()) {
                    console.warn(TAG + "this group has no children.");
                }
                else if (this.isExpanded()) {
                    lines = this.queryOperationTarget("unregistered");
                    this._expanded = false;
                    if (0 < lines.length) {
                        delay = (null != delay) ? delay : this._owner.core.getListViewOptions().animationDuration;
                        this._owner.statusScope("collapsing", function () {
                            // 自身を更新
                            _this._lines.forEach(function (line) {
                                line.refresh();
                            });
                            // 配下を更新
                            _this._owner.removeItem(lines[0].index, lines.length, delay);
                            _this._owner.update();
                        });
                    }
                }
            };
            /**
             * 自身をリストの可視領域に表示
             *
             * @param options {EnsureVisibleOptions} [in] オプション
             */
            GroupProfile.prototype.ensureVisible = function (options) {
                if (0 < this._lines.length) {
                    this._owner.ensureVisible(this._lines[0].index, options);
                }
                else if (null != options.callback) {
                    options.callback();
                }
            };
            /**
             * 開閉のトグル
             *
             * @param delay {Number} [in] collapse の要素削除に費やす遅延時間. 既定: animationDuration 値
             */
            GroupProfile.prototype.toggle = function (delay) {
                if (this._expanded) {
                    this.collapse(delay);
                }
                else {
                    this.expand();
                }
            };
            /**
             * 展開状態を判定
             *
             * @return {Boolean} true: 展開, false:収束
             */
            GroupProfile.prototype.isExpanded = function () {
                return this._expanded;
            };
            /**
             * list view へ登録
             * Top Group のみ登録可能
             *
             * @param insertTo {Number} 挿入位置を index で指定
             * @return {GroupProfile} 本インスタンス
             */
            GroupProfile.prototype.register = function (insertTo) {
                if (this._parent) {
                    console.error(TAG + "logic error: 'register' method is acceptable only top group.");
                }
                else {
                    this._owner._addLine(this.preprocess("registered"), insertTo);
                }
                return this;
            };
            /**
             * list view へ復元
             * Top Group のみ登録可能
             *
             * @return {GroupProfile} 本インスタンス
             */
            GroupProfile.prototype.restore = function () {
                var lines = [];
                if (this._parent) {
                    console.error(TAG + "logic error: 'restore' method is acceptable only top group.");
                }
                else if (this._lines) {
                    if (this._expanded) {
                        lines = this._lines.concat(this.queryOperationTarget("active"));
                    }
                    else {
                        lines = this._lines;
                    }
                    this._owner._addLine(lines);
                }
                return this;
            };
            /**
             * 配下の最後の line index を取得
             *
             * @param withActiveChildren {Boolean} [in] 登録済みの子 GroupProfile を含めて検索する場合は true を指定
             * @return {Number} index. エラーの場合は null.
             */
            GroupProfile.prototype.getLastLineIndex = function (withActiveChildren) {
                var _this = this;
                if (withActiveChildren === void 0) { withActiveChildren = false; }
                var lines = (function () {
                    var lines;
                    if (withActiveChildren) {
                        lines = _this.queryOperationTarget("active");
                    }
                    if (null == lines || lines.length <= 0) {
                        lines = _this._lines;
                    }
                    return lines;
                })();
                if (lines.length <= 0) {
                    console.error(TAG + "logic error: this group is stil not registered.");
                    return null;
                }
                else {
                    return lines[lines.length - 1].index;
                }
            };
            Object.defineProperty(GroupProfile.prototype, "id", {
                /**
                 * ID を取得
                 *
                 * @return {String} 割り振られた ID
                 */
                get: function () {
                    return this._id;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(GroupProfile.prototype, "status", {
                /**
                 * ステータスを取得
                 *
                 * @return {String} ステータス文字列
                 */
                get: function () {
                    return this._status;
                },
                enumerable: true,
                configurable: true
            });
            ///////////////////////////////////////////////////////////////////////
            // private method
            /* tslint:disable:no-unused-variable */
            /**
             * 親 Group 指定
             *
             * @param parent {GroupProfile} [in] 親 GroupProfile インスタンス
             */
            GroupProfile.prototype.setParent = function (parent) {
                this._parent = parent;
            };
            /* tslint:enable:no-unused-variable */
            /**
             * register / unregister の前処理
             *
             * @param newStatus {String} [in] 新ステータス文字列
             * @return {LineProfile[]} 更新すべき LineProfile の配列
             */
            GroupProfile.prototype.preprocess = function (newStatus) {
                var lines = [];
                if (newStatus !== this._status && null != this._lines) {
                    lines = this._lines;
                }
                this._status = newStatus;
                return lines;
            };
            /**
             * 操作対象の LineProfile 配列を取得
             *
             * @param newStatus {String} [in] 新ステータス文字列
             * @return {LineProfile[]} 操作対象の LineProfile の配列
             */
            GroupProfile.prototype.queryOperationTarget = function (operation) {
                var findTargets = function (group) {
                    var lines = [];
                    group._children.forEach(function (group) {
                        switch (operation) {
                            case "registered":
                                lines = lines.concat(group.preprocess(operation));
                                break;
                            case "unregistered":
                                lines = lines.concat(group.preprocess(operation));
                                break;
                            case "active":
                                if (null != group._lines) {
                                    lines = lines.concat(group._lines);
                                }
                                break;
                            default:
                                console.warn(TAG + "unknown operation: " + operation);
                                return;
                        }
                        if (group.isExpanded()) {
                            lines = lines.concat(findTargets(group));
                        }
                    });
                    return lines;
                };
                return findTargets(this);
            };
            Object.defineProperty(GroupProfile.prototype, "_lines", {
                /**
                 * 自身の管理するアクティブな LineProfie を取得
                 *
                 * @return {LineProfile[]} LineProfie 配列
                 */
                get: function () {
                    var key = this._owner.layoutKey;
                    if (null != key) {
                        return this._mapLines[key];
                    }
                    else {
                        return this._mapLines[GroupProfile.LAYOUT_KEY_DEFAULT];
                    }
                },
                enumerable: true,
                configurable: true
            });
            return GroupProfile;
        }());
        GroupProfile.LAYOUT_KEY_DEFAULT = "-layout-default";
        UI.GroupProfile = GroupProfile;
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));




var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        // cdp.ui.listview は cdp.core に依存しないため、独自にglobal を提供する
        UI.global = CDP.global || window;
        /**
         * Backbone.View の新規合成
         *
         * @param base    {Backbone.View}                 [in] prototype chain 最下位の View クラス
         * @param derives {Backbone.View|Backbone.View[]} [in] 派生されるの View クラス
         * @return {Backbone.View|Backbone.View[]} 新規に生成された View のコンストラクタ
         */
        function composeViews(base, derives) {
            var _composed = base;
            var _derives = (derives instanceof Array ? derives : [derives]);
            _derives.forEach(function (derive) {
                var seed = {};
                _.extendOwn(seed, derive.prototype);
                delete seed.constructor;
                _composed = _composed.extend(seed);
            });
            return _composed;
        }
        UI.composeViews = composeViews;
        /**
         * Backbone.View の合成
         * prototype chain を作る合成
         *
         * @param derived {Backbone.View}                 [in] prototype chain 最上位の View クラス
         * @param bases   {Backbone.View|Backbone.View[]} [in] 合成元のView クラス
         */
        function deriveViews(derived, bases) {
            var _composed;
            var _bases = (bases instanceof Array ? bases : [bases]);
            if (2 <= _bases.length) {
                _composed = composeViews(_bases[0], _bases.slice(1));
            }
            else {
                _composed = _bases[0];
            }
            derived = composeViews(_composed, derived);
        }
        UI.deriveViews = deriveViews;
        /**
         * Backbone.View の合成
         * prototype chain を作らない合成
         *
         * @param derived {Backbone.View}                 [in] 元となる View クラス
         * @param bases   {Backbone.View|Backbone.View[]} [in] 合成元のView クラス
         */
        function mixinViews(derived, bases) {
            var _bases = (bases instanceof Array ? bases : [bases]);
            _bases.forEach(function (base) {
                Object.getOwnPropertyNames(base.prototype).forEach(function (name) {
                    derived.prototype[name] = base.prototype[name];
                });
            });
        }
        UI.mixinViews = mixinViews;
        //___________________________________________________________________________________________________________________//
        /**
         * @class _ListViewUtils
         * @brief 内部で使用する便利関数
         *        Tools からの最低限の流用
         */
        var _ListViewUtils;
        (function (_ListViewUtils) {
            /**
             * css の vender 拡張 prefix を返す
             *
             * @return {Array} prefix
             */
            _ListViewUtils.cssPrefixes = ["-webkit-", "-moz-", "-ms-", "-o-", ""];
            /**
             * css の matrix の値を取得.
             *
             * @param element {jQuery} [in] 対象の jQuery オブジェクト
             * @param type    {String} [in] matrix type string [translateX | translateY | scaleX | scaleY]
             * @return {Number} value
             */
            _ListViewUtils.getCssMatrixValue = function (element, type) {
                var transX = 0;
                var transY = 0;
                var scaleX = 0;
                var scaleY = 0;
                for (var i = 0; i < _ListViewUtils.cssPrefixes.length; i++) {
                    var matrix = $(element).css(_ListViewUtils.cssPrefixes[i] + "transform");
                    if (matrix) {
                        var is3dMatrix = matrix.indexOf("3d") !== -1 ? true : false;
                        matrix = matrix.replace("matrix3d", "").replace("matrix", "").replace(/[^\d.,-]/g, "");
                        var arr = matrix.split(",");
                        transX = Number(arr[is3dMatrix ? 12 : 4]);
                        transY = Number(arr[is3dMatrix ? 13 : 5]);
                        scaleX = Number(arr[0]);
                        scaleY = Number(arr[is3dMatrix ? 5 : 3]);
                        break;
                    }
                }
                switch (type) {
                    case "translateX":
                        return isNaN(transX) ? 0 : transX;
                    case "translateY":
                        return isNaN(transY) ? 0 : transY;
                    case "scaleX":
                        return isNaN(scaleX) ? 1 : scaleX;
                    case "scaleY":
                        return isNaN(scaleY) ? 1 : scaleY;
                    default:
                        return 0;
                }
            };
            /**
             * "transitionend" のイベント名配列を返す
             *
             * @return {Array} transitionend イベント名
             */
            _ListViewUtils.transitionEnd = "transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd";
            /**
             * transition 設定
             *
             * @private
             * @param {Object} element
             */
            _ListViewUtils.setTransformsTransitions = function (element, prop, msec, timingFunction) {
                var $element = $(element);
                var transitions = {};
                var second = (msec / 1000) + "s";
                var animation = " " + second + " " + timingFunction;
                var transform = ", transform" + animation;
                for (var i = 0; i < _ListViewUtils.cssPrefixes.length; i++) {
                    transitions[_ListViewUtils.cssPrefixes[i] + "transition"] = prop + animation + transform;
                }
                $element.css(transitions);
            };
            /**
             * transition 設定の削除
             *
             * @private
             * @param {Object} element
             */
            _ListViewUtils.clearTransitions = function (element) {
                var $element = $(element);
                $element.off(_ListViewUtils.transitionEnd);
                var transitions = {};
                for (var i = 0; i < _ListViewUtils.cssPrefixes.length; i++) {
                    transitions[_ListViewUtils.cssPrefixes[i] + "transition"] = "";
                }
                $element.css(transitions);
            };
            /**
             * Math.abs よりも高速な abs
             */
            _ListViewUtils.abs = function (x) {
                return x >= 0 ? x : -x;
            };
            /**
             * Math.max よりも高速な max
             */
            _ListViewUtils.max = function (lhs, rhs) {
                return lhs >= rhs ? lhs : rhs;
            };
        })(_ListViewUtils = UI._ListViewUtils || (UI._ListViewUtils = {}));
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));

var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var TAG = "[CDP.UI.StatusManager] ";
        /**
         * @class StatusManager
         * @brief UI 用状態管理クラス
         *        StatusManager のインスタンスごとに任意の状態管理ができる
         *
         */
        var StatusManager = (function () {
            function StatusManager() {
                this._status = {}; //< statusScope() に使用される状態管理オブジェクト
            }
            ///////////////////////////////////////////////////////////////////////
            // Implements: IStatusManager
            // 状態変数の参照カウントのインクリメント
            StatusManager.prototype.statusAddRef = function (status) {
                if (!this._status[status]) {
                    this._status[status] = 1;
                }
                else {
                    this._status[status]++;
                }
                return this._status[status];
            };
            // 状態変数の参照カウントのデクリメント
            StatusManager.prototype.statusRelease = function (status) {
                var retval;
                if (!this._status[status]) {
                    retval = 0;
                }
                else {
                    this._status[status]--;
                    retval = this._status[status];
                    if (0 === retval) {
                        delete this._status[status];
                    }
                }
                return retval;
            };
            // 処理スコープ毎に状態変数を設定
            StatusManager.prototype.statusScope = function (status, callback) {
                var _this = this;
                this.statusAddRef(status);
                var promise = callback();
                if (!promise) {
                    this.statusRelease(status);
                }
                else {
                    promise.always(function () {
                        _this.statusRelease(status);
                    });
                }
            };
            // 指定した状態中であるか確認
            StatusManager.prototype.isStatusIn = function (status) {
                return !!this._status[status];
            };
            return StatusManager;
        }());
        UI.StatusManager = StatusManager;
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));

var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var TAG = "[CDP.UI.PageProfile] ";
        /**
         * @class PageProfile
         * @brief 1 ページに関するプロファイルクラス
         *        framework が使用する
         *        本クラスでは直接 DOM を操作してはいけない
         */
        var PageProfile = (function () {
            function PageProfile() {
                this._index = 0; //< page index
                this._offset = 0; //< page の Top からのオフセット
                this._height = 0; //< page の高さ
                this._lines = []; //< page 内で管理される LineProfile
                this._status = "inactive"; //< page の状態 [ inactive | hidden | active ]
            }
            ///////////////////////////////////////////////////////////////////////
            // public methods
            // 有効化
            PageProfile.prototype.activate = function () {
                if ("active" !== this._status) {
                    this._lines.forEach(function (line) {
                        line.activate();
                    });
                }
                this._status = "active";
            };
            // 無可視化
            PageProfile.prototype.hide = function () {
                if ("hidden" !== this._status) {
                    this._lines.forEach(function (line) {
                        line.hide();
                    });
                }
                this._status = "hidden";
            };
            // 無効化
            PageProfile.prototype.inactivate = function () {
                if ("inactive" !== this._status) {
                    this._lines.forEach(function (line) {
                        line.inactivate();
                    });
                }
                this._status = "inactive";
            };
            // LineProfile を設定
            PageProfile.prototype.push = function (line) {
                this._lines.push(line);
                this._height += line.height;
            };
            // 配下の LineProfile すべてが有効でない場合、Page ステータスを無効にする
            PageProfile.prototype.normalize = function () {
                var enableAll = _.every(this._lines, function (line) {
                    return line.isActive();
                });
                if (!enableAll) {
                    this._status = "inactive";
                }
            };
            // LineProfile を取得
            PageProfile.prototype.getLineProfile = function (index) {
                if (0 <= index && index < this._lines.length) {
                    return this._lines[index];
                }
                else {
                    return null;
                }
            };
            // 最初の LineProfile を取得
            PageProfile.prototype.getLineProfileFirst = function () {
                return this.getLineProfile(0);
            };
            // 最後の LineProfile を取得
            PageProfile.prototype.getLineProfileLast = function () {
                return this.getLineProfile(this._lines.length - 1);
            };
            Object.defineProperty(PageProfile.prototype, "index", {
                ///////////////////////////////////////////////////////////////////////
                // getter/setter methods
                // getter: page index
                get: function () {
                    return this._index;
                },
                // setter: page index
                set: function (index) {
                    this._index = index;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(PageProfile.prototype, "offset", {
                // getter: page offset
                get: function () {
                    return this._offset;
                },
                // setter: page offset
                set: function (offset) {
                    this._offset = offset;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(PageProfile.prototype, "height", {
                // getter: 実際にページに割り当てられている高さ
                get: function () {
                    return this._height;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(PageProfile.prototype, "status", {
                // getter: 状態取得
                get: function () {
                    return this._status;
                },
                enumerable: true,
                configurable: true
            });
            return PageProfile;
        }());
        UI.PageProfile = PageProfile;
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));


var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var _Utils = CDP.UI._ListViewUtils;
        var TAG = "[CDP.UI.ScrollerElement] ";
        /**
         * @class ScrollerElement
         * @brief HTMLElement の Scroller クラス
         */
        var ScrollerElement = (function () {
            function ScrollerElement(element, options) {
                this._$target = null;
                this._$scrollMap = null;
                this._listviewOptions = null;
                this._$target = $(element);
                this._listviewOptions = options;
            }
            // Scroller の型を取得
            ScrollerElement.prototype.getType = function () {
                return ScrollerElement.TYPE;
            };
            // position 取得
            ScrollerElement.prototype.getPos = function () {
                return this._$target.scrollTop();
            };
            // position の最大値を取得
            ScrollerElement.prototype.getPosMax = function () {
                if (null == this._$scrollMap) {
                    this._$scrollMap = this._$target.children().first();
                }
                return _Utils.max(this._$scrollMap.height() - this._$target.height(), 0);
            };
            // イベント登録
            ScrollerElement.prototype.on = function (type, func) {
                switch (type) {
                    case "scroll":
                        this._$target.on("scroll", func);
                        break;
                    case "scrollstop":
                        this._$target.on("scrollstop", func);
                        break;
                    default:
                        console.warn(TAG + "unsupported type: " + type);
                        break;
                }
            };
            // イベント登録解除
            ScrollerElement.prototype.off = function (type, func) {
                switch (type) {
                    case "scroll":
                        this._$target.off("scroll", func);
                        break;
                    case "scrollstop":
                        this._$target.off("scrollstop", func);
                        break;
                    default:
                        console.warn(TAG + "unsupported type: " + type);
                        break;
                }
            };
            // スクロール位置を指定
            ScrollerElement.prototype.scrollTo = function (pos, animate, time) {
                if (!this._listviewOptions.enableAnimation || !animate) {
                    this._$target.scrollTop(pos);
                }
                else {
                    if (null == time) {
                        time = this._listviewOptions.animationDuration;
                    }
                    this._$target.animate({
                        scrollTop: pos
                    }, time);
                }
            };
            // Scroller の状態更新
            ScrollerElement.prototype.update = function () {
                // noop.
            };
            // Scroller の破棄
            ScrollerElement.prototype.destroy = function () {
                this._$scrollMap = null;
                if (this._$target) {
                    this._$target.off();
                    this._$target = null;
                }
            };
            Object.defineProperty(ScrollerElement, "TYPE", {
                // タイプ定義
                get: function () {
                    return "element-overflow";
                },
                enumerable: true,
                configurable: true
            });
            // factory 取得
            ScrollerElement.getFactory = function () {
                var factory = function (element, options) {
                    return new ScrollerElement(element, options);
                };
                // set type signature.
                factory.type = ScrollerElement.TYPE;
                return factory;
            };
            return ScrollerElement;
        }());
        UI.ScrollerElement = ScrollerElement;
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));


var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var _Utils = CDP.UI._ListViewUtils;
        var TAG = "[CDP.UI.ScrollerNative] ";
        /**
         * @class ScrollerNative
         * @brief Browser Native の Scroller クラス
         */
        var ScrollerNative = (function () {
            // constructor
            function ScrollerNative(options) {
                this._$body = null;
                this._$target = null;
                this._$scrollMap = null;
                this._listviewOptions = null;
                this._$target = $(document);
                this._$body = $("body");
                this._listviewOptions = options;
            }
            // Scroller の型を取得
            ScrollerNative.prototype.getType = function () {
                return ScrollerNative.TYPE;
            };
            // position 取得
            ScrollerNative.prototype.getPos = function () {
                return this._$target.scrollTop();
            };
            // position の最大値を取得
            ScrollerNative.prototype.getPosMax = function () {
                return _Utils.max(this._$target.height() - window.innerHeight, 0);
            };
            // イベント登録
            ScrollerNative.prototype.on = function (type, func) {
                switch (type) {
                    case "scroll":
                        this._$target.on("scroll", func);
                        break;
                    case "scrollstop":
                        $(window).on("scrollstop", func);
                        break;
                    default:
                        console.warn(TAG + "unsupported type: " + type);
                        break;
                }
            };
            // イベント登録解除
            ScrollerNative.prototype.off = function (type, func) {
                switch (type) {
                    case "scroll":
                        this._$target.off("scroll", func);
                        break;
                    case "scrollstop":
                        $(window).off("scrollstop", func);
                        break;
                    default:
                        console.warn(TAG + "unsupported type: " + type);
                        break;
                }
            };
            // スクロール位置を指定
            ScrollerNative.prototype.scrollTo = function (pos, animate, time) {
                if (!this._listviewOptions.enableAnimation || !animate) {
                    this._$body.scrollTop(pos);
                }
                else {
                    if (null == time) {
                        time = this._listviewOptions.animationDuration;
                    }
                    this._$body.animate({
                        scrollTop: pos
                    }, time);
                }
            };
            // Scroller の状態更新
            ScrollerNative.prototype.update = function () {
                // noop.
            };
            // Scroller の破棄
            ScrollerNative.prototype.destroy = function () {
                this._$scrollMap = null;
                this._$target = null;
            };
            Object.defineProperty(ScrollerNative, "TYPE", {
                // タイプ定義
                get: function () {
                    return "native-scroll";
                },
                enumerable: true,
                configurable: true
            });
            // factory 取得
            ScrollerNative.getFactory = function () {
                var factory = function (element, options) {
                    return new ScrollerNative(options);
                };
                // set type signature.
                factory.type = ScrollerNative.TYPE;
                return factory;
            };
            return ScrollerNative;
        }());
        UI.ScrollerNative = ScrollerNative;
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));



var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var _Config = CDP.UI.ListViewGlobalConfig;
        var _Utils = CDP.UI._ListViewUtils;
        var TAG = "[CDP.UI.ScrollerIScroll] ";
        /**
         * @class ScrollerIScroll
         * @brief iScroll を使用した Scroller クラス
         */
        var ScrollerIScroll = (function () {
            function ScrollerIScroll($owner, element, iscrollOptions, listviewOptions) {
                this._$owner = null;
                this._iscroll = null;
                this._refreshTimerId = null;
                this._$wrapper = null;
                this._$scroller = null;
                this._listviewOptions = null;
                if (null != UI.global.IScroll) {
                    this._$owner = $owner;
                    this._iscroll = new IScroll(element, iscrollOptions);
                    this._$wrapper = $(this._iscroll.wrapper);
                    this._$scroller = $(this._iscroll.scroller);
                    this._listviewOptions = listviewOptions;
                }
                else {
                    console.error(TAG + "iscroll module doesn't load.");
                }
            }
            // Scroller の型を取得
            ScrollerIScroll.prototype.getType = function () {
                return ScrollerIScroll.TYPE;
            };
            // position 取得
            ScrollerIScroll.prototype.getPos = function () {
                var pos = this._iscroll.getComputedPosition().y;
                if (_.isNaN(pos)) {
                    pos = 0;
                }
                else {
                    pos = -pos;
                }
                return pos;
            };
            // position の最大値を取得
            ScrollerIScroll.prototype.getPosMax = function () {
                return _Utils.max(-this._iscroll.maxScrollY, 0);
            };
            // イベント登録
            ScrollerIScroll.prototype.on = function (type, func) {
                switch (type) {
                    case "scroll":
                        this._iscroll.on("scroll", func);
                        break;
                    case "scrollstop":
                        this._iscroll.on("scrollEnd", func);
                        break;
                    default:
                        console.warn(TAG + "unsupported type: " + type);
                        break;
                }
            };
            // イベント登録解除
            ScrollerIScroll.prototype.off = function (type, func) {
                switch (type) {
                    case "scroll":
                        this._iscroll.off("scroll", func);
                        break;
                    case "scrollstop":
                        this._iscroll.on("scrollEnd", func);
                        break;
                    default:
                        console.warn(TAG + "unsupported type: " + type);
                        break;
                }
            };
            // スクロール位置を指定
            ScrollerIScroll.prototype.scrollTo = function (pos, animate, time) {
                time = 0;
                if (this._listviewOptions.enableAnimation && animate) {
                    time = time || this._listviewOptions.animationDuration;
                }
                this._iscroll.scrollTo(0, -pos, time);
            };
            // Scroller の状態更新
            ScrollerIScroll.prototype.update = function () {
                var _this = this;
                if (this._$owner) {
                    // update wrapper
                    (function () {
                        var ownerHeight = _this._$owner.height();
                        if (ownerHeight !== _this._$wrapper.height()) {
                            _this._$wrapper.height(ownerHeight);
                        }
                    })();
                    if (null != this._refreshTimerId) {
                        clearTimeout(this._refreshTimerId);
                    }
                    var proc_1 = function () {
                        if (_this._$scroller && _this._$scroller.height() !== _this._iscroll.scrollerHeight) {
                            _this._iscroll.refresh();
                            _this._refreshTimerId = setTimeout(proc_1, _this._listviewOptions.scrollMapRefreshInterval);
                        }
                        else {
                            _this._refreshTimerId = null;
                        }
                    };
                    this._iscroll.refresh();
                    this._refreshTimerId = setTimeout(proc_1, this._listviewOptions.scrollMapRefreshInterval);
                }
            };
            // Scroller の破棄
            ScrollerIScroll.prototype.destroy = function () {
                this._$scroller = null;
                this._$wrapper = null;
                this._iscroll.destroy();
                this._$owner = null;
            };
            Object.defineProperty(ScrollerIScroll, "TYPE", {
                // タイプ定義
                get: function () {
                    return "iscroll";
                },
                enumerable: true,
                configurable: true
            });
            // factory 取得
            ScrollerIScroll.getFactory = function (options) {
                var defaultOpt = {
                    scrollX: false,
                    bounce: false,
                    tap: true,
                    click: true,
                    mouseWheel: true,
                    scrollbars: true,
                    interactiveScrollbars: true,
                    shrinkScrollbars: "scale",
                    fadeScrollbars: true,
                    preventDefault: false,
                    disablePointer: true,
                    disableMouse: false,
                    disableTouch: false,
                    probeType: 2,
                };
                var iscrollOptions = $.extend({}, defaultOpt, options);
                var factory = function (element, listviewOptions) {
                    var $owner = $(element);
                    var $map = $owner.find(_Config.SCROLL_MAP_SELECTOR);
                    var $wrapper = $("<div class='" + _Config.WRAPPER_CLASS + "'></div>")
                        .css({
                        position: "absolute",
                        width: "100%",
                        height: "100%",
                        overflow: "hidden",
                    });
                    $map.wrap($wrapper);
                    return new ScrollerIScroll($owner, _Config.WRAPPER_SELECTOR, iscrollOptions, listviewOptions);
                };
                // set type signature.
                factory.type = ScrollerIScroll.TYPE;
                return factory;
            };
            return ScrollerIScroll;
        }());
        UI.ScrollerIScroll = ScrollerIScroll;
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));

var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var TAG = "[CDP.UI.ListItemView] ";
        /**
         * @class ListItemView
         * @brief ListView が扱う ListItem コンテナクラス
         */
        var ListItemView = (function (_super) {
            __extends(ListItemView, _super);
            /**
             * constructor
             */
            function ListItemView(options) {
                var _this = _super.call(this, options) || this;
                _this._owner = null;
                _this._lineProfile = null;
                _this._owner = options.owner;
                if (options.$el) {
                    var delegates = _this.events ? true : false;
                    _this.setElement(options.$el, delegates);
                }
                _this._lineProfile = options.lineProfile;
                return _this;
            }
            ///////////////////////////////////////////////////////////////////////
            // Implements: ListItemView
            // 描画: framework から呼び出されるため、オーバーライド必須
            ListItemView.prototype.render = function () {
                console.warn(TAG + "need override 'render()' method.");
                return this;
            };
            // 自身の Line インデックスを取得
            ListItemView.prototype.getIndex = function () {
                return this._lineProfile.index;
            };
            // 自身に指定された高さを取得
            ListItemView.prototype.getSpecifiedHeight = function () {
                return this._lineProfile.height;
            };
            // child node が存在するか判定
            ListItemView.prototype.hasChildNode = function () {
                if (!this.$el) {
                    return false;
                }
                else {
                    return 0 < this.$el.children().length;
                }
            };
            /**
             * 高さを更新
             *
             * @param newHeight {Number}              [in] 新しい高さ
             * @param options   {UpdateHeightOptions} [in] line の高さ更新時に影響するすべての LineProfile の再計算を行う場合は { reflectAll: true }
             * @return {ListItemView} インスタンス
             */
            ListItemView.prototype.updateHeight = function (newHeight, options) {
                if (this.$el) {
                    if (this.getSpecifiedHeight() !== newHeight) {
                        this._lineProfile.updateHeight(newHeight, options);
                        this.$el.height(newHeight);
                    }
                }
                return this;
            };
            ///////////////////////////////////////////////////////////////////////
            // Implements: IComposableView
            /**
             * すでに定義された Backbone.View を基底クラスに設定し、extend を実行する。
             *
             * @param derives         {Backbone.View|Backbone.View[]} [in] 合成元の View クラス
             * @param properties      {Object}                        [in] prototype プロパティ
             * @param classProperties {Object}                        [in] static プロパティ
             * @return {Backbone.View|Backbone.View[]} 新規に生成された View のコンストラクタ
             */
            ListItemView.compose = function (derives, properties, classProperties) {
                var composed = UI.composeViews(ListItemView, derives);
                return composed.extend(properties, classProperties);
            };
            ///////////////////////////////////////////////////////////////////////
            // Override: Backbone.View
            // 開放
            ListItemView.prototype.remove = function () {
                // xperia AX Jelly Bean (4.1.2)にて、メモリーリークを軽減させる効果
                this.$el.find("figure").css("background-image", "none");
                // this.$el は再利用するため破棄しない
                this.$el.children().remove();
                this.$el.off();
                this.$el = null;
                this.stopListening();
                this._lineProfile = null;
                return this;
            };
            Object.defineProperty(ListItemView.prototype, "owner", {
                ///////////////////////////////////////////////////////////////////////
                // short cut methods
                // Owner 取得
                get: function () {
                    return this._owner;
                },
                enumerable: true,
                configurable: true
            });
            return ListItemView;
        }(Backbone.View));
        UI.ListItemView = ListItemView;
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));


/* tslint:disable:no-bitwise no-unused-expression */
/* jshint -W030 */ // for "Expected an assignment or function call and instead saw an expression"
var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var _Config = CDP.UI.ListViewGlobalConfig;
        var _Utils = CDP.UI._ListViewUtils;
        var TAG = "[CDP.UI.ScrollManager] ";
        /**
         * @class ScrollManager
         * @brief メモリ管理を行うスクロール処理のコアロジック実装クラス
         *        本クラスは IListView インターフェイスを持ち DOM にアクセスするが、Backbone.View を継承しない
         */
        var ScrollManager = (function () {
            /**
             * constructor
             *
             * @param _$root  {JQuery} [in] 管理対象のルートエレメント
             * @param options {ListViewOptions} [in] オプション
             */
            function ScrollManager(options) {
                var _this = this;
                this._$root = null; //< Scroll 対象のルートオブジェクト
                this._$map = null; //< Scroll Map element を格納
                this._mapHeight = 0; //< Scroll Map の高さを格納 (_$map の状態に依存させない)
                this._scroller = null; //< Scroll に使用する IScroller インスタンス
                this._settings = null; //< ScrollManager オプションを格納
                this._active = true; //< UI 表示中は true に指定
                this._scrollEventHandler = null; //< Scroll Event Handler
                this._scrollStopEventHandler = null; //< Scroll Stop Event Handler
                this._baseHeight = 0; //< 高さの基準値
                this._lines = []; //< 管理下にある LineProfile 配列
                this._pages = []; //< 管理下にある PageProfile 配列
                // 最新の表示領域情報を格納 (Scroll 中の更新処理に使用)
                this._lastActivePageContext = {
                    index: 0,
                    from: 0,
                    to: 0,
                    pos: 0,
                };
                this._backup = {}; //< データの backup 領域. key と _lines を格納。派生クラスで拡張可能。
                // ListViewOptions 既定値
                var defOptions = {
                    scrollerFactory: UI.ScrollerNative.getFactory(),
                    enableHiddenPage: false,
                    enableTransformOffset: false,
                    scrollMapRefreshInterval: 200,
                    scrollRefreshDistance: 200,
                    pagePrepareCount: 3,
                    pagePreloadCount: 1,
                    enableAnimation: true,
                    animationDuration: 0,
                    baseDepth: "auto",
                    itemTagName: "div",
                    removeItemWithTransition: true,
                    useDummyInactiveScrollMap: false,
                };
                // 設定格納
                this._settings = $.extend({}, defOptions, options);
                // スクロールイベント
                this._scrollEventHandler = function (event) {
                    _this.onScroll(_this._scroller.getPos());
                };
                // スクロール停止イベント
                this._scrollStopEventHandler = function (event) {
                    _this.onScrollStop(_this._scroller.getPos());
                };
            }
            ///////////////////////////////////////////////////////////////////////
            // public method
            // 内部オブジェクトの初期化
            ScrollManager.prototype.initialize = function ($root, height) {
                // 既に構築されていた場合は破棄
                if (this._$root) {
                    this.destroy();
                }
                this._$root = $root;
                this._$map = $root.hasClass(_Config.SCROLL_MAP_CLASS) ? $root : $root.find(_Config.SCROLL_MAP_SELECTOR);
                // _$map が無い場合は初期化しない
                if (this._$map.length <= 0) {
                    this._$root = null;
                    return false;
                }
                this._scroller = this.createScroller();
                this.setBaseHeight(height);
                this.setScrollerCondition();
                return true;
            };
            // 内部オブジェクトの破棄
            ScrollManager.prototype.destroy = function () {
                if (this._scroller) {
                    this.resetScrollerCondition();
                    this._scroller.destroy();
                    this._scroller = null;
                }
                this.release();
                this._$map = null;
                this._$root = null;
            };
            // ページの基準値を取得
            ScrollManager.prototype.setBaseHeight = function (height) {
                this._baseHeight = height;
                if (this._baseHeight <= 0) {
                    console.warn(TAG + "invalid base height: " + this._baseHeight);
                }
                if (this._scroller) {
                    this._scroller.update();
                }
            };
            // active 状態設定
            ScrollManager.prototype.setActiveState = function (active) {
                this._active = active;
                this.treatScrollPosition();
            };
            // active 状態判定
            ScrollManager.prototype.isActive = function () {
                return this._active;
            };
            // scroller の種類を取得
            ScrollManager.prototype.getScrollerType = function () {
                return this._settings.scrollerFactory.type;
            };
            /**
             * 状態に応じたスクロール位置の保存/復元
             * cdp.ui.fs.js: PageTabListView が実験的に使用
             * TODO: ※iscroll は未対応
             */
            ScrollManager.prototype.treatScrollPosition = function () {
                var _this = this;
                var i;
                var transform = {};
                var updateOffset = function ($target, offset) {
                    offset = offset || (_this._scroller.getPos() - _this._lastActivePageContext.pos);
                    if (_Utils.getCssMatrixValue($target, "translateY") !== offset) {
                        for (i = 0; i < _Utils.cssPrefixes.length; i++) {
                            transform[_Utils.cssPrefixes[i] + "transform"] = "translate3d(0px," + offset + "px,0px)";
                        }
                        $target.css(transform);
                        return $target;
                    }
                };
                var clearOffset = function ($target) {
                    for (i = 0; i < _Utils.cssPrefixes.length; i++) {
                        transform[_Utils.cssPrefixes[i] + "transform"] = "";
                    }
                    $target.css(transform);
                    return $target;
                };
                if (this._active) {
                    // 以下のスコープの処理に対して画面更新を1回にできないため、JB, ICS ではちらつきが発生する。Kitkat 以降は良好。
                    (function () {
                        if (_this._scroller) {
                            _this._scroller.scrollTo(_this._lastActivePageContext.pos, false, 0);
                        }
                        clearOffset(_this._$map).css("display", "block");
                    })();
                    if (this._settings.useDummyInactiveScrollMap) {
                        this.prepareInactiveMap().remove();
                    }
                }
                else {
                    if (this._settings.useDummyInactiveScrollMap) {
                        updateOffset(this.prepareInactiveMap());
                    }
                    else {
                        updateOffset(this._$map);
                    }
                }
            };
            // inactive 用 Map の生成
            ScrollManager.prototype.prepareInactiveMap = function () {
                var $parent = this._$map.parent();
                var $inactiveMap = $parent.find(_Config.INACTIVE_CLASS_SELECTOR);
                if ($inactiveMap.length <= 0) {
                    var currentPageIndex_1 = this.getPageIndex();
                    var $listItemViews = this._$map.clone().children().filter(function (index, element) {
                        var pageIndex = ~~$(element).attr(_Config.DATA_PAGE_INDEX);
                        if (currentPageIndex_1 - 1 <= pageIndex || pageIndex <= currentPageIndex_1 + 1) {
                            return true;
                        }
                        else {
                            return false;
                        }
                    });
                    $inactiveMap = $("<section class='" + _Config.SCROLL_MAP_CLASS + " " + _Config.INACTIVE_CLASS + "'></section>")
                        .append($listItemViews)
                        .height(this._mapHeight);
                    $parent.append($inactiveMap);
                    this._$map.css("display", "none");
                }
                return $inactiveMap;
            };
            ///////////////////////////////////////////////////////////////////////
            // Implements: IListView プロファイル管理
            // 初期化済みか判定
            ScrollManager.prototype.isInitialized = function () {
                return !!this._$root;
            };
            // プロパティを指定して、LineProfile を管理
            ScrollManager.prototype.addItem = function (height, initializer, info, insertTo) {
                this._addLine(new UI.LineProfile(this, Math.floor(height), initializer, info), insertTo);
            };
            // プロパティを指定して、LineProfile を管理. 登録 framework が使用する
            ScrollManager.prototype._addLine = function (_line, insertTo) {
                var i, n;
                var deltaHeight = 0;
                var lines = (_line instanceof Array) ? _line : [_line];
                var addTail = false;
                if (null == insertTo) {
                    insertTo = this._lines.length;
                }
                if (insertTo === this._lines.length) {
                    addTail = true;
                }
                // scroll map の更新
                for (i = 0, n = lines.length; i < n; i++) {
                    deltaHeight += lines[i].height;
                }
                this.updateScrollMapHeight(deltaHeight);
                // 挿入
                for (i = lines.length - 1; i >= 0; i--) {
                    this._lines.splice(insertTo, 0, lines[i]);
                }
                // page 設定の解除
                if (!addTail) {
                    if (0 === insertTo) {
                        this.clearPage();
                    }
                    else if (null != this._lines[insertTo - 1].pageIndex) {
                        this.clearPage(this._lines[insertTo - 1].pageIndex);
                    }
                }
                // offset の再計算
                this.updateProfiles(insertTo);
            };
            ScrollManager.prototype.removeItem = function (index, arg2, arg3) {
                if (index instanceof Array) {
                    this._removeLines(index, arg2);
                }
                else {
                    this._removeLine(index, arg2, arg3);
                }
            };
            // 指定した LineProfile を削除: 連続 index 版
            ScrollManager.prototype._removeLine = function (index, size, delay) {
                var _this = this;
                if (null == size) {
                    size = 1;
                }
                if (index < 0 || this._lines.length < index + size) {
                    console.error(TAG + "logic error. removeItem(), invalid index: " + index);
                    return;
                }
                delay = (null != delay) ? delay : 0;
                var delta = 0;
                var removed = [];
                var mapTransition = false;
                // 削除候補と変化量の算出
                (function () {
                    var line;
                    for (var i = 0; i < size; i++) {
                        line = _this._lines[index + i];
                        delta += line.height;
                        // 削除要素の z-index の初期化
                        line.resetDepth();
                        removed.push(line);
                    }
                    // 自動設定・削除遅延時間が設定されかつ、スクロールポジションに変更がある場合は transition 設定
                    if (_this._settings.removeItemWithTransition && (0 < delay)) {
                        var current = _this.getScrollPos();
                        var posMax = _this.getScrollPosMax() - delta;
                        mapTransition = (posMax < current);
                    }
                })();
                // 更新
                (function () {
                    // transition 設定
                    if (mapTransition) {
                        _this.setupScrollMapTransition(_this._$map, delay);
                    }
                    // page 設定の解除
                    if (null != _this._lines[index].pageIndex) {
                        _this.clearPage(_this._lines[index].pageIndex);
                    }
                    // スクロール領域の更新
                    _this.updateScrollMapHeight(-delta);
                    // 配列から削除
                    _this._lines.splice(index, size);
                    // offset の再計算
                    _this.updateProfiles(index);
                    // 遅延削除
                    setTimeout(function () {
                        removed.forEach(function (line) {
                            line.inactivate();
                        });
                    }, delay);
                })();
            };
            // 指定した LineProfile を削除: random access 版
            ScrollManager.prototype._removeLines = function (indexes, delay) {
                var _this = this;
                delay = (null != delay) ? delay : 0;
                for (var i = 0, n = indexes.length; i < n; i++) {
                    if (i < 0 || this._lines.length < i) {
                        console.error(TAG + "logic error. removeItem(), invalid index: " + i);
                        return;
                    }
                }
                var delta = 0;
                var removed = [];
                var mapTransition = false;
                // 削除候補と変化量の算出
                (function () {
                    var line;
                    indexes.forEach(function (index) {
                        line = _this._lines[index];
                        delta += line.height;
                        // 削除要素の z-index の初期化
                        line.resetDepth();
                        removed.push(line);
                    });
                    // 自動設定・削除遅延時間が設定されかつ、スクロールポジションに変更がある場合は transition 設定
                    if (_this._settings.removeItemWithTransition && (0 < delay)) {
                        var current = _this.getScrollPos();
                        var posMax = _this.getScrollPosMax() - delta;
                        mapTransition = (posMax < current);
                    }
                })();
                // 更新
                (function () {
                    // transition 設定
                    if (mapTransition) {
                        _this.setupScrollMapTransition(_this._$map, delay);
                    }
                    indexes.forEach(function (index) {
                        // page 設定の解除
                        if (null != _this._lines[index].pageIndex) {
                            _this.clearPage(_this._lines[index].pageIndex);
                        }
                        // 配列から削除
                        _this._lines.splice(index, 1);
                        // offset の再計算
                        _this.updateProfiles(index);
                    });
                    // スクロール領域の更新
                    _this.updateScrollMapHeight(-delta);
                    // 遅延削除
                    setTimeout(function () {
                        removed.forEach(function (line) {
                            line.inactivate();
                        });
                    }, delay);
                })();
            };
            // scroll map のトランジション設定
            ScrollManager.prototype.setupScrollMapTransition = function ($map, delay) {
                var transitionEndHandler = function (event) {
                    $map.off(_Utils.transitionEnd);
                    _Utils.clearTransitions($map);
                };
                this._$map.on(_Utils.transitionEnd, transitionEndHandler);
                _Utils.setTransformsTransitions($map, "height", delay, "ease");
            };
            ScrollManager.prototype.getItemInfo = function (target) {
                var index;
                var parser = function ($target) {
                    if ($target.hasClass(_Config.LISTITEM_BASE_CLASS)) {
                        return ~~$target.attr(_Config.DATA_CONTAINER_INDEX);
                    }
                    else if ($target.hasClass(_Config.SCROLL_MAP_CLASS) || $target.length <= 0) {
                        console.warn(TAG + "cannot ditect line from event object.");
                        return null;
                    }
                    else {
                        return parser($target.parent());
                    }
                };
                if (target instanceof $.Event) {
                    index = parser($(target.currentTarget));
                }
                else if (typeof target === "number") {
                    index = target;
                }
                if (null == index) {
                    console.error(TAG + "logic error. unsupported arg type. type: " + typeof target);
                    return null;
                }
                else if (index < 0 || this._lines.length <= index) {
                    console.error(TAG + "logic error. invalid range. index: " + index);
                    return null;
                }
                return this._lines[index].info;
            };
            // アクティブページを更新
            ScrollManager.prototype.refresh = function () {
                var _this = this;
                var targets = {};
                var searchCount = this._settings.pagePrepareCount + this._settings.pagePreloadCount;
                var currentPageIndex = this.getPageIndex();
                var highPriorityIndex = [];
                var oldExsistPage = _.filter(this._pages, function (page) {
                    return "inactive" !== page.status;
                });
                var changeState = function (index) {
                    if (index === currentPageIndex) {
                        targets[index] = "activate";
                        highPriorityIndex.push(index);
                    }
                    else if (_Utils.abs(currentPageIndex - index) <= _this._settings.pagePrepareCount) {
                        targets[index] = "activate";
                    }
                    else {
                        if (_this._settings.enableHiddenPage) {
                            targets[index] = "hide";
                        }
                        else {
                            targets[index] = "activate";
                        }
                    }
                    // current page の 前後は high priority にする
                    if (currentPageIndex + 1 === index || currentPageIndex - 1 === index) {
                        highPriorityIndex.push(index);
                    }
                };
                // 対象無し
                if (this._lines.length <= 0) {
                    return;
                }
                (function () {
                    var i = 0;
                    var pageIndex = 0;
                    var overflowPrev = 0, overflowNext = 0;
                    var beginIndex = currentPageIndex - searchCount;
                    var endIndex = currentPageIndex + searchCount;
                    for (pageIndex = beginIndex; pageIndex <= endIndex; pageIndex++) {
                        if (pageIndex < 0) {
                            overflowPrev++;
                            continue;
                        }
                        if (_this._pages.length <= pageIndex) {
                            overflowNext++;
                            continue;
                        }
                        changeState(pageIndex);
                    }
                    if (0 < overflowPrev) {
                        for (i = 0, pageIndex = currentPageIndex + searchCount + 1; i < overflowPrev; i++, pageIndex++) {
                            if (_this._pages.length <= pageIndex) {
                                break;
                            }
                            changeState(pageIndex);
                        }
                    }
                    if (0 < overflowNext) {
                        for (i = 0, pageIndex = currentPageIndex - searchCount - 1; i < overflowNext; i++, pageIndex--) {
                            if (pageIndex < 0) {
                                break;
                            }
                            changeState(pageIndex);
                        }
                    }
                })();
                // 不要になった page の inactivate
                oldExsistPage.forEach(function (page) {
                    var index = page.index;
                    if (null == targets[index]) {
                        page.inactivate();
                    }
                });
                // 優先 page の activate
                highPriorityIndex
                    .sort(function (lhs, rhs) {
                    if (lhs < rhs) {
                        return -1;
                    }
                    else if (lhs > rhs) {
                        return 1;
                    }
                    else {
                        return 0;
                    }
                })
                    .forEach(function (index) {
                    setTimeout(function () {
                        if (_this.isInitialized()) {
                            _this._pages[index] && _this._pages[index].activate();
                        }
                    }, 0);
                });
                // そのほかの page の 状態変更
                _.each(targets, function (action, key) {
                    setTimeout(function () {
                        if (_this.isInitialized()) {
                            var index = ~~key;
                            switch (action) {
                                case "activate":
                                    _this._pages[index] && _this._pages[index].activate();
                                    break;
                                case "hide":
                                    _this._pages[index] && _this._pages[index].hide();
                                    break;
                                case "inactivate":
                                    console.warn(TAG + "unexpected operation: inactivate");
                                    break;
                                default:
                                    console.warn(TAG + "unknown operation: " + targets[key]);
                                    break;
                            }
                        }
                    }, 0);
                });
                // 更新後に使用しなかった DOM を削除
                this.findRecycleElements().remove();
                this._lastActivePageContext.from = this._pages[currentPageIndex].getLineProfileFirst() ?
                    this._pages[currentPageIndex].getLineProfileFirst().index : 0;
                this._lastActivePageContext.to = this._pages[currentPageIndex].getLineProfileLast() ?
                    this._pages[currentPageIndex].getLineProfileLast().index : 0;
                this._lastActivePageContext.index = currentPageIndex;
            };
            // 未アサインページを構築
            ScrollManager.prototype.update = function () {
                var index = this._pages.length;
                this.assignPage(index);
                this.refresh();
            };
            // ページアサインを再構成
            ScrollManager.prototype.rebuild = function () {
                this.clearPage();
                this.assignPage();
                this.refresh();
            };
            // 管轄データを破棄
            ScrollManager.prototype.release = function () {
                this._lines.forEach(function (line) {
                    line.inactivate();
                });
                this._pages = [];
                this._lines = [];
                if (this._$map) {
                    this._mapHeight = 0;
                    this._$map.height(0);
                }
            };
            ///////////////////////////////////////////////////////////////////////
            // Implements: IListView Backup / Restore
            // 内部データをバックアップ
            ScrollManager.prototype.backup = function (key) {
                if (null == this._backup[key]) {
                    this._backup[key] = {
                        lines: this._lines,
                    };
                }
                return true;
            };
            // 内部データをリストア
            ScrollManager.prototype.restore = function (key, rebuild) {
                if (rebuild === void 0) { rebuild = true; }
                if (null == this._backup[key]) {
                    return false;
                }
                if (0 < this._lines.length) {
                    this.release();
                }
                this._addLine(this._backup[key].lines);
                if (rebuild) {
                    this.rebuild();
                }
                return true;
            };
            // バックアップデータの有無
            ScrollManager.prototype.hasBackup = function (key) {
                if (null != this._backup[key]) {
                    return true;
                }
                else {
                    return false;
                }
            };
            // バックアップデータの破棄
            ScrollManager.prototype.clearBackup = function (key) {
                if (null == key) {
                    this._backup = {};
                    return true;
                }
                else if (null != this._backup[key]) {
                    delete this._backup[key];
                    return true;
                }
                else {
                    return false;
                }
            };
            Object.defineProperty(ScrollManager.prototype, "backupData", {
                // バックアップデータにアクセス
                get: function () {
                    return this._backup;
                },
                enumerable: true,
                configurable: true
            });
            ///////////////////////////////////////////////////////////////////////
            // Implements: IListView Scroll
            // スクロールイベントハンドラ設定/解除
            ScrollManager.prototype.setScrollHandler = function (handler, on) {
                if (this._scroller) {
                    if (on) {
                        this._scroller.on("scroll", handler);
                    }
                    else {
                        this._scroller.off("scroll", handler);
                    }
                }
            };
            // スクロール終了イベントハンドラ設定/解除
            ScrollManager.prototype.setScrollStopHandler = function (handler, on) {
                if (this._scroller) {
                    if (on) {
                        this._scroller.on("scrollstop", handler);
                    }
                    else {
                        this._scroller.off("scrollstop", handler);
                    }
                }
            };
            // スクロール位置を取得
            ScrollManager.prototype.getScrollPos = function () {
                return this._scroller ? this._scroller.getPos() : 0;
            };
            // スクロール位置の最大値を取得
            ScrollManager.prototype.getScrollPosMax = function () {
                return this._scroller ? this._scroller.getPosMax() : 0;
            };
            // スクロール位置を指定
            ScrollManager.prototype.scrollTo = function (pos, animate, time) {
                if (this._scroller) {
                    if (pos < 0) {
                        console.warn(TAG + "invalid position, too small. [pos: " + pos + "]");
                        pos = 0;
                    }
                    else if (this._scroller.getPosMax() < pos) {
                        console.warn(TAG + "invalid position, too big. [pos: " + pos + "]");
                        pos = this._scroller.getPosMax();
                    }
                    // pos のみ先駆けて更新
                    this._lastActivePageContext.pos = pos;
                    if (pos !== this._scroller.getPos()) {
                        this._scroller.scrollTo(pos, animate, time);
                    }
                }
            };
            // 指定された ListItemView の表示を保証
            ScrollManager.prototype.ensureVisible = function (index, options) {
                var _this = this;
                if (index < 0 || this._lines.length <= index) {
                    console.warn(TAG + "ensureVisible(), invalid index, noop. [index: " + index + "]");
                    return;
                }
                else if (!this._scroller) {
                    console.warn(TAG + "scroller is not ready.");
                    return;
                }
                (function () {
                    var target = _this._lines[index];
                    var defaultOptions = {
                        partialOK: true,
                        setTop: false,
                        animate: _this._settings.enableAnimation,
                        time: _this._settings.animationDuration,
                        callback: function () { },
                    };
                    var operation = $.extend({}, defaultOptions, options);
                    var currentScope = {
                        from: _this._scroller.getPos(),
                        to: _this._scroller.getPos() + _this._baseHeight,
                    };
                    var targetScope = {
                        from: target.offset,
                        to: target.offset + target.height,
                    };
                    var isInScope = function () {
                        if (operation.partialOK) {
                            if (targetScope.from <= currentScope.from) {
                                if (currentScope.from <= targetScope.to) {
                                    return true;
                                }
                                else {
                                    return false;
                                }
                            }
                            else {
                                if (targetScope.from <= currentScope.to) {
                                    return true;
                                }
                                else {
                                    return false;
                                }
                            }
                        }
                        else {
                            if (currentScope.from <= targetScope.from && targetScope.to <= currentScope.to) {
                                return true;
                            }
                            else {
                                return false;
                            }
                        }
                    };
                    var detectPosition = function () {
                        if (targetScope.from < currentScope.from) {
                            return targetScope.from;
                        }
                        else if (currentScope.from < targetScope.from) {
                            return target.offset - target.height; // bottom 合わせは情報不足により不可
                        }
                        else {
                            console.warn(TAG + "logic error.");
                            return 0;
                        }
                    };
                    var pos;
                    if (operation.setTop) {
                        pos = targetScope.from;
                    }
                    else if (isInScope()) {
                        // noop.
                        operation.callback();
                        return;
                    }
                    else {
                        pos = detectPosition();
                    }
                    // 補正
                    if (pos < 0) {
                        pos = 0;
                    }
                    else if (_this._scroller.getPosMax() < pos) {
                        pos = _this._scroller.getPosMax();
                    }
                    setTimeout(operation.callback, operation.time);
                    _this.scrollTo(pos, operation.animate, operation.time);
                })();
            };
            ///////////////////////////////////////////////////////////////////////
            // implements: IListViewFramework:
            // Scroll Map の高さを取得
            ScrollManager.prototype.getScrollMapHeight = function () {
                return this._$map ? this._mapHeight : 0;
            };
            // Scroll Map の高さを更新. framework が使用する.
            ScrollManager.prototype.updateScrollMapHeight = function (delta) {
                if (this._$map) {
                    this._mapHeight += delta;
                    // for fail safe.
                    if (this._mapHeight < 0) {
                        this._mapHeight = 0;
                    }
                    this._$map.height(this._mapHeight);
                }
            };
            // 内部 Profile の更新. framework が使用する.
            ScrollManager.prototype.updateProfiles = function (from) {
                var i, n;
                var last;
                for (i = from, n = this._lines.length; i < n; i++) {
                    if (0 < i) {
                        last = this._lines[i - 1];
                        this._lines[i].index = last.index + 1;
                        this._lines[i].offset = last.offset + last.height;
                    }
                    else {
                        this._lines[i].index = 0;
                        this._lines[i].offset = 0;
                    }
                }
            };
            // Scroll Map Element を取得. framework が使用する.
            ScrollManager.prototype.getScrollMapElement = function () {
                return this._$map || $("");
            };
            // リサイクル可能な Element を取得. framework が使用する.
            ScrollManager.prototype.findRecycleElements = function () {
                return this._$map ? this._$map.find(_Config.RECYCLE_CLASS_SELECTOR) : $("");
            };
            // ListViewOptions を取得. framework が使用する.
            ScrollManager.prototype.getListViewOptions = function () {
                return this._settings;
            };
            ///////////////////////////////////////////////////////////////////////
            // private method:
            // Scroller 用環境設定
            ScrollManager.prototype.setScrollerCondition = function () {
                this._scroller.on("scroll", this._scrollEventHandler);
                this._scroller.on("scrollstop", this._scrollStopEventHandler);
            };
            // Scroller 用環境破棄
            ScrollManager.prototype.resetScrollerCondition = function () {
                this._scroller.off("scrollstop", this._scrollStopEventHandler);
                this._scroller.off("scroll", this._scrollEventHandler);
            };
            // 既定の Scroller オブジェクトの作成
            ScrollManager.prototype.createScroller = function () {
                return this._settings.scrollerFactory(this._$root[0], this._settings);
            };
            // 現在の Page Index を取得
            ScrollManager.prototype.getPageIndex = function () {
                var _this = this;
                var i, n;
                var page;
                var candidate;
                var scrollPos = this._scroller ? this._scroller.getPos() : 0;
                var scrollPosMax = this._scroller ? this._scroller.getPosMax() : 0;
                var scrollMapSize = (function () {
                    var lastPage = _this.getLastPage();
                    if (null != lastPage) {
                        return lastPage.offset + lastPage.height;
                    }
                    else {
                        return _this._baseHeight;
                    }
                })();
                var pos = (function () {
                    if (0 === scrollPosMax || scrollPosMax <= _this._baseHeight) {
                        return 0;
                    }
                    else {
                        return scrollPos * scrollMapSize / scrollPosMax;
                    }
                })();
                var validRange = function (page) {
                    if (null == page) {
                        return false;
                    }
                    else if (page.offset <= pos && pos <= page.offset + page.height) {
                        return true;
                    }
                    else {
                        return false;
                    }
                };
                if (this._baseHeight <= 0) {
                    console.error(TAG + "invalid base height: " + this._baseHeight);
                    return 0;
                }
                candidate = Math.floor(pos / this._baseHeight);
                if (this._pages.length <= candidate) {
                    candidate = this._pages.length - 1;
                }
                page = this._pages[candidate];
                if (validRange(page)) {
                    return page.index;
                }
                else if (pos < page.offset) {
                    for (i = candidate - 1; i >= 0; i--) {
                        page = this._pages[i];
                        if (validRange(page)) {
                            return page.index;
                        }
                    }
                    console.warn(TAG + "unknown page index.");
                    return 0;
                }
                else {
                    for (i = candidate + 1, n = this._pages.length; i < n; i++) {
                        page = this._pages[i];
                        if (validRange(page)) {
                            return page.index;
                        }
                    }
                    console.warn(TAG + "unknown page index.");
                    return this._pages.length - 1;
                }
            };
            /**
             * スクロールイベント
             *
             * @param pos {Number} [in] スクロールポジション
             */
            ScrollManager.prototype.onScroll = function (pos) {
                if (this._active && 0 < this._pages.length) {
                    var currentPageIndex = this.getPageIndex();
                    // TODO: 調整
                    if (_Utils.abs(pos - this._lastActivePageContext.pos) < this._settings.scrollRefreshDistance) {
                        if (this._lastActivePageContext.index !== currentPageIndex) {
                            this.refresh();
                        }
                    }
                    this._lastActivePageContext.pos = pos;
                }
            };
            /**
             * スクロール停止イベント
             *
             * @param pos {Number} [in] スクロールポジション
             */
            ScrollManager.prototype.onScrollStop = function (pos) {
                if (this._active && 0 < this._pages.length) {
                    var currentPageIndex = this.getPageIndex();
                    if (this._lastActivePageContext.index !== currentPageIndex) {
                        this.refresh();
                    }
                    this._lastActivePageContext.pos = pos;
                }
            };
            // 最後のページを取得
            ScrollManager.prototype.getLastPage = function () {
                if (0 < this._pages.length) {
                    return this._pages[this._pages.length - 1];
                }
                else {
                    return null;
                }
            };
            /**
             * ページ区分のアサイン
             *
             * @param from {Number} [in] page index を指定
             */
            ScrollManager.prototype.assignPage = function (from) {
                var _this = this;
                var i, n;
                if (null == from) {
                    from = 0;
                }
                else {
                    this.clearPage(from);
                }
                (function () {
                    var lineIndex = 0;
                    var lastPage = _this.getLastPage();
                    var lastLine;
                    var tempPage;
                    if (null == lastPage) {
                        lastPage = new UI.PageProfile();
                        _this._pages.push(lastPage);
                    }
                    else {
                        lastLine = lastPage.getLineProfileLast();
                        if (null != lastLine) {
                            lineIndex = lastLine.index + 1;
                        }
                    }
                    var asignee = _this._lines.slice(lineIndex);
                    for (i = 0, n = asignee.length; i < n; i++) {
                        if (_this._baseHeight <= lastPage.height) {
                            lastPage.normalize();
                            tempPage = lastPage;
                            tempPage = new UI.PageProfile();
                            tempPage.index = lastPage.index + 1;
                            tempPage.offset = lastPage.offset + lastPage.height;
                            lastPage = tempPage;
                            _this._pages.push(lastPage);
                        }
                        asignee[i].pageIndex = lastPage.index;
                        lastPage.push(asignee[i]);
                    }
                    lastPage.normalize();
                })();
                if (this._scroller) {
                    this._scroller.update();
                }
            };
            /**
             * ページ区分の解除
             *
             * @param from {Number} [in] page index を指定
             */
            ScrollManager.prototype.clearPage = function (from) {
                if (null == from) {
                    from = 0;
                }
                this._pages = this._pages.slice(0, from);
            };
            return ScrollManager;
        }());
        UI.ScrollManager = ScrollManager;
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));

var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var TAG = "[CDP.UI.ListView] ";
        /**
         * @class ListView
         * @brief メモリ管理機能を提供する仮想リストビュークラス
         */
        var ListView = (function (_super) {
            __extends(ListView, _super);
            /**
             * constructor
             *
             * @param options {ListViewConstructOptions} [in] オプション
             */
            function ListView(options) {
                var _this = _super.call(this, options) || this;
                _this._scrollMgr = null; //< scroll コアロジック
                var opt = options || {};
                _this._scrollMgr = new UI.ScrollManager(options);
                if (opt.$el) {
                    var delegates = _this.events ? true : false;
                    _this.setElement(opt.$el, delegates);
                }
                else {
                    var height = opt.initialHeight || _this.$el.height();
                    _this._scrollMgr.initialize(_this.$el, height);
                }
                return _this;
            }
            ListView.prototype.setElement = function (element, delegate) {
                if (this._scrollMgr) {
                    var $el = $(element);
                    this._scrollMgr.destroy();
                    this._scrollMgr.initialize($el, $el.height());
                }
                return _super.prototype.setElement.call(this, element, delegate);
            };
            // 破棄
            ListView.prototype.remove = function () {
                this._scrollMgr.destroy();
                return _super.prototype.remove.call(this);
            };
            ///////////////////////////////////////////////////////////////////////
            // Implements: IListView Profile 管理
            // 初期化済みか判定
            ListView.prototype.isInitialized = function () {
                return this._scrollMgr.isInitialized();
            };
            // プロパティを指定して、LineProfile を管理
            ListView.prototype.addItem = function (height, initializer, info, insertTo) {
                this._addLine(new UI.LineProfile(this._scrollMgr, Math.floor(height), initializer, info), insertTo);
            };
            ListView.prototype.removeItem = function (index, arg2, arg3) {
                this._scrollMgr.removeItem(index, arg2, arg3);
            };
            ListView.prototype.getItemInfo = function (target) {
                return this._scrollMgr.getItemInfo(target);
            };
            // アクティブページを更新
            ListView.prototype.refresh = function () {
                this._scrollMgr.refresh();
            };
            // 未アサインページを構築
            ListView.prototype.update = function () {
                this._scrollMgr.update();
            };
            // ページアサインを再構成
            ListView.prototype.rebuild = function () {
                this._scrollMgr.rebuild();
            };
            // 管轄データを破棄
            ListView.prototype.release = function () {
                this._scrollMgr.release();
            };
            ///////////////////////////////////////////////////////////////////////
            // Implements: IListView Profile Backup / Restore
            // 内部データをバックアップ
            ListView.prototype.backup = function (key) {
                return this._scrollMgr.backup(key);
            };
            // 内部データをリストア
            ListView.prototype.restore = function (key, rebuild) {
                if (rebuild === void 0) { rebuild = true; }
                return this._scrollMgr.restore(key, rebuild);
            };
            // バックアップデータの有無
            ListView.prototype.hasBackup = function (key) {
                return this._scrollMgr.hasBackup(key);
            };
            // バックアップデータの破棄
            ListView.prototype.clearBackup = function (key) {
                return this._scrollMgr.clearBackup(key);
            };
            Object.defineProperty(ListView.prototype, "backupData", {
                // バックアップデータにアクセス
                get: function () {
                    return this._scrollMgr ? this._scrollMgr.backupData : null;
                },
                enumerable: true,
                configurable: true
            });
            ///////////////////////////////////////////////////////////////////////
            // Implements: IListView Scroll
            // スクロールイベントハンドラ設定/解除
            ListView.prototype.setScrollHandler = function (handler, on) {
                this._scrollMgr.setScrollHandler(handler, on);
            };
            // スクロール終了イベントハンドラ設定/解除
            ListView.prototype.setScrollStopHandler = function (handler, on) {
                this._scrollMgr.setScrollStopHandler(handler, on);
            };
            // スクロール位置を取得
            ListView.prototype.getScrollPos = function () {
                return this._scrollMgr.getScrollPos();
            };
            // スクロール位置の最大値を取得
            ListView.prototype.getScrollPosMax = function () {
                return this._scrollMgr.getScrollPosMax();
            };
            // スクロール位置を指定
            ListView.prototype.scrollTo = function (pos, animate, time) {
                this._scrollMgr.scrollTo(pos, animate, time);
            };
            // 指定された ListItemView の表示を保証
            ListView.prototype.ensureVisible = function (index, options) {
                this._scrollMgr.ensureVisible(index, options);
            };
            Object.defineProperty(ListView.prototype, "core", {
                ///////////////////////////////////////////////////////////////////////
                // Implements: IListView Properties
                // core framework access
                get: function () {
                    return this._scrollMgr;
                },
                enumerable: true,
                configurable: true
            });
            ///////////////////////////////////////////////////////////////////////
            // Implements: IListView Internal I/F
            // 登録 framework が使用する
            ListView.prototype._addLine = function (_line, insertTo) {
                this._scrollMgr._addLine(_line, insertTo);
            };
            ///////////////////////////////////////////////////////////////////////
            // Implements: IComposableView
            /**
             * すでに定義された Backbone.View を基底クラスに設定し、extend を実行する。
             *
             * @param derives         {Backbone.View|Backbone.View[]} [in] 合成元の View クラス
             * @param properties      {Object}                        [in] prototype プロパティ
             * @param classProperties {Object}                        [in] static プロパティ
             * @return {Backbone.View|Backbone.View[]} 新規に生成された View のコンストラクタ
             */
            ListView.compose = function (derives, properties, classProperties) {
                var composed = UI.composeViews(ListView, derives);
                return composed.extend(properties, classProperties);
            };
            return ListView;
        }(Backbone.View));
        UI.ListView = ListView;
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));


var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var TAG = "[CDP.UI.GroupListItemView] ";
        /**
         * @class GroupListItemView
         * @brief ExpandableListView が扱う ListItem コンテナクラス
         */
        var GroupListItemView = (function (_super) {
            __extends(GroupListItemView, _super);
            /**
             * constructor
             *
             * @param options {GroupLineViewOptions} [in] オプション
             */
            function GroupListItemView(options) {
                var _this = _super.call(this, options) || this;
                _this._groupProfile = null; //< 管轄の GroupProfile
                _this._groupProfile = options.groupProfile;
                return _this;
            }
            ///////////////////////////////////////////////////////////////////////
            // protected methods
            /**
             * 展開状態を判定
             *
             * @return {Boolean} true: 展開, false:収束
             */
            GroupListItemView.prototype.isExpanded = function () {
                return this._groupProfile.isExpanded();
            };
            // 展開中か判定
            GroupListItemView.prototype.isExpanding = function () {
                return this.owner.isExpanding();
            };
            // 収束中か判定
            GroupListItemView.prototype.isCollapsing = function () {
                return this.owner.isCollapsing();
            };
            // 開閉中か判定
            GroupListItemView.prototype.isSwitching = function () {
                return this.owner.isSwitching();
            };
            // 子 Group を持っているか判定
            GroupListItemView.prototype.hasChildren = function (layoutKey) {
                return this._groupProfile.hasChildren(layoutKey);
            };
            return GroupListItemView;
        }(UI.ListItemView));
        UI.GroupListItemView = GroupListItemView;
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));


/* tslint:disable:no-bitwise */
var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var TAG = "[CDP.UI.ExpandManager] ";
        /**
         * @class ExpandManager
         * @brief 開閉状態管理クラス
         */
        var ExpandManager = (function () {
            /**
             * constructor
             *
             * @param owner {BaseExpandableListView} [in] 親View のインスタンス
             */
            function ExpandManager(owner) {
                this._owner = null;
                this._mapGroups = {}; //< {id, GroupProfile} の map
                this._aryTopGroups = []; //< 第1階層 GroupProfile を格納
                this._layoutKey = null;
                this._owner = owner;
            }
            ///////////////////////////////////////////////////////////////////////
            // Implements: IExpandManager
            /**
             * 新規 GroupProfile を作成
             * 登録済みの場合はそのオブジェクトを返却
             *
             * @parma id {String} [in] 新規に作成する Group ID を指定. 指定しない場合は自動割り振り
             * @return {GroupProfile} GroupProfile インスタンス
             */
            ExpandManager.prototype.newGroup = function (id) {
                var group;
                if (null == id) {
                    id = "group-id:" + ("0000" + (Math.random() * Math.pow(36, 4) << 0).toString(36)).slice(-4);
                }
                if (null != this._mapGroups[id]) {
                    return this._mapGroups[id];
                }
                group = new UI.GroupProfile(id, this._owner);
                this._mapGroups[id] = group;
                return group;
            };
            /**
             * 登録済み Group を取得
             *
             * @parma id {String} [in] 取得する Group ID を指定
             * @return {GroupProfile} GroupProfile インスタンス / null
             */
            ExpandManager.prototype.getGroup = function (id) {
                if (null == this._mapGroups[id]) {
                    console.warn(TAG + "group id: " + id + " is not registered.");
                    return null;
                }
                return this._mapGroups[id];
            };
            /**
             * 第1階層の Group 登録
             *
             * @param topGroup {GroupProfile} [in] 構築済み GroupProfile インスタンス
             */
            ExpandManager.prototype.registerTopGroup = function (topGroup) {
                var lastGroup;
                var insertTo;
                // すでに登録済みの場合は restore して layout キーごとに復元する。
                if ("registered" === topGroup.status) {
                    // TODO: orientation changed 時の layout キー変更対応だが、キーに変更が無いときは不具合となる。
                    // この API に実装が必要かも含めて見直しが必要
                    topGroup.restore();
                    return;
                }
                lastGroup = (0 < this._aryTopGroups.length) ? this._aryTopGroups[this._aryTopGroups.length - 1] : null;
                insertTo = (null != lastGroup) ? lastGroup.getLastLineIndex(true) + 1 : 0;
                if (_.isNaN(insertTo)) {
                    console.error(TAG + "logic error, 'insertTo' is NaN.");
                    return;
                }
                this._aryTopGroups.push(topGroup);
                topGroup.register(insertTo);
            };
            /**
             * 第1階層の Group を取得
             * コピー配列が返されるため、クライアントはキャッシュ不可
             *
             * @return {GroupProfile[]} GroupProfile 配列
             */
            ExpandManager.prototype.getTopGroups = function () {
                return this._aryTopGroups.slice(0);
            };
            // すべてのグループを展開 (1階層)
            ExpandManager.prototype.expandAll = function () {
                this._aryTopGroups.forEach(function (group) {
                    if (group.hasChildren()) {
                        group.expand();
                    }
                });
            };
            // すべてのグループを収束 (1階層)
            ExpandManager.prototype.collapseAll = function (delay) {
                this._aryTopGroups.forEach(function (group) {
                    if (group.hasChildren()) {
                        group.collapse(delay);
                    }
                });
            };
            // 展開中か判定
            ExpandManager.prototype.isExpanding = function () {
                return this._owner.isStatusIn("expanding");
            };
            // 収束中か判定
            ExpandManager.prototype.isCollapsing = function () {
                return this._owner.isStatusIn("collapsing");
            };
            // 開閉中か判定
            ExpandManager.prototype.isSwitching = function () {
                return this.isExpanding() || this.isCollapsing();
            };
            // 状態変数の参照カウントのインクリメント
            ExpandManager.prototype.statusAddRef = function (status) {
                return this._owner.statusAddRef(status);
            };
            // 状態変数の参照カウントのデクリメント
            ExpandManager.prototype.statusRelease = function (status) {
                return this._owner.statusRelease(status);
            };
            // 処理スコープ毎に状態変数を設定
            ExpandManager.prototype.statusScope = function (status, callback) {
                this._owner.statusScope(status, callback);
            };
            // 指定した状態中であるか確認
            ExpandManager.prototype.isStatusIn = function (status) {
                return this._owner.isStatusIn(status);
            };
            Object.defineProperty(ExpandManager.prototype, "layoutKey", {
                // layout key を取得
                get: function () {
                    return this._layoutKey;
                },
                // layout key を設定
                set: function (key) {
                    this._layoutKey = key;
                },
                enumerable: true,
                configurable: true
            });
            // データを破棄
            ExpandManager.prototype.release = function () {
                this._mapGroups = {};
                this._aryTopGroups = [];
            };
            ///////////////////////////////////////////////////////////////////////
            // Implementes: IBackupRestore
            /**
             * 内部データをバックアップ
             *
             * @param key {String} [in] バックアップキーを指定
             * @return {Boolean} true: 成功 / false: 失敗
             */
            ExpandManager.prototype.backup = function (key) {
                var _backup = this.backupData;
                if (null == _backup[key]) {
                    _backup[key] = {
                        map: this._mapGroups,
                        tops: this._aryTopGroups,
                    };
                }
                return true;
            };
            /**
             * 内部データをリストア
             *
             * @param key     {String}  [in] バックアップキーを指定
             * @param rebuild {Boolean} [in] rebuild を実行する場合は true を指定
             * @return {Boolean} true: 成功 / false: 失敗
             */
            ExpandManager.prototype.restore = function (key, rebuild) {
                if (rebuild === void 0) { rebuild = true; }
                var _backup = this.backupData;
                if (null == _backup[key]) {
                    return false;
                }
                if (0 < this._aryTopGroups.length) {
                    this.release();
                }
                this._mapGroups = _backup[key].map;
                this._aryTopGroups = _backup[key].tops;
                // layout 情報の確認
                if (this._aryTopGroups.length <= 0 || !this._aryTopGroups[0].hasLayoutKeyOf(this.layoutKey)) {
                    return false;
                }
                // 展開しているものを登録
                this._aryTopGroups.forEach(function (group) {
                    group.restore();
                });
                // 再構築の予約
                if (rebuild) {
                    this._owner.rebuild();
                }
                return true;
            };
            // バックアップデータの有無
            ExpandManager.prototype.hasBackup = function (key) {
                return this._owner.hasBackup(key);
            };
            // バックアップデータの破棄
            ExpandManager.prototype.clearBackup = function (key) {
                return this._owner.clearBackup(key);
            };
            Object.defineProperty(ExpandManager.prototype, "backupData", {
                // バックアップデータにアクセス
                get: function () {
                    return this._owner.backupData;
                },
                enumerable: true,
                configurable: true
            });
            return ExpandManager;
        }());
        UI.ExpandManager = ExpandManager;
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));


var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var TAG = "[CDP.UI.ExpandableListView] ";
        /**
         * @class ExpandableListView
         * @brief 開閉機能を備えた仮想リストビュークラス
         */
        var ExpandableListView = (function (_super) {
            __extends(ExpandableListView, _super);
            /**
             * constructor
             *
             * @param options {ListViewConstructOptions} [in] オプション
             */
            function ExpandableListView(options) {
                var _this = _super.call(this, options) || this;
                _this._statusMgr = null;
                _this._expandManager = null;
                _this._statusMgr = new UI.StatusManager();
                _this._expandManager = new UI.ExpandManager(_this);
                return _this;
            }
            ///////////////////////////////////////////////////////////////////////
            // Implements: IExpandableListView
            // 新規 GroupProfile を作成
            ExpandableListView.prototype.newGroup = function (id) {
                return this._expandManager.newGroup(id);
            };
            // 登録済み Group を取得
            ExpandableListView.prototype.getGroup = function (id) {
                return this._expandManager.getGroup(id);
            };
            // 第1階層の Group 登録
            ExpandableListView.prototype.registerTopGroup = function (topGroup) {
                this._expandManager.registerTopGroup(topGroup);
            };
            // 第1階層の Group を取得
            ExpandableListView.prototype.getTopGroups = function () {
                return this._expandManager.getTopGroups();
            };
            // すべてのグループを展開 (1階層)
            ExpandableListView.prototype.expandAll = function () {
                this._expandManager.expandAll();
            };
            // すべてのグループを収束 (1階層)
            ExpandableListView.prototype.collapseAll = function (delay) {
                this._expandManager.collapseAll(delay);
            };
            // 展開中か判定
            ExpandableListView.prototype.isExpanding = function () {
                return this._expandManager.isExpanding();
            };
            // 収束中か判定
            ExpandableListView.prototype.isCollapsing = function () {
                return this._expandManager.isCollapsing();
            };
            // 開閉中か判定
            ExpandableListView.prototype.isSwitching = function () {
                return this._expandManager.isSwitching();
            };
            // 状態変数の参照カウントのインクリメント
            ExpandableListView.prototype.statusAddRef = function (status) {
                return this._statusMgr.statusAddRef(status);
            };
            // 状態変数の参照カウントのデクリメント
            ExpandableListView.prototype.statusRelease = function (status) {
                return this._statusMgr.statusRelease(status);
            };
            // 処理スコープ毎に状態変数を設定
            ExpandableListView.prototype.statusScope = function (status, callback) {
                this._statusMgr.statusScope(status, callback);
            };
            // 指定した状態中であるか確認
            ExpandableListView.prototype.isStatusIn = function (status) {
                return this._statusMgr.isStatusIn(status);
            };
            Object.defineProperty(ExpandableListView.prototype, "layoutKey", {
                // layout key を取得
                get: function () {
                    return this._expandManager.layoutKey;
                },
                // layout key を設定
                set: function (key) {
                    this._expandManager.layoutKey = key;
                },
                enumerable: true,
                configurable: true
            });
            ///////////////////////////////////////////////////////////////////////
            // Override: ListView
            // データを破棄
            ExpandableListView.prototype.release = function () {
                _super.prototype.release.call(this);
                this._expandManager.release();
            };
            // 内部データをバックアップ
            ExpandableListView.prototype.backup = function (key) {
                return this._expandManager.backup(key);
            };
            // 内部データをリストア
            ExpandableListView.prototype.restore = function (key, rebuild) {
                if (rebuild === void 0) { rebuild = true; }
                return this._expandManager.restore(key, rebuild);
            };
            return ExpandableListView;
        }(UI.ListView));
        UI.ExpandableListView = ExpandableListView;
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));

return CDP.UI; }));
/*!
 * cdp.ui.jqm.js 2.0.0
 *
 * Date: 2017-04-17T11:49:51+0900
 */

(function (root, factory) { if (typeof define === "function" && define.amd) { define('cdp.ui.jqm',["cdp.framework.jqm", "cdp.tools", "cdp.ui.listview"], function () { return factory(root.CDP || (root.CDP = {})); }); } else { factory(root.CDP || (root.CDP = {})); } }(this, function (CDP) { CDP.UI = CDP.UI || {};
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();

var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var Config = CDP.Config;
        var Framework = CDP.Framework;
        //__________________________________________________________________________________________________________//
        /**
         * @class Theme
         * @brief UI Theme 設定を行うユーティリティクラス
         */
        var Theme = (function () {
            function Theme() {
            }
            ///////////////////////////////////////////////////////////////////////
            // public static methods:
            /**
             * 現在指定されている UI Platform を取得
             *
             * @return {String} ex) "ios"
             */
            Theme.getCurrentUIPlatform = function () {
                var $htms = $("html");
                for (var i = 0, n = this.s_platforms.length; i < n; i++) {
                    if ($htms.hasClass("ui-platform-" + this.s_platforms[i])) {
                        return this.s_platforms[i];
                    }
                }
                return null;
            };
            /**
             * UI Platform を設定
             *
             * @return {String} true: 成功 / false: 失敗
             */
            Theme.setCurrentUIPlatform = function (platform) {
                if (null == platform || this.s_platforms.indexOf(platform) >= 0) {
                    var $htms_1 = $("html");
                    this.s_platforms.forEach(function (target) {
                        $htms_1.removeClass("ui-platform-" + target);
                    });
                    if (platform) {
                        $htms_1.addClass("ui-platform-" + platform);
                    }
                    return true;
                }
                else {
                    return false;
                }
            };
            /**
             * 現在の Platform を判定し最適な platform を自動決定
             *
             * @return {String} ex) "ios"
             */
            Theme.detectUIPlatform = function () {
                // platform の設定
                if (Framework.Platform.iOS) {
                    $("html").addClass("ui-platform-ios");
                }
                else {
                    $("html").addClass("ui-platform-android");
                }
                // PC デバッグ環境ではスクロールバーを表示
                if (Config.DEBUG && !Framework.Platform.Mobile) {
                    $("body").css("overflow-y", "scroll");
                }
            };
            /**
             * platform を配列で設定
             * 上書きされる
             *
             * @param {String[]} platforms [in] OS ex): ["ios", "android"]
             */
            Theme.setUIPlatforms = function (platforms) {
                if (platforms) {
                    this.s_platforms = platforms;
                }
            };
            /**
             * page transition を設定
             * 上書きされる
             *
             * @param {TransitionMap} map [in] TransitionMap を指定
             */
            Theme.setPageTransitionMap = function (map) {
                if (map) {
                    this.s_pageTransitionMap = map;
                }
            };
            /**
             * dialog transition を設定
             * 上書きされる
             *
             * @param {TransitionMap} map [in] TransitionMap を指定
             */
            Theme.setDialogTransitionMap = function (map) {
                if (map) {
                    this.s_dialogTransitionMap = map;
                }
            };
            /**
             * page transition を取得
             * TransitionMap にアサインされているものであれば変換
             *
             * @return {String[]} "slide"
             */
            Theme.queryPageTransition = function (original) {
                var convert = this.s_pageTransitionMap[original];
                if (convert) {
                    return convert[this.getCurrentUIPlatform()] || convert.fallback;
                }
                else {
                    return original;
                }
            };
            /**
             * dialog transition を取得
             * TransitionMap にアサインされているものであれば変換
             *
             * @return {String[]} "slide"
             */
            Theme.queryDialogTransition = function (original) {
                var convert = this.s_dialogTransitionMap[original];
                if (convert) {
                    return convert[this.getCurrentUIPlatform()] || convert.fallback;
                }
                else {
                    return original;
                }
            };
            return Theme;
        }());
        Theme.s_platforms = ["ios", "android"];
        Theme.s_pageTransitionMap = {
            "platform-default": {
                ios: "slide",
                android: "floatup",
                fallback: "slide",
            },
            "platform-alternative": {
                ios: "slideup",
                android: "floatup",
                fallback: "slideup",
            },
        };
        Theme.s_dialogTransitionMap = {
            "platform-default": {
                ios: "popzoom",
                android: "crosszoom",
                fallback: "none",
            },
        };
        UI.Theme = Theme;
        //__________________________________________________________________________________________________________//
        // jquey.mobile.changePage() の Hook.
        function applyCustomChangePage() {
            var jqmChangePage = _.bind($.mobile.changePage, $.mobile);
            function customChangePage(to, options) {
                if (_.isString(to)) {
                    if (options && options.transition) {
                        options.transition = Theme.queryPageTransition(options.transition);
                    }
                }
                jqmChangePage(to, options);
            }
            $.mobile.changePage = customChangePage;
        }
        // framework 初期化後に適用
        Framework.waitForInitialize()
            .done(function () {
            applyCustomChangePage();
        });
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));

var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        //__________________________________________________________________________________________________________//
        /**
         * @class ExtensionManager
         * @brief 拡張機能を管理するユーティリティクラス
         */
        var ExtensionManager = (function () {
            function ExtensionManager() {
            }
            /**
             * DOM 拡張関数の登録
             *
             * @param {DomExtension} func [in] DOM 拡張関数
             */
            ExtensionManager.registerDomExtension = function (func) {
                this.s_domExtensions.push(func);
            };
            /**
             * DOM 拡張を適用
             *
             * @param {jQuery} $ui       [in] 拡張対象の DOM
             * @param {Object} [options] [in] オプション
             */
            ExtensionManager.applyDomExtension = function ($ui, options) {
                this.s_domExtensions.forEach(function (func) {
                    func($ui, options);
                });
            };
            return ExtensionManager;
        }());
        ExtensionManager.s_domExtensions = [];
        UI.ExtensionManager = ExtensionManager;
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));


/*jshint sub: true */
/* tslint:disable:no-bitwise */
var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var TAG = "[CDP.UI.Toast] ";
        /**
         * @class Toast
         * @brief Android SDK の Toast クラスのように自動消滅するメッセージ出力ユーティリティ
         *        入れ子の関係を実現するために module で実装
         */
        var Toast;
        (function (Toast) {
            // 表示時間の定義
            Toast.LENGTH_SHORT = 1500; //< 短い:1500 msec
            Toast.LENGTH_LONG = 4000; //< 長い:4000 msec
            // @enum オフセットの基準
            var OffsetX;
            (function (OffsetX) {
                OffsetX[OffsetX["LEFT"] = 1] = "LEFT";
                OffsetX[OffsetX["RIGHT"] = 2] = "RIGHT";
                OffsetX[OffsetX["CENTER"] = 4] = "CENTER";
            })(OffsetX = Toast.OffsetX || (Toast.OffsetX = {}));
            // @enum オフセットの基準
            var OffsetY;
            (function (OffsetY) {
                OffsetY[OffsetY["TOP"] = 16] = "TOP";
                OffsetY[OffsetY["BOTTOM"] = 32] = "BOTTOM";
                OffsetY[OffsetY["CENTER"] = 64] = "CENTER";
            })(OffsetY = Toast.OffsetY || (Toast.OffsetY = {}));
            /**
             * @class StyleBuilderDefault
             * @brief スタイル変更時に使用する既定の構造体オブジェクト
             */
            var StyleBuilderDefault = (function () {
                function StyleBuilderDefault() {
                }
                // class attribute に設定する文字列を取得
                StyleBuilderDefault.prototype.getClass = function () {
                    return "ui-loader ui-overlay-shadow ui-corner-all";
                };
                // style attribute に設定する JSON オブジェクトを取得
                StyleBuilderDefault.prototype.getStyle = function () {
                    var style = {
                        "padding": "7px 25px 7px 25px",
                        "display": "block",
                        "background-color": "#1d1d1d",
                        "border-color": "#1b1b1b",
                        "color": "#fff",
                        "text-shadow": "0 1px 0 #111",
                        "font-weight": "bold",
                        "opacity": 0.8,
                    };
                    return style;
                };
                // オフセットの基準位置を取得
                StyleBuilderDefault.prototype.getOffsetPoint = function () {
                    return OffsetX.CENTER | OffsetY.BOTTOM;
                };
                // X 座標のオフセット値を取得
                StyleBuilderDefault.prototype.getOffsetX = function () {
                    return 0;
                };
                // Y 座標のオフセット値を取得
                StyleBuilderDefault.prototype.getOffsetY = function () {
                    return -75;
                };
                return StyleBuilderDefault;
            }());
            Toast.StyleBuilderDefault = StyleBuilderDefault;
            /**
             * Toast 表示
             *
             * @param message  [in] メッセージ
             * @param duration [in] 表示時間を設定 (msec) default: LENGTH_SHORT
             * @param style    [in] スタイル変更する場合には派生クラスオブジェクトを指定
             */
            function show(message, duration, style) {
                if (duration === void 0) { duration = Toast.LENGTH_SHORT; }
                var $mobile = $.mobile;
                var info = style || new StyleBuilderDefault();
                var setCSS = info.getStyle() ? true : false;
                // 改行コードは <br/> に置換する
                var msg = message.replace(/\n/g, "<br/>");
                // メッセージ element の動的生成
                var html = "<div>" + msg + "</div>";
                var box = $(html).addClass(info.getClass());
                if (setCSS) {
                    box.css(info.getStyle());
                }
                // 自動改行されてもよいように、基点を設定してから追加
                box.css({
                    "top": 0,
                    "left": 0,
                }).appendTo($mobile.pageContainer);
                // 配置位置の決定
                var offsetPoint = info.getOffsetPoint();
                var posX, posY;
                var $window = $(window);
                var box_width = box.width() + parseInt(box.css("padding-left"), 10) + parseInt(box.css("padding-right"), 10);
                var box_height = box.height() + parseInt(box.css("padding-top"), 10) + parseInt(box.css("padding-bottom"), 10);
                switch (offsetPoint & 0x000F) {
                    case OffsetX.LEFT:
                        posX = 0 + info.getOffsetX();
                        break;
                    case OffsetX.RIGHT:
                        posX = $window.width() - box_width + info.getOffsetX();
                        break;
                    case OffsetX.CENTER:
                        posX = ($window.width() / 2) - (box_width / 2) + info.getOffsetX();
                        break;
                    default:
                        console.warn(TAG + "warn. unknown offsetPoint:" + (offsetPoint & 0x000F));
                        posX = ($window.width() / 2) - (box_width / 2) + info.getOffsetX();
                        break;
                }
                switch (offsetPoint & 0x00F0) {
                    case OffsetY.TOP:
                        posY = 0 + info.getOffsetY();
                        break;
                    case OffsetY.BOTTOM:
                        posY = $window.height() - box_height + info.getOffsetY();
                        break;
                    case OffsetY.CENTER:
                        posY = ($window.height() / 2) - (box_height / 2) + info.getOffsetY();
                        break;
                    default:
                        console.warn(TAG + "warn. unknown offsetPoint:" + (offsetPoint & 0x00F0));
                        posY = ($window.height() / 2) - (box_height / 2) + info.getOffsetY();
                        break;
                }
                // 表示
                box.css({
                    "top": posY,
                    "left": posX,
                })
                    .delay(duration)
                    .fadeOut(400, function () {
                    $(this).remove();
                });
            }
            Toast.show = show;
        })(Toast = UI.Toast || (UI.Toast = {}));
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));



var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var Framework = CDP.Framework;
        var TAG = "[CDP.UI.Dialog] ";
        //___________________________________________________________________________________________________________________//
        /**
         * @class Dialog
         * @brief 汎用ダイアログクラス
         *        jQM の popup widget によって実装
         */
        var Dialog = (function () {
            /**
             * constructor
             *
             * @param id      {String}        [in] ダイアログ DOM ID を指定 ex) #dialog-hoge
             * @param options {DialogOptions} [in] オプション
             */
            function Dialog(id, options) {
                this._template = null;
                this._settings = null;
                this._$dialog = null;
                // Dialog 共通設定の初期化
                Dialog.initCommonCondition();
                // 設定を更新
                this._settings = $.extend({}, Dialog.s_defaultOptions, options);
                // ダイアログテンプレートを作成
                this._template = CDP.Tools.Template.getJST(id, this._settings.src);
            }
            ///////////////////////////////////////////////////////////////////////
            // public methods
            /**
             * 表示
             * 表示をして始めて DOM が有効になる。
             *
             * @param options {DialogOptions} [in] オプション (src は無視される)
             * @return ダイアログの jQuery オブジェクト
             */
            Dialog.prototype.show = function (options) {
                var _this = this;
                var $document = $(document), $body = $("body"), $page = $body.pagecontainer("getActivePage");
                var ofcHidden = {
                    "overflow": "hidden",
                    "overflow-x": "hidden",
                    "overflow-y": "hidden",
                };
                var ofcBody = {
                    "overflow": $body.css("overflow"),
                    "overflow-x": $body.css("overflow-x"),
                    "overflow-y": $body.css("overflow-y"),
                };
                var parentScrollPos = $body.scrollTop();
                var ofcPage = {
                    "overflow": $page.css("overflow"),
                    "overflow-x": $page.css("overflow-x"),
                    "overflow-y": $page.css("overflow-y"),
                };
                var scrollEvent = "scroll touchmove mousemove MSPointerMove";
                var scrollHander = function (event) {
                    if ("deny" === _this._settings.scrollEvent) {
                        event.preventDefault();
                    }
                    else if ("adjust" === _this._settings.scrollEvent) {
                        $body.scrollTop(parentScrollPos);
                    }
                };
                // option が指定されていた場合更新
                if (null != options) {
                    this._settings = $.extend({}, this._settings, options);
                }
                // afterclose 処理は Dialog の破棄処理を実装するため基本的に設定禁止 (強制上書きモードを設定使用可)
                if (this._settings.afterclose && !this._settings.forceOverwriteAfterClose) {
                    console.warn(TAG + "cannot accept 'afterclose' option. please instead using 'popupafterclose' event.");
                    delete this._settings.afterclose;
                }
                // title の有無
                this._settings._titleState = this._settings.title ? "ui-has-title" : "ui-no-title";
                /*
                 * template から jQuery オブジェクトを作成し、
                 * <body> 直下に追加.
                 * $page では Backbone event を受けられないことに注意
                 */
                this._$dialog = $(this._template(this._settings));
                this._$dialog.localize();
                $body.append(this._$dialog);
                // theme を解決
                this.resolveTheme();
                this._$dialog
                    .on("popupcreate", function (event) {
                    // スクロールを抑止
                    if ("allow" !== _this._settings.scrollEvent) {
                        $document.on(scrollEvent, scrollHander);
                    }
                    $body.css(ofcHidden);
                    $page.css(ofcHidden);
                    Dialog.register(_this);
                })
                    .enhanceWithin();
                // DOM 拡張
                if (null != this._settings.domExtensionOptions) {
                    UI.ExtensionManager.applyDomExtension(this._$dialog, this._settings.domExtensionOptions);
                }
                this.onBeforeShow()
                    .done(function () {
                    // 表示
                    _this._$dialog
                        .popup($.extend({}, {
                        positionTo: "window",
                        afterclose: function (event, ui) {
                            // スクロール状態を戻す
                            $page.css(ofcPage);
                            $body.css(ofcBody);
                            if ("allow" !== _this._settings.scrollEvent) {
                                $document.off(scrollEvent, scrollHander);
                            }
                            Dialog.register(null);
                            _this._$dialog.remove();
                            _this._$dialog = null;
                        },
                    }, _this._settings))
                        .popup("open").on(_this._settings.event, function (event) {
                        // "data-auto-close='false'" が指定されている要素は dialog を閉じない
                        var autoClose = $(event.target).attr("data-auto-close");
                        if (null == autoClose) {
                            autoClose = _this._settings.defaultAutoClose ? "true" : "false";
                        }
                        if ("false" === autoClose) {
                            return;
                        }
                        _this.close();
                        event.preventDefault();
                    });
                })
                    .fail(function (error) {
                    console.error(TAG + "Dialog.show() failed.");
                    if (_this._$dialog) {
                        _this._$dialog.trigger("error", error);
                    }
                });
                return this._$dialog;
            };
            /**
             * 終了
             * 基本的には自動で閉じるが、
             * 表示中のダイアログをクライアント側から閉じるメソッド
             */
            Dialog.prototype.close = function () {
                if (this._$dialog) {
                    this._$dialog.popup("close");
                }
            };
            Object.defineProperty(Dialog.prototype, "$el", {
                // ダイアログ element を取得
                get: function () {
                    return this._$dialog;
                },
                enumerable: true,
                configurable: true
            });
            ///////////////////////////////////////////////////////////////////////
            // protected methods: Override
            /**
             * ダイアログ表示の直前
             * DOM を操作できるタイミングで呼び出される.
             *
             * @return {jQueryPromise} promise オブジェクト
             */
            Dialog.prototype.onBeforeShow = function () {
                return $.Deferred().resolve();
            };
            /**
             * ダイアログの使用する Theme を解決
             * 不要な場合はオーバーライドすることも可能
             */
            Dialog.prototype.resolveTheme = function () {
                var queryTheme = function () {
                    return $(".ui-page-active").jqmData("theme");
                };
                var candidateTheme;
                if (!this._settings.theme) {
                    var domTheme = this._$dialog.jqmData("theme");
                    if (!domTheme) {
                        this._settings.theme = candidateTheme = queryTheme();
                    }
                }
                if (!this._settings.overlayTheme) {
                    var domOverlayTheme = this._$dialog.jqmData("overlay-theme");
                    if (!domOverlayTheme) {
                        this._settings.overlayTheme = candidateTheme || queryTheme();
                    }
                }
                // transition の更新
                this._settings.transition = UI.Theme.queryDialogTransition(this._settings.transition);
            };
            ///////////////////////////////////////////////////////////////////////
            // public static methods
            /**
             * Dialog の既定オプションを更新
             * すぺての Dialog が使用する共通設定
             *
             * @param options {DialogOptions} [in] ダイアログオプション
             */
            Dialog.setDefaultOptions = function (options) {
                // Dialog 共通設定の初期化
                Dialog.initCommonCondition();
                $.extend(true, Dialog.s_defaultOptions, options);
            };
            ///////////////////////////////////////////////////////////////////////
            // private methods
            // 現在 active なダイアログとして登録する
            Dialog.register = function (dialog) {
                if (null != dialog && null != Dialog.s_activeDialog) {
                    console.warn(TAG + "new dialog proc is called in the past dialog's one. use setTimeout() for post process.");
                }
                Dialog.s_activeDialog = dialog;
            };
            /**
             * Dialog 共通設定の初期化
             */
            Dialog.initCommonCondition = function () {
                // Framework の初期化後に処理する必要がある
                if (!Framework.isInitialized()) {
                    console.warn(TAG + "initCommonCondition() should be called after Framework.initialized.");
                    return;
                }
                if (null == Dialog.s_oldBackKeyHandler) {
                    // Back Button Handler
                    Dialog.s_oldBackKeyHandler = CDP.setBackButtonHandler(null);
                    CDP.setBackButtonHandler(Dialog.customBackKeyHandler);
                    // 既定オプション
                    Dialog.s_defaultOptions = {
                        idPositive: "dlg-btn-positive",
                        idNegative: "dlg-btn-negative",
                        event: Framework.getDefaultClickEvent(),
                        dismissible: false,
                        defaultAutoClose: false,
                        transition: "platform-default",
                        labelPositive: "OK",
                        labelNegative: "Cancel",
                        backKey: "close",
                        scrollEvent: "deny",
                        domExtensionOptions: {},
                    };
                }
            };
            /**
             * H/W Back Button Handler
             */
            Dialog.customBackKeyHandler = function (event) {
                if (null != Dialog.s_activeDialog) {
                    if ("close" === Dialog.s_activeDialog._settings.backKey) {
                        Dialog.s_activeDialog.close();
                    }
                    else if ("function" === typeof Dialog.s_activeDialog._settings.backKey) {
                        Dialog.s_activeDialog._settings.backKey(event);
                    }
                    return; // Dialog が active な場合、常に既定のハンドラには渡さない
                }
                Dialog.s_oldBackKeyHandler(event);
            };
            return Dialog;
        }());
        Dialog.s_activeDialog = null;
        Dialog.s_oldBackKeyHandler = null;
        Dialog.s_defaultOptions = null;
        UI.Dialog = Dialog;
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));

/* tslint:disable:max-line-length */
var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var TAG = "[CDP.UI.DialogCommons] ";
        /**
         * Alert
         * alert メッセージ表示
         *
         * @param {String} message   [in] 表示文字列
         * @param {String} [options] [in] ダイアログオプション
         * @return {jQuery} ダイアログの DOM オブジェクト
         */
        function alert(message, options) {
            var template = "\n            <script type=\"text/template\">\n                <section class=\"ui-modal\" data-role=\"popup\" data-corners=\"false\">\n                    <div class=\"ui-content\">\n                        <h1 class=\"ui-title {{_titleState}}\">{{title}}</h1>\n                        <p class=\"ui-message\">{{message}}</p>\n                    </div>\n                    <div class=\"ui-modal-footer ui-grid-solo\">\n                        <button id=\"{{idPositive}}\" class=\"ui-btn ui-block-a ui-text-emphasis\" data-auto-close=\"true\">{{labelPositive}}</button>\n                    </div>\n                </section>\n            </script>\n        ";
            var dlgAlert = new UI.Dialog(template, $.extend({}, {
                src: null,
                message: message,
            }, options));
            return dlgAlert.show();
        }
        UI.alert = alert;
        /**
         * Confirm
         * 確認メッセージ表示
         *
         * @param {String} message   [in] 表示文字列
         * @param {String} [options] [in] ダイアログオプション
         * @return {jQuery} ダイアログの DOM オブジェクト
         */
        function confirm(message, options) {
            var template = "\n            <script type=\"text/template\">\n                <section class=\"ui-modal\" data-role=\"popup\" data-corners=\"false\">\n                    <div class=\"ui-content\">\n                        <h1 class=\"ui-title {{_titleState}}\">{{title}}</h1>\n                        <p class=\"ui-message\">{{message}}</p>\n                    </div>\n                    <div class=\"ui-modal-footer ui-grid-a\">\n                        <button id=\"{{idNegative}}\" class=\"ui-btn ui-block-a\" data-auto-close=\"true\">{{labelNegative}}</button>\n                        <button id=\"{{idPositive}}\" class=\"ui-btn ui-block-b ui-text-emphasis\" data-auto-close=\"true\">{{labelPositive}}</button>\n                    </div>\n                </section>\n            </script>\n        ";
            var dlgConfirm = new UI.Dialog(template, $.extend({}, {
                src: null,
                message: message,
            }, options));
            return dlgConfirm.show();
        }
        UI.confirm = confirm;
        /**
         * @class DialogPrompt
         * @brief prompt ダイアログ (非公開)
         */
        var DialogPrompt = (function (_super) {
            __extends(DialogPrompt, _super);
            /**
             * constructor
             *
             */
            function DialogPrompt(id, options) {
                var _this = _super.call(this, id, options) || this;
                _this._eventOK = options.eventOK || "promptok";
                return _this;
            }
            // ダイアログ表示の直前
            DialogPrompt.prototype.onBeforeShow = function () {
                var _this = this;
                this.$el
                    .on("vclick", ".command-prompt-ok ", function (event) {
                    var text = _this.$el.find("#_ui-prompt").val();
                    _this.$el.trigger(_this._eventOK, text);
                    _this.close();
                    event.preventDefault();
                });
                return _super.prototype.onBeforeShow.call(this);
            };
            return DialogPrompt;
        }(UI.Dialog));
        /**
         * Prompt
         *
         * @param {String} message   [in] 表示文字列
         * @param {String} [options] [in] ダイアログオプション
         * @return {jQuery} ダイアログの DOM オブジェクト
         */
        function prompt(message, options) {
            var template = "\n            <script type=\"text/template\">\n                <section class=\"ui-modal\" data-role=\"popup\" data-corners=\"false\">\n                    <div class=\"ui-content\">\n                        <h1 class=\"ui-title {{_titleState}}\">{{title}}</h1>\n                        <p class=\"ui-message\">{{message}}</p>\n                        <label for=\"_ui-prompt\" class=\"ui-hidden-accessible\"></label>\n                        <input type=\"text\" name=\"_ui-prompt\" id=\"_ui-prompt\">\n                    </div>\n                    <div class=\"ui-modal-footer ui-grid-a\">\n                        <button id=\"{{idNegative}}\" class=\"ui-btn ui-block-a\" data-auto-close=\"true\">{{labelNegative}}</button>\n                        <button id=\"{{idPositive}}\" class=\"command-prompt-ok ui-btn ui-block-b ui-text-emphasis\" data-auto-close=\"false\">{{labelPositive}}</button>\n                    </div>\n                </section>\n            </script>\n        ";
            var dlgPrompt = new DialogPrompt(template, $.extend({}, {
                src: null,
                message: message,
            }, options));
            return dlgPrompt.show();
        }
        UI.prompt = prompt;
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));


var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var Router = CDP.Framework.Router;
        var Template = CDP.Tools.Template;
        var TAG = "[CDP.UI.BaseHeaderView] ";
        //__________________________________________________________________________________________________________//
        /**
         * @class BaseHeaderView
         * @brief 共通ヘッダを操作するクラス
         */
        var BaseHeaderView = (function (_super) {
            __extends(BaseHeaderView, _super);
            /**
             * constructor
             *
             * @param {IPage} _owner [in] オーナーページインスタンス
             */
            function BaseHeaderView(_owner, _options) {
                var _this = _super.call(this, _options = $.extend({
                    el: _owner.$page.find("[data-role='header']"),
                    backCommandSelector: ".command-back",
                    backCommandKind: "pageback",
                }, _options)) || this;
                _this._owner = _owner;
                _this._options = _options;
                // template 設定
                if (_options.baseTemplate) {
                    _this._template = _options.baseTemplate;
                }
                else {
                    _this._template = Template.getJST("\n                    <script type='text/template'>\n                        <header class='ui-header-base ui-body-{{theme}}'>\n                            <div class='ui-fixed-back-indicator'></div>\n                        </header>\n                    </script>\n                ");
                }
                // Backbone.View 用の初期化
                _this.setElement(_this.$el, true);
                return _this;
            }
            ///////////////////////////////////////////////////////////////////////
            // public methods
            /**
             * 初期化
             */
            BaseHeaderView.prototype.create = function () {
                return this.createHeaderBase();
            };
            /**
             * 有効化
             */
            BaseHeaderView.prototype.activate = function () {
                return this.showIndicator();
            };
            /**
             * 無効化
             */
            BaseHeaderView.prototype.inactivate = function () {
                return this.hideIndicator();
            };
            /**
             * 破棄
             */
            BaseHeaderView.prototype.release = function () {
                return this.releaseHeaderBase();
            };
            ///////////////////////////////////////////////////////////////////////
            // private methods
            // 共通ヘッダのベースを準備
            BaseHeaderView.prototype.createHeaderBase = function () {
                // 固定ヘッダのときに有効化
                if ("fixed" === this._owner.$header.jqmData("position")) {
                    if (null == BaseHeaderView.s_$headerBase) {
                        BaseHeaderView.s_$headerBase = $(this._template({
                            theme: this._owner.$page.jqmData("theme"),
                        }));
                    }
                    BaseHeaderView.s_refCount++;
                    BaseHeaderView.s_$headerBase.appendTo($(document.body));
                }
                // Back Indicator を持っているか判定
                if (0 < this.$el.find(".ui-back-indicator").length) {
                    this._hasBackIndicator = true;
                }
                return BaseHeaderView.s_$headerBase;
            };
            // indicator の表示
            BaseHeaderView.prototype.showIndicator = function () {
                // Back Indicator を持っていない場合表示しない
                if (null != BaseHeaderView.s_$headerBase && this._hasBackIndicator) {
                    BaseHeaderView.s_$headerBase.find(".ui-fixed-back-indicator").addClass("show");
                }
                return BaseHeaderView.s_$headerBase;
            };
            // indicator の非表示
            BaseHeaderView.prototype.hideIndicator = function () {
                if (null != BaseHeaderView.s_$headerBase) {
                    BaseHeaderView.s_$headerBase.find(".ui-fixed-back-indicator").removeClass("show");
                }
                return BaseHeaderView.s_$headerBase;
            };
            // 共通ヘッダのベースを破棄
            BaseHeaderView.prototype.releaseHeaderBase = function () {
                if (null != BaseHeaderView.s_$headerBase) {
                    BaseHeaderView.s_refCount--;
                    if (0 === BaseHeaderView.s_refCount) {
                        BaseHeaderView.s_$headerBase.remove();
                        BaseHeaderView.s_$headerBase = null;
                    }
                }
                return BaseHeaderView.s_$headerBase;
            };
            ///////////////////////////////////////////////////////////////////////
            // Override: Backbone.View
            // events binding
            BaseHeaderView.prototype.events = function () {
                var eventMap = {};
                if (this._options) {
                    eventMap["vclick " + this._options.backCommandSelector] = this.onCommandBack;
                }
                return eventMap;
            };
            // back のハンドラ
            BaseHeaderView.prototype.onCommandBack = function (event) {
                event.preventDefault();
                var handled = false;
                if (this._owner) {
                    handled = this._owner.onCommand(event, this._options.backCommandKind);
                }
                if (!handled) {
                    Router.back();
                }
            };
            return BaseHeaderView;
        }(Backbone.View));
        BaseHeaderView.s_refCount = 0; //< 参照カウント
        UI.BaseHeaderView = BaseHeaderView;
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));


/* tslint:disable:max-line-length */
var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var Framework = CDP.Framework;
        var TAG = "[CDP.UI.BasePage] ";
        //__________________________________________________________________________________________________________//
        /**
         * @class BasePage
         * @brief Header を備える Page クラス
         */
        var BasePage = (function (_super) {
            __extends(BasePage, _super);
            /**
             * constructor
             *
             * @param {String}          url       [in] ページ URL
             * @param {String}          id        [in] ページ ID
             * @param {BasePageOptions} [options] [in] オプション
             */
            function BasePage(url, id, _options) {
                var _this = _super.call(this, url, id, _options = $.extend({
                    baseHeader: UI.BaseHeaderView,
                    backCommandHandler: "onPageBack",
                    backCommandKind: "pageback",
                    domExtensionOptions: {},
                }, _options)) || this;
                _this._options = _options;
                return _this;
            }
            ///////////////////////////////////////////////////////////////////////
            // Override: Framework Page
            /**
             * jQM event: "pagebeforecreate" に対応
             *
             * @param event {JQueryEventObject} [in] イベントオブジェクト
             */
            BasePage.prototype.onPageBeforeCreate = function (event) {
                if (this._options.baseHeader) {
                    this._baseHeader = new this._options.baseHeader(this, this._options);
                    this._baseHeader.create();
                }
                _super.prototype.onPageBeforeCreate.call(this, event);
            };
            /**
             * jQM event: "pagecreate" に対応
             *
             * @param event {JQueryEventObject} [in] イベントオブジェクト
             */
            BasePage.prototype.onPageInit = function (event) {
                if (null != this._options.domExtensionOptions) {
                    UI.ExtensionManager.applyDomExtension(this.$page, this._options.domExtensionOptions);
                }
                _super.prototype.onPageInit.call(this, event);
            };
            /**
             * jQM event: "pagebeforeshow" に対応
             *
             * @param event {JQueryEventObject} [in] イベントオブジェクト
             * @param data  {ShowEventData}     [in] 付加情報
             */
            BasePage.prototype.onPageBeforeShow = function (event, data) {
                if (this._baseHeader) {
                    this._baseHeader.activate();
                }
                _super.prototype.onPageBeforeShow.call(this, event, data);
            };
            /**
             * jQM event: "pagebeforehide" に対応
             *
             * @param event {JQueryEventObject} [in] イベントオブジェクト
             * @param data  {HideEventData}     [in] 付加情報
             */
            BasePage.prototype.onPageBeforeHide = function (event, data) {
                if (this._baseHeader) {
                    this._baseHeader.inactivate();
                }
                _super.prototype.onPageBeforeHide.call(this, event, data);
            };
            /**
             * jQM event: "pageremove" に対応
             *
             * @param event {JQueryEventObject} [in] イベントオブジェクト
             */
            BasePage.prototype.onPageRemove = function (event) {
                if (this._baseHeader) {
                    this._baseHeader.release();
                    this._baseHeader = null;
                }
                _super.prototype.onPageRemove.call(this, event);
            };
            /**
             * H/W Back Button ハンドラ
             *
             * @param  event {JQueryEventObject} [in] event object
             * @return {Boolean} true: 既定の処理を行わない / false: 既定の処理を行う
             */
            BasePage.prototype.onHardwareBackButton = function (event) {
                var retval = _super.prototype.onHardwareBackButton.call(this, event);
                if (!retval) {
                    retval = this.onCommand(event, this._options.backCommandKind);
                }
                return retval;
            };
            ///////////////////////////////////////////////////////////////////////
            // Override: Custom Event
            /**
             * "戻る" event 発行時にコールされる
             *
             * @param event {JQueryEventObject} [in] イベントオブジェクト
             * @return {Boolean} true: 既定の処理を行わない / false: 既定の処理を行う
             */
            BasePage.prototype.onCommand = function (event, kind) {
                if (this._options.backCommandKind === kind) {
                    if (this._owner && this._owner[this._options.backCommandHandler]) {
                        return this._owner[this._options.backCommandHandler](event);
                    }
                }
                return false;
            };
            return BasePage;
        }(Framework.Page));
        UI.BasePage = BasePage;
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));

/* tslint:disable:max-line-length */
var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var TAG = "[CDP.UI.PageView] ";
        /**
         * @class PageContainerView
         * @brief PageView と連携可能な コンテナビュークラス
         */
        var PageContainerView = (function (_super) {
            __extends(PageContainerView, _super);
            /**
             * constructor
             */
            function PageContainerView(options) {
                var _this = _super.call(this, options) || this;
                _this._owner = null;
                _this._owner = options.owner;
                if (options.$el) {
                    var delegates = _this.events ? true : false;
                    _this.setElement(options.$el, delegates);
                }
                return _this;
            }
            Object.defineProperty(PageContainerView.prototype, "owner", {
                ///////////////////////////////////////////////////////////////////////
                // short cut methods
                // Owner 取得
                get: function () {
                    return this._owner;
                },
                enumerable: true,
                configurable: true
            });
            return PageContainerView;
        }(Backbone.View));
        UI.PageContainerView = PageContainerView;
        //___________________________________________________________________________________________________________________//
        /**
         * @class PageView
         * @brief CDP.Framework.Page と Backbone.View の両方の機能を提供するページの基底クラス
         */
        var PageView = (function (_super) {
            __extends(PageView, _super);
            /**
             * constructor
             *
             * @param url     {String}                   [in] ページ URL
             * @param id      {String}                   [in] ページ ID
             * @param options {PageViewConstructOptions} [in] オプション
             */
            function PageView(url, id, options) {
                var _this = _super.call(this, options) || this;
                _this._pageOptions = null;
                _this._basePage = null;
                _this._statusMgr = null;
                // PageView 設定
                _this._pageOptions = $.extend({}, { owner: _this }, options);
                _this._basePage = _this._pageOptions.basePage ? new _this._pageOptions.basePage(url, id, _this._pageOptions) : new UI.BasePage(url, id, _this._pageOptions);
                // StatusManager
                _this._statusMgr = new UI.StatusManager();
                // Backbone.View 用の初期化
                var delegates = _this.events ? true : false;
                _this.setElement(_this.$page, delegates);
                return _this;
            }
            ///////////////////////////////////////////////////////////////////////
            // Implements: IStatusManager 状態管理
            /**
             * 状態変数の参照カウントのインクリメント
             *
             * @param status {String} [in] 状態識別子
             */
            PageView.prototype.statusAddRef = function (status) {
                return this._statusMgr.statusAddRef(status);
            };
            /**
             * 状態変数の参照カウントのデクリメント
             *
             * @param status {String} [in] 状態識別子
             */
            PageView.prototype.statusRelease = function (status) {
                return this._statusMgr.statusRelease(status);
            };
            /**
             * 処理スコープ毎に状態変数を設定
             *
             * @param status   {String}   [in] 状態識別子
             * @param callback {Function} [in] 処理コールバック
             */
            PageView.prototype.statusScope = function (status, callback) {
                this._statusMgr.statusScope(status, callback);
            };
            /**
             * 指定した状態中であるか確認
             *
             * @param status {String}   [in] 状態識別子
             * @return {Boolean} true: 状態内 / false: 状態外
             */
            PageView.prototype.isStatusIn = function (status) {
                return this._statusMgr.isStatusIn(status);
            };
            Object.defineProperty(PageView.prototype, "active", {
                ///////////////////////////////////////////////////////////////////////
                // IPage stub stuff.
                get: function () { return this._basePage.active; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(PageView.prototype, "url", {
                get: function () { return this._basePage.url; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(PageView.prototype, "id", {
                get: function () { return this._basePage ? this._basePage.id : null; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(PageView.prototype, "$page", {
                get: function () { return this._basePage.$page; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(PageView.prototype, "$header", {
                get: function () { return this._basePage.$header; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(PageView.prototype, "$footer", {
                get: function () { return this._basePage.$footer; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(PageView.prototype, "intent", {
                get: function () { return this._basePage.intent; },
                set: function (newIntent) { this._basePage.intent = newIntent; },
                enumerable: true,
                configurable: true
            });
            /**
             * Orientation の変更を受信
             *
             * @param newOrientation {Orientation} [in] new orientation code.
             */
            PageView.prototype.onOrientationChanged = function (newOrientation) {
                // Override
            };
            /**
             * H/W Back Button ハンドラ
             *
             * @param  event {JQueryEventObject} [in] event object
             * @return {Boolean} true: 既定の処理を行わない / false: 既定の処理を行う
             */
            PageView.prototype.onHardwareBackButton = function (event) {
                return false;
            };
            /**
             * Router "before route change" ハンドラ
             * ページ遷移直前に非同期処理を行うことが可能
             *
             * @return {JQueryPromise} jQueryPromise オブジェクト
             */
            PageView.prototype.onBeforeRouteChange = function () {
                return $.Deferred().resolve().promise();
            };
            /**
             * 汎用コマンドを受信
             *
             * @param  event {JQueryEventObject} [in] event object
             * @param  event {kind}              [in] command kind string
             * @return {Boolean} true: 既定の処理を行わない / false: 既定の処理を行う
             */
            PageView.prototype.onCommand = function (event, kind) {
                return false;
            };
            /**
             * 最初の OnPageInit() のときにのみコールされる
             *
             * @param event {JQueryEventObject} [in] イベントオブジェクト
             */
            PageView.prototype.onInitialize = function (event) {
                // Override
            };
            /**
             * jQM event: "pagebeforecreate" に対応
             *
             * @param event {JQueryEventObject} [in] イベントオブジェクト
             */
            PageView.prototype.onPageBeforeCreate = function (event) {
                this.setElement(this.$page, true);
            };
            /**
             * jQM event: "pagecreate" (旧:"pageinit") に対応
             *
             * @param event {JQueryEventObject} [in] イベントオブジェクト
             */
            PageView.prototype.onPageInit = function (event) {
                // Override
            };
            /**
             * jQM event: "pagebeforeshow" に対応
             *
             * @param event {JQueryEventObject} [in] イベントオブジェクト
             * @param data  {ShowEventData}     [in] 付加情報
             */
            PageView.prototype.onPageBeforeShow = function (event, data) {
                // Override
            };
            /**
             * jQM event: "pagecontainershow" (旧:"pageshow") に対応
             *
             * @param event {JQueryEventObject} [in] イベントオブジェクト
             * @param data  {ShowEventData}     [in] 付加情報
             */
            PageView.prototype.onPageShow = function (event, data) {
                // Override
            };
            /**
             * jQM event: "pagebeforehide" に対応
             *
             * @param event {JQueryEventObject} [in] イベントオブジェクト
             * @param data  {HideEventData}     [in] 付加情報
             */
            PageView.prototype.onPageBeforeHide = function (event, data) {
                // Override
            };
            /**
             * jQM event: "pagecontainerhide" (旧:"pagehide") に対応
             *
             * @param event {JQueryEventObject} [in] イベントオブジェクト
             * @param data  {HideEventData}     [in] 付加情報
             */
            PageView.prototype.onPageHide = function (event, data) {
                // Override
            };
            /**
             * jQM event: "pageremove" に対応
             *
             * @param event {JQueryEventObject} [in] イベントオブジェクト
             */
            PageView.prototype.onPageRemove = function (event) {
                this.remove();
            };
            return PageView;
        }(Backbone.View));
        UI.PageView = PageView;
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));

/* tslint:disable:max-line-length */
var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var TAG = "[CDP.UI.PageListView] ";
        /**
         * @class PageListView
         * @brief 仮想リストビュー機能を持つ PageView クラス
         */
        var PageListView = (function (_super) {
            __extends(PageListView, _super);
            /**
             * constructor
             *
             * @param url     {String}                       [in] page template に使用する URL
             * @param id      {String}                       [in] page に振られた ID
             * @param options {PageListViewConstructOptions} [in] オプション
             */
            function PageListView(url, id, options) {
                var _this = _super.call(this, url, id, $.extend({}, {
                    autoDestoryElement: false,
                }, options)) || this;
                _this._scrollMgr = null; //< scroll コアロジック
                _this._needRebuild = false; //< ページ表示時に rebuild() をコールするための内部変数
                _this._scrollMgr = new UI.ScrollManager(options);
                return _this;
            }
            // rebuild() のスケジューリング
            PageListView.prototype.reserveRebuild = function () {
                this._needRebuild = true;
            };
            ///////////////////////////////////////////////////////////////////////
            // Override: PageView
            // Orientation の変更検知
            PageListView.prototype.onOrientationChanged = function (newOrientation) {
                this._scrollMgr.setBaseHeight(this.getPageBaseHeight());
            };
            // ページ遷移直前イベント処理
            PageListView.prototype.onBeforeRouteChange = function () {
                if (this._pageOptions.autoDestoryElement) {
                    this._scrollMgr.destroy();
                }
                return _super.prototype.onBeforeRouteChange.call(this);
            };
            // jQM event: "pagebeforeshow" に対応
            PageListView.prototype.onPageBeforeShow = function (event, data) {
                _super.prototype.onPageBeforeShow.call(this, event, data);
                this._scrollMgr.initialize(this.$page, this.getPageBaseHeight());
            };
            // jQM event: "pagecontainershow" (旧:"pageshow") に対応
            PageListView.prototype.onPageShow = function (event, data) {
                _super.prototype.onPageShow.call(this, event, data);
                this._scrollMgr.setBaseHeight(this.getPageBaseHeight());
                if (this._needRebuild) {
                    this.rebuild();
                    this._needRebuild = false;
                }
            };
            // jQM event: "pageremove" に対応
            PageListView.prototype.onPageRemove = function (event) {
                _super.prototype.onPageRemove.call(this, event);
                this.release();
            };
            ///////////////////////////////////////////////////////////////////////
            // Implements: IListView Profile 管理
            // 初期化済みか判定
            PageListView.prototype.isInitialized = function () {
                return this._scrollMgr.isInitialized();
            };
            // プロパティを指定して、ListItem を管理
            PageListView.prototype.addItem = function (height, initializer, info, insertTo) {
                this._addLine(new UI.LineProfile(this._scrollMgr, Math.floor(height), initializer, info), insertTo);
            };
            PageListView.prototype.removeItem = function (index, arg2, arg3) {
                this._scrollMgr.removeItem(index, arg2, arg3);
            };
            PageListView.prototype.getItemInfo = function (target) {
                return this._scrollMgr.getItemInfo(target);
            };
            // アクティブページを更新
            PageListView.prototype.refresh = function () {
                this._scrollMgr.refresh();
            };
            // 未アサインページを構築
            PageListView.prototype.update = function () {
                this._scrollMgr.update();
            };
            // ページアサインを再構成
            PageListView.prototype.rebuild = function () {
                this._scrollMgr.rebuild();
            };
            // 管轄データを破棄
            PageListView.prototype.release = function () {
                this._scrollMgr.release();
            };
            ///////////////////////////////////////////////////////////////////////
            // Implements: IListView Profile Backup / Restore
            // 内部データをバックアップ
            PageListView.prototype.backup = function (key) {
                return this._scrollMgr.backup(key);
            };
            // 内部データをリストア
            PageListView.prototype.restore = function (key, rebuild) {
                if (rebuild === void 0) { rebuild = true; }
                var retval = this._scrollMgr.restore(key, rebuild);
                if (retval && !rebuild) {
                    this.reserveRebuild();
                }
                return retval;
            };
            // バックアップデータの有無
            PageListView.prototype.hasBackup = function (key) {
                return this._scrollMgr.hasBackup(key);
            };
            // バックアップデータの破棄
            PageListView.prototype.clearBackup = function (key) {
                return this._scrollMgr.clearBackup(key);
            };
            Object.defineProperty(PageListView.prototype, "backupData", {
                // バックアップデータにアクセス
                get: function () {
                    return this._scrollMgr.backupData;
                },
                enumerable: true,
                configurable: true
            });
            ///////////////////////////////////////////////////////////////////////
            // Implements: IListView Scroll
            // スクロールイベントハンドラ設定/解除
            PageListView.prototype.setScrollHandler = function (handler, on) {
                this._scrollMgr.setScrollHandler(handler, on);
            };
            // スクロール終了イベントハンドラ設定/解除
            PageListView.prototype.setScrollStopHandler = function (handler, on) {
                this._scrollMgr.setScrollStopHandler(handler, on);
            };
            // スクロール位置を取得
            PageListView.prototype.getScrollPos = function () {
                return this._scrollMgr.getScrollPos();
            };
            // スクロール位置の最大値を取得
            PageListView.prototype.getScrollPosMax = function () {
                return this._scrollMgr.getScrollPosMax();
            };
            // スクロール位置を指定
            PageListView.prototype.scrollTo = function (pos, animate, time) {
                this._scrollMgr.scrollTo(pos, animate, time);
            };
            // 指定された ListItemView の表示を保証
            PageListView.prototype.ensureVisible = function (index, options) {
                this._scrollMgr.ensureVisible(index, options);
            };
            Object.defineProperty(PageListView.prototype, "core", {
                ///////////////////////////////////////////////////////////////////////
                // Implements: IListView Properties
                // core framework access
                get: function () {
                    return this._scrollMgr;
                },
                enumerable: true,
                configurable: true
            });
            ///////////////////////////////////////////////////////////////////////
            // Implements: IListView Internal I/F
            // 登録 framework が使用する
            PageListView.prototype._addLine = function (_line, insertTo) {
                this._scrollMgr._addLine(_line, insertTo);
            };
            ///////////////////////////////////////////////////////////////////////
            // private method:
            // ページの基準値を取得
            PageListView.prototype.getPageBaseHeight = function () {
                return $(window).height() - parseInt(this.$page.css("padding-top"), 10);
            };
            return PageListView;
        }(UI.PageView));
        UI.PageListView = PageListView;
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));

var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var TAG = "[CDP.UI.PageExpandableListView] ";
        /**
         * @class PageExpandableListView
         * @brief 開閉リストビュー機能を持つ PageView クラス
         */
        var PageExpandableListView = (function (_super) {
            __extends(PageExpandableListView, _super);
            /**
             * constructor
             *
             * @param url     {String}                       [in] page template に使用する URL
             * @param id      {String}                       [in] page に振られた ID
             * @param options {PageListViewConstructOptions} [in] オプション
             */
            function PageExpandableListView(url, id, options) {
                var _this = _super.call(this, url, id, options) || this;
                _this._expandManager = null;
                _this._expandManager = new UI.ExpandManager(_this);
                return _this;
            }
            ///////////////////////////////////////////////////////////////////////
            // Implements: IExpandableListView
            // 新規 GroupProfile を作成
            PageExpandableListView.prototype.newGroup = function (id) {
                return this._expandManager.newGroup(id);
            };
            // 登録済み Group を取得
            PageExpandableListView.prototype.getGroup = function (id) {
                return this._expandManager.getGroup(id);
            };
            // 第1階層の Group 登録
            PageExpandableListView.prototype.registerTopGroup = function (topGroup) {
                this._expandManager.registerTopGroup(topGroup);
            };
            // 第1階層の Group を取得
            PageExpandableListView.prototype.getTopGroups = function () {
                return this._expandManager.getTopGroups();
            };
            // すべてのグループを展開 (1階層)
            PageExpandableListView.prototype.expandAll = function () {
                this._expandManager.expandAll();
            };
            // すべてのグループを収束 (1階層)
            PageExpandableListView.prototype.collapseAll = function (delay) {
                this._expandManager.collapseAll(delay);
            };
            // 展開中か判定
            PageExpandableListView.prototype.isExpanding = function () {
                return this._expandManager.isExpanding();
            };
            // 収束中か判定
            PageExpandableListView.prototype.isCollapsing = function () {
                return this._expandManager.isCollapsing();
            };
            // 開閉中か判定
            PageExpandableListView.prototype.isSwitching = function () {
                return this._expandManager.isSwitching();
            };
            Object.defineProperty(PageExpandableListView.prototype, "layoutKey", {
                // layout key を取得
                get: function () {
                    return this._expandManager.layoutKey;
                },
                // layout key を設定
                set: function (key) {
                    this._expandManager.layoutKey = key;
                },
                enumerable: true,
                configurable: true
            });
            ///////////////////////////////////////////////////////////////////////
            // Override: PageListView
            // データを破棄
            PageExpandableListView.prototype.release = function () {
                _super.prototype.release.call(this);
                this._expandManager.release();
            };
            // 内部データをバックアップ
            PageExpandableListView.prototype.backup = function (key) {
                return this._expandManager.backup(key);
            };
            // 内部データをリストア
            PageExpandableListView.prototype.restore = function (key, rebuild) {
                if (rebuild === void 0) { rebuild = true; }
                return this._expandManager.restore(key, rebuild);
            };
            return PageExpandableListView;
        }(UI.PageListView));
        UI.PageExpandableListView = PageExpandableListView;
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));

var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var Extension;
        (function (Extension) {
            var Framework = CDP.Framework;
            // jQuery plugin
            $.fn.ripple = function (options) {
                var $el = $(this);
                return $el.on(Framework.Patch.s_vclickEvent, function (event) {
                    var surface = $(this);
                    // create surface if it doesn't exist
                    if (surface.find(".ui-ripple-ink").length === 0) {
                        surface.prepend("<div class='ui-ripple-ink'></div>");
                    }
                    var ink = surface.find(".ui-ripple-ink");
                    // stop the previous animation
                    ink.removeClass("ui-ripple-animate");
                    // ink size:
                    if (!ink.height() && !ink.width()) {
                        var d = Math.max(surface.outerWidth(), surface.outerHeight());
                        ink.css({ height: d, width: d });
                    }
                    var x = event.pageX - surface.offset().left - (ink.width() / 2);
                    var y = event.pageY - surface.offset().top - (ink.height() / 2);
                    var rippleColor = surface.data("ripple-color");
                    // animation end handler
                    var ANIMATION_END_EVENT = "animationend webkitAnimationEnd";
                    ink.on(ANIMATION_END_EVENT, function (event) {
                        ink.off();
                        ink.removeClass("ui-ripple-animate");
                        ink = null;
                    });
                    // set the position and add class .animate
                    ink.css({
                        top: y + "px",
                        left: x + "px",
                        background: rippleColor
                    }).addClass("ui-ripple-animate");
                });
            };
            /**
             * Material Design Ripple 拡張
             *
             * @param {jQuery}              $ui       [in] 検索対象の jQuery オブジェクト
             * @param {DomExtensionOptions} [options] [in] オプション
             */
            function applyDomExtension($ui, options) {
                var NO_RIPPLE_CLASS = [
                    ".ui-ripple-none",
                    ".ui-flipswitch-on",
                    ".ui-slider-handle",
                    ".ui-input-clear",
                ];
                var selector = ".ui-btn";
                if ($ui.hasClass("ui-page")) {
                    selector = ".ui-content .ui-btn"; // header は自動 ripple 化対象外
                }
                $ui.find(selector)
                    .filter(function (index, elem) {
                    var $elem = $(elem);
                    if ($elem.is(NO_RIPPLE_CLASS.join(","))) {
                        return false;
                    }
                    else {
                        return true;
                    }
                })
                    .addClass("ui-ripple");
                // ripplify
                $ui.find(".ui-ripple").ripple();
                return $ui;
            }
            // 登録
            UI.ExtensionManager.registerDomExtension(applyDomExtension);
        })(Extension = UI.Extension || (UI.Extension = {}));
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));

var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var Extension;
        (function (Extension) {
            var Template = CDP.Tools.Template;
            var _template;
            /**
             * Material Design Spinner 拡張
             *
             * @param {jQuery}              $target   [in] 検索対象の jQuery オブジェクト
             * @param {DomExtensionOptions} [options] [in] オプション
             */
            function applyDomExtension($target, options) {
                if (!_template) {
                    _template = Template.getJST("\n                <script type=\"text/template\">\n                    <span class=\"ui-spinner-base\">\n                        <span class=\"ui-spinner-inner\">\n                            <span class=\"ui-spinner-inner-gap\" {{borderTop}}></span>\n                            <span class=\"ui-spinner-inner-left\">\n                                <span class=\"ui-spinner-inner-half-circle\" {{border}}></span>\n                            </span>\n                            <span class=\"ui-spinner-inner-right\">\n                                <span class=\"ui-spinner-inner-half-circle\" {{border}}></span>\n                            </span>\n                        </span>\n                    </span>\n                </script>\n            ");
                }
                var makeTemplateParam = function (color) {
                    return {
                        borderTop: "style=border-top-color:" + color + ";",
                        border: "style=border-color:" + color + ";",
                    };
                };
                var spinnerify = function (elem) {
                    var $elem = $(elem);
                    var color = $elem.data("spinner-color");
                    var param = null;
                    if (color) {
                        $elem.css({ "background-color": color });
                        param = makeTemplateParam(color);
                    }
                    $elem.append(_template(param));
                };
                $target.find(".ui-spinner, .ui-icon-loading")
                    .each(function (index, elem) {
                    spinnerify(elem);
                });
                return $target;
            }
            // jQuery plugin
            $.fn.spinner = function (options) {
                return applyDomExtension($(this), options);
            };
            // 登録
            UI.ExtensionManager.registerDomExtension(applyDomExtension);
        })(Extension = UI.Extension || (UI.Extension = {}));
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));

var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var Extension;
        (function (Extension) {
            /**
             * Text Input 用 Floating Label 拡張
             *
             * @param {jQuery}              $ui       [in] 検索対象の jQuery オブジェクト
             * @param {DomExtensionOptions} [options] [in] オプション
             */
            function applyDomExtension($ui, options) {
                var update = function (elem, floating) {
                    var $elem = $(elem);
                    if (floating) {
                        $elem.addClass("ui-float-label-floating");
                    }
                    else {
                        $elem.removeClass("ui-float-label-floating");
                    }
                };
                var floatingify = function (elem) {
                    var id = $(elem).attr("for");
                    var $input = $ui.find("#" + id);
                    if ("search" === $input.jqmData("type")) {
                        $(elem).addClass("ui-float-label-has-icon");
                    }
                    update(elem, !!$input.val());
                    $input.on("keyup change input focus blur cut paste", function (event) {
                        update(elem, !!$(event.target).val());
                    });
                };
                $ui.find("label.ui-float-label, .ui-float-label label")
                    .each(function (index, elem) {
                    floatingify(elem);
                });
                return $ui;
            }
            // 登録
            UI.ExtensionManager.registerDomExtension(applyDomExtension);
        })(Extension = UI.Extension || (UI.Extension = {}));
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));

var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var Extension;
        (function (Extension) {
            var Framework = CDP.Framework;
            /**
             * jQuery Mobile Flip Switch 拡張
             *
             * @param {jQuery}              $ui       [in] 検索対象の jQuery オブジェクト
             * @param {DomExtensionOptions} [options] [in] オプション
             */
            function applyDomExtension($ui, options) {
                /*
                 * flipswitch に紐づく label は OS によって event 発行形式が異なるためフックして独自イベントで対応する.
                 * また flipswitch は内部で click を発行しているが、vclick に変更する.
                 */
                var _getAllSwitches = function () {
                    return $ui.find(".ui-flipswitch");
                };
                var _getInputFromSwitch = function ($switch) {
                    var $input = $switch.find("input");
                    if ($input.length) {
                        return $input;
                    }
                    var $select = $switch.find("select");
                    if ($select.length) {
                        return $select;
                    }
                    return null;
                };
                var _change = function ($input, to) {
                    if ($input) {
                        if ("INPUT" === $input[0].nodeName) {
                            $input.prop("checked", to).flipswitch("refresh");
                        }
                        else if ("SELECT" === $input[0].nodeName) {
                            $input.val(to ? "on" : "off").flipswitch("refresh");
                        }
                    }
                };
                var _getLabelsFromSwitch = function ($switch) {
                    var $input = _getInputFromSwitch($switch);
                    if ($input) {
                        var labels = $input[0].labels;
                        if (labels) {
                            return $(labels);
                        }
                    }
                    return $();
                };
                var _getSwitchFromLabel = function ($label) {
                    var name = $label.attr("for");
                    return _getAllSwitches().find("[name='" + name + "']");
                };
                _getAllSwitches()
                    .on("vclick _change_flipswich", function (event) {
                    var $switch = $(event.currentTarget);
                    var $target = $(event.target);
                    var $input = _getInputFromSwitch($switch);
                    var changeTo = !$switch.hasClass("ui-flipswitch-active");
                    if ($target.hasClass("ui-flipswitch-input")) {
                        _change($input, changeTo);
                    }
                    else if ($target.hasClass("ui-flipswitch-on")) {
                        if (Framework.Platform.Mobile && Framework.Patch.isSupportedVclick()) {
                            _change($input, changeTo);
                            event.preventDefault();
                        }
                    }
                })
                    .each(function (index, flipswitch) {
                    _getLabelsFromSwitch($(flipswitch))
                        .on("vclick", function (event) {
                        var $switch = _getSwitchFromLabel($(event.target));
                        if (!$switch.parent().hasClass("ui-state-disabled")) {
                            $switch.trigger("_change_flipswich");
                        }
                        event.preventDefault();
                    });
                });
                return $ui;
            }
            // 登録
            UI.ExtensionManager.registerDomExtension(applyDomExtension);
        })(Extension = UI.Extension || (UI.Extension = {}));
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));

var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var Extension;
        (function (Extension) {
            /**
             * jQuery Mobile Slider 拡張
             *
             * @param {jQuery}              $ui       [in] 検索対象の jQuery オブジェクト
             * @param {DomExtensionOptions} [options] [in] オプション
             */
            function applyDomExtension($ui, options) {
                $ui.find(".ui-slider-input")
                    .on("slidestop", function (event) {
                    var $handles = $(event.currentTarget)
                        .parent()
                        .find(".ui-slider-handle");
                    $handles.blur();
                });
                return $ui;
            }
            // 登録
            UI.ExtensionManager.registerDomExtension(applyDomExtension);
        })(Extension = UI.Extension || (UI.Extension = {}));
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));

var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var Extension;
        (function (Extension) {
            // iScroll.click patch
            var patch_IScroll_utils_click = function (event) {
                var target = event.target;
                var ev;
                var e = event;
                // [CDP modified]: set target.clientX.
                if (null == target.clientX || null == target.clientY) {
                    if (null != e.pageX && null != e.pageY) {
                        target.clientX = e.pageX;
                        target.clientY = e.pageY;
                    }
                    else if (e.changedTouches && e.changedTouches[0]) {
                        target.clientX = e.changedTouches[0].pageX;
                        target.clientY = e.changedTouches[0].pageY;
                    }
                }
                if (!(/(SELECT|INPUT|TEXTAREA)/i).test(target.tagName)) {
                    ev = document.createEvent("MouseEvents");
                    ev.initMouseEvent("click", true, true, e.view, 1, target.screenX, target.screenY, target.clientX, target.clientY, e.ctrlKey, e.altKey, e.shiftKey, e.metaKey, 0, null);
                    ev._constructed = true;
                    target.dispatchEvent(ev);
                }
            };
            var s_applied = false;
            /**
             * iScroll Patch 拡張
             *
             * @param {jQuery}              $ui       [in] 検索対象の jQuery オブジェクト
             * @param {DomExtensionOptions} [options] [in] オプション
             */
            function applyPatch($ui, options) {
                if (!s_applied && UI.global.IScroll && UI.global.IScroll.utils) {
                    UI.global.IScroll.utils.click = patch_IScroll_utils_click;
                    s_applied = true;
                }
                return $ui;
            }
            // 登録
            UI.ExtensionManager.registerDomExtension(applyPatch);
        })(Extension = UI.Extension || (UI.Extension = {}));
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));

return CDP.UI; }));
// amd define function shim
(function (root) {
    if (!(typeof define === "function" && define.amd)) {
        root.define = function () { /* noop */ };
    }
})(this);

define("cdp/core/core", ["require", "exports", "cdp.core"], function (require, exports, _core) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    // CDP stuff
    exports.global = _core.global;
    exports.coreInitialize = _core.initialize;
    exports.webRoot = _core.webRoot;
    exports.Config = _core.Config;
});
define("cdp/core/promise", ["require", "exports", "cdp.promise"], function (require, exports, _promise) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    // Promise methods
    exports.makePromise = _promise.makePromise;
    exports.wait = _promise.wait;
    exports.PromiseManager = _promise.PromiseManager;
});
define("cdp/core/i18n", ["require", "exports", "cdp.i18n"], function (require, exports, _i18n) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    // CDP stuff
    exports.i18n = _i18n.i18n;
});
/// <amd-dependency path="cdp.framework.jqm" />
define("cdp/core/framework.jqm", ["require", "exports", "cdp.framework.jqm"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    // CDP methods
    exports.waitForDeviceReady = CDP.waitForDeviceReady;
    exports.setBackButtonHandler = CDP.setBackButtonHandler;
});
define("cdp/core", ["require", "exports", "cdp/core/core", "cdp/core/promise", "cdp/core/i18n", "cdp/core/framework.jqm"], function (require, exports, core_1, promise_1, i18n_1, framework_jqm_1) {
    "use strict";
    function __export(m) {
        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];
    }
    Object.defineProperty(exports, "__esModule", { value: true });
    __export(core_1);
    __export(promise_1);
    __export(i18n_1);
    __export(framework_jqm_1);
});
define("cdp/framework/jqm", ["require", "exports", "cdp.framework.jqm"], function (require, exports, _framework) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.Patch = _framework.Patch;
    // @module Platform
    exports.Platform = _framework.Platform;
    // Framework methods
    exports.getOrientation = _framework.getOrientation;
    exports.toUrl = _framework.toUrl;
    exports.setBeforeRouteChangeHandler = _framework.setBeforeRouteChangeHandler;
    exports.Router = _framework.Router;
    // Framework Core APIs
    exports.initialize = _framework.initialize;
    exports.isInitialized = _framework.isInitialized;
    exports.waitForInitialize = _framework.waitForInitialize;
    exports.registerOrientationChangedListener = _framework.registerOrientationChangedListener;
    exports.unregisterOrientationChangedListener = _framework.unregisterOrientationChangedListener;
    exports.setupEventHandlers = _framework.setupEventHandlers;
    exports.setActivePage = _framework.setActivePage;
    exports.getDefaultClickEvent = _framework.getDefaultClickEvent;
    exports.Page = _framework.Page;
});
define("cdp/framework", ["require", "exports", "cdp/framework/jqm"], function (require, exports, jqm_1) {
    "use strict";
    function __export(m) {
        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];
    }
    Object.defineProperty(exports, "__esModule", { value: true });
    __export(jqm_1);
});
define("cdp/tools/tools", ["require", "exports", "cdp.tools"], function (require, exports, _tools) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    // @module Blob
    var Blob;
    (function (Blob) {
        // Blob methods
        Blob.arrayBufferToBlob = _tools.Blob.arrayBufferToBlob;
        Blob.base64ToBlob = _tools.Blob.base64ToBlob;
        Blob.base64ToArrayBuffer = _tools.Blob.base64ToArrayBuffer;
        Blob.base64ToUint8Array = _tools.Blob.base64ToUint8Array;
        Blob.arrayBufferToBase64 = _tools.Blob.arrayBufferToBase64;
        Blob.uint8ArrayToBase64 = _tools.Blob.uint8ArrayToBase64;
        // Blob stuff
        Blob.URL = _tools.Blob.URL;
    })(Blob = exports.Blob || (exports.Blob = {}));
    exports.DateTime = _tools.DateTime;
    // Tools APIs
    exports.abs = _tools.abs;
    exports.max = _tools.max;
    exports.min = _tools.min;
    exports.await = _tools.await;
    exports.toZeroPadding = _tools.toZeroPadding;
    exports.inherit = _tools.inherit;
    exports.mixin = _tools.mixin;
    exports.extend = _tools.extend;
    exports.getDevicePixcelRatio = _tools.getDevicePixcelRatio;
    exports.doWork = _tools.doWork;
    exports.Template = _tools.Template;
});
define("cdp/tools", ["require", "exports", "cdp/tools/tools"], function (require, exports, tools_1) {
    "use strict";
    function __export(m) {
        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];
    }
    Object.defineProperty(exports, "__esModule", { value: true });
    __export(tools_1);
});
define("cdp/ui/listview", ["require", "exports", "cdp.ui.listview"], function (require, exports, _ui) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    // global config
    exports.ListViewGlobalConfig = _ui.ListViewGlobalConfig;
    exports.LineProfile = _ui.LineProfile;
    exports.GroupProfile = _ui.GroupProfile;
    // ListView APIs
    exports.composeViews = _ui.composeViews;
    exports.deriveViews = _ui.deriveViews;
    exports.mixinViews = _ui.mixinViews;
    exports.StatusManager = _ui.StatusManager;
    exports.PageProfile = _ui.PageProfile;
    exports.ScrollerElement = _ui.ScrollerElement;
    // @class ScrollerNative
    exports.ScrollerNative = _ui.ScrollerNative;
    exports.ScrollerIScroll = _ui.ScrollerIScroll;
    exports.ListItemView = _ui.ListItemView;
    exports.ScrollManager = _ui.ScrollManager;
    exports.ListView = _ui.ListView;
    exports.GroupListItemView = _ui.GroupListItemView;
    exports.ExpandManager = _ui.ExpandManager;
    exports.ExpandableListView = _ui.ExpandableListView;
});
define("cdp/ui/jqm", ["require", "exports", "cdp.ui.jqm"], function (require, exports, _ui) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.Theme = _ui.Theme;
    exports.ExtensionManager = _ui.ExtensionManager;
    // @module Toast
    var Toast;
    (function (Toast) {
        // Toast stuff
        Toast.LENGTH_SHORT = _ui.Toast.LENGTH_SHORT;
        Toast.LENGTH_LONG = _ui.Toast.LENGTH_LONG;
        Toast.StyleBuilderDefault = _ui.Toast.StyleBuilderDefault;
        Toast.show = _ui.Toast.show;
    })(Toast = exports.Toast || (exports.Toast = {}));
    exports.Dialog = _ui.Dialog;
    // @functions DialogCommons
    exports.alert = _ui.alert;
    exports.confirm = _ui.confirm;
    exports.prompt = _ui.prompt;
    exports.BaseHeaderView = _ui.BaseHeaderView;
    exports.BasePage = _ui.BasePage;
    exports.PageContainerView = _ui.PageContainerView;
    exports.PageView = _ui.PageView;
    exports.PageListView = _ui.PageListView;
    exports.PageExpandableListView = _ui.PageExpandableListView;
});
define("cdp/ui", ["require", "exports", "cdp/ui/listview", "cdp/ui/jqm"], function (require, exports, listview_1, jqm_2) {
    "use strict";
    function __export(m) {
        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];
    }
    Object.defineProperty(exports, "__esModule", { value: true });
    __export(listview_1);
    __export(jqm_2);
});







/// <amd-module name="cdp" />
define("cdp", ["require", "exports", "cdp/core", "cdp/framework", "cdp/tools", "cdp/ui"], function (require, exports, core_2, Framework, Tools, UI) {
    "use strict";
    function __export(m) {
        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];
    }
    Object.defineProperty(exports, "__esModule", { value: true });
    __export(core_2);
    exports.Framework = Framework;
    exports.Tools = Tools;
    exports.UI = UI;
    // short cut for initialize method
    exports.initialize = Framework.initialize;
    exports.isInitialized = Framework.isInitialized;
    exports.waitForInitialize = Framework.waitForInitialize;
});
//# sourceMappingURL=data:application/json;charset=utf-8;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNkcDovLy9DRFAvUHJvbWlzZS50cyIsIndlYnBhY2s6Ly8vd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCBlMGFjZTQ4NDM3YTUxYzljYTQ0YyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL2J1aWxkaW4vZ2xvYmFsLmpzIiwiZXh0ZXJuYWw6Ly8vaTE4bmV4dC9pMThuZXh0LmpzIiwiZXh0ZXJuYWw6Ly8vaTE4bmV4dC9pMThuZXh0QnJvd3Nlckxhbmd1YWdlRGV0ZWN0b3IuanMiLCJleHRlcm5hbDovLy9pMThuZXh0L2kxOG5leHRMb2NhbFN0b3JhZ2VDYWNoZS5qcyIsImV4dGVybmFsOi8vL2kxOG5leHQvaTE4bmV4dFNwcmludGZQb3N0UHJvY2Vzc29yLmpzIiwiZXh0ZXJuYWw6Ly8vaTE4bmV4dC9pMThuZXh0WEhSQmFja2VuZC5qcyIsImV4dGVybmFsOi8vL2kxOG5leHQvanF1ZXJ5LWkxOG5leHQuanMiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIHtcInJvb3RcIjpcIkNEUFwiLFwiY29tbW9uanNcIjpcImNkcC5jb3JlXCIsXCJjb21tb25qczJcIjpcImNkcC5jb3JlXCIsXCJhbWRcIjpcImNkcC5jb3JlXCJ9Iiwid2VicGFjazovLy9leHRlcm5hbCB7XCJyb290XCI6XCJqUXVlcnlcIixcImNvbW1vbmpzXCI6XCJqcXVlcnlcIixcImNvbW1vbmpzMlwiOlwianF1ZXJ5XCIsXCJhbWRcIjpcImpxdWVyeVwifSIsImNkcDovLy9DRFAvaTE4bi50cyIsIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgMzQ5M2Q0YzA2YzFiZWI1MzAxMzAiLCJleHRlcm5hbDovLy9qcXVlcnkvanF1ZXJ5Lm1vYmlsZS5qcyIsImV4dGVybmFsOi8vL2pxdWVyeS9qcXVlcnktbWlncmF0ZS5qcyIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwge1wicm9vdFwiOlwiQmFja2JvbmVcIixcImNvbW1vbmpzXCI6XCJiYWNrYm9uZVwiLFwiY29tbW9uanMyXCI6XCJiYWNrYm9uZVwiLFwiYW1kXCI6XCJiYWNrYm9uZVwifSIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwge1wicm9vdFwiOlwiQ0RQXCIsXCJjb21tb25qc1wiOlwiY2RwLmkxOG5cIixcImNvbW1vbmpzMlwiOlwiY2RwLmkxOG5cIixcImFtZFwiOlwiY2RwLmkxOG5cIn0iLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIHtcInJvb3RcIjpcIkNEUFwiLFwiY29tbW9uanNcIjpcImNkcC5wcm9taXNlXCIsXCJjb21tb25qczJcIjpcImNkcC5wcm9taXNlXCIsXCJhbWRcIjpcImNkcC5wcm9taXNlXCJ9IiwiY2RwOi8vL0NEUC9GcmFtZXdvcmsvUGxhdGZvcm0udHMiLCJjZHA6Ly8vQ0RQL0ZyYW1ld29yay9QYXRjaC50cyIsImNkcDovLy9DRFAvRnJhbWV3b3JrL09yaWVudGF0aW9uLnRzIiwiY2RwOi8vL0NEUC9GcmFtZXdvcmsvSW50ZXJmYWNlcy50cyIsImNkcDovLy9DRFAvRnJhbWV3b3JrL1JvdXRlci50cyIsImNkcDovLy9DRFAvRnJhbWV3b3JrL0NvcmVBUEkudHMiLCJjZHA6Ly8vQ0RQL0ZyYW1ld29yay9QYWdlLnRzIiwiY2RwOi8vL0NEUC9Ub29scy9VdGlscy50cyIsImNkcDovLy9DRFAvVG9vbHMvQmxvYi50cyIsImNkcDovLy9DRFAvVG9vbHMvRGF0ZVRpbWUudHMiLCJjZHA6Ly8vQ0RQL1Rvb2xzL0Z1bmN0aW9ucy50cyIsImNkcDovLy9DRFAvVG9vbHMvVGVtcGxhdGUudHMiLCJjZHA6Ly8vQ0RQL1VJL2xpc3R2aWV3L0NvbmZpZy50cyIsImNkcDovLy9DRFAvVUkvbGlzdHZpZXcvTGluZVByb2ZpbGUudHMiLCJjZHA6Ly8vQ0RQL1VJL2xpc3R2aWV3L0dyb3VwUHJvZmlsZS50cyIsImNkcDovLy9DRFAvVUkvbGlzdHZpZXcvSW50ZXJmYWNlcy50cyIsImNkcDovLy9DRFAvVUkvbGlzdHZpZXcvVXRpbHMudHMiLCJjZHA6Ly8vQ0RQL1VJL2xpc3R2aWV3L1N0YXR1c01hbmFnZXIudHMiLCJjZHA6Ly8vQ0RQL1VJL2xpc3R2aWV3L1BhZ2VQcm9maWxlLnRzIiwiY2RwOi8vL0NEUC9VSS9saXN0dmlldy9TY3JvbGxlckVsZW1lbnQudHMiLCJjZHA6Ly8vQ0RQL1VJL2xpc3R2aWV3L1Njcm9sbGVyTmF0aXZlLnRzIiwiY2RwOi8vL0NEUC9VSS9saXN0dmlldy9TY3JvbGxlcklTY3JvbGwudHMiLCJjZHA6Ly8vQ0RQL1VJL2xpc3R2aWV3L0xpc3RJdGVtVmlldy50cyIsImNkcDovLy9DRFAvVUkvbGlzdHZpZXcvU2Nyb2xsTWFuYWdlci50cyIsImNkcDovLy9DRFAvVUkvbGlzdHZpZXcvTGlzdFZpZXcudHMiLCJjZHA6Ly8vQ0RQL1VJL2xpc3R2aWV3L0dyb3VwTGlzdEl0ZW1WaWV3LnRzIiwiY2RwOi8vL0NEUC9VSS9saXN0dmlldy9FeHBhbmRNYW5hZ2VyLnRzIiwiY2RwOi8vL0NEUC9VSS9saXN0dmlldy9FeHBhbmRhYmxlTGlzdFZpZXcudHMiLCJjZHA6Ly8vQ0RQL1VJL2pxbS9UaGVtZS50cyIsImNkcDovLy9DRFAvVUkvanFtL0V4dGVuc2lvbk1hbmFnZXIudHMiLCJjZHA6Ly8vQ0RQL1VJL2pxbS9Ub2FzdC50cyIsImNkcDovLy9DRFAvVUkvanFtL0RpYWxvZy50cyIsImNkcDovLy9DRFAvVUkvanFtL0RpYWxvZ0NvbW1vbnMudHMiLCJjZHA6Ly8vQ0RQL1VJL2pxbS9CYXNlSGVhZGVyVmlldy50cyIsImNkcDovLy9DRFAvVUkvanFtL0Jhc2VQYWdlLnRzIiwiY2RwOi8vL0NEUC9VSS9qcW0vUGFnZVZpZXcudHMiLCJjZHA6Ly8vQ0RQL1VJL2pxbS9QYWdlTGlzdFZpZXcudHMiLCJjZHA6Ly8vQ0RQL1VJL2pxbS9QYWdlRXhwYW5kYWJsZUxpc3RWaWV3LnRzIiwiY2RwOi8vL0NEUC9VSS9qcW0vRXh0ZW5zaW9uL1JpcHBsZS50cyIsImNkcDovLy9DRFAvVUkvanFtL0V4dGVuc2lvbi9TcGlubmVyLnRzIiwiY2RwOi8vL0NEUC9VSS9qcW0vRXh0ZW5zaW9uL0Zsb2F0TGFiZWwudHMiLCJjZHA6Ly8vQ0RQL1VJL2pxbS9FeHRlbnNpb24vRmxpcFN3aXRjaC50cyIsImNkcDovLy9DRFAvVUkvanFtL0V4dGVuc2lvbi9TbGlkZXIudHMiLCJjZHA6Ly8vQ0RQL1VJL2pxbS9FeHRlbnNpb24vSVNjcm9sbC50cyIsImNkcDovLy9leHBvcnRzOi9jZHAvY29yZS9jb3JlLnRzIiwiY2RwOi8vL2V4cG9ydHM6L2NkcC9jb3JlL3Byb21pc2UudHMiLCJjZHA6Ly8vZXhwb3J0czovY2RwL2NvcmUvaTE4bi50cyIsImNkcDovLy9leHBvcnRzOi9jZHAvY29yZS9mcmFtZXdvcmsuanFtLnRzIiwiY2RwOi8vL2V4cG9ydHM6L2NkcC9jb3JlLnRzIiwiY2RwOi8vL2V4cG9ydHM6L2NkcC9mcmFtZXdvcmsvanFtLnRzIiwiY2RwOi8vL2V4cG9ydHM6L2NkcC9mcmFtZXdvcmsudHMiLCJjZHA6Ly8vZXhwb3J0czovY2RwL3Rvb2xzL3Rvb2xzLnRzIiwiY2RwOi8vL2V4cG9ydHM6L2NkcC90b29scy50cyIsImNkcDovLy9leHBvcnRzOi9jZHAvdWkvbGlzdHZpZXcudHMiLCJjZHA6Ly8vZXhwb3J0czovY2RwL3VpL2pxbS50cyIsImNkcDovLy9leHBvcnRzOi9jZHAvdWkudHMiLCJjZHA6Ly8vZXhwb3J0czovY2RwLnRzIiwiY2RwOi8vL0NEUC9Ub29scy9JbnRlcmZhY2VzLnRzIiwiY2RwOi8vL0NEUC9VSS9qcW0vSW50ZXJmYWNlcy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBOEQ7QUFFOUQsSUFBVSxH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QUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ04sS0FBSztBQUNMO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRztBQUNIO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsSUFBSTtBQUNKOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxFQUFFO0FBQ0Y7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGOzs7Ozs7QUFNQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUMseUJBQXlCO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLGNBQWMsZ0JBQWdCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxDQUFDOztBQUVEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLGVBQWU7O0FBRWY7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxnREFBZ0QsZ0JBQWdCO0FBQ2hFLElBQUk7O0FBRUo7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsZUFBZSxXQUFXO0FBQzFCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCO0FBQ3ZCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBOztBQUVBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLENBQUM7O0FBRUQ7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTtBQUNGLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QiwyQkFBMkI7QUFDbEQ7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QjtBQUN2Qjs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0I7QUFDdEI7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLDBCQUEwQjtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQSx5QkFBeUI7QUFDekI7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtGQUFrRjtBQUNsRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQztBQUNuQyxLQUFLO0FBQ0w7QUFDQTtBQUNBLElBQUk7QUFDSjs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEVB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Q0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUEsQ0FBQzs7QUFFRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTs7QUFFQSxDQUFDOzs7QUFHRDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0EsZ0NBQWdDO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQjs7QUFFL0I7QUFDQSxJQUFJO0FBQ0o7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRixDQUFDOzs7QUFHRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxjQUFjOztBQUVkO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyxjQUFjOztBQUVsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLGNBQWM7O0FBRWxEO0FBQ0E7QUFDQTs7QUFFQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7O0FBRUE7QUFDQTs7QUFFQSxnQ0FBZ0MsWUFBWSxFQUFFO0FBQzlDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQSxPQUFPO0FBQ1A7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7O0FBRWI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0EsR0FBRzs7QUFFSCxDQUFDOzs7QUFHRDs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHlDQUF5QztBQUN6QztBQUNBOztBQUVBOztBQUVBLHlCQUF5Qix3Q0FBd0MsYUFBYSxFQUFFOztBQUVoRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7O0FBRUY7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0M7QUFDcEM7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCO0FBQzNCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw2Q0FBNkM7QUFDN0M7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxpQ0FBaUMsbUJBQW1CO0FBQ3BELEVBQUU7QUFDRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EscUJBQXFCLFlBQVksRUFBRTtBQUNuQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxDQUFDOzs7QUFHRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJO0FBQ0osR0FBRzs7QUFFSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7OztBQUlEO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBLHdDQUF3QztBQUN4QyxJQUFJOztBQUVKO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxnQkFBZ0IscUJBQXFCO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUVBQXFFLFdBQVcsRUFBRTtBQUNsRixJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSx1Q0FBdUM7QUFDdkM7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsQ0FBQzs7OztBQUlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTs7QUFFQSxlQUFlLFlBQVk7QUFDM0I7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHOztBQUVIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHOztBQUVIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGLENBQUM7Ozs7QUFJRDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7O0FBRUE7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUM7O0FBRXpDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDO0FBQ3JDO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QztBQUN4QztBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsRUFBRTtBQUNGLENBQUM7Ozs7QUFJRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLDJDQUEyQyxlQUFlO0FBQzFELENBQUM7OztBQUdEO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QjtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsR0FBRztBQUNsQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw2Q0FBNkMsU0FBUztBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUEsZUFBZTtBQUNmOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxzQ0FBc0M7QUFDdEM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSxZQUFZLDhCQUE4QjtBQUMxQztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLGdCQUFnQixTQUFTO0FBQ3pCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0EsQ0FBQzs7O0FBR0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGlEQUFpRDtBQUNqRDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJO0FBQ0osR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFFQUFxRSxxQkFBcUI7QUFDMUYsS0FBSztBQUNMLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBOztBQUVBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGFBQWE7QUFDckMsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxJQUFJO0FBQ0osR0FBRzs7QUFFSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSw2QkFBNkIsS0FBSzs7QUFFMUM7QUFDQSwyQkFBMkI7O0FBRTNCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxJQUFJO0FBQ0osR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsOEJBQThCO0FBQzlCOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QyxXQUFXO0FBQ2xEOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxnQkFBZ0Isc0JBQXNCOztBQUV0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsQ0FBQzs7QUFFRDs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsdUJBQXVCLDJEQUEyRDtBQUNsRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxtQ0FBbUMsd0NBQXdDLEVBQUU7QUFDN0UsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsK0JBQStCLG9FQUFvRTtBQUNuRztBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsOEJBQThCLG1FQUFtRTtBQUNqRztBQUNBLElBQUk7QUFDSixHQUFHOztBQUVIO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBLEdBQUc7O0FBRUgsZ0JBQWdCLDRCQUE0QixFQUFFOztBQUU5QztBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTs7QUFFQSx5RUFBeUUsb0NBQW9DLEVBQUU7QUFDL0csQ0FBQzs7O0FBR0Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0EsNkJBQTZCO0FBQzdCLDhCQUE4QjtBQUM5QiwrQkFBK0I7O0FBRS9CO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7O0FBRUg7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLElBQUk7QUFDSjtBQUNBOztBQUVBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsRUFBRTtBQUNGLENBQUM7OztBQUdEOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxFQUFFOztBQUVGLENBQUM7OztBQUdEOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGLENBQUM7OztBQUdEOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUEsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQSxDQUFDOzs7QUFHRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjs7QUFFQSxDQUFDOztBQUVEOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRCxDQUFDOztBQUVEOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxpREFBaUQ7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxtQkFBbUIsaUJBQWlCO0FBQ3BDOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVELENBQUM7O0FBRUQ7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esd0JBQXdCOztBQUV4QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsQ0FBQzs7QUFFRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGlCQUFpQixnQkFBZ0I7QUFDakM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBOztBQUVBLENBQUM7O0FBRUQ7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLG1CQUFtQixnREFBZ0Q7QUFDbkUsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVELENBQUM7O0FBRUQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsQ0FBQzs7QUFFRDs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLGVBQWUsNkJBQTZCO0FBQzVDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBLENBQUM7O0FBRUQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsMEJBQTBCOztBQUVwQztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxDQUFDOztBQUVELENBQUM7O0FBRUQ7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBLGNBQWMsU0FBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUEsbUNBQW1DLGFBQWE7QUFDaEQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBOztBQUVBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7O0FBRUE7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRCxDQUFDOztBQUVEOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBLGNBQWMsaUJBQWlCO0FBQy9CO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQsQ0FBQzs7QUFFRDs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsaUNBQWlDLFdBQVc7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRCxDQUFDOztBQUVEOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxDQUFDOztBQUVEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBLENBQUM7O0FBRUQ7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVILEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsQ0FBQzs7QUFFRCxDQUFDOztBQUVEOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsdUJBQXVCO0FBQzVDO0FBQ0E7QUFDQSxDQUFDOztBQUVELENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGLENBQUM7O0FBRUQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSCxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVELENBQUM7O0FBRUQ7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTs7QUFFQSxxREFBcUQsWUFBWTtBQUNqRTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUEsOENBQThDLGtCQUFrQjtBQUNoRTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHVCQUF1Qix1Q0FBdUM7QUFDOUQscUNBQXFDLGdDQUFnQzs7QUFFckU7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7O0FBRUE7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQSw0RkFBNEY7QUFDNUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRix1Q0FBdUM7QUFDdkM7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSwrQ0FBK0M7QUFDL0M7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0EsZ0RBQWdEO0FBQ2hEO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBLENBQUM7O0FBRUQsQ0FBQzs7QUFFRDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIOztBQUVBLDBCQUEwQiw4QkFBOEI7QUFDeEQsK0NBQStDLDRCQUE0QjtBQUMzRTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLDRDQUE0QztBQUM1QztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQsQ0FBQzs7QUFFRDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQSxJQUFJO0FBQ0osRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxDQUFDOztBQUVELENBQUM7O0FBRUQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLEVBQUU7O0FBRUYsQ0FBQzs7QUFFRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHOztBQUVIOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjs7QUFFQTs7QUFFQSxHQUFHOztBQUVIOztBQUVBO0FBQ0E7O0FBRUEsR0FBRzs7QUFFSDs7QUFFQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLElBQUk7O0FBRUosR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLEVBQUU7O0FBRUYsQ0FBQzs7QUFFRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxFQUFFO0FBQ0YsQ0FBQzs7QUFFRDs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxHQUFHOztBQUVIOztBQUVBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUgsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLElBQUk7QUFDSjtBQUNBOztBQUVBO0FBQ0E7QUFDQSxJQUFJOztBQUVKLGlDQUFpQyx5QkFBeUI7QUFDMUQsc0JBQXNCO0FBQ3RCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVELENBQUM7O0FBRUQ7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBOztBQUVBLENBQUM7OztBQUdEOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDhCQUE4QixnQ0FBZ0M7QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsNEJBQTRCLHNDQUFzQztBQUNsRSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUErQztBQUMvQztBQUNBO0FBQ0EsSUFBSTtBQUNKOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLHVCQUF1QjtBQUM5QztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0EsYUFBYSw2QkFBNkI7QUFDMUM7O0FBRUE7QUFDQTs7QUFFQSxxQ0FBcUMsaUNBQWlDLEVBQUU7O0FBRXhFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsVUFBVTtBQUNWLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsVUFBVTtBQUNWLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0EsZ0NBQWdDO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxxQkFBcUIsZ0RBQWdEO0FBQ3JFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBLDJCQUEyQixpQkFBaUI7O0FBRTVDO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVELENBQUM7O0FBRUQ7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxJQUFJLHFDQUFxQztBQUN6QyxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsK0JBQStCOztBQUV6RDtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsNEJBQTRCLGtDQUFrQzs7QUFFOUQ7QUFDQSwyQkFBMkIsa0NBQWtDOztBQUU3RDtBQUNBO0FBQ0EsZ0NBQWdDLG1DQUFtQztBQUNuRTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxJQUFJO0FBQ0osRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBLHNCQUFzQixvREFBb0Q7QUFDMUU7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxjQUFjLGdCQUFnQjtBQUM5QjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLElBQUk7QUFDSixFQUFFOztBQUVGOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQsQ0FBQzs7O0FBR0Q7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTs7QUFFQTtBQUNBLEVBQUU7QUFDRjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0M7QUFDcEM7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7O0FBRUE7QUFDQSxnQkFBZ0IsdUJBQXVCOztBQUV2QztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxnQkFBZ0Isb0JBQW9CO0FBQ3BDO0FBQ0E7O0FBRUE7QUFDQSxJQUFJLDZDQUE2Qzs7QUFFakQ7QUFDQTtBQUNBOztBQUVBLGlDQUFpQzs7QUFFakM7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkM7O0FBRTdDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLGVBQWU7O0FBRWY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxDQUFDOztBQUVELENBQUM7OztBQUdEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUEsRUFBRTs7QUFFRjs7QUFFQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRCxDQUFDOztBQUVEOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLG9EQUFvRCx5QkFBeUI7QUFDN0UsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDJEQUEyRDs7QUFFM0Q7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxvREFBb0Q7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRixDQUFDOztBQUVEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLHlDQUF5QztBQUNyRTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsR0FBRzs7QUFFSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsbUNBQW1DLFFBQVE7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRzs7QUFFSDtBQUNBO0FBQ0EscURBQXFELHlCQUF5QjtBQUM5RTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLEVBQUU7QUFDRixDQUFDOztBQUVEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSw2REFBNkQ7QUFDN0Q7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUYsQ0FBQzs7O0FBR0Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkM7O0FBRTNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxPQUFPOztBQUVQO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSx3Q0FBd0M7QUFDckQsZ0JBQWdCLHdDQUF3QztBQUN4RDtBQUNBOztBQUVBOztBQUVBLGNBQWMsdUNBQXVDO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSx1QkFBdUI7QUFDdkIsa0JBQWtCO0FBQ2xCLG9CQUFvQjs7QUFFcEI7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLG9JQUFvSTtBQUM3SSxTQUFTLHlKQUF5SjtBQUNsSyxTQUFTLDBKQUEwSjtBQUNuSyxTQUFTO0FBQ1Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRCxDQUFDOzs7QUFHRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0EsMEJBQTBCLHNDQUFzQztBQUNoRSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUgsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSTtBQUNKO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLElBQUk7QUFDSjtBQUNBOztBQUVBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQsQ0FBQzs7QUFFRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLGdCQUFnQixjQUFjO0FBQzlCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQSxDQUFDOztBQUVELENBQUM7OztBQUdEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPOztBQUVQO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSwyQ0FBMkMsYUFBYTtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRCxDQUFDOztBQUVEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBOztBQUVBO0FBQ0EsR0FBRztBQUNILEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRCxDQUFDOztBQUVEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSwrQ0FBK0MsZ0JBQWdCO0FBQy9EO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsWUFBWTtBQUNwQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxrQkFBa0IsZUFBZTtBQUNqQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSw0Q0FBNEMsV0FBVztBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQsQ0FBQzs7QUFFRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLEdBQUc7O0FBRUgsNENBQTRDLFdBQVc7QUFDdkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxpREFBaUQ7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQSxnREFBZ0QsYUFBYSxFQUFFO0FBQy9ELEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBOztBQUVBO0FBQ0Esc0JBQXNCLHlCQUF5QjtBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7O0FBRUE7QUFDQTtBQUNBLHdCQUF3Qix5QkFBeUI7QUFDakQsMEJBQTBCLDJCQUEyQjs7QUFFckQ7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLEdBQUc7O0FBRUg7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSTtBQUNKO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ04sS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOLEtBQUs7QUFDTDtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLHdDQUF3QztBQUN4RDtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQsQ0FBQzs7QUFFRDs7QUFFQSxDQUFDOztBQUVEOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGLENBQUM7O0FBRUQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0YsQ0FBQzs7O0FBR0QsQ0FBQzs7QUFFRCxDQUFDLGU7Ozs7OztBQ2xtZUQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQUE7QUFDSCxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEOzs7QUFHQSxvQ0FBb0M7O0FBRXBDOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLENBQUM7O0FBRUQ7O0FBRUEsa0NBQWtDO0FBQ2xDOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLDJDQUEyQztBQUMzQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSwwREFBMEQ7QUFDMUQ7QUFDQTs7QUFFQTtBQUNBLDhDQUE4QztBQUM5QztBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLDhCQUE4Qjs7QUFFOUI7QUFDQTtBQUNBLG9DQUFvQztBQUNwQztBQUNBLGlDQUFpQzs7O0FBR2pDOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGOzs7QUFHQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7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cGF0aD1cIi4uLy4uLy4uL2V4dGVybmFsL2luY2x1ZGUvanF1ZXJ5LmQudHNcIiAvPlxyXG5cclxubmFtZXNwYWNlIENEUCB7XHJcblxyXG4gICAgbGV0IFRBRzogc3RyaW5nID0gXCJbQ0RQLlByb21pc2VdIFwiO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGludGVyZmFjZSBJUHJvbWlzZVxyXG4gICAgICogQGJyaWVmIOOCreODo+ODs+OCu+ODq+WPr+iDveOBqiBQcm9taXNlIOOCquODluOCuOOCp+OCr+ODiOOBruOCpOODs+OCv+ODvOODleOCp+OCpOOCueWumue+qVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElQcm9taXNlPFQ+IGV4dGVuZHMgSlF1ZXJ5UHJvbWlzZTxUPiB7XHJcbiAgICAgICAgLy8hIOOCreODo+ODs+OCu+ODq+WHpueQhlxyXG4gICAgICAgIGFib3J0KGluZm8/OiBhbnkpOiB2b2lkO1xyXG4gICAgICAgIC8vISDkvp3lrZjjgZnjgosgcHJvbWlzZS5cclxuICAgICAgICBkZXBlbmRlbmN5PzogSVByb21pc2U8YW55PjtcclxuICAgICAgICAvLyEgYWJvcnQg5pmC44Gr6Ieq6Lqr44KCIHJlamVjdFxyXG4gICAgICAgIGNhbGxSZWplY3Q/OiBib29sZWFuO1xyXG4gICAgICAgIC8vISDkvp3lrZjjgZnjgosgcHJvbWlzZSDjgpLoqK3lrppcclxuICAgICAgICBkZXBlbmRPbjxVPihwcm9taXNlOiBJUHJvbWlzZTxVPik6IElQcm9taXNlPFU+O1xyXG4gICAgICAgIGRlcGVuZE9uKHByb21pc2U6IEpRdWVyeVhIUik6IEpRdWVyeVhIUjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBpbnRlcmZhY2UgUHJvbWlzZVxyXG4gICAgICogQGJyaWVmIOOCreODo+ODs+OCu+ODq+WPr+iDveOBqiBQcm9taXNlIOOCquODluOCuOOCp+OCr+ODiOOBruOCpOODs+OCv+ODvOODleOCp+OCpOOCueWumue+qVxyXG4gICAgICogICAgICAgIElQcm9taXNlPGFueT4g44Gu57OW6KGj5qeL5paHXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgUHJvbWlzZSBleHRlbmRzIElQcm9taXNlPGFueT4geyB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBtYWtlUHJvbWlzZSDjgavmjIflrprlj6/og73jgaogY2FuY2VsIGNhbGxiYWNrIOOBriBhbGlhcy5cclxuICAgICAqL1xyXG4gICAgZXhwb3J0IHR5cGUgY2FuY2VsQ2FsbGJhY2sgPSAoZGV0YWlsPzogYW55KSA9PiB2b2lkO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGludGVyZmFjZSBNYWtlUHJvbWlzZU9wdGlvbnNcclxuICAgICAqIEBicmllZiAgICAgbWFrZVByb21pc2Ug44Gr5rih44Gb44KL44Kq44OX44K344On44OzXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgTWFrZVByb21pc2VPcHRpb25zIHtcclxuICAgICAgICBkZXBlbmRlbmN5PzogSVByb21pc2U8YW55PjsgICAgICAgICAvLyE8IOS+neWtmOOBmeOCiyBwcm9taXNlIOOCkuioreWumlxyXG4gICAgICAgIGNhbGxSZWplY3Q/OiBib29sZWFuOyAgICAgICAgICAgICAgIC8vITwgYWJvcnQg5pmC44Gr6Ieq6Lqr44KCIHJlamVjdFxyXG4gICAgICAgIGNhbmNlbENhbGxiYWNrPzogY2FuY2VsQ2FsbGJhY2s7ICAgIC8vITwg44Kt44Oj44Oz44K744Or5pmC44Gr5ZG844Gw44KM44KL6Zai5pWwXHJcbiAgICAgICAgW2tleTogc3RyaW5nXTogYW55OyAgICAgICAgICAgICAgICAgLy8hPCDmi6HlvLXjg5Hjg6njg6Hjg7zjgr9cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFByb21pc2Ug44Kq44OW44K444Kn44Kv44OI44Gu5L2c5oiQXHJcbiAgICAgKiBqUXVlcnlEZWZlcnJlZCDjgqrjg5bjgrjjgqfjgq/jg4jjgYvjgonjgIFUb29scy5Qcm9taXNlIOOCquODluOCuOOCp+OCr+ODiOOCkuS9nOaIkOOBmeOCi1xyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBkZiAgICAgICB7SlF1ZXJ5RGVmZXJyZWR9ICAgIFtpbl0galF1ZXJ5RGVmZXJyZWQgaW5zdGFuY2Ug44KS5oyH5a6aXHJcbiAgICAgKiBAcGFyYW0gb3B0aW9ucz8ge09iamVjdCB8IEZ1bmN0aW9ufSBbaW5dIGpRdWVyeVByb21pc2Ug44KS5ouh5by144GZ44KL44Kq44OW44K444Kn44Kv44OIIG9yIOOCreODo+ODs+OCu+ODq+aZguOBq+WRvOOBs+WHuuOBleOCjOOCi+mWouaVsOOCkuaMh+WumlxyXG4gICAgICogQHJldHVybiB7SVByb21pc2V9IFRvb2xzLklQcm9taXNlIOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICovXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gbWFrZVByb21pc2U8VD4oZGY6IEpRdWVyeURlZmVycmVkPFQ+LCBvcHRpb25zPzogTWFrZVByb21pc2VPcHRpb25zIHwgY2FuY2VsQ2FsbGJhY2spOiBJUHJvbWlzZTxUPiB7XHJcbiAgICAgICAgbGV0IGV4dGVuZE9wdGlvbnM6IE1ha2VQcm9taXNlT3B0aW9ucztcclxuICAgICAgICBsZXQgY2FuY2VsOiBjYW5jZWxDYWxsYmFjaztcclxuXHJcbiAgICAgICAgaWYgKFwiZnVuY3Rpb25cIiA9PT0gdHlwZW9mIG9wdGlvbnMpIHtcclxuICAgICAgICAgICAgY2FuY2VsID0gPGNhbmNlbENhbGxiYWNrPm9wdGlvbnM7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZXh0ZW5kT3B0aW9ucyA9IG9wdGlvbnM7XHJcbiAgICAgICAgICAgIGlmIChleHRlbmRPcHRpb25zICYmIGV4dGVuZE9wdGlvbnMuY2FuY2VsQ2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgIGNhbmNlbCA9IGV4dGVuZE9wdGlvbnMuY2FuY2VsQ2FsbGJhY2s7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjYW5jZWwgPSAoKSA9PiB7IC8qIG5vb3AgKi8gfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IF9hYm9ydCA9IGZ1bmN0aW9uIChpbmZvPzogYW55KTogdm9pZCB7XHJcbiAgICAgICAgICAgIGxldCBkZXRhaWwgPSBpbmZvID8gaW5mbyA6IHsgbWVzc2FnZTogXCJhYm9ydFwiIH07XHJcbiAgICAgICAgICAgIGlmIChudWxsICE9IHRoaXMuZGVwZW5kZW5jeSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZGVwZW5kZW5jeS5hYm9ydCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGVwZW5kZW5jeS5hYm9ydChkZXRhaWwpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFRBRyArIFwiW2NhbGxdIGRlcGVuZGVuY3kgb2JqZWN0IGRvZXNuJ3QgaGF2ZSAnYWJvcnQoKScgbWV0aG9kLlwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNhbGxSZWplY3QgJiYgXCJwZW5kaW5nXCIgPT09IHRoaXMuc3RhdGUoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbmNlbChkZXRhaWwpO1xyXG4gICAgICAgICAgICAgICAgICAgIGRmLnJlamVjdChkZXRhaWwpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKFwicGVuZGluZ1wiID09PSB0aGlzLnN0YXRlKCkpIHtcclxuICAgICAgICAgICAgICAgIGNhbmNlbChkZXRhaWwpO1xyXG4gICAgICAgICAgICAgICAgZGYucmVqZWN0KGRldGFpbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBsZXQgX2RlcGVuZE9uID0gZnVuY3Rpb24gKHByb21pc2U6IGFueSk6IEpRdWVyeVByb21pc2U8YW55PiB7XHJcbiAgICAgICAgICAgIGlmIChwcm9taXNlLmFib3J0KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRlcGVuZGVuY3kgPSBwcm9taXNlO1xyXG4gICAgICAgICAgICAgICAgcHJvbWlzZVxyXG4gICAgICAgICAgICAgICAgICAgIC5hbHdheXMoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlcGVuZGVuY3kgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihUQUcgKyBcIltzZXRdIGRlcGVuZGVuY3kgb2JqZWN0IGRvZXNuJ3QgaGF2ZSAnYWJvcnQoKScgbWV0aG9kLlwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcHJvbWlzZTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBsZXQgdGFyZ2V0ID0gJC5leHRlbmQoe30sIHtcclxuICAgICAgICAgICAgZGVwZW5kZW5jeTogbnVsbCxcclxuICAgICAgICAgICAgY2FsbFJlamVjdDogZmFsc2UsXHJcbiAgICAgICAgfSwgZXh0ZW5kT3B0aW9ucyk7XHJcblxyXG4gICAgICAgIGxldCBwcm9taXNlID0gPElQcm9taXNlPFQ+PmRmLnByb21pc2UodGFyZ2V0KTtcclxuICAgICAgICBpZiAobnVsbCA9PSBwcm9taXNlLmFib3J0KSB7XHJcbiAgICAgICAgICAgIHByb21pc2UuYWJvcnQgPSBfYWJvcnQuYmluZChwcm9taXNlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG51bGwgPT0gcHJvbWlzZS5kZXBlbmRPbikge1xyXG4gICAgICAgICAgICBwcm9taXNlLmRlcGVuZE9uID0gX2RlcGVuZE9uLmJpbmQocHJvbWlzZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcHJvbWlzZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFByb21pc2Ug44Kq44OW44K444Kn44Kv44OI44Gu57WC5LqG44KS5b6F44GkXHJcbiAgICAgKiAkLndoZW4oKSDjga/lpLHmlZfjgZnjgovjgajjgZnjgZDjgavliLblvqHjgpLov5TjgZnjga7jgavlr77jgZfjgIHlpLHmlZfjgoLlkKvjgoHjgablvoXjgaQgUHJvbWlzZSDjgqrjg5bjgrjjgqfjgq/jg4jjgpLov5TljbRcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gZGVmZXJyZWRzIHtKUXVlcnlQcm9taXNlPFQ+fEpRdWVyeVByb21pc2U8VD5bXX0gW2luXSBQcm9taXNlIOOCquODluOCuOOCp+OCr+ODiCjlj6/lpInlvJXmlbAsIOmFjeWIlylcclxuICAgICAqIEByZXR1cm4ge0pRdWVyeVByb21pc2U8VD59IFByb21pc2Ug44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBmdW5jdGlvbiB3YWl0PFQ+KC4uLmRlZmVycmVkczogSVByb21pc2U8VD5bXSk6IEpRdWVyeVByb21pc2U8VD47XHJcbiAgICBleHBvcnQgZnVuY3Rpb24gd2FpdDxUPiguLi5kZWZlcnJlZHM6IEpRdWVyeUdlbmVyaWNQcm9taXNlPFQ+W10pOiBKUXVlcnlQcm9taXNlPFQ+O1xyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIHdhaXQ8VD4oLi4uZGVmZXJyZWRzOiBUW10pOiBKUXVlcnlQcm9taXNlPFQ+O1xyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIHdhaXQ8VD4oLi4uZGVmZXJyZWRzOiBhbnlbXSk6IEpRdWVyeVByb21pc2U8VD4ge1xyXG5cclxuICAgICAgICAvLyDmipXlhaXms5XjgYzlj6/lpInlvJXmlbDjgaDjgaPjgZ/loLTlkIjjga/phY3liJfjgavkv67mraPjgZnjgotcclxuICAgICAgICBsZXQgX2RlZmVycmVkczogSlF1ZXJ5UHJvbWlzZTxUPltdID0gW10uY29uY2F0LmFwcGx5KFtdLCBkZWZlcnJlZHMpO1xyXG5cclxuICAgICAgICAvLyDlrp/pmpvjga7kvZzmpa1cclxuICAgICAgICBsZXQgZGYgPSAkLkRlZmVycmVkKCk7XHJcbiAgICAgICAgbGV0IHJlc3VsdHMgPSBbXTtcclxuICAgICAgICBsZXQgaW5pdGlhbGl6ZWQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgbGV0IGlzRmluaXNoZWQgPSAoKTogYm9vbGVhbiA9PiB7XHJcbiAgICAgICAgICAgIGlmICghaW5pdGlhbGl6ZWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAhcmVzdWx0cy5zb21lKChlbGVtZW50OiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJwZW5kaW5nXCIgPT09IGVsZW1lbnQuc3RhdHVzO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBfZGVmZXJyZWRzLmZvckVhY2goKGRlZmVycmVkLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICByZXN1bHRzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgc3RhdHVzOiBcInBlbmRpbmdcIixcclxuICAgICAgICAgICAgICAgIGFyZ3M6IG51bGwsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBkZWZlcnJlZFxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKC4uLmFyZ3M6IGFueVtdKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0c1tpbmRleF0uc3RhdHVzID0gXCJyZXNvbHZlZFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdHNbaW5kZXhdLmFyZ3MgPSBhcmdzO1xyXG4gICAgICAgICAgICAgICAgfSwgKC4uLmFyZ3M6IGFueVtdKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0c1tpbmRleF0uc3RhdHVzID0gXCJyZWplY3RlZFwiO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdHNbaW5kZXhdLmFyZ3MgPSBhcmdzO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5hbHdheXMoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0ZpbmlzaGVkKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGYucmVzb2x2ZShyZXN1bHRzKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaW5pdGlhbGl6ZWQgPSB0cnVlO1xyXG4gICAgICAgIGlmIChpc0ZpbmlzaGVkKCkpIHtcclxuICAgICAgICAgICAgZGYucmVzb2x2ZShyZXN1bHRzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBkZi5wcm9taXNlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAY2xhc3MgUHJvbWlzZU1hbmFnZXJcclxuICAgICAqIEBicmllZiDopIfmlbDjga4gRGF0YVByb3ZpZGVyLlByb21pc2Ug44KS566h55CG44GZ44KL44Kv44Op44K5XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBjbGFzcyBQcm9taXNlTWFuYWdlciB7XHJcblxyXG4gICAgICAgIHByaXZhdGUgX3Bvb2w6IHsgcHJvbWlzZTogUHJvbWlzZTsgaWQ6IG51bWJlcjsgfVtdID0gW107XHJcbiAgICAgICAgcHJpdmF0ZSBfaWQ6IG51bWJlciA9IDA7XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gcHVibGljIG1ldGhvZFxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBQcm9taXNlIOOCkueuoeeQhuS4i+OBq+i/veWKoFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHByb21pc2Uge1Byb21pc2V9IFtpbl0g566h55CG5a++6LGh44Gu44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgICAgICogQHJldHVybiB7UHJvbWlzZX0g5byV5pWw44Gr5rih44GX44Gf44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIGFkZDxUPihwcm9taXNlOiBJUHJvbWlzZTxUPik6IElQcm9taXNlPFQ+O1xyXG4gICAgICAgIHB1YmxpYyBhZGQ8VD4ocHJvbWlzZTogSlF1ZXJ5WEhSKTogSlF1ZXJ5WEhSO1xyXG4gICAgICAgIHB1YmxpYyBhZGQ8VD4ocHJvbWlzZTogYW55KTogYW55IHtcclxuICAgICAgICAgICAgaWYgKHByb21pc2UgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIGFib3J0KCkg44KS5oyB44Gj44Gm44GE44Gq44GE5aC05ZCI44Gv44Ko44Op44O8XHJcbiAgICAgICAgICAgIGlmICghcHJvbWlzZS5hYm9ydCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihUQUcgKyBcIlthZGRdIHByb21pc2Ugb2JqZWN0IGRvZXNuJ3QgaGF2ZSAnYWJvcnQoKScgbWV0aG9kLlwiKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsZXQgY29va2llID0ge1xyXG4gICAgICAgICAgICAgICAgcHJvbWlzZTogcHJvbWlzZSxcclxuICAgICAgICAgICAgICAgIGlkOiB0aGlzLl9pZCsrLFxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fcG9vbC5wdXNoKGNvb2tpZSk7XHJcblxyXG4gICAgICAgICAgICBwcm9taXNlXHJcbiAgICAgICAgICAgICAgICAuYWx3YXlzKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9wb29sID0gdGhpcy5fcG9vbC5maWx0ZXIoKGVsZW1lbnQ6IHsgcHJvbWlzZTogUHJvbWlzZTsgaWQ6IG51bWJlcjsgfSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5pZCAhPT0gY29va2llLmlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcHJvbWlzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOeuoeeQhuWvvuixoeOBriBQcm9taXNlIOOBq+WvvuOBl+OBpiBhYm9ydCDjgpLnmbrooYxcclxuICAgICAgICAgKiDjgq3jg6Pjg7Pjgrvjg6vlh6bnkIbjgavlr77jgZnjgovjgq3jg6Pjg7Pjgrvjg6vjga/kuI3lj69cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge2pRdWVyeVByb21pc2V9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIGNhbmNlbChpbmZvPzogYW55KTogSlF1ZXJ5UHJvbWlzZTxhbnk+IHtcclxuICAgICAgICAgICAgbGV0IHByb21pc2VzID0gdGhpcy5wcm9taXNlcygpO1xyXG4gICAgICAgICAgICBwcm9taXNlcy5mb3JFYWNoKChlbGVtZW50OiBQcm9taXNlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5hYm9ydCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuYWJvcnQoaW5mbyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gd2FpdC5hcHBseShudWxsLCBwcm9taXNlcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDnrqHnkIblr77osaHjga4gUHJvbWlzZSDjgpLphY3liJfjgafov5TjgZlcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge1Byb21pc2VbXX1cclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgcHJvbWlzZXMoKTogUHJvbWlzZVtdIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Bvb2wubWFwKChlbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZWxlbWVudC5wcm9taXNlO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbmRlY2xhcmUgbW9kdWxlIFwiY2RwLnByb21pc2VcIiB7XHJcbiAgICBleHBvcnQgPSBDRFA7XHJcbn1cclxuIiwiKGZ1bmN0aW9uIHdlYnBhY2tVbml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblx0aWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnKVxuXHRcdG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShyZXF1aXJlKFwiYmFja2JvbmVcIiksIHJlcXVpcmUoXCJjZHAuaTE4blwiKSwgcmVxdWlyZShcImNkcC5wcm9taXNlXCIpLCByZXF1aXJlKFwianF1ZXJ5XCIpKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFtcImJhY2tib25lXCIsIFwiY2RwLmkxOG5cIiwgXCJjZHAucHJvbWlzZVwiLCBcImpxdWVyeVwiXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJDRFAuRnJhbWV3b3JrXCJdID0gZmFjdG9yeShyZXF1aXJlKFwiYmFja2JvbmVcIiksIHJlcXVpcmUoXCJjZHAuaTE4blwiKSwgcmVxdWlyZShcImNkcC5wcm9taXNlXCIpLCByZXF1aXJlKFwianF1ZXJ5XCIpKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJDRFAuRnJhbWV3b3JrXCJdID0gZmFjdG9yeShyb290W1wiQmFja2JvbmVcIl0sIHJvb3RbXCJDRFBcIl0sIHJvb3RbXCJDRFBcIl0sIHJvb3RbXCJqUXVlcnlcIl0pO1xufSkodGhpcywgZnVuY3Rpb24oX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV8yX18sIF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfM19fLCBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzRfXywgX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV82X18pIHtcbnJldHVybiBcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gaWRlbnRpdHkgZnVuY3Rpb24gZm9yIGNhbGxpbmcgaGFybW9ueSBpbXBvcnRzIHdpdGggdGhlIGNvcnJlY3QgY29udGV4dFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5pID0gZnVuY3Rpb24odmFsdWUpIHsgcmV0dXJuIHZhbHVlOyB9O1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbiBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuIFx0XHRcdFx0Z2V0OiBnZXR0ZXJcbiBcdFx0XHR9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSA5KTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL2Jvb3RzdHJhcCBlMGFjZTQ4NDM3YTUxYzljYTQ0YyIsInZhciBnO1xyXG5cclxuLy8gVGhpcyB3b3JrcyBpbiBub24tc3RyaWN0IG1vZGVcclxuZyA9IChmdW5jdGlvbigpIHtcclxuXHRyZXR1cm4gdGhpcztcclxufSkoKTtcclxuXHJcbnRyeSB7XHJcblx0Ly8gVGhpcyB3b3JrcyBpZiBldmFsIGlzIGFsbG93ZWQgKHNlZSBDU1ApXHJcblx0ZyA9IGcgfHwgRnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpIHx8ICgxLGV2YWwpKFwidGhpc1wiKTtcclxufSBjYXRjaChlKSB7XHJcblx0Ly8gVGhpcyB3b3JrcyBpZiB0aGUgd2luZG93IHJlZmVyZW5jZSBpcyBhdmFpbGFibGVcclxuXHRpZih0eXBlb2Ygd2luZG93ID09PSBcIm9iamVjdFwiKVxyXG5cdFx0ZyA9IHdpbmRvdztcclxufVxyXG5cclxuLy8gZyBjYW4gc3RpbGwgYmUgdW5kZWZpbmVkLCBidXQgbm90aGluZyB0byBkbyBhYm91dCBpdC4uLlxyXG4vLyBXZSByZXR1cm4gdW5kZWZpbmVkLCBpbnN0ZWFkIG9mIG5vdGhpbmcgaGVyZSwgc28gaXQnc1xyXG4vLyBlYXNpZXIgdG8gaGFuZGxlIHRoaXMgY2FzZS4gaWYoIWdsb2JhbCkgeyAuLi59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGc7XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vICh3ZWJwYWNrKS9idWlsZGluL2dsb2JhbC5qc1xuLy8gbW9kdWxlIGlkID0gMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIoZnVuY3Rpb24gKGdsb2JhbCwgZmFjdG9yeSkge1xuXHR0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgPyBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKSA6XG5cdHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCA/IGRlZmluZShmYWN0b3J5KSA6XG5cdChnbG9iYWwuaTE4bmV4dCA9IGZhY3RvcnkoKSk7XG59KHRoaXMsIChmdW5jdGlvbiAoKSB7ICd1c2Ugc3RyaWN0JztcblxudmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHtcbiAgcmV0dXJuIHR5cGVvZiBvYmo7XG59IDogZnVuY3Rpb24gKG9iaikge1xuICByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajtcbn07XG5cblxuXG5cblxuXG5cblxuXG5cblxudmFyIGNsYXNzQ2FsbENoZWNrID0gZnVuY3Rpb24gKGluc3RhbmNlLCBDb25zdHJ1Y3Rvcikge1xuICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7XG4gIH1cbn07XG5cblxuXG5cblxuXG5cblxuXG52YXIgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldO1xuXG4gICAgZm9yICh2YXIga2V5IGluIHNvdXJjZSkge1xuICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHtcbiAgICAgICAgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gdGFyZ2V0O1xufTtcblxuXG5cbnZhciBpbmhlcml0cyA9IGZ1bmN0aW9uIChzdWJDbGFzcywgc3VwZXJDbGFzcykge1xuICBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7XG4gIH1cblxuICBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHtcbiAgICBjb25zdHJ1Y3Rvcjoge1xuICAgICAgdmFsdWU6IHN1YkNsYXNzLFxuICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH1cbiAgfSk7XG4gIGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzcztcbn07XG5cblxuXG5cblxuXG5cblxuXG5cblxudmFyIHBvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4gPSBmdW5jdGlvbiAoc2VsZiwgY2FsbCkge1xuICBpZiAoIXNlbGYpIHtcbiAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7XG4gIH1cblxuICByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjtcbn07XG5cblxuXG5cblxudmFyIHNsaWNlZFRvQXJyYXkgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIHNsaWNlSXRlcmF0b3IoYXJyLCBpKSB7XG4gICAgdmFyIF9hcnIgPSBbXTtcbiAgICB2YXIgX24gPSB0cnVlO1xuICAgIHZhciBfZCA9IGZhbHNlO1xuICAgIHZhciBfZSA9IHVuZGVmaW5lZDtcblxuICAgIHRyeSB7XG4gICAgICBmb3IgKHZhciBfaSA9IGFycltTeW1ib2wuaXRlcmF0b3JdKCksIF9zOyAhKF9uID0gKF9zID0gX2kubmV4dCgpKS5kb25lKTsgX24gPSB0cnVlKSB7XG4gICAgICAgIF9hcnIucHVzaChfcy52YWx1ZSk7XG5cbiAgICAgICAgaWYgKGkgJiYgX2Fyci5sZW5ndGggPT09IGkpIGJyZWFrO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgX2QgPSB0cnVlO1xuICAgICAgX2UgPSBlcnI7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGlmICghX24gJiYgX2lbXCJyZXR1cm5cIl0pIF9pW1wicmV0dXJuXCJdKCk7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBpZiAoX2QpIHRocm93IF9lO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBfYXJyO1xuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIChhcnIsIGkpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7XG4gICAgICByZXR1cm4gYXJyO1xuICAgIH0gZWxzZSBpZiAoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChhcnIpKSB7XG4gICAgICByZXR1cm4gc2xpY2VJdGVyYXRvcihhcnIsIGkpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZVwiKTtcbiAgICB9XG4gIH07XG59KCk7XG5cbnZhciBjb25zb2xlTG9nZ2VyID0ge1xuICB0eXBlOiAnbG9nZ2VyJyxcblxuICBsb2c6IGZ1bmN0aW9uIGxvZyhhcmdzKSB7XG4gICAgdGhpcy5fb3V0cHV0KCdsb2cnLCBhcmdzKTtcbiAgfSxcbiAgd2FybjogZnVuY3Rpb24gd2FybihhcmdzKSB7XG4gICAgdGhpcy5fb3V0cHV0KCd3YXJuJywgYXJncyk7XG4gIH0sXG4gIGVycm9yOiBmdW5jdGlvbiBlcnJvcihhcmdzKSB7XG4gICAgdGhpcy5fb3V0cHV0KCdlcnJvcicsIGFyZ3MpO1xuICB9LFxuICBfb3V0cHV0OiBmdW5jdGlvbiBfb3V0cHV0KHR5cGUsIGFyZ3MpIHtcbiAgICBpZiAoY29uc29sZSAmJiBjb25zb2xlW3R5cGVdKSBjb25zb2xlW3R5cGVdLmFwcGx5KGNvbnNvbGUsIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3MpKTtcbiAgfVxufTtcblxudmFyIExvZ2dlciA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gTG9nZ2VyKGNvbmNyZXRlTG9nZ2VyKSB7XG4gICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9O1xuICAgIGNsYXNzQ2FsbENoZWNrKHRoaXMsIExvZ2dlcik7XG5cbiAgICB0aGlzLmluaXQoY29uY3JldGVMb2dnZXIsIG9wdGlvbnMpO1xuICB9XG5cbiAgTG9nZ2VyLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gaW5pdChjb25jcmV0ZUxvZ2dlcikge1xuICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTtcblxuICAgIHRoaXMucHJlZml4ID0gb3B0aW9ucy5wcmVmaXggfHwgJ2kxOG5leHQ6JztcbiAgICB0aGlzLmxvZ2dlciA9IGNvbmNyZXRlTG9nZ2VyIHx8IGNvbnNvbGVMb2dnZXI7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICB0aGlzLmRlYnVnID0gb3B0aW9ucy5kZWJ1ZyA9PT0gZmFsc2UgPyBmYWxzZSA6IHRydWU7XG4gIH07XG5cbiAgTG9nZ2VyLnByb3RvdHlwZS5zZXREZWJ1ZyA9IGZ1bmN0aW9uIHNldERlYnVnKGJvb2wpIHtcbiAgICB0aGlzLmRlYnVnID0gYm9vbDtcbiAgfTtcblxuICBMb2dnZXIucHJvdG90eXBlLmxvZyA9IGZ1bmN0aW9uIGxvZygpIHtcbiAgICB0aGlzLmZvcndhcmQoYXJndW1lbnRzLCAnbG9nJywgJycsIHRydWUpO1xuICB9O1xuXG4gIExvZ2dlci5wcm90b3R5cGUud2FybiA9IGZ1bmN0aW9uIHdhcm4oKSB7XG4gICAgdGhpcy5mb3J3YXJkKGFyZ3VtZW50cywgJ3dhcm4nLCAnJywgdHJ1ZSk7XG4gIH07XG5cbiAgTG9nZ2VyLnByb3RvdHlwZS5lcnJvciA9IGZ1bmN0aW9uIGVycm9yKCkge1xuICAgIHRoaXMuZm9yd2FyZChhcmd1bWVudHMsICdlcnJvcicsICcnKTtcbiAgfTtcblxuICBMb2dnZXIucHJvdG90eXBlLmRlcHJlY2F0ZSA9IGZ1bmN0aW9uIGRlcHJlY2F0ZSgpIHtcbiAgICB0aGlzLmZvcndhcmQoYXJndW1lbnRzLCAnd2FybicsICdXQVJOSU5HIERFUFJFQ0FURUQ6ICcsIHRydWUpO1xuICB9O1xuXG4gIExvZ2dlci5wcm90b3R5cGUuZm9yd2FyZCA9IGZ1bmN0aW9uIGZvcndhcmQoYXJncywgbHZsLCBwcmVmaXgsIGRlYnVnT25seSkge1xuICAgIGlmIChkZWJ1Z09ubHkgJiYgIXRoaXMuZGVidWcpIHJldHVybjtcbiAgICBpZiAodHlwZW9mIGFyZ3NbMF0gPT09ICdzdHJpbmcnKSBhcmdzWzBdID0gcHJlZml4ICsgdGhpcy5wcmVmaXggKyAnICcgKyBhcmdzWzBdO1xuICAgIHRoaXMubG9nZ2VyW2x2bF0oYXJncyk7XG4gIH07XG5cbiAgTG9nZ2VyLnByb3RvdHlwZS5jcmVhdGUgPSBmdW5jdGlvbiBjcmVhdGUobW9kdWxlTmFtZSkge1xuICAgIHZhciBzdWIgPSBuZXcgTG9nZ2VyKHRoaXMubG9nZ2VyLCBfZXh0ZW5kcyh7IHByZWZpeDogdGhpcy5wcmVmaXggKyAnOicgKyBtb2R1bGVOYW1lICsgJzonIH0sIHRoaXMub3B0aW9ucykpO1xuXG4gICAgcmV0dXJuIHN1YjtcbiAgfTtcblxuICAvLyBjcmVhdGVJbnN0YW5jZShvcHRpb25zID0ge30pIHtcbiAgLy8gICByZXR1cm4gbmV3IExvZ2dlcihvcHRpb25zLCBjYWxsYmFjayk7XG4gIC8vIH1cblxuICByZXR1cm4gTG9nZ2VyO1xufSgpO1xuXG5cblxudmFyIGJhc2VMb2dnZXIgPSBuZXcgTG9nZ2VyKCk7XG5cbnZhciBFdmVudEVtaXR0ZXIgPSBmdW5jdGlvbiAoKSB7XG5cdGZ1bmN0aW9uIEV2ZW50RW1pdHRlcigpIHtcblx0XHRjbGFzc0NhbGxDaGVjayh0aGlzLCBFdmVudEVtaXR0ZXIpO1xuXG5cdFx0dGhpcy5vYnNlcnZlcnMgPSB7fTtcblx0fVxuXG5cdEV2ZW50RW1pdHRlci5wcm90b3R5cGUub24gPSBmdW5jdGlvbiBvbihldmVudHMsIGxpc3RlbmVyKSB7XG5cdFx0dmFyIF90aGlzID0gdGhpcztcblxuXHRcdGV2ZW50cy5zcGxpdCgnICcpLmZvckVhY2goZnVuY3Rpb24gKGV2ZW50KSB7XG5cdFx0XHRfdGhpcy5vYnNlcnZlcnNbZXZlbnRdID0gX3RoaXMub2JzZXJ2ZXJzW2V2ZW50XSB8fCBbXTtcblx0XHRcdF90aGlzLm9ic2VydmVyc1tldmVudF0ucHVzaChsaXN0ZW5lcik7XG5cdFx0fSk7XG5cdH07XG5cblx0RXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vZmYgPSBmdW5jdGlvbiBvZmYoZXZlbnQsIGxpc3RlbmVyKSB7XG5cdFx0dmFyIF90aGlzMiA9IHRoaXM7XG5cblx0XHRpZiAoIXRoaXMub2JzZXJ2ZXJzW2V2ZW50XSkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdHRoaXMub2JzZXJ2ZXJzW2V2ZW50XS5mb3JFYWNoKGZ1bmN0aW9uICgpIHtcblx0XHRcdGlmICghbGlzdGVuZXIpIHtcblx0XHRcdFx0ZGVsZXRlIF90aGlzMi5vYnNlcnZlcnNbZXZlbnRdO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dmFyIGluZGV4ID0gX3RoaXMyLm9ic2VydmVyc1tldmVudF0uaW5kZXhPZihsaXN0ZW5lcik7XG5cdFx0XHRcdGlmIChpbmRleCA+IC0xKSB7XG5cdFx0XHRcdFx0X3RoaXMyLm9ic2VydmVyc1tldmVudF0uc3BsaWNlKGluZGV4LCAxKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pO1xuXHR9O1xuXG5cdEV2ZW50RW1pdHRlci5wcm90b3R5cGUuZW1pdCA9IGZ1bmN0aW9uIGVtaXQoZXZlbnQpIHtcblx0XHRmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4gPiAxID8gX2xlbiAtIDEgOiAwKSwgX2tleSA9IDE7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcblx0XHRcdGFyZ3NbX2tleSAtIDFdID0gYXJndW1lbnRzW19rZXldO1xuXHRcdH1cblxuXHRcdGlmICh0aGlzLm9ic2VydmVyc1tldmVudF0pIHtcblx0XHRcdHZhciBjbG9uZWQgPSBbXS5jb25jYXQodGhpcy5vYnNlcnZlcnNbZXZlbnRdKTtcblx0XHRcdGNsb25lZC5mb3JFYWNoKGZ1bmN0aW9uIChvYnNlcnZlcikge1xuXHRcdFx0XHRvYnNlcnZlci5hcHBseSh1bmRlZmluZWQsIGFyZ3MpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0aWYgKHRoaXMub2JzZXJ2ZXJzWycqJ10pIHtcblx0XHRcdHZhciBfY2xvbmVkID0gW10uY29uY2F0KHRoaXMub2JzZXJ2ZXJzWycqJ10pO1xuXHRcdFx0X2Nsb25lZC5mb3JFYWNoKGZ1bmN0aW9uIChvYnNlcnZlcikge1xuXHRcdFx0XHR2YXIgX3JlZjtcblxuXHRcdFx0XHRvYnNlcnZlci5hcHBseShvYnNlcnZlciwgKF9yZWYgPSBbZXZlbnRdKS5jb25jYXQuYXBwbHkoX3JlZiwgYXJncykpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHR9O1xuXG5cdHJldHVybiBFdmVudEVtaXR0ZXI7XG59KCk7XG5cbmZ1bmN0aW9uIG1ha2VTdHJpbmcob2JqZWN0KSB7XG4gIGlmIChvYmplY3QgPT0gbnVsbCkgcmV0dXJuICcnO1xuICByZXR1cm4gJycgKyBvYmplY3Q7XG59XG5cbmZ1bmN0aW9uIGNvcHkoYSwgcywgdCkge1xuICBhLmZvckVhY2goZnVuY3Rpb24gKG0pIHtcbiAgICBpZiAoc1ttXSkgdFttXSA9IHNbbV07XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBnZXRMYXN0T2ZQYXRoKG9iamVjdCwgcGF0aCwgRW1wdHkpIHtcbiAgZnVuY3Rpb24gY2xlYW5LZXkoa2V5KSB7XG4gICAgcmV0dXJuIGtleSAmJiBrZXkuaW5kZXhPZignIyMjJykgPiAtMSA/IGtleS5yZXBsYWNlKC8jIyMvZywgJy4nKSA6IGtleTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNhbk5vdFRyYXZlcnNlRGVlcGVyKCkge1xuICAgIHJldHVybiAhb2JqZWN0IHx8IHR5cGVvZiBvYmplY3QgPT09ICdzdHJpbmcnO1xuICB9XG5cbiAgdmFyIHN0YWNrID0gdHlwZW9mIHBhdGggIT09ICdzdHJpbmcnID8gW10uY29uY2F0KHBhdGgpIDogcGF0aC5zcGxpdCgnLicpO1xuICB3aGlsZSAoc3RhY2subGVuZ3RoID4gMSkge1xuICAgIGlmIChjYW5Ob3RUcmF2ZXJzZURlZXBlcigpKSByZXR1cm4ge307XG5cbiAgICB2YXIga2V5ID0gY2xlYW5LZXkoc3RhY2suc2hpZnQoKSk7XG4gICAgaWYgKCFvYmplY3Rba2V5XSAmJiBFbXB0eSkgb2JqZWN0W2tleV0gPSBuZXcgRW1wdHkoKTtcbiAgICBvYmplY3QgPSBvYmplY3Rba2V5XTtcbiAgfVxuXG4gIGlmIChjYW5Ob3RUcmF2ZXJzZURlZXBlcigpKSByZXR1cm4ge307XG4gIHJldHVybiB7XG4gICAgb2JqOiBvYmplY3QsXG4gICAgazogY2xlYW5LZXkoc3RhY2suc2hpZnQoKSlcbiAgfTtcbn1cblxuZnVuY3Rpb24gc2V0UGF0aChvYmplY3QsIHBhdGgsIG5ld1ZhbHVlKSB7XG4gIHZhciBfZ2V0TGFzdE9mUGF0aCA9IGdldExhc3RPZlBhdGgob2JqZWN0LCBwYXRoLCBPYmplY3QpLFxuICAgICAgb2JqID0gX2dldExhc3RPZlBhdGgub2JqLFxuICAgICAgayA9IF9nZXRMYXN0T2ZQYXRoLms7XG5cbiAgb2JqW2tdID0gbmV3VmFsdWU7XG59XG5cbmZ1bmN0aW9uIHB1c2hQYXRoKG9iamVjdCwgcGF0aCwgbmV3VmFsdWUsIGNvbmNhdCkge1xuICB2YXIgX2dldExhc3RPZlBhdGgyID0gZ2V0TGFzdE9mUGF0aChvYmplY3QsIHBhdGgsIE9iamVjdCksXG4gICAgICBvYmogPSBfZ2V0TGFzdE9mUGF0aDIub2JqLFxuICAgICAgayA9IF9nZXRMYXN0T2ZQYXRoMi5rO1xuXG4gIG9ialtrXSA9IG9ialtrXSB8fCBbXTtcbiAgaWYgKGNvbmNhdCkgb2JqW2tdID0gb2JqW2tdLmNvbmNhdChuZXdWYWx1ZSk7XG4gIGlmICghY29uY2F0KSBvYmpba10ucHVzaChuZXdWYWx1ZSk7XG59XG5cbmZ1bmN0aW9uIGdldFBhdGgob2JqZWN0LCBwYXRoKSB7XG4gIHZhciBfZ2V0TGFzdE9mUGF0aDMgPSBnZXRMYXN0T2ZQYXRoKG9iamVjdCwgcGF0aCksXG4gICAgICBvYmogPSBfZ2V0TGFzdE9mUGF0aDMub2JqLFxuICAgICAgayA9IF9nZXRMYXN0T2ZQYXRoMy5rO1xuXG4gIGlmICghb2JqKSByZXR1cm4gdW5kZWZpbmVkO1xuICByZXR1cm4gb2JqW2tdO1xufVxuXG5mdW5jdGlvbiBkZWVwRXh0ZW5kKHRhcmdldCwgc291cmNlLCBvdmVyd3JpdGUpIHtcbiAgZm9yICh2YXIgcHJvcCBpbiBzb3VyY2UpIHtcbiAgICBpZiAocHJvcCBpbiB0YXJnZXQpIHtcbiAgICAgIC8vIElmIHdlIHJlYWNoZWQgYSBsZWFmIHN0cmluZyBpbiB0YXJnZXQgb3Igc291cmNlIHRoZW4gcmVwbGFjZSB3aXRoIHNvdXJjZSBvciBza2lwIGRlcGVuZGluZyBvbiB0aGUgJ292ZXJ3cml0ZScgc3dpdGNoXG4gICAgICBpZiAodHlwZW9mIHRhcmdldFtwcm9wXSA9PT0gJ3N0cmluZycgfHwgdGFyZ2V0W3Byb3BdIGluc3RhbmNlb2YgU3RyaW5nIHx8IHR5cGVvZiBzb3VyY2VbcHJvcF0gPT09ICdzdHJpbmcnIHx8IHNvdXJjZVtwcm9wXSBpbnN0YW5jZW9mIFN0cmluZykge1xuICAgICAgICBpZiAob3ZlcndyaXRlKSB0YXJnZXRbcHJvcF0gPSBzb3VyY2VbcHJvcF07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkZWVwRXh0ZW5kKHRhcmdldFtwcm9wXSwgc291cmNlW3Byb3BdLCBvdmVyd3JpdGUpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0YXJnZXRbcHJvcF0gPSBzb3VyY2VbcHJvcF07XG4gICAgfVxuICB9cmV0dXJuIHRhcmdldDtcbn1cblxuZnVuY3Rpb24gcmVnZXhFc2NhcGUoc3RyKSB7XG4gIHJldHVybiBzdHIucmVwbGFjZSgvW1xcLVxcW1xcXVxcL1xce1xcfVxcKFxcKVxcKlxcK1xcP1xcLlxcXFxcXF5cXCRcXHxdL2csICdcXFxcJCYnKTtcbn1cblxuLyogZXNsaW50LWRpc2FibGUgKi9cbnZhciBfZW50aXR5TWFwID0ge1xuICBcIiZcIjogXCImYW1wO1wiLFxuICBcIjxcIjogXCImbHQ7XCIsXG4gIFwiPlwiOiBcIiZndDtcIixcbiAgJ1wiJzogJyZxdW90OycsXG4gIFwiJ1wiOiAnJiMzOTsnLFxuICBcIi9cIjogJyYjeDJGOydcbn07XG4vKiBlc2xpbnQtZW5hYmxlICovXG5cbmZ1bmN0aW9uIGVzY2FwZShkYXRhKSB7XG4gIGlmICh0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gZGF0YS5yZXBsYWNlKC9bJjw+XCInXFwvXS9nLCBmdW5jdGlvbiAocykge1xuICAgICAgcmV0dXJuIF9lbnRpdHlNYXBbc107XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cbn1cblxudmFyIFJlc291cmNlU3RvcmUgPSBmdW5jdGlvbiAoX0V2ZW50RW1pdHRlcikge1xuICBpbmhlcml0cyhSZXNvdXJjZVN0b3JlLCBfRXZlbnRFbWl0dGVyKTtcblxuICBmdW5jdGlvbiBSZXNvdXJjZVN0b3JlKCkge1xuICAgIHZhciBkYXRhID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcbiAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogeyBuczogWyd0cmFuc2xhdGlvbiddLCBkZWZhdWx0TlM6ICd0cmFuc2xhdGlvbicgfTtcbiAgICBjbGFzc0NhbGxDaGVjayh0aGlzLCBSZXNvdXJjZVN0b3JlKTtcblxuICAgIHZhciBfdGhpcyA9IHBvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgX0V2ZW50RW1pdHRlci5jYWxsKHRoaXMpKTtcblxuICAgIF90aGlzLmRhdGEgPSBkYXRhO1xuICAgIF90aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIFJlc291cmNlU3RvcmUucHJvdG90eXBlLmFkZE5hbWVzcGFjZXMgPSBmdW5jdGlvbiBhZGROYW1lc3BhY2VzKG5zKSB7XG4gICAgaWYgKHRoaXMub3B0aW9ucy5ucy5pbmRleE9mKG5zKSA8IDApIHtcbiAgICAgIHRoaXMub3B0aW9ucy5ucy5wdXNoKG5zKTtcbiAgICB9XG4gIH07XG5cbiAgUmVzb3VyY2VTdG9yZS5wcm90b3R5cGUucmVtb3ZlTmFtZXNwYWNlcyA9IGZ1bmN0aW9uIHJlbW92ZU5hbWVzcGFjZXMobnMpIHtcbiAgICB2YXIgaW5kZXggPSB0aGlzLm9wdGlvbnMubnMuaW5kZXhPZihucyk7XG4gICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgIHRoaXMub3B0aW9ucy5ucy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIH1cbiAgfTtcblxuICBSZXNvdXJjZVN0b3JlLnByb3RvdHlwZS5nZXRSZXNvdXJjZSA9IGZ1bmN0aW9uIGdldFJlc291cmNlKGxuZywgbnMsIGtleSkge1xuICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiB7fTtcblxuICAgIHZhciBrZXlTZXBhcmF0b3IgPSBvcHRpb25zLmtleVNlcGFyYXRvciB8fCB0aGlzLm9wdGlvbnMua2V5U2VwYXJhdG9yO1xuICAgIGlmIChrZXlTZXBhcmF0b3IgPT09IHVuZGVmaW5lZCkga2V5U2VwYXJhdG9yID0gJy4nO1xuXG4gICAgdmFyIHBhdGggPSBbbG5nLCBuc107XG4gICAgaWYgKGtleSAmJiB0eXBlb2Yga2V5ICE9PSAnc3RyaW5nJykgcGF0aCA9IHBhdGguY29uY2F0KGtleSk7XG4gICAgaWYgKGtleSAmJiB0eXBlb2Yga2V5ID09PSAnc3RyaW5nJykgcGF0aCA9IHBhdGguY29uY2F0KGtleVNlcGFyYXRvciA/IGtleS5zcGxpdChrZXlTZXBhcmF0b3IpIDoga2V5KTtcblxuICAgIGlmIChsbmcuaW5kZXhPZignLicpID4gLTEpIHtcbiAgICAgIHBhdGggPSBsbmcuc3BsaXQoJy4nKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZ2V0UGF0aCh0aGlzLmRhdGEsIHBhdGgpO1xuICB9O1xuXG4gIFJlc291cmNlU3RvcmUucHJvdG90eXBlLmFkZFJlc291cmNlID0gZnVuY3Rpb24gYWRkUmVzb3VyY2UobG5nLCBucywga2V5LCB2YWx1ZSkge1xuICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDQgJiYgYXJndW1lbnRzWzRdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbNF0gOiB7IHNpbGVudDogZmFsc2UgfTtcblxuICAgIHZhciBrZXlTZXBhcmF0b3IgPSB0aGlzLm9wdGlvbnMua2V5U2VwYXJhdG9yO1xuICAgIGlmIChrZXlTZXBhcmF0b3IgPT09IHVuZGVmaW5lZCkga2V5U2VwYXJhdG9yID0gJy4nO1xuXG4gICAgdmFyIHBhdGggPSBbbG5nLCBuc107XG4gICAgaWYgKGtleSkgcGF0aCA9IHBhdGguY29uY2F0KGtleVNlcGFyYXRvciA/IGtleS5zcGxpdChrZXlTZXBhcmF0b3IpIDoga2V5KTtcblxuICAgIGlmIChsbmcuaW5kZXhPZignLicpID4gLTEpIHtcbiAgICAgIHBhdGggPSBsbmcuc3BsaXQoJy4nKTtcbiAgICAgIHZhbHVlID0gbnM7XG4gICAgICBucyA9IHBhdGhbMV07XG4gICAgfVxuXG4gICAgdGhpcy5hZGROYW1lc3BhY2VzKG5zKTtcblxuICAgIHNldFBhdGgodGhpcy5kYXRhLCBwYXRoLCB2YWx1ZSk7XG5cbiAgICBpZiAoIW9wdGlvbnMuc2lsZW50KSB0aGlzLmVtaXQoJ2FkZGVkJywgbG5nLCBucywga2V5LCB2YWx1ZSk7XG4gIH07XG5cbiAgUmVzb3VyY2VTdG9yZS5wcm90b3R5cGUuYWRkUmVzb3VyY2VzID0gZnVuY3Rpb24gYWRkUmVzb3VyY2VzKGxuZywgbnMsIHJlc291cmNlcykge1xuICAgIGZvciAodmFyIG0gaW4gcmVzb3VyY2VzKSB7XG4gICAgICBpZiAodHlwZW9mIHJlc291cmNlc1ttXSA9PT0gJ3N0cmluZycpIHRoaXMuYWRkUmVzb3VyY2UobG5nLCBucywgbSwgcmVzb3VyY2VzW21dLCB7IHNpbGVudDogdHJ1ZSB9KTtcbiAgICB9XG4gICAgdGhpcy5lbWl0KCdhZGRlZCcsIGxuZywgbnMsIHJlc291cmNlcyk7XG4gIH07XG5cbiAgUmVzb3VyY2VTdG9yZS5wcm90b3R5cGUuYWRkUmVzb3VyY2VCdW5kbGUgPSBmdW5jdGlvbiBhZGRSZXNvdXJjZUJ1bmRsZShsbmcsIG5zLCByZXNvdXJjZXMsIGRlZXAsIG92ZXJ3cml0ZSkge1xuICAgIHZhciBwYXRoID0gW2xuZywgbnNdO1xuICAgIGlmIChsbmcuaW5kZXhPZignLicpID4gLTEpIHtcbiAgICAgIHBhdGggPSBsbmcuc3BsaXQoJy4nKTtcbiAgICAgIGRlZXAgPSByZXNvdXJjZXM7XG4gICAgICByZXNvdXJjZXMgPSBucztcbiAgICAgIG5zID0gcGF0aFsxXTtcbiAgICB9XG5cbiAgICB0aGlzLmFkZE5hbWVzcGFjZXMobnMpO1xuXG4gICAgdmFyIHBhY2sgPSBnZXRQYXRoKHRoaXMuZGF0YSwgcGF0aCkgfHwge307XG5cbiAgICBpZiAoZGVlcCkge1xuICAgICAgZGVlcEV4dGVuZChwYWNrLCByZXNvdXJjZXMsIG92ZXJ3cml0ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHBhY2sgPSBfZXh0ZW5kcyh7fSwgcGFjaywgcmVzb3VyY2VzKTtcbiAgICB9XG5cbiAgICBzZXRQYXRoKHRoaXMuZGF0YSwgcGF0aCwgcGFjayk7XG5cbiAgICB0aGlzLmVtaXQoJ2FkZGVkJywgbG5nLCBucywgcmVzb3VyY2VzKTtcbiAgfTtcblxuICBSZXNvdXJjZVN0b3JlLnByb3RvdHlwZS5yZW1vdmVSZXNvdXJjZUJ1bmRsZSA9IGZ1bmN0aW9uIHJlbW92ZVJlc291cmNlQnVuZGxlKGxuZywgbnMpIHtcbiAgICBpZiAodGhpcy5oYXNSZXNvdXJjZUJ1bmRsZShsbmcsIG5zKSkge1xuICAgICAgZGVsZXRlIHRoaXMuZGF0YVtsbmddW25zXTtcbiAgICB9XG4gICAgdGhpcy5yZW1vdmVOYW1lc3BhY2VzKG5zKTtcblxuICAgIHRoaXMuZW1pdCgncmVtb3ZlZCcsIGxuZywgbnMpO1xuICB9O1xuXG4gIFJlc291cmNlU3RvcmUucHJvdG90eXBlLmhhc1Jlc291cmNlQnVuZGxlID0gZnVuY3Rpb24gaGFzUmVzb3VyY2VCdW5kbGUobG5nLCBucykge1xuICAgIHJldHVybiB0aGlzLmdldFJlc291cmNlKGxuZywgbnMpICE9PSB1bmRlZmluZWQ7XG4gIH07XG5cbiAgUmVzb3VyY2VTdG9yZS5wcm90b3R5cGUuZ2V0UmVzb3VyY2VCdW5kbGUgPSBmdW5jdGlvbiBnZXRSZXNvdXJjZUJ1bmRsZShsbmcsIG5zKSB7XG4gICAgaWYgKCFucykgbnMgPSB0aGlzLm9wdGlvbnMuZGVmYXVsdE5TO1xuXG4gICAgLy8gVE9ETzogQ09NUEFUSUJJTElUWSByZW1vdmUgZXh0ZW5kIGluIHYyLjEuMFxuICAgIGlmICh0aGlzLm9wdGlvbnMuY29tcGF0aWJpbGl0eUFQSSA9PT0gJ3YxJykgcmV0dXJuIF9leHRlbmRzKHt9LCB0aGlzLmdldFJlc291cmNlKGxuZywgbnMpKTtcblxuICAgIHJldHVybiB0aGlzLmdldFJlc291cmNlKGxuZywgbnMpO1xuICB9O1xuXG4gIFJlc291cmNlU3RvcmUucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTigpIHtcbiAgICByZXR1cm4gdGhpcy5kYXRhO1xuICB9O1xuXG4gIHJldHVybiBSZXNvdXJjZVN0b3JlO1xufShFdmVudEVtaXR0ZXIpO1xuXG52YXIgcG9zdFByb2Nlc3NvciA9IHtcblxuICBwcm9jZXNzb3JzOiB7fSxcblxuICBhZGRQb3N0UHJvY2Vzc29yOiBmdW5jdGlvbiBhZGRQb3N0UHJvY2Vzc29yKG1vZHVsZSkge1xuICAgIHRoaXMucHJvY2Vzc29yc1ttb2R1bGUubmFtZV0gPSBtb2R1bGU7XG4gIH0sXG4gIGhhbmRsZTogZnVuY3Rpb24gaGFuZGxlKHByb2Nlc3NvcnMsIHZhbHVlLCBrZXksIG9wdGlvbnMsIHRyYW5zbGF0b3IpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgcHJvY2Vzc29ycy5mb3JFYWNoKGZ1bmN0aW9uIChwcm9jZXNzb3IpIHtcbiAgICAgIGlmIChfdGhpcy5wcm9jZXNzb3JzW3Byb2Nlc3Nvcl0pIHZhbHVlID0gX3RoaXMucHJvY2Vzc29yc1twcm9jZXNzb3JdLnByb2Nlc3ModmFsdWUsIGtleSwgb3B0aW9ucywgdHJhbnNsYXRvcik7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIGNvbnZlcnRJbnRlcnBvbGF0aW9uKG9wdGlvbnMpIHtcblxuICBvcHRpb25zLmludGVycG9sYXRpb24gPSB7XG4gICAgdW5lc2NhcGVTdWZmaXg6ICdIVE1MJ1xuICB9O1xuXG4gIG9wdGlvbnMuaW50ZXJwb2xhdGlvbi5wcmVmaXggPSBvcHRpb25zLmludGVycG9sYXRpb25QcmVmaXggfHwgJ19fJztcbiAgb3B0aW9ucy5pbnRlcnBvbGF0aW9uLnN1ZmZpeCA9IG9wdGlvbnMuaW50ZXJwb2xhdGlvblN1ZmZpeCB8fCAnX18nO1xuICBvcHRpb25zLmludGVycG9sYXRpb24uZXNjYXBlVmFsdWUgPSBvcHRpb25zLmVzY2FwZUludGVycG9sYXRpb24gfHwgZmFsc2U7XG5cbiAgb3B0aW9ucy5pbnRlcnBvbGF0aW9uLm5lc3RpbmdQcmVmaXggPSBvcHRpb25zLnJldXNlUHJlZml4IHx8ICckdCgnO1xuICBvcHRpb25zLmludGVycG9sYXRpb24ubmVzdGluZ1N1ZmZpeCA9IG9wdGlvbnMucmV1c2VTdWZmaXggfHwgJyknO1xuXG4gIHJldHVybiBvcHRpb25zO1xufVxuXG5mdW5jdGlvbiBjb252ZXJ0QVBJT3B0aW9ucyhvcHRpb25zKSB7XG4gIGlmIChvcHRpb25zLnJlc1N0b3JlKSBvcHRpb25zLnJlc291cmNlcyA9IG9wdGlvbnMucmVzU3RvcmU7XG5cbiAgaWYgKG9wdGlvbnMubnMgJiYgb3B0aW9ucy5ucy5kZWZhdWx0TnMpIHtcbiAgICBvcHRpb25zLmRlZmF1bHROUyA9IG9wdGlvbnMubnMuZGVmYXVsdE5zO1xuICAgIG9wdGlvbnMubnMgPSBvcHRpb25zLm5zLm5hbWVzcGFjZXM7XG4gIH0gZWxzZSB7XG4gICAgb3B0aW9ucy5kZWZhdWx0TlMgPSBvcHRpb25zLm5zIHx8ICd0cmFuc2xhdGlvbic7XG4gIH1cblxuICBpZiAob3B0aW9ucy5mYWxsYmFja1RvRGVmYXVsdE5TICYmIG9wdGlvbnMuZGVmYXVsdE5TKSBvcHRpb25zLmZhbGxiYWNrTlMgPSBvcHRpb25zLmRlZmF1bHROUztcblxuICBvcHRpb25zLnNhdmVNaXNzaW5nID0gb3B0aW9ucy5zZW5kTWlzc2luZztcbiAgb3B0aW9ucy5zYXZlTWlzc2luZ1RvID0gb3B0aW9ucy5zZW5kTWlzc2luZ1RvIHx8ICdjdXJyZW50JztcbiAgb3B0aW9ucy5yZXR1cm5OdWxsID0gb3B0aW9ucy5mYWxsYmFja09uTnVsbCA/IGZhbHNlIDogdHJ1ZTtcbiAgb3B0aW9ucy5yZXR1cm5FbXB0eVN0cmluZyA9IG9wdGlvbnMuZmFsbGJhY2tPbkVtcHR5ID8gZmFsc2UgOiB0cnVlO1xuICBvcHRpb25zLnJldHVybk9iamVjdHMgPSBvcHRpb25zLnJldHVybk9iamVjdFRyZWVzO1xuICBvcHRpb25zLmpvaW5BcnJheXMgPSAnXFxuJztcblxuICBvcHRpb25zLnJldHVybmVkT2JqZWN0SGFuZGxlciA9IG9wdGlvbnMub2JqZWN0VHJlZUtleUhhbmRsZXI7XG4gIG9wdGlvbnMucGFyc2VNaXNzaW5nS2V5SGFuZGxlciA9IG9wdGlvbnMucGFyc2VNaXNzaW5nS2V5O1xuICBvcHRpb25zLmFwcGVuZE5hbWVzcGFjZVRvTWlzc2luZ0tleSA9IHRydWU7XG5cbiAgb3B0aW9ucy5uc1NlcGFyYXRvciA9IG9wdGlvbnMubnNzZXBhcmF0b3IgfHwgJzonO1xuICBvcHRpb25zLmtleVNlcGFyYXRvciA9IG9wdGlvbnMua2V5c2VwYXJhdG9yIHx8ICcuJztcblxuICBpZiAob3B0aW9ucy5zaG9ydGN1dEZ1bmN0aW9uID09PSAnc3ByaW50ZicpIHtcbiAgICBvcHRpb25zLm92ZXJsb2FkVHJhbnNsYXRpb25PcHRpb25IYW5kbGVyID0gZnVuY3Rpb24gKGFyZ3MpIHtcbiAgICAgIHZhciB2YWx1ZXMgPSBbXTtcblxuICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmdzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhbHVlcy5wdXNoKGFyZ3NbaV0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBwb3N0UHJvY2VzczogJ3NwcmludGYnLFxuICAgICAgICBzcHJpbnRmOiB2YWx1ZXNcbiAgICAgIH07XG4gICAgfTtcbiAgfVxuXG4gIG9wdGlvbnMud2hpdGVsaXN0ID0gb3B0aW9ucy5sbmdXaGl0ZWxpc3Q7XG4gIG9wdGlvbnMucHJlbG9hZCA9IG9wdGlvbnMucHJlbG9hZDtcbiAgaWYgKG9wdGlvbnMubG9hZCA9PT0gJ2N1cnJlbnQnKSBvcHRpb25zLmxvYWQgPSAnY3VycmVudE9ubHknO1xuICBpZiAob3B0aW9ucy5sb2FkID09PSAndW5zcGVjaWZpYycpIG9wdGlvbnMubG9hZCA9ICdsYW5ndWFnZU9ubHknO1xuXG4gIC8vIGJhY2tlbmRcbiAgb3B0aW9ucy5iYWNrZW5kID0gb3B0aW9ucy5iYWNrZW5kIHx8IHt9O1xuICBvcHRpb25zLmJhY2tlbmQubG9hZFBhdGggPSBvcHRpb25zLnJlc0dldFBhdGggfHwgJ2xvY2FsZXMvX19sbmdfXy9fX25zX18uanNvbic7XG4gIG9wdGlvbnMuYmFja2VuZC5hZGRQYXRoID0gb3B0aW9ucy5yZXNQb3N0UGF0aCB8fCAnbG9jYWxlcy9hZGQvX19sbmdfXy9fX25zX18nO1xuICBvcHRpb25zLmJhY2tlbmQuYWxsb3dNdWx0aUxvYWRpbmcgPSBvcHRpb25zLmR5bmFtaWNMb2FkO1xuXG4gIC8vIGNhY2hlXG4gIG9wdGlvbnMuY2FjaGUgPSBvcHRpb25zLmNhY2hlIHx8IHt9O1xuICBvcHRpb25zLmNhY2hlLnByZWZpeCA9ICdyZXNfJztcbiAgb3B0aW9ucy5jYWNoZS5leHBpcmF0aW9uVGltZSA9IDcgKiAyNCAqIDYwICogNjAgKiAxMDAwO1xuICBvcHRpb25zLmNhY2hlLmVuYWJsZWQgPSBvcHRpb25zLnVzZUxvY2FsU3RvcmFnZSA/IHRydWUgOiBmYWxzZTtcblxuICBvcHRpb25zID0gY29udmVydEludGVycG9sYXRpb24ob3B0aW9ucyk7XG4gIGlmIChvcHRpb25zLmRlZmF1bHRWYXJpYWJsZXMpIG9wdGlvbnMuaW50ZXJwb2xhdGlvbi5kZWZhdWx0VmFyaWFibGVzID0gb3B0aW9ucy5kZWZhdWx0VmFyaWFibGVzO1xuXG4gIC8vIFRPRE86IGRlcHJlY2F0aW9uXG4gIC8vIGlmIChvcHRpb25zLmdldEFzeW5jID09PSBmYWxzZSkgdGhyb3cgZGVwcmVjYXRpb24gZXJyb3JcblxuICByZXR1cm4gb3B0aW9ucztcbn1cblxuZnVuY3Rpb24gY29udmVydEpTT05PcHRpb25zKG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IGNvbnZlcnRJbnRlcnBvbGF0aW9uKG9wdGlvbnMpO1xuICBvcHRpb25zLmpvaW5BcnJheXMgPSAnXFxuJztcblxuICByZXR1cm4gb3B0aW9ucztcbn1cblxuZnVuY3Rpb24gY29udmVydFRPcHRpb25zKG9wdGlvbnMpIHtcbiAgaWYgKG9wdGlvbnMuaW50ZXJwb2xhdGlvblByZWZpeCB8fCBvcHRpb25zLmludGVycG9sYXRpb25TdWZmaXggfHwgb3B0aW9ucy5lc2NhcGVJbnRlcnBvbGF0aW9uKSB7XG4gICAgb3B0aW9ucyA9IGNvbnZlcnRJbnRlcnBvbGF0aW9uKG9wdGlvbnMpO1xuICB9XG5cbiAgb3B0aW9ucy5uc1NlcGFyYXRvciA9IG9wdGlvbnMubnNzZXBhcmF0b3I7XG4gIG9wdGlvbnMua2V5U2VwYXJhdG9yID0gb3B0aW9ucy5rZXlzZXBhcmF0b3I7XG5cbiAgb3B0aW9ucy5yZXR1cm5PYmplY3RzID0gb3B0aW9ucy5yZXR1cm5PYmplY3RUcmVlcztcblxuICByZXR1cm4gb3B0aW9ucztcbn1cblxuZnVuY3Rpb24gYXBwZW5kQmFja3dhcmRzQVBJKGkxOG4pIHtcbiAgaTE4bi5sbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgYmFzZUxvZ2dlci5kZXByZWNhdGUoJ2kxOG5leHQubG5nKCkgY2FuIGJlIHJlcGxhY2VkIGJ5IGkxOG5leHQubGFuZ3VhZ2UgZm9yIGRldGVjdGVkIGxhbmd1YWdlIG9yIGkxOG5leHQubGFuZ3VhZ2VzIGZvciBsYW5ndWFnZXMgb3JkZXJlZCBieSB0cmFuc2xhdGlvbiBsb29rdXAuJyk7XG4gICAgcmV0dXJuIGkxOG4uc2VydmljZXMubGFuZ3VhZ2VVdGlscy50b1Jlc29sdmVIaWVyYXJjaHkoaTE4bi5sYW5ndWFnZSlbMF07XG4gIH07XG5cbiAgaTE4bi5wcmVsb2FkID0gZnVuY3Rpb24gKGxuZ3MsIGNiKSB7XG4gICAgYmFzZUxvZ2dlci5kZXByZWNhdGUoJ2kxOG5leHQucHJlbG9hZCgpIGNhbiBiZSByZXBsYWNlZCB3aXRoIGkxOG5leHQubG9hZExhbmd1YWdlcygpJyk7XG4gICAgaTE4bi5sb2FkTGFuZ3VhZ2VzKGxuZ3MsIGNiKTtcbiAgfTtcblxuICBpMThuLnNldExuZyA9IGZ1bmN0aW9uIChsbmcsIG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gICAgYmFzZUxvZ2dlci5kZXByZWNhdGUoJ2kxOG5leHQuc2V0TG5nKCkgY2FuIGJlIHJlcGxhY2VkIHdpdGggaTE4bmV4dC5jaGFuZ2VMYW5ndWFnZSgpIG9yIGkxOG5leHQuZ2V0Rml4ZWRUKCkgdG8gZ2V0IGEgdHJhbnNsYXRpb24gZnVuY3Rpb24gd2l0aCBmaXhlZCBsYW5ndWFnZSBvciBuYW1lc3BhY2UuJyk7XG4gICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBjYWxsYmFjayA9IG9wdGlvbnM7XG4gICAgICBvcHRpb25zID0ge307XG4gICAgfVxuICAgIGlmICghb3B0aW9ucykgb3B0aW9ucyA9IHt9O1xuXG4gICAgaWYgKG9wdGlvbnMuZml4TG5nID09PSB0cnVlKSB7XG4gICAgICBpZiAoY2FsbGJhY2spIHJldHVybiBjYWxsYmFjayhudWxsLCBpMThuLmdldEZpeGVkVChsbmcpKTtcbiAgICB9XG5cbiAgICBpMThuLmNoYW5nZUxhbmd1YWdlKGxuZywgY2FsbGJhY2spO1xuICB9O1xuXG4gIGkxOG4uYWRkUG9zdFByb2Nlc3NvciA9IGZ1bmN0aW9uIChuYW1lLCBmYykge1xuICAgIGJhc2VMb2dnZXIuZGVwcmVjYXRlKCdpMThuZXh0LmFkZFBvc3RQcm9jZXNzb3IoKSBjYW4gYmUgcmVwbGFjZWQgYnkgaTE4bmV4dC51c2UoeyB0eXBlOiBcXCdwb3N0UHJvY2Vzc29yXFwnLCBuYW1lOiBcXCduYW1lXFwnLCBwcm9jZXNzOiBmYyB9KScpO1xuICAgIGkxOG4udXNlKHtcbiAgICAgIHR5cGU6ICdwb3N0UHJvY2Vzc29yJyxcbiAgICAgIG5hbWU6IG5hbWUsXG4gICAgICBwcm9jZXNzOiBmY1xuICAgIH0pO1xuICB9O1xufVxuXG52YXIgVHJhbnNsYXRvciA9IGZ1bmN0aW9uIChfRXZlbnRFbWl0dGVyKSB7XG4gIGluaGVyaXRzKFRyYW5zbGF0b3IsIF9FdmVudEVtaXR0ZXIpO1xuXG4gIGZ1bmN0aW9uIFRyYW5zbGF0b3Ioc2VydmljZXMpIHtcbiAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307XG4gICAgY2xhc3NDYWxsQ2hlY2sodGhpcywgVHJhbnNsYXRvcik7XG5cbiAgICB2YXIgX3RoaXMgPSBwb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIF9FdmVudEVtaXR0ZXIuY2FsbCh0aGlzKSk7XG5cbiAgICBjb3B5KFsncmVzb3VyY2VTdG9yZScsICdsYW5ndWFnZVV0aWxzJywgJ3BsdXJhbFJlc29sdmVyJywgJ2ludGVycG9sYXRvcicsICdiYWNrZW5kQ29ubmVjdG9yJ10sIHNlcnZpY2VzLCBfdGhpcyk7XG5cbiAgICBfdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICBfdGhpcy5sb2dnZXIgPSBiYXNlTG9nZ2VyLmNyZWF0ZSgndHJhbnNsYXRvcicpO1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIFRyYW5zbGF0b3IucHJvdG90eXBlLmNoYW5nZUxhbmd1YWdlID0gZnVuY3Rpb24gY2hhbmdlTGFuZ3VhZ2UobG5nKSB7XG4gICAgaWYgKGxuZykgdGhpcy5sYW5ndWFnZSA9IGxuZztcbiAgfTtcblxuICBUcmFuc2xhdG9yLnByb3RvdHlwZS5leGlzdHMgPSBmdW5jdGlvbiBleGlzdHMoa2V5KSB7XG4gICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHsgaW50ZXJwb2xhdGlvbjoge30gfTtcblxuICAgIGlmICh0aGlzLm9wdGlvbnMuY29tcGF0aWJpbGl0eUFQSSA9PT0gJ3YxJykge1xuICAgICAgb3B0aW9ucyA9IGNvbnZlcnRUT3B0aW9ucyhvcHRpb25zKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5yZXNvbHZlKGtleSwgb3B0aW9ucykgIT09IHVuZGVmaW5lZDtcbiAgfTtcblxuICBUcmFuc2xhdG9yLnByb3RvdHlwZS5leHRyYWN0RnJvbUtleSA9IGZ1bmN0aW9uIGV4dHJhY3RGcm9tS2V5KGtleSwgb3B0aW9ucykge1xuICAgIHZhciBuc1NlcGFyYXRvciA9IG9wdGlvbnMubnNTZXBhcmF0b3IgfHwgdGhpcy5vcHRpb25zLm5zU2VwYXJhdG9yO1xuICAgIGlmIChuc1NlcGFyYXRvciA9PT0gdW5kZWZpbmVkKSBuc1NlcGFyYXRvciA9ICc6JztcbiAgICB2YXIga2V5U2VwYXJhdG9yID0gb3B0aW9ucy5rZXlTZXBhcmF0b3IgfHwgdGhpcy5vcHRpb25zLmtleVNlcGFyYXRvciB8fCAnLic7XG5cbiAgICB2YXIgbmFtZXNwYWNlcyA9IG9wdGlvbnMubnMgfHwgdGhpcy5vcHRpb25zLmRlZmF1bHROUztcbiAgICBpZiAobnNTZXBhcmF0b3IgJiYga2V5LmluZGV4T2YobnNTZXBhcmF0b3IpID4gLTEpIHtcbiAgICAgIHZhciBwYXJ0cyA9IGtleS5zcGxpdChuc1NlcGFyYXRvcik7XG4gICAgICBpZiAobnNTZXBhcmF0b3IgIT09IGtleVNlcGFyYXRvciB8fCBuc1NlcGFyYXRvciA9PT0ga2V5U2VwYXJhdG9yICYmIHRoaXMub3B0aW9ucy5ucy5pbmRleE9mKHBhcnRzWzBdKSA+IC0xKSBuYW1lc3BhY2VzID0gcGFydHMuc2hpZnQoKTtcbiAgICAgIGtleSA9IHBhcnRzLmpvaW4oa2V5U2VwYXJhdG9yKTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBuYW1lc3BhY2VzID09PSAnc3RyaW5nJykgbmFtZXNwYWNlcyA9IFtuYW1lc3BhY2VzXTtcblxuICAgIHJldHVybiB7XG4gICAgICBrZXk6IGtleSxcbiAgICAgIG5hbWVzcGFjZXM6IG5hbWVzcGFjZXNcbiAgICB9O1xuICB9O1xuXG4gIFRyYW5zbGF0b3IucHJvdG90eXBlLnRyYW5zbGF0ZSA9IGZ1bmN0aW9uIHRyYW5zbGF0ZShrZXlzKSB7XG4gICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9O1xuXG4gICAgaWYgKCh0eXBlb2Ygb3B0aW9ucyA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2Yob3B0aW9ucykpICE9PSAnb2JqZWN0Jykge1xuICAgICAgb3B0aW9ucyA9IHRoaXMub3B0aW9ucy5vdmVybG9hZFRyYW5zbGF0aW9uT3B0aW9uSGFuZGxlcihhcmd1bWVudHMpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5vcHRpb25zLmNvbXBhdGliaWxpdHlBUEkgPT09ICd2MScpIHtcbiAgICAgIG9wdGlvbnMgPSBjb252ZXJ0VE9wdGlvbnMob3B0aW9ucyk7XG4gICAgfVxuXG4gICAgLy8gbm9uIHZhbGlkIGtleXMgaGFuZGxpbmdcbiAgICBpZiAoa2V5cyA9PT0gdW5kZWZpbmVkIHx8IGtleXMgPT09IG51bGwgfHwga2V5cyA9PT0gJycpIHJldHVybiAnJztcbiAgICBpZiAodHlwZW9mIGtleXMgPT09ICdudW1iZXInKSBrZXlzID0gU3RyaW5nKGtleXMpO1xuICAgIGlmICh0eXBlb2Yga2V5cyA9PT0gJ3N0cmluZycpIGtleXMgPSBba2V5c107XG5cbiAgICAvLyBzZXBhcmF0b3JzXG4gICAgdmFyIGtleVNlcGFyYXRvciA9IG9wdGlvbnMua2V5U2VwYXJhdG9yIHx8IHRoaXMub3B0aW9ucy5rZXlTZXBhcmF0b3IgfHwgJy4nO1xuXG4gICAgLy8gZ2V0IG5hbWVzcGFjZShzKVxuXG4gICAgdmFyIF9leHRyYWN0RnJvbUtleSA9IHRoaXMuZXh0cmFjdEZyb21LZXkoa2V5c1trZXlzLmxlbmd0aCAtIDFdLCBvcHRpb25zKSxcbiAgICAgICAga2V5ID0gX2V4dHJhY3RGcm9tS2V5LmtleSxcbiAgICAgICAgbmFtZXNwYWNlcyA9IF9leHRyYWN0RnJvbUtleS5uYW1lc3BhY2VzO1xuXG4gICAgdmFyIG5hbWVzcGFjZSA9IG5hbWVzcGFjZXNbbmFtZXNwYWNlcy5sZW5ndGggLSAxXTtcblxuICAgIC8vIHJldHVybiBrZXkgb24gQ0lNb2RlXG4gICAgdmFyIGxuZyA9IG9wdGlvbnMubG5nIHx8IHRoaXMubGFuZ3VhZ2U7XG4gICAgdmFyIGFwcGVuZE5hbWVzcGFjZVRvQ0lNb2RlID0gb3B0aW9ucy5hcHBlbmROYW1lc3BhY2VUb0NJTW9kZSB8fCB0aGlzLm9wdGlvbnMuYXBwZW5kTmFtZXNwYWNlVG9DSU1vZGU7XG4gICAgaWYgKGxuZyAmJiBsbmcudG9Mb3dlckNhc2UoKSA9PT0gJ2NpbW9kZScpIHtcbiAgICAgIGlmIChhcHBlbmROYW1lc3BhY2VUb0NJTW9kZSkge1xuICAgICAgICB2YXIgbnNTZXBhcmF0b3IgPSBvcHRpb25zLm5zU2VwYXJhdG9yIHx8IHRoaXMub3B0aW9ucy5uc1NlcGFyYXRvcjtcbiAgICAgICAgcmV0dXJuIG5hbWVzcGFjZSArIG5zU2VwYXJhdG9yICsga2V5O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4ga2V5O1xuICAgIH1cblxuICAgIC8vIHJlc29sdmUgZnJvbSBzdG9yZVxuICAgIHZhciByZXMgPSB0aGlzLnJlc29sdmUoa2V5cywgb3B0aW9ucyk7XG5cbiAgICB2YXIgcmVzVHlwZSA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuYXBwbHkocmVzKTtcbiAgICB2YXIgbm9PYmplY3QgPSBbJ1tvYmplY3QgTnVtYmVyXScsICdbb2JqZWN0IEZ1bmN0aW9uXScsICdbb2JqZWN0IFJlZ0V4cF0nXTtcbiAgICB2YXIgam9pbkFycmF5cyA9IG9wdGlvbnMuam9pbkFycmF5cyAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5qb2luQXJyYXlzIDogdGhpcy5vcHRpb25zLmpvaW5BcnJheXM7XG5cbiAgICAvLyBvYmplY3RcbiAgICBpZiAocmVzICYmIHR5cGVvZiByZXMgIT09ICdzdHJpbmcnICYmIG5vT2JqZWN0LmluZGV4T2YocmVzVHlwZSkgPCAwICYmICEoam9pbkFycmF5cyAmJiByZXNUeXBlID09PSAnW29iamVjdCBBcnJheV0nKSkge1xuICAgICAgaWYgKCFvcHRpb25zLnJldHVybk9iamVjdHMgJiYgIXRoaXMub3B0aW9ucy5yZXR1cm5PYmplY3RzKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLndhcm4oJ2FjY2Vzc2luZyBhbiBvYmplY3QgLSBidXQgcmV0dXJuT2JqZWN0cyBvcHRpb25zIGlzIG5vdCBlbmFibGVkIScpO1xuICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLnJldHVybmVkT2JqZWN0SGFuZGxlciA/IHRoaXMub3B0aW9ucy5yZXR1cm5lZE9iamVjdEhhbmRsZXIoa2V5LCByZXMsIG9wdGlvbnMpIDogJ2tleSBcXCcnICsga2V5ICsgJyAoJyArIHRoaXMubGFuZ3VhZ2UgKyAnKVxcJyByZXR1cm5lZCBhbiBvYmplY3QgaW5zdGVhZCBvZiBzdHJpbmcuJztcbiAgICAgIH1cblxuICAgICAgLy8gaWYgd2UgZ290IGEgc2VwYXJhdG9yIHdlIGxvb3Agb3ZlciBjaGlsZHJlbiAtIGVsc2Ugd2UganVzdCByZXR1cm4gb2JqZWN0IGFzIGlzXG4gICAgICAvLyBhcyBoYXZpbmcgaXQgc2V0IHRvIGZhbHNlIG1lYW5zIG5vIGhpZXJhcmNoeSBzbyBubyBsb29rdXAgZm9yIG5lc3RlZCB2YWx1ZXNcbiAgICAgIGlmIChvcHRpb25zLmtleVNlcGFyYXRvciB8fCB0aGlzLm9wdGlvbnMua2V5U2VwYXJhdG9yKSB7XG4gICAgICAgIHZhciBjb3B5JCQxID0gcmVzVHlwZSA9PT0gJ1tvYmplY3QgQXJyYXldJyA/IFtdIDoge307IC8vIGFwcGx5IGNoaWxkIHRyYW5zbGF0aW9uIG9uIGEgY29weVxuXG4gICAgICAgIGZvciAodmFyIG0gaW4gcmVzKSB7XG4gICAgICAgICAgaWYgKHJlcy5oYXNPd25Qcm9wZXJ0eShtKSkge1xuICAgICAgICAgICAgY29weSQkMVttXSA9IHRoaXMudHJhbnNsYXRlKCcnICsga2V5ICsga2V5U2VwYXJhdG9yICsgbSwgX2V4dGVuZHMoe30sIG9wdGlvbnMsIHsgam9pbkFycmF5czogZmFsc2UsIG5zOiBuYW1lc3BhY2VzIH0pKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmVzID0gY29weSQkMTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gYXJyYXkgc3BlY2lhbCB0cmVhdG1lbnRcbiAgICBlbHNlIGlmIChqb2luQXJyYXlzICYmIHJlc1R5cGUgPT09ICdbb2JqZWN0IEFycmF5XScpIHtcbiAgICAgICAgcmVzID0gcmVzLmpvaW4oam9pbkFycmF5cyk7XG4gICAgICAgIGlmIChyZXMpIHJlcyA9IHRoaXMuZXh0ZW5kVHJhbnNsYXRpb24ocmVzLCBrZXksIG9wdGlvbnMpO1xuICAgICAgfVxuICAgICAgLy8gc3RyaW5nLCBlbXB0eSBvciBudWxsXG4gICAgICBlbHNlIHtcbiAgICAgICAgICB2YXIgdXNlZERlZmF1bHQgPSBmYWxzZSxcbiAgICAgICAgICAgICAgdXNlZEtleSA9IGZhbHNlO1xuXG4gICAgICAgICAgLy8gZmFsbGJhY2sgdmFsdWVcbiAgICAgICAgICBpZiAoIXRoaXMuaXNWYWxpZExvb2t1cChyZXMpICYmIG9wdGlvbnMuZGVmYXVsdFZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHVzZWREZWZhdWx0ID0gdHJ1ZTtcbiAgICAgICAgICAgIHJlcyA9IG9wdGlvbnMuZGVmYXVsdFZhbHVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoIXRoaXMuaXNWYWxpZExvb2t1cChyZXMpKSB7XG4gICAgICAgICAgICB1c2VkS2V5ID0gdHJ1ZTtcbiAgICAgICAgICAgIHJlcyA9IGtleTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBzYXZlIG1pc3NpbmdcbiAgICAgICAgICBpZiAodXNlZEtleSB8fCB1c2VkRGVmYXVsdCkge1xuICAgICAgICAgICAgdGhpcy5sb2dnZXIubG9nKCdtaXNzaW5nS2V5JywgbG5nLCBuYW1lc3BhY2UsIGtleSwgcmVzKTtcblxuICAgICAgICAgICAgdmFyIGxuZ3MgPSBbXTtcbiAgICAgICAgICAgIHZhciBmYWxsYmFja0xuZ3MgPSB0aGlzLmxhbmd1YWdlVXRpbHMuZ2V0RmFsbGJhY2tDb2Rlcyh0aGlzLm9wdGlvbnMuZmFsbGJhY2tMbmcsIG9wdGlvbnMubG5nIHx8IHRoaXMubGFuZ3VhZ2UpO1xuICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5zYXZlTWlzc2luZ1RvID09PSAnZmFsbGJhY2snICYmIGZhbGxiYWNrTG5ncyAmJiBmYWxsYmFja0xuZ3NbMF0pIHtcbiAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmYWxsYmFja0xuZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBsbmdzLnB1c2goZmFsbGJhY2tMbmdzW2ldKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLm9wdGlvbnMuc2F2ZU1pc3NpbmdUbyA9PT0gJ2FsbCcpIHtcbiAgICAgICAgICAgICAgbG5ncyA9IHRoaXMubGFuZ3VhZ2VVdGlscy50b1Jlc29sdmVIaWVyYXJjaHkob3B0aW9ucy5sbmcgfHwgdGhpcy5sYW5ndWFnZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAvLyh0aGlzLm9wdGlvbnMuc2F2ZU1pc3NpbmdUbyA9PT0gJ2N1cnJlbnQnIHx8ICh0aGlzLm9wdGlvbnMuc2F2ZU1pc3NpbmdUbyA9PT0gJ2ZhbGxiYWNrJyAmJiB0aGlzLm9wdGlvbnMuZmFsbGJhY2tMbmdbMF0gPT09IGZhbHNlKSApIHtcbiAgICAgICAgICAgICAgbG5ncy5wdXNoKG9wdGlvbnMubG5nIHx8IHRoaXMubGFuZ3VhZ2UpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLnNhdmVNaXNzaW5nKSB7XG4gICAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMubWlzc2luZ0tleUhhbmRsZXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMubWlzc2luZ0tleUhhbmRsZXIobG5ncywgbmFtZXNwYWNlLCBrZXksIHJlcyk7XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5iYWNrZW5kQ29ubmVjdG9yICYmIHRoaXMuYmFja2VuZENvbm5lY3Rvci5zYXZlTWlzc2luZykge1xuICAgICAgICAgICAgICAgIHRoaXMuYmFja2VuZENvbm5lY3Rvci5zYXZlTWlzc2luZyhsbmdzLCBuYW1lc3BhY2UsIGtleSwgcmVzKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmVtaXQoJ21pc3NpbmdLZXknLCBsbmdzLCBuYW1lc3BhY2UsIGtleSwgcmVzKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBleHRlbmRcbiAgICAgICAgICByZXMgPSB0aGlzLmV4dGVuZFRyYW5zbGF0aW9uKHJlcywga2V5LCBvcHRpb25zKTtcblxuICAgICAgICAgIC8vIGFwcGVuZCBuYW1lc3BhY2UgaWYgc3RpbGwga2V5XG4gICAgICAgICAgaWYgKHVzZWRLZXkgJiYgcmVzID09PSBrZXkgJiYgdGhpcy5vcHRpb25zLmFwcGVuZE5hbWVzcGFjZVRvTWlzc2luZ0tleSkgcmVzID0gbmFtZXNwYWNlICsgJzonICsga2V5O1xuXG4gICAgICAgICAgLy8gcGFyc2VNaXNzaW5nS2V5SGFuZGxlclxuICAgICAgICAgIGlmICh1c2VkS2V5ICYmIHRoaXMub3B0aW9ucy5wYXJzZU1pc3NpbmdLZXlIYW5kbGVyKSByZXMgPSB0aGlzLm9wdGlvbnMucGFyc2VNaXNzaW5nS2V5SGFuZGxlcihyZXMpO1xuICAgICAgICB9XG5cbiAgICAvLyByZXR1cm5cbiAgICByZXR1cm4gcmVzO1xuICB9O1xuXG4gIFRyYW5zbGF0b3IucHJvdG90eXBlLmV4dGVuZFRyYW5zbGF0aW9uID0gZnVuY3Rpb24gZXh0ZW5kVHJhbnNsYXRpb24ocmVzLCBrZXksIG9wdGlvbnMpIHtcbiAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgIGlmIChvcHRpb25zLmludGVycG9sYXRpb24pIHRoaXMuaW50ZXJwb2xhdG9yLmluaXQoX2V4dGVuZHMoe30sIG9wdGlvbnMsIHsgaW50ZXJwb2xhdGlvbjogX2V4dGVuZHMoe30sIHRoaXMub3B0aW9ucy5pbnRlcnBvbGF0aW9uLCBvcHRpb25zLmludGVycG9sYXRpb24pIH0pKTtcblxuICAgIC8vIGludGVycG9sYXRlXG4gICAgdmFyIGRhdGEgPSBvcHRpb25zLnJlcGxhY2UgJiYgdHlwZW9mIG9wdGlvbnMucmVwbGFjZSAhPT0gJ3N0cmluZycgPyBvcHRpb25zLnJlcGxhY2UgOiBvcHRpb25zO1xuICAgIGlmICh0aGlzLm9wdGlvbnMuaW50ZXJwb2xhdGlvbi5kZWZhdWx0VmFyaWFibGVzKSBkYXRhID0gX2V4dGVuZHMoe30sIHRoaXMub3B0aW9ucy5pbnRlcnBvbGF0aW9uLmRlZmF1bHRWYXJpYWJsZXMsIGRhdGEpO1xuICAgIHJlcyA9IHRoaXMuaW50ZXJwb2xhdG9yLmludGVycG9sYXRlKHJlcywgZGF0YSwgdGhpcy5sYW5ndWFnZSk7XG5cbiAgICAvLyBuZXN0aW5nXG4gICAgcmVzID0gdGhpcy5pbnRlcnBvbGF0b3IubmVzdChyZXMsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBfdGhpczIudHJhbnNsYXRlLmFwcGx5KF90aGlzMiwgYXJncyk7XG4gICAgfSwgb3B0aW9ucyk7XG5cbiAgICBpZiAob3B0aW9ucy5pbnRlcnBvbGF0aW9uKSB0aGlzLmludGVycG9sYXRvci5yZXNldCgpO1xuXG4gICAgLy8gcG9zdCBwcm9jZXNzXG4gICAgdmFyIHBvc3RQcm9jZXNzID0gb3B0aW9ucy5wb3N0UHJvY2VzcyB8fCB0aGlzLm9wdGlvbnMucG9zdFByb2Nlc3M7XG4gICAgdmFyIHBvc3RQcm9jZXNzb3JOYW1lcyA9IHR5cGVvZiBwb3N0UHJvY2VzcyA9PT0gJ3N0cmluZycgPyBbcG9zdFByb2Nlc3NdIDogcG9zdFByb2Nlc3M7XG5cbiAgICBpZiAocmVzICE9PSB1bmRlZmluZWQgJiYgcG9zdFByb2Nlc3Nvck5hbWVzICYmIHBvc3RQcm9jZXNzb3JOYW1lcy5sZW5ndGggJiYgb3B0aW9ucy5hcHBseVBvc3RQcm9jZXNzb3IgIT09IGZhbHNlKSB7XG4gICAgICByZXMgPSBwb3N0UHJvY2Vzc29yLmhhbmRsZShwb3N0UHJvY2Vzc29yTmFtZXMsIHJlcywga2V5LCBvcHRpb25zLCB0aGlzKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzO1xuICB9O1xuXG4gIFRyYW5zbGF0b3IucHJvdG90eXBlLnJlc29sdmUgPSBmdW5jdGlvbiByZXNvbHZlKGtleXMpIHtcbiAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTtcblxuICAgIHZhciBmb3VuZCA9IHZvaWQgMDtcblxuICAgIGlmICh0eXBlb2Yga2V5cyA9PT0gJ3N0cmluZycpIGtleXMgPSBba2V5c107XG5cbiAgICAvLyBmb3JFYWNoIHBvc3NpYmxlIGtleVxuICAgIGtleXMuZm9yRWFjaChmdW5jdGlvbiAoaykge1xuICAgICAgaWYgKF90aGlzMy5pc1ZhbGlkTG9va3VwKGZvdW5kKSkgcmV0dXJuO1xuXG4gICAgICB2YXIgX2V4dHJhY3RGcm9tS2V5MiA9IF90aGlzMy5leHRyYWN0RnJvbUtleShrLCBvcHRpb25zKSxcbiAgICAgICAgICBrZXkgPSBfZXh0cmFjdEZyb21LZXkyLmtleSxcbiAgICAgICAgICBuYW1lc3BhY2VzID0gX2V4dHJhY3RGcm9tS2V5Mi5uYW1lc3BhY2VzO1xuXG4gICAgICBpZiAoX3RoaXMzLm9wdGlvbnMuZmFsbGJhY2tOUykgbmFtZXNwYWNlcyA9IG5hbWVzcGFjZXMuY29uY2F0KF90aGlzMy5vcHRpb25zLmZhbGxiYWNrTlMpO1xuXG4gICAgICB2YXIgbmVlZHNQbHVyYWxIYW5kbGluZyA9IG9wdGlvbnMuY291bnQgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2Ygb3B0aW9ucy5jb3VudCAhPT0gJ3N0cmluZyc7XG4gICAgICB2YXIgbmVlZHNDb250ZXh0SGFuZGxpbmcgPSBvcHRpb25zLmNvbnRleHQgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2Ygb3B0aW9ucy5jb250ZXh0ID09PSAnc3RyaW5nJyAmJiBvcHRpb25zLmNvbnRleHQgIT09ICcnO1xuXG4gICAgICB2YXIgY29kZXMgPSBvcHRpb25zLmxuZ3MgPyBvcHRpb25zLmxuZ3MgOiBfdGhpczMubGFuZ3VhZ2VVdGlscy50b1Jlc29sdmVIaWVyYXJjaHkob3B0aW9ucy5sbmcgfHwgX3RoaXMzLmxhbmd1YWdlKTtcblxuICAgICAgbmFtZXNwYWNlcy5mb3JFYWNoKGZ1bmN0aW9uIChucykge1xuICAgICAgICBpZiAoX3RoaXMzLmlzVmFsaWRMb29rdXAoZm91bmQpKSByZXR1cm47XG5cbiAgICAgICAgY29kZXMuZm9yRWFjaChmdW5jdGlvbiAoY29kZSkge1xuICAgICAgICAgIGlmIChfdGhpczMuaXNWYWxpZExvb2t1cChmb3VuZCkpIHJldHVybjtcblxuICAgICAgICAgIHZhciBmaW5hbEtleSA9IGtleTtcbiAgICAgICAgICB2YXIgZmluYWxLZXlzID0gW2ZpbmFsS2V5XTtcblxuICAgICAgICAgIHZhciBwbHVyYWxTdWZmaXggPSB2b2lkIDA7XG4gICAgICAgICAgaWYgKG5lZWRzUGx1cmFsSGFuZGxpbmcpIHBsdXJhbFN1ZmZpeCA9IF90aGlzMy5wbHVyYWxSZXNvbHZlci5nZXRTdWZmaXgoY29kZSwgb3B0aW9ucy5jb3VudCk7XG5cbiAgICAgICAgICAvLyBmYWxsYmFjayBmb3IgcGx1cmFsIGlmIGNvbnRleHQgbm90IGZvdW5kXG4gICAgICAgICAgaWYgKG5lZWRzUGx1cmFsSGFuZGxpbmcgJiYgbmVlZHNDb250ZXh0SGFuZGxpbmcpIGZpbmFsS2V5cy5wdXNoKGZpbmFsS2V5ICsgcGx1cmFsU3VmZml4KTtcblxuICAgICAgICAgIC8vIGdldCBrZXkgZm9yIGNvbnRleHQgaWYgbmVlZGVkXG4gICAgICAgICAgaWYgKG5lZWRzQ29udGV4dEhhbmRsaW5nKSBmaW5hbEtleXMucHVzaChmaW5hbEtleSArPSAnJyArIF90aGlzMy5vcHRpb25zLmNvbnRleHRTZXBhcmF0b3IgKyBvcHRpb25zLmNvbnRleHQpO1xuXG4gICAgICAgICAgLy8gZ2V0IGtleSBmb3IgcGx1cmFsIGlmIG5lZWRlZFxuICAgICAgICAgIGlmIChuZWVkc1BsdXJhbEhhbmRsaW5nKSBmaW5hbEtleXMucHVzaChmaW5hbEtleSArPSBwbHVyYWxTdWZmaXgpO1xuXG4gICAgICAgICAgLy8gaXRlcmF0ZSBvdmVyIGZpbmFsS2V5cyBzdGFydGluZyB3aXRoIG1vc3Qgc3BlY2lmaWMgcGx1cmFsa2V5ICgtPiBjb250ZXh0a2V5IG9ubHkpIC0+IHNpbmd1bGFya2V5IG9ubHlcbiAgICAgICAgICB2YXIgcG9zc2libGVLZXkgPSB2b2lkIDA7XG4gICAgICAgICAgd2hpbGUgKHBvc3NpYmxlS2V5ID0gZmluYWxLZXlzLnBvcCgpKSB7XG4gICAgICAgICAgICBpZiAoX3RoaXMzLmlzVmFsaWRMb29rdXAoZm91bmQpKSBjb250aW51ZTtcbiAgICAgICAgICAgIGZvdW5kID0gX3RoaXMzLmdldFJlc291cmNlKGNvZGUsIG5zLCBwb3NzaWJsZUtleSwgb3B0aW9ucyk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGZvdW5kO1xuICB9O1xuXG4gIFRyYW5zbGF0b3IucHJvdG90eXBlLmlzVmFsaWRMb29rdXAgPSBmdW5jdGlvbiBpc1ZhbGlkTG9va3VwKHJlcykge1xuICAgIHJldHVybiByZXMgIT09IHVuZGVmaW5lZCAmJiAhKCF0aGlzLm9wdGlvbnMucmV0dXJuTnVsbCAmJiByZXMgPT09IG51bGwpICYmICEoIXRoaXMub3B0aW9ucy5yZXR1cm5FbXB0eVN0cmluZyAmJiByZXMgPT09ICcnKTtcbiAgfTtcblxuICBUcmFuc2xhdG9yLnByb3RvdHlwZS5nZXRSZXNvdXJjZSA9IGZ1bmN0aW9uIGdldFJlc291cmNlKGNvZGUsIG5zLCBrZXkpIHtcbiAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDoge307XG5cbiAgICByZXR1cm4gdGhpcy5yZXNvdXJjZVN0b3JlLmdldFJlc291cmNlKGNvZGUsIG5zLCBrZXksIG9wdGlvbnMpO1xuICB9O1xuXG4gIHJldHVybiBUcmFuc2xhdG9yO1xufShFdmVudEVtaXR0ZXIpO1xuXG5mdW5jdGlvbiBjYXBpdGFsaXplKHN0cmluZykge1xuICByZXR1cm4gc3RyaW5nLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgc3RyaW5nLnNsaWNlKDEpO1xufVxuXG52YXIgTGFuZ3VhZ2VVdGlsID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBMYW5ndWFnZVV0aWwob3B0aW9ucykge1xuICAgIGNsYXNzQ2FsbENoZWNrKHRoaXMsIExhbmd1YWdlVXRpbCk7XG5cbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuXG4gICAgdGhpcy53aGl0ZWxpc3QgPSB0aGlzLm9wdGlvbnMud2hpdGVsaXN0IHx8IGZhbHNlO1xuICAgIHRoaXMubG9nZ2VyID0gYmFzZUxvZ2dlci5jcmVhdGUoJ2xhbmd1YWdlVXRpbHMnKTtcbiAgfVxuXG4gIExhbmd1YWdlVXRpbC5wcm90b3R5cGUuZ2V0U2NyaXB0UGFydEZyb21Db2RlID0gZnVuY3Rpb24gZ2V0U2NyaXB0UGFydEZyb21Db2RlKGNvZGUpIHtcbiAgICBpZiAoIWNvZGUgfHwgY29kZS5pbmRleE9mKCctJykgPCAwKSByZXR1cm4gbnVsbDtcblxuICAgIHZhciBwID0gY29kZS5zcGxpdCgnLScpO1xuICAgIGlmIChwLmxlbmd0aCA9PT0gMikgcmV0dXJuIG51bGw7XG4gICAgcC5wb3AoKTtcbiAgICByZXR1cm4gdGhpcy5mb3JtYXRMYW5ndWFnZUNvZGUocC5qb2luKCctJykpO1xuICB9O1xuXG4gIExhbmd1YWdlVXRpbC5wcm90b3R5cGUuZ2V0TGFuZ3VhZ2VQYXJ0RnJvbUNvZGUgPSBmdW5jdGlvbiBnZXRMYW5ndWFnZVBhcnRGcm9tQ29kZShjb2RlKSB7XG4gICAgaWYgKCFjb2RlIHx8IGNvZGUuaW5kZXhPZignLScpIDwgMCkgcmV0dXJuIGNvZGU7XG5cbiAgICB2YXIgcCA9IGNvZGUuc3BsaXQoJy0nKTtcbiAgICByZXR1cm4gdGhpcy5mb3JtYXRMYW5ndWFnZUNvZGUocFswXSk7XG4gIH07XG5cbiAgTGFuZ3VhZ2VVdGlsLnByb3RvdHlwZS5mb3JtYXRMYW5ndWFnZUNvZGUgPSBmdW5jdGlvbiBmb3JtYXRMYW5ndWFnZUNvZGUoY29kZSkge1xuICAgIC8vIGh0dHA6Ly93d3cuaWFuYS5vcmcvYXNzaWdubWVudHMvbGFuZ3VhZ2UtdGFncy9sYW5ndWFnZS10YWdzLnhodG1sXG4gICAgaWYgKHR5cGVvZiBjb2RlID09PSAnc3RyaW5nJyAmJiBjb2RlLmluZGV4T2YoJy0nKSA+IC0xKSB7XG4gICAgICB2YXIgc3BlY2lhbENhc2VzID0gWydoYW5zJywgJ2hhbnQnLCAnbGF0bicsICdjeXJsJywgJ2NhbnMnLCAnbW9uZycsICdhcmFiJ107XG4gICAgICB2YXIgcCA9IGNvZGUuc3BsaXQoJy0nKTtcblxuICAgICAgaWYgKHRoaXMub3B0aW9ucy5sb3dlckNhc2VMbmcpIHtcbiAgICAgICAgcCA9IHAubWFwKGZ1bmN0aW9uIChwYXJ0KSB7XG4gICAgICAgICAgcmV0dXJuIHBhcnQudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2UgaWYgKHAubGVuZ3RoID09PSAyKSB7XG4gICAgICAgIHBbMF0gPSBwWzBdLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIHBbMV0gPSBwWzFdLnRvVXBwZXJDYXNlKCk7XG5cbiAgICAgICAgaWYgKHNwZWNpYWxDYXNlcy5pbmRleE9mKHBbMV0udG9Mb3dlckNhc2UoKSkgPiAtMSkgcFsxXSA9IGNhcGl0YWxpemUocFsxXS50b0xvd2VyQ2FzZSgpKTtcbiAgICAgIH0gZWxzZSBpZiAocC5sZW5ndGggPT09IDMpIHtcbiAgICAgICAgcFswXSA9IHBbMF0udG9Mb3dlckNhc2UoKTtcblxuICAgICAgICAvLyBpZiBsZW5naHQgMiBndWVzcyBpdCdzIGEgY291bnRyeVxuICAgICAgICBpZiAocFsxXS5sZW5ndGggPT09IDIpIHBbMV0gPSBwWzFdLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgIGlmIChwWzBdICE9PSAnc2duJyAmJiBwWzJdLmxlbmd0aCA9PT0gMikgcFsyXSA9IHBbMl0udG9VcHBlckNhc2UoKTtcblxuICAgICAgICBpZiAoc3BlY2lhbENhc2VzLmluZGV4T2YocFsxXS50b0xvd2VyQ2FzZSgpKSA+IC0xKSBwWzFdID0gY2FwaXRhbGl6ZShwWzFdLnRvTG93ZXJDYXNlKCkpO1xuICAgICAgICBpZiAoc3BlY2lhbENhc2VzLmluZGV4T2YocFsyXS50b0xvd2VyQ2FzZSgpKSA+IC0xKSBwWzJdID0gY2FwaXRhbGl6ZShwWzJdLnRvTG93ZXJDYXNlKCkpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcC5qb2luKCctJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLm9wdGlvbnMuY2xlYW5Db2RlIHx8IHRoaXMub3B0aW9ucy5sb3dlckNhc2VMbmcgPyBjb2RlLnRvTG93ZXJDYXNlKCkgOiBjb2RlO1xuICAgIH1cbiAgfTtcblxuICBMYW5ndWFnZVV0aWwucHJvdG90eXBlLmlzV2hpdGVsaXN0ZWQgPSBmdW5jdGlvbiBpc1doaXRlbGlzdGVkKGNvZGUsIGV4YWN0TWF0Y2gpIHtcbiAgICBpZiAodGhpcy5vcHRpb25zLmxvYWQgPT09ICdsYW5ndWFnZU9ubHknIHx8IHRoaXMub3B0aW9ucy5ub25FeHBsaWNpdFdoaXRlbGlzdCAmJiAhZXhhY3RNYXRjaCkge1xuICAgICAgY29kZSA9IHRoaXMuZ2V0TGFuZ3VhZ2VQYXJ0RnJvbUNvZGUoY29kZSk7XG4gICAgfVxuICAgIHJldHVybiAhdGhpcy53aGl0ZWxpc3QgfHwgIXRoaXMud2hpdGVsaXN0Lmxlbmd0aCB8fCB0aGlzLndoaXRlbGlzdC5pbmRleE9mKGNvZGUpID4gLTEgPyB0cnVlIDogZmFsc2U7XG4gIH07XG5cbiAgTGFuZ3VhZ2VVdGlsLnByb3RvdHlwZS5nZXRGYWxsYmFja0NvZGVzID0gZnVuY3Rpb24gZ2V0RmFsbGJhY2tDb2RlcyhmYWxsYmFja3MsIGNvZGUpIHtcbiAgICBpZiAoIWZhbGxiYWNrcykgcmV0dXJuIFtdO1xuICAgIGlmICh0eXBlb2YgZmFsbGJhY2tzID09PSAnc3RyaW5nJykgZmFsbGJhY2tzID0gW2ZhbGxiYWNrc107XG4gICAgaWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuYXBwbHkoZmFsbGJhY2tzKSA9PT0gJ1tvYmplY3QgQXJyYXldJykgcmV0dXJuIGZhbGxiYWNrcztcblxuICAgIGlmICghY29kZSkgcmV0dXJuIGZhbGxiYWNrcy5kZWZhdWx0IHx8IFtdO1xuXG4gICAgLy8gYXN1bWUgd2UgaGF2ZSBhbiBvYmplY3QgZGVmaW5pbmcgZmFsbGJhY2tzXG4gICAgdmFyIGZvdW5kID0gZmFsbGJhY2tzW2NvZGVdO1xuICAgIGlmICghZm91bmQpIGZvdW5kID0gZmFsbGJhY2tzW3RoaXMuZ2V0U2NyaXB0UGFydEZyb21Db2RlKGNvZGUpXTtcbiAgICBpZiAoIWZvdW5kKSBmb3VuZCA9IGZhbGxiYWNrc1t0aGlzLmZvcm1hdExhbmd1YWdlQ29kZShjb2RlKV07XG4gICAgaWYgKCFmb3VuZCkgZm91bmQgPSBmYWxsYmFja3MuZGVmYXVsdDtcblxuICAgIHJldHVybiBmb3VuZCB8fCBbXTtcbiAgfTtcblxuICBMYW5ndWFnZVV0aWwucHJvdG90eXBlLnRvUmVzb2x2ZUhpZXJhcmNoeSA9IGZ1bmN0aW9uIHRvUmVzb2x2ZUhpZXJhcmNoeShjb2RlLCBmYWxsYmFja0NvZGUpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgdmFyIGZhbGxiYWNrQ29kZXMgPSB0aGlzLmdldEZhbGxiYWNrQ29kZXMoZmFsbGJhY2tDb2RlIHx8IHRoaXMub3B0aW9ucy5mYWxsYmFja0xuZyB8fCBbXSwgY29kZSk7XG5cbiAgICB2YXIgY29kZXMgPSBbXTtcbiAgICB2YXIgYWRkQ29kZSA9IGZ1bmN0aW9uIGFkZENvZGUoY29kZSkge1xuICAgICAgdmFyIGV4YWN0TWF0Y2ggPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IGZhbHNlO1xuXG4gICAgICBpZiAoIWNvZGUpIHJldHVybjtcbiAgICAgIGlmIChfdGhpcy5pc1doaXRlbGlzdGVkKGNvZGUsIGV4YWN0TWF0Y2gpKSB7XG4gICAgICAgIGNvZGVzLnB1c2goY29kZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBfdGhpcy5sb2dnZXIud2FybigncmVqZWN0aW5nIG5vbi13aGl0ZWxpc3RlZCBsYW5ndWFnZSBjb2RlOiAnICsgY29kZSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGlmICh0eXBlb2YgY29kZSA9PT0gJ3N0cmluZycgJiYgY29kZS5pbmRleE9mKCctJykgPiAtMSkge1xuICAgICAgaWYgKHRoaXMub3B0aW9ucy5sb2FkICE9PSAnbGFuZ3VhZ2VPbmx5JykgYWRkQ29kZSh0aGlzLmZvcm1hdExhbmd1YWdlQ29kZShjb2RlKSwgdHJ1ZSk7XG4gICAgICBpZiAodGhpcy5vcHRpb25zLmxvYWQgIT09ICdsYW5ndWFnZU9ubHknICYmIHRoaXMub3B0aW9ucy5sb2FkICE9PSAnY3VycmVudE9ubHknKSBhZGRDb2RlKHRoaXMuZ2V0U2NyaXB0UGFydEZyb21Db2RlKGNvZGUpLCB0cnVlKTtcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMubG9hZCAhPT0gJ2N1cnJlbnRPbmx5JykgYWRkQ29kZSh0aGlzLmdldExhbmd1YWdlUGFydEZyb21Db2RlKGNvZGUpKTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBjb2RlID09PSAnc3RyaW5nJykge1xuICAgICAgYWRkQ29kZSh0aGlzLmZvcm1hdExhbmd1YWdlQ29kZShjb2RlKSk7XG4gICAgfVxuXG4gICAgZmFsbGJhY2tDb2Rlcy5mb3JFYWNoKGZ1bmN0aW9uIChmYykge1xuICAgICAgaWYgKGNvZGVzLmluZGV4T2YoZmMpIDwgMCkgYWRkQ29kZShfdGhpcy5mb3JtYXRMYW5ndWFnZUNvZGUoZmMpKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBjb2RlcztcbiAgfTtcblxuICByZXR1cm4gTGFuZ3VhZ2VVdGlsO1xufSgpO1xuXG4vLyBkZWZpbml0aW9uIGh0dHA6Ly90cmFuc2xhdGUuc291cmNlZm9yZ2UubmV0L3dpa2kvbDEwbi9wbHVyYWxmb3Jtc1xuLyogZXNsaW50LWRpc2FibGUgKi9cbnZhciBzZXRzID0gW3sgbG5nczogWydhY2gnLCAnYWsnLCAnYW0nLCAnYXJuJywgJ2JyJywgJ2ZpbCcsICdndW4nLCAnbG4nLCAnbWZlJywgJ21nJywgJ21pJywgJ29jJywgJ3RnJywgJ3RpJywgJ3RyJywgJ3V6JywgJ3dhJ10sIG5yOiBbMSwgMl0sIGZjOiAxIH0sIHsgbG5nczogWydhZicsICdhbicsICdhc3QnLCAnYXonLCAnYmcnLCAnYm4nLCAnY2EnLCAnZGEnLCAnZGUnLCAnZGV2JywgJ2VsJywgJ2VuJywgJ2VvJywgJ2VzJywgJ2VzX2FyJywgJ2V0JywgJ2V1JywgJ2ZpJywgJ2ZvJywgJ2Z1cicsICdmeScsICdnbCcsICdndScsICdoYScsICdoZScsICdoaScsICdodScsICdoeScsICdpYScsICdpdCcsICdrbicsICdrdScsICdsYicsICdtYWknLCAnbWwnLCAnbW4nLCAnbXInLCAnbmFoJywgJ25hcCcsICduYicsICduZScsICdubCcsICdubicsICdubycsICduc28nLCAncGEnLCAncGFwJywgJ3BtcycsICdwcycsICdwdCcsICdwdF9icicsICdybScsICdzY28nLCAnc2UnLCAnc2knLCAnc28nLCAnc29uJywgJ3NxJywgJ3N2JywgJ3N3JywgJ3RhJywgJ3RlJywgJ3RrJywgJ3VyJywgJ3lvJ10sIG5yOiBbMSwgMl0sIGZjOiAyIH0sIHsgbG5nczogWydheScsICdibycsICdjZ2cnLCAnZmEnLCAnaWQnLCAnamEnLCAnamJvJywgJ2thJywgJ2trJywgJ2ttJywgJ2tvJywgJ2t5JywgJ2xvJywgJ21zJywgJ3NhaCcsICdzdScsICd0aCcsICd0dCcsICd1ZycsICd2aScsICd3bycsICd6aCddLCBucjogWzFdLCBmYzogMyB9LCB7IGxuZ3M6IFsnYmUnLCAnYnMnLCAnZHonLCAnaHInLCAncnUnLCAnc3InLCAndWsnXSwgbnI6IFsxLCAyLCA1XSwgZmM6IDQgfSwgeyBsbmdzOiBbJ2FyJ10sIG5yOiBbMCwgMSwgMiwgMywgMTEsIDEwMF0sIGZjOiA1IH0sIHsgbG5nczogWydjcycsICdzayddLCBucjogWzEsIDIsIDVdLCBmYzogNiB9LCB7IGxuZ3M6IFsnY3NiJywgJ3BsJ10sIG5yOiBbMSwgMiwgNV0sIGZjOiA3IH0sIHsgbG5nczogWydjeSddLCBucjogWzEsIDIsIDMsIDhdLCBmYzogOCB9LCB7IGxuZ3M6IFsnZnInXSwgbnI6IFsxLCAyXSwgZmM6IDkgfSwgeyBsbmdzOiBbJ2dhJ10sIG5yOiBbMSwgMiwgMywgNywgMTFdLCBmYzogMTAgfSwgeyBsbmdzOiBbJ2dkJ10sIG5yOiBbMSwgMiwgMywgMjBdLCBmYzogMTEgfSwgeyBsbmdzOiBbJ2lzJ10sIG5yOiBbMSwgMl0sIGZjOiAxMiB9LCB7IGxuZ3M6IFsnanYnXSwgbnI6IFswLCAxXSwgZmM6IDEzIH0sIHsgbG5nczogWydrdyddLCBucjogWzEsIDIsIDMsIDRdLCBmYzogMTQgfSwgeyBsbmdzOiBbJ2x0J10sIG5yOiBbMSwgMiwgMTBdLCBmYzogMTUgfSwgeyBsbmdzOiBbJ2x2J10sIG5yOiBbMSwgMiwgMF0sIGZjOiAxNiB9LCB7IGxuZ3M6IFsnbWsnXSwgbnI6IFsxLCAyXSwgZmM6IDE3IH0sIHsgbG5nczogWydtbmsnXSwgbnI6IFswLCAxLCAyXSwgZmM6IDE4IH0sIHsgbG5nczogWydtdCddLCBucjogWzEsIDIsIDExLCAyMF0sIGZjOiAxOSB9LCB7IGxuZ3M6IFsnb3InXSwgbnI6IFsyLCAxXSwgZmM6IDIgfSwgeyBsbmdzOiBbJ3JvJ10sIG5yOiBbMSwgMiwgMjBdLCBmYzogMjAgfSwgeyBsbmdzOiBbJ3NsJ10sIG5yOiBbNSwgMSwgMiwgM10sIGZjOiAyMSB9XTtcblxudmFyIF9ydWxlc1BsdXJhbHNUeXBlcyA9IHtcbiAgMTogZnVuY3Rpb24gXyhuKSB7XG4gICAgcmV0dXJuIE51bWJlcihuID4gMSk7XG4gIH0sXG4gIDI6IGZ1bmN0aW9uIF8obikge1xuICAgIHJldHVybiBOdW1iZXIobiAhPSAxKTtcbiAgfSxcbiAgMzogZnVuY3Rpb24gXyhuKSB7XG4gICAgcmV0dXJuIDA7XG4gIH0sXG4gIDQ6IGZ1bmN0aW9uIF8obikge1xuICAgIHJldHVybiBOdW1iZXIobiAlIDEwID09IDEgJiYgbiAlIDEwMCAhPSAxMSA/IDAgOiBuICUgMTAgPj0gMiAmJiBuICUgMTAgPD0gNCAmJiAobiAlIDEwMCA8IDEwIHx8IG4gJSAxMDAgPj0gMjApID8gMSA6IDIpO1xuICB9LFxuICA1OiBmdW5jdGlvbiBfKG4pIHtcbiAgICByZXR1cm4gTnVtYmVyKG4gPT09IDAgPyAwIDogbiA9PSAxID8gMSA6IG4gPT0gMiA/IDIgOiBuICUgMTAwID49IDMgJiYgbiAlIDEwMCA8PSAxMCA/IDMgOiBuICUgMTAwID49IDExID8gNCA6IDUpO1xuICB9LFxuICA2OiBmdW5jdGlvbiBfKG4pIHtcbiAgICByZXR1cm4gTnVtYmVyKG4gPT0gMSA/IDAgOiBuID49IDIgJiYgbiA8PSA0ID8gMSA6IDIpO1xuICB9LFxuICA3OiBmdW5jdGlvbiBfKG4pIHtcbiAgICByZXR1cm4gTnVtYmVyKG4gPT0gMSA/IDAgOiBuICUgMTAgPj0gMiAmJiBuICUgMTAgPD0gNCAmJiAobiAlIDEwMCA8IDEwIHx8IG4gJSAxMDAgPj0gMjApID8gMSA6IDIpO1xuICB9LFxuICA4OiBmdW5jdGlvbiBfKG4pIHtcbiAgICByZXR1cm4gTnVtYmVyKG4gPT0gMSA/IDAgOiBuID09IDIgPyAxIDogbiAhPSA4ICYmIG4gIT0gMTEgPyAyIDogMyk7XG4gIH0sXG4gIDk6IGZ1bmN0aW9uIF8obikge1xuICAgIHJldHVybiBOdW1iZXIobiA+PSAyKTtcbiAgfSxcbiAgMTA6IGZ1bmN0aW9uIF8obikge1xuICAgIHJldHVybiBOdW1iZXIobiA9PSAxID8gMCA6IG4gPT0gMiA/IDEgOiBuIDwgNyA/IDIgOiBuIDwgMTEgPyAzIDogNCk7XG4gIH0sXG4gIDExOiBmdW5jdGlvbiBfKG4pIHtcbiAgICByZXR1cm4gTnVtYmVyKG4gPT0gMSB8fCBuID09IDExID8gMCA6IG4gPT0gMiB8fCBuID09IDEyID8gMSA6IG4gPiAyICYmIG4gPCAyMCA/IDIgOiAzKTtcbiAgfSxcbiAgMTI6IGZ1bmN0aW9uIF8obikge1xuICAgIHJldHVybiBOdW1iZXIobiAlIDEwICE9IDEgfHwgbiAlIDEwMCA9PSAxMSk7XG4gIH0sXG4gIDEzOiBmdW5jdGlvbiBfKG4pIHtcbiAgICByZXR1cm4gTnVtYmVyKG4gIT09IDApO1xuICB9LFxuICAxNDogZnVuY3Rpb24gXyhuKSB7XG4gICAgcmV0dXJuIE51bWJlcihuID09IDEgPyAwIDogbiA9PSAyID8gMSA6IG4gPT0gMyA/IDIgOiAzKTtcbiAgfSxcbiAgMTU6IGZ1bmN0aW9uIF8obikge1xuICAgIHJldHVybiBOdW1iZXIobiAlIDEwID09IDEgJiYgbiAlIDEwMCAhPSAxMSA/IDAgOiBuICUgMTAgPj0gMiAmJiAobiAlIDEwMCA8IDEwIHx8IG4gJSAxMDAgPj0gMjApID8gMSA6IDIpO1xuICB9LFxuICAxNjogZnVuY3Rpb24gXyhuKSB7XG4gICAgcmV0dXJuIE51bWJlcihuICUgMTAgPT0gMSAmJiBuICUgMTAwICE9IDExID8gMCA6IG4gIT09IDAgPyAxIDogMik7XG4gIH0sXG4gIDE3OiBmdW5jdGlvbiBfKG4pIHtcbiAgICByZXR1cm4gTnVtYmVyKG4gPT0gMSB8fCBuICUgMTAgPT0gMSA/IDAgOiAxKTtcbiAgfSxcbiAgMTg6IGZ1bmN0aW9uIF8obikge1xuICAgIHJldHVybiBOdW1iZXIobiA9PSAwID8gMCA6IG4gPT0gMSA/IDEgOiAyKTtcbiAgfSxcbiAgMTk6IGZ1bmN0aW9uIF8obikge1xuICAgIHJldHVybiBOdW1iZXIobiA9PSAxID8gMCA6IG4gPT09IDAgfHwgbiAlIDEwMCA+IDEgJiYgbiAlIDEwMCA8IDExID8gMSA6IG4gJSAxMDAgPiAxMCAmJiBuICUgMTAwIDwgMjAgPyAyIDogMyk7XG4gIH0sXG4gIDIwOiBmdW5jdGlvbiBfKG4pIHtcbiAgICByZXR1cm4gTnVtYmVyKG4gPT0gMSA/IDAgOiBuID09PSAwIHx8IG4gJSAxMDAgPiAwICYmIG4gJSAxMDAgPCAyMCA/IDEgOiAyKTtcbiAgfSxcbiAgMjE6IGZ1bmN0aW9uIF8obikge1xuICAgIHJldHVybiBOdW1iZXIobiAlIDEwMCA9PSAxID8gMSA6IG4gJSAxMDAgPT0gMiA/IDIgOiBuICUgMTAwID09IDMgfHwgbiAlIDEwMCA9PSA0ID8gMyA6IDApO1xuICB9XG59O1xuLyogZXNsaW50LWVuYWJsZSAqL1xuXG5mdW5jdGlvbiBjcmVhdGVSdWxlcygpIHtcbiAgdmFyIGwsXG4gICAgICBydWxlcyA9IHt9O1xuICBzZXRzLmZvckVhY2goZnVuY3Rpb24gKHNldCQkMSkge1xuICAgIHNldCQkMS5sbmdzLmZvckVhY2goZnVuY3Rpb24gKGwpIHtcbiAgICAgIHJldHVybiBydWxlc1tsXSA9IHtcbiAgICAgICAgbnVtYmVyczogc2V0JCQxLm5yLFxuICAgICAgICBwbHVyYWxzOiBfcnVsZXNQbHVyYWxzVHlwZXNbc2V0JCQxLmZjXVxuICAgICAgfTtcbiAgICB9KTtcbiAgfSk7XG4gIHJldHVybiBydWxlcztcbn1cblxudmFyIFBsdXJhbFJlc29sdmVyID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBQbHVyYWxSZXNvbHZlcihsYW5ndWFnZVV0aWxzKSB7XG4gICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9O1xuICAgIGNsYXNzQ2FsbENoZWNrKHRoaXMsIFBsdXJhbFJlc29sdmVyKTtcblxuICAgIHRoaXMubGFuZ3VhZ2VVdGlscyA9IGxhbmd1YWdlVXRpbHM7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcblxuICAgIHRoaXMubG9nZ2VyID0gYmFzZUxvZ2dlci5jcmVhdGUoJ3BsdXJhbFJlc29sdmVyJyk7XG5cbiAgICB0aGlzLnJ1bGVzID0gY3JlYXRlUnVsZXMoKTtcbiAgfVxuXG4gIFBsdXJhbFJlc29sdmVyLnByb3RvdHlwZS5hZGRSdWxlID0gZnVuY3Rpb24gYWRkUnVsZShsbmcsIG9iaikge1xuICAgIHRoaXMucnVsZXNbbG5nXSA9IG9iajtcbiAgfTtcblxuICBQbHVyYWxSZXNvbHZlci5wcm90b3R5cGUuZ2V0UnVsZSA9IGZ1bmN0aW9uIGdldFJ1bGUoY29kZSkge1xuICAgIHJldHVybiB0aGlzLnJ1bGVzW3RoaXMubGFuZ3VhZ2VVdGlscy5nZXRMYW5ndWFnZVBhcnRGcm9tQ29kZShjb2RlKV07XG4gIH07XG5cbiAgUGx1cmFsUmVzb2x2ZXIucHJvdG90eXBlLm5lZWRzUGx1cmFsID0gZnVuY3Rpb24gbmVlZHNQbHVyYWwoY29kZSkge1xuICAgIHZhciBydWxlID0gdGhpcy5nZXRSdWxlKGNvZGUpO1xuXG4gICAgcmV0dXJuIHJ1bGUgJiYgcnVsZS5udW1iZXJzLmxlbmd0aCA8PSAxID8gZmFsc2UgOiB0cnVlO1xuICB9O1xuXG4gIFBsdXJhbFJlc29sdmVyLnByb3RvdHlwZS5nZXRTdWZmaXggPSBmdW5jdGlvbiBnZXRTdWZmaXgoY29kZSwgY291bnQpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgdmFyIHJ1bGUgPSB0aGlzLmdldFJ1bGUoY29kZSk7XG5cbiAgICBpZiAocnVsZSkge1xuICAgICAgdmFyIF9yZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChydWxlLm51bWJlcnMubGVuZ3RoID09PSAxKSByZXR1cm4ge1xuICAgICAgICAgICAgdjogJydcbiAgICAgICAgICB9OyAvLyBvbmx5IHNpbmd1bGFyXG5cbiAgICAgICAgdmFyIGlkeCA9IHJ1bGUubm9BYnMgPyBydWxlLnBsdXJhbHMoY291bnQpIDogcnVsZS5wbHVyYWxzKE1hdGguYWJzKGNvdW50KSk7XG4gICAgICAgIHZhciBzdWZmaXggPSBydWxlLm51bWJlcnNbaWR4XTtcblxuICAgICAgICAvLyBzcGVjaWFsIHRyZWF0bWVudCBmb3IgbG5ncyBvbmx5IGhhdmluZyBzaW5ndWxhciBhbmQgcGx1cmFsXG4gICAgICAgIGlmIChfdGhpcy5vcHRpb25zLnNpbXBsaWZ5UGx1cmFsU3VmZml4ICYmIHJ1bGUubnVtYmVycy5sZW5ndGggPT09IDIgJiYgcnVsZS5udW1iZXJzWzBdID09PSAxKSB7XG4gICAgICAgICAgaWYgKHN1ZmZpeCA9PT0gMikge1xuICAgICAgICAgICAgc3VmZml4ID0gJ3BsdXJhbCc7XG4gICAgICAgICAgfSBlbHNlIGlmIChzdWZmaXggPT09IDEpIHtcbiAgICAgICAgICAgIHN1ZmZpeCA9ICcnO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHZhciByZXR1cm5TdWZmaXggPSBmdW5jdGlvbiByZXR1cm5TdWZmaXgoKSB7XG4gICAgICAgICAgcmV0dXJuIF90aGlzLm9wdGlvbnMucHJlcGVuZCAmJiBzdWZmaXgudG9TdHJpbmcoKSA/IF90aGlzLm9wdGlvbnMucHJlcGVuZCArIHN1ZmZpeC50b1N0cmluZygpIDogc3VmZml4LnRvU3RyaW5nKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gQ09NUEFUSUJJTElUWSBKU09OXG4gICAgICAgIC8vIHYxXG4gICAgICAgIGlmIChfdGhpcy5vcHRpb25zLmNvbXBhdGliaWxpdHlKU09OID09PSAndjEnKSB7XG4gICAgICAgICAgaWYgKHN1ZmZpeCA9PT0gMSkgcmV0dXJuIHtcbiAgICAgICAgICAgICAgdjogJydcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgaWYgKHR5cGVvZiBzdWZmaXggPT09ICdudW1iZXInKSByZXR1cm4ge1xuICAgICAgICAgICAgICB2OiAnX3BsdXJhbF8nICsgc3VmZml4LnRvU3RyaW5nKClcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHY6IHJldHVyblN1ZmZpeCgpXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICAvLyB2MlxuICAgICAgICBlbHNlIGlmIChfdGhpcy5vcHRpb25zLmNvbXBhdGliaWxpdHlKU09OID09PSAndjInIHx8IHJ1bGUubnVtYmVycy5sZW5ndGggPT09IDIgJiYgcnVsZS5udW1iZXJzWzBdID09PSAxKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICB2OiByZXR1cm5TdWZmaXgoKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gdjMgLSBnZXR0ZXh0IGluZGV4XG4gICAgICAgICAgZWxzZSBpZiAocnVsZS5udW1iZXJzLmxlbmd0aCA9PT0gMiAmJiBydWxlLm51bWJlcnNbMF0gPT09IDEpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB2OiByZXR1cm5TdWZmaXgoKVxuICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHY6IF90aGlzLm9wdGlvbnMucHJlcGVuZCAmJiBpZHgudG9TdHJpbmcoKSA/IF90aGlzLm9wdGlvbnMucHJlcGVuZCArIGlkeC50b1N0cmluZygpIDogaWR4LnRvU3RyaW5nKClcbiAgICAgICAgfTtcbiAgICAgIH0oKTtcblxuICAgICAgaWYgKCh0eXBlb2YgX3JldCA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2YoX3JldCkpID09PSBcIm9iamVjdFwiKSByZXR1cm4gX3JldC52O1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmxvZ2dlci53YXJuKCdubyBwbHVyYWwgcnVsZSBmb3VuZCBmb3I6ICcgKyBjb2RlKTtcbiAgICAgIHJldHVybiAnJztcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIFBsdXJhbFJlc29sdmVyO1xufSgpO1xuXG52YXIgSW50ZXJwb2xhdG9yID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBJbnRlcnBvbGF0b3IoKSB7XG4gICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9O1xuICAgIGNsYXNzQ2FsbENoZWNrKHRoaXMsIEludGVycG9sYXRvcik7XG5cbiAgICB0aGlzLmxvZ2dlciA9IGJhc2VMb2dnZXIuY3JlYXRlKCdpbnRlcnBvbGF0b3InKTtcblxuICAgIHRoaXMuaW5pdChvcHRpb25zLCB0cnVlKTtcbiAgfVxuXG4gIEludGVycG9sYXRvci5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9O1xuICAgIHZhciByZXNldCA9IGFyZ3VtZW50c1sxXTtcblxuICAgIGlmIChyZXNldCkge1xuICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAgIHRoaXMuZm9ybWF0ID0gb3B0aW9ucy5pbnRlcnBvbGF0aW9uICYmIG9wdGlvbnMuaW50ZXJwb2xhdGlvbi5mb3JtYXQgfHwgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgIH07XG4gICAgICB0aGlzLmVzY2FwZSA9IG9wdGlvbnMuaW50ZXJwb2xhdGlvbiAmJiBvcHRpb25zLmludGVycG9sYXRpb24uZXNjYXBlIHx8IGVzY2FwZTtcbiAgICB9XG4gICAgaWYgKCFvcHRpb25zLmludGVycG9sYXRpb24pIG9wdGlvbnMuaW50ZXJwb2xhdGlvbiA9IHsgZXNjYXBlVmFsdWU6IHRydWUgfTtcblxuICAgIHZhciBpT3B0cyA9IG9wdGlvbnMuaW50ZXJwb2xhdGlvbjtcblxuICAgIHRoaXMuZXNjYXBlVmFsdWUgPSBpT3B0cy5lc2NhcGVWYWx1ZSAhPT0gdW5kZWZpbmVkID8gaU9wdHMuZXNjYXBlVmFsdWUgOiB0cnVlO1xuXG4gICAgdGhpcy5wcmVmaXggPSBpT3B0cy5wcmVmaXggPyByZWdleEVzY2FwZShpT3B0cy5wcmVmaXgpIDogaU9wdHMucHJlZml4RXNjYXBlZCB8fCAne3snO1xuICAgIHRoaXMuc3VmZml4ID0gaU9wdHMuc3VmZml4ID8gcmVnZXhFc2NhcGUoaU9wdHMuc3VmZml4KSA6IGlPcHRzLnN1ZmZpeEVzY2FwZWQgfHwgJ319JztcblxuICAgIHRoaXMuZm9ybWF0U2VwYXJhdG9yID0gaU9wdHMuZm9ybWF0U2VwYXJhdG9yID8gaU9wdHMuZm9ybWF0U2VwYXJhdG9yIDogaU9wdHMuZm9ybWF0U2VwYXJhdG9yIHx8ICcsJztcblxuICAgIHRoaXMudW5lc2NhcGVQcmVmaXggPSBpT3B0cy51bmVzY2FwZVN1ZmZpeCA/ICcnIDogaU9wdHMudW5lc2NhcGVQcmVmaXggfHwgJy0nO1xuICAgIHRoaXMudW5lc2NhcGVTdWZmaXggPSB0aGlzLnVuZXNjYXBlUHJlZml4ID8gJycgOiBpT3B0cy51bmVzY2FwZVN1ZmZpeCB8fCAnJztcblxuICAgIHRoaXMubmVzdGluZ1ByZWZpeCA9IGlPcHRzLm5lc3RpbmdQcmVmaXggPyByZWdleEVzY2FwZShpT3B0cy5uZXN0aW5nUHJlZml4KSA6IGlPcHRzLm5lc3RpbmdQcmVmaXhFc2NhcGVkIHx8IHJlZ2V4RXNjYXBlKCckdCgnKTtcbiAgICB0aGlzLm5lc3RpbmdTdWZmaXggPSBpT3B0cy5uZXN0aW5nU3VmZml4ID8gcmVnZXhFc2NhcGUoaU9wdHMubmVzdGluZ1N1ZmZpeCkgOiBpT3B0cy5uZXN0aW5nU3VmZml4RXNjYXBlZCB8fCByZWdleEVzY2FwZSgnKScpO1xuXG4gICAgLy8gdGhlIHJlZ2V4cFxuICAgIHRoaXMucmVzZXRSZWdFeHAoKTtcbiAgfTtcblxuICBJbnRlcnBvbGF0b3IucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gcmVzZXQoKSB7XG4gICAgaWYgKHRoaXMub3B0aW9ucykgdGhpcy5pbml0KHRoaXMub3B0aW9ucyk7XG4gIH07XG5cbiAgSW50ZXJwb2xhdG9yLnByb3RvdHlwZS5yZXNldFJlZ0V4cCA9IGZ1bmN0aW9uIHJlc2V0UmVnRXhwKCkge1xuICAgIC8vIHRoZSByZWdleHBcbiAgICB2YXIgcmVnZXhwU3RyID0gdGhpcy5wcmVmaXggKyAnKC4rPyknICsgdGhpcy5zdWZmaXg7XG4gICAgdGhpcy5yZWdleHAgPSBuZXcgUmVnRXhwKHJlZ2V4cFN0ciwgJ2cnKTtcblxuICAgIHZhciByZWdleHBVbmVzY2FwZVN0ciA9IHRoaXMucHJlZml4ICsgdGhpcy51bmVzY2FwZVByZWZpeCArICcoLis/KScgKyB0aGlzLnVuZXNjYXBlU3VmZml4ICsgdGhpcy5zdWZmaXg7XG4gICAgdGhpcy5yZWdleHBVbmVzY2FwZSA9IG5ldyBSZWdFeHAocmVnZXhwVW5lc2NhcGVTdHIsICdnJyk7XG5cbiAgICB2YXIgbmVzdGluZ1JlZ2V4cFN0ciA9IHRoaXMubmVzdGluZ1ByZWZpeCArICcoLis/KScgKyB0aGlzLm5lc3RpbmdTdWZmaXg7XG4gICAgdGhpcy5uZXN0aW5nUmVnZXhwID0gbmV3IFJlZ0V4cChuZXN0aW5nUmVnZXhwU3RyLCAnZycpO1xuICB9O1xuXG4gIEludGVycG9sYXRvci5wcm90b3R5cGUuaW50ZXJwb2xhdGUgPSBmdW5jdGlvbiBpbnRlcnBvbGF0ZShzdHIsIGRhdGEsIGxuZykge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICB2YXIgbWF0Y2ggPSB2b2lkIDAsXG4gICAgICAgIHZhbHVlID0gdm9pZCAwO1xuXG4gICAgZnVuY3Rpb24gcmVnZXhTYWZlKHZhbCkge1xuICAgICAgcmV0dXJuIHZhbC5yZXBsYWNlKC9cXCQvZywgJyQkJCQnKTtcbiAgICB9XG5cbiAgICB2YXIgaGFuZGxlRm9ybWF0ID0gZnVuY3Rpb24gaGFuZGxlRm9ybWF0KGtleSkge1xuICAgICAgaWYgKGtleS5pbmRleE9mKF90aGlzLmZvcm1hdFNlcGFyYXRvcikgPCAwKSByZXR1cm4gZ2V0UGF0aChkYXRhLCBrZXkpO1xuXG4gICAgICB2YXIgcCA9IGtleS5zcGxpdChfdGhpcy5mb3JtYXRTZXBhcmF0b3IpO1xuICAgICAgdmFyIGsgPSBwLnNoaWZ0KCkudHJpbSgpO1xuICAgICAgdmFyIGYgPSBwLmpvaW4oX3RoaXMuZm9ybWF0U2VwYXJhdG9yKS50cmltKCk7XG5cbiAgICAgIHJldHVybiBfdGhpcy5mb3JtYXQoZ2V0UGF0aChkYXRhLCBrKSwgZiwgbG5nKTtcbiAgICB9O1xuXG4gICAgdGhpcy5yZXNldFJlZ0V4cCgpO1xuXG4gICAgLy8gdW5lc2NhcGUgaWYgaGFzIHVuZXNjYXBlUHJlZml4L1N1ZmZpeFxuICAgIHdoaWxlIChtYXRjaCA9IHRoaXMucmVnZXhwVW5lc2NhcGUuZXhlYyhzdHIpKSB7XG4gICAgICB2YXIgX3ZhbHVlID0gaGFuZGxlRm9ybWF0KG1hdGNoWzFdLnRyaW0oKSk7XG4gICAgICBzdHIgPSBzdHIucmVwbGFjZShtYXRjaFswXSwgX3ZhbHVlKTtcbiAgICAgIHRoaXMucmVnZXhwVW5lc2NhcGUubGFzdEluZGV4ID0gMDtcbiAgICB9XG5cbiAgICAvLyByZWd1bGFyIGVzY2FwZSBvbiBkZW1hbmRcbiAgICB3aGlsZSAobWF0Y2ggPSB0aGlzLnJlZ2V4cC5leGVjKHN0cikpIHtcbiAgICAgIHZhbHVlID0gaGFuZGxlRm9ybWF0KG1hdGNoWzFdLnRyaW0oKSk7XG4gICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJykgdmFsdWUgPSBtYWtlU3RyaW5nKHZhbHVlKTtcbiAgICAgIGlmICghdmFsdWUpIHtcbiAgICAgICAgdGhpcy5sb2dnZXIud2FybignbWlzc2VkIHRvIHBhc3MgaW4gdmFyaWFibGUgJyArIG1hdGNoWzFdICsgJyBmb3IgaW50ZXJwb2xhdGluZyAnICsgc3RyKTtcbiAgICAgICAgdmFsdWUgPSAnJztcbiAgICAgIH1cbiAgICAgIHZhbHVlID0gdGhpcy5lc2NhcGVWYWx1ZSA/IHJlZ2V4U2FmZSh0aGlzLmVzY2FwZSh2YWx1ZSkpIDogcmVnZXhTYWZlKHZhbHVlKTtcbiAgICAgIHN0ciA9IHN0ci5yZXBsYWNlKG1hdGNoWzBdLCB2YWx1ZSk7XG4gICAgICB0aGlzLnJlZ2V4cC5sYXN0SW5kZXggPSAwO1xuICAgIH1cbiAgICByZXR1cm4gc3RyO1xuICB9O1xuXG4gIEludGVycG9sYXRvci5wcm90b3R5cGUubmVzdCA9IGZ1bmN0aW9uIG5lc3Qoc3RyLCBmYykge1xuICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiB7fTtcblxuICAgIHZhciBtYXRjaCA9IHZvaWQgMCxcbiAgICAgICAgdmFsdWUgPSB2b2lkIDA7XG5cbiAgICB2YXIgY2xvbmVkT3B0aW9ucyA9IF9leHRlbmRzKHt9LCBvcHRpb25zKTtcbiAgICBjbG9uZWRPcHRpb25zLmFwcGx5UG9zdFByb2Nlc3NvciA9IGZhbHNlOyAvLyBhdm9pZCBwb3N0IHByb2Nlc3Npbmcgb24gbmVzdGVkIGxvb2t1cFxuXG4gICAgZnVuY3Rpb24gaGFuZGxlSGFzT3B0aW9ucyhrZXkpIHtcbiAgICAgIGlmIChrZXkuaW5kZXhPZignLCcpIDwgMCkgcmV0dXJuIGtleTtcblxuICAgICAgdmFyIHAgPSBrZXkuc3BsaXQoJywnKTtcbiAgICAgIGtleSA9IHAuc2hpZnQoKTtcbiAgICAgIHZhciBvcHRpb25zU3RyaW5nID0gcC5qb2luKCcsJyk7XG4gICAgICBvcHRpb25zU3RyaW5nID0gdGhpcy5pbnRlcnBvbGF0ZShvcHRpb25zU3RyaW5nLCBjbG9uZWRPcHRpb25zKTtcbiAgICAgIG9wdGlvbnNTdHJpbmcgPSBvcHRpb25zU3RyaW5nLnJlcGxhY2UoLycvZywgJ1wiJyk7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIGNsb25lZE9wdGlvbnMgPSBKU09OLnBhcnNlKG9wdGlvbnNTdHJpbmcpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICB0aGlzLmxvZ2dlci5lcnJvcignZmFpbGVkIHBhcnNpbmcgb3B0aW9ucyBzdHJpbmcgaW4gbmVzdGluZyBmb3Iga2V5ICcgKyBrZXksIGUpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4ga2V5O1xuICAgIH1cblxuICAgIC8vIHJlZ3VsYXIgZXNjYXBlIG9uIGRlbWFuZFxuICAgIHdoaWxlIChtYXRjaCA9IHRoaXMubmVzdGluZ1JlZ2V4cC5leGVjKHN0cikpIHtcbiAgICAgIHZhbHVlID0gZmMoaGFuZGxlSGFzT3B0aW9ucy5jYWxsKHRoaXMsIG1hdGNoWzFdLnRyaW0oKSksIGNsb25lZE9wdGlvbnMpO1xuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycpIHZhbHVlID0gbWFrZVN0cmluZyh2YWx1ZSk7XG4gICAgICBpZiAoIXZhbHVlKSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLndhcm4oJ21pc3NlZCB0byBwYXNzIGluIHZhcmlhYmxlICcgKyBtYXRjaFsxXSArICcgZm9yIGludGVycG9sYXRpbmcgJyArIHN0cik7XG4gICAgICAgIHZhbHVlID0gJyc7XG4gICAgICB9XG4gICAgICAvLyBOZXN0ZWQga2V5cyBzaG91bGQgbm90IGJlIGVzY2FwZWQgYnkgZGVmYXVsdCAjODU0XG4gICAgICAvLyB2YWx1ZSA9IHRoaXMuZXNjYXBlVmFsdWUgPyByZWdleFNhZmUodXRpbHMuZXNjYXBlKHZhbHVlKSkgOiByZWdleFNhZmUodmFsdWUpO1xuICAgICAgc3RyID0gc3RyLnJlcGxhY2UobWF0Y2hbMF0sIHZhbHVlKTtcbiAgICAgIHRoaXMucmVnZXhwLmxhc3RJbmRleCA9IDA7XG4gICAgfVxuICAgIHJldHVybiBzdHI7XG4gIH07XG5cbiAgcmV0dXJuIEludGVycG9sYXRvcjtcbn0oKTtcblxuZnVuY3Rpb24gcmVtb3ZlKGFyciwgd2hhdCkge1xuICB2YXIgZm91bmQgPSBhcnIuaW5kZXhPZih3aGF0KTtcblxuICB3aGlsZSAoZm91bmQgIT09IC0xKSB7XG4gICAgYXJyLnNwbGljZShmb3VuZCwgMSk7XG4gICAgZm91bmQgPSBhcnIuaW5kZXhPZih3aGF0KTtcbiAgfVxufVxuXG52YXIgQ29ubmVjdG9yID0gZnVuY3Rpb24gKF9FdmVudEVtaXR0ZXIpIHtcbiAgaW5oZXJpdHMoQ29ubmVjdG9yLCBfRXZlbnRFbWl0dGVyKTtcblxuICBmdW5jdGlvbiBDb25uZWN0b3IoYmFja2VuZCwgc3RvcmUsIHNlcnZpY2VzKSB7XG4gICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IHt9O1xuICAgIGNsYXNzQ2FsbENoZWNrKHRoaXMsIENvbm5lY3Rvcik7XG5cbiAgICB2YXIgX3RoaXMgPSBwb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIF9FdmVudEVtaXR0ZXIuY2FsbCh0aGlzKSk7XG5cbiAgICBfdGhpcy5iYWNrZW5kID0gYmFja2VuZDtcbiAgICBfdGhpcy5zdG9yZSA9IHN0b3JlO1xuICAgIF90aGlzLnNlcnZpY2VzID0gc2VydmljZXM7XG4gICAgX3RoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgX3RoaXMubG9nZ2VyID0gYmFzZUxvZ2dlci5jcmVhdGUoJ2JhY2tlbmRDb25uZWN0b3InKTtcblxuICAgIF90aGlzLnN0YXRlID0ge307XG4gICAgX3RoaXMucXVldWUgPSBbXTtcblxuICAgIF90aGlzLmJhY2tlbmQgJiYgX3RoaXMuYmFja2VuZC5pbml0ICYmIF90aGlzLmJhY2tlbmQuaW5pdChzZXJ2aWNlcywgb3B0aW9ucy5iYWNrZW5kLCBvcHRpb25zKTtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICBDb25uZWN0b3IucHJvdG90eXBlLnF1ZXVlTG9hZCA9IGZ1bmN0aW9uIHF1ZXVlTG9hZChsYW5ndWFnZXMsIG5hbWVzcGFjZXMsIGNhbGxiYWNrKSB7XG4gICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAvLyBmaW5kIHdoYXQgbmVlZHMgdG8gYmUgbG9hZGVkXG4gICAgdmFyIHRvTG9hZCA9IFtdLFxuICAgICAgICBwZW5kaW5nID0gW10sXG4gICAgICAgIHRvTG9hZExhbmd1YWdlcyA9IFtdLFxuICAgICAgICB0b0xvYWROYW1lc3BhY2VzID0gW107XG5cbiAgICBsYW5ndWFnZXMuZm9yRWFjaChmdW5jdGlvbiAobG5nKSB7XG4gICAgICB2YXIgaGFzQWxsTmFtZXNwYWNlcyA9IHRydWU7XG5cbiAgICAgIG5hbWVzcGFjZXMuZm9yRWFjaChmdW5jdGlvbiAobnMpIHtcbiAgICAgICAgdmFyIG5hbWUgPSBsbmcgKyAnfCcgKyBucztcblxuICAgICAgICBpZiAoX3RoaXMyLnN0b3JlLmhhc1Jlc291cmNlQnVuZGxlKGxuZywgbnMpKSB7XG4gICAgICAgICAgX3RoaXMyLnN0YXRlW25hbWVdID0gMjsgLy8gbG9hZGVkXG4gICAgICAgIH0gZWxzZSBpZiAoX3RoaXMyLnN0YXRlW25hbWVdIDwgMCkge1xuICAgICAgICAgIC8vIG5vdGhpbmcgdG8gZG8gZm9yIGVyclxuICAgICAgICB9IGVsc2UgaWYgKF90aGlzMi5zdGF0ZVtuYW1lXSA9PT0gMSkge1xuICAgICAgICAgIGlmIChwZW5kaW5nLmluZGV4T2YobmFtZSkgPCAwKSBwZW5kaW5nLnB1c2gobmFtZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgX3RoaXMyLnN0YXRlW25hbWVdID0gMTsgLy8gcGVuZGluZ1xuXG4gICAgICAgICAgaGFzQWxsTmFtZXNwYWNlcyA9IGZhbHNlO1xuXG4gICAgICAgICAgaWYgKHBlbmRpbmcuaW5kZXhPZihuYW1lKSA8IDApIHBlbmRpbmcucHVzaChuYW1lKTtcbiAgICAgICAgICBpZiAodG9Mb2FkLmluZGV4T2YobmFtZSkgPCAwKSB0b0xvYWQucHVzaChuYW1lKTtcbiAgICAgICAgICBpZiAodG9Mb2FkTmFtZXNwYWNlcy5pbmRleE9mKG5zKSA8IDApIHRvTG9hZE5hbWVzcGFjZXMucHVzaChucyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIWhhc0FsbE5hbWVzcGFjZXMpIHRvTG9hZExhbmd1YWdlcy5wdXNoKGxuZyk7XG4gICAgfSk7XG5cbiAgICBpZiAodG9Mb2FkLmxlbmd0aCB8fCBwZW5kaW5nLmxlbmd0aCkge1xuICAgICAgdGhpcy5xdWV1ZS5wdXNoKHtcbiAgICAgICAgcGVuZGluZzogcGVuZGluZyxcbiAgICAgICAgbG9hZGVkOiB7fSxcbiAgICAgICAgZXJyb3JzOiBbXSxcbiAgICAgICAgY2FsbGJhY2s6IGNhbGxiYWNrXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgdG9Mb2FkOiB0b0xvYWQsXG4gICAgICBwZW5kaW5nOiBwZW5kaW5nLFxuICAgICAgdG9Mb2FkTGFuZ3VhZ2VzOiB0b0xvYWRMYW5ndWFnZXMsXG4gICAgICB0b0xvYWROYW1lc3BhY2VzOiB0b0xvYWROYW1lc3BhY2VzXG4gICAgfTtcbiAgfTtcblxuICBDb25uZWN0b3IucHJvdG90eXBlLmxvYWRlZCA9IGZ1bmN0aW9uIGxvYWRlZChuYW1lLCBlcnIsIGRhdGEpIHtcbiAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgIHZhciBfbmFtZSRzcGxpdCA9IG5hbWUuc3BsaXQoJ3wnKSxcbiAgICAgICAgX25hbWUkc3BsaXQyID0gc2xpY2VkVG9BcnJheShfbmFtZSRzcGxpdCwgMiksXG4gICAgICAgIGxuZyA9IF9uYW1lJHNwbGl0MlswXSxcbiAgICAgICAgbnMgPSBfbmFtZSRzcGxpdDJbMV07XG5cbiAgICBpZiAoZXJyKSB0aGlzLmVtaXQoJ2ZhaWxlZExvYWRpbmcnLCBsbmcsIG5zLCBlcnIpO1xuXG4gICAgaWYgKGRhdGEpIHtcbiAgICAgIHRoaXMuc3RvcmUuYWRkUmVzb3VyY2VCdW5kbGUobG5nLCBucywgZGF0YSk7XG4gICAgfVxuXG4gICAgLy8gc2V0IGxvYWRlZFxuICAgIHRoaXMuc3RhdGVbbmFtZV0gPSBlcnIgPyAtMSA6IDI7XG4gICAgLy8gY2FsbGJhY2sgaWYgcmVhZHlcbiAgICB0aGlzLnF1ZXVlLmZvckVhY2goZnVuY3Rpb24gKHEpIHtcbiAgICAgIHB1c2hQYXRoKHEubG9hZGVkLCBbbG5nXSwgbnMpO1xuICAgICAgcmVtb3ZlKHEucGVuZGluZywgbmFtZSk7XG5cbiAgICAgIGlmIChlcnIpIHEuZXJyb3JzLnB1c2goZXJyKTtcblxuICAgICAgaWYgKHEucGVuZGluZy5sZW5ndGggPT09IDAgJiYgIXEuZG9uZSkge1xuICAgICAgICBfdGhpczMuZW1pdCgnbG9hZGVkJywgcS5sb2FkZWQpO1xuICAgICAgICBxLmVycm9ycy5sZW5ndGggPyBxLmNhbGxiYWNrKHEuZXJyb3JzKSA6IHEuY2FsbGJhY2soKTtcbiAgICAgICAgcS5kb25lID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIHJlbW92ZSBkb25lIGxvYWQgcmVxdWVzdHNcbiAgICB0aGlzLnF1ZXVlID0gdGhpcy5xdWV1ZS5maWx0ZXIoZnVuY3Rpb24gKHEpIHtcbiAgICAgIHJldHVybiAhcS5kb25lO1xuICAgIH0pO1xuICB9O1xuXG4gIENvbm5lY3Rvci5wcm90b3R5cGUucmVhZCA9IGZ1bmN0aW9uIHJlYWQobG5nLCBucywgZmNOYW1lLCB0cmllZCwgd2FpdCwgY2FsbGJhY2spIHtcbiAgICB2YXIgX3RoaXM0ID0gdGhpcztcblxuICAgIGlmICghdHJpZWQpIHRyaWVkID0gMDtcbiAgICBpZiAoIXdhaXQpIHdhaXQgPSAyNTA7XG5cbiAgICBpZiAoIWxuZy5sZW5ndGgpIHJldHVybiBjYWxsYmFjayhudWxsLCB7fSk7IC8vIG5vdGluZyB0byBsb2FkXG5cbiAgICB0aGlzLmJhY2tlbmRbZmNOYW1lXShsbmcsIG5zLCBmdW5jdGlvbiAoZXJyLCBkYXRhKSB7XG4gICAgICBpZiAoZXJyICYmIGRhdGEgLyogPSByZXRyeUZsYWcgKi8gJiYgdHJpZWQgPCA1KSB7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIF90aGlzNC5yZWFkLmNhbGwoX3RoaXM0LCBsbmcsIG5zLCBmY05hbWUsICsrdHJpZWQsIHdhaXQgKiAyLCBjYWxsYmFjayk7XG4gICAgICAgIH0sIHdhaXQpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjYWxsYmFjayhlcnIsIGRhdGEpO1xuICAgIH0pO1xuICB9O1xuXG4gIENvbm5lY3Rvci5wcm90b3R5cGUubG9hZCA9IGZ1bmN0aW9uIGxvYWQobGFuZ3VhZ2VzLCBuYW1lc3BhY2VzLCBjYWxsYmFjaykge1xuICAgIHZhciBfdGhpczUgPSB0aGlzO1xuXG4gICAgaWYgKCF0aGlzLmJhY2tlbmQpIHtcbiAgICAgIHRoaXMubG9nZ2VyLndhcm4oJ05vIGJhY2tlbmQgd2FzIGFkZGVkIHZpYSBpMThuZXh0LnVzZS4gV2lsbCBub3QgbG9hZCByZXNvdXJjZXMuJyk7XG4gICAgICByZXR1cm4gY2FsbGJhY2sgJiYgY2FsbGJhY2soKTtcbiAgICB9XG4gICAgdmFyIG9wdGlvbnMgPSBfZXh0ZW5kcyh7fSwgdGhpcy5iYWNrZW5kLm9wdGlvbnMsIHRoaXMub3B0aW9ucy5iYWNrZW5kKTtcblxuICAgIGlmICh0eXBlb2YgbGFuZ3VhZ2VzID09PSAnc3RyaW5nJykgbGFuZ3VhZ2VzID0gdGhpcy5zZXJ2aWNlcy5sYW5ndWFnZVV0aWxzLnRvUmVzb2x2ZUhpZXJhcmNoeShsYW5ndWFnZXMpO1xuICAgIGlmICh0eXBlb2YgbmFtZXNwYWNlcyA9PT0gJ3N0cmluZycpIG5hbWVzcGFjZXMgPSBbbmFtZXNwYWNlc107XG5cbiAgICB2YXIgdG9Mb2FkID0gdGhpcy5xdWV1ZUxvYWQobGFuZ3VhZ2VzLCBuYW1lc3BhY2VzLCBjYWxsYmFjayk7XG4gICAgaWYgKCF0b0xvYWQudG9Mb2FkLmxlbmd0aCkge1xuICAgICAgaWYgKCF0b0xvYWQucGVuZGluZy5sZW5ndGgpIGNhbGxiYWNrKCk7IC8vIG5vdGhpbmcgdG8gbG9hZCBhbmQgbm8gcGVuZGluZ3MuLi5jYWxsYmFjayBub3dcbiAgICAgIHJldHVybjsgLy8gcGVuZGluZ3Mgd2lsbCB0cmlnZ2VyIGNhbGxiYWNrXG4gICAgfVxuXG4gICAgLy8gbG9hZCB3aXRoIG11bHRpLWxvYWRcbiAgICBpZiAob3B0aW9ucy5hbGxvd011bHRpTG9hZGluZyAmJiB0aGlzLmJhY2tlbmQucmVhZE11bHRpKSB7XG4gICAgICB0aGlzLnJlYWQodG9Mb2FkLnRvTG9hZExhbmd1YWdlcywgdG9Mb2FkLnRvTG9hZE5hbWVzcGFjZXMsICdyZWFkTXVsdGknLCBudWxsLCBudWxsLCBmdW5jdGlvbiAoZXJyLCBkYXRhKSB7XG4gICAgICAgIGlmIChlcnIpIF90aGlzNS5sb2dnZXIud2FybignbG9hZGluZyBuYW1lc3BhY2VzICcgKyB0b0xvYWQudG9Mb2FkTmFtZXNwYWNlcy5qb2luKCcsICcpICsgJyBmb3IgbGFuZ3VhZ2VzICcgKyB0b0xvYWQudG9Mb2FkTGFuZ3VhZ2VzLmpvaW4oJywgJykgKyAnIHZpYSBtdWx0aWxvYWRpbmcgZmFpbGVkJywgZXJyKTtcbiAgICAgICAgaWYgKCFlcnIgJiYgZGF0YSkgX3RoaXM1LmxvZ2dlci5sb2coJ2xvYWRlZCBuYW1lc3BhY2VzICcgKyB0b0xvYWQudG9Mb2FkTmFtZXNwYWNlcy5qb2luKCcsICcpICsgJyBmb3IgbGFuZ3VhZ2VzICcgKyB0b0xvYWQudG9Mb2FkTGFuZ3VhZ2VzLmpvaW4oJywgJykgKyAnIHZpYSBtdWx0aWxvYWRpbmcnLCBkYXRhKTtcblxuICAgICAgICB0b0xvYWQudG9Mb2FkLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgICB2YXIgX25hbWUkc3BsaXQzID0gbmFtZS5zcGxpdCgnfCcpLFxuICAgICAgICAgICAgICBfbmFtZSRzcGxpdDQgPSBzbGljZWRUb0FycmF5KF9uYW1lJHNwbGl0MywgMiksXG4gICAgICAgICAgICAgIGwgPSBfbmFtZSRzcGxpdDRbMF0sXG4gICAgICAgICAgICAgIG4gPSBfbmFtZSRzcGxpdDRbMV07XG5cbiAgICAgICAgICB2YXIgYnVuZGxlID0gZ2V0UGF0aChkYXRhLCBbbCwgbl0pO1xuICAgICAgICAgIGlmIChidW5kbGUpIHtcbiAgICAgICAgICAgIF90aGlzNS5sb2FkZWQobmFtZSwgZXJyLCBidW5kbGUpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgX2VyciA9ICdsb2FkaW5nIG5hbWVzcGFjZSAnICsgbiArICcgZm9yIGxhbmd1YWdlICcgKyBsICsgJyB2aWEgbXVsdGlsb2FkaW5nIGZhaWxlZCc7XG4gICAgICAgICAgICBfdGhpczUubG9hZGVkKG5hbWUsIF9lcnIpO1xuICAgICAgICAgICAgX3RoaXM1LmxvZ2dlci5lcnJvcihfZXJyKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gbG9hZCBvbmUgYnkgb25lXG4gICAgZWxzZSB7XG4gICAgICAgIChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdmFyIHJlYWRPbmUgPSBmdW5jdGlvbiByZWFkT25lKG5hbWUpIHtcbiAgICAgICAgICAgIHZhciBfdGhpczYgPSB0aGlzO1xuXG4gICAgICAgICAgICB2YXIgX25hbWUkc3BsaXQ1ID0gbmFtZS5zcGxpdCgnfCcpLFxuICAgICAgICAgICAgICAgIF9uYW1lJHNwbGl0NiA9IHNsaWNlZFRvQXJyYXkoX25hbWUkc3BsaXQ1LCAyKSxcbiAgICAgICAgICAgICAgICBsbmcgPSBfbmFtZSRzcGxpdDZbMF0sXG4gICAgICAgICAgICAgICAgbnMgPSBfbmFtZSRzcGxpdDZbMV07XG5cbiAgICAgICAgICAgIHRoaXMucmVhZChsbmcsIG5zLCAncmVhZCcsIG51bGwsIG51bGwsIGZ1bmN0aW9uIChlcnIsIGRhdGEpIHtcbiAgICAgICAgICAgICAgaWYgKGVycikgX3RoaXM2LmxvZ2dlci53YXJuKCdsb2FkaW5nIG5hbWVzcGFjZSAnICsgbnMgKyAnIGZvciBsYW5ndWFnZSAnICsgbG5nICsgJyBmYWlsZWQnLCBlcnIpO1xuICAgICAgICAgICAgICBpZiAoIWVyciAmJiBkYXRhKSBfdGhpczYubG9nZ2VyLmxvZygnbG9hZGVkIG5hbWVzcGFjZSAnICsgbnMgKyAnIGZvciBsYW5ndWFnZSAnICsgbG5nLCBkYXRhKTtcblxuICAgICAgICAgICAgICBfdGhpczYubG9hZGVkKG5hbWUsIGVyciwgZGF0YSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgXG5cbiAgICAgICAgICB0b0xvYWQudG9Mb2FkLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgICAgIHJlYWRPbmUuY2FsbChfdGhpczUsIG5hbWUpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KSgpO1xuICAgICAgfVxuICB9O1xuXG4gIENvbm5lY3Rvci5wcm90b3R5cGUucmVsb2FkID0gZnVuY3Rpb24gcmVsb2FkKGxhbmd1YWdlcywgbmFtZXNwYWNlcykge1xuICAgIHZhciBfdGhpczcgPSB0aGlzO1xuXG4gICAgaWYgKCF0aGlzLmJhY2tlbmQpIHtcbiAgICAgIHRoaXMubG9nZ2VyLndhcm4oJ05vIGJhY2tlbmQgd2FzIGFkZGVkIHZpYSBpMThuZXh0LnVzZS4gV2lsbCBub3QgbG9hZCByZXNvdXJjZXMuJyk7XG4gICAgfVxuICAgIHZhciBvcHRpb25zID0gX2V4dGVuZHMoe30sIHRoaXMuYmFja2VuZC5vcHRpb25zLCB0aGlzLm9wdGlvbnMuYmFja2VuZCk7XG5cbiAgICBpZiAodHlwZW9mIGxhbmd1YWdlcyA9PT0gJ3N0cmluZycpIGxhbmd1YWdlcyA9IHRoaXMuc2VydmljZXMubGFuZ3VhZ2VVdGlscy50b1Jlc29sdmVIaWVyYXJjaHkobGFuZ3VhZ2VzKTtcbiAgICBpZiAodHlwZW9mIG5hbWVzcGFjZXMgPT09ICdzdHJpbmcnKSBuYW1lc3BhY2VzID0gW25hbWVzcGFjZXNdO1xuXG4gICAgLy8gbG9hZCB3aXRoIG11bHRpLWxvYWRcbiAgICBpZiAob3B0aW9ucy5hbGxvd011bHRpTG9hZGluZyAmJiB0aGlzLmJhY2tlbmQucmVhZE11bHRpKSB7XG4gICAgICB0aGlzLnJlYWQobGFuZ3VhZ2VzLCBuYW1lc3BhY2VzLCAncmVhZE11bHRpJywgbnVsbCwgbnVsbCwgZnVuY3Rpb24gKGVyciwgZGF0YSkge1xuICAgICAgICBpZiAoZXJyKSBfdGhpczcubG9nZ2VyLndhcm4oJ3JlbG9hZGluZyBuYW1lc3BhY2VzICcgKyBuYW1lc3BhY2VzLmpvaW4oJywgJykgKyAnIGZvciBsYW5ndWFnZXMgJyArIGxhbmd1YWdlcy5qb2luKCcsICcpICsgJyB2aWEgbXVsdGlsb2FkaW5nIGZhaWxlZCcsIGVycik7XG4gICAgICAgIGlmICghZXJyICYmIGRhdGEpIF90aGlzNy5sb2dnZXIubG9nKCdyZWxvYWRlZCBuYW1lc3BhY2VzICcgKyBuYW1lc3BhY2VzLmpvaW4oJywgJykgKyAnIGZvciBsYW5ndWFnZXMgJyArIGxhbmd1YWdlcy5qb2luKCcsICcpICsgJyB2aWEgbXVsdGlsb2FkaW5nJywgZGF0YSk7XG5cbiAgICAgICAgbGFuZ3VhZ2VzLmZvckVhY2goZnVuY3Rpb24gKGwpIHtcbiAgICAgICAgICBuYW1lc3BhY2VzLmZvckVhY2goZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgICAgIHZhciBidW5kbGUgPSBnZXRQYXRoKGRhdGEsIFtsLCBuXSk7XG4gICAgICAgICAgICBpZiAoYnVuZGxlKSB7XG4gICAgICAgICAgICAgIF90aGlzNy5sb2FkZWQobCArICd8JyArIG4sIGVyciwgYnVuZGxlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHZhciBfZXJyMiA9ICdyZWxvYWRpbmcgbmFtZXNwYWNlICcgKyBuICsgJyBmb3IgbGFuZ3VhZ2UgJyArIGwgKyAnIHZpYSBtdWx0aWxvYWRpbmcgZmFpbGVkJztcbiAgICAgICAgICAgICAgX3RoaXM3LmxvYWRlZChsICsgJ3wnICsgbiwgX2VycjIpO1xuICAgICAgICAgICAgICBfdGhpczcubG9nZ2VyLmVycm9yKF9lcnIyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBsb2FkIG9uZSBieSBvbmVcbiAgICBlbHNlIHtcbiAgICAgICAgKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB2YXIgcmVhZE9uZSA9IGZ1bmN0aW9uIHJlYWRPbmUobmFtZSkge1xuICAgICAgICAgICAgdmFyIF90aGlzOCA9IHRoaXM7XG5cbiAgICAgICAgICAgIHZhciBfbmFtZSRzcGxpdDcgPSBuYW1lLnNwbGl0KCd8JyksXG4gICAgICAgICAgICAgICAgX25hbWUkc3BsaXQ4ID0gc2xpY2VkVG9BcnJheShfbmFtZSRzcGxpdDcsIDIpLFxuICAgICAgICAgICAgICAgIGxuZyA9IF9uYW1lJHNwbGl0OFswXSxcbiAgICAgICAgICAgICAgICBucyA9IF9uYW1lJHNwbGl0OFsxXTtcblxuICAgICAgICAgICAgdGhpcy5yZWFkKGxuZywgbnMsICdyZWFkJywgbnVsbCwgbnVsbCwgZnVuY3Rpb24gKGVyciwgZGF0YSkge1xuICAgICAgICAgICAgICBpZiAoZXJyKSBfdGhpczgubG9nZ2VyLndhcm4oJ3JlbG9hZGluZyBuYW1lc3BhY2UgJyArIG5zICsgJyBmb3IgbGFuZ3VhZ2UgJyArIGxuZyArICcgZmFpbGVkJywgZXJyKTtcbiAgICAgICAgICAgICAgaWYgKCFlcnIgJiYgZGF0YSkgX3RoaXM4LmxvZ2dlci5sb2coJ3JlbG9hZGVkIG5hbWVzcGFjZSAnICsgbnMgKyAnIGZvciBsYW5ndWFnZSAnICsgbG5nLCBkYXRhKTtcblxuICAgICAgICAgICAgICBfdGhpczgubG9hZGVkKG5hbWUsIGVyciwgZGF0YSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgXG5cbiAgICAgICAgICBsYW5ndWFnZXMuZm9yRWFjaChmdW5jdGlvbiAobCkge1xuICAgICAgICAgICAgbmFtZXNwYWNlcy5mb3JFYWNoKGZ1bmN0aW9uIChuKSB7XG4gICAgICAgICAgICAgIHJlYWRPbmUuY2FsbChfdGhpczcsIGwgKyAnfCcgKyBuKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KSgpO1xuICAgICAgfVxuICB9O1xuXG4gIENvbm5lY3Rvci5wcm90b3R5cGUuc2F2ZU1pc3NpbmcgPSBmdW5jdGlvbiBzYXZlTWlzc2luZyhsYW5ndWFnZXMsIG5hbWVzcGFjZSwga2V5LCBmYWxsYmFja1ZhbHVlKSB7XG4gICAgaWYgKHRoaXMuYmFja2VuZCAmJiB0aGlzLmJhY2tlbmQuY3JlYXRlKSB0aGlzLmJhY2tlbmQuY3JlYXRlKGxhbmd1YWdlcywgbmFtZXNwYWNlLCBrZXksIGZhbGxiYWNrVmFsdWUpO1xuXG4gICAgLy8gd3JpdGUgdG8gc3RvcmUgdG8gYXZvaWQgcmVzZW5kaW5nXG4gICAgaWYgKCFsYW5ndWFnZXMgfHwgIWxhbmd1YWdlc1swXSkgcmV0dXJuO1xuICAgIHRoaXMuc3RvcmUuYWRkUmVzb3VyY2UobGFuZ3VhZ2VzWzBdLCBuYW1lc3BhY2UsIGtleSwgZmFsbGJhY2tWYWx1ZSk7XG4gIH07XG5cbiAgcmV0dXJuIENvbm5lY3Rvcjtcbn0oRXZlbnRFbWl0dGVyKTtcblxudmFyIENvbm5lY3RvciQxID0gZnVuY3Rpb24gKF9FdmVudEVtaXR0ZXIpIHtcbiAgaW5oZXJpdHMoQ29ubmVjdG9yLCBfRXZlbnRFbWl0dGVyKTtcblxuICBmdW5jdGlvbiBDb25uZWN0b3IoY2FjaGUsIHN0b3JlLCBzZXJ2aWNlcykge1xuICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiB7fTtcbiAgICBjbGFzc0NhbGxDaGVjayh0aGlzLCBDb25uZWN0b3IpO1xuXG4gICAgdmFyIF90aGlzID0gcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfRXZlbnRFbWl0dGVyLmNhbGwodGhpcykpO1xuXG4gICAgX3RoaXMuY2FjaGUgPSBjYWNoZTtcbiAgICBfdGhpcy5zdG9yZSA9IHN0b3JlO1xuICAgIF90aGlzLnNlcnZpY2VzID0gc2VydmljZXM7XG4gICAgX3RoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgX3RoaXMubG9nZ2VyID0gYmFzZUxvZ2dlci5jcmVhdGUoJ2NhY2hlQ29ubmVjdG9yJyk7XG5cbiAgICBfdGhpcy5jYWNoZSAmJiBfdGhpcy5jYWNoZS5pbml0ICYmIF90aGlzLmNhY2hlLmluaXQoc2VydmljZXMsIG9wdGlvbnMuY2FjaGUsIG9wdGlvbnMpO1xuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIENvbm5lY3Rvci5wcm90b3R5cGUubG9hZCA9IGZ1bmN0aW9uIGxvYWQobGFuZ3VhZ2VzLCBuYW1lc3BhY2VzLCBjYWxsYmFjaykge1xuICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgaWYgKCF0aGlzLmNhY2hlKSByZXR1cm4gY2FsbGJhY2sgJiYgY2FsbGJhY2soKTtcbiAgICB2YXIgb3B0aW9ucyA9IF9leHRlbmRzKHt9LCB0aGlzLmNhY2hlLm9wdGlvbnMsIHRoaXMub3B0aW9ucy5jYWNoZSk7XG5cbiAgICBpZiAodHlwZW9mIGxhbmd1YWdlcyA9PT0gJ3N0cmluZycpIGxhbmd1YWdlcyA9IHRoaXMuc2VydmljZXMubGFuZ3VhZ2VVdGlscy50b1Jlc29sdmVIaWVyYXJjaHkobGFuZ3VhZ2VzKTtcbiAgICBpZiAodHlwZW9mIG5hbWVzcGFjZXMgPT09ICdzdHJpbmcnKSBuYW1lc3BhY2VzID0gW25hbWVzcGFjZXNdO1xuXG4gICAgaWYgKG9wdGlvbnMuZW5hYmxlZCkge1xuICAgICAgdGhpcy5jYWNoZS5sb2FkKGxhbmd1YWdlcywgZnVuY3Rpb24gKGVyciwgZGF0YSkge1xuICAgICAgICBpZiAoZXJyKSBfdGhpczIubG9nZ2VyLmVycm9yKCdsb2FkaW5nIGxhbmd1YWdlcyAnICsgbGFuZ3VhZ2VzLmpvaW4oJywgJykgKyAnIGZyb20gY2FjaGUgZmFpbGVkJywgZXJyKTtcbiAgICAgICAgaWYgKGRhdGEpIHtcbiAgICAgICAgICBmb3IgKHZhciBsIGluIGRhdGEpIHtcbiAgICAgICAgICAgIGZvciAodmFyIG4gaW4gZGF0YVtsXSkge1xuICAgICAgICAgICAgICBpZiAobiA9PT0gJ2kxOG5TdGFtcCcpIGNvbnRpbnVlO1xuICAgICAgICAgICAgICB2YXIgYnVuZGxlID0gZGF0YVtsXVtuXTtcbiAgICAgICAgICAgICAgaWYgKGJ1bmRsZSkgX3RoaXMyLnN0b3JlLmFkZFJlc291cmNlQnVuZGxlKGwsIG4sIGJ1bmRsZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChjYWxsYmFjaykgY2FsbGJhY2soKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoY2FsbGJhY2spIGNhbGxiYWNrKCk7XG4gICAgfVxuICB9O1xuXG4gIENvbm5lY3Rvci5wcm90b3R5cGUuc2F2ZSA9IGZ1bmN0aW9uIHNhdmUoKSB7XG4gICAgaWYgKHRoaXMuY2FjaGUgJiYgdGhpcy5vcHRpb25zLmNhY2hlICYmIHRoaXMub3B0aW9ucy5jYWNoZS5lbmFibGVkKSB0aGlzLmNhY2hlLnNhdmUodGhpcy5zdG9yZS5kYXRhKTtcbiAgfTtcblxuICByZXR1cm4gQ29ubmVjdG9yO1xufShFdmVudEVtaXR0ZXIpO1xuXG5mdW5jdGlvbiBnZXQkMSgpIHtcbiAgcmV0dXJuIHtcbiAgICBkZWJ1ZzogZmFsc2UsXG4gICAgaW5pdEltbWVkaWF0ZTogdHJ1ZSxcblxuICAgIG5zOiBbJ3RyYW5zbGF0aW9uJ10sXG4gICAgZGVmYXVsdE5TOiBbJ3RyYW5zbGF0aW9uJ10sXG4gICAgZmFsbGJhY2tMbmc6IFsnZGV2J10sXG4gICAgZmFsbGJhY2tOUzogZmFsc2UsIC8vIHN0cmluZyBvciBhcnJheSBvZiBuYW1lc3BhY2VzXG5cbiAgICB3aGl0ZWxpc3Q6IGZhbHNlLCAvLyBhcnJheSB3aXRoIHdoaXRlbGlzdGVkIGxhbmd1YWdlc1xuICAgIG5vbkV4cGxpY2l0V2hpdGVsaXN0OiBmYWxzZSxcbiAgICBsb2FkOiAnYWxsJywgLy8gfCBjdXJyZW50T25seSB8IGxhbmd1YWdlT25seVxuICAgIHByZWxvYWQ6IGZhbHNlLCAvLyBhcnJheSB3aXRoIHByZWxvYWQgbGFuZ3VhZ2VzXG5cbiAgICBzaW1wbGlmeVBsdXJhbFN1ZmZpeDogdHJ1ZSxcbiAgICBrZXlTZXBhcmF0b3I6ICcuJyxcbiAgICBuc1NlcGFyYXRvcjogJzonLFxuICAgIHBsdXJhbFNlcGFyYXRvcjogJ18nLFxuICAgIGNvbnRleHRTZXBhcmF0b3I6ICdfJyxcblxuICAgIHNhdmVNaXNzaW5nOiBmYWxzZSwgLy8gZW5hYmxlIHRvIHNlbmQgbWlzc2luZyB2YWx1ZXNcbiAgICBzYXZlTWlzc2luZ1RvOiAnZmFsbGJhY2snLCAvLyAnY3VycmVudCcgfHwgJ2FsbCdcbiAgICBtaXNzaW5nS2V5SGFuZGxlcjogZmFsc2UsIC8vIGZ1bmN0aW9uKGxuZywgbnMsIGtleSwgZmFsbGJhY2tWYWx1ZSkgLT4gb3ZlcnJpZGUgaWYgcHJlZmVyIG9uIGhhbmRsaW5nXG5cbiAgICBwb3N0UHJvY2VzczogZmFsc2UsIC8vIHN0cmluZyBvciBhcnJheSBvZiBwb3N0UHJvY2Vzc29yIG5hbWVzXG4gICAgcmV0dXJuTnVsbDogdHJ1ZSwgLy8gYWxsb3dzIG51bGwgdmFsdWUgYXMgdmFsaWQgdHJhbnNsYXRpb25cbiAgICByZXR1cm5FbXB0eVN0cmluZzogdHJ1ZSwgLy8gYWxsb3dzIGVtcHR5IHN0cmluZyB2YWx1ZSBhcyB2YWxpZCB0cmFuc2xhdGlvblxuICAgIHJldHVybk9iamVjdHM6IGZhbHNlLFxuICAgIGpvaW5BcnJheXM6IGZhbHNlLCAvLyBvciBzdHJpbmcgdG8gam9pbiBhcnJheVxuICAgIHJldHVybmVkT2JqZWN0SGFuZGxlcjogZnVuY3Rpb24gcmV0dXJuZWRPYmplY3RIYW5kbGVyKCkge30sIC8vIGZ1bmN0aW9uKGtleSwgdmFsdWUsIG9wdGlvbnMpIHRyaWdnZXJlZCBpZiBrZXkgcmV0dXJucyBvYmplY3QgYnV0IHJldHVybk9iamVjdHMgaXMgc2V0IHRvIGZhbHNlXG4gICAgcGFyc2VNaXNzaW5nS2V5SGFuZGxlcjogZmFsc2UsIC8vIGZ1bmN0aW9uKGtleSkgcGFyc2VkIGEga2V5IHRoYXQgd2FzIG5vdCBmb3VuZCBpbiB0KCkgYmVmb3JlIHJldHVybmluZ1xuICAgIGFwcGVuZE5hbWVzcGFjZVRvTWlzc2luZ0tleTogZmFsc2UsXG4gICAgYXBwZW5kTmFtZXNwYWNlVG9DSU1vZGU6IGZhbHNlLFxuICAgIG92ZXJsb2FkVHJhbnNsYXRpb25PcHRpb25IYW5kbGVyOiBmdW5jdGlvbiBvdmVybG9hZFRyYW5zbGF0aW9uT3B0aW9uSGFuZGxlcihhcmdzKSB7XG4gICAgICByZXR1cm4geyBkZWZhdWx0VmFsdWU6IGFyZ3NbMV0gfTtcbiAgICB9LFxuXG4gICAgaW50ZXJwb2xhdGlvbjoge1xuICAgICAgZXNjYXBlVmFsdWU6IHRydWUsXG4gICAgICBmb3JtYXQ6IGZ1bmN0aW9uIGZvcm1hdCh2YWx1ZSwgX2Zvcm1hdCwgbG5nKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgIH0sXG4gICAgICBwcmVmaXg6ICd7eycsXG4gICAgICBzdWZmaXg6ICd9fScsXG4gICAgICBmb3JtYXRTZXBhcmF0b3I6ICcsJyxcbiAgICAgIC8vIHByZWZpeEVzY2FwZWQ6ICd7eycsXG4gICAgICAvLyBzdWZmaXhFc2NhcGVkOiAnfX0nLFxuICAgICAgLy8gdW5lc2NhcGVTdWZmaXg6ICcnLFxuICAgICAgdW5lc2NhcGVQcmVmaXg6ICctJyxcblxuICAgICAgbmVzdGluZ1ByZWZpeDogJyR0KCcsXG4gICAgICBuZXN0aW5nU3VmZml4OiAnKScsXG4gICAgICAvLyBuZXN0aW5nUHJlZml4RXNjYXBlZDogJyR0KCcsXG4gICAgICAvLyBuZXN0aW5nU3VmZml4RXNjYXBlZDogJyknLFxuICAgICAgZGVmYXVsdFZhcmlhYmxlczogdW5kZWZpbmVkIC8vIG9iamVjdCB0aGF0IGNhbiBoYXZlIHZhbHVlcyB0byBpbnRlcnBvbGF0ZSBvbiAtIGV4dGVuZHMgcGFzc2VkIGluIGludGVycG9sYXRpb24gZGF0YVxuICAgIH1cbiAgfTtcbn1cblxuZnVuY3Rpb24gdHJhbnNmb3JtT3B0aW9ucyhvcHRpb25zKSB7XG4gIC8vIGNyZWF0ZSBuYW1lc3BhY2Ugb2JqZWN0IGlmIG5hbWVzcGFjZSBpcyBwYXNzZWQgaW4gYXMgc3RyaW5nXG4gIGlmICh0eXBlb2Ygb3B0aW9ucy5ucyA9PT0gJ3N0cmluZycpIG9wdGlvbnMubnMgPSBbb3B0aW9ucy5uc107XG4gIGlmICh0eXBlb2Ygb3B0aW9ucy5mYWxsYmFja0xuZyA9PT0gJ3N0cmluZycpIG9wdGlvbnMuZmFsbGJhY2tMbmcgPSBbb3B0aW9ucy5mYWxsYmFja0xuZ107XG4gIGlmICh0eXBlb2Ygb3B0aW9ucy5mYWxsYmFja05TID09PSAnc3RyaW5nJykgb3B0aW9ucy5mYWxsYmFja05TID0gW29wdGlvbnMuZmFsbGJhY2tOU107XG5cbiAgLy8gZXh0ZW5kIHdoaXRlbGlzdCB3aXRoIGNpbW9kZVxuICBpZiAob3B0aW9ucy53aGl0ZWxpc3QgJiYgb3B0aW9ucy53aGl0ZWxpc3QuaW5kZXhPZignY2ltb2RlJykgPCAwKSBvcHRpb25zLndoaXRlbGlzdC5wdXNoKCdjaW1vZGUnKTtcblxuICByZXR1cm4gb3B0aW9ucztcbn1cblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbnZhciBJMThuID0gZnVuY3Rpb24gKF9FdmVudEVtaXR0ZXIpIHtcbiAgaW5oZXJpdHMoSTE4biwgX0V2ZW50RW1pdHRlcik7XG5cbiAgZnVuY3Rpb24gSTE4bigpIHtcbiAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307XG4gICAgdmFyIGNhbGxiYWNrID0gYXJndW1lbnRzWzFdO1xuICAgIGNsYXNzQ2FsbENoZWNrKHRoaXMsIEkxOG4pO1xuXG4gICAgdmFyIF90aGlzID0gcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfRXZlbnRFbWl0dGVyLmNhbGwodGhpcykpO1xuXG4gICAgX3RoaXMub3B0aW9ucyA9IHRyYW5zZm9ybU9wdGlvbnMob3B0aW9ucyk7XG4gICAgX3RoaXMuc2VydmljZXMgPSB7fTtcbiAgICBfdGhpcy5sb2dnZXIgPSBiYXNlTG9nZ2VyO1xuICAgIF90aGlzLm1vZHVsZXMgPSB7IGV4dGVybmFsOiBbXSB9O1xuXG4gICAgaWYgKGNhbGxiYWNrICYmICFfdGhpcy5pc0luaXRpYWxpemVkICYmICFvcHRpb25zLmlzQ2xvbmUpIHtcbiAgICAgIHZhciBfcmV0O1xuXG4gICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vaTE4bmV4dC9pMThuZXh0L2lzc3Vlcy84NzlcbiAgICAgIGlmICghX3RoaXMub3B0aW9ucy5pbml0SW1tZWRpYXRlKSByZXR1cm4gX3JldCA9IF90aGlzLmluaXQob3B0aW9ucywgY2FsbGJhY2spLCBwb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKF90aGlzLCBfcmV0KTtcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBfdGhpcy5pbml0KG9wdGlvbnMsIGNhbGxiYWNrKTtcbiAgICAgIH0sIDApO1xuICAgIH1cbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICBJMThuLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24gaW5pdChvcHRpb25zLCBjYWxsYmFjaykge1xuICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBjYWxsYmFjayA9IG9wdGlvbnM7XG4gICAgICBvcHRpb25zID0ge307XG4gICAgfVxuICAgIGlmICghb3B0aW9ucykgb3B0aW9ucyA9IHt9O1xuXG4gICAgaWYgKG9wdGlvbnMuY29tcGF0aWJpbGl0eUFQSSA9PT0gJ3YxJykge1xuICAgICAgdGhpcy5vcHRpb25zID0gX2V4dGVuZHMoe30sIGdldCQxKCksIHRyYW5zZm9ybU9wdGlvbnMoY29udmVydEFQSU9wdGlvbnMob3B0aW9ucykpLCB7fSk7XG4gICAgfSBlbHNlIGlmIChvcHRpb25zLmNvbXBhdGliaWxpdHlKU09OID09PSAndjEnKSB7XG4gICAgICB0aGlzLm9wdGlvbnMgPSBfZXh0ZW5kcyh7fSwgZ2V0JDEoKSwgdHJhbnNmb3JtT3B0aW9ucyhjb252ZXJ0SlNPTk9wdGlvbnMob3B0aW9ucykpLCB7fSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMub3B0aW9ucyA9IF9leHRlbmRzKHt9LCBnZXQkMSgpLCB0aGlzLm9wdGlvbnMsIHRyYW5zZm9ybU9wdGlvbnMob3B0aW9ucykpO1xuICAgIH1cbiAgICBpZiAoIWNhbGxiYWNrKSBjYWxsYmFjayA9IG5vb3A7XG5cbiAgICBmdW5jdGlvbiBjcmVhdGVDbGFzc09uRGVtYW5kKENsYXNzT3JPYmplY3QpIHtcbiAgICAgIGlmICghQ2xhc3NPck9iamVjdCkgcmV0dXJuO1xuICAgICAgaWYgKHR5cGVvZiBDbGFzc09yT2JqZWN0ID09PSAnZnVuY3Rpb24nKSByZXR1cm4gbmV3IENsYXNzT3JPYmplY3QoKTtcbiAgICAgIHJldHVybiBDbGFzc09yT2JqZWN0O1xuICAgIH1cblxuICAgIC8vIGluaXQgc2VydmljZXNcbiAgICBpZiAoIXRoaXMub3B0aW9ucy5pc0Nsb25lKSB7XG4gICAgICBpZiAodGhpcy5tb2R1bGVzLmxvZ2dlcikge1xuICAgICAgICBiYXNlTG9nZ2VyLmluaXQoY3JlYXRlQ2xhc3NPbkRlbWFuZCh0aGlzLm1vZHVsZXMubG9nZ2VyKSwgdGhpcy5vcHRpb25zKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJhc2VMb2dnZXIuaW5pdChudWxsLCB0aGlzLm9wdGlvbnMpO1xuICAgICAgfVxuXG4gICAgICB2YXIgbHUgPSBuZXcgTGFuZ3VhZ2VVdGlsKHRoaXMub3B0aW9ucyk7XG4gICAgICB0aGlzLnN0b3JlID0gbmV3IFJlc291cmNlU3RvcmUodGhpcy5vcHRpb25zLnJlc291cmNlcywgdGhpcy5vcHRpb25zKTtcblxuICAgICAgdmFyIHMgPSB0aGlzLnNlcnZpY2VzO1xuICAgICAgcy5sb2dnZXIgPSBiYXNlTG9nZ2VyO1xuICAgICAgcy5yZXNvdXJjZVN0b3JlID0gdGhpcy5zdG9yZTtcbiAgICAgIHMucmVzb3VyY2VTdG9yZS5vbignYWRkZWQgcmVtb3ZlZCcsIGZ1bmN0aW9uIChsbmcsIG5zKSB7XG4gICAgICAgIHMuY2FjaGVDb25uZWN0b3Iuc2F2ZSgpO1xuICAgICAgfSk7XG4gICAgICBzLmxhbmd1YWdlVXRpbHMgPSBsdTtcbiAgICAgIHMucGx1cmFsUmVzb2x2ZXIgPSBuZXcgUGx1cmFsUmVzb2x2ZXIobHUsIHsgcHJlcGVuZDogdGhpcy5vcHRpb25zLnBsdXJhbFNlcGFyYXRvciwgY29tcGF0aWJpbGl0eUpTT046IHRoaXMub3B0aW9ucy5jb21wYXRpYmlsaXR5SlNPTiwgc2ltcGxpZnlQbHVyYWxTdWZmaXg6IHRoaXMub3B0aW9ucy5zaW1wbGlmeVBsdXJhbFN1ZmZpeCB9KTtcbiAgICAgIHMuaW50ZXJwb2xhdG9yID0gbmV3IEludGVycG9sYXRvcih0aGlzLm9wdGlvbnMpO1xuXG4gICAgICBzLmJhY2tlbmRDb25uZWN0b3IgPSBuZXcgQ29ubmVjdG9yKGNyZWF0ZUNsYXNzT25EZW1hbmQodGhpcy5tb2R1bGVzLmJhY2tlbmQpLCBzLnJlc291cmNlU3RvcmUsIHMsIHRoaXMub3B0aW9ucyk7XG4gICAgICAvLyBwaXBlIGV2ZW50cyBmcm9tIGJhY2tlbmRDb25uZWN0b3JcbiAgICAgIHMuYmFja2VuZENvbm5lY3Rvci5vbignKicsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4gPiAxID8gX2xlbiAtIDEgOiAwKSwgX2tleSA9IDE7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgICAgICBhcmdzW19rZXkgLSAxXSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICAgICAgfVxuXG4gICAgICAgIF90aGlzMi5lbWl0LmFwcGx5KF90aGlzMiwgW2V2ZW50XS5jb25jYXQoYXJncykpO1xuICAgICAgfSk7XG5cbiAgICAgIHMuYmFja2VuZENvbm5lY3Rvci5vbignbG9hZGVkJywgZnVuY3Rpb24gKGxvYWRlZCkge1xuICAgICAgICBzLmNhY2hlQ29ubmVjdG9yLnNhdmUoKTtcbiAgICAgIH0pO1xuXG4gICAgICBzLmNhY2hlQ29ubmVjdG9yID0gbmV3IENvbm5lY3RvciQxKGNyZWF0ZUNsYXNzT25EZW1hbmQodGhpcy5tb2R1bGVzLmNhY2hlKSwgcy5yZXNvdXJjZVN0b3JlLCBzLCB0aGlzLm9wdGlvbnMpO1xuICAgICAgLy8gcGlwZSBldmVudHMgZnJvbSBiYWNrZW5kQ29ubmVjdG9yXG4gICAgICBzLmNhY2hlQ29ubmVjdG9yLm9uKCcqJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGZvciAodmFyIF9sZW4yID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4yID4gMSA/IF9sZW4yIC0gMSA6IDApLCBfa2V5MiA9IDE7IF9rZXkyIDwgX2xlbjI7IF9rZXkyKyspIHtcbiAgICAgICAgICBhcmdzW19rZXkyIC0gMV0gPSBhcmd1bWVudHNbX2tleTJdO1xuICAgICAgICB9XG5cbiAgICAgICAgX3RoaXMyLmVtaXQuYXBwbHkoX3RoaXMyLCBbZXZlbnRdLmNvbmNhdChhcmdzKSk7XG4gICAgICB9KTtcblxuICAgICAgaWYgKHRoaXMubW9kdWxlcy5sYW5ndWFnZURldGVjdG9yKSB7XG4gICAgICAgIHMubGFuZ3VhZ2VEZXRlY3RvciA9IGNyZWF0ZUNsYXNzT25EZW1hbmQodGhpcy5tb2R1bGVzLmxhbmd1YWdlRGV0ZWN0b3IpO1xuICAgICAgICBzLmxhbmd1YWdlRGV0ZWN0b3IuaW5pdChzLCB0aGlzLm9wdGlvbnMuZGV0ZWN0aW9uLCB0aGlzLm9wdGlvbnMpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnRyYW5zbGF0b3IgPSBuZXcgVHJhbnNsYXRvcih0aGlzLnNlcnZpY2VzLCB0aGlzLm9wdGlvbnMpO1xuICAgICAgLy8gcGlwZSBldmVudHMgZnJvbSB0cmFuc2xhdG9yXG4gICAgICB0aGlzLnRyYW5zbGF0b3Iub24oJyonLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgZm9yICh2YXIgX2xlbjMgPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbjMgPiAxID8gX2xlbjMgLSAxIDogMCksIF9rZXkzID0gMTsgX2tleTMgPCBfbGVuMzsgX2tleTMrKykge1xuICAgICAgICAgIGFyZ3NbX2tleTMgLSAxXSA9IGFyZ3VtZW50c1tfa2V5M107XG4gICAgICAgIH1cblxuICAgICAgICBfdGhpczIuZW1pdC5hcHBseShfdGhpczIsIFtldmVudF0uY29uY2F0KGFyZ3MpKTtcbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLm1vZHVsZXMuZXh0ZXJuYWwuZm9yRWFjaChmdW5jdGlvbiAobSkge1xuICAgICAgICBpZiAobS5pbml0KSBtLmluaXQoX3RoaXMyKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIGFwcGVuZCBhcGlcbiAgICB2YXIgc3RvcmVBcGkgPSBbJ2dldFJlc291cmNlJywgJ2FkZFJlc291cmNlJywgJ2FkZFJlc291cmNlcycsICdhZGRSZXNvdXJjZUJ1bmRsZScsICdyZW1vdmVSZXNvdXJjZUJ1bmRsZScsICdoYXNSZXNvdXJjZUJ1bmRsZScsICdnZXRSZXNvdXJjZUJ1bmRsZSddO1xuICAgIHN0b3JlQXBpLmZvckVhY2goZnVuY3Rpb24gKGZjTmFtZSkge1xuICAgICAgX3RoaXMyW2ZjTmFtZV0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0b3JlW2ZjTmFtZV0uYXBwbHkodGhpcy5zdG9yZSwgYXJndW1lbnRzKTtcbiAgICAgIH07XG4gICAgfSk7XG5cbiAgICAvLyBUT0RPOiBDT01QQVRJQklMSVRZIHJlbW92ZSB0aGlzXG4gICAgaWYgKHRoaXMub3B0aW9ucy5jb21wYXRpYmlsaXR5QVBJID09PSAndjEnKSBhcHBlbmRCYWNrd2FyZHNBUEkodGhpcyk7XG5cbiAgICB2YXIgbG9hZCA9IGZ1bmN0aW9uIGxvYWQoKSB7XG4gICAgICBfdGhpczIuY2hhbmdlTGFuZ3VhZ2UoX3RoaXMyLm9wdGlvbnMubG5nLCBmdW5jdGlvbiAoZXJyLCB0KSB7XG4gICAgICAgIF90aGlzMi5pc0luaXRpYWxpemVkID0gdHJ1ZTtcbiAgICAgICAgX3RoaXMyLmxvZ2dlci5sb2coJ2luaXRpYWxpemVkJywgX3RoaXMyLm9wdGlvbnMpO1xuICAgICAgICBfdGhpczIuZW1pdCgnaW5pdGlhbGl6ZWQnLCBfdGhpczIub3B0aW9ucyk7XG5cbiAgICAgICAgY2FsbGJhY2soZXJyLCB0KTtcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBpZiAodGhpcy5vcHRpb25zLnJlc291cmNlcyB8fCAhdGhpcy5vcHRpb25zLmluaXRJbW1lZGlhdGUpIHtcbiAgICAgIGxvYWQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2V0VGltZW91dChsb2FkLCAwKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBJMThuLnByb3RvdHlwZS5sb2FkUmVzb3VyY2VzID0gZnVuY3Rpb24gbG9hZFJlc291cmNlcygpIHtcbiAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgIHZhciBjYWxsYmFjayA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogbm9vcDtcblxuICAgIGlmICghdGhpcy5vcHRpb25zLnJlc291cmNlcykge1xuICAgICAgdmFyIF9yZXQyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoX3RoaXMzLmxhbmd1YWdlICYmIF90aGlzMy5sYW5ndWFnZS50b0xvd2VyQ2FzZSgpID09PSAnY2ltb2RlJykgcmV0dXJuIHtcbiAgICAgICAgICAgIHY6IGNhbGxiYWNrKClcbiAgICAgICAgICB9OyAvLyBhdm9pZCBsb2FkaW5nIHJlc291cmNlcyBmb3IgY2ltb2RlXG5cbiAgICAgICAgdmFyIHRvTG9hZCA9IFtdO1xuXG4gICAgICAgIHZhciBhcHBlbmQgPSBmdW5jdGlvbiBhcHBlbmQobG5nKSB7XG4gICAgICAgICAgaWYgKCFsbmcpIHJldHVybjtcbiAgICAgICAgICB2YXIgbG5ncyA9IF90aGlzMy5zZXJ2aWNlcy5sYW5ndWFnZVV0aWxzLnRvUmVzb2x2ZUhpZXJhcmNoeShsbmcpO1xuICAgICAgICAgIGxuZ3MuZm9yRWFjaChmdW5jdGlvbiAobCkge1xuICAgICAgICAgICAgaWYgKHRvTG9hZC5pbmRleE9mKGwpIDwgMCkgdG9Mb2FkLnB1c2gobCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKCFfdGhpczMubGFuZ3VhZ2UpIHtcbiAgICAgICAgICAvLyBhdCBsZWFzdCBsb2FkIGZhbGxiYWNrcyBpbiB0aGlzIGNhc2VcbiAgICAgICAgICB2YXIgZmFsbGJhY2tzID0gX3RoaXMzLnNlcnZpY2VzLmxhbmd1YWdlVXRpbHMuZ2V0RmFsbGJhY2tDb2RlcyhfdGhpczMub3B0aW9ucy5mYWxsYmFja0xuZyk7XG4gICAgICAgICAgZmFsbGJhY2tzLmZvckVhY2goZnVuY3Rpb24gKGwpIHtcbiAgICAgICAgICAgIHJldHVybiBhcHBlbmQobCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYXBwZW5kKF90aGlzMy5sYW5ndWFnZSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoX3RoaXMzLm9wdGlvbnMucHJlbG9hZCkge1xuICAgICAgICAgIF90aGlzMy5vcHRpb25zLnByZWxvYWQuZm9yRWFjaChmdW5jdGlvbiAobCkge1xuICAgICAgICAgICAgcmV0dXJuIGFwcGVuZChsKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIF90aGlzMy5zZXJ2aWNlcy5jYWNoZUNvbm5lY3Rvci5sb2FkKHRvTG9hZCwgX3RoaXMzLm9wdGlvbnMubnMsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBfdGhpczMuc2VydmljZXMuYmFja2VuZENvbm5lY3Rvci5sb2FkKHRvTG9hZCwgX3RoaXMzLm9wdGlvbnMubnMsIGNhbGxiYWNrKTtcbiAgICAgICAgfSk7XG4gICAgICB9KCk7XG5cbiAgICAgIGlmICgodHlwZW9mIF9yZXQyID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihfcmV0MikpID09PSBcIm9iamVjdFwiKSByZXR1cm4gX3JldDIudjtcbiAgICB9IGVsc2Uge1xuICAgICAgY2FsbGJhY2sobnVsbCk7XG4gICAgfVxuICB9O1xuXG4gIEkxOG4ucHJvdG90eXBlLnJlbG9hZFJlc291cmNlcyA9IGZ1bmN0aW9uIHJlbG9hZFJlc291cmNlcyhsbmdzLCBucykge1xuICAgIGlmICghbG5ncykgbG5ncyA9IHRoaXMubGFuZ3VhZ2VzO1xuICAgIGlmICghbnMpIG5zID0gdGhpcy5vcHRpb25zLm5zO1xuICAgIHRoaXMuc2VydmljZXMuYmFja2VuZENvbm5lY3Rvci5yZWxvYWQobG5ncywgbnMpO1xuICB9O1xuXG4gIEkxOG4ucHJvdG90eXBlLnVzZSA9IGZ1bmN0aW9uIHVzZShtb2R1bGUpIHtcbiAgICBpZiAobW9kdWxlLnR5cGUgPT09ICdiYWNrZW5kJykge1xuICAgICAgdGhpcy5tb2R1bGVzLmJhY2tlbmQgPSBtb2R1bGU7XG4gICAgfVxuXG4gICAgaWYgKG1vZHVsZS50eXBlID09PSAnY2FjaGUnKSB7XG4gICAgICB0aGlzLm1vZHVsZXMuY2FjaGUgPSBtb2R1bGU7XG4gICAgfVxuXG4gICAgaWYgKG1vZHVsZS50eXBlID09PSAnbG9nZ2VyJyB8fCBtb2R1bGUubG9nICYmIG1vZHVsZS53YXJuICYmIG1vZHVsZS5lcnJvcikge1xuICAgICAgdGhpcy5tb2R1bGVzLmxvZ2dlciA9IG1vZHVsZTtcbiAgICB9XG5cbiAgICBpZiAobW9kdWxlLnR5cGUgPT09ICdsYW5ndWFnZURldGVjdG9yJykge1xuICAgICAgdGhpcy5tb2R1bGVzLmxhbmd1YWdlRGV0ZWN0b3IgPSBtb2R1bGU7XG4gICAgfVxuXG4gICAgaWYgKG1vZHVsZS50eXBlID09PSAncG9zdFByb2Nlc3NvcicpIHtcbiAgICAgIHBvc3RQcm9jZXNzb3IuYWRkUG9zdFByb2Nlc3Nvcihtb2R1bGUpO1xuICAgIH1cblxuICAgIGlmIChtb2R1bGUudHlwZSA9PT0gJzNyZFBhcnR5Jykge1xuICAgICAgdGhpcy5tb2R1bGVzLmV4dGVybmFsLnB1c2gobW9kdWxlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBJMThuLnByb3RvdHlwZS5jaGFuZ2VMYW5ndWFnZSA9IGZ1bmN0aW9uIGNoYW5nZUxhbmd1YWdlKGxuZywgY2FsbGJhY2spIHtcbiAgICB2YXIgX3RoaXM0ID0gdGhpcztcblxuICAgIHZhciBkb25lID0gZnVuY3Rpb24gZG9uZShlcnIpIHtcbiAgICAgIGlmIChsbmcpIHtcbiAgICAgICAgX3RoaXM0LmVtaXQoJ2xhbmd1YWdlQ2hhbmdlZCcsIGxuZyk7XG4gICAgICAgIF90aGlzNC5sb2dnZXIubG9nKCdsYW5ndWFnZUNoYW5nZWQnLCBsbmcpO1xuICAgICAgfVxuXG4gICAgICBpZiAoY2FsbGJhY2spIGNhbGxiYWNrKGVyciwgZnVuY3Rpb24gKCkge1xuICAgICAgICBmb3IgKHZhciBfbGVuNCA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuNCksIF9rZXk0ID0gMDsgX2tleTQgPCBfbGVuNDsgX2tleTQrKykge1xuICAgICAgICAgIGFyZ3NbX2tleTRdID0gYXJndW1lbnRzW19rZXk0XTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBfdGhpczQudC5hcHBseShfdGhpczQsIGFyZ3MpO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIGlmICghbG5nICYmIHRoaXMuc2VydmljZXMubGFuZ3VhZ2VEZXRlY3RvcikgbG5nID0gdGhpcy5zZXJ2aWNlcy5sYW5ndWFnZURldGVjdG9yLmRldGVjdCgpO1xuXG4gICAgaWYgKGxuZykge1xuICAgICAgdGhpcy5sYW5ndWFnZSA9IGxuZztcbiAgICAgIHRoaXMubGFuZ3VhZ2VzID0gdGhpcy5zZXJ2aWNlcy5sYW5ndWFnZVV0aWxzLnRvUmVzb2x2ZUhpZXJhcmNoeShsbmcpO1xuXG4gICAgICB0aGlzLnRyYW5zbGF0b3IuY2hhbmdlTGFuZ3VhZ2UobG5nKTtcblxuICAgICAgaWYgKHRoaXMuc2VydmljZXMubGFuZ3VhZ2VEZXRlY3RvcikgdGhpcy5zZXJ2aWNlcy5sYW5ndWFnZURldGVjdG9yLmNhY2hlVXNlckxhbmd1YWdlKGxuZyk7XG4gICAgfVxuXG4gICAgdGhpcy5sb2FkUmVzb3VyY2VzKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgIGRvbmUoZXJyKTtcbiAgICB9KTtcbiAgfTtcblxuICBJMThuLnByb3RvdHlwZS5nZXRGaXhlZFQgPSBmdW5jdGlvbiBnZXRGaXhlZFQobG5nLCBucykge1xuICAgIHZhciBfdGhpczUgPSB0aGlzO1xuXG4gICAgdmFyIGZpeGVkVCA9IGZ1bmN0aW9uIGZpeGVkVChrZXkpIHtcbiAgICAgIHZhciBvcHRzID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTtcblxuICAgICAgdmFyIG9wdGlvbnMgPSBfZXh0ZW5kcyh7fSwgb3B0cyk7XG4gICAgICBvcHRpb25zLmxuZyA9IG9wdGlvbnMubG5nIHx8IGZpeGVkVC5sbmc7XG4gICAgICBvcHRpb25zLm5zID0gb3B0aW9ucy5ucyB8fCBmaXhlZFQubnM7XG4gICAgICByZXR1cm4gX3RoaXM1LnQoa2V5LCBvcHRpb25zKTtcbiAgICB9O1xuICAgIGZpeGVkVC5sbmcgPSBsbmc7XG4gICAgZml4ZWRULm5zID0gbnM7XG4gICAgcmV0dXJuIGZpeGVkVDtcbiAgfTtcblxuICBJMThuLnByb3RvdHlwZS50ID0gZnVuY3Rpb24gdCgpIHtcbiAgICByZXR1cm4gdGhpcy50cmFuc2xhdG9yICYmIHRoaXMudHJhbnNsYXRvci50cmFuc2xhdGUuYXBwbHkodGhpcy50cmFuc2xhdG9yLCBhcmd1bWVudHMpO1xuICB9O1xuXG4gIEkxOG4ucHJvdG90eXBlLmV4aXN0cyA9IGZ1bmN0aW9uIGV4aXN0cygpIHtcbiAgICByZXR1cm4gdGhpcy50cmFuc2xhdG9yICYmIHRoaXMudHJhbnNsYXRvci5leGlzdHMuYXBwbHkodGhpcy50cmFuc2xhdG9yLCBhcmd1bWVudHMpO1xuICB9O1xuXG4gIEkxOG4ucHJvdG90eXBlLnNldERlZmF1bHROYW1lc3BhY2UgPSBmdW5jdGlvbiBzZXREZWZhdWx0TmFtZXNwYWNlKG5zKSB7XG4gICAgdGhpcy5vcHRpb25zLmRlZmF1bHROUyA9IG5zO1xuICB9O1xuXG4gIEkxOG4ucHJvdG90eXBlLmxvYWROYW1lc3BhY2VzID0gZnVuY3Rpb24gbG9hZE5hbWVzcGFjZXMobnMsIGNhbGxiYWNrKSB7XG4gICAgdmFyIF90aGlzNiA9IHRoaXM7XG5cbiAgICBpZiAoIXRoaXMub3B0aW9ucy5ucykgcmV0dXJuIGNhbGxiYWNrICYmIGNhbGxiYWNrKCk7XG4gICAgaWYgKHR5cGVvZiBucyA9PT0gJ3N0cmluZycpIG5zID0gW25zXTtcblxuICAgIG5zLmZvckVhY2goZnVuY3Rpb24gKG4pIHtcbiAgICAgIGlmIChfdGhpczYub3B0aW9ucy5ucy5pbmRleE9mKG4pIDwgMCkgX3RoaXM2Lm9wdGlvbnMubnMucHVzaChuKTtcbiAgICB9KTtcblxuICAgIHRoaXMubG9hZFJlc291cmNlcyhjYWxsYmFjayk7XG4gIH07XG5cbiAgSTE4bi5wcm90b3R5cGUubG9hZExhbmd1YWdlcyA9IGZ1bmN0aW9uIGxvYWRMYW5ndWFnZXMobG5ncywgY2FsbGJhY2spIHtcbiAgICBpZiAodHlwZW9mIGxuZ3MgPT09ICdzdHJpbmcnKSBsbmdzID0gW2xuZ3NdO1xuICAgIHZhciBwcmVsb2FkZWQgPSB0aGlzLm9wdGlvbnMucHJlbG9hZCB8fCBbXTtcblxuICAgIHZhciBuZXdMbmdzID0gbG5ncy5maWx0ZXIoZnVuY3Rpb24gKGxuZykge1xuICAgICAgcmV0dXJuIHByZWxvYWRlZC5pbmRleE9mKGxuZykgPCAwO1xuICAgIH0pO1xuICAgIC8vIEV4aXQgZWFybHkgaWYgYWxsIGdpdmVuIGxhbmd1YWdlcyBhcmUgYWxyZWFkeSBwcmVsb2FkZWRcbiAgICBpZiAoIW5ld0xuZ3MubGVuZ3RoKSByZXR1cm4gY2FsbGJhY2soKTtcblxuICAgIHRoaXMub3B0aW9ucy5wcmVsb2FkID0gcHJlbG9hZGVkLmNvbmNhdChuZXdMbmdzKTtcbiAgICB0aGlzLmxvYWRSZXNvdXJjZXMoY2FsbGJhY2spO1xuICB9O1xuXG4gIEkxOG4ucHJvdG90eXBlLmRpciA9IGZ1bmN0aW9uIGRpcihsbmcpIHtcbiAgICBpZiAoIWxuZykgbG5nID0gdGhpcy5sYW5ndWFnZTtcbiAgICBpZiAoIWxuZykgcmV0dXJuICdydGwnO1xuXG4gICAgdmFyIHJ0bExuZ3MgPSBbJ2FyJywgJ3NodScsICdzcXInLCAnc3NoJywgJ3hhYScsICd5aGQnLCAneXVkJywgJ2FhbycsICdhYmgnLCAnYWJ2JywgJ2FjbScsICdhY3EnLCAnYWN3JywgJ2FjeCcsICdhY3knLCAnYWRmJywgJ2FkcycsICdhZWInLCAnYWVjJywgJ2FmYicsICdhanAnLCAnYXBjJywgJ2FwZCcsICdhcmInLCAnYXJxJywgJ2FycycsICdhcnknLCAnYXJ6JywgJ2F1eicsICdhdmwnLCAnYXloJywgJ2F5bCcsICdheW4nLCAnYXlwJywgJ2JieicsICdwZ2EnLCAnaGUnLCAnaXcnLCAncHMnLCAncGJ0JywgJ3BidScsICdwc3QnLCAncHJwJywgJ3ByZCcsICd1cicsICd5ZGQnLCAneWRzJywgJ3lpaCcsICdqaScsICd5aScsICdoYm8nLCAnbWVuJywgJ3htbicsICdmYScsICdqcHInLCAncGVvJywgJ3BlcycsICdwcnMnLCAnZHYnLCAnc2FtJ107XG5cbiAgICByZXR1cm4gcnRsTG5ncy5pbmRleE9mKHRoaXMuc2VydmljZXMubGFuZ3VhZ2VVdGlscy5nZXRMYW5ndWFnZVBhcnRGcm9tQ29kZShsbmcpKSA+PSAwID8gJ3J0bCcgOiAnbHRyJztcbiAgfTtcblxuICBJMThuLnByb3RvdHlwZS5jcmVhdGVJbnN0YW5jZSA9IGZ1bmN0aW9uIGNyZWF0ZUluc3RhbmNlKCkge1xuICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcbiAgICB2YXIgY2FsbGJhY2sgPSBhcmd1bWVudHNbMV07XG5cbiAgICByZXR1cm4gbmV3IEkxOG4ob3B0aW9ucywgY2FsbGJhY2spO1xuICB9O1xuXG4gIEkxOG4ucHJvdG90eXBlLmNsb25lSW5zdGFuY2UgPSBmdW5jdGlvbiBjbG9uZUluc3RhbmNlKCkge1xuICAgIHZhciBfdGhpczcgPSB0aGlzO1xuXG4gICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9O1xuICAgIHZhciBjYWxsYmFjayA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogbm9vcDtcblxuICAgIHZhciBtZXJnZWRPcHRpb25zID0gX2V4dGVuZHMoe30sIG9wdGlvbnMsIHRoaXMub3B0aW9ucywgeyBpc0Nsb25lOiB0cnVlIH0pO1xuICAgIHZhciBjbG9uZSA9IG5ldyBJMThuKG1lcmdlZE9wdGlvbnMsIGNhbGxiYWNrKTtcbiAgICB2YXIgbWVtYmVyc1RvQ29weSA9IFsnc3RvcmUnLCAnc2VydmljZXMnLCAnbGFuZ3VhZ2UnXTtcbiAgICBtZW1iZXJzVG9Db3B5LmZvckVhY2goZnVuY3Rpb24gKG0pIHtcbiAgICAgIGNsb25lW21dID0gX3RoaXM3W21dO1xuICAgIH0pO1xuICAgIGNsb25lLnRyYW5zbGF0b3IgPSBuZXcgVHJhbnNsYXRvcihjbG9uZS5zZXJ2aWNlcywgY2xvbmUub3B0aW9ucyk7XG4gICAgY2xvbmUudHJhbnNsYXRvci5vbignKicsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgZm9yICh2YXIgX2xlbjUgPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbjUgPiAxID8gX2xlbjUgLSAxIDogMCksIF9rZXk1ID0gMTsgX2tleTUgPCBfbGVuNTsgX2tleTUrKykge1xuICAgICAgICBhcmdzW19rZXk1IC0gMV0gPSBhcmd1bWVudHNbX2tleTVdO1xuICAgICAgfVxuXG4gICAgICBjbG9uZS5lbWl0LmFwcGx5KGNsb25lLCBbZXZlbnRdLmNvbmNhdChhcmdzKSk7XG4gICAgfSk7XG4gICAgY2xvbmUuaW5pdChtZXJnZWRPcHRpb25zLCBjYWxsYmFjayk7XG5cbiAgICByZXR1cm4gY2xvbmU7XG4gIH07XG5cbiAgcmV0dXJuIEkxOG47XG59KEV2ZW50RW1pdHRlcik7XG5cbnZhciBpMThuZXh0ID0gbmV3IEkxOG4oKTtcblxucmV0dXJuIGkxOG5leHQ7XG5cbn0pKSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3RlbXAvZXh0ZXJuYWwvaTE4bmV4dC9zY3JpcHRzL2kxOG5leHQuanNcbi8vIG1vZHVsZSBpZCA9IDFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiKGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcbiAgdHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnID8gbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCkgOlxuICB0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoZmFjdG9yeSkgOlxuICAoZ2xvYmFsLmkxOG5leHRCcm93c2VyTGFuZ3VhZ2VEZXRlY3RvciA9IGZhY3RvcnkoKSk7XG59KHRoaXMsIGZ1bmN0aW9uICgpIHsgJ3VzZSBzdHJpY3QnO1xuXG4gIHZhciBiYWJlbEhlbHBlcnMgPSB7fTtcblxuICBiYWJlbEhlbHBlcnMuY2xhc3NDYWxsQ2hlY2sgPSBmdW5jdGlvbiAoaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7XG4gICAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7XG4gICAgfVxuICB9O1xuXG4gIGJhYmVsSGVscGVycy5jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTtcbiAgICAgICAgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlO1xuICAgICAgICBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7XG4gICAgICAgIGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykge1xuICAgICAgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTtcbiAgICAgIGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpO1xuICAgICAgcmV0dXJuIENvbnN0cnVjdG9yO1xuICAgIH07XG4gIH0oKTtcblxuICBiYWJlbEhlbHBlcnM7XG5cbiAgdmFyIGFyciA9IFtdO1xuICB2YXIgZWFjaCA9IGFyci5mb3JFYWNoO1xuICB2YXIgc2xpY2UgPSBhcnIuc2xpY2U7XG5cbiAgZnVuY3Rpb24gZGVmYXVsdHMob2JqKSB7XG4gICAgZWFjaC5jYWxsKHNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSwgZnVuY3Rpb24gKHNvdXJjZSkge1xuICAgICAgaWYgKHNvdXJjZSkge1xuICAgICAgICBmb3IgKHZhciBwcm9wIGluIHNvdXJjZSkge1xuICAgICAgICAgIGlmIChvYmpbcHJvcF0gPT09IHVuZGVmaW5lZCkgb2JqW3Byb3BdID0gc291cmNlW3Byb3BdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIG9iajtcbiAgfVxuXG4gIHZhciBjb29raWUgPSB7XG4gICAgY3JlYXRlOiBmdW5jdGlvbiBjcmVhdGUobmFtZSwgdmFsdWUsIG1pbnV0ZXMsIGRvbWFpbikge1xuICAgICAgdmFyIGV4cGlyZXMgPSB2b2lkIDA7XG4gICAgICBpZiAobWludXRlcykge1xuICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgICAgIGRhdGUuc2V0VGltZShkYXRlLmdldFRpbWUoKSArIG1pbnV0ZXMgKiA2MCAqIDEwMDApO1xuICAgICAgICBleHBpcmVzID0gJzsgZXhwaXJlcz0nICsgZGF0ZS50b0dNVFN0cmluZygpO1xuICAgICAgfSBlbHNlIGV4cGlyZXMgPSAnJztcbiAgICAgIGRvbWFpbiA9IGRvbWFpbiA/ICdkb21haW49JyArIGRvbWFpbiArICc7JyA6ICcnO1xuICAgICAgZG9jdW1lbnQuY29va2llID0gbmFtZSArICc9JyArIHZhbHVlICsgZXhwaXJlcyArICc7JyArIGRvbWFpbiArICdwYXRoPS8nO1xuICAgIH0sXG5cbiAgICByZWFkOiBmdW5jdGlvbiByZWFkKG5hbWUpIHtcbiAgICAgIHZhciBuYW1lRVEgPSBuYW1lICsgJz0nO1xuICAgICAgdmFyIGNhID0gZG9jdW1lbnQuY29va2llLnNwbGl0KCc7Jyk7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBjID0gY2FbaV07XG4gICAgICAgIHdoaWxlIChjLmNoYXJBdCgwKSA9PT0gJyAnKSB7XG4gICAgICAgICAgYyA9IGMuc3Vic3RyaW5nKDEsIGMubGVuZ3RoKTtcbiAgICAgICAgfWlmIChjLmluZGV4T2YobmFtZUVRKSA9PT0gMCkgcmV0dXJuIGMuc3Vic3RyaW5nKG5hbWVFUS5sZW5ndGgsIGMubGVuZ3RoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0sXG5cbiAgICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZShuYW1lKSB7XG4gICAgICB0aGlzLmNyZWF0ZShuYW1lLCAnJywgLTEpO1xuICAgIH1cbiAgfTtcblxuICB2YXIgY29va2llJDEgPSB7XG4gICAgbmFtZTogJ2Nvb2tpZScsXG5cbiAgICBsb29rdXA6IGZ1bmN0aW9uIGxvb2t1cChvcHRpb25zKSB7XG4gICAgICB2YXIgZm91bmQgPSB2b2lkIDA7XG5cbiAgICAgIGlmIChvcHRpb25zLmxvb2t1cENvb2tpZSAmJiB0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHZhciBjID0gY29va2llLnJlYWQob3B0aW9ucy5sb29rdXBDb29raWUpO1xuICAgICAgICBpZiAoYykgZm91bmQgPSBjO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZm91bmQ7XG4gICAgfSxcbiAgICBjYWNoZVVzZXJMYW5ndWFnZTogZnVuY3Rpb24gY2FjaGVVc2VyTGFuZ3VhZ2UobG5nLCBvcHRpb25zKSB7XG4gICAgICBpZiAob3B0aW9ucy5sb29rdXBDb29raWUgJiYgdHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBjb29raWUuY3JlYXRlKG9wdGlvbnMubG9va3VwQ29va2llLCBsbmcsIG9wdGlvbnMuY29va2llTWludXRlcywgb3B0aW9ucy5jb29raWVEb21haW4pO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICB2YXIgcXVlcnlzdHJpbmcgPSB7XG4gICAgbmFtZTogJ3F1ZXJ5c3RyaW5nJyxcblxuICAgIGxvb2t1cDogZnVuY3Rpb24gbG9va3VwKG9wdGlvbnMpIHtcbiAgICAgIHZhciBmb3VuZCA9IHZvaWQgMDtcblxuICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHZhciBxdWVyeSA9IHdpbmRvdy5sb2NhdGlvbi5zZWFyY2guc3Vic3RyaW5nKDEpO1xuICAgICAgICB2YXIgcGFyYW1zID0gcXVlcnkuc3BsaXQoJyYnKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYXJhbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICB2YXIgcG9zID0gcGFyYW1zW2ldLmluZGV4T2YoJz0nKTtcbiAgICAgICAgICBpZiAocG9zID4gMCkge1xuICAgICAgICAgICAgdmFyIGtleSA9IHBhcmFtc1tpXS5zdWJzdHJpbmcoMCwgcG9zKTtcbiAgICAgICAgICAgIGlmIChrZXkgPT09IG9wdGlvbnMubG9va3VwUXVlcnlzdHJpbmcpIHtcbiAgICAgICAgICAgICAgZm91bmQgPSBwYXJhbXNbaV0uc3Vic3RyaW5nKHBvcyArIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gZm91bmQ7XG4gICAgfVxuICB9O1xuXG4gIHZhciBoYXNMb2NhbFN0b3JhZ2VTdXBwb3J0ID0gdm9pZCAwO1xuICB0cnkge1xuICAgIGhhc0xvY2FsU3RvcmFnZVN1cHBvcnQgPSB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5sb2NhbFN0b3JhZ2UgIT09IG51bGw7XG4gICAgdmFyIHRlc3RLZXkgPSAnaTE4bmV4dC50cmFuc2xhdGUuYm9vJztcbiAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0odGVzdEtleSwgJ2ZvbycpO1xuICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSh0ZXN0S2V5KTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGhhc0xvY2FsU3RvcmFnZVN1cHBvcnQgPSBmYWxzZTtcbiAgfVxuXG4gIHZhciBsb2NhbFN0b3JhZ2UgPSB7XG4gICAgbmFtZTogJ2xvY2FsU3RvcmFnZScsXG5cbiAgICBsb29rdXA6IGZ1bmN0aW9uIGxvb2t1cChvcHRpb25zKSB7XG4gICAgICB2YXIgZm91bmQgPSB2b2lkIDA7XG5cbiAgICAgIGlmIChvcHRpb25zLmxvb2t1cExvY2FsU3RvcmFnZSAmJiBoYXNMb2NhbFN0b3JhZ2VTdXBwb3J0KSB7XG4gICAgICAgIHZhciBsbmcgPSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0ob3B0aW9ucy5sb29rdXBMb2NhbFN0b3JhZ2UpO1xuICAgICAgICBpZiAobG5nKSBmb3VuZCA9IGxuZztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGZvdW5kO1xuICAgIH0sXG4gICAgY2FjaGVVc2VyTGFuZ3VhZ2U6IGZ1bmN0aW9uIGNhY2hlVXNlckxhbmd1YWdlKGxuZywgb3B0aW9ucykge1xuICAgICAgaWYgKG9wdGlvbnMubG9va3VwTG9jYWxTdG9yYWdlICYmIGhhc0xvY2FsU3RvcmFnZVN1cHBvcnQpIHtcbiAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKG9wdGlvbnMubG9va3VwTG9jYWxTdG9yYWdlLCBsbmcpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICB2YXIgbmF2aWdhdG9yJDEgPSB7XG4gICAgbmFtZTogJ25hdmlnYXRvcicsXG5cbiAgICBsb29rdXA6IGZ1bmN0aW9uIGxvb2t1cChvcHRpb25zKSB7XG4gICAgICB2YXIgZm91bmQgPSBbXTtcblxuICAgICAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGlmIChuYXZpZ2F0b3IubGFuZ3VhZ2VzKSB7XG4gICAgICAgICAgLy8gY2hyb21lIG9ubHk7IG5vdCBhbiBhcnJheSwgc28gY2FuJ3QgdXNlIC5wdXNoLmFwcGx5IGluc3RlYWQgb2YgaXRlcmF0aW5nXG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuYXZpZ2F0b3IubGFuZ3VhZ2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBmb3VuZC5wdXNoKG5hdmlnYXRvci5sYW5ndWFnZXNbaV0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAobmF2aWdhdG9yLnVzZXJMYW5ndWFnZSkge1xuICAgICAgICAgIGZvdW5kLnB1c2gobmF2aWdhdG9yLnVzZXJMYW5ndWFnZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5hdmlnYXRvci5sYW5ndWFnZSkge1xuICAgICAgICAgIGZvdW5kLnB1c2gobmF2aWdhdG9yLmxhbmd1YWdlKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gZm91bmQubGVuZ3RoID4gMCA/IGZvdW5kIDogdW5kZWZpbmVkO1xuICAgIH1cbiAgfTtcblxuICB2YXIgaHRtbFRhZyA9IHtcbiAgICBuYW1lOiAnaHRtbFRhZycsXG5cbiAgICBsb29rdXA6IGZ1bmN0aW9uIGxvb2t1cChvcHRpb25zKSB7XG4gICAgICB2YXIgZm91bmQgPSB2b2lkIDA7XG4gICAgICB2YXIgaHRtbFRhZyA9IG9wdGlvbnMuaHRtbFRhZyB8fCAodHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJyA/IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCA6IG51bGwpO1xuXG4gICAgICBpZiAoaHRtbFRhZyAmJiB0eXBlb2YgaHRtbFRhZy5nZXRBdHRyaWJ1dGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgZm91bmQgPSBodG1sVGFnLmdldEF0dHJpYnV0ZSgnbGFuZycpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZm91bmQ7XG4gICAgfVxuICB9O1xuXG4gIGZ1bmN0aW9uIGdldERlZmF1bHRzKCkge1xuICAgIHJldHVybiB7XG4gICAgICBvcmRlcjogWydxdWVyeXN0cmluZycsICdjb29raWUnLCAnbG9jYWxTdG9yYWdlJywgJ25hdmlnYXRvcicsICdodG1sVGFnJ10sXG4gICAgICBsb29rdXBRdWVyeXN0cmluZzogJ2xuZycsXG4gICAgICBsb29rdXBDb29raWU6ICdpMThuZXh0JyxcbiAgICAgIGxvb2t1cExvY2FsU3RvcmFnZTogJ2kxOG5leHRMbmcnLFxuXG4gICAgICAvLyBjYWNoZSB1c2VyIGxhbmd1YWdlXG4gICAgICBjYWNoZXM6IFsnbG9jYWxTdG9yYWdlJ11cbiAgICAgIC8vY29va2llTWludXRlczogMTAsXG4gICAgICAvL2Nvb2tpZURvbWFpbjogJ215RG9tYWluJ1xuICAgIH07XG4gIH1cblxuICB2YXIgQnJvd3NlciA9IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBCcm93c2VyKHNlcnZpY2VzKSB7XG4gICAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMSB8fCBhcmd1bWVudHNbMV0gPT09IHVuZGVmaW5lZCA/IHt9IDogYXJndW1lbnRzWzFdO1xuICAgICAgYmFiZWxIZWxwZXJzLmNsYXNzQ2FsbENoZWNrKHRoaXMsIEJyb3dzZXIpO1xuXG4gICAgICB0aGlzLnR5cGUgPSAnbGFuZ3VhZ2VEZXRlY3Rvcic7XG4gICAgICB0aGlzLmRldGVjdG9ycyA9IHt9O1xuXG4gICAgICB0aGlzLmluaXQoc2VydmljZXMsIG9wdGlvbnMpO1xuICAgIH1cblxuICAgIGJhYmVsSGVscGVycy5jcmVhdGVDbGFzcyhCcm93c2VyLCBbe1xuICAgICAga2V5OiAnaW5pdCcsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdChzZXJ2aWNlcykge1xuICAgICAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMSB8fCBhcmd1bWVudHNbMV0gPT09IHVuZGVmaW5lZCA/IHt9IDogYXJndW1lbnRzWzFdO1xuICAgICAgICB2YXIgaTE4bk9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDIgfHwgYXJndW1lbnRzWzJdID09PSB1bmRlZmluZWQgPyB7fSA6IGFyZ3VtZW50c1syXTtcblxuICAgICAgICB0aGlzLnNlcnZpY2VzID0gc2VydmljZXM7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IGRlZmF1bHRzKG9wdGlvbnMsIHRoaXMub3B0aW9ucyB8fCB7fSwgZ2V0RGVmYXVsdHMoKSk7XG4gICAgICAgIHRoaXMuaTE4bk9wdGlvbnMgPSBpMThuT3B0aW9ucztcblxuICAgICAgICB0aGlzLmFkZERldGVjdG9yKGNvb2tpZSQxKTtcbiAgICAgICAgdGhpcy5hZGREZXRlY3RvcihxdWVyeXN0cmluZyk7XG4gICAgICAgIHRoaXMuYWRkRGV0ZWN0b3IobG9jYWxTdG9yYWdlKTtcbiAgICAgICAgdGhpcy5hZGREZXRlY3RvcihuYXZpZ2F0b3IkMSk7XG4gICAgICAgIHRoaXMuYWRkRGV0ZWN0b3IoaHRtbFRhZyk7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiAnYWRkRGV0ZWN0b3InLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGFkZERldGVjdG9yKGRldGVjdG9yKSB7XG4gICAgICAgIHRoaXMuZGV0ZWN0b3JzW2RldGVjdG9yLm5hbWVdID0gZGV0ZWN0b3I7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiAnZGV0ZWN0JyxcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBkZXRlY3QoZGV0ZWN0aW9uT3JkZXIpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgICBpZiAoIWRldGVjdGlvbk9yZGVyKSBkZXRlY3Rpb25PcmRlciA9IHRoaXMub3B0aW9ucy5vcmRlcjtcblxuICAgICAgICB2YXIgZGV0ZWN0ZWQgPSBbXTtcbiAgICAgICAgZGV0ZWN0aW9uT3JkZXIuZm9yRWFjaChmdW5jdGlvbiAoZGV0ZWN0b3JOYW1lKSB7XG4gICAgICAgICAgaWYgKF90aGlzLmRldGVjdG9yc1tkZXRlY3Rvck5hbWVdKSB7XG4gICAgICAgICAgICB2YXIgbG9va3VwID0gX3RoaXMuZGV0ZWN0b3JzW2RldGVjdG9yTmFtZV0ubG9va3VwKF90aGlzLm9wdGlvbnMpO1xuICAgICAgICAgICAgaWYgKGxvb2t1cCAmJiB0eXBlb2YgbG9va3VwID09PSAnc3RyaW5nJykgbG9va3VwID0gW2xvb2t1cF07XG4gICAgICAgICAgICBpZiAobG9va3VwKSBkZXRlY3RlZCA9IGRldGVjdGVkLmNvbmNhdChsb29rdXApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdmFyIGZvdW5kID0gdm9pZCAwO1xuICAgICAgICBkZXRlY3RlZC5mb3JFYWNoKGZ1bmN0aW9uIChsbmcpIHtcbiAgICAgICAgICBpZiAoZm91bmQpIHJldHVybjtcbiAgICAgICAgICB2YXIgY2xlYW5lZExuZyA9IF90aGlzLnNlcnZpY2VzLmxhbmd1YWdlVXRpbHMuZm9ybWF0TGFuZ3VhZ2VDb2RlKGxuZyk7XG4gICAgICAgICAgaWYgKF90aGlzLnNlcnZpY2VzLmxhbmd1YWdlVXRpbHMuaXNXaGl0ZWxpc3RlZChjbGVhbmVkTG5nKSkgZm91bmQgPSBjbGVhbmVkTG5nO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gZm91bmQgfHwgdGhpcy5pMThuT3B0aW9ucy5mYWxsYmFja0xuZ1swXTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6ICdjYWNoZVVzZXJMYW5ndWFnZScsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gY2FjaGVVc2VyTGFuZ3VhZ2UobG5nLCBjYWNoZXMpIHtcbiAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgICAgaWYgKCFjYWNoZXMpIGNhY2hlcyA9IHRoaXMub3B0aW9ucy5jYWNoZXM7XG4gICAgICAgIGlmICghY2FjaGVzKSByZXR1cm47XG4gICAgICAgIGNhY2hlcy5mb3JFYWNoKGZ1bmN0aW9uIChjYWNoZU5hbWUpIHtcbiAgICAgICAgICBpZiAoX3RoaXMyLmRldGVjdG9yc1tjYWNoZU5hbWVdKSBfdGhpczIuZGV0ZWN0b3JzW2NhY2hlTmFtZV0uY2FjaGVVc2VyTGFuZ3VhZ2UobG5nLCBfdGhpczIub3B0aW9ucyk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1dKTtcbiAgICByZXR1cm4gQnJvd3NlcjtcbiAgfSgpO1xuXG4gIEJyb3dzZXIudHlwZSA9ICdsYW5ndWFnZURldGVjdG9yJztcblxuICByZXR1cm4gQnJvd3NlcjtcblxufSkpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vdGVtcC9leHRlcm5hbC9pMThuZXh0L3NjcmlwdHMvaTE4bmV4dEJyb3dzZXJMYW5ndWFnZURldGVjdG9yLmpzXG4vLyBtb2R1bGUgaWQgPSAyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG5cdHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpIDpcblx0dHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKGZhY3RvcnkpIDpcblx0KGdsb2JhbC5pMThuZXh0TG9jYWxTdG9yYWdlQ2FjaGUgPSBmYWN0b3J5KCkpO1xufSh0aGlzLCAoZnVuY3Rpb24gKCkgeyAndXNlIHN0cmljdCc7XG5cbnZhciBhcnIgPSBbXTtcbnZhciBlYWNoID0gYXJyLmZvckVhY2g7XG52YXIgc2xpY2UgPSBhcnIuc2xpY2U7XG5cbmZ1bmN0aW9uIGRlZmF1bHRzKG9iaikge1xuICBlYWNoLmNhbGwoc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpLCBmdW5jdGlvbiAoc291cmNlKSB7XG4gICAgaWYgKHNvdXJjZSkge1xuICAgICAgZm9yICh2YXIgcHJvcCBpbiBzb3VyY2UpIHtcbiAgICAgICAgaWYgKG9ialtwcm9wXSA9PT0gdW5kZWZpbmVkKSBvYmpbcHJvcF0gPSBzb3VyY2VbcHJvcF07XG4gICAgICB9XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIG9iajtcbn1cblxuXG5cbmZ1bmN0aW9uIGRlYm91bmNlKGZ1bmMsIHdhaXQsIGltbWVkaWF0ZSkge1xuICB2YXIgdGltZW91dDtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgY29udGV4dCA9IHRoaXMsXG4gICAgICAgIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgdmFyIGxhdGVyID0gZnVuY3Rpb24gbGF0ZXIoKSB7XG4gICAgICB0aW1lb3V0ID0gbnVsbDtcbiAgICAgIGlmICghaW1tZWRpYXRlKSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgIH07XG4gICAgdmFyIGNhbGxOb3cgPSBpbW1lZGlhdGUgJiYgIXRpbWVvdXQ7XG4gICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCB3YWl0KTtcbiAgICBpZiAoY2FsbE5vdykgZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgfTtcbn1cblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxudmFyIHN0b3JhZ2UgPSB7XG4gIHNldEl0ZW06IGZ1bmN0aW9uIHNldEl0ZW0oa2V5LCB2YWx1ZSkge1xuICAgIGlmICh3aW5kb3cubG9jYWxTdG9yYWdlKSB7XG4gICAgICB0cnkge1xuICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCB2YWx1ZSk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIC8vIGYubG9nKCdmYWlsZWQgdG8gc2V0IHZhbHVlIGZvciBrZXkgXCInICsga2V5ICsgJ1wiIHRvIGxvY2FsU3RvcmFnZS4nKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG4gIGdldEl0ZW06IGZ1bmN0aW9uIGdldEl0ZW0oa2V5LCB2YWx1ZSkge1xuICAgIGlmICh3aW5kb3cubG9jYWxTdG9yYWdlKSB7XG4gICAgICB0cnkge1xuICAgICAgICByZXR1cm4gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSwgdmFsdWUpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvLyBmLmxvZygnZmFpbGVkIHRvIGdldCB2YWx1ZSBmb3Iga2V5IFwiJyArIGtleSArICdcIiBmcm9tIGxvY2FsU3RvcmFnZS4nKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxufTtcblxuZnVuY3Rpb24gZ2V0RGVmYXVsdHMoKSB7XG4gIHJldHVybiB7XG4gICAgZW5hYmxlZDogZmFsc2UsXG4gICAgcHJlZml4OiAnaTE4bmV4dF9yZXNfJyxcbiAgICBleHBpcmF0aW9uVGltZTogNyAqIDI0ICogNjAgKiA2MCAqIDEwMDAsXG4gICAgdmVyc2lvbnM6IHt9XG4gIH07XG59XG5cbnZhciBDYWNoZSA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gQ2FjaGUoc2VydmljZXMpIHtcbiAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307XG5cbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ2FjaGUpO1xuXG4gICAgdGhpcy5pbml0KHNlcnZpY2VzLCBvcHRpb25zKTtcblxuICAgIHRoaXMudHlwZSA9ICdjYWNoZSc7XG4gICAgdGhpcy5kZWJvdW5jZWRTdG9yZSA9IGRlYm91bmNlKHRoaXMuc3RvcmUsIDEwMDAwKTtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhDYWNoZSwgW3tcbiAgICBrZXk6ICdpbml0JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdChzZXJ2aWNlcykge1xuICAgICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9O1xuXG4gICAgICB0aGlzLnNlcnZpY2VzID0gc2VydmljZXM7XG4gICAgICB0aGlzLm9wdGlvbnMgPSBkZWZhdWx0cyhvcHRpb25zLCB0aGlzLm9wdGlvbnMgfHwge30sIGdldERlZmF1bHRzKCkpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2xvYWQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBsb2FkKGxuZ3MsIGNhbGxiYWNrKSB7XG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICB2YXIgc3RvcmUgPSB7fTtcbiAgICAgIHZhciBub3dNUyA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuXG4gICAgICBpZiAoIXdpbmRvdy5sb2NhbFN0b3JhZ2UgfHwgIWxuZ3MubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsLCBudWxsKTtcbiAgICAgIH1cblxuICAgICAgdmFyIHRvZG8gPSBsbmdzLmxlbmd0aDtcblxuICAgICAgbG5ncy5mb3JFYWNoKGZ1bmN0aW9uIChsbmcpIHtcbiAgICAgICAgdmFyIGxvY2FsID0gc3RvcmFnZS5nZXRJdGVtKF90aGlzLm9wdGlvbnMucHJlZml4ICsgbG5nKTtcblxuICAgICAgICBpZiAobG9jYWwpIHtcbiAgICAgICAgICBsb2NhbCA9IEpTT04ucGFyc2UobG9jYWwpO1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAvLyBleHBpcmF0aW9uIGZpZWxkIGlzIG1hbmRhdG9yeSwgYW5kIHNob3VsZCBub3QgYmUgZXhwaXJlZFxuICAgICAgICAgIGxvY2FsLmkxOG5TdGFtcCAmJiBsb2NhbC5pMThuU3RhbXAgKyBfdGhpcy5vcHRpb25zLmV4cGlyYXRpb25UaW1lID4gbm93TVMgJiZcblxuICAgICAgICAgIC8vIHRoZXJlIHNob3VsZCBiZSBubyBsYW5ndWFnZSB2ZXJzaW9uIHNldCwgb3IgaWYgaXQgaXMsIGl0IHNob3VsZCBtYXRjaCB0aGUgb25lIGluIHRyYW5zbGF0aW9uXG4gICAgICAgICAgX3RoaXMub3B0aW9ucy52ZXJzaW9uc1tsbmddID09PSBsb2NhbC5pMThuVmVyc2lvbikge1xuICAgICAgICAgICAgc3RvcmVbbG5nXSA9IGxvY2FsO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRvZG8gLT0gMTtcbiAgICAgICAgaWYgKHRvZG8gPT09IDApIHtcbiAgICAgICAgICBjYWxsYmFjayhudWxsLCBzdG9yZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdzdG9yZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHN0b3JlKHN0b3JlUGFyYW0pIHtcbiAgICAgIHZhciBzdG9yZSA9IHN0b3JlUGFyYW07XG4gICAgICBpZiAod2luZG93LmxvY2FsU3RvcmFnZSkge1xuICAgICAgICBmb3IgKHZhciBtIGluIHN0b3JlKSB7XG4gICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICAgICAgICAgIC8vIHRpbWVzdGFtcFxuICAgICAgICAgIHN0b3JlW21dLmkxOG5TdGFtcCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuXG4gICAgICAgICAgLy8gbGFuZ3VhZ2UgdmVyc2lvbiAoaWYgc2V0KVxuICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMudmVyc2lvbnNbbV0pIHtcbiAgICAgICAgICAgIHN0b3JlW21dLmkxOG5WZXJzaW9uID0gdGhpcy5vcHRpb25zLnZlcnNpb25zW21dO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIHNhdmVcbiAgICAgICAgICBzdG9yYWdlLnNldEl0ZW0odGhpcy5vcHRpb25zLnByZWZpeCArIG0sIEpTT04uc3RyaW5naWZ5KHN0b3JlW21dKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdzYXZlJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2F2ZShzdG9yZSkge1xuICAgICAgdGhpcy5kZWJvdW5jZWRTdG9yZShzdG9yZSk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIENhY2hlO1xufSgpO1xuXG5DYWNoZS50eXBlID0gJ2NhY2hlJztcblxucmV0dXJuIENhY2hlO1xuXG59KSkpO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi90ZW1wL2V4dGVybmFsL2kxOG5leHQvc2NyaXB0cy9pMThuZXh0TG9jYWxTdG9yYWdlQ2FjaGUuanNcbi8vIG1vZHVsZSBpZCA9IDNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiKGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcbiAgICB0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgPyBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKSA6XG4gICAgdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKCdpMThuZXh0U3ByaW50ZlBvc3RQcm9jZXNzb3InLCBmYWN0b3J5KSA6XG4gICAgKGdsb2JhbC5pMThuZXh0U3ByaW50ZlBvc3RQcm9jZXNzb3IgPSBmYWN0b3J5KCkpO1xufSh0aGlzLCBmdW5jdGlvbiAoKSB7ICd1c2Ugc3RyaWN0JztcblxuICAgIHZhciBiYWJlbEhlbHBlcnMgPSB7fTtcbiAgICBiYWJlbEhlbHBlcnMudHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7XG4gICAgICByZXR1cm4gdHlwZW9mIG9iajtcbiAgICB9IDogZnVuY3Rpb24gKG9iaikge1xuICAgICAgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajtcbiAgICB9O1xuICAgIGJhYmVsSGVscGVycztcblxuICAgIHZhciByZSA9IHtcbiAgICAgICAgbm90X3N0cmluZzogL1tec10vLFxuICAgICAgICBudW1iZXI6IC9bZGllZmddLyxcbiAgICAgICAganNvbjogL1tqXS8sXG4gICAgICAgIG5vdF9qc29uOiAvW15qXS8sXG4gICAgICAgIHRleHQ6IC9eW15cXHgyNV0rLyxcbiAgICAgICAgbW9kdWxvOiAvXlxceDI1ezJ9LyxcbiAgICAgICAgcGxhY2Vob2xkZXI6IC9eXFx4MjUoPzooWzEtOV1cXGQqKVxcJHxcXCgoW15cXCldKylcXCkpPyhcXCspPygwfCdbXiRdKT8oLSk/KFxcZCspPyg/OlxcLihcXGQrKSk/KFtiLWdpam9zdXhYXSkvLFxuICAgICAgICBrZXk6IC9eKFthLXpfXVthLXpfXFxkXSopL2ksXG4gICAgICAgIGtleV9hY2Nlc3M6IC9eXFwuKFthLXpfXVthLXpfXFxkXSopL2ksXG4gICAgICAgIGluZGV4X2FjY2VzczogL15cXFsoXFxkKylcXF0vLFxuICAgICAgICBzaWduOiAvXltcXCtcXC1dL1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBzcHJpbnRmKCkge1xuICAgICAgICB2YXIga2V5ID0gYXJndW1lbnRzWzBdLFxuICAgICAgICAgICAgY2FjaGUgPSBzcHJpbnRmLmNhY2hlO1xuICAgICAgICBpZiAoIShjYWNoZVtrZXldICYmIGNhY2hlLmhhc093blByb3BlcnR5KGtleSkpKSB7XG4gICAgICAgICAgICBjYWNoZVtrZXldID0gc3ByaW50Zi5wYXJzZShrZXkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzcHJpbnRmLmZvcm1hdC5jYWxsKG51bGwsIGNhY2hlW2tleV0sIGFyZ3VtZW50cyk7XG4gICAgfVxuXG4gICAgc3ByaW50Zi5mb3JtYXQgPSBmdW5jdGlvbiAocGFyc2VfdHJlZSwgYXJndikge1xuICAgICAgICB2YXIgY3Vyc29yID0gMSxcbiAgICAgICAgICAgIHRyZWVfbGVuZ3RoID0gcGFyc2VfdHJlZS5sZW5ndGgsXG4gICAgICAgICAgICBub2RlX3R5cGUgPSBcIlwiLFxuICAgICAgICAgICAgYXJnLFxuICAgICAgICAgICAgb3V0cHV0ID0gW10sXG4gICAgICAgICAgICBpLFxuICAgICAgICAgICAgayxcbiAgICAgICAgICAgIG1hdGNoLFxuICAgICAgICAgICAgcGFkLFxuICAgICAgICAgICAgcGFkX2NoYXJhY3RlcixcbiAgICAgICAgICAgIHBhZF9sZW5ndGgsXG4gICAgICAgICAgICBpc19wb3NpdGl2ZSA9IHRydWUsXG4gICAgICAgICAgICBzaWduID0gXCJcIjtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IHRyZWVfbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIG5vZGVfdHlwZSA9IGdldF90eXBlKHBhcnNlX3RyZWVbaV0pO1xuICAgICAgICAgICAgaWYgKG5vZGVfdHlwZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgIG91dHB1dFtvdXRwdXQubGVuZ3RoXSA9IHBhcnNlX3RyZWVbaV07XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG5vZGVfdHlwZSA9PT0gXCJhcnJheVwiKSB7XG4gICAgICAgICAgICAgICAgbWF0Y2ggPSBwYXJzZV90cmVlW2ldOyAvLyBjb252ZW5pZW5jZSBwdXJwb3NlcyBvbmx5XG4gICAgICAgICAgICAgICAgaWYgKG1hdGNoWzJdKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGtleXdvcmQgYXJndW1lbnRcbiAgICAgICAgICAgICAgICAgICAgYXJnID0gYXJndltjdXJzb3JdO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGsgPSAwOyBrIDwgbWF0Y2hbMl0ubGVuZ3RoOyBrKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYXJnLmhhc093blByb3BlcnR5KG1hdGNoWzJdW2tdKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihzcHJpbnRmKFwiW3NwcmludGZdIHByb3BlcnR5ICclcycgZG9lcyBub3QgZXhpc3RcIiwgbWF0Y2hbMl1ba10pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZyA9IGFyZ1ttYXRjaFsyXVtrXV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG1hdGNoWzFdKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIHBvc2l0aW9uYWwgYXJndW1lbnQgKGV4cGxpY2l0KVxuICAgICAgICAgICAgICAgICAgICBhcmcgPSBhcmd2W21hdGNoWzFdXTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBwb3NpdGlvbmFsIGFyZ3VtZW50IChpbXBsaWNpdClcbiAgICAgICAgICAgICAgICAgICAgYXJnID0gYXJndltjdXJzb3IrK107XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGdldF90eXBlKGFyZykgPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGFyZyA9IGFyZygpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChyZS5ub3Rfc3RyaW5nLnRlc3QobWF0Y2hbOF0pICYmIHJlLm5vdF9qc29uLnRlc3QobWF0Y2hbOF0pICYmIGdldF90eXBlKGFyZykgIT0gXCJudW1iZXJcIiAmJiBpc05hTihhcmcpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3Ioc3ByaW50ZihcIltzcHJpbnRmXSBleHBlY3RpbmcgbnVtYmVyIGJ1dCBmb3VuZCAlc1wiLCBnZXRfdHlwZShhcmcpKSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHJlLm51bWJlci50ZXN0KG1hdGNoWzhdKSkge1xuICAgICAgICAgICAgICAgICAgICBpc19wb3NpdGl2ZSA9IGFyZyA+PSAwO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHN3aXRjaCAobWF0Y2hbOF0pIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImJcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZyA9IGFyZy50b1N0cmluZygyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiY1wiOlxuICAgICAgICAgICAgICAgICAgICAgICAgYXJnID0gU3RyaW5nLmZyb21DaGFyQ29kZShhcmcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJkXCI6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJpXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmcgPSBwYXJzZUludChhcmcsIDEwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwialwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgYXJnID0gSlNPTi5zdHJpbmdpZnkoYXJnLCBudWxsLCBtYXRjaFs2XSA/IHBhcnNlSW50KG1hdGNoWzZdKSA6IDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJlXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmcgPSBtYXRjaFs3XSA/IGFyZy50b0V4cG9uZW50aWFsKG1hdGNoWzddKSA6IGFyZy50b0V4cG9uZW50aWFsKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImZcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZyA9IG1hdGNoWzddID8gcGFyc2VGbG9hdChhcmcpLnRvRml4ZWQobWF0Y2hbN10pIDogcGFyc2VGbG9hdChhcmcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJnXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmcgPSBtYXRjaFs3XSA/IHBhcnNlRmxvYXQoYXJnKS50b1ByZWNpc2lvbihtYXRjaFs3XSkgOiBwYXJzZUZsb2F0KGFyZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIm9cIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZyA9IGFyZy50b1N0cmluZyg4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwic1wiOlxuICAgICAgICAgICAgICAgICAgICAgICAgYXJnID0gKGFyZyA9IFN0cmluZyhhcmcpKSAmJiBtYXRjaFs3XSA/IGFyZy5zdWJzdHJpbmcoMCwgbWF0Y2hbN10pIDogYXJnO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ1XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmcgPSBhcmcgPj4+IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInhcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZyA9IGFyZy50b1N0cmluZygxNik7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIlhcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZyA9IGFyZy50b1N0cmluZygxNikudG9VcHBlckNhc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocmUuanNvbi50ZXN0KG1hdGNoWzhdKSkge1xuICAgICAgICAgICAgICAgICAgICBvdXRwdXRbb3V0cHV0Lmxlbmd0aF0gPSBhcmc7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlLm51bWJlci50ZXN0KG1hdGNoWzhdKSAmJiAoIWlzX3Bvc2l0aXZlIHx8IG1hdGNoWzNdKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2lnbiA9IGlzX3Bvc2l0aXZlID8gXCIrXCIgOiBcIi1cIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZyA9IGFyZy50b1N0cmluZygpLnJlcGxhY2UocmUuc2lnbiwgXCJcIik7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzaWduID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBwYWRfY2hhcmFjdGVyID0gbWF0Y2hbNF0gPyBtYXRjaFs0XSA9PT0gXCIwXCIgPyBcIjBcIiA6IG1hdGNoWzRdLmNoYXJBdCgxKSA6IFwiIFwiO1xuICAgICAgICAgICAgICAgICAgICBwYWRfbGVuZ3RoID0gbWF0Y2hbNl0gLSAoc2lnbiArIGFyZykubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICBwYWQgPSBtYXRjaFs2XSA/IHBhZF9sZW5ndGggPiAwID8gc3RyX3JlcGVhdChwYWRfY2hhcmFjdGVyLCBwYWRfbGVuZ3RoKSA6IFwiXCIgOiBcIlwiO1xuICAgICAgICAgICAgICAgICAgICBvdXRwdXRbb3V0cHV0Lmxlbmd0aF0gPSBtYXRjaFs1XSA/IHNpZ24gKyBhcmcgKyBwYWQgOiBwYWRfY2hhcmFjdGVyID09PSBcIjBcIiA/IHNpZ24gKyBwYWQgKyBhcmcgOiBwYWQgKyBzaWduICsgYXJnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0cHV0LmpvaW4oXCJcIik7XG4gICAgfTtcblxuICAgIHNwcmludGYuY2FjaGUgPSB7fTtcblxuICAgIHNwcmludGYucGFyc2UgPSBmdW5jdGlvbiAoZm10KSB7XG4gICAgICAgIHZhciBfZm10ID0gZm10LFxuICAgICAgICAgICAgbWF0Y2ggPSBbXSxcbiAgICAgICAgICAgIHBhcnNlX3RyZWUgPSBbXSxcbiAgICAgICAgICAgIGFyZ19uYW1lcyA9IDA7XG4gICAgICAgIHdoaWxlIChfZm10KSB7XG4gICAgICAgICAgICBpZiAoKG1hdGNoID0gcmUudGV4dC5leGVjKF9mbXQpKSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHBhcnNlX3RyZWVbcGFyc2VfdHJlZS5sZW5ndGhdID0gbWF0Y2hbMF07XG4gICAgICAgICAgICB9IGVsc2UgaWYgKChtYXRjaCA9IHJlLm1vZHVsby5leGVjKF9mbXQpKSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHBhcnNlX3RyZWVbcGFyc2VfdHJlZS5sZW5ndGhdID0gXCIlXCI7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKChtYXRjaCA9IHJlLnBsYWNlaG9sZGVyLmV4ZWMoX2ZtdCkpICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1hdGNoWzJdKSB7XG4gICAgICAgICAgICAgICAgICAgIGFyZ19uYW1lcyB8PSAxO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZmllbGRfbGlzdCA9IFtdLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVwbGFjZW1lbnRfZmllbGQgPSBtYXRjaFsyXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkX21hdGNoID0gW107XG4gICAgICAgICAgICAgICAgICAgIGlmICgoZmllbGRfbWF0Y2ggPSByZS5rZXkuZXhlYyhyZXBsYWNlbWVudF9maWVsZCkpICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaWVsZF9saXN0W2ZpZWxkX2xpc3QubGVuZ3RoXSA9IGZpZWxkX21hdGNoWzFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKChyZXBsYWNlbWVudF9maWVsZCA9IHJlcGxhY2VtZW50X2ZpZWxkLnN1YnN0cmluZyhmaWVsZF9tYXRjaFswXS5sZW5ndGgpKSAhPT0gXCJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoZmllbGRfbWF0Y2ggPSByZS5rZXlfYWNjZXNzLmV4ZWMocmVwbGFjZW1lbnRfZmllbGQpKSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZF9saXN0W2ZpZWxkX2xpc3QubGVuZ3RoXSA9IGZpZWxkX21hdGNoWzFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoKGZpZWxkX21hdGNoID0gcmUuaW5kZXhfYWNjZXNzLmV4ZWMocmVwbGFjZW1lbnRfZmllbGQpKSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZF9saXN0W2ZpZWxkX2xpc3QubGVuZ3RoXSA9IGZpZWxkX21hdGNoWzFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBTeW50YXhFcnJvcihcIltzcHJpbnRmXSBmYWlsZWQgdG8gcGFyc2UgbmFtZWQgYXJndW1lbnQga2V5XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBTeW50YXhFcnJvcihcIltzcHJpbnRmXSBmYWlsZWQgdG8gcGFyc2UgbmFtZWQgYXJndW1lbnQga2V5XCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG1hdGNoWzJdID0gZmllbGRfbGlzdDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBhcmdfbmFtZXMgfD0gMjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGFyZ19uYW1lcyA9PT0gMykge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJbc3ByaW50Zl0gbWl4aW5nIHBvc2l0aW9uYWwgYW5kIG5hbWVkIHBsYWNlaG9sZGVycyBpcyBub3QgKHlldCkgc3VwcG9ydGVkXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwYXJzZV90cmVlW3BhcnNlX3RyZWUubGVuZ3RoXSA9IG1hdGNoO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgU3ludGF4RXJyb3IoXCJbc3ByaW50Zl0gdW5leHBlY3RlZCBwbGFjZWhvbGRlclwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF9mbXQgPSBfZm10LnN1YnN0cmluZyhtYXRjaFswXS5sZW5ndGgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYXJzZV90cmVlO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiB2c3ByaW50ZihmbXQsIGFyZ3YsIF9hcmd2KSB7XG4gICAgICAgIF9hcmd2ID0gKGFyZ3YgfHwgW10pLnNsaWNlKDApO1xuICAgICAgICBfYXJndi5zcGxpY2UoMCwgMCwgZm10KTtcbiAgICAgICAgcmV0dXJuIHNwcmludGYuYXBwbHkobnVsbCwgX2FyZ3YpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGhlbHBlcnNcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBnZXRfdHlwZSh2YXJpYWJsZSkge1xuICAgICAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhcmlhYmxlKS5zbGljZSg4LCAtMSkudG9Mb3dlckNhc2UoKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzdHJfcmVwZWF0KGlucHV0LCBtdWx0aXBsaWVyKSB7XG4gICAgICAgIHJldHVybiBBcnJheShtdWx0aXBsaWVyICsgMSkuam9pbihpbnB1dCk7XG4gICAgfVxuXG4gICAgdmFyIGluZGV4ID0ge1xuICAgICAgbmFtZTogJ3NwcmludGYnLFxuICAgICAgdHlwZTogJ3Bvc3RQcm9jZXNzb3InLFxuXG4gICAgICBwcm9jZXNzOiBmdW5jdGlvbiBwcm9jZXNzKHZhbHVlLCBrZXksIG9wdGlvbnMpIHtcbiAgICAgICAgaWYgKCFvcHRpb25zLnNwcmludGYpIHJldHVybiB2YWx1ZTtcblxuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5hcHBseShvcHRpb25zLnNwcmludGYpID09PSAnW29iamVjdCBBcnJheV0nKSB7XG4gICAgICAgICAgcmV0dXJuIHZzcHJpbnRmKHZhbHVlLCBvcHRpb25zLnNwcmludGYpO1xuICAgICAgICB9IGVsc2UgaWYgKGJhYmVsSGVscGVycy50eXBlb2Yob3B0aW9ucy5zcHJpbnRmKSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICByZXR1cm4gc3ByaW50Zih2YWx1ZSwgb3B0aW9ucy5zcHJpbnRmKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgIH0sXG4gICAgICBvdmVybG9hZFRyYW5zbGF0aW9uT3B0aW9uSGFuZGxlcjogZnVuY3Rpb24gb3ZlcmxvYWRUcmFuc2xhdGlvbk9wdGlvbkhhbmRsZXIoYXJncykge1xuICAgICAgICB2YXIgdmFsdWVzID0gW107XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmdzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgdmFsdWVzLnB1c2goYXJnc1tpXSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHBvc3RQcm9jZXNzOiAnc3ByaW50ZicsXG4gICAgICAgICAgc3ByaW50ZjogdmFsdWVzXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBpbmRleDtcblxufSkpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vdGVtcC9leHRlcm5hbC9pMThuZXh0L3NjcmlwdHMvaTE4bmV4dFNwcmludGZQb3N0UHJvY2Vzc29yLmpzXG4vLyBtb2R1bGUgaWQgPSA0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG4gIHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpIDpcbiAgdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKGZhY3RvcnkpIDpcbiAgKGdsb2JhbC5pMThuZXh0WEhSQmFja2VuZCA9IGZhY3RvcnkoKSk7XG59KHRoaXMsIChmdW5jdGlvbiAoKSB7ICd1c2Ugc3RyaWN0JztcblxudmFyIGFyciA9IFtdO1xudmFyIGVhY2ggPSBhcnIuZm9yRWFjaDtcbnZhciBzbGljZSA9IGFyci5zbGljZTtcblxuZnVuY3Rpb24gZGVmYXVsdHMob2JqKSB7XG4gIGVhY2guY2FsbChzbGljZS5jYWxsKGFyZ3VtZW50cywgMSksIGZ1bmN0aW9uIChzb3VyY2UpIHtcbiAgICBpZiAoc291cmNlKSB7XG4gICAgICBmb3IgKHZhciBwcm9wIGluIHNvdXJjZSkge1xuICAgICAgICBpZiAob2JqW3Byb3BdID09PSB1bmRlZmluZWQpIG9ialtwcm9wXSA9IHNvdXJjZVtwcm9wXTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuICByZXR1cm4gb2JqO1xufVxuXG52YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cbmZ1bmN0aW9uIGFkZFF1ZXJ5U3RyaW5nKHVybCwgcGFyYW1zKSB7XG4gIGlmIChwYXJhbXMgJiYgKHR5cGVvZiBwYXJhbXMgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKHBhcmFtcykpID09PSAnb2JqZWN0Jykge1xuICAgIHZhciBxdWVyeVN0cmluZyA9ICcnLFxuICAgICAgICBlID0gZW5jb2RlVVJJQ29tcG9uZW50O1xuXG4gICAgLy8gTXVzdCBlbmNvZGUgZGF0YVxuICAgIGZvciAodmFyIHBhcmFtTmFtZSBpbiBwYXJhbXMpIHtcbiAgICAgIHF1ZXJ5U3RyaW5nICs9ICcmJyArIGUocGFyYW1OYW1lKSArICc9JyArIGUocGFyYW1zW3BhcmFtTmFtZV0pO1xuICAgIH1cblxuICAgIGlmICghcXVlcnlTdHJpbmcpIHtcbiAgICAgIHJldHVybiB1cmw7XG4gICAgfVxuXG4gICAgdXJsID0gdXJsICsgKHVybC5pbmRleE9mKCc/JykgIT09IC0xID8gJyYnIDogJz8nKSArIHF1ZXJ5U3RyaW5nLnNsaWNlKDEpO1xuICB9XG5cbiAgcmV0dXJuIHVybDtcbn1cblxuLy8gaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vWGVvbmNyb3NzLzc2NjMyNzNcbmZ1bmN0aW9uIGFqYXgodXJsLCBvcHRpb25zLCBjYWxsYmFjaywgZGF0YSwgY2FjaGUpIHtcblxuICBpZiAoZGF0YSAmJiAodHlwZW9mIGRhdGEgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKGRhdGEpKSA9PT0gJ29iamVjdCcpIHtcbiAgICBpZiAoIWNhY2hlKSB7XG4gICAgICBkYXRhWydfdCddID0gbmV3IERhdGUoKTtcbiAgICB9XG4gICAgLy8gVVJMIGVuY29kZWQgZm9ybSBkYXRhIG11c3QgYmUgaW4gcXVlcnlzdHJpbmcgZm9ybWF0XG4gICAgZGF0YSA9IGFkZFF1ZXJ5U3RyaW5nKCcnLCBkYXRhKS5zbGljZSgxKTtcbiAgfVxuXG4gIGlmIChvcHRpb25zLnF1ZXJ5U3RyaW5nUGFyYW1zKSB7XG4gICAgdXJsID0gYWRkUXVlcnlTdHJpbmcodXJsLCBvcHRpb25zLnF1ZXJ5U3RyaW5nUGFyYW1zKTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgdmFyIHggPSBuZXcgKFhNTEh0dHBSZXF1ZXN0IHx8IEFjdGl2ZVhPYmplY3QpKCdNU1hNTDIuWE1MSFRUUC4zLjAnKTtcbiAgICB4Lm9wZW4oZGF0YSA/ICdQT1NUJyA6ICdHRVQnLCB1cmwsIDEpO1xuICAgIGlmICghb3B0aW9ucy5jcm9zc0RvbWFpbikge1xuICAgICAgeC5zZXRSZXF1ZXN0SGVhZGVyKCdYLVJlcXVlc3RlZC1XaXRoJywgJ1hNTEh0dHBSZXF1ZXN0Jyk7XG4gICAgfVxuICAgIHgud2l0aENyZWRlbnRpYWxzID0gISFvcHRpb25zLndpdGhDcmVkZW50aWFscztcbiAgICBpZiAoZGF0YSkge1xuICAgICAgeC5zZXRSZXF1ZXN0SGVhZGVyKCdDb250ZW50LXR5cGUnLCAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyk7XG4gICAgfVxuICAgIHZhciBoID0gb3B0aW9ucy5jdXN0b21IZWFkZXJzO1xuICAgIGlmIChoKSB7XG4gICAgICBmb3IgKHZhciBpIGluIGgpIHtcbiAgICAgICAgeC5zZXRSZXF1ZXN0SGVhZGVyKGksIGhbaV0pO1xuICAgICAgfVxuICAgIH1cbiAgICB4Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHgucmVhZHlTdGF0ZSA+IDMgJiYgY2FsbGJhY2sgJiYgY2FsbGJhY2soeC5yZXNwb25zZVRleHQsIHgpO1xuICAgIH07XG4gICAgeC5zZW5kKGRhdGEpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZSAmJiBjb25zb2xlLmxvZyhlKTtcbiAgfVxufVxuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBnZXREZWZhdWx0cygpIHtcbiAgcmV0dXJuIHtcbiAgICBsb2FkUGF0aDogJy9sb2NhbGVzL3t7bG5nfX0ve3tuc319Lmpzb24nLFxuICAgIGFkZFBhdGg6ICdsb2NhbGVzL2FkZC97e2xuZ319L3t7bnN9fScsXG4gICAgYWxsb3dNdWx0aUxvYWRpbmc6IGZhbHNlLFxuICAgIHBhcnNlOiBKU09OLnBhcnNlLFxuICAgIGNyb3NzRG9tYWluOiBmYWxzZSxcbiAgICBhamF4OiBhamF4XG4gIH07XG59XG5cbnZhciBCYWNrZW5kID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBCYWNrZW5kKHNlcnZpY2VzKSB7XG4gICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9O1xuXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEJhY2tlbmQpO1xuXG4gICAgdGhpcy5pbml0KHNlcnZpY2VzLCBvcHRpb25zKTtcblxuICAgIHRoaXMudHlwZSA9ICdiYWNrZW5kJztcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhCYWNrZW5kLCBbe1xuICAgIGtleTogJ2luaXQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0KHNlcnZpY2VzKSB7XG4gICAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307XG5cbiAgICAgIHRoaXMuc2VydmljZXMgPSBzZXJ2aWNlcztcbiAgICAgIHRoaXMub3B0aW9ucyA9IGRlZmF1bHRzKG9wdGlvbnMsIHRoaXMub3B0aW9ucyB8fCB7fSwgZ2V0RGVmYXVsdHMoKSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAncmVhZE11bHRpJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVhZE11bHRpKGxhbmd1YWdlcywgbmFtZXNwYWNlcywgY2FsbGJhY2spIHtcbiAgICAgIHZhciBsb2FkUGF0aCA9IHRoaXMub3B0aW9ucy5sb2FkUGF0aDtcbiAgICAgIGlmICh0eXBlb2YgdGhpcy5vcHRpb25zLmxvYWRQYXRoID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIGxvYWRQYXRoID0gdGhpcy5vcHRpb25zLmxvYWRQYXRoKGxhbmd1YWdlcywgbmFtZXNwYWNlcyk7XG4gICAgICB9XG5cbiAgICAgIHZhciB1cmwgPSB0aGlzLnNlcnZpY2VzLmludGVycG9sYXRvci5pbnRlcnBvbGF0ZShsb2FkUGF0aCwgeyBsbmc6IGxhbmd1YWdlcy5qb2luKCcrJyksIG5zOiBuYW1lc3BhY2VzLmpvaW4oJysnKSB9KTtcblxuICAgICAgdGhpcy5sb2FkVXJsKHVybCwgY2FsbGJhY2spO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3JlYWQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZWFkKGxhbmd1YWdlLCBuYW1lc3BhY2UsIGNhbGxiYWNrKSB7XG4gICAgICB2YXIgbG9hZFBhdGggPSB0aGlzLm9wdGlvbnMubG9hZFBhdGg7XG4gICAgICBpZiAodHlwZW9mIHRoaXMub3B0aW9ucy5sb2FkUGF0aCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBsb2FkUGF0aCA9IHRoaXMub3B0aW9ucy5sb2FkUGF0aChbbGFuZ3VhZ2VdLCBbbmFtZXNwYWNlXSk7XG4gICAgICB9XG5cbiAgICAgIHZhciB1cmwgPSB0aGlzLnNlcnZpY2VzLmludGVycG9sYXRvci5pbnRlcnBvbGF0ZShsb2FkUGF0aCwgeyBsbmc6IGxhbmd1YWdlLCBuczogbmFtZXNwYWNlIH0pO1xuXG4gICAgICB0aGlzLmxvYWRVcmwodXJsLCBjYWxsYmFjayk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnbG9hZFVybCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGxvYWRVcmwodXJsLCBjYWxsYmFjaykge1xuICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgdGhpcy5vcHRpb25zLmFqYXgodXJsLCB0aGlzLm9wdGlvbnMsIGZ1bmN0aW9uIChkYXRhLCB4aHIpIHtcbiAgICAgICAgaWYgKHhoci5zdGF0dXMgPj0gNTAwICYmIHhoci5zdGF0dXMgPCA2MDApIHJldHVybiBjYWxsYmFjaygnZmFpbGVkIGxvYWRpbmcgJyArIHVybCwgdHJ1ZSAvKiByZXRyeSAqLyk7XG4gICAgICAgIGlmICh4aHIuc3RhdHVzID49IDQwMCAmJiB4aHIuc3RhdHVzIDwgNTAwKSByZXR1cm4gY2FsbGJhY2soJ2ZhaWxlZCBsb2FkaW5nICcgKyB1cmwsIGZhbHNlIC8qIG5vIHJldHJ5ICovKTtcblxuICAgICAgICB2YXIgcmV0ID0gdm9pZCAwLFxuICAgICAgICAgICAgZXJyID0gdm9pZCAwO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHJldCA9IF90aGlzLm9wdGlvbnMucGFyc2UoZGF0YSwgdXJsKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIGVyciA9ICdmYWlsZWQgcGFyc2luZyAnICsgdXJsICsgJyB0byBqc29uJztcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXJyKSByZXR1cm4gY2FsbGJhY2soZXJyLCBmYWxzZSk7XG4gICAgICAgIGNhbGxiYWNrKG51bGwsIHJldCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdjcmVhdGUnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGUobGFuZ3VhZ2VzLCBuYW1lc3BhY2UsIGtleSwgZmFsbGJhY2tWYWx1ZSkge1xuICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgIGlmICh0eXBlb2YgbGFuZ3VhZ2VzID09PSAnc3RyaW5nJykgbGFuZ3VhZ2VzID0gW2xhbmd1YWdlc107XG5cbiAgICAgIHZhciBwYXlsb2FkID0ge307XG4gICAgICBwYXlsb2FkW2tleV0gPSBmYWxsYmFja1ZhbHVlIHx8ICcnO1xuXG4gICAgICBsYW5ndWFnZXMuZm9yRWFjaChmdW5jdGlvbiAobG5nKSB7XG4gICAgICAgIHZhciB1cmwgPSBfdGhpczIuc2VydmljZXMuaW50ZXJwb2xhdG9yLmludGVycG9sYXRlKF90aGlzMi5vcHRpb25zLmFkZFBhdGgsIHsgbG5nOiBsbmcsIG5zOiBuYW1lc3BhY2UgfSk7XG5cbiAgICAgICAgX3RoaXMyLm9wdGlvbnMuYWpheCh1cmwsIF90aGlzMi5vcHRpb25zLCBmdW5jdGlvbiAoZGF0YSwgeGhyKSB7XG4gICAgICAgICAgLy9jb25zdCBzdGF0dXNDb2RlID0geGhyLnN0YXR1cy50b1N0cmluZygpO1xuICAgICAgICAgIC8vIFRPRE86IGlmIHN0YXR1c0NvZGUgPT09IDR4eCBkbyBsb2dcbiAgICAgICAgfSwgcGF5bG9hZCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gQmFja2VuZDtcbn0oKTtcblxuQmFja2VuZC50eXBlID0gJ2JhY2tlbmQnO1xuXG5yZXR1cm4gQmFja2VuZDtcblxufSkpKTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vdGVtcC9leHRlcm5hbC9pMThuZXh0L3NjcmlwdHMvaTE4bmV4dFhIUkJhY2tlbmQuanNcbi8vIG1vZHVsZSBpZCA9IDVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiKGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcbiAgdHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnID8gbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCkgOlxuICB0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoZmFjdG9yeSkgOlxuICAoZ2xvYmFsLmpxdWVyeUkxOG5leHQgPSBmYWN0b3J5KCkpO1xufSh0aGlzLCAoZnVuY3Rpb24gKCkgeyAndXNlIHN0cmljdCc7XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbnZhciBkZWZhdWx0cyA9IHtcbiAgdE5hbWU6ICd0JyxcbiAgaTE4bk5hbWU6ICdpMThuJyxcbiAgaGFuZGxlTmFtZTogJ2xvY2FsaXplJyxcbiAgc2VsZWN0b3JBdHRyOiAnZGF0YS1pMThuJyxcbiAgdGFyZ2V0QXR0cjogJ2kxOG4tdGFyZ2V0JyxcbiAgb3B0aW9uc0F0dHI6ICdpMThuLW9wdGlvbnMnLFxuICB1c2VPcHRpb25zQXR0cjogZmFsc2UsXG4gIHBhcnNlRGVmYXVsdFZhbHVlRnJvbUNvbnRlbnQ6IHRydWVcbn07XG5cbmZ1bmN0aW9uIGluaXQoaTE4bmV4dCwgJCkge1xuICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDoge307XG5cblxuICBvcHRpb25zID0gX2V4dGVuZHMoe30sIGRlZmF1bHRzLCBvcHRpb25zKTtcblxuICBmdW5jdGlvbiBwYXJzZShlbGUsIGtleSwgb3B0cykge1xuICAgIGlmIChrZXkubGVuZ3RoID09PSAwKSByZXR1cm47XG5cbiAgICB2YXIgYXR0ciA9ICd0ZXh0JztcblxuICAgIGlmIChrZXkuaW5kZXhPZignWycpID09PSAwKSB7XG4gICAgICB2YXIgcGFydHMgPSBrZXkuc3BsaXQoJ10nKTtcbiAgICAgIGtleSA9IHBhcnRzWzFdO1xuICAgICAgYXR0ciA9IHBhcnRzWzBdLnN1YnN0cigxLCBwYXJ0c1swXS5sZW5ndGggLSAxKTtcbiAgICB9XG5cbiAgICBpZiAoa2V5LmluZGV4T2YoJzsnKSA9PT0ga2V5Lmxlbmd0aCAtIDEpIHtcbiAgICAgIGtleSA9IGtleS5zdWJzdHIoMCwga2V5Lmxlbmd0aCAtIDIpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGV4dGVuZERlZmF1bHQobywgdmFsKSB7XG4gICAgICBpZiAoIW9wdGlvbnMucGFyc2VEZWZhdWx0VmFsdWVGcm9tQ29udGVudCkgcmV0dXJuIG87XG4gICAgICByZXR1cm4gX2V4dGVuZHMoe30sIG8sIHsgZGVmYXVsdFZhbHVlOiB2YWwgfSk7XG4gICAgfVxuXG4gICAgaWYgKGF0dHIgPT09ICdodG1sJykge1xuICAgICAgZWxlLmh0bWwoaTE4bmV4dC50KGtleSwgZXh0ZW5kRGVmYXVsdChvcHRzLCBlbGUuaHRtbCgpKSkpO1xuICAgIH0gZWxzZSBpZiAoYXR0ciA9PT0gJ3RleHQnKSB7XG4gICAgICBlbGUudGV4dChpMThuZXh0LnQoa2V5LCBleHRlbmREZWZhdWx0KG9wdHMsIGVsZS50ZXh0KCkpKSk7XG4gICAgfSBlbHNlIGlmIChhdHRyID09PSAncHJlcGVuZCcpIHtcbiAgICAgIGVsZS5wcmVwZW5kKGkxOG5leHQudChrZXksIGV4dGVuZERlZmF1bHQob3B0cywgZWxlLmh0bWwoKSkpKTtcbiAgICB9IGVsc2UgaWYgKGF0dHIgPT09ICdhcHBlbmQnKSB7XG4gICAgICBlbGUuYXBwZW5kKGkxOG5leHQudChrZXksIGV4dGVuZERlZmF1bHQob3B0cywgZWxlLmh0bWwoKSkpKTtcbiAgICB9IGVsc2UgaWYgKGF0dHIuaW5kZXhPZignZGF0YS0nKSA9PT0gMCkge1xuICAgICAgdmFyIGRhdGFBdHRyID0gYXR0ci5zdWJzdHIoJ2RhdGEtJy5sZW5ndGgpO1xuICAgICAgdmFyIHRyYW5zbGF0ZWQgPSBpMThuZXh0LnQoa2V5LCBleHRlbmREZWZhdWx0KG9wdHMsIGVsZS5kYXRhKGRhdGFBdHRyKSkpO1xuXG4gICAgICAvLyB3ZSBjaGFuZ2UgaW50byB0aGUgZGF0YSBjYWNoZVxuICAgICAgZWxlLmRhdGEoZGF0YUF0dHIsIHRyYW5zbGF0ZWQpO1xuICAgICAgLy8gd2UgY2hhbmdlIGludG8gdGhlIGRvbVxuICAgICAgZWxlLmF0dHIoYXR0ciwgdHJhbnNsYXRlZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVsZS5hdHRyKGF0dHIsIGkxOG5leHQudChrZXksIGV4dGVuZERlZmF1bHQob3B0cywgZWxlLmF0dHIoYXR0cikpKSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gbG9jYWxpemUoZWxlLCBvcHRzKSB7XG4gICAgdmFyIGtleSA9IGVsZS5hdHRyKG9wdGlvbnMuc2VsZWN0b3JBdHRyKTtcbiAgICBpZiAoIWtleSAmJiB0eXBlb2Yga2V5ICE9PSAndW5kZWZpbmVkJyAmJiBrZXkgIT09IGZhbHNlKSBrZXkgPSBlbGUudGV4dCgpIHx8IGVsZS52YWwoKTtcbiAgICBpZiAoIWtleSkgcmV0dXJuO1xuXG4gICAgdmFyIHRhcmdldCA9IGVsZSxcbiAgICAgICAgdGFyZ2V0U2VsZWN0b3IgPSBlbGUuZGF0YShvcHRpb25zLnRhcmdldEF0dHIpO1xuXG4gICAgaWYgKHRhcmdldFNlbGVjdG9yKSB0YXJnZXQgPSBlbGUuZmluZCh0YXJnZXRTZWxlY3RvcikgfHwgZWxlO1xuXG4gICAgaWYgKCFvcHRzICYmIG9wdGlvbnMudXNlT3B0aW9uc0F0dHIgPT09IHRydWUpIG9wdHMgPSBlbGUuZGF0YShvcHRpb25zLm9wdGlvbnNBdHRyKTtcblxuICAgIG9wdHMgPSBvcHRzIHx8IHt9O1xuXG4gICAgaWYgKGtleS5pbmRleE9mKCc7JykgPj0gMCkge1xuICAgICAgdmFyIGtleXMgPSBrZXkuc3BsaXQoJzsnKTtcblxuICAgICAgJC5lYWNoKGtleXMsIGZ1bmN0aW9uIChtLCBrKSB7XG4gICAgICAgIGlmIChrICE9PSAnJykgcGFyc2UodGFyZ2V0LCBrLCBvcHRzKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBwYXJzZSh0YXJnZXQsIGtleSwgb3B0cyk7XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMudXNlT3B0aW9uc0F0dHIgPT09IHRydWUpIHtcbiAgICAgIHZhciBjbG9uZSA9IHt9O1xuICAgICAgY2xvbmUgPSBfZXh0ZW5kcyh7IGNsb25lOiBjbG9uZSB9LCBvcHRzKTtcblxuICAgICAgZGVsZXRlIGNsb25lLmxuZztcbiAgICAgIGVsZS5kYXRhKG9wdGlvbnMub3B0aW9uc0F0dHIsIGNsb25lKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBoYW5kbGUob3B0cykge1xuICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgLy8gbG9jYWxpemUgZWxlbWVudCBpdHNlbGZcbiAgICAgIGxvY2FsaXplKCQodGhpcyksIG9wdHMpO1xuXG4gICAgICAvLyBsb2NhbGl6ZSBjaGlsZHJlblxuICAgICAgdmFyIGVsZW1lbnRzID0gJCh0aGlzKS5maW5kKCdbJyArIG9wdGlvbnMuc2VsZWN0b3JBdHRyICsgJ10nKTtcbiAgICAgIGVsZW1lbnRzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICBsb2NhbGl6ZSgkKHRoaXMpLCBvcHRzKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xuXG4gIC8vICQudCAkLmkxOG4gc2hvcnRjdXRcbiAgJFtvcHRpb25zLnROYW1lXSA9IGkxOG5leHQudC5iaW5kKGkxOG5leHQpO1xuICAkW29wdGlvbnMuaTE4bk5hbWVdID0gaTE4bmV4dDtcblxuICAvLyBzZWxlY3RvciBmdW5jdGlvbiAkKG15U2VsZWN0b3IpLmxvY2FsaXplKG9wdHMpO1xuICAkLmZuW29wdGlvbnMuaGFuZGxlTmFtZV0gPSBoYW5kbGU7XG59XG5cbnZhciBpbmRleCA9IHtcbiAgaW5pdDogaW5pdFxufTtcblxucmV0dXJuIGluZGV4O1xuXG59KSkpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vdGVtcC9leHRlcm5hbC9pMThuZXh0L3NjcmlwdHMvanF1ZXJ5LWkxOG5leHQuanNcbi8vIG1vZHVsZSBpZCA9IDZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzdfXztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCB7XCJyb290XCI6XCJDRFBcIixcImNvbW1vbmpzXCI6XCJjZHAuY29yZVwiLFwiY29tbW9uanMyXCI6XCJjZHAuY29yZVwiLFwiYW1kXCI6XCJjZHAuY29yZVwifVxuLy8gbW9kdWxlIGlkID0gN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfNl9fO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIHtcInJvb3RcIjpcImpRdWVyeVwiLFwiY29tbW9uanNcIjpcImpxdWVyeVwiLFwiY29tbW9uanMyXCI6XCJqcXVlcnlcIixcImFtZFwiOlwianF1ZXJ5XCJ9XG4vLyBtb2R1bGUgaWQgPSA2XG4vLyBtb2R1bGUgY2h1bmtzID0gIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uLy4uL2V4dGVybmFsL2luY2x1ZGUvcmVxdWlyZS5kLnRzXCIgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uLy4uL2V4dGVybmFsL2luY2x1ZGUvanF1ZXJ5LmQudHNcIiAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vLi4vZXh0ZXJuYWwvaW5jbHVkZS9pMThuZXh0LmQudHNcIiAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vLi4vZXh0ZXJuYWwvaW5jbHVkZS9jZHAuY29yZS5kLnRzXCIgLz5cclxuXHJcbi8qIHRzbGludDpkaXNhYmxlOm1heC1saW5lLWxlbmd0aCAqL1xyXG5cclxubmFtZXNwYWNlIENEUCB7XHJcblxyXG4gICAgY29uc3QgVEFHOiBzdHJpbmcgPSBcIltDRFAuaTE4bl0gXCI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBpMThuZXh0IOOBuOOBruODgOOCpOODrOOCr+ODiOOCouOCr+OCu+OCuVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgbGV0IGkxOG46IEkxOG5leHQuSTE4bjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBpbnRlcmZhY2UgSTE4Tk9wdGlvbnNcclxuICAgICAqIEBicmllZiBpMThOZXh0IOioreWumueUqOOCquODl+OCt+ODp+ODs1xyXG4gICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIEkxOE5PcHRpb25zIHtcclxuICAgICAgICBmYWxsYmFja1Jlc291cmNlcz86IHsgW2xuZzogc3RyaW5nXTogeyBbbnM6IHN0cmluZ106IHN0cmluZyB9IH07XHJcbiAgICAgICAgcHJlbG9hZD86IHN0cmluZ1tdO1xyXG4gICAgICAgIG9wdGlvbnM/OiBJMThuZXh0Lk9wdGlvbnM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgKiBpbml0aWFsaXplIGkxOG5leHQuXHJcbiAgICAgKlxyXG4gICAgICogXFx+amFwYW5lc2VcclxuICAgICAqIGkxOG5leHQg44Gu5Yid5pyf5YyWXHJcbiAgICAgKlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqIEByZXR1cm4ge2pRdWVyeVByb21pc2V9XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBpbml0aWFsaXplSTE4TihvcHRpb25zPzogSTE4Tk9wdGlvbnMpOiBKUXVlcnlQcm9taXNlPGFueT4ge1xyXG4gICAgICAgIGxldCBkZiA9ICQuRGVmZXJyZWQoKTtcclxuICAgICAgICBsZXQgaTE4blNldHRpbmdzOiBJMThOT3B0aW9ucyA9IG9wdGlvbnMgfHwge307XHJcblxyXG4gICAgICAgIGxldCBpMThuT3B0aW9uczogSTE4bmV4dC5PcHRpb25zID0gKChyZXNvdXJjZXM6IHsgW2xuZzogc3RyaW5nXTogeyBbbnM6IHN0cmluZ106IHN0cmluZyB9IH0pID0+IHtcclxuICAgICAgICAgICAgaWYgKHJlc291cmNlcykge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgbG5nIGluIHJlc291cmNlcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXNvdXJjZXMuaGFzT3duUHJvcGVydHkobG5nKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBucyBpbiByZXNvdXJjZXNbbG5nXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc291cmNlc1tsbmddLmhhc093blByb3BlcnR5KG5zKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc291cmNlc1tsbmddW25zXSA9IGdldExvY2FsZUZhbGxiYWNrUmVzb3VyY2UocmVzb3VyY2VzW2xuZ11bbnNdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGkxOG5TZXR0aW5ncy5vcHRpb25zLnJlc291cmNlcyA9IDxhbnk+cmVzb3VyY2VzO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGkxOG5TZXR0aW5ncy5vcHRpb25zO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGkxOG5TZXR0aW5ncy5vcHRpb25zO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkoaTE4blNldHRpbmdzLmZhbGxiYWNrUmVzb3VyY2VzKTtcclxuXHJcbiAgICAgICAgcmVxdWlyZShbXCJqcXVlcnlJMThuZXh0XCJdLCAoJDE4TmV4dDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIHJlcXVpcmUoW1xyXG4gICAgICAgICAgICAgICAgXCJpMThuZXh0XCIsXHJcbiAgICAgICAgICAgICAgICBcImkxOG5leHRYSFJCYWNrZW5kXCIsXHJcbiAgICAgICAgICAgICAgICBcImkxOG5leHRMb2NhbFN0b3JhZ2VDYWNoZVwiLFxyXG4gICAgICAgICAgICAgICAgXCJpMThuZXh0U3ByaW50ZlBvc3RQcm9jZXNzb3JcIixcclxuICAgICAgICAgICAgICAgIFwiaTE4bmV4dEJyb3dzZXJMYW5ndWFnZURldGVjdG9yXCIsXHJcbiAgICAgICAgICAgIF0sIChpMThuZXh0OiBJMThuZXh0LkkxOG5cclxuICAgICAgICAgICAgICAgICwgQmFja2VuZDogYW55XHJcbiAgICAgICAgICAgICAgICAsIENhY2hlOiBhbnlcclxuICAgICAgICAgICAgICAgICwgUG9zdFByb2Nlc3NvcjogYW55XHJcbiAgICAgICAgICAgICAgICAsIExhbmd1YWdlRGV0ZWN0b3I6IGFueVxyXG4gICAgICAgICAgICApID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpMThuZXh0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC51c2UoQmFja2VuZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnVzZShDYWNoZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnVzZShQb3N0UHJvY2Vzc29yKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAudXNlKExhbmd1YWdlRGV0ZWN0b3IpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5pbml0KGkxOG5PcHRpb25zLCAoZXJyb3I6IGFueSwgdDogSTE4bmV4dC5UcmFuc2xhdGlvbkZ1bmN0aW9uKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkMThOZXh0LmluaXQoaTE4bmV4dCwgJCwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHROYW1lOiBcInRcIiwgICAgICAgICAgICAgICAgICAgICAgICAgLy8gLS0+IGFwcGVuZHMgJC50ID0gaTE4bmV4dC50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaTE4bk5hbWU6IFwiaTE4blwiLCAgICAgICAgICAgICAgICAgICAvLyAtLT4gYXBwZW5kcyAkLmkxOG4gPSBpMThuZXh0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlTmFtZTogXCJsb2NhbGl6ZVwiLCAgICAgICAgICAgICAvLyAtLT4gYXBwZW5kcyAkKHNlbGVjdG9yKS5sb2NhbGl6ZShvcHRzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RvckF0dHI6IFwiZGF0YS1pMThuXCIsICAgICAgICAgIC8vIHNlbGVjdG9yIGZvciB0cmFuc2xhdGluZyBlbGVtZW50c1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldEF0dHI6IFwiaTE4bi10YXJnZXRcIiwgICAgICAgICAgLy8gZGF0YS0oKSBhdHRyaWJ1dGUgdG8gZ3JhYiB0YXJnZXQgZWxlbWVudCB0byB0cmFuc2xhdGUgKGlmIGRpZmZyZW50IHRoZW4gaXRzZWxmKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnNBdHRyOiBcImkxOG4tb3B0aW9uc1wiLCAgICAgICAgLy8gZGF0YS0oKSBhdHRyaWJ1dGUgdGhhdCBjb250YWlucyBvcHRpb25zLCB3aWxsIGxvYWQvc2V0IGlmIHVzZU9wdGlvbnNBdHRyID0gdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZU9wdGlvbnNBdHRyOiBmYWxzZSwgICAgICAgICAgICAgIC8vIG5vIHVzZSBvcHRpb25zQXR0clxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlRGVmYXVsdFZhbHVlRnJvbUNvbnRlbnQ6IHRydWUgIC8vIHBhcnNlcyBkZWZhdWx0IHZhbHVlcyBmcm9tIGNvbnRlbnQgZWxlLnZhbCBvciBlbGUudGV4dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpMThuZXh0IDMuNC4xOiByZXNvdXJjZXMg44GM5oyH5a6a44GV44KM44KL44GoIHByZWxvYWQg44GM6Kqt44G/6L6844G+44KM44Gq44GE44Gf44KB44CB5YaN6Kqt44G/6L6844G/5Yem55CG44KS6KGM44GGLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkxOG5leHQub3B0aW9ucy5yZXNvdXJjZXMgJiYgaTE4bmV4dC5vcHRpb25zLnByZWxvYWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBvcHRpb25zIOOBi+OCieODl+ODreODkeODhuOCo+OCkuS4gOaXpuWJiumZpC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgX3ByZWxvYWQgPSBpMThuZXh0Lm9wdGlvbnMucHJlbG9hZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgX3Jlc291cmNlcyA9IGkxOG5leHQub3B0aW9ucy5yZXNvdXJjZXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGkxOG5leHQub3B0aW9ucy5yZXNvdXJjZXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGkxOG5leHQub3B0aW9ucy5wcmVsb2FkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkxOG5leHQubG9hZExhbmd1YWdlcyhfcHJlbG9hZCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBvcHRpb25zIOOCkuWFg+OBq+aIu+OBmVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpMThuZXh0Lm9wdGlvbnMucmVzb3VyY2VzID0gX3Jlc291cmNlcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaTE4bmV4dC5vcHRpb25zLnByZWxvYWQgPSBfcHJlbG9hZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ0RQLmkxOG4gPSBpMThuZXh0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZi5yZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENEUC5pMThuID0gaTE4bmV4dDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZi5yZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiBkZi5wcm9taXNlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgKiBnZXQgc3RyaW5nIHJlc291cmNlIGZvciBmYWxsYmFjay5cclxuICAgICAqXHJcbiAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICogRmFsbGJhY2sg55So44Ot44O844Kr44Op44Kk44K644Oq44K944O844K544Gu5Y+W5b6XXHJcbiAgICAgKlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqIEByZXR1cm4ge09iamVjdH1cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gZ2V0TG9jYWxlRmFsbGJhY2tSZXNvdXJjZShwYXRoOiBzdHJpbmcpOiBhbnkge1xyXG4gICAgICAgIGxldCBqc29uOiBKU09OO1xyXG4gICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgIHVybDogdG9VcmwocGF0aCksXHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgICAgICAgICAgYXN5bmM6IGZhbHNlLFxyXG4gICAgICAgICAgICBkYXRhVHlwZTogXCJqc29uXCIsXHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IChkYXRhOiBKU09OKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBqc29uID0gZGF0YTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZXJyb3I6ICh4aHI6IEpRdWVyeVhIUiwgc3RhdHVzOiBzdHJpbmcpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFRBRyArIFwiYWpheCByZXF1ZXN0IGZhaWxlZC4gc3RhdHVzOiBcIiArIHN0YXR1cyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4ganNvbjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAqIENvbnZlcnQgcGF0aCB0byBVUkwuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHBhdGgge1N0cmluZ30gW2luXSBwYXRoIHN0cmluZ1xyXG4gICAgICpcclxuICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgKiBwYXRoIOOCkiBVUkwg44Gr5aSJ5o+bXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHBhdGgge1N0cmluZ30gW2luXSDjg5HjgrnjgpLmjIflrprjgIJcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gdG9VcmwocGF0aDogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgICAgICBpZiAoIXBhdGggJiYgXCIvXCIgIT09IHBhdGhbMF0pIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihUQUcgKyBcImludmFsaWQgcGF0aC4gcGF0aDogXCIgKyBwYXRoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gQ0RQLndlYlJvb3QgKyBwYXRoLnNsaWNlKDEpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbn1cclxuXHJcbmRlY2xhcmUgbW9kdWxlIFwiY2RwLmkxOG5cIiB7XHJcbiAgICBleHBvcnQgPSBDRFA7XHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGNkcDovLy9DRFAvaTE4bi50cyIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGlkZW50aXR5IGZ1bmN0aW9uIGZvciBjYWxsaW5nIGhhcm1vbnkgaW1wb3J0cyB3aXRoIHRoZSBjb3JyZWN0IGNvbnRleHRcbiBcdF9fd2VicGFja19yZXF1aXJlX18uaSA9IGZ1bmN0aW9uKHZhbHVlKSB7IHJldHVybiB2YWx1ZTsgfTtcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7XG4gXHRcdFx0XHRjb25maWd1cmFibGU6IGZhbHNlLFxuIFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcbiBcdFx0XHRcdGdldDogZ2V0dGVyXG4gXHRcdFx0fSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gNSk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjay9ib290c3RyYXAgMzQ5M2Q0YzA2YzFiZWI1MzAxMzAiLCIvKioqIElNUE9SVFMgRlJPTSBpbXBvcnRzLWxvYWRlciAqKiovXG4oZnVuY3Rpb24oKSB7XG5cbi8qIVxyXG4qIGpRdWVyeSBNb2JpbGUgMS40LjVcclxuKiBHaXQgSEVBRCBoYXNoOiA2OGU1NWU3OGIyOTI2MzRkMzk5MWM3OTVmMDZmNWUzN2E1MTJkZWNjIDw+IERhdGU6IEZyaSBPY3QgMzEgMjAxNCAxNzozMzozMCBVVENcclxuKiBodHRwOi8vanF1ZXJ5bW9iaWxlLmNvbVxyXG4qXHJcbiogQ29weXJpZ2h0IDIwMTAsIDIwMTQgalF1ZXJ5IEZvdW5kYXRpb24sIEluYy4gYW5kIG90aGVyY29udHJpYnV0b3JzXHJcbiogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxyXG4qIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2VcclxuKlxyXG4qL1xyXG5cclxuXHJcbihmdW5jdGlvbiAoIHJvb3QsIGRvYywgZmFjdG9yeSApIHtcclxuXHRpZiAoIHR5cGVvZiBkZWZpbmUgPT09IFwiZnVuY3Rpb25cIiAmJiBkZWZpbmUuYW1kICkge1xyXG5cdFx0Ly8gQU1ELiBSZWdpc3RlciBhcyBhbiBhbm9ueW1vdXMgbW9kdWxlLlxyXG5cdFx0ZGVmaW5lKCBbIFwianF1ZXJ5XCIgXSwgZnVuY3Rpb24gKCAkICkge1xyXG5cdFx0XHRmYWN0b3J5KCAkLCByb290LCBkb2MgKTtcclxuXHRcdFx0cmV0dXJuICQubW9iaWxlO1xyXG5cdFx0fSk7XHJcblx0fSBlbHNlIHtcclxuXHRcdC8vIEJyb3dzZXIgZ2xvYmFsc1xyXG5cdFx0ZmFjdG9yeSggcm9vdC5qUXVlcnksIHJvb3QsIGRvYyApO1xyXG5cdH1cclxufSggdGhpcywgZG9jdW1lbnQsIGZ1bmN0aW9uICggalF1ZXJ5LCB3aW5kb3csIGRvY3VtZW50LCB1bmRlZmluZWQgKSB7XHJcbihmdW5jdGlvbiggJCApIHtcclxuXHQkLm1vYmlsZSA9IHt9O1xyXG59KCBqUXVlcnkgKSk7XHJcblxyXG4vKiFcclxuICogalF1ZXJ5IFVJIENvcmUgYzBhYjcxMDU2YjkzNjYyN2U4YTc4MjFmMDNjMDQ0YWVjNjI4MGE0MFxyXG4gKiBodHRwOi8vanF1ZXJ5dWkuY29tXHJcbiAqXHJcbiAqIENvcHlyaWdodCAyMDEzIGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnNcclxuICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxyXG4gKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlXHJcbiAqXHJcbiAqIGh0dHA6Ly9hcGkuanF1ZXJ5dWkuY29tL2NhdGVnb3J5L3VpLWNvcmUvXHJcbiAqL1xyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcbnZhciB1dWlkID0gMCxcclxuXHRydW5pcXVlSWQgPSAvXnVpLWlkLVxcZCskLztcclxuXHJcbi8vICQudWkgbWlnaHQgZXhpc3QgZnJvbSBjb21wb25lbnRzIHdpdGggbm8gZGVwZW5kZW5jaWVzLCBlLmcuLCAkLnVpLnBvc2l0aW9uXHJcbiQudWkgPSAkLnVpIHx8IHt9O1xyXG5cclxuJC5leHRlbmQoICQudWksIHtcclxuXHR2ZXJzaW9uOiBcImMwYWI3MTA1NmI5MzY2MjdlOGE3ODIxZjAzYzA0NGFlYzYyODBhNDBcIixcclxuXHJcblx0a2V5Q29kZToge1xyXG5cdFx0QkFDS1NQQUNFOiA4LFxyXG5cdFx0Q09NTUE6IDE4OCxcclxuXHRcdERFTEVURTogNDYsXHJcblx0XHRET1dOOiA0MCxcclxuXHRcdEVORDogMzUsXHJcblx0XHRFTlRFUjogMTMsXHJcblx0XHRFU0NBUEU6IDI3LFxyXG5cdFx0SE9NRTogMzYsXHJcblx0XHRMRUZUOiAzNyxcclxuXHRcdFBBR0VfRE9XTjogMzQsXHJcblx0XHRQQUdFX1VQOiAzMyxcclxuXHRcdFBFUklPRDogMTkwLFxyXG5cdFx0UklHSFQ6IDM5LFxyXG5cdFx0U1BBQ0U6IDMyLFxyXG5cdFx0VEFCOiA5LFxyXG5cdFx0VVA6IDM4XHJcblx0fVxyXG59KTtcclxuXHJcbi8vIHBsdWdpbnNcclxuJC5mbi5leHRlbmQoe1xyXG5cdGZvY3VzOiAoZnVuY3Rpb24oIG9yaWcgKSB7XHJcblx0XHRyZXR1cm4gZnVuY3Rpb24oIGRlbGF5LCBmbiApIHtcclxuXHRcdFx0cmV0dXJuIHR5cGVvZiBkZWxheSA9PT0gXCJudW1iZXJcIiA/XHJcblx0XHRcdFx0dGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0dmFyIGVsZW0gPSB0aGlzO1xyXG5cdFx0XHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdFx0JCggZWxlbSApLmZvY3VzKCk7XHJcblx0XHRcdFx0XHRcdGlmICggZm4gKSB7XHJcblx0XHRcdFx0XHRcdFx0Zm4uY2FsbCggZWxlbSApO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9LCBkZWxheSApO1xyXG5cdFx0XHRcdH0pIDpcclxuXHRcdFx0XHRvcmlnLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcclxuXHRcdH07XHJcblx0fSkoICQuZm4uZm9jdXMgKSxcclxuXHJcblx0c2Nyb2xsUGFyZW50OiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBzY3JvbGxQYXJlbnQ7XHJcblx0XHRpZiAoKCQudWkuaWUgJiYgKC8oc3RhdGljfHJlbGF0aXZlKS8pLnRlc3QodGhpcy5jc3MoXCJwb3NpdGlvblwiKSkpIHx8ICgvYWJzb2x1dGUvKS50ZXN0KHRoaXMuY3NzKFwicG9zaXRpb25cIikpKSB7XHJcblx0XHRcdHNjcm9sbFBhcmVudCA9IHRoaXMucGFyZW50cygpLmZpbHRlcihmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRyZXR1cm4gKC8ocmVsYXRpdmV8YWJzb2x1dGV8Zml4ZWQpLykudGVzdCgkLmNzcyh0aGlzLFwicG9zaXRpb25cIikpICYmICgvKGF1dG98c2Nyb2xsKS8pLnRlc3QoJC5jc3ModGhpcyxcIm92ZXJmbG93XCIpKyQuY3NzKHRoaXMsXCJvdmVyZmxvdy15XCIpKyQuY3NzKHRoaXMsXCJvdmVyZmxvdy14XCIpKTtcclxuXHRcdFx0fSkuZXEoMCk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRzY3JvbGxQYXJlbnQgPSB0aGlzLnBhcmVudHMoKS5maWx0ZXIoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0cmV0dXJuICgvKGF1dG98c2Nyb2xsKS8pLnRlc3QoJC5jc3ModGhpcyxcIm92ZXJmbG93XCIpKyQuY3NzKHRoaXMsXCJvdmVyZmxvdy15XCIpKyQuY3NzKHRoaXMsXCJvdmVyZmxvdy14XCIpKTtcclxuXHRcdFx0fSkuZXEoMCk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuICggL2ZpeGVkLyApLnRlc3QoIHRoaXMuY3NzKCBcInBvc2l0aW9uXCIpICkgfHwgIXNjcm9sbFBhcmVudC5sZW5ndGggPyAkKCB0aGlzWyAwIF0ub3duZXJEb2N1bWVudCB8fCBkb2N1bWVudCApIDogc2Nyb2xsUGFyZW50O1xyXG5cdH0sXHJcblxyXG5cdHVuaXF1ZUlkOiBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XHJcblx0XHRcdGlmICggIXRoaXMuaWQgKSB7XHJcblx0XHRcdFx0dGhpcy5pZCA9IFwidWktaWQtXCIgKyAoKyt1dWlkKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fSxcclxuXHJcblx0cmVtb3ZlVW5pcXVlSWQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcclxuXHRcdFx0aWYgKCBydW5pcXVlSWQudGVzdCggdGhpcy5pZCApICkge1xyXG5cdFx0XHRcdCQoIHRoaXMgKS5yZW1vdmVBdHRyKCBcImlkXCIgKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fVxyXG59KTtcclxuXHJcbi8vIHNlbGVjdG9yc1xyXG5mdW5jdGlvbiBmb2N1c2FibGUoIGVsZW1lbnQsIGlzVGFiSW5kZXhOb3ROYU4gKSB7XHJcblx0dmFyIG1hcCwgbWFwTmFtZSwgaW1nLFxyXG5cdFx0bm9kZU5hbWUgPSBlbGVtZW50Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XHJcblx0aWYgKCBcImFyZWFcIiA9PT0gbm9kZU5hbWUgKSB7XHJcblx0XHRtYXAgPSBlbGVtZW50LnBhcmVudE5vZGU7XHJcblx0XHRtYXBOYW1lID0gbWFwLm5hbWU7XHJcblx0XHRpZiAoICFlbGVtZW50LmhyZWYgfHwgIW1hcE5hbWUgfHwgbWFwLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgIT09IFwibWFwXCIgKSB7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHRcdGltZyA9ICQoIFwiaW1nW3VzZW1hcD0jXCIgKyBtYXBOYW1lICsgXCJdXCIgKVswXTtcclxuXHRcdHJldHVybiAhIWltZyAmJiB2aXNpYmxlKCBpbWcgKTtcclxuXHR9XHJcblx0cmV0dXJuICggL2lucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b258b2JqZWN0Ly50ZXN0KCBub2RlTmFtZSApID9cclxuXHRcdCFlbGVtZW50LmRpc2FibGVkIDpcclxuXHRcdFwiYVwiID09PSBub2RlTmFtZSA/XHJcblx0XHRcdGVsZW1lbnQuaHJlZiB8fCBpc1RhYkluZGV4Tm90TmFOIDpcclxuXHRcdFx0aXNUYWJJbmRleE5vdE5hTikgJiZcclxuXHRcdC8vIHRoZSBlbGVtZW50IGFuZCBhbGwgb2YgaXRzIGFuY2VzdG9ycyBtdXN0IGJlIHZpc2libGVcclxuXHRcdHZpc2libGUoIGVsZW1lbnQgKTtcclxufVxyXG5cclxuZnVuY3Rpb24gdmlzaWJsZSggZWxlbWVudCApIHtcclxuXHRyZXR1cm4gJC5leHByLmZpbHRlcnMudmlzaWJsZSggZWxlbWVudCApICYmXHJcblx0XHQhJCggZWxlbWVudCApLnBhcmVudHMoKS5hZGRCYWNrKCkuZmlsdGVyKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRyZXR1cm4gJC5jc3MoIHRoaXMsIFwidmlzaWJpbGl0eVwiICkgPT09IFwiaGlkZGVuXCI7XHJcblx0XHR9KS5sZW5ndGg7XHJcbn1cclxuXHJcbiQuZXh0ZW5kKCAkLmV4cHJbIFwiOlwiIF0sIHtcclxuXHRkYXRhOiAkLmV4cHIuY3JlYXRlUHNldWRvID9cclxuXHRcdCQuZXhwci5jcmVhdGVQc2V1ZG8oZnVuY3Rpb24oIGRhdGFOYW1lICkge1xyXG5cdFx0XHRyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7XHJcblx0XHRcdFx0cmV0dXJuICEhJC5kYXRhKCBlbGVtLCBkYXRhTmFtZSApO1xyXG5cdFx0XHR9O1xyXG5cdFx0fSkgOlxyXG5cdFx0Ly8gc3VwcG9ydDogalF1ZXJ5IDwxLjhcclxuXHRcdGZ1bmN0aW9uKCBlbGVtLCBpLCBtYXRjaCApIHtcclxuXHRcdFx0cmV0dXJuICEhJC5kYXRhKCBlbGVtLCBtYXRjaFsgMyBdICk7XHJcblx0XHR9LFxyXG5cclxuXHRmb2N1c2FibGU6IGZ1bmN0aW9uKCBlbGVtZW50ICkge1xyXG5cdFx0cmV0dXJuIGZvY3VzYWJsZSggZWxlbWVudCwgIWlzTmFOKCAkLmF0dHIoIGVsZW1lbnQsIFwidGFiaW5kZXhcIiApICkgKTtcclxuXHR9LFxyXG5cclxuXHR0YWJiYWJsZTogZnVuY3Rpb24oIGVsZW1lbnQgKSB7XHJcblx0XHR2YXIgdGFiSW5kZXggPSAkLmF0dHIoIGVsZW1lbnQsIFwidGFiaW5kZXhcIiApLFxyXG5cdFx0XHRpc1RhYkluZGV4TmFOID0gaXNOYU4oIHRhYkluZGV4ICk7XHJcblx0XHRyZXR1cm4gKCBpc1RhYkluZGV4TmFOIHx8IHRhYkluZGV4ID49IDAgKSAmJiBmb2N1c2FibGUoIGVsZW1lbnQsICFpc1RhYkluZGV4TmFOICk7XHJcblx0fVxyXG59KTtcclxuXHJcbi8vIHN1cHBvcnQ6IGpRdWVyeSA8MS44XHJcbmlmICggISQoIFwiPGE+XCIgKS5vdXRlcldpZHRoKCAxICkuanF1ZXJ5ICkge1xyXG5cdCQuZWFjaCggWyBcIldpZHRoXCIsIFwiSGVpZ2h0XCIgXSwgZnVuY3Rpb24oIGksIG5hbWUgKSB7XHJcblx0XHR2YXIgc2lkZSA9IG5hbWUgPT09IFwiV2lkdGhcIiA/IFsgXCJMZWZ0XCIsIFwiUmlnaHRcIiBdIDogWyBcIlRvcFwiLCBcIkJvdHRvbVwiIF0sXHJcblx0XHRcdHR5cGUgPSBuYW1lLnRvTG93ZXJDYXNlKCksXHJcblx0XHRcdG9yaWcgPSB7XHJcblx0XHRcdFx0aW5uZXJXaWR0aDogJC5mbi5pbm5lcldpZHRoLFxyXG5cdFx0XHRcdGlubmVySGVpZ2h0OiAkLmZuLmlubmVySGVpZ2h0LFxyXG5cdFx0XHRcdG91dGVyV2lkdGg6ICQuZm4ub3V0ZXJXaWR0aCxcclxuXHRcdFx0XHRvdXRlckhlaWdodDogJC5mbi5vdXRlckhlaWdodFxyXG5cdFx0XHR9O1xyXG5cclxuXHRcdGZ1bmN0aW9uIHJlZHVjZSggZWxlbSwgc2l6ZSwgYm9yZGVyLCBtYXJnaW4gKSB7XHJcblx0XHRcdCQuZWFjaCggc2lkZSwgZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0c2l6ZSAtPSBwYXJzZUZsb2F0KCAkLmNzcyggZWxlbSwgXCJwYWRkaW5nXCIgKyB0aGlzICkgKSB8fCAwO1xyXG5cdFx0XHRcdGlmICggYm9yZGVyICkge1xyXG5cdFx0XHRcdFx0c2l6ZSAtPSBwYXJzZUZsb2F0KCAkLmNzcyggZWxlbSwgXCJib3JkZXJcIiArIHRoaXMgKyBcIldpZHRoXCIgKSApIHx8IDA7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmICggbWFyZ2luICkge1xyXG5cdFx0XHRcdFx0c2l6ZSAtPSBwYXJzZUZsb2F0KCAkLmNzcyggZWxlbSwgXCJtYXJnaW5cIiArIHRoaXMgKSApIHx8IDA7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdFx0cmV0dXJuIHNpemU7XHJcblx0XHR9XHJcblxyXG5cdFx0JC5mblsgXCJpbm5lclwiICsgbmFtZSBdID0gZnVuY3Rpb24oIHNpemUgKSB7XHJcblx0XHRcdGlmICggc2l6ZSA9PT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRcdHJldHVybiBvcmlnWyBcImlubmVyXCIgKyBuYW1lIF0uY2FsbCggdGhpcyApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdCQoIHRoaXMgKS5jc3MoIHR5cGUsIHJlZHVjZSggdGhpcywgc2l6ZSApICsgXCJweFwiICk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fTtcclxuXHJcblx0XHQkLmZuWyBcIm91dGVyXCIgKyBuYW1lXSA9IGZ1bmN0aW9uKCBzaXplLCBtYXJnaW4gKSB7XHJcblx0XHRcdGlmICggdHlwZW9mIHNpemUgIT09IFwibnVtYmVyXCIgKSB7XHJcblx0XHRcdFx0cmV0dXJuIG9yaWdbIFwib3V0ZXJcIiArIG5hbWUgXS5jYWxsKCB0aGlzLCBzaXplICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0JCggdGhpcykuY3NzKCB0eXBlLCByZWR1Y2UoIHRoaXMsIHNpemUsIHRydWUsIG1hcmdpbiApICsgXCJweFwiICk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fTtcclxuXHR9KTtcclxufVxyXG5cclxuLy8gc3VwcG9ydDogalF1ZXJ5IDwxLjhcclxuaWYgKCAhJC5mbi5hZGRCYWNrICkge1xyXG5cdCQuZm4uYWRkQmFjayA9IGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcclxuXHRcdHJldHVybiB0aGlzLmFkZCggc2VsZWN0b3IgPT0gbnVsbCA/XHJcblx0XHRcdHRoaXMucHJldk9iamVjdCA6IHRoaXMucHJldk9iamVjdC5maWx0ZXIoIHNlbGVjdG9yIClcclxuXHRcdCk7XHJcblx0fTtcclxufVxyXG5cclxuLy8gc3VwcG9ydDogalF1ZXJ5IDEuNi4xLCAxLjYuMiAoaHR0cDovL2J1Z3MuanF1ZXJ5LmNvbS90aWNrZXQvOTQxMylcclxuaWYgKCAkKCBcIjxhPlwiICkuZGF0YSggXCJhLWJcIiwgXCJhXCIgKS5yZW1vdmVEYXRhKCBcImEtYlwiICkuZGF0YSggXCJhLWJcIiApICkge1xyXG5cdCQuZm4ucmVtb3ZlRGF0YSA9IChmdW5jdGlvbiggcmVtb3ZlRGF0YSApIHtcclxuXHRcdHJldHVybiBmdW5jdGlvbigga2V5ICkge1xyXG5cdFx0XHRpZiAoIGFyZ3VtZW50cy5sZW5ndGggKSB7XHJcblx0XHRcdFx0cmV0dXJuIHJlbW92ZURhdGEuY2FsbCggdGhpcywgJC5jYW1lbENhc2UoIGtleSApICk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0cmV0dXJuIHJlbW92ZURhdGEuY2FsbCggdGhpcyApO1xyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cdH0pKCAkLmZuLnJlbW92ZURhdGEgKTtcclxufVxyXG5cclxuXHJcblxyXG5cclxuXHJcbi8vIGRlcHJlY2F0ZWRcclxuJC51aS5pZSA9ICEhL21zaWUgW1xcdy5dKy8uZXhlYyggbmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpICk7XHJcblxyXG4kLnN1cHBvcnQuc2VsZWN0c3RhcnQgPSBcIm9uc2VsZWN0c3RhcnRcIiBpbiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImRpdlwiICk7XHJcbiQuZm4uZXh0ZW5kKHtcclxuXHRkaXNhYmxlU2VsZWN0aW9uOiBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiB0aGlzLmJpbmQoICggJC5zdXBwb3J0LnNlbGVjdHN0YXJ0ID8gXCJzZWxlY3RzdGFydFwiIDogXCJtb3VzZWRvd25cIiApICtcclxuXHRcdFx0XCIudWktZGlzYWJsZVNlbGVjdGlvblwiLCBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0fSk7XHJcblx0fSxcclxuXHJcblx0ZW5hYmxlU2VsZWN0aW9uOiBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiB0aGlzLnVuYmluZCggXCIudWktZGlzYWJsZVNlbGVjdGlvblwiICk7XHJcblx0fSxcclxuXHJcblx0ekluZGV4OiBmdW5jdGlvbiggekluZGV4ICkge1xyXG5cdFx0aWYgKCB6SW5kZXggIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0cmV0dXJuIHRoaXMuY3NzKCBcInpJbmRleFwiLCB6SW5kZXggKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIHRoaXMubGVuZ3RoICkge1xyXG5cdFx0XHR2YXIgZWxlbSA9ICQoIHRoaXNbIDAgXSApLCBwb3NpdGlvbiwgdmFsdWU7XHJcblx0XHRcdHdoaWxlICggZWxlbS5sZW5ndGggJiYgZWxlbVsgMCBdICE9PSBkb2N1bWVudCApIHtcclxuXHRcdFx0XHQvLyBJZ25vcmUgei1pbmRleCBpZiBwb3NpdGlvbiBpcyBzZXQgdG8gYSB2YWx1ZSB3aGVyZSB6LWluZGV4IGlzIGlnbm9yZWQgYnkgdGhlIGJyb3dzZXJcclxuXHRcdFx0XHQvLyBUaGlzIG1ha2VzIGJlaGF2aW9yIG9mIHRoaXMgZnVuY3Rpb24gY29uc2lzdGVudCBhY3Jvc3MgYnJvd3NlcnNcclxuXHRcdFx0XHQvLyBXZWJLaXQgYWx3YXlzIHJldHVybnMgYXV0byBpZiB0aGUgZWxlbWVudCBpcyBwb3NpdGlvbmVkXHJcblx0XHRcdFx0cG9zaXRpb24gPSBlbGVtLmNzcyggXCJwb3NpdGlvblwiICk7XHJcblx0XHRcdFx0aWYgKCBwb3NpdGlvbiA9PT0gXCJhYnNvbHV0ZVwiIHx8IHBvc2l0aW9uID09PSBcInJlbGF0aXZlXCIgfHwgcG9zaXRpb24gPT09IFwiZml4ZWRcIiApIHtcclxuXHRcdFx0XHRcdC8vIElFIHJldHVybnMgMCB3aGVuIHpJbmRleCBpcyBub3Qgc3BlY2lmaWVkXHJcblx0XHRcdFx0XHQvLyBvdGhlciBicm93c2VycyByZXR1cm4gYSBzdHJpbmdcclxuXHRcdFx0XHRcdC8vIHdlIGlnbm9yZSB0aGUgY2FzZSBvZiBuZXN0ZWQgZWxlbWVudHMgd2l0aCBhbiBleHBsaWNpdCB2YWx1ZSBvZiAwXHJcblx0XHRcdFx0XHQvLyA8ZGl2IHN0eWxlPVwiei1pbmRleDogLTEwO1wiPjxkaXYgc3R5bGU9XCJ6LWluZGV4OiAwO1wiPjwvZGl2PjwvZGl2PlxyXG5cdFx0XHRcdFx0dmFsdWUgPSBwYXJzZUludCggZWxlbS5jc3MoIFwiekluZGV4XCIgKSwgMTAgKTtcclxuXHRcdFx0XHRcdGlmICggIWlzTmFOKCB2YWx1ZSApICYmIHZhbHVlICE9PSAwICkge1xyXG5cdFx0XHRcdFx0XHRyZXR1cm4gdmFsdWU7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGVsZW0gPSBlbGVtLnBhcmVudCgpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIDA7XHJcblx0fVxyXG59KTtcclxuXHJcbi8vICQudWkucGx1Z2luIGlzIGRlcHJlY2F0ZWQuIFVzZSAkLndpZGdldCgpIGV4dGVuc2lvbnMgaW5zdGVhZC5cclxuJC51aS5wbHVnaW4gPSB7XHJcblx0YWRkOiBmdW5jdGlvbiggbW9kdWxlLCBvcHRpb24sIHNldCApIHtcclxuXHRcdHZhciBpLFxyXG5cdFx0XHRwcm90byA9ICQudWlbIG1vZHVsZSBdLnByb3RvdHlwZTtcclxuXHRcdGZvciAoIGkgaW4gc2V0ICkge1xyXG5cdFx0XHRwcm90by5wbHVnaW5zWyBpIF0gPSBwcm90by5wbHVnaW5zWyBpIF0gfHwgW107XHJcblx0XHRcdHByb3RvLnBsdWdpbnNbIGkgXS5wdXNoKCBbIG9wdGlvbiwgc2V0WyBpIF0gXSApO1xyXG5cdFx0fVxyXG5cdH0sXHJcblx0Y2FsbDogZnVuY3Rpb24oIGluc3RhbmNlLCBuYW1lLCBhcmdzLCBhbGxvd0Rpc2Nvbm5lY3RlZCApIHtcclxuXHRcdHZhciBpLFxyXG5cdFx0XHRzZXQgPSBpbnN0YW5jZS5wbHVnaW5zWyBuYW1lIF07XHJcblxyXG5cdFx0aWYgKCAhc2V0ICkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCAhYWxsb3dEaXNjb25uZWN0ZWQgJiYgKCAhaW5zdGFuY2UuZWxlbWVudFsgMCBdLnBhcmVudE5vZGUgfHwgaW5zdGFuY2UuZWxlbWVudFsgMCBdLnBhcmVudE5vZGUubm9kZVR5cGUgPT09IDExICkgKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHRmb3IgKCBpID0gMDsgaSA8IHNldC5sZW5ndGg7IGkrKyApIHtcclxuXHRcdFx0aWYgKCBpbnN0YW5jZS5vcHRpb25zWyBzZXRbIGkgXVsgMCBdIF0gKSB7XHJcblx0XHRcdFx0c2V0WyBpIF1bIDEgXS5hcHBseSggaW5zdGFuY2UuZWxlbWVudCwgYXJncyApO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG59O1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB3aW5kb3csIHVuZGVmaW5lZCApIHtcclxuXHJcblx0Ly8gU3VidHJhY3QgdGhlIGhlaWdodCBvZiBleHRlcm5hbCB0b29sYmFycyBmcm9tIHRoZSBwYWdlIGhlaWdodCwgaWYgdGhlIHBhZ2UgZG9lcyBub3QgaGF2ZVxyXG5cdC8vIGludGVybmFsIHRvb2xiYXJzIG9mIHRoZSBzYW1lIHR5cGUuIFdlIHRha2UgY2FyZSB0byB1c2UgdGhlIHdpZGdldCBvcHRpb25zIGlmIHdlIGZpbmQgYVxyXG5cdC8vIHdpZGdldCBpbnN0YW5jZSBhbmQgdGhlIGVsZW1lbnQncyBkYXRhLWF0dHJpYnV0ZXMgb3RoZXJ3aXNlLlxyXG5cdHZhciBjb21wZW5zYXRlVG9vbGJhcnMgPSBmdW5jdGlvbiggcGFnZSwgZGVzaXJlZEhlaWdodCApIHtcclxuXHRcdHZhciBwYWdlUGFyZW50ID0gcGFnZS5wYXJlbnQoKSxcclxuXHRcdFx0dG9vbGJhcnNBZmZlY3RpbmdIZWlnaHQgPSBbXSxcclxuXHJcblx0XHRcdC8vIFdlIHVzZSB0aGlzIGZ1bmN0aW9uIHRvIGZpbHRlciBmaXhlZCB0b29sYmFycyB3aXRoIG9wdGlvbiB1cGRhdGVQYWdlUGFkZGluZyBzZXQgdG9cclxuXHRcdFx0Ly8gdHJ1ZSAod2hpY2ggaXMgdGhlIGRlZmF1bHQpIGZyb20gb3VyIGhlaWdodCBzdWJ0cmFjdGlvbiwgYmVjYXVzZSBmaXhlZCB0b29sYmFycyB3aXRoXHJcblx0XHRcdC8vIG9wdGlvbiB1cGRhdGVQYWdlUGFkZGluZyBzZXQgdG8gdHJ1ZSBjb21wZW5zYXRlIGZvciB0aGVpciBwcmVzZW5jZSBieSBhZGRpbmcgcGFkZGluZ1xyXG5cdFx0XHQvLyB0byB0aGUgYWN0aXZlIHBhZ2UuIFdlIHdhbnQgdG8gYXZvaWQgZG91YmxlLWNvdW50aW5nIGJ5IGFsc28gc3VidHJhY3RpbmcgdGhlaXJcclxuXHRcdFx0Ly8gaGVpZ2h0IGZyb20gdGhlIGRlc2lyZWQgcGFnZSBoZWlnaHQuXHJcblx0XHRcdG5vUGFkZGVycyA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHZhciB0aGVFbGVtZW50ID0gJCggdGhpcyApLFxyXG5cdFx0XHRcdFx0d2lkZ2V0T3B0aW9ucyA9ICQubW9iaWxlLnRvb2xiYXIgJiYgdGhlRWxlbWVudC5kYXRhKCBcIm1vYmlsZS10b29sYmFyXCIgKSA/XHJcblx0XHRcdFx0XHRcdHRoZUVsZW1lbnQudG9vbGJhciggXCJvcHRpb25cIiApIDoge1xyXG5cdFx0XHRcdFx0XHRcdHBvc2l0aW9uOiB0aGVFbGVtZW50LmF0dHIoIFwiZGF0YS1cIiArICQubW9iaWxlLm5zICsgXCJwb3NpdGlvblwiICksXHJcblx0XHRcdFx0XHRcdFx0dXBkYXRlUGFnZVBhZGRpbmc6ICggdGhlRWxlbWVudC5hdHRyKCBcImRhdGEtXCIgKyAkLm1vYmlsZS5ucyArXHJcblx0XHRcdFx0XHRcdFx0XHRcInVwZGF0ZS1wYWdlLXBhZGRpbmdcIiApICE9PSBmYWxzZSApXHJcblx0XHRcdFx0XHRcdH07XHJcblxyXG5cdFx0XHRcdHJldHVybiAhKCB3aWRnZXRPcHRpb25zLnBvc2l0aW9uID09PSBcImZpeGVkXCIgJiZcclxuXHRcdFx0XHRcdHdpZGdldE9wdGlvbnMudXBkYXRlUGFnZVBhZGRpbmcgPT09IHRydWUgKTtcclxuXHRcdFx0fSxcclxuXHRcdFx0ZXh0ZXJuYWxIZWFkZXJzID0gcGFnZVBhcmVudC5jaGlsZHJlbiggXCI6anFtRGF0YShyb2xlPSdoZWFkZXInKVwiICkuZmlsdGVyKCBub1BhZGRlcnMgKSxcclxuXHRcdFx0aW50ZXJuYWxIZWFkZXJzID0gcGFnZS5jaGlsZHJlbiggXCI6anFtRGF0YShyb2xlPSdoZWFkZXInKVwiICksXHJcblx0XHRcdGV4dGVybmFsRm9vdGVycyA9IHBhZ2VQYXJlbnQuY2hpbGRyZW4oIFwiOmpxbURhdGEocm9sZT0nZm9vdGVyJylcIiApLmZpbHRlciggbm9QYWRkZXJzICksXHJcblx0XHRcdGludGVybmFsRm9vdGVycyA9IHBhZ2UuY2hpbGRyZW4oIFwiOmpxbURhdGEocm9sZT0nZm9vdGVyJylcIiApO1xyXG5cclxuXHRcdC8vIElmIHdlIGhhdmUgbm8gaW50ZXJuYWwgaGVhZGVycywgYnV0IHdlIGRvIGhhdmUgZXh0ZXJuYWwgaGVhZGVycywgdGhlbiB0aGVpciBoZWlnaHRcclxuXHRcdC8vIHJlZHVjZXMgdGhlIHBhZ2UgaGVpZ2h0XHJcblx0XHRpZiAoIGludGVybmFsSGVhZGVycy5sZW5ndGggPT09IDAgJiYgZXh0ZXJuYWxIZWFkZXJzLmxlbmd0aCA+IDAgKSB7XHJcblx0XHRcdHRvb2xiYXJzQWZmZWN0aW5nSGVpZ2h0ID0gdG9vbGJhcnNBZmZlY3RpbmdIZWlnaHQuY29uY2F0KCBleHRlcm5hbEhlYWRlcnMudG9BcnJheSgpICk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gSWYgd2UgaGF2ZSBubyBpbnRlcm5hbCBmb290ZXJzLCBidXQgd2UgZG8gaGF2ZSBleHRlcm5hbCBmb290ZXJzLCB0aGVuIHRoZWlyIGhlaWdodFxyXG5cdFx0Ly8gcmVkdWNlcyB0aGUgcGFnZSBoZWlnaHRcclxuXHRcdGlmICggaW50ZXJuYWxGb290ZXJzLmxlbmd0aCA9PT0gMCAmJiBleHRlcm5hbEZvb3RlcnMubGVuZ3RoID4gMCApIHtcclxuXHRcdFx0dG9vbGJhcnNBZmZlY3RpbmdIZWlnaHQgPSB0b29sYmFyc0FmZmVjdGluZ0hlaWdodC5jb25jYXQoIGV4dGVybmFsRm9vdGVycy50b0FycmF5KCkgKTtcclxuXHRcdH1cclxuXHJcblx0XHQkLmVhY2goIHRvb2xiYXJzQWZmZWN0aW5nSGVpZ2h0LCBmdW5jdGlvbiggaW5kZXgsIHZhbHVlICkge1xyXG5cdFx0XHRkZXNpcmVkSGVpZ2h0IC09ICQoIHZhbHVlICkub3V0ZXJIZWlnaHQoKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIEhlaWdodCBtdXN0IGJlIGF0IGxlYXN0IHplcm9cclxuXHRcdHJldHVybiBNYXRoLm1heCggMCwgZGVzaXJlZEhlaWdodCApO1xyXG5cdH07XHJcblxyXG5cdCQuZXh0ZW5kKCAkLm1vYmlsZSwge1xyXG5cdFx0Ly8gZGVmaW5lIHRoZSB3aW5kb3cgYW5kIHRoZSBkb2N1bWVudCBvYmplY3RzXHJcblx0XHR3aW5kb3c6ICQoIHdpbmRvdyApLFxyXG5cdFx0ZG9jdW1lbnQ6ICQoIGRvY3VtZW50ICksXHJcblxyXG5cdFx0Ly8gVE9ETzogUmVtb3ZlIGFuZCB1c2UgJC51aS5rZXlDb2RlIGRpcmVjdGx5XHJcblx0XHRrZXlDb2RlOiAkLnVpLmtleUNvZGUsXHJcblxyXG5cdFx0Ly8gUGxhY2UgdG8gc3RvcmUgdmFyaW91cyB3aWRnZXQgZXh0ZW5zaW9uc1xyXG5cdFx0YmVoYXZpb3JzOiB7fSxcclxuXHJcblx0XHQvLyBTY3JvbGwgcGFnZSB2ZXJ0aWNhbGx5OiBzY3JvbGwgdG8gMCB0byBoaWRlIGlPUyBhZGRyZXNzIGJhciwgb3IgcGFzcyBhIFkgdmFsdWVcclxuXHRcdHNpbGVudFNjcm9sbDogZnVuY3Rpb24oIHlwb3MgKSB7XHJcblx0XHRcdGlmICggJC50eXBlKCB5cG9zICkgIT09IFwibnVtYmVyXCIgKSB7XHJcblx0XHRcdFx0eXBvcyA9ICQubW9iaWxlLmRlZmF1bHRIb21lU2Nyb2xsO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBwcmV2ZW50IHNjcm9sbHN0YXJ0IGFuZCBzY3JvbGxzdG9wIGV2ZW50c1xyXG5cdFx0XHQkLmV2ZW50LnNwZWNpYWwuc2Nyb2xsc3RhcnQuZW5hYmxlZCA9IGZhbHNlO1xyXG5cclxuXHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR3aW5kb3cuc2Nyb2xsVG8oIDAsIHlwb3MgKTtcclxuXHRcdFx0XHQkLm1vYmlsZS5kb2N1bWVudC50cmlnZ2VyKCBcInNpbGVudHNjcm9sbFwiLCB7IHg6IDAsIHk6IHlwb3MgfSk7XHJcblx0XHRcdH0sIDIwICk7XHJcblxyXG5cdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdCQuZXZlbnQuc3BlY2lhbC5zY3JvbGxzdGFydC5lbmFibGVkID0gdHJ1ZTtcclxuXHRcdFx0fSwgMTUwICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdGdldENsb3Nlc3RCYXNlVXJsOiBmdW5jdGlvbiggZWxlIClcdHtcclxuXHRcdFx0Ly8gRmluZCB0aGUgY2xvc2VzdCBwYWdlIGFuZCBleHRyYWN0IG91dCBpdHMgdXJsLlxyXG5cdFx0XHR2YXIgdXJsID0gJCggZWxlICkuY2xvc2VzdCggXCIudWktcGFnZVwiICkuanFtRGF0YSggXCJ1cmxcIiApLFxyXG5cdFx0XHRcdGJhc2UgPSAkLm1vYmlsZS5wYXRoLmRvY3VtZW50QmFzZS5ocmVmTm9IYXNoO1xyXG5cclxuXHRcdFx0aWYgKCAhJC5tb2JpbGUuZHluYW1pY0Jhc2VFbmFibGVkIHx8ICF1cmwgfHwgISQubW9iaWxlLnBhdGguaXNQYXRoKCB1cmwgKSApIHtcclxuXHRcdFx0XHR1cmwgPSBiYXNlO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRyZXR1cm4gJC5tb2JpbGUucGF0aC5tYWtlVXJsQWJzb2x1dGUoIHVybCwgYmFzZSApO1xyXG5cdFx0fSxcclxuXHRcdHJlbW92ZUFjdGl2ZUxpbmtDbGFzczogZnVuY3Rpb24oIGZvcmNlUmVtb3ZhbCApIHtcclxuXHRcdFx0aWYgKCAhISQubW9iaWxlLmFjdGl2ZUNsaWNrZWRMaW5rICYmXHJcblx0XHRcdFx0KCAhJC5tb2JpbGUuYWN0aXZlQ2xpY2tlZExpbmsuY2xvc2VzdCggXCIuXCIgKyAkLm1vYmlsZS5hY3RpdmVQYWdlQ2xhc3MgKS5sZW5ndGggfHxcclxuXHRcdFx0XHRcdGZvcmNlUmVtb3ZhbCApICkge1xyXG5cclxuXHRcdFx0XHQkLm1vYmlsZS5hY3RpdmVDbGlja2VkTGluay5yZW1vdmVDbGFzcyggJC5tb2JpbGUuYWN0aXZlQnRuQ2xhc3MgKTtcclxuXHRcdFx0fVxyXG5cdFx0XHQkLm1vYmlsZS5hY3RpdmVDbGlja2VkTGluayA9IG51bGw7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vIERFUFJFQ0FURUQgaW4gMS40XHJcblx0XHQvLyBGaW5kIHRoZSBjbG9zZXN0IHBhcmVudCB3aXRoIGEgdGhlbWUgY2xhc3Mgb24gaXQuIE5vdGUgdGhhdFxyXG5cdFx0Ly8gd2UgYXJlIG5vdCB1c2luZyAkLmZuLmNsb3Nlc3QoKSBvbiBwdXJwb3NlIGhlcmUgYmVjYXVzZSB0aGlzXHJcblx0XHQvLyBtZXRob2QgZ2V0cyBjYWxsZWQgcXVpdGUgYSBiaXQgYW5kIHdlIG5lZWQgaXQgdG8gYmUgYXMgZmFzdFxyXG5cdFx0Ly8gYXMgcG9zc2libGUuXHJcblx0XHRnZXRJbmhlcml0ZWRUaGVtZTogZnVuY3Rpb24oIGVsLCBkZWZhdWx0VGhlbWUgKSB7XHJcblx0XHRcdHZhciBlID0gZWxbIDAgXSxcclxuXHRcdFx0XHRsdHIgPSBcIlwiLFxyXG5cdFx0XHRcdHJlID0gL3VpLShiYXJ8Ym9keXxvdmVybGF5KS0oW2Etel0pXFxiLyxcclxuXHRcdFx0XHRjLCBtO1xyXG5cdFx0XHR3aGlsZSAoIGUgKSB7XHJcblx0XHRcdFx0YyA9IGUuY2xhc3NOYW1lIHx8IFwiXCI7XHJcblx0XHRcdFx0aWYgKCBjICYmICggbSA9IHJlLmV4ZWMoIGMgKSApICYmICggbHRyID0gbVsgMiBdICkgKSB7XHJcblx0XHRcdFx0XHQvLyBXZSBmb3VuZCBhIHBhcmVudCB3aXRoIGEgdGhlbWUgY2xhc3NcclxuXHRcdFx0XHRcdC8vIG9uIGl0IHNvIGJhaWwgZnJvbSB0aGlzIGxvb3AuXHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGUgPSBlLnBhcmVudE5vZGU7XHJcblx0XHRcdH1cclxuXHRcdFx0Ly8gUmV0dXJuIHRoZSB0aGVtZSBsZXR0ZXIgd2UgZm91bmQsIGlmIG5vbmUsIHJldHVybiB0aGVcclxuXHRcdFx0Ly8gc3BlY2lmaWVkIGRlZmF1bHQuXHJcblx0XHRcdHJldHVybiBsdHIgfHwgZGVmYXVsdFRoZW1lIHx8IFwiYVwiO1xyXG5cdFx0fSxcclxuXHJcblx0XHRlbmhhbmNlYWJsZTogZnVuY3Rpb24oIGVsZW1lbnRzICkge1xyXG5cdFx0XHRyZXR1cm4gdGhpcy5oYXZlUGFyZW50cyggZWxlbWVudHMsIFwiZW5oYW5jZVwiICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdGhpamFja2FibGU6IGZ1bmN0aW9uKCBlbGVtZW50cyApIHtcclxuXHRcdFx0cmV0dXJuIHRoaXMuaGF2ZVBhcmVudHMoIGVsZW1lbnRzLCBcImFqYXhcIiApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRoYXZlUGFyZW50czogZnVuY3Rpb24oIGVsZW1lbnRzLCBhdHRyICkge1xyXG5cdFx0XHRpZiAoICEkLm1vYmlsZS5pZ25vcmVDb250ZW50RW5hYmxlZCApIHtcclxuXHRcdFx0XHRyZXR1cm4gZWxlbWVudHM7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHZhciBjb3VudCA9IGVsZW1lbnRzLmxlbmd0aCxcclxuXHRcdFx0XHQkbmV3U2V0ID0gJCgpLFxyXG5cdFx0XHRcdGUsICRlbGVtZW50LCBleGNsdWRlZCxcclxuXHRcdFx0XHRpLCBjO1xyXG5cclxuXHRcdFx0Zm9yICggaSA9IDA7IGkgPCBjb3VudDsgaSsrICkge1xyXG5cdFx0XHRcdCRlbGVtZW50ID0gZWxlbWVudHMuZXEoIGkgKTtcclxuXHRcdFx0XHRleGNsdWRlZCA9IGZhbHNlO1xyXG5cdFx0XHRcdGUgPSBlbGVtZW50c1sgaSBdO1xyXG5cclxuXHRcdFx0XHR3aGlsZSAoIGUgKSB7XHJcblx0XHRcdFx0XHRjID0gZS5nZXRBdHRyaWJ1dGUgPyBlLmdldEF0dHJpYnV0ZSggXCJkYXRhLVwiICsgJC5tb2JpbGUubnMgKyBhdHRyICkgOiBcIlwiO1xyXG5cclxuXHRcdFx0XHRcdGlmICggYyA9PT0gXCJmYWxzZVwiICkge1xyXG5cdFx0XHRcdFx0XHRleGNsdWRlZCA9IHRydWU7XHJcblx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdGUgPSBlLnBhcmVudE5vZGU7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRpZiAoICFleGNsdWRlZCApIHtcclxuXHRcdFx0XHRcdCRuZXdTZXQgPSAkbmV3U2V0LmFkZCggJGVsZW1lbnQgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHJldHVybiAkbmV3U2V0O1xyXG5cdFx0fSxcclxuXHJcblx0XHRnZXRTY3JlZW5IZWlnaHQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHQvLyBOYXRpdmUgaW5uZXJIZWlnaHQgcmV0dXJucyBtb3JlIGFjY3VyYXRlIHZhbHVlIGZvciB0aGlzIGFjcm9zcyBwbGF0Zm9ybXMsXHJcblx0XHRcdC8vIGpRdWVyeSB2ZXJzaW9uIGlzIGhlcmUgYXMgYSBub3JtYWxpemVkIGZhbGxiYWNrIGZvciBwbGF0Zm9ybXMgbGlrZSBTeW1iaWFuXHJcblx0XHRcdHJldHVybiB3aW5kb3cuaW5uZXJIZWlnaHQgfHwgJC5tb2JpbGUud2luZG93LmhlaWdodCgpO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvL3NpbXBseSBzZXQgdGhlIGFjdGl2ZSBwYWdlJ3MgbWluaW11bSBoZWlnaHQgdG8gc2NyZWVuIGhlaWdodCwgZGVwZW5kaW5nIG9uIG9yaWVudGF0aW9uXHJcblx0XHRyZXNldEFjdGl2ZVBhZ2VIZWlnaHQ6IGZ1bmN0aW9uKCBoZWlnaHQgKSB7XHJcblx0XHRcdHZhciBwYWdlID0gJCggXCIuXCIgKyAkLm1vYmlsZS5hY3RpdmVQYWdlQ2xhc3MgKSxcclxuXHRcdFx0XHRwYWdlSGVpZ2h0ID0gcGFnZS5oZWlnaHQoKSxcclxuXHRcdFx0XHRwYWdlT3V0ZXJIZWlnaHQgPSBwYWdlLm91dGVySGVpZ2h0KCB0cnVlICk7XHJcblxyXG5cdFx0XHRoZWlnaHQgPSBjb21wZW5zYXRlVG9vbGJhcnMoIHBhZ2UsXHJcblx0XHRcdFx0KCB0eXBlb2YgaGVpZ2h0ID09PSBcIm51bWJlclwiICkgPyBoZWlnaHQgOiAkLm1vYmlsZS5nZXRTY3JlZW5IZWlnaHQoKSApO1xyXG5cclxuXHRcdFx0Ly8gUmVtb3ZlIGFueSBwcmV2aW91cyBtaW4taGVpZ2h0IHNldHRpbmdcclxuXHRcdFx0cGFnZS5jc3MoIFwibWluLWhlaWdodFwiLCBcIlwiICk7XHJcblxyXG5cdFx0XHQvLyBTZXQgdGhlIG1pbmltdW0gaGVpZ2h0IG9ubHkgaWYgdGhlIGhlaWdodCBhcyBkZXRlcm1pbmVkIGJ5IENTUyBpcyBpbnN1ZmZpY2llbnRcclxuXHRcdFx0aWYgKCBwYWdlLmhlaWdodCgpIDwgaGVpZ2h0ICkge1xyXG5cdFx0XHRcdHBhZ2UuY3NzKCBcIm1pbi1oZWlnaHRcIiwgaGVpZ2h0IC0gKCBwYWdlT3V0ZXJIZWlnaHQgLSBwYWdlSGVpZ2h0ICkgKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHJcblx0XHRsb2FkaW5nOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0Ly8gSWYgdGhpcyBpcyB0aGUgZmlyc3QgY2FsbCB0byB0aGlzIGZ1bmN0aW9uLCBpbnN0YW50aWF0ZSBhIGxvYWRlciB3aWRnZXRcclxuXHRcdFx0dmFyIGxvYWRlciA9IHRoaXMubG9hZGluZy5fd2lkZ2V0IHx8ICQoICQubW9iaWxlLmxvYWRlci5wcm90b3R5cGUuZGVmYXVsdEh0bWwgKS5sb2FkZXIoKSxcclxuXHJcblx0XHRcdFx0Ly8gQ2FsbCB0aGUgYXBwcm9wcmlhdGUgbWV0aG9kIG9uIHRoZSBsb2FkZXJcclxuXHRcdFx0XHRyZXR1cm5WYWx1ZSA9IGxvYWRlci5sb2FkZXIuYXBwbHkoIGxvYWRlciwgYXJndW1lbnRzICk7XHJcblxyXG5cdFx0XHQvLyBNYWtlIHN1cmUgdGhlIGxvYWRlciBpcyByZXRhaW5lZCBmb3IgZnV0dXJlIGNhbGxzIHRvIHRoaXMgZnVuY3Rpb24uXHJcblx0XHRcdHRoaXMubG9hZGluZy5fd2lkZ2V0ID0gbG9hZGVyO1xyXG5cclxuXHRcdFx0cmV0dXJuIHJldHVyblZhbHVlO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG5cclxuXHQkLmFkZERlcGVuZGVudHMgPSBmdW5jdGlvbiggZWxlbSwgbmV3RGVwZW5kZW50cyApIHtcclxuXHRcdHZhciAkZWxlbSA9ICQoIGVsZW0gKSxcclxuXHRcdFx0ZGVwZW5kZW50cyA9ICRlbGVtLmpxbURhdGEoIFwiZGVwZW5kZW50c1wiICkgfHwgJCgpO1xyXG5cclxuXHRcdCRlbGVtLmpxbURhdGEoIFwiZGVwZW5kZW50c1wiLCAkKCBkZXBlbmRlbnRzICkuYWRkKCBuZXdEZXBlbmRlbnRzICkgKTtcclxuXHR9O1xyXG5cclxuXHQvLyBwbHVnaW5zXHJcblx0JC5mbi5leHRlbmQoe1xyXG5cdFx0cmVtb3ZlV2l0aERlcGVuZGVudHM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHQkLnJlbW92ZVdpdGhEZXBlbmRlbnRzKCB0aGlzICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vIEVuaGFuY2UgY2hpbGQgZWxlbWVudHNcclxuXHRcdGVuaGFuY2VXaXRoaW46IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgaW5kZXgsXHJcblx0XHRcdFx0d2lkZ2V0RWxlbWVudHMgPSB7fSxcclxuXHRcdFx0XHRrZWVwTmF0aXZlID0gJC5tb2JpbGUucGFnZS5wcm90b3R5cGUua2VlcE5hdGl2ZVNlbGVjdG9yKCksXHJcblx0XHRcdFx0dGhhdCA9IHRoaXM7XHJcblxyXG5cdFx0XHQvLyBBZGQgbm8ganMgY2xhc3MgdG8gZWxlbWVudHNcclxuXHRcdFx0aWYgKCAkLm1vYmlsZS5ub2pzICkge1xyXG5cdFx0XHRcdCQubW9iaWxlLm5vanMoIHRoaXMgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gQmluZCBsaW5rcyBmb3IgYWpheCBuYXZcclxuXHRcdFx0aWYgKCAkLm1vYmlsZS5saW5rcyApIHtcclxuXHRcdFx0XHQkLm1vYmlsZS5saW5rcyggdGhpcyApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBEZWdyYWRlIGlucHV0cyBmb3Igc3R5bGVpbmdcclxuXHRcdFx0aWYgKCAkLm1vYmlsZS5kZWdyYWRlSW5wdXRzV2l0aGluICkge1xyXG5cdFx0XHRcdCQubW9iaWxlLmRlZ3JhZGVJbnB1dHNXaXRoaW4oIHRoaXMgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gUnVuIGJ1dHRvbm1hcmt1cFxyXG5cdFx0XHRpZiAoICQuZm4uYnV0dG9uTWFya3VwICkge1xyXG5cdFx0XHRcdHRoaXMuZmluZCggJC5mbi5idXR0b25NYXJrdXAuaW5pdFNlbGVjdG9yICkubm90KCBrZWVwTmF0aXZlIClcclxuXHRcdFx0XHQuanFtRW5oYW5jZWFibGUoKS5idXR0b25NYXJrdXAoKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gQWRkIGNsYXNzZXMgZm9yIGZpZWxkQ29udGFpblxyXG5cdFx0XHRpZiAoICQuZm4uZmllbGRjb250YWluICkge1xyXG5cdFx0XHRcdHRoaXMuZmluZCggXCI6anFtRGF0YShyb2xlPSdmaWVsZGNvbnRhaW4nKVwiICkubm90KCBrZWVwTmF0aXZlIClcclxuXHRcdFx0XHQuanFtRW5oYW5jZWFibGUoKS5maWVsZGNvbnRhaW4oKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gRW5oYW5jZSB3aWRnZXRzXHJcblx0XHRcdCQuZWFjaCggJC5tb2JpbGUud2lkZ2V0cywgZnVuY3Rpb24oIG5hbWUsIGNvbnN0cnVjdG9yICkge1xyXG5cclxuXHRcdFx0XHQvLyBJZiBpbml0U2VsZWN0b3Igbm90IGZhbHNlIGZpbmQgZWxlbWVudHNcclxuXHRcdFx0XHRpZiAoIGNvbnN0cnVjdG9yLmluaXRTZWxlY3RvciApIHtcclxuXHJcblx0XHRcdFx0XHQvLyBGaWx0ZXIgZWxlbWVudHMgdGhhdCBzaG91bGQgbm90IGJlIGVuaGFuY2VkIGJhc2VkIG9uIHBhcmVudHNcclxuXHRcdFx0XHRcdHZhciBlbGVtZW50cyA9ICQubW9iaWxlLmVuaGFuY2VhYmxlKCB0aGF0LmZpbmQoIGNvbnN0cnVjdG9yLmluaXRTZWxlY3RvciApICk7XHJcblxyXG5cdFx0XHRcdFx0Ly8gSWYgYW55IG1hdGNoaW5nIGVsZW1lbnRzIHJlbWFpbiBmaWx0ZXIgb25lcyB3aXRoIGtlZXBOYXRpdmVTZWxlY3RvclxyXG5cdFx0XHRcdFx0aWYgKCBlbGVtZW50cy5sZW5ndGggPiAwICkge1xyXG5cclxuXHRcdFx0XHRcdFx0Ly8gJC5tb2JpbGUucGFnZS5wcm90b3R5cGUua2VlcE5hdGl2ZVNlbGVjdG9yIGlzIGRlcHJlY2F0ZWQgdGhpcyBpcyBqdXN0IGZvciBiYWNrY29tcGF0XHJcblx0XHRcdFx0XHRcdC8vIFN3aXRjaCB0byAkLm1vYmlsZS5rZWVwTmF0aXZlIGluIDEuNSB3aGljaCBpcyBqdXN0IGEgdmFsdWUgbm90IGEgZnVuY3Rpb25cclxuXHRcdFx0XHRcdFx0ZWxlbWVudHMgPSBlbGVtZW50cy5ub3QoIGtlZXBOYXRpdmUgKTtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHQvLyBFbmhhbmNlIHdoYXRldmVyIGlzIGxlZnRcclxuXHRcdFx0XHRcdGlmICggZWxlbWVudHMubGVuZ3RoID4gMCApIHtcclxuXHRcdFx0XHRcdFx0d2lkZ2V0RWxlbWVudHNbIGNvbnN0cnVjdG9yLnByb3RvdHlwZS53aWRnZXROYW1lIF0gPSBlbGVtZW50cztcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0Zm9yICggaW5kZXggaW4gd2lkZ2V0RWxlbWVudHMgKSB7XHJcblx0XHRcdFx0d2lkZ2V0RWxlbWVudHNbIGluZGV4IF1bIGluZGV4IF0oKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cmV0dXJuIHRoaXM7XHJcblx0XHR9LFxyXG5cclxuXHRcdGFkZERlcGVuZGVudHM6IGZ1bmN0aW9uKCBuZXdEZXBlbmRlbnRzICkge1xyXG5cdFx0XHQkLmFkZERlcGVuZGVudHMoIHRoaXMsIG5ld0RlcGVuZGVudHMgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gbm90ZSB0aGF0IHRoaXMgaGVscGVyIGRvZXNuJ3QgYXR0ZW1wdCB0byBoYW5kbGUgdGhlIGNhbGxiYWNrXHJcblx0XHQvLyBvciBzZXR0aW5nIG9mIGFuIGh0bWwgZWxlbWVudCdzIHRleHQsIGl0cyBvbmx5IHB1cnBvc2UgaXNcclxuXHRcdC8vIHRvIHJldHVybiB0aGUgaHRtbCBlbmNvZGVkIHZlcnNpb24gb2YgdGhlIHRleHQgaW4gYWxsIGNhc2VzLiAodGh1cyB0aGUgbmFtZSlcclxuXHRcdGdldEVuY29kZWRUZXh0OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0cmV0dXJuICQoIFwiPGE+XCIgKS50ZXh0KCB0aGlzLnRleHQoKSApLmh0bWwoKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gZmx1ZW50IGhlbHBlciBmdW5jdGlvbiBmb3IgdGhlIG1vYmlsZSBuYW1lc3BhY2VkIGVxdWl2YWxlbnRcclxuXHRcdGpxbUVuaGFuY2VhYmxlOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0cmV0dXJuICQubW9iaWxlLmVuaGFuY2VhYmxlKCB0aGlzICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdGpxbUhpamFja2FibGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRyZXR1cm4gJC5tb2JpbGUuaGlqYWNrYWJsZSggdGhpcyApO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG5cclxuXHQkLnJlbW92ZVdpdGhEZXBlbmRlbnRzID0gZnVuY3Rpb24oIG5hdGl2ZUVsZW1lbnQgKSB7XHJcblx0XHR2YXIgZWxlbWVudCA9ICQoIG5hdGl2ZUVsZW1lbnQgKTtcclxuXHJcblx0XHQoIGVsZW1lbnQuanFtRGF0YSggXCJkZXBlbmRlbnRzXCIgKSB8fCAkKCkgKS5yZW1vdmUoKTtcclxuXHRcdGVsZW1lbnQucmVtb3ZlKCk7XHJcblx0fTtcclxuXHQkLmFkZERlcGVuZGVudHMgPSBmdW5jdGlvbiggbmF0aXZlRWxlbWVudCwgbmV3RGVwZW5kZW50cyApIHtcclxuXHRcdHZhciBlbGVtZW50ID0gJCggbmF0aXZlRWxlbWVudCApLFxyXG5cdFx0XHRkZXBlbmRlbnRzID0gZWxlbWVudC5qcW1EYXRhKCBcImRlcGVuZGVudHNcIiApIHx8ICQoKTtcclxuXHJcblx0XHRlbGVtZW50LmpxbURhdGEoIFwiZGVwZW5kZW50c1wiLCAkKCBkZXBlbmRlbnRzICkuYWRkKCBuZXdEZXBlbmRlbnRzICkgKTtcclxuXHR9O1xyXG5cclxuXHQkLmZpbmQubWF0Y2hlcyA9IGZ1bmN0aW9uKCBleHByLCBzZXQgKSB7XHJcblx0XHRyZXR1cm4gJC5maW5kKCBleHByLCBudWxsLCBudWxsLCBzZXQgKTtcclxuXHR9O1xyXG5cclxuXHQkLmZpbmQubWF0Y2hlc1NlbGVjdG9yID0gZnVuY3Rpb24oIG5vZGUsIGV4cHIgKSB7XHJcblx0XHRyZXR1cm4gJC5maW5kKCBleHByLCBudWxsLCBudWxsLCBbIG5vZGUgXSApLmxlbmd0aCA+IDA7XHJcblx0fTtcclxuXHJcbn0pKCBqUXVlcnksIHRoaXMgKTtcclxuXHJcbihmdW5jdGlvbiggJCwgd2luZG93LCB1bmRlZmluZWQgKSB7XHJcblx0JC5leHRlbmQoICQubW9iaWxlLCB7XHJcblxyXG5cdFx0Ly8gVmVyc2lvbiBvZiB0aGUgalF1ZXJ5IE1vYmlsZSBGcmFtZXdvcmtcclxuXHRcdHZlcnNpb246IFwiMS40LjVcIixcclxuXHJcblx0XHQvLyBEZXByZWNhdGVkIGFuZCBubyBsb25nZXIgdXNlZCBpbiAxLjQgcmVtb3ZlIGluIDEuNVxyXG5cdFx0Ly8gRGVmaW5lIHRoZSB1cmwgcGFyYW1ldGVyIHVzZWQgZm9yIHJlZmVyZW5jaW5nIHdpZGdldC1nZW5lcmF0ZWQgc3ViLXBhZ2VzLlxyXG5cdFx0Ly8gVHJhbnNsYXRlcyB0byBleGFtcGxlLmh0bWwmdWktcGFnZT1zdWJwYWdlSWRlbnRpZmllclxyXG5cdFx0Ly8gaGFzaCBzZWdtZW50IGJlZm9yZSAmdWktcGFnZT0gaXMgdXNlZCB0byBtYWtlIEFqYXggcmVxdWVzdFxyXG5cdFx0c3ViUGFnZVVybEtleTogXCJ1aS1wYWdlXCIsXHJcblxyXG5cdFx0aGlkZVVybEJhcjogdHJ1ZSxcclxuXHJcblx0XHQvLyBLZWVwbmF0aXZlIFNlbGVjdG9yXHJcblx0XHRrZWVwTmF0aXZlOiBcIjpqcW1EYXRhKHJvbGU9J25vbmUnKSwgOmpxbURhdGEocm9sZT0nbm9qcycpXCIsXHJcblxyXG5cdFx0Ly8gRGVwcmVjYXRlZCBpbiAxLjQgcmVtb3ZlIGluIDEuNVxyXG5cdFx0Ly8gQ2xhc3MgYXNzaWduZWQgdG8gcGFnZSBjdXJyZW50bHkgaW4gdmlldywgYW5kIGR1cmluZyB0cmFuc2l0aW9uc1xyXG5cdFx0YWN0aXZlUGFnZUNsYXNzOiBcInVpLXBhZ2UtYWN0aXZlXCIsXHJcblxyXG5cdFx0Ly8gRGVwcmVjYXRlZCBpbiAxLjQgcmVtb3ZlIGluIDEuNVxyXG5cdFx0Ly8gQ2xhc3MgdXNlZCBmb3IgXCJhY3RpdmVcIiBidXR0b24gc3RhdGUsIGZyb20gQ1NTIGZyYW1ld29ya1xyXG5cdFx0YWN0aXZlQnRuQ2xhc3M6IFwidWktYnRuLWFjdGl2ZVwiLFxyXG5cclxuXHRcdC8vIERlcHJlY2F0ZWQgaW4gMS40IHJlbW92ZSBpbiAxLjVcclxuXHRcdC8vIENsYXNzIHVzZWQgZm9yIFwiZm9jdXNcIiBmb3JtIGVsZW1lbnQgc3RhdGUsIGZyb20gQ1NTIGZyYW1ld29ya1xyXG5cdFx0Zm9jdXNDbGFzczogXCJ1aS1mb2N1c1wiLFxyXG5cclxuXHRcdC8vIEF1dG9tYXRpY2FsbHkgaGFuZGxlIGNsaWNrcyBhbmQgZm9ybSBzdWJtaXNzaW9ucyB0aHJvdWdoIEFqYXgsIHdoZW4gc2FtZS1kb21haW5cclxuXHRcdGFqYXhFbmFibGVkOiB0cnVlLFxyXG5cclxuXHRcdC8vIEF1dG9tYXRpY2FsbHkgbG9hZCBhbmQgc2hvdyBwYWdlcyBiYXNlZCBvbiBsb2NhdGlvbi5oYXNoXHJcblx0XHRoYXNoTGlzdGVuaW5nRW5hYmxlZDogdHJ1ZSxcclxuXHJcblx0XHQvLyBkaXNhYmxlIHRvIHByZXZlbnQganF1ZXJ5IGZyb20gYm90aGVyaW5nIHdpdGggbGlua3NcclxuXHRcdGxpbmtCaW5kaW5nRW5hYmxlZDogdHJ1ZSxcclxuXHJcblx0XHQvLyBTZXQgZGVmYXVsdCBwYWdlIHRyYW5zaXRpb24gLSAnbm9uZScgZm9yIG5vIHRyYW5zaXRpb25zXHJcblx0XHRkZWZhdWx0UGFnZVRyYW5zaXRpb246IFwiZmFkZVwiLFxyXG5cclxuXHRcdC8vIFNldCBtYXhpbXVtIHdpbmRvdyB3aWR0aCBmb3IgdHJhbnNpdGlvbnMgdG8gYXBwbHkgLSAnZmFsc2UnIGZvciBubyBsaW1pdFxyXG5cdFx0bWF4VHJhbnNpdGlvbldpZHRoOiBmYWxzZSxcclxuXHJcblx0XHQvLyBNaW5pbXVtIHNjcm9sbCBkaXN0YW5jZSB0aGF0IHdpbGwgYmUgcmVtZW1iZXJlZCB3aGVuIHJldHVybmluZyB0byBhIHBhZ2VcclxuXHRcdC8vIERlcHJlY2F0ZWQgcmVtb3ZlIGluIDEuNVxyXG5cdFx0bWluU2Nyb2xsQmFjazogMCxcclxuXHJcblx0XHQvLyBTZXQgZGVmYXVsdCBkaWFsb2cgdHJhbnNpdGlvbiAtICdub25lJyBmb3Igbm8gdHJhbnNpdGlvbnNcclxuXHRcdGRlZmF1bHREaWFsb2dUcmFuc2l0aW9uOiBcInBvcFwiLFxyXG5cclxuXHRcdC8vIEVycm9yIHJlc3BvbnNlIG1lc3NhZ2UgLSBhcHBlYXJzIHdoZW4gYW4gQWpheCBwYWdlIHJlcXVlc3QgZmFpbHNcclxuXHRcdHBhZ2VMb2FkRXJyb3JNZXNzYWdlOiBcIkVycm9yIExvYWRpbmcgUGFnZVwiLFxyXG5cclxuXHRcdC8vIEZvciBlcnJvciBtZXNzYWdlcywgd2hpY2ggdGhlbWUgZG9lcyB0aGUgYm94IHVzZT9cclxuXHRcdHBhZ2VMb2FkRXJyb3JNZXNzYWdlVGhlbWU6IFwiYVwiLFxyXG5cclxuXHRcdC8vIHJlcGxhY2UgY2FsbHMgdG8gd2luZG93Lmhpc3RvcnkuYmFjayB3aXRoIHBob25lZ2FwcyBuYXZpZ2F0aW9uIGhlbHBlclxyXG5cdFx0Ly8gd2hlcmUgaXQgaXMgcHJvdmlkZWQgb24gdGhlIHdpbmRvdyBvYmplY3RcclxuXHRcdHBob25lZ2FwTmF2aWdhdGlvbkVuYWJsZWQ6IGZhbHNlLFxyXG5cclxuXHRcdC8vYXV0b21hdGljYWxseSBpbml0aWFsaXplIHRoZSBET00gd2hlbiBpdCdzIHJlYWR5XHJcblx0XHRhdXRvSW5pdGlhbGl6ZVBhZ2U6IHRydWUsXHJcblxyXG5cdFx0cHVzaFN0YXRlRW5hYmxlZDogdHJ1ZSxcclxuXHJcblx0XHQvLyBhbGxvd3MgdXNlcnMgdG8gb3B0IGluIHRvIGlnbm9yaW5nIGNvbnRlbnQgYnkgbWFya2luZyBhIHBhcmVudCBlbGVtZW50IGFzXHJcblx0XHQvLyBkYXRhLWlnbm9yZWRcclxuXHRcdGlnbm9yZUNvbnRlbnRFbmFibGVkOiBmYWxzZSxcclxuXHJcblx0XHRidXR0b25NYXJrdXA6IHtcclxuXHRcdFx0aG92ZXJEZWxheTogMjAwXHJcblx0XHR9LFxyXG5cclxuXHRcdC8vIGRpc2FibGUgdGhlIGFsdGVyYXRpb24gb2YgdGhlIGR5bmFtaWMgYmFzZSB0YWcgb3IgbGlua3MgaW4gdGhlIGNhc2VcclxuXHRcdC8vIHRoYXQgYSBkeW5hbWljIGJhc2UgdGFnIGlzbid0IHN1cHBvcnRlZFxyXG5cdFx0ZHluYW1pY0Jhc2VFbmFibGVkOiB0cnVlLFxyXG5cclxuXHRcdC8vIGRlZmF1bHQgdGhlIHByb3BlcnR5IHRvIHJlbW92ZSBkZXBlbmRlbmN5IG9uIGFzc2lnbm1lbnQgaW4gaW5pdCBtb2R1bGVcclxuXHRcdHBhZ2VDb250YWluZXI6ICQoKSxcclxuXHJcblx0XHQvL2VuYWJsZSBjcm9zcy1kb21haW4gcGFnZSBzdXBwb3J0XHJcblx0XHRhbGxvd0Nyb3NzRG9tYWluUGFnZXM6IGZhbHNlLFxyXG5cclxuXHRcdGRpYWxvZ0hhc2hLZXk6IFwiJnVpLXN0YXRlPWRpYWxvZ1wiXHJcblx0fSk7XHJcbn0pKCBqUXVlcnksIHRoaXMgKTtcclxuXHJcbi8qIVxyXG4gKiBqUXVlcnkgVUkgV2lkZ2V0IGMwYWI3MTA1NmI5MzY2MjdlOGE3ODIxZjAzYzA0NGFlYzYyODBhNDBcclxuICogaHR0cDovL2pxdWVyeXVpLmNvbVxyXG4gKlxyXG4gKiBDb3B5cmlnaHQgMjAxMyBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzXHJcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cclxuICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZVxyXG4gKlxyXG4gKiBodHRwOi8vYXBpLmpxdWVyeXVpLmNvbS9qUXVlcnkud2lkZ2V0L1xyXG4gKi9cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG52YXIgdXVpZCA9IDAsXHJcblx0c2xpY2UgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UsXHJcblx0X2NsZWFuRGF0YSA9ICQuY2xlYW5EYXRhO1xyXG4kLmNsZWFuRGF0YSA9IGZ1bmN0aW9uKCBlbGVtcyApIHtcclxuXHRmb3IgKCB2YXIgaSA9IDAsIGVsZW07IChlbGVtID0gZWxlbXNbaV0pICE9IG51bGw7IGkrKyApIHtcclxuXHRcdHRyeSB7XHJcblx0XHRcdCQoIGVsZW0gKS50cmlnZ2VySGFuZGxlciggXCJyZW1vdmVcIiApO1xyXG5cdFx0Ly8gaHR0cDovL2J1Z3MuanF1ZXJ5LmNvbS90aWNrZXQvODIzNVxyXG5cdFx0fSBjYXRjaCggZSApIHt9XHJcblx0fVxyXG5cdF9jbGVhbkRhdGEoIGVsZW1zICk7XHJcbn07XHJcblxyXG4kLndpZGdldCA9IGZ1bmN0aW9uKCBuYW1lLCBiYXNlLCBwcm90b3R5cGUgKSB7XHJcblx0dmFyIGZ1bGxOYW1lLCBleGlzdGluZ0NvbnN0cnVjdG9yLCBjb25zdHJ1Y3RvciwgYmFzZVByb3RvdHlwZSxcclxuXHRcdC8vIHByb3hpZWRQcm90b3R5cGUgYWxsb3dzIHRoZSBwcm92aWRlZCBwcm90b3R5cGUgdG8gcmVtYWluIHVubW9kaWZpZWRcclxuXHRcdC8vIHNvIHRoYXQgaXQgY2FuIGJlIHVzZWQgYXMgYSBtaXhpbiBmb3IgbXVsdGlwbGUgd2lkZ2V0cyAoIzg4NzYpXHJcblx0XHRwcm94aWVkUHJvdG90eXBlID0ge30sXHJcblx0XHRuYW1lc3BhY2UgPSBuYW1lLnNwbGl0KCBcIi5cIiApWyAwIF07XHJcblxyXG5cdG5hbWUgPSBuYW1lLnNwbGl0KCBcIi5cIiApWyAxIF07XHJcblx0ZnVsbE5hbWUgPSBuYW1lc3BhY2UgKyBcIi1cIiArIG5hbWU7XHJcblxyXG5cdGlmICggIXByb3RvdHlwZSApIHtcclxuXHRcdHByb3RvdHlwZSA9IGJhc2U7XHJcblx0XHRiYXNlID0gJC5XaWRnZXQ7XHJcblx0fVxyXG5cclxuXHQvLyBjcmVhdGUgc2VsZWN0b3IgZm9yIHBsdWdpblxyXG5cdCQuZXhwclsgXCI6XCIgXVsgZnVsbE5hbWUudG9Mb3dlckNhc2UoKSBdID0gZnVuY3Rpb24oIGVsZW0gKSB7XHJcblx0XHRyZXR1cm4gISEkLmRhdGEoIGVsZW0sIGZ1bGxOYW1lICk7XHJcblx0fTtcclxuXHJcblx0JFsgbmFtZXNwYWNlIF0gPSAkWyBuYW1lc3BhY2UgXSB8fCB7fTtcclxuXHRleGlzdGluZ0NvbnN0cnVjdG9yID0gJFsgbmFtZXNwYWNlIF1bIG5hbWUgXTtcclxuXHRjb25zdHJ1Y3RvciA9ICRbIG5hbWVzcGFjZSBdWyBuYW1lIF0gPSBmdW5jdGlvbiggb3B0aW9ucywgZWxlbWVudCApIHtcclxuXHRcdC8vIGFsbG93IGluc3RhbnRpYXRpb24gd2l0aG91dCBcIm5ld1wiIGtleXdvcmRcclxuXHRcdGlmICggIXRoaXMuX2NyZWF0ZVdpZGdldCApIHtcclxuXHRcdFx0cmV0dXJuIG5ldyBjb25zdHJ1Y3Rvciggb3B0aW9ucywgZWxlbWVudCApO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIGFsbG93IGluc3RhbnRpYXRpb24gd2l0aG91dCBpbml0aWFsaXppbmcgZm9yIHNpbXBsZSBpbmhlcml0YW5jZVxyXG5cdFx0Ly8gbXVzdCB1c2UgXCJuZXdcIiBrZXl3b3JkICh0aGUgY29kZSBhYm92ZSBhbHdheXMgcGFzc2VzIGFyZ3MpXHJcblx0XHRpZiAoIGFyZ3VtZW50cy5sZW5ndGggKSB7XHJcblx0XHRcdHRoaXMuX2NyZWF0ZVdpZGdldCggb3B0aW9ucywgZWxlbWVudCApO1xyXG5cdFx0fVxyXG5cdH07XHJcblx0Ly8gZXh0ZW5kIHdpdGggdGhlIGV4aXN0aW5nIGNvbnN0cnVjdG9yIHRvIGNhcnJ5IG92ZXIgYW55IHN0YXRpYyBwcm9wZXJ0aWVzXHJcblx0JC5leHRlbmQoIGNvbnN0cnVjdG9yLCBleGlzdGluZ0NvbnN0cnVjdG9yLCB7XHJcblx0XHR2ZXJzaW9uOiBwcm90b3R5cGUudmVyc2lvbixcclxuXHRcdC8vIGNvcHkgdGhlIG9iamVjdCB1c2VkIHRvIGNyZWF0ZSB0aGUgcHJvdG90eXBlIGluIGNhc2Ugd2UgbmVlZCB0b1xyXG5cdFx0Ly8gcmVkZWZpbmUgdGhlIHdpZGdldCBsYXRlclxyXG5cdFx0X3Byb3RvOiAkLmV4dGVuZCgge30sIHByb3RvdHlwZSApLFxyXG5cdFx0Ly8gdHJhY2sgd2lkZ2V0cyB0aGF0IGluaGVyaXQgZnJvbSB0aGlzIHdpZGdldCBpbiBjYXNlIHRoaXMgd2lkZ2V0IGlzXHJcblx0XHQvLyByZWRlZmluZWQgYWZ0ZXIgYSB3aWRnZXQgaW5oZXJpdHMgZnJvbSBpdFxyXG5cdFx0X2NoaWxkQ29uc3RydWN0b3JzOiBbXVxyXG5cdH0pO1xyXG5cclxuXHRiYXNlUHJvdG90eXBlID0gbmV3IGJhc2UoKTtcclxuXHQvLyB3ZSBuZWVkIHRvIG1ha2UgdGhlIG9wdGlvbnMgaGFzaCBhIHByb3BlcnR5IGRpcmVjdGx5IG9uIHRoZSBuZXcgaW5zdGFuY2VcclxuXHQvLyBvdGhlcndpc2Ugd2UnbGwgbW9kaWZ5IHRoZSBvcHRpb25zIGhhc2ggb24gdGhlIHByb3RvdHlwZSB0aGF0IHdlJ3JlXHJcblx0Ly8gaW5oZXJpdGluZyBmcm9tXHJcblx0YmFzZVByb3RvdHlwZS5vcHRpb25zID0gJC53aWRnZXQuZXh0ZW5kKCB7fSwgYmFzZVByb3RvdHlwZS5vcHRpb25zICk7XHJcblx0JC5lYWNoKCBwcm90b3R5cGUsIGZ1bmN0aW9uKCBwcm9wLCB2YWx1ZSApIHtcclxuXHRcdGlmICggISQuaXNGdW5jdGlvbiggdmFsdWUgKSApIHtcclxuXHRcdFx0cHJveGllZFByb3RvdHlwZVsgcHJvcCBdID0gdmFsdWU7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHRcdHByb3hpZWRQcm90b3R5cGVbIHByb3AgXSA9IChmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIF9zdXBlciA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIGJhc2UucHJvdG90eXBlWyBwcm9wIF0uYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xyXG5cdFx0XHRcdH0sXHJcblx0XHRcdFx0X3N1cGVyQXBwbHkgPSBmdW5jdGlvbiggYXJncyApIHtcclxuXHRcdFx0XHRcdHJldHVybiBiYXNlLnByb3RvdHlwZVsgcHJvcCBdLmFwcGx5KCB0aGlzLCBhcmdzICk7XHJcblx0XHRcdFx0fTtcclxuXHRcdFx0cmV0dXJuIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHZhciBfX3N1cGVyID0gdGhpcy5fc3VwZXIsXHJcblx0XHRcdFx0XHRfX3N1cGVyQXBwbHkgPSB0aGlzLl9zdXBlckFwcGx5LFxyXG5cdFx0XHRcdFx0cmV0dXJuVmFsdWU7XHJcblxyXG5cdFx0XHRcdHRoaXMuX3N1cGVyID0gX3N1cGVyO1xyXG5cdFx0XHRcdHRoaXMuX3N1cGVyQXBwbHkgPSBfc3VwZXJBcHBseTtcclxuXHJcblx0XHRcdFx0cmV0dXJuVmFsdWUgPSB2YWx1ZS5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XHJcblxyXG5cdFx0XHRcdHRoaXMuX3N1cGVyID0gX19zdXBlcjtcclxuXHRcdFx0XHR0aGlzLl9zdXBlckFwcGx5ID0gX19zdXBlckFwcGx5O1xyXG5cclxuXHRcdFx0XHRyZXR1cm4gcmV0dXJuVmFsdWU7XHJcblx0XHRcdH07XHJcblx0XHR9KSgpO1xyXG5cdH0pO1xyXG5cdGNvbnN0cnVjdG9yLnByb3RvdHlwZSA9ICQud2lkZ2V0LmV4dGVuZCggYmFzZVByb3RvdHlwZSwge1xyXG5cdFx0Ly8gVE9ETzogcmVtb3ZlIHN1cHBvcnQgZm9yIHdpZGdldEV2ZW50UHJlZml4XHJcblx0XHQvLyBhbHdheXMgdXNlIHRoZSBuYW1lICsgYSBjb2xvbiBhcyB0aGUgcHJlZml4LCBlLmcuLCBkcmFnZ2FibGU6c3RhcnRcclxuXHRcdC8vIGRvbid0IHByZWZpeCBmb3Igd2lkZ2V0cyB0aGF0IGFyZW4ndCBET00tYmFzZWRcclxuXHRcdHdpZGdldEV2ZW50UHJlZml4OiBleGlzdGluZ0NvbnN0cnVjdG9yID8gKGJhc2VQcm90b3R5cGUud2lkZ2V0RXZlbnRQcmVmaXggfHwgbmFtZSkgOiBuYW1lXHJcblx0fSwgcHJveGllZFByb3RvdHlwZSwge1xyXG5cdFx0Y29uc3RydWN0b3I6IGNvbnN0cnVjdG9yLFxyXG5cdFx0bmFtZXNwYWNlOiBuYW1lc3BhY2UsXHJcblx0XHR3aWRnZXROYW1lOiBuYW1lLFxyXG5cdFx0d2lkZ2V0RnVsbE5hbWU6IGZ1bGxOYW1lXHJcblx0fSk7XHJcblxyXG5cdC8vIElmIHRoaXMgd2lkZ2V0IGlzIGJlaW5nIHJlZGVmaW5lZCB0aGVuIHdlIG5lZWQgdG8gZmluZCBhbGwgd2lkZ2V0cyB0aGF0XHJcblx0Ly8gYXJlIGluaGVyaXRpbmcgZnJvbSBpdCBhbmQgcmVkZWZpbmUgYWxsIG9mIHRoZW0gc28gdGhhdCB0aGV5IGluaGVyaXQgZnJvbVxyXG5cdC8vIHRoZSBuZXcgdmVyc2lvbiBvZiB0aGlzIHdpZGdldC4gV2UncmUgZXNzZW50aWFsbHkgdHJ5aW5nIHRvIHJlcGxhY2Ugb25lXHJcblx0Ly8gbGV2ZWwgaW4gdGhlIHByb3RvdHlwZSBjaGFpbi5cclxuXHRpZiAoIGV4aXN0aW5nQ29uc3RydWN0b3IgKSB7XHJcblx0XHQkLmVhY2goIGV4aXN0aW5nQ29uc3RydWN0b3IuX2NoaWxkQ29uc3RydWN0b3JzLCBmdW5jdGlvbiggaSwgY2hpbGQgKSB7XHJcblx0XHRcdHZhciBjaGlsZFByb3RvdHlwZSA9IGNoaWxkLnByb3RvdHlwZTtcclxuXHJcblx0XHRcdC8vIHJlZGVmaW5lIHRoZSBjaGlsZCB3aWRnZXQgdXNpbmcgdGhlIHNhbWUgcHJvdG90eXBlIHRoYXQgd2FzXHJcblx0XHRcdC8vIG9yaWdpbmFsbHkgdXNlZCwgYnV0IGluaGVyaXQgZnJvbSB0aGUgbmV3IHZlcnNpb24gb2YgdGhlIGJhc2VcclxuXHRcdFx0JC53aWRnZXQoIGNoaWxkUHJvdG90eXBlLm5hbWVzcGFjZSArIFwiLlwiICsgY2hpbGRQcm90b3R5cGUud2lkZ2V0TmFtZSwgY29uc3RydWN0b3IsIGNoaWxkLl9wcm90byApO1xyXG5cdFx0fSk7XHJcblx0XHQvLyByZW1vdmUgdGhlIGxpc3Qgb2YgZXhpc3RpbmcgY2hpbGQgY29uc3RydWN0b3JzIGZyb20gdGhlIG9sZCBjb25zdHJ1Y3RvclxyXG5cdFx0Ly8gc28gdGhlIG9sZCBjaGlsZCBjb25zdHJ1Y3RvcnMgY2FuIGJlIGdhcmJhZ2UgY29sbGVjdGVkXHJcblx0XHRkZWxldGUgZXhpc3RpbmdDb25zdHJ1Y3Rvci5fY2hpbGRDb25zdHJ1Y3RvcnM7XHJcblx0fSBlbHNlIHtcclxuXHRcdGJhc2UuX2NoaWxkQ29uc3RydWN0b3JzLnB1c2goIGNvbnN0cnVjdG9yICk7XHJcblx0fVxyXG5cclxuXHQkLndpZGdldC5icmlkZ2UoIG5hbWUsIGNvbnN0cnVjdG9yICk7XHJcblxyXG5cdHJldHVybiBjb25zdHJ1Y3RvcjtcclxufTtcclxuXHJcbiQud2lkZ2V0LmV4dGVuZCA9IGZ1bmN0aW9uKCB0YXJnZXQgKSB7XHJcblx0dmFyIGlucHV0ID0gc2xpY2UuY2FsbCggYXJndW1lbnRzLCAxICksXHJcblx0XHRpbnB1dEluZGV4ID0gMCxcclxuXHRcdGlucHV0TGVuZ3RoID0gaW5wdXQubGVuZ3RoLFxyXG5cdFx0a2V5LFxyXG5cdFx0dmFsdWU7XHJcblx0Zm9yICggOyBpbnB1dEluZGV4IDwgaW5wdXRMZW5ndGg7IGlucHV0SW5kZXgrKyApIHtcclxuXHRcdGZvciAoIGtleSBpbiBpbnB1dFsgaW5wdXRJbmRleCBdICkge1xyXG5cdFx0XHR2YWx1ZSA9IGlucHV0WyBpbnB1dEluZGV4IF1bIGtleSBdO1xyXG5cdFx0XHRpZiAoIGlucHV0WyBpbnB1dEluZGV4IF0uaGFzT3duUHJvcGVydHkoIGtleSApICYmIHZhbHVlICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdFx0Ly8gQ2xvbmUgb2JqZWN0c1xyXG5cdFx0XHRcdGlmICggJC5pc1BsYWluT2JqZWN0KCB2YWx1ZSApICkge1xyXG5cdFx0XHRcdFx0dGFyZ2V0WyBrZXkgXSA9ICQuaXNQbGFpbk9iamVjdCggdGFyZ2V0WyBrZXkgXSApID9cclxuXHRcdFx0XHRcdFx0JC53aWRnZXQuZXh0ZW5kKCB7fSwgdGFyZ2V0WyBrZXkgXSwgdmFsdWUgKSA6XHJcblx0XHRcdFx0XHRcdC8vIERvbid0IGV4dGVuZCBzdHJpbmdzLCBhcnJheXMsIGV0Yy4gd2l0aCBvYmplY3RzXHJcblx0XHRcdFx0XHRcdCQud2lkZ2V0LmV4dGVuZCgge30sIHZhbHVlICk7XHJcblx0XHRcdFx0Ly8gQ29weSBldmVyeXRoaW5nIGVsc2UgYnkgcmVmZXJlbmNlXHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdHRhcmdldFsga2V5IF0gPSB2YWx1ZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblx0cmV0dXJuIHRhcmdldDtcclxufTtcclxuXHJcbiQud2lkZ2V0LmJyaWRnZSA9IGZ1bmN0aW9uKCBuYW1lLCBvYmplY3QgKSB7XHJcblx0dmFyIGZ1bGxOYW1lID0gb2JqZWN0LnByb3RvdHlwZS53aWRnZXRGdWxsTmFtZSB8fCBuYW1lO1xyXG5cdCQuZm5bIG5hbWUgXSA9IGZ1bmN0aW9uKCBvcHRpb25zICkge1xyXG5cdFx0dmFyIGlzTWV0aG9kQ2FsbCA9IHR5cGVvZiBvcHRpb25zID09PSBcInN0cmluZ1wiLFxyXG5cdFx0XHRhcmdzID0gc2xpY2UuY2FsbCggYXJndW1lbnRzLCAxICksXHJcblx0XHRcdHJldHVyblZhbHVlID0gdGhpcztcclxuXHJcblx0XHQvLyBhbGxvdyBtdWx0aXBsZSBoYXNoZXMgdG8gYmUgcGFzc2VkIG9uIGluaXRcclxuXHRcdG9wdGlvbnMgPSAhaXNNZXRob2RDYWxsICYmIGFyZ3MubGVuZ3RoID9cclxuXHRcdFx0JC53aWRnZXQuZXh0ZW5kLmFwcGx5KCBudWxsLCBbIG9wdGlvbnMgXS5jb25jYXQoYXJncykgKSA6XHJcblx0XHRcdG9wdGlvbnM7XHJcblxyXG5cdFx0aWYgKCBpc01ldGhvZENhbGwgKSB7XHJcblx0XHRcdHRoaXMuZWFjaChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR2YXIgbWV0aG9kVmFsdWUsXHJcblx0XHRcdFx0XHRpbnN0YW5jZSA9ICQuZGF0YSggdGhpcywgZnVsbE5hbWUgKTtcclxuXHRcdFx0XHRpZiAoIG9wdGlvbnMgPT09IFwiaW5zdGFuY2VcIiApIHtcclxuXHRcdFx0XHRcdHJldHVyblZhbHVlID0gaW5zdGFuY2U7XHJcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmICggIWluc3RhbmNlICkge1xyXG5cdFx0XHRcdFx0cmV0dXJuICQuZXJyb3IoIFwiY2Fubm90IGNhbGwgbWV0aG9kcyBvbiBcIiArIG5hbWUgKyBcIiBwcmlvciB0byBpbml0aWFsaXphdGlvbjsgXCIgK1xyXG5cdFx0XHRcdFx0XHRcImF0dGVtcHRlZCB0byBjYWxsIG1ldGhvZCAnXCIgKyBvcHRpb25zICsgXCInXCIgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWYgKCAhJC5pc0Z1bmN0aW9uKCBpbnN0YW5jZVtvcHRpb25zXSApIHx8IG9wdGlvbnMuY2hhckF0KCAwICkgPT09IFwiX1wiICkge1xyXG5cdFx0XHRcdFx0cmV0dXJuICQuZXJyb3IoIFwibm8gc3VjaCBtZXRob2QgJ1wiICsgb3B0aW9ucyArIFwiJyBmb3IgXCIgKyBuYW1lICsgXCIgd2lkZ2V0IGluc3RhbmNlXCIgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0bWV0aG9kVmFsdWUgPSBpbnN0YW5jZVsgb3B0aW9ucyBdLmFwcGx5KCBpbnN0YW5jZSwgYXJncyApO1xyXG5cdFx0XHRcdGlmICggbWV0aG9kVmFsdWUgIT09IGluc3RhbmNlICYmIG1ldGhvZFZhbHVlICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdFx0XHRyZXR1cm5WYWx1ZSA9IG1ldGhvZFZhbHVlICYmIG1ldGhvZFZhbHVlLmpxdWVyeSA/XHJcblx0XHRcdFx0XHRcdHJldHVyblZhbHVlLnB1c2hTdGFjayggbWV0aG9kVmFsdWUuZ2V0KCkgKSA6XHJcblx0XHRcdFx0XHRcdG1ldGhvZFZhbHVlO1xyXG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLmVhY2goZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0dmFyIGluc3RhbmNlID0gJC5kYXRhKCB0aGlzLCBmdWxsTmFtZSApO1xyXG5cdFx0XHRcdGlmICggaW5zdGFuY2UgKSB7XHJcblx0XHRcdFx0XHRpbnN0YW5jZS5vcHRpb24oIG9wdGlvbnMgfHwge30gKS5faW5pdCgpO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHQkLmRhdGEoIHRoaXMsIGZ1bGxOYW1lLCBuZXcgb2JqZWN0KCBvcHRpb25zLCB0aGlzICkgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiByZXR1cm5WYWx1ZTtcclxuXHR9O1xyXG59O1xyXG5cclxuJC5XaWRnZXQgPSBmdW5jdGlvbiggLyogb3B0aW9ucywgZWxlbWVudCAqLyApIHt9O1xyXG4kLldpZGdldC5fY2hpbGRDb25zdHJ1Y3RvcnMgPSBbXTtcclxuXHJcbiQuV2lkZ2V0LnByb3RvdHlwZSA9IHtcclxuXHR3aWRnZXROYW1lOiBcIndpZGdldFwiLFxyXG5cdHdpZGdldEV2ZW50UHJlZml4OiBcIlwiLFxyXG5cdGRlZmF1bHRFbGVtZW50OiBcIjxkaXY+XCIsXHJcblx0b3B0aW9uczoge1xyXG5cdFx0ZGlzYWJsZWQ6IGZhbHNlLFxyXG5cclxuXHRcdC8vIGNhbGxiYWNrc1xyXG5cdFx0Y3JlYXRlOiBudWxsXHJcblx0fSxcclxuXHRfY3JlYXRlV2lkZ2V0OiBmdW5jdGlvbiggb3B0aW9ucywgZWxlbWVudCApIHtcclxuXHRcdGVsZW1lbnQgPSAkKCBlbGVtZW50IHx8IHRoaXMuZGVmYXVsdEVsZW1lbnQgfHwgdGhpcyApWyAwIF07XHJcblx0XHR0aGlzLmVsZW1lbnQgPSAkKCBlbGVtZW50ICk7XHJcblx0XHR0aGlzLnV1aWQgPSB1dWlkKys7XHJcblx0XHR0aGlzLmV2ZW50TmFtZXNwYWNlID0gXCIuXCIgKyB0aGlzLndpZGdldE5hbWUgKyB0aGlzLnV1aWQ7XHJcblx0XHR0aGlzLm9wdGlvbnMgPSAkLndpZGdldC5leHRlbmQoIHt9LFxyXG5cdFx0XHR0aGlzLm9wdGlvbnMsXHJcblx0XHRcdHRoaXMuX2dldENyZWF0ZU9wdGlvbnMoKSxcclxuXHRcdFx0b3B0aW9ucyApO1xyXG5cclxuXHRcdHRoaXMuYmluZGluZ3MgPSAkKCk7XHJcblx0XHR0aGlzLmhvdmVyYWJsZSA9ICQoKTtcclxuXHRcdHRoaXMuZm9jdXNhYmxlID0gJCgpO1xyXG5cclxuXHRcdGlmICggZWxlbWVudCAhPT0gdGhpcyApIHtcclxuXHRcdFx0JC5kYXRhKCBlbGVtZW50LCB0aGlzLndpZGdldEZ1bGxOYW1lLCB0aGlzICk7XHJcblx0XHRcdHRoaXMuX29uKCB0cnVlLCB0aGlzLmVsZW1lbnQsIHtcclxuXHRcdFx0XHRyZW1vdmU6IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdFx0XHRcdGlmICggZXZlbnQudGFyZ2V0ID09PSBlbGVtZW50ICkge1xyXG5cdFx0XHRcdFx0XHR0aGlzLmRlc3Ryb3koKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0XHR0aGlzLmRvY3VtZW50ID0gJCggZWxlbWVudC5zdHlsZSA/XHJcblx0XHRcdFx0Ly8gZWxlbWVudCB3aXRoaW4gdGhlIGRvY3VtZW50XHJcblx0XHRcdFx0ZWxlbWVudC5vd25lckRvY3VtZW50IDpcclxuXHRcdFx0XHQvLyBlbGVtZW50IGlzIHdpbmRvdyBvciBkb2N1bWVudFxyXG5cdFx0XHRcdGVsZW1lbnQuZG9jdW1lbnQgfHwgZWxlbWVudCApO1xyXG5cdFx0XHR0aGlzLndpbmRvdyA9ICQoIHRoaXMuZG9jdW1lbnRbMF0uZGVmYXVsdFZpZXcgfHwgdGhpcy5kb2N1bWVudFswXS5wYXJlbnRXaW5kb3cgKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl9jcmVhdGUoKTtcclxuXHRcdHRoaXMuX3RyaWdnZXIoIFwiY3JlYXRlXCIsIG51bGwsIHRoaXMuX2dldENyZWF0ZUV2ZW50RGF0YSgpICk7XHJcblx0XHR0aGlzLl9pbml0KCk7XHJcblx0fSxcclxuXHRfZ2V0Q3JlYXRlT3B0aW9uczogJC5ub29wLFxyXG5cdF9nZXRDcmVhdGVFdmVudERhdGE6ICQubm9vcCxcclxuXHRfY3JlYXRlOiAkLm5vb3AsXHJcblx0X2luaXQ6ICQubm9vcCxcclxuXHJcblx0ZGVzdHJveTogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9kZXN0cm95KCk7XHJcblx0XHQvLyB3ZSBjYW4gcHJvYmFibHkgcmVtb3ZlIHRoZSB1bmJpbmQgY2FsbHMgaW4gMi4wXHJcblx0XHQvLyBhbGwgZXZlbnQgYmluZGluZ3Mgc2hvdWxkIGdvIHRocm91Z2ggdGhpcy5fb24oKVxyXG5cdFx0dGhpcy5lbGVtZW50XHJcblx0XHRcdC51bmJpbmQoIHRoaXMuZXZlbnROYW1lc3BhY2UgKVxyXG5cdFx0XHQucmVtb3ZlRGF0YSggdGhpcy53aWRnZXRGdWxsTmFtZSApXHJcblx0XHRcdC8vIHN1cHBvcnQ6IGpxdWVyeSA8MS42LjNcclxuXHRcdFx0Ly8gaHR0cDovL2J1Z3MuanF1ZXJ5LmNvbS90aWNrZXQvOTQxM1xyXG5cdFx0XHQucmVtb3ZlRGF0YSggJC5jYW1lbENhc2UoIHRoaXMud2lkZ2V0RnVsbE5hbWUgKSApO1xyXG5cdFx0dGhpcy53aWRnZXQoKVxyXG5cdFx0XHQudW5iaW5kKCB0aGlzLmV2ZW50TmFtZXNwYWNlIClcclxuXHRcdFx0LnJlbW92ZUF0dHIoIFwiYXJpYS1kaXNhYmxlZFwiIClcclxuXHRcdFx0LnJlbW92ZUNsYXNzKFxyXG5cdFx0XHRcdHRoaXMud2lkZ2V0RnVsbE5hbWUgKyBcIi1kaXNhYmxlZCBcIiArXHJcblx0XHRcdFx0XCJ1aS1zdGF0ZS1kaXNhYmxlZFwiICk7XHJcblxyXG5cdFx0Ly8gY2xlYW4gdXAgZXZlbnRzIGFuZCBzdGF0ZXNcclxuXHRcdHRoaXMuYmluZGluZ3MudW5iaW5kKCB0aGlzLmV2ZW50TmFtZXNwYWNlICk7XHJcblx0XHR0aGlzLmhvdmVyYWJsZS5yZW1vdmVDbGFzcyggXCJ1aS1zdGF0ZS1ob3ZlclwiICk7XHJcblx0XHR0aGlzLmZvY3VzYWJsZS5yZW1vdmVDbGFzcyggXCJ1aS1zdGF0ZS1mb2N1c1wiICk7XHJcblx0fSxcclxuXHRfZGVzdHJveTogJC5ub29wLFxyXG5cclxuXHR3aWRnZXQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuIHRoaXMuZWxlbWVudDtcclxuXHR9LFxyXG5cclxuXHRvcHRpb246IGZ1bmN0aW9uKCBrZXksIHZhbHVlICkge1xyXG5cdFx0dmFyIG9wdGlvbnMgPSBrZXksXHJcblx0XHRcdHBhcnRzLFxyXG5cdFx0XHRjdXJPcHRpb24sXHJcblx0XHRcdGk7XHJcblxyXG5cdFx0aWYgKCBhcmd1bWVudHMubGVuZ3RoID09PSAwICkge1xyXG5cdFx0XHQvLyBkb24ndCByZXR1cm4gYSByZWZlcmVuY2UgdG8gdGhlIGludGVybmFsIGhhc2hcclxuXHRcdFx0cmV0dXJuICQud2lkZ2V0LmV4dGVuZCgge30sIHRoaXMub3B0aW9ucyApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggdHlwZW9mIGtleSA9PT0gXCJzdHJpbmdcIiApIHtcclxuXHRcdFx0Ly8gaGFuZGxlIG5lc3RlZCBrZXlzLCBlLmcuLCBcImZvby5iYXJcIiA9PiB7IGZvbzogeyBiYXI6IF9fXyB9IH1cclxuXHRcdFx0b3B0aW9ucyA9IHt9O1xyXG5cdFx0XHRwYXJ0cyA9IGtleS5zcGxpdCggXCIuXCIgKTtcclxuXHRcdFx0a2V5ID0gcGFydHMuc2hpZnQoKTtcclxuXHRcdFx0aWYgKCBwYXJ0cy5sZW5ndGggKSB7XHJcblx0XHRcdFx0Y3VyT3B0aW9uID0gb3B0aW9uc1sga2V5IF0gPSAkLndpZGdldC5leHRlbmQoIHt9LCB0aGlzLm9wdGlvbnNbIGtleSBdICk7XHJcblx0XHRcdFx0Zm9yICggaSA9IDA7IGkgPCBwYXJ0cy5sZW5ndGggLSAxOyBpKysgKSB7XHJcblx0XHRcdFx0XHRjdXJPcHRpb25bIHBhcnRzWyBpIF0gXSA9IGN1ck9wdGlvblsgcGFydHNbIGkgXSBdIHx8IHt9O1xyXG5cdFx0XHRcdFx0Y3VyT3B0aW9uID0gY3VyT3B0aW9uWyBwYXJ0c1sgaSBdIF07XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGtleSA9IHBhcnRzLnBvcCgpO1xyXG5cdFx0XHRcdGlmICggdmFsdWUgPT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0XHRcdHJldHVybiBjdXJPcHRpb25bIGtleSBdID09PSB1bmRlZmluZWQgPyBudWxsIDogY3VyT3B0aW9uWyBrZXkgXTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0Y3VyT3B0aW9uWyBrZXkgXSA9IHZhbHVlO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGlmICggdmFsdWUgPT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0XHRcdHJldHVybiB0aGlzLm9wdGlvbnNbIGtleSBdID09PSB1bmRlZmluZWQgPyBudWxsIDogdGhpcy5vcHRpb25zWyBrZXkgXTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0b3B0aW9uc1sga2V5IF0gPSB2YWx1ZTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX3NldE9wdGlvbnMoIG9wdGlvbnMgKTtcclxuXHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9LFxyXG5cdF9zZXRPcHRpb25zOiBmdW5jdGlvbiggb3B0aW9ucyApIHtcclxuXHRcdHZhciBrZXk7XHJcblxyXG5cdFx0Zm9yICgga2V5IGluIG9wdGlvbnMgKSB7XHJcblx0XHRcdHRoaXMuX3NldE9wdGlvbigga2V5LCBvcHRpb25zWyBrZXkgXSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH0sXHJcblx0X3NldE9wdGlvbjogZnVuY3Rpb24oIGtleSwgdmFsdWUgKSB7XHJcblx0XHR0aGlzLm9wdGlvbnNbIGtleSBdID0gdmFsdWU7XHJcblxyXG5cdFx0aWYgKCBrZXkgPT09IFwiZGlzYWJsZWRcIiApIHtcclxuXHRcdFx0dGhpcy53aWRnZXQoKVxyXG5cdFx0XHRcdC50b2dnbGVDbGFzcyggdGhpcy53aWRnZXRGdWxsTmFtZSArIFwiLWRpc2FibGVkXCIsICEhdmFsdWUgKTtcclxuXHRcdFx0dGhpcy5ob3ZlcmFibGUucmVtb3ZlQ2xhc3MoIFwidWktc3RhdGUtaG92ZXJcIiApO1xyXG5cdFx0XHR0aGlzLmZvY3VzYWJsZS5yZW1vdmVDbGFzcyggXCJ1aS1zdGF0ZS1mb2N1c1wiICk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fSxcclxuXHJcblx0ZW5hYmxlOiBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiB0aGlzLl9zZXRPcHRpb25zKHsgZGlzYWJsZWQ6IGZhbHNlIH0pO1xyXG5cdH0sXHJcblx0ZGlzYWJsZTogZnVuY3Rpb24oKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5fc2V0T3B0aW9ucyh7IGRpc2FibGVkOiB0cnVlIH0pO1xyXG5cdH0sXHJcblxyXG5cdF9vbjogZnVuY3Rpb24oIHN1cHByZXNzRGlzYWJsZWRDaGVjaywgZWxlbWVudCwgaGFuZGxlcnMgKSB7XHJcblx0XHR2YXIgZGVsZWdhdGVFbGVtZW50LFxyXG5cdFx0XHRpbnN0YW5jZSA9IHRoaXM7XHJcblxyXG5cdFx0Ly8gbm8gc3VwcHJlc3NEaXNhYmxlZENoZWNrIGZsYWcsIHNodWZmbGUgYXJndW1lbnRzXHJcblx0XHRpZiAoIHR5cGVvZiBzdXBwcmVzc0Rpc2FibGVkQ2hlY2sgIT09IFwiYm9vbGVhblwiICkge1xyXG5cdFx0XHRoYW5kbGVycyA9IGVsZW1lbnQ7XHJcblx0XHRcdGVsZW1lbnQgPSBzdXBwcmVzc0Rpc2FibGVkQ2hlY2s7XHJcblx0XHRcdHN1cHByZXNzRGlzYWJsZWRDaGVjayA9IGZhbHNlO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIG5vIGVsZW1lbnQgYXJndW1lbnQsIHNodWZmbGUgYW5kIHVzZSB0aGlzLmVsZW1lbnRcclxuXHRcdGlmICggIWhhbmRsZXJzICkge1xyXG5cdFx0XHRoYW5kbGVycyA9IGVsZW1lbnQ7XHJcblx0XHRcdGVsZW1lbnQgPSB0aGlzLmVsZW1lbnQ7XHJcblx0XHRcdGRlbGVnYXRlRWxlbWVudCA9IHRoaXMud2lkZ2V0KCk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHQvLyBhY2NlcHQgc2VsZWN0b3JzLCBET00gZWxlbWVudHNcclxuXHRcdFx0ZWxlbWVudCA9IGRlbGVnYXRlRWxlbWVudCA9ICQoIGVsZW1lbnQgKTtcclxuXHRcdFx0dGhpcy5iaW5kaW5ncyA9IHRoaXMuYmluZGluZ3MuYWRkKCBlbGVtZW50ICk7XHJcblx0XHR9XHJcblxyXG5cdFx0JC5lYWNoKCBoYW5kbGVycywgZnVuY3Rpb24oIGV2ZW50LCBoYW5kbGVyICkge1xyXG5cdFx0XHRmdW5jdGlvbiBoYW5kbGVyUHJveHkoKSB7XHJcblx0XHRcdFx0Ly8gYWxsb3cgd2lkZ2V0cyB0byBjdXN0b21pemUgdGhlIGRpc2FibGVkIGhhbmRsaW5nXHJcblx0XHRcdFx0Ly8gLSBkaXNhYmxlZCBhcyBhbiBhcnJheSBpbnN0ZWFkIG9mIGJvb2xlYW5cclxuXHRcdFx0XHQvLyAtIGRpc2FibGVkIGNsYXNzIGFzIG1ldGhvZCBmb3IgZGlzYWJsaW5nIGluZGl2aWR1YWwgcGFydHNcclxuXHRcdFx0XHRpZiAoICFzdXBwcmVzc0Rpc2FibGVkQ2hlY2sgJiZcclxuXHRcdFx0XHRcdFx0KCBpbnN0YW5jZS5vcHRpb25zLmRpc2FibGVkID09PSB0cnVlIHx8XHJcblx0XHRcdFx0XHRcdFx0JCggdGhpcyApLmhhc0NsYXNzKCBcInVpLXN0YXRlLWRpc2FibGVkXCIgKSApICkge1xyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRyZXR1cm4gKCB0eXBlb2YgaGFuZGxlciA9PT0gXCJzdHJpbmdcIiA/IGluc3RhbmNlWyBoYW5kbGVyIF0gOiBoYW5kbGVyIClcclxuXHRcdFx0XHRcdC5hcHBseSggaW5zdGFuY2UsIGFyZ3VtZW50cyApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBjb3B5IHRoZSBndWlkIHNvIGRpcmVjdCB1bmJpbmRpbmcgd29ya3NcclxuXHRcdFx0aWYgKCB0eXBlb2YgaGFuZGxlciAhPT0gXCJzdHJpbmdcIiApIHtcclxuXHRcdFx0XHRoYW5kbGVyUHJveHkuZ3VpZCA9IGhhbmRsZXIuZ3VpZCA9XHJcblx0XHRcdFx0XHRoYW5kbGVyLmd1aWQgfHwgaGFuZGxlclByb3h5Lmd1aWQgfHwgJC5ndWlkKys7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHZhciBtYXRjaCA9IGV2ZW50Lm1hdGNoKCAvXihcXHcrKVxccyooLiopJC8gKSxcclxuXHRcdFx0XHRldmVudE5hbWUgPSBtYXRjaFsxXSArIGluc3RhbmNlLmV2ZW50TmFtZXNwYWNlLFxyXG5cdFx0XHRcdHNlbGVjdG9yID0gbWF0Y2hbMl07XHJcblx0XHRcdGlmICggc2VsZWN0b3IgKSB7XHJcblx0XHRcdFx0ZGVsZWdhdGVFbGVtZW50LmRlbGVnYXRlKCBzZWxlY3RvciwgZXZlbnROYW1lLCBoYW5kbGVyUHJveHkgKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRlbGVtZW50LmJpbmQoIGV2ZW50TmFtZSwgaGFuZGxlclByb3h5ICk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH0sXHJcblxyXG5cdF9vZmY6IGZ1bmN0aW9uKCBlbGVtZW50LCBldmVudE5hbWUgKSB7XHJcblx0XHRldmVudE5hbWUgPSAoZXZlbnROYW1lIHx8IFwiXCIpLnNwbGl0KCBcIiBcIiApLmpvaW4oIHRoaXMuZXZlbnROYW1lc3BhY2UgKyBcIiBcIiApICsgdGhpcy5ldmVudE5hbWVzcGFjZTtcclxuXHRcdGVsZW1lbnQudW5iaW5kKCBldmVudE5hbWUgKS51bmRlbGVnYXRlKCBldmVudE5hbWUgKTtcclxuXHR9LFxyXG5cclxuXHRfZGVsYXk6IGZ1bmN0aW9uKCBoYW5kbGVyLCBkZWxheSApIHtcclxuXHRcdGZ1bmN0aW9uIGhhbmRsZXJQcm94eSgpIHtcclxuXHRcdFx0cmV0dXJuICggdHlwZW9mIGhhbmRsZXIgPT09IFwic3RyaW5nXCIgPyBpbnN0YW5jZVsgaGFuZGxlciBdIDogaGFuZGxlciApXHJcblx0XHRcdFx0LmFwcGx5KCBpbnN0YW5jZSwgYXJndW1lbnRzICk7XHJcblx0XHR9XHJcblx0XHR2YXIgaW5zdGFuY2UgPSB0aGlzO1xyXG5cdFx0cmV0dXJuIHNldFRpbWVvdXQoIGhhbmRsZXJQcm94eSwgZGVsYXkgfHwgMCApO1xyXG5cdH0sXHJcblxyXG5cdF9ob3ZlcmFibGU6IGZ1bmN0aW9uKCBlbGVtZW50ICkge1xyXG5cdFx0dGhpcy5ob3ZlcmFibGUgPSB0aGlzLmhvdmVyYWJsZS5hZGQoIGVsZW1lbnQgKTtcclxuXHRcdHRoaXMuX29uKCBlbGVtZW50LCB7XHJcblx0XHRcdG1vdXNlZW50ZXI6IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdFx0XHQkKCBldmVudC5jdXJyZW50VGFyZ2V0ICkuYWRkQ2xhc3MoIFwidWktc3RhdGUtaG92ZXJcIiApO1xyXG5cdFx0XHR9LFxyXG5cdFx0XHRtb3VzZWxlYXZlOiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHRcdFx0JCggZXZlbnQuY3VycmVudFRhcmdldCApLnJlbW92ZUNsYXNzKCBcInVpLXN0YXRlLWhvdmVyXCIgKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fSxcclxuXHJcblx0X2ZvY3VzYWJsZTogZnVuY3Rpb24oIGVsZW1lbnQgKSB7XHJcblx0XHR0aGlzLmZvY3VzYWJsZSA9IHRoaXMuZm9jdXNhYmxlLmFkZCggZWxlbWVudCApO1xyXG5cdFx0dGhpcy5fb24oIGVsZW1lbnQsIHtcclxuXHRcdFx0Zm9jdXNpbjogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0XHRcdCQoIGV2ZW50LmN1cnJlbnRUYXJnZXQgKS5hZGRDbGFzcyggXCJ1aS1zdGF0ZS1mb2N1c1wiICk7XHJcblx0XHRcdH0sXHJcblx0XHRcdGZvY3Vzb3V0OiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHRcdFx0JCggZXZlbnQuY3VycmVudFRhcmdldCApLnJlbW92ZUNsYXNzKCBcInVpLXN0YXRlLWZvY3VzXCIgKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fSxcclxuXHJcblx0X3RyaWdnZXI6IGZ1bmN0aW9uKCB0eXBlLCBldmVudCwgZGF0YSApIHtcclxuXHRcdHZhciBwcm9wLCBvcmlnLFxyXG5cdFx0XHRjYWxsYmFjayA9IHRoaXMub3B0aW9uc1sgdHlwZSBdO1xyXG5cclxuXHRcdGRhdGEgPSBkYXRhIHx8IHt9O1xyXG5cdFx0ZXZlbnQgPSAkLkV2ZW50KCBldmVudCApO1xyXG5cdFx0ZXZlbnQudHlwZSA9ICggdHlwZSA9PT0gdGhpcy53aWRnZXRFdmVudFByZWZpeCA/XHJcblx0XHRcdHR5cGUgOlxyXG5cdFx0XHR0aGlzLndpZGdldEV2ZW50UHJlZml4ICsgdHlwZSApLnRvTG93ZXJDYXNlKCk7XHJcblx0XHQvLyB0aGUgb3JpZ2luYWwgZXZlbnQgbWF5IGNvbWUgZnJvbSBhbnkgZWxlbWVudFxyXG5cdFx0Ly8gc28gd2UgbmVlZCB0byByZXNldCB0aGUgdGFyZ2V0IG9uIHRoZSBuZXcgZXZlbnRcclxuXHRcdGV2ZW50LnRhcmdldCA9IHRoaXMuZWxlbWVudFsgMCBdO1xyXG5cclxuXHRcdC8vIGNvcHkgb3JpZ2luYWwgZXZlbnQgcHJvcGVydGllcyBvdmVyIHRvIHRoZSBuZXcgZXZlbnRcclxuXHRcdG9yaWcgPSBldmVudC5vcmlnaW5hbEV2ZW50O1xyXG5cdFx0aWYgKCBvcmlnICkge1xyXG5cdFx0XHRmb3IgKCBwcm9wIGluIG9yaWcgKSB7XHJcblx0XHRcdFx0aWYgKCAhKCBwcm9wIGluIGV2ZW50ICkgKSB7XHJcblx0XHRcdFx0XHRldmVudFsgcHJvcCBdID0gb3JpZ1sgcHJvcCBdO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuZWxlbWVudC50cmlnZ2VyKCBldmVudCwgZGF0YSApO1xyXG5cdFx0cmV0dXJuICEoICQuaXNGdW5jdGlvbiggY2FsbGJhY2sgKSAmJlxyXG5cdFx0XHRjYWxsYmFjay5hcHBseSggdGhpcy5lbGVtZW50WzBdLCBbIGV2ZW50IF0uY29uY2F0KCBkYXRhICkgKSA9PT0gZmFsc2UgfHxcclxuXHRcdFx0ZXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkgKTtcclxuXHR9XHJcbn07XHJcblxyXG4kLmVhY2goIHsgc2hvdzogXCJmYWRlSW5cIiwgaGlkZTogXCJmYWRlT3V0XCIgfSwgZnVuY3Rpb24oIG1ldGhvZCwgZGVmYXVsdEVmZmVjdCApIHtcclxuXHQkLldpZGdldC5wcm90b3R5cGVbIFwiX1wiICsgbWV0aG9kIF0gPSBmdW5jdGlvbiggZWxlbWVudCwgb3B0aW9ucywgY2FsbGJhY2sgKSB7XHJcblx0XHRpZiAoIHR5cGVvZiBvcHRpb25zID09PSBcInN0cmluZ1wiICkge1xyXG5cdFx0XHRvcHRpb25zID0geyBlZmZlY3Q6IG9wdGlvbnMgfTtcclxuXHRcdH1cclxuXHRcdHZhciBoYXNPcHRpb25zLFxyXG5cdFx0XHRlZmZlY3ROYW1lID0gIW9wdGlvbnMgP1xyXG5cdFx0XHRcdG1ldGhvZCA6XHJcblx0XHRcdFx0b3B0aW9ucyA9PT0gdHJ1ZSB8fCB0eXBlb2Ygb3B0aW9ucyA9PT0gXCJudW1iZXJcIiA/XHJcblx0XHRcdFx0XHRkZWZhdWx0RWZmZWN0IDpcclxuXHRcdFx0XHRcdG9wdGlvbnMuZWZmZWN0IHx8IGRlZmF1bHRFZmZlY3Q7XHJcblx0XHRvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcclxuXHRcdGlmICggdHlwZW9mIG9wdGlvbnMgPT09IFwibnVtYmVyXCIgKSB7XHJcblx0XHRcdG9wdGlvbnMgPSB7IGR1cmF0aW9uOiBvcHRpb25zIH07XHJcblx0XHR9XHJcblx0XHRoYXNPcHRpb25zID0gISQuaXNFbXB0eU9iamVjdCggb3B0aW9ucyApO1xyXG5cdFx0b3B0aW9ucy5jb21wbGV0ZSA9IGNhbGxiYWNrO1xyXG5cdFx0aWYgKCBvcHRpb25zLmRlbGF5ICkge1xyXG5cdFx0XHRlbGVtZW50LmRlbGF5KCBvcHRpb25zLmRlbGF5ICk7XHJcblx0XHR9XHJcblx0XHRpZiAoIGhhc09wdGlvbnMgJiYgJC5lZmZlY3RzICYmICQuZWZmZWN0cy5lZmZlY3RbIGVmZmVjdE5hbWUgXSApIHtcclxuXHRcdFx0ZWxlbWVudFsgbWV0aG9kIF0oIG9wdGlvbnMgKTtcclxuXHRcdH0gZWxzZSBpZiAoIGVmZmVjdE5hbWUgIT09IG1ldGhvZCAmJiBlbGVtZW50WyBlZmZlY3ROYW1lIF0gKSB7XHJcblx0XHRcdGVsZW1lbnRbIGVmZmVjdE5hbWUgXSggb3B0aW9ucy5kdXJhdGlvbiwgb3B0aW9ucy5lYXNpbmcsIGNhbGxiYWNrICk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRlbGVtZW50LnF1ZXVlKGZ1bmN0aW9uKCBuZXh0ICkge1xyXG5cdFx0XHRcdCQoIHRoaXMgKVsgbWV0aG9kIF0oKTtcclxuXHRcdFx0XHRpZiAoIGNhbGxiYWNrICkge1xyXG5cdFx0XHRcdFx0Y2FsbGJhY2suY2FsbCggZWxlbWVudFsgMCBdICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdG5leHQoKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0fTtcclxufSk7XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHdpbmRvdywgdW5kZWZpbmVkICkge1xyXG5cdHZhciBuc05vcm1hbGl6ZURpY3QgPSB7fSxcclxuXHRcdG9sZEZpbmQgPSAkLmZpbmQsXHJcblx0XHRyYnJhY2UgPSAvKD86XFx7W1xcc1xcU10qXFx9fFxcW1tcXHNcXFNdKlxcXSkkLyxcclxuXHRcdGpxbURhdGFSRSA9IC86anFtRGF0YVxcKChbXildKilcXCkvZztcclxuXHJcblx0JC5leHRlbmQoICQubW9iaWxlLCB7XHJcblxyXG5cdFx0Ly8gTmFtZXNwYWNlIHVzZWQgZnJhbWV3b3JrLXdpZGUgZm9yIGRhdGEtYXR0cnMuIERlZmF1bHQgaXMgbm8gbmFtZXNwYWNlXHJcblxyXG5cdFx0bnM6IFwiXCIsXHJcblxyXG5cdFx0Ly8gUmV0cmlldmUgYW4gYXR0cmlidXRlIGZyb20gYW4gZWxlbWVudCBhbmQgcGVyZm9ybSBzb21lIG1hc3NhZ2luZyBvZiB0aGUgdmFsdWVcclxuXHJcblx0XHRnZXRBdHRyaWJ1dGU6IGZ1bmN0aW9uKCBlbGVtZW50LCBrZXkgKSB7XHJcblx0XHRcdHZhciBkYXRhO1xyXG5cclxuXHRcdFx0ZWxlbWVudCA9IGVsZW1lbnQuanF1ZXJ5ID8gZWxlbWVudFswXSA6IGVsZW1lbnQ7XHJcblxyXG5cdFx0XHRpZiAoIGVsZW1lbnQgJiYgZWxlbWVudC5nZXRBdHRyaWJ1dGUgKSB7XHJcblx0XHRcdFx0ZGF0YSA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKCBcImRhdGEtXCIgKyAkLm1vYmlsZS5ucyArIGtleSApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBDb3BpZWQgZnJvbSBjb3JlJ3Mgc3JjL2RhdGEuanM6ZGF0YUF0dHIoKVxyXG5cdFx0XHQvLyBDb252ZXJ0IGZyb20gYSBzdHJpbmcgdG8gYSBwcm9wZXIgZGF0YSB0eXBlXHJcblx0XHRcdHRyeSB7XHJcblx0XHRcdFx0ZGF0YSA9IGRhdGEgPT09IFwidHJ1ZVwiID8gdHJ1ZSA6XHJcblx0XHRcdFx0XHRkYXRhID09PSBcImZhbHNlXCIgPyBmYWxzZSA6XHJcblx0XHRcdFx0XHRkYXRhID09PSBcIm51bGxcIiA/IG51bGwgOlxyXG5cdFx0XHRcdFx0Ly8gT25seSBjb252ZXJ0IHRvIGEgbnVtYmVyIGlmIGl0IGRvZXNuJ3QgY2hhbmdlIHRoZSBzdHJpbmdcclxuXHRcdFx0XHRcdCtkYXRhICsgXCJcIiA9PT0gZGF0YSA/ICtkYXRhIDpcclxuXHRcdFx0XHRcdHJicmFjZS50ZXN0KCBkYXRhICkgPyBKU09OLnBhcnNlKCBkYXRhICkgOlxyXG5cdFx0XHRcdFx0ZGF0YTtcclxuXHRcdFx0fSBjYXRjaCggZXJyICkge31cclxuXHJcblx0XHRcdHJldHVybiBkYXRhO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvLyBFeHBvc2Ugb3VyIGNhY2hlIGZvciB0ZXN0aW5nIHB1cnBvc2VzLlxyXG5cdFx0bnNOb3JtYWxpemVEaWN0OiBuc05vcm1hbGl6ZURpY3QsXHJcblxyXG5cdFx0Ly8gVGFrZSBhIGRhdGEgYXR0cmlidXRlIHByb3BlcnR5LCBwcmVwZW5kIHRoZSBuYW1lc3BhY2VcclxuXHRcdC8vIGFuZCB0aGVuIGNhbWVsIGNhc2UgdGhlIGF0dHJpYnV0ZSBzdHJpbmcuIEFkZCB0aGUgcmVzdWx0XHJcblx0XHQvLyB0byBvdXIgbnNOb3JtYWxpemVEaWN0IHNvIHdlIGRvbid0IGhhdmUgdG8gZG8gdGhpcyBhZ2Fpbi5cclxuXHRcdG5zTm9ybWFsaXplOiBmdW5jdGlvbiggcHJvcCApIHtcclxuXHRcdFx0cmV0dXJuIG5zTm9ybWFsaXplRGljdFsgcHJvcCBdIHx8XHJcblx0XHRcdFx0KCBuc05vcm1hbGl6ZURpY3RbIHByb3AgXSA9ICQuY2FtZWxDYXNlKCAkLm1vYmlsZS5ucyArIHByb3AgKSApO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvLyBGaW5kIHRoZSBjbG9zZXN0IGphdmFzY3JpcHQgcGFnZSBlbGVtZW50IHRvIGdhdGhlciBzZXR0aW5ncyBkYXRhIGpzcGVyZiB0ZXN0XHJcblx0XHQvLyBodHRwOi8vanNwZXJmLmNvbS9zaW5nbGUtY29tcGxleC1zZWxlY3Rvci12cy1tYW55LWNvbXBsZXgtc2VsZWN0b3JzL2VkaXRcclxuXHRcdC8vIHBvc3NpYmx5IG5haXZlLCBidXQgaXQgc2hvd3MgdGhhdCB0aGUgcGFyc2luZyBvdmVyaGVhZCBmb3IgKmp1c3QqIHRoZSBwYWdlIHNlbGVjdG9yIHZzXHJcblx0XHQvLyB0aGUgcGFnZSBhbmQgZGlhbG9nIHNlbGVjdG9yIGlzIG5lZ2xpZ2FibGUuIFRoaXMgY291bGQgcHJvYmFibHkgYmUgc3BlZWQgdXAgYnlcclxuXHRcdC8vIGRvaW5nIGEgc2ltaWxhciBwYXJlbnQgbm9kZSB0cmF2ZXJzYWwgdG8gdGhlIG9uZSBmb3VuZCBpbiB0aGUgaW5oZXJpdGVkIHRoZW1lIGNvZGUgYWJvdmVcclxuXHRcdGNsb3Nlc3RQYWdlRGF0YTogZnVuY3Rpb24oICR0YXJnZXQgKSB7XHJcblx0XHRcdHJldHVybiAkdGFyZ2V0XHJcblx0XHRcdFx0LmNsb3Nlc3QoIFwiOmpxbURhdGEocm9sZT0ncGFnZScpLCA6anFtRGF0YShyb2xlPSdkaWFsb2cnKVwiIClcclxuXHRcdFx0XHQuZGF0YSggXCJtb2JpbGUtcGFnZVwiICk7XHJcblx0XHR9XHJcblxyXG5cdH0pO1xyXG5cclxuXHQvLyBNb2JpbGUgdmVyc2lvbiBvZiBkYXRhIGFuZCByZW1vdmVEYXRhIGFuZCBoYXNEYXRhIG1ldGhvZHNcclxuXHQvLyBlbnN1cmVzIGFsbCBkYXRhIGlzIHNldCBhbmQgcmV0cmlldmVkIHVzaW5nIGpRdWVyeSBNb2JpbGUncyBkYXRhIG5hbWVzcGFjZVxyXG5cdCQuZm4uanFtRGF0YSA9IGZ1bmN0aW9uKCBwcm9wLCB2YWx1ZSApIHtcclxuXHRcdHZhciByZXN1bHQ7XHJcblx0XHRpZiAoIHR5cGVvZiBwcm9wICE9PSBcInVuZGVmaW5lZFwiICkge1xyXG5cdFx0XHRpZiAoIHByb3AgKSB7XHJcblx0XHRcdFx0cHJvcCA9ICQubW9iaWxlLm5zTm9ybWFsaXplKCBwcm9wICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIHVuZGVmaW5lZCBpcyBwZXJtaXR0ZWQgYXMgYW4gZXhwbGljaXQgaW5wdXQgZm9yIHRoZSBzZWNvbmQgcGFyYW1cclxuXHRcdFx0Ly8gaW4gdGhpcyBjYXNlIGl0IHJldHVybnMgdGhlIHZhbHVlIGFuZCBkb2VzIG5vdCBzZXQgaXQgdG8gdW5kZWZpbmVkXHJcblx0XHRcdGlmICggYXJndW1lbnRzLmxlbmd0aCA8IDIgfHwgdmFsdWUgPT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0XHRyZXN1bHQgPSB0aGlzLmRhdGEoIHByb3AgKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRyZXN1bHQgPSB0aGlzLmRhdGEoIHByb3AsIHZhbHVlICk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHJldHVybiByZXN1bHQ7XHJcblx0fTtcclxuXHJcblx0JC5qcW1EYXRhID0gZnVuY3Rpb24oIGVsZW0sIHByb3AsIHZhbHVlICkge1xyXG5cdFx0dmFyIHJlc3VsdDtcclxuXHRcdGlmICggdHlwZW9mIHByb3AgIT09IFwidW5kZWZpbmVkXCIgKSB7XHJcblx0XHRcdHJlc3VsdCA9ICQuZGF0YSggZWxlbSwgcHJvcCA/ICQubW9iaWxlLm5zTm9ybWFsaXplKCBwcm9wICkgOiBwcm9wLCB2YWx1ZSApO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIHJlc3VsdDtcclxuXHR9O1xyXG5cclxuXHQkLmZuLmpxbVJlbW92ZURhdGEgPSBmdW5jdGlvbiggcHJvcCApIHtcclxuXHRcdHJldHVybiB0aGlzLnJlbW92ZURhdGEoICQubW9iaWxlLm5zTm9ybWFsaXplKCBwcm9wICkgKTtcclxuXHR9O1xyXG5cclxuXHQkLmpxbVJlbW92ZURhdGEgPSBmdW5jdGlvbiggZWxlbSwgcHJvcCApIHtcclxuXHRcdHJldHVybiAkLnJlbW92ZURhdGEoIGVsZW0sICQubW9iaWxlLm5zTm9ybWFsaXplKCBwcm9wICkgKTtcclxuXHR9O1xyXG5cclxuXHQkLmZpbmQgPSBmdW5jdGlvbiggc2VsZWN0b3IsIGNvbnRleHQsIHJldCwgZXh0cmEgKSB7XHJcblx0XHRpZiAoIHNlbGVjdG9yLmluZGV4T2YoIFwiOmpxbURhdGFcIiApID4gLTEgKSB7XHJcblx0XHRcdHNlbGVjdG9yID0gc2VsZWN0b3IucmVwbGFjZSgganFtRGF0YVJFLCBcIltkYXRhLVwiICsgKCAkLm1vYmlsZS5ucyB8fCBcIlwiICkgKyBcIiQxXVwiICk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIG9sZEZpbmQuY2FsbCggdGhpcywgc2VsZWN0b3IsIGNvbnRleHQsIHJldCwgZXh0cmEgKTtcclxuXHR9O1xyXG5cclxuXHQkLmV4dGVuZCggJC5maW5kLCBvbGRGaW5kICk7XHJcblxyXG59KSggalF1ZXJ5LCB0aGlzICk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcbnZhciByY2FwaXRhbHMgPSAvW0EtWl0vZyxcclxuXHRyZXBsYWNlRnVuY3Rpb24gPSBmdW5jdGlvbiggYyApIHtcclxuXHRcdHJldHVybiBcIi1cIiArIGMudG9Mb3dlckNhc2UoKTtcclxuXHR9O1xyXG5cclxuJC5leHRlbmQoICQuV2lkZ2V0LnByb3RvdHlwZSwge1xyXG5cdF9nZXRDcmVhdGVPcHRpb25zOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBvcHRpb24sIHZhbHVlLFxyXG5cdFx0XHRlbGVtID0gdGhpcy5lbGVtZW50WyAwIF0sXHJcblx0XHRcdG9wdGlvbnMgPSB7fTtcclxuXHJcblx0XHQvL1xyXG5cdFx0aWYgKCAhJC5tb2JpbGUuZ2V0QXR0cmlidXRlKCBlbGVtLCBcImRlZmF1bHRzXCIgKSApIHtcclxuXHRcdFx0Zm9yICggb3B0aW9uIGluIHRoaXMub3B0aW9ucyApIHtcclxuXHRcdFx0XHR2YWx1ZSA9ICQubW9iaWxlLmdldEF0dHJpYnV0ZSggZWxlbSwgb3B0aW9uLnJlcGxhY2UoIHJjYXBpdGFscywgcmVwbGFjZUZ1bmN0aW9uICkgKTtcclxuXHJcblx0XHRcdFx0aWYgKCB2YWx1ZSAhPSBudWxsICkge1xyXG5cdFx0XHRcdFx0b3B0aW9uc1sgb3B0aW9uIF0gPSB2YWx1ZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gb3B0aW9ucztcclxuXHR9XHJcbn0pO1xyXG5cclxuLy9UT0RPOiBSZW1vdmUgaW4gMS41IGZvciBiYWNrY29tcGF0IG9ubHlcclxuJC5tb2JpbGUud2lkZ2V0ID0gJC5XaWRnZXQ7XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG5cclxuKGZ1bmN0aW9uKCAkICkge1xyXG5cdC8vIFRPRE8gbW92ZSBsb2FkZXIgY2xhc3MgZG93biBpbnRvIHRoZSB3aWRnZXQgc2V0dGluZ3NcclxuXHR2YXIgbG9hZGVyQ2xhc3MgPSBcInVpLWxvYWRlclwiLCAkaHRtbCA9ICQoIFwiaHRtbFwiICk7XHJcblxyXG5cdCQud2lkZ2V0KCBcIm1vYmlsZS5sb2FkZXJcIiwge1xyXG5cdFx0Ly8gTk9URSBpZiB0aGUgZ2xvYmFsIGNvbmZpZyBzZXR0aW5ncyBhcmUgZGVmaW5lZCB0aGV5IHdpbGwgb3ZlcnJpZGUgdGhlc2VcclxuXHRcdC8vICAgICAgb3B0aW9uc1xyXG5cdFx0b3B0aW9uczoge1xyXG5cdFx0XHQvLyB0aGUgdGhlbWUgZm9yIHRoZSBsb2FkaW5nIG1lc3NhZ2VcclxuXHRcdFx0dGhlbWU6IFwiYVwiLFxyXG5cclxuXHRcdFx0Ly8gd2hldGhlciB0aGUgdGV4dCBpbiB0aGUgbG9hZGluZyBtZXNzYWdlIGlzIHNob3duXHJcblx0XHRcdHRleHRWaXNpYmxlOiBmYWxzZSxcclxuXHJcblx0XHRcdC8vIGN1c3RvbSBodG1sIGZvciB0aGUgaW5uZXIgY29udGVudCBvZiB0aGUgbG9hZGluZyBtZXNzYWdlXHJcblx0XHRcdGh0bWw6IFwiXCIsXHJcblxyXG5cdFx0XHQvLyB0aGUgdGV4dCB0byBiZSBkaXNwbGF5ZWQgd2hlbiB0aGUgcG9wdXAgaXMgc2hvd25cclxuXHRcdFx0dGV4dDogXCJsb2FkaW5nXCJcclxuXHRcdH0sXHJcblxyXG5cdFx0ZGVmYXVsdEh0bWw6IFwiPGRpdiBjbGFzcz0nXCIgKyBsb2FkZXJDbGFzcyArIFwiJz5cIiArXHJcblx0XHRcdFwiPHNwYW4gY2xhc3M9J3VpLWljb24tbG9hZGluZyc+PC9zcGFuPlwiICtcclxuXHRcdFx0XCI8aDE+PC9oMT5cIiArXHJcblx0XHRcdFwiPC9kaXY+XCIsXHJcblxyXG5cdFx0Ly8gRm9yIG5vbi1maXhlZCBzdXBwb3J0aW4gYnJvd3NlcnMuIFBvc2l0aW9uIGF0IHkgY2VudGVyIChpZiBzY3JvbGxUb3Agc3VwcG9ydGVkKSwgYWJvdmUgdGhlIGFjdGl2ZUJ0biAoaWYgZGVmaW5lZCksIG9yIGp1c3QgMTAwcHggZnJvbSB0b3BcclxuXHRcdGZha2VGaXhMb2FkZXI6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgYWN0aXZlQnRuID0gJCggXCIuXCIgKyAkLm1vYmlsZS5hY3RpdmVCdG5DbGFzcyApLmZpcnN0KCk7XHJcblxyXG5cdFx0XHR0aGlzLmVsZW1lbnRcclxuXHRcdFx0XHQuY3NzKHtcclxuXHRcdFx0XHRcdHRvcDogJC5zdXBwb3J0LnNjcm9sbFRvcCAmJiB0aGlzLndpbmRvdy5zY3JvbGxUb3AoKSArIHRoaXMud2luZG93LmhlaWdodCgpIC8gMiB8fFxyXG5cdFx0XHRcdFx0XHRhY3RpdmVCdG4ubGVuZ3RoICYmIGFjdGl2ZUJ0bi5vZmZzZXQoKS50b3AgfHwgMTAwXHJcblx0XHRcdFx0fSk7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vIGNoZWNrIHBvc2l0aW9uIG9mIGxvYWRlciB0byBzZWUgaWYgaXQgYXBwZWFycyB0byBiZSBcImZpeGVkXCIgdG8gY2VudGVyXHJcblx0XHQvLyBpZiBub3QsIHVzZSBhYnMgcG9zaXRpb25pbmdcclxuXHRcdGNoZWNrTG9hZGVyUG9zaXRpb246IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgb2Zmc2V0ID0gdGhpcy5lbGVtZW50Lm9mZnNldCgpLFxyXG5cdFx0XHRcdHNjcm9sbFRvcCA9IHRoaXMud2luZG93LnNjcm9sbFRvcCgpLFxyXG5cdFx0XHRcdHNjcmVlbkhlaWdodCA9ICQubW9iaWxlLmdldFNjcmVlbkhlaWdodCgpO1xyXG5cclxuXHRcdFx0aWYgKCBvZmZzZXQudG9wIDwgc2Nyb2xsVG9wIHx8ICggb2Zmc2V0LnRvcCAtIHNjcm9sbFRvcCApID4gc2NyZWVuSGVpZ2h0ICkge1xyXG5cdFx0XHRcdHRoaXMuZWxlbWVudC5hZGRDbGFzcyggXCJ1aS1sb2FkZXItZmFrZWZpeFwiICk7XHJcblx0XHRcdFx0dGhpcy5mYWtlRml4TG9hZGVyKCk7XHJcblx0XHRcdFx0dGhpcy53aW5kb3dcclxuXHRcdFx0XHRcdC51bmJpbmQoIFwic2Nyb2xsXCIsIHRoaXMuY2hlY2tMb2FkZXJQb3NpdGlvbiApXHJcblx0XHRcdFx0XHQuYmluZCggXCJzY3JvbGxcIiwgJC5wcm94eSggdGhpcy5mYWtlRml4TG9hZGVyLCB0aGlzICkgKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHJcblx0XHRyZXNldEh0bWw6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQuaHRtbCggJCggdGhpcy5kZWZhdWx0SHRtbCApLmh0bWwoKSApO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvLyBUdXJuIG9uL29mZiBwYWdlIGxvYWRpbmcgbWVzc2FnZS4gVGhlbWUgZG91YmxlcyBhcyBhbiBvYmplY3QgYXJndW1lbnRcclxuXHRcdC8vIHdpdGggdGhlIGZvbGxvd2luZyBzaGFwZTogeyB0aGVtZTogJycsIHRleHQ6ICcnLCBodG1sOiAnJywgdGV4dFZpc2libGU6ICcnIH1cclxuXHRcdC8vIE5PVEUgdGhhdCB0aGUgJC5tb2JpbGUubG9hZGluZyogc2V0dGluZ3MgYW5kIHBhcmFtcyBwYXN0IHRoZSBmaXJzdCBhcmUgZGVwcmVjYXRlZFxyXG5cdFx0Ly8gVE9ETyBzd2VldCBqZXN1cyB3ZSBuZWVkIHRvIGJyZWFrIHNvbWUgb2YgdGhpcyBvdXRcclxuXHRcdHNob3c6IGZ1bmN0aW9uKCB0aGVtZSwgbXNnVGV4dCwgdGV4dG9ubHkgKSB7XHJcblx0XHRcdHZhciB0ZXh0VmlzaWJsZSwgbWVzc2FnZSwgbG9hZFNldHRpbmdzO1xyXG5cclxuXHRcdFx0dGhpcy5yZXNldEh0bWwoKTtcclxuXHJcblx0XHRcdC8vIHVzZSB0aGUgcHJvdG90eXBlIG9wdGlvbnMgc28gdGhhdCBwZW9wbGUgY2FuIHNldCB0aGVtIGdsb2JhbGx5IGF0XHJcblx0XHRcdC8vIG1vYmlsZSBpbml0LiBDb25zaXN0ZW5jeSwgaXQncyB3aGF0J3MgZm9yIGRpbm5lclxyXG5cdFx0XHRpZiAoICQudHlwZSggdGhlbWUgKSA9PT0gXCJvYmplY3RcIiApIHtcclxuXHRcdFx0XHRsb2FkU2V0dGluZ3MgPSAkLmV4dGVuZCgge30sIHRoaXMub3B0aW9ucywgdGhlbWUgKTtcclxuXHJcblx0XHRcdFx0dGhlbWUgPSBsb2FkU2V0dGluZ3MudGhlbWU7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0bG9hZFNldHRpbmdzID0gdGhpcy5vcHRpb25zO1xyXG5cclxuXHRcdFx0XHQvLyBoZXJlIHdlIHByZWZlciB0aGUgdGhlbWUgdmFsdWUgcGFzc2VkIGFzIGEgc3RyaW5nIGFyZ3VtZW50LCB0aGVuXHJcblx0XHRcdFx0Ly8gd2UgcHJlZmVyIHRoZSBnbG9iYWwgb3B0aW9uIGJlY2F1c2Ugd2UgY2FuJ3QgdXNlIHVuZGVmaW5lZCBkZWZhdWx0XHJcblx0XHRcdFx0Ly8gcHJvdG90eXBlIG9wdGlvbnMsIHRoZW4gdGhlIHByb3RvdHlwZSBvcHRpb25cclxuXHRcdFx0XHR0aGVtZSA9IHRoZW1lIHx8IGxvYWRTZXR0aW5ncy50aGVtZTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gc2V0IHRoZSBtZXNzYWdlIHRleHQsIHByZWZlciB0aGUgcGFyYW0sIHRoZW4gdGhlIHNldHRpbmdzIG9iamVjdFxyXG5cdFx0XHQvLyB0aGVuIGxvYWRpbmcgbWVzc2FnZVxyXG5cdFx0XHRtZXNzYWdlID0gbXNnVGV4dCB8fCAoIGxvYWRTZXR0aW5ncy50ZXh0ID09PSBmYWxzZSA/IFwiXCIgOiBsb2FkU2V0dGluZ3MudGV4dCApO1xyXG5cclxuXHRcdFx0Ly8gcHJlcGFyZSB0aGUgZG9tXHJcblx0XHRcdCRodG1sLmFkZENsYXNzKCBcInVpLWxvYWRpbmdcIiApO1xyXG5cclxuXHRcdFx0dGV4dFZpc2libGUgPSBsb2FkU2V0dGluZ3MudGV4dFZpc2libGU7XHJcblxyXG5cdFx0XHQvLyBhZGQgdGhlIHByb3BlciBjc3MgZ2l2ZW4gdGhlIG9wdGlvbnMgKHRoZW1lLCB0ZXh0LCBldGMpXHJcblx0XHRcdC8vIEZvcmNlIHRleHQgdmlzaWJpbGl0eSBpZiB0aGUgc2Vjb25kIGFyZ3VtZW50IHdhcyBzdXBwbGllZCwgb3JcclxuXHRcdFx0Ly8gaWYgdGhlIHRleHQgd2FzIGV4cGxpY2l0bHkgc2V0IGluIHRoZSBvYmplY3QgYXJnc1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQuYXR0cihcImNsYXNzXCIsIGxvYWRlckNsYXNzICtcclxuXHRcdFx0XHRcIiB1aS1jb3JuZXItYWxsIHVpLWJvZHktXCIgKyB0aGVtZSArXHJcblx0XHRcdFx0XCIgdWktbG9hZGVyLVwiICsgKCB0ZXh0VmlzaWJsZSB8fCBtc2dUZXh0IHx8IHRoZW1lLnRleHQgPyBcInZlcmJvc2VcIiA6IFwiZGVmYXVsdFwiICkgK1xyXG5cdFx0XHRcdCggbG9hZFNldHRpbmdzLnRleHRvbmx5IHx8IHRleHRvbmx5ID8gXCIgdWktbG9hZGVyLXRleHRvbmx5XCIgOiBcIlwiICkgKTtcclxuXHJcblx0XHRcdC8vIFRPRE8gdmVyaWZ5IHRoYXQganF1ZXJ5LmZuLmh0bWwgaXMgb2sgdG8gdXNlIGluIGJvdGggY2FzZXMgaGVyZVxyXG5cdFx0XHQvLyAgICAgIHRoaXMgbWlnaHQgYmUgb3Zlcmx5IGRlZmVuc2l2ZSBpbiBwcmV2ZW50aW5nIHVua25vd2luZyB4c3NcclxuXHRcdFx0Ly8gaWYgdGhlIGh0bWwgYXR0cmlidXRlIGlzIGRlZmluZWQgb24gdGhlIGxvYWRpbmcgc2V0dGluZ3MsIHVzZSB0aGF0XHJcblx0XHRcdC8vIG90aGVyd2lzZSB1c2UgdGhlIGZhbGxiYWNrcyBmcm9tIGFib3ZlXHJcblx0XHRcdGlmICggbG9hZFNldHRpbmdzLmh0bWwgKSB7XHJcblx0XHRcdFx0dGhpcy5lbGVtZW50Lmh0bWwoIGxvYWRTZXR0aW5ncy5odG1sICk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0dGhpcy5lbGVtZW50LmZpbmQoIFwiaDFcIiApLnRleHQoIG1lc3NhZ2UgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gSWYgdGhlIHBhZ2Vjb250YWluZXIgd2lkZ2V0IGhhcyBiZWVuIGRlZmluZWQgd2UgbWF5IHVzZSB0aGUgOm1vYmlsZS1wYWdlY29udGFpbmVyXHJcblx0XHRcdC8vIGFuZCBhdHRhY2ggdG8gdGhlIGVsZW1lbnQgb24gd2hpY2ggdGhlIHBhZ2Vjb250YWluZXIgd2lkZ2V0IGhhcyBiZWVuIGRlZmluZWQuIElmIG5vdCxcclxuXHRcdFx0Ly8gd2UgYXR0YWNoIHRvIHRoZSBib2R5LlxyXG5cdFx0XHR0aGlzLmVsZW1lbnQuYXBwZW5kVG8oICQubW9iaWxlLnBhZ2Vjb250YWluZXIgP1xyXG5cdFx0XHRcdCQoIFwiOm1vYmlsZS1wYWdlY29udGFpbmVyXCIgKSA6ICQoIFwiYm9keVwiICkgKTtcclxuXHJcblx0XHRcdC8vIGNoZWNrIHRoYXQgdGhlIGxvYWRlciBpcyB2aXNpYmxlXHJcblx0XHRcdHRoaXMuY2hlY2tMb2FkZXJQb3NpdGlvbigpO1xyXG5cclxuXHRcdFx0Ly8gb24gc2Nyb2xsIGNoZWNrIHRoZSBsb2FkZXIgcG9zaXRpb25cclxuXHRcdFx0dGhpcy53aW5kb3cuYmluZCggXCJzY3JvbGxcIiwgJC5wcm94eSggdGhpcy5jaGVja0xvYWRlclBvc2l0aW9uLCB0aGlzICkgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0aGlkZTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdCRodG1sLnJlbW92ZUNsYXNzKCBcInVpLWxvYWRpbmdcIiApO1xyXG5cclxuXHRcdFx0aWYgKCB0aGlzLm9wdGlvbnMudGV4dCApIHtcclxuXHRcdFx0XHR0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3MoIFwidWktbG9hZGVyLWZha2VmaXhcIiApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR0aGlzLndpbmRvdy51bmJpbmQoIFwic2Nyb2xsXCIsIHRoaXMuZmFrZUZpeExvYWRlciApO1xyXG5cdFx0XHR0aGlzLndpbmRvdy51bmJpbmQoIFwic2Nyb2xsXCIsIHRoaXMuY2hlY2tMb2FkZXJQb3NpdGlvbiApO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG5cclxufSkoalF1ZXJ5LCB0aGlzKTtcclxuXHJcblxyXG4vKiFcclxuICogalF1ZXJ5IGhhc2hjaGFuZ2UgZXZlbnQgLSB2MS4zIC0gNy8yMS8yMDEwXHJcbiAqIGh0dHA6Ly9iZW5hbG1hbi5jb20vcHJvamVjdHMvanF1ZXJ5LWhhc2hjaGFuZ2UtcGx1Z2luL1xyXG4gKiBcclxuICogQ29weXJpZ2h0IChjKSAyMDEwIFwiQ293Ym95XCIgQmVuIEFsbWFuXHJcbiAqIER1YWwgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBhbmQgR1BMIGxpY2Vuc2VzLlxyXG4gKiBodHRwOi8vYmVuYWxtYW4uY29tL2Fib3V0L2xpY2Vuc2UvXHJcbiAqL1xyXG5cclxuLy8gU2NyaXB0OiBqUXVlcnkgaGFzaGNoYW5nZSBldmVudFxyXG4vL1xyXG4vLyAqVmVyc2lvbjogMS4zLCBMYXN0IHVwZGF0ZWQ6IDcvMjEvMjAxMCpcclxuLy8gXHJcbi8vIFByb2plY3QgSG9tZSAtIGh0dHA6Ly9iZW5hbG1hbi5jb20vcHJvamVjdHMvanF1ZXJ5LWhhc2hjaGFuZ2UtcGx1Z2luL1xyXG4vLyBHaXRIdWIgICAgICAgLSBodHRwOi8vZ2l0aHViLmNvbS9jb3dib3kvanF1ZXJ5LWhhc2hjaGFuZ2UvXHJcbi8vIFNvdXJjZSAgICAgICAtIGh0dHA6Ly9naXRodWIuY29tL2Nvd2JveS9qcXVlcnktaGFzaGNoYW5nZS9yYXcvbWFzdGVyL2pxdWVyeS5iYS1oYXNoY2hhbmdlLmpzXHJcbi8vIChNaW5pZmllZCkgICAtIGh0dHA6Ly9naXRodWIuY29tL2Nvd2JveS9qcXVlcnktaGFzaGNoYW5nZS9yYXcvbWFzdGVyL2pxdWVyeS5iYS1oYXNoY2hhbmdlLm1pbi5qcyAoMC44a2IgZ3ppcHBlZClcclxuLy8gXHJcbi8vIEFib3V0OiBMaWNlbnNlXHJcbi8vIFxyXG4vLyBDb3B5cmlnaHQgKGMpIDIwMTAgXCJDb3dib3lcIiBCZW4gQWxtYW4sXHJcbi8vIER1YWwgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBhbmQgR1BMIGxpY2Vuc2VzLlxyXG4vLyBodHRwOi8vYmVuYWxtYW4uY29tL2Fib3V0L2xpY2Vuc2UvXHJcbi8vIFxyXG4vLyBBYm91dDogRXhhbXBsZXNcclxuLy8gXHJcbi8vIFRoZXNlIHdvcmtpbmcgZXhhbXBsZXMsIGNvbXBsZXRlIHdpdGggZnVsbHkgY29tbWVudGVkIGNvZGUsIGlsbHVzdHJhdGUgYSBmZXdcclxuLy8gd2F5cyBpbiB3aGljaCB0aGlzIHBsdWdpbiBjYW4gYmUgdXNlZC5cclxuLy8gXHJcbi8vIGhhc2hjaGFuZ2UgZXZlbnQgLSBodHRwOi8vYmVuYWxtYW4uY29tL2NvZGUvcHJvamVjdHMvanF1ZXJ5LWhhc2hjaGFuZ2UvZXhhbXBsZXMvaGFzaGNoYW5nZS9cclxuLy8gZG9jdW1lbnQuZG9tYWluIC0gaHR0cDovL2JlbmFsbWFuLmNvbS9jb2RlL3Byb2plY3RzL2pxdWVyeS1oYXNoY2hhbmdlL2V4YW1wbGVzL2RvY3VtZW50X2RvbWFpbi9cclxuLy8gXHJcbi8vIEFib3V0OiBTdXBwb3J0IGFuZCBUZXN0aW5nXHJcbi8vIFxyXG4vLyBJbmZvcm1hdGlvbiBhYm91dCB3aGF0IHZlcnNpb24gb3IgdmVyc2lvbnMgb2YgalF1ZXJ5IHRoaXMgcGx1Z2luIGhhcyBiZWVuXHJcbi8vIHRlc3RlZCB3aXRoLCB3aGF0IGJyb3dzZXJzIGl0IGhhcyBiZWVuIHRlc3RlZCBpbiwgYW5kIHdoZXJlIHRoZSB1bml0IHRlc3RzXHJcbi8vIHJlc2lkZSAoc28geW91IGNhbiB0ZXN0IGl0IHlvdXJzZWxmKS5cclxuLy8gXHJcbi8vIGpRdWVyeSBWZXJzaW9ucyAtIDEuMi42LCAxLjMuMiwgMS40LjEsIDEuNC4yXHJcbi8vIEJyb3dzZXJzIFRlc3RlZCAtIEludGVybmV0IEV4cGxvcmVyIDYtOCwgRmlyZWZveCAyLTQsIENocm9tZSA1LTYsIFNhZmFyaSAzLjItNSxcclxuLy8gICAgICAgICAgICAgICAgICAgT3BlcmEgOS42LTEwLjYwLCBpUGhvbmUgMy4xLCBBbmRyb2lkIDEuNi0yLjIsIEJsYWNrQmVycnkgNC42LTUuXHJcbi8vIFVuaXQgVGVzdHMgICAgICAtIGh0dHA6Ly9iZW5hbG1hbi5jb20vY29kZS9wcm9qZWN0cy9qcXVlcnktaGFzaGNoYW5nZS91bml0L1xyXG4vLyBcclxuLy8gQWJvdXQ6IEtub3duIGlzc3Vlc1xyXG4vLyBcclxuLy8gV2hpbGUgdGhpcyBqUXVlcnkgaGFzaGNoYW5nZSBldmVudCBpbXBsZW1lbnRhdGlvbiBpcyBxdWl0ZSBzdGFibGUgYW5kXHJcbi8vIHJvYnVzdCwgdGhlcmUgYXJlIGEgZmV3IHVuZm9ydHVuYXRlIGJyb3dzZXIgYnVncyBzdXJyb3VuZGluZyBleHBlY3RlZFxyXG4vLyBoYXNoY2hhbmdlIGV2ZW50LWJhc2VkIGJlaGF2aW9ycywgaW5kZXBlbmRlbnQgb2YgYW55IEphdmFTY3JpcHRcclxuLy8gd2luZG93Lm9uaGFzaGNoYW5nZSBhYnN0cmFjdGlvbi4gU2VlIHRoZSBmb2xsb3dpbmcgZXhhbXBsZXMgZm9yIG1vcmVcclxuLy8gaW5mb3JtYXRpb246XHJcbi8vIFxyXG4vLyBDaHJvbWU6IEJhY2sgQnV0dG9uIC0gaHR0cDovL2JlbmFsbWFuLmNvbS9jb2RlL3Byb2plY3RzL2pxdWVyeS1oYXNoY2hhbmdlL2V4YW1wbGVzL2J1Zy1jaHJvbWUtYmFjay1idXR0b24vXHJcbi8vIEZpcmVmb3g6IFJlbW90ZSBYTUxIdHRwUmVxdWVzdCAtIGh0dHA6Ly9iZW5hbG1hbi5jb20vY29kZS9wcm9qZWN0cy9qcXVlcnktaGFzaGNoYW5nZS9leGFtcGxlcy9idWctZmlyZWZveC1yZW1vdGUteGhyL1xyXG4vLyBXZWJLaXQ6IEJhY2sgQnV0dG9uIGluIGFuIElmcmFtZSAtIGh0dHA6Ly9iZW5hbG1hbi5jb20vY29kZS9wcm9qZWN0cy9qcXVlcnktaGFzaGNoYW5nZS9leGFtcGxlcy9idWctd2Via2l0LWhhc2gtaWZyYW1lL1xyXG4vLyBTYWZhcmk6IEJhY2sgQnV0dG9uIGZyb20gYSBkaWZmZXJlbnQgZG9tYWluIC0gaHR0cDovL2JlbmFsbWFuLmNvbS9jb2RlL3Byb2plY3RzL2pxdWVyeS1oYXNoY2hhbmdlL2V4YW1wbGVzL2J1Zy1zYWZhcmktYmFjay1mcm9tLWRpZmYtZG9tYWluL1xyXG4vLyBcclxuLy8gQWxzbyBub3RlIHRoYXQgc2hvdWxkIGEgYnJvd3NlciBuYXRpdmVseSBzdXBwb3J0IHRoZSB3aW5kb3cub25oYXNoY2hhbmdlIFxyXG4vLyBldmVudCwgYnV0IG5vdCByZXBvcnQgdGhhdCBpdCBkb2VzLCB0aGUgZmFsbGJhY2sgcG9sbGluZyBsb29wIHdpbGwgYmUgdXNlZC5cclxuLy8gXHJcbi8vIEFib3V0OiBSZWxlYXNlIEhpc3RvcnlcclxuLy8gXHJcbi8vIDEuMyAgIC0gKDcvMjEvMjAxMCkgUmVvcmdhbml6ZWQgSUU2LzcgSWZyYW1lIGNvZGUgdG8gbWFrZSBpdCBtb3JlXHJcbi8vICAgICAgICAgXCJyZW1vdmFibGVcIiBmb3IgbW9iaWxlLW9ubHkgZGV2ZWxvcG1lbnQuIEFkZGVkIElFNi83IGRvY3VtZW50LnRpdGxlXHJcbi8vICAgICAgICAgc3VwcG9ydC4gQXR0ZW1wdGVkIHRvIG1ha2UgSWZyYW1lIGFzIGhpZGRlbiBhcyBwb3NzaWJsZSBieSB1c2luZ1xyXG4vLyAgICAgICAgIHRlY2huaXF1ZXMgZnJvbSBodHRwOi8vd3d3LnBhY2llbGxvZ3JvdXAuY29tL2Jsb2cvP3A9NjA0LiBBZGRlZCBcclxuLy8gICAgICAgICBzdXBwb3J0IGZvciB0aGUgXCJzaG9ydGN1dFwiIGZvcm1hdCAkKHdpbmRvdykuaGFzaGNoYW5nZSggZm4gKSBhbmRcclxuLy8gICAgICAgICAkKHdpbmRvdykuaGFzaGNoYW5nZSgpIGxpa2UgalF1ZXJ5IHByb3ZpZGVzIGZvciBidWlsdC1pbiBldmVudHMuXHJcbi8vICAgICAgICAgUmVuYW1lZCBqUXVlcnkuaGFzaGNoYW5nZURlbGF5IHRvIDxqUXVlcnkuZm4uaGFzaGNoYW5nZS5kZWxheT4gYW5kXHJcbi8vICAgICAgICAgbG93ZXJlZCBpdHMgZGVmYXVsdCB2YWx1ZSB0byA1MC4gQWRkZWQgPGpRdWVyeS5mbi5oYXNoY2hhbmdlLmRvbWFpbj5cclxuLy8gICAgICAgICBhbmQgPGpRdWVyeS5mbi5oYXNoY2hhbmdlLnNyYz4gcHJvcGVydGllcyBwbHVzIGRvY3VtZW50LWRvbWFpbi5odG1sXHJcbi8vICAgICAgICAgZmlsZSB0byBhZGRyZXNzIGFjY2VzcyBkZW5pZWQgaXNzdWVzIHdoZW4gc2V0dGluZyBkb2N1bWVudC5kb21haW4gaW5cclxuLy8gICAgICAgICBJRTYvNy5cclxuLy8gMS4yICAgLSAoMi8xMS8yMDEwKSBGaXhlZCBhIGJ1ZyB3aGVyZSBjb21pbmcgYmFjayB0byBhIHBhZ2UgdXNpbmcgdGhpcyBwbHVnaW5cclxuLy8gICAgICAgICBmcm9tIGEgcGFnZSBvbiBhbm90aGVyIGRvbWFpbiB3b3VsZCBjYXVzZSBhbiBlcnJvciBpbiBTYWZhcmkgNC4gQWxzbyxcclxuLy8gICAgICAgICBJRTYvNyBJZnJhbWUgaXMgbm93IGluc2VydGVkIGFmdGVyIHRoZSBib2R5ICh0aGlzIGFjdHVhbGx5IHdvcmtzKSxcclxuLy8gICAgICAgICB3aGljaCBwcmV2ZW50cyB0aGUgcGFnZSBmcm9tIHNjcm9sbGluZyB3aGVuIHRoZSBldmVudCBpcyBmaXJzdCBib3VuZC5cclxuLy8gICAgICAgICBFdmVudCBjYW4gYWxzbyBub3cgYmUgYm91bmQgYmVmb3JlIERPTSByZWFkeSwgYnV0IGl0IHdvbid0IGJlIHVzYWJsZVxyXG4vLyAgICAgICAgIGJlZm9yZSB0aGVuIGluIElFNi83LlxyXG4vLyAxLjEgICAtICgxLzIxLzIwMTApIEluY29ycG9yYXRlZCBkb2N1bWVudC5kb2N1bWVudE1vZGUgdGVzdCB0byBmaXggSUU4IGJ1Z1xyXG4vLyAgICAgICAgIHdoZXJlIGJyb3dzZXIgdmVyc2lvbiBpcyBpbmNvcnJlY3RseSByZXBvcnRlZCBhcyA4LjAsIGRlc3BpdGVcclxuLy8gICAgICAgICBpbmNsdXNpb24gb2YgdGhlIFgtVUEtQ29tcGF0aWJsZSBJRT1FbXVsYXRlSUU3IG1ldGEgdGFnLlxyXG4vLyAxLjAgICAtICgxLzkvMjAxMCkgSW5pdGlhbCBSZWxlYXNlLiBCcm9rZSBvdXQgdGhlIGpRdWVyeSBCQlEgZXZlbnQuc3BlY2lhbFxyXG4vLyAgICAgICAgIHdpbmRvdy5vbmhhc2hjaGFuZ2UgZnVuY3Rpb25hbGl0eSBpbnRvIGEgc2VwYXJhdGUgcGx1Z2luIGZvciB1c2Vyc1xyXG4vLyAgICAgICAgIHdobyB3YW50IGp1c3QgdGhlIGJhc2ljIGV2ZW50ICYgYmFjayBidXR0b24gc3VwcG9ydCwgd2l0aG91dCBhbGwgdGhlXHJcbi8vICAgICAgICAgZXh0cmEgYXdlc29tZW5lc3MgdGhhdCBCQlEgcHJvdmlkZXMuIFRoaXMgcGx1Z2luIHdpbGwgYmUgaW5jbHVkZWQgYXNcclxuLy8gICAgICAgICBwYXJ0IG9mIGpRdWVyeSBCQlEsIGJ1dCBhbHNvIGJlIGF2YWlsYWJsZSBzZXBhcmF0ZWx5LlxyXG5cclxuKGZ1bmN0aW9uKCQsd2luZG93LHVuZGVmaW5lZCl7XHJcbiAgJyQ6bm9tdW5nZSc7IC8vIFVzZWQgYnkgWVVJIGNvbXByZXNzb3IuXHJcbiAgXHJcbiAgLy8gUmV1c2VkIHN0cmluZy5cclxuICB2YXIgc3RyX2hhc2hjaGFuZ2UgPSAnaGFzaGNoYW5nZScsXHJcbiAgICBcclxuICAgIC8vIE1ldGhvZCAvIG9iamVjdCByZWZlcmVuY2VzLlxyXG4gICAgZG9jID0gZG9jdW1lbnQsXHJcbiAgICBmYWtlX29uaGFzaGNoYW5nZSxcclxuICAgIHNwZWNpYWwgPSAkLmV2ZW50LnNwZWNpYWwsXHJcbiAgICBcclxuICAgIC8vIERvZXMgdGhlIGJyb3dzZXIgc3VwcG9ydCB3aW5kb3cub25oYXNoY2hhbmdlPyBOb3RlIHRoYXQgSUU4IHJ1bm5pbmcgaW5cclxuICAgIC8vIElFNyBjb21wYXRpYmlsaXR5IG1vZGUgcmVwb3J0cyB0cnVlIGZvciAnb25oYXNoY2hhbmdlJyBpbiB3aW5kb3csIGV2ZW5cclxuICAgIC8vIHRob3VnaCB0aGUgZXZlbnQgaXNuJ3Qgc3VwcG9ydGVkLCBzbyBhbHNvIHRlc3QgZG9jdW1lbnQuZG9jdW1lbnRNb2RlLlxyXG4gICAgZG9jX21vZGUgPSBkb2MuZG9jdW1lbnRNb2RlLFxyXG4gICAgc3VwcG9ydHNfb25oYXNoY2hhbmdlID0gJ29uJyArIHN0cl9oYXNoY2hhbmdlIGluIHdpbmRvdyAmJiAoIGRvY19tb2RlID09PSB1bmRlZmluZWQgfHwgZG9jX21vZGUgPiA3ICk7XHJcbiAgXHJcbiAgLy8gR2V0IGxvY2F0aW9uLmhhc2ggKG9yIHdoYXQgeW91J2QgZXhwZWN0IGxvY2F0aW9uLmhhc2ggdG8gYmUpIHNhbnMgYW55XHJcbiAgLy8gbGVhZGluZyAjLiBUaGFua3MgZm9yIG1ha2luZyB0aGlzIG5lY2Vzc2FyeSwgRmlyZWZveCFcclxuICBmdW5jdGlvbiBnZXRfZnJhZ21lbnQoIHVybCApIHtcclxuICAgIHVybCA9IHVybCB8fCBsb2NhdGlvbi5ocmVmO1xyXG4gICAgcmV0dXJuICcjJyArIHVybC5yZXBsYWNlKCAvXlteI10qIz8oLiopJC8sICckMScgKTtcclxuICB9O1xyXG4gIFxyXG4gIC8vIE1ldGhvZDogalF1ZXJ5LmZuLmhhc2hjaGFuZ2VcclxuICAvLyBcclxuICAvLyBCaW5kIGEgaGFuZGxlciB0byB0aGUgd2luZG93Lm9uaGFzaGNoYW5nZSBldmVudCBvciB0cmlnZ2VyIGFsbCBib3VuZFxyXG4gIC8vIHdpbmRvdy5vbmhhc2hjaGFuZ2UgZXZlbnQgaGFuZGxlcnMuIFRoaXMgYmVoYXZpb3IgaXMgY29uc2lzdGVudCB3aXRoXHJcbiAgLy8galF1ZXJ5J3MgYnVpbHQtaW4gZXZlbnQgaGFuZGxlcnMuXHJcbiAgLy8gXHJcbiAgLy8gVXNhZ2U6XHJcbiAgLy8gXHJcbiAgLy8gPiBqUXVlcnkod2luZG93KS5oYXNoY2hhbmdlKCBbIGhhbmRsZXIgXSApO1xyXG4gIC8vIFxyXG4gIC8vIEFyZ3VtZW50czpcclxuICAvLyBcclxuICAvLyAgaGFuZGxlciAtIChGdW5jdGlvbikgT3B0aW9uYWwgaGFuZGxlciB0byBiZSBib3VuZCB0byB0aGUgaGFzaGNoYW5nZVxyXG4gIC8vICAgIGV2ZW50LiBUaGlzIGlzIGEgXCJzaG9ydGN1dFwiIGZvciB0aGUgbW9yZSB2ZXJib3NlIGZvcm06XHJcbiAgLy8gICAgalF1ZXJ5KHdpbmRvdykuYmluZCggJ2hhc2hjaGFuZ2UnLCBoYW5kbGVyICkuIElmIGhhbmRsZXIgaXMgb21pdHRlZCxcclxuICAvLyAgICBhbGwgYm91bmQgd2luZG93Lm9uaGFzaGNoYW5nZSBldmVudCBoYW5kbGVycyB3aWxsIGJlIHRyaWdnZXJlZC4gVGhpc1xyXG4gIC8vICAgIGlzIGEgc2hvcnRjdXQgZm9yIHRoZSBtb3JlIHZlcmJvc2VcclxuICAvLyAgICBqUXVlcnkod2luZG93KS50cmlnZ2VyKCAnaGFzaGNoYW5nZScgKS4gVGhlc2UgZm9ybXMgYXJlIGRlc2NyaWJlZCBpblxyXG4gIC8vICAgIHRoZSA8aGFzaGNoYW5nZSBldmVudD4gc2VjdGlvbi5cclxuICAvLyBcclxuICAvLyBSZXR1cm5zOlxyXG4gIC8vIFxyXG4gIC8vICAoalF1ZXJ5KSBUaGUgaW5pdGlhbCBqUXVlcnkgY29sbGVjdGlvbiBvZiBlbGVtZW50cy5cclxuICBcclxuICAvLyBBbGxvdyB0aGUgXCJzaG9ydGN1dFwiIGZvcm1hdCAkKGVsZW0pLmhhc2hjaGFuZ2UoIGZuICkgZm9yIGJpbmRpbmcgYW5kXHJcbiAgLy8gJChlbGVtKS5oYXNoY2hhbmdlKCkgZm9yIHRyaWdnZXJpbmcsIGxpa2UgalF1ZXJ5IGRvZXMgZm9yIGJ1aWx0LWluIGV2ZW50cy5cclxuICAkLmZuWyBzdHJfaGFzaGNoYW5nZSBdID0gZnVuY3Rpb24oIGZuICkge1xyXG4gICAgcmV0dXJuIGZuID8gdGhpcy5iaW5kKCBzdHJfaGFzaGNoYW5nZSwgZm4gKSA6IHRoaXMudHJpZ2dlciggc3RyX2hhc2hjaGFuZ2UgKTtcclxuICB9O1xyXG4gIFxyXG4gIC8vIFByb3BlcnR5OiBqUXVlcnkuZm4uaGFzaGNoYW5nZS5kZWxheVxyXG4gIC8vIFxyXG4gIC8vIFRoZSBudW1lcmljIGludGVydmFsIChpbiBtaWxsaXNlY29uZHMpIGF0IHdoaWNoIHRoZSA8aGFzaGNoYW5nZSBldmVudD5cclxuICAvLyBwb2xsaW5nIGxvb3AgZXhlY3V0ZXMuIERlZmF1bHRzIHRvIDUwLlxyXG4gIFxyXG4gIC8vIFByb3BlcnR5OiBqUXVlcnkuZm4uaGFzaGNoYW5nZS5kb21haW5cclxuICAvLyBcclxuICAvLyBJZiB5b3UncmUgc2V0dGluZyBkb2N1bWVudC5kb21haW4gaW4geW91ciBKYXZhU2NyaXB0LCBhbmQgeW91IHdhbnQgaGFzaFxyXG4gIC8vIGhpc3RvcnkgdG8gd29yayBpbiBJRTYvNywgbm90IG9ubHkgbXVzdCB0aGlzIHByb3BlcnR5IGJlIHNldCwgYnV0IHlvdSBtdXN0XHJcbiAgLy8gYWxzbyBzZXQgZG9jdW1lbnQuZG9tYWluIEJFRk9SRSBqUXVlcnkgaXMgbG9hZGVkIGludG8gdGhlIHBhZ2UuIFRoaXNcclxuICAvLyBwcm9wZXJ0eSBpcyBvbmx5IGFwcGxpY2FibGUgaWYgeW91IGFyZSBzdXBwb3J0aW5nIElFNi83IChvciBJRTggb3BlcmF0aW5nXHJcbiAgLy8gaW4gXCJJRTcgY29tcGF0aWJpbGl0eVwiIG1vZGUpLlxyXG4gIC8vIFxyXG4gIC8vIEluIGFkZGl0aW9uLCB0aGUgPGpRdWVyeS5mbi5oYXNoY2hhbmdlLnNyYz4gcHJvcGVydHkgbXVzdCBiZSBzZXQgdG8gdGhlXHJcbiAgLy8gcGF0aCBvZiB0aGUgaW5jbHVkZWQgXCJkb2N1bWVudC1kb21haW4uaHRtbFwiIGZpbGUsIHdoaWNoIGNhbiBiZSByZW5hbWVkIG9yXHJcbiAgLy8gbW9kaWZpZWQgaWYgbmVjZXNzYXJ5IChub3RlIHRoYXQgdGhlIGRvY3VtZW50LmRvbWFpbiBzcGVjaWZpZWQgbXVzdCBiZSB0aGVcclxuICAvLyBzYW1lIGluIGJvdGggeW91ciBtYWluIEphdmFTY3JpcHQgYXMgd2VsbCBhcyBpbiB0aGlzIGZpbGUpLlxyXG4gIC8vIFxyXG4gIC8vIFVzYWdlOlxyXG4gIC8vIFxyXG4gIC8vIGpRdWVyeS5mbi5oYXNoY2hhbmdlLmRvbWFpbiA9IGRvY3VtZW50LmRvbWFpbjtcclxuICBcclxuICAvLyBQcm9wZXJ0eTogalF1ZXJ5LmZuLmhhc2hjaGFuZ2Uuc3JjXHJcbiAgLy8gXHJcbiAgLy8gSWYsIGZvciBzb21lIHJlYXNvbiwgeW91IG5lZWQgdG8gc3BlY2lmeSBhbiBJZnJhbWUgc3JjIGZpbGUgKGZvciBleGFtcGxlLFxyXG4gIC8vIHdoZW4gc2V0dGluZyBkb2N1bWVudC5kb21haW4gYXMgaW4gPGpRdWVyeS5mbi5oYXNoY2hhbmdlLmRvbWFpbj4pLCB5b3UgY2FuXHJcbiAgLy8gZG8gc28gdXNpbmcgdGhpcyBwcm9wZXJ0eS4gTm90ZSB0aGF0IHdoZW4gdXNpbmcgdGhpcyBwcm9wZXJ0eSwgaGlzdG9yeVxyXG4gIC8vIHdvbid0IGJlIHJlY29yZGVkIGluIElFNi83IHVudGlsIHRoZSBJZnJhbWUgc3JjIGZpbGUgbG9hZHMuIFRoaXMgcHJvcGVydHlcclxuICAvLyBpcyBvbmx5IGFwcGxpY2FibGUgaWYgeW91IGFyZSBzdXBwb3J0aW5nIElFNi83IChvciBJRTggb3BlcmF0aW5nIGluIFwiSUU3XHJcbiAgLy8gY29tcGF0aWJpbGl0eVwiIG1vZGUpLlxyXG4gIC8vIFxyXG4gIC8vIFVzYWdlOlxyXG4gIC8vIFxyXG4gIC8vIGpRdWVyeS5mbi5oYXNoY2hhbmdlLnNyYyA9ICdwYXRoL3RvL2ZpbGUuaHRtbCc7XHJcbiAgXHJcbiAgJC5mblsgc3RyX2hhc2hjaGFuZ2UgXS5kZWxheSA9IDUwO1xyXG4gIC8qXHJcbiAgJC5mblsgc3RyX2hhc2hjaGFuZ2UgXS5kb21haW4gPSBudWxsO1xyXG4gICQuZm5bIHN0cl9oYXNoY2hhbmdlIF0uc3JjID0gbnVsbDtcclxuICAqL1xyXG4gIFxyXG4gIC8vIEV2ZW50OiBoYXNoY2hhbmdlIGV2ZW50XHJcbiAgLy8gXHJcbiAgLy8gRmlyZWQgd2hlbiBsb2NhdGlvbi5oYXNoIGNoYW5nZXMuIEluIGJyb3dzZXJzIHRoYXQgc3VwcG9ydCBpdCwgdGhlIG5hdGl2ZVxyXG4gIC8vIEhUTUw1IHdpbmRvdy5vbmhhc2hjaGFuZ2UgZXZlbnQgaXMgdXNlZCwgb3RoZXJ3aXNlIGEgcG9sbGluZyBsb29wIGlzXHJcbiAgLy8gaW5pdGlhbGl6ZWQsIHJ1bm5pbmcgZXZlcnkgPGpRdWVyeS5mbi5oYXNoY2hhbmdlLmRlbGF5PiBtaWxsaXNlY29uZHMgdG9cclxuICAvLyBzZWUgaWYgdGhlIGhhc2ggaGFzIGNoYW5nZWQuIEluIElFNi83IChhbmQgSUU4IG9wZXJhdGluZyBpbiBcIklFN1xyXG4gIC8vIGNvbXBhdGliaWxpdHlcIiBtb2RlKSwgYSBoaWRkZW4gSWZyYW1lIGlzIGNyZWF0ZWQgdG8gYWxsb3cgdGhlIGJhY2sgYnV0dG9uXHJcbiAgLy8gYW5kIGhhc2gtYmFzZWQgaGlzdG9yeSB0byB3b3JrLlxyXG4gIC8vIFxyXG4gIC8vIFVzYWdlIGFzIGRlc2NyaWJlZCBpbiA8alF1ZXJ5LmZuLmhhc2hjaGFuZ2U+OlxyXG4gIC8vIFxyXG4gIC8vID4gLy8gQmluZCBhbiBldmVudCBoYW5kbGVyLlxyXG4gIC8vID4galF1ZXJ5KHdpbmRvdykuaGFzaGNoYW5nZSggZnVuY3Rpb24oZSkge1xyXG4gIC8vID4gICB2YXIgaGFzaCA9IGxvY2F0aW9uLmhhc2g7XHJcbiAgLy8gPiAgIC4uLlxyXG4gIC8vID4gfSk7XHJcbiAgLy8gPiBcclxuICAvLyA+IC8vIE1hbnVhbGx5IHRyaWdnZXIgdGhlIGV2ZW50IGhhbmRsZXIuXHJcbiAgLy8gPiBqUXVlcnkod2luZG93KS5oYXNoY2hhbmdlKCk7XHJcbiAgLy8gXHJcbiAgLy8gQSBtb3JlIHZlcmJvc2UgdXNhZ2UgdGhhdCBhbGxvd3MgZm9yIGV2ZW50IG5hbWVzcGFjaW5nOlxyXG4gIC8vIFxyXG4gIC8vID4gLy8gQmluZCBhbiBldmVudCBoYW5kbGVyLlxyXG4gIC8vID4galF1ZXJ5KHdpbmRvdykuYmluZCggJ2hhc2hjaGFuZ2UnLCBmdW5jdGlvbihlKSB7XHJcbiAgLy8gPiAgIHZhciBoYXNoID0gbG9jYXRpb24uaGFzaDtcclxuICAvLyA+ICAgLi4uXHJcbiAgLy8gPiB9KTtcclxuICAvLyA+IFxyXG4gIC8vID4gLy8gTWFudWFsbHkgdHJpZ2dlciB0aGUgZXZlbnQgaGFuZGxlci5cclxuICAvLyA+IGpRdWVyeSh3aW5kb3cpLnRyaWdnZXIoICdoYXNoY2hhbmdlJyApO1xyXG4gIC8vIFxyXG4gIC8vIEFkZGl0aW9uYWwgTm90ZXM6XHJcbiAgLy8gXHJcbiAgLy8gKiBUaGUgcG9sbGluZyBsb29wIGFuZCBJZnJhbWUgYXJlIG5vdCBjcmVhdGVkIHVudGlsIGF0IGxlYXN0IG9uZSBoYW5kbGVyXHJcbiAgLy8gICBpcyBhY3R1YWxseSBib3VuZCB0byB0aGUgJ2hhc2hjaGFuZ2UnIGV2ZW50LlxyXG4gIC8vICogSWYgeW91IG5lZWQgdGhlIGJvdW5kIGhhbmRsZXIocykgdG8gZXhlY3V0ZSBpbW1lZGlhdGVseSwgaW4gY2FzZXMgd2hlcmVcclxuICAvLyAgIGEgbG9jYXRpb24uaGFzaCBleGlzdHMgb24gcGFnZSBsb2FkLCB2aWEgYm9va21hcmsgb3IgcGFnZSByZWZyZXNoIGZvclxyXG4gIC8vICAgZXhhbXBsZSwgdXNlIGpRdWVyeSh3aW5kb3cpLmhhc2hjaGFuZ2UoKSBvciB0aGUgbW9yZSB2ZXJib3NlIFxyXG4gIC8vICAgalF1ZXJ5KHdpbmRvdykudHJpZ2dlciggJ2hhc2hjaGFuZ2UnICkuXHJcbiAgLy8gKiBUaGUgZXZlbnQgY2FuIGJlIGJvdW5kIGJlZm9yZSBET00gcmVhZHksIGJ1dCBzaW5jZSBpdCB3b24ndCBiZSB1c2FibGVcclxuICAvLyAgIGJlZm9yZSB0aGVuIGluIElFNi83IChkdWUgdG8gdGhlIG5lY2Vzc2FyeSBJZnJhbWUpLCByZWNvbW1lbmRlZCB1c2FnZSBpc1xyXG4gIC8vICAgdG8gYmluZCBpdCBpbnNpZGUgYSBET00gcmVhZHkgaGFuZGxlci5cclxuICBcclxuICAvLyBPdmVycmlkZSBleGlzdGluZyAkLmV2ZW50LnNwZWNpYWwuaGFzaGNoYW5nZSBtZXRob2RzIChhbGxvd2luZyB0aGlzIHBsdWdpblxyXG4gIC8vIHRvIGJlIGRlZmluZWQgYWZ0ZXIgalF1ZXJ5IEJCUSBpbiBCQlEncyBzb3VyY2UgY29kZSkuXHJcbiAgc3BlY2lhbFsgc3RyX2hhc2hjaGFuZ2UgXSA9ICQuZXh0ZW5kKCBzcGVjaWFsWyBzdHJfaGFzaGNoYW5nZSBdLCB7XHJcbiAgICBcclxuICAgIC8vIENhbGxlZCBvbmx5IHdoZW4gdGhlIGZpcnN0ICdoYXNoY2hhbmdlJyBldmVudCBpcyBib3VuZCB0byB3aW5kb3cuXHJcbiAgICBzZXR1cDogZnVuY3Rpb24oKSB7XHJcbiAgICAgIC8vIElmIHdpbmRvdy5vbmhhc2hjaGFuZ2UgaXMgc3VwcG9ydGVkIG5hdGl2ZWx5LCB0aGVyZSdzIG5vdGhpbmcgdG8gZG8uLlxyXG4gICAgICBpZiAoIHN1cHBvcnRzX29uaGFzaGNoYW5nZSApIHsgcmV0dXJuIGZhbHNlOyB9XHJcbiAgICAgIFxyXG4gICAgICAvLyBPdGhlcndpc2UsIHdlIG5lZWQgdG8gY3JlYXRlIG91ciBvd24uIEFuZCB3ZSBkb24ndCB3YW50IHRvIGNhbGwgdGhpc1xyXG4gICAgICAvLyB1bnRpbCB0aGUgdXNlciBiaW5kcyB0byB0aGUgZXZlbnQsIGp1c3QgaW4gY2FzZSB0aGV5IG5ldmVyIGRvLCBzaW5jZSBpdFxyXG4gICAgICAvLyB3aWxsIGNyZWF0ZSBhIHBvbGxpbmcgbG9vcCBhbmQgcG9zc2libHkgZXZlbiBhIGhpZGRlbiBJZnJhbWUuXHJcbiAgICAgICQoIGZha2Vfb25oYXNoY2hhbmdlLnN0YXJ0ICk7XHJcbiAgICB9LFxyXG4gICAgXHJcbiAgICAvLyBDYWxsZWQgb25seSB3aGVuIHRoZSBsYXN0ICdoYXNoY2hhbmdlJyBldmVudCBpcyB1bmJvdW5kIGZyb20gd2luZG93LlxyXG4gICAgdGVhcmRvd246IGZ1bmN0aW9uKCkge1xyXG4gICAgICAvLyBJZiB3aW5kb3cub25oYXNoY2hhbmdlIGlzIHN1cHBvcnRlZCBuYXRpdmVseSwgdGhlcmUncyBub3RoaW5nIHRvIGRvLi5cclxuICAgICAgaWYgKCBzdXBwb3J0c19vbmhhc2hjaGFuZ2UgKSB7IHJldHVybiBmYWxzZTsgfVxyXG4gICAgICBcclxuICAgICAgLy8gT3RoZXJ3aXNlLCB3ZSBuZWVkIHRvIHN0b3Agb3VycyAoaWYgcG9zc2libGUpLlxyXG4gICAgICAkKCBmYWtlX29uaGFzaGNoYW5nZS5zdG9wICk7XHJcbiAgICB9XHJcbiAgICBcclxuICB9KTtcclxuICBcclxuICAvLyBmYWtlX29uaGFzaGNoYW5nZSBkb2VzIGFsbCB0aGUgd29yayBvZiB0cmlnZ2VyaW5nIHRoZSB3aW5kb3cub25oYXNoY2hhbmdlXHJcbiAgLy8gZXZlbnQgZm9yIGJyb3dzZXJzIHRoYXQgZG9uJ3QgbmF0aXZlbHkgc3VwcG9ydCBpdCwgaW5jbHVkaW5nIGNyZWF0aW5nIGFcclxuICAvLyBwb2xsaW5nIGxvb3AgdG8gd2F0Y2ggZm9yIGhhc2ggY2hhbmdlcyBhbmQgaW4gSUUgNi83IGNyZWF0aW5nIGEgaGlkZGVuXHJcbiAgLy8gSWZyYW1lIHRvIGVuYWJsZSBiYWNrIGFuZCBmb3J3YXJkLlxyXG4gIGZha2Vfb25oYXNoY2hhbmdlID0gKGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgc2VsZiA9IHt9LFxyXG4gICAgICB0aW1lb3V0X2lkLFxyXG4gICAgICBcclxuICAgICAgLy8gUmVtZW1iZXIgdGhlIGluaXRpYWwgaGFzaCBzbyBpdCBkb2Vzbid0IGdldCB0cmlnZ2VyZWQgaW1tZWRpYXRlbHkuXHJcbiAgICAgIGxhc3RfaGFzaCA9IGdldF9mcmFnbWVudCgpLFxyXG4gICAgICBcclxuICAgICAgZm5fcmV0dmFsID0gZnVuY3Rpb24odmFsKXsgcmV0dXJuIHZhbDsgfSxcclxuICAgICAgaGlzdG9yeV9zZXQgPSBmbl9yZXR2YWwsXHJcbiAgICAgIGhpc3RvcnlfZ2V0ID0gZm5fcmV0dmFsO1xyXG4gICAgXHJcbiAgICAvLyBTdGFydCB0aGUgcG9sbGluZyBsb29wLlxyXG4gICAgc2VsZi5zdGFydCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICB0aW1lb3V0X2lkIHx8IHBvbGwoKTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIC8vIFN0b3AgdGhlIHBvbGxpbmcgbG9vcC5cclxuICAgIHNlbGYuc3RvcCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICB0aW1lb3V0X2lkICYmIGNsZWFyVGltZW91dCggdGltZW91dF9pZCApO1xyXG4gICAgICB0aW1lb3V0X2lkID0gdW5kZWZpbmVkO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgLy8gVGhpcyBwb2xsaW5nIGxvb3AgY2hlY2tzIGV2ZXJ5ICQuZm4uaGFzaGNoYW5nZS5kZWxheSBtaWxsaXNlY29uZHMgdG8gc2VlXHJcbiAgICAvLyBpZiBsb2NhdGlvbi5oYXNoIGhhcyBjaGFuZ2VkLCBhbmQgdHJpZ2dlcnMgdGhlICdoYXNoY2hhbmdlJyBldmVudCBvblxyXG4gICAgLy8gd2luZG93IHdoZW4gbmVjZXNzYXJ5LlxyXG4gICAgZnVuY3Rpb24gcG9sbCgpIHtcclxuICAgICAgdmFyIGhhc2ggPSBnZXRfZnJhZ21lbnQoKSxcclxuICAgICAgICBoaXN0b3J5X2hhc2ggPSBoaXN0b3J5X2dldCggbGFzdF9oYXNoICk7XHJcbiAgICAgIFxyXG4gICAgICBpZiAoIGhhc2ggIT09IGxhc3RfaGFzaCApIHtcclxuICAgICAgICBoaXN0b3J5X3NldCggbGFzdF9oYXNoID0gaGFzaCwgaGlzdG9yeV9oYXNoICk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgJCh3aW5kb3cpLnRyaWdnZXIoIHN0cl9oYXNoY2hhbmdlICk7XHJcbiAgICAgICAgXHJcbiAgICAgIH0gZWxzZSBpZiAoIGhpc3RvcnlfaGFzaCAhPT0gbGFzdF9oYXNoICkge1xyXG4gICAgICAgIGxvY2F0aW9uLmhyZWYgPSBsb2NhdGlvbi5ocmVmLnJlcGxhY2UoIC8jLiovLCAnJyApICsgaGlzdG9yeV9oYXNoO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICB0aW1lb3V0X2lkID0gc2V0VGltZW91dCggcG9sbCwgJC5mblsgc3RyX2hhc2hjaGFuZ2UgXS5kZWxheSApO1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgLy8gdnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2XHJcbiAgICAvLyB2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2IFJFTU9WRSBJRiBOT1QgU1VQUE9SVElORyBJRTYvNy84IHZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZcclxuICAgIC8vIHZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dlxyXG4gICAgd2luZG93LmF0dGFjaEV2ZW50ICYmICF3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciAmJiAhc3VwcG9ydHNfb25oYXNoY2hhbmdlICYmIChmdW5jdGlvbigpe1xyXG4gICAgICAvLyBOb3Qgb25seSBkbyBJRTYvNyBuZWVkIHRoZSBcIm1hZ2ljYWxcIiBJZnJhbWUgdHJlYXRtZW50LCBidXQgc28gZG9lcyBJRThcclxuICAgICAgLy8gd2hlbiBydW5uaW5nIGluIFwiSUU3IGNvbXBhdGliaWxpdHlcIiBtb2RlLlxyXG4gICAgICBcclxuICAgICAgdmFyIGlmcmFtZSxcclxuICAgICAgICBpZnJhbWVfc3JjO1xyXG4gICAgICBcclxuICAgICAgLy8gV2hlbiB0aGUgZXZlbnQgaXMgYm91bmQgYW5kIHBvbGxpbmcgc3RhcnRzIGluIElFIDYvNywgY3JlYXRlIGEgaGlkZGVuXHJcbiAgICAgIC8vIElmcmFtZSBmb3IgaGlzdG9yeSBoYW5kbGluZy5cclxuICAgICAgc2VsZi5zdGFydCA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgaWYgKCAhaWZyYW1lICkge1xyXG4gICAgICAgICAgaWZyYW1lX3NyYyA9ICQuZm5bIHN0cl9oYXNoY2hhbmdlIF0uc3JjO1xyXG4gICAgICAgICAgaWZyYW1lX3NyYyA9IGlmcmFtZV9zcmMgJiYgaWZyYW1lX3NyYyArIGdldF9mcmFnbWVudCgpO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAvLyBDcmVhdGUgaGlkZGVuIElmcmFtZS4gQXR0ZW1wdCB0byBtYWtlIElmcmFtZSBhcyBoaWRkZW4gYXMgcG9zc2libGVcclxuICAgICAgICAgIC8vIGJ5IHVzaW5nIHRlY2huaXF1ZXMgZnJvbSBodHRwOi8vd3d3LnBhY2llbGxvZ3JvdXAuY29tL2Jsb2cvP3A9NjA0LlxyXG4gICAgICAgICAgaWZyYW1lID0gJCgnPGlmcmFtZSB0YWJpbmRleD1cIi0xXCIgdGl0bGU9XCJlbXB0eVwiLz4nKS5oaWRlKClcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFdoZW4gSWZyYW1lIGhhcyBjb21wbGV0ZWx5IGxvYWRlZCwgaW5pdGlhbGl6ZSB0aGUgaGlzdG9yeSBhbmRcclxuICAgICAgICAgICAgLy8gc3RhcnQgcG9sbGluZy5cclxuICAgICAgICAgICAgLm9uZSggJ2xvYWQnLCBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgIGlmcmFtZV9zcmMgfHwgaGlzdG9yeV9zZXQoIGdldF9mcmFnbWVudCgpICk7XHJcbiAgICAgICAgICAgICAgcG9sbCgpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gTG9hZCBJZnJhbWUgc3JjIGlmIHNwZWNpZmllZCwgb3RoZXJ3aXNlIG5vdGhpbmcuXHJcbiAgICAgICAgICAgIC5hdHRyKCAnc3JjJywgaWZyYW1lX3NyYyB8fCAnamF2YXNjcmlwdDowJyApXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBBcHBlbmQgSWZyYW1lIGFmdGVyIHRoZSBlbmQgb2YgdGhlIGJvZHkgdG8gcHJldmVudCB1bm5lY2Vzc2FyeVxyXG4gICAgICAgICAgICAvLyBpbml0aWFsIHBhZ2Ugc2Nyb2xsaW5nICh5ZXMsIHRoaXMgd29ya3MpLlxyXG4gICAgICAgICAgICAuaW5zZXJ0QWZ0ZXIoICdib2R5JyApWzBdLmNvbnRlbnRXaW5kb3c7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIC8vIFdoZW5ldmVyIGBkb2N1bWVudC50aXRsZWAgY2hhbmdlcywgdXBkYXRlIHRoZSBJZnJhbWUncyB0aXRsZSB0b1xyXG4gICAgICAgICAgLy8gcHJldHRpZnkgdGhlIGJhY2svbmV4dCBoaXN0b3J5IG1lbnUgZW50cmllcy4gU2luY2UgSUUgc29tZXRpbWVzXHJcbiAgICAgICAgICAvLyBlcnJvcnMgd2l0aCBcIlVuc3BlY2lmaWVkIGVycm9yXCIgdGhlIHZlcnkgZmlyc3QgdGltZSB0aGlzIGlzIHNldFxyXG4gICAgICAgICAgLy8gKHllcywgdmVyeSB1c2VmdWwpIHdyYXAgdGhpcyB3aXRoIGEgdHJ5L2NhdGNoIGJsb2NrLlxyXG4gICAgICAgICAgZG9jLm9ucHJvcGVydHljaGFuZ2UgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgIGlmICggZXZlbnQucHJvcGVydHlOYW1lID09PSAndGl0bGUnICkge1xyXG4gICAgICAgICAgICAgICAgaWZyYW1lLmRvY3VtZW50LnRpdGxlID0gZG9jLnRpdGxlO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBjYXRjaChlKSB7fVxyXG4gICAgICAgICAgfTtcclxuICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuICAgICAgXHJcbiAgICAgIC8vIE92ZXJyaWRlIHRoZSBcInN0b3BcIiBtZXRob2Qgc2luY2UgYW4gSUU2LzcgSWZyYW1lIHdhcyBjcmVhdGVkLiBFdmVuXHJcbiAgICAgIC8vIGlmIHRoZXJlIGFyZSBubyBsb25nZXIgYW55IGJvdW5kIGV2ZW50IGhhbmRsZXJzLCB0aGUgcG9sbGluZyBsb29wXHJcbiAgICAgIC8vIGlzIHN0aWxsIG5lY2Vzc2FyeSBmb3IgYmFjay9uZXh0IHRvIHdvcmsgYXQgYWxsIVxyXG4gICAgICBzZWxmLnN0b3AgPSBmbl9yZXR2YWw7XHJcbiAgICAgIFxyXG4gICAgICAvLyBHZXQgaGlzdG9yeSBieSBsb29raW5nIGF0IHRoZSBoaWRkZW4gSWZyYW1lJ3MgbG9jYXRpb24uaGFzaC5cclxuICAgICAgaGlzdG9yeV9nZXQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gZ2V0X2ZyYWdtZW50KCBpZnJhbWUubG9jYXRpb24uaHJlZiApO1xyXG4gICAgICB9O1xyXG4gICAgICBcclxuICAgICAgLy8gU2V0IGEgbmV3IGhpc3RvcnkgaXRlbSBieSBvcGVuaW5nIGFuZCB0aGVuIGNsb3NpbmcgdGhlIElmcmFtZVxyXG4gICAgICAvLyBkb2N1bWVudCwgKnRoZW4qIHNldHRpbmcgaXRzIGxvY2F0aW9uLmhhc2guIElmIGRvY3VtZW50LmRvbWFpbiBoYXNcclxuICAgICAgLy8gYmVlbiBzZXQsIHVwZGF0ZSB0aGF0IGFzIHdlbGwuXHJcbiAgICAgIGhpc3Rvcnlfc2V0ID0gZnVuY3Rpb24oIGhhc2gsIGhpc3RvcnlfaGFzaCApIHtcclxuICAgICAgICB2YXIgaWZyYW1lX2RvYyA9IGlmcmFtZS5kb2N1bWVudCxcclxuICAgICAgICAgIGRvbWFpbiA9ICQuZm5bIHN0cl9oYXNoY2hhbmdlIF0uZG9tYWluO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICggaGFzaCAhPT0gaGlzdG9yeV9oYXNoICkge1xyXG4gICAgICAgICAgLy8gVXBkYXRlIElmcmFtZSB3aXRoIGFueSBpbml0aWFsIGBkb2N1bWVudC50aXRsZWAgdGhhdCBtaWdodCBiZSBzZXQuXHJcbiAgICAgICAgICBpZnJhbWVfZG9jLnRpdGxlID0gZG9jLnRpdGxlO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAvLyBPcGVuaW5nIHRoZSBJZnJhbWUncyBkb2N1bWVudCBhZnRlciBpdCBoYXMgYmVlbiBjbG9zZWQgaXMgd2hhdFxyXG4gICAgICAgICAgLy8gYWN0dWFsbHkgYWRkcyBhIGhpc3RvcnkgZW50cnkuXHJcbiAgICAgICAgICBpZnJhbWVfZG9jLm9wZW4oKTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgLy8gU2V0IGRvY3VtZW50LmRvbWFpbiBmb3IgdGhlIElmcmFtZSBkb2N1bWVudCBhcyB3ZWxsLCBpZiBuZWNlc3NhcnkuXHJcbiAgICAgICAgICBkb21haW4gJiYgaWZyYW1lX2RvYy53cml0ZSggJ1xceDNjc2NyaXB0PmRvY3VtZW50LmRvbWFpbj1cIicgKyBkb21haW4gKyAnXCJcXHgzYy9zY3JpcHQ+JyApO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBpZnJhbWVfZG9jLmNsb3NlKCk7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgSWZyYW1lJ3MgaGFzaCwgZm9yIGdyZWF0IGp1c3RpY2UuXHJcbiAgICAgICAgICBpZnJhbWUubG9jYXRpb24uaGFzaCA9IGhhc2g7XHJcbiAgICAgICAgfVxyXG4gICAgICB9O1xyXG4gICAgICBcclxuICAgIH0pKCk7XHJcbiAgICAvLyBeXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5cclxuICAgIC8vIF5eXl5eXl5eXl5eXl5eXl5eXl4gUkVNT1ZFIElGIE5PVCBTVVBQT1JUSU5HIElFNi83LzggXl5eXl5eXl5eXl5eXl5eXl5eXlxyXG4gICAgLy8gXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXHJcbiAgICBcclxuICAgIHJldHVybiBzZWxmO1xyXG4gIH0pKCk7XHJcbiAgXHJcbn0pKGpRdWVyeSx0aGlzKTtcclxuXHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcblx0LyohIG1hdGNoTWVkaWEoKSBwb2x5ZmlsbCAtIFRlc3QgYSBDU1MgbWVkaWEgdHlwZS9xdWVyeSBpbiBKUy4gQXV0aG9ycyAmIGNvcHlyaWdodCAoYykgMjAxMjogU2NvdHQgSmVobCwgUGF1bCBJcmlzaCwgTmljaG9sYXMgWmFrYXMuIER1YWwgTUlUL0JTRCBsaWNlbnNlICovXHJcblx0d2luZG93Lm1hdGNoTWVkaWEgPSB3aW5kb3cubWF0Y2hNZWRpYSB8fCAoZnVuY3Rpb24oIGRvYywgdW5kZWZpbmVkICkge1xyXG5cclxuXHRcdHZhciBib29sLFxyXG5cdFx0XHRkb2NFbGVtID0gZG9jLmRvY3VtZW50RWxlbWVudCxcclxuXHRcdFx0cmVmTm9kZSA9IGRvY0VsZW0uZmlyc3RFbGVtZW50Q2hpbGQgfHwgZG9jRWxlbS5maXJzdENoaWxkLFxyXG5cdFx0XHQvLyBmYWtlQm9keSByZXF1aXJlZCBmb3IgPEZGNCB3aGVuIGV4ZWN1dGVkIGluIDxoZWFkPlxyXG5cdFx0XHRmYWtlQm9keSA9IGRvYy5jcmVhdGVFbGVtZW50KCBcImJvZHlcIiApLFxyXG5cdFx0XHRkaXYgPSBkb2MuY3JlYXRlRWxlbWVudCggXCJkaXZcIiApO1xyXG5cclxuXHRcdGRpdi5pZCA9IFwibXEtdGVzdC0xXCI7XHJcblx0XHRkaXYuc3R5bGUuY3NzVGV4dCA9IFwicG9zaXRpb246YWJzb2x1dGU7dG9wOi0xMDBlbVwiO1xyXG5cdFx0ZmFrZUJvZHkuc3R5bGUuYmFja2dyb3VuZCA9IFwibm9uZVwiO1xyXG5cdFx0ZmFrZUJvZHkuYXBwZW5kQ2hpbGQoZGl2KTtcclxuXHJcblx0XHRyZXR1cm4gZnVuY3Rpb24ocSl7XHJcblxyXG5cdFx0XHRkaXYuaW5uZXJIVE1MID0gXCImc2h5OzxzdHlsZSBtZWRpYT1cXFwiXCIgKyBxICsgXCJcXFwiPiAjbXEtdGVzdC0xIHsgd2lkdGg6IDQycHg7IH08L3N0eWxlPlwiO1xyXG5cclxuXHRcdFx0ZG9jRWxlbS5pbnNlcnRCZWZvcmUoIGZha2VCb2R5LCByZWZOb2RlICk7XHJcblx0XHRcdGJvb2wgPSBkaXYub2Zmc2V0V2lkdGggPT09IDQyO1xyXG5cdFx0XHRkb2NFbGVtLnJlbW92ZUNoaWxkKCBmYWtlQm9keSApO1xyXG5cclxuXHRcdFx0cmV0dXJuIHtcclxuXHRcdFx0XHRtYXRjaGVzOiBib29sLFxyXG5cdFx0XHRcdG1lZGlhOiBxXHJcblx0XHRcdH07XHJcblxyXG5cdFx0fTtcclxuXHJcblx0fSggZG9jdW1lbnQgKSk7XHJcblxyXG5cdC8vICQubW9iaWxlLm1lZGlhIHVzZXMgbWF0Y2hNZWRpYSB0byByZXR1cm4gYSBib29sZWFuLlxyXG5cdCQubW9iaWxlLm1lZGlhID0gZnVuY3Rpb24oIHEgKSB7XHJcblx0XHRyZXR1cm4gd2luZG93Lm1hdGNoTWVkaWEoIHEgKS5tYXRjaGVzO1xyXG5cdH07XHJcblxyXG59KShqUXVlcnkpO1xyXG5cclxuXHQoZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHRcdHZhciBzdXBwb3J0ID0ge1xyXG5cdFx0XHR0b3VjaDogXCJvbnRvdWNoZW5kXCIgaW4gZG9jdW1lbnRcclxuXHRcdH07XHJcblxyXG5cdFx0JC5tb2JpbGUuc3VwcG9ydCA9ICQubW9iaWxlLnN1cHBvcnQgfHwge307XHJcblx0XHQkLmV4dGVuZCggJC5zdXBwb3J0LCBzdXBwb3J0ICk7XHJcblx0XHQkLmV4dGVuZCggJC5tb2JpbGUuc3VwcG9ydCwgc3VwcG9ydCApO1xyXG5cdH0oIGpRdWVyeSApKTtcclxuXHJcblx0KGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblx0XHQkLmV4dGVuZCggJC5zdXBwb3J0LCB7XHJcblx0XHRcdG9yaWVudGF0aW9uOiBcIm9yaWVudGF0aW9uXCIgaW4gd2luZG93ICYmIFwib25vcmllbnRhdGlvbmNoYW5nZVwiIGluIHdpbmRvd1xyXG5cdFx0fSk7XHJcblx0fSggalF1ZXJ5ICkpO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG4vLyB0aHggTW9kZXJuaXpyXHJcbmZ1bmN0aW9uIHByb3BFeGlzdHMoIHByb3AgKSB7XHJcblx0dmFyIHVjX3Byb3AgPSBwcm9wLmNoYXJBdCggMCApLnRvVXBwZXJDYXNlKCkgKyBwcm9wLnN1YnN0ciggMSApLFxyXG5cdFx0cHJvcHMgPSAoIHByb3AgKyBcIiBcIiArIHZlbmRvcnMuam9pbiggdWNfcHJvcCArIFwiIFwiICkgKyB1Y19wcm9wICkuc3BsaXQoIFwiIFwiICksXHJcblx0XHR2O1xyXG5cclxuXHRmb3IgKCB2IGluIHByb3BzICkge1xyXG5cdFx0aWYgKCBmYkNTU1sgcHJvcHNbIHYgXSBdICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0fVxyXG5cdH1cclxufVxyXG5cclxudmFyIGZha2VCb2R5ID0gJCggXCI8Ym9keT5cIiApLnByZXBlbmRUbyggXCJodG1sXCIgKSxcclxuXHRmYkNTUyA9IGZha2VCb2R5WyAwIF0uc3R5bGUsXHJcblx0dmVuZG9ycyA9IFsgXCJXZWJraXRcIiwgXCJNb3pcIiwgXCJPXCIgXSxcclxuXHR3ZWJvcyA9IFwicGFsbUdldFJlc291cmNlXCIgaW4gd2luZG93LCAvL29ubHkgdXNlZCB0byBydWxlIG91dCBzY3JvbGxUb3BcclxuXHRvcGVyYW1pbmkgPSB3aW5kb3cub3BlcmFtaW5pICYmICh7fSkudG9TdHJpbmcuY2FsbCggd2luZG93Lm9wZXJhbWluaSApID09PSBcIltvYmplY3QgT3BlcmFNaW5pXVwiLFxyXG5cdGJiID0gd2luZG93LmJsYWNrYmVycnkgJiYgIXByb3BFeGlzdHMoIFwiLXdlYmtpdC10cmFuc2Zvcm1cIiApLCAvL29ubHkgdXNlZCB0byBydWxlIG91dCBib3ggc2hhZG93LCBhcyBpdCdzIGZpbGxlZCBvcGFxdWUgb24gQkIgNSBhbmQgbG93ZXJcclxuXHRub2tpYUxURTdfMztcclxuXHJcbi8vIGlubGluZSBTVkcgc3VwcG9ydCB0ZXN0XHJcbmZ1bmN0aW9uIGlubGluZVNWRygpIHtcclxuXHQvLyBUaGFua3MgTW9kZXJuaXpyICYgRXJpayBEYWhsc3Ryb21cclxuXHR2YXIgdyA9IHdpbmRvdyxcclxuXHRcdHN2ZyA9ICEhdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50TlMgJiYgISF3LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyggXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCBcInN2Z1wiICkuY3JlYXRlU1ZHUmVjdCAmJiAhKCB3Lm9wZXJhICYmIG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZiggXCJDaHJvbWVcIiApID09PSAtMSApLFxyXG5cdFx0c3VwcG9ydCA9IGZ1bmN0aW9uKCBkYXRhICkge1xyXG5cdFx0XHRpZiAoICEoIGRhdGEgJiYgc3ZnICkgKSB7XHJcblx0XHRcdFx0JCggXCJodG1sXCIgKS5hZGRDbGFzcyggXCJ1aS1ub3N2Z1wiICk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblx0XHRpbWcgPSBuZXcgdy5JbWFnZSgpO1xyXG5cclxuXHRpbWcub25lcnJvciA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0c3VwcG9ydCggZmFsc2UgKTtcclxuXHR9O1xyXG5cdGltZy5vbmxvYWQgPSBmdW5jdGlvbigpIHtcclxuXHRcdHN1cHBvcnQoIGltZy53aWR0aCA9PT0gMSAmJiBpbWcuaGVpZ2h0ID09PSAxICk7XHJcblx0fTtcclxuXHRpbWcuc3JjID0gXCJkYXRhOmltYWdlL2dpZjtiYXNlNjQsUjBsR09EbGhBUUFCQUlBQUFBQUFBUC8vL3l3QUFBQUFBUUFCQUFBQ0FVd0FPdz09XCI7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHRyYW5zZm9ybTNkVGVzdCgpIHtcclxuXHR2YXIgbXFQcm9wID0gXCJ0cmFuc2Zvcm0tM2RcIixcclxuXHRcdC8vIEJlY2F1c2UgdGhlIGB0cmFuc2xhdGUzZGAgdGVzdCBiZWxvdyB0aHJvd3MgZmFsc2UgcG9zaXRpdmVzIGluIEFuZHJvaWQ6XHJcblx0XHRyZXQgPSAkLm1vYmlsZS5tZWRpYSggXCIoLVwiICsgdmVuZG9ycy5qb2luKCBcIi1cIiArIG1xUHJvcCArIFwiKSwoLVwiICkgKyBcIi1cIiArIG1xUHJvcCArIFwiKSwoXCIgKyBtcVByb3AgKyBcIilcIiApLFxyXG5cdFx0ZWwsIHRyYW5zZm9ybXMsIHQ7XHJcblxyXG5cdGlmICggcmV0ICkge1xyXG5cdFx0cmV0dXJuICEhcmV0O1xyXG5cdH1cclxuXHJcblx0ZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImRpdlwiICk7XHJcblx0dHJhbnNmb3JtcyA9IHtcclxuXHRcdC8vIFdl4oCZcmUgb21pdHRpbmcgT3BlcmEgZm9yIHRoZSB0aW1lIGJlaW5nOyBNUyB1c2VzIHVucHJlZml4ZWQuXHJcblx0XHRcIk1velRyYW5zZm9ybVwiOiBcIi1tb3otdHJhbnNmb3JtXCIsXHJcblx0XHRcInRyYW5zZm9ybVwiOiBcInRyYW5zZm9ybVwiXHJcblx0fTtcclxuXHJcblx0ZmFrZUJvZHkuYXBwZW5kKCBlbCApO1xyXG5cclxuXHRmb3IgKCB0IGluIHRyYW5zZm9ybXMgKSB7XHJcblx0XHRpZiAoIGVsLnN0eWxlWyB0IF0gIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0ZWwuc3R5bGVbIHQgXSA9IFwidHJhbnNsYXRlM2QoIDEwMHB4LCAxcHgsIDFweCApXCI7XHJcblx0XHRcdHJldCA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKCBlbCApLmdldFByb3BlcnR5VmFsdWUoIHRyYW5zZm9ybXNbIHQgXSApO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRyZXR1cm4gKCAhIXJldCAmJiByZXQgIT09IFwibm9uZVwiICk7XHJcbn1cclxuXHJcbi8vIFRlc3QgZm9yIGR5bmFtaWMtdXBkYXRpbmcgYmFzZSB0YWcgc3VwcG9ydCAoIGFsbG93cyB1cyB0byBhdm9pZCBocmVmLHNyYyBhdHRyIHJld3JpdGluZyApXHJcbmZ1bmN0aW9uIGJhc2VUYWdUZXN0KCkge1xyXG5cdHZhciBmYXV4QmFzZSA9IGxvY2F0aW9uLnByb3RvY29sICsgXCIvL1wiICsgbG9jYXRpb24uaG9zdCArIGxvY2F0aW9uLnBhdGhuYW1lICsgXCJ1aS1kaXIvXCIsXHJcblx0XHRiYXNlID0gJCggXCJoZWFkIGJhc2VcIiApLFxyXG5cdFx0ZmF1eEVsZSA9IG51bGwsXHJcblx0XHRocmVmID0gXCJcIixcclxuXHRcdGxpbmssIHJlYmFzZTtcclxuXHJcblx0aWYgKCAhYmFzZS5sZW5ndGggKSB7XHJcblx0XHRiYXNlID0gZmF1eEVsZSA9ICQoIFwiPGJhc2U+XCIsIHsgXCJocmVmXCI6IGZhdXhCYXNlIH0pLmFwcGVuZFRvKCBcImhlYWRcIiApO1xyXG5cdH0gZWxzZSB7XHJcblx0XHRocmVmID0gYmFzZS5hdHRyKCBcImhyZWZcIiApO1xyXG5cdH1cclxuXHJcblx0bGluayA9ICQoIFwiPGEgaHJlZj0ndGVzdHVybCcgLz5cIiApLnByZXBlbmRUbyggZmFrZUJvZHkgKTtcclxuXHRyZWJhc2UgPSBsaW5rWyAwIF0uaHJlZjtcclxuXHRiYXNlWyAwIF0uaHJlZiA9IGhyZWYgfHwgbG9jYXRpb24ucGF0aG5hbWU7XHJcblxyXG5cdGlmICggZmF1eEVsZSApIHtcclxuXHRcdGZhdXhFbGUucmVtb3ZlKCk7XHJcblx0fVxyXG5cdHJldHVybiByZWJhc2UuaW5kZXhPZiggZmF1eEJhc2UgKSA9PT0gMDtcclxufVxyXG5cclxuLy8gVGhhbmtzIE1vZGVybml6clxyXG5mdW5jdGlvbiBjc3NQb2ludGVyRXZlbnRzVGVzdCgpIHtcclxuXHR2YXIgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwieFwiICksXHJcblx0XHRkb2N1bWVudEVsZW1lbnQgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsXHJcblx0XHRnZXRDb21wdXRlZFN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUsXHJcblx0XHRzdXBwb3J0cztcclxuXHJcblx0aWYgKCAhKCBcInBvaW50ZXJFdmVudHNcIiBpbiBlbGVtZW50LnN0eWxlICkgKSB7XHJcblx0XHRyZXR1cm4gZmFsc2U7XHJcblx0fVxyXG5cclxuXHRlbGVtZW50LnN0eWxlLnBvaW50ZXJFdmVudHMgPSBcImF1dG9cIjtcclxuXHRlbGVtZW50LnN0eWxlLnBvaW50ZXJFdmVudHMgPSBcInhcIjtcclxuXHRkb2N1bWVudEVsZW1lbnQuYXBwZW5kQ2hpbGQoIGVsZW1lbnQgKTtcclxuXHRzdXBwb3J0cyA9IGdldENvbXB1dGVkU3R5bGUgJiZcclxuXHRnZXRDb21wdXRlZFN0eWxlKCBlbGVtZW50LCBcIlwiICkucG9pbnRlckV2ZW50cyA9PT0gXCJhdXRvXCI7XHJcblx0ZG9jdW1lbnRFbGVtZW50LnJlbW92ZUNoaWxkKCBlbGVtZW50ICk7XHJcblx0cmV0dXJuICEhc3VwcG9ydHM7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGJvdW5kaW5nUmVjdCgpIHtcclxuXHR2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJkaXZcIiApO1xyXG5cdHJldHVybiB0eXBlb2YgZGl2LmdldEJvdW5kaW5nQ2xpZW50UmVjdCAhPT0gXCJ1bmRlZmluZWRcIjtcclxufVxyXG5cclxuLy8gbm9uLVVBLWJhc2VkIElFIHZlcnNpb24gY2hlY2sgYnkgSmFtZXMgUGFkb2xzZXksIG1vZGlmaWVkIGJ5IGpkYWx0b24gLSBmcm9tIGh0dHA6Ly9naXN0LmdpdGh1Yi5jb20vNTI3NjgzXHJcbi8vIGFsbG93cyBmb3IgaW5jbHVzaW9uIG9mIElFIDYrLCBpbmNsdWRpbmcgV2luZG93cyBNb2JpbGUgN1xyXG4kLmV4dGVuZCggJC5tb2JpbGUsIHsgYnJvd3Nlcjoge30gfSApO1xyXG4kLm1vYmlsZS5icm93c2VyLm9sZElFID0gKGZ1bmN0aW9uKCkge1xyXG5cdHZhciB2ID0gMyxcclxuXHRcdGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiZGl2XCIgKSxcclxuXHRcdGEgPSBkaXYuYWxsIHx8IFtdO1xyXG5cclxuXHRkbyB7XHJcblx0XHRkaXYuaW5uZXJIVE1MID0gXCI8IS0tW2lmIGd0IElFIFwiICsgKCArK3YgKSArIFwiXT48YnI+PCFbZW5kaWZdLS0+XCI7XHJcblx0fSB3aGlsZSggYVswXSApO1xyXG5cclxuXHRyZXR1cm4gdiA+IDQgPyB2IDogIXY7XHJcbn0pKCk7XHJcblxyXG5mdW5jdGlvbiBmaXhlZFBvc2l0aW9uKCkge1xyXG5cdHZhciB3ID0gd2luZG93LFxyXG5cdFx0dWEgPSBuYXZpZ2F0b3IudXNlckFnZW50LFxyXG5cdFx0cGxhdGZvcm0gPSBuYXZpZ2F0b3IucGxhdGZvcm0sXHJcblx0XHQvLyBSZW5kZXJpbmcgZW5naW5lIGlzIFdlYmtpdCwgYW5kIGNhcHR1cmUgbWFqb3IgdmVyc2lvblxyXG5cdFx0d2ttYXRjaCA9IHVhLm1hdGNoKCAvQXBwbGVXZWJLaXRcXC8oWzAtOV0rKS8gKSxcclxuXHRcdHdrdmVyc2lvbiA9ICEhd2ttYXRjaCAmJiB3a21hdGNoWyAxIF0sXHJcblx0XHRmZm1hdGNoID0gdWEubWF0Y2goIC9GZW5uZWNcXC8oWzAtOV0rKS8gKSxcclxuXHRcdGZmdmVyc2lvbiA9ICEhZmZtYXRjaCAmJiBmZm1hdGNoWyAxIF0sXHJcblx0XHRvcGVyYW1tb2JpbGVtYXRjaCA9IHVhLm1hdGNoKCAvT3BlcmEgTW9iaVxcLyhbMC05XSspLyApLFxyXG5cdFx0b212ZXJzaW9uID0gISFvcGVyYW1tb2JpbGVtYXRjaCAmJiBvcGVyYW1tb2JpbGVtYXRjaFsgMSBdO1xyXG5cclxuXHRpZiAoXHJcblx0XHQvLyBpT1MgNC4zIGFuZCBvbGRlciA6IFBsYXRmb3JtIGlzIGlQaG9uZS9QYWQvVG91Y2ggYW5kIFdlYmtpdCB2ZXJzaW9uIGlzIGxlc3MgdGhhbiA1MzQgKGlvczUpXHJcblx0XHQoICggcGxhdGZvcm0uaW5kZXhPZiggXCJpUGhvbmVcIiApID4gLTEgfHwgcGxhdGZvcm0uaW5kZXhPZiggXCJpUGFkXCIgKSA+IC0xICB8fCBwbGF0Zm9ybS5pbmRleE9mKCBcImlQb2RcIiApID4gLTEgKSAmJiB3a3ZlcnNpb24gJiYgd2t2ZXJzaW9uIDwgNTM0ICkgfHxcclxuXHRcdC8vIE9wZXJhIE1pbmlcclxuXHRcdCggdy5vcGVyYW1pbmkgJiYgKHt9KS50b1N0cmluZy5jYWxsKCB3Lm9wZXJhbWluaSApID09PSBcIltvYmplY3QgT3BlcmFNaW5pXVwiICkgfHxcclxuXHRcdCggb3BlcmFtbW9iaWxlbWF0Y2ggJiYgb212ZXJzaW9uIDwgNzQ1OCApXHR8fFxyXG5cdFx0Ly9BbmRyb2lkIGx0ZSAyLjE6IFBsYXRmb3JtIGlzIEFuZHJvaWQgYW5kIFdlYmtpdCB2ZXJzaW9uIGlzIGxlc3MgdGhhbiA1MzMgKEFuZHJvaWQgMi4yKVxyXG5cdFx0KCB1YS5pbmRleE9mKCBcIkFuZHJvaWRcIiApID4gLTEgJiYgd2t2ZXJzaW9uICYmIHdrdmVyc2lvbiA8IDUzMyApIHx8XHJcblx0XHQvLyBGaXJlZm94IE1vYmlsZSBiZWZvcmUgNi4wIC1cclxuXHRcdCggZmZ2ZXJzaW9uICYmIGZmdmVyc2lvbiA8IDYgKSB8fFxyXG5cdFx0Ly8gV2ViT1MgbGVzcyB0aGFuIDNcclxuXHRcdCggXCJwYWxtR2V0UmVzb3VyY2VcIiBpbiB3aW5kb3cgJiYgd2t2ZXJzaW9uICYmIHdrdmVyc2lvbiA8IDUzNCApXHR8fFxyXG5cdFx0Ly8gTWVlR29cclxuXHRcdCggdWEuaW5kZXhPZiggXCJNZWVHb1wiICkgPiAtMSAmJiB1YS5pbmRleE9mKCBcIk5va2lhQnJvd3Nlci84LjUuMFwiICkgPiAtMSApICkge1xyXG5cdFx0cmV0dXJuIGZhbHNlO1xyXG5cdH1cclxuXHJcblx0cmV0dXJuIHRydWU7XHJcbn1cclxuXHJcbiQuZXh0ZW5kKCAkLnN1cHBvcnQsIHtcclxuXHQvLyBOb3RlLCBDaHJvbWUgZm9yIGlPUyBoYXMgYW4gZXh0cmVtZWx5IHF1aXJreSBpbXBsZW1lbnRhdGlvbiBvZiBwb3BzdGF0ZS5cclxuXHQvLyBXZSd2ZSBjaG9zZW4gdG8gdGFrZSB0aGUgc2hvcnRlc3QgcGF0aCB0byBhIGJ1ZyBmaXggaGVyZSBmb3IgaXNzdWUgIzU0MjZcclxuXHQvLyBTZWUgdGhlIGZvbGxvd2luZyBsaW5rIGZvciBpbmZvcm1hdGlvbiBhYm91dCB0aGUgcmVnZXggY2hvc2VuXHJcblx0Ly8gaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vY2hyb21lL21vYmlsZS9kb2NzL3VzZXItYWdlbnQjY2hyb21lX2Zvcl9pb3NfdXNlci1hZ2VudFxyXG5cdHB1c2hTdGF0ZTogXCJwdXNoU3RhdGVcIiBpbiBoaXN0b3J5ICYmXHJcblx0XHRcInJlcGxhY2VTdGF0ZVwiIGluIGhpc3RvcnkgJiZcclxuXHRcdC8vIFdoZW4gcnVubmluZyBpbnNpZGUgYSBGRiBpZnJhbWUsIGNhbGxpbmcgcmVwbGFjZVN0YXRlIGNhdXNlcyBhbiBlcnJvclxyXG5cdFx0ISggd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZiggXCJGaXJlZm94XCIgKSA+PSAwICYmIHdpbmRvdy50b3AgIT09IHdpbmRvdyApICYmXHJcblx0XHQoIHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50LnNlYXJjaCgvQ3JpT1MvKSA9PT0gLTEgKSxcclxuXHJcblx0bWVkaWFxdWVyeTogJC5tb2JpbGUubWVkaWEoIFwib25seSBhbGxcIiApLFxyXG5cdGNzc1BzZXVkb0VsZW1lbnQ6ICEhcHJvcEV4aXN0cyggXCJjb250ZW50XCIgKSxcclxuXHR0b3VjaE92ZXJmbG93OiAhIXByb3BFeGlzdHMoIFwib3ZlcmZsb3dTY3JvbGxpbmdcIiApLFxyXG5cdGNzc1RyYW5zZm9ybTNkOiB0cmFuc2Zvcm0zZFRlc3QoKSxcclxuXHRib3hTaGFkb3c6ICEhcHJvcEV4aXN0cyggXCJib3hTaGFkb3dcIiApICYmICFiYixcclxuXHRmaXhlZFBvc2l0aW9uOiBmaXhlZFBvc2l0aW9uKCksXHJcblx0c2Nyb2xsVG9wOiAoXCJwYWdlWE9mZnNldFwiIGluIHdpbmRvdyB8fFxyXG5cdFx0XCJzY3JvbGxUb3BcIiBpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQgfHxcclxuXHRcdFwic2Nyb2xsVG9wXCIgaW4gZmFrZUJvZHlbIDAgXSkgJiYgIXdlYm9zICYmICFvcGVyYW1pbmksXHJcblxyXG5cdGR5bmFtaWNCYXNlVGFnOiBiYXNlVGFnVGVzdCgpLFxyXG5cdGNzc1BvaW50ZXJFdmVudHM6IGNzc1BvaW50ZXJFdmVudHNUZXN0KCksXHJcblx0Ym91bmRpbmdSZWN0OiBib3VuZGluZ1JlY3QoKSxcclxuXHRpbmxpbmVTVkc6IGlubGluZVNWR1xyXG59KTtcclxuXHJcbmZha2VCb2R5LnJlbW92ZSgpO1xyXG5cclxuLy8gJC5tb2JpbGUuYWpheEJsYWNrbGlzdCBpcyB1c2VkIHRvIG92ZXJyaWRlIGFqYXhFbmFibGVkIG9uIHBsYXRmb3JtcyB0aGF0IGhhdmUga25vd24gY29uZmxpY3RzIHdpdGggaGFzaCBoaXN0b3J5IHVwZGF0ZXMgKEJCNSwgU3ltYmlhbilcclxuLy8gb3IgdGhhdCBnZW5lcmFsbHkgd29yayBiZXR0ZXIgYnJvd3NpbmcgaW4gcmVndWxhciBodHRwIGZvciBmdWxsIHBhZ2UgcmVmcmVzaGVzIChPcGVyYSBNaW5pKVxyXG4vLyBOb3RlOiBUaGlzIGRldGVjdGlvbiBiZWxvdyBpcyB1c2VkIGFzIGEgbGFzdCByZXNvcnQuXHJcbi8vIFdlIHJlY29tbWVuZCBvbmx5IHVzaW5nIHRoZXNlIGRldGVjdGlvbiBtZXRob2RzIHdoZW4gYWxsIG90aGVyIG1vcmUgcmVsaWFibGUvZm9yd2FyZC1sb29raW5nIGFwcHJvYWNoZXMgYXJlIG5vdCBwb3NzaWJsZVxyXG5ub2tpYUxURTdfMyA9IChmdW5jdGlvbigpIHtcclxuXHJcblx0dmFyIHVhID0gd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQ7XHJcblxyXG5cdC8vVGhlIGZvbGxvd2luZyBpcyBhbiBhdHRlbXB0IHRvIG1hdGNoIE5va2lhIGJyb3dzZXJzIHRoYXQgYXJlIHJ1bm5pbmcgU3ltYmlhbi9zNjAsIHdpdGggd2Via2l0LCB2ZXJzaW9uIDcuMyBvciBvbGRlclxyXG5cdHJldHVybiB1YS5pbmRleE9mKCBcIk5va2lhXCIgKSA+IC0xICYmXHJcblx0XHRcdCggdWEuaW5kZXhPZiggXCJTeW1iaWFuLzNcIiApID4gLTEgfHwgdWEuaW5kZXhPZiggXCJTZXJpZXM2MC81XCIgKSA+IC0xICkgJiZcclxuXHRcdFx0dWEuaW5kZXhPZiggXCJBcHBsZVdlYktpdFwiICkgPiAtMSAmJlxyXG5cdFx0XHR1YS5tYXRjaCggLyhCcm93c2VyTkd8Tm9raWFCcm93c2VyKVxcLzdcXC5bMC0zXS8gKTtcclxufSkoKTtcclxuXHJcbi8vIFN1cHBvcnQgY29uZGl0aW9ucyB0aGF0IG11c3QgYmUgbWV0IGluIG9yZGVyIHRvIHByb2NlZWRcclxuLy8gZGVmYXVsdCBlbmhhbmNlZCBxdWFsaWZpY2F0aW9ucyBhcmUgbWVkaWEgcXVlcnkgc3VwcG9ydCBPUiBJRSA3K1xyXG5cclxuJC5tb2JpbGUuZ3JhZGVBID0gZnVuY3Rpb24oKSB7XHJcblx0cmV0dXJuICggKCAkLnN1cHBvcnQubWVkaWFxdWVyeSAmJiAkLnN1cHBvcnQuY3NzUHNldWRvRWxlbWVudCApIHx8ICQubW9iaWxlLmJyb3dzZXIub2xkSUUgJiYgJC5tb2JpbGUuYnJvd3Nlci5vbGRJRSA+PSA4ICkgJiYgKCAkLnN1cHBvcnQuYm91bmRpbmdSZWN0IHx8ICQuZm4uanF1ZXJ5Lm1hdGNoKC8xXFwuWzAtNytdXFwuWzAtOStdPy8pICE9PSBudWxsICk7XHJcbn07XHJcblxyXG4kLm1vYmlsZS5hamF4QmxhY2tsaXN0ID1cclxuXHRcdFx0Ly8gQmxhY2tCZXJyeSBicm93c2VycywgcHJlLXdlYmtpdFxyXG5cdFx0XHR3aW5kb3cuYmxhY2tiZXJyeSAmJiAhd2luZG93LldlYktpdFBvaW50IHx8XHJcblx0XHRcdC8vIE9wZXJhIE1pbmlcclxuXHRcdFx0b3BlcmFtaW5pIHx8XHJcblx0XHRcdC8vIFN5bWJpYW4gd2Via2l0cyBwcmUgNy4zXHJcblx0XHRcdG5va2lhTFRFN18zO1xyXG5cclxuLy8gTGFzdGx5LCB0aGlzIHdvcmthcm91bmQgaXMgdGhlIG9ubHkgd2F5IHdlJ3ZlIGZvdW5kIHNvIGZhciB0byBnZXQgcHJlIDcuMyBTeW1iaWFuIHdlYmtpdCBkZXZpY2VzXHJcbi8vIHRvIHJlbmRlciB0aGUgc3R5bGVzaGVldHMgd2hlbiB0aGV5J3JlIHJlZmVyZW5jZWQgYmVmb3JlIHRoaXMgc2NyaXB0LCBhcyB3ZSdkIHJlY29tbWVuZCBkb2luZy5cclxuLy8gVGhpcyBzaW1wbHkgcmVhcHBlbmRzIHRoZSBDU1MgaW4gcGxhY2UsIHdoaWNoIGZvciBzb21lIHJlYXNvbiBtYWtlcyBpdCBhcHBseVxyXG5pZiAoIG5va2lhTFRFN18zICkge1xyXG5cdCQoZnVuY3Rpb24oKSB7XHJcblx0XHQkKCBcImhlYWQgbGlua1tyZWw9J3N0eWxlc2hlZXQnXVwiICkuYXR0ciggXCJyZWxcIiwgXCJhbHRlcm5hdGUgc3R5bGVzaGVldFwiICkuYXR0ciggXCJyZWxcIiwgXCJzdHlsZXNoZWV0XCIgKTtcclxuXHR9KTtcclxufVxyXG5cclxuLy8gRm9yIHJ1bGluZyBvdXQgc2hhZG93cyB2aWEgY3NzXHJcbmlmICggISQuc3VwcG9ydC5ib3hTaGFkb3cgKSB7XHJcblx0JCggXCJodG1sXCIgKS5hZGRDbGFzcyggXCJ1aS1ub2JveHNoYWRvd1wiICk7XHJcbn1cclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHR2YXIgJHdpbiA9ICQubW9iaWxlLndpbmRvdywgc2VsZixcclxuXHRcdGR1bW15Rm5Ub0luaXROYXZpZ2F0ZSA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0fTtcclxuXHJcblx0JC5ldmVudC5zcGVjaWFsLmJlZm9yZW5hdmlnYXRlID0ge1xyXG5cdFx0c2V0dXA6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHQkd2luLm9uKCBcIm5hdmlnYXRlXCIsIGR1bW15Rm5Ub0luaXROYXZpZ2F0ZSApO1xyXG5cdFx0fSxcclxuXHJcblx0XHR0ZWFyZG93bjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdCR3aW4ub2ZmKCBcIm5hdmlnYXRlXCIsIGR1bW15Rm5Ub0luaXROYXZpZ2F0ZSApO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdCQuZXZlbnQuc3BlY2lhbC5uYXZpZ2F0ZSA9IHNlbGYgPSB7XHJcblx0XHRib3VuZDogZmFsc2UsXHJcblxyXG5cdFx0cHVzaFN0YXRlRW5hYmxlZDogdHJ1ZSxcclxuXHJcblx0XHRvcmlnaW5hbEV2ZW50TmFtZTogdW5kZWZpbmVkLFxyXG5cclxuXHRcdC8vIElmIHB1c2hzdGF0ZSBzdXBwb3J0IGlzIHByZXNlbnQgYW5kIHB1c2ggc3RhdGUgc3VwcG9ydCBpcyBkZWZpbmVkIHRvXHJcblx0XHQvLyBiZSB0cnVlIG9uIHRoZSBtb2JpbGUgbmFtZXNwYWNlLlxyXG5cdFx0aXNQdXNoU3RhdGVFbmFibGVkOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0cmV0dXJuICQuc3VwcG9ydC5wdXNoU3RhdGUgJiZcclxuXHRcdFx0XHQkLm1vYmlsZS5wdXNoU3RhdGVFbmFibGVkID09PSB0cnVlICYmXHJcblx0XHRcdFx0dGhpcy5pc0hhc2hDaGFuZ2VFbmFibGVkKCk7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vICEhIGFzc3VtZXMgbW9iaWxlIG5hbWVzcGFjZSBpcyBwcmVzZW50XHJcblx0XHRpc0hhc2hDaGFuZ2VFbmFibGVkOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0cmV0dXJuICQubW9iaWxlLmhhc2hMaXN0ZW5pbmdFbmFibGVkID09PSB0cnVlO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvLyBUT0RPIGEgbG90IG9mIGR1cGxpY2F0aW9uIGJldHdlZW4gcG9wc3RhdGUgYW5kIGhhc2hjaGFuZ2VcclxuXHRcdHBvcHN0YXRlOiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHRcdHZhciBuZXdFdmVudCA9IG5ldyAkLkV2ZW50KCBcIm5hdmlnYXRlXCIgKSxcclxuXHRcdFx0XHRiZWZvcmVOYXZpZ2F0ZSA9IG5ldyAkLkV2ZW50KCBcImJlZm9yZW5hdmlnYXRlXCIgKSxcclxuXHRcdFx0XHRzdGF0ZSA9IGV2ZW50Lm9yaWdpbmFsRXZlbnQuc3RhdGUgfHwge307XHJcblxyXG5cdFx0XHRiZWZvcmVOYXZpZ2F0ZS5vcmlnaW5hbEV2ZW50ID0gZXZlbnQ7XHJcblx0XHRcdCR3aW4udHJpZ2dlciggYmVmb3JlTmF2aWdhdGUgKTtcclxuXHJcblx0XHRcdGlmICggYmVmb3JlTmF2aWdhdGUuaXNEZWZhdWx0UHJldmVudGVkKCkgKSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoIGV2ZW50Lmhpc3RvcnlTdGF0ZSApIHtcclxuXHRcdFx0XHQkLmV4dGVuZChzdGF0ZSwgZXZlbnQuaGlzdG9yeVN0YXRlKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gTWFrZSBzdXJlIHRoZSBvcmlnaW5hbCBldmVudCBpcyB0cmFja2VkIGZvciB0aGUgZW5kXHJcblx0XHRcdC8vIHVzZXIgdG8gaW5zcGVjdCBpbmNhc2UgdGhleSB3YW50IHRvIGRvIHNvbWV0aGluZyBzcGVjaWFsXHJcblx0XHRcdG5ld0V2ZW50Lm9yaWdpbmFsRXZlbnQgPSBldmVudDtcclxuXHJcblx0XHRcdC8vIE5PVEUgd2UgbGV0IHRoZSBjdXJyZW50IHN0YWNrIHVud2luZCBiZWNhdXNlIGFueSBhc3NpZ25tZW50IHRvXHJcblx0XHRcdC8vICAgICAgbG9jYXRpb24uaGFzaCB3aWxsIHN0b3AgdGhlIHdvcmxkIGFuZCBydW4gdGhpcyBldmVudCBoYW5kbGVyLiBCeVxyXG5cdFx0XHQvLyAgICAgIGRvaW5nIHRoaXMgd2UgY3JlYXRlIGEgc2ltaWxhciBiZWhhdmlvciB0byBoYXNoY2hhbmdlIG9uIGhhc2hcclxuXHRcdFx0Ly8gICAgICBhc3NpZ25tZW50XHJcblx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0JHdpbi50cmlnZ2VyKCBuZXdFdmVudCwge1xyXG5cdFx0XHRcdFx0c3RhdGU6IHN0YXRlXHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH0sIDApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRoYXNoY2hhbmdlOiBmdW5jdGlvbiggZXZlbnQgLyosIGRhdGEgKi8gKSB7XHJcblx0XHRcdHZhciBuZXdFdmVudCA9IG5ldyAkLkV2ZW50KCBcIm5hdmlnYXRlXCIgKSxcclxuXHRcdFx0XHRiZWZvcmVOYXZpZ2F0ZSA9IG5ldyAkLkV2ZW50KCBcImJlZm9yZW5hdmlnYXRlXCIgKTtcclxuXHJcblx0XHRcdGJlZm9yZU5hdmlnYXRlLm9yaWdpbmFsRXZlbnQgPSBldmVudDtcclxuXHRcdFx0JHdpbi50cmlnZ2VyKCBiZWZvcmVOYXZpZ2F0ZSApO1xyXG5cclxuXHRcdFx0aWYgKCBiZWZvcmVOYXZpZ2F0ZS5pc0RlZmF1bHRQcmV2ZW50ZWQoKSApIHtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIE1ha2Ugc3VyZSB0aGUgb3JpZ2luYWwgZXZlbnQgaXMgdHJhY2tlZCBmb3IgdGhlIGVuZFxyXG5cdFx0XHQvLyB1c2VyIHRvIGluc3BlY3QgaW5jYXNlIHRoZXkgd2FudCB0byBkbyBzb21ldGhpbmcgc3BlY2lhbFxyXG5cdFx0XHRuZXdFdmVudC5vcmlnaW5hbEV2ZW50ID0gZXZlbnQ7XHJcblxyXG5cdFx0XHQvLyBUcmlnZ2VyIHRoZSBoYXNoY2hhbmdlIHdpdGggc3RhdGUgcHJvdmlkZWQgYnkgdGhlIHVzZXJcclxuXHRcdFx0Ly8gdGhhdCBhbHRlcmVkIHRoZSBoYXNoXHJcblx0XHRcdCR3aW4udHJpZ2dlciggbmV3RXZlbnQsIHtcclxuXHRcdFx0XHQvLyBVc2VycyB0aGF0IHdhbnQgdG8gZnVsbHkgbm9ybWFsaXplIHRoZSB0d28gZXZlbnRzXHJcblx0XHRcdFx0Ly8gd2lsbCBuZWVkIHRvIGRvIGhpc3RvcnkgbWFuYWdlbWVudCBkb3duIHRoZSBzdGFjayBhbmRcclxuXHRcdFx0XHQvLyBhZGQgdGhlIHN0YXRlIHRvIHRoZSBldmVudCBiZWZvcmUgdGhpcyBiaW5kaW5nIGlzIGZpcmVkXHJcblx0XHRcdFx0Ly8gVE9ETyBjb25zaWRlciBhbGxvd2luZyBmb3IgdGhlIGV4cGxpY2l0IGFkZGl0aW9uIG9mIGNhbGxiYWNrc1xyXG5cdFx0XHRcdC8vICAgICAgdG8gYmUgZmlyZWQgYmVmb3JlIHRoaXMgdmFsdWUgaXMgc2V0IHRvIGF2b2lkIGV2ZW50IHRpbWluZyBpc3N1ZXNcclxuXHRcdFx0XHRzdGF0ZTogZXZlbnQuaGFzaGNoYW5nZVN0YXRlIHx8IHt9XHJcblx0XHRcdH0pO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvLyBUT0RPIFdlIHJlYWxseSBvbmx5IHdhbnQgdG8gc2V0IHRoaXMgdXAgb25jZVxyXG5cdFx0Ly8gICAgICBidXQgSSdtIG5vdCBjbGVhciBpZiB0aGVyZSdzIGEgYmV0ZXIgd2F5IHRvIGFjaGlldmVcclxuXHRcdC8vICAgICAgdGhpcyB3aXRoIHRoZSBqUXVlcnkgc3BlY2lhbCBldmVudCBzdHJ1Y3R1cmVcclxuXHRcdHNldHVwOiBmdW5jdGlvbiggLyogZGF0YSwgbmFtZXNwYWNlcyAqLyApIHtcclxuXHRcdFx0aWYgKCBzZWxmLmJvdW5kICkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0c2VsZi5ib3VuZCA9IHRydWU7XHJcblxyXG5cdFx0XHRpZiAoIHNlbGYuaXNQdXNoU3RhdGVFbmFibGVkKCkgKSB7XHJcblx0XHRcdFx0c2VsZi5vcmlnaW5hbEV2ZW50TmFtZSA9IFwicG9wc3RhdGVcIjtcclxuXHRcdFx0XHQkd2luLmJpbmQoIFwicG9wc3RhdGUubmF2aWdhdGVcIiwgc2VsZi5wb3BzdGF0ZSApO1xyXG5cdFx0XHR9IGVsc2UgaWYgKCBzZWxmLmlzSGFzaENoYW5nZUVuYWJsZWQoKSApIHtcclxuXHRcdFx0XHRzZWxmLm9yaWdpbmFsRXZlbnROYW1lID0gXCJoYXNoY2hhbmdlXCI7XHJcblx0XHRcdFx0JHdpbi5iaW5kKCBcImhhc2hjaGFuZ2UubmF2aWdhdGVcIiwgc2VsZi5oYXNoY2hhbmdlICk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9O1xyXG59KSggalF1ZXJ5ICk7XHJcblxyXG5cclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cdFx0dmFyIHBhdGgsICRiYXNlLCBkaWFsb2dIYXNoS2V5ID0gXCImdWktc3RhdGU9ZGlhbG9nXCI7XHJcblxyXG5cdFx0JC5tb2JpbGUucGF0aCA9IHBhdGggPSB7XHJcblx0XHRcdHVpU3RhdGVLZXk6IFwiJnVpLXN0YXRlXCIsXHJcblxyXG5cdFx0XHQvLyBUaGlzIHNjYXJ5IGxvb2tpbmcgcmVndWxhciBleHByZXNzaW9uIHBhcnNlcyBhbiBhYnNvbHV0ZSBVUkwgb3IgaXRzIHJlbGF0aXZlXHJcblx0XHRcdC8vIHZhcmlhbnRzIChwcm90b2NvbCwgc2l0ZSwgZG9jdW1lbnQsIHF1ZXJ5LCBhbmQgaGFzaCksIGludG8gdGhlIHZhcmlvdXNcclxuXHRcdFx0Ly8gY29tcG9uZW50cyAocHJvdG9jb2wsIGhvc3QsIHBhdGgsIHF1ZXJ5LCBmcmFnbWVudCwgZXRjIHRoYXQgbWFrZSB1cCB0aGVcclxuXHRcdFx0Ly8gVVJMIGFzIHdlbGwgYXMgc29tZSBvdGhlciBjb21tb25seSB1c2VkIHN1Yi1wYXJ0cy4gV2hlbiB1c2VkIHdpdGggUmVnRXhwLmV4ZWMoKVxyXG5cdFx0XHQvLyBvciBTdHJpbmcubWF0Y2gsIGl0IHBhcnNlcyB0aGUgVVJMIGludG8gYSByZXN1bHRzIGFycmF5IHRoYXQgbG9va3MgbGlrZSB0aGlzOlxyXG5cdFx0XHQvL1xyXG5cdFx0XHQvLyAgICAgWzBdOiBodHRwOi8vamJsYXM6cGFzc3dvcmRAbXljb21wYW55LmNvbTo4MDgwL21haWwvaW5ib3g/bXNnPTEyMzQmdHlwZT11bnJlYWQjbXNnLWNvbnRlbnRcclxuXHRcdFx0Ly8gICAgIFsxXTogaHR0cDovL2pibGFzOnBhc3N3b3JkQG15Y29tcGFueS5jb206ODA4MC9tYWlsL2luYm94P21zZz0xMjM0JnR5cGU9dW5yZWFkXHJcblx0XHRcdC8vICAgICBbMl06IGh0dHA6Ly9qYmxhczpwYXNzd29yZEBteWNvbXBhbnkuY29tOjgwODAvbWFpbC9pbmJveFxyXG5cdFx0XHQvLyAgICAgWzNdOiBodHRwOi8vamJsYXM6cGFzc3dvcmRAbXljb21wYW55LmNvbTo4MDgwXHJcblx0XHRcdC8vICAgICBbNF06IGh0dHA6XHJcblx0XHRcdC8vICAgICBbNV06IC8vXHJcblx0XHRcdC8vICAgICBbNl06IGpibGFzOnBhc3N3b3JkQG15Y29tcGFueS5jb206ODA4MFxyXG5cdFx0XHQvLyAgICAgWzddOiBqYmxhczpwYXNzd29yZFxyXG5cdFx0XHQvLyAgICAgWzhdOiBqYmxhc1xyXG5cdFx0XHQvLyAgICAgWzldOiBwYXNzd29yZFxyXG5cdFx0XHQvLyAgICBbMTBdOiBteWNvbXBhbnkuY29tOjgwODBcclxuXHRcdFx0Ly8gICAgWzExXTogbXljb21wYW55LmNvbVxyXG5cdFx0XHQvLyAgICBbMTJdOiA4MDgwXHJcblx0XHRcdC8vICAgIFsxM106IC9tYWlsL2luYm94XHJcblx0XHRcdC8vICAgIFsxNF06IC9tYWlsL1xyXG5cdFx0XHQvLyAgICBbMTVdOiBpbmJveFxyXG5cdFx0XHQvLyAgICBbMTZdOiA/bXNnPTEyMzQmdHlwZT11bnJlYWRcclxuXHRcdFx0Ly8gICAgWzE3XTogI21zZy1jb250ZW50XHJcblx0XHRcdC8vXHJcblx0XHRcdHVybFBhcnNlUkU6IC9eXFxzKigoKChbXjpcXC8jXFw/XSs6KT8oPzooXFwvXFwvKSgoPzooKFteOkBcXC8jXFw/XSspKD86XFw6KFteOkBcXC8jXFw/XSspKT8pQCk/KChbXjpcXC8jXFw/XFxdXFxbXSt8XFxbW15cXC9cXF1AIz9dK1xcXSkoPzpcXDooWzAtOV0rKSk/KSk/KT8pPygoXFwvPyg/OlteXFwvXFw/I10rXFwvKykqKShbXlxcPyNdKikpKT8oXFw/W14jXSspPykoIy4qKT8vLFxyXG5cclxuXHRcdFx0Ly8gQWJzdHJhY3Rpb24gdG8gYWRkcmVzcyB4c3MgKElzc3VlICM0Nzg3KSBieSByZW1vdmluZyB0aGUgYXV0aG9yaXR5IGluXHJcblx0XHRcdC8vIGJyb3dzZXJzIHRoYXQgYXV0by1kZWNvZGUgaXQuIEFsbCByZWZlcmVuY2VzIHRvIGxvY2F0aW9uLmhyZWYgc2hvdWxkIGJlXHJcblx0XHRcdC8vIHJlcGxhY2VkIHdpdGggYSBjYWxsIHRvIHRoaXMgbWV0aG9kIHNvIHRoYXQgaXQgY2FuIGJlIGRlYWx0IHdpdGggcHJvcGVybHkgaGVyZVxyXG5cdFx0XHRnZXRMb2NhdGlvbjogZnVuY3Rpb24oIHVybCApIHtcclxuXHRcdFx0XHR2YXIgcGFyc2VkVXJsID0gdGhpcy5wYXJzZVVybCggdXJsIHx8IGxvY2F0aW9uLmhyZWYgKSxcclxuXHRcdFx0XHRcdHVyaSA9IHVybCA/IHBhcnNlZFVybCA6IGxvY2F0aW9uLFxyXG5cclxuXHRcdFx0XHRcdC8vIE1ha2Ugc3VyZSB0byBwYXJzZSB0aGUgdXJsIG9yIHRoZSBsb2NhdGlvbiBvYmplY3QgZm9yIHRoZSBoYXNoIGJlY2F1c2UgdXNpbmdcclxuXHRcdFx0XHRcdC8vIGxvY2F0aW9uLmhhc2ggaXMgYXV0b2RlY29kZWQgaW4gZmlyZWZveCwgdGhlIHJlc3Qgb2YgdGhlIHVybCBzaG91bGQgYmUgZnJvbVxyXG5cdFx0XHRcdFx0Ly8gdGhlIG9iamVjdCAobG9jYXRpb24gdW5sZXNzIHdlJ3JlIHRlc3RpbmcpIHRvIGF2b2lkIHRoZSBpbmNsdXNpb24gb2YgdGhlXHJcblx0XHRcdFx0XHQvLyBhdXRob3JpdHlcclxuXHRcdFx0XHRcdGhhc2ggPSBwYXJzZWRVcmwuaGFzaDtcclxuXHJcblx0XHRcdFx0Ly8gbWltaWMgdGhlIGJyb3dzZXIgd2l0aCBhbiBlbXB0eSBzdHJpbmcgd2hlbiB0aGUgaGFzaCBpcyBlbXB0eVxyXG5cdFx0XHRcdGhhc2ggPSBoYXNoID09PSBcIiNcIiA/IFwiXCIgOiBoYXNoO1xyXG5cclxuXHRcdFx0XHRyZXR1cm4gdXJpLnByb3RvY29sICtcclxuXHRcdFx0XHRcdHBhcnNlZFVybC5kb3VibGVTbGFzaCArXHJcblx0XHRcdFx0XHR1cmkuaG9zdCArXHJcblxyXG5cdFx0XHRcdFx0Ly8gVGhlIHBhdGhuYW1lIG11c3Qgc3RhcnQgd2l0aCBhIHNsYXNoIGlmIHRoZXJlJ3MgYSBwcm90b2NvbCwgYmVjYXVzZSB5b3VcclxuXHRcdFx0XHRcdC8vIGNhbid0IGhhdmUgYSBwcm90b2NvbCBmb2xsb3dlZCBieSBhIHJlbGF0aXZlIHBhdGguIEFsc28sIGl0J3MgaW1wb3NzaWJsZSB0b1xyXG5cdFx0XHRcdFx0Ly8gY2FsY3VsYXRlIGFic29sdXRlIFVSTHMgZnJvbSByZWxhdGl2ZSBvbmVzIGlmIHRoZSBhYnNvbHV0ZSBvbmUgZG9lc24ndCBoYXZlXHJcblx0XHRcdFx0XHQvLyBhIGxlYWRpbmcgXCIvXCIuXHJcblx0XHRcdFx0XHQoICggdXJpLnByb3RvY29sICE9PSBcIlwiICYmIHVyaS5wYXRobmFtZS5zdWJzdHJpbmcoIDAsIDEgKSAhPT0gXCIvXCIgKSA/XHJcblx0XHRcdFx0XHRcdFwiL1wiIDogXCJcIiApICtcclxuXHRcdFx0XHRcdHVyaS5wYXRobmFtZSArXHJcblx0XHRcdFx0XHR1cmkuc2VhcmNoICtcclxuXHRcdFx0XHRcdGhhc2g7XHJcblx0XHRcdH0sXHJcblxyXG5cdFx0XHQvL3JldHVybiB0aGUgb3JpZ2luYWwgZG9jdW1lbnQgdXJsXHJcblx0XHRcdGdldERvY3VtZW50VXJsOiBmdW5jdGlvbiggYXNQYXJzZWRPYmplY3QgKSB7XHJcblx0XHRcdFx0cmV0dXJuIGFzUGFyc2VkT2JqZWN0ID8gJC5leHRlbmQoIHt9LCBwYXRoLmRvY3VtZW50VXJsICkgOiBwYXRoLmRvY3VtZW50VXJsLmhyZWY7XHJcblx0XHRcdH0sXHJcblxyXG5cdFx0XHRwYXJzZUxvY2F0aW9uOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRyZXR1cm4gdGhpcy5wYXJzZVVybCggdGhpcy5nZXRMb2NhdGlvbigpICk7XHJcblx0XHRcdH0sXHJcblxyXG5cdFx0XHQvL1BhcnNlIGEgVVJMIGludG8gYSBzdHJ1Y3R1cmUgdGhhdCBhbGxvd3MgZWFzeSBhY2Nlc3MgdG9cclxuXHRcdFx0Ly9hbGwgb2YgdGhlIFVSTCBjb21wb25lbnRzIGJ5IG5hbWUuXHJcblx0XHRcdHBhcnNlVXJsOiBmdW5jdGlvbiggdXJsICkge1xyXG5cdFx0XHRcdC8vIElmIHdlJ3JlIHBhc3NlZCBhbiBvYmplY3QsIHdlJ2xsIGFzc3VtZSB0aGF0IGl0IGlzXHJcblx0XHRcdFx0Ly8gYSBwYXJzZWQgdXJsIG9iamVjdCBhbmQganVzdCByZXR1cm4gaXQgYmFjayB0byB0aGUgY2FsbGVyLlxyXG5cdFx0XHRcdGlmICggJC50eXBlKCB1cmwgKSA9PT0gXCJvYmplY3RcIiApIHtcclxuXHRcdFx0XHRcdHJldHVybiB1cmw7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHR2YXIgbWF0Y2hlcyA9IHBhdGgudXJsUGFyc2VSRS5leGVjKCB1cmwgfHwgXCJcIiApIHx8IFtdO1xyXG5cclxuXHRcdFx0XHRcdC8vIENyZWF0ZSBhbiBvYmplY3QgdGhhdCBhbGxvd3MgdGhlIGNhbGxlciB0byBhY2Nlc3MgdGhlIHN1Yi1tYXRjaGVzXHJcblx0XHRcdFx0XHQvLyBieSBuYW1lLiBOb3RlIHRoYXQgSUUgcmV0dXJucyBhbiBlbXB0eSBzdHJpbmcgaW5zdGVhZCBvZiB1bmRlZmluZWQsXHJcblx0XHRcdFx0XHQvLyBsaWtlIGFsbCBvdGhlciBicm93c2VycyBkbywgc28gd2Ugbm9ybWFsaXplIGV2ZXJ5dGhpbmcgc28gaXRzIGNvbnNpc3RlbnRcclxuXHRcdFx0XHRcdC8vIG5vIG1hdHRlciB3aGF0IGJyb3dzZXIgd2UncmUgcnVubmluZyBvbi5cclxuXHRcdFx0XHRcdHJldHVybiB7XHJcblx0XHRcdFx0XHRcdGhyZWY6ICAgICAgICAgbWF0Y2hlc1sgIDAgXSB8fCBcIlwiLFxyXG5cdFx0XHRcdFx0XHRocmVmTm9IYXNoOiAgIG1hdGNoZXNbICAxIF0gfHwgXCJcIixcclxuXHRcdFx0XHRcdFx0aHJlZk5vU2VhcmNoOiBtYXRjaGVzWyAgMiBdIHx8IFwiXCIsXHJcblx0XHRcdFx0XHRcdGRvbWFpbjogICAgICAgbWF0Y2hlc1sgIDMgXSB8fCBcIlwiLFxyXG5cdFx0XHRcdFx0XHRwcm90b2NvbDogICAgIG1hdGNoZXNbICA0IF0gfHwgXCJcIixcclxuXHRcdFx0XHRcdFx0ZG91YmxlU2xhc2g6ICBtYXRjaGVzWyAgNSBdIHx8IFwiXCIsXHJcblx0XHRcdFx0XHRcdGF1dGhvcml0eTogICAgbWF0Y2hlc1sgIDYgXSB8fCBcIlwiLFxyXG5cdFx0XHRcdFx0XHR1c2VybmFtZTogICAgIG1hdGNoZXNbICA4IF0gfHwgXCJcIixcclxuXHRcdFx0XHRcdFx0cGFzc3dvcmQ6ICAgICBtYXRjaGVzWyAgOSBdIHx8IFwiXCIsXHJcblx0XHRcdFx0XHRcdGhvc3Q6ICAgICAgICAgbWF0Y2hlc1sgMTAgXSB8fCBcIlwiLFxyXG5cdFx0XHRcdFx0XHRob3N0bmFtZTogICAgIG1hdGNoZXNbIDExIF0gfHwgXCJcIixcclxuXHRcdFx0XHRcdFx0cG9ydDogICAgICAgICBtYXRjaGVzWyAxMiBdIHx8IFwiXCIsXHJcblx0XHRcdFx0XHRcdHBhdGhuYW1lOiAgICAgbWF0Y2hlc1sgMTMgXSB8fCBcIlwiLFxyXG5cdFx0XHRcdFx0XHRkaXJlY3Rvcnk6ICAgIG1hdGNoZXNbIDE0IF0gfHwgXCJcIixcclxuXHRcdFx0XHRcdFx0ZmlsZW5hbWU6ICAgICBtYXRjaGVzWyAxNSBdIHx8IFwiXCIsXHJcblx0XHRcdFx0XHRcdHNlYXJjaDogICAgICAgbWF0Y2hlc1sgMTYgXSB8fCBcIlwiLFxyXG5cdFx0XHRcdFx0XHRoYXNoOiAgICAgICAgIG1hdGNoZXNbIDE3IF0gfHwgXCJcIlxyXG5cdFx0XHRcdFx0fTtcclxuXHRcdFx0fSxcclxuXHJcblx0XHRcdC8vVHVybiByZWxQYXRoIGludG8gYW4gYXNib2x1dGUgcGF0aC4gYWJzUGF0aCBpc1xyXG5cdFx0XHQvL2FuIG9wdGlvbmFsIGFic29sdXRlIHBhdGggd2hpY2ggZGVzY3JpYmVzIHdoYXRcclxuXHRcdFx0Ly9yZWxQYXRoIGlzIHJlbGF0aXZlIHRvLlxyXG5cdFx0XHRtYWtlUGF0aEFic29sdXRlOiBmdW5jdGlvbiggcmVsUGF0aCwgYWJzUGF0aCApIHtcclxuXHRcdFx0XHR2YXIgYWJzU3RhY2ssXHJcblx0XHRcdFx0XHRyZWxTdGFjayxcclxuXHRcdFx0XHRcdGksIGQ7XHJcblxyXG5cdFx0XHRcdGlmICggcmVsUGF0aCAmJiByZWxQYXRoLmNoYXJBdCggMCApID09PSBcIi9cIiApIHtcclxuXHRcdFx0XHRcdHJldHVybiByZWxQYXRoO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0cmVsUGF0aCA9IHJlbFBhdGggfHwgXCJcIjtcclxuXHRcdFx0XHRhYnNQYXRoID0gYWJzUGF0aCA/IGFic1BhdGgucmVwbGFjZSggL15cXC98KFxcL1teXFwvXSp8W15cXC9dKykkL2csIFwiXCIgKSA6IFwiXCI7XHJcblxyXG5cdFx0XHRcdGFic1N0YWNrID0gYWJzUGF0aCA/IGFic1BhdGguc3BsaXQoIFwiL1wiICkgOiBbXTtcclxuXHRcdFx0XHRyZWxTdGFjayA9IHJlbFBhdGguc3BsaXQoIFwiL1wiICk7XHJcblxyXG5cdFx0XHRcdGZvciAoIGkgPSAwOyBpIDwgcmVsU3RhY2subGVuZ3RoOyBpKysgKSB7XHJcblx0XHRcdFx0XHRkID0gcmVsU3RhY2tbIGkgXTtcclxuXHRcdFx0XHRcdHN3aXRjaCAoIGQgKSB7XHJcblx0XHRcdFx0XHRcdGNhc2UgXCIuXCI6XHJcblx0XHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRcdGNhc2UgXCIuLlwiOlxyXG5cdFx0XHRcdFx0XHRcdGlmICggYWJzU3RhY2subGVuZ3RoICkge1xyXG5cdFx0XHRcdFx0XHRcdFx0YWJzU3RhY2sucG9wKCk7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0XHRkZWZhdWx0OlxyXG5cdFx0XHRcdFx0XHRcdGFic1N0YWNrLnB1c2goIGQgKTtcclxuXHRcdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0cmV0dXJuIFwiL1wiICsgYWJzU3RhY2suam9pbiggXCIvXCIgKTtcclxuXHRcdFx0fSxcclxuXHJcblx0XHRcdC8vUmV0dXJucyB0cnVlIGlmIGJvdGggdXJscyBoYXZlIHRoZSBzYW1lIGRvbWFpbi5cclxuXHRcdFx0aXNTYW1lRG9tYWluOiBmdW5jdGlvbiggYWJzVXJsMSwgYWJzVXJsMiApIHtcclxuXHRcdFx0XHRyZXR1cm4gcGF0aC5wYXJzZVVybCggYWJzVXJsMSApLmRvbWFpbi50b0xvd2VyQ2FzZSgpID09PVxyXG5cdFx0XHRcdFx0cGF0aC5wYXJzZVVybCggYWJzVXJsMiApLmRvbWFpbi50b0xvd2VyQ2FzZSgpO1xyXG5cdFx0XHR9LFxyXG5cclxuXHRcdFx0Ly9SZXR1cm5zIHRydWUgZm9yIGFueSByZWxhdGl2ZSB2YXJpYW50LlxyXG5cdFx0XHRpc1JlbGF0aXZlVXJsOiBmdW5jdGlvbiggdXJsICkge1xyXG5cdFx0XHRcdC8vIEFsbCByZWxhdGl2ZSBVcmwgdmFyaWFudHMgaGF2ZSBvbmUgdGhpbmcgaW4gY29tbW9uLCBubyBwcm90b2NvbC5cclxuXHRcdFx0XHRyZXR1cm4gcGF0aC5wYXJzZVVybCggdXJsICkucHJvdG9jb2wgPT09IFwiXCI7XHJcblx0XHRcdH0sXHJcblxyXG5cdFx0XHQvL1JldHVybnMgdHJ1ZSBmb3IgYW4gYWJzb2x1dGUgdXJsLlxyXG5cdFx0XHRpc0Fic29sdXRlVXJsOiBmdW5jdGlvbiggdXJsICkge1xyXG5cdFx0XHRcdHJldHVybiBwYXRoLnBhcnNlVXJsKCB1cmwgKS5wcm90b2NvbCAhPT0gXCJcIjtcclxuXHRcdFx0fSxcclxuXHJcblx0XHRcdC8vVHVybiB0aGUgc3BlY2lmaWVkIHJlYWx0aXZlIFVSTCBpbnRvIGFuIGFic29sdXRlIG9uZS4gVGhpcyBmdW5jdGlvblxyXG5cdFx0XHQvL2NhbiBoYW5kbGUgYWxsIHJlbGF0aXZlIHZhcmlhbnRzIChwcm90b2NvbCwgc2l0ZSwgZG9jdW1lbnQsIHF1ZXJ5LCBmcmFnbWVudCkuXHJcblx0XHRcdG1ha2VVcmxBYnNvbHV0ZTogZnVuY3Rpb24oIHJlbFVybCwgYWJzVXJsICkge1xyXG5cdFx0XHRcdGlmICggIXBhdGguaXNSZWxhdGl2ZVVybCggcmVsVXJsICkgKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gcmVsVXJsO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0aWYgKCBhYnNVcmwgPT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0XHRcdGFic1VybCA9IHRoaXMuZG9jdW1lbnRCYXNlO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0dmFyIHJlbE9iaiA9IHBhdGgucGFyc2VVcmwoIHJlbFVybCApLFxyXG5cdFx0XHRcdFx0YWJzT2JqID0gcGF0aC5wYXJzZVVybCggYWJzVXJsICksXHJcblx0XHRcdFx0XHRwcm90b2NvbCA9IHJlbE9iai5wcm90b2NvbCB8fCBhYnNPYmoucHJvdG9jb2wsXHJcblx0XHRcdFx0XHRkb3VibGVTbGFzaCA9IHJlbE9iai5wcm90b2NvbCA/IHJlbE9iai5kb3VibGVTbGFzaCA6ICggcmVsT2JqLmRvdWJsZVNsYXNoIHx8IGFic09iai5kb3VibGVTbGFzaCApLFxyXG5cdFx0XHRcdFx0YXV0aG9yaXR5ID0gcmVsT2JqLmF1dGhvcml0eSB8fCBhYnNPYmouYXV0aG9yaXR5LFxyXG5cdFx0XHRcdFx0aGFzUGF0aCA9IHJlbE9iai5wYXRobmFtZSAhPT0gXCJcIixcclxuXHRcdFx0XHRcdHBhdGhuYW1lID0gcGF0aC5tYWtlUGF0aEFic29sdXRlKCByZWxPYmoucGF0aG5hbWUgfHwgYWJzT2JqLmZpbGVuYW1lLCBhYnNPYmoucGF0aG5hbWUgKSxcclxuXHRcdFx0XHRcdHNlYXJjaCA9IHJlbE9iai5zZWFyY2ggfHwgKCAhaGFzUGF0aCAmJiBhYnNPYmouc2VhcmNoICkgfHwgXCJcIixcclxuXHRcdFx0XHRcdGhhc2ggPSByZWxPYmouaGFzaDtcclxuXHJcblx0XHRcdFx0cmV0dXJuIHByb3RvY29sICsgZG91YmxlU2xhc2ggKyBhdXRob3JpdHkgKyBwYXRobmFtZSArIHNlYXJjaCArIGhhc2g7XHJcblx0XHRcdH0sXHJcblxyXG5cdFx0XHQvL0FkZCBzZWFyY2ggKGFrYSBxdWVyeSkgcGFyYW1zIHRvIHRoZSBzcGVjaWZpZWQgdXJsLlxyXG5cdFx0XHRhZGRTZWFyY2hQYXJhbXM6IGZ1bmN0aW9uKCB1cmwsIHBhcmFtcyApIHtcclxuXHRcdFx0XHR2YXIgdSA9IHBhdGgucGFyc2VVcmwoIHVybCApLFxyXG5cdFx0XHRcdFx0cCA9ICggdHlwZW9mIHBhcmFtcyA9PT0gXCJvYmplY3RcIiApID8gJC5wYXJhbSggcGFyYW1zICkgOiBwYXJhbXMsXHJcblx0XHRcdFx0XHRzID0gdS5zZWFyY2ggfHwgXCI/XCI7XHJcblx0XHRcdFx0cmV0dXJuIHUuaHJlZk5vU2VhcmNoICsgcyArICggcy5jaGFyQXQoIHMubGVuZ3RoIC0gMSApICE9PSBcIj9cIiA/IFwiJlwiIDogXCJcIiApICsgcCArICggdS5oYXNoIHx8IFwiXCIgKTtcclxuXHRcdFx0fSxcclxuXHJcblx0XHRcdGNvbnZlcnRVcmxUb0RhdGFVcmw6IGZ1bmN0aW9uKCBhYnNVcmwgKSB7XHJcblx0XHRcdFx0dmFyIHJlc3VsdCA9IGFic1VybCxcclxuXHRcdFx0XHRcdHUgPSBwYXRoLnBhcnNlVXJsKCBhYnNVcmwgKTtcclxuXHJcblx0XHRcdFx0aWYgKCBwYXRoLmlzRW1iZWRkZWRQYWdlKCB1ICkgKSB7XHJcblx0XHRcdFx0XHQvLyBGb3IgZW1iZWRkZWQgcGFnZXMsIHJlbW92ZSB0aGUgZGlhbG9nIGhhc2gga2V5IGFzIGluIGdldEZpbGVQYXRoKCksXHJcblx0XHRcdFx0XHQvLyBhbmQgcmVtb3ZlIG90aGVyd2lzZSB0aGUgRGF0YSBVcmwgd29uJ3QgbWF0Y2ggdGhlIGlkIG9mIHRoZSBlbWJlZGRlZCBQYWdlLlxyXG5cdFx0XHRcdFx0cmVzdWx0ID0gdS5oYXNoXHJcblx0XHRcdFx0XHRcdC5zcGxpdCggZGlhbG9nSGFzaEtleSApWzBdXHJcblx0XHRcdFx0XHRcdC5yZXBsYWNlKCAvXiMvLCBcIlwiIClcclxuXHRcdFx0XHRcdFx0LnJlcGxhY2UoIC9cXD8uKiQvLCBcIlwiICk7XHJcblx0XHRcdFx0fSBlbHNlIGlmICggcGF0aC5pc1NhbWVEb21haW4oIHUsIHRoaXMuZG9jdW1lbnRCYXNlICkgKSB7XHJcblx0XHRcdFx0XHRyZXN1bHQgPSB1LmhyZWZOb0hhc2gucmVwbGFjZSggdGhpcy5kb2N1bWVudEJhc2UuZG9tYWluLCBcIlwiICkuc3BsaXQoIGRpYWxvZ0hhc2hLZXkgKVswXTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdHJldHVybiB3aW5kb3cuZGVjb2RlVVJJQ29tcG9uZW50KCByZXN1bHQgKTtcclxuXHRcdFx0fSxcclxuXHJcblx0XHRcdC8vZ2V0IHBhdGggZnJvbSBjdXJyZW50IGhhc2gsIG9yIGZyb20gYSBmaWxlIHBhdGhcclxuXHRcdFx0Z2V0OiBmdW5jdGlvbiggbmV3UGF0aCApIHtcclxuXHRcdFx0XHRpZiAoIG5ld1BhdGggPT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0XHRcdG5ld1BhdGggPSBwYXRoLnBhcnNlTG9jYXRpb24oKS5oYXNoO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRyZXR1cm4gcGF0aC5zdHJpcEhhc2goIG5ld1BhdGggKS5yZXBsYWNlKCAvW15cXC9dKlxcLlteXFwvKl0rJC8sIFwiXCIgKTtcclxuXHRcdFx0fSxcclxuXHJcblx0XHRcdC8vc2V0IGxvY2F0aW9uIGhhc2ggdG8gcGF0aFxyXG5cdFx0XHRzZXQ6IGZ1bmN0aW9uKCBwYXRoICkge1xyXG5cdFx0XHRcdGxvY2F0aW9uLmhhc2ggPSBwYXRoO1xyXG5cdFx0XHR9LFxyXG5cclxuXHRcdFx0Ly90ZXN0IGlmIGEgZ2l2ZW4gdXJsIChzdHJpbmcpIGlzIGEgcGF0aFxyXG5cdFx0XHQvL05PVEUgbWlnaHQgYmUgZXhjZXB0aW9uYWxseSBuYWl2ZVxyXG5cdFx0XHRpc1BhdGg6IGZ1bmN0aW9uKCB1cmwgKSB7XHJcblx0XHRcdFx0cmV0dXJuICggL1xcLy8gKS50ZXN0KCB1cmwgKTtcclxuXHRcdFx0fSxcclxuXHJcblx0XHRcdC8vcmV0dXJuIGEgdXJsIHBhdGggd2l0aCB0aGUgd2luZG93J3MgbG9jYXRpb24gcHJvdG9jb2wvaG9zdG5hbWUvcGF0aG5hbWUgcmVtb3ZlZFxyXG5cdFx0XHRjbGVhbjogZnVuY3Rpb24oIHVybCApIHtcclxuXHRcdFx0XHRyZXR1cm4gdXJsLnJlcGxhY2UoIHRoaXMuZG9jdW1lbnRCYXNlLmRvbWFpbiwgXCJcIiApO1xyXG5cdFx0XHR9LFxyXG5cclxuXHRcdFx0Ly9qdXN0IHJldHVybiB0aGUgdXJsIHdpdGhvdXQgYW4gaW5pdGlhbCAjXHJcblx0XHRcdHN0cmlwSGFzaDogZnVuY3Rpb24oIHVybCApIHtcclxuXHRcdFx0XHRyZXR1cm4gdXJsLnJlcGxhY2UoIC9eIy8sIFwiXCIgKTtcclxuXHRcdFx0fSxcclxuXHJcblx0XHRcdHN0cmlwUXVlcnlQYXJhbXM6IGZ1bmN0aW9uKCB1cmwgKSB7XHJcblx0XHRcdFx0cmV0dXJuIHVybC5yZXBsYWNlKCAvXFw/LiokLywgXCJcIiApO1xyXG5cdFx0XHR9LFxyXG5cclxuXHRcdFx0Ly9yZW1vdmUgdGhlIHByZWNlZGluZyBoYXNoLCBhbnkgcXVlcnkgcGFyYW1zLCBhbmQgZGlhbG9nIG5vdGF0aW9uc1xyXG5cdFx0XHRjbGVhbkhhc2g6IGZ1bmN0aW9uKCBoYXNoICkge1xyXG5cdFx0XHRcdHJldHVybiBwYXRoLnN0cmlwSGFzaCggaGFzaC5yZXBsYWNlKCAvXFw/LiokLywgXCJcIiApLnJlcGxhY2UoIGRpYWxvZ0hhc2hLZXksIFwiXCIgKSApO1xyXG5cdFx0XHR9LFxyXG5cclxuXHRcdFx0aXNIYXNoVmFsaWQ6IGZ1bmN0aW9uKCBoYXNoICkge1xyXG5cdFx0XHRcdHJldHVybiAoIC9eI1teI10rJC8gKS50ZXN0KCBoYXNoICk7XHJcblx0XHRcdH0sXHJcblxyXG5cdFx0XHQvL2NoZWNrIHdoZXRoZXIgYSB1cmwgaXMgcmVmZXJlbmNpbmcgdGhlIHNhbWUgZG9tYWluLCBvciBhbiBleHRlcm5hbCBkb21haW4gb3IgZGlmZmVyZW50IHByb3RvY29sXHJcblx0XHRcdC8vY291bGQgYmUgbWFpbHRvLCBldGNcclxuXHRcdFx0aXNFeHRlcm5hbDogZnVuY3Rpb24oIHVybCApIHtcclxuXHRcdFx0XHR2YXIgdSA9IHBhdGgucGFyc2VVcmwoIHVybCApO1xyXG5cclxuXHRcdFx0XHRyZXR1cm4gISEoIHUucHJvdG9jb2wgJiZcclxuXHRcdFx0XHRcdCggdS5kb21haW4udG9Mb3dlckNhc2UoKSAhPT0gdGhpcy5kb2N1bWVudFVybC5kb21haW4udG9Mb3dlckNhc2UoKSApICk7XHJcblx0XHRcdH0sXHJcblxyXG5cdFx0XHRoYXNQcm90b2NvbDogZnVuY3Rpb24oIHVybCApIHtcclxuXHRcdFx0XHRyZXR1cm4gKCAvXig6P1xcdys6KS8gKS50ZXN0KCB1cmwgKTtcclxuXHRcdFx0fSxcclxuXHJcblx0XHRcdGlzRW1iZWRkZWRQYWdlOiBmdW5jdGlvbiggdXJsICkge1xyXG5cdFx0XHRcdHZhciB1ID0gcGF0aC5wYXJzZVVybCggdXJsICk7XHJcblxyXG5cdFx0XHRcdC8vaWYgdGhlIHBhdGggaXMgYWJzb2x1dGUsIHRoZW4gd2UgbmVlZCB0byBjb21wYXJlIHRoZSB1cmwgYWdhaW5zdFxyXG5cdFx0XHRcdC8vYm90aCB0aGUgdGhpcy5kb2N1bWVudFVybCBhbmQgdGhlIGRvY3VtZW50QmFzZS4gVGhlIG1haW4gcmVhc29uIGZvciB0aGlzXHJcblx0XHRcdFx0Ly9pcyB0aGF0IGxpbmtzIGVtYmVkZGVkIHdpdGhpbiBleHRlcm5hbCBkb2N1bWVudHMgd2lsbCByZWZlciB0byB0aGVcclxuXHRcdFx0XHQvL2FwcGxpY2F0aW9uIGRvY3VtZW50LCB3aGVyZWFzIGxpbmtzIGVtYmVkZGVkIHdpdGhpbiB0aGUgYXBwbGljYXRpb25cclxuXHRcdFx0XHQvL2RvY3VtZW50IHdpbGwgYmUgcmVzb2x2ZWQgYWdhaW5zdCB0aGUgZG9jdW1lbnQgYmFzZS5cclxuXHRcdFx0XHRpZiAoIHUucHJvdG9jb2wgIT09IFwiXCIgKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gKCAhdGhpcy5pc1BhdGgodS5oYXNoKSAmJiB1Lmhhc2ggJiYgKCB1LmhyZWZOb0hhc2ggPT09IHRoaXMuZG9jdW1lbnRVcmwuaHJlZk5vSGFzaCB8fCAoIHRoaXMuZG9jdW1lbnRCYXNlRGlmZmVycyAmJiB1LmhyZWZOb0hhc2ggPT09IHRoaXMuZG9jdW1lbnRCYXNlLmhyZWZOb0hhc2ggKSApICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHJldHVybiAoIC9eIy8gKS50ZXN0KCB1LmhyZWYgKTtcclxuXHRcdFx0fSxcclxuXHJcblx0XHRcdHNxdWFzaDogZnVuY3Rpb24oIHVybCwgcmVzb2x1dGlvblVybCApIHtcclxuXHRcdFx0XHR2YXIgaHJlZiwgY2xlYW5lZFVybCwgc2VhcmNoLCBzdGF0ZUluZGV4LCBkb2NVcmwsXHJcblx0XHRcdFx0XHRpc1BhdGggPSB0aGlzLmlzUGF0aCggdXJsICksXHJcblx0XHRcdFx0XHR1cmkgPSB0aGlzLnBhcnNlVXJsKCB1cmwgKSxcclxuXHRcdFx0XHRcdHByZXNlcnZlZEhhc2ggPSB1cmkuaGFzaCxcclxuXHRcdFx0XHRcdHVpU3RhdGUgPSBcIlwiO1xyXG5cclxuXHRcdFx0XHQvLyBwcm9kdWNlIGEgdXJsIGFnYWluc3Qgd2hpY2ggd2UgY2FuIHJlc29sdmUgdGhlIHByb3ZpZGVkIHBhdGhcclxuXHRcdFx0XHRpZiAoICFyZXNvbHV0aW9uVXJsICkge1xyXG5cdFx0XHRcdFx0aWYgKCBpc1BhdGggKSB7XHJcblx0XHRcdFx0XHRcdHJlc29sdXRpb25VcmwgPSBwYXRoLmdldExvY2F0aW9uKCk7XHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRkb2NVcmwgPSBwYXRoLmdldERvY3VtZW50VXJsKCB0cnVlICk7XHJcblx0XHRcdFx0XHRcdGlmICggcGF0aC5pc1BhdGgoIGRvY1VybC5oYXNoICkgKSB7XHJcblx0XHRcdFx0XHRcdFx0cmVzb2x1dGlvblVybCA9IHBhdGguc3F1YXNoKCBkb2NVcmwuaHJlZiApO1xyXG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdHJlc29sdXRpb25VcmwgPSBkb2NVcmwuaHJlZjtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gSWYgdGhlIHVybCBpcyBhbnl0aGluZyBidXQgYSBzaW1wbGUgc3RyaW5nLCByZW1vdmUgYW55IHByZWNlZGluZyBoYXNoXHJcblx0XHRcdFx0Ly8gZWcgI2Zvby9iYXIgLT4gZm9vL2JhclxyXG5cdFx0XHRcdC8vICAgICNmb28gLT4gI2Zvb1xyXG5cdFx0XHRcdGNsZWFuZWRVcmwgPSBpc1BhdGggPyBwYXRoLnN0cmlwSGFzaCggdXJsICkgOiB1cmw7XHJcblxyXG5cdFx0XHRcdC8vIElmIHRoZSB1cmwgaXMgYSBmdWxsIHVybCB3aXRoIGEgaGFzaCBjaGVjayBpZiB0aGUgcGFyc2VkIGhhc2ggaXMgYSBwYXRoXHJcblx0XHRcdFx0Ly8gaWYgaXQgaXMsIHN0cmlwIHRoZSAjLCBhbmQgdXNlIGl0IG90aGVyd2lzZSBjb250aW51ZSB3aXRob3V0IGNoYW5nZVxyXG5cdFx0XHRcdGNsZWFuZWRVcmwgPSBwYXRoLmlzUGF0aCggdXJpLmhhc2ggKSA/IHBhdGguc3RyaXBIYXNoKCB1cmkuaGFzaCApIDogY2xlYW5lZFVybDtcclxuXHJcblx0XHRcdFx0Ly8gU3BsaXQgdGhlIFVJIFN0YXRlIGtleXMgb2ZmIHRoZSBocmVmXHJcblx0XHRcdFx0c3RhdGVJbmRleCA9IGNsZWFuZWRVcmwuaW5kZXhPZiggdGhpcy51aVN0YXRlS2V5ICk7XHJcblxyXG5cdFx0XHRcdC8vIHN0b3JlIHRoZSB1aSBzdGF0ZSBrZXlzIGZvciB1c2VcclxuXHRcdFx0XHRpZiAoIHN0YXRlSW5kZXggPiAtMSApIHtcclxuXHRcdFx0XHRcdHVpU3RhdGUgPSBjbGVhbmVkVXJsLnNsaWNlKCBzdGF0ZUluZGV4ICk7XHJcblx0XHRcdFx0XHRjbGVhbmVkVXJsID0gY2xlYW5lZFVybC5zbGljZSggMCwgc3RhdGVJbmRleCApO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gbWFrZSB0aGUgY2xlYW5lZFVybCBhYnNvbHV0ZSByZWxhdGl2ZSB0byB0aGUgcmVzb2x1dGlvbiB1cmxcclxuXHRcdFx0XHRocmVmID0gcGF0aC5tYWtlVXJsQWJzb2x1dGUoIGNsZWFuZWRVcmwsIHJlc29sdXRpb25VcmwgKTtcclxuXHJcblx0XHRcdFx0Ly8gZ3JhYiB0aGUgc2VhcmNoIGZyb20gdGhlIHJlc29sdmVkIHVybCBzaW5jZSBwYXJzaW5nIGZyb21cclxuXHRcdFx0XHQvLyB0aGUgcGFzc2VkIHVybCBtYXkgbm90IHlpZWxkIHRoZSBjb3JyZWN0IHJlc3VsdFxyXG5cdFx0XHRcdHNlYXJjaCA9IHRoaXMucGFyc2VVcmwoIGhyZWYgKS5zZWFyY2g7XHJcblxyXG5cdFx0XHRcdC8vIFRPRE8gYWxsIHRoaXMgY3JhcCBpcyB0ZXJyaWJsZSwgY2xlYW4gaXQgdXBcclxuXHRcdFx0XHRpZiAoIGlzUGF0aCApIHtcclxuXHRcdFx0XHRcdC8vIHJlamVjdCB0aGUgaGFzaCBpZiBpdCdzIGEgcGF0aCBvciBpdCdzIGp1c3QgYSBkaWFsb2cga2V5XHJcblx0XHRcdFx0XHRpZiAoIHBhdGguaXNQYXRoKCBwcmVzZXJ2ZWRIYXNoICkgfHwgcHJlc2VydmVkSGFzaC5yZXBsYWNlKFwiI1wiLCBcIlwiKS5pbmRleE9mKCB0aGlzLnVpU3RhdGVLZXkgKSA9PT0gMCkge1xyXG5cdFx0XHRcdFx0XHRwcmVzZXJ2ZWRIYXNoID0gXCJcIjtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHQvLyBBcHBlbmQgdGhlIFVJIFN0YXRlIGtleXMgd2hlcmUgaXQgZXhpc3RzIGFuZCBpdCdzIGJlZW4gcmVtb3ZlZFxyXG5cdFx0XHRcdFx0Ly8gZnJvbSB0aGUgdXJsXHJcblx0XHRcdFx0XHRpZiAoIHVpU3RhdGUgJiYgcHJlc2VydmVkSGFzaC5pbmRleE9mKCB0aGlzLnVpU3RhdGVLZXkgKSA9PT0gLTEpIHtcclxuXHRcdFx0XHRcdFx0cHJlc2VydmVkSGFzaCArPSB1aVN0YXRlO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdC8vIG1ha2Ugc3VyZSB0aGF0IHBvdW5kIGlzIG9uIHRoZSBmcm9udCBvZiB0aGUgaGFzaFxyXG5cdFx0XHRcdFx0aWYgKCBwcmVzZXJ2ZWRIYXNoLmluZGV4T2YoIFwiI1wiICkgPT09IC0xICYmIHByZXNlcnZlZEhhc2ggIT09IFwiXCIgKSB7XHJcblx0XHRcdFx0XHRcdHByZXNlcnZlZEhhc2ggPSBcIiNcIiArIHByZXNlcnZlZEhhc2g7XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0Ly8gcmVjb25zdHJ1Y3QgZWFjaCBvZiB0aGUgcGllY2VzIHdpdGggdGhlIG5ldyBzZWFyY2ggc3RyaW5nIGFuZCBoYXNoXHJcblx0XHRcdFx0XHRocmVmID0gcGF0aC5wYXJzZVVybCggaHJlZiApO1xyXG5cdFx0XHRcdFx0aHJlZiA9IGhyZWYucHJvdG9jb2wgKyBocmVmLmRvdWJsZVNsYXNoICsgaHJlZi5ob3N0ICsgaHJlZi5wYXRobmFtZSArIHNlYXJjaCArXHJcblx0XHRcdFx0XHRcdHByZXNlcnZlZEhhc2g7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdGhyZWYgKz0gaHJlZi5pbmRleE9mKCBcIiNcIiApID4gLTEgPyB1aVN0YXRlIDogXCIjXCIgKyB1aVN0YXRlO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0cmV0dXJuIGhyZWY7XHJcblx0XHRcdH0sXHJcblxyXG5cdFx0XHRpc1ByZXNlcnZhYmxlSGFzaDogZnVuY3Rpb24oIGhhc2ggKSB7XHJcblx0XHRcdFx0cmV0dXJuIGhhc2gucmVwbGFjZSggXCIjXCIsIFwiXCIgKS5pbmRleE9mKCB0aGlzLnVpU3RhdGVLZXkgKSA9PT0gMDtcclxuXHRcdFx0fSxcclxuXHJcblx0XHRcdC8vIEVzY2FwZSB3ZWlyZCBjaGFyYWN0ZXJzIGluIHRoZSBoYXNoIGlmIGl0IGlzIHRvIGJlIHVzZWQgYXMgYSBzZWxlY3RvclxyXG5cdFx0XHRoYXNoVG9TZWxlY3RvcjogZnVuY3Rpb24oIGhhc2ggKSB7XHJcblx0XHRcdFx0dmFyIGhhc0hhc2ggPSAoIGhhc2guc3Vic3RyaW5nKCAwLCAxICkgPT09IFwiI1wiICk7XHJcblx0XHRcdFx0aWYgKCBoYXNIYXNoICkge1xyXG5cdFx0XHRcdFx0aGFzaCA9IGhhc2guc3Vic3RyaW5nKCAxICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHJldHVybiAoIGhhc0hhc2ggPyBcIiNcIiA6IFwiXCIgKSArIGhhc2gucmVwbGFjZSggLyhbIVwiIyQlJicoKSorLC4vOjs8PT4/QFtcXF1eYHt8fX5dKS9nLCBcIlxcXFwkMVwiICk7XHJcblx0XHRcdH0sXHJcblxyXG5cdFx0XHQvLyByZXR1cm4gdGhlIHN1YnN0cmluZyBvZiBhIGZpbGVwYXRoIGJlZm9yZSB0aGUgZGlhbG9nSGFzaEtleSwgZm9yIG1ha2luZyBhIHNlcnZlclxyXG5cdFx0XHQvLyByZXF1ZXN0XHJcblx0XHRcdGdldEZpbGVQYXRoOiBmdW5jdGlvbiggcGF0aCApIHtcclxuXHRcdFx0XHRyZXR1cm4gcGF0aCAmJiBwYXRoLnNwbGl0KCBkaWFsb2dIYXNoS2V5IClbMF07XHJcblx0XHRcdH0sXHJcblxyXG5cdFx0XHQvLyBjaGVjayBpZiB0aGUgc3BlY2lmaWVkIHVybCByZWZlcnMgdG8gdGhlIGZpcnN0IHBhZ2UgaW4gdGhlIG1haW5cclxuXHRcdFx0Ly8gYXBwbGljYXRpb24gZG9jdW1lbnQuXHJcblx0XHRcdGlzRmlyc3RQYWdlVXJsOiBmdW5jdGlvbiggdXJsICkge1xyXG5cdFx0XHRcdC8vIFdlIG9ubHkgZGVhbCB3aXRoIGFic29sdXRlIHBhdGhzLlxyXG5cdFx0XHRcdHZhciB1ID0gcGF0aC5wYXJzZVVybCggcGF0aC5tYWtlVXJsQWJzb2x1dGUoIHVybCwgdGhpcy5kb2N1bWVudEJhc2UgKSApLFxyXG5cclxuXHRcdFx0XHRcdC8vIERvZXMgdGhlIHVybCBoYXZlIHRoZSBzYW1lIHBhdGggYXMgdGhlIGRvY3VtZW50P1xyXG5cdFx0XHRcdFx0c2FtZVBhdGggPSB1LmhyZWZOb0hhc2ggPT09IHRoaXMuZG9jdW1lbnRVcmwuaHJlZk5vSGFzaCB8fFxyXG5cdFx0XHRcdFx0XHQoIHRoaXMuZG9jdW1lbnRCYXNlRGlmZmVycyAmJlxyXG5cdFx0XHRcdFx0XHRcdHUuaHJlZk5vSGFzaCA9PT0gdGhpcy5kb2N1bWVudEJhc2UuaHJlZk5vSGFzaCApLFxyXG5cclxuXHRcdFx0XHRcdC8vIEdldCB0aGUgZmlyc3QgcGFnZSBlbGVtZW50LlxyXG5cdFx0XHRcdFx0ZnAgPSAkLm1vYmlsZS5maXJzdFBhZ2UsXHJcblxyXG5cdFx0XHRcdFx0Ly8gR2V0IHRoZSBpZCBvZiB0aGUgZmlyc3QgcGFnZSBlbGVtZW50IGlmIGl0IGhhcyBvbmUuXHJcblx0XHRcdFx0XHRmcElkID0gZnAgJiYgZnBbMF0gPyBmcFswXS5pZCA6IHVuZGVmaW5lZDtcclxuXHJcblx0XHRcdFx0Ly8gVGhlIHVybCByZWZlcnMgdG8gdGhlIGZpcnN0IHBhZ2UgaWYgdGhlIHBhdGggbWF0Y2hlcyB0aGUgZG9jdW1lbnQgYW5kXHJcblx0XHRcdFx0Ly8gaXQgZWl0aGVyIGhhcyBubyBoYXNoIHZhbHVlLCBvciB0aGUgaGFzaCBpcyBleGFjdGx5IGVxdWFsIHRvIHRoZSBpZFxyXG5cdFx0XHRcdC8vIG9mIHRoZSBmaXJzdCBwYWdlIGVsZW1lbnQuXHJcblx0XHRcdFx0cmV0dXJuIHNhbWVQYXRoICYmXHJcblx0XHRcdFx0XHQoICF1Lmhhc2ggfHxcclxuXHRcdFx0XHRcdFx0dS5oYXNoID09PSBcIiNcIiB8fFxyXG5cdFx0XHRcdFx0XHQoIGZwSWQgJiYgdS5oYXNoLnJlcGxhY2UoIC9eIy8sIFwiXCIgKSA9PT0gZnBJZCApICk7XHJcblx0XHRcdH0sXHJcblxyXG5cdFx0XHQvLyBTb21lIGVtYmVkZGVkIGJyb3dzZXJzLCBsaWtlIHRoZSB3ZWIgdmlldyBpbiBQaG9uZSBHYXAsIGFsbG93XHJcblx0XHRcdC8vIGNyb3NzLWRvbWFpbiBYSFIgcmVxdWVzdHMgaWYgdGhlIGRvY3VtZW50IGRvaW5nIHRoZSByZXF1ZXN0IHdhcyBsb2FkZWRcclxuXHRcdFx0Ly8gdmlhIHRoZSBmaWxlOi8vIHByb3RvY29sLiBUaGlzIGlzIHVzdWFsbHkgdG8gYWxsb3cgdGhlIGFwcGxpY2F0aW9uIHRvXHJcblx0XHRcdC8vIFwicGhvbmUgaG9tZVwiIGFuZCBmZXRjaCBhcHAgc3BlY2lmaWMgZGF0YS4gV2Ugbm9ybWFsbHkgbGV0IHRoZSBicm93c2VyXHJcblx0XHRcdC8vIGhhbmRsZSBleHRlcm5hbC9jcm9zcy1kb21haW4gdXJscywgYnV0IGlmIHRoZSBhbGxvd0Nyb3NzRG9tYWluUGFnZXNcclxuXHRcdFx0Ly8gb3B0aW9uIGlzIHRydWUsIHdlIHdpbGwgYWxsb3cgY3Jvc3MtZG9tYWluIGh0dHAvaHR0cHMgcmVxdWVzdHMgdG8gZ29cclxuXHRcdFx0Ly8gdGhyb3VnaCBvdXIgcGFnZSBsb2FkaW5nIGxvZ2ljLlxyXG5cdFx0XHRpc1Blcm1pdHRlZENyb3NzRG9tYWluUmVxdWVzdDogZnVuY3Rpb24oIGRvY1VybCwgcmVxVXJsICkge1xyXG5cdFx0XHRcdHJldHVybiAkLm1vYmlsZS5hbGxvd0Nyb3NzRG9tYWluUGFnZXMgJiZcclxuXHRcdFx0XHRcdChkb2NVcmwucHJvdG9jb2wgPT09IFwiZmlsZTpcIiB8fCBkb2NVcmwucHJvdG9jb2wgPT09IFwiY29udGVudDpcIikgJiZcclxuXHRcdFx0XHRcdHJlcVVybC5zZWFyY2goIC9eaHR0cHM/Oi8gKSAhPT0gLTE7XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblxyXG5cdFx0cGF0aC5kb2N1bWVudFVybCA9IHBhdGgucGFyc2VMb2NhdGlvbigpO1xyXG5cclxuXHRcdCRiYXNlID0gJCggXCJoZWFkXCIgKS5maW5kKCBcImJhc2VcIiApO1xyXG5cclxuXHRcdHBhdGguZG9jdW1lbnRCYXNlID0gJGJhc2UubGVuZ3RoID9cclxuXHRcdFx0cGF0aC5wYXJzZVVybCggcGF0aC5tYWtlVXJsQWJzb2x1dGUoICRiYXNlLmF0dHIoIFwiaHJlZlwiICksIHBhdGguZG9jdW1lbnRVcmwuaHJlZiApICkgOlxyXG5cdFx0XHRwYXRoLmRvY3VtZW50VXJsO1xyXG5cclxuXHRcdHBhdGguZG9jdW1lbnRCYXNlRGlmZmVycyA9IChwYXRoLmRvY3VtZW50VXJsLmhyZWZOb0hhc2ggIT09IHBhdGguZG9jdW1lbnRCYXNlLmhyZWZOb0hhc2gpO1xyXG5cclxuXHRcdC8vcmV0dXJuIHRoZSBvcmlnaW5hbCBkb2N1bWVudCBiYXNlIHVybFxyXG5cdFx0cGF0aC5nZXREb2N1bWVudEJhc2UgPSBmdW5jdGlvbiggYXNQYXJzZWRPYmplY3QgKSB7XHJcblx0XHRcdHJldHVybiBhc1BhcnNlZE9iamVjdCA/ICQuZXh0ZW5kKCB7fSwgcGF0aC5kb2N1bWVudEJhc2UgKSA6IHBhdGguZG9jdW1lbnRCYXNlLmhyZWY7XHJcblx0XHR9O1xyXG5cclxuXHRcdC8vIERFUFJFQ0FURUQgYXMgb2YgMS40LjAgLSByZW1vdmUgaW4gMS41LjBcclxuXHRcdCQuZXh0ZW5kKCAkLm1vYmlsZSwge1xyXG5cclxuXHRcdFx0Ly9yZXR1cm4gdGhlIG9yaWdpbmFsIGRvY3VtZW50IHVybFxyXG5cdFx0XHRnZXREb2N1bWVudFVybDogcGF0aC5nZXREb2N1bWVudFVybCxcclxuXHJcblx0XHRcdC8vcmV0dXJuIHRoZSBvcmlnaW5hbCBkb2N1bWVudCBiYXNlIHVybFxyXG5cdFx0XHRnZXREb2N1bWVudEJhc2U6IHBhdGguZ2V0RG9jdW1lbnRCYXNlXHJcblx0XHR9KTtcclxufSkoIGpRdWVyeSApO1xyXG5cclxuXHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHQkLm1vYmlsZS5IaXN0b3J5ID0gZnVuY3Rpb24oIHN0YWNrLCBpbmRleCApIHtcclxuXHRcdHRoaXMuc3RhY2sgPSBzdGFjayB8fCBbXTtcclxuXHRcdHRoaXMuYWN0aXZlSW5kZXggPSBpbmRleCB8fCAwO1xyXG5cdH07XHJcblxyXG5cdCQuZXh0ZW5kKCQubW9iaWxlLkhpc3RvcnkucHJvdG90eXBlLCB7XHJcblx0XHRnZXRBY3RpdmU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRyZXR1cm4gdGhpcy5zdGFja1sgdGhpcy5hY3RpdmVJbmRleCBdO1xyXG5cdFx0fSxcclxuXHJcblx0XHRnZXRMYXN0OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0cmV0dXJuIHRoaXMuc3RhY2tbIHRoaXMucHJldmlvdXNJbmRleCBdO1xyXG5cdFx0fSxcclxuXHJcblx0XHRnZXROZXh0OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0cmV0dXJuIHRoaXMuc3RhY2tbIHRoaXMuYWN0aXZlSW5kZXggKyAxIF07XHJcblx0XHR9LFxyXG5cclxuXHRcdGdldFByZXY6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRyZXR1cm4gdGhpcy5zdGFja1sgdGhpcy5hY3RpdmVJbmRleCAtIDEgXTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gYWRkTmV3IGlzIHVzZWQgd2hlbmV2ZXIgYSBuZXcgcGFnZSBpcyBhZGRlZFxyXG5cdFx0YWRkOiBmdW5jdGlvbiggdXJsLCBkYXRhICkge1xyXG5cdFx0XHRkYXRhID0gZGF0YSB8fCB7fTtcclxuXHJcblx0XHRcdC8vaWYgdGhlcmUncyBmb3J3YXJkIGhpc3RvcnksIHdpcGUgaXRcclxuXHRcdFx0aWYgKCB0aGlzLmdldE5leHQoKSApIHtcclxuXHRcdFx0XHR0aGlzLmNsZWFyRm9yd2FyZCgpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBpZiB0aGUgaGFzaCBpcyBpbmNsdWRlZCBpbiB0aGUgZGF0YSBtYWtlIHN1cmUgdGhlIHNoYXBlXHJcblx0XHRcdC8vIGlzIGNvbnNpc3RlbnQgZm9yIGNvbXBhcmlzb25cclxuXHRcdFx0aWYgKCBkYXRhLmhhc2ggJiYgZGF0YS5oYXNoLmluZGV4T2YoIFwiI1wiICkgPT09IC0xKSB7XHJcblx0XHRcdFx0ZGF0YS5oYXNoID0gXCIjXCIgKyBkYXRhLmhhc2g7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGRhdGEudXJsID0gdXJsO1xyXG5cdFx0XHR0aGlzLnN0YWNrLnB1c2goIGRhdGEgKTtcclxuXHRcdFx0dGhpcy5hY3RpdmVJbmRleCA9IHRoaXMuc3RhY2subGVuZ3RoIC0gMTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly93aXBlIHVybHMgYWhlYWQgb2YgYWN0aXZlIGluZGV4XHJcblx0XHRjbGVhckZvcndhcmQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR0aGlzLnN0YWNrID0gdGhpcy5zdGFjay5zbGljZSggMCwgdGhpcy5hY3RpdmVJbmRleCArIDEgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0ZmluZDogZnVuY3Rpb24oIHVybCwgc3RhY2ssIGVhcmx5UmV0dXJuICkge1xyXG5cdFx0XHRzdGFjayA9IHN0YWNrIHx8IHRoaXMuc3RhY2s7XHJcblxyXG5cdFx0XHR2YXIgZW50cnksIGksIGxlbmd0aCA9IHN0YWNrLmxlbmd0aCwgaW5kZXg7XHJcblxyXG5cdFx0XHRmb3IgKCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrICkge1xyXG5cdFx0XHRcdGVudHJ5ID0gc3RhY2tbaV07XHJcblxyXG5cdFx0XHRcdGlmICggZGVjb2RlVVJJQ29tcG9uZW50KHVybCkgPT09IGRlY29kZVVSSUNvbXBvbmVudChlbnRyeS51cmwpIHx8XHJcblx0XHRcdFx0XHRkZWNvZGVVUklDb21wb25lbnQodXJsKSA9PT0gZGVjb2RlVVJJQ29tcG9uZW50KGVudHJ5Lmhhc2gpICkge1xyXG5cdFx0XHRcdFx0aW5kZXggPSBpO1xyXG5cclxuXHRcdFx0XHRcdGlmICggZWFybHlSZXR1cm4gKSB7XHJcblx0XHRcdFx0XHRcdHJldHVybiBpbmRleDtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHJldHVybiBpbmRleDtcclxuXHRcdH0sXHJcblxyXG5cdFx0Y2xvc2VzdDogZnVuY3Rpb24oIHVybCApIHtcclxuXHRcdFx0dmFyIGNsb3Nlc3QsIGEgPSB0aGlzLmFjdGl2ZUluZGV4O1xyXG5cclxuXHRcdFx0Ly8gRmlyc3QsIHRha2UgdGhlIHNsaWNlIG9mIHRoZSBoaXN0b3J5IHN0YWNrIGJlZm9yZSB0aGUgY3VycmVudCBpbmRleCBhbmQgc2VhcmNoXHJcblx0XHRcdC8vIGZvciBhIHVybCBtYXRjaC4gSWYgb25lIGlzIGZvdW5kLCB3ZSdsbCBhdm9pZCBhdm9pZCBsb29raW5nIHRocm91Z2ggZm9yd2FyZCBoaXN0b3J5XHJcblx0XHRcdC8vIE5PVEUgdGhlIHByZWZlcmVuY2UgZm9yIGJhY2t3YXJkIGhpc3RvcnkgbW92ZW1lbnQgaXMgZHJpdmVuIGJ5IHRoZSBmYWN0IHRoYXRcclxuXHRcdFx0Ly8gICAgICBtb3N0IG1vYmlsZSBicm93c2VycyBvbmx5IGhhdmUgYSBkZWRpY2F0ZWQgYmFjayBidXR0b24sIGFuZCB1c2VycyByYXJlbHkgdXNlXHJcblx0XHRcdC8vICAgICAgdGhlIGZvcndhcmQgYnV0dG9uIGluIGRlc2t0b3AgYnJvd3NlciBhbnlob3dcclxuXHRcdFx0Y2xvc2VzdCA9IHRoaXMuZmluZCggdXJsLCB0aGlzLnN0YWNrLnNsaWNlKDAsIGEpICk7XHJcblxyXG5cdFx0XHQvLyBJZiBub3RoaW5nIHdhcyBmb3VuZCBpbiBiYWNrd2FyZCBoaXN0b3J5IGNoZWNrIGZvcndhcmQuIFRoZSBgdHJ1ZWBcclxuXHRcdFx0Ly8gdmFsdWUgcGFzc2VkIGFzIHRoZSB0aGlyZCBwYXJhbWV0ZXIgY2F1c2VzIHRoZSBmaW5kIG1ldGhvZCB0byBicmVha1xyXG5cdFx0XHQvLyBvbiB0aGUgZmlyc3QgbWF0Y2ggaW4gdGhlIGZvcndhcmQgaGlzdG9yeSBzbGljZS4gVGhlIHN0YXJ0aW5nIGluZGV4XHJcblx0XHRcdC8vIG9mIHRoZSBzbGljZSBtdXN0IHRoZW4gYmUgYWRkZWQgdG8gdGhlIHJlc3VsdCB0byBnZXQgdGhlIGVsZW1lbnQgaW5kZXhcclxuXHRcdFx0Ly8gaW4gdGhlIG9yaWdpbmFsIGhpc3Rvcnkgc3RhY2sgOiggOihcclxuXHRcdFx0Ly9cclxuXHRcdFx0Ly8gVE9ETyB0aGlzIGlzIGh5cGVyIGNvbmZ1c2luZyBhbmQgc2hvdWxkIGJlIGNsZWFuZWQgdXAgKHVnaCBzbyBiYWQpXHJcblx0XHRcdGlmICggY2xvc2VzdCA9PT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRcdGNsb3Nlc3QgPSB0aGlzLmZpbmQoIHVybCwgdGhpcy5zdGFjay5zbGljZShhKSwgdHJ1ZSApO1xyXG5cdFx0XHRcdGNsb3Nlc3QgPSBjbG9zZXN0ID09PSB1bmRlZmluZWQgPyBjbG9zZXN0IDogY2xvc2VzdCArIGE7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHJldHVybiBjbG9zZXN0O1xyXG5cdFx0fSxcclxuXHJcblx0XHRkaXJlY3Q6IGZ1bmN0aW9uKCBvcHRzICkge1xyXG5cdFx0XHR2YXIgbmV3QWN0aXZlSW5kZXggPSB0aGlzLmNsb3Nlc3QoIG9wdHMudXJsICksIGEgPSB0aGlzLmFjdGl2ZUluZGV4O1xyXG5cclxuXHRcdFx0Ly8gc2F2ZSBuZXcgcGFnZSBpbmRleCwgbnVsbCBjaGVjayB0byBwcmV2ZW50IGZhbHNleSAwIHJlc3VsdFxyXG5cdFx0XHQvLyByZWNvcmQgdGhlIHByZXZpb3VzIGluZGV4IGZvciByZWZlcmVuY2VcclxuXHRcdFx0aWYgKCBuZXdBY3RpdmVJbmRleCAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRcdHRoaXMuYWN0aXZlSW5kZXggPSBuZXdBY3RpdmVJbmRleDtcclxuXHRcdFx0XHR0aGlzLnByZXZpb3VzSW5kZXggPSBhO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBpbnZva2UgY2FsbGJhY2tzIHdoZXJlIGFwcHJvcHJpYXRlXHJcblx0XHRcdC8vXHJcblx0XHRcdC8vIFRPRE8gdGhpcyBpcyBhbHNvIGNvbnZvbHV0ZWQgYW5kIGNvbmZ1c2luZ1xyXG5cdFx0XHRpZiAoIG5ld0FjdGl2ZUluZGV4IDwgYSApIHtcclxuXHRcdFx0XHQoIG9wdHMucHJlc2VudCB8fCBvcHRzLmJhY2sgfHwgJC5ub29wICkoIHRoaXMuZ2V0QWN0aXZlKCksIFwiYmFja1wiICk7XHJcblx0XHRcdH0gZWxzZSBpZiAoIG5ld0FjdGl2ZUluZGV4ID4gYSApIHtcclxuXHRcdFx0XHQoIG9wdHMucHJlc2VudCB8fCBvcHRzLmZvcndhcmQgfHwgJC5ub29wICkoIHRoaXMuZ2V0QWN0aXZlKCksIFwiZm9yd2FyZFwiICk7XHJcblx0XHRcdH0gZWxzZSBpZiAoIG5ld0FjdGl2ZUluZGV4ID09PSB1bmRlZmluZWQgJiYgb3B0cy5taXNzaW5nICkge1xyXG5cdFx0XHRcdG9wdHMubWlzc2luZyggdGhpcy5nZXRBY3RpdmUoKSApO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fSk7XHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcblxyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblx0dmFyIHBhdGggPSAkLm1vYmlsZS5wYXRoLFxyXG5cdFx0aW5pdGlhbEhyZWYgPSBsb2NhdGlvbi5ocmVmO1xyXG5cclxuXHQkLm1vYmlsZS5OYXZpZ2F0b3IgPSBmdW5jdGlvbiggaGlzdG9yeSApIHtcclxuXHRcdHRoaXMuaGlzdG9yeSA9IGhpc3Rvcnk7XHJcblx0XHR0aGlzLmlnbm9yZUluaXRpYWxIYXNoQ2hhbmdlID0gdHJ1ZTtcclxuXHJcblx0XHQkLm1vYmlsZS53aW5kb3cuYmluZCh7XHJcblx0XHRcdFwicG9wc3RhdGUuaGlzdG9yeVwiOiAkLnByb3h5KCB0aGlzLnBvcHN0YXRlLCB0aGlzICksXHJcblx0XHRcdFwiaGFzaGNoYW5nZS5oaXN0b3J5XCI6ICQucHJveHkoIHRoaXMuaGFzaGNoYW5nZSwgdGhpcyApXHJcblx0XHR9KTtcclxuXHR9O1xyXG5cclxuXHQkLmV4dGVuZCgkLm1vYmlsZS5OYXZpZ2F0b3IucHJvdG90eXBlLCB7XHJcblx0XHRzcXVhc2g6IGZ1bmN0aW9uKCB1cmwsIGRhdGEgKSB7XHJcblx0XHRcdHZhciBzdGF0ZSwgaHJlZiwgaGFzaCA9IHBhdGguaXNQYXRoKHVybCkgPyBwYXRoLnN0cmlwSGFzaCh1cmwpIDogdXJsO1xyXG5cclxuXHRcdFx0aHJlZiA9IHBhdGguc3F1YXNoKCB1cmwgKTtcclxuXHJcblx0XHRcdC8vIG1ha2Ugc3VyZSB0byBwcm92aWRlIHRoaXMgaW5mb3JtYXRpb24gd2hlbiBpdCBpc24ndCBleHBsaWNpdGx5IHNldCBpbiB0aGVcclxuXHRcdFx0Ly8gZGF0YSBvYmplY3QgdGhhdCB3YXMgcGFzc2VkIHRvIHRoZSBzcXVhc2ggbWV0aG9kXHJcblx0XHRcdHN0YXRlID0gJC5leHRlbmQoe1xyXG5cdFx0XHRcdGhhc2g6IGhhc2gsXHJcblx0XHRcdFx0dXJsOiBocmVmXHJcblx0XHRcdH0sIGRhdGEpO1xyXG5cclxuXHRcdFx0Ly8gcmVwbGFjZSB0aGUgY3VycmVudCB1cmwgd2l0aCB0aGUgbmV3IGhyZWYgYW5kIHN0b3JlIHRoZSBzdGF0ZVxyXG5cdFx0XHQvLyBOb3RlIHRoYXQgaW4gc29tZSBjYXNlcyB3ZSBtaWdodCBiZSByZXBsYWNpbmcgYW4gdXJsIHdpdGggdGhlXHJcblx0XHRcdC8vIHNhbWUgdXJsLiBXZSBkbyB0aGlzIGFueXdheXMgYmVjYXVzZSB3ZSBuZWVkIHRvIG1ha2Ugc3VyZSB0aGF0XHJcblx0XHRcdC8vIGFsbCBvZiBvdXIgaGlzdG9yeSBlbnRyaWVzIGhhdmUgYSBzdGF0ZSBvYmplY3QgYXNzb2NpYXRlZCB3aXRoXHJcblx0XHRcdC8vIHRoZW0uIFRoaXMgYWxsb3dzIHVzIHRvIHdvcmsgYXJvdW5kIHRoZSBjYXNlIHdoZXJlICQubW9iaWxlLmJhY2soKVxyXG5cdFx0XHQvLyBpcyBjYWxsZWQgdG8gdHJhbnNpdGlvbiBmcm9tIGFuIGV4dGVybmFsIHBhZ2UgdG8gYW4gZW1iZWRkZWQgcGFnZS5cclxuXHRcdFx0Ly8gSW4gdGhhdCBwYXJ0aWN1bGFyIGNhc2UsIGEgaGFzaGNoYW5nZSBldmVudCBpcyAqTk9UKiBnZW5lcmF0ZWQgYnkgdGhlIGJyb3dzZXIuXHJcblx0XHRcdC8vIEVuc3VyaW5nIGVhY2ggaGlzdG9yeSBlbnRyeSBoYXMgYSBzdGF0ZSBvYmplY3QgbWVhbnMgdGhhdCBvblBvcFN0YXRlKClcclxuXHRcdFx0Ly8gd2lsbCBhbHdheXMgdHJpZ2dlciBvdXIgaGFzaGNoYW5nZSBjYWxsYmFjayBldmVuIHdoZW4gYSBoYXNoY2hhbmdlIGV2ZW50XHJcblx0XHRcdC8vIGlzIG5vdCBmaXJlZC5cclxuXHRcdFx0d2luZG93Lmhpc3RvcnkucmVwbGFjZVN0YXRlKCBzdGF0ZSwgc3RhdGUudGl0bGUgfHwgZG9jdW1lbnQudGl0bGUsIGhyZWYgKTtcclxuXHJcblx0XHRcdHJldHVybiBzdGF0ZTtcclxuXHRcdH0sXHJcblxyXG5cdFx0aGFzaDogZnVuY3Rpb24oIHVybCwgaHJlZiApIHtcclxuXHRcdFx0dmFyIHBhcnNlZCwgbG9jLCBoYXNoLCByZXNvbHZlZDtcclxuXHJcblx0XHRcdC8vIEdyYWIgdGhlIGhhc2ggZm9yIHJlY29yZGluZy4gSWYgdGhlIHBhc3NlZCB1cmwgaXMgYSBwYXRoXHJcblx0XHRcdC8vIHdlIHVzZWQgdGhlIHBhcnNlZCB2ZXJzaW9uIG9mIHRoZSBzcXVhc2hlZCB1cmwgdG8gcmVjb25zdHJ1Y3QsXHJcblx0XHRcdC8vIG90aGVyd2lzZSB3ZSBhc3N1bWUgaXQncyBhIGhhc2ggYW5kIHN0b3JlIGl0IGRpcmVjdGx5XHJcblx0XHRcdHBhcnNlZCA9IHBhdGgucGFyc2VVcmwoIHVybCApO1xyXG5cdFx0XHRsb2MgPSBwYXRoLnBhcnNlTG9jYXRpb24oKTtcclxuXHJcblx0XHRcdGlmICggbG9jLnBhdGhuYW1lICsgbG9jLnNlYXJjaCA9PT0gcGFyc2VkLnBhdGhuYW1lICsgcGFyc2VkLnNlYXJjaCApIHtcclxuXHRcdFx0XHQvLyBJZiB0aGUgcGF0aG5hbWUgYW5kIHNlYXJjaCBvZiB0aGUgcGFzc2VkIHVybCBpcyBpZGVudGljYWwgdG8gdGhlIGN1cnJlbnQgbG9jXHJcblx0XHRcdFx0Ly8gdGhlbiB3ZSBtdXN0IHVzZSB0aGUgaGFzaC4gT3RoZXJ3aXNlIHRoZXJlIHdpbGwgYmUgbm8gZXZlbnRcclxuXHRcdFx0XHQvLyBlZywgdXJsID0gXCIvZm9vL2Jhcj9iYXojYmFuZ1wiLCBsb2NhdGlvbi5ocmVmID0gXCJodHRwOi8vZXhhbXBsZS5jb20vZm9vL2Jhcj9iYXpcIlxyXG5cdFx0XHRcdGhhc2ggPSBwYXJzZWQuaGFzaCA/IHBhcnNlZC5oYXNoIDogcGFyc2VkLnBhdGhuYW1lICsgcGFyc2VkLnNlYXJjaDtcclxuXHRcdFx0fSBlbHNlIGlmICggcGF0aC5pc1BhdGgodXJsKSApIHtcclxuXHRcdFx0XHRyZXNvbHZlZCA9IHBhdGgucGFyc2VVcmwoIGhyZWYgKTtcclxuXHRcdFx0XHQvLyBJZiB0aGUgcGFzc2VkIHVybCBpcyBhIHBhdGgsIG1ha2UgaXQgZG9tYWluIHJlbGF0aXZlIGFuZCByZW1vdmUgYW55IHRyYWlsaW5nIGhhc2hcclxuXHRcdFx0XHRoYXNoID0gcmVzb2x2ZWQucGF0aG5hbWUgKyByZXNvbHZlZC5zZWFyY2ggKyAocGF0aC5pc1ByZXNlcnZhYmxlSGFzaCggcmVzb2x2ZWQuaGFzaCApPyByZXNvbHZlZC5oYXNoLnJlcGxhY2UoIFwiI1wiLCBcIlwiICkgOiBcIlwiKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRoYXNoID0gdXJsO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRyZXR1cm4gaGFzaDtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gVE9ETyByZWNvbnNpZGVyIG5hbWVcclxuXHRcdGdvOiBmdW5jdGlvbiggdXJsLCBkYXRhLCBub0V2ZW50cyApIHtcclxuXHRcdFx0dmFyIHN0YXRlLCBocmVmLCBoYXNoLCBwb3BzdGF0ZUV2ZW50LFxyXG5cdFx0XHRcdGlzUG9wU3RhdGVFdmVudCA9ICQuZXZlbnQuc3BlY2lhbC5uYXZpZ2F0ZS5pc1B1c2hTdGF0ZUVuYWJsZWQoKTtcclxuXHJcblx0XHRcdC8vIEdldCB0aGUgdXJsIGFzIGl0IHdvdWxkIGxvb2sgc3F1YXNoZWQgb24gdG8gdGhlIGN1cnJlbnQgcmVzb2x1dGlvbiB1cmxcclxuXHRcdFx0aHJlZiA9IHBhdGguc3F1YXNoKCB1cmwgKTtcclxuXHJcblx0XHRcdC8vIHNvcnQgb3V0IHdoYXQgdGhlIGhhc2ggc291bGQgYmUgZnJvbSB0aGUgdXJsXHJcblx0XHRcdGhhc2ggPSB0aGlzLmhhc2goIHVybCwgaHJlZiApO1xyXG5cclxuXHRcdFx0Ly8gSGVyZSB3ZSBwcmV2ZW50IHRoZSBuZXh0IGhhc2ggY2hhbmdlIG9yIHBvcHN0YXRlIGV2ZW50IGZyb20gZG9pbmcgYW55XHJcblx0XHRcdC8vIGhpc3RvcnkgbWFuYWdlbWVudC4gSW4gdGhlIGNhc2Ugb2YgaGFzaGNoYW5nZSB3ZSBkb24ndCBzd2FsbG93IGl0XHJcblx0XHRcdC8vIGlmIHRoZXJlIHdpbGwgYmUgbm8gaGFzaGNoYW5nZSBmaXJlZCAoc2luY2UgdGhhdCB3b24ndCByZXNldCB0aGUgdmFsdWUpXHJcblx0XHRcdC8vIGFuZCB3aWxsIHN3YWxsb3cgdGhlIGZvbGxvd2luZyBoYXNoY2hhbmdlXHJcblx0XHRcdGlmICggbm9FdmVudHMgJiYgaGFzaCAhPT0gcGF0aC5zdHJpcEhhc2gocGF0aC5wYXJzZUxvY2F0aW9uKCkuaGFzaCkgKSB7XHJcblx0XHRcdFx0dGhpcy5wcmV2ZW50TmV4dEhhc2hDaGFuZ2UgPSBub0V2ZW50cztcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gSU1QT1JUQU5UIGluIHRoZSBjYXNlIHdoZXJlIHBvcHN0YXRlIGlzIHN1cHBvcnRlZCB0aGUgZXZlbnQgd2lsbCBiZSB0cmlnZ2VyZWRcclxuXHRcdFx0Ly8gICAgICBkaXJlY3RseSwgc3RvcHBpbmcgZnVydGhlciBleGVjdXRpb24gLSBpZSwgaW50ZXJ1cHRpbmcgdGhlIGZsb3cgb2YgdGhpc1xyXG5cdFx0XHQvLyAgICAgIG1ldGhvZCBjYWxsIHRvIGZpcmUgYmluZGluZ3MgYXQgdGhpcyBleHByZXNzaW9uLiBCZWxvdyB0aGUgbmF2aWdhdGUgbWV0aG9kXHJcblx0XHRcdC8vICAgICAgdGhlcmUgaXMgYSBiaW5kaW5nIHRvIGNhdGNoIHRoaXMgZXZlbnQgYW5kIHN0b3AgaXRzIHByb3BhZ2F0aW9uLlxyXG5cdFx0XHQvL1xyXG5cdFx0XHQvLyAgICAgIFdlIHRoZW4gdHJpZ2dlciBhIG5ldyBwb3BzdGF0ZSBldmVudCBvbiB0aGUgd2luZG93IHdpdGggYSBudWxsIHN0YXRlXHJcblx0XHRcdC8vICAgICAgc28gdGhhdCB0aGUgbmF2aWdhdGUgZXZlbnRzIGNhbiBjb25jbHVkZSB0aGVpciB3b3JrIHByb3Blcmx5XHJcblx0XHRcdC8vXHJcblx0XHRcdC8vIGlmIHRoZSB1cmwgaXMgYSBwYXRoIHdlIHdhbnQgdG8gcHJlc2VydmUgdGhlIHF1ZXJ5IHBhcmFtcyB0aGF0IGFyZSBhdmFpbGFibGUgb25cclxuXHRcdFx0Ly8gdGhlIGN1cnJlbnQgdXJsLlxyXG5cdFx0XHR0aGlzLnByZXZlbnRIYXNoQXNzaWduUG9wU3RhdGUgPSB0cnVlO1xyXG5cdFx0XHR3aW5kb3cubG9jYXRpb24uaGFzaCA9IGhhc2g7XHJcblxyXG5cdFx0XHQvLyBJZiBwb3BzdGF0ZSBpcyBlbmFibGVkIGFuZCB0aGUgYnJvd3NlciB0cmlnZ2VycyBgcG9wc3RhdGVgIGV2ZW50cyB3aGVuIHRoZSBoYXNoXHJcblx0XHRcdC8vIGlzIHNldCAodGhpcyBvZnRlbiBoYXBwZW5zIGltbWVkaWF0ZWx5IGluIGJyb3dzZXJzIGxpa2UgQ2hyb21lKSwgdGhlbiB0aGVcclxuXHRcdFx0Ly8gdGhpcyBmbGFnIHdpbGwgYmUgc2V0IHRvIGZhbHNlIGFscmVhZHkuIElmIGl0J3MgYSBicm93c2VyIHRoYXQgZG9lcyBub3QgdHJpZ2dlclxyXG5cdFx0XHQvLyBhIGBwb3BzdGF0ZWAgb24gaGFzaCBhc3NpZ25lbWVudCBvciBgcmVwbGFjZVN0YXRlYCB0aGVuIHdlIG5lZWQgYXZvaWQgdGhlIGJyYW5jaFxyXG5cdFx0XHQvLyB0aGF0IHN3YWxsb3dzIHRoZSBldmVudCBjcmVhdGVkIGJ5IHRoZSBwb3BzdGF0ZSBnZW5lcmF0ZWQgYnkgdGhlIGhhc2ggYXNzaWdubWVudFxyXG5cdFx0XHQvLyBBdCB0aGUgdGltZSBvZiB0aGlzIHdyaXRpbmcgdGhpcyBoYXBwZW5zIHdpdGggT3BlcmEgMTIgYW5kIHNvbWUgdmVyc2lvbiBvZiBJRVxyXG5cdFx0XHR0aGlzLnByZXZlbnRIYXNoQXNzaWduUG9wU3RhdGUgPSBmYWxzZTtcclxuXHJcblx0XHRcdHN0YXRlID0gJC5leHRlbmQoe1xyXG5cdFx0XHRcdHVybDogaHJlZixcclxuXHRcdFx0XHRoYXNoOiBoYXNoLFxyXG5cdFx0XHRcdHRpdGxlOiBkb2N1bWVudC50aXRsZVxyXG5cdFx0XHR9LCBkYXRhKTtcclxuXHJcblx0XHRcdGlmICggaXNQb3BTdGF0ZUV2ZW50ICkge1xyXG5cdFx0XHRcdHBvcHN0YXRlRXZlbnQgPSBuZXcgJC5FdmVudCggXCJwb3BzdGF0ZVwiICk7XHJcblx0XHRcdFx0cG9wc3RhdGVFdmVudC5vcmlnaW5hbEV2ZW50ID0ge1xyXG5cdFx0XHRcdFx0dHlwZTogXCJwb3BzdGF0ZVwiLFxyXG5cdFx0XHRcdFx0c3RhdGU6IG51bGxcclxuXHRcdFx0XHR9O1xyXG5cclxuXHRcdFx0XHR0aGlzLnNxdWFzaCggdXJsLCBzdGF0ZSApO1xyXG5cclxuXHRcdFx0XHQvLyBUcmlnZ2VyIGEgbmV3IGZhdXggcG9wc3RhdGUgZXZlbnQgdG8gcmVwbGFjZSB0aGUgb25lIHRoYXQgd2VcclxuXHRcdFx0XHQvLyBjYXVnaHQgdGhhdCB3YXMgdHJpZ2dlcmVkIGJ5IHRoZSBoYXNoIHNldHRpbmcgYWJvdmUuXHJcblx0XHRcdFx0aWYgKCAhbm9FdmVudHMgKSB7XHJcblx0XHRcdFx0XHR0aGlzLmlnbm9yZVBvcFN0YXRlID0gdHJ1ZTtcclxuXHRcdFx0XHRcdCQubW9iaWxlLndpbmRvdy50cmlnZ2VyKCBwb3BzdGF0ZUV2ZW50ICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyByZWNvcmQgdGhlIGhpc3RvcnkgZW50cnkgc28gdGhhdCB0aGUgaW5mb3JtYXRpb24gY2FuIGJlIGluY2x1ZGVkXHJcblx0XHRcdC8vIGluIGhhc2hjaGFuZ2UgZXZlbnQgZHJpdmVuIG5hdmlnYXRlIGV2ZW50cyBpbiBhIHNpbWlsYXIgZmFzaGlvbiB0b1xyXG5cdFx0XHQvLyB0aGUgc3RhdGUgdGhhdCdzIHByb3ZpZGVkIGJ5IHBvcHN0YXRlXHJcblx0XHRcdHRoaXMuaGlzdG9yeS5hZGQoIHN0YXRlLnVybCwgc3RhdGUgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gVGhpcyBiaW5kaW5nIGlzIGludGVuZGVkIHRvIGNhdGNoIHRoZSBwb3BzdGF0ZSBldmVudHMgdGhhdCBhcmUgZmlyZWRcclxuXHRcdC8vIHdoZW4gZXhlY3V0aW9uIG9mIHRoZSBgJC5uYXZpZ2F0ZWAgbWV0aG9kIHN0b3BzIGF0IHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gdXJsO1xyXG5cdFx0Ly8gYW5kIGNvbXBsZXRlbHkgcHJldmVudCB0aGVtIGZyb20gcHJvcGFnYXRpbmcuIFRoZSBwb3BzdGF0ZSBldmVudCB3aWxsIHRoZW4gYmVcclxuXHRcdC8vIHJldHJpZ2dlcmVkIGFmdGVyIGV4ZWN1dGlvbiByZXN1bWVzXHJcblx0XHQvL1xyXG5cdFx0Ly8gVE9ETyBncmFiIHRoZSBvcmlnaW5hbCBldmVudCBoZXJlIGFuZCB1c2UgaXQgZm9yIHRoZSBzeW50aGV0aWMgZXZlbnQgaW4gdGhlXHJcblx0XHQvLyAgICAgIHNlY29uZCBoYWxmIG9mIHRoZSBuYXZpZ2F0ZSBleGVjdXRpb24gdGhhdCB3aWxsIGZvbGxvdyB0aGlzIGJpbmRpbmdcclxuXHRcdHBvcHN0YXRlOiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHRcdHZhciBoYXNoLCBzdGF0ZTtcclxuXHJcblx0XHRcdC8vIFBhcnRseSB0byBzdXBwb3J0IG91ciB0ZXN0IHN1aXRlIHdoaWNoIG1hbnVhbGx5IGFsdGVycyB0aGUgc3VwcG9ydFxyXG5cdFx0XHQvLyB2YWx1ZSB0byB0ZXN0IGhhc2hjaGFuZ2UuIFBhcnRseSB0byBwcmV2ZW50IGFsbCBhcm91bmQgd2VpcmRuZXNzXHJcblx0XHRcdGlmICggISQuZXZlbnQuc3BlY2lhbC5uYXZpZ2F0ZS5pc1B1c2hTdGF0ZUVuYWJsZWQoKSApIHtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIElmIHRoaXMgaXMgdGhlIHBvcHN0YXRlIHRyaWdnZXJlZCBieSB0aGUgYWN0dWFsIGFsdGVyYXRpb24gb2YgdGhlIGhhc2hcclxuXHRcdFx0Ly8gcHJldmVudCBpdCBjb21wbGV0ZWx5LiBIaXN0b3J5IGlzIHRyYWNrZWQgbWFudWFsbHlcclxuXHRcdFx0aWYgKCB0aGlzLnByZXZlbnRIYXNoQXNzaWduUG9wU3RhdGUgKSB7XHJcblx0XHRcdFx0dGhpcy5wcmV2ZW50SGFzaEFzc2lnblBvcFN0YXRlID0gZmFsc2U7XHJcblx0XHRcdFx0ZXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBpZiB0aGlzIGlzIHRoZSBwb3BzdGF0ZSB0cmlnZ2VyZWQgYWZ0ZXIgdGhlIGByZXBsYWNlU3RhdGVgIGNhbGwgaW4gdGhlIGdvXHJcblx0XHRcdC8vIG1ldGhvZCwgdGhlbiBzaW1wbHkgaWdub3JlIGl0LiBUaGUgaGlzdG9yeSBlbnRyeSBoYXMgYWxyZWFkeSBiZWVuIGNhcHR1cmVkXHJcblx0XHRcdGlmICggdGhpcy5pZ25vcmVQb3BTdGF0ZSApIHtcclxuXHRcdFx0XHR0aGlzLmlnbm9yZVBvcFN0YXRlID0gZmFsc2U7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBJZiB0aGVyZSBpcyBubyBzdGF0ZSwgYW5kIHRoZSBoaXN0b3J5IHN0YWNrIGxlbmd0aCBpcyBvbmUgd2VyZVxyXG5cdFx0XHQvLyBwcm9iYWJseSBnZXR0aW5nIHRoZSBwYWdlIGxvYWQgcG9wc3RhdGUgZmlyZWQgYnkgYnJvd3NlcnMgbGlrZSBjaHJvbWVcclxuXHRcdFx0Ly8gYXZvaWQgaXQgYW5kIHNldCB0aGUgb25lIHRpbWUgZmxhZyB0byBmYWxzZS5cclxuXHRcdFx0Ly8gVE9ETzogRG8gd2UgcmVhbGx5IG5lZWQgYWxsIHRoZXNlIGNvbmRpdGlvbnM/IENvbXBhcmluZyBsb2NhdGlvbiBocmVmc1xyXG5cdFx0XHQvLyBzaG91bGQgYmUgc3VmZmljaWVudC5cclxuXHRcdFx0aWYgKCAhZXZlbnQub3JpZ2luYWxFdmVudC5zdGF0ZSAmJlxyXG5cdFx0XHRcdHRoaXMuaGlzdG9yeS5zdGFjay5sZW5ndGggPT09IDEgJiZcclxuXHRcdFx0XHR0aGlzLmlnbm9yZUluaXRpYWxIYXNoQ2hhbmdlICkge1xyXG5cdFx0XHRcdHRoaXMuaWdub3JlSW5pdGlhbEhhc2hDaGFuZ2UgPSBmYWxzZTtcclxuXHJcblx0XHRcdFx0aWYgKCBsb2NhdGlvbi5ocmVmID09PSBpbml0aWFsSHJlZiApIHtcclxuXHRcdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBhY2NvdW50IGZvciBkaXJlY3QgbWFuaXB1bGF0aW9uIG9mIHRoZSBoYXNoLiBUaGF0IGlzLCB3ZSB3aWxsIHJlY2VpdmUgYSBwb3BzdGF0ZVxyXG5cdFx0XHQvLyB3aGVuIHRoZSBoYXNoIGlzIGNoYW5nZWQgYnkgYXNzaWdubWVudCwgYW5kIGl0IHdvbid0IGhhdmUgYSBzdGF0ZSBhc3NvY2lhdGVkLiBXZVxyXG5cdFx0XHQvLyB0aGVuIG5lZWQgdG8gc3F1YXNoIHRoZSBoYXNoLiBTZWUgYmVsb3cgZm9yIGhhbmRsaW5nIG9mIGhhc2ggYXNzaWdubWVudCB0aGF0XHJcblx0XHRcdC8vIG1hdGNoZXMgYW4gZXhpc3RpbmcgaGlzdG9yeSBlbnRyeVxyXG5cdFx0XHQvLyBUT0RPIGl0IG1pZ2h0IGJlIGJldHRlciB0byBvbmx5IGFkZCB0byB0aGUgaGlzdG9yeSBzdGFja1xyXG5cdFx0XHQvLyAgICAgIHdoZW4gdGhlIGhhc2ggaXMgYWRqYWNlbnQgdG8gdGhlIGFjdGl2ZSBoaXN0b3J5IGVudHJ5XHJcblx0XHRcdGhhc2ggPSBwYXRoLnBhcnNlTG9jYXRpb24oKS5oYXNoO1xyXG5cdFx0XHRpZiAoICFldmVudC5vcmlnaW5hbEV2ZW50LnN0YXRlICYmIGhhc2ggKSB7XHJcblx0XHRcdFx0Ly8gc3F1YXNoIHRoZSBoYXNoIHRoYXQncyBiZWVuIGFzc2lnbmVkIG9uIHRoZSBVUkwgd2l0aCByZXBsYWNlU3RhdGVcclxuXHRcdFx0XHQvLyBhbHNvIGdyYWIgdGhlIHJlc3VsdGluZyBzdGF0ZSBvYmplY3QgZm9yIHN0b3JhZ2VcclxuXHRcdFx0XHRzdGF0ZSA9IHRoaXMuc3F1YXNoKCBoYXNoICk7XHJcblxyXG5cdFx0XHRcdC8vIHJlY29yZCB0aGUgbmV3IGhhc2ggYXMgYW4gYWRkaXRpb25hbCBoaXN0b3J5IGVudHJ5XHJcblx0XHRcdFx0Ly8gdG8gbWF0Y2ggdGhlIGJyb3dzZXIncyB0cmVhdG1lbnQgb2YgaGFzaCBhc3NpZ25tZW50XHJcblx0XHRcdFx0dGhpcy5oaXN0b3J5LmFkZCggc3RhdGUudXJsLCBzdGF0ZSApO1xyXG5cclxuXHRcdFx0XHQvLyBwYXNzIHRoZSBuZXdseSBjcmVhdGVkIHN0YXRlIGluZm9ybWF0aW9uXHJcblx0XHRcdFx0Ly8gYWxvbmcgd2l0aCB0aGUgZXZlbnRcclxuXHRcdFx0XHRldmVudC5oaXN0b3J5U3RhdGUgPSBzdGF0ZTtcclxuXHJcblx0XHRcdFx0Ly8gZG8gbm90IGFsdGVyIGhpc3RvcnksIHdlJ3ZlIGFkZGVkIGEgbmV3IGhpc3RvcnkgZW50cnlcclxuXHRcdFx0XHQvLyBzbyB3ZSBrbm93IHdoZXJlIHdlIGFyZVxyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gSWYgYWxsIGVsc2UgZmFpbHMgdGhpcyBpcyBhIHBvcHN0YXRlIHRoYXQgY29tZXMgZnJvbSB0aGUgYmFjayBvciBmb3J3YXJkIGJ1dHRvbnNcclxuXHRcdFx0Ly8gbWFrZSBzdXJlIHRvIHNldCB0aGUgc3RhdGUgb2Ygb3VyIGhpc3Rvcnkgc3RhY2sgcHJvcGVybHksIGFuZCByZWNvcmQgdGhlIGRpcmVjdGlvbmFsaXR5XHJcblx0XHRcdHRoaXMuaGlzdG9yeS5kaXJlY3Qoe1xyXG5cdFx0XHRcdHVybDogKGV2ZW50Lm9yaWdpbmFsRXZlbnQuc3RhdGUgfHwge30pLnVybCB8fCBoYXNoLFxyXG5cclxuXHRcdFx0XHQvLyBXaGVuIHRoZSB1cmwgaXMgZWl0aGVyIGZvcndhcmQgb3IgYmFja3dhcmQgaW4gaGlzdG9yeSBpbmNsdWRlIHRoZSBlbnRyeVxyXG5cdFx0XHRcdC8vIGFzIGRhdGEgb24gdGhlIGV2ZW50IG9iamVjdCBmb3IgbWVyZ2luZyBhcyBkYXRhIGluIHRoZSBuYXZpZ2F0ZSBldmVudFxyXG5cdFx0XHRcdHByZXNlbnQ6IGZ1bmN0aW9uKCBoaXN0b3J5RW50cnksIGRpcmVjdGlvbiApIHtcclxuXHRcdFx0XHRcdC8vIG1ha2Ugc3VyZSB0byBjcmVhdGUgYSBuZXcgb2JqZWN0IHRvIHBhc3MgZG93biBhcyB0aGUgbmF2aWdhdGUgZXZlbnQgZGF0YVxyXG5cdFx0XHRcdFx0ZXZlbnQuaGlzdG9yeVN0YXRlID0gJC5leHRlbmQoe30sIGhpc3RvcnlFbnRyeSk7XHJcblx0XHRcdFx0XHRldmVudC5oaXN0b3J5U3RhdGUuZGlyZWN0aW9uID0gZGlyZWN0aW9uO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vIE5PVEUgbXVzdCBiaW5kIGJlZm9yZSBgbmF2aWdhdGVgIHNwZWNpYWwgZXZlbnQgaGFzaGNoYW5nZSBiaW5kaW5nIG90aGVyd2lzZSB0aGVcclxuXHRcdC8vICAgICAgbmF2aWdhdGlvbiBkYXRhIHdvbid0IGJlIGF0dGFjaGVkIHRvIHRoZSBoYXNoY2hhbmdlIGV2ZW50IGluIHRpbWUgZm9yIHRob3NlXHJcblx0XHQvLyAgICAgIGJpbmRpbmdzIHRvIGF0dGFjaCBpdCB0byB0aGUgYG5hdmlnYXRlYCBzcGVjaWFsIGV2ZW50XHJcblx0XHQvLyBUT0RPIGFkZCBhIGNoZWNrIGhlcmUgdGhhdCBgaGFzaGNoYW5nZS5uYXZpZ2F0ZWAgaXMgYm91bmQgYWxyZWFkeSBvdGhlcndpc2UgaXQnc1xyXG5cdFx0Ly8gICAgICBicm9rZW4gKGV4Y2VwdGlvbj8pXHJcblx0XHRoYXNoY2hhbmdlOiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHRcdHZhciBoaXN0b3J5LCBoYXNoO1xyXG5cclxuXHRcdFx0Ly8gSWYgaGFzaGNoYW5nZSBsaXN0ZW5pbmcgaXMgZXhwbGljaXRseSBkaXNhYmxlZCBvciBwdXNoc3RhdGUgaXMgc3VwcG9ydGVkXHJcblx0XHRcdC8vIGF2b2lkIG1ha2luZyB1c2Ugb2YgdGhlIGhhc2hjaGFuZ2UgaGFuZGxlci5cclxuXHRcdFx0aWYgKCEkLmV2ZW50LnNwZWNpYWwubmF2aWdhdGUuaXNIYXNoQ2hhbmdlRW5hYmxlZCgpIHx8XHJcblx0XHRcdFx0JC5ldmVudC5zcGVjaWFsLm5hdmlnYXRlLmlzUHVzaFN0YXRlRW5hYmxlZCgpICkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gT24gb2NjYXNpb24gZXhwbGljaXRseSB3YW50IHRvIHByZXZlbnQgdGhlIG5leHQgaGFzaCBmcm9tIHByb3BvZ2F0aW5nIGJlY2F1c2Ugd2Ugb25seVxyXG5cdFx0XHQvLyB3aXRoIHRvIGFsdGVyIHRoZSB1cmwgdG8gcmVwcmVzZW50IHRoZSBuZXcgc3RhdGUgZG8gc28gaGVyZVxyXG5cdFx0XHRpZiAoIHRoaXMucHJldmVudE5leHRIYXNoQ2hhbmdlICkge1xyXG5cdFx0XHRcdHRoaXMucHJldmVudE5leHRIYXNoQ2hhbmdlID0gZmFsc2U7XHJcblx0XHRcdFx0ZXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRoaXN0b3J5ID0gdGhpcy5oaXN0b3J5O1xyXG5cdFx0XHRoYXNoID0gcGF0aC5wYXJzZUxvY2F0aW9uKCkuaGFzaDtcclxuXHJcblx0XHRcdC8vIElmIHRoaXMgaXMgYSBoYXNoY2hhbmdlIGNhdXNlZCBieSB0aGUgYmFjayBvciBmb3J3YXJkIGJ1dHRvblxyXG5cdFx0XHQvLyBtYWtlIHN1cmUgdG8gc2V0IHRoZSBzdGF0ZSBvZiBvdXIgaGlzdG9yeSBzdGFjayBwcm9wZXJseVxyXG5cdFx0XHR0aGlzLmhpc3RvcnkuZGlyZWN0KHtcclxuXHRcdFx0XHR1cmw6IGhhc2gsXHJcblxyXG5cdFx0XHRcdC8vIFdoZW4gdGhlIHVybCBpcyBlaXRoZXIgZm9yd2FyZCBvciBiYWNrd2FyZCBpbiBoaXN0b3J5IGluY2x1ZGUgdGhlIGVudHJ5XHJcblx0XHRcdFx0Ly8gYXMgZGF0YSBvbiB0aGUgZXZlbnQgb2JqZWN0IGZvciBtZXJnaW5nIGFzIGRhdGEgaW4gdGhlIG5hdmlnYXRlIGV2ZW50XHJcblx0XHRcdFx0cHJlc2VudDogZnVuY3Rpb24oIGhpc3RvcnlFbnRyeSwgZGlyZWN0aW9uICkge1xyXG5cdFx0XHRcdFx0Ly8gbWFrZSBzdXJlIHRvIGNyZWF0ZSBhIG5ldyBvYmplY3QgdG8gcGFzcyBkb3duIGFzIHRoZSBuYXZpZ2F0ZSBldmVudCBkYXRhXHJcblx0XHRcdFx0XHRldmVudC5oYXNoY2hhbmdlU3RhdGUgPSAkLmV4dGVuZCh7fSwgaGlzdG9yeUVudHJ5KTtcclxuXHRcdFx0XHRcdGV2ZW50Lmhhc2hjaGFuZ2VTdGF0ZS5kaXJlY3Rpb24gPSBkaXJlY3Rpb247XHJcblx0XHRcdFx0fSxcclxuXHJcblx0XHRcdFx0Ly8gV2hlbiB3ZSBkb24ndCBmaW5kIGEgaGFzaCBpbiBvdXIgaGlzdG9yeSBjbGVhcmx5IHdlJ3JlIGFpbWluZyB0byBnbyB0aGVyZVxyXG5cdFx0XHRcdC8vIHJlY29yZCB0aGUgZW50cnkgYXMgbmV3IGZvciBmdXR1cmUgdHJhdmVyc2FsXHJcblx0XHRcdFx0Ly9cclxuXHRcdFx0XHQvLyBOT1RFIGl0J3Mgbm90IGVudGlyZWx5IGNsZWFyIHRoYXQgdGhpcyBpcyB0aGUgcmlnaHQgdGhpbmcgdG8gZG8gZ2l2ZW4gdGhhdCB3ZVxyXG5cdFx0XHRcdC8vICAgICAgY2FuJ3Qga25vdyB0aGUgdXNlcnMgaW50ZW50aW9uLiBJdCBtaWdodCBiZSBiZXR0ZXIgdG8gZXhwbGljaXRseSBfbm90X1xyXG5cdFx0XHRcdC8vICAgICAgc3VwcG9ydCBsb2NhdGlvbi5oYXNoIGFzc2lnbm1lbnQgaW4gcHJlZmVyZW5jZSB0byAkLm5hdmlnYXRlIGNhbGxzXHJcblx0XHRcdFx0Ly8gVE9ETyBmaXJzdCBhcmcgdG8gYWRkIHNob3VsZCBiZSB0aGUgaHJlZiwgYnV0IGl0IGNhdXNlcyBpc3N1ZXMgaW4gaWRlbnRpZnlpbmdcclxuXHRcdFx0XHQvLyAgICAgIGVtYmVkZWQgcGFnZXNcclxuXHRcdFx0XHRtaXNzaW5nOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdGhpc3RvcnkuYWRkKCBoYXNoLCB7XHJcblx0XHRcdFx0XHRcdGhhc2g6IGhhc2gsXHJcblx0XHRcdFx0XHRcdHRpdGxlOiBkb2N1bWVudC50aXRsZVxyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHR9KTtcclxufSkoIGpRdWVyeSApO1xyXG5cclxuXHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHQvLyBUT0RPIGNvbnNpZGVyIHF1ZXVlaW5nIG5hdmlnYXRpb24gYWN0aXZpdHkgdW50aWwgcHJldmlvdXMgYWN0aXZpdGllcyBoYXZlIGNvbXBsZXRlZFxyXG5cdC8vICAgICAgc28gdGhhdCBlbmQgdXNlcnMgZG9uJ3QgaGF2ZSB0byB0aGluayBhYm91dCBpdC4gUHVudGluZyBmb3Igbm93XHJcblx0Ly8gVE9ETyAhISBtb3ZlIHRoZSBldmVudCBiaW5kaW5ncyBpbnRvIGNhbGxiYWNrcyBvbiB0aGUgbmF2aWdhdGUgZXZlbnRcclxuXHQkLm1vYmlsZS5uYXZpZ2F0ZSA9IGZ1bmN0aW9uKCB1cmwsIGRhdGEsIG5vRXZlbnRzICkge1xyXG5cdFx0JC5tb2JpbGUubmF2aWdhdGUubmF2aWdhdG9yLmdvKCB1cmwsIGRhdGEsIG5vRXZlbnRzICk7XHJcblx0fTtcclxuXHJcblx0Ly8gZXhwb3NlIHRoZSBoaXN0b3J5IG9uIHRoZSBuYXZpZ2F0ZSBtZXRob2QgaW4gYW50aWNpcGF0aW9uIG9mIGZ1bGwgaW50ZWdyYXRpb24gd2l0aFxyXG5cdC8vIGV4aXN0aW5nIG5hdmlnYXRpb24gZnVuY3Rpb25hbHR5IHRoYXQgaXMgdGlnaHRseSBjb3VwbGVkIHRvIHRoZSBoaXN0b3J5IGluZm9ybWF0aW9uXHJcblx0JC5tb2JpbGUubmF2aWdhdGUuaGlzdG9yeSA9IG5ldyAkLm1vYmlsZS5IaXN0b3J5KCk7XHJcblxyXG5cdC8vIGluc3RhbnRpYXRlIGFuIGluc3RhbmNlIG9mIHRoZSBuYXZpZ2F0b3IgZm9yIHVzZSB3aXRoaW4gdGhlICQubmF2aWdhdGUgbWV0aG9kXHJcblx0JC5tb2JpbGUubmF2aWdhdGUubmF2aWdhdG9yID0gbmV3ICQubW9iaWxlLk5hdmlnYXRvciggJC5tb2JpbGUubmF2aWdhdGUuaGlzdG9yeSApO1xyXG5cclxuXHR2YXIgbG9jID0gJC5tb2JpbGUucGF0aC5wYXJzZUxvY2F0aW9uKCk7XHJcblx0JC5tb2JpbGUubmF2aWdhdGUuaGlzdG9yeS5hZGQoIGxvYy5ocmVmLCB7aGFzaDogbG9jLmhhc2h9ICk7XHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHR2YXIgcHJvcHMgPSB7XHJcblx0XHRcdFwiYW5pbWF0aW9uXCI6IHt9LFxyXG5cdFx0XHRcInRyYW5zaXRpb25cIjoge31cclxuXHRcdH0sXHJcblx0XHR0ZXN0RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiYVwiICksXHJcblx0XHR2ZW5kb3JQcmVmaXhlcyA9IFsgXCJcIiwgXCJ3ZWJraXQtXCIsIFwibW96LVwiLCBcIm8tXCIgXTtcclxuXHJcblx0JC5lYWNoKCBbIFwiYW5pbWF0aW9uXCIsIFwidHJhbnNpdGlvblwiIF0sIGZ1bmN0aW9uKCBpLCB0ZXN0ICkge1xyXG5cclxuXHRcdC8vIEdldCBjb3JyZWN0IG5hbWUgZm9yIHRlc3RcclxuXHRcdHZhciB0ZXN0TmFtZSA9ICggaSA9PT0gMCApID8gdGVzdCArIFwiLVwiICsgXCJuYW1lXCIgOiB0ZXN0O1xyXG5cclxuXHRcdCQuZWFjaCggdmVuZG9yUHJlZml4ZXMsIGZ1bmN0aW9uKCBqLCBwcmVmaXggKSB7XHJcblx0XHRcdGlmICggdGVzdEVsZW1lbnQuc3R5bGVbICQuY2FtZWxDYXNlKCBwcmVmaXggKyB0ZXN0TmFtZSApIF0gIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0XHQgcHJvcHNbIHRlc3QgXVsgXCJwcmVmaXhcIiBdID0gcHJlZml4O1xyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gU2V0IGV2ZW50IGFuZCBkdXJhdGlvbiBuYW1lcyBmb3IgbGF0ZXIgdXNlXHJcblx0XHRwcm9wc1sgdGVzdCBdWyBcImR1cmF0aW9uXCIgXSA9XHJcblx0XHRcdCQuY2FtZWxDYXNlKCBwcm9wc1sgdGVzdCBdWyBcInByZWZpeFwiIF0gKyB0ZXN0ICsgXCItXCIgKyBcImR1cmF0aW9uXCIgKTtcclxuXHRcdHByb3BzWyB0ZXN0IF1bIFwiZXZlbnRcIiBdID1cclxuXHRcdFx0JC5jYW1lbENhc2UoIHByb3BzWyB0ZXN0IF1bIFwicHJlZml4XCIgXSArIHRlc3QgKyBcIi1cIiArIFwiZW5kXCIgKTtcclxuXHJcblx0XHQvLyBBbGwgbG93ZXIgY2FzZSBpZiBub3QgYSB2ZW5kb3IgcHJvcFxyXG5cdFx0aWYgKCBwcm9wc1sgdGVzdCBdWyBcInByZWZpeFwiIF0gPT09IFwiXCIgKSB7XHJcblx0XHRcdHByb3BzWyB0ZXN0IF1bIFwiZXZlbnRcIiBdID0gcHJvcHNbIHRlc3QgXVsgXCJldmVudFwiIF0udG9Mb3dlckNhc2UoKTtcclxuXHRcdH1cclxuXHR9KTtcclxuXHJcblx0Ly8gSWYgYSB2YWxpZCBwcmVmaXggd2FzIGZvdW5kIHRoZW4gdGhlIGl0IGlzIHN1cHBvcnRlZCBieSB0aGUgYnJvd3NlclxyXG5cdCQuc3VwcG9ydC5jc3NUcmFuc2l0aW9ucyA9ICggcHJvcHNbIFwidHJhbnNpdGlvblwiIF1bIFwicHJlZml4XCIgXSAhPT0gdW5kZWZpbmVkICk7XHJcblx0JC5zdXBwb3J0LmNzc0FuaW1hdGlvbnMgPSAoIHByb3BzWyBcImFuaW1hdGlvblwiIF1bIFwicHJlZml4XCIgXSAhPT0gdW5kZWZpbmVkICk7XHJcblxyXG5cdC8vIFJlbW92ZSB0aGUgdGVzdEVsZW1lbnRcclxuXHQkKCB0ZXN0RWxlbWVudCApLnJlbW92ZSgpO1xyXG5cclxuXHQvLyBBbmltYXRpb24gY29tcGxldGUgY2FsbGJhY2tcclxuXHQkLmZuLmFuaW1hdGlvbkNvbXBsZXRlID0gZnVuY3Rpb24oIGNhbGxiYWNrLCB0eXBlLCBmYWxsYmFja1RpbWUgKSB7XHJcblx0XHR2YXIgdGltZXIsIGR1cmF0aW9uLFxyXG5cdFx0XHR0aGF0ID0gdGhpcyxcclxuXHRcdFx0ZXZlbnRCaW5kaW5nID0gZnVuY3Rpb24oKSB7XHJcblxyXG5cdFx0XHRcdC8vIENsZWFyIHRoZSB0aW1lciBzbyB3ZSBkb24ndCBjYWxsIGNhbGxiYWNrIHR3aWNlXHJcblx0XHRcdFx0Y2xlYXJUaW1lb3V0KCB0aW1lciApO1xyXG5cdFx0XHRcdGNhbGxiYWNrLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcclxuXHRcdFx0fSxcclxuXHRcdFx0YW5pbWF0aW9uVHlwZSA9ICggIXR5cGUgfHwgdHlwZSA9PT0gXCJhbmltYXRpb25cIiApID8gXCJhbmltYXRpb25cIiA6IFwidHJhbnNpdGlvblwiO1xyXG5cclxuXHRcdC8vIE1ha2Ugc3VyZSBzZWxlY3RlZCB0eXBlIGlzIHN1cHBvcnRlZCBieSBicm93c2VyXHJcblx0XHRpZiAoICggJC5zdXBwb3J0LmNzc1RyYW5zaXRpb25zICYmIGFuaW1hdGlvblR5cGUgPT09IFwidHJhbnNpdGlvblwiICkgfHxcclxuXHRcdFx0KCAkLnN1cHBvcnQuY3NzQW5pbWF0aW9ucyAmJiBhbmltYXRpb25UeXBlID09PSBcImFuaW1hdGlvblwiICkgKSB7XHJcblxyXG5cdFx0XHQvLyBJZiBhIGZhbGxiYWNrIHRpbWUgd2FzIG5vdCBwYXNzZWQgc2V0IG9uZVxyXG5cdFx0XHRpZiAoIGZhbGxiYWNrVGltZSA9PT0gdW5kZWZpbmVkICkge1xyXG5cclxuXHRcdFx0XHQvLyBNYWtlIHN1cmUgdGhlIHdhcyBub3QgYm91bmQgdG8gZG9jdW1lbnQgYmVmb3JlIGNoZWNraW5nIC5jc3NcclxuXHRcdFx0XHRpZiAoICQoIHRoaXMgKS5jb250ZXh0ICE9PSBkb2N1bWVudCApIHtcclxuXHJcblx0XHRcdFx0XHQvLyBQYXJzZSB0aGUgZHVycmF0aW9uIHNpbmNlIGl0cyBpbiBzZWNvbmQgbXVsdGlwbGUgYnkgMTAwMCBmb3IgbWlsbGlzZWNvbmRzXHJcblx0XHRcdFx0XHQvLyBNdWx0aXBseSBieSAzIHRvIG1ha2Ugc3VyZSB3ZSBnaXZlIHRoZSBhbmltYXRpb24gcGxlbnR5IG9mIHRpbWUuXHJcblx0XHRcdFx0XHRkdXJhdGlvbiA9IHBhcnNlRmxvYXQoXHJcblx0XHRcdFx0XHRcdCQoIHRoaXMgKS5jc3MoIHByb3BzWyBhbmltYXRpb25UeXBlIF0uZHVyYXRpb24gKVxyXG5cdFx0XHRcdFx0KSAqIDMwMDA7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBJZiB3ZSBjb3VsZCBub3QgcmVhZCBhIGR1cmF0aW9uIHVzZSB0aGUgZGVmYXVsdFxyXG5cdFx0XHRcdGlmICggZHVyYXRpb24gPT09IDAgfHwgZHVyYXRpb24gPT09IHVuZGVmaW5lZCB8fCBpc05hTiggZHVyYXRpb24gKSApIHtcclxuXHRcdFx0XHRcdGR1cmF0aW9uID0gJC5mbi5hbmltYXRpb25Db21wbGV0ZS5kZWZhdWx0RHVyYXRpb247XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBTZXRzIHVwIHRoZSBmYWxsYmFjayBpZiBldmVudCBuZXZlciBjb21lc1xyXG5cdFx0XHR0aW1lciA9IHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdCQoIHRoYXQgKS5vZmYoIHByb3BzWyBhbmltYXRpb25UeXBlIF0uZXZlbnQsIGV2ZW50QmluZGluZyApO1xyXG5cdFx0XHRcdGNhbGxiYWNrLmFwcGx5KCB0aGF0ICk7XHJcblx0XHRcdH0sIGR1cmF0aW9uICk7XHJcblxyXG5cdFx0XHQvLyBCaW5kIHRoZSBldmVudFxyXG5cdFx0XHRyZXR1cm4gJCggdGhpcyApLm9uZSggcHJvcHNbIGFuaW1hdGlvblR5cGUgXS5ldmVudCwgZXZlbnRCaW5kaW5nICk7XHJcblx0XHR9IGVsc2Uge1xyXG5cclxuXHRcdFx0Ly8gQ1NTIGFuaW1hdGlvbiAvIHRyYW5zaXRpb25zIG5vdCBzdXBwb3J0ZWRcclxuXHRcdFx0Ly8gRGVmZXIgZXhlY3V0aW9uIGZvciBjb25zaXN0ZW5jeSBiZXR3ZWVuIHdlYmtpdC9ub24gd2Via2l0XHJcblx0XHRcdHNldFRpbWVvdXQoICQucHJveHkoIGNhbGxiYWNrLCB0aGlzICksIDAgKTtcclxuXHRcdFx0cmV0dXJuICQoIHRoaXMgKTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHQvLyBBbGxvdyBkZWZhdWx0IGNhbGxiYWNrIHRvIGJlIGNvbmZpZ3VyZWQgb24gbW9iaWxlSW5pdFxyXG5cdCQuZm4uYW5pbWF0aW9uQ29tcGxldGUuZGVmYXVsdER1cmF0aW9uID0gMTAwMDtcclxufSkoIGpRdWVyeSApO1xyXG5cclxuLy8gVGhpcyBwbHVnaW4gaXMgYW4gZXhwZXJpbWVudCBmb3IgYWJzdHJhY3RpbmcgYXdheSB0aGUgdG91Y2ggYW5kIG1vdXNlXHJcbi8vIGV2ZW50cyBzbyB0aGF0IGRldmVsb3BlcnMgZG9uJ3QgaGF2ZSB0byB3b3JyeSBhYm91dCB3aGljaCBtZXRob2Qgb2YgaW5wdXRcclxuLy8gdGhlIGRldmljZSB0aGVpciBkb2N1bWVudCBpcyBsb2FkZWQgb24gc3VwcG9ydHMuXHJcbi8vXHJcbi8vIFRoZSBpZGVhIGhlcmUgaXMgdG8gYWxsb3cgdGhlIGRldmVsb3BlciB0byByZWdpc3RlciBsaXN0ZW5lcnMgZm9yIHRoZVxyXG4vLyBiYXNpYyBtb3VzZSBldmVudHMsIHN1Y2ggYXMgbW91c2Vkb3duLCBtb3VzZW1vdmUsIG1vdXNldXAsIGFuZCBjbGljayxcclxuLy8gYW5kIHRoZSBwbHVnaW4gd2lsbCB0YWtlIGNhcmUgb2YgcmVnaXN0ZXJpbmcgdGhlIGNvcnJlY3QgbGlzdGVuZXJzXHJcbi8vIGJlaGluZCB0aGUgc2NlbmVzIHRvIGludm9rZSB0aGUgbGlzdGVuZXIgYXQgdGhlIGZhc3Rlc3QgcG9zc2libGUgdGltZVxyXG4vLyBmb3IgdGhhdCBkZXZpY2UsIHdoaWxlIHN0aWxsIHJldGFpbmluZyB0aGUgb3JkZXIgb2YgZXZlbnQgZmlyaW5nIGluXHJcbi8vIHRoZSB0cmFkaXRpb25hbCBtb3VzZSBlbnZpcm9ubWVudCwgc2hvdWxkIG11bHRpcGxlIGhhbmRsZXJzIGJlIHJlZ2lzdGVyZWRcclxuLy8gb24gdGhlIHNhbWUgZWxlbWVudCBmb3IgZGlmZmVyZW50IGV2ZW50cy5cclxuLy9cclxuLy8gVGhlIGN1cnJlbnQgdmVyc2lvbiBleHBvc2VzIHRoZSBmb2xsb3dpbmcgdmlydHVhbCBldmVudHMgdG8galF1ZXJ5IGJpbmQgbWV0aG9kczpcclxuLy8gXCJ2bW91c2VvdmVyIHZtb3VzZWRvd24gdm1vdXNlbW92ZSB2bW91c2V1cCB2Y2xpY2sgdm1vdXNlb3V0IHZtb3VzZWNhbmNlbFwiXHJcblxyXG4oZnVuY3Rpb24oICQsIHdpbmRvdywgZG9jdW1lbnQsIHVuZGVmaW5lZCApIHtcclxuXHJcbnZhciBkYXRhUHJvcGVydHlOYW1lID0gXCJ2aXJ0dWFsTW91c2VCaW5kaW5nc1wiLFxyXG5cdHRvdWNoVGFyZ2V0UHJvcGVydHlOYW1lID0gXCJ2aXJ0dWFsVG91Y2hJRFwiLFxyXG5cdHZpcnR1YWxFdmVudE5hbWVzID0gXCJ2bW91c2VvdmVyIHZtb3VzZWRvd24gdm1vdXNlbW92ZSB2bW91c2V1cCB2Y2xpY2sgdm1vdXNlb3V0IHZtb3VzZWNhbmNlbFwiLnNwbGl0KCBcIiBcIiApLFxyXG5cdHRvdWNoRXZlbnRQcm9wcyA9IFwiY2xpZW50WCBjbGllbnRZIHBhZ2VYIHBhZ2VZIHNjcmVlblggc2NyZWVuWVwiLnNwbGl0KCBcIiBcIiApLFxyXG5cdG1vdXNlSG9va1Byb3BzID0gJC5ldmVudC5tb3VzZUhvb2tzID8gJC5ldmVudC5tb3VzZUhvb2tzLnByb3BzIDogW10sXHJcblx0bW91c2VFdmVudFByb3BzID0gJC5ldmVudC5wcm9wcy5jb25jYXQoIG1vdXNlSG9va1Byb3BzICksXHJcblx0YWN0aXZlRG9jSGFuZGxlcnMgPSB7fSxcclxuXHRyZXNldFRpbWVySUQgPSAwLFxyXG5cdHN0YXJ0WCA9IDAsXHJcblx0c3RhcnRZID0gMCxcclxuXHRkaWRTY3JvbGwgPSBmYWxzZSxcclxuXHRjbGlja0Jsb2NrTGlzdCA9IFtdLFxyXG5cdGJsb2NrTW91c2VUcmlnZ2VycyA9IGZhbHNlLFxyXG5cdGJsb2NrVG91Y2hUcmlnZ2VycyA9IGZhbHNlLFxyXG5cdGV2ZW50Q2FwdHVyZVN1cHBvcnRlZCA9IFwiYWRkRXZlbnRMaXN0ZW5lclwiIGluIGRvY3VtZW50LFxyXG5cdCRkb2N1bWVudCA9ICQoIGRvY3VtZW50ICksXHJcblx0bmV4dFRvdWNoSUQgPSAxLFxyXG5cdGxhc3RUb3VjaElEID0gMCwgdGhyZXNob2xkLFxyXG5cdGk7XHJcblxyXG4kLnZtb3VzZSA9IHtcclxuXHRtb3ZlRGlzdGFuY2VUaHJlc2hvbGQ6IDEwLFxyXG5cdGNsaWNrRGlzdGFuY2VUaHJlc2hvbGQ6IDEwLFxyXG5cdHJlc2V0VGltZXJEdXJhdGlvbjogMTUwMFxyXG59O1xyXG5cclxuZnVuY3Rpb24gZ2V0TmF0aXZlRXZlbnQoIGV2ZW50ICkge1xyXG5cclxuXHR3aGlsZSAoIGV2ZW50ICYmIHR5cGVvZiBldmVudC5vcmlnaW5hbEV2ZW50ICE9PSBcInVuZGVmaW5lZFwiICkge1xyXG5cdFx0ZXZlbnQgPSBldmVudC5vcmlnaW5hbEV2ZW50O1xyXG5cdH1cclxuXHRyZXR1cm4gZXZlbnQ7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZVZpcnR1YWxFdmVudCggZXZlbnQsIGV2ZW50VHlwZSApIHtcclxuXHJcblx0dmFyIHQgPSBldmVudC50eXBlLFxyXG5cdFx0b2UsIHByb3BzLCBuZSwgcHJvcCwgY3QsIHRvdWNoLCBpLCBqLCBsZW47XHJcblxyXG5cdGV2ZW50ID0gJC5FdmVudCggZXZlbnQgKTtcclxuXHRldmVudC50eXBlID0gZXZlbnRUeXBlO1xyXG5cclxuXHRvZSA9IGV2ZW50Lm9yaWdpbmFsRXZlbnQ7XHJcblx0cHJvcHMgPSAkLmV2ZW50LnByb3BzO1xyXG5cclxuXHQvLyBhZGRyZXNzZXMgc2VwYXJhdGlvbiBvZiAkLmV2ZW50LnByb3BzIGluIHRvICQuZXZlbnQubW91c2VIb29rLnByb3BzIGFuZCBJc3N1ZSAzMjgwXHJcblx0Ly8gaHR0cHM6Ly9naXRodWIuY29tL2pxdWVyeS9qcXVlcnktbW9iaWxlL2lzc3Vlcy8zMjgwXHJcblx0aWYgKCB0LnNlYXJjaCggL14obW91c2V8Y2xpY2spLyApID4gLTEgKSB7XHJcblx0XHRwcm9wcyA9IG1vdXNlRXZlbnRQcm9wcztcclxuXHR9XHJcblxyXG5cdC8vIGNvcHkgb3JpZ2luYWwgZXZlbnQgcHJvcGVydGllcyBvdmVyIHRvIHRoZSBuZXcgZXZlbnRcclxuXHQvLyB0aGlzIHdvdWxkIGhhcHBlbiBpZiB3ZSBjb3VsZCBjYWxsICQuZXZlbnQuZml4IGluc3RlYWQgb2YgJC5FdmVudFxyXG5cdC8vIGJ1dCB3ZSBkb24ndCBoYXZlIGEgd2F5IHRvIGZvcmNlIGFuIGV2ZW50IHRvIGJlIGZpeGVkIG11bHRpcGxlIHRpbWVzXHJcblx0aWYgKCBvZSApIHtcclxuXHRcdGZvciAoIGkgPSBwcm9wcy5sZW5ndGgsIHByb3A7IGk7ICkge1xyXG5cdFx0XHRwcm9wID0gcHJvcHNbIC0taSBdO1xyXG5cdFx0XHRldmVudFsgcHJvcCBdID0gb2VbIHByb3AgXTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8vIG1ha2Ugc3VyZSB0aGF0IGlmIHRoZSBtb3VzZSBhbmQgY2xpY2sgdmlydHVhbCBldmVudHMgYXJlIGdlbmVyYXRlZFxyXG5cdC8vIHdpdGhvdXQgYSAud2hpY2ggb25lIGlzIGRlZmluZWRcclxuXHRpZiAoIHQuc2VhcmNoKC9tb3VzZShkb3dufHVwKXxjbGljay8pID4gLTEgJiYgIWV2ZW50LndoaWNoICkge1xyXG5cdFx0ZXZlbnQud2hpY2ggPSAxO1xyXG5cdH1cclxuXHJcblx0aWYgKCB0LnNlYXJjaCgvXnRvdWNoLykgIT09IC0xICkge1xyXG5cdFx0bmUgPSBnZXROYXRpdmVFdmVudCggb2UgKTtcclxuXHRcdHQgPSBuZS50b3VjaGVzO1xyXG5cdFx0Y3QgPSBuZS5jaGFuZ2VkVG91Y2hlcztcclxuXHRcdHRvdWNoID0gKCB0ICYmIHQubGVuZ3RoICkgPyB0WzBdIDogKCAoIGN0ICYmIGN0Lmxlbmd0aCApID8gY3RbIDAgXSA6IHVuZGVmaW5lZCApO1xyXG5cclxuXHRcdGlmICggdG91Y2ggKSB7XHJcblx0XHRcdGZvciAoIGogPSAwLCBsZW4gPSB0b3VjaEV2ZW50UHJvcHMubGVuZ3RoOyBqIDwgbGVuOyBqKyspIHtcclxuXHRcdFx0XHRwcm9wID0gdG91Y2hFdmVudFByb3BzWyBqIF07XHJcblx0XHRcdFx0ZXZlbnRbIHByb3AgXSA9IHRvdWNoWyBwcm9wIF07XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHJldHVybiBldmVudDtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0VmlydHVhbEJpbmRpbmdGbGFncyggZWxlbWVudCApIHtcclxuXHJcblx0dmFyIGZsYWdzID0ge30sXHJcblx0XHRiLCBrO1xyXG5cclxuXHR3aGlsZSAoIGVsZW1lbnQgKSB7XHJcblxyXG5cdFx0YiA9ICQuZGF0YSggZWxlbWVudCwgZGF0YVByb3BlcnR5TmFtZSApO1xyXG5cclxuXHRcdGZvciAoICBrIGluIGIgKSB7XHJcblx0XHRcdGlmICggYlsgayBdICkge1xyXG5cdFx0XHRcdGZsYWdzWyBrIF0gPSBmbGFncy5oYXNWaXJ0dWFsQmluZGluZyA9IHRydWU7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdGVsZW1lbnQgPSBlbGVtZW50LnBhcmVudE5vZGU7XHJcblx0fVxyXG5cdHJldHVybiBmbGFncztcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0Q2xvc2VzdEVsZW1lbnRXaXRoVmlydHVhbEJpbmRpbmcoIGVsZW1lbnQsIGV2ZW50VHlwZSApIHtcclxuXHR2YXIgYjtcclxuXHR3aGlsZSAoIGVsZW1lbnQgKSB7XHJcblxyXG5cdFx0YiA9ICQuZGF0YSggZWxlbWVudCwgZGF0YVByb3BlcnR5TmFtZSApO1xyXG5cclxuXHRcdGlmICggYiAmJiAoICFldmVudFR5cGUgfHwgYlsgZXZlbnRUeXBlIF0gKSApIHtcclxuXHRcdFx0cmV0dXJuIGVsZW1lbnQ7XHJcblx0XHR9XHJcblx0XHRlbGVtZW50ID0gZWxlbWVudC5wYXJlbnROb2RlO1xyXG5cdH1cclxuXHRyZXR1cm4gbnVsbDtcclxufVxyXG5cclxuZnVuY3Rpb24gZW5hYmxlVG91Y2hCaW5kaW5ncygpIHtcclxuXHRibG9ja1RvdWNoVHJpZ2dlcnMgPSBmYWxzZTtcclxufVxyXG5cclxuZnVuY3Rpb24gZGlzYWJsZVRvdWNoQmluZGluZ3MoKSB7XHJcblx0YmxvY2tUb3VjaFRyaWdnZXJzID0gdHJ1ZTtcclxufVxyXG5cclxuZnVuY3Rpb24gZW5hYmxlTW91c2VCaW5kaW5ncygpIHtcclxuXHRsYXN0VG91Y2hJRCA9IDA7XHJcblx0Y2xpY2tCbG9ja0xpc3QubGVuZ3RoID0gMDtcclxuXHRibG9ja01vdXNlVHJpZ2dlcnMgPSBmYWxzZTtcclxuXHJcblx0Ly8gV2hlbiBtb3VzZSBiaW5kaW5ncyBhcmUgZW5hYmxlZCwgb3VyXHJcblx0Ly8gdG91Y2ggYmluZGluZ3MgYXJlIGRpc2FibGVkLlxyXG5cdGRpc2FibGVUb3VjaEJpbmRpbmdzKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRpc2FibGVNb3VzZUJpbmRpbmdzKCkge1xyXG5cdC8vIFdoZW4gbW91c2UgYmluZGluZ3MgYXJlIGRpc2FibGVkLCBvdXJcclxuXHQvLyB0b3VjaCBiaW5kaW5ncyBhcmUgZW5hYmxlZC5cclxuXHRlbmFibGVUb3VjaEJpbmRpbmdzKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHN0YXJ0UmVzZXRUaW1lcigpIHtcclxuXHRjbGVhclJlc2V0VGltZXIoKTtcclxuXHRyZXNldFRpbWVySUQgPSBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcclxuXHRcdHJlc2V0VGltZXJJRCA9IDA7XHJcblx0XHRlbmFibGVNb3VzZUJpbmRpbmdzKCk7XHJcblx0fSwgJC52bW91c2UucmVzZXRUaW1lckR1cmF0aW9uICk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNsZWFyUmVzZXRUaW1lcigpIHtcclxuXHRpZiAoIHJlc2V0VGltZXJJRCApIHtcclxuXHRcdGNsZWFyVGltZW91dCggcmVzZXRUaW1lcklEICk7XHJcblx0XHRyZXNldFRpbWVySUQgPSAwO1xyXG5cdH1cclxufVxyXG5cclxuZnVuY3Rpb24gdHJpZ2dlclZpcnR1YWxFdmVudCggZXZlbnRUeXBlLCBldmVudCwgZmxhZ3MgKSB7XHJcblx0dmFyIHZlO1xyXG5cclxuXHRpZiAoICggZmxhZ3MgJiYgZmxhZ3NbIGV2ZW50VHlwZSBdICkgfHxcclxuXHRcdFx0XHQoICFmbGFncyAmJiBnZXRDbG9zZXN0RWxlbWVudFdpdGhWaXJ0dWFsQmluZGluZyggZXZlbnQudGFyZ2V0LCBldmVudFR5cGUgKSApICkge1xyXG5cclxuXHRcdHZlID0gY3JlYXRlVmlydHVhbEV2ZW50KCBldmVudCwgZXZlbnRUeXBlICk7XHJcblxyXG5cdFx0JCggZXZlbnQudGFyZ2V0KS50cmlnZ2VyKCB2ZSApO1xyXG5cdH1cclxuXHJcblx0cmV0dXJuIHZlO1xyXG59XHJcblxyXG5mdW5jdGlvbiBtb3VzZUV2ZW50Q2FsbGJhY2soIGV2ZW50ICkge1xyXG5cdHZhciB0b3VjaElEID0gJC5kYXRhKCBldmVudC50YXJnZXQsIHRvdWNoVGFyZ2V0UHJvcGVydHlOYW1lICksXHJcblx0XHR2ZTtcclxuXHJcblx0aWYgKCAhYmxvY2tNb3VzZVRyaWdnZXJzICYmICggIWxhc3RUb3VjaElEIHx8IGxhc3RUb3VjaElEICE9PSB0b3VjaElEICkgKSB7XHJcblx0XHR2ZSA9IHRyaWdnZXJWaXJ0dWFsRXZlbnQoIFwidlwiICsgZXZlbnQudHlwZSwgZXZlbnQgKTtcclxuXHRcdGlmICggdmUgKSB7XHJcblx0XHRcdGlmICggdmUuaXNEZWZhdWx0UHJldmVudGVkKCkgKSB7XHJcblx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoIHZlLmlzUHJvcGFnYXRpb25TdG9wcGVkKCkgKSB7XHJcblx0XHRcdFx0ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKCB2ZS5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCgpICkge1xyXG5cdFx0XHRcdGV2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVUb3VjaFN0YXJ0KCBldmVudCApIHtcclxuXHJcblx0dmFyIHRvdWNoZXMgPSBnZXROYXRpdmVFdmVudCggZXZlbnQgKS50b3VjaGVzLFxyXG5cdFx0dGFyZ2V0LCBmbGFncywgdDtcclxuXHJcblx0aWYgKCB0b3VjaGVzICYmIHRvdWNoZXMubGVuZ3RoID09PSAxICkge1xyXG5cclxuXHRcdHRhcmdldCA9IGV2ZW50LnRhcmdldDtcclxuXHRcdGZsYWdzID0gZ2V0VmlydHVhbEJpbmRpbmdGbGFncyggdGFyZ2V0ICk7XHJcblxyXG5cdFx0aWYgKCBmbGFncy5oYXNWaXJ0dWFsQmluZGluZyApIHtcclxuXHJcblx0XHRcdGxhc3RUb3VjaElEID0gbmV4dFRvdWNoSUQrKztcclxuXHRcdFx0JC5kYXRhKCB0YXJnZXQsIHRvdWNoVGFyZ2V0UHJvcGVydHlOYW1lLCBsYXN0VG91Y2hJRCApO1xyXG5cclxuXHRcdFx0Y2xlYXJSZXNldFRpbWVyKCk7XHJcblxyXG5cdFx0XHRkaXNhYmxlTW91c2VCaW5kaW5ncygpO1xyXG5cdFx0XHRkaWRTY3JvbGwgPSBmYWxzZTtcclxuXHJcblx0XHRcdHQgPSBnZXROYXRpdmVFdmVudCggZXZlbnQgKS50b3VjaGVzWyAwIF07XHJcblx0XHRcdHN0YXJ0WCA9IHQucGFnZVg7XHJcblx0XHRcdHN0YXJ0WSA9IHQucGFnZVk7XHJcblxyXG5cdFx0XHR0cmlnZ2VyVmlydHVhbEV2ZW50KCBcInZtb3VzZW92ZXJcIiwgZXZlbnQsIGZsYWdzICk7XHJcblx0XHRcdHRyaWdnZXJWaXJ0dWFsRXZlbnQoIFwidm1vdXNlZG93blwiLCBldmVudCwgZmxhZ3MgKTtcclxuXHRcdH1cclxuXHR9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVNjcm9sbCggZXZlbnQgKSB7XHJcblx0aWYgKCBibG9ja1RvdWNoVHJpZ2dlcnMgKSB7XHJcblx0XHRyZXR1cm47XHJcblx0fVxyXG5cclxuXHRpZiAoICFkaWRTY3JvbGwgKSB7XHJcblx0XHR0cmlnZ2VyVmlydHVhbEV2ZW50KCBcInZtb3VzZWNhbmNlbFwiLCBldmVudCwgZ2V0VmlydHVhbEJpbmRpbmdGbGFncyggZXZlbnQudGFyZ2V0ICkgKTtcclxuXHR9XHJcblxyXG5cdGRpZFNjcm9sbCA9IHRydWU7XHJcblx0c3RhcnRSZXNldFRpbWVyKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVRvdWNoTW92ZSggZXZlbnQgKSB7XHJcblx0aWYgKCBibG9ja1RvdWNoVHJpZ2dlcnMgKSB7XHJcblx0XHRyZXR1cm47XHJcblx0fVxyXG5cclxuXHR2YXIgdCA9IGdldE5hdGl2ZUV2ZW50KCBldmVudCApLnRvdWNoZXNbIDAgXSxcclxuXHRcdGRpZENhbmNlbCA9IGRpZFNjcm9sbCxcclxuXHRcdG1vdmVUaHJlc2hvbGQgPSAkLnZtb3VzZS5tb3ZlRGlzdGFuY2VUaHJlc2hvbGQsXHJcblx0XHRmbGFncyA9IGdldFZpcnR1YWxCaW5kaW5nRmxhZ3MoIGV2ZW50LnRhcmdldCApO1xyXG5cclxuXHRcdGRpZFNjcm9sbCA9IGRpZFNjcm9sbCB8fFxyXG5cdFx0XHQoIE1hdGguYWJzKCB0LnBhZ2VYIC0gc3RhcnRYICkgPiBtb3ZlVGhyZXNob2xkIHx8XHJcblx0XHRcdFx0TWF0aC5hYnMoIHQucGFnZVkgLSBzdGFydFkgKSA+IG1vdmVUaHJlc2hvbGQgKTtcclxuXHJcblx0aWYgKCBkaWRTY3JvbGwgJiYgIWRpZENhbmNlbCApIHtcclxuXHRcdHRyaWdnZXJWaXJ0dWFsRXZlbnQoIFwidm1vdXNlY2FuY2VsXCIsIGV2ZW50LCBmbGFncyApO1xyXG5cdH1cclxuXHJcblx0dHJpZ2dlclZpcnR1YWxFdmVudCggXCJ2bW91c2Vtb3ZlXCIsIGV2ZW50LCBmbGFncyApO1xyXG5cdHN0YXJ0UmVzZXRUaW1lcigpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVUb3VjaEVuZCggZXZlbnQgKSB7XHJcblx0aWYgKCBibG9ja1RvdWNoVHJpZ2dlcnMgKSB7XHJcblx0XHRyZXR1cm47XHJcblx0fVxyXG5cclxuXHRkaXNhYmxlVG91Y2hCaW5kaW5ncygpO1xyXG5cclxuXHR2YXIgZmxhZ3MgPSBnZXRWaXJ0dWFsQmluZGluZ0ZsYWdzKCBldmVudC50YXJnZXQgKSxcclxuXHRcdHZlLCB0O1xyXG5cdHRyaWdnZXJWaXJ0dWFsRXZlbnQoIFwidm1vdXNldXBcIiwgZXZlbnQsIGZsYWdzICk7XHJcblxyXG5cdGlmICggIWRpZFNjcm9sbCApIHtcclxuXHRcdHZlID0gdHJpZ2dlclZpcnR1YWxFdmVudCggXCJ2Y2xpY2tcIiwgZXZlbnQsIGZsYWdzICk7XHJcblx0XHRpZiAoIHZlICYmIHZlLmlzRGVmYXVsdFByZXZlbnRlZCgpICkge1xyXG5cdFx0XHQvLyBUaGUgdGFyZ2V0IG9mIHRoZSBtb3VzZSBldmVudHMgdGhhdCBmb2xsb3cgdGhlIHRvdWNoZW5kXHJcblx0XHRcdC8vIGV2ZW50IGRvbid0IG5lY2Vzc2FyaWx5IG1hdGNoIHRoZSB0YXJnZXQgdXNlZCBkdXJpbmcgdGhlXHJcblx0XHRcdC8vIHRvdWNoLiBUaGlzIG1lYW5zIHdlIG5lZWQgdG8gcmVseSBvbiBjb29yZGluYXRlcyBmb3IgYmxvY2tpbmdcclxuXHRcdFx0Ly8gYW55IGNsaWNrIHRoYXQgaXMgZ2VuZXJhdGVkLlxyXG5cdFx0XHR0ID0gZ2V0TmF0aXZlRXZlbnQoIGV2ZW50ICkuY2hhbmdlZFRvdWNoZXNbIDAgXTtcclxuXHRcdFx0Y2xpY2tCbG9ja0xpc3QucHVzaCh7XHJcblx0XHRcdFx0dG91Y2hJRDogbGFzdFRvdWNoSUQsXHJcblx0XHRcdFx0eDogdC5jbGllbnRYLFxyXG5cdFx0XHRcdHk6IHQuY2xpZW50WVxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdC8vIFByZXZlbnQgYW55IG1vdXNlIGV2ZW50cyB0aGF0IGZvbGxvdyBmcm9tIHRyaWdnZXJpbmdcclxuXHRcdFx0Ly8gdmlydHVhbCBldmVudCBub3RpZmljYXRpb25zLlxyXG5cdFx0XHRibG9ja01vdXNlVHJpZ2dlcnMgPSB0cnVlO1xyXG5cdFx0fVxyXG5cdH1cclxuXHR0cmlnZ2VyVmlydHVhbEV2ZW50KCBcInZtb3VzZW91dFwiLCBldmVudCwgZmxhZ3MpO1xyXG5cdGRpZFNjcm9sbCA9IGZhbHNlO1xyXG5cclxuXHRzdGFydFJlc2V0VGltZXIoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFzVmlydHVhbEJpbmRpbmdzKCBlbGUgKSB7XHJcblx0dmFyIGJpbmRpbmdzID0gJC5kYXRhKCBlbGUsIGRhdGFQcm9wZXJ0eU5hbWUgKSxcclxuXHRcdGs7XHJcblxyXG5cdGlmICggYmluZGluZ3MgKSB7XHJcblx0XHRmb3IgKCBrIGluIGJpbmRpbmdzICkge1xyXG5cdFx0XHRpZiAoIGJpbmRpbmdzWyBrIF0gKSB7XHJcblx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblx0cmV0dXJuIGZhbHNlO1xyXG59XHJcblxyXG5mdW5jdGlvbiBkdW1teU1vdXNlSGFuZGxlcigpIHt9XHJcblxyXG5mdW5jdGlvbiBnZXRTcGVjaWFsRXZlbnRPYmplY3QoIGV2ZW50VHlwZSApIHtcclxuXHR2YXIgcmVhbFR5cGUgPSBldmVudFR5cGUuc3Vic3RyKCAxICk7XHJcblxyXG5cdHJldHVybiB7XHJcblx0XHRzZXR1cDogZnVuY3Rpb24oLyogZGF0YSwgbmFtZXNwYWNlICovKSB7XHJcblx0XHRcdC8vIElmIHRoaXMgaXMgdGhlIGZpcnN0IHZpcnR1YWwgbW91c2UgYmluZGluZyBmb3IgdGhpcyBlbGVtZW50LFxyXG5cdFx0XHQvLyBhZGQgYSBiaW5kaW5ncyBvYmplY3QgdG8gaXRzIGRhdGEuXHJcblxyXG5cdFx0XHRpZiAoICFoYXNWaXJ0dWFsQmluZGluZ3MoIHRoaXMgKSApIHtcclxuXHRcdFx0XHQkLmRhdGEoIHRoaXMsIGRhdGFQcm9wZXJ0eU5hbWUsIHt9ICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIElmIHNldHVwIGlzIGNhbGxlZCwgd2Uga25vdyBpdCBpcyB0aGUgZmlyc3QgYmluZGluZyBmb3IgdGhpc1xyXG5cdFx0XHQvLyBldmVudFR5cGUsIHNvIGluaXRpYWxpemUgdGhlIGNvdW50IGZvciB0aGUgZXZlbnRUeXBlIHRvIHplcm8uXHJcblx0XHRcdHZhciBiaW5kaW5ncyA9ICQuZGF0YSggdGhpcywgZGF0YVByb3BlcnR5TmFtZSApO1xyXG5cdFx0XHRiaW5kaW5nc1sgZXZlbnRUeXBlIF0gPSB0cnVlO1xyXG5cclxuXHRcdFx0Ly8gSWYgdGhpcyBpcyB0aGUgZmlyc3QgdmlydHVhbCBtb3VzZSBldmVudCBmb3IgdGhpcyB0eXBlLFxyXG5cdFx0XHQvLyByZWdpc3RlciBhIGdsb2JhbCBoYW5kbGVyIG9uIHRoZSBkb2N1bWVudC5cclxuXHJcblx0XHRcdGFjdGl2ZURvY0hhbmRsZXJzWyBldmVudFR5cGUgXSA9ICggYWN0aXZlRG9jSGFuZGxlcnNbIGV2ZW50VHlwZSBdIHx8IDAgKSArIDE7XHJcblxyXG5cdFx0XHRpZiAoIGFjdGl2ZURvY0hhbmRsZXJzWyBldmVudFR5cGUgXSA9PT0gMSApIHtcclxuXHRcdFx0XHQkZG9jdW1lbnQuYmluZCggcmVhbFR5cGUsIG1vdXNlRXZlbnRDYWxsYmFjayApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBTb21lIGJyb3dzZXJzLCBsaWtlIE9wZXJhIE1pbmksIHdvbid0IGRpc3BhdGNoIG1vdXNlL2NsaWNrIGV2ZW50c1xyXG5cdFx0XHQvLyBmb3IgZWxlbWVudHMgdW5sZXNzIHRoZXkgYWN0dWFsbHkgaGF2ZSBoYW5kbGVycyByZWdpc3RlcmVkIG9uIHRoZW0uXHJcblx0XHRcdC8vIFRvIGdldCBhcm91bmQgdGhpcywgd2UgcmVnaXN0ZXIgZHVtbXkgaGFuZGxlcnMgb24gdGhlIGVsZW1lbnRzLlxyXG5cclxuXHRcdFx0JCggdGhpcyApLmJpbmQoIHJlYWxUeXBlLCBkdW1teU1vdXNlSGFuZGxlciApO1xyXG5cclxuXHRcdFx0Ly8gRm9yIG5vdywgaWYgZXZlbnQgY2FwdHVyZSBpcyBub3Qgc3VwcG9ydGVkLCB3ZSByZWx5IG9uIG1vdXNlIGhhbmRsZXJzLlxyXG5cdFx0XHRpZiAoIGV2ZW50Q2FwdHVyZVN1cHBvcnRlZCApIHtcclxuXHRcdFx0XHQvLyBJZiB0aGlzIGlzIHRoZSBmaXJzdCB2aXJ0dWFsIG1vdXNlIGJpbmRpbmcgZm9yIHRoZSBkb2N1bWVudCxcclxuXHRcdFx0XHQvLyByZWdpc3RlciBvdXIgdG91Y2hzdGFydCBoYW5kbGVyIG9uIHRoZSBkb2N1bWVudC5cclxuXHJcblx0XHRcdFx0YWN0aXZlRG9jSGFuZGxlcnNbIFwidG91Y2hzdGFydFwiIF0gPSAoIGFjdGl2ZURvY0hhbmRsZXJzWyBcInRvdWNoc3RhcnRcIiBdIHx8IDApICsgMTtcclxuXHJcblx0XHRcdFx0aWYgKCBhY3RpdmVEb2NIYW5kbGVyc1sgXCJ0b3VjaHN0YXJ0XCIgXSA9PT0gMSApIHtcclxuXHRcdFx0XHRcdCRkb2N1bWVudC5iaW5kKCBcInRvdWNoc3RhcnRcIiwgaGFuZGxlVG91Y2hTdGFydCApXHJcblx0XHRcdFx0XHRcdC5iaW5kKCBcInRvdWNoZW5kXCIsIGhhbmRsZVRvdWNoRW5kIClcclxuXHJcblx0XHRcdFx0XHRcdC8vIE9uIHRvdWNoIHBsYXRmb3JtcywgdG91Y2hpbmcgdGhlIHNjcmVlbiBhbmQgdGhlbiBkcmFnZ2luZyB5b3VyIGZpbmdlclxyXG5cdFx0XHRcdFx0XHQvLyBjYXVzZXMgdGhlIHdpbmRvdyBjb250ZW50IHRvIHNjcm9sbCBhZnRlciBzb21lIGRpc3RhbmNlIHRocmVzaG9sZCBpc1xyXG5cdFx0XHRcdFx0XHQvLyBleGNlZWRlZC4gT24gdGhlc2UgcGxhdGZvcm1zLCBhIHNjcm9sbCBwcmV2ZW50cyBhIGNsaWNrIGV2ZW50IGZyb20gYmVpbmdcclxuXHRcdFx0XHRcdFx0Ly8gZGlzcGF0Y2hlZCwgYW5kIG9uIHNvbWUgcGxhdGZvcm1zLCBldmVuIHRoZSB0b3VjaGVuZCBpcyBzdXBwcmVzc2VkLiBUb1xyXG5cdFx0XHRcdFx0XHQvLyBtaW1pYyB0aGUgc3VwcHJlc3Npb24gb2YgdGhlIGNsaWNrIGV2ZW50LCB3ZSBuZWVkIHRvIHdhdGNoIGZvciBhIHNjcm9sbFxyXG5cdFx0XHRcdFx0XHQvLyBldmVudC4gVW5mb3J0dW5hdGVseSwgc29tZSBwbGF0Zm9ybXMgbGlrZSBpT1MgZG9uJ3QgZGlzcGF0Y2ggc2Nyb2xsXHJcblx0XHRcdFx0XHRcdC8vIGV2ZW50cyB1bnRpbCAqQUZURVIqIHRoZSB1c2VyIGxpZnRzIHRoZWlyIGZpbmdlciAodG91Y2hlbmQpLiBUaGlzIG1lYW5zXHJcblx0XHRcdFx0XHRcdC8vIHdlIG5lZWQgdG8gd2F0Y2ggYm90aCBzY3JvbGwgYW5kIHRvdWNobW92ZSBldmVudHMgdG8gZmlndXJlIG91dCB3aGV0aGVyXHJcblx0XHRcdFx0XHRcdC8vIG9yIG5vdCBhIHNjcm9sbCBoYXBwZW5lbnMgYmVmb3JlIHRoZSB0b3VjaGVuZCBldmVudCBpcyBmaXJlZC5cclxuXHJcblx0XHRcdFx0XHRcdC5iaW5kKCBcInRvdWNobW92ZVwiLCBoYW5kbGVUb3VjaE1vdmUgKVxyXG5cdFx0XHRcdFx0XHQuYmluZCggXCJzY3JvbGxcIiwgaGFuZGxlU2Nyb2xsICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHRcdHRlYXJkb3duOiBmdW5jdGlvbigvKiBkYXRhLCBuYW1lc3BhY2UgKi8pIHtcclxuXHRcdFx0Ly8gSWYgdGhpcyBpcyB0aGUgbGFzdCB2aXJ0dWFsIGJpbmRpbmcgZm9yIHRoaXMgZXZlbnRUeXBlLFxyXG5cdFx0XHQvLyByZW1vdmUgaXRzIGdsb2JhbCBoYW5kbGVyIGZyb20gdGhlIGRvY3VtZW50LlxyXG5cclxuXHRcdFx0LS1hY3RpdmVEb2NIYW5kbGVyc1sgZXZlbnRUeXBlIF07XHJcblxyXG5cdFx0XHRpZiAoICFhY3RpdmVEb2NIYW5kbGVyc1sgZXZlbnRUeXBlIF0gKSB7XHJcblx0XHRcdFx0JGRvY3VtZW50LnVuYmluZCggcmVhbFR5cGUsIG1vdXNlRXZlbnRDYWxsYmFjayApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoIGV2ZW50Q2FwdHVyZVN1cHBvcnRlZCApIHtcclxuXHRcdFx0XHQvLyBJZiB0aGlzIGlzIHRoZSBsYXN0IHZpcnR1YWwgbW91c2UgYmluZGluZyBpbiBleGlzdGVuY2UsXHJcblx0XHRcdFx0Ly8gcmVtb3ZlIG91ciBkb2N1bWVudCB0b3VjaHN0YXJ0IGxpc3RlbmVyLlxyXG5cclxuXHRcdFx0XHQtLWFjdGl2ZURvY0hhbmRsZXJzWyBcInRvdWNoc3RhcnRcIiBdO1xyXG5cclxuXHRcdFx0XHRpZiAoICFhY3RpdmVEb2NIYW5kbGVyc1sgXCJ0b3VjaHN0YXJ0XCIgXSApIHtcclxuXHRcdFx0XHRcdCRkb2N1bWVudC51bmJpbmQoIFwidG91Y2hzdGFydFwiLCBoYW5kbGVUb3VjaFN0YXJ0IClcclxuXHRcdFx0XHRcdFx0LnVuYmluZCggXCJ0b3VjaG1vdmVcIiwgaGFuZGxlVG91Y2hNb3ZlIClcclxuXHRcdFx0XHRcdFx0LnVuYmluZCggXCJ0b3VjaGVuZFwiLCBoYW5kbGVUb3VjaEVuZCApXHJcblx0XHRcdFx0XHRcdC51bmJpbmQoIFwic2Nyb2xsXCIsIGhhbmRsZVNjcm9sbCApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dmFyICR0aGlzID0gJCggdGhpcyApLFxyXG5cdFx0XHRcdGJpbmRpbmdzID0gJC5kYXRhKCB0aGlzLCBkYXRhUHJvcGVydHlOYW1lICk7XHJcblxyXG5cdFx0XHQvLyB0ZWFyZG93biBtYXkgYmUgY2FsbGVkIHdoZW4gYW4gZWxlbWVudCB3YXNcclxuXHRcdFx0Ly8gcmVtb3ZlZCBmcm9tIHRoZSBET00uIElmIHRoaXMgaXMgdGhlIGNhc2UsXHJcblx0XHRcdC8vIGpRdWVyeSBjb3JlIG1heSBoYXZlIGFscmVhZHkgc3RyaXBwZWQgdGhlIGVsZW1lbnRcclxuXHRcdFx0Ly8gb2YgYW55IGRhdGEgYmluZGluZ3Mgc28gd2UgbmVlZCB0byBjaGVjayBpdCBiZWZvcmVcclxuXHRcdFx0Ly8gdXNpbmcgaXQuXHJcblx0XHRcdGlmICggYmluZGluZ3MgKSB7XHJcblx0XHRcdFx0YmluZGluZ3NbIGV2ZW50VHlwZSBdID0gZmFsc2U7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIFVucmVnaXN0ZXIgdGhlIGR1bW15IGV2ZW50IGhhbmRsZXIuXHJcblxyXG5cdFx0XHQkdGhpcy51bmJpbmQoIHJlYWxUeXBlLCBkdW1teU1vdXNlSGFuZGxlciApO1xyXG5cclxuXHRcdFx0Ly8gSWYgdGhpcyBpcyB0aGUgbGFzdCB2aXJ0dWFsIG1vdXNlIGJpbmRpbmcgb24gdGhlXHJcblx0XHRcdC8vIGVsZW1lbnQsIHJlbW92ZSB0aGUgYmluZGluZyBkYXRhIGZyb20gdGhlIGVsZW1lbnQuXHJcblxyXG5cdFx0XHRpZiAoICFoYXNWaXJ0dWFsQmluZGluZ3MoIHRoaXMgKSApIHtcclxuXHRcdFx0XHQkdGhpcy5yZW1vdmVEYXRhKCBkYXRhUHJvcGVydHlOYW1lICk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9O1xyXG59XHJcblxyXG4vLyBFeHBvc2Ugb3VyIGN1c3RvbSBldmVudHMgdG8gdGhlIGpRdWVyeSBiaW5kL3VuYmluZCBtZWNoYW5pc20uXHJcblxyXG5mb3IgKCBpID0gMDsgaSA8IHZpcnR1YWxFdmVudE5hbWVzLmxlbmd0aDsgaSsrICkge1xyXG5cdCQuZXZlbnQuc3BlY2lhbFsgdmlydHVhbEV2ZW50TmFtZXNbIGkgXSBdID0gZ2V0U3BlY2lhbEV2ZW50T2JqZWN0KCB2aXJ0dWFsRXZlbnROYW1lc1sgaSBdICk7XHJcbn1cclxuXHJcbi8vIEFkZCBhIGNhcHR1cmUgY2xpY2sgaGFuZGxlciB0byBibG9jayBjbGlja3MuXHJcbi8vIE5vdGUgdGhhdCB3ZSByZXF1aXJlIGV2ZW50IGNhcHR1cmUgc3VwcG9ydCBmb3IgdGhpcyBzbyBpZiB0aGUgZGV2aWNlXHJcbi8vIGRvZXNuJ3Qgc3VwcG9ydCBpdCwgd2UgcHVudCBmb3Igbm93IGFuZCByZWx5IHNvbGVseSBvbiBtb3VzZSBldmVudHMuXHJcbmlmICggZXZlbnRDYXB0dXJlU3VwcG9ydGVkICkge1xyXG5cdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoIFwiY2xpY2tcIiwgZnVuY3Rpb24oIGUgKSB7XHJcblx0XHR2YXIgY250ID0gY2xpY2tCbG9ja0xpc3QubGVuZ3RoLFxyXG5cdFx0XHR0YXJnZXQgPSBlLnRhcmdldCxcclxuXHRcdFx0eCwgeSwgZWxlLCBpLCBvLCB0b3VjaElEO1xyXG5cclxuXHRcdGlmICggY250ICkge1xyXG5cdFx0XHR4ID0gZS5jbGllbnRYO1xyXG5cdFx0XHR5ID0gZS5jbGllbnRZO1xyXG5cdFx0XHR0aHJlc2hvbGQgPSAkLnZtb3VzZS5jbGlja0Rpc3RhbmNlVGhyZXNob2xkO1xyXG5cclxuXHRcdFx0Ly8gVGhlIGlkZWEgaGVyZSBpcyB0byBydW4gdGhyb3VnaCB0aGUgY2xpY2tCbG9ja0xpc3QgdG8gc2VlIGlmXHJcblx0XHRcdC8vIHRoZSBjdXJyZW50IGNsaWNrIGV2ZW50IGlzIGluIHRoZSBwcm94aW1pdHkgb2Ygb25lIG9mIG91clxyXG5cdFx0XHQvLyB2Y2xpY2sgZXZlbnRzIHRoYXQgaGFkIHByZXZlbnREZWZhdWx0KCkgY2FsbGVkIG9uIGl0LiBJZiB3ZSBmaW5kXHJcblx0XHRcdC8vIG9uZSwgdGhlbiB3ZSBibG9jayB0aGUgY2xpY2suXHJcblx0XHRcdC8vXHJcblx0XHRcdC8vIFdoeSBkbyB3ZSBoYXZlIHRvIHJlbHkgb24gcHJveGltaXR5P1xyXG5cdFx0XHQvL1xyXG5cdFx0XHQvLyBCZWNhdXNlIHRoZSB0YXJnZXQgb2YgdGhlIHRvdWNoIGV2ZW50IHRoYXQgdHJpZ2dlcmVkIHRoZSB2Y2xpY2tcclxuXHRcdFx0Ly8gY2FuIGJlIGRpZmZlcmVudCBmcm9tIHRoZSB0YXJnZXQgb2YgdGhlIGNsaWNrIGV2ZW50IHN5bnRoZXNpemVkXHJcblx0XHRcdC8vIGJ5IHRoZSBicm93c2VyLiBUaGUgdGFyZ2V0IG9mIGEgbW91c2UvY2xpY2sgZXZlbnQgdGhhdCBpcyBzeW50aGVzaXplZFxyXG5cdFx0XHQvLyBmcm9tIGEgdG91Y2ggZXZlbnQgc2VlbXMgdG8gYmUgaW1wbGVtZW50YXRpb24gc3BlY2lmaWMuIEZvciBleGFtcGxlLFxyXG5cdFx0XHQvLyBzb21lIGJyb3dzZXJzIHdpbGwgZmlyZSBtb3VzZS9jbGljayBldmVudHMgZm9yIGEgbGluayB0aGF0IGlzIG5lYXJcclxuXHRcdFx0Ly8gYSB0b3VjaCBldmVudCwgZXZlbiB0aG91Z2ggdGhlIHRhcmdldCBvZiB0aGUgdG91Y2hzdGFydC90b3VjaGVuZCBldmVudFxyXG5cdFx0XHQvLyBzYXlzIHRoZSB1c2VyIHRvdWNoZWQgb3V0c2lkZSB0aGUgbGluay4gQWxzbywgaXQgc2VlbXMgdGhhdCB3aXRoIG1vc3RcclxuXHRcdFx0Ly8gYnJvd3NlcnMsIHRoZSB0YXJnZXQgb2YgdGhlIG1vdXNlL2NsaWNrIGV2ZW50IGlzIG5vdCBjYWxjdWxhdGVkIHVudGlsIHRoZVxyXG5cdFx0XHQvLyB0aW1lIGl0IGlzIGRpc3BhdGNoZWQsIHNvIGlmIHlvdSByZXBsYWNlIGFuIGVsZW1lbnQgdGhhdCB5b3UgdG91Y2hlZFxyXG5cdFx0XHQvLyB3aXRoIGFub3RoZXIgZWxlbWVudCwgdGhlIHRhcmdldCBvZiB0aGUgbW91c2UvY2xpY2sgd2lsbCBiZSB0aGUgbmV3XHJcblx0XHRcdC8vIGVsZW1lbnQgdW5kZXJuZWF0aCB0aGF0IHBvaW50LlxyXG5cdFx0XHQvL1xyXG5cdFx0XHQvLyBBc2lkZSBmcm9tIHByb3hpbWl0eSwgd2UgYWxzbyBjaGVjayB0byBzZWUgaWYgdGhlIHRhcmdldCBhbmQgYW55XHJcblx0XHRcdC8vIG9mIGl0cyBhbmNlc3RvcnMgd2VyZSB0aGUgb25lcyB0aGF0IGJsb2NrZWQgYSBjbGljay4gVGhpcyBpcyBuZWNlc3NhcnlcclxuXHRcdFx0Ly8gYmVjYXVzZSBvZiB0aGUgc3RyYW5nZSBtb3VzZS9jbGljayB0YXJnZXQgY2FsY3VsYXRpb24gZG9uZSBpbiB0aGVcclxuXHRcdFx0Ly8gQW5kcm9pZCAyLjEgYnJvd3Nlciwgd2hlcmUgaWYgeW91IGNsaWNrIG9uIGFuIGVsZW1lbnQsIGFuZCB0aGVyZSBpcyBhXHJcblx0XHRcdC8vIG1vdXNlL2NsaWNrIGhhbmRsZXIgb24gb25lIG9mIGl0cyBhbmNlc3RvcnMsIHRoZSB0YXJnZXQgd2lsbCBiZSB0aGVcclxuXHRcdFx0Ly8gaW5uZXJtb3N0IGNoaWxkIG9mIHRoZSB0b3VjaGVkIGVsZW1lbnQsIGV2ZW4gaWYgdGhhdCBjaGlsZCBpcyBubyB3aGVyZVxyXG5cdFx0XHQvLyBuZWFyIHRoZSBwb2ludCBvZiB0b3VjaC5cclxuXHJcblx0XHRcdGVsZSA9IHRhcmdldDtcclxuXHJcblx0XHRcdHdoaWxlICggZWxlICkge1xyXG5cdFx0XHRcdGZvciAoIGkgPSAwOyBpIDwgY250OyBpKysgKSB7XHJcblx0XHRcdFx0XHRvID0gY2xpY2tCbG9ja0xpc3RbIGkgXTtcclxuXHRcdFx0XHRcdHRvdWNoSUQgPSAwO1xyXG5cclxuXHRcdFx0XHRcdGlmICggKCBlbGUgPT09IHRhcmdldCAmJiBNYXRoLmFicyggby54IC0geCApIDwgdGhyZXNob2xkICYmIE1hdGguYWJzKCBvLnkgLSB5ICkgPCB0aHJlc2hvbGQgKSB8fFxyXG5cdFx0XHRcdFx0XHRcdFx0JC5kYXRhKCBlbGUsIHRvdWNoVGFyZ2V0UHJvcGVydHlOYW1lICkgPT09IG8udG91Y2hJRCApIHtcclxuXHRcdFx0XHRcdFx0Ly8gWFhYOiBXZSBtYXkgd2FudCB0byBjb25zaWRlciByZW1vdmluZyBtYXRjaGVzIGZyb20gdGhlIGJsb2NrIGxpc3RcclxuXHRcdFx0XHRcdFx0Ly8gICAgICBpbnN0ZWFkIG9mIHdhaXRpbmcgZm9yIHRoZSByZXNldCB0aW1lciB0byBmaXJlLlxyXG5cdFx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0ZWxlID0gZWxlLnBhcmVudE5vZGU7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9LCB0cnVlKTtcclxufVxyXG59KSggalF1ZXJ5LCB3aW5kb3csIGRvY3VtZW50ICk7XHJcblxyXG5cclxuKGZ1bmN0aW9uKCAkLCB3aW5kb3csIHVuZGVmaW5lZCApIHtcclxuXHR2YXIgJGRvY3VtZW50ID0gJCggZG9jdW1lbnQgKSxcclxuXHRcdHN1cHBvcnRUb3VjaCA9ICQubW9iaWxlLnN1cHBvcnQudG91Y2gsXHJcblx0XHRzY3JvbGxFdmVudCA9IFwidG91Y2htb3ZlIHNjcm9sbFwiLFxyXG5cdFx0dG91Y2hTdGFydEV2ZW50ID0gc3VwcG9ydFRvdWNoID8gXCJ0b3VjaHN0YXJ0XCIgOiBcIm1vdXNlZG93blwiLFxyXG5cdFx0dG91Y2hTdG9wRXZlbnQgPSBzdXBwb3J0VG91Y2ggPyBcInRvdWNoZW5kXCIgOiBcIm1vdXNldXBcIixcclxuXHRcdHRvdWNoTW92ZUV2ZW50ID0gc3VwcG9ydFRvdWNoID8gXCJ0b3VjaG1vdmVcIiA6IFwibW91c2Vtb3ZlXCI7XHJcblxyXG5cdC8vIHNldHVwIG5ldyBldmVudCBzaG9ydGN1dHNcclxuXHQkLmVhY2goICggXCJ0b3VjaHN0YXJ0IHRvdWNobW92ZSB0b3VjaGVuZCBcIiArXHJcblx0XHRcInRhcCB0YXBob2xkIFwiICtcclxuXHRcdFwic3dpcGUgc3dpcGVsZWZ0IHN3aXBlcmlnaHQgXCIgK1xyXG5cdFx0XCJzY3JvbGxzdGFydCBzY3JvbGxzdG9wXCIgKS5zcGxpdCggXCIgXCIgKSwgZnVuY3Rpb24oIGksIG5hbWUgKSB7XHJcblxyXG5cdFx0JC5mblsgbmFtZSBdID0gZnVuY3Rpb24oIGZuICkge1xyXG5cdFx0XHRyZXR1cm4gZm4gPyB0aGlzLmJpbmQoIG5hbWUsIGZuICkgOiB0aGlzLnRyaWdnZXIoIG5hbWUgKTtcclxuXHRcdH07XHJcblxyXG5cdFx0Ly8galF1ZXJ5IDwgMS44XHJcblx0XHRpZiAoICQuYXR0ckZuICkge1xyXG5cdFx0XHQkLmF0dHJGblsgbmFtZSBdID0gdHJ1ZTtcclxuXHRcdH1cclxuXHR9KTtcclxuXHJcblx0ZnVuY3Rpb24gdHJpZ2dlckN1c3RvbUV2ZW50KCBvYmosIGV2ZW50VHlwZSwgZXZlbnQsIGJ1YmJsZSApIHtcclxuXHRcdHZhciBvcmlnaW5hbFR5cGUgPSBldmVudC50eXBlO1xyXG5cdFx0ZXZlbnQudHlwZSA9IGV2ZW50VHlwZTtcclxuXHRcdGlmICggYnViYmxlICkge1xyXG5cdFx0XHQkLmV2ZW50LnRyaWdnZXIoIGV2ZW50LCB1bmRlZmluZWQsIG9iaiApO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0JC5ldmVudC5kaXNwYXRjaC5jYWxsKCBvYmosIGV2ZW50ICk7XHJcblx0XHR9XHJcblx0XHRldmVudC50eXBlID0gb3JpZ2luYWxUeXBlO1xyXG5cdH1cclxuXHJcblx0Ly8gYWxzbyBoYW5kbGVzIHNjcm9sbHN0b3BcclxuXHQkLmV2ZW50LnNwZWNpYWwuc2Nyb2xsc3RhcnQgPSB7XHJcblxyXG5cdFx0ZW5hYmxlZDogdHJ1ZSxcclxuXHRcdHNldHVwOiBmdW5jdGlvbigpIHtcclxuXHJcblx0XHRcdHZhciB0aGlzT2JqZWN0ID0gdGhpcyxcclxuXHRcdFx0XHQkdGhpcyA9ICQoIHRoaXNPYmplY3QgKSxcclxuXHRcdFx0XHRzY3JvbGxpbmcsXHJcblx0XHRcdFx0dGltZXI7XHJcblxyXG5cdFx0XHRmdW5jdGlvbiB0cmlnZ2VyKCBldmVudCwgc3RhdGUgKSB7XHJcblx0XHRcdFx0c2Nyb2xsaW5nID0gc3RhdGU7XHJcblx0XHRcdFx0dHJpZ2dlckN1c3RvbUV2ZW50KCB0aGlzT2JqZWN0LCBzY3JvbGxpbmcgPyBcInNjcm9sbHN0YXJ0XCIgOiBcInNjcm9sbHN0b3BcIiwgZXZlbnQgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gaVBob25lIHRyaWdnZXJzIHNjcm9sbCBhZnRlciBhIHNtYWxsIGRlbGF5OyB1c2UgdG91Y2htb3ZlIGluc3RlYWRcclxuXHRcdFx0JHRoaXMuYmluZCggc2Nyb2xsRXZlbnQsIGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHJcblx0XHRcdFx0aWYgKCAhJC5ldmVudC5zcGVjaWFsLnNjcm9sbHN0YXJ0LmVuYWJsZWQgKSB7XHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRpZiAoICFzY3JvbGxpbmcgKSB7XHJcblx0XHRcdFx0XHR0cmlnZ2VyKCBldmVudCwgdHJ1ZSApO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Y2xlYXJUaW1lb3V0KCB0aW1lciApO1xyXG5cdFx0XHRcdHRpbWVyID0gc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHR0cmlnZ2VyKCBldmVudCwgZmFsc2UgKTtcclxuXHRcdFx0XHR9LCA1MCApO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0sXHJcblx0XHR0ZWFyZG93bjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdCQoIHRoaXMgKS51bmJpbmQoIHNjcm9sbEV2ZW50ICk7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0Ly8gYWxzbyBoYW5kbGVzIHRhcGhvbGRcclxuXHQkLmV2ZW50LnNwZWNpYWwudGFwID0ge1xyXG5cdFx0dGFwaG9sZFRocmVzaG9sZDogNzUwLFxyXG5cdFx0ZW1pdFRhcE9uVGFwaG9sZDogdHJ1ZSxcclxuXHRcdHNldHVwOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIHRoaXNPYmplY3QgPSB0aGlzLFxyXG5cdFx0XHRcdCR0aGlzID0gJCggdGhpc09iamVjdCApLFxyXG5cdFx0XHRcdGlzVGFwaG9sZCA9IGZhbHNlO1xyXG5cclxuXHRcdFx0JHRoaXMuYmluZCggXCJ2bW91c2Vkb3duXCIsIGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdFx0XHRpc1RhcGhvbGQgPSBmYWxzZTtcclxuXHRcdFx0XHRpZiAoIGV2ZW50LndoaWNoICYmIGV2ZW50LndoaWNoICE9PSAxICkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0dmFyIG9yaWdUYXJnZXQgPSBldmVudC50YXJnZXQsXHJcblx0XHRcdFx0XHR0aW1lcjtcclxuXHJcblx0XHRcdFx0ZnVuY3Rpb24gY2xlYXJUYXBUaW1lcigpIHtcclxuXHRcdFx0XHRcdGNsZWFyVGltZW91dCggdGltZXIgKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGZ1bmN0aW9uIGNsZWFyVGFwSGFuZGxlcnMoKSB7XHJcblx0XHRcdFx0XHRjbGVhclRhcFRpbWVyKCk7XHJcblxyXG5cdFx0XHRcdFx0JHRoaXMudW5iaW5kKCBcInZjbGlja1wiLCBjbGlja0hhbmRsZXIgKVxyXG5cdFx0XHRcdFx0XHQudW5iaW5kKCBcInZtb3VzZXVwXCIsIGNsZWFyVGFwVGltZXIgKTtcclxuXHRcdFx0XHRcdCRkb2N1bWVudC51bmJpbmQoIFwidm1vdXNlY2FuY2VsXCIsIGNsZWFyVGFwSGFuZGxlcnMgKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGZ1bmN0aW9uIGNsaWNrSGFuZGxlciggZXZlbnQgKSB7XHJcblx0XHRcdFx0XHRjbGVhclRhcEhhbmRsZXJzKCk7XHJcblxyXG5cdFx0XHRcdFx0Ly8gT05MWSB0cmlnZ2VyIGEgJ3RhcCcgZXZlbnQgaWYgdGhlIHN0YXJ0IHRhcmdldCBpc1xyXG5cdFx0XHRcdFx0Ly8gdGhlIHNhbWUgYXMgdGhlIHN0b3AgdGFyZ2V0LlxyXG5cdFx0XHRcdFx0aWYgKCAhaXNUYXBob2xkICYmIG9yaWdUYXJnZXQgPT09IGV2ZW50LnRhcmdldCApIHtcclxuXHRcdFx0XHRcdFx0dHJpZ2dlckN1c3RvbUV2ZW50KCB0aGlzT2JqZWN0LCBcInRhcFwiLCBldmVudCApO1xyXG5cdFx0XHRcdFx0fSBlbHNlIGlmICggaXNUYXBob2xkICkge1xyXG5cdFx0XHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0JHRoaXMuYmluZCggXCJ2bW91c2V1cFwiLCBjbGVhclRhcFRpbWVyIClcclxuXHRcdFx0XHRcdC5iaW5kKCBcInZjbGlja1wiLCBjbGlja0hhbmRsZXIgKTtcclxuXHRcdFx0XHQkZG9jdW1lbnQuYmluZCggXCJ2bW91c2VjYW5jZWxcIiwgY2xlYXJUYXBIYW5kbGVycyApO1xyXG5cclxuXHRcdFx0XHR0aW1lciA9IHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0aWYgKCAhJC5ldmVudC5zcGVjaWFsLnRhcC5lbWl0VGFwT25UYXBob2xkICkge1xyXG5cdFx0XHRcdFx0XHRpc1RhcGhvbGQgPSB0cnVlO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0dHJpZ2dlckN1c3RvbUV2ZW50KCB0aGlzT2JqZWN0LCBcInRhcGhvbGRcIiwgJC5FdmVudCggXCJ0YXBob2xkXCIsIHsgdGFyZ2V0OiBvcmlnVGFyZ2V0IH0gKSApO1xyXG5cdFx0XHRcdH0sICQuZXZlbnQuc3BlY2lhbC50YXAudGFwaG9sZFRocmVzaG9sZCApO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0sXHJcblx0XHR0ZWFyZG93bjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdCQoIHRoaXMgKS51bmJpbmQoIFwidm1vdXNlZG93blwiICkudW5iaW5kKCBcInZjbGlja1wiICkudW5iaW5kKCBcInZtb3VzZXVwXCIgKTtcclxuXHRcdFx0JGRvY3VtZW50LnVuYmluZCggXCJ2bW91c2VjYW5jZWxcIiApO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdC8vIEFsc28gaGFuZGxlcyBzd2lwZWxlZnQsIHN3aXBlcmlnaHRcclxuXHQkLmV2ZW50LnNwZWNpYWwuc3dpcGUgPSB7XHJcblxyXG5cdFx0Ly8gTW9yZSB0aGFuIHRoaXMgaG9yaXpvbnRhbCBkaXNwbGFjZW1lbnQsIGFuZCB3ZSB3aWxsIHN1cHByZXNzIHNjcm9sbGluZy5cclxuXHRcdHNjcm9sbFN1cHJlc3Npb25UaHJlc2hvbGQ6IDMwLFxyXG5cclxuXHRcdC8vIE1vcmUgdGltZSB0aGFuIHRoaXMsIGFuZCBpdCBpc24ndCBhIHN3aXBlLlxyXG5cdFx0ZHVyYXRpb25UaHJlc2hvbGQ6IDEwMDAsXHJcblxyXG5cdFx0Ly8gU3dpcGUgaG9yaXpvbnRhbCBkaXNwbGFjZW1lbnQgbXVzdCBiZSBtb3JlIHRoYW4gdGhpcy5cclxuXHRcdGhvcml6b250YWxEaXN0YW5jZVRocmVzaG9sZDogMzAsXHJcblxyXG5cdFx0Ly8gU3dpcGUgdmVydGljYWwgZGlzcGxhY2VtZW50IG11c3QgYmUgbGVzcyB0aGFuIHRoaXMuXHJcblx0XHR2ZXJ0aWNhbERpc3RhbmNlVGhyZXNob2xkOiAzMCxcclxuXHJcblx0XHRnZXRMb2NhdGlvbjogZnVuY3Rpb24gKCBldmVudCApIHtcclxuXHRcdFx0dmFyIHdpblBhZ2VYID0gd2luZG93LnBhZ2VYT2Zmc2V0LFxyXG5cdFx0XHRcdHdpblBhZ2VZID0gd2luZG93LnBhZ2VZT2Zmc2V0LFxyXG5cdFx0XHRcdHggPSBldmVudC5jbGllbnRYLFxyXG5cdFx0XHRcdHkgPSBldmVudC5jbGllbnRZO1xyXG5cclxuXHRcdFx0aWYgKCBldmVudC5wYWdlWSA9PT0gMCAmJiBNYXRoLmZsb29yKCB5ICkgPiBNYXRoLmZsb29yKCBldmVudC5wYWdlWSApIHx8XHJcblx0XHRcdFx0ZXZlbnQucGFnZVggPT09IDAgJiYgTWF0aC5mbG9vciggeCApID4gTWF0aC5mbG9vciggZXZlbnQucGFnZVggKSApIHtcclxuXHJcblx0XHRcdFx0Ly8gaU9TNCBjbGllbnRYL2NsaWVudFkgaGF2ZSB0aGUgdmFsdWUgdGhhdCBzaG91bGQgaGF2ZSBiZWVuXHJcblx0XHRcdFx0Ly8gaW4gcGFnZVgvcGFnZVkuIFdoaWxlIHBhZ2VYL3BhZ2UvIGhhdmUgdGhlIHZhbHVlIDBcclxuXHRcdFx0XHR4ID0geCAtIHdpblBhZ2VYO1xyXG5cdFx0XHRcdHkgPSB5IC0gd2luUGFnZVk7XHJcblx0XHRcdH0gZWxzZSBpZiAoIHkgPCAoIGV2ZW50LnBhZ2VZIC0gd2luUGFnZVkpIHx8IHggPCAoIGV2ZW50LnBhZ2VYIC0gd2luUGFnZVggKSApIHtcclxuXHJcblx0XHRcdFx0Ly8gU29tZSBBbmRyb2lkIGJyb3dzZXJzIGhhdmUgdG90YWxseSBib2d1cyB2YWx1ZXMgZm9yIGNsaWVudFgvWVxyXG5cdFx0XHRcdC8vIHdoZW4gc2Nyb2xsaW5nL3pvb21pbmcgYSBwYWdlLiBEZXRlY3RhYmxlIHNpbmNlIGNsaWVudFgvY2xpZW50WVxyXG5cdFx0XHRcdC8vIHNob3VsZCBuZXZlciBiZSBzbWFsbGVyIHRoYW4gcGFnZVgvcGFnZVkgbWludXMgcGFnZSBzY3JvbGxcclxuXHRcdFx0XHR4ID0gZXZlbnQucGFnZVggLSB3aW5QYWdlWDtcclxuXHRcdFx0XHR5ID0gZXZlbnQucGFnZVkgLSB3aW5QYWdlWTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cmV0dXJuIHtcclxuXHRcdFx0XHR4OiB4LFxyXG5cdFx0XHRcdHk6IHlcclxuXHRcdFx0fTtcclxuXHRcdH0sXHJcblxyXG5cdFx0c3RhcnQ6IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdFx0dmFyIGRhdGEgPSBldmVudC5vcmlnaW5hbEV2ZW50LnRvdWNoZXMgP1xyXG5cdFx0XHRcdFx0ZXZlbnQub3JpZ2luYWxFdmVudC50b3VjaGVzWyAwIF0gOiBldmVudCxcclxuXHRcdFx0XHRsb2NhdGlvbiA9ICQuZXZlbnQuc3BlY2lhbC5zd2lwZS5nZXRMb2NhdGlvbiggZGF0YSApO1xyXG5cdFx0XHRyZXR1cm4ge1xyXG5cdFx0XHRcdFx0XHR0aW1lOiAoIG5ldyBEYXRlKCkgKS5nZXRUaW1lKCksXHJcblx0XHRcdFx0XHRcdGNvb3JkczogWyBsb2NhdGlvbi54LCBsb2NhdGlvbi55IF0sXHJcblx0XHRcdFx0XHRcdG9yaWdpbjogJCggZXZlbnQudGFyZ2V0IClcclxuXHRcdFx0XHRcdH07XHJcblx0XHR9LFxyXG5cclxuXHRcdHN0b3A6IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdFx0dmFyIGRhdGEgPSBldmVudC5vcmlnaW5hbEV2ZW50LnRvdWNoZXMgP1xyXG5cdFx0XHRcdFx0ZXZlbnQub3JpZ2luYWxFdmVudC50b3VjaGVzWyAwIF0gOiBldmVudCxcclxuXHRcdFx0XHRsb2NhdGlvbiA9ICQuZXZlbnQuc3BlY2lhbC5zd2lwZS5nZXRMb2NhdGlvbiggZGF0YSApO1xyXG5cdFx0XHRyZXR1cm4ge1xyXG5cdFx0XHRcdFx0XHR0aW1lOiAoIG5ldyBEYXRlKCkgKS5nZXRUaW1lKCksXHJcblx0XHRcdFx0XHRcdGNvb3JkczogWyBsb2NhdGlvbi54LCBsb2NhdGlvbi55IF1cclxuXHRcdFx0XHRcdH07XHJcblx0XHR9LFxyXG5cclxuXHRcdGhhbmRsZVN3aXBlOiBmdW5jdGlvbiggc3RhcnQsIHN0b3AsIHRoaXNPYmplY3QsIG9yaWdUYXJnZXQgKSB7XHJcblx0XHRcdGlmICggc3RvcC50aW1lIC0gc3RhcnQudGltZSA8ICQuZXZlbnQuc3BlY2lhbC5zd2lwZS5kdXJhdGlvblRocmVzaG9sZCAmJlxyXG5cdFx0XHRcdE1hdGguYWJzKCBzdGFydC5jb29yZHNbIDAgXSAtIHN0b3AuY29vcmRzWyAwIF0gKSA+ICQuZXZlbnQuc3BlY2lhbC5zd2lwZS5ob3Jpem9udGFsRGlzdGFuY2VUaHJlc2hvbGQgJiZcclxuXHRcdFx0XHRNYXRoLmFicyggc3RhcnQuY29vcmRzWyAxIF0gLSBzdG9wLmNvb3Jkc1sgMSBdICkgPCAkLmV2ZW50LnNwZWNpYWwuc3dpcGUudmVydGljYWxEaXN0YW5jZVRocmVzaG9sZCApIHtcclxuXHRcdFx0XHR2YXIgZGlyZWN0aW9uID0gc3RhcnQuY29vcmRzWzBdID4gc3RvcC5jb29yZHNbIDAgXSA/IFwic3dpcGVsZWZ0XCIgOiBcInN3aXBlcmlnaHRcIjtcclxuXHJcblx0XHRcdFx0dHJpZ2dlckN1c3RvbUV2ZW50KCB0aGlzT2JqZWN0LCBcInN3aXBlXCIsICQuRXZlbnQoIFwic3dpcGVcIiwgeyB0YXJnZXQ6IG9yaWdUYXJnZXQsIHN3aXBlc3RhcnQ6IHN0YXJ0LCBzd2lwZXN0b3A6IHN0b3AgfSksIHRydWUgKTtcclxuXHRcdFx0XHR0cmlnZ2VyQ3VzdG9tRXZlbnQoIHRoaXNPYmplY3QsIGRpcmVjdGlvbiwkLkV2ZW50KCBkaXJlY3Rpb24sIHsgdGFyZ2V0OiBvcmlnVGFyZ2V0LCBzd2lwZXN0YXJ0OiBzdGFydCwgc3dpcGVzdG9wOiBzdG9wIH0gKSwgdHJ1ZSApO1xyXG5cdFx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHJcblx0XHR9LFxyXG5cclxuXHRcdC8vIFRoaXMgc2VydmVzIGFzIGEgZmxhZyB0byBlbnN1cmUgdGhhdCBhdCBtb3N0IG9uZSBzd2lwZSBldmVudCBldmVudCBpc1xyXG5cdFx0Ly8gaW4gd29yayBhdCBhbnkgZ2l2ZW4gdGltZVxyXG5cdFx0ZXZlbnRJblByb2dyZXNzOiBmYWxzZSxcclxuXHJcblx0XHRzZXR1cDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBldmVudHMsXHJcblx0XHRcdFx0dGhpc09iamVjdCA9IHRoaXMsXHJcblx0XHRcdFx0JHRoaXMgPSAkKCB0aGlzT2JqZWN0ICksXHJcblx0XHRcdFx0Y29udGV4dCA9IHt9O1xyXG5cclxuXHRcdFx0Ly8gUmV0cmlldmUgdGhlIGV2ZW50cyBkYXRhIGZvciB0aGlzIGVsZW1lbnQgYW5kIGFkZCB0aGUgc3dpcGUgY29udGV4dFxyXG5cdFx0XHRldmVudHMgPSAkLmRhdGEoIHRoaXMsIFwibW9iaWxlLWV2ZW50c1wiICk7XHJcblx0XHRcdGlmICggIWV2ZW50cyApIHtcclxuXHRcdFx0XHRldmVudHMgPSB7IGxlbmd0aDogMCB9O1xyXG5cdFx0XHRcdCQuZGF0YSggdGhpcywgXCJtb2JpbGUtZXZlbnRzXCIsIGV2ZW50cyApO1xyXG5cdFx0XHR9XHJcblx0XHRcdGV2ZW50cy5sZW5ndGgrKztcclxuXHRcdFx0ZXZlbnRzLnN3aXBlID0gY29udGV4dDtcclxuXHJcblx0XHRcdGNvbnRleHQuc3RhcnQgPSBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblxyXG5cdFx0XHRcdC8vIEJhaWwgaWYgd2UncmUgYWxyZWFkeSB3b3JraW5nIG9uIGEgc3dpcGUgZXZlbnRcclxuXHRcdFx0XHRpZiAoICQuZXZlbnQuc3BlY2lhbC5zd2lwZS5ldmVudEluUHJvZ3Jlc3MgKSB7XHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdCQuZXZlbnQuc3BlY2lhbC5zd2lwZS5ldmVudEluUHJvZ3Jlc3MgPSB0cnVlO1xyXG5cclxuXHRcdFx0XHR2YXIgc3RvcCxcclxuXHRcdFx0XHRcdHN0YXJ0ID0gJC5ldmVudC5zcGVjaWFsLnN3aXBlLnN0YXJ0KCBldmVudCApLFxyXG5cdFx0XHRcdFx0b3JpZ1RhcmdldCA9IGV2ZW50LnRhcmdldCxcclxuXHRcdFx0XHRcdGVtaXR0ZWQgPSBmYWxzZTtcclxuXHJcblx0XHRcdFx0Y29udGV4dC5tb3ZlID0gZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0XHRcdFx0aWYgKCAhc3RhcnQgfHwgZXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkgKSB7XHJcblx0XHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRzdG9wID0gJC5ldmVudC5zcGVjaWFsLnN3aXBlLnN0b3AoIGV2ZW50ICk7XHJcblx0XHRcdFx0XHRpZiAoICFlbWl0dGVkICkge1xyXG5cdFx0XHRcdFx0XHRlbWl0dGVkID0gJC5ldmVudC5zcGVjaWFsLnN3aXBlLmhhbmRsZVN3aXBlKCBzdGFydCwgc3RvcCwgdGhpc09iamVjdCwgb3JpZ1RhcmdldCApO1xyXG5cdFx0XHRcdFx0XHRpZiAoIGVtaXR0ZWQgKSB7XHJcblxyXG5cdFx0XHRcdFx0XHRcdC8vIFJlc2V0IHRoZSBjb250ZXh0IHRvIG1ha2Ugd2F5IGZvciB0aGUgbmV4dCBzd2lwZSBldmVudFxyXG5cdFx0XHRcdFx0XHRcdCQuZXZlbnQuc3BlY2lhbC5zd2lwZS5ldmVudEluUHJvZ3Jlc3MgPSBmYWxzZTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0Ly8gcHJldmVudCBzY3JvbGxpbmdcclxuXHRcdFx0XHRcdGlmICggTWF0aC5hYnMoIHN0YXJ0LmNvb3Jkc1sgMCBdIC0gc3RvcC5jb29yZHNbIDAgXSApID4gJC5ldmVudC5zcGVjaWFsLnN3aXBlLnNjcm9sbFN1cHJlc3Npb25UaHJlc2hvbGQgKSB7XHJcblx0XHRcdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fTtcclxuXHJcblx0XHRcdFx0Y29udGV4dC5zdG9wID0gZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRcdGVtaXR0ZWQgPSB0cnVlO1xyXG5cclxuXHRcdFx0XHRcdFx0Ly8gUmVzZXQgdGhlIGNvbnRleHQgdG8gbWFrZSB3YXkgZm9yIHRoZSBuZXh0IHN3aXBlIGV2ZW50XHJcblx0XHRcdFx0XHRcdCQuZXZlbnQuc3BlY2lhbC5zd2lwZS5ldmVudEluUHJvZ3Jlc3MgPSBmYWxzZTtcclxuXHRcdFx0XHRcdFx0JGRvY3VtZW50Lm9mZiggdG91Y2hNb3ZlRXZlbnQsIGNvbnRleHQubW92ZSApO1xyXG5cdFx0XHRcdFx0XHRjb250ZXh0Lm1vdmUgPSBudWxsO1xyXG5cdFx0XHRcdH07XHJcblxyXG5cdFx0XHRcdCRkb2N1bWVudC5vbiggdG91Y2hNb3ZlRXZlbnQsIGNvbnRleHQubW92ZSApXHJcblx0XHRcdFx0XHQub25lKCB0b3VjaFN0b3BFdmVudCwgY29udGV4dC5zdG9wICk7XHJcblx0XHRcdH07XHJcblx0XHRcdCR0aGlzLm9uKCB0b3VjaFN0YXJ0RXZlbnQsIGNvbnRleHQuc3RhcnQgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0dGVhcmRvd246IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgZXZlbnRzLCBjb250ZXh0O1xyXG5cclxuXHRcdFx0ZXZlbnRzID0gJC5kYXRhKCB0aGlzLCBcIm1vYmlsZS1ldmVudHNcIiApO1xyXG5cdFx0XHRpZiAoIGV2ZW50cyApIHtcclxuXHRcdFx0XHRjb250ZXh0ID0gZXZlbnRzLnN3aXBlO1xyXG5cdFx0XHRcdGRlbGV0ZSBldmVudHMuc3dpcGU7XHJcblx0XHRcdFx0ZXZlbnRzLmxlbmd0aC0tO1xyXG5cdFx0XHRcdGlmICggZXZlbnRzLmxlbmd0aCA9PT0gMCApIHtcclxuXHRcdFx0XHRcdCQucmVtb3ZlRGF0YSggdGhpcywgXCJtb2JpbGUtZXZlbnRzXCIgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICggY29udGV4dCApIHtcclxuXHRcdFx0XHRpZiAoIGNvbnRleHQuc3RhcnQgKSB7XHJcblx0XHRcdFx0XHQkKCB0aGlzICkub2ZmKCB0b3VjaFN0YXJ0RXZlbnQsIGNvbnRleHQuc3RhcnQgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWYgKCBjb250ZXh0Lm1vdmUgKSB7XHJcblx0XHRcdFx0XHQkZG9jdW1lbnQub2ZmKCB0b3VjaE1vdmVFdmVudCwgY29udGV4dC5tb3ZlICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmICggY29udGV4dC5zdG9wICkge1xyXG5cdFx0XHRcdFx0JGRvY3VtZW50Lm9mZiggdG91Y2hTdG9wRXZlbnQsIGNvbnRleHQuc3RvcCApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH07XHJcblx0JC5lYWNoKHtcclxuXHRcdHNjcm9sbHN0b3A6IFwic2Nyb2xsc3RhcnRcIixcclxuXHRcdHRhcGhvbGQ6IFwidGFwXCIsXHJcblx0XHRzd2lwZWxlZnQ6IFwic3dpcGUubGVmdFwiLFxyXG5cdFx0c3dpcGVyaWdodDogXCJzd2lwZS5yaWdodFwiXHJcblx0fSwgZnVuY3Rpb24oIGV2ZW50LCBzb3VyY2VFdmVudCApIHtcclxuXHJcblx0XHQkLmV2ZW50LnNwZWNpYWxbIGV2ZW50IF0gPSB7XHJcblx0XHRcdHNldHVwOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHQkKCB0aGlzICkuYmluZCggc291cmNlRXZlbnQsICQubm9vcCApO1xyXG5cdFx0XHR9LFxyXG5cdFx0XHR0ZWFyZG93bjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0JCggdGhpcyApLnVuYmluZCggc291cmNlRXZlbnQgKTtcclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHR9KTtcclxuXHJcbn0pKCBqUXVlcnksIHRoaXMgKTtcclxuXHJcblxyXG5cdC8vIHRocm90dGxlZCByZXNpemUgZXZlbnRcclxuXHQoZnVuY3Rpb24oICQgKSB7XHJcblx0XHQkLmV2ZW50LnNwZWNpYWwudGhyb3R0bGVkcmVzaXplID0ge1xyXG5cdFx0XHRzZXR1cDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0JCggdGhpcyApLmJpbmQoIFwicmVzaXplXCIsIGhhbmRsZXIgKTtcclxuXHRcdFx0fSxcclxuXHRcdFx0dGVhcmRvd246IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdCQoIHRoaXMgKS51bmJpbmQoIFwicmVzaXplXCIsIGhhbmRsZXIgKTtcclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHJcblx0XHR2YXIgdGhyb3R0bGUgPSAyNTAsXHJcblx0XHRcdGhhbmRsZXIgPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRjdXJyID0gKCBuZXcgRGF0ZSgpICkuZ2V0VGltZSgpO1xyXG5cdFx0XHRcdGRpZmYgPSBjdXJyIC0gbGFzdENhbGw7XHJcblxyXG5cdFx0XHRcdGlmICggZGlmZiA+PSB0aHJvdHRsZSApIHtcclxuXHJcblx0XHRcdFx0XHRsYXN0Q2FsbCA9IGN1cnI7XHJcblx0XHRcdFx0XHQkKCB0aGlzICkudHJpZ2dlciggXCJ0aHJvdHRsZWRyZXNpemVcIiApO1xyXG5cclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cclxuXHRcdFx0XHRcdGlmICggaGVsZENhbGwgKSB7XHJcblx0XHRcdFx0XHRcdGNsZWFyVGltZW91dCggaGVsZENhbGwgKTtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHQvLyBQcm9taXNlIGEgaGVsZCBjYWxsIHdpbGwgc3RpbGwgZXhlY3V0ZVxyXG5cdFx0XHRcdFx0aGVsZENhbGwgPSBzZXRUaW1lb3V0KCBoYW5kbGVyLCB0aHJvdHRsZSAtIGRpZmYgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sXHJcblx0XHRcdGxhc3RDYWxsID0gMCxcclxuXHRcdFx0aGVsZENhbGwsXHJcblx0XHRcdGN1cnIsXHJcblx0XHRcdGRpZmY7XHJcblx0fSkoIGpRdWVyeSApO1xyXG5cclxuXHJcbihmdW5jdGlvbiggJCwgd2luZG93ICkge1xyXG5cdHZhciB3aW4gPSAkKCB3aW5kb3cgKSxcclxuXHRcdGV2ZW50X25hbWUgPSBcIm9yaWVudGF0aW9uY2hhbmdlXCIsXHJcblx0XHRnZXRfb3JpZW50YXRpb24sXHJcblx0XHRsYXN0X29yaWVudGF0aW9uLFxyXG5cdFx0aW5pdGlhbF9vcmllbnRhdGlvbl9pc19sYW5kc2NhcGUsXHJcblx0XHRpbml0aWFsX29yaWVudGF0aW9uX2lzX2RlZmF1bHQsXHJcblx0XHRwb3J0cmFpdF9tYXAgPSB7IFwiMFwiOiB0cnVlLCBcIjE4MFwiOiB0cnVlIH0sXHJcblx0XHR3dywgd2gsIGxhbmRzY2FwZV90aHJlc2hvbGQ7XHJcblxyXG5cdC8vIEl0IHNlZW1zIHRoYXQgc29tZSBkZXZpY2UvYnJvd3NlciB2ZW5kb3JzIHVzZSB3aW5kb3cub3JpZW50YXRpb24gdmFsdWVzIDAgYW5kIDE4MCB0b1xyXG5cdC8vIGRlbm90ZSB0aGUgXCJkZWZhdWx0XCIgb3JpZW50YXRpb24uIEZvciBpT1MgZGV2aWNlcywgYW5kIG1vc3Qgb3RoZXIgc21hcnQtcGhvbmVzIHRlc3RlZCxcclxuXHQvLyB0aGUgZGVmYXVsdCBvcmllbnRhdGlvbiBpcyBhbHdheXMgXCJwb3J0cmFpdFwiLCBidXQgaW4gc29tZSBBbmRyb2lkIGFuZCBSSU0gYmFzZWQgdGFibGV0cyxcclxuXHQvLyB0aGUgZGVmYXVsdCBvcmllbnRhdGlvbiBpcyBcImxhbmRzY2FwZVwiLiBUaGUgZm9sbG93aW5nIGNvZGUgYXR0ZW1wdHMgdG8gdXNlIHRoZSB3aW5kb3dcclxuXHQvLyBkaW1lbnNpb25zIHRvIGZpZ3VyZSBvdXQgd2hhdCB0aGUgY3VycmVudCBvcmllbnRhdGlvbiBpcywgYW5kIHRoZW4gbWFrZXMgYWRqdXN0bWVudHNcclxuXHQvLyB0byB0aGUgdG8gdGhlIHBvcnRyYWl0X21hcCBpZiBuZWNlc3NhcnksIHNvIHRoYXQgd2UgY2FuIHByb3Blcmx5IGRlY29kZSB0aGVcclxuXHQvLyB3aW5kb3cub3JpZW50YXRpb24gdmFsdWUgd2hlbmV2ZXIgZ2V0X29yaWVudGF0aW9uKCkgaXMgY2FsbGVkLlxyXG5cdC8vXHJcblx0Ly8gTm90ZSB0aGF0IHdlIHVzZWQgdG8gdXNlIGEgbWVkaWEgcXVlcnkgdG8gZmlndXJlIG91dCB3aGF0IHRoZSBvcmllbnRhdGlvbiB0aGUgYnJvd3NlclxyXG5cdC8vIHRoaW5rcyBpdCBpcyBpbjpcclxuXHQvL1xyXG5cdC8vICAgICBpbml0aWFsX29yaWVudGF0aW9uX2lzX2xhbmRzY2FwZSA9ICQubW9iaWxlLm1lZGlhKFwiYWxsIGFuZCAob3JpZW50YXRpb246IGxhbmRzY2FwZSlcIik7XHJcblx0Ly9cclxuXHQvLyBidXQgdGhlcmUgd2FzIGFuIGlQaG9uZS9pUG9kIFRvdWNoIGJ1ZyBiZWdpbm5pbmcgd2l0aCBpT1MgNC4yLCB1cCB0aHJvdWdoIGlPUyA1LjEsXHJcblx0Ly8gd2hlcmUgdGhlIGJyb3dzZXIgKkFMV0FZUyogYXBwbGllZCB0aGUgbGFuZHNjYXBlIG1lZGlhIHF1ZXJ5LiBUaGlzIGJ1ZyBkb2VzIG5vdFxyXG5cdC8vIGhhcHBlbiBvbiBpUGFkLlxyXG5cclxuXHRpZiAoICQuc3VwcG9ydC5vcmllbnRhdGlvbiApIHtcclxuXHJcblx0XHQvLyBDaGVjayB0aGUgd2luZG93IHdpZHRoIGFuZCBoZWlnaHQgdG8gZmlndXJlIG91dCB3aGF0IHRoZSBjdXJyZW50IG9yaWVudGF0aW9uXHJcblx0XHQvLyBvZiB0aGUgZGV2aWNlIGlzIGF0IHRoaXMgbW9tZW50LiBOb3RlIHRoYXQgd2UndmUgaW5pdGlhbGl6ZWQgdGhlIHBvcnRyYWl0IG1hcFxyXG5cdFx0Ly8gdmFsdWVzIHRvIDAgYW5kIDE4MCwgKkFORCogd2UgcHVycG9zZWx5IGNoZWNrIGZvciBsYW5kc2NhcGUgc28gdGhhdCBpZiB3ZSBndWVzc1xyXG5cdFx0Ly8gd3JvbmcsICwgd2UgZGVmYXVsdCB0byB0aGUgYXNzdW1wdGlvbiB0aGF0IHBvcnRyYWl0IGlzIHRoZSBkZWZhdWx0IG9yaWVudGF0aW9uLlxyXG5cdFx0Ly8gV2UgdXNlIGEgdGhyZXNob2xkIGNoZWNrIGJlbG93IGJlY2F1c2Ugb24gc29tZSBwbGF0Zm9ybXMgbGlrZSBpT1MsIHRoZSBpUGhvbmVcclxuXHRcdC8vIGZvcm0tZmFjdG9yIGNhbiByZXBvcnQgYSBsYXJnZXIgd2lkdGggdGhhbiBoZWlnaHQgaWYgdGhlIHVzZXIgdHVybnMgb24gdGhlXHJcblx0XHQvLyBkZXZlbG9wZXIgY29uc29sZS4gVGhlIGFjdHVhbCB0aHJlc2hvbGQgdmFsdWUgaXMgc29tZXdoYXQgYXJiaXRyYXJ5LCB3ZSBqdXN0XHJcblx0XHQvLyBuZWVkIHRvIG1ha2Ugc3VyZSBpdCBpcyBsYXJnZSBlbm91Z2ggdG8gZXhjbHVkZSB0aGUgZGV2ZWxvcGVyIGNvbnNvbGUgY2FzZS5cclxuXHJcblx0XHR3dyA9IHdpbmRvdy5pbm5lcldpZHRoIHx8IHdpbi53aWR0aCgpO1xyXG5cdFx0d2ggPSB3aW5kb3cuaW5uZXJIZWlnaHQgfHwgd2luLmhlaWdodCgpO1xyXG5cdFx0bGFuZHNjYXBlX3RocmVzaG9sZCA9IDUwO1xyXG5cclxuXHRcdGluaXRpYWxfb3JpZW50YXRpb25faXNfbGFuZHNjYXBlID0gd3cgPiB3aCAmJiAoIHd3IC0gd2ggKSA+IGxhbmRzY2FwZV90aHJlc2hvbGQ7XHJcblxyXG5cdFx0Ly8gTm93IGNoZWNrIHRvIHNlZSBpZiB0aGUgY3VycmVudCB3aW5kb3cub3JpZW50YXRpb24gaXMgMCBvciAxODAuXHJcblx0XHRpbml0aWFsX29yaWVudGF0aW9uX2lzX2RlZmF1bHQgPSBwb3J0cmFpdF9tYXBbIHdpbmRvdy5vcmllbnRhdGlvbiBdO1xyXG5cclxuXHRcdC8vIElmIHRoZSBpbml0aWFsIG9yaWVudGF0aW9uIGlzIGxhbmRzY2FwZSwgYnV0IHdpbmRvdy5vcmllbnRhdGlvbiByZXBvcnRzIDAgb3IgMTgwLCAqT1IqXHJcblx0XHQvLyBpZiB0aGUgaW5pdGlhbCBvcmllbnRhdGlvbiBpcyBwb3J0cmFpdCwgYnV0IHdpbmRvdy5vcmllbnRhdGlvbiByZXBvcnRzIDkwIG9yIC05MCwgd2VcclxuXHRcdC8vIG5lZWQgdG8gZmxpcCBvdXIgcG9ydHJhaXRfbWFwIHZhbHVlcyBiZWNhdXNlIGxhbmRzY2FwZSBpcyB0aGUgZGVmYXVsdCBvcmllbnRhdGlvbiBmb3JcclxuXHRcdC8vIHRoaXMgZGV2aWNlL2Jyb3dzZXIuXHJcblx0XHRpZiAoICggaW5pdGlhbF9vcmllbnRhdGlvbl9pc19sYW5kc2NhcGUgJiYgaW5pdGlhbF9vcmllbnRhdGlvbl9pc19kZWZhdWx0ICkgfHwgKCAhaW5pdGlhbF9vcmllbnRhdGlvbl9pc19sYW5kc2NhcGUgJiYgIWluaXRpYWxfb3JpZW50YXRpb25faXNfZGVmYXVsdCApICkge1xyXG5cdFx0XHRwb3J0cmFpdF9tYXAgPSB7IFwiLTkwXCI6IHRydWUsIFwiOTBcIjogdHJ1ZSB9O1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0JC5ldmVudC5zcGVjaWFsLm9yaWVudGF0aW9uY2hhbmdlID0gJC5leHRlbmQoIHt9LCAkLmV2ZW50LnNwZWNpYWwub3JpZW50YXRpb25jaGFuZ2UsIHtcclxuXHRcdHNldHVwOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0Ly8gSWYgdGhlIGV2ZW50IGlzIHN1cHBvcnRlZCBuYXRpdmVseSwgcmV0dXJuIGZhbHNlIHNvIHRoYXQgalF1ZXJ5XHJcblx0XHRcdC8vIHdpbGwgYmluZCB0byB0aGUgZXZlbnQgdXNpbmcgRE9NIG1ldGhvZHMuXHJcblx0XHRcdGlmICggJC5zdXBwb3J0Lm9yaWVudGF0aW9uICYmICEkLmV2ZW50LnNwZWNpYWwub3JpZW50YXRpb25jaGFuZ2UuZGlzYWJsZWQgKSB7XHJcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBHZXQgdGhlIGN1cnJlbnQgb3JpZW50YXRpb24gdG8gYXZvaWQgaW5pdGlhbCBkb3VibGUtdHJpZ2dlcmluZy5cclxuXHRcdFx0bGFzdF9vcmllbnRhdGlvbiA9IGdldF9vcmllbnRhdGlvbigpO1xyXG5cclxuXHRcdFx0Ly8gQmVjYXVzZSB0aGUgb3JpZW50YXRpb25jaGFuZ2UgZXZlbnQgZG9lc24ndCBleGlzdCwgc2ltdWxhdGUgdGhlXHJcblx0XHRcdC8vIGV2ZW50IGJ5IHRlc3Rpbmcgd2luZG93IGRpbWVuc2lvbnMgb24gcmVzaXplLlxyXG5cdFx0XHR3aW4uYmluZCggXCJ0aHJvdHRsZWRyZXNpemVcIiwgaGFuZGxlciApO1xyXG5cdFx0fSxcclxuXHRcdHRlYXJkb3duOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0Ly8gSWYgdGhlIGV2ZW50IGlzIG5vdCBzdXBwb3J0ZWQgbmF0aXZlbHksIHJldHVybiBmYWxzZSBzbyB0aGF0XHJcblx0XHRcdC8vIGpRdWVyeSB3aWxsIHVuYmluZCB0aGUgZXZlbnQgdXNpbmcgRE9NIG1ldGhvZHMuXHJcblx0XHRcdGlmICggJC5zdXBwb3J0Lm9yaWVudGF0aW9uICYmICEkLmV2ZW50LnNwZWNpYWwub3JpZW50YXRpb25jaGFuZ2UuZGlzYWJsZWQgKSB7XHJcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBCZWNhdXNlIHRoZSBvcmllbnRhdGlvbmNoYW5nZSBldmVudCBkb2Vzbid0IGV4aXN0LCB1bmJpbmQgdGhlXHJcblx0XHRcdC8vIHJlc2l6ZSBldmVudCBoYW5kbGVyLlxyXG5cdFx0XHR3aW4udW5iaW5kKCBcInRocm90dGxlZHJlc2l6ZVwiLCBoYW5kbGVyICk7XHJcblx0XHR9LFxyXG5cdFx0YWRkOiBmdW5jdGlvbiggaGFuZGxlT2JqICkge1xyXG5cdFx0XHQvLyBTYXZlIGEgcmVmZXJlbmNlIHRvIHRoZSBib3VuZCBldmVudCBoYW5kbGVyLlxyXG5cdFx0XHR2YXIgb2xkX2hhbmRsZXIgPSBoYW5kbGVPYmouaGFuZGxlcjtcclxuXHJcblx0XHRcdGhhbmRsZU9iai5oYW5kbGVyID0gZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0XHRcdC8vIE1vZGlmeSBldmVudCBvYmplY3QsIGFkZGluZyB0aGUgLm9yaWVudGF0aW9uIHByb3BlcnR5LlxyXG5cdFx0XHRcdGV2ZW50Lm9yaWVudGF0aW9uID0gZ2V0X29yaWVudGF0aW9uKCk7XHJcblxyXG5cdFx0XHRcdC8vIENhbGwgdGhlIG9yaWdpbmFsbHktYm91bmQgZXZlbnQgaGFuZGxlciBhbmQgcmV0dXJuIGl0cyByZXN1bHQuXHJcblx0XHRcdFx0cmV0dXJuIG9sZF9oYW5kbGVyLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcclxuXHRcdFx0fTtcclxuXHRcdH1cclxuXHR9KTtcclxuXHJcblx0Ly8gSWYgdGhlIGV2ZW50IGlzIG5vdCBzdXBwb3J0ZWQgbmF0aXZlbHksIHRoaXMgaGFuZGxlciB3aWxsIGJlIGJvdW5kIHRvXHJcblx0Ly8gdGhlIHdpbmRvdyByZXNpemUgZXZlbnQgdG8gc2ltdWxhdGUgdGhlIG9yaWVudGF0aW9uY2hhbmdlIGV2ZW50LlxyXG5cdGZ1bmN0aW9uIGhhbmRsZXIoKSB7XHJcblx0XHQvLyBHZXQgdGhlIGN1cnJlbnQgb3JpZW50YXRpb24uXHJcblx0XHR2YXIgb3JpZW50YXRpb24gPSBnZXRfb3JpZW50YXRpb24oKTtcclxuXHJcblx0XHRpZiAoIG9yaWVudGF0aW9uICE9PSBsYXN0X29yaWVudGF0aW9uICkge1xyXG5cdFx0XHQvLyBUaGUgb3JpZW50YXRpb24gaGFzIGNoYW5nZWQsIHNvIHRyaWdnZXIgdGhlIG9yaWVudGF0aW9uY2hhbmdlIGV2ZW50LlxyXG5cdFx0XHRsYXN0X29yaWVudGF0aW9uID0gb3JpZW50YXRpb247XHJcblx0XHRcdHdpbi50cmlnZ2VyKCBldmVudF9uYW1lICk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvLyBHZXQgdGhlIGN1cnJlbnQgcGFnZSBvcmllbnRhdGlvbi4gVGhpcyBtZXRob2QgaXMgZXhwb3NlZCBwdWJsaWNseSwgc2hvdWxkIGl0XHJcblx0Ly8gYmUgbmVlZGVkLCBhcyBqUXVlcnkuZXZlbnQuc3BlY2lhbC5vcmllbnRhdGlvbmNoYW5nZS5vcmllbnRhdGlvbigpXHJcblx0JC5ldmVudC5zcGVjaWFsLm9yaWVudGF0aW9uY2hhbmdlLm9yaWVudGF0aW9uID0gZ2V0X29yaWVudGF0aW9uID0gZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgaXNQb3J0cmFpdCA9IHRydWUsIGVsZW0gPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XHJcblxyXG5cdFx0Ly8gcHJlZmVyIHdpbmRvdyBvcmllbnRhdGlvbiB0byB0aGUgY2FsY3VsYXRpb24gYmFzZWQgb24gc2NyZWVuc2l6ZSBhc1xyXG5cdFx0Ly8gdGhlIGFjdHVhbCBzY3JlZW4gcmVzaXplIHRha2VzIHBsYWNlIGJlZm9yZSBvciBhZnRlciB0aGUgb3JpZW50YXRpb24gY2hhbmdlIGV2ZW50XHJcblx0XHQvLyBoYXMgYmVlbiBmaXJlZCBkZXBlbmRpbmcgb24gaW1wbGVtZW50YXRpb24gKGVnIGFuZHJvaWQgMi4zIGlzIGJlZm9yZSwgaXBob25lIGFmdGVyKS5cclxuXHRcdC8vIE1vcmUgdGVzdGluZyBpcyByZXF1aXJlZCB0byBkZXRlcm1pbmUgaWYgYSBtb3JlIHJlbGlhYmxlIG1ldGhvZCBvZiBkZXRlcm1pbmluZyB0aGUgbmV3IHNjcmVlbnNpemVcclxuXHRcdC8vIGlzIHBvc3NpYmxlIHdoZW4gb3JpZW50YXRpb25jaGFuZ2UgaXMgZmlyZWQuIChlZywgdXNlIG1lZGlhIHF1ZXJpZXMgKyBlbGVtZW50ICsgb3BhY2l0eSlcclxuXHRcdGlmICggJC5zdXBwb3J0Lm9yaWVudGF0aW9uICkge1xyXG5cdFx0XHQvLyBpZiB0aGUgd2luZG93IG9yaWVudGF0aW9uIHJlZ2lzdGVycyBhcyAwIG9yIDE4MCBkZWdyZWVzIHJlcG9ydFxyXG5cdFx0XHQvLyBwb3J0cmFpdCwgb3RoZXJ3aXNlIGxhbmRzY2FwZVxyXG5cdFx0XHRpc1BvcnRyYWl0ID0gcG9ydHJhaXRfbWFwWyB3aW5kb3cub3JpZW50YXRpb24gXTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGlzUG9ydHJhaXQgPSBlbGVtICYmIGVsZW0uY2xpZW50V2lkdGggLyBlbGVtLmNsaWVudEhlaWdodCA8IDEuMTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gaXNQb3J0cmFpdCA/IFwicG9ydHJhaXRcIiA6IFwibGFuZHNjYXBlXCI7XHJcblx0fTtcclxuXHJcblx0JC5mblsgZXZlbnRfbmFtZSBdID0gZnVuY3Rpb24oIGZuICkge1xyXG5cdFx0cmV0dXJuIGZuID8gdGhpcy5iaW5kKCBldmVudF9uYW1lLCBmbiApIDogdGhpcy50cmlnZ2VyKCBldmVudF9uYW1lICk7XHJcblx0fTtcclxuXHJcblx0Ly8galF1ZXJ5IDwgMS44XHJcblx0aWYgKCAkLmF0dHJGbiApIHtcclxuXHRcdCQuYXR0ckZuWyBldmVudF9uYW1lIF0gPSB0cnVlO1xyXG5cdH1cclxuXHJcbn0oIGpRdWVyeSwgdGhpcyApKTtcclxuXHJcblxyXG5cclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxuXHQvLyBleGlzdGluZyBiYXNlIHRhZz9cclxuXHR2YXIgYmFzZUVsZW1lbnQgPSAkKCBcImhlYWRcIiApLmNoaWxkcmVuKCBcImJhc2VcIiApLFxyXG5cclxuXHQvLyBiYXNlIGVsZW1lbnQgbWFuYWdlbWVudCwgZGVmaW5lZCBkZXBlbmRpbmcgb24gZHluYW1pYyBiYXNlIHRhZyBzdXBwb3J0XHJcblx0Ly8gVE9ETyBtb3ZlIHRvIGV4dGVybmFsIHdpZGdldFxyXG5cdGJhc2UgPSB7XHJcblxyXG5cdFx0Ly8gZGVmaW5lIGJhc2UgZWxlbWVudCwgZm9yIHVzZSBpbiByb3V0aW5nIGFzc2V0IHVybHMgdGhhdCBhcmUgcmVmZXJlbmNlZFxyXG5cdFx0Ly8gaW4gQWpheC1yZXF1ZXN0ZWQgbWFya3VwXHJcblx0XHRlbGVtZW50OiAoIGJhc2VFbGVtZW50Lmxlbmd0aCA/IGJhc2VFbGVtZW50IDpcclxuXHRcdFx0JCggXCI8YmFzZT5cIiwgeyBocmVmOiAkLm1vYmlsZS5wYXRoLmRvY3VtZW50QmFzZS5ocmVmTm9IYXNoIH0gKS5wcmVwZW5kVG8oICQoIFwiaGVhZFwiICkgKSApLFxyXG5cclxuXHRcdGxpbmtTZWxlY3RvcjogXCJbc3JjXSwgbGlua1tocmVmXSwgYVtyZWw9J2V4dGVybmFsJ10sIDpqcW1EYXRhKGFqYXg9J2ZhbHNlJyksIGFbdGFyZ2V0XVwiLFxyXG5cclxuXHRcdC8vIHNldCB0aGUgZ2VuZXJhdGVkIEJBU0UgZWxlbWVudCdzIGhyZWYgdG8gYSBuZXcgcGFnZSdzIGJhc2UgcGF0aFxyXG5cdFx0c2V0OiBmdW5jdGlvbiggaHJlZiApIHtcclxuXHJcblx0XHRcdC8vIHdlIHNob3VsZCBkbyBub3RoaW5nIGlmIHRoZSB1c2VyIHdhbnRzIHRvIG1hbmFnZSB0aGVpciB1cmwgYmFzZVxyXG5cdFx0XHQvLyBtYW51YWxseVxyXG5cdFx0XHRpZiAoICEkLm1vYmlsZS5keW5hbWljQmFzZUVuYWJsZWQgKSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyB3ZSBzaG91bGQgdXNlIHRoZSBiYXNlIHRhZyBpZiB3ZSBjYW4gbWFuaXB1bGF0ZSBpdCBkeW5hbWljYWxseVxyXG5cdFx0XHRpZiAoICQuc3VwcG9ydC5keW5hbWljQmFzZVRhZyApIHtcclxuXHRcdFx0XHRiYXNlLmVsZW1lbnQuYXR0ciggXCJocmVmXCIsXHJcblx0XHRcdFx0XHQkLm1vYmlsZS5wYXRoLm1ha2VVcmxBYnNvbHV0ZSggaHJlZiwgJC5tb2JpbGUucGF0aC5kb2N1bWVudEJhc2UgKSApO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHRcdHJld3JpdGU6IGZ1bmN0aW9uKCBocmVmLCBwYWdlICkge1xyXG5cdFx0XHR2YXIgbmV3UGF0aCA9ICQubW9iaWxlLnBhdGguZ2V0KCBocmVmICk7XHJcblxyXG5cdFx0XHRwYWdlLmZpbmQoIGJhc2UubGlua1NlbGVjdG9yICkuZWFjaChmdW5jdGlvbiggaSwgbGluayApIHtcclxuXHRcdFx0XHR2YXIgdGhpc0F0dHIgPSAkKCBsaW5rICkuaXMoIFwiW2hyZWZdXCIgKSA/IFwiaHJlZlwiIDpcclxuXHRcdFx0XHRcdCQoIGxpbmsgKS5pcyggXCJbc3JjXVwiICkgPyBcInNyY1wiIDogXCJhY3Rpb25cIixcclxuXHRcdFx0XHR0aGVMb2NhdGlvbiA9ICQubW9iaWxlLnBhdGgucGFyc2VMb2NhdGlvbigpLFxyXG5cdFx0XHRcdHRoaXNVcmwgPSAkKCBsaW5rICkuYXR0ciggdGhpc0F0dHIgKTtcclxuXHJcblx0XHRcdFx0Ly8gWFhYX2pibGFzOiBXZSBuZWVkIHRvIGZpeCB0aGlzIHNvIHRoYXQgaXQgcmVtb3ZlcyB0aGUgZG9jdW1lbnRcclxuXHRcdFx0XHQvLyAgICAgICAgICAgIGJhc2UgVVJMLCBhbmQgdGhlbiBwcmVwZW5kcyB3aXRoIHRoZSBuZXcgcGFnZSBVUkwuXHJcblx0XHRcdFx0Ly8gaWYgZnVsbCBwYXRoIGV4aXN0cyBhbmQgaXMgc2FtZSwgY2hvcCBpdCAtIGhlbHBzIElFIG91dFxyXG5cdFx0XHRcdHRoaXNVcmwgPSB0aGlzVXJsLnJlcGxhY2UoIHRoZUxvY2F0aW9uLnByb3RvY29sICsgdGhlTG9jYXRpb24uZG91YmxlU2xhc2ggK1xyXG5cdFx0XHRcdFx0dGhlTG9jYXRpb24uaG9zdCArIHRoZUxvY2F0aW9uLnBhdGhuYW1lLCBcIlwiICk7XHJcblxyXG5cdFx0XHRcdGlmICggIS9eKFxcdys6fCN8XFwvKS8udGVzdCggdGhpc1VybCApICkge1xyXG5cdFx0XHRcdFx0JCggbGluayApLmF0dHIoIHRoaXNBdHRyLCBuZXdQYXRoICsgdGhpc1VybCApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vIHNldCB0aGUgZ2VuZXJhdGVkIEJBU0UgZWxlbWVudCdzIGhyZWYgdG8gYSBuZXcgcGFnZSdzIGJhc2UgcGF0aFxyXG5cdFx0cmVzZXQ6IGZ1bmN0aW9uKC8qIGhyZWYgKi8pIHtcclxuXHRcdFx0YmFzZS5lbGVtZW50LmF0dHIoIFwiaHJlZlwiLCAkLm1vYmlsZS5wYXRoLmRvY3VtZW50QmFzZS5ocmVmTm9TZWFyY2ggKTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHQkLm1vYmlsZS5iYXNlID0gYmFzZTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuJC5tb2JpbGUud2lkZ2V0cyA9IHt9O1xyXG5cclxudmFyIG9yaWdpbmFsV2lkZ2V0ID0gJC53aWRnZXQsXHJcblxyXG5cdC8vIFJlY29yZCB0aGUgb3JpZ2luYWwsIG5vbi1tb2JpbGVpbml0LW1vZGlmaWVkIHZlcnNpb24gb2YgJC5tb2JpbGUua2VlcE5hdGl2ZVxyXG5cdC8vIHNvIHdlIGNhbiBsYXRlciBkZXRlcm1pbmUgd2hldGhlciBzb21lb25lIGhhcyBtb2RpZmllZCAkLm1vYmlsZS5rZWVwTmF0aXZlXHJcblx0a2VlcE5hdGl2ZUZhY3RvcnlEZWZhdWx0ID0gJC5tb2JpbGUua2VlcE5hdGl2ZTtcclxuXHJcbiQud2lkZ2V0ID0gKGZ1bmN0aW9uKCBvcmlnICkge1xyXG5cdHJldHVybiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBjb25zdHJ1Y3RvciA9IG9yaWcuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApLFxyXG5cdFx0XHRuYW1lID0gY29uc3RydWN0b3IucHJvdG90eXBlLndpZGdldE5hbWU7XHJcblxyXG5cdFx0Y29uc3RydWN0b3IuaW5pdFNlbGVjdG9yID0gKCAoIGNvbnN0cnVjdG9yLnByb3RvdHlwZS5pbml0U2VsZWN0b3IgIT09IHVuZGVmaW5lZCApID9cclxuXHRcdFx0Y29uc3RydWN0b3IucHJvdG90eXBlLmluaXRTZWxlY3RvciA6IFwiOmpxbURhdGEocm9sZT0nXCIgKyBuYW1lICsgXCInKVwiICk7XHJcblxyXG5cdFx0JC5tb2JpbGUud2lkZ2V0c1sgbmFtZSBdID0gY29uc3RydWN0b3I7XHJcblxyXG5cdFx0cmV0dXJuIGNvbnN0cnVjdG9yO1xyXG5cdH07XHJcbn0pKCAkLndpZGdldCApO1xyXG5cclxuLy8gTWFrZSBzdXJlICQud2lkZ2V0IHN0aWxsIGhhcyBicmlkZ2UgYW5kIGV4dGVuZCBtZXRob2RzXHJcbiQuZXh0ZW5kKCAkLndpZGdldCwgb3JpZ2luYWxXaWRnZXQgKTtcclxuXHJcbi8vIEZvciBiYWNrY29tcGF0IHJlbW92ZSBpbiAxLjVcclxuJC5tb2JpbGUuZG9jdW1lbnQub24oIFwiY3JlYXRlXCIsIGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHQkKCBldmVudC50YXJnZXQgKS5lbmhhbmNlV2l0aGluKCk7XHJcbn0pO1xyXG5cclxuJC53aWRnZXQoIFwibW9iaWxlLnBhZ2VcIiwge1xyXG5cdG9wdGlvbnM6IHtcclxuXHRcdHRoZW1lOiBcImFcIixcclxuXHRcdGRvbUNhY2hlOiBmYWxzZSxcclxuXHJcblx0XHQvLyBEZXByZWNhdGVkIGluIDEuNCByZW1vdmUgaW4gMS41XHJcblx0XHRrZWVwTmF0aXZlRGVmYXVsdDogJC5tb2JpbGUua2VlcE5hdGl2ZSxcclxuXHJcblx0XHQvLyBEZXByZWNhdGVkIGluIDEuNCByZW1vdmUgaW4gMS41XHJcblx0XHRjb250ZW50VGhlbWU6IG51bGwsXHJcblx0XHRlbmhhbmNlZDogZmFsc2VcclxuXHR9LFxyXG5cclxuXHQvLyBERVBSRUNBVEVEIGZvciA+IDEuNFxyXG5cdC8vIFRPRE8gcmVtb3ZlIGF0IDEuNVxyXG5cdF9jcmVhdGVXaWRnZXQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0JC5XaWRnZXQucHJvdG90eXBlLl9jcmVhdGVXaWRnZXQuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xyXG5cdFx0dGhpcy5fdHJpZ2dlciggXCJpbml0XCIgKTtcclxuXHR9LFxyXG5cclxuXHRfY3JlYXRlOiBmdW5jdGlvbigpIHtcclxuXHRcdC8vIElmIGZhbHNlIGlzIHJldHVybmVkIGJ5IHRoZSBjYWxsYmFja3MgZG8gbm90IGNyZWF0ZSB0aGUgcGFnZVxyXG5cdFx0aWYgKCB0aGlzLl90cmlnZ2VyKCBcImJlZm9yZWNyZWF0ZVwiICkgPT09IGZhbHNlICkge1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCAhdGhpcy5vcHRpb25zLmVuaGFuY2VkICkge1xyXG5cdFx0XHR0aGlzLl9lbmhhbmNlKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5fb24oIHRoaXMuZWxlbWVudCwge1xyXG5cdFx0XHRwYWdlYmVmb3JlaGlkZTogXCJyZW1vdmVDb250YWluZXJCYWNrZ3JvdW5kXCIsXHJcblx0XHRcdHBhZ2ViZWZvcmVzaG93OiBcIl9oYW5kbGVQYWdlQmVmb3JlU2hvd1wiXHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLmVsZW1lbnQuZW5oYW5jZVdpdGhpbigpO1xyXG5cdFx0Ly8gRGlhbG9nIHdpZGdldCBpcyBkZXByZWNhdGVkIGluIDEuNCByZW1vdmUgdGhpcyBpbiAxLjVcclxuXHRcdGlmICggJC5tb2JpbGUuZ2V0QXR0cmlidXRlKCB0aGlzLmVsZW1lbnRbMF0sIFwicm9sZVwiICkgPT09IFwiZGlhbG9nXCIgJiYgJC5tb2JpbGUuZGlhbG9nICkge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQuZGlhbG9nKCk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X2VuaGFuY2U6IGZ1bmN0aW9uICgpIHtcclxuXHRcdHZhciBhdHRyUHJlZml4ID0gXCJkYXRhLVwiICsgJC5tb2JpbGUubnMsXHJcblx0XHRcdHNlbGYgPSB0aGlzO1xyXG5cclxuXHRcdGlmICggdGhpcy5vcHRpb25zLnJvbGUgKSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudC5hdHRyKCBcImRhdGEtXCIgKyAkLm1vYmlsZS5ucyArIFwicm9sZVwiLCB0aGlzLm9wdGlvbnMucm9sZSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuZWxlbWVudFxyXG5cdFx0XHQuYXR0ciggXCJ0YWJpbmRleFwiLCBcIjBcIiApXHJcblx0XHRcdC5hZGRDbGFzcyggXCJ1aS1wYWdlIHVpLXBhZ2UtdGhlbWUtXCIgKyB0aGlzLm9wdGlvbnMudGhlbWUgKTtcclxuXHJcblx0XHQvLyBNYW5pcHVsYXRpb24gb2YgY29udGVudCBvcyBEZXByZWNhdGVkIGFzIG9mIDEuNCByZW1vdmUgaW4gMS41XHJcblx0XHR0aGlzLmVsZW1lbnQuZmluZCggXCJbXCIgKyBhdHRyUHJlZml4ICsgXCJyb2xlPSdjb250ZW50J11cIiApLmVhY2goIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgJHRoaXMgPSAkKCB0aGlzICksXHJcblx0XHRcdFx0dGhlbWUgPSB0aGlzLmdldEF0dHJpYnV0ZSggYXR0clByZWZpeCArIFwidGhlbWVcIiApIHx8IHVuZGVmaW5lZDtcclxuXHRcdFx0XHRzZWxmLm9wdGlvbnMuY29udGVudFRoZW1lID0gdGhlbWUgfHwgc2VsZi5vcHRpb25zLmNvbnRlbnRUaGVtZSB8fCAoIHNlbGYub3B0aW9ucy5kaWFsb2cgJiYgc2VsZi5vcHRpb25zLnRoZW1lICkgfHwgKCBzZWxmLmVsZW1lbnQuanFtRGF0YShcInJvbGVcIikgPT09IFwiZGlhbG9nXCIgJiYgIHNlbGYub3B0aW9ucy50aGVtZSApO1xyXG5cdFx0XHRcdCR0aGlzLmFkZENsYXNzKCBcInVpLWNvbnRlbnRcIiApO1xyXG5cdFx0XHRcdGlmICggc2VsZi5vcHRpb25zLmNvbnRlbnRUaGVtZSApIHtcclxuXHRcdFx0XHRcdCR0aGlzLmFkZENsYXNzKCBcInVpLWJvZHktXCIgKyAoIHNlbGYub3B0aW9ucy5jb250ZW50VGhlbWUgKSApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQvLyBBZGQgQVJJQSByb2xlXHJcblx0XHRcdFx0JHRoaXMuYXR0ciggXCJyb2xlXCIsIFwibWFpblwiICkuYWRkQ2xhc3MoIFwidWktY29udGVudFwiICk7XHJcblx0XHR9KTtcclxuXHR9LFxyXG5cclxuXHRiaW5kUmVtb3ZlOiBmdW5jdGlvbiggY2FsbGJhY2sgKSB7XHJcblx0XHR2YXIgcGFnZSA9IHRoaXMuZWxlbWVudDtcclxuXHJcblx0XHQvLyB3aGVuIGRvbSBjYWNoaW5nIGlzIG5vdCBlbmFibGVkIG9yIHRoZSBwYWdlIGlzIGVtYmVkZGVkIGJpbmQgdG8gcmVtb3ZlIHRoZSBwYWdlIG9uIGhpZGVcclxuXHRcdGlmICggIXBhZ2UuZGF0YSggXCJtb2JpbGUtcGFnZVwiICkub3B0aW9ucy5kb21DYWNoZSAmJlxyXG5cdFx0XHRwYWdlLmlzKCBcIjpqcW1EYXRhKGV4dGVybmFsLXBhZ2U9J3RydWUnKVwiICkgKSB7XHJcblxyXG5cdFx0XHQvLyBUT0RPIHVzZSBfb24gLSB0aGF0IGlzLCBzb3J0IG91dCB3aHkgaXQgZG9lc24ndCB3b3JrIGluIHRoaXMgY2FzZVxyXG5cdFx0XHRwYWdlLmJpbmQoIFwicGFnZWhpZGUucmVtb3ZlXCIsIGNhbGxiYWNrIHx8IGZ1bmN0aW9uKCBlLCBkYXRhICkge1xyXG5cclxuXHRcdFx0XHQvL2NoZWNrIGlmIHRoaXMgaXMgYSBzYW1lIHBhZ2UgdHJhbnNpdGlvbiBhbmQgaWYgc28gZG9uJ3QgcmVtb3ZlIHRoZSBwYWdlXHJcblx0XHRcdFx0aWYoICFkYXRhLnNhbWVQYWdlICl7XHJcblx0XHRcdFx0XHR2YXIgJHRoaXMgPSAkKCB0aGlzICksXHJcblx0XHRcdFx0XHRcdHByRXZlbnQgPSBuZXcgJC5FdmVudCggXCJwYWdlcmVtb3ZlXCIgKTtcclxuXHJcblx0XHRcdFx0XHQkdGhpcy50cmlnZ2VyKCBwckV2ZW50ICk7XHJcblxyXG5cdFx0XHRcdFx0aWYgKCAhcHJFdmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSApIHtcclxuXHRcdFx0XHRcdFx0JHRoaXMucmVtb3ZlV2l0aERlcGVuZGVudHMoKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9zZXRPcHRpb25zOiBmdW5jdGlvbiggbyApIHtcclxuXHRcdGlmICggby50aGVtZSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3MoIFwidWktcGFnZS10aGVtZS1cIiArIHRoaXMub3B0aW9ucy50aGVtZSApLmFkZENsYXNzKCBcInVpLXBhZ2UtdGhlbWUtXCIgKyBvLnRoZW1lICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBvLmNvbnRlbnRUaGVtZSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQuZmluZCggXCJbZGF0YS1cIiArICQubW9iaWxlLm5zICsgXCI9J2NvbnRlbnQnXVwiICkucmVtb3ZlQ2xhc3MoIFwidWktYm9keS1cIiArIHRoaXMub3B0aW9ucy5jb250ZW50VGhlbWUgKVxyXG5cdFx0XHRcdC5hZGRDbGFzcyggXCJ1aS1ib2R5LVwiICsgby5jb250ZW50VGhlbWUgKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfaGFuZGxlUGFnZUJlZm9yZVNob3c6IGZ1bmN0aW9uKC8qIGUgKi8pIHtcclxuXHRcdHRoaXMuc2V0Q29udGFpbmVyQmFja2dyb3VuZCgpO1xyXG5cdH0sXHJcblx0Ly8gRGVwcmVjYXRlZCBpbiAxLjQgcmVtb3ZlIGluIDEuNVxyXG5cdHJlbW92ZUNvbnRhaW5lckJhY2tncm91bmQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5lbGVtZW50LmNsb3Nlc3QoIFwiOm1vYmlsZS1wYWdlY29udGFpbmVyXCIgKS5wYWdlY29udGFpbmVyKHsgXCJ0aGVtZVwiOiBcIm5vbmVcIiB9KTtcclxuXHR9LFxyXG5cdC8vIERlcHJlY2F0ZWQgaW4gMS40IHJlbW92ZSBpbiAxLjVcclxuXHQvLyBzZXQgdGhlIHBhZ2UgY29udGFpbmVyIGJhY2tncm91bmQgdG8gdGhlIHBhZ2UgdGhlbWVcclxuXHRzZXRDb250YWluZXJCYWNrZ3JvdW5kOiBmdW5jdGlvbiggdGhlbWUgKSB7XHJcblx0XHR0aGlzLmVsZW1lbnQucGFyZW50KCkucGFnZWNvbnRhaW5lciggeyBcInRoZW1lXCI6IHRoZW1lIHx8IHRoaXMub3B0aW9ucy50aGVtZSB9ICk7XHJcblx0fSxcclxuXHQvLyBEZXByZWNhdGVkIGluIDEuNCByZW1vdmUgaW4gMS41XHJcblx0a2VlcE5hdGl2ZVNlbGVjdG9yOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zLFxyXG5cdFx0XHRrZWVwTmF0aXZlID0gJC50cmltKCBvcHRpb25zLmtlZXBOYXRpdmUgfHwgXCJcIiApLFxyXG5cdFx0XHRnbG9iYWxWYWx1ZSA9ICQudHJpbSggJC5tb2JpbGUua2VlcE5hdGl2ZSApLFxyXG5cdFx0XHRvcHRpb25WYWx1ZSA9ICQudHJpbSggb3B0aW9ucy5rZWVwTmF0aXZlRGVmYXVsdCApLFxyXG5cclxuXHRcdFx0Ly8gQ2hlY2sgaWYgJC5tb2JpbGUua2VlcE5hdGl2ZSBoYXMgY2hhbmdlZCBmcm9tIHRoZSBmYWN0b3J5IGRlZmF1bHRcclxuXHRcdFx0bmV3RGVmYXVsdCA9ICgga2VlcE5hdGl2ZUZhY3RvcnlEZWZhdWx0ID09PSBnbG9iYWxWYWx1ZSA/XHJcblx0XHRcdFx0XCJcIiA6IGdsb2JhbFZhbHVlICksXHJcblxyXG5cdFx0XHQvLyBJZiAkLm1vYmlsZS5rZWVwTmF0aXZlIGhhcyBub3QgY2hhbmdlZCwgdXNlIG9wdGlvbnMua2VlcE5hdGl2ZURlZmF1bHRcclxuXHRcdFx0b2xkRGVmYXVsdCA9ICggbmV3RGVmYXVsdCA9PT0gXCJcIiA/IG9wdGlvblZhbHVlIDogXCJcIiApO1xyXG5cclxuXHRcdC8vIENvbmNhdGVuYXRlIGtlZXBOYXRpdmUgc2VsZWN0b3JzIGZyb20gYWxsIHNvdXJjZXMgd2hlcmUgdGhlIHZhbHVlIGhhc1xyXG5cdFx0Ly8gY2hhbmdlZCBvciwgaWYgbm90aGluZyBoYXMgY2hhbmdlZCwgcmV0dXJuIHRoZSBkZWZhdWx0XHJcblx0XHRyZXR1cm4gKCAoIGtlZXBOYXRpdmUgPyBbIGtlZXBOYXRpdmUgXSA6IFtdIClcclxuXHRcdFx0LmNvbmNhdCggbmV3RGVmYXVsdCA/IFsgbmV3RGVmYXVsdCBdIDogW10gKVxyXG5cdFx0XHQuY29uY2F0KCBvbGREZWZhdWx0ID8gWyBvbGREZWZhdWx0IF0gOiBbXSApXHJcblx0XHRcdC5qb2luKCBcIiwgXCIgKSApO1xyXG5cdH1cclxufSk7XHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxuXHQkLndpZGdldCggXCJtb2JpbGUucGFnZWNvbnRhaW5lclwiLCB7XHJcblx0XHRvcHRpb25zOiB7XHJcblx0XHRcdHRoZW1lOiBcImFcIlxyXG5cdFx0fSxcclxuXHJcblx0XHRpbml0U2VsZWN0b3I6IGZhbHNlLFxyXG5cclxuXHRcdF9jcmVhdGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR0aGlzLl90cmlnZ2VyKCBcImJlZm9yZWNyZWF0ZVwiICk7XHJcblx0XHRcdHRoaXMuc2V0TGFzdFNjcm9sbEVuYWJsZWQgPSB0cnVlO1xyXG5cclxuXHRcdFx0dGhpcy5fb24oIHRoaXMud2luZG93LCB7XHJcblx0XHRcdFx0Ly8gZGlzYWJsZSBhbiBzY3JvbGwgc2V0dGluZyB3aGVuIGEgaGFzaGNoYW5nZSBoYXMgYmVlbiBmaXJlZCxcclxuXHRcdFx0XHQvLyB0aGlzIG9ubHkgd29ya3MgYmVjYXVzZSB0aGUgcmVjb3JkaW5nIG9mIHRoZSBzY3JvbGwgcG9zaXRpb25cclxuXHRcdFx0XHQvLyBpcyBkZWxheWVkIGZvciAxMDBtcyBhZnRlciB0aGUgYnJvd3NlciBtaWdodCBoYXZlIGNoYW5nZWQgdGhlXHJcblx0XHRcdFx0Ly8gcG9zaXRpb24gYmVjYXVzZSBvZiB0aGUgaGFzaGNoYW5nZVxyXG5cdFx0XHRcdG5hdmlnYXRlOiBcIl9kaXNhYmxlUmVjb3JkU2Nyb2xsXCIsXHJcblxyXG5cdFx0XHRcdC8vIGJpbmQgdG8gc2Nyb2xsc3RvcCBmb3IgdGhlIGZpcnN0IHBhZ2UsIFwicGFnZWNoYW5nZVwiIHdvbid0IGJlXHJcblx0XHRcdFx0Ly8gZmlyZWQgaW4gdGhhdCBjYXNlXHJcblx0XHRcdFx0c2Nyb2xsc3RvcDogXCJfZGVsYXllZFJlY29yZFNjcm9sbFwiXHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0Ly8gVE9ETyBjb25zaWRlciBtb3ZpbmcgdGhlIG5hdmlnYXRpb24gaGFuZGxlciBPVVQgb2Ygd2lkZ2V0IGludG9cclxuXHRcdFx0Ly8gICAgICBzb21lIG90aGVyIG9iamVjdCBhcyBnbHVlIGJldHdlZW4gdGhlIG5hdmlnYXRlIGV2ZW50IGFuZCB0aGVcclxuXHRcdFx0Ly8gICAgICBjb250ZW50IHdpZGdldCBsb2FkIGFuZCBjaGFuZ2UgbWV0aG9kc1xyXG5cdFx0XHR0aGlzLl9vbiggdGhpcy53aW5kb3csIHsgbmF2aWdhdGU6IFwiX2ZpbHRlck5hdmlnYXRlRXZlbnRzXCIgfSk7XHJcblxyXG5cdFx0XHQvLyBUT0RPIG1vdmUgZnJvbSBwYWdlKiBldmVudHMgdG8gY29udGVudCogZXZlbnRzXHJcblx0XHRcdHRoaXMuX29uKHsgcGFnZWNoYW5nZTogXCJfYWZ0ZXJDb250ZW50Q2hhbmdlXCIgfSk7XHJcblxyXG5cdFx0XHQvLyBoYW5kbGUgaW5pdGlhbCBoYXNoY2hhbmdlIGZyb20gY2hyb21lIDooXHJcblx0XHRcdHRoaXMud2luZG93Lm9uZSggXCJuYXZpZ2F0ZVwiLCAkLnByb3h5KGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHRoaXMuc2V0TGFzdFNjcm9sbEVuYWJsZWQgPSB0cnVlO1xyXG5cdFx0XHR9LCB0aGlzKSk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9zZXRPcHRpb25zOiBmdW5jdGlvbiggb3B0aW9ucyApIHtcclxuXHRcdFx0aWYgKCBvcHRpb25zLnRoZW1lICE9PSB1bmRlZmluZWQgJiYgb3B0aW9ucy50aGVtZSAhPT0gXCJub25lXCIgKSB7XHJcblx0XHRcdFx0dGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKCBcInVpLW92ZXJsYXktXCIgKyB0aGlzLm9wdGlvbnMudGhlbWUgKVxyXG5cdFx0XHRcdFx0LmFkZENsYXNzKCBcInVpLW92ZXJsYXktXCIgKyBvcHRpb25zLnRoZW1lICk7XHJcblx0XHRcdH0gZWxzZSBpZiAoIG9wdGlvbnMudGhlbWUgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0XHR0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3MoIFwidWktb3ZlcmxheS1cIiArIHRoaXMub3B0aW9ucy50aGVtZSApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR0aGlzLl9zdXBlciggb3B0aW9ucyApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfZGlzYWJsZVJlY29yZFNjcm9sbDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHRoaXMuc2V0TGFzdFNjcm9sbEVuYWJsZWQgPSBmYWxzZTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X2VuYWJsZVJlY29yZFNjcm9sbDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHRoaXMuc2V0TGFzdFNjcm9sbEVuYWJsZWQgPSB0cnVlO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvLyBUT0RPIGNvbnNpZGVyIHRoZSBuYW1lIGhlcmUsIHNpbmNlIGl0J3MgcHVycG9zZSBzcGVjaWZpY1xyXG5cdFx0X2FmdGVyQ29udGVudENoYW5nZTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdC8vIG9uY2UgdGhlIHBhZ2UgaGFzIGNoYW5nZWQsIHJlLWVuYWJsZSB0aGUgc2Nyb2xsIHJlY29yZGluZ1xyXG5cdFx0XHR0aGlzLnNldExhc3RTY3JvbGxFbmFibGVkID0gdHJ1ZTtcclxuXHJcblx0XHRcdC8vIHJlbW92ZSBhbnkgYmluZGluZyB0aGF0IHByZXZpb3VzbHkgZXhpc3RlZCBvbiB0aGUgZ2V0IHNjcm9sbFxyXG5cdFx0XHQvLyB3aGljaCBtYXkgb3IgbWF5IG5vdCBiZSBkaWZmZXJlbnQgdGhhbiB0aGUgc2Nyb2xsIGVsZW1lbnRcclxuXHRcdFx0Ly8gZGV0ZXJtaW5lZCBmb3IgdGhpcyBwYWdlIHByZXZpb3VzbHlcclxuXHRcdFx0dGhpcy5fb2ZmKCB0aGlzLndpbmRvdywgXCJzY3JvbGxzdG9wXCIgKTtcclxuXHJcblx0XHRcdC8vIGRldGVybWluZSBhbmQgYmluZCB0byB0aGUgY3VycmVudCBzY29sbCBlbGVtZW50IHdoaWNoIG1heSBiZSB0aGVcclxuXHRcdFx0Ly8gd2luZG93IG9yIGluIHRoZSBjYXNlIG9mIHRvdWNoIG92ZXJmbG93IHRoZSBlbGVtZW50IHRvdWNoIG92ZXJmbG93XHJcblx0XHRcdHRoaXMuX29uKCB0aGlzLndpbmRvdywgeyBzY3JvbGxzdG9wOiBcIl9kZWxheWVkUmVjb3JkU2Nyb2xsXCIgfSk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9yZWNvcmRTY3JvbGw6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHQvLyB0aGlzIGJhcnJpZXIgcHJldmVudHMgc2V0dGluZyB0aGUgc2Nyb2xsIHZhbHVlIGJhc2VkIG9uXHJcblx0XHRcdC8vIHRoZSBicm93c2VyIHNjcm9sbGluZyB0aGUgd2luZG93IGJhc2VkIG9uIGEgaGFzaGNoYW5nZVxyXG5cdFx0XHRpZiAoICF0aGlzLnNldExhc3RTY3JvbGxFbmFibGVkICkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dmFyIGFjdGl2ZSA9IHRoaXMuX2dldEFjdGl2ZUhpc3RvcnkoKSxcclxuXHRcdFx0XHRjdXJyZW50U2Nyb2xsLCBtaW5TY3JvbGwsIGRlZmF1bHRTY3JvbGw7XHJcblxyXG5cdFx0XHRpZiAoIGFjdGl2ZSApIHtcclxuXHRcdFx0XHRjdXJyZW50U2Nyb2xsID0gdGhpcy5fZ2V0U2Nyb2xsKCk7XHJcblx0XHRcdFx0bWluU2Nyb2xsID0gdGhpcy5fZ2V0TWluU2Nyb2xsKCk7XHJcblx0XHRcdFx0ZGVmYXVsdFNjcm9sbCA9IHRoaXMuX2dldERlZmF1bHRTY3JvbGwoKTtcclxuXHJcblx0XHRcdFx0Ly8gU2V0IGFjdGl2ZSBwYWdlJ3MgbGFzdFNjcm9sbCBwcm9wLiBJZiB0aGUgbG9jYXRpb24gd2UncmVcclxuXHRcdFx0XHQvLyBzY3JvbGxpbmcgdG8gaXMgbGVzcyB0aGFuIG1pblNjcm9sbEJhY2ssIGxldCBpdCBnby5cclxuXHRcdFx0XHRhY3RpdmUubGFzdFNjcm9sbCA9IGN1cnJlbnRTY3JvbGwgPCBtaW5TY3JvbGwgPyBkZWZhdWx0U2Nyb2xsIDogY3VycmVudFNjcm9sbDtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHJcblx0XHRfZGVsYXllZFJlY29yZFNjcm9sbDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHNldFRpbWVvdXQoICQucHJveHkodGhpcywgXCJfcmVjb3JkU2Nyb2xsXCIpLCAxMDAgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X2dldFNjcm9sbDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHJldHVybiB0aGlzLndpbmRvdy5zY3JvbGxUb3AoKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X2dldE1pblNjcm9sbDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHJldHVybiAkLm1vYmlsZS5taW5TY3JvbGxCYWNrO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfZ2V0RGVmYXVsdFNjcm9sbDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHJldHVybiAkLm1vYmlsZS5kZWZhdWx0SG9tZVNjcm9sbDtcclxuXHRcdH0sXHJcblxyXG5cdFx0X2ZpbHRlck5hdmlnYXRlRXZlbnRzOiBmdW5jdGlvbiggZSwgZGF0YSApIHtcclxuXHRcdFx0dmFyIHVybDtcclxuXHJcblx0XHRcdGlmICggZS5vcmlnaW5hbEV2ZW50ICYmIGUub3JpZ2luYWxFdmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSApIHtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHVybCA9IGUub3JpZ2luYWxFdmVudC50eXBlLmluZGV4T2YoIFwiaGFzaGNoYW5nZVwiICkgPiAtMSA/IGRhdGEuc3RhdGUuaGFzaCA6IGRhdGEuc3RhdGUudXJsO1xyXG5cclxuXHRcdFx0aWYgKCAhdXJsICkge1xyXG5cdFx0XHRcdHVybCA9IHRoaXMuX2dldEhhc2goKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKCAhdXJsIHx8IHVybCA9PT0gXCIjXCIgfHwgdXJsLmluZGV4T2YoIFwiI1wiICsgJC5tb2JpbGUucGF0aC51aVN0YXRlS2V5ICkgPT09IDAgKSB7XHJcblx0XHRcdFx0dXJsID0gbG9jYXRpb24uaHJlZjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dGhpcy5faGFuZGxlTmF2aWdhdGUoIHVybCwgZGF0YS5zdGF0ZSApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfZ2V0SGFzaDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHJldHVybiAkLm1vYmlsZS5wYXRoLnBhcnNlTG9jYXRpb24oKS5oYXNoO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvLyBUT0RPIGFjdGl2ZSBwYWdlIHNob3VsZCBiZSBtYW5hZ2VkIGJ5IHRoZSBjb250YWluZXIgKGllLCBpdCBzaG91bGQgYmUgYSBwcm9wZXJ0eSlcclxuXHRcdGdldEFjdGl2ZVBhZ2U6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRyZXR1cm4gdGhpcy5hY3RpdmVQYWdlO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvLyBUT0RPIHRoZSBmaXJzdCBwYWdlIHNob3VsZCBiZSBhIHByb3BlcnR5IHNldCBkdXJpbmcgX2NyZWF0ZSB1c2luZyB0aGUgbG9naWNcclxuXHRcdC8vICAgICAgdGhhdCBjdXJyZW50bHkgcmVzaWRlcyBpbiBpbml0XHJcblx0XHRfZ2V0SW5pdGlhbENvbnRlbnQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRyZXR1cm4gJC5tb2JpbGUuZmlyc3RQYWdlO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvLyBUT0RPIGVhY2ggY29udGVudCBjb250YWluZXIgc2hvdWxkIGhhdmUgYSBoaXN0b3J5IG9iamVjdFxyXG5cdFx0X2dldEhpc3Rvcnk6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRyZXR1cm4gJC5tb2JpbGUubmF2aWdhdGUuaGlzdG9yeTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X2dldEFjdGl2ZUhpc3Rvcnk6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRyZXR1cm4gdGhpcy5fZ2V0SGlzdG9yeSgpLmdldEFjdGl2ZSgpO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvLyBUT0RPIHRoZSBkb2N1bWVudCBiYXNlIHNob3VsZCBiZSBkZXRlcm1pbmVkIGF0IGNyZWF0aW9uXHJcblx0XHRfZ2V0RG9jdW1lbnRCYXNlOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0cmV0dXJuICQubW9iaWxlLnBhdGguZG9jdW1lbnRCYXNlO1xyXG5cdFx0fSxcclxuXHJcblx0XHRiYWNrOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dGhpcy5nbyggLTEgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Zm9yd2FyZDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHRoaXMuZ28oIDEgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Z286IGZ1bmN0aW9uKCBzdGVwcyApIHtcclxuXHJcblx0XHRcdC8vaWYgaGFzaGxpc3RlbmluZyBpcyBlbmFibGVkIHVzZSBuYXRpdmUgaGlzdG9yeSBtZXRob2RcclxuXHRcdFx0aWYgKCAkLm1vYmlsZS5oYXNoTGlzdGVuaW5nRW5hYmxlZCApIHtcclxuXHRcdFx0XHR3aW5kb3cuaGlzdG9yeS5nbyggc3RlcHMgKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHJcblx0XHRcdFx0Ly93ZSBhcmUgbm90IGxpc3RlbmluZyB0byB0aGUgaGFzaCBzbyBoYW5kbGUgaGlzdG9yeSBpbnRlcm5hbGx5XHJcblx0XHRcdFx0dmFyIGFjdGl2ZUluZGV4ID0gJC5tb2JpbGUubmF2aWdhdGUuaGlzdG9yeS5hY3RpdmVJbmRleCxcclxuXHRcdFx0XHRcdGluZGV4ID0gYWN0aXZlSW5kZXggKyBwYXJzZUludCggc3RlcHMsIDEwICksXHJcblx0XHRcdFx0XHR1cmwgPSAkLm1vYmlsZS5uYXZpZ2F0ZS5oaXN0b3J5LnN0YWNrWyBpbmRleCBdLnVybCxcclxuXHRcdFx0XHRcdGRpcmVjdGlvbiA9ICggc3RlcHMgPj0gMSApPyBcImZvcndhcmRcIiA6IFwiYmFja1wiO1xyXG5cclxuXHRcdFx0XHQvL3VwZGF0ZSB0aGUgaGlzdG9yeSBvYmplY3RcclxuXHRcdFx0XHQkLm1vYmlsZS5uYXZpZ2F0ZS5oaXN0b3J5LmFjdGl2ZUluZGV4ID0gaW5kZXg7XHJcblx0XHRcdFx0JC5tb2JpbGUubmF2aWdhdGUuaGlzdG9yeS5wcmV2aW91c0luZGV4ID0gYWN0aXZlSW5kZXg7XHJcblxyXG5cdFx0XHRcdC8vY2hhbmdlIHRvIHRoZSBuZXcgcGFnZVxyXG5cdFx0XHRcdHRoaXMuY2hhbmdlKCB1cmwsIHsgZGlyZWN0aW9uOiBkaXJlY3Rpb24sIGNoYW5nZUhhc2g6IGZhbHNlLCBmcm9tSGFzaENoYW5nZTogdHJ1ZSB9ICk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gVE9ETyByZW5hbWUgX2hhbmRsZURlc3RpbmF0aW9uXHJcblx0XHRfaGFuZGxlRGVzdGluYXRpb246IGZ1bmN0aW9uKCB0byApIHtcclxuXHRcdFx0dmFyIGhpc3Rvcnk7XHJcblxyXG5cdFx0XHQvLyBjbGVhbiB0aGUgaGFzaCBmb3IgY29tcGFyaXNvbiBpZiBpdCdzIGEgdXJsXHJcblx0XHRcdGlmICggJC50eXBlKHRvKSA9PT0gXCJzdHJpbmdcIiApIHtcclxuXHRcdFx0XHR0byA9ICQubW9iaWxlLnBhdGguc3RyaXBIYXNoKCB0byApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoIHRvICkge1xyXG5cdFx0XHRcdGhpc3RvcnkgPSB0aGlzLl9nZXRIaXN0b3J5KCk7XHJcblxyXG5cdFx0XHRcdC8vIEF0IHRoaXMgcG9pbnQsICd0bycgY2FuIGJlIG9uZSBvZiAzIHRoaW5ncywgYSBjYWNoZWQgcGFnZVxyXG5cdFx0XHRcdC8vIGVsZW1lbnQgZnJvbSBhIGhpc3Rvcnkgc3RhY2sgZW50cnksIGFuIGlkLCBvciBzaXRlLXJlbGF0aXZlIC9cclxuXHRcdFx0XHQvLyBhYnNvbHV0ZSBVUkwuIElmICd0bycgaXMgYW4gaWQsIHdlIG5lZWQgdG8gcmVzb2x2ZSBpdCBhZ2FpbnN0XHJcblx0XHRcdFx0Ly8gdGhlIGRvY3VtZW50QmFzZSwgbm90IHRoZSBsb2NhdGlvbi5ocmVmLCBzaW5jZSB0aGUgaGFzaGNoYW5nZVxyXG5cdFx0XHRcdC8vIGNvdWxkJ3ZlIGJlZW4gdGhlIHJlc3VsdCBvZiBhIGZvcndhcmQvYmFja3dhcmQgbmF2aWdhdGlvblxyXG5cdFx0XHRcdC8vIHRoYXQgY3Jvc3NlcyBmcm9tIGFuIGV4dGVybmFsIHBhZ2UvZGlhbG9nIHRvIGFuIGludGVybmFsXHJcblx0XHRcdFx0Ly8gcGFnZS9kaWFsb2cuXHJcblx0XHRcdFx0Ly9cclxuXHRcdFx0XHQvLyBUT0RPIG1vdmUgY2hlY2sgdG8gaGlzdG9yeSBvYmplY3Qgb3IgcGF0aCBvYmplY3Q/XHJcblx0XHRcdFx0dG8gPSAhJC5tb2JpbGUucGF0aC5pc1BhdGgoIHRvICkgPyAoICQubW9iaWxlLnBhdGgubWFrZVVybEFic29sdXRlKCBcIiNcIiArIHRvLCB0aGlzLl9nZXREb2N1bWVudEJhc2UoKSApICkgOiB0bztcclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gdG8gfHwgdGhpcy5fZ2V0SW5pdGlhbENvbnRlbnQoKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X3RyYW5zaXRpb25Gcm9tSGlzdG9yeTogZnVuY3Rpb24oIGRpcmVjdGlvbiwgZGVmYXVsdFRyYW5zaXRpb24gKSB7XHJcblx0XHRcdHZhciBoaXN0b3J5ID0gdGhpcy5fZ2V0SGlzdG9yeSgpLFxyXG5cdFx0XHRcdGVudHJ5ID0gKCBkaXJlY3Rpb24gPT09IFwiYmFja1wiID8gaGlzdG9yeS5nZXRMYXN0KCkgOiBoaXN0b3J5LmdldEFjdGl2ZSgpICk7XHJcblxyXG5cdFx0XHRyZXR1cm4gKCBlbnRyeSAmJiBlbnRyeS50cmFuc2l0aW9uICkgfHwgZGVmYXVsdFRyYW5zaXRpb247XHJcblx0XHR9LFxyXG5cclxuXHRcdF9oYW5kbGVEaWFsb2c6IGZ1bmN0aW9uKCBjaGFuZ2VQYWdlT3B0aW9ucywgZGF0YSApIHtcclxuXHRcdFx0dmFyIHRvLCBhY3RpdmUsIGFjdGl2ZUNvbnRlbnQgPSB0aGlzLmdldEFjdGl2ZVBhZ2UoKTtcclxuXHJcblx0XHRcdC8vIElmIGN1cnJlbnQgYWN0aXZlIHBhZ2UgaXMgbm90IGEgZGlhbG9nIHNraXAgdGhlIGRpYWxvZyBhbmQgY29udGludWVcclxuXHRcdFx0Ly8gaW4gdGhlIHNhbWUgZGlyZWN0aW9uXHJcblx0XHRcdC8vIE5vdGU6IFRoZSBkaWFsb2cgd2lkZ2V0IGlzIGRlcHJlY2F0ZWQgYXMgb2YgMS40LjAgYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiAxLjUuMC5cclxuXHRcdFx0Ly8gVGh1cywgYXMgb2YgMS41LjAgYWN0aXZlQ29udGVudC5kYXRhKCBcIm1vYmlsZS1kaWFsb2dcIiApIHdpbGwgYWx3YXlzIGV2YWx1YXRlIHRvXHJcblx0XHRcdC8vIGZhbHN5LCBzbyB0aGUgc2Vjb25kIGNvbmRpdGlvbiBpbiB0aGUgaWYtc3RhdGVtZW50IGJlbG93IGNhbiBiZSByZW1vdmVkIGFsdG9nZXRoZXIuXHJcblx0XHRcdGlmICggYWN0aXZlQ29udGVudCAmJiAhYWN0aXZlQ29udGVudC5kYXRhKCBcIm1vYmlsZS1kaWFsb2dcIiApICkge1xyXG5cdFx0XHRcdC8vIGRldGVybWluZSBpZiB3ZSdyZSBoZWFkaW5nIGZvcndhcmQgb3IgYmFja3dhcmQgYW5kIGNvbnRpbnVlXHJcblx0XHRcdFx0Ly8gYWNjb3JkaW5nbHkgcGFzdCB0aGUgY3VycmVudCBkaWFsb2dcclxuXHRcdFx0XHRpZiAoIGRhdGEuZGlyZWN0aW9uID09PSBcImJhY2tcIiApIHtcclxuXHRcdFx0XHRcdHRoaXMuYmFjaygpO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHR0aGlzLmZvcndhcmQoKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vIHByZXZlbnQgY2hhbmdlUGFnZSBjYWxsXHJcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdC8vIGlmIHRoZSBjdXJyZW50IGFjdGl2ZSBwYWdlIGlzIGEgZGlhbG9nIGFuZCB3ZSdyZSBuYXZpZ2F0aW5nXHJcblx0XHRcdFx0Ly8gdG8gYSBkaWFsb2cgdXNlIHRoZSBkaWFsb2cgb2JqZWN0ZWQgc2F2ZWQgaW4gdGhlIHN0YWNrXHJcblx0XHRcdFx0dG8gPSBkYXRhLnBhZ2VVcmw7XHJcblx0XHRcdFx0YWN0aXZlID0gdGhpcy5fZ2V0QWN0aXZlSGlzdG9yeSgpO1xyXG5cclxuXHRcdFx0XHQvLyBtYWtlIHN1cmUgdG8gc2V0IHRoZSByb2xlLCB0cmFuc2l0aW9uIGFuZCByZXZlcnNhbFxyXG5cdFx0XHRcdC8vIGFzIG1vc3Qgb2YgdGhpcyBpcyBsb3N0IGJ5IHRoZSBkb21DYWNoZSBjbGVhbmluZ1xyXG5cdFx0XHRcdCQuZXh0ZW5kKCBjaGFuZ2VQYWdlT3B0aW9ucywge1xyXG5cdFx0XHRcdFx0cm9sZTogYWN0aXZlLnJvbGUsXHJcblx0XHRcdFx0XHR0cmFuc2l0aW9uOiB0aGlzLl90cmFuc2l0aW9uRnJvbUhpc3RvcnkoXHJcblx0XHRcdFx0XHRcdGRhdGEuZGlyZWN0aW9uLFxyXG5cdFx0XHRcdFx0XHRjaGFuZ2VQYWdlT3B0aW9ucy50cmFuc2l0aW9uICksXHJcblx0XHRcdFx0XHRyZXZlcnNlOiBkYXRhLmRpcmVjdGlvbiA9PT0gXCJiYWNrXCJcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cmV0dXJuIHRvO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfaGFuZGxlTmF2aWdhdGU6IGZ1bmN0aW9uKCB1cmwsIGRhdGEgKSB7XHJcblx0XHRcdC8vZmluZCBmaXJzdCBwYWdlIHZpYSBoYXNoXHJcblx0XHRcdC8vIFRPRE8gc3RyaXBwaW5nIHRoZSBoYXNoIHR3aWNlIHdpdGggaGFuZGxlVXJsXHJcblx0XHRcdHZhciB0byA9ICQubW9iaWxlLnBhdGguc3RyaXBIYXNoKCB1cmwgKSwgaGlzdG9yeSA9IHRoaXMuX2dldEhpc3RvcnkoKSxcclxuXHJcblx0XHRcdFx0Ly8gdHJhbnNpdGlvbiBpcyBmYWxzZSBpZiBpdCdzIHRoZSBmaXJzdCBwYWdlLCB1bmRlZmluZWRcclxuXHRcdFx0XHQvLyBvdGhlcndpc2UgKGFuZCBtYXkgYmUgb3ZlcnJpZGRlbiBieSBkZWZhdWx0KVxyXG5cdFx0XHRcdHRyYW5zaXRpb24gPSBoaXN0b3J5LnN0YWNrLmxlbmd0aCA9PT0gMCA/IFwibm9uZVwiIDpcclxuXHRcdFx0XHRcdHRoaXMuX3RyYW5zaXRpb25Gcm9tSGlzdG9yeSggZGF0YS5kaXJlY3Rpb24gKSxcclxuXHJcblx0XHRcdFx0Ly8gZGVmYXVsdCBvcHRpb25zIGZvciB0aGUgY2hhbmdQYWdlIGNhbGxzIG1hZGUgYWZ0ZXIgZXhhbWluaW5nXHJcblx0XHRcdFx0Ly8gdGhlIGN1cnJlbnQgc3RhdGUgb2YgdGhlIHBhZ2UgYW5kIHRoZSBoYXNoLCBOT1RFIHRoYXQgdGhlXHJcblx0XHRcdFx0Ly8gdHJhbnNpdGlvbiBpcyBkZXJpdmVkIGZyb20gdGhlIHByZXZpb3VzIGhpc3RvcnkgZW50cnlcclxuXHRcdFx0XHRjaGFuZ2VQYWdlT3B0aW9ucyA9IHtcclxuXHRcdFx0XHRcdGNoYW5nZUhhc2g6IGZhbHNlLFxyXG5cdFx0XHRcdFx0ZnJvbUhhc2hDaGFuZ2U6IHRydWUsXHJcblx0XHRcdFx0XHRyZXZlcnNlOiBkYXRhLmRpcmVjdGlvbiA9PT0gXCJiYWNrXCJcclxuXHRcdFx0XHR9O1xyXG5cclxuXHRcdFx0JC5leHRlbmQoIGNoYW5nZVBhZ2VPcHRpb25zLCBkYXRhLCB7XHJcblx0XHRcdFx0dHJhbnNpdGlvbjogdHJhbnNpdGlvblxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdC8vIFRPRE8gbW92ZSB0byBfaGFuZGxlRGVzdGluYXRpb24gP1xyXG5cdFx0XHQvLyBJZiB0aGlzIGlzbid0IHRoZSBmaXJzdCBwYWdlLCBpZiB0aGUgY3VycmVudCB1cmwgaXMgYSBkaWFsb2cgaGFzaFxyXG5cdFx0XHQvLyBrZXksIGFuZCB0aGUgaW5pdGlhbCBkZXN0aW5hdGlvbiBpc24ndCBlcXVhbCB0byB0aGUgY3VycmVudCB0YXJnZXRcclxuXHRcdFx0Ly8gcGFnZSwgdXNlIHRoZSBzcGVjaWFsIGRpYWxvZyBoYW5kbGluZ1xyXG5cdFx0XHRpZiAoIGhpc3RvcnkuYWN0aXZlSW5kZXggPiAwICYmXHJcblx0XHRcdFx0dG8uaW5kZXhPZiggJC5tb2JpbGUuZGlhbG9nSGFzaEtleSApID4gLTEgKSB7XHJcblxyXG5cdFx0XHRcdHRvID0gdGhpcy5faGFuZGxlRGlhbG9nKCBjaGFuZ2VQYWdlT3B0aW9ucywgZGF0YSApO1xyXG5cclxuXHRcdFx0XHRpZiAoIHRvID09PSBmYWxzZSApIHtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHRoaXMuX2NoYW5nZUNvbnRlbnQoIHRoaXMuX2hhbmRsZURlc3RpbmF0aW9uKCB0byApLCBjaGFuZ2VQYWdlT3B0aW9ucyApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfY2hhbmdlQ29udGVudDogZnVuY3Rpb24oIHRvLCBvcHRzICkge1xyXG5cdFx0XHQkLm1vYmlsZS5jaGFuZ2VQYWdlKCB0bywgb3B0cyApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfZ2V0QmFzZTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHJldHVybiAkLm1vYmlsZS5iYXNlO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfZ2V0TnM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRyZXR1cm4gJC5tb2JpbGUubnM7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9lbmhhbmNlOiBmdW5jdGlvbiggY29udGVudCwgcm9sZSApIHtcclxuXHRcdFx0Ly8gVE9ETyBjb25zaWRlciBzdXBwb3J0aW5nIGEgY3VzdG9tIGNhbGxiYWNrLCBhbmQgcGFzc2luZyBpblxyXG5cdFx0XHQvLyB0aGUgc2V0dGluZ3Mgd2hpY2ggaW5jbHVkZXMgdGhlIHJvbGVcclxuXHRcdFx0cmV0dXJuIGNvbnRlbnQucGFnZSh7IHJvbGU6IHJvbGUgfSk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9pbmNsdWRlOiBmdW5jdGlvbiggcGFnZSwgc2V0dGluZ3MgKSB7XHJcblx0XHRcdC8vIGFwcGVuZCB0byBwYWdlIGFuZCBlbmhhbmNlXHJcblx0XHRcdHBhZ2UuYXBwZW5kVG8oIHRoaXMuZWxlbWVudCApO1xyXG5cclxuXHRcdFx0Ly8gdXNlIHRoZSBwYWdlIHdpZGdldCB0byBlbmhhbmNlXHJcblx0XHRcdHRoaXMuX2VuaGFuY2UoIHBhZ2UsIHNldHRpbmdzLnJvbGUgKTtcclxuXHJcblx0XHRcdC8vIHJlbW92ZSBwYWdlIG9uIGhpZGVcclxuXHRcdFx0cGFnZS5wYWdlKCBcImJpbmRSZW1vdmVcIiApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfZmluZDogZnVuY3Rpb24oIGFic1VybCApIHtcclxuXHRcdFx0Ly8gVE9ETyBjb25zaWRlciBzdXBwb3J0aW5nIGEgY3VzdG9tIGNhbGxiYWNrXHJcblx0XHRcdHZhciBmaWxlVXJsID0gdGhpcy5fY3JlYXRlRmlsZVVybCggYWJzVXJsICksXHJcblx0XHRcdFx0ZGF0YVVybCA9IHRoaXMuX2NyZWF0ZURhdGFVcmwoIGFic1VybCApLFxyXG5cdFx0XHRcdHBhZ2UsIGluaXRpYWxDb250ZW50ID0gdGhpcy5fZ2V0SW5pdGlhbENvbnRlbnQoKTtcclxuXHJcblx0XHRcdC8vIENoZWNrIHRvIHNlZSBpZiB0aGUgcGFnZSBhbHJlYWR5IGV4aXN0cyBpbiB0aGUgRE9NLlxyXG5cdFx0XHQvLyBOT1RFIGRvIF9ub3RfIHVzZSB0aGUgOmpxbURhdGEgcHNldWRvIHNlbGVjdG9yIGJlY2F1c2UgcGFyZW50aGVzaXNcclxuXHRcdFx0Ly8gICAgICBhcmUgYSB2YWxpZCB1cmwgY2hhciBhbmQgaXQgYnJlYWtzIG9uIHRoZSBmaXJzdCBvY2N1cmVuY2VcclxuXHRcdFx0cGFnZSA9IHRoaXMuZWxlbWVudFxyXG5cdFx0XHRcdC5jaGlsZHJlbiggXCJbZGF0YS1cIiArIHRoaXMuX2dldE5zKCkgK1xyXG5cdFx0XHRcdFx0XCJ1cmw9J1wiICsgJC5tb2JpbGUucGF0aC5oYXNoVG9TZWxlY3RvciggZGF0YVVybCApICsgXCInXVwiICk7XHJcblxyXG5cdFx0XHQvLyBJZiB3ZSBmYWlsZWQgdG8gZmluZCB0aGUgcGFnZSwgY2hlY2sgdG8gc2VlIGlmIHRoZSB1cmwgaXMgYVxyXG5cdFx0XHQvLyByZWZlcmVuY2UgdG8gYW4gZW1iZWRkZWQgcGFnZS4gSWYgc28sIGl0IG1heSBoYXZlIGJlZW4gZHluYW1pY2FsbHlcclxuXHRcdFx0Ly8gaW5qZWN0ZWQgYnkgYSBkZXZlbG9wZXIsIGluIHdoaWNoIGNhc2UgaXQgd291bGQgYmUgbGFja2luZyBhXHJcblx0XHRcdC8vIGRhdGEtdXJsIGF0dHJpYnV0ZSBhbmQgaW4gbmVlZCBvZiBlbmhhbmNlbWVudC5cclxuXHRcdFx0aWYgKCBwYWdlLmxlbmd0aCA9PT0gMCAmJiBkYXRhVXJsICYmICEkLm1vYmlsZS5wYXRoLmlzUGF0aCggZGF0YVVybCApICkge1xyXG5cdFx0XHRcdHBhZ2UgPSB0aGlzLmVsZW1lbnQuY2hpbGRyZW4oICQubW9iaWxlLnBhdGguaGFzaFRvU2VsZWN0b3IoXCIjXCIgKyBkYXRhVXJsKSApXHJcblx0XHRcdFx0XHQuYXR0ciggXCJkYXRhLVwiICsgdGhpcy5fZ2V0TnMoKSArIFwidXJsXCIsIGRhdGFVcmwgKVxyXG5cdFx0XHRcdFx0LmpxbURhdGEoIFwidXJsXCIsIGRhdGFVcmwgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gSWYgd2UgZmFpbGVkIHRvIGZpbmQgYSBwYWdlIGluIHRoZSBET00sIGNoZWNrIHRoZSBVUkwgdG8gc2VlIGlmIGl0XHJcblx0XHRcdC8vIHJlZmVycyB0byB0aGUgZmlyc3QgcGFnZSBpbiB0aGUgYXBwbGljYXRpb24uIEFsc28gY2hlY2sgdG8gbWFrZSBzdXJlXHJcblx0XHRcdC8vIG91ciBjYWNoZWQtZmlyc3QtcGFnZSBpcyBhY3R1YWxseSBpbiB0aGUgRE9NLiBTb21lIHVzZXIgZGVwbG95ZWRcclxuXHRcdFx0Ly8gYXBwcyBhcmUgcHJ1bmluZyB0aGUgZmlyc3QgcGFnZSBmcm9tIHRoZSBET00gZm9yIHZhcmlvdXMgcmVhc29ucy5cclxuXHRcdFx0Ly8gV2UgY2hlY2sgZm9yIHRoaXMgY2FzZSBoZXJlIGJlY2F1c2Ugd2UgZG9uJ3Qgd2FudCBhIGZpcnN0LXBhZ2Ugd2l0aFxyXG5cdFx0XHQvLyBhbiBpZCBmYWxsaW5nIHRocm91Z2ggdG8gdGhlIG5vbi1leGlzdGVudCBlbWJlZGRlZCBwYWdlIGVycm9yIGNhc2UuXHJcblx0XHRcdGlmICggcGFnZS5sZW5ndGggPT09IDAgJiZcclxuXHRcdFx0XHQkLm1vYmlsZS5wYXRoLmlzRmlyc3RQYWdlVXJsKCBmaWxlVXJsICkgJiZcclxuXHRcdFx0XHRpbml0aWFsQ29udGVudCAmJlxyXG5cdFx0XHRcdGluaXRpYWxDb250ZW50LnBhcmVudCgpLmxlbmd0aCApIHtcclxuXHRcdFx0XHRwYWdlID0gJCggaW5pdGlhbENvbnRlbnQgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cmV0dXJuIHBhZ2U7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9nZXRMb2FkZXI6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRyZXR1cm4gJC5tb2JpbGUubG9hZGluZygpO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfc2hvd0xvYWRpbmc6IGZ1bmN0aW9uKCBkZWxheSwgdGhlbWUsIG1zZywgdGV4dG9ubHkgKSB7XHJcblx0XHRcdC8vIFRoaXMgY29uZmlndXJhYmxlIHRpbWVvdXQgYWxsb3dzIGNhY2hlZCBwYWdlcyBhIGJyaWVmXHJcblx0XHRcdC8vIGRlbGF5IHRvIGxvYWQgd2l0aG91dCBzaG93aW5nIGEgbWVzc2FnZVxyXG5cdFx0XHRpZiAoIHRoaXMuX2xvYWRNc2cgKSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR0aGlzLl9sb2FkTXNnID0gc2V0VGltZW91dCgkLnByb3h5KGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHRoaXMuX2dldExvYWRlcigpLmxvYWRlciggXCJzaG93XCIsIHRoZW1lLCBtc2csIHRleHRvbmx5ICk7XHJcblx0XHRcdFx0dGhpcy5fbG9hZE1zZyA9IDA7XHJcblx0XHRcdH0sIHRoaXMpLCBkZWxheSApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfaGlkZUxvYWRpbmc6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHQvLyBTdG9wIG1lc3NhZ2Ugc2hvdyB0aW1lclxyXG5cdFx0XHRjbGVhclRpbWVvdXQoIHRoaXMuX2xvYWRNc2cgKTtcclxuXHRcdFx0dGhpcy5fbG9hZE1zZyA9IDA7XHJcblxyXG5cdFx0XHQvLyBIaWRlIGxvYWRpbmcgbWVzc2FnZVxyXG5cdFx0XHR0aGlzLl9nZXRMb2FkZXIoKS5sb2FkZXIoIFwiaGlkZVwiICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9zaG93RXJyb3I6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHQvLyBtYWtlIHN1cmUgdG8gcmVtb3ZlIHRoZSBjdXJyZW50IGxvYWRpbmcgbWVzc2FnZVxyXG5cdFx0XHR0aGlzLl9oaWRlTG9hZGluZygpO1xyXG5cclxuXHRcdFx0Ly8gc2hvdyB0aGUgZXJyb3IgbWVzc2FnZVxyXG5cdFx0XHR0aGlzLl9zaG93TG9hZGluZyggMCwgJC5tb2JpbGUucGFnZUxvYWRFcnJvck1lc3NhZ2VUaGVtZSwgJC5tb2JpbGUucGFnZUxvYWRFcnJvck1lc3NhZ2UsIHRydWUgKTtcclxuXHJcblx0XHRcdC8vIGhpZGUgdGhlIGVycm9yIG1lc3NhZ2UgYWZ0ZXIgYSBkZWxheVxyXG5cdFx0XHQvLyBUT0RPIGNvbmZpZ3VyYXRpb25cclxuXHRcdFx0c2V0VGltZW91dCggJC5wcm94eSh0aGlzLCBcIl9oaWRlTG9hZGluZ1wiKSwgMTUwMCApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfcGFyc2U6IGZ1bmN0aW9uKCBodG1sLCBmaWxlVXJsICkge1xyXG5cdFx0XHQvLyBUT0RPIGNvbnNpZGVyIGFsbG93aW5nIGN1c3RvbWl6YXRpb24gb2YgdGhpcyBtZXRob2QuIEl0J3MgdmVyeSBKUU0gc3BlY2lmaWNcclxuXHRcdFx0dmFyIHBhZ2UsIGFsbCA9ICQoIFwiPGRpdj48L2Rpdj5cIiApO1xyXG5cclxuXHRcdFx0Ly93b3JrYXJvdW5kIHRvIGFsbG93IHNjcmlwdHMgdG8gZXhlY3V0ZSB3aGVuIGluY2x1ZGVkIGluIHBhZ2UgZGl2c1xyXG5cdFx0XHRhbGwuZ2V0KCAwICkuaW5uZXJIVE1MID0gaHRtbDtcclxuXHJcblx0XHRcdHBhZ2UgPSBhbGwuZmluZCggXCI6anFtRGF0YShyb2xlPSdwYWdlJyksIDpqcW1EYXRhKHJvbGU9J2RpYWxvZycpXCIgKS5maXJzdCgpO1xyXG5cclxuXHRcdFx0Ly9pZiBwYWdlIGVsZW0gY291bGRuJ3QgYmUgZm91bmQsIGNyZWF0ZSBvbmUgYW5kIGluc2VydCB0aGUgYm9keSBlbGVtZW50J3MgY29udGVudHNcclxuXHRcdFx0aWYgKCAhcGFnZS5sZW5ndGggKSB7XHJcblx0XHRcdFx0cGFnZSA9ICQoIFwiPGRpdiBkYXRhLVwiICsgdGhpcy5fZ2V0TnMoKSArIFwicm9sZT0ncGFnZSc+XCIgK1xyXG5cdFx0XHRcdFx0KCBodG1sLnNwbGl0KCAvPFxcLz9ib2R5W14+XSo+L2dtaSApWzFdIHx8IFwiXCIgKSArXHJcblx0XHRcdFx0XHRcIjwvZGl2PlwiICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIFRPRE8gdGFnZ2luZyBhIHBhZ2Ugd2l0aCBleHRlcm5hbCB0byBtYWtlIHN1cmUgdGhhdCBlbWJlZGRlZCBwYWdlcyBhcmVuJ3RcclxuXHRcdFx0Ly8gcmVtb3ZlZCBieSB0aGUgdmFyaW91cyBwYWdlIGhhbmRsaW5nIGNvZGUgaXMgYmFkLiBIYXZpbmcgcGFnZSBoYW5kbGluZyBjb2RlXHJcblx0XHRcdC8vIGluIG1hbnkgcGxhY2VzIGlzIGJhZC4gU29sdXRpb25zIHBvc3QgMS4wXHJcblx0XHRcdHBhZ2UuYXR0ciggXCJkYXRhLVwiICsgdGhpcy5fZ2V0TnMoKSArIFwidXJsXCIsIHRoaXMuX2NyZWF0ZURhdGFVcmwoIGZpbGVVcmwgKSApXHJcblx0XHRcdFx0LmF0dHIoIFwiZGF0YS1cIiArIHRoaXMuX2dldE5zKCkgKyBcImV4dGVybmFsLXBhZ2VcIiwgdHJ1ZSApO1xyXG5cclxuXHRcdFx0cmV0dXJuIHBhZ2U7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9zZXRMb2FkZWRUaXRsZTogZnVuY3Rpb24oIHBhZ2UsIGh0bWwgKSB7XHJcblx0XHRcdC8vcGFnZSB0aXRsZSByZWdleHBcclxuXHRcdFx0dmFyIG5ld1BhZ2VUaXRsZSA9IGh0bWwubWF0Y2goIC88dGl0bGVbXj5dKj4oW148XSopLyApICYmIFJlZ0V4cC4kMTtcclxuXHJcblx0XHRcdGlmICggbmV3UGFnZVRpdGxlICYmICFwYWdlLmpxbURhdGEoXCJ0aXRsZVwiKSApIHtcclxuXHRcdFx0XHRuZXdQYWdlVGl0bGUgPSAkKCBcIjxkaXY+XCIgKyBuZXdQYWdlVGl0bGUgKyBcIjwvZGl2PlwiICkudGV4dCgpO1xyXG5cdFx0XHRcdHBhZ2UuanFtRGF0YSggXCJ0aXRsZVwiLCBuZXdQYWdlVGl0bGUgKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHJcblx0XHRfaXNSZXdyaXRhYmxlQmFzZVRhZzogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHJldHVybiAkLm1vYmlsZS5keW5hbWljQmFzZUVuYWJsZWQgJiYgISQuc3VwcG9ydC5keW5hbWljQmFzZVRhZztcclxuXHRcdH0sXHJcblxyXG5cdFx0X2NyZWF0ZURhdGFVcmw6IGZ1bmN0aW9uKCBhYnNvbHV0ZVVybCApIHtcclxuXHRcdFx0cmV0dXJuICQubW9iaWxlLnBhdGguY29udmVydFVybFRvRGF0YVVybCggYWJzb2x1dGVVcmwgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X2NyZWF0ZUZpbGVVcmw6IGZ1bmN0aW9uKCBhYnNvbHV0ZVVybCApIHtcclxuXHRcdFx0cmV0dXJuICQubW9iaWxlLnBhdGguZ2V0RmlsZVBhdGgoIGFic29sdXRlVXJsICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF90cmlnZ2VyV2l0aERlcHJlY2F0ZWQ6IGZ1bmN0aW9uKCBuYW1lLCBkYXRhLCBwYWdlICkge1xyXG5cdFx0XHR2YXIgZGVwcmVjYXRlZEV2ZW50ID0gJC5FdmVudCggXCJwYWdlXCIgKyBuYW1lICksXHJcblx0XHRcdFx0bmV3RXZlbnQgPSAkLkV2ZW50KCB0aGlzLndpZGdldE5hbWUgKyBuYW1lICk7XHJcblxyXG5cdFx0XHQvLyBERVBSRUNBVEVEXHJcblx0XHRcdC8vIHRyaWdnZXIgdGhlIG9sZCBkZXByZWNhdGVkIGV2ZW50IG9uIHRoZSBwYWdlIGlmIGl0J3MgcHJvdmlkZWRcclxuXHRcdFx0KCBwYWdlIHx8IHRoaXMuZWxlbWVudCApLnRyaWdnZXIoIGRlcHJlY2F0ZWRFdmVudCwgZGF0YSApO1xyXG5cclxuXHRcdFx0Ly8gdXNlIHRoZSB3aWRnZXQgdHJpZ2dlciBtZXRob2QgZm9yIHRoZSBuZXcgY29udGVudCogZXZlbnRcclxuXHRcdFx0dGhpcy5fdHJpZ2dlciggbmFtZSwgbmV3RXZlbnQsIGRhdGEgKTtcclxuXHJcblx0XHRcdHJldHVybiB7XHJcblx0XHRcdFx0ZGVwcmVjYXRlZEV2ZW50OiBkZXByZWNhdGVkRXZlbnQsXHJcblx0XHRcdFx0ZXZlbnQ6IG5ld0V2ZW50XHJcblx0XHRcdH07XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vIFRPRE8gaXQgd291bGQgYmUgbmljZSB0byBzcGxpdCB0aGlzIHVwIG1vcmUgYnV0IGV2ZXJ5dGhpbmcgYXBwZWFycyB0byBiZSBcIm9uZSBvZmZcIlxyXG5cdFx0Ly8gICAgICBvciByZXF1aXJlIG9yZGVyaW5nIHN1Y2ggdGhhdCBvdGhlciBiaXRzIGFyZSBzcHJpbmtsZWQgaW4gYmV0d2VlbiBwYXJ0cyB0aGF0XHJcblx0XHQvLyAgICAgIGNvdWxkIGJlIGFic3RyYWN0ZWQgb3V0IGFzIGEgZ3JvdXBcclxuXHRcdF9sb2FkU3VjY2VzczogZnVuY3Rpb24oIGFic1VybCwgdHJpZ2dlckRhdGEsIHNldHRpbmdzLCBkZWZlcnJlZCApIHtcclxuXHRcdFx0dmFyIGZpbGVVcmwgPSB0aGlzLl9jcmVhdGVGaWxlVXJsKCBhYnNVcmwgKTtcclxuXHJcblx0XHRcdHJldHVybiAkLnByb3h5KGZ1bmN0aW9uKCBodG1sLCB0ZXh0U3RhdHVzLCB4aHIgKSB7XHJcblx0XHRcdFx0Ly9wcmUtcGFyc2UgaHRtbCB0byBjaGVjayBmb3IgYSBkYXRhLXVybCxcclxuXHRcdFx0XHQvL3VzZSBpdCBhcyB0aGUgbmV3IGZpbGVVcmwsIGJhc2UgcGF0aCwgZXRjXHJcblx0XHRcdFx0dmFyIGNvbnRlbnQsXHJcblxyXG5cdFx0XHRcdFx0Ly8gVE9ETyBoYW5kbGUgZGlhbG9ncyBhZ2FpblxyXG5cdFx0XHRcdFx0cGFnZUVsZW1SZWdleCA9IG5ldyBSZWdFeHAoIFwiKDxbXj5dK1xcXFxiZGF0YS1cIiArIHRoaXMuX2dldE5zKCkgKyBcInJvbGU9W1xcXCInXT9wYWdlW1xcXCInXT9bXj5dKj4pXCIgKSxcclxuXHJcblx0XHRcdFx0XHRkYXRhVXJsUmVnZXggPSBuZXcgUmVnRXhwKCBcIlxcXFxiZGF0YS1cIiArIHRoaXMuX2dldE5zKCkgKyBcInVybD1bXFxcIiddPyhbXlxcXCInPl0qKVtcXFwiJ10/XCIgKTtcclxuXHJcblx0XHRcdFx0Ly8gZGF0YS11cmwgbXVzdCBiZSBwcm92aWRlZCBmb3IgdGhlIGJhc2UgdGFnIHNvIHJlc291cmNlIHJlcXVlc3RzXHJcblx0XHRcdFx0Ly8gY2FuIGJlIGRpcmVjdGVkIHRvIHRoZSBjb3JyZWN0IHVybC4gbG9hZGluZyBpbnRvIGEgdGVtcHJvcmFyeVxyXG5cdFx0XHRcdC8vIGVsZW1lbnQgbWFrZXMgdGhlc2UgcmVxdWVzdHMgaW1tZWRpYXRlbHlcclxuXHRcdFx0XHRpZiAoIHBhZ2VFbGVtUmVnZXgudGVzdCggaHRtbCApICYmXHJcblx0XHRcdFx0XHRSZWdFeHAuJDEgJiZcclxuXHRcdFx0XHRcdGRhdGFVcmxSZWdleC50ZXN0KCBSZWdFeHAuJDEgKSAmJlxyXG5cdFx0XHRcdFx0UmVnRXhwLiQxICkge1xyXG5cdFx0XHRcdFx0ZmlsZVVybCA9ICQubW9iaWxlLnBhdGguZ2V0RmlsZVBhdGgoICQoXCI8ZGl2PlwiICsgUmVnRXhwLiQxICsgXCI8L2Rpdj5cIikudGV4dCgpICk7XHJcblxyXG5cdFx0XHRcdFx0Ly8gV2Ugc3BlY2lmeSB0aGF0LCBpZiBhIGRhdGEtdXJsIGF0dHJpYnV0ZSBpcyBnaXZlbiBvbiB0aGUgcGFnZSBkaXYsIGl0cyB2YWx1ZVxyXG5cdFx0XHRcdFx0Ly8gbXVzdCBiZSBnaXZlbiBub24tVVJMLWVuY29kZWQuIEhvd2V2ZXIsIGluIHRoaXMgcGFydCBvZiB0aGUgY29kZSwgZmlsZVVybCBpc1xyXG5cdFx0XHRcdFx0Ly8gYXNzdW1lZCB0byBiZSBVUkwtZW5jb2RlZCwgc28gd2UgVVJMLWVuY29kZSB0aGUgcmV0cmlldmVkIHZhbHVlIGhlcmVcclxuXHRcdFx0XHRcdGZpbGVVcmwgPSB0aGlzLndpbmRvd1sgMCBdLmVuY29kZVVSSUNvbXBvbmVudCggZmlsZVVybCApO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly9kb250IHVwZGF0ZSB0aGUgYmFzZSB0YWcgaWYgd2UgYXJlIHByZWZldGNoaW5nXHJcblx0XHRcdFx0aWYgKCBzZXR0aW5ncy5wcmVmZXRjaCA9PT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRcdFx0dGhpcy5fZ2V0QmFzZSgpLnNldCggZmlsZVVybCApO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Y29udGVudCA9IHRoaXMuX3BhcnNlKCBodG1sLCBmaWxlVXJsICk7XHJcblxyXG5cdFx0XHRcdHRoaXMuX3NldExvYWRlZFRpdGxlKCBjb250ZW50LCBodG1sICk7XHJcblxyXG5cdFx0XHRcdC8vIEFkZCB0aGUgY29udGVudCByZWZlcmVuY2UgYW5kIHhociB0byBvdXIgdHJpZ2dlckRhdGEuXHJcblx0XHRcdFx0dHJpZ2dlckRhdGEueGhyID0geGhyO1xyXG5cdFx0XHRcdHRyaWdnZXJEYXRhLnRleHRTdGF0dXMgPSB0ZXh0U3RhdHVzO1xyXG5cclxuXHRcdFx0XHQvLyBERVBSRUNBVEVEXHJcblx0XHRcdFx0dHJpZ2dlckRhdGEucGFnZSA9IGNvbnRlbnQ7XHJcblxyXG5cdFx0XHRcdHRyaWdnZXJEYXRhLmNvbnRlbnQgPSBjb250ZW50O1xyXG5cclxuXHRcdFx0XHR0cmlnZ2VyRGF0YS50b1BhZ2UgPSBjb250ZW50O1xyXG5cclxuXHRcdFx0XHQvLyBJZiB0aGUgZGVmYXVsdCBiZWhhdmlvciBpcyBwcmV2ZW50ZWQsIHN0b3AgaGVyZSFcclxuXHRcdFx0XHQvLyBOb3RlIHRoYXQgaXQgaXMgdGhlIHJlc3BvbnNpYmlsaXR5IG9mIHRoZSBsaXN0ZW5lci9oYW5kbGVyXHJcblx0XHRcdFx0Ly8gdGhhdCBjYWxsZWQgcHJldmVudERlZmF1bHQoKSwgdG8gcmVzb2x2ZS9yZWplY3QgdGhlXHJcblx0XHRcdFx0Ly8gZGVmZXJyZWQgb2JqZWN0IHdpdGhpbiB0aGUgdHJpZ2dlckRhdGEuXHJcblx0XHRcdFx0aWYgKCB0aGlzLl90cmlnZ2VyV2l0aERlcHJlY2F0ZWQoIFwibG9hZFwiLCB0cmlnZ2VyRGF0YSApLmV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpICkge1xyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gcmV3cml0ZSBzcmMgYW5kIGhyZWYgYXR0cnMgdG8gdXNlIGEgYmFzZSB1cmwgaWYgdGhlIGJhc2UgdGFnIHdvbid0IHdvcmtcclxuXHRcdFx0XHRpZiAoIHRoaXMuX2lzUmV3cml0YWJsZUJhc2VUYWcoKSAmJiBjb250ZW50ICkge1xyXG5cdFx0XHRcdFx0dGhpcy5fZ2V0QmFzZSgpLnJld3JpdGUoIGZpbGVVcmwsIGNvbnRlbnQgKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdHRoaXMuX2luY2x1ZGUoIGNvbnRlbnQsIHNldHRpbmdzICk7XHJcblxyXG5cdFx0XHRcdC8vIFJlbW92ZSBsb2FkaW5nIG1lc3NhZ2UuXHJcblx0XHRcdFx0aWYgKCBzZXR0aW5ncy5zaG93TG9hZE1zZyApIHtcclxuXHRcdFx0XHRcdHRoaXMuX2hpZGVMb2FkaW5nKCk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKCBhYnNVcmwsIHNldHRpbmdzLCBjb250ZW50ICk7XHJcblx0XHRcdH0sIHRoaXMpO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfbG9hZERlZmF1bHRzOiB7XHJcblx0XHRcdHR5cGU6IFwiZ2V0XCIsXHJcblx0XHRcdGRhdGE6IHVuZGVmaW5lZCxcclxuXHJcblx0XHRcdC8vIERFUFJFQ0FURURcclxuXHRcdFx0cmVsb2FkUGFnZTogZmFsc2UsXHJcblxyXG5cdFx0XHRyZWxvYWQ6IGZhbHNlLFxyXG5cclxuXHRcdFx0Ly8gQnkgZGVmYXVsdCB3ZSByZWx5IG9uIHRoZSByb2xlIGRlZmluZWQgYnkgdGhlIEBkYXRhLXJvbGUgYXR0cmlidXRlLlxyXG5cdFx0XHRyb2xlOiB1bmRlZmluZWQsXHJcblxyXG5cdFx0XHRzaG93TG9hZE1zZzogZmFsc2UsXHJcblxyXG5cdFx0XHQvLyBUaGlzIGRlbGF5IGFsbG93cyBsb2FkcyB0aGF0IHB1bGwgZnJvbSBicm93c2VyIGNhY2hlIHRvXHJcblx0XHRcdC8vIG9jY3VyIHdpdGhvdXQgc2hvd2luZyB0aGUgbG9hZGluZyBtZXNzYWdlLlxyXG5cdFx0XHRsb2FkTXNnRGVsYXk6IDUwXHJcblx0XHR9LFxyXG5cclxuXHRcdGxvYWQ6IGZ1bmN0aW9uKCB1cmwsIG9wdGlvbnMgKSB7XHJcblx0XHRcdC8vIFRoaXMgZnVuY3Rpb24gdXNlcyBkZWZlcnJlZCBub3RpZmljYXRpb25zIHRvIGxldCBjYWxsZXJzXHJcblx0XHRcdC8vIGtub3cgd2hlbiB0aGUgY29udGVudCBpcyBkb25lIGxvYWRpbmcsIG9yIGlmIGFuIGVycm9yIGhhcyBvY2N1cnJlZC5cclxuXHRcdFx0dmFyIGRlZmVycmVkID0gKCBvcHRpb25zICYmIG9wdGlvbnMuZGVmZXJyZWQgKSB8fCAkLkRlZmVycmVkKCksXHJcblxyXG5cdFx0XHRcdC8vIEV4YW1pbmluZyB0aGUgb3B0aW9uIFwicmVsb2FkUGFnZVwiIHBhc3NlZCBieSB0aGUgdXNlciBpcyBkZXByZWNhdGVkIGFzIG9mIDEuNC4wXHJcblx0XHRcdFx0Ly8gYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiAxLjUuMC5cclxuXHRcdFx0XHQvLyBDb3B5IG9wdGlvbiBcInJlbG9hZFBhZ2VcIiB0byBcInJlbG9hZFwiLCBidXQgb25seSBpZiBvcHRpb24gXCJyZWxvYWRcIiBpcyBub3QgcHJlc2VudFxyXG5cdFx0XHRcdHJlbG9hZE9wdGlvbkV4dGVuc2lvbiA9XHJcblx0XHRcdFx0XHQoICggb3B0aW9ucyAmJiBvcHRpb25zLnJlbG9hZCA9PT0gdW5kZWZpbmVkICYmXHJcblx0XHRcdFx0XHRcdG9wdGlvbnMucmVsb2FkUGFnZSAhPT0gdW5kZWZpbmVkICkgP1xyXG5cdFx0XHRcdFx0XHRcdHsgcmVsb2FkOiBvcHRpb25zLnJlbG9hZFBhZ2UgfSA6IHt9ICksXHJcblxyXG5cdFx0XHRcdC8vIFRoZSBkZWZhdWx0IGxvYWQgb3B0aW9ucyB3aXRoIG92ZXJyaWRlcyBzcGVjaWZpZWQgYnkgdGhlIGNhbGxlci5cclxuXHRcdFx0XHRzZXR0aW5ncyA9ICQuZXh0ZW5kKCB7fSwgdGhpcy5fbG9hZERlZmF1bHRzLCBvcHRpb25zLCByZWxvYWRPcHRpb25FeHRlbnNpb24gKSxcclxuXHJcblx0XHRcdFx0Ly8gVGhlIERPTSBlbGVtZW50IGZvciB0aGUgY29udGVudCBhZnRlciBpdCBoYXMgYmVlbiBsb2FkZWQuXHJcblx0XHRcdFx0Y29udGVudCA9IG51bGwsXHJcblxyXG5cdFx0XHRcdC8vIFRoZSBhYnNvbHV0ZSB2ZXJzaW9uIG9mIHRoZSBVUkwgcGFzc2VkIGludG8gdGhlIGZ1bmN0aW9uLiBUaGlzXHJcblx0XHRcdFx0Ly8gdmVyc2lvbiBvZiB0aGUgVVJMIG1heSBjb250YWluIGRpYWxvZy9zdWJjb250ZW50IHBhcmFtcyBpbiBpdC5cclxuXHRcdFx0XHRhYnNVcmwgPSAkLm1vYmlsZS5wYXRoLm1ha2VVcmxBYnNvbHV0ZSggdXJsLCB0aGlzLl9maW5kQmFzZVdpdGhEZWZhdWx0KCkgKSxcclxuXHRcdFx0XHRmaWxlVXJsLCBkYXRhVXJsLCBwYmxFdmVudCwgdHJpZ2dlckRhdGE7XHJcblxyXG5cdFx0XHQvLyBJZiB0aGUgY2FsbGVyIHByb3ZpZGVkIGRhdGEsIGFuZCB3ZSdyZSB1c2luZyBcImdldFwiIHJlcXVlc3QsXHJcblx0XHRcdC8vIGFwcGVuZCB0aGUgZGF0YSB0byB0aGUgVVJMLlxyXG5cdFx0XHRpZiAoIHNldHRpbmdzLmRhdGEgJiYgc2V0dGluZ3MudHlwZSA9PT0gXCJnZXRcIiApIHtcclxuXHRcdFx0XHRhYnNVcmwgPSAkLm1vYmlsZS5wYXRoLmFkZFNlYXJjaFBhcmFtcyggYWJzVXJsLCBzZXR0aW5ncy5kYXRhICk7XHJcblx0XHRcdFx0c2V0dGluZ3MuZGF0YSA9IHVuZGVmaW5lZDtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gSWYgdGhlIGNhbGxlciBpcyB1c2luZyBhIFwicG9zdFwiIHJlcXVlc3QsIHJlbG9hZCBtdXN0IGJlIHRydWVcclxuXHRcdFx0aWYgKCBzZXR0aW5ncy5kYXRhICYmIHNldHRpbmdzLnR5cGUgPT09IFwicG9zdFwiICkge1xyXG5cdFx0XHRcdHNldHRpbmdzLnJlbG9hZCA9IHRydWU7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIFRoZSBhYnNvbHV0ZSB2ZXJzaW9uIG9mIHRoZSBVUkwgbWludXMgYW55IGRpYWxvZy9zdWJjb250ZW50IHBhcmFtcy5cclxuXHRcdFx0Ly8gSW4gb3RoZXJ3b3JkcyB0aGUgcmVhbCBVUkwgb2YgdGhlIGNvbnRlbnQgdG8gYmUgbG9hZGVkLlxyXG5cdFx0XHRmaWxlVXJsID0gdGhpcy5fY3JlYXRlRmlsZVVybCggYWJzVXJsICk7XHJcblxyXG5cdFx0XHQvLyBUaGUgdmVyc2lvbiBvZiB0aGUgVXJsIGFjdHVhbGx5IHN0b3JlZCBpbiB0aGUgZGF0YS11cmwgYXR0cmlidXRlIG9mXHJcblx0XHRcdC8vIHRoZSBjb250ZW50LiBGb3IgZW1iZWRkZWQgY29udGVudCwgaXQgaXMganVzdCB0aGUgaWQgb2YgdGhlIHBhZ2UuIEZvclxyXG5cdFx0XHQvLyBjb250ZW50IHdpdGhpbiB0aGUgc2FtZSBkb21haW4gYXMgdGhlIGRvY3VtZW50IGJhc2UsIGl0IGlzIHRoZSBzaXRlXHJcblx0XHRcdC8vIHJlbGF0aXZlIHBhdGguIEZvciBjcm9zcy1kb21haW4gY29udGVudCAoUGhvbmUgR2FwIG9ubHkpIHRoZSBlbnRpcmVcclxuXHRcdFx0Ly8gYWJzb2x1dGUgVXJsIGlzIHVzZWQgdG8gbG9hZCB0aGUgY29udGVudC5cclxuXHRcdFx0ZGF0YVVybCA9IHRoaXMuX2NyZWF0ZURhdGFVcmwoIGFic1VybCApO1xyXG5cclxuXHRcdFx0Y29udGVudCA9IHRoaXMuX2ZpbmQoIGFic1VybCApO1xyXG5cclxuXHRcdFx0Ly8gSWYgaXQgaXNuJ3QgYSByZWZlcmVuY2UgdG8gdGhlIGZpcnN0IGNvbnRlbnQgYW5kIHJlZmVycyB0byBtaXNzaW5nXHJcblx0XHRcdC8vIGVtYmVkZGVkIGNvbnRlbnQgcmVqZWN0IHRoZSBkZWZlcnJlZCBhbmQgcmV0dXJuXHJcblx0XHRcdGlmICggY29udGVudC5sZW5ndGggPT09IDAgJiZcclxuXHRcdFx0XHQkLm1vYmlsZS5wYXRoLmlzRW1iZWRkZWRQYWdlKGZpbGVVcmwpICYmXHJcblx0XHRcdFx0ISQubW9iaWxlLnBhdGguaXNGaXJzdFBhZ2VVcmwoZmlsZVVybCkgKSB7XHJcblx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KCBhYnNVcmwsIHNldHRpbmdzICk7XHJcblx0XHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2UoKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gUmVzZXQgYmFzZSB0byB0aGUgZGVmYXVsdCBkb2N1bWVudCBiYXNlXHJcblx0XHRcdC8vIFRPRE8gZmlndXJlIG91dCB3aHkgd2UgZG9lIHRoaXNcclxuXHRcdFx0dGhpcy5fZ2V0QmFzZSgpLnJlc2V0KCk7XHJcblxyXG5cdFx0XHQvLyBJZiB0aGUgY29udGVudCB3ZSBhcmUgaW50ZXJlc3RlZCBpbiBpcyBhbHJlYWR5IGluIHRoZSBET00sXHJcblx0XHRcdC8vIGFuZCB0aGUgY2FsbGVyIGRpZCBub3QgaW5kaWNhdGUgdGhhdCB3ZSBzaG91bGQgZm9yY2UgYVxyXG5cdFx0XHQvLyByZWxvYWQgb2YgdGhlIGZpbGUsIHdlIGFyZSBkb25lLiBSZXNvbHZlIHRoZSBkZWZlcnJyZWQgc28gdGhhdFxyXG5cdFx0XHQvLyB1c2VycyBjYW4gYmluZCB0byAuZG9uZSBvbiB0aGUgcHJvbWlzZVxyXG5cdFx0XHRpZiAoIGNvbnRlbnQubGVuZ3RoICYmICFzZXR0aW5ncy5yZWxvYWQgKSB7XHJcblx0XHRcdFx0dGhpcy5fZW5oYW5jZSggY29udGVudCwgc2V0dGluZ3Mucm9sZSApO1xyXG5cdFx0XHRcdGRlZmVycmVkLnJlc29sdmUoIGFic1VybCwgc2V0dGluZ3MsIGNvbnRlbnQgKTtcclxuXHJcblx0XHRcdFx0Ly9pZiB3ZSBhcmUgcmVsb2FkaW5nIHRoZSBjb250ZW50IG1ha2Ugc3VyZSB3ZSB1cGRhdGVcclxuXHRcdFx0XHQvLyB0aGUgYmFzZSBpZiBpdHMgbm90IGEgcHJlZmV0Y2hcclxuXHRcdFx0XHRpZiAoICFzZXR0aW5ncy5wcmVmZXRjaCApIHtcclxuXHRcdFx0XHRcdHRoaXMuX2dldEJhc2UoKS5zZXQodXJsKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlKCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHRyaWdnZXJEYXRhID0ge1xyXG5cdFx0XHRcdHVybDogdXJsLFxyXG5cdFx0XHRcdGFic1VybDogYWJzVXJsLFxyXG5cdFx0XHRcdHRvUGFnZTogdXJsLFxyXG5cdFx0XHRcdHByZXZQYWdlOiBvcHRpb25zID8gb3B0aW9ucy5mcm9tUGFnZSA6IHVuZGVmaW5lZCxcclxuXHRcdFx0XHRkYXRhVXJsOiBkYXRhVXJsLFxyXG5cdFx0XHRcdGRlZmVycmVkOiBkZWZlcnJlZCxcclxuXHRcdFx0XHRvcHRpb25zOiBzZXR0aW5nc1xyXG5cdFx0XHR9O1xyXG5cclxuXHRcdFx0Ly8gTGV0IGxpc3RlbmVycyBrbm93IHdlJ3JlIGFib3V0IHRvIGxvYWQgY29udGVudC5cclxuXHRcdFx0cGJsRXZlbnQgPSB0aGlzLl90cmlnZ2VyV2l0aERlcHJlY2F0ZWQoIFwiYmVmb3JlbG9hZFwiLCB0cmlnZ2VyRGF0YSApO1xyXG5cclxuXHRcdFx0Ly8gSWYgdGhlIGRlZmF1bHQgYmVoYXZpb3IgaXMgcHJldmVudGVkLCBzdG9wIGhlcmUhXHJcblx0XHRcdGlmICggcGJsRXZlbnQuZGVwcmVjYXRlZEV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpIHx8XHJcblx0XHRcdFx0cGJsRXZlbnQuZXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkgKSB7XHJcblx0XHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2UoKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKCBzZXR0aW5ncy5zaG93TG9hZE1zZyApIHtcclxuXHRcdFx0XHR0aGlzLl9zaG93TG9hZGluZyggc2V0dGluZ3MubG9hZE1zZ0RlbGF5ICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIFJlc2V0IGJhc2UgdG8gdGhlIGRlZmF1bHQgZG9jdW1lbnQgYmFzZS5cclxuXHRcdFx0Ly8gb25seSByZXNldCBpZiB3ZSBhcmUgbm90IHByZWZldGNoaW5nXHJcblx0XHRcdGlmICggc2V0dGluZ3MucHJlZmV0Y2ggPT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0XHR0aGlzLl9nZXRCYXNlKCkucmVzZXQoKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKCAhKCAkLm1vYmlsZS5hbGxvd0Nyb3NzRG9tYWluUGFnZXMgfHxcclxuXHRcdFx0XHQkLm1vYmlsZS5wYXRoLmlzU2FtZURvbWFpbigkLm1vYmlsZS5wYXRoLmRvY3VtZW50VXJsLCBhYnNVcmwgKSApICkge1xyXG5cdFx0XHRcdGRlZmVycmVkLnJlamVjdCggYWJzVXJsLCBzZXR0aW5ncyApO1xyXG5cdFx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlKCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIExvYWQgdGhlIG5ldyBjb250ZW50LlxyXG5cdFx0XHQkLmFqYXgoe1xyXG5cdFx0XHRcdHVybDogZmlsZVVybCxcclxuXHRcdFx0XHR0eXBlOiBzZXR0aW5ncy50eXBlLFxyXG5cdFx0XHRcdGRhdGE6IHNldHRpbmdzLmRhdGEsXHJcblx0XHRcdFx0Y29udGVudFR5cGU6IHNldHRpbmdzLmNvbnRlbnRUeXBlLFxyXG5cdFx0XHRcdGRhdGFUeXBlOiBcImh0bWxcIixcclxuXHRcdFx0XHRzdWNjZXNzOiB0aGlzLl9sb2FkU3VjY2VzcyggYWJzVXJsLCB0cmlnZ2VyRGF0YSwgc2V0dGluZ3MsIGRlZmVycmVkICksXHJcblx0XHRcdFx0ZXJyb3I6IHRoaXMuX2xvYWRFcnJvciggYWJzVXJsLCB0cmlnZ2VyRGF0YSwgc2V0dGluZ3MsIGRlZmVycmVkIClcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZSgpO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfbG9hZEVycm9yOiBmdW5jdGlvbiggYWJzVXJsLCB0cmlnZ2VyRGF0YSwgc2V0dGluZ3MsIGRlZmVycmVkICkge1xyXG5cdFx0XHRyZXR1cm4gJC5wcm94eShmdW5jdGlvbiggeGhyLCB0ZXh0U3RhdHVzLCBlcnJvclRocm93biApIHtcclxuXHRcdFx0XHQvL3NldCBiYXNlIGJhY2sgdG8gY3VycmVudCBwYXRoXHJcblx0XHRcdFx0dGhpcy5fZ2V0QmFzZSgpLnNldCggJC5tb2JpbGUucGF0aC5nZXQoKSApO1xyXG5cclxuXHRcdFx0XHQvLyBBZGQgZXJyb3IgaW5mbyB0byBvdXIgdHJpZ2dlckRhdGEuXHJcblx0XHRcdFx0dHJpZ2dlckRhdGEueGhyID0geGhyO1xyXG5cdFx0XHRcdHRyaWdnZXJEYXRhLnRleHRTdGF0dXMgPSB0ZXh0U3RhdHVzO1xyXG5cdFx0XHRcdHRyaWdnZXJEYXRhLmVycm9yVGhyb3duID0gZXJyb3JUaHJvd247XHJcblxyXG5cdFx0XHRcdC8vIExldCBsaXN0ZW5lcnMga25vdyB0aGUgcGFnZSBsb2FkIGZhaWxlZC5cclxuXHRcdFx0XHR2YXIgcGxmRXZlbnQgPSB0aGlzLl90cmlnZ2VyV2l0aERlcHJlY2F0ZWQoIFwibG9hZGZhaWxlZFwiLCB0cmlnZ2VyRGF0YSApO1xyXG5cclxuXHRcdFx0XHQvLyBJZiB0aGUgZGVmYXVsdCBiZWhhdmlvciBpcyBwcmV2ZW50ZWQsIHN0b3AgaGVyZSFcclxuXHRcdFx0XHQvLyBOb3RlIHRoYXQgaXQgaXMgdGhlIHJlc3BvbnNpYmlsaXR5IG9mIHRoZSBsaXN0ZW5lci9oYW5kbGVyXHJcblx0XHRcdFx0Ly8gdGhhdCBjYWxsZWQgcHJldmVudERlZmF1bHQoKSwgdG8gcmVzb2x2ZS9yZWplY3QgdGhlXHJcblx0XHRcdFx0Ly8gZGVmZXJyZWQgb2JqZWN0IHdpdGhpbiB0aGUgdHJpZ2dlckRhdGEuXHJcblx0XHRcdFx0aWYgKCBwbGZFdmVudC5kZXByZWNhdGVkRXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkgfHxcclxuXHRcdFx0XHRcdHBsZkV2ZW50LmV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpICkge1xyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gUmVtb3ZlIGxvYWRpbmcgbWVzc2FnZS5cclxuXHRcdFx0XHRpZiAoIHNldHRpbmdzLnNob3dMb2FkTXNnICkge1xyXG5cdFx0XHRcdFx0dGhpcy5fc2hvd0Vycm9yKCk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRkZWZlcnJlZC5yZWplY3QoIGFic1VybCwgc2V0dGluZ3MgKTtcclxuXHRcdFx0fSwgdGhpcyk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9nZXRUcmFuc2l0aW9uSGFuZGxlcjogZnVuY3Rpb24oIHRyYW5zaXRpb24gKSB7XHJcblx0XHRcdHRyYW5zaXRpb24gPSAkLm1vYmlsZS5fbWF5YmVEZWdyYWRlVHJhbnNpdGlvbiggdHJhbnNpdGlvbiApO1xyXG5cclxuXHRcdFx0Ly9maW5kIHRoZSB0cmFuc2l0aW9uIGhhbmRsZXIgZm9yIHRoZSBzcGVjaWZpZWQgdHJhbnNpdGlvbi4gSWYgdGhlcmVcclxuXHRcdFx0Ly9pc24ndCBvbmUgaW4gb3VyIHRyYW5zaXRpb25IYW5kbGVycyBkaWN0aW9uYXJ5LCB1c2UgdGhlIGRlZmF1bHQgb25lLlxyXG5cdFx0XHQvL2NhbGwgdGhlIGhhbmRsZXIgaW1tZWRpYXRlbHkgdG8ga2ljay1vZmYgdGhlIHRyYW5zaXRpb24uXHJcblx0XHRcdHJldHVybiAkLm1vYmlsZS50cmFuc2l0aW9uSGFuZGxlcnNbIHRyYW5zaXRpb24gXSB8fCAkLm1vYmlsZS5kZWZhdWx0VHJhbnNpdGlvbkhhbmRsZXI7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vIFRPRE8gbW92ZSBpbnRvIHRyYW5zaXRpb24gaGFuZGxlcnM/XHJcblx0XHRfdHJpZ2dlckNzc1RyYW5zaXRpb25FdmVudHM6IGZ1bmN0aW9uKCB0bywgZnJvbSwgcHJlZml4ICkge1xyXG5cdFx0XHR2YXIgc2FtZVBhZ2UgPSBmYWxzZTtcclxuXHJcblx0XHRcdHByZWZpeCA9IHByZWZpeCB8fCBcIlwiO1xyXG5cclxuXHRcdFx0Ly8gVE9ETyBkZWNpZGUgaWYgdGhlc2UgZXZlbnRzIHNob3VsZCBpbiBmYWN0IGJlIHRyaWdnZXJlZCBvbiB0aGUgY29udGFpbmVyXHJcblx0XHRcdGlmICggZnJvbSApIHtcclxuXHJcblx0XHRcdFx0Ly9DaGVjayBpZiB0aGlzIGlzIGEgc2FtZSBwYWdlIHRyYW5zaXRpb24gYW5kIHRlbGwgdGhlIGhhbmRsZXIgaW4gcGFnZVxyXG5cdFx0XHRcdGlmKCB0b1swXSA9PT0gZnJvbVswXSApe1xyXG5cdFx0XHRcdFx0c2FtZVBhZ2UgPSB0cnVlO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly90cmlnZ2VyIGJlZm9yZSBzaG93L2hpZGUgZXZlbnRzXHJcblx0XHRcdFx0Ly8gVE9ETyBkZXByZWNhdGUgbmV4dFBhZ2UgaW4gZmF2b3Igb2YgbmV4dFxyXG5cdFx0XHRcdHRoaXMuX3RyaWdnZXJXaXRoRGVwcmVjYXRlZCggcHJlZml4ICsgXCJoaWRlXCIsIHtcclxuXHJcblx0XHRcdFx0XHQvLyBEZXByZWNhdGVkIGluIDEuNCByZW1vdmUgaW4gMS41XHJcblx0XHRcdFx0XHRuZXh0UGFnZTogdG8sXHJcblx0XHRcdFx0XHR0b1BhZ2U6IHRvLFxyXG5cdFx0XHRcdFx0cHJldlBhZ2U6IGZyb20sXHJcblx0XHRcdFx0XHRzYW1lUGFnZTogc2FtZVBhZ2VcclxuXHRcdFx0XHR9LCBmcm9tICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIFRPRE8gZGVwcmVjYXRlIHByZXZQYWdlIGluIGZhdm9yIG9mIHByZXZpb3VzXHJcblx0XHRcdHRoaXMuX3RyaWdnZXJXaXRoRGVwcmVjYXRlZCggcHJlZml4ICsgXCJzaG93XCIsIHtcclxuXHRcdFx0XHRwcmV2UGFnZTogZnJvbSB8fCAkKCBcIlwiICksXHJcblx0XHRcdFx0dG9QYWdlOiB0b1xyXG5cdFx0XHR9LCB0byApO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvLyBUT0RPIG1ha2UgcHJpdmF0ZSBvbmNlIGNoYW5nZSBoYXMgYmVlbiBkZWZpbmVkIGluIHRoZSB3aWRnZXRcclxuXHRcdF9jc3NUcmFuc2l0aW9uOiBmdW5jdGlvbiggdG8sIGZyb20sIG9wdGlvbnMgKSB7XHJcblx0XHRcdHZhciB0cmFuc2l0aW9uID0gb3B0aW9ucy50cmFuc2l0aW9uLFxyXG5cdFx0XHRcdHJldmVyc2UgPSBvcHRpb25zLnJldmVyc2UsXHJcblx0XHRcdFx0ZGVmZXJyZWQgPSBvcHRpb25zLmRlZmVycmVkLFxyXG5cdFx0XHRcdFRyYW5zaXRpb25IYW5kbGVyLFxyXG5cdFx0XHRcdHByb21pc2U7XHJcblxyXG5cdFx0XHR0aGlzLl90cmlnZ2VyQ3NzVHJhbnNpdGlvbkV2ZW50cyggdG8sIGZyb20sIFwiYmVmb3JlXCIgKTtcclxuXHJcblx0XHRcdC8vIFRPRE8gcHV0IHRoaXMgaW4gYSBiaW5kaW5nIHRvIGV2ZW50cyAqb3V0c2lkZSogdGhlIHdpZGdldFxyXG5cdFx0XHR0aGlzLl9oaWRlTG9hZGluZygpO1xyXG5cclxuXHRcdFx0VHJhbnNpdGlvbkhhbmRsZXIgPSB0aGlzLl9nZXRUcmFuc2l0aW9uSGFuZGxlciggdHJhbnNpdGlvbiApO1xyXG5cclxuXHRcdFx0cHJvbWlzZSA9ICggbmV3IFRyYW5zaXRpb25IYW5kbGVyKCB0cmFuc2l0aW9uLCByZXZlcnNlLCB0bywgZnJvbSApICkudHJhbnNpdGlvbigpO1xyXG5cclxuXHRcdFx0cHJvbWlzZS5kb25lKCAkLnByb3h5KCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR0aGlzLl90cmlnZ2VyQ3NzVHJhbnNpdGlvbkV2ZW50cyggdG8sIGZyb20gKTtcclxuXHRcdFx0fSwgdGhpcyApKTtcclxuXHJcblx0XHRcdC8vIFRPRE8gdGVtcG9yYXJ5IGFjY29tb2RhdGlvbiBvZiBhcmd1bWVudCBkZWZlcnJlZFxyXG5cdFx0XHRwcm9taXNlLmRvbmUoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZS5hcHBseSggZGVmZXJyZWQsIGFyZ3VtZW50cyApO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X3JlbGVhc2VUcmFuc2l0aW9uTG9jazogZnVuY3Rpb24oKSB7XHJcblx0XHRcdC8vcmVsZWFzZSB0cmFuc2l0aW9uIGxvY2sgc28gbmF2aWdhdGlvbiBpcyBmcmVlIGFnYWluXHJcblx0XHRcdGlzUGFnZVRyYW5zaXRpb25pbmcgPSBmYWxzZTtcclxuXHRcdFx0aWYgKCBwYWdlVHJhbnNpdGlvblF1ZXVlLmxlbmd0aCA+IDAgKSB7XHJcblx0XHRcdFx0JC5tb2JpbGUuY2hhbmdlUGFnZS5hcHBseSggbnVsbCwgcGFnZVRyYW5zaXRpb25RdWV1ZS5wb3AoKSApO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHRcdF9yZW1vdmVBY3RpdmVMaW5rQ2xhc3M6IGZ1bmN0aW9uKCBmb3JjZSApIHtcclxuXHRcdFx0Ly9jbGVhciBvdXQgdGhlIGFjdGl2ZSBidXR0b24gc3RhdGVcclxuXHRcdFx0JC5tb2JpbGUucmVtb3ZlQWN0aXZlTGlua0NsYXNzKCBmb3JjZSApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfbG9hZFVybDogZnVuY3Rpb24oIHRvLCB0cmlnZ2VyRGF0YSwgc2V0dGluZ3MgKSB7XHJcblx0XHRcdC8vIHByZXNlcnZlIHRoZSBvcmlnaW5hbCB0YXJnZXQgYXMgdGhlIGRhdGFVcmwgdmFsdWUgd2lsbCBiZVxyXG5cdFx0XHQvLyBzaW1wbGlmaWVkIGVnLCByZW1vdmluZyB1aS1zdGF0ZSwgYW5kIHJlbW92aW5nIHF1ZXJ5IHBhcmFtc1xyXG5cdFx0XHQvLyBmcm9tIHRoZSBoYXNoIHRoaXMgaXMgc28gdGhhdCB1c2VycyB3aG8gd2FudCB0byB1c2UgcXVlcnlcclxuXHRcdFx0Ly8gcGFyYW1zIGhhdmUgYWNjZXNzIHRvIHRoZW0gaW4gdGhlIGV2ZW50IGJpbmRpbmdzIGZvciB0aGUgcGFnZVxyXG5cdFx0XHQvLyBsaWZlIGN5Y2xlIFNlZSBpc3N1ZSAjNTA4NVxyXG5cdFx0XHRzZXR0aW5ncy50YXJnZXQgPSB0bztcclxuXHRcdFx0c2V0dGluZ3MuZGVmZXJyZWQgPSAkLkRlZmVycmVkKCk7XHJcblxyXG5cdFx0XHR0aGlzLmxvYWQoIHRvLCBzZXR0aW5ncyApO1xyXG5cclxuXHRcdFx0c2V0dGluZ3MuZGVmZXJyZWQuZG9uZSgkLnByb3h5KGZ1bmN0aW9uKCB1cmwsIG9wdGlvbnMsIGNvbnRlbnQgKSB7XHJcblx0XHRcdFx0aXNQYWdlVHJhbnNpdGlvbmluZyA9IGZhbHNlO1xyXG5cclxuXHRcdFx0XHQvLyBzdG9yZSB0aGUgb3JpZ2luYWwgYWJzb2x1dGUgdXJsIHNvIHRoYXQgaXQgY2FuIGJlIHByb3ZpZGVkXHJcblx0XHRcdFx0Ly8gdG8gZXZlbnRzIGluIHRoZSB0cmlnZ2VyRGF0YSBvZiB0aGUgc3Vic2VxdWVudCBjaGFuZ2VQYWdlIGNhbGxcclxuXHRcdFx0XHRvcHRpb25zLmFic1VybCA9IHRyaWdnZXJEYXRhLmFic1VybDtcclxuXHJcblx0XHRcdFx0dGhpcy50cmFuc2l0aW9uKCBjb250ZW50LCB0cmlnZ2VyRGF0YSwgb3B0aW9ucyApO1xyXG5cdFx0XHR9LCB0aGlzKSk7XHJcblxyXG5cdFx0XHRzZXR0aW5ncy5kZWZlcnJlZC5mYWlsKCQucHJveHkoZnVuY3Rpb24oLyogdXJsLCBvcHRpb25zICovKSB7XHJcblx0XHRcdFx0dGhpcy5fcmVtb3ZlQWN0aXZlTGlua0NsYXNzKCB0cnVlICk7XHJcblx0XHRcdFx0dGhpcy5fcmVsZWFzZVRyYW5zaXRpb25Mb2NrKCk7XHJcblx0XHRcdFx0dGhpcy5fdHJpZ2dlcldpdGhEZXByZWNhdGVkKCBcImNoYW5nZWZhaWxlZFwiLCB0cmlnZ2VyRGF0YSApO1xyXG5cdFx0XHR9LCB0aGlzKSk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF90cmlnZ2VyUGFnZUJlZm9yZUNoYW5nZTogZnVuY3Rpb24oIHRvLCB0cmlnZ2VyRGF0YSwgc2V0dGluZ3MgKSB7XHJcblx0XHRcdHZhciByZXR1cm5FdmVudHM7XHJcblxyXG5cdFx0XHR0cmlnZ2VyRGF0YS5wcmV2UGFnZSA9IHRoaXMuYWN0aXZlUGFnZTtcclxuXHRcdFx0JC5leHRlbmQoIHRyaWdnZXJEYXRhLCB7XHJcblx0XHRcdFx0dG9QYWdlOiB0byxcclxuXHRcdFx0XHRvcHRpb25zOiBzZXR0aW5nc1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdC8vIE5PVEU6IHByZXNlcnZlIHRoZSBvcmlnaW5hbCB0YXJnZXQgYXMgdGhlIGRhdGFVcmwgdmFsdWUgd2lsbCBiZVxyXG5cdFx0XHQvLyBzaW1wbGlmaWVkIGVnLCByZW1vdmluZyB1aS1zdGF0ZSwgYW5kIHJlbW92aW5nIHF1ZXJ5IHBhcmFtcyBmcm9tXHJcblx0XHRcdC8vIHRoZSBoYXNoIHRoaXMgaXMgc28gdGhhdCB1c2VycyB3aG8gd2FudCB0byB1c2UgcXVlcnkgcGFyYW1zIGhhdmVcclxuXHRcdFx0Ly8gYWNjZXNzIHRvIHRoZW0gaW4gdGhlIGV2ZW50IGJpbmRpbmdzIGZvciB0aGUgcGFnZSBsaWZlIGN5Y2xlXHJcblx0XHRcdC8vIFNlZSBpc3N1ZSAjNTA4NVxyXG5cdFx0XHRpZiAoICQudHlwZSh0bykgPT09IFwic3RyaW5nXCIgKSB7XHJcblx0XHRcdFx0Ly8gaWYgdGhlIHRvUGFnZSBpcyBhIHN0cmluZyBzaW1wbHkgY29udmVydCBpdFxyXG5cdFx0XHRcdHRyaWdnZXJEYXRhLmFic1VybCA9ICQubW9iaWxlLnBhdGgubWFrZVVybEFic29sdXRlKCB0bywgdGhpcy5fZmluZEJhc2VXaXRoRGVmYXVsdCgpICk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0Ly8gaWYgdGhlIHRvUGFnZSBpcyBhIGpRdWVyeSBvYmplY3QgZ3JhYiB0aGUgYWJzb2x1dGUgdXJsIHN0b3JlZFxyXG5cdFx0XHRcdC8vIGluIHRoZSBsb2FkUGFnZSBjYWxsYmFjayB3aGVyZSBpdCBleGlzdHNcclxuXHRcdFx0XHR0cmlnZ2VyRGF0YS5hYnNVcmwgPSBzZXR0aW5ncy5hYnNVcmw7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIExldCBsaXN0ZW5lcnMga25vdyB3ZSdyZSBhYm91dCB0byBjaGFuZ2UgdGhlIGN1cnJlbnQgcGFnZS5cclxuXHRcdFx0cmV0dXJuRXZlbnRzID0gdGhpcy5fdHJpZ2dlcldpdGhEZXByZWNhdGVkKCBcImJlZm9yZWNoYW5nZVwiLCB0cmlnZ2VyRGF0YSApO1xyXG5cclxuXHRcdFx0Ly8gSWYgdGhlIGRlZmF1bHQgYmVoYXZpb3IgaXMgcHJldmVudGVkLCBzdG9wIGhlcmUhXHJcblx0XHRcdGlmICggcmV0dXJuRXZlbnRzLmV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpIHx8XHJcblx0XHRcdFx0cmV0dXJuRXZlbnRzLmRlcHJlY2F0ZWRFdmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSApIHtcclxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0fSxcclxuXHJcblx0XHRjaGFuZ2U6IGZ1bmN0aW9uKCB0bywgb3B0aW9ucyApIHtcclxuXHRcdFx0Ly8gSWYgd2UgYXJlIGluIHRoZSBtaWRzdCBvZiBhIHRyYW5zaXRpb24sIHF1ZXVlIHRoZSBjdXJyZW50IHJlcXVlc3QuXHJcblx0XHRcdC8vIFdlJ2xsIGNhbGwgY2hhbmdlUGFnZSgpIG9uY2Ugd2UncmUgZG9uZSB3aXRoIHRoZSBjdXJyZW50IHRyYW5zaXRpb25cclxuXHRcdFx0Ly8gdG8gc2VydmljZSB0aGUgcmVxdWVzdC5cclxuXHRcdFx0aWYgKCBpc1BhZ2VUcmFuc2l0aW9uaW5nICkge1xyXG5cdFx0XHRcdHBhZ2VUcmFuc2l0aW9uUXVldWUudW5zaGlmdCggYXJndW1lbnRzICk7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR2YXIgc2V0dGluZ3MgPSAkLmV4dGVuZCgge30sICQubW9iaWxlLmNoYW5nZVBhZ2UuZGVmYXVsdHMsIG9wdGlvbnMgKSxcclxuXHRcdFx0XHR0cmlnZ2VyRGF0YSA9IHt9O1xyXG5cclxuXHRcdFx0Ly8gTWFrZSBzdXJlIHdlIGhhdmUgYSBmcm9tUGFnZS5cclxuXHRcdFx0c2V0dGluZ3MuZnJvbVBhZ2UgPSBzZXR0aW5ncy5mcm9tUGFnZSB8fCB0aGlzLmFjdGl2ZVBhZ2U7XHJcblxyXG5cdFx0XHQvLyBpZiB0aGUgcGFnZSBiZWZvcmVjaGFuZ2UgZGVmYXVsdCBpcyBwcmV2ZW50ZWQgcmV0dXJuIGVhcmx5XHJcblx0XHRcdGlmICggIXRoaXMuX3RyaWdnZXJQYWdlQmVmb3JlQ2hhbmdlKHRvLCB0cmlnZ2VyRGF0YSwgc2V0dGluZ3MpICkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gV2UgYWxsb3cgXCJwYWdlYmVmb3JlY2hhbmdlXCIgb2JzZXJ2ZXJzIHRvIG1vZGlmeSB0aGUgdG8gaW5cclxuXHRcdFx0Ly8gdGhlIHRyaWdnZXIgZGF0YSB0byBhbGxvdyBmb3IgcmVkaXJlY3RzLiBNYWtlIHN1cmUgb3VyIHRvIGlzXHJcblx0XHRcdC8vIHVwZGF0ZWQuIFdlIGFsc28gbmVlZCB0byByZS1ldmFsdWF0ZSB3aGV0aGVyIGl0IGlzIGEgc3RyaW5nLFxyXG5cdFx0XHQvLyBiZWNhdXNlIGFuIG9iamVjdCBjYW4gYWxzbyBiZSByZXBsYWNlZCBieSBhIHN0cmluZ1xyXG5cdFx0XHR0byA9IHRyaWdnZXJEYXRhLnRvUGFnZTtcclxuXHJcblx0XHRcdC8vIElmIHRoZSBjYWxsZXIgcGFzc2VkIHVzIGEgdXJsLCBjYWxsIGxvYWRQYWdlKClcclxuXHRcdFx0Ly8gdG8gbWFrZSBzdXJlIGl0IGlzIGxvYWRlZCBpbnRvIHRoZSBET00uIFdlJ2xsIGxpc3RlblxyXG5cdFx0XHQvLyB0byB0aGUgcHJvbWlzZSBvYmplY3QgaXQgcmV0dXJucyBzbyB3ZSBrbm93IHdoZW5cclxuXHRcdFx0Ly8gaXQgaXMgZG9uZSBsb2FkaW5nIG9yIGlmIGFuIGVycm9yIG9jdXJyZWQuXHJcblx0XHRcdGlmICggJC50eXBlKHRvKSA9PT0gXCJzdHJpbmdcIiApIHtcclxuXHRcdFx0XHQvLyBTZXQgdGhlIGlzUGFnZVRyYW5zaXRpb25pbmcgZmxhZyB0byBwcmV2ZW50IGFueSByZXF1ZXN0cyBmcm9tXHJcblx0XHRcdFx0Ly8gZW50ZXJpbmcgdGhpcyBtZXRob2Qgd2hpbGUgd2UgYXJlIGluIHRoZSBtaWRzdCBvZiBsb2FkaW5nIGEgcGFnZVxyXG5cdFx0XHRcdC8vIG9yIHRyYW5zaXRpb25pbmcuXHJcblx0XHRcdFx0aXNQYWdlVHJhbnNpdGlvbmluZyA9IHRydWU7XHJcblxyXG5cdFx0XHRcdHRoaXMuX2xvYWRVcmwoIHRvLCB0cmlnZ2VyRGF0YSwgc2V0dGluZ3MgKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHR0aGlzLnRyYW5zaXRpb24oIHRvLCB0cmlnZ2VyRGF0YSwgc2V0dGluZ3MgKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHJcblx0XHR0cmFuc2l0aW9uOiBmdW5jdGlvbiggdG9QYWdlLCB0cmlnZ2VyRGF0YSwgc2V0dGluZ3MgKSB7XHJcblx0XHRcdHZhciBmcm9tUGFnZSwgdXJsLCBwYWdlVXJsLCBmaWxlVXJsLFxyXG5cdFx0XHRcdGFjdGl2ZSwgYWN0aXZlSXNJbml0aWFsUGFnZSxcclxuXHRcdFx0XHRoaXN0b3J5RGlyLCBwYWdlVGl0bGUsIGlzRGlhbG9nLFxyXG5cdFx0XHRcdGFscmVhZHlUaGVyZSwgbmV3UGFnZVRpdGxlLFxyXG5cdFx0XHRcdHBhcmFtcyxcdGNzc1RyYW5zaXRpb25EZWZlcnJlZCxcclxuXHRcdFx0XHRiZWZvcmVUcmFuc2l0aW9uO1xyXG5cclxuXHRcdFx0Ly8gSWYgd2UgYXJlIGluIHRoZSBtaWRzdCBvZiBhIHRyYW5zaXRpb24sIHF1ZXVlIHRoZSBjdXJyZW50IHJlcXVlc3QuXHJcblx0XHRcdC8vIFdlJ2xsIGNhbGwgY2hhbmdlUGFnZSgpIG9uY2Ugd2UncmUgZG9uZSB3aXRoIHRoZSBjdXJyZW50IHRyYW5zaXRpb25cclxuXHRcdFx0Ly8gdG8gc2VydmljZSB0aGUgcmVxdWVzdC5cclxuXHRcdFx0aWYgKCBpc1BhZ2VUcmFuc2l0aW9uaW5nICkge1xyXG5cdFx0XHRcdC8vIG1ha2Ugc3VyZSB0byBvbmx5IHF1ZXVlIHRoZSB0byBhbmQgc2V0dGluZ3MgdmFsdWVzIHNvIHRoZSBhcmd1bWVudHNcclxuXHRcdFx0XHQvLyB3b3JrIHdpdGggYSBjYWxsIHRvIHRoZSBjaGFuZ2UgbWV0aG9kXHJcblx0XHRcdFx0cGFnZVRyYW5zaXRpb25RdWV1ZS51bnNoaWZ0KCBbdG9QYWdlLCBzZXR0aW5nc10gKTtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIERFUFJFQ0FURUQgLSB0aGlzIGNhbGwgb25seSwgaW4gZmF2b3Igb2YgdGhlIGJlZm9yZSB0cmFuc2l0aW9uXHJcblx0XHRcdC8vIGlmIHRoZSBwYWdlIGJlZm9yZWNoYW5nZSBkZWZhdWx0IGlzIHByZXZlbnRlZCByZXR1cm4gZWFybHlcclxuXHRcdFx0aWYgKCAhdGhpcy5fdHJpZ2dlclBhZ2VCZWZvcmVDaGFuZ2UodG9QYWdlLCB0cmlnZ2VyRGF0YSwgc2V0dGluZ3MpICkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dHJpZ2dlckRhdGEucHJldlBhZ2UgPSBzZXR0aW5ncy5mcm9tUGFnZTtcclxuXHRcdFx0Ly8gaWYgdGhlIChjb250ZW50fHBhZ2UpYmVmb3JldHJhbnNpdGlvbiBkZWZhdWx0IGlzIHByZXZlbnRlZCByZXR1cm4gZWFybHlcclxuXHRcdFx0Ly8gTm90ZSwgd2UgaGF2ZSB0byBjaGVjayBmb3IgYm90aCB0aGUgZGVwcmVjYXRlZCBhbmQgbmV3IGV2ZW50c1xyXG5cdFx0XHRiZWZvcmVUcmFuc2l0aW9uID0gdGhpcy5fdHJpZ2dlcldpdGhEZXByZWNhdGVkKCBcImJlZm9yZXRyYW5zaXRpb25cIiwgdHJpZ2dlckRhdGEgKTtcclxuXHRcdFx0aWYgKGJlZm9yZVRyYW5zaXRpb24uZGVwcmVjYXRlZEV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpIHx8XHJcblx0XHRcdFx0YmVmb3JlVHJhbnNpdGlvbi5ldmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSApIHtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIFNldCB0aGUgaXNQYWdlVHJhbnNpdGlvbmluZyBmbGFnIHRvIHByZXZlbnQgYW55IHJlcXVlc3RzIGZyb21cclxuXHRcdFx0Ly8gZW50ZXJpbmcgdGhpcyBtZXRob2Qgd2hpbGUgd2UgYXJlIGluIHRoZSBtaWRzdCBvZiBsb2FkaW5nIGEgcGFnZVxyXG5cdFx0XHQvLyBvciB0cmFuc2l0aW9uaW5nLlxyXG5cdFx0XHRpc1BhZ2VUcmFuc2l0aW9uaW5nID0gdHJ1ZTtcclxuXHJcblx0XHRcdC8vIElmIHdlIGFyZSBnb2luZyB0byB0aGUgZmlyc3QtcGFnZSBvZiB0aGUgYXBwbGljYXRpb24sIHdlIG5lZWQgdG8gbWFrZVxyXG5cdFx0XHQvLyBzdXJlIHNldHRpbmdzLmRhdGFVcmwgaXMgc2V0IHRvIHRoZSBhcHBsaWNhdGlvbiBkb2N1bWVudCB1cmwuIFRoaXMgYWxsb3dzXHJcblx0XHRcdC8vIHVzIHRvIGF2b2lkIGdlbmVyYXRpbmcgYSBkb2N1bWVudCB1cmwgd2l0aCBhbiBpZCBoYXNoIGluIHRoZSBjYXNlIHdoZXJlIHRoZVxyXG5cdFx0XHQvLyBmaXJzdC1wYWdlIG9mIHRoZSBkb2N1bWVudCBoYXMgYW4gaWQgYXR0cmlidXRlIHNwZWNpZmllZC5cclxuXHRcdFx0aWYgKCB0b1BhZ2VbIDAgXSA9PT0gJC5tb2JpbGUuZmlyc3RQYWdlWyAwIF0gJiYgIXNldHRpbmdzLmRhdGFVcmwgKSB7XHJcblx0XHRcdFx0c2V0dGluZ3MuZGF0YVVybCA9ICQubW9iaWxlLnBhdGguZG9jdW1lbnRVcmwuaHJlZk5vSGFzaDtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gVGhlIGNhbGxlciBwYXNzZWQgdXMgYSByZWFsIHBhZ2UgRE9NIGVsZW1lbnQuIFVwZGF0ZSBvdXJcclxuXHRcdFx0Ly8gaW50ZXJuYWwgc3RhdGUgYW5kIHRoZW4gdHJpZ2dlciBhIHRyYW5zaXRpb24gdG8gdGhlIHBhZ2UuXHJcblx0XHRcdGZyb21QYWdlID0gc2V0dGluZ3MuZnJvbVBhZ2U7XHJcblx0XHRcdHVybCA9ICggc2V0dGluZ3MuZGF0YVVybCAmJiAkLm1vYmlsZS5wYXRoLmNvbnZlcnRVcmxUb0RhdGFVcmwoc2V0dGluZ3MuZGF0YVVybCkgKSB8fFxyXG5cdFx0XHRcdHRvUGFnZS5qcW1EYXRhKCBcInVybFwiICk7XHJcblxyXG5cdFx0XHQvLyBUaGUgcGFnZVVybCB2YXIgaXMgdXN1YWxseSB0aGUgc2FtZSBhcyB1cmwsIGV4Y2VwdCB3aGVuIHVybCBpcyBvYnNjdXJlZFxyXG5cdFx0XHQvLyBhcyBhIGRpYWxvZyB1cmwuIHBhZ2VVcmwgYWx3YXlzIGNvbnRhaW5zIHRoZSBmaWxlIHBhdGhcclxuXHRcdFx0cGFnZVVybCA9IHVybDtcclxuXHRcdFx0ZmlsZVVybCA9ICQubW9iaWxlLnBhdGguZ2V0RmlsZVBhdGgoIHVybCApO1xyXG5cdFx0XHRhY3RpdmUgPSAkLm1vYmlsZS5uYXZpZ2F0ZS5oaXN0b3J5LmdldEFjdGl2ZSgpO1xyXG5cdFx0XHRhY3RpdmVJc0luaXRpYWxQYWdlID0gJC5tb2JpbGUubmF2aWdhdGUuaGlzdG9yeS5hY3RpdmVJbmRleCA9PT0gMDtcclxuXHRcdFx0aGlzdG9yeURpciA9IDA7XHJcblx0XHRcdHBhZ2VUaXRsZSA9IGRvY3VtZW50LnRpdGxlO1xyXG5cdFx0XHRpc0RpYWxvZyA9ICggc2V0dGluZ3Mucm9sZSA9PT0gXCJkaWFsb2dcIiB8fFxyXG5cdFx0XHRcdHRvUGFnZS5qcW1EYXRhKCBcInJvbGVcIiApID09PSBcImRpYWxvZ1wiICkgJiZcclxuXHRcdFx0XHR0b1BhZ2UuanFtRGF0YSggXCJkaWFsb2dcIiApICE9PSB0cnVlO1xyXG5cclxuXHRcdFx0Ly8gQnkgZGVmYXVsdCwgd2UgcHJldmVudCBjaGFuZ2VQYWdlIHJlcXVlc3RzIHdoZW4gdGhlIGZyb21QYWdlIGFuZCB0b1BhZ2VcclxuXHRcdFx0Ly8gYXJlIHRoZSBzYW1lIGVsZW1lbnQsIGJ1dCBmb2xrcyB0aGF0IGdlbmVyYXRlIGNvbnRlbnRcclxuXHRcdFx0Ly8gbWFudWFsbHkvZHluYW1pY2FsbHkgYW5kIHJldXNlIHBhZ2VzIHdhbnQgdG8gYmUgYWJsZSB0byB0cmFuc2l0aW9uIHRvXHJcblx0XHRcdC8vIHRoZSBzYW1lIHBhZ2UuIFRvIGFsbG93IHRoaXMsIHRoZXkgd2lsbCBuZWVkIHRvIGNoYW5nZSB0aGUgZGVmYXVsdFxyXG5cdFx0XHQvLyB2YWx1ZSBvZiBhbGxvd1NhbWVQYWdlVHJhbnNpdGlvbiB0byB0cnVlLCAqT1IqLCBwYXNzIGl0IGluIGFzIGFuXHJcblx0XHRcdC8vIG9wdGlvbiB3aGVuIHRoZXkgbWFudWFsbHkgY2FsbCBjaGFuZ2VQYWdlKCkuIEl0IHNob3VsZCBiZSBub3RlZCB0aGF0XHJcblx0XHRcdC8vIG91ciBkZWZhdWx0IHRyYW5zaXRpb24gYW5pbWF0aW9ucyBhc3N1bWUgdGhhdCB0aGUgZm9ybVBhZ2UgYW5kIHRvUGFnZVxyXG5cdFx0XHQvLyBhcmUgZGlmZmVyZW50IGVsZW1lbnRzLCBzbyB0aGV5IG1heSBiZWhhdmUgdW5leHBlY3RlZGx5LiBJdCBpcyB1cCB0b1xyXG5cdFx0XHQvLyB0aGUgZGV2ZWxvcGVyIHRoYXQgdHVybnMgb24gdGhlIGFsbG93U2FtZVBhZ2VUcmFuc2l0aW9uYSBvcHRpb24gdG9cclxuXHRcdFx0Ly8gZWl0aGVyIHR1cm4gb2ZmIHRyYW5zaXRpb24gYW5pbWF0aW9ucywgb3IgbWFrZSBzdXJlIHRoYXQgYW4gYXBwcm9wcmlhdGVcclxuXHRcdFx0Ly8gYW5pbWF0aW9uIHRyYW5zaXRpb24gaXMgdXNlZC5cclxuXHRcdFx0aWYgKCBmcm9tUGFnZSAmJiBmcm9tUGFnZVswXSA9PT0gdG9QYWdlWzBdICYmXHJcblx0XHRcdFx0IXNldHRpbmdzLmFsbG93U2FtZVBhZ2VUcmFuc2l0aW9uICkge1xyXG5cclxuXHRcdFx0XHRpc1BhZ2VUcmFuc2l0aW9uaW5nID0gZmFsc2U7XHJcblx0XHRcdFx0dGhpcy5fdHJpZ2dlcldpdGhEZXByZWNhdGVkKCBcInRyYW5zaXRpb25cIiwgdHJpZ2dlckRhdGEgKTtcclxuXHRcdFx0XHR0aGlzLl90cmlnZ2VyV2l0aERlcHJlY2F0ZWQoIFwiY2hhbmdlXCIsIHRyaWdnZXJEYXRhICk7XHJcblxyXG5cdFx0XHRcdC8vIEV2ZW4gaWYgdGhlcmUgaXMgbm8gcGFnZSBjaGFuZ2UgdG8gYmUgZG9uZSwgd2Ugc2hvdWxkIGtlZXAgdGhlXHJcblx0XHRcdFx0Ly8gdXJsSGlzdG9yeSBpbiBzeW5jIHdpdGggdGhlIGhhc2ggY2hhbmdlc1xyXG5cdFx0XHRcdGlmICggc2V0dGluZ3MuZnJvbUhhc2hDaGFuZ2UgKSB7XHJcblx0XHRcdFx0XHQkLm1vYmlsZS5uYXZpZ2F0ZS5oaXN0b3J5LmRpcmVjdCh7IHVybDogdXJsIH0pO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBXZSBuZWVkIHRvIG1ha2Ugc3VyZSB0aGUgcGFnZSB3ZSBhcmUgZ2l2ZW4gaGFzIGFscmVhZHkgYmVlbiBlbmhhbmNlZC5cclxuXHRcdFx0dG9QYWdlLnBhZ2UoeyByb2xlOiBzZXR0aW5ncy5yb2xlIH0pO1xyXG5cclxuXHRcdFx0Ly8gSWYgdGhlIGNoYW5nZVBhZ2UgcmVxdWVzdCB3YXMgc2VudCBmcm9tIGEgaGFzaENoYW5nZSBldmVudCwgY2hlY2sgdG9cclxuXHRcdFx0Ly8gc2VlIGlmIHRoZSBwYWdlIGlzIGFscmVhZHkgd2l0aGluIHRoZSB1cmxIaXN0b3J5IHN0YWNrLiBJZiBzbywgd2UnbGxcclxuXHRcdFx0Ly8gYXNzdW1lIHRoZSB1c2VyIGhpdCB0aGUgZm9yd2FyZC9iYWNrIGJ1dHRvbiBhbmQgd2lsbCB0cnkgdG8gbWF0Y2ggdGhlXHJcblx0XHRcdC8vIHRyYW5zaXRpb24gYWNjb3JkaW5nbHkuXHJcblx0XHRcdGlmICggc2V0dGluZ3MuZnJvbUhhc2hDaGFuZ2UgKSB7XHJcblx0XHRcdFx0aGlzdG9yeURpciA9IHNldHRpbmdzLmRpcmVjdGlvbiA9PT0gXCJiYWNrXCIgPyAtMSA6IDE7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIEtpbGwgdGhlIGtleWJvYXJkLlxyXG5cdFx0XHQvLyBYWFhfamJsYXM6IFdlIG5lZWQgdG8gc3RvcCBjcmF3bGluZyB0aGUgZW50aXJlIGRvY3VtZW50IHRvIGtpbGwgZm9jdXMuXHJcblx0XHRcdC8vICAgICAgICAgICAgSW5zdGVhZCwgd2Ugc2hvdWxkIGJlIHRyYWNraW5nIGZvY3VzIHdpdGggYSBkZWxlZ2F0ZSgpXHJcblx0XHRcdC8vICAgICAgICAgICAgaGFuZGxlciBzbyB3ZSBhbHJlYWR5IGhhdmUgdGhlIGVsZW1lbnQgaW4gaGFuZCBhdCB0aGlzXHJcblx0XHRcdC8vICAgICAgICAgICAgcG9pbnQuXHJcblx0XHRcdC8vIFdyYXAgdGhpcyBpbiBhIHRyeS9jYXRjaCBibG9jayBzaW5jZSBJRTkgdGhyb3cgXCJVbnNwZWNpZmllZCBlcnJvclwiIGlmXHJcblx0XHRcdC8vIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgaXMgdW5kZWZpbmVkIHdoZW4gd2UgYXJlIGluIGFuIElGcmFtZS5cclxuXHRcdFx0dHJ5IHtcclxuXHRcdFx0XHRpZiAoIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgJiZcclxuXHRcdFx0XHRcdGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSAhPT0gXCJib2R5XCIgKSB7XHJcblxyXG5cdFx0XHRcdFx0JCggZG9jdW1lbnQuYWN0aXZlRWxlbWVudCApLmJsdXIoKTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0JCggXCJpbnB1dDpmb2N1cywgdGV4dGFyZWE6Zm9jdXMsIHNlbGVjdDpmb2N1c1wiICkuYmx1cigpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBjYXRjaCggZSApIHt9XHJcblxyXG5cdFx0XHQvLyBSZWNvcmQgd2hldGhlciB3ZSBhcmUgYXQgYSBwbGFjZSBpbiBoaXN0b3J5IHdoZXJlIGEgZGlhbG9nIHVzZWQgdG8gYmUgLVxyXG5cdFx0XHQvLyBpZiBzbywgZG8gbm90IGFkZCBhIG5ldyBoaXN0b3J5IGVudHJ5IGFuZCBkbyBub3QgY2hhbmdlIHRoZSBoYXNoIGVpdGhlclxyXG5cdFx0XHRhbHJlYWR5VGhlcmUgPSBmYWxzZTtcclxuXHJcblx0XHRcdC8vIElmIHdlJ3JlIGRpc3BsYXlpbmcgdGhlIHBhZ2UgYXMgYSBkaWFsb2csIHdlIGRvbid0IHdhbnQgdGhlIHVybFxyXG5cdFx0XHQvLyBmb3IgdGhlIGRpYWxvZyBjb250ZW50IHRvIGJlIHVzZWQgaW4gdGhlIGhhc2guIEluc3RlYWQsIHdlIHdhbnRcclxuXHRcdFx0Ly8gdG8gYXBwZW5kIHRoZSBkaWFsb2dIYXNoS2V5IHRvIHRoZSB1cmwgb2YgdGhlIGN1cnJlbnQgcGFnZS5cclxuXHRcdFx0aWYgKCBpc0RpYWxvZyAmJiBhY3RpdmUgKSB7XHJcblx0XHRcdFx0Ly8gb24gdGhlIGluaXRpYWwgcGFnZSBsb2FkIGFjdGl2ZS51cmwgaXMgdW5kZWZpbmVkIGFuZCBpbiB0aGF0IGNhc2VcclxuXHRcdFx0XHQvLyBzaG91bGQgYmUgYW4gZW1wdHkgc3RyaW5nLiBNb3ZpbmcgdGhlIHVuZGVmaW5lZCAtPiBlbXB0eSBzdHJpbmcgYmFja1xyXG5cdFx0XHRcdC8vIGludG8gdXJsSGlzdG9yeS5hZGROZXcgc2VlbWVkIGltcHJ1ZGVudCBnaXZlbiB1bmRlZmluZWQgYmV0dGVyXHJcblx0XHRcdFx0Ly8gcmVwcmVzZW50cyB0aGUgdXJsIHN0YXRlXHJcblxyXG5cdFx0XHRcdC8vIElmIHdlIGFyZSBhdCBhIHBsYWNlIGluIGhpc3RvcnkgdGhhdCBvbmNlIGJlbG9uZ2VkIHRvIGEgZGlhbG9nLCByZXVzZVxyXG5cdFx0XHRcdC8vIHRoaXMgc3RhdGUgd2l0aG91dCBhZGRpbmcgdG8gdXJsSGlzdG9yeSBhbmQgd2l0aG91dCBtb2RpZnlpbmcgdGhlXHJcblx0XHRcdFx0Ly8gaGFzaC4gSG93ZXZlciwgaWYgYSBkaWFsb2cgaXMgYWxyZWFkeSBkaXNwbGF5ZWQgYXQgdGhpcyBwb2ludCwgYW5kXHJcblx0XHRcdFx0Ly8gd2UncmUgYWJvdXQgdG8gZGlzcGxheSBhbm90aGVyIGRpYWxvZywgdGhlbiB3ZSBtdXN0IGFkZCBhbm90aGVyIGhhc2hcclxuXHRcdFx0XHQvLyBhbmQgaGlzdG9yeSBlbnRyeSBvbiB0b3Agc28gdGhhdCBvbmUgbWF5IG5hdmlnYXRlIGJhY2sgdG8gdGhlXHJcblx0XHRcdFx0Ly8gb3JpZ2luYWwgZGlhbG9nXHJcblx0XHRcdFx0aWYgKCBhY3RpdmUudXJsICYmXHJcblx0XHRcdFx0XHRhY3RpdmUudXJsLmluZGV4T2YoICQubW9iaWxlLmRpYWxvZ0hhc2hLZXkgKSA+IC0xICYmXHJcblx0XHRcdFx0XHR0aGlzLmFjdGl2ZVBhZ2UgJiZcclxuXHRcdFx0XHRcdCF0aGlzLmFjdGl2ZVBhZ2UuaGFzQ2xhc3MoIFwidWktZGlhbG9nXCIgKSAmJlxyXG5cdFx0XHRcdFx0JC5tb2JpbGUubmF2aWdhdGUuaGlzdG9yeS5hY3RpdmVJbmRleCA+IDAgKSB7XHJcblxyXG5cdFx0XHRcdFx0c2V0dGluZ3MuY2hhbmdlSGFzaCA9IGZhbHNlO1xyXG5cdFx0XHRcdFx0YWxyZWFkeVRoZXJlID0gdHJ1ZTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vIE5vcm1hbGx5LCB3ZSB0YWNrIG9uIGEgZGlhbG9nIGhhc2gga2V5LCBidXQgaWYgdGhpcyBpcyB0aGUgbG9jYXRpb25cclxuXHRcdFx0XHQvLyBvZiBhIHN0YWxlIGRpYWxvZywgd2UgcmV1c2UgdGhlIFVSTCBmcm9tIHRoZSBlbnRyeVxyXG5cdFx0XHRcdHVybCA9ICggYWN0aXZlLnVybCB8fCBcIlwiICk7XHJcblxyXG5cdFx0XHRcdC8vIGFjY291bnQgZm9yIGFic29sdXRlIHVybHMgaW5zdGVhZCBvZiBqdXN0IHJlbGF0aXZlIHVybHMgdXNlIGFzIGhhc2hlc1xyXG5cdFx0XHRcdGlmICggIWFscmVhZHlUaGVyZSAmJiB1cmwuaW5kZXhPZihcIiNcIikgPiAtMSApIHtcclxuXHRcdFx0XHRcdHVybCArPSAkLm1vYmlsZS5kaWFsb2dIYXNoS2V5O1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHR1cmwgKz0gXCIjXCIgKyAkLm1vYmlsZS5kaWFsb2dIYXNoS2V5O1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gaWYgdGl0bGUgZWxlbWVudCB3YXNuJ3QgZm91bmQsIHRyeSB0aGUgcGFnZSBkaXYgZGF0YSBhdHRyIHRvb1xyXG5cdFx0XHQvLyBJZiB0aGlzIGlzIGEgZGVlcC1saW5rIG9yIGEgcmVsb2FkICggYWN0aXZlID09PSB1bmRlZmluZWQgKSB0aGVuIGp1c3RcclxuXHRcdFx0Ly8gdXNlIHBhZ2VUaXRsZVxyXG5cdFx0XHRuZXdQYWdlVGl0bGUgPSAoICFhY3RpdmUgKSA/IHBhZ2VUaXRsZSA6IHRvUGFnZS5qcW1EYXRhKCBcInRpdGxlXCIgKSB8fFxyXG5cdFx0XHRcdHRvUGFnZS5jaGlsZHJlbiggXCI6anFtRGF0YShyb2xlPSdoZWFkZXInKVwiICkuZmluZCggXCIudWktdGl0bGVcIiApLnRleHQoKTtcclxuXHRcdFx0aWYgKCAhIW5ld1BhZ2VUaXRsZSAmJiBwYWdlVGl0bGUgPT09IGRvY3VtZW50LnRpdGxlICkge1xyXG5cdFx0XHRcdHBhZ2VUaXRsZSA9IG5ld1BhZ2VUaXRsZTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoICF0b1BhZ2UuanFtRGF0YSggXCJ0aXRsZVwiICkgKSB7XHJcblx0XHRcdFx0dG9QYWdlLmpxbURhdGEoIFwidGl0bGVcIiwgcGFnZVRpdGxlICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIE1ha2Ugc3VyZSB3ZSBoYXZlIGEgdHJhbnNpdGlvbiBkZWZpbmVkLlxyXG5cdFx0XHRzZXR0aW5ncy50cmFuc2l0aW9uID0gc2V0dGluZ3MudHJhbnNpdGlvbiB8fFxyXG5cdFx0XHRcdCggKCBoaXN0b3J5RGlyICYmICFhY3RpdmVJc0luaXRpYWxQYWdlICkgPyBhY3RpdmUudHJhbnNpdGlvbiA6IHVuZGVmaW5lZCApIHx8XHJcblx0XHRcdFx0KCBpc0RpYWxvZyA/ICQubW9iaWxlLmRlZmF1bHREaWFsb2dUcmFuc2l0aW9uIDogJC5tb2JpbGUuZGVmYXVsdFBhZ2VUcmFuc2l0aW9uICk7XHJcblxyXG5cdFx0XHQvL2FkZCBwYWdlIHRvIGhpc3Rvcnkgc3RhY2sgaWYgaXQncyBub3QgYmFjayBvciBmb3J3YXJkXHJcblx0XHRcdGlmICggIWhpc3RvcnlEaXIgJiYgYWxyZWFkeVRoZXJlICkge1xyXG5cdFx0XHRcdCQubW9iaWxlLm5hdmlnYXRlLmhpc3RvcnkuZ2V0QWN0aXZlKCkucGFnZVVybCA9IHBhZ2VVcmw7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIFNldCB0aGUgbG9jYXRpb24gaGFzaC5cclxuXHRcdFx0aWYgKCB1cmwgJiYgIXNldHRpbmdzLmZyb21IYXNoQ2hhbmdlICkge1xyXG5cclxuXHRcdFx0XHQvLyByZWJ1aWxkaW5nIHRoZSBoYXNoIGhlcmUgc2luY2Ugd2UgbG9vc2UgaXQgZWFybGllciBvblxyXG5cdFx0XHRcdC8vIFRPRE8gcHJlc2VydmUgdGhlIG9yaWdpbmFsbHkgcGFzc2VkIGluIHBhdGhcclxuXHRcdFx0XHRpZiAoICEkLm1vYmlsZS5wYXRoLmlzUGF0aCggdXJsICkgJiYgdXJsLmluZGV4T2YoIFwiI1wiICkgPCAwICkge1xyXG5cdFx0XHRcdFx0dXJsID0gXCIjXCIgKyB1cmw7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBUT0RPIHRoZSBwcm9wZXJ0eSBuYW1lcyBoZXJlIGFyZSBqdXN0IHNpbGx5XHJcblx0XHRcdFx0cGFyYW1zID0ge1xyXG5cdFx0XHRcdFx0dHJhbnNpdGlvbjogc2V0dGluZ3MudHJhbnNpdGlvbixcclxuXHRcdFx0XHRcdHRpdGxlOiBwYWdlVGl0bGUsXHJcblx0XHRcdFx0XHRwYWdlVXJsOiBwYWdlVXJsLFxyXG5cdFx0XHRcdFx0cm9sZTogc2V0dGluZ3Mucm9sZVxyXG5cdFx0XHRcdH07XHJcblxyXG5cdFx0XHRcdGlmICggc2V0dGluZ3MuY2hhbmdlSGFzaCAhPT0gZmFsc2UgJiYgJC5tb2JpbGUuaGFzaExpc3RlbmluZ0VuYWJsZWQgKSB7XHJcblx0XHRcdFx0XHQkLm1vYmlsZS5uYXZpZ2F0ZSggdGhpcy53aW5kb3dbIDAgXS5lbmNvZGVVUkkoIHVybCApLCBwYXJhbXMsIHRydWUpO1xyXG5cdFx0XHRcdH0gZWxzZSBpZiAoIHRvUGFnZVsgMCBdICE9PSAkLm1vYmlsZS5maXJzdFBhZ2VbIDAgXSApIHtcclxuXHRcdFx0XHRcdCQubW9iaWxlLm5hdmlnYXRlLmhpc3RvcnkuYWRkKCB1cmwsIHBhcmFtcyApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly9zZXQgcGFnZSB0aXRsZVxyXG5cdFx0XHRkb2N1bWVudC50aXRsZSA9IHBhZ2VUaXRsZTtcclxuXHJcblx0XHRcdC8vc2V0IFwidG9QYWdlXCIgYXMgYWN0aXZlUGFnZSBkZXByZWNhdGVkIGluIDEuNCByZW1vdmUgaW4gMS41XHJcblx0XHRcdCQubW9iaWxlLmFjdGl2ZVBhZ2UgPSB0b1BhZ2U7XHJcblxyXG5cdFx0XHQvL25ldyB3YXkgdG8gaGFuZGxlIGFjdGl2ZVBhZ2VcclxuXHRcdFx0dGhpcy5hY3RpdmVQYWdlID0gdG9QYWdlO1xyXG5cclxuXHRcdFx0Ly8gSWYgd2UncmUgbmF2aWdhdGluZyBiYWNrIGluIHRoZSBVUkwgaGlzdG9yeSwgc2V0IHJldmVyc2UgYWNjb3JkaW5nbHkuXHJcblx0XHRcdHNldHRpbmdzLnJldmVyc2UgPSBzZXR0aW5ncy5yZXZlcnNlIHx8IGhpc3RvcnlEaXIgPCAwO1xyXG5cclxuXHRcdFx0Y3NzVHJhbnNpdGlvbkRlZmVycmVkID0gJC5EZWZlcnJlZCgpO1xyXG5cclxuXHRcdFx0dGhpcy5fY3NzVHJhbnNpdGlvbih0b1BhZ2UsIGZyb21QYWdlLCB7XHJcblx0XHRcdFx0dHJhbnNpdGlvbjogc2V0dGluZ3MudHJhbnNpdGlvbixcclxuXHRcdFx0XHRyZXZlcnNlOiBzZXR0aW5ncy5yZXZlcnNlLFxyXG5cdFx0XHRcdGRlZmVycmVkOiBjc3NUcmFuc2l0aW9uRGVmZXJyZWRcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHRjc3NUcmFuc2l0aW9uRGVmZXJyZWQuZG9uZSgkLnByb3h5KGZ1bmN0aW9uKCBuYW1lLCByZXZlcnNlLCAkdG8sICRmcm9tLCBhbHJlYWR5Rm9jdXNlZCApIHtcclxuXHRcdFx0XHQkLm1vYmlsZS5yZW1vdmVBY3RpdmVMaW5rQ2xhc3MoKTtcclxuXHJcblx0XHRcdFx0Ly9pZiB0aGVyZSdzIGEgZHVwbGljYXRlQ2FjaGVkUGFnZSwgcmVtb3ZlIGl0IGZyb20gdGhlIERPTSBub3cgdGhhdCBpdCdzIGhpZGRlblxyXG5cdFx0XHRcdGlmICggc2V0dGluZ3MuZHVwbGljYXRlQ2FjaGVkUGFnZSApIHtcclxuXHRcdFx0XHRcdHNldHRpbmdzLmR1cGxpY2F0ZUNhY2hlZFBhZ2UucmVtb3ZlKCk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBkZXNwaXRlIHZpc2liaWxpdHk6IGhpZGRlbiBhZGRyZXNzZXMgaXNzdWUgIzI5NjVcclxuXHRcdFx0XHQvLyBodHRwczovL2dpdGh1Yi5jb20vanF1ZXJ5L2pxdWVyeS1tb2JpbGUvaXNzdWVzLzI5NjVcclxuXHRcdFx0XHRpZiAoICFhbHJlYWR5Rm9jdXNlZCApIHtcclxuXHRcdFx0XHRcdCQubW9iaWxlLmZvY3VzUGFnZSggdG9QYWdlICk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHR0aGlzLl9yZWxlYXNlVHJhbnNpdGlvbkxvY2soKTtcclxuXHRcdFx0XHR0aGlzLl90cmlnZ2VyV2l0aERlcHJlY2F0ZWQoIFwidHJhbnNpdGlvblwiLCB0cmlnZ2VyRGF0YSApO1xyXG5cdFx0XHRcdHRoaXMuX3RyaWdnZXJXaXRoRGVwcmVjYXRlZCggXCJjaGFuZ2VcIiwgdHJpZ2dlckRhdGEgKTtcclxuXHRcdFx0fSwgdGhpcykpO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvLyBkZXRlcm1pbmUgdGhlIGN1cnJlbnQgYmFzZSB1cmxcclxuXHRcdF9maW5kQmFzZVdpdGhEZWZhdWx0OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIGNsb3Nlc3RCYXNlID0gKCB0aGlzLmFjdGl2ZVBhZ2UgJiZcclxuXHRcdFx0JC5tb2JpbGUuZ2V0Q2xvc2VzdEJhc2VVcmwoIHRoaXMuYWN0aXZlUGFnZSApICk7XHJcblx0XHRyZXR1cm4gY2xvc2VzdEJhc2UgfHwgJC5tb2JpbGUucGF0aC5kb2N1bWVudEJhc2UuaHJlZk5vSGFzaDtcclxuXHRcdH1cclxuXHR9KTtcclxuXHJcblx0Ly8gVGhlIGZvbGxvd2luZyBoYW5kbGVycyBzaG91bGQgYmUgYm91bmQgYWZ0ZXIgbW9iaWxlaW5pdCBoYXMgYmVlbiB0cmlnZ2VyZWRcclxuXHQvLyB0aGUgZm9sbG93aW5nIGRlZmVycmVkIGlzIHJlc29sdmVkIGluIHRoZSBpbml0IGZpbGVcclxuXHQkLm1vYmlsZS5uYXZyZWFkeURlZmVycmVkID0gJC5EZWZlcnJlZCgpO1xyXG5cclxuXHQvL3RoZXNlIHZhcmlhYmxlcyBtYWtlIGFsbCBwYWdlIGNvbnRhaW5lcnMgdXNlIHRoZSBzYW1lIHF1ZXVlIGFuZCBvbmx5IG5hdmlnYXRlIG9uZSBhdCBhIHRpbWVcclxuXHQvLyBxdWV1ZSB0byBob2xkIHNpbXVsdGFuaW91cyBwYWdlIHRyYW5zaXRpb25zXHJcblx0dmFyIHBhZ2VUcmFuc2l0aW9uUXVldWUgPSBbXSxcclxuXHJcblx0XHQvLyBpbmRpY2F0ZXMgd2hldGhlciBvciBub3QgcGFnZSBpcyBpbiBwcm9jZXNzIG9mIHRyYW5zaXRpb25pbmdcclxuXHRcdGlzUGFnZVRyYW5zaXRpb25pbmcgPSBmYWxzZTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxuXHRcdC8vIHJlc29sdmVkIG9uIGRvbXJlYWR5XHJcblx0dmFyIGRvbXJlYWR5RGVmZXJyZWQgPSAkLkRlZmVycmVkKCksXHJcblxyXG5cdFx0Ly8gcmVzb2x2ZWQgYW5kIG51bGxlZCBvbiB3aW5kb3cubG9hZCgpXHJcblx0XHRsb2FkRGVmZXJyZWQgPSAkLkRlZmVycmVkKCksXHJcblxyXG5cdFx0Ly8gZnVuY3Rpb24gdGhhdCByZXNvbHZlcyB0aGUgYWJvdmUgZGVmZXJyZWRcclxuXHRcdHBhZ2VJc0Z1bGx5TG9hZGVkID0gZnVuY3Rpb24oKSB7XHJcblxyXG5cdFx0XHQvLyBSZXNvbHZlIGFuZCBudWxsIHRoZSBkZWZlcnJlZFxyXG5cdFx0XHRsb2FkRGVmZXJyZWQucmVzb2x2ZSgpO1xyXG5cdFx0XHRsb2FkRGVmZXJyZWQgPSBudWxsO1xyXG5cdFx0fSxcclxuXHJcblx0XHRkb2N1bWVudFVybCA9ICQubW9iaWxlLnBhdGguZG9jdW1lbnRVcmwsXHJcblxyXG5cdFx0Ly8gdXNlZCB0byB0cmFjayBsYXN0IHZjbGlja2VkIGVsZW1lbnQgdG8gbWFrZSBzdXJlIGl0cyB2YWx1ZSBpcyBhZGRlZCB0byBmb3JtIGRhdGFcclxuXHRcdCRsYXN0VkNsaWNrZWQgPSBudWxsO1xyXG5cclxuXHQvKiBFdmVudCBCaW5kaW5ncyAtIGhhc2hjaGFuZ2UsIHN1Ym1pdCwgYW5kIGNsaWNrICovXHJcblx0ZnVuY3Rpb24gZmluZENsb3Nlc3RMaW5rKCBlbGUgKVx0e1xyXG5cdFx0d2hpbGUgKCBlbGUgKSB7XHJcblx0XHRcdC8vIExvb2sgZm9yIHRoZSBjbG9zZXN0IGVsZW1lbnQgd2l0aCBhIG5vZGVOYW1lIG9mIFwiYVwiLlxyXG5cdFx0XHQvLyBOb3RlIHRoYXQgd2UgYXJlIGNoZWNraW5nIGlmIHdlIGhhdmUgYSB2YWxpZCBub2RlTmFtZVxyXG5cdFx0XHQvLyBiZWZvcmUgYXR0ZW1wdGluZyB0byBhY2Nlc3MgaXQuIFRoaXMgaXMgYmVjYXVzZSB0aGVcclxuXHRcdFx0Ly8gbm9kZSB3ZSBnZXQgY2FsbGVkIHdpdGggY291bGQgaGF2ZSBvcmlnaW5hdGVkIGZyb20gd2l0aGluXHJcblx0XHRcdC8vIGFuIGVtYmVkZGVkIFNWRyBkb2N1bWVudCB3aGVyZSBzb21lIHN5bWJvbCBpbnN0YW5jZSBlbGVtZW50c1xyXG5cdFx0XHQvLyBkb24ndCBoYXZlIG5vZGVOYW1lIGRlZmluZWQgb24gdGhlbSwgb3Igc3RyaW5ncyBhcmUgb2YgdHlwZVxyXG5cdFx0XHQvLyBTVkdBbmltYXRlZFN0cmluZy5cclxuXHRcdFx0aWYgKCAoIHR5cGVvZiBlbGUubm9kZU5hbWUgPT09IFwic3RyaW5nXCIgKSAmJiBlbGUubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gXCJhXCIgKSB7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxlID0gZWxlLnBhcmVudE5vZGU7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gZWxlO1xyXG5cdH1cclxuXHJcblx0JC5tb2JpbGUubG9hZFBhZ2UgPSBmdW5jdGlvbiggdXJsLCBvcHRzICkge1xyXG5cdFx0dmFyIGNvbnRhaW5lcjtcclxuXHJcblx0XHRvcHRzID0gb3B0cyB8fCB7fTtcclxuXHRcdGNvbnRhaW5lciA9ICggb3B0cy5wYWdlQ29udGFpbmVyIHx8ICQubW9iaWxlLnBhZ2VDb250YWluZXIgKTtcclxuXHJcblx0XHQvLyBjcmVhdGUgdGhlIGRlZmVycmVkIHRoYXQgd2lsbCBiZSBzdXBwbGllZCB0byBsb2FkUGFnZSBjYWxsZXJzXHJcblx0XHQvLyBhbmQgcmVzb2x2ZWQgYnkgdGhlIGNvbnRlbnQgd2lkZ2V0J3MgbG9hZCBtZXRob2RcclxuXHRcdG9wdHMuZGVmZXJyZWQgPSAkLkRlZmVycmVkKCk7XHJcblxyXG5cdFx0Ly8gUHJlZmVycmluZyB0byBhbGxvdyBleGNlcHRpb25zIGZvciB1bmluaXRpYWxpemVkIG9wdHMucGFnZUNvbnRhaW5lclxyXG5cdFx0Ly8gd2lkZ2V0cyBzbyB3ZSBrbm93IGlmIHdlIG5lZWQgdG8gZm9yY2UgaW5pdCBoZXJlIGZvciB1c2Vyc1xyXG5cdFx0Y29udGFpbmVyLnBhZ2Vjb250YWluZXIoIFwibG9hZFwiLCB1cmwsIG9wdHMgKTtcclxuXHJcblx0XHQvLyBwcm92aWRlIHRoZSBkZWZlcnJlZFxyXG5cdFx0cmV0dXJuIG9wdHMuZGVmZXJyZWQucHJvbWlzZSgpO1xyXG5cdH07XHJcblxyXG5cdC8vZGVmaW5lIHZhcnMgZm9yIGludGVyYWwgdXNlXHJcblxyXG5cdC8qIGludGVybmFsIHV0aWxpdHkgZnVuY3Rpb25zICovXHJcblxyXG5cdC8vIE5PVEUgSXNzdWUgIzQ5NTAgQW5kcm9pZCBwaG9uZWdhcCBkb2Vzbid0IG5hdmlnYXRlIGJhY2sgcHJvcGVybHlcclxuXHQvLyAgICAgIHdoZW4gYSBmdWxsIHBhZ2UgcmVmcmVzaCBoYXMgdGFrZW4gcGxhY2UuIEl0IGFwcGVhcnMgdGhhdCBoYXNoY2hhbmdlXHJcblx0Ly8gICAgICBhbmQgcmVwbGFjZXN0YXRlIGhpc3RvcnkgYWx0ZXJhdGlvbnMgd29yayBmaW5lIGJ1dCB3ZSBuZWVkIHRvIHN1cHBvcnRcclxuXHQvLyAgICAgIGJvdGggZm9ybXMgb2YgaGlzdG9yeSB0cmF2ZXJzYWwgaW4gb3VyIGNvZGUgdGhhdCB1c2VzIGJhY2t3YXJkIGhpc3RvcnlcclxuXHQvLyAgICAgIG1vdmVtZW50XHJcblx0JC5tb2JpbGUuYmFjayA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIG5hdiA9IHdpbmRvdy5uYXZpZ2F0b3I7XHJcblxyXG5cdFx0Ly8gaWYgdGhlIHNldHRpbmcgaXMgb24gYW5kIHRoZSBuYXZpZ2F0b3Igb2JqZWN0IGlzXHJcblx0XHQvLyBhdmFpbGFibGUgdXNlIHRoZSBwaG9uZWdhcCBuYXZpZ2F0aW9uIGNhcGFiaWxpdHlcclxuXHRcdGlmICggdGhpcy5waG9uZWdhcE5hdmlnYXRpb25FbmFibGVkICYmXHJcblx0XHRcdG5hdiAmJlxyXG5cdFx0XHRuYXYuYXBwICYmXHJcblx0XHRcdG5hdi5hcHAuYmFja0hpc3RvcnkgKSB7XHJcblx0XHRcdG5hdi5hcHAuYmFja0hpc3RvcnkoKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdCQubW9iaWxlLnBhZ2VDb250YWluZXIucGFnZWNvbnRhaW5lciggXCJiYWNrXCIgKTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHQvLyBEaXJlY3QgZm9jdXMgdG8gdGhlIHBhZ2UgdGl0bGUsIG9yIG90aGVyd2lzZSBmaXJzdCBmb2N1c2FibGUgZWxlbWVudFxyXG5cdCQubW9iaWxlLmZvY3VzUGFnZSA9IGZ1bmN0aW9uICggcGFnZSApIHtcclxuXHRcdHZhciBhdXRvZm9jdXMgPSBwYWdlLmZpbmQoIFwiW2F1dG9mb2N1c11cIiApLFxyXG5cdFx0XHRwYWdlVGl0bGUgPSBwYWdlLmZpbmQoIFwiLnVpLXRpdGxlOmVxKDApXCIgKTtcclxuXHJcblx0XHRpZiAoIGF1dG9mb2N1cy5sZW5ndGggKSB7XHJcblx0XHRcdGF1dG9mb2N1cy5mb2N1cygpO1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBwYWdlVGl0bGUubGVuZ3RoICkge1xyXG5cdFx0XHRwYWdlVGl0bGUuZm9jdXMoKTtcclxuXHRcdH0gZWxzZXtcclxuXHRcdFx0cGFnZS5mb2N1cygpO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdC8vIE5vLW9wIGltcGxlbWVudGF0aW9uIG9mIHRyYW5zaXRpb24gZGVncmFkYXRpb25cclxuXHQkLm1vYmlsZS5fbWF5YmVEZWdyYWRlVHJhbnNpdGlvbiA9ICQubW9iaWxlLl9tYXliZURlZ3JhZGVUcmFuc2l0aW9uIHx8IGZ1bmN0aW9uKCB0cmFuc2l0aW9uICkge1xyXG5cdFx0cmV0dXJuIHRyYW5zaXRpb247XHJcblx0fTtcclxuXHJcblx0Ly8gRXhwb3NlZCAkLm1vYmlsZSBtZXRob2RzXHJcblxyXG5cdCQubW9iaWxlLmNoYW5nZVBhZ2UgPSBmdW5jdGlvbiggdG8sIG9wdGlvbnMgKSB7XHJcblx0XHQkLm1vYmlsZS5wYWdlQ29udGFpbmVyLnBhZ2Vjb250YWluZXIoIFwiY2hhbmdlXCIsIHRvLCBvcHRpb25zICk7XHJcblx0fTtcclxuXHJcblx0JC5tb2JpbGUuY2hhbmdlUGFnZS5kZWZhdWx0cyA9IHtcclxuXHRcdHRyYW5zaXRpb246IHVuZGVmaW5lZCxcclxuXHRcdHJldmVyc2U6IGZhbHNlLFxyXG5cdFx0Y2hhbmdlSGFzaDogdHJ1ZSxcclxuXHRcdGZyb21IYXNoQ2hhbmdlOiBmYWxzZSxcclxuXHRcdHJvbGU6IHVuZGVmaW5lZCwgLy8gQnkgZGVmYXVsdCB3ZSByZWx5IG9uIHRoZSByb2xlIGRlZmluZWQgYnkgdGhlIEBkYXRhLXJvbGUgYXR0cmlidXRlLlxyXG5cdFx0ZHVwbGljYXRlQ2FjaGVkUGFnZTogdW5kZWZpbmVkLFxyXG5cdFx0cGFnZUNvbnRhaW5lcjogdW5kZWZpbmVkLFxyXG5cdFx0c2hvd0xvYWRNc2c6IHRydWUsIC8vbG9hZGluZyBtZXNzYWdlIHNob3dzIGJ5IGRlZmF1bHQgd2hlbiBwYWdlcyBhcmUgYmVpbmcgZmV0Y2hlZCBkdXJpbmcgY2hhbmdlUGFnZVxyXG5cdFx0ZGF0YVVybDogdW5kZWZpbmVkLFxyXG5cdFx0ZnJvbVBhZ2U6IHVuZGVmaW5lZCxcclxuXHRcdGFsbG93U2FtZVBhZ2VUcmFuc2l0aW9uOiBmYWxzZVxyXG5cdH07XHJcblxyXG5cdCQubW9iaWxlLl9yZWdpc3RlckludGVybmFsRXZlbnRzID0gZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgZ2V0QWpheEZvcm1EYXRhID0gZnVuY3Rpb24oICRmb3JtLCBjYWxjdWxhdGVPbmx5ICkge1xyXG5cdFx0XHR2YXIgdXJsLCByZXQgPSB0cnVlLCBmb3JtRGF0YSwgdmNsaWNrZWROYW1lLCBtZXRob2Q7XHJcblx0XHRcdGlmICggISQubW9iaWxlLmFqYXhFbmFibGVkIHx8XHJcblx0XHRcdFx0XHQvLyB0ZXN0IHRoYXQgdGhlIGZvcm0gaXMsIGl0c2VsZiwgYWpheCBmYWxzZVxyXG5cdFx0XHRcdFx0JGZvcm0uaXMoIFwiOmpxbURhdGEoYWpheD0nZmFsc2UnKVwiICkgfHxcclxuXHRcdFx0XHRcdC8vIHRlc3QgdGhhdCAkLm1vYmlsZS5pZ25vcmVDb250ZW50RW5hYmxlZCBpcyBzZXQgYW5kXHJcblx0XHRcdFx0XHQvLyB0aGUgZm9ybSBvciBvbmUgb2YgaXQncyBwYXJlbnRzIGlzIGFqYXg9ZmFsc2VcclxuXHRcdFx0XHRcdCEkZm9ybS5qcW1IaWphY2thYmxlKCkubGVuZ3RoIHx8XHJcblx0XHRcdFx0XHQkZm9ybS5hdHRyKCBcInRhcmdldFwiICkgKSB7XHJcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR1cmwgPSAoICRsYXN0VkNsaWNrZWQgJiYgJGxhc3RWQ2xpY2tlZC5hdHRyKCBcImZvcm1hY3Rpb25cIiApICkgfHxcclxuXHRcdFx0XHQkZm9ybS5hdHRyKCBcImFjdGlvblwiICk7XHJcblx0XHRcdG1ldGhvZCA9ICggJGZvcm0uYXR0ciggXCJtZXRob2RcIiApIHx8IFwiZ2V0XCIgKS50b0xvd2VyQ2FzZSgpO1xyXG5cclxuXHRcdFx0Ly8gSWYgbm8gYWN0aW9uIGlzIHNwZWNpZmllZCwgYnJvd3NlcnMgZGVmYXVsdCB0byB1c2luZyB0aGVcclxuXHRcdFx0Ly8gVVJMIG9mIHRoZSBkb2N1bWVudCBjb250YWluaW5nIHRoZSBmb3JtLiBTaW5jZSB3ZSBkeW5hbWljYWxseVxyXG5cdFx0XHQvLyBwdWxsIGluIHBhZ2VzIGZyb20gZXh0ZXJuYWwgZG9jdW1lbnRzLCB0aGUgZm9ybSBzaG91bGQgc3VibWl0XHJcblx0XHRcdC8vIHRvIHRoZSBVUkwgZm9yIHRoZSBzb3VyY2UgZG9jdW1lbnQgb2YgdGhlIHBhZ2UgY29udGFpbmluZ1xyXG5cdFx0XHQvLyB0aGUgZm9ybS5cclxuXHRcdFx0aWYgKCAhdXJsICkge1xyXG5cdFx0XHRcdC8vIEdldCB0aGUgQGRhdGEtdXJsIGZvciB0aGUgcGFnZSBjb250YWluaW5nIHRoZSBmb3JtLlxyXG5cdFx0XHRcdHVybCA9ICQubW9iaWxlLmdldENsb3Nlc3RCYXNlVXJsKCAkZm9ybSApO1xyXG5cclxuXHRcdFx0XHQvLyBOT1RFOiBJZiB0aGUgbWV0aG9kIGlzIFwiZ2V0XCIsIHdlIG5lZWQgdG8gc3RyaXAgb2ZmIHRoZSBxdWVyeSBzdHJpbmdcclxuXHRcdFx0XHQvLyBiZWNhdXNlIGl0IHdpbGwgZ2V0IHJlcGxhY2VkIHdpdGggdGhlIG5ldyBmb3JtIGRhdGEuIFNlZSBpc3N1ZSAjNTcxMC5cclxuXHRcdFx0XHRpZiAoIG1ldGhvZCA9PT0gXCJnZXRcIiApIHtcclxuXHRcdFx0XHRcdHVybCA9ICQubW9iaWxlLnBhdGgucGFyc2VVcmwoIHVybCApLmhyZWZOb1NlYXJjaDtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGlmICggdXJsID09PSAkLm1vYmlsZS5wYXRoLmRvY3VtZW50QmFzZS5ocmVmTm9IYXNoICkge1xyXG5cdFx0XHRcdFx0Ly8gVGhlIHVybCB3ZSBnb3QgYmFjayBtYXRjaGVzIHRoZSBkb2N1bWVudCBiYXNlLFxyXG5cdFx0XHRcdFx0Ly8gd2hpY2ggbWVhbnMgdGhlIHBhZ2UgbXVzdCBiZSBhbiBpbnRlcm5hbC9lbWJlZGRlZCBwYWdlLFxyXG5cdFx0XHRcdFx0Ly8gc28gZGVmYXVsdCB0byB1c2luZyB0aGUgYWN0dWFsIGRvY3VtZW50IHVybCBhcyBhIGJyb3dzZXJcclxuXHRcdFx0XHRcdC8vIHdvdWxkLlxyXG5cdFx0XHRcdFx0dXJsID0gZG9jdW1lbnRVcmwuaHJlZk5vU2VhcmNoO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dXJsID0gJC5tb2JpbGUucGF0aC5tYWtlVXJsQWJzb2x1dGUoICB1cmwsICQubW9iaWxlLmdldENsb3Nlc3RCYXNlVXJsKCAkZm9ybSApICk7XHJcblxyXG5cdFx0XHRpZiAoICggJC5tb2JpbGUucGF0aC5pc0V4dGVybmFsKCB1cmwgKSAmJiAhJC5tb2JpbGUucGF0aC5pc1Blcm1pdHRlZENyb3NzRG9tYWluUmVxdWVzdCggZG9jdW1lbnRVcmwsIHVybCApICkgKSB7XHJcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoICFjYWxjdWxhdGVPbmx5ICkge1xyXG5cdFx0XHRcdGZvcm1EYXRhID0gJGZvcm0uc2VyaWFsaXplQXJyYXkoKTtcclxuXHJcblx0XHRcdFx0aWYgKCAkbGFzdFZDbGlja2VkICYmICRsYXN0VkNsaWNrZWRbIDAgXS5mb3JtID09PSAkZm9ybVsgMCBdICkge1xyXG5cdFx0XHRcdFx0dmNsaWNrZWROYW1lID0gJGxhc3RWQ2xpY2tlZC5hdHRyKCBcIm5hbWVcIiApO1xyXG5cdFx0XHRcdFx0aWYgKCB2Y2xpY2tlZE5hbWUgKSB7XHJcblx0XHRcdFx0XHRcdC8vIE1ha2Ugc3VyZSB0aGUgbGFzdCBjbGlja2VkIGVsZW1lbnQgaXMgaW5jbHVkZWQgaW4gdGhlIGZvcm1cclxuXHRcdFx0XHRcdFx0JC5lYWNoKCBmb3JtRGF0YSwgZnVuY3Rpb24oIGtleSwgdmFsdWUgKSB7XHJcblx0XHRcdFx0XHRcdFx0aWYgKCB2YWx1ZS5uYW1lID09PSB2Y2xpY2tlZE5hbWUgKSB7XHJcblx0XHRcdFx0XHRcdFx0XHQvLyBVbnNldCB2Y2xpY2tlZE5hbWUgLSB3ZSd2ZSBmb3VuZCBpdCBpbiB0aGUgc2VyaWFsaXplZCBkYXRhIGFscmVhZHlcclxuXHRcdFx0XHRcdFx0XHRcdHZjbGlja2VkTmFtZSA9IFwiXCI7XHJcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdFx0aWYgKCB2Y2xpY2tlZE5hbWUgKSB7XHJcblx0XHRcdFx0XHRcdFx0Zm9ybURhdGEucHVzaCggeyBuYW1lOiB2Y2xpY2tlZE5hbWUsIHZhbHVlOiAkbGFzdFZDbGlja2VkLmF0dHIoIFwidmFsdWVcIiApIH0gKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0cmV0ID0ge1xyXG5cdFx0XHRcdFx0dXJsOiB1cmwsXHJcblx0XHRcdFx0XHRvcHRpb25zOiB7XHJcblx0XHRcdFx0XHRcdHR5cGU6XHRcdG1ldGhvZCxcclxuXHRcdFx0XHRcdFx0ZGF0YTpcdFx0JC5wYXJhbSggZm9ybURhdGEgKSxcclxuXHRcdFx0XHRcdFx0dHJhbnNpdGlvbjpcdCRmb3JtLmpxbURhdGEoIFwidHJhbnNpdGlvblwiICksXHJcblx0XHRcdFx0XHRcdHJldmVyc2U6XHQkZm9ybS5qcW1EYXRhKCBcImRpcmVjdGlvblwiICkgPT09IFwicmV2ZXJzZVwiLFxyXG5cdFx0XHRcdFx0XHRyZWxvYWRQYWdlOlx0dHJ1ZVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH07XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHJldHVybiByZXQ7XHJcblx0XHR9O1xyXG5cclxuXHRcdC8vYmluZCB0byBmb3JtIHN1Ym1pdCBldmVudHMsIGhhbmRsZSB3aXRoIEFqYXhcclxuXHRcdCQubW9iaWxlLmRvY3VtZW50LmRlbGVnYXRlKCBcImZvcm1cIiwgXCJzdWJtaXRcIiwgZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0XHR2YXIgZm9ybURhdGE7XHJcblxyXG5cdFx0XHRpZiAoICFldmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSApIHtcclxuXHRcdFx0XHRmb3JtRGF0YSA9IGdldEFqYXhGb3JtRGF0YSggJCggdGhpcyApICk7XHJcblx0XHRcdFx0aWYgKCBmb3JtRGF0YSApIHtcclxuXHRcdFx0XHRcdCQubW9iaWxlLmNoYW5nZVBhZ2UoIGZvcm1EYXRhLnVybCwgZm9ybURhdGEub3B0aW9ucyApO1xyXG5cdFx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vYWRkIGFjdGl2ZSBzdGF0ZSBvbiB2Y2xpY2tcclxuXHRcdCQubW9iaWxlLmRvY3VtZW50LmJpbmQoIFwidmNsaWNrXCIsIGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdFx0dmFyICRidG4sIGJ0bkVscywgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0LCBuZWVkQ2xvc2VzdCA9IGZhbHNlO1xyXG5cdFx0XHQvLyBpZiB0aGlzIGlzbid0IGEgbGVmdCBjbGljayB3ZSBkb24ndCBjYXJlLiBJdHMgaW1wb3J0YW50IHRvIG5vdGVcclxuXHRcdFx0Ly8gdGhhdCB3aGVuIHRoZSB2aXJ0dWFsIGV2ZW50IGlzIGdlbmVyYXRlZCBpdCB3aWxsIGNyZWF0ZSB0aGUgd2hpY2ggYXR0clxyXG5cdFx0XHRpZiAoIGV2ZW50LndoaWNoID4gMSB8fCAhJC5tb2JpbGUubGlua0JpbmRpbmdFbmFibGVkICkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gUmVjb3JkIHRoYXQgdGhpcyBlbGVtZW50IHdhcyBjbGlja2VkLCBpbiBjYXNlIHdlIG5lZWQgaXQgZm9yIGNvcnJlY3RcclxuXHRcdFx0Ly8gZm9ybSBzdWJtaXNzaW9uIGR1cmluZyB0aGUgXCJzdWJtaXRcIiBoYW5kbGVyIGFib3ZlXHJcblx0XHRcdCRsYXN0VkNsaWNrZWQgPSAkKCB0YXJnZXQgKTtcclxuXHJcblx0XHRcdC8vIFRyeSB0byBmaW5kIGEgdGFyZ2V0IGVsZW1lbnQgdG8gd2hpY2ggdGhlIGFjdGl2ZSBjbGFzcyB3aWxsIGJlIGFwcGxpZWRcclxuXHRcdFx0aWYgKCAkLmRhdGEoIHRhcmdldCwgXCJtb2JpbGUtYnV0dG9uXCIgKSApIHtcclxuXHRcdFx0XHQvLyBJZiB0aGUgZm9ybSB3aWxsIG5vdCBiZSBzdWJtaXR0ZWQgdmlhIEFKQVgsIGRvIG5vdCBhZGQgYWN0aXZlIGNsYXNzXHJcblx0XHRcdFx0aWYgKCAhZ2V0QWpheEZvcm1EYXRhKCAkKCB0YXJnZXQgKS5jbG9zZXN0KCBcImZvcm1cIiApLCB0cnVlICkgKSB7XHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdC8vIFdlIHdpbGwgYXBwbHkgdGhlIGFjdGl2ZSBzdGF0ZSB0byB0aGlzIGJ1dHRvbiB3aWRnZXQgLSB0aGUgcGFyZW50XHJcblx0XHRcdFx0Ly8gb2YgdGhlIGlucHV0IHRoYXQgd2FzIGNsaWNrZWQgd2lsbCBoYXZlIHRoZSBhc3NvY2lhdGVkIGRhdGFcclxuXHRcdFx0XHRpZiAoIHRhcmdldC5wYXJlbnROb2RlICkge1xyXG5cdFx0XHRcdFx0dGFyZ2V0ID0gdGFyZ2V0LnBhcmVudE5vZGU7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHRhcmdldCA9IGZpbmRDbG9zZXN0TGluayggdGFyZ2V0ICk7XHJcblx0XHRcdFx0aWYgKCAhKCB0YXJnZXQgJiYgJC5tb2JpbGUucGF0aC5wYXJzZVVybCggdGFyZ2V0LmdldEF0dHJpYnV0ZSggXCJocmVmXCIgKSB8fCBcIiNcIiApLmhhc2ggIT09IFwiI1wiICkgKSB7XHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBUT0RPIHRlYWNoICQubW9iaWxlLmhpamFja2FibGUgdG8gb3BlcmF0ZSBvbiByYXcgZG9tIGVsZW1lbnRzIHNvIHRoZVxyXG5cdFx0XHRcdC8vIGxpbmsgd3JhcHBpbmcgY2FuIGJlIGF2b2lkZWRcclxuXHRcdFx0XHRpZiAoICEkKCB0YXJnZXQgKS5qcW1IaWphY2thYmxlKCkubGVuZ3RoICkge1xyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gQXZvaWQgY2FsbGluZyAuY2xvc2VzdCBieSB1c2luZyB0aGUgZGF0YSBzZXQgZHVyaW5nIC5idXR0b25NYXJrdXAoKVxyXG5cdFx0XHQvLyBMaXN0IGl0ZW1zIGhhdmUgdGhlIGJ1dHRvbiBkYXRhIGluIHRoZSBwYXJlbnQgb2YgdGhlIGVsZW1lbnQgY2xpY2tlZFxyXG5cdFx0XHRpZiAoICEhfnRhcmdldC5jbGFzc05hbWUuaW5kZXhPZiggXCJ1aS1saW5rLWluaGVyaXRcIiApICkge1xyXG5cdFx0XHRcdGlmICggdGFyZ2V0LnBhcmVudE5vZGUgKSB7XHJcblx0XHRcdFx0XHRidG5FbHMgPSAkLmRhdGEoIHRhcmdldC5wYXJlbnROb2RlLCBcImJ1dHRvbkVsZW1lbnRzXCIgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdC8vIE90aGVyd2lzZSwgbG9vayBmb3IgdGhlIGRhdGEgb24gdGhlIHRhcmdldCBpdHNlbGZcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRidG5FbHMgPSAkLmRhdGEoIHRhcmdldCwgXCJidXR0b25FbGVtZW50c1wiICk7XHJcblx0XHRcdH1cclxuXHRcdFx0Ly8gSWYgZm91bmQsIGdyYWIgdGhlIGJ1dHRvbidzIG91dGVyIGVsZW1lbnRcclxuXHRcdFx0aWYgKCBidG5FbHMgKSB7XHJcblx0XHRcdFx0dGFyZ2V0ID0gYnRuRWxzLm91dGVyO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdG5lZWRDbG9zZXN0ID0gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0JGJ0biA9ICQoIHRhcmdldCApO1xyXG5cdFx0XHQvLyBJZiB0aGUgb3V0ZXIgZWxlbWVudCB3YXNuJ3QgZm91bmQgYnkgdGhlIG91ciBoZXVyaXN0aWNzLCB1c2UgLmNsb3Nlc3QoKVxyXG5cdFx0XHRpZiAoIG5lZWRDbG9zZXN0ICkge1xyXG5cdFx0XHRcdCRidG4gPSAkYnRuLmNsb3Nlc3QoIFwiLnVpLWJ0blwiICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICggJGJ0bi5sZW5ndGggPiAwICYmXHJcblx0XHRcdFx0ISggJGJ0bi5oYXNDbGFzcyggXCJ1aS1zdGF0ZS1kaXNhYmxlZFwiIHx8XHJcblxyXG5cdFx0XHRcdFx0Ly8gREVQUkVDQVRFRCBhcyBvZiAxLjQuMCAtIHJlbW92ZSBhZnRlciAxLjQuMCByZWxlYXNlXHJcblx0XHRcdFx0XHQvLyBvbmx5IHVpLXN0YXRlLWRpc2FibGVkIHNob3VsZCBiZSBwcmVzZW50IHRoZXJlYWZ0ZXJcclxuXHRcdFx0XHRcdCRidG4uaGFzQ2xhc3MoIFwidWktZGlzYWJsZWRcIiApICkgKSApIHtcclxuXHRcdFx0XHQkLm1vYmlsZS5yZW1vdmVBY3RpdmVMaW5rQ2xhc3MoIHRydWUgKTtcclxuXHRcdFx0XHQkLm1vYmlsZS5hY3RpdmVDbGlja2VkTGluayA9ICRidG47XHJcblx0XHRcdFx0JC5tb2JpbGUuYWN0aXZlQ2xpY2tlZExpbmsuYWRkQ2xhc3MoICQubW9iaWxlLmFjdGl2ZUJ0bkNsYXNzICk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIGNsaWNrIHJvdXRpbmcgLSBkaXJlY3QgdG8gSFRUUCBvciBBamF4LCBhY2NvcmRpbmdseVxyXG5cdFx0JC5tb2JpbGUuZG9jdW1lbnQuYmluZCggXCJjbGlja1wiLCBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHRcdGlmICggISQubW9iaWxlLmxpbmtCaW5kaW5nRW5hYmxlZCB8fCBldmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSApIHtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHZhciBsaW5rID0gZmluZENsb3Nlc3RMaW5rKCBldmVudC50YXJnZXQgKSxcclxuXHRcdFx0XHQkbGluayA9ICQoIGxpbmsgKSxcclxuXHJcblx0XHRcdFx0Ly9yZW1vdmUgYWN0aXZlIGxpbmsgY2xhc3MgaWYgZXh0ZXJuYWwgKHRoZW4gaXQgd29uJ3QgYmUgdGhlcmUgaWYgeW91IGNvbWUgYmFjaylcclxuXHRcdFx0XHRodHRwQ2xlYW51cCA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0d2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7ICQubW9iaWxlLnJlbW92ZUFjdGl2ZUxpbmtDbGFzcyggdHJ1ZSApOyB9LCAyMDAgKTtcclxuXHRcdFx0XHR9LFxyXG5cdFx0XHRcdGJhc2VVcmwsIGhyZWYsXHJcblx0XHRcdFx0dXNlRGVmYXVsdFVybEhhbmRsaW5nLCBpc0V4dGVybmFsLFxyXG5cdFx0XHRcdHRyYW5zaXRpb24sIHJldmVyc2UsIHJvbGU7XHJcblxyXG5cdFx0XHQvLyBJZiBhIGJ1dHRvbiB3YXMgY2xpY2tlZCwgY2xlYW4gdXAgdGhlIGFjdGl2ZSBjbGFzcyBhZGRlZCBieSB2Y2xpY2sgYWJvdmVcclxuXHRcdFx0aWYgKCAkLm1vYmlsZS5hY3RpdmVDbGlja2VkTGluayAmJlxyXG5cdFx0XHRcdCQubW9iaWxlLmFjdGl2ZUNsaWNrZWRMaW5rWyAwIF0gPT09IGV2ZW50LnRhcmdldC5wYXJlbnROb2RlICkge1xyXG5cdFx0XHRcdGh0dHBDbGVhbnVwKCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIElmIHRoZXJlIGlzIG5vIGxpbmsgYXNzb2NpYXRlZCB3aXRoIHRoZSBjbGljayBvciBpdHMgbm90IGEgbGVmdFxyXG5cdFx0XHQvLyBjbGljayB3ZSB3YW50IHRvIGlnbm9yZSB0aGUgY2xpY2tcclxuXHRcdFx0Ly8gVE9ETyB0ZWFjaCAkLm1vYmlsZS5oaWphY2thYmxlIHRvIG9wZXJhdGUgb24gcmF3IGRvbSBlbGVtZW50cyBzbyB0aGUgbGluayB3cmFwcGluZ1xyXG5cdFx0XHQvLyBjYW4gYmUgYXZvaWRlZFxyXG5cdFx0XHRpZiAoICFsaW5rIHx8IGV2ZW50LndoaWNoID4gMSB8fCAhJGxpbmsuanFtSGlqYWNrYWJsZSgpLmxlbmd0aCApIHtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vaWYgdGhlcmUncyBhIGRhdGEtcmVsPWJhY2sgYXR0ciwgZ28gYmFjayBpbiBoaXN0b3J5XHJcblx0XHRcdGlmICggJGxpbmsuaXMoIFwiOmpxbURhdGEocmVsPSdiYWNrJylcIiApICkge1xyXG5cdFx0XHRcdCQubW9iaWxlLmJhY2soKTtcclxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGJhc2VVcmwgPSAkLm1vYmlsZS5nZXRDbG9zZXN0QmFzZVVybCggJGxpbmsgKTtcclxuXHJcblx0XHRcdC8vZ2V0IGhyZWYsIGlmIGRlZmluZWQsIG90aGVyd2lzZSBkZWZhdWx0IHRvIGVtcHR5IGhhc2hcclxuXHRcdFx0aHJlZiA9ICQubW9iaWxlLnBhdGgubWFrZVVybEFic29sdXRlKCAkbGluay5hdHRyKCBcImhyZWZcIiApIHx8IFwiI1wiLCBiYXNlVXJsICk7XHJcblxyXG5cdFx0XHQvL2lmIGFqYXggaXMgZGlzYWJsZWQsIGV4aXQgZWFybHlcclxuXHRcdFx0aWYgKCAhJC5tb2JpbGUuYWpheEVuYWJsZWQgJiYgISQubW9iaWxlLnBhdGguaXNFbWJlZGRlZFBhZ2UoIGhyZWYgKSApIHtcclxuXHRcdFx0XHRodHRwQ2xlYW51cCgpO1xyXG5cdFx0XHRcdC8vdXNlIGRlZmF1bHQgY2xpY2sgaGFuZGxpbmdcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIFhYWF9qYmxhczogSWRlYWxseSBsaW5rcyB0byBhcHBsaWNhdGlvbiBwYWdlcyBzaG91bGQgYmUgc3BlY2lmaWVkIGFzXHJcblx0XHRcdC8vICAgICAgICAgICAgYW4gdXJsIHRvIHRoZSBhcHBsaWNhdGlvbiBkb2N1bWVudCB3aXRoIGEgaGFzaCB0aGF0IGlzIGVpdGhlclxyXG5cdFx0XHQvLyAgICAgICAgICAgIHRoZSBzaXRlIHJlbGF0aXZlIHBhdGggb3IgaWQgdG8gdGhlIHBhZ2UuIEJ1dCBzb21lIG9mIHRoZVxyXG5cdFx0XHQvLyAgICAgICAgICAgIGludGVybmFsIGNvZGUgdGhhdCBkeW5hbWljYWxseSBnZW5lcmF0ZXMgc3ViLXBhZ2VzIGZvciBuZXN0ZWRcclxuXHRcdFx0Ly8gICAgICAgICAgICBsaXN0cyBhbmQgc2VsZWN0IGRpYWxvZ3MsIGp1c3Qgd3JpdGUgYSBoYXNoIGluIHRoZSBsaW5rIHRoZXlcclxuXHRcdFx0Ly8gICAgICAgICAgICBjcmVhdGUuIFRoaXMgbWVhbnMgdGhlIGFjdHVhbCBVUkwgcGF0aCBpcyBiYXNlZCBvbiB3aGF0ZXZlclxyXG5cdFx0XHQvLyAgICAgICAgICAgIHRoZSBjdXJyZW50IHZhbHVlIG9mIHRoZSBiYXNlIHRhZyBpcyBhdCB0aGUgdGltZSB0aGlzIGNvZGVcclxuXHRcdFx0Ly8gICAgICAgICAgICBpcyBjYWxsZWQuXHJcblx0XHRcdGlmICggaHJlZi5zZWFyY2goIFwiI1wiICkgIT09IC0xICYmXHJcblx0XHRcdFx0ISggJC5tb2JpbGUucGF0aC5pc0V4dGVybmFsKCBocmVmICkgJiYgJC5tb2JpbGUucGF0aC5pc0Fic29sdXRlVXJsKCBocmVmICkgKSApIHtcclxuXHJcblx0XHRcdFx0aHJlZiA9IGhyZWYucmVwbGFjZSggL1teI10qIy8sIFwiXCIgKTtcclxuXHRcdFx0XHRpZiAoICFocmVmICkge1xyXG5cdFx0XHRcdFx0Ly9saW5rIHdhcyBhbiBlbXB0eSBoYXNoIG1lYW50IHB1cmVseVxyXG5cdFx0XHRcdFx0Ly9mb3IgaW50ZXJhY3Rpb24sIHNvIHdlIGlnbm9yZSBpdC5cclxuXHRcdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fSBlbHNlIGlmICggJC5tb2JpbGUucGF0aC5pc1BhdGgoIGhyZWYgKSApIHtcclxuXHRcdFx0XHRcdC8vd2UgaGF2ZSBhcGF0aCBzbyBtYWtlIGl0IHRoZSBocmVmIHdlIHdhbnQgdG8gbG9hZC5cclxuXHRcdFx0XHRcdGhyZWYgPSAkLm1vYmlsZS5wYXRoLm1ha2VVcmxBYnNvbHV0ZSggaHJlZiwgYmFzZVVybCApO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHQvL3dlIGhhdmUgYSBzaW1wbGUgaWQgc28gdXNlIHRoZSBkb2N1bWVudFVybCBhcyBpdHMgYmFzZS5cclxuXHRcdFx0XHRcdGhyZWYgPSAkLm1vYmlsZS5wYXRoLm1ha2VVcmxBYnNvbHV0ZSggXCIjXCIgKyBocmVmLCBkb2N1bWVudFVybC5ocmVmTm9IYXNoICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBTaG91bGQgd2UgaGFuZGxlIHRoaXMgbGluaywgb3IgbGV0IHRoZSBicm93c2VyIGRlYWwgd2l0aCBpdD9cclxuXHRcdFx0dXNlRGVmYXVsdFVybEhhbmRsaW5nID0gJGxpbmsuaXMoIFwiW3JlbD0nZXh0ZXJuYWwnXVwiICkgfHwgJGxpbmsuaXMoIFwiOmpxbURhdGEoYWpheD0nZmFsc2UnKVwiICkgfHwgJGxpbmsuaXMoIFwiW3RhcmdldF1cIiApO1xyXG5cclxuXHRcdFx0Ly8gU29tZSBlbWJlZGRlZCBicm93c2VycywgbGlrZSB0aGUgd2ViIHZpZXcgaW4gUGhvbmUgR2FwLCBhbGxvdyBjcm9zcy1kb21haW4gWEhSXHJcblx0XHRcdC8vIHJlcXVlc3RzIGlmIHRoZSBkb2N1bWVudCBkb2luZyB0aGUgcmVxdWVzdCB3YXMgbG9hZGVkIHZpYSB0aGUgZmlsZTovLyBwcm90b2NvbC5cclxuXHRcdFx0Ly8gVGhpcyBpcyB1c3VhbGx5IHRvIGFsbG93IHRoZSBhcHBsaWNhdGlvbiB0byBcInBob25lIGhvbWVcIiBhbmQgZmV0Y2ggYXBwIHNwZWNpZmljXHJcblx0XHRcdC8vIGRhdGEuIFdlIG5vcm1hbGx5IGxldCB0aGUgYnJvd3NlciBoYW5kbGUgZXh0ZXJuYWwvY3Jvc3MtZG9tYWluIHVybHMsIGJ1dCBpZiB0aGVcclxuXHRcdFx0Ly8gYWxsb3dDcm9zc0RvbWFpblBhZ2VzIG9wdGlvbiBpcyB0cnVlLCB3ZSB3aWxsIGFsbG93IGNyb3NzLWRvbWFpbiBodHRwL2h0dHBzXHJcblx0XHRcdC8vIHJlcXVlc3RzIHRvIGdvIHRocm91Z2ggb3VyIHBhZ2UgbG9hZGluZyBsb2dpYy5cclxuXHJcblx0XHRcdC8vY2hlY2sgZm9yIHByb3RvY29sIG9yIHJlbCBhbmQgaXRzIG5vdCBhbiBlbWJlZGRlZCBwYWdlXHJcblx0XHRcdC8vVE9ETyBvdmVybGFwIGluIGxvZ2ljIGZyb20gaXNFeHRlcm5hbCwgcmVsPWV4dGVybmFsIGNoZWNrIHNob3VsZCBiZVxyXG5cdFx0XHQvLyAgICAgbW92ZWQgaW50byBtb3JlIGNvbXByZWhlbnNpdmUgaXNFeHRlcm5hbExpbmtcclxuXHRcdFx0aXNFeHRlcm5hbCA9IHVzZURlZmF1bHRVcmxIYW5kbGluZyB8fCAoICQubW9iaWxlLnBhdGguaXNFeHRlcm5hbCggaHJlZiApICYmICEkLm1vYmlsZS5wYXRoLmlzUGVybWl0dGVkQ3Jvc3NEb21haW5SZXF1ZXN0KCBkb2N1bWVudFVybCwgaHJlZiApICk7XHJcblxyXG5cdFx0XHRpZiAoIGlzRXh0ZXJuYWwgKSB7XHJcblx0XHRcdFx0aHR0cENsZWFudXAoKTtcclxuXHRcdFx0XHQvL3VzZSBkZWZhdWx0IGNsaWNrIGhhbmRsaW5nXHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvL3VzZSBhamF4XHJcblx0XHRcdHRyYW5zaXRpb24gPSAkbGluay5qcW1EYXRhKCBcInRyYW5zaXRpb25cIiApO1xyXG5cdFx0XHRyZXZlcnNlID0gJGxpbmsuanFtRGF0YSggXCJkaXJlY3Rpb25cIiApID09PSBcInJldmVyc2VcIiB8fFxyXG5cdFx0XHRcdFx0XHQvLyBkZXByZWNhdGVkIC0gcmVtb3ZlIGJ5IDEuMFxyXG5cdFx0XHRcdFx0XHQkbGluay5qcW1EYXRhKCBcImJhY2tcIiApO1xyXG5cclxuXHRcdFx0Ly90aGlzIG1heSBuZWVkIHRvIGJlIG1vcmUgc3BlY2lmaWMgYXMgd2UgdXNlIGRhdGEtcmVsIG1vcmVcclxuXHRcdFx0cm9sZSA9ICRsaW5rLmF0dHIoIFwiZGF0YS1cIiArICQubW9iaWxlLm5zICsgXCJyZWxcIiApIHx8IHVuZGVmaW5lZDtcclxuXHJcblx0XHRcdCQubW9iaWxlLmNoYW5nZVBhZ2UoIGhyZWYsIHsgdHJhbnNpdGlvbjogdHJhbnNpdGlvbiwgcmV2ZXJzZTogcmV2ZXJzZSwgcm9sZTogcm9sZSwgbGluazogJGxpbmsgfSApO1xyXG5cdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly9wcmVmZXRjaCBwYWdlcyB3aGVuIGFuY2hvcnMgd2l0aCBkYXRhLXByZWZldGNoIGFyZSBlbmNvdW50ZXJlZFxyXG5cdFx0JC5tb2JpbGUuZG9jdW1lbnQuZGVsZWdhdGUoIFwiLnVpLXBhZ2VcIiwgXCJwYWdlc2hvdy5wcmVmZXRjaFwiLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIHVybHMgPSBbXTtcclxuXHRcdFx0JCggdGhpcyApLmZpbmQoIFwiYTpqcW1EYXRhKHByZWZldGNoKVwiICkuZWFjaChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR2YXIgJGxpbmsgPSAkKCB0aGlzICksXHJcblx0XHRcdFx0XHR1cmwgPSAkbGluay5hdHRyKCBcImhyZWZcIiApO1xyXG5cclxuXHRcdFx0XHRpZiAoIHVybCAmJiAkLmluQXJyYXkoIHVybCwgdXJscyApID09PSAtMSApIHtcclxuXHRcdFx0XHRcdHVybHMucHVzaCggdXJsICk7XHJcblxyXG5cdFx0XHRcdFx0JC5tb2JpbGUubG9hZFBhZ2UoIHVybCwgeyByb2xlOiAkbGluay5hdHRyKCBcImRhdGEtXCIgKyAkLm1vYmlsZS5ucyArIFwicmVsXCIgKSxwcmVmZXRjaDogdHJ1ZSB9ICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIFRPRE8gZW5zdXJlIHRoYXQgdGhlIG5hdmlnYXRlIGJpbmRpbmcgaW4gdGhlIGNvbnRlbnQgd2lkZ2V0IGhhcHBlbnMgYXQgdGhlIHJpZ2h0IHRpbWVcclxuXHRcdCQubW9iaWxlLnBhZ2VDb250YWluZXIucGFnZWNvbnRhaW5lcigpO1xyXG5cclxuXHRcdC8vc2V0IHBhZ2UgbWluLWhlaWdodHMgdG8gYmUgZGV2aWNlIHNwZWNpZmljXHJcblx0XHQkLm1vYmlsZS5kb2N1bWVudC5iaW5kKCBcInBhZ2VzaG93XCIsIGZ1bmN0aW9uKCkge1xyXG5cclxuXHRcdFx0Ly8gV2UgbmVlZCB0byB3YWl0IGZvciB3aW5kb3cubG9hZCB0byBtYWtlIHN1cmUgdGhhdCBzdHlsZXMgaGF2ZSBhbHJlYWR5IGJlZW4gcmVuZGVyZWQsXHJcblx0XHRcdC8vIG90aGVyd2lzZSBoZWlnaHRzIG9mIGV4dGVybmFsIHRvb2xiYXJzIHdpbGwgaGF2ZSB0aGUgd3JvbmcgdmFsdWVcclxuXHRcdFx0aWYgKCBsb2FkRGVmZXJyZWQgKSB7XHJcblx0XHRcdFx0bG9hZERlZmVycmVkLmRvbmUoICQubW9iaWxlLnJlc2V0QWN0aXZlUGFnZUhlaWdodCApO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdCQubW9iaWxlLnJlc2V0QWN0aXZlUGFnZUhlaWdodCgpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHRcdCQubW9iaWxlLndpbmRvdy5iaW5kKCBcInRocm90dGxlZHJlc2l6ZVwiLCAkLm1vYmlsZS5yZXNldEFjdGl2ZVBhZ2VIZWlnaHQgKTtcclxuXHJcblx0fTsvL25hdnJlYWR5RGVmZXJyZWQgZG9uZSBjYWxsYmFja1xyXG5cclxuXHQkKCBmdW5jdGlvbigpIHsgZG9tcmVhZHlEZWZlcnJlZC5yZXNvbHZlKCk7IH0gKTtcclxuXHJcblx0Ly8gQWNjb3VudCBmb3IgdGhlIHBvc3NpYmlsaXR5IHRoYXQgdGhlIGxvYWQgZXZlbnQgaGFzIGFscmVhZHkgZmlyZWRcclxuXHRpZiAoIGRvY3VtZW50LnJlYWR5U3RhdGUgPT09IFwiY29tcGxldGVcIiApIHtcclxuXHRcdHBhZ2VJc0Z1bGx5TG9hZGVkKCk7XHJcblx0fSBlbHNlIHtcclxuXHRcdCQubW9iaWxlLndpbmRvdy5sb2FkKCBwYWdlSXNGdWxseUxvYWRlZCApO1xyXG5cdH1cclxuXHJcblx0JC53aGVuKCBkb21yZWFkeURlZmVycmVkLCAkLm1vYmlsZS5uYXZyZWFkeURlZmVycmVkICkuZG9uZSggZnVuY3Rpb24oKSB7ICQubW9iaWxlLl9yZWdpc3RlckludGVybmFsRXZlbnRzKCk7IH0gKTtcclxufSkoIGpRdWVyeSApO1xyXG5cclxuXHJcbihmdW5jdGlvbiggJCwgd2luZG93LCB1bmRlZmluZWQgKSB7XHJcblxyXG5cdC8vIFRPRE8gcmVtb3ZlIGRpcmVjdCByZWZlcmVuY2VzIHRvICQubW9iaWxlIGFuZCBwcm9wZXJ0aWVzLCB3ZSBzaG91bGRcclxuXHQvLyAgICAgIGZhdm9yIGluamVjdGlvbiB3aXRoIHBhcmFtcyB0byB0aGUgY29uc3RydWN0b3JcclxuXHQkLm1vYmlsZS5UcmFuc2l0aW9uID0gZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLmluaXQuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xyXG5cdH07XHJcblxyXG5cdCQuZXh0ZW5kKCQubW9iaWxlLlRyYW5zaXRpb24ucHJvdG90eXBlLCB7XHJcblx0XHR0b1ByZUNsYXNzOiBcIiB1aS1wYWdlLXByZS1pblwiLFxyXG5cclxuXHRcdGluaXQ6IGZ1bmN0aW9uKCBuYW1lLCByZXZlcnNlLCAkdG8sICRmcm9tICkge1xyXG5cdFx0XHQkLmV4dGVuZCh0aGlzLCB7XHJcblx0XHRcdFx0bmFtZTogbmFtZSxcclxuXHRcdFx0XHRyZXZlcnNlOiByZXZlcnNlLFxyXG5cdFx0XHRcdCR0bzogJHRvLFxyXG5cdFx0XHRcdCRmcm9tOiAkZnJvbSxcclxuXHRcdFx0XHRkZWZlcnJlZDogbmV3ICQuRGVmZXJyZWQoKVxyXG5cdFx0XHR9KTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Y2xlYW5Gcm9tOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dGhpcy4kZnJvbVxyXG5cdFx0XHRcdC5yZW1vdmVDbGFzcyggJC5tb2JpbGUuYWN0aXZlUGFnZUNsYXNzICsgXCIgb3V0IGluIHJldmVyc2UgXCIgKyB0aGlzLm5hbWUgKVxyXG5cdFx0XHRcdC5oZWlnaHQoIFwiXCIgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gTk9URSBvdmVycmlkZGVuIGJ5IGNoaWxkIG9iamVjdCBwcm90b3R5cGVzLCBub29wJ2QgaGVyZSBhcyBkZWZhdWx0c1xyXG5cdFx0YmVmb3JlRG9uZUluOiBmdW5jdGlvbigpIHt9LFxyXG5cdFx0YmVmb3JlRG9uZU91dDogZnVuY3Rpb24oKSB7fSxcclxuXHRcdGJlZm9yZVN0YXJ0T3V0OiBmdW5jdGlvbigpIHt9LFxyXG5cclxuXHRcdGRvbmVJbjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHRoaXMuYmVmb3JlRG9uZUluKCk7XHJcblxyXG5cdFx0XHR0aGlzLiR0by5yZW1vdmVDbGFzcyggXCJvdXQgaW4gcmV2ZXJzZSBcIiArIHRoaXMubmFtZSApLmhlaWdodCggXCJcIiApO1xyXG5cclxuXHRcdFx0dGhpcy50b2dnbGVWaWV3cG9ydENsYXNzKCk7XHJcblxyXG5cdFx0XHQvLyBJbiBzb21lIGJyb3dzZXJzIChpT1M1KSwgM0QgdHJhbnNpdGlvbnMgYmxvY2sgdGhlIGFiaWxpdHkgdG8gc2Nyb2xsIHRvIHRoZSBkZXNpcmVkIGxvY2F0aW9uIGR1cmluZyB0cmFuc2l0aW9uXHJcblx0XHRcdC8vIFRoaXMgZW5zdXJlcyB3ZSBqdW1wIHRvIHRoYXQgc3BvdCBhZnRlciB0aGUgZmFjdCwgaWYgd2UgYXJlbid0IHRoZXJlIGFscmVhZHkuXHJcblx0XHRcdGlmICggJC5tb2JpbGUud2luZG93LnNjcm9sbFRvcCgpICE9PSB0aGlzLnRvU2Nyb2xsICkge1xyXG5cdFx0XHRcdHRoaXMuc2Nyb2xsUGFnZSgpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICggIXRoaXMuc2VxdWVudGlhbCApIHtcclxuXHRcdFx0XHR0aGlzLiR0by5hZGRDbGFzcyggJC5tb2JpbGUuYWN0aXZlUGFnZUNsYXNzICk7XHJcblx0XHRcdH1cclxuXHRcdFx0dGhpcy5kZWZlcnJlZC5yZXNvbHZlKCB0aGlzLm5hbWUsIHRoaXMucmV2ZXJzZSwgdGhpcy4kdG8sIHRoaXMuJGZyb20sIHRydWUgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0ZG9uZU91dDogZnVuY3Rpb24oIHNjcmVlbkhlaWdodCwgcmV2ZXJzZUNsYXNzLCBub25lLCBwcmV2ZW50Rm9jdXMgKSB7XHJcblx0XHRcdHRoaXMuYmVmb3JlRG9uZU91dCgpO1xyXG5cdFx0XHR0aGlzLnN0YXJ0SW4oIHNjcmVlbkhlaWdodCwgcmV2ZXJzZUNsYXNzLCBub25lLCBwcmV2ZW50Rm9jdXMgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0aGlkZUluOiBmdW5jdGlvbiggY2FsbGJhY2sgKSB7XHJcblx0XHRcdC8vIFByZXZlbnQgZmxpY2tlcmluZyBpbiBwaG9uZWdhcCBjb250YWluZXI6IHNlZSBjb21tZW50cyBhdCAjNDAyNCByZWdhcmRpbmcgaU9TXHJcblx0XHRcdHRoaXMuJHRvLmNzcyggXCJ6LWluZGV4XCIsIC0xMCApO1xyXG5cdFx0XHRjYWxsYmFjay5jYWxsKCB0aGlzICk7XHJcblx0XHRcdHRoaXMuJHRvLmNzcyggXCJ6LWluZGV4XCIsIFwiXCIgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0c2Nyb2xsUGFnZTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdC8vIEJ5IHVzaW5nIHNjcm9sbFRvIGluc3RlYWQgb2Ygc2lsZW50U2Nyb2xsLCB3ZSBjYW4ga2VlcCB0aGluZ3MgYmV0dGVyIGluIG9yZGVyXHJcblx0XHRcdC8vIEp1c3QgdG8gYmUgcHJlY2F1dGlvcywgZGlzYWJsZSBzY3JvbGxzdGFydCBsaXN0ZW5pbmcgbGlrZSBzaWxlbnRTY3JvbGwgd291bGRcclxuXHRcdFx0JC5ldmVudC5zcGVjaWFsLnNjcm9sbHN0YXJ0LmVuYWJsZWQgPSBmYWxzZTtcclxuXHRcdFx0Ly9pZiB3ZSBhcmUgaGlkaW5nIHRoZSB1cmwgYmFyIG9yIHRoZSBwYWdlIHdhcyBwcmV2aW91c2x5IHNjcm9sbGVkIHNjcm9sbCB0byBoaWRlIG9yIHJldHVybiB0byBwb3NpdGlvblxyXG5cdFx0XHRpZiAoICQubW9iaWxlLmhpZGVVcmxCYXIgfHwgdGhpcy50b1Njcm9sbCAhPT0gJC5tb2JpbGUuZGVmYXVsdEhvbWVTY3JvbGwgKSB7XHJcblx0XHRcdFx0d2luZG93LnNjcm9sbFRvKCAwLCB0aGlzLnRvU2Nyb2xsICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIHJlZW5hYmxlIHNjcm9sbHN0YXJ0IGxpc3RlbmluZyBsaWtlIHNpbGVudFNjcm9sbCB3b3VsZFxyXG5cdFx0XHRzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHQkLmV2ZW50LnNwZWNpYWwuc2Nyb2xsc3RhcnQuZW5hYmxlZCA9IHRydWU7XHJcblx0XHRcdH0sIDE1MCApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRzdGFydEluOiBmdW5jdGlvbiggc2NyZWVuSGVpZ2h0LCByZXZlcnNlQ2xhc3MsIG5vbmUsIHByZXZlbnRGb2N1cyApIHtcclxuXHRcdFx0dGhpcy5oaWRlSW4oZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0dGhpcy4kdG8uYWRkQ2xhc3MoICQubW9iaWxlLmFjdGl2ZVBhZ2VDbGFzcyArIHRoaXMudG9QcmVDbGFzcyApO1xyXG5cclxuXHRcdFx0XHQvLyBTZW5kIGZvY3VzIHRvIHBhZ2UgYXMgaXQgaXMgbm93IGRpc3BsYXk6IGJsb2NrXHJcblx0XHRcdFx0aWYgKCAhcHJldmVudEZvY3VzICkge1xyXG5cdFx0XHRcdFx0JC5tb2JpbGUuZm9jdXNQYWdlKCB0aGlzLiR0byApO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gU2V0IHRvIHBhZ2UgaGVpZ2h0XHJcblx0XHRcdFx0dGhpcy4kdG8uaGVpZ2h0KCBzY3JlZW5IZWlnaHQgKyB0aGlzLnRvU2Nyb2xsICk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCAhbm9uZSApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbFBhZ2UoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHR0aGlzLiR0b1xyXG5cdFx0XHRcdC5yZW1vdmVDbGFzcyggdGhpcy50b1ByZUNsYXNzIClcclxuXHRcdFx0XHQuYWRkQ2xhc3MoIHRoaXMubmFtZSArIFwiIGluIFwiICsgcmV2ZXJzZUNsYXNzICk7XHJcblxyXG5cdFx0XHRpZiAoICFub25lICkge1xyXG5cdFx0XHRcdHRoaXMuJHRvLmFuaW1hdGlvbkNvbXBsZXRlKCAkLnByb3h5KGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0dGhpcy5kb25lSW4oKTtcclxuXHRcdFx0XHR9LCB0aGlzICkpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHRoaXMuZG9uZUluKCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHR9LFxyXG5cclxuXHRcdHN0YXJ0T3V0OiBmdW5jdGlvbiggc2NyZWVuSGVpZ2h0LCByZXZlcnNlQ2xhc3MsIG5vbmUgKSB7XHJcblx0XHRcdHRoaXMuYmVmb3JlU3RhcnRPdXQoIHNjcmVlbkhlaWdodCwgcmV2ZXJzZUNsYXNzLCBub25lICk7XHJcblxyXG5cdFx0XHQvLyBTZXQgdGhlIGZyb20gcGFnZSdzIGhlaWdodCBhbmQgc3RhcnQgaXQgdHJhbnNpdGlvbmluZyBvdXRcclxuXHRcdFx0Ly8gTm90ZTogc2V0dGluZyBhbiBleHBsaWNpdCBoZWlnaHQgaGVscHMgZWxpbWluYXRlIHRpbGluZyBpbiB0aGUgdHJhbnNpdGlvbnNcclxuXHRcdFx0dGhpcy4kZnJvbVxyXG5cdFx0XHRcdC5oZWlnaHQoIHNjcmVlbkhlaWdodCArICQubW9iaWxlLndpbmRvdy5zY3JvbGxUb3AoKSApXHJcblx0XHRcdFx0LmFkZENsYXNzKCB0aGlzLm5hbWUgKyBcIiBvdXRcIiArIHJldmVyc2VDbGFzcyApO1xyXG5cdFx0fSxcclxuXHJcblx0XHR0b2dnbGVWaWV3cG9ydENsYXNzOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0JC5tb2JpbGUucGFnZUNvbnRhaW5lci50b2dnbGVDbGFzcyggXCJ1aS1tb2JpbGUtdmlld3BvcnQtdHJhbnNpdGlvbmluZyB2aWV3cG9ydC1cIiArIHRoaXMubmFtZSApO1xyXG5cdFx0fSxcclxuXHJcblx0XHR0cmFuc2l0aW9uOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0Ly8gTk9URSBtYW55IG9mIHRoZXNlIGNvdWxkIGJlIGNhbGN1bGF0ZWQvcmVjb3JkZWQgaW4gdGhlIGNvbnN0cnVjdG9yLCBpdCdzIG15XHJcblx0XHRcdC8vICAgICAgb3BpbmlvbiB0aGF0IGJpbmRpbmcgdGhlbSBhcyBsYXRlIGFzIHBvc3NpYmxlIGhhcyB2YWx1ZSB3aXRoIHJlZ2FyZHMgdG9cclxuXHRcdFx0Ly8gICAgICBiZXR0ZXIgdHJhbnNpdGlvbnMgd2l0aCBmZXdlciBidWdzLiBJZSwgaXQncyBub3QgZ3VhcmFudGVlZCB0aGF0IHRoZVxyXG5cdFx0XHQvLyAgICAgIG9iamVjdCB3aWxsIGJlIGNyZWF0ZWQgYW5kIHRyYW5zaXRpb24gd2lsbCBiZSBydW4gaW1tZWRpYXRlbHkgYWZ0ZXIgYXNcclxuXHRcdFx0Ly8gICAgICBpdCBpcyB0b2RheS4gU28gd2Ugd2FpdCB1bnRpbCB0cmFuc2l0aW9uIGlzIGludm9rZWQgdG8gZ2F0aGVyIHRoZSBmb2xsb3dpbmdcclxuXHRcdFx0dmFyIG5vbmUsXHJcblx0XHRcdFx0cmV2ZXJzZUNsYXNzID0gdGhpcy5yZXZlcnNlID8gXCIgcmV2ZXJzZVwiIDogXCJcIixcclxuXHRcdFx0XHRzY3JlZW5IZWlnaHQgPSAkLm1vYmlsZS5nZXRTY3JlZW5IZWlnaHQoKSxcclxuXHRcdFx0XHRtYXhUcmFuc2l0aW9uT3ZlcnJpZGUgPSAkLm1vYmlsZS5tYXhUcmFuc2l0aW9uV2lkdGggIT09IGZhbHNlICYmXHJcblx0XHRcdFx0XHQkLm1vYmlsZS53aW5kb3cud2lkdGgoKSA+ICQubW9iaWxlLm1heFRyYW5zaXRpb25XaWR0aDtcclxuXHJcblx0XHRcdHRoaXMudG9TY3JvbGwgPSAkLm1vYmlsZS5uYXZpZ2F0ZS5oaXN0b3J5LmdldEFjdGl2ZSgpLmxhc3RTY3JvbGwgfHwgJC5tb2JpbGUuZGVmYXVsdEhvbWVTY3JvbGw7XHJcblxyXG5cdFx0XHRub25lID0gISQuc3VwcG9ydC5jc3NUcmFuc2l0aW9ucyB8fCAhJC5zdXBwb3J0LmNzc0FuaW1hdGlvbnMgfHxcclxuXHRcdFx0XHRtYXhUcmFuc2l0aW9uT3ZlcnJpZGUgfHwgIXRoaXMubmFtZSB8fCB0aGlzLm5hbWUgPT09IFwibm9uZVwiIHx8XHJcblx0XHRcdFx0TWF0aC5tYXgoICQubW9iaWxlLndpbmRvdy5zY3JvbGxUb3AoKSwgdGhpcy50b1Njcm9sbCApID5cclxuXHRcdFx0XHRcdCQubW9iaWxlLmdldE1heFNjcm9sbEZvclRyYW5zaXRpb24oKTtcclxuXHJcblx0XHRcdHRoaXMudG9nZ2xlVmlld3BvcnRDbGFzcygpO1xyXG5cclxuXHRcdFx0aWYgKCB0aGlzLiRmcm9tICYmICFub25lICkge1xyXG5cdFx0XHRcdHRoaXMuc3RhcnRPdXQoIHNjcmVlbkhlaWdodCwgcmV2ZXJzZUNsYXNzLCBub25lICk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0dGhpcy5kb25lT3V0KCBzY3JlZW5IZWlnaHQsIHJldmVyc2VDbGFzcywgbm9uZSwgdHJ1ZSApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRyZXR1cm4gdGhpcy5kZWZlcnJlZC5wcm9taXNlKCk7XHJcblx0XHR9XHJcblx0fSk7XHJcbn0pKCBqUXVlcnksIHRoaXMgKTtcclxuXHJcblxyXG4oZnVuY3Rpb24oICQgKSB7XHJcblxyXG5cdCQubW9iaWxlLlNlcmlhbFRyYW5zaXRpb24gPSBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuaW5pdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG5cdH07XHJcblxyXG5cdCQuZXh0ZW5kKCQubW9iaWxlLlNlcmlhbFRyYW5zaXRpb24ucHJvdG90eXBlLCAkLm1vYmlsZS5UcmFuc2l0aW9uLnByb3RvdHlwZSwge1xyXG5cdFx0c2VxdWVudGlhbDogdHJ1ZSxcclxuXHJcblx0XHRiZWZvcmVEb25lT3V0OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0aWYgKCB0aGlzLiRmcm9tICkge1xyXG5cdFx0XHRcdHRoaXMuY2xlYW5Gcm9tKCk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblxyXG5cdFx0YmVmb3JlU3RhcnRPdXQ6IGZ1bmN0aW9uKCBzY3JlZW5IZWlnaHQsIHJldmVyc2VDbGFzcywgbm9uZSApIHtcclxuXHRcdFx0dGhpcy4kZnJvbS5hbmltYXRpb25Db21wbGV0ZSgkLnByb3h5KGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHRoaXMuZG9uZU91dCggc2NyZWVuSGVpZ2h0LCByZXZlcnNlQ2xhc3MsIG5vbmUgKTtcclxuXHRcdFx0fSwgdGhpcyApKTtcclxuXHRcdH1cclxuXHR9KTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcblxyXG4oZnVuY3Rpb24oICQgKSB7XHJcblxyXG5cdCQubW9iaWxlLkNvbmN1cnJlbnRUcmFuc2l0aW9uID0gZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLmluaXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxuXHR9O1xyXG5cclxuXHQkLmV4dGVuZCgkLm1vYmlsZS5Db25jdXJyZW50VHJhbnNpdGlvbi5wcm90b3R5cGUsICQubW9iaWxlLlRyYW5zaXRpb24ucHJvdG90eXBlLCB7XHJcblx0XHRzZXF1ZW50aWFsOiBmYWxzZSxcclxuXHJcblx0XHRiZWZvcmVEb25lSW46IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpZiAoIHRoaXMuJGZyb20gKSB7XHJcblx0XHRcdFx0dGhpcy5jbGVhbkZyb20oKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHJcblx0XHRiZWZvcmVTdGFydE91dDogZnVuY3Rpb24oIHNjcmVlbkhlaWdodCwgcmV2ZXJzZUNsYXNzLCBub25lICkge1xyXG5cdFx0XHR0aGlzLmRvbmVPdXQoIHNjcmVlbkhlaWdodCwgcmV2ZXJzZUNsYXNzLCBub25lICk7XHJcblx0XHR9XHJcblx0fSk7XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG5cclxuKGZ1bmN0aW9uKCAkICkge1xyXG5cclxuXHQvLyBnZW5lcmF0ZSB0aGUgaGFuZGxlcnMgZnJvbSB0aGUgYWJvdmVcclxuXHR2YXIgZGVmYXVsdEdldE1heFNjcm9sbEZvclRyYW5zaXRpb24gPSBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiAkLm1vYmlsZS5nZXRTY3JlZW5IZWlnaHQoKSAqIDM7XHJcblx0fTtcclxuXHJcblx0Ly90cmFuc2l0aW9uIGhhbmRsZXIgZGljdGlvbmFyeSBmb3IgM3JkIHBhcnR5IHRyYW5zaXRpb25zXHJcblx0JC5tb2JpbGUudHJhbnNpdGlvbkhhbmRsZXJzID0ge1xyXG5cdFx0XCJzZXF1ZW50aWFsXCI6ICQubW9iaWxlLlNlcmlhbFRyYW5zaXRpb24sXHJcblx0XHRcInNpbXVsdGFuZW91c1wiOiAkLm1vYmlsZS5Db25jdXJyZW50VHJhbnNpdGlvblxyXG5cdH07XHJcblxyXG5cdC8vIE1ha2Ugb3VyIHRyYW5zaXRpb24gaGFuZGxlciB0aGUgcHVibGljIGRlZmF1bHQuXHJcblx0JC5tb2JpbGUuZGVmYXVsdFRyYW5zaXRpb25IYW5kbGVyID0gJC5tb2JpbGUudHJhbnNpdGlvbkhhbmRsZXJzLnNlcXVlbnRpYWw7XHJcblxyXG5cdCQubW9iaWxlLnRyYW5zaXRpb25GYWxsYmFja3MgPSB7fTtcclxuXHJcblx0Ly8gSWYgdHJhbnNpdGlvbiBpcyBkZWZpbmVkLCBjaGVjayBpZiBjc3MgM0QgdHJhbnNmb3JtcyBhcmUgc3VwcG9ydGVkLCBhbmQgaWYgbm90LCBpZiBhIGZhbGxiYWNrIGlzIHNwZWNpZmllZFxyXG5cdCQubW9iaWxlLl9tYXliZURlZ3JhZGVUcmFuc2l0aW9uID0gZnVuY3Rpb24oIHRyYW5zaXRpb24gKSB7XHJcblx0XHRpZiAoIHRyYW5zaXRpb24gJiYgISQuc3VwcG9ydC5jc3NUcmFuc2Zvcm0zZCAmJiAkLm1vYmlsZS50cmFuc2l0aW9uRmFsbGJhY2tzWyB0cmFuc2l0aW9uIF0gKSB7XHJcblx0XHRcdHRyYW5zaXRpb24gPSAkLm1vYmlsZS50cmFuc2l0aW9uRmFsbGJhY2tzWyB0cmFuc2l0aW9uIF07XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHRyYW5zaXRpb247XHJcblx0fTtcclxuXHJcblx0Ly8gU2V0IHRoZSBnZXRNYXhTY3JvbGxGb3JUcmFuc2l0aW9uIHRvIGRlZmF1bHQgaWYgbm8gaW1wbGVtZW50YXRpb24gd2FzIHNldCBieSB1c2VyXHJcblx0JC5tb2JpbGUuZ2V0TWF4U2Nyb2xsRm9yVHJhbnNpdGlvbiA9ICQubW9iaWxlLmdldE1heFNjcm9sbEZvclRyYW5zaXRpb24gfHwgZGVmYXVsdEdldE1heFNjcm9sbEZvclRyYW5zaXRpb247XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4vKlxyXG4qIGZhbGxiYWNrIHRyYW5zaXRpb24gZm9yIGZsaXAgaW4gbm9uLTNEIHN1cHBvcnRpbmcgYnJvd3NlcnMgKHdoaWNoIHRlbmQgdG8gaGFuZGxlIGNvbXBsZXggdHJhbnNpdGlvbnMgcG9vcmx5IGluIGdlbmVyYWxcclxuKi9cclxuXHJcbihmdW5jdGlvbiggJCwgd2luZG93LCB1bmRlZmluZWQgKSB7XHJcblxyXG4kLm1vYmlsZS50cmFuc2l0aW9uRmFsbGJhY2tzLmZsaXAgPSBcImZhZGVcIjtcclxuXHJcbn0pKCBqUXVlcnksIHRoaXMgKTtcclxuXHJcbi8qXHJcbiogZmFsbGJhY2sgdHJhbnNpdGlvbiBmb3IgZmxvdyBpbiBub24tM0Qgc3VwcG9ydGluZyBicm93c2VycyAod2hpY2ggdGVuZCB0byBoYW5kbGUgY29tcGxleCB0cmFuc2l0aW9ucyBwb29ybHkgaW4gZ2VuZXJhbFxyXG4qL1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB3aW5kb3csIHVuZGVmaW5lZCApIHtcclxuXHJcbiQubW9iaWxlLnRyYW5zaXRpb25GYWxsYmFja3MuZmxvdyA9IFwiZmFkZVwiO1xyXG5cclxufSkoIGpRdWVyeSwgdGhpcyApO1xyXG5cclxuLypcclxuKiBmYWxsYmFjayB0cmFuc2l0aW9uIGZvciBwb3AgaW4gbm9uLTNEIHN1cHBvcnRpbmcgYnJvd3NlcnMgKHdoaWNoIHRlbmQgdG8gaGFuZGxlIGNvbXBsZXggdHJhbnNpdGlvbnMgcG9vcmx5IGluIGdlbmVyYWxcclxuKi9cclxuXHJcbihmdW5jdGlvbiggJCwgd2luZG93LCB1bmRlZmluZWQgKSB7XHJcblxyXG4kLm1vYmlsZS50cmFuc2l0aW9uRmFsbGJhY2tzLnBvcCA9IFwiZmFkZVwiO1xyXG5cclxufSkoIGpRdWVyeSwgdGhpcyApO1xyXG5cclxuLypcclxuKiBmYWxsYmFjayB0cmFuc2l0aW9uIGZvciBzbGlkZSBpbiBub24tM0Qgc3VwcG9ydGluZyBicm93c2VycyAod2hpY2ggdGVuZCB0byBoYW5kbGUgY29tcGxleCB0cmFuc2l0aW9ucyBwb29ybHkgaW4gZ2VuZXJhbFxyXG4qL1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB3aW5kb3csIHVuZGVmaW5lZCApIHtcclxuXHJcbi8vIFVzZSB0aGUgc2ltdWx0YW5lb3VzIHRyYW5zaXRpb25zIGhhbmRsZXIgZm9yIHNsaWRlIHRyYW5zaXRpb25zXHJcbiQubW9iaWxlLnRyYW5zaXRpb25IYW5kbGVycy5zbGlkZSA9ICQubW9iaWxlLnRyYW5zaXRpb25IYW5kbGVycy5zaW11bHRhbmVvdXM7XHJcblxyXG4vLyBTZXQgdGhlIHNsaWRlIHRyYW5zaXRpb25zJ3MgZmFsbGJhY2sgdG8gXCJmYWRlXCJcclxuJC5tb2JpbGUudHJhbnNpdGlvbkZhbGxiYWNrcy5zbGlkZSA9IFwiZmFkZVwiO1xyXG5cclxufSkoIGpRdWVyeSwgdGhpcyApO1xyXG5cclxuLypcclxuKiBmYWxsYmFjayB0cmFuc2l0aW9uIGZvciBzbGlkZWRvd24gaW4gbm9uLTNEIHN1cHBvcnRpbmcgYnJvd3NlcnMgKHdoaWNoIHRlbmQgdG8gaGFuZGxlIGNvbXBsZXggdHJhbnNpdGlvbnMgcG9vcmx5IGluIGdlbmVyYWxcclxuKi9cclxuXHJcbihmdW5jdGlvbiggJCwgd2luZG93LCB1bmRlZmluZWQgKSB7XHJcblxyXG4kLm1vYmlsZS50cmFuc2l0aW9uRmFsbGJhY2tzLnNsaWRlZG93biA9IFwiZmFkZVwiO1xyXG5cclxufSkoIGpRdWVyeSwgdGhpcyApO1xyXG5cclxuLypcclxuKiBmYWxsYmFjayB0cmFuc2l0aW9uIGZvciBzbGlkZWZhZGUgaW4gbm9uLTNEIHN1cHBvcnRpbmcgYnJvd3NlcnMgKHdoaWNoIHRlbmQgdG8gaGFuZGxlIGNvbXBsZXggdHJhbnNpdGlvbnMgcG9vcmx5IGluIGdlbmVyYWxcclxuKi9cclxuXHJcbihmdW5jdGlvbiggJCwgd2luZG93LCB1bmRlZmluZWQgKSB7XHJcblxyXG4vLyBTZXQgdGhlIHNsaWRlIHRyYW5zaXRpb25zJ3MgZmFsbGJhY2sgdG8gXCJmYWRlXCJcclxuJC5tb2JpbGUudHJhbnNpdGlvbkZhbGxiYWNrcy5zbGlkZWZhZGUgPSBcImZhZGVcIjtcclxuXHJcbn0pKCBqUXVlcnksIHRoaXMgKTtcclxuXHJcbi8qXHJcbiogZmFsbGJhY2sgdHJhbnNpdGlvbiBmb3Igc2xpZGV1cCBpbiBub24tM0Qgc3VwcG9ydGluZyBicm93c2VycyAod2hpY2ggdGVuZCB0byBoYW5kbGUgY29tcGxleCB0cmFuc2l0aW9ucyBwb29ybHkgaW4gZ2VuZXJhbFxyXG4qL1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB3aW5kb3csIHVuZGVmaW5lZCApIHtcclxuXHJcbiQubW9iaWxlLnRyYW5zaXRpb25GYWxsYmFja3Muc2xpZGV1cCA9IFwiZmFkZVwiO1xyXG5cclxufSkoIGpRdWVyeSwgdGhpcyApO1xyXG5cclxuLypcclxuKiBmYWxsYmFjayB0cmFuc2l0aW9uIGZvciB0dXJuIGluIG5vbi0zRCBzdXBwb3J0aW5nIGJyb3dzZXJzICh3aGljaCB0ZW5kIHRvIGhhbmRsZSBjb21wbGV4IHRyYW5zaXRpb25zIHBvb3JseSBpbiBnZW5lcmFsXHJcbiovXHJcblxyXG4oZnVuY3Rpb24oICQsIHdpbmRvdywgdW5kZWZpbmVkICkge1xyXG5cclxuJC5tb2JpbGUudHJhbnNpdGlvbkZhbGxiYWNrcy50dXJuID0gXCJmYWRlXCI7XHJcblxyXG59KSggalF1ZXJ5LCB0aGlzICk7XHJcblxyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG4kLm1vYmlsZS5kZWdyYWRlSW5wdXRzID0ge1xyXG5cdGNvbG9yOiBmYWxzZSxcclxuXHRkYXRlOiBmYWxzZSxcclxuXHRkYXRldGltZTogZmFsc2UsXHJcblx0XCJkYXRldGltZS1sb2NhbFwiOiBmYWxzZSxcclxuXHRlbWFpbDogZmFsc2UsXHJcblx0bW9udGg6IGZhbHNlLFxyXG5cdG51bWJlcjogZmFsc2UsXHJcblx0cmFuZ2U6IFwibnVtYmVyXCIsXHJcblx0c2VhcmNoOiBcInRleHRcIixcclxuXHR0ZWw6IGZhbHNlLFxyXG5cdHRpbWU6IGZhbHNlLFxyXG5cdHVybDogZmFsc2UsXHJcblx0d2VlazogZmFsc2VcclxufTtcclxuLy8gQmFja2NvbXBhdCByZW1vdmUgaW4gMS41XHJcbiQubW9iaWxlLnBhZ2UucHJvdG90eXBlLm9wdGlvbnMuZGVncmFkZUlucHV0cyA9ICQubW9iaWxlLmRlZ3JhZGVJbnB1dHM7XHJcblxyXG4vLyBBdXRvIHNlbGYtaW5pdCB3aWRnZXRzXHJcbiQubW9iaWxlLmRlZ3JhZGVJbnB1dHNXaXRoaW4gPSBmdW5jdGlvbiggdGFyZ2V0ICkge1xyXG5cclxuXHR0YXJnZXQgPSAkKCB0YXJnZXQgKTtcclxuXHJcblx0Ly8gRGVncmFkZSBpbnB1dHMgdG8gYXZvaWQgcG9vcmx5IGltcGxlbWVudGVkIG5hdGl2ZSBmdW5jdGlvbmFsaXR5XHJcblx0dGFyZ2V0LmZpbmQoIFwiaW5wdXRcIiApLm5vdCggJC5tb2JpbGUucGFnZS5wcm90b3R5cGUua2VlcE5hdGl2ZVNlbGVjdG9yKCkgKS5lYWNoKGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGVsZW1lbnQgPSAkKCB0aGlzICksXHJcblx0XHRcdHR5cGUgPSB0aGlzLmdldEF0dHJpYnV0ZSggXCJ0eXBlXCIgKSxcclxuXHRcdFx0b3B0VHlwZSA9ICQubW9iaWxlLmRlZ3JhZGVJbnB1dHNbIHR5cGUgXSB8fCBcInRleHRcIixcclxuXHRcdFx0aHRtbCwgaGFzVHlwZSwgZmluZHN0ciwgcmVwc3RyO1xyXG5cclxuXHRcdGlmICggJC5tb2JpbGUuZGVncmFkZUlucHV0c1sgdHlwZSBdICkge1xyXG5cdFx0XHRodG1sID0gJCggXCI8ZGl2PlwiICkuaHRtbCggZWxlbWVudC5jbG9uZSgpICkuaHRtbCgpO1xyXG5cdFx0XHQvLyBJbiBJRSBicm93c2VycywgdGhlIHR5cGUgc29tZXRpbWVzIGRvZXNuJ3QgZXhpc3QgaW4gdGhlIGNsb25lZCBtYXJrdXAsIHNvIHdlIHJlcGxhY2UgdGhlIGNsb3NpbmcgdGFnIGluc3RlYWRcclxuXHRcdFx0aGFzVHlwZSA9IGh0bWwuaW5kZXhPZiggXCIgdHlwZT1cIiApID4gLTE7XHJcblx0XHRcdGZpbmRzdHIgPSBoYXNUeXBlID8gL1xccyt0eXBlPVtcIiddP1xcdytbJ1wiXT8vIDogL1xcLz8+LztcclxuXHRcdFx0cmVwc3RyID0gXCIgdHlwZT1cXFwiXCIgKyBvcHRUeXBlICsgXCJcXFwiIGRhdGEtXCIgKyAkLm1vYmlsZS5ucyArIFwidHlwZT1cXFwiXCIgKyB0eXBlICsgXCJcXFwiXCIgKyAoIGhhc1R5cGUgPyBcIlwiIDogXCI+XCIgKTtcclxuXHJcblx0XHRcdGVsZW1lbnQucmVwbGFjZVdpdGgoIGh0bWwucmVwbGFjZSggZmluZHN0ciwgcmVwc3RyICkgKTtcclxuXHRcdH1cclxuXHR9KTtcclxuXHJcbn07XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHdpbmRvdywgdW5kZWZpbmVkICkge1xyXG5cclxuJC53aWRnZXQoIFwibW9iaWxlLnBhZ2VcIiwgJC5tb2JpbGUucGFnZSwge1xyXG5cdG9wdGlvbnM6IHtcclxuXHJcblx0XHQvLyBBY2NlcHRzIGxlZnQsIHJpZ2h0IGFuZCBub25lXHJcblx0XHRjbG9zZUJ0bjogXCJsZWZ0XCIsXHJcblx0XHRjbG9zZUJ0blRleHQ6IFwiQ2xvc2VcIixcclxuXHRcdG92ZXJsYXlUaGVtZTogXCJhXCIsXHJcblx0XHRjb3JuZXJzOiB0cnVlLFxyXG5cdFx0ZGlhbG9nOiBmYWxzZVxyXG5cdH0sXHJcblxyXG5cdF9jcmVhdGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5fc3VwZXIoKTtcclxuXHRcdGlmICggdGhpcy5vcHRpb25zLmRpYWxvZyApIHtcclxuXHJcblx0XHRcdCQuZXh0ZW5kKCB0aGlzLCB7XHJcblx0XHRcdFx0X2lubmVyOiB0aGlzLmVsZW1lbnQuY2hpbGRyZW4oKSxcclxuXHRcdFx0XHRfaGVhZGVyQ2xvc2VCdXR0b246IG51bGxcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHRpZiAoICF0aGlzLm9wdGlvbnMuZW5oYW5jZWQgKSB7XHJcblx0XHRcdFx0dGhpcy5fc2V0Q2xvc2VCdG4oIHRoaXMub3B0aW9ucy5jbG9zZUJ0biApO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X2VuaGFuY2U6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5fc3VwZXIoKTtcclxuXHJcblx0XHQvLyBDbGFzcyB0aGUgbWFya3VwIGZvciBkaWFsb2cgc3R5bGluZyBhbmQgd3JhcCBpbnRlcmlvclxyXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMuZGlhbG9nICkge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoIFwidWktZGlhbG9nXCIgKVxyXG5cdFx0XHRcdC53cmFwSW5uZXIoICQoIFwiPGRpdi8+XCIsIHtcclxuXHJcblx0XHRcdFx0XHQvLyBBUklBIHJvbGVcclxuXHRcdFx0XHRcdFwicm9sZVwiIDogXCJkaWFsb2dcIixcclxuXHRcdFx0XHRcdFwiY2xhc3NcIiA6IFwidWktZGlhbG9nLWNvbnRhaW4gdWktb3ZlcmxheS1zaGFkb3dcIiArXHJcblx0XHRcdFx0XHRcdCggdGhpcy5vcHRpb25zLmNvcm5lcnMgPyBcIiB1aS1jb3JuZXItYWxsXCIgOiBcIlwiIClcclxuXHRcdFx0XHR9KSk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X3NldE9wdGlvbnM6IGZ1bmN0aW9uKCBvcHRpb25zICkge1xyXG5cdFx0dmFyIGNsb3NlQnV0dG9uTG9jYXRpb24sIGNsb3NlQnV0dG9uVGV4dCxcclxuXHRcdFx0Y3VycmVudE9wdHMgPSB0aGlzLm9wdGlvbnM7XHJcblxyXG5cdFx0aWYgKCBvcHRpb25zLmNvcm5lcnMgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0dGhpcy5faW5uZXIudG9nZ2xlQ2xhc3MoIFwidWktY29ybmVyLWFsbFwiLCAhIW9wdGlvbnMuY29ybmVycyApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggb3B0aW9ucy5vdmVybGF5VGhlbWUgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0aWYgKCAkLm1vYmlsZS5hY3RpdmVQYWdlWyAwIF0gPT09IHRoaXMuZWxlbWVudFsgMCBdICkge1xyXG5cdFx0XHRcdGN1cnJlbnRPcHRzLm92ZXJsYXlUaGVtZSA9IG9wdGlvbnMub3ZlcmxheVRoZW1lO1xyXG5cdFx0XHRcdHRoaXMuX2hhbmRsZVBhZ2VCZWZvcmVTaG93KCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG9wdGlvbnMuY2xvc2VCdG5UZXh0ICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdGNsb3NlQnV0dG9uTG9jYXRpb24gPSBjdXJyZW50T3B0cy5jbG9zZUJ0bjtcclxuXHRcdFx0Y2xvc2VCdXR0b25UZXh0ID0gb3B0aW9ucy5jbG9zZUJ0blRleHQ7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBvcHRpb25zLmNsb3NlQnRuICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdGNsb3NlQnV0dG9uTG9jYXRpb24gPSBvcHRpb25zLmNsb3NlQnRuO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggY2xvc2VCdXR0b25Mb2NhdGlvbiApIHtcclxuXHRcdFx0dGhpcy5fc2V0Q2xvc2VCdG4oIGNsb3NlQnV0dG9uTG9jYXRpb24sIGNsb3NlQnV0dG9uVGV4dCApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX3N1cGVyKCBvcHRpb25zICk7XHJcblx0fSxcclxuXHJcblx0X2hhbmRsZVBhZ2VCZWZvcmVTaG93OiBmdW5jdGlvbiAoKSB7XHJcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5vdmVybGF5VGhlbWUgJiYgdGhpcy5vcHRpb25zLmRpYWxvZyApIHtcclxuXHRcdFx0dGhpcy5yZW1vdmVDb250YWluZXJCYWNrZ3JvdW5kKCk7XHJcblx0XHRcdHRoaXMuc2V0Q29udGFpbmVyQmFja2dyb3VuZCggdGhpcy5vcHRpb25zLm92ZXJsYXlUaGVtZSApO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhpcy5fc3VwZXIoKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfc2V0Q2xvc2VCdG46IGZ1bmN0aW9uKCBsb2NhdGlvbiwgdGV4dCApIHtcclxuXHRcdHZhciBkc3QsXHJcblx0XHRcdGJ0biA9IHRoaXMuX2hlYWRlckNsb3NlQnV0dG9uO1xyXG5cclxuXHRcdC8vIFNhbml0aXplIHZhbHVlXHJcblx0XHRsb2NhdGlvbiA9IFwibGVmdFwiID09PSBsb2NhdGlvbiA/IFwibGVmdFwiIDogXCJyaWdodFwiID09PSBsb2NhdGlvbiA/IFwicmlnaHRcIiA6IFwibm9uZVwiO1xyXG5cclxuXHRcdGlmICggXCJub25lXCIgPT09IGxvY2F0aW9uICkge1xyXG5cdFx0XHRpZiAoIGJ0biApIHtcclxuXHRcdFx0XHRidG4ucmVtb3ZlKCk7XHJcblx0XHRcdFx0YnRuID0gbnVsbDtcclxuXHRcdFx0fVxyXG5cdFx0fSBlbHNlIGlmICggYnRuICkge1xyXG5cdFx0XHRidG4ucmVtb3ZlQ2xhc3MoIFwidWktYnRuLWxlZnQgdWktYnRuLXJpZ2h0XCIgKS5hZGRDbGFzcyggXCJ1aS1idG4tXCIgKyBsb2NhdGlvbiApO1xyXG5cdFx0XHRpZiAoIHRleHQgKSB7XHJcblx0XHRcdFx0YnRuLnRleHQoIHRleHQgKTtcclxuXHRcdFx0fVxyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0ZHN0ID0gdGhpcy5faW5uZXIuZmluZCggXCI6anFtRGF0YShyb2xlPSdoZWFkZXInKVwiICkuZmlyc3QoKTtcclxuXHRcdFx0YnRuID0gJCggXCI8YT48L2E+XCIsIHtcclxuXHRcdFx0XHRcdFwiaHJlZlwiOiBcIiNcIixcclxuXHRcdFx0XHRcdFwiY2xhc3NcIjogXCJ1aS1idG4gdWktY29ybmVyLWFsbCB1aS1pY29uLWRlbGV0ZSB1aS1idG4taWNvbi1ub3RleHQgdWktYnRuLVwiICsgbG9jYXRpb25cclxuXHRcdFx0XHR9KVxyXG5cdFx0XHRcdC5hdHRyKCBcImRhdGEtXCIgKyAkLm1vYmlsZS5ucyArIFwicmVsXCIsIFwiYmFja1wiIClcclxuXHRcdFx0XHQudGV4dCggdGV4dCB8fCB0aGlzLm9wdGlvbnMuY2xvc2VCdG5UZXh0IHx8IFwiXCIgKVxyXG5cdFx0XHRcdC5wcmVwZW5kVG8oIGRzdCApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX2hlYWRlckNsb3NlQnV0dG9uID0gYnRuO1xyXG5cdH1cclxufSk7XHJcblxyXG59KSggalF1ZXJ5LCB0aGlzICk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHdpbmRvdywgdW5kZWZpbmVkICkge1xyXG5cclxuJC53aWRnZXQoIFwibW9iaWxlLmRpYWxvZ1wiLCB7XHJcblx0b3B0aW9uczoge1xyXG5cclxuXHRcdC8vIEFjY2VwdHMgbGVmdCwgcmlnaHQgYW5kIG5vbmVcclxuXHRcdGNsb3NlQnRuOiBcImxlZnRcIixcclxuXHRcdGNsb3NlQnRuVGV4dDogXCJDbG9zZVwiLFxyXG5cdFx0b3ZlcmxheVRoZW1lOiBcImFcIixcclxuXHRcdGNvcm5lcnM6IHRydWVcclxuXHR9LFxyXG5cclxuXHQvLyBPdmVycmlkZSB0aGUgdGhlbWUgc2V0IGJ5IHRoZSBwYWdlIHBsdWdpbiBvbiBwYWdlc2hvd1xyXG5cdF9oYW5kbGVQYWdlQmVmb3JlU2hvdzogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9pc0Nsb3NlYWJsZSA9IHRydWU7XHJcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5vdmVybGF5VGhlbWUgKSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudFxyXG5cdFx0XHRcdC5wYWdlKCBcInJlbW92ZUNvbnRhaW5lckJhY2tncm91bmRcIiApXHJcblx0XHRcdFx0LnBhZ2UoIFwic2V0Q29udGFpbmVyQmFja2dyb3VuZFwiLCB0aGlzLm9wdGlvbnMub3ZlcmxheVRoZW1lICk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X2hhbmRsZVBhZ2VCZWZvcmVIaWRlOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX2lzQ2xvc2VhYmxlID0gZmFsc2U7XHJcblx0fSxcclxuXHJcblx0Ly8gY2xpY2sgYW5kIHN1Ym1pdCBldmVudHM6XHJcblx0Ly8gLSBjbGlja3MgYW5kIHN1Ym1pdHMgc2hvdWxkIHVzZSB0aGUgY2xvc2luZyB0cmFuc2l0aW9uIHRoYXQgdGhlIGRpYWxvZ1xyXG5cdC8vICAgb3BlbmVkIHdpdGggdW5sZXNzIGEgZGF0YS10cmFuc2l0aW9uIGlzIHNwZWNpZmllZCBvbiB0aGUgbGluay9mb3JtXHJcblx0Ly8gLSBpZiB0aGUgY2xpY2sgd2FzIG9uIHRoZSBjbG9zZSBidXR0b24sIG9yIHRoZSBsaW5rIGhhcyBhIGRhdGEtcmVsPVwiYmFja1wiXHJcblx0Ly8gICBpdCdsbCBnbyBiYWNrIGluIGhpc3RvcnkgbmF0dXJhbGx5XHJcblx0X2hhbmRsZVZDbGlja1N1Ym1pdDogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0dmFyIGF0dHJzLFxyXG5cdFx0XHQkdGFyZ2V0ID0gJCggZXZlbnQudGFyZ2V0ICkuY2xvc2VzdCggZXZlbnQudHlwZSA9PT0gXCJ2Y2xpY2tcIiA/IFwiYVwiIDogXCJmb3JtXCIgKTtcclxuXHJcblx0XHRpZiAoICR0YXJnZXQubGVuZ3RoICYmICEkdGFyZ2V0LmpxbURhdGEoIFwidHJhbnNpdGlvblwiICkgKSB7XHJcblx0XHRcdGF0dHJzID0ge307XHJcblx0XHRcdGF0dHJzWyBcImRhdGEtXCIgKyAkLm1vYmlsZS5ucyArIFwidHJhbnNpdGlvblwiIF0gPVxyXG5cdFx0XHRcdCggJC5tb2JpbGUubmF2aWdhdGUuaGlzdG9yeS5nZXRBY3RpdmUoKSB8fCB7fSApWyBcInRyYW5zaXRpb25cIiBdIHx8XHJcblx0XHRcdFx0JC5tb2JpbGUuZGVmYXVsdERpYWxvZ1RyYW5zaXRpb247XHJcblx0XHRcdGF0dHJzWyBcImRhdGEtXCIgKyAkLm1vYmlsZS5ucyArIFwiZGlyZWN0aW9uXCIgXSA9IFwicmV2ZXJzZVwiO1xyXG5cdFx0XHQkdGFyZ2V0LmF0dHIoIGF0dHJzICk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X2NyZWF0ZTogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgZWxlbSA9IHRoaXMuZWxlbWVudCxcclxuXHRcdFx0b3B0cyA9IHRoaXMub3B0aW9ucztcclxuXHJcblx0XHQvLyBDbGFzcyB0aGUgbWFya3VwIGZvciBkaWFsb2cgc3R5bGluZyBhbmQgd3JhcCBpbnRlcmlvclxyXG5cdFx0ZWxlbS5hZGRDbGFzcyggXCJ1aS1kaWFsb2dcIiApXHJcblx0XHRcdC53cmFwSW5uZXIoICQoIFwiPGRpdi8+XCIsIHtcclxuXHJcblx0XHRcdFx0Ly8gQVJJQSByb2xlXHJcblx0XHRcdFx0XCJyb2xlXCIgOiBcImRpYWxvZ1wiLFxyXG5cdFx0XHRcdFwiY2xhc3NcIiA6IFwidWktZGlhbG9nLWNvbnRhaW4gdWktb3ZlcmxheS1zaGFkb3dcIiArXHJcblx0XHRcdFx0XHQoICEhb3B0cy5jb3JuZXJzID8gXCIgdWktY29ybmVyLWFsbFwiIDogXCJcIiApXHJcblx0XHRcdH0pKTtcclxuXHJcblx0XHQkLmV4dGVuZCggdGhpcywge1xyXG5cdFx0XHRfaXNDbG9zZWFibGU6IGZhbHNlLFxyXG5cdFx0XHRfaW5uZXI6IGVsZW0uY2hpbGRyZW4oKSxcclxuXHRcdFx0X2hlYWRlckNsb3NlQnV0dG9uOiBudWxsXHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLl9vbiggZWxlbSwge1xyXG5cdFx0XHR2Y2xpY2s6IFwiX2hhbmRsZVZDbGlja1N1Ym1pdFwiLFxyXG5cdFx0XHRzdWJtaXQ6IFwiX2hhbmRsZVZDbGlja1N1Ym1pdFwiLFxyXG5cdFx0XHRwYWdlYmVmb3Jlc2hvdzogXCJfaGFuZGxlUGFnZUJlZm9yZVNob3dcIixcclxuXHRcdFx0cGFnZWJlZm9yZWhpZGU6IFwiX2hhbmRsZVBhZ2VCZWZvcmVIaWRlXCJcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMuX3NldENsb3NlQnRuKCBvcHRzLmNsb3NlQnRuICk7XHJcblx0fSxcclxuXHJcblx0X3NldE9wdGlvbnM6IGZ1bmN0aW9uKCBvcHRpb25zICkge1xyXG5cdFx0dmFyIGNsb3NlQnV0dG9uTG9jYXRpb24sIGNsb3NlQnV0dG9uVGV4dCxcclxuXHRcdFx0Y3VycmVudE9wdHMgPSB0aGlzLm9wdGlvbnM7XHJcblxyXG5cdFx0aWYgKCBvcHRpb25zLmNvcm5lcnMgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0dGhpcy5faW5uZXIudG9nZ2xlQ2xhc3MoIFwidWktY29ybmVyLWFsbFwiLCAhIW9wdGlvbnMuY29ybmVycyApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggb3B0aW9ucy5vdmVybGF5VGhlbWUgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0aWYgKCAkLm1vYmlsZS5hY3RpdmVQYWdlWyAwIF0gPT09IHRoaXMuZWxlbWVudFsgMCBdICkge1xyXG5cdFx0XHRcdGN1cnJlbnRPcHRzLm92ZXJsYXlUaGVtZSA9IG9wdGlvbnMub3ZlcmxheVRoZW1lO1xyXG5cdFx0XHRcdHRoaXMuX2hhbmRsZVBhZ2VCZWZvcmVTaG93KCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG9wdGlvbnMuY2xvc2VCdG5UZXh0ICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdGNsb3NlQnV0dG9uTG9jYXRpb24gPSBjdXJyZW50T3B0cy5jbG9zZUJ0bjtcclxuXHRcdFx0Y2xvc2VCdXR0b25UZXh0ID0gb3B0aW9ucy5jbG9zZUJ0blRleHQ7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBvcHRpb25zLmNsb3NlQnRuICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdGNsb3NlQnV0dG9uTG9jYXRpb24gPSBvcHRpb25zLmNsb3NlQnRuO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggY2xvc2VCdXR0b25Mb2NhdGlvbiApIHtcclxuXHRcdFx0dGhpcy5fc2V0Q2xvc2VCdG4oIGNsb3NlQnV0dG9uTG9jYXRpb24sIGNsb3NlQnV0dG9uVGV4dCApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX3N1cGVyKCBvcHRpb25zICk7XHJcblx0fSxcclxuXHJcblx0X3NldENsb3NlQnRuOiBmdW5jdGlvbiggbG9jYXRpb24sIHRleHQgKSB7XHJcblx0XHR2YXIgZHN0LFxyXG5cdFx0XHRidG4gPSB0aGlzLl9oZWFkZXJDbG9zZUJ1dHRvbjtcclxuXHJcblx0XHQvLyBTYW5pdGl6ZSB2YWx1ZVxyXG5cdFx0bG9jYXRpb24gPSBcImxlZnRcIiA9PT0gbG9jYXRpb24gPyBcImxlZnRcIiA6IFwicmlnaHRcIiA9PT0gbG9jYXRpb24gPyBcInJpZ2h0XCIgOiBcIm5vbmVcIjtcclxuXHJcblx0XHRpZiAoIFwibm9uZVwiID09PSBsb2NhdGlvbiApIHtcclxuXHRcdFx0aWYgKCBidG4gKSB7XHJcblx0XHRcdFx0YnRuLnJlbW92ZSgpO1xyXG5cdFx0XHRcdGJ0biA9IG51bGw7XHJcblx0XHRcdH1cclxuXHRcdH0gZWxzZSBpZiAoIGJ0biApIHtcclxuXHRcdFx0YnRuLnJlbW92ZUNsYXNzKCBcInVpLWJ0bi1sZWZ0IHVpLWJ0bi1yaWdodFwiICkuYWRkQ2xhc3MoIFwidWktYnRuLVwiICsgbG9jYXRpb24gKTtcclxuXHRcdFx0aWYgKCB0ZXh0ICkge1xyXG5cdFx0XHRcdGJ0bi50ZXh0KCB0ZXh0ICk7XHJcblx0XHRcdH1cclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGRzdCA9IHRoaXMuX2lubmVyLmZpbmQoIFwiOmpxbURhdGEocm9sZT0naGVhZGVyJylcIiApLmZpcnN0KCk7XHJcblx0XHRcdGJ0biA9ICQoIFwiPGE+PC9hPlwiLCB7XHJcblx0XHRcdFx0XHRcInJvbGVcIjogXCJidXR0b25cIixcclxuXHRcdFx0XHRcdFwiaHJlZlwiOiBcIiNcIixcclxuXHRcdFx0XHRcdFwiY2xhc3NcIjogXCJ1aS1idG4gdWktY29ybmVyLWFsbCB1aS1pY29uLWRlbGV0ZSB1aS1idG4taWNvbi1ub3RleHQgdWktYnRuLVwiICsgbG9jYXRpb25cclxuXHRcdFx0XHR9KVxyXG5cdFx0XHRcdC50ZXh0KCB0ZXh0IHx8IHRoaXMub3B0aW9ucy5jbG9zZUJ0blRleHQgfHwgXCJcIiApXHJcblx0XHRcdFx0LnByZXBlbmRUbyggZHN0ICk7XHJcblx0XHRcdHRoaXMuX29uKCBidG4sIHsgY2xpY2s6IFwiY2xvc2VcIiB9ICk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5faGVhZGVyQ2xvc2VCdXR0b24gPSBidG47XHJcblx0fSxcclxuXHJcblx0Ly8gQ2xvc2UgbWV0aG9kIGdvZXMgYmFjayBpbiBoaXN0b3J5XHJcblx0Y2xvc2U6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGhpc3QgPSAkLm1vYmlsZS5uYXZpZ2F0ZS5oaXN0b3J5O1xyXG5cclxuXHRcdGlmICggdGhpcy5faXNDbG9zZWFibGUgKSB7XHJcblx0XHRcdHRoaXMuX2lzQ2xvc2VhYmxlID0gZmFsc2U7XHJcblx0XHRcdC8vIElmIHRoZSBoYXNoIGxpc3RlbmluZyBpcyBlbmFibGVkIGFuZCB0aGVyZSBpcyBhdCBsZWFzdCBvbmUgcHJlY2VkaW5nIGhpc3RvcnlcclxuXHRcdFx0Ly8gZW50cnkgaXQncyBvayB0byBnbyBiYWNrLiBJbml0aWFsIHBhZ2VzIHdpdGggdGhlIGRpYWxvZyBoYXNoIHN0YXRlIGFyZSBhbiBleGFtcGxlXHJcblx0XHRcdC8vIHdoZXJlIHRoZSBzdGFjayBjaGVjayBpcyBuZWNlc3NhcnlcclxuXHRcdFx0aWYgKCAkLm1vYmlsZS5oYXNoTGlzdGVuaW5nRW5hYmxlZCAmJiBoaXN0LmFjdGl2ZUluZGV4ID4gMCApIHtcclxuXHRcdFx0XHQkLm1vYmlsZS5iYWNrKCk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0JC5tb2JpbGUucGFnZUNvbnRhaW5lci5wYWdlY29udGFpbmVyKCBcImJhY2tcIiApO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG59KTtcclxuXHJcbn0pKCBqUXVlcnksIHRoaXMgKTtcclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxudmFyIHJJbml0aWFsTGV0dGVyID0gLyhbQS1aXSkvZyxcclxuXHJcblx0Ly8gQ29uc3RydWN0IGljb25wb3MgY2xhc3MgZnJvbSBpY29ucG9zIHZhbHVlXHJcblx0aWNvbnBvc0NsYXNzID0gZnVuY3Rpb24oIGljb25wb3MgKSB7XHJcblx0XHRyZXR1cm4gKCBcInVpLWJ0bi1pY29uLVwiICsgKCBpY29ucG9zID09PSBudWxsID8gXCJsZWZ0XCIgOiBpY29ucG9zICkgKTtcclxuXHR9O1xyXG5cclxuJC53aWRnZXQoIFwibW9iaWxlLmNvbGxhcHNpYmxlXCIsIHtcclxuXHRvcHRpb25zOiB7XHJcblx0XHRlbmhhbmNlZDogZmFsc2UsXHJcblx0XHRleHBhbmRDdWVUZXh0OiBudWxsLFxyXG5cdFx0Y29sbGFwc2VDdWVUZXh0OiBudWxsLFxyXG5cdFx0Y29sbGFwc2VkOiB0cnVlLFxyXG5cdFx0aGVhZGluZzogXCJoMSxoMixoMyxoNCxoNSxoNixsZWdlbmRcIixcclxuXHRcdGNvbGxhcHNlZEljb246IG51bGwsXHJcblx0XHRleHBhbmRlZEljb246IG51bGwsXHJcblx0XHRpY29ucG9zOiBudWxsLFxyXG5cdFx0dGhlbWU6IG51bGwsXHJcblx0XHRjb250ZW50VGhlbWU6IG51bGwsXHJcblx0XHRpbnNldDogbnVsbCxcclxuXHRcdGNvcm5lcnM6IG51bGwsXHJcblx0XHRtaW5pOiBudWxsXHJcblx0fSxcclxuXHJcblx0X2NyZWF0ZTogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgZWxlbSA9IHRoaXMuZWxlbWVudCxcclxuXHRcdFx0dWkgPSB7XHJcblx0XHRcdFx0YWNjb3JkaW9uOiBlbGVtXHJcblx0XHRcdFx0XHQuY2xvc2VzdCggXCI6anFtRGF0YShyb2xlPSdjb2xsYXBzaWJsZS1zZXQnKSxcIiArXHJcblx0XHRcdFx0XHRcdFwiOmpxbURhdGEocm9sZT0nY29sbGFwc2libGVzZXQnKVwiICtcclxuXHRcdFx0XHRcdFx0KCAkLm1vYmlsZS5jb2xsYXBzaWJsZXNldCA/IFwiLCA6bW9iaWxlLWNvbGxhcHNpYmxlc2V0XCIgOlxyXG5cdFx0XHRcdFx0XHRcdFwiXCIgKSApXHJcblx0XHRcdFx0XHQuYWRkQ2xhc3MoIFwidWktY29sbGFwc2libGUtc2V0XCIgKVxyXG5cdFx0XHR9O1xyXG5cclxuXHRcdHRoaXMuX3VpID0gdWk7XHJcblx0XHR0aGlzLl9yZW5kZXJlZE9wdGlvbnMgPSB0aGlzLl9nZXRPcHRpb25zKCB0aGlzLm9wdGlvbnMgKTtcclxuXHJcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5lbmhhbmNlZCApIHtcclxuXHRcdFx0dWkuaGVhZGluZyA9IHRoaXMuZWxlbWVudC5jaGlsZHJlbiggXCIudWktY29sbGFwc2libGUtaGVhZGluZ1wiICk7XHJcblx0XHRcdHVpLmNvbnRlbnQgPSB1aS5oZWFkaW5nLm5leHQoKTtcclxuXHRcdFx0dWkuYW5jaG9yID0gdWkuaGVhZGluZy5jaGlsZHJlbigpO1xyXG5cdFx0XHR1aS5zdGF0dXMgPSB1aS5hbmNob3IuY2hpbGRyZW4oIFwiLnVpLWNvbGxhcHNpYmxlLWhlYWRpbmctc3RhdHVzXCIgKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRoaXMuX2VuaGFuY2UoIGVsZW0sIHVpICk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5fb24oIHVpLmhlYWRpbmcsIHtcclxuXHRcdFx0XCJ0YXBcIjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0dWkuaGVhZGluZy5maW5kKCBcImFcIiApLmZpcnN0KCkuYWRkQ2xhc3MoICQubW9iaWxlLmFjdGl2ZUJ0bkNsYXNzICk7XHJcblx0XHRcdH0sXHJcblxyXG5cdFx0XHRcImNsaWNrXCI6IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdFx0XHR0aGlzLl9oYW5kbGVFeHBhbmRDb2xsYXBzZSggIXVpLmhlYWRpbmcuaGFzQ2xhc3MoIFwidWktY29sbGFwc2libGUtaGVhZGluZy1jb2xsYXBzZWRcIiApICk7XHJcblx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fSxcclxuXHJcblx0Ly8gQWRqdXN0IHRoZSBrZXlzIGluc2lkZSBvcHRpb25zIGZvciBpbmhlcml0ZWQgdmFsdWVzXHJcblx0X2dldE9wdGlvbnM6IGZ1bmN0aW9uKCBvcHRpb25zICkge1xyXG5cdFx0dmFyIGtleSxcclxuXHRcdFx0YWNjb3JkaW9uID0gdGhpcy5fdWkuYWNjb3JkaW9uLFxyXG5cdFx0XHRhY2NvcmRpb25XaWRnZXQgPSB0aGlzLl91aS5hY2NvcmRpb25XaWRnZXQ7XHJcblxyXG5cdFx0Ly8gQ29weSBvcHRpb25zXHJcblx0XHRvcHRpb25zID0gJC5leHRlbmQoIHt9LCBvcHRpb25zICk7XHJcblxyXG5cdFx0aWYgKCBhY2NvcmRpb24ubGVuZ3RoICYmICFhY2NvcmRpb25XaWRnZXQgKSB7XHJcblx0XHRcdHRoaXMuX3VpLmFjY29yZGlvbldpZGdldCA9XHJcblx0XHRcdGFjY29yZGlvbldpZGdldCA9IGFjY29yZGlvbi5kYXRhKCBcIm1vYmlsZS1jb2xsYXBzaWJsZXNldFwiICk7XHJcblx0XHR9XHJcblxyXG5cdFx0Zm9yICgga2V5IGluIG9wdGlvbnMgKSB7XHJcblxyXG5cdFx0XHQvLyBSZXRyaWV2ZSB0aGUgb3B0aW9uIHZhbHVlIGZpcnN0IGZyb20gdGhlIG9wdGlvbnMgb2JqZWN0IHBhc3NlZCBpbiBhbmQsIGlmXHJcblx0XHRcdC8vIG51bGwsIGZyb20gdGhlIHBhcmVudCBhY2NvcmRpb24gb3IsIGlmIHRoYXQncyBudWxsIHRvbywgb3IgaWYgdGhlcmUncyBub1xyXG5cdFx0XHQvLyBwYXJlbnQgYWNjb3JkaW9uLCB0aGVuIGZyb20gdGhlIGRlZmF1bHRzLlxyXG5cdFx0XHRvcHRpb25zWyBrZXkgXSA9XHJcblx0XHRcdFx0KCBvcHRpb25zWyBrZXkgXSAhPSBudWxsICkgPyBvcHRpb25zWyBrZXkgXSA6XHJcblx0XHRcdFx0KCBhY2NvcmRpb25XaWRnZXQgKSA/IGFjY29yZGlvbldpZGdldC5vcHRpb25zWyBrZXkgXSA6XHJcblx0XHRcdFx0YWNjb3JkaW9uLmxlbmd0aCA/ICQubW9iaWxlLmdldEF0dHJpYnV0ZSggYWNjb3JkaW9uWyAwIF0sXHJcblx0XHRcdFx0XHRrZXkucmVwbGFjZSggckluaXRpYWxMZXR0ZXIsIFwiLSQxXCIgKS50b0xvd2VyQ2FzZSgpICk6XHJcblx0XHRcdFx0bnVsbDtcclxuXHJcblx0XHRcdGlmICggbnVsbCA9PSBvcHRpb25zWyBrZXkgXSApIHtcclxuXHRcdFx0XHRvcHRpb25zWyBrZXkgXSA9ICQubW9iaWxlLmNvbGxhcHNpYmxlLmRlZmF1bHRzWyBrZXkgXTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBvcHRpb25zO1xyXG5cdH0sXHJcblxyXG5cdF90aGVtZUNsYXNzRnJvbU9wdGlvbjogZnVuY3Rpb24oIHByZWZpeCwgdmFsdWUgKSB7XHJcblx0XHRyZXR1cm4gKCB2YWx1ZSA/ICggdmFsdWUgPT09IFwibm9uZVwiID8gXCJcIiA6IHByZWZpeCArIHZhbHVlICkgOiBcIlwiICk7XHJcblx0fSxcclxuXHJcblx0X2VuaGFuY2U6IGZ1bmN0aW9uKCBlbGVtLCB1aSApIHtcclxuXHRcdHZhciBpY29uY2xhc3MsXHJcblx0XHRcdG9wdHMgPSB0aGlzLl9yZW5kZXJlZE9wdGlvbnMsXHJcblx0XHRcdGNvbnRlbnRUaGVtZUNsYXNzID0gdGhpcy5fdGhlbWVDbGFzc0Zyb21PcHRpb24oIFwidWktYm9keS1cIiwgb3B0cy5jb250ZW50VGhlbWUgKTtcclxuXHJcblx0XHRlbGVtLmFkZENsYXNzKCBcInVpLWNvbGxhcHNpYmxlIFwiICtcclxuXHRcdFx0KCBvcHRzLmluc2V0ID8gXCJ1aS1jb2xsYXBzaWJsZS1pbnNldCBcIiA6IFwiXCIgKSArXHJcblx0XHRcdCggb3B0cy5pbnNldCAmJiBvcHRzLmNvcm5lcnMgPyBcInVpLWNvcm5lci1hbGwgXCIgOiBcIlwiICkgK1xyXG5cdFx0XHQoIGNvbnRlbnRUaGVtZUNsYXNzID8gXCJ1aS1jb2xsYXBzaWJsZS10aGVtZWQtY29udGVudCBcIiA6IFwiXCIgKSApO1xyXG5cdFx0dWkub3JpZ2luYWxIZWFkaW5nID0gZWxlbS5jaGlsZHJlbiggdGhpcy5vcHRpb25zLmhlYWRpbmcgKS5maXJzdCgpLFxyXG5cdFx0dWkuY29udGVudCA9IGVsZW1cclxuXHRcdFx0LndyYXBJbm5lciggXCI8ZGl2IFwiICtcclxuXHRcdFx0XHRcImNsYXNzPSd1aS1jb2xsYXBzaWJsZS1jb250ZW50IFwiICtcclxuXHRcdFx0XHRjb250ZW50VGhlbWVDbGFzcyArIFwiJz48L2Rpdj5cIiApXHJcblx0XHRcdC5jaGlsZHJlbiggXCIudWktY29sbGFwc2libGUtY29udGVudFwiICksXHJcblx0XHR1aS5oZWFkaW5nID0gdWkub3JpZ2luYWxIZWFkaW5nO1xyXG5cclxuXHRcdC8vIFJlcGxhY2UgY29sbGFwc2libGVIZWFkaW5nIGlmIGl0J3MgYSBsZWdlbmRcclxuXHRcdGlmICggdWkuaGVhZGluZy5pcyggXCJsZWdlbmRcIiApICkge1xyXG5cdFx0XHR1aS5oZWFkaW5nID0gJCggXCI8ZGl2IHJvbGU9J2hlYWRpbmcnPlwiKyB1aS5oZWFkaW5nLmh0bWwoKSArXCI8L2Rpdj5cIiApO1xyXG5cdFx0XHR1aS5wbGFjZWhvbGRlciA9ICQoIFwiPGRpdj48IS0tIHBsYWNlaG9sZGVyIGZvciBsZWdlbmQgLS0+PC9kaXY+XCIgKS5pbnNlcnRCZWZvcmUoIHVpLm9yaWdpbmFsSGVhZGluZyApO1xyXG5cdFx0XHR1aS5vcmlnaW5hbEhlYWRpbmcucmVtb3ZlKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWNvbmNsYXNzID0gKCBvcHRzLmNvbGxhcHNlZCA/ICggb3B0cy5jb2xsYXBzZWRJY29uID8gXCJ1aS1pY29uLVwiICsgb3B0cy5jb2xsYXBzZWRJY29uIDogXCJcIiApOlxyXG5cdFx0XHQoIG9wdHMuZXhwYW5kZWRJY29uID8gXCJ1aS1pY29uLVwiICsgb3B0cy5leHBhbmRlZEljb24gOiBcIlwiICkgKTtcclxuXHJcblx0XHR1aS5zdGF0dXMgPSAkKCBcIjxzcGFuIGNsYXNzPSd1aS1jb2xsYXBzaWJsZS1oZWFkaW5nLXN0YXR1cyc+PC9zcGFuPlwiICk7XHJcblx0XHR1aS5hbmNob3IgPSB1aS5oZWFkaW5nXHJcblx0XHRcdC5kZXRhY2goKVxyXG5cdFx0XHQvL21vZGlmeSBtYXJrdXAgJiBhdHRyaWJ1dGVzXHJcblx0XHRcdC5hZGRDbGFzcyggXCJ1aS1jb2xsYXBzaWJsZS1oZWFkaW5nXCIgKVxyXG5cdFx0XHQuYXBwZW5kKCB1aS5zdGF0dXMgKVxyXG5cdFx0XHQud3JhcElubmVyKCBcIjxhIGhyZWY9JyMnIGNsYXNzPSd1aS1jb2xsYXBzaWJsZS1oZWFkaW5nLXRvZ2dsZSc+PC9hPlwiIClcclxuXHRcdFx0LmZpbmQoIFwiYVwiIClcclxuXHRcdFx0XHQuZmlyc3QoKVxyXG5cdFx0XHRcdC5hZGRDbGFzcyggXCJ1aS1idG4gXCIgK1xyXG5cdFx0XHRcdFx0KCBpY29uY2xhc3MgPyBpY29uY2xhc3MgKyBcIiBcIiA6IFwiXCIgKSArXHJcblx0XHRcdFx0XHQoIGljb25jbGFzcyA/IGljb25wb3NDbGFzcyggb3B0cy5pY29ucG9zICkgK1xyXG5cdFx0XHRcdFx0XHRcIiBcIiA6IFwiXCIgKSArXHJcblx0XHRcdFx0XHR0aGlzLl90aGVtZUNsYXNzRnJvbU9wdGlvbiggXCJ1aS1idG4tXCIsIG9wdHMudGhlbWUgKSArIFwiIFwiICtcclxuXHRcdFx0XHRcdCggb3B0cy5taW5pID8gXCJ1aS1taW5pIFwiIDogXCJcIiApICk7XHJcblxyXG5cdFx0Ly9kcm9wIGhlYWRpbmcgaW4gYmVmb3JlIGNvbnRlbnRcclxuXHRcdHVpLmhlYWRpbmcuaW5zZXJ0QmVmb3JlKCB1aS5jb250ZW50ICk7XHJcblxyXG5cdFx0dGhpcy5faGFuZGxlRXhwYW5kQ29sbGFwc2UoIHRoaXMub3B0aW9ucy5jb2xsYXBzZWQgKTtcclxuXHJcblx0XHRyZXR1cm4gdWk7XHJcblx0fSxcclxuXHJcblx0cmVmcmVzaDogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9hcHBseU9wdGlvbnMoIHRoaXMub3B0aW9ucyApO1xyXG5cdFx0dGhpcy5fcmVuZGVyZWRPcHRpb25zID0gdGhpcy5fZ2V0T3B0aW9ucyggdGhpcy5vcHRpb25zICk7XHJcblx0fSxcclxuXHJcblx0X2FwcGx5T3B0aW9uczogZnVuY3Rpb24oIG9wdGlvbnMgKSB7XHJcblx0XHR2YXIgaXNDb2xsYXBzZWQsIG5ld1RoZW1lLCBvbGRUaGVtZSwgaGFzQ29ybmVycywgaGFzSWNvbixcclxuXHRcdFx0ZWxlbSA9IHRoaXMuZWxlbWVudCxcclxuXHRcdFx0Y3VycmVudE9wdHMgPSB0aGlzLl9yZW5kZXJlZE9wdGlvbnMsXHJcblx0XHRcdHVpID0gdGhpcy5fdWksXHJcblx0XHRcdGFuY2hvciA9IHVpLmFuY2hvcixcclxuXHRcdFx0c3RhdHVzID0gdWkuc3RhdHVzLFxyXG5cdFx0XHRvcHRzID0gdGhpcy5fZ2V0T3B0aW9ucyggb3B0aW9ucyApO1xyXG5cclxuXHRcdC8vIEZpcnN0IGFuZCBmb3JlbW9zdCB3ZSBuZWVkIHRvIG1ha2Ugc3VyZSB0aGUgY29sbGFwc2libGUgaXMgaW4gdGhlIHByb3BlclxyXG5cdFx0Ly8gc3RhdGUsIGluIGNhc2Ugc29tZWJvZHkgZGVjaWRlZCB0byBjaGFuZ2UgdGhlIGNvbGxhcHNlZCBvcHRpb24gYXQgdGhlXHJcblx0XHQvLyBzYW1lIHRpbWUgYXMgYW5vdGhlciBvcHRpb25cclxuXHRcdGlmICggb3B0aW9ucy5jb2xsYXBzZWQgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0dGhpcy5faGFuZGxlRXhwYW5kQ29sbGFwc2UoIG9wdGlvbnMuY29sbGFwc2VkICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aXNDb2xsYXBzZWQgPSBlbGVtLmhhc0NsYXNzKCBcInVpLWNvbGxhcHNpYmxlLWNvbGxhcHNlZFwiICk7XHJcblxyXG5cdFx0Ly8gV2Ugb25seSBuZWVkIHRvIGFwcGx5IHRoZSBjdWUgdGV4dCBmb3IgdGhlIGN1cnJlbnQgc3RhdGUgcmlnaHQgYXdheS5cclxuXHRcdC8vIFRoZSBjdWUgdGV4dCBmb3IgdGhlIGFsdGVybmF0ZSBzdGF0ZSB3aWxsIGJlIHN0b3JlZCBpbiB0aGUgb3B0aW9uc1xyXG5cdFx0Ly8gYW5kIGFwcGxpZWQgdGhlIG5leHQgdGltZSB0aGUgY29sbGFwc2libGUncyBzdGF0ZSBpcyB0b2dnbGVkXHJcblx0XHRpZiAoIGlzQ29sbGFwc2VkICkge1xyXG5cdFx0XHRpZiAoIG9wdHMuZXhwYW5kQ3VlVGV4dCAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRcdHN0YXR1cy50ZXh0KCBvcHRzLmV4cGFuZEN1ZVRleHQgKTtcclxuXHRcdFx0fVxyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0aWYgKCBvcHRzLmNvbGxhcHNlQ3VlVGV4dCAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRcdHN0YXR1cy50ZXh0KCBvcHRzLmNvbGxhcHNlQ3VlVGV4dCApO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gVXBkYXRlIGljb25cclxuXHJcblx0XHQvLyBJcyBpdCBzdXBwb3NlZCB0byBoYXZlIGFuIGljb24/XHJcblx0XHRoYXNJY29uID1cclxuXHJcblx0XHRcdC8vIElmIHRoZSBjb2xsYXBzZWRJY29uIGlzIGJlaW5nIHNldCwgY29uc3VsdCB0aGF0XHJcblx0XHRcdCggb3B0cy5jb2xsYXBzZWRJY29uICE9PSB1bmRlZmluZWQgPyBvcHRzLmNvbGxhcHNlZEljb24gIT09IGZhbHNlIDpcclxuXHJcblx0XHRcdFx0Ly8gT3RoZXJ3aXNlIGNvbnN1bHQgdGhlIGV4aXN0aW5nIG9wdGlvbiB2YWx1ZVxyXG5cdFx0XHRcdGN1cnJlbnRPcHRzLmNvbGxhcHNlZEljb24gIT09IGZhbHNlICk7XHJcblxyXG5cclxuXHRcdC8vIElmIGFueSBpY29uLXJlbGF0ZWQgb3B0aW9ucyBoYXZlIGNoYW5nZWQsIG1ha2Ugc3VyZSB0aGUgbmV3IGljb25cclxuXHRcdC8vIHN0YXRlIGlzIHJlZmxlY3RlZCBieSBmaXJzdCByZW1vdmluZyBhbGwgaWNvbi1yZWxhdGVkIGNsYXNzZXNcclxuXHRcdC8vIHJlZmxlY3RpbmcgdGhlIGN1cnJlbnQgc3RhdGUgYW5kIHRoZW4gYWRkaW5nIGFsbCBpY29uLXJlbGF0ZWRcclxuXHRcdC8vIGNsYXNzZXMgZm9yIHRoZSBuZXcgc3RhdGVcclxuXHRcdGlmICggISggb3B0cy5pY29ucG9zID09PSB1bmRlZmluZWQgJiZcclxuXHRcdFx0b3B0cy5jb2xsYXBzZWRJY29uID09PSB1bmRlZmluZWQgJiZcclxuXHRcdFx0b3B0cy5leHBhbmRlZEljb24gPT09IHVuZGVmaW5lZCApICkge1xyXG5cclxuXHRcdFx0Ly8gUmVtb3ZlIGFsbCBjdXJyZW50IGljb24tcmVsYXRlZCBjbGFzc2VzXHJcblx0XHRcdGFuY2hvci5yZW1vdmVDbGFzcyggWyBpY29ucG9zQ2xhc3MoIGN1cnJlbnRPcHRzLmljb25wb3MgKSBdXHJcblx0XHRcdFx0LmNvbmNhdCggKCBjdXJyZW50T3B0cy5leHBhbmRlZEljb24gP1xyXG5cdFx0XHRcdFx0WyBcInVpLWljb24tXCIgKyBjdXJyZW50T3B0cy5leHBhbmRlZEljb24gXSA6IFtdICkgKVxyXG5cdFx0XHRcdC5jb25jYXQoICggY3VycmVudE9wdHMuY29sbGFwc2VkSWNvbiA/XHJcblx0XHRcdFx0XHRbIFwidWktaWNvbi1cIiArIGN1cnJlbnRPcHRzLmNvbGxhcHNlZEljb24gXSA6IFtdICkgKVxyXG5cdFx0XHRcdC5qb2luKCBcIiBcIiApICk7XHJcblxyXG5cdFx0XHQvLyBBZGQgbmV3IGNsYXNzZXMgaWYgYW4gaWNvbiBpcyBzdXBwb3NlZCB0byBiZSBwcmVzZW50XHJcblx0XHRcdGlmICggaGFzSWNvbiApIHtcclxuXHRcdFx0XHRhbmNob3IuYWRkQ2xhc3MoXHJcblx0XHRcdFx0XHRbIGljb25wb3NDbGFzcyggb3B0cy5pY29ucG9zICE9PSB1bmRlZmluZWQgP1xyXG5cdFx0XHRcdFx0XHRvcHRzLmljb25wb3MgOiBjdXJyZW50T3B0cy5pY29ucG9zICkgXVxyXG5cdFx0XHRcdFx0XHQuY29uY2F0KCBpc0NvbGxhcHNlZCA/XHJcblx0XHRcdFx0XHRcdFx0WyBcInVpLWljb24tXCIgKyAoIG9wdHMuY29sbGFwc2VkSWNvbiAhPT0gdW5kZWZpbmVkID9cclxuXHRcdFx0XHRcdFx0XHRcdG9wdHMuY29sbGFwc2VkSWNvbiA6XHJcblx0XHRcdFx0XHRcdFx0XHRjdXJyZW50T3B0cy5jb2xsYXBzZWRJY29uICkgXSA6XHJcblx0XHRcdFx0XHRcdFx0WyBcInVpLWljb24tXCIgKyAoIG9wdHMuZXhwYW5kZWRJY29uICE9PSB1bmRlZmluZWQgP1xyXG5cdFx0XHRcdFx0XHRcdFx0b3B0cy5leHBhbmRlZEljb24gOlxyXG5cdFx0XHRcdFx0XHRcdFx0Y3VycmVudE9wdHMuZXhwYW5kZWRJY29uICkgXSApXHJcblx0XHRcdFx0XHRcdC5qb2luKCBcIiBcIiApICk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG9wdHMudGhlbWUgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0b2xkVGhlbWUgPSB0aGlzLl90aGVtZUNsYXNzRnJvbU9wdGlvbiggXCJ1aS1idG4tXCIsIGN1cnJlbnRPcHRzLnRoZW1lICk7XHJcblx0XHRcdG5ld1RoZW1lID0gdGhpcy5fdGhlbWVDbGFzc0Zyb21PcHRpb24oIFwidWktYnRuLVwiLCBvcHRzLnRoZW1lICk7XHJcblx0XHRcdGFuY2hvci5yZW1vdmVDbGFzcyggb2xkVGhlbWUgKS5hZGRDbGFzcyggbmV3VGhlbWUgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG9wdHMuY29udGVudFRoZW1lICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdG9sZFRoZW1lID0gdGhpcy5fdGhlbWVDbGFzc0Zyb21PcHRpb24oIFwidWktYm9keS1cIixcclxuXHRcdFx0XHRjdXJyZW50T3B0cy5jb250ZW50VGhlbWUgKTtcclxuXHRcdFx0bmV3VGhlbWUgPSB0aGlzLl90aGVtZUNsYXNzRnJvbU9wdGlvbiggXCJ1aS1ib2R5LVwiLFxyXG5cdFx0XHRcdG9wdHMuY29udGVudFRoZW1lICk7XHJcblx0XHRcdHVpLmNvbnRlbnQucmVtb3ZlQ2xhc3MoIG9sZFRoZW1lICkuYWRkQ2xhc3MoIG5ld1RoZW1lICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBvcHRzLmluc2V0ICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdGVsZW0udG9nZ2xlQ2xhc3MoIFwidWktY29sbGFwc2libGUtaW5zZXRcIiwgb3B0cy5pbnNldCApO1xyXG5cdFx0XHRoYXNDb3JuZXJzID0gISEoIG9wdHMuaW5zZXQgJiYgKCBvcHRzLmNvcm5lcnMgfHwgY3VycmVudE9wdHMuY29ybmVycyApICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBvcHRzLmNvcm5lcnMgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0aGFzQ29ybmVycyA9ICEhKCBvcHRzLmNvcm5lcnMgJiYgKCBvcHRzLmluc2V0IHx8IGN1cnJlbnRPcHRzLmluc2V0ICkgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIGhhc0Nvcm5lcnMgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0ZWxlbS50b2dnbGVDbGFzcyggXCJ1aS1jb3JuZXItYWxsXCIsIGhhc0Nvcm5lcnMgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG9wdHMubWluaSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRhbmNob3IudG9nZ2xlQ2xhc3MoIFwidWktbWluaVwiLCBvcHRzLm1pbmkgKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfc2V0T3B0aW9uczogZnVuY3Rpb24oIG9wdGlvbnMgKSB7XHJcblx0XHR0aGlzLl9hcHBseU9wdGlvbnMoIG9wdGlvbnMgKTtcclxuXHRcdHRoaXMuX3N1cGVyKCBvcHRpb25zICk7XHJcblx0XHR0aGlzLl9yZW5kZXJlZE9wdGlvbnMgPSB0aGlzLl9nZXRPcHRpb25zKCB0aGlzLm9wdGlvbnMgKTtcclxuXHR9LFxyXG5cclxuXHRfaGFuZGxlRXhwYW5kQ29sbGFwc2U6IGZ1bmN0aW9uKCBpc0NvbGxhcHNlICkge1xyXG5cdFx0dmFyIG9wdHMgPSB0aGlzLl9yZW5kZXJlZE9wdGlvbnMsXHJcblx0XHRcdHVpID0gdGhpcy5fdWk7XHJcblxyXG5cdFx0dWkuc3RhdHVzLnRleHQoIGlzQ29sbGFwc2UgPyBvcHRzLmV4cGFuZEN1ZVRleHQgOiBvcHRzLmNvbGxhcHNlQ3VlVGV4dCApO1xyXG5cdFx0dWkuaGVhZGluZ1xyXG5cdFx0XHQudG9nZ2xlQ2xhc3MoIFwidWktY29sbGFwc2libGUtaGVhZGluZy1jb2xsYXBzZWRcIiwgaXNDb2xsYXBzZSApXHJcblx0XHRcdC5maW5kKCBcImFcIiApLmZpcnN0KClcclxuXHRcdFx0LnRvZ2dsZUNsYXNzKCBcInVpLWljb24tXCIgKyBvcHRzLmV4cGFuZGVkSWNvbiwgIWlzQ29sbGFwc2UgKVxyXG5cclxuXHRcdFx0Ly8gbG9naWMgb3IgY2F1c2Ugc2FtZSBpY29uIGZvciBleHBhbmRlZC9jb2xsYXBzZWQgc3RhdGUgd291bGQgcmVtb3ZlIHRoZSB1aS1pY29uLWNsYXNzXHJcblx0XHRcdC50b2dnbGVDbGFzcyggXCJ1aS1pY29uLVwiICsgb3B0cy5jb2xsYXBzZWRJY29uLCAoIGlzQ29sbGFwc2UgfHwgb3B0cy5leHBhbmRlZEljb24gPT09IG9wdHMuY29sbGFwc2VkSWNvbiApIClcclxuXHRcdFx0LnJlbW92ZUNsYXNzKCAkLm1vYmlsZS5hY3RpdmVCdG5DbGFzcyApO1xyXG5cclxuXHRcdHRoaXMuZWxlbWVudC50b2dnbGVDbGFzcyggXCJ1aS1jb2xsYXBzaWJsZS1jb2xsYXBzZWRcIiwgaXNDb2xsYXBzZSApO1xyXG5cdFx0dWkuY29udGVudFxyXG5cdFx0XHQudG9nZ2xlQ2xhc3MoIFwidWktY29sbGFwc2libGUtY29udGVudC1jb2xsYXBzZWRcIiwgaXNDb2xsYXBzZSApXHJcblx0XHRcdC5hdHRyKCBcImFyaWEtaGlkZGVuXCIsIGlzQ29sbGFwc2UgKVxyXG5cdFx0XHQudHJpZ2dlciggXCJ1cGRhdGVsYXlvdXRcIiApO1xyXG5cdFx0dGhpcy5vcHRpb25zLmNvbGxhcHNlZCA9IGlzQ29sbGFwc2U7XHJcblx0XHR0aGlzLl90cmlnZ2VyKCBpc0NvbGxhcHNlID8gXCJjb2xsYXBzZVwiIDogXCJleHBhbmRcIiApO1xyXG5cdH0sXHJcblxyXG5cdGV4cGFuZDogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9oYW5kbGVFeHBhbmRDb2xsYXBzZSggZmFsc2UgKTtcclxuXHR9LFxyXG5cclxuXHRjb2xsYXBzZTogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9oYW5kbGVFeHBhbmRDb2xsYXBzZSggdHJ1ZSApO1xyXG5cdH0sXHJcblxyXG5cdF9kZXN0cm95OiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciB1aSA9IHRoaXMuX3VpLFxyXG5cdFx0XHRvcHRzID0gdGhpcy5vcHRpb25zO1xyXG5cclxuXHRcdGlmICggb3B0cy5lbmhhbmNlZCApIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggdWkucGxhY2Vob2xkZXIgKSB7XHJcblx0XHRcdHVpLm9yaWdpbmFsSGVhZGluZy5pbnNlcnRCZWZvcmUoIHVpLnBsYWNlaG9sZGVyICk7XHJcblx0XHRcdHVpLnBsYWNlaG9sZGVyLnJlbW92ZSgpO1xyXG5cdFx0XHR1aS5oZWFkaW5nLnJlbW92ZSgpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dWkuc3RhdHVzLnJlbW92ZSgpO1xyXG5cdFx0XHR1aS5oZWFkaW5nXHJcblx0XHRcdFx0LnJlbW92ZUNsYXNzKCBcInVpLWNvbGxhcHNpYmxlLWhlYWRpbmcgdWktY29sbGFwc2libGUtaGVhZGluZy1jb2xsYXBzZWRcIiApXHJcblx0XHRcdFx0LmNoaWxkcmVuKClcclxuXHRcdFx0XHRcdC5jb250ZW50cygpXHJcblx0XHRcdFx0XHRcdC51bndyYXAoKTtcclxuXHRcdH1cclxuXHJcblx0XHR1aS5hbmNob3IuY29udGVudHMoKS51bndyYXAoKTtcclxuXHRcdHVpLmNvbnRlbnQuY29udGVudHMoKS51bndyYXAoKTtcclxuXHRcdHRoaXMuZWxlbWVudFxyXG5cdFx0XHQucmVtb3ZlQ2xhc3MoIFwidWktY29sbGFwc2libGUgdWktY29sbGFwc2libGUtY29sbGFwc2VkIFwiICtcclxuXHRcdFx0XHRcInVpLWNvbGxhcHNpYmxlLXRoZW1lZC1jb250ZW50IHVpLWNvbGxhcHNpYmxlLWluc2V0IHVpLWNvcm5lci1hbGxcIiApO1xyXG5cdH1cclxufSk7XHJcblxyXG4vLyBEZWZhdWx0cyB0byBiZSB1c2VkIGJ5IGFsbCBpbnN0YW5jZXMgb2YgY29sbGFwc2libGUgaWYgcGVyLWluc3RhbmNlIHZhbHVlc1xyXG4vLyBhcmUgdW5zZXQgb3IgaWYgbm90aGluZyBpcyBzcGVjaWZpZWQgYnkgd2F5IG9mIGluaGVyaXRhbmNlIGZyb20gYW4gYWNjb3JkaW9uLlxyXG4vLyBOb3RlIHRoYXQgdGhpcyBoYXNoIGRvZXMgbm90IGNvbnRhaW4gb3B0aW9ucyBcImNvbGxhcHNlZFwiIG9yIFwiaGVhZGluZ1wiLFxyXG4vLyBiZWNhdXNlIHRob3NlIGFyZSBub3QgaW5oZXJpdGFibGUuXHJcbiQubW9iaWxlLmNvbGxhcHNpYmxlLmRlZmF1bHRzID0ge1xyXG5cdGV4cGFuZEN1ZVRleHQ6IFwiIGNsaWNrIHRvIGV4cGFuZCBjb250ZW50c1wiLFxyXG5cdGNvbGxhcHNlQ3VlVGV4dDogXCIgY2xpY2sgdG8gY29sbGFwc2UgY29udGVudHNcIixcclxuXHRjb2xsYXBzZWRJY29uOiBcInBsdXNcIixcclxuXHRjb250ZW50VGhlbWU6IFwiaW5oZXJpdFwiLFxyXG5cdGV4cGFuZGVkSWNvbjogXCJtaW51c1wiLFxyXG5cdGljb25wb3M6IFwibGVmdFwiLFxyXG5cdGluc2V0OiB0cnVlLFxyXG5cdGNvcm5lcnM6IHRydWUsXHJcblx0dGhlbWU6IFwiaW5oZXJpdFwiLFxyXG5cdG1pbmk6IGZhbHNlXHJcbn07XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcbnZhciB1aVNjcmVlbkhpZGRlblJlZ2V4ID0gL1xcYnVpLXNjcmVlbi1oaWRkZW5cXGIvO1xyXG5mdW5jdGlvbiBub0hpZGRlbkNsYXNzKCBlbGVtZW50cyApIHtcclxuXHR2YXIgaW5kZXgsXHJcblx0XHRsZW5ndGggPSBlbGVtZW50cy5sZW5ndGgsXHJcblx0XHRyZXN1bHQgPSBbXTtcclxuXHJcblx0Zm9yICggaW5kZXggPSAwOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKyApIHtcclxuXHRcdGlmICggIWVsZW1lbnRzWyBpbmRleCBdLmNsYXNzTmFtZS5tYXRjaCggdWlTY3JlZW5IaWRkZW5SZWdleCApICkge1xyXG5cdFx0XHRyZXN1bHQucHVzaCggZWxlbWVudHNbIGluZGV4IF0gKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHJldHVybiAkKCByZXN1bHQgKTtcclxufVxyXG5cclxuJC5tb2JpbGUuYmVoYXZpb3JzLmFkZEZpcnN0TGFzdENsYXNzZXMgPSB7XHJcblx0X2dldFZpc2libGVzOiBmdW5jdGlvbiggJGVscywgY3JlYXRlICkge1xyXG5cdFx0dmFyIHZpc2libGVzO1xyXG5cclxuXHRcdGlmICggY3JlYXRlICkge1xyXG5cdFx0XHR2aXNpYmxlcyA9IG5vSGlkZGVuQ2xhc3MoICRlbHMgKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHZpc2libGVzID0gJGVscy5maWx0ZXIoIFwiOnZpc2libGVcIiApO1xyXG5cdFx0XHRpZiAoIHZpc2libGVzLmxlbmd0aCA9PT0gMCApIHtcclxuXHRcdFx0XHR2aXNpYmxlcyA9IG5vSGlkZGVuQ2xhc3MoICRlbHMgKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB2aXNpYmxlcztcclxuXHR9LFxyXG5cclxuXHRfYWRkRmlyc3RMYXN0Q2xhc3NlczogZnVuY3Rpb24oICRlbHMsICR2aXNpYmxlcywgY3JlYXRlICkge1xyXG5cdFx0JGVscy5yZW1vdmVDbGFzcyggXCJ1aS1maXJzdC1jaGlsZCB1aS1sYXN0LWNoaWxkXCIgKTtcclxuXHRcdCR2aXNpYmxlcy5lcSggMCApLmFkZENsYXNzKCBcInVpLWZpcnN0LWNoaWxkXCIgKS5lbmQoKS5sYXN0KCkuYWRkQ2xhc3MoIFwidWktbGFzdC1jaGlsZFwiICk7XHJcblx0XHRpZiAoICFjcmVhdGUgKSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudC50cmlnZ2VyKCBcInVwZGF0ZWxheW91dFwiICk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X3JlbW92ZUZpcnN0TGFzdENsYXNzZXM6IGZ1bmN0aW9uKCAkZWxzICkge1xyXG5cdFx0JGVscy5yZW1vdmVDbGFzcyggXCJ1aS1maXJzdC1jaGlsZCB1aS1sYXN0LWNoaWxkXCIgKTtcclxuXHR9XHJcbn07XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcbnZhciBjaGlsZENvbGxhcHNpYmxlc1NlbGVjdG9yID0gXCI6bW9iaWxlLWNvbGxhcHNpYmxlLCBcIiArICQubW9iaWxlLmNvbGxhcHNpYmxlLmluaXRTZWxlY3RvcjtcclxuXHJcbiQud2lkZ2V0KCBcIm1vYmlsZS5jb2xsYXBzaWJsZXNldFwiLCAkLmV4dGVuZCgge1xyXG5cclxuXHQvLyBUaGUgaW5pdFNlbGVjdG9yIGlzIGRlcHJlY2F0ZWQgYXMgb2YgMS40LjAuIEluIDEuNS4wIHdlIHdpbGwgdXNlXHJcblx0Ly8gOmpxbURhdGEocm9sZT0nY29sbGFwc2libGVzZXQnKSB3aGljaCB3aWxsIGFsbG93IHVzIHRvIGdldCByaWQgb2YgdGhlIGxpbmVcclxuXHQvLyBiZWxvdyBhbHRvZ2V0aGVyLCBiZWNhdXNlIHRoZSBhdXRvaW5pdCB3aWxsIGdlbmVyYXRlIHN1Y2ggYW4gaW5pdFNlbGVjdG9yXHJcblx0aW5pdFNlbGVjdG9yOiBcIjpqcW1EYXRhKHJvbGU9J2NvbGxhcHNpYmxlLXNldCcpLDpqcW1EYXRhKHJvbGU9J2NvbGxhcHNpYmxlc2V0JylcIixcclxuXHJcblx0b3B0aW9uczogJC5leHRlbmQoIHtcclxuXHRcdGVuaGFuY2VkOiBmYWxzZVxyXG5cdH0sICQubW9iaWxlLmNvbGxhcHNpYmxlLmRlZmF1bHRzICksXHJcblxyXG5cdF9oYW5kbGVDb2xsYXBzaWJsZUV4cGFuZDogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0dmFyIGNsb3Nlc3RDb2xsYXBzaWJsZSA9ICQoIGV2ZW50LnRhcmdldCApLmNsb3Nlc3QoIFwiLnVpLWNvbGxhcHNpYmxlXCIgKTtcclxuXHJcblx0XHRpZiAoIGNsb3Nlc3RDb2xsYXBzaWJsZS5wYXJlbnQoKS5pcyggXCI6bW9iaWxlLWNvbGxhcHNpYmxlc2V0LCA6anFtRGF0YShyb2xlPSdjb2xsYXBzaWJsZS1zZXQnKVwiICkgKSB7XHJcblx0XHRcdGNsb3Nlc3RDb2xsYXBzaWJsZVxyXG5cdFx0XHRcdC5zaWJsaW5ncyggXCIudWktY29sbGFwc2libGU6bm90KC51aS1jb2xsYXBzaWJsZS1jb2xsYXBzZWQpXCIgKVxyXG5cdFx0XHRcdC5jb2xsYXBzaWJsZSggXCJjb2xsYXBzZVwiICk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X2NyZWF0ZTogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgZWxlbSA9IHRoaXMuZWxlbWVudCxcclxuXHRcdFx0b3B0cyA9IHRoaXMub3B0aW9ucztcclxuXHJcblx0XHQkLmV4dGVuZCggdGhpcywge1xyXG5cdFx0XHRfY2xhc3NlczogXCJcIlxyXG5cdFx0fSk7XHJcblxyXG5cdFx0aWYgKCAhb3B0cy5lbmhhbmNlZCApIHtcclxuXHRcdFx0ZWxlbS5hZGRDbGFzcyggXCJ1aS1jb2xsYXBzaWJsZS1zZXQgXCIgK1xyXG5cdFx0XHRcdHRoaXMuX3RoZW1lQ2xhc3NGcm9tT3B0aW9uKCBcInVpLWdyb3VwLXRoZW1lLVwiLCBvcHRzLnRoZW1lICkgKyBcIiBcIiArXHJcblx0XHRcdFx0KCBvcHRzLmNvcm5lcnMgJiYgb3B0cy5pbnNldCA/IFwidWktY29ybmVyLWFsbCBcIiA6IFwiXCIgKSApO1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQuZmluZCggJC5tb2JpbGUuY29sbGFwc2libGUuaW5pdFNlbGVjdG9yICkuY29sbGFwc2libGUoKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl9vbiggZWxlbSwgeyBjb2xsYXBzaWJsZWV4cGFuZDogXCJfaGFuZGxlQ29sbGFwc2libGVFeHBhbmRcIiB9ICk7XHJcblx0fSxcclxuXHJcblx0X3RoZW1lQ2xhc3NGcm9tT3B0aW9uOiBmdW5jdGlvbiggcHJlZml4LCB2YWx1ZSApIHtcclxuXHRcdHJldHVybiAoIHZhbHVlID8gKCB2YWx1ZSA9PT0gXCJub25lXCIgPyBcIlwiIDogcHJlZml4ICsgdmFsdWUgKSA6IFwiXCIgKTtcclxuXHR9LFxyXG5cclxuXHRfaW5pdDogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9yZWZyZXNoKCB0cnVlICk7XHJcblxyXG5cdFx0Ly8gQmVjYXVzZSB0aGUgY29ybmVycyBhcmUgaGFuZGxlZCBieSB0aGUgY29sbGFwc2libGUgaXRzZWxmIGFuZCB0aGUgZGVmYXVsdCBzdGF0ZSBpcyBjb2xsYXBzZWRcclxuXHRcdC8vIFRoYXQgd2FzIGNhdXNpbmcgaHR0cHM6Ly9naXRodWIuY29tL2pxdWVyeS9qcXVlcnktbW9iaWxlL2lzc3Vlcy80MTE2XHJcblx0XHR0aGlzLmVsZW1lbnRcclxuXHRcdFx0LmNoaWxkcmVuKCBjaGlsZENvbGxhcHNpYmxlc1NlbGVjdG9yIClcclxuXHRcdFx0LmZpbHRlciggXCI6anFtRGF0YShjb2xsYXBzZWQ9J2ZhbHNlJylcIiApXHJcblx0XHRcdC5jb2xsYXBzaWJsZSggXCJleHBhbmRcIiApO1xyXG5cdH0sXHJcblxyXG5cdF9zZXRPcHRpb25zOiBmdW5jdGlvbiggb3B0aW9ucyApIHtcclxuXHRcdHZhciByZXQsIGhhc0Nvcm5lcnMsXHJcblx0XHRcdGVsZW0gPSB0aGlzLmVsZW1lbnQsXHJcblx0XHRcdHRoZW1lQ2xhc3MgPSB0aGlzLl90aGVtZUNsYXNzRnJvbU9wdGlvbiggXCJ1aS1ncm91cC10aGVtZS1cIiwgb3B0aW9ucy50aGVtZSApO1xyXG5cclxuXHRcdGlmICggdGhlbWVDbGFzcyApIHtcclxuXHRcdFx0ZWxlbVxyXG5cdFx0XHRcdC5yZW1vdmVDbGFzcyggdGhpcy5fdGhlbWVDbGFzc0Zyb21PcHRpb24oIFwidWktZ3JvdXAtdGhlbWUtXCIsIHRoaXMub3B0aW9ucy50aGVtZSApIClcclxuXHRcdFx0XHQuYWRkQ2xhc3MoIHRoZW1lQ2xhc3MgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG9wdGlvbnMuaW5zZXQgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0aGFzQ29ybmVycyA9ICEhKCBvcHRpb25zLmluc2V0ICYmICggb3B0aW9ucy5jb3JuZXJzIHx8IHRoaXMub3B0aW9ucy5jb3JuZXJzICkgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG9wdGlvbnMuY29ybmVycyAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRoYXNDb3JuZXJzID0gISEoIG9wdGlvbnMuY29ybmVycyAmJiAoIG9wdGlvbnMuaW5zZXQgfHwgdGhpcy5vcHRpb25zLmluc2V0ICkgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIGhhc0Nvcm5lcnMgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0ZWxlbS50b2dnbGVDbGFzcyggXCJ1aS1jb3JuZXItYWxsXCIsIGhhc0Nvcm5lcnMgKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXQgPSB0aGlzLl9zdXBlciggb3B0aW9ucyApO1xyXG5cdFx0dGhpcy5lbGVtZW50LmNoaWxkcmVuKCBcIjptb2JpbGUtY29sbGFwc2libGVcIiApLmNvbGxhcHNpYmxlKCBcInJlZnJlc2hcIiApO1xyXG5cdFx0cmV0dXJuIHJldDtcclxuXHR9LFxyXG5cclxuXHRfZGVzdHJveTogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgZWwgPSB0aGlzLmVsZW1lbnQ7XHJcblxyXG5cdFx0dGhpcy5fcmVtb3ZlRmlyc3RMYXN0Q2xhc3NlcyggZWwuY2hpbGRyZW4oIGNoaWxkQ29sbGFwc2libGVzU2VsZWN0b3IgKSApO1xyXG5cdFx0ZWxcclxuXHRcdFx0LnJlbW92ZUNsYXNzKCBcInVpLWNvbGxhcHNpYmxlLXNldCB1aS1jb3JuZXItYWxsIFwiICtcclxuXHRcdFx0XHR0aGlzLl90aGVtZUNsYXNzRnJvbU9wdGlvbiggXCJ1aS1ncm91cC10aGVtZS1cIiwgdGhpcy5vcHRpb25zLnRoZW1lICkgKVxyXG5cdFx0XHQuY2hpbGRyZW4oIFwiOm1vYmlsZS1jb2xsYXBzaWJsZVwiIClcclxuXHRcdFx0LmNvbGxhcHNpYmxlKCBcImRlc3Ryb3lcIiApO1xyXG5cdH0sXHJcblxyXG5cdF9yZWZyZXNoOiBmdW5jdGlvbiggY3JlYXRlICkge1xyXG5cdFx0dmFyIGNvbGxhcHNpYmxlc0luU2V0ID0gdGhpcy5lbGVtZW50LmNoaWxkcmVuKCBjaGlsZENvbGxhcHNpYmxlc1NlbGVjdG9yICk7XHJcblxyXG5cdFx0dGhpcy5lbGVtZW50LmZpbmQoICQubW9iaWxlLmNvbGxhcHNpYmxlLmluaXRTZWxlY3RvciApLm5vdCggXCIudWktY29sbGFwc2libGVcIiApLmNvbGxhcHNpYmxlKCk7XHJcblxyXG5cdFx0dGhpcy5fYWRkRmlyc3RMYXN0Q2xhc3NlcyggY29sbGFwc2libGVzSW5TZXQsIHRoaXMuX2dldFZpc2libGVzKCBjb2xsYXBzaWJsZXNJblNldCwgY3JlYXRlICksIGNyZWF0ZSApO1xyXG5cdH0sXHJcblxyXG5cdHJlZnJlc2g6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5fcmVmcmVzaCggZmFsc2UgKTtcclxuXHR9XHJcbn0sICQubW9iaWxlLmJlaGF2aW9ycy5hZGRGaXJzdExhc3RDbGFzc2VzICkgKTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxuLy8gRGVwcmVjYXRlZCBpbiAxLjRcclxuJC5mbi5maWVsZGNvbnRhaW4gPSBmdW5jdGlvbigvKiBvcHRpb25zICovKSB7XHJcblx0cmV0dXJuIHRoaXMuYWRkQ2xhc3MoIFwidWktZmllbGQtY29udGFpblwiICk7XHJcbn07XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcbiQuZm4uZ3JpZCA9IGZ1bmN0aW9uKCBvcHRpb25zICkge1xyXG5cdHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XHJcblxyXG5cdFx0dmFyICR0aGlzID0gJCggdGhpcyApLFxyXG5cdFx0XHRvID0gJC5leHRlbmQoe1xyXG5cdFx0XHRcdGdyaWQ6IG51bGxcclxuXHRcdFx0fSwgb3B0aW9ucyApLFxyXG5cdFx0XHQka2lkcyA9ICR0aGlzLmNoaWxkcmVuKCksXHJcblx0XHRcdGdyaWRDb2xzID0geyBzb2xvOjEsIGE6MiwgYjozLCBjOjQsIGQ6NSB9LFxyXG5cdFx0XHRncmlkID0gby5ncmlkLFxyXG5cdFx0XHRpdGVyYXRvcixcclxuXHRcdFx0bGV0dGVyO1xyXG5cclxuXHRcdFx0aWYgKCAhZ3JpZCApIHtcclxuXHRcdFx0XHRpZiAoICRraWRzLmxlbmd0aCA8PSA1ICkge1xyXG5cdFx0XHRcdFx0Zm9yICggbGV0dGVyIGluIGdyaWRDb2xzICkge1xyXG5cdFx0XHRcdFx0XHRpZiAoIGdyaWRDb2xzWyBsZXR0ZXIgXSA9PT0gJGtpZHMubGVuZ3RoICkge1xyXG5cdFx0XHRcdFx0XHRcdGdyaWQgPSBsZXR0ZXI7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0Z3JpZCA9IFwiYVwiO1xyXG5cdFx0XHRcdFx0JHRoaXMuYWRkQ2xhc3MoIFwidWktZ3JpZC1kdW9cIiApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRpdGVyYXRvciA9IGdyaWRDb2xzW2dyaWRdO1xyXG5cclxuXHRcdCR0aGlzLmFkZENsYXNzKCBcInVpLWdyaWQtXCIgKyBncmlkICk7XHJcblxyXG5cdFx0JGtpZHMuZmlsdGVyKCBcIjpudGgtY2hpbGQoXCIgKyBpdGVyYXRvciArIFwibisxKVwiICkuYWRkQ2xhc3MoIFwidWktYmxvY2stYVwiICk7XHJcblxyXG5cdFx0aWYgKCBpdGVyYXRvciA+IDEgKSB7XHJcblx0XHRcdCRraWRzLmZpbHRlciggXCI6bnRoLWNoaWxkKFwiICsgaXRlcmF0b3IgKyBcIm4rMilcIiApLmFkZENsYXNzKCBcInVpLWJsb2NrLWJcIiApO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCBpdGVyYXRvciA+IDIgKSB7XHJcblx0XHRcdCRraWRzLmZpbHRlciggXCI6bnRoLWNoaWxkKFwiICsgaXRlcmF0b3IgKyBcIm4rMylcIiApLmFkZENsYXNzKCBcInVpLWJsb2NrLWNcIiApO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCBpdGVyYXRvciA+IDMgKSB7XHJcblx0XHRcdCRraWRzLmZpbHRlciggXCI6bnRoLWNoaWxkKFwiICsgaXRlcmF0b3IgKyBcIm4rNClcIiApLmFkZENsYXNzKCBcInVpLWJsb2NrLWRcIiApO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCBpdGVyYXRvciA+IDQgKSB7XHJcblx0XHRcdCRraWRzLmZpbHRlciggXCI6bnRoLWNoaWxkKFwiICsgaXRlcmF0b3IgKyBcIm4rNSlcIiApLmFkZENsYXNzKCBcInVpLWJsb2NrLWVcIiApO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG59O1xyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcbiQud2lkZ2V0KCBcIm1vYmlsZS5uYXZiYXJcIiwge1xyXG5cdG9wdGlvbnM6IHtcclxuXHRcdGljb25wb3M6IFwidG9wXCIsXHJcblx0XHRncmlkOiBudWxsXHJcblx0fSxcclxuXHJcblx0X2NyZWF0ZTogZnVuY3Rpb24oKSB7XHJcblxyXG5cdFx0dmFyICRuYXZiYXIgPSB0aGlzLmVsZW1lbnQsXHJcblx0XHRcdCRuYXZidG5zID0gJG5hdmJhci5maW5kKCBcImEsIGJ1dHRvblwiICksXHJcblx0XHRcdGljb25wb3MgPSAkbmF2YnRucy5maWx0ZXIoIFwiOmpxbURhdGEoaWNvbilcIiApLmxlbmd0aCA/IHRoaXMub3B0aW9ucy5pY29ucG9zIDogdW5kZWZpbmVkO1xyXG5cclxuXHRcdCRuYXZiYXIuYWRkQ2xhc3MoIFwidWktbmF2YmFyXCIgKVxyXG5cdFx0XHQuYXR0ciggXCJyb2xlXCIsIFwibmF2aWdhdGlvblwiIClcclxuXHRcdFx0LmZpbmQoIFwidWxcIiApXHJcblx0XHRcdC5qcW1FbmhhbmNlYWJsZSgpXHJcblx0XHRcdC5ncmlkKHsgZ3JpZDogdGhpcy5vcHRpb25zLmdyaWQgfSk7XHJcblxyXG5cdFx0JG5hdmJ0bnNcclxuXHRcdFx0LmVhY2goIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHZhciBpY29uID0gJC5tb2JpbGUuZ2V0QXR0cmlidXRlKCB0aGlzLCBcImljb25cIiApLFxyXG5cdFx0XHRcdFx0dGhlbWUgPSAkLm1vYmlsZS5nZXRBdHRyaWJ1dGUoIHRoaXMsIFwidGhlbWVcIiApLFxyXG5cdFx0XHRcdFx0Y2xhc3NlcyA9IFwidWktYnRuXCI7XHJcblxyXG5cdFx0XHRcdGlmICggdGhlbWUgKSB7XHJcblx0XHRcdFx0XHRjbGFzc2VzICs9IFwiIHVpLWJ0bi1cIiArIHRoZW1lO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZiAoIGljb24gKSB7XHJcblx0XHRcdFx0XHRjbGFzc2VzICs9IFwiIHVpLWljb24tXCIgKyBpY29uICsgXCIgdWktYnRuLWljb24tXCIgKyBpY29ucG9zO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQkKCB0aGlzICkuYWRkQ2xhc3MoIGNsYXNzZXMgKTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0JG5hdmJhci5kZWxlZ2F0ZSggXCJhXCIsIFwidmNsaWNrXCIsIGZ1bmN0aW9uKCAvKiBldmVudCAqLyApIHtcclxuXHRcdFx0dmFyIGFjdGl2ZUJ0biA9ICQoIHRoaXMgKTtcclxuXHJcblx0XHRcdGlmICggISggYWN0aXZlQnRuLmhhc0NsYXNzKCBcInVpLXN0YXRlLWRpc2FibGVkXCIgKSB8fFxyXG5cclxuXHRcdFx0XHQvLyBERVBSRUNBVEVEIGFzIG9mIDEuNC4wIC0gcmVtb3ZlIGFmdGVyIDEuNC4wIHJlbGVhc2VcclxuXHRcdFx0XHQvLyBvbmx5IHVpLXN0YXRlLWRpc2FibGVkIHNob3VsZCBiZSBwcmVzZW50IHRoZXJlYWZ0ZXJcclxuXHRcdFx0XHRhY3RpdmVCdG4uaGFzQ2xhc3MoIFwidWktZGlzYWJsZWRcIiApIHx8XHJcblx0XHRcdFx0YWN0aXZlQnRuLmhhc0NsYXNzKCAkLm1vYmlsZS5hY3RpdmVCdG5DbGFzcyApICkgKSB7XHJcblxyXG5cdFx0XHRcdCRuYXZidG5zLnJlbW92ZUNsYXNzKCAkLm1vYmlsZS5hY3RpdmVCdG5DbGFzcyApO1xyXG5cdFx0XHRcdGFjdGl2ZUJ0bi5hZGRDbGFzcyggJC5tb2JpbGUuYWN0aXZlQnRuQ2xhc3MgKTtcclxuXHJcblx0XHRcdFx0Ly8gVGhlIGNvZGUgYmVsb3cgaXMgYSB3b3JrYXJvdW5kIHRvIGZpeCAjMTE4MVxyXG5cdFx0XHRcdCQoIGRvY3VtZW50ICkub25lKCBcInBhZ2VoaWRlXCIsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0YWN0aXZlQnRuLnJlbW92ZUNsYXNzKCAkLm1vYmlsZS5hY3RpdmVCdG5DbGFzcyApO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBCdXR0b25zIGluIHRoZSBuYXZiYXIgd2l0aCB1aS1zdGF0ZS1wZXJzaXN0IGNsYXNzIHNob3VsZCByZWdhaW4gdGhlaXIgYWN0aXZlIHN0YXRlIGJlZm9yZSBwYWdlIHNob3dcclxuXHRcdCRuYXZiYXIuY2xvc2VzdCggXCIudWktcGFnZVwiICkuYmluZCggXCJwYWdlYmVmb3Jlc2hvd1wiLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0JG5hdmJ0bnMuZmlsdGVyKCBcIi51aS1zdGF0ZS1wZXJzaXN0XCIgKS5hZGRDbGFzcyggJC5tb2JpbGUuYWN0aXZlQnRuQ2xhc3MgKTtcclxuXHRcdH0pO1xyXG5cdH1cclxufSk7XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcbnZhciBnZXRBdHRyID0gJC5tb2JpbGUuZ2V0QXR0cmlidXRlO1xyXG5cclxuJC53aWRnZXQoIFwibW9iaWxlLmxpc3R2aWV3XCIsICQuZXh0ZW5kKCB7XHJcblxyXG5cdG9wdGlvbnM6IHtcclxuXHRcdHRoZW1lOiBudWxsLFxyXG5cdFx0Y291bnRUaGVtZTogbnVsbCwgLyogRGVwcmVjYXRlZCBpbiAxLjQgKi9cclxuXHRcdGRpdmlkZXJUaGVtZTogbnVsbCxcclxuXHRcdGljb246IFwiY2FyYXQtclwiLFxyXG5cdFx0c3BsaXRJY29uOiBcImNhcmF0LXJcIixcclxuXHRcdHNwbGl0VGhlbWU6IG51bGwsXHJcblx0XHRjb3JuZXJzOiB0cnVlLFxyXG5cdFx0c2hhZG93OiB0cnVlLFxyXG5cdFx0aW5zZXQ6IGZhbHNlXHJcblx0fSxcclxuXHJcblx0X2NyZWF0ZTogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgdCA9IHRoaXMsXHJcblx0XHRcdGxpc3R2aWV3Q2xhc3NlcyA9IFwiXCI7XHJcblxyXG5cdFx0bGlzdHZpZXdDbGFzc2VzICs9IHQub3B0aW9ucy5pbnNldCA/IFwiIHVpLWxpc3R2aWV3LWluc2V0XCIgOiBcIlwiO1xyXG5cclxuXHRcdGlmICggISF0Lm9wdGlvbnMuaW5zZXQgKSB7XHJcblx0XHRcdGxpc3R2aWV3Q2xhc3NlcyArPSB0Lm9wdGlvbnMuY29ybmVycyA/IFwiIHVpLWNvcm5lci1hbGxcIiA6IFwiXCI7XHJcblx0XHRcdGxpc3R2aWV3Q2xhc3NlcyArPSB0Lm9wdGlvbnMuc2hhZG93ID8gXCIgdWktc2hhZG93XCIgOiBcIlwiO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIGNyZWF0ZSBsaXN0dmlldyBtYXJrdXBcclxuXHRcdHQuZWxlbWVudC5hZGRDbGFzcyggXCIgdWktbGlzdHZpZXdcIiArIGxpc3R2aWV3Q2xhc3NlcyApO1xyXG5cclxuXHRcdHQucmVmcmVzaCggdHJ1ZSApO1xyXG5cdH0sXHJcblxyXG5cdC8vIFRPRE86IFJlbW92ZSBpbiAxLjVcclxuXHRfZmluZEZpcnN0RWxlbWVudEJ5VGFnTmFtZTogZnVuY3Rpb24oIGVsZSwgbmV4dFByb3AsIGxjTmFtZSwgdWNOYW1lICkge1xyXG5cdFx0dmFyIGRpY3QgPSB7fTtcclxuXHRcdGRpY3RbIGxjTmFtZSBdID0gZGljdFsgdWNOYW1lIF0gPSB0cnVlO1xyXG5cdFx0d2hpbGUgKCBlbGUgKSB7XHJcblx0XHRcdGlmICggZGljdFsgZWxlLm5vZGVOYW1lIF0gKSB7XHJcblx0XHRcdFx0cmV0dXJuIGVsZTtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbGUgPSBlbGVbIG5leHRQcm9wIF07XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gbnVsbDtcclxuXHR9LFxyXG5cdC8vIFRPRE86IFJlbW92ZSBpbiAxLjVcclxuXHRfYWRkVGh1bWJDbGFzc2VzOiBmdW5jdGlvbiggY29udGFpbmVycyApIHtcclxuXHRcdHZhciBpLCBpbWcsIGxlbiA9IGNvbnRhaW5lcnMubGVuZ3RoO1xyXG5cdFx0Zm9yICggaSA9IDA7IGkgPCBsZW47IGkrKyApIHtcclxuXHRcdFx0aW1nID0gJCggdGhpcy5fZmluZEZpcnN0RWxlbWVudEJ5VGFnTmFtZSggY29udGFpbmVyc1sgaSBdLmZpcnN0Q2hpbGQsIFwibmV4dFNpYmxpbmdcIiwgXCJpbWdcIiwgXCJJTUdcIiApICk7XHJcblx0XHRcdGlmICggaW1nLmxlbmd0aCApIHtcclxuXHRcdFx0XHQkKCB0aGlzLl9maW5kRmlyc3RFbGVtZW50QnlUYWdOYW1lKCBpbWdbIDAgXS5wYXJlbnROb2RlLCBcInBhcmVudE5vZGVcIiwgXCJsaVwiLCBcIkxJXCIgKSApLmFkZENsYXNzKCBpbWcuaGFzQ2xhc3MoIFwidWktbGktaWNvblwiICkgPyBcInVpLWxpLWhhcy1pY29uXCIgOiBcInVpLWxpLWhhcy10aHVtYlwiICk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfZ2V0Q2hpbGRyZW5CeVRhZ05hbWU6IGZ1bmN0aW9uKCBlbGUsIGxjTmFtZSwgdWNOYW1lICkge1xyXG5cdFx0dmFyIHJlc3VsdHMgPSBbXSxcclxuXHRcdFx0ZGljdCA9IHt9O1xyXG5cdFx0ZGljdFsgbGNOYW1lIF0gPSBkaWN0WyB1Y05hbWUgXSA9IHRydWU7XHJcblx0XHRlbGUgPSBlbGUuZmlyc3RDaGlsZDtcclxuXHRcdHdoaWxlICggZWxlICkge1xyXG5cdFx0XHRpZiAoIGRpY3RbIGVsZS5ub2RlTmFtZSBdICkge1xyXG5cdFx0XHRcdHJlc3VsdHMucHVzaCggZWxlICk7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxlID0gZWxlLm5leHRTaWJsaW5nO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuICQoIHJlc3VsdHMgKTtcclxuXHR9LFxyXG5cclxuXHRfYmVmb3JlTGlzdHZpZXdSZWZyZXNoOiAkLm5vb3AsXHJcblx0X2FmdGVyTGlzdHZpZXdSZWZyZXNoOiAkLm5vb3AsXHJcblxyXG5cdHJlZnJlc2g6IGZ1bmN0aW9uKCBjcmVhdGUgKSB7XHJcblx0XHR2YXIgYnV0dG9uQ2xhc3MsIHBvcywgbnVtbGksIGl0ZW0sIGl0ZW1DbGFzcywgaXRlbVRoZW1lLCBpdGVtSWNvbiwgaWNvbiwgYSxcclxuXHRcdFx0aXNEaXZpZGVyLCBzdGFydENvdW50LCBuZXdTdGFydENvdW50LCB2YWx1ZSwgbGFzdCwgc3BsaXR0aGVtZSwgc3BsaXRUaGVtZUNsYXNzLCBzcGxpdGljb24sXHJcblx0XHRcdGFsdEJ1dHRvbkNsYXNzLCBkaXZpZGVyVGhlbWUsIGxpLFxyXG5cdFx0XHRvID0gdGhpcy5vcHRpb25zLFxyXG5cdFx0XHQkbGlzdCA9IHRoaXMuZWxlbWVudCxcclxuXHRcdFx0b2wgPSAhISQubm9kZU5hbWUoICRsaXN0WyAwIF0sIFwib2xcIiApLFxyXG5cdFx0XHRzdGFydCA9ICRsaXN0LmF0dHIoIFwic3RhcnRcIiApLFxyXG5cdFx0XHRpdGVtQ2xhc3NEaWN0ID0ge30sXHJcblx0XHRcdGNvdW50QnViYmxlcyA9ICRsaXN0LmZpbmQoIFwiLnVpLWxpLWNvdW50XCIgKSxcclxuXHRcdFx0Y291bnRUaGVtZSA9IGdldEF0dHIoICRsaXN0WyAwIF0sIFwiY291bnR0aGVtZVwiICkgfHwgdGhpcy5vcHRpb25zLmNvdW50VGhlbWUsXHJcblx0XHRcdGNvdW50VGhlbWVDbGFzcyA9IGNvdW50VGhlbWUgPyBcInVpLWJvZHktXCIgKyBjb3VudFRoZW1lIDogXCJ1aS1ib2R5LWluaGVyaXRcIjtcclxuXHJcblx0XHRpZiAoIG8udGhlbWUgKSB7XHJcblx0XHRcdCRsaXN0LmFkZENsYXNzKCBcInVpLWdyb3VwLXRoZW1lLVwiICsgby50aGVtZSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIENoZWNrIGlmIGEgc3RhcnQgYXR0cmlidXRlIGhhcyBiZWVuIHNldCB3aGlsZSB0YWtpbmcgYSB2YWx1ZSBvZiAwIGludG8gYWNjb3VudFxyXG5cdFx0aWYgKCBvbCAmJiAoIHN0YXJ0IHx8IHN0YXJ0ID09PSAwICkgKSB7XHJcblx0XHRcdHN0YXJ0Q291bnQgPSBwYXJzZUludCggc3RhcnQsIDEwICkgLSAxO1xyXG5cdFx0XHQkbGlzdC5jc3MoIFwiY291bnRlci1yZXNldFwiLCBcImxpc3RudW1iZXJpbmcgXCIgKyBzdGFydENvdW50ICk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5fYmVmb3JlTGlzdHZpZXdSZWZyZXNoKCk7XHJcblxyXG5cdFx0bGkgPSB0aGlzLl9nZXRDaGlsZHJlbkJ5VGFnTmFtZSggJGxpc3RbIDAgXSwgXCJsaVwiLCBcIkxJXCIgKTtcclxuXHJcblx0XHRmb3IgKCBwb3MgPSAwLCBudW1saSA9IGxpLmxlbmd0aDsgcG9zIDwgbnVtbGk7IHBvcysrICkge1xyXG5cdFx0XHRpdGVtID0gbGkuZXEoIHBvcyApO1xyXG5cdFx0XHRpdGVtQ2xhc3MgPSBcIlwiO1xyXG5cclxuXHRcdFx0aWYgKCBjcmVhdGUgfHwgaXRlbVsgMCBdLmNsYXNzTmFtZS5zZWFyY2goIC9cXGJ1aS1saS1zdGF0aWNcXGJ8XFxidWktbGktZGl2aWRlclxcYi8gKSA8IDAgKSB7XHJcblx0XHRcdFx0YSA9IHRoaXMuX2dldENoaWxkcmVuQnlUYWdOYW1lKCBpdGVtWyAwIF0sIFwiYVwiLCBcIkFcIiApO1xyXG5cdFx0XHRcdGlzRGl2aWRlciA9ICggZ2V0QXR0ciggaXRlbVsgMCBdLCBcInJvbGVcIiApID09PSBcImxpc3QtZGl2aWRlclwiICk7XHJcblx0XHRcdFx0dmFsdWUgPSBpdGVtLmF0dHIoIFwidmFsdWVcIiApO1xyXG5cdFx0XHRcdGl0ZW1UaGVtZSA9IGdldEF0dHIoIGl0ZW1bIDAgXSwgXCJ0aGVtZVwiICk7XHJcblxyXG5cdFx0XHRcdGlmICggYS5sZW5ndGggJiYgYVsgMCBdLmNsYXNzTmFtZS5zZWFyY2goIC9cXGJ1aS1idG5cXGIvICkgPCAwICYmICFpc0RpdmlkZXIgKSB7XHJcblx0XHRcdFx0XHRpdGVtSWNvbiA9IGdldEF0dHIoIGl0ZW1bIDAgXSwgXCJpY29uXCIgKTtcclxuXHRcdFx0XHRcdGljb24gPSAoIGl0ZW1JY29uID09PSBmYWxzZSApID8gZmFsc2UgOiAoIGl0ZW1JY29uIHx8IG8uaWNvbiApO1xyXG5cclxuXHRcdFx0XHRcdC8vIFRPRE86IFJlbW92ZSBpbiAxLjUgdG9nZXRoZXIgd2l0aCBsaW5rcy5qcyAobGlua3MuanMgLyAudWktbGluayBkZXByZWNhdGVkIGluIDEuNClcclxuXHRcdFx0XHRcdGEucmVtb3ZlQ2xhc3MoIFwidWktbGlua1wiICk7XHJcblxyXG5cdFx0XHRcdFx0YnV0dG9uQ2xhc3MgPSBcInVpLWJ0blwiO1xyXG5cclxuXHRcdFx0XHRcdGlmICggaXRlbVRoZW1lICkge1xyXG5cdFx0XHRcdFx0XHRidXR0b25DbGFzcyArPSBcIiB1aS1idG4tXCIgKyBpdGVtVGhlbWU7XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0aWYgKCBhLmxlbmd0aCA+IDEgKSB7XHJcblx0XHRcdFx0XHRcdGl0ZW1DbGFzcyA9IFwidWktbGktaGFzLWFsdFwiO1xyXG5cclxuXHRcdFx0XHRcdFx0bGFzdCA9IGEubGFzdCgpO1xyXG5cdFx0XHRcdFx0XHRzcGxpdHRoZW1lID0gZ2V0QXR0ciggbGFzdFsgMCBdLCBcInRoZW1lXCIgKSB8fCBvLnNwbGl0VGhlbWUgfHwgZ2V0QXR0ciggaXRlbVsgMCBdLCBcInRoZW1lXCIsIHRydWUgKTtcclxuXHRcdFx0XHRcdFx0c3BsaXRUaGVtZUNsYXNzID0gc3BsaXR0aGVtZSA/IFwiIHVpLWJ0bi1cIiArIHNwbGl0dGhlbWUgOiBcIlwiO1xyXG5cdFx0XHRcdFx0XHRzcGxpdGljb24gPSBnZXRBdHRyKCBsYXN0WyAwIF0sIFwiaWNvblwiICkgfHwgZ2V0QXR0ciggaXRlbVsgMCBdLCBcImljb25cIiApIHx8IG8uc3BsaXRJY29uO1xyXG5cdFx0XHRcdFx0XHRhbHRCdXR0b25DbGFzcyA9IFwidWktYnRuIHVpLWJ0bi1pY29uLW5vdGV4dCB1aS1pY29uLVwiICsgc3BsaXRpY29uICsgc3BsaXRUaGVtZUNsYXNzO1xyXG5cclxuXHRcdFx0XHRcdFx0bGFzdFxyXG5cdFx0XHRcdFx0XHRcdC5hdHRyKCBcInRpdGxlXCIsICQudHJpbSggbGFzdC5nZXRFbmNvZGVkVGV4dCgpICkgKVxyXG5cdFx0XHRcdFx0XHRcdC5hZGRDbGFzcyggYWx0QnV0dG9uQ2xhc3MgKVxyXG5cdFx0XHRcdFx0XHRcdC5lbXB0eSgpO1xyXG5cclxuXHRcdFx0XHRcdFx0Ly8gUmVkdWNlIHRvIHRoZSBmaXJzdCBhbmNob3IsIGJlY2F1c2Ugb25seSB0aGUgZmlyc3QgZ2V0cyB0aGUgYnV0dG9uQ2xhc3NcclxuXHRcdFx0XHRcdFx0YSA9IGEuZmlyc3QoKTtcclxuXHRcdFx0XHRcdH0gZWxzZSBpZiAoIGljb24gKSB7XHJcblx0XHRcdFx0XHRcdGJ1dHRvbkNsYXNzICs9IFwiIHVpLWJ0bi1pY29uLXJpZ2h0IHVpLWljb24tXCIgKyBpY29uO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdC8vIEFwcGx5IGJ1dHRvbkNsYXNzIHRvIHRoZSAoZmlyc3QpIGFuY2hvclxyXG5cdFx0XHRcdFx0YS5hZGRDbGFzcyggYnV0dG9uQ2xhc3MgKTtcclxuXHRcdFx0XHR9IGVsc2UgaWYgKCBpc0RpdmlkZXIgKSB7XHJcblx0XHRcdFx0XHRkaXZpZGVyVGhlbWUgPSAoIGdldEF0dHIoIGl0ZW1bIDAgXSwgXCJ0aGVtZVwiICkgfHwgby5kaXZpZGVyVGhlbWUgfHwgby50aGVtZSApO1xyXG5cclxuXHRcdFx0XHRcdGl0ZW1DbGFzcyA9IFwidWktbGktZGl2aWRlciB1aS1iYXItXCIgKyAoIGRpdmlkZXJUaGVtZSA/IGRpdmlkZXJUaGVtZSA6IFwiaW5oZXJpdFwiICk7XHJcblxyXG5cdFx0XHRcdFx0aXRlbS5hdHRyKCBcInJvbGVcIiwgXCJoZWFkaW5nXCIgKTtcclxuXHRcdFx0XHR9IGVsc2UgaWYgKCBhLmxlbmd0aCA8PSAwICkge1xyXG5cdFx0XHRcdFx0aXRlbUNsYXNzID0gXCJ1aS1saS1zdGF0aWMgdWktYm9keS1cIiArICggaXRlbVRoZW1lID8gaXRlbVRoZW1lIDogXCJpbmhlcml0XCIgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWYgKCBvbCAmJiB2YWx1ZSApIHtcclxuXHRcdFx0XHRcdG5ld1N0YXJ0Q291bnQgPSBwYXJzZUludCggdmFsdWUgLCAxMCApIC0gMTtcclxuXHJcblx0XHRcdFx0XHRpdGVtLmNzcyggXCJjb3VudGVyLXJlc2V0XCIsIFwibGlzdG51bWJlcmluZyBcIiArIG5ld1N0YXJ0Q291bnQgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIEluc3RlYWQgb2Ygc2V0dGluZyBpdGVtIGNsYXNzIGRpcmVjdGx5IG9uIHRoZSBsaXN0IGl0ZW1cclxuXHRcdFx0Ly8gYXQgdGhpcyBwb2ludCBpbiB0aW1lLCBwdXNoIHRoZSBpdGVtIGludG8gYSBkaWN0aW9uYXJ5XHJcblx0XHRcdC8vIHRoYXQgdGVsbHMgdXMgd2hhdCBjbGFzcyB0byBzZXQgb24gaXQgc28gd2UgY2FuIGRvIHRoaXMgYWZ0ZXIgdGhpc1xyXG5cdFx0XHQvLyBwcm9jZXNzaW5nIGxvb3AgaXMgZmluaXNoZWQuXHJcblxyXG5cdFx0XHRpZiAoICFpdGVtQ2xhc3NEaWN0WyBpdGVtQ2xhc3MgXSApIHtcclxuXHRcdFx0XHRpdGVtQ2xhc3NEaWN0WyBpdGVtQ2xhc3MgXSA9IFtdO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpdGVtQ2xhc3NEaWN0WyBpdGVtQ2xhc3MgXS5wdXNoKCBpdGVtWyAwIF0gKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBTZXQgdGhlIGFwcHJvcHJpYXRlIGxpc3R2aWV3IGl0ZW0gY2xhc3NlcyBvbiBlYWNoIGxpc3QgaXRlbS5cclxuXHRcdC8vIFRoZSBtYWluIHJlYXNvbiB3ZSBkaWRuJ3QgZG8gdGhpc1xyXG5cdFx0Ly8gaW4gdGhlIGZvci1sb29wIGFib3ZlIGlzIGJlY2F1c2Ugd2UgY2FuIGVsaW1pbmF0ZSBwZXItaXRlbSBmdW5jdGlvbiBvdmVyaGVhZFxyXG5cdFx0Ly8gYnkgY2FsbGluZyBhZGRDbGFzcygpIGFuZCBjaGlsZHJlbigpIG9uY2Ugb3IgdHdpY2UgYWZ0ZXJ3YXJkcy4gVGhpc1xyXG5cdFx0Ly8gY2FuIGdpdmUgdXMgYSBzaWduaWZpY2FudCBib29zdCBvbiBwbGF0Zm9ybXMgbGlrZSBXUDcuNS5cclxuXHJcblx0XHRmb3IgKCBpdGVtQ2xhc3MgaW4gaXRlbUNsYXNzRGljdCApIHtcclxuXHRcdFx0JCggaXRlbUNsYXNzRGljdFsgaXRlbUNsYXNzIF0gKS5hZGRDbGFzcyggaXRlbUNsYXNzICk7XHJcblx0XHR9XHJcblxyXG5cdFx0Y291bnRCdWJibGVzLmVhY2goIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHQkKCB0aGlzICkuY2xvc2VzdCggXCJsaVwiICkuYWRkQ2xhc3MoIFwidWktbGktaGFzLWNvdW50XCIgKTtcclxuXHRcdH0pO1xyXG5cdFx0aWYgKCBjb3VudFRoZW1lQ2xhc3MgKSB7XHJcblx0XHRcdGNvdW50QnViYmxlcy5ub3QoIFwiW2NsYXNzKj0ndWktYm9keS0nXVwiICkuYWRkQ2xhc3MoIGNvdW50VGhlbWVDbGFzcyApO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIERlcHJlY2F0ZWQgaW4gMS40LiBGcm9tIDEuNSB5b3UgaGF2ZSB0byBhZGQgY2xhc3MgdWktbGktaGFzLXRodW1iIG9yIHVpLWxpLWhhcy1pY29uIHRvIHRoZSBMSS5cclxuXHRcdHRoaXMuX2FkZFRodW1iQ2xhc3NlcyggbGkgKTtcclxuXHRcdHRoaXMuX2FkZFRodW1iQ2xhc3NlcyggbGkuZmluZCggXCIudWktYnRuXCIgKSApO1xyXG5cclxuXHRcdHRoaXMuX2FmdGVyTGlzdHZpZXdSZWZyZXNoKCk7XHJcblxyXG5cdFx0dGhpcy5fYWRkRmlyc3RMYXN0Q2xhc3NlcyggbGksIHRoaXMuX2dldFZpc2libGVzKCBsaSwgY3JlYXRlICksIGNyZWF0ZSApO1xyXG5cdH1cclxufSwgJC5tb2JpbGUuYmVoYXZpb3JzLmFkZEZpcnN0TGFzdENsYXNzZXMgKSApO1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG5mdW5jdGlvbiBkZWZhdWx0QXV0b2RpdmlkZXJzU2VsZWN0b3IoIGVsdCApIHtcclxuXHQvLyBsb29rIGZvciB0aGUgdGV4dCBpbiB0aGUgZ2l2ZW4gZWxlbWVudFxyXG5cdHZhciB0ZXh0ID0gJC50cmltKCBlbHQudGV4dCgpICkgfHwgbnVsbDtcclxuXHJcblx0aWYgKCAhdGV4dCApIHtcclxuXHRcdHJldHVybiBudWxsO1xyXG5cdH1cclxuXHJcblx0Ly8gY3JlYXRlIHRoZSB0ZXh0IGZvciB0aGUgZGl2aWRlciAoZmlyc3QgdXBwZXJjYXNlZCBsZXR0ZXIpXHJcblx0dGV4dCA9IHRleHQuc2xpY2UoIDAsIDEgKS50b1VwcGVyQ2FzZSgpO1xyXG5cclxuXHRyZXR1cm4gdGV4dDtcclxufVxyXG5cclxuJC53aWRnZXQoIFwibW9iaWxlLmxpc3R2aWV3XCIsICQubW9iaWxlLmxpc3R2aWV3LCB7XHJcblx0b3B0aW9uczoge1xyXG5cdFx0YXV0b2RpdmlkZXJzOiBmYWxzZSxcclxuXHRcdGF1dG9kaXZpZGVyc1NlbGVjdG9yOiBkZWZhdWx0QXV0b2RpdmlkZXJzU2VsZWN0b3JcclxuXHR9LFxyXG5cclxuXHRfYmVmb3JlTGlzdHZpZXdSZWZyZXNoOiBmdW5jdGlvbigpIHtcclxuXHRcdGlmICggdGhpcy5vcHRpb25zLmF1dG9kaXZpZGVycyApIHtcclxuXHRcdFx0dGhpcy5fcmVwbGFjZURpdmlkZXJzKCk7XHJcblx0XHRcdHRoaXMuX3N1cGVyQXBwbHkoIGFyZ3VtZW50cyApO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9yZXBsYWNlRGl2aWRlcnM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGksIGxpcywgbGksIGRpdmlkZXJUZXh0LFxyXG5cdFx0XHRsYXN0RGl2aWRlclRleHQgPSBudWxsLFxyXG5cdFx0XHRsaXN0ID0gdGhpcy5lbGVtZW50LFxyXG5cdFx0XHRkaXZpZGVyO1xyXG5cclxuXHRcdGxpc3QuY2hpbGRyZW4oIFwibGk6anFtRGF0YShyb2xlPSdsaXN0LWRpdmlkZXInKVwiICkucmVtb3ZlKCk7XHJcblxyXG5cdFx0bGlzID0gbGlzdC5jaGlsZHJlbiggXCJsaVwiICk7XHJcblxyXG5cdFx0Zm9yICggaSA9IDA7IGkgPCBsaXMubGVuZ3RoIDsgaSsrICkge1xyXG5cdFx0XHRsaSA9IGxpc1sgaSBdO1xyXG5cdFx0XHRkaXZpZGVyVGV4dCA9IHRoaXMub3B0aW9ucy5hdXRvZGl2aWRlcnNTZWxlY3RvciggJCggbGkgKSApO1xyXG5cclxuXHRcdFx0aWYgKCBkaXZpZGVyVGV4dCAmJiBsYXN0RGl2aWRlclRleHQgIT09IGRpdmlkZXJUZXh0ICkge1xyXG5cdFx0XHRcdGRpdmlkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImxpXCIgKTtcclxuXHRcdFx0XHRkaXZpZGVyLmFwcGVuZENoaWxkKCBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSggZGl2aWRlclRleHQgKSApO1xyXG5cdFx0XHRcdGRpdmlkZXIuc2V0QXR0cmlidXRlKCBcImRhdGEtXCIgKyAkLm1vYmlsZS5ucyArIFwicm9sZVwiLCBcImxpc3QtZGl2aWRlclwiICk7XHJcblx0XHRcdFx0bGkucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoIGRpdmlkZXIsIGxpICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGxhc3REaXZpZGVyVGV4dCA9IGRpdmlkZXJUZXh0O1xyXG5cdFx0fVxyXG5cdH1cclxufSk7XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcbnZhciByZGl2aWRlciA9IC8oXnxcXHMpdWktbGktZGl2aWRlcigkfFxccykvLFxyXG5cdHJoaWRkZW4gPSAvKF58XFxzKXVpLXNjcmVlbi1oaWRkZW4oJHxcXHMpLztcclxuXHJcbiQud2lkZ2V0KCBcIm1vYmlsZS5saXN0dmlld1wiLCAkLm1vYmlsZS5saXN0dmlldywge1xyXG5cdG9wdGlvbnM6IHtcclxuXHRcdGhpZGVEaXZpZGVyczogZmFsc2VcclxuXHR9LFxyXG5cclxuXHRfYWZ0ZXJMaXN0dmlld1JlZnJlc2g6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGl0ZW1zLCBpZHgsIGl0ZW0sIGhpZGVEaXZpZGVyID0gdHJ1ZTtcclxuXHJcblx0XHR0aGlzLl9zdXBlckFwcGx5KCBhcmd1bWVudHMgKTtcclxuXHJcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5oaWRlRGl2aWRlcnMgKSB7XHJcblx0XHRcdGl0ZW1zID0gdGhpcy5fZ2V0Q2hpbGRyZW5CeVRhZ05hbWUoIHRoaXMuZWxlbWVudFsgMCBdLCBcImxpXCIsIFwiTElcIiApO1xyXG5cdFx0XHRmb3IgKCBpZHggPSBpdGVtcy5sZW5ndGggLSAxIDsgaWR4ID4gLTEgOyBpZHgtLSApIHtcclxuXHRcdFx0XHRpdGVtID0gaXRlbXNbIGlkeCBdO1xyXG5cdFx0XHRcdGlmICggaXRlbS5jbGFzc05hbWUubWF0Y2goIHJkaXZpZGVyICkgKSB7XHJcblx0XHRcdFx0XHRpZiAoIGhpZGVEaXZpZGVyICkge1xyXG5cdFx0XHRcdFx0XHRpdGVtLmNsYXNzTmFtZSA9IGl0ZW0uY2xhc3NOYW1lICsgXCIgdWktc2NyZWVuLWhpZGRlblwiO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0aGlkZURpdmlkZXIgPSB0cnVlO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRpZiAoICFpdGVtLmNsYXNzTmFtZS5tYXRjaCggcmhpZGRlbiApICkge1xyXG5cdFx0XHRcdFx0XHRoaWRlRGl2aWRlciA9IGZhbHNlO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxufSk7XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcbiQubW9iaWxlLm5vanMgPSBmdW5jdGlvbiggdGFyZ2V0ICkge1xyXG5cdCQoIFwiOmpxbURhdGEocm9sZT0nbm9qcycpXCIsIHRhcmdldCApLmFkZENsYXNzKCBcInVpLW5vanNcIiApO1xyXG59O1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG4kLm1vYmlsZS5iZWhhdmlvcnMuZm9ybVJlc2V0ID0ge1xyXG5cdF9oYW5kbGVGb3JtUmVzZXQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5fb24oIHRoaXMuZWxlbWVudC5jbG9zZXN0KCBcImZvcm1cIiApLCB7XHJcblx0XHRcdHJlc2V0OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR0aGlzLl9kZWxheSggXCJfcmVzZXRcIiApO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9XHJcbn07XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4vKlxyXG4qIFwiY2hlY2tib3hyYWRpb1wiIHBsdWdpblxyXG4qL1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG52YXIgZXNjYXBlSWQgPSAkLm1vYmlsZS5wYXRoLmhhc2hUb1NlbGVjdG9yO1xyXG5cclxuJC53aWRnZXQoIFwibW9iaWxlLmNoZWNrYm94cmFkaW9cIiwgJC5leHRlbmQoIHtcclxuXHJcblx0aW5pdFNlbGVjdG9yOiBcImlucHV0Om5vdCggOmpxbURhdGEocm9sZT0nZmxpcHN3aXRjaCcgKSApW3R5cGU9J2NoZWNrYm94J10saW5wdXRbdHlwZT0ncmFkaW8nXTpub3QoIDpqcW1EYXRhKHJvbGU9J2ZsaXBzd2l0Y2gnICkpXCIsXHJcblxyXG5cdG9wdGlvbnM6IHtcclxuXHRcdHRoZW1lOiBcImluaGVyaXRcIixcclxuXHRcdG1pbmk6IGZhbHNlLFxyXG5cdFx0d3JhcHBlckNsYXNzOiBudWxsLFxyXG5cdFx0ZW5oYW5jZWQ6IGZhbHNlLFxyXG5cdFx0aWNvbnBvczogXCJsZWZ0XCJcclxuXHJcblx0fSxcclxuXHRfY3JlYXRlOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBpbnB1dCA9IHRoaXMuZWxlbWVudCxcclxuXHRcdFx0byA9IHRoaXMub3B0aW9ucyxcclxuXHRcdFx0aW5oZXJpdEF0dHIgPSBmdW5jdGlvbiggaW5wdXQsIGRhdGFBdHRyICkge1xyXG5cdFx0XHRcdHJldHVybiBpbnB1dC5qcW1EYXRhKCBkYXRhQXR0ciApIHx8XHJcblx0XHRcdFx0XHRpbnB1dC5jbG9zZXN0KCBcImZvcm0sIGZpZWxkc2V0XCIgKS5qcW1EYXRhKCBkYXRhQXR0ciApO1xyXG5cdFx0XHR9LFxyXG5cdFx0XHRsYWJlbCA9IHRoaXMub3B0aW9ucy5lbmhhbmNlZCA/XHJcblx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0ZWxlbWVudDogdGhpcy5lbGVtZW50LnNpYmxpbmdzKCBcImxhYmVsXCIgKSxcclxuXHRcdFx0XHRcdGlzUGFyZW50OiBmYWxzZVxyXG5cdFx0XHRcdH0gOlxyXG5cdFx0XHRcdHRoaXMuX2ZpbmRMYWJlbCgpLFxyXG5cdFx0XHRpbnB1dHR5cGUgPSBpbnB1dFswXS50eXBlLFxyXG5cdFx0XHRjaGVja2VkQ2xhc3MgPSBcInVpLVwiICsgaW5wdXR0eXBlICsgXCItb25cIixcclxuXHRcdFx0dW5jaGVja2VkQ2xhc3MgPSBcInVpLVwiICsgaW5wdXR0eXBlICsgXCItb2ZmXCI7XHJcblxyXG5cdFx0aWYgKCBpbnB1dHR5cGUgIT09IFwiY2hlY2tib3hcIiAmJiBpbnB1dHR5cGUgIT09IFwicmFkaW9cIiApIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggdGhpcy5lbGVtZW50WzBdLmRpc2FibGVkICkge1xyXG5cdFx0XHR0aGlzLm9wdGlvbnMuZGlzYWJsZWQgPSB0cnVlO1xyXG5cdFx0fVxyXG5cclxuXHRcdG8uaWNvbnBvcyA9IGluaGVyaXRBdHRyKCBpbnB1dCwgXCJpY29ucG9zXCIgKSB8fFxyXG5cdFx0XHRsYWJlbC5lbGVtZW50LmF0dHIoIFwiZGF0YS1cIiArICQubW9iaWxlLm5zICsgXCJpY29ucG9zXCIgKSB8fCBvLmljb25wb3MsXHJcblxyXG5cdFx0Ly8gRXN0YWJsaXNoIG9wdGlvbnNcclxuXHRcdG8ubWluaSA9IGluaGVyaXRBdHRyKCBpbnB1dCwgXCJtaW5pXCIgKSB8fCBvLm1pbmk7XHJcblxyXG5cdFx0Ly8gRXhwb3NlIGZvciBvdGhlciBtZXRob2RzXHJcblx0XHQkLmV4dGVuZCggdGhpcywge1xyXG5cdFx0XHRpbnB1dDogaW5wdXQsXHJcblx0XHRcdGxhYmVsOiBsYWJlbC5lbGVtZW50LFxyXG5cdFx0XHRsYWJlbElzUGFyZW50OiBsYWJlbC5pc1BhcmVudCxcclxuXHRcdFx0aW5wdXR0eXBlOiBpbnB1dHR5cGUsXHJcblx0XHRcdGNoZWNrZWRDbGFzczogY2hlY2tlZENsYXNzLFxyXG5cdFx0XHR1bmNoZWNrZWRDbGFzczogdW5jaGVja2VkQ2xhc3NcclxuXHRcdH0pO1xyXG5cclxuXHRcdGlmICggIXRoaXMub3B0aW9ucy5lbmhhbmNlZCApIHtcclxuXHRcdFx0dGhpcy5fZW5oYW5jZSgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX29uKCBsYWJlbC5lbGVtZW50LCB7XHJcblx0XHRcdHZtb3VzZW92ZXI6IFwiX2hhbmRsZUxhYmVsVk1vdXNlT3ZlclwiLFxyXG5cdFx0XHR2Y2xpY2s6IFwiX2hhbmRsZUxhYmVsVkNsaWNrXCJcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMuX29uKCBpbnB1dCwge1xyXG5cdFx0XHR2bW91c2Vkb3duOiBcIl9jYWNoZVZhbHNcIixcclxuXHRcdFx0dmNsaWNrOiBcIl9oYW5kbGVJbnB1dFZDbGlja1wiLFxyXG5cdFx0XHRmb2N1czogXCJfaGFuZGxlSW5wdXRGb2N1c1wiLFxyXG5cdFx0XHRibHVyOiBcIl9oYW5kbGVJbnB1dEJsdXJcIlxyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5faGFuZGxlRm9ybVJlc2V0KCk7XHJcblx0XHR0aGlzLnJlZnJlc2goKTtcclxuXHR9LFxyXG5cclxuXHRfZmluZExhYmVsOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBwYXJlbnRMYWJlbCwgbGFiZWwsIGlzUGFyZW50LFxyXG5cdFx0XHRpbnB1dCA9IHRoaXMuZWxlbWVudCxcclxuXHRcdFx0bGFiZWxzTGlzdCA9IGlucHV0WyAwIF0ubGFiZWxzO1xyXG5cclxuXHRcdGlmKCBsYWJlbHNMaXN0ICYmIGxhYmVsc0xpc3QubGVuZ3RoID4gMCApIHtcclxuXHRcdFx0bGFiZWwgPSAkKCBsYWJlbHNMaXN0WyAwIF0gKTtcclxuXHRcdFx0aXNQYXJlbnQgPSAkLmNvbnRhaW5zKCBsYWJlbFsgMCBdLCBpbnB1dFsgMCBdICk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRwYXJlbnRMYWJlbCA9IGlucHV0LmNsb3Nlc3QoIFwibGFiZWxcIiApO1xyXG5cdFx0XHRpc1BhcmVudCA9ICggcGFyZW50TGFiZWwubGVuZ3RoID4gMCApO1xyXG5cclxuXHRcdFx0Ly8gTk9URTogV2luZG93cyBQaG9uZSBjb3VsZCBub3QgZmluZCB0aGUgbGFiZWwgdGhyb3VnaCBhIHNlbGVjdG9yXHJcblx0XHRcdC8vIGZpbHRlciB3b3JrcyB0aG91Z2guXHJcblx0XHRcdGxhYmVsID0gaXNQYXJlbnQgPyBwYXJlbnRMYWJlbCA6XHJcblx0XHRcdFx0JCggdGhpcy5kb2N1bWVudFsgMCBdLmdldEVsZW1lbnRzQnlUYWdOYW1lKCBcImxhYmVsXCIgKSApXHJcblx0XHRcdFx0XHQuZmlsdGVyKCBcIltmb3I9J1wiICsgZXNjYXBlSWQoIGlucHV0WyAwIF0uaWQgKSArIFwiJ11cIiApXHJcblx0XHRcdFx0XHQuZmlyc3QoKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRlbGVtZW50OiBsYWJlbCxcclxuXHRcdFx0aXNQYXJlbnQ6IGlzUGFyZW50XHJcblx0XHR9O1xyXG5cdH0sXHJcblxyXG5cdF9lbmhhbmNlOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMubGFiZWwuYWRkQ2xhc3MoIFwidWktYnRuIHVpLWNvcm5lci1hbGxcIik7XHJcblxyXG5cdFx0aWYgKCB0aGlzLmxhYmVsSXNQYXJlbnQgKSB7XHJcblx0XHRcdHRoaXMuaW5wdXQuYWRkKCB0aGlzLmxhYmVsICkud3JhcEFsbCggdGhpcy5fd3JhcHBlcigpICk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHQvL3RoaXMuZWxlbWVudC5yZXBsYWNlV2l0aCggdGhpcy5pbnB1dC5hZGQoIHRoaXMubGFiZWwgKS53cmFwQWxsKCB0aGlzLl93cmFwcGVyKCkgKSApO1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQud3JhcCggdGhpcy5fd3JhcHBlcigpICk7XHJcblx0XHRcdHRoaXMuZWxlbWVudC5wYXJlbnQoKS5wcmVwZW5kKCB0aGlzLmxhYmVsICk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gV3JhcCB0aGUgaW5wdXQgKyBsYWJlbCBpbiBhIGRpdlxyXG5cclxuXHRcdHRoaXMuX3NldE9wdGlvbnMoe1xyXG5cdFx0XHRcInRoZW1lXCI6IHRoaXMub3B0aW9ucy50aGVtZSxcclxuXHRcdFx0XCJpY29ucG9zXCI6IHRoaXMub3B0aW9ucy5pY29ucG9zLFxyXG5cdFx0XHRcIm1pbmlcIjogdGhpcy5vcHRpb25zLm1pbmlcclxuXHRcdH0pO1xyXG5cclxuXHR9LFxyXG5cclxuXHRfd3JhcHBlcjogZnVuY3Rpb24oKSB7XHJcblx0XHRyZXR1cm4gJCggXCI8ZGl2IGNsYXNzPSdcIiAgK1xyXG5cdFx0XHQoIHRoaXMub3B0aW9ucy53cmFwcGVyQ2xhc3MgPyB0aGlzLm9wdGlvbnMud3JhcHBlckNsYXNzIDogXCJcIiApICtcclxuXHRcdFx0XCIgdWktXCIgKyB0aGlzLmlucHV0dHlwZSArXHJcblx0XHRcdCggdGhpcy5vcHRpb25zLmRpc2FibGVkID8gXCIgdWktc3RhdGUtZGlzYWJsZWRcIiA6IFwiXCIgKSArIFwiJyA+PC9kaXY+XCIgKTtcclxuXHR9LFxyXG5cclxuXHRfaGFuZGxlSW5wdXRGb2N1czogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLmxhYmVsLmFkZENsYXNzKCAkLm1vYmlsZS5mb2N1c0NsYXNzICk7XHJcblx0fSxcclxuXHJcblx0X2hhbmRsZUlucHV0Qmx1cjogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLmxhYmVsLnJlbW92ZUNsYXNzKCAkLm1vYmlsZS5mb2N1c0NsYXNzICk7XHJcblx0fSxcclxuXHJcblx0X2hhbmRsZUlucHV0VkNsaWNrOiBmdW5jdGlvbigpIHtcclxuXHRcdC8vIEFkZHMgY2hlY2tlZCBhdHRyaWJ1dGUgdG8gY2hlY2tlZCBpbnB1dCB3aGVuIGtleWJvYXJkIGlzIHVzZWRcclxuXHRcdHRoaXMuZWxlbWVudC5wcm9wKCBcImNoZWNrZWRcIiwgdGhpcy5lbGVtZW50LmlzKCBcIjpjaGVja2VkXCIgKSApO1xyXG5cdFx0dGhpcy5fZ2V0SW5wdXRTZXQoKS5ub3QoIHRoaXMuZWxlbWVudCApLnByb3AoIFwiY2hlY2tlZFwiLCBmYWxzZSApO1xyXG5cdFx0dGhpcy5fdXBkYXRlQWxsKCB0cnVlICk7XHJcblx0fSxcclxuXHJcblx0X2hhbmRsZUxhYmVsVk1vdXNlT3ZlcjogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0aWYgKCB0aGlzLmxhYmVsLnBhcmVudCgpLmhhc0NsYXNzKCBcInVpLXN0YXRlLWRpc2FibGVkXCIgKSApIHtcclxuXHRcdFx0ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X2hhbmRsZUxhYmVsVkNsaWNrOiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHR2YXIgaW5wdXQgPSB0aGlzLmVsZW1lbnQ7XHJcblxyXG5cdFx0aWYgKCBpbnB1dC5pcyggXCI6ZGlzYWJsZWRcIiApICkge1xyXG5cdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5fY2FjaGVWYWxzKCk7XHJcblxyXG5cdFx0aW5wdXQucHJvcCggXCJjaGVja2VkXCIsIHRoaXMuaW5wdXR0eXBlID09PSBcInJhZGlvXCIgJiYgdHJ1ZSB8fCAhaW5wdXQucHJvcCggXCJjaGVja2VkXCIgKSApO1xyXG5cclxuXHRcdC8vIHRyaWdnZXIgY2xpY2sgaGFuZGxlcidzIGJvdW5kIGRpcmVjdGx5IHRvIHRoZSBpbnB1dCBhcyBhIHN1YnN0aXR1dGUgZm9yXHJcblx0XHQvLyBob3cgbGFiZWwgY2xpY2tzIGJlaGF2ZSBub3JtYWxseSBpbiB0aGUgYnJvd3NlcnNcclxuXHRcdC8vIFRPRE86IGl0IHdvdWxkIGJlIG5pY2UgdG8gbGV0IHRoZSBicm93c2VyJ3MgaGFuZGxlIHRoZSBjbGlja3MgYW5kIHBhc3MgdGhlbVxyXG5cdFx0Ly8gICAgICAgdGhyb3VnaCB0byB0aGUgYXNzb2NpYXRlIGlucHV0LiB3ZSBjYW4gc3dhbGxvdyB0aGF0IGNsaWNrIGF0IHRoZSBwYXJlbnRcclxuXHRcdC8vICAgICAgIHdyYXBwZXIgZWxlbWVudCBsZXZlbFxyXG5cdFx0aW5wdXQudHJpZ2dlckhhbmRsZXIoIFwiY2xpY2tcIiApO1xyXG5cclxuXHRcdC8vIElucHV0IHNldCBmb3IgY29tbW9uIHJhZGlvIGJ1dHRvbnMgd2lsbCBjb250YWluIGFsbCB0aGUgcmFkaW9cclxuXHRcdC8vIGJ1dHRvbnMsIGJ1dCB3aWxsIG5vdCBmb3IgY2hlY2tib3hlcy4gY2xlYXJpbmcgdGhlIGNoZWNrZWQgc3RhdHVzXHJcblx0XHQvLyBvZiBvdGhlciByYWRpb3MgZW5zdXJlcyB0aGUgYWN0aXZlIGJ1dHRvbiBzdGF0ZSBpcyBhcHBsaWVkIHByb3Blcmx5XHJcblx0XHR0aGlzLl9nZXRJbnB1dFNldCgpLm5vdCggaW5wdXQgKS5wcm9wKCBcImNoZWNrZWRcIiwgZmFsc2UgKTtcclxuXHJcblx0XHR0aGlzLl91cGRhdGVBbGwoKTtcclxuXHRcdHJldHVybiBmYWxzZTtcclxuXHR9LFxyXG5cclxuXHRfY2FjaGVWYWxzOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX2dldElucHV0U2V0KCkuZWFjaCggZnVuY3Rpb24oKSB7XHJcblx0XHRcdCQoIHRoaXMgKS5hdHRyKFwiZGF0YS1cIiArICQubW9iaWxlLm5zICsgXCJjYWNoZVZhbFwiLCB0aGlzLmNoZWNrZWQgKTtcclxuXHRcdH0pO1xyXG5cdH0sXHJcblxyXG5cdC8vIFJldHVybnMgdGhvc2UgcmFkaW8gYnV0dG9ucyB0aGF0IGFyZSBzdXBwb3NlZCB0byBiZSBpbiB0aGUgc2FtZSBncm91cCBhc1xyXG5cdC8vIHRoaXMgcmFkaW8gYnV0dG9uLiBJbiB0aGUgY2FzZSBvZiBhIGNoZWNrYm94IG9yIGEgcmFkaW8gbGFja2luZyBhIG5hbWVcclxuXHQvLyBhdHRyaWJ1dGUsIGl0IHJldHVybnMgdGhpcy5lbGVtZW50LlxyXG5cdF9nZXRJbnB1dFNldDogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgc2VsZWN0b3IsIGZvcm1JZCxcclxuXHRcdFx0cmFkaW8gPSB0aGlzLmVsZW1lbnRbIDAgXSxcclxuXHRcdFx0bmFtZSA9IHJhZGlvLm5hbWUsXHJcblx0XHRcdGZvcm0gPSByYWRpby5mb3JtLFxyXG5cdFx0XHRkb2MgPSB0aGlzLmVsZW1lbnQucGFyZW50cygpLmxhc3QoKS5nZXQoIDAgKSxcclxuXHJcblx0XHRcdC8vIEEgcmFkaW8gaXMgYWx3YXlzIGEgbWVtYmVyIG9mIGl0cyBvd24gZ3JvdXBcclxuXHRcdFx0cmFkaW9zID0gdGhpcy5lbGVtZW50O1xyXG5cclxuXHRcdC8vIE9ubHkgc3RhcnQgcnVubmluZyBzZWxlY3RvcnMgaWYgdGhpcyBpcyBhbiBhdHRhY2hlZCByYWRpbyBidXR0b24gd2l0aCBhIG5hbWVcclxuXHRcdGlmICggbmFtZSAmJiB0aGlzLmlucHV0dHlwZSA9PT0gXCJyYWRpb1wiICYmIGRvYyApIHtcclxuXHRcdFx0c2VsZWN0b3IgPSBcImlucHV0W3R5cGU9J3JhZGlvJ11bbmFtZT0nXCIgKyBlc2NhcGVJZCggbmFtZSApICsgXCInXVwiO1xyXG5cclxuXHRcdFx0Ly8gSWYgd2UncmUgaW5zaWRlIGEgZm9ybVxyXG5cdFx0XHRpZiAoIGZvcm0gKSB7XHJcblx0XHRcdFx0Zm9ybUlkID0gZm9ybS5nZXRBdHRyaWJ1dGUoIFwiaWRcIiApO1xyXG5cclxuXHRcdFx0XHQvLyBJZiB0aGUgZm9ybSBoYXMgYW4gSUQsIGNvbGxlY3QgcmFkaW9zIHNjYXR0ZXJlZCB0aHJvdWdodCB0aGUgZG9jdW1lbnQgd2hpY2hcclxuXHRcdFx0XHQvLyBuZXZlcnRoZWxlc3MgYXJlIHBhcnQgb2YgdGhlIGZvcm0gYnkgd2F5IG9mIHRoZSB2YWx1ZSBvZiB0aGVpciBmb3JtIGF0dHJpYnV0ZVxyXG5cdFx0XHRcdGlmICggZm9ybUlkICkge1xyXG5cdFx0XHRcdFx0cmFkaW9zID0gJCggc2VsZWN0b3IgKyBcIltmb3JtPSdcIiArIGVzY2FwZUlkKCBmb3JtSWQgKSArIFwiJ11cIiwgZG9jICk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBBbHNvIGFkZCB0byB0aG9zZSB0aGUgcmFkaW9zIGluIHRoZSBmb3JtIGl0c2VsZlxyXG5cdFx0XHRcdHJhZGlvcyA9ICQoIGZvcm0gKS5maW5kKCBzZWxlY3RvciApLmZpbHRlciggZnVuY3Rpb24oKSB7XHJcblxyXG5cdFx0XHRcdFx0Ly8gU29tZSByYWRpb3MgaW5zaWRlIHRoZSBmb3JtIG1heSBiZWxvbmcgdG8gc29tZSBvdGhlciBmb3JtIGJ5IHZpcnR1ZSBvZlxyXG5cdFx0XHRcdFx0Ly8gaGF2aW5nIGEgZm9ybSBhdHRyaWJ1dGUgZGVmaW5lZCBvbiB0aGVtLCBzbyB3ZSBtdXN0IGZpbHRlciB0aGVtIG91dCBoZXJlXHJcblx0XHRcdFx0XHRyZXR1cm4gKCB0aGlzLmZvcm0gPT09IGZvcm0gKTtcclxuXHRcdFx0XHR9KS5hZGQoIHJhZGlvcyApO1xyXG5cclxuXHRcdFx0Ly8gSWYgd2UncmUgb3V0c2lkZSBhIGZvcm1cclxuXHRcdFx0fSBlbHNlIHtcclxuXHJcblx0XHRcdFx0Ly8gQ29sbGVjdCBhbGwgdGhvc2UgcmFkaW9zIHdoaWNoIGFyZSBhbHNvIG91dHNpZGUgb2YgYSBmb3JtIGFuZCBtYXRjaCBvdXIgbmFtZVxyXG5cdFx0XHRcdHJhZGlvcyA9ICQoIHNlbGVjdG9yLCBkb2MgKS5maWx0ZXIoIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0cmV0dXJuICF0aGlzLmZvcm07XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHJldHVybiByYWRpb3M7XHJcblx0fSxcclxuXHJcblx0X3VwZGF0ZUFsbDogZnVuY3Rpb24oIGNoYW5nZVRyaWdnZXJlZCApIHtcclxuXHRcdHZhciBzZWxmID0gdGhpcztcclxuXHJcblx0XHR0aGlzLl9nZXRJbnB1dFNldCgpLmVhY2goIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgJHRoaXMgPSAkKCB0aGlzICk7XHJcblxyXG5cdFx0XHRpZiAoICggdGhpcy5jaGVja2VkIHx8IHNlbGYuaW5wdXR0eXBlID09PSBcImNoZWNrYm94XCIgKSAmJiAhY2hhbmdlVHJpZ2dlcmVkICkge1xyXG5cdFx0XHRcdCR0aGlzLnRyaWdnZXIoIFwiY2hhbmdlXCIgKTtcclxuXHRcdFx0fVxyXG5cdFx0fSlcclxuXHRcdC5jaGVja2JveHJhZGlvKCBcInJlZnJlc2hcIiApO1xyXG5cdH0sXHJcblxyXG5cdF9yZXNldDogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLnJlZnJlc2goKTtcclxuXHR9LFxyXG5cclxuXHQvLyBJcyB0aGUgd2lkZ2V0IHN1cHBvc2VkIHRvIGRpc3BsYXkgYW4gaWNvbj9cclxuXHRfaGFzSWNvbjogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgY29udHJvbGdyb3VwLCBjb250cm9sZ3JvdXBXaWRnZXQsXHJcblx0XHRcdGNvbnRyb2xncm91cENvbnN0cnVjdG9yID0gJC5tb2JpbGUuY29udHJvbGdyb3VwO1xyXG5cclxuXHRcdC8vIElmIHRoZSBjb250cm9sZ3JvdXAgd2lkZ2V0IGlzIGRlZmluZWQgLi4uXHJcblx0XHRpZiAoIGNvbnRyb2xncm91cENvbnN0cnVjdG9yICkge1xyXG5cdFx0XHRjb250cm9sZ3JvdXAgPSB0aGlzLmVsZW1lbnQuY2xvc2VzdChcclxuXHRcdFx0XHRcIjptb2JpbGUtY29udHJvbGdyb3VwLFwiICtcclxuXHRcdFx0XHRjb250cm9sZ3JvdXBDb25zdHJ1Y3Rvci5wcm90b3R5cGUuaW5pdFNlbGVjdG9yICk7XHJcblxyXG5cdFx0XHQvLyAuLi4gYW5kIHRoZSBjaGVja2JveCBpcyBpbiBhIGNvbnRyb2xncm91cCAuLi5cclxuXHRcdFx0aWYgKCBjb250cm9sZ3JvdXAubGVuZ3RoID4gMCApIHtcclxuXHJcblx0XHRcdFx0Ly8gLi4uIGxvb2sgZm9yIGEgY29udHJvbGdyb3VwIHdpZGdldCBpbnN0YW5jZSwgYW5kIC4uLlxyXG5cdFx0XHRcdGNvbnRyb2xncm91cFdpZGdldCA9ICQuZGF0YSggY29udHJvbGdyb3VwWyAwIF0sIFwibW9iaWxlLWNvbnRyb2xncm91cFwiICk7XHJcblxyXG5cdFx0XHRcdC8vIC4uLiBpZiBmb3VuZCwgZGVjaWRlIGJhc2VkIG9uIHRoZSBvcHRpb24gdmFsdWUsIC4uLlxyXG5cdFx0XHRcdHJldHVybiAoICggY29udHJvbGdyb3VwV2lkZ2V0ID8gY29udHJvbGdyb3VwV2lkZ2V0Lm9wdGlvbnMudHlwZSA6XHJcblxyXG5cdFx0XHRcdFx0Ly8gLi4uIG90aGVyd2lzZSBkZWNpZGUgYmFzZWQgb24gdGhlIFwidHlwZVwiIGRhdGEgYXR0cmlidXRlLlxyXG5cdFx0XHRcdFx0Y29udHJvbGdyb3VwLmF0dHIoIFwiZGF0YS1cIiArICQubW9iaWxlLm5zICsgXCJ0eXBlXCIgKSApICE9PSBcImhvcml6b250YWxcIiApO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gTm9ybWFsbHksIHRoZSB3aWRnZXQgZGlzcGxheXMgYW4gaWNvbi5cclxuXHRcdHJldHVybiB0cnVlO1xyXG5cdH0sXHJcblxyXG5cdHJlZnJlc2g6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGlzQ2hlY2tlZCA9IHRoaXMuZWxlbWVudFsgMCBdLmNoZWNrZWQsXHJcblx0XHRcdGFjdGl2ZSA9ICQubW9iaWxlLmFjdGl2ZUJ0bkNsYXNzLFxyXG5cdFx0XHRpY29ucG9zQ2xhc3MgPSBcInVpLWJ0bi1pY29uLVwiICsgdGhpcy5vcHRpb25zLmljb25wb3MsXHJcblx0XHRcdGFkZENsYXNzZXMgPSBbXSxcclxuXHRcdFx0cmVtb3ZlQ2xhc3NlcyA9IFtdO1xyXG5cclxuXHRcdGlmICggdGhpcy5faGFzSWNvbigpICkge1xyXG5cdFx0XHRyZW1vdmVDbGFzc2VzLnB1c2goIGFjdGl2ZSApO1xyXG5cdFx0XHRhZGRDbGFzc2VzLnB1c2goIGljb25wb3NDbGFzcyApO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0cmVtb3ZlQ2xhc3Nlcy5wdXNoKCBpY29ucG9zQ2xhc3MgKTtcclxuXHRcdFx0KCBpc0NoZWNrZWQgPyBhZGRDbGFzc2VzIDogcmVtb3ZlQ2xhc3NlcyApLnB1c2goIGFjdGl2ZSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggaXNDaGVja2VkICkge1xyXG5cdFx0XHRhZGRDbGFzc2VzLnB1c2goIHRoaXMuY2hlY2tlZENsYXNzICk7XHJcblx0XHRcdHJlbW92ZUNsYXNzZXMucHVzaCggdGhpcy51bmNoZWNrZWRDbGFzcyApO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0YWRkQ2xhc3Nlcy5wdXNoKCB0aGlzLnVuY2hlY2tlZENsYXNzICk7XHJcblx0XHRcdHJlbW92ZUNsYXNzZXMucHVzaCggdGhpcy5jaGVja2VkQ2xhc3MgKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLndpZGdldCgpLnRvZ2dsZUNsYXNzKCBcInVpLXN0YXRlLWRpc2FibGVkXCIsIHRoaXMuZWxlbWVudC5wcm9wKCBcImRpc2FibGVkXCIgKSApO1xyXG5cclxuXHRcdHRoaXMubGFiZWxcclxuXHRcdFx0LmFkZENsYXNzKCBhZGRDbGFzc2VzLmpvaW4oIFwiIFwiICkgKVxyXG5cdFx0XHQucmVtb3ZlQ2xhc3MoIHJlbW92ZUNsYXNzZXMuam9pbiggXCIgXCIgKSApO1xyXG5cdH0sXHJcblxyXG5cdHdpZGdldDogZnVuY3Rpb24oKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5sYWJlbC5wYXJlbnQoKTtcclxuXHR9LFxyXG5cclxuXHRfc2V0T3B0aW9uczogZnVuY3Rpb24oIG9wdGlvbnMgKSB7XHJcblx0XHR2YXIgbGFiZWwgPSB0aGlzLmxhYmVsLFxyXG5cdFx0XHRjdXJyZW50T3B0aW9ucyA9IHRoaXMub3B0aW9ucyxcclxuXHRcdFx0b3V0ZXIgPSB0aGlzLndpZGdldCgpLFxyXG5cdFx0XHRoYXNJY29uID0gdGhpcy5faGFzSWNvbigpO1xyXG5cclxuXHRcdGlmICggb3B0aW9ucy5kaXNhYmxlZCAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHR0aGlzLmlucHV0LnByb3AoIFwiZGlzYWJsZWRcIiwgISFvcHRpb25zLmRpc2FibGVkICk7XHJcblx0XHRcdG91dGVyLnRvZ2dsZUNsYXNzKCBcInVpLXN0YXRlLWRpc2FibGVkXCIsICEhb3B0aW9ucy5kaXNhYmxlZCApO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCBvcHRpb25zLm1pbmkgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0b3V0ZXIudG9nZ2xlQ2xhc3MoIFwidWktbWluaVwiLCAhIW9wdGlvbnMubWluaSApO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCBvcHRpb25zLnRoZW1lICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdGxhYmVsXHJcblx0XHRcdFx0LnJlbW92ZUNsYXNzKCBcInVpLWJ0bi1cIiArIGN1cnJlbnRPcHRpb25zLnRoZW1lIClcclxuXHRcdFx0XHQuYWRkQ2xhc3MoIFwidWktYnRuLVwiICsgb3B0aW9ucy50aGVtZSApO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCBvcHRpb25zLndyYXBwZXJDbGFzcyAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRvdXRlclxyXG5cdFx0XHRcdC5yZW1vdmVDbGFzcyggY3VycmVudE9wdGlvbnMud3JhcHBlckNsYXNzIClcclxuXHRcdFx0XHQuYWRkQ2xhc3MoIG9wdGlvbnMud3JhcHBlckNsYXNzICk7XHJcblx0XHR9XHJcblx0XHRpZiAoIG9wdGlvbnMuaWNvbnBvcyAhPT0gdW5kZWZpbmVkICYmIGhhc0ljb24gKSB7XHJcblx0XHRcdGxhYmVsLnJlbW92ZUNsYXNzKCBcInVpLWJ0bi1pY29uLVwiICsgY3VycmVudE9wdGlvbnMuaWNvbnBvcyApLmFkZENsYXNzKCBcInVpLWJ0bi1pY29uLVwiICsgb3B0aW9ucy5pY29ucG9zICk7XHJcblx0XHR9IGVsc2UgaWYgKCAhaGFzSWNvbiApIHtcclxuXHRcdFx0bGFiZWwucmVtb3ZlQ2xhc3MoIFwidWktYnRuLWljb24tXCIgKyBjdXJyZW50T3B0aW9ucy5pY29ucG9zICk7XHJcblx0XHR9XHJcblx0XHR0aGlzLl9zdXBlciggb3B0aW9ucyApO1xyXG5cdH1cclxuXHJcbn0sICQubW9iaWxlLmJlaGF2aW9ycy5mb3JtUmVzZXQgKSApO1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG4kLndpZGdldCggXCJtb2JpbGUuYnV0dG9uXCIsIHtcclxuXHJcblx0aW5pdFNlbGVjdG9yOiBcImlucHV0W3R5cGU9J2J1dHRvbiddLCBpbnB1dFt0eXBlPSdzdWJtaXQnXSwgaW5wdXRbdHlwZT0ncmVzZXQnXVwiLFxyXG5cclxuXHRvcHRpb25zOiB7XHJcblx0XHR0aGVtZTogbnVsbCxcclxuXHRcdGljb246IG51bGwsXHJcblx0XHRpY29ucG9zOiBcImxlZnRcIixcclxuXHRcdGljb25zaGFkb3c6IGZhbHNlLCAvKiBUT0RPOiBEZXByZWNhdGVkIGluIDEuNCwgcmVtb3ZlIGluIDEuNS4gKi9cclxuXHRcdGNvcm5lcnM6IHRydWUsXHJcblx0XHRzaGFkb3c6IHRydWUsXHJcblx0XHRpbmxpbmU6IG51bGwsXHJcblx0XHRtaW5pOiBudWxsLFxyXG5cdFx0d3JhcHBlckNsYXNzOiBudWxsLFxyXG5cdFx0ZW5oYW5jZWQ6IGZhbHNlXHJcblx0fSxcclxuXHJcblx0X2NyZWF0ZTogZnVuY3Rpb24oKSB7XHJcblxyXG5cdFx0aWYgKCB0aGlzLmVsZW1lbnQuaXMoIFwiOmRpc2FibGVkXCIgKSApIHtcclxuXHRcdFx0dGhpcy5vcHRpb25zLmRpc2FibGVkID0gdHJ1ZTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoICF0aGlzLm9wdGlvbnMuZW5oYW5jZWQgKSB7XHJcblx0XHRcdHRoaXMuX2VuaGFuY2UoKTtcclxuXHRcdH1cclxuXHJcblx0XHQkLmV4dGVuZCggdGhpcywge1xyXG5cdFx0XHR3cmFwcGVyOiB0aGlzLmVsZW1lbnQucGFyZW50KClcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMuX29uKCB7XHJcblx0XHRcdGZvY3VzOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR0aGlzLndpZGdldCgpLmFkZENsYXNzKCAkLm1vYmlsZS5mb2N1c0NsYXNzICk7XHJcblx0XHRcdH0sXHJcblxyXG5cdFx0XHRibHVyOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR0aGlzLndpZGdldCgpLnJlbW92ZUNsYXNzKCAkLm1vYmlsZS5mb2N1c0NsYXNzICk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMucmVmcmVzaCggdHJ1ZSApO1xyXG5cdH0sXHJcblxyXG5cdF9lbmhhbmNlOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuZWxlbWVudC53cmFwKCB0aGlzLl9idXR0b24oKSApO1xyXG5cdH0sXHJcblxyXG5cdF9idXR0b246IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnMsXHJcblx0XHRcdGljb25DbGFzc2VzID0gdGhpcy5fZ2V0SWNvbkNsYXNzZXMoIHRoaXMub3B0aW9ucyApO1xyXG5cclxuXHRcdHJldHVybiAkKFwiPGRpdiBjbGFzcz0ndWktYnRuIHVpLWlucHV0LWJ0blwiICtcclxuXHRcdFx0KCBvcHRpb25zLndyYXBwZXJDbGFzcyA/IFwiIFwiICsgb3B0aW9ucy53cmFwcGVyQ2xhc3MgOiBcIlwiICkgK1xyXG5cdFx0XHQoIG9wdGlvbnMudGhlbWUgPyBcIiB1aS1idG4tXCIgKyBvcHRpb25zLnRoZW1lIDogXCJcIiApICtcclxuXHRcdFx0KCBvcHRpb25zLmNvcm5lcnMgPyBcIiB1aS1jb3JuZXItYWxsXCIgOiBcIlwiICkgK1xyXG5cdFx0XHQoIG9wdGlvbnMuc2hhZG93ID8gXCIgdWktc2hhZG93XCIgOiBcIlwiICkgK1xyXG5cdFx0XHQoIG9wdGlvbnMuaW5saW5lID8gXCIgdWktYnRuLWlubGluZVwiIDogXCJcIiApICtcclxuXHRcdFx0KCBvcHRpb25zLm1pbmkgPyBcIiB1aS1taW5pXCIgOiBcIlwiICkgK1xyXG5cdFx0XHQoIG9wdGlvbnMuZGlzYWJsZWQgPyBcIiB1aS1zdGF0ZS1kaXNhYmxlZFwiIDogXCJcIiApICtcclxuXHRcdFx0KCBpY29uQ2xhc3NlcyA/ICggXCIgXCIgKyBpY29uQ2xhc3NlcyApIDogXCJcIiApICtcclxuXHRcdFx0XCInID5cIiArIHRoaXMuZWxlbWVudC52YWwoKSArIFwiPC9kaXY+XCIgKTtcclxuXHR9LFxyXG5cclxuXHR3aWRnZXQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuIHRoaXMud3JhcHBlcjtcclxuXHR9LFxyXG5cclxuXHRfZGVzdHJveTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudC5pbnNlcnRCZWZvcmUoIHRoaXMud3JhcHBlciApO1xyXG5cdFx0XHR0aGlzLndyYXBwZXIucmVtb3ZlKCk7XHJcblx0fSxcclxuXHJcblx0X2dldEljb25DbGFzc2VzOiBmdW5jdGlvbiggb3B0aW9ucyApIHtcclxuXHRcdHJldHVybiAoIG9wdGlvbnMuaWNvbiA/ICggXCJ1aS1pY29uLVwiICsgb3B0aW9ucy5pY29uICtcclxuXHRcdFx0KCBvcHRpb25zLmljb25zaGFkb3cgPyBcIiB1aS1zaGFkb3ctaWNvblwiIDogXCJcIiApICsgLyogVE9ETzogRGVwcmVjYXRlZCBpbiAxLjQsIHJlbW92ZSBpbiAxLjUuICovXHJcblx0XHRcdFwiIHVpLWJ0bi1pY29uLVwiICsgb3B0aW9ucy5pY29ucG9zICkgOiBcIlwiICk7XHJcblx0fSxcclxuXHJcblx0X3NldE9wdGlvbnM6IGZ1bmN0aW9uKCBvcHRpb25zICkge1xyXG5cdFx0dmFyIG91dGVyID0gdGhpcy53aWRnZXQoKTtcclxuXHJcblx0XHRpZiAoIG9wdGlvbnMudGhlbWUgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0b3V0ZXJcclxuXHRcdFx0XHQucmVtb3ZlQ2xhc3MoIHRoaXMub3B0aW9ucy50aGVtZSApXHJcblx0XHRcdFx0LmFkZENsYXNzKCBcInVpLWJ0bi1cIiArIG9wdGlvbnMudGhlbWUgKTtcclxuXHRcdH1cclxuXHRcdGlmICggb3B0aW9ucy5jb3JuZXJzICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdG91dGVyLnRvZ2dsZUNsYXNzKCBcInVpLWNvcm5lci1hbGxcIiwgb3B0aW9ucy5jb3JuZXJzICk7XHJcblx0XHR9XHJcblx0XHRpZiAoIG9wdGlvbnMuc2hhZG93ICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdG91dGVyLnRvZ2dsZUNsYXNzKCBcInVpLXNoYWRvd1wiLCBvcHRpb25zLnNoYWRvdyApO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCBvcHRpb25zLmlubGluZSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRvdXRlci50b2dnbGVDbGFzcyggXCJ1aS1idG4taW5saW5lXCIsIG9wdGlvbnMuaW5saW5lICk7XHJcblx0XHR9XHJcblx0XHRpZiAoIG9wdGlvbnMubWluaSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRvdXRlci50b2dnbGVDbGFzcyggXCJ1aS1taW5pXCIsIG9wdGlvbnMubWluaSApO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCBvcHRpb25zLmRpc2FibGVkICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudC5wcm9wKCBcImRpc2FibGVkXCIsIG9wdGlvbnMuZGlzYWJsZWQgKTtcclxuXHRcdFx0b3V0ZXIudG9nZ2xlQ2xhc3MoIFwidWktc3RhdGUtZGlzYWJsZWRcIiwgb3B0aW9ucy5kaXNhYmxlZCApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggb3B0aW9ucy5pY29uICE9PSB1bmRlZmluZWQgfHxcclxuXHRcdFx0XHRvcHRpb25zLmljb25zaGFkb3cgIT09IHVuZGVmaW5lZCB8fCAvKiBUT0RPOiBEZXByZWNhdGVkIGluIDEuNCwgcmVtb3ZlIGluIDEuNS4gKi9cclxuXHRcdFx0XHRvcHRpb25zLmljb25wb3MgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0b3V0ZXJcclxuXHRcdFx0XHQucmVtb3ZlQ2xhc3MoIHRoaXMuX2dldEljb25DbGFzc2VzKCB0aGlzLm9wdGlvbnMgKSApXHJcblx0XHRcdFx0LmFkZENsYXNzKCB0aGlzLl9nZXRJY29uQ2xhc3NlcyhcclxuXHRcdFx0XHRcdCQuZXh0ZW5kKCB7fSwgdGhpcy5vcHRpb25zLCBvcHRpb25zICkgKSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX3N1cGVyKCBvcHRpb25zICk7XHJcblx0fSxcclxuXHJcblx0cmVmcmVzaDogZnVuY3Rpb24oIGNyZWF0ZSApIHtcclxuXHRcdHZhciBvcmlnaW5hbEVsZW1lbnQsXHJcblx0XHRcdGlzRGlzYWJsZWQgPSB0aGlzLmVsZW1lbnQucHJvcCggXCJkaXNhYmxlZFwiICk7XHJcblxyXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMuaWNvbiAmJiB0aGlzLm9wdGlvbnMuaWNvbnBvcyA9PT0gXCJub3RleHRcIiAmJiB0aGlzLmVsZW1lbnQuYXR0ciggXCJ0aXRsZVwiICkgKSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudC5hdHRyKCBcInRpdGxlXCIsIHRoaXMuZWxlbWVudC52YWwoKSApO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCAhY3JlYXRlICkge1xyXG5cdFx0XHRvcmlnaW5hbEVsZW1lbnQgPSB0aGlzLmVsZW1lbnQuZGV0YWNoKCk7XHJcblx0XHRcdCQoIHRoaXMud3JhcHBlciApLnRleHQoIHRoaXMuZWxlbWVudC52YWwoKSApLmFwcGVuZCggb3JpZ2luYWxFbGVtZW50ICk7XHJcblx0XHR9XHJcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5kaXNhYmxlZCAhPT0gaXNEaXNhYmxlZCApIHtcclxuXHRcdFx0dGhpcy5fc2V0T3B0aW9ucyh7IGRpc2FibGVkOiBpc0Rpc2FibGVkIH0pO1xyXG5cdFx0fVxyXG5cdH1cclxufSk7XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4oZnVuY3Rpb24oICQgKSB7XHJcblx0dmFyXHRtZXRhID0gJCggXCJtZXRhW25hbWU9dmlld3BvcnRdXCIgKSxcclxuXHRcdGluaXRpYWxDb250ZW50ID0gbWV0YS5hdHRyKCBcImNvbnRlbnRcIiApLFxyXG5cdFx0ZGlzYWJsZWRab29tID0gaW5pdGlhbENvbnRlbnQgKyBcIixtYXhpbXVtLXNjYWxlPTEsIHVzZXItc2NhbGFibGU9bm9cIixcclxuXHRcdGVuYWJsZWRab29tID0gaW5pdGlhbENvbnRlbnQgKyBcIixtYXhpbXVtLXNjYWxlPTEwLCB1c2VyLXNjYWxhYmxlPXllc1wiLFxyXG5cdFx0ZGlzYWJsZWRJbml0aWFsbHkgPSAvKHVzZXItc2NhbGFibGVbXFxzXSo9W1xcc10qbm8pfChtYXhpbXVtLXNjYWxlW1xcc10qPVtcXHNdKjEpWyQsXFxzXS8udGVzdCggaW5pdGlhbENvbnRlbnQgKTtcclxuXHJcblx0JC5tb2JpbGUuem9vbSA9ICQuZXh0ZW5kKCB7fSwge1xyXG5cdFx0ZW5hYmxlZDogIWRpc2FibGVkSW5pdGlhbGx5LFxyXG5cdFx0bG9ja2VkOiBmYWxzZSxcclxuXHRcdGRpc2FibGU6IGZ1bmN0aW9uKCBsb2NrICkge1xyXG5cdFx0XHRpZiAoICFkaXNhYmxlZEluaXRpYWxseSAmJiAhJC5tb2JpbGUuem9vbS5sb2NrZWQgKSB7XHJcblx0XHRcdFx0bWV0YS5hdHRyKCBcImNvbnRlbnRcIiwgZGlzYWJsZWRab29tICk7XHJcblx0XHRcdFx0JC5tb2JpbGUuem9vbS5lbmFibGVkID0gZmFsc2U7XHJcblx0XHRcdFx0JC5tb2JpbGUuem9vbS5sb2NrZWQgPSBsb2NrIHx8IGZhbHNlO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cdFx0ZW5hYmxlOiBmdW5jdGlvbiggdW5sb2NrICkge1xyXG5cdFx0XHRpZiAoICFkaXNhYmxlZEluaXRpYWxseSAmJiAoICEkLm1vYmlsZS56b29tLmxvY2tlZCB8fCB1bmxvY2sgPT09IHRydWUgKSApIHtcclxuXHRcdFx0XHRtZXRhLmF0dHIoIFwiY29udGVudFwiLCBlbmFibGVkWm9vbSApO1xyXG5cdFx0XHRcdCQubW9iaWxlLnpvb20uZW5hYmxlZCA9IHRydWU7XHJcblx0XHRcdFx0JC5tb2JpbGUuem9vbS5sb2NrZWQgPSBmYWxzZTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHRcdHJlc3RvcmU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpZiAoICFkaXNhYmxlZEluaXRpYWxseSApIHtcclxuXHRcdFx0XHRtZXRhLmF0dHIoIFwiY29udGVudFwiLCBpbml0aWFsQ29udGVudCApO1xyXG5cdFx0XHRcdCQubW9iaWxlLnpvb20uZW5hYmxlZCA9IHRydWU7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9KTtcclxuXHJcbn0oIGpRdWVyeSApKTtcclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxuJC53aWRnZXQoIFwibW9iaWxlLnRleHRpbnB1dFwiLCB7XHJcblx0aW5pdFNlbGVjdG9yOiBcImlucHV0W3R5cGU9J3RleHQnXSxcIiArXHJcblx0XHRcImlucHV0W3R5cGU9J3NlYXJjaCddLFwiICtcclxuXHRcdFwiOmpxbURhdGEodHlwZT0nc2VhcmNoJyksXCIgK1xyXG5cdFx0XCJpbnB1dFt0eXBlPSdudW1iZXInXSxcIiArXHJcblx0XHRcIjpqcW1EYXRhKHR5cGU9J251bWJlcicpLFwiICtcclxuXHRcdFwiaW5wdXRbdHlwZT0ncGFzc3dvcmQnXSxcIiArXHJcblx0XHRcImlucHV0W3R5cGU9J2VtYWlsJ10sXCIgK1xyXG5cdFx0XCJpbnB1dFt0eXBlPSd1cmwnXSxcIiArXHJcblx0XHRcImlucHV0W3R5cGU9J3RlbCddLFwiICtcclxuXHRcdFwidGV4dGFyZWEsXCIgK1xyXG5cdFx0XCJpbnB1dFt0eXBlPSd0aW1lJ10sXCIgK1xyXG5cdFx0XCJpbnB1dFt0eXBlPSdkYXRlJ10sXCIgK1xyXG5cdFx0XCJpbnB1dFt0eXBlPSdtb250aCddLFwiICtcclxuXHRcdFwiaW5wdXRbdHlwZT0nd2VlayddLFwiICtcclxuXHRcdFwiaW5wdXRbdHlwZT0nZGF0ZXRpbWUnXSxcIiArXHJcblx0XHRcImlucHV0W3R5cGU9J2RhdGV0aW1lLWxvY2FsJ10sXCIgK1xyXG5cdFx0XCJpbnB1dFt0eXBlPSdjb2xvciddLFwiICtcclxuXHRcdFwiaW5wdXQ6bm90KFt0eXBlXSksXCIgK1xyXG5cdFx0XCJpbnB1dFt0eXBlPSdmaWxlJ11cIixcclxuXHJcblx0b3B0aW9uczoge1xyXG5cdFx0dGhlbWU6IG51bGwsXHJcblx0XHRjb3JuZXJzOiB0cnVlLFxyXG5cdFx0bWluaTogZmFsc2UsXHJcblx0XHQvLyBUaGlzIG9wdGlvbiBkZWZhdWx0cyB0byB0cnVlIG9uIGlPUyBkZXZpY2VzLlxyXG5cdFx0cHJldmVudEZvY3VzWm9vbTogL2lQaG9uZXxpUGFkfGlQb2QvLnRlc3QoIG5hdmlnYXRvci5wbGF0Zm9ybSApICYmIG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZiggXCJBcHBsZVdlYktpdFwiICkgPiAtMSxcclxuXHRcdHdyYXBwZXJDbGFzczogXCJcIixcclxuXHRcdGVuaGFuY2VkOiBmYWxzZVxyXG5cdH0sXHJcblxyXG5cdF9jcmVhdGU6IGZ1bmN0aW9uKCkge1xyXG5cclxuXHRcdHZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zLFxyXG5cdFx0XHRpc1NlYXJjaCA9IHRoaXMuZWxlbWVudC5pcyggXCJbdHlwZT0nc2VhcmNoJ10sIDpqcW1EYXRhKHR5cGU9J3NlYXJjaCcpXCIgKSxcclxuXHRcdFx0aXNUZXh0YXJlYSA9IHRoaXMuZWxlbWVudFsgMCBdLnRhZ05hbWUgPT09IFwiVEVYVEFSRUFcIixcclxuXHRcdFx0aXNSYW5nZSA9IHRoaXMuZWxlbWVudC5pcyggXCJbZGF0YS1cIiArICggJC5tb2JpbGUubnMgfHwgXCJcIiApICsgXCJ0eXBlPSdyYW5nZSddXCIgKSxcclxuXHRcdFx0aW5wdXROZWVkc1dyYXAgPSAoICh0aGlzLmVsZW1lbnQuaXMoIFwiaW5wdXRcIiApIHx8XHJcblx0XHRcdFx0dGhpcy5lbGVtZW50LmlzKCBcIltkYXRhLVwiICsgKCAkLm1vYmlsZS5ucyB8fCBcIlwiICkgKyBcInR5cGU9J3NlYXJjaCddXCIgKSApICYmXHJcblx0XHRcdFx0XHQhaXNSYW5nZSApO1xyXG5cclxuXHRcdGlmICggdGhpcy5lbGVtZW50LnByb3AoIFwiZGlzYWJsZWRcIiApICkge1xyXG5cdFx0XHRvcHRpb25zLmRpc2FibGVkID0gdHJ1ZTtcclxuXHRcdH1cclxuXHJcblx0XHQkLmV4dGVuZCggdGhpcywge1xyXG5cdFx0XHRjbGFzc2VzOiB0aGlzLl9jbGFzc2VzRnJvbU9wdGlvbnMoKSxcclxuXHRcdFx0aXNTZWFyY2g6IGlzU2VhcmNoLFxyXG5cdFx0XHRpc1RleHRhcmVhOiBpc1RleHRhcmVhLFxyXG5cdFx0XHRpc1JhbmdlOiBpc1JhbmdlLFxyXG5cdFx0XHRpbnB1dE5lZWRzV3JhcDogaW5wdXROZWVkc1dyYXBcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMuX2F1dG9Db3JyZWN0KCk7XHJcblxyXG5cdFx0aWYgKCAhb3B0aW9ucy5lbmhhbmNlZCApIHtcclxuXHRcdFx0dGhpcy5fZW5oYW5jZSgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX29uKCB7XHJcblx0XHRcdFwiZm9jdXNcIjogXCJfaGFuZGxlRm9jdXNcIixcclxuXHRcdFx0XCJibHVyXCI6IFwiX2hhbmRsZUJsdXJcIlxyXG5cdFx0fSk7XHJcblxyXG5cdH0sXHJcblxyXG5cdHJlZnJlc2g6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5zZXRPcHRpb25zKHtcclxuXHRcdFx0XCJkaXNhYmxlZFwiIDogdGhpcy5lbGVtZW50LmlzKCBcIjpkaXNhYmxlZFwiIClcclxuXHRcdH0pO1xyXG5cdH0sXHJcblxyXG5cdF9lbmhhbmNlOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBlbGVtZW50Q2xhc3NlcyA9IFtdO1xyXG5cclxuXHRcdGlmICggdGhpcy5pc1RleHRhcmVhICkge1xyXG5cdFx0XHRlbGVtZW50Q2xhc3Nlcy5wdXNoKCBcInVpLWlucHV0LXRleHRcIiApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggdGhpcy5pc1RleHRhcmVhIHx8IHRoaXMuaXNSYW5nZSApIHtcclxuXHRcdFx0ZWxlbWVudENsYXNzZXMucHVzaCggXCJ1aS1zaGFkb3ctaW5zZXRcIiApO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vXCJzZWFyY2hcIiBhbmQgXCJ0ZXh0XCIgaW5wdXQgd2lkZ2V0c1xyXG5cdFx0aWYgKCB0aGlzLmlucHV0TmVlZHNXcmFwICkge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQud3JhcCggdGhpcy5fd3JhcCgpICk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRlbGVtZW50Q2xhc3NlcyA9IGVsZW1lbnRDbGFzc2VzLmNvbmNhdCggdGhpcy5jbGFzc2VzICk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5lbGVtZW50LmFkZENsYXNzKCBlbGVtZW50Q2xhc3Nlcy5qb2luKCBcIiBcIiApICk7XHJcblx0fSxcclxuXHJcblx0d2lkZ2V0OiBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiAoIHRoaXMuaW5wdXROZWVkc1dyYXAgKSA/IHRoaXMuZWxlbWVudC5wYXJlbnQoKSA6IHRoaXMuZWxlbWVudDtcclxuXHR9LFxyXG5cclxuXHRfY2xhc3Nlc0Zyb21PcHRpb25zOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zLFxyXG5cdFx0XHRjbGFzc2VzID0gW107XHJcblxyXG5cdFx0Y2xhc3Nlcy5wdXNoKCBcInVpLWJvZHktXCIgKyAoICggb3B0aW9ucy50aGVtZSA9PT0gbnVsbCApID8gXCJpbmhlcml0XCIgOiBvcHRpb25zLnRoZW1lICkgKTtcclxuXHRcdGlmICggb3B0aW9ucy5jb3JuZXJzICkge1xyXG5cdFx0XHRjbGFzc2VzLnB1c2goIFwidWktY29ybmVyLWFsbFwiICk7XHJcblx0XHR9XHJcblx0XHRpZiAoIG9wdGlvbnMubWluaSApIHtcclxuXHRcdFx0Y2xhc3Nlcy5wdXNoKCBcInVpLW1pbmlcIiApO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCBvcHRpb25zLmRpc2FibGVkICkge1xyXG5cdFx0XHRjbGFzc2VzLnB1c2goIFwidWktc3RhdGUtZGlzYWJsZWRcIiApO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCBvcHRpb25zLndyYXBwZXJDbGFzcyApIHtcclxuXHRcdFx0Y2xhc3Nlcy5wdXNoKCBvcHRpb25zLndyYXBwZXJDbGFzcyApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBjbGFzc2VzO1xyXG5cdH0sXHJcblxyXG5cdF93cmFwOiBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiAkKCBcIjxkaXYgY2xhc3M9J1wiICtcclxuXHRcdFx0KCB0aGlzLmlzU2VhcmNoID8gXCJ1aS1pbnB1dC1zZWFyY2ggXCIgOiBcInVpLWlucHV0LXRleHQgXCIgKSArXHJcblx0XHRcdHRoaXMuY2xhc3Nlcy5qb2luKCBcIiBcIiApICsgXCIgXCIgK1xyXG5cdFx0XHRcInVpLXNoYWRvdy1pbnNldCc+PC9kaXY+XCIgKTtcclxuXHR9LFxyXG5cclxuXHRfYXV0b0NvcnJlY3Q6IGZ1bmN0aW9uKCkge1xyXG5cdFx0Ly8gWFhYOiBUZW1wb3Jhcnkgd29ya2Fyb3VuZCBmb3IgaXNzdWUgNzg1IChBcHBsZSBidWcgODkxMDU4OSkuXHJcblx0XHQvLyAgICAgIFR1cm4gb2ZmIGF1dG9jb3JyZWN0IGFuZCBhdXRvY29tcGxldGUgb24gbm9uLWlPUyA1IGRldmljZXNcclxuXHRcdC8vICAgICAgc2luY2UgdGhlIHBvcHVwIHRoZXkgdXNlIGNhbid0IGJlIGRpc21pc3NlZCBieSB0aGUgdXNlci4gTm90ZVxyXG5cdFx0Ly8gICAgICB0aGF0IHdlIHRlc3QgZm9yIHRoZSBwcmVzZW5jZSBvZiB0aGUgZmVhdHVyZSBieSBsb29raW5nIGZvclxyXG5cdFx0Ly8gICAgICB0aGUgYXV0b2NvcnJlY3QgcHJvcGVydHkgb24gdGhlIGlucHV0IGVsZW1lbnQuIFdlIGN1cnJlbnRseVxyXG5cdFx0Ly8gICAgICBoYXZlIG5vIHRlc3QgZm9yIGlPUyA1IG9yIG5ld2VyIHNvIHdlJ3JlIHRlbXBvcmFyaWx5IHVzaW5nXHJcblx0XHQvLyAgICAgIHRoZSB0b3VjaE92ZXJmbG93IHN1cHBvcnQgZmxhZyBmb3IgalFNIDEuMC4gWWVzLCBJIGZlZWwgZGlydHkuXHJcblx0XHQvLyAgICAgIC0gamJsYXNcclxuXHRcdGlmICggdHlwZW9mIHRoaXMuZWxlbWVudFswXS5hdXRvY29ycmVjdCAhPT0gXCJ1bmRlZmluZWRcIiAmJlxyXG5cdFx0XHQhJC5zdXBwb3J0LnRvdWNoT3ZlcmZsb3cgKSB7XHJcblxyXG5cdFx0XHQvLyBTZXQgdGhlIGF0dHJpYnV0ZSBpbnN0ZWFkIG9mIHRoZSBwcm9wZXJ0eSBqdXN0IGluIGNhc2UgdGhlcmVcclxuXHRcdFx0Ly8gaXMgY29kZSB0aGF0IGF0dGVtcHRzIHRvIG1ha2UgbW9kaWZpY2F0aW9ucyB2aWEgSFRNTC5cclxuXHRcdFx0dGhpcy5lbGVtZW50WzBdLnNldEF0dHJpYnV0ZSggXCJhdXRvY29ycmVjdFwiLCBcIm9mZlwiICk7XHJcblx0XHRcdHRoaXMuZWxlbWVudFswXS5zZXRBdHRyaWJ1dGUoIFwiYXV0b2NvbXBsZXRlXCIsIFwib2ZmXCIgKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfaGFuZGxlQmx1cjogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLndpZGdldCgpLnJlbW92ZUNsYXNzKCAkLm1vYmlsZS5mb2N1c0NsYXNzICk7XHJcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5wcmV2ZW50Rm9jdXNab29tICkge1xyXG5cdFx0XHQkLm1vYmlsZS56b29tLmVuYWJsZSggdHJ1ZSApO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9oYW5kbGVGb2N1czogZnVuY3Rpb24oKSB7XHJcblx0XHQvLyBJbiBtYW55IHNpdHVhdGlvbnMsIGlPUyB3aWxsIHpvb20gaW50byB0aGUgaW5wdXQgdXBvbiB0YXAsIHRoaXNcclxuXHRcdC8vIHByZXZlbnRzIHRoYXQgZnJvbSBoYXBwZW5pbmdcclxuXHRcdGlmICggdGhpcy5vcHRpb25zLnByZXZlbnRGb2N1c1pvb20gKSB7XHJcblx0XHRcdCQubW9iaWxlLnpvb20uZGlzYWJsZSggdHJ1ZSApO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy53aWRnZXQoKS5hZGRDbGFzcyggJC5tb2JpbGUuZm9jdXNDbGFzcyApO1xyXG5cdH0sXHJcblxyXG5cdF9zZXRPcHRpb25zOiBmdW5jdGlvbiAoIG9wdGlvbnMgKSB7XHJcblx0XHR2YXIgb3V0ZXIgPSB0aGlzLndpZGdldCgpO1xyXG5cclxuXHRcdHRoaXMuX3N1cGVyKCBvcHRpb25zICk7XHJcblxyXG5cdFx0aWYgKCAhKCBvcHRpb25zLmRpc2FibGVkID09PSB1bmRlZmluZWQgJiZcclxuXHRcdFx0b3B0aW9ucy5taW5pID09PSB1bmRlZmluZWQgJiZcclxuXHRcdFx0b3B0aW9ucy5jb3JuZXJzID09PSB1bmRlZmluZWQgJiZcclxuXHRcdFx0b3B0aW9ucy50aGVtZSA9PT0gdW5kZWZpbmVkICYmXHJcblx0XHRcdG9wdGlvbnMud3JhcHBlckNsYXNzID09PSB1bmRlZmluZWQgKSApIHtcclxuXHJcblx0XHRcdG91dGVyLnJlbW92ZUNsYXNzKCB0aGlzLmNsYXNzZXMuam9pbiggXCIgXCIgKSApO1xyXG5cdFx0XHR0aGlzLmNsYXNzZXMgPSB0aGlzLl9jbGFzc2VzRnJvbU9wdGlvbnMoKTtcclxuXHRcdFx0b3V0ZXIuYWRkQ2xhc3MoIHRoaXMuY2xhc3Nlcy5qb2luKCBcIiBcIiApICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBvcHRpb25zLmRpc2FibGVkICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudC5wcm9wKCBcImRpc2FibGVkXCIsICEhb3B0aW9ucy5kaXNhYmxlZCApO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9kZXN0cm95OiBmdW5jdGlvbigpIHtcclxuXHRcdGlmICggdGhpcy5vcHRpb25zLmVuaGFuY2VkICkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblx0XHRpZiAoIHRoaXMuaW5wdXROZWVkc1dyYXAgKSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudC51bndyYXAoKTtcclxuXHRcdH1cclxuXHRcdHRoaXMuZWxlbWVudC5yZW1vdmVDbGFzcyggXCJ1aS1pbnB1dC10ZXh0IFwiICsgdGhpcy5jbGFzc2VzLmpvaW4oIFwiIFwiICkgKTtcclxuXHR9XHJcbn0pO1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG4kLndpZGdldCggXCJtb2JpbGUuc2xpZGVyXCIsICQuZXh0ZW5kKCB7XHJcblx0aW5pdFNlbGVjdG9yOiBcImlucHV0W3R5cGU9J3JhbmdlJ10sIDpqcW1EYXRhKHR5cGU9J3JhbmdlJyksIDpqcW1EYXRhKHJvbGU9J3NsaWRlcicpXCIsXHJcblxyXG5cdHdpZGdldEV2ZW50UHJlZml4OiBcInNsaWRlXCIsXHJcblxyXG5cdG9wdGlvbnM6IHtcclxuXHRcdHRoZW1lOiBudWxsLFxyXG5cdFx0dHJhY2tUaGVtZTogbnVsbCxcclxuXHRcdGNvcm5lcnM6IHRydWUsXHJcblx0XHRtaW5pOiBmYWxzZSxcclxuXHRcdGhpZ2hsaWdodDogZmFsc2VcclxuXHR9LFxyXG5cclxuXHRfY3JlYXRlOiBmdW5jdGlvbigpIHtcclxuXHJcblx0XHQvLyBUT0RPOiBFYWNoIG9mIHRoZXNlIHNob3VsZCBoYXZlIGNvbW1lbnRzIGV4cGxhaW4gd2hhdCB0aGV5J3JlIGZvclxyXG5cdFx0dmFyIHNlbGYgPSB0aGlzLFxyXG5cdFx0XHRjb250cm9sID0gdGhpcy5lbGVtZW50LFxyXG5cdFx0XHR0cmFja1RoZW1lID0gdGhpcy5vcHRpb25zLnRyYWNrVGhlbWUgfHwgJC5tb2JpbGUuZ2V0QXR0cmlidXRlKCBjb250cm9sWyAwIF0sIFwidGhlbWVcIiApLFxyXG5cdFx0XHR0cmFja1RoZW1lQ2xhc3MgPSB0cmFja1RoZW1lID8gXCIgdWktYmFyLVwiICsgdHJhY2tUaGVtZSA6IFwiIHVpLWJhci1pbmhlcml0XCIsXHJcblx0XHRcdGNvcm5lckNsYXNzID0gKCB0aGlzLm9wdGlvbnMuY29ybmVycyB8fCBjb250cm9sLmpxbURhdGEoIFwiY29ybmVyc1wiICkgKSA/IFwiIHVpLWNvcm5lci1hbGxcIiA6IFwiXCIsXHJcblx0XHRcdG1pbmlDbGFzcyA9ICggdGhpcy5vcHRpb25zLm1pbmkgfHwgY29udHJvbC5qcW1EYXRhKCBcIm1pbmlcIiApICkgPyBcIiB1aS1taW5pXCIgOiBcIlwiLFxyXG5cdFx0XHRjVHlwZSA9IGNvbnRyb2xbIDAgXS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLFxyXG5cdFx0XHRpc1RvZ2dsZVN3aXRjaCA9ICggY1R5cGUgPT09IFwic2VsZWN0XCIgKSxcclxuXHRcdFx0aXNSYW5nZXNsaWRlciA9IGNvbnRyb2wucGFyZW50KCkuaXMoIFwiOmpxbURhdGEocm9sZT0ncmFuZ2VzbGlkZXInKVwiICksXHJcblx0XHRcdHNlbGVjdENsYXNzID0gKCBpc1RvZ2dsZVN3aXRjaCApID8gXCJ1aS1zbGlkZXItc3dpdGNoXCIgOiBcIlwiLFxyXG5cdFx0XHRjb250cm9sSUQgPSBjb250cm9sLmF0dHIoIFwiaWRcIiApLFxyXG5cdFx0XHQkbGFiZWwgPSAkKCBcIltmb3I9J1wiICsgY29udHJvbElEICsgXCInXVwiICksXHJcblx0XHRcdGxhYmVsSUQgPSAkbGFiZWwuYXR0ciggXCJpZFwiICkgfHwgY29udHJvbElEICsgXCItbGFiZWxcIixcclxuXHRcdFx0bWluID0gIWlzVG9nZ2xlU3dpdGNoID8gcGFyc2VGbG9hdCggY29udHJvbC5hdHRyKCBcIm1pblwiICkgKSA6IDAsXHJcblx0XHRcdG1heCA9ICAhaXNUb2dnbGVTd2l0Y2ggPyBwYXJzZUZsb2F0KCBjb250cm9sLmF0dHIoIFwibWF4XCIgKSApIDogY29udHJvbC5maW5kKCBcIm9wdGlvblwiICkubGVuZ3RoLTEsXHJcblx0XHRcdHN0ZXAgPSB3aW5kb3cucGFyc2VGbG9hdCggY29udHJvbC5hdHRyKCBcInN0ZXBcIiApIHx8IDEgKSxcclxuXHRcdFx0ZG9tSGFuZGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJhXCIgKSxcclxuXHRcdFx0aGFuZGxlID0gJCggZG9tSGFuZGxlICksXHJcblx0XHRcdGRvbVNsaWRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiZGl2XCIgKSxcclxuXHRcdFx0c2xpZGVyID0gJCggZG9tU2xpZGVyICksXHJcblx0XHRcdHZhbHVlYmcgPSB0aGlzLm9wdGlvbnMuaGlnaGxpZ2h0ICYmICFpc1RvZ2dsZVN3aXRjaCA/IChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR2YXIgYmcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImRpdlwiICk7XHJcblx0XHRcdFx0YmcuY2xhc3NOYW1lID0gXCJ1aS1zbGlkZXItYmcgXCIgKyAkLm1vYmlsZS5hY3RpdmVCdG5DbGFzcztcclxuXHRcdFx0XHRyZXR1cm4gJCggYmcgKS5wcmVwZW5kVG8oIHNsaWRlciApO1xyXG5cdFx0XHR9KSgpIDogZmFsc2UsXHJcblx0XHRcdG9wdGlvbnMsXHJcblx0XHRcdHdyYXBwZXIsXHJcblx0XHRcdGosIGxlbmd0aCxcclxuXHRcdFx0aSwgb3B0aW9uc0NvdW50LCBvcmlnVGFiSW5kZXgsXHJcblx0XHRcdHNpZGUsIGFjdGl2ZUNsYXNzLCBzbGlkZXJJbWc7XHJcblxyXG5cdFx0JGxhYmVsLmF0dHIoIFwiaWRcIiwgbGFiZWxJRCApO1xyXG5cdFx0dGhpcy5pc1RvZ2dsZVN3aXRjaCA9IGlzVG9nZ2xlU3dpdGNoO1xyXG5cclxuXHRcdGRvbUhhbmRsZS5zZXRBdHRyaWJ1dGUoIFwiaHJlZlwiLCBcIiNcIiApO1xyXG5cdFx0ZG9tU2xpZGVyLnNldEF0dHJpYnV0ZSggXCJyb2xlXCIsIFwiYXBwbGljYXRpb25cIiApO1xyXG5cdFx0ZG9tU2xpZGVyLmNsYXNzTmFtZSA9IFsgdGhpcy5pc1RvZ2dsZVN3aXRjaCA/IFwidWktc2xpZGVyIHVpLXNsaWRlci10cmFjayB1aS1zaGFkb3ctaW5zZXQgXCIgOiBcInVpLXNsaWRlci10cmFjayB1aS1zaGFkb3ctaW5zZXQgXCIsIHNlbGVjdENsYXNzLCB0cmFja1RoZW1lQ2xhc3MsIGNvcm5lckNsYXNzLCBtaW5pQ2xhc3MgXS5qb2luKCBcIlwiICk7XHJcblx0XHRkb21IYW5kbGUuY2xhc3NOYW1lID0gXCJ1aS1zbGlkZXItaGFuZGxlXCI7XHJcblx0XHRkb21TbGlkZXIuYXBwZW5kQ2hpbGQoIGRvbUhhbmRsZSApO1xyXG5cclxuXHRcdGhhbmRsZS5hdHRyKHtcclxuXHRcdFx0XCJyb2xlXCI6IFwic2xpZGVyXCIsXHJcblx0XHRcdFwiYXJpYS12YWx1ZW1pblwiOiBtaW4sXHJcblx0XHRcdFwiYXJpYS12YWx1ZW1heFwiOiBtYXgsXHJcblx0XHRcdFwiYXJpYS12YWx1ZW5vd1wiOiB0aGlzLl92YWx1ZSgpLFxyXG5cdFx0XHRcImFyaWEtdmFsdWV0ZXh0XCI6IHRoaXMuX3ZhbHVlKCksXHJcblx0XHRcdFwidGl0bGVcIjogdGhpcy5fdmFsdWUoKSxcclxuXHRcdFx0XCJhcmlhLWxhYmVsbGVkYnlcIjogbGFiZWxJRFxyXG5cdFx0fSk7XHJcblxyXG5cdFx0JC5leHRlbmQoIHRoaXMsIHtcclxuXHRcdFx0c2xpZGVyOiBzbGlkZXIsXHJcblx0XHRcdGhhbmRsZTogaGFuZGxlLFxyXG5cdFx0XHRjb250cm9sOiBjb250cm9sLFxyXG5cdFx0XHR0eXBlOiBjVHlwZSxcclxuXHRcdFx0c3RlcDogc3RlcCxcclxuXHRcdFx0bWF4OiBtYXgsXHJcblx0XHRcdG1pbjogbWluLFxyXG5cdFx0XHR2YWx1ZWJnOiB2YWx1ZWJnLFxyXG5cdFx0XHRpc1Jhbmdlc2xpZGVyOiBpc1Jhbmdlc2xpZGVyLFxyXG5cdFx0XHRkcmFnZ2luZzogZmFsc2UsXHJcblx0XHRcdGJlZm9yZVN0YXJ0OiBudWxsLFxyXG5cdFx0XHR1c2VyTW9kaWZpZWQ6IGZhbHNlLFxyXG5cdFx0XHRtb3VzZU1vdmVkOiBmYWxzZVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0aWYgKCBpc1RvZ2dsZVN3aXRjaCApIHtcclxuXHRcdFx0Ly8gVE9ETzogcmVzdG9yZSBvcmlnaW5hbCB0YWJpbmRleCAoaWYgYW55KSBpbiBhIGRlc3Ryb3kgbWV0aG9kXHJcblx0XHRcdG9yaWdUYWJJbmRleCA9IGNvbnRyb2wuYXR0ciggXCJ0YWJpbmRleFwiICk7XHJcblx0XHRcdGlmICggb3JpZ1RhYkluZGV4ICkge1xyXG5cdFx0XHRcdGhhbmRsZS5hdHRyKCBcInRhYmluZGV4XCIsIG9yaWdUYWJJbmRleCApO1xyXG5cdFx0XHR9XHJcblx0XHRcdGNvbnRyb2wuYXR0ciggXCJ0YWJpbmRleFwiLCBcIi0xXCIgKS5mb2N1cyhmdW5jdGlvbigpIHtcclxuXHRcdFx0XHQkKCB0aGlzICkuYmx1cigpO1xyXG5cdFx0XHRcdGhhbmRsZS5mb2N1cygpO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdHdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImRpdlwiICk7XHJcblx0XHRcdHdyYXBwZXIuY2xhc3NOYW1lID0gXCJ1aS1zbGlkZXItaW5uZXJvZmZzZXRcIjtcclxuXHJcblx0XHRcdGZvciAoIGogPSAwLCBsZW5ndGggPSBkb21TbGlkZXIuY2hpbGROb2Rlcy5sZW5ndGg7IGogPCBsZW5ndGg7IGorKyApIHtcclxuXHRcdFx0XHR3cmFwcGVyLmFwcGVuZENoaWxkKCBkb21TbGlkZXIuY2hpbGROb2Rlc1tqXSApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRkb21TbGlkZXIuYXBwZW5kQ2hpbGQoIHdyYXBwZXIgKTtcclxuXHJcblx0XHRcdC8vIHNsaWRlci53cmFwSW5uZXIoIFwiPGRpdiBjbGFzcz0ndWktc2xpZGVyLWlubmVyb2Zmc2V0Jz48L2Rpdj5cIiApO1xyXG5cclxuXHRcdFx0Ly8gbWFrZSB0aGUgaGFuZGxlIG1vdmUgd2l0aCBhIHNtb290aCB0cmFuc2l0aW9uXHJcblx0XHRcdGhhbmRsZS5hZGRDbGFzcyggXCJ1aS1zbGlkZXItaGFuZGxlLXNuYXBwaW5nXCIgKTtcclxuXHJcblx0XHRcdG9wdGlvbnMgPSBjb250cm9sLmZpbmQoIFwib3B0aW9uXCIgKTtcclxuXHJcblx0XHRcdGZvciAoIGkgPSAwLCBvcHRpb25zQ291bnQgPSBvcHRpb25zLmxlbmd0aDsgaSA8IG9wdGlvbnNDb3VudDsgaSsrICkge1xyXG5cdFx0XHRcdHNpZGUgPSAhaSA/IFwiYlwiIDogXCJhXCI7XHJcblx0XHRcdFx0YWN0aXZlQ2xhc3MgPSAhaSA/IFwiXCIgOiBcIiBcIiArICQubW9iaWxlLmFjdGl2ZUJ0bkNsYXNzO1xyXG5cdFx0XHRcdHNsaWRlckltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwic3BhblwiICk7XHJcblxyXG5cdFx0XHRcdHNsaWRlckltZy5jbGFzc05hbWUgPSBbIFwidWktc2xpZGVyLWxhYmVsIHVpLXNsaWRlci1sYWJlbC1cIiwgc2lkZSwgYWN0aXZlQ2xhc3MgXS5qb2luKCBcIlwiICk7XHJcblx0XHRcdFx0c2xpZGVySW1nLnNldEF0dHJpYnV0ZSggXCJyb2xlXCIsIFwiaW1nXCIgKTtcclxuXHRcdFx0XHRzbGlkZXJJbWcuYXBwZW5kQ2hpbGQoIGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCBvcHRpb25zW2ldLmlubmVySFRNTCApICk7XHJcblx0XHRcdFx0JCggc2xpZGVySW1nICkucHJlcGVuZFRvKCBzbGlkZXIgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0c2VsZi5fbGFiZWxzID0gJCggXCIudWktc2xpZGVyLWxhYmVsXCIsIHNsaWRlciApO1xyXG5cclxuXHRcdH1cclxuXHJcblx0XHQvLyBtb25pdG9yIHRoZSBpbnB1dCBmb3IgdXBkYXRlZCB2YWx1ZXNcclxuXHRcdGNvbnRyb2wuYWRkQ2xhc3MoIGlzVG9nZ2xlU3dpdGNoID8gXCJ1aS1zbGlkZXItc3dpdGNoXCIgOiBcInVpLXNsaWRlci1pbnB1dFwiICk7XHJcblxyXG5cdFx0dGhpcy5fb24oIGNvbnRyb2wsIHtcclxuXHRcdFx0XCJjaGFuZ2VcIjogXCJfY29udHJvbENoYW5nZVwiLFxyXG5cdFx0XHRcImtleXVwXCI6IFwiX2NvbnRyb2xLZXl1cFwiLFxyXG5cdFx0XHRcImJsdXJcIjogXCJfY29udHJvbEJsdXJcIixcclxuXHRcdFx0XCJ2bW91c2V1cFwiOiBcIl9jb250cm9sVk1vdXNlVXBcIlxyXG5cdFx0fSk7XHJcblxyXG5cdFx0c2xpZGVyLmJpbmQoIFwidm1vdXNlZG93blwiLCAkLnByb3h5KCB0aGlzLl9zbGlkZXJWTW91c2VEb3duLCB0aGlzICkgKVxyXG5cdFx0XHQuYmluZCggXCJ2Y2xpY2tcIiwgZmFsc2UgKTtcclxuXHJcblx0XHQvLyBXZSBoYXZlIHRvIGluc3RhbnRpYXRlIGEgbmV3IGZ1bmN0aW9uIG9iamVjdCBmb3IgdGhlIHVuYmluZCB0byB3b3JrIHByb3Blcmx5XHJcblx0XHQvLyBzaW5jZSB0aGUgbWV0aG9kIGl0c2VsZiBpcyBkZWZpbmVkIGluIHRoZSBwcm90b3R5cGUgKGNhdXNpbmcgaXQgdG8gdW5iaW5kIGV2ZXJ5dGhpbmcpXHJcblx0XHR0aGlzLl9vbiggZG9jdW1lbnQsIHsgXCJ2bW91c2Vtb3ZlXCI6IFwiX3ByZXZlbnREb2N1bWVudERyYWdcIiB9KTtcclxuXHRcdHRoaXMuX29uKCBzbGlkZXIuYWRkKCBkb2N1bWVudCApLCB7IFwidm1vdXNldXBcIjogXCJfc2xpZGVyVk1vdXNlVXBcIiB9KTtcclxuXHJcblx0XHRzbGlkZXIuaW5zZXJ0QWZ0ZXIoIGNvbnRyb2wgKTtcclxuXHJcblx0XHQvLyB3cmFwIGluIGEgZGl2IGZvciBzdHlsaW5nIHB1cnBvc2VzXHJcblx0XHRpZiAoICFpc1RvZ2dsZVN3aXRjaCAmJiAhaXNSYW5nZXNsaWRlciApIHtcclxuXHRcdFx0d3JhcHBlciA9IHRoaXMub3B0aW9ucy5taW5pID8gXCI8ZGl2IGNsYXNzPSd1aS1zbGlkZXIgdWktbWluaSc+XCIgOiBcIjxkaXYgY2xhc3M9J3VpLXNsaWRlcic+XCI7XHJcblxyXG5cdFx0XHRjb250cm9sLmFkZCggc2xpZGVyICkud3JhcEFsbCggd3JhcHBlciApO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIGJpbmQgdGhlIGhhbmRsZSBldmVudCBjYWxsYmFja3MgYW5kIHNldCB0aGUgY29udGV4dCB0byB0aGUgd2lkZ2V0IGluc3RhbmNlXHJcblx0XHR0aGlzLl9vbiggdGhpcy5oYW5kbGUsIHtcclxuXHRcdFx0XCJ2bW91c2Vkb3duXCI6IFwiX2hhbmRsZVZNb3VzZURvd25cIixcclxuXHRcdFx0XCJrZXlkb3duXCI6IFwiX2hhbmRsZUtleWRvd25cIixcclxuXHRcdFx0XCJrZXl1cFwiOiBcIl9oYW5kbGVLZXl1cFwiXHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLmhhbmRsZS5iaW5kKCBcInZjbGlja1wiLCBmYWxzZSApO1xyXG5cclxuXHRcdHRoaXMuX2hhbmRsZUZvcm1SZXNldCgpO1xyXG5cclxuXHRcdHRoaXMucmVmcmVzaCggdW5kZWZpbmVkLCB1bmRlZmluZWQsIHRydWUgKTtcclxuXHR9LFxyXG5cclxuXHRfc2V0T3B0aW9uczogZnVuY3Rpb24oIG9wdGlvbnMgKSB7XHJcblx0XHRpZiAoIG9wdGlvbnMudGhlbWUgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0dGhpcy5fc2V0VGhlbWUoIG9wdGlvbnMudGhlbWUgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG9wdGlvbnMudHJhY2tUaGVtZSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHR0aGlzLl9zZXRUcmFja1RoZW1lKCBvcHRpb25zLnRyYWNrVGhlbWUgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG9wdGlvbnMuY29ybmVycyAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHR0aGlzLl9zZXRDb3JuZXJzKCBvcHRpb25zLmNvcm5lcnMgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG9wdGlvbnMubWluaSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHR0aGlzLl9zZXRNaW5pKCBvcHRpb25zLm1pbmkgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG9wdGlvbnMuaGlnaGxpZ2h0ICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdHRoaXMuX3NldEhpZ2hsaWdodCggb3B0aW9ucy5oaWdobGlnaHQgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG9wdGlvbnMuZGlzYWJsZWQgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0dGhpcy5fc2V0RGlzYWJsZWQoIG9wdGlvbnMuZGlzYWJsZWQgKTtcclxuXHRcdH1cclxuXHRcdHRoaXMuX3N1cGVyKCBvcHRpb25zICk7XHJcblx0fSxcclxuXHJcblx0X2NvbnRyb2xDaGFuZ2U6IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdC8vIGlmIHRoZSB1c2VyIGRyYWdnZWQgdGhlIGhhbmRsZSwgdGhlIFwiY2hhbmdlXCIgZXZlbnQgd2FzIHRyaWdnZXJlZCBmcm9tIGluc2lkZSByZWZyZXNoKCk7IGRvbid0IGNhbGwgcmVmcmVzaCgpIGFnYWluXHJcblx0XHRpZiAoIHRoaXMuX3RyaWdnZXIoIFwiY29udHJvbGNoYW5nZVwiLCBldmVudCApID09PSBmYWxzZSApIHtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCAhdGhpcy5tb3VzZU1vdmVkICkge1xyXG5cdFx0XHR0aGlzLnJlZnJlc2goIHRoaXMuX3ZhbHVlKCksIHRydWUgKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfY29udHJvbEtleXVwOiBmdW5jdGlvbigvKiBldmVudCAqLykgeyAvLyBuZWNlc3Nhcnk/XHJcblx0XHR0aGlzLnJlZnJlc2goIHRoaXMuX3ZhbHVlKCksIHRydWUsIHRydWUgKTtcclxuXHR9LFxyXG5cclxuXHRfY29udHJvbEJsdXI6IGZ1bmN0aW9uKC8qIGV2ZW50ICovKSB7XHJcblx0XHR0aGlzLnJlZnJlc2goIHRoaXMuX3ZhbHVlKCksIHRydWUgKTtcclxuXHR9LFxyXG5cclxuXHQvLyBpdCBhcHBlYXJzIHRoZSBjbGlja2luZyB0aGUgdXAgYW5kIGRvd24gYnV0dG9ucyBpbiBjaHJvbWUgb25cclxuXHQvLyByYW5nZS9udW1iZXIgaW5wdXRzIGRvZXNuJ3QgdHJpZ2dlciBhIGNoYW5nZSB1bnRpbCB0aGUgZmllbGQgaXNcclxuXHQvLyBibHVycmVkLiBIZXJlIHdlIGNoZWNrIHRoaWYgdGhlIHZhbHVlIGhhcyBjaGFuZ2VkIGFuZCByZWZyZXNoXHJcblx0X2NvbnRyb2xWTW91c2VVcDogZnVuY3Rpb24oLyogZXZlbnQgKi8pIHtcclxuXHRcdHRoaXMuX2NoZWNrZWRSZWZyZXNoKCk7XHJcblx0fSxcclxuXHJcblx0Ly8gTk9URSBmb3JjZSBmb2N1cyBvbiBoYW5kbGVcclxuXHRfaGFuZGxlVk1vdXNlRG93bjogZnVuY3Rpb24oLyogZXZlbnQgKi8pIHtcclxuXHRcdHRoaXMuaGFuZGxlLmZvY3VzKCk7XHJcblx0fSxcclxuXHJcblx0X2hhbmRsZUtleWRvd246IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdHZhciBpbmRleCA9IHRoaXMuX3ZhbHVlKCk7XHJcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5kaXNhYmxlZCApIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEluIGFsbCBjYXNlcyBwcmV2ZW50IHRoZSBkZWZhdWx0IGFuZCBtYXJrIHRoZSBoYW5kbGUgYXMgYWN0aXZlXHJcblx0XHRzd2l0Y2ggKCBldmVudC5rZXlDb2RlICkge1xyXG5cdFx0XHRjYXNlICQubW9iaWxlLmtleUNvZGUuSE9NRTpcclxuXHRcdFx0Y2FzZSAkLm1vYmlsZS5rZXlDb2RlLkVORDpcclxuXHRcdFx0Y2FzZSAkLm1vYmlsZS5rZXlDb2RlLlBBR0VfVVA6XHJcblx0XHRcdGNhc2UgJC5tb2JpbGUua2V5Q29kZS5QQUdFX0RPV046XHJcblx0XHRcdGNhc2UgJC5tb2JpbGUua2V5Q29kZS5VUDpcclxuXHRcdFx0Y2FzZSAkLm1vYmlsZS5rZXlDb2RlLlJJR0hUOlxyXG5cdFx0XHRjYXNlICQubW9iaWxlLmtleUNvZGUuRE9XTjpcclxuXHRcdFx0Y2FzZSAkLm1vYmlsZS5rZXlDb2RlLkxFRlQ6XHJcblx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcblx0XHRcdFx0aWYgKCAhdGhpcy5fa2V5U2xpZGluZyApIHtcclxuXHRcdFx0XHRcdHRoaXMuX2tleVNsaWRpbmcgPSB0cnVlO1xyXG5cdFx0XHRcdFx0dGhpcy5oYW5kbGUuYWRkQ2xhc3MoIFwidWktc3RhdGUtYWN0aXZlXCIgKTsgLyogVE9ETzogV2UgZG9uJ3QgdXNlIHRoaXMgY2xhc3MgZm9yIHN0eWxpbmcuIERvIHdlIG5lZWQgdG8gYWRkIGl0PyAqL1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gbW92ZSB0aGUgc2xpZGVyIGFjY29yZGluZyB0byB0aGUga2V5cHJlc3NcclxuXHRcdHN3aXRjaCAoIGV2ZW50LmtleUNvZGUgKSB7XHJcblx0XHRcdGNhc2UgJC5tb2JpbGUua2V5Q29kZS5IT01FOlxyXG5cdFx0XHRcdHRoaXMucmVmcmVzaCggdGhpcy5taW4gKTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSAkLm1vYmlsZS5rZXlDb2RlLkVORDpcclxuXHRcdFx0XHR0aGlzLnJlZnJlc2goIHRoaXMubWF4ICk7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgJC5tb2JpbGUua2V5Q29kZS5QQUdFX1VQOlxyXG5cdFx0XHRjYXNlICQubW9iaWxlLmtleUNvZGUuVVA6XHJcblx0XHRcdGNhc2UgJC5tb2JpbGUua2V5Q29kZS5SSUdIVDpcclxuXHRcdFx0XHR0aGlzLnJlZnJlc2goIGluZGV4ICsgdGhpcy5zdGVwICk7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgJC5tb2JpbGUua2V5Q29kZS5QQUdFX0RPV046XHJcblx0XHRcdGNhc2UgJC5tb2JpbGUua2V5Q29kZS5ET1dOOlxyXG5cdFx0XHRjYXNlICQubW9iaWxlLmtleUNvZGUuTEVGVDpcclxuXHRcdFx0XHR0aGlzLnJlZnJlc2goIGluZGV4IC0gdGhpcy5zdGVwICk7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHR9XHJcblx0fSwgLy8gcmVtb3ZlIGFjdGl2ZSBtYXJrXHJcblxyXG5cdF9oYW5kbGVLZXl1cDogZnVuY3Rpb24oLyogZXZlbnQgKi8pIHtcclxuXHRcdGlmICggdGhpcy5fa2V5U2xpZGluZyApIHtcclxuXHRcdFx0dGhpcy5fa2V5U2xpZGluZyA9IGZhbHNlO1xyXG5cdFx0XHR0aGlzLmhhbmRsZS5yZW1vdmVDbGFzcyggXCJ1aS1zdGF0ZS1hY3RpdmVcIiApOyAvKiBTZWUgY29tbWVudCBhYm92ZS4gKi9cclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfc2xpZGVyVk1vdXNlRG93bjogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0Ly8gTk9URTogd2UgZG9uJ3QgZG8gdGhpcyBpbiByZWZyZXNoIGJlY2F1c2Ugd2Ugc3RpbGwgd2FudCB0b1xyXG5cdFx0Ly8gICAgICAgc3VwcG9ydCBwcm9ncmFtbWF0aWMgYWx0ZXJhdGlvbiBvZiBkaXNhYmxlZCBpbnB1dHNcclxuXHRcdGlmICggdGhpcy5vcHRpb25zLmRpc2FibGVkIHx8ICEoIGV2ZW50LndoaWNoID09PSAxIHx8IGV2ZW50LndoaWNoID09PSAwIHx8IGV2ZW50LndoaWNoID09PSB1bmRlZmluZWQgKSApIHtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCB0aGlzLl90cmlnZ2VyKCBcImJlZm9yZXN0YXJ0XCIsIGV2ZW50ICkgPT09IGZhbHNlICkge1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblx0XHR0aGlzLmRyYWdnaW5nID0gdHJ1ZTtcclxuXHRcdHRoaXMudXNlck1vZGlmaWVkID0gZmFsc2U7XHJcblx0XHR0aGlzLm1vdXNlTW92ZWQgPSBmYWxzZTtcclxuXHJcblx0XHRpZiAoIHRoaXMuaXNUb2dnbGVTd2l0Y2ggKSB7XHJcblx0XHRcdHRoaXMuYmVmb3JlU3RhcnQgPSB0aGlzLmVsZW1lbnRbMF0uc2VsZWN0ZWRJbmRleDtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLnJlZnJlc2goIGV2ZW50ICk7XHJcblx0XHR0aGlzLl90cmlnZ2VyKCBcInN0YXJ0XCIgKTtcclxuXHRcdHJldHVybiBmYWxzZTtcclxuXHR9LFxyXG5cclxuXHRfc2xpZGVyVk1vdXNlVXA6IGZ1bmN0aW9uKCkge1xyXG5cdFx0aWYgKCB0aGlzLmRyYWdnaW5nICkge1xyXG5cdFx0XHR0aGlzLmRyYWdnaW5nID0gZmFsc2U7XHJcblxyXG5cdFx0XHRpZiAoIHRoaXMuaXNUb2dnbGVTd2l0Y2ggKSB7XHJcblx0XHRcdFx0Ly8gbWFrZSB0aGUgaGFuZGxlIG1vdmUgd2l0aCBhIHNtb290aCB0cmFuc2l0aW9uXHJcblx0XHRcdFx0dGhpcy5oYW5kbGUuYWRkQ2xhc3MoIFwidWktc2xpZGVyLWhhbmRsZS1zbmFwcGluZ1wiICk7XHJcblxyXG5cdFx0XHRcdGlmICggdGhpcy5tb3VzZU1vdmVkICkge1xyXG5cdFx0XHRcdFx0Ly8gdGhpcyBpcyBhIGRyYWcsIGNoYW5nZSB0aGUgdmFsdWUgb25seSBpZiB1c2VyIGRyYWdnZWQgZW5vdWdoXHJcblx0XHRcdFx0XHRpZiAoIHRoaXMudXNlck1vZGlmaWVkICkge1xyXG5cdFx0XHRcdFx0XHR0aGlzLnJlZnJlc2goIHRoaXMuYmVmb3JlU3RhcnQgPT09IDAgPyAxIDogMCApO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0dGhpcy5yZWZyZXNoKCB0aGlzLmJlZm9yZVN0YXJ0ICk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdC8vIHRoaXMgaXMganVzdCBhIGNsaWNrLCBjaGFuZ2UgdGhlIHZhbHVlXHJcblx0XHRcdFx0XHR0aGlzLnJlZnJlc2goIHRoaXMuYmVmb3JlU3RhcnQgPT09IDAgPyAxIDogMCApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dGhpcy5tb3VzZU1vdmVkID0gZmFsc2U7XHJcblx0XHRcdHRoaXMuX3RyaWdnZXIoIFwic3RvcFwiICk7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfcHJldmVudERvY3VtZW50RHJhZzogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0XHQvLyBOT1RFOiB3ZSBkb24ndCBkbyB0aGlzIGluIHJlZnJlc2ggYmVjYXVzZSB3ZSBzdGlsbCB3YW50IHRvXHJcblx0XHRcdC8vICAgICAgIHN1cHBvcnQgcHJvZ3JhbW1hdGljIGFsdGVyYXRpb24gb2YgZGlzYWJsZWQgaW5wdXRzXHJcblx0XHRcdGlmICggdGhpcy5fdHJpZ2dlciggXCJkcmFnXCIsIGV2ZW50ICkgPT09IGZhbHNlKSB7XHJcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICggdGhpcy5kcmFnZ2luZyAmJiAhdGhpcy5vcHRpb25zLmRpc2FibGVkICkge1xyXG5cclxuXHRcdFx0XHQvLyB0aGlzLm1vdXNlTW92ZWQgbXVzdCBiZSB1cGRhdGVkIGJlZm9yZSByZWZyZXNoKCkgYmVjYXVzZSBpdCB3aWxsIGJlIHVzZWQgaW4gdGhlIGNvbnRyb2wgXCJjaGFuZ2VcIiBldmVudFxyXG5cdFx0XHRcdHRoaXMubW91c2VNb3ZlZCA9IHRydWU7XHJcblxyXG5cdFx0XHRcdGlmICggdGhpcy5pc1RvZ2dsZVN3aXRjaCApIHtcclxuXHRcdFx0XHRcdC8vIG1ha2UgdGhlIGhhbmRsZSBtb3ZlIGluIHN5bmMgd2l0aCB0aGUgbW91c2VcclxuXHRcdFx0XHRcdHRoaXMuaGFuZGxlLnJlbW92ZUNsYXNzKCBcInVpLXNsaWRlci1oYW5kbGUtc25hcHBpbmdcIiApO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0dGhpcy5yZWZyZXNoKCBldmVudCApO1xyXG5cclxuXHRcdFx0XHQvLyBvbmx5IGFmdGVyIHJlZnJlc2goKSB5b3UgY2FuIGNhbGN1bGF0ZSB0aGlzLnVzZXJNb2RpZmllZFxyXG5cdFx0XHRcdHRoaXMudXNlck1vZGlmaWVkID0gdGhpcy5iZWZvcmVTdGFydCAhPT0gdGhpcy5lbGVtZW50WzBdLnNlbGVjdGVkSW5kZXg7XHJcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHRfY2hlY2tlZFJlZnJlc2g6IGZ1bmN0aW9uKCkge1xyXG5cdFx0aWYgKCB0aGlzLnZhbHVlICE9PSB0aGlzLl92YWx1ZSgpICkge1xyXG5cdFx0XHR0aGlzLnJlZnJlc2goIHRoaXMuX3ZhbHVlKCkgKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfdmFsdWU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuICB0aGlzLmlzVG9nZ2xlU3dpdGNoID8gdGhpcy5lbGVtZW50WzBdLnNlbGVjdGVkSW5kZXggOiBwYXJzZUZsb2F0KCB0aGlzLmVsZW1lbnQudmFsKCkgKSA7XHJcblx0fSxcclxuXHJcblx0X3Jlc2V0OiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMucmVmcmVzaCggdW5kZWZpbmVkLCBmYWxzZSwgdHJ1ZSApO1xyXG5cdH0sXHJcblxyXG5cdHJlZnJlc2g6IGZ1bmN0aW9uKCB2YWwsIGlzZnJvbUNvbnRyb2wsIHByZXZlbnRJbnB1dFVwZGF0ZSApIHtcclxuXHRcdC8vIE5PVEU6IHdlIGRvbid0IHJldHVybiBoZXJlIGJlY2F1c2Ugd2Ugd2FudCB0byBzdXBwb3J0IHByb2dyYW1tYXRpY1xyXG5cdFx0Ly8gICAgICAgYWx0ZXJhdGlvbiBvZiB0aGUgaW5wdXQgdmFsdWUsIHdoaWNoIHNob3VsZCBzdGlsbCB1cGRhdGUgdGhlIHNsaWRlclxyXG5cclxuXHRcdHZhciBzZWxmID0gdGhpcyxcclxuXHRcdFx0cGFyZW50VGhlbWUgPSAkLm1vYmlsZS5nZXRBdHRyaWJ1dGUoIHRoaXMuZWxlbWVudFsgMCBdLCBcInRoZW1lXCIgKSxcclxuXHRcdFx0dGhlbWUgPSB0aGlzLm9wdGlvbnMudGhlbWUgfHwgcGFyZW50VGhlbWUsXHJcblx0XHRcdHRoZW1lQ2xhc3MgPSAgdGhlbWUgPyBcIiB1aS1idG4tXCIgKyB0aGVtZSA6IFwiXCIsXHJcblx0XHRcdHRyYWNrVGhlbWUgPSB0aGlzLm9wdGlvbnMudHJhY2tUaGVtZSB8fCBwYXJlbnRUaGVtZSxcclxuXHRcdFx0dHJhY2tUaGVtZUNsYXNzID0gdHJhY2tUaGVtZSA/IFwiIHVpLWJhci1cIiArIHRyYWNrVGhlbWUgOiBcIiB1aS1iYXItaW5oZXJpdFwiLFxyXG5cdFx0XHRjb3JuZXJDbGFzcyA9IHRoaXMub3B0aW9ucy5jb3JuZXJzID8gXCIgdWktY29ybmVyLWFsbFwiIDogXCJcIixcclxuXHRcdFx0bWluaUNsYXNzID0gdGhpcy5vcHRpb25zLm1pbmkgPyBcIiB1aS1taW5pXCIgOiBcIlwiLFxyXG5cdFx0XHRsZWZ0LCB3aWR0aCwgZGF0YSwgdG9sLFxyXG5cdFx0XHRweFN0ZXAsIHBlcmNlbnQsXHJcblx0XHRcdGNvbnRyb2wsIGlzSW5wdXQsIG9wdGlvbkVsZW1lbnRzLCBtaW4sIG1heCwgc3RlcCxcclxuXHRcdFx0bmV3dmFsLCB2YWxNb2RTdGVwLCBhbGlnblZhbHVlLCBwZXJjZW50UGVyU3RlcCxcclxuXHRcdFx0aGFuZGxlUGVyY2VudCwgYVBlcmNlbnQsIGJQZXJjZW50LFxyXG5cdFx0XHR2YWx1ZUNoYW5nZWQ7XHJcblxyXG5cdFx0c2VsZi5zbGlkZXJbMF0uY2xhc3NOYW1lID0gWyB0aGlzLmlzVG9nZ2xlU3dpdGNoID8gXCJ1aS1zbGlkZXIgdWktc2xpZGVyLXN3aXRjaCB1aS1zbGlkZXItdHJhY2sgdWktc2hhZG93LWluc2V0XCIgOiBcInVpLXNsaWRlci10cmFjayB1aS1zaGFkb3ctaW5zZXRcIiwgdHJhY2tUaGVtZUNsYXNzLCBjb3JuZXJDbGFzcywgbWluaUNsYXNzIF0uam9pbiggXCJcIiApO1xyXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMuZGlzYWJsZWQgfHwgdGhpcy5lbGVtZW50LnByb3AoIFwiZGlzYWJsZWRcIiApICkge1xyXG5cdFx0XHR0aGlzLmRpc2FibGUoKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBzZXQgdGhlIHN0b3JlZCB2YWx1ZSBmb3IgY29tcGFyaXNvbiBsYXRlclxyXG5cdFx0dGhpcy52YWx1ZSA9IHRoaXMuX3ZhbHVlKCk7XHJcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5oaWdobGlnaHQgJiYgIXRoaXMuaXNUb2dnbGVTd2l0Y2ggJiYgdGhpcy5zbGlkZXIuZmluZCggXCIudWktc2xpZGVyLWJnXCIgKS5sZW5ndGggPT09IDAgKSB7XHJcblx0XHRcdHRoaXMudmFsdWViZyA9IChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR2YXIgYmcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImRpdlwiICk7XHJcblx0XHRcdFx0YmcuY2xhc3NOYW1lID0gXCJ1aS1zbGlkZXItYmcgXCIgKyAkLm1vYmlsZS5hY3RpdmVCdG5DbGFzcztcclxuXHRcdFx0XHRyZXR1cm4gJCggYmcgKS5wcmVwZW5kVG8oIHNlbGYuc2xpZGVyICk7XHJcblx0XHRcdH0pKCk7XHJcblx0XHR9XHJcblx0XHR0aGlzLmhhbmRsZS5hZGRDbGFzcyggXCJ1aS1idG5cIiArIHRoZW1lQ2xhc3MgKyBcIiB1aS1zaGFkb3dcIiApO1xyXG5cclxuXHRcdGNvbnRyb2wgPSB0aGlzLmVsZW1lbnQ7XHJcblx0XHRpc0lucHV0ID0gIXRoaXMuaXNUb2dnbGVTd2l0Y2g7XHJcblx0XHRvcHRpb25FbGVtZW50cyA9IGlzSW5wdXQgPyBbXSA6IGNvbnRyb2wuZmluZCggXCJvcHRpb25cIiApO1xyXG5cdFx0bWluID0gIGlzSW5wdXQgPyBwYXJzZUZsb2F0KCBjb250cm9sLmF0dHIoIFwibWluXCIgKSApIDogMDtcclxuXHRcdG1heCA9IGlzSW5wdXQgPyBwYXJzZUZsb2F0KCBjb250cm9sLmF0dHIoIFwibWF4XCIgKSApIDogb3B0aW9uRWxlbWVudHMubGVuZ3RoIC0gMTtcclxuXHRcdHN0ZXAgPSAoIGlzSW5wdXQgJiYgcGFyc2VGbG9hdCggY29udHJvbC5hdHRyKCBcInN0ZXBcIiApICkgPiAwICkgPyBwYXJzZUZsb2F0KCBjb250cm9sLmF0dHIoIFwic3RlcFwiICkgKSA6IDE7XHJcblxyXG5cdFx0aWYgKCB0eXBlb2YgdmFsID09PSBcIm9iamVjdFwiICkge1xyXG5cdFx0XHRkYXRhID0gdmFsO1xyXG5cdFx0XHQvLyBhIHNsaWdodCB0b2xlcmFuY2UgaGVscGVkIGdldCB0byB0aGUgZW5kcyBvZiB0aGUgc2xpZGVyXHJcblx0XHRcdHRvbCA9IDg7XHJcblxyXG5cdFx0XHRsZWZ0ID0gdGhpcy5zbGlkZXIub2Zmc2V0KCkubGVmdDtcclxuXHRcdFx0d2lkdGggPSB0aGlzLnNsaWRlci53aWR0aCgpO1xyXG5cdFx0XHRweFN0ZXAgPSB3aWR0aC8oKG1heC1taW4pL3N0ZXApO1xyXG5cdFx0XHRpZiAoICF0aGlzLmRyYWdnaW5nIHx8XHJcblx0XHRcdFx0XHRkYXRhLnBhZ2VYIDwgbGVmdCAtIHRvbCB8fFxyXG5cdFx0XHRcdFx0ZGF0YS5wYWdlWCA+IGxlZnQgKyB3aWR0aCArIHRvbCApIHtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKCBweFN0ZXAgPiAxICkge1xyXG5cdFx0XHRcdHBlcmNlbnQgPSAoICggZGF0YS5wYWdlWCAtIGxlZnQgKSAvIHdpZHRoICkgKiAxMDA7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0cGVyY2VudCA9IE1hdGgucm91bmQoICggKCBkYXRhLnBhZ2VYIC0gbGVmdCApIC8gd2lkdGggKSAqIDEwMCApO1xyXG5cdFx0XHR9XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRpZiAoIHZhbCA9PSBudWxsICkge1xyXG5cdFx0XHRcdHZhbCA9IGlzSW5wdXQgPyBwYXJzZUZsb2F0KCBjb250cm9sLnZhbCgpIHx8IDAgKSA6IGNvbnRyb2xbMF0uc2VsZWN0ZWRJbmRleDtcclxuXHRcdFx0fVxyXG5cdFx0XHRwZXJjZW50ID0gKCBwYXJzZUZsb2F0KCB2YWwgKSAtIG1pbiApIC8gKCBtYXggLSBtaW4gKSAqIDEwMDtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIGlzTmFOKCBwZXJjZW50ICkgKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHRuZXd2YWwgPSAoIHBlcmNlbnQgLyAxMDAgKSAqICggbWF4IC0gbWluICkgKyBtaW47XHJcblxyXG5cdFx0Ly9mcm9tIGpRdWVyeSBVSSBzbGlkZXIsIHRoZSBmb2xsb3dpbmcgc291cmNlIHdpbGwgcm91bmQgdG8gdGhlIG5lYXJlc3Qgc3RlcFxyXG5cdFx0dmFsTW9kU3RlcCA9ICggbmV3dmFsIC0gbWluICkgJSBzdGVwO1xyXG5cdFx0YWxpZ25WYWx1ZSA9IG5ld3ZhbCAtIHZhbE1vZFN0ZXA7XHJcblxyXG5cdFx0aWYgKCBNYXRoLmFicyggdmFsTW9kU3RlcCApICogMiA+PSBzdGVwICkge1xyXG5cdFx0XHRhbGlnblZhbHVlICs9ICggdmFsTW9kU3RlcCA+IDAgKSA/IHN0ZXAgOiAoIC1zdGVwICk7XHJcblx0XHR9XHJcblxyXG5cdFx0cGVyY2VudFBlclN0ZXAgPSAxMDAvKChtYXgtbWluKS9zdGVwKTtcclxuXHRcdC8vIFNpbmNlIEphdmFTY3JpcHQgaGFzIHByb2JsZW1zIHdpdGggbGFyZ2UgZmxvYXRzLCByb3VuZFxyXG5cdFx0Ly8gdGhlIGZpbmFsIHZhbHVlIHRvIDUgZGlnaXRzIGFmdGVyIHRoZSBkZWNpbWFsIHBvaW50IChzZWUgalF1ZXJ5VUk6ICM0MTI0KVxyXG5cdFx0bmV3dmFsID0gcGFyc2VGbG9hdCggYWxpZ25WYWx1ZS50b0ZpeGVkKDUpICk7XHJcblxyXG5cdFx0aWYgKCB0eXBlb2YgcHhTdGVwID09PSBcInVuZGVmaW5lZFwiICkge1xyXG5cdFx0XHRweFN0ZXAgPSB3aWR0aCAvICggKG1heC1taW4pIC8gc3RlcCApO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCBweFN0ZXAgPiAxICYmIGlzSW5wdXQgKSB7XHJcblx0XHRcdHBlcmNlbnQgPSAoIG5ld3ZhbCAtIG1pbiApICogcGVyY2VudFBlclN0ZXAgKiAoIDEgLyBzdGVwICk7XHJcblx0XHR9XHJcblx0XHRpZiAoIHBlcmNlbnQgPCAwICkge1xyXG5cdFx0XHRwZXJjZW50ID0gMDtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIHBlcmNlbnQgPiAxMDAgKSB7XHJcblx0XHRcdHBlcmNlbnQgPSAxMDA7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBuZXd2YWwgPCBtaW4gKSB7XHJcblx0XHRcdG5ld3ZhbCA9IG1pbjtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG5ld3ZhbCA+IG1heCApIHtcclxuXHRcdFx0bmV3dmFsID0gbWF4O1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuaGFuZGxlLmNzcyggXCJsZWZ0XCIsIHBlcmNlbnQgKyBcIiVcIiApO1xyXG5cclxuXHRcdHRoaXMuaGFuZGxlWzBdLnNldEF0dHJpYnV0ZSggXCJhcmlhLXZhbHVlbm93XCIsIGlzSW5wdXQgPyBuZXd2YWwgOiBvcHRpb25FbGVtZW50cy5lcSggbmV3dmFsICkuYXR0ciggXCJ2YWx1ZVwiICkgKTtcclxuXHJcblx0XHR0aGlzLmhhbmRsZVswXS5zZXRBdHRyaWJ1dGUoIFwiYXJpYS12YWx1ZXRleHRcIiwgaXNJbnB1dCA/IG5ld3ZhbCA6IG9wdGlvbkVsZW1lbnRzLmVxKCBuZXd2YWwgKS5nZXRFbmNvZGVkVGV4dCgpICk7XHJcblxyXG5cdFx0dGhpcy5oYW5kbGVbMF0uc2V0QXR0cmlidXRlKCBcInRpdGxlXCIsIGlzSW5wdXQgPyBuZXd2YWwgOiBvcHRpb25FbGVtZW50cy5lcSggbmV3dmFsICkuZ2V0RW5jb2RlZFRleHQoKSApO1xyXG5cclxuXHRcdGlmICggdGhpcy52YWx1ZWJnICkge1xyXG5cdFx0XHR0aGlzLnZhbHVlYmcuY3NzKCBcIndpZHRoXCIsIHBlcmNlbnQgKyBcIiVcIiApO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIGRyYWcgdGhlIGxhYmVsIHdpZHRoc1xyXG5cdFx0aWYgKCB0aGlzLl9sYWJlbHMgKSB7XHJcblx0XHRcdGhhbmRsZVBlcmNlbnQgPSB0aGlzLmhhbmRsZS53aWR0aCgpIC8gdGhpcy5zbGlkZXIud2lkdGgoKSAqIDEwMDtcclxuXHRcdFx0YVBlcmNlbnQgPSBwZXJjZW50ICYmIGhhbmRsZVBlcmNlbnQgKyAoIDEwMCAtIGhhbmRsZVBlcmNlbnQgKSAqIHBlcmNlbnQgLyAxMDA7XHJcblx0XHRcdGJQZXJjZW50ID0gcGVyY2VudCA9PT0gMTAwID8gMCA6IE1hdGgubWluKCBoYW5kbGVQZXJjZW50ICsgMTAwIC0gYVBlcmNlbnQsIDEwMCApO1xyXG5cclxuXHRcdFx0dGhpcy5fbGFiZWxzLmVhY2goZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0dmFyIGFiID0gJCggdGhpcyApLmhhc0NsYXNzKCBcInVpLXNsaWRlci1sYWJlbC1hXCIgKTtcclxuXHRcdFx0XHQkKCB0aGlzICkud2lkdGgoICggYWIgPyBhUGVyY2VudCA6IGJQZXJjZW50ICApICsgXCIlXCIgKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCAhcHJldmVudElucHV0VXBkYXRlICkge1xyXG5cdFx0XHR2YWx1ZUNoYW5nZWQgPSBmYWxzZTtcclxuXHJcblx0XHRcdC8vIHVwZGF0ZSBjb250cm9sXCJzIHZhbHVlXHJcblx0XHRcdGlmICggaXNJbnB1dCApIHtcclxuXHRcdFx0XHR2YWx1ZUNoYW5nZWQgPSBwYXJzZUZsb2F0KCBjb250cm9sLnZhbCgpICkgIT09IG5ld3ZhbDtcclxuXHRcdFx0XHRjb250cm9sLnZhbCggbmV3dmFsICk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0dmFsdWVDaGFuZ2VkID0gY29udHJvbFsgMCBdLnNlbGVjdGVkSW5kZXggIT09IG5ld3ZhbDtcclxuXHRcdFx0XHRjb250cm9sWyAwIF0uc2VsZWN0ZWRJbmRleCA9IG5ld3ZhbDtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoIHRoaXMuX3RyaWdnZXIoIFwiYmVmb3JlY2hhbmdlXCIsIHZhbCApID09PSBmYWxzZSkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICggIWlzZnJvbUNvbnRyb2wgJiYgdmFsdWVDaGFuZ2VkICkge1xyXG5cdFx0XHRcdGNvbnRyb2wudHJpZ2dlciggXCJjaGFuZ2VcIiApO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X3NldEhpZ2hsaWdodDogZnVuY3Rpb24oIHZhbHVlICkge1xyXG5cdFx0dmFsdWUgPSAhIXZhbHVlO1xyXG5cdFx0aWYgKCB2YWx1ZSApIHtcclxuXHRcdFx0dGhpcy5vcHRpb25zLmhpZ2hsaWdodCA9ICEhdmFsdWU7XHJcblx0XHRcdHRoaXMucmVmcmVzaCgpO1xyXG5cdFx0fSBlbHNlIGlmICggdGhpcy52YWx1ZWJnICkge1xyXG5cdFx0XHR0aGlzLnZhbHVlYmcucmVtb3ZlKCk7XHJcblx0XHRcdHRoaXMudmFsdWViZyA9IGZhbHNlO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9zZXRUaGVtZTogZnVuY3Rpb24oIHZhbHVlICkge1xyXG5cdFx0dGhpcy5oYW5kbGVcclxuXHRcdFx0LnJlbW92ZUNsYXNzKCBcInVpLWJ0bi1cIiArIHRoaXMub3B0aW9ucy50aGVtZSApXHJcblx0XHRcdC5hZGRDbGFzcyggXCJ1aS1idG4tXCIgKyB2YWx1ZSApO1xyXG5cclxuXHRcdHZhciBjdXJyZW50VGhlbWUgPSB0aGlzLm9wdGlvbnMudGhlbWUgPyB0aGlzLm9wdGlvbnMudGhlbWUgOiBcImluaGVyaXRcIixcclxuXHRcdFx0bmV3VGhlbWUgPSB2YWx1ZSA/IHZhbHVlIDogXCJpbmhlcml0XCI7XHJcblxyXG5cdFx0dGhpcy5jb250cm9sXHJcblx0XHRcdC5yZW1vdmVDbGFzcyggXCJ1aS1ib2R5LVwiICsgY3VycmVudFRoZW1lIClcclxuXHRcdFx0LmFkZENsYXNzKCBcInVpLWJvZHktXCIgKyBuZXdUaGVtZSApO1xyXG5cdH0sXHJcblxyXG5cdF9zZXRUcmFja1RoZW1lOiBmdW5jdGlvbiggdmFsdWUgKSB7XHJcblx0XHR2YXIgY3VycmVudFRyYWNrVGhlbWUgPSB0aGlzLm9wdGlvbnMudHJhY2tUaGVtZSA/IHRoaXMub3B0aW9ucy50cmFja1RoZW1lIDogXCJpbmhlcml0XCIsXHJcblx0XHRcdG5ld1RyYWNrVGhlbWUgPSB2YWx1ZSA/IHZhbHVlIDogXCJpbmhlcml0XCI7XHJcblxyXG5cdFx0dGhpcy5zbGlkZXJcclxuXHRcdFx0LnJlbW92ZUNsYXNzKCBcInVpLWJvZHktXCIgKyBjdXJyZW50VHJhY2tUaGVtZSApXHJcblx0XHRcdC5hZGRDbGFzcyggXCJ1aS1ib2R5LVwiICsgbmV3VHJhY2tUaGVtZSApO1xyXG5cdH0sXHJcblxyXG5cdF9zZXRNaW5pOiBmdW5jdGlvbiggdmFsdWUgKSB7XHJcblx0XHR2YWx1ZSA9ICEhdmFsdWU7XHJcblx0XHRpZiAoICF0aGlzLmlzVG9nZ2xlU3dpdGNoICYmICF0aGlzLmlzUmFuZ2VzbGlkZXIgKSB7XHJcblx0XHRcdHRoaXMuc2xpZGVyLnBhcmVudCgpLnRvZ2dsZUNsYXNzKCBcInVpLW1pbmlcIiwgdmFsdWUgKTtcclxuXHRcdFx0dGhpcy5lbGVtZW50LnRvZ2dsZUNsYXNzKCBcInVpLW1pbmlcIiwgdmFsdWUgKTtcclxuXHRcdH1cclxuXHRcdHRoaXMuc2xpZGVyLnRvZ2dsZUNsYXNzKCBcInVpLW1pbmlcIiwgdmFsdWUgKTtcclxuXHR9LFxyXG5cclxuXHRfc2V0Q29ybmVyczogZnVuY3Rpb24oIHZhbHVlICkge1xyXG5cdFx0dGhpcy5zbGlkZXIudG9nZ2xlQ2xhc3MoIFwidWktY29ybmVyLWFsbFwiLCB2YWx1ZSApO1xyXG5cclxuXHRcdGlmICggIXRoaXMuaXNUb2dnbGVTd2l0Y2ggKSB7XHJcblx0XHRcdHRoaXMuY29udHJvbC50b2dnbGVDbGFzcyggXCJ1aS1jb3JuZXItYWxsXCIsIHZhbHVlICk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X3NldERpc2FibGVkOiBmdW5jdGlvbiggdmFsdWUgKSB7XHJcblx0XHR2YWx1ZSA9ICEhdmFsdWU7XHJcblx0XHR0aGlzLmVsZW1lbnQucHJvcCggXCJkaXNhYmxlZFwiLCB2YWx1ZSApO1xyXG5cdFx0dGhpcy5zbGlkZXJcclxuXHRcdFx0LnRvZ2dsZUNsYXNzKCBcInVpLXN0YXRlLWRpc2FibGVkXCIsIHZhbHVlIClcclxuXHRcdFx0LmF0dHIoIFwiYXJpYS1kaXNhYmxlZFwiLCB2YWx1ZSApO1xyXG5cclxuXHRcdHRoaXMuZWxlbWVudC50b2dnbGVDbGFzcyggXCJ1aS1zdGF0ZS1kaXNhYmxlZFwiLCB2YWx1ZSApO1xyXG5cdH1cclxuXHJcbn0sICQubW9iaWxlLmJlaGF2aW9ycy5mb3JtUmVzZXQgKSApO1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG52YXIgcG9wdXA7XHJcblxyXG5mdW5jdGlvbiBnZXRQb3B1cCgpIHtcclxuXHRpZiAoICFwb3B1cCApIHtcclxuXHRcdHBvcHVwID0gJCggXCI8ZGl2PjwvZGl2PlwiLCB7XHJcblx0XHRcdFwiY2xhc3NcIjogXCJ1aS1zbGlkZXItcG9wdXAgdWktc2hhZG93IHVpLWNvcm5lci1hbGxcIlxyXG5cdFx0fSk7XHJcblx0fVxyXG5cdHJldHVybiBwb3B1cC5jbG9uZSgpO1xyXG59XHJcblxyXG4kLndpZGdldCggXCJtb2JpbGUuc2xpZGVyXCIsICQubW9iaWxlLnNsaWRlciwge1xyXG5cdG9wdGlvbnM6IHtcclxuXHRcdHBvcHVwRW5hYmxlZDogZmFsc2UsXHJcblx0XHRzaG93VmFsdWU6IGZhbHNlXHJcblx0fSxcclxuXHJcblx0X2NyZWF0ZTogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9zdXBlcigpO1xyXG5cclxuXHRcdCQuZXh0ZW5kKCB0aGlzLCB7XHJcblx0XHRcdF9jdXJyZW50VmFsdWU6IG51bGwsXHJcblx0XHRcdF9wb3B1cDogbnVsbCxcclxuXHRcdFx0X3BvcHVwVmlzaWJsZTogZmFsc2VcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMuX3NldE9wdGlvbiggXCJwb3B1cEVuYWJsZWRcIiwgdGhpcy5vcHRpb25zLnBvcHVwRW5hYmxlZCApO1xyXG5cclxuXHRcdHRoaXMuX29uKCB0aGlzLmhhbmRsZSwgeyBcInZtb3VzZWRvd25cIiA6IFwiX3Nob3dQb3B1cFwiIH0gKTtcclxuXHRcdHRoaXMuX29uKCB0aGlzLnNsaWRlci5hZGQoIHRoaXMuZG9jdW1lbnQgKSwgeyBcInZtb3VzZXVwXCIgOiBcIl9oaWRlUG9wdXBcIiB9ICk7XHJcblx0XHR0aGlzLl9yZWZyZXNoKCk7XHJcblx0fSxcclxuXHJcblx0Ly8gcG9zaXRpb24gdGhlIHBvcHVwIGNlbnRlcmVkIDVweCBhYm92ZSB0aGUgaGFuZGxlXHJcblx0X3Bvc2l0aW9uUG9wdXA6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGRzdE9mZnNldCA9IHRoaXMuaGFuZGxlLm9mZnNldCgpO1xyXG5cclxuXHRcdHRoaXMuX3BvcHVwLm9mZnNldCgge1xyXG5cdFx0XHRsZWZ0OiBkc3RPZmZzZXQubGVmdCArICggdGhpcy5oYW5kbGUud2lkdGgoKSAtIHRoaXMuX3BvcHVwLndpZHRoKCkgKSAvIDIsXHJcblx0XHRcdHRvcDogZHN0T2Zmc2V0LnRvcCAtIHRoaXMuX3BvcHVwLm91dGVySGVpZ2h0KCkgLSA1XHJcblx0XHR9KTtcclxuXHR9LFxyXG5cclxuXHRfc2V0T3B0aW9uOiBmdW5jdGlvbigga2V5LCB2YWx1ZSApIHtcclxuXHRcdHRoaXMuX3N1cGVyKCBrZXksIHZhbHVlICk7XHJcblxyXG5cdFx0aWYgKCBrZXkgPT09IFwic2hvd1ZhbHVlXCIgKSB7XHJcblx0XHRcdHRoaXMuaGFuZGxlLmh0bWwoIHZhbHVlICYmICF0aGlzLm9wdGlvbnMubWluaSA/IHRoaXMuX3ZhbHVlKCkgOiBcIlwiICk7XHJcblx0XHR9IGVsc2UgaWYgKCBrZXkgPT09IFwicG9wdXBFbmFibGVkXCIgKSB7XHJcblx0XHRcdGlmICggdmFsdWUgJiYgIXRoaXMuX3BvcHVwICkge1xyXG5cdFx0XHRcdHRoaXMuX3BvcHVwID0gZ2V0UG9wdXAoKVxyXG5cdFx0XHRcdFx0LmFkZENsYXNzKCBcInVpLWJvZHktXCIgKyAoIHRoaXMub3B0aW9ucy50aGVtZSB8fCBcImFcIiApIClcclxuXHRcdFx0XHRcdC5oaWRlKClcclxuXHRcdFx0XHRcdC5pbnNlcnRCZWZvcmUoIHRoaXMuZWxlbWVudCApO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0Ly8gc2hvdyB2YWx1ZSBvbiB0aGUgaGFuZGxlIGFuZCBpbiBwb3B1cFxyXG5cdHJlZnJlc2g6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5fc3VwZXIuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xyXG5cdFx0dGhpcy5fcmVmcmVzaCgpO1xyXG5cdH0sXHJcblxyXG5cdF9yZWZyZXNoOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBvID0gdGhpcy5vcHRpb25zLCBuZXdWYWx1ZTtcclxuXHJcblx0XHRpZiAoIG8ucG9wdXBFbmFibGVkICkge1xyXG5cdFx0XHQvLyByZW1vdmUgdGhlIHRpdGxlIGF0dHJpYnV0ZSBmcm9tIHRoZSBoYW5kbGUgKHdoaWNoIGlzXHJcblx0XHRcdC8vIHJlc3BvbnNpYmxlIGZvciB0aGUgYW5ub3lpbmcgdG9vbHRpcCk7IE5CIHdlIGhhdmVcclxuXHRcdFx0Ly8gdG8gZG8gaXQgaGVyZSBhcyB0aGUganFtIHNsaWRlciBzZXRzIGl0IGV2ZXJ5IHRpbWVcclxuXHRcdFx0Ly8gdGhlIHNsaWRlcidzIHZhbHVlIGNoYW5nZXMgOihcclxuXHRcdFx0dGhpcy5oYW5kbGUucmVtb3ZlQXR0ciggXCJ0aXRsZVwiICk7XHJcblx0XHR9XHJcblxyXG5cdFx0bmV3VmFsdWUgPSB0aGlzLl92YWx1ZSgpO1xyXG5cdFx0aWYgKCBuZXdWYWx1ZSA9PT0gdGhpcy5fY3VycmVudFZhbHVlICkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblx0XHR0aGlzLl9jdXJyZW50VmFsdWUgPSBuZXdWYWx1ZTtcclxuXHJcblx0XHRpZiAoIG8ucG9wdXBFbmFibGVkICYmIHRoaXMuX3BvcHVwICkge1xyXG5cdFx0XHR0aGlzLl9wb3NpdGlvblBvcHVwKCk7XHJcblx0XHRcdHRoaXMuX3BvcHVwLmh0bWwoIG5ld1ZhbHVlICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBvLnNob3dWYWx1ZSAmJiAhdGhpcy5vcHRpb25zLm1pbmkgKSB7XHJcblx0XHRcdHRoaXMuaGFuZGxlLmh0bWwoIG5ld1ZhbHVlICk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X3Nob3dQb3B1cDogZnVuY3Rpb24oKSB7XHJcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5wb3B1cEVuYWJsZWQgJiYgIXRoaXMuX3BvcHVwVmlzaWJsZSApIHtcclxuXHRcdFx0dGhpcy5oYW5kbGUuaHRtbCggXCJcIiApO1xyXG5cdFx0XHR0aGlzLl9wb3B1cC5zaG93KCk7XHJcblx0XHRcdHRoaXMuX3Bvc2l0aW9uUG9wdXAoKTtcclxuXHRcdFx0dGhpcy5fcG9wdXBWaXNpYmxlID0gdHJ1ZTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfaGlkZVBvcHVwOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBvID0gdGhpcy5vcHRpb25zO1xyXG5cclxuXHRcdGlmICggby5wb3B1cEVuYWJsZWQgJiYgdGhpcy5fcG9wdXBWaXNpYmxlICkge1xyXG5cdFx0XHRpZiAoIG8uc2hvd1ZhbHVlICYmICFvLm1pbmkgKSB7XHJcblx0XHRcdFx0dGhpcy5oYW5kbGUuaHRtbCggdGhpcy5fdmFsdWUoKSApO1xyXG5cdFx0XHR9XHJcblx0XHRcdHRoaXMuX3BvcHVwLmhpZGUoKTtcclxuXHRcdFx0dGhpcy5fcG9wdXBWaXNpYmxlID0gZmFsc2U7XHJcblx0XHR9XHJcblx0fVxyXG59KTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxuJC53aWRnZXQoIFwibW9iaWxlLmZsaXBzd2l0Y2hcIiwgJC5leHRlbmQoe1xyXG5cclxuXHRvcHRpb25zOiB7XHJcblx0XHRvblRleHQ6IFwiT25cIixcclxuXHRcdG9mZlRleHQ6IFwiT2ZmXCIsXHJcblx0XHR0aGVtZTogbnVsbCxcclxuXHRcdGVuaGFuY2VkOiBmYWxzZSxcclxuXHRcdHdyYXBwZXJDbGFzczogbnVsbCxcclxuXHRcdGNvcm5lcnM6IHRydWUsXHJcblx0XHRtaW5pOiBmYWxzZVxyXG5cdH0sXHJcblxyXG5cdF9jcmVhdGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpZiAoICF0aGlzLm9wdGlvbnMuZW5oYW5jZWQgKSB7XHJcblx0XHRcdFx0dGhpcy5fZW5oYW5jZSgpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdCQuZXh0ZW5kKCB0aGlzLCB7XHJcblx0XHRcdFx0XHRmbGlwc3dpdGNoOiB0aGlzLmVsZW1lbnQucGFyZW50KCksXHJcblx0XHRcdFx0XHRvbjogdGhpcy5lbGVtZW50LmZpbmQoIFwiLnVpLWZsaXBzd2l0Y2gtb25cIiApLmVxKCAwICksXHJcblx0XHRcdFx0XHRvZmY6IHRoaXMuZWxlbWVudC5maW5kKCBcIi51aS1mbGlwc3dpdGNoLW9mZlwiICkuZXEoMCksXHJcblx0XHRcdFx0XHR0eXBlOiB0aGlzLmVsZW1lbnQuZ2V0KCAwICkudGFnTmFtZVxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR0aGlzLl9oYW5kbGVGb3JtUmVzZXQoKTtcclxuXHJcblx0XHRcdC8vIFRyYW5zZmVyIHRhYmluZGV4IHRvIFwib25cIiBlbGVtZW50IGFuZCBtYWtlIGlucHV0IHVuZm9jdXNhYmxlXHJcblx0XHRcdHRoaXMuX29yaWdpbmFsVGFiSW5kZXggPSB0aGlzLmVsZW1lbnQuYXR0ciggXCJ0YWJpbmRleFwiICk7XHJcblx0XHRcdGlmICggdGhpcy5fb3JpZ2luYWxUYWJJbmRleCAhPSBudWxsICkge1xyXG5cdFx0XHRcdHRoaXMub24uYXR0ciggXCJ0YWJpbmRleFwiLCB0aGlzLl9vcmlnaW5hbFRhYkluZGV4ICk7XHJcblx0XHRcdH1cclxuXHRcdFx0dGhpcy5lbGVtZW50LmF0dHIoIFwidGFiaW5kZXhcIiwgXCItMVwiICk7XHJcblx0XHRcdHRoaXMuX29uKHtcclxuXHRcdFx0XHRcImZvY3VzXCIgOiBcIl9oYW5kbGVJbnB1dEZvY3VzXCJcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHRpZiAoIHRoaXMuZWxlbWVudC5pcyggXCI6ZGlzYWJsZWRcIiApICkge1xyXG5cdFx0XHRcdHRoaXMuX3NldE9wdGlvbnMoe1xyXG5cdFx0XHRcdFx0XCJkaXNhYmxlZFwiOiB0cnVlXHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHRoaXMuX29uKCB0aGlzLmZsaXBzd2l0Y2gsIHtcclxuXHRcdFx0XHRcImNsaWNrXCI6IFwiX3RvZ2dsZVwiLFxyXG5cdFx0XHRcdFwic3dpcGVsZWZ0XCI6IFwiX2xlZnRcIixcclxuXHRcdFx0XHRcInN3aXBlcmlnaHRcIjogXCJfcmlnaHRcIlxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdHRoaXMuX29uKCB0aGlzLm9uLCB7XHJcblx0XHRcdFx0XCJrZXlkb3duXCI6IFwiX2tleWRvd25cIlxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdHRoaXMuX29uKCB7XHJcblx0XHRcdFx0XCJjaGFuZ2VcIjogXCJyZWZyZXNoXCJcclxuXHRcdFx0fSk7XHJcblx0fSxcclxuXHJcblx0X2hhbmRsZUlucHV0Rm9jdXM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5vbi5mb2N1cygpO1xyXG5cdH0sXHJcblxyXG5cdHdpZGdldDogZnVuY3Rpb24oKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5mbGlwc3dpdGNoO1xyXG5cdH0sXHJcblxyXG5cdF9sZWZ0OiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuZmxpcHN3aXRjaC5yZW1vdmVDbGFzcyggXCJ1aS1mbGlwc3dpdGNoLWFjdGl2ZVwiICk7XHJcblx0XHRpZiAoIHRoaXMudHlwZSA9PT0gXCJTRUxFQ1RcIiApIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50LmdldCggMCApLnNlbGVjdGVkSW5kZXggPSAwO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50LnByb3AoIFwiY2hlY2tlZFwiLCBmYWxzZSApO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5lbGVtZW50LnRyaWdnZXIoIFwiY2hhbmdlXCIgKTtcclxuXHR9LFxyXG5cclxuXHRfcmlnaHQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5mbGlwc3dpdGNoLmFkZENsYXNzKCBcInVpLWZsaXBzd2l0Y2gtYWN0aXZlXCIgKTtcclxuXHRcdGlmICggdGhpcy50eXBlID09PSBcIlNFTEVDVFwiICkge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQuZ2V0KCAwICkuc2VsZWN0ZWRJbmRleCA9IDE7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQucHJvcCggXCJjaGVja2VkXCIsIHRydWUgKTtcclxuXHRcdH1cclxuXHRcdHRoaXMuZWxlbWVudC50cmlnZ2VyKCBcImNoYW5nZVwiICk7XHJcblx0fSxcclxuXHJcblx0X2VuaGFuY2U6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGZsaXBzd2l0Y2ggPSAkKCBcIjxkaXY+XCIgKSxcclxuXHRcdFx0b3B0aW9ucyA9IHRoaXMub3B0aW9ucyxcclxuXHRcdFx0ZWxlbWVudCA9IHRoaXMuZWxlbWVudCxcclxuXHRcdFx0dGhlbWUgPSBvcHRpb25zLnRoZW1lID8gb3B0aW9ucy50aGVtZSA6IFwiaW5oZXJpdFwiLFxyXG5cclxuXHRcdFx0Ly8gVGhlIFwib25cIiBidXR0b24gaXMgYW4gYW5jaG9yIHNvIGl0J3MgZm9jdXNhYmxlXHJcblx0XHRcdG9uID0gJCggXCI8YT48L2E+XCIsIHtcclxuXHRcdFx0XHRcImhyZWZcIjogXCIjXCJcclxuXHRcdFx0fSksXHJcblx0XHRcdG9mZiA9ICQoIFwiPHNwYW4+PC9zcGFuPlwiICksXHJcblx0XHRcdHR5cGUgPSBlbGVtZW50LmdldCggMCApLnRhZ05hbWUsXHJcblx0XHRcdG9uVGV4dCA9ICggdHlwZSA9PT0gXCJJTlBVVFwiICkgP1xyXG5cdFx0XHRcdG9wdGlvbnMub25UZXh0IDogZWxlbWVudC5maW5kKCBcIm9wdGlvblwiICkuZXEoIDEgKS50ZXh0KCksXHJcblx0XHRcdG9mZlRleHQgPSAoIHR5cGUgPT09IFwiSU5QVVRcIiApID9cclxuXHRcdFx0XHRvcHRpb25zLm9mZlRleHQgOiBlbGVtZW50LmZpbmQoIFwib3B0aW9uXCIgKS5lcSggMCApLnRleHQoKTtcclxuXHJcblx0XHRcdG9uXHJcblx0XHRcdFx0LmFkZENsYXNzKCBcInVpLWZsaXBzd2l0Y2gtb24gdWktYnRuIHVpLXNoYWRvdyB1aS1idG4taW5oZXJpdFwiIClcclxuXHRcdFx0XHQudGV4dCggb25UZXh0ICk7XHJcblx0XHRcdG9mZlxyXG5cdFx0XHRcdC5hZGRDbGFzcyggXCJ1aS1mbGlwc3dpdGNoLW9mZlwiIClcclxuXHRcdFx0XHQudGV4dCggb2ZmVGV4dCApO1xyXG5cclxuXHRcdFx0ZmxpcHN3aXRjaFxyXG5cdFx0XHRcdC5hZGRDbGFzcyggXCJ1aS1mbGlwc3dpdGNoIHVpLXNoYWRvdy1pbnNldCBcIiArXHJcblx0XHRcdFx0XHRcInVpLWJhci1cIiArIHRoZW1lICsgXCIgXCIgK1xyXG5cdFx0XHRcdFx0KCBvcHRpb25zLndyYXBwZXJDbGFzcyA/IG9wdGlvbnMud3JhcHBlckNsYXNzIDogXCJcIiApICsgXCIgXCIgK1xyXG5cdFx0XHRcdFx0KCAoIGVsZW1lbnQuaXMoIFwiOmNoZWNrZWRcIiApIHx8XHJcblx0XHRcdFx0XHRcdGVsZW1lbnRcclxuXHRcdFx0XHRcdFx0XHQuZmluZCggXCJvcHRpb25cIiApXHJcblx0XHRcdFx0XHRcdFx0LmVxKCAxIClcclxuXHRcdFx0XHRcdFx0XHQuaXMoIFwiOnNlbGVjdGVkXCIgKSApID8gXCJ1aS1mbGlwc3dpdGNoLWFjdGl2ZVwiIDogXCJcIiApICtcclxuXHRcdFx0XHRcdCggZWxlbWVudC5pcyhcIjpkaXNhYmxlZFwiKSA/IFwiIHVpLXN0YXRlLWRpc2FibGVkXCI6IFwiXCIpICtcclxuXHRcdFx0XHRcdCggb3B0aW9ucy5jb3JuZXJzID8gXCIgdWktY29ybmVyLWFsbFwiOiBcIlwiICkgK1xyXG5cdFx0XHRcdFx0KCBvcHRpb25zLm1pbmkgPyBcIiB1aS1taW5pXCI6IFwiXCIgKSApXHJcblx0XHRcdFx0LmFwcGVuZCggb24sIG9mZiApO1xyXG5cclxuXHRcdFx0ZWxlbWVudFxyXG5cdFx0XHRcdC5hZGRDbGFzcyggXCJ1aS1mbGlwc3dpdGNoLWlucHV0XCIgKVxyXG5cdFx0XHRcdC5hZnRlciggZmxpcHN3aXRjaCApXHJcblx0XHRcdFx0LmFwcGVuZFRvKCBmbGlwc3dpdGNoICk7XHJcblxyXG5cdFx0JC5leHRlbmQoIHRoaXMsIHtcclxuXHRcdFx0ZmxpcHN3aXRjaDogZmxpcHN3aXRjaCxcclxuXHRcdFx0b246IG9uLFxyXG5cdFx0XHRvZmY6IG9mZixcclxuXHRcdFx0dHlwZTogdHlwZVxyXG5cdFx0fSk7XHJcblx0fSxcclxuXHJcblx0X3Jlc2V0OiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMucmVmcmVzaCgpO1xyXG5cdH0sXHJcblxyXG5cdHJlZnJlc2g6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGRpcmVjdGlvbixcclxuXHRcdFx0ZXhpc3RpbmdEaXJlY3Rpb24gPSB0aGlzLmZsaXBzd2l0Y2guaGFzQ2xhc3MoIFwidWktZmxpcHN3aXRjaC1hY3RpdmVcIiApID8gXCJfcmlnaHRcIiA6IFwiX2xlZnRcIjtcclxuXHJcblx0XHRpZiAoIHRoaXMudHlwZSA9PT0gXCJTRUxFQ1RcIiApIHtcclxuXHRcdFx0ZGlyZWN0aW9uID0gKCB0aGlzLmVsZW1lbnQuZ2V0KCAwICkuc2VsZWN0ZWRJbmRleCA+IDAgKSA/IFwiX3JpZ2h0XCI6IFwiX2xlZnRcIjtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGRpcmVjdGlvbiA9IHRoaXMuZWxlbWVudC5wcm9wKCBcImNoZWNrZWRcIiApID8gXCJfcmlnaHRcIjogXCJfbGVmdFwiO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggZGlyZWN0aW9uICE9PSBleGlzdGluZ0RpcmVjdGlvbiApIHtcclxuXHRcdFx0dGhpc1sgZGlyZWN0aW9uIF0oKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfdG9nZ2xlOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBkaXJlY3Rpb24gPSB0aGlzLmZsaXBzd2l0Y2guaGFzQ2xhc3MoIFwidWktZmxpcHN3aXRjaC1hY3RpdmVcIiApID8gXCJfbGVmdFwiIDogXCJfcmlnaHRcIjtcclxuXHJcblx0XHR0aGlzWyBkaXJlY3Rpb24gXSgpO1xyXG5cdH0sXHJcblxyXG5cdF9rZXlkb3duOiBmdW5jdGlvbiggZSApIHtcclxuXHRcdGlmICggZS53aGljaCA9PT0gJC5tb2JpbGUua2V5Q29kZS5MRUZUICkge1xyXG5cdFx0XHR0aGlzLl9sZWZ0KCk7XHJcblx0XHR9IGVsc2UgaWYgKCBlLndoaWNoID09PSAkLm1vYmlsZS5rZXlDb2RlLlJJR0hUICkge1xyXG5cdFx0XHR0aGlzLl9yaWdodCgpO1xyXG5cdFx0fSBlbHNlIGlmICggZS53aGljaCA9PT0gJC5tb2JpbGUua2V5Q29kZS5TUEFDRSApIHtcclxuXHRcdFx0dGhpcy5fdG9nZ2xlKCk7XHJcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfc2V0T3B0aW9uczogZnVuY3Rpb24oIG9wdGlvbnMgKSB7XHJcblx0XHRpZiAoIG9wdGlvbnMudGhlbWUgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0dmFyIGN1cnJlbnRUaGVtZSA9IG9wdGlvbnMudGhlbWUgPyBvcHRpb25zLnRoZW1lIDogXCJpbmhlcml0XCIsXHJcblx0XHRcdFx0bmV3VGhlbWUgPSBvcHRpb25zLnRoZW1lID8gb3B0aW9ucy50aGVtZSA6IFwiaW5oZXJpdFwiO1xyXG5cclxuXHRcdFx0dGhpcy53aWRnZXQoKVxyXG5cdFx0XHRcdC5yZW1vdmVDbGFzcyggXCJ1aS1iYXItXCIgKyBjdXJyZW50VGhlbWUgKVxyXG5cdFx0XHRcdC5hZGRDbGFzcyggXCJ1aS1iYXItXCIgKyBuZXdUaGVtZSApO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCBvcHRpb25zLm9uVGV4dCAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHR0aGlzLm9uLnRleHQoIG9wdGlvbnMub25UZXh0ICk7XHJcblx0XHR9XHJcblx0XHRpZiAoIG9wdGlvbnMub2ZmVGV4dCAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHR0aGlzLm9mZi50ZXh0KCBvcHRpb25zLm9mZlRleHQgKTtcclxuXHRcdH1cclxuXHRcdGlmICggb3B0aW9ucy5kaXNhYmxlZCAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHR0aGlzLndpZGdldCgpLnRvZ2dsZUNsYXNzKCBcInVpLXN0YXRlLWRpc2FibGVkXCIsIG9wdGlvbnMuZGlzYWJsZWQgKTtcclxuXHRcdH1cclxuXHRcdGlmICggb3B0aW9ucy5taW5pICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdHRoaXMud2lkZ2V0KCkudG9nZ2xlQ2xhc3MoIFwidWktbWluaVwiLCBvcHRpb25zLm1pbmkgKTtcclxuXHRcdH1cclxuXHRcdGlmICggb3B0aW9ucy5jb3JuZXJzICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdHRoaXMud2lkZ2V0KCkudG9nZ2xlQ2xhc3MoIFwidWktY29ybmVyLWFsbFwiLCBvcHRpb25zLmNvcm5lcnMgKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl9zdXBlciggb3B0aW9ucyApO1xyXG5cdH0sXHJcblxyXG5cdF9kZXN0cm95OiBmdW5jdGlvbigpIHtcclxuXHRcdGlmICggdGhpcy5vcHRpb25zLmVuaGFuY2VkICkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblx0XHRpZiAoIHRoaXMuX29yaWdpbmFsVGFiSW5kZXggIT0gbnVsbCApIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50LmF0dHIoIFwidGFiaW5kZXhcIiwgdGhpcy5fb3JpZ2luYWxUYWJJbmRleCApO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50LnJlbW92ZUF0dHIoIFwidGFiaW5kZXhcIiApO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5vbi5yZW1vdmUoKTtcclxuXHRcdHRoaXMub2ZmLnJlbW92ZSgpO1xyXG5cdFx0dGhpcy5lbGVtZW50LnVud3JhcCgpO1xyXG5cdFx0dGhpcy5mbGlwc3dpdGNoLnJlbW92ZSgpO1xyXG5cdFx0dGhpcy5yZW1vdmVDbGFzcyggXCJ1aS1mbGlwc3dpdGNoLWlucHV0XCIgKTtcclxuXHR9XHJcblxyXG59LCAkLm1vYmlsZS5iZWhhdmlvcnMuZm9ybVJlc2V0ICkgKTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cdCQud2lkZ2V0KCBcIm1vYmlsZS5yYW5nZXNsaWRlclwiLCAkLmV4dGVuZCgge1xyXG5cclxuXHRcdG9wdGlvbnM6IHtcclxuXHRcdFx0dGhlbWU6IG51bGwsXHJcblx0XHRcdHRyYWNrVGhlbWU6IG51bGwsXHJcblx0XHRcdGNvcm5lcnM6IHRydWUsXHJcblx0XHRcdG1pbmk6IGZhbHNlLFxyXG5cdFx0XHRoaWdobGlnaHQ6IHRydWVcclxuXHRcdH0sXHJcblxyXG5cdFx0X2NyZWF0ZTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciAkZWwgPSB0aGlzLmVsZW1lbnQsXHJcblx0XHRcdGVsQ2xhc3MgPSB0aGlzLm9wdGlvbnMubWluaSA/IFwidWktcmFuZ2VzbGlkZXIgdWktbWluaVwiIDogXCJ1aS1yYW5nZXNsaWRlclwiLFxyXG5cdFx0XHRfaW5wdXRGaXJzdCA9ICRlbC5maW5kKCBcImlucHV0XCIgKS5maXJzdCgpLFxyXG5cdFx0XHRfaW5wdXRMYXN0ID0gJGVsLmZpbmQoIFwiaW5wdXRcIiApLmxhc3QoKSxcclxuXHRcdFx0X2xhYmVsID0gJGVsLmZpbmQoIFwibGFiZWxcIiApLmZpcnN0KCksXHJcblx0XHRcdF9zbGlkZXJXaWRnZXRGaXJzdCA9ICQuZGF0YSggX2lucHV0Rmlyc3QuZ2V0KCAwICksIFwibW9iaWxlLXNsaWRlclwiICkgfHxcclxuXHRcdFx0XHQkLmRhdGEoIF9pbnB1dEZpcnN0LnNsaWRlcigpLmdldCggMCApLCBcIm1vYmlsZS1zbGlkZXJcIiApLFxyXG5cdFx0XHRfc2xpZGVyV2lkZ2V0TGFzdCA9ICQuZGF0YSggX2lucHV0TGFzdC5nZXQoMCksIFwibW9iaWxlLXNsaWRlclwiICkgfHxcclxuXHRcdFx0XHQkLmRhdGEoIF9pbnB1dExhc3Quc2xpZGVyKCkuZ2V0KCAwICksIFwibW9iaWxlLXNsaWRlclwiICksXHJcblx0XHRcdF9zbGlkZXJGaXJzdCA9IF9zbGlkZXJXaWRnZXRGaXJzdC5zbGlkZXIsXHJcblx0XHRcdF9zbGlkZXJMYXN0ID0gX3NsaWRlcldpZGdldExhc3Quc2xpZGVyLFxyXG5cdFx0XHRmaXJzdEhhbmRsZSA9IF9zbGlkZXJXaWRnZXRGaXJzdC5oYW5kbGUsXHJcblx0XHRcdF9zbGlkZXJzID0gJCggXCI8ZGl2IGNsYXNzPSd1aS1yYW5nZXNsaWRlci1zbGlkZXJzJyAvPlwiICkuYXBwZW5kVG8oICRlbCApO1xyXG5cclxuXHRcdFx0X2lucHV0Rmlyc3QuYWRkQ2xhc3MoIFwidWktcmFuZ2VzbGlkZXItZmlyc3RcIiApO1xyXG5cdFx0XHRfaW5wdXRMYXN0LmFkZENsYXNzKCBcInVpLXJhbmdlc2xpZGVyLWxhc3RcIiApO1xyXG5cdFx0XHQkZWwuYWRkQ2xhc3MoIGVsQ2xhc3MgKTtcclxuXHJcblx0XHRcdF9zbGlkZXJGaXJzdC5hcHBlbmRUbyggX3NsaWRlcnMgKTtcclxuXHRcdFx0X3NsaWRlckxhc3QuYXBwZW5kVG8oIF9zbGlkZXJzICk7XHJcblx0XHRcdF9sYWJlbC5pbnNlcnRCZWZvcmUoICRlbCApO1xyXG5cdFx0XHRmaXJzdEhhbmRsZS5wcmVwZW5kVG8oIF9zbGlkZXJMYXN0ICk7XHJcblxyXG5cdFx0XHQkLmV4dGVuZCggdGhpcywge1xyXG5cdFx0XHRcdF9pbnB1dEZpcnN0OiBfaW5wdXRGaXJzdCxcclxuXHRcdFx0XHRfaW5wdXRMYXN0OiBfaW5wdXRMYXN0LFxyXG5cdFx0XHRcdF9zbGlkZXJGaXJzdDogX3NsaWRlckZpcnN0LFxyXG5cdFx0XHRcdF9zbGlkZXJMYXN0OiBfc2xpZGVyTGFzdCxcclxuXHRcdFx0XHRfbGFiZWw6IF9sYWJlbCxcclxuXHRcdFx0XHRfdGFyZ2V0VmFsOiBudWxsLFxyXG5cdFx0XHRcdF9zbGlkZXJUYXJnZXQ6IGZhbHNlLFxyXG5cdFx0XHRcdF9zbGlkZXJzOiBfc2xpZGVycyxcclxuXHRcdFx0XHRfcHJveHk6IGZhbHNlXHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0dGhpcy5yZWZyZXNoKCk7XHJcblx0XHRcdHRoaXMuX29uKCB0aGlzLmVsZW1lbnQuZmluZCggXCJpbnB1dC51aS1zbGlkZXItaW5wdXRcIiApLCB7XHJcblx0XHRcdFx0XCJzbGlkZWJlZm9yZXN0YXJ0XCI6IFwiX3NsaWRlYmVmb3Jlc3RhcnRcIixcclxuXHRcdFx0XHRcInNsaWRlc3RvcFwiOiBcIl9zbGlkZXN0b3BcIixcclxuXHRcdFx0XHRcInNsaWRlZHJhZ1wiOiBcIl9zbGlkZWRyYWdcIixcclxuXHRcdFx0XHRcInNsaWRlYmVmb3JlY2hhbmdlXCI6IFwiX2NoYW5nZVwiLFxyXG5cdFx0XHRcdFwiYmx1clwiOiBcIl9jaGFuZ2VcIixcclxuXHRcdFx0XHRcImtleXVwXCI6IFwiX2NoYW5nZVwiXHJcblx0XHRcdH0pO1xyXG5cdFx0XHR0aGlzLl9vbih7XHJcblx0XHRcdFx0XCJtb3VzZWRvd25cIjpcIl9jaGFuZ2VcIlxyXG5cdFx0XHR9KTtcclxuXHRcdFx0dGhpcy5fb24oIHRoaXMuZWxlbWVudC5jbG9zZXN0KCBcImZvcm1cIiApLCB7XHJcblx0XHRcdFx0XCJyZXNldFwiOlwiX2hhbmRsZVJlc2V0XCJcclxuXHRcdFx0fSk7XHJcblx0XHRcdHRoaXMuX29uKCBmaXJzdEhhbmRsZSwge1xyXG5cdFx0XHRcdFwidm1vdXNlZG93blwiOiBcIl9kcmFnRmlyc3RIYW5kbGVcIlxyXG5cdFx0XHR9KTtcclxuXHRcdH0sXHJcblx0XHRfaGFuZGxlUmVzZXQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XHJcblx0XHRcdC8vd2UgbXVzdCB3YWl0IGZvciB0aGUgc3RhY2sgdG8gdW53aW5kIGJlZm9yZSB1cGRhdGVpbmcgb3RoZXIgd2lzZSBzbGlkZXJzIHdpbGwgbm90IGhhdmUgdXBkYXRlZCB5ZXRcclxuXHRcdFx0c2V0VGltZW91dCggZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0c2VsZi5fdXBkYXRlSGlnaGxpZ2h0KCk7XHJcblx0XHRcdH0sMCk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9kcmFnRmlyc3RIYW5kbGU6IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdFx0Ly9pZiB0aGUgZmlyc3QgaGFuZGxlIGlzIGRyYWdnZWQgc2VuZCB0aGUgZXZlbnQgdG8gdGhlIGZpcnN0IHNsaWRlclxyXG5cdFx0XHQkLmRhdGEoIHRoaXMuX2lucHV0Rmlyc3QuZ2V0KDApLCBcIm1vYmlsZS1zbGlkZXJcIiApLmRyYWdnaW5nID0gdHJ1ZTtcclxuXHRcdFx0JC5kYXRhKCB0aGlzLl9pbnB1dEZpcnN0LmdldCgwKSwgXCJtb2JpbGUtc2xpZGVyXCIgKS5yZWZyZXNoKCBldmVudCApO1xyXG5cdFx0XHQkLmRhdGEoIHRoaXMuX2lucHV0Rmlyc3QuZ2V0KDApLCBcIm1vYmlsZS1zbGlkZXJcIiApLl90cmlnZ2VyKCBcInN0YXJ0XCIgKTtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfc2xpZGVkcmFnOiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHRcdHZhciBmaXJzdCA9ICQoIGV2ZW50LnRhcmdldCApLmlzKCB0aGlzLl9pbnB1dEZpcnN0ICksXHJcblx0XHRcdFx0b3RoZXJTbGlkZXIgPSAoIGZpcnN0ICkgPyB0aGlzLl9pbnB1dExhc3QgOiB0aGlzLl9pbnB1dEZpcnN0O1xyXG5cclxuXHRcdFx0dGhpcy5fc2xpZGVyVGFyZ2V0ID0gZmFsc2U7XHJcblx0XHRcdC8vaWYgdGhlIGRyYWcgd2FzIGluaXRpYXRlZCBvbiBhbiBleHRyZW1lIGFuZCB0aGUgb3RoZXIgaGFuZGxlIGlzIGZvY3VzZWQgc2VuZCB0aGUgZXZlbnRzIHRvXHJcblx0XHRcdC8vdGhlIGNsb3Nlc3QgaGFuZGxlXHJcblx0XHRcdGlmICggKCB0aGlzLl9wcm94eSA9PT0gXCJmaXJzdFwiICYmIGZpcnN0ICkgfHwgKCB0aGlzLl9wcm94eSA9PT0gXCJsYXN0XCIgJiYgIWZpcnN0ICkgKSB7XHJcblx0XHRcdFx0JC5kYXRhKCBvdGhlclNsaWRlci5nZXQoMCksIFwibW9iaWxlLXNsaWRlclwiICkuZHJhZ2dpbmcgPSB0cnVlO1xyXG5cdFx0XHRcdCQuZGF0YSggb3RoZXJTbGlkZXIuZ2V0KDApLCBcIm1vYmlsZS1zbGlkZXJcIiApLnJlZnJlc2goIGV2ZW50ICk7XHJcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHRcdF9zbGlkZXN0b3A6IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdFx0dmFyIGZpcnN0ID0gJCggZXZlbnQudGFyZ2V0ICkuaXMoIHRoaXMuX2lucHV0Rmlyc3QgKTtcclxuXHJcblx0XHRcdHRoaXMuX3Byb3h5ID0gZmFsc2U7XHJcblx0XHRcdC8vdGhpcyBzdG9wcyBkcmFnZ2luZyBvZiB0aGUgaGFuZGxlIGFuZCBicmluZ3MgdGhlIGFjdGl2ZSB0cmFjayB0byB0aGUgZnJvbnRcclxuXHRcdFx0Ly90aGlzIG1ha2VzIGNsaWNrcyBvbiB0aGUgdHJhY2sgZ28gdGhlIHRoZSBsYXN0IGhhbmRsZSB1c2VkXHJcblx0XHRcdHRoaXMuZWxlbWVudC5maW5kKCBcImlucHV0XCIgKS50cmlnZ2VyKCBcInZtb3VzZXVwXCIgKTtcclxuXHRcdFx0dGhpcy5fc2xpZGVyRmlyc3QuY3NzKCBcInotaW5kZXhcIiwgZmlyc3QgPyAxIDogXCJcIiApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfc2xpZGViZWZvcmVzdGFydDogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0XHR0aGlzLl9zbGlkZXJUYXJnZXQgPSBmYWxzZTtcclxuXHRcdFx0Ly9pZiB0aGUgdHJhY2sgaXMgdGhlIHRhcmdldCByZW1lbWJlciB0aGlzIGFuZCB0aGUgb3JpZ2luYWwgdmFsdWVcclxuXHRcdFx0aWYgKCAkKCBldmVudC5vcmlnaW5hbEV2ZW50LnRhcmdldCApLmhhc0NsYXNzKCBcInVpLXNsaWRlci10cmFja1wiICkgKSB7XHJcblx0XHRcdFx0dGhpcy5fc2xpZGVyVGFyZ2V0ID0gdHJ1ZTtcclxuXHRcdFx0XHR0aGlzLl90YXJnZXRWYWwgPSAkKCBldmVudC50YXJnZXQgKS52YWwoKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHJcblx0XHRfc2V0T3B0aW9uczogZnVuY3Rpb24oIG9wdGlvbnMgKSB7XHJcblx0XHRcdGlmICggb3B0aW9ucy50aGVtZSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRcdHRoaXMuX3NldFRoZW1lKCBvcHRpb25zLnRoZW1lICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICggb3B0aW9ucy50cmFja1RoZW1lICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdFx0dGhpcy5fc2V0VHJhY2tUaGVtZSggb3B0aW9ucy50cmFja1RoZW1lICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICggb3B0aW9ucy5taW5pICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdFx0dGhpcy5fc2V0TWluaSggb3B0aW9ucy5taW5pICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICggb3B0aW9ucy5oaWdobGlnaHQgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0XHR0aGlzLl9zZXRIaWdobGlnaHQoIG9wdGlvbnMuaGlnaGxpZ2h0ICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICggb3B0aW9ucy5kaXNhYmxlZCAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRcdHRoaXMuX3NldERpc2FibGVkKCBvcHRpb25zLmRpc2FibGVkICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHRoaXMuX3N1cGVyKCBvcHRpb25zICk7XHJcblx0XHRcdHRoaXMucmVmcmVzaCgpO1xyXG5cdFx0fSxcclxuXHJcblx0XHRyZWZyZXNoOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyICRlbCA9IHRoaXMuZWxlbWVudCxcclxuXHRcdFx0XHRvID0gdGhpcy5vcHRpb25zO1xyXG5cclxuXHRcdFx0aWYgKCB0aGlzLl9pbnB1dEZpcnN0LmlzKCBcIjpkaXNhYmxlZFwiICkgfHwgdGhpcy5faW5wdXRMYXN0LmlzKCBcIjpkaXNhYmxlZFwiICkgKSB7XHJcblx0XHRcdFx0dGhpcy5vcHRpb25zLmRpc2FibGVkID0gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0JGVsLmZpbmQoIFwiaW5wdXRcIiApLnNsaWRlcih7XHJcblx0XHRcdFx0dGhlbWU6IG8udGhlbWUsXHJcblx0XHRcdFx0dHJhY2tUaGVtZTogby50cmFja1RoZW1lLFxyXG5cdFx0XHRcdGRpc2FibGVkOiBvLmRpc2FibGVkLFxyXG5cdFx0XHRcdGNvcm5lcnM6IG8uY29ybmVycyxcclxuXHRcdFx0XHRtaW5pOiBvLm1pbmksXHJcblx0XHRcdFx0aGlnaGxpZ2h0OiBvLmhpZ2hsaWdodFxyXG5cdFx0XHR9KS5zbGlkZXIoIFwicmVmcmVzaFwiICk7XHJcblx0XHRcdHRoaXMuX3VwZGF0ZUhpZ2hsaWdodCgpO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfY2hhbmdlOiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHRcdGlmICggZXZlbnQudHlwZSA9PT0gXCJrZXl1cFwiICkge1xyXG5cdFx0XHRcdHRoaXMuX3VwZGF0ZUhpZ2hsaWdodCgpO1xyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzLFxyXG5cdFx0XHRcdG1pbiA9IHBhcnNlRmxvYXQoIHRoaXMuX2lucHV0Rmlyc3QudmFsKCksIDEwICksXHJcblx0XHRcdFx0bWF4ID0gcGFyc2VGbG9hdCggdGhpcy5faW5wdXRMYXN0LnZhbCgpLCAxMCApLFxyXG5cdFx0XHRcdGZpcnN0ID0gJCggZXZlbnQudGFyZ2V0ICkuaGFzQ2xhc3MoIFwidWktcmFuZ2VzbGlkZXItZmlyc3RcIiApLFxyXG5cdFx0XHRcdHRoaXNTbGlkZXIgPSBmaXJzdCA/IHRoaXMuX2lucHV0Rmlyc3QgOiB0aGlzLl9pbnB1dExhc3QsXHJcblx0XHRcdFx0b3RoZXJTbGlkZXIgPSBmaXJzdCA/IHRoaXMuX2lucHV0TGFzdCA6IHRoaXMuX2lucHV0Rmlyc3Q7XHJcblxyXG5cdFx0XHRpZiAoICggdGhpcy5faW5wdXRGaXJzdC52YWwoKSA+IHRoaXMuX2lucHV0TGFzdC52YWwoKSAmJiBldmVudC50eXBlID09PSBcIm1vdXNlZG93blwiICYmICEkKGV2ZW50LnRhcmdldCkuaGFzQ2xhc3MoXCJ1aS1zbGlkZXItaGFuZGxlXCIpKSApIHtcclxuXHRcdFx0XHR0aGlzU2xpZGVyLmJsdXIoKTtcclxuXHRcdFx0fSBlbHNlIGlmICggZXZlbnQudHlwZSA9PT0gXCJtb3VzZWRvd25cIiApIHtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKCBtaW4gPiBtYXggJiYgIXRoaXMuX3NsaWRlclRhcmdldCApIHtcclxuXHRcdFx0XHQvL3RoaXMgcHJldmVudHMgbWluIGZyb20gYmVpbmcgZ3JlYXRlciB0aGVuIG1heFxyXG5cdFx0XHRcdHRoaXNTbGlkZXIudmFsKCBmaXJzdCA/IG1heDogbWluICkuc2xpZGVyKCBcInJlZnJlc2hcIiApO1xyXG5cdFx0XHRcdHRoaXMuX3RyaWdnZXIoIFwibm9ybWFsaXplXCIgKTtcclxuXHRcdFx0fSBlbHNlIGlmICggbWluID4gbWF4ICkge1xyXG5cdFx0XHRcdC8vdGhpcyBtYWtlcyBpdCBzbyBjbGlja3Mgb24gdGhlIHRhcmdldCBvbiBlaXRoZXIgZXh0cmVtZSBnbyB0byB0aGUgY2xvc2VzdCBoYW5kbGVcclxuXHRcdFx0XHR0aGlzU2xpZGVyLnZhbCggdGhpcy5fdGFyZ2V0VmFsICkuc2xpZGVyKCBcInJlZnJlc2hcIiApO1xyXG5cclxuXHRcdFx0XHQvL1lvdSBtdXN0IHdhaXQgZm9yIHRoZSBzdGFjayB0byB1bndpbmQgc28gZmlyc3Qgc2xpZGVyIGlzIHVwZGF0ZWQgYmVmb3JlIHVwZGF0aW5nIHNlY29uZFxyXG5cdFx0XHRcdHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0b3RoZXJTbGlkZXIudmFsKCBmaXJzdCA/IG1pbjogbWF4ICkuc2xpZGVyKCBcInJlZnJlc2hcIiApO1xyXG5cdFx0XHRcdFx0JC5kYXRhKCBvdGhlclNsaWRlci5nZXQoMCksIFwibW9iaWxlLXNsaWRlclwiICkuaGFuZGxlLmZvY3VzKCk7XHJcblx0XHRcdFx0XHRzZWxmLl9zbGlkZXJGaXJzdC5jc3MoIFwiei1pbmRleFwiLCBmaXJzdCA/IFwiXCIgOiAxICk7XHJcblx0XHRcdFx0XHRzZWxmLl90cmlnZ2VyKCBcIm5vcm1hbGl6ZVwiICk7XHJcblx0XHRcdFx0fSwgMCApO1xyXG5cdFx0XHRcdHRoaXMuX3Byb3h5ID0gKCBmaXJzdCApID8gXCJmaXJzdFwiIDogXCJsYXN0XCI7XHJcblx0XHRcdH1cclxuXHRcdFx0Ly9maXhlcyBpc3N1ZSB3aGVyZSB3aGVuIGJvdGggX3NsaWRlcnMgYXJlIGF0IG1pbiB0aGV5IGNhbm5vdCBiZSBhZGp1c3RlZFxyXG5cdFx0XHRpZiAoIG1pbiA9PT0gbWF4ICkge1xyXG5cdFx0XHRcdCQuZGF0YSggdGhpc1NsaWRlci5nZXQoMCksIFwibW9iaWxlLXNsaWRlclwiICkuaGFuZGxlLmNzcyggXCJ6LWluZGV4XCIsIDEgKTtcclxuXHRcdFx0XHQkLmRhdGEoIG90aGVyU2xpZGVyLmdldCgwKSwgXCJtb2JpbGUtc2xpZGVyXCIgKS5oYW5kbGUuY3NzKCBcInotaW5kZXhcIiwgMCApO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdCQuZGF0YSggb3RoZXJTbGlkZXIuZ2V0KDApLCBcIm1vYmlsZS1zbGlkZXJcIiApLmhhbmRsZS5jc3MoIFwiei1pbmRleFwiLCBcIlwiICk7XHJcblx0XHRcdFx0JC5kYXRhKCB0aGlzU2xpZGVyLmdldCgwKSwgXCJtb2JpbGUtc2xpZGVyXCIgKS5oYW5kbGUuY3NzKCBcInotaW5kZXhcIiwgXCJcIiApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR0aGlzLl91cGRhdGVIaWdobGlnaHQoKTtcclxuXHJcblx0XHRcdGlmICggbWluID49IG1heCApIHtcclxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblxyXG5cdFx0X3VwZGF0ZUhpZ2hsaWdodDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBtaW4gPSBwYXJzZUludCggJC5kYXRhKCB0aGlzLl9pbnB1dEZpcnN0LmdldCgwKSwgXCJtb2JpbGUtc2xpZGVyXCIgKS5oYW5kbGUuZ2V0KDApLnN0eWxlLmxlZnQsIDEwICksXHJcblx0XHRcdFx0bWF4ID0gcGFyc2VJbnQoICQuZGF0YSggdGhpcy5faW5wdXRMYXN0LmdldCgwKSwgXCJtb2JpbGUtc2xpZGVyXCIgKS5oYW5kbGUuZ2V0KDApLnN0eWxlLmxlZnQsIDEwICksXHJcblx0XHRcdFx0d2lkdGggPSAobWF4IC0gbWluKTtcclxuXHJcblx0XHRcdHRoaXMuZWxlbWVudC5maW5kKCBcIi51aS1zbGlkZXItYmdcIiApLmNzcyh7XHJcblx0XHRcdFx0XCJtYXJnaW4tbGVmdFwiOiBtaW4gKyBcIiVcIixcclxuXHRcdFx0XHRcIndpZHRoXCI6IHdpZHRoICsgXCIlXCJcclxuXHRcdFx0fSk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9zZXRUaGVtZTogZnVuY3Rpb24oIHZhbHVlICkge1xyXG5cdFx0XHR0aGlzLl9pbnB1dEZpcnN0LnNsaWRlciggXCJvcHRpb25cIiwgXCJ0aGVtZVwiLCB2YWx1ZSApO1xyXG5cdFx0XHR0aGlzLl9pbnB1dExhc3Quc2xpZGVyKCBcIm9wdGlvblwiLCBcInRoZW1lXCIsIHZhbHVlICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9zZXRUcmFja1RoZW1lOiBmdW5jdGlvbiggdmFsdWUgKSB7XHJcblx0XHRcdHRoaXMuX2lucHV0Rmlyc3Quc2xpZGVyKCBcIm9wdGlvblwiLCBcInRyYWNrVGhlbWVcIiwgdmFsdWUgKTtcclxuXHRcdFx0dGhpcy5faW5wdXRMYXN0LnNsaWRlciggXCJvcHRpb25cIiwgXCJ0cmFja1RoZW1lXCIsIHZhbHVlICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9zZXRNaW5pOiBmdW5jdGlvbiggdmFsdWUgKSB7XHJcblx0XHRcdHRoaXMuX2lucHV0Rmlyc3Quc2xpZGVyKCBcIm9wdGlvblwiLCBcIm1pbmlcIiwgdmFsdWUgKTtcclxuXHRcdFx0dGhpcy5faW5wdXRMYXN0LnNsaWRlciggXCJvcHRpb25cIiwgXCJtaW5pXCIsIHZhbHVlICk7XHJcblx0XHRcdHRoaXMuZWxlbWVudC50b2dnbGVDbGFzcyggXCJ1aS1taW5pXCIsICEhdmFsdWUgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X3NldEhpZ2hsaWdodDogZnVuY3Rpb24oIHZhbHVlICkge1xyXG5cdFx0XHR0aGlzLl9pbnB1dEZpcnN0LnNsaWRlciggXCJvcHRpb25cIiwgXCJoaWdobGlnaHRcIiwgdmFsdWUgKTtcclxuXHRcdFx0dGhpcy5faW5wdXRMYXN0LnNsaWRlciggXCJvcHRpb25cIiwgXCJoaWdobGlnaHRcIiwgdmFsdWUgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X3NldERpc2FibGVkOiBmdW5jdGlvbiggdmFsdWUgKSB7XHJcblx0XHRcdHRoaXMuX2lucHV0Rmlyc3QucHJvcCggXCJkaXNhYmxlZFwiLCB2YWx1ZSApO1xyXG5cdFx0XHR0aGlzLl9pbnB1dExhc3QucHJvcCggXCJkaXNhYmxlZFwiLCB2YWx1ZSApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfZGVzdHJveTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHRoaXMuX2xhYmVsLnByZXBlbmRUbyggdGhpcy5lbGVtZW50ICk7XHJcblx0XHRcdHRoaXMuZWxlbWVudC5yZW1vdmVDbGFzcyggXCJ1aS1yYW5nZXNsaWRlciB1aS1taW5pXCIgKTtcclxuXHRcdFx0dGhpcy5faW5wdXRGaXJzdC5hZnRlciggdGhpcy5fc2xpZGVyRmlyc3QgKTtcclxuXHRcdFx0dGhpcy5faW5wdXRMYXN0LmFmdGVyKCB0aGlzLl9zbGlkZXJMYXN0ICk7XHJcblx0XHRcdHRoaXMuX3NsaWRlcnMucmVtb3ZlKCk7XHJcblx0XHRcdHRoaXMuZWxlbWVudC5maW5kKCBcImlucHV0XCIgKS5yZW1vdmVDbGFzcyggXCJ1aS1yYW5nZXNsaWRlci1maXJzdCB1aS1yYW5nZXNsaWRlci1sYXN0XCIgKS5zbGlkZXIoIFwiZGVzdHJveVwiICk7XHJcblx0XHR9XHJcblxyXG5cdH0sICQubW9iaWxlLmJlaGF2aW9ycy5mb3JtUmVzZXQgKSApO1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG5cdCQud2lkZ2V0KCBcIm1vYmlsZS50ZXh0aW5wdXRcIiwgJC5tb2JpbGUudGV4dGlucHV0LCB7XHJcblx0XHRvcHRpb25zOiB7XHJcblx0XHRcdGNsZWFyQnRuOiBmYWxzZSxcclxuXHRcdFx0Y2xlYXJCdG5UZXh0OiBcIkNsZWFyIHRleHRcIlxyXG5cdFx0fSxcclxuXHJcblx0XHRfY3JlYXRlOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dGhpcy5fc3VwZXIoKTtcclxuXHJcblx0XHRcdGlmICggdGhpcy5pc1NlYXJjaCApIHtcclxuXHRcdFx0XHR0aGlzLm9wdGlvbnMuY2xlYXJCdG4gPSB0cnVlO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoICEhdGhpcy5vcHRpb25zLmNsZWFyQnRuICYmIHRoaXMuaW5wdXROZWVkc1dyYXAgKSB7XHJcblx0XHRcdFx0dGhpcy5fYWRkQ2xlYXJCdG4oKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHJcblx0XHRjbGVhckJ1dHRvbjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHJldHVybiAkKCBcIjxhIGhyZWY9JyMnIHRhYmluZGV4PSctMScgYXJpYS1oaWRkZW49J3RydWUnIFwiICtcclxuXHRcdFx0XHRcImNsYXNzPSd1aS1pbnB1dC1jbGVhciB1aS1idG4gdWktaWNvbi1kZWxldGUgdWktYnRuLWljb24tbm90ZXh0IHVpLWNvcm5lci1hbGwnPlwiICtcclxuXHRcdFx0XHRcIjwvYT5cIiApXHJcblx0XHRcdFx0XHQuYXR0ciggXCJ0aXRsZVwiLCB0aGlzLm9wdGlvbnMuY2xlYXJCdG5UZXh0IClcclxuXHRcdFx0XHRcdC50ZXh0KCB0aGlzLm9wdGlvbnMuY2xlYXJCdG5UZXh0ICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9jbGVhckJ0bkNsaWNrOiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudC52YWwoIFwiXCIgKVxyXG5cdFx0XHRcdFx0LmZvY3VzKClcclxuXHRcdFx0XHRcdC50cmlnZ2VyKCBcImNoYW5nZVwiICk7XHJcblxyXG5cdFx0XHR0aGlzLl9jbGVhckJ0bi5hZGRDbGFzcyggXCJ1aS1pbnB1dC1jbGVhci1oaWRkZW5cIiApO1xyXG5cdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfYWRkQ2xlYXJCdG46IGZ1bmN0aW9uKCkge1xyXG5cclxuXHRcdFx0aWYgKCAhdGhpcy5vcHRpb25zLmVuaGFuY2VkICkge1xyXG5cdFx0XHRcdHRoaXMuX2VuaGFuY2VDbGVhcigpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQkLmV4dGVuZCggdGhpcywge1xyXG5cdFx0XHRcdF9jbGVhckJ0bjogdGhpcy53aWRnZXQoKS5maW5kKFwiYS51aS1pbnB1dC1jbGVhclwiKVxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdHRoaXMuX2JpbmRDbGVhckV2ZW50cygpO1xyXG5cclxuXHRcdFx0dGhpcy5fdG9nZ2xlQ2xlYXIoKTtcclxuXHJcblx0XHR9LFxyXG5cclxuXHRcdF9lbmhhbmNlQ2xlYXI6IGZ1bmN0aW9uKCkge1xyXG5cclxuXHRcdFx0dGhpcy5jbGVhckJ1dHRvbigpLmFwcGVuZFRvKCB0aGlzLndpZGdldCgpICk7XHJcblx0XHRcdHRoaXMud2lkZ2V0KCkuYWRkQ2xhc3MoIFwidWktaW5wdXQtaGFzLWNsZWFyXCIgKTtcclxuXHJcblx0XHR9LFxyXG5cclxuXHRcdF9iaW5kQ2xlYXJFdmVudHM6IGZ1bmN0aW9uKCkge1xyXG5cclxuXHRcdFx0dGhpcy5fb24oIHRoaXMuX2NsZWFyQnRuLCB7XHJcblx0XHRcdFx0XCJjbGlja1wiOiBcIl9jbGVhckJ0bkNsaWNrXCJcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHR0aGlzLl9vbih7XHJcblx0XHRcdFx0XCJrZXl1cFwiOiBcIl90b2dnbGVDbGVhclwiLFxyXG5cdFx0XHRcdFwiY2hhbmdlXCI6IFwiX3RvZ2dsZUNsZWFyXCIsXHJcblx0XHRcdFx0XCJpbnB1dFwiOiBcIl90b2dnbGVDbGVhclwiLFxyXG5cdFx0XHRcdFwiZm9jdXNcIjogXCJfdG9nZ2xlQ2xlYXJcIixcclxuXHRcdFx0XHRcImJsdXJcIjogXCJfdG9nZ2xlQ2xlYXJcIixcclxuXHRcdFx0XHRcImN1dFwiOiBcIl90b2dnbGVDbGVhclwiLFxyXG5cdFx0XHRcdFwicGFzdGVcIjogXCJfdG9nZ2xlQ2xlYXJcIlxyXG5cclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0fSxcclxuXHJcblx0XHRfdW5iaW5kQ2xlYXI6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR0aGlzLl9vZmYoIHRoaXMuX2NsZWFyQnRuLCBcImNsaWNrXCIpO1xyXG5cdFx0XHR0aGlzLl9vZmYoIHRoaXMuZWxlbWVudCwgXCJrZXl1cCBjaGFuZ2UgaW5wdXQgZm9jdXMgYmx1ciBjdXQgcGFzdGVcIiApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfc2V0T3B0aW9uczogZnVuY3Rpb24oIG9wdGlvbnMgKSB7XHJcblx0XHRcdHRoaXMuX3N1cGVyKCBvcHRpb25zICk7XHJcblxyXG5cdFx0XHRpZiAoIG9wdGlvbnMuY2xlYXJCdG4gIT09IHVuZGVmaW5lZCAmJlxyXG5cdFx0XHRcdCF0aGlzLmVsZW1lbnQuaXMoIFwidGV4dGFyZWEsIDpqcW1EYXRhKHR5cGU9J3JhbmdlJylcIiApICkge1xyXG5cdFx0XHRcdGlmICggb3B0aW9ucy5jbGVhckJ0biApIHtcclxuXHRcdFx0XHRcdHRoaXMuX2FkZENsZWFyQnRuKCk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdHRoaXMuX2Rlc3Ryb3lDbGVhcigpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKCBvcHRpb25zLmNsZWFyQnRuVGV4dCAhPT0gdW5kZWZpbmVkICYmIHRoaXMuX2NsZWFyQnRuICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdFx0dGhpcy5fY2xlYXJCdG4udGV4dCggb3B0aW9ucy5jbGVhckJ0blRleHQgKVxyXG5cdFx0XHRcdFx0LmF0dHIoXCJ0aXRsZVwiLCBvcHRpb25zLmNsZWFyQnRuVGV4dCk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblxyXG5cdFx0X3RvZ2dsZUNsZWFyOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dGhpcy5fZGVsYXkoIFwiX3RvZ2dsZUNsZWFyQ2xhc3NcIiwgMCApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfdG9nZ2xlQ2xlYXJDbGFzczogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHRoaXMuX2NsZWFyQnRuLnRvZ2dsZUNsYXNzKCBcInVpLWlucHV0LWNsZWFyLWhpZGRlblwiLCAhdGhpcy5lbGVtZW50LnZhbCgpICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9kZXN0cm95Q2xlYXI6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR0aGlzLndpZGdldCgpLnJlbW92ZUNsYXNzKCBcInVpLWlucHV0LWhhcy1jbGVhclwiICk7XHJcblx0XHRcdHRoaXMuX3VuYmluZENsZWFyKCk7XHJcblx0XHRcdHRoaXMuX2NsZWFyQnRuLnJlbW92ZSgpO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfZGVzdHJveTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHRoaXMuX3N1cGVyKCk7XHJcblx0XHRcdGlmICggdGhpcy5vcHRpb25zLmNsZWFyQnRuICkge1xyXG5cdFx0XHRcdHRoaXMuX2Rlc3Ryb3lDbGVhcigpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdH0pO1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG5cdCQud2lkZ2V0KCBcIm1vYmlsZS50ZXh0aW5wdXRcIiwgJC5tb2JpbGUudGV4dGlucHV0LCB7XHJcblx0XHRvcHRpb25zOiB7XHJcblx0XHRcdGF1dG9ncm93OnRydWUsXHJcblx0XHRcdGtleXVwVGltZW91dEJ1ZmZlcjogMTAwXHJcblx0XHR9LFxyXG5cclxuXHRcdF9jcmVhdGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR0aGlzLl9zdXBlcigpO1xyXG5cclxuXHRcdFx0aWYgKCB0aGlzLm9wdGlvbnMuYXV0b2dyb3cgJiYgdGhpcy5pc1RleHRhcmVhICkge1xyXG5cdFx0XHRcdHRoaXMuX2F1dG9ncm93KCk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblxyXG5cdFx0X2F1dG9ncm93OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50LmFkZENsYXNzKCBcInVpLXRleHRpbnB1dC1hdXRvZ3Jvd1wiICk7XHJcblxyXG5cdFx0XHR0aGlzLl9vbih7XHJcblx0XHRcdFx0XCJrZXl1cFwiOiBcIl90aW1lb3V0XCIsXHJcblx0XHRcdFx0XCJjaGFuZ2VcIjogXCJfdGltZW91dFwiLFxyXG5cdFx0XHRcdFwiaW5wdXRcIjogXCJfdGltZW91dFwiLFxyXG5cdFx0XHRcdFwicGFzdGVcIjogXCJfdGltZW91dFwiXHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0Ly8gQXR0YWNoIHRvIHRoZSB2YXJpb3VzIHlvdS1oYXZlLWJlY29tZS12aXNpYmxlIG5vdGlmaWNhdGlvbnMgdGhhdCB0aGVcclxuXHRcdFx0Ly8gdmFyaW91cyBmcmFtZXdvcmsgZWxlbWVudHMgZW1pdC5cclxuXHRcdFx0Ly8gVE9ETzogUmVtb3ZlIGFsbCBidXQgdGhlIHVwZGF0ZWxheW91dCBoYW5kbGVyIG9uY2UgIzY0MjYgaXMgZml4ZWQuXHJcblx0XHRcdHRoaXMuX29uKCB0cnVlLCB0aGlzLmRvY3VtZW50LCB7XHJcblxyXG5cdFx0XHRcdC8vIFRPRE86IE1vdmUgdG8gbm9uLWRlcHJlY2F0ZWQgZXZlbnRcclxuXHRcdFx0XHRcInBhZ2VzaG93XCI6IFwiX2hhbmRsZVNob3dcIixcclxuXHRcdFx0XHRcInBvcHVwYmVmb3JlcG9zaXRpb25cIjogXCJfaGFuZGxlU2hvd1wiLFxyXG5cdFx0XHRcdFwidXBkYXRlbGF5b3V0XCI6IFwiX2hhbmRsZVNob3dcIixcclxuXHRcdFx0XHRcInBhbmVsb3BlblwiOiBcIl9oYW5kbGVTaG93XCJcclxuXHRcdFx0fSk7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vIFN5bmNocm9ub3VzbHkgZml4IHRoZSB3aWRnZXQgaGVpZ2h0IGlmIHRoaXMgd2lkZ2V0J3MgcGFyZW50cyBhcmUgc3VjaFxyXG5cdFx0Ly8gdGhhdCB0aGV5IHNob3cvaGlkZSBjb250ZW50IGF0IHJ1bnRpbWUuIFdlIHN0aWxsIG5lZWQgdG8gY2hlY2sgd2hldGhlclxyXG5cdFx0Ly8gdGhlIHdpZGdldCBpcyBhY3R1YWxseSB2aXNpYmxlIGluIGNhc2UgaXQgaXMgY29udGFpbmVkIGluc2lkZSBtdWx0aXBsZVxyXG5cdFx0Ly8gc3VjaCBjb250YWluZXJzLiBGb3IgZXhhbXBsZTogcGFuZWwgY29udGFpbnMgY29sbGFwc2libGUgY29udGFpbnNcclxuXHRcdC8vIGF1dG9ncm93IHRleHRpbnB1dC4gVGhlIHBhbmVsIG1heSBlbWl0IFwicGFuZWxvcGVuXCIgaW5kaWNhdGluZyB0aGF0IGl0c1xyXG5cdFx0Ly8gY29udGVudCBoYXMgYmVjb21lIHZpc2libGUsIGJ1dCB0aGUgY29sbGFwc2libGUgaXMgc3RpbGwgY29sbGFwc2VkLCBzb1xyXG5cdFx0Ly8gdGhlIGF1dG9ncm93IHRleHRhcmVhIGlzIHN0aWxsIG5vdCB2aXNpYmxlLlxyXG5cdFx0X2hhbmRsZVNob3c6IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdFx0aWYgKCAkLmNvbnRhaW5zKCBldmVudC50YXJnZXQsIHRoaXMuZWxlbWVudFsgMCBdICkgJiZcclxuXHRcdFx0XHR0aGlzLmVsZW1lbnQuaXMoIFwiOnZpc2libGVcIiApICkge1xyXG5cclxuXHRcdFx0XHRpZiAoIGV2ZW50LnR5cGUgIT09IFwicG9wdXBiZWZvcmVwb3NpdGlvblwiICkge1xyXG5cdFx0XHRcdFx0dGhpcy5lbGVtZW50XHJcblx0XHRcdFx0XHRcdC5hZGRDbGFzcyggXCJ1aS10ZXh0aW5wdXQtYXV0b2dyb3ctcmVzaXplXCIgKVxyXG5cdFx0XHRcdFx0XHQuYW5pbWF0aW9uQ29tcGxldGUoXHJcblx0XHRcdFx0XHRcdFx0JC5wcm94eSggZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRcdFx0XHR0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3MoIFwidWktdGV4dGlucHV0LWF1dG9ncm93LXJlc2l6ZVwiICk7XHJcblx0XHRcdFx0XHRcdFx0fSwgdGhpcyApLFxyXG5cdFx0XHRcdFx0XHRcInRyYW5zaXRpb25cIiApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHR0aGlzLl9wcmVwYXJlSGVpZ2h0VXBkYXRlKCk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblxyXG5cdFx0X3VuYmluZEF1dG9ncm93OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKCBcInVpLXRleHRpbnB1dC1hdXRvZ3Jvd1wiICk7XHJcblx0XHRcdHRoaXMuX29mZiggdGhpcy5lbGVtZW50LCBcImtleXVwIGNoYW5nZSBpbnB1dCBwYXN0ZVwiICk7XHJcblx0XHRcdHRoaXMuX29mZiggdGhpcy5kb2N1bWVudCxcclxuXHRcdFx0XHRcInBhZ2VzaG93IHBvcHVwYmVmb3JlcG9zaXRpb24gdXBkYXRlbGF5b3V0IHBhbmVsb3BlblwiICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdGtleXVwVGltZW91dDogbnVsbCxcclxuXHJcblx0XHRfcHJlcGFyZUhlaWdodFVwZGF0ZTogZnVuY3Rpb24oIGRlbGF5ICkge1xyXG5cdFx0XHRpZiAoIHRoaXMua2V5dXBUaW1lb3V0ICkge1xyXG5cdFx0XHRcdGNsZWFyVGltZW91dCggdGhpcy5rZXl1cFRpbWVvdXQgKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoIGRlbGF5ID09PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdFx0dGhpcy5fdXBkYXRlSGVpZ2h0KCk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0dGhpcy5rZXl1cFRpbWVvdXQgPSB0aGlzLl9kZWxheSggXCJfdXBkYXRlSGVpZ2h0XCIsIGRlbGF5ICk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblxyXG5cdFx0X3RpbWVvdXQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR0aGlzLl9wcmVwYXJlSGVpZ2h0VXBkYXRlKCB0aGlzLm9wdGlvbnMua2V5dXBUaW1lb3V0QnVmZmVyICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF91cGRhdGVIZWlnaHQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgcGFkZGluZ1RvcCwgcGFkZGluZ0JvdHRvbSwgcGFkZGluZ0hlaWdodCwgc2Nyb2xsSGVpZ2h0LCBjbGllbnRIZWlnaHQsXHJcblx0XHRcdFx0Ym9yZGVyVG9wLCBib3JkZXJCb3R0b20sIGJvcmRlckhlaWdodCwgaGVpZ2h0LFxyXG5cdFx0XHRcdHNjcm9sbFRvcCA9IHRoaXMud2luZG93LnNjcm9sbFRvcCgpO1xyXG5cdFx0XHR0aGlzLmtleXVwVGltZW91dCA9IDA7XHJcblxyXG5cdFx0XHQvLyBJRTggdGV4dGFyZWFzIGhhdmUgdGhlIG9ucGFnZSBwcm9wZXJ0eSAtIG90aGVycyBkbyBub3RcclxuXHRcdFx0aWYgKCAhKCBcIm9ucGFnZVwiIGluIHRoaXMuZWxlbWVudFsgMCBdICkgKSB7XHJcblx0XHRcdFx0dGhpcy5lbGVtZW50LmNzcyh7XHJcblx0XHRcdFx0XHRcImhlaWdodFwiOiAwLFxyXG5cdFx0XHRcdFx0XCJtaW4taGVpZ2h0XCI6IDAsXHJcblx0XHRcdFx0XHRcIm1heC1oZWlnaHRcIjogMFxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRzY3JvbGxIZWlnaHQgPSB0aGlzLmVsZW1lbnRbIDAgXS5zY3JvbGxIZWlnaHQ7XHJcblx0XHRcdGNsaWVudEhlaWdodCA9IHRoaXMuZWxlbWVudFsgMCBdLmNsaWVudEhlaWdodDtcclxuXHRcdFx0Ym9yZGVyVG9wID0gcGFyc2VGbG9hdCggdGhpcy5lbGVtZW50LmNzcyggXCJib3JkZXItdG9wLXdpZHRoXCIgKSApO1xyXG5cdFx0XHRib3JkZXJCb3R0b20gPSBwYXJzZUZsb2F0KCB0aGlzLmVsZW1lbnQuY3NzKCBcImJvcmRlci1ib3R0b20td2lkdGhcIiApICk7XHJcblx0XHRcdGJvcmRlckhlaWdodCA9IGJvcmRlclRvcCArIGJvcmRlckJvdHRvbTtcclxuXHRcdFx0aGVpZ2h0ID0gc2Nyb2xsSGVpZ2h0ICsgYm9yZGVySGVpZ2h0ICsgMTU7XHJcblxyXG5cdFx0XHQvLyBJc3N1ZSA2MTc5OiBQYWRkaW5nIGlzIG5vdCBpbmNsdWRlZCBpbiBzY3JvbGxIZWlnaHQgYW5kXHJcblx0XHRcdC8vIGNsaWVudEhlaWdodCBieSBGaXJlZm94IGlmIG5vIHNjcm9sbGJhciBpcyB2aXNpYmxlLiBCZWNhdXNlXHJcblx0XHRcdC8vIHRleHRhcmVhcyB1c2UgdGhlIGJvcmRlci1ib3ggYm94LXNpemluZyBtb2RlbCwgcGFkZGluZyBzaG91bGQgYmVcclxuXHRcdFx0Ly8gaW5jbHVkZWQgaW4gdGhlIG5ldyAoYXNzaWduZWQpIGhlaWdodC4gQmVjYXVzZSB0aGUgaGVpZ2h0IGlzIHNldFxyXG5cdFx0XHQvLyB0byAwLCBjbGllbnRIZWlnaHQgPT0gMCBpbiBGaXJlZm94LiBUaGVyZWZvcmUsIHdlIGNhbiB1c2UgdGhpcyB0b1xyXG5cdFx0XHQvLyBjaGVjayBpZiBwYWRkaW5nIG11c3QgYmUgYWRkZWQuXHJcblx0XHRcdGlmICggY2xpZW50SGVpZ2h0ID09PSAwICkge1xyXG5cdFx0XHRcdHBhZGRpbmdUb3AgPSBwYXJzZUZsb2F0KCB0aGlzLmVsZW1lbnQuY3NzKCBcInBhZGRpbmctdG9wXCIgKSApO1xyXG5cdFx0XHRcdHBhZGRpbmdCb3R0b20gPSBwYXJzZUZsb2F0KCB0aGlzLmVsZW1lbnQuY3NzKCBcInBhZGRpbmctYm90dG9tXCIgKSApO1xyXG5cdFx0XHRcdHBhZGRpbmdIZWlnaHQgPSBwYWRkaW5nVG9wICsgcGFkZGluZ0JvdHRvbTtcclxuXHJcblx0XHRcdFx0aGVpZ2h0ICs9IHBhZGRpbmdIZWlnaHQ7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHRoaXMuZWxlbWVudC5jc3Moe1xyXG5cdFx0XHRcdFwiaGVpZ2h0XCI6IGhlaWdodCxcclxuXHRcdFx0XHRcIm1pbi1oZWlnaHRcIjogXCJcIixcclxuXHRcdFx0XHRcIm1heC1oZWlnaHRcIjogXCJcIlxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdHRoaXMud2luZG93LnNjcm9sbFRvcCggc2Nyb2xsVG9wICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdHJlZnJlc2g6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpZiAoIHRoaXMub3B0aW9ucy5hdXRvZ3JvdyAmJiB0aGlzLmlzVGV4dGFyZWEgKSB7XHJcblx0XHRcdFx0dGhpcy5fdXBkYXRlSGVpZ2h0KCk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblxyXG5cdFx0X3NldE9wdGlvbnM6IGZ1bmN0aW9uKCBvcHRpb25zICkge1xyXG5cclxuXHRcdFx0dGhpcy5fc3VwZXIoIG9wdGlvbnMgKTtcclxuXHJcblx0XHRcdGlmICggb3B0aW9ucy5hdXRvZ3JvdyAhPT0gdW5kZWZpbmVkICYmIHRoaXMuaXNUZXh0YXJlYSApIHtcclxuXHRcdFx0XHRpZiAoIG9wdGlvbnMuYXV0b2dyb3cgKSB7XHJcblx0XHRcdFx0XHR0aGlzLl9hdXRvZ3JvdygpO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHR0aGlzLl91bmJpbmRBdXRvZ3JvdygpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHR9KTtcclxufSkoIGpRdWVyeSApO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG4kLndpZGdldCggXCJtb2JpbGUuc2VsZWN0bWVudVwiLCAkLmV4dGVuZCgge1xyXG5cdGluaXRTZWxlY3RvcjogXCJzZWxlY3Q6bm90KCA6anFtRGF0YShyb2xlPSdzbGlkZXInKSk6bm90KCA6anFtRGF0YShyb2xlPSdmbGlwc3dpdGNoJykgKVwiLFxyXG5cclxuXHRvcHRpb25zOiB7XHJcblx0XHR0aGVtZTogbnVsbCxcclxuXHRcdGljb246IFwiY2FyYXQtZFwiLFxyXG5cdFx0aWNvbnBvczogXCJyaWdodFwiLFxyXG5cdFx0aW5saW5lOiBmYWxzZSxcclxuXHRcdGNvcm5lcnM6IHRydWUsXHJcblx0XHRzaGFkb3c6IHRydWUsXHJcblx0XHRpY29uc2hhZG93OiBmYWxzZSwgLyogVE9ETzogRGVwcmVjYXRlZCBpbiAxLjQsIHJlbW92ZSBpbiAxLjUuICovXHJcblx0XHRvdmVybGF5VGhlbWU6IG51bGwsXHJcblx0XHRkaXZpZGVyVGhlbWU6IG51bGwsXHJcblx0XHRoaWRlUGxhY2Vob2xkZXJNZW51SXRlbXM6IHRydWUsXHJcblx0XHRjbG9zZVRleHQ6IFwiQ2xvc2VcIixcclxuXHRcdG5hdGl2ZU1lbnU6IHRydWUsXHJcblx0XHQvLyBUaGlzIG9wdGlvbiBkZWZhdWx0cyB0byB0cnVlIG9uIGlPUyBkZXZpY2VzLlxyXG5cdFx0cHJldmVudEZvY3VzWm9vbTogL2lQaG9uZXxpUGFkfGlQb2QvLnRlc3QoIG5hdmlnYXRvci5wbGF0Zm9ybSApICYmIG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZiggXCJBcHBsZVdlYktpdFwiICkgPiAtMSxcclxuXHRcdG1pbmk6IGZhbHNlXHJcblx0fSxcclxuXHJcblx0X2J1dHRvbjogZnVuY3Rpb24oKSB7XHJcblx0XHRyZXR1cm4gJCggXCI8ZGl2Lz5cIiApO1xyXG5cdH0sXHJcblxyXG5cdF9zZXREaXNhYmxlZDogZnVuY3Rpb24oIHZhbHVlICkge1xyXG5cdFx0dGhpcy5lbGVtZW50LmF0dHIoIFwiZGlzYWJsZWRcIiwgdmFsdWUgKTtcclxuXHRcdHRoaXMuYnV0dG9uLmF0dHIoIFwiYXJpYS1kaXNhYmxlZFwiLCB2YWx1ZSApO1xyXG5cdFx0cmV0dXJuIHRoaXMuX3NldE9wdGlvbiggXCJkaXNhYmxlZFwiLCB2YWx1ZSApO1xyXG5cdH0sXHJcblxyXG5cdF9mb2N1c0J1dHRvbiA6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuXHRcdHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRzZWxmLmJ1dHRvbi5mb2N1cygpO1xyXG5cdFx0fSwgNDApO1xyXG5cdH0sXHJcblxyXG5cdF9zZWxlY3RPcHRpb25zOiBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiB0aGlzLnNlbGVjdC5maW5kKCBcIm9wdGlvblwiICk7XHJcblx0fSxcclxuXHJcblx0Ly8gc2V0dXAgaXRlbXMgdGhhdCBhcmUgZ2VuZXJhbGx5IG5lY2Vzc2FyeSBmb3Igc2VsZWN0IG1lbnUgZXh0ZW5zaW9uXHJcblx0X3ByZUV4dGVuc2lvbjogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgaW5saW5lID0gdGhpcy5vcHRpb25zLmlubGluZSB8fCB0aGlzLmVsZW1lbnQuanFtRGF0YSggXCJpbmxpbmVcIiApLFxyXG5cdFx0XHRtaW5pID0gdGhpcy5vcHRpb25zLm1pbmkgfHwgdGhpcy5lbGVtZW50LmpxbURhdGEoIFwibWluaVwiICksXHJcblx0XHRcdGNsYXNzZXMgPSBcIlwiO1xyXG5cdFx0Ly8gVE9ETzogUG9zdCAxLjEtLW9uY2Ugd2UgaGF2ZSB0aW1lIHRvIHRlc3QgdGhvcm91Z2hseS0tYW55IGNsYXNzZXMgbWFudWFsbHkgYXBwbGllZCB0byB0aGUgb3JpZ2luYWwgZWxlbWVudCBzaG91bGQgYmUgY2FycmllZCBvdmVyIHRvIHRoZSBlbmhhbmNlZCBlbGVtZW50LCB3aXRoIGFuIGAtZW5oYW5jZWRgIHN1ZmZpeC4gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9qcXVlcnkvanF1ZXJ5LW1vYmlsZS9pc3N1ZXMvMzU3N1xyXG5cdFx0LyogaWYgKCAkZWxbMF0uY2xhc3NOYW1lLmxlbmd0aCApIHtcclxuXHRcdFx0Y2xhc3NlcyA9ICRlbFswXS5jbGFzc05hbWU7XHJcblx0XHR9ICovXHJcblx0XHRpZiAoICEhfnRoaXMuZWxlbWVudFswXS5jbGFzc05hbWUuaW5kZXhPZiggXCJ1aS1idG4tbGVmdFwiICkgKSB7XHJcblx0XHRcdGNsYXNzZXMgPSBcIiB1aS1idG4tbGVmdFwiO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggICEhfnRoaXMuZWxlbWVudFswXS5jbGFzc05hbWUuaW5kZXhPZiggXCJ1aS1idG4tcmlnaHRcIiApICkge1xyXG5cdFx0XHRjbGFzc2VzID0gXCIgdWktYnRuLXJpZ2h0XCI7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBpbmxpbmUgKSB7XHJcblx0XHRcdGNsYXNzZXMgKz0gXCIgdWktYnRuLWlubGluZVwiO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCBtaW5pICkge1xyXG5cdFx0XHRjbGFzc2VzICs9IFwiIHVpLW1pbmlcIjtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLnNlbGVjdCA9IHRoaXMuZWxlbWVudC5yZW1vdmVDbGFzcyggXCJ1aS1idG4tbGVmdCB1aS1idG4tcmlnaHRcIiApLndyYXAoIFwiPGRpdiBjbGFzcz0ndWktc2VsZWN0XCIgKyBjbGFzc2VzICsgXCInPlwiICk7XHJcblx0XHR0aGlzLnNlbGVjdElkICA9IHRoaXMuc2VsZWN0LmF0dHIoIFwiaWRcIiApIHx8ICggXCJzZWxlY3QtXCIgKyB0aGlzLnV1aWQgKTtcclxuXHRcdHRoaXMuYnV0dG9uSWQgPSB0aGlzLnNlbGVjdElkICsgXCItYnV0dG9uXCI7XHJcblx0XHR0aGlzLmxhYmVsID0gJCggXCJsYWJlbFtmb3I9J1wiKyB0aGlzLnNlbGVjdElkICtcIiddXCIgKTtcclxuXHRcdHRoaXMuaXNNdWx0aXBsZSA9IHRoaXMuc2VsZWN0WyAwIF0ubXVsdGlwbGU7XHJcblx0fSxcclxuXHJcblx0X2Rlc3Ryb3k6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHdyYXBwZXIgPSB0aGlzLmVsZW1lbnQucGFyZW50cyggXCIudWktc2VsZWN0XCIgKTtcclxuXHRcdGlmICggd3JhcHBlci5sZW5ndGggPiAwICkge1xyXG5cdFx0XHRpZiAoIHdyYXBwZXIuaXMoIFwiLnVpLWJ0bi1sZWZ0LCAudWktYnRuLXJpZ2h0XCIgKSApIHtcclxuXHRcdFx0XHR0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoIHdyYXBwZXIuaGFzQ2xhc3MoIFwidWktYnRuLWxlZnRcIiApID8gXCJ1aS1idG4tbGVmdFwiIDogXCJ1aS1idG4tcmlnaHRcIiApO1xyXG5cdFx0XHR9XHJcblx0XHRcdHRoaXMuZWxlbWVudC5pbnNlcnRBZnRlciggd3JhcHBlciApO1xyXG5cdFx0XHR3cmFwcGVyLnJlbW92ZSgpO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9jcmVhdGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5fcHJlRXh0ZW5zaW9uKCk7XHJcblxyXG5cdFx0dGhpcy5idXR0b24gPSB0aGlzLl9idXR0b24oKTtcclxuXHJcblx0XHR2YXIgc2VsZiA9IHRoaXMsXHJcblxyXG5cdFx0XHRvcHRpb25zID0gdGhpcy5vcHRpb25zLFxyXG5cclxuXHRcdFx0aWNvbnBvcyA9IG9wdGlvbnMuaWNvbiA/ICggb3B0aW9ucy5pY29ucG9zIHx8IHRoaXMuc2VsZWN0LmpxbURhdGEoIFwiaWNvbnBvc1wiICkgKSA6IGZhbHNlLFxyXG5cclxuXHRcdFx0YnV0dG9uID0gdGhpcy5idXR0b25cclxuXHRcdFx0XHQuaW5zZXJ0QmVmb3JlKCB0aGlzLnNlbGVjdCApXHJcblx0XHRcdFx0LmF0dHIoIFwiaWRcIiwgdGhpcy5idXR0b25JZCApXHJcblx0XHRcdFx0LmFkZENsYXNzKCBcInVpLWJ0blwiICtcclxuXHRcdFx0XHRcdCggb3B0aW9ucy5pY29uID8gKCBcIiB1aS1pY29uLVwiICsgb3B0aW9ucy5pY29uICsgXCIgdWktYnRuLWljb24tXCIgKyBpY29ucG9zICtcclxuXHRcdFx0XHRcdCggb3B0aW9ucy5pY29uc2hhZG93ID8gXCIgdWktc2hhZG93LWljb25cIiA6IFwiXCIgKSApIDpcdFwiXCIgKSArIC8qIFRPRE86IFJlbW92ZSBpbiAxLjUuICovXHJcblx0XHRcdFx0XHQoIG9wdGlvbnMudGhlbWUgPyBcIiB1aS1idG4tXCIgKyBvcHRpb25zLnRoZW1lIDogXCJcIiApICtcclxuXHRcdFx0XHRcdCggb3B0aW9ucy5jb3JuZXJzID8gXCIgdWktY29ybmVyLWFsbFwiIDogXCJcIiApICtcclxuXHRcdFx0XHRcdCggb3B0aW9ucy5zaGFkb3cgPyBcIiB1aS1zaGFkb3dcIiA6IFwiXCIgKSApO1xyXG5cclxuXHRcdHRoaXMuc2V0QnV0dG9uVGV4dCgpO1xyXG5cclxuXHRcdC8vIE9wZXJhIGRvZXMgbm90IHByb3Blcmx5IHN1cHBvcnQgb3BhY2l0eSBvbiBzZWxlY3QgZWxlbWVudHNcclxuXHRcdC8vIEluIE1pbmksIGl0IGhpZGVzIHRoZSBlbGVtZW50LCBidXQgbm90IGl0cyB0ZXh0XHJcblx0XHQvLyBPbiB0aGUgZGVza3RvcCxpdCBzZWVtcyB0byBkbyB0aGUgb3Bwb3NpdGVcclxuXHRcdC8vIGZvciB0aGVzZSByZWFzb25zLCB1c2luZyB0aGUgbmF0aXZlTWVudSBvcHRpb24gcmVzdWx0cyBpbiBhIGZ1bGwgbmF0aXZlIHNlbGVjdCBpbiBPcGVyYVxyXG5cdFx0aWYgKCBvcHRpb25zLm5hdGl2ZU1lbnUgJiYgd2luZG93Lm9wZXJhICYmIHdpbmRvdy5vcGVyYS52ZXJzaW9uICkge1xyXG5cdFx0XHRidXR0b24uYWRkQ2xhc3MoIFwidWktc2VsZWN0LW5hdGl2ZW9ubHlcIiApO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEFkZCBjb3VudGVyIGZvciBtdWx0aSBzZWxlY3RzXHJcblx0XHRpZiAoIHRoaXMuaXNNdWx0aXBsZSApIHtcclxuXHRcdFx0dGhpcy5idXR0b25Db3VudCA9ICQoIFwiPHNwYW4+XCIgKVxyXG5cdFx0XHRcdC5hZGRDbGFzcyggXCJ1aS1saS1jb3VudCB1aS1ib2R5LWluaGVyaXRcIiApXHJcblx0XHRcdFx0LmhpZGUoKVxyXG5cdFx0XHRcdC5hcHBlbmRUbyggYnV0dG9uLmFkZENsYXNzKCBcInVpLWxpLWhhcy1jb3VudFwiICkgKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBEaXNhYmxlIGlmIHNwZWNpZmllZFxyXG5cdFx0aWYgKCBvcHRpb25zLmRpc2FibGVkIHx8IHRoaXMuZWxlbWVudC5hdHRyKCBcImRpc2FibGVkXCIgKSkge1xyXG5cdFx0XHR0aGlzLmRpc2FibGUoKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBFdmVudHMgb24gbmF0aXZlIHNlbGVjdFxyXG5cdFx0dGhpcy5zZWxlY3QuY2hhbmdlKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRzZWxmLnJlZnJlc2goKTtcclxuXHJcblx0XHRcdGlmICggISFvcHRpb25zLm5hdGl2ZU1lbnUgKSB7XHJcblx0XHRcdFx0c2VsZi5fZGVsYXkoIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0c2VsZi5zZWxlY3QuYmx1cigpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLl9oYW5kbGVGb3JtUmVzZXQoKTtcclxuXHJcblx0XHR0aGlzLl9vbiggdGhpcy5idXR0b24sIHtcclxuXHRcdFx0a2V5ZG93bjogXCJfaGFuZGxlS2V5ZG93blwiXHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLmJ1aWxkKCk7XHJcblx0fSxcclxuXHJcblx0YnVpbGQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuXHRcdHRoaXMuc2VsZWN0XHJcblx0XHRcdC5hcHBlbmRUbyggc2VsZi5idXR0b24gKVxyXG5cdFx0XHQuYmluZCggXCJ2bW91c2Vkb3duXCIsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdC8vIEFkZCBhY3RpdmUgY2xhc3MgdG8gYnV0dG9uXHJcblx0XHRcdFx0c2VsZi5idXR0b24uYWRkQ2xhc3MoICQubW9iaWxlLmFjdGl2ZUJ0bkNsYXNzICk7XHJcblx0XHRcdH0pXHJcblx0XHRcdC5iaW5kKCBcImZvY3VzXCIsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHNlbGYuYnV0dG9uLmFkZENsYXNzKCAkLm1vYmlsZS5mb2N1c0NsYXNzICk7XHJcblx0XHRcdH0pXHJcblx0XHRcdC5iaW5kKCBcImJsdXJcIiwgZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0c2VsZi5idXR0b24ucmVtb3ZlQ2xhc3MoICQubW9iaWxlLmZvY3VzQ2xhc3MgKTtcclxuXHRcdFx0fSlcclxuXHRcdFx0LmJpbmQoIFwiZm9jdXMgdm1vdXNlb3ZlclwiLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRzZWxmLmJ1dHRvbi50cmlnZ2VyKCBcInZtb3VzZW92ZXJcIiApO1xyXG5cdFx0XHR9KVxyXG5cdFx0XHQuYmluZCggXCJ2bW91c2Vtb3ZlXCIsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdC8vIFJlbW92ZSBhY3RpdmUgY2xhc3Mgb24gc2Nyb2xsL3RvdWNobW92ZVxyXG5cdFx0XHRcdHNlbGYuYnV0dG9uLnJlbW92ZUNsYXNzKCAkLm1vYmlsZS5hY3RpdmVCdG5DbGFzcyApO1xyXG5cdFx0XHR9KVxyXG5cdFx0XHQuYmluZCggXCJjaGFuZ2UgYmx1ciB2bW91c2VvdXRcIiwgZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0c2VsZi5idXR0b24udHJpZ2dlciggXCJ2bW91c2VvdXRcIiApXHJcblx0XHRcdFx0XHQucmVtb3ZlQ2xhc3MoICQubW9iaWxlLmFjdGl2ZUJ0bkNsYXNzICk7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdC8vIEluIG1hbnkgc2l0dWF0aW9ucywgaU9TIHdpbGwgem9vbSBpbnRvIHRoZSBzZWxlY3QgdXBvbiB0YXAsIHRoaXMgcHJldmVudHMgdGhhdCBmcm9tIGhhcHBlbmluZ1xyXG5cdFx0c2VsZi5idXR0b24uYmluZCggXCJ2bW91c2Vkb3duXCIsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpZiAoIHNlbGYub3B0aW9ucy5wcmV2ZW50Rm9jdXNab29tICkge1xyXG5cdFx0XHRcdFx0JC5tb2JpbGUuem9vbS5kaXNhYmxlKCB0cnVlICk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdFx0c2VsZi5sYWJlbC5iaW5kKCBcImNsaWNrIGZvY3VzXCIsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpZiAoIHNlbGYub3B0aW9ucy5wcmV2ZW50Rm9jdXNab29tICkge1xyXG5cdFx0XHRcdFx0JC5tb2JpbGUuem9vbS5kaXNhYmxlKCB0cnVlICk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdFx0c2VsZi5zZWxlY3QuYmluZCggXCJmb2N1c1wiLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0aWYgKCBzZWxmLm9wdGlvbnMucHJldmVudEZvY3VzWm9vbSApIHtcclxuXHRcdFx0XHRcdCQubW9iaWxlLnpvb20uZGlzYWJsZSggdHJ1ZSApO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHRcdHNlbGYuYnV0dG9uLmJpbmQoIFwibW91c2V1cFwiLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0aWYgKCBzZWxmLm9wdGlvbnMucHJldmVudEZvY3VzWm9vbSApIHtcclxuXHRcdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0JC5tb2JpbGUuem9vbS5lbmFibGUoIHRydWUgKTtcclxuXHRcdFx0XHR9LCAwICk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdFx0c2VsZi5zZWxlY3QuYmluZCggXCJibHVyXCIsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpZiAoIHNlbGYub3B0aW9ucy5wcmV2ZW50Rm9jdXNab29tICkge1xyXG5cdFx0XHRcdCQubW9iaWxlLnpvb20uZW5hYmxlKCB0cnVlICk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHR9LFxyXG5cclxuXHRzZWxlY3RlZDogZnVuY3Rpb24oKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5fc2VsZWN0T3B0aW9ucygpLmZpbHRlciggXCI6c2VsZWN0ZWRcIiApO1xyXG5cdH0sXHJcblxyXG5cdHNlbGVjdGVkSW5kaWNlczogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXMuc2VsZWN0ZWQoKS5tYXAoZnVuY3Rpb24oKSB7XHJcblx0XHRcdHJldHVybiBzZWxmLl9zZWxlY3RPcHRpb25zKCkuaW5kZXgoIHRoaXMgKTtcclxuXHRcdH0pLmdldCgpO1xyXG5cdH0sXHJcblxyXG5cdHNldEJ1dHRvblRleHQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHNlbGYgPSB0aGlzLFxyXG5cdFx0XHRzZWxlY3RlZCA9IHRoaXMuc2VsZWN0ZWQoKSxcclxuXHRcdFx0dGV4dCA9IHRoaXMucGxhY2Vob2xkZXIsXHJcblx0XHRcdHNwYW4gPSAkKCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcInNwYW5cIiApICk7XHJcblxyXG5cdFx0dGhpcy5idXR0b24uY2hpbGRyZW4oIFwic3BhblwiICkubm90KCBcIi51aS1saS1jb3VudFwiICkucmVtb3ZlKCkuZW5kKCkuZW5kKCkucHJlcGVuZCggKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpZiAoIHNlbGVjdGVkLmxlbmd0aCApIHtcclxuXHRcdFx0XHR0ZXh0ID0gc2VsZWN0ZWQubWFwKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0cmV0dXJuICQoIHRoaXMgKS50ZXh0KCk7XHJcblx0XHRcdFx0fSkuZ2V0KCkuam9pbiggXCIsIFwiICk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0dGV4dCA9IHNlbGYucGxhY2Vob2xkZXI7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICggdGV4dCApIHtcclxuXHRcdFx0XHRzcGFuLnRleHQoIHRleHQgKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHJcblx0XHRcdFx0Ly8gU2V0IHRoZSBjb250ZW50cyB0byAmbmJzcDsgd2hpY2ggd2Ugd3JpdGUgYXMgJiMxNjA7IHRvIGJlIFhIVE1MIGNvbXBsaWFudCAtIHNlZSBnaC02Njk5XHJcblx0XHRcdFx0c3Bhbi5odG1sKCBcIiYjMTYwO1wiICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIFRPRE8gcG9zc2libHkgYWdncmVnYXRlIG11bHRpcGxlIHNlbGVjdCBvcHRpb24gY2xhc3Nlc1xyXG5cdFx0XHRyZXR1cm4gc3BhblxyXG5cdFx0XHRcdC5hZGRDbGFzcyggc2VsZi5zZWxlY3QuYXR0ciggXCJjbGFzc1wiICkgKVxyXG5cdFx0XHRcdC5hZGRDbGFzcyggc2VsZWN0ZWQuYXR0ciggXCJjbGFzc1wiICkgKVxyXG5cdFx0XHRcdC5yZW1vdmVDbGFzcyggXCJ1aS1zY3JlZW4taGlkZGVuXCIgKTtcclxuXHRcdH0pKCkpO1xyXG5cdH0sXHJcblxyXG5cdHNldEJ1dHRvbkNvdW50OiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBzZWxlY3RlZCA9IHRoaXMuc2VsZWN0ZWQoKTtcclxuXHJcblx0XHQvLyBtdWx0aXBsZSBjb3VudCBpbnNpZGUgYnV0dG9uXHJcblx0XHRpZiAoIHRoaXMuaXNNdWx0aXBsZSApIHtcclxuXHRcdFx0dGhpcy5idXR0b25Db3VudFsgc2VsZWN0ZWQubGVuZ3RoID4gMSA/IFwic2hvd1wiIDogXCJoaWRlXCIgXSgpLnRleHQoIHNlbGVjdGVkLmxlbmd0aCApO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9oYW5kbGVLZXlkb3duOiBmdW5jdGlvbiggLyogZXZlbnQgKi8gKSB7XHJcblx0XHR0aGlzLl9kZWxheSggXCJfcmVmcmVzaEJ1dHRvblwiICk7XHJcblx0fSxcclxuXHJcblx0X3Jlc2V0OiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMucmVmcmVzaCgpO1xyXG5cdH0sXHJcblxyXG5cdF9yZWZyZXNoQnV0dG9uOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuc2V0QnV0dG9uVGV4dCgpO1xyXG5cdFx0dGhpcy5zZXRCdXR0b25Db3VudCgpO1xyXG5cdH0sXHJcblxyXG5cdHJlZnJlc2g6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5fcmVmcmVzaEJ1dHRvbigpO1xyXG5cdH0sXHJcblxyXG5cdC8vIG9wZW4gYW5kIGNsb3NlIHByZXNlcnZlZCBpbiBuYXRpdmUgc2VsZWN0c1xyXG5cdC8vIHRvIHNpbXBsaWZ5IHVzZXJzIGNvZGUgd2hlbiBsb29waW5nIG92ZXIgc2VsZWN0c1xyXG5cdG9wZW46ICQubm9vcCxcclxuXHRjbG9zZTogJC5ub29wLFxyXG5cclxuXHRkaXNhYmxlOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX3NldERpc2FibGVkKCB0cnVlICk7XHJcblx0XHR0aGlzLmJ1dHRvbi5hZGRDbGFzcyggXCJ1aS1zdGF0ZS1kaXNhYmxlZFwiICk7XHJcblx0fSxcclxuXHJcblx0ZW5hYmxlOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX3NldERpc2FibGVkKCBmYWxzZSApO1xyXG5cdFx0dGhpcy5idXR0b24ucmVtb3ZlQ2xhc3MoIFwidWktc3RhdGUtZGlzYWJsZWRcIiApO1xyXG5cdH1cclxufSwgJC5tb2JpbGUuYmVoYXZpb3JzLmZvcm1SZXNldCApICk7XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcbiQubW9iaWxlLmxpbmtzID0gZnVuY3Rpb24oIHRhcmdldCApIHtcclxuXHJcblx0Ly9saW5rcyB3aXRoaW4gY29udGVudCBhcmVhcywgdGVzdHMgaW5jbHVkZWQgd2l0aCBwYWdlXHJcblx0JCggdGFyZ2V0IClcclxuXHRcdC5maW5kKCBcImFcIiApXHJcblx0XHQuanFtRW5oYW5jZWFibGUoKVxyXG5cdFx0LmZpbHRlciggXCI6anFtRGF0YShyZWw9J3BvcHVwJylbaHJlZl1baHJlZiE9JyddXCIgKVxyXG5cdFx0LmVhY2goIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHQvLyBBY2Nlc3NpYmlsaXR5IGluZm8gZm9yIHBvcHVwc1xyXG5cdFx0XHR2YXIgZWxlbWVudCA9IHRoaXMsXHJcblx0XHRcdFx0aWRyZWYgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSggXCJocmVmXCIgKS5zdWJzdHJpbmcoIDEgKTtcclxuXHJcblx0XHRcdGlmICggaWRyZWYgKSB7XHJcblx0XHRcdFx0ZWxlbWVudC5zZXRBdHRyaWJ1dGUoIFwiYXJpYS1oYXNwb3B1cFwiLCB0cnVlICk7XHJcblx0XHRcdFx0ZWxlbWVudC5zZXRBdHRyaWJ1dGUoIFwiYXJpYS1vd25zXCIsIGlkcmVmICk7XHJcblx0XHRcdFx0ZWxlbWVudC5zZXRBdHRyaWJ1dGUoIFwiYXJpYS1leHBhbmRlZFwiLCBmYWxzZSApO1xyXG5cdFx0XHR9XHJcblx0XHR9KVxyXG5cdFx0LmVuZCgpXHJcblx0XHQubm90KCBcIi51aS1idG4sIDpqcW1EYXRhKHJvbGU9J25vbmUnKSwgOmpxbURhdGEocm9sZT0nbm9qcycpXCIgKVxyXG5cdFx0LmFkZENsYXNzKCBcInVpLWxpbmtcIiApO1xyXG5cclxufTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcbmZ1bmN0aW9uIGZpdFNlZ21lbnRJbnNpZGVTZWdtZW50KCB3aW5kb3dTaXplLCBzZWdtZW50U2l6ZSwgb2Zmc2V0LCBkZXNpcmVkICkge1xyXG5cdHZhciByZXR1cm5WYWx1ZSA9IGRlc2lyZWQ7XHJcblxyXG5cdGlmICggd2luZG93U2l6ZSA8IHNlZ21lbnRTaXplICkge1xyXG5cdFx0Ly8gQ2VudGVyIHNlZ21lbnQgaWYgaXQncyBiaWdnZXIgdGhhbiB0aGUgd2luZG93XHJcblx0XHRyZXR1cm5WYWx1ZSA9IG9mZnNldCArICggd2luZG93U2l6ZSAtIHNlZ21lbnRTaXplICkgLyAyO1xyXG5cdH0gZWxzZSB7XHJcblx0XHQvLyBPdGhlcndpc2UgY2VudGVyIGl0IGF0IHRoZSBkZXNpcmVkIGNvb3JkaW5hdGUgd2hpbGUga2VlcGluZyBpdCBjb21wbGV0ZWx5IGluc2lkZSB0aGUgd2luZG93XHJcblx0XHRyZXR1cm5WYWx1ZSA9IE1hdGgubWluKCBNYXRoLm1heCggb2Zmc2V0LCBkZXNpcmVkIC0gc2VnbWVudFNpemUgLyAyICksIG9mZnNldCArIHdpbmRvd1NpemUgLSBzZWdtZW50U2l6ZSApO1xyXG5cdH1cclxuXHJcblx0cmV0dXJuIHJldHVyblZhbHVlO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRXaW5kb3dDb29yZGluYXRlcyggdGhlV2luZG93ICkge1xyXG5cdHJldHVybiB7XHJcblx0XHR4OiB0aGVXaW5kb3cuc2Nyb2xsTGVmdCgpLFxyXG5cdFx0eTogdGhlV2luZG93LnNjcm9sbFRvcCgpLFxyXG5cdFx0Y3g6ICggdGhlV2luZG93WyAwIF0uaW5uZXJXaWR0aCB8fCB0aGVXaW5kb3cud2lkdGgoKSApLFxyXG5cdFx0Y3k6ICggdGhlV2luZG93WyAwIF0uaW5uZXJIZWlnaHQgfHwgdGhlV2luZG93LmhlaWdodCgpIClcclxuXHR9O1xyXG59XHJcblxyXG4kLndpZGdldCggXCJtb2JpbGUucG9wdXBcIiwge1xyXG5cdG9wdGlvbnM6IHtcclxuXHRcdHdyYXBwZXJDbGFzczogbnVsbCxcclxuXHRcdHRoZW1lOiBudWxsLFxyXG5cdFx0b3ZlcmxheVRoZW1lOiBudWxsLFxyXG5cdFx0c2hhZG93OiB0cnVlLFxyXG5cdFx0Y29ybmVyczogdHJ1ZSxcclxuXHRcdHRyYW5zaXRpb246IFwibm9uZVwiLFxyXG5cdFx0cG9zaXRpb25UbzogXCJvcmlnaW5cIixcclxuXHRcdHRvbGVyYW5jZTogbnVsbCxcclxuXHRcdGNsb3NlTGlua1NlbGVjdG9yOiBcImE6anFtRGF0YShyZWw9J2JhY2snKVwiLFxyXG5cdFx0Y2xvc2VMaW5rRXZlbnRzOiBcImNsaWNrLnBvcHVwXCIsXHJcblx0XHRuYXZpZ2F0ZUV2ZW50czogXCJuYXZpZ2F0ZS5wb3B1cFwiLFxyXG5cdFx0Y2xvc2VFdmVudHM6IFwibmF2aWdhdGUucG9wdXAgcGFnZWJlZm9yZWNoYW5nZS5wb3B1cFwiLFxyXG5cdFx0ZGlzbWlzc2libGU6IHRydWUsXHJcblx0XHRlbmhhbmNlZDogZmFsc2UsXHJcblxyXG5cdFx0Ly8gTk9URSBXaW5kb3dzIFBob25lIDcgaGFzIGEgc2Nyb2xsIHBvc2l0aW9uIGNhY2hpbmcgaXNzdWUgdGhhdFxyXG5cdFx0Ly8gICAgICByZXF1aXJlcyB1cyB0byBkaXNhYmxlIHBvcHVwIGhpc3RvcnkgbWFuYWdlbWVudCBieSBkZWZhdWx0XHJcblx0XHQvLyAgICAgIGh0dHBzOi8vZ2l0aHViLmNvbS9qcXVlcnkvanF1ZXJ5LW1vYmlsZS9pc3N1ZXMvNDc4NFxyXG5cdFx0Ly9cclxuXHRcdC8vIE5PVEUgdGhpcyBvcHRpb24gaXMgbW9kaWZpZWQgaW4gX2NyZWF0ZSFcclxuXHRcdGhpc3Rvcnk6ICEkLm1vYmlsZS5icm93c2VyLm9sZElFXHJcblx0fSxcclxuXHJcblx0Ly8gV2hlbiB0aGUgdXNlciBkZXByZXNzZXMgdGhlIG1vdXNlL2ZpbmdlciBvbiBhbiBlbGVtZW50IGluc2lkZSB0aGUgcG9wdXAgd2hpbGUgdGhlIHBvcHVwIGlzXHJcblx0Ly8gb3Blbiwgd2UgaWdub3JlIHJlc2l6ZSBldmVudHMgZm9yIGEgc2hvcnQgd2hpbGUuIFRoaXMgcHJldmVudHMgIzY5NjEuXHJcblx0X2hhbmRsZURvY3VtZW50Vm1vdXNlZG93bjogZnVuY3Rpb24oIHRoZUV2ZW50ICkge1xyXG5cdFx0aWYgKCB0aGlzLl9pc09wZW4gJiYgJC5jb250YWlucyggdGhpcy5fdWkuY29udGFpbmVyWyAwIF0sIHRoZUV2ZW50LnRhcmdldCApICkge1xyXG5cdFx0XHR0aGlzLl9pZ25vcmVSZXNpemVFdmVudHMoKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfY3JlYXRlOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciB0aGVFbGVtZW50ID0gdGhpcy5lbGVtZW50LFxyXG5cdFx0XHRteUlkID0gdGhlRWxlbWVudC5hdHRyKCBcImlkXCIgKSxcclxuXHRcdFx0Y3VycmVudE9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XHJcblxyXG5cdFx0Ly8gV2UgbmVlZCB0byBhZGp1c3QgdGhlIGhpc3Rvcnkgb3B0aW9uIHRvIGJlIGZhbHNlIGlmIHRoZXJlJ3Mgbm8gQUpBWCBuYXYuXHJcblx0XHQvLyBXZSBjYW4ndCBkbyBpdCBpbiB0aGUgb3B0aW9uIGRlY2xhcmF0aW9ucyBiZWNhdXNlIHRob3NlIGFyZSBydW4gYmVmb3JlXHJcblx0XHQvLyBpdCBpcyBkZXRlcm1pbmVkIHdoZXRoZXIgdGhlcmUgc2hhbGwgYmUgQUpBWCBuYXYuXHJcblx0XHRjdXJyZW50T3B0aW9ucy5oaXN0b3J5ID0gY3VycmVudE9wdGlvbnMuaGlzdG9yeSAmJiAkLm1vYmlsZS5hamF4RW5hYmxlZCAmJiAkLm1vYmlsZS5oYXNoTGlzdGVuaW5nRW5hYmxlZDtcclxuXHJcblx0XHR0aGlzLl9vbiggdGhpcy5kb2N1bWVudCwge1xyXG5cdFx0XHRcInZtb3VzZWRvd25cIjogXCJfaGFuZGxlRG9jdW1lbnRWbW91c2Vkb3duXCJcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIERlZmluZSBpbnN0YW5jZSB2YXJpYWJsZXNcclxuXHRcdCQuZXh0ZW5kKCB0aGlzLCB7XHJcblx0XHRcdF9zY3JvbGxUb3A6IDAsXHJcblx0XHRcdF9wYWdlOiB0aGVFbGVtZW50LmNsb3Nlc3QoIFwiLnVpLXBhZ2VcIiApLFxyXG5cdFx0XHRfdWk6IG51bGwsXHJcblx0XHRcdF9mYWxsYmFja1RyYW5zaXRpb246IFwiXCIsXHJcblx0XHRcdF9jdXJyZW50VHJhbnNpdGlvbjogZmFsc2UsXHJcblx0XHRcdF9wcmVyZXF1aXNpdGVzOiBudWxsLFxyXG5cdFx0XHRfaXNPcGVuOiBmYWxzZSxcclxuXHRcdFx0X3RvbGVyYW5jZTogbnVsbCxcclxuXHRcdFx0X3Jlc2l6ZURhdGE6IG51bGwsXHJcblx0XHRcdF9pZ25vcmVSZXNpemVUbzogMCxcclxuXHRcdFx0X29yaWVudGF0aW9uY2hhbmdlSW5Qcm9ncmVzczogZmFsc2VcclxuXHRcdH0pO1xyXG5cclxuXHRcdGlmICggdGhpcy5fcGFnZS5sZW5ndGggPT09IDAgKSB7XHJcblx0XHRcdHRoaXMuX3BhZ2UgPSAkKCBcImJvZHlcIiApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggY3VycmVudE9wdGlvbnMuZW5oYW5jZWQgKSB7XHJcblx0XHRcdHRoaXMuX3VpID0ge1xyXG5cdFx0XHRcdGNvbnRhaW5lcjogdGhlRWxlbWVudC5wYXJlbnQoKSxcclxuXHRcdFx0XHRzY3JlZW46IHRoZUVsZW1lbnQucGFyZW50KCkucHJldigpLFxyXG5cdFx0XHRcdHBsYWNlaG9sZGVyOiAkKCB0aGlzLmRvY3VtZW50WyAwIF0uZ2V0RWxlbWVudEJ5SWQoIG15SWQgKyBcIi1wbGFjZWhvbGRlclwiICkgKVxyXG5cdFx0XHR9O1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhpcy5fdWkgPSB0aGlzLl9lbmhhbmNlKCB0aGVFbGVtZW50LCBteUlkICk7XHJcblx0XHRcdHRoaXMuX2FwcGx5VHJhbnNpdGlvbiggY3VycmVudE9wdGlvbnMudHJhbnNpdGlvbiApO1xyXG5cdFx0fVxyXG5cdFx0dGhpc1xyXG5cdFx0XHQuX3NldFRvbGVyYW5jZSggY3VycmVudE9wdGlvbnMudG9sZXJhbmNlIClcclxuXHRcdFx0Ll91aS5mb2N1c0VsZW1lbnQgPSB0aGlzLl91aS5jb250YWluZXI7XHJcblxyXG5cdFx0Ly8gRXZlbnQgaGFuZGxlcnNcclxuXHRcdHRoaXMuX29uKCB0aGlzLl91aS5zY3JlZW4sIHsgXCJ2Y2xpY2tcIjogXCJfZWF0RXZlbnRBbmRDbG9zZVwiIH0gKTtcclxuXHRcdHRoaXMuX29uKCB0aGlzLndpbmRvdywge1xyXG5cdFx0XHRvcmllbnRhdGlvbmNoYW5nZTogJC5wcm94eSggdGhpcywgXCJfaGFuZGxlV2luZG93T3JpZW50YXRpb25jaGFuZ2VcIiApLFxyXG5cdFx0XHRyZXNpemU6ICQucHJveHkoIHRoaXMsIFwiX2hhbmRsZVdpbmRvd1Jlc2l6ZVwiICksXHJcblx0XHRcdGtleXVwOiAkLnByb3h5KCB0aGlzLCBcIl9oYW5kbGVXaW5kb3dLZXlVcFwiIClcclxuXHRcdH0pO1xyXG5cdFx0dGhpcy5fb24oIHRoaXMuZG9jdW1lbnQsIHsgXCJmb2N1c2luXCI6IFwiX2hhbmRsZURvY3VtZW50Rm9jdXNJblwiIH0gKTtcclxuXHR9LFxyXG5cclxuXHRfZW5oYW5jZTogZnVuY3Rpb24oIHRoZUVsZW1lbnQsIG15SWQgKSB7XHJcblx0XHR2YXIgY3VycmVudE9wdGlvbnMgPSB0aGlzLm9wdGlvbnMsXHJcblx0XHRcdHdyYXBwZXJDbGFzcyA9IGN1cnJlbnRPcHRpb25zLndyYXBwZXJDbGFzcyxcclxuXHRcdFx0dWkgPSB7XHJcblx0XHRcdFx0c2NyZWVuOiAkKCBcIjxkaXYgY2xhc3M9J3VpLXNjcmVlbi1oaWRkZW4gdWktcG9wdXAtc2NyZWVuIFwiICtcclxuXHRcdFx0XHR0aGlzLl90aGVtZUNsYXNzRnJvbU9wdGlvbiggXCJ1aS1vdmVybGF5LVwiLCBjdXJyZW50T3B0aW9ucy5vdmVybGF5VGhlbWUgKSArIFwiJz48L2Rpdj5cIiApLFxyXG5cdFx0XHRcdHBsYWNlaG9sZGVyOiAkKCBcIjxkaXYgc3R5bGU9J2Rpc3BsYXk6IG5vbmU7Jz48IS0tIHBsYWNlaG9sZGVyIC0tPjwvZGl2PlwiICksXHJcblx0XHRcdFx0Y29udGFpbmVyOiAkKCBcIjxkaXYgY2xhc3M9J3VpLXBvcHVwLWNvbnRhaW5lciB1aS1wb3B1cC1oaWRkZW4gdWktcG9wdXAtdHJ1bmNhdGVcIiArXHJcblx0XHRcdFx0XHQoIHdyYXBwZXJDbGFzcyA/ICggXCIgXCIgKyB3cmFwcGVyQ2xhc3MgKSA6IFwiXCIgKSArIFwiJz48L2Rpdj5cIiApXHJcblx0XHRcdH0sXHJcblx0XHRcdGZyYWdtZW50ID0gdGhpcy5kb2N1bWVudFsgMCBdLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcclxuXHJcblx0XHRmcmFnbWVudC5hcHBlbmRDaGlsZCggdWkuc2NyZWVuWyAwIF0gKTtcclxuXHRcdGZyYWdtZW50LmFwcGVuZENoaWxkKCB1aS5jb250YWluZXJbIDAgXSApO1xyXG5cclxuXHRcdGlmICggbXlJZCApIHtcclxuXHRcdFx0dWkuc2NyZWVuLmF0dHIoIFwiaWRcIiwgbXlJZCArIFwiLXNjcmVlblwiICk7XHJcblx0XHRcdHVpLmNvbnRhaW5lci5hdHRyKCBcImlkXCIsIG15SWQgKyBcIi1wb3B1cFwiICk7XHJcblx0XHRcdHVpLnBsYWNlaG9sZGVyXHJcblx0XHRcdFx0LmF0dHIoIFwiaWRcIiwgbXlJZCArIFwiLXBsYWNlaG9sZGVyXCIgKVxyXG5cdFx0XHRcdC5odG1sKCBcIjwhLS0gcGxhY2Vob2xkZXIgZm9yIFwiICsgbXlJZCArIFwiIC0tPlwiICk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gQXBwbHkgdGhlIHByb3RvXHJcblx0XHR0aGlzLl9wYWdlWyAwIF0uYXBwZW5kQ2hpbGQoIGZyYWdtZW50ICk7XHJcblx0XHQvLyBMZWF2ZSBhIHBsYWNlaG9sZGVyIHdoZXJlIHRoZSBlbGVtZW50IHVzZWQgdG8gYmVcclxuXHRcdHVpLnBsYWNlaG9sZGVyLmluc2VydEFmdGVyKCB0aGVFbGVtZW50ICk7XHJcblx0XHR0aGVFbGVtZW50XHJcblx0XHRcdC5kZXRhY2goKVxyXG5cdFx0XHQuYWRkQ2xhc3MoIFwidWktcG9wdXAgXCIgK1xyXG5cdFx0XHRcdHRoaXMuX3RoZW1lQ2xhc3NGcm9tT3B0aW9uKCBcInVpLWJvZHktXCIsIGN1cnJlbnRPcHRpb25zLnRoZW1lICkgKyBcIiBcIiArXHJcblx0XHRcdFx0KCBjdXJyZW50T3B0aW9ucy5zaGFkb3cgPyBcInVpLW92ZXJsYXktc2hhZG93IFwiIDogXCJcIiApICtcclxuXHRcdFx0XHQoIGN1cnJlbnRPcHRpb25zLmNvcm5lcnMgPyBcInVpLWNvcm5lci1hbGwgXCIgOiBcIlwiICkgKVxyXG5cdFx0XHQuYXBwZW5kVG8oIHVpLmNvbnRhaW5lciApO1xyXG5cclxuXHRcdHJldHVybiB1aTtcclxuXHR9LFxyXG5cclxuXHRfZWF0RXZlbnRBbmRDbG9zZTogZnVuY3Rpb24oIHRoZUV2ZW50ICkge1xyXG5cdFx0dGhlRXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHRcdHRoZUV2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xyXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMuZGlzbWlzc2libGUgKSB7XHJcblx0XHRcdHRoaXMuY2xvc2UoKTtcclxuXHRcdH1cclxuXHRcdHJldHVybiBmYWxzZTtcclxuXHR9LFxyXG5cclxuXHQvLyBNYWtlIHN1cmUgdGhlIHNjcmVlbiBjb3ZlcnMgdGhlIGVudGlyZSBkb2N1bWVudCAtIENTUyBpcyBzb21ldGltZXMgbm90XHJcblx0Ly8gZW5vdWdoIHRvIGFjY29tcGxpc2ggdGhpcy5cclxuXHRfcmVzaXplU2NyZWVuOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBzY3JlZW4gPSB0aGlzLl91aS5zY3JlZW4sXHJcblx0XHRcdHBvcHVwSGVpZ2h0ID0gdGhpcy5fdWkuY29udGFpbmVyLm91dGVySGVpZ2h0KCB0cnVlICksXHJcblx0XHRcdHNjcmVlbkhlaWdodCA9IHNjcmVlbi5yZW1vdmVBdHRyKCBcInN0eWxlXCIgKS5oZWlnaHQoKSxcclxuXHJcblx0XHRcdC8vIFN1YnRyYWN0aW5nIDEgaGVyZSBpcyBuZWNlc3NhcnkgZm9yIGFuIG9ic2N1cmUgQW5kcmRvaWQgNC4wIGJ1ZyB3aGVyZVxyXG5cdFx0XHQvLyB0aGUgYnJvd3NlciBoYW5ncyBpZiB0aGUgc2NyZWVuIGNvdmVycyB0aGUgZW50aXJlIGRvY3VtZW50IDovXHJcblx0XHRcdGRvY3VtZW50SGVpZ2h0ID0gdGhpcy5kb2N1bWVudC5oZWlnaHQoKSAtIDE7XHJcblxyXG5cdFx0aWYgKCBzY3JlZW5IZWlnaHQgPCBkb2N1bWVudEhlaWdodCApIHtcclxuXHRcdFx0c2NyZWVuLmhlaWdodCggZG9jdW1lbnRIZWlnaHQgKTtcclxuXHRcdH0gZWxzZSBpZiAoIHBvcHVwSGVpZ2h0ID4gc2NyZWVuSGVpZ2h0ICkge1xyXG5cdFx0XHRzY3JlZW4uaGVpZ2h0KCBwb3B1cEhlaWdodCApO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9oYW5kbGVXaW5kb3dLZXlVcDogZnVuY3Rpb24oIHRoZUV2ZW50ICkge1xyXG5cdFx0aWYgKCB0aGlzLl9pc09wZW4gJiYgdGhlRXZlbnQua2V5Q29kZSA9PT0gJC5tb2JpbGUua2V5Q29kZS5FU0NBUEUgKSB7XHJcblx0XHRcdHJldHVybiB0aGlzLl9lYXRFdmVudEFuZENsb3NlKCB0aGVFdmVudCApO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9leHBlY3RSZXNpemVFdmVudDogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgd2luZG93Q29vcmRpbmF0ZXMgPSBnZXRXaW5kb3dDb29yZGluYXRlcyggdGhpcy53aW5kb3cgKTtcclxuXHJcblx0XHRpZiAoIHRoaXMuX3Jlc2l6ZURhdGEgKSB7XHJcblx0XHRcdGlmICggd2luZG93Q29vcmRpbmF0ZXMueCA9PT0gdGhpcy5fcmVzaXplRGF0YS53aW5kb3dDb29yZGluYXRlcy54ICYmXHJcblx0XHRcdFx0d2luZG93Q29vcmRpbmF0ZXMueSA9PT0gdGhpcy5fcmVzaXplRGF0YS53aW5kb3dDb29yZGluYXRlcy55ICYmXHJcblx0XHRcdFx0d2luZG93Q29vcmRpbmF0ZXMuY3ggPT09IHRoaXMuX3Jlc2l6ZURhdGEud2luZG93Q29vcmRpbmF0ZXMuY3ggJiZcclxuXHRcdFx0XHR3aW5kb3dDb29yZGluYXRlcy5jeSA9PT0gdGhpcy5fcmVzaXplRGF0YS53aW5kb3dDb29yZGluYXRlcy5jeSApIHtcclxuXHRcdFx0XHQvLyB0aW1lb3V0IG5vdCByZWZyZXNoZWRcclxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0Ly8gY2xlYXIgZXhpc3RpbmcgdGltZW91dCAtIGl0IHdpbGwgYmUgcmVmcmVzaGVkIGJlbG93XHJcblx0XHRcdFx0Y2xlYXJUaW1lb3V0KCB0aGlzLl9yZXNpemVEYXRhLnRpbWVvdXRJZCApO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5fcmVzaXplRGF0YSA9IHtcclxuXHRcdFx0dGltZW91dElkOiB0aGlzLl9kZWxheSggXCJfcmVzaXplVGltZW91dFwiLCAyMDAgKSxcclxuXHRcdFx0d2luZG93Q29vcmRpbmF0ZXM6IHdpbmRvd0Nvb3JkaW5hdGVzXHJcblx0XHR9O1xyXG5cclxuXHRcdHJldHVybiB0cnVlO1xyXG5cdH0sXHJcblxyXG5cdF9yZXNpemVUaW1lb3V0OiBmdW5jdGlvbigpIHtcclxuXHRcdGlmICggdGhpcy5faXNPcGVuICkge1xyXG5cdFx0XHRpZiAoICF0aGlzLl9leHBlY3RSZXNpemVFdmVudCgpICkge1xyXG5cdFx0XHRcdGlmICggdGhpcy5fdWkuY29udGFpbmVyLmhhc0NsYXNzKCBcInVpLXBvcHVwLWhpZGRlblwiICkgKSB7XHJcblx0XHRcdFx0XHQvLyBlZmZlY3RpdmVseSByYXBpZC1vcGVuIHRoZSBwb3B1cCB3aGlsZSBsZWF2aW5nIHRoZSBzY3JlZW4gaW50YWN0XHJcblx0XHRcdFx0XHR0aGlzLl91aS5jb250YWluZXIucmVtb3ZlQ2xhc3MoIFwidWktcG9wdXAtaGlkZGVuIHVpLXBvcHVwLXRydW5jYXRlXCIgKTtcclxuXHRcdFx0XHRcdHRoaXMucmVwb3NpdGlvbiggeyBwb3NpdGlvblRvOiBcIndpbmRvd1wiIH0gKTtcclxuXHRcdFx0XHRcdHRoaXMuX2lnbm9yZVJlc2l6ZUV2ZW50cygpO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0dGhpcy5fcmVzaXplU2NyZWVuKCk7XHJcblx0XHRcdFx0dGhpcy5fcmVzaXplRGF0YSA9IG51bGw7XHJcblx0XHRcdFx0dGhpcy5fb3JpZW50YXRpb25jaGFuZ2VJblByb2dyZXNzID0gZmFsc2U7XHJcblx0XHRcdH1cclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRoaXMuX3Jlc2l6ZURhdGEgPSBudWxsO1xyXG5cdFx0XHR0aGlzLl9vcmllbnRhdGlvbmNoYW5nZUluUHJvZ3Jlc3MgPSBmYWxzZTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfc3RvcElnbm9yaW5nUmVzaXplRXZlbnRzOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX2lnbm9yZVJlc2l6ZVRvID0gMDtcclxuXHR9LFxyXG5cclxuXHRfaWdub3JlUmVzaXplRXZlbnRzOiBmdW5jdGlvbigpIHtcclxuXHRcdGlmICggdGhpcy5faWdub3JlUmVzaXplVG8gKSB7XHJcblx0XHRcdGNsZWFyVGltZW91dCggdGhpcy5faWdub3JlUmVzaXplVG8gKTtcclxuXHRcdH1cclxuXHRcdHRoaXMuX2lnbm9yZVJlc2l6ZVRvID0gdGhpcy5fZGVsYXkoIFwiX3N0b3BJZ25vcmluZ1Jlc2l6ZUV2ZW50c1wiLCAxMDAwICk7XHJcblx0fSxcclxuXHJcblx0X2hhbmRsZVdpbmRvd1Jlc2l6ZTogZnVuY3Rpb24oLyogdGhlRXZlbnQgKi8pIHtcclxuXHRcdGlmICggdGhpcy5faXNPcGVuICYmIHRoaXMuX2lnbm9yZVJlc2l6ZVRvID09PSAwICkge1xyXG5cdFx0XHRpZiAoICggdGhpcy5fZXhwZWN0UmVzaXplRXZlbnQoKSB8fCB0aGlzLl9vcmllbnRhdGlvbmNoYW5nZUluUHJvZ3Jlc3MgKSAmJlxyXG5cdFx0XHRcdCF0aGlzLl91aS5jb250YWluZXIuaGFzQ2xhc3MoIFwidWktcG9wdXAtaGlkZGVuXCIgKSApIHtcclxuXHRcdFx0XHQvLyBlZmZlY3RpdmVseSByYXBpZC1jbG9zZSB0aGUgcG9wdXAgd2hpbGUgbGVhdmluZyB0aGUgc2NyZWVuIGludGFjdFxyXG5cdFx0XHRcdHRoaXMuX3VpLmNvbnRhaW5lclxyXG5cdFx0XHRcdFx0LmFkZENsYXNzKCBcInVpLXBvcHVwLWhpZGRlbiB1aS1wb3B1cC10cnVuY2F0ZVwiIClcclxuXHRcdFx0XHRcdC5yZW1vdmVBdHRyKCBcInN0eWxlXCIgKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9oYW5kbGVXaW5kb3dPcmllbnRhdGlvbmNoYW5nZTogZnVuY3Rpb24oLyogdGhlRXZlbnQgKi8pIHtcclxuXHRcdGlmICggIXRoaXMuX29yaWVudGF0aW9uY2hhbmdlSW5Qcm9ncmVzcyAmJiB0aGlzLl9pc09wZW4gJiYgdGhpcy5faWdub3JlUmVzaXplVG8gPT09IDAgKSB7XHJcblx0XHRcdHRoaXMuX2V4cGVjdFJlc2l6ZUV2ZW50KCk7XHJcblx0XHRcdHRoaXMuX29yaWVudGF0aW9uY2hhbmdlSW5Qcm9ncmVzcyA9IHRydWU7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0Ly8gV2hlbiB0aGUgcG9wdXAgaXMgb3BlbiwgYXR0ZW1wdGluZyB0byBmb2N1cyBvbiBhbiBlbGVtZW50IHRoYXQgaXMgbm90IGFcclxuXHQvLyBjaGlsZCBvZiB0aGUgcG9wdXAgd2lsbCByZWRpcmVjdCBmb2N1cyB0byB0aGUgcG9wdXBcclxuXHRfaGFuZGxlRG9jdW1lbnRGb2N1c0luOiBmdW5jdGlvbiggdGhlRXZlbnQgKSB7XHJcblx0XHR2YXIgdGFyZ2V0LFxyXG5cdFx0XHR0YXJnZXRFbGVtZW50ID0gdGhlRXZlbnQudGFyZ2V0LFxyXG5cdFx0XHR1aSA9IHRoaXMuX3VpO1xyXG5cclxuXHRcdGlmICggIXRoaXMuX2lzT3BlbiApIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggdGFyZ2V0RWxlbWVudCAhPT0gdWkuY29udGFpbmVyWyAwIF0gKSB7XHJcblx0XHRcdHRhcmdldCA9ICQoIHRhcmdldEVsZW1lbnQgKTtcclxuXHRcdFx0aWYgKCAhJC5jb250YWlucyggdWkuY29udGFpbmVyWyAwIF0sIHRhcmdldEVsZW1lbnQgKSApIHtcclxuXHRcdFx0XHQkKCB0aGlzLmRvY3VtZW50WyAwIF0uYWN0aXZlRWxlbWVudCApLm9uZSggXCJmb2N1c1wiLCAkLnByb3h5KCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdHRoaXMuX3NhZmVseUJsdXIoIHRhcmdldEVsZW1lbnQgKTtcclxuXHRcdFx0XHR9LCB0aGlzICkgKTtcclxuXHRcdFx0XHR1aS5mb2N1c0VsZW1lbnQuZm9jdXMoKTtcclxuXHRcdFx0XHR0aGVFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRcdHRoZUV2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fSBlbHNlIGlmICggdWkuZm9jdXNFbGVtZW50WyAwIF0gPT09IHVpLmNvbnRhaW5lclsgMCBdICkge1xyXG5cdFx0XHRcdHVpLmZvY3VzRWxlbWVudCA9IHRhcmdldDtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX2lnbm9yZVJlc2l6ZUV2ZW50cygpO1xyXG5cdH0sXHJcblxyXG5cdF90aGVtZUNsYXNzRnJvbU9wdGlvbjogZnVuY3Rpb24oIHByZWZpeCwgdmFsdWUgKSB7XHJcblx0XHRyZXR1cm4gKCB2YWx1ZSA/ICggdmFsdWUgPT09IFwibm9uZVwiID8gXCJcIiA6ICggcHJlZml4ICsgdmFsdWUgKSApIDogKCBwcmVmaXggKyBcImluaGVyaXRcIiApICk7XHJcblx0fSxcclxuXHJcblx0X2FwcGx5VHJhbnNpdGlvbjogZnVuY3Rpb24oIHZhbHVlICkge1xyXG5cdFx0aWYgKCB2YWx1ZSApIHtcclxuXHRcdFx0dGhpcy5fdWkuY29udGFpbmVyLnJlbW92ZUNsYXNzKCB0aGlzLl9mYWxsYmFja1RyYW5zaXRpb24gKTtcclxuXHRcdFx0aWYgKCB2YWx1ZSAhPT0gXCJub25lXCIgKSB7XHJcblx0XHRcdFx0dGhpcy5fZmFsbGJhY2tUcmFuc2l0aW9uID0gJC5tb2JpbGUuX21heWJlRGVncmFkZVRyYW5zaXRpb24oIHZhbHVlICk7XHJcblx0XHRcdFx0aWYgKCB0aGlzLl9mYWxsYmFja1RyYW5zaXRpb24gPT09IFwibm9uZVwiICkge1xyXG5cdFx0XHRcdFx0dGhpcy5fZmFsbGJhY2tUcmFuc2l0aW9uID0gXCJcIjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0dGhpcy5fdWkuY29udGFpbmVyLmFkZENsYXNzKCB0aGlzLl9mYWxsYmFja1RyYW5zaXRpb24gKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH0sXHJcblxyXG5cdF9zZXRPcHRpb25zOiBmdW5jdGlvbiggbmV3T3B0aW9ucyApIHtcclxuXHRcdHZhciBjdXJyZW50T3B0aW9ucyA9IHRoaXMub3B0aW9ucyxcclxuXHRcdFx0dGhlRWxlbWVudCA9IHRoaXMuZWxlbWVudCxcclxuXHRcdFx0c2NyZWVuID0gdGhpcy5fdWkuc2NyZWVuO1xyXG5cclxuXHRcdGlmICggbmV3T3B0aW9ucy53cmFwcGVyQ2xhc3MgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0dGhpcy5fdWkuY29udGFpbmVyXHJcblx0XHRcdFx0LnJlbW92ZUNsYXNzKCBjdXJyZW50T3B0aW9ucy53cmFwcGVyQ2xhc3MgKVxyXG5cdFx0XHRcdC5hZGRDbGFzcyggbmV3T3B0aW9ucy53cmFwcGVyQ2xhc3MgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG5ld09wdGlvbnMudGhlbWUgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0dGhlRWxlbWVudFxyXG5cdFx0XHRcdC5yZW1vdmVDbGFzcyggdGhpcy5fdGhlbWVDbGFzc0Zyb21PcHRpb24oIFwidWktYm9keS1cIiwgY3VycmVudE9wdGlvbnMudGhlbWUgKSApXHJcblx0XHRcdFx0LmFkZENsYXNzKCB0aGlzLl90aGVtZUNsYXNzRnJvbU9wdGlvbiggXCJ1aS1ib2R5LVwiLCBuZXdPcHRpb25zLnRoZW1lICkgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG5ld09wdGlvbnMub3ZlcmxheVRoZW1lICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdHNjcmVlblxyXG5cdFx0XHRcdC5yZW1vdmVDbGFzcyggdGhpcy5fdGhlbWVDbGFzc0Zyb21PcHRpb24oIFwidWktb3ZlcmxheS1cIiwgY3VycmVudE9wdGlvbnMub3ZlcmxheVRoZW1lICkgKVxyXG5cdFx0XHRcdC5hZGRDbGFzcyggdGhpcy5fdGhlbWVDbGFzc0Zyb21PcHRpb24oIFwidWktb3ZlcmxheS1cIiwgbmV3T3B0aW9ucy5vdmVybGF5VGhlbWUgKSApO1xyXG5cclxuXHRcdFx0aWYgKCB0aGlzLl9pc09wZW4gKSB7XHJcblx0XHRcdFx0c2NyZWVuLmFkZENsYXNzKCBcImluXCIgKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggbmV3T3B0aW9ucy5zaGFkb3cgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0dGhlRWxlbWVudC50b2dnbGVDbGFzcyggXCJ1aS1vdmVybGF5LXNoYWRvd1wiLCBuZXdPcHRpb25zLnNoYWRvdyApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggbmV3T3B0aW9ucy5jb3JuZXJzICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdHRoZUVsZW1lbnQudG9nZ2xlQ2xhc3MoIFwidWktY29ybmVyLWFsbFwiLCBuZXdPcHRpb25zLmNvcm5lcnMgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG5ld09wdGlvbnMudHJhbnNpdGlvbiAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRpZiAoICF0aGlzLl9jdXJyZW50VHJhbnNpdGlvbiApIHtcclxuXHRcdFx0XHR0aGlzLl9hcHBseVRyYW5zaXRpb24oIG5ld09wdGlvbnMudHJhbnNpdGlvbiApO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBuZXdPcHRpb25zLnRvbGVyYW5jZSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHR0aGlzLl9zZXRUb2xlcmFuY2UoIG5ld09wdGlvbnMudG9sZXJhbmNlICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBuZXdPcHRpb25zLmRpc2FibGVkICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdGlmICggbmV3T3B0aW9ucy5kaXNhYmxlZCApIHtcclxuXHRcdFx0XHR0aGlzLmNsb3NlKCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gdGhpcy5fc3VwZXIoIG5ld09wdGlvbnMgKTtcclxuXHR9LFxyXG5cclxuXHRfc2V0VG9sZXJhbmNlOiBmdW5jdGlvbiggdmFsdWUgKSB7XHJcblx0XHR2YXIgdG9sID0geyB0OiAzMCwgcjogMTUsIGI6IDMwLCBsOiAxNSB9LFxyXG5cdFx0XHRhcjtcclxuXHJcblx0XHRpZiAoIHZhbHVlICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdGFyID0gU3RyaW5nKCB2YWx1ZSApLnNwbGl0KCBcIixcIiApO1xyXG5cclxuXHRcdFx0JC5lYWNoKCBhciwgZnVuY3Rpb24oIGlkeCwgdmFsICkgeyBhclsgaWR4IF0gPSBwYXJzZUludCggdmFsLCAxMCApOyB9ICk7XHJcblxyXG5cdFx0XHRzd2l0Y2goIGFyLmxlbmd0aCApIHtcclxuXHRcdFx0XHQvLyBBbGwgdmFsdWVzIGFyZSB0byBiZSB0aGUgc2FtZVxyXG5cdFx0XHRcdGNhc2UgMTpcclxuXHRcdFx0XHRcdGlmICggIWlzTmFOKCBhclsgMCBdICkgKSB7XHJcblx0XHRcdFx0XHRcdHRvbC50ID0gdG9sLnIgPSB0b2wuYiA9IHRvbC5sID0gYXJbIDAgXTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cclxuXHRcdFx0XHQvLyBUaGUgZmlyc3QgdmFsdWUgZGVub3RlcyB0b3AvYm90dG9tIHRvbGVyYW5jZSwgYW5kIHRoZSBzZWNvbmQgdmFsdWUgZGVub3RlcyBsZWZ0L3JpZ2h0IHRvbGVyYW5jZVxyXG5cdFx0XHRcdGNhc2UgMjpcclxuXHRcdFx0XHRcdGlmICggIWlzTmFOKCBhclsgMCBdICkgKSB7XHJcblx0XHRcdFx0XHRcdHRvbC50ID0gdG9sLmIgPSBhclsgMCBdO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0aWYgKCAhaXNOYU4oIGFyWyAxIF0gKSApIHtcclxuXHRcdFx0XHRcdFx0dG9sLmwgPSB0b2wuciA9IGFyWyAxIF07XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHJcblx0XHRcdFx0Ly8gVGhlIGFycmF5IGNvbnRhaW5zIHZhbHVlcyBpbiB0aGUgb3JkZXIgdG9wLCByaWdodCwgYm90dG9tLCBsZWZ0XHJcblx0XHRcdFx0Y2FzZSA0OlxyXG5cdFx0XHRcdFx0aWYgKCAhaXNOYU4oIGFyWyAwIF0gKSApIHtcclxuXHRcdFx0XHRcdFx0dG9sLnQgPSBhclsgMCBdO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0aWYgKCAhaXNOYU4oIGFyWyAxIF0gKSApIHtcclxuXHRcdFx0XHRcdFx0dG9sLnIgPSBhclsgMSBdO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0aWYgKCAhaXNOYU4oIGFyWyAyIF0gKSApIHtcclxuXHRcdFx0XHRcdFx0dG9sLmIgPSBhclsgMiBdO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0aWYgKCAhaXNOYU4oIGFyWyAzIF0gKSApIHtcclxuXHRcdFx0XHRcdFx0dG9sLmwgPSBhclsgMyBdO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblxyXG5cdFx0XHRcdGRlZmF1bHQ6XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX3RvbGVyYW5jZSA9IHRvbDtcclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH0sXHJcblxyXG5cdF9jbGFtcFBvcHVwV2lkdGg6IGZ1bmN0aW9uKCBpbmZvT25seSApIHtcclxuXHRcdHZhciBtZW51U2l6ZSxcclxuXHRcdFx0d2luZG93Q29vcmRpbmF0ZXMgPSBnZXRXaW5kb3dDb29yZGluYXRlcyggdGhpcy53aW5kb3cgKSxcclxuXHRcdFx0Ly8gcmVjdGFuZ2xlIHdpdGhpbiB3aGljaCB0aGUgcG9wdXAgbXVzdCBmaXRcclxuXHRcdFx0cmVjdGFuZ2xlID0ge1xyXG5cdFx0XHRcdHg6IHRoaXMuX3RvbGVyYW5jZS5sLFxyXG5cdFx0XHRcdHk6IHdpbmRvd0Nvb3JkaW5hdGVzLnkgKyB0aGlzLl90b2xlcmFuY2UudCxcclxuXHRcdFx0XHRjeDogd2luZG93Q29vcmRpbmF0ZXMuY3ggLSB0aGlzLl90b2xlcmFuY2UubCAtIHRoaXMuX3RvbGVyYW5jZS5yLFxyXG5cdFx0XHRcdGN5OiB3aW5kb3dDb29yZGluYXRlcy5jeSAtIHRoaXMuX3RvbGVyYW5jZS50IC0gdGhpcy5fdG9sZXJhbmNlLmJcclxuXHRcdFx0fTtcclxuXHJcblx0XHRpZiAoICFpbmZvT25seSApIHtcclxuXHRcdFx0Ly8gQ2xhbXAgdGhlIHdpZHRoIG9mIHRoZSBtZW51IGJlZm9yZSBncmFiYmluZyBpdHMgc2l6ZVxyXG5cdFx0XHR0aGlzLl91aS5jb250YWluZXIuY3NzKCBcIm1heC13aWR0aFwiLCByZWN0YW5nbGUuY3ggKTtcclxuXHRcdH1cclxuXHJcblx0XHRtZW51U2l6ZSA9IHtcclxuXHRcdFx0Y3g6IHRoaXMuX3VpLmNvbnRhaW5lci5vdXRlcldpZHRoKCB0cnVlICksXHJcblx0XHRcdGN5OiB0aGlzLl91aS5jb250YWluZXIub3V0ZXJIZWlnaHQoIHRydWUgKVxyXG5cdFx0fTtcclxuXHJcblx0XHRyZXR1cm4geyByYzogcmVjdGFuZ2xlLCBtZW51U2l6ZTogbWVudVNpemUgfTtcclxuXHR9LFxyXG5cclxuXHRfY2FsY3VsYXRlRmluYWxMb2NhdGlvbjogZnVuY3Rpb24oIGRlc2lyZWQsIGNsYW1wSW5mbyApIHtcclxuXHRcdHZhciByZXR1cm5WYWx1ZSxcclxuXHRcdFx0cmVjdGFuZ2xlID0gY2xhbXBJbmZvLnJjLFxyXG5cdFx0XHRtZW51U2l6ZSA9IGNsYW1wSW5mby5tZW51U2l6ZTtcclxuXHJcblx0XHQvLyBDZW50ZXIgdGhlIG1lbnUgb3ZlciB0aGUgZGVzaXJlZCBjb29yZGluYXRlcywgd2hpbGUgbm90IGdvaW5nIG91dHNpZGVcclxuXHRcdC8vIHRoZSB3aW5kb3cgdG9sZXJhbmNlcy4gVGhpcyB3aWxsIGNlbnRlciB3cnQuIHRoZSB3aW5kb3cgaWYgdGhlIHBvcHVwIGlzXHJcblx0XHQvLyB0b28gbGFyZ2UuXHJcblx0XHRyZXR1cm5WYWx1ZSA9IHtcclxuXHRcdFx0bGVmdDogZml0U2VnbWVudEluc2lkZVNlZ21lbnQoIHJlY3RhbmdsZS5jeCwgbWVudVNpemUuY3gsIHJlY3RhbmdsZS54LCBkZXNpcmVkLnggKSxcclxuXHRcdFx0dG9wOiBmaXRTZWdtZW50SW5zaWRlU2VnbWVudCggcmVjdGFuZ2xlLmN5LCBtZW51U2l6ZS5jeSwgcmVjdGFuZ2xlLnksIGRlc2lyZWQueSApXHJcblx0XHR9O1xyXG5cclxuXHRcdC8vIE1ha2Ugc3VyZSB0aGUgdG9wIG9mIHRoZSBtZW51IGlzIHZpc2libGVcclxuXHRcdHJldHVyblZhbHVlLnRvcCA9IE1hdGgubWF4KCAwLCByZXR1cm5WYWx1ZS50b3AgKTtcclxuXHJcblx0XHQvLyBJZiB0aGUgaGVpZ2h0IG9mIHRoZSBtZW51IGlzIHNtYWxsZXIgdGhhbiB0aGUgaGVpZ2h0IG9mIHRoZSBkb2N1bWVudFxyXG5cdFx0Ly8gYWxpZ24gdGhlIGJvdHRvbSB3aXRoIHRoZSBib3R0b20gb2YgdGhlIGRvY3VtZW50XHJcblxyXG5cdFx0cmV0dXJuVmFsdWUudG9wIC09IE1hdGgubWluKCByZXR1cm5WYWx1ZS50b3AsXHJcblx0XHRcdE1hdGgubWF4KCAwLCByZXR1cm5WYWx1ZS50b3AgKyBtZW51U2l6ZS5jeSAtIHRoaXMuZG9jdW1lbnQuaGVpZ2h0KCkgKSApO1xyXG5cclxuXHRcdHJldHVybiByZXR1cm5WYWx1ZTtcclxuXHR9LFxyXG5cclxuXHQvLyBUcnkgYW5kIGNlbnRlciB0aGUgb3ZlcmxheSBvdmVyIHRoZSBnaXZlbiBjb29yZGluYXRlc1xyXG5cdF9wbGFjZW1lbnRDb29yZHM6IGZ1bmN0aW9uKCBkZXNpcmVkICkge1xyXG5cdFx0cmV0dXJuIHRoaXMuX2NhbGN1bGF0ZUZpbmFsTG9jYXRpb24oIGRlc2lyZWQsIHRoaXMuX2NsYW1wUG9wdXBXaWR0aCgpICk7XHJcblx0fSxcclxuXHJcblx0X2NyZWF0ZVByZXJlcXVpc2l0ZXM6IGZ1bmN0aW9uKCBzY3JlZW5QcmVyZXF1aXNpdGUsIGNvbnRhaW5lclByZXJlcXVpc2l0ZSwgd2hlbkRvbmUgKSB7XHJcblx0XHR2YXIgcHJlcmVxdWlzaXRlcyxcclxuXHRcdFx0c2VsZiA9IHRoaXM7XHJcblxyXG5cdFx0Ly8gSXQgaXMgaW1wb3J0YW50IHRvIG1haW50YWluIGJvdGggdGhlIGxvY2FsIHZhcmlhYmxlIHByZXJlcXVpc2l0ZXMgYW5kXHJcblx0XHQvLyBzZWxmLl9wcmVyZXF1aXNpdGVzLiBUaGUgbG9jYWwgdmFyaWFibGUgcmVtYWlucyBpbiB0aGUgY2xvc3VyZSBvZiB0aGVcclxuXHRcdC8vIGZ1bmN0aW9ucyB3aGljaCBjYWxsIHRoZSBjYWxsYmFja3MgcGFzc2VkIGluLiBUaGUgY29tcGFyaXNvbiBiZXR3ZWVuIHRoZVxyXG5cdFx0Ly8gbG9jYWwgdmFyaWFibGUgYW5kIHNlbGYuX3ByZXJlcXVpc2l0ZXMgaXMgbmVjZXNzYXJ5LCBiZWNhdXNlIG9uY2UgYVxyXG5cdFx0Ly8gZnVuY3Rpb24gaGFzIGJlZW4gcGFzc2VkIHRvIC5hbmltYXRpb25Db21wbGV0ZSgpIGl0IHdpbGwgYmUgY2FsbGVkIG5leHRcclxuXHRcdC8vIHRpbWUgYW4gYW5pbWF0aW9uIGNvbXBsZXRlcywgZXZlbiBpZiB0aGF0J3Mgbm90IHRoZSBhbmltYXRpb24gd2hvc2UgZW5kXHJcblx0XHQvLyB0aGUgZnVuY3Rpb24gd2FzIHN1cHBvc2VkIHRvIGNhdGNoIChmb3IgZXhhbXBsZSwgaWYgYW4gYWJvcnQgaGFwcGVuc1xyXG5cdFx0Ly8gZHVyaW5nIHRoZSBvcGVuaW5nIGFuaW1hdGlvbiwgdGhlIC5hbmltYXRpb25Db21wbGV0ZSBoYW5kbGVyIGlzIG5vdFxyXG5cdFx0Ly8gY2FsbGVkIGZvciB0aGF0IGFuaW1hdGlvbiBhbnltb3JlLCBidXQgdGhlIGhhbmRsZXIgcmVtYWlucyBhdHRhY2hlZCwgc29cclxuXHRcdC8vIGl0IGlzIGNhbGxlZCB0aGUgbmV4dCB0aW1lIHRoZSBwb3B1cCBpcyBvcGVuZWQgLSBtYWtpbmcgaXQgc3RhbGUuXHJcblx0XHQvLyBDb21wYXJpbmcgdGhlIGxvY2FsIHZhcmlhYmxlIHByZXJlcXVpc2l0ZXMgdG8gdGhlIHdpZGdldC1sZXZlbCB2YXJpYWJsZVxyXG5cdFx0Ly8gc2VsZi5fcHJlcmVxdWlzaXRlcyBlbnN1cmVzIHRoYXQgY2FsbGJhY2tzIHRyaWdnZXJlZCBieSBhIHN0YWxlXHJcblx0XHQvLyAuYW5pbWF0aW9uQ29tcGxldGUgd2lsbCBiZSBpZ25vcmVkLlxyXG5cclxuXHRcdHByZXJlcXVpc2l0ZXMgPSB7XHJcblx0XHRcdHNjcmVlbjogJC5EZWZlcnJlZCgpLFxyXG5cdFx0XHRjb250YWluZXI6ICQuRGVmZXJyZWQoKVxyXG5cdFx0fTtcclxuXHJcblx0XHRwcmVyZXF1aXNpdGVzLnNjcmVlbi50aGVuKCBmdW5jdGlvbigpIHtcclxuXHRcdFx0aWYgKCBwcmVyZXF1aXNpdGVzID09PSBzZWxmLl9wcmVyZXF1aXNpdGVzICkge1xyXG5cdFx0XHRcdHNjcmVlblByZXJlcXVpc2l0ZSgpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHRwcmVyZXF1aXNpdGVzLmNvbnRhaW5lci50aGVuKCBmdW5jdGlvbigpIHtcclxuXHRcdFx0aWYgKCBwcmVyZXF1aXNpdGVzID09PSBzZWxmLl9wcmVyZXF1aXNpdGVzICkge1xyXG5cdFx0XHRcdGNvbnRhaW5lclByZXJlcXVpc2l0ZSgpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHQkLndoZW4oIHByZXJlcXVpc2l0ZXMuc2NyZWVuLCBwcmVyZXF1aXNpdGVzLmNvbnRhaW5lciApLmRvbmUoIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpZiAoIHByZXJlcXVpc2l0ZXMgPT09IHNlbGYuX3ByZXJlcXVpc2l0ZXMgKSB7XHJcblx0XHRcdFx0c2VsZi5fcHJlcmVxdWlzaXRlcyA9IG51bGw7XHJcblx0XHRcdFx0d2hlbkRvbmUoKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0c2VsZi5fcHJlcmVxdWlzaXRlcyA9IHByZXJlcXVpc2l0ZXM7XHJcblx0fSxcclxuXHJcblx0X2FuaW1hdGU6IGZ1bmN0aW9uKCBhcmdzICkge1xyXG5cdFx0Ly8gTk9URSBiZWZvcmUgcmVtb3ZpbmcgdGhlIGRlZmF1bHQgYW5pbWF0aW9uIG9mIHRoZSBzY3JlZW5cclxuXHRcdC8vICAgICAgdGhpcyBoYWQgYW4gYW5pbWF0ZSBjYWxsYmFjayB0aGF0IHdvdWxkIHJlc29sdmUgdGhlIGRlZmVycmVkXHJcblx0XHQvLyAgICAgIG5vdyB0aGUgZGVmZXJyZWQgaXMgcmVzb2x2ZWQgaW1tZWRpYXRlbHlcclxuXHRcdC8vIFRPRE8gcmVtb3ZlIHRoZSBkZXBlbmRlbmN5IG9uIHRoZSBzY3JlZW4gZGVmZXJyZWRcclxuXHRcdHRoaXMuX3VpLnNjcmVlblxyXG5cdFx0XHQucmVtb3ZlQ2xhc3MoIGFyZ3MuY2xhc3NUb1JlbW92ZSApXHJcblx0XHRcdC5hZGRDbGFzcyggYXJncy5zY3JlZW5DbGFzc1RvQWRkICk7XHJcblxyXG5cdFx0YXJncy5wcmVyZXF1aXNpdGVzLnNjcmVlbi5yZXNvbHZlKCk7XHJcblxyXG5cdFx0aWYgKCBhcmdzLnRyYW5zaXRpb24gJiYgYXJncy50cmFuc2l0aW9uICE9PSBcIm5vbmVcIiApIHtcclxuXHRcdFx0aWYgKCBhcmdzLmFwcGx5VHJhbnNpdGlvbiApIHtcclxuXHRcdFx0XHR0aGlzLl9hcHBseVRyYW5zaXRpb24oIGFyZ3MudHJhbnNpdGlvbiApO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICggdGhpcy5fZmFsbGJhY2tUcmFuc2l0aW9uICkge1xyXG5cdFx0XHRcdHRoaXMuX3VpLmNvbnRhaW5lclxyXG5cdFx0XHRcdFx0LmFkZENsYXNzKCBhcmdzLmNvbnRhaW5lckNsYXNzVG9BZGQgKVxyXG5cdFx0XHRcdFx0LnJlbW92ZUNsYXNzKCBhcmdzLmNsYXNzVG9SZW1vdmUgKVxyXG5cdFx0XHRcdFx0LmFuaW1hdGlvbkNvbXBsZXRlKCAkLnByb3h5KCBhcmdzLnByZXJlcXVpc2l0ZXMuY29udGFpbmVyLCBcInJlc29sdmVcIiApICk7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHR0aGlzLl91aS5jb250YWluZXIucmVtb3ZlQ2xhc3MoIGFyZ3MuY2xhc3NUb1JlbW92ZSApO1xyXG5cdFx0YXJncy5wcmVyZXF1aXNpdGVzLmNvbnRhaW5lci5yZXNvbHZlKCk7XHJcblx0fSxcclxuXHJcblx0Ly8gVGhlIGRlc2lyZWQgY29vcmRpbmF0ZXMgcGFzc2VkIGluIHdpbGwgYmUgcmV0dXJuZWQgdW50b3VjaGVkIGlmIG5vIHJlZmVyZW5jZSBlbGVtZW50IGNhbiBiZSBpZGVudGlmaWVkIHZpYVxyXG5cdC8vIGRlc2lyZWRQb3NpdGlvbi5wb3NpdGlvblRvLiBOZXZlcnRoZWxlc3MsIHRoaXMgZnVuY3Rpb24gZW5zdXJlcyB0aGF0IGl0cyByZXR1cm4gdmFsdWUgYWx3YXlzIGNvbnRhaW5zIHZhbGlkXHJcblx0Ly8geCBhbmQgeSBjb29yZGluYXRlcyBieSBzcGVjaWZ5aW5nIHRoZSBjZW50ZXIgbWlkZGxlIG9mIHRoZSB3aW5kb3cgaWYgdGhlIGNvb3JkaW5hdGVzIGFyZSBhYnNlbnQuXHJcblx0Ly8gb3B0aW9uczogeyB4OiBjb29yZGluYXRlLCB5OiBjb29yZGluYXRlLCBwb3NpdGlvblRvOiBzdHJpbmc6IFwib3JpZ2luXCIsIFwid2luZG93XCIsIG9yIGpRdWVyeSBzZWxlY3RvclxyXG5cdF9kZXNpcmVkQ29vcmRzOiBmdW5jdGlvbiggb3Blbk9wdGlvbnMgKSB7XHJcblx0XHR2YXIgb2Zmc2V0LFxyXG5cdFx0XHRkc3QgPSBudWxsLFxyXG5cdFx0XHR3aW5kb3dDb29yZGluYXRlcyA9IGdldFdpbmRvd0Nvb3JkaW5hdGVzKCB0aGlzLndpbmRvdyApLFxyXG5cdFx0XHR4ID0gb3Blbk9wdGlvbnMueCxcclxuXHRcdFx0eSA9IG9wZW5PcHRpb25zLnksXHJcblx0XHRcdHBUbyA9IG9wZW5PcHRpb25zLnBvc2l0aW9uVG87XHJcblxyXG5cdFx0Ly8gRXN0YWJsaXNoIHdoaWNoIGVsZW1lbnQgd2lsbCBzZXJ2ZSBhcyB0aGUgcmVmZXJlbmNlXHJcblx0XHRpZiAoIHBUbyAmJiBwVG8gIT09IFwib3JpZ2luXCIgKSB7XHJcblx0XHRcdGlmICggcFRvID09PSBcIndpbmRvd1wiICkge1xyXG5cdFx0XHRcdHggPSB3aW5kb3dDb29yZGluYXRlcy5jeCAvIDIgKyB3aW5kb3dDb29yZGluYXRlcy54O1xyXG5cdFx0XHRcdHkgPSB3aW5kb3dDb29yZGluYXRlcy5jeSAvIDIgKyB3aW5kb3dDb29yZGluYXRlcy55O1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHRyeSB7XHJcblx0XHRcdFx0XHRkc3QgPSAkKCBwVG8gKTtcclxuXHRcdFx0XHR9IGNhdGNoKCBlcnIgKSB7XHJcblx0XHRcdFx0XHRkc3QgPSBudWxsO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZiAoIGRzdCApIHtcclxuXHRcdFx0XHRcdGRzdC5maWx0ZXIoIFwiOnZpc2libGVcIiApO1xyXG5cdFx0XHRcdFx0aWYgKCBkc3QubGVuZ3RoID09PSAwICkge1xyXG5cdFx0XHRcdFx0XHRkc3QgPSBudWxsO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8vIElmIGFuIGVsZW1lbnQgd2FzIGZvdW5kLCBjZW50ZXIgb3ZlciBpdFxyXG5cdFx0aWYgKCBkc3QgKSB7XHJcblx0XHRcdG9mZnNldCA9IGRzdC5vZmZzZXQoKTtcclxuXHRcdFx0eCA9IG9mZnNldC5sZWZ0ICsgZHN0Lm91dGVyV2lkdGgoKSAvIDI7XHJcblx0XHRcdHkgPSBvZmZzZXQudG9wICsgZHN0Lm91dGVySGVpZ2h0KCkgLyAyO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIE1ha2Ugc3VyZSB4IGFuZCB5IGFyZSB2YWxpZCBudW1iZXJzIC0gY2VudGVyIG92ZXIgdGhlIHdpbmRvd1xyXG5cdFx0aWYgKCAkLnR5cGUoIHggKSAhPT0gXCJudW1iZXJcIiB8fCBpc05hTiggeCApICkge1xyXG5cdFx0XHR4ID0gd2luZG93Q29vcmRpbmF0ZXMuY3ggLyAyICsgd2luZG93Q29vcmRpbmF0ZXMueDtcclxuXHRcdH1cclxuXHRcdGlmICggJC50eXBlKCB5ICkgIT09IFwibnVtYmVyXCIgfHwgaXNOYU4oIHkgKSApIHtcclxuXHRcdFx0eSA9IHdpbmRvd0Nvb3JkaW5hdGVzLmN5IC8gMiArIHdpbmRvd0Nvb3JkaW5hdGVzLnk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHsgeDogeCwgeTogeSB9O1xyXG5cdH0sXHJcblxyXG5cdF9yZXBvc2l0aW9uOiBmdW5jdGlvbiggb3Blbk9wdGlvbnMgKSB7XHJcblx0XHQvLyBXZSBvbmx5IGNhcmUgYWJvdXQgcG9zaXRpb24tcmVsYXRlZCBwYXJhbWV0ZXJzIGZvciByZXBvc2l0aW9uaW5nXHJcblx0XHRvcGVuT3B0aW9ucyA9IHtcclxuXHRcdFx0eDogb3Blbk9wdGlvbnMueCxcclxuXHRcdFx0eTogb3Blbk9wdGlvbnMueSxcclxuXHRcdFx0cG9zaXRpb25Ubzogb3Blbk9wdGlvbnMucG9zaXRpb25Ub1xyXG5cdFx0fTtcclxuXHRcdHRoaXMuX3RyaWdnZXIoIFwiYmVmb3JlcG9zaXRpb25cIiwgdW5kZWZpbmVkLCBvcGVuT3B0aW9ucyApO1xyXG5cdFx0dGhpcy5fdWkuY29udGFpbmVyLm9mZnNldCggdGhpcy5fcGxhY2VtZW50Q29vcmRzKCB0aGlzLl9kZXNpcmVkQ29vcmRzKCBvcGVuT3B0aW9ucyApICkgKTtcclxuXHR9LFxyXG5cclxuXHRyZXBvc2l0aW9uOiBmdW5jdGlvbiggb3Blbk9wdGlvbnMgKSB7XHJcblx0XHRpZiAoIHRoaXMuX2lzT3BlbiApIHtcclxuXHRcdFx0dGhpcy5fcmVwb3NpdGlvbiggb3Blbk9wdGlvbnMgKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfc2FmZWx5Qmx1cjogZnVuY3Rpb24oIGN1cnJlbnRFbGVtZW50ICl7XHJcblx0XHRpZiAoIGN1cnJlbnRFbGVtZW50ICE9PSB0aGlzLndpbmRvd1sgMCBdICYmXHJcblx0XHRcdGN1cnJlbnRFbGVtZW50Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgIT09IFwiYm9keVwiICkge1xyXG5cdFx0XHRcdCQoIGN1cnJlbnRFbGVtZW50ICkuYmx1cigpO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9vcGVuUHJlcmVxdWlzaXRlc0NvbXBsZXRlOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBpZCA9IHRoaXMuZWxlbWVudC5hdHRyKCBcImlkXCIgKSxcclxuXHRcdFx0Zmlyc3RGb2N1cyA9IHRoaXMuX3VpLmNvbnRhaW5lci5maW5kKCBcIjpmb2N1c2FibGVcIiApLmZpcnN0KCk7XHJcblxyXG5cdFx0dGhpcy5fdWkuY29udGFpbmVyLmFkZENsYXNzKCBcInVpLXBvcHVwLWFjdGl2ZVwiICk7XHJcblx0XHR0aGlzLl9pc09wZW4gPSB0cnVlO1xyXG5cdFx0dGhpcy5fcmVzaXplU2NyZWVuKCk7XHJcblxyXG5cdFx0Ly8gQ2hlY2sgdG8gc2VlIGlmIGN1cnJFbGVtZW50IGlzIG5vdCBhIGNoaWxkIG9mIHRoZSBjb250YWluZXIuICBJZiBpdCdzIG5vdCwgYmx1clxyXG5cdFx0aWYgKCAhJC5jb250YWlucyggdGhpcy5fdWkuY29udGFpbmVyWyAwIF0sIHRoaXMuZG9jdW1lbnRbIDAgXS5hY3RpdmVFbGVtZW50ICkgKSB7XHJcblx0XHRcdHRoaXMuX3NhZmVseUJsdXIoIHRoaXMuZG9jdW1lbnRbIDAgXS5hY3RpdmVFbGVtZW50ICk7XHJcblx0XHR9XHJcblx0XHRpZiAoIGZpcnN0Rm9jdXMubGVuZ3RoID4gMCApIHtcclxuXHRcdFx0dGhpcy5fdWkuZm9jdXNFbGVtZW50ID0gZmlyc3RGb2N1cztcclxuXHRcdH1cclxuXHRcdHRoaXMuX2lnbm9yZVJlc2l6ZUV2ZW50cygpO1xyXG5cdFx0aWYgKCBpZCApIHtcclxuXHRcdFx0dGhpcy5kb2N1bWVudC5maW5kKCBcIlthcmlhLWhhc3BvcHVwPSd0cnVlJ11bYXJpYS1vd25zPSdcIiArICBpZCArIFwiJ11cIiApLmF0dHIoIFwiYXJpYS1leHBhbmRlZFwiLCB0cnVlICk7XHJcblx0XHR9XHJcblx0XHR0aGlzLl90cmlnZ2VyKCBcImFmdGVyb3BlblwiICk7XHJcblx0fSxcclxuXHJcblx0X29wZW46IGZ1bmN0aW9uKCBvcHRpb25zICkge1xyXG5cdFx0dmFyIG9wZW5PcHRpb25zID0gJC5leHRlbmQoIHt9LCB0aGlzLm9wdGlvbnMsIG9wdGlvbnMgKSxcclxuXHRcdFx0Ly8gVE9ETyBtb3ZlIGJsYWNrbGlzdCB0byBwcml2YXRlIG1ldGhvZFxyXG5cdFx0XHRhbmRyb2lkQmxhY2tsaXN0ID0gKCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR2YXIgdWEgPSBuYXZpZ2F0b3IudXNlckFnZW50LFxyXG5cdFx0XHRcdFx0Ly8gUmVuZGVyaW5nIGVuZ2luZSBpcyBXZWJraXQsIGFuZCBjYXB0dXJlIG1ham9yIHZlcnNpb25cclxuXHRcdFx0XHRcdHdrbWF0Y2ggPSB1YS5tYXRjaCggL0FwcGxlV2ViS2l0XFwvKFswLTlcXC5dKykvICksXHJcblx0XHRcdFx0XHR3a3ZlcnNpb24gPSAhIXdrbWF0Y2ggJiYgd2ttYXRjaFsgMSBdLFxyXG5cdFx0XHRcdFx0YW5kcm9pZG1hdGNoID0gdWEubWF0Y2goIC9BbmRyb2lkIChcXGQrKD86XFwuXFxkKykpLyApLFxyXG5cdFx0XHRcdFx0YW5kdmVyc2lvbiA9ICEhYW5kcm9pZG1hdGNoICYmIGFuZHJvaWRtYXRjaFsgMSBdLFxyXG5cdFx0XHRcdFx0Y2hyb21lbWF0Y2ggPSB1YS5pbmRleE9mKCBcIkNocm9tZVwiICkgPiAtMTtcclxuXHJcblx0XHRcdFx0Ly8gUGxhdGZvcm0gaXMgQW5kcm9pZCwgV2ViS2l0IHZlcnNpb24gaXMgZ3JlYXRlciB0aGFuIDUzNC4xMyAoIEFuZHJvaWQgMy4yLjEgKSBhbmQgbm90IENocm9tZS5cclxuXHRcdFx0XHRpZiAoIGFuZHJvaWRtYXRjaCAhPT0gbnVsbCAmJiBhbmR2ZXJzaW9uID09PSBcIjQuMFwiICYmIHdrdmVyc2lvbiAmJiB3a3ZlcnNpb24gPiA1MzQuMTMgJiYgIWNocm9tZW1hdGNoICkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fSgpKTtcclxuXHJcblx0XHQvLyBDb3VudCBkb3duIHRvIHRyaWdnZXJpbmcgXCJwb3B1cGFmdGVyb3BlblwiIC0gd2UgaGF2ZSB0d28gcHJlcmVxdWlzaXRlczpcclxuXHRcdC8vIDEuIFRoZSBwb3B1cCB3aW5kb3cgYW5pbWF0aW9uIGNvbXBsZXRlcyAoY29udGFpbmVyKCkpXHJcblx0XHQvLyAyLiBUaGUgc2NyZWVuIG9wYWNpdHkgYW5pbWF0aW9uIGNvbXBsZXRlcyAoc2NyZWVuKCkpXHJcblx0XHR0aGlzLl9jcmVhdGVQcmVyZXF1aXNpdGVzKFxyXG5cdFx0XHQkLm5vb3AsXHJcblx0XHRcdCQubm9vcCxcclxuXHRcdFx0JC5wcm94eSggdGhpcywgXCJfb3BlblByZXJlcXVpc2l0ZXNDb21wbGV0ZVwiICkgKTtcclxuXHJcblx0XHR0aGlzLl9jdXJyZW50VHJhbnNpdGlvbiA9IG9wZW5PcHRpb25zLnRyYW5zaXRpb247XHJcblx0XHR0aGlzLl9hcHBseVRyYW5zaXRpb24oIG9wZW5PcHRpb25zLnRyYW5zaXRpb24gKTtcclxuXHJcblx0XHR0aGlzLl91aS5zY3JlZW4ucmVtb3ZlQ2xhc3MoIFwidWktc2NyZWVuLWhpZGRlblwiICk7XHJcblx0XHR0aGlzLl91aS5jb250YWluZXIucmVtb3ZlQ2xhc3MoIFwidWktcG9wdXAtdHJ1bmNhdGVcIiApO1xyXG5cclxuXHRcdC8vIEdpdmUgYXBwbGljYXRpb25zIGEgY2hhbmNlIHRvIG1vZGlmeSB0aGUgY29udGVudHMgb2YgdGhlIGNvbnRhaW5lciBiZWZvcmUgaXQgYXBwZWFyc1xyXG5cdFx0dGhpcy5fcmVwb3NpdGlvbiggb3Blbk9wdGlvbnMgKTtcclxuXHJcblx0XHR0aGlzLl91aS5jb250YWluZXIucmVtb3ZlQ2xhc3MoIFwidWktcG9wdXAtaGlkZGVuXCIgKTtcclxuXHJcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5vdmVybGF5VGhlbWUgJiYgYW5kcm9pZEJsYWNrbGlzdCApIHtcclxuXHRcdFx0LyogVE9ETzogVGhlIG5hdGl2ZSBicm93c2VyIG9uIEFuZHJvaWQgNC4wLlggKFwiSWNlIENyZWFtIFNhbmR3aWNoXCIpIHN1ZmZlcnMgZnJvbSBhbiBpc3N1ZSB3aGVyZSB0aGUgcG9wdXAgb3ZlcmxheSBhcHBlYXJzIHRvIGJlIHotaW5kZXhlZCBhYm92ZSB0aGUgcG9wdXAgaXRzZWxmIHdoZW4gY2VydGFpbiBvdGhlciBzdHlsZXMgZXhpc3Qgb24gdGhlIHNhbWUgcGFnZSAtLSBuYW1lbHksIGFueSBlbGVtZW50IHNldCB0byBgcG9zaXRpb246IGZpeGVkYCBhbmQgY2VydGFpbiB0eXBlcyBvZiBpbnB1dC4gVGhlc2UgaXNzdWVzIGFyZSByZW1pbmlzY2VudCBvZiBwcmV2aW91c2x5IHVuY292ZXJlZCBidWdzIGluIG9sZGVyIHZlcnNpb25zIG9mIEFuZHJvaWQncyBuYXRpdmUgYnJvd3NlcjogaHR0cHM6Ly9naXRodWIuY29tL3Njb3R0amVobC9EZXZpY2UtQnVncy9pc3N1ZXMvM1xyXG5cdFx0XHRUaGlzIGZpeCBjbG9zZXMgdGhlIGZvbGxvd2luZyBidWdzICggSSB1c2UgXCJjbG9zZXNcIiB3aXRoIHJlbHVjdGFuY2UsIGFuZCBzdHJlc3MgdGhhdCB0aGlzIGlzc3VlIHNob3VsZCBiZSByZXZpc2l0ZWQgYXMgc29vbiBhcyBwb3NzaWJsZSApOlxyXG5cdFx0XHRodHRwczovL2dpdGh1Yi5jb20vanF1ZXJ5L2pxdWVyeS1tb2JpbGUvaXNzdWVzLzQ4MTZcclxuXHRcdFx0aHR0cHM6Ly9naXRodWIuY29tL2pxdWVyeS9qcXVlcnktbW9iaWxlL2lzc3Vlcy80ODQ0XHJcblx0XHRcdGh0dHBzOi8vZ2l0aHViLmNvbS9qcXVlcnkvanF1ZXJ5LW1vYmlsZS9pc3N1ZXMvNDg3NFxyXG5cdFx0XHQqL1xyXG5cclxuXHRcdFx0Ly8gVE9ETyBzb3J0IG91dCB3aHkgdGhpcy5fcGFnZSBpc24ndCB3b3JraW5nXHJcblx0XHRcdHRoaXMuZWxlbWVudC5jbG9zZXN0KCBcIi51aS1wYWdlXCIgKS5hZGRDbGFzcyggXCJ1aS1wb3B1cC1vcGVuXCIgKTtcclxuXHRcdH1cclxuXHRcdHRoaXMuX2FuaW1hdGUoe1xyXG5cdFx0XHRhZGRpdGlvbmFsQ29uZGl0aW9uOiB0cnVlLFxyXG5cdFx0XHR0cmFuc2l0aW9uOiBvcGVuT3B0aW9ucy50cmFuc2l0aW9uLFxyXG5cdFx0XHRjbGFzc1RvUmVtb3ZlOiBcIlwiLFxyXG5cdFx0XHRzY3JlZW5DbGFzc1RvQWRkOiBcImluXCIsXHJcblx0XHRcdGNvbnRhaW5lckNsYXNzVG9BZGQ6IFwiaW5cIixcclxuXHRcdFx0YXBwbHlUcmFuc2l0aW9uOiBmYWxzZSxcclxuXHRcdFx0cHJlcmVxdWlzaXRlczogdGhpcy5fcHJlcmVxdWlzaXRlc1xyXG5cdFx0fSk7XHJcblx0fSxcclxuXHJcblx0X2Nsb3NlUHJlcmVxdWlzaXRlU2NyZWVuOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX3VpLnNjcmVlblxyXG5cdFx0XHQucmVtb3ZlQ2xhc3MoIFwib3V0XCIgKVxyXG5cdFx0XHQuYWRkQ2xhc3MoIFwidWktc2NyZWVuLWhpZGRlblwiICk7XHJcblx0fSxcclxuXHJcblx0X2Nsb3NlUHJlcmVxdWlzaXRlQ29udGFpbmVyOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX3VpLmNvbnRhaW5lclxyXG5cdFx0XHQucmVtb3ZlQ2xhc3MoIFwicmV2ZXJzZSBvdXRcIiApXHJcblx0XHRcdC5hZGRDbGFzcyggXCJ1aS1wb3B1cC1oaWRkZW4gdWktcG9wdXAtdHJ1bmNhdGVcIiApXHJcblx0XHRcdC5yZW1vdmVBdHRyKCBcInN0eWxlXCIgKTtcclxuXHR9LFxyXG5cclxuXHRfY2xvc2VQcmVyZXF1aXNpdGVzRG9uZTogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgY29udGFpbmVyID0gdGhpcy5fdWkuY29udGFpbmVyLFxyXG5cdFx0XHRpZCA9IHRoaXMuZWxlbWVudC5hdHRyKCBcImlkXCIgKTtcclxuXHJcblx0XHQvLyByZW1vdmUgdGhlIGdsb2JhbCBtdXRleCBmb3IgcG9wdXBzXHJcblx0XHQkLm1vYmlsZS5wb3B1cC5hY3RpdmUgPSB1bmRlZmluZWQ7XHJcblxyXG5cdFx0Ly8gQmx1ciBlbGVtZW50cyBpbnNpZGUgdGhlIGNvbnRhaW5lciwgaW5jbHVkaW5nIHRoZSBjb250YWluZXJcclxuXHRcdCQoIFwiOmZvY3VzXCIsIGNvbnRhaW5lclsgMCBdICkuYWRkKCBjb250YWluZXJbIDAgXSApLmJsdXIoKTtcclxuXHJcblx0XHRpZiAoIGlkICkge1xyXG5cdFx0XHR0aGlzLmRvY3VtZW50LmZpbmQoIFwiW2FyaWEtaGFzcG9wdXA9J3RydWUnXVthcmlhLW93bnM9J1wiICsgIGlkICsgXCInXVwiICkuYXR0ciggXCJhcmlhLWV4cGFuZGVkXCIsIGZhbHNlICk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gYWxlcnQgdXNlcnMgdGhhdCB0aGUgcG9wdXAgaXMgY2xvc2VkXHJcblx0XHR0aGlzLl90cmlnZ2VyKCBcImFmdGVyY2xvc2VcIiApO1xyXG5cdH0sXHJcblxyXG5cdF9jbG9zZTogZnVuY3Rpb24oIGltbWVkaWF0ZSApIHtcclxuXHRcdHRoaXMuX3VpLmNvbnRhaW5lci5yZW1vdmVDbGFzcyggXCJ1aS1wb3B1cC1hY3RpdmVcIiApO1xyXG5cdFx0dGhpcy5fcGFnZS5yZW1vdmVDbGFzcyggXCJ1aS1wb3B1cC1vcGVuXCIgKTtcclxuXHJcblx0XHR0aGlzLl9pc09wZW4gPSBmYWxzZTtcclxuXHJcblx0XHQvLyBDb3VudCBkb3duIHRvIHRyaWdnZXJpbmcgXCJwb3B1cGFmdGVyY2xvc2VcIiAtIHdlIGhhdmUgdHdvIHByZXJlcXVpc2l0ZXM6XHJcblx0XHQvLyAxLiBUaGUgcG9wdXAgd2luZG93IHJldmVyc2UgYW5pbWF0aW9uIGNvbXBsZXRlcyAoY29udGFpbmVyKCkpXHJcblx0XHQvLyAyLiBUaGUgc2NyZWVuIG9wYWNpdHkgYW5pbWF0aW9uIGNvbXBsZXRlcyAoc2NyZWVuKCkpXHJcblx0XHR0aGlzLl9jcmVhdGVQcmVyZXF1aXNpdGVzKFxyXG5cdFx0XHQkLnByb3h5KCB0aGlzLCBcIl9jbG9zZVByZXJlcXVpc2l0ZVNjcmVlblwiICksXHJcblx0XHRcdCQucHJveHkoIHRoaXMsIFwiX2Nsb3NlUHJlcmVxdWlzaXRlQ29udGFpbmVyXCIgKSxcclxuXHRcdFx0JC5wcm94eSggdGhpcywgXCJfY2xvc2VQcmVyZXF1aXNpdGVzRG9uZVwiICkgKTtcclxuXHJcblx0XHR0aGlzLl9hbmltYXRlKCB7XHJcblx0XHRcdGFkZGl0aW9uYWxDb25kaXRpb246IHRoaXMuX3VpLnNjcmVlbi5oYXNDbGFzcyggXCJpblwiICksXHJcblx0XHRcdHRyYW5zaXRpb246ICggaW1tZWRpYXRlID8gXCJub25lXCIgOiAoIHRoaXMuX2N1cnJlbnRUcmFuc2l0aW9uICkgKSxcclxuXHRcdFx0Y2xhc3NUb1JlbW92ZTogXCJpblwiLFxyXG5cdFx0XHRzY3JlZW5DbGFzc1RvQWRkOiBcIm91dFwiLFxyXG5cdFx0XHRjb250YWluZXJDbGFzc1RvQWRkOiBcInJldmVyc2Ugb3V0XCIsXHJcblx0XHRcdGFwcGx5VHJhbnNpdGlvbjogdHJ1ZSxcclxuXHRcdFx0cHJlcmVxdWlzaXRlczogdGhpcy5fcHJlcmVxdWlzaXRlc1xyXG5cdFx0fSk7XHJcblx0fSxcclxuXHJcblx0X3VuZW5oYW5jZTogZnVuY3Rpb24oKSB7XHJcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5lbmhhbmNlZCApIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFB1dCB0aGUgZWxlbWVudCBiYWNrIHRvIHdoZXJlIHRoZSBwbGFjZWhvbGRlciB3YXMgYW5kIHJlbW92ZSB0aGUgXCJ1aS1wb3B1cFwiIGNsYXNzXHJcblx0XHR0aGlzLl9zZXRPcHRpb25zKCB7IHRoZW1lOiAkLm1vYmlsZS5wb3B1cC5wcm90b3R5cGUub3B0aW9ucy50aGVtZSB9ICk7XHJcblx0XHR0aGlzLmVsZW1lbnRcclxuXHRcdFx0Ly8gQ2Fubm90IGRpcmVjdGx5IGluc2VydEFmdGVyKCkgLSB3ZSBuZWVkIHRvIGRldGFjaCgpIGZpcnN0LCBiZWNhdXNlXHJcblx0XHRcdC8vIGluc2VydEFmdGVyKCkgd2lsbCBkbyBub3RoaW5nIGlmIHRoZSBwYXlsb2FkIGRpdiB3YXMgbm90IGF0dGFjaGVkXHJcblx0XHRcdC8vIHRvIHRoZSBET00gYXQgdGhlIHRpbWUgdGhlIHdpZGdldCB3YXMgY3JlYXRlZCwgYW5kIHNvIHRoZSBwYXlsb2FkXHJcblx0XHRcdC8vIHdpbGwgcmVtYWluIGluc2lkZSB0aGUgY29udGFpbmVyIGV2ZW4gYWZ0ZXIgd2UgY2FsbCBpbnNlcnRBZnRlcigpLlxyXG5cdFx0XHQvLyBJZiB0aGF0IGhhcHBlbnMgYW5kIHdlIHJlbW92ZSB0aGUgY29udGFpbmVyIGEgZmV3IGxpbmVzIGJlbG93LCB3ZVxyXG5cdFx0XHQvLyB3aWxsIGNhdXNlIGFuIGluZmluaXRlIHJlY3Vyc2lvbiAtICM1MjQ0XHJcblx0XHRcdC5kZXRhY2goKVxyXG5cdFx0XHQuaW5zZXJ0QWZ0ZXIoIHRoaXMuX3VpLnBsYWNlaG9sZGVyIClcclxuXHRcdFx0LnJlbW92ZUNsYXNzKCBcInVpLXBvcHVwIHVpLW92ZXJsYXktc2hhZG93IHVpLWNvcm5lci1hbGwgdWktYm9keS1pbmhlcml0XCIgKTtcclxuXHRcdHRoaXMuX3VpLnNjcmVlbi5yZW1vdmUoKTtcclxuXHRcdHRoaXMuX3VpLmNvbnRhaW5lci5yZW1vdmUoKTtcclxuXHRcdHRoaXMuX3VpLnBsYWNlaG9sZGVyLnJlbW92ZSgpO1xyXG5cdH0sXHJcblxyXG5cdF9kZXN0cm95OiBmdW5jdGlvbigpIHtcclxuXHRcdGlmICggJC5tb2JpbGUucG9wdXAuYWN0aXZlID09PSB0aGlzICkge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQub25lKCBcInBvcHVwYWZ0ZXJjbG9zZVwiLCAkLnByb3h5KCB0aGlzLCBcIl91bmVuaGFuY2VcIiApICk7XHJcblx0XHRcdHRoaXMuY2xvc2UoKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRoaXMuX3VuZW5oYW5jZSgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH0sXHJcblxyXG5cdF9jbG9zZVBvcHVwOiBmdW5jdGlvbiggdGhlRXZlbnQsIGRhdGEgKSB7XHJcblx0XHR2YXIgcGFyc2VkRHN0LCB0b1VybCxcclxuXHRcdFx0Y3VycmVudE9wdGlvbnMgPSB0aGlzLm9wdGlvbnMsXHJcblx0XHRcdGltbWVkaWF0ZSA9IGZhbHNlO1xyXG5cclxuXHRcdGlmICggKCB0aGVFdmVudCAmJiB0aGVFdmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSApIHx8ICQubW9iaWxlLnBvcHVwLmFjdGl2ZSAhPT0gdGhpcyApIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIHJlc3RvcmUgbG9jYXRpb24gb24gc2NyZWVuXHJcblx0XHR3aW5kb3cuc2Nyb2xsVG8oIDAsIHRoaXMuX3Njcm9sbFRvcCApO1xyXG5cclxuXHRcdGlmICggdGhlRXZlbnQgJiYgdGhlRXZlbnQudHlwZSA9PT0gXCJwYWdlYmVmb3JlY2hhbmdlXCIgJiYgZGF0YSApIHtcclxuXHRcdFx0Ly8gRGV0ZXJtaW5lIHdoZXRoZXIgd2UgbmVlZCB0byByYXBpZC1jbG9zZSB0aGUgcG9wdXAsIG9yIHdoZXRoZXIgd2UgY2FuXHJcblx0XHRcdC8vIHRha2UgdGhlIHRpbWUgdG8gcnVuIHRoZSBjbG9zaW5nIHRyYW5zaXRpb25cclxuXHRcdFx0aWYgKCB0eXBlb2YgZGF0YS50b1BhZ2UgPT09IFwic3RyaW5nXCIgKSB7XHJcblx0XHRcdFx0cGFyc2VkRHN0ID0gZGF0YS50b1BhZ2U7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0cGFyc2VkRHN0ID0gZGF0YS50b1BhZ2UuanFtRGF0YSggXCJ1cmxcIiApO1xyXG5cdFx0XHR9XHJcblx0XHRcdHBhcnNlZERzdCA9ICQubW9iaWxlLnBhdGgucGFyc2VVcmwoIHBhcnNlZERzdCApO1xyXG5cdFx0XHR0b1VybCA9IHBhcnNlZERzdC5wYXRobmFtZSArIHBhcnNlZERzdC5zZWFyY2ggKyBwYXJzZWREc3QuaGFzaDtcclxuXHJcblx0XHRcdGlmICggdGhpcy5fbXlVcmwgIT09ICQubW9iaWxlLnBhdGgubWFrZVVybEFic29sdXRlKCB0b1VybCApICkge1xyXG5cdFx0XHRcdC8vIEdvaW5nIHRvIGEgZGlmZmVyZW50IHBhZ2UgLSBjbG9zZSBpbW1lZGlhdGVseVxyXG5cdFx0XHRcdGltbWVkaWF0ZSA9IHRydWU7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0dGhlRXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8vIHJlbW92ZSBuYXYgYmluZGluZ3NcclxuXHRcdHRoaXMud2luZG93Lm9mZiggY3VycmVudE9wdGlvbnMuY2xvc2VFdmVudHMgKTtcclxuXHRcdC8vIHVuYmluZCBjbGljayBoYW5kbGVycyBhZGRlZCB3aGVuIGhpc3RvcnkgaXMgZGlzYWJsZWRcclxuXHRcdHRoaXMuZWxlbWVudC51bmRlbGVnYXRlKCBjdXJyZW50T3B0aW9ucy5jbG9zZUxpbmtTZWxlY3RvciwgY3VycmVudE9wdGlvbnMuY2xvc2VMaW5rRXZlbnRzICk7XHJcblxyXG5cdFx0dGhpcy5fY2xvc2UoIGltbWVkaWF0ZSApO1xyXG5cdH0sXHJcblxyXG5cdC8vIGFueSBuYXZpZ2F0aW9uIGV2ZW50IGFmdGVyIGEgcG9wdXAgaXMgb3BlbmVkIHNob3VsZCBjbG9zZSB0aGUgcG9wdXBcclxuXHQvLyBOT1RFIHRoZSBwYWdlYmVmb3JlY2hhbmdlIGlzIGJvdW5kIHRvIGNhdGNoIG5hdmlnYXRpb24gZXZlbnRzIHRoYXQgZG9uJ3RcclxuXHQvLyAgICAgIGFsdGVyIHRoZSB1cmwgKGVnLCBkaWFsb2dzIGZyb20gcG9wdXBzKVxyXG5cdF9iaW5kQ29udGFpbmVyQ2xvc2U6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy53aW5kb3dcclxuXHRcdFx0Lm9uKCB0aGlzLm9wdGlvbnMuY2xvc2VFdmVudHMsICQucHJveHkoIHRoaXMsIFwiX2Nsb3NlUG9wdXBcIiApICk7XHJcblx0fSxcclxuXHJcblx0d2lkZ2V0OiBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiB0aGlzLl91aS5jb250YWluZXI7XHJcblx0fSxcclxuXHJcblx0Ly8gVE9ETyBubyBjbGVhciBkZWxpbmlhdGlvbiBvZiB3aGF0IHNob3VsZCBiZSBoZXJlIGFuZFxyXG5cdC8vIHdoYXQgc2hvdWxkIGJlIGluIF9vcGVuLiBTZWVtcyB0byBiZSBcInZpc3VhbFwiIHZzIFwiaGlzdG9yeVwiIGZvciBub3dcclxuXHRvcGVuOiBmdW5jdGlvbiggb3B0aW9ucyApIHtcclxuXHRcdHZhciB1cmwsIGhhc2hrZXksIGFjdGl2ZVBhZ2UsIGN1cnJlbnRJc0RpYWxvZywgaGFzSGFzaCwgdXJsSGlzdG9yeSxcclxuXHRcdFx0c2VsZiA9IHRoaXMsXHJcblx0XHRcdGN1cnJlbnRPcHRpb25zID0gdGhpcy5vcHRpb25zO1xyXG5cclxuXHRcdC8vIG1ha2Ugc3VyZSBvcGVuIGlzIGlkZW1wb3RlbnRcclxuXHRcdGlmICggJC5tb2JpbGUucG9wdXAuYWN0aXZlIHx8IGN1cnJlbnRPcHRpb25zLmRpc2FibGVkICkge1xyXG5cdFx0XHRyZXR1cm4gdGhpcztcclxuXHRcdH1cclxuXHJcblx0XHQvLyBzZXQgdGhlIGdsb2JhbCBwb3B1cCBtdXRleFxyXG5cdFx0JC5tb2JpbGUucG9wdXAuYWN0aXZlID0gdGhpcztcclxuXHRcdHRoaXMuX3Njcm9sbFRvcCA9IHRoaXMud2luZG93LnNjcm9sbFRvcCgpO1xyXG5cclxuXHRcdC8vIGlmIGhpc3RvcnkgYWx0ZXJhdGlvbiBpcyBkaXNhYmxlZCBjbG9zZSBvbiBuYXZpZ2F0ZSBldmVudHNcclxuXHRcdC8vIGFuZCBsZWF2ZSB0aGUgdXJsIGFzIGlzXHJcblx0XHRpZiAoICEoIGN1cnJlbnRPcHRpb25zLmhpc3RvcnkgKSApIHtcclxuXHRcdFx0c2VsZi5fb3Blbiggb3B0aW9ucyApO1xyXG5cdFx0XHRzZWxmLl9iaW5kQ29udGFpbmVyQ2xvc2UoKTtcclxuXHJcblx0XHRcdC8vIFdoZW4gaGlzdG95IGlzIGRpc2FibGVkIHdlIGhhdmUgdG8gZ3JhYiB0aGUgZGF0YS1yZWxcclxuXHRcdFx0Ly8gYmFjayBsaW5rIGNsaWNrcyBzbyB3ZSBjYW4gY2xvc2UgdGhlIHBvcHVwIGluc3RlYWQgb2ZcclxuXHRcdFx0Ly8gcmVseWluZyBvbiBoaXN0b3J5IHRvIGRvIGl0IGZvciB1c1xyXG5cdFx0XHRzZWxmLmVsZW1lbnRcclxuXHRcdFx0XHQuZGVsZWdhdGUoIGN1cnJlbnRPcHRpb25zLmNsb3NlTGlua1NlbGVjdG9yLCBjdXJyZW50T3B0aW9ucy5jbG9zZUxpbmtFdmVudHMsIGZ1bmN0aW9uKCB0aGVFdmVudCApIHtcclxuXHRcdFx0XHRcdHNlbGYuY2xvc2UoKTtcclxuXHRcdFx0XHRcdHRoZUV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0fSk7XHJcblxyXG5cdFx0XHRyZXR1cm4gdGhpcztcclxuXHRcdH1cclxuXHJcblx0XHQvLyBjYWNoZSBzb21lIHZhbHVlcyBmb3IgbWluL3JlYWRhYmlsaXR5XHJcblx0XHR1cmxIaXN0b3J5ID0gJC5tb2JpbGUubmF2aWdhdGUuaGlzdG9yeTtcclxuXHRcdGhhc2hrZXkgPSAkLm1vYmlsZS5kaWFsb2dIYXNoS2V5O1xyXG5cdFx0YWN0aXZlUGFnZSA9ICQubW9iaWxlLmFjdGl2ZVBhZ2U7XHJcblx0XHRjdXJyZW50SXNEaWFsb2cgPSAoIGFjdGl2ZVBhZ2UgPyBhY3RpdmVQYWdlLmhhc0NsYXNzKCBcInVpLWRpYWxvZ1wiICkgOiBmYWxzZSApO1xyXG5cdFx0dGhpcy5fbXlVcmwgPSB1cmwgPSB1cmxIaXN0b3J5LmdldEFjdGl2ZSgpLnVybDtcclxuXHRcdGhhc0hhc2ggPSAoIHVybC5pbmRleE9mKCBoYXNoa2V5ICkgPiAtMSApICYmICFjdXJyZW50SXNEaWFsb2cgJiYgKCB1cmxIaXN0b3J5LmFjdGl2ZUluZGV4ID4gMCApO1xyXG5cclxuXHRcdGlmICggaGFzSGFzaCApIHtcclxuXHRcdFx0c2VsZi5fb3Blbiggb3B0aW9ucyApO1xyXG5cdFx0XHRzZWxmLl9iaW5kQ29udGFpbmVyQ2xvc2UoKTtcclxuXHRcdFx0cmV0dXJuIHRoaXM7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gaWYgdGhlIGN1cnJlbnQgdXJsIGhhcyBubyBkaWFsb2cgaGFzaCBrZXkgcHJvY2VlZCBhcyBub3JtYWxcclxuXHRcdC8vIG90aGVyd2lzZSwgaWYgdGhlIHBhZ2UgaXMgYSBkaWFsb2cgc2ltcGx5IHRhY2sgb24gdGhlIGhhc2gga2V5XHJcblx0XHRpZiAoIHVybC5pbmRleE9mKCBoYXNoa2V5ICkgPT09IC0xICYmICFjdXJyZW50SXNEaWFsb2cgKSB7XHJcblx0XHRcdHVybCA9IHVybCArICh1cmwuaW5kZXhPZiggXCIjXCIgKSA+IC0xID8gaGFzaGtleSA6IFwiI1wiICsgaGFzaGtleSk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR1cmwgPSAkLm1vYmlsZS5wYXRoLnBhcnNlTG9jYXRpb24oKS5oYXNoICsgaGFzaGtleTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBzd2FsbG93IHRoZSB0aGUgaW5pdGlhbCBuYXZpZ2F0aW9uIGV2ZW50LCBhbmQgYmluZCBmb3IgdGhlIG5leHRcclxuXHRcdHRoaXMud2luZG93Lm9uZSggXCJiZWZvcmVuYXZpZ2F0ZVwiLCBmdW5jdGlvbiggdGhlRXZlbnQgKSB7XHJcblx0XHRcdHRoZUV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdHNlbGYuX29wZW4oIG9wdGlvbnMgKTtcclxuXHRcdFx0c2VsZi5fYmluZENvbnRhaW5lckNsb3NlKCk7XHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLnVybEFsdGVyZWQgPSB0cnVlO1xyXG5cdFx0JC5tb2JpbGUubmF2aWdhdGUoIHVybCwgeyByb2xlOiBcImRpYWxvZ1wiIH0gKTtcclxuXHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9LFxyXG5cclxuXHRjbG9zZTogZnVuY3Rpb24oKSB7XHJcblx0XHQvLyBtYWtlIHN1cmUgY2xvc2UgaXMgaWRlbXBvdGVudFxyXG5cdFx0aWYgKCAkLm1vYmlsZS5wb3B1cC5hY3RpdmUgIT09IHRoaXMgKSB7XHJcblx0XHRcdHJldHVybiB0aGlzO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX3Njcm9sbFRvcCA9IHRoaXMud2luZG93LnNjcm9sbFRvcCgpO1xyXG5cclxuXHRcdGlmICggdGhpcy5vcHRpb25zLmhpc3RvcnkgJiYgdGhpcy51cmxBbHRlcmVkICkge1xyXG5cdFx0XHQkLm1vYmlsZS5iYWNrKCk7XHJcblx0XHRcdHRoaXMudXJsQWx0ZXJlZCA9IGZhbHNlO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0Ly8gc2ltdWxhdGUgdGhlIG5hdiBiaW5kaW5ncyBoYXZpbmcgZmlyZWRcclxuXHRcdFx0dGhpcy5fY2xvc2VQb3B1cCgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH1cclxufSk7XHJcblxyXG4vLyBUT0RPIHRoaXMgY2FuIGJlIG1vdmVkIGluc2lkZSB0aGUgd2lkZ2V0XHJcbiQubW9iaWxlLnBvcHVwLmhhbmRsZUxpbmsgPSBmdW5jdGlvbiggJGxpbmsgKSB7XHJcblx0dmFyIG9mZnNldCxcclxuXHRcdHBhdGggPSAkLm1vYmlsZS5wYXRoLFxyXG5cclxuXHRcdC8vIE5PVEUgbWFrZSBzdXJlIHRvIGdldCBvbmx5IHRoZSBoYXNoIGZyb20gdGhlIGhyZWYgYmVjYXVzZSBpZTcgKHdwNylcclxuXHRcdC8vICAgICAgcmV0dXJucyB0aGUgYWJzb2x1dGUgaHJlZiBpbiB0aGlzIGNhc2UgcnVpbmluZyB0aGUgZWxlbWVudCBzZWxlY3Rpb25cclxuXHRcdHBvcHVwID0gJCggcGF0aC5oYXNoVG9TZWxlY3RvciggcGF0aC5wYXJzZVVybCggJGxpbmsuYXR0ciggXCJocmVmXCIgKSApLmhhc2ggKSApLmZpcnN0KCk7XHJcblxyXG5cdGlmICggcG9wdXAubGVuZ3RoID4gMCAmJiBwb3B1cC5kYXRhKCBcIm1vYmlsZS1wb3B1cFwiICkgKSB7XHJcblx0XHRvZmZzZXQgPSAkbGluay5vZmZzZXQoKTtcclxuXHRcdHBvcHVwLnBvcHVwKCBcIm9wZW5cIiwge1xyXG5cdFx0XHR4OiBvZmZzZXQubGVmdCArICRsaW5rLm91dGVyV2lkdGgoKSAvIDIsXHJcblx0XHRcdHk6IG9mZnNldC50b3AgKyAkbGluay5vdXRlckhlaWdodCgpIC8gMixcclxuXHRcdFx0dHJhbnNpdGlvbjogJGxpbmsuanFtRGF0YSggXCJ0cmFuc2l0aW9uXCIgKSxcclxuXHRcdFx0cG9zaXRpb25UbzogJGxpbmsuanFtRGF0YSggXCJwb3NpdGlvbi10b1wiIClcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0Ly9yZW1vdmUgYWZ0ZXIgZGVsYXlcclxuXHRzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcclxuXHRcdCRsaW5rLnJlbW92ZUNsYXNzKCAkLm1vYmlsZS5hY3RpdmVCdG5DbGFzcyApO1xyXG5cdH0sIDMwMCApO1xyXG59O1xyXG5cclxuLy8gVE9ETyBtb3ZlIGluc2lkZSBfY3JlYXRlXHJcbiQubW9iaWxlLmRvY3VtZW50Lm9uKCBcInBhZ2ViZWZvcmVjaGFuZ2VcIiwgZnVuY3Rpb24oIHRoZUV2ZW50LCBkYXRhICkge1xyXG5cdGlmICggZGF0YS5vcHRpb25zLnJvbGUgPT09IFwicG9wdXBcIiApIHtcclxuXHRcdCQubW9iaWxlLnBvcHVwLmhhbmRsZUxpbmsoIGRhdGEub3B0aW9ucy5saW5rICk7XHJcblx0XHR0aGVFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdH1cclxufSk7XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4vKlxyXG4qIGN1c3RvbSBcInNlbGVjdG1lbnVcIiBwbHVnaW5cclxuKi9cclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxudmFyIHVuZm9jdXNhYmxlSXRlbVNlbGVjdG9yID0gXCIudWktZGlzYWJsZWQsLnVpLXN0YXRlLWRpc2FibGVkLC51aS1saS1kaXZpZGVyLC51aS1zY3JlZW4taGlkZGVuLDpqcW1EYXRhKHJvbGU9J3BsYWNlaG9sZGVyJylcIixcclxuXHRnb1RvQWRqYWNlbnRJdGVtID0gZnVuY3Rpb24oIGl0ZW0sIHRhcmdldCwgZGlyZWN0aW9uICkge1xyXG5cdFx0dmFyIGFkamFjZW50ID0gaXRlbVsgZGlyZWN0aW9uICsgXCJBbGxcIiBdKClcclxuXHRcdFx0Lm5vdCggdW5mb2N1c2FibGVJdGVtU2VsZWN0b3IgKVxyXG5cdFx0XHQuZmlyc3QoKTtcclxuXHJcblx0XHQvLyBpZiB0aGVyZSdzIGEgcHJldmlvdXMgb3B0aW9uLCBmb2N1cyBpdFxyXG5cdFx0aWYgKCBhZGphY2VudC5sZW5ndGggKSB7XHJcblx0XHRcdHRhcmdldFxyXG5cdFx0XHRcdC5ibHVyKClcclxuXHRcdFx0XHQuYXR0ciggXCJ0YWJpbmRleFwiLCBcIi0xXCIgKTtcclxuXHJcblx0XHRcdGFkamFjZW50LmZpbmQoIFwiYVwiICkuZmlyc3QoKS5mb2N1cygpO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG4kLndpZGdldCggXCJtb2JpbGUuc2VsZWN0bWVudVwiLCAkLm1vYmlsZS5zZWxlY3RtZW51LCB7XHJcblx0X2NyZWF0ZTogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgbyA9IHRoaXMub3B0aW9ucztcclxuXHJcblx0XHQvLyBDdXN0b20gc2VsZWN0cyBjYW5ub3QgZXhpc3QgaW5zaWRlIHBvcHVwcywgc28gcmV2ZXJ0IHRoZSBcIm5hdGl2ZU1lbnVcIlxyXG5cdFx0Ly8gb3B0aW9uIHRvIHRydWUgaWYgYSBwYXJlbnQgaXMgYSBwb3B1cFxyXG5cdFx0by5uYXRpdmVNZW51ID0gby5uYXRpdmVNZW51IHx8ICggdGhpcy5lbGVtZW50LnBhcmVudHMoIFwiOmpxbURhdGEocm9sZT0ncG9wdXAnKSw6bW9iaWxlLXBvcHVwXCIgKS5sZW5ndGggPiAwICk7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXMuX3N1cGVyKCk7XHJcblx0fSxcclxuXHJcblx0X2hhbmRsZVNlbGVjdEZvY3VzOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuZWxlbWVudC5ibHVyKCk7XHJcblx0XHR0aGlzLmJ1dHRvbi5mb2N1cygpO1xyXG5cdH0sXHJcblxyXG5cdF9oYW5kbGVLZXlkb3duOiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHR0aGlzLl9zdXBlciggZXZlbnQgKTtcclxuXHRcdHRoaXMuX2hhbmRsZUJ1dHRvblZjbGlja0tleWRvd24oIGV2ZW50ICk7XHJcblx0fSxcclxuXHJcblx0X2hhbmRsZUJ1dHRvblZjbGlja0tleWRvd246IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdGlmICggdGhpcy5vcHRpb25zLmRpc2FibGVkIHx8IHRoaXMuaXNPcGVuIHx8IHRoaXMub3B0aW9ucy5uYXRpdmVNZW51ICkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKGV2ZW50LnR5cGUgPT09IFwidmNsaWNrXCIgfHxcclxuXHRcdFx0XHRldmVudC5rZXlDb2RlICYmIChldmVudC5rZXlDb2RlID09PSAkLm1vYmlsZS5rZXlDb2RlLkVOVEVSIHx8IGV2ZW50LmtleUNvZGUgPT09ICQubW9iaWxlLmtleUNvZGUuU1BBQ0UpKSB7XHJcblxyXG5cdFx0XHR0aGlzLl9kZWNpZGVGb3JtYXQoKTtcclxuXHRcdFx0aWYgKCB0aGlzLm1lbnVUeXBlID09PSBcIm92ZXJsYXlcIiApIHtcclxuXHRcdFx0XHR0aGlzLmJ1dHRvbi5hdHRyKCBcImhyZWZcIiwgXCIjXCIgKyB0aGlzLnBvcHVwSWQgKS5hdHRyKCBcImRhdGEtXCIgKyAoICQubW9iaWxlLm5zIHx8IFwiXCIgKSArIFwicmVsXCIsIFwicG9wdXBcIiApO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHRoaXMuYnV0dG9uLmF0dHIoIFwiaHJlZlwiLCBcIiNcIiArIHRoaXMuZGlhbG9nSWQgKS5hdHRyKCBcImRhdGEtXCIgKyAoICQubW9iaWxlLm5zIHx8IFwiXCIgKSArIFwicmVsXCIsIFwiZGlhbG9nXCIgKTtcclxuXHRcdFx0fVxyXG5cdFx0XHR0aGlzLmlzT3BlbiA9IHRydWU7XHJcblx0XHRcdC8vIERvIG5vdCBwcmV2ZW50IGRlZmF1bHQsIHNvIHRoZSBuYXZpZ2F0aW9uIG1heSBoYXZlIGEgY2hhbmNlIHRvIGFjdHVhbGx5IG9wZW4gdGhlIGNob3NlbiBmb3JtYXRcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfaGFuZGxlTGlzdEZvY3VzOiBmdW5jdGlvbiggZSApIHtcclxuXHRcdHZhciBwYXJhbXMgPSAoIGUudHlwZSA9PT0gXCJmb2N1c2luXCIgKSA/XHJcblx0XHRcdHsgdGFiaW5kZXg6IFwiMFwiLCBldmVudDogXCJ2bW91c2VvdmVyXCIgfTpcclxuXHRcdFx0eyB0YWJpbmRleDogXCItMVwiLCBldmVudDogXCJ2bW91c2VvdXRcIiB9O1xyXG5cclxuXHRcdCQoIGUudGFyZ2V0IClcclxuXHRcdFx0LmF0dHIoIFwidGFiaW5kZXhcIiwgcGFyYW1zLnRhYmluZGV4IClcclxuXHRcdFx0LnRyaWdnZXIoIHBhcmFtcy5ldmVudCApO1xyXG5cdH0sXHJcblxyXG5cdF9oYW5kbGVMaXN0S2V5ZG93bjogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0dmFyIHRhcmdldCA9ICQoIGV2ZW50LnRhcmdldCApLFxyXG5cdFx0XHRsaSA9IHRhcmdldC5jbG9zZXN0KCBcImxpXCIgKTtcclxuXHJcblx0XHQvLyBzd2l0Y2ggbG9naWMgYmFzZWQgb24gd2hpY2gga2V5IHdhcyBwcmVzc2VkXHJcblx0XHRzd2l0Y2ggKCBldmVudC5rZXlDb2RlICkge1xyXG5cdFx0XHQvLyB1cCBvciBsZWZ0IGFycm93IGtleXNcclxuXHRcdGNhc2UgMzg6XHJcblx0XHRcdGdvVG9BZGphY2VudEl0ZW0oIGxpLCB0YXJnZXQsIFwicHJldlwiICk7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0Ly8gZG93biBvciByaWdodCBhcnJvdyBrZXlzXHJcblx0XHRjYXNlIDQwOlxyXG5cdFx0XHRnb1RvQWRqYWNlbnRJdGVtKCBsaSwgdGFyZ2V0LCBcIm5leHRcIiApO1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdC8vIElmIGVudGVyIG9yIHNwYWNlIGlzIHByZXNzZWQsIHRyaWdnZXIgY2xpY2tcclxuXHRcdGNhc2UgMTM6XHJcblx0XHRjYXNlIDMyOlxyXG5cdFx0XHR0YXJnZXQudHJpZ2dlciggXCJjbGlja1wiICk7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfaGFuZGxlTWVudVBhZ2VIaWRlOiBmdW5jdGlvbigpIHtcclxuXHJcblx0XHQvLyBBZnRlciB0aGUgZGlhbG9nJ3MgZG9uZSwgd2UgbWF5IHdhbnQgdG8gdHJpZ2dlciBjaGFuZ2UgaWYgdGhlIHZhbHVlIGhhcyBhY3R1YWxseSBjaGFuZ2VkXHJcblx0XHR0aGlzLl9kZWxheWVkVHJpZ2dlcigpO1xyXG5cclxuXHRcdC8vIFRPRE8gY2VudHJhbGl6ZSBwYWdlIHJlbW92YWwgYmluZGluZyAvIGhhbmRsaW5nIGluIHRoZSBwYWdlIHBsdWdpbi5cclxuXHRcdC8vIFN1Z2dlc3Rpb24gZnJvbSBAamJsYXMgdG8gZG8gcmVmY291bnRpbmdcclxuXHRcdC8vXHJcblx0XHQvLyBUT0RPIGV4dHJlbWVseSBjb25mdXNpbmcgZGVwZW5kZW5jeSBvbiB0aGUgb3BlbiBtZXRob2Qgd2hlcmUgdGhlIHBhZ2VoaWRlLnJlbW92ZVxyXG5cdFx0Ly8gYmluZGluZ3MgYXJlIHN0cmlwcGVkIHRvIHByZXZlbnQgdGhlIHBhcmVudCBwYWdlIGZyb20gZGlzYXBwZWFyaW5nLiBUaGUgd2F5XHJcblx0XHQvLyB3ZSdyZSBrZWVwaW5nIHBhZ2VzIGluIHRoZSBET00gcmlnaHQgbm93IHN1Y2tzXHJcblx0XHQvL1xyXG5cdFx0Ly8gcmViaW5kIHRoZSBwYWdlIHJlbW92ZSB0aGF0IHdhcyB1bmJvdW5kIGluIHRoZSBvcGVuIGZ1bmN0aW9uXHJcblx0XHQvLyB0byBhbGxvdyBmb3IgdGhlIHBhcmVudCBwYWdlIHJlbW92YWwgZnJvbSBhY3Rpb25zIG90aGVyIHRoYW4gdGhlIHVzZVxyXG5cdFx0Ly8gb2YgYSBkaWFsb2cgc2l6ZWQgY3VzdG9tIHNlbGVjdFxyXG5cdFx0Ly9cclxuXHRcdC8vIGRvaW5nIHRoaXMgaGVyZSBwcm92aWRlcyBmb3IgdGhlIGJhY2sgYnV0dG9uIG9uIHRoZSBjdXN0b20gc2VsZWN0IGRpYWxvZ1xyXG5cdFx0dGhpcy50aGlzUGFnZS5wYWdlKCBcImJpbmRSZW1vdmVcIiApO1xyXG5cdH0sXHJcblxyXG5cdF9oYW5kbGVIZWFkZXJDbG9zZUNsaWNrOiBmdW5jdGlvbigpIHtcclxuXHRcdGlmICggdGhpcy5tZW51VHlwZSA9PT0gXCJvdmVybGF5XCIgKSB7XHJcblx0XHRcdHRoaXMuY2xvc2UoKTtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9oYW5kbGVMaXN0SXRlbUNsaWNrOiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHR2YXIgbGlzdEl0ZW0gPSAkKCBldmVudC50YXJnZXQgKS5jbG9zZXN0KCBcImxpXCIgKSxcclxuXHJcblx0XHRcdC8vIEluZGV4IG9mIG9wdGlvbiB0YWcgdG8gYmUgc2VsZWN0ZWRcclxuXHRcdFx0b2xkSW5kZXggPSB0aGlzLnNlbGVjdFsgMCBdLnNlbGVjdGVkSW5kZXgsXHJcblx0XHRcdG5ld0luZGV4ID0gJC5tb2JpbGUuZ2V0QXR0cmlidXRlKCBsaXN0SXRlbSwgXCJvcHRpb24taW5kZXhcIiApLFxyXG5cdFx0XHRvcHRpb24gPSB0aGlzLl9zZWxlY3RPcHRpb25zKCkuZXEoIG5ld0luZGV4IClbIDAgXTtcclxuXHJcblx0XHQvLyBUb2dnbGUgc2VsZWN0ZWQgc3RhdHVzIG9uIHRoZSB0YWcgZm9yIG11bHRpIHNlbGVjdHNcclxuXHRcdG9wdGlvbi5zZWxlY3RlZCA9IHRoaXMuaXNNdWx0aXBsZSA/ICFvcHRpb24uc2VsZWN0ZWQgOiB0cnVlO1xyXG5cclxuXHRcdC8vIFRvZ2dsZSBjaGVja2JveCBjbGFzcyBmb3IgbXVsdGlwbGUgc2VsZWN0c1xyXG5cdFx0aWYgKCB0aGlzLmlzTXVsdGlwbGUgKSB7XHJcblx0XHRcdGxpc3RJdGVtLmZpbmQoIFwiYVwiIClcclxuXHRcdFx0XHQudG9nZ2xlQ2xhc3MoIFwidWktY2hlY2tib3gtb25cIiwgb3B0aW9uLnNlbGVjdGVkIClcclxuXHRcdFx0XHQudG9nZ2xlQ2xhc3MoIFwidWktY2hlY2tib3gtb2ZmXCIsICFvcHRpb24uc2VsZWN0ZWQgKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBJZiBpdCdzIG5vdCBhIG11bHRpcGxlIHNlbGVjdCwgdHJpZ2dlciBjaGFuZ2UgYWZ0ZXIgaXQgaGFzIGZpbmlzaGVkIGNsb3NpbmdcclxuXHRcdGlmICggIXRoaXMuaXNNdWx0aXBsZSAmJiBvbGRJbmRleCAhPT0gbmV3SW5kZXggKSB7XHJcblx0XHRcdHRoaXMuX3RyaWdnZXJDaGFuZ2UgPSB0cnVlO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFRyaWdnZXIgY2hhbmdlIGlmIGl0J3MgYSBtdWx0aXBsZSBzZWxlY3RcclxuXHRcdC8vIEhpZGUgY3VzdG9tIHNlbGVjdCBmb3Igc2luZ2xlIHNlbGVjdHMgb25seSAtIG90aGVyd2lzZSBmb2N1cyBjbGlja2VkIGl0ZW1cclxuXHRcdC8vIFdlIG5lZWQgdG8gZ3JhYiB0aGUgY2xpY2tlZCBpdGVtIHRoZSBoYXJkIHdheSwgYmVjYXVzZSB0aGUgbGlzdCBtYXkgaGF2ZSBiZWVuIHJlYnVpbHRcclxuXHRcdGlmICggdGhpcy5pc011bHRpcGxlICkge1xyXG5cdFx0XHR0aGlzLnNlbGVjdC50cmlnZ2VyKCBcImNoYW5nZVwiICk7XHJcblx0XHRcdHRoaXMubGlzdC5maW5kKCBcImxpOm5vdCgudWktbGktZGl2aWRlcilcIiApLmVxKCBuZXdJbmRleCApXHJcblx0XHRcdFx0LmZpbmQoIFwiYVwiICkuZmlyc3QoKS5mb2N1cygpO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSB7XHJcblx0XHRcdHRoaXMuY2xvc2UoKTtcclxuXHRcdH1cclxuXHJcblx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdH0sXHJcblxyXG5cdGJ1aWxkOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBzZWxlY3RJZCwgcG9wdXBJZCwgZGlhbG9nSWQsIGxhYmVsLCB0aGlzUGFnZSwgaXNNdWx0aXBsZSwgbWVudUlkLFxyXG5cdFx0XHR0aGVtZUF0dHIsIG92ZXJsYXlUaGVtZSwgb3ZlcmxheVRoZW1lQXR0ciwgZGl2aWRlclRoZW1lQXR0cixcclxuXHRcdFx0bWVudVBhZ2UsIGxpc3Rib3gsIGxpc3QsIGhlYWRlciwgaGVhZGVyVGl0bGUsIG1lbnVQYWdlQ29udGVudCxcclxuXHRcdFx0bWVudVBhZ2VDbG9zZSwgaGVhZGVyQ2xvc2UsXHJcblx0XHRcdG8gPSB0aGlzLm9wdGlvbnM7XHJcblxyXG5cdFx0aWYgKCBvLm5hdGl2ZU1lbnUgKSB7XHJcblx0XHRcdHJldHVybiB0aGlzLl9zdXBlcigpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHNlbGVjdElkID0gdGhpcy5zZWxlY3RJZDtcclxuXHRcdHBvcHVwSWQgPSBzZWxlY3RJZCArIFwiLWxpc3Rib3hcIjtcclxuXHRcdGRpYWxvZ0lkID0gc2VsZWN0SWQgKyBcIi1kaWFsb2dcIjtcclxuXHRcdGxhYmVsID0gdGhpcy5sYWJlbDtcclxuXHRcdHRoaXNQYWdlID0gdGhpcy5lbGVtZW50LmNsb3Nlc3QoIFwiLnVpLXBhZ2VcIiApO1xyXG5cdFx0aXNNdWx0aXBsZSA9IHRoaXMuZWxlbWVudFsgMCBdLm11bHRpcGxlO1xyXG5cdFx0bWVudUlkID0gc2VsZWN0SWQgKyBcIi1tZW51XCI7XHJcblx0XHR0aGVtZUF0dHIgPSBvLnRoZW1lID8gKCBcIiBkYXRhLVwiICsgJC5tb2JpbGUubnMgKyBcInRoZW1lPSdcIiArIG8udGhlbWUgKyBcIidcIiApIDogXCJcIjtcclxuXHRcdG92ZXJsYXlUaGVtZSA9IG8ub3ZlcmxheVRoZW1lIHx8IG8udGhlbWUgfHwgbnVsbDtcclxuXHRcdG92ZXJsYXlUaGVtZUF0dHIgPSBvdmVybGF5VGhlbWUgPyAoIFwiIGRhdGEtXCIgKyAkLm1vYmlsZS5ucyArXHJcblx0XHRcdFwib3ZlcmxheS10aGVtZT0nXCIgKyBvdmVybGF5VGhlbWUgKyBcIidcIiApIDogXCJcIjtcclxuXHRcdGRpdmlkZXJUaGVtZUF0dHIgPSAoIG8uZGl2aWRlclRoZW1lICYmIGlzTXVsdGlwbGUgKSA/ICggXCIgZGF0YS1cIiArICQubW9iaWxlLm5zICsgXCJkaXZpZGVyLXRoZW1lPSdcIiArIG8uZGl2aWRlclRoZW1lICsgXCInXCIgKSA6IFwiXCI7XHJcblx0XHRtZW51UGFnZSA9ICQoIFwiPGRpdiBkYXRhLVwiICsgJC5tb2JpbGUubnMgKyBcInJvbGU9J2RpYWxvZycgY2xhc3M9J3VpLXNlbGVjdG1lbnUnIGlkPSdcIiArIGRpYWxvZ0lkICsgXCInXCIgKyB0aGVtZUF0dHIgKyBvdmVybGF5VGhlbWVBdHRyICsgXCI+XCIgK1xyXG5cdFx0XHRcIjxkaXYgZGF0YS1cIiArICQubW9iaWxlLm5zICsgXCJyb2xlPSdoZWFkZXInPlwiICtcclxuXHRcdFx0XCI8ZGl2IGNsYXNzPSd1aS10aXRsZSc+PC9kaXY+XCIrXHJcblx0XHRcdFwiPC9kaXY+XCIrXHJcblx0XHRcdFwiPGRpdiBkYXRhLVwiICsgJC5tb2JpbGUubnMgKyBcInJvbGU9J2NvbnRlbnQnPjwvZGl2PlwiK1xyXG5cdFx0XHRcIjwvZGl2PlwiICk7XHJcblx0XHRsaXN0Ym94ID0gJCggXCI8ZGl2XCIgKyB0aGVtZUF0dHIgKyBvdmVybGF5VGhlbWVBdHRyICsgXCIgaWQ9J1wiICsgcG9wdXBJZCArXHJcblx0XHRcdFx0XCInIGNsYXNzPSd1aS1zZWxlY3RtZW51Jz48L2Rpdj5cIiApXHJcblx0XHRcdC5pbnNlcnRBZnRlciggdGhpcy5zZWxlY3QgKVxyXG5cdFx0XHQucG9wdXAoKTtcclxuXHRcdGxpc3QgPSAkKCBcIjx1bCBjbGFzcz0ndWktc2VsZWN0bWVudS1saXN0JyBpZD0nXCIgKyBtZW51SWQgKyBcIicgcm9sZT0nbGlzdGJveCcgYXJpYS1sYWJlbGxlZGJ5PSdcIiArIHRoaXMuYnV0dG9uSWQgKyBcIidcIiArIHRoZW1lQXR0ciArIGRpdmlkZXJUaGVtZUF0dHIgKyBcIj48L3VsPlwiICkuYXBwZW5kVG8oIGxpc3Rib3ggKTtcclxuXHRcdGhlYWRlciA9ICQoIFwiPGRpdiBjbGFzcz0ndWktaGVhZGVyIHVpLWJhci1cIiArICggby50aGVtZSA/IG8udGhlbWUgOiBcImluaGVyaXRcIiApICsgXCInPjwvZGl2PlwiICkucHJlcGVuZFRvKCBsaXN0Ym94ICk7XHJcblx0XHRoZWFkZXJUaXRsZSA9ICQoIFwiPGgxIGNsYXNzPSd1aS10aXRsZSc+PC9oMT5cIiApLmFwcGVuZFRvKCBoZWFkZXIgKTtcclxuXHJcblx0XHRpZiAoIHRoaXMuaXNNdWx0aXBsZSApIHtcclxuXHRcdFx0aGVhZGVyQ2xvc2UgPSAkKCBcIjxhPlwiLCB7XHJcblx0XHRcdFx0XCJyb2xlXCI6IFwiYnV0dG9uXCIsXHJcblx0XHRcdFx0XCJ0ZXh0XCI6IG8uY2xvc2VUZXh0LFxyXG5cdFx0XHRcdFwiaHJlZlwiOiBcIiNcIixcclxuXHRcdFx0XHRcImNsYXNzXCI6IFwidWktYnRuIHVpLWNvcm5lci1hbGwgdWktYnRuLWxlZnQgdWktYnRuLWljb24tbm90ZXh0IHVpLWljb24tZGVsZXRlXCJcclxuXHRcdFx0fSkuYXBwZW5kVG8oIGhlYWRlciApO1xyXG5cdFx0fVxyXG5cclxuXHRcdCQuZXh0ZW5kKCB0aGlzLCB7XHJcblx0XHRcdHNlbGVjdElkOiBzZWxlY3RJZCxcclxuXHRcdFx0bWVudUlkOiBtZW51SWQsXHJcblx0XHRcdHBvcHVwSWQ6IHBvcHVwSWQsXHJcblx0XHRcdGRpYWxvZ0lkOiBkaWFsb2dJZCxcclxuXHRcdFx0dGhpc1BhZ2U6IHRoaXNQYWdlLFxyXG5cdFx0XHRtZW51UGFnZTogbWVudVBhZ2UsXHJcblx0XHRcdGxhYmVsOiBsYWJlbCxcclxuXHRcdFx0aXNNdWx0aXBsZTogaXNNdWx0aXBsZSxcclxuXHRcdFx0dGhlbWU6IG8udGhlbWUsXHJcblx0XHRcdGxpc3Rib3g6IGxpc3Rib3gsXHJcblx0XHRcdGxpc3Q6IGxpc3QsXHJcblx0XHRcdGhlYWRlcjogaGVhZGVyLFxyXG5cdFx0XHRoZWFkZXJUaXRsZTogaGVhZGVyVGl0bGUsXHJcblx0XHRcdGhlYWRlckNsb3NlOiBoZWFkZXJDbG9zZSxcclxuXHRcdFx0bWVudVBhZ2VDb250ZW50OiBtZW51UGFnZUNvbnRlbnQsXHJcblx0XHRcdG1lbnVQYWdlQ2xvc2U6IG1lbnVQYWdlQ2xvc2UsXHJcblx0XHRcdHBsYWNlaG9sZGVyOiBcIlwiXHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBDcmVhdGUgbGlzdCBmcm9tIHNlbGVjdCwgdXBkYXRlIHN0YXRlXHJcblx0XHR0aGlzLnJlZnJlc2goKTtcclxuXHJcblx0XHRpZiAoIHRoaXMuX29yaWdUYWJJbmRleCA9PT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHQvLyBNYXAgdW5kZWZpbmVkIHRvIGZhbHNlLCBiZWNhdXNlIHRoaXMuX29yaWdUYWJJbmRleCA9PT0gdW5kZWZpbmVkXHJcblx0XHRcdC8vIGluZGljYXRlcyB0aGF0IHdlIGhhdmUgbm90IHlldCBjaGVja2VkIHdoZXRoZXIgdGhlIHNlbGVjdCBoYXNcclxuXHRcdFx0Ly8gb3JpZ2luYWxseSBoYWQgYSB0YWJpbmRleCBhdHRyaWJ1dGUsIHdoZXJlYXMgZmFsc2UgaW5kaWNhdGVzIHRoYXRcclxuXHRcdFx0Ly8gd2UgaGF2ZSBjaGVja2VkIHRoZSBzZWxlY3QgZm9yIHN1Y2ggYW4gYXR0cmlidXRlLCBhbmQgaGF2ZSBmb3VuZFxyXG5cdFx0XHQvLyBub25lIHByZXNlbnQuXHJcblx0XHRcdHRoaXMuX29yaWdUYWJJbmRleCA9ICggdGhpcy5zZWxlY3RbIDAgXS5nZXRBdHRyaWJ1dGUoIFwidGFiaW5kZXhcIiApID09PSBudWxsICkgPyBmYWxzZSA6IHRoaXMuc2VsZWN0LmF0dHIoIFwidGFiaW5kZXhcIiApO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5zZWxlY3QuYXR0ciggXCJ0YWJpbmRleFwiLCBcIi0xXCIgKTtcclxuXHRcdHRoaXMuX29uKCB0aGlzLnNlbGVjdCwgeyBmb2N1cyA6IFwiX2hhbmRsZVNlbGVjdEZvY3VzXCIgfSApO1xyXG5cclxuXHRcdC8vIEJ1dHRvbiBldmVudHNcclxuXHRcdHRoaXMuX29uKCB0aGlzLmJ1dHRvbiwge1xyXG5cdFx0XHR2Y2xpY2s6IFwiX2hhbmRsZUJ1dHRvblZjbGlja0tleWRvd25cIlxyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gRXZlbnRzIGZvciBsaXN0IGl0ZW1zXHJcblx0XHR0aGlzLmxpc3QuYXR0ciggXCJyb2xlXCIsIFwibGlzdGJveFwiICk7XHJcblx0XHR0aGlzLl9vbiggdGhpcy5saXN0LCB7XHJcblx0XHRcdFwiZm9jdXNpblwiOiBcIl9oYW5kbGVMaXN0Rm9jdXNcIixcclxuXHRcdFx0XCJmb2N1c291dFwiOiBcIl9oYW5kbGVMaXN0Rm9jdXNcIixcclxuXHRcdFx0XCJrZXlkb3duXCI6IFwiX2hhbmRsZUxpc3RLZXlkb3duXCIsXHJcblx0XHRcdFwiY2xpY2sgbGk6bm90KC51aS1kaXNhYmxlZCwudWktc3RhdGUtZGlzYWJsZWQsLnVpLWxpLWRpdmlkZXIpXCI6IFwiX2hhbmRsZUxpc3RJdGVtQ2xpY2tcIlxyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gYnV0dG9uIHJlZm9jdXMgZW5zdXJlcyBwcm9wZXIgaGVpZ2h0IGNhbGN1bGF0aW9uXHJcblx0XHQvLyBieSByZW1vdmluZyB0aGUgaW5saW5lIHN0eWxlIGFuZCBlbnN1cmluZyBwYWdlIGluY2x1c2lvblxyXG5cdFx0dGhpcy5fb24oIHRoaXMubWVudVBhZ2UsIHsgcGFnZWhpZGU6IFwiX2hhbmRsZU1lbnVQYWdlSGlkZVwiIH0gKTtcclxuXHJcblx0XHQvLyBFdmVudHMgb24gdGhlIHBvcHVwXHJcblx0XHR0aGlzLl9vbiggdGhpcy5saXN0Ym94LCB7IHBvcHVwYWZ0ZXJjbG9zZTogXCJfcG9wdXBDbG9zZWRcIiB9ICk7XHJcblxyXG5cdFx0Ly8gQ2xvc2UgYnV0dG9uIG9uIHNtYWxsIG92ZXJsYXlzXHJcblx0XHRpZiAoIHRoaXMuaXNNdWx0aXBsZSApIHtcclxuXHRcdFx0dGhpcy5fb24oIHRoaXMuaGVhZGVyQ2xvc2UsIHsgY2xpY2s6IFwiX2hhbmRsZUhlYWRlckNsb3NlQ2xpY2tcIiB9ICk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fSxcclxuXHJcblx0X3BvcHVwQ2xvc2VkOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuY2xvc2UoKTtcclxuXHRcdHRoaXMuX2RlbGF5ZWRUcmlnZ2VyKCk7XHJcblx0fSxcclxuXHJcblx0X2RlbGF5ZWRUcmlnZ2VyOiBmdW5jdGlvbigpIHtcclxuXHRcdGlmICggdGhpcy5fdHJpZ2dlckNoYW5nZSApIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50LnRyaWdnZXIoIFwiY2hhbmdlXCIgKTtcclxuXHRcdH1cclxuXHRcdHRoaXMuX3RyaWdnZXJDaGFuZ2UgPSBmYWxzZTtcclxuXHR9LFxyXG5cclxuXHRfaXNSZWJ1aWxkUmVxdWlyZWQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGxpc3QgPSB0aGlzLmxpc3QuZmluZCggXCJsaVwiICksXHJcblx0XHRcdG9wdGlvbnMgPSB0aGlzLl9zZWxlY3RPcHRpb25zKCkubm90KCBcIi51aS1zY3JlZW4taGlkZGVuXCIgKTtcclxuXHJcblx0XHQvLyBUT0RPIGV4Y2VlZGluZ2x5IG5haXZlIG1ldGhvZCB0byBkZXRlcm1pbmUgZGlmZmVyZW5jZVxyXG5cdFx0Ly8gaWdub3JlcyB2YWx1ZSBjaGFuZ2VzIGV0YyBpbiBmYXZvciBvZiBhIGZvcmNlZFJlYnVpbGRcclxuXHRcdC8vIGZyb20gdGhlIHVzZXIgaW4gdGhlIHJlZnJlc2ggbWV0aG9kXHJcblx0XHRyZXR1cm4gb3B0aW9ucy50ZXh0KCkgIT09IGxpc3QudGV4dCgpO1xyXG5cdH0sXHJcblxyXG5cdHNlbGVjdGVkOiBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiB0aGlzLl9zZWxlY3RPcHRpb25zKCkuZmlsdGVyKCBcIjpzZWxlY3RlZDpub3QoIDpqcW1EYXRhKHBsYWNlaG9sZGVyPSd0cnVlJykgKVwiICk7XHJcblx0fSxcclxuXHJcblx0cmVmcmVzaDogZnVuY3Rpb24oIGZvcmNlICkge1xyXG5cdFx0dmFyIHNlbGYsIGluZGljZXM7XHJcblxyXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMubmF0aXZlTWVudSApIHtcclxuXHRcdFx0cmV0dXJuIHRoaXMuX3N1cGVyKCBmb3JjZSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHNlbGYgPSB0aGlzO1xyXG5cdFx0aWYgKCBmb3JjZSB8fCB0aGlzLl9pc1JlYnVpbGRSZXF1aXJlZCgpICkge1xyXG5cdFx0XHRzZWxmLl9idWlsZExpc3QoKTtcclxuXHRcdH1cclxuXHJcblx0XHRpbmRpY2VzID0gdGhpcy5zZWxlY3RlZEluZGljZXMoKTtcclxuXHJcblx0XHRzZWxmLnNldEJ1dHRvblRleHQoKTtcclxuXHRcdHNlbGYuc2V0QnV0dG9uQ291bnQoKTtcclxuXHJcblx0XHRzZWxmLmxpc3QuZmluZCggXCJsaTpub3QoLnVpLWxpLWRpdmlkZXIpXCIgKVxyXG5cdFx0XHQuZmluZCggXCJhXCIgKS5yZW1vdmVDbGFzcyggJC5tb2JpbGUuYWN0aXZlQnRuQ2xhc3MgKS5lbmQoKVxyXG5cdFx0XHQuYXR0ciggXCJhcmlhLXNlbGVjdGVkXCIsIGZhbHNlIClcclxuXHRcdFx0LmVhY2goZnVuY3Rpb24oIGkgKSB7XHJcblx0XHRcdFx0dmFyIGl0ZW0gPSAkKCB0aGlzICk7XHJcblx0XHRcdFx0aWYgKCAkLmluQXJyYXkoIGksIGluZGljZXMgKSA+IC0xICkge1xyXG5cclxuXHRcdFx0XHRcdC8vIEFyaWEgc2VsZWN0ZWQgYXR0clxyXG5cdFx0XHRcdFx0aXRlbS5hdHRyKCBcImFyaWEtc2VsZWN0ZWRcIiwgdHJ1ZSApO1xyXG5cclxuXHRcdFx0XHRcdC8vIE11bHRpcGxlIHNlbGVjdHM6IGFkZCB0aGUgXCJvblwiIGNoZWNrYm94IHN0YXRlIHRvIHRoZSBpY29uXHJcblx0XHRcdFx0XHRpZiAoIHNlbGYuaXNNdWx0aXBsZSApIHtcclxuXHRcdFx0XHRcdFx0aXRlbS5maW5kKCBcImFcIiApLnJlbW92ZUNsYXNzKCBcInVpLWNoZWNrYm94LW9mZlwiICkuYWRkQ2xhc3MoIFwidWktY2hlY2tib3gtb25cIiApO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0aWYgKCBpdGVtLmhhc0NsYXNzKCBcInVpLXNjcmVlbi1oaWRkZW5cIiApICkge1xyXG5cdFx0XHRcdFx0XHRcdGl0ZW0ubmV4dCgpLmZpbmQoIFwiYVwiICkuYWRkQ2xhc3MoICQubW9iaWxlLmFjdGl2ZUJ0bkNsYXNzICk7XHJcblx0XHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdFx0aXRlbS5maW5kKCBcImFcIiApLmFkZENsYXNzKCAkLm1vYmlsZS5hY3RpdmVCdG5DbGFzcyApO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSBlbHNlIGlmICggc2VsZi5pc011bHRpcGxlICkge1xyXG5cdFx0XHRcdFx0aXRlbS5maW5kKCBcImFcIiApLnJlbW92ZUNsYXNzKCBcInVpLWNoZWNrYm94LW9uXCIgKS5hZGRDbGFzcyggXCJ1aS1jaGVja2JveC1vZmZcIiApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0fSxcclxuXHJcblx0Y2xvc2U6IGZ1bmN0aW9uKCkge1xyXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMuZGlzYWJsZWQgfHwgIXRoaXMuaXNPcGVuICkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuXHRcdGlmICggc2VsZi5tZW51VHlwZSA9PT0gXCJwYWdlXCIgKSB7XHJcblx0XHRcdHNlbGYubWVudVBhZ2UuZGlhbG9nKCBcImNsb3NlXCIgKTtcclxuXHRcdFx0c2VsZi5saXN0LmFwcGVuZFRvKCBzZWxmLmxpc3Rib3ggKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHNlbGYubGlzdGJveC5wb3B1cCggXCJjbG9zZVwiICk7XHJcblx0XHR9XHJcblxyXG5cdFx0c2VsZi5fZm9jdXNCdXR0b24oKTtcclxuXHRcdC8vIGFsbG93IHRoZSBkaWFsb2cgdG8gYmUgY2xvc2VkIGFnYWluXHJcblx0XHRzZWxmLmlzT3BlbiA9IGZhbHNlO1xyXG5cdH0sXHJcblxyXG5cdG9wZW46IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5idXR0b24uY2xpY2soKTtcclxuXHR9LFxyXG5cclxuXHRfZm9jdXNNZW51SXRlbTogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgc2VsZWN0b3IgPSB0aGlzLmxpc3QuZmluZCggXCJhLlwiICsgJC5tb2JpbGUuYWN0aXZlQnRuQ2xhc3MgKTtcclxuXHRcdGlmICggc2VsZWN0b3IubGVuZ3RoID09PSAwICkge1xyXG5cdFx0XHRzZWxlY3RvciA9IHRoaXMubGlzdC5maW5kKCBcImxpOm5vdChcIiArIHVuZm9jdXNhYmxlSXRlbVNlbGVjdG9yICsgXCIpIGEudWktYnRuXCIgKTtcclxuXHRcdH1cclxuXHRcdHNlbGVjdG9yLmZpcnN0KCkuZm9jdXMoKTtcclxuXHR9LFxyXG5cclxuXHRfZGVjaWRlRm9ybWF0OiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBzZWxmID0gdGhpcyxcclxuXHRcdFx0JHdpbmRvdyA9IHRoaXMud2luZG93LFxyXG5cdFx0XHRzZWxmTGlzdFBhcmVudCA9IHNlbGYubGlzdC5wYXJlbnQoKSxcclxuXHRcdFx0bWVudUhlaWdodCA9IHNlbGZMaXN0UGFyZW50Lm91dGVySGVpZ2h0KCksXHJcblx0XHRcdHNjcm9sbFRvcCA9ICR3aW5kb3cuc2Nyb2xsVG9wKCksXHJcblx0XHRcdGJ0bk9mZnNldCA9IHNlbGYuYnV0dG9uLm9mZnNldCgpLnRvcCxcclxuXHRcdFx0c2NyZWVuSGVpZ2h0ID0gJHdpbmRvdy5oZWlnaHQoKTtcclxuXHJcblx0XHRpZiAoIG1lbnVIZWlnaHQgPiBzY3JlZW5IZWlnaHQgLSA4MCB8fCAhJC5zdXBwb3J0LnNjcm9sbFRvcCApIHtcclxuXHJcblx0XHRcdHNlbGYubWVudVBhZ2UuYXBwZW5kVG8oICQubW9iaWxlLnBhZ2VDb250YWluZXIgKS5wYWdlKCk7XHJcblx0XHRcdHNlbGYubWVudVBhZ2VDb250ZW50ID0gc2VsZi5tZW51UGFnZS5maW5kKCBcIi51aS1jb250ZW50XCIgKTtcclxuXHRcdFx0c2VsZi5tZW51UGFnZUNsb3NlID0gc2VsZi5tZW51UGFnZS5maW5kKCBcIi51aS1oZWFkZXIgYVwiICk7XHJcblxyXG5cdFx0XHQvLyBwcmV2ZW50IHRoZSBwYXJlbnQgcGFnZSBmcm9tIGJlaW5nIHJlbW92ZWQgZnJvbSB0aGUgRE9NLFxyXG5cdFx0XHQvLyBvdGhlcndpc2UgdGhlIHJlc3VsdHMgb2Ygc2VsZWN0aW5nIGEgbGlzdCBpdGVtIGluIHRoZSBkaWFsb2dcclxuXHRcdFx0Ly8gZmFsbCBpbnRvIGEgYmxhY2sgaG9sZVxyXG5cdFx0XHRzZWxmLnRoaXNQYWdlLnVuYmluZCggXCJwYWdlaGlkZS5yZW1vdmVcIiApO1xyXG5cclxuXHRcdFx0Ly9mb3IgV2ViT1MvT3BlcmEgTWluaSAoc2V0IGxhc3RzY3JvbGwgdXNpbmcgYnV0dG9uIG9mZnNldClcclxuXHRcdFx0aWYgKCBzY3JvbGxUb3AgPT09IDAgJiYgYnRuT2Zmc2V0ID4gc2NyZWVuSGVpZ2h0ICkge1xyXG5cdFx0XHRcdHNlbGYudGhpc1BhZ2Uub25lKCBcInBhZ2VoaWRlXCIsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0JCggdGhpcyApLmpxbURhdGEoIFwibGFzdFNjcm9sbFwiLCBidG5PZmZzZXQgKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0c2VsZi5tZW51UGFnZS5vbmUoIHtcclxuXHRcdFx0XHRwYWdlc2hvdzogJC5wcm94eSggdGhpcywgXCJfZm9jdXNNZW51SXRlbVwiICksXHJcblx0XHRcdFx0cGFnZWhpZGU6ICQucHJveHkoIHRoaXMsIFwiY2xvc2VcIiApXHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0c2VsZi5tZW51VHlwZSA9IFwicGFnZVwiO1xyXG5cdFx0XHRzZWxmLm1lbnVQYWdlQ29udGVudC5hcHBlbmQoIHNlbGYubGlzdCApO1xyXG5cdFx0XHRzZWxmLm1lbnVQYWdlXHJcblx0XHRcdFx0LmZpbmQoIFwiZGl2IC51aS10aXRsZVwiIClcclxuXHRcdFx0XHRcdC50ZXh0KCBzZWxmLmxhYmVsLmdldEVuY29kZWRUZXh0KCkgfHwgc2VsZi5wbGFjZWhvbGRlciApO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0c2VsZi5tZW51VHlwZSA9IFwib3ZlcmxheVwiO1xyXG5cclxuXHRcdFx0c2VsZi5saXN0Ym94Lm9uZSggeyBwb3B1cGFmdGVyb3BlbjogJC5wcm94eSggdGhpcywgXCJfZm9jdXNNZW51SXRlbVwiICkgfSApO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9idWlsZExpc3Q6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHNlbGYgPSB0aGlzLFxyXG5cdFx0XHRvID0gdGhpcy5vcHRpb25zLFxyXG5cdFx0XHRwbGFjZWhvbGRlciA9IHRoaXMucGxhY2Vob2xkZXIsXHJcblx0XHRcdG5lZWRQbGFjZWhvbGRlciA9IHRydWUsXHJcblx0XHRcdGRhdGFJY29uID0gXCJmYWxzZVwiLFxyXG5cdFx0XHQkb3B0aW9ucywgbnVtT3B0aW9ucywgc2VsZWN0LFxyXG5cdFx0XHRkYXRhUHJlZml4ID0gXCJkYXRhLVwiICsgJC5tb2JpbGUubnMsXHJcblx0XHRcdGRhdGFJbmRleEF0dHIgPSBkYXRhUHJlZml4ICsgXCJvcHRpb24taW5kZXhcIixcclxuXHRcdFx0ZGF0YUljb25BdHRyID0gZGF0YVByZWZpeCArIFwiaWNvblwiLFxyXG5cdFx0XHRkYXRhUm9sZUF0dHIgPSBkYXRhUHJlZml4ICsgXCJyb2xlXCIsXHJcblx0XHRcdGRhdGFQbGFjZWhvbGRlckF0dHIgPSBkYXRhUHJlZml4ICsgXCJwbGFjZWhvbGRlclwiLFxyXG5cdFx0XHRmcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxcclxuXHRcdFx0aXNQbGFjZWhvbGRlckl0ZW0gPSBmYWxzZSxcclxuXHRcdFx0b3B0R3JvdXAsXHJcblx0XHRcdGksXHJcblx0XHRcdG9wdGlvbiwgJG9wdGlvbiwgcGFyZW50LCB0ZXh0LCBhbmNob3IsIGNsYXNzZXMsXHJcblx0XHRcdG9wdExhYmVsLCBkaXZpZGVyLCBpdGVtO1xyXG5cclxuXHRcdHNlbGYubGlzdC5lbXB0eSgpLmZpbHRlciggXCIudWktbGlzdHZpZXdcIiApLmxpc3R2aWV3KCBcImRlc3Ryb3lcIiApO1xyXG5cdFx0JG9wdGlvbnMgPSB0aGlzLl9zZWxlY3RPcHRpb25zKCk7XHJcblx0XHRudW1PcHRpb25zID0gJG9wdGlvbnMubGVuZ3RoO1xyXG5cdFx0c2VsZWN0ID0gdGhpcy5zZWxlY3RbIDAgXTtcclxuXHJcblx0XHRmb3IgKCBpID0gMDsgaSA8IG51bU9wdGlvbnM7aSsrLCBpc1BsYWNlaG9sZGVySXRlbSA9IGZhbHNlKSB7XHJcblx0XHRcdG9wdGlvbiA9ICRvcHRpb25zW2ldO1xyXG5cdFx0XHQkb3B0aW9uID0gJCggb3B0aW9uICk7XHJcblxyXG5cdFx0XHQvLyBEbyBub3QgY3JlYXRlIG9wdGlvbnMgYmFzZWQgb24gdWktc2NyZWVuLWhpZGRlbiBzZWxlY3Qgb3B0aW9uc1xyXG5cdFx0XHRpZiAoICRvcHRpb24uaGFzQ2xhc3MoIFwidWktc2NyZWVuLWhpZGRlblwiICkgKSB7XHJcblx0XHRcdFx0Y29udGludWU7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHBhcmVudCA9IG9wdGlvbi5wYXJlbnROb2RlO1xyXG5cdFx0XHRjbGFzc2VzID0gW107XHJcblxyXG5cdFx0XHQvLyBBbHRob3VnaCB1c2luZyAudGV4dCgpIGhlcmUgcmFpc2VzIHRoZSByaXNrIHRoYXQsIHdoZW4gd2UgbGF0ZXIgcGFzdGUgdGhpcyBpbnRvIHRoZVxyXG5cdFx0XHQvLyBsaXN0IGl0ZW0gd2UgZW5kIHVwIHBhc3RpbmcgcG9zc2libHkgbWFsaWNpb3VzIHRoaW5ncyBsaWtlIDxzY3JpcHQ+IHRhZ3MsIHRoYXQgcmlza1xyXG5cdFx0XHQvLyBvbmx5IGFyaXNlcyBpZiB3ZSBkbyBzb21ldGhpbmcgbGlrZSAkKCBcIjxsaT48YSBocmVmPScjJz5cIiArIHRleHQgKyBcIjwvYT48L2xpPlwiICkuIFdlXHJcblx0XHRcdC8vIGRvbid0IGRvIHRoYXQuIFdlIGRvIGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCB0ZXh0ICkgaW5zdGVhZCwgd2hpY2ggZ3VhcmFudGVlcyB0aGF0XHJcblx0XHRcdC8vIHdoYXRldmVyIHdlIHBhc3RlIGluIHdpbGwgZW5kIHVwIGFzIHRleHQsIHdpdGggY2hhcmFjdGVycyBsaWtlIDwsID4gYW5kICYgZXNjYXBlZC5cclxuXHRcdFx0dGV4dCA9ICRvcHRpb24udGV4dCgpO1xyXG5cdFx0XHRhbmNob3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImFcIiApO1xyXG5cdFx0XHRhbmNob3Iuc2V0QXR0cmlidXRlKCBcImhyZWZcIiwgXCIjXCIgKTtcclxuXHRcdFx0YW5jaG9yLmFwcGVuZENoaWxkKCBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSggdGV4dCApICk7XHJcblxyXG5cdFx0XHQvLyBBcmUgd2UgaW5zaWRlIGFuIG9wdGdyb3VwP1xyXG5cdFx0XHRpZiAoIHBhcmVudCAhPT0gc2VsZWN0ICYmIHBhcmVudC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSBcIm9wdGdyb3VwXCIgKSB7XHJcblx0XHRcdFx0b3B0TGFiZWwgPSBwYXJlbnQuZ2V0QXR0cmlidXRlKCBcImxhYmVsXCIgKTtcclxuXHRcdFx0XHRpZiAoIG9wdExhYmVsICE9PSBvcHRHcm91cCApIHtcclxuXHRcdFx0XHRcdGRpdmlkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImxpXCIgKTtcclxuXHRcdFx0XHRcdGRpdmlkZXIuc2V0QXR0cmlidXRlKCBkYXRhUm9sZUF0dHIsIFwibGlzdC1kaXZpZGVyXCIgKTtcclxuXHRcdFx0XHRcdGRpdmlkZXIuc2V0QXR0cmlidXRlKCBcInJvbGVcIiwgXCJvcHRpb25cIiApO1xyXG5cdFx0XHRcdFx0ZGl2aWRlci5zZXRBdHRyaWJ1dGUoIFwidGFiaW5kZXhcIiwgXCItMVwiICk7XHJcblx0XHRcdFx0XHRkaXZpZGVyLmFwcGVuZENoaWxkKCBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSggb3B0TGFiZWwgKSApO1xyXG5cdFx0XHRcdFx0ZnJhZ21lbnQuYXBwZW5kQ2hpbGQoIGRpdmlkZXIgKTtcclxuXHRcdFx0XHRcdG9wdEdyb3VwID0gb3B0TGFiZWw7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoIG5lZWRQbGFjZWhvbGRlciAmJiAoICFvcHRpb24uZ2V0QXR0cmlidXRlKCBcInZhbHVlXCIgKSB8fCB0ZXh0Lmxlbmd0aCA9PT0gMCB8fCAkb3B0aW9uLmpxbURhdGEoIFwicGxhY2Vob2xkZXJcIiApICkgKSB7XHJcblx0XHRcdFx0bmVlZFBsYWNlaG9sZGVyID0gZmFsc2U7XHJcblx0XHRcdFx0aXNQbGFjZWhvbGRlckl0ZW0gPSB0cnVlO1xyXG5cclxuXHRcdFx0XHQvLyBJZiB3ZSBoYXZlIGlkZW50aWZpZWQgYSBwbGFjZWhvbGRlciwgcmVjb3JkIHRoZSBmYWN0IHRoYXQgaXQgd2FzXHJcblx0XHRcdFx0Ly8gdXMgd2hvIGhhdmUgYWRkZWQgdGhlIHBsYWNlaG9sZGVyIHRvIHRoZSBvcHRpb24gYW5kIG1hcmsgaXRcclxuXHRcdFx0XHQvLyByZXRyb2FjdGl2ZWx5IGluIHRoZSBzZWxlY3QgYXMgd2VsbFxyXG5cdFx0XHRcdGlmICggbnVsbCA9PT0gb3B0aW9uLmdldEF0dHJpYnV0ZSggZGF0YVBsYWNlaG9sZGVyQXR0ciApICkge1xyXG5cdFx0XHRcdFx0dGhpcy5fcmVtb3ZlUGxhY2Vob2xkZXJBdHRyID0gdHJ1ZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0b3B0aW9uLnNldEF0dHJpYnV0ZSggZGF0YVBsYWNlaG9sZGVyQXR0ciwgdHJ1ZSApO1xyXG5cdFx0XHRcdGlmICggby5oaWRlUGxhY2Vob2xkZXJNZW51SXRlbXMgKSB7XHJcblx0XHRcdFx0XHRjbGFzc2VzLnB1c2goIFwidWktc2NyZWVuLWhpZGRlblwiICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmICggcGxhY2Vob2xkZXIgIT09IHRleHQgKSB7XHJcblx0XHRcdFx0XHRwbGFjZWhvbGRlciA9IHNlbGYucGxhY2Vob2xkZXIgPSB0ZXh0O1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwibGlcIiApO1xyXG5cdFx0XHRpZiAoIG9wdGlvbi5kaXNhYmxlZCApIHtcclxuXHRcdFx0XHRjbGFzc2VzLnB1c2goIFwidWktc3RhdGUtZGlzYWJsZWRcIiApO1xyXG5cdFx0XHRcdGl0ZW0uc2V0QXR0cmlidXRlKCBcImFyaWEtZGlzYWJsZWRcIiwgdHJ1ZSApO1xyXG5cdFx0XHR9XHJcblx0XHRcdGl0ZW0uc2V0QXR0cmlidXRlKCBkYXRhSW5kZXhBdHRyLCBpICk7XHJcblx0XHRcdGl0ZW0uc2V0QXR0cmlidXRlKCBkYXRhSWNvbkF0dHIsIGRhdGFJY29uICk7XHJcblx0XHRcdGlmICggaXNQbGFjZWhvbGRlckl0ZW0gKSB7XHJcblx0XHRcdFx0aXRlbS5zZXRBdHRyaWJ1dGUoIGRhdGFQbGFjZWhvbGRlckF0dHIsIHRydWUgKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpdGVtLmNsYXNzTmFtZSA9IGNsYXNzZXMuam9pbiggXCIgXCIgKTtcclxuXHRcdFx0aXRlbS5zZXRBdHRyaWJ1dGUoIFwicm9sZVwiLCBcIm9wdGlvblwiICk7XHJcblx0XHRcdGFuY2hvci5zZXRBdHRyaWJ1dGUoIFwidGFiaW5kZXhcIiwgXCItMVwiICk7XHJcblx0XHRcdGlmICggdGhpcy5pc011bHRpcGxlICkge1xyXG5cdFx0XHRcdCQoIGFuY2hvciApLmFkZENsYXNzKCBcInVpLWJ0biB1aS1jaGVja2JveC1vZmYgdWktYnRuLWljb24tcmlnaHRcIiApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpdGVtLmFwcGVuZENoaWxkKCBhbmNob3IgKTtcclxuXHRcdFx0ZnJhZ21lbnQuYXBwZW5kQ2hpbGQoIGl0ZW0gKTtcclxuXHRcdH1cclxuXHJcblx0XHRzZWxmLmxpc3RbMF0uYXBwZW5kQ2hpbGQoIGZyYWdtZW50ICk7XHJcblxyXG5cdFx0Ly8gSGlkZSBoZWFkZXIgaWYgaXQncyBub3QgYSBtdWx0aXNlbGVjdCBhbmQgdGhlcmUncyBubyBwbGFjZWhvbGRlclxyXG5cdFx0aWYgKCAhdGhpcy5pc011bHRpcGxlICYmICFwbGFjZWhvbGRlci5sZW5ndGggKSB7XHJcblx0XHRcdHRoaXMuaGVhZGVyLmFkZENsYXNzKCBcInVpLXNjcmVlbi1oaWRkZW5cIiApO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhpcy5oZWFkZXJUaXRsZS50ZXh0KCB0aGlzLnBsYWNlaG9sZGVyICk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gTm93IHBvcHVsYXRlZCwgY3JlYXRlIGxpc3R2aWV3XHJcblx0XHRzZWxmLmxpc3QubGlzdHZpZXcoKTtcclxuXHR9LFxyXG5cclxuXHRfYnV0dG9uOiBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiB0aGlzLm9wdGlvbnMubmF0aXZlTWVudSA/XHJcblx0XHRcdHRoaXMuX3N1cGVyKCkgOlxyXG5cdFx0XHQkKCBcIjxhPlwiLCB7XHJcblx0XHRcdFx0XCJocmVmXCI6IFwiI1wiLFxyXG5cdFx0XHRcdFwicm9sZVwiOiBcImJ1dHRvblwiLFxyXG5cdFx0XHRcdC8vIFRPRE8gdmFsdWUgaXMgdW5kZWZpbmVkIGF0IGNyZWF0aW9uXHJcblx0XHRcdFx0XCJpZFwiOiB0aGlzLmJ1dHRvbklkLFxyXG5cdFx0XHRcdFwiYXJpYS1oYXNwb3B1cFwiOiBcInRydWVcIixcclxuXHJcblx0XHRcdFx0Ly8gVE9ETyB2YWx1ZSBpcyB1bmRlZmluZWQgYXQgY3JlYXRpb25cclxuXHRcdFx0XHRcImFyaWEtb3duc1wiOiB0aGlzLm1lbnVJZFxyXG5cdFx0XHR9KTtcclxuXHR9LFxyXG5cclxuXHRfZGVzdHJveTogZnVuY3Rpb24oKSB7XHJcblxyXG5cdFx0aWYgKCAhdGhpcy5vcHRpb25zLm5hdGl2ZU1lbnUgKSB7XHJcblx0XHRcdHRoaXMuY2xvc2UoKTtcclxuXHJcblx0XHRcdC8vIFJlc3RvcmUgdGhlIHRhYmluZGV4IGF0dHJpYnV0ZSB0byBpdHMgb3JpZ2luYWwgdmFsdWVcclxuXHRcdFx0aWYgKCB0aGlzLl9vcmlnVGFiSW5kZXggIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0XHRpZiAoIHRoaXMuX29yaWdUYWJJbmRleCAhPT0gZmFsc2UgKSB7XHJcblx0XHRcdFx0XHR0aGlzLnNlbGVjdC5hdHRyKCBcInRhYmluZGV4XCIsIHRoaXMuX29yaWdUYWJJbmRleCApO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHR0aGlzLnNlbGVjdC5yZW1vdmVBdHRyKCBcInRhYmluZGV4XCIgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIFJlbW92ZSB0aGUgcGxhY2Vob2xkZXIgYXR0cmlidXRlIGlmIHdlIHdlcmUgdGhlIG9uZXMgdG8gYWRkIGl0XHJcblx0XHRcdGlmICggdGhpcy5fcmVtb3ZlUGxhY2Vob2xkZXJBdHRyICkge1xyXG5cdFx0XHRcdHRoaXMuX3NlbGVjdE9wdGlvbnMoKS5yZW1vdmVBdHRyKCBcImRhdGEtXCIgKyAkLm1vYmlsZS5ucyArIFwicGxhY2Vob2xkZXJcIiApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBSZW1vdmUgdGhlIHBvcHVwXHJcblx0XHRcdHRoaXMubGlzdGJveC5yZW1vdmUoKTtcclxuXHJcblx0XHRcdC8vIFJlbW92ZSB0aGUgZGlhbG9nXHJcblx0XHRcdHRoaXMubWVudVBhZ2UucmVtb3ZlKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gQ2hhaW4gdXBcclxuXHRcdHRoaXMuX3N1cGVyKCk7XHJcblx0fVxyXG59KTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcblxyXG4vLyBidXR0b25NYXJrdXAgaXMgZGVwcmVjYXRlZCBhcyBvZiAxLjQuMCBhbmQgd2lsbCBiZSByZW1vdmVkIGluIDEuNS4wLlxyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG4vLyBHZW5lcmFsIHBvbGljeTogRG8gbm90IGFjY2VzcyBkYXRhLSogYXR0cmlidXRlcyBleGNlcHQgZHVyaW5nIGVuaGFuY2VtZW50LlxyXG4vLyBJbiBhbGwgb3RoZXIgY2FzZXMgd2UgZGV0ZXJtaW5lIHRoZSBzdGF0ZSBvZiB0aGUgYnV0dG9uIGV4Y2x1c2l2ZWx5IGZyb20gaXRzXHJcbi8vIGNsYXNzTmFtZS4gVGhhdCdzIHdoeSBvcHRpb25zVG9DbGFzc2VzIGV4cGVjdHMgYSBmdWxsIGNvbXBsZW1lbnQgb2Ygb3B0aW9ucyxcclxuLy8gYW5kIHRoZSBqUXVlcnkgcGx1Z2luIGNvbXBsZXRlcyB0aGUgc2V0IG9mIG9wdGlvbnMgZnJvbSB0aGUgZGVmYXVsdCB2YWx1ZXMuXHJcblxyXG4vLyBNYXAgY2xhc3NlcyB0byBidXR0b25NYXJrdXAgYm9vbGVhbiBvcHRpb25zIC0gdXNlZCBpbiBjbGFzc05hbWVUb09wdGlvbnMoKVxyXG52YXIgcmV2ZXJzZUJvb2xPcHRpb25NYXAgPSB7XHJcblx0XHRcInVpLXNoYWRvd1wiIDogXCJzaGFkb3dcIixcclxuXHRcdFwidWktY29ybmVyLWFsbFwiIDogXCJjb3JuZXJzXCIsXHJcblx0XHRcInVpLWJ0bi1pbmxpbmVcIiA6IFwiaW5saW5lXCIsXHJcblx0XHRcInVpLXNoYWRvdy1pY29uXCIgOiBcImljb25zaGFkb3dcIiwgLyogVE9ETzogUmVtb3ZlIGluIDEuNSAqL1xyXG5cdFx0XCJ1aS1taW5pXCIgOiBcIm1pbmlcIlxyXG5cdH0sXHJcblx0Z2V0QXR0ckZpeGVkID0gZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgcmV0ID0gJC5tb2JpbGUuZ2V0QXR0cmlidXRlLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcclxuXHJcblx0XHRyZXR1cm4gKCByZXQgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IHJldCApO1xyXG5cdH0sXHJcblx0Y2FwaXRhbExldHRlcnNSRSA9IC9bQS1aXS9nO1xyXG5cclxuLy8gb3B0aW9uc1RvQ2xhc3NlczpcclxuLy8gQG9wdGlvbnM6IEEgY29tcGxldGUgc2V0IG9mIG9wdGlvbnMgdG8gY29udmVydCB0byBjbGFzcyBuYW1lcy5cclxuLy8gQGV4aXN0aW5nQ2xhc3NlczogZXh0cmEgY2xhc3NlcyB0byBhZGQgdG8gdGhlIHJlc3VsdFxyXG4vL1xyXG4vLyBDb252ZXJ0cyBAb3B0aW9ucyB0byBidXR0b25NYXJrdXAgY2xhc3NlcyBhbmQgcmV0dXJucyB0aGUgcmVzdWx0IGFzIGFuIGFycmF5XHJcbi8vIHRoYXQgY2FuIGJlIGNvbnZlcnRlZCB0byBhbiBlbGVtZW50J3MgY2xhc3NOYW1lIHdpdGggLmpvaW4oIFwiIFwiICkuIEFsbFxyXG4vLyBwb3NzaWJsZSBvcHRpb25zIG11c3QgYmUgc2V0IGluc2lkZSBAb3B0aW9ucy4gVXNlICQuZm4uYnV0dG9uTWFya3VwLmRlZmF1bHRzXHJcbi8vIHRvIGdldCBhIGNvbXBsZXRlIHNldCBhbmQgdXNlICQuZXh0ZW5kIHRvIG92ZXJyaWRlIHlvdXIgY2hvaWNlIG9mIG9wdGlvbnNcclxuLy8gZnJvbSB0aGF0IHNldC5cclxuZnVuY3Rpb24gb3B0aW9uc1RvQ2xhc3Nlcyggb3B0aW9ucywgZXhpc3RpbmdDbGFzc2VzICkge1xyXG5cdHZhciBjbGFzc2VzID0gZXhpc3RpbmdDbGFzc2VzID8gZXhpc3RpbmdDbGFzc2VzIDogW107XHJcblxyXG5cdC8vIEFkZCBjbGFzc2VzIHRvIHRoZSBhcnJheSAtIGZpcnN0IHVpLWJ0blxyXG5cdGNsYXNzZXMucHVzaCggXCJ1aS1idG5cIiApO1xyXG5cclxuXHQvLyBJZiB0aGVyZSBpcyBhIHRoZW1lXHJcblx0aWYgKCBvcHRpb25zLnRoZW1lICkge1xyXG5cdFx0Y2xhc3Nlcy5wdXNoKCBcInVpLWJ0bi1cIiArIG9wdGlvbnMudGhlbWUgKTtcclxuXHR9XHJcblxyXG5cdC8vIElmIHRoZXJlJ3MgYW4gaWNvbiwgYWRkIHRoZSBpY29uLXJlbGF0ZWQgY2xhc3Nlc1xyXG5cdGlmICggb3B0aW9ucy5pY29uICkge1xyXG5cdFx0Y2xhc3NlcyA9IGNsYXNzZXMuY29uY2F0KFtcclxuXHRcdFx0XCJ1aS1pY29uLVwiICsgb3B0aW9ucy5pY29uLFxyXG5cdFx0XHRcInVpLWJ0bi1pY29uLVwiICsgb3B0aW9ucy5pY29ucG9zXHJcblx0XHRdKTtcclxuXHRcdGlmICggb3B0aW9ucy5pY29uc2hhZG93ICkge1xyXG5cdFx0XHRjbGFzc2VzLnB1c2goIFwidWktc2hhZG93LWljb25cIiApOyAvKiBUT0RPOiBSZW1vdmUgaW4gMS41ICovXHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvLyBBZGQgdGhlIGFwcHJvcHJpYXRlIGNsYXNzIGZvciBlYWNoIGJvb2xlYW4gb3B0aW9uXHJcblx0aWYgKCBvcHRpb25zLmlubGluZSApIHtcclxuXHRcdGNsYXNzZXMucHVzaCggXCJ1aS1idG4taW5saW5lXCIgKTtcclxuXHR9XHJcblx0aWYgKCBvcHRpb25zLnNoYWRvdyApIHtcclxuXHRcdGNsYXNzZXMucHVzaCggXCJ1aS1zaGFkb3dcIiApO1xyXG5cdH1cclxuXHRpZiAoIG9wdGlvbnMuY29ybmVycyApIHtcclxuXHRcdGNsYXNzZXMucHVzaCggXCJ1aS1jb3JuZXItYWxsXCIgKTtcclxuXHR9XHJcblx0aWYgKCBvcHRpb25zLm1pbmkgKSB7XHJcblx0XHRjbGFzc2VzLnB1c2goIFwidWktbWluaVwiICk7XHJcblx0fVxyXG5cclxuXHQvLyBDcmVhdGUgYSBzdHJpbmcgZnJvbSB0aGUgYXJyYXkgYW5kIHJldHVybiBpdFxyXG5cdHJldHVybiBjbGFzc2VzO1xyXG59XHJcblxyXG4vLyBjbGFzc05hbWVUb09wdGlvbnM6XHJcbi8vIEBjbGFzc2VzOiBBIHN0cmluZyBjb250YWluaW5nIGEgLmNsYXNzTmFtZS1zdHlsZSBzcGFjZS1zZXBhcmF0ZWQgY2xhc3MgbGlzdFxyXG4vL1xyXG4vLyBMb29wcyBvdmVyIEBjbGFzc2VzIGFuZCBjYWxjdWxhdGVzIGFuIG9wdGlvbnMgb2JqZWN0IGJhc2VkIG9uIHRoZVxyXG4vLyBidXR0b25NYXJrdXAtcmVsYXRlZCBjbGFzc2VzIGl0IGZpbmRzLiBJdCByZWNvcmRzIHVucmVjb2duaXplZCBjbGFzc2VzIGluIGFuXHJcbi8vIGFycmF5LlxyXG4vL1xyXG4vLyBSZXR1cm5zOiBBbiBvYmplY3QgY29udGFpbmluZyB0aGUgZm9sbG93aW5nIGl0ZW1zOlxyXG4vL1xyXG4vLyBcIm9wdGlvbnNcIjogYnV0dG9uTWFya3VwIG9wdGlvbnMgZm91bmQgdG8gYmUgcHJlc2VudCBiZWNhdXNlIG9mIHRoZVxyXG4vLyBwcmVzZW5jZS9hYnNlbmNlIG9mIGNvcnJlc3BvbmRpbmcgY2xhc3Nlc1xyXG4vL1xyXG4vLyBcInVua25vd25DbGFzc2VzXCI6IGEgc3RyaW5nIGNvbnRhaW5pbmcgYWxsIHRoZSBub24tYnV0dG9uTWFya3VwLXJlbGF0ZWRcclxuLy8gY2xhc3NlcyBmb3VuZCBpbiBAY2xhc3Nlc1xyXG4vL1xyXG4vLyBcImFscmVhZHlFbmhhbmNlZFwiOiBBIGJvb2xlYW4gaW5kaWNhdGluZyB3aGV0aGVyIHRoZSB1aS1idG4gY2xhc3Mgd2FzIGFtb25nXHJcbi8vIHRob3NlIGZvdW5kIHRvIGJlIHByZXNlbnRcclxuZnVuY3Rpb24gY2xhc3NOYW1lVG9PcHRpb25zKCBjbGFzc2VzICkge1xyXG5cdHZhciBpZHgsIG1hcCwgdW5rbm93bkNsYXNzLFxyXG5cdFx0YWxyZWFkeUVuaGFuY2VkID0gZmFsc2UsXHJcblx0XHRub0ljb24gPSB0cnVlLFxyXG5cdFx0byA9IHtcclxuXHRcdFx0aWNvbjogXCJcIixcclxuXHRcdFx0aW5saW5lOiBmYWxzZSxcclxuXHRcdFx0c2hhZG93OiBmYWxzZSxcclxuXHRcdFx0Y29ybmVyczogZmFsc2UsXHJcblx0XHRcdGljb25zaGFkb3c6IGZhbHNlLFxyXG5cdFx0XHRtaW5pOiBmYWxzZVxyXG5cdFx0fSxcclxuXHRcdHVua25vd25DbGFzc2VzID0gW107XHJcblxyXG5cdGNsYXNzZXMgPSBjbGFzc2VzLnNwbGl0KCBcIiBcIiApO1xyXG5cclxuXHQvLyBMb29wIG92ZXIgdGhlIGNsYXNzZXNcclxuXHRmb3IgKCBpZHggPSAwIDsgaWR4IDwgY2xhc3Nlcy5sZW5ndGggOyBpZHgrKyApIHtcclxuXHJcblx0XHQvLyBBc3N1bWUgaXQncyBhbiB1bnJlY29nbml6ZWQgY2xhc3NcclxuXHRcdHVua25vd25DbGFzcyA9IHRydWU7XHJcblxyXG5cdFx0Ly8gUmVjb2duaXplIGJvb2xlYW4gb3B0aW9ucyBmcm9tIHRoZSBwcmVzZW5jZSBvZiBjbGFzc2VzXHJcblx0XHRtYXAgPSByZXZlcnNlQm9vbE9wdGlvbk1hcFsgY2xhc3Nlc1sgaWR4IF0gXTtcclxuXHRcdGlmICggbWFwICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdHVua25vd25DbGFzcyA9IGZhbHNlO1xyXG5cdFx0XHRvWyBtYXAgXSA9IHRydWU7XHJcblxyXG5cdFx0Ly8gUmVjb2duaXplIHRoZSBwcmVzZW5jZSBvZiBhbiBpY29uIGFuZCBlc3RhYmxpc2ggdGhlIGljb24gcG9zaXRpb25cclxuXHRcdH0gZWxzZSBpZiAoIGNsYXNzZXNbIGlkeCBdLmluZGV4T2YoIFwidWktYnRuLWljb24tXCIgKSA9PT0gMCApIHtcclxuXHRcdFx0dW5rbm93bkNsYXNzID0gZmFsc2U7XHJcblx0XHRcdG5vSWNvbiA9IGZhbHNlO1xyXG5cdFx0XHRvLmljb25wb3MgPSBjbGFzc2VzWyBpZHggXS5zdWJzdHJpbmcoIDEyICk7XHJcblxyXG5cdFx0Ly8gRXN0YWJsaXNoIHdoaWNoIGljb24gaXMgcHJlc2VudFxyXG5cdFx0fSBlbHNlIGlmICggY2xhc3Nlc1sgaWR4IF0uaW5kZXhPZiggXCJ1aS1pY29uLVwiICkgPT09IDAgKSB7XHJcblx0XHRcdHVua25vd25DbGFzcyA9IGZhbHNlO1xyXG5cdFx0XHRvLmljb24gPSBjbGFzc2VzWyBpZHggXS5zdWJzdHJpbmcoIDggKTtcclxuXHJcblx0XHQvLyBFc3RhYmxpc2ggdGhlIHRoZW1lIC0gdGhpcyByZWNvZ25pemVzIG9uZS1sZXR0ZXIgdGhlbWUgc3dhdGNoIG5hbWVzXHJcblx0XHR9IGVsc2UgaWYgKCBjbGFzc2VzWyBpZHggXS5pbmRleE9mKCBcInVpLWJ0bi1cIiApID09PSAwICYmIGNsYXNzZXNbIGlkeCBdLmxlbmd0aCA9PT0gOCApIHtcclxuXHRcdFx0dW5rbm93bkNsYXNzID0gZmFsc2U7XHJcblx0XHRcdG8udGhlbWUgPSBjbGFzc2VzWyBpZHggXS5zdWJzdHJpbmcoIDcgKTtcclxuXHJcblx0XHQvLyBSZWNvZ25pemUgdGhhdCB0aGlzIGVsZW1lbnQgaGFzIGFscmVhZHkgYmVlbiBidXR0b25NYXJrdXAtZW5oYW5jZWRcclxuXHRcdH0gZWxzZSBpZiAoIGNsYXNzZXNbIGlkeCBdID09PSBcInVpLWJ0blwiICkge1xyXG5cdFx0XHR1bmtub3duQ2xhc3MgPSBmYWxzZTtcclxuXHRcdFx0YWxyZWFkeUVuaGFuY2VkID0gdHJ1ZTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBJZiB0aGlzIGNsYXNzIGhhcyBub3QgYmVlbiByZWNvZ25pemVkLCBhZGQgaXQgdG8gdGhlIGxpc3RcclxuXHRcdGlmICggdW5rbm93bkNsYXNzICkge1xyXG5cdFx0XHR1bmtub3duQ2xhc3Nlcy5wdXNoKCBjbGFzc2VzWyBpZHggXSApO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0Ly8gSWYgYSBcInVpLWJ0bi1pY29uLSpcIiBpY29uIHBvc2l0aW9uIGNsYXNzIGlzIGFic2VudCB0aGVyZSBjYW5ub3QgYmUgYW4gaWNvblxyXG5cdGlmICggbm9JY29uICkge1xyXG5cdFx0by5pY29uID0gXCJcIjtcclxuXHR9XHJcblxyXG5cdHJldHVybiB7XHJcblx0XHRvcHRpb25zOiBvLFxyXG5cdFx0dW5rbm93bkNsYXNzZXM6IHVua25vd25DbGFzc2VzLFxyXG5cdFx0YWxyZWFkeUVuaGFuY2VkOiBhbHJlYWR5RW5oYW5jZWRcclxuXHR9O1xyXG59XHJcblxyXG5mdW5jdGlvbiBjYW1lbENhc2UySHlwaGVuYXRlZCggYyApIHtcclxuXHRyZXR1cm4gXCItXCIgKyBjLnRvTG93ZXJDYXNlKCk7XHJcbn1cclxuXHJcbi8vICQuZm4uYnV0dG9uTWFya3VwOlxyXG4vLyBET006IGdldHMvc2V0cyAuY2xhc3NOYW1lXHJcbi8vXHJcbi8vIEBvcHRpb25zOiBvcHRpb25zIHRvIGFwcGx5IHRvIHRoZSBlbGVtZW50cyBpbiB0aGUgalF1ZXJ5IG9iamVjdFxyXG4vLyBAb3ZlcndyaXRlQ2xhc3NlczogYm9vbGVhbiBpbmRpY2F0aW5nIHdoZXRoZXIgdG8gaG9ub3VyIGV4aXN0aW5nIGNsYXNzZXNcclxuLy9cclxuLy8gQ2FsY3VsYXRlcyB0aGUgY2xhc3NlcyB0byBhcHBseSB0byB0aGUgZWxlbWVudHMgaW4gdGhlIGpRdWVyeSBvYmplY3QgYmFzZWQgb25cclxuLy8gdGhlIG9wdGlvbnMgcGFzc2VkIGluLiBJZiBAb3ZlcndyaXRlQ2xhc3NlcyBpcyB0cnVlLCBpdCBzZXRzIHRoZSBjbGFzc05hbWVcclxuLy8gcHJvcGVydHkgb2YgZWFjaCBlbGVtZW50IGluIHRoZSBqUXVlcnkgb2JqZWN0IHRvIHRoZSBidXR0b25NYXJrdXAgY2xhc3Nlc1xyXG4vLyBpdCBjYWxjdWxhdGVzIGJhc2VkIG9uIHRoZSBvcHRpb25zIHBhc3NlZCBpbi5cclxuLy9cclxuLy8gSWYgeW91IHdpc2ggdG8gcHJlc2VydmUgYW55IGNsYXNzZXMgdGhhdCBhcmUgYWxyZWFkeSBwcmVzZW50IG9uIHRoZSBlbGVtZW50c1xyXG4vLyBpbnNpZGUgdGhlIGpRdWVyeSBvYmplY3QsIGluY2x1ZGluZyBidXR0b25NYXJrdXAtcmVsYXRlZCBjbGFzc2VzIHRoYXQgd2VyZVxyXG4vLyBhZGRlZCBieSBhIHByZXZpb3VzIGNhbGwgdG8gJC5mbi5idXR0b25NYXJrdXAoKSBvciBkdXJpbmcgcGFnZSBlbmhhbmNlbWVudFxyXG4vLyB0aGVuIHlvdSBzaG91bGQgb21pdCBAb3ZlcndyaXRlQ2xhc3NlcyBvciBzZXQgaXQgdG8gZmFsc2UuXHJcbiQuZm4uYnV0dG9uTWFya3VwID0gZnVuY3Rpb24oIG9wdGlvbnMsIG92ZXJ3cml0ZUNsYXNzZXMgKSB7XHJcblx0dmFyIGlkeCwgZGF0YSwgZWwsIHJldHJpZXZlZE9wdGlvbnMsIG9wdGlvbktleSxcclxuXHRcdGRlZmF1bHRzID0gJC5mbi5idXR0b25NYXJrdXAuZGVmYXVsdHM7XHJcblxyXG5cdGZvciAoIGlkeCA9IDAgOyBpZHggPCB0aGlzLmxlbmd0aCA7IGlkeCsrICkge1xyXG5cdFx0ZWwgPSB0aGlzWyBpZHggXTtcclxuXHRcdGRhdGEgPSBvdmVyd3JpdGVDbGFzc2VzID9cclxuXHJcblx0XHRcdC8vIEFzc3VtZSB0aGlzIGVsZW1lbnQgaXMgbm90IGVuaGFuY2VkIGFuZCBpZ25vcmUgaXRzIGNsYXNzZXNcclxuXHRcdFx0eyBhbHJlYWR5RW5oYW5jZWQ6IGZhbHNlLCB1bmtub3duQ2xhc3NlczogW10gfSA6XHJcblxyXG5cdFx0XHQvLyBPdGhlcndpc2UgYW5hbHl6ZSBleGlzdGluZyBjbGFzc2VzIHRvIGVzdGFibGlzaCBleGlzdGluZyBvcHRpb25zIGFuZFxyXG5cdFx0XHQvLyBjbGFzc2VzXHJcblx0XHRcdGNsYXNzTmFtZVRvT3B0aW9ucyggZWwuY2xhc3NOYW1lICk7XHJcblxyXG5cdFx0cmV0cmlldmVkT3B0aW9ucyA9ICQuZXh0ZW5kKCB7fSxcclxuXHJcblx0XHRcdC8vIElmIHRoZSBlbGVtZW50IGFscmVhZHkgaGFzIHRoZSBjbGFzcyB1aS1idG4sIHRoZW4gd2UgYXNzdW1lIHRoYXRcclxuXHRcdFx0Ly8gaXQgaGFzIHBhc3NlZCB0aHJvdWdoIGJ1dHRvbk1hcmt1cCBiZWZvcmUgLSBvdGhlcndpc2UsIHRoZSBvcHRpb25zXHJcblx0XHRcdC8vIHJldHVybmVkIGJ5IGNsYXNzTmFtZVRvT3B0aW9ucyBkbyBub3QgY29ycmVjdGx5IHJlZmxlY3QgdGhlIHN0YXRlIG9mXHJcblx0XHRcdC8vIHRoZSBlbGVtZW50XHJcblx0XHRcdCggZGF0YS5hbHJlYWR5RW5oYW5jZWQgPyBkYXRhLm9wdGlvbnMgOiB7fSApLFxyXG5cclxuXHRcdFx0Ly8gRmluYWxseSwgYXBwbHkgdGhlIG9wdGlvbnMgcGFzc2VkIGluXHJcblx0XHRcdG9wdGlvbnMgKTtcclxuXHJcblx0XHQvLyBJZiB0aGlzIGlzIHRoZSBmaXJzdCBjYWxsIG9uIHRoaXMgZWxlbWVudCwgcmV0cmlldmUgcmVtYWluaW5nIG9wdGlvbnNcclxuXHRcdC8vIGZyb20gdGhlIGRhdGEtYXR0cmlidXRlc1xyXG5cdFx0aWYgKCAhZGF0YS5hbHJlYWR5RW5oYW5jZWQgKSB7XHJcblx0XHRcdGZvciAoIG9wdGlvbktleSBpbiBkZWZhdWx0cyApIHtcclxuXHRcdFx0XHRpZiAoIHJldHJpZXZlZE9wdGlvbnNbIG9wdGlvbktleSBdID09PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdFx0XHRyZXRyaWV2ZWRPcHRpb25zWyBvcHRpb25LZXkgXSA9IGdldEF0dHJGaXhlZCggZWwsXHJcblx0XHRcdFx0XHRcdG9wdGlvbktleS5yZXBsYWNlKCBjYXBpdGFsTGV0dGVyc1JFLCBjYW1lbENhc2UySHlwaGVuYXRlZCApXHJcblx0XHRcdFx0XHQpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGVsLmNsYXNzTmFtZSA9IG9wdGlvbnNUb0NsYXNzZXMoXHJcblxyXG5cdFx0XHQvLyBNZXJnZSBhbGwgdGhlIG9wdGlvbnMgYW5kIGFwcGx5IHRoZW0gYXMgY2xhc3Nlc1xyXG5cdFx0XHQkLmV4dGVuZCgge30sXHJcblxyXG5cdFx0XHRcdC8vIFRoZSBkZWZhdWx0cyBmb3JtIHRoZSBiYXNpc1xyXG5cdFx0XHRcdGRlZmF1bHRzLFxyXG5cclxuXHRcdFx0XHQvLyBBZGQgdGhlIGNvbXB1dGVkIG9wdGlvbnNcclxuXHRcdFx0XHRyZXRyaWV2ZWRPcHRpb25zXHJcblx0XHRcdCksXHJcblxyXG5cdFx0XHQvLyAuLi4gYW5kIHJlLWFwcGx5IGFueSB1bnJlY29nbml6ZWQgY2xhc3NlcyB0aGF0IHdlcmUgZm91bmRcclxuXHRcdFx0ZGF0YS51bmtub3duQ2xhc3NlcyApLmpvaW4oIFwiIFwiICk7XHJcblx0XHRpZiAoIGVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKSAhPT0gXCJidXR0b25cIiApIHtcclxuXHRcdFx0ZWwuc2V0QXR0cmlidXRlKCBcInJvbGVcIiwgXCJidXR0b25cIiApO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cmV0dXJuIHRoaXM7XHJcbn07XHJcblxyXG4vLyBidXR0b25NYXJrdXAgZGVmYXVsdHMuIFRoaXMgbXVzdCBiZSBhIGNvbXBsZXRlIHNldCwgaS5lLiwgYSB2YWx1ZSBtdXN0IGJlXHJcbi8vIGdpdmVuIGhlcmUgZm9yIGFsbCByZWNvZ25pemVkIG9wdGlvbnNcclxuJC5mbi5idXR0b25NYXJrdXAuZGVmYXVsdHMgPSB7XHJcblx0aWNvbjogXCJcIixcclxuXHRpY29ucG9zOiBcImxlZnRcIixcclxuXHR0aGVtZTogbnVsbCxcclxuXHRpbmxpbmU6IGZhbHNlLFxyXG5cdHNoYWRvdzogdHJ1ZSxcclxuXHRjb3JuZXJzOiB0cnVlLFxyXG5cdGljb25zaGFkb3c6IGZhbHNlLCAvKiBUT0RPOiBSZW1vdmUgaW4gMS41LiBPcHRpb24gZGVwcmVjYXRlZCBpbiAxLjQuICovXHJcblx0bWluaTogZmFsc2VcclxufTtcclxuXHJcbiQuZXh0ZW5kKCAkLmZuLmJ1dHRvbk1hcmt1cCwge1xyXG5cdGluaXRTZWxlY3RvcjogXCJhOmpxbURhdGEocm9sZT0nYnV0dG9uJyksIC51aS1iYXIgPiBhLCAudWktYmFyID4gOmpxbURhdGEocm9sZT0nY29udHJvbGdyb3VwJykgPiBhLCBidXR0b246bm90KDpqcW1EYXRhKHJvbGU9J25hdmJhcicpIGJ1dHRvbilcIlxyXG59KTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcbiQud2lkZ2V0KCBcIm1vYmlsZS5jb250cm9sZ3JvdXBcIiwgJC5leHRlbmQoIHtcclxuXHRvcHRpb25zOiB7XHJcblx0XHRlbmhhbmNlZDogZmFsc2UsXHJcblx0XHR0aGVtZTogbnVsbCxcclxuXHRcdHNoYWRvdzogZmFsc2UsXHJcblx0XHRjb3JuZXJzOiB0cnVlLFxyXG5cdFx0ZXhjbHVkZUludmlzaWJsZTogdHJ1ZSxcclxuXHRcdHR5cGU6IFwidmVydGljYWxcIixcclxuXHRcdG1pbmk6IGZhbHNlXHJcblx0fSxcclxuXHJcblx0X2NyZWF0ZTogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgZWxlbSA9IHRoaXMuZWxlbWVudCxcclxuXHRcdFx0b3B0cyA9IHRoaXMub3B0aW9ucyxcclxuXHRcdFx0a2VlcE5hdGl2ZSA9ICQubW9iaWxlLnBhZ2UucHJvdG90eXBlLmtlZXBOYXRpdmVTZWxlY3RvcigpO1xyXG5cclxuXHRcdC8vIFJ1biBidXR0b25tYXJrdXBcclxuXHRcdGlmICggJC5mbi5idXR0b25NYXJrdXAgKSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudFxyXG5cdFx0XHRcdC5maW5kKCAkLmZuLmJ1dHRvbk1hcmt1cC5pbml0U2VsZWN0b3IgKVxyXG5cdFx0XHRcdC5ub3QoIGtlZXBOYXRpdmUgKVxyXG5cdFx0XHRcdC5idXR0b25NYXJrdXAoKTtcclxuXHRcdH1cclxuXHRcdC8vIEVuaGFuY2UgY2hpbGQgd2lkZ2V0c1xyXG5cdFx0JC5lYWNoKCB0aGlzLl9jaGlsZFdpZGdldHMsICQucHJveHkoIGZ1bmN0aW9uKCBudW1iZXIsIHdpZGdldE5hbWUgKSB7XHJcblx0XHRcdGlmICggJC5tb2JpbGVbIHdpZGdldE5hbWUgXSApIHtcclxuXHRcdFx0XHR0aGlzLmVsZW1lbnRcclxuXHRcdFx0XHRcdC5maW5kKCAkLm1vYmlsZVsgd2lkZ2V0TmFtZSBdLmluaXRTZWxlY3RvciApXHJcblx0XHRcdFx0XHQubm90KCBrZWVwTmF0aXZlIClbIHdpZGdldE5hbWUgXSgpO1xyXG5cdFx0XHR9XHJcblx0XHR9LCB0aGlzICkpO1xyXG5cclxuXHRcdCQuZXh0ZW5kKCB0aGlzLCB7XHJcblx0XHRcdF91aTogbnVsbCxcclxuXHRcdFx0X2luaXRpYWxSZWZyZXNoOiB0cnVlXHJcblx0XHR9KTtcclxuXHJcblx0XHRpZiAoIG9wdHMuZW5oYW5jZWQgKSB7XHJcblx0XHRcdHRoaXMuX3VpID0ge1xyXG5cdFx0XHRcdGdyb3VwTGVnZW5kOiBlbGVtLmNoaWxkcmVuKCBcIi51aS1jb250cm9sZ3JvdXAtbGFiZWxcIiApLmNoaWxkcmVuKCksXHJcblx0XHRcdFx0Y2hpbGRXcmFwcGVyOiBlbGVtLmNoaWxkcmVuKCBcIi51aS1jb250cm9sZ3JvdXAtY29udHJvbHNcIiApXHJcblx0XHRcdH07XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLl91aSA9IHRoaXMuX2VuaGFuY2UoKTtcclxuXHRcdH1cclxuXHJcblx0fSxcclxuXHJcblx0X2NoaWxkV2lkZ2V0czogWyBcImNoZWNrYm94cmFkaW9cIiwgXCJzZWxlY3RtZW51XCIsIFwiYnV0dG9uXCIgXSxcclxuXHJcblx0X3RoZW1lQ2xhc3NGcm9tT3B0aW9uOiBmdW5jdGlvbiggdmFsdWUgKSB7XHJcblx0XHRyZXR1cm4gKCB2YWx1ZSA/ICggdmFsdWUgPT09IFwibm9uZVwiID8gXCJcIiA6IFwidWktZ3JvdXAtdGhlbWUtXCIgKyB2YWx1ZSApIDogXCJcIiApO1xyXG5cdH0sXHJcblxyXG5cdF9lbmhhbmNlOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBlbGVtID0gdGhpcy5lbGVtZW50LFxyXG5cdFx0XHRvcHRzID0gdGhpcy5vcHRpb25zLFxyXG5cdFx0XHR1aSA9IHtcclxuXHRcdFx0XHRncm91cExlZ2VuZDogZWxlbS5jaGlsZHJlbiggXCJsZWdlbmRcIiApLFxyXG5cdFx0XHRcdGNoaWxkV3JhcHBlcjogZWxlbVxyXG5cdFx0XHRcdFx0LmFkZENsYXNzKCBcInVpLWNvbnRyb2xncm91cCBcIiArXHJcblx0XHRcdFx0XHRcdFwidWktY29udHJvbGdyb3VwLVwiICtcclxuXHRcdFx0XHRcdFx0XHQoIG9wdHMudHlwZSA9PT0gXCJob3Jpem9udGFsXCIgPyBcImhvcml6b250YWxcIiA6IFwidmVydGljYWxcIiApICsgXCIgXCIgK1xyXG5cdFx0XHRcdFx0XHR0aGlzLl90aGVtZUNsYXNzRnJvbU9wdGlvbiggb3B0cy50aGVtZSApICsgXCIgXCIgK1xyXG5cdFx0XHRcdFx0XHQoIG9wdHMuY29ybmVycyA/IFwidWktY29ybmVyLWFsbCBcIiA6IFwiXCIgKSArXHJcblx0XHRcdFx0XHRcdCggb3B0cy5taW5pID8gXCJ1aS1taW5pIFwiIDogXCJcIiApIClcclxuXHRcdFx0XHRcdC53cmFwSW5uZXIoIFwiPGRpdiBcIiArXHJcblx0XHRcdFx0XHRcdFwiY2xhc3M9J3VpLWNvbnRyb2xncm91cC1jb250cm9scyBcIiArXHJcblx0XHRcdFx0XHRcdFx0KCBvcHRzLnNoYWRvdyA9PT0gdHJ1ZSA/IFwidWktc2hhZG93XCIgOiBcIlwiICkgKyBcIic+PC9kaXY+XCIgKVxyXG5cdFx0XHRcdFx0LmNoaWxkcmVuKClcclxuXHRcdFx0fTtcclxuXHJcblx0XHRpZiAoIHVpLmdyb3VwTGVnZW5kLmxlbmd0aCA+IDAgKSB7XHJcblx0XHRcdCQoIFwiPGRpdiByb2xlPSdoZWFkaW5nJyBjbGFzcz0ndWktY29udHJvbGdyb3VwLWxhYmVsJz48L2Rpdj5cIiApXHJcblx0XHRcdFx0LmFwcGVuZCggdWkuZ3JvdXBMZWdlbmQgKVxyXG5cdFx0XHRcdC5wcmVwZW5kVG8oIGVsZW0gKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gdWk7XHJcblx0fSxcclxuXHJcblx0X2luaXQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5yZWZyZXNoKCk7XHJcblx0fSxcclxuXHJcblx0X3NldE9wdGlvbnM6IGZ1bmN0aW9uKCBvcHRpb25zICkge1xyXG5cdFx0dmFyIGNhbGxSZWZyZXNoLCByZXR1cm5WYWx1ZSxcclxuXHRcdFx0ZWxlbSA9IHRoaXMuZWxlbWVudDtcclxuXHJcblx0XHQvLyBNdXN0IGhhdmUgb25lIG9mIGhvcml6b250YWwgb3IgdmVydGljYWxcclxuXHRcdGlmICggb3B0aW9ucy50eXBlICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdGVsZW1cclxuXHRcdFx0XHQucmVtb3ZlQ2xhc3MoIFwidWktY29udHJvbGdyb3VwLWhvcml6b250YWwgdWktY29udHJvbGdyb3VwLXZlcnRpY2FsXCIgKVxyXG5cdFx0XHRcdC5hZGRDbGFzcyggXCJ1aS1jb250cm9sZ3JvdXAtXCIgKyAoIG9wdGlvbnMudHlwZSA9PT0gXCJob3Jpem9udGFsXCIgPyBcImhvcml6b250YWxcIiA6IFwidmVydGljYWxcIiApICk7XHJcblx0XHRcdGNhbGxSZWZyZXNoID0gdHJ1ZTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG9wdGlvbnMudGhlbWUgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0ZWxlbVxyXG5cdFx0XHRcdC5yZW1vdmVDbGFzcyggdGhpcy5fdGhlbWVDbGFzc0Zyb21PcHRpb24oIHRoaXMub3B0aW9ucy50aGVtZSApIClcclxuXHRcdFx0XHQuYWRkQ2xhc3MoIHRoaXMuX3RoZW1lQ2xhc3NGcm9tT3B0aW9uKCBvcHRpb25zLnRoZW1lICkgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG9wdGlvbnMuY29ybmVycyAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRlbGVtLnRvZ2dsZUNsYXNzKCBcInVpLWNvcm5lci1hbGxcIiwgb3B0aW9ucy5jb3JuZXJzICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBvcHRpb25zLm1pbmkgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0ZWxlbS50b2dnbGVDbGFzcyggXCJ1aS1taW5pXCIsIG9wdGlvbnMubWluaSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggb3B0aW9ucy5zaGFkb3cgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0dGhpcy5fdWkuY2hpbGRXcmFwcGVyLnRvZ2dsZUNsYXNzKCBcInVpLXNoYWRvd1wiLCBvcHRpb25zLnNoYWRvdyApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggb3B0aW9ucy5leGNsdWRlSW52aXNpYmxlICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdHRoaXMub3B0aW9ucy5leGNsdWRlSW52aXNpYmxlID0gb3B0aW9ucy5leGNsdWRlSW52aXNpYmxlO1xyXG5cdFx0XHRjYWxsUmVmcmVzaCA9IHRydWU7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuVmFsdWUgPSB0aGlzLl9zdXBlciggb3B0aW9ucyApO1xyXG5cclxuXHRcdGlmICggY2FsbFJlZnJlc2ggKSB7XHJcblx0XHRcdHRoaXMucmVmcmVzaCgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiByZXR1cm5WYWx1ZTtcclxuXHR9LFxyXG5cclxuXHRjb250YWluZXI6IGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuIHRoaXMuX3VpLmNoaWxkV3JhcHBlcjtcclxuXHR9LFxyXG5cclxuXHRyZWZyZXNoOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciAkZWwgPSB0aGlzLmNvbnRhaW5lcigpLFxyXG5cdFx0XHRlbHMgPSAkZWwuZmluZCggXCIudWktYnRuXCIgKS5ub3QoIFwiLnVpLXNsaWRlci1oYW5kbGVcIiApLFxyXG5cdFx0XHRjcmVhdGUgPSB0aGlzLl9pbml0aWFsUmVmcmVzaDtcclxuXHRcdGlmICggJC5tb2JpbGUuY2hlY2tib3hyYWRpbyApIHtcclxuXHRcdFx0JGVsLmZpbmQoIFwiOm1vYmlsZS1jaGVja2JveHJhZGlvXCIgKS5jaGVja2JveHJhZGlvKCBcInJlZnJlc2hcIiApO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5fYWRkRmlyc3RMYXN0Q2xhc3NlcyggZWxzLFxyXG5cdFx0XHR0aGlzLm9wdGlvbnMuZXhjbHVkZUludmlzaWJsZSA/IHRoaXMuX2dldFZpc2libGVzKCBlbHMsIGNyZWF0ZSApIDogZWxzLFxyXG5cdFx0XHRjcmVhdGUgKTtcclxuXHRcdHRoaXMuX2luaXRpYWxSZWZyZXNoID0gZmFsc2U7XHJcblx0fSxcclxuXHJcblx0Ly8gQ2F2ZWF0OiBJZiB0aGUgbGVnZW5kIGlzIG5vdCB0aGUgZmlyc3QgY2hpbGQgb2YgdGhlIGNvbnRyb2xncm91cCBhdCBlbmhhbmNlXHJcblx0Ly8gdGltZSwgaXQgd2lsbCBiZSBhZnRlciBfZGVzdHJveSgpLlxyXG5cdF9kZXN0cm95OiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciB1aSwgYnV0dG9ucyxcclxuXHRcdFx0b3B0cyA9IHRoaXMub3B0aW9ucztcclxuXHJcblx0XHRpZiAoIG9wdHMuZW5oYW5jZWQgKSB7XHJcblx0XHRcdHJldHVybiB0aGlzO1xyXG5cdFx0fVxyXG5cclxuXHRcdHVpID0gdGhpcy5fdWk7XHJcblx0XHRidXR0b25zID0gdGhpcy5lbGVtZW50XHJcblx0XHRcdC5yZW1vdmVDbGFzcyggXCJ1aS1jb250cm9sZ3JvdXAgXCIgK1xyXG5cdFx0XHRcdFwidWktY29udHJvbGdyb3VwLWhvcml6b250YWwgdWktY29udHJvbGdyb3VwLXZlcnRpY2FsIHVpLWNvcm5lci1hbGwgdWktbWluaSBcIiArXHJcblx0XHRcdFx0dGhpcy5fdGhlbWVDbGFzc0Zyb21PcHRpb24oIG9wdHMudGhlbWUgKSApXHJcblx0XHRcdC5maW5kKCBcIi51aS1idG5cIiApXHJcblx0XHRcdC5ub3QoIFwiLnVpLXNsaWRlci1oYW5kbGVcIiApO1xyXG5cclxuXHRcdHRoaXMuX3JlbW92ZUZpcnN0TGFzdENsYXNzZXMoIGJ1dHRvbnMgKTtcclxuXHJcblx0XHR1aS5ncm91cExlZ2VuZC51bndyYXAoKTtcclxuXHRcdHVpLmNoaWxkV3JhcHBlci5jaGlsZHJlbigpLnVud3JhcCgpO1xyXG5cdH1cclxufSwgJC5tb2JpbGUuYmVoYXZpb3JzLmFkZEZpcnN0TGFzdENsYXNzZXMgKSApO1xyXG5cclxufSkoalF1ZXJ5KTtcclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxuXHQkLndpZGdldCggXCJtb2JpbGUudG9vbGJhclwiLCB7XHJcblx0XHRpbml0U2VsZWN0b3I6IFwiOmpxbURhdGEocm9sZT0nZm9vdGVyJyksIDpqcW1EYXRhKHJvbGU9J2hlYWRlcicpXCIsXHJcblxyXG5cdFx0b3B0aW9uczoge1xyXG5cdFx0XHR0aGVtZTogbnVsbCxcclxuXHRcdFx0YWRkQmFja0J0bjogZmFsc2UsXHJcblx0XHRcdGJhY2tCdG5UaGVtZTogbnVsbCxcclxuXHRcdFx0YmFja0J0blRleHQ6IFwiQmFja1wiXHJcblx0XHR9LFxyXG5cclxuXHRcdF9jcmVhdGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgbGVmdGJ0biwgcmlnaHRidG4sXHJcblx0XHRcdFx0cm9sZSA9ICB0aGlzLmVsZW1lbnQuaXMoIFwiOmpxbURhdGEocm9sZT0naGVhZGVyJylcIiApID8gXCJoZWFkZXJcIiA6IFwiZm9vdGVyXCIsXHJcblx0XHRcdFx0cGFnZSA9IHRoaXMuZWxlbWVudC5jbG9zZXN0KCBcIi51aS1wYWdlXCIgKTtcclxuXHRcdFx0aWYgKCBwYWdlLmxlbmd0aCA9PT0gMCApIHtcclxuXHRcdFx0XHRwYWdlID0gZmFsc2U7XHJcblx0XHRcdFx0dGhpcy5fb24oIHRoaXMuZG9jdW1lbnQsIHtcclxuXHRcdFx0XHRcdFwicGFnZXNob3dcIjogXCJyZWZyZXNoXCJcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0XHQkLmV4dGVuZCggdGhpcywge1xyXG5cdFx0XHRcdHJvbGU6IHJvbGUsXHJcblx0XHRcdFx0cGFnZTogcGFnZSxcclxuXHRcdFx0XHRsZWZ0YnRuOiBsZWZ0YnRuLFxyXG5cdFx0XHRcdHJpZ2h0YnRuOiByaWdodGJ0blxyXG5cdFx0XHR9KTtcclxuXHRcdFx0dGhpcy5lbGVtZW50LmF0dHIoIFwicm9sZVwiLCByb2xlID09PSBcImhlYWRlclwiID8gXCJiYW5uZXJcIiA6IFwiY29udGVudGluZm9cIiApLmFkZENsYXNzKCBcInVpLVwiICsgcm9sZSApO1xyXG5cdFx0XHR0aGlzLnJlZnJlc2goKTtcclxuXHRcdFx0dGhpcy5fc2V0T3B0aW9ucyggdGhpcy5vcHRpb25zICk7XHJcblx0XHR9LFxyXG5cdFx0X3NldE9wdGlvbnM6IGZ1bmN0aW9uKCBvICkge1xyXG5cdFx0XHRpZiAoIG8uYWRkQmFja0J0biAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRcdHRoaXMuX3VwZGF0ZUJhY2tCdXR0b24oKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoIG8uYmFja0J0blRoZW1lICE9IG51bGwgKSB7XHJcblx0XHRcdFx0dGhpcy5lbGVtZW50XHJcblx0XHRcdFx0XHQuZmluZCggXCIudWktdG9vbGJhci1iYWNrLWJ0blwiIClcclxuXHRcdFx0XHRcdC5hZGRDbGFzcyggXCJ1aS1idG4gdWktYnRuLVwiICsgby5iYWNrQnRuVGhlbWUgKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoIG8uYmFja0J0blRleHQgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0XHR0aGlzLmVsZW1lbnQuZmluZCggXCIudWktdG9vbGJhci1iYWNrLWJ0biAudWktYnRuLXRleHRcIiApLnRleHQoIG8uYmFja0J0blRleHQgKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoIG8udGhlbWUgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0XHR2YXIgY3VycmVudFRoZW1lID0gdGhpcy5vcHRpb25zLnRoZW1lID8gdGhpcy5vcHRpb25zLnRoZW1lIDogXCJpbmhlcml0XCIsXHJcblx0XHRcdFx0XHRuZXdUaGVtZSA9IG8udGhlbWUgPyBvLnRoZW1lIDogXCJpbmhlcml0XCI7XHJcblxyXG5cdFx0XHRcdHRoaXMuZWxlbWVudC5yZW1vdmVDbGFzcyggXCJ1aS1iYXItXCIgKyBjdXJyZW50VGhlbWUgKS5hZGRDbGFzcyggXCJ1aS1iYXItXCIgKyBuZXdUaGVtZSApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR0aGlzLl9zdXBlciggbyApO1xyXG5cdFx0fSxcclxuXHRcdHJlZnJlc2g6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpZiAoIHRoaXMucm9sZSA9PT0gXCJoZWFkZXJcIiApIHtcclxuXHRcdFx0XHR0aGlzLl9hZGRIZWFkZXJCdXR0b25DbGFzc2VzKCk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKCAhdGhpcy5wYWdlICkge1xyXG5cdFx0XHRcdHRoaXMuX3NldFJlbGF0aXZlKCk7XHJcblx0XHRcdFx0aWYgKCB0aGlzLnJvbGUgPT09IFwiZm9vdGVyXCIgKSB7XHJcblx0XHRcdFx0XHR0aGlzLmVsZW1lbnQuYXBwZW5kVG8oIFwiYm9keVwiICk7XHJcblx0XHRcdFx0fSBlbHNlIGlmICggdGhpcy5yb2xlID09PSBcImhlYWRlclwiICkge1xyXG5cdFx0XHRcdFx0dGhpcy5fdXBkYXRlQmFja0J1dHRvbigpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHR0aGlzLl9hZGRIZWFkaW5nQ2xhc3NlcygpO1xyXG5cdFx0XHR0aGlzLl9idG5NYXJrdXAoKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly93ZSBvbmx5IHdhbnQgdGhpcyB0byBydW4gb24gbm9uIGZpeGVkIHRvb2xiYXJzIHNvIG1ha2UgaXQgZWFzeSB0byBvdmVycmlkZVxyXG5cdFx0X3NldFJlbGF0aXZlOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0JCggXCJbZGF0YS1cIisgJC5tb2JpbGUubnMgKyBcInJvbGU9J3BhZ2UnXVwiICkuY3NzKHsgXCJwb3NpdGlvblwiOiBcInJlbGF0aXZlXCIgfSk7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vIERlcHJlY2F0ZWQgaW4gMS40LiBBcyBmcm9tIDEuNSBidXR0b24gY2xhc3NlcyBoYXZlIHRvIGJlIHByZXNlbnQgaW4gdGhlIG1hcmt1cC5cclxuXHRcdF9idG5NYXJrdXA6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnRcclxuXHRcdFx0XHQuY2hpbGRyZW4oIFwiYVwiIClcclxuXHRcdFx0XHQuZmlsdGVyKCBcIjpub3QoW2RhdGEtXCIgKyAkLm1vYmlsZS5ucyArIFwicm9sZT0nbm9uZSddKVwiIClcclxuXHRcdFx0XHQuYXR0ciggXCJkYXRhLVwiICsgJC5tb2JpbGUubnMgKyBcInJvbGVcIiwgXCJidXR0b25cIiApO1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQudHJpZ2dlciggXCJjcmVhdGVcIiApO1xyXG5cdFx0fSxcclxuXHRcdC8vIERlcHJlY2F0ZWQgaW4gMS40LiBBcyBmcm9tIDEuNSB1aS1idG4tbGVmdC9yaWdodCBjbGFzc2VzIGhhdmUgdG8gYmUgcHJlc2VudCBpbiB0aGUgbWFya3VwLlxyXG5cdFx0X2FkZEhlYWRlckJ1dHRvbkNsYXNzZXM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgaGVhZGVyQW5jaG9ycyA9IHRoaXMuZWxlbWVudC5jaGlsZHJlbiggXCJhLCBidXR0b25cIiApO1xyXG5cclxuXHRcdFx0Ly8gRG8gbm90IG1pc3Rha2UgYSBiYWNrIGJ1dHRvbiBmb3IgYSBsZWZ0IHRvb2xiYXIgYnV0dG9uXHJcblx0XHRcdHRoaXMubGVmdGJ0biA9IGhlYWRlckFuY2hvcnMuaGFzQ2xhc3MoIFwidWktYnRuLWxlZnRcIiApICYmXHJcblx0XHRcdFx0IWhlYWRlckFuY2hvcnMuaGFzQ2xhc3MoIFwidWktdG9vbGJhci1iYWNrLWJ0blwiICk7XHJcblxyXG5cdFx0XHR0aGlzLnJpZ2h0YnRuID0gaGVhZGVyQW5jaG9ycy5oYXNDbGFzcyggXCJ1aS1idG4tcmlnaHRcIiApO1xyXG5cclxuXHRcdFx0Ly8gRmlsdGVyIG91dCByaWdodCBidXR0b25zIGFuZCBiYWNrIGJ1dHRvbnNcclxuXHRcdFx0dGhpcy5sZWZ0YnRuID0gdGhpcy5sZWZ0YnRuIHx8XHJcblx0XHRcdFx0aGVhZGVyQW5jaG9ycy5lcSggMCApXHJcblx0XHRcdFx0XHQubm90KCBcIi51aS1idG4tcmlnaHQsLnVpLXRvb2xiYXItYmFjay1idG5cIiApXHJcblx0XHRcdFx0XHQuYWRkQ2xhc3MoIFwidWktYnRuLWxlZnRcIiApXHJcblx0XHRcdFx0XHQubGVuZ3RoO1xyXG5cclxuXHRcdFx0dGhpcy5yaWdodGJ0biA9IHRoaXMucmlnaHRidG4gfHwgaGVhZGVyQW5jaG9ycy5lcSggMSApLmFkZENsYXNzKCBcInVpLWJ0bi1yaWdodFwiICkubGVuZ3RoO1xyXG5cdFx0fSxcclxuXHRcdF91cGRhdGVCYWNrQnV0dG9uOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIGJhY2tCdXR0b24sXHJcblx0XHRcdFx0b3B0aW9ucyA9IHRoaXMub3B0aW9ucyxcclxuXHRcdFx0XHR0aGVtZSA9IG9wdGlvbnMuYmFja0J0blRoZW1lIHx8IG9wdGlvbnMudGhlbWU7XHJcblxyXG5cdFx0XHQvLyBSZXRyaWV2ZSB0aGUgYmFjayBidXR0b24gb3IgY3JlYXRlIGEgbmV3LCBlbXB0eSBvbmVcclxuXHRcdFx0YmFja0J1dHRvbiA9IHRoaXMuX2JhY2tCdXR0b24gPSAoIHRoaXMuX2JhY2tCdXR0b24gfHwge30gKTtcclxuXHJcblx0XHRcdC8vIFdlIGFkZCBhIGJhY2sgYnV0dG9uIG9ubHkgaWYgdGhlIG9wdGlvbiB0byBkbyBzbyBpcyBvblxyXG5cdFx0XHRpZiAoIHRoaXMub3B0aW9ucy5hZGRCYWNrQnRuICYmXHJcblxyXG5cdFx0XHRcdFx0Ly8gVGhpcyBtdXN0IGFsc28gYmUgYSBoZWFkZXIgdG9vbGJhclxyXG5cdFx0XHRcdFx0dGhpcy5yb2xlID09PSBcImhlYWRlclwiICYmXHJcblxyXG5cdFx0XHRcdFx0Ly8gVGhlcmUgbXVzdCBiZSBtdWx0aXBsZSBwYWdlcyBpbiB0aGUgRE9NXHJcblx0XHRcdFx0XHQkKCBcIi51aS1wYWdlXCIgKS5sZW5ndGggPiAxICYmXHJcblx0XHRcdFx0XHQoIHRoaXMucGFnZSA/XHJcblxyXG5cdFx0XHRcdFx0XHQvLyBJZiB0aGUgdG9vbGJhciBpcyBpbnRlcm5hbCB0aGUgcGFnZSdzIFVSTCBtdXN0IGRpZmZlciBmcm9tIHRoZSBoYXNoXHJcblx0XHRcdFx0XHRcdCggdGhpcy5wYWdlWyAwIF0uZ2V0QXR0cmlidXRlKCBcImRhdGEtXCIgKyAkLm1vYmlsZS5ucyArIFwidXJsXCIgKSAhPT1cclxuXHRcdFx0XHRcdFx0XHQkLm1vYmlsZS5wYXRoLnN0cmlwSGFzaCggbG9jYXRpb24uaGFzaCApICkgOlxyXG5cclxuXHRcdFx0XHRcdFx0Ly8gT3RoZXJ3aXNlLCBpZiB0aGUgdG9vbGJhciBpcyBleHRlcm5hbCB0aGVyZSBtdXN0IGJlIGF0IGxlYXN0IG9uZVxyXG5cdFx0XHRcdFx0XHQvLyBoaXN0b3J5IGl0ZW0gdG8gd2hpY2ggb25lIGNhbiBnbyBiYWNrXHJcblx0XHRcdFx0XHRcdCggJC5tb2JpbGUubmF2aWdhdGUgJiYgJC5tb2JpbGUubmF2aWdhdGUuaGlzdG9yeSAmJlxyXG5cdFx0XHRcdFx0XHRcdCQubW9iaWxlLm5hdmlnYXRlLmhpc3RvcnkuYWN0aXZlSW5kZXggPiAwICkgKSAmJlxyXG5cclxuXHRcdFx0XHRcdC8vIFRoZSB0b29sYmFyIGRvZXMgbm90IGhhdmUgYSBsZWZ0IGJ1dHRvblxyXG5cdFx0XHRcdFx0IXRoaXMubGVmdGJ0biApIHtcclxuXHJcblx0XHRcdFx0Ly8gU2tpcCBiYWNrIGJ1dHRvbiBjcmVhdGlvbiBpZiBvbmUgaXMgYWxyZWFkeSBwcmVzZW50XHJcblx0XHRcdFx0aWYgKCAhYmFja0J1dHRvbi5hdHRhY2hlZCApIHtcclxuXHRcdFx0XHRcdHRoaXMuYmFja0J1dHRvbiA9IGJhY2tCdXR0b24uZWxlbWVudCA9ICggYmFja0J1dHRvbi5lbGVtZW50IHx8XHJcblx0XHRcdFx0XHRcdCQoIFwiPGEgcm9sZT0nYnV0dG9uJyBocmVmPSdqYXZhc2NyaXB0OnZvaWQoMCk7JyBcIiArXHJcblx0XHRcdFx0XHRcdFx0XCJjbGFzcz0ndWktYnRuIHVpLWNvcm5lci1hbGwgdWktc2hhZG93IHVpLWJ0bi1sZWZ0IFwiICtcclxuXHRcdFx0XHRcdFx0XHRcdCggdGhlbWUgPyBcInVpLWJ0bi1cIiArIHRoZW1lICsgXCIgXCIgOiBcIlwiICkgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XCJ1aS10b29sYmFyLWJhY2stYnRuIHVpLWljb24tY2FyYXQtbCB1aS1idG4taWNvbi1sZWZ0JyBcIiArXHJcblx0XHRcdFx0XHRcdFx0XCJkYXRhLVwiICsgJC5tb2JpbGUubnMgKyBcInJlbD0nYmFjayc+XCIgKyBvcHRpb25zLmJhY2tCdG5UZXh0ICtcclxuXHRcdFx0XHRcdFx0XHRcIjwvYT5cIiApIClcclxuXHRcdFx0XHRcdFx0XHQucHJlcGVuZFRvKCB0aGlzLmVsZW1lbnQgKTtcclxuXHRcdFx0XHRcdGJhY2tCdXR0b24uYXR0YWNoZWQgPSB0cnVlO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdC8vIElmIHdlIGFyZSBub3QgYWRkaW5nIGEgYmFjayBidXR0b24sIHRoZW4gcmVtb3ZlIHRoZSBvbmUgcHJlc2VudCwgaWYgYW55XHJcblx0XHRcdH0gZWxzZSBpZiAoIGJhY2tCdXR0b24uZWxlbWVudCApIHtcclxuXHRcdFx0XHRiYWNrQnV0dG9uLmVsZW1lbnQuZGV0YWNoKCk7XHJcblx0XHRcdFx0YmFja0J1dHRvbi5hdHRhY2hlZCA9IGZhbHNlO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cdFx0X2FkZEhlYWRpbmdDbGFzc2VzOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50LmNoaWxkcmVuKCBcImgxLCBoMiwgaDMsIGg0LCBoNSwgaDZcIiApXHJcblx0XHRcdFx0LmFkZENsYXNzKCBcInVpLXRpdGxlXCIgKVxyXG5cdFx0XHRcdC8vIFJlZ2FyZGxlc3Mgb2YgaCBlbGVtZW50IG51bWJlciBpbiBzcmMsIGl0IGJlY29tZXMgaDEgZm9yIHRoZSBlbmhhbmNlZCBwYWdlXHJcblx0XHRcdFx0LmF0dHIoe1xyXG5cdFx0XHRcdFx0XCJyb2xlXCI6IFwiaGVhZGluZ1wiLFxyXG5cdFx0XHRcdFx0XCJhcmlhLWxldmVsXCI6IFwiMVwiXHJcblx0XHRcdFx0fSk7XHJcblx0XHR9LFxyXG5cdFx0X2Rlc3Ryb3k6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgY3VycmVudFRoZW1lO1xyXG5cclxuXHRcdFx0dGhpcy5lbGVtZW50LmNoaWxkcmVuKCBcImgxLCBoMiwgaDMsIGg0LCBoNSwgaDZcIiApXHJcblx0XHRcdFx0LnJlbW92ZUNsYXNzKCBcInVpLXRpdGxlXCIgKVxyXG5cdFx0XHRcdC5yZW1vdmVBdHRyKCBcInJvbGVcIiApXHJcblx0XHRcdFx0LnJlbW92ZUF0dHIoIFwiYXJpYS1sZXZlbFwiICk7XHJcblxyXG5cdFx0XHRpZiAoIHRoaXMucm9sZSA9PT0gXCJoZWFkZXJcIiApIHtcclxuXHRcdFx0XHR0aGlzLmVsZW1lbnQuY2hpbGRyZW4oIFwiYSwgYnV0dG9uXCIgKVxyXG5cdFx0XHRcdFx0LnJlbW92ZUNsYXNzKCBcInVpLWJ0bi1sZWZ0IHVpLWJ0bi1yaWdodCB1aS1idG4gdWktc2hhZG93IHVpLWNvcm5lci1hbGxcIiApO1xyXG5cdFx0XHRcdGlmICggdGhpcy5iYWNrQnV0dG9uKSB7XHJcblx0XHRcdFx0XHR0aGlzLmJhY2tCdXR0b24ucmVtb3ZlKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRjdXJyZW50VGhlbWUgPSB0aGlzLm9wdGlvbnMudGhlbWUgPyB0aGlzLm9wdGlvbnMudGhlbWUgOiBcImluaGVyaXRcIjtcclxuXHRcdFx0dGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKCBcInVpLWJhci1cIiArIGN1cnJlbnRUaGVtZSApO1xyXG5cclxuXHRcdFx0dGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKCBcInVpLVwiICsgdGhpcy5yb2xlICkucmVtb3ZlQXR0ciggXCJyb2xlXCIgKTtcclxuXHRcdH1cclxuXHR9KTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxuXHQkLndpZGdldCggXCJtb2JpbGUudG9vbGJhclwiLCAkLm1vYmlsZS50b29sYmFyLCB7XHJcblx0XHRvcHRpb25zOiB7XHJcblx0XHRcdHBvc2l0aW9uOm51bGwsXHJcblx0XHRcdHZpc2libGVPblBhZ2VTaG93OiB0cnVlLFxyXG5cdFx0XHRkaXNhYmxlUGFnZVpvb206IHRydWUsXHJcblx0XHRcdHRyYW5zaXRpb246IFwic2xpZGVcIiwgLy9jYW4gYmUgbm9uZSwgZmFkZSwgc2xpZGUgKHNsaWRlIG1hcHMgdG8gc2xpZGV1cCBvciBzbGlkZWRvd24pXHJcblx0XHRcdGZ1bGxzY3JlZW46IGZhbHNlLFxyXG5cdFx0XHR0YXBUb2dnbGU6IHRydWUsXHJcblx0XHRcdHRhcFRvZ2dsZUJsYWNrbGlzdDogXCJhLCBidXR0b24sIGlucHV0LCBzZWxlY3QsIHRleHRhcmVhLCAudWktaGVhZGVyLWZpeGVkLCAudWktZm9vdGVyLWZpeGVkLCAudWktZmxpcHN3aXRjaCwgLnVpLXBvcHVwLCAudWktcGFuZWwsIC51aS1wYW5lbC1kaXNtaXNzLW9wZW5cIixcclxuXHRcdFx0aGlkZUR1cmluZ0ZvY3VzOiBcImlucHV0LCB0ZXh0YXJlYSwgc2VsZWN0XCIsXHJcblx0XHRcdHVwZGF0ZVBhZ2VQYWRkaW5nOiB0cnVlLFxyXG5cdFx0XHR0cmFja1BlcnNpc3RlbnRUb29sYmFyczogdHJ1ZSxcclxuXHJcblx0XHRcdC8vIEJyb3dzZXIgZGV0ZWN0aW9uISBXZWVlZSwgaGVyZSB3ZSBnby4uLlxyXG5cdFx0XHQvLyBVbmZvcnR1bmF0ZWx5LCBwb3NpdGlvbjpmaXhlZCBpcyBjb3N0bHksIG5vdCB0byBtZW50aW9uIHByb2JhYmx5IGltcG9zc2libGUsIHRvIGZlYXR1cmUtZGV0ZWN0IGFjY3VyYXRlbHkuXHJcblx0XHRcdC8vIFNvbWUgdGVzdHMgZXhpc3QsIGJ1dCB0aGV5IGN1cnJlbnRseSByZXR1cm4gZmFsc2UgcmVzdWx0cyBpbiBjcml0aWNhbCBkZXZpY2VzIGFuZCBicm93c2Vycywgd2hpY2ggY291bGQgbGVhZCB0byBhIGJyb2tlbiBleHBlcmllbmNlLlxyXG5cdFx0XHQvLyBUZXN0aW5nIGZpeGVkIHBvc2l0aW9uaW5nIGlzIGFsc28gcHJldHR5IG9idHJ1c2l2ZSB0byBwYWdlIGxvYWQsIHJlcXVpcmluZyBpbmplY3RlZCBlbGVtZW50cyBhbmQgc2Nyb2xsaW5nIHRoZSB3aW5kb3dcclxuXHRcdFx0Ly8gVGhlIGZvbGxvd2luZyBmdW5jdGlvbiBzZXJ2ZXMgdG8gcnVsZSBvdXQgc29tZSBwb3B1bGFyIGJyb3dzZXJzIHdpdGgga25vd24gZml4ZWQtcG9zaXRpb25pbmcgaXNzdWVzXHJcblx0XHRcdC8vIFRoaXMgaXMgYSBwbHVnaW4gb3B0aW9uIGxpa2UgYW55IG90aGVyLCBzbyBmZWVsIGZyZWUgdG8gaW1wcm92ZSBvciBvdmVyd3JpdGUgaXRcclxuXHRcdFx0c3VwcG9ydEJsYWNrbGlzdDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0cmV0dXJuICEkLnN1cHBvcnQuZml4ZWRQb3NpdGlvbjtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHJcblx0XHRfY3JlYXRlOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dGhpcy5fc3VwZXIoKTtcclxuXHRcdFx0dGhpcy5wYWdlY29udGFpbmVyID0gJCggXCI6bW9iaWxlLXBhZ2Vjb250YWluZXJcIiApO1xyXG5cdFx0XHRpZiAoIHRoaXMub3B0aW9ucy5wb3NpdGlvbiA9PT0gXCJmaXhlZFwiICYmICF0aGlzLm9wdGlvbnMuc3VwcG9ydEJsYWNrbGlzdCgpICkge1xyXG5cdFx0XHRcdHRoaXMuX21ha2VGaXhlZCgpO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHRcdF9tYWtlRml4ZWQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoIFwidWktXCIrIHRoaXMucm9sZSArXCItZml4ZWRcIiApO1xyXG5cdFx0XHR0aGlzLnVwZGF0ZVBhZ2VQYWRkaW5nKCk7XHJcblx0XHRcdHRoaXMuX2FkZFRyYW5zaXRpb25DbGFzcygpO1xyXG5cdFx0XHR0aGlzLl9iaW5kUGFnZUV2ZW50cygpO1xyXG5cdFx0XHR0aGlzLl9iaW5kVG9nZ2xlSGFuZGxlcnMoKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X3NldE9wdGlvbnM6IGZ1bmN0aW9uKCBvICkge1xyXG5cdFx0XHRpZiAoIG8ucG9zaXRpb24gPT09IFwiZml4ZWRcIiAmJiB0aGlzLm9wdGlvbnMucG9zaXRpb24gIT09IFwiZml4ZWRcIiApIHtcclxuXHRcdFx0XHR0aGlzLl9tYWtlRml4ZWQoKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoIHRoaXMub3B0aW9ucy5wb3NpdGlvbiA9PT0gXCJmaXhlZFwiICYmICF0aGlzLm9wdGlvbnMuc3VwcG9ydEJsYWNrbGlzdCgpICkge1xyXG5cdFx0XHRcdHZhciAkcGFnZSA9ICggISF0aGlzLnBhZ2UgKT8gdGhpcy5wYWdlOiAoICQoXCIudWktcGFnZS1hY3RpdmVcIikubGVuZ3RoID4gMCApPyAkKFwiLnVpLXBhZ2UtYWN0aXZlXCIpOiAkKFwiLnVpLXBhZ2VcIikuZXEoMCk7XHJcblxyXG5cdFx0XHRcdGlmICggby5mdWxsc2NyZWVuICE9PSB1bmRlZmluZWQpIHtcclxuXHRcdFx0XHRcdGlmICggby5mdWxsc2NyZWVuICkge1xyXG5cdFx0XHRcdFx0XHR0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoIFwidWktXCIrIHRoaXMucm9sZSArXCItZnVsbHNjcmVlblwiICk7XHJcblx0XHRcdFx0XHRcdCRwYWdlLmFkZENsYXNzKCBcInVpLXBhZ2UtXCIgKyB0aGlzLnJvbGUgKyBcIi1mdWxsc2NyZWVuXCIgKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdC8vIElmIG5vdCBmdWxsc2NyZWVuLCBhZGQgY2xhc3MgdG8gcGFnZSB0byBzZXQgdG9wIG9yIGJvdHRvbSBwYWRkaW5nXHJcblx0XHRcdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRcdFx0dGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKCBcInVpLVwiKyB0aGlzLnJvbGUgK1wiLWZ1bGxzY3JlZW5cIiApO1xyXG5cdFx0XHRcdFx0XHQkcGFnZS5yZW1vdmVDbGFzcyggXCJ1aS1wYWdlLVwiICsgdGhpcy5yb2xlICsgXCItZnVsbHNjcmVlblwiICkuYWRkQ2xhc3MoIFwidWktcGFnZS1cIiArIHRoaXMucm9sZSsgXCItZml4ZWRcIiApO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHR0aGlzLl9zdXBlcihvKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X2FkZFRyYW5zaXRpb25DbGFzczogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciB0Y2xhc3MgPSB0aGlzLm9wdGlvbnMudHJhbnNpdGlvbjtcclxuXHJcblx0XHRcdGlmICggdGNsYXNzICYmIHRjbGFzcyAhPT0gXCJub25lXCIgKSB7XHJcblx0XHRcdFx0Ly8gdXNlIGFwcHJvcHJpYXRlIHNsaWRlIGZvciBoZWFkZXIgb3IgZm9vdGVyXHJcblx0XHRcdFx0aWYgKCB0Y2xhc3MgPT09IFwic2xpZGVcIiApIHtcclxuXHRcdFx0XHRcdHRjbGFzcyA9IHRoaXMuZWxlbWVudC5oYXNDbGFzcyggXCJ1aS1oZWFkZXJcIiApID8gXCJzbGlkZWRvd25cIiA6IFwic2xpZGV1cFwiO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0dGhpcy5lbGVtZW50LmFkZENsYXNzKCB0Y2xhc3MgKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHJcblx0XHRfYmluZFBhZ2VFdmVudHM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgcGFnZSA9ICggISF0aGlzLnBhZ2UgKT8gdGhpcy5lbGVtZW50LmNsb3Nlc3QoIFwiLnVpLXBhZ2VcIiApOiB0aGlzLmRvY3VtZW50O1xyXG5cdFx0XHQvL3BhZ2UgZXZlbnQgYmluZGluZ3NcclxuXHRcdFx0Ly8gRml4ZWQgdG9vbGJhcnMgcmVxdWlyZSBwYWdlIHpvb20gdG8gYmUgZGlzYWJsZWQsIG90aGVyd2lzZSB1c2FiaWxpdHkgaXNzdWVzIGNyb3AgdXBcclxuXHRcdFx0Ly8gVGhpcyBtZXRob2QgaXMgbWVhbnQgdG8gZGlzYWJsZSB6b29tIHdoaWxlIGEgZml4ZWQtcG9zaXRpb25lZCB0b29sYmFyIHBhZ2UgaXMgdmlzaWJsZVxyXG5cdFx0XHR0aGlzLl9vbiggcGFnZSAsIHtcclxuXHRcdFx0XHRcInBhZ2ViZWZvcmVzaG93XCI6IFwiX2hhbmRsZVBhZ2VCZWZvcmVTaG93XCIsXHJcblx0XHRcdFx0XCJ3ZWJraXRBbmltYXRpb25TdGFydFwiOlwiX2hhbmRsZUFuaW1hdGlvblN0YXJ0XCIsXHJcblx0XHRcdFx0XCJhbmltYXRpb25zdGFydFwiOlwiX2hhbmRsZUFuaW1hdGlvblN0YXJ0XCIsXHJcblx0XHRcdFx0XCJ1cGRhdGVsYXlvdXRcIjogXCJfaGFuZGxlQW5pbWF0aW9uU3RhcnRcIixcclxuXHRcdFx0XHRcInBhZ2VzaG93XCI6IFwiX2hhbmRsZVBhZ2VTaG93XCIsXHJcblx0XHRcdFx0XCJwYWdlYmVmb3JlaGlkZVwiOiBcIl9oYW5kbGVQYWdlQmVmb3JlSGlkZVwiXHJcblx0XHRcdH0pO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfaGFuZGxlUGFnZUJlZm9yZVNob3c6IGZ1bmN0aW9uKCApIHtcclxuXHRcdFx0dmFyIG8gPSB0aGlzLm9wdGlvbnM7XHJcblx0XHRcdGlmICggby5kaXNhYmxlUGFnZVpvb20gKSB7XHJcblx0XHRcdFx0JC5tb2JpbGUuem9vbS5kaXNhYmxlKCB0cnVlICk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKCAhby52aXNpYmxlT25QYWdlU2hvdyApIHtcclxuXHRcdFx0XHR0aGlzLmhpZGUoIHRydWUgKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHJcblx0XHRfaGFuZGxlQW5pbWF0aW9uU3RhcnQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpZiAoIHRoaXMub3B0aW9ucy51cGRhdGVQYWdlUGFkZGluZyApIHtcclxuXHRcdFx0XHR0aGlzLnVwZGF0ZVBhZ2VQYWRkaW5nKCAoICEhdGhpcy5wYWdlICk/IHRoaXMucGFnZTogXCIudWktcGFnZS1hY3RpdmVcIiApO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHRcdF9oYW5kbGVQYWdlU2hvdzogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHRoaXMudXBkYXRlUGFnZVBhZGRpbmcoICggISF0aGlzLnBhZ2UgKT8gdGhpcy5wYWdlOiBcIi51aS1wYWdlLWFjdGl2ZVwiICk7XHJcblx0XHRcdGlmICggdGhpcy5vcHRpb25zLnVwZGF0ZVBhZ2VQYWRkaW5nICkge1xyXG5cdFx0XHRcdHRoaXMuX29uKCB0aGlzLndpbmRvdywgeyBcInRocm90dGxlZHJlc2l6ZVwiOiBcInVwZGF0ZVBhZ2VQYWRkaW5nXCIgfSApO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHRcdF9oYW5kbGVQYWdlQmVmb3JlSGlkZTogZnVuY3Rpb24oIGUsIHVpICkge1xyXG5cdFx0XHR2YXIgbyA9IHRoaXMub3B0aW9ucyxcclxuXHRcdFx0XHR0aGlzRm9vdGVyLCB0aGlzSGVhZGVyLCBuZXh0Rm9vdGVyLCBuZXh0SGVhZGVyO1xyXG5cclxuXHRcdFx0aWYgKCBvLmRpc2FibGVQYWdlWm9vbSApIHtcclxuXHRcdFx0XHQkLm1vYmlsZS56b29tLmVuYWJsZSggdHJ1ZSApO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICggby51cGRhdGVQYWdlUGFkZGluZyApIHtcclxuXHRcdFx0XHR0aGlzLl9vZmYoIHRoaXMud2luZG93LCBcInRocm90dGxlZHJlc2l6ZVwiICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICggby50cmFja1BlcnNpc3RlbnRUb29sYmFycyApIHtcclxuXHRcdFx0XHR0aGlzRm9vdGVyID0gJCggXCIudWktZm9vdGVyLWZpeGVkOmpxbURhdGEoaWQpXCIsIHRoaXMucGFnZSApO1xyXG5cdFx0XHRcdHRoaXNIZWFkZXIgPSAkKCBcIi51aS1oZWFkZXItZml4ZWQ6anFtRGF0YShpZClcIiwgdGhpcy5wYWdlICk7XHJcblx0XHRcdFx0bmV4dEZvb3RlciA9IHRoaXNGb290ZXIubGVuZ3RoICYmIHVpLm5leHRQYWdlICYmICQoIFwiLnVpLWZvb3Rlci1maXhlZDpqcW1EYXRhKGlkPSdcIiArIHRoaXNGb290ZXIuanFtRGF0YSggXCJpZFwiICkgKyBcIicpXCIsIHVpLm5leHRQYWdlICkgfHwgJCgpO1xyXG5cdFx0XHRcdG5leHRIZWFkZXIgPSB0aGlzSGVhZGVyLmxlbmd0aCAmJiB1aS5uZXh0UGFnZSAmJiAkKCBcIi51aS1oZWFkZXItZml4ZWQ6anFtRGF0YShpZD0nXCIgKyB0aGlzSGVhZGVyLmpxbURhdGEoIFwiaWRcIiApICsgXCInKVwiLCB1aS5uZXh0UGFnZSApIHx8ICQoKTtcclxuXHJcblx0XHRcdFx0aWYgKCBuZXh0Rm9vdGVyLmxlbmd0aCB8fCBuZXh0SGVhZGVyLmxlbmd0aCApIHtcclxuXHJcblx0XHRcdFx0XHRuZXh0Rm9vdGVyLmFkZCggbmV4dEhlYWRlciApLmFwcGVuZFRvKCAkLm1vYmlsZS5wYWdlQ29udGFpbmVyICk7XHJcblxyXG5cdFx0XHRcdFx0dWkubmV4dFBhZ2Uub25lKCBcInBhZ2VzaG93XCIsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0XHRuZXh0SGVhZGVyLnByZXBlbmRUbyggdGhpcyApO1xyXG5cdFx0XHRcdFx0XHRuZXh0Rm9vdGVyLmFwcGVuZFRvKCB0aGlzICk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblxyXG5cdFx0X3Zpc2libGU6IHRydWUsXHJcblxyXG5cdFx0Ly8gVGhpcyB3aWxsIHNldCB0aGUgY29udGVudCBlbGVtZW50J3MgdG9wIG9yIGJvdHRvbSBwYWRkaW5nIGVxdWFsIHRvIHRoZSB0b29sYmFyJ3MgaGVpZ2h0XHJcblx0XHR1cGRhdGVQYWdlUGFkZGluZzogZnVuY3Rpb24oIHRiUGFnZSApIHtcclxuXHRcdFx0dmFyICRlbCA9IHRoaXMuZWxlbWVudCxcclxuXHRcdFx0XHRoZWFkZXIgPSAoIHRoaXMucm9sZSA9PT1cImhlYWRlclwiICksXHJcblx0XHRcdFx0cG9zID0gcGFyc2VGbG9hdCggJGVsLmNzcyggaGVhZGVyID8gXCJ0b3BcIiA6IFwiYm90dG9tXCIgKSApO1xyXG5cclxuXHRcdFx0Ly8gVGhpcyBiZWhhdmlvciBvbmx5IGFwcGxpZXMgdG8gXCJmaXhlZFwiLCBub3QgXCJmdWxsc2NyZWVuXCJcclxuXHRcdFx0aWYgKCB0aGlzLm9wdGlvbnMuZnVsbHNjcmVlbiApIHsgcmV0dXJuOyB9XHJcblx0XHRcdC8vIHRiUGFnZSBhcmd1bWVudCBjYW4gYmUgYSBQYWdlIG9iamVjdCBvciBhbiBldmVudCwgaWYgY29taW5nIGZyb20gdGhyb3R0bGVkIHJlc2l6ZS5cclxuXHRcdFx0dGJQYWdlID0gKCB0YlBhZ2UgJiYgdGJQYWdlLnR5cGUgPT09IHVuZGVmaW5lZCAmJiB0YlBhZ2UgKSB8fCB0aGlzLnBhZ2UgfHwgJGVsLmNsb3Nlc3QoIFwiLnVpLXBhZ2VcIiApO1xyXG5cdFx0XHR0YlBhZ2UgPSAoICEhdGhpcy5wYWdlICk/IHRoaXMucGFnZTogXCIudWktcGFnZS1hY3RpdmVcIjtcclxuXHRcdFx0JCggdGJQYWdlICkuY3NzKCBcInBhZGRpbmctXCIgKyAoIGhlYWRlciA/IFwidG9wXCIgOiBcImJvdHRvbVwiICksICRlbC5vdXRlckhlaWdodCgpICsgcG9zICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF91c2VUcmFuc2l0aW9uOiBmdW5jdGlvbiggbm90cmFuc2l0aW9uICkge1xyXG5cdFx0XHR2YXIgJHdpbiA9IHRoaXMud2luZG93LFxyXG5cdFx0XHRcdCRlbCA9IHRoaXMuZWxlbWVudCxcclxuXHRcdFx0XHRzY3JvbGwgPSAkd2luLnNjcm9sbFRvcCgpLFxyXG5cdFx0XHRcdGVsSGVpZ2h0ID0gJGVsLmhlaWdodCgpLFxyXG5cdFx0XHRcdHBIZWlnaHQgPSAoICEhdGhpcy5wYWdlICk/ICRlbC5jbG9zZXN0KCBcIi51aS1wYWdlXCIgKS5oZWlnaHQoKTokKFwiLnVpLXBhZ2UtYWN0aXZlXCIpLmhlaWdodCgpLFxyXG5cdFx0XHRcdHZpZXdwb3J0SGVpZ2h0ID0gJC5tb2JpbGUuZ2V0U2NyZWVuSGVpZ2h0KCk7XHJcblxyXG5cdFx0XHRyZXR1cm4gIW5vdHJhbnNpdGlvbiAmJlxyXG5cdFx0XHRcdCggdGhpcy5vcHRpb25zLnRyYW5zaXRpb24gJiYgdGhpcy5vcHRpb25zLnRyYW5zaXRpb24gIT09IFwibm9uZVwiICYmXHJcblx0XHRcdFx0KFxyXG5cdFx0XHRcdFx0KCB0aGlzLnJvbGUgPT09IFwiaGVhZGVyXCIgJiYgIXRoaXMub3B0aW9ucy5mdWxsc2NyZWVuICYmIHNjcm9sbCA+IGVsSGVpZ2h0ICkgfHxcclxuXHRcdFx0XHRcdCggdGhpcy5yb2xlID09PSBcImZvb3RlclwiICYmICF0aGlzLm9wdGlvbnMuZnVsbHNjcmVlbiAmJiBzY3JvbGwgKyB2aWV3cG9ydEhlaWdodCA8IHBIZWlnaHQgLSBlbEhlaWdodCApXHJcblx0XHRcdFx0KSB8fCB0aGlzLm9wdGlvbnMuZnVsbHNjcmVlblxyXG5cdFx0XHRcdCk7XHJcblx0XHR9LFxyXG5cclxuXHRcdHNob3c6IGZ1bmN0aW9uKCBub3RyYW5zaXRpb24gKSB7XHJcblx0XHRcdHZhciBoaWRlQ2xhc3MgPSBcInVpLWZpeGVkLWhpZGRlblwiLFxyXG5cdFx0XHRcdCRlbCA9IHRoaXMuZWxlbWVudDtcclxuXHJcblx0XHRcdGlmICggdGhpcy5fdXNlVHJhbnNpdGlvbiggbm90cmFuc2l0aW9uICkgKSB7XHJcblx0XHRcdFx0JGVsXHJcblx0XHRcdFx0XHQucmVtb3ZlQ2xhc3MoIFwib3V0IFwiICsgaGlkZUNsYXNzIClcclxuXHRcdFx0XHRcdC5hZGRDbGFzcyggXCJpblwiIClcclxuXHRcdFx0XHRcdC5hbmltYXRpb25Db21wbGV0ZShmdW5jdGlvbiAoKSB7XHJcblx0XHRcdFx0XHRcdCRlbC5yZW1vdmVDbGFzcyggXCJpblwiICk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIHtcclxuXHRcdFx0XHQkZWwucmVtb3ZlQ2xhc3MoIGhpZGVDbGFzcyApO1xyXG5cdFx0XHR9XHJcblx0XHRcdHRoaXMuX3Zpc2libGUgPSB0cnVlO1xyXG5cdFx0fSxcclxuXHJcblx0XHRoaWRlOiBmdW5jdGlvbiggbm90cmFuc2l0aW9uICkge1xyXG5cdFx0XHR2YXIgaGlkZUNsYXNzID0gXCJ1aS1maXhlZC1oaWRkZW5cIixcclxuXHRcdFx0XHQkZWwgPSB0aGlzLmVsZW1lbnQsXHJcblx0XHRcdFx0Ly8gaWYgaXQncyBhIHNsaWRlIHRyYW5zaXRpb24sIG91ciBuZXcgdHJhbnNpdGlvbnMgbmVlZCB0aGUgcmV2ZXJzZSBjbGFzcyBhcyB3ZWxsIHRvIHNsaWRlIG91dHdhcmRcclxuXHRcdFx0XHRvdXRjbGFzcyA9IFwib3V0XCIgKyAoIHRoaXMub3B0aW9ucy50cmFuc2l0aW9uID09PSBcInNsaWRlXCIgPyBcIiByZXZlcnNlXCIgOiBcIlwiICk7XHJcblxyXG5cdFx0XHRpZiAoIHRoaXMuX3VzZVRyYW5zaXRpb24oIG5vdHJhbnNpdGlvbiApICkge1xyXG5cdFx0XHRcdCRlbFxyXG5cdFx0XHRcdFx0LmFkZENsYXNzKCBvdXRjbGFzcyApXHJcblx0XHRcdFx0XHQucmVtb3ZlQ2xhc3MoIFwiaW5cIiApXHJcblx0XHRcdFx0XHQuYW5pbWF0aW9uQ29tcGxldGUoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRcdCRlbC5hZGRDbGFzcyggaGlkZUNsYXNzICkucmVtb3ZlQ2xhc3MoIG91dGNsYXNzICk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIHtcclxuXHRcdFx0XHQkZWwuYWRkQ2xhc3MoIGhpZGVDbGFzcyApLnJlbW92ZUNsYXNzKCBvdXRjbGFzcyApO1xyXG5cdFx0XHR9XHJcblx0XHRcdHRoaXMuX3Zpc2libGUgPSBmYWxzZTtcclxuXHRcdH0sXHJcblxyXG5cdFx0dG9nZ2xlOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dGhpc1sgdGhpcy5fdmlzaWJsZSA/IFwiaGlkZVwiIDogXCJzaG93XCIgXSgpO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfYmluZFRvZ2dsZUhhbmRsZXJzOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzLFxyXG5cdFx0XHRcdG8gPSBzZWxmLm9wdGlvbnMsXHJcblx0XHRcdFx0ZGVsYXlTaG93LCBkZWxheUhpZGUsXHJcblx0XHRcdFx0aXNWaXNpYmxlID0gdHJ1ZSxcclxuXHRcdFx0XHRwYWdlID0gKCAhIXRoaXMucGFnZSApPyB0aGlzLnBhZ2U6ICQoXCIudWktcGFnZVwiKTtcclxuXHJcblx0XHRcdC8vIHRhcCB0b2dnbGVcclxuXHRcdFx0cGFnZVxyXG5cdFx0XHRcdC5iaW5kKCBcInZjbGlja1wiLCBmdW5jdGlvbiggZSApIHtcclxuXHRcdFx0XHRcdGlmICggby50YXBUb2dnbGUgJiYgISQoIGUudGFyZ2V0ICkuY2xvc2VzdCggby50YXBUb2dnbGVCbGFja2xpc3QgKS5sZW5ndGggKSB7XHJcblx0XHRcdFx0XHRcdHNlbGYudG9nZ2xlKCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSlcclxuXHRcdFx0XHQuYmluZCggXCJmb2N1c2luIGZvY3Vzb3V0XCIsIGZ1bmN0aW9uKCBlICkge1xyXG5cdFx0XHRcdFx0Ly90aGlzIGhpZGVzIHRoZSB0b29sYmFycyBvbiBhIGtleWJvYXJkIHBvcCB0byBnaXZlIG1vcmUgc2NyZWVuIHJvb20gYW5kIHByZXZlbnQgaW9zIGJ1ZyB3aGljaFxyXG5cdFx0XHRcdFx0Ly9wb3NpdGlvbnMgZml4ZWQgdG9vbGJhcnMgaW4gdGhlIG1pZGRsZSBvZiB0aGUgc2NyZWVuIG9uIHBvcCBpZiB0aGUgaW5wdXQgaXMgbmVhciB0aGUgdG9wIG9yXHJcblx0XHRcdFx0XHQvL2JvdHRvbSBvZiB0aGUgc2NyZWVuIGFkZHJlc3NlcyBpc3N1ZXMgIzQ0MTAgRm9vdGVyIG5hdmJhciBtb3ZlcyB1cCB3aGVuIGNsaWNraW5nIG9uIGEgdGV4dGJveCBpbiBhbiBBbmRyb2lkIGVudmlyb25tZW50XHJcblx0XHRcdFx0XHQvL2FuZCBpc3N1ZSAjNDExMyBIZWFkZXIgYW5kIGZvb3RlciBjaGFuZ2UgdGhlaXIgcG9zaXRpb24gYWZ0ZXIga2V5Ym9hcmQgcG9wdXAgLSBpT1NcclxuXHRcdFx0XHRcdC8vYW5kIGlzc3VlICM0NDEwIEZvb3RlciBuYXZiYXIgbW92ZXMgdXAgd2hlbiBjbGlja2luZyBvbiBhIHRleHRib3ggaW4gYW4gQW5kcm9pZCBlbnZpcm9ubWVudFxyXG5cdFx0XHRcdFx0aWYgKCBzY3JlZW4ud2lkdGggPCAxMDI1ICYmICQoIGUudGFyZ2V0ICkuaXMoIG8uaGlkZUR1cmluZ0ZvY3VzICkgJiYgISQoIGUudGFyZ2V0ICkuY2xvc2VzdCggXCIudWktaGVhZGVyLWZpeGVkLCAudWktZm9vdGVyLWZpeGVkXCIgKS5sZW5ndGggKSB7XHJcblx0XHRcdFx0XHRcdC8vRml4IGZvciBpc3N1ZSAjNDcyNCBNb3ZpbmcgdGhyb3VnaCBmb3JtIGluIE1vYmlsZSBTYWZhcmkgd2l0aCBcIk5leHRcIiBhbmQgXCJQcmV2aW91c1wiIHN5c3RlbVxyXG5cdFx0XHRcdFx0XHQvL2NvbnRyb2xzIGNhdXNlcyBmaXhlZCBwb3NpdGlvbiwgdGFwLXRvZ2dsZSBmYWxzZSBIZWFkZXIgdG8gcmV2ZWFsIGl0c2VsZlxyXG5cdFx0XHRcdFx0XHQvLyBpc1Zpc2libGUgaW5zdGVhZCBvZiBzZWxmLl92aXNpYmxlIGJlY2F1c2UgdGhlIGZvY3VzaW4gYW5kIGZvY3Vzb3V0IGV2ZW50cyBmaXJlIHR3aWNlIGF0IHRoZSBzYW1lIHRpbWVcclxuXHRcdFx0XHRcdFx0Ly8gQWxzbyB1c2UgYSBkZWxheSBmb3IgaGlkaW5nIHRoZSB0b29sYmFycyBiZWNhdXNlIG9uIEFuZHJvaWQgbmF0aXZlIGJyb3dzZXIgZm9jdXNpbiBpcyBkaXJlY2x0eSBmb2xsb3dlZFxyXG5cdFx0XHRcdFx0XHQvLyBieSBhIGZvY3Vzb3V0IHdoZW4gYSBuYXRpdmUgc2VsZWN0cyBvcGVucyBhbmQgdGhlIG90aGVyIHdheSBhcm91bmQgd2hlbiBpdCBjbG9zZXMuXHJcblx0XHRcdFx0XHRcdGlmICggZS50eXBlID09PSBcImZvY3Vzb3V0XCIgJiYgIWlzVmlzaWJsZSApIHtcclxuXHRcdFx0XHRcdFx0XHRpc1Zpc2libGUgPSB0cnVlO1xyXG5cdFx0XHRcdFx0XHRcdC8vd2FpdCBmb3IgdGhlIHN0YWNrIHRvIHVud2luZCBhbmQgc2VlIGlmIHdlIGhhdmUganVtcGVkIHRvIGFub3RoZXIgaW5wdXRcclxuXHRcdFx0XHRcdFx0XHRjbGVhclRpbWVvdXQoIGRlbGF5SGlkZSApO1xyXG5cdFx0XHRcdFx0XHRcdGRlbGF5U2hvdyA9IHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0c2VsZi5zaG93KCk7XHJcblx0XHRcdFx0XHRcdFx0fSwgMCApO1xyXG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKCBlLnR5cGUgPT09IFwiZm9jdXNpblwiICYmICEhaXNWaXNpYmxlICkge1xyXG5cdFx0XHRcdFx0XHRcdC8vaWYgd2UgaGF2ZSBqdW1wZWQgdG8gYW5vdGhlciBpbnB1dCBjbGVhciB0aGUgdGltZSBvdXQgdG8gY2FuY2VsIHRoZSBzaG93LlxyXG5cdFx0XHRcdFx0XHRcdGNsZWFyVGltZW91dCggZGVsYXlTaG93ICk7XHJcblx0XHRcdFx0XHRcdFx0aXNWaXNpYmxlID0gZmFsc2U7XHJcblx0XHRcdFx0XHRcdFx0ZGVsYXlIaWRlID0gc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRzZWxmLmhpZGUoKTtcclxuXHRcdFx0XHRcdFx0XHR9LCAwICk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X3NldFJlbGF0aXZlOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0aWYoIHRoaXMub3B0aW9ucy5wb3NpdGlvbiAhPT0gXCJmaXhlZFwiICl7XHJcblx0XHRcdFx0JCggXCJbZGF0YS1cIisgJC5tb2JpbGUubnMgKyBcInJvbGU9J3BhZ2UnXVwiICkuY3NzKHsgXCJwb3NpdGlvblwiOiBcInJlbGF0aXZlXCIgfSk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblxyXG5cdFx0X2Rlc3Ryb3k6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgcGFnZUNsYXNzZXMsIHRvb2xiYXJDbGFzc2VzLCBoYXNGaXhlZCwgaGVhZGVyLCBoYXNGdWxsc2NyZWVuLFxyXG5cdFx0XHRcdHBhZ2UgPSB0aGlzLnBhZ2Vjb250YWluZXIucGFnZWNvbnRhaW5lciggXCJnZXRBY3RpdmVQYWdlXCIgKTtcclxuXHJcblx0XHRcdHRoaXMuX3N1cGVyKCk7XHJcblx0XHRcdGlmICggdGhpcy5vcHRpb25zLnBvc2l0aW9uID09PSBcImZpeGVkXCIgKSB7XHJcblx0XHRcdFx0aGFzRml4ZWQgPSAkKCAgXCJib2R5Pi51aS1cIiArIHRoaXMucm9sZSArIFwiLWZpeGVkXCIgKVxyXG5cdFx0XHRcdFx0XHRcdC5hZGQoIHBhZ2UuZmluZCggXCIudWktXCIgKyB0aGlzLm9wdGlvbnMucm9sZSArIFwiLWZpeGVkXCIgKSApXHJcblx0XHRcdFx0XHRcdFx0Lm5vdCggdGhpcy5lbGVtZW50ICkubGVuZ3RoID4gMDtcclxuXHRcdFx0XHRoYXNGdWxsc2NyZWVuID0gJCggIFwiYm9keT4udWktXCIgKyB0aGlzLnJvbGUgKyBcIi1maXhlZFwiIClcclxuXHRcdFx0XHRcdFx0XHQuYWRkKCBwYWdlLmZpbmQoIFwiLnVpLVwiICsgdGhpcy5vcHRpb25zLnJvbGUgKyBcIi1mdWxsc2NyZWVuXCIgKSApXHJcblx0XHRcdFx0XHRcdFx0Lm5vdCggdGhpcy5lbGVtZW50ICkubGVuZ3RoID4gMDtcclxuXHRcdFx0XHR0b29sYmFyQ2xhc3NlcyA9ICBcInVpLWhlYWRlci1maXhlZCB1aS1mb290ZXItZml4ZWQgdWktaGVhZGVyLWZ1bGxzY3JlZW4gaW4gb3V0XCIgK1xyXG5cdFx0XHRcdFx0XCIgdWktZm9vdGVyLWZ1bGxzY3JlZW4gZmFkZSBzbGlkZWRvd24gc2xpZGV1cCB1aS1maXhlZC1oaWRkZW5cIjtcclxuXHRcdFx0XHR0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3MoIHRvb2xiYXJDbGFzc2VzICk7XHJcblx0XHRcdFx0aWYgKCAhaGFzRnVsbHNjcmVlbiApIHtcclxuXHRcdFx0XHRcdHBhZ2VDbGFzc2VzID0gXCJ1aS1wYWdlLVwiICsgdGhpcy5yb2xlICsgXCItZnVsbHNjcmVlblwiO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZiAoICFoYXNGaXhlZCApIHtcclxuXHRcdFx0XHRcdGhlYWRlciA9IHRoaXMucm9sZSA9PT0gXCJoZWFkZXJcIjtcclxuXHRcdFx0XHRcdHBhZ2VDbGFzc2VzICs9IFwiIHVpLXBhZ2UtXCIgKyB0aGlzLnJvbGUgKyBcIi1maXhlZFwiO1xyXG5cdFx0XHRcdFx0cGFnZS5jc3MoIFwicGFkZGluZy1cIiArICggaGVhZGVyID8gXCJ0b3BcIiA6IFwiYm90dG9tXCIgKSwgXCJcIiApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRwYWdlLnJlbW92ZUNsYXNzKCBwYWdlQ2xhc3NlcyApO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdH0pO1xyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHQkLndpZGdldCggXCJtb2JpbGUudG9vbGJhclwiLCAkLm1vYmlsZS50b29sYmFyLCB7XHJcblxyXG5cdFx0X21ha2VGaXhlZDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHRoaXMuX3N1cGVyKCk7XHJcblx0XHRcdHRoaXMuX3dvcmthcm91bmRzKCk7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vY2hlY2sgdGhlIGJyb3dzZXIgYW5kIHZlcnNpb24gYW5kIHJ1biBuZWVkZWQgd29ya2Fyb3VuZHNcclxuXHRcdF93b3JrYXJvdW5kczogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciB1YSA9IG5hdmlnYXRvci51c2VyQWdlbnQsXHJcblx0XHRcdHBsYXRmb3JtID0gbmF2aWdhdG9yLnBsYXRmb3JtLFxyXG5cdFx0XHQvLyBSZW5kZXJpbmcgZW5naW5lIGlzIFdlYmtpdCwgYW5kIGNhcHR1cmUgbWFqb3IgdmVyc2lvblxyXG5cdFx0XHR3a21hdGNoID0gdWEubWF0Y2goIC9BcHBsZVdlYktpdFxcLyhbMC05XSspLyApLFxyXG5cdFx0XHR3a3ZlcnNpb24gPSAhIXdrbWF0Y2ggJiYgd2ttYXRjaFsgMSBdLFxyXG5cdFx0XHRvcyA9IG51bGwsXHJcblx0XHRcdHNlbGYgPSB0aGlzO1xyXG5cdFx0XHQvL3NldCB0aGUgb3Mgd2UgYXJlIHdvcmtpbmcgaW4gaWYgaXQgZG9zZW50IG1hdGNoIG9uZSB3aXRoIHdvcmthcm91bmRzIHJldHVyblxyXG5cdFx0XHRpZiAoIHBsYXRmb3JtLmluZGV4T2YoIFwiaVBob25lXCIgKSA+IC0xIHx8IHBsYXRmb3JtLmluZGV4T2YoIFwiaVBhZFwiICkgPiAtMSAgfHwgcGxhdGZvcm0uaW5kZXhPZiggXCJpUG9kXCIgKSA+IC0xICkge1xyXG5cdFx0XHRcdG9zID0gXCJpb3NcIjtcclxuXHRcdFx0fSBlbHNlIGlmICggdWEuaW5kZXhPZiggXCJBbmRyb2lkXCIgKSA+IC0xICkge1xyXG5cdFx0XHRcdG9zID0gXCJhbmRyb2lkXCI7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblx0XHRcdC8vY2hlY2sgb3MgdmVyc2lvbiBpZiBpdCBkb3NlbnQgbWF0Y2ggb25lIHdpdGggd29ya2Fyb3VuZHMgcmV0dXJuXHJcblx0XHRcdGlmICggb3MgPT09IFwiaW9zXCIgKSB7XHJcblx0XHRcdFx0Ly9pT1MgIHdvcmthcm91bmRzXHJcblx0XHRcdFx0c2VsZi5fYmluZFNjcm9sbFdvcmthcm91bmQoKTtcclxuXHRcdFx0fSBlbHNlIGlmICggb3MgPT09IFwiYW5kcm9pZFwiICYmIHdrdmVyc2lvbiAmJiB3a3ZlcnNpb24gPCA1MzQgKSB7XHJcblx0XHRcdFx0Ly9BbmRyb2lkIDIuMyBydW4gYWxsIEFuZHJvaWQgMi4zIHdvcmthcm91bmRcclxuXHRcdFx0XHRzZWxmLl9iaW5kU2Nyb2xsV29ya2Fyb3VuZCgpO1xyXG5cdFx0XHRcdHNlbGYuX2JpbmRMaXN0VGh1bWJXb3JrYXJvdW5kKCk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vVXRpbGl0eSBjbGFzcyBmb3IgY2hlY2tpbmcgaGVhZGVyIGFuZCBmb290ZXIgcG9zaXRpb25zIHJlbGF0aXZlIHRvIHZpZXdwb3J0XHJcblx0XHRfdmlld3BvcnRPZmZzZXQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgJGVsID0gdGhpcy5lbGVtZW50LFxyXG5cdFx0XHRcdGhlYWRlciA9ICRlbC5oYXNDbGFzcyggXCJ1aS1oZWFkZXJcIiApLFxyXG5cdFx0XHRcdG9mZnNldCA9IE1hdGguYWJzKCAkZWwub2Zmc2V0KCkudG9wIC0gdGhpcy53aW5kb3cuc2Nyb2xsVG9wKCkgKTtcclxuXHRcdFx0aWYgKCAhaGVhZGVyICkge1xyXG5cdFx0XHRcdG9mZnNldCA9IE1hdGgucm91bmQoIG9mZnNldCAtIHRoaXMud2luZG93LmhlaWdodCgpICsgJGVsLm91dGVySGVpZ2h0KCkgKSAtIDYwO1xyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybiBvZmZzZXQ7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vYmluZCBldmVudHMgZm9yIF90cmlnZ2VyUmVkcmF3KCkgZnVuY3Rpb25cclxuXHRcdF9iaW5kU2Nyb2xsV29ya2Fyb3VuZDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBzZWxmID0gdGhpcztcclxuXHRcdFx0Ly9iaW5kIHRvIHNjcm9sbHN0b3AgYW5kIGNoZWNrIGlmIHRoZSB0b29sYmFycyBhcmUgY29ycmVjdGx5IHBvc2l0aW9uZWRcclxuXHRcdFx0dGhpcy5fb24oIHRoaXMud2luZG93LCB7IHNjcm9sbHN0b3A6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHZhciB2aWV3cG9ydE9mZnNldCA9IHNlbGYuX3ZpZXdwb3J0T2Zmc2V0KCk7XHJcblx0XHRcdFx0Ly9jaGVjayBpZiB0aGUgaGVhZGVyIGlzIHZpc2libGUgYW5kIGlmIGl0cyBpbiB0aGUgcmlnaHQgcGxhY2VcclxuXHRcdFx0XHRpZiAoIHZpZXdwb3J0T2Zmc2V0ID4gMiAmJiBzZWxmLl92aXNpYmxlICkge1xyXG5cdFx0XHRcdFx0c2VsZi5fdHJpZ2dlclJlZHJhdygpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fX0pO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvL3RoaXMgYWRkcmVzc2VzIGlzc3VlICM0MjUwIFBlcnNpc3RlbnQgZm9vdGVyIGluc3RhYmlsaXR5IGluIHYxLjEgd2l0aCBsb25nIHNlbGVjdCBsaXN0cyBpbiBBbmRyb2lkIDIuMy4zXHJcblx0XHQvL2FuZCBpc3N1ZSAjMzc0OCBBbmRyb2lkIDIueDogUGFnZSB0cmFuc2l0aW9ucyBicm9rZW4gd2hlbiBmaXhlZCB0b29sYmFycyB1c2VkXHJcblx0XHQvL3RoZSBhYnNvbHV0ZWx5IHBvc2l0aW9uZWQgdGh1bWJuYWlsIGluIGEgbGlzdCB2aWV3IGNhdXNlcyBwcm9ibGVtcyB3aXRoIGZpeGVkIHBvc2l0aW9uIGJ1dHRvbnMgYWJvdmUgaW4gYSBuYXYgYmFyXHJcblx0XHQvL3NldHRpbmcgdGhlIGxpJ3MgdG8gLXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlM2QoMCwwLDApOyBzb2x2ZXMgdGhpcyBwcm9ibGVtIHRvIGF2b2lkZSBwb3RlbnRpYWwgaXNzdWVzIGluIG90aGVyXHJcblx0XHQvL3BsYXRmb3JtcyB3ZSBzY29wZSB0aGlzIHdpdGggdGhlIGNsYXNzIHVpLWFuZHJvaWQtMngtZml4XHJcblx0XHRfYmluZExpc3RUaHVtYldvcmthcm91bmQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQuY2xvc2VzdCggXCIudWktcGFnZVwiICkuYWRkQ2xhc3MoIFwidWktYW5kcm9pZC0yeC1maXhlZFwiICk7XHJcblx0XHR9LFxyXG5cdFx0Ly90aGlzIGFkZHJlc3NlcyBpc3N1ZXMgIzQzMzcgRml4ZWQgaGVhZGVyIHByb2JsZW0gYWZ0ZXIgc2Nyb2xsaW5nIGNvbnRlbnQgb24gaU9TIGFuZCBBbmRyb2lkXHJcblx0XHQvL2FuZCBkZXZpY2UgYnVncyBwcm9qZWN0IGlzc3VlICMxIEZvcm0gZWxlbWVudHMgY2FuIGxvc2UgY2xpY2sgaGl0IGFyZWEgaW4gcG9zaXRpb246IGZpeGVkIGNvbnRhaW5lcnMuXHJcblx0XHQvL3RoaXMgYWxzbyBhZGRyZXNzZXMgbm90IG9uIGZpeGVkIHRvb2xiYXJzIHBhZ2UgaW4gZG9jc1xyXG5cdFx0Ly9hZGRpbmcgMXB4IG9mIHBhZGRpbmcgdG8gdGhlIGJvdHRvbSB0aGVuIHJlbW92aW5nIGl0IGNhdXNlcyBhIFwicmVkcmF3XCJcclxuXHRcdC8vd2hpY2ggcG9zaXRpb25zIHRoZSB0b29sYmFycyBjb3JyZWN0bHkgKHRoZXkgd2lsbCBhbHdheXMgYmUgdmlzdWFsbHkgY29ycmVjdClcclxuXHRcdF90cmlnZ2VyUmVkcmF3OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIHBhZGRpbmdCb3R0b20gPSBwYXJzZUZsb2F0KCAkKCBcIi51aS1wYWdlLWFjdGl2ZVwiICkuY3NzKCBcInBhZGRpbmctYm90dG9tXCIgKSApO1xyXG5cdFx0XHQvL3RyaWdnZXIgcGFnZSByZWRyYXcgdG8gZml4IGluY29ycmVjdGx5IHBvc2l0aW9uZWQgZml4ZWQgZWxlbWVudHNcclxuXHRcdFx0JCggXCIudWktcGFnZS1hY3RpdmVcIiApLmNzcyggXCJwYWRkaW5nLWJvdHRvbVwiLCAoIHBhZGRpbmdCb3R0b20gKyAxICkgKyBcInB4XCIgKTtcclxuXHRcdFx0Ly9pZiB0aGUgcGFkZGluZyBpcyByZXNldCB3aXRoIG91dCBhIHRpbWVvdXQgdGhlIHJlcG9zaXRpb24gd2lsbCBub3Qgb2NjdXJlLlxyXG5cdFx0XHQvL3RoaXMgaXMgaW5kZXBlbmRhbnQgb2YgSlFNIHRoZSBicm93c2VyIHNlZW1zIHRvIG5lZWQgdGhlIHRpbWUgdG8gcmVhY3QuXHJcblx0XHRcdHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdCQoIFwiLnVpLXBhZ2UtYWN0aXZlXCIgKS5jc3MoIFwicGFkZGluZy1ib3R0b21cIiwgcGFkZGluZ0JvdHRvbSArIFwicHhcIiApO1xyXG5cdFx0XHR9LCAwICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdGRlc3Ryb3k6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR0aGlzLl9zdXBlcigpO1xyXG5cdFx0XHQvL1JlbW92ZSB0aGUgY2xhc3Mgd2UgYWRkZWQgdG8gdGhlIHBhZ2UgcHJldmlvdXNseSBpbiBhbmRyb2lkIDIueFxyXG5cdFx0XHR0aGlzLmVsZW1lbnQuY2xvc2VzdCggXCIudWktcGFnZS1hY3RpdmVcIiApLnJlbW92ZUNsYXNzKCBcInVpLWFuZHJvaWQtMngtZml4XCIgKTtcclxuXHRcdH1cclxuXHR9KTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcblxyXG4oIGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG52YXIgaWVIYWNrID0gKCAkLm1vYmlsZS5icm93c2VyLm9sZElFICYmICQubW9iaWxlLmJyb3dzZXIub2xkSUUgPD0gOCApLFxyXG5cdHVpVGVtcGxhdGUgPSAkKFxyXG5cdFx0XCI8ZGl2IGNsYXNzPSd1aS1wb3B1cC1hcnJvdy1ndWlkZSc+PC9kaXY+XCIgK1xyXG5cdFx0XCI8ZGl2IGNsYXNzPSd1aS1wb3B1cC1hcnJvdy1jb250YWluZXJcIiArICggaWVIYWNrID8gXCIgaWVcIiA6IFwiXCIgKSArIFwiJz5cIiArXHJcblx0XHRcdFwiPGRpdiBjbGFzcz0ndWktcG9wdXAtYXJyb3cnPjwvZGl2PlwiICtcclxuXHRcdFwiPC9kaXY+XCJcclxuXHQpO1xyXG5cclxuZnVuY3Rpb24gZ2V0QXJyb3coKSB7XHJcblx0dmFyIGNsb25lID0gdWlUZW1wbGF0ZS5jbG9uZSgpLFxyXG5cdFx0Z2QgPSBjbG9uZS5lcSggMCApLFxyXG5cdFx0Y3QgPSBjbG9uZS5lcSggMSApLFxyXG5cdFx0YXIgPSBjdC5jaGlsZHJlbigpO1xyXG5cclxuXHRyZXR1cm4geyBhckVsczogY3QuYWRkKCBnZCApLCBnZDogZ2QsIGN0OiBjdCwgYXI6IGFyIH07XHJcbn1cclxuXHJcbiQud2lkZ2V0KCBcIm1vYmlsZS5wb3B1cFwiLCAkLm1vYmlsZS5wb3B1cCwge1xyXG5cdG9wdGlvbnM6IHtcclxuXHJcblx0XHRhcnJvdzogXCJcIlxyXG5cdH0sXHJcblxyXG5cdF9jcmVhdGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGFyLFxyXG5cdFx0XHRyZXQgPSB0aGlzLl9zdXBlcigpO1xyXG5cclxuXHRcdGlmICggdGhpcy5vcHRpb25zLmFycm93ICkge1xyXG5cdFx0XHR0aGlzLl91aS5hcnJvdyA9IGFyID0gdGhpcy5fYWRkQXJyb3coKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gcmV0O1xyXG5cdH0sXHJcblxyXG5cdF9hZGRBcnJvdzogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgdGhlbWUsXHJcblx0XHRcdG9wdHMgPSB0aGlzLm9wdGlvbnMsXHJcblx0XHRcdGFyID0gZ2V0QXJyb3coKTtcclxuXHJcblx0XHR0aGVtZSA9IHRoaXMuX3RoZW1lQ2xhc3NGcm9tT3B0aW9uKCBcInVpLWJvZHktXCIsIG9wdHMudGhlbWUgKTtcclxuXHRcdGFyLmFyLmFkZENsYXNzKCB0aGVtZSArICggb3B0cy5zaGFkb3cgPyBcIiB1aS1vdmVybGF5LXNoYWRvd1wiIDogXCJcIiApICk7XHJcblx0XHRhci5hckVscy5oaWRlKCkuYXBwZW5kVG8oIHRoaXMuZWxlbWVudCApO1xyXG5cclxuXHRcdHJldHVybiBhcjtcclxuXHR9LFxyXG5cclxuXHRfdW5lbmhhbmNlOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBhciA9IHRoaXMuX3VpLmFycm93O1xyXG5cclxuXHRcdGlmICggYXIgKSB7XHJcblx0XHRcdGFyLmFyRWxzLnJlbW92ZSgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB0aGlzLl9zdXBlcigpO1xyXG5cdH0sXHJcblxyXG5cdC8vIFByZXRlbmQgdG8gc2hvdyBhbiBhcnJvdyBkZXNjcmliZWQgYnkgQHAgYW5kIEBkaXIgYW5kIGNhbGN1bGF0ZSB0aGVcclxuXHQvLyBkaXN0YW5jZSBmcm9tIHRoZSBkZXNpcmVkIHBvaW50LiBJZiBhIGJlc3QtZGlzdGFuY2UgaXMgcGFzc2VkIGluLCByZXR1cm5cclxuXHQvLyB0aGUgbWluaW11bSBvZiB0aGUgb25lIHBhc3NlZCBpbiBhbmQgdGhlIG9uZSBjYWxjdWxhdGVkLlxyXG5cdF90cnlBbkFycm93OiBmdW5jdGlvbiggcCwgZGlyLCBkZXNpcmVkLCBzLCBiZXN0ICkge1xyXG5cdFx0dmFyIHJlc3VsdCwgciwgZGlmZiwgZGVzaXJlZEZvckFycm93ID0ge30sIHRpcCA9IHt9O1xyXG5cclxuXHRcdC8vIElmIHRoZSBhcnJvdyBoYXMgbm8gd2lnZ2xlIHJvb20gYWxvbmcgdGhlIGVkZ2Ugb2YgdGhlIHBvcHVwLCBpdCBjYW5ub3RcclxuXHRcdC8vIGJlIGRpc3BsYXllZCBhbG9uZyB0aGUgcmVxdWVzdGVkIGVkZ2Ugd2l0aG91dCBpdCBzdGlja2luZyBvdXQuXHJcblx0XHRpZiAoIHMuYXJGdWxsWyBwLmRpbUtleSBdID4gcy5ndWlkZURpbXNbIHAuZGltS2V5IF0gKSB7XHJcblx0XHRcdHJldHVybiBiZXN0O1xyXG5cdFx0fVxyXG5cclxuXHRcdGRlc2lyZWRGb3JBcnJvd1sgcC5mc3QgXSA9IGRlc2lyZWRbIHAuZnN0IF0gK1xyXG5cdFx0XHQoIHMuYXJIYWxmWyBwLm9EaW1LZXkgXSArIHMubWVudUhhbGZbIHAub0RpbUtleSBdICkgKiBwLm9mZnNldEZhY3RvciAtXHJcblx0XHRcdHMuY29udGVudEJveFsgcC5mc3QgXSArICggcy5jbGFtcEluZm8ubWVudVNpemVbIHAub0RpbUtleSBdIC0gcy5jb250ZW50Qm94WyBwLm9EaW1LZXkgXSApICogcC5hcnJvd09mZnNldEZhY3RvcjtcclxuXHRcdGRlc2lyZWRGb3JBcnJvd1sgcC5zbmQgXSA9IGRlc2lyZWRbIHAuc25kIF07XHJcblxyXG5cdFx0cmVzdWx0ID0gcy5yZXN1bHQgfHwgdGhpcy5fY2FsY3VsYXRlRmluYWxMb2NhdGlvbiggZGVzaXJlZEZvckFycm93LCBzLmNsYW1wSW5mbyApO1xyXG5cdFx0ciA9IHsgeDogcmVzdWx0LmxlZnQsIHk6IHJlc3VsdC50b3AgfTtcclxuXHJcblx0XHR0aXBbIHAuZnN0IF0gPSByWyBwLmZzdCBdICsgcy5jb250ZW50Qm94WyBwLmZzdCBdICsgcC50aXBPZmZzZXQ7XHJcblx0XHR0aXBbIHAuc25kIF0gPSBNYXRoLm1heCggcmVzdWx0WyBwLnByb3AgXSArIHMuZ3VpZGVPZmZzZXRbIHAucHJvcCBdICsgcy5hckhhbGZbIHAuZGltS2V5IF0sXHJcblx0XHRcdE1hdGgubWluKCByZXN1bHRbIHAucHJvcCBdICsgcy5ndWlkZU9mZnNldFsgcC5wcm9wIF0gKyBzLmd1aWRlRGltc1sgcC5kaW1LZXkgXSAtIHMuYXJIYWxmWyBwLmRpbUtleSBdLFxyXG5cdFx0XHRcdGRlc2lyZWRbIHAuc25kIF0gKSApO1xyXG5cclxuXHRcdGRpZmYgPSBNYXRoLmFicyggZGVzaXJlZC54IC0gdGlwLnggKSArIE1hdGguYWJzKCBkZXNpcmVkLnkgLSB0aXAueSApO1xyXG5cdFx0aWYgKCAhYmVzdCB8fCBkaWZmIDwgYmVzdC5kaWZmICkge1xyXG5cdFx0XHQvLyBDb252ZXJ0IHRpcCBvZmZzZXQgdG8gY29vcmRpbmF0ZXMgaW5zaWRlIHRoZSBwb3B1cFxyXG5cdFx0XHR0aXBbIHAuc25kIF0gLT0gcy5hckhhbGZbIHAuZGltS2V5IF0gKyByZXN1bHRbIHAucHJvcCBdICsgcy5jb250ZW50Qm94WyBwLnNuZCBdO1xyXG5cdFx0XHRiZXN0ID0geyBkaXI6IGRpciwgZGlmZjogZGlmZiwgcmVzdWx0OiByZXN1bHQsIHBvc1Byb3A6IHAucHJvcCwgcG9zVmFsOiB0aXBbIHAuc25kIF0gfTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gYmVzdDtcclxuXHR9LFxyXG5cclxuXHRfZ2V0UGxhY2VtZW50U3RhdGU6IGZ1bmN0aW9uKCBjbGFtcCApIHtcclxuXHRcdHZhciBvZmZzZXQsIGdkT2Zmc2V0LFxyXG5cdFx0XHRhciA9IHRoaXMuX3VpLmFycm93LFxyXG5cdFx0XHRzdGF0ZSA9IHtcclxuXHRcdFx0XHRjbGFtcEluZm86IHRoaXMuX2NsYW1wUG9wdXBXaWR0aCggIWNsYW1wICksXHJcblx0XHRcdFx0YXJGdWxsOiB7IGN4OiBhci5jdC53aWR0aCgpLCBjeTogYXIuY3QuaGVpZ2h0KCkgfSxcclxuXHRcdFx0XHRndWlkZURpbXM6IHsgY3g6IGFyLmdkLndpZHRoKCksIGN5OiBhci5nZC5oZWlnaHQoKSB9LFxyXG5cdFx0XHRcdGd1aWRlT2Zmc2V0OiBhci5nZC5vZmZzZXQoKVxyXG5cdFx0XHR9O1xyXG5cclxuXHRcdG9mZnNldCA9IHRoaXMuZWxlbWVudC5vZmZzZXQoKTtcclxuXHJcblx0XHRhci5nZC5jc3MoIHsgbGVmdDogMCwgdG9wOiAwLCByaWdodDogMCwgYm90dG9tOiAwIH0gKTtcclxuXHRcdGdkT2Zmc2V0ID0gYXIuZ2Qub2Zmc2V0KCk7XHJcblx0XHRzdGF0ZS5jb250ZW50Qm94ID0ge1xyXG5cdFx0XHR4OiBnZE9mZnNldC5sZWZ0IC0gb2Zmc2V0LmxlZnQsXHJcblx0XHRcdHk6IGdkT2Zmc2V0LnRvcCAtIG9mZnNldC50b3AsXHJcblx0XHRcdGN4OiBhci5nZC53aWR0aCgpLFxyXG5cdFx0XHRjeTogYXIuZ2QuaGVpZ2h0KClcclxuXHRcdH07XHJcblx0XHRhci5nZC5yZW1vdmVBdHRyKCBcInN0eWxlXCIgKTtcclxuXHJcblx0XHQvLyBUaGUgYXJyb3cgYm94IG1vdmVzIGJldHdlZW4gZ3VpZGVPZmZzZXQgYW5kIGd1aWRlT2Zmc2V0ICsgZ3VpZGVEaW1zIC0gYXJGdWxsXHJcblx0XHRzdGF0ZS5ndWlkZU9mZnNldCA9IHsgbGVmdDogc3RhdGUuZ3VpZGVPZmZzZXQubGVmdCAtIG9mZnNldC5sZWZ0LCB0b3A6IHN0YXRlLmd1aWRlT2Zmc2V0LnRvcCAtIG9mZnNldC50b3AgfTtcclxuXHRcdHN0YXRlLmFySGFsZiA9IHsgY3g6IHN0YXRlLmFyRnVsbC5jeCAvIDIsIGN5OiBzdGF0ZS5hckZ1bGwuY3kgLyAyIH07XHJcblx0XHRzdGF0ZS5tZW51SGFsZiA9IHsgY3g6IHN0YXRlLmNsYW1wSW5mby5tZW51U2l6ZS5jeCAvIDIsIGN5OiBzdGF0ZS5jbGFtcEluZm8ubWVudVNpemUuY3kgLyAyIH07XHJcblxyXG5cdFx0cmV0dXJuIHN0YXRlO1xyXG5cdH0sXHJcblxyXG5cdF9wbGFjZW1lbnRDb29yZHM6IGZ1bmN0aW9uKCBkZXNpcmVkICkge1xyXG5cdFx0dmFyIHN0YXRlLCBiZXN0LCBwYXJhbXMsIGVsT2Zmc2V0LCBiZ1JlZixcclxuXHRcdFx0b3B0aW9uVmFsdWUgPSB0aGlzLm9wdGlvbnMuYXJyb3csXHJcblx0XHRcdGFyID0gdGhpcy5fdWkuYXJyb3c7XHJcblxyXG5cdFx0aWYgKCAhYXIgKSB7XHJcblx0XHRcdHJldHVybiB0aGlzLl9zdXBlciggZGVzaXJlZCApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGFyLmFyRWxzLnNob3coKTtcclxuXHJcblx0XHRiZ1JlZiA9IHt9O1xyXG5cdFx0c3RhdGUgPSB0aGlzLl9nZXRQbGFjZW1lbnRTdGF0ZSggdHJ1ZSApO1xyXG5cdFx0cGFyYW1zID0ge1xyXG5cdFx0XHRcImxcIjogeyBmc3Q6IFwieFwiLCBzbmQ6IFwieVwiLCBwcm9wOiBcInRvcFwiLCBkaW1LZXk6IFwiY3lcIiwgb0RpbUtleTogXCJjeFwiLCBvZmZzZXRGYWN0b3I6IDEsIHRpcE9mZnNldDogIC1zdGF0ZS5hckhhbGYuY3gsIGFycm93T2Zmc2V0RmFjdG9yOiAwIH0sXHJcblx0XHRcdFwiclwiOiB7IGZzdDogXCJ4XCIsIHNuZDogXCJ5XCIsIHByb3A6IFwidG9wXCIsIGRpbUtleTogXCJjeVwiLCBvRGltS2V5OiBcImN4XCIsIG9mZnNldEZhY3RvcjogLTEsIHRpcE9mZnNldDogc3RhdGUuYXJIYWxmLmN4ICsgc3RhdGUuY29udGVudEJveC5jeCwgYXJyb3dPZmZzZXRGYWN0b3I6IDEgfSxcclxuXHRcdFx0XCJiXCI6IHsgZnN0OiBcInlcIiwgc25kOiBcInhcIiwgcHJvcDogXCJsZWZ0XCIsIGRpbUtleTogXCJjeFwiLCBvRGltS2V5OiBcImN5XCIsIG9mZnNldEZhY3RvcjogLTEsIHRpcE9mZnNldDogc3RhdGUuYXJIYWxmLmN5ICsgc3RhdGUuY29udGVudEJveC5jeSwgYXJyb3dPZmZzZXRGYWN0b3I6IDEgfSxcclxuXHRcdFx0XCJ0XCI6IHsgZnN0OiBcInlcIiwgc25kOiBcInhcIiwgcHJvcDogXCJsZWZ0XCIsIGRpbUtleTogXCJjeFwiLCBvRGltS2V5OiBcImN5XCIsIG9mZnNldEZhY3RvcjogMSwgdGlwT2Zmc2V0OiAtc3RhdGUuYXJIYWxmLmN5LCBhcnJvd09mZnNldEZhY3RvcjogMCB9XHJcblx0XHR9O1xyXG5cclxuXHRcdC8vIFRyeSBlYWNoIHNpZGUgc3BlY2lmaWVkIGluIHRoZSBvcHRpb25zIHRvIHNlZSBvbiB3aGljaCBvbmUgdGhlIGFycm93XHJcblx0XHQvLyBzaG91bGQgYmUgcGxhY2VkIHN1Y2ggdGhhdCB0aGUgZGlzdGFuY2UgYmV0d2VlbiB0aGUgdGlwIG9mIHRoZSBhcnJvdyBhbmRcclxuXHRcdC8vIHRoZSBkZXNpcmVkIGNvb3JkaW5hdGVzIGlzIHRoZSBzaG9ydGVzdC5cclxuXHRcdCQuZWFjaCggKCBvcHRpb25WYWx1ZSA9PT0gdHJ1ZSA/IFwibCx0LHIsYlwiIDogb3B0aW9uVmFsdWUgKS5zcGxpdCggXCIsXCIgKSxcclxuXHRcdFx0JC5wcm94eSggZnVuY3Rpb24oIGtleSwgdmFsdWUgKSB7XHJcblx0XHRcdFx0YmVzdCA9IHRoaXMuX3RyeUFuQXJyb3coIHBhcmFtc1sgdmFsdWUgXSwgdmFsdWUsIGRlc2lyZWQsIHN0YXRlLCBiZXN0ICk7XHJcblx0XHRcdH0sIHRoaXMgKSApO1xyXG5cclxuXHRcdC8vIENvdWxkIG5vdCBwbGFjZSB0aGUgYXJyb3cgYWxvbmcgYW55IG9mIHRoZSBlZGdlcyAtIGJlaGF2ZSBhcyBpZiBzaG93aW5nXHJcblx0XHQvLyB0aGUgYXJyb3cgd2FzIHR1cm5lZCBvZmYuXHJcblx0XHRpZiAoICFiZXN0ICkge1xyXG5cdFx0XHRhci5hckVscy5oaWRlKCk7XHJcblx0XHRcdHJldHVybiB0aGlzLl9zdXBlciggZGVzaXJlZCApO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIE1vdmUgdGhlIGFycm93IGludG8gcGxhY2VcclxuXHRcdGFyLmN0XHJcblx0XHRcdC5yZW1vdmVDbGFzcyggXCJ1aS1wb3B1cC1hcnJvdy1sIHVpLXBvcHVwLWFycm93LXQgdWktcG9wdXAtYXJyb3ctciB1aS1wb3B1cC1hcnJvdy1iXCIgKVxyXG5cdFx0XHQuYWRkQ2xhc3MoIFwidWktcG9wdXAtYXJyb3ctXCIgKyBiZXN0LmRpciApXHJcblx0XHRcdC5yZW1vdmVBdHRyKCBcInN0eWxlXCIgKS5jc3MoIGJlc3QucG9zUHJvcCwgYmVzdC5wb3NWYWwgKVxyXG5cdFx0XHQuc2hvdygpO1xyXG5cclxuXHRcdC8vIERvIG5vdCBtb3ZlL3NpemUgdGhlIGJhY2tncm91bmQgZGl2IG9uIElFLCBiZWNhdXNlIHdlIHVzZSB0aGUgYXJyb3cgZGl2IGZvciBiYWNrZ3JvdW5kIGFzIHdlbGwuXHJcblx0XHRpZiAoICFpZUhhY2sgKSB7XHJcblx0XHRcdGVsT2Zmc2V0ID0gdGhpcy5lbGVtZW50Lm9mZnNldCgpO1xyXG5cdFx0XHRiZ1JlZlsgcGFyYW1zWyBiZXN0LmRpciBdLmZzdCBdID0gYXIuY3Qub2Zmc2V0KCk7XHJcblx0XHRcdGJnUmVmWyBwYXJhbXNbIGJlc3QuZGlyIF0uc25kIF0gPSB7XHJcblx0XHRcdFx0bGVmdDogZWxPZmZzZXQubGVmdCArIHN0YXRlLmNvbnRlbnRCb3gueCxcclxuXHRcdFx0XHR0b3A6IGVsT2Zmc2V0LnRvcCArIHN0YXRlLmNvbnRlbnRCb3gueVxyXG5cdFx0XHR9O1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBiZXN0LnJlc3VsdDtcclxuXHR9LFxyXG5cclxuXHRfc2V0T3B0aW9uczogZnVuY3Rpb24oIG9wdHMgKSB7XHJcblx0XHR2YXIgbmV3VGhlbWUsXHJcblx0XHRcdG9sZFRoZW1lID0gdGhpcy5vcHRpb25zLnRoZW1lLFxyXG5cdFx0XHRhciA9IHRoaXMuX3VpLmFycm93LFxyXG5cdFx0XHRyZXQgPSB0aGlzLl9zdXBlciggb3B0cyApO1xyXG5cclxuXHRcdGlmICggb3B0cy5hcnJvdyAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRpZiAoICFhciAmJiBvcHRzLmFycm93ICkge1xyXG5cdFx0XHRcdHRoaXMuX3VpLmFycm93ID0gdGhpcy5fYWRkQXJyb3coKTtcclxuXHJcblx0XHRcdFx0Ly8gSW1wb3J0YW50IHRvIHJldHVybiBoZXJlIHNvIHdlIGRvbid0IHNldCB0aGUgc2FtZSBvcHRpb25zIGFsbCBvdmVyXHJcblx0XHRcdFx0Ly8gYWdhaW4gYmVsb3cuXHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9IGVsc2UgaWYgKCBhciAmJiAhb3B0cy5hcnJvdyApIHtcclxuXHRcdFx0XHRhci5hckVscy5yZW1vdmUoKTtcclxuXHRcdFx0XHR0aGlzLl91aS5hcnJvdyA9IG51bGw7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHQvLyBSZWFzc2lnbiB3aXRoIHBvdGVudGlhbGx5IG5ldyBhcnJvd1xyXG5cdFx0YXIgPSB0aGlzLl91aS5hcnJvdztcclxuXHJcblx0XHRpZiAoIGFyICkge1xyXG5cdFx0XHRpZiAoIG9wdHMudGhlbWUgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0XHRvbGRUaGVtZSA9IHRoaXMuX3RoZW1lQ2xhc3NGcm9tT3B0aW9uKCBcInVpLWJvZHktXCIsIG9sZFRoZW1lICk7XHJcblx0XHRcdFx0bmV3VGhlbWUgPSB0aGlzLl90aGVtZUNsYXNzRnJvbU9wdGlvbiggXCJ1aS1ib2R5LVwiLCBvcHRzLnRoZW1lICk7XHJcblx0XHRcdFx0YXIuYXIucmVtb3ZlQ2xhc3MoIG9sZFRoZW1lICkuYWRkQ2xhc3MoIG5ld1RoZW1lICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICggb3B0cy5zaGFkb3cgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0XHRhci5hci50b2dnbGVDbGFzcyggXCJ1aS1vdmVybGF5LXNoYWRvd1wiLCBvcHRzLnNoYWRvdyApO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHJldDtcclxuXHR9LFxyXG5cclxuXHRfZGVzdHJveTogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgYXIgPSB0aGlzLl91aS5hcnJvdztcclxuXHJcblx0XHRpZiAoIGFyICkge1xyXG5cdFx0XHRhci5hckVscy5yZW1vdmUoKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gdGhpcy5fc3VwZXIoKTtcclxuXHR9XHJcbn0pO1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxuJC53aWRnZXQoIFwibW9iaWxlLnBhbmVsXCIsIHtcclxuXHRvcHRpb25zOiB7XHJcblx0XHRjbGFzc2VzOiB7XHJcblx0XHRcdHBhbmVsOiBcInVpLXBhbmVsXCIsXHJcblx0XHRcdHBhbmVsT3BlbjogXCJ1aS1wYW5lbC1vcGVuXCIsXHJcblx0XHRcdHBhbmVsQ2xvc2VkOiBcInVpLXBhbmVsLWNsb3NlZFwiLFxyXG5cdFx0XHRwYW5lbEZpeGVkOiBcInVpLXBhbmVsLWZpeGVkXCIsXHJcblx0XHRcdHBhbmVsSW5uZXI6IFwidWktcGFuZWwtaW5uZXJcIixcclxuXHRcdFx0bW9kYWw6IFwidWktcGFuZWwtZGlzbWlzc1wiLFxyXG5cdFx0XHRtb2RhbE9wZW46IFwidWktcGFuZWwtZGlzbWlzcy1vcGVuXCIsXHJcblx0XHRcdHBhZ2VDb250YWluZXI6IFwidWktcGFuZWwtcGFnZS1jb250YWluZXJcIixcclxuXHRcdFx0cGFnZVdyYXBwZXI6IFwidWktcGFuZWwtd3JhcHBlclwiLFxyXG5cdFx0XHRwYWdlRml4ZWRUb29sYmFyOiBcInVpLXBhbmVsLWZpeGVkLXRvb2xiYXJcIixcclxuXHRcdFx0cGFnZUNvbnRlbnRQcmVmaXg6IFwidWktcGFuZWwtcGFnZS1jb250ZW50XCIsIC8qIFVzZWQgZm9yIHdyYXBwZXIgYW5kIGZpeGVkIHRvb2xiYXJzIHBvc2l0aW9uLCBkaXNwbGF5IGFuZCBvcGVuIGNsYXNzZXMuICovXHJcblx0XHRcdGFuaW1hdGU6IFwidWktcGFuZWwtYW5pbWF0ZVwiXHJcblx0XHR9LFxyXG5cdFx0YW5pbWF0ZTogdHJ1ZSxcclxuXHRcdHRoZW1lOiBudWxsLFxyXG5cdFx0cG9zaXRpb246IFwibGVmdFwiLFxyXG5cdFx0ZGlzbWlzc2libGU6IHRydWUsXHJcblx0XHRkaXNwbGF5OiBcInJldmVhbFwiLCAvL2FjY2VwdHMgcmV2ZWFsLCBwdXNoLCBvdmVybGF5XHJcblx0XHRzd2lwZUNsb3NlOiB0cnVlLFxyXG5cdFx0cG9zaXRpb25GaXhlZDogZmFsc2VcclxuXHR9LFxyXG5cclxuXHRfY2xvc2VMaW5rOiBudWxsLFxyXG5cdF9wYXJlbnRQYWdlOiBudWxsLFxyXG5cdF9wYWdlOiBudWxsLFxyXG5cdF9tb2RhbDogbnVsbCxcclxuXHRfcGFuZWxJbm5lcjogbnVsbCxcclxuXHRfd3JhcHBlcjogbnVsbCxcclxuXHRfZml4ZWRUb29sYmFyczogbnVsbCxcclxuXHJcblx0X2NyZWF0ZTogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgZWwgPSB0aGlzLmVsZW1lbnQsXHJcblx0XHRcdHBhcmVudFBhZ2UgPSBlbC5jbG9zZXN0KCBcIi51aS1wYWdlLCA6anFtRGF0YShyb2xlPSdwYWdlJylcIiApO1xyXG5cclxuXHRcdC8vIGV4cG9zZSBzb21lIHByaXZhdGUgcHJvcHMgdG8gb3RoZXIgbWV0aG9kc1xyXG5cdFx0JC5leHRlbmQoIHRoaXMsIHtcclxuXHRcdFx0X2Nsb3NlTGluazogZWwuZmluZCggXCI6anFtRGF0YShyZWw9J2Nsb3NlJylcIiApLFxyXG5cdFx0XHRfcGFyZW50UGFnZTogKCBwYXJlbnRQYWdlLmxlbmd0aCA+IDAgKSA/IHBhcmVudFBhZ2UgOiBmYWxzZSxcclxuXHRcdFx0X29wZW5lZFBhZ2U6IG51bGwsXHJcblx0XHRcdF9wYWdlOiB0aGlzLl9nZXRQYWdlLFxyXG5cdFx0XHRfcGFuZWxJbm5lcjogdGhpcy5fZ2V0UGFuZWxJbm5lcigpLFxyXG5cdFx0XHRfZml4ZWRUb29sYmFyczogdGhpcy5fZ2V0Rml4ZWRUb29sYmFyc1xyXG5cdFx0fSk7XHJcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5kaXNwbGF5ICE9PSBcIm92ZXJsYXlcIiApe1xyXG5cdFx0XHR0aGlzLl9nZXRXcmFwcGVyKCk7XHJcblx0XHR9XHJcblx0XHR0aGlzLl9hZGRQYW5lbENsYXNzZXMoKTtcclxuXHJcblx0XHQvLyBpZiBhbmltYXRpbmcsIGFkZCB0aGUgY2xhc3MgdG8gZG8gc29cclxuXHRcdGlmICggJC5zdXBwb3J0LmNzc1RyYW5zZm9ybTNkICYmICEhdGhpcy5vcHRpb25zLmFuaW1hdGUgKSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudC5hZGRDbGFzcyggdGhpcy5vcHRpb25zLmNsYXNzZXMuYW5pbWF0ZSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX2JpbmRVcGRhdGVMYXlvdXQoKTtcclxuXHRcdHRoaXMuX2JpbmRDbG9zZUV2ZW50cygpO1xyXG5cdFx0dGhpcy5fYmluZExpbmtMaXN0ZW5lcnMoKTtcclxuXHRcdHRoaXMuX2JpbmRQYWdlRXZlbnRzKCk7XHJcblxyXG5cdFx0aWYgKCAhIXRoaXMub3B0aW9ucy5kaXNtaXNzaWJsZSApIHtcclxuXHRcdFx0dGhpcy5fY3JlYXRlTW9kYWwoKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl9iaW5kU3dpcGVFdmVudHMoKTtcclxuXHR9LFxyXG5cclxuXHRfZ2V0UGFuZWxJbm5lcjogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgcGFuZWxJbm5lciA9IHRoaXMuZWxlbWVudC5maW5kKCBcIi5cIiArIHRoaXMub3B0aW9ucy5jbGFzc2VzLnBhbmVsSW5uZXIgKTtcclxuXHJcblx0XHRpZiAoIHBhbmVsSW5uZXIubGVuZ3RoID09PSAwICkge1xyXG5cdFx0XHRwYW5lbElubmVyID0gdGhpcy5lbGVtZW50LmNoaWxkcmVuKCkud3JhcEFsbCggXCI8ZGl2IGNsYXNzPSdcIiArIHRoaXMub3B0aW9ucy5jbGFzc2VzLnBhbmVsSW5uZXIgKyBcIicgLz5cIiApLnBhcmVudCgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBwYW5lbElubmVyO1xyXG5cdH0sXHJcblxyXG5cdF9jcmVhdGVNb2RhbDogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgc2VsZiA9IHRoaXMsXHJcblx0XHRcdHRhcmdldCA9IHNlbGYuX3BhcmVudFBhZ2UgPyBzZWxmLl9wYXJlbnRQYWdlLnBhcmVudCgpIDogc2VsZi5lbGVtZW50LnBhcmVudCgpO1xyXG5cclxuXHRcdHNlbGYuX21vZGFsID0gJCggXCI8ZGl2IGNsYXNzPSdcIiArIHNlbGYub3B0aW9ucy5jbGFzc2VzLm1vZGFsICsgXCInPjwvZGl2PlwiIClcclxuXHRcdFx0Lm9uKCBcIm1vdXNlZG93blwiLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRzZWxmLmNsb3NlKCk7XHJcblx0XHRcdH0pXHJcblx0XHRcdC5hcHBlbmRUbyggdGFyZ2V0ICk7XHJcblx0fSxcclxuXHJcblx0X2dldFBhZ2U6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHBhZ2UgPSB0aGlzLl9vcGVuZWRQYWdlIHx8IHRoaXMuX3BhcmVudFBhZ2UgfHwgJCggXCIuXCIgKyAkLm1vYmlsZS5hY3RpdmVQYWdlQ2xhc3MgKTtcclxuXHJcblx0XHRyZXR1cm4gcGFnZTtcclxuXHR9LFxyXG5cclxuXHRfZ2V0V3JhcHBlcjogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgd3JhcHBlciA9IHRoaXMuX3BhZ2UoKS5maW5kKCBcIi5cIiArIHRoaXMub3B0aW9ucy5jbGFzc2VzLnBhZ2VXcmFwcGVyICk7XHJcblx0XHRpZiAoIHdyYXBwZXIubGVuZ3RoID09PSAwICkge1xyXG5cdFx0XHR3cmFwcGVyID0gdGhpcy5fcGFnZSgpLmNoaWxkcmVuKCBcIi51aS1oZWFkZXI6bm90KC51aS1oZWFkZXItZml4ZWQpLCAudWktY29udGVudDpub3QoLnVpLXBvcHVwKSwgLnVpLWZvb3Rlcjpub3QoLnVpLWZvb3Rlci1maXhlZClcIiApXHJcblx0XHRcdFx0LndyYXBBbGwoIFwiPGRpdiBjbGFzcz0nXCIgKyB0aGlzLm9wdGlvbnMuY2xhc3Nlcy5wYWdlV3JhcHBlciArIFwiJz48L2Rpdj5cIiApXHJcblx0XHRcdFx0LnBhcmVudCgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX3dyYXBwZXIgPSB3cmFwcGVyO1xyXG5cdH0sXHJcblxyXG5cdF9nZXRGaXhlZFRvb2xiYXJzOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBleHRGaXhlZFRvb2xiYXJzID0gJCggXCJib2R5XCIgKS5jaGlsZHJlbiggXCIudWktaGVhZGVyLWZpeGVkLCAudWktZm9vdGVyLWZpeGVkXCIgKSxcclxuXHRcdFx0aW50Rml4ZWRUb29sYmFycyA9IHRoaXMuX3BhZ2UoKS5maW5kKCBcIi51aS1oZWFkZXItZml4ZWQsIC51aS1mb290ZXItZml4ZWRcIiApLFxyXG5cdFx0XHRmaXhlZFRvb2xiYXJzID0gZXh0Rml4ZWRUb29sYmFycy5hZGQoIGludEZpeGVkVG9vbGJhcnMgKS5hZGRDbGFzcyggdGhpcy5vcHRpb25zLmNsYXNzZXMucGFnZUZpeGVkVG9vbGJhciApO1xyXG5cclxuXHRcdHJldHVybiBmaXhlZFRvb2xiYXJzO1xyXG5cdH0sXHJcblxyXG5cdF9nZXRQb3NEaXNwbGF5Q2xhc3NlczogZnVuY3Rpb24oIHByZWZpeCApIHtcclxuXHRcdHJldHVybiBwcmVmaXggKyBcIi1wb3NpdGlvbi1cIiArIHRoaXMub3B0aW9ucy5wb3NpdGlvbiArIFwiIFwiICsgcHJlZml4ICsgXCItZGlzcGxheS1cIiArIHRoaXMub3B0aW9ucy5kaXNwbGF5O1xyXG5cdH0sXHJcblxyXG5cdF9nZXRQYW5lbENsYXNzZXM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHBhbmVsQ2xhc3NlcyA9IHRoaXMub3B0aW9ucy5jbGFzc2VzLnBhbmVsICtcclxuXHRcdFx0XCIgXCIgKyB0aGlzLl9nZXRQb3NEaXNwbGF5Q2xhc3NlcyggdGhpcy5vcHRpb25zLmNsYXNzZXMucGFuZWwgKSArXHJcblx0XHRcdFwiIFwiICsgdGhpcy5vcHRpb25zLmNsYXNzZXMucGFuZWxDbG9zZWQgK1xyXG5cdFx0XHRcIiBcIiArIFwidWktYm9keS1cIiArICggdGhpcy5vcHRpb25zLnRoZW1lID8gdGhpcy5vcHRpb25zLnRoZW1lIDogXCJpbmhlcml0XCIgKTtcclxuXHJcblx0XHRpZiAoICEhdGhpcy5vcHRpb25zLnBvc2l0aW9uRml4ZWQgKSB7XHJcblx0XHRcdHBhbmVsQ2xhc3NlcyArPSBcIiBcIiArIHRoaXMub3B0aW9ucy5jbGFzc2VzLnBhbmVsRml4ZWQ7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHBhbmVsQ2xhc3NlcztcclxuXHR9LFxyXG5cclxuXHRfYWRkUGFuZWxDbGFzc2VzOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuZWxlbWVudC5hZGRDbGFzcyggdGhpcy5fZ2V0UGFuZWxDbGFzc2VzKCkgKTtcclxuXHR9LFxyXG5cclxuXHRfaGFuZGxlQ2xvc2VDbGljazogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0aWYgKCAhZXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkgKSB7XHJcblx0XHRcdHRoaXMuY2xvc2UoKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfYmluZENsb3NlRXZlbnRzOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX29uKCB0aGlzLl9jbG9zZUxpbmssIHtcclxuXHRcdFx0XCJjbGlja1wiOiBcIl9oYW5kbGVDbG9zZUNsaWNrXCJcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMuX29uKHtcclxuXHRcdFx0XCJjbGljayBhOmpxbURhdGEoYWpheD0nZmFsc2UnKVwiOiBcIl9oYW5kbGVDbG9zZUNsaWNrXCJcclxuXHRcdH0pO1xyXG5cdH0sXHJcblxyXG5cdF9wb3NpdGlvblBhbmVsOiBmdW5jdGlvbiggc2Nyb2xsVG9Ub3AgKSB7XHJcblx0XHR2YXIgc2VsZiA9IHRoaXMsXHJcblx0XHRcdHBhbmVsSW5uZXJIZWlnaHQgPSBzZWxmLl9wYW5lbElubmVyLm91dGVySGVpZ2h0KCksXHJcblx0XHRcdGV4cGFuZCA9IHBhbmVsSW5uZXJIZWlnaHQgPiAkLm1vYmlsZS5nZXRTY3JlZW5IZWlnaHQoKTtcclxuXHJcblx0XHRpZiAoIGV4cGFuZCB8fCAhc2VsZi5vcHRpb25zLnBvc2l0aW9uRml4ZWQgKSB7XHJcblx0XHRcdGlmICggZXhwYW5kICkge1xyXG5cdFx0XHRcdHNlbGYuX3VuZml4UGFuZWwoKTtcclxuXHRcdFx0XHQkLm1vYmlsZS5yZXNldEFjdGl2ZVBhZ2VIZWlnaHQoIHBhbmVsSW5uZXJIZWlnaHQgKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoIHNjcm9sbFRvVG9wICkge1xyXG5cdFx0XHRcdHRoaXMud2luZG93WyAwIF0uc2Nyb2xsVG8oIDAsICQubW9iaWxlLmRlZmF1bHRIb21lU2Nyb2xsICk7XHJcblx0XHRcdH1cclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHNlbGYuX2ZpeFBhbmVsKCk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X2JpbmRGaXhMaXN0ZW5lcjogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9vbiggJCggd2luZG93ICksIHsgXCJ0aHJvdHRsZWRyZXNpemVcIjogXCJfcG9zaXRpb25QYW5lbFwiIH0pO1xyXG5cdH0sXHJcblxyXG5cdF91bmJpbmRGaXhMaXN0ZW5lcjogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9vZmYoICQoIHdpbmRvdyApLCBcInRocm90dGxlZHJlc2l6ZVwiICk7XHJcblx0fSxcclxuXHJcblx0X3VuZml4UGFuZWw6IGZ1bmN0aW9uKCkge1xyXG5cdFx0aWYgKCAhIXRoaXMub3B0aW9ucy5wb3NpdGlvbkZpeGVkICYmICQuc3VwcG9ydC5maXhlZFBvc2l0aW9uICkge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3MoIHRoaXMub3B0aW9ucy5jbGFzc2VzLnBhbmVsRml4ZWQgKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfZml4UGFuZWw6IGZ1bmN0aW9uKCkge1xyXG5cdFx0aWYgKCAhIXRoaXMub3B0aW9ucy5wb3NpdGlvbkZpeGVkICYmICQuc3VwcG9ydC5maXhlZFBvc2l0aW9uICkge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoIHRoaXMub3B0aW9ucy5jbGFzc2VzLnBhbmVsRml4ZWQgKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfYmluZFVwZGF0ZUxheW91dDogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG5cdFx0c2VsZi5lbGVtZW50Lm9uKCBcInVwZGF0ZWxheW91dFwiLCBmdW5jdGlvbigvKiBlICovKSB7XHJcblx0XHRcdGlmICggc2VsZi5fb3BlbiApIHtcclxuXHRcdFx0XHRzZWxmLl9wb3NpdGlvblBhbmVsKCk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH0sXHJcblxyXG5cdF9iaW5kTGlua0xpc3RlbmVyczogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9vbiggXCJib2R5XCIsIHtcclxuXHRcdFx0XCJjbGljayBhXCI6IFwiX2hhbmRsZUNsaWNrXCJcclxuXHRcdH0pO1xyXG5cclxuXHR9LFxyXG5cclxuXHRfaGFuZGxlQ2xpY2s6IGZ1bmN0aW9uKCBlICkge1xyXG5cdFx0dmFyIGxpbmssXHJcblx0XHRcdHBhbmVsSWQgPSB0aGlzLmVsZW1lbnQuYXR0ciggXCJpZFwiICk7XHJcblxyXG5cdFx0aWYgKCBlLmN1cnJlbnRUYXJnZXQuaHJlZi5zcGxpdCggXCIjXCIgKVsgMSBdID09PSBwYW5lbElkICYmIHBhbmVsSWQgIT09IHVuZGVmaW5lZCApIHtcclxuXHJcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0bGluayA9ICQoIGUudGFyZ2V0ICk7XHJcblx0XHRcdGlmICggbGluay5oYXNDbGFzcyggXCJ1aS1idG5cIiApICkge1xyXG5cdFx0XHRcdGxpbmsuYWRkQ2xhc3MoICQubW9iaWxlLmFjdGl2ZUJ0bkNsYXNzICk7XHJcblx0XHRcdFx0dGhpcy5lbGVtZW50Lm9uZSggXCJwYW5lbG9wZW4gcGFuZWxjbG9zZVwiLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdGxpbmsucmVtb3ZlQ2xhc3MoICQubW9iaWxlLmFjdGl2ZUJ0bkNsYXNzICk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdFx0dGhpcy50b2dnbGUoKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfYmluZFN3aXBlRXZlbnRzOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBzZWxmID0gdGhpcyxcclxuXHRcdFx0YXJlYSA9IHNlbGYuX21vZGFsID8gc2VsZi5lbGVtZW50LmFkZCggc2VsZi5fbW9kYWwgKSA6IHNlbGYuZWxlbWVudDtcclxuXHJcblx0XHQvLyBvbiBzd2lwZSwgY2xvc2UgdGhlIHBhbmVsXHJcblx0XHRpZiAoICEhc2VsZi5vcHRpb25zLnN3aXBlQ2xvc2UgKSB7XHJcblx0XHRcdGlmICggc2VsZi5vcHRpb25zLnBvc2l0aW9uID09PSBcImxlZnRcIiApIHtcclxuXHRcdFx0XHRhcmVhLm9uKCBcInN3aXBlbGVmdC5wYW5lbFwiLCBmdW5jdGlvbigvKiBlICovKSB7XHJcblx0XHRcdFx0XHRzZWxmLmNsb3NlKCk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0YXJlYS5vbiggXCJzd2lwZXJpZ2h0LnBhbmVsXCIsIGZ1bmN0aW9uKC8qIGUgKi8pIHtcclxuXHRcdFx0XHRcdHNlbGYuY2xvc2UoKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9iaW5kUGFnZUV2ZW50czogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG5cdFx0dGhpcy5kb2N1bWVudFxyXG5cdFx0XHQvLyBDbG9zZSB0aGUgcGFuZWwgaWYgYW5vdGhlciBwYW5lbCBvbiB0aGUgcGFnZSBvcGVuc1xyXG5cdFx0XHQub24oIFwicGFuZWxiZWZvcmVvcGVuXCIsIGZ1bmN0aW9uKCBlICkge1xyXG5cdFx0XHRcdGlmICggc2VsZi5fb3BlbiAmJiBlLnRhcmdldCAhPT0gc2VsZi5lbGVtZW50WyAwIF0gKSB7XHJcblx0XHRcdFx0XHRzZWxmLmNsb3NlKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KVxyXG5cdFx0XHQvLyBPbiBlc2NhcGUsIGNsb3NlPyBtaWdodCBuZWVkIHRvIGhhdmUgYSB0YXJnZXQgY2hlY2sgdG9vLi4uXHJcblx0XHRcdC5vbiggXCJrZXl1cC5wYW5lbFwiLCBmdW5jdGlvbiggZSApIHtcclxuXHRcdFx0XHRpZiAoIGUua2V5Q29kZSA9PT0gMjcgJiYgc2VsZi5fb3BlbiApIHtcclxuXHRcdFx0XHRcdHNlbGYuY2xvc2UoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0aWYgKCAhdGhpcy5fcGFyZW50UGFnZSAmJiB0aGlzLm9wdGlvbnMuZGlzcGxheSAhPT0gXCJvdmVybGF5XCIgKSB7XHJcblx0XHRcdHRoaXMuX29uKCB0aGlzLmRvY3VtZW50LCB7XHJcblx0XHRcdFx0XCJwYWdlc2hvd1wiOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdHRoaXMuX29wZW5lZFBhZ2UgPSBudWxsO1xyXG5cdFx0XHRcdFx0dGhpcy5fZ2V0V3JhcHBlcigpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0XHQvLyBDbGVhbiB1cCBvcGVuIHBhbmVscyBhZnRlciBwYWdlIGhpZGVcclxuXHRcdGlmICggc2VsZi5fcGFyZW50UGFnZSApIHtcclxuXHRcdFx0dGhpcy5kb2N1bWVudC5vbiggXCJwYWdlaGlkZVwiLCBcIjpqcW1EYXRhKHJvbGU9J3BhZ2UnKVwiLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRpZiAoIHNlbGYuX29wZW4gKSB7XHJcblx0XHRcdFx0XHRzZWxmLmNsb3NlKCB0cnVlICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRoaXMuZG9jdW1lbnQub24oIFwicGFnZWJlZm9yZWhpZGVcIiwgZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0aWYgKCBzZWxmLl9vcGVuICkge1xyXG5cdFx0XHRcdFx0c2VsZi5jbG9zZSggdHJ1ZSApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0Ly8gc3RhdGUgc3RvcmFnZSBvZiBvcGVuIG9yIGNsb3NlZFxyXG5cdF9vcGVuOiBmYWxzZSxcclxuXHRfcGFnZUNvbnRlbnRPcGVuQ2xhc3NlczogbnVsbCxcclxuXHRfbW9kYWxPcGVuQ2xhc3NlczogbnVsbCxcclxuXHJcblx0b3BlbjogZnVuY3Rpb24oIGltbWVkaWF0ZSApIHtcclxuXHRcdGlmICggIXRoaXMuX29wZW4gKSB7XHJcblx0XHRcdHZhciBzZWxmID0gdGhpcyxcclxuXHRcdFx0XHRvID0gc2VsZi5vcHRpb25zLFxyXG5cclxuXHRcdFx0XHRfb3BlblBhbmVsID0gZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRzZWxmLl9vZmYoIHNlbGYuZG9jdW1lbnQgLCBcInBhbmVsY2xvc2VcIiApO1xyXG5cdFx0XHRcdFx0c2VsZi5fcGFnZSgpLmpxbURhdGEoIFwicGFuZWxcIiwgXCJvcGVuXCIgKTtcclxuXHJcblx0XHRcdFx0XHRpZiAoICQuc3VwcG9ydC5jc3NUcmFuc2Zvcm0zZCAmJiAhIW8uYW5pbWF0ZSAmJiBvLmRpc3BsYXkgIT09IFwib3ZlcmxheVwiICkge1xyXG5cdFx0XHRcdFx0XHRzZWxmLl93cmFwcGVyLmFkZENsYXNzKCBvLmNsYXNzZXMuYW5pbWF0ZSApO1xyXG5cdFx0XHRcdFx0XHRzZWxmLl9maXhlZFRvb2xiYXJzKCkuYWRkQ2xhc3MoIG8uY2xhc3Nlcy5hbmltYXRlICk7XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0aWYgKCAhaW1tZWRpYXRlICYmICQuc3VwcG9ydC5jc3NUcmFuc2Zvcm0zZCAmJiAhIW8uYW5pbWF0ZSApIHtcclxuXHRcdFx0XHRcdFx0KCBzZWxmLl93cmFwcGVyIHx8IHNlbGYuZWxlbWVudCApXHJcblx0XHRcdFx0XHRcdFx0LmFuaW1hdGlvbkNvbXBsZXRlKCBjb21wbGV0ZSwgXCJ0cmFuc2l0aW9uXCIgKTtcclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdHNldFRpbWVvdXQoIGNvbXBsZXRlLCAwICk7XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0aWYgKCBvLnRoZW1lICYmIG8uZGlzcGxheSAhPT0gXCJvdmVybGF5XCIgKSB7XHJcblx0XHRcdFx0XHRcdHNlbGYuX3BhZ2UoKS5wYXJlbnQoKVxyXG5cdFx0XHRcdFx0XHRcdC5hZGRDbGFzcyggby5jbGFzc2VzLnBhZ2VDb250YWluZXIgKyBcIi10aGVtZWQgXCIgKyBvLmNsYXNzZXMucGFnZUNvbnRhaW5lciArIFwiLVwiICsgby50aGVtZSApO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdHNlbGYuZWxlbWVudFxyXG5cdFx0XHRcdFx0XHQucmVtb3ZlQ2xhc3MoIG8uY2xhc3Nlcy5wYW5lbENsb3NlZCApXHJcblx0XHRcdFx0XHRcdC5hZGRDbGFzcyggby5jbGFzc2VzLnBhbmVsT3BlbiApO1xyXG5cclxuXHRcdFx0XHRcdHNlbGYuX3Bvc2l0aW9uUGFuZWwoIHRydWUgKTtcclxuXHJcblx0XHRcdFx0XHRzZWxmLl9wYWdlQ29udGVudE9wZW5DbGFzc2VzID0gc2VsZi5fZ2V0UG9zRGlzcGxheUNsYXNzZXMoIG8uY2xhc3Nlcy5wYWdlQ29udGVudFByZWZpeCApO1xyXG5cclxuXHRcdFx0XHRcdGlmICggby5kaXNwbGF5ICE9PSBcIm92ZXJsYXlcIiApIHtcclxuXHRcdFx0XHRcdFx0c2VsZi5fcGFnZSgpLnBhcmVudCgpLmFkZENsYXNzKCBvLmNsYXNzZXMucGFnZUNvbnRhaW5lciApO1xyXG5cdFx0XHRcdFx0XHRzZWxmLl93cmFwcGVyLmFkZENsYXNzKCBzZWxmLl9wYWdlQ29udGVudE9wZW5DbGFzc2VzICk7XHJcblx0XHRcdFx0XHRcdHNlbGYuX2ZpeGVkVG9vbGJhcnMoKS5hZGRDbGFzcyggc2VsZi5fcGFnZUNvbnRlbnRPcGVuQ2xhc3NlcyApO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdHNlbGYuX21vZGFsT3BlbkNsYXNzZXMgPSBzZWxmLl9nZXRQb3NEaXNwbGF5Q2xhc3Nlcyggby5jbGFzc2VzLm1vZGFsICkgKyBcIiBcIiArIG8uY2xhc3Nlcy5tb2RhbE9wZW47XHJcblx0XHRcdFx0XHRpZiAoIHNlbGYuX21vZGFsICkge1xyXG5cdFx0XHRcdFx0XHRzZWxmLl9tb2RhbFxyXG5cdFx0XHRcdFx0XHRcdC5hZGRDbGFzcyggc2VsZi5fbW9kYWxPcGVuQ2xhc3NlcyApXHJcblx0XHRcdFx0XHRcdFx0LmhlaWdodCggTWF0aC5tYXgoIHNlbGYuX21vZGFsLmhlaWdodCgpLCBzZWxmLmRvY3VtZW50LmhlaWdodCgpICkgKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9LFxyXG5cdFx0XHRcdGNvbXBsZXRlID0gZnVuY3Rpb24oKSB7XHJcblxyXG5cdFx0XHRcdFx0Ly8gQmFpbCBpZiB0aGUgcGFuZWwgd2FzIGNsb3NlZCBiZWZvcmUgdGhlIG9wZW5pbmcgYW5pbWF0aW9uIGhhcyBjb21wbGV0ZWRcclxuXHRcdFx0XHRcdGlmICggIXNlbGYuX29wZW4gKSB7XHJcblx0XHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRpZiAoIG8uZGlzcGxheSAhPT0gXCJvdmVybGF5XCIgKSB7XHJcblx0XHRcdFx0XHRcdHNlbGYuX3dyYXBwZXIuYWRkQ2xhc3MoIG8uY2xhc3Nlcy5wYWdlQ29udGVudFByZWZpeCArIFwiLW9wZW5cIiApO1xyXG5cdFx0XHRcdFx0XHRzZWxmLl9maXhlZFRvb2xiYXJzKCkuYWRkQ2xhc3MoIG8uY2xhc3Nlcy5wYWdlQ29udGVudFByZWZpeCArIFwiLW9wZW5cIiApO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdHNlbGYuX2JpbmRGaXhMaXN0ZW5lcigpO1xyXG5cclxuXHRcdFx0XHRcdHNlbGYuX3RyaWdnZXIoIFwib3BlblwiICk7XHJcblxyXG5cdFx0XHRcdFx0c2VsZi5fb3BlbmVkUGFnZSA9IHNlbGYuX3BhZ2UoKTtcclxuXHRcdFx0XHR9O1xyXG5cclxuXHRcdFx0c2VsZi5fdHJpZ2dlciggXCJiZWZvcmVvcGVuXCIgKTtcclxuXHJcblx0XHRcdGlmICggc2VsZi5fcGFnZSgpLmpxbURhdGEoIFwicGFuZWxcIiApID09PSBcIm9wZW5cIiApIHtcclxuXHRcdFx0XHRzZWxmLl9vbiggc2VsZi5kb2N1bWVudCwge1xyXG5cdFx0XHRcdFx0XCJwYW5lbGNsb3NlXCI6IF9vcGVuUGFuZWxcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRfb3BlblBhbmVsKCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHNlbGYuX29wZW4gPSB0cnVlO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdGNsb3NlOiBmdW5jdGlvbiggaW1tZWRpYXRlICkge1xyXG5cdFx0aWYgKCB0aGlzLl9vcGVuICkge1xyXG5cdFx0XHR2YXIgc2VsZiA9IHRoaXMsXHJcblx0XHRcdFx0byA9IHRoaXMub3B0aW9ucyxcclxuXHJcblx0XHRcdFx0X2Nsb3NlUGFuZWwgPSBmdW5jdGlvbigpIHtcclxuXHJcblx0XHRcdFx0XHRzZWxmLmVsZW1lbnQucmVtb3ZlQ2xhc3MoIG8uY2xhc3Nlcy5wYW5lbE9wZW4gKTtcclxuXHJcblx0XHRcdFx0XHRpZiAoIG8uZGlzcGxheSAhPT0gXCJvdmVybGF5XCIgKSB7XHJcblx0XHRcdFx0XHRcdHNlbGYuX3dyYXBwZXIucmVtb3ZlQ2xhc3MoIHNlbGYuX3BhZ2VDb250ZW50T3BlbkNsYXNzZXMgKTtcclxuXHRcdFx0XHRcdFx0c2VsZi5fZml4ZWRUb29sYmFycygpLnJlbW92ZUNsYXNzKCBzZWxmLl9wYWdlQ29udGVudE9wZW5DbGFzc2VzICk7XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0aWYgKCAhaW1tZWRpYXRlICYmICQuc3VwcG9ydC5jc3NUcmFuc2Zvcm0zZCAmJiAhIW8uYW5pbWF0ZSApIHtcclxuXHRcdFx0XHRcdFx0KCBzZWxmLl93cmFwcGVyIHx8IHNlbGYuZWxlbWVudCApXHJcblx0XHRcdFx0XHRcdFx0LmFuaW1hdGlvbkNvbXBsZXRlKCBjb21wbGV0ZSwgXCJ0cmFuc2l0aW9uXCIgKTtcclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdHNldFRpbWVvdXQoIGNvbXBsZXRlLCAwICk7XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0aWYgKCBzZWxmLl9tb2RhbCApIHtcclxuXHRcdFx0XHRcdFx0c2VsZi5fbW9kYWxcclxuXHRcdFx0XHRcdFx0XHQucmVtb3ZlQ2xhc3MoIHNlbGYuX21vZGFsT3BlbkNsYXNzZXMgKVxyXG5cdFx0XHRcdFx0XHRcdC5oZWlnaHQoIFwiXCIgKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9LFxyXG5cdFx0XHRcdGNvbXBsZXRlID0gZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRpZiAoIG8udGhlbWUgJiYgby5kaXNwbGF5ICE9PSBcIm92ZXJsYXlcIiApIHtcclxuXHRcdFx0XHRcdFx0c2VsZi5fcGFnZSgpLnBhcmVudCgpLnJlbW92ZUNsYXNzKCBvLmNsYXNzZXMucGFnZUNvbnRhaW5lciArIFwiLXRoZW1lZCBcIiArIG8uY2xhc3Nlcy5wYWdlQ29udGFpbmVyICsgXCItXCIgKyBvLnRoZW1lICk7XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0c2VsZi5lbGVtZW50LmFkZENsYXNzKCBvLmNsYXNzZXMucGFuZWxDbG9zZWQgKTtcclxuXHJcblx0XHRcdFx0XHRpZiAoIG8uZGlzcGxheSAhPT0gXCJvdmVybGF5XCIgKSB7XHJcblx0XHRcdFx0XHRcdHNlbGYuX3BhZ2UoKS5wYXJlbnQoKS5yZW1vdmVDbGFzcyggby5jbGFzc2VzLnBhZ2VDb250YWluZXIgKTtcclxuXHRcdFx0XHRcdFx0c2VsZi5fd3JhcHBlci5yZW1vdmVDbGFzcyggby5jbGFzc2VzLnBhZ2VDb250ZW50UHJlZml4ICsgXCItb3BlblwiICk7XHJcblx0XHRcdFx0XHRcdHNlbGYuX2ZpeGVkVG9vbGJhcnMoKS5yZW1vdmVDbGFzcyggby5jbGFzc2VzLnBhZ2VDb250ZW50UHJlZml4ICsgXCItb3BlblwiICk7XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0aWYgKCAkLnN1cHBvcnQuY3NzVHJhbnNmb3JtM2QgJiYgISFvLmFuaW1hdGUgJiYgby5kaXNwbGF5ICE9PSBcIm92ZXJsYXlcIiApIHtcclxuXHRcdFx0XHRcdFx0c2VsZi5fd3JhcHBlci5yZW1vdmVDbGFzcyggby5jbGFzc2VzLmFuaW1hdGUgKTtcclxuXHRcdFx0XHRcdFx0c2VsZi5fZml4ZWRUb29sYmFycygpLnJlbW92ZUNsYXNzKCBvLmNsYXNzZXMuYW5pbWF0ZSApO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdHNlbGYuX2ZpeFBhbmVsKCk7XHJcblx0XHRcdFx0XHRzZWxmLl91bmJpbmRGaXhMaXN0ZW5lcigpO1xyXG5cdFx0XHRcdFx0JC5tb2JpbGUucmVzZXRBY3RpdmVQYWdlSGVpZ2h0KCk7XHJcblxyXG5cdFx0XHRcdFx0c2VsZi5fcGFnZSgpLmpxbVJlbW92ZURhdGEoIFwicGFuZWxcIiApO1xyXG5cclxuXHRcdFx0XHRcdHNlbGYuX3RyaWdnZXIoIFwiY2xvc2VcIiApO1xyXG5cclxuXHRcdFx0XHRcdHNlbGYuX29wZW5lZFBhZ2UgPSBudWxsO1xyXG5cdFx0XHRcdH07XHJcblxyXG5cdFx0XHRzZWxmLl90cmlnZ2VyKCBcImJlZm9yZWNsb3NlXCIgKTtcclxuXHJcblx0XHRcdF9jbG9zZVBhbmVsKCk7XHJcblxyXG5cdFx0XHRzZWxmLl9vcGVuID0gZmFsc2U7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0dG9nZ2xlOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXNbIHRoaXMuX29wZW4gPyBcImNsb3NlXCIgOiBcIm9wZW5cIiBdKCk7XHJcblx0fSxcclxuXHJcblx0X2Rlc3Ryb3k6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIG90aGVyUGFuZWxzLFxyXG5cdFx0byA9IHRoaXMub3B0aW9ucyxcclxuXHRcdG11bHRpcGxlUGFuZWxzID0gKCAkKCBcImJvZHkgPiA6bW9iaWxlLXBhbmVsXCIgKS5sZW5ndGggKyAkLm1vYmlsZS5hY3RpdmVQYWdlLmZpbmQoIFwiOm1vYmlsZS1wYW5lbFwiICkubGVuZ3RoICkgPiAxO1xyXG5cclxuXHRcdGlmICggby5kaXNwbGF5ICE9PSBcIm92ZXJsYXlcIiApIHtcclxuXHJcblx0XHRcdC8vICByZW1vdmUgdGhlIHdyYXBwZXIgaWYgbm90IGluIHVzZSBieSBhbm90aGVyIHBhbmVsXHJcblx0XHRcdG90aGVyUGFuZWxzID0gJCggXCJib2R5ID4gOm1vYmlsZS1wYW5lbFwiICkuYWRkKCAkLm1vYmlsZS5hY3RpdmVQYWdlLmZpbmQoIFwiOm1vYmlsZS1wYW5lbFwiICkgKTtcclxuXHRcdFx0aWYgKCBvdGhlclBhbmVscy5ub3QoIFwiLnVpLXBhbmVsLWRpc3BsYXktb3ZlcmxheVwiICkubm90KCB0aGlzLmVsZW1lbnQgKS5sZW5ndGggPT09IDAgKSB7XHJcblx0XHRcdFx0dGhpcy5fd3JhcHBlci5jaGlsZHJlbigpLnVud3JhcCgpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoIHRoaXMuX29wZW4gKSB7XHJcblxyXG5cdFx0XHRcdHRoaXMuX2ZpeGVkVG9vbGJhcnMoKS5yZW1vdmVDbGFzcyggby5jbGFzc2VzLnBhZ2VDb250ZW50UHJlZml4ICsgXCItb3BlblwiICk7XHJcblxyXG5cdFx0XHRcdGlmICggJC5zdXBwb3J0LmNzc1RyYW5zZm9ybTNkICYmICEhby5hbmltYXRlICkge1xyXG5cdFx0XHRcdFx0dGhpcy5fZml4ZWRUb29sYmFycygpLnJlbW92ZUNsYXNzKCBvLmNsYXNzZXMuYW5pbWF0ZSApO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0dGhpcy5fcGFnZSgpLnBhcmVudCgpLnJlbW92ZUNsYXNzKCBvLmNsYXNzZXMucGFnZUNvbnRhaW5lciApO1xyXG5cclxuXHRcdFx0XHRpZiAoIG8udGhlbWUgKSB7XHJcblx0XHRcdFx0XHR0aGlzLl9wYWdlKCkucGFyZW50KCkucmVtb3ZlQ2xhc3MoIG8uY2xhc3Nlcy5wYWdlQ29udGFpbmVyICsgXCItdGhlbWVkIFwiICsgby5jbGFzc2VzLnBhZ2VDb250YWluZXIgKyBcIi1cIiArIG8udGhlbWUgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRpZiAoICFtdWx0aXBsZVBhbmVscyApIHtcclxuXHJcblx0XHRcdHRoaXMuZG9jdW1lbnQub2ZmKCBcInBhbmVsb3BlbiBwYW5lbGNsb3NlXCIgKTtcclxuXHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCB0aGlzLl9vcGVuICkge1xyXG5cdFx0XHR0aGlzLl9wYWdlKCkuanFtUmVtb3ZlRGF0YSggXCJwYW5lbFwiICk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5fcGFuZWxJbm5lci5jaGlsZHJlbigpLnVud3JhcCgpO1xyXG5cclxuXHRcdHRoaXMuZWxlbWVudFxyXG5cdFx0XHQucmVtb3ZlQ2xhc3MoIFsgdGhpcy5fZ2V0UGFuZWxDbGFzc2VzKCksIG8uY2xhc3Nlcy5wYW5lbE9wZW4sIG8uY2xhc3Nlcy5hbmltYXRlIF0uam9pbiggXCIgXCIgKSApXHJcblx0XHRcdC5vZmYoIFwic3dpcGVsZWZ0LnBhbmVsIHN3aXBlcmlnaHQucGFuZWxcIiApXHJcblx0XHRcdC5vZmYoIFwicGFuZWxiZWZvcmVvcGVuXCIgKVxyXG5cdFx0XHQub2ZmKCBcInBhbmVsaGlkZVwiIClcclxuXHRcdFx0Lm9mZiggXCJrZXl1cC5wYW5lbFwiIClcclxuXHRcdFx0Lm9mZiggXCJ1cGRhdGVsYXlvdXRcIiApO1xyXG5cclxuXHRcdGlmICggdGhpcy5fbW9kYWwgKSB7XHJcblx0XHRcdHRoaXMuX21vZGFsLnJlbW92ZSgpO1xyXG5cdFx0fVxyXG5cdH1cclxufSk7XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcbiQud2lkZ2V0KCBcIm1vYmlsZS50YWJsZVwiLCB7XHJcblx0b3B0aW9uczoge1xyXG5cdFx0Y2xhc3Nlczoge1xyXG5cdFx0XHR0YWJsZTogXCJ1aS10YWJsZVwiXHJcblx0XHR9LFxyXG5cdFx0ZW5oYW5jZWQ6IGZhbHNlXHJcblx0fSxcclxuXHJcblx0X2NyZWF0ZTogZnVuY3Rpb24oKSB7XHJcblx0XHRpZiAoICF0aGlzLm9wdGlvbnMuZW5oYW5jZWQgKSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudC5hZGRDbGFzcyggdGhpcy5vcHRpb25zLmNsYXNzZXMudGFibGUgKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBleHRlbmQgaGVyZSwgYXNzaWduIG9uIHJlZnJlc2ggPiBfc2V0SGVhZGVyc1xyXG5cdFx0JC5leHRlbmQoIHRoaXMsIHtcclxuXHJcblx0XHRcdC8vIEV4cG9zZSBoZWFkZXJzIGFuZCBhbGxIZWFkZXJzIHByb3BlcnRpZXMgb24gdGhlIHdpZGdldFxyXG5cdFx0XHQvLyBoZWFkZXJzIHJlZmVyZW5jZXMgdGhlIFRIcyB3aXRoaW4gdGhlIGZpcnN0IFRSIGluIHRoZSB0YWJsZVxyXG5cdFx0XHRoZWFkZXJzOiB1bmRlZmluZWQsXHJcblxyXG5cdFx0XHQvLyBhbGxIZWFkZXJzIHJlZmVyZW5jZXMgaGVhZGVycywgcGx1cyBhbGwgVEhzIGluIHRoZSB0aGVhZCwgd2hpY2ggbWF5XHJcblx0XHRcdC8vIGluY2x1ZGUgc2V2ZXJhbCByb3dzLCBvciBub3RcclxuXHRcdFx0YWxsSGVhZGVyczogdW5kZWZpbmVkXHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLl9yZWZyZXNoKCB0cnVlICk7XHJcblx0fSxcclxuXHJcblx0X3NldEhlYWRlcnM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHRycyA9IHRoaXMuZWxlbWVudC5maW5kKCBcInRoZWFkIHRyXCIgKTtcclxuXHJcblx0XHR0aGlzLmhlYWRlcnMgPSB0aGlzLmVsZW1lbnQuZmluZCggXCJ0cjplcSgwKVwiICkuY2hpbGRyZW4oKTtcclxuXHRcdHRoaXMuYWxsSGVhZGVycyA9IHRoaXMuaGVhZGVycy5hZGQoIHRycy5jaGlsZHJlbigpICk7XHJcblx0fSxcclxuXHJcblx0cmVmcmVzaDogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9yZWZyZXNoKCk7XHJcblx0fSxcclxuXHJcblx0cmVidWlsZDogJC5ub29wLFxyXG5cclxuXHRfcmVmcmVzaDogZnVuY3Rpb24oIC8qIGNyZWF0ZSAqLyApIHtcclxuXHRcdHZhciB0YWJsZSA9IHRoaXMuZWxlbWVudCxcclxuXHRcdFx0dHJzID0gdGFibGUuZmluZCggXCJ0aGVhZCB0clwiICk7XHJcblxyXG5cdFx0Ly8gdXBkYXRpbmcgaGVhZGVycyBvbiByZWZyZXNoIChmaXhlcyAjNTg4MClcclxuXHRcdHRoaXMuX3NldEhlYWRlcnMoKTtcclxuXHJcblx0XHQvLyBJdGVyYXRlIG92ZXIgdGhlIHRyc1xyXG5cdFx0dHJzLmVhY2goIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgY29sdW1uQ291bnQgPSAwO1xyXG5cclxuXHRcdFx0Ly8gSXRlcmF0ZSBvdmVyIHRoZSBjaGlsZHJlbiBvZiB0aGUgdHJcclxuXHRcdFx0JCggdGhpcyApLmNoaWxkcmVuKCkuZWFjaCggZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0dmFyIHNwYW4gPSBwYXJzZUludCggdGhpcy5nZXRBdHRyaWJ1dGUoIFwiY29sc3BhblwiICksIDEwICksXHJcblx0XHRcdFx0XHRzZWxlY3RvciA9IFwiOm50aC1jaGlsZChcIiArICggY29sdW1uQ291bnQgKyAxICkgKyBcIilcIixcclxuXHRcdFx0XHRcdGo7XHJcblxyXG5cdFx0XHRcdHRoaXMuc2V0QXR0cmlidXRlKCBcImRhdGEtXCIgKyAkLm1vYmlsZS5ucyArIFwiY29sc3RhcnRcIiwgY29sdW1uQ291bnQgKyAxICk7XHJcblxyXG5cdFx0XHRcdGlmICggc3BhbiApIHtcclxuXHRcdFx0XHRcdGZvciggaiA9IDA7IGogPCBzcGFuIC0gMTsgaisrICkge1xyXG5cdFx0XHRcdFx0XHRjb2x1bW5Db3VudCsrO1xyXG5cdFx0XHRcdFx0XHRzZWxlY3RvciArPSBcIiwgOm50aC1jaGlsZChcIiArICggY29sdW1uQ291bnQgKyAxICkgKyBcIilcIjtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vIFN0b3JlIFwiY2VsbHNcIiBkYXRhIG9uIGhlYWRlciBhcyBhIHJlZmVyZW5jZSB0byBhbGwgY2VsbHMgaW4gdGhlXHJcblx0XHRcdFx0Ly8gc2FtZSBjb2x1bW4gYXMgdGhpcyBUSFxyXG5cdFx0XHRcdCQoIHRoaXMgKS5qcW1EYXRhKCBcImNlbGxzXCIsIHRhYmxlLmZpbmQoIFwidHJcIiApLm5vdCggdHJzLmVxKCAwICkgKS5ub3QoIHRoaXMgKS5jaGlsZHJlbiggc2VsZWN0b3IgKSApO1xyXG5cclxuXHRcdFx0XHRjb2x1bW5Db3VudCsrO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cdH1cclxufSk7XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG4kLndpZGdldCggXCJtb2JpbGUudGFibGVcIiwgJC5tb2JpbGUudGFibGUsIHtcclxuXHRvcHRpb25zOiB7XHJcblx0XHRtb2RlOiBcImNvbHVtbnRvZ2dsZVwiLFxyXG5cdFx0Y29sdW1uQnRuVGhlbWU6IG51bGwsXHJcblx0XHRjb2x1bW5Qb3B1cFRoZW1lOiBudWxsLFxyXG5cdFx0Y29sdW1uQnRuVGV4dDogXCJDb2x1bW5zLi4uXCIsXHJcblx0XHRjbGFzc2VzOiAkLmV4dGVuZCggJC5tb2JpbGUudGFibGUucHJvdG90eXBlLm9wdGlvbnMuY2xhc3Nlcywge1xyXG5cdFx0XHRwb3B1cDogXCJ1aS10YWJsZS1jb2x1bW50b2dnbGUtcG9wdXBcIixcclxuXHRcdFx0Y29sdW1uQnRuOiBcInVpLXRhYmxlLWNvbHVtbnRvZ2dsZS1idG5cIixcclxuXHRcdFx0cHJpb3JpdHlQcmVmaXg6IFwidWktdGFibGUtcHJpb3JpdHktXCIsXHJcblx0XHRcdGNvbHVtblRvZ2dsZVRhYmxlOiBcInVpLXRhYmxlLWNvbHVtbnRvZ2dsZVwiXHJcblx0XHR9KVxyXG5cdH0sXHJcblxyXG5cdF9jcmVhdGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5fc3VwZXIoKTtcclxuXHJcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5tb2RlICE9PSBcImNvbHVtbnRvZ2dsZVwiICkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0JC5leHRlbmQoIHRoaXMsIHtcclxuXHRcdFx0X21lbnU6IG51bGxcclxuXHRcdH0pO1xyXG5cclxuXHRcdGlmICggdGhpcy5vcHRpb25zLmVuaGFuY2VkICkge1xyXG5cdFx0XHR0aGlzLl9tZW51ID0gJCggdGhpcy5kb2N1bWVudFsgMCBdLmdldEVsZW1lbnRCeUlkKCB0aGlzLl9pZCgpICsgXCItcG9wdXBcIiApICkuY2hpbGRyZW4oKS5maXJzdCgpO1xyXG5cdFx0XHR0aGlzLl9hZGRUb2dnbGVzKCB0aGlzLl9tZW51LCB0cnVlICk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLl9tZW51ID0gdGhpcy5fZW5oYW5jZUNvbFRvZ2dsZSgpO1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoIHRoaXMub3B0aW9ucy5jbGFzc2VzLmNvbHVtblRvZ2dsZVRhYmxlICk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5fc2V0dXBFdmVudHMoKTtcclxuXHJcblx0XHR0aGlzLl9zZXRUb2dnbGVTdGF0ZSgpO1xyXG5cdH0sXHJcblxyXG5cdF9pZDogZnVuY3Rpb24oKSB7XHJcblx0XHRyZXR1cm4gKCB0aGlzLmVsZW1lbnQuYXR0ciggXCJpZFwiICkgfHwgKCB0aGlzLndpZGdldE5hbWUgKyB0aGlzLnV1aWQgKSApO1xyXG5cdH0sXHJcblxyXG5cdF9zZXR1cEV2ZW50czogZnVuY3Rpb24oKSB7XHJcblx0XHQvL05PVEU6IGlucHV0cyBhcmUgYm91bmQgaW4gYmluZFRvZ2dsZXMsXHJcblx0XHQvLyBzbyBpdCBjYW4gYmUgY2FsbGVkIG9uIHJlZnJlc2gsIHRvb1xyXG5cclxuXHRcdC8vIHVwZGF0ZSBjb2x1bW4gdG9nZ2xlcyBvbiByZXNpemVcclxuXHRcdHRoaXMuX29uKCB0aGlzLndpbmRvdywge1xyXG5cdFx0XHR0aHJvdHRsZWRyZXNpemU6IFwiX3NldFRvZ2dsZVN0YXRlXCJcclxuXHRcdH0pO1xyXG5cdFx0dGhpcy5fb24oIHRoaXMuX21lbnUsIHtcclxuXHRcdFx0XCJjaGFuZ2UgaW5wdXRcIjogXCJfbWVudUlucHV0Q2hhbmdlXCJcclxuXHRcdH0pO1xyXG5cdH0sXHJcblxyXG5cdF9hZGRUb2dnbGVzOiBmdW5jdGlvbiggbWVudSwga2VlcCApIHtcclxuXHRcdHZhciBpbnB1dHMsXHJcblx0XHRcdGNoZWNrYm94SW5kZXggPSAwLFxyXG5cdFx0XHRvcHRzID0gdGhpcy5vcHRpb25zLFxyXG5cdFx0XHRjb250YWluZXIgPSBtZW51LmNvbnRyb2xncm91cCggXCJjb250YWluZXJcIiApO1xyXG5cclxuXHRcdC8vIGFsbG93IHVwZGF0ZSBvZiBtZW51IG9uIHJlZnJlc2ggKGZpeGVzICM1ODgwKVxyXG5cdFx0aWYgKCBrZWVwICkge1xyXG5cdFx0XHRpbnB1dHMgPSBtZW51LmZpbmQoIFwiaW5wdXRcIiApO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0Y29udGFpbmVyLmVtcHR5KCk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gY3JlYXRlIHRoZSBoaWRlL3Nob3cgdG9nZ2xlc1xyXG5cdFx0dGhpcy5oZWFkZXJzLm5vdCggXCJ0ZFwiICkuZWFjaCggZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBpbnB1dCwgY2VsbHMsXHJcblx0XHRcdFx0aGVhZGVyID0gJCggdGhpcyApLFxyXG5cdFx0XHRcdHByaW9yaXR5ID0gJC5tb2JpbGUuZ2V0QXR0cmlidXRlKCB0aGlzLCBcInByaW9yaXR5XCIgKTtcclxuXHJcblx0XHRcdGlmICggcHJpb3JpdHkgKSB7XHJcblx0XHRcdFx0Y2VsbHMgPSBoZWFkZXIuYWRkKCBoZWFkZXIuanFtRGF0YSggXCJjZWxsc1wiICkgKTtcclxuXHRcdFx0XHRjZWxscy5hZGRDbGFzcyggb3B0cy5jbGFzc2VzLnByaW9yaXR5UHJlZml4ICsgcHJpb3JpdHkgKTtcclxuXHJcblx0XHRcdFx0Ly8gTWFrZSBzdXJlIHRoZSAobmV3PykgY2hlY2tib3ggaXMgYXNzb2NpYXRlZCB3aXRoIGl0cyBoZWFkZXIgdmlhIC5qcW1EYXRhKCkgYW5kXHJcblx0XHRcdFx0Ly8gdGhhdCwgdmljZSB2ZXJzYSwgdGhlIGhlYWRlciBpcyBhbHNvIGFzc29jaWF0ZWQgd2l0aCB0aGUgY2hlY2tib3hcclxuXHRcdFx0XHRpbnB1dCA9ICgga2VlcCA/IGlucHV0cy5lcSggY2hlY2tib3hJbmRleCsrICkgOlxyXG5cdFx0XHRcdFx0JChcIjxsYWJlbD48aW5wdXQgdHlwZT0nY2hlY2tib3gnIGNoZWNrZWQgLz5cIiArXHJcblx0XHRcdFx0XHRcdCggaGVhZGVyLmNoaWxkcmVuKCBcImFiYnJcIiApLmZpcnN0KCkuYXR0ciggXCJ0aXRsZVwiICkgfHxcclxuXHRcdFx0XHRcdFx0XHRoZWFkZXIudGV4dCgpICkgK1xyXG5cdFx0XHRcdFx0XHRcIjwvbGFiZWw+XCIgKVxyXG5cdFx0XHRcdFx0XHQuYXBwZW5kVG8oIGNvbnRhaW5lciApXHJcblx0XHRcdFx0XHRcdC5jaGlsZHJlbiggMCApXHJcblx0XHRcdFx0XHRcdC5jaGVja2JveHJhZGlvKCB7XHJcblx0XHRcdFx0XHRcdFx0dGhlbWU6IG9wdHMuY29sdW1uUG9wdXBUaGVtZVxyXG5cdFx0XHRcdFx0XHR9KSApXHJcblxyXG5cdFx0XHRcdFx0XHQvLyBBc3NvY2lhdGUgdGhlIGhlYWRlciB3aXRoIHRoZSBjaGVja2JveFxyXG5cdFx0XHRcdFx0XHQuanFtRGF0YSggXCJoZWFkZXJcIiwgaGVhZGVyIClcclxuXHRcdFx0XHRcdFx0LmpxbURhdGEoIFwiY2VsbHNcIiwgY2VsbHMgKTtcclxuXHJcblx0XHRcdFx0Ly8gQXNzb2NpYXRlIHRoZSBjaGVja2JveCB3aXRoIHRoZSBoZWFkZXJcclxuXHRcdFx0XHRoZWFkZXIuanFtRGF0YSggXCJpbnB1dFwiLCBpbnB1dCApO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBzZXQgYmluZGluZ3MgaGVyZVxyXG5cdFx0aWYgKCAha2VlcCApIHtcclxuXHRcdFx0bWVudS5jb250cm9sZ3JvdXAoIFwicmVmcmVzaFwiICk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X21lbnVJbnB1dENoYW5nZTogZnVuY3Rpb24oIGV2dCApIHtcclxuXHRcdHZhciBpbnB1dCA9ICQoIGV2dC50YXJnZXQgKSxcclxuXHRcdFx0Y2hlY2tlZCA9IGlucHV0WyAwIF0uY2hlY2tlZDtcclxuXHJcblx0XHRpbnB1dC5qcW1EYXRhKCBcImNlbGxzXCIgKVxyXG5cdFx0XHQudG9nZ2xlQ2xhc3MoIFwidWktdGFibGUtY2VsbC1oaWRkZW5cIiwgIWNoZWNrZWQgKVxyXG5cdFx0XHQudG9nZ2xlQ2xhc3MoIFwidWktdGFibGUtY2VsbC12aXNpYmxlXCIsIGNoZWNrZWQgKTtcclxuXHR9LFxyXG5cclxuXHRfdW5sb2NrQ2VsbHM6IGZ1bmN0aW9uKCBjZWxscyApIHtcclxuXHRcdC8vIGFsbG93IGhpZGUvc2hvdyB2aWEgQ1NTIG9ubHkgPSByZW1vdmUgYWxsIHRvZ2dsZS1sb2Nrc1xyXG5cdFx0Y2VsbHMucmVtb3ZlQ2xhc3MoIFwidWktdGFibGUtY2VsbC1oaWRkZW4gdWktdGFibGUtY2VsbC12aXNpYmxlXCIpO1xyXG5cdH0sXHJcblxyXG5cdF9lbmhhbmNlQ29sVG9nZ2xlOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBpZCAsIG1lbnVCdXR0b24sIHBvcHVwLCBtZW51LFxyXG5cdFx0XHR0YWJsZSA9IHRoaXMuZWxlbWVudCxcclxuXHRcdFx0b3B0cyA9IHRoaXMub3B0aW9ucyxcclxuXHRcdFx0bnMgPSAkLm1vYmlsZS5ucyxcclxuXHRcdFx0ZnJhZ21lbnQgPSB0aGlzLmRvY3VtZW50WyAwIF0uY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xyXG5cclxuXHRcdGlkID0gdGhpcy5faWQoKSArIFwiLXBvcHVwXCI7XHJcblx0XHRtZW51QnV0dG9uID0gJCggXCI8YSBocmVmPScjXCIgKyBpZCArIFwiJyBcIiArXHJcblx0XHRcdFwiY2xhc3M9J1wiICsgb3B0cy5jbGFzc2VzLmNvbHVtbkJ0biArIFwiIHVpLWJ0biBcIiArXHJcblx0XHRcdFwidWktYnRuLVwiICsgKCBvcHRzLmNvbHVtbkJ0blRoZW1lIHx8IFwiYVwiICkgK1xyXG5cdFx0XHRcIiB1aS1jb3JuZXItYWxsIHVpLXNoYWRvdyB1aS1taW5pJyBcIiArXHJcblx0XHRcdFwiZGF0YS1cIiArIG5zICsgXCJyZWw9J3BvcHVwJz5cIiArIG9wdHMuY29sdW1uQnRuVGV4dCArIFwiPC9hPlwiICk7XHJcblx0XHRwb3B1cCA9ICQoIFwiPGRpdiBjbGFzcz0nXCIgKyBvcHRzLmNsYXNzZXMucG9wdXAgKyBcIicgaWQ9J1wiICsgaWQgKyBcIic+PC9kaXY+XCIgKTtcclxuXHRcdG1lbnUgPSAkKCBcIjxmaWVsZHNldD48L2ZpZWxkc2V0PlwiICkuY29udHJvbGdyb3VwKCk7XHJcblxyXG5cdFx0Ly8gc2V0IGV4dGVuc2lvbiBoZXJlLCBzZW5kIFwiZmFsc2VcIiB0byB0cmlnZ2VyIGJ1aWxkL3JlYnVpbGRcclxuXHRcdHRoaXMuX2FkZFRvZ2dsZXMoIG1lbnUsIGZhbHNlICk7XHJcblxyXG5cdFx0bWVudS5hcHBlbmRUbyggcG9wdXAgKTtcclxuXHJcblx0XHRmcmFnbWVudC5hcHBlbmRDaGlsZCggcG9wdXBbIDAgXSApO1xyXG5cdFx0ZnJhZ21lbnQuYXBwZW5kQ2hpbGQoIG1lbnVCdXR0b25bIDAgXSApO1xyXG5cdFx0dGFibGUuYmVmb3JlKCBmcmFnbWVudCApO1xyXG5cclxuXHRcdHBvcHVwLnBvcHVwKCk7XHJcblxyXG5cdFx0cmV0dXJuIG1lbnU7XHJcblx0fSxcclxuXHJcblx0cmVidWlsZDogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9zdXBlcigpO1xyXG5cclxuXHRcdGlmICggdGhpcy5vcHRpb25zLm1vZGUgPT09IFwiY29sdW1udG9nZ2xlXCIgKSB7XHJcblx0XHRcdC8vIE5PVEU6IHJlYnVpbGQgcGFzc2VzIFwiZmFsc2VcIiwgd2hpbGUgcmVmcmVzaCBwYXNzZXMgXCJ1bmRlZmluZWRcIlxyXG5cdFx0XHQvLyBib3RoIHJlZnJlc2ggdGhlIHRhYmxlLCBidXQgaW5zaWRlIGFkZFRvZ2dsZXMsICFmYWxzZSB3aWxsIGJlIHRydWUsXHJcblx0XHRcdC8vIHNvIGEgcmVidWlsZCBjYWxsIGNhbiBiZSBpbmRlbnRpZmllZFxyXG5cdFx0XHR0aGlzLl9yZWZyZXNoKCBmYWxzZSApO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9yZWZyZXNoOiBmdW5jdGlvbiggY3JlYXRlICkge1xyXG5cdFx0dmFyIGhlYWRlcnMsIGhpZGRlbkNvbHVtbnMsIGluZGV4O1xyXG5cclxuXHRcdC8vIENhbGxpbmcgX3N1cGVyKCkgaGVyZSB1cGRhdGVzIHRoaXMuaGVhZGVyc1xyXG5cdFx0dGhpcy5fc3VwZXIoIGNyZWF0ZSApO1xyXG5cclxuXHRcdGlmICggIWNyZWF0ZSAmJiB0aGlzLm9wdGlvbnMubW9kZSA9PT0gXCJjb2x1bW50b2dnbGVcIiApIHtcclxuXHRcdFx0aGVhZGVycyA9IHRoaXMuaGVhZGVycztcclxuXHRcdFx0aGlkZGVuQ29sdW1ucyA9IFtdO1xyXG5cclxuXHRcdFx0Ly8gRmluZCB0aGUgaW5kZXggb2YgdGhlIGNvbHVtbiBoZWFkZXIgYXNzb2NpYXRlZCB3aXRoIGVhY2ggb2xkIGNoZWNrYm94IGFtb25nIHRoZVxyXG5cdFx0XHQvLyBwb3N0LXJlZnJlc2ggaGVhZGVycyBhbmQsIGlmIHRoZSBoZWFkZXIgaXMgc3RpbGwgdGhlcmUsIG1ha2Ugc3VyZSB0aGUgY29ycmVzcG9uZGluZ1xyXG5cdFx0XHQvLyBjb2x1bW4gd2lsbCBiZSBoaWRkZW4gaWYgdGhlIHByZS1yZWZyZXNoIGNoZWNrYm94IGluZGljYXRlcyB0aGF0IHRoZSBjb2x1bW4gaXNcclxuXHRcdFx0Ly8gaGlkZGVuIGJ5IHJlY29yZGluZyBpdHMgaW5kZXggaW4gdGhlIGFycmF5IG9mIGhpZGRlbiBjb2x1bW5zLlxyXG5cdFx0XHR0aGlzLl9tZW51LmZpbmQoIFwiaW5wdXRcIiApLmVhY2goIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHZhciBpbnB1dCA9ICQoIHRoaXMgKSxcclxuXHRcdFx0XHRcdGhlYWRlciA9IGlucHV0LmpxbURhdGEoIFwiaGVhZGVyXCIgKSxcclxuXHRcdFx0XHRcdGluZGV4ID0gaGVhZGVycy5pbmRleCggaGVhZGVyWyAwIF0gKTtcclxuXHJcblx0XHRcdFx0aWYgKCBpbmRleCA+IC0xICYmICFpbnB1dC5wcm9wKCBcImNoZWNrZWRcIiApICkge1xyXG5cclxuXHRcdFx0XHRcdC8vIFRoZSBjb2x1bW4gaGVhZGVyIGFzc29jaWF0ZWQgd2l0aCAvdGhpcy8gY2hlY2tib3ggaXMgc3RpbGwgcHJlc2VudCBpbiB0aGVcclxuXHRcdFx0XHRcdC8vIHBvc3QtcmVmcmVzaCB0YWJsZSBhbmQgdGhlIGNoZWNrYm94IGlzIG5vdCBjaGVja2VkLCBzbyB0aGUgY29sdW1uIGFzc29jaWF0ZWRcclxuXHRcdFx0XHRcdC8vIHdpdGggdGhpcyBjb2x1bW4gaGVhZGVyIGlzIGN1cnJlbnRseSBoaWRkZW4uIExldCdzIHJlY29yZCB0aGF0LlxyXG5cdFx0XHRcdFx0aGlkZGVuQ29sdW1ucy5wdXNoKCBpbmRleCApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHQvLyBjb2x1bW5zIG5vdCBiZWluZyByZXBsYWNlZCBtdXN0IGJlIGNsZWFyZWQgZnJvbSBpbnB1dCB0b2dnbGUtbG9ja3NcclxuXHRcdFx0dGhpcy5fdW5sb2NrQ2VsbHMoIHRoaXMuZWxlbWVudC5maW5kKCBcIi51aS10YWJsZS1jZWxsLWhpZGRlbiwgXCIgK1xyXG5cdFx0XHRcdFwiLnVpLXRhYmxlLWNlbGwtdmlzaWJsZVwiICkgKTtcclxuXHJcblx0XHRcdC8vIHVwZGF0ZSBjb2x1bW50b2dnbGVzIGFuZCBjZWxsc1xyXG5cdFx0XHR0aGlzLl9hZGRUb2dnbGVzKCB0aGlzLl9tZW51LCBjcmVhdGUgKTtcclxuXHJcblx0XHRcdC8vIEF0IHRoaXMgcG9pbnQgYWxsIGNvbHVtbnMgYXJlIHZpc2libGUsIHNvIHVuY2hlY2sgdGhlIGNoZWNrYm94ZXMgdGhhdCBjb3JyZXNwb25kIHRvXHJcblx0XHRcdC8vIHRob3NlIGNvbHVtbnMgd2UndmUgZm91bmQgdG8gYmUgaGlkZGVuXHJcblx0XHRcdGZvciAoIGluZGV4ID0gaGlkZGVuQ29sdW1ucy5sZW5ndGggLSAxIDsgaW5kZXggPiAtMSA7IGluZGV4LS0gKSB7XHJcblx0XHRcdFx0aGVhZGVycy5lcSggaGlkZGVuQ29sdW1uc1sgaW5kZXggXSApLmpxbURhdGEoIFwiaW5wdXRcIiApXHJcblx0XHRcdFx0XHQucHJvcCggXCJjaGVja2VkXCIsIGZhbHNlIClcclxuXHRcdFx0XHRcdC5jaGVja2JveHJhZGlvKCBcInJlZnJlc2hcIiApXHJcblx0XHRcdFx0XHQudHJpZ2dlciggXCJjaGFuZ2VcIiApO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X3NldFRvZ2dsZVN0YXRlOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX21lbnUuZmluZCggXCJpbnB1dFwiICkuZWFjaCggZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBjaGVja2JveCA9ICQoIHRoaXMgKTtcclxuXHJcblx0XHRcdHRoaXMuY2hlY2tlZCA9IGNoZWNrYm94LmpxbURhdGEoIFwiY2VsbHNcIiApLmVxKCAwICkuY3NzKCBcImRpc3BsYXlcIiApID09PSBcInRhYmxlLWNlbGxcIjtcclxuXHRcdFx0Y2hlY2tib3guY2hlY2tib3hyYWRpbyggXCJyZWZyZXNoXCIgKTtcclxuXHRcdH0pO1xyXG5cdH0sXHJcblxyXG5cdF9kZXN0cm95OiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX3N1cGVyKCk7XHJcblx0fVxyXG59KTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxuJC53aWRnZXQoIFwibW9iaWxlLnRhYmxlXCIsICQubW9iaWxlLnRhYmxlLCB7XHJcblx0b3B0aW9uczoge1xyXG5cdFx0bW9kZTogXCJyZWZsb3dcIixcclxuXHRcdGNsYXNzZXM6ICQuZXh0ZW5kKCAkLm1vYmlsZS50YWJsZS5wcm90b3R5cGUub3B0aW9ucy5jbGFzc2VzLCB7XHJcblx0XHRcdHJlZmxvd1RhYmxlOiBcInVpLXRhYmxlLXJlZmxvd1wiLFxyXG5cdFx0XHRjZWxsTGFiZWxzOiBcInVpLXRhYmxlLWNlbGwtbGFiZWxcIlxyXG5cdFx0fSlcclxuXHR9LFxyXG5cclxuXHRfY3JlYXRlOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX3N1cGVyKCk7XHJcblxyXG5cdFx0Ly8gSWYgaXQncyBub3QgcmVmbG93IG1vZGUsIHJldHVybiBoZXJlLlxyXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMubW9kZSAhPT0gXCJyZWZsb3dcIiApIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggIXRoaXMub3B0aW9ucy5lbmhhbmNlZCApIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50LmFkZENsYXNzKCB0aGlzLm9wdGlvbnMuY2xhc3Nlcy5yZWZsb3dUYWJsZSApO1xyXG5cclxuXHRcdFx0dGhpcy5fdXBkYXRlUmVmbG93KCk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0cmVidWlsZDogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9zdXBlcigpO1xyXG5cclxuXHRcdGlmICggdGhpcy5vcHRpb25zLm1vZGUgPT09IFwicmVmbG93XCIgKSB7XHJcblx0XHRcdHRoaXMuX3JlZnJlc2goIGZhbHNlICk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X3JlZnJlc2g6IGZ1bmN0aW9uKCBjcmVhdGUgKSB7XHJcblx0XHR0aGlzLl9zdXBlciggY3JlYXRlICk7XHJcblx0XHRpZiAoICFjcmVhdGUgJiYgdGhpcy5vcHRpb25zLm1vZGUgPT09IFwicmVmbG93XCIgKSB7XHJcblx0XHRcdHRoaXMuX3VwZGF0ZVJlZmxvdyggKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfdXBkYXRlUmVmbG93OiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciB0YWJsZSA9IHRoaXMsXHJcblx0XHRcdG9wdHMgPSB0aGlzLm9wdGlvbnM7XHJcblxyXG5cdFx0Ly8gZ2V0IGhlYWRlcnMgaW4gcmV2ZXJzZSBvcmRlciBzbyB0aGF0IHRvcC1sZXZlbCBoZWFkZXJzIGFyZSBhcHBlbmRlZCBsYXN0XHJcblx0XHQkKCB0YWJsZS5hbGxIZWFkZXJzLmdldCgpLnJldmVyc2UoKSApLmVhY2goIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgY2VsbHMgPSAkKCB0aGlzICkuanFtRGF0YSggXCJjZWxsc1wiICksXHJcblx0XHRcdFx0Y29sc3RhcnQgPSAkLm1vYmlsZS5nZXRBdHRyaWJ1dGUoIHRoaXMsIFwiY29sc3RhcnRcIiApLFxyXG5cdFx0XHRcdGhpZXJhcmNoeUNsYXNzID0gY2VsbHMubm90KCB0aGlzICkuZmlsdGVyKCBcInRoZWFkIHRoXCIgKS5sZW5ndGggJiYgXCIgdWktdGFibGUtY2VsbC1sYWJlbC10b3BcIixcclxuXHRcdFx0XHRjb250ZW50cyA9ICQoIHRoaXMgKS5jbG9uZSgpLmNvbnRlbnRzKCksXHJcblx0XHRcdFx0aXRlcmF0aW9uLCBmaWx0ZXI7XHJcblxyXG5cdFx0XHRcdGlmICggY29udGVudHMubGVuZ3RoID4gMCAgKSB7XHJcblxyXG5cdFx0XHRcdFx0aWYgKCBoaWVyYXJjaHlDbGFzcyApIHtcclxuXHRcdFx0XHRcdFx0aXRlcmF0aW9uID0gcGFyc2VJbnQoIHRoaXMuZ2V0QXR0cmlidXRlKCBcImNvbHNwYW5cIiApLCAxMCApO1xyXG5cdFx0XHRcdFx0XHRmaWx0ZXIgPSBcIlwiO1xyXG5cclxuXHRcdFx0XHRcdFx0aWYgKCBpdGVyYXRpb24gKSB7XHJcblx0XHRcdFx0XHRcdFx0ZmlsdGVyID0gXCJ0ZDpudGgtY2hpbGQoXCIrIGl0ZXJhdGlvbiArXCJuICsgXCIgKyAoIGNvbHN0YXJ0ICkgK1wiKVwiO1xyXG5cdFx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0XHR0YWJsZS5fYWRkTGFiZWxzKCBjZWxscy5maWx0ZXIoIGZpbHRlciApLFxyXG5cdFx0XHRcdFx0XHRcdG9wdHMuY2xhc3Nlcy5jZWxsTGFiZWxzICsgaGllcmFyY2h5Q2xhc3MsIGNvbnRlbnRzICk7XHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHR0YWJsZS5fYWRkTGFiZWxzKCBjZWxscywgb3B0cy5jbGFzc2VzLmNlbGxMYWJlbHMsIGNvbnRlbnRzICk7XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH0sXHJcblxyXG5cdF9hZGRMYWJlbHM6IGZ1bmN0aW9uKCBjZWxscywgbGFiZWwsIGNvbnRlbnRzICkge1xyXG5cdFx0aWYgKCBjb250ZW50cy5sZW5ndGggPT09IDEgJiYgY29udGVudHNbIDAgXS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSBcImFiYnJcIiApIHtcclxuXHRcdFx0Y29udGVudHMgPSBjb250ZW50cy5lcSggMCApLmF0dHIoIFwidGl0bGVcIiApO1xyXG5cdFx0fVxyXG5cdFx0Ly8gLm5vdCBmaXhlcyAjNjAwNlxyXG5cdFx0Y2VsbHNcclxuXHRcdFx0Lm5vdCggXCI6aGFzKGIuXCIgKyBsYWJlbCArIFwiKVwiIClcclxuXHRcdFx0XHQucHJlcGVuZCggJCggXCI8YiBjbGFzcz0nXCIgKyBsYWJlbCArIFwiJz48L2I+XCIgKS5hcHBlbmQoIGNvbnRlbnRzICkgKTtcclxuXHR9XHJcbn0pO1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG4vLyBUT0RPIHJlbmFtZSBmaWx0ZXJDYWxsYmFjay9kZXByZWNhdGUgYW5kIGRlZmF1bHQgdG8gdGhlIGl0ZW0gaXRzZWxmIGFzIHRoZSBmaXJzdCBhcmd1bWVudFxyXG52YXIgZGVmYXVsdEZpbHRlckNhbGxiYWNrID0gZnVuY3Rpb24oIGluZGV4LCBzZWFyY2hWYWx1ZSApIHtcclxuXHRyZXR1cm4gKCAoIFwiXCIgKyAoICQubW9iaWxlLmdldEF0dHJpYnV0ZSggdGhpcywgXCJmaWx0ZXJ0ZXh0XCIgKSB8fCAkKCB0aGlzICkudGV4dCgpICkgKVxyXG5cdFx0LnRvTG93ZXJDYXNlKCkuaW5kZXhPZiggc2VhcmNoVmFsdWUgKSA9PT0gLTEgKTtcclxufTtcclxuXHJcbiQud2lkZ2V0KCBcIm1vYmlsZS5maWx0ZXJhYmxlXCIsIHtcclxuXHJcblx0aW5pdFNlbGVjdG9yOiBcIjpqcW1EYXRhKGZpbHRlcj0ndHJ1ZScpXCIsXHJcblxyXG5cdG9wdGlvbnM6IHtcclxuXHRcdGZpbHRlclJldmVhbDogZmFsc2UsXHJcblx0XHRmaWx0ZXJDYWxsYmFjazogZGVmYXVsdEZpbHRlckNhbGxiYWNrLFxyXG5cdFx0ZW5oYW5jZWQ6IGZhbHNlLFxyXG5cdFx0aW5wdXQ6IG51bGwsXHJcblx0XHRjaGlsZHJlbjogXCI+IGxpLCA+IG9wdGlvbiwgPiBvcHRncm91cCBvcHRpb24sID4gdGJvZHkgdHIsID4gLnVpLWNvbnRyb2xncm91cC1jb250cm9scyA+IC51aS1idG4sID4gLnVpLWNvbnRyb2xncm91cC1jb250cm9scyA+IC51aS1jaGVja2JveCwgPiAudWktY29udHJvbGdyb3VwLWNvbnRyb2xzID4gLnVpLXJhZGlvXCJcclxuXHR9LFxyXG5cclxuXHRfY3JlYXRlOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBvcHRzID0gdGhpcy5vcHRpb25zO1xyXG5cclxuXHRcdCQuZXh0ZW5kKCB0aGlzLCB7XHJcblx0XHRcdF9zZWFyY2g6IG51bGwsXHJcblx0XHRcdF90aW1lcjogMFxyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5fc2V0SW5wdXQoIG9wdHMuaW5wdXQgKTtcclxuXHRcdGlmICggIW9wdHMuZW5oYW5jZWQgKSB7XHJcblx0XHRcdHRoaXMuX2ZpbHRlckl0ZW1zKCAoICggdGhpcy5fc2VhcmNoICYmIHRoaXMuX3NlYXJjaC52YWwoKSApIHx8IFwiXCIgKS50b0xvd2VyQ2FzZSgpICk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X29uS2V5VXA6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHZhbCwgbGFzdHZhbCxcclxuXHRcdFx0c2VhcmNoID0gdGhpcy5fc2VhcmNoO1xyXG5cclxuXHRcdGlmICggc2VhcmNoICkge1xyXG5cdFx0XHR2YWwgPSBzZWFyY2gudmFsKCkudG9Mb3dlckNhc2UoKSxcclxuXHRcdFx0bGFzdHZhbCA9ICQubW9iaWxlLmdldEF0dHJpYnV0ZSggc2VhcmNoWyAwIF0sIFwibGFzdHZhbFwiICkgKyBcIlwiO1xyXG5cclxuXHRcdFx0aWYgKCBsYXN0dmFsICYmIGxhc3R2YWwgPT09IHZhbCApIHtcclxuXHRcdFx0XHQvLyBFeGVjdXRlIHRoZSBoYW5kbGVyIG9ubHkgb25jZSBwZXIgdmFsdWUgY2hhbmdlXHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoIHRoaXMuX3RpbWVyICkge1xyXG5cdFx0XHRcdHdpbmRvdy5jbGVhclRpbWVvdXQoIHRoaXMuX3RpbWVyICk7XHJcblx0XHRcdFx0dGhpcy5fdGltZXIgPSAwO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR0aGlzLl90aW1lciA9IHRoaXMuX2RlbGF5KCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRpZiAoIHRoaXMuX3RyaWdnZXIoIFwiYmVmb3JlZmlsdGVyXCIsIG51bGwsIHsgaW5wdXQ6IHNlYXJjaCB9ICkgPT09IGZhbHNlICkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gQ2hhbmdlIHZhbCBhcyBsYXN0dmFsIGZvciBuZXh0IGV4ZWN1dGlvblxyXG5cdFx0XHRcdHNlYXJjaFsgMCBdLnNldEF0dHJpYnV0ZSggXCJkYXRhLVwiICsgJC5tb2JpbGUubnMgKyBcImxhc3R2YWxcIiwgdmFsICk7XHJcblxyXG5cdFx0XHRcdHRoaXMuX2ZpbHRlckl0ZW1zKCB2YWwgKTtcclxuXHRcdFx0XHR0aGlzLl90aW1lciA9IDA7XHJcblx0XHRcdH0sIDI1MCApO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9nZXRGaWx0ZXJhYmxlSXRlbXM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGVsZW0gPSB0aGlzLmVsZW1lbnQsXHJcblx0XHRcdGNoaWxkcmVuID0gdGhpcy5vcHRpb25zLmNoaWxkcmVuLFxyXG5cdFx0XHRpdGVtcyA9ICFjaGlsZHJlbiA/IHsgbGVuZ3RoOiAwIH06XHJcblx0XHRcdFx0JC5pc0Z1bmN0aW9uKCBjaGlsZHJlbiApID8gY2hpbGRyZW4oKTpcclxuXHRcdFx0XHRjaGlsZHJlbi5ub2RlTmFtZSA/ICQoIGNoaWxkcmVuICk6XHJcblx0XHRcdFx0Y2hpbGRyZW4uanF1ZXJ5ID8gY2hpbGRyZW46XHJcblx0XHRcdFx0dGhpcy5lbGVtZW50LmZpbmQoIGNoaWxkcmVuICk7XHJcblxyXG5cdFx0aWYgKCBpdGVtcy5sZW5ndGggPT09IDAgKSB7XHJcblx0XHRcdGl0ZW1zID0gZWxlbS5jaGlsZHJlbigpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBpdGVtcztcclxuXHR9LFxyXG5cclxuXHRfZmlsdGVySXRlbXM6IGZ1bmN0aW9uKCB2YWwgKSB7XHJcblx0XHR2YXIgaWR4LCBjYWxsYmFjaywgbGVuZ3RoLCBkc3QsXHJcblx0XHRcdHNob3cgPSBbXSxcclxuXHRcdFx0aGlkZSA9IFtdLFxyXG5cdFx0XHRvcHRzID0gdGhpcy5vcHRpb25zLFxyXG5cdFx0XHRmaWx0ZXJJdGVtcyA9IHRoaXMuX2dldEZpbHRlcmFibGVJdGVtcygpO1xyXG5cclxuXHRcdGlmICggdmFsICE9IG51bGwgKSB7XHJcblx0XHRcdGNhbGxiYWNrID0gb3B0cy5maWx0ZXJDYWxsYmFjayB8fCBkZWZhdWx0RmlsdGVyQ2FsbGJhY2s7XHJcblx0XHRcdGxlbmd0aCA9IGZpbHRlckl0ZW1zLmxlbmd0aDtcclxuXHJcblx0XHRcdC8vIFBhcnRpdGlvbiB0aGUgaXRlbXMgaW50byB0aG9zZSB0byBiZSBoaWRkZW4gYW5kIHRob3NlIHRvIGJlIHNob3duXHJcblx0XHRcdGZvciAoIGlkeCA9IDAgOyBpZHggPCBsZW5ndGggOyBpZHgrKyApIHtcclxuXHRcdFx0XHRkc3QgPSAoIGNhbGxiYWNrLmNhbGwoIGZpbHRlckl0ZW1zWyBpZHggXSwgaWR4LCB2YWwgKSApID8gaGlkZSA6IHNob3c7XHJcblx0XHRcdFx0ZHN0LnB1c2goIGZpbHRlckl0ZW1zWyBpZHggXSApO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gSWYgbm90aGluZyBpcyBoaWRkZW4sIHRoZW4gdGhlIGRlY2lzaW9uIHdoZXRoZXIgdG8gaGlkZSBvciBzaG93IHRoZSBpdGVtc1xyXG5cdFx0Ly8gaXMgYmFzZWQgb24gdGhlIFwiZmlsdGVyUmV2ZWFsXCIgb3B0aW9uLlxyXG5cdFx0aWYgKCBoaWRlLmxlbmd0aCA9PT0gMCApIHtcclxuXHRcdFx0ZmlsdGVySXRlbXNbICggb3B0cy5maWx0ZXJSZXZlYWwgJiYgdmFsLmxlbmd0aCA9PT0gMCApID9cclxuXHRcdFx0XHRcImFkZENsYXNzXCIgOiBcInJlbW92ZUNsYXNzXCIgXSggXCJ1aS1zY3JlZW4taGlkZGVuXCIgKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdCQoIGhpZGUgKS5hZGRDbGFzcyggXCJ1aS1zY3JlZW4taGlkZGVuXCIgKTtcclxuXHRcdFx0JCggc2hvdyApLnJlbW92ZUNsYXNzKCBcInVpLXNjcmVlbi1oaWRkZW5cIiApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX3JlZnJlc2hDaGlsZFdpZGdldCgpO1xyXG5cclxuXHRcdHRoaXMuX3RyaWdnZXIoIFwiZmlsdGVyXCIsIG51bGwsIHtcclxuXHRcdFx0aXRlbXM6IGZpbHRlckl0ZW1zXHJcblx0XHR9KTtcclxuXHR9LFxyXG5cclxuXHQvLyBUaGUgRGVmYXVsdCBpbXBsZW1lbnRhdGlvbiBvZiBfcmVmcmVzaENoaWxkV2lkZ2V0IGF0dGVtcHRzIHRvIGNhbGxcclxuXHQvLyByZWZyZXNoIG9uIGNvbGxhcHNpYmxlc2V0LCBjb250cm9sZ3JvdXAsIHNlbGVjdG1lbnUsIG9yIGxpc3R2aWV3XHJcblx0X3JlZnJlc2hDaGlsZFdpZGdldDogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgd2lkZ2V0LCBpZHgsXHJcblx0XHRcdHJlY29nbml6ZWRXaWRnZXRzID0gWyBcImNvbGxhcHNpYmxlc2V0XCIsIFwic2VsZWN0bWVudVwiLCBcImNvbnRyb2xncm91cFwiLCBcImxpc3R2aWV3XCIgXTtcclxuXHJcblx0XHRmb3IgKCBpZHggPSByZWNvZ25pemVkV2lkZ2V0cy5sZW5ndGggLSAxIDsgaWR4ID4gLTEgOyBpZHgtLSApIHtcclxuXHRcdFx0d2lkZ2V0ID0gcmVjb2duaXplZFdpZGdldHNbIGlkeCBdO1xyXG5cdFx0XHRpZiAoICQubW9iaWxlWyB3aWRnZXQgXSApIHtcclxuXHRcdFx0XHR3aWRnZXQgPSB0aGlzLmVsZW1lbnQuZGF0YSggXCJtb2JpbGUtXCIgKyB3aWRnZXQgKTtcclxuXHRcdFx0XHRpZiAoIHdpZGdldCAmJiAkLmlzRnVuY3Rpb24oIHdpZGdldC5yZWZyZXNoICkgKSB7XHJcblx0XHRcdFx0XHR3aWRnZXQucmVmcmVzaCgpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdC8vIFRPRE86IFdoZW4gdGhlIGlucHV0IGlzIG5vdCBpbnRlcm5hbCwgZG8gbm90IGV2ZW4gc3RvcmUgaXQgaW4gdGhpcy5fc2VhcmNoXHJcblx0X3NldElucHV0OiBmdW5jdGlvbiAoIHNlbGVjdG9yICkge1xyXG5cdFx0dmFyIHNlYXJjaCA9IHRoaXMuX3NlYXJjaDtcclxuXHJcblx0XHQvLyBTdG9wIGEgcGVuZGluZyBmaWx0ZXIgb3BlcmF0aW9uXHJcblx0XHRpZiAoIHRoaXMuX3RpbWVyICkge1xyXG5cdFx0XHR3aW5kb3cuY2xlYXJUaW1lb3V0KCB0aGlzLl90aW1lciApO1xyXG5cdFx0XHR0aGlzLl90aW1lciA9IDA7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBzZWFyY2ggKSB7XHJcblx0XHRcdHRoaXMuX29mZiggc2VhcmNoLCBcImtleXVwIGNoYW5nZSBpbnB1dFwiICk7XHJcblx0XHRcdHNlYXJjaCA9IG51bGw7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBzZWxlY3RvciApIHtcclxuXHRcdFx0c2VhcmNoID0gc2VsZWN0b3IuanF1ZXJ5ID8gc2VsZWN0b3I6XHJcblx0XHRcdFx0c2VsZWN0b3Iubm9kZU5hbWUgPyAkKCBzZWxlY3RvciApOlxyXG5cdFx0XHRcdHRoaXMuZG9jdW1lbnQuZmluZCggc2VsZWN0b3IgKTtcclxuXHJcblx0XHRcdHRoaXMuX29uKCBzZWFyY2gsIHtcclxuXHRcdFx0XHRrZXlkb3duOiBcIl9vbktleURvd25cIixcclxuXHRcdFx0XHRrZXlwcmVzczogXCJfb25LZXlQcmVzc1wiLFxyXG5cdFx0XHRcdGtleXVwOiBcIl9vbktleVVwXCIsXHJcblx0XHRcdFx0Y2hhbmdlOiBcIl9vbktleVVwXCIsXHJcblx0XHRcdFx0aW5wdXQ6IFwiX29uS2V5VXBcIlxyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl9zZWFyY2ggPSBzZWFyY2g7XHJcblx0fSxcclxuXHJcblx0Ly8gUHJldmVudCBmb3JtIHN1Ym1pc3Npb25cclxuXHRfb25LZXlEb3duOiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHRpZiAoIGV2ZW50LmtleUNvZGUgPT09ICQudWkua2V5Q29kZS5FTlRFUiApIHtcclxuXHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0dGhpcy5fcHJldmVudEtleVByZXNzID0gdHJ1ZTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfb25LZXlQcmVzczogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0aWYgKCB0aGlzLl9wcmV2ZW50S2V5UHJlc3MgKSB7XHJcblx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdHRoaXMuX3ByZXZlbnRLZXlQcmVzcyA9IGZhbHNlO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9zZXRPcHRpb25zOiBmdW5jdGlvbiggb3B0aW9ucyApIHtcclxuXHRcdHZhciByZWZpbHRlciA9ICEoICggb3B0aW9ucy5maWx0ZXJSZXZlYWwgPT09IHVuZGVmaW5lZCApICYmXHJcblx0XHRcdFx0KCBvcHRpb25zLmZpbHRlckNhbGxiYWNrID09PSB1bmRlZmluZWQgKSAmJlxyXG5cdFx0XHRcdCggb3B0aW9ucy5jaGlsZHJlbiA9PT0gdW5kZWZpbmVkICkgKTtcclxuXHJcblx0XHR0aGlzLl9zdXBlciggb3B0aW9ucyApO1xyXG5cclxuXHRcdGlmICggb3B0aW9ucy5pbnB1dCAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHR0aGlzLl9zZXRJbnB1dCggb3B0aW9ucy5pbnB1dCApO1xyXG5cdFx0XHRyZWZpbHRlciA9IHRydWU7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCByZWZpbHRlciApIHtcclxuXHRcdFx0dGhpcy5yZWZyZXNoKCk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X2Rlc3Ryb3k6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIG9wdHMgPSB0aGlzLm9wdGlvbnMsXHJcblx0XHRcdGl0ZW1zID0gdGhpcy5fZ2V0RmlsdGVyYWJsZUl0ZW1zKCk7XHJcblxyXG5cdFx0aWYgKCBvcHRzLmVuaGFuY2VkICkge1xyXG5cdFx0XHRpdGVtcy50b2dnbGVDbGFzcyggXCJ1aS1zY3JlZW4taGlkZGVuXCIsIG9wdHMuZmlsdGVyUmV2ZWFsICk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRpdGVtcy5yZW1vdmVDbGFzcyggXCJ1aS1zY3JlZW4taGlkZGVuXCIgKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRyZWZyZXNoOiBmdW5jdGlvbigpIHtcclxuXHRcdGlmICggdGhpcy5fdGltZXIgKSB7XHJcblx0XHRcdHdpbmRvdy5jbGVhclRpbWVvdXQoIHRoaXMuX3RpbWVyICk7XHJcblx0XHRcdHRoaXMuX3RpbWVyID0gMDtcclxuXHRcdH1cclxuXHRcdHRoaXMuX2ZpbHRlckl0ZW1zKCAoICggdGhpcy5fc2VhcmNoICYmIHRoaXMuX3NlYXJjaC52YWwoKSApIHx8IFwiXCIgKS50b0xvd2VyQ2FzZSgpICk7XHJcblx0fVxyXG59KTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxuLy8gQ3JlYXRlIGEgZnVuY3Rpb24gdGhhdCB3aWxsIHJlcGxhY2UgdGhlIF9zZXRPcHRpb25zIGZ1bmN0aW9uIG9mIGEgd2lkZ2V0LFxyXG4vLyBhbmQgd2lsbCBwYXNzIHRoZSBvcHRpb25zIG9uIHRvIHRoZSBpbnB1dCBvZiB0aGUgZmlsdGVyYWJsZS5cclxudmFyIHJlcGxhY2VTZXRPcHRpb25zID0gZnVuY3Rpb24oIHNlbGYsIG9yaWcgKSB7XHJcblx0XHRyZXR1cm4gZnVuY3Rpb24oIG9wdGlvbnMgKSB7XHJcblx0XHRcdG9yaWcuY2FsbCggdGhpcywgb3B0aW9ucyApO1xyXG5cdFx0XHRzZWxmLl9zeW5jVGV4dElucHV0T3B0aW9ucyggb3B0aW9ucyApO1xyXG5cdFx0fTtcclxuXHR9LFxyXG5cdHJEaXZpZGVyTGlzdEl0ZW0gPSAvKF58XFxzKXVpLWxpLWRpdmlkZXIoXFxzfCQpLyxcclxuXHRvcmlnRGVmYXVsdEZpbHRlckNhbGxiYWNrID0gJC5tb2JpbGUuZmlsdGVyYWJsZS5wcm90b3R5cGUub3B0aW9ucy5maWx0ZXJDYWxsYmFjaztcclxuXHJcbi8vIE92ZXJyaWRlIHRoZSBkZWZhdWx0IGZpbHRlciBjYWxsYmFjayB3aXRoIG9uZSB0aGF0IGRvZXMgbm90IGhpZGUgbGlzdCBkaXZpZGVyc1xyXG4kLm1vYmlsZS5maWx0ZXJhYmxlLnByb3RvdHlwZS5vcHRpb25zLmZpbHRlckNhbGxiYWNrID0gZnVuY3Rpb24oIGluZGV4LCBzZWFyY2hWYWx1ZSApIHtcclxuXHRyZXR1cm4gIXRoaXMuY2xhc3NOYW1lLm1hdGNoKCByRGl2aWRlckxpc3RJdGVtICkgJiZcclxuXHRcdG9yaWdEZWZhdWx0RmlsdGVyQ2FsbGJhY2suY2FsbCggdGhpcywgaW5kZXgsIHNlYXJjaFZhbHVlICk7XHJcbn07XHJcblxyXG4kLndpZGdldCggXCJtb2JpbGUuZmlsdGVyYWJsZVwiLCAkLm1vYmlsZS5maWx0ZXJhYmxlLCB7XHJcblx0b3B0aW9uczoge1xyXG5cdFx0ZmlsdGVyUGxhY2Vob2xkZXI6IFwiRmlsdGVyIGl0ZW1zLi4uXCIsXHJcblx0XHRmaWx0ZXJUaGVtZTogbnVsbFxyXG5cdH0sXHJcblxyXG5cdF9jcmVhdGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGlkeCwgd2lkZ2V0TmFtZSxcclxuXHRcdFx0ZWxlbSA9IHRoaXMuZWxlbWVudCxcclxuXHRcdFx0cmVjb2duaXplZFdpZGdldHMgPSBbIFwiY29sbGFwc2libGVzZXRcIiwgXCJzZWxlY3RtZW51XCIsIFwiY29udHJvbGdyb3VwXCIsIFwibGlzdHZpZXdcIiBdLFxyXG5cdFx0XHRjcmVhdGVIYW5kbGVycyA9IHt9O1xyXG5cclxuXHRcdHRoaXMuX3N1cGVyKCk7XHJcblxyXG5cdFx0JC5leHRlbmQoIHRoaXMsIHtcclxuXHRcdFx0X3dpZGdldDogbnVsbFxyXG5cdFx0fSk7XHJcblxyXG5cdFx0Zm9yICggaWR4ID0gcmVjb2duaXplZFdpZGdldHMubGVuZ3RoIC0gMSA7IGlkeCA+IC0xIDsgaWR4LS0gKSB7XHJcblx0XHRcdHdpZGdldE5hbWUgPSByZWNvZ25pemVkV2lkZ2V0c1sgaWR4IF07XHJcblx0XHRcdGlmICggJC5tb2JpbGVbIHdpZGdldE5hbWUgXSApIHtcclxuXHRcdFx0XHRpZiAoIHRoaXMuX3NldFdpZGdldCggZWxlbS5kYXRhKCBcIm1vYmlsZS1cIiArIHdpZGdldE5hbWUgKSApICkge1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdGNyZWF0ZUhhbmRsZXJzWyB3aWRnZXROYW1lICsgXCJjcmVhdGVcIiBdID0gXCJfaGFuZGxlQ3JlYXRlXCI7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCAhdGhpcy5fd2lkZ2V0ICkge1xyXG5cdFx0XHR0aGlzLl9vbiggZWxlbSwgY3JlYXRlSGFuZGxlcnMgKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfaGFuZGxlQ3JlYXRlOiBmdW5jdGlvbiggZXZ0ICkge1xyXG5cdFx0dGhpcy5fc2V0V2lkZ2V0KCB0aGlzLmVsZW1lbnQuZGF0YSggXCJtb2JpbGUtXCIgKyBldnQudHlwZS5zdWJzdHJpbmcoIDAsIGV2dC50eXBlLmxlbmd0aCAtIDYgKSApICk7XHJcblx0fSxcclxuXHJcblx0X3RyaWdnZXI6IGZ1bmN0aW9uKCB0eXBlLCBldmVudCwgZGF0YSApIHtcclxuXHRcdGlmICggdGhpcy5fd2lkZ2V0ICYmIHRoaXMuX3dpZGdldC53aWRnZXRGdWxsTmFtZSA9PT0gXCJtb2JpbGUtbGlzdHZpZXdcIiAmJlxyXG5cdFx0XHR0eXBlID09PSBcImJlZm9yZWZpbHRlclwiICkge1xyXG5cclxuXHRcdFx0Ly8gQWxzbyB0cmlnZ2VyIGxpc3R2aWV3YmVmb3JlZmlsdGVyIGlmIHRoaXMgd2lkZ2V0IGlzIGFsc28gYSBsaXN0dmlld1xyXG5cdFx0XHR0aGlzLl93aWRnZXQuX3RyaWdnZXIoIFwiYmVmb3JlZmlsdGVyXCIsIGV2ZW50LCBkYXRhICk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gUGFzc2luZyBiYWNrIHRoZSByZXNwb25zZSBlbmFibGVzIGNhbGxpbmcgcHJldmVudERlZmF1bHQoKVxyXG5cdFx0cmV0dXJuIHRoaXMuX3N1cGVyKCB0eXBlLCBldmVudCwgZGF0YSApO1xyXG5cdH0sXHJcblxyXG5cdF9zZXRXaWRnZXQ6IGZ1bmN0aW9uKCB3aWRnZXQgKSB7XHJcblx0XHRpZiAoICF0aGlzLl93aWRnZXQgJiYgd2lkZ2V0ICkge1xyXG5cdFx0XHR0aGlzLl93aWRnZXQgPSB3aWRnZXQ7XHJcblx0XHRcdHRoaXMuX3dpZGdldC5fc2V0T3B0aW9ucyA9IHJlcGxhY2VTZXRPcHRpb25zKCB0aGlzLCB0aGlzLl93aWRnZXQuX3NldE9wdGlvbnMgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoICEhdGhpcy5fd2lkZ2V0ICkge1xyXG5cdFx0XHR0aGlzLl9zeW5jVGV4dElucHV0T3B0aW9ucyggdGhpcy5fd2lkZ2V0Lm9wdGlvbnMgKTtcclxuXHRcdFx0aWYgKCB0aGlzLl93aWRnZXQud2lkZ2V0TmFtZSA9PT0gXCJsaXN0dmlld1wiICkge1xyXG5cdFx0XHRcdHRoaXMuX3dpZGdldC5vcHRpb25zLmhpZGVEaXZpZGVycyA9IHRydWU7XHJcblx0XHRcdFx0dGhpcy5fd2lkZ2V0LmVsZW1lbnQubGlzdHZpZXcoIFwicmVmcmVzaFwiICk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gISF0aGlzLl93aWRnZXQ7XHJcblx0fSxcclxuXHJcblx0X2lzU2VhcmNoSW50ZXJuYWw6IGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuICggdGhpcy5fc2VhcmNoICYmIHRoaXMuX3NlYXJjaC5qcW1EYXRhKCBcInVpLWZpbHRlcmFibGUtXCIgKyB0aGlzLnV1aWQgKyBcIi1pbnRlcm5hbFwiICkgKTtcclxuXHR9LFxyXG5cclxuXHRfc2V0SW5wdXQ6IGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcclxuXHRcdHZhciBvcHRzID0gdGhpcy5vcHRpb25zLFxyXG5cdFx0XHR1cGRhdGVQbGFjZWhvbGRlciA9IHRydWUsXHJcblx0XHRcdHRleHRpbnB1dE9wdHMgPSB7fTtcclxuXHJcblx0XHRpZiAoICFzZWxlY3RvciApIHtcclxuXHRcdFx0aWYgKCB0aGlzLl9pc1NlYXJjaEludGVybmFsKCkgKSB7XHJcblxyXG5cdFx0XHRcdC8vIElnbm9yZSB0aGUgY2FsbCB0byBzZXQgYSBuZXcgaW5wdXQgaWYgdGhlIHNlbGVjdG9yIGdvZXMgdG8gZmFsc3kgYW5kXHJcblx0XHRcdFx0Ly8gdGhlIGN1cnJlbnQgdGV4dGlucHV0IGlzIGFscmVhZHkgb2YgdGhlIGludGVybmFsbHkgZ2VuZXJhdGVkIHZhcmlldHkuXHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cclxuXHRcdFx0XHQvLyBHZW5lcmF0aW5nIGEgbmV3IHRleHRpbnB1dCB3aWRnZXQuIE5vIG5lZWQgdG8gc2V0IHRoZSBwbGFjZWhvbGRlclxyXG5cdFx0XHRcdC8vIGZ1cnRoZXIgZG93biB0aGUgZnVuY3Rpb24uXHJcblx0XHRcdFx0dXBkYXRlUGxhY2Vob2xkZXIgPSBmYWxzZTtcclxuXHRcdFx0XHRzZWxlY3RvciA9ICQoIFwiPGlucHV0IFwiICtcclxuXHRcdFx0XHRcdFwiZGF0YS1cIiArICQubW9iaWxlLm5zICsgXCJ0eXBlPSdzZWFyY2gnIFwiICtcclxuXHRcdFx0XHRcdFwicGxhY2Vob2xkZXI9J1wiICsgb3B0cy5maWx0ZXJQbGFjZWhvbGRlciArIFwiJz48L2lucHV0PlwiIClcclxuXHRcdFx0XHRcdC5qcW1EYXRhKCBcInVpLWZpbHRlcmFibGUtXCIgKyB0aGlzLnV1aWQgKyBcIi1pbnRlcm5hbFwiLCB0cnVlICk7XHJcblx0XHRcdFx0JCggXCI8Zm9ybSBjbGFzcz0ndWktZmlsdGVyYWJsZSc+PC9mb3JtPlwiIClcclxuXHRcdFx0XHRcdC5hcHBlbmQoIHNlbGVjdG9yIClcclxuXHRcdFx0XHRcdC5zdWJtaXQoIGZ1bmN0aW9uKCBldnQgKSB7XHJcblx0XHRcdFx0XHRcdGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRcdFx0XHRzZWxlY3Rvci5ibHVyKCk7XHJcblx0XHRcdFx0XHR9KVxyXG5cdFx0XHRcdFx0Lmluc2VydEJlZm9yZSggdGhpcy5lbGVtZW50ICk7XHJcblx0XHRcdFx0aWYgKCAkLm1vYmlsZS50ZXh0aW5wdXQgKSB7XHJcblx0XHRcdFx0XHRpZiAoIHRoaXMub3B0aW9ucy5maWx0ZXJUaGVtZSAhPSBudWxsICkge1xyXG5cdFx0XHRcdFx0XHR0ZXh0aW5wdXRPcHRzWyBcInRoZW1lXCIgXSA9IG9wdHMuZmlsdGVyVGhlbWU7XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0c2VsZWN0b3IudGV4dGlucHV0KCB0ZXh0aW5wdXRPcHRzICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5fc3VwZXIoIHNlbGVjdG9yICk7XHJcblxyXG5cdFx0aWYgKCB0aGlzLl9pc1NlYXJjaEludGVybmFsKCkgJiYgdXBkYXRlUGxhY2Vob2xkZXIgKSB7XHJcblx0XHRcdHRoaXMuX3NlYXJjaC5hdHRyKCBcInBsYWNlaG9sZGVyXCIsIHRoaXMub3B0aW9ucy5maWx0ZXJQbGFjZWhvbGRlciApO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9zZXRPcHRpb25zOiBmdW5jdGlvbiggb3B0aW9ucyApIHtcclxuXHRcdHZhciByZXQgPSB0aGlzLl9zdXBlciggb3B0aW9ucyApO1xyXG5cclxuXHRcdC8vIE5lZWQgdG8gc2V0IHRoZSBmaWx0ZXJQbGFjZWhvbGRlciBhZnRlciBoYXZpbmcgZXN0YWJsaXNoZWQgdGhlIHNlYXJjaCBpbnB1dFxyXG5cdFx0aWYgKCBvcHRpb25zLmZpbHRlclBsYWNlaG9sZGVyICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdGlmICggdGhpcy5faXNTZWFyY2hJbnRlcm5hbCgpICkge1xyXG5cdFx0XHRcdHRoaXMuX3NlYXJjaC5hdHRyKCBcInBsYWNlaG9sZGVyXCIsIG9wdGlvbnMuZmlsdGVyUGxhY2Vob2xkZXIgKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggb3B0aW9ucy5maWx0ZXJUaGVtZSAhPT0gdW5kZWZpbmVkICYmIHRoaXMuX3NlYXJjaCAmJiAkLm1vYmlsZS50ZXh0aW5wdXQgKSB7XHJcblx0XHRcdHRoaXMuX3NlYXJjaC50ZXh0aW5wdXQoIFwib3B0aW9uXCIsIFwidGhlbWVcIiwgb3B0aW9ucy5maWx0ZXJUaGVtZSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiByZXQ7XHJcblx0fSxcclxuXHJcblx0Ly8gVGhlIGxpc3R2aWV3IGltcGxlbWVudGF0aW9uIGFjY29tcGFueWluZyB0aGlzIGZpbHRlcmFibGUgYmFja2NvbXBhdCBsYXllciB3aWxsIGNhbGxcclxuXHQvLyBmaWx0ZXJhYmxlLnJlZnJlc2goKSBhZnRlciBpdCdzIGRvbmUgcmVmcmVzaGluZyB0aGUgbGlzdHZpZXcgdG8gbWFrZSBzdXJlIHRoZSBmaWx0ZXJhYmxlXHJcblx0Ly8gZmlsdGVycyBvdXQgYW55IG5ldyBpdGVtcyBhZGRlZC4gSG93ZXZlciwgd2hlbiB0aGUgbGlzdHZpZXcgcmVmcmVzaCBoYXMgYmVlbiBpbml0aWF0ZWQgYnlcclxuXHQvLyB0aGUgZmlsdGVyYWJsZSBpdHNlbGYsIHRoZW4gc3VjaCBmaWx0ZXJpbmcgaGFzIGFscmVhZHkgdGFrZW4gcGxhY2UsIGFuZCBjYWxsaW5nIHRoZVxyXG5cdC8vIGZpbHRlcmFibGUncyByZWZyZXNoKCkgbWV0aG9kIHdpbGwgY2F1c2UgYW4gaW5maW5pdGUgcmVjdXJzaW9uLiBXZSBzdG9wIHRoaXMgYnkgc2V0dGluZyBhXHJcblx0Ly8gZmxhZyB0aGF0IHdpbGwgY2F1c2UgdGhlIGZpbHRlcmFibGUncyByZWZyZXNoKCkgbWV0aG9kIHRvIHNob3J0LWNpcmN1aXQuXHJcblx0X3JlZnJlc2hDaGlsZFdpZGdldDogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9yZWZyZXNoaW5nQ2hpbGRXaWRnZXQgPSB0cnVlO1xyXG5cdFx0dGhpcy5fc3VwZXJBcHBseSggYXJndW1lbnRzICk7XHJcblx0XHR0aGlzLl9yZWZyZXNoaW5nQ2hpbGRXaWRnZXQgPSBmYWxzZTtcclxuXHR9LFxyXG5cclxuXHRyZWZyZXNoOiBmdW5jdGlvbigpIHtcclxuXHRcdGlmICggIXRoaXMuX3JlZnJlc2hpbmdDaGlsZFdpZGdldCApIHtcclxuXHRcdFx0dGhpcy5fc3VwZXJBcHBseSggYXJndW1lbnRzICk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X2Rlc3Ryb3k6IGZ1bmN0aW9uKCkge1xyXG5cdFx0aWYgKCB0aGlzLl9pc1NlYXJjaEludGVybmFsKCkgKSB7XHJcblx0XHRcdHRoaXMuX3NlYXJjaC5yZW1vdmUoKTtcclxuXHRcdH1cclxuXHRcdHRoaXMuX3N1cGVyKCk7XHJcblx0fSxcclxuXHJcblx0X3N5bmNUZXh0SW5wdXRPcHRpb25zOiBmdW5jdGlvbiggb3B0aW9ucyApIHtcclxuXHRcdHZhciBpZHgsXHJcblx0XHRcdHRleHRpbnB1dE9wdGlvbnMgPSB7fTtcclxuXHJcblx0XHQvLyBXZSBvbmx5IHN5bmMgb3B0aW9ucyBpZiB0aGUgZmlsdGVyYWJsZSdzIHRleHRpbnB1dCBpcyBvZiB0aGUgaW50ZXJuYWxseVxyXG5cdFx0Ly8gZ2VuZXJhdGVkIHZhcmlldHksIHJhdGhlciB0aGFuIG9uZSBzcGVjaWZpZWQgYnkgdGhlIHVzZXIuXHJcblx0XHRpZiAoIHRoaXMuX2lzU2VhcmNoSW50ZXJuYWwoKSAmJiAkLm1vYmlsZS50ZXh0aW5wdXQgKSB7XHJcblxyXG5cdFx0XHQvLyBBcHBseSBvbmx5IHRoZSBvcHRpb25zIHVuZGVyc3Rvb2QgYnkgdGV4dGlucHV0XHJcblx0XHRcdGZvciAoIGlkeCBpbiAkLm1vYmlsZS50ZXh0aW5wdXQucHJvdG90eXBlLm9wdGlvbnMgKSB7XHJcblx0XHRcdFx0aWYgKCBvcHRpb25zWyBpZHggXSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRcdFx0aWYgKCBpZHggPT09IFwidGhlbWVcIiAmJiB0aGlzLm9wdGlvbnMuZmlsdGVyVGhlbWUgIT0gbnVsbCApIHtcclxuXHRcdFx0XHRcdFx0dGV4dGlucHV0T3B0aW9uc1sgaWR4IF0gPSB0aGlzLm9wdGlvbnMuZmlsdGVyVGhlbWU7XHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHR0ZXh0aW5wdXRPcHRpb25zWyBpZHggXSA9IG9wdGlvbnNbIGlkeCBdO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHR0aGlzLl9zZWFyY2gudGV4dGlucHV0KCBcIm9wdGlvblwiLCB0ZXh0aW5wdXRPcHRpb25zICk7XHJcblx0XHR9XHJcblx0fVxyXG59KTtcclxuXHJcbi8vIEluc3RhbnRpYXRlIGEgZmlsdGVyYWJsZSBvbiBhIGxpc3R2aWV3IHRoYXQgaGFzIHRoZSBkYXRhLWZpbHRlcj1cInRydWVcIiBhdHRyaWJ1dGVcclxuLy8gVGhpcyBpcyBub3QgbmVjZXNzYXJ5IGZvciBzdGF0aWMgY29udGVudCwgYmVjYXVzZSB0aGUgYXV0by1lbmhhbmNlIHRha2VzIGNhcmUgb2YgaW5zdGFudGlhdGluZ1xyXG4vLyB0aGUgZmlsdGVyYWJsZSB1cG9uIGVuY291bnRlcmluZyBkYXRhLWZpbHRlcj1cInRydWVcIi4gSG93ZXZlciwgYmVjYXVzZSBvZiAxLjMueCBpdCBpcyBleHBlY3RlZFxyXG4vLyB0aGF0IGEgbGlzdHZpZXcgd2l0aCBkYXRhLWZpbHRlcj1cInRydWVcIiB3aWxsIGJlIGZpbHRlcmFibGUgZXZlbiBpZiB5b3UganVzdCBpbnN0YW50aWF0ZSBhXHJcbi8vIGxpc3R2aWV3IG9uIGl0LiBUaGUgZXh0ZW5zaW9uIGJlbG93IGVuc3VyZXMgdGhhdCB0aGlzIGNvbnRpbnVlcyB0byBoYXBwZW4gaW4gMS40LnguXHJcbiQud2lkZ2V0KCBcIm1vYmlsZS5saXN0dmlld1wiLCAkLm1vYmlsZS5saXN0dmlldywge1xyXG5cdG9wdGlvbnM6IHtcclxuXHRcdGZpbHRlcjogZmFsc2VcclxuXHR9LFxyXG5cdF9jcmVhdGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMuZmlsdGVyID09PSB0cnVlICYmXHJcblx0XHRcdFx0IXRoaXMuZWxlbWVudC5kYXRhKCBcIm1vYmlsZS1maWx0ZXJhYmxlXCIgKSApIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50LmZpbHRlcmFibGUoKTtcclxuXHRcdH1cclxuXHRcdHJldHVybiB0aGlzLl9zdXBlcigpO1xyXG5cdH0sXHJcblxyXG5cdHJlZnJlc2g6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGZpbHRlcmFibGU7XHJcblxyXG5cdFx0dGhpcy5fc3VwZXJBcHBseSggYXJndW1lbnRzICk7XHJcblxyXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMuZmlsdGVyID09PSB0cnVlICkge1xyXG5cdFx0XHRmaWx0ZXJhYmxlID0gdGhpcy5lbGVtZW50LmRhdGEoIFwibW9iaWxlLWZpbHRlcmFibGVcIiApO1xyXG5cclxuXHRcdFx0aWYgKCBmaWx0ZXJhYmxlICkge1xyXG5cdFx0XHRcdGZpbHRlcmFibGUucmVmcmVzaCgpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG59KTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbi8qIVxyXG4gKiBqUXVlcnkgVUkgVGFicyBmYWRmMmIzMTJhMDUwNDA0MzY0NTFjNjRiYmZhZjQ4MTRiYzYyYzU2XHJcbiAqIGh0dHA6Ly9qcXVlcnl1aS5jb21cclxuICpcclxuICogQ29weXJpZ2h0IDIwMTMgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9yc1xyXG4gKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXHJcbiAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2VcclxuICpcclxuICogaHR0cDovL2FwaS5qcXVlcnl1aS5jb20vdGFicy9cclxuICpcclxuICogRGVwZW5kczpcclxuICpcdGpxdWVyeS51aS5jb3JlLmpzXHJcbiAqXHRqcXVlcnkudWkud2lkZ2V0LmpzXHJcbiAqL1xyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcbnZhciB0YWJJZCA9IDAsXHJcblx0cmhhc2ggPSAvIy4qJC87XHJcblxyXG5mdW5jdGlvbiBnZXROZXh0VGFiSWQoKSB7XHJcblx0cmV0dXJuICsrdGFiSWQ7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGlzTG9jYWwoIGFuY2hvciApIHtcclxuXHRyZXR1cm4gYW5jaG9yLmhhc2gubGVuZ3RoID4gMSAmJlxyXG5cdFx0ZGVjb2RlVVJJQ29tcG9uZW50KCBhbmNob3IuaHJlZi5yZXBsYWNlKCByaGFzaCwgXCJcIiApICkgPT09XHJcblx0XHRcdGRlY29kZVVSSUNvbXBvbmVudCggbG9jYXRpb24uaHJlZi5yZXBsYWNlKCByaGFzaCwgXCJcIiApICk7XHJcbn1cclxuXHJcbiQud2lkZ2V0KCBcInVpLnRhYnNcIiwge1xyXG5cdHZlcnNpb246IFwiZmFkZjJiMzEyYTA1MDQwNDM2NDUxYzY0YmJmYWY0ODE0YmM2MmM1NlwiLFxyXG5cdGRlbGF5OiAzMDAsXHJcblx0b3B0aW9uczoge1xyXG5cdFx0YWN0aXZlOiBudWxsLFxyXG5cdFx0Y29sbGFwc2libGU6IGZhbHNlLFxyXG5cdFx0ZXZlbnQ6IFwiY2xpY2tcIixcclxuXHRcdGhlaWdodFN0eWxlOiBcImNvbnRlbnRcIixcclxuXHRcdGhpZGU6IG51bGwsXHJcblx0XHRzaG93OiBudWxsLFxyXG5cclxuXHRcdC8vIGNhbGxiYWNrc1xyXG5cdFx0YWN0aXZhdGU6IG51bGwsXHJcblx0XHRiZWZvcmVBY3RpdmF0ZTogbnVsbCxcclxuXHRcdGJlZm9yZUxvYWQ6IG51bGwsXHJcblx0XHRsb2FkOiBudWxsXHJcblx0fSxcclxuXHJcblx0X2NyZWF0ZTogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgdGhhdCA9IHRoaXMsXHJcblx0XHRcdG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7XHJcblxyXG5cdFx0dGhpcy5ydW5uaW5nID0gZmFsc2U7XHJcblxyXG5cdFx0dGhpcy5lbGVtZW50XHJcblx0XHRcdC5hZGRDbGFzcyggXCJ1aS10YWJzIHVpLXdpZGdldCB1aS13aWRnZXQtY29udGVudCB1aS1jb3JuZXItYWxsXCIgKVxyXG5cdFx0XHQudG9nZ2xlQ2xhc3MoIFwidWktdGFicy1jb2xsYXBzaWJsZVwiLCBvcHRpb25zLmNvbGxhcHNpYmxlIClcclxuXHRcdFx0Ly8gUHJldmVudCB1c2VycyBmcm9tIGZvY3VzaW5nIGRpc2FibGVkIHRhYnMgdmlhIGNsaWNrXHJcblx0XHRcdC5kZWxlZ2F0ZSggXCIudWktdGFicy1uYXYgPiBsaVwiLCBcIm1vdXNlZG93blwiICsgdGhpcy5ldmVudE5hbWVzcGFjZSwgZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0XHRcdGlmICggJCggdGhpcyApLmlzKCBcIi51aS1zdGF0ZS1kaXNhYmxlZFwiICkgKSB7XHJcblx0XHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSlcclxuXHRcdFx0Ly8gc3VwcG9ydDogSUUgPDlcclxuXHRcdFx0Ly8gUHJldmVudGluZyB0aGUgZGVmYXVsdCBhY3Rpb24gaW4gbW91c2Vkb3duIGRvZXNuJ3QgcHJldmVudCBJRVxyXG5cdFx0XHQvLyBmcm9tIGZvY3VzaW5nIHRoZSBlbGVtZW50LCBzbyBpZiB0aGUgYW5jaG9yIGdldHMgZm9jdXNlZCwgYmx1ci5cclxuXHRcdFx0Ly8gV2UgZG9uJ3QgaGF2ZSB0byB3b3JyeSBhYm91dCBmb2N1c2luZyB0aGUgcHJldmlvdXNseSBmb2N1c2VkXHJcblx0XHRcdC8vIGVsZW1lbnQgc2luY2UgY2xpY2tpbmcgb24gYSBub24tZm9jdXNhYmxlIGVsZW1lbnQgc2hvdWxkIGZvY3VzXHJcblx0XHRcdC8vIHRoZSBib2R5IGFueXdheS5cclxuXHRcdFx0LmRlbGVnYXRlKCBcIi51aS10YWJzLWFuY2hvclwiLCBcImZvY3VzXCIgKyB0aGlzLmV2ZW50TmFtZXNwYWNlLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRpZiAoICQoIHRoaXMgKS5jbG9zZXN0KCBcImxpXCIgKS5pcyggXCIudWktc3RhdGUtZGlzYWJsZWRcIiApICkge1xyXG5cdFx0XHRcdFx0dGhpcy5ibHVyKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHR0aGlzLl9wcm9jZXNzVGFicygpO1xyXG5cdFx0b3B0aW9ucy5hY3RpdmUgPSB0aGlzLl9pbml0aWFsQWN0aXZlKCk7XHJcblxyXG5cdFx0Ly8gVGFrZSBkaXNhYmxpbmcgdGFicyB2aWEgY2xhc3MgYXR0cmlidXRlIGZyb20gSFRNTFxyXG5cdFx0Ly8gaW50byBhY2NvdW50IGFuZCB1cGRhdGUgb3B0aW9uIHByb3Blcmx5LlxyXG5cdFx0aWYgKCAkLmlzQXJyYXkoIG9wdGlvbnMuZGlzYWJsZWQgKSApIHtcclxuXHRcdFx0b3B0aW9ucy5kaXNhYmxlZCA9ICQudW5pcXVlKCBvcHRpb25zLmRpc2FibGVkLmNvbmNhdChcclxuXHRcdFx0XHQkLm1hcCggdGhpcy50YWJzLmZpbHRlciggXCIudWktc3RhdGUtZGlzYWJsZWRcIiApLCBmdW5jdGlvbiggbGkgKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gdGhhdC50YWJzLmluZGV4KCBsaSApO1xyXG5cdFx0XHRcdH0pXHJcblx0XHRcdCkgKS5zb3J0KCk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gY2hlY2sgZm9yIGxlbmd0aCBhdm9pZHMgZXJyb3Igd2hlbiBpbml0aWFsaXppbmcgZW1wdHkgbGlzdFxyXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMuYWN0aXZlICE9PSBmYWxzZSAmJiB0aGlzLmFuY2hvcnMubGVuZ3RoICkge1xyXG5cdFx0XHR0aGlzLmFjdGl2ZSA9IHRoaXMuX2ZpbmRBY3RpdmUoIG9wdGlvbnMuYWN0aXZlICk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLmFjdGl2ZSA9ICQoKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl9yZWZyZXNoKCk7XHJcblxyXG5cdFx0aWYgKCB0aGlzLmFjdGl2ZS5sZW5ndGggKSB7XHJcblx0XHRcdHRoaXMubG9hZCggb3B0aW9ucy5hY3RpdmUgKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfaW5pdGlhbEFjdGl2ZTogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgYWN0aXZlID0gdGhpcy5vcHRpb25zLmFjdGl2ZSxcclxuXHRcdFx0Y29sbGFwc2libGUgPSB0aGlzLm9wdGlvbnMuY29sbGFwc2libGUsXHJcblx0XHRcdGxvY2F0aW9uSGFzaCA9IGxvY2F0aW9uLmhhc2guc3Vic3RyaW5nKCAxICk7XHJcblxyXG5cdFx0aWYgKCBhY3RpdmUgPT09IG51bGwgKSB7XHJcblx0XHRcdC8vIGNoZWNrIHRoZSBmcmFnbWVudCBpZGVudGlmaWVyIGluIHRoZSBVUkxcclxuXHRcdFx0aWYgKCBsb2NhdGlvbkhhc2ggKSB7XHJcblx0XHRcdFx0dGhpcy50YWJzLmVhY2goZnVuY3Rpb24oIGksIHRhYiApIHtcclxuXHRcdFx0XHRcdGlmICggJCggdGFiICkuYXR0ciggXCJhcmlhLWNvbnRyb2xzXCIgKSA9PT0gbG9jYXRpb25IYXNoICkge1xyXG5cdFx0XHRcdFx0XHRhY3RpdmUgPSBpO1xyXG5cdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIGNoZWNrIGZvciBhIHRhYiBtYXJrZWQgYWN0aXZlIHZpYSBhIGNsYXNzXHJcblx0XHRcdGlmICggYWN0aXZlID09PSBudWxsICkge1xyXG5cdFx0XHRcdGFjdGl2ZSA9IHRoaXMudGFicy5pbmRleCggdGhpcy50YWJzLmZpbHRlciggXCIudWktdGFicy1hY3RpdmVcIiApICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIG5vIGFjdGl2ZSB0YWIsIHNldCB0byBmYWxzZVxyXG5cdFx0XHRpZiAoIGFjdGl2ZSA9PT0gbnVsbCB8fCBhY3RpdmUgPT09IC0xICkge1xyXG5cdFx0XHRcdGFjdGl2ZSA9IHRoaXMudGFicy5sZW5ndGggPyAwIDogZmFsc2U7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHQvLyBoYW5kbGUgbnVtYmVyczogbmVnYXRpdmUsIG91dCBvZiByYW5nZVxyXG5cdFx0aWYgKCBhY3RpdmUgIT09IGZhbHNlICkge1xyXG5cdFx0XHRhY3RpdmUgPSB0aGlzLnRhYnMuaW5kZXgoIHRoaXMudGFicy5lcSggYWN0aXZlICkgKTtcclxuXHRcdFx0aWYgKCBhY3RpdmUgPT09IC0xICkge1xyXG5cdFx0XHRcdGFjdGl2ZSA9IGNvbGxhcHNpYmxlID8gZmFsc2UgOiAwO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gZG9uJ3QgYWxsb3cgY29sbGFwc2libGU6IGZhbHNlIGFuZCBhY3RpdmU6IGZhbHNlXHJcblx0XHRpZiAoICFjb2xsYXBzaWJsZSAmJiBhY3RpdmUgPT09IGZhbHNlICYmIHRoaXMuYW5jaG9ycy5sZW5ndGggKSB7XHJcblx0XHRcdGFjdGl2ZSA9IDA7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIGFjdGl2ZTtcclxuXHR9LFxyXG5cclxuXHRfZ2V0Q3JlYXRlRXZlbnREYXRhOiBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiB7XHJcblx0XHRcdHRhYjogdGhpcy5hY3RpdmUsXHJcblx0XHRcdHBhbmVsOiAhdGhpcy5hY3RpdmUubGVuZ3RoID8gJCgpIDogdGhpcy5fZ2V0UGFuZWxGb3JUYWIoIHRoaXMuYWN0aXZlIClcclxuXHRcdH07XHJcblx0fSxcclxuXHJcblx0X3RhYktleWRvd246IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdHZhciBmb2N1c2VkVGFiID0gJCggdGhpcy5kb2N1bWVudFswXS5hY3RpdmVFbGVtZW50ICkuY2xvc2VzdCggXCJsaVwiICksXHJcblx0XHRcdHNlbGVjdGVkSW5kZXggPSB0aGlzLnRhYnMuaW5kZXgoIGZvY3VzZWRUYWIgKSxcclxuXHRcdFx0Z29pbmdGb3J3YXJkID0gdHJ1ZTtcclxuXHJcblx0XHRpZiAoIHRoaXMuX2hhbmRsZVBhZ2VOYXYoIGV2ZW50ICkgKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHRzd2l0Y2ggKCBldmVudC5rZXlDb2RlICkge1xyXG5cdFx0XHRjYXNlICQudWkua2V5Q29kZS5SSUdIVDpcclxuXHRcdFx0Y2FzZSAkLnVpLmtleUNvZGUuRE9XTjpcclxuXHRcdFx0XHRzZWxlY3RlZEluZGV4Kys7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgJC51aS5rZXlDb2RlLlVQOlxyXG5cdFx0XHRjYXNlICQudWkua2V5Q29kZS5MRUZUOlxyXG5cdFx0XHRcdGdvaW5nRm9yd2FyZCA9IGZhbHNlO1xyXG5cdFx0XHRcdHNlbGVjdGVkSW5kZXgtLTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSAkLnVpLmtleUNvZGUuRU5EOlxyXG5cdFx0XHRcdHNlbGVjdGVkSW5kZXggPSB0aGlzLmFuY2hvcnMubGVuZ3RoIC0gMTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSAkLnVpLmtleUNvZGUuSE9NRTpcclxuXHRcdFx0XHRzZWxlY3RlZEluZGV4ID0gMDtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0Y2FzZSAkLnVpLmtleUNvZGUuU1BBQ0U6XHJcblx0XHRcdFx0Ly8gQWN0aXZhdGUgb25seSwgbm8gY29sbGFwc2luZ1xyXG5cdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0Y2xlYXJUaW1lb3V0KCB0aGlzLmFjdGl2YXRpbmcgKTtcclxuXHRcdFx0XHR0aGlzLl9hY3RpdmF0ZSggc2VsZWN0ZWRJbmRleCApO1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0Y2FzZSAkLnVpLmtleUNvZGUuRU5URVI6XHJcblx0XHRcdFx0Ly8gVG9nZ2xlIChjYW5jZWwgZGVsYXllZCBhY3RpdmF0aW9uLCBhbGxvdyBjb2xsYXBzaW5nKVxyXG5cdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0Y2xlYXJUaW1lb3V0KCB0aGlzLmFjdGl2YXRpbmcgKTtcclxuXHRcdFx0XHQvLyBEZXRlcm1pbmUgaWYgd2Ugc2hvdWxkIGNvbGxhcHNlIG9yIGFjdGl2YXRlXHJcblx0XHRcdFx0dGhpcy5fYWN0aXZhdGUoIHNlbGVjdGVkSW5kZXggPT09IHRoaXMub3B0aW9ucy5hY3RpdmUgPyBmYWxzZSA6IHNlbGVjdGVkSW5kZXggKTtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdGRlZmF1bHQ6XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEZvY3VzIHRoZSBhcHByb3ByaWF0ZSB0YWIsIGJhc2VkIG9uIHdoaWNoIGtleSB3YXMgcHJlc3NlZFxyXG5cdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHRcdGNsZWFyVGltZW91dCggdGhpcy5hY3RpdmF0aW5nICk7XHJcblx0XHRzZWxlY3RlZEluZGV4ID0gdGhpcy5fZm9jdXNOZXh0VGFiKCBzZWxlY3RlZEluZGV4LCBnb2luZ0ZvcndhcmQgKTtcclxuXHJcblx0XHQvLyBOYXZpZ2F0aW5nIHdpdGggY29udHJvbCBrZXkgd2lsbCBwcmV2ZW50IGF1dG9tYXRpYyBhY3RpdmF0aW9uXHJcblx0XHRpZiAoICFldmVudC5jdHJsS2V5ICkge1xyXG5cdFx0XHQvLyBVcGRhdGUgYXJpYS1zZWxlY3RlZCBpbW1lZGlhdGVseSBzbyB0aGF0IEFUIHRoaW5rIHRoZSB0YWIgaXMgYWxyZWFkeSBzZWxlY3RlZC5cclxuXHRcdFx0Ly8gT3RoZXJ3aXNlIEFUIG1heSBjb25mdXNlIHRoZSB1c2VyIGJ5IHN0YXRpbmcgdGhhdCB0aGV5IG5lZWQgdG8gYWN0aXZhdGUgdGhlIHRhYixcclxuXHRcdFx0Ly8gYnV0IHRoZSB0YWIgd2lsbCBhbHJlYWR5IGJlIGFjdGl2YXRlZCBieSB0aGUgdGltZSB0aGUgYW5ub3VuY2VtZW50IGZpbmlzaGVzLlxyXG5cdFx0XHRmb2N1c2VkVGFiLmF0dHIoIFwiYXJpYS1zZWxlY3RlZFwiLCBcImZhbHNlXCIgKTtcclxuXHRcdFx0dGhpcy50YWJzLmVxKCBzZWxlY3RlZEluZGV4ICkuYXR0ciggXCJhcmlhLXNlbGVjdGVkXCIsIFwidHJ1ZVwiICk7XHJcblxyXG5cdFx0XHR0aGlzLmFjdGl2YXRpbmcgPSB0aGlzLl9kZWxheShmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR0aGlzLm9wdGlvbiggXCJhY3RpdmVcIiwgc2VsZWN0ZWRJbmRleCApO1xyXG5cdFx0XHR9LCB0aGlzLmRlbGF5ICk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X3BhbmVsS2V5ZG93bjogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0aWYgKCB0aGlzLl9oYW5kbGVQYWdlTmF2KCBldmVudCApICkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gQ3RybCt1cCBtb3ZlcyBmb2N1cyB0byB0aGUgY3VycmVudCB0YWJcclxuXHRcdGlmICggZXZlbnQuY3RybEtleSAmJiBldmVudC5rZXlDb2RlID09PSAkLnVpLmtleUNvZGUuVVAgKSB7XHJcblx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdHRoaXMuYWN0aXZlLmZvY3VzKCk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0Ly8gQWx0K3BhZ2UgdXAvZG93biBtb3ZlcyBmb2N1cyB0byB0aGUgcHJldmlvdXMvbmV4dCB0YWIgKGFuZCBhY3RpdmF0ZXMpXHJcblx0X2hhbmRsZVBhZ2VOYXY6IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdGlmICggZXZlbnQuYWx0S2V5ICYmIGV2ZW50LmtleUNvZGUgPT09ICQudWkua2V5Q29kZS5QQUdFX1VQICkge1xyXG5cdFx0XHR0aGlzLl9hY3RpdmF0ZSggdGhpcy5fZm9jdXNOZXh0VGFiKCB0aGlzLm9wdGlvbnMuYWN0aXZlIC0gMSwgZmFsc2UgKSApO1xyXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdH1cclxuXHRcdGlmICggZXZlbnQuYWx0S2V5ICYmIGV2ZW50LmtleUNvZGUgPT09ICQudWkua2V5Q29kZS5QQUdFX0RPV04gKSB7XHJcblx0XHRcdHRoaXMuX2FjdGl2YXRlKCB0aGlzLl9mb2N1c05leHRUYWIoIHRoaXMub3B0aW9ucy5hY3RpdmUgKyAxLCB0cnVlICkgKTtcclxuXHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X2ZpbmROZXh0VGFiOiBmdW5jdGlvbiggaW5kZXgsIGdvaW5nRm9yd2FyZCApIHtcclxuXHRcdHZhciBsYXN0VGFiSW5kZXggPSB0aGlzLnRhYnMubGVuZ3RoIC0gMTtcclxuXHJcblx0XHRmdW5jdGlvbiBjb25zdHJhaW4oKSB7XHJcblx0XHRcdGlmICggaW5kZXggPiBsYXN0VGFiSW5kZXggKSB7XHJcblx0XHRcdFx0aW5kZXggPSAwO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICggaW5kZXggPCAwICkge1xyXG5cdFx0XHRcdGluZGV4ID0gbGFzdFRhYkluZGV4O1xyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybiBpbmRleDtcclxuXHRcdH1cclxuXHJcblx0XHR3aGlsZSAoICQuaW5BcnJheSggY29uc3RyYWluKCksIHRoaXMub3B0aW9ucy5kaXNhYmxlZCApICE9PSAtMSApIHtcclxuXHRcdFx0aW5kZXggPSBnb2luZ0ZvcndhcmQgPyBpbmRleCArIDEgOiBpbmRleCAtIDE7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIGluZGV4O1xyXG5cdH0sXHJcblxyXG5cdF9mb2N1c05leHRUYWI6IGZ1bmN0aW9uKCBpbmRleCwgZ29pbmdGb3J3YXJkICkge1xyXG5cdFx0aW5kZXggPSB0aGlzLl9maW5kTmV4dFRhYiggaW5kZXgsIGdvaW5nRm9yd2FyZCApO1xyXG5cdFx0dGhpcy50YWJzLmVxKCBpbmRleCApLmZvY3VzKCk7XHJcblx0XHRyZXR1cm4gaW5kZXg7XHJcblx0fSxcclxuXHJcblx0X3NldE9wdGlvbjogZnVuY3Rpb24oIGtleSwgdmFsdWUgKSB7XHJcblx0XHRpZiAoIGtleSA9PT0gXCJhY3RpdmVcIiApIHtcclxuXHRcdFx0Ly8gX2FjdGl2YXRlKCkgd2lsbCBoYW5kbGUgaW52YWxpZCB2YWx1ZXMgYW5kIHVwZGF0ZSB0aGlzLm9wdGlvbnNcclxuXHRcdFx0dGhpcy5fYWN0aXZhdGUoIHZhbHVlICk7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIGtleSA9PT0gXCJkaXNhYmxlZFwiICkge1xyXG5cdFx0XHQvLyBkb24ndCB1c2UgdGhlIHdpZGdldCBmYWN0b3J5J3MgZGlzYWJsZWQgaGFuZGxpbmdcclxuXHRcdFx0dGhpcy5fc2V0dXBEaXNhYmxlZCggdmFsdWUgKTtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX3N1cGVyKCBrZXksIHZhbHVlKTtcclxuXHJcblx0XHRpZiAoIGtleSA9PT0gXCJjb2xsYXBzaWJsZVwiICkge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQudG9nZ2xlQ2xhc3MoIFwidWktdGFicy1jb2xsYXBzaWJsZVwiLCB2YWx1ZSApO1xyXG5cdFx0XHQvLyBTZXR0aW5nIGNvbGxhcHNpYmxlOiBmYWxzZSB3aGlsZSBjb2xsYXBzZWQ7IG9wZW4gZmlyc3QgcGFuZWxcclxuXHRcdFx0aWYgKCAhdmFsdWUgJiYgdGhpcy5vcHRpb25zLmFjdGl2ZSA9PT0gZmFsc2UgKSB7XHJcblx0XHRcdFx0dGhpcy5fYWN0aXZhdGUoIDAgKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGlmICgga2V5ID09PSBcImV2ZW50XCIgKSB7XHJcblx0XHRcdHRoaXMuX3NldHVwRXZlbnRzKCB2YWx1ZSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICgga2V5ID09PSBcImhlaWdodFN0eWxlXCIgKSB7XHJcblx0XHRcdHRoaXMuX3NldHVwSGVpZ2h0U3R5bGUoIHZhbHVlICk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X3RhYklkOiBmdW5jdGlvbiggdGFiICkge1xyXG5cdFx0cmV0dXJuIHRhYi5hdHRyKCBcImFyaWEtY29udHJvbHNcIiApIHx8IFwidWktdGFicy1cIiArIGdldE5leHRUYWJJZCgpO1xyXG5cdH0sXHJcblxyXG5cdF9zYW5pdGl6ZVNlbGVjdG9yOiBmdW5jdGlvbiggaGFzaCApIHtcclxuXHRcdHJldHVybiBoYXNoID8gaGFzaC5yZXBsYWNlKCAvWyFcIiQlJicoKSorLC5cXC86Ozw9Pj9AXFxbXFxdXFxeYHt8fX5dL2csIFwiXFxcXCQmXCIgKSA6IFwiXCI7XHJcblx0fSxcclxuXHJcblx0cmVmcmVzaDogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgb3B0aW9ucyA9IHRoaXMub3B0aW9ucyxcclxuXHRcdFx0bGlzID0gdGhpcy50YWJsaXN0LmNoaWxkcmVuKCBcIjpoYXMoYVtocmVmXSlcIiApO1xyXG5cclxuXHRcdC8vIGdldCBkaXNhYmxlZCB0YWJzIGZyb20gY2xhc3MgYXR0cmlidXRlIGZyb20gSFRNTFxyXG5cdFx0Ly8gdGhpcyB3aWxsIGdldCBjb252ZXJ0ZWQgdG8gYSBib29sZWFuIGlmIG5lZWRlZCBpbiBfcmVmcmVzaCgpXHJcblx0XHRvcHRpb25zLmRpc2FibGVkID0gJC5tYXAoIGxpcy5maWx0ZXIoIFwiLnVpLXN0YXRlLWRpc2FibGVkXCIgKSwgZnVuY3Rpb24oIHRhYiApIHtcclxuXHRcdFx0cmV0dXJuIGxpcy5pbmRleCggdGFiICk7XHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLl9wcm9jZXNzVGFicygpO1xyXG5cclxuXHRcdC8vIHdhcyBjb2xsYXBzZWQgb3Igbm8gdGFic1xyXG5cdFx0aWYgKCBvcHRpb25zLmFjdGl2ZSA9PT0gZmFsc2UgfHwgIXRoaXMuYW5jaG9ycy5sZW5ndGggKSB7XHJcblx0XHRcdG9wdGlvbnMuYWN0aXZlID0gZmFsc2U7XHJcblx0XHRcdHRoaXMuYWN0aXZlID0gJCgpO1xyXG5cdFx0Ly8gd2FzIGFjdGl2ZSwgYnV0IGFjdGl2ZSB0YWIgaXMgZ29uZVxyXG5cdFx0fSBlbHNlIGlmICggdGhpcy5hY3RpdmUubGVuZ3RoICYmICEkLmNvbnRhaW5zKCB0aGlzLnRhYmxpc3RbIDAgXSwgdGhpcy5hY3RpdmVbIDAgXSApICkge1xyXG5cdFx0XHQvLyBhbGwgcmVtYWluaW5nIHRhYnMgYXJlIGRpc2FibGVkXHJcblx0XHRcdGlmICggdGhpcy50YWJzLmxlbmd0aCA9PT0gb3B0aW9ucy5kaXNhYmxlZC5sZW5ndGggKSB7XHJcblx0XHRcdFx0b3B0aW9ucy5hY3RpdmUgPSBmYWxzZTtcclxuXHRcdFx0XHR0aGlzLmFjdGl2ZSA9ICQoKTtcclxuXHRcdFx0Ly8gYWN0aXZhdGUgcHJldmlvdXMgdGFiXHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0dGhpcy5fYWN0aXZhdGUoIHRoaXMuX2ZpbmROZXh0VGFiKCBNYXRoLm1heCggMCwgb3B0aW9ucy5hY3RpdmUgLSAxICksIGZhbHNlICkgKTtcclxuXHRcdFx0fVxyXG5cdFx0Ly8gd2FzIGFjdGl2ZSwgYWN0aXZlIHRhYiBzdGlsbCBleGlzdHNcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdC8vIG1ha2Ugc3VyZSBhY3RpdmUgaW5kZXggaXMgY29ycmVjdFxyXG5cdFx0XHRvcHRpb25zLmFjdGl2ZSA9IHRoaXMudGFicy5pbmRleCggdGhpcy5hY3RpdmUgKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl9yZWZyZXNoKCk7XHJcblx0fSxcclxuXHJcblx0X3JlZnJlc2g6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5fc2V0dXBEaXNhYmxlZCggdGhpcy5vcHRpb25zLmRpc2FibGVkICk7XHJcblx0XHR0aGlzLl9zZXR1cEV2ZW50cyggdGhpcy5vcHRpb25zLmV2ZW50ICk7XHJcblx0XHR0aGlzLl9zZXR1cEhlaWdodFN0eWxlKCB0aGlzLm9wdGlvbnMuaGVpZ2h0U3R5bGUgKTtcclxuXHJcblx0XHR0aGlzLnRhYnMubm90KCB0aGlzLmFjdGl2ZSApLmF0dHIoe1xyXG5cdFx0XHRcImFyaWEtc2VsZWN0ZWRcIjogXCJmYWxzZVwiLFxyXG5cdFx0XHR0YWJJbmRleDogLTFcclxuXHRcdH0pO1xyXG5cdFx0dGhpcy5wYW5lbHMubm90KCB0aGlzLl9nZXRQYW5lbEZvclRhYiggdGhpcy5hY3RpdmUgKSApXHJcblx0XHRcdC5oaWRlKClcclxuXHRcdFx0LmF0dHIoe1xyXG5cdFx0XHRcdFwiYXJpYS1leHBhbmRlZFwiOiBcImZhbHNlXCIsXHJcblx0XHRcdFx0XCJhcmlhLWhpZGRlblwiOiBcInRydWVcIlxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHQvLyBNYWtlIHN1cmUgb25lIHRhYiBpcyBpbiB0aGUgdGFiIG9yZGVyXHJcblx0XHRpZiAoICF0aGlzLmFjdGl2ZS5sZW5ndGggKSB7XHJcblx0XHRcdHRoaXMudGFicy5lcSggMCApLmF0dHIoIFwidGFiSW5kZXhcIiwgMCApO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhpcy5hY3RpdmVcclxuXHRcdFx0XHQuYWRkQ2xhc3MoIFwidWktdGFicy1hY3RpdmUgdWktc3RhdGUtYWN0aXZlXCIgKVxyXG5cdFx0XHRcdC5hdHRyKHtcclxuXHRcdFx0XHRcdFwiYXJpYS1zZWxlY3RlZFwiOiBcInRydWVcIixcclxuXHRcdFx0XHRcdHRhYkluZGV4OiAwXHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdHRoaXMuX2dldFBhbmVsRm9yVGFiKCB0aGlzLmFjdGl2ZSApXHJcblx0XHRcdFx0LnNob3coKVxyXG5cdFx0XHRcdC5hdHRyKHtcclxuXHRcdFx0XHRcdFwiYXJpYS1leHBhbmRlZFwiOiBcInRydWVcIixcclxuXHRcdFx0XHRcdFwiYXJpYS1oaWRkZW5cIjogXCJmYWxzZVwiXHJcblx0XHRcdFx0fSk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X3Byb2Nlc3NUYWJzOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciB0aGF0ID0gdGhpcztcclxuXHJcblx0XHR0aGlzLnRhYmxpc3QgPSB0aGlzLl9nZXRMaXN0KClcclxuXHRcdFx0LmFkZENsYXNzKCBcInVpLXRhYnMtbmF2IHVpLWhlbHBlci1yZXNldCB1aS1oZWxwZXItY2xlYXJmaXggdWktd2lkZ2V0LWhlYWRlciB1aS1jb3JuZXItYWxsXCIgKVxyXG5cdFx0XHQuYXR0ciggXCJyb2xlXCIsIFwidGFibGlzdFwiICk7XHJcblxyXG5cdFx0dGhpcy50YWJzID0gdGhpcy50YWJsaXN0LmZpbmQoIFwiPiBsaTpoYXMoYVtocmVmXSlcIiApXHJcblx0XHRcdC5hZGRDbGFzcyggXCJ1aS1zdGF0ZS1kZWZhdWx0IHVpLWNvcm5lci10b3BcIiApXHJcblx0XHRcdC5hdHRyKHtcclxuXHRcdFx0XHRyb2xlOiBcInRhYlwiLFxyXG5cdFx0XHRcdHRhYkluZGV4OiAtMVxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHR0aGlzLmFuY2hvcnMgPSB0aGlzLnRhYnMubWFwKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHJldHVybiAkKCBcImFcIiwgdGhpcyApWyAwIF07XHJcblx0XHRcdH0pXHJcblx0XHRcdC5hZGRDbGFzcyggXCJ1aS10YWJzLWFuY2hvclwiIClcclxuXHRcdFx0LmF0dHIoe1xyXG5cdFx0XHRcdHJvbGU6IFwicHJlc2VudGF0aW9uXCIsXHJcblx0XHRcdFx0dGFiSW5kZXg6IC0xXHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdHRoaXMucGFuZWxzID0gJCgpO1xyXG5cclxuXHRcdHRoaXMuYW5jaG9ycy5lYWNoKGZ1bmN0aW9uKCBpLCBhbmNob3IgKSB7XHJcblx0XHRcdHZhciBzZWxlY3RvciwgcGFuZWwsIHBhbmVsSWQsXHJcblx0XHRcdFx0YW5jaG9ySWQgPSAkKCBhbmNob3IgKS51bmlxdWVJZCgpLmF0dHIoIFwiaWRcIiApLFxyXG5cdFx0XHRcdHRhYiA9ICQoIGFuY2hvciApLmNsb3Nlc3QoIFwibGlcIiApLFxyXG5cdFx0XHRcdG9yaWdpbmFsQXJpYUNvbnRyb2xzID0gdGFiLmF0dHIoIFwiYXJpYS1jb250cm9sc1wiICk7XHJcblxyXG5cdFx0XHQvLyBpbmxpbmUgdGFiXHJcblx0XHRcdGlmICggaXNMb2NhbCggYW5jaG9yICkgKSB7XHJcblx0XHRcdFx0c2VsZWN0b3IgPSBhbmNob3IuaGFzaDtcclxuXHRcdFx0XHRwYW5lbCA9IHRoYXQuZWxlbWVudC5maW5kKCB0aGF0Ll9zYW5pdGl6ZVNlbGVjdG9yKCBzZWxlY3RvciApICk7XHJcblx0XHRcdC8vIHJlbW90ZSB0YWJcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRwYW5lbElkID0gdGhhdC5fdGFiSWQoIHRhYiApO1xyXG5cdFx0XHRcdHNlbGVjdG9yID0gXCIjXCIgKyBwYW5lbElkO1xyXG5cdFx0XHRcdHBhbmVsID0gdGhhdC5lbGVtZW50LmZpbmQoIHNlbGVjdG9yICk7XHJcblx0XHRcdFx0aWYgKCAhcGFuZWwubGVuZ3RoICkge1xyXG5cdFx0XHRcdFx0cGFuZWwgPSB0aGF0Ll9jcmVhdGVQYW5lbCggcGFuZWxJZCApO1xyXG5cdFx0XHRcdFx0cGFuZWwuaW5zZXJ0QWZ0ZXIoIHRoYXQucGFuZWxzWyBpIC0gMSBdIHx8IHRoYXQudGFibGlzdCApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRwYW5lbC5hdHRyKCBcImFyaWEtbGl2ZVwiLCBcInBvbGl0ZVwiICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICggcGFuZWwubGVuZ3RoKSB7XHJcblx0XHRcdFx0dGhhdC5wYW5lbHMgPSB0aGF0LnBhbmVscy5hZGQoIHBhbmVsICk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKCBvcmlnaW5hbEFyaWFDb250cm9scyApIHtcclxuXHRcdFx0XHR0YWIuZGF0YSggXCJ1aS10YWJzLWFyaWEtY29udHJvbHNcIiwgb3JpZ2luYWxBcmlhQ29udHJvbHMgKTtcclxuXHRcdFx0fVxyXG5cdFx0XHR0YWIuYXR0cih7XHJcblx0XHRcdFx0XCJhcmlhLWNvbnRyb2xzXCI6IHNlbGVjdG9yLnN1YnN0cmluZyggMSApLFxyXG5cdFx0XHRcdFwiYXJpYS1sYWJlbGxlZGJ5XCI6IGFuY2hvcklkXHJcblx0XHRcdH0pO1xyXG5cdFx0XHRwYW5lbC5hdHRyKCBcImFyaWEtbGFiZWxsZWRieVwiLCBhbmNob3JJZCApO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5wYW5lbHNcclxuXHRcdFx0LmFkZENsYXNzKCBcInVpLXRhYnMtcGFuZWwgdWktd2lkZ2V0LWNvbnRlbnQgdWktY29ybmVyLWJvdHRvbVwiIClcclxuXHRcdFx0LmF0dHIoIFwicm9sZVwiLCBcInRhYnBhbmVsXCIgKTtcclxuXHR9LFxyXG5cclxuXHQvLyBhbGxvdyBvdmVycmlkaW5nIGhvdyB0byBmaW5kIHRoZSBsaXN0IGZvciByYXJlIHVzYWdlIHNjZW5hcmlvcyAoIzc3MTUpXHJcblx0X2dldExpc3Q6IGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuIHRoaXMuZWxlbWVudC5maW5kKCBcIm9sLHVsXCIgKS5lcSggMCApO1xyXG5cdH0sXHJcblxyXG5cdF9jcmVhdGVQYW5lbDogZnVuY3Rpb24oIGlkICkge1xyXG5cdFx0cmV0dXJuICQoIFwiPGRpdj5cIiApXHJcblx0XHRcdC5hdHRyKCBcImlkXCIsIGlkIClcclxuXHRcdFx0LmFkZENsYXNzKCBcInVpLXRhYnMtcGFuZWwgdWktd2lkZ2V0LWNvbnRlbnQgdWktY29ybmVyLWJvdHRvbVwiIClcclxuXHRcdFx0LmRhdGEoIFwidWktdGFicy1kZXN0cm95XCIsIHRydWUgKTtcclxuXHR9LFxyXG5cclxuXHRfc2V0dXBEaXNhYmxlZDogZnVuY3Rpb24oIGRpc2FibGVkICkge1xyXG5cdFx0aWYgKCAkLmlzQXJyYXkoIGRpc2FibGVkICkgKSB7XHJcblx0XHRcdGlmICggIWRpc2FibGVkLmxlbmd0aCApIHtcclxuXHRcdFx0XHRkaXNhYmxlZCA9IGZhbHNlO1xyXG5cdFx0XHR9IGVsc2UgaWYgKCBkaXNhYmxlZC5sZW5ndGggPT09IHRoaXMuYW5jaG9ycy5sZW5ndGggKSB7XHJcblx0XHRcdFx0ZGlzYWJsZWQgPSB0cnVlO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gZGlzYWJsZSB0YWJzXHJcblx0XHRmb3IgKCB2YXIgaSA9IDAsIGxpOyAoIGxpID0gdGhpcy50YWJzWyBpIF0gKTsgaSsrICkge1xyXG5cdFx0XHRpZiAoIGRpc2FibGVkID09PSB0cnVlIHx8ICQuaW5BcnJheSggaSwgZGlzYWJsZWQgKSAhPT0gLTEgKSB7XHJcblx0XHRcdFx0JCggbGkgKVxyXG5cdFx0XHRcdFx0LmFkZENsYXNzKCBcInVpLXN0YXRlLWRpc2FibGVkXCIgKVxyXG5cdFx0XHRcdFx0LmF0dHIoIFwiYXJpYS1kaXNhYmxlZFwiLCBcInRydWVcIiApO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdCQoIGxpIClcclxuXHRcdFx0XHRcdC5yZW1vdmVDbGFzcyggXCJ1aS1zdGF0ZS1kaXNhYmxlZFwiIClcclxuXHRcdFx0XHRcdC5yZW1vdmVBdHRyKCBcImFyaWEtZGlzYWJsZWRcIiApO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5vcHRpb25zLmRpc2FibGVkID0gZGlzYWJsZWQ7XHJcblx0fSxcclxuXHJcblx0X3NldHVwRXZlbnRzOiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHR2YXIgZXZlbnRzID0ge1xyXG5cdFx0XHRjbGljazogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblx0XHRpZiAoIGV2ZW50ICkge1xyXG5cdFx0XHQkLmVhY2goIGV2ZW50LnNwbGl0KFwiIFwiKSwgZnVuY3Rpb24oIGluZGV4LCBldmVudE5hbWUgKSB7XHJcblx0XHRcdFx0ZXZlbnRzWyBldmVudE5hbWUgXSA9IFwiX2V2ZW50SGFuZGxlclwiO1xyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl9vZmYoIHRoaXMuYW5jaG9ycy5hZGQoIHRoaXMudGFicyApLmFkZCggdGhpcy5wYW5lbHMgKSApO1xyXG5cdFx0dGhpcy5fb24oIHRoaXMuYW5jaG9ycywgZXZlbnRzICk7XHJcblx0XHR0aGlzLl9vbiggdGhpcy50YWJzLCB7IGtleWRvd246IFwiX3RhYktleWRvd25cIiB9ICk7XHJcblx0XHR0aGlzLl9vbiggdGhpcy5wYW5lbHMsIHsga2V5ZG93bjogXCJfcGFuZWxLZXlkb3duXCIgfSApO1xyXG5cclxuXHRcdHRoaXMuX2ZvY3VzYWJsZSggdGhpcy50YWJzICk7XHJcblx0XHR0aGlzLl9ob3ZlcmFibGUoIHRoaXMudGFicyApO1xyXG5cdH0sXHJcblxyXG5cdF9zZXR1cEhlaWdodFN0eWxlOiBmdW5jdGlvbiggaGVpZ2h0U3R5bGUgKSB7XHJcblx0XHR2YXIgbWF4SGVpZ2h0LFxyXG5cdFx0XHRwYXJlbnQgPSB0aGlzLmVsZW1lbnQucGFyZW50KCk7XHJcblxyXG5cdFx0aWYgKCBoZWlnaHRTdHlsZSA9PT0gXCJmaWxsXCIgKSB7XHJcblx0XHRcdG1heEhlaWdodCA9IHBhcmVudC5oZWlnaHQoKTtcclxuXHRcdFx0bWF4SGVpZ2h0IC09IHRoaXMuZWxlbWVudC5vdXRlckhlaWdodCgpIC0gdGhpcy5lbGVtZW50LmhlaWdodCgpO1xyXG5cclxuXHRcdFx0dGhpcy5lbGVtZW50LnNpYmxpbmdzKCBcIjp2aXNpYmxlXCIgKS5lYWNoKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHZhciBlbGVtID0gJCggdGhpcyApLFxyXG5cdFx0XHRcdFx0cG9zaXRpb24gPSBlbGVtLmNzcyggXCJwb3NpdGlvblwiICk7XHJcblxyXG5cdFx0XHRcdGlmICggcG9zaXRpb24gPT09IFwiYWJzb2x1dGVcIiB8fCBwb3NpdGlvbiA9PT0gXCJmaXhlZFwiICkge1xyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRtYXhIZWlnaHQgLT0gZWxlbS5vdXRlckhlaWdodCggdHJ1ZSApO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdHRoaXMuZWxlbWVudC5jaGlsZHJlbigpLm5vdCggdGhpcy5wYW5lbHMgKS5lYWNoKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdG1heEhlaWdodCAtPSAkKCB0aGlzICkub3V0ZXJIZWlnaHQoIHRydWUgKTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHR0aGlzLnBhbmVscy5lYWNoKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdCQoIHRoaXMgKS5oZWlnaHQoIE1hdGgubWF4KCAwLCBtYXhIZWlnaHQgLVxyXG5cdFx0XHRcdFx0JCggdGhpcyApLmlubmVySGVpZ2h0KCkgKyAkKCB0aGlzICkuaGVpZ2h0KCkgKSApO1xyXG5cdFx0XHR9KVxyXG5cdFx0XHQuY3NzKCBcIm92ZXJmbG93XCIsIFwiYXV0b1wiICk7XHJcblx0XHR9IGVsc2UgaWYgKCBoZWlnaHRTdHlsZSA9PT0gXCJhdXRvXCIgKSB7XHJcblx0XHRcdG1heEhlaWdodCA9IDA7XHJcblx0XHRcdHRoaXMucGFuZWxzLmVhY2goZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0bWF4SGVpZ2h0ID0gTWF0aC5tYXgoIG1heEhlaWdodCwgJCggdGhpcyApLmhlaWdodCggXCJcIiApLmhlaWdodCgpICk7XHJcblx0XHRcdH0pLmhlaWdodCggbWF4SGVpZ2h0ICk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X2V2ZW50SGFuZGxlcjogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0dmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnMsXHJcblx0XHRcdGFjdGl2ZSA9IHRoaXMuYWN0aXZlLFxyXG5cdFx0XHRhbmNob3IgPSAkKCBldmVudC5jdXJyZW50VGFyZ2V0ICksXHJcblx0XHRcdHRhYiA9IGFuY2hvci5jbG9zZXN0KCBcImxpXCIgKSxcclxuXHRcdFx0Y2xpY2tlZElzQWN0aXZlID0gdGFiWyAwIF0gPT09IGFjdGl2ZVsgMCBdLFxyXG5cdFx0XHRjb2xsYXBzaW5nID0gY2xpY2tlZElzQWN0aXZlICYmIG9wdGlvbnMuY29sbGFwc2libGUsXHJcblx0XHRcdHRvU2hvdyA9IGNvbGxhcHNpbmcgPyAkKCkgOiB0aGlzLl9nZXRQYW5lbEZvclRhYiggdGFiICksXHJcblx0XHRcdHRvSGlkZSA9ICFhY3RpdmUubGVuZ3RoID8gJCgpIDogdGhpcy5fZ2V0UGFuZWxGb3JUYWIoIGFjdGl2ZSApLFxyXG5cdFx0XHRldmVudERhdGEgPSB7XHJcblx0XHRcdFx0b2xkVGFiOiBhY3RpdmUsXHJcblx0XHRcdFx0b2xkUGFuZWw6IHRvSGlkZSxcclxuXHRcdFx0XHRuZXdUYWI6IGNvbGxhcHNpbmcgPyAkKCkgOiB0YWIsXHJcblx0XHRcdFx0bmV3UGFuZWw6IHRvU2hvd1xyXG5cdFx0XHR9O1xyXG5cclxuXHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG5cdFx0aWYgKCB0YWIuaGFzQ2xhc3MoIFwidWktc3RhdGUtZGlzYWJsZWRcIiApIHx8XHJcblx0XHRcdFx0Ly8gdGFiIGlzIGFscmVhZHkgbG9hZGluZ1xyXG5cdFx0XHRcdHRhYi5oYXNDbGFzcyggXCJ1aS10YWJzLWxvYWRpbmdcIiApIHx8XHJcblx0XHRcdFx0Ly8gY2FuJ3Qgc3dpdGNoIGR1cm5pbmcgYW4gYW5pbWF0aW9uXHJcblx0XHRcdFx0dGhpcy5ydW5uaW5nIHx8XHJcblx0XHRcdFx0Ly8gY2xpY2sgb24gYWN0aXZlIGhlYWRlciwgYnV0IG5vdCBjb2xsYXBzaWJsZVxyXG5cdFx0XHRcdCggY2xpY2tlZElzQWN0aXZlICYmICFvcHRpb25zLmNvbGxhcHNpYmxlICkgfHxcclxuXHRcdFx0XHQvLyBhbGxvdyBjYW5jZWxpbmcgYWN0aXZhdGlvblxyXG5cdFx0XHRcdCggdGhpcy5fdHJpZ2dlciggXCJiZWZvcmVBY3RpdmF0ZVwiLCBldmVudCwgZXZlbnREYXRhICkgPT09IGZhbHNlICkgKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHRvcHRpb25zLmFjdGl2ZSA9IGNvbGxhcHNpbmcgPyBmYWxzZSA6IHRoaXMudGFicy5pbmRleCggdGFiICk7XHJcblxyXG5cdFx0dGhpcy5hY3RpdmUgPSBjbGlja2VkSXNBY3RpdmUgPyAkKCkgOiB0YWI7XHJcblx0XHRpZiAoIHRoaXMueGhyICkge1xyXG5cdFx0XHR0aGlzLnhoci5hYm9ydCgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggIXRvSGlkZS5sZW5ndGggJiYgIXRvU2hvdy5sZW5ndGggKSB7XHJcblx0XHRcdCQuZXJyb3IoIFwialF1ZXJ5IFVJIFRhYnM6IE1pc21hdGNoaW5nIGZyYWdtZW50IGlkZW50aWZpZXIuXCIgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIHRvU2hvdy5sZW5ndGggKSB7XHJcblx0XHRcdHRoaXMubG9hZCggdGhpcy50YWJzLmluZGV4KCB0YWIgKSwgZXZlbnQgKTtcclxuXHRcdH1cclxuXHRcdHRoaXMuX3RvZ2dsZSggZXZlbnQsIGV2ZW50RGF0YSApO1xyXG5cdH0sXHJcblxyXG5cdC8vIGhhbmRsZXMgc2hvdy9oaWRlIGZvciBzZWxlY3RpbmcgdGFic1xyXG5cdF90b2dnbGU6IGZ1bmN0aW9uKCBldmVudCwgZXZlbnREYXRhICkge1xyXG5cdFx0dmFyIHRoYXQgPSB0aGlzLFxyXG5cdFx0XHR0b1Nob3cgPSBldmVudERhdGEubmV3UGFuZWwsXHJcblx0XHRcdHRvSGlkZSA9IGV2ZW50RGF0YS5vbGRQYW5lbDtcclxuXHJcblx0XHR0aGlzLnJ1bm5pbmcgPSB0cnVlO1xyXG5cclxuXHRcdGZ1bmN0aW9uIGNvbXBsZXRlKCkge1xyXG5cdFx0XHR0aGF0LnJ1bm5pbmcgPSBmYWxzZTtcclxuXHRcdFx0dGhhdC5fdHJpZ2dlciggXCJhY3RpdmF0ZVwiLCBldmVudCwgZXZlbnREYXRhICk7XHJcblx0XHR9XHJcblxyXG5cdFx0ZnVuY3Rpb24gc2hvdygpIHtcclxuXHRcdFx0ZXZlbnREYXRhLm5ld1RhYi5jbG9zZXN0KCBcImxpXCIgKS5hZGRDbGFzcyggXCJ1aS10YWJzLWFjdGl2ZSB1aS1zdGF0ZS1hY3RpdmVcIiApO1xyXG5cclxuXHRcdFx0aWYgKCB0b1Nob3cubGVuZ3RoICYmIHRoYXQub3B0aW9ucy5zaG93ICkge1xyXG5cdFx0XHRcdHRoYXQuX3Nob3coIHRvU2hvdywgdGhhdC5vcHRpb25zLnNob3csIGNvbXBsZXRlICk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0dG9TaG93LnNob3coKTtcclxuXHRcdFx0XHRjb21wbGV0ZSgpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gc3RhcnQgb3V0IGJ5IGhpZGluZywgdGhlbiBzaG93aW5nLCB0aGVuIGNvbXBsZXRpbmdcclxuXHRcdGlmICggdG9IaWRlLmxlbmd0aCAmJiB0aGlzLm9wdGlvbnMuaGlkZSApIHtcclxuXHRcdFx0dGhpcy5faGlkZSggdG9IaWRlLCB0aGlzLm9wdGlvbnMuaGlkZSwgZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0ZXZlbnREYXRhLm9sZFRhYi5jbG9zZXN0KCBcImxpXCIgKS5yZW1vdmVDbGFzcyggXCJ1aS10YWJzLWFjdGl2ZSB1aS1zdGF0ZS1hY3RpdmVcIiApO1xyXG5cdFx0XHRcdHNob3coKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRldmVudERhdGEub2xkVGFiLmNsb3Nlc3QoIFwibGlcIiApLnJlbW92ZUNsYXNzKCBcInVpLXRhYnMtYWN0aXZlIHVpLXN0YXRlLWFjdGl2ZVwiICk7XHJcblx0XHRcdHRvSGlkZS5oaWRlKCk7XHJcblx0XHRcdHNob3coKTtcclxuXHRcdH1cclxuXHJcblx0XHR0b0hpZGUuYXR0cih7XHJcblx0XHRcdFwiYXJpYS1leHBhbmRlZFwiOiBcImZhbHNlXCIsXHJcblx0XHRcdFwiYXJpYS1oaWRkZW5cIjogXCJ0cnVlXCJcclxuXHRcdH0pO1xyXG5cdFx0ZXZlbnREYXRhLm9sZFRhYi5hdHRyKCBcImFyaWEtc2VsZWN0ZWRcIiwgXCJmYWxzZVwiICk7XHJcblx0XHQvLyBJZiB3ZSdyZSBzd2l0Y2hpbmcgdGFicywgcmVtb3ZlIHRoZSBvbGQgdGFiIGZyb20gdGhlIHRhYiBvcmRlci5cclxuXHRcdC8vIElmIHdlJ3JlIG9wZW5pbmcgZnJvbSBjb2xsYXBzZWQgc3RhdGUsIHJlbW92ZSB0aGUgcHJldmlvdXMgdGFiIGZyb20gdGhlIHRhYiBvcmRlci5cclxuXHRcdC8vIElmIHdlJ3JlIGNvbGxhcHNpbmcsIHRoZW4ga2VlcCB0aGUgY29sbGFwc2luZyB0YWIgaW4gdGhlIHRhYiBvcmRlci5cclxuXHRcdGlmICggdG9TaG93Lmxlbmd0aCAmJiB0b0hpZGUubGVuZ3RoICkge1xyXG5cdFx0XHRldmVudERhdGEub2xkVGFiLmF0dHIoIFwidGFiSW5kZXhcIiwgLTEgKTtcclxuXHRcdH0gZWxzZSBpZiAoIHRvU2hvdy5sZW5ndGggKSB7XHJcblx0XHRcdHRoaXMudGFicy5maWx0ZXIoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0cmV0dXJuICQoIHRoaXMgKS5hdHRyKCBcInRhYkluZGV4XCIgKSA9PT0gMDtcclxuXHRcdFx0fSlcclxuXHRcdFx0LmF0dHIoIFwidGFiSW5kZXhcIiwgLTEgKTtcclxuXHRcdH1cclxuXHJcblx0XHR0b1Nob3cuYXR0cih7XHJcblx0XHRcdFwiYXJpYS1leHBhbmRlZFwiOiBcInRydWVcIixcclxuXHRcdFx0XCJhcmlhLWhpZGRlblwiOiBcImZhbHNlXCJcclxuXHRcdH0pO1xyXG5cdFx0ZXZlbnREYXRhLm5ld1RhYi5hdHRyKHtcclxuXHRcdFx0XCJhcmlhLXNlbGVjdGVkXCI6IFwidHJ1ZVwiLFxyXG5cdFx0XHR0YWJJbmRleDogMFxyXG5cdFx0fSk7XHJcblx0fSxcclxuXHJcblx0X2FjdGl2YXRlOiBmdW5jdGlvbiggaW5kZXggKSB7XHJcblx0XHR2YXIgYW5jaG9yLFxyXG5cdFx0XHRhY3RpdmUgPSB0aGlzLl9maW5kQWN0aXZlKCBpbmRleCApO1xyXG5cclxuXHRcdC8vIHRyeWluZyB0byBhY3RpdmF0ZSB0aGUgYWxyZWFkeSBhY3RpdmUgcGFuZWxcclxuXHRcdGlmICggYWN0aXZlWyAwIF0gPT09IHRoaXMuYWN0aXZlWyAwIF0gKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHQvLyB0cnlpbmcgdG8gY29sbGFwc2UsIHNpbXVsYXRlIGEgY2xpY2sgb24gdGhlIGN1cnJlbnQgYWN0aXZlIGhlYWRlclxyXG5cdFx0aWYgKCAhYWN0aXZlLmxlbmd0aCApIHtcclxuXHRcdFx0YWN0aXZlID0gdGhpcy5hY3RpdmU7XHJcblx0XHR9XHJcblxyXG5cdFx0YW5jaG9yID0gYWN0aXZlLmZpbmQoIFwiLnVpLXRhYnMtYW5jaG9yXCIgKVsgMCBdO1xyXG5cdFx0dGhpcy5fZXZlbnRIYW5kbGVyKHtcclxuXHRcdFx0dGFyZ2V0OiBhbmNob3IsXHJcblx0XHRcdGN1cnJlbnRUYXJnZXQ6IGFuY2hvcixcclxuXHRcdFx0cHJldmVudERlZmF1bHQ6ICQubm9vcFxyXG5cdFx0fSk7XHJcblx0fSxcclxuXHJcblx0X2ZpbmRBY3RpdmU6IGZ1bmN0aW9uKCBpbmRleCApIHtcclxuXHRcdHJldHVybiBpbmRleCA9PT0gZmFsc2UgPyAkKCkgOiB0aGlzLnRhYnMuZXEoIGluZGV4ICk7XHJcblx0fSxcclxuXHJcblx0X2dldEluZGV4OiBmdW5jdGlvbiggaW5kZXggKSB7XHJcblx0XHQvLyBtZXRhLWZ1bmN0aW9uIHRvIGdpdmUgdXNlcnMgb3B0aW9uIHRvIHByb3ZpZGUgYSBocmVmIHN0cmluZyBpbnN0ZWFkIG9mIGEgbnVtZXJpY2FsIGluZGV4LlxyXG5cdFx0aWYgKCB0eXBlb2YgaW5kZXggPT09IFwic3RyaW5nXCIgKSB7XHJcblx0XHRcdGluZGV4ID0gdGhpcy5hbmNob3JzLmluZGV4KCB0aGlzLmFuY2hvcnMuZmlsdGVyKCBcIltocmVmJD0nXCIgKyBpbmRleCArIFwiJ11cIiApICk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIGluZGV4O1xyXG5cdH0sXHJcblxyXG5cdF9kZXN0cm95OiBmdW5jdGlvbigpIHtcclxuXHRcdGlmICggdGhpcy54aHIgKSB7XHJcblx0XHRcdHRoaXMueGhyLmFib3J0KCk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKCBcInVpLXRhYnMgdWktd2lkZ2V0IHVpLXdpZGdldC1jb250ZW50IHVpLWNvcm5lci1hbGwgdWktdGFicy1jb2xsYXBzaWJsZVwiICk7XHJcblxyXG5cdFx0dGhpcy50YWJsaXN0XHJcblx0XHRcdC5yZW1vdmVDbGFzcyggXCJ1aS10YWJzLW5hdiB1aS1oZWxwZXItcmVzZXQgdWktaGVscGVyLWNsZWFyZml4IHVpLXdpZGdldC1oZWFkZXIgdWktY29ybmVyLWFsbFwiIClcclxuXHRcdFx0LnJlbW92ZUF0dHIoIFwicm9sZVwiICk7XHJcblxyXG5cdFx0dGhpcy5hbmNob3JzXHJcblx0XHRcdC5yZW1vdmVDbGFzcyggXCJ1aS10YWJzLWFuY2hvclwiIClcclxuXHRcdFx0LnJlbW92ZUF0dHIoIFwicm9sZVwiIClcclxuXHRcdFx0LnJlbW92ZUF0dHIoIFwidGFiSW5kZXhcIiApXHJcblx0XHRcdC5yZW1vdmVVbmlxdWVJZCgpO1xyXG5cclxuXHRcdHRoaXMudGFicy5hZGQoIHRoaXMucGFuZWxzICkuZWFjaChmdW5jdGlvbigpIHtcclxuXHRcdFx0aWYgKCAkLmRhdGEoIHRoaXMsIFwidWktdGFicy1kZXN0cm95XCIgKSApIHtcclxuXHRcdFx0XHQkKCB0aGlzICkucmVtb3ZlKCk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0JCggdGhpcyApXHJcblx0XHRcdFx0XHQucmVtb3ZlQ2xhc3MoIFwidWktc3RhdGUtZGVmYXVsdCB1aS1zdGF0ZS1hY3RpdmUgdWktc3RhdGUtZGlzYWJsZWQgXCIgK1xyXG5cdFx0XHRcdFx0XHRcInVpLWNvcm5lci10b3AgdWktY29ybmVyLWJvdHRvbSB1aS13aWRnZXQtY29udGVudCB1aS10YWJzLWFjdGl2ZSB1aS10YWJzLXBhbmVsXCIgKVxyXG5cdFx0XHRcdFx0LnJlbW92ZUF0dHIoIFwidGFiSW5kZXhcIiApXHJcblx0XHRcdFx0XHQucmVtb3ZlQXR0ciggXCJhcmlhLWxpdmVcIiApXHJcblx0XHRcdFx0XHQucmVtb3ZlQXR0ciggXCJhcmlhLWJ1c3lcIiApXHJcblx0XHRcdFx0XHQucmVtb3ZlQXR0ciggXCJhcmlhLXNlbGVjdGVkXCIgKVxyXG5cdFx0XHRcdFx0LnJlbW92ZUF0dHIoIFwiYXJpYS1sYWJlbGxlZGJ5XCIgKVxyXG5cdFx0XHRcdFx0LnJlbW92ZUF0dHIoIFwiYXJpYS1oaWRkZW5cIiApXHJcblx0XHRcdFx0XHQucmVtb3ZlQXR0ciggXCJhcmlhLWV4cGFuZGVkXCIgKVxyXG5cdFx0XHRcdFx0LnJlbW92ZUF0dHIoIFwicm9sZVwiICk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMudGFicy5lYWNoKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgbGkgPSAkKCB0aGlzICksXHJcblx0XHRcdFx0cHJldiA9IGxpLmRhdGEoIFwidWktdGFicy1hcmlhLWNvbnRyb2xzXCIgKTtcclxuXHRcdFx0aWYgKCBwcmV2ICkge1xyXG5cdFx0XHRcdGxpXHJcblx0XHRcdFx0XHQuYXR0ciggXCJhcmlhLWNvbnRyb2xzXCIsIHByZXYgKVxyXG5cdFx0XHRcdFx0LnJlbW92ZURhdGEoIFwidWktdGFicy1hcmlhLWNvbnRyb2xzXCIgKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRsaS5yZW1vdmVBdHRyKCBcImFyaWEtY29udHJvbHNcIiApO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLnBhbmVscy5zaG93KCk7XHJcblxyXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMuaGVpZ2h0U3R5bGUgIT09IFwiY29udGVudFwiICkge1xyXG5cdFx0XHR0aGlzLnBhbmVscy5jc3MoIFwiaGVpZ2h0XCIsIFwiXCIgKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRlbmFibGU6IGZ1bmN0aW9uKCBpbmRleCApIHtcclxuXHRcdHZhciBkaXNhYmxlZCA9IHRoaXMub3B0aW9ucy5kaXNhYmxlZDtcclxuXHRcdGlmICggZGlzYWJsZWQgPT09IGZhbHNlICkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBpbmRleCA9PT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRkaXNhYmxlZCA9IGZhbHNlO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0aW5kZXggPSB0aGlzLl9nZXRJbmRleCggaW5kZXggKTtcclxuXHRcdFx0aWYgKCAkLmlzQXJyYXkoIGRpc2FibGVkICkgKSB7XHJcblx0XHRcdFx0ZGlzYWJsZWQgPSAkLm1hcCggZGlzYWJsZWQsIGZ1bmN0aW9uKCBudW0gKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gbnVtICE9PSBpbmRleCA/IG51bSA6IG51bGw7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0ZGlzYWJsZWQgPSAkLm1hcCggdGhpcy50YWJzLCBmdW5jdGlvbiggbGksIG51bSApIHtcclxuXHRcdFx0XHRcdHJldHVybiBudW0gIT09IGluZGV4ID8gbnVtIDogbnVsbDtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0dGhpcy5fc2V0dXBEaXNhYmxlZCggZGlzYWJsZWQgKTtcclxuXHR9LFxyXG5cclxuXHRkaXNhYmxlOiBmdW5jdGlvbiggaW5kZXggKSB7XHJcblx0XHR2YXIgZGlzYWJsZWQgPSB0aGlzLm9wdGlvbnMuZGlzYWJsZWQ7XHJcblx0XHRpZiAoIGRpc2FibGVkID09PSB0cnVlICkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBpbmRleCA9PT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRkaXNhYmxlZCA9IHRydWU7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRpbmRleCA9IHRoaXMuX2dldEluZGV4KCBpbmRleCApO1xyXG5cdFx0XHRpZiAoICQuaW5BcnJheSggaW5kZXgsIGRpc2FibGVkICkgIT09IC0xICkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoICQuaXNBcnJheSggZGlzYWJsZWQgKSApIHtcclxuXHRcdFx0XHRkaXNhYmxlZCA9ICQubWVyZ2UoIFsgaW5kZXggXSwgZGlzYWJsZWQgKS5zb3J0KCk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0ZGlzYWJsZWQgPSBbIGluZGV4IF07XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHRoaXMuX3NldHVwRGlzYWJsZWQoIGRpc2FibGVkICk7XHJcblx0fSxcclxuXHJcblx0bG9hZDogZnVuY3Rpb24oIGluZGV4LCBldmVudCApIHtcclxuXHRcdGluZGV4ID0gdGhpcy5fZ2V0SW5kZXgoIGluZGV4ICk7XHJcblx0XHR2YXIgdGhhdCA9IHRoaXMsXHJcblx0XHRcdHRhYiA9IHRoaXMudGFicy5lcSggaW5kZXggKSxcclxuXHRcdFx0YW5jaG9yID0gdGFiLmZpbmQoIFwiLnVpLXRhYnMtYW5jaG9yXCIgKSxcclxuXHRcdFx0cGFuZWwgPSB0aGlzLl9nZXRQYW5lbEZvclRhYiggdGFiICksXHJcblx0XHRcdGV2ZW50RGF0YSA9IHtcclxuXHRcdFx0XHR0YWI6IHRhYixcclxuXHRcdFx0XHRwYW5lbDogcGFuZWxcclxuXHRcdFx0fTtcclxuXHJcblx0XHQvLyBub3QgcmVtb3RlXHJcblx0XHRpZiAoIGlzTG9jYWwoIGFuY2hvclsgMCBdICkgKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLnhociA9ICQuYWpheCggdGhpcy5fYWpheFNldHRpbmdzKCBhbmNob3IsIGV2ZW50LCBldmVudERhdGEgKSApO1xyXG5cclxuXHRcdC8vIHN1cHBvcnQ6IGpRdWVyeSA8MS44XHJcblx0XHQvLyBqUXVlcnkgPDEuOCByZXR1cm5zIGZhbHNlIGlmIHRoZSByZXF1ZXN0IGlzIGNhbmNlbGVkIGluIGJlZm9yZVNlbmQsXHJcblx0XHQvLyBidXQgYXMgb2YgMS44LCAkLmFqYXgoKSBhbHdheXMgcmV0dXJucyBhIGpxWEhSIG9iamVjdC5cclxuXHRcdGlmICggdGhpcy54aHIgJiYgdGhpcy54aHIuc3RhdHVzVGV4dCAhPT0gXCJjYW5jZWxlZFwiICkge1xyXG5cdFx0XHR0YWIuYWRkQ2xhc3MoIFwidWktdGFicy1sb2FkaW5nXCIgKTtcclxuXHRcdFx0cGFuZWwuYXR0ciggXCJhcmlhLWJ1c3lcIiwgXCJ0cnVlXCIgKTtcclxuXHJcblx0XHRcdHRoaXMueGhyXHJcblx0XHRcdFx0LnN1Y2Nlc3MoZnVuY3Rpb24oIHJlc3BvbnNlICkge1xyXG5cdFx0XHRcdFx0Ly8gc3VwcG9ydDogalF1ZXJ5IDwxLjhcclxuXHRcdFx0XHRcdC8vIGh0dHA6Ly9idWdzLmpxdWVyeS5jb20vdGlja2V0LzExNzc4XHJcblx0XHRcdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0XHRwYW5lbC5odG1sKCByZXNwb25zZSApO1xyXG5cdFx0XHRcdFx0XHR0aGF0Ll90cmlnZ2VyKCBcImxvYWRcIiwgZXZlbnQsIGV2ZW50RGF0YSApO1xyXG5cdFx0XHRcdFx0fSwgMSApO1xyXG5cdFx0XHRcdH0pXHJcblx0XHRcdFx0LmNvbXBsZXRlKGZ1bmN0aW9uKCBqcVhIUiwgc3RhdHVzICkge1xyXG5cdFx0XHRcdFx0Ly8gc3VwcG9ydDogalF1ZXJ5IDwxLjhcclxuXHRcdFx0XHRcdC8vIGh0dHA6Ly9idWdzLmpxdWVyeS5jb20vdGlja2V0LzExNzc4XHJcblx0XHRcdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0XHRpZiAoIHN0YXR1cyA9PT0gXCJhYm9ydFwiICkge1xyXG5cdFx0XHRcdFx0XHRcdHRoYXQucGFuZWxzLnN0b3AoIGZhbHNlLCB0cnVlICk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRcdHRhYi5yZW1vdmVDbGFzcyggXCJ1aS10YWJzLWxvYWRpbmdcIiApO1xyXG5cdFx0XHRcdFx0XHRwYW5lbC5yZW1vdmVBdHRyKCBcImFyaWEtYnVzeVwiICk7XHJcblxyXG5cdFx0XHRcdFx0XHRpZiAoIGpxWEhSID09PSB0aGF0LnhociApIHtcclxuXHRcdFx0XHRcdFx0XHRkZWxldGUgdGhhdC54aHI7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH0sIDEgKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfYWpheFNldHRpbmdzOiBmdW5jdGlvbiggYW5jaG9yLCBldmVudCwgZXZlbnREYXRhICkge1xyXG5cdFx0dmFyIHRoYXQgPSB0aGlzO1xyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0dXJsOiBhbmNob3IuYXR0ciggXCJocmVmXCIgKSxcclxuXHRcdFx0YmVmb3JlU2VuZDogZnVuY3Rpb24oIGpxWEhSLCBzZXR0aW5ncyApIHtcclxuXHRcdFx0XHRyZXR1cm4gdGhhdC5fdHJpZ2dlciggXCJiZWZvcmVMb2FkXCIsIGV2ZW50LFxyXG5cdFx0XHRcdFx0JC5leHRlbmQoIHsganFYSFIgOiBqcVhIUiwgYWpheFNldHRpbmdzOiBzZXR0aW5ncyB9LCBldmVudERhdGEgKSApO1xyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cdH0sXHJcblxyXG5cdF9nZXRQYW5lbEZvclRhYjogZnVuY3Rpb24oIHRhYiApIHtcclxuXHRcdHZhciBpZCA9ICQoIHRhYiApLmF0dHIoIFwiYXJpYS1jb250cm9sc1wiICk7XHJcblx0XHRyZXR1cm4gdGhpcy5lbGVtZW50LmZpbmQoIHRoaXMuX3Nhbml0aXplU2VsZWN0b3IoIFwiI1wiICsgaWQgKSApO1xyXG5cdH1cclxufSk7XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbihmdW5jdGlvbiggJCwgd2luZG93ICkge1xyXG5cclxuXHQkLm1vYmlsZS5pb3NvcmllbnRhdGlvbmZpeEVuYWJsZWQgPSB0cnVlO1xyXG5cclxuXHQvLyBUaGlzIGZpeCBhZGRyZXNzZXMgYW4gaU9TIGJ1Zywgc28gcmV0dXJuIGVhcmx5IGlmIHRoZSBVQSBjbGFpbXMgaXQncyBzb21ldGhpbmcgZWxzZS5cclxuXHR2YXIgdWEgPSBuYXZpZ2F0b3IudXNlckFnZW50LFxyXG5cdFx0em9vbSxcclxuXHRcdGV2dCwgeCwgeSwgeiwgYWlnO1xyXG5cdGlmICggISggL2lQaG9uZXxpUGFkfGlQb2QvLnRlc3QoIG5hdmlnYXRvci5wbGF0Zm9ybSApICYmIC9PUyBbMS01XV9bMC05X10qIGxpa2UgTWFjIE9TIFgvaS50ZXN0KCB1YSApICYmIHVhLmluZGV4T2YoIFwiQXBwbGVXZWJLaXRcIiApID4gLTEgKSApIHtcclxuXHRcdCQubW9iaWxlLmlvc29yaWVudGF0aW9uZml4RW5hYmxlZCA9IGZhbHNlO1xyXG5cdFx0cmV0dXJuO1xyXG5cdH1cclxuXHJcblx0em9vbSA9ICQubW9iaWxlLnpvb207XHJcblxyXG5cdGZ1bmN0aW9uIGNoZWNrVGlsdCggZSApIHtcclxuXHRcdGV2dCA9IGUub3JpZ2luYWxFdmVudDtcclxuXHRcdGFpZyA9IGV2dC5hY2NlbGVyYXRpb25JbmNsdWRpbmdHcmF2aXR5O1xyXG5cclxuXHRcdHggPSBNYXRoLmFicyggYWlnLnggKTtcclxuXHRcdHkgPSBNYXRoLmFicyggYWlnLnkgKTtcclxuXHRcdHogPSBNYXRoLmFicyggYWlnLnogKTtcclxuXHJcblx0XHQvLyBJZiBwb3J0cmFpdCBvcmllbnRhdGlvbiBhbmQgaW4gb25lIG9mIHRoZSBkYW5nZXIgem9uZXNcclxuXHRcdGlmICggIXdpbmRvdy5vcmllbnRhdGlvbiAmJiAoIHggPiA3IHx8ICggKCB6ID4gNiAmJiB5IDwgOCB8fCB6IDwgOCAmJiB5ID4gNiApICYmIHggPiA1ICkgKSApIHtcclxuXHRcdFx0XHRpZiAoIHpvb20uZW5hYmxlZCApIHtcclxuXHRcdFx0XHRcdHpvb20uZGlzYWJsZSgpO1xyXG5cdFx0XHRcdH1cclxuXHRcdH1cdGVsc2UgaWYgKCAhem9vbS5lbmFibGVkICkge1xyXG5cdFx0XHRcdHpvb20uZW5hYmxlKCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQkLm1vYmlsZS5kb2N1bWVudC5vbiggXCJtb2JpbGVpbml0XCIsIGZ1bmN0aW9uKCkge1xyXG5cdFx0aWYgKCAkLm1vYmlsZS5pb3NvcmllbnRhdGlvbmZpeEVuYWJsZWQgKSB7XHJcblx0XHRcdCQubW9iaWxlLndpbmRvd1xyXG5cdFx0XHRcdC5iaW5kKCBcIm9yaWVudGF0aW9uY2hhbmdlLmlvc29yaWVudGF0aW9uZml4XCIsIHpvb20uZW5hYmxlIClcclxuXHRcdFx0XHQuYmluZCggXCJkZXZpY2Vtb3Rpb24uaW9zb3JpZW50YXRpb25maXhcIiwgY2hlY2tUaWx0ICk7XHJcblx0XHR9XHJcblx0fSk7XHJcblxyXG59KCBqUXVlcnksIHRoaXMgKSk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHdpbmRvdywgdW5kZWZpbmVkICkge1xyXG5cdHZhclx0JGh0bWwgPSAkKCBcImh0bWxcIiApLFxyXG5cdFx0JHdpbmRvdyA9ICQubW9iaWxlLndpbmRvdztcclxuXHJcblx0Ly9yZW1vdmUgaW5pdGlhbCBidWlsZCBjbGFzcyAob25seSBwcmVzZW50IG9uIGZpcnN0IHBhZ2VzaG93KVxyXG5cdGZ1bmN0aW9uIGhpZGVSZW5kZXJpbmdDbGFzcygpIHtcclxuXHRcdCRodG1sLnJlbW92ZUNsYXNzKCBcInVpLW1vYmlsZS1yZW5kZXJpbmdcIiApO1xyXG5cdH1cclxuXHJcblx0Ly8gdHJpZ2dlciBtb2JpbGVpbml0IGV2ZW50IC0gdXNlZnVsIGhvb2sgZm9yIGNvbmZpZ3VyaW5nICQubW9iaWxlIHNldHRpbmdzIGJlZm9yZSB0aGV5J3JlIHVzZWRcclxuXHQkKCB3aW5kb3cuZG9jdW1lbnQgKS50cmlnZ2VyKCBcIm1vYmlsZWluaXRcIiApO1xyXG5cclxuXHQvLyBzdXBwb3J0IGNvbmRpdGlvbnNcclxuXHQvLyBpZiBkZXZpY2Ugc3VwcG9ydCBjb25kaXRpb24ocykgYXJlbid0IG1ldCwgbGVhdmUgdGhpbmdzIGFzIHRoZXkgYXJlIC0+IGEgYmFzaWMsIHVzYWJsZSBleHBlcmllbmNlLFxyXG5cdC8vIG90aGVyd2lzZSwgcHJvY2VlZCB3aXRoIHRoZSBlbmhhbmNlbWVudHNcclxuXHRpZiAoICEkLm1vYmlsZS5ncmFkZUEoKSApIHtcclxuXHRcdHJldHVybjtcclxuXHR9XHJcblxyXG5cdC8vIG92ZXJyaWRlIGFqYXhFbmFibGVkIG9uIHBsYXRmb3JtcyB0aGF0IGhhdmUga25vd24gY29uZmxpY3RzIHdpdGggaGFzaCBoaXN0b3J5IHVwZGF0ZXNcclxuXHQvLyBvciBnZW5lcmFsbHkgd29yayBiZXR0ZXIgYnJvd3NpbmcgaW4gcmVndWxhciBodHRwIGZvciBmdWxsIHBhZ2UgcmVmcmVzaGVzIChCQjUsIE9wZXJhIE1pbmkpXHJcblx0aWYgKCAkLm1vYmlsZS5hamF4QmxhY2tsaXN0ICkge1xyXG5cdFx0JC5tb2JpbGUuYWpheEVuYWJsZWQgPSBmYWxzZTtcclxuXHR9XHJcblxyXG5cdC8vIEFkZCBtb2JpbGUsIGluaXRpYWwgbG9hZCBcInJlbmRlcmluZ1wiIGNsYXNzZXMgdG8gZG9jRWxcclxuXHQkaHRtbC5hZGRDbGFzcyggXCJ1aS1tb2JpbGUgdWktbW9iaWxlLXJlbmRlcmluZ1wiICk7XHJcblxyXG5cdC8vIFRoaXMgaXMgYSBmYWxsYmFjay4gSWYgYW55dGhpbmcgZ29lcyB3cm9uZyAoSlMgZXJyb3JzLCBldGMpLCBvciBldmVudHMgZG9uJ3QgZmlyZSxcclxuXHQvLyB0aGlzIGVuc3VyZXMgdGhlIHJlbmRlcmluZyBjbGFzcyBpcyByZW1vdmVkIGFmdGVyIDUgc2Vjb25kcywgc28gY29udGVudCBpcyB2aXNpYmxlIGFuZCBhY2Nlc3NpYmxlXHJcblx0c2V0VGltZW91dCggaGlkZVJlbmRlcmluZ0NsYXNzLCA1MDAwICk7XHJcblxyXG5cdCQuZXh0ZW5kKCAkLm1vYmlsZSwge1xyXG5cdFx0Ly8gZmluZCBhbmQgZW5oYW5jZSB0aGUgcGFnZXMgaW4gdGhlIGRvbSBhbmQgdHJhbnNpdGlvbiB0byB0aGUgZmlyc3QgcGFnZS5cclxuXHRcdGluaXRpYWxpemVQYWdlOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0Ly8gZmluZCBwcmVzZW50IHBhZ2VzXHJcblx0XHRcdHZhciBwYXRoID0gJC5tb2JpbGUucGF0aCxcclxuXHRcdFx0XHQkcGFnZXMgPSAkKCBcIjpqcW1EYXRhKHJvbGU9J3BhZ2UnKSwgOmpxbURhdGEocm9sZT0nZGlhbG9nJylcIiApLFxyXG5cdFx0XHRcdGhhc2ggPSBwYXRoLnN0cmlwSGFzaCggcGF0aC5zdHJpcFF1ZXJ5UGFyYW1zKHBhdGgucGFyc2VMb2NhdGlvbigpLmhhc2gpICksXHJcblx0XHRcdFx0dGhlTG9jYXRpb24gPSAkLm1vYmlsZS5wYXRoLnBhcnNlTG9jYXRpb24oKSxcclxuXHRcdFx0XHRoYXNoUGFnZSA9IGhhc2ggPyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggaGFzaCApIDogdW5kZWZpbmVkO1xyXG5cclxuXHRcdFx0Ly8gaWYgbm8gcGFnZXMgYXJlIGZvdW5kLCBjcmVhdGUgb25lIHdpdGggYm9keSdzIGlubmVyIGh0bWxcclxuXHRcdFx0aWYgKCAhJHBhZ2VzLmxlbmd0aCApIHtcclxuXHRcdFx0XHQkcGFnZXMgPSAkKCBcImJvZHlcIiApLndyYXBJbm5lciggXCI8ZGl2IGRhdGEtXCIgKyAkLm1vYmlsZS5ucyArIFwicm9sZT0ncGFnZSc+PC9kaXY+XCIgKS5jaGlsZHJlbiggMCApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBhZGQgZGlhbG9ncywgc2V0IGRhdGEtdXJsIGF0dHJzXHJcblx0XHRcdCRwYWdlcy5lYWNoKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHZhciAkdGhpcyA9ICQoIHRoaXMgKTtcclxuXHJcblx0XHRcdFx0Ly8gdW5sZXNzIHRoZSBkYXRhIHVybCBpcyBhbHJlYWR5IHNldCBzZXQgaXQgdG8gdGhlIHBhdGhuYW1lXHJcblx0XHRcdFx0aWYgKCAhJHRoaXNbIDAgXS5nZXRBdHRyaWJ1dGUoIFwiZGF0YS1cIiArICQubW9iaWxlLm5zICsgXCJ1cmxcIiApICkge1xyXG5cdFx0XHRcdFx0JHRoaXMuYXR0ciggXCJkYXRhLVwiICsgJC5tb2JpbGUubnMgKyBcInVybFwiLCAkdGhpcy5hdHRyKCBcImlkXCIgKSB8fFxyXG5cdFx0XHRcdFx0XHRwYXRoLmNvbnZlcnRVcmxUb0RhdGFVcmwoIHRoZUxvY2F0aW9uLnBhdGhuYW1lICsgdGhlTG9jYXRpb24uc2VhcmNoICkgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0Ly8gZGVmaW5lIGZpcnN0IHBhZ2UgaW4gZG9tIGNhc2Ugb25lIGJhY2tzIG91dCB0byB0aGUgZGlyZWN0b3J5IHJvb3QgKG5vdCBhbHdheXMgdGhlIGZpcnN0IHBhZ2UgdmlzaXRlZCwgYnV0IGRlZmluZWQgYXMgZmFsbGJhY2spXHJcblx0XHRcdCQubW9iaWxlLmZpcnN0UGFnZSA9ICRwYWdlcy5maXJzdCgpO1xyXG5cclxuXHRcdFx0Ly8gZGVmaW5lIHBhZ2UgY29udGFpbmVyXHJcblx0XHRcdCQubW9iaWxlLnBhZ2VDb250YWluZXIgPSAkLm1vYmlsZS5maXJzdFBhZ2VcclxuXHRcdFx0XHQucGFyZW50KClcclxuXHRcdFx0XHQuYWRkQ2xhc3MoIFwidWktbW9iaWxlLXZpZXdwb3J0XCIgKVxyXG5cdFx0XHRcdC5wYWdlY29udGFpbmVyKCk7XHJcblxyXG5cdFx0XHQvLyBpbml0aWFsaXplIG5hdmlnYXRpb24gZXZlbnRzIG5vdywgYWZ0ZXIgbW9iaWxlaW5pdCBoYXMgb2NjdXJyZWQgYW5kIHRoZSBwYWdlIGNvbnRhaW5lclxyXG5cdFx0XHQvLyBoYXMgYmVlbiBjcmVhdGVkIGJ1dCBiZWZvcmUgdGhlIHJlc3Qgb2YgdGhlIGxpYnJhcnkgaXMgYWxlcnRlZCB0byB0aGF0IGZhY3RcclxuXHRcdFx0JC5tb2JpbGUubmF2cmVhZHlEZWZlcnJlZC5yZXNvbHZlKCk7XHJcblxyXG5cdFx0XHQvLyBhbGVydCBsaXN0ZW5lcnMgdGhhdCB0aGUgcGFnZWNvbnRhaW5lciBoYXMgYmVlbiBkZXRlcm1pbmVkIGZvciBiaW5kaW5nXHJcblx0XHRcdC8vIHRvIGV2ZW50cyB0cmlnZ2VyZWQgb24gaXRcclxuXHRcdFx0JHdpbmRvdy50cmlnZ2VyKCBcInBhZ2Vjb250YWluZXJjcmVhdGVcIiApO1xyXG5cclxuXHRcdFx0Ly8gY3VlIHBhZ2UgbG9hZGluZyBtZXNzYWdlXHJcblx0XHRcdCQubW9iaWxlLmxvYWRpbmcoIFwic2hvd1wiICk7XHJcblxyXG5cdFx0XHQvL3JlbW92ZSBpbml0aWFsIGJ1aWxkIGNsYXNzIChvbmx5IHByZXNlbnQgb24gZmlyc3QgcGFnZXNob3cpXHJcblx0XHRcdGhpZGVSZW5kZXJpbmdDbGFzcygpO1xyXG5cclxuXHRcdFx0Ly8gaWYgaGFzaGNoYW5nZSBsaXN0ZW5pbmcgaXMgZGlzYWJsZWQsIHRoZXJlJ3Mgbm8gaGFzaCBkZWVwbGluayxcclxuXHRcdFx0Ly8gdGhlIGhhc2ggaXMgbm90IHZhbGlkIChjb250YWlucyBtb3JlIHRoYW4gb25lICMgb3IgZG9lcyBub3Qgc3RhcnQgd2l0aCAjKVxyXG5cdFx0XHQvLyBvciB0aGVyZSBpcyBubyBwYWdlIHdpdGggdGhhdCBoYXNoLCBjaGFuZ2UgdG8gdGhlIGZpcnN0IHBhZ2UgaW4gdGhlIERPTVxyXG5cdFx0XHQvLyBSZW1lbWJlciwgaG93ZXZlciwgdGhhdCB0aGUgaGFzaCBjYW4gYWxzbyBiZSBhIHBhdGghXHJcblx0XHRcdGlmICggISAoICQubW9iaWxlLmhhc2hMaXN0ZW5pbmdFbmFibGVkICYmXHJcblx0XHRcdFx0JC5tb2JpbGUucGF0aC5pc0hhc2hWYWxpZCggbG9jYXRpb24uaGFzaCApICYmXHJcblx0XHRcdFx0KCAkKCBoYXNoUGFnZSApLmlzKCBcIjpqcW1EYXRhKHJvbGU9J3BhZ2UnKVwiICkgfHxcclxuXHRcdFx0XHRcdCQubW9iaWxlLnBhdGguaXNQYXRoKCBoYXNoICkgfHxcclxuXHRcdFx0XHRcdGhhc2ggPT09ICQubW9iaWxlLmRpYWxvZ0hhc2hLZXkgKSApICkge1xyXG5cclxuXHRcdFx0XHQvLyBtYWtlIHN1cmUgdG8gc2V0IGluaXRpYWwgcG9wc3RhdGUgc3RhdGUgaWYgaXQgZXhpc3RzXHJcblx0XHRcdFx0Ly8gc28gdGhhdCBuYXZpZ2F0aW9uIGJhY2sgdG8gdGhlIGluaXRpYWwgcGFnZSB3b3JrcyBwcm9wZXJseVxyXG5cdFx0XHRcdGlmICggJC5ldmVudC5zcGVjaWFsLm5hdmlnYXRlLmlzUHVzaFN0YXRlRW5hYmxlZCgpICkge1xyXG5cdFx0XHRcdFx0JC5tb2JpbGUubmF2aWdhdGUubmF2aWdhdG9yLnNxdWFzaCggcGF0aC5wYXJzZUxvY2F0aW9uKCkuaHJlZiApO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0JC5tb2JpbGUuY2hhbmdlUGFnZSggJC5tb2JpbGUuZmlyc3RQYWdlLCB7XHJcblx0XHRcdFx0XHR0cmFuc2l0aW9uOiBcIm5vbmVcIixcclxuXHRcdFx0XHRcdHJldmVyc2U6IHRydWUsXHJcblx0XHRcdFx0XHRjaGFuZ2VIYXNoOiBmYWxzZSxcclxuXHRcdFx0XHRcdGZyb21IYXNoQ2hhbmdlOiB0cnVlXHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0Ly8gdHJpZ2dlciBoYXNoY2hhbmdlIG9yIG5hdmlnYXRlIHRvIHNxdWFzaCBhbmQgcmVjb3JkIHRoZSBjb3JyZWN0XHJcblx0XHRcdFx0Ly8gaGlzdG9yeSBlbnRyeSBmb3IgYW4gaW5pdGlhbCBoYXNoIHBhdGhcclxuXHRcdFx0XHRpZiAoICEkLmV2ZW50LnNwZWNpYWwubmF2aWdhdGUuaXNQdXNoU3RhdGVFbmFibGVkKCkgKSB7XHJcblx0XHRcdFx0XHQkd2luZG93LnRyaWdnZXIoIFwiaGFzaGNoYW5nZVwiLCBbdHJ1ZV0gKTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0Ly8gVE9ETyBmaWd1cmUgb3V0IGhvdyB0byBzaW1wbGlmeSB0aGlzIGludGVyYWN0aW9uIHdpdGggdGhlIGluaXRpYWwgaGlzdG9yeSBlbnRyeVxyXG5cdFx0XHRcdFx0Ly8gYXQgdGhlIGJvdHRvbSBqcy9uYXZpZ2F0ZS9uYXZpZ2F0ZS5qc1xyXG5cdFx0XHRcdFx0JC5tb2JpbGUubmF2aWdhdGUuaGlzdG9yeS5zdGFjayA9IFtdO1xyXG5cdFx0XHRcdFx0JC5tb2JpbGUubmF2aWdhdGUoICQubW9iaWxlLnBhdGguaXNQYXRoKCBsb2NhdGlvbi5oYXNoICkgPyBsb2NhdGlvbi5oYXNoIDogbG9jYXRpb24uaHJlZiApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH0pO1xyXG5cclxuXHQkKGZ1bmN0aW9uKCkge1xyXG5cdFx0Ly9SdW4gaW5saW5lU1ZHIHN1cHBvcnQgdGVzdFxyXG5cdFx0JC5zdXBwb3J0LmlubGluZVNWRygpO1xyXG5cclxuXHRcdC8vIGNoZWNrIHdoaWNoIHNjcm9sbFRvcCB2YWx1ZSBzaG91bGQgYmUgdXNlZCBieSBzY3JvbGxpbmcgdG8gMSBpbW1lZGlhdGVseSBhdCBkb21yZWFkeVxyXG5cdFx0Ly8gdGhlbiBjaGVjayB3aGF0IHRoZSBzY3JvbGwgdG9wIGlzLiBBbmRyb2lkIHdpbGwgcmVwb3J0IDAuLi4gb3RoZXJzIDFcclxuXHRcdC8vIG5vdGUgdGhhdCB0aGlzIGluaXRpYWwgc2Nyb2xsIHdvbid0IGhpZGUgdGhlIGFkZHJlc3MgYmFyLiBJdCdzIGp1c3QgZm9yIHRoZSBjaGVjay5cclxuXHJcblx0XHQvLyBoaWRlIGlPUyBicm93c2VyIGNocm9tZSBvbiBsb2FkIGlmIGhpZGVVcmxCYXIgaXMgdHJ1ZSB0aGlzIGlzIHRvIHRyeSBhbmQgZG8gaXQgYXMgc29vbiBhcyBwb3NzaWJsZVxyXG5cdFx0aWYgKCAkLm1vYmlsZS5oaWRlVXJsQmFyICkge1xyXG5cdFx0XHR3aW5kb3cuc2Nyb2xsVG8oIDAsIDEgKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBpZiBkZWZhdWx0SG9tZVNjcm9sbCBoYXNuJ3QgYmVlbiBzZXQgeWV0LCBzZWUgaWYgc2Nyb2xsVG9wIGlzIDFcclxuXHRcdC8vIGl0IHNob3VsZCBiZSAxIGluIG1vc3QgYnJvd3NlcnMsIGJ1dCBhbmRyb2lkIHRyZWF0cyAxIGFzIDAgKGZvciBoaWRpbmcgYWRkciBiYXIpXHJcblx0XHQvLyBzbyBpZiBpdCdzIDEsIHVzZSAwIGZyb20gbm93IG9uXHJcblx0XHQkLm1vYmlsZS5kZWZhdWx0SG9tZVNjcm9sbCA9ICggISQuc3VwcG9ydC5zY3JvbGxUb3AgfHwgJC5tb2JpbGUud2luZG93LnNjcm9sbFRvcCgpID09PSAxICkgPyAwIDogMTtcclxuXHJcblx0XHQvL2RvbS1yZWFkeSBpbml0c1xyXG5cdFx0aWYgKCAkLm1vYmlsZS5hdXRvSW5pdGlhbGl6ZVBhZ2UgKSB7XHJcblx0XHRcdCQubW9iaWxlLmluaXRpYWxpemVQYWdlKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gd2luZG93IGxvYWQgZXZlbnRcclxuXHRcdC8vIGhpZGUgaU9TIGJyb3dzZXIgY2hyb21lIG9uIGxvYWQgaWYgaGlkZVVybEJhciBpcyB0cnVlIHRoaXMgaXMgYXMgZmFsbCBiYWNrIGluY2FzZSB3ZSB3ZXJlIHRvbyBlYXJseSBiZWZvcmVcclxuXHRcdGlmICggJC5tb2JpbGUuaGlkZVVybEJhciApIHtcclxuXHRcdFx0JHdpbmRvdy5sb2FkKCAkLm1vYmlsZS5zaWxlbnRTY3JvbGwgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoICEkLnN1cHBvcnQuY3NzUG9pbnRlckV2ZW50cyApIHtcclxuXHRcdFx0Ly8gSUUgYW5kIE9wZXJhIGRvbid0IHN1cHBvcnQgQ1NTIHBvaW50ZXItZXZlbnRzOiBub25lIHRoYXQgd2UgdXNlIHRvIGRpc2FibGUgbGluay1iYXNlZCBidXR0b25zXHJcblx0XHRcdC8vIGJ5IGFkZGluZyB0aGUgJ3VpLWRpc2FibGVkJyBjbGFzcyB0byB0aGVtLiBVc2luZyBhIEphdmFTY3JpcHQgd29ya2Fyb3VuZCBmb3IgdGhvc2UgYnJvd3Nlci5cclxuXHRcdFx0Ly8gaHR0cHM6Ly9naXRodWIuY29tL2pxdWVyeS9qcXVlcnktbW9iaWxlL2lzc3Vlcy8zNTU4XHJcblxyXG5cdFx0XHQvLyBERVBSRUNBVEVEIGFzIG9mIDEuNC4wIC0gcmVtb3ZlIHVpLWRpc2FibGVkIGFmdGVyIDEuNC4wIHJlbGVhc2VcclxuXHRcdFx0Ly8gb25seSB1aS1zdGF0ZS1kaXNhYmxlZCBzaG91bGQgYmUgcHJlc2VudCB0aGVyZWFmdGVyXHJcblx0XHRcdCQubW9iaWxlLmRvY3VtZW50LmRlbGVnYXRlKCBcIi51aS1zdGF0ZS1kaXNhYmxlZCwudWktZGlzYWJsZWRcIiwgXCJ2Y2xpY2tcIixcclxuXHRcdFx0XHRmdW5jdGlvbiggZSApIHtcclxuXHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHQpO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG59KCBqUXVlcnksIHRoaXMgKSk7XHJcblxyXG5cclxufSkpO1xyXG5cbn0uY2FsbCh3aW5kb3cpKTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3RlbXAvZXh0ZXJuYWwvanF1ZXJ5L3NjcmlwdHMvanF1ZXJ5Lm1vYmlsZS5qc1xuLy8gbW9kdWxlIGlkID0gMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKioqIElNUE9SVFMgRlJPTSBpbXBvcnRzLWxvYWRlciAqKiovXG4oZnVuY3Rpb24oKSB7XG5cbi8qIVxyXG4gKiBqUXVlcnkgTWlncmF0ZSAtIHYzLjAuMS1ob3RmaXggLSAyMDE3LTAxLTExXHJcbiAqIENvcHlyaWdodCBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzXHJcbiAqL1xyXG47KCBmdW5jdGlvbiggZmFjdG9yeSApIHtcclxuXHRpZiAoIHR5cGVvZiBkZWZpbmUgPT09IFwiZnVuY3Rpb25cIiAmJiBkZWZpbmUuYW1kICkge1xyXG5cclxuXHRcdC8vIEFNRC4gUmVnaXN0ZXIgYXMgYW4gYW5vbnltb3VzIG1vZHVsZS5cclxuXHRcdGRlZmluZSggWyBcImpxdWVyeVwiIF0sIGZ1bmN0aW9uICgkKSB7XHJcblx0XHRcdHJldHVybiBmYWN0b3J5KCQsIHdpbmRvdyk7XHJcblx0XHR9KTtcclxuXHR9IGVsc2UgaWYgKCB0eXBlb2YgbW9kdWxlID09PSBcIm9iamVjdFwiICYmIG1vZHVsZS5leHBvcnRzICkge1xyXG5cclxuXHRcdC8vIE5vZGUvQ29tbW9uSlNcclxuXHRcdC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZlxyXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCByZXF1aXJlKCBcImpxdWVyeVwiICksIHdpbmRvdyApO1xyXG5cdH0gZWxzZSB7XHJcblxyXG5cdFx0Ly8gQnJvd3NlciBnbG9iYWxzXHJcblx0XHRmYWN0b3J5KCBqUXVlcnksIHdpbmRvdyApO1xyXG5cdH1cclxufSApKCBmdW5jdGlvbiggalF1ZXJ5LCB3aW5kb3cgKSB7XHJcblwidXNlIHN0cmljdFwiO1xyXG5cclxuXHJcbmpRdWVyeS5taWdyYXRlVmVyc2lvbiA9IFwiMy4wLjEtcHJlXCI7IC8vIHdpdGggaG90Zml4XHJcblxyXG4vKiBleHBvcnRlZCBtaWdyYXRlV2FybiwgbWlncmF0ZVdhcm5GdW5jLCBtaWdyYXRlV2FyblByb3AgKi9cclxuXHJcbiggZnVuY3Rpb24oKSB7XHJcblxyXG5cdC8vIFN1cHBvcnQ6IElFOSBvbmx5XHJcblx0Ly8gSUU5IG9ubHkgY3JlYXRlcyBjb25zb2xlIG9iamVjdCB3aGVuIGRldiB0b29scyBhcmUgZmlyc3Qgb3BlbmVkXHJcblx0Ly8gQWxzbywgYXZvaWQgRnVuY3Rpb24jYmluZCBoZXJlIHRvIHNpbXBsaWZ5IFBoYW50b21KUyB1c2FnZVxyXG5cdHZhciBsb2cgPSB3aW5kb3cuY29uc29sZSAmJiB3aW5kb3cuY29uc29sZS5sb2cgJiZcclxuXHRcdGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR3aW5kb3cuY29uc29sZS5sb2cuYXBwbHkoIHdpbmRvdy5jb25zb2xlLCBhcmd1bWVudHMgKTtcclxuXHRcdH0sXHJcblx0XHRyYmFkVmVyc2lvbnMgPSAvXlsxMl1cXC4vO1xyXG5cclxuXHRpZiAoICFsb2cgKSB7XHJcblx0XHRyZXR1cm47XHJcblx0fVxyXG5cclxuXHQvLyBOZWVkIGpRdWVyeSAzLjAuMCsgYW5kIG5vIG9sZGVyIE1pZ3JhdGUgbG9hZGVkXHJcblx0aWYgKCAhalF1ZXJ5IHx8IHJiYWRWZXJzaW9ucy50ZXN0KCBqUXVlcnkuZm4uanF1ZXJ5ICkgKSB7XHJcblx0XHRsb2coIFwiSlFNSUdSQVRFOiBqUXVlcnkgMy4wLjArIFJFUVVJUkVEXCIgKTtcclxuXHR9XHJcblx0aWYgKCBqUXVlcnkubWlncmF0ZVdhcm5pbmdzICkge1xyXG5cdFx0bG9nKCBcIkpRTUlHUkFURTogTWlncmF0ZSBwbHVnaW4gbG9hZGVkIG11bHRpcGxlIHRpbWVzXCIgKTtcclxuXHR9XHJcblxyXG5cdC8vIFNob3cgYSBtZXNzYWdlIG9uIHRoZSBjb25zb2xlIHNvIGRldnMga25vdyB3ZSdyZSBhY3RpdmVcclxuXHRpZiAoICFqUXVlcnkubWlncmF0ZU11dGUgKSB7XHJcblx0XHRsb2coIFwiSlFNSUdSQVRFOiBNaWdyYXRlIGlzIGluc3RhbGxlZFwiICtcclxuXHRcdFx0KCBqUXVlcnkubWlncmF0ZU11dGUgPyBcIlwiIDogXCIgd2l0aCBsb2dnaW5nIGFjdGl2ZVwiICkgK1xyXG5cdFx0XHRcIiwgdmVyc2lvbiBcIiArIGpRdWVyeS5taWdyYXRlVmVyc2lvbiApO1xyXG5cdH1cclxuXHJcbn0gKSgpO1xyXG5cclxudmFyIHdhcm5lZEFib3V0ID0ge307XHJcblxyXG4vLyBMaXN0IG9mIHdhcm5pbmdzIGFscmVhZHkgZ2l2ZW47IHB1YmxpYyByZWFkIG9ubHlcclxualF1ZXJ5Lm1pZ3JhdGVXYXJuaW5ncyA9IFtdO1xyXG5cclxuLy8gU2V0IHRvIGZhbHNlIHRvIGRpc2FibGUgdHJhY2VzIHRoYXQgYXBwZWFyIHdpdGggd2FybmluZ3NcclxuaWYgKCBqUXVlcnkubWlncmF0ZVRyYWNlID09PSB1bmRlZmluZWQgKSB7XHJcblx0alF1ZXJ5Lm1pZ3JhdGVUcmFjZSA9IHRydWU7XHJcbn1cclxuXHJcbi8vIEZvcmdldCBhbnkgd2FybmluZ3Mgd2UndmUgYWxyZWFkeSBnaXZlbjsgcHVibGljXHJcbmpRdWVyeS5taWdyYXRlUmVzZXQgPSBmdW5jdGlvbigpIHtcclxuXHR3YXJuZWRBYm91dCA9IHt9O1xyXG5cdGpRdWVyeS5taWdyYXRlV2FybmluZ3MubGVuZ3RoID0gMDtcclxufTtcclxuXHJcbmZ1bmN0aW9uIG1pZ3JhdGVXYXJuKCBtc2cgKSB7XHJcblx0dmFyIGNvbnNvbGUgPSB3aW5kb3cuY29uc29sZTtcclxuXHRpZiAoICF3YXJuZWRBYm91dFsgbXNnIF0gKSB7XHJcblx0XHR3YXJuZWRBYm91dFsgbXNnIF0gPSB0cnVlO1xyXG5cdFx0alF1ZXJ5Lm1pZ3JhdGVXYXJuaW5ncy5wdXNoKCBtc2cgKTtcclxuXHRcdGlmICggY29uc29sZSAmJiBjb25zb2xlLndhcm4gJiYgIWpRdWVyeS5taWdyYXRlTXV0ZSApIHtcclxuXHRcdFx0Y29uc29sZS53YXJuKCBcIkpRTUlHUkFURTogXCIgKyBtc2cgKTtcclxuXHRcdFx0aWYgKCBqUXVlcnkubWlncmF0ZVRyYWNlICYmIGNvbnNvbGUudHJhY2UgKSB7XHJcblx0XHRcdFx0Y29uc29sZS50cmFjZSgpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG59XHJcblxyXG5mdW5jdGlvbiBtaWdyYXRlV2FyblByb3AoIG9iaiwgcHJvcCwgdmFsdWUsIG1zZyApIHtcclxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoIG9iaiwgcHJvcCwge1xyXG5cdFx0Y29uZmlndXJhYmxlOiB0cnVlLFxyXG5cdFx0ZW51bWVyYWJsZTogdHJ1ZSxcclxuXHRcdGdldDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdG1pZ3JhdGVXYXJuKCBtc2cgKTtcclxuXHRcdFx0cmV0dXJuIHZhbHVlO1xyXG5cdFx0fSxcclxuXHRcdHNldDogZnVuY3Rpb24oIG5ld1ZhbHVlICkge1xyXG5cdFx0XHRtaWdyYXRlV2FybiggbXNnICk7XHJcblx0XHRcdHZhbHVlID0gbmV3VmFsdWU7XHJcblx0XHR9XHJcblx0fSApO1xyXG59XHJcblxyXG5mdW5jdGlvbiBtaWdyYXRlV2FybkZ1bmMoIG9iaiwgcHJvcCwgbmV3RnVuYywgbXNnICkge1xyXG5cdG9ialsgcHJvcCBdID0gZnVuY3Rpb24oKSB7XHJcblx0XHRtaWdyYXRlV2FybiggbXNnICk7XHJcblx0XHRyZXR1cm4gbmV3RnVuYy5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XHJcblx0fTtcclxufVxyXG5cclxuaWYgKCB3aW5kb3cuZG9jdW1lbnQuY29tcGF0TW9kZSA9PT0gXCJCYWNrQ29tcGF0XCIgKSB7XHJcblxyXG5cdC8vIEpRdWVyeSBoYXMgbmV2ZXIgc3VwcG9ydGVkIG9yIHRlc3RlZCBRdWlya3MgTW9kZVxyXG5cdG1pZ3JhdGVXYXJuKCBcImpRdWVyeSBpcyBub3QgY29tcGF0aWJsZSB3aXRoIFF1aXJrcyBNb2RlXCIgKTtcclxufVxyXG5cclxuXHJcbnZhciBvbGRJbml0ID0galF1ZXJ5LmZuLmluaXQsXHJcblx0b2xkSXNOdW1lcmljID0galF1ZXJ5LmlzTnVtZXJpYyxcclxuXHRvbGRGaW5kID0galF1ZXJ5LmZpbmQsXHJcblx0cmF0dHJIYXNoVGVzdCA9IC9cXFsoXFxzKlstXFx3XStcXHMqKShbfnxeJCpdPz0pXFxzKihbLVxcdyNdKj8jWy1cXHcjXSopXFxzKlxcXS8sXHJcblx0cmF0dHJIYXNoR2xvYiA9IC9cXFsoXFxzKlstXFx3XStcXHMqKShbfnxeJCpdPz0pXFxzKihbLVxcdyNdKj8jWy1cXHcjXSopXFxzKlxcXS9nO1xyXG5cclxualF1ZXJ5LmZuLmluaXQgPSBmdW5jdGlvbiggYXJnMSApIHtcclxuXHR2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKCBhcmd1bWVudHMgKTtcclxuXHJcblx0aWYgKCB0eXBlb2YgYXJnMSA9PT0gXCJzdHJpbmdcIiAmJiBhcmcxID09PSBcIiNcIiApIHtcclxuXHJcblx0XHQvLyBKUXVlcnkoIFwiI1wiICkgaXMgYSBib2d1cyBJRCBzZWxlY3RvciwgYnV0IGl0IHJldHVybmVkIGFuIGVtcHR5IHNldCBiZWZvcmUgalF1ZXJ5IDMuMFxyXG5cdFx0bWlncmF0ZVdhcm4oIFwialF1ZXJ5KCAnIycgKSBpcyBub3QgYSB2YWxpZCBzZWxlY3RvclwiICk7XHJcblx0XHRhcmdzWyAwIF0gPSBbXTtcclxuXHR9XHJcblxyXG5cdHJldHVybiBvbGRJbml0LmFwcGx5KCB0aGlzLCBhcmdzICk7XHJcbn07XHJcbmpRdWVyeS5mbi5pbml0LnByb3RvdHlwZSA9IGpRdWVyeS5mbjtcclxuXHJcbmpRdWVyeS5maW5kID0gZnVuY3Rpb24oIHNlbGVjdG9yICkge1xyXG5cdHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoIGFyZ3VtZW50cyApO1xyXG5cclxuXHQvLyBTdXBwb3J0OiBQaGFudG9tSlMgMS54XHJcblx0Ly8gU3RyaW5nI21hdGNoIGZhaWxzIHRvIG1hdGNoIHdoZW4gdXNlZCB3aXRoIGEgLy9nIFJlZ0V4cCwgb25seSBvbiBzb21lIHN0cmluZ3NcclxuXHRpZiAoIHR5cGVvZiBzZWxlY3RvciA9PT0gXCJzdHJpbmdcIiAmJiByYXR0ckhhc2hUZXN0LnRlc3QoIHNlbGVjdG9yICkgKSB7XHJcblxyXG5cdFx0Ly8gVGhlIG5vbnN0YW5kYXJkIGFuZCB1bmRvY3VtZW50ZWQgdW5xdW90ZWQtaGFzaCB3YXMgcmVtb3ZlZCBpbiBqUXVlcnkgMS4xMi4wXHJcblx0XHQvLyBGaXJzdCBzZWUgaWYgcVMgdGhpbmtzIGl0J3MgYSB2YWxpZCBzZWxlY3RvciwgaWYgc28gYXZvaWQgYSBmYWxzZSBwb3NpdGl2ZVxyXG5cdFx0dHJ5IHtcclxuXHRcdFx0d2luZG93LmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIHNlbGVjdG9yICk7XHJcblx0XHR9IGNhdGNoICggZXJyMSApIHtcclxuXHJcblx0XHRcdC8vIERpZG4ndCAqbG9vayogdmFsaWQgdG8gcVNBLCB3YXJuIGFuZCB0cnkgcXVvdGluZyB3aGF0IHdlIHRoaW5rIGlzIHRoZSB2YWx1ZVxyXG5cdFx0XHRzZWxlY3RvciA9IHNlbGVjdG9yLnJlcGxhY2UoIHJhdHRySGFzaEdsb2IsIGZ1bmN0aW9uKCBfLCBhdHRyLCBvcCwgdmFsdWUgKSB7XHJcblx0XHRcdFx0cmV0dXJuIFwiW1wiICsgYXR0ciArIG9wICsgXCJcXFwiXCIgKyB2YWx1ZSArIFwiXFxcIl1cIjtcclxuXHRcdFx0fSApO1xyXG5cclxuXHRcdFx0Ly8gSWYgdGhlIHJlZ2V4cCAqbWF5KiBoYXZlIGNyZWF0ZWQgYW4gaW52YWxpZCBzZWxlY3RvciwgZG9uJ3QgdXBkYXRlIGl0XHJcblx0XHRcdC8vIE5vdGUgdGhhdCB0aGVyZSBtYXkgYmUgZmFsc2UgYWxhcm1zIGlmIHNlbGVjdG9yIHVzZXMgalF1ZXJ5IGV4dGVuc2lvbnNcclxuXHRcdFx0dHJ5IHtcclxuXHRcdFx0XHR3aW5kb3cuZG9jdW1lbnQucXVlcnlTZWxlY3Rvciggc2VsZWN0b3IgKTtcclxuXHRcdFx0XHRtaWdyYXRlV2FybiggXCJBdHRyaWJ1dGUgc2VsZWN0b3Igd2l0aCAnIycgbXVzdCBiZSBxdW90ZWQ6IFwiICsgYXJnc1sgMCBdICk7XHJcblx0XHRcdFx0YXJnc1sgMCBdID0gc2VsZWN0b3I7XHJcblx0XHRcdH0gY2F0Y2ggKCBlcnIyICkge1xyXG5cdFx0XHRcdG1pZ3JhdGVXYXJuKCBcIkF0dHJpYnV0ZSBzZWxlY3RvciB3aXRoICcjJyB3YXMgbm90IGZpeGVkOiBcIiArIGFyZ3NbIDAgXSApO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRyZXR1cm4gb2xkRmluZC5hcHBseSggdGhpcywgYXJncyApO1xyXG59O1xyXG5cclxuLy8gQ29weSBwcm9wZXJ0aWVzIGF0dGFjaGVkIHRvIG9yaWdpbmFsIGpRdWVyeS5maW5kIG1ldGhvZCAoZS5nLiAuYXR0ciwgLmlzWE1MKVxyXG52YXIgZmluZFByb3A7XHJcbmZvciAoIGZpbmRQcm9wIGluIG9sZEZpbmQgKSB7XHJcblx0aWYgKCBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoIG9sZEZpbmQsIGZpbmRQcm9wICkgKSB7XHJcblx0XHRqUXVlcnkuZmluZFsgZmluZFByb3AgXSA9IG9sZEZpbmRbIGZpbmRQcm9wIF07XHJcblx0fVxyXG59XHJcblxyXG4vLyBUaGUgbnVtYmVyIG9mIGVsZW1lbnRzIGNvbnRhaW5lZCBpbiB0aGUgbWF0Y2hlZCBlbGVtZW50IHNldFxyXG5qUXVlcnkuZm4uc2l6ZSA9IGZ1bmN0aW9uKCkge1xyXG5cdG1pZ3JhdGVXYXJuKCBcImpRdWVyeS5mbi5zaXplKCkgaXMgZGVwcmVjYXRlZCBhbmQgcmVtb3ZlZDsgdXNlIHRoZSAubGVuZ3RoIHByb3BlcnR5XCIgKTtcclxuXHRyZXR1cm4gdGhpcy5sZW5ndGg7XHJcbn07XHJcblxyXG5qUXVlcnkucGFyc2VKU09OID0gZnVuY3Rpb24oKSB7XHJcblx0bWlncmF0ZVdhcm4oIFwialF1ZXJ5LnBhcnNlSlNPTiBpcyBkZXByZWNhdGVkOyB1c2UgSlNPTi5wYXJzZVwiICk7XHJcblx0cmV0dXJuIEpTT04ucGFyc2UuYXBwbHkoIG51bGwsIGFyZ3VtZW50cyApO1xyXG59O1xyXG5cclxualF1ZXJ5LmlzTnVtZXJpYyA9IGZ1bmN0aW9uKCB2YWwgKSB7XHJcblxyXG5cdC8vIFRoZSBqUXVlcnkgMi4yLjMgaW1wbGVtZW50YXRpb24gb2YgaXNOdW1lcmljXHJcblx0ZnVuY3Rpb24gaXNOdW1lcmljMiggb2JqICkge1xyXG5cdFx0dmFyIHJlYWxTdHJpbmdPYmogPSBvYmogJiYgb2JqLnRvU3RyaW5nKCk7XHJcblx0XHRyZXR1cm4gIWpRdWVyeS5pc0FycmF5KCBvYmogKSAmJiAoIHJlYWxTdHJpbmdPYmogLSBwYXJzZUZsb2F0KCByZWFsU3RyaW5nT2JqICkgKyAxICkgPj0gMDtcclxuXHR9XHJcblxyXG5cdHZhciBuZXdWYWx1ZSA9IG9sZElzTnVtZXJpYyggdmFsICksXHJcblx0XHRvbGRWYWx1ZSA9IGlzTnVtZXJpYzIoIHZhbCApO1xyXG5cclxuXHRpZiAoIG5ld1ZhbHVlICE9PSBvbGRWYWx1ZSApIHtcclxuXHRcdG1pZ3JhdGVXYXJuKCBcImpRdWVyeS5pc051bWVyaWMoKSBzaG91bGQgbm90IGJlIGNhbGxlZCBvbiBjb25zdHJ1Y3RlZCBvYmplY3RzXCIgKTtcclxuXHR9XHJcblxyXG5cdHJldHVybiBvbGRWYWx1ZTtcclxufTtcclxuXHJcbm1pZ3JhdGVXYXJuRnVuYyggalF1ZXJ5LCBcInVuaXF1ZVwiLCBqUXVlcnkudW5pcXVlU29ydCxcclxuXHRcImpRdWVyeS51bmlxdWUgaXMgZGVwcmVjYXRlZDsgdXNlIGpRdWVyeS51bmlxdWVTb3J0XCIgKTtcclxuXHJcbi8vIE5vdyBqUXVlcnkuZXhwci5wc2V1ZG9zIGlzIHRoZSBzdGFuZGFyZCBpbmNhbnRhdGlvblxyXG5taWdyYXRlV2FyblByb3AoIGpRdWVyeS5leHByLCBcImZpbHRlcnNcIiwgalF1ZXJ5LmV4cHIucHNldWRvcyxcclxuXHRcImpRdWVyeS5leHByLmZpbHRlcnMgaXMgZGVwcmVjYXRlZDsgdXNlIGpRdWVyeS5leHByLnBzZXVkb3NcIiApO1xyXG5taWdyYXRlV2FyblByb3AoIGpRdWVyeS5leHByLCBcIjpcIiwgalF1ZXJ5LmV4cHIucHNldWRvcyxcclxuXHRcImpRdWVyeS5leHByWyc6J10gaXMgZGVwcmVjYXRlZDsgdXNlIGpRdWVyeS5leHByLnBzZXVkb3NcIiApO1xyXG5cclxuXHJcbnZhciBvbGRBamF4ID0galF1ZXJ5LmFqYXg7XHJcblxyXG5qUXVlcnkuYWpheCA9IGZ1bmN0aW9uKCApIHtcclxuXHR2YXIgalFYSFIgPSBvbGRBamF4LmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcclxuXHJcblx0Ly8gQmUgc3VyZSB3ZSBnb3QgYSBqUVhIUiAoZS5nLiwgbm90IHN5bmMpXHJcblx0aWYgKCBqUVhIUi5wcm9taXNlICkge1xyXG5cdFx0bWlncmF0ZVdhcm5GdW5jKCBqUVhIUiwgXCJzdWNjZXNzXCIsIGpRWEhSLmRvbmUsXHJcblx0XHRcdFwialFYSFIuc3VjY2VzcyBpcyBkZXByZWNhdGVkIGFuZCByZW1vdmVkXCIgKTtcclxuXHRcdG1pZ3JhdGVXYXJuRnVuYyggalFYSFIsIFwiZXJyb3JcIiwgalFYSFIuZmFpbCxcclxuXHRcdFx0XCJqUVhIUi5lcnJvciBpcyBkZXByZWNhdGVkIGFuZCByZW1vdmVkXCIgKTtcclxuXHRcdG1pZ3JhdGVXYXJuRnVuYyggalFYSFIsIFwiY29tcGxldGVcIiwgalFYSFIuYWx3YXlzLFxyXG5cdFx0XHRcImpRWEhSLmNvbXBsZXRlIGlzIGRlcHJlY2F0ZWQgYW5kIHJlbW92ZWRcIiApO1xyXG5cdH1cclxuXHJcblx0cmV0dXJuIGpRWEhSO1xyXG59O1xyXG5cclxuXHJcbnZhciBvbGRSZW1vdmVBdHRyID0galF1ZXJ5LmZuLnJlbW92ZUF0dHIsXHJcblx0b2xkVG9nZ2xlQ2xhc3MgPSBqUXVlcnkuZm4udG9nZ2xlQ2xhc3MsXHJcblx0cm1hdGNoTm9uU3BhY2UgPSAvXFxTKy9nO1xyXG5cclxualF1ZXJ5LmZuLnJlbW92ZUF0dHIgPSBmdW5jdGlvbiggbmFtZSApIHtcclxuXHR2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG5cdGpRdWVyeS5lYWNoKCBuYW1lLm1hdGNoKCBybWF0Y2hOb25TcGFjZSApLCBmdW5jdGlvbiggaSwgYXR0ciApIHtcclxuXHRcdGlmICggalF1ZXJ5LmV4cHIubWF0Y2guYm9vbC50ZXN0KCBhdHRyICkgKSB7XHJcblx0XHRcdG1pZ3JhdGVXYXJuKCBcImpRdWVyeS5mbi5yZW1vdmVBdHRyIG5vIGxvbmdlciBzZXRzIGJvb2xlYW4gcHJvcGVydGllczogXCIgKyBhdHRyICk7XHJcblx0XHRcdHNlbGYucHJvcCggYXR0ciwgZmFsc2UgKTtcclxuXHRcdH1cclxuXHR9ICk7XHJcblxyXG5cdHJldHVybiBvbGRSZW1vdmVBdHRyLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcclxufTtcclxuXHJcbmpRdWVyeS5mbi50b2dnbGVDbGFzcyA9IGZ1bmN0aW9uKCBzdGF0ZSApIHtcclxuXHJcblx0Ly8gT25seSBkZXByZWNhdGluZyBuby1hcmdzIG9yIHNpbmdsZSBib29sZWFuIGFyZ1xyXG5cdGlmICggc3RhdGUgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2Ygc3RhdGUgIT09IFwiYm9vbGVhblwiICkge1xyXG5cdFx0cmV0dXJuIG9sZFRvZ2dsZUNsYXNzLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcclxuXHR9XHJcblxyXG5cdG1pZ3JhdGVXYXJuKCBcImpRdWVyeS5mbi50b2dnbGVDbGFzcyggYm9vbGVhbiApIGlzIGRlcHJlY2F0ZWRcIiApO1xyXG5cclxuXHQvLyBUb2dnbGUgZW50aXJlIGNsYXNzIG5hbWUgb2YgZWFjaCBlbGVtZW50XHJcblx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgY2xhc3NOYW1lID0gdGhpcy5nZXRBdHRyaWJ1dGUgJiYgdGhpcy5nZXRBdHRyaWJ1dGUoIFwiY2xhc3NcIiApIHx8IFwiXCI7XHJcblxyXG5cdFx0aWYgKCBjbGFzc05hbWUgKSB7XHJcblx0XHRcdGpRdWVyeS5kYXRhKCB0aGlzLCBcIl9fY2xhc3NOYW1lX19cIiwgY2xhc3NOYW1lICk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gSWYgdGhlIGVsZW1lbnQgaGFzIGEgY2xhc3MgbmFtZSBvciBpZiB3ZSdyZSBwYXNzZWQgYGZhbHNlYCxcclxuXHRcdC8vIHRoZW4gcmVtb3ZlIHRoZSB3aG9sZSBjbGFzc25hbWUgKGlmIHRoZXJlIHdhcyBvbmUsIHRoZSBhYm92ZSBzYXZlZCBpdCkuXHJcblx0XHQvLyBPdGhlcndpc2UgYnJpbmcgYmFjayB3aGF0ZXZlciB3YXMgcHJldmlvdXNseSBzYXZlZCAoaWYgYW55dGhpbmcpLFxyXG5cdFx0Ly8gZmFsbGluZyBiYWNrIHRvIHRoZSBlbXB0eSBzdHJpbmcgaWYgbm90aGluZyB3YXMgc3RvcmVkLlxyXG5cdFx0aWYgKCB0aGlzLnNldEF0dHJpYnV0ZSApIHtcclxuXHRcdFx0dGhpcy5zZXRBdHRyaWJ1dGUoIFwiY2xhc3NcIixcclxuXHRcdFx0XHRjbGFzc05hbWUgfHwgc3RhdGUgPT09IGZhbHNlID9cclxuXHRcdFx0XHRcIlwiIDpcclxuXHRcdFx0XHRqUXVlcnkuZGF0YSggdGhpcywgXCJfX2NsYXNzTmFtZV9fXCIgKSB8fCBcIlwiXHJcblx0XHRcdCk7XHJcblx0XHR9XHJcblx0fSApO1xyXG59O1xyXG5cclxuXHJcbnZhciBpbnRlcm5hbFN3YXBDYWxsID0gZmFsc2U7XHJcblxyXG4vLyBJZiB0aGlzIHZlcnNpb24gb2YgalF1ZXJ5IGhhcyAuc3dhcCgpLCBkb24ndCBmYWxzZS1hbGFybSBvbiBpbnRlcm5hbCB1c2VzXHJcbmlmICggalF1ZXJ5LnN3YXAgKSB7XHJcblx0alF1ZXJ5LmVhY2goIFsgXCJoZWlnaHRcIiwgXCJ3aWR0aFwiLCBcInJlbGlhYmxlTWFyZ2luUmlnaHRcIiBdLCBmdW5jdGlvbiggXywgbmFtZSApIHtcclxuXHRcdHZhciBvbGRIb29rID0galF1ZXJ5LmNzc0hvb2tzWyBuYW1lIF0gJiYgalF1ZXJ5LmNzc0hvb2tzWyBuYW1lIF0uZ2V0O1xyXG5cclxuXHRcdGlmICggb2xkSG9vayApIHtcclxuXHRcdFx0alF1ZXJ5LmNzc0hvb2tzWyBuYW1lIF0uZ2V0ID0gZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0dmFyIHJldDtcclxuXHJcblx0XHRcdFx0aW50ZXJuYWxTd2FwQ2FsbCA9IHRydWU7XHJcblx0XHRcdFx0cmV0ID0gb2xkSG9vay5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XHJcblx0XHRcdFx0aW50ZXJuYWxTd2FwQ2FsbCA9IGZhbHNlO1xyXG5cdFx0XHRcdHJldHVybiByZXQ7XHJcblx0XHRcdH07XHJcblx0XHR9XHJcblx0fSApO1xyXG59XHJcblxyXG5qUXVlcnkuc3dhcCA9IGZ1bmN0aW9uKCBlbGVtLCBvcHRpb25zLCBjYWxsYmFjaywgYXJncyApIHtcclxuXHR2YXIgcmV0LCBuYW1lLFxyXG5cdFx0b2xkID0ge307XHJcblxyXG5cdGlmICggIWludGVybmFsU3dhcENhbGwgKSB7XHJcblx0XHRtaWdyYXRlV2FybiggXCJqUXVlcnkuc3dhcCgpIGlzIHVuZG9jdW1lbnRlZCBhbmQgZGVwcmVjYXRlZFwiICk7XHJcblx0fVxyXG5cclxuXHQvLyBSZW1lbWJlciB0aGUgb2xkIHZhbHVlcywgYW5kIGluc2VydCB0aGUgbmV3IG9uZXNcclxuXHRmb3IgKCBuYW1lIGluIG9wdGlvbnMgKSB7XHJcblx0XHRvbGRbIG5hbWUgXSA9IGVsZW0uc3R5bGVbIG5hbWUgXTtcclxuXHRcdGVsZW0uc3R5bGVbIG5hbWUgXSA9IG9wdGlvbnNbIG5hbWUgXTtcclxuXHR9XHJcblxyXG5cdHJldCA9IGNhbGxiYWNrLmFwcGx5KCBlbGVtLCBhcmdzIHx8IFtdICk7XHJcblxyXG5cdC8vIFJldmVydCB0aGUgb2xkIHZhbHVlc1xyXG5cdGZvciAoIG5hbWUgaW4gb3B0aW9ucyApIHtcclxuXHRcdGVsZW0uc3R5bGVbIG5hbWUgXSA9IG9sZFsgbmFtZSBdO1xyXG5cdH1cclxuXHJcblx0cmV0dXJuIHJldDtcclxufTtcclxuXHJcbnZhciBvbGREYXRhID0galF1ZXJ5LmRhdGE7XHJcblxyXG5qUXVlcnkuZGF0YSA9IGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCB2YWx1ZSApIHtcclxuXHR2YXIgY3VyRGF0YTtcclxuXHJcblx0Ly8gTmFtZSBjYW4gYmUgYW4gb2JqZWN0LCBhbmQgZWFjaCBlbnRyeSBpbiB0aGUgb2JqZWN0IGlzIG1lYW50IHRvIGJlIHNldCBhcyBkYXRhXHJcblx0aWYgKCBuYW1lICYmIHR5cGVvZiBuYW1lID09PSBcIm9iamVjdFwiICYmIGFyZ3VtZW50cy5sZW5ndGggPT09IDIgKSB7XHJcblx0XHRjdXJEYXRhID0galF1ZXJ5Lmhhc0RhdGEoIGVsZW0gKSAmJiBvbGREYXRhLmNhbGwoIHRoaXMsIGVsZW0gKTtcclxuXHRcdHZhciBzYW1lS2V5cyA9IHt9O1xyXG5cdFx0Zm9yICggdmFyIGtleSBpbiBuYW1lICkge1xyXG5cdFx0XHRpZiAoIGtleSAhPT0galF1ZXJ5LmNhbWVsQ2FzZSgga2V5ICkgKSB7XHJcblx0XHRcdFx0bWlncmF0ZVdhcm4oIFwialF1ZXJ5LmRhdGEoKSBhbHdheXMgc2V0cy9nZXRzIGNhbWVsQ2FzZWQgbmFtZXM6IFwiICsga2V5ICk7XHJcblx0XHRcdFx0Y3VyRGF0YVsga2V5IF0gPSBuYW1lWyBrZXkgXTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRzYW1lS2V5c1sga2V5IF0gPSBuYW1lWyBrZXkgXTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdG9sZERhdGEuY2FsbCggdGhpcywgZWxlbSwgc2FtZUtleXMgKTtcclxuXHJcblx0XHRyZXR1cm4gbmFtZTtcclxuXHR9XHJcblxyXG5cdC8vIElmIHRoZSBuYW1lIGlzIHRyYW5zZm9ybWVkLCBsb29rIGZvciB0aGUgdW4tdHJhbnNmb3JtZWQgbmFtZSBpbiB0aGUgZGF0YSBvYmplY3RcclxuXHRpZiAoIG5hbWUgJiYgdHlwZW9mIG5hbWUgPT09IFwic3RyaW5nXCIgJiYgbmFtZSAhPT0galF1ZXJ5LmNhbWVsQ2FzZSggbmFtZSApICkge1xyXG5cdFx0Y3VyRGF0YSA9IGpRdWVyeS5oYXNEYXRhKCBlbGVtICkgJiYgb2xkRGF0YS5jYWxsKCB0aGlzLCBlbGVtICk7XHJcblx0XHRpZiAoIGN1ckRhdGEgJiYgbmFtZSBpbiBjdXJEYXRhICkge1xyXG5cdFx0XHRtaWdyYXRlV2FybiggXCJqUXVlcnkuZGF0YSgpIGFsd2F5cyBzZXRzL2dldHMgY2FtZWxDYXNlZCBuYW1lczogXCIgKyBuYW1lICk7XHJcblx0XHRcdGlmICggYXJndW1lbnRzLmxlbmd0aCA+IDIgKSB7XHJcblx0XHRcdFx0Y3VyRGF0YVsgbmFtZSBdID0gdmFsdWU7XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuIGN1ckRhdGFbIG5hbWUgXTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHJldHVybiBvbGREYXRhLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcclxufTtcclxuXHJcbnZhciBvbGRUd2VlblJ1biA9IGpRdWVyeS5Ud2Vlbi5wcm90b3R5cGUucnVuO1xyXG5cclxualF1ZXJ5LlR3ZWVuLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiggKSB7XHJcblx0aWYgKCBqUXVlcnkuZWFzaW5nWyB0aGlzLmVhc2luZyBdLmxlbmd0aCA+IDEgKSB7XHJcblx0XHRtaWdyYXRlV2FybihcclxuXHRcdFx0XCJlYXNpbmcgZnVuY3Rpb24gXCIgK1xyXG5cdFx0XHRcIlxcXCJqUXVlcnkuZWFzaW5nLlwiICsgdGhpcy5lYXNpbmcudG9TdHJpbmcoKSArXHJcblx0XHRcdFwiXFxcIiBzaG91bGQgdXNlIG9ubHkgZmlyc3QgYXJndW1lbnRcIlxyXG5cdFx0KTtcclxuXHJcblx0XHR2YXIgb2xkRWFzaW5nID0galF1ZXJ5LmVhc2luZ1sgdGhpcy5lYXNpbmcgXTtcclxuXHRcdGpRdWVyeS5lYXNpbmdbIHRoaXMuZWFzaW5nIF0gPSBmdW5jdGlvbiggcGVyY2VudCApIHtcclxuXHRcdFx0cmV0dXJuIG9sZEVhc2luZy5jYWxsKCBqUXVlcnkuZWFzaW5nLCBwZXJjZW50LCBwZXJjZW50LCAwLCAxLCAxICk7XHJcblx0XHR9LmJpbmQoIHRoaXMgKTtcclxuXHR9XHJcblxyXG5cdG9sZFR3ZWVuUnVuLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcclxufTtcclxuXHJcbmpRdWVyeS5meC5pbnRlcnZhbCA9IGpRdWVyeS5meC5pbnRlcnZhbCB8fCAxMztcclxuXHJcbi8vIFN1cHBvcnQ6IElFOSwgQW5kcm9pZCA8PTQuNFxyXG4vLyBBdm9pZCBmYWxzZSBwb3NpdGl2ZXMgb24gYnJvd3NlcnMgdGhhdCBsYWNrIHJBRlxyXG5pZiAoIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgKSB7XHJcblx0bWlncmF0ZVdhcm5Qcm9wKCBqUXVlcnkuZngsIFwiaW50ZXJ2YWxcIiwgalF1ZXJ5LmZ4LmludGVydmFsLFxyXG5cdFx0XCJqUXVlcnkuZnguaW50ZXJ2YWwgaXMgZGVwcmVjYXRlZFwiICk7XHJcbn1cclxuXHJcbnZhciBvbGRMb2FkID0galF1ZXJ5LmZuLmxvYWQsXHJcblx0b2xkRXZlbnRBZGQgPSBqUXVlcnkuZXZlbnQuYWRkLFxyXG5cdG9yaWdpbmFsRml4ID0galF1ZXJ5LmV2ZW50LmZpeDtcclxuXHJcbmpRdWVyeS5ldmVudC5wcm9wcyA9IFtdO1xyXG5qUXVlcnkuZXZlbnQuZml4SG9va3MgPSB7fTtcclxuXHJcbm1pZ3JhdGVXYXJuUHJvcCggalF1ZXJ5LmV2ZW50LnByb3BzLCBcImNvbmNhdFwiLCBqUXVlcnkuZXZlbnQucHJvcHMuY29uY2F0LFxyXG5cdFwialF1ZXJ5LmV2ZW50LnByb3BzLmNvbmNhdCgpIGlzIGRlcHJlY2F0ZWQgYW5kIHJlbW92ZWRcIiApO1xyXG5cclxualF1ZXJ5LmV2ZW50LmZpeCA9IGZ1bmN0aW9uKCBvcmlnaW5hbEV2ZW50ICkge1xyXG5cdHZhciBldmVudCxcclxuXHRcdHR5cGUgPSBvcmlnaW5hbEV2ZW50LnR5cGUsXHJcblx0XHRmaXhIb29rID0gdGhpcy5maXhIb29rc1sgdHlwZSBdLFxyXG5cdFx0cHJvcHMgPSBqUXVlcnkuZXZlbnQucHJvcHM7XHJcblxyXG5cdGlmICggcHJvcHMubGVuZ3RoICkge1xyXG5cdFx0bWlncmF0ZVdhcm4oIFwialF1ZXJ5LmV2ZW50LnByb3BzIGFyZSBkZXByZWNhdGVkIGFuZCByZW1vdmVkOiBcIiArIHByb3BzLmpvaW4oKSApO1xyXG5cdFx0d2hpbGUgKCBwcm9wcy5sZW5ndGggKSB7XHJcblx0XHRcdGpRdWVyeS5ldmVudC5hZGRQcm9wKCBwcm9wcy5wb3AoKSApO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0aWYgKCBmaXhIb29rICYmICFmaXhIb29rLl9taWdyYXRlZF8gKSB7XHJcblx0XHRmaXhIb29rLl9taWdyYXRlZF8gPSB0cnVlO1xyXG5cdFx0bWlncmF0ZVdhcm4oIFwialF1ZXJ5LmV2ZW50LmZpeEhvb2tzIGFyZSBkZXByZWNhdGVkIGFuZCByZW1vdmVkOiBcIiArIHR5cGUgKTtcclxuXHRcdGlmICggKCBwcm9wcyA9IGZpeEhvb2sucHJvcHMgKSAmJiBwcm9wcy5sZW5ndGggKSB7XHJcblx0XHRcdHdoaWxlICggcHJvcHMubGVuZ3RoICkge1xyXG5cdFx0XHRcdGpRdWVyeS5ldmVudC5hZGRQcm9wKCBwcm9wcy5wb3AoKSApO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRldmVudCA9IG9yaWdpbmFsRml4LmNhbGwoIHRoaXMsIG9yaWdpbmFsRXZlbnQgKTtcclxuXHJcblx0cmV0dXJuIGZpeEhvb2sgJiYgZml4SG9vay5maWx0ZXIgPyBmaXhIb29rLmZpbHRlciggZXZlbnQsIG9yaWdpbmFsRXZlbnQgKSA6IGV2ZW50O1xyXG59O1xyXG5cclxualF1ZXJ5LmV2ZW50LmFkZCA9IGZ1bmN0aW9uKCBlbGVtLCB0eXBlcyApIHtcclxuXHJcblx0Ly8gVGhpcyBtaXNzZXMgdGhlIG11bHRpcGxlLXR5cGVzIGNhc2UgYnV0IHRoYXQgc2VlbXMgYXdmdWxseSByYXJlXHJcblx0aWYgKCBlbGVtID09PSB3aW5kb3cgJiYgdHlwZXMgPT09IFwibG9hZFwiICYmIHdpbmRvdy5kb2N1bWVudC5yZWFkeVN0YXRlID09PSBcImNvbXBsZXRlXCIgKSB7XHJcblx0XHRtaWdyYXRlV2FybiggXCJqUXVlcnkod2luZG93KS5vbignbG9hZCcuLi4pIGNhbGxlZCBhZnRlciBsb2FkIGV2ZW50IG9jY3VycmVkXCIgKTtcclxuXHR9XHJcblx0cmV0dXJuIG9sZEV2ZW50QWRkLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcclxufTtcclxuXHJcbmpRdWVyeS5lYWNoKCBbIFwibG9hZFwiLCBcInVubG9hZFwiLCBcImVycm9yXCIgXSwgZnVuY3Rpb24oIF8sIG5hbWUgKSB7XHJcblxyXG5cdGpRdWVyeS5mblsgbmFtZSBdID0gZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKCBhcmd1bWVudHMsIDAgKTtcclxuXHJcblx0XHQvLyBJZiB0aGlzIGlzIGFuIGFqYXggbG9hZCgpIHRoZSBmaXJzdCBhcmcgc2hvdWxkIGJlIHRoZSBzdHJpbmcgVVJMO1xyXG5cdFx0Ly8gdGVjaG5pY2FsbHkgdGhpcyBjb3VsZCBhbHNvIGJlIHRoZSBcIkFueXRoaW5nXCIgYXJnIG9mIHRoZSBldmVudCAubG9hZCgpXHJcblx0XHQvLyB3aGljaCBqdXN0IGdvZXMgdG8gc2hvdyB3aHkgdGhpcyBkdW1iIHNpZ25hdHVyZSBoYXMgYmVlbiBkZXByZWNhdGVkIVxyXG5cdFx0Ly8galF1ZXJ5IGN1c3RvbSBidWlsZHMgdGhhdCBleGNsdWRlIHRoZSBBamF4IG1vZHVsZSBqdXN0aWZpYWJseSBkaWUgaGVyZS5cclxuXHRcdGlmICggbmFtZSA9PT0gXCJsb2FkXCIgJiYgdHlwZW9mIGFyZ3NbIDAgXSA9PT0gXCJzdHJpbmdcIiApIHtcclxuXHRcdFx0cmV0dXJuIG9sZExvYWQuYXBwbHkoIHRoaXMsIGFyZ3MgKTtcclxuXHRcdH1cclxuXHJcblx0XHRtaWdyYXRlV2FybiggXCJqUXVlcnkuZm4uXCIgKyBuYW1lICsgXCIoKSBpcyBkZXByZWNhdGVkXCIgKTtcclxuXHJcblx0XHRhcmdzLnNwbGljZSggMCwgMCwgbmFtZSApO1xyXG5cdFx0aWYgKCBhcmd1bWVudHMubGVuZ3RoICkge1xyXG5cdFx0XHRyZXR1cm4gdGhpcy5vbi5hcHBseSggdGhpcywgYXJncyApO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFVzZSAudHJpZ2dlckhhbmRsZXIgaGVyZSBiZWNhdXNlOlxyXG5cdFx0Ly8gLSBsb2FkIGFuZCB1bmxvYWQgZXZlbnRzIGRvbid0IG5lZWQgdG8gYnViYmxlLCBvbmx5IGFwcGxpZWQgdG8gd2luZG93IG9yIGltYWdlXHJcblx0XHQvLyAtIGVycm9yIGV2ZW50IHNob3VsZCBub3QgYnViYmxlIHRvIHdpbmRvdywgYWx0aG91Z2ggaXQgZG9lcyBwcmUtMS43XHJcblx0XHQvLyBTZWUgaHR0cDovL2J1Z3MuanF1ZXJ5LmNvbS90aWNrZXQvMTE4MjBcclxuXHRcdHRoaXMudHJpZ2dlckhhbmRsZXIuYXBwbHkoIHRoaXMsIGFyZ3MgKTtcclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH07XHJcblxyXG59ICk7XHJcblxyXG4vLyBUcmlnZ2VyIFwicmVhZHlcIiBldmVudCBvbmx5IG9uY2UsIG9uIGRvY3VtZW50IHJlYWR5XHJcbmpRdWVyeSggZnVuY3Rpb24oKSB7XHJcblx0alF1ZXJ5KCB3aW5kb3cuZG9jdW1lbnQgKS50cmlnZ2VySGFuZGxlciggXCJyZWFkeVwiICk7XHJcbn0gKTtcclxuXHJcbmpRdWVyeS5ldmVudC5zcGVjaWFsLnJlYWR5ID0ge1xyXG5cdHNldHVwOiBmdW5jdGlvbigpIHtcclxuXHRcdGlmICggdGhpcyA9PT0gd2luZG93LmRvY3VtZW50ICkge1xyXG5cdFx0XHRtaWdyYXRlV2FybiggXCIncmVhZHknIGV2ZW50IGlzIGRlcHJlY2F0ZWRcIiApO1xyXG5cdFx0fVxyXG5cdH1cclxufTtcclxuXHJcbmpRdWVyeS5mbi5leHRlbmQoIHtcclxuXHJcblx0YmluZDogZnVuY3Rpb24oIHR5cGVzLCBkYXRhLCBmbiApIHtcclxuXHRcdG1pZ3JhdGVXYXJuKCBcImpRdWVyeS5mbi5iaW5kKCkgaXMgZGVwcmVjYXRlZFwiICk7XHJcblx0XHRyZXR1cm4gdGhpcy5vbiggdHlwZXMsIG51bGwsIGRhdGEsIGZuICk7XHJcblx0fSxcclxuXHR1bmJpbmQ6IGZ1bmN0aW9uKCB0eXBlcywgZm4gKSB7XHJcblx0XHRtaWdyYXRlV2FybiggXCJqUXVlcnkuZm4udW5iaW5kKCkgaXMgZGVwcmVjYXRlZFwiICk7XHJcblx0XHRyZXR1cm4gdGhpcy5vZmYoIHR5cGVzLCBudWxsLCBmbiApO1xyXG5cdH0sXHJcblx0ZGVsZWdhdGU6IGZ1bmN0aW9uKCBzZWxlY3RvciwgdHlwZXMsIGRhdGEsIGZuICkge1xyXG5cdFx0bWlncmF0ZVdhcm4oIFwialF1ZXJ5LmZuLmRlbGVnYXRlKCkgaXMgZGVwcmVjYXRlZFwiICk7XHJcblx0XHRyZXR1cm4gdGhpcy5vbiggdHlwZXMsIHNlbGVjdG9yLCBkYXRhLCBmbiApO1xyXG5cdH0sXHJcblx0dW5kZWxlZ2F0ZTogZnVuY3Rpb24oIHNlbGVjdG9yLCB0eXBlcywgZm4gKSB7XHJcblx0XHRtaWdyYXRlV2FybiggXCJqUXVlcnkuZm4udW5kZWxlZ2F0ZSgpIGlzIGRlcHJlY2F0ZWRcIiApO1xyXG5cdFx0cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPT09IDEgP1xyXG5cdFx0XHR0aGlzLm9mZiggc2VsZWN0b3IsIFwiKipcIiApIDpcclxuXHRcdFx0dGhpcy5vZmYoIHR5cGVzLCBzZWxlY3RvciB8fCBcIioqXCIsIGZuICk7XHJcblx0fVxyXG59ICk7XHJcblxyXG5cclxudmFyIG9sZE9mZnNldCA9IGpRdWVyeS5mbi5vZmZzZXQ7XHJcblxyXG5qUXVlcnkuZm4ub2Zmc2V0ID0gZnVuY3Rpb24oKSB7XHJcblx0dmFyIGRvY0VsZW0sXHJcblx0XHRlbGVtID0gdGhpc1sgMCBdLFxyXG5cdFx0b3JpZ2luID0geyB0b3A6IDAsIGxlZnQ6IDAgfTtcclxuXHJcblx0aWYgKCAhZWxlbSB8fCAhZWxlbS5ub2RlVHlwZSApIHtcclxuXHRcdG1pZ3JhdGVXYXJuKCBcImpRdWVyeS5mbi5vZmZzZXQoKSByZXF1aXJlcyBhIHZhbGlkIERPTSBlbGVtZW50XCIgKTtcclxuXHRcdHJldHVybiBvcmlnaW47XHJcblx0fVxyXG5cclxuXHRkb2NFbGVtID0gKCBlbGVtLm93bmVyRG9jdW1lbnQgfHwgd2luZG93LmRvY3VtZW50ICkuZG9jdW1lbnRFbGVtZW50O1xyXG5cdGlmICggIWpRdWVyeS5jb250YWlucyggZG9jRWxlbSwgZWxlbSApICkge1xyXG5cdFx0bWlncmF0ZVdhcm4oIFwialF1ZXJ5LmZuLm9mZnNldCgpIHJlcXVpcmVzIGFuIGVsZW1lbnQgY29ubmVjdGVkIHRvIGEgZG9jdW1lbnRcIiApO1xyXG5cdFx0cmV0dXJuIG9yaWdpbjtcclxuXHR9XHJcblxyXG5cdHJldHVybiBvbGRPZmZzZXQuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xyXG59O1xyXG5cclxuXHJcbnZhciBvbGRQYXJhbSA9IGpRdWVyeS5wYXJhbTtcclxuXHJcbmpRdWVyeS5wYXJhbSA9IGZ1bmN0aW9uKCBkYXRhLCB0cmFkaXRpb25hbCApIHtcclxuXHR2YXIgYWpheFRyYWRpdGlvbmFsID0galF1ZXJ5LmFqYXhTZXR0aW5ncyAmJiBqUXVlcnkuYWpheFNldHRpbmdzLnRyYWRpdGlvbmFsO1xyXG5cclxuXHRpZiAoIHRyYWRpdGlvbmFsID09PSB1bmRlZmluZWQgJiYgYWpheFRyYWRpdGlvbmFsICkge1xyXG5cclxuXHRcdG1pZ3JhdGVXYXJuKCBcImpRdWVyeS5wYXJhbSgpIG5vIGxvbmdlciB1c2VzIGpRdWVyeS5hamF4U2V0dGluZ3MudHJhZGl0aW9uYWxcIiApO1xyXG5cdFx0dHJhZGl0aW9uYWwgPSBhamF4VHJhZGl0aW9uYWw7XHJcblx0fVxyXG5cclxuXHRyZXR1cm4gb2xkUGFyYW0uY2FsbCggdGhpcywgZGF0YSwgdHJhZGl0aW9uYWwgKTtcclxufTtcclxuXHJcbnZhciBvbGRTZWxmID0galF1ZXJ5LmZuLmFuZFNlbGYgfHwgalF1ZXJ5LmZuLmFkZEJhY2s7XHJcblxyXG5qUXVlcnkuZm4uYW5kU2VsZiA9IGZ1bmN0aW9uKCkge1xyXG5cdG1pZ3JhdGVXYXJuKCBcImpRdWVyeS5mbi5hbmRTZWxmKCkgaXMgZGVwcmVjYXRlZCBhbmQgcmVtb3ZlZCwgdXNlIGpRdWVyeS5mbi5hZGRCYWNrKClcIiApO1xyXG5cdHJldHVybiBvbGRTZWxmLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcclxufTtcclxuXHJcblxyXG52YXIgb2xkRGVmZXJyZWQgPSBqUXVlcnkuRGVmZXJyZWQsXHJcblx0dHVwbGVzID0gW1xyXG5cclxuXHRcdC8vIEFjdGlvbiwgYWRkIGxpc3RlbmVyLCBjYWxsYmFja3MsIC50aGVuIGhhbmRsZXJzLCBmaW5hbCBzdGF0ZVxyXG5cdFx0WyBcInJlc29sdmVcIiwgXCJkb25lXCIsIGpRdWVyeS5DYWxsYmFja3MoIFwib25jZSBtZW1vcnlcIiApLFxyXG5cdFx0XHRqUXVlcnkuQ2FsbGJhY2tzKCBcIm9uY2UgbWVtb3J5XCIgKSwgXCJyZXNvbHZlZFwiIF0sXHJcblx0XHRbIFwicmVqZWN0XCIsIFwiZmFpbFwiLCBqUXVlcnkuQ2FsbGJhY2tzKCBcIm9uY2UgbWVtb3J5XCIgKSxcclxuXHRcdFx0alF1ZXJ5LkNhbGxiYWNrcyggXCJvbmNlIG1lbW9yeVwiICksIFwicmVqZWN0ZWRcIiBdLFxyXG5cdFx0WyBcIm5vdGlmeVwiLCBcInByb2dyZXNzXCIsIGpRdWVyeS5DYWxsYmFja3MoIFwibWVtb3J5XCIgKSxcclxuXHRcdFx0alF1ZXJ5LkNhbGxiYWNrcyggXCJtZW1vcnlcIiApIF1cclxuXHRdO1xyXG5cclxualF1ZXJ5LkRlZmVycmVkID0gZnVuY3Rpb24oIGZ1bmMgKSB7XHJcblx0dmFyIGRlZmVycmVkID0gb2xkRGVmZXJyZWQoKSxcclxuXHRcdHByb21pc2UgPSBkZWZlcnJlZC5wcm9taXNlKCk7XHJcblxyXG5cdGRlZmVycmVkLnBpcGUgPSBwcm9taXNlLnBpcGUgPSBmdW5jdGlvbiggLyogZm5Eb25lLCBmbkZhaWwsIGZuUHJvZ3Jlc3MgKi8gKSB7XHJcblx0XHR2YXIgZm5zID0gYXJndW1lbnRzO1xyXG5cclxuXHRcdG1pZ3JhdGVXYXJuKCBcImRlZmVycmVkLnBpcGUoKSBpcyBkZXByZWNhdGVkXCIgKTtcclxuXHJcblx0XHRyZXR1cm4galF1ZXJ5LkRlZmVycmVkKCBmdW5jdGlvbiggbmV3RGVmZXIgKSB7XHJcblx0XHRcdGpRdWVyeS5lYWNoKCB0dXBsZXMsIGZ1bmN0aW9uKCBpLCB0dXBsZSApIHtcclxuXHRcdFx0XHR2YXIgZm4gPSBqUXVlcnkuaXNGdW5jdGlvbiggZm5zWyBpIF0gKSAmJiBmbnNbIGkgXTtcclxuXHJcblx0XHRcdFx0Ly8gRGVmZXJyZWQuZG9uZShmdW5jdGlvbigpIHsgYmluZCB0byBuZXdEZWZlciBvciBuZXdEZWZlci5yZXNvbHZlIH0pXHJcblx0XHRcdFx0Ly8gZGVmZXJyZWQuZmFpbChmdW5jdGlvbigpIHsgYmluZCB0byBuZXdEZWZlciBvciBuZXdEZWZlci5yZWplY3QgfSlcclxuXHRcdFx0XHQvLyBkZWZlcnJlZC5wcm9ncmVzcyhmdW5jdGlvbigpIHsgYmluZCB0byBuZXdEZWZlciBvciBuZXdEZWZlci5ub3RpZnkgfSlcclxuXHRcdFx0XHRkZWZlcnJlZFsgdHVwbGVbIDEgXSBdKCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdHZhciByZXR1cm5lZCA9IGZuICYmIGZuLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcclxuXHRcdFx0XHRcdGlmICggcmV0dXJuZWQgJiYgalF1ZXJ5LmlzRnVuY3Rpb24oIHJldHVybmVkLnByb21pc2UgKSApIHtcclxuXHRcdFx0XHRcdFx0cmV0dXJuZWQucHJvbWlzZSgpXHJcblx0XHRcdFx0XHRcdFx0LmRvbmUoIG5ld0RlZmVyLnJlc29sdmUgKVxyXG5cdFx0XHRcdFx0XHRcdC5mYWlsKCBuZXdEZWZlci5yZWplY3QgKVxyXG5cdFx0XHRcdFx0XHRcdC5wcm9ncmVzcyggbmV3RGVmZXIubm90aWZ5ICk7XHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRuZXdEZWZlclsgdHVwbGVbIDAgXSArIFwiV2l0aFwiIF0oXHJcblx0XHRcdFx0XHRcdFx0dGhpcyA9PT0gcHJvbWlzZSA/IG5ld0RlZmVyLnByb21pc2UoKSA6IHRoaXMsXHJcblx0XHRcdFx0XHRcdFx0Zm4gPyBbIHJldHVybmVkIF0gOiBhcmd1bWVudHNcclxuXHRcdFx0XHRcdFx0KTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9ICk7XHJcblx0XHRcdH0gKTtcclxuXHRcdFx0Zm5zID0gbnVsbDtcclxuXHRcdH0gKS5wcm9taXNlKCk7XHJcblxyXG5cdH07XHJcblxyXG5cdGlmICggZnVuYyApIHtcclxuXHRcdGZ1bmMuY2FsbCggZGVmZXJyZWQsIGRlZmVycmVkICk7XHJcblx0fVxyXG5cclxuXHRyZXR1cm4gZGVmZXJyZWQ7XHJcbn07XHJcblxyXG5cclxucmV0dXJuIGpRdWVyeTtcclxufSApO1xyXG5cbn0uY2FsbCh3aW5kb3cpKTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3RlbXAvZXh0ZXJuYWwvanF1ZXJ5L3NjcmlwdHMvanF1ZXJ5LW1pZ3JhdGUuanNcbi8vIG1vZHVsZSBpZCA9IDFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzJfXztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCB7XCJyb290XCI6XCJCYWNrYm9uZVwiLFwiY29tbW9uanNcIjpcImJhY2tib25lXCIsXCJjb21tb25qczJcIjpcImJhY2tib25lXCIsXCJhbWRcIjpcImJhY2tib25lXCJ9XG4vLyBtb2R1bGUgaWQgPSAyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV8zX187XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwge1wicm9vdFwiOlwiQ0RQXCIsXCJjb21tb25qc1wiOlwiY2RwLmkxOG5cIixcImNvbW1vbmpzMlwiOlwiY2RwLmkxOG5cIixcImFtZFwiOlwiY2RwLmkxOG5cIn1cbi8vIG1vZHVsZSBpZCA9IDNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzRfXztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCB7XCJyb290XCI6XCJDRFBcIixcImNvbW1vbmpzXCI6XCJjZHAucHJvbWlzZVwiLFwiY29tbW9uanMyXCI6XCJjZHAucHJvbWlzZVwiLFwiYW1kXCI6XCJjZHAucHJvbWlzZVwifVxuLy8gbW9kdWxlIGlkID0gNFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIvKiB0c2xpbnQ6ZGlzYWJsZTptYXgtbGluZS1sZW5ndGggKi9cclxuXHJcbm5hbWVzcGFjZSBDRFAuRnJhbWV3b3JrIHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIHBsYXRmb3JtIOWIpOWumuOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICogW+WPguiAg10gaHR0cHM6Ly93M2cuanAvYmxvZy90b29scy9qc19icm93c2VyX3NuaWZmaW5nXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBsZXQgUGxhdGZvcm0gPSAoKCkgPT4ge1xyXG4gICAgICAgIGxldCB1YSA9IG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKTtcclxuXHJcbiAgICAgICAgbGV0IG1ham9yVmVyc2lvbiA9IGZ1bmN0aW9uIChicm93c2VyOiBzdHJpbmcpOiBudW1iZXIge1xyXG4gICAgICAgICAgICBsZXQgdmVyc2lvbiA9IHVhLm1hdGNoKG5ldyBSZWdFeHAoXCIoXCIgKyBicm93c2VyICsgXCIpKCB8LykoWzAtOV0rKVwiKSk7XHJcbiAgICAgICAgICAgIGlmICghdmVyc2lvbiB8fCB2ZXJzaW9uLmxlbmd0aCA8IDQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBwYXJzZUludCh2ZXJzaW9uWzNdLCAxMCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgbHRJRTY6IHR5cGVvZiB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciA9PT0gXCJ1bmRlZmluZWRcIiAmJiB0eXBlb2YgKDxhbnk+ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KS5zdHlsZS5tYXhIZWlnaHQgPT09IFwidW5kZWZpbmVkXCIsXHJcbiAgICAgICAgICAgIGx0SUU3OiB0eXBlb2Ygd2luZG93LmFkZEV2ZW50TGlzdGVuZXIgPT09IFwidW5kZWZpbmVkXCIgJiYgdHlwZW9mIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwgPT09IFwidW5kZWZpbmVkXCIsXHJcbiAgICAgICAgICAgIGx0SUU4OiB0eXBlb2Ygd2luZG93LmFkZEV2ZW50TGlzdGVuZXIgPT09IFwidW5kZWZpbmVkXCIgJiYgdHlwZW9mIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUgPT09IFwidW5kZWZpbmVkXCIsXHJcbiAgICAgICAgICAgIGx0SUU5OiAoPGFueT5kb2N1bWVudCkudW5pcXVlSUQgJiYgdHlwZW9mIHdpbmRvdy5tYXRjaE1lZGlhID09PSBcInVuZGVmaW5lZFwiLFxyXG4gICAgICAgICAgICBndElFMTA6ICg8YW55PmRvY3VtZW50KS51bmlxdWVJRCAmJiB3aW5kb3cubWF0Y2hNZWRpYSxcclxuICAgICAgICAgICAgVHJpZGVudDogKDxhbnk+ZG9jdW1lbnQpLnVuaXF1ZUlELFxyXG4gICAgICAgICAgICBHZWNrbzogXCJNb3pBcHBlYXJhbmNlXCIgaW4gKDxhbnk+ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KS5zdHlsZSxcclxuICAgICAgICAgICAgUHJlc3RvOiBnbG9iYWwub3BlcmEsXHJcbiAgICAgICAgICAgIEJsaW5rOiBnbG9iYWwuY2hyb21lLFxyXG4gICAgICAgICAgICBXZWJraXQ6IHR5cGVvZiBnbG9iYWwuY2hyb21lID09PSBcInVuZGVmaW5lZFwiICYmIFwiV2Via2l0QXBwZWFyYW5jZVwiIGluICg8YW55PmRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkuc3R5bGUsXHJcbiAgICAgICAgICAgIFRvdWNoOiB0eXBlb2YgZ2xvYmFsLm9udG91Y2hzdGFydCAhPT0gXCJ1bmRlZmluZWRcIixcclxuICAgICAgICAgICAgTW9iaWxlOiB0eXBlb2YgZ2xvYmFsLm9yaWVudGF0aW9uICE9PSBcInVuZGVmaW5lZFwiLFxyXG4gICAgICAgICAgICBsdEFkNF80OiB0eXBlb2YgZ2xvYmFsLm9yaWVudGF0aW9uICE9PSBcInVuZGVmaW5lZFwiICYmICh0eXBlb2YgZ2xvYmFsLkV2ZW50U291cmNlID09PSBcInVuZGVmaW5lZFwiIHx8IDMwID4gbWFqb3JWZXJzaW9uKFwiY2hyb21lXCIpKSxcclxuICAgICAgICAgICAgUG9pbnRlcjogZ2xvYmFsLm5hdmlnYXRvci5wb2ludGVyRW5hYmxlZCxcclxuICAgICAgICAgICAgTVNQb25pdGVyOiBnbG9iYWwubmF2aWdhdG9yLm1zUG9pbnRlckVuYWJsZWQsXHJcbiAgICAgICAgICAgIEFuZHJvaWQ6ICh1YS5pbmRleE9mKFwiYW5kcm9pZFwiKSAhPT0gLTEpLFxyXG4gICAgICAgICAgICBpT1M6ICh1YS5pbmRleE9mKFwiaXBob25lXCIpICE9PSAtMSB8fCB1YS5pbmRleE9mKFwiaXBhZFwiKSAhPT0gLTEgfHwgdWEuaW5kZXhPZihcImlwb2RcIikgIT09IC0xKSxcclxuICAgICAgICB9O1xyXG4gICAgfSkoKTtcclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gY2RwOi8vL0NEUC9GcmFtZXdvcmsvUGxhdGZvcm0udHMiLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vLi4vLi4vZXh0ZXJuYWwvaW5jbHVkZS9qcXVlcnkuZC50c1wiIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi8uLi8uLi9leHRlcm5hbC9pbmNsdWRlL3VuZGVyc2NvcmUuZC50c1wiIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJQbGF0Zm9ybS50c1wiIC8+XHJcblxyXG4vKiB0c2xpbnQ6ZGlzYWJsZTp0eXBlZGVmICovXHJcblxyXG5uYW1lc3BhY2UgQ0RQLkZyYW1ld29yayB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiB2Y2xpY2sgcGF0Y2hcclxuICAgICAqL1xyXG4gICAgbGV0IF92Y2xpY2tQYXRjaCA9ICgpOiB2b2lkID0+IHtcclxuICAgICAgICBsZXQganF1ZXJ5X29uID0gJC5mbi5vbixcclxuICAgICAgICAgICAganF1ZXJ5X29mZiA9ICQuZm4ub2ZmO1xyXG5cclxuICAgICAgICBsZXQgY3VzdG9tX29uID0gZnVuY3Rpb24gKHR5cGVzLCBzZWxlY3RvciwgZGF0YSwgZm4sIC8qSU5URVJOQUwqLyBvbmUpIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiB0eXBlcyA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgICAgICAgICAgdHlwZXMgPSB0eXBlcy5yZXBsYWNlKC92Y2xpY2svZywgXCJjbGlja1wiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gKDxhbnk+Xy5iaW5kKGpxdWVyeV9vbiwgdGhpcykpKHR5cGVzLCBzZWxlY3RvciwgZGF0YSwgZm4sIG9uZSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgbGV0IGN1c3RvbV9vZmYgPSBmdW5jdGlvbiAodHlwZXMsIHNlbGVjdG9yLCBmbikge1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHR5cGVzID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgICAgICAgICAgICB0eXBlcyA9IHR5cGVzLnJlcGxhY2UoL3ZjbGljay9nLCBcImNsaWNrXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiAoPGFueT5fLmJpbmQoanF1ZXJ5X29mZiwgdGhpcykpKHR5cGVzLCBzZWxlY3RvciwgZm4pO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIHJlcGxhY2UgZnVuY3Rpb25zLlxyXG4gICAgICAgICQuZm4ub24gPSBjdXN0b21fb247XHJcbiAgICAgICAgJC5mbi5vZmYgPSBjdXN0b21fb2ZmO1xyXG4gICAgfTtcclxuXHJcblxyXG4gICAgLy9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fLy9cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAY2xhc3MgUGF0Y2hcclxuICAgICAqIEBicmllZiBwYXRjaCBjbGFzcyBmb3IganFtIGZyYW1ld29yay5cclxuICAgICAqICAgICAgIFtyZXZpZXddIHZjbGljayDjga7jg5Hjg4Pjg4HjgpLlvZPjgabjgovjgZPjgajjgYzjgo/jgYvjgovjgajjgojjgYRcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGNsYXNzIFBhdGNoIHtcclxuXHJcbiAgICAgICAgc3RhdGljIHNfdmNsaWNrRXZlbnQgPSBcInZjbGlja1wiO1xyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIHB1YmxpYyBzdGF0aWMgbWV0aG9kc1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogQXBwbHkgcGF0Y2guXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIOODkeODg+ODgeOBrumBqeeUqFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYXBwbHkoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmICghUGF0Y2guaXNTdXBwb3J0ZWRWY2xpY2soKSkge1xyXG4gICAgICAgICAgICAgICAgX3ZjbGlja1BhdGNoKCk7XHJcbiAgICAgICAgICAgICAgICBQYXRjaC5zX3ZjbGlja0V2ZW50ID0gXCJjbGlja1wiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogaWYgXCJ2Y2xpY2tcIiBldmVudCBpcyB1bnN1cHBvcnRlZCwgcmV0dXJucyBmYWxzZS4gZXg6IEFuZHJvaWQgNC40IChLaXRrYXQpXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIFwidmNsaWNrXCIgZXZlbnQg44GM6Z2e44K144Od44O844OI44Gn44GC44KLIHBsYXRmb3JtIChLaXRLYXQpIOOBryBmYWxzZSDjgpLov5TjgZnjgIJcclxuICAgICAgICAgKiBqUU0g44GuIHZlcnNpb24gdXAg44Gr44KI44KK44CB6Kej5rG644GV44KM44KL5aC05ZCI44Gv54Sh5Yq544GL44GZ44KL44CCXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpc1N1cHBvcnRlZFZjbGljaygpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgLy8gZm9yIEFuZHJvaWQgNC40KyAoS2l0a2F0IO+9nilcclxuICAgICAgICAgICAgaWYgKFBsYXRmb3JtLkFuZHJvaWQgJiYgIVBsYXRmb3JtLmx0QWQ0XzQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGNkcDovLy9DRFAvRnJhbWV3b3JrL1BhdGNoLnRzIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uLy4uLy4uL2V4dGVybmFsL2luY2x1ZGUvanF1ZXJ5LmQudHNcIiAvPlxyXG5cclxubmFtZXNwYWNlIENEUC5GcmFtZXdvcmsge1xyXG4gICAgLyoqXHJcbiAgICAgKiBAZW51bSBPcmllbnRhdGlvblxyXG4gICAgICovXHJcbiAgICBleHBvcnQgZW51bSBPcmllbnRhdGlvbiB7XHJcbiAgICAgICAgUE9SVFJBSVQgPSAwLFxyXG4gICAgICAgIExBTkRTQ0FQRSA9IDEsXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgKiBHZXQgT3JpZW50YXRpb24gZW51bSBjb2RlXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybiB7TnVtYmVyfSBPcmllbnRhdGlvbiBDb2RlLlxyXG4gICAgICpcclxuICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgKiBPcmllbnRhdGlvbiDjga7lj5blvpdcclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9IE9yaWVudGF0aW9uIENvZGUuXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBnZXRPcmllbnRhdGlvbigpOiBPcmllbnRhdGlvbiB7XHJcbiAgICAgICAgbGV0ICR3aW5kb3cgPSAkKHdpbmRvdyk7XHJcbiAgICAgICAgcmV0dXJuICgkd2luZG93LndpZHRoKCkgPCAkd2luZG93LmhlaWdodCgpKSA/IE9yaWVudGF0aW9uLlBPUlRSQUlUIDogT3JpZW50YXRpb24uTEFORFNDQVBFO1xyXG4gICAgfVxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBjZHA6Ly8vQ0RQL0ZyYW1ld29yay9PcmllbnRhdGlvbi50cyIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi8uLi8uLi9leHRlcm5hbC9pbmNsdWRlL2pxdWVyeS5kLnRzXCIgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uLy4uLy4uL2V4dGVybmFsL2luY2x1ZGUvYmFja2JvbmUuZC50c1wiIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi8uLi8uLi9leHRlcm5hbC9pbmNsdWRlL2kxOG5leHQuZC50c1wiIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJPcmllbnRhdGlvbi50c1wiIC8+XHJcblxyXG5uYW1lc3BhY2UgQ0RQLkZyYW1ld29yayB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgKiBAdHlwZSAgUGFnZVRyYW5zaXRpb25EaXJlY3Rpb25cclxuICAgICAqIEBicmllZiBkaXJlY3Rpb24gZGVmaW5pdGlvbnMuXHJcbiAgICAgKlxyXG4gICAgICogXFx+amFwYW5lc2VcclxuICAgICAqIEB0eXBlICBQYWdlVHJhbnNpdGlvbkRpcmVjdGlvblxyXG4gICAgICogQGJyaWVmIOmBt+enu+aWueWQkeOBruWumue+qS5cclxuICAgICAqL1xyXG4gICAgZXhwb3J0IHR5cGUgUGFnZVRyYW5zaXRpb25EaXJlY3Rpb24gPSBcImJhY2tcIiB8IFwiZm9yd2FyZFwiIHwgXCJzYW1lXCIgfCBcInVua25vd25cIjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAqIEBpbnRlcmZhY2UgU2hvd0V2ZW50RGF0YVxyXG4gICAgICogQGJyaWVmICAgICBBcmd1bWVudCBvZiBvblNob3cvb25CZWZvcmVTaG93IG1ldGhvZC5cclxuICAgICAqXHJcbiAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICogQGludGVyZmFjZSBTaG93RXZlbnREYXRhXHJcbiAgICAgKiBAYnJpZWYgICAgIG9uU2hvdy9vbkJlZm9yZVNob3cg44Gn5rih44GV44KM44KL5byV5pWwXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgU2hvd0V2ZW50RGF0YSB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIEEgalF1ZXJ5IGNvbGxlY3Rpb24gb2JqZWN0IHRoYXQgY29udGFpbnMgdGhlIHNvdXJjZSBwYWdlIERPTSBlbGVtZW50LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiDpgbfnp7vliY3jga7nlLvpnaLmg4XloLHjgpLmoLzntI1cclxuICAgICAgICAgKi9cclxuICAgICAgICBwcmV2UGFnZTogSlF1ZXJ5O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogQSBqUXVlcnkgY29sbGVjdGlvbiBvYmplY3QgdGhhdCBjb250YWlucyB0aGUgZGVzdGluYXRpb24gcGFnZSBET00gZWxlbWVudC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICog6YG356e75b6M44Gu55S76Z2i5oOF5aCx44KS5qC857SNXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdG9QYWdlOiBKUXVlcnk7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBwYWdlIHRyYW5zaXRpb24gZGlyZWN0aW9uLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiDpgbfnp7vmlrnlkJHjgpLmoLzntI1cclxuICAgICAgICAgKi9cclxuICAgICAgICBkaXJlY3Rpb246IFBhZ2VUcmFuc2l0aW9uRGlyZWN0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICogQGludGVyZmFjZSBIaWRlRXZlbnREYXRhXHJcbiAgICAgKiBAYnJpZWYgICAgIEFyZ3VtZW50IG9mIG9uSGlkZS9vbkJlZm9yZUhpZGUgbWV0aG9kLlxyXG4gICAgICpcclxuICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgKiBAaW50ZXJmYWNlIEhpZGVFdmVudERhdGFcclxuICAgICAqIEBicmllZiAgICAgb25IaWRlL29uQmVmb3JlSGlkZSDjgafmuKHjgZXjgozjgovlvJXmlbBcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBIaWRlRXZlbnREYXRhIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogQSBqUXVlcnkgY29sbGVjdGlvbiBvYmplY3QgdGhhdCBjb250YWlucyB0aGUgcGFnZSBET00gZWxlbWVudCB0byB3aGljaCB3ZSBqdXN0IHRyYW5zaXRpb25lZC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICog44OI44Op44Oz44K444K344On44Oz5a6M5LqG44GX44Gf55S76Z2i5oOF5aCx44KS5qC857SNXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgbmV4dFBhZ2U6IEpRdWVyeTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIEEgalF1ZXJ5IGNvbGxlY3Rpb24gb2JqZWN0IHRoYXQgY29udGFpbnMgdGhlIGRlc3RpbmF0aW9uIHBhZ2UgRE9NIGVsZW1lbnQuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIOmBt+enu+W+jOOBrueUu+mdouaDheWgseOCkuagvOe0jVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRvUGFnZTogSlF1ZXJ5O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogQSBqUXVlcnkgY29sbGVjdGlvbiBvYmplY3QgdGhhdCBjb250YWlucyB0aGUgZnJvbSBwYWdlIERPTSBlbGVtZW50LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiDpgbfnp7vliY3jga7nlLvpnaLmg4XloLHjgpLmoLzntI1cclxuICAgICAgICAgKi9cclxuICAgICAgICBwcmV2UGFnZTogSlF1ZXJ5O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogcGFnZSB0cmFuc2l0aW9uIGRpcmVjdGlvbi5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICog6YG356e75pa55ZCR44KS5qC857SNXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZGlyZWN0aW9uOiBQYWdlVHJhbnNpdGlvbkRpcmVjdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAqIEBpbnRlcmZhY2UgSW50ZW50XHJcbiAgICAgKiBAYnJpZWYgICAgIERlbGVnYXRlIGludGVyZmFjZSBvZiBhZGRpdGlvbmFsIGRhdGEgZm9yIFBhZ2UgY2xhc3MuXHJcbiAgICAgKiAgICAgICAgICAgIENsaWVudCBjYW4gZGVmaW5lIGV4dGVuZCB0eXBlIGZyb20gaXQuXHJcbiAgICAgKlxyXG4gICAgICogXFx+amFwYW5lc2VcclxuICAgICAqIEBpbnRlcmZhY2UgSW50ZW50XHJcbiAgICAgKiBAYnJpZWYgICAgIOS7u+aEj+OBruaDheWgseOCkuagvOe0jeOBmeOCi+OCpOODs+OCv+ODvOODleOCp+OCpOOCuVxyXG4gICAgICogICAgICAgICAgICBQYWdlIOOBq+a4oeOBleOCjOOCi+ODh+ODvOOCv+OAguaLoeW8teOBl+OBpuS9v+eUqOWPr+iDvVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIEludGVudCB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIGFueSBwYXJhbWV0ZXIuXHJcbiAgICAgICAgICogcGFyYW1zW1wicXVlcnlQYXJhbXNcIl0gaXMgdXNlZCBieSBmcmFtZXdvcmsgZm9yIHF1ZXJ5IHBhcmFtZXRlcnMuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIOS7u+aEj+OBruODkeODqeODoeODvOOCv1xyXG4gICAgICAgICAqIHBhcmFtc1tcInF1ZXJ5UGFyYW1zXCJdIOOBq+OBr+OAgXF1ZXJ5IHBhcmFtZXRlciDjgYzjg5Xjg6zjg7zjg6Djg6/jg7zjgq/jgavjgojjgormoLzntI3jgZXjgozjgovjgIJcclxuICAgICAgICAgKi9cclxuICAgICAgICBwYXJhbXM/OiBPYmplY3Q7XHJcbiAgICAgICAgLy8hIGFueVxyXG4gICAgICAgIFtrZXk6IHN0cmluZ106IGFueTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAqIEBpbnRlcmZhY2UgUGFnZVN0YWNrXHJcbiAgICAgKiBAYnJpZWYgQXJndW1lbnRzIGludGVyZmFjZSBvZiBSb3V0ZXIucmVnaXN0ZXJQYWdlU3RhY2soKSBtZXRob2QuXHJcbiAgICAgKlxyXG4gICAgICogXFx+amFwYW5lc2VcclxuICAgICAqIEBpbnRlcmZhY2UgUGFnZVN0YWNrXHJcbiAgICAgKiBAYnJpZWYgUm91dGVyLnJlZ2lzdGVyUGFnZVN0YWNrKCkg44Gr5oyH5a6a44GZ44KL44Kk44Oz44K/44O844OV44Kn44Kk44K5XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgUGFnZVN0YWNrIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogcm91dGUgc3RyaW5nLCBpdCBjYW4gYmUgcmVndWxhciBleHByZXNzaW9uLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiDjg6vjg7zjg4bjgqPjg7PjgrDmloflrZfliJcgLyDmraPopo/ooajnj75cclxuICAgICAgICAgKi9cclxuICAgICAgICByb3V0ZTogc3RyaW5nO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogcGFnZSB0aXRsZSBzdHJpbmcuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIOODmuODvOOCuOOCv+OCpOODiOODq+aWh+Wtl+WIl1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRpdGxlPzogc3RyaW5nO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogcGFnZSB0cmFuc2l0aW9uIHN0cmluZy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICog6YG356e744OI44Op44Oz44K444K344On44Oz5paH5a2X5YiXXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdHJhbnNpdGlvbj86IHN0cmluZztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAqIEBpbnRlcmZhY2UgU3ViRmxvd1BhcmFtXHJcbiAgICAgKiBAYnJpZWYgaW50ZXJmYWNlIG9mIFJvdXRlcidzIFN1YiBGbG93IHBhcmFtZW50ZXJzLlxyXG4gICAgICpcclxuICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgKiBAaW50ZXJmYWNlIFN1YkZsb3dQYXJhbVxyXG4gICAgICogQGJyaWVmIFJvdXRlciDjga4gU3ViIEZsb3cg44Gr5oyH5a6a44GZ44KL44OR44Op44Oh44O844K/44Kk44Oz44K/44O844OV44Kn44Kk44K5XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgU3ViRmxvd1BhcmFtIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogc2V0IHN1YiBmbG93IG9wZXJhdGlvbiBbYmVnaW4gfCBlbmRdLlxyXG4gICAgICAgICAqIFdoZW4gXCJiZWdpblwiIGlzIHNldCBhbmQgdGhlbiBcImVuZFwiIGlzIGNhbGxlZCwgaXQgY2FuIHJldHVybiB0byB0aGUgVVJMIHNwZWNpZmllZCBhcyBcImJhc2VcIiB3aXRoIHRyZWF0aW5nIGJyb3dzZXIgaGlzdG9yeS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICogU3ViIEZsb3cg5Yem55CG44KS5oyH5a6aIFtiZWdpbiB8IGVuZF1cclxuICAgICAgICAgKiBcImJlZ2luXCIg44GM5oyH5a6a44GV44KM44CB5qyh44GrIFwiZW5kXCIg44KS5ZG844G244Go44GN44CBXCJiYXNlXCIg44Gr5oyH5a6a44GX44GfIHVybCDjgb7jgafjg5bjg6njgqbjgrblsaXmrbTjgpLjgZ/jganjgovjgIJcclxuICAgICAgICAgKi9cclxuICAgICAgICBvcGVyYXRpb246IFwiYmVnaW5cIiB8IFwiZW5kXCI7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBQYWdlIFVSTC9IYXNoIHVzZWQgYXMgdGhlIHJlZmVyZW5jZSBwb2ludCBvZiBTdWIgRmxvdyBpcyBzcGVjaWZpZWQuXHJcbiAgICAgICAgICogV2hlbiBTdWIgRmxvdyBvcGVyYXRpb24gPT0gXCJlbmRcIiBpcyBzcGVjaWZpZWQsIFVSTCBzcGVjaWZpZWQgYXMgbmF2aWdhdGUgaXMgZGlzcmVnYXJkZWQuXHJcbiAgICAgICAgICogSWYgbm90IHNldCwgdGhpcyBwYXJhbWV0ZXIgaXMgYXNzaWduZWQgdGhlIHBhZ2UgY2FsbGVkIFJvdXRlci5uYXZpZ2F0ZSgpIHdpdGggc3ViRmxvdyBwcm9wZXJ0eS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICogU3ViIEZsb3cg44Gu5Z+654K544Go44Gq44KL44Oa44O844K4IFVSTC9IYXNoIOOCkuaMh+WumuOAglxyXG4gICAgICAgICAqIFN1YiBGbG93IG9wZXJhdGlvbiA9PSBcImVuZFwiIOOBjOaMh+WumuOBleOCjOOCi+WgtOWQiOOBr+OAgW5hdmlnYXRlIOOBq+aMh+WumuOBleOCjOOCiyBVUkwg44Gv54Sh6KaW44GV44KM44KL44CCXHJcbiAgICAgICAgICog5oyH5a6a44GM44Gq44GE5aC05ZCI44GvIFJvdXRlci5uYXZpZ2F0ZSgpIOaZguOBqyBzdWJGbG93IOOCkuaMh+WumuOBruWRvOOBs+WHuuOBl+WFg+OBjOOCouOCteOCpOODs+OBleOCjOOCi+OAglxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGRlc3RCYXNlPzogc3RyaW5nO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogUGFnZVN0YWNrIGZyb20gXCJkZXN0QmFzZVwiIHdoaWNoIGNoYW5nZXMgcGFnZSBhdCB0aGUgdGltZSBvZiB0aGUgZW5kIG9mIFN1YiBGbG93IGlzIHNwZWNpZmllZC5cclxuICAgICAgICAgKiBXaGVuIHRoaXMgcGFyYW1ldGVyIGlzIG5vIHNldCwgaXQgY2hhbmdlcyBwYWdlIHRvIFwiZGVzdEJhc2VcIi5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICogU3ViIEZsb3cg57WC5LqG5pmC44Gr6YG356e744GZ44KLIFwiZGVzdEJhc2VcIiDjgYvjgonjga4gUGFnZVN0YWNrIOOCkuaMh+WumuOAguaMh+WumuOBjOOBquOBhOWgtOWQiOOBr+OAgVwiZGVzdEJhc2VcIiDjgavpgbfnp7vjgZnjgovjgIJcclxuICAgICAgICAgKi9cclxuICAgICAgICBkZXN0U3RhY2tzPzogUGFnZVN0YWNrW107XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgKiBAaW50ZXJmYWNlIFJvdXRlck9wdGlvbnNcclxuICAgICAqIEBicmllZiBPcHRpb25zIGludGVyZmFjZSBvZiBSb3V0ZXIuc3RhcnQoKSBtZXRob2QuXHJcbiAgICAgKlxyXG4gICAgICogXFx+amFwYW5lc2VcclxuICAgICAqIEBpbnRlcmZhY2UgUm91dGVyT3B0aW9uc1xyXG4gICAgICogQGJyaWVmIFJvdXRlci5zdGFydCgpIOOBq+aMh+WumuOBmeOCi+OCquODl+OCt+ODp+ODs+OCpOODs+OCv+ODvOODleOCp+OCpOOCuVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIFJvdXRlck9wdGlvbnMgZXh0ZW5kcyBCYWNrYm9uZS5IaXN0b3J5T3B0aW9ucyB7IH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAqIEBpbnRlcmZhY2UgTmF2aWdhdGVPcHRpb25zXHJcbiAgICAgKiBAYnJpZWYgT3B0aW9ucyBpbnRlcmZhY2Ugb2YgUm91dGVyLm5hdmlnYXRlKCkgbWV0aG9kLlxyXG4gICAgICpcclxuICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgKiBAaW50ZXJmYWNlIE5hdmlnYXRlT3B0aW9uc1xyXG4gICAgICogQGJyaWVmIFJvdXRlci5uYXZpZ2F0ZSgpIOOBq+aMh+WumuOBmeOCi+OCquODl+OCt+ODp+ODs+OCpOODs+OCv+ODvOODleOCp+OCpOOCuVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIE5hdmlnYXRlT3B0aW9ucyBleHRlbmRzIEJhY2tib25lLk5hdmlnYXRlT3B0aW9ucyB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIG92ZXJ3cml0ZTogdHJpZ2dlciBkZWZhdWx0IHZhbHVlIGlzIHRydWUuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIHRyaWdnZXIg44Gu5pei5a6a5YCk44GvIHRydWUg44Go44GX44Gm5omx44GGXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdHJpZ2dlcj86IGJvb2xlYW47XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBTdWJGbG93UGFyYW0gaXMgc3BlY2lmaWVkIHdoZW4gcGVyZm9ybWluZyBTdWIgRmxvdyBwcm9jZXNzaW5nLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiBTdWIgRmxvdyDlh6bnkIbjgpLooYzjgYbloLTlkIjjgIFTdWJGbG93UGFyYW0g44KS5oyH5a6aXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgc3ViRmxvdz86IFN1YkZsb3dQYXJhbTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIHNldCBiYWNrIG9wZXJhdGlvbiBkZXN0aW5hdGlvbi5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICogW+aIu+OCi10g5pmC44Gr6YG356e744GZ44KL44Oa44O844K4IFVSTCDjgpLmjIflrppcclxuICAgICAgICAgKi9cclxuICAgICAgICBiYWNrRGVzdGluYXRpb24/OiBzdHJpbmc7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBubyBoYXNoIGNoYW5nZSBmbGFnIGluIG5hdmlnYXRlIG9wZXJhdGlvbi5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICogTmF2aWdhdGUg5pmC44GrIEhhc2gg5aSJ5pu044GX44Gq44GE44OV44Op44KwXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgbm9IYXNoQ2hhbmdlPzogYm9vbGVhbjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIGFkZGl0aW9uYWwgaW5mbyBpbnRlcmZhY2UuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIOS7mOWKoOaDheWgseOCpOODs+OCv+ODvOODleOCp+OCpOOCuVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGludGVudD86IEludGVudDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAqIEBpbnRlcmZhY2UgSU9yaWVudGF0aW9uQ2hhbmdlZExpc3RlbmVyXHJcbiAgICAgKiBAYnJpZWYgSGFuZGxlIG9yaWVudGF0aW9uIGNoYW5nZWQgbm90aWZ5IGludGVyZmFjZS5cclxuICAgICAqXHJcbiAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICogQGludGVyZmFjZSBJT3JpZW50YXRpb25DaGFuZ2VkTGlzdGVuZXJcclxuICAgICAqIEBicmllZiBPcmllbnRhdGlvbiDjga7lpInmm7TmpJznn6XjgpLlj5fkv6HjgZnjgovjgqTjg7Pjgr/jg7zjg5XjgqfjgqTjgrlcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJT3JpZW50YXRpb25DaGFuZ2VkTGlzdGVuZXIge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBSZWNlaXZlZCBvcmllbnRhdGlvbiBjb2RlIHdoZW4gdGhhdCBpcyBjaGFuZ2VkLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIG5ld09yaWVudGF0aW9uIHtPcmllbnRhdGlvbn0gW2luXSBuZXcgb3JpZW50YXRpb24gY29kZS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICogT3JpZW50YXRpb24g44Gu5aSJ5pu044KS5Y+X5L+hXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gbmV3T3JpZW50YXRpb24ge09yaWVudGF0aW9ufSBbaW5dIG5ldyBvcmllbnRhdGlvbiBjb2RlLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9uT3JpZW50YXRpb25DaGFuZ2VkKG5ld09yaWVudGF0aW9uOiBPcmllbnRhdGlvbik6IHZvaWQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgKiBAaW50ZXJmYWNlIElCYWNrQnV0dG9uRXZlbnRMaXN0ZW5lclxyXG4gICAgICogQGJyaWVmIEhhbmRsZSBIL1cgYmFjayBidXR0b24gZXZlbnQgbm90aWZ5IGludGVyZmFjZS5cclxuICAgICAqXHJcbiAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICogQGludGVyZmFjZSBJQmFja0J1dHRvbkV2ZW50TGlzdGVuZXJcclxuICAgICAqIEBicmllZiBIL1cgQmFjayBidXR0b24g44GuIGV2ZW50IOOCkuWPl+S/oeOBmeOCi+OCpOODs+OCv+ODvOODleOCp+OCpOOCuVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElCYWNrQnV0dG9uRXZlbnRMaXN0ZW5lciB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIFJlY2VpdmVkIEgvVyBCYWNrIEJ1dHRvbiBldmVudFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtICBldmVudCB7SlF1ZXJ5RXZlbnRPYmplY3R9IFtpbl0gZXZlbnQgb2JqZWN0XHJcbiAgICAgICAgICogQHJldHVybiB7Qm9vbGVhbn0gdHJ1ZTogY29udGludWUgZGVmYXVsdCBvcGVyYXRpb24gLyBmYWxzZTogc3RvcCBkZWZhdWx0IG9wZXJhdGlvblxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiBIL1cgQmFjayBCdXR0b24g44OP44Oz44OJ44OpXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gIGV2ZW50IHtKUXVlcnlFdmVudE9iamVjdH0gW2luXSBldmVudCBvYmplY3RcclxuICAgICAgICAgKiBAcmV0dXJuIHtCb29sZWFufSB0cnVlOiDml6Llrprjga7lh6bnkIbjgpLooYzjgo/jgarjgYQgLyBmYWxzZTog5pei5a6a44Gu5Yem55CG44KS6KGM44GGXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb25IYXJkd2FyZUJhY2tCdXR0b24oZXZlbnQ/OiBKUXVlcnlFdmVudE9iamVjdCk6IGJvb2xlYW47XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgKiBAaW50ZXJmYWNlIElDb21tYW5kTGlzdGVuZXJcclxuICAgICAqIEBicmllZiBGcmFtZXdvcmsgZ2VuZXJpYyBjb21tYW5kIGNhbGxiYWNrIGludGVyZmFjZS5cclxuICAgICAqXHJcbiAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICogQGludGVyZmFjZSBJQ29tbWFuZExpc3RlbmVyXHJcbiAgICAgKiBAYnJpZWYg5rGO55So44Kz44Oe44Oz44OJ44Kz44O844Or44OQ44OD44Kv44Kk44Oz44K/44O844OV44Kn44Kk44K5XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSUNvbW1hbmRMaXN0ZW5lciB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIFJlY2VpdmVkIGdlbmVyaWMgY29tbWFuZFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtICBldmVudCB7SlF1ZXJ5RXZlbnRPYmplY3R9IFtpbl0gZXZlbnQgb2JqZWN0XHJcbiAgICAgICAgICogQHBhcmFtICBldmVudCB7a2luZH0gICAgICAgICAgICAgIFtpbl0gY29tbWFuZCBraW5kIHN0cmluZ1xyXG4gICAgICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IHRydWU6IGNvbnRpbnVlIGRlZmF1bHQgb3BlcmF0aW9uIC8gZmFsc2U6IHN0b3AgZGVmYXVsdCBvcGVyYXRpb25cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICog5rGO55So44Kz44Oe44Oz44OJ44KS5Y+X5L+hXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gIGV2ZW50IHtKUXVlcnlFdmVudE9iamVjdH0gW2luXSBldmVudCBvYmplY3RcclxuICAgICAgICAgKiBAcGFyYW0gIGV2ZW50IHtraW5kfSAgICAgICAgICAgICAgW2luXSBjb21tYW5kIGtpbmQgc3RyaW5nXHJcbiAgICAgICAgICogQHJldHVybiB7Qm9vbGVhbn0gdHJ1ZTog5pei5a6a44Gu5Yem55CG44KS6KGM44KP44Gq44GEIC8gZmFsc2U6IOaXouWumuOBruWHpueQhuOCkuihjOOBhlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9uQ29tbWFuZChldmVudD86IEpRdWVyeUV2ZW50T2JqZWN0LCBraW5kPzogc3RyaW5nKTogYm9vbGVhbjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAqIEBpbnRlcmZhY2UgUGFnZUNvbnN0cnVjdE9wdGlvbnNcclxuICAgICAqIEBicmllZiBJbnRlcmZhY2UgY2xhc3MgZm9yIHN0b3JpbmcgcmVnaXN0cmF0aW9uIGluZm8sIHVzaW5nIGJ5IFJvdXRlci5yZWdpc3RlcigpIG1ldGhvZC5cclxuICAgICAqXHJcbiAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICogQGludGVyZmFjZSBQYWdlQ29uc3RydWN0T3B0aW9uc1xyXG4gICAgICogQGJyaWVmIFJvdXRlci5yZWdpc3RlcigpIOOBp+aMh+WumuOBmeOCi+eZu+mMsuaDheWgseOCkuagvOe0jeOBmeOCi+OCpOODs+OCv+ODvOODleOCp+OCpOOCueOCr+ODqeOCuVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIFBhZ2VDb25zdHJ1Y3RPcHRpb25zIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogcm91dGUgaWRlbnRpZmllclxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiByb3V0ZSDorZjliKXlrZBcclxuICAgICAgICAgKi9cclxuICAgICAgICByb3V0ZT86IHN0cmluZztcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIGNhbGxiYWNrIG9uIGNoYW5naW5nIHJvdXRlLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiByb3V0ZSDlpInmm7TmmYLjgavlkbzjgbPlh7rjgZXjgozjgovjgrPjg7zjg6vjg5Djg4Pjgq9cclxuICAgICAgICAgKi9cclxuICAgICAgICBjYWxsYmFjaz86ICguLi5hcmdzOiBhbnlbXSkgPT4gYm9vbGVhbjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIHNldCBcInRydWVcIiBpZiBhcHBsaWNhdGlvbidzIHRvcCB2aWV3LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiDjgqLjg5fjg6rjgrHjg7zjgrfjg6fjg7Pjga4gdG9wIOeUu+mdouOBp+OBguOCi+WgtOWQiCB0cnVlIOOCkuaMh+WumlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRvcD86IGJvb2xlYW47XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBUaGUgaW5zdGFuY2Ugb2YgUGFnZSBldmVudCBsaXN0ZW5lciBpbnN0YW5jZS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICogUGFnZSDjgqTjg5njg7Pjg4jjgpLlj5fkv6HjgZnjgovjg6rjgrnjg4rjg7zjgqTjg7Pjgrnjgr/jg7PjgrlcclxuICAgICAgICAgKiDmqZ/og73mi6HlvLXmmYLjgavmjIflrprjgZnjgotcclxuICAgICAgICAgKi9cclxuICAgICAgICBvd25lcj86IElQYWdlO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogaW50ZW50IGluc3RhbmNlIGlzIGNvbW11bmljYXRlZCBuZXh0IHBhZ2Ugd2hlbiBcImludGVudFwiIGlzbid0IGRlc2lnbmF0ZWQgc3BlY2lmaWNhbGx5IGluIG5hdmlnYXRpb24uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIOaYjuekuueahOOBqyBpbnRlbnQg44GM5oyH5a6a44GV44KM44Gq44GE5aC05ZCI44Gr44GK44GE44Gm44KCXHJcbiAgICAgICAgICogaW50ZW50IOOCkuegtOajhOOBl+OBquOBhOWgtOWQiOOBryB0cnVlIOOCkuaMh+WumlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGtlZXBJbnRlbnQ/OiBib29sZWFuO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICogQGludGVyZmFjZSBJUGFnZVxyXG4gICAgICogQGJyaWVmIEludGVyZmFjZSBvZiBQYWdlIGNsYXNzLlxyXG4gICAgICpcclxuICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgKiBAaW50ZXJmYWNlIElQYWdlXHJcbiAgICAgKiBAYnJpZWYg44Oa44O844K444Kv44Op44K544Gu44Kk44Oz44K/44O844OV44Kn44Kk44K544Kv44Op44K5XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSVBhZ2UgZXh0ZW5kcyBJT3JpZW50YXRpb25DaGFuZ2VkTGlzdGVuZXIsIElCYWNrQnV0dG9uRXZlbnRMaXN0ZW5lciwgSUNvbW1hbmRMaXN0ZW5lciB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIFJldHVybiB0cnVlIGlmIHBhZ2UgaXMgYWN0aXZlLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiDjg5rjg7zjgrjjgYzjgqLjgq/jg4bjgqPjg5bjgafjgYLjgovmmYIgdHJ1ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGFjdGl2ZTogYm9vbGVhbjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIFN0b3JlZCB0YXJnZXQgcGFnZSB1cmwuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIOWvvuixoeOBruODmuODvOOCuCBVUkwg44KS5qC857SNXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdXJsOiBzdHJpbmc7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBTdG9yZWQgdGFyZ2V0IHBhZ2UgSUQuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIOWvvuixoeOBruODmuODvOOCuCBJRCDjgpLmoLzntI1cclxuICAgICAgICAgKi9cclxuICAgICAgICBpZDogc3RyaW5nO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogalF1ZXJ5IG9iamVjdCBvZiBwYWdlLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiDjg5rjg7zjgrjjga4galF1ZXJ5IOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgICRwYWdlOiBKUXVlcnk7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBqUXVlcnkgb2JqZWN0IG9mIHBhZ2UncyBoZWFkZXIuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIOODmuODvOOCuOODmOODg+ODgOOBriBqUXVlcnkg44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgJGhlYWRlcjogSlF1ZXJ5O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogalF1ZXJ5IG9iamVjdCBvZiBwYWdlJ3MgZm9vdGVyLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiDjg5rjg7zjgrjjg5Xjg4Pjgr/jga4galF1ZXJ5IOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgICRmb290ZXI6IEpRdWVyeTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIGludGVudCBwYXJhbWV0ZXIgcGFzc2luZyBiZXR3ZWVuIHBhZ2VzLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiDjg5rjg7zjgrjplpPjgaflj5fjgZHmuKHjgZXjgozjgosgaW50ZW50IOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGludGVudDogSW50ZW50O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogUmVjZWl2ZWQgUm91dGVyIFwiYmVmb3JlIHJvdXRlIGNoYW5nZVwiIGV2ZW50LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7SlF1ZXJ5UHJvbWlzZX0galF1ZXJ5UHJvbWlzZSBPYmplY3RcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICogUm91dGVyIFwiYmVmb3JlIHJvdXRlIGNoYW5nZVwiIOODj+ODs+ODieODqVxyXG4gICAgICAgICAqIOODmuODvOOCuOmBt+enu+ebtOWJjeOBq+mdnuWQjOacn+WHpueQhuOCkuihjOOBhuOBk+OBqOOBjOWPr+iDvVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7SlF1ZXJ5UHJvbWlzZX0galF1ZXJ5UHJvbWlzZSDjgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAgICAgKi9cclxuICAgICAgICBvbkJlZm9yZVJvdXRlQ2hhbmdlKCk6IEpRdWVyeVByb21pc2U8YW55PjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIEl0J3MgY2FsbGVkIG9ubHkgd2hlbiBiZWZvcmUgdGhlIGZpcnN0IE9uUGFnZUluaXQoKS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBldmVudCB7SlF1ZXJ5RXZlbnRPYmplY3R9IFtpbl0gZXZlbnQgb2JqZWN0XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIOacgOWIneOBriBPblBhZ2VJbml0KCkg44Gu44Go44GN44Gr44Gu44G/44Kz44O844Or44GV44KM44KLXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gZXZlbnQge0pRdWVyeUV2ZW50T2JqZWN0fSBbaW5dIOOCpOODmeODs+ODiOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9uSW5pdGlhbGl6ZShldmVudDogSlF1ZXJ5RXZlbnRPYmplY3QpOiB2b2lkO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogRXZlbnQgaGFuZGxlciBvZiBqUU0gZXZlbnQ6IFwicGFnZWJlZm9yZWNyZWF0ZVwiLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGV2ZW50IHtKUXVlcnlFdmVudE9iamVjdH0gW2luXSBldmVudCBvYmplY3RcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICogalFNIGV2ZW50OiBcInBhZ2ViZWZvcmVjcmVhdGVcIiDjgavlr77lv5xcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBldmVudCB7SlF1ZXJ5RXZlbnRPYmplY3R9IFtpbl0g44Kk44OZ44Oz44OI44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb25QYWdlQmVmb3JlQ3JlYXRlKGV2ZW50OiBKUXVlcnlFdmVudE9iamVjdCk6IHZvaWQ7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBFdmVudCBoYW5kbGVyIG9mIGpRTSBldmVudDogXCJwYWdlY3JlYXRlXCIgKHByZXZpb3VzIHZlcnNpb24gZGVmaW5lZCBcInBhZ2Vpbml0XCIpLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGV2ZW50IHtKUXVlcnlFdmVudE9iamVjdH0gW2luXSBldmVudCBvYmplY3RcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICogalFNIGV2ZW50OiBcInBhZ2VjcmVhdGVcIiAo5penOlwicGFnZWluaXRcIikg44Gr5a++5b+cXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gZXZlbnQge0pRdWVyeUV2ZW50T2JqZWN0fSBbaW5dIOOCpOODmeODs+ODiOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9uUGFnZUluaXQoZXZlbnQ6IEpRdWVyeUV2ZW50T2JqZWN0KTogdm9pZDtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIEV2ZW50IGhhbmRsZXIgb2YgalFNIGV2ZW50OiBcInBhZ2ViZWZvcmVzaG93XCJcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBldmVudCB7SlF1ZXJ5RXZlbnRPYmplY3R9IFtpbl0gZXZlbnQgb2JqZWN0XHJcbiAgICAgICAgICogQHBhcmFtIGRhdGEgIHtTaG93RXZlbnREYXRhfSAgICAgW2luXSBhZGRpdGlvbmFsIGluZm9cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICogalFNIGV2ZW50OiBcInBhZ2ViZWZvcmVzaG93XCIg44Gr5a++5b+cXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gZXZlbnQge0pRdWVyeUV2ZW50T2JqZWN0fSBbaW5dIOOCpOODmeODs+ODiOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICAgICAqIEBwYXJhbSBkYXRhICB7U2hvd0V2ZW50RGF0YX0gICAgIFtpbl0g5LuY5Yqg5oOF5aCxXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb25QYWdlQmVmb3JlU2hvdyhldmVudDogSlF1ZXJ5RXZlbnRPYmplY3QsIGRhdGE/OiBTaG93RXZlbnREYXRhKTogdm9pZDtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIEV2ZW50IGhhbmRsZXIgb2YgalFNIGV2ZW50OiBcInBhZ2Vjb250YWluZXJzaG93XCIgKHByZXZpb3VzIHZlcnNpb24gZGVmaW5lZCBcInBhZ2VzaG93XCIpLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGV2ZW50IHtKUXVlcnlFdmVudE9iamVjdH0gW2luXSBldmVudCBvYmplY3RcclxuICAgICAgICAgKiBAcGFyYW0gZGF0YSAge1Nob3dFdmVudERhdGF9ICAgICBbaW5dIGFkZGl0aW9uYWwgaW5mb1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiBqUU0gZXZlbnQ6IFwicGFnZWNvbnRhaW5lcnNob3dcIiAo5penOlwicGFnZXNob3dcIikg44Gr5a++5b+cXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gZXZlbnQge0pRdWVyeUV2ZW50T2JqZWN0fSBbaW5dIOOCpOODmeODs+ODiOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICAgICAqIEBwYXJhbSBkYXRhICB7U2hvd0V2ZW50RGF0YX0gICAgIFtpbl0g5LuY5Yqg5oOF5aCxXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb25QYWdlU2hvdyhldmVudDogSlF1ZXJ5RXZlbnRPYmplY3QsIGRhdGE/OiBTaG93RXZlbnREYXRhKTogdm9pZDtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIEV2ZW50IGhhbmRsZXIgb2YgalFNIGV2ZW50OiBcInBhZ2ViZWZvcmVoaWRlXCIuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gZXZlbnQge0pRdWVyeUV2ZW50T2JqZWN0fSBbaW5dIGV2ZW50IG9iamVjdFxyXG4gICAgICAgICAqIEBwYXJhbSBkYXRhICB7SGlkZUV2ZW50RGF0YX0gICAgIFtpbl0gYWRkaXRpb25hbCBpbmZvXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIGpRTSBldmVudDogXCJwYWdlYmVmb3JlaGlkZVwiIOOBq+WvvuW/nFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGV2ZW50IHtKUXVlcnlFdmVudE9iamVjdH0gW2luXSDjgqTjg5njg7Pjg4jjgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAgICAgKiBAcGFyYW0gZGF0YSAge0hpZGVFdmVudERhdGF9ICAgICBbaW5dIOS7mOWKoOaDheWgsVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9uUGFnZUJlZm9yZUhpZGUoZXZlbnQ6IEpRdWVyeUV2ZW50T2JqZWN0LCBkYXRhPzogSGlkZUV2ZW50RGF0YSk6IHZvaWQ7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBFdmVudCBoYW5kbGVyIG9mIGpRTSBldmVudDogXCJwYWdlY29udGFpbmVyaGlkZVwiIChwcmV2aW91cyB2ZXJzaW9uIGRlZmluZWQgXCJwYWdlaGlkZVwiKS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBldmVudCB7SlF1ZXJ5RXZlbnRPYmplY3R9IFtpbl0gZXZlbnQgb2JqZWN0XHJcbiAgICAgICAgICogQHBhcmFtIGRhdGEgIHtIaWRlRXZlbnREYXRhfSAgICAgW2luXSBhZGRpdGlvbmFsIGluZm9cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICogalFNIGV2ZW50OiBcInBhZ2Vjb250YWluZXJoaWRlXCIgKOaXpzpcInBhZ2VoaWRlXCIpIOOBq+WvvuW/nFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGV2ZW50IHtKUXVlcnlFdmVudE9iamVjdH0gW2luXSDjgqTjg5njg7Pjg4jjgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAgICAgKiBAcGFyYW0gZGF0YSAge0hpZGVFdmVudERhdGF9ICAgICBbaW5dIOS7mOWKoOaDheWgsVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9uUGFnZUhpZGUoZXZlbnQ6IEpRdWVyeUV2ZW50T2JqZWN0LCBkYXRhPzogSGlkZUV2ZW50RGF0YSk6IHZvaWQ7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBFdmVudCBoYW5kbGVyIG9mIGpRTSBldmVudDogXCJwYWdlcmVtb3ZlXCIuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gZXZlbnQge0pRdWVyeUV2ZW50T2JqZWN0fSBbaW5dIGV2ZW50IG9iamVjdFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiBqUU0gZXZlbnQ6IFwicGFnZXJlbW92ZVwiIOOBq+WvvuW/nFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGV2ZW50IHtKUXVlcnlFdmVudE9iamVjdH0gW2luXSDjgqTjg5njg7Pjg4jjgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAgICAgKi9cclxuICAgICAgICBvblBhZ2VSZW1vdmUoZXZlbnQ6IEpRdWVyeUV2ZW50T2JqZWN0KTogdm9pZDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAqIEBpbnRlcmZhY2UgQmFzZVZpZXdcclxuICAgICAqIEBicmllZiAgICAgYWxpYXMgZm9yIEJhY2tib25lLlZpZXc8QmFja2JvbmUuTW9kZWw+LlxyXG4gICAgICpcclxuICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgKiBAaW50ZXJmYWNlIEJhc2VWaWV3XHJcbiAgICAgKiBAYnJpZWYgICAgIEJhY2tib25lLlZpZXc8QmFja2JvbmUuTW9kZWw+IOOBriBhbGlhc1xyXG4gICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIEJhc2VWaWV3IGV4dGVuZHMgQmFja2JvbmUuVmlldzxCYWNrYm9uZS5Nb2RlbD4geyB9XHJcbn1cclxuXHJcbmRlY2xhcmUgbW9kdWxlIFwiY2RwLmZyYW1ld29yay5qcW1cIiB7XHJcbiAgICBsZXQgRnJhbWV3b3JrOiB0eXBlb2YgQ0RQLkZyYW1ld29yaztcclxuICAgIGV4cG9ydCA9IEZyYW1ld29yaztcclxufVxyXG5cclxuLy8gaTE4bmV4dCBqUXVlcnkgZXh0ZW5zaW9uc1xyXG5pbnRlcmZhY2UgSlF1ZXJ5U3RhdGljIHtcclxuICAgIGkxOG46IEkxOG5leHQuSTE4bjtcclxuICAgIHQ6IChrZXk6IHN0cmluZywgb3B0aW9ucz86IGFueSkgPT4gc3RyaW5nO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgSlF1ZXJ5IHtcclxuICAgIGxvY2FsaXplOiAob3B0aW9ucz86IEkxOG5leHQuVHJhbnNsYXRpb25PcHRpb25zKSA9PiB2b2lkO1xyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBjZHA6Ly8vQ0RQL0ZyYW1ld29yay9JbnRlcmZhY2VzLnRzIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uLy4uLy4uL2V4dGVybmFsL2luY2x1ZGUvYmFja2JvbmUuZC50c1wiIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi8uLi8uLi9leHRlcm5hbC9pbmNsdWRlL3VuZGVyc2NvcmUuZC50c1wiIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi8uLi8uLi9leHRlcm5hbC9pbmNsdWRlL2pxdWVyeS5tb2JpbGUuZC50c1wiIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi8uLi8uLi9leHRlcm5hbC9pbmNsdWRlL2NkcC5jb3JlLmQudHNcIiAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiSW50ZXJmYWNlcy50c1wiIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJDb3JlQVBJLnRzXCIgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIlBhdGNoLnRzXCIgLz5cclxuXHJcbi8qIHRzbGludDpkaXNhYmxlOm1heC1saW5lLWxlbmd0aCBuby1zdHJpbmctbGl0ZXJhbCAqL1xyXG5cclxubmFtZXNwYWNlIENEUC5GcmFtZXdvcmsge1xyXG5cclxuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAvLyBjbG9zdXJlIG1ldGhvZHNcclxuXHJcbiAgICAvKipcclxuICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAqIENvbnZlcnQgcGF0aCB0byBVUkwuXHJcbiAgICAgKiBJZiB0aGUgcGF0aCBzdGFydHMgZnJvbSBcIi9cIiwgdGhlIGZ1bmN0aW9uIHRyYW5zbGF0ZSB0aGUgcGF0aCBhcyBjaGlsZCBmb2xkZXIgb2YgXCJ3ZWIgcm9vdFwiLlxyXG4gICAgICogT3RoZXJ3aXNlLCBpdCBpbnRlcnByZXRzIGFzIHJlbGF0aXZlIHBhdGggZnJvbSBjdXJyZW50IHBhZ2UuXHJcbiAgICAgKiBbTm90ZV0gVGhpcyBiZWhhdmlvciBnbyBhbG9uZyB3aXRoIGpRTSwgTk9UIHdpdGggcmVxdWlyZS50b1VybCgpLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBwYXRoIHtTdHJpbmd9IFtpbl0gcGF0aCBzdHJpbmdcclxuICAgICAqXHJcbiAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICogcGF0aCDjgpIgVVJMIOOBq+WkieaPm1xyXG4gICAgICogXCIvXCIg44GL44KJ5aeL44G+44KL44KC44Gu44GvIHdlYiByb290IOOBi+OCieOAgeOBneOCjOS7peWkluOBr+ePvuWcqOOBruODmuODvOOCuOOBi+OCiee1tuWvvuODkeOCuVVSTOOBq+WkieaPm+OBmeOCi+OAglxyXG4gICAgICogalFNIOOBruaMmeWLleOBq+OBguOCj+OBm+OBpuOBiuOCiuOAgXJlcXVpcmUudG9VcmwoKSDjgajnlbDjgarjgovjga7jgafms6jmhI/jgIJcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gcGF0aCB7U3RyaW5nfSBbaW5dIOODkeOCueOCkuaMh+WumuOAglxyXG4gICAgICovXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gdG9VcmwocGF0aDogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgICAgICBpZiAobnVsbCAhPSBwYXRoWzBdICYmIFwiL1wiID09PSBwYXRoWzBdKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBDRFAud2ViUm9vdCArIHBhdGguc2xpY2UoMSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuICQubW9iaWxlLnBhdGgubWFrZVVybEFic29sdXRlKHBhdGgsIGdldEN1cnJlbnREb2N1bWVudFVybCgpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgKiBHZXQgY3VycmVudCBkb2N1bWVudCB1cmwuXHJcbiAgICAgKlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqXHJcbiAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICog54++5Zyo6KGo56S644GX44Gm44GE44KL44OJ44Kt44Ol44Oh44Oz44OI44GuIFVSTCDjgpLlj5blvpdcclxuICAgICAqXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBnZXRDdXJyZW50RG9jdW1lbnRVcmwoKTogc3RyaW5nIHtcclxuICAgICAgICBsZXQgJGFjdGl2ZVBhZ2UgPSAoPGFueT4kKFwiYm9keVwiKSkucGFnZWNvbnRhaW5lcihcImdldEFjdGl2ZVBhZ2VcIik7XHJcbiAgICAgICAgaWYgKG51bGwgPT0gJGFjdGl2ZVBhZ2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuICQubW9iaWxlLnBhdGguZG9jdW1lbnRCYXNlLmhyZWZOb0hhc2g7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgdXJsID0gJC5tb2JpbGUuYWN0aXZlUGFnZS5jbG9zZXN0KFwiLnVpLXBhZ2VcIikuanFtRGF0YShcInVybFwiKSxcclxuICAgICAgICAgICAgYmFzZSA9ICQubW9iaWxlLnBhdGguZG9jdW1lbnRCYXNlLmhyZWZOb0hhc2g7XHJcblxyXG4gICAgICAgIGlmICghdXJsIHx8ICEkLm1vYmlsZS5wYXRoLmlzUGF0aCh1cmwpKSB7XHJcbiAgICAgICAgICAgIHVybCA9IGJhc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gJC5tb2JpbGUucGF0aC5tYWtlVXJsQWJzb2x1dGUodXJsLCBiYXNlKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAqIERlZmF1bHQgXCJiZWZvcmUgcm91dGUgY2hhbmdlXCIgaGFuZGxlci5cclxuICAgICAqXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICpcclxuICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgKiDml6Llrprjga4gXCJiZWZvcmUgcm91dGUgY2hhbmdlXCIg44OP44Oz44OJ44OpXHJcbiAgICAgKlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgbGV0IF9iZWZvcmVSb3V0ZUNoYW5nZSA9ICgpOiBKUXVlcnlQcm9taXNlPGFueT4gPT4ge1xyXG4gICAgICAgIHJldHVybiAkLkRlZmVycmVkKCkucmVzb2x2ZSgpLnByb21pc2UoKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gZGVmYXVsdCBcImJlZm9yZSByb3V0ZSBjaGFuZ2VcIiBoYW5uZGxlclxyXG4gICAgbGV0IF9kZWZhdWx0QmVmb3JlUm91dGVDaGFuZ2UgPSBfYmVmb3JlUm91dGVDaGFuZ2U7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgKiBTZXR1cCBcImJlZm9yZSByb3V0ZSBjaGFuZ2VcIiBoYW5kbGVyLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSAge0Z1bmN0aW9ufSBoYW5kbGVyIGZ1bmN0aW9uLlxyXG4gICAgICogQHJldHVybiB7RnVuY3Rpb259IG9sZCBoYW5kbGVyIGZ1bmN0aW9uLlxyXG4gICAgICpcclxuICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgKiBcImJlZm9yZSByb3V0ZSBjaGFuZ2VcIiDjg4/jg7Pjg4njg6noqK3lrppcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gIHtGdW5jdGlvbn0gaGFuZGxlciDmjIflrpouXHJcbiAgICAgKiBAcmV0dXJuIHtGdW5jdGlvbn0g5Lul5YmN44GuIGhhbmRsZXIuXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBzZXRCZWZvcmVSb3V0ZUNoYW5nZUhhbmRsZXIoaGFuZGxlcjogKCkgPT4gSlF1ZXJ5UHJvbWlzZTxhbnk+KTogKCkgPT4gSlF1ZXJ5UHJvbWlzZTxhbnk+IHtcclxuICAgICAgICBpZiAobnVsbCA9PSBoYW5kbGVyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBfYmVmb3JlUm91dGVDaGFuZ2U7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbGV0IG9sZEhhbmRsZXIgPSBfYmVmb3JlUm91dGVDaGFuZ2U7XHJcbiAgICAgICAgICAgIF9iZWZvcmVSb3V0ZUNoYW5nZSA9IGhhbmRsZXI7XHJcbiAgICAgICAgICAgIHJldHVybiBvbGRIYW5kbGVyO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvL19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18vL1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICogQGludGVyZmFjZSBJbml0T3B0aW9uc1xyXG4gICAgICogQGJyaWVmIGluaXRpYWxpemUgb3B0aW9uIGRlZmluaXRpb24uXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICpcclxuICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgKiBAaW50ZXJmYWNlIEluaXRPcHRpb25zXHJcbiAgICAgKiBAYnJpZWYg5Yid5pyf5YyW44Kq44OX44K344On44OzXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBpbnRlcmZhY2UgSW5pdE9wdGlvbnMge1xyXG4gICAgICAgIGFuY2hvclZjbGljaz86IGJvb2xlYW47ICAgIC8vITwg5pqX6buZ44GuIGFuY2hvciB2Y2xpY2sg44KS44K144Od44O844OIXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgKiBAaW50ZXJmYWNlIFJvdXRlQ29udGV4dFxyXG4gICAgICogQGJyaWVmIE1hbmFnZW1lbnQgaW5mbyBmb3IgcGFnZS5cclxuICAgICAqICAgICAgICBUaGlzIGludGVyZmFjZSByb2xlIGlzIG5vdCBzYW1lIGFzIEJhY2tib25lLlJvdXRlci5yb3V0ZXMuXHJcbiAgICAgKiAgICAgICAgVXNpbmcgZm9yIHJlc29sdmluZyByZWxhdGlvbiBhIGtub3duIGZyYWdtZW50IHZhbHVlIGFuZCBhIHBhZ2UgcGF0aC5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKlxyXG4gICAgICogXFx+amFwYW5lc2VcclxuICAgICAqIEBpbnRlcmZhY2UgUm91dGVDb250ZXh0XHJcbiAgICAgKiBAYnJpZWYg44Oa44O844K4566h55CG5oOF5aCxXHJcbiAgICAgKiAgICAgICAgQmFja2JvbmUuUm91dGVyLnJvdXRlcyDjgajlkIzjgZjlvbnlibLjgafjga/jgarjgYTjgIJcclxuICAgICAqICAgICAgICDpgbfnp7vjgZfjgZ/jgZPjgajjgYzjgYLjgovjg5Xjg6njgrDjg6Hjg7Pjg4jlgKTjgajjg5rjg7zjgrjjga7jg5Hjgrnjga7op6Pmsbrjgavkvb/nlKjjgZXjgozjgovjgIJcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIGludGVyZmFjZSBSb3V0ZUNvbnRleHQge1xyXG4gICAgICAgIHJvdXRlOiBzdHJpbmc7XHJcbiAgICAgICAgcmVnZXhwOiBSZWdFeHA7XHJcbiAgICAgICAgcGFnZTogc3RyaW5nO1xyXG4gICAgICAgIHRvcDogYm9vbGVhbjtcclxuICAgICAgICBjYWxsYmFjazogKC4uLmFyZ3M6IGFueVtdKSA9PiBib29sZWFuO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICogQGludGVyZmFjZSBOYXZpZ2F0ZUluZm9cclxuICAgICAqIEBicmllZiBTdG9yZWQgYWRkaXRpb25hbCBpbmZvIGludGVyZmFjZSBvbiBuYXZpZ2F0ZS5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKlxyXG4gICAgICogXFx+amFwYW5lc2VcclxuICAgICAqIEBpbnRlcmZhY2UgTmF2aWdhdGVJbmZvXHJcbiAgICAgKiBAYnJpZWYg44Oa44O844K46YG356e744Gr6Zai44GZ44KL5LuY5Yqg5oOF5aCx44KS5qC857SN44GZ44KL44Kk44Oz44K/44O844OV44Kn44Kk44K5XHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBpbnRlcmZhY2UgTmF2aWdhdGVJbmZvIHtcclxuICAgICAgICB1cmw/OiBzdHJpbmc7XHJcbiAgICAgICAgdHJhbnNpdGlvbj86IHN0cmluZztcclxuICAgICAgICByZXZlcnNlPzogYm9vbGVhbjtcclxuICAgICAgICBiYWNrRGVzdGluYXRpb24/OiBzdHJpbmc7XHJcbiAgICAgICAgbm9IYXNoQ2hhbmdlPzogYm9vbGVhbjtcclxuICAgICAgICBpbnRlbnQ/OiBJbnRlbnQ7XHJcbiAgICAgICAgLy8gc3RhdHVzIHBhcmFtc1xyXG4gICAgICAgIHBvc2l0aXZlTmF2aWdhdGU/OiBib29sZWFuO1xyXG4gICAgICAgIGNhbGxlZEJlZm9yZVJvdXRlQ2hhbmdlPzogYm9vbGVhbjtcclxuICAgICAgICBpbk5hdmlnYXRpb24/OiBib29sZWFuO1xyXG4gICAgICAgIGluQWRkaXRpb25hbEJhY2s/OiBib29sZWFuO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICogQGludGVyZmFjZSBTdWJGbG93UGFyYW1FeFxyXG4gICAgICogQGJyaWVmIEV4dGVuZWQgU3ViRmxvd1BhcmFtIGludGVyZmFjZSBpbiBGcmFtZXdvcmsgdXNlLlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqXHJcbiAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICogQGludGVyZmFjZSBTdWJGbG93UGFyYW1FeFxyXG4gICAgICogQGJyaWVmIEZyYW1ld29yayDjgYzkvb/nlKjjgZnjgosgU3ViRmxvd1BhcmFtIOaLoeW8teOCpOODs+OCv+ODvOODleOCp+OCpOOCuVxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgaW50ZXJmYWNlIFN1YkZsb3dQYXJhbUV4IGV4dGVuZHMgU3ViRmxvd1BhcmFtIHtcclxuICAgICAgICBhZGRpdGlvbmFsRGlzdGFuY2U/OiBudW1iZXI7XHJcbiAgICB9XHJcblxyXG4gICAgLy9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fLy9cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAqIEBjbGFzcyBSb3V0ZXJcclxuICAgICAqIEBicmllZiBSb3V0ZXIgY2xhc3MgZm9yIGFkanVzdGluZyBqUXVlcnlNb2JpbGUgZnVuY3Rpb25zIGFuZCBCYWNrYm9uZS5Sb3V0ZXIgZnVuY3Rpb25zLlxyXG4gICAgICogICAgICAgIEV2ZW4gaWYgQmFja2JvbmUuUm91dGVyIGRvZXMgbm90IHN0YXJ0IHJvdXRpbmcsIG5hdGlnYXRlKCkgbWV0aG9kIHdvcmtzIGdvb2Qgd2l0aCBqUU0gZnJhbWV3b3JrLlxyXG4gICAgICpcclxuICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgKiBAY2xhc3MgUm91dGVyXHJcbiAgICAgKiBAYnJpZWYgalF1ZXJ5TW9iaWxlIOOBqCBCYWNrYm9uZS5Sb3V0ZXIg44KS6Kq/5YGc44GZ44KLIFJvdXRlciDjgq/jg6njgrlcclxuICAgICAqICAgICAgICDjg6vjg7zjg4bjgqPjg7PjgrDjgpLplovlp4vjgZfjgabjgYTjgarjgYTloLTlkIjjgavjgoLjgIFuYXZpZ2F0ZSgpIOOBryBqUU0g44OV44Os44O844Og44Ov44O844Kv44KS5L2/55So44GX44Gm5qmf6IO944GZ44KL44CCXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBjbGFzcyBSb3V0ZXIge1xyXG5cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBzX2luaXRPcHRpb25zOiBJbml0T3B0aW9ucyA9IHt9O1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIHNfcm91dGVyOiBCYWNrYm9uZS5Sb3V0ZXIgPSBudWxsO1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIHNfcm9vdENvbnRleHRzOiBPYmplY3QgPSB7fTtcclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBzX2xhc3ROYXZpZ2F0ZUluZm86IE5hdmlnYXRlSW5mbyA9IHt9O1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIHNfbGFzdENsaWNrZWRUaW1lOiBudW1iZXIgPSBudWxsO1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIHNfbGFzdEludGVudDogSW50ZW50ID0ge307XHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgc19sb2FkVXJsOiAoZnJhZ21lbnQ6IHN0cmluZykgPT4gYm9vbGVhbiA9IG51bGw7XHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgc19iYWNrOiAoKSA9PiB2b2lkID0gbnVsbDtcclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBERUxBWV9USU1FID0gMjAwOyAgICAgICAgLy8gVEJEOiDmmqvlrprlgKRcclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBEQVRBX0JBQ0tfREVTVElOQVRJT04gPSBcImRhdGEtYmFjay1kc3RcIjtcclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBEQVRBX05PX0hBU0hfQ0hBTkdFID0gXCJkYXRhLW5vLWhhc2gtY2hhbmdlXCI7XHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgREFUQV9OT19WQ0xJQ0tfSEFORExFID0gXCJkYXRhLW5vLXZjbGljay1oYW5kbGVcIjtcclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBCQUNLX0RFU1RJTkFUSU9OX1VSTCA9IFwiYmFja0RzdFVybFwiO1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIFNVQkZMT1dfUEFSQU0gPSBcInN1YkZsb3dQYXJhbVwiO1xyXG5cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBzX2RlZmF1bHRJbml0T3B0aW9uczogSW5pdE9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgIGFuY2hvclZjbGljazogdHJ1ZSxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBzX2RlZmF1bHROYXZpZ2F0ZU9wdGlvbnM6IE5hdmlnYXRlT3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgdHJpZ2dlcjogdHJ1ZSxcclxuICAgICAgICAgICAgcmVwbGFjZTogZmFsc2UsXHJcbiAgICAgICAgICAgIGludGVudDogbnVsbCxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIHB1YmxpYyBzdGF0aWMgbWV0aG9kc1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogZm9yIGluaXRpYWxpemUgUm91dGVyLiB0aGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCBpbiBmcmFtZXdvcmsuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHtCb29sZWFufSB0cnVlOiBzdWNjZWVkZWQgLyBmYWxzZTogZmFpbGVkLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiDliJ3mnJ/ljJZcclxuICAgICAgICAgKiDjgZPjga7plqLmlbDjga/jg5Xjg6zjg7zjg6Djg6/jg7zjgq/lhoXpg6jjgafkvb/nlKjjgZXjgozjgovjgIJcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSAgb3B0aW9ucyB7T2JqZWN0fSBbaW5dIOOCquODl+OCt+ODp+ODs1xyXG4gICAgICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IOaIkOWQplxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW5pdGlhbGl6ZShvcHRpb25zOiBhbnkpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgbGV0ICRib2R5ID0gJChcImJvZHlcIik7XHJcbiAgICAgICAgICAgIGlmICghIVJvdXRlci5zX3JvdXRlcikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwibG9naWMgZXJyb3IuIGluaXRpYWxpemUgY2FsbCB0d2ljZS5cIik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIFJvdXRlci5zX2luaXRPcHRpb25zID0gJC5leHRlbmQoe30sIFJvdXRlci5zX2RlZmF1bHRJbml0T3B0aW9ucywgb3B0aW9ucyk7XHJcblxyXG4gICAgICAgICAgICAvLyBCYWNrYm9uZS5Sb3V0ZXIg44GM44CBcm91dGUg44KS6Kej5rG644Gn44GN44Gq44GL44Gj44Gf5aC05ZCI44Gr44KC6YCa55+l44KS5o2V5o2J44GZ44KL44Gf44KB44Gu44Kz44O844Or44OQ44OD44Kv44KS6Kit5a6aXHJcbiAgICAgICAgICAgIFJvdXRlci5zX2xvYWRVcmwgPSBfLmJpbmQoQmFja2JvbmUuaGlzdG9yeS5sb2FkVXJsLCBCYWNrYm9uZS5oaXN0b3J5KTtcclxuICAgICAgICAgICAgQmFja2JvbmUuaGlzdG9yeS5sb2FkVXJsID0gUm91dGVyLmN1c3RvbUxvYWRVcmw7XHJcbiAgICAgICAgICAgIFJvdXRlci5zX3JvdXRlciA9IG5ldyBCYWNrYm9uZS5Sb3V0ZXIoKTtcclxuICAgICAgICAgICAgUm91dGVyLnNfcm91dGVyLm9uKFwicm91dGVcIiwgUm91dGVyLm9uUm91dGVTdWNjZWVkZWQpO1xyXG5cclxuICAgICAgICAgICAgLy8gQmFja2JvbmUuUm91dGVyIOOCkuS9v+eUqOOBl+OBpuOBhOOCi+WgtOWQiOOAgSQubW9iaWxlLmJhY2soKSDjga7mjJnli5XjgpLjg5bjg6njgqbjgrbjga5b5oi744KLXeOBq+e1seS4gFxyXG4gICAgICAgICAgICBpZiAoISQubW9iaWxlLmhhc2hMaXN0ZW5pbmdFbmFibGVkKSB7XHJcbiAgICAgICAgICAgICAgICBSb3V0ZXIuc19iYWNrID0gXy5iaW5kKCQubW9iaWxlLmJhY2ssICQubW9iaWxlKTtcclxuICAgICAgICAgICAgICAgICQubW9iaWxlLmJhY2sgPSBSb3V0ZXIuY3VzdG9tSnFtQmFjaztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gY2hhbmdlUGFnZSDjgpLjgrXjg53jg7zjg4hcclxuICAgICAgICAgICAgaWYgKG51bGwgPT0gJC5tb2JpbGUuY2hhbmdlUGFnZSkge1xyXG4gICAgICAgICAgICAgICAgJC5tb2JpbGUuY2hhbmdlUGFnZSA9ICh0bzogYW55LCBvcHRpb25zPzogQ2hhbmdlUGFnZU9wdGlvbnMpOiB2b2lkID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAoPGFueT4kYm9keSkucGFnZWNvbnRhaW5lcihcImNoYW5nZVwiLCB0bywgb3B0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBSb3V0ZXIuYmluZEV2ZW50cygpO1xyXG4gICAgICAgICAgICAvLyBGcmFtZXdvcmsg44Gu44Kk44OZ44Oz44OI44OP44Oz44OJ44Op44KS5pu05pawXHJcbiAgICAgICAgICAgIEZyYW1ld29yay5zZXR1cEV2ZW50SGFuZGxlcnMoKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIFJlZ2lzdGVyIHRvIFJvdXRlci5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSByb3V0ZSAgICB7U3RyaW5nfSAgIFtpbl0gcm91dGUgc3RyaW5nLCBpdCBjYW4gYmUgcmVndWxhciBleHByZXNzaW9uLlxyXG4gICAgICAgICAqIEBwYXJhbSBwYWdlICAgICB7U3RyaW5nfSAgIFtpbl0gcGFnZSB0ZW1wbGF0ZSBwYXRoLlxyXG4gICAgICAgICAqIEBwYXJhbSB0b3AgICAgICB7Qm9vbGVhbn0gIFtpbl0gc2V0IFwidHJ1ZVwiIGlmIGFwcGxpY2F0aW9uJ3MgdG9wIHZpZXcuIChvcHRpb25hbClcclxuICAgICAgICAgKiBAcGFyYW0gY2FsbGJhY2sge0Z1bmN0aW9ufSBbaW5dIGNhbGxiYWNrIGZvciBjdXN0b20gcGFnZSB0cmFuc2l0aW9uLiBJZiB5b3UgZG9uJ3Qgd2FudCB0byB0cmlnZ2VyIGpRTS5jaGFuZ2VQYWdlKCksIHJldHVybiB0cnVlIGJ5IHRoaXMgY2FsbGJhY2suIChvcHRpb25hbClcclxuICAgICAgICAgKiBAcmV0dXJuIHtSb3V0ZXJ9IFJvdXRlciBpbnN0YW5jZS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICog55m76YyyXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gcm91dGUgICAge1N0cmluZ30gICBbaW5dIOODq+ODvOODhuOCo+ODs+OCsOaWh+Wtl+WIlyAvIOato+imj+ihqOePvlxyXG4gICAgICAgICAqIEBwYXJhbSBwYWdlICAgICB7U3RyaW5nfSAgIFtpbl0gcGFnZSB0ZW1wbGF0ZSBwYXRoLiDjgqTjg5njg7Pjg4jlkI3jgavjgoLkvb/nlKjjgZXjgozjgotcclxuICAgICAgICAgKiBAcGFyYW0gdG9wICAgICAge0Jvb2xlYW59ICBbaW5dIFRvcCDjg5rjg7zjgrjjga7loLTlkIjjga8gdHJ1ZSDjgpLmjIflrpogKOS7u+aEjylcclxuICAgICAgICAgKiBAcGFyYW0gY2FsbGJhY2sge0Z1bmN0aW9ufSBbaW5dIOmBt+enu+OCkuiHqui6q+OBp+euoeeQhuOBmeOCi+WgtOWQiOOBq+aMh+WumuOBl+OAgeaIu+OCiuWApOOCkiB0cnVlIOOBq+ioreWumuOBmeOCi+OBqCBjaGFuZ2VQYWdlIOOCkuOCs+ODvOODq+OBl+OBquOBhCAo5Lu75oSPKVxyXG4gICAgICAgICAqIEByZXR1cm4ge1JvdXRlcn0g44Kk44Oz44K544K/44Oz44K544CC44Gf44Gg44GXIG1ldGhvZCBjaGFpbiDjgpLjgZfjgZ/jgYTloLTlkIjjga/jgIFhbnkgY2FzdCDjgYzlv4XopoHjgIJcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHJlZ2lzdGVyKHJvdXRlOiBzdHJpbmcsIHBhZ2U6IHN0cmluZywgdG9wOiBib29sZWFuID0gZmFsc2UsIGNhbGxiYWNrPzogKC4uLmFyZ3M6IGFueVtdKSA9PiBib29sZWFuKTogUm91dGVyIHtcclxuICAgICAgICAgICAgLy8gQmFja2JvbmUuUm91dGVyIOOBuOOBrueZu+mMsuOBryBoaXN0b3J5IOOBruWBnOatouOBjOW/heimgVxyXG4gICAgICAgICAgICBsZXQgcmVzdGFydCA9IFJvdXRlci5zdG9wKCk7XHJcblxyXG4gICAgICAgICAgICBsZXQgbmFtZSA9IHJvdXRlICsgcGFnZTtcclxuICAgICAgICAgICAgbGV0IGNvbnRleHQ6IFJvdXRlQ29udGV4dCA9IHtcclxuICAgICAgICAgICAgICAgIHJvdXRlOiByb3V0ZSxcclxuICAgICAgICAgICAgICAgIHJlZ2V4cDogKDxhbnk+Um91dGVyLnNfcm91dGVyKS5fcm91dGVUb1JlZ0V4cChyb3V0ZSksXHJcbiAgICAgICAgICAgICAgICBwYWdlOiBwYWdlLFxyXG4gICAgICAgICAgICAgICAgdG9wOiB0b3AsXHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjazogY2FsbGJhY2sgfHwgZnVuY3Rpb24gKCkgeyByZXR1cm4gZmFsc2U7IH1cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGlmIChSb3V0ZXIucHVzaENvbnRleHQobmFtZSwgY29udGV4dCkpIHtcclxuICAgICAgICAgICAgICAgIFJvdXRlci5zX3JvdXRlci5yb3V0ZShyb3V0ZSwgbmFtZSwgKCkgPT4gey8qIG5vb3AgKi8gfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChyZXN0YXJ0KSB7XHJcbiAgICAgICAgICAgICAgICAvLyDlho3plovmmYLjga/lho3oqq3jgb/ovrzjgb/jgZfjgarjgYTjgIJcclxuICAgICAgICAgICAgICAgIFJvdXRlci5zdGFydCh7IHNpbGVudDogdHJ1ZSB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFJvdXRlcjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBTdGFydCBsaXN0ZW5pbmcgaGFzaCBjaGFuZ2UuXHJcbiAgICAgICAgICogSXQgc2hvdWxkIGJlIGNhbGxlZCBhZnRlciByZWdpc3RlcigpLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIG9wdGlvbnMge09iamVjdH0gW2luXSBvcHRpb25zIG9iamVjdCBmb3IgQmFja2JvbmUuSGlzdG9yeS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICog5bGl5q2055uj6KaW44Gu6ZaL5aeLXHJcbiAgICAgICAgICog55m76Yyy5a6M5LqG5b6M44Gr5ZG844Gz5Ye644GZ44CCXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gb3B0aW9ucyB7T2JqZWN0fSBbaW5dIEJhY2tib25lLkhpc3Rvcnkg44Gr44KP44Gf44KL44Kq44OX44K344On44OzXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBzdGFydChvcHRpb25zPzogUm91dGVyT3B0aW9ucyk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICBpZiAoJC5tb2JpbGUuaGFzaExpc3RlbmluZ0VuYWJsZWQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwic2V0dGluZyBlcnJvci4gY29uZmljdDogJC5tb2JpbGUuaGFzaExpc3RlbmluZ0VuYWJsZWQgPSB0cnVlLCBjYW5ub3Qgc3RhcnQuXCIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBCYWNrYm9uZS5oaXN0b3J5LnN0YXJ0KG9wdGlvbnMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIFN0b3AgbGlzdGVuaW5nIGhhc2ggY2hhbmdlLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7Qm9vbGVhbn0gcHJldmlvdXMgc3RhdHVzLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiDlsaXmrbTnm6Poppbjga7ntYLkuoZcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IOS7peWJjeOBrumWi+Wni+eKtuaFi+OCkui/lOWNtFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgc3RvcCgpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgbGV0IHByZXZTdGF0ZSA9ICg8YW55PkJhY2tib25lLkhpc3RvcnkpLnN0YXJ0ZWQ7XHJcbiAgICAgICAgICAgIEJhY2tib25lLmhpc3Rvcnkuc3RvcCgpO1xyXG4gICAgICAgICAgICByZXR1cm4gcHJldlN0YXRlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIENoZWNrIHJvdXRpbmcgc3RhdHVzLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7Qm9vbGVhbn0gdHJ1ZTogcm91dGluZyAvIGZhbHNlOiBub3Qgcm91dGluZ1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiDjg6vjg7zjg4bjgqPjg7PjgrDjgpLplovlp4vjgZfjgabjgYTjgovjgYvliKTlrppcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IHRydWU6IOacieWKuSAvIGZhbHNlOiDnhKHlirlcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGlzUm91dGluZygpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgcmV0dXJuICg8YW55PkJhY2tib25lLkhpc3RvcnkpLnN0YXJ0ZWQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogVVJMIG5hdmlnYXRpb24uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gdXJsICAgICAgICB7U3RyaW5nfSAgICAgICAgICBbaW5dIHNldCBhIG5hdmlnYXRlIFVSTC4gKHJlbGF0aXZlIHBhdGggLyBhYnNvbHV0ZSBwYXRoIC8gZnJhZ21lbnQpXHJcbiAgICAgICAgICogQHBhcmFtIHRyYW5zaXRpb24ge1N0cmluZ30gICAgICAgICAgW2luXSBzZXQgYSB0cmFuc2l0aW9uIHN0cmluZyAob3B0aW9uYWwpXHJcbiAgICAgICAgICogQHBhcmFtIHJldmVyc2UgICAge0Jvb2xlYW59ICAgICAgICAgW2luXSBzZXQgYSBkaXJlY3Rpb24gc3RyaW5nIGZvciB0cmFuc2l0aW9uLiB0cnVlOnJldmVyc2UgLyBmYWxzZTpub21hbCAob3B0aW9uYWwpXHJcbiAgICAgICAgICogQHBhcmFtIG9wdGlvbnMgICAge05hdmlnYXRlT3B0aW9uc30gW2luXSBzZXQgYSBvcHRpb25zIG9iamVjdCBmb3IgQmFja2JvbmUuUm91dGVyLm5hdmlnYXRlKCkuIChvcHRpb25hbClcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICogVVJM6YG356e7XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gdXJsICAgICAgICB7U3RyaW5nfSAgICAgICAgICBbaW5dIOmBt+enuyBVUkwg44KS5oyH5a6aICjnm7jlr77jg5Hjgrkv57W25a++44OR44K5L+ODleODqeOCsOODoeODs+ODiClcclxuICAgICAgICAgKiBAcGFyYW0gdHJhbnNpdGlvbiB7U3RyaW5nfSAgICAgICAgICBbaW5dIHRyYW5zaXRpb24g44Gr5L2/55So44GZ44KLIGVmZmVjdCDjgpLmjIflrpogKOS7u+aEjylcclxuICAgICAgICAgKiBAcGFyYW0gcmV2ZXJzZSAgICB7Qm9vbGVhbn0gICAgICAgICBbaW5dIHRyYW5zaXRpb24g44Gr5L2/55So44GZ44KLIGRpcmVjdGlvbiDjgpLmjIflrpogdHJ1ZTpyZXZlcnNlL2ZhbHNlOumAmuW4uCAo5Lu75oSPKVxyXG4gICAgICAgICAqIEBwYXJhbSBvcHRpb25zICAgIHtOYXZpZ2F0ZU9wdGlvbnN9IFtpbl0gQmFja2JvbmUuUm91dGVyLm5hdmlnYXRlKCkg44Gr5rih44GV44KM44KL44Kq44OX44K344On44OzICjku7vmhI8pXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBuYXZpZ2F0ZSh1cmw6IHN0cmluZywgdHJhbnNpdGlvbj86IHN0cmluZywgcmV2ZXJzZT86IGJvb2xlYW4sIG9wdGlvbnM/OiBOYXZpZ2F0ZU9wdGlvbnMpOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKCEhUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5pbk5hdmlnYXRpb24pIHtcclxuICAgICAgICAgICAgICAgIC8vIOOBmeOBp+OBqyBOYXZpZ2F0aW9uIOS4reOBp+OBguOCjOOBsOaKkeatolxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJSb3V0ZXIubmF2aWdhdGUoKSBjYWxsZWQgaW4gbmF2aWdhdGlvbiBwcm9jLlwiKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChSb3V0ZXIuaW5pdEZpcnN0UGFnZUlmTmVlZGVkKHVybCkpIHsgLy8gYXV0b0luaXRpYWxpemVQYWdlIOOBjOaMh+WumuOBleOCjOOBpuOBhOOBquOBhOOBqOOBjVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsZXQgbmF2T3B0aW9uczogTmF2aWdhdGVPcHRpb25zID0gJC5leHRlbmQoe30sIFJvdXRlci5zX2RlZmF1bHROYXZpZ2F0ZU9wdGlvbnMsIG9wdGlvbnMpO1xyXG5cclxuICAgICAgICAgICAgLy8g44Oa44O844K46YG356e76ZaL5aeL6YCa55+lLiBTdWIgRmxvdyDjgavjgabjgZnjgafjgavjgrPjg7zjg6vjgZXjgozjgabjgYTjgovloLTlkIjjga/ml6Llrprjga7kvZXjgoLjgZfjgarjgYTjgrPjg7zjg6vjg5Djg4Pjgq/jgpLkvb/nlKjjgZnjgosuXHJcbiAgICAgICAgICAgIGxldCBub3RpZnlCZWZvcmVSb3V0ZUNoYW5nZSA9IFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8uY2FsbGVkQmVmb3JlUm91dGVDaGFuZ2UgPyBfZGVmYXVsdEJlZm9yZVJvdXRlQ2hhbmdlIDogX2JlZm9yZVJvdXRlQ2hhbmdlO1xyXG5cclxuICAgICAgICAgICAgUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mbyA9IHtcclxuICAgICAgICAgICAgICAgIHVybDogdXJsLFxyXG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogdHJhbnNpdGlvbixcclxuICAgICAgICAgICAgICAgIHJldmVyc2U6IHJldmVyc2UsXHJcbiAgICAgICAgICAgICAgICBiYWNrRGVzdGluYXRpb246IG5hdk9wdGlvbnMuYmFja0Rlc3RpbmF0aW9uLFxyXG4gICAgICAgICAgICAgICAgbm9IYXNoQ2hhbmdlOiBuYXZPcHRpb25zLm5vSGFzaENoYW5nZSxcclxuICAgICAgICAgICAgICAgIGludGVudDogbmF2T3B0aW9ucy5pbnRlbnQgfHwge30sXHJcbiAgICAgICAgICAgICAgICBwb3NpdGl2ZU5hdmlnYXRlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgY2FsbGVkQmVmb3JlUm91dGVDaGFuZ2U6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBpbk5hdmlnYXRpb246IHRydWUsXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvLyDjg5rjg7zjgrjpgbfnp7vplovlp4vpgJrnn6VcclxuICAgICAgICAgICAgbm90aWZ5QmVmb3JlUm91dGVDaGFuZ2UoKVxyXG4gICAgICAgICAgICAgICAgLmZhaWwoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGJlZm9yZVJvdXRlQ2hhbmdlKCkg44GM5aSx5pWX44GX44Gf5aC05ZCI44CB6Ie05ZG955qE44Gq5LiN5YW35ZCI44Go44Gq44KL44Gf44KB44CBZXJyb3Ig6KiY6Yyy44Gu44G/44Gr44GX44Gm5YWI44Gr6YCy44KA44CCXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcImJlZm9yZSByb3V0ZSBjaGFuZ2UgY2FsbCwgZmFpbGVkLlwiKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuYWx3YXlzKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoUm91dGVyLmlzUm91dGluZygpICYmICFSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLm5vSGFzaENoYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobmF2T3B0aW9ucy5zdWJGbG93KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG5hdk9wdGlvbnMuc3ViRmxvdy5vcGVyYXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiYmVnaW5cIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUm91dGVyLnN0YXJ0U3ViRmxvdyhuYXZPcHRpb25zLnN1YkZsb3cpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZW5kXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJvdXRlci5maW5pc2hTdWJGbG93KG5hdk9wdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47IC8vIG5hdmlnYXRpb24g44Gv5ZG844Gw44Gq44GEXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwidW5rbm93biBzdWJGbG93Lm9wZXJhdGlvbi4gb3BlcmF0aW9uOiBcIiArIG5hdk9wdGlvbnMuc3ViRmxvdy5vcGVyYXRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBSb3V0ZXIuc19yb3V0ZXIubmF2aWdhdGUodXJsLCBuYXZPcHRpb25zKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobmF2T3B0aW9ucy5zdWJGbG93KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJzdWJGbG93IG9ubHkgc3VwcG9ydGVkIHVuZGVyIHJvdXRpbmcgYW5kIGhhc2ggY2hhbmdlIGNvbmRpdGlvbi5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmcmFnbWVudCA9IEJhY2tib25lLmhpc3RvcnkuZ2V0RnJhZ21lbnQodXJsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjb250ZXh0OiBSb3V0ZUNvbnRleHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5ub0hhc2hDaGFuZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBub0hhc2hDaGFuZ2Ug44GM5oyH5a6a44GV44KM44Gf44Go44GNXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dCA9IDxSb3V0ZUNvbnRleHQ+Xy5maW5kKDxhbnk+Um91dGVyLnNfcm9vdENvbnRleHRzLCAoY29udGV4dDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb250ZXh0LnJlZ2V4cC50ZXN0KGZyYWdtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQmFja2JvbmUuUm91dGVyIOOBjOacieWKueOBp+OBquOBhOOBqOOBjVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQgPSA8Um91dGVDb250ZXh0Pl8uZmluZFdoZXJlKDxhbnk+Um91dGVyLnNfcm9vdENvbnRleHRzLCB7IHJvdXRlOiBmcmFnbWVudCB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb250ZXh0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsID0gY29udGV4dC5wYWdlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBSb3V0ZXIuY2hhbmdlUGFnZSh1cmwpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIE5hdmlnYXRlIGZyb20gVG9wIFBhZ2UuXHJcbiAgICAgICAgICogSWYgU3ViRmxvdyBzZXQgdXAsIHRoZSBwYXJhbSBpcyBjbGVhcmVkLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHRvICAgICAgICAge1N0cmluZ3xQYWdlU3RhY2t8UGFnZVN0YWNrW119IFtpbl0gc2V0IGEgbmF2aWdhdGUgVVJMIG9yIFBhZ2VTdGFja09wdGlvbnMgb2JqZWN0IG9yIGFycmF5LlxyXG4gICAgICAgICAqIEBwYXJhbSB0cmFuc2l0aW9uIHtTdHJpbmd9ICAgICAgICAgICAgICAgICAgICAgICBbaW5dIHNldCBhIHRyYW5zaXRpb24gc3RyaW5nIChvcHRpb25hbClcclxuICAgICAgICAgKiBAcGFyYW0gcmV2ZXJzZSAgICB7Qm9vbGVhbn0gICAgICAgICAgICAgICAgICAgICAgW2luXSBzZXQgYSBkaXJlY3Rpb24gc3RyaW5nIGZvciB0cmFuc2l0aW9uLiB0cnVlOnJldmVyc2UgLyBmYWxzZTpub21hbCAob3B0aW9uYWwpXHJcbiAgICAgICAgICogQHBhcmFtIG9wdGlvbnMgICAge05hdmlnYXRlT3B0aW9uc30gICAgICAgICAgICAgIFtpbl0gc2V0IGEgb3B0aW9ucyBvYmplY3QgZm9yIEJhY2tib25lLlJvdXRlci5uYXZpZ2F0ZSgpLiAob3B0aW9uYWwpXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIOODiOODg+ODl+ODmuODvOOCuOOBi+OCieOBrueUu+mdoumBt+enu1xyXG4gICAgICAgICAqIFN1YkZsb3cg44GM5oyH5a6a44GV44KM44Gm44GE44Gf5aC05ZCI44Gv44Kv44Oq44Ki44GV44KM44KLXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gdG8gICAgICAgICB7U3RyaW5nfFBhZ2VTdGFja3xQYWdlU3RhY2tbXX0gW2luXSDpgbfnp7sgVVJMIC8gUGFnZVN0YWNrT3B0aW9ucyDjgqrjg5bjgrjjgqfjgq/jg4gv6YWN5YiXXHJcbiAgICAgICAgICogQHBhcmFtIHRyYW5zaXRpb24ge1N0cmluZ30gICAgICAgICAgICAgICAgICAgICAgIFtpbl0gdHJhbnNpdGlvbiDjgavkvb/nlKjjgZnjgosgZWZmZWN0IOOCkuaMh+WumiAo5Lu75oSPKVxyXG4gICAgICAgICAqIEBwYXJhbSByZXZlcnNlICAgIHtCb29sZWFufSAgICAgICAgICAgICAgICAgICAgICBbaW5dIHRyYW5zaXRpb24g44Gr5L2/55So44GZ44KLIGRpcmVjdGlvbiDjgpLmjIflrpogdHJ1ZTpyZXZlcnNlL2ZhbHNlOumAmuW4uCAo5Lu75oSPKVxyXG4gICAgICAgICAqIEBwYXJhbSBvcHRpb25zICAgIHtOYXZpZ2F0ZU9wdGlvbnN9ICAgICAgICAgICAgICBbaW5dIEJhY2tib25lLlJvdXRlci5uYXZpZ2F0ZSgpIOOBq+a4oeOBleOCjOOCi+OCquODl+OCt+ODp+ODsyAo5Lu75oSPKVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgbmF2aWdhdGVGcm9tVG9wKFxyXG4gICAgICAgICAgICB0bz86IHN0cmluZyB8IFBhZ2VTdGFjayB8IFBhZ2VTdGFja1tdLFxyXG4gICAgICAgICAgICB0cmFuc2l0aW9uPzogc3RyaW5nLFxyXG4gICAgICAgICAgICByZXZlcnNlPzogYm9vbGVhbixcclxuICAgICAgICAgICAgb3B0aW9ucz86IE5hdmlnYXRlT3B0aW9uc1xyXG4gICAgICAgICk6IHZvaWQge1xyXG4gICAgICAgICAgICBsZXQgc3RhY2sgPSBSb3V0ZXIuZ2V0SnFtSGlzdG9yeSgpLnN0YWNrO1xyXG4gICAgICAgICAgICBsZXQgY3VycmVudFBhZ2UgPSBzdGFja1tSb3V0ZXIuZ2V0SnFtSGlzdG9yeSgpLmFjdGl2ZUluZGV4XTtcclxuICAgICAgICAgICAgbGV0IF90cmFuc2l0aW9uID0gdHJhbnNpdGlvbiB8fCBjdXJyZW50UGFnZS50cmFuc2l0aW9uO1xyXG4gICAgICAgICAgICBsZXQgX3JldmVyc2UgPSAobnVsbCAhPSByZXZlcnNlKSA/IHJldmVyc2UgOiB0cnVlO1xyXG4gICAgICAgICAgICBsZXQgZGVzdFN0YWNrczogUGFnZVN0YWNrW10gPSAoKCk6IFBhZ2VTdGFja1tdID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICghdG8pIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXCJzdHJpbmdcIiA9PT0gdHlwZW9mIHRvKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDxQYWdlU3RhY2tbXT5beyByb3V0ZTogdG8gfV07XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRvIGluc3RhbmNlb2YgQXJyYXkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdG87XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiA8UGFnZVN0YWNrW10+W3RvXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSkoKTtcclxuXHJcbiAgICAgICAgICAgIC8vIOaMh+WumuOBleOCjOOBnyBTdWJGbG93IOOCkuWJiumZpFxyXG4gICAgICAgICAgICBzdGFjay5mb3JFYWNoKCh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIHZhbHVlW1JvdXRlci5TVUJGTE9XX1BBUkFNXTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyDliJ3mnJ/jg5rjg7zjgrjjgasgU3ViRmxvdyDjg5Hjg6njg6Hjg7zjgr/jgpLmjIflrppcclxuICAgICAgICAgICAgc3RhY2tbMF1bUm91dGVyLlNVQkZMT1dfUEFSQU1dID0ge1xyXG4gICAgICAgICAgICAgICAgb3BlcmF0aW9uOiBcImJlZ2luXCIsXHJcbiAgICAgICAgICAgICAgICBkZXN0QmFzZTogc3RhY2tbMF0uaGFzaCwgICAgLy8g5Yid5pyf44Oa44O844K444Gu44OP44OD44K344OlXHJcbiAgICAgICAgICAgICAgICBkZXN0U3RhY2tzOiBkZXN0U3RhY2tzLFxyXG4gICAgICAgICAgICAgICAgYWRkaXRpb25hbERpc3RhbmNlOiAwLFxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgUm91dGVyLm5hdmlnYXRlKG51bGwsIF90cmFuc2l0aW9uLCBfcmV2ZXJzZSwgJC5leHRlbmQoe30sIG9wdGlvbnMsIHtcclxuICAgICAgICAgICAgICAgIHN1YkZsb3c6IHtcclxuICAgICAgICAgICAgICAgICAgICBvcGVyYXRpb246IFwiZW5kXCIsXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBCYWNrIHRvIHByZXZpb3VzIGhpc3RvcnkuXHJcbiAgICAgICAgICogSXQncyBzYW1lIGFzIGJyb3dzZXIgYmFjayBidXR0b24ncyBiZWhhdmlvdXIuXHJcbiAgICAgICAgICogW05vdGVdIElmIHNldCB0aGUgalFNOiBkYXRhLXJlbD1cImJhY2tcIiwgd29yayBhcyB3ZWxsLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiDlsaXmrbTjgpLmiLvjgotcclxuICAgICAgICAgKiDjg5bjg6njgqbjgrbjga7miLvjgovjg5zjgr/jg7PjgajlkIzjgZjmjJnli5XjgIJcclxuICAgICAgICAgKiBqUU06IGRhdGEtcmVsPVwiYmFja1wiIOOCkuaMh+WumuOBl+OBpuOCguWQjOOBmOOBp+OBguOCi+OBk+OBqOOBq+azqOaEj+OAglxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYmFjaygpOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKCEhUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5pbk5hdmlnYXRpb24pIHtcclxuICAgICAgICAgICAgICAgIC8vIOOBmeOBp+OBqyBOYXZpZ2F0aW9uIOS4reOBp+OBguOCjOOBsOaKkeatolxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJSb3V0ZXIuYmFjaygpIGNhbGxlZCBpbiBuYXZpZ2F0aW9uIHByb2MuXCIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKFJvdXRlci5pc1RvcFBhZ2UoKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gVG9wIOODmuODvOOCuOOBq+aMh+WumuOBleOCjOOBpuOBhOOCjOOBsOe1guS6hlxyXG4gICAgICAgICAgICAgICAgbGV0IGFwcCA9ICg8YW55Pm5hdmlnYXRvcikuYXBwIHx8IHt9O1xyXG4gICAgICAgICAgICAgICAgaWYgKCEhYXBwLmV4aXRBcHApIHtcclxuICAgICAgICAgICAgICAgICAgICBhcHAuZXhpdEFwcCgpOyAgICAvLyBub3RlOiBuZXZlciBleGl0IG9uIGlPU1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mbyA9IHtcclxuICAgICAgICAgICAgICAgIGluTmF2aWdhdGlvbjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGNhbGxlZEJlZm9yZVJvdXRlQ2hhbmdlOiB0cnVlLFxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLy8g44Oa44O844K46YG356e76ZaL5aeL6YCa55+lXHJcbiAgICAgICAgICAgIF9iZWZvcmVSb3V0ZUNoYW5nZSgpXHJcbiAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgJC5tb2JpbGUuYmFjaygpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5mYWlsKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiYmVmb3JlIHJvdXRlIGNoYW5nZSBjYWxsLCBmYWlsZWQuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8gPSB7fTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIFN0b3JlIEludGVudCBvYmplY3QuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIEludGVudCDjgpLmoLzntI1cclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHB1c2hJbnRlbnQoaW50ZW50OiBJbnRlbnQpOiB2b2lkIHtcclxuICAgICAgICAgICAgUm91dGVyLnNfbGFzdEludGVudCA9ICQuZXh0ZW5kKHRydWUsIFJvdXRlci5zX2xhc3RJbnRlbnQsIGludGVudCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogR2V0IEludGVudCBvYmplY3QuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIEludGVudCDjgpLlj5blvpdcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHBvcEludGVudCgpOiBJbnRlbnQge1xyXG4gICAgICAgICAgICBsZXQgaW50ZW50ID0gUm91dGVyLnNfbGFzdEludGVudDtcclxuICAgICAgICAgICAgUm91dGVyLnNfbGFzdEludGVudCA9IHt9O1xyXG4gICAgICAgICAgICByZXR1cm4gaW50ZW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIEdldCBxdWVyeSBwYXJhbWV0ZXJzLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiBxdWVyeSBwYXJhbWV0ZXIg44Gr5oyH5a6a44GV44KM44Gf5byV5pWw44Gu5Y+W5b6XXHJcbiAgICAgICAgICog44Oa44O844K46YG356e75Lit44Gr44Gu44G/44Ki44Kv44K744K55Y+v6IO9IChwYWdlYmVmb3JlY3JlYXRlIO+9niBwYWdlY2hhbmdlKVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgZ2V0UXVlcnlQYXJhbWV0ZXJzKCk6IGFueSB7XHJcbiAgICAgICAgICAgIGlmIChSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLmludGVudCAmJiBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLmludGVudC5wYXJhbXMpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLmludGVudC5wYXJhbXNbXCJxdWVyeVBhcmFtc1wiXTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogQmVnaW4gc3ViIGZsb3cgdHJhbnNhY3Rpb24uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gdXJsICAgICAgICB7U3RyaW5nfSAgICAgICAgICBbaW5dIHNldCBhIG5hdmlnYXRlIFVSTC4gKHJlbGF0aXZlIHBhdGggLyBhYnNvbHV0ZSBwYXRoIC8gZnJhZ21lbnQpXHJcbiAgICAgICAgICogQHBhcmFtIG9wdGlvbnMgICAge05hdmlnYXRlT3B0aW9uc30gW2luXSBzZXQgYSBvcHRpb25zIG9iamVjdCBmb3IgQmFja2JvbmUuUm91dGVyLm5hdmlnYXRlKCkuIChvcHRpb25hbClcclxuICAgICAgICAgKiBAcGFyYW0gdHJhbnNpdGlvbiB7U3RyaW5nfSAgICAgICAgICBbaW5dIHNldCBhIHRyYW5zaXRpb24gc3RyaW5nIChvcHRpb25hbClcclxuICAgICAgICAgKiBAcGFyYW0gcmV2ZXJzZSAgICB7Qm9vbGVhbn0gICAgICAgICBbaW5dIHNldCBhIGRpcmVjdGlvbiBzdHJpbmcgZm9yIHRyYW5zaXRpb24uIHRydWU6cmV2ZXJzZSAvIGZhbHNlOm5vbWFsIChvcHRpb25hbClcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICogc3ViIGZsb3cg44OI44Op44Oz44K244Kv44K344On44Oz44Gu6ZaL5aeLLlxyXG4gICAgICAgICAqIG5hdmlnYXRlKCkg44GuIOezluiho+ani+aWh1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHVybCAgICAgICAge1N0cmluZ30gICAgICAgICAgW2luXSDpgbfnp7sgVVJMIOOCkuaMh+WumiAo55u45a++44OR44K5L+e1tuWvvuODkeOCuS/jg5Xjg6njgrDjg6Hjg7Pjg4gpXHJcbiAgICAgICAgICogQHBhcmFtIG9wdGlvbnMgICAge05hdmlnYXRlT3B0aW9uc30gW2luXSBCYWNrYm9uZS5Sb3V0ZXIubmF2aWdhdGUoKSDjgavmuKHjgZXjgozjgovjgqrjg5fjgrfjg6fjg7MgKOS7u+aEjylcclxuICAgICAgICAgKiBAcGFyYW0gdHJhbnNpdGlvbiB7U3RyaW5nfSAgICAgICAgICBbaW5dIHRyYW5zaXRpb24g44Gr5L2/55So44GZ44KLIGVmZmVjdCDjgpLmjIflrpogKOS7u+aEjylcclxuICAgICAgICAgKiBAcGFyYW0gcmV2ZXJzZSAgICB7Qm9vbGVhbn0gICAgICAgICBbaW5dIHRyYW5zaXRpb24g44Gr5L2/55So44GZ44KLIGRpcmVjdGlvbiDjgpLmjIflrpogdHJ1ZTpyZXZlcnNlL2ZhbHNlOumAmuW4uCAo5Lu75oSPKVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYmVnaW5TdWJGbG93KHVybDogc3RyaW5nLCBvcHRpb25zOiBOYXZpZ2F0ZU9wdGlvbnMsIHRyYW5zaXRpb24/OiBzdHJpbmcsIHJldmVyc2U/OiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGxldCBvcHQ6IE5hdmlnYXRlT3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCBvcHRpb25zKTtcclxuICAgICAgICAgICAgb3B0LnN1YkZsb3cgPSBvcHQuc3ViRmxvdyB8fCB7IG9wZXJhdGlvbjogXCJiZWdpblwiIH07XHJcbiAgICAgICAgICAgIGlmIChcImJlZ2luXCIgIT09IG9wdC5zdWJGbG93Lm9wZXJhdGlvbikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcImxvZ2ljIGVycm9yLiBpbnZhbGlkIHN1YmZsb3cgb3BlcmF0aW9uLiBbb3BlcmF0aW9uOiBcIiArIG9wdC5zdWJGbG93Lm9wZXJhdGlvbiArIFwiXVwiKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBSb3V0ZXIubmF2aWdhdGUodXJsLCB0cmFuc2l0aW9uLCByZXZlcnNlLCBvcHQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIENvbW1pdCBzdWIgZmxvdyB0cmFuc2FjdGlvbi5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB0cmFuc2l0aW9uIHtTdHJpbmd9ICBbaW5dIHNldCBhIHRyYW5zaXRpb24gc3RyaW5nIChvcHRpb25hbClcclxuICAgICAgICAgKiBAcGFyYW0gcmV2ZXJzZSAgICB7Qm9vbGVhbn0gW2luXSBzZXQgYSBkaXJlY3Rpb24gc3RyaW5nIGZvciB0cmFuc2l0aW9uLiB0cnVlOnJldmVyc2UgLyBmYWxzZTpub21hbCAob3B0aW9uYWwpXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIHN1YiBmbG93IOODiOODqeODs+OCtuOCr+OCt+ODp+ODs+OBrue1guS6hi5cclxuICAgICAgICAgKiBuYXZpZ2F0ZSgpIOOBriDns5booaPmp4vmlodcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB0cmFuc2l0aW9uIHtTdHJpbmd9ICBbaW5dIHRyYW5zaXRpb24g44Gr5L2/55So44GZ44KLIGVmZmVjdCDjgpLmjIflrpogKOS7u+aEjylcclxuICAgICAgICAgKiBAcGFyYW0gcmV2ZXJzZSAgICB7Qm9vbGVhbn0gW2luXSB0cmFuc2l0aW9uIOOBq+S9v+eUqOOBmeOCiyBkaXJlY3Rpb24g44KS5oyH5a6aIHRydWU6cmV2ZXJzZS9mYWxzZTrpgJrluLggKOS7u+aEjylcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGNvbW1pdFN1YkZsb3codHJhbnNpdGlvbj86IHN0cmluZywgcmV2ZXJzZT86IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgICAgICAgICAgUm91dGVyLm5hdmlnYXRlKG51bGwsIHRyYW5zaXRpb24sIHJldmVyc2UsIHtcclxuICAgICAgICAgICAgICAgIHN1YkZsb3c6IHtcclxuICAgICAgICAgICAgICAgICAgICBvcGVyYXRpb246IFwiZW5kXCIsXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIENhbmNlbCBzdWIgZmxvdyB0cmFuc2FjdGlvbi5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB0cmFuc2l0aW9uIHtTdHJpbmd9ICBbaW5dIHNldCBhIHRyYW5zaXRpb24gc3RyaW5nIChvcHRpb25hbClcclxuICAgICAgICAgKiBAcGFyYW0gcmV2ZXJzZSAgICB7Qm9vbGVhbn0gW2luXSBzZXQgYSBkaXJlY3Rpb24gc3RyaW5nIGZvciB0cmFuc2l0aW9uLiB0cnVlOnJldmVyc2VbZGVmYXVsdF0gLyBmYWxzZTpub21hbCAob3B0aW9uYWwpXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIHN1YiBmbG93IOODiOODqeODs+OCtuOCr+OCt+ODp+ODs+OBruOCreODo+ODs+OCu+ODqy5cclxuICAgICAgICAgKiBuYXZpZ2F0ZSgpIOOBriDns5booaPmp4vmlodcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB0cmFuc2l0aW9uIHtTdHJpbmd9ICBbaW5dIHRyYW5zaXRpb24g44Gr5L2/55So44GZ44KLIGVmZmVjdCDjgpLmjIflrpogKOS7u+aEjylcclxuICAgICAgICAgKiBAcGFyYW0gcmV2ZXJzZSAgICB7Qm9vbGVhbn0gW2luXSB0cmFuc2l0aW9uIOOBq+S9v+eUqOOBmeOCiyBkaXJlY3Rpb24g44KS5oyH5a6aIHRydWU6cmV2ZXJzZVvml6LlrppdL2ZhbHNlOumAmuW4uCAo5Lu75oSPKVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgY2FuY2VsU3ViRmxvdyh0cmFuc2l0aW9uPzogc3RyaW5nLCByZXZlcnNlPzogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgICAgICAgICAvLyDotbfngrnjga7jg5rjg7zjgrjjgavmiLvjgotcclxuICAgICAgICAgICAgbGV0IGJhc2VJbmZvID0gUm91dGVyLmRldGVjdFN1YkZsb3dCYXNlSW5mbygpO1xyXG4gICAgICAgICAgICBiYXNlSW5mby5zdWJGbG93UGFyYW0uYWRkaXRpb25hbERpc3RhbmNlID0gMDtcclxuICAgICAgICAgICAgUm91dGVyLm5hdmlnYXRlKG51bGwsIHRyYW5zaXRpb24sXHJcbiAgICAgICAgICAgICAgICAobnVsbCAhPSByZXZlcnNlKSA/IHJldmVyc2UgOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHN1YkZsb3c6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3BlcmF0aW9uOiBcImVuZFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXN0U3RhY2tzOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIENoZWNrIGluIHN1YiBmbG93LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiBzdWIgZmxvdyDlhoXjgafjgYLjgovjgYvliKTlrppcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGlzSW5TdWJGbG93KCk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICBsZXQgc3RhY2sgPSBSb3V0ZXIuZ2V0SnFtSGlzdG9yeSgpLnN0YWNrO1xyXG4gICAgICAgICAgICBsZXQgaGFzID0gXy5zb21lKHN0YWNrLCAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAhIXZhbHVlW1JvdXRlci5TVUJGTE9XX1BBUkFNXTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBoYXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogQ2hlY2sgZnJvbSBoYXNoIGNoYW5nZWQgbmF2aWdhdGlvbi5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICogSGFzaCDlpInmm7TjgavjgojjgaPjgaYgTmF2aWdhdGUg44GM6LW344GT44Gj44Gf44GL5Yik5a6aXHJcbiAgICAgICAgICogXCJwYWdlY2hhbmdlXCIg44GM55m655Sf44GZ44KL44G+44Gn44Gr5Yik5a6a5Y+v6IO9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBmcm9tSGFzaENoYW5nZWQoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIC8vIHBvc2l0aXZlTmF2aWdhdGUgPSBmYWxzZSDjga/lkKvjgoHjgarjgYRcclxuICAgICAgICAgICAgcmV0dXJuIFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8uaW5OYXZpZ2F0aW9uICYmIChudWxsID09IFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8ucG9zaXRpdmVOYXZpZ2F0ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogUmVnaXN0ZXIgcGFnZSBzdGFjay5cclxuICAgICAgICAgKiBTZXQgcmVnaXN0ZXJlZCByb3V0ZShzKSB0byBhZGQgdG8gcGFnZSBzdGFjayBvbiB0aGUgYmFzaXMgb2YgdGhlIHByZXNlbnQgc3RhY2sgcG9zaXRpb24uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gcGFnZVN0YWNrICAgIHtQYWdlU3RhY2t8UGFnZVN0YWNrW119ICAgW2luXSBQYWdlU3RhY2tPcHRpb25zIG9iamVjdCBvciBhcnJheS5cclxuICAgICAgICAgKiBAcGFyYW0gd2l0aE5hdmlnYXRlIHtCb29sZWFufSAgICAgICAgICAgICAgICAgW2luXSB0cnVlOiB3aXRoIG5hdmlnYXRlIGZpbmFsIHN0YWNrLiAoZGVmYXVsdCkgLyBmYWxzZTogbm90IG5hdmlnYXRlLlxyXG4gICAgICAgICAqIEBwYXJhbSBvcHRpb25zICAgICAge05hdmlnYXRlT3B0aW9uc30gICAgICAgICBbaW5dIHNldCBhIG9wdGlvbnMgb2JqZWN0IGZvciBCYWNrYm9uZS5Sb3V0ZXIubmF2aWdhdGUoKS4ob3B0aW9uYWwpXHJcbiAgICAgICAgICogQHJldHVybiB7Qm9vbGVhbn0gdHJ1ZTogc3VjY2VlZGVkIC8gZmFsc2U6IGZhaWxlZFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiDjg5rjg7zjgrjjgrnjgr/jg4Pjgq/nmbvpjLJcclxuICAgICAgICAgKiDnmbvpjLLmuIjjgb/jga4gcm91dGUg44KS5oyH5a6a44GX44Gm44CB54++5Zyo44Gu5L2N572u44KS5Z+654K544Gr44Oa44O844K444K544K/44OD44Kv44Gr55m76YyyXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gcGFnZVN0YWNrICAgIHtQYWdlU3RhY2t8UGFnZVN0YWNrW119ICAgW2luXSBQYWdlU3RhY2tPcHRpb25zIOOCquODluOCuOOCp+OCr+ODiC/phY3liJdcclxuICAgICAgICAgKiBAcGFyYW0gd2l0aE5hdmlnYXRlIHtCb29sZWFufSAgICAgICAgICAgICAgICAgW2luXSB0cnVlOiDmnIDlvozjga7jgrnjgr/jg4Pjgq/jgavlr77jgZfjgabjg5rjg7zjgrjpgbfnp7vjgZnjgosuIChkZWZhdWx0KSAvIGZhbHNlOiDjg5rjg7zjgrjpgbfnp7vjgZfjgarjgYQuXHJcbiAgICAgICAgICogQHBhcmFtIG9wdGlvbnMgICAgICB7TmF2aWdhdGVPcHRpb25zfSAgICAgICAgIFtpbl0gQmFja2JvbmUuUm91dGVyLm5hdmlnYXRlKCkg44Gr5rih44GV44KM44KL44Kq44OX44K344On44OzICjku7vmhI8pXHJcbiAgICAgICAgICogQHJldHVybiB7Qm9vbGVhbn0gdHJ1ZTog5oiQ5YqfIC8gZmFsc2U6IOWkseaVl+OAglxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgcmVnaXN0ZXJQYWdlU3RhY2socGFnZVN0YWNrOiBQYWdlU3RhY2ssIHdpdGhOYXZpZ2F0ZT86IGJvb2xlYW4sIG9wdGlvbnM/OiBOYXZpZ2F0ZU9wdGlvbnMpOiBib29sZWFuO1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgcmVnaXN0ZXJQYWdlU3RhY2socGFnZVN0YWNrOiBQYWdlU3RhY2tbXSwgd2l0aE5hdmlnYXRlPzogYm9vbGVhbiwgb3B0aW9ucz86IE5hdmlnYXRlT3B0aW9ucyk6IGJvb2xlYW47XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyByZWdpc3RlclBhZ2VTdGFjayhwYWdlU3RhY2s6IGFueSwgd2l0aE5hdmlnYXRlPzogYm9vbGVhbiwgb3B0aW9ucz86IE5hdmlnYXRlT3B0aW9ucyk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICBsZXQgbmV3U3RhY2tzID0gW107XHJcbiAgICAgICAgICAgIGxldCBmYWlsZWQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHBhZ2VTdGFjayA9IChwYWdlU3RhY2sgaW5zdGFuY2VvZiBBcnJheSkgPyBwYWdlU3RhY2sgOiBbcGFnZVN0YWNrXTtcclxuICAgICAgICAgICAgd2l0aE5hdmlnYXRlID0gKG51bGwgPT0gd2l0aE5hdmlnYXRlKSA/IGZhbHNlIDogd2l0aE5hdmlnYXRlO1xyXG5cclxuICAgICAgICAgICAgKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBtYWtlU3RhY2sgPSAoaW5mbzogUGFnZVN0YWNrKTogYW55ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgdXJsOiBzdHJpbmc7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHN0YWNrOiBPYmplY3Q7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBmcmFnbWVudCA9IEJhY2tib25lLmhpc3RvcnkuZ2V0RnJhZ21lbnQoaW5mby5yb3V0ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGNvbnRleHQgPSA8Um91dGVDb250ZXh0Pl8uZmluZCg8YW55PlJvdXRlci5zX3Jvb3RDb250ZXh0cywgKGNvbnRleHQ6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29udGV4dC5yZWdleHAudGVzdChmcmFnbWVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjb250ZXh0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcInJvdXRlIGlzIG5vdCByZWdpc3RlcmVkLiByb3V0ZTogXCIgKyBpbmZvLnJvdXRlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXJsID0gUm91dGVyLnBhdGhUb0pxbURhdGFVcmwoY29udGV4dC5wYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHN0YWNrID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByb3V0ZTogaW5mby5yb3V0ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFnZVVybDogdXJsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogaW5mby50aXRsZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogaW5mby50cmFuc2l0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB1cmw6IHVybCxcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzdGFjaztcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIG4gPSBwYWdlU3RhY2subGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHN0YWNrID0gbWFrZVN0YWNrKHBhZ2VTdGFja1tpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFzdGFjaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmYWlsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdTdGFja3MucHVzaChzdGFjayk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KSgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGZhaWxlZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gUm91dGVyIOOBruWBnOatolxyXG4gICAgICAgICAgICAgICAgbGV0IHJlc3RhcnQgPSBSb3V0ZXIuc3RvcCgpO1xyXG4gICAgICAgICAgICAgICAgbGV0IHNpbGVudExlbmd0aCA9IG5ld1N0YWNrcy5sZW5ndGggLSAxO1xyXG4gICAgICAgICAgICAgICAgbGV0IGZpbmFsSW5kZXggPSBuZXdTdGFja3MubGVuZ3RoIC0gMTtcclxuXHJcbiAgICAgICAgICAgICAgICBSb3V0ZXIuZ2V0SnFtSGlzdG9yeSgpLmNsZWFyRm9yd2FyZCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBuID0gc2lsZW50TGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24uaGFzaCA9IG5ld1N0YWNrc1tpXS5yb3V0ZTtcclxuICAgICAgICAgICAgICAgICAgICBSb3V0ZXIuZ2V0SnFtSGlzdG9yeSgpLnN0YWNrLnB1c2gobmV3U3RhY2tzW2ldKTtcclxuICAgICAgICAgICAgICAgICAgICBSb3V0ZXIuZ2V0SnFtSGlzdG9yeSgpLmFjdGl2ZUluZGV4ID0gUm91dGVyLmdldEpxbUhpc3RvcnkoKS5zdGFjay5sZW5ndGggLSAxO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIGZpbmFsIHN0YWNrIHdpdGggbmF2aWdhdGVcclxuICAgICAgICAgICAgICAgIGlmICh3aXRoTmF2aWdhdGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgdHJhbnNpdGlvbiA9ICgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9IFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8udHJhbnNpdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8udHJhbnNpdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXdTdGFja3NbZmluYWxJbmRleF0udHJhbnNpdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGxldCByZXZlcnNlID0gKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgIT0gUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5yZXZlcnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5yZXZlcnNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSkoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdGFydCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIFJvdXRlci5zdGFydCh7IHNpbGVudDogdHJ1ZSB9KTtcclxuICAgICAgICAgICAgICAgICAgICBSb3V0ZXIubmF2aWdhdGUobmV3U3RhY2tzW2ZpbmFsSW5kZXhdLnJvdXRlLCB0cmFuc2l0aW9uLCByZXZlcnNlLCBvcHRpb25zKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24uaGFzaCA9IG5ld1N0YWNrc1tmaW5hbEluZGV4XS5yb3V0ZTtcclxuICAgICAgICAgICAgICAgICAgICBSb3V0ZXIuZ2V0SnFtSGlzdG9yeSgpLnN0YWNrLnB1c2gobmV3U3RhY2tzW2ZpbmFsSW5kZXhdKTtcclxuICAgICAgICAgICAgICAgICAgICBSb3V0ZXIuZ2V0SnFtSGlzdG9yeSgpLmFjdGl2ZUluZGV4ID0gUm91dGVyLmdldEpxbUhpc3RvcnkoKS5zdGFjay5sZW5ndGggLSAxO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIFJvdXRlciDjga7lho3plotcclxuICAgICAgICAgICAgICAgIGlmIChyZXN0YXJ0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgUm91dGVyLnN0YXJ0KHsgc2lsZW50OiB0cnVlIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KSgpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogR2V0IGpRTSdzIGhpc3Rvcnkgb2JqZWN0XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIGpRTSDjga4gSGlzdG9yeSDjgqrjg5bjgrjjgqfjgq/jg4jjga7lj5blvpdcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgZ2V0SnFtSGlzdG9yeSgpOiBhbnkge1xyXG4gICAgICAgICAgICByZXR1cm4gJC5tb2JpbGUubmF2aWdhdGUuaGlzdG9yeTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gcHJpdmF0ZSBzdGF0aWMgbWV0aG9kc1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogT3ZlcnJpZGU6IEJhY2tib25lLkhpc3RvcnkubG9hZFVybCgpLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICogQmFja2JvbmUuSGlzdG9yeS5sb2FkVXJsKCkg44Gu44Kq44O844OQ44O844Op44Kk44OJXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGN1c3RvbUxvYWRVcmwoZnJhZ21lbnQ6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICBsZXQgaGFuZGxlZCA9IFJvdXRlci5zX2xvYWRVcmwoZnJhZ21lbnQpO1xyXG4gICAgICAgICAgICBpZiAoIWhhbmRsZWQpIHtcclxuICAgICAgICAgICAgICAgIFJvdXRlci5vblJvdXRlRmFpbGVkKGZyYWdtZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gaGFuZGxlZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBPdmVycmlkZTogJC5tb2JpbGUuYmFjaygpLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogZmFpbCBzYWZlIHByb2Nlc3NpbmcuXHJcbiAgICAgICAgICogIElmIHVzaW5nIEJhY2tib25lJ3MgUm91dGVyLFxyXG4gICAgICAgICAqICB0aGlzIGNsYXNzIHVudXNlcyBoaXN0b3J5IG9iamVjdCBvZiBqUXVlcnkgTW9iaWxlIDEuNCxcclxuICAgICAgICAgKiAgYW5kIHN0YW5kYXJkaXplIGFzIGJyb3dzZXIgYmFjayBidXR0b24ncyBiZWhhdmlvdXIuIChqUU0gMS4zIGNvbXBhcmFibGUpXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiAkLm1vYmlsZS5iYWNrKCkg44Gu44Kq44O844OQ44O844Op44Kk44OJXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBbVEJEXSBmYWlsIHNhZmUg5Yem55CGXHJcbiAgICAgICAgICogIEJhY2tib25lIOOBriBSb3V0ZXIg44KS5L2/55So44GX44Gm44GE44KL5aC05ZCI44CBXHJcbiAgICAgICAgICogIGpRdWVyeSBNb2JpbGUgMS40IOS7pemZjeOBruWGhemDqOOBriBIaXN0b3J5IOeuoeeQhuOBr+S9v+eUqOOBm+OBmuOBq1xyXG4gICAgICAgICAqICAxLjMg55u45b2T44Gu44OW44Op44Km44K244GuW+aIu+OCi13jga7mjJnli5XjgavntbHkuIDjgZnjgovjgIJcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgY3VzdG9tSnFtQmFjaygpOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKFJvdXRlci5pc1JvdXRpbmcoKSkge1xyXG4gICAgICAgICAgICAgICAgaGlzdG9yeS5iYWNrKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBqUU0g5pei5a6a5Yem55CGXHJcbiAgICAgICAgICAgICAgICBSb3V0ZXIuc19iYWNrKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBCaW5kIGV2ZW50cy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIOOCpOODmeODs+ODiOODkOOCpOODs+ODiVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBiaW5kRXZlbnRzKCk6IHZvaWQge1xyXG4gICAgICAgICAgICAkKGRvY3VtZW50KVxyXG4gICAgICAgICAgICAgICAgLm9uZShcInBhZ2VjaGFuZ2VcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChSb3V0ZXIuc19pbml0T3B0aW9ucy5hbmNob3JWY2xpY2spIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYW5jaG9yIHZjbGlja1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKGRvY3VtZW50KS5vbihcInZjbGlja1wiLCBcIltocmVmXVwiLCAoZXZlbnQ6IEpRdWVyeUV2ZW50T2JqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSb3V0ZXIub25BbmNob3JWY2xpY2tlZChldmVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAub24oXCJwYWdlYmVmb3Jlc2hvd1wiLCAoZXZlbnQ6IEpRdWVyeUV2ZW50T2JqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXCJkYXRhLWJhY2stZHN0XCIg44KSIHBhZ2Ug44Gr6Kit5a6aXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgIT0gUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5iYWNrRGVzdGluYXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGFjdGl2ZTogT2JqZWN0ID0gUm91dGVyLmdldEpxbUhpc3RvcnkoKS5nZXRBY3RpdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlW1JvdXRlci5CQUNLX0RFU1RJTkFUSU9OX1VSTF0gPSBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLmJhY2tEZXN0aW5hdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLm9uKFwicGFnZXNob3dcIiwgKGV2ZW50OiBKUXVlcnlFdmVudE9iamVjdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBhY3RpdmU6IE9iamVjdCA9IFJvdXRlci5nZXRKcW1IaXN0b3J5KCkuZ2V0QWN0aXZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFjdGl2ZVtSb3V0ZXIuU1VCRkxPV19QQVJBTV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGFjdGl2ZVtSb3V0ZXIuU1VCRkxPV19QQVJBTV07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5vbihcInBhZ2VjaGFuZ2UgcGFnZWNvbnRhaW5lcmxvYWRmYWlsZWRcIiwgKGV2ZW50OiBKUXVlcnlFdmVudE9iamVjdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8gPSB7fTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICA7XHJcblxyXG4gICAgICAgICAgICAvLyBiYWNrIGtleSBhc3NpZ25cclxuICAgICAgICAgICAgQ0RQLnNldEJhY2tCdXR0b25IYW5kbGVyKFJvdXRlci5iYWNrKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBTdG9yZSB0aGUgUm9vdENvbnRleHQuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqIEBwYXJhbSBuYW1lICAgIHtTdHJpbmd9ICAgICAgIFtpbl0gbmFtZSBvZiByb3V0ZVxyXG4gICAgICAgICAqIEBwYXJhbSBjb250ZXh0IHtSb3V0ZUNvbnRleHR9IFtpbl0gY29udGV4dCBvYmplY3RcclxuICAgICAgICAgKiBAcmV0dXJuIHRydWU6IHN1Y2NlZWRlZCAvIGZhbHNlOiBhbHJlYWR5IHJlZ2lzdGVyZWRcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICogUm9vdENvbnRleHQg44Gu5qC857SNXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqIEBwYXJhbSBuYW1lICAgIHtTdHJpbmd9ICAgICAgIFtpbl0gcm91dGUg5ZCNXHJcbiAgICAgICAgICogQHBhcmFtIGNvbnRleHQge1JvdXRlQ29udGV4dH0gW2luXSBjb250ZXh0IOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICAgICAqIEByZXR1cm4gdHJ1ZTog55m76Yyy5oiQ5YqfIC8gZmFsc2U6IOOBmeOBp+OBq+eZu+mMsuOBleOCjOOBpuOBhOOCi1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIHB1c2hDb250ZXh0KG5hbWU6IHN0cmluZywgY29udGV4dDogUm91dGVDb250ZXh0KTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIGlmICghIVJvdXRlci5zX3Jvb3RDb250ZXh0c1tuYW1lXSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJsb2dpYyBlcnJvci4gcm91dGUgaXMgYWxyZWFkeSByZWdpc3RlcmVkLiBuYW1lOiBcIiArIG5hbWUpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFJvdXRlci5zX3Jvb3RDb250ZXh0c1tuYW1lXSA9IGNvbnRleHQ7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIENoZWNrIGlmICQubW9iaWxlLmluaXRpYWxpemVQYWdlKCkgaXMgY2FsbGVkIG9yIG5vdCwgYW5kIGNhbGwgaXQgaWYgbmVlZGVkLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKiBAcGFyYW0gdXJsIHtTdHJpbmd9ICBbaW5dIHNldCBhIG5hdmlnYXRlIFVSTC4gKHJlbGF0aXZlIHBhdGggLyBhYnNvbHV0ZSBwYXRoIC8gZnJhZ21lbnQpXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqICQubW9iaWxlLmluaXRpYWxpemVQYWdlKCkg44GM5ZG844Gw44KM44Gm44GE44KL44GL56K66KqN44GX44CB5b+F6KaB44Gq44KJ5Yid5pyf5YyW44GZ44KL44CCXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqIEBwYXJhbSB1cmwge1N0cmluZ30gW2luXSDpgbfnp7sgVVJMIOOCkuaMh+WumiAo55u45a++44OR44K5L+e1tuWvvuODkeOCuS/jg5Xjg6njgrDjg6Hjg7Pjg4gpXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgaW5pdEZpcnN0UGFnZUlmTmVlZGVkKHVybDogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIGlmICghJC5tb2JpbGUuYXV0b0luaXRpYWxpemVQYWdlKSB7XHJcbiAgICAgICAgICAgICAgICAkKGRvY3VtZW50KS5vbmUoXCJwYWdlYmVmb3JlY2hhbmdlXCIsIChldmVudDogSlF1ZXJ5RXZlbnRPYmplY3QsIGRhdGE6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGEudG9QYWdlID0gRnJhbWV3b3JrLnRvVXJsKHVybCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICQubW9iaWxlLmluaXRpYWxpemVQYWdlKCk7XHJcbiAgICAgICAgICAgICAgICAkLm1vYmlsZS5hdXRvSW5pdGlhbGl6ZVBhZ2UgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIENoZWNrIGZvciBjdXJyZW50IHBhZ2UgaXMgdG9wLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKiBAcmV0dXJuIHRydWU6IHRvcCBwYWdlIC8gZmFsc2U6IG5vdCB0b3AgcGFnZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiDnj77lnKjjga7jg5rjg7zjgrjjgYwgdG9wIOOBq+aMh+WumuOBleOCjOOBpuOBhOOCi+OBi+WIpOWumlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKiBAcmV0dXJuIHRydWU6IHRvcCDmjIflrpogLyBmYWxzZTogdG9wIOOBp+OBr+OBquOBhFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGlzVG9wUGFnZSgpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgbGV0IGZyYWdtZW50ID0gQmFja2JvbmUuaGlzdG9yeS5nZXRGcmFnbWVudCgkLm1vYmlsZS5wYXRoLnBhcnNlVXJsKGxvY2F0aW9uLmhyZWYpLmhhc2gpO1xyXG4gICAgICAgICAgICBsZXQgY29udGV4dCA9IDxSb3V0ZUNvbnRleHQ+Xy5maW5kKDxhbnk+Um91dGVyLnNfcm9vdENvbnRleHRzLCAoY29udGV4dDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY29udGV4dC5yZWdleHAudGVzdChmcmFnbWVudCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gKG51bGwgPT0gY29udGV4dCkgPyBmYWxzZSA6IGNvbnRleHQudG9wO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIENhbGxlZCB3aGVuIGFuY2hvciByZWNlaXZlZCBcInZjbGlja1wiIGV2ZW50LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKiBAcmV0dXJuIHRydWU6IG5lZWQgZGVmYXVsdCBwcm9jZXNzaW5nIC8gZmFsc2U6IG5lZWQgY3VzdG9tIHByb2Nlc3NpbmdcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICogYW5jaG9yIOOBjCB2Y2xpY2sg44GV44KM44Gf44Go44GN44Gr44Kz44O844Or44GV44KM44KLXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqIEByZXR1cm4gdHJ1ZTogZGVmYXVsdCDlh6bnkIYgLyBmYWxzZTog44Kr44K544K/44Og5Yem55CGXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgb25BbmNob3JWY2xpY2tlZChldmVudDogSlF1ZXJ5RXZlbnRPYmplY3QpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgaWYgKFJvdXRlci5pc0p1c3RCZWZvcmVWY2xpY2tlZCgpKSB7XHJcbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBSb3V0ZXIuZm9sbG93QW5jaG9yKGV2ZW50KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBBbmNob3IgcHJvY2Vzc2luZy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIGFuY2hvciDlh6bnkIZcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgZm9sbG93QW5jaG9yKGV2ZW50OiBKUXVlcnlFdmVudE9iamVjdCk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICBsZXQgJHRhcmdldCA9ICQoZXZlbnQuY3VycmVudFRhcmdldCk7XHJcbiAgICAgICAgICAgIGxldCB1cmw6IHN0cmluZyA9ICR0YXJnZXQuanFtRGF0YShcImhyZWZcIikgfHwgJHRhcmdldC5hdHRyKFwiaHJlZlwiKTtcclxuICAgICAgICAgICAgbGV0IHRyYW5zaXRpb246IHN0cmluZyA9ICR0YXJnZXQuanFtRGF0YShcInRyYW5zaXRpb25cIik7XHJcbiAgICAgICAgICAgIGxldCBkaXJlY3Rpb246IHN0cmluZyA9ICR0YXJnZXQuanFtRGF0YShcImRpcmVjdGlvblwiKTtcclxuICAgICAgICAgICAgbGV0IGJhY2tEc3Q6IGFueSA9ICR0YXJnZXQuYXR0cihSb3V0ZXIuREFUQV9CQUNLX0RFU1RJTkFUSU9OKTtcclxuICAgICAgICAgICAgbGV0IG5vSGFzaENoYW5nZTogYm9vbGVhbiA9ICR0YXJnZXQuYXR0cihSb3V0ZXIuREFUQV9OT19IQVNIX0NIQU5HRSkgP1xyXG4gICAgICAgICAgICAgICAgJHRhcmdldC5hdHRyKFJvdXRlci5EQVRBX05PX0hBU0hfQ0hBTkdFKSA9PT0gXCJ0cnVlXCIgOiBmYWxzZTtcclxuICAgICAgICAgICAgbGV0IG5vSHJlZkhhbmRsZTogYm9vbGVhbiA9ICR0YXJnZXQuYXR0cihSb3V0ZXIuREFUQV9OT19WQ0xJQ0tfSEFORExFKSA/XHJcbiAgICAgICAgICAgICAgICAkdGFyZ2V0LmF0dHIoUm91dGVyLkRBVEFfTk9fVkNMSUNLX0hBTkRMRSkgPT09IFwidHJ1ZVwiIDogZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAvKlxyXG4gICAgICAgICAgICAgKiAtIOaYjuekuueahOOBq+ODj+ODs+ODieODq+OBl+OBquOBhOaMh+WumuOBjOOBguOCi+WgtOWQiFxyXG4gICAgICAgICAgICAgKiAtIGpRTSDjga7jg5Xjg6njgrDjg6Hjg7Pjg4jjga7loLTlkIhcclxuICAgICAgICAgICAgICog5pei5a6a44Gu5Yem55CG44KS6KGM44GGXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBpZiAobm9IcmVmSGFuZGxlIHx8IFJvdXRlci5uZWVkRGVmYXVsdE9wZXJhdGlvbih1cmwpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gY3VzdG9tIGJlaGF2aWVyXHJcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoUm91dGVyLmlzQmFja0J1dHRvbkNsaWNrZWQoZXZlbnQpKSB7XHJcbiAgICAgICAgICAgICAgICBSb3V0ZXIuYmFjaygpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgUm91dGVyLm5hdmlnYXRlKHVybCwgdHJhbnNpdGlvbiwgISFkaXJlY3Rpb24sIHsgbm9IYXNoQ2hhbmdlOiBub0hhc2hDaGFuZ2UsIGJhY2tEZXN0aW5hdGlvbjogYmFja0RzdCB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIENoZWNrIGRlZmF1bHQgcHJvY2Vzc2luZyBuZWVkZWQuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqIEBwYXJhbSAgdXJsIHtTdHJpbmd9IFtpbl0gdXJsIHN0cmluZ1xyXG4gICAgICAgICAqIEByZXR1cm4gdHJ1ZTogbmVlZCBkZWZhdWx0IHByb2Nlc3NpbmcgLyBmYWxzZTogbmVlZCBub3RcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICog5pei5a6a44Gu5Yem55CG44KS6KGM44KP44Gb44KL44GL5Yik5a6aXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqIEBwYXJhbSAgdXJsIHtTdHJpbmd9IFtpbl0gdXJsIOaWh+Wtl+WIl1xyXG4gICAgICAgICAqIEByZXR1cm4gdHJ1ZTog5pei5a6a44Gu5Yem55CG44GM5b+F6KaBIC8gZmFsc2U6IOS4jeimgVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIG5lZWREZWZhdWx0T3BlcmF0aW9uKHVybDogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIGlmICghdXJsIHx8IChcIiNcIiA9PT0gdXJsKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoXCIjXCIgPT09IHVybFswXSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICFSb3V0ZXIuY2FuUmVzb2x2ZVJvdXRlKHVybCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBDaGVjayBzdGF0dXMgb2YgQmFja2JvbmUuUm91dGVyIGlmIHRoZXkgY2FuIHJlc29sdmUgcm91dGUuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqIEBwYXJhbSAgdXJsIHtTdHJpbmd9IFtpbl0gdXJsIOaWh+Wtl+WIl1xyXG4gICAgICAgICAqIEByZXR1cm4gdHJ1ZTogY2FuIHJlc29sdmUgLyBmYWxzZTogY2FuIG5vdFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiBCYWNrYm9uZS5Sb3V0ZXIg44GMIHJvdXRlIOOCkuino+axuuWPr+iDveOBi+WIpOWumlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKiBAcGFyYW0gIHVybCB7U3RyaW5nfSBbaW5dIHVybCDmloflrZfliJdcclxuICAgICAgICAgKiBAcmV0dXJuIHRydWU6IOino+axuuWPr+iDvSAvIGZhbHNlOiDop6PmsbrkuI3lj69cclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBjYW5SZXNvbHZlUm91dGUodXJsOiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgbGV0IGZyYWdtZW50ID0gQmFja2JvbmUuaGlzdG9yeS5nZXRGcmFnbWVudCh1cmwpO1xyXG4gICAgICAgICAgICByZXR1cm4gXy5hbnkoQmFja2JvbmUuaGlzdG9yeS5oYW5kbGVycywgZnVuY3Rpb24gKGhhbmRsZXI6IGFueSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGhhbmRsZXIucm91dGUudGVzdChmcmFnbWVudCkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogQ2hlY2sgXCJ2Y2xpY2tcIiBmaXJlZCBhdCB0aGUgbGFzdCBtaW51dGUuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiDnm7TliY3jgasgdmNsaWNrIOOBjOWRvOOBsOOCjOOBn+OBi+WIpOWumlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBpc0p1c3RCZWZvcmVWY2xpY2tlZCgpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgbGV0IGlzQmVmb3JlID0gKERhdGUubm93KCkgLSBSb3V0ZXIuc19sYXN0Q2xpY2tlZFRpbWUpIDwgUm91dGVyLkRFTEFZX1RJTUUgKiAyO1xyXG4gICAgICAgICAgICBSb3V0ZXIuc19sYXN0Q2xpY2tlZFRpbWUgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgICAgICByZXR1cm4gaXNCZWZvcmU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogQ2hlY2sgYmFjayBidXR0b24gY2xpY2tlZC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIEJhY2sgQnV0dG9uIOOBjOOCr+ODquODg+OCr+OBleOCjOOBn+OBi+WIpOWumlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBpc0JhY2tCdXR0b25DbGlja2VkKGV2ZW50OiBKUXVlcnlFdmVudE9iamVjdCk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICBpZiAoJChldmVudC5jdXJyZW50VGFyZ2V0KS5qcW1EYXRhKFwicmVsXCIpID09PSBcImJhY2tcIikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBJdCBjYWxsZWQgb24gc3VjY2VlZCByb3V0aW5nIHRyaWdnZXJlZCBieSBjaGFuZ2luZyBoYXNoLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKiBAcGFyYW0gbmFtZSB7U3RyaW5nfSBbaW5dIG5hbWUgb2Ygcm91dGVcclxuICAgICAgICAgKiBAcGFyYW0gYXJncyB7QXJyYXl9ICBbaW5dIGFycmF5IG9mIHBhcmFtdGVyXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIOODj+ODg+OCt+ODpeWApOOBjOWkieabtOOBleOCjOOAgeODq+ODvOODhuOCo+ODs+OCsOOBjOaIkOWKn+OBl+OBn+OBqOOBjeOBq+OCs+ODvOODq+OBleOCjOOCi1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKiBAcGFyYW0gbmFtZSB7U3RyaW5nfSBbaW5dIHJvdXRlIOWQjeOAgnBhZ2Ug44Gu5YCk44GM5rih44KL44CCXHJcbiAgICAgICAgICogQHBhcmFtIGFyZ3Mge0FycmF5fSAgW2luXSDjg5Hjg6njg6Hjg7zjgr/phY3liJfjgIJcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBvblJvdXRlU3VjY2VlZGVkKG5hbWU6IHN0cmluZywgLi4uYXJnczogYW55W10pOiB2b2lkIHtcclxuICAgICAgICAgICAgbGV0IGNvbnRleHQgPSA8Um91dGVDb250ZXh0PlJvdXRlci5zX3Jvb3RDb250ZXh0c1tuYW1lXTtcclxuICAgICAgICAgICAgaWYgKCEhY29udGV4dCkge1xyXG4gICAgICAgICAgICAgICAgbGV0IGludGVudCA9IHsgcGFyYW1zOiB7IHF1ZXJ5UGFyYW1zOiBhcmdzIH0gfTtcclxuICAgICAgICAgICAgICAgIFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8uaW5OYXZpZ2F0aW9uID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGlmIChudWxsICE9IFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8uaW50ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW50ZW50LnBhcmFtcyA9ICQuZXh0ZW5kKHt9LCBpbnRlbnQucGFyYW1zLCBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLmludGVudC5wYXJhbXMgfHwge30pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5pbnRlbnQgPSAkLmV4dGVuZCh7fSwgUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5pbnRlbnQsIGludGVudCk7XHJcbiAgICAgICAgICAgICAgICBsZXQgaGFuZGxlZCA9IGNvbnRleHQuY2FsbGJhY2soYXJncyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWhhbmRsZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBSb3V0ZXIuY2hhbmdlUGFnZShjb250ZXh0LnBhZ2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogSXQgY2FsbGVkIG9uIGZhaWxlZCByb3V0aW5nIHRyaWdnZXJlZCBieSBjaGFuZ2luZyBoYXNoLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKiBAcGFyYW0gbmFtZSB7U3RyaW5nfSBbaW5dIG5hbWUgb2Ygcm91dGVcclxuICAgICAgICAgKiBAcGFyYW0gYXJncyB7QXJyYXl9ICBbaW5dIGFycmF5IG9mIHBhcmFtdGVyXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIOODj+ODg+OCt+ODpeWApOOBjOWkieabtOOBleOCjOOAgeODq+ODvOODhuOCo+ODs+OCsOOBjOWkseaVl+OBl+OBn+OBqOOBjeOBq+OCs+ODvOODq+OBleOCjOOCi1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKiBAcGFyYW0gbmFtZSB7U3RyaW5nfSBbaW5dIHJvdXRlIOWQjeOAgnBhZ2Ug44Gu5YCk44GM5rih44KL44CCXHJcbiAgICAgICAgICogQHBhcmFtIGFyZ3Mge0FycmF5fSAgW2luXSDjg5Hjg6njg6Hjg7zjgr/phY3liJfjgIJcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBvblJvdXRlRmFpbGVkKGZyYWdtZW50OiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICAgICAgUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5pbk5hdmlnYXRpb24gPSB0cnVlO1xyXG4gICAgICAgICAgICBpZiAobnVsbCA9PSBmcmFnbWVudCkge1xyXG4gICAgICAgICAgICAgICAgZnJhZ21lbnQgPSBCYWNrYm9uZS5oaXN0b3J5LmdldEZyYWdtZW50KCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIHJvdXRlIOOBjOino+axuuOBp+OBjeOBquOBi+OBo+OBn+OCguOBruOCkueuoeeQhuS4i+OBq1xyXG4gICAgICAgICAgICBpZiAoUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5wb3NpdGl2ZU5hdmlnYXRlKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgY29udGV4dCA9IDxSb3V0ZUNvbnRleHQ+Um91dGVyLnNfcm9vdENvbnRleHRzW2ZyYWdtZW50XTtcclxuICAgICAgICAgICAgICAgIGlmIChudWxsID09IGNvbnRleHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250ZXh0ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByb3V0ZTogZnJhZ21lbnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2V4cDogKDxhbnk+Um91dGVyLnNfcm91dGVyKS5fcm91dGVUb1JlZ0V4cChmcmFnbWVudCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2U6IFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8udXJsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3A6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjazogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIFJvdXRlci5wdXNoQ29udGV4dChmcmFnbWVudCwgY29udGV4dCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIGZyYWdtZW50IOOBi+OCiSBwYXRoIOOCkuino+axulxyXG4gICAgICAgICAgICBsZXQgcGF0aCA9IGZyYWdtZW50O1xyXG4gICAgICAgICAgICBpZiAobnVsbCAhPSBSb3V0ZXIuc19yb290Q29udGV4dHNbZnJhZ21lbnRdKSB7XHJcbiAgICAgICAgICAgICAgICBwYXRoID0gUm91dGVyLnNfcm9vdENvbnRleHRzW2ZyYWdtZW50XS5wYWdlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBSb3V0ZXIuY2hhbmdlUGFnZShwYXRoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBUaGlzIGZ1bmN0aW9uIGp1c3QgY2FsbHMgalF1ZXJ5IE1vYmlsZSdzIG5hdmlnYXRpb24gbWV0aG9kLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKiBAcGFyYW0gcGF0aCB7U3RyaW5nfSBbaW5dIHRvIHBhZ2UgcGF0aFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiBqUXVlcnkgTW9iaWxlIOOBq+OCiOOCi+ODmuODvOOCuOmBt+enu+aMh+WumlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKiBAcGFyYW0gcGF0aCB7U3RyaW5nfSBbaW5dIOmBt+enu+WFiOODkeOCueOCkuaMh+WumlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGNoYW5nZVBhZ2UocGF0aDogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGxldCBub3RpZnlCZWZvcmVSb3V0ZUNoYW5nZTogKCkgPT4gSlF1ZXJ5UHJvbWlzZTxhbnk+O1xyXG5cclxuICAgICAgICAgICAgLy8gZGF0YS1yZWw9XCJiYWNrXCIsIOODluODqeOCpuOCtuODnOOCv+ODsywgSC9XIEJhY2sgS2V5IOOBjOaKvOS4i+OBleOCjOOBn+OBqOOBjVxyXG4gICAgICAgICAgICBpZiAoIVJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8ucG9zaXRpdmVOYXZpZ2F0ZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8uaW5BZGRpdGlvbmFsQmFjaykge1xyXG4gICAgICAgICAgICAgICAgICAgIFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8uaW5BZGRpdGlvbmFsQmFjayA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBSb3V0ZXIuZGVjaWRlRGlyZWN0aW9uKHBhdGgpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIOaMh+WumuWFiOOBq+aIu+OCi+OBi+WIpOWumlxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBhZGRpdGlvbmFsID0gUm91dGVyLmRldGVjdEFkZGl0aW9uYWxCYWNrRGlzdGFuY2UoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoMCA8IGFkZGl0aW9uYWwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gMuWbnuebruS7pemZjeOBriBoYXNoIGNoYW5nZSDjgavjga/lj43lv5zjgZXjgZvjgarjgYQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8uaW5BZGRpdGlvbmFsQmFjayA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFJvdXRlci5nZXRKcW1IaXN0b3J5KCkuYWN0aXZlSW5kZXggLT0gYWRkaXRpb25hbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGlzdG9yeS5nbygtYWRkaXRpb25hbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8g6YG356e75YWI44GMIHN1YmZsb3cg6ZaL5aeL54K544Gn44GC44KL5aC05ZCI44CBcGFyYW0g44KS5YmK6ZmkXHJcbiAgICAgICAgICAgICAgICBsZXQgc3ViRmxvd0luZm8gPSBSb3V0ZXIuZGV0ZWN0U3ViRmxvd0Jhc2VJbmZvKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoc3ViRmxvd0luZm8uaXNDdXJyZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHN1YkZsb3dJbmZvLnN0YWNrW1JvdXRlci5TVUJGTE9XX1BBUkFNXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIOiDveWLleeahOmBt+enu+OBruWgtOWQiCBwcmV2aW91c0luZGV4IOOCkuabtOaWsFxyXG4gICAgICAgICAgICAgICAgUm91dGVyLmdldEpxbUhpc3RvcnkoKS5wcmV2aW91c0luZGV4ID0gUm91dGVyLmdldEpxbUhpc3RvcnkoKS5hY3RpdmVJbmRleDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8g44Oa44O844K46YG356e76ZaL5aeL6YCa55+lLiDjgZnjgafjgavjgrPjg7zjg6vjgZXjgozjgabjgYTjgovloLTlkIjjga/ml6Llrprjga7kvZXjgoLjgZfjgarjgYTjgrPjg7zjg6vjg5Djg4Pjgq/jgpLkvb/nlKjjgZnjgosuXHJcbiAgICAgICAgICAgIG5vdGlmeUJlZm9yZVJvdXRlQ2hhbmdlID0gUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5jYWxsZWRCZWZvcmVSb3V0ZUNoYW5nZSA/IF9kZWZhdWx0QmVmb3JlUm91dGVDaGFuZ2UgOiBfYmVmb3JlUm91dGVDaGFuZ2U7XHJcblxyXG4gICAgICAgICAgICBub3RpZnlCZWZvcmVSb3V0ZUNoYW5nZSgpXHJcbiAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g5LuY5Yqg5oOF5aCxXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8uaW50ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFJvdXRlci5wdXNoSW50ZW50KFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8uaW50ZW50KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIFJvdXRlci50cmVhdFVybEhpc3RvcnkoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJC5tb2JpbGUuY2hhbmdlUGFnZShGcmFtZXdvcmsudG9VcmwocGF0aCksIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0xvYWRNc2c6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbGxvd1NhbWVQYWdlVHJhbnNpdGlvbjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby50cmFuc2l0aW9uIHx8IFwibm9uZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXZlcnNlOiBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLnJldmVyc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZyb21IYXNoQ2hhbmdlOiAhUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5wb3NpdGl2ZU5hdmlnYXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VIYXNoOiAhUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5ub0hhc2hDaGFuZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmZhaWwoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJiZWZvcmUgcm91dGUgY2hhbmdlIGNhbGwsIGZhaWxlZC5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mbyA9IHt9O1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogRGVjaWRlIGRpcmVjdGlvbiBwYXJhbWV0ZXIuXHJcbiAgICAgICAgICogSXQncyBhcyBzYW1lIGFzIGpRTSBpbnRlcm5hbCBpbXBsZW1lbnQuIChpbXBlcmZlY3Rpb24pXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqIEBwYXJhbSBwYXRoIHtTdHJpbmd9IFtpbl0gdG8gcGFnZSBwYXRoXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIGRpcmVjdGlvbiDjga7liKTlrppcclxuICAgICAgICAgKiBqUU0g44Gu5YaF6YOo5a6f6KOF44Go562J5L6hICjkuI3lrozlhagpXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqIEBwYXJhbSBwYXRoIHtTdHJpbmd9IFtpbl0g6YG356e75YWI44OR44K544KS5oyH5a6aXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgZGVjaWRlRGlyZWN0aW9uKHBhdGg6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICAgICAgICBsZXQgdXJsID0gJC5tb2JpbGUucGF0aC5jb252ZXJ0VXJsVG9EYXRhVXJsKEZyYW1ld29yay50b1VybChwYXRoKSk7XHJcblxyXG4gICAgICAgICAgICBpZiAobnVsbCA9PSBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLnRyYW5zaXRpb24pIHtcclxuICAgICAgICAgICAgICAgIFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8udHJhbnNpdGlvbiA9IFJvdXRlci5nZXRKcW1IaXN0b3J5KCkuZ2V0QWN0aXZlKCkudHJhbnNpdGlvbjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgUm91dGVyLmdldEpxbUhpc3RvcnkoKS5kaXJlY3Qoe1xyXG4gICAgICAgICAgICAgICAgdXJsOiB1cmwsXHJcbiAgICAgICAgICAgICAgICBwcmVzZW50OiBmdW5jdGlvbiAobmV3UGFnZTogYW55LCBkaXJlY3Rpb246IHN0cmluZykge1xyXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoZGlyZWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJiYWNrXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCA9PSBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLnJldmVyc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLnJldmVyc2UgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJmb3J3YXJkXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCA9PSBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLnRyYW5zaXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLnRyYW5zaXRpb24gPSBuZXdQYWdlLnRyYW5zaXRpb247XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwidW5rbm93biBkaXJlY3Rpb246IFwiICsgZGlyZWN0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBtaXNzaW5nOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g5Yid5pyf44Oa44O844K4IFVSTCDjga/liKTlrprjgafjgY3jgarjgYTjgILmraPluLjns7vjgIJcclxuICAgICAgICAgICAgICAgICAgICBpZiAoMSA9PT0gUm91dGVyLmdldEpxbUhpc3RvcnkoKS5hY3RpdmVJbmRleCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBSb3V0ZXIuZ2V0SnFtSGlzdG9yeSgpLnByZXZpb3VzSW5kZXggPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBSb3V0ZXIuZ2V0SnFtSGlzdG9yeSgpLmFjdGl2ZUluZGV4ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgPT0gUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5yZXZlcnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLnJldmVyc2UgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgwICE9PSBSb3V0ZXIuZ2V0SnFtSGlzdG9yeSgpLmFjdGl2ZUluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwidW5rbm93biBkaXJlY3Rpb24uXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogUmV0dXJuIGFkZGl0aW9uYWwgYmFjayBkaXN0YW5jZSBjb3VudCB3aGVuIGJhY2sgZGVzdGluYXRpb24gc2V0LlxyXG4gICAgICAgICAqIChjb25zdCBmdW5jdGlvbilcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICogQHJldHVybiB7TnVtYmVyfSBjb3VudCBvZiBhZGRpdGlvbmEgYmFjayBkaXN0YW5jZS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICog5oi744KK5YWI44GM5oyH5a6a44GV44KM44Gm44GE44KL44Go44GN44CB6L+95Yqg44GuIEJhY2sg5pWw44KS6L+U44GX44G+44GZ44CCXHJcbiAgICAgICAgICogKOOBk+OBrumWouaVsOOBryBSb3V0ZXIg44Gu54q25oWL44KS5aSJ5pu044GX44G+44Gb44KT44CCKVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKiBAcmV0dXJuIHtTdHJpbmd9IOi/veWKoOOBpyBCYWNrIOOBq+W/heimgeOBqui3nemboi5cclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBkZXRlY3RBZGRpdGlvbmFsQmFja0Rpc3RhbmNlKCk6IG51bWJlciB7XHJcbiAgICAgICAgICAgIGxldCBzdGFjayA9IFJvdXRlci5nZXRKcW1IaXN0b3J5KCkuc3RhY2s7XHJcbiAgICAgICAgICAgIGxldCBoaXN0b3J5QWN0aXZlSW5kZXggPSBSb3V0ZXIuZ2V0SnFtSGlzdG9yeSgpLmFjdGl2ZUluZGV4OyAgICAvLyBkZWNpZGVEaXJlY3Rpb24oKSDjga4gUm91dGVyLmdldEpxbUhpc3RvcnkoKS5kaXJlY3QoKSDjgavjgojjgaPjgabjgIFoaXN0b3J5IOOBriBhY3RpdmVJbmRleCDjga/jgZnjgafjgavlpInjgo/jgaPjgabjgYTjgotcclxuICAgICAgICAgICAgbGV0IHByZXZpb3VzSW5kZXggPSBSb3V0ZXIuZ2V0SnFtSGlzdG9yeSgpLnByZXZpb3VzSW5kZXg7ICAgICAgIC8vIFvmiLvjgotd44GM5oq85LiL44GV44KM44Gf5aC05ZCI44Gr5YCk44GM5YWl44KLXHJcbiAgICAgICAgICAgIGxldCBpLCBiYWNrRHN0LCBkaXN0YW5jZSwgZnJhZ21lbnQsIGNvbnRleHQsIGpxbURhdGFVcmw7XHJcblxyXG4gICAgICAgICAgICAvLyBjaGVjayBcIm9wZXJhdGlvblwiLiBb5oi744KLXeOBiuOCiOOBsyBjbGVhckZvcndhcmQoKSDjgZXjgozjgabjgYTjgarjgYTnirbms4HjgpLjg4Hjgqfjg4Pjgq9cclxuICAgICAgICAgICAgaWYgKCFSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLnJldmVyc2UgfHwgbnVsbCA9PSBwcmV2aW91c0luZGV4IHx8ICFzdGFja1twcmV2aW91c0luZGV4XSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFwiYmFja0RzdCBleGlzdHNcIi4gW+aIu+OCiuWFiF3jgYzmjIflrprjgZXjgozjgabjgYTjgovjgYvjg4Hjgqfjg4Pjgq9cclxuICAgICAgICAgICAgYmFja0RzdCA9IHN0YWNrW3ByZXZpb3VzSW5kZXhdW1JvdXRlci5CQUNLX0RFU1RJTkFUSU9OX1VSTF07XHJcbiAgICAgICAgICAgIGlmICgobnVsbCA9PSBiYWNrRHN0KSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZyYWdtZW50ID0gQmFja2JvbmUuaGlzdG9yeS5nZXRGcmFnbWVudChiYWNrRHN0KTtcclxuXHJcbiAgICAgICAgICAgIC8vIOWIneacn+ODmuODvOOCuFxyXG4gICAgICAgICAgICBpZiAoXCJcIiA9PT0gZnJhZ21lbnQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBoaXN0b3J5QWN0aXZlSW5kZXg7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIHJvb3RDb250ZXh0IOOBi+OCiSBwYXRoIOOCkumAhuW8leOBjVxyXG4gICAgICAgICAgICBjb250ZXh0ID0gPFJvdXRlQ29udGV4dD5fLmZpbmQoPGFueT5Sb3V0ZXIuc19yb290Q29udGV4dHMsIChjb250ZXh0OiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBjb250ZXh0LnJlZ2V4cC50ZXN0KGZyYWdtZW50KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmIChudWxsID09IGNvbnRleHQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcImJhY2sgZGVzdGluYXRpb24gaXMgbm90IHJlZ2lzdGVyZWQuIGJhY2stZHN0OiBcIiArIGJhY2tEc3QpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIGRhdGFVcmwg44KS5YWD44GrIGpRTSBIaXN0b3J5IOOCkuaknOe0olxyXG4gICAgICAgICAgICBqcW1EYXRhVXJsID0gUm91dGVyLnBhdGhUb0pxbURhdGFVcmwoY29udGV4dC5wYWdlKTtcclxuICAgICAgICAgICAgZm9yIChpID0gaGlzdG9yeUFjdGl2ZUluZGV4LCBkaXN0YW5jZSA9IDA7IDAgPD0gaTsgaS0tICwgZGlzdGFuY2UrKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGpxbURhdGFVcmwgPT09IHN0YWNrW2ldLnBhZ2VVcmwpIHtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoaSA8IDApIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcImJhY2sgZGVzdGluYXRpb24gZG9lcyBub3QgZXhpc3QgaW4gaGlzdG9yeS4gYmFjay1kc3Q6IFwiICsgYmFja0RzdCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGRpc3RhbmNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIFN0YXJ0IHN1YiBmbG93XHJcbiAgICAgICAgICogQXR0YWNoIFN1YkZsb3dQYXJhbSB0byBqcW0gaGlzdG9yeSBzdGFjayBvYmplY3QuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gc3ViRmxvd1BhcmFtIHtTdWJGbG93UGFyYW19IFtpbl0gU3ViIEZsb3cgcGFyYW1ldGVyXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIFN1YiBGbG93IOOBrumWi+Wni1xyXG4gICAgICAgICAqIFN1YkZsb3dQYXJhbSDjgpIganFtIGhpc3Rvcnkgc3RhY2sg44Gr44Ki44K/44OD44OBXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gc3ViRmxvd1BhcmFtIHtTdWJGbG93UGFyYW19IFtpbl0gU3ViIEZsb3cg44OR44Op44Oh44O844K/XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgc3RhcnRTdWJGbG93KHN1YkZsb3dQYXJhbTogU3ViRmxvd1BhcmFtKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGxldCBhY3RpdmUgPSBSb3V0ZXIuZ2V0SnFtSGlzdG9yeSgpLmdldEFjdGl2ZSgpO1xyXG4gICAgICAgICAgICBsZXQgcGFyYW0gPSA8U3ViRmxvd1BhcmFtRXg+c3ViRmxvd1BhcmFtO1xyXG4gICAgICAgICAgICBpZiAoc3ViRmxvd1BhcmFtLmRlc3RCYXNlKSB7XHJcbiAgICAgICAgICAgICAgICAoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBkaXN0YW5jZSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGZyYWdtZW50ID0gQmFja2JvbmUuaGlzdG9yeS5nZXRGcmFnbWVudChzdWJGbG93UGFyYW0uZGVzdEJhc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBjb250ZXh0ID0gPFJvdXRlQ29udGV4dD5fLmZpbmQoPGFueT5Sb3V0ZXIuc19yb290Q29udGV4dHMsIChjb250ZXh0OiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRleHQucmVnZXhwLnRlc3QoZnJhZ21lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChudWxsID09IGNvbnRleHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwiYmFzZSBkZXN0aW5hdGlvbiBpcyBub3QgcmVnaXN0ZXJlZC4gZGVzdEJhc2U6IFwiICsgc3ViRmxvd1BhcmFtLmRlc3RCYXNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZGF0YVVybCDjgpLlhYPjgasgalFNIEhpc3Rvcnkg44KS5qSc57SiXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGpxbURhdGFVcmwgPSBSb3V0ZXIucGF0aFRvSnFtRGF0YVVybChjb250ZXh0LnBhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBzdGFjayA9IFJvdXRlci5nZXRKcW1IaXN0b3J5KCkuc3RhY2s7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IFJvdXRlci5nZXRKcW1IaXN0b3J5KCkuYWN0aXZlSW5kZXg7IDAgPD0gaTsgaS0tICwgZGlzdGFuY2UrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoanFtRGF0YVVybCA9PT0gc3RhY2tbaV0ucGFnZVVybCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW0uYWRkaXRpb25hbERpc3RhbmNlID0gZGlzdGFuY2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBwYXJhbS5kZXN0QmFzZSA9IGxvY2F0aW9uLmhhc2g7XHJcbiAgICAgICAgICAgICAgICBwYXJhbS5hZGRpdGlvbmFsRGlzdGFuY2UgPSAwO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBhY3RpdmVbUm91dGVyLlNVQkZMT1dfUEFSQU1dID0gcGFyYW07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogRW5kIHN1YiBmbG93XHJcbiAgICAgICAgICogbmF2aWdhdGUgYW5kIGRlbGV0ZSBTdWJGbG93UGFyYW0gZnJvbSBqcW0gaGlzdG9yeSBzdGFjayBvYmplY3QuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gbmF2T3B0aW9ucyB7TmF2aWdhdGVPcHRpb25zfSBbaW5dIFN1YiBGbG93IHBhcmFtZXRlclxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiBTdWIgRmxvdyDjga7ntYLkuoZcclxuICAgICAgICAgKiDpgbfnp7vjgaggU3ViRmxvd1BhcmFtIOOCkiBqcW0gaGlzdG9yeSBzdGFjayDjgYvjgonliYrpmaRcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBuYXZPcHRpb25zIHtOYXZpZ2F0ZU9wdGlvbnN9IFtpbl0gU3ViIEZsb3cg44OR44Op44Oh44O844K/XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgZmluaXNoU3ViRmxvdyhvcHRpb25zOiBOYXZpZ2F0ZU9wdGlvbnMpOiB2b2lkIHtcclxuICAgICAgICAgICAgbGV0IG5hdk9wdGlvbnM6IE5hdmlnYXRlT3B0aW9ucyA9ICQuZXh0ZW5kKHRydWUsIHt9LCBvcHRpb25zKTtcclxuICAgICAgICAgICAgbGV0IGJhc2VJbmZvID0gUm91dGVyLmRldGVjdFN1YkZsb3dCYXNlSW5mbygpO1xyXG4gICAgICAgICAgICAvLyBcImVuZFwiIOaZguOBq+abtOaWsOOBleOCjOOBn+OCguOBruOCkuS4iuabuOOBjVxyXG4gICAgICAgICAgICBsZXQgcGFyYW06IFN1YkZsb3dQYXJhbSA9ICQuZXh0ZW5kKHt9LCBiYXNlSW5mby5zdWJGbG93UGFyYW0sIG5hdk9wdGlvbnMuc3ViRmxvdyk7XHJcbiAgICAgICAgICAgIGxldCBkaXN0YW5jZSA9IGJhc2VJbmZvLmRpc3RhbmNlO1xyXG4gICAgICAgICAgICBsZXQgc3RhY2sgPSBiYXNlSW5mby5zdGFjaztcclxuICAgICAgICAgICAgbGV0IHJldHJ5ID0gMDtcclxuICAgICAgICAgICAgY29uc3QgTkFWSUdBVEVfSU5URVJWQUwgPSAxMDA7XHJcbiAgICAgICAgICAgIGNvbnN0IE1BWF9SRVRSWV9DT1VOVCA9IDEwO1xyXG5cclxuICAgICAgICAgICAgLy8gaGFzaCDlpInmm7TjgYzlrozkuobjgZfjgZ/lvozjgasgbmF2aWdhdGUg44KS5a6f6KGMXHJcbiAgICAgICAgICAgIGxldCBfbmF2aWdhdGUgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoTUFYX1JFVFJZX0NPVU5UIDw9IHJldHJ5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcInJlYWNoZWQgbmF2aWdhdGUgbWF4IHJldHJ5IGNvdW50LlwiKTtcclxuICAgICAgICAgICAgICAgICAgICBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvID0ge307XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHBhcmFtLmRlc3RCYXNlICE9PSBsb2NhdGlvbi5oYXNoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0cnkrKztcclxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KF9uYXZpZ2F0ZSwgTkFWSUdBVEVfSU5URVJWQUwpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLmluTmF2aWdhdGlvbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIFJvdXRlci5yZWdpc3RlclBhZ2VTdGFjayhwYXJhbS5kZXN0U3RhY2tzLCB0cnVlLCBuYXZPcHRpb25zKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGlmIChzdGFjaykge1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIHN0YWNrW1JvdXRlci5TVUJGTE9XX1BBUkFNXTtcclxuXHJcbiAgICAgICAgICAgICAgICBSb3V0ZXIuZ2V0SnFtSGlzdG9yeSgpLmFjdGl2ZUluZGV4IC09IGRpc3RhbmNlO1xyXG4gICAgICAgICAgICAgICAgUm91dGVyLmdldEpxbUhpc3RvcnkoKS5jbGVhckZvcndhcmQoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocGFyYW0uZGVzdFN0YWNrcykge1xyXG4gICAgICAgICAgICAgICAgICAgIFJvdXRlci5zdG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaU9TIOeSsOWig+OBq+OBiuOBhOOBpiBpbmRleC5odG1sIOOCiOOCiiBoaXN0b3J5LmdvKDApIOOBjOeZuueUn+OBmeOCi+OBqOODquODreODvOODieOBjOeZuueUn+OBmeOCiy5cclxuICAgICAgICAgICAgICAgICAgICAvLyDjgZ3jga7lvoznlLvpnaLpgbfnp7vjgpLmjqfjgYjjgovjgZ/jgoEsIOWxpeattOOCkuaIu+OCi+W/heimgeOBjOOBguOCi+OBqOOBjeOBq+OBruOBv+mZkOWumuOBmeOCiy5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoMCAhPT0gZGlzdGFuY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGlzdG9yeS5nbygtZGlzdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBkZWxldGUgbmF2T3B0aW9ucy5zdWJGbG93OyAgICAvLyBzdWJGbG93IOODl+ODreODkeODhuOCo+OBruegtOajhFxyXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoX25hdmlnYXRlLCAwKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5wb3NpdGl2ZU5hdmlnYXRlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgaGlzdG9yeS5nbygtZGlzdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFwic3ViRmxvdyBiZWdpbiBzdGF0dXMgZG9lcyBub3QgZXhpc3QgaW4gaGlzdG9yeS5cIik7XHJcbiAgICAgICAgICAgICAgICBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvID0ge307XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBSZXR1cm4gZGVzdGluYXRpb24gU3ViIEZsb3cgaW5mb3JtYXRpb24uXHJcbiAgICAgICAgICogKGNvbnN0IGZ1bmN0aW9uKVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKiBAcmV0dXJuIHtPYmplY3R9IHN1YiBmbG93IGluZm8uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIFN1YiBGbG93IOaDheWgseOCkui/lOWNtFxyXG4gICAgICAgICAqICjjgZPjga7plqLmlbDjga8gUm91dGVyIOOBrueKtuaFi+OCkuWkieabtOOBl+OBvuOBm+OCk+OAgilcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICogQHJldHVybiB7T2JqZWN0fSBTdWIgRmxvdyDmg4XloLEuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgZGV0ZWN0U3ViRmxvd0Jhc2VJbmZvKCk6IGFueSB7XHJcbiAgICAgICAgICAgIGxldCBzdGFjayA9IFJvdXRlci5nZXRKcW1IaXN0b3J5KCkuc3RhY2s7XHJcbiAgICAgICAgICAgIGxldCBoaXN0b3J5QWN0aXZlSW5kZXggPSBSb3V0ZXIuZ2V0SnFtSGlzdG9yeSgpLmFjdGl2ZUluZGV4O1xyXG4gICAgICAgICAgICBsZXQgaTogbnVtYmVyLCBkaXN0YW5jZTogbnVtYmVyO1xyXG4gICAgICAgICAgICBsZXQgcGFyYW06IFN1YkZsb3dQYXJhbUV4ID0gPFN1YkZsb3dQYXJhbUV4Pnt9O1xyXG4gICAgICAgICAgICBsZXQgdGFyZ2V0OiBPYmplY3Q7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGkgPSBoaXN0b3J5QWN0aXZlSW5kZXgsIGRpc3RhbmNlID0gMDsgMCA8PSBpOyBpLS0gLCBkaXN0YW5jZSsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc3RhY2tbaV1bUm91dGVyLlNVQkZMT1dfUEFSQU1dKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0ID0gc3RhY2tbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgcGFyYW0gPSA8U3ViRmxvd1BhcmFtRXg+c3RhY2tbaV1bUm91dGVyLlNVQkZMT1dfUEFSQU1dO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAobnVsbCA9PSBwYXJhbS5hZGRpdGlvbmFsRGlzdGFuY2UpIHtcclxuICAgICAgICAgICAgICAgIHBhcmFtLmFkZGl0aW9uYWxEaXN0YW5jZSA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBzdGFjazogdGFyZ2V0LFxyXG4gICAgICAgICAgICAgICAgc3ViRmxvd1BhcmFtOiBwYXJhbSxcclxuICAgICAgICAgICAgICAgIGRpc3RhbmNlOiBkaXN0YW5jZSArIHBhcmFtLmFkZGl0aW9uYWxEaXN0YW5jZSxcclxuICAgICAgICAgICAgICAgIGlzQ3VycmVudDogKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0ICYmIDAgPT09IGRpc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KSgpLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIENvbnZlcnQgcGF0aCB0byBqUU0gZGF0YVVybC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICogQHJldHVybiB7U3RyaW5nfSBqUU0gZGF0YSB1cmwuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIOODkeOCueOCkiBqUU0gZGF0YVVybCDjgavlpInmj5tcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICogQHJldHVybiB7U3RyaW5nfSBqUU0gZGF0YSB1cmwuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgcGF0aFRvSnFtRGF0YVVybChwYXRoOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgICAgICAgICBsZXQgdXJsID0gRnJhbWV3b3JrLnRvVXJsKHBhdGgpO1xyXG4gICAgICAgICAgICBsZXQgZGF0YVVybCA9ICQubW9iaWxlLnBhdGguY29udmVydFVybFRvRGF0YVVybCh1cmwpO1xyXG4gICAgICAgICAgICByZXR1cm4gZGF0YVVybDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBVcGRhdGUgalFNIHVybEhpc3RvcnkgYnkgd2luZG93Lmhpc3Rvcnkgb2JqZWN0LlxyXG4gICAgICAgICAqIFRvIGJlIG5hdHVyYWwgYnJvd3NpbmcgaGlzdG9yeSBiZWhhdmlvciwgYXBwbGljYXRpb24gbmVlZHMgdG8gdXBkYXRlIGpRTSB1cmxIaXN0b3J5XHJcbiAgICAgICAgICogd2hlbiBjbGlja2luZyBiYWNrIG9yIG5leHQgYnV0dG9uIG9mIGJyb3dzZXIuIChpbXBlcmZlY3Rpb24gZm9yIGRlY2lkZURpcmVjdGlvbigpKVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICog44OW44Op44Km44K244Gu5bGl5q2044Gr5Z+644Gl44GNIGpRTSB1cmxIaXN0b3J5IOOCkuabtOaWsFxyXG4gICAgICAgICAqIFvmiLvjgotdL1vpgLLjgoBd44GM5oq85LiL44GV44KM44Gf5b6M44CB44Oa44O844K46YG356e744GV44KM44KL44Go44GN44CBalFNIHVybEhpc3Rvcnkg44KS5pu05paw44GZ44KL44CCKGRlY2lkZURpcmVjdGlvbigpIOOBq+OCiOOCiuS4jeWujOWFqClcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgdHJlYXRVcmxIaXN0b3J5KCk6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAoUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5wb3NpdGl2ZU5hdmlnYXRlIHx8IGhpc3RvcnkubGVuZ3RoIDwgUm91dGVyLmdldEpxbUhpc3RvcnkoKS5zdGFjay5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIFJvdXRlci5nZXRKcW1IaXN0b3J5KCkuY2xlYXJGb3J3YXJkKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGNkcDovLy9DRFAvRnJhbWV3b3JrL1JvdXRlci50cyIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi8uLi8uLi9leHRlcm5hbC9pbmNsdWRlL3JlcXVpcmUuZC50c1wiIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi8uLi8uLi9leHRlcm5hbC9pbmNsdWRlL2pxdWVyeS5kLnRzXCIgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uLy4uLy4uL2V4dGVybmFsL2luY2x1ZGUvaTE4bmV4dC5kLnRzXCIgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uLy4uLy4uL2V4dGVybmFsL2luY2x1ZGUvanF1ZXJ5Lm1vYmlsZS5kLnRzXCIgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uLy4uLy4uL2V4dGVybmFsL2luY2x1ZGUvY2RwLmNvcmUuZC50c1wiIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi8uLi8uLi9leHRlcm5hbC9pbmNsdWRlL2NkcC5pMThuLmQudHNcIiAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiUGF0Y2gudHNcIiAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiT3JpZW50YXRpb24udHNcIiAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiUm91dGVyLnRzXCIgLz5cclxuXHJcbi8qIHRzbGludDpkaXNhYmxlOm1heC1saW5lLWxlbmd0aCBmb3JpbiBuby1iaXR3aXNlICovXHJcblxyXG5uYW1lc3BhY2UgQ0RQIHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAqIFRoZSBmdW5jdGlvbiByZXR1cm5lZCBKUXVlcnlQcm9taXNlIHdhaXRzIHVudGlsIFBob25lR2FwIGlzIHJlYWR5LlxyXG4gICAgICogW05vdGVdIGVtdWxhdGUgd2hlbiBQQyBlbnZpcm9tZW50LlxyXG4gICAgICpcclxuICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgKiBQaG9uZUdhcCDjgYzmnInlirnjgavjgarjgovjgb7jgaflvoXmqZ9cclxuICAgICAqIFBDIOeSsOWig+OBp+OBr+OCqOODn+ODpeODrOODvOODiOOBleOCjOOCi+OAglxyXG4gICAgICovXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gd2FpdEZvckRldmljZVJlYWR5KCkge1xyXG4gICAgICAgIGxldCBkZiA9ICQuRGVmZXJyZWQoKTtcclxuICAgICAgICBpZiAoIUNEUC5GcmFtZXdvcmsuUGxhdGZvcm0uTW9iaWxlKSB7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgZGYucmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICB9LCAxMDApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmIChudWxsID09IGdsb2JhbC5jb3Jkb3ZhIHx8IG51bGwgPT0gZ2xvYmFsLmNvcmRvdmEuZXhlYykge1xyXG4gICAgICAgICAgICAgICAgJChkb2N1bWVudCkub25lKFwiZGV2aWNlcmVhZHlcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGRmLnJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZGYucmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBkZi5wcm9taXNlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgbGV0IF9kZWZhdWx0QmFja0J1dHRvbkhhbmRsZXI6IChldmVudD86IEpRdWVyeUV2ZW50T2JqZWN0KSA9PiB2b2lkID0gbnVsbDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAqIFNldHVwIEgvVyBCYWNrIGtleSBoYW5kbGVyLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSAge0Z1bmN0aW9ufSBoYW5kbGVyIGZ1bmN0aW9uLlxyXG4gICAgICogQHJldHVybiB7RnVuY3Rpb259IG9sZCBoYW5kbGVyIGZ1bmN0aW9uLlxyXG4gICAgICpcclxuICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtICB7RnVuY3Rpb259IGhhbmRsZXIg5oyH5a6aLlxyXG4gICAgICogQHJldHVybiB7RnVuY3Rpb259IOS7peWJjeOBriBoYW5kbGVyLlxyXG4gICAgICovXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gc2V0QmFja0J1dHRvbkhhbmRsZXIoaGFuZGxlcjogKGV2ZW50PzogSlF1ZXJ5RXZlbnRPYmplY3QpID0+IHZvaWQpOiAoZXZlbnQ/OiBKUXVlcnlFdmVudE9iamVjdCkgPT4gdm9pZCB7XHJcbiAgICAgICAgbGV0IG9sZEhhbmRsZXIgPSBfZGVmYXVsdEJhY2tCdXR0b25IYW5kbGVyO1xyXG4gICAgICAgIF9kZWZhdWx0QmFja0J1dHRvbkhhbmRsZXIgPSBoYW5kbGVyO1xyXG4gICAgICAgIHJldHVybiBvbGRIYW5kbGVyO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGJhY2sga2V5IGhhbmRsZXIgaW1wbGVtZW50LlxyXG4gICAgKCgpID0+IHtcclxuICAgICAgICB3YWl0Rm9yRGV2aWNlUmVhZHkoKS5kb25lKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJChkb2N1bWVudCkub24oXCJiYWNrYnV0dG9uXCIsIGZ1bmN0aW9uIChldmVudDogSlF1ZXJ5RXZlbnRPYmplY3QpIHtcclxuICAgICAgICAgICAgICAgIGlmIChfZGVmYXVsdEJhY2tCdXR0b25IYW5kbGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX2RlZmF1bHRCYWNrQnV0dG9uSGFuZGxlcihldmVudCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSkoKTtcclxuXHJcblxyXG4gICAgLy9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fLy9cclxuXHJcblxyXG4gICAgZXhwb3J0IG5hbWVzcGFjZSBGcmFtZXdvcmsge1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAaW50ZXJmYWNlIEZyYW1ld29ya09wdGlvbnNcclxuICAgICAgICAgKiBAYnJpZWYgRnJhbWV3b3JrIOOBq+ioreWumuWPr+iDveOBquOCquODl+OCt+ODp+ODs1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGV4cG9ydCBpbnRlcmZhY2UgRnJhbWV3b3JrT3B0aW9ucyB7XHJcbiAgICAgICAgICAgIGpxdWVyeT86ICgpID0+IHZvaWQ7XHJcbiAgICAgICAgICAgIGpxdWVyeW1vYmlsZT86ICgpID0+IHZvaWQ7XHJcbiAgICAgICAgICAgIGkxOG4/OiBDRFAuSTE4Tk9wdGlvbnM7XHJcbiAgICAgICAgICAgIGFwcGx5UGF0Y2g/OiBib29sZWFuO1xyXG4gICAgICAgICAgICBhbmNob3JWY2xpY2s/OiBib29sZWFuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW50ZXJmYWNlIE9yaWVudGF0aW9uTGlzdGVuZXJIb2xkZXIge1xyXG4gICAgICAgICAgICBba2V5OiBzdHJpbmddOiBJT3JpZW50YXRpb25DaGFuZ2VkTGlzdGVuZXI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBUQUcgPSBcIltDRFAuRnJhbWV3b3JrXSBcIjtcclxuXHJcbiAgICAgICAgbGV0IF9kZkluaXRpYWxpemU6IEpRdWVyeURlZmVycmVkPHZvaWQ+ID0gJC5EZWZlcnJlZDx2b2lkPigpO1xyXG4gICAgICAgIGxldCBfYWN0aXZlUGFnZTogSVBhZ2UgPSBudWxsO1xyXG4gICAgICAgIGxldCBfb3JpZW50YXRpb25MaXN0ZW5lckhvbGRlcjogT3JpZW50YXRpb25MaXN0ZW5lckhvbGRlciA9IHt9O1xyXG4gICAgICAgIGxldCBfbGFzdE9yaWVudGF0aW9uOiBPcmllbnRhdGlvbiA9IG51bGw7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBJbml0aWFsaXphdGlvbiBmdW5jdGlvbiBvZiBGcmFtZXdvcmsuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIEZyYW1ld29yayDjga7liJ3mnJ/ljJbplqLmlbBcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBvcHRpb25zIHtGcmFtZXdvcmtPcHRpb25zfSBbaW5dIG9wdGlvbnMgb2JqZWN0LlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGV4cG9ydCBmdW5jdGlvbiBpbml0aWFsaXplKG9wdGlvbnM/OiBGcmFtZXdvcmtPcHRpb25zKTogSlF1ZXJ5UHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgICAgIGlmIChcInBlbmRpbmdcIiAhPT0gX2RmSW5pdGlhbGl6ZS5zdGF0ZSgpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX2RmSW5pdGlhbGl6ZS5wcm9taXNlKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxldCBjb25maWcgPSBnZXRDb25maWcob3B0aW9ucyk7XHJcblxyXG4gICAgICAgICAgICAvLyBDRFAg55Kw5aKD44Gu5Yid5pyf5YyWXHJcbiAgICAgICAgICAgIC8vIOePvueKtuOBr+OAgWNvbnNvbGUg44Kq44OW44K444Kn44Kv44OI44Gu5L+d6Ki844GoIGpRdWVyeSDjga4gV2luUlQg5a++5b+c44CCXHJcbiAgICAgICAgICAgIENEUC5pbml0aWFsaXplKHtcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBGcmFtZXdvcmsg55So44GuIFBhdGNoIOmBqeeUqFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb25maWcuYXBwbHlQYXRjaCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBGcmFtZXdvcmsuUGF0Y2guYXBwbHkoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGpRdWVyeSDjga7lhbHpgJroqK3lrppcclxuICAgICAgICAgICAgICAgICAgICBjb25maWcuanF1ZXJ5KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGpRdWVyeSBNb2JpbGUg44Gu5Yid5pyf5YyWXHJcbiAgICAgICAgICAgICAgICAgICAgJChkb2N1bWVudCkub24oXCJtb2JpbGVpbml0XCIsICgpOiB2b2lkID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uZmlnIOOBruWPjeaYoFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25maWcuanF1ZXJ5bW9iaWxlKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjZHAuaTE4biDjga7liJ3mnJ/ljJZcclxuICAgICAgICAgICAgICAgICAgICAgICAgQ0RQLmluaXRpYWxpemVJMThOKGNvbmZpZy5pMThuKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFsd2F5cygoaW5mbykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGkxOG5leHQg44Gu5Yid5pyf5YyW5pmC44Gu44Ko44Op44O844Gv54Sh6KaW44GZ44KLLiBpbmZvIOOBjCBhcnJheSDjga7loLTlkIjjgIHjgqjjg6njg7zmg4XloLHjgYzmoLzntI3jgZXjgozjgabjgYTjgosuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJChkb2N1bWVudClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm9uZShcInBhZ2ViZWZvcmVjaGFuZ2VcIiwgKGV2ZW50OiBKUXVlcnlFdmVudE9iamVjdCwgZGF0YTogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoPENoYW5nZVBhZ2VPcHRpb25zPmRhdGEub3B0aW9ucykuc2hvd0xvYWRNc2cgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm9uKFwicGFnZWJlZm9yZWNyZWF0ZVwiLCAoZXZlbnQ6IEpRdWVyeUV2ZW50T2JqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpMThuZXh044Op44Kk44OW44Op44Oq44Gr44KI44KLaHRtbCBmcmFnbWVudOOBrue/u+ios+WHpueQhlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKDxhbnk+JChldmVudC50YXJnZXQpKS5sb2NhbGl6ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUm91dGVyIOOBruWIneacn+WMllxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChSb3V0ZXIuaW5pdGlhbGl6ZSh7IGFuY2hvclZjbGljazogY29uZmlnLmFuY2hvclZjbGljaywgfSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2RmSW5pdGlhbGl6ZS5yZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihUQUcgKyBcImVycm9yLiBDRFAuRnJhbWV3b3JrLlJvdXRlci5pbml0aWFsaXplKCkgZmFpbGVkLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2RmSW5pdGlhbGl6ZS5yZWplY3QoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2RmSW5pdGlhbGl6ZSA9ICQuRGVmZXJyZWQ8dm9pZD4oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgeyAvLyBqUXVlcnkgTW9iaWxlIOOBruODreODvOODiVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBqcXVlcnkgMytcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGpxdWVyeU1ham9yID0gfn4kLmZuLmpxdWVyeS5zcGxpdChcIi5cIilbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgzIDw9IGpxdWVyeU1ham9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoNCA8PSBqcXVlcnlNYWpvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihUQUcgKyBcImpxdWVyeS1taWdyYXRlIGZvciAzLjAuMCsgaW4gdXNlLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmUoW1wianF1ZXJ5LW1pZ3JhdGVcIl0sICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlKFtcImpxdWVyeS5tb2JpbGVcIl0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlKFtcImpxdWVyeS5tb2JpbGVcIl0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGZhaWw6IChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoVEFHICsgXCJlcnJvci4gQ0RQLmluaXRpYWxpemUoKSBmYWlsZWQuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIF9kZkluaXRpYWxpemUucmVqZWN0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgX2RmSW5pdGlhbGl6ZSA9ICQuRGVmZXJyZWQ8dm9pZD4oKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIF9kZkluaXRpYWxpemUucHJvbWlzZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIENoZWNrIGZvciBpbml0aWFsaXphdGlvbiBzdGF0dXMuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHtCb29sZWFufSB0cnVlOiBpbml0aWFsaXplZCAvIGZhbHNlOiB1bmluaXRpYWxpemVkXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIOWIneacn+WMlua4iOOBv+OBi+WIpOWumlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7Qm9vbGVhbn0gdHJ1ZTog5Yid5pyf5YyW5riI44G/IC8gZmFsc2U6IOacquWIneacn+WMllxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGV4cG9ydCBmdW5jdGlvbiBpc0luaXRpYWxpemVkKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICByZXR1cm4gXCJyZXNvbHZlZFwiID09PSBfZGZJbml0aWFsaXplLnN0YXRlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogV2FpdCBmb3IgaW5pdGlhbGl6YXRpb24gc3RhdHVzLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7SlF1ZXJ5UHJvbWlzZX1cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICog5Yid5pyf5YyW5b6F44GhXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHtKUXVlcnlQcm9taXNlfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGV4cG9ydCBmdW5jdGlvbiB3YWl0Rm9ySW5pdGlhbGl6ZSgpOiBKUXVlcnlQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICAgICAgcmV0dXJuIF9kZkluaXRpYWxpemUucHJvbWlzZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIFJlZ2lzdGVyIElPcmllbnRhdGlvbkNoYW5nZWRMaXN0ZW5lciB0byBmcmFtZXdvcmsuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ga2V5ICAgICAge1N0cmluZ30gICAgICAgICAgICAgICAgICAgICAgW2luXSBJRCBrZXlcclxuICAgICAgICAgKiBAcGFyYW0gbGlzdGVuZXIge0lPcmllbnRhdGlvbkNoYW5nZWRMaXN0ZW5lcn0gW2luXSBJT3JpZW50YXRpb25DaGFuZ2VkTGlzdGVuZXIgaW5zdGFuY2VcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICogSU9yaWVudGF0aW9uQ2hhbmdlZExpc3RlbmVyIOOCkiBGcmFtZXdvcmsg44Gr55m76YyyXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ga2V5ICAgICAge1N0cmluZ30gICAgICAgICAgICAgICAgICAgICAgW2luXSBJRCBrZXlcclxuICAgICAgICAgKiBAcGFyYW0gbGlzdGVuZXIge0lPcmllbnRhdGlvbkNoYW5nZWRMaXN0ZW5lcn0gW2luXSBJT3JpZW50YXRpb25DaGFuZ2VkTGlzdGVuZXIgaW5zdGFuY2VcclxuICAgICAgICAgKi9cclxuICAgICAgICBleHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJPcmllbnRhdGlvbkNoYW5nZWRMaXN0ZW5lcihrZXk6IHN0cmluZywgbGlzdGVuZXI6IElPcmllbnRhdGlvbkNoYW5nZWRMaXN0ZW5lcik6IHZvaWQge1xyXG4gICAgICAgICAgICBfb3JpZW50YXRpb25MaXN0ZW5lckhvbGRlcltrZXldID0gbGlzdGVuZXI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogVW5yZWdpc3RlciBJT3JpZW50YXRpb25DaGFuZ2VkTGlzdGVuZXIgZnJvbSBmcmFtZXdvcmsuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ga2V5IHtTdHJpbmd9IFtpbl0gSUQga2V5XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIElPcmllbnRhdGlvbkNoYW5nZWRMaXN0ZW5lciDjgpIgRnJhbWV3b3JrIOOBi+OCieeZu+mMsuino+mZpFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGtleSB7U3RyaW5nfSBbaW5dIElEIGtleVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGV4cG9ydCBmdW5jdGlvbiB1bnJlZ2lzdGVyT3JpZW50YXRpb25DaGFuZ2VkTGlzdGVuZXIoa2V5OiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICAgICAgZGVsZXRlIF9vcmllbnRhdGlvbkxpc3RlbmVySG9sZGVyW2tleV07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogU2V0dXAgZXZlbnQgaGFuZGxlcnMgd2hlbiBhZnRlciByb3V0ZXIgaW5pdGlhbGl6ZWQuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiDjgqTjg5njg7Pjg4jjg4/jg7Pjg4njg6njga7oqK3lrpouIFJvdXRlciDliJ3mnJ/ljJblvozjgasgRnJhbWV3b3JrIOOBjOOCs+ODvOODq+OBmeOCiy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZXhwb3J0IGZ1bmN0aW9uIHNldHVwRXZlbnRIYW5kbGVycygpOiB2b2lkIHtcclxuICAgICAgICAgICAgKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBvbGRCYWNrQnV0dG9uSGFuZGxlciA9IENEUC5zZXRCYWNrQnV0dG9uSGFuZGxlcihudWxsKTtcclxuICAgICAgICAgICAgICAgIGxldCBiYXNlQmFja0J1dHRvbkhhbmRsZXIgPSAoZXZlbnQ/OiBKUXVlcnlFdmVudE9iamVjdCk6IHZvaWQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChfYWN0aXZlUGFnZSAmJiBfYWN0aXZlUGFnZS5vbkhhcmR3YXJlQmFja0J1dHRvbihldmVudCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g44Kv44Op44Kk44Ki44Oz44OI5YG044Gn44OP44Oz44OJ44Oq44Oz44Kw5riI44G/44Go5oyH5a6a44GV44KM44Gf5aC05ZCI44CB5pei5a6a44Gu5Yem55CG44KS6KGM44KP44Gq44GEXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbGRCYWNrQnV0dG9uSGFuZGxlcihldmVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIENEUC5zZXRCYWNrQnV0dG9uSGFuZGxlcihiYXNlQmFja0J1dHRvbkhhbmRsZXIpO1xyXG4gICAgICAgICAgICB9KSgpO1xyXG4gICAgICAgICAgICAoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IG9sZFJvdXRlQ2hhbmdlSGFuZGxlciA9IENEUC5GcmFtZXdvcmsuc2V0QmVmb3JlUm91dGVDaGFuZ2VIYW5kbGVyKG51bGwpO1xyXG4gICAgICAgICAgICAgICAgbGV0IGJhc2VSb3V0ZUNoYW5nZUhhbmRsZXIgPSAoKTogSlF1ZXJ5UHJvbWlzZTxhbnk+ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoX2FjdGl2ZVBhZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9hY3RpdmVQYWdlLm9uQmVmb3JlUm91dGVDaGFuZ2UoKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2xkUm91dGVDaGFuZ2VIYW5kbGVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIENEUC5GcmFtZXdvcmsuc2V0QmVmb3JlUm91dGVDaGFuZ2VIYW5kbGVyKGJhc2VSb3V0ZUNoYW5nZUhhbmRsZXIpO1xyXG4gICAgICAgICAgICB9KSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIFNldHVwIGFjdGl2ZSBJUGFnZSBpbnN0YW5jZS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICogQHBhcmFtIHBhZ2Uge0lQYWdlfSBbaW5dIElQYWdlIGluc3RhbmNlLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiBhY3RpdmUgUGFnZSDjga7oqK3lrpouIEZyYW1ld29yayDjgYzjgrPjg7zjg6vjgZnjgosuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqIEBwYXJhbSBwYWdlIHtJUGFnZX0gW2luXSBJUGFnZSBpbnN0YW5jZS5cclxuICAgICAgICAgKi9cclxuICAgICAgICBleHBvcnQgZnVuY3Rpb24gc2V0QWN0aXZlUGFnZShwYWdlOiBJUGFnZSk6IHZvaWQge1xyXG4gICAgICAgICAgICBfYWN0aXZlUGFnZSA9IHBhZ2U7XHJcbiAgICAgICAgICAgIGlmIChfYWN0aXZlUGFnZSkge1xyXG4gICAgICAgICAgICAgICAgX2xhc3RPcmllbnRhdGlvbiA9IGdldE9yaWVudGF0aW9uKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBSZXRlcm5zIGZyYW1ld29yayBkZWZhdWx0IGNsaWNrIGV2ZW50IHN0cmluZy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIEZyYW1ld29yayDjgYzml6Llrprjgavkvb/nlKjjgZnjgovjgq/jg6rjg4Pjgq/jgqTjg5njg7Pjg4jmloflrZfliJfjgpLlj5blvpdcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICogQHJldHVybiB7U3RyaW5nfSBcInZjbGlja1wiIC8gXCJjbGlja1wiXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZXhwb3J0IGZ1bmN0aW9uIGdldERlZmF1bHRDbGlja0V2ZW50KCk6IHN0cmluZyB7XHJcbiAgICAgICAgICAgIHJldHVybiBQYXRjaC5zX3ZjbGlja0V2ZW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIEdldCBDb25maWcgb2JqZWN0LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKiBAcmV0dXJuIHtGcmFtZXdvcmtPcHRpb25zfSBDb25maWcgb2JqZWN0LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiBDb25maWcgb2JqZWN0IOOBruWPluW+l1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKiBAcmV0dXJuIHtGcmFtZXdvcmtPcHRpb25zfSBDb25maWcgb2JqZWN0LlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bmN0aW9uIGdldENvbmZpZyhvcHRpb25zOiBGcmFtZXdvcmtPcHRpb25zKTogRnJhbWV3b3JrT3B0aW9ucyB7XHJcbiAgICAgICAgICAgIGxldCBkZWZDb25maWcgPSB7XHJcbiAgICAgICAgICAgICAgICAvLyBmb3IgZmFpbCBzYWZlLCBkZWZhdWx0IHNldHRpbmdzLlxyXG4gICAgICAgICAgICAgICAganF1ZXJ5OiAoKTogdm9pZCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgJC5zdXBwb3J0LmNvcnMgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICQuYWpheFNldHVwKHsgY2FjaGU6IGZhbHNlIH0pO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgICAgICBqcXVlcnltb2JpbGU6ICgpOiB2b2lkID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAkLm1vYmlsZS5hbGxvd0Nyb3NzRG9tYWluUGFnZXMgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICQubW9iaWxlLmRlZmF1bHRQYWdlVHJhbnNpdGlvbiA9IFwibm9uZVwiO1xyXG4gICAgICAgICAgICAgICAgICAgICQubW9iaWxlLmhhc2hMaXN0ZW5pbmdFbmFibGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgJC5tb2JpbGUucHVzaFN0YXRlRW5hYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgICAgICBpMThuOiB7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgICAgIGFwcGx5UGF0Y2g6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBhbmNob3JWY2xpY2s6IHRydWUsXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gJC5leHRlbmQoe30sIGRlZkNvbmZpZywgQ0RQLkNvbmZpZywgb3B0aW9ucyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIGNsb3N1cmUgbWV0aG9kc1xyXG5cclxuICAgICAgICAvLyByZXNpemUgaGFuZGxlclxyXG4gICAgICAgICQod2luZG93KS5vbihcInJlc2l6ZVwiLCAoZXZlbnQ6IEpRdWVyeUV2ZW50T2JqZWN0KTogdm9pZCA9PiB7XHJcbiAgICAgICAgICAgIGxldCBuZXdPcmllbnRhdGlvbiA9IGdldE9yaWVudGF0aW9uKCk7XHJcbiAgICAgICAgICAgIGlmIChfbGFzdE9yaWVudGF0aW9uICE9PSBuZXdPcmllbnRhdGlvbikge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQga2V5IGluIF9vcmllbnRhdGlvbkxpc3RlbmVySG9sZGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX29yaWVudGF0aW9uTGlzdGVuZXJIb2xkZXJba2V5XS5vbk9yaWVudGF0aW9uQ2hhbmdlZChuZXdPcmllbnRhdGlvbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoX2FjdGl2ZVBhZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBfYWN0aXZlUGFnZS5vbk9yaWVudGF0aW9uQ2hhbmdlZChuZXdPcmllbnRhdGlvbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBfbGFzdE9yaWVudGF0aW9uID0gbmV3T3JpZW50YXRpb247XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gY2RwOi8vL0NEUC9GcmFtZXdvcmsvQ29yZUFQSS50cyIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi8uLi8uLi9leHRlcm5hbC9pbmNsdWRlL2pxdWVyeS5kLnRzXCIgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uLy4uLy4uL2V4dGVybmFsL2luY2x1ZGUvdW5kZXJzY29yZS5kLnRzXCIgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIlJvdXRlci50c1wiIC8+XHJcblxyXG5uYW1lc3BhY2UgQ0RQLkZyYW1ld29yayB7XHJcbiAgICAvKipcclxuICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAqIEBpbnRlcmZhY2UgTWFuYWdlZEludGVudFxyXG4gICAgICogQGJyaWVmIEludGVybmFsIEludGVudCBpbnRlcmZhY2UgZm9yIG1hbmFnZWQgdXBkYXRlIGluZm8uXHJcbiAgICAgKlxyXG4gICAgICogXFx+amFwYW5lc2VcclxuICAgICAqIEBpbnRlcmZhY2UgTWFuYWdlZEludGVudFxyXG4gICAgICogQGJyaWVmIOabtOaWsOaDheWgseOBjOeuoeeQhuOBleOCjOOBn+WGhemDqCBJbnRlbnQg44Kk44Oz44K/44O844OV44Kn44Kk44K544Kv44Op44K5XHJcbiAgICAgKi9cclxuICAgIGludGVyZmFjZSBNYW5hZ2VkSW50ZW50IGV4dGVuZHMgSW50ZW50IHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogc2V0IFwidHJ1ZVwiIHdoZW4gdXBkYXRlIGluIFBhZ2UgY2xhc3MuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIOODmuODvOOCuOWGheOBp+abtOaWsOOBleOCjOOBn+WgtOWQiCB0cnVlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgX3VwZGF0ZTogYm9vbGVhbjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAqIEBjbGFzcyBQYWdlXHJcbiAgICAgKiBAYnJpZWYgQmFzZSBjbGFzcyBvZiBhbGwgcGFnZSB1bml0LlxyXG4gICAgICpcclxuICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgKiBAY2xhc3MgUGFnZVxyXG4gICAgICogQGJyaWVmIOOBmeOBueOBpuOBruODmuODvOOCuOOBruWfuuacrOOBqOOBquOCi+aXouWumuOCr+ODqeOCuVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgY2xhc3MgUGFnZSBpbXBsZW1lbnRzIElQYWdlIHtcclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gZGF0YSBtZW1iZXJcclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIF9vd25lcjogSVBhZ2U7XHJcbiAgICAgICAgcHJpdmF0ZSBfJHBhZ2U6IEpRdWVyeTtcclxuICAgICAgICBwcml2YXRlIF8kaGVhZGVyOiBKUXVlcnk7XHJcbiAgICAgICAgcHJpdmF0ZSBfJGZvb3RlcjogSlF1ZXJ5O1xyXG4gICAgICAgIHByaXZhdGUgX2ludGVudDogTWFuYWdlZEludGVudDtcclxuICAgICAgICBwcml2YXRlIF9rZWVwSW50ZW50OiBib29sZWFuO1xyXG4gICAgICAgIHByaXZhdGUgX2luaXRpYWxpemVkOiBib29sZWFuO1xyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBwdWJsaWMgbWV0aG9kc1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogY29uc3RydWN0b3JcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBfdXJsICAgIHtTdHJpbmd9ICAgICAgICAgICAgICAgW2luXSBwYWdlJ3MgVVJMXHJcbiAgICAgICAgICogQHBhcmFtIF9pZCAgICAge1N0cmluZ30gICAgICAgICAgICAgICBbaW5dIHBhZ2UncyBJRFxyXG4gICAgICAgICAqIEBwYXJhbSBvcHRpb25zIHtQYWdlQ29uc3RydWN0T3B0aW9uc30gW2luXSBvcHRpb25zXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIGNvbnN0cnVjdG9yXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gX3VybCAgICB7U3RyaW5nfSAgICAgICAgICAgICAgIFtpbl0g44Oa44O844K4IFVSTFxyXG4gICAgICAgICAqIEBwYXJhbSBfaWQgICAgIHtTdHJpbmd9ICAgICAgICAgICAgICAgW2luXSDjg5rjg7zjgrggSURcclxuICAgICAgICAgKiBAcGFyYW0gb3B0aW9ucyB7UGFnZUNvbnN0cnVjdE9wdGlvbnN9IFtpbl0g44Kq44OX44K344On44OzXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgY29uc3RydWN0b3IocHJpdmF0ZSBfdXJsOiBzdHJpbmcsIHByaXZhdGUgX2lkOiBzdHJpbmcsIG9wdGlvbnM/OiBQYWdlQ29uc3RydWN0T3B0aW9ucykge1xyXG4gICAgICAgICAgICB0aGlzLnNldHVwKG9wdGlvbnMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gcHVibGljIGFjY2Vzc29yXHJcblxyXG4gICAgICAgIGdldCBhY3RpdmUoKTogYm9vbGVhbiAgICAgICAgICAgeyByZXR1cm4gISF0aGlzLl8kcGFnZSAmJiB0aGlzLl8kcGFnZS5oYXNDbGFzcyhcInVpLXBhZ2UtYWN0aXZlXCIpOyAgIH1cclxuICAgICAgICBnZXQgdXJsKCk6IHN0cmluZyAgICAgICAgICAgICAgIHsgcmV0dXJuIHRoaXMuX3VybDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgIGdldCBpZCgpOiBzdHJpbmcgICAgICAgICAgICAgICAgeyByZXR1cm4gdGhpcy5faWQ7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgZ2V0ICRwYWdlKCk6IEpRdWVyeSAgICAgICAgICAgICB7IHJldHVybiB0aGlzLl8kcGFnZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICBnZXQgJGhlYWRlcigpOiBKUXVlcnkgICAgICAgICAgIHsgcmV0dXJuIHRoaXMuXyRoZWFkZXI7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgIGdldCAkZm9vdGVyKCk6IEpRdWVyeSAgICAgICAgICAgeyByZXR1cm4gdGhpcy5fJGZvb3RlcjsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgZ2V0IGludGVudCgpOiBJbnRlbnQgICAgICAgICAgICB7IHJldHVybiB0aGlzLl9pbnRlbnQ7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICBzZXQgaW50ZW50KG5ld0ludGVudDogSW50ZW50KSAgIHsgdGhpcy5faW50ZW50ID0gPGFueT5uZXdJbnRlbnQ7IHRoaXMuX2ludGVudC5fdXBkYXRlID0gdHJ1ZTsgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBwdWJsaWMgRXZlbnQgSGFuZGxlclxyXG5cclxuICAgICAgICAvLyEgT3JpZW50YXRpb24g44Gu5aSJ5pu044KS5Y+X5L+hXHJcbiAgICAgICAgcHVibGljIG9uT3JpZW50YXRpb25DaGFuZ2VkKG5ld09yaWVudGF0aW9uOiBPcmllbnRhdGlvbik6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fb3duZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX293bmVyLm9uT3JpZW50YXRpb25DaGFuZ2VkKG5ld09yaWVudGF0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIEgvVyBCYWNrIEJ1dHRvbiDjg4/jg7Pjg4njg6lcclxuICAgICAgICBwdWJsaWMgb25IYXJkd2FyZUJhY2tCdXR0b24oZXZlbnQ/OiBKUXVlcnlFdmVudE9iamVjdCk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fb3duZXIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9vd25lci5vbkhhcmR3YXJlQmFja0J1dHRvbihldmVudCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISBSb3V0ZXIgXCJiZWZvcmUgcm91dGUgY2hhbmdlXCIg44OP44Oz44OJ44OpXHJcbiAgICAgICAgcHVibGljIG9uQmVmb3JlUm91dGVDaGFuZ2UoKTogSlF1ZXJ5UHJvbWlzZTxhbnk+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX293bmVyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fb3duZXIub25CZWZvcmVSb3V0ZUNoYW5nZSgpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICQuRGVmZXJyZWQoKS5yZXNvbHZlKCkucHJvbWlzZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg5rGO55So44Kz44Oe44Oz44OJ44KS5Y+X5L+hXHJcbiAgICAgICAgcHVibGljIG9uQ29tbWFuZChldmVudD86IEpRdWVyeUV2ZW50T2JqZWN0LCBraW5kPzogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9vd25lcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX293bmVyLm9uQ29tbWFuZChldmVudCwga2luZCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDmnIDliJ3jga4gT25QYWdlSW5pdCgpIOOBruOBqOOBjeOBq+OBruOBv+OCs+ODvOODq+OBleOCjOOCi1xyXG4gICAgICAgIHB1YmxpYyBvbkluaXRpYWxpemUoZXZlbnQ6IEpRdWVyeUV2ZW50T2JqZWN0KTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9vd25lcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fb3duZXIub25Jbml0aWFsaXplKGV2ZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIGpRTSBldmVudDogXCJwYWdlYmVmb3JlY3JlYXRlXCIg44Gr5a++5b+cXHJcbiAgICAgICAgcHVibGljIG9uUGFnZUJlZm9yZUNyZWF0ZShldmVudDogSlF1ZXJ5RXZlbnRPYmplY3QpOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX293bmVyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9vd25lci5vblBhZ2VCZWZvcmVDcmVhdGUoZXZlbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgalFNIGV2ZW50OiBcInBhZ2VjcmVhdGVcIiAo5penOlwicGFnZWluaXRcIikg44Gr5a++5b+cXHJcbiAgICAgICAgcHVibGljIG9uUGFnZUluaXQoZXZlbnQ6IEpRdWVyeUV2ZW50T2JqZWN0KTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9vd25lcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fb3duZXIub25QYWdlSW5pdChldmVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISBqUU0gZXZlbnQ6IFwicGFnZWJlZm9yZXNob3dcIiDjgavlr77lv5xcclxuICAgICAgICBwdWJsaWMgb25QYWdlQmVmb3JlU2hvdyhldmVudDogSlF1ZXJ5RXZlbnRPYmplY3QsIGRhdGE/OiBTaG93RXZlbnREYXRhKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9vd25lcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fb3duZXIub25QYWdlQmVmb3JlU2hvdyhldmVudCwgZGF0YSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISBqUU0gZXZlbnQ6IFwicGFnZWNvbnRhaW5lcnNob3dcIiAo5penOlwicGFnZXNob3dcIikg44Gr5a++5b+cXHJcbiAgICAgICAgcHVibGljIG9uUGFnZVNob3coZXZlbnQ6IEpRdWVyeUV2ZW50T2JqZWN0LCBkYXRhPzogU2hvd0V2ZW50RGF0YSk6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fb3duZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX293bmVyLm9uUGFnZVNob3coZXZlbnQsIGRhdGEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgalFNIGV2ZW50OiBcInBhZ2ViZWZvcmVoaWRlXCIg44Gr5a++5b+cXHJcbiAgICAgICAgcHVibGljIG9uUGFnZUJlZm9yZUhpZGUoZXZlbnQ6IEpRdWVyeUV2ZW50T2JqZWN0LCBkYXRhPzogSGlkZUV2ZW50RGF0YSk6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fb3duZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX293bmVyLm9uUGFnZUJlZm9yZUhpZGUoZXZlbnQsIGRhdGEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgalFNIGV2ZW50OiBcInBhZ2Vjb250YWluZXJoaWRlXCIgKOaXpzpcInBhZ2VoaWRlXCIpIOOBq+WvvuW/nFxyXG4gICAgICAgIHB1YmxpYyBvblBhZ2VIaWRlKGV2ZW50OiBKUXVlcnlFdmVudE9iamVjdCwgZGF0YT86IEhpZGVFdmVudERhdGEpOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX293bmVyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9vd25lci5vblBhZ2VIaWRlKGV2ZW50LCBkYXRhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIGpRTSBldmVudDogXCJwYWdlcmVtb3ZlXCIg44Gr5a++5b+cXHJcbiAgICAgICAgcHVibGljIG9uUGFnZVJlbW92ZShldmVudDogSlF1ZXJ5RXZlbnRPYmplY3QpOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX293bmVyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9vd25lci5vblBhZ2VSZW1vdmUoZXZlbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBwcml2YXRlIG1ldGhvZHNcclxuXHJcbiAgICAgICAgLy8hIG1peGluIOeUqOeWkeS8vOOCs+ODs+OCueODiOODqeOCr+OCv1xyXG4gICAgICAgIHByaXZhdGUgc2V0dXAob3B0aW9uczogUGFnZUNvbnN0cnVjdE9wdGlvbnMpOiB2b2lkIHtcclxuICAgICAgICAgICAgLy8gbWl4aW4gZGVzdGluYXRpb24g55So44Gu5YaN5Yid5pyf5YyWXHJcbiAgICAgICAgICAgIHRoaXMuX2luaXRpYWxpemVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMuX2ludGVudCA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICAvLyDjgqTjg5njg7Pjg4jjg5DjgqTjg7Pjg4lcclxuICAgICAgICAgICAgbGV0IHNlbGVjdG9yOiBzdHJpbmcgPSBcIiNcIiArIHRoaXMuX2lkO1xyXG4gICAgICAgICAgICAkKGRvY3VtZW50KVxyXG4gICAgICAgICAgICAgICAgLm9mZihcInBhZ2ViZWZvcmVjcmVhdGVcIiwgc2VsZWN0b3IpXHJcbiAgICAgICAgICAgICAgICAub24oXCJwYWdlYmVmb3JlY3JlYXRlXCIsIHNlbGVjdG9yLCAoZXZlbnQ6IEpRdWVyeUV2ZW50T2JqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fJHBhZ2UgPSAkKHNlbGVjdG9yKS5maXJzdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuXyRoZWFkZXIgPSB0aGlzLl8kcGFnZS5jaGlsZHJlbihcIjpqcW1EYXRhKHJvbGU9aGVhZGVyKVwiKS5maXJzdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuXyRmb290ZXIgPSB0aGlzLl8kcGFnZS5jaGlsZHJlbihcIjpqcW1EYXRhKHJvbGU9Zm9vdGVyKVwiKS5maXJzdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuXyRwYWdlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbihcInBhZ2VjcmVhdGVcIiwgKGV2ZW50OiBKUXVlcnlFdmVudE9iamVjdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYWdlSW5pdChldmVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbihcInBhZ2ViZWZvcmVzaG93XCIsIChldmVudDogSlF1ZXJ5RXZlbnRPYmplY3QsIGRhdGE6IFNob3dFdmVudERhdGEpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFnZUJlZm9yZVNob3coZXZlbnQsIGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBbTm90ZV1pbnN0ZWFkIGZ1dHVyZSB2ZXJzaW9uIFwicGFnZWNvbnRhaW5lcnNob3dcIi5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uKFwicGFnZXNob3dcIiwgKGV2ZW50OiBKUXVlcnlFdmVudE9iamVjdCwgZGF0YTogU2hvd0V2ZW50RGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYWdlU2hvdyhldmVudCwgZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbihcInBhZ2ViZWZvcmVoaWRlXCIsIChldmVudDogSlF1ZXJ5RXZlbnRPYmplY3QsIGRhdGE6IEhpZGVFdmVudERhdGEpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFnZUJlZm9yZUhpZGUoZXZlbnQsIGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBbTm90ZV1pbnN0ZWFkIGZ1dHVyZSB2ZXJzaW9uIFwicGFnZWNvbnRhaW5lcmhpZGVcIi5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uKFwicGFnZWhpZGVcIiwgKGV2ZW50OiBKUXVlcnlFdmVudE9iamVjdCwgZGF0YTogSGlkZUV2ZW50RGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYWdlSGlkZShldmVudCwgZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbihcInBhZ2VyZW1vdmVcIiwgKGV2ZW50OiBKUXVlcnlFdmVudE9iamVjdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYWdlUmVtb3ZlKGV2ZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYWdlQmVmb3JlQ3JlYXRlKGV2ZW50KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XHJcblxyXG4gICAgICAgICAgICAvLyBvd25lciDoqK3lrppcclxuICAgICAgICAgICAgdGhpcy5fb3duZXIgPSBvcHRpb25zLm93bmVyO1xyXG4gICAgICAgICAgICAvLyBpbnRlbnQg6Kit5a6aXHJcbiAgICAgICAgICAgIHRoaXMuX2tlZXBJbnRlbnQgPSBvcHRpb25zLmtlZXBJbnRlbnQ7XHJcblxyXG4gICAgICAgICAgICAvLyBSb3V0ZXIg44G455m76YyyXHJcbiAgICAgICAgICAgIGlmIChudWxsID09IG9wdGlvbnMucm91dGUpIHtcclxuICAgICAgICAgICAgICAgIG9wdGlvbnMucm91dGUgPSB0aGlzLl9pZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBSb3V0ZXIucmVnaXN0ZXIob3B0aW9ucy5yb3V0ZSwgdGhpcy5fdXJsLCBvcHRpb25zLnRvcCwgb3B0aW9ucy5jYWxsYmFjayk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgUGFnZVRyYW5zaXRpb25EaXJlY3Rpb24g44Gu5Yik5a6aXHJcbiAgICAgICAgcHJpdmF0ZSBnZXREaXJlY3Rpb24oKTogUGFnZVRyYW5zaXRpb25EaXJlY3Rpb24ge1xyXG4gICAgICAgICAgICBsZXQgYWN0aXZlSW5kZXggPSBSb3V0ZXIuZ2V0SnFtSGlzdG9yeSgpLmFjdGl2ZUluZGV4O1xyXG4gICAgICAgICAgICBsZXQgcHJldkluZGV4ID0gUm91dGVyLmdldEpxbUhpc3RvcnkoKS5wcmV2aW91c0luZGV4O1xyXG5cclxuICAgICAgICAgICAgaWYgKG51bGwgPT0gYWN0aXZlSW5kZXggfHwgbnVsbCA9PSBwcmV2SW5kZXgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBcInVua25vd25cIjtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChwcmV2SW5kZXggPT09IGFjdGl2ZUluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJzYW1lXCI7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoYWN0aXZlSW5kZXggPCBwcmV2SW5kZXgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBcImJhY2tcIjtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBcImZvcndhcmRcIjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBwYWdlQmVmb3JlQ3JlYXRlKGV2ZW50OiBKUXVlcnlFdmVudE9iamVjdCk6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLm9uUGFnZUJlZm9yZUNyZWF0ZShldmVudCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHBhZ2VJbml0KGV2ZW50OiBKUXVlcnlFdmVudE9iamVjdCk6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuX2luaXRpYWxpemVkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uSW5pdGlhbGl6ZShldmVudCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9pbml0aWFsaXplZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5vblBhZ2VJbml0KGV2ZW50KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgcGFnZUJlZm9yZVNob3coZXZlbnQ6IEpRdWVyeUV2ZW50T2JqZWN0LCBkYXRhOiBTaG93RXZlbnREYXRhKTogdm9pZCB7XHJcbiAgICAgICAgICAgIEZyYW1ld29yay5zZXRBY3RpdmVQYWdlKHRoaXMpO1xyXG4gICAgICAgICAgICB0aGlzLl9pbnRlbnQgPSA8TWFuYWdlZEludGVudD5Sb3V0ZXIucG9wSW50ZW50KCk7XHJcbiAgICAgICAgICAgIHRoaXMub25QYWdlQmVmb3JlU2hvdyhldmVudCwgJC5leHRlbmQoZGF0YSwgeyBkaXJlY3Rpb246IHRoaXMuZ2V0RGlyZWN0aW9uKCkgfSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBwYWdlU2hvdyhldmVudDogSlF1ZXJ5RXZlbnRPYmplY3QsIGRhdGE6IFNob3dFdmVudERhdGEpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5vblBhZ2VTaG93KGV2ZW50LCAkLmV4dGVuZChkYXRhLCB7IGRpcmVjdGlvbjogdGhpcy5nZXREaXJlY3Rpb24oKSB9KSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHBhZ2VCZWZvcmVIaWRlKGV2ZW50OiBKUXVlcnlFdmVudE9iamVjdCwgZGF0YTogSGlkZUV2ZW50RGF0YSk6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLm9uUGFnZUJlZm9yZUhpZGUoZXZlbnQsICQuZXh0ZW5kKGRhdGEsIHsgZGlyZWN0aW9uOiB0aGlzLmdldERpcmVjdGlvbigpIH0pKTtcclxuICAgICAgICAgICAgaWYgKG51bGwgIT0gdGhpcy5faW50ZW50ICYmICh0aGlzLl9rZWVwSW50ZW50IHx8IHRoaXMuX2ludGVudC5fdXBkYXRlKSkgeyAgICAvLyBpbnRlbnQg44Gr5pu05paw44GM44GC44Gj44Gf5aC05ZCIXHJcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5faW50ZW50Ll91cGRhdGU7XHJcbiAgICAgICAgICAgICAgICBSb3V0ZXIucHVzaEludGVudCh0aGlzLl9pbnRlbnQpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKFJvdXRlci5mcm9tSGFzaENoYW5nZWQoKSAmJiBSb3V0ZXIuaXNJblN1YkZsb3coKSkgeyAgICAvLyBTdWIgRmxvdyDlhoXjgacgYmFjayDjgZXjgozjgZ/loLTlkIhcclxuICAgICAgICAgICAgICAgIFJvdXRlci5wdXNoSW50ZW50KHRoaXMuX2ludGVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5faW50ZW50ID0gbnVsbDtcclxuICAgICAgICAgICAgRnJhbWV3b3JrLnNldEFjdGl2ZVBhZ2UobnVsbCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHBhZ2VIaWRlKGV2ZW50OiBKUXVlcnlFdmVudE9iamVjdCwgZGF0YTogSGlkZUV2ZW50RGF0YSk6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLm9uUGFnZUhpZGUoZXZlbnQsICQuZXh0ZW5kKGRhdGEsIHsgZGlyZWN0aW9uOiB0aGlzLmdldERpcmVjdGlvbigpIH0pKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgcGFnZVJlbW92ZShldmVudDogSlF1ZXJ5RXZlbnRPYmplY3QpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5vblBhZ2VSZW1vdmUoZXZlbnQpO1xyXG4gICAgICAgICAgICB0aGlzLl8kcGFnZS5vZmYoKTtcclxuICAgICAgICAgICAgdGhpcy5fJHBhZ2UgPSBudWxsO1xyXG4gICAgICAgICAgICB0aGlzLl8kaGVhZGVyLm9mZigpO1xyXG4gICAgICAgICAgICB0aGlzLl8kaGVhZGVyID0gbnVsbDtcclxuICAgICAgICAgICAgdGhpcy5fJGZvb3Rlci5vZmYoKTtcclxuICAgICAgICAgICAgdGhpcy5fJGZvb3RlciA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAvLyBjbG9zdXJlIG1ldGhvZHNcclxuXHJcbiAgICAvKlxyXG4gICAgICogalFNMS40IOOBq+OBpuOAgWR1cGxpY2F0ZSDjgajjgZXjgozjgabjgYTjgosgXCJwYWdlc2hvd1wiLCBcInBhZ2VoaWRlXCIg44Gv44G+44Gg5o2u44GI572u44GN44CCXHJcbiAgICAgKiBodHRwOi8vanF1ZXJ5bW9iaWxlLmNvbS91cGdyYWRlLWd1aWRlLzEuNC8jbmF2aWdhdGlvblxyXG4gICAgICpcclxuICAgICAqIOeJueWumuODmuODvOOCuOOBq+WvvuOBl+OBpuOAgeOCpOODmeODs+ODiOOCkuWPluW+l+OBp+OBjeOBquOBhOOBn+OCgeOAglxyXG4gICAgICogRm9ydW0g44Gn44KC6K2w6KuW5Lit44Gq44Gu44Gn44CB5rG6552A44GM44Gk44GE44Gm44GL44KJ5a++5b+c44KS6ICD5oWu44GZ44KL44CCXHJcbiAgICAgKiBodHRwczovL2dpdGh1Yi5jb20vanF1ZXJ5L2pxdWVyeS1tb2JpbGUvaXNzdWVzLzY4NjVcclxuICAgICAqXHJcbiAgICAgKiBb5Y+C6ICDXSDjgojjgY/jgo/jgYvjgovjgqTjg5njg7Pjg4jjg4Hjg7zjg4jjgrfjg7zjg4hcclxuICAgICAqICAtIOacrOWutigxLjQrKSBodHRwOi8vanFtdHJpY2tzLndvcmRwcmVzcy5jb20vMjAxNC8wMy8yNi9qcXVlcnktbW9iaWxlLXBhZ2UtZXZlbnRzL1xyXG4gICAgICogIC0g5pyJ5b+XKH4xLjMpIGh0dHA6Ly9kZXYuc2NyZXctYXhpcy5jb20vZG9jL2pxdWVyeV9tb2JpbGUvcmVzb3VyY2VzL2NoZWF0c2hlZXQvXHJcbiAgICAgKlxyXG4gICAgICog5Lul5LiL44Gv5LiN5a6M5YWo44Gq5a++5b+c5LqI5a6a44Kz44O844OJXHJcbiAgICAgKlxyXG4gICAgICog54m544Gr5oyv44KL6Iie44GE44GM5aSJ44KP44KL44Gu44Gv44CBXCJwYWdlaGlkZVwiIOOBp+OAgeaknOiojuOBleOCjOOBpuOBhOOCi+S7leanmOOBp+OBr1xyXG4gICAgICogRE9NIOOCkueJueWumuOBp+OBjeOBquOBhOOBn+OCgeOAgW9uUGFnZUhpZGUoKSDjgpLjgqTjg7Pjgrnjgr/jg7PjgrnjgavkvJ3jgYjjgovjgZPjgajjgYzjgafjgY3jgarjgYTjgIJcclxuICAgICAqXHJcbiAgICAgKiDku5Xmp5jjgYzlpInjgo/jgonjgarjgYTloLTlkIjjga9cclxuICAgICAqIG9uUGFnZUJlZm9yZUhpZGUoKSDjga7kuK3jgacgcG9zdCDjgZfjgaYgb25QYWdlSGlkZSgpIOOCkueZuuihjOOBmeOCi+S6iOWumijpgY7ljrvkupLmj5vkv53oqLwpXHJcbiAgICAgKlxyXG4gICAgICogMjAxNS8wMy8yNSDov73oqJg6XHJcbiAgICAgKiDku5Xmp5jjga/norrlrpouIGpRTTEuNiDjgojjgorliYrpmaTjgZXjgozjgovkuojlrppcclxuICAgICAqICBqUU0xLjQg55u45b2T44Gu5Y+C6ICD5a6f6KOFIHBsdWdpbiDjgYzjgYLjgorjgIHjgZPjga7lrp/oo4Xnm7jlvZPjga7mqZ/og73jgpIgY2RwLmZyYW1ld29yay5qcW0g44Gn5oqx44GI44KL5LqI5a6aXHJcbiAgICAgKiAgaHR0cHM6Ly9naXRodWIuY29tL2Fyc2NobWl0ei9qcXVlcnktbW9iaWxlLW9ucGFnZVxyXG4gICAgICpcclxuICAgICAqIOWFrOW8j+imi+ino1xyXG4gICAgICogaHR0cHM6Ly9naXRodWIuY29tL2pxdWVyeS9qcXVlcnktbW9iaWxlL2lzc3Vlcy83MjgzI2lzc3VlY29tbWVudC00MDc0NjYyMlxyXG4gICAgICovXHJcbi8qXHJcbiAgICAvLyBiaW5kIFwicGFnZWNvbnRhaW5lcnNob3dcIiwgYW5kIFwicGFnZWNvbnRhaW5lcmhpZGVcIi5cclxuICAgICgoKSA9PiB7XHJcbiAgICAgICAgbGV0ICRib2R5OiBhbnkgPSAkKFwiYm9keVwiKTtcclxuICAgICAgICAkKGRvY3VtZW50KVxyXG4gICAgICAgICAgICAub24oXCJwYWdlY29udGFpbmVyc2hvd1wiLCAoZXZlbnQ6IEpRdWVyeUV2ZW50T2JqZWN0LCBkYXRhOiBTaG93RXZlbnREYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoMCA8IGRhdGEucHJldlBhZ2UubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXCJwYWdlY29udGFpbmVyc2hvd1wiIOOBryBcInBhZ2Vjb250YWluZXJoaWRlXCIg44KI44KK44KC6YGF44GE44Gu44Gn44CB44KE44Gv44KKIERPTSDjgavjga/jgqLjgq/jgrvjgrnjgafjgY3jgarjgYRcclxuICAgICAgICAgICAgICAgICAgICBsZXQgJHByZXZwYWdlID0gJChcIiNcIiArIGRhdGEucHJldlBhZ2VbMF0uaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICRwcmV2cGFnZS50cmlnZ2VyKFwiX3BhZ2VoaWRlXCIsIGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8g5Lul5LiL44Gu5a++5b+c44Gn44CBXCJwYWdlY29udGFpbmVyc2hvd1wiIOOBryBcInBhZ2VzaG93XCIg5ZCM562J44Gu5oyv44KL6Iie44GE44Gr44GZ44KL44GT44Go44GM5Y+v6IO9XHJcbiAgICAgICAgICAgICAgICBsZXQgcGFnZUlkID0gJGJvZHkucGFnZWNvbnRhaW5lcihcImdldEFjdGl2ZVBhZ2VcIikucHJvcChcImlkXCIpO1xyXG4gICAgICAgICAgICAgICAgbGV0ICRwYWdlID0gJChcIiNcIiArIHBhZ2VJZCk7XHJcbiAgICAgICAgICAgICAgICAkcGFnZS50cmlnZ2VyKFwiX3BhZ2VzaG93XCIsIGRhdGEpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAub24oXCJwYWdlY29udGFpbmVyaGlkZVwiLCAoZXZlbnQ6IEpRdWVyeUV2ZW50T2JqZWN0LCBkYXRhOiBIaWRlRXZlbnREYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyBcInBhZ2Vjb250YWluZXJoaWRlXCIg44KS5Y+X44GR44Gf44Go44GN44Gv5pei44GrIERPTSDjgYvjgonmtojjgYjjgabjgYTjgovjgZ/jgoHjgIFwYWdlIOOBr+eJueWumuOBp+OBjeOBquOBhOOAglxyXG4gICAgICAgICAgICAgICAgLy9sZXQgcGFnZUlkID0gJGJvZHkucGFnZWNvbnRhaW5lcignZ2V0QWN0aXZlUGFnZScpLnByb3AoXCJpZFwiKTtcclxuICAgICAgICAgICAgICAgIC8vbGV0ICRwYWdlID0gJChcIiNcIiArIHBhZ2VJZCk7XHJcbiAgICAgICAgICAgICAgICAvLyRwYWdlLnRyaWdnZXIoXCJfcGFnZWhpZGVcIiwgZGF0YSk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5vbihcInBhZ2Vjb250YWluZXJ0cmFuc2l0aW9uXCIsIChldmVudDogSlF1ZXJ5RXZlbnRPYmplY3QsIGRhdGE6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gXCJwYWdlY29udGFpbmVydHJhbnNpdGlvblwiIOOBq+OBryB0b1BhZ2Ug44Gr44GX44GL44Ki44Kv44K744K544Gv44Gn44GN44Gq44GEXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgO1xyXG4gICAgfSkoKTtcclxuKi9cclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gY2RwOi8vL0NEUC9GcmFtZXdvcmsvUGFnZS50cyIsIi8qKlxyXG4gKiBAZmlsZSAgVXRpbHMuXHJcbiAqIEBicmllZiBUb29scyDlsILnlKjjga7jg6bjg7zjg4bjgqPjg6rjg4bjgqNcclxuICovXHJcbm5hbWVzcGFjZSBDRFAuVG9vbHMge1xyXG4gICAgLy8gY2RwLnRvb2xzIOOBryBjZHAuY29yZSDjgavkvp3lrZjjgZfjgarjgYTjgZ/jgoHjgIHni6zoh6rjgatnbG9iYWwg44KS5o+Q5L6b44GZ44KLXHJcbiAgICBleHBvcnQgdmFyIGdsb2JhbCA9IGdsb2JhbCB8fCB3aW5kb3c7XHJcbn1cclxuIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIlV0aWxzLnRzXCIgLz5cclxuXHJcbm5hbWVzcGFjZSBDRFAuVG9vbHMge1xyXG5cclxuICAgIGNvbnN0IFRBRyA9IFwiW0NEUC5Ub29scy5CbG9iXSBcIjtcclxuXHJcbiAgICBleHBvcnQgbW9kdWxlIEJsb2Ige1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBHZXQgQmxvYkJ1aWxkZXJcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge2FueX0gQmxvYkJ1aWxkZXJcclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBnZXRCbG9iQnVpbGRlcigpOiBhbnkge1xyXG4gICAgICAgICAgICByZXR1cm4gZ2xvYmFsLkJsb2JCdWlsZGVyIHx8IGdsb2JhbC5XZWJLaXRCbG9iQnVpbGRlciB8fCBnbG9iYWwuTW96QmxvYkJ1aWxkZXIgfHwgZ2xvYmFsLk1TQmxvYkJ1aWxkZXI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBcnJheUJ1ZmZlciB0byBCbG9iXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gYnVmIHtBcnJheUJ1ZmZlcn0gW2luXSBBcnJheUJ1ZmZlciBkYXRhXHJcbiAgICAgICAgICogQHBhcmFtIG1pbWVUeXBlIHtzdHJpbmd9IFtpbl0gTWltZVR5cGUgb2YgZGF0YVxyXG4gICAgICAgICAqIEByZXR1cm4ge0Jsb2J9IEJsb2IgZGF0YVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGV4cG9ydCBmdW5jdGlvbiBhcnJheUJ1ZmZlclRvQmxvYihidWY6IEFycmF5QnVmZmVyLCBtaW1lVHlwZTogc3RyaW5nKTogQmxvYiB7XHJcbiAgICAgICAgICAgIGxldCBibG9iOiBCbG9iID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgIGxldCBibG9iQnVpbGRlck9iamVjdDogYW55ID0gZ2V0QmxvYkJ1aWxkZXIoKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChibG9iQnVpbGRlck9iamVjdCAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgYmxvYkJ1aWxkZXI6IGFueSA9IG5ldyBibG9iQnVpbGRlck9iamVjdCgpO1xyXG4gICAgICAgICAgICAgICAgYmxvYkJ1aWxkZXIuYXBwZW5kKGJ1Zik7XHJcbiAgICAgICAgICAgICAgICBibG9iID0gYmxvYkJ1aWxkZXIuZ2V0QmxvYihtaW1lVHlwZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBBbmRyb2lkIDQuNCBLaXRLYXQgQ2hyb21pdW0gV2ViVmlld1xyXG4gICAgICAgICAgICAgICAgYmxvYiA9IG5ldyBnbG9iYWwuQmxvYihbYnVmXSwgeyB0eXBlOiBtaW1lVHlwZSB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gYmxvYjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEJhc2U2NCBzdHJpbmcgdG8gQmxvYlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGJhc2U2NCB7c3RyaW5nfSBbaW5dIEJhc2U2NCBzdHJpbmcgZGF0YVxyXG4gICAgICAgICAqIEBwYXJhbSBtaW1lVHlwZSB7c3RyaW5nfSBbaW5dIE1pbWVUeXBlIG9mIGRhdGFcclxuICAgICAgICAgKiBAcmV0dXJuIHtCbG9ifSBCbG9iIGRhdGFcclxuICAgICAgICAgKi9cclxuICAgICAgICBleHBvcnQgZnVuY3Rpb24gYmFzZTY0VG9CbG9iKGJhc2U2NDogc3RyaW5nLCBtaW1lVHlwZTogc3RyaW5nKTogQmxvYiB7XHJcbiAgICAgICAgICAgIGxldCBibG9iOiBCbG9iID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgIGxldCBibG9iQnVpbGRlck9iamVjdDogYW55ID0gZ2V0QmxvYkJ1aWxkZXIoKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChibG9iQnVpbGRlck9iamVjdCAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgYmxvYkJ1aWxkZXI6IGFueSA9IG5ldyBibG9iQnVpbGRlck9iamVjdCgpO1xyXG4gICAgICAgICAgICAgICAgYmxvYkJ1aWxkZXIuYXBwZW5kKGJhc2U2NFRvQXJyYXlCdWZmZXIoYmFzZTY0KSk7XHJcbiAgICAgICAgICAgICAgICBibG9iID0gYmxvYkJ1aWxkZXIuZ2V0QmxvYihtaW1lVHlwZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBBbmRyb2lkIDQuNCBLaXRLYXQgQ2hyb21pdW0gV2ViVmlld1xyXG4gICAgICAgICAgICAgICAgYmxvYiA9IG5ldyBnbG9iYWwuQmxvYihbYmFzZTY0VG9BcnJheUJ1ZmZlcihiYXNlNjQpXSwgeyB0eXBlOiBtaW1lVHlwZSB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gYmxvYjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEJhc2U2NCBzdHJpbmcgdG8gQXJyYXlCdWZmZXJcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBiYXNlNjQge3N0cmluZ30gW2luXSBCYXNlNjQgc3RyaW5nIGRhdGFcclxuICAgICAgICAgKiBAcmV0dXJuIHtBcnJheUJ1ZmZlcn0gQXJyYXlCdWZmZXIgZGF0YVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGV4cG9ydCBmdW5jdGlvbiBiYXNlNjRUb0FycmF5QnVmZmVyKGJhc2U2NDogc3RyaW5nKTogQXJyYXlCdWZmZXIge1xyXG4gICAgICAgICAgICBsZXQgYnl0ZXMgPSB3aW5kb3cuYXRvYihiYXNlNjQpO1xyXG4gICAgICAgICAgICBsZXQgYXJyYXlCdWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIoYnl0ZXMubGVuZ3RoKTtcclxuICAgICAgICAgICAgbGV0IGRhdGEgPSBuZXcgVWludDhBcnJheShhcnJheUJ1ZmZlcik7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMCwgbGVuID0gYnl0ZXMubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHtcclxuICAgICAgICAgICAgICAgIGRhdGFbaV0gPSBieXRlcy5jaGFyQ29kZUF0KGkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBhcnJheUJ1ZmZlcjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEJhc2U2NCBzdHJpbmcgdG8gVWludDhBcnJheVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGJhc2U2NCB7c3RyaW5nfSBbaW5dIEJhc2U2NCBzdHJpbmcgZGF0YVxyXG4gICAgICAgICAqIEByZXR1cm4ge1VpbnQ4QXJyYXl9IFVpbnQ4QXJyYXkgZGF0YVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGV4cG9ydCBmdW5jdGlvbiBiYXNlNjRUb1VpbnQ4QXJyYXkoZW5jb2RlZDogc3RyaW5nKTogVWludDhBcnJheSB7XHJcbiAgICAgICAgICAgIGxldCBieXRlcyA9IHdpbmRvdy5hdG9iKGVuY29kZWQpO1xyXG4gICAgICAgICAgICBsZXQgZGF0YSA9IG5ldyBVaW50OEFycmF5KGJ5dGVzLmxlbmd0aCk7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMCwgbGVuID0gYnl0ZXMubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHtcclxuICAgICAgICAgICAgICAgIGRhdGFbaV0gPSBieXRlcy5jaGFyQ29kZUF0KGkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQXJyYXlCdWZmZXIgdG8gYmFzZTY0IHN0cmluZ1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGFycmF5QnVmZmVyIHtBcnJheUJ1ZmZlcn0gW2luXSBBcnJheUJ1ZmZlciBkYXRhXHJcbiAgICAgICAgICogQHJldHVybiB7c3RyaW5nfSBiYXNlNjQgZGF0YVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGV4cG9ydCBmdW5jdGlvbiBhcnJheUJ1ZmZlclRvQmFzZTY0KGFycmF5QnVmZmVyOiBBcnJheUJ1ZmZlcik6IHN0cmluZyB7XHJcbiAgICAgICAgICAgIGxldCBieXRlcyA9IG5ldyBVaW50OEFycmF5KGFycmF5QnVmZmVyKTtcclxuICAgICAgICAgICAgcmV0dXJuIHVpbnQ4QXJyYXlUb0Jhc2U2NChieXRlcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBVaW50OEFycmF5IHRvIGJhc2U2NCBzdHJpbmdcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBieXRlcyB7VWludDhBcnJheX0gW2luXSBVaW50OEFycmF5IGRhdGFcclxuICAgICAgICAgKiBAcmV0dXJuIHtzdHJpbmd9IGJhc2U2NCBkYXRhXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZXhwb3J0IGZ1bmN0aW9uIHVpbnQ4QXJyYXlUb0Jhc2U2NChieXRlczogVWludDhBcnJheSk6IHN0cmluZyB7XHJcbiAgICAgICAgICAgIGxldCBkYXRhOiBzdHJpbmcgPSBcIlwiO1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IGJ5dGVzLmJ5dGVMZW5ndGg7IGkgPCBsZW47ICsraSkge1xyXG4gICAgICAgICAgICAgICAgZGF0YSArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ5dGVzW2ldKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gd2luZG93LmJ0b2EoZGF0YSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBVUkwgT2JqZWN0XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHthbnl9IFVSTCBPYmplY3RcclxuICAgICAgICAgKi9cclxuICAgICAgICBleHBvcnQgbGV0IFVSTCA9ICgoKSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBnbG9iYWwuVVJMIHx8IGdsb2JhbC53ZWJraXRVUkw7XHJcbiAgICAgICAgfSkoKTtcclxuICAgIH1cclxufVxyXG4iLCIvKiB0c2xpbnQ6ZGlzYWJsZTptYXgtbGluZS1sZW5ndGggKi9cclxuXHJcbm5hbWVzcGFjZSBDRFAuVG9vbHMge1xyXG5cclxuICAgIGNvbnN0IFRBRyA9IFwiW0NEUC5Ub29scy5EYXRlVGltZV0gXCI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAY2xhc3MgRGF0ZVRpbWVcclxuICAgICAqIEBicmllZiDmmYLliLvmk43kvZzjga7jg6bjg7zjg4bjgqPjg6rjg4bjgqPjgq/jg6njgrlcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGNsYXNzIERhdGVUaW1lIHtcclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBwdWJsaWMgc3RhdGljIG1ldGhvZFxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDln7rngrnjgajjgarjgovml6Xku5jjgYvjgonjgIFu5pel5b6M44CBbuaXpeWJjeOCkueul+WHulxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGJhc2UgICAge0RhdGV9ICAgW2luXSDln7rmupbml6VcclxuICAgICAgICAgKiBAcGFyYW0gYWRkRGF5cyB7TnVtYmVyfSBbaW5dIOWKoOeul+aXpS4g44Oe44Kk44OK44K55oyH5a6a44GnbuaXpeWJjeOCguioreWumuWPr+iDvVxyXG4gICAgICAgICAqIEByZXR1cm4ge0RhdGV9IOaXpeS7mOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgY29tcHV0ZURhdGUoYmFzZTogRGF0ZSwgYWRkRGF5czogbnVtYmVyKTogRGF0ZSB7XHJcbiAgICAgICAgICAgIGxldCBkdCA9IG5ldyBEYXRlKGJhc2UuZ2V0VGltZSgpKTtcclxuICAgICAgICAgICAgbGV0IGJhc2VTZWMgPSBkdC5nZXRUaW1lKCk7XHJcbiAgICAgICAgICAgIGxldCBhZGRTZWMgPSBhZGREYXlzICogODY0MDAwMDA7ICAgIC8v5pel5pWwICogMeaXpeOBruODn+ODquenkuaVsFxyXG4gICAgICAgICAgICBsZXQgdGFyZ2V0U2VjID0gYmFzZVNlYyArIGFkZFNlYztcclxuICAgICAgICAgICAgZHQuc2V0VGltZSh0YXJnZXRTZWMpO1xyXG4gICAgICAgICAgICByZXR1cm4gZHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDb252ZXJ0IHN0cmluZyB0byBkYXRlIG9iamVjdFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IGRhdGUgc3RyaW5nIGV4KSBZWVlZLU1NLUREVEhIOm1tOlNTLlNTU1xyXG4gICAgICAgICAqIEByZXR1cm4ge09iamVjdH0gZGF0ZSBvYmplY3RcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGNvbnZlcnRJU09TdHJpbmdUb0RhdGUoZGF0ZVN0cmluZzogc3RyaW5nKTogRGF0ZSB7XHJcbiAgICAgICAgICAgIGxldCBkYXRlVGltZSA9IGRhdGVTdHJpbmcuc3BsaXQoXCJUXCIpLFxyXG4gICAgICAgICAgICAgICAgZGF0ZUFycmF5ID0gZGF0ZVRpbWVbMF0uc3BsaXQoXCItXCIpLFxyXG4gICAgICAgICAgICAgICAgdGltZUFycmF5LCBzZWNBcnJheSxcclxuICAgICAgICAgICAgICAgIGRhdGVPYmplY3Q7XHJcblxyXG4gICAgICAgICAgICBpZiAoZGF0ZVRpbWVbMV0pIHtcclxuICAgICAgICAgICAgICAgIHRpbWVBcnJheSA9IGRhdGVUaW1lWzFdLnNwbGl0KFwiOlwiKTtcclxuICAgICAgICAgICAgICAgIHNlY0FycmF5ID0gdGltZUFycmF5WzJdLnNwbGl0KFwiLlwiKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHRpbWVBcnJheSkge1xyXG4gICAgICAgICAgICAgICAgZGF0ZU9iamVjdCA9IG5ldyBEYXRlKDxhbnk+ZGF0ZUFycmF5WzBdLCA8YW55PmRhdGVBcnJheVsxXSAtIDEsIDxhbnk+ZGF0ZUFycmF5WzJdLFxyXG4gICAgICAgICAgICAgICAgICAgIDxhbnk+dGltZUFycmF5WzBdLCA8YW55PnRpbWVBcnJheVsxXSwgPGFueT5zZWNBcnJheVswXSwgPGFueT5zZWNBcnJheVsxXSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0ZUFycmF5WzJdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZU9iamVjdCA9IG5ldyBEYXRlKDxhbnk+ZGF0ZUFycmF5WzBdLCA8YW55PmRhdGVBcnJheVsxXSAtIDEsIDxhbnk+ZGF0ZUFycmF5WzJdKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0ZUFycmF5WzFdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZU9iamVjdCA9IG5ldyBEYXRlKDxhbnk+ZGF0ZUFycmF5WzBdLCA8YW55PmRhdGVBcnJheVsxXSAtIDEpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRlT2JqZWN0ID0gbmV3IERhdGUoPGFueT5kYXRlQXJyYXlbMF0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZGF0ZU9iamVjdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqICBDb252ZXJ0IGEgZGF0ZSBvYmplY3QgaW50byBhIHN0cmluZyBpbiBQTU9BUEkgcmVjb3JkZWRfZGF0ZSBmb3JtYXQodGhlIElTTyA4NjAxIEV4dGVuZGVkIEZvcm1hdClcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBkYXRlICAge0RhdGV9ICAgW2luXSBkYXRlIG9iamVjdFxyXG4gICAgICAgICAqIEBwYXJhbSB0YXJnZXQge1N0cmluZ30gW2luXSB7eWVhciB8IG1vbnRoIHwgZGF0ZSB8IGhvdXIgfCBtaW4gfCBzZWMgfCBtc2VjIH1cclxuICAgICAgICAgKiBAcmV0dXJuIHtTdHJpbmd9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBjb252ZXJ0RGF0ZVRvSVNPU3RyaW5nKGRhdGU6IERhdGUsIHRhcmdldDogc3RyaW5nID0gXCJtc2VjXCIpOiBzdHJpbmcge1xyXG4gICAgICAgICAgICBsZXQgaXNvRGF0ZVN0cmluZztcclxuXHJcbiAgICAgICAgICAgIHN3aXRjaCAodGFyZ2V0KSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwieWVhclwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSBcIm1vbnRoXCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiZGF0ZVwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSBcImhvdXJcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJtaW5cIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJzZWNcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJtc2VjXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihUQUcgKyBcInVua25vd24gdGFyZ2V0OiBcIiArIHRhcmdldCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0ID0gXCJtc2VjXCI7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlzb0RhdGVTdHJpbmcgPSBkYXRlLmdldEZ1bGxZZWFyKCk7XHJcbiAgICAgICAgICAgIGlmIChcInllYXJcIiA9PT0gdGFyZ2V0KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaXNvRGF0ZVN0cmluZztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaXNvRGF0ZVN0cmluZyArPSAoXCItXCIgKyBEYXRlVGltZS5udW1iZXJUb0RvdWJsZURpZ2l0c1N0cmluZyhkYXRlLmdldE1vbnRoKCkgKyAxKSk7XHJcbiAgICAgICAgICAgIGlmIChcIm1vbnRoXCIgPT09IHRhcmdldCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGlzb0RhdGVTdHJpbmc7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlzb0RhdGVTdHJpbmcgKz0gKFwiLVwiICsgRGF0ZVRpbWUubnVtYmVyVG9Eb3VibGVEaWdpdHNTdHJpbmcoZGF0ZS5nZXREYXRlKCkpKTtcclxuICAgICAgICAgICAgaWYgKFwiZGF0ZVwiID09PSB0YXJnZXQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBpc29EYXRlU3RyaW5nO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpc29EYXRlU3RyaW5nICs9IChcIlRcIiArIERhdGVUaW1lLm51bWJlclRvRG91YmxlRGlnaXRzU3RyaW5nKGRhdGUuZ2V0SG91cnMoKSkpO1xyXG4gICAgICAgICAgICBpZiAoXCJob3VyXCIgPT09IHRhcmdldCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGlzb0RhdGVTdHJpbmc7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlzb0RhdGVTdHJpbmcgKz0gKFwiOlwiICsgRGF0ZVRpbWUubnVtYmVyVG9Eb3VibGVEaWdpdHNTdHJpbmcoZGF0ZS5nZXRNaW51dGVzKCkpKTtcclxuICAgICAgICAgICAgaWYgKFwibWluXCIgPT09IHRhcmdldCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGlzb0RhdGVTdHJpbmc7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlzb0RhdGVTdHJpbmcgKz0gKFwiOlwiICsgRGF0ZVRpbWUubnVtYmVyVG9Eb3VibGVEaWdpdHNTdHJpbmcoZGF0ZS5nZXRTZWNvbmRzKCkpKTtcclxuICAgICAgICAgICAgaWYgKFwic2VjXCIgPT09IHRhcmdldCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGlzb0RhdGVTdHJpbmc7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlzb0RhdGVTdHJpbmcgKz0gKFwiLlwiICsgU3RyaW5nKChkYXRlLmdldE1pbGxpc2Vjb25kcygpIC8gMTAwMCkudG9GaXhlZCgzKSkuc2xpY2UoMiwgNSkpO1xyXG4gICAgICAgICAgICByZXR1cm4gaXNvRGF0ZVN0cmluZztcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDb252ZXJ0IGZpbGUgc3lzdGVtIGNvbXBhdGlibGUgc3RyaW5nIHRvIGRhdGUgb2JqZWN0XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gZGF0ZSBzdHJpbmcgZXgpIHl5eXlfTU1fZGRUSEhfbW1fc3NfU1NTXHJcbiAgICAgICAgICogQHJldHVybiB7T2JqZWN0fSBkYXRlIG9iamVjdFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgY29udmVydEZpbGVTeXN0ZW1TdHJpbmdUb0RhdGUoZGF0ZVN0cmluZzogc3RyaW5nKTogRGF0ZSB7XHJcbiAgICAgICAgICAgIGxldCBkYXRlVGltZSA9IGRhdGVTdHJpbmcuc3BsaXQoXCJUXCIpLFxyXG4gICAgICAgICAgICAgICAgZGF0ZUFycmF5ID0gZGF0ZVRpbWVbMF0uc3BsaXQoXCJfXCIpLFxyXG4gICAgICAgICAgICAgICAgdGltZUFycmF5LFxyXG4gICAgICAgICAgICAgICAgZGF0ZU9iamVjdDtcclxuXHJcbiAgICAgICAgICAgIGlmIChkYXRlVGltZVsxXSkge1xyXG4gICAgICAgICAgICAgICAgdGltZUFycmF5ID0gZGF0ZVRpbWVbMV0uc3BsaXQoXCJfXCIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodGltZUFycmF5KSB7XHJcbiAgICAgICAgICAgICAgICBkYXRlT2JqZWN0ID0gbmV3IERhdGUoPGFueT5kYXRlQXJyYXlbMF0sIDxhbnk+ZGF0ZUFycmF5WzFdIC0gMSwgPGFueT5kYXRlQXJyYXlbMl0sXHJcbiAgICAgICAgICAgICAgICAgICAgPGFueT50aW1lQXJyYXlbMF0sIDxhbnk+dGltZUFycmF5WzFdLCA8YW55PnRpbWVBcnJheVsyXSwgPGFueT50aW1lQXJyYXlbM10pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGVBcnJheVsyXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVPYmplY3QgPSBuZXcgRGF0ZSg8YW55PmRhdGVBcnJheVswXSwgPGFueT5kYXRlQXJyYXlbMV0gLSAxLCA8YW55PmRhdGVBcnJheVsyXSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGRhdGVBcnJheVsxXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVPYmplY3QgPSBuZXcgRGF0ZSg8YW55PmRhdGVBcnJheVswXSwgPGFueT5kYXRlQXJyYXlbMV0gLSAxKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZU9iamVjdCA9IG5ldyBEYXRlKDxhbnk+ZGF0ZUFycmF5WzBdKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGRhdGVPYmplY3Q7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiAgQ29udmVydCBhIGRhdGUgb2JqZWN0IGludG8gYSBzdHJpbmcgaW4gZmlsZSBzeXN0ZW0gY29tcGF0aWJsZSBmb3JtYXQoeXl5eV9NTV9kZFRISF9tbV9zc19TU1MpXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gZGF0ZSAgIHtEYXRlfSAgIFtpbl0gZGF0ZSBvYmplY3RcclxuICAgICAgICAgKiBAcGFyYW0gdGFyZ2V0IHtTdHJpbmd9IFtpbl0ge3llYXIgfCBtb250aCB8IGRhdGUgfCBob3VyIHwgbWluIHwgc2VjIHwgbXNlYyB9XHJcbiAgICAgICAgICogQHJldHVybiB7U3RyaW5nfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgY29udmVydERhdGVUb0ZpbGVTeXN0ZW1TdHJpbmcoZGF0ZTogRGF0ZSwgdGFyZ2V0OiBzdHJpbmcgPSBcIm1zZWNcIik6IHN0cmluZyB7XHJcbiAgICAgICAgICAgIGxldCBmaWxlU3lzdGVtU3RyaW5nO1xyXG5cclxuICAgICAgICAgICAgc3dpdGNoICh0YXJnZXQpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJ5ZWFyXCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwibW9udGhcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJkYXRlXCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiaG91clwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSBcIm1pblwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSBcInNlY1wiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSBcIm1zZWNcIjpcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFRBRyArIFwidW5rbm93biB0YXJnZXQ6IFwiICsgdGFyZ2V0KTtcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXQgPSBcIm1zZWNcIjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZmlsZVN5c3RlbVN0cmluZyA9IGRhdGUuZ2V0RnVsbFllYXIoKTtcclxuICAgICAgICAgICAgaWYgKFwieWVhclwiID09PSB0YXJnZXQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmaWxlU3lzdGVtU3RyaW5nO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmaWxlU3lzdGVtU3RyaW5nICs9IChcIl9cIiArIERhdGVUaW1lLm51bWJlclRvRG91YmxlRGlnaXRzU3RyaW5nKGRhdGUuZ2V0TW9udGgoKSArIDEpKTtcclxuICAgICAgICAgICAgaWYgKFwibW9udGhcIiA9PT0gdGFyZ2V0KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmlsZVN5c3RlbVN0cmluZztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZmlsZVN5c3RlbVN0cmluZyArPSAoXCJfXCIgKyBEYXRlVGltZS5udW1iZXJUb0RvdWJsZURpZ2l0c1N0cmluZyhkYXRlLmdldERhdGUoKSkpO1xyXG4gICAgICAgICAgICBpZiAoXCJkYXRlXCIgPT09IHRhcmdldCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZpbGVTeXN0ZW1TdHJpbmc7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZpbGVTeXN0ZW1TdHJpbmcgKz0gKFwiVFwiICsgRGF0ZVRpbWUubnVtYmVyVG9Eb3VibGVEaWdpdHNTdHJpbmcoZGF0ZS5nZXRIb3VycygpKSk7XHJcbiAgICAgICAgICAgIGlmIChcImhvdXJcIiA9PT0gdGFyZ2V0KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmlsZVN5c3RlbVN0cmluZztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZmlsZVN5c3RlbVN0cmluZyArPSAoXCJfXCIgKyBEYXRlVGltZS5udW1iZXJUb0RvdWJsZURpZ2l0c1N0cmluZyhkYXRlLmdldE1pbnV0ZXMoKSkpO1xyXG4gICAgICAgICAgICBpZiAoXCJtaW5cIiA9PT0gdGFyZ2V0KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmlsZVN5c3RlbVN0cmluZztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZmlsZVN5c3RlbVN0cmluZyArPSAoXCJfXCIgKyBEYXRlVGltZS5udW1iZXJUb0RvdWJsZURpZ2l0c1N0cmluZyhkYXRlLmdldFNlY29uZHMoKSkpO1xyXG4gICAgICAgICAgICBpZiAoXCJzZWNcIiA9PT0gdGFyZ2V0KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmlsZVN5c3RlbVN0cmluZztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZmlsZVN5c3RlbVN0cmluZyArPSAoXCJfXCIgKyBTdHJpbmcoKGRhdGUuZ2V0TWlsbGlzZWNvbmRzKCkgLyAxMDAwKS50b0ZpeGVkKDMpKS5zbGljZSgyLCA1KSk7XHJcbiAgICAgICAgICAgIHJldHVybiBmaWxlU3lzdGVtU3RyaW5nO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBwcml2YXRlIHN0YXRpYyBtZXRob2RcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ29udmVydCBudW0gdG8gc3RyaW5nKGRvdWJsZSBkaWdpdHMpXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IG51bWJlciAoMCA8bnVtYmVyIDwgMTAwKVxyXG4gICAgICAgICAqIEByZXR1cm4ge1N0cmluZ30gZG91YmxlIGRpZ2l0cyBzdHJpbmdcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBudW1iZXJUb0RvdWJsZURpZ2l0c1N0cmluZyhudW06IG51bWJlcik6IHN0cmluZyB7XHJcbiAgICAgICAgICAgIGlmIChudW0gPCAwIHx8IG51bSA+IDEwMCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG51bSA8IDEwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCIwXCIgKyBudW07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIFwiXCIgKyBudW07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi8uLi8uLi9leHRlcm5hbC9pbmNsdWRlL2pxdWVyeS5kLnRzXCIgLz5cclxuXHJcbi8qanNoaW50IG11bHRpc3RyOiB0cnVlICovXHJcblxyXG5uYW1lc3BhY2UgQ0RQLlRvb2xzIHtcclxuXHJcbiAgICBjb25zdCBUQUcgPSBcIltDRFAuVG9vbHMuRnVuY3Rpb25zXSBcIjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIE1hdGguYWJzIOOCiOOCiuOCgumrmOmAn+OBqiBhYnNcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGFicyh4OiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB4ID49IDAgPyB4IDogLXg7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBNYXRoLm1heCDjgojjgorjgoLpq5jpgJ/jgaogbWF4XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBtYXgobGhzOiBudW1iZXIsIHJoczogbnVtYmVyKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gbGhzID49IHJocyA/IGxocyA6IHJocztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIE1hdGgubWluIOOCiOOCiuOCgumrmOmAn+OBqiBtaW5cclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIG1pbihsaHM6IG51bWJlciwgcmhzOiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiBsaHMgPD0gcmhzID8gbGhzIDogcmhzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogY29uZGl0aW9uKCkg44GMIHRydWUg44KS6L+U44GZ44G+44GnIGRlZmVycmVkXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBhd2FpdChjb25kaXRpb246ICgpID0+IGJvb2xlYW4sIG1zZWM6IG51bWJlciA9IDApOiBKUXVlcnlQcm9taXNlPGFueT4ge1xyXG4gICAgICAgIGxldCBkZjogSlF1ZXJ5RGVmZXJyZWQ8YW55PiA9ICQuRGVmZXJyZWQoKTtcclxuXHJcbiAgICAgICAgbGV0IHByb2MgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghY29uZGl0aW9uKCkpIHtcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQocHJvYywgbXNlYyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBkZi5yZXNvbHZlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgICAgIHNldFRpbWVvdXQocHJvYywgbXNlYyk7XHJcblxyXG4gICAgICAgIHJldHVybiBkZi5wcm9taXNlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmlbDlgKTjgpIgMCDoqbDjgoHjgZfjgabmloflrZfliJfjgpLnlJ/miJBcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIHRvWmVyb1BhZGRpbmcobm86IG51bWJlciwgbGltaXQ6IG51bWJlcik6IHN0cmluZyB7XHJcbiAgICAgICAgbGV0IHNpZ25lZCA9IFwiXCI7XHJcbiAgICAgICAgbm8gPSBOdW1iZXIobm8pO1xyXG5cclxuICAgICAgICBpZiAoaXNOYU4obm8pIHx8IGlzTmFOKGxpbWl0KSB8fCBsaW1pdCA8PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKG5vIDwgMCkge1xyXG4gICAgICAgICAgICBubyA9IFRvb2xzLmFicyhubyk7XHJcbiAgICAgICAgICAgIHNpZ25lZCA9IFwiLVwiO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHNpZ25lZCArIChBcnJheShsaW1pdCkuam9pbihcIjBcIikgKyBubykuc2xpY2UoLWxpbWl0KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWkmumHjee2meaJv+OBruOBn+OCgeOBruWun+ihjOaZgue2meaJv+mWouaVsFxyXG4gICAgICpcclxuICAgICAqIFN1YiBDbGFzcyDlgJnoo5zjgqrjg5bjgrjjgqfjgq/jg4jjgavlr77jgZfjgaYgU3VwZXIgQ2xhc3Mg5YCZ6KOc44Kq44OW44K444Kn44Kv44OI44KS55u05YmN44GuIFN1cGVyIENsYXNzIOOBqOOBl+OBpuaMv+WFpeOBmeOCi+OAglxyXG4gICAgICogcHJvdG90eXBlIOOBruOBv+OCs+ODlOODvOOBmeOCi+OAglxyXG4gICAgICog44Kk44Oz44K544K/44Oz44K544Oh44Oz44OQ44KS44Kz44OU44O844GX44Gf44GE5aC05ZCI44CBU3VwZXIgQ2xhc3Mg44GM55aR5Ly844Kz44Oz44K544OI44Op44Kv44K/44KS5o+Q5L6b44GZ44KL5b+F6KaB44GM44GC44KL44CCXHJcbiAgICAgKiDoqbPntLDjga8gY2RwLnRvb2xzLkZ1bmN0aW9ucy5zcGVjLnRzIOOCkuWPgueFp+OAglxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBzdWJDbGFzcyAgIHtjb25zdHJ1Y3Rvcn0gW2luXSDjgqrjg5bjgrjjgqfjgq/jg4jjga4gY29uc3RydWN0b3Ig44KS5oyH5a6aXHJcbiAgICAgKiBAcGFyYW0gc3VwZXJDbGFzcyB7Y29uc3RydWN0b3J9IFtpbl0g44Kq44OW44K444Kn44Kv44OI44GuIGNvbnN0cnVjdG9yIOOCkuaMh+WumlxyXG4gICAgICovXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gaW5oZXJpdChzdWJDbGFzczogYW55LCBzdXBlckNsYXNzOiBhbnkpOiB2b2lkIHtcclxuICAgICAgICBsZXQgX3Byb3RvdHlwZSA9IHN1YkNsYXNzLnByb3RvdHlwZTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gX2luaGVyaXQoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29uc3RydWN0b3IgPSBzdWJDbGFzcztcclxuICAgICAgICB9XHJcbiAgICAgICAgX2luaGVyaXQucHJvdG90eXBlID0gc3VwZXJDbGFzcy5wcm90b3R5cGU7XHJcbiAgICAgICAgc3ViQ2xhc3MucHJvdG90eXBlID0gbmV3IF9pbmhlcml0KCk7XHJcblxyXG4gICAgICAgICQuZXh0ZW5kKHN1YkNsYXNzLnByb3RvdHlwZSwgX3Byb3RvdHlwZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBtaXhpbiDplqLmlbBcclxuICAgICAqXHJcbiAgICAgKiBUeXBlU2NyaXB0IE9mZmljaWFsIFNpdGUg44Gr6LyJ44Gj44Gm44GE44KLIG1peGluIOmWouaVsFxyXG4gICAgICogaHR0cDovL3d3dy50eXBlc2NyaXB0bGFuZy5vcmcvSGFuZGJvb2sjbWl4aW5zXHJcbiAgICAgKiDml6LjgavlrprnvqnjgZXjgozjgabjgYTjgovjgqrjg5bjgrjjgqfjgq/jg4jjgYvjgonjgIHmlrDopo/jgavjgqrjg5bjgrjjgqfjgq/jg4jjgpLlkIjmiJDjgZnjgovjgIJcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gZGVyaXZlZCB7Y29uc3RydWN0b3J9ICAgIFtpbl0g5ZCI5oiQ44GV44KM44KL44Kq44OW44K444Kn44Kv44OI44GuIGNvbnN0cnVjdG9yIOOCkuaMh+WumlxyXG4gICAgICogQHBhcmFtIGJhc2VzICAge2NvbnN0cnVjdG9yLi4ufSBbaW5dIOWQiOaIkOWFg+OCquODluOCuOOCp+OCr+ODiOOBriBjb25zdHJ1Y3RvciDjgpLmjIflrpogKOWPr+WkieW8leaVsClcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIG1peGluKGRlcml2ZWQ6IGFueSwgLi4uYmFzZXM6IGFueVtdKTogdm9pZCB7XHJcbiAgICAgICAgYmFzZXMuZm9yRWFjaCgoYmFzZSkgPT4ge1xyXG4gICAgICAgICAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhiYXNlLnByb3RvdHlwZSkuZm9yRWFjaChuYW1lID0+IHtcclxuICAgICAgICAgICAgICAgIGRlcml2ZWQucHJvdG90eXBlW25hbWVdID0gYmFzZS5wcm90b3R5cGVbbmFtZV07XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICogSGVscGVyIGZ1bmN0aW9uIHRvIGNvcnJlY3RseSBzZXQgdXAgdGhlIHByb3RvdHlwZSBjaGFpbiwgZm9yIHN1YmNsYXNzZXMuXHJcbiAgICAgKiBUaGUgZnVuY3Rpb24gYmVoYXZpb3IgaXMgc2FtZSBhcyBleHRlbmQoKSBmdW5jdGlvbiBvZiBCYWNrYm9uZS5qcy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gcHJvdG9Qcm9wcyAge09iamVjdH0gW2luXSBzZXQgcHJvdG90eXBlIHByb3BlcnRpZXMgYXMgb2JqZWN0LlxyXG4gICAgICogQHBhcmFtIHN0YXRpY1Byb3BzIHtPYmplY3R9IFtpbl0gc2V0IHN0YXRpYyBwcm9wZXJ0aWVzIGFzIG9iamVjdC5cclxuICAgICAqIEByZXR1cm4ge09iamVjdH0gc3ViY2xhc3MgY29uc3RydWN0b3IuXHJcbiAgICAgKlxyXG4gICAgICogXFx+amFwYW5lc2VcclxuICAgICAqIOOCr+ODqeOCuee2meaJv+OBruOBn+OCgeOBruODmOODq+ODkeODvOmWouaVsFxyXG4gICAgICogQmFja2JvbmUuanMgZXh0ZW5kKCkg6Zai5pWw44Go5ZCM562JXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHByb3RvUHJvcHMgIHtPYmplY3R9IFtpbl0gcHJvdG90eXBlIHByb3BlcnRpZXMg44KS44Kq44OW44K444Kn44Kv44OI44Gn5oyH5a6aXHJcbiAgICAgKiBAcGFyYW0gc3RhdGljUHJvcHMge09iamVjdH0gW2luXSBzdGF0aWMgcHJvcGVydGllcyDjgpLjgqrjg5bjgrjjgqfjgq/jg4jjgafmjIflrppcclxuICAgICAqIEByZXR1cm4ge09iamVjdH0g44K144OW44Kv44Op44K544Gu44Kz44Oz44K544OI44Op44Kv44K/XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBleHRlbmQocHJvdG9Qcm9wczogT2JqZWN0LCBzdGF0aWNQcm9wcz86IE9iamVjdCk6IE9iamVjdCB7XHJcbiAgICAgICAgbGV0IHBhcmVudCA9IHRoaXM7XHJcbiAgICAgICAgbGV0IGNoaWxkO1xyXG5cclxuICAgICAgICBpZiAocHJvdG9Qcm9wcyAmJiBwcm90b1Byb3BzLmhhc093blByb3BlcnR5KFwiY29uc3RydWN0b3JcIikpIHtcclxuICAgICAgICAgICAgY2hpbGQgPSBwcm90b1Byb3BzLmNvbnN0cnVjdG9yO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNoaWxkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcmVudC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJC5leHRlbmQoY2hpbGQsIHBhcmVudCwgc3RhdGljUHJvcHMpO1xyXG5cclxuICAgICAgICBsZXQgU3Vycm9nYXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBTdXJyb2dhdGUucHJvdG90eXBlID0gcGFyZW50LnByb3RvdHlwZTtcclxuICAgICAgICBjaGlsZC5wcm90b3R5cGUgPSBuZXcgU3Vycm9nYXRlO1xyXG5cclxuICAgICAgICBpZiAocHJvdG9Qcm9wcykge1xyXG4gICAgICAgICAgICAkLmV4dGVuZChjaGlsZC5wcm90b3R5cGUsIHByb3RvUHJvcHMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGNoaWxkO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRFBJIOWPluW+l1xyXG4gICAgICovXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gZ2V0RGV2aWNlUGl4Y2VsUmF0aW8oKTogbnVtYmVyIHtcclxuICAgICAgICBsZXQgbWVkaWFRdWVyeTtcclxuICAgICAgICBsZXQgaXNfZmlyZWZveCA9IG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5pbmRleE9mKFwiZmlyZWZveFwiKSA+IC0xO1xyXG4gICAgICAgIGlmIChudWxsICE9IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvICYmICFpc19maXJlZm94KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbztcclxuICAgICAgICB9IGVsc2UgaWYgKHdpbmRvdy5tYXRjaE1lZGlhKSB7XHJcbiAgICAgICAgICAgIG1lZGlhUXVlcnkgPVxyXG4gICAgICAgICAgICAgICAgXCIoLXdlYmtpdC1taW4tZGV2aWNlLXBpeGVsLXJhdGlvOiAxLjUpLFxcXHJcbiAgICAgICAgICAgICAgICAgICAgKG1pbi0tbW96LWRldmljZS1waXhlbC1yYXRpbzogMS41KSxcXFxyXG4gICAgICAgICAgICAgICAgICAgICgtby1taW4tZGV2aWNlLXBpeGVsLXJhdGlvOiAzLzIpLFxcXHJcbiAgICAgICAgICAgICAgICAgICAgKG1pbi1yZXNvbHV0aW9uOiAxLjVkcHB4KVwiO1xyXG4gICAgICAgICAgICBpZiAod2luZG93Lm1hdGNoTWVkaWEobWVkaWFRdWVyeSkubWF0Y2hlcykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDEuNTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBtZWRpYVF1ZXJ5ID1cclxuICAgICAgICAgICAgICAgIFwiKC13ZWJraXQtbWluLWRldmljZS1waXhlbC1yYXRpbzogMiksXFxcclxuICAgICAgICAgICAgICAgICAgICAobWluLS1tb3otZGV2aWNlLXBpeGVsLXJhdGlvOiAyKSxcXFxyXG4gICAgICAgICAgICAgICAgICAgICgtby1taW4tZGV2aWNlLXBpeGVsLXJhdGlvOiAyLzEpLFxcXHJcbiAgICAgICAgICAgICAgICAgICAgKG1pbi1yZXNvbHV0aW9uOiAyZHBweClcIjtcclxuICAgICAgICAgICAgaWYgKHdpbmRvdy5tYXRjaE1lZGlhKG1lZGlhUXVlcnkpLm1hdGNoZXMpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG1lZGlhUXVlcnkgPVxyXG4gICAgICAgICAgICAgICAgXCIoLXdlYmtpdC1taW4tZGV2aWNlLXBpeGVsLXJhdGlvOiAwLjc1KSxcXFxyXG4gICAgICAgICAgICAgICAgICAgIChtaW4tLW1vei1kZXZpY2UtcGl4ZWwtcmF0aW86IDAuNzUpLFxcXHJcbiAgICAgICAgICAgICAgICAgICAgKC1vLW1pbi1kZXZpY2UtcGl4ZWwtcmF0aW86IDMvNCksXFxcclxuICAgICAgICAgICAgICAgICAgICAobWluLXJlc29sdXRpb246IDAuNzVkcHB4KVwiO1xyXG4gICAgICAgICAgICBpZiAod2luZG93Lm1hdGNoTWVkaWEobWVkaWFRdWVyeSkubWF0Y2hlcykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDAuNztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFdlYiBXb3JrZXIg6LW35YuV44Om44O844OG44Kj44Oq44OG44KjXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBkb1dvcmsod29ya2VyOiBXb3JrZXIsIG1zZzogYW55KTogSlF1ZXJ5UHJvbWlzZTxhbnk+O1xyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGRvV29yayh3b3JrZXI6IHN0cmluZywgbXNnOiBhbnkpOiBKUXVlcnlQcm9taXNlPGFueT47XHJcbiAgICBleHBvcnQgZnVuY3Rpb24gZG9Xb3JrKHdvcmtlcjogYW55LCBtc2c6IGFueSk6IEpRdWVyeVByb21pc2U8YW55PiB7XHJcbiAgICAgICAgbGV0IGRmOiBKUXVlcnlEZWZlcnJlZDxhbnk+ID0gJC5EZWZlcnJlZCgpO1xyXG5cclxuICAgICAgICBpZiAoIXdvcmtlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gZGYucmVqZWN0KFwibnVsbCBhcmd1bWVudFwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCB3azogV29ya2VyO1xyXG4gICAgICAgIHN3aXRjaCAodHlwZW9mIHdvcmtlcikge1xyXG4gICAgICAgICAgICBjYXNlIFwib2JqZWN0XCI6XHJcbiAgICAgICAgICAgICAgICB3ayA9IHdvcmtlcjtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwic3RyaW5nXCI6XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIHdrID0gbmV3IFdvcmtlcih3b3JrZXIpO1xyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXgpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFRBRyArIGV4KTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGYucmVqZWN0KGV4KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRmLnJlamVjdChcImludmFsaWQgdHlwZSBhcmd1bWVudFwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHdrLm9uZXJyb3IgPSAoZXJyb3I6IEVycm9yRXZlbnQpID0+IGRmLnJlamVjdChlcnJvcik7XHJcbiAgICAgICAgd2sub25tZXNzYWdlID0gKGV2ZW50OiBNZXNzYWdlRXZlbnQpID0+IGRmLnJlc29sdmUoZXZlbnQuZGF0YSk7XHJcbiAgICAgICAgd2sucG9zdE1lc3NhZ2UobXNnKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGRmLnByb21pc2UoKTtcclxuICAgIH1cclxufVxyXG4iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vLi4vLi4vZXh0ZXJuYWwvaW5jbHVkZS91bmRlcnNjb3JlLmQudHNcIiAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiVXRpbHMudHNcIiAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiX2Rldi5kZXBlbmRlbmNpZXMuZC50c1wiIC8+XHJcblxyXG5uYW1lc3BhY2UgQ0RQLlRvb2xzIHtcclxuXHJcbiAgICBjb25zdCBUQUcgPSBcIltDRFAuVG9vbHMuVGVtcGxhdGVdIFwiO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGludGVyZmFjZSBKU1RcclxuICAgICAqIEBicmllZiDjgrPjg7Pjg5HjgqTjg6vmuIjjgb8g44OG44Oz44OX44Os44O844OI5qC857SN44Kk44Oz44K/44O844OV44Kn44Kk44K5XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSlNUIHtcclxuICAgICAgICAoZGF0YT86IGFueSk6IHN0cmluZztcclxuICAgIH1cclxuXHJcbiAgICAvL19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18vL1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGNsYXNzIFRlbXBsYXRlXHJcbiAgICAgKiBAYnJpZWYgdGVtcGxhdGUgc2NyaXB0IOOCkueuoeeQhuOBmeOCi+ODpuODvOODhuOCo+ODquODhuOCo+OCr+ODqeOCuVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgY2xhc3MgVGVtcGxhdGUge1xyXG5cclxuICAgICAgICBzdGF0aWMgX21hcEVsZW1lbnQ6IGFueTsgICAgLy8hPCDjgq3jg7zjgaggSlF1ZXJ5IEVsZW1lbnQg44GuIE1hcCDjgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAgICBzdGF0aWMgX21hcFNvdXJjZTogYW55OyAgICAgLy8hPCBVUkwg44GoIOOCveODvOOCueODleOCoeOCpOODqyhIVE1MKSDjga4gTWFwIOOCquODluOCuOOCp+OCr+ODiFxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIOWFrOmWi+ODoeOCveODg+ODiVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDmjIflrprjgZfjgZ8gaWQsIGNsYXNzIOWQjSwgVGFnIOWQjeOCkuOCreODvOOBq+ODhuODs+ODl+ODrOODvOODiOOBriBKUXVlcnkgRWxlbWVudCDjgpLlj5blvpfjgZnjgovjgIJcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSAga2V5ICAgICBbaW5dIGlkLCBjbGFzcywgdGFnIOOCkuihqOOBmeaWh+Wtl+WIl1xyXG4gICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSAgW3NyY10gICBbaW5dIOWklumDqCBodG1sIOOCkuaMh+WumuOBmeOCi+WgtOWQiOOBryB1cmwg44KS6Kit5a6aXHJcbiAgICAgICAgICogQHBhcmFtIHtCb29sZWFufSBbY2FjaGVdIFtpbl0gc3JjIGh0bWwg44KS44Kt44Oj44OD44K344Ol44GZ44KL5aC05ZCI44GvIHRydWUuIHNyYyDjgYzmjIflrprjgZXjgozjgabjgYTjgovjgajjgY3jga7jgb/mnInlirlcclxuICAgICAgICAgKiBAcmV0dXJuIHRlbXBsYXRlIOOBjOagvOe0jeOBleOCjOOBpuOBhOOCiyBKUXVlcnkgRWxlbWVudFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHN0YXRpYyBnZXRUZW1wbGF0ZUVsZW1lbnQoa2V5OiBzdHJpbmcsIHNyYzogc3RyaW5nID0gbnVsbCwgY2FjaGU6IGJvb2xlYW4gPSB0cnVlKTogSlF1ZXJ5IHtcclxuICAgICAgICAgICAgbGV0IG1hcEVsZW1lbnQgPSBUZW1wbGF0ZS5nZXRFbGVtZW50TWFwKCk7XHJcbiAgICAgICAgICAgIGxldCAkZWxlbWVudCA9IG1hcEVsZW1lbnRba2V5XTtcclxuXHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoISRlbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNyYykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgaHRtbCA9IFRlbXBsYXRlLmZpbmRIdG1sRnJvbVNvdXJjZShzcmMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkZWxlbWVudCA9ICQoaHRtbCkuZmluZChrZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRlbGVtZW50ID0gJChrZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvLyDopoHntKDjga7mpJzoqLxcclxuICAgICAgICAgICAgICAgICAgICBpZiAoJGVsZW1lbnQgPD0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyAoXCJpbnZhbGlkIFtrZXksIHNyY10gPSBbXCIgKyBrZXkgKyBcIiwgXCIgKyBzcmMgKyBcIl1cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzcmMgJiYgY2FjaGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFwRWxlbWVudFtrZXldID0gJGVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGNhdGNoIChleGNlcHRpb24pIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoVEFHICsgZXhjZXB0aW9uKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gJGVsZW1lbnQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBNYXAg44Kq44OW44K444Kn44Kv44OI44Gu5YmK6ZmkXHJcbiAgICAgICAgICog5piO56S655qE44Gr44Kt44Oj44OD44K344Ol44KS6ZaL5pS+44GZ44KL5aC05ZCI44Gv5pys44Oh44K944OD44OJ44KS44Kz44O844Or44GZ44KLXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgc3RhdGljIGVtcHR5KCk6IHZvaWQge1xyXG4gICAgICAgICAgICBUZW1wbGF0ZS5fbWFwRWxlbWVudCA9IG51bGw7XHJcbiAgICAgICAgICAgIFRlbXBsYXRlLl9tYXBTb3VyY2UgPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog5oyH5a6a44GX44GfIGlkLCBjbGFzcyDlkI0sIFRhZyDlkI3jgpLjgq3jg7zjgasgSlNUIOOCkuWPluW+l+OBmeOCi+OAglxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtTdHJpbmcgfCBqUXVlcnl9IGtleSAgICAgW2luXSBpZCwgY2xhc3MsIHRhZyDjgpLooajjgZnmloflrZfliJcg44G+44Gf44GvIOODhuODs+ODl+ODrOODvOODiOaWh+Wtl+WIlywg44G+44Gf44GvIGpRdWVyeSDjgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gICAgICAgICAgW3NyY10gICBbaW5dIOWklumDqCBodG1sIOOCkuaMh+WumuOBmeOCi+WgtOWQiOOBryB1cmwg44KS6Kit5a6aXHJcbiAgICAgICAgICogQHBhcmFtIHtCb29sZWFufSAgICAgICAgIFtjYWNoZV0gW2luXSBzcmMgaHRtbCDjgpLjgq3jg6Pjg4Pjgrfjg6XjgZnjgovloLTlkIjjga8gdHJ1ZS4gc3JjIOOBjOaMh+WumuOBleOCjOOBpuOBhOOCi+OBqOOBjeOBruOBv+acieWKuVxyXG4gICAgICAgICAqIEByZXR1cm4g44Kz44Oz44OR44Kk44Or44GV44KM44GfIEpTVCDjgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAgICAgKi9cclxuICAgICAgICBzdGF0aWMgZ2V0SlNUKGtleTogSlF1ZXJ5KTogSlNUO1xyXG4gICAgICAgIHN0YXRpYyBnZXRKU1Qoa2V5OiBzdHJpbmcsIHNyYz86IHN0cmluZywgY2FjaGU/OiBib29sZWFuKTogSlNUO1xyXG4gICAgICAgIHN0YXRpYyBnZXRKU1Qoa2V5OiBhbnksIHNyYz86IHN0cmluZywgY2FjaGU/OiBib29sZWFuKTogSlNUIHtcclxuICAgICAgICAgICAgbGV0IHRlbXBsYXRlOiBhbnkgPSBudWxsO1xyXG4gICAgICAgICAgICBsZXQganN0OiBKU1Q7XHJcbiAgICAgICAgICAgIGxldCAkZWxlbWVudDogSlF1ZXJ5O1xyXG4gICAgICAgICAgICBpZiAoa2V5IGluc3RhbmNlb2YgalF1ZXJ5KSB7XHJcbiAgICAgICAgICAgICAgICAkZWxlbWVudCA9IGtleTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICRlbGVtZW50ID0gdGhpcy5nZXRUZW1wbGF0ZUVsZW1lbnQoa2V5LCBzcmMsIGNhY2hlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAobnVsbCAhPSBnbG9iYWwuSG9nYW4pIHtcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlID0gSG9nYW4uY29tcGlsZSgkZWxlbWVudC50ZXh0KCkpO1xyXG4gICAgICAgICAgICAgICAganN0ID0gZnVuY3Rpb24gKGRhdGE/OiBhbnkpOiBzdHJpbmcge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wbGF0ZS5yZW5kZXIoZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGUgPSBfLnRlbXBsYXRlKCRlbGVtZW50Lmh0bWwoKSk7XHJcbiAgICAgICAgICAgICAgICBqc3QgPSBmdW5jdGlvbiAoZGF0YT86IGFueSk6IHN0cmluZyB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g5pS56KGM44Go44K/44OW44Gv5YmK6Zmk44GZ44KLXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXBsYXRlKGRhdGEpLnJlcGxhY2UoL1xcbnxcXHQvZywgXCJcIik7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBqc3Q7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIOWGhemDqOODoeOCveODg+ODiVxyXG5cclxuICAgICAgICAvLyEgRWxlbWVudCBNYXAg44Kq44OW44K444Kn44Kv44OI44Gu5Y+W5b6XXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgZ2V0RWxlbWVudE1hcCgpOiBhbnkge1xyXG4gICAgICAgICAgICBpZiAoIVRlbXBsYXRlLl9tYXBFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICBUZW1wbGF0ZS5fbWFwRWxlbWVudCA9IHt9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBUZW1wbGF0ZS5fbWFwRWxlbWVudDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISBVUkwgTWFwIOOCquODluOCuOOCp+OCr+ODiOOBruWPluW+l1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGdldFNvdXJjZU1hcCgpOiBhbnkge1xyXG4gICAgICAgICAgICBpZiAoIVRlbXBsYXRlLl9tYXBTb3VyY2UpIHtcclxuICAgICAgICAgICAgICAgIFRlbXBsYXRlLl9tYXBTb3VyY2UgPSB7fTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gVGVtcGxhdGUuX21hcFNvdXJjZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISBVUkwgTWFwIOOBi+OCiSBIVE1MIOOCkuaknOe0oi4g5aSx5pWX44GX44Gf5aC05ZCI44GvIHVuZGVmaW5lZCDjgYzov5TjgotcclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBmaW5kSHRtbEZyb21Tb3VyY2Uoc3JjOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgICAgICAgICBsZXQgbWFwU291cmNlID0gVGVtcGxhdGUuZ2V0U291cmNlTWFwKCk7XHJcbiAgICAgICAgICAgIGxldCBodG1sID0gbWFwU291cmNlW3NyY107XHJcblxyXG4gICAgICAgICAgICBpZiAoIWh0bWwpIHtcclxuICAgICAgICAgICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgICAgICAgICAgdXJsOiBzcmMsXHJcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGFzeW5jOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogXCJodG1sXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogKGRhdGE6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBodG1sID0gZGF0YTtcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiAoZGF0YTogYW55LCBzdGF0dXM6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyAoXCJhamF4IHJlcXVlc3QgZmFpbGVkLiBzdGF0dXM6IFwiICsgc3RhdHVzKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIC8vIOOCreODo+ODg+OCt+ODpeOBq+agvOe0jVxyXG4gICAgICAgICAgICAgICAgbWFwU291cmNlW3NyY10gPSBodG1sO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBodG1sO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJuYW1lc3BhY2UgQ0RQLlVJIHtcclxuICAgIC8qKlxyXG4gICAgICogQGNsYXNzIExpc3RWaWV3R2xvYmFsQ29uZmlnXHJcbiAgICAgKiBAYnJpZWYgY2RwLnVpLmxpc3R2aWV3IOOBriBnbG9iYWwgY29uZmluZ1xyXG4gICAgICovXHJcbiAgICBleHBvcnQgbW9kdWxlIExpc3RWaWV3R2xvYmFsQ29uZmlnIHtcclxuICAgICAgICBleHBvcnQgbGV0IFdSQVBQRVJfQ0xBU1MgPSBcImxpc3R2aWV3LXdyYXBwZXJcIjtcclxuICAgICAgICBleHBvcnQgbGV0IFdSQVBQRVJfU0VMRUNUT1IgPSBcIi5cIiArIFdSQVBQRVJfQ0xBU1M7XHJcbiAgICAgICAgZXhwb3J0IGxldCBTQ1JPTExfTUFQX0NMQVNTID0gXCJsaXN0dmlldy1zY3JvbGwtbWFwXCI7XHJcbiAgICAgICAgZXhwb3J0IGxldCBTQ1JPTExfTUFQX1NFTEVDVE9SID0gXCIuXCIgKyBTQ1JPTExfTUFQX0NMQVNTO1xyXG4gICAgICAgIGV4cG9ydCBsZXQgSU5BQ1RJVkVfQ0xBU1MgPSBcImluYWN0aXZlXCI7XHJcbiAgICAgICAgZXhwb3J0IGxldCBJTkFDVElWRV9DTEFTU19TRUxFQ1RPUiA9IFwiLlwiICsgSU5BQ1RJVkVfQ0xBU1M7XHJcbiAgICAgICAgZXhwb3J0IGxldCBSRUNZQ0xFX0NMQVNTID0gXCJsaXN0dmlldy1yZWN5Y2xlXCI7XHJcbiAgICAgICAgZXhwb3J0IGxldCBSRUNZQ0xFX0NMQVNTX1NFTEVDVE9SID0gXCIuXCIgKyBSRUNZQ0xFX0NMQVNTO1xyXG4gICAgICAgIGV4cG9ydCBsZXQgTElTVElURU1fQkFTRV9DTEFTUyA9IFwibGlzdHZpZXctaXRlbS1iYXNlXCI7XHJcbiAgICAgICAgZXhwb3J0IGxldCBMSVNUSVRFTV9CQVNFX0NMQVNTX1NFTEVDVE9SID0gXCIuXCIgKyBMSVNUSVRFTV9CQVNFX0NMQVNTO1xyXG4gICAgICAgIGV4cG9ydCBsZXQgREFUQV9QQUdFX0lOREVYID0gXCJkYXRhLXBhZ2UtaW5kZXhcIjtcclxuICAgICAgICBleHBvcnQgbGV0IERBVEFfQ09OVEFJTkVSX0lOREVYID0gXCJkYXRhLWNvbnRhaW5lci1pbmRleFwiO1xyXG4gICAgfVxyXG59XHJcbiIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJfZGV2LmRlcGVuZGVuY2llcy5kLnRzXCIgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIkNvbmZpZy50c1wiIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJVdGlscy50c1wiIC8+XHJcblxyXG5uYW1lc3BhY2UgQ0RQLlVJIHtcclxuXHJcbiAgICBpbXBvcnQgX0NvbmZpZyA9IENEUC5VSS5MaXN0Vmlld0dsb2JhbENvbmZpZztcclxuICAgIGltcG9ydCBfVG9vbENTUyA9IENEUC5VSS5fTGlzdFZpZXdVdGlscztcclxuXHJcbiAgICBjb25zdCBUQUcgPSBcIltDRFAuVUkuTGluZVByb2ZpbGVdIFwiO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGNsYXNzIExpbmVQcm9maWxlXHJcbiAgICAgKiBAYnJpZWYgMSDjg6njgqTjg7PjgavplqLjgZnjgovjg5fjg63jg5XjgqHjgqTjg6vjgq/jg6njgrlcclxuICAgICAqICAgICAgICBmcmFtZXdvcmsg44GM5L2/55So44GZ44KLXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBjbGFzcyBMaW5lUHJvZmlsZSB7XHJcbiAgICAgICAgcHJpdmF0ZSBfaW5kZXg6IG51bWJlciA9IG51bGw7ICAgICAgICAgICAgICAvLyE8IGdsb2JhbCBpbmRleFxyXG4gICAgICAgIHByaXZhdGUgX3BhZ2VJbmRleDogbnVtYmVyID0gbnVsbDsgICAgICAgICAgLy8hPCDmiYDlsZ7jgZnjgosgcGFnZSBpbmRleFxyXG4gICAgICAgIHByaXZhdGUgX29mZnNldDogbnVtYmVyID0gbnVsbDsgICAgICAgICAgICAgLy8hPCBnbG9iYWwgb2Zmc2V0XHJcbiAgICAgICAgcHJpdmF0ZSBfJGJhc2U6IEpRdWVyeSA9IG51bGw7ICAgICAgICAgICAgICAvLyE8IOWcn+WPsOOBqOOBquOCiyBET00g44Kk44Oz44K544K/44Oz44K544KS5qC857SNXHJcbiAgICAgICAgcHJpdmF0ZSBfaW5zdGFuY2U6IEJhc2VMaXN0SXRlbVZpZXcgPSBudWxsOyAvLyE8IExpc3RJdGVtVmlldyDjgqTjg7Pjgrnjgr/jg7PjgrnjgpLmoLzntI1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogY29uc3RydWN0b3JcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBfb3duZXIgICAgICAge0lMaXN0Vmlld0ZyYW1ld29ya30gW2luXSDnrqHnkIbogIXjgafjgYLjgosgSUxpc3RWaWV3RnJhbWV3b3JrIOOCpOODs+OCueOCv+ODs+OCuVxyXG4gICAgICAgICAqIEBwYXJhbSBfaGVpZ2h0ICAgICAge051bWJlcn0gICAgICAgICAgICAgW2luXSDliJ3mnJ/jga7pq5jjgZVcclxuICAgICAgICAgKiBAcGFyYW0gX2luaXRpYWxpemVyIHtGdW5jdGlvbn0gICAgICAgICAgIFtpbl0gTGlzdEl0ZW1WaWV3IOa0vueUn+OCr+ODqeOCueOBruOCs+ODs+OCueODiOODqeOCr+OCv1xyXG4gICAgICAgICAqIEBwYXJhbSBfaW5mbyAgICAgICAge09iamVjdH0gICAgICAgICAgICAgW2luXSBMaXN0SXRlbVZpZXcg44Kz44Oz44K544OI44Op44Kv44K/44Gr5rih44GV44KM44KL44Kq44OX44K344On44OzXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgICAgIHByaXZhdGUgX293bmVyOiBJTGlzdFZpZXdGcmFtZXdvcmssXHJcbiAgICAgICAgICAgIHByaXZhdGUgX2hlaWdodDogbnVtYmVyLFxyXG4gICAgICAgICAgICBwcml2YXRlIF9pbml0aWFsaXplcjogbmV3IChvcHRpb25zPzogYW55KSA9PiBCYXNlTGlzdEl0ZW1WaWV3LFxyXG4gICAgICAgICAgICBwcml2YXRlIF9pbmZvOiBhbnkpIHtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gcHVibGljIG1ldGhvZHNcclxuXHJcbiAgICAgICAgLy8hIOacieWKueWMllxyXG4gICAgICAgIHB1YmxpYyBhY3RpdmF0ZSgpOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKG51bGwgPT0gdGhpcy5faW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgICAgIGxldCBvcHRpb25zO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fJGJhc2UgPSB0aGlzLnByZXBhcmVCYXNlRWxlbWVudCgpO1xyXG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCB7XHJcbiAgICAgICAgICAgICAgICAgICAgZWw6IHRoaXMuXyRiYXNlLFxyXG4gICAgICAgICAgICAgICAgICAgIG93bmVyOiB0aGlzLl9vd25lcixcclxuICAgICAgICAgICAgICAgICAgICBsaW5lUHJvZmlsZTogdGhpcyxcclxuICAgICAgICAgICAgICAgIH0sIHRoaXMuX2luZm8pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5faW5zdGFuY2UgPSBuZXcgdGhpcy5faW5pdGlhbGl6ZXIob3B0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoXCJub25lXCIgPT09IHRoaXMuXyRiYXNlLmNzcyhcImRpc3BsYXlcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl8kYmFzZS5jc3MoXCJkaXNwbGF5XCIsIFwiYmxvY2tcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy51cGRhdGVQYWdlSW5kZXgodGhpcy5fJGJhc2UpO1xyXG4gICAgICAgICAgICBpZiAoXCJ2aXNpYmxlXCIgIT09IHRoaXMuXyRiYXNlLmNzcyhcInZpc2liaWxpdHlcIikpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuXyRiYXNlLmNzcyhcInZpc2liaWxpdHlcIiwgXCJ2aXNpYmxlXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg5LiN5Y+v6KaW5YyWXHJcbiAgICAgICAgcHVibGljIGhpZGUoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmIChudWxsID09IHRoaXMuX2luc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2YXRlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKFwiaGlkZGVuXCIgIT09IHRoaXMuXyRiYXNlLmNzcyhcInZpc2liaWxpdHlcIikpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuXyRiYXNlLmNzcyhcInZpc2liaWxpdHlcIiwgXCJoaWRkZW5cIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDnhKHlirnljJZcclxuICAgICAgICBwdWJsaWMgaW5hY3RpdmF0ZSgpOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKG51bGwgIT0gdGhpcy5faW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgICAgIC8vIHhwZXJpYSBBWCBKZWxseSBCZWFuICg0LjEuMinjgavjgabjgIEgaGlkZGVuIGVsZW1lbnQg44Gu5YmK6Zmk44Gn44Oh44Oi44Oq44O844Oq44O844Kv44GZ44KL44Gf44KB5Y+v6KaW5YyW44GZ44KL44CCXHJcbiAgICAgICAgICAgICAgICBpZiAoXCJ2aXNpYmxlXCIgIT09IHRoaXMuXyRiYXNlLmNzcyhcInZpc2liaWxpdHlcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl8kYmFzZS5jc3MoXCJ2aXNpYmlsaXR5XCIsIFwidmlzaWJsZVwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuX2luc3RhbmNlLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5faW5zdGFuY2UgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fJGJhc2UuYWRkQ2xhc3MoX0NvbmZpZy5SRUNZQ0xFX0NMQVNTKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuXyRiYXNlLmNzcyhcImRpc3BsYXlcIiwgXCJub25lXCIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fJGJhc2UgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg5pu05pawXHJcbiAgICAgICAgcHVibGljIHJlZnJlc2goKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmIChudWxsICE9IHRoaXMuX2luc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9pbnN0YW5jZS5yZW5kZXIoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOacieWKueeEoeWKueWIpOWumlxyXG4gICAgICAgIHB1YmxpYyBpc0FjdGl2ZSgpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGwgIT0gdGhpcy5faW5zdGFuY2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg6auY44GV5oOF5aCx44Gu5pu05pawLiBMaXN0SXRlbVZpZXcg44GL44KJ44Kz44O844Or44GV44KM44KL44CCXHJcbiAgICAgICAgcHVibGljIHVwZGF0ZUhlaWdodChuZXdIZWlnaHQ6IG51bWJlciwgb3B0aW9ucz86IFVwZGF0ZUhlaWdodE9wdGlvbnMpOiB2b2lkIHtcclxuICAgICAgICAgICAgbGV0IGRlbHRhID0gbmV3SGVpZ2h0IC0gdGhpcy5faGVpZ2h0O1xyXG4gICAgICAgICAgICB0aGlzLl9oZWlnaHQgPSBuZXdIZWlnaHQ7XHJcbiAgICAgICAgICAgIHRoaXMuX293bmVyLnVwZGF0ZVNjcm9sbE1hcEhlaWdodChkZWx0YSk7XHJcbiAgICAgICAgICAgIGlmIChudWxsICE9IG9wdGlvbnMgJiYgb3B0aW9ucy5yZWZsZWN0QWxsKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9vd25lci51cGRhdGVQcm9maWxlcyh0aGlzLl9pbmRleCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISB6LWluZGV4IOOBruODquOCu+ODg+ODiC4gU2Nyb2xsTWFuYWdlci5yZW1vdmVJdGVtKCkg44GL44KJ44Kz44O844Or44GV44KM44KL44CCXHJcbiAgICAgICAgcHVibGljIHJlc2V0RGVwdGgoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmIChudWxsICE9IHRoaXMuX2luc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl8kYmFzZS5jc3MoXCJ6LWluZGV4XCIsIHRoaXMuX293bmVyLmdldExpc3RWaWV3T3B0aW9ucygpLmJhc2VEZXB0aCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gZ2V0dGVyL3NldHRlciBtZXRob2RzXHJcblxyXG4gICAgICAgIC8vISBnZXR0ZXI6IOODqeOCpOODs+OBrumrmOOBlVxyXG4gICAgICAgIHB1YmxpYyBnZXQgaGVpZ2h0KCk6IG51bWJlciB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9oZWlnaHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgZ2V0dGVyOiBnbG9iYWwgaW5kZXhcclxuICAgICAgICBwdWJsaWMgZ2V0IGluZGV4KCk6IG51bWJlciB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9pbmRleDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISBzZXR0ZXI6IGdsb2JhbCBpbmRleFxyXG4gICAgICAgIHB1YmxpYyBzZXQgaW5kZXgoaW5kZXg6IG51bWJlcikge1xyXG4gICAgICAgICAgICB0aGlzLl9pbmRleCA9IGluZGV4O1xyXG4gICAgICAgICAgICBpZiAobnVsbCAhPSB0aGlzLl8kYmFzZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVJbmRleCh0aGlzLl8kYmFzZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISBnZXR0ZXI6IOaJgOWxnuODmuODvOOCuCBpbmRleFxyXG4gICAgICAgIHB1YmxpYyBnZXQgcGFnZUluZGV4KCk6IG51bWJlciB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9wYWdlSW5kZXg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgc2V0dGVyOiDmiYDlsZ7jg5rjg7zjgrggaW5kZXhcclxuICAgICAgICBwdWJsaWMgc2V0IHBhZ2VJbmRleChpbmRleDogbnVtYmVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3BhZ2VJbmRleCA9IGluZGV4O1xyXG4gICAgICAgICAgICBpZiAobnVsbCAhPSB0aGlzLl8kYmFzZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVQYWdlSW5kZXgodGhpcy5fJGJhc2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgZ2V0dGVyOiBsaW5lIG9mZnNldFxyXG4gICAgICAgIHB1YmxpYyBnZXQgb2Zmc2V0KCk6IG51bWJlciB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9vZmZzZXQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgc2V0dGVyOiBsaW5lIG9mZnNldFxyXG4gICAgICAgIHB1YmxpYyBzZXQgb2Zmc2V0KG9mZnNldDogbnVtYmVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX29mZnNldCA9IG9mZnNldDtcclxuICAgICAgICAgICAgaWYgKG51bGwgIT0gdGhpcy5fJGJhc2UpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlT2Zmc2V0KHRoaXMuXyRiYXNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIGdldHRlcjogaW5mb1xyXG4gICAgICAgIHB1YmxpYyBnZXQgaW5mbygpOiBhbnkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5faW5mbztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gcHJpdmF0ZSBtZXRob2RzXHJcblxyXG4gICAgICAgIC8vISBCYXNlIGpRdWVyeSDjgqrjg5bjgrjjgqfjgq/jg4jjga7nlJ/miJBcclxuICAgICAgICBwcml2YXRlIHByZXBhcmVCYXNlRWxlbWVudCgpOiBKUXVlcnkge1xyXG4gICAgICAgICAgICBsZXQgJGJhc2U6IEpRdWVyeTtcclxuICAgICAgICAgICAgbGV0ICRtYXAgPSB0aGlzLl9vd25lci5nZXRTY3JvbGxNYXBFbGVtZW50KCk7XHJcbiAgICAgICAgICAgIGxldCAkcmVjeWNsZSA9IHRoaXMuX293bmVyLmZpbmRSZWN5Y2xlRWxlbWVudHMoKS5maXJzdCgpO1xyXG4gICAgICAgICAgICBsZXQgaXRlbVRhZ05hbWUgPSB0aGlzLl9vd25lci5nZXRMaXN0Vmlld09wdGlvbnMoKS5pdGVtVGFnTmFtZTtcclxuXHJcbiAgICAgICAgICAgIGlmIChudWxsICE9IHRoaXMuXyRiYXNlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oVEFHICsgXCJ0aGlzLl8kYmFzZSBpcyBub3QgbnVsbC5cIik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fJGJhc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICgwIDwgJHJlY3ljbGUubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAkYmFzZSA9ICRyZWN5Y2xlO1xyXG4gICAgICAgICAgICAgICAgJGJhc2UucmVtb3ZlQXR0cihcInotaW5kZXhcIik7XHJcbiAgICAgICAgICAgICAgICAkYmFzZS5yZW1vdmVDbGFzcyhfQ29uZmlnLlJFQ1lDTEVfQ0xBU1MpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJGJhc2UgPSAkKFwiPFwiICsgaXRlbVRhZ05hbWUgKyBcIiBjbGFzcz0nXCIgKyBfQ29uZmlnLkxJU1RJVEVNX0JBU0VfQ0xBU1MgKyBcIic+PC9cIiArIGl0ZW1UYWdOYW1lICsgXCI+XCIpO1xyXG4gICAgICAgICAgICAgICAgJGJhc2UuY3NzKFwiZGlzcGxheVwiLCBcIm5vbmVcIik7XHJcbiAgICAgICAgICAgICAgICAkbWFwLmFwcGVuZCgkYmFzZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIOmrmOOBleOBruabtOaWsFxyXG4gICAgICAgICAgICBpZiAoJGJhc2UuaGVpZ2h0KCkgIT09IHRoaXMuX2hlaWdodCkge1xyXG4gICAgICAgICAgICAgICAgJGJhc2UuaGVpZ2h0KHRoaXMuX2hlaWdodCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIGluZGV4IOOBruioreWumlxyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUluZGV4KCRiYXNlKTtcclxuICAgICAgICAgICAgLy8gb2Zmc2V0IOOBruabtOaWsFxyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZU9mZnNldCgkYmFzZSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gJGJhc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgZ2xvYmFsIGluZGV4IOOBruabtOaWsFxyXG4gICAgICAgIHByaXZhdGUgdXBkYXRlSW5kZXgoJGJhc2U6IEpRdWVyeSk6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAoJGJhc2UuYXR0cihfQ29uZmlnLkRBVEFfQ09OVEFJTkVSX0lOREVYKSAhPT0gdGhpcy5faW5kZXgudG9TdHJpbmcoKSkge1xyXG4gICAgICAgICAgICAgICAgJGJhc2UuYXR0cihfQ29uZmlnLkRBVEFfQ09OVEFJTkVSX0lOREVYLCB0aGlzLl9pbmRleC50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIHBhZ2UgaW5kZXgg44Gu5pu05pawXHJcbiAgICAgICAgcHJpdmF0ZSB1cGRhdGVQYWdlSW5kZXgoJGJhc2U6IEpRdWVyeSk6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAoJGJhc2UuYXR0cihfQ29uZmlnLkRBVEFfUEFHRV9JTkRFWCkgIT09IHRoaXMuX3BhZ2VJbmRleC50b1N0cmluZygpKSB7XHJcbiAgICAgICAgICAgICAgICAkYmFzZS5hdHRyKF9Db25maWcuREFUQV9QQUdFX0lOREVYLCB0aGlzLl9wYWdlSW5kZXgudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISBvZmZzZXQg44Gu5pu05pawXHJcbiAgICAgICAgcHJpdmF0ZSB1cGRhdGVPZmZzZXQoJGJhc2U6IEpRdWVyeSk6IHZvaWQge1xyXG4gICAgICAgICAgICBsZXQgdHJhbnNmb3JtID0ge307XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9vd25lci5nZXRMaXN0Vmlld09wdGlvbnMoKS5lbmFibGVUcmFuc2Zvcm1PZmZzZXQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChfVG9vbENTUy5nZXRDc3NNYXRyaXhWYWx1ZSgkYmFzZSwgXCJ0cmFuc2xhdGVZXCIpICE9PSB0aGlzLl9vZmZzZXQpIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IF9Ub29sQ1NTLmNzc1ByZWZpeGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybVtfVG9vbENTUy5jc3NQcmVmaXhlc1tpXSArIFwidHJhbnNmb3JtXCJdID0gXCJ0cmFuc2xhdGUzZCgwcHgsXCIgKyB0aGlzLl9vZmZzZXQgKyBcInB4LDBweClcIjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgJGJhc2UuY3NzKHRyYW5zZm9ybSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocGFyc2VJbnQoJGJhc2UuY3NzKFwidG9wXCIpLCAxMCkgIT09IHRoaXMuX29mZnNldCkge1xyXG4gICAgICAgICAgICAgICAgICAgICRiYXNlLmNzcyhcInRvcFwiLCB0aGlzLl9vZmZzZXQgKyBcInB4XCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJMaW5lUHJvZmlsZS50c1wiIC8+XHJcblxyXG5uYW1lc3BhY2UgQ0RQLlVJIHtcclxuXHJcbiAgICBjb25zdCBUQUcgPSBcIltDRFAuVUkuR3JvdXBQcm9maWxlXSBcIjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBjbGFzcyBHcm91cFByb2ZpbGVcclxuICAgICAqIEBicmllZiDjg6njgqTjg7PjgpLjgrDjg6vjg7zjg5fnrqHnkIbjgZnjgovjg5fjg63jg5XjgqHjgqTjg6vjgq/jg6njgrlcclxuICAgICAqICAgICAgICDmnKzjgq/jg6njgrnjgafjga/nm7TmjqUgRE9NIOOCkuaTjeS9nOOBl+OBpuOBr+OBhOOBkeOBquOBhFxyXG4gICAgICovXHJcbiAgICBleHBvcnQgY2xhc3MgR3JvdXBQcm9maWxlIHtcclxuICAgICAgICBwcml2YXRlIF9wYXJlbnQ6IEdyb3VwUHJvZmlsZSA9IG51bGw7ICAgICAgIC8vITwg6KaqIEdyb3VwUHJvZmlsZSDjgqTjg7Pjgrnjgr/jg7PjgrlcclxuICAgICAgICBwcml2YXRlIF9jaGlsZHJlbjogR3JvdXBQcm9maWxlW10gPSBbXTsgICAgIC8vITwg5a2QIEdyb3VwUHJvZmlsZSDjgqTjg7Pjgrnjgr/jg7PjgrlcclxuICAgICAgICBwcml2YXRlIF9leHBhbmRlZDogYm9vbGVhbiA9IGZhbHNlOyAgICAgICAgIC8vITwg6ZaL6ZaJ5oOF5aCxXHJcbiAgICAgICAgcHJpdmF0ZSBfc3RhdHVzOiBzdHJpbmcgPSBcInVucmVnaXN0ZXJlZFwiOyAgIC8vITwgX293bmVyIOOBuOOBrueZu+mMsueKtuaFiyBbIHVucmVnaXN0ZXJlZCB8IHJlZ2lzdGVyZWQgXVxyXG4gICAgICAgIHByaXZhdGUgX21hcExpbmVzID0ge307ICAgICAgICAgICAgICAgICAgICAgLy8hPCDoh6rouqvjgYznrqHovYTjgZnjgosgTGluZVByb2ZpbGUg44KSIGtleSDjgajjgajjgoLjgavmoLzntI1cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBMQVlPVVRfS0VZX0RFRkFVTFQgPSBcIi1sYXlvdXQtZGVmYXVsdFwiO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBjb25zdHJ1Y3RvclxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIF9pZCAgICB7U3RyaW5nfSAgICAgICAgICAgICBbaW5dIEdyb3VwUHJvZmlsZSDjga4gSURcclxuICAgICAgICAgKiBAcGFyYW0gX293bmVyIHtFeHBhbmRhYmxlTGlzdFZpZXd9IFtpbl0g566h55CG6ICF44Gn44GC44KLIEV4cGFuZGFibGVMaXN0VmlldyDjgqTjg7Pjgrnjgr/jg7PjgrlcclxuICAgICAgICAgKi9cclxuICAgICAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIF9pZDogc3RyaW5nLCBwcml2YXRlIF9vd25lcjogQmFzZUV4cGFuZGFibGVMaXN0Vmlldykge1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBwdWJsaWMgbWV0aG9kXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOacrCBHcm91cFByb2ZpbGUg44GM566h55CG44GZ44KLIExpc3Qg44KS5L2c5oiQ44GX44Gm55m76YyyXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gaGVpZ2h0ICAgICAge051bWJlcn0gICBbaW5dIOODqeOCpOODs+OBrumrmOOBlVxyXG4gICAgICAgICAqIEBwYXJhbSBpbml0aWFsaXplciB7RnVuY3Rpb259IFtpbl0gTGlzdEl0ZW1WaWV3IOa0vueUn+OCr+ODqeOCueOBruOCs+ODs+OCueODiOODqeOCr+OCv1xyXG4gICAgICAgICAqIEBwYXJhbSBpbmZvICAgICAgICB7T2JqZWN0fSAgIFtpbl0gaW5pdGlhbGl6ZXIg44Gr5rih44GV44KM44KL44Kq44OX44K344On44Oz5byV5pWwXHJcbiAgICAgICAgICogQHBhcmFtIGxheW91dEtleSAgIHtTdHJpbmd9ICAgW2luXSBsYXlvdXQg5q+O44Gr5L2/55So44GZ44KL6K2Y5Yil5a2QICjjgqrjg5fjgrfjg6fjg4rjg6spXHJcbiAgICAgICAgICogQHJldHVybiB7R3JvdXBQcm9maWxlfSDmnKzjgqTjg7Pjgrnjgr/jg7PjgrlcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgYWRkSXRlbShcclxuICAgICAgICAgICAgaGVpZ2h0OiBudW1iZXIsXHJcbiAgICAgICAgICAgIGluaXRpYWxpemVyOiBuZXcgKG9wdGlvbnM/OiBhbnkpID0+IEJhc2VMaXN0SXRlbVZpZXcsXHJcbiAgICAgICAgICAgIGluZm86IGFueSxcclxuICAgICAgICAgICAgbGF5b3V0S2V5Pzogc3RyaW5nXHJcbiAgICAgICAgKTogR3JvdXBQcm9maWxlIHtcclxuICAgICAgICAgICAgbGV0IGxpbmU6IExpbmVQcm9maWxlO1xyXG4gICAgICAgICAgICBsZXQgb3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCB7IGdyb3VwUHJvZmlsZTogdGhpcyB9LCBpbmZvKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChudWxsID09IGxheW91dEtleSkge1xyXG4gICAgICAgICAgICAgICAgbGF5b3V0S2V5ID0gR3JvdXBQcm9maWxlLkxBWU9VVF9LRVlfREVGQVVMVDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAobnVsbCA9PSB0aGlzLl9tYXBMaW5lc1tsYXlvdXRLZXldKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tYXBMaW5lc1tsYXlvdXRLZXldID0gW107XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxpbmUgPSBuZXcgTGluZVByb2ZpbGUodGhpcy5fb3duZXIuY29yZSwgTWF0aC5mbG9vcihoZWlnaHQpLCBpbml0aWFsaXplciwgb3B0aW9ucyk7XHJcblxyXG4gICAgICAgICAgICAvLyBfb3duZXIg44Gu566h55CG5LiL44Gr44GC44KL44Go44GN44Gv6YCf44KE44GL44Gr6L+95YqgXHJcbiAgICAgICAgICAgIGlmICgoXCJyZWdpc3RlcmVkXCIgPT09IHRoaXMuX3N0YXR1cykgJiZcclxuICAgICAgICAgICAgICAgIChudWxsID09IHRoaXMuX293bmVyLmxheW91dEtleSB8fCBsYXlvdXRLZXkgPT09IHRoaXMuX293bmVyLmxheW91dEtleSkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX293bmVyLl9hZGRMaW5lKGxpbmUsIHRoaXMuZ2V0TGFzdExpbmVJbmRleCgpICsgMSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9vd25lci51cGRhdGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLl9tYXBMaW5lc1tsYXlvdXRLZXldLnB1c2gobGluZSk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog5a2QIEdyb3VwIOOCkui/veWKoFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHRhcmdldCB7R3JvdXBQcm9maWxlfEdyb3VwUHJvZmlsZVtdfSBbaW5dIEdyb3VwUHJvZmlsZSDjgqTjg7Pjgrnjgr/jg7PjgrlcclxuICAgICAgICAgKiBAcmV0dXJuIHtHcm91cFByb2ZpbGV9IOacrOOCpOODs+OCueOCv+ODs+OCuVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBhZGRDaGlsZHJlbih0YXJnZXQ6IEdyb3VwUHJvZmlsZSk6IEdyb3VwUHJvZmlsZTtcclxuICAgICAgICBwdWJsaWMgYWRkQ2hpbGRyZW4odGFyZ2V0OiBHcm91cFByb2ZpbGVbXSk6IEdyb3VwUHJvZmlsZTtcclxuICAgICAgICBwdWJsaWMgYWRkQ2hpbGRyZW4odGFyZ2V0OiBhbnkpOiBHcm91cFByb2ZpbGUge1xyXG4gICAgICAgICAgICBsZXQgY2hpbGRyZW46IEdyb3VwUHJvZmlsZVtdID0gKHRhcmdldCBpbnN0YW5jZW9mIEFycmF5KSA/IHRhcmdldCA6IFt0YXJnZXRdO1xyXG4gICAgICAgICAgICBjaGlsZHJlbi5mb3JFYWNoKChjaGlsZCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY2hpbGQuc2V0UGFyZW50KHRoaXMpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5fY2hpbGRyZW4gPSB0aGlzLl9jaGlsZHJlbi5jb25jYXQoY2hpbGRyZW4pO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOimqiBHcm91cFByb2ZpbGUg44KS5Y+W5b6XXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHtHcm91cFByb2ZpbGV9IEdyb3VwUHJvZmlsZSDopqog44Kk44Oz44K544K/44Oz44K5XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIGdldFBhcmVudCgpOiBHcm91cFByb2ZpbGUge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcGFyZW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog5a2QIEdyb3VwUHJvZmlsZSDjgpLlj5blvpdcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge0dyb3VwUHJvZmlsZVtdfSBHcm91cFByb2ZpbGUg5a2QIOOCpOODs+OCueOCv+ODs+OCuemFjeWIl1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBnZXRDaGlsZHJlbigpOiBHcm91cFByb2ZpbGVbXSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9jaGlsZHJlbjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOWtkCBHcm91cCDjgpLmjIHjgaPjgabjgYTjgovjgYvliKTlrppcclxuICAgICAgICAgKiBsYXlvdXRLZXkg44GM5oyH5a6a44GV44KM44KM44Gw44CBbGF5b3V0IOOBrueKtuaFi+OBvuOBp+WIpOWumlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGxheW91dEtleSB7U3RyaW5nfSBbaW5dIGxheW91dCDmr47jgavkvb/nlKjjgZnjgovorZjliKXlrZAgKOOCquODl+OCt+ODp+ODiuODqylcclxuICAgICAgICAgKiBAcmV0dXJuIHtCb29sZWFufSB0cnVlOiDmnIksIGZhbHNlOiDnhKFcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgaGFzQ2hpbGRyZW4obGF5b3V0S2V5Pzogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9jaGlsZHJlbi5sZW5ndGggPD0gMCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKG51bGwgIT0gbGF5b3V0S2V5KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fY2hpbGRyZW5bMF0uaGFzTGF5b3V0S2V5T2YobGF5b3V0S2V5KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBsYXlvdXQg44Gu54q25oWL44KS5Yik5a6aXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gbGF5b3V0S2V5IHtTdHJpbmd9IFtpbl0gbGF5b3V0IOavjuOBq+S9v+eUqOOBmeOCi+itmOWIpeWtkFxyXG4gICAgICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IHRydWU6IOaciSwgZmFsc2U6IOeEoVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBoYXNMYXlvdXRLZXlPZihsYXlvdXRLZXk6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICBpZiAobnVsbCA9PSBsYXlvdXRLZXkpIHtcclxuICAgICAgICAgICAgICAgIGxheW91dEtleSA9IEdyb3VwUHJvZmlsZS5MQVlPVVRfS0VZX0RFRkFVTFQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIChudWxsICE9IHRoaXMuX21hcExpbmVzW2xheW91dEtleV0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog44Kw44Or44O844OX5bGV6ZaLXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIGV4cGFuZCgpOiB2b2lkIHtcclxuICAgICAgICAgICAgbGV0IGxpbmVzOiBMaW5lUHJvZmlsZVtdID0gW107XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9saW5lcy5sZW5ndGggPCAwKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oVEFHICsgXCJ0aGlzIGdyb3VwIGhhcyBubyBsaW5lcy5cIik7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIXRoaXMuaGFzQ2hpbGRyZW4oKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFRBRyArIFwidGhpcyBncm91cCBoYXMgbm8gY2hpbGRyZW4uXCIpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLmlzRXhwYW5kZWQoKSkge1xyXG4gICAgICAgICAgICAgICAgbGluZXMgPSB0aGlzLnF1ZXJ5T3BlcmF0aW9uVGFyZ2V0KFwicmVnaXN0ZXJlZFwiKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2V4cGFuZGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGlmICgwIDwgbGluZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fb3duZXIuc3RhdHVzU2NvcGUoXCJleHBhbmRpbmdcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDoh6rouqvjgpLmm7TmlrBcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fbGluZXMuZm9yRWFjaCgobGluZTogTGluZVByb2ZpbGUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmUucmVmcmVzaCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g6YWN5LiL44KS5pu05pawXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX293bmVyLl9hZGRMaW5lKGxpbmVzLCB0aGlzLmdldExhc3RMaW5lSW5kZXgoKSArIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9vd25lci51cGRhdGUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog44Kw44Or44O844OX5Y+O5p2fXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gZGVsYXkge051bWJlcn0gW2luXSDopoHntKDliYrpmaTjgavosrvjgoTjgZnpgYXlu7bmmYLplpMuIOaXouWumjogYW5pbWF0aW9uRHVyYXRpb24g5YCkXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIGNvbGxhcHNlKGRlbGF5PzogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGxldCBsaW5lczogTGluZVByb2ZpbGVbXSA9IFtdO1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuaGFzQ2hpbGRyZW4oKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFRBRyArIFwidGhpcyBncm91cCBoYXMgbm8gY2hpbGRyZW4uXCIpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuaXNFeHBhbmRlZCgpKSB7XHJcbiAgICAgICAgICAgICAgICBsaW5lcyA9IHRoaXMucXVlcnlPcGVyYXRpb25UYXJnZXQoXCJ1bnJlZ2lzdGVyZWRcIik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9leHBhbmRlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgaWYgKDAgPCBsaW5lcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBkZWxheSA9IChudWxsICE9IGRlbGF5KSA/IGRlbGF5IDogdGhpcy5fb3duZXIuY29yZS5nZXRMaXN0Vmlld09wdGlvbnMoKS5hbmltYXRpb25EdXJhdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9vd25lci5zdGF0dXNTY29wZShcImNvbGxhcHNpbmdcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDoh6rouqvjgpLmm7TmlrBcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fbGluZXMuZm9yRWFjaCgobGluZTogTGluZVByb2ZpbGUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmUucmVmcmVzaCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g6YWN5LiL44KS5pu05pawXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX293bmVyLnJlbW92ZUl0ZW0obGluZXNbMF0uaW5kZXgsIGxpbmVzLmxlbmd0aCwgZGVsYXkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9vd25lci51cGRhdGUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog6Ieq6Lqr44KS44Oq44K544OI44Gu5Y+v6KaW6aCY5Z+f44Gr6KGo56S6XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gb3B0aW9ucyB7RW5zdXJlVmlzaWJsZU9wdGlvbnN9IFtpbl0g44Kq44OX44K344On44OzXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZW5zdXJlVmlzaWJsZShvcHRpb25zPzogRW5zdXJlVmlzaWJsZU9wdGlvbnMpOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKDAgPCB0aGlzLl9saW5lcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX293bmVyLmVuc3VyZVZpc2libGUodGhpcy5fbGluZXNbMF0uaW5kZXgsIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKG51bGwgIT0gb3B0aW9ucy5jYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgb3B0aW9ucy5jYWxsYmFjaygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDplovplonjga7jg4jjgrDjg6tcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBkZWxheSB7TnVtYmVyfSBbaW5dIGNvbGxhcHNlIOOBruimgee0oOWJiumZpOOBq+iyu+OChOOBmemBheW7tuaZgumWky4g5pei5a6aOiBhbmltYXRpb25EdXJhdGlvbiDlgKRcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgdG9nZ2xlKGRlbGF5PzogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9leHBhbmRlZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb2xsYXBzZShkZWxheSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmV4cGFuZCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDlsZXplovnirbmhYvjgpLliKTlrppcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IHRydWU6IOWxlemWiywgZmFsc2U65Y+O5p2fXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIGlzRXhwYW5kZWQoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9leHBhbmRlZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIGxpc3QgdmlldyDjgbjnmbvpjLJcclxuICAgICAgICAgKiBUb3AgR3JvdXAg44Gu44G/55m76Yyy5Y+v6IO9XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gaW5zZXJ0VG8ge051bWJlcn0g5oy/5YWl5L2N572u44KSIGluZGV4IOOBp+aMh+WumlxyXG4gICAgICAgICAqIEByZXR1cm4ge0dyb3VwUHJvZmlsZX0g5pys44Kk44Oz44K544K/44Oz44K5XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHJlZ2lzdGVyKGluc2VydFRvOiBudW1iZXIpOiBHcm91cFByb2ZpbGUge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fcGFyZW50KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFRBRyArIFwibG9naWMgZXJyb3I6ICdyZWdpc3RlcicgbWV0aG9kIGlzIGFjY2VwdGFibGUgb25seSB0b3AgZ3JvdXAuXCIpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fb3duZXIuX2FkZExpbmUodGhpcy5wcmVwcm9jZXNzKFwicmVnaXN0ZXJlZFwiKSwgaW5zZXJ0VG8pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogbGlzdCB2aWV3IOOBuOW+qeWFg1xyXG4gICAgICAgICAqIFRvcCBHcm91cCDjga7jgb/nmbvpjLLlj6/og71cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge0dyb3VwUHJvZmlsZX0g5pys44Kk44Oz44K544K/44Oz44K5XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHJlc3RvcmUoKTogR3JvdXBQcm9maWxlIHtcclxuICAgICAgICAgICAgbGV0IGxpbmVzOiBMaW5lUHJvZmlsZVtdID0gW107XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9wYXJlbnQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoVEFHICsgXCJsb2dpYyBlcnJvcjogJ3Jlc3RvcmUnIG1ldGhvZCBpcyBhY2NlcHRhYmxlIG9ubHkgdG9wIGdyb3VwLlwiKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9saW5lcykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2V4cGFuZGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGluZXMgPSB0aGlzLl9saW5lcy5jb25jYXQodGhpcy5xdWVyeU9wZXJhdGlvblRhcmdldChcImFjdGl2ZVwiKSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGxpbmVzID0gdGhpcy5fbGluZXM7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9vd25lci5fYWRkTGluZShsaW5lcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDphY3kuIvjga7mnIDlvozjga4gbGluZSBpbmRleCDjgpLlj5blvpdcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB3aXRoQWN0aXZlQ2hpbGRyZW4ge0Jvb2xlYW59IFtpbl0g55m76Yyy5riI44G/44Gu5a2QIEdyb3VwUHJvZmlsZSDjgpLlkKvjgoHjgabmpJzntKLjgZnjgovloLTlkIjjga8gdHJ1ZSDjgpLmjIflrppcclxuICAgICAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9IGluZGV4LiDjgqjjg6njg7zjga7loLTlkIjjga8gbnVsbC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgZ2V0TGFzdExpbmVJbmRleCh3aXRoQWN0aXZlQ2hpbGRyZW46IGJvb2xlYW4gPSBmYWxzZSk6IG51bWJlciB7XHJcbiAgICAgICAgICAgIGxldCBsaW5lczogTGluZVByb2ZpbGVbXSA9ICgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgbGluZXM6IExpbmVQcm9maWxlW107XHJcbiAgICAgICAgICAgICAgICBpZiAod2l0aEFjdGl2ZUNoaWxkcmVuKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGluZXMgPSB0aGlzLnF1ZXJ5T3BlcmF0aW9uVGFyZ2V0KFwiYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKG51bGwgPT0gbGluZXMgfHwgbGluZXMubGVuZ3RoIDw9IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBsaW5lcyA9IHRoaXMuX2xpbmVzO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGxpbmVzO1xyXG4gICAgICAgICAgICB9KSgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGxpbmVzLmxlbmd0aCA8PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFRBRyArIFwibG9naWMgZXJyb3I6IHRoaXMgZ3JvdXAgaXMgc3RpbCBub3QgcmVnaXN0ZXJlZC5cIik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBsaW5lc1tsaW5lcy5sZW5ndGggLSAxXS5pbmRleDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSUQg44KS5Y+W5b6XXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHtTdHJpbmd9IOWJsuOCiuaMr+OCieOCjOOBnyBJRFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGdldCBpZCgpOiBzdHJpbmcge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5faWQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDjgrnjg4bjg7zjgr/jgrnjgpLlj5blvpdcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge1N0cmluZ30g44K544OG44O844K/44K55paH5a2X5YiXXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZ2V0IHN0YXR1cygpOiBzdHJpbmcge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc3RhdHVzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBwcml2YXRlIG1ldGhvZFxyXG5cclxuICAgICAgICAvKiB0c2xpbnQ6ZGlzYWJsZTpuby11bnVzZWQtdmFyaWFibGUgKi9cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog6KaqIEdyb3VwIOaMh+WumlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHBhcmVudCB7R3JvdXBQcm9maWxlfSBbaW5dIOimqiBHcm91cFByb2ZpbGUg44Kk44Oz44K544K/44Oz44K5XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSBzZXRQYXJlbnQocGFyZW50OiBHcm91cFByb2ZpbGUpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5fcGFyZW50ID0gcGFyZW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyogdHNsaW50OmVuYWJsZTpuby11bnVzZWQtdmFyaWFibGUgKi9cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogcmVnaXN0ZXIgLyB1bnJlZ2lzdGVyIOOBruWJjeWHpueQhlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIG5ld1N0YXR1cyB7U3RyaW5nfSBbaW5dIOaWsOOCueODhuODvOOCv+OCueaWh+Wtl+WIl1xyXG4gICAgICAgICAqIEByZXR1cm4ge0xpbmVQcm9maWxlW119IOabtOaWsOOBmeOBueOBjSBMaW5lUHJvZmlsZSDjga7phY3liJdcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlIHByZXByb2Nlc3MobmV3U3RhdHVzOiBzdHJpbmcpOiBMaW5lUHJvZmlsZVtdIHtcclxuICAgICAgICAgICAgbGV0IGxpbmVzOiBMaW5lUHJvZmlsZVtdID0gW107XHJcbiAgICAgICAgICAgIGlmIChuZXdTdGF0dXMgIT09IHRoaXMuX3N0YXR1cyAmJiBudWxsICE9IHRoaXMuX2xpbmVzKSB7XHJcbiAgICAgICAgICAgICAgICBsaW5lcyA9IHRoaXMuX2xpbmVzO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuX3N0YXR1cyA9IG5ld1N0YXR1cztcclxuICAgICAgICAgICAgcmV0dXJuIGxpbmVzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog5pON5L2c5a++6LGh44GuIExpbmVQcm9maWxlIOmFjeWIl+OCkuWPluW+l1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIG5ld1N0YXR1cyB7U3RyaW5nfSBbaW5dIOaWsOOCueODhuODvOOCv+OCueaWh+Wtl+WIl1xyXG4gICAgICAgICAqIEByZXR1cm4ge0xpbmVQcm9maWxlW119IOaTjeS9nOWvvuixoeOBriBMaW5lUHJvZmlsZSDjga7phY3liJdcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlIHF1ZXJ5T3BlcmF0aW9uVGFyZ2V0KG9wZXJhdGlvbjogc3RyaW5nKTogTGluZVByb2ZpbGVbXSB7XHJcbiAgICAgICAgICAgIGxldCBmaW5kVGFyZ2V0cyA9IChncm91cDogR3JvdXBQcm9maWxlKTogTGluZVByb2ZpbGVbXSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgbGluZXM6IExpbmVQcm9maWxlW10gPSBbXTtcclxuICAgICAgICAgICAgICAgIGdyb3VwLl9jaGlsZHJlbi5mb3JFYWNoKChncm91cDogR3JvdXBQcm9maWxlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChvcGVyYXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInJlZ2lzdGVyZWRcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVzID0gbGluZXMuY29uY2F0KGdyb3VwLnByZXByb2Nlc3Mob3BlcmF0aW9uKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInVucmVnaXN0ZXJlZFwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGluZXMgPSBsaW5lcy5jb25jYXQoZ3JvdXAucHJlcHJvY2VzcyhvcGVyYXRpb24pKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiYWN0aXZlXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPSBncm91cC5fbGluZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5lcyA9IGxpbmVzLmNvbmNhdChncm91cC5fbGluZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oVEFHICsgXCJ1bmtub3duIG9wZXJhdGlvbjogXCIgKyBvcGVyYXRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoZ3JvdXAuaXNFeHBhbmRlZCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVzID0gbGluZXMuY29uY2F0KGZpbmRUYXJnZXRzKGdyb3VwKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbGluZXM7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHJldHVybiBmaW5kVGFyZ2V0cyh0aGlzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOiHqui6q+OBrueuoeeQhuOBmeOCi+OCouOCr+ODhuOCo+ODluOBqiBMaW5lUHJvZmllIOOCkuWPluW+l1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7TGluZVByb2ZpbGVbXX0gTGluZVByb2ZpZSDphY3liJdcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlIGdldCBfbGluZXMoKTogTGluZVByb2ZpbGVbXSB7XHJcbiAgICAgICAgICAgIGxldCBrZXkgPSB0aGlzLl9vd25lci5sYXlvdXRLZXk7XHJcbiAgICAgICAgICAgIGlmIChudWxsICE9IGtleSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX21hcExpbmVzW2tleV07XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fbWFwTGluZXNbR3JvdXBQcm9maWxlLkxBWU9VVF9LRVlfREVGQVVMVF07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uLy4uLy4uLy4uL2V4dGVybmFsL2luY2x1ZGUvanF1ZXJ5LmQudHNcIiAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vLi4vLi4vLi4vZXh0ZXJuYWwvaW5jbHVkZS9iYWNrYm9uZS5kLnRzXCIgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIkdyb3VwUHJvZmlsZS50c1wiIC8+XHJcblxyXG5uYW1lc3BhY2UgQ0RQLlVJIHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBpbnRlcmZhY2UgTGlzdFZpZXdPcHRpb25zXHJcbiAgICAgKiBAYnJpZWYgTGlzdFZpZXcg44Gu5Yid5pyf5YyW5oOF5aCx44KS5qC857SN44GZ44KL44Kk44Oz44K/44O844OV44Kn44Kk44K544Kv44Op44K5XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgTGlzdFZpZXdPcHRpb25zIHtcclxuICAgICAgICAvLyEg5L2/55So44GZ44KLIElTY3JvbGxlciDjgpLlpInmm7TjgZnjgovloLTlkIjjgavmjIflrpogIFtkZWZhdWx0OiBTY3JvbGxlck5hdGl2ZS5nZXRGYWN0b3J5KCldXHJcbiAgICAgICAgc2Nyb2xsZXJGYWN0b3J5PzogKGVsZW1lbnQ6IGFueSwgb3B0aW9uczogTGlzdFZpZXdPcHRpb25zKSA9PiBJU2Nyb2xsZXI7XHJcbiAgICAgICAgZW5hYmxlSGlkZGVuUGFnZT86IGJvb2xlYW47ICAgICAgICAgLy8hPCBwbGVsb2FkIOWvvuixoeOCkiB2aXNpYmlsaXR5OiBcImhpZGRlblwiIOOBq+OBmeOCi+WgtOWQiOOBryB0cnVlLiAgICAgICAgICAgICAgICBbZGVmYXVsdDogZmFsc2VdXHJcbiAgICAgICAgZW5hYmxlVHJhbnNmb3JtT2Zmc2V0PzogYm9vbGVhbjsgICAgLy8hPCBsaXN0IGl0ZW0g44GuIG9mZnNldCDjgpIgdHJhbnNmb3JtIOOBp+ioreWumuOBmeOCiyAo44GC44G+44KK44KI44GP44Gq44GEKSAgICAgICAgICBbZGVmYXVsdDogZmFsc2VdXHJcbiAgICAgICAgc2Nyb2xsTWFwUmVmcmVzaEludGVydmFsPzogbnVtYmVyOyAgLy8hPCBzY3JvbGwgbWFwIOmgmOWfn+OBruabtOaWsOeiuuiqjemWk+malC4gaXNjcm9sbCDnrYnjgIHpnZ4gRE9NIOaTjeS9nOaZguOBq+S9v+eUqCAgICAgICAgW2RlZmF1bHQ6IDIwMF1cclxuICAgICAgICBzY3JvbGxSZWZyZXNoRGlzdGFuY2U/OiBudW1iZXI7ICAgICAvLyE8IExpc3RWaWV3IOabtOaWsOWHpueQhuOCkuihjOOBhiBzY3JvbGwg56e75YuV6YePICjjgqLjg6vjgrTjg6rjgrrjg6Dopovnm7TjgZfjgoLoppbph44pICAgICAgW2RlZmF1bHQ6IDIwMF1cclxuICAgICAgICBwYWdlUHJlcGFyZUNvdW50PzogbnVtYmVyOyAgICAgICAgICAvLyE8IOihqOekuumgmOWfn+WkluOBp+WujOWFqOOBqueKtuaFi+OBp+i/veWKoOOBleOCjOOCiyBwYWdlIOaVsCAo5YmN5pa544O75b6M5pa55ZCI44KP44Gb44GmIDLlgI0pICAgW2RlZmF1bHQ6IDNdXHJcbiAgICAgICAgcGFnZVByZWxvYWRDb3VudD86IG51bWJlcjsgICAgICAgICAgLy8hPCDooajnpLrpoJjln5/lpJbjgacgaGlkZGVuIOeKtuaFi+OBp+i/veWKoOOBleOCjOOCiyBwYWdlIOaVsCAo5YmN5pa544O75b6M5pa55ZCI44KP44Gb44GmIDLlgI0pIFtkZWZhdWx0OiAxXVxyXG4gICAgICAgIGVuYWJsZUFuaW1hdGlvbj86IGJvb2xlYW47ICAgICAgICAgIC8vITwg44Ki44OL44Oh44O844K344On44Oz44KS5pyJ5Yq544Gr44GZ44KL5aC05ZCI44GvIHRydWUuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbZGVmYXVsdDogdHJ1ZV1cclxuICAgICAgICBhbmltYXRpb25EdXJhdGlvbj86IG51bWJlcjsgICAgICAgICAvLyE8IOOCouODi+ODoeODvOOCt+ODp+ODs+OBruiyu+OChOOBmeaZgumWkyAobXNlYykgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW2RlZmF1bHQ6IDBdXHJcbiAgICAgICAgYmFzZURlcHRoPzogc3RyaW5nOyAgICAgICAgICAgICAgICAgLy8hPCDln7rmupbjgajjgZnjgosgei1pbmRleC4gXCJjb2xsYXBzZVwiIOaZguOBruOCouODi+ODoeODvOOCt+ODp+ODs+aZguOBq+S9v+eUqCAgICAgICAgICAgICBbZGVmYXVsdDogYXV0b11cclxuICAgICAgICBpdGVtVGFnTmFtZT86IHN0cmluZzsgICAgICAgICAgICAgICAvLyE8IExpc3RJdGVtVmlldyDjgYzkvb/nlKjjgZnjgovjgr/jgrDlkI0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtkZWZhdWx0OiBkaXZdXHJcbiAgICAgICAgcmVtb3ZlSXRlbVdpdGhUcmFuc2l0aW9uPzogYm9vbGVhbjsgLy8hPCByZW1vdmVJdGVtKCkg5pmC44Gr5b+F6KaB44Gr5b+c44GY44Gm6Ieq5YuV44GnIHRyYW5zaXRpb24g44KS44GL44GR44KL5aC05ZCI44GvIHRydWUgICAgW2RlZmF1bHQ6IHRydWVdXHJcbiAgICAgICAgLy8hIOmdnuOCouOCr+ODhuOCo+ODluOBqiBzY3JvbGwgbWFwIOOBq+WvvuOBl+OBpiBEdW1teSDjgpLkvb/nlKjjgZnjgovloLTlkIjjga8gdHJ1ZS4gKGZsaXBzbmFwIOWIh+OCiuabv+OBiOaZguetiS4g5Yq55p6c44Gv44GC44G+44KK44Gq44GXKSAgW2RlZmF1bHQ6IGZhbHNlXVxyXG4gICAgICAgIHVzZUR1bW15SW5hY3RpdmVTY3JvbGxNYXA/OiBib29sZWFuO1xyXG4gICAgfVxyXG5cclxuICAgIC8vX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXy8vXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAaW50ZXJmYWNlIElMaXN0Vmlld0ZyYW1ld29ya1xyXG4gICAgICogQGJyaWVmIExpc3RWaWV3IEZyYW1ld29yayDjgYzkvb/nlKjjgZnjgovjgqTjg7Pjgr/jg7zjg5XjgqfjgqTjgrnlrprnvqlcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJTGlzdFZpZXdGcmFtZXdvcmsge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFNjcm9sbCBNYXAg44Gu6auY44GV44KS5Y+W5b6XXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9IOePvuWcqOOBrumrmOOBlSBbcHhdXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZ2V0U2Nyb2xsTWFwSGVpZ2h0KCk6IG51bWJlcjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogU2Nyb2xsIE1hcCDjga7pq5jjgZXjgpLmm7TmlrBcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBkZWx0ZSB7TnVtYmVyfSBbaW5dIOWkieWMlumHj+OCkuaMh+WumlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHVwZGF0ZVNjcm9sbE1hcEhlaWdodChkZWx0YTogbnVtYmVyKTogdm9pZDtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog5YaF6YOoIFByb2ZpbGUg44Gu5pu05pawXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gZnJvbSB7TnVtYmVyfSBbaW5dIOabtOaWsOmWi+Wni+OCpOODs+ODh+ODg+OCr+OCueOCkuaMh+WumlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHVwZGF0ZVByb2ZpbGVzKGZyb206IG51bWJlcik6IHZvaWQ7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFNjcm9sbCBNYXAgRWxlbWVudCDjgpLlj5blvpdcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge2pRdWVyeX0gc2Nyb2xsIG1hcCBlbGVtZW50XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZ2V0U2Nyb2xsTWFwRWxlbWVudCgpOiBKUXVlcnk7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOODquOCteOCpOOCr+ODq+WPr+iDveOBqiBFbGVtZW50IOOCkuWPluW+l1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7alF1ZXJ5fSByZWN5Y2xlIGVsZW1lbnRzXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZmluZFJlY3ljbGVFbGVtZW50cygpOiBKUXVlcnk7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIExpc3RWaWV3T3B0aW9ucyDjgpLlj5blvpdcclxuICAgICAgICAgKiDjgZnjgbnjgabjga7jg5fjg63jg5Hjg4bjgqPjgqLjgq/jgrvjgrnjgpLkv53oqLzjgZnjgovjgIJcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge0xpc3RWaWV3T3B0aW9uc30gb3B0aW9uIOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGdldExpc3RWaWV3T3B0aW9ucygpOiBMaXN0Vmlld09wdGlvbnM7XHJcbiAgICB9XHJcblxyXG4gICAgLy9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fLy9cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBpbnRlcmZhY2UgSVNjcm9sbGVyXHJcbiAgICAgKiBAYnJpZWYgU2Nyb2xsZXIg44Kk44Oz44K/44O844OV44Kn44Kk44K5XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSVNjcm9sbGVyIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBTY3JvbGxlciDjga7lnovmg4XloLHjgpLlj5blvpdcclxuICAgICAgICAgKi9cclxuICAgICAgICBnZXRUeXBlKCk6IHN0cmluZztcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogcG9zaXRpb24g5Y+W5b6XXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9IDogcG9zaXRpb25cclxuICAgICAgICAgKi9cclxuICAgICAgICBnZXRQb3MoKTogbnVtYmVyO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBwb3NpdGlvbiDjga7mnIDlpKflgKTjgpLlj5blvpdcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge051bWJlcn0gOiBwb3NpdGlvblxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGdldFBvc01heCgpOiBudW1iZXI7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOOCpOODmeODs+ODiOeZu+mMslxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHR5cGUge1N0cmluZ30gICBbaW5dIGV2ZW50IOWQjVxyXG4gICAgICAgICAqIEBwYXJhbSBmdW5jIHtGdW5jdGlvbn0gW2luXSBldmVudCBoYW5kbGVyXHJcbiAgICAgICAgICogQHJldHVybiB7TnVtYmVyfSA6IHBvc2l0aW9uXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb24odHlwZTogc3RyaW5nLCBmdW5jOiAoZXZlbnQ6IEpRdWVyeUV2ZW50T2JqZWN0KSA9PiB2b2lkKTogdm9pZDtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog44Kk44OZ44Oz44OI55m76Yyy6Kej6ZmkXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gdHlwZSB7U3RyaW5nfSAgIFtpbl0gZXZlbnQg5ZCNXHJcbiAgICAgICAgICogQHBhcmFtIGZ1bmMge0Z1bmN0aW9ufSBbaW5dIGV2ZW50IGhhbmRsZXJcclxuICAgICAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9IDogcG9zaXRpb25cclxuICAgICAgICAgKi9cclxuICAgICAgICBvZmYodHlwZTogc3RyaW5nLCBmdW5jOiAoZXZlbnQ6IEpRdWVyeUV2ZW50T2JqZWN0KSA9PiB2b2lkKTogdm9pZDtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog44K544Kv44Ot44O844Or5L2N572u44KS5oyH5a6aXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gcG9zICAgICB7TnVtYmVyfSAgW2luXSDjgrnjgq/jg63jg7zjg6vkvY3nva4gKDAgLSBwb3NNYXgpXHJcbiAgICAgICAgICogQHBhcmFtIGFuaW1hdGUge0Jvb2xlYW59IFtpbl0g44Ki44OL44Oh44O844K344On44Oz44Gu5pyJ54ShXHJcbiAgICAgICAgICogQHBhcmFtIHRpbWUgICAge051bWJlcn0gIFtpbl0g44Ki44OL44Oh44O844K344On44Oz44Gr6LK744KE44GZ5pmC6ZaTIFttc2VjXVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHNjcm9sbFRvKHBvczogbnVtYmVyLCBhbmltYXRlPzogYm9vbGVhbiwgdGltZT86IG51bWJlcik6IHZvaWQ7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFNjcm9sbGVyIOOBrueKtuaFi+abtOaWsFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHVwZGF0ZSgpOiB2b2lkO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBTY3JvbGxlciDjga7noLTmo4RcclxuICAgICAgICAgKi9cclxuICAgICAgICBkZXN0cm95KCk6IHZvaWQ7XHJcbiAgICB9XHJcblxyXG4gICAgLy9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fLy9cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBpbnRlcmZhY2UgSVNjcm9sbGFibGVcclxuICAgICAqIEBicmllZiBTY3JvbGwg44Kk44Oz44K/44O844OV44Kn44Kk44K5XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSVNjcm9sbGFibGUge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOOCueOCr+ODreODvOODq+OCpOODmeODs+ODiOODj+ODs+ODieODqeioreWumi/op6PpmaRcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBoYW5kbGVyIHtGdW5jdGlvbn0gW2luXSDjg4/jg7Pjg4njg6nplqLmlbBcclxuICAgICAgICAgKiBAcGFyYW0gb24gICAgICB7Qm9vbGVhbn0gIFtpbl0gdHJ1ZTog6Kit5a6aIC8gZmFsc2U6IOino+mZpFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHNldFNjcm9sbEhhbmRsZXIoaGFuZGxlcjogKGV2ZW50OiBKUXVlcnlFdmVudE9iamVjdCkgPT4gdm9pZCwgb246IGJvb2xlYW4pOiB2b2lkO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDjgrnjgq/jg63jg7zjg6vntYLkuobjgqTjg5njg7Pjg4jjg4/jg7Pjg4njg6noqK3lrpov6Kej6ZmkXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gaGFuZGxlciB7RnVuY3Rpb259IFtpbl0g44OP44Oz44OJ44Op6Zai5pWwXHJcbiAgICAgICAgICogQHBhcmFtIG9uICAgICAge0Jvb2xlYW59ICBbaW5dIHRydWU6IOioreWumiAvIGZhbHNlOiDop6PpmaRcclxuICAgICAgICAgKi9cclxuICAgICAgICBzZXRTY3JvbGxTdG9wSGFuZGxlcihoYW5kbGVyOiAoZXZlbnQ6IEpRdWVyeUV2ZW50T2JqZWN0KSA9PiB2b2lkLCBvbjogYm9vbGVhbik6IHZvaWQ7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOOCueOCr+ODreODvOODq+S9jee9ruOCkuWPluW+l1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7TnVtYmVyfSA6IHBvc2l0aW9uXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZ2V0U2Nyb2xsUG9zKCk6IG51bWJlcjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog44K544Kv44Ot44O844Or5L2N572u44Gu5pyA5aSn5YCk44KS5Y+W5b6XXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9IDogcG9zaXRpb25cclxuICAgICAgICAgKi9cclxuICAgICAgICBnZXRTY3JvbGxQb3NNYXgoKTogbnVtYmVyO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDjgrnjgq/jg63jg7zjg6vkvY3nva7jgpLmjIflrppcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBwb3MgICAgIHtOdW1iZXJ9ICBbaW5dIOOCueOCr+ODreODvOODq+S9jee9riAoMCAtIHBvc01heClcclxuICAgICAgICAgKiBAcGFyYW0gYW5pbWF0ZSB7Qm9vbGVhbn0gW2luXSDjgqLjg4vjg6Hjg7zjgrfjg6fjg7Pjga7mnInnhKFcclxuICAgICAgICAgKiBAcGFyYW0gdGltZSAgICB7TnVtYmVyfSAgW2luXSDjgqLjg4vjg6Hjg7zjgrfjg6fjg7PjgavosrvjgoTjgZnmmYLplpMgW21zZWNdXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgc2Nyb2xsVG8ocG9zOiBudW1iZXIsIGFuaW1hdGU/OiBib29sZWFuLCB0aW1lPzogbnVtYmVyKTogdm9pZDtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog5oyH5a6a44GV44KM44GfIExpc3RJdGVtVmlldyDjga7ooajnpLrjgpLkv53oqLxcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBpbmRleCAgIHtOdW1iZXJ9ICAgICAgICAgICAgICAgW2luXSBMaXN0SXRlbVZpZXcg44Gu44Kk44Oz44OH44OD44Kv44K5XHJcbiAgICAgICAgICogQHBhcmFtIG9wdGlvbnMge0Vuc3VyZVZpc2libGVPcHRpb25zfSBbaW5dIOOCquODl+OCt+ODp+ODs1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGVuc3VyZVZpc2libGUoaW5kZXg6IG51bWJlciwgb3B0aW9ucz86IEVuc3VyZVZpc2libGVPcHRpb25zKTogdm9pZDtcclxuICAgIH1cclxuXHJcbiAgICAvL19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18vL1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGludGVyZmFjZSBJQmFja3VwUmVzdG9yZVxyXG4gICAgICogQGJyaWVmIEJhY2t1cC9SZXN0b3JlIOOBruOCpOODs+OCv+ODvOODleOCp+OCpOOCuVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElCYWNrdXBSZXN0b3JlIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDlhoXpg6jjg4fjg7zjgr/jgpLjg5Djg4Pjgq/jgqLjg4Pjg5dcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBrZXkge1N0cmluZ30gW2luXSDjg5Djg4Pjgq/jgqLjg4Pjg5fjgq3jg7zjgpLmjIflrppcclxuICAgICAgICAgKiBAcmV0dXJuIHtCb29sZWFufSB0cnVlOiDmiJDlip8gLyBmYWxzZTog5aSx5pWXXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgYmFja3VwKGtleTogc3RyaW5nKTogYm9vbGVhbjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog5YaF6YOo44OH44O844K/44KS44Oq44K544OI44KiXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ga2V5ICAgICB7U3RyaW5nfSAgW2luXSDjg5Djg4Pjgq/jgqLjg4Pjg5fjgq3jg7zjgpLmjIflrppcclxuICAgICAgICAgKiBAcGFyYW0gcmVidWlsZCB7Qm9vbGVhbn0gW2luXSByZWJ1aWxkIOOCkuWun+ihjOOBmeOCi+WgtOWQiOOBryB0cnVlIOOCkuaMh+WumlxyXG4gICAgICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IHRydWU6IOaIkOWKnyAvIGZhbHNlOiDlpLHmlZdcclxuICAgICAgICAgKi9cclxuICAgICAgICByZXN0b3JlKGtleTogc3RyaW5nLCByZWJ1aWxkOiBib29sZWFuKTogYm9vbGVhbjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog44OQ44OD44Kv44Ki44OD44OX44OH44O844K/44Gu5pyJ54ShXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ga2V5IHtTdHJpbmd9IFtpbl0g44OQ44OD44Kv44Ki44OD44OX44Kt44O844KS5oyH5a6aXHJcbiAgICAgICAgICogQHJldHVybiB7Qm9vbGVhbn0gdHJ1ZTog5pyJIC8gZmFsc2U6IOeEoVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGhhc0JhY2t1cChrZXk6IHN0cmluZyk6IGJvb2xlYW47XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOODkOODg+OCr+OCouODg+ODl+ODh+ODvOOCv+OBruegtOajhFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGtleSB7U3RyaW5nfSBbaW5dIOODkOODg+OCr+OCouODg+ODl+OCreODvOOCkuaMh+WumlxyXG4gICAgICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IHRydWU6IOaIkOWKnyAvIGZhbHNlOiDlpLHmlZdcclxuICAgICAgICAgKi9cclxuICAgICAgICBjbGVhckJhY2t1cChrZXk/OiBzdHJpbmcpOiBib29sZWFuO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDjg5Djg4Pjgq/jgqLjg4Pjg5fjg4fjg7zjgr/jgavjgqLjgq/jgrvjgrlcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge2FueX0g44OQ44OD44Kv44Ki44OD44OX44OH44O844K/44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgYmFja3VwRGF0YTogYW55O1xyXG4gICAgfVxyXG5cclxuICAgIC8vX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXy8vXHJcblxyXG4gICAgZXhwb3J0IHR5cGUgVmlld0NvbnN0cnVjdG9yID0gbmV3IChvcHRpb25zPzogQmFja2JvbmUuVmlld09wdGlvbnM8QmFja2JvbmUuTW9kZWw+KSA9PiBCYWNrYm9uZS5WaWV3PEJhY2tib25lLk1vZGVsPjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBpbnRlcmZhY2UgSUNvbXBvc2FibGVWaWV3XHJcbiAgICAgKiBAYnJpZWYgSUNvbXBvc2FibGVWaWV3U3RhdGljIOOBruODl+ODreOCreOCt+OCpOODs+OCv+ODvOODleOCp+OCpOOCuSAoZXhwZXJpbWVudGFsKVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElDb21wb3NhYmxlVmlldyB7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAaW50ZXJmYWNlIElDb21wb3NhYmxlVmlld1N0YXRpY1xyXG4gICAgICogQGJyaWVmIFZpZXcgY29tcG9zZSDjgqTjg7Pjgr/jg7zjg5XjgqfjgqTjgrlcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJQ29tcG9zYWJsZVZpZXdTdGF0aWMge1xyXG4gICAgICAgIG5ldyAoKTogSUNvbXBvc2FibGVWaWV3O1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOOBmeOBp+OBq+Wumue+qeOBleOCjOOBnyBCYWNrYm9uZS5WaWV3IOOCkuWfuuW6leOCr+ODqeOCueOBq+ioreWumuOBl+OAgWV4dGVuZCDjgpLlrp/ooYzjgZnjgovjgIJcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBkZXJpdmVzICAgICAgICAge0JhY2tib25lLlZpZXd8QmFja2JvbmUuVmlld1tdfSBbaW5dIOWQiOaIkOWFg+OBriBWaWV3IOOCr+ODqeOCuVxyXG4gICAgICAgICAqIEBwYXJhbSBwcm9wZXJ0aWVzICAgICAge09iamVjdH0gICAgICAgICAgICAgICAgICAgICAgICBbaW5dIHByb3RvdHlwZSDjg5fjg63jg5Hjg4bjgqNcclxuICAgICAgICAgKiBAcGFyYW0gY2xhc3NQcm9wZXJ0aWVzIHtPYmplY3R9ICAgICAgICAgICAgICAgICAgICAgICAgW2luXSBzdGF0aWMg44OX44Ot44OR44OG44KjXHJcbiAgICAgICAgICogQHJldHVybiB7QmFja2JvbmUuVmlld3xCYWNrYm9uZS5WaWV3W119IOaWsOimj+OBq+eUn+aIkOOBleOCjOOBnyBWaWV3IOOBruOCs+ODs+OCueODiOODqeOCr+OCv1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGNvbXBvc2UoZGVyaXZlczogVmlld0NvbnN0cnVjdG9yIHwgVmlld0NvbnN0cnVjdG9yW10sIHByb3BlcnRpZXM6IGFueSwgY2xhc3NQcm9wZXJ0aWVzPzogYW55KTogVmlld0NvbnN0cnVjdG9yO1xyXG4gICAgfVxyXG5cclxuICAgIC8vX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXy8vXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAaW50ZXJmYWNlIFVwZGF0ZUhlaWdodE9wdGlvbnNcclxuICAgICAqIEBicmllZiBJTGlzdEl0ZW1WaWV3LnVwZGF0ZUhlaWdodCgpIOOBq+a4oeOBm+OCi+OCquODl+OCt+ODp+ODs1xyXG4gICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIFVwZGF0ZUhlaWdodE9wdGlvbnMge1xyXG4gICAgICAgIHJlZmxlY3RBbGw/OiBib29sZWFuOyAgICAvLyE8IGxpbmUg44Gu6auY44GV5pu05paw5pmC44Gr5b2x6Z+/44GZ44KL44GZ44G544Gm44GuIExpbmVQcm9maWxlIOOBruWGjeioiOeul+OCkuihjOOBhuWgtOWQiOOBryB0cnVlXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAaW50ZXJmYWNlIElMaXN0SXRlbVZpZXdcclxuICAgICAqIEBicmllZiAgICAgTGlzdFZpZXcg44GuIDHooYzliIbjgpLmp4vmiJDjgZnjgosgQ2hpbGQgVmlldyDjgqTjg7Pjgr/jg7zjg5XjgqfjgqTjgrlcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJTGlzdEl0ZW1WaWV3IHtcclxuICAgICAgICAvLyEg6Ieq6Lqr44GuIExpbmUg44Kk44Oz44OH44OD44Kv44K544KS5Y+W5b6XXHJcbiAgICAgICAgZ2V0SW5kZXgoKTogbnVtYmVyO1xyXG4gICAgICAgIC8vISDoh6rouqvjgavmjIflrprjgZXjgozjgZ/pq5jjgZXjgpLlj5blvpdcclxuICAgICAgICBnZXRTcGVjaWZpZWRIZWlnaHQoKTogbnVtYmVyO1xyXG4gICAgICAgIC8vISBjaGlsZCBub2RlIOOBjOWtmOWcqOOBmeOCi+OBi+WIpOWumlxyXG4gICAgICAgIGhhc0NoaWxkTm9kZSgpOiBib29sZWFuO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDpq5jjgZXjgpLmm7TmlrBcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBuZXdIZWlnaHQge051bWJlcn0gICAgICAgICAgICAgIFtpbl0g5paw44GX44GE6auY44GVXHJcbiAgICAgICAgICogQHBhcmFtIG9wdGlvbnMgICB7VXBkYXRlSGVpZ2h0T3B0aW9uc30gW2luXSBsaW5lIOOBrumrmOOBleabtOaWsOaZguOBq+W9semfv+OBmeOCi+OBmeOBueOBpuOBriBMaW5lUHJvZmlsZSDjga7lho3oqIjnrpfjgpLooYzjgYbloLTlkIjjga8geyByZWZsZWN0QWxsOiB0cnVlIH1cclxuICAgICAgICAgKiBAcmV0dXJuIHtJTGlzdEl0ZW1WaWV3fSDjgqTjg7Pjgrnjgr/jg7PjgrlcclxuICAgICAgICAgKi9cclxuICAgICAgICB1cGRhdGVIZWlnaHQobmV3SGVpZ2h0OiBudW1iZXIsIG9wdGlvbnM/OiBVcGRhdGVIZWlnaHRPcHRpb25zKTogSUxpc3RJdGVtVmlldztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBpbnRlcmZhY2UgQmFzZUxpc3RJdGVtVmlld1xyXG4gICAgICogQGJyaWVmICAgICBJTGlzdEl0ZW1WaWV3IOOBriBhbGlhc1xyXG4gICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIEJhc2VMaXN0SXRlbVZpZXcgZXh0ZW5kcyBJTGlzdEl0ZW1WaWV3LCBCYWNrYm9uZS5WaWV3PEJhY2tib25lLk1vZGVsPiB7IH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBpbnRlcmZhY2UgRW5zdXJlVmlzaWJsZU9wdGlvbnNcclxuICAgICAqIEBicmllZiBJTGlzdFZpZXcuZW5zdXJlVmlzaWJsZSgpIOOBq+a4oeOBm+OCi+OCquODl+OCt+ODp+ODs1xyXG4gICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIEVuc3VyZVZpc2libGVPcHRpb25zIHtcclxuICAgICAgICBwYXJ0aWFsT0s/OiBib29sZWFuOyAgICAvLyE8IOmDqOWIhueahOihqOekuuOCkuioseWPr+OBmeOCi+WgtOWQiCB0cnVlLCBkZWZhdWx0OiB0cnVlLlxyXG4gICAgICAgIHNldFRvcD86IGJvb2xlYW47ICAgICAgIC8vITwg5by35Yi255qE44Gr44K544Kv44Ot44O844Or6aCY5Z+f44Gu5LiK6YOo44Gr56e75YuV44GZ44KL5aC05ZCIIHRydWUsIGRlZmF1bHQ6IGZhbHNlLlxyXG4gICAgICAgIGFuaW1hdGU/OiBib29sZWFuOyAgICAgIC8vITwg44Ki44OL44Oh44O844K344On44Oz44GZ44KL5aC05ZCIIHRydWUuIGRlZmF1bHQ6IExpc3RWaWV3T3B0aW9ucy5lbmFibGVBbmltYXRpb24g44Gu6Kit5a6a44Go5ZCM5pyfXHJcbiAgICAgICAgdGltZT86IG51bWJlcjsgICAgICAgICAgLy8hPCDjgqLjg4vjg6Hjg7zjgrfjg6fjg7PjgavosrvjgoTjgZnmmYLplpMgW21zZWNdXHJcbiAgICAgICAgY2FsbGJhY2s/OiAoKSA9PiB2b2lkOyAgLy8hPCDjgqLjg4vjg6Hjg7zjgrfjg6fjg7PntYLkuobjga7jgr/jgqTjg5/jg7PjgrDjgafjgrPjg7zjg6vjgZXjgozjgosuICjnlpHkvLznmoQpXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAaW50ZXJmYWNlIElMaXN0Vmlld1xyXG4gICAgICogQGJyaWVmIExpc3RWaWV3IOOBruOCpOODs+OCv+ODvOODleOCp+OCpOOCuVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElMaXN0VmlldyBleHRlbmRzIElTY3JvbGxhYmxlLCBJQmFja3VwUmVzdG9yZSB7XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gUHJvZmlsZSDnrqHnkIZcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog5Yid5pyf5YyW5riI44G/44GL5Yik5a6aXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHtCb29sZWFufSB0cnVlOiDliJ3mnJ/ljJbmuIjjgb8gLyBmYWxzZTog5pyq5Yid5pyf5YyWXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgaXNJbml0aWFsaXplZCgpOiBib29sZWFuO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBJdGVtIOeZu+mMslxyXG4gICAgICAgICAqIOODl+ODreODkeODhuOCo+OCkuaMh+WumuOBl+OBpuOAgUxpc3RJdGVtIOOCkueuoeeQhlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGhlaWdodCAgICAgIHtOdW1iZXJ9ICAgW2luXSDjg6njgqTjg7Pjga7pq5jjgZVcclxuICAgICAgICAgKiBAcGFyYW0gaW5pdGlhbGl6ZXIge0Z1bmN0aW9ufSBbaW5dIExpc3RJdGVtVmlldyDmtL7nlJ/jgq/jg6njgrnjga7jgrPjg7Pjgrnjg4jjg6njgq/jgr9cclxuICAgICAgICAgKiBAcGFyYW0gaW5mbyAgICAgICAge09iamVjdH0gICBbaW5dIGluaXRpYWxpemVyIOOBq+a4oeOBleOCjOOCi+OCquODl+OCt+ODp+ODs+W8leaVsFxyXG4gICAgICAgICAqIEBwYXJhbSBpbnNlcnRUbyAgICB7TnVtYmVyfSAgIFtpbl0g44Op44Kk44Oz44Gu5oy/5YWl5L2N572u44KS44Kk44Oz44OH44OD44Kv44K544Gn5oyH5a6aXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgYWRkSXRlbShoZWlnaHQ6IG51bWJlciwgaW5pdGlhbGl6ZXI6IG5ldyAob3B0aW9ucz86IGFueSkgPT4gQmFzZUxpc3RJdGVtVmlldywgaW5mbzogYW55LCBpbnNlcnRUbz86IG51bWJlcik6IHZvaWQ7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOaMh+WumuOBl+OBnyBJdGVtIOOCkuWJiumZpFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGluZGV4IHtOdW1iZXJ8TnVtYmVyW119IFtpbl0g6Kej6Zmk6ZaL5aeL44Gu44Kk44Oz44OH44OD44Kv44K544KS5oyH5a6aLiDphY3liJfniYjjga8gcmV2ZXJzZSBpbmRleCDjgpLmjIflrprjgZnjgovjgbvjgYbjgYzlirnnjofnmoRcclxuICAgICAgICAgKiBAcGFyYW0gc2l6ZSAge051bWJlcn0gICAgICAgICAgW2luXSDop6PpmaTjgZnjgovjg6njgqTjg7Pjga7nt4/mlbAuIOaXouWumjogMVxyXG4gICAgICAgICAqIEBwYXJhbSBkZWxheSB7TnVtYmVyfSAgICAgICAgICBbaW5dIOWun+mam+OBq+imgee0oOOCkuWJiumZpOOBmeOCiyBkZWxheSB0aW1lIOaXouWumjogMCAo5Y2z5pmC5YmK6ZmkKVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHJlbW92ZUl0ZW0oaW5kZXg6IG51bWJlciwgc2l6ZT86IG51bWJlciwgZGVsYXk/OiBudW1iZXIpOiB2b2lkO1xyXG4gICAgICAgIHJlbW92ZUl0ZW0oaW5kZXg6IG51bWJlcltdLCBkZWxheT86IG51bWJlcik6IHZvaWQ7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOaMh+WumuOBl+OBnyBJdGVtIOOBq+ioreWumuOBl+OBn+aDheWgseOCkuWPluW+l1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHRhcmdldCB7TnVtYmVyfEpRdWVyeUV2ZW50T2JqZWN0fSBbaW5dIOitmOWIpeWtkC4gW2luZGV4IHwgZXZlbnQgb2JqZWN0XVxyXG4gICAgICAgICAqIEByZXR1cm4ge09iamVjdH0gX2FkZExpbmUoKSDjgavmjIflrprjgZfjgZ8gaW5mbyDjgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAgICAgKi9cclxuICAgICAgICBnZXRJdGVtSW5mbyh0YXJnZXQ6IG51bWJlcik6IGFueTtcclxuICAgICAgICBnZXRJdGVtSW5mbyh0YXJnZXQ6IEpRdWVyeUV2ZW50T2JqZWN0KTogYW55O1xyXG5cclxuICAgICAgICAvLyEg44Ki44Kv44OG44Kj44OW44Oa44O844K444KS5pu05pawXHJcbiAgICAgICAgcmVmcmVzaCgpOiB2b2lkO1xyXG4gICAgICAgIC8vISDmnKrjgqLjgrXjgqTjg7Pjg5rjg7zjgrjjgpLmp4vnr4lcclxuICAgICAgICB1cGRhdGUoKTogdm9pZDtcclxuICAgICAgICAvLyEg44Oa44O844K444Ki44K144Kk44Oz44KS5YaN5qeL5oiQXHJcbiAgICAgICAgcmVidWlsZCgpOiB2b2lkO1xyXG4gICAgICAgIC8vISDnrqHovYTjg4fjg7zjgr/jgpLnoLTmo4RcclxuICAgICAgICByZWxlYXNlKCk6IHZvaWQ7XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gUHJvcGVydGllczpcclxuXHJcbiAgICAgICAgLy8hIGNvcmUgZnJhbWV3b3JrIGFjY2Vzc1xyXG4gICAgICAgIGNvcmU6IElMaXN0Vmlld0ZyYW1ld29yaztcclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAaW50ZXJmYWNlIEJhc2VMaXN0Vmlld1xyXG4gICAgICogQGJyaWVmICAgICBJTGlzdFZpZXcg44GuIGFsaWFzXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgQmFzZUxpc3RWaWV3IGV4dGVuZHMgSUxpc3RWaWV3LCBCYWNrYm9uZS5WaWV3PEJhY2tib25lLk1vZGVsPiB7IH1cclxuXHJcbiAgICAvL19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18vL1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGludGVyZmFjZSBJU3RhdHVzTWFuYWdlclxyXG4gICAgICogQGJyaWVmIOeKtuaFi+euoeeQhuOCpOODs+OCv+ODvOODleOCp+OCpOOCuVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElTdGF0dXNNYW5hZ2VyIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDnirbmhYvlpInmlbDjga7lj4Lnhafjgqvjgqbjg7Pjg4jjga7jgqTjg7Pjgq/jg6rjg6Hjg7Pjg4hcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBzdGF0dXMge1N0cmluZ30gW2luXSDnirbmhYvorZjliKXlrZBcclxuICAgICAgICAgKi9cclxuICAgICAgICBzdGF0dXNBZGRSZWYoc3RhdHVzOiBzdHJpbmcpOiBudW1iZXI7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOeKtuaFi+WkieaVsOOBruWPgueFp+OCq+OCpuODs+ODiOOBruODh+OCr+ODquODoeODs+ODiFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHN0YXR1cyB7U3RyaW5nfSBbaW5dIOeKtuaFi+itmOWIpeWtkFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHN0YXR1c1JlbGVhc2Uoc3RhdHVzOiBzdHJpbmcpOiBudW1iZXI7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOWHpueQhuOCueOCs+ODvOODl+avjuOBq+eKtuaFi+WkieaVsOOCkuioreWumlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHN0YXR1cyAgIHtTdHJpbmd9ICAgW2luXSDnirbmhYvorZjliKXlrZBcclxuICAgICAgICAgKiBAcGFyYW0gY2FsbGJhY2sge0Z1bmN0aW9ufSBbaW5dIOWHpueQhuOCs+ODvOODq+ODkOODg+OCr1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHN0YXR1c1Njb3BlKHN0YXR1czogc3RyaW5nLCBjYWxsYmFjazogKCkgPT4gdm9pZCk6IHZvaWQ7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOaMh+WumuOBl+OBn+eKtuaFi+S4reOBp+OBguOCi+OBi+eiuuiqjVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHN0YXR1cyB7U3RyaW5nfSAgIFtpbl0g54q25oWL6K2Y5Yil5a2QXHJcbiAgICAgICAgICogQHJldHVybiB7Qm9vbGVhbn0gdHJ1ZTog54q25oWL5YaFIC8gZmFsc2U6IOeKtuaFi+WkllxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGlzU3RhdHVzSW4oc3RhdHVzOiBzdHJpbmcpOiBib29sZWFuO1xyXG4gICAgfVxyXG5cclxuICAgIC8vX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXy8vXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAaW50ZXJmYWNlIElFeHBhbmRNYW5hZ2VyXHJcbiAgICAgKiBAYnJpZWYg6ZaL6ZaJ566h55CG44Kk44Oz44K/44O844OV44Kn44Kk44K5XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSUV4cGFuZE1hbmFnZXIgZXh0ZW5kcyBJQmFja3VwUmVzdG9yZSwgSVN0YXR1c01hbmFnZXIge1xyXG4gICAgICAgIGxheW91dEtleTogc3RyaW5nOyAgICAvLyBsYXlvdXQga2V5IChwb3J0cmF0ZS9sYW5kc2NhcGXjgZTjgajjgasgbGF5b3V05oOF5aCx44Gr44Ki44Kv44K744K5KVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDmlrDopo8gR3JvdXBQcm9maWxlIOOCkuS9nOaIkFxyXG4gICAgICAgICAqIOeZu+mMsua4iOOBv+OBruWgtOWQiOOBr+OBneOBruOCquODluOCuOOCp+OCr+ODiOOCkui/lOWNtFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcm1hIGlkIHtTdHJpbmd9IFtpbl0g5paw6KaP44Gr5L2c5oiQ44GZ44KLIEdyb3VwIElEIOOCkuaMh+Wumi4g5oyH5a6a44GX44Gq44GE5aC05ZCI44Gv6Ieq5YuV5Ymy44KK5oyv44KKXHJcbiAgICAgICAgICogQHJldHVybiB7R3JvdXBQcm9maWxlfSBHcm91cFByb2ZpbGUg44Kk44Oz44K544K/44Oz44K5XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgbmV3R3JvdXAoaWQ/OiBzdHJpbmcpOiBHcm91cFByb2ZpbGU7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOeZu+mMsua4iOOBvyBHcm91cCDjgpLlj5blvpdcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJtYSBpZCB7U3RyaW5nfSBbaW5dIOWPluW+l+OBmeOCiyBHcm91cCBJRCDjgpLmjIflrppcclxuICAgICAgICAgKiBAcmV0dXJuIHtHcm91cFByb2ZpbGV9IEdyb3VwUHJvZmlsZSDjgqTjg7Pjgrnjgr/jg7PjgrkgLyBudWxsXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZ2V0R3JvdXAoaWQ6IHN0cmluZyk6IEdyb3VwUHJvZmlsZTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog56ysMemajuWxpOOBriBHcm91cCDnmbvpjLJcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB0b3BHcm91cCB7R3JvdXBQcm9maWxlfSBbaW5dIOani+eviea4iOOBvyBHcm91cFByb2ZpbGUg44Kk44Oz44K544K/44Oz44K5XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcmVnaXN0ZXJUb3BHcm91cCh0b3BHcm91cDogR3JvdXBQcm9maWxlKTogdm9pZDtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog56ysMemajuWxpOOBriBHcm91cCDjgpLlj5blvpdcclxuICAgICAgICAgKiDjgrPjg5Tjg7zphY3liJfjgYzov5TjgZXjgozjgovjgZ/jgoHjgIHjgq/jg6njgqTjgqLjg7Pjg4jjga/jgq3jg6Pjg4Pjgrfjg6XkuI3lj69cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge0dyb3VwUHJvZmlsZVtdfSBHcm91cFByb2ZpbGUg6YWN5YiXXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZ2V0VG9wR3JvdXBzKCk6IEdyb3VwUHJvZmlsZVtdO1xyXG5cclxuICAgICAgICAvLyEg44GZ44G544Gm44Gu44Kw44Or44O844OX44KS5bGV6ZaLICgx6ZqO5bGkKVxyXG4gICAgICAgIGV4cGFuZEFsbCgpOiB2b2lkO1xyXG5cclxuICAgICAgICAvLyEg44GZ44G544Gm44Gu44Kw44Or44O844OX44KS5Y+O5p2fICgx6ZqO5bGkKVxyXG4gICAgICAgIGNvbGxhcHNlQWxsKGRlbGF5PzogbnVtYmVyKTogdm9pZDtcclxuXHJcbiAgICAgICAgLy8hIOWxlemWi+S4reOBi+WIpOWumlxyXG4gICAgICAgIGlzRXhwYW5kaW5nKCk6IGJvb2xlYW47XHJcblxyXG4gICAgICAgIC8vISDlj47mnZ/kuK3jgYvliKTlrppcclxuICAgICAgICBpc0NvbGxhcHNpbmcoKTogYm9vbGVhbjtcclxuXHJcbiAgICAgICAgLy8hIOmWi+mWieS4reOBi+WIpOWumlxyXG4gICAgICAgIGlzU3dpdGNoaW5nKCk6IGJvb2xlYW47XHJcbiAgICB9XHJcblxyXG4gICAgLy9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fLy9cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBpbnRlcmZhY2UgRXhwYW5kYWJsZUxpc3RWaWV3XHJcbiAgICAgKiBAYnJpZWYg6ZaL6ZaJ44Oq44K544OI44OT44Ol44O844Kk44Oz44K/44O844OV44Kn44Kk44K5XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSUV4cGFuZGFibGVMaXN0VmlldyBleHRlbmRzIElMaXN0VmlldywgSUV4cGFuZE1hbmFnZXIgeyB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAaW50ZXJmYWNlIEJhc2VFeHBhbmRhYmxlTGlzdFZpZXdcclxuICAgICAqIEBicmllZiAgICAgSUV4cGFuZGFibGVMaXN0VmlldyDjga4gYWxpYXNcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBCYXNlRXhwYW5kYWJsZUxpc3RWaWV3IGV4dGVuZHMgSUV4cGFuZGFibGVMaXN0VmlldywgQmFja2JvbmUuVmlldzxCYWNrYm9uZS5Nb2RlbD4geyB9XHJcbn1cclxuXHJcbmRlY2xhcmUgbW9kdWxlIFwiY2RwLnVpLmxpc3R2aWV3XCIge1xyXG4gICAgbGV0IFVJOiB0eXBlb2YgQ0RQLlVJO1xyXG4gICAgZXhwb3J0ID0gVUk7XHJcbn1cclxuIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIkludGVyZmFjZXMudHNcIiAvPlxyXG5cclxubmFtZXNwYWNlIENEUC5VSSB7XHJcblxyXG4gICAgLy8gY2RwLnVpLmxpc3R2aWV3IOOBryBjZHAuY29yZSDjgavkvp3lrZjjgZfjgarjgYTjgZ/jgoHjgIHni6zoh6rjgatnbG9iYWwg44KS5o+Q5L6b44GZ44KLXHJcbiAgICBleHBvcnQgdmFyIGdsb2JhbCA9ICg8YW55PkNEUCkuZ2xvYmFsIHx8IHdpbmRvdztcclxuXHJcbiAgICAvKipcclxuICAgICAqIEJhY2tib25lLlZpZXcg44Gu5paw6KaP5ZCI5oiQXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGJhc2UgICAge0JhY2tib25lLlZpZXd9ICAgICAgICAgICAgICAgICBbaW5dIHByb3RvdHlwZSBjaGFpbiDmnIDkuIvkvY3jga4gVmlldyDjgq/jg6njgrlcclxuICAgICAqIEBwYXJhbSBkZXJpdmVzIHtCYWNrYm9uZS5WaWV3fEJhY2tib25lLlZpZXdbXX0gW2luXSDmtL7nlJ/jgZXjgozjgovjga4gVmlldyDjgq/jg6njgrlcclxuICAgICAqIEByZXR1cm4ge0JhY2tib25lLlZpZXd8QmFja2JvbmUuVmlld1tdfSDmlrDopo/jgavnlJ/miJDjgZXjgozjgZ8gVmlldyDjga7jgrPjg7Pjgrnjg4jjg6njgq/jgr9cclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGNvbXBvc2VWaWV3cyhiYXNlOiBWaWV3Q29uc3RydWN0b3IsIGRlcml2ZXM6IFZpZXdDb25zdHJ1Y3RvciB8IFZpZXdDb25zdHJ1Y3RvcltdKTogVmlld0NvbnN0cnVjdG9yIHtcclxuICAgICAgICBsZXQgX2NvbXBvc2VkID0gYmFzZTtcclxuICAgICAgICBsZXQgX2Rlcml2ZXMgPSA8Vmlld0NvbnN0cnVjdG9yW10+KGRlcml2ZXMgaW5zdGFuY2VvZiBBcnJheSA/IGRlcml2ZXMgOiBbZGVyaXZlc10pO1xyXG4gICAgICAgIF9kZXJpdmVzLmZvckVhY2goKGRlcml2ZSkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgc2VlZCA9IHt9O1xyXG4gICAgICAgICAgICBfLmV4dGVuZE93bihzZWVkLCBkZXJpdmUucHJvdG90eXBlKTtcclxuICAgICAgICAgICAgZGVsZXRlIHNlZWQuY29uc3RydWN0b3I7XHJcbiAgICAgICAgICAgIF9jb21wb3NlZCA9ICg8YW55Pl9jb21wb3NlZCkuZXh0ZW5kKHNlZWQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBfY29tcG9zZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBCYWNrYm9uZS5WaWV3IOOBruWQiOaIkFxyXG4gICAgICogcHJvdG90eXBlIGNoYWluIOOCkuS9nOOCi+WQiOaIkFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBkZXJpdmVkIHtCYWNrYm9uZS5WaWV3fSAgICAgICAgICAgICAgICAgW2luXSBwcm90b3R5cGUgY2hhaW4g5pyA5LiK5L2N44GuIFZpZXcg44Kv44Op44K5XHJcbiAgICAgKiBAcGFyYW0gYmFzZXMgICB7QmFja2JvbmUuVmlld3xCYWNrYm9uZS5WaWV3W119IFtpbl0g5ZCI5oiQ5YWD44GuVmlldyDjgq/jg6njgrlcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGRlcml2ZVZpZXdzKGRlcml2ZWQ6IFZpZXdDb25zdHJ1Y3RvciwgYmFzZXM6IFZpZXdDb25zdHJ1Y3RvciB8IFZpZXdDb25zdHJ1Y3RvcltdKTogdm9pZCB7XHJcbiAgICAgICAgbGV0IF9jb21wb3NlZDogVmlld0NvbnN0cnVjdG9yO1xyXG4gICAgICAgIGxldCBfYmFzZXMgPSA8Vmlld0NvbnN0cnVjdG9yW10+KGJhc2VzIGluc3RhbmNlb2YgQXJyYXkgPyBiYXNlcyA6IFtiYXNlc10pO1xyXG4gICAgICAgIGlmICgyIDw9IF9iYXNlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgX2NvbXBvc2VkID0gY29tcG9zZVZpZXdzKF9iYXNlc1swXSwgX2Jhc2VzLnNsaWNlKDEpKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBfY29tcG9zZWQgPSBfYmFzZXNbMF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRlcml2ZWQgPSBjb21wb3NlVmlld3MoX2NvbXBvc2VkLCBkZXJpdmVkKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEJhY2tib25lLlZpZXcg44Gu5ZCI5oiQXHJcbiAgICAgKiBwcm90b3R5cGUgY2hhaW4g44KS5L2c44KJ44Gq44GE5ZCI5oiQXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGRlcml2ZWQge0JhY2tib25lLlZpZXd9ICAgICAgICAgICAgICAgICBbaW5dIOWFg+OBqOOBquOCiyBWaWV3IOOCr+ODqeOCuVxyXG4gICAgICogQHBhcmFtIGJhc2VzICAge0JhY2tib25lLlZpZXd8QmFja2JvbmUuVmlld1tdfSBbaW5dIOWQiOaIkOWFg+OBrlZpZXcg44Kv44Op44K5XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBtaXhpblZpZXdzKGRlcml2ZWQ6IFZpZXdDb25zdHJ1Y3RvciwgYmFzZXM6IFZpZXdDb25zdHJ1Y3RvciB8IFZpZXdDb25zdHJ1Y3RvcltdKTogdm9pZCB7XHJcbiAgICAgICAgbGV0IF9iYXNlcyA9IDxWaWV3Q29uc3RydWN0b3JbXT4oYmFzZXMgaW5zdGFuY2VvZiBBcnJheSA/IGJhc2VzIDogW2Jhc2VzXSk7XHJcbiAgICAgICAgX2Jhc2VzLmZvckVhY2goKGJhc2UpID0+IHtcclxuICAgICAgICAgICAgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYmFzZS5wcm90b3R5cGUpLmZvckVhY2gobmFtZSA9PiB7XHJcbiAgICAgICAgICAgICAgICBkZXJpdmVkLnByb3RvdHlwZVtuYW1lXSA9IGJhc2UucHJvdG90eXBlW25hbWVdO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvL19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18vL1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGNsYXNzIF9MaXN0Vmlld1V0aWxzXHJcbiAgICAgKiBAYnJpZWYg5YaF6YOo44Gn5L2/55So44GZ44KL5L6/5Yip6Zai5pWwXHJcbiAgICAgKiAgICAgICAgVG9vbHMg44GL44KJ44Gu5pyA5L2O6ZmQ44Gu5rWB55SoXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBtb2R1bGUgX0xpc3RWaWV3VXRpbHMge1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBjc3Mg44GuIHZlbmRlciDmi6HlvLUgcHJlZml4IOOCkui/lOOBmVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7QXJyYXl9IHByZWZpeFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGV4cG9ydCBsZXQgY3NzUHJlZml4ZXMgPSBbXCItd2Via2l0LVwiLCBcIi1tb3otXCIsIFwiLW1zLVwiLCBcIi1vLVwiLCBcIlwiXTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogY3NzIOOBriBtYXRyaXgg44Gu5YCk44KS5Y+W5b6XLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGVsZW1lbnQge2pRdWVyeX0gW2luXSDlr77osaHjga4galF1ZXJ5IOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICAgICAqIEBwYXJhbSB0eXBlICAgIHtTdHJpbmd9IFtpbl0gbWF0cml4IHR5cGUgc3RyaW5nIFt0cmFuc2xhdGVYIHwgdHJhbnNsYXRlWSB8IHNjYWxlWCB8IHNjYWxlWV1cclxuICAgICAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9IHZhbHVlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZXhwb3J0IGxldCBnZXRDc3NNYXRyaXhWYWx1ZSA9IChlbGVtZW50OiBKUXVlcnksIHR5cGU6IHN0cmluZyk6IG51bWJlciA9PiB7XHJcbiAgICAgICAgICAgIGxldCB0cmFuc1ggPSAwO1xyXG4gICAgICAgICAgICBsZXQgdHJhbnNZID0gMDtcclxuICAgICAgICAgICAgbGV0IHNjYWxlWCA9IDA7XHJcbiAgICAgICAgICAgIGxldCBzY2FsZVkgPSAwO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNzc1ByZWZpeGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgbWF0cml4ID0gJChlbGVtZW50KS5jc3MoY3NzUHJlZml4ZXNbaV0gKyBcInRyYW5zZm9ybVwiKTtcclxuICAgICAgICAgICAgICAgIGlmIChtYXRyaXgpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgaXMzZE1hdHJpeCA9IG1hdHJpeC5pbmRleE9mKFwiM2RcIikgIT09IC0xID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIG1hdHJpeCA9IG1hdHJpeC5yZXBsYWNlKFwibWF0cml4M2RcIiwgXCJcIikucmVwbGFjZShcIm1hdHJpeFwiLCBcIlwiKS5yZXBsYWNlKC9bXlxcZC4sLV0vZywgXCJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGFyciA9IG1hdHJpeC5zcGxpdChcIixcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNYID0gTnVtYmVyKGFycltpczNkTWF0cml4ID8gMTIgOiA0XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNZID0gTnVtYmVyKGFycltpczNkTWF0cml4ID8gMTMgOiA1XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2NhbGVYID0gTnVtYmVyKGFyclswXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2NhbGVZID0gTnVtYmVyKGFycltpczNkTWF0cml4ID8gNSA6IDNdKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJ0cmFuc2xhdGVYXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlzTmFOKHRyYW5zWCkgPyAwIDogdHJhbnNYO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcInRyYW5zbGF0ZVlcIjpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXNOYU4odHJhbnNZKSA/IDAgOiB0cmFuc1k7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwic2NhbGVYXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlzTmFOKHNjYWxlWCkgPyAxIDogc2NhbGVYO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcInNjYWxlWVwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpc05hTihzY2FsZVkpID8gMSA6IHNjYWxlWTtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcInRyYW5zaXRpb25lbmRcIiDjga7jgqTjg5njg7Pjg4jlkI3phY3liJfjgpLov5TjgZlcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge0FycmF5fSB0cmFuc2l0aW9uZW5kIOOCpOODmeODs+ODiOWQjVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGV4cG9ydCBsZXQgdHJhbnNpdGlvbkVuZCA9IFwidHJhbnNpdGlvbmVuZCB3ZWJraXRUcmFuc2l0aW9uRW5kIG9UcmFuc2l0aW9uRW5kIE1TVHJhbnNpdGlvbkVuZFwiO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiB0cmFuc2l0aW9uIOioreWumlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gZWxlbWVudFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGV4cG9ydCBsZXQgc2V0VHJhbnNmb3Jtc1RyYW5zaXRpb25zID0gKGVsZW1lbnQ6IEpRdWVyeSwgcHJvcDogc3RyaW5nLCBtc2VjOiBudW1iZXIsIHRpbWluZ0Z1bmN0aW9uOiBzdHJpbmcpOiB2b2lkID0+IHtcclxuICAgICAgICAgICAgbGV0ICRlbGVtZW50ID0gJChlbGVtZW50KTtcclxuICAgICAgICAgICAgbGV0IHRyYW5zaXRpb25zID0ge307XHJcbiAgICAgICAgICAgIGxldCBzZWNvbmQgPSAobXNlYyAvIDEwMDApICsgXCJzXCI7XHJcbiAgICAgICAgICAgIGxldCBhbmltYXRpb24gPSBcIiBcIiArIHNlY29uZCArIFwiIFwiICsgdGltaW5nRnVuY3Rpb247XHJcbiAgICAgICAgICAgIGxldCB0cmFuc2Zvcm0gPSBcIiwgdHJhbnNmb3JtXCIgKyBhbmltYXRpb247XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNzc1ByZWZpeGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uc1tjc3NQcmVmaXhlc1tpXSArIFwidHJhbnNpdGlvblwiXSA9IHByb3AgKyBhbmltYXRpb24gKyB0cmFuc2Zvcm07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICRlbGVtZW50LmNzcyh0cmFuc2l0aW9ucyk7XHJcbiAgICAgICAgfTtcclxuXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIHRyYW5zaXRpb24g6Kit5a6a44Gu5YmK6ZmkXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBlbGVtZW50XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZXhwb3J0IGxldCBjbGVhclRyYW5zaXRpb25zID0gKGVsZW1lbnQ6IEpRdWVyeSk6IHZvaWQgPT4ge1xyXG4gICAgICAgICAgICBsZXQgJGVsZW1lbnQgPSAkKGVsZW1lbnQpO1xyXG5cclxuICAgICAgICAgICAgJGVsZW1lbnQub2ZmKHRyYW5zaXRpb25FbmQpO1xyXG4gICAgICAgICAgICBsZXQgdHJhbnNpdGlvbnMgPSB7fTtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjc3NQcmVmaXhlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvbnNbY3NzUHJlZml4ZXNbaV0gKyBcInRyYW5zaXRpb25cIl0gPSBcIlwiO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAkZWxlbWVudC5jc3ModHJhbnNpdGlvbnMpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIE1hdGguYWJzIOOCiOOCiuOCgumrmOmAn+OBqiBhYnNcclxuICAgICAgICAgKi9cclxuICAgICAgICBleHBvcnQgbGV0IGFicyA9ICh4OiBudW1iZXIpOiBudW1iZXIgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4geCA+PSAwID8geCA6IC14O1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIE1hdGgubWF4IOOCiOOCiuOCgumrmOmAn+OBqiBtYXhcclxuICAgICAgICAgKi9cclxuICAgICAgICBleHBvcnQgbGV0IG1heCA9IChsaHM6IG51bWJlciwgcmhzOiBudW1iZXIpOiBudW1iZXIgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gbGhzID49IHJocyA/IGxocyA6IHJocztcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59XHJcbiIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJJbnRlcmZhY2VzLnRzXCIgLz5cclxuXHJcbm5hbWVzcGFjZSBDRFAuVUkge1xyXG5cclxuICAgIGNvbnN0IFRBRyA9IFwiW0NEUC5VSS5TdGF0dXNNYW5hZ2VyXSBcIjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBjbGFzcyBTdGF0dXNNYW5hZ2VyXHJcbiAgICAgKiBAYnJpZWYgVUkg55So54q25oWL566h55CG44Kv44Op44K5XHJcbiAgICAgKiAgICAgICAgU3RhdHVzTWFuYWdlciDjga7jgqTjg7Pjgrnjgr/jg7PjgrnjgZTjgajjgavku7vmhI/jga7nirbmhYvnrqHnkIbjgYzjgafjgY3jgotcclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBjbGFzcyBTdGF0dXNNYW5hZ2VyIGltcGxlbWVudHMgSVN0YXR1c01hbmFnZXIge1xyXG5cclxuICAgICAgICBwcml2YXRlIF9zdGF0dXM6IGFueSA9IHt9OyAgICAvLyE8IHN0YXR1c1Njb3BlKCkg44Gr5L2/55So44GV44KM44KL54q25oWL566h55CG44Kq44OW44K444Kn44Kv44OIXHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gSW1wbGVtZW50czogSVN0YXR1c01hbmFnZXJcclxuXHJcbiAgICAgICAgLy8hIOeKtuaFi+WkieaVsOOBruWPgueFp+OCq+OCpuODs+ODiOOBruOCpOODs+OCr+ODquODoeODs+ODiFxyXG4gICAgICAgIHB1YmxpYyBzdGF0dXNBZGRSZWYoc3RhdHVzOiBzdHJpbmcpOiBudW1iZXIge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuX3N0YXR1c1tzdGF0dXNdKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zdGF0dXNbc3RhdHVzXSA9IDE7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zdGF0dXNbc3RhdHVzXSsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zdGF0dXNbc3RhdHVzXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDnirbmhYvlpInmlbDjga7lj4Lnhafjgqvjgqbjg7Pjg4jjga7jg4fjgq/jg6rjg6Hjg7Pjg4hcclxuICAgICAgICBwdWJsaWMgc3RhdHVzUmVsZWFzZShzdGF0dXM6IHN0cmluZyk6IG51bWJlciB7XHJcbiAgICAgICAgICAgIGxldCByZXR2YWw6IG51bWJlcjtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLl9zdGF0dXNbc3RhdHVzXSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dmFsID0gMDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3N0YXR1c1tzdGF0dXNdLS07XHJcbiAgICAgICAgICAgICAgICByZXR2YWwgPSB0aGlzLl9zdGF0dXNbc3RhdHVzXTtcclxuICAgICAgICAgICAgICAgIGlmICgwID09PSByZXR2YWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5fc3RhdHVzW3N0YXR1c107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHJldHZhbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDlh6bnkIbjgrnjgrPjg7zjg5fmr47jgavnirbmhYvlpInmlbDjgpLoqK3lrppcclxuICAgICAgICBwdWJsaWMgc3RhdHVzU2NvcGUoc3RhdHVzOiBzdHJpbmcsIGNhbGxiYWNrOiAoKSA9PiB2b2lkIHwgSlF1ZXJ5UHJvbWlzZTxhbnk+KTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhdHVzQWRkUmVmKHN0YXR1cyk7XHJcbiAgICAgICAgICAgIGxldCBwcm9taXNlID0gY2FsbGJhY2soKTtcclxuICAgICAgICAgICAgaWYgKCFwcm9taXNlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXR1c1JlbGVhc2Uoc3RhdHVzKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHByb21pc2UuYWx3YXlzKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXR1c1JlbGVhc2Uoc3RhdHVzKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg5oyH5a6a44GX44Gf54q25oWL5Lit44Gn44GC44KL44GL56K66KqNXHJcbiAgICAgICAgcHVibGljIGlzU3RhdHVzSW4oc3RhdHVzOiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgcmV0dXJuICEhdGhpcy5fc3RhdHVzW3N0YXR1c107XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJMaW5lUHJvZmlsZS50c1wiIC8+XHJcblxyXG5uYW1lc3BhY2UgQ0RQLlVJIHtcclxuXHJcbiAgICBjb25zdCBUQUcgPSBcIltDRFAuVUkuUGFnZVByb2ZpbGVdIFwiO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGNsYXNzIFBhZ2VQcm9maWxlXHJcbiAgICAgKiBAYnJpZWYgMSDjg5rjg7zjgrjjgavplqLjgZnjgovjg5fjg63jg5XjgqHjgqTjg6vjgq/jg6njgrlcclxuICAgICAqICAgICAgICBmcmFtZXdvcmsg44GM5L2/55So44GZ44KLXHJcbiAgICAgKiAgICAgICAg5pys44Kv44Op44K544Gn44Gv55u05o6lIERPTSDjgpLmk43kvZzjgZfjgabjga/jgYTjgZHjgarjgYRcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGNsYXNzIFBhZ2VQcm9maWxlIHtcclxuICAgICAgICBwcml2YXRlIF9pbmRleDogbnVtYmVyID0gMDsgICAgICAgICAgICAgLy8hPCBwYWdlIGluZGV4XHJcbiAgICAgICAgcHJpdmF0ZSBfb2Zmc2V0OiBudW1iZXIgPSAwOyAgICAgICAgICAgIC8vITwgcGFnZSDjga4gVG9wIOOBi+OCieOBruOCquODleOCu+ODg+ODiFxyXG4gICAgICAgIHByaXZhdGUgX2hlaWdodDogbnVtYmVyID0gMDsgICAgICAgICAgICAvLyE8IHBhZ2Ug44Gu6auY44GVXHJcbiAgICAgICAgcHJpdmF0ZSBfbGluZXM6IExpbmVQcm9maWxlW10gPSBbXTsgICAgIC8vITwgcGFnZSDlhoXjgafnrqHnkIbjgZXjgozjgosgTGluZVByb2ZpbGVcclxuICAgICAgICBwcml2YXRlIF9zdGF0dXM6IHN0cmluZyA9IFwiaW5hY3RpdmVcIjsgICAvLyE8IHBhZ2Ug44Gu54q25oWLIFsgaW5hY3RpdmUgfCBoaWRkZW4gfCBhY3RpdmUgXVxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIHB1YmxpYyBtZXRob2RzXHJcblxyXG4gICAgICAgIC8vISDmnInlirnljJZcclxuICAgICAgICBwdWJsaWMgYWN0aXZhdGUoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmIChcImFjdGl2ZVwiICE9PSB0aGlzLl9zdGF0dXMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2xpbmVzLmZvckVhY2goKGxpbmU6IExpbmVQcm9maWxlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGluZS5hY3RpdmF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5fc3RhdHVzID0gXCJhY3RpdmVcIjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDnhKHlj6/oppbljJZcclxuICAgICAgICBwdWJsaWMgaGlkZSgpOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKFwiaGlkZGVuXCIgIT09IHRoaXMuX3N0YXR1cykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbGluZXMuZm9yRWFjaCgobGluZTogTGluZVByb2ZpbGUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBsaW5lLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuX3N0YXR1cyA9IFwiaGlkZGVuXCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg54Sh5Yq55YyWXHJcbiAgICAgICAgcHVibGljIGluYWN0aXZhdGUoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmIChcImluYWN0aXZlXCIgIT09IHRoaXMuX3N0YXR1cykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbGluZXMuZm9yRWFjaCgobGluZTogTGluZVByb2ZpbGUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBsaW5lLmluYWN0aXZhdGUoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuX3N0YXR1cyA9IFwiaW5hY3RpdmVcIjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISBMaW5lUHJvZmlsZSDjgpLoqK3lrppcclxuICAgICAgICBwdWJsaWMgcHVzaChsaW5lOiBMaW5lUHJvZmlsZSk6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLl9saW5lcy5wdXNoKGxpbmUpO1xyXG4gICAgICAgICAgICB0aGlzLl9oZWlnaHQgKz0gbGluZS5oZWlnaHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg6YWN5LiL44GuIExpbmVQcm9maWxlIOOBmeOBueOBpuOBjOacieWKueOBp+OBquOBhOWgtOWQiOOAgVBhZ2Ug44K544OG44O844K/44K544KS54Sh5Yq544Gr44GZ44KLXHJcbiAgICAgICAgcHVibGljIG5vcm1hbGl6ZSgpOiB2b2lkIHtcclxuICAgICAgICAgICAgbGV0IGVuYWJsZUFsbCA9IF8uZXZlcnkodGhpcy5fbGluZXMsIChsaW5lOiBMaW5lUHJvZmlsZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGxpbmUuaXNBY3RpdmUoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmICghZW5hYmxlQWxsKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zdGF0dXMgPSBcImluYWN0aXZlXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISBMaW5lUHJvZmlsZSDjgpLlj5blvpdcclxuICAgICAgICBwdWJsaWMgZ2V0TGluZVByb2ZpbGUoaW5kZXg6IG51bWJlcik6IExpbmVQcm9maWxlIHtcclxuICAgICAgICAgICAgaWYgKDAgPD0gaW5kZXggJiYgaW5kZXggPCB0aGlzLl9saW5lcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9saW5lc1tpbmRleF07XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOacgOWIneOBriBMaW5lUHJvZmlsZSDjgpLlj5blvpdcclxuICAgICAgICBwdWJsaWMgZ2V0TGluZVByb2ZpbGVGaXJzdCgpOiBMaW5lUHJvZmlsZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldExpbmVQcm9maWxlKDApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOacgOW+jOOBriBMaW5lUHJvZmlsZSDjgpLlj5blvpdcclxuICAgICAgICBwdWJsaWMgZ2V0TGluZVByb2ZpbGVMYXN0KCk6IExpbmVQcm9maWxlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TGluZVByb2ZpbGUodGhpcy5fbGluZXMubGVuZ3RoIC0gMSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIGdldHRlci9zZXR0ZXIgbWV0aG9kc1xyXG5cclxuICAgICAgICAvLyEgZ2V0dGVyOiBwYWdlIGluZGV4XHJcbiAgICAgICAgcHVibGljIGdldCBpbmRleCgpOiBudW1iZXIge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5faW5kZXg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgc2V0dGVyOiBwYWdlIGluZGV4XHJcbiAgICAgICAgcHVibGljIHNldCBpbmRleChpbmRleDogbnVtYmVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2luZGV4ID0gaW5kZXg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgZ2V0dGVyOiBwYWdlIG9mZnNldFxyXG4gICAgICAgIHB1YmxpYyBnZXQgb2Zmc2V0KCk6IG51bWJlciB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9vZmZzZXQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgc2V0dGVyOiBwYWdlIG9mZnNldFxyXG4gICAgICAgIHB1YmxpYyBzZXQgb2Zmc2V0KG9mZnNldDogbnVtYmVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX29mZnNldCA9IG9mZnNldDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISBnZXR0ZXI6IOWun+mam+OBq+ODmuODvOOCuOOBq+WJsuOCiuW9k+OBpuOCieOCjOOBpuOBhOOCi+mrmOOBlVxyXG4gICAgICAgIHB1YmxpYyBnZXQgaGVpZ2h0KCk6IG51bWJlciB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9oZWlnaHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgZ2V0dGVyOiDnirbmhYvlj5blvpdcclxuICAgICAgICBwdWJsaWMgZ2V0IHN0YXR1cygpOiBzdHJpbmcge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc3RhdHVzO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiSW50ZXJmYWNlcy50c1wiIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJDb25maWcudHNcIiAvPlxyXG5cclxubmFtZXNwYWNlIENEUC5VSSB7XHJcblxyXG4gICAgaW1wb3J0IF9VdGlscyA9IENEUC5VSS5fTGlzdFZpZXdVdGlscztcclxuXHJcbiAgICBjb25zdCBUQUcgPSBcIltDRFAuVUkuU2Nyb2xsZXJFbGVtZW50XSBcIjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBjbGFzcyBTY3JvbGxlckVsZW1lbnRcclxuICAgICAqIEBicmllZiBIVE1MRWxlbWVudCDjga4gU2Nyb2xsZXIg44Kv44Op44K5XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBjbGFzcyBTY3JvbGxlckVsZW1lbnQgaW1wbGVtZW50cyBJU2Nyb2xsZXIge1xyXG4gICAgICAgIHByaXZhdGUgXyR0YXJnZXQ6IEpRdWVyeSA9IG51bGw7XHJcbiAgICAgICAgcHJpdmF0ZSBfJHNjcm9sbE1hcDogSlF1ZXJ5ID0gbnVsbDtcclxuICAgICAgICBwcml2YXRlIF9saXN0dmlld09wdGlvbnM6IExpc3RWaWV3T3B0aW9ucyA9IG51bGw7XHJcblxyXG4gICAgICAgIC8vISBjb25zdHJ1Y3RvclxyXG4gICAgICAgIGNvbnN0cnVjdG9yKGVsZW1lbnQ6IHN0cmluZywgb3B0aW9uczogTGlzdFZpZXdPcHRpb25zKTtcclxuICAgICAgICBjb25zdHJ1Y3RvcihlbGVtZW50OiBIVE1MRWxlbWVudCwgb3B0aW9uczogTGlzdFZpZXdPcHRpb25zKTtcclxuICAgICAgICBjb25zdHJ1Y3RvcihlbGVtZW50OiBhbnksIG9wdGlvbnM6IExpc3RWaWV3T3B0aW9ucykge1xyXG4gICAgICAgICAgICB0aGlzLl8kdGFyZ2V0ID0gJChlbGVtZW50KTtcclxuICAgICAgICAgICAgdGhpcy5fbGlzdHZpZXdPcHRpb25zID0gb3B0aW9ucztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISBTY3JvbGxlciDjga7lnovjgpLlj5blvpdcclxuICAgICAgICBnZXRUeXBlKCk6IHN0cmluZyB7XHJcbiAgICAgICAgICAgIHJldHVybiBTY3JvbGxlckVsZW1lbnQuVFlQRTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISBwb3NpdGlvbiDlj5blvpdcclxuICAgICAgICBnZXRQb3MoKTogbnVtYmVyIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuXyR0YXJnZXQuc2Nyb2xsVG9wKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgcG9zaXRpb24g44Gu5pyA5aSn5YCk44KS5Y+W5b6XXHJcbiAgICAgICAgZ2V0UG9zTWF4KCk6IG51bWJlciB7XHJcbiAgICAgICAgICAgIGlmIChudWxsID09IHRoaXMuXyRzY3JvbGxNYXApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuXyRzY3JvbGxNYXAgPSB0aGlzLl8kdGFyZ2V0LmNoaWxkcmVuKCkuZmlyc3QoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gX1V0aWxzLm1heCh0aGlzLl8kc2Nyb2xsTWFwLmhlaWdodCgpIC0gdGhpcy5fJHRhcmdldC5oZWlnaHQoKSwgMCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg44Kk44OZ44Oz44OI55m76YyyXHJcbiAgICAgICAgb24odHlwZTogc3RyaW5nLCBmdW5jOiAoZXZlbnQ6IEpRdWVyeUV2ZW50T2JqZWN0KSA9PiB2b2lkKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAodHlwZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcInNjcm9sbFwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuXyR0YXJnZXQub24oXCJzY3JvbGxcIiwgZnVuYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwic2Nyb2xsc3RvcFwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuXyR0YXJnZXQub24oXCJzY3JvbGxzdG9wXCIsIGZ1bmMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oVEFHICsgXCJ1bnN1cHBvcnRlZCB0eXBlOiBcIiArIHR5cGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg44Kk44OZ44Oz44OI55m76Yyy6Kej6ZmkXHJcbiAgICAgICAgb2ZmKHR5cGU6IHN0cmluZywgZnVuYzogKGV2ZW50OiBKUXVlcnlFdmVudE9iamVjdCkgPT4gdm9pZCk6IHZvaWQge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJzY3JvbGxcIjpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl8kdGFyZ2V0Lm9mZihcInNjcm9sbFwiLCBmdW5jKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJzY3JvbGxzdG9wXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fJHRhcmdldC5vZmYoXCJzY3JvbGxzdG9wXCIsIGZ1bmMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oVEFHICsgXCJ1bnN1cHBvcnRlZCB0eXBlOiBcIiArIHR5cGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg44K544Kv44Ot44O844Or5L2N572u44KS5oyH5a6aXHJcbiAgICAgICAgc2Nyb2xsVG8ocG9zOiBudW1iZXIsIGFuaW1hdGU/OiBib29sZWFuLCB0aW1lPzogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5fbGlzdHZpZXdPcHRpb25zLmVuYWJsZUFuaW1hdGlvbiB8fCAhYW5pbWF0ZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fJHRhcmdldC5zY3JvbGxUb3AocG9zKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChudWxsID09IHRpbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aW1lID0gdGhpcy5fbGlzdHZpZXdPcHRpb25zLmFuaW1hdGlvbkR1cmF0aW9uO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5fJHRhcmdldC5hbmltYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICBzY3JvbGxUb3A6IHBvc1xyXG4gICAgICAgICAgICAgICAgfSwgdGltZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISBTY3JvbGxlciDjga7nirbmhYvmm7TmlrBcclxuICAgICAgICB1cGRhdGUoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIC8vIG5vb3AuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgU2Nyb2xsZXIg44Gu56C05qOEXHJcbiAgICAgICAgZGVzdHJveSgpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5fJHNjcm9sbE1hcCA9IG51bGw7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl8kdGFyZ2V0KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl8kdGFyZ2V0Lm9mZigpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fJHRhcmdldCA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDjgr/jgqTjg5flrprnvqlcclxuICAgICAgICBwdWJsaWMgc3RhdGljIGdldCBUWVBFKCk6IHN0cmluZyB7XHJcbiAgICAgICAgICAgIHJldHVybiBcImVsZW1lbnQtb3ZlcmZsb3dcIjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISBmYWN0b3J5IOWPluW+l1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgZ2V0RmFjdG9yeSgpOiAoZWxlbWVudDogYW55LCBvcHRpb25zOiBMaXN0Vmlld09wdGlvbnMpID0+IElTY3JvbGxlciB7XHJcbiAgICAgICAgICAgIGxldCBmYWN0b3J5ID0gKGVsZW1lbnQ6IGFueSwgb3B0aW9uczogTGlzdFZpZXdPcHRpb25zKTogSVNjcm9sbGVyID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgU2Nyb2xsZXJFbGVtZW50KGVsZW1lbnQsIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAvLyBzZXQgdHlwZSBzaWduYXR1cmUuXHJcbiAgICAgICAgICAgICg8YW55PmZhY3RvcnkpLnR5cGUgPSBTY3JvbGxlckVsZW1lbnQuVFlQRTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhY3Rvcnk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJJbnRlcmZhY2VzLnRzXCIgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIkNvbmZpZy50c1wiIC8+XHJcblxyXG5uYW1lc3BhY2UgQ0RQLlVJIHtcclxuXHJcbiAgICBpbXBvcnQgX1V0aWxzID0gQ0RQLlVJLl9MaXN0Vmlld1V0aWxzO1xyXG5cclxuICAgIGNvbnN0IFRBRyA9IFwiW0NEUC5VSS5TY3JvbGxlck5hdGl2ZV0gXCI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAY2xhc3MgU2Nyb2xsZXJOYXRpdmVcclxuICAgICAqIEBicmllZiBCcm93c2VyIE5hdGl2ZSDjga4gU2Nyb2xsZXIg44Kv44Op44K5XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBjbGFzcyBTY3JvbGxlck5hdGl2ZSBpbXBsZW1lbnRzIElTY3JvbGxlciB7XHJcbiAgICAgICAgcHJpdmF0ZSBfJGJvZHk6IEpRdWVyeSA9IG51bGw7XHJcbiAgICAgICAgcHJpdmF0ZSBfJHRhcmdldDogSlF1ZXJ5ID0gbnVsbDtcclxuICAgICAgICBwcml2YXRlIF8kc2Nyb2xsTWFwOiBKUXVlcnkgPSBudWxsO1xyXG4gICAgICAgIHByaXZhdGUgX2xpc3R2aWV3T3B0aW9uczogTGlzdFZpZXdPcHRpb25zID0gbnVsbDtcclxuXHJcbiAgICAgICAgLy8hIGNvbnN0cnVjdG9yXHJcbiAgICAgICAgY29uc3RydWN0b3Iob3B0aW9uczogTGlzdFZpZXdPcHRpb25zKSB7XHJcbiAgICAgICAgICAgIHRoaXMuXyR0YXJnZXQgPSAkKGRvY3VtZW50KTtcclxuICAgICAgICAgICAgdGhpcy5fJGJvZHkgPSAkKFwiYm9keVwiKTtcclxuICAgICAgICAgICAgdGhpcy5fbGlzdHZpZXdPcHRpb25zID0gb3B0aW9ucztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISBTY3JvbGxlciDjga7lnovjgpLlj5blvpdcclxuICAgICAgICBnZXRUeXBlKCk6IHN0cmluZyB7XHJcbiAgICAgICAgICAgIHJldHVybiBTY3JvbGxlck5hdGl2ZS5UWVBFO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIHBvc2l0aW9uIOWPluW+l1xyXG4gICAgICAgIGdldFBvcygpOiBudW1iZXIge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fJHRhcmdldC5zY3JvbGxUb3AoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISBwb3NpdGlvbiDjga7mnIDlpKflgKTjgpLlj5blvpdcclxuICAgICAgICBnZXRQb3NNYXgoKTogbnVtYmVyIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9VdGlscy5tYXgodGhpcy5fJHRhcmdldC5oZWlnaHQoKSAtIHdpbmRvdy5pbm5lckhlaWdodCwgMCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg44Kk44OZ44Oz44OI55m76YyyXHJcbiAgICAgICAgb24odHlwZTogc3RyaW5nLCBmdW5jOiAoZXZlbnQ6IEpRdWVyeUV2ZW50T2JqZWN0KSA9PiB2b2lkKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAodHlwZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcInNjcm9sbFwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuXyR0YXJnZXQub24oXCJzY3JvbGxcIiwgZnVuYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwic2Nyb2xsc3RvcFwiOlxyXG4gICAgICAgICAgICAgICAgICAgICQod2luZG93KS5vbihcInNjcm9sbHN0b3BcIiwgZnVuYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihUQUcgKyBcInVuc3VwcG9ydGVkIHR5cGU6IFwiICsgdHlwZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDjgqTjg5njg7Pjg4jnmbvpjLLop6PpmaRcclxuICAgICAgICBvZmYodHlwZTogc3RyaW5nLCBmdW5jOiAoZXZlbnQ6IEpRdWVyeUV2ZW50T2JqZWN0KSA9PiB2b2lkKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAodHlwZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcInNjcm9sbFwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuXyR0YXJnZXQub2ZmKFwic2Nyb2xsXCIsIGZ1bmMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcInNjcm9sbHN0b3BcIjpcclxuICAgICAgICAgICAgICAgICAgICAkKHdpbmRvdykub2ZmKFwic2Nyb2xsc3RvcFwiLCBmdW5jKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFRBRyArIFwidW5zdXBwb3J0ZWQgdHlwZTogXCIgKyB0eXBlKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOOCueOCr+ODreODvOODq+S9jee9ruOCkuaMh+WumlxyXG4gICAgICAgIHNjcm9sbFRvKHBvczogbnVtYmVyLCBhbmltYXRlPzogYm9vbGVhbiwgdGltZT86IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuX2xpc3R2aWV3T3B0aW9ucy5lbmFibGVBbmltYXRpb24gfHwgIWFuaW1hdGUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuXyRib2R5LnNjcm9sbFRvcChwb3MpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKG51bGwgPT0gdGltZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRpbWUgPSB0aGlzLl9saXN0dmlld09wdGlvbnMuYW5pbWF0aW9uRHVyYXRpb247XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLl8kYm9keS5hbmltYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICBzY3JvbGxUb3A6IHBvc1xyXG4gICAgICAgICAgICAgICAgfSwgdGltZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISBTY3JvbGxlciDjga7nirbmhYvmm7TmlrBcclxuICAgICAgICB1cGRhdGUoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIC8vIG5vb3AuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgU2Nyb2xsZXIg44Gu56C05qOEXHJcbiAgICAgICAgZGVzdHJveSgpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5fJHNjcm9sbE1hcCA9IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMuXyR0YXJnZXQgPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOOCv+OCpOODl+Wumue+qVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgZ2V0IFRZUEUoKTogc3RyaW5nIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwibmF0aXZlLXNjcm9sbFwiO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIGZhY3Rvcnkg5Y+W5b6XXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBnZXRGYWN0b3J5KCk6IChlbGVtZW50OiBhbnksIG9wdGlvbnM6IExpc3RWaWV3T3B0aW9ucykgPT4gSVNjcm9sbGVyIHtcclxuICAgICAgICAgICAgbGV0IGZhY3RvcnkgPSAoZWxlbWVudDogYW55LCBvcHRpb25zOiBMaXN0Vmlld09wdGlvbnMpOiBJU2Nyb2xsZXIgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBTY3JvbGxlck5hdGl2ZShvcHRpb25zKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgLy8gc2V0IHR5cGUgc2lnbmF0dXJlLlxyXG4gICAgICAgICAgICAoPGFueT5mYWN0b3J5KS50eXBlID0gU2Nyb2xsZXJOYXRpdmUuVFlQRTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhY3Rvcnk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJJbnRlcmZhY2VzLnRzXCIgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIkNvbmZpZy50c1wiIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJfZGV2LmRlcGVuZGVuY2llcy5kLnRzXCIgLz5cclxuXHJcbi8vIGZvciBub24gaXNjcm9sbCB1c2VyLiBjZHAudWkubGlzdHZpZXcuZC50cyBpbnRlcm5hbCBkZWZpbml0aW9uLlxyXG5pbnRlcmZhY2UgSVNjcm9sbE9wdGlvbnMge1xyXG4gICAgW3g6IHN0cmluZ106IGFueTtcclxufVxyXG5cclxubmFtZXNwYWNlIENEUC5VSSB7XHJcblxyXG4gICAgaW1wb3J0IF9Db25maWcgID0gQ0RQLlVJLkxpc3RWaWV3R2xvYmFsQ29uZmlnO1xyXG4gICAgaW1wb3J0IF9VdGlscyAgID0gQ0RQLlVJLl9MaXN0Vmlld1V0aWxzO1xyXG5cclxuICAgIGNvbnN0IFRBRyA9IFwiW0NEUC5VSS5TY3JvbGxlcklTY3JvbGxdIFwiO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGNsYXNzIFNjcm9sbGVySVNjcm9sbFxyXG4gICAgICogQGJyaWVmIGlTY3JvbGwg44KS5L2/55So44GX44GfIFNjcm9sbGVyIOOCr+ODqeOCuVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgY2xhc3MgU2Nyb2xsZXJJU2Nyb2xsIGltcGxlbWVudHMgSVNjcm9sbGVyIHtcclxuICAgICAgICBwcml2YXRlIF8kb3duZXI6IEpRdWVyeSA9IG51bGw7XHJcbiAgICAgICAgcHJpdmF0ZSBfaXNjcm9sbDogSVNjcm9sbCA9IG51bGw7XHJcbiAgICAgICAgcHJpdmF0ZSBfcmVmcmVzaFRpbWVySWQ6IG51bWJlciA9IG51bGw7XHJcbiAgICAgICAgcHJpdmF0ZSBfJHdyYXBwZXI6IEpRdWVyeSA9IG51bGw7XHJcbiAgICAgICAgcHJpdmF0ZSBfJHNjcm9sbGVyOiBKUXVlcnkgPSBudWxsO1xyXG4gICAgICAgIHByaXZhdGUgX2xpc3R2aWV3T3B0aW9uczogTGlzdFZpZXdPcHRpb25zID0gbnVsbDtcclxuXHJcbiAgICAgICAgLy8hIGNvbnN0cnVjdG9yXHJcbiAgICAgICAgY29uc3RydWN0b3IoJG93bmVyOiBKUXVlcnksIGVsZW1lbnQ6IHN0cmluZywgaXNjcm9sbE9wdGlvbnM6IElTY3JvbGxPcHRpb25zLCBsaXN0dmlld09wdGlvbnM6IExpc3RWaWV3T3B0aW9ucyk7XHJcbiAgICAgICAgY29uc3RydWN0b3IoJG93bmVyOiBKUXVlcnksIGVsZW1lbnQ6IEhUTUxFbGVtZW50LCBpc2Nyb2xsT3B0aW9uczogSVNjcm9sbE9wdGlvbnMsIGxpc3R2aWV3T3B0aW9uczogTGlzdFZpZXdPcHRpb25zKTtcclxuICAgICAgICBjb25zdHJ1Y3Rvcigkb3duZXI6IEpRdWVyeSwgZWxlbWVudDogYW55LCBpc2Nyb2xsT3B0aW9uczogSVNjcm9sbE9wdGlvbnMsIGxpc3R2aWV3T3B0aW9uczogTGlzdFZpZXdPcHRpb25zKSB7XHJcbiAgICAgICAgICAgIGlmIChudWxsICE9IGdsb2JhbC5JU2Nyb2xsKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl8kb3duZXIgPSAkb3duZXI7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9pc2Nyb2xsID0gbmV3IElTY3JvbGwoZWxlbWVudCwgaXNjcm9sbE9wdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fJHdyYXBwZXIgPSAkKHRoaXMuX2lzY3JvbGwud3JhcHBlcik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl8kc2Nyb2xsZXIgPSAkKHRoaXMuX2lzY3JvbGwuc2Nyb2xsZXIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbGlzdHZpZXdPcHRpb25zID0gbGlzdHZpZXdPcHRpb25zO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihUQUcgKyBcImlzY3JvbGwgbW9kdWxlIGRvZXNuJ3QgbG9hZC5cIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISBTY3JvbGxlciDjga7lnovjgpLlj5blvpdcclxuICAgICAgICBnZXRUeXBlKCk6IHN0cmluZyB7XHJcbiAgICAgICAgICAgIHJldHVybiBTY3JvbGxlcklTY3JvbGwuVFlQRTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISBwb3NpdGlvbiDlj5blvpdcclxuICAgICAgICBnZXRQb3MoKTogbnVtYmVyIHtcclxuICAgICAgICAgICAgbGV0IHBvcyA9IHRoaXMuX2lzY3JvbGwuZ2V0Q29tcHV0ZWRQb3NpdGlvbigpLnk7XHJcbiAgICAgICAgICAgIGlmIChfLmlzTmFOKHBvcykpIHtcclxuICAgICAgICAgICAgICAgIHBvcyA9IDA7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBwb3MgPSAtcG9zO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBwb3M7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgcG9zaXRpb24g44Gu5pyA5aSn5YCk44KS5Y+W5b6XXHJcbiAgICAgICAgZ2V0UG9zTWF4KCk6IG51bWJlciB7XHJcbiAgICAgICAgICAgIHJldHVybiBfVXRpbHMubWF4KC10aGlzLl9pc2Nyb2xsLm1heFNjcm9sbFksIDApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOOCpOODmeODs+ODiOeZu+mMslxyXG4gICAgICAgIG9uKHR5cGU6IHN0cmluZywgZnVuYzogKGV2ZW50OiBKUXVlcnlFdmVudE9iamVjdCkgPT4gdm9pZCk6IHZvaWQge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJzY3JvbGxcIjpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9pc2Nyb2xsLm9uKFwic2Nyb2xsXCIsIGZ1bmMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcInNjcm9sbHN0b3BcIjpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9pc2Nyb2xsLm9uKFwic2Nyb2xsRW5kXCIsIGZ1bmMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oVEFHICsgXCJ1bnN1cHBvcnRlZCB0eXBlOiBcIiArIHR5cGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg44Kk44OZ44Oz44OI55m76Yyy6Kej6ZmkXHJcbiAgICAgICAgb2ZmKHR5cGU6IHN0cmluZywgZnVuYzogKGV2ZW50OiBKUXVlcnlFdmVudE9iamVjdCkgPT4gdm9pZCk6IHZvaWQge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJzY3JvbGxcIjpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9pc2Nyb2xsLm9mZihcInNjcm9sbFwiLCBmdW5jKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJzY3JvbGxzdG9wXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5faXNjcm9sbC5vbihcInNjcm9sbEVuZFwiLCBmdW5jKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFRBRyArIFwidW5zdXBwb3J0ZWQgdHlwZTogXCIgKyB0eXBlKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOOCueOCr+ODreODvOODq+S9jee9ruOCkuaMh+WumlxyXG4gICAgICAgIHNjcm9sbFRvKHBvczogbnVtYmVyLCBhbmltYXRlPzogYm9vbGVhbiwgdGltZT86IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgICAgICB0aW1lID0gMDtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2xpc3R2aWV3T3B0aW9ucy5lbmFibGVBbmltYXRpb24gJiYgYW5pbWF0ZSkge1xyXG4gICAgICAgICAgICAgICAgdGltZSA9IHRpbWUgfHwgdGhpcy5fbGlzdHZpZXdPcHRpb25zLmFuaW1hdGlvbkR1cmF0aW9uO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuX2lzY3JvbGwuc2Nyb2xsVG8oMCwgLXBvcywgdGltZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgU2Nyb2xsZXIg44Gu54q25oWL5pu05pawXHJcbiAgICAgICAgdXBkYXRlKCk6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fJG93bmVyKSB7XHJcbiAgICAgICAgICAgICAgICAvLyB1cGRhdGUgd3JhcHBlclxyXG4gICAgICAgICAgICAgICAgKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgb3duZXJIZWlnaHQgPSB0aGlzLl8kb3duZXIuaGVpZ2h0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG93bmVySGVpZ2h0ICE9PSB0aGlzLl8kd3JhcHBlci5oZWlnaHQoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl8kd3JhcHBlci5oZWlnaHQob3duZXJIZWlnaHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG51bGwgIT0gdGhpcy5fcmVmcmVzaFRpbWVySWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5fcmVmcmVzaFRpbWVySWQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGxldCBwcm9jID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl8kc2Nyb2xsZXIgJiYgdGhpcy5fJHNjcm9sbGVyLmhlaWdodCgpICE9PSB0aGlzLl9pc2Nyb2xsLnNjcm9sbGVySGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2lzY3JvbGwucmVmcmVzaCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9yZWZyZXNoVGltZXJJZCA9IHNldFRpbWVvdXQocHJvYywgdGhpcy5fbGlzdHZpZXdPcHRpb25zLnNjcm9sbE1hcFJlZnJlc2hJbnRlcnZhbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fcmVmcmVzaFRpbWVySWQgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5faXNjcm9sbC5yZWZyZXNoKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9yZWZyZXNoVGltZXJJZCA9IHNldFRpbWVvdXQocHJvYywgdGhpcy5fbGlzdHZpZXdPcHRpb25zLnNjcm9sbE1hcFJlZnJlc2hJbnRlcnZhbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISBTY3JvbGxlciDjga7noLTmo4RcclxuICAgICAgICBkZXN0cm95KCk6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLl8kc2Nyb2xsZXIgPSBudWxsO1xyXG4gICAgICAgICAgICB0aGlzLl8kd3JhcHBlciA9IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMuX2lzY3JvbGwuZGVzdHJveSgpO1xyXG4gICAgICAgICAgICB0aGlzLl8kb3duZXIgPSBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOOCv+OCpOODl+Wumue+qVxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgZ2V0IFRZUEUoKTogc3RyaW5nIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwiaXNjcm9sbFwiO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIGZhY3Rvcnkg5Y+W5b6XXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBnZXRGYWN0b3J5KG9wdGlvbnM/OiBJU2Nyb2xsT3B0aW9ucyk6IChlbGVtZW50OiBhbnksIG9wdGlvbnM6IExpc3RWaWV3T3B0aW9ucykgPT4gSVNjcm9sbGVyIHtcclxuICAgICAgICAgICAgbGV0IGRlZmF1bHRPcHQgPSB7XHJcbiAgICAgICAgICAgICAgICBzY3JvbGxYOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGJvdW5jZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICB0YXA6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBjbGljazogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIG1vdXNlV2hlZWw6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBzY3JvbGxiYXJzOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgaW50ZXJhY3RpdmVTY3JvbGxiYXJzOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgc2hyaW5rU2Nyb2xsYmFyczogXCJzY2FsZVwiLFxyXG4gICAgICAgICAgICAgICAgZmFkZVNjcm9sbGJhcnM6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBwcmV2ZW50RGVmYXVsdDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBkaXNhYmxlUG9pbnRlcjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGRpc2FibGVNb3VzZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBkaXNhYmxlVG91Y2g6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgcHJvYmVUeXBlOiAyLFxyXG4vLyAgICAgICAgICAgICAgIGV2ZW50UGFzc3Rocm91Z2g6IHRydWUsXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBsZXQgaXNjcm9sbE9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgZGVmYXVsdE9wdCwgb3B0aW9ucyk7XHJcblxyXG4gICAgICAgICAgICBsZXQgZmFjdG9yeSA9IChlbGVtZW50OiBhbnksIGxpc3R2aWV3T3B0aW9uczogTGlzdFZpZXdPcHRpb25zKTogSVNjcm9sbGVyID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCAkb3duZXIgPSAkKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgbGV0ICRtYXAgPSAkb3duZXIuZmluZChfQ29uZmlnLlNDUk9MTF9NQVBfU0VMRUNUT1IpO1xyXG4gICAgICAgICAgICAgICAgbGV0ICR3cmFwcGVyID0gJChcIjxkaXYgY2xhc3M9J1wiICsgX0NvbmZpZy5XUkFQUEVSX0NMQVNTICsgXCInPjwvZGl2PlwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogXCJhYnNvbHV0ZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogXCIxMDAlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogXCIxMDAlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJmbG93OiBcImhpZGRlblwiLFxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgJG1hcC53cmFwKCR3cmFwcGVyKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgU2Nyb2xsZXJJU2Nyb2xsKCRvd25lciwgX0NvbmZpZy5XUkFQUEVSX1NFTEVDVE9SLCBpc2Nyb2xsT3B0aW9ucywgbGlzdHZpZXdPcHRpb25zKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgLy8gc2V0IHR5cGUgc2lnbmF0dXJlLlxyXG4gICAgICAgICAgICAoPGFueT5mYWN0b3J5KS50eXBlID0gU2Nyb2xsZXJJU2Nyb2xsLlRZUEU7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZmFjdG9yeTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIkxpbmVQcm9maWxlLnRzXCIgLz5cclxuXHJcbm5hbWVzcGFjZSBDRFAuVUkge1xyXG5cclxuICAgIGNvbnN0IFRBRyA9IFwiW0NEUC5VSS5MaXN0SXRlbVZpZXddIFwiO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGludGVyZmFjZSBMaXN0SXRlbVZpZXdPcHRpb25zXHJcbiAgICAgKiBAYnJpZWYgTGlzdEl0ZW1WaWV3IOOBruOCquODl+OCt+ODp+ODs1xyXG4gICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIExpc3RJdGVtVmlld09wdGlvbnM8VE1vZGVsIGV4dGVuZHMgQmFja2JvbmUuTW9kZWw+IGV4dGVuZHMgQmFja2JvbmUuVmlld09wdGlvbnM8VE1vZGVsPiB7XHJcbiAgICAgICAgb3duZXI6IEJhc2VMaXN0VmlldztcclxuICAgICAgICAkZWw/OiBKUXVlcnk7XHJcbiAgICAgICAgbGluZVByb2ZpbGU6IExpbmVQcm9maWxlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGNsYXNzIExpc3RJdGVtVmlld1xyXG4gICAgICogQGJyaWVmIExpc3RWaWV3IOOBjOaJseOBhiBMaXN0SXRlbSDjgrPjg7Pjg4bjg4rjgq/jg6njgrlcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGNsYXNzIExpc3RJdGVtVmlldzxUTW9kZWwgZXh0ZW5kcyBCYWNrYm9uZS5Nb2RlbD4gZXh0ZW5kcyBCYWNrYm9uZS5WaWV3PFRNb2RlbD4gaW1wbGVtZW50cyBJTGlzdEl0ZW1WaWV3LCBJQ29tcG9zYWJsZVZpZXcge1xyXG5cclxuICAgICAgICBwcml2YXRlIF9vd25lcjogQmFzZUxpc3RWaWV3ID0gbnVsbDtcclxuICAgICAgICBwcml2YXRlIF9saW5lUHJvZmlsZTogTGluZVByb2ZpbGUgPSBudWxsO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBjb25zdHJ1Y3RvclxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGNvbnN0cnVjdG9yKG9wdGlvbnM6IExpc3RJdGVtVmlld09wdGlvbnM8VE1vZGVsPikge1xyXG4gICAgICAgICAgICBzdXBlcihvcHRpb25zKTtcclxuICAgICAgICAgICAgdGhpcy5fb3duZXIgPSBvcHRpb25zLm93bmVyO1xyXG4gICAgICAgICAgICBpZiAob3B0aW9ucy4kZWwpIHtcclxuICAgICAgICAgICAgICAgIGxldCBkZWxlZ2F0ZXMgPSAoPGFueT50aGlzKS5ldmVudHMgPyB0cnVlIDogZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldEVsZW1lbnQob3B0aW9ucy4kZWwsIGRlbGVnYXRlcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5fbGluZVByb2ZpbGUgPSBvcHRpb25zLmxpbmVQcm9maWxlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBJbXBsZW1lbnRzOiBMaXN0SXRlbVZpZXdcclxuXHJcbiAgICAgICAgLy8hIOaPj+eUuzogZnJhbWV3b3JrIOOBi+OCieWRvOOBs+WHuuOBleOCjOOCi+OBn+OCgeOAgeOCquODvOODkOODvOODqeOCpOODieW/hemgiFxyXG4gICAgICAgIHJlbmRlcigpOiBMaXN0SXRlbVZpZXc8VE1vZGVsPiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihUQUcgKyBcIm5lZWQgb3ZlcnJpZGUgJ3JlbmRlcigpJyBtZXRob2QuXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDoh6rouqvjga4gTGluZSDjgqTjg7Pjg4fjg4Pjgq/jgrnjgpLlj5blvpdcclxuICAgICAgICBnZXRJbmRleCgpOiBudW1iZXIge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fbGluZVByb2ZpbGUuaW5kZXg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg6Ieq6Lqr44Gr5oyH5a6a44GV44KM44Gf6auY44GV44KS5Y+W5b6XXHJcbiAgICAgICAgZ2V0U3BlY2lmaWVkSGVpZ2h0KCk6IG51bWJlciB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9saW5lUHJvZmlsZS5oZWlnaHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgY2hpbGQgbm9kZSDjgYzlrZjlnKjjgZnjgovjgYvliKTlrppcclxuICAgICAgICBoYXNDaGlsZE5vZGUoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy4kZWwpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAwIDwgdGhpcy4kZWwuY2hpbGRyZW4oKS5sZW5ndGg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOmrmOOBleOCkuabtOaWsFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIG5ld0hlaWdodCB7TnVtYmVyfSAgICAgICAgICAgICAgW2luXSDmlrDjgZfjgYTpq5jjgZVcclxuICAgICAgICAgKiBAcGFyYW0gb3B0aW9ucyAgIHtVcGRhdGVIZWlnaHRPcHRpb25zfSBbaW5dIGxpbmUg44Gu6auY44GV5pu05paw5pmC44Gr5b2x6Z+/44GZ44KL44GZ44G544Gm44GuIExpbmVQcm9maWxlIOOBruWGjeioiOeul+OCkuihjOOBhuWgtOWQiOOBryB7IHJlZmxlY3RBbGw6IHRydWUgfVxyXG4gICAgICAgICAqIEByZXR1cm4ge0xpc3RJdGVtVmlld30g44Kk44Oz44K544K/44Oz44K5XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdXBkYXRlSGVpZ2h0KG5ld0hlaWdodDogbnVtYmVyLCBvcHRpb25zPzogVXBkYXRlSGVpZ2h0T3B0aW9ucyk6IExpc3RJdGVtVmlldzxUTW9kZWw+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuJGVsKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5nZXRTcGVjaWZpZWRIZWlnaHQoKSAhPT0gbmV3SGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbGluZVByb2ZpbGUudXBkYXRlSGVpZ2h0KG5ld0hlaWdodCwgb3B0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kZWwuaGVpZ2h0KG5ld0hlaWdodCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIEltcGxlbWVudHM6IElDb21wb3NhYmxlVmlld1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDjgZnjgafjgavlrprnvqnjgZXjgozjgZ8gQmFja2JvbmUuVmlldyDjgpLln7rlupXjgq/jg6njgrnjgavoqK3lrprjgZfjgIFleHRlbmQg44KS5a6f6KGM44GZ44KL44CCXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gZGVyaXZlcyAgICAgICAgIHtCYWNrYm9uZS5WaWV3fEJhY2tib25lLlZpZXdbXX0gW2luXSDlkIjmiJDlhYPjga4gVmlldyDjgq/jg6njgrlcclxuICAgICAgICAgKiBAcGFyYW0gcHJvcGVydGllcyAgICAgIHtPYmplY3R9ICAgICAgICAgICAgICAgICAgICAgICAgW2luXSBwcm90b3R5cGUg44OX44Ot44OR44OG44KjXHJcbiAgICAgICAgICogQHBhcmFtIGNsYXNzUHJvcGVydGllcyB7T2JqZWN0fSAgICAgICAgICAgICAgICAgICAgICAgIFtpbl0gc3RhdGljIOODl+ODreODkeODhuOCo1xyXG4gICAgICAgICAqIEByZXR1cm4ge0JhY2tib25lLlZpZXd8QmFja2JvbmUuVmlld1tdfSDmlrDopo/jgavnlJ/miJDjgZXjgozjgZ8gVmlldyDjga7jgrPjg7Pjgrnjg4jjg6njgq/jgr9cclxuICAgICAgICAgKi9cclxuICAgICAgICBzdGF0aWMgY29tcG9zZShkZXJpdmVzOiBWaWV3Q29uc3RydWN0b3IgfCBWaWV3Q29uc3RydWN0b3JbXSwgcHJvcGVydGllczogYW55LCBjbGFzc1Byb3BlcnRpZXM/OiBhbnkpOiBWaWV3Q29uc3RydWN0b3Ige1xyXG4gICAgICAgICAgICBsZXQgY29tcG9zZWQ6IGFueSA9IGNvbXBvc2VWaWV3cyhMaXN0SXRlbVZpZXcsIGRlcml2ZXMpO1xyXG4gICAgICAgICAgICByZXR1cm4gY29tcG9zZWQuZXh0ZW5kKHByb3BlcnRpZXMsIGNsYXNzUHJvcGVydGllcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIE92ZXJyaWRlOiBCYWNrYm9uZS5WaWV3XHJcblxyXG4gICAgICAgIC8vISDplovmlL5cclxuICAgICAgICByZW1vdmUoKTogTGlzdEl0ZW1WaWV3PFRNb2RlbD4ge1xyXG4gICAgICAgICAgICAvLyB4cGVyaWEgQVggSmVsbHkgQmVhbiAoNC4xLjIp44Gr44Gm44CB44Oh44Oi44Oq44O844Oq44O844Kv44KS6Lu95rib44GV44Gb44KL5Yq55p6cXHJcbiAgICAgICAgICAgIHRoaXMuJGVsLmZpbmQoXCJmaWd1cmVcIikuY3NzKFwiYmFja2dyb3VuZC1pbWFnZVwiLCBcIm5vbmVcIik7XHJcbiAgICAgICAgICAgIC8vIHRoaXMuJGVsIOOBr+WGjeWIqeeUqOOBmeOCi+OBn+OCgeegtOajhOOBl+OBquOBhFxyXG4gICAgICAgICAgICB0aGlzLiRlbC5jaGlsZHJlbigpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICB0aGlzLiRlbC5vZmYoKTtcclxuICAgICAgICAgICAgdGhpcy4kZWwgPSBudWxsO1xyXG4gICAgICAgICAgICB0aGlzLnN0b3BMaXN0ZW5pbmcoKTtcclxuICAgICAgICAgICAgdGhpcy5fbGluZVByb2ZpbGUgPSBudWxsO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gc2hvcnQgY3V0IG1ldGhvZHNcclxuXHJcbiAgICAgICAgLy8hIE93bmVyIOWPluW+l1xyXG4gICAgICAgIGdldCBvd25lcigpOiBCYXNlTGlzdFZpZXcge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fb3duZXI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJQYWdlUHJvZmlsZS50c1wiIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJTY3JvbGxlck5hdGl2ZS50c1wiIC8+XHJcblxyXG4vKiB0c2xpbnQ6ZGlzYWJsZTpuby1iaXR3aXNlIG5vLXVudXNlZC1leHByZXNzaW9uICovXHJcbi8qIGpzaGludCAtVzAzMCAqLyAgLy8gZm9yIFwiRXhwZWN0ZWQgYW4gYXNzaWdubWVudCBvciBmdW5jdGlvbiBjYWxsIGFuZCBpbnN0ZWFkIHNhdyBhbiBleHByZXNzaW9uXCJcclxuXHJcbm5hbWVzcGFjZSBDRFAuVUkge1xyXG5cclxuICAgIGltcG9ydCBfQ29uZmlnICA9IENEUC5VSS5MaXN0Vmlld0dsb2JhbENvbmZpZztcclxuICAgIGltcG9ydCBfVXRpbHMgICA9IENEUC5VSS5fTGlzdFZpZXdVdGlscztcclxuXHJcbiAgICBjb25zdCBUQUcgPSBcIltDRFAuVUkuU2Nyb2xsTWFuYWdlcl0gXCI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAY2xhc3MgU2Nyb2xsTWFuYWdlclxyXG4gICAgICogQGJyaWVmIOODoeODouODqueuoeeQhuOCkuihjOOBhuOCueOCr+ODreODvOODq+WHpueQhuOBruOCs+OCouODreOCuOODg+OCr+Wun+ijheOCr+ODqeOCuVxyXG4gICAgICogICAgICAgIOacrOOCr+ODqeOCueOBryBJTGlzdFZpZXcg44Kk44Oz44K/44O844OV44Kn44Kk44K544KS5oyB44GhIERPTSDjgavjgqLjgq/jgrvjgrnjgZnjgovjgYzjgIFCYWNrYm9uZS5WaWV3IOOCkue2meaJv+OBl+OBquOBhFxyXG4gICAgICovXHJcbiAgICBleHBvcnQgY2xhc3MgU2Nyb2xsTWFuYWdlciBpbXBsZW1lbnRzIElMaXN0Vmlld0ZyYW1ld29yaywgSVNjcm9sbGFibGUsIElCYWNrdXBSZXN0b3JlIHtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBfJHJvb3Q6IEpRdWVyeSA9IG51bGw7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vITwgU2Nyb2xsIOWvvuixoeOBruODq+ODvOODiOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICAgIHByaXZhdGUgXyRtYXA6IEpRdWVyeSA9IG51bGw7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyE8IFNjcm9sbCBNYXAgZWxlbWVudCDjgpLmoLzntI1cclxuICAgICAgICBwcml2YXRlIF9tYXBIZWlnaHQ6IG51bWJlciA9IDA7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8hPCBTY3JvbGwgTWFwIOOBrumrmOOBleOCkuagvOe0jSAoXyRtYXAg44Gu54q25oWL44Gr5L6d5a2Y44GV44Gb44Gq44GEKVxyXG4gICAgICAgIHByaXZhdGUgX3Njcm9sbGVyOiBJU2Nyb2xsZXIgPSBudWxsOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyE8IFNjcm9sbCDjgavkvb/nlKjjgZnjgosgSVNjcm9sbGVyIOOCpOODs+OCueOCv+ODs+OCuVxyXG4gICAgICAgIHByaXZhdGUgX3NldHRpbmdzOiBMaXN0Vmlld09wdGlvbnMgPSBudWxsOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyE8IFNjcm9sbE1hbmFnZXIg44Kq44OX44K344On44Oz44KS5qC857SNXHJcbiAgICAgICAgcHJpdmF0ZSBfYWN0aXZlID0gdHJ1ZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vITwgVUkg6KGo56S65Lit44GvIHRydWUg44Gr5oyH5a6aXHJcbiAgICAgICAgcHJpdmF0ZSBfc2Nyb2xsRXZlbnRIYW5kbGVyOiAoZXZlbnQ6IEpRdWVyeUV2ZW50T2JqZWN0KSA9PiB2b2lkID0gbnVsbDsgICAgIC8vITwgU2Nyb2xsIEV2ZW50IEhhbmRsZXJcclxuICAgICAgICBwcml2YXRlIF9zY3JvbGxTdG9wRXZlbnRIYW5kbGVyOiAoZXZlbnQ6IEpRdWVyeUV2ZW50T2JqZWN0KSA9PiB2b2lkID0gbnVsbDsgLy8hPCBTY3JvbGwgU3RvcCBFdmVudCBIYW5kbGVyXHJcbiAgICAgICAgcHJpdmF0ZSBfYmFzZUhlaWdodDogbnVtYmVyID0gMDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vITwg6auY44GV44Gu5Z+65rqW5YCkXHJcbiAgICAgICAgcHJpdmF0ZSBfbGluZXM6IExpbmVQcm9maWxlW10gPSBbXTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vITwg566h55CG5LiL44Gr44GC44KLIExpbmVQcm9maWxlIOmFjeWIl1xyXG4gICAgICAgIHByaXZhdGUgX3BhZ2VzOiBQYWdlUHJvZmlsZVtdID0gW107ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyE8IOeuoeeQhuS4i+OBq+OBguOCiyBQYWdlUHJvZmlsZSDphY3liJdcclxuICAgICAgICAvLyEg5pyA5paw44Gu6KGo56S66aCY5Z+f5oOF5aCx44KS5qC857SNIChTY3JvbGwg5Lit44Gu5pu05paw5Yem55CG44Gr5L2/55SoKVxyXG4gICAgICAgIHByaXZhdGUgX2xhc3RBY3RpdmVQYWdlQ29udGV4dCA9IHtcclxuICAgICAgICAgICAgaW5kZXg6IDAsXHJcbiAgICAgICAgICAgIGZyb206IDAsXHJcbiAgICAgICAgICAgIHRvOiAwLFxyXG4gICAgICAgICAgICBwb3M6IDAsICAgIC8vIHNjcm9sbCBwb3NpdGlvblxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcHJvdGVjdGVkIF9iYWNrdXAgPSB7fTsgICAgLy8hPCDjg4fjg7zjgr/jga4gYmFja3VwIOmgmOWfny4ga2V5IOOBqCBfbGluZXMg44KS5qC857SN44CC5rS+55Sf44Kv44Op44K544Gn5ouh5by15Y+v6IO944CCXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIGNvbnN0cnVjdG9yXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gXyRyb290ICB7SlF1ZXJ5fSBbaW5dIOeuoeeQhuWvvuixoeOBruODq+ODvOODiOOCqOODrOODoeODs+ODiFxyXG4gICAgICAgICAqIEBwYXJhbSBvcHRpb25zIHtMaXN0Vmlld09wdGlvbnN9IFtpbl0g44Kq44OX44K344On44OzXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgY29uc3RydWN0b3Iob3B0aW9ucz86IExpc3RWaWV3T3B0aW9ucykge1xyXG4gICAgICAgICAgICAvLyBMaXN0Vmlld09wdGlvbnMg5pei5a6a5YCkXHJcbiAgICAgICAgICAgIGxldCBkZWZPcHRpb25zOiBMaXN0Vmlld09wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgICAgICBzY3JvbGxlckZhY3Rvcnk6IFNjcm9sbGVyTmF0aXZlLmdldEZhY3RvcnkoKSxcclxuICAgICAgICAgICAgICAgIGVuYWJsZUhpZGRlblBhZ2U6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgZW5hYmxlVHJhbnNmb3JtT2Zmc2V0OiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIHNjcm9sbE1hcFJlZnJlc2hJbnRlcnZhbDogMjAwLFxyXG4gICAgICAgICAgICAgICAgc2Nyb2xsUmVmcmVzaERpc3RhbmNlOiAyMDAsXHJcbiAgICAgICAgICAgICAgICBwYWdlUHJlcGFyZUNvdW50OiAzLFxyXG4gICAgICAgICAgICAgICAgcGFnZVByZWxvYWRDb3VudDogMSxcclxuICAgICAgICAgICAgICAgIGVuYWJsZUFuaW1hdGlvbjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGFuaW1hdGlvbkR1cmF0aW9uOiAwLFxyXG4gICAgICAgICAgICAgICAgYmFzZURlcHRoOiBcImF1dG9cIixcclxuICAgICAgICAgICAgICAgIGl0ZW1UYWdOYW1lOiBcImRpdlwiLFxyXG4gICAgICAgICAgICAgICAgcmVtb3ZlSXRlbVdpdGhUcmFuc2l0aW9uOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgdXNlRHVtbXlJbmFjdGl2ZVNjcm9sbE1hcDogZmFsc2UsXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvLyDoqK3lrprmoLzntI1cclxuICAgICAgICAgICAgdGhpcy5fc2V0dGluZ3MgPSAkLmV4dGVuZCh7fSwgZGVmT3B0aW9ucywgb3B0aW9ucyk7XHJcblxyXG4gICAgICAgICAgICAvLyDjgrnjgq/jg63jg7zjg6vjgqTjg5njg7Pjg4hcclxuICAgICAgICAgICAgdGhpcy5fc2Nyb2xsRXZlbnRIYW5kbGVyID0gKGV2ZW50OiBKUXVlcnlFdmVudE9iamVjdCk6IHZvaWQgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vblNjcm9sbCh0aGlzLl9zY3JvbGxlci5nZXRQb3MoKSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIC8vIOOCueOCr+ODreODvOODq+WBnOatouOCpOODmeODs+ODiFxyXG4gICAgICAgICAgICB0aGlzLl9zY3JvbGxTdG9wRXZlbnRIYW5kbGVyID0gKGV2ZW50OiBKUXVlcnlFdmVudE9iamVjdCk6IHZvaWQgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vblNjcm9sbFN0b3AodGhpcy5fc2Nyb2xsZXIuZ2V0UG9zKCkpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBwdWJsaWMgbWV0aG9kXHJcblxyXG4gICAgICAgIC8vISDlhoXpg6jjgqrjg5bjgrjjgqfjgq/jg4jjga7liJ3mnJ/ljJZcclxuICAgICAgICBwdWJsaWMgaW5pdGlhbGl6ZSgkcm9vdDogSlF1ZXJ5LCBoZWlnaHQ6IG51bWJlcik6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICAvLyDml6Ljgavmp4vnr4njgZXjgozjgabjgYTjgZ/loLTlkIjjga/noLTmo4RcclxuICAgICAgICAgICAgaWYgKHRoaXMuXyRyb290KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5fJHJvb3QgPSAkcm9vdDtcclxuICAgICAgICAgICAgdGhpcy5fJG1hcCA9ICRyb290Lmhhc0NsYXNzKF9Db25maWcuU0NST0xMX01BUF9DTEFTUykgPyAkcm9vdCA6ICRyb290LmZpbmQoX0NvbmZpZy5TQ1JPTExfTUFQX1NFTEVDVE9SKTtcclxuICAgICAgICAgICAgLy8gXyRtYXAg44GM54Sh44GE5aC05ZCI44Gv5Yid5pyf5YyW44GX44Gq44GEXHJcbiAgICAgICAgICAgIGlmICh0aGlzLl8kbWFwLmxlbmd0aCA8PSAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl8kcm9vdCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuX3Njcm9sbGVyID0gdGhpcy5jcmVhdGVTY3JvbGxlcigpO1xyXG4gICAgICAgICAgICB0aGlzLnNldEJhc2VIZWlnaHQoaGVpZ2h0KTtcclxuICAgICAgICAgICAgdGhpcy5zZXRTY3JvbGxlckNvbmRpdGlvbigpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg5YaF6YOo44Kq44OW44K444Kn44Kv44OI44Gu56C05qOEXHJcbiAgICAgICAgcHVibGljIGRlc3Ryb3koKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9zY3JvbGxlcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXNldFNjcm9sbGVyQ29uZGl0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zY3JvbGxlci5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zY3JvbGxlciA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5yZWxlYXNlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuXyRtYXAgPSBudWxsO1xyXG4gICAgICAgICAgICB0aGlzLl8kcm9vdCA9IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg44Oa44O844K444Gu5Z+65rqW5YCk44KS5Y+W5b6XXHJcbiAgICAgICAgcHVibGljIHNldEJhc2VIZWlnaHQoaGVpZ2h0OiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5fYmFzZUhlaWdodCA9IGhlaWdodDtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2Jhc2VIZWlnaHQgPD0gMCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFRBRyArIFwiaW52YWxpZCBiYXNlIGhlaWdodDogXCIgKyB0aGlzLl9iYXNlSGVpZ2h0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5fc2Nyb2xsZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3Njcm9sbGVyLnVwZGF0ZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgYWN0aXZlIOeKtuaFi+ioreWumlxyXG4gICAgICAgIHB1YmxpYyBzZXRBY3RpdmVTdGF0ZShhY3RpdmU6IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5fYWN0aXZlID0gYWN0aXZlO1xyXG4gICAgICAgICAgICB0aGlzLnRyZWF0U2Nyb2xsUG9zaXRpb24oKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISBhY3RpdmUg54q25oWL5Yik5a6aXHJcbiAgICAgICAgcHVibGljIGlzQWN0aXZlKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fYWN0aXZlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIHNjcm9sbGVyIOOBrueorumhnuOCkuWPluW+l1xyXG4gICAgICAgIHB1YmxpYyBnZXRTY3JvbGxlclR5cGUoKTogc3RyaW5nIHtcclxuICAgICAgICAgICAgcmV0dXJuICg8YW55PnRoaXMuX3NldHRpbmdzLnNjcm9sbGVyRmFjdG9yeSkudHlwZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOeKtuaFi+OBq+W/nOOBmOOBn+OCueOCr+ODreODvOODq+S9jee9ruOBruS/neWtmC/lvqnlhYNcclxuICAgICAgICAgKiBjZHAudWkuZnMuanM6IFBhZ2VUYWJMaXN0VmlldyDjgYzlrp/pqJPnmoTjgavkvb/nlKhcclxuICAgICAgICAgKiBUT0RPOiDigLtpc2Nyb2xsIOOBr+acquWvvuW/nFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyB0cmVhdFNjcm9sbFBvc2l0aW9uKCk6IHZvaWQge1xyXG4gICAgICAgICAgICBsZXQgaTogbnVtYmVyO1xyXG4gICAgICAgICAgICBsZXQgdHJhbnNmb3JtID0ge307XHJcblxyXG4gICAgICAgICAgICBsZXQgdXBkYXRlT2Zmc2V0ID0gKCR0YXJnZXQ6IEpRdWVyeSwgb2Zmc2V0PzogbnVtYmVyKTogSlF1ZXJ5ID0+IHtcclxuICAgICAgICAgICAgICAgIG9mZnNldCA9IG9mZnNldCB8fCAodGhpcy5fc2Nyb2xsZXIuZ2V0UG9zKCkgLSB0aGlzLl9sYXN0QWN0aXZlUGFnZUNvbnRleHQucG9zKTtcclxuICAgICAgICAgICAgICAgIGlmIChfVXRpbHMuZ2V0Q3NzTWF0cml4VmFsdWUoJHRhcmdldCwgXCJ0cmFuc2xhdGVZXCIpICE9PSBvZmZzZXQpIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgX1V0aWxzLmNzc1ByZWZpeGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybVtfVXRpbHMuY3NzUHJlZml4ZXNbaV0gKyBcInRyYW5zZm9ybVwiXSA9IFwidHJhbnNsYXRlM2QoMHB4LFwiICsgb2Zmc2V0ICsgXCJweCwwcHgpXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICR0YXJnZXQuY3NzKHRyYW5zZm9ybSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICR0YXJnZXQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBsZXQgY2xlYXJPZmZzZXQgPSAoJHRhcmdldDogSlF1ZXJ5KTogSlF1ZXJ5ID0+IHtcclxuICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBfVXRpbHMuY3NzUHJlZml4ZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm1bX1V0aWxzLmNzc1ByZWZpeGVzW2ldICsgXCJ0cmFuc2Zvcm1cIl0gPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgJHRhcmdldC5jc3ModHJhbnNmb3JtKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiAkdGFyZ2V0O1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuX2FjdGl2ZSkge1xyXG4gICAgICAgICAgICAgICAgLy8g5Lul5LiL44Gu44K544Kz44O844OX44Gu5Yem55CG44Gr5a++44GX44Gm55S76Z2i5pu05paw44KSMeWbnuOBq+OBp+OBjeOBquOBhOOBn+OCgeOAgUpCLCBJQ1Mg44Gn44Gv44Gh44KJ44Gk44GN44GM55m655Sf44GZ44KL44CCS2l0a2F0IOS7pemZjeOBr+iJr+WlveOAglxyXG4gICAgICAgICAgICAgICAgKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fc2Nyb2xsZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2Nyb2xsZXIuc2Nyb2xsVG8odGhpcy5fbGFzdEFjdGl2ZVBhZ2VDb250ZXh0LnBvcywgZmFsc2UsIDApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjbGVhck9mZnNldCh0aGlzLl8kbWFwKS5jc3MoXCJkaXNwbGF5XCIsIFwiYmxvY2tcIik7XHJcbiAgICAgICAgICAgICAgICB9KSgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX3NldHRpbmdzLnVzZUR1bW15SW5hY3RpdmVTY3JvbGxNYXApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnByZXBhcmVJbmFjdGl2ZU1hcCgpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX3NldHRpbmdzLnVzZUR1bW15SW5hY3RpdmVTY3JvbGxNYXApIHtcclxuICAgICAgICAgICAgICAgICAgICB1cGRhdGVPZmZzZXQodGhpcy5wcmVwYXJlSW5hY3RpdmVNYXAoKSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZU9mZnNldCh0aGlzLl8kbWFwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIGluYWN0aXZlIOeUqCBNYXAg44Gu55Sf5oiQXHJcbiAgICAgICAgcHJpdmF0ZSBwcmVwYXJlSW5hY3RpdmVNYXAoKTogSlF1ZXJ5IHtcclxuICAgICAgICAgICAgbGV0ICRwYXJlbnQgPSB0aGlzLl8kbWFwLnBhcmVudCgpO1xyXG4gICAgICAgICAgICBsZXQgJGluYWN0aXZlTWFwID0gJHBhcmVudC5maW5kKF9Db25maWcuSU5BQ1RJVkVfQ0xBU1NfU0VMRUNUT1IpO1xyXG4gICAgICAgICAgICBpZiAoJGluYWN0aXZlTWFwLmxlbmd0aCA8PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgY3VycmVudFBhZ2VJbmRleCA9IHRoaXMuZ2V0UGFnZUluZGV4KCk7XHJcbiAgICAgICAgICAgICAgICBsZXQgJGxpc3RJdGVtVmlld3MgPSB0aGlzLl8kbWFwLmNsb25lKCkuY2hpbGRyZW4oKS5maWx0ZXIoKGluZGV4OiBudW1iZXIsIGVsZW1lbnQ6IEhUTUxFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHBhZ2VJbmRleCA9IH5+JChlbGVtZW50KS5hdHRyKF9Db25maWcuREFUQV9QQUdFX0lOREVYKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudFBhZ2VJbmRleCAtIDEgPD0gcGFnZUluZGV4IHx8IHBhZ2VJbmRleCA8PSBjdXJyZW50UGFnZUluZGV4ICsgMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAkaW5hY3RpdmVNYXAgPSAkKFwiPHNlY3Rpb24gY2xhc3M9J1wiICsgX0NvbmZpZy5TQ1JPTExfTUFQX0NMQVNTICsgXCIgXCIgKyBfQ29uZmlnLklOQUNUSVZFX0NMQVNTICsgXCInPjwvc2VjdGlvbj5cIilcclxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCRsaXN0SXRlbVZpZXdzKVxyXG4gICAgICAgICAgICAgICAgICAgIC5oZWlnaHQodGhpcy5fbWFwSGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgICRwYXJlbnQuYXBwZW5kKCRpbmFjdGl2ZU1hcCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl8kbWFwLmNzcyhcImRpc3BsYXlcIiwgXCJub25lXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiAkaW5hY3RpdmVNYXA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIEltcGxlbWVudHM6IElMaXN0VmlldyDjg5fjg63jg5XjgqHjgqTjg6vnrqHnkIZcclxuXHJcbiAgICAgICAgLy8hIOWIneacn+WMlua4iOOBv+OBi+WIpOWumlxyXG4gICAgICAgIGlzSW5pdGlhbGl6ZWQoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIHJldHVybiAhIXRoaXMuXyRyb290O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOODl+ODreODkeODhuOCo+OCkuaMh+WumuOBl+OBpuOAgUxpbmVQcm9maWxlIOOCkueuoeeQhlxyXG4gICAgICAgIGFkZEl0ZW0oXHJcbiAgICAgICAgICAgIGhlaWdodDogbnVtYmVyLFxyXG4gICAgICAgICAgICBpbml0aWFsaXplcjogbmV3IChvcHRpb25zPzogYW55KSA9PiBCYXNlTGlzdEl0ZW1WaWV3LFxyXG4gICAgICAgICAgICBpbmZvOiBhbnksXHJcbiAgICAgICAgICAgIGluc2VydFRvPzogbnVtYmVyXHJcbiAgICAgICAgKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuX2FkZExpbmUobmV3IExpbmVQcm9maWxlKHRoaXMsIE1hdGguZmxvb3IoaGVpZ2h0KSwgaW5pdGlhbGl6ZXIsIGluZm8pLCBpbnNlcnRUbyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg44OX44Ot44OR44OG44Kj44KS5oyH5a6a44GX44Gm44CBTGluZVByb2ZpbGUg44KS566h55CGLiDnmbvpjLIgZnJhbWV3b3JrIOOBjOS9v+eUqOOBmeOCi1xyXG4gICAgICAgIHB1YmxpYyBfYWRkTGluZShfbGluZTogYW55LCBpbnNlcnRUbz86IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgICAgICBsZXQgaSwgbjtcclxuICAgICAgICAgICAgbGV0IGRlbHRhSGVpZ2h0ID0gMDtcclxuICAgICAgICAgICAgbGV0IGxpbmVzOiBMaW5lUHJvZmlsZVtdID0gKF9saW5lIGluc3RhbmNlb2YgQXJyYXkpID8gPExpbmVQcm9maWxlW10+X2xpbmUgOiBbX2xpbmVdO1xyXG4gICAgICAgICAgICBsZXQgYWRkVGFpbCA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgaWYgKG51bGwgPT0gaW5zZXJ0VG8pIHtcclxuICAgICAgICAgICAgICAgIGluc2VydFRvID0gdGhpcy5fbGluZXMubGVuZ3RoO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoaW5zZXJ0VG8gPT09IHRoaXMuX2xpbmVzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgYWRkVGFpbCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIHNjcm9sbCBtYXAg44Gu5pu05pawXHJcbiAgICAgICAgICAgIGZvciAoaSA9IDAsIG4gPSBsaW5lcy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGRlbHRhSGVpZ2h0ICs9IGxpbmVzW2ldLmhlaWdodDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVNjcm9sbE1hcEhlaWdodChkZWx0YUhlaWdodCk7XHJcblxyXG4gICAgICAgICAgICAvLyDmjL/lhaVcclxuICAgICAgICAgICAgZm9yIChpID0gbGluZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2xpbmVzLnNwbGljZShpbnNlcnRUbywgMCwgbGluZXNbaV0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBwYWdlIOioreWumuOBruino+mZpFxyXG4gICAgICAgICAgICBpZiAoIWFkZFRhaWwpIHtcclxuICAgICAgICAgICAgICAgIGlmICgwID09PSBpbnNlcnRUbykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJQYWdlKCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG51bGwgIT0gdGhpcy5fbGluZXNbaW5zZXJ0VG8gLSAxXS5wYWdlSW5kZXgpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsZWFyUGFnZSh0aGlzLl9saW5lc1tpbnNlcnRUbyAtIDFdLnBhZ2VJbmRleCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIG9mZnNldCDjga7lho3oqIjnrpdcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVQcm9maWxlcyhpbnNlcnRUbyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg5oyH5a6a44GX44GfIEl0ZW0g44KS5YmK6ZmkXHJcbiAgICAgICAgcmVtb3ZlSXRlbShpbmRleDogbnVtYmVyLCBzaXplPzogbnVtYmVyLCBkZWxheT86IG51bWJlcik6IHZvaWQ7XHJcbiAgICAgICAgcmVtb3ZlSXRlbShpbmRleDogbnVtYmVyW10sIGRlbGF5PzogbnVtYmVyKTogdm9pZDtcclxuICAgICAgICByZW1vdmVJdGVtKGluZGV4OiBhbnksIGFyZzI/OiBudW1iZXIsIGFyZzM/OiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKGluZGV4IGluc3RhbmNlb2YgQXJyYXkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3JlbW92ZUxpbmVzKGluZGV4LCBhcmcyKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3JlbW92ZUxpbmUoaW5kZXgsIGFyZzIsIGFyZzMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg5oyH5a6a44GX44GfIExpbmVQcm9maWxlIOOCkuWJiumZpDog6YCj57aaIGluZGV4IOeJiFxyXG4gICAgICAgIHB1YmxpYyBfcmVtb3ZlTGluZShpbmRleDogbnVtYmVyLCBzaXplPzogbnVtYmVyLCBkZWxheT86IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAobnVsbCA9PSBzaXplKSB7XHJcbiAgICAgICAgICAgICAgICBzaXplID0gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoaW5kZXggPCAwIHx8IHRoaXMuX2xpbmVzLmxlbmd0aCA8IGluZGV4ICsgc2l6ZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihUQUcgKyBcImxvZ2ljIGVycm9yLiByZW1vdmVJdGVtKCksIGludmFsaWQgaW5kZXg6IFwiICsgaW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBkZWxheSA9IChudWxsICE9IGRlbGF5KSA/IGRlbGF5IDogMDtcclxuXHJcbiAgICAgICAgICAgIGxldCBkZWx0YSA9IDA7XHJcbiAgICAgICAgICAgIGxldCByZW1vdmVkOiBMaW5lUHJvZmlsZVtdID0gW107XHJcbiAgICAgICAgICAgIGxldCBtYXBUcmFuc2l0aW9uID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAvLyDliYrpmaTlgJnoo5zjgajlpInljJbph4/jga7nrpflh7pcclxuICAgICAgICAgICAgKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBsaW5lOiBMaW5lUHJvZmlsZTtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2l6ZTsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGluZSA9IHRoaXMuX2xpbmVzW2luZGV4ICsgaV07XHJcbiAgICAgICAgICAgICAgICAgICAgZGVsdGEgKz0gbGluZS5oZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g5YmK6Zmk6KaB57Sg44GuIHotaW5kZXgg44Gu5Yid5pyf5YyWXHJcbiAgICAgICAgICAgICAgICAgICAgbGluZS5yZXNldERlcHRoKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlZC5wdXNoKGxpbmUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8g6Ieq5YuV6Kit5a6a44O75YmK6Zmk6YGF5bu25pmC6ZaT44GM6Kit5a6a44GV44KM44GL44Gk44CB44K544Kv44Ot44O844Or44Od44K444K344On44Oz44Gr5aSJ5pu044GM44GC44KL5aC05ZCI44GvIHRyYW5zaXRpb24g6Kit5a6aXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fc2V0dGluZ3MucmVtb3ZlSXRlbVdpdGhUcmFuc2l0aW9uICYmICgwIDwgZGVsYXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGN1cnJlbnQgPSB0aGlzLmdldFNjcm9sbFBvcygpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBwb3NNYXggPSB0aGlzLmdldFNjcm9sbFBvc01heCgpIC0gZGVsdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFwVHJhbnNpdGlvbiA9IChwb3NNYXggPCBjdXJyZW50KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSkoKTtcclxuXHJcbiAgICAgICAgICAgIC8vIOabtOaWsFxyXG4gICAgICAgICAgICAoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gdHJhbnNpdGlvbiDoqK3lrppcclxuICAgICAgICAgICAgICAgIGlmIChtYXBUcmFuc2l0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXR1cFNjcm9sbE1hcFRyYW5zaXRpb24odGhpcy5fJG1hcCwgZGVsYXkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gcGFnZSDoqK3lrprjga7op6PpmaRcclxuICAgICAgICAgICAgICAgIGlmIChudWxsICE9IHRoaXMuX2xpbmVzW2luZGV4XS5wYWdlSW5kZXgpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsZWFyUGFnZSh0aGlzLl9saW5lc1tpbmRleF0ucGFnZUluZGV4KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIOOCueOCr+ODreODvOODq+mgmOWfn+OBruabtOaWsFxyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVTY3JvbGxNYXBIZWlnaHQoLWRlbHRhKTtcclxuICAgICAgICAgICAgICAgIC8vIOmFjeWIl+OBi+OCieWJiumZpFxyXG4gICAgICAgICAgICAgICAgdGhpcy5fbGluZXMuc3BsaWNlKGluZGV4LCBzaXplKTtcclxuICAgICAgICAgICAgICAgIC8vIG9mZnNldCDjga7lho3oqIjnrpdcclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUHJvZmlsZXMoaW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgLy8g6YGF5bu25YmK6ZmkXHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZW1vdmVkLmZvckVhY2goKGxpbmUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGluZS5pbmFjdGl2YXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9LCBkZWxheSk7XHJcbiAgICAgICAgICAgIH0pKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg5oyH5a6a44GX44GfIExpbmVQcm9maWxlIOOCkuWJiumZpDogcmFuZG9tIGFjY2VzcyDniYhcclxuICAgICAgICBwdWJsaWMgX3JlbW92ZUxpbmVzKGluZGV4ZXM6IG51bWJlcltdLCBkZWxheT86IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgICAgICBkZWxheSA9IChudWxsICE9IGRlbGF5KSA/IGRlbGF5IDogMDtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBuID0gaW5kZXhlcy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGlmIChpIDwgMCB8fCB0aGlzLl9saW5lcy5sZW5ndGggPCBpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihUQUcgKyBcImxvZ2ljIGVycm9yLiByZW1vdmVJdGVtKCksIGludmFsaWQgaW5kZXg6IFwiICsgaSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsZXQgZGVsdGEgPSAwO1xyXG4gICAgICAgICAgICBsZXQgcmVtb3ZlZDogTGluZVByb2ZpbGVbXSA9IFtdO1xyXG4gICAgICAgICAgICBsZXQgbWFwVHJhbnNpdGlvbiA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgLy8g5YmK6Zmk5YCZ6KOc44Go5aSJ5YyW6YeP44Gu566X5Ye6XHJcbiAgICAgICAgICAgICgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgbGluZTogTGluZVByb2ZpbGU7XHJcbiAgICAgICAgICAgICAgICBpbmRleGVzLmZvckVhY2goKGluZGV4OiBudW1iZXIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBsaW5lID0gdGhpcy5fbGluZXNbaW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbHRhICs9IGxpbmUuaGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIOWJiumZpOimgee0oOOBriB6LWluZGV4IOOBruWIneacn+WMllxyXG4gICAgICAgICAgICAgICAgICAgIGxpbmUucmVzZXREZXB0aCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZWQucHVzaChsaW5lKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgLy8g6Ieq5YuV6Kit5a6a44O75YmK6Zmk6YGF5bu25pmC6ZaT44GM6Kit5a6a44GV44KM44GL44Gk44CB44K544Kv44Ot44O844Or44Od44K444K344On44Oz44Gr5aSJ5pu044GM44GC44KL5aC05ZCI44GvIHRyYW5zaXRpb24g6Kit5a6aXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fc2V0dGluZ3MucmVtb3ZlSXRlbVdpdGhUcmFuc2l0aW9uICYmICgwIDwgZGVsYXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGN1cnJlbnQgPSB0aGlzLmdldFNjcm9sbFBvcygpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBwb3NNYXggPSB0aGlzLmdldFNjcm9sbFBvc01heCgpIC0gZGVsdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFwVHJhbnNpdGlvbiA9IChwb3NNYXggPCBjdXJyZW50KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSkoKTtcclxuXHJcbiAgICAgICAgICAgIC8vIOabtOaWsFxyXG4gICAgICAgICAgICAoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gdHJhbnNpdGlvbiDoqK3lrppcclxuICAgICAgICAgICAgICAgIGlmIChtYXBUcmFuc2l0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXR1cFNjcm9sbE1hcFRyYW5zaXRpb24odGhpcy5fJG1hcCwgZGVsYXkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaW5kZXhlcy5mb3JFYWNoKChpbmRleDogbnVtYmVyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gcGFnZSDoqK3lrprjga7op6PpmaRcclxuICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPSB0aGlzLl9saW5lc1tpbmRleF0ucGFnZUluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJQYWdlKHRoaXMuX2xpbmVzW2luZGV4XS5wYWdlSW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvLyDphY3liJfjgYvjgonliYrpmaRcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9saW5lcy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIG9mZnNldCDjga7lho3oqIjnrpdcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVByb2ZpbGVzKGluZGV4KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgLy8g44K544Kv44Ot44O844Or6aCY5Z+f44Gu5pu05pawXHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVNjcm9sbE1hcEhlaWdodCgtZGVsdGEpO1xyXG4gICAgICAgICAgICAgICAgLy8g6YGF5bu25YmK6ZmkXHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZW1vdmVkLmZvckVhY2goKGxpbmUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGluZS5pbmFjdGl2YXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9LCBkZWxheSk7XHJcbiAgICAgICAgICAgIH0pKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgc2Nyb2xsIG1hcCDjga7jg4jjg6njg7Pjgrjjgrfjg6fjg7PoqK3lrppcclxuICAgICAgICBwcml2YXRlIHNldHVwU2Nyb2xsTWFwVHJhbnNpdGlvbigkbWFwOiBKUXVlcnksIGRlbGF5OiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICAgICAgbGV0IHRyYW5zaXRpb25FbmRIYW5kbGVyID0gKGV2ZW50OiBKUXVlcnlFdmVudE9iamVjdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgJG1hcC5vZmYoX1V0aWxzLnRyYW5zaXRpb25FbmQpO1xyXG4gICAgICAgICAgICAgICAgX1V0aWxzLmNsZWFyVHJhbnNpdGlvbnMoJG1hcCk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHRoaXMuXyRtYXAub24oX1V0aWxzLnRyYW5zaXRpb25FbmQsIHRyYW5zaXRpb25FbmRIYW5kbGVyKTtcclxuICAgICAgICAgICAgX1V0aWxzLnNldFRyYW5zZm9ybXNUcmFuc2l0aW9ucygkbWFwLCBcImhlaWdodFwiLCBkZWxheSwgXCJlYXNlXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOaMh+WumuOBl+OBnyBJdGVtIOOBq+ioreWumuOBl+OBn+aDheWgseOCkuWPluW+l1xyXG4gICAgICAgIGdldEl0ZW1JbmZvKHRhcmdldDogbnVtYmVyKTogYW55O1xyXG4gICAgICAgIGdldEl0ZW1JbmZvKHRhcmdldDogSlF1ZXJ5RXZlbnRPYmplY3QpOiBhbnk7XHJcbiAgICAgICAgZ2V0SXRlbUluZm8odGFyZ2V0OiBhbnkpOiBhbnkge1xyXG4gICAgICAgICAgICBsZXQgaW5kZXg6IG51bWJlcjtcclxuXHJcbiAgICAgICAgICAgIGxldCBwYXJzZXIgPSAoJHRhcmdldDogSlF1ZXJ5KTogbnVtYmVyID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICgkdGFyZ2V0Lmhhc0NsYXNzKF9Db25maWcuTElTVElURU1fQkFTRV9DTEFTUykpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gfn4kdGFyZ2V0LmF0dHIoX0NvbmZpZy5EQVRBX0NPTlRBSU5FUl9JTkRFWCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCR0YXJnZXQuaGFzQ2xhc3MoX0NvbmZpZy5TQ1JPTExfTUFQX0NMQVNTKSB8fCAkdGFyZ2V0Lmxlbmd0aCA8PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFRBRyArIFwiY2Fubm90IGRpdGVjdCBsaW5lIGZyb20gZXZlbnQgb2JqZWN0LlwiKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlcigkdGFyZ2V0LnBhcmVudCgpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0YXJnZXQgaW5zdGFuY2VvZiAkLkV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICBpbmRleCA9IHBhcnNlcigkKHRhcmdldC5jdXJyZW50VGFyZ2V0KSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHRhcmdldCA9PT0gXCJudW1iZXJcIikge1xyXG4gICAgICAgICAgICAgICAgaW5kZXggPSB0YXJnZXQ7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChudWxsID09IGluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFRBRyArIFwibG9naWMgZXJyb3IuIHVuc3VwcG9ydGVkIGFyZyB0eXBlLiB0eXBlOiBcIiArIHR5cGVvZiB0YXJnZXQpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaW5kZXggPCAwIHx8IHRoaXMuX2xpbmVzLmxlbmd0aCA8PSBpbmRleCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihUQUcgKyBcImxvZ2ljIGVycm9yLiBpbnZhbGlkIHJhbmdlLiBpbmRleDogXCIgKyBpbmRleCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2xpbmVzW2luZGV4XS5pbmZvO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOOCouOCr+ODhuOCo+ODluODmuODvOOCuOOCkuabtOaWsFxyXG4gICAgICAgIHJlZnJlc2goKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGxldCB0YXJnZXRzOiBhbnkgPSB7fTtcclxuICAgICAgICAgICAgbGV0IHNlYXJjaENvdW50ID0gdGhpcy5fc2V0dGluZ3MucGFnZVByZXBhcmVDb3VudCArIHRoaXMuX3NldHRpbmdzLnBhZ2VQcmVsb2FkQ291bnQ7XHJcbiAgICAgICAgICAgIGxldCBjdXJyZW50UGFnZUluZGV4ID0gdGhpcy5nZXRQYWdlSW5kZXgoKTtcclxuICAgICAgICAgICAgbGV0IGhpZ2hQcmlvcml0eUluZGV4OiBudW1iZXJbXSA9IFtdO1xyXG5cclxuICAgICAgICAgICAgbGV0IG9sZEV4c2lzdFBhZ2UgPSBfLmZpbHRlcih0aGlzLl9wYWdlcywgKHBhZ2U6IFBhZ2VQcm9maWxlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJpbmFjdGl2ZVwiICE9PSBwYWdlLnN0YXR1cztcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBsZXQgY2hhbmdlU3RhdGUgPSAoaW5kZXg6IG51bWJlcik6IHZvaWQgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGluZGV4ID09PSBjdXJyZW50UGFnZUluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0c1tpbmRleF0gPSBcImFjdGl2YXRlXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgaGlnaFByaW9yaXR5SW5kZXgucHVzaChpbmRleCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKF9VdGlscy5hYnMoY3VycmVudFBhZ2VJbmRleCAtIGluZGV4KSA8PSB0aGlzLl9zZXR0aW5ncy5wYWdlUHJlcGFyZUNvdW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0c1tpbmRleF0gPSBcImFjdGl2YXRlXCI7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9zZXR0aW5ncy5lbmFibGVIaWRkZW5QYWdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldHNbaW5kZXhdID0gXCJoaWRlXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0c1tpbmRleF0gPSBcImFjdGl2YXRlXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gY3VycmVudCBwYWdlIOOBriDliY3lvozjga8gaGlnaCBwcmlvcml0eSDjgavjgZnjgotcclxuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50UGFnZUluZGV4ICsgMSA9PT0gaW5kZXggfHwgY3VycmVudFBhZ2VJbmRleCAtIDEgPT09IGluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaGlnaFByaW9yaXR5SW5kZXgucHVzaChpbmRleCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvLyDlr77osaHnhKHjgZdcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2xpbmVzLmxlbmd0aCA8PSAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgaSA9IDA7XHJcbiAgICAgICAgICAgICAgICBsZXQgcGFnZUluZGV4ID0gMDtcclxuICAgICAgICAgICAgICAgIGxldCBvdmVyZmxvd1ByZXYgPSAwLCBvdmVyZmxvd05leHQgPSAwO1xyXG4gICAgICAgICAgICAgICAgbGV0IGJlZ2luSW5kZXggPSBjdXJyZW50UGFnZUluZGV4IC0gc2VhcmNoQ291bnQ7XHJcbiAgICAgICAgICAgICAgICBsZXQgZW5kSW5kZXggPSBjdXJyZW50UGFnZUluZGV4ICsgc2VhcmNoQ291bnQ7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHBhZ2VJbmRleCA9IGJlZ2luSW5kZXg7IHBhZ2VJbmRleCA8PSBlbmRJbmRleDsgcGFnZUluZGV4KyspIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocGFnZUluZGV4IDwgMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvdmVyZmxvd1ByZXYrKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9wYWdlcy5sZW5ndGggPD0gcGFnZUluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJmbG93TmV4dCsrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlU3RhdGUocGFnZUluZGV4KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoMCA8IG92ZXJmbG93UHJldikge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IDAsIHBhZ2VJbmRleCA9IGN1cnJlbnRQYWdlSW5kZXggKyBzZWFyY2hDb3VudCArIDE7IGkgPCBvdmVyZmxvd1ByZXY7IGkrKyAsIHBhZ2VJbmRleCsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9wYWdlcy5sZW5ndGggPD0gcGFnZUluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VTdGF0ZShwYWdlSW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoMCA8IG92ZXJmbG93TmV4dCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IDAsIHBhZ2VJbmRleCA9IGN1cnJlbnRQYWdlSW5kZXggLSBzZWFyY2hDb3VudCAtIDE7IGkgPCBvdmVyZmxvd05leHQ7IGkrKyAsIHBhZ2VJbmRleC0tKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYWdlSW5kZXggPCAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFuZ2VTdGF0ZShwYWdlSW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSkoKTtcclxuXHJcbiAgICAgICAgICAgIC8vIOS4jeimgeOBq+OBquOBo+OBnyBwYWdlIOOBriBpbmFjdGl2YXRlXHJcbiAgICAgICAgICAgIG9sZEV4c2lzdFBhZ2UuZm9yRWFjaCgocGFnZTogUGFnZVByb2ZpbGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBpbmRleCA9IHBhZ2UuaW5kZXg7XHJcbiAgICAgICAgICAgICAgICBpZiAobnVsbCA9PSB0YXJnZXRzW2luZGV4XSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhZ2UuaW5hY3RpdmF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIC8vIOWEquWFiCBwYWdlIOOBriBhY3RpdmF0ZVxyXG4gICAgICAgICAgICBoaWdoUHJpb3JpdHlJbmRleFxyXG4gICAgICAgICAgICAgICAgLnNvcnQoKGxoczogbnVtYmVyLCByaHM6IG51bWJlcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChsaHMgPCByaHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobGhzID4gcmhzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuZm9yRWFjaCgoaW5kZXg6IG51bWJlcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0luaXRpYWxpemVkKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3BhZ2VzW2luZGV4XSAmJiB0aGlzLl9wYWdlc1tpbmRleF0uYWN0aXZhdGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0sIDApO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyDjgZ3jga7jgbvjgYvjga4gcGFnZSDjga4g54q25oWL5aSJ5pu0XHJcbiAgICAgICAgICAgIF8uZWFjaCh0YXJnZXRzLCAoYWN0aW9uOiBzdHJpbmcsIGtleTogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0luaXRpYWxpemVkKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGluZGV4ID0gfn5rZXk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoYWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiYWN0aXZhdGVcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9wYWdlc1tpbmRleF0gJiYgdGhpcy5fcGFnZXNbaW5kZXhdLmFjdGl2YXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiaGlkZVwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3BhZ2VzW2luZGV4XSAmJiB0aGlzLl9wYWdlc1tpbmRleF0uaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImluYWN0aXZhdGVcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oVEFHICsgXCJ1bmV4cGVjdGVkIG9wZXJhdGlvbjogaW5hY3RpdmF0ZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFRBRyArIFwidW5rbm93biBvcGVyYXRpb246IFwiICsgdGFyZ2V0c1trZXldKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sIDApO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIC8vIOabtOaWsOW+jOOBq+S9v+eUqOOBl+OBquOBi+OBo+OBnyBET00g44KS5YmK6ZmkXHJcbiAgICAgICAgICAgIHRoaXMuZmluZFJlY3ljbGVFbGVtZW50cygpLnJlbW92ZSgpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fbGFzdEFjdGl2ZVBhZ2VDb250ZXh0LmZyb20gPSB0aGlzLl9wYWdlc1tjdXJyZW50UGFnZUluZGV4XS5nZXRMaW5lUHJvZmlsZUZpcnN0KCkgP1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcGFnZXNbY3VycmVudFBhZ2VJbmRleF0uZ2V0TGluZVByb2ZpbGVGaXJzdCgpLmluZGV4IDogMDtcclxuICAgICAgICAgICAgdGhpcy5fbGFzdEFjdGl2ZVBhZ2VDb250ZXh0LnRvID0gdGhpcy5fcGFnZXNbY3VycmVudFBhZ2VJbmRleF0uZ2V0TGluZVByb2ZpbGVMYXN0KCkgP1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcGFnZXNbY3VycmVudFBhZ2VJbmRleF0uZ2V0TGluZVByb2ZpbGVMYXN0KCkuaW5kZXggOiAwO1xyXG4gICAgICAgICAgICB0aGlzLl9sYXN0QWN0aXZlUGFnZUNvbnRleHQuaW5kZXggPSBjdXJyZW50UGFnZUluZGV4O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOacquOCouOCteOCpOODs+ODmuODvOOCuOOCkuani+eviVxyXG4gICAgICAgIHVwZGF0ZSgpOiB2b2lkIHtcclxuICAgICAgICAgICAgbGV0IGluZGV4ID0gdGhpcy5fcGFnZXMubGVuZ3RoO1xyXG4gICAgICAgICAgICB0aGlzLmFzc2lnblBhZ2UoaW5kZXgpO1xyXG4gICAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDjg5rjg7zjgrjjgqLjgrXjgqTjg7PjgpLlho3mp4vmiJBcclxuICAgICAgICByZWJ1aWxkKCk6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLmNsZWFyUGFnZSgpO1xyXG4gICAgICAgICAgICB0aGlzLmFzc2lnblBhZ2UoKTtcclxuICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg566h6L2E44OH44O844K/44KS56C05qOEXHJcbiAgICAgICAgcmVsZWFzZSgpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5fbGluZXMuZm9yRWFjaCgobGluZTogTGluZVByb2ZpbGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGxpbmUuaW5hY3RpdmF0ZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5fcGFnZXMgPSBbXTtcclxuICAgICAgICAgICAgdGhpcy5fbGluZXMgPSBbXTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuXyRtYXApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX21hcEhlaWdodCA9IDA7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl8kbWFwLmhlaWdodCgwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBJbXBsZW1lbnRzOiBJTGlzdFZpZXcgQmFja3VwIC8gUmVzdG9yZVxyXG5cclxuICAgICAgICAvLyEg5YaF6YOo44OH44O844K/44KS44OQ44OD44Kv44Ki44OD44OXXHJcbiAgICAgICAgYmFja3VwKGtleTogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIGlmIChudWxsID09IHRoaXMuX2JhY2t1cFtrZXldKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9iYWNrdXBba2V5XSA9IHtcclxuICAgICAgICAgICAgICAgICAgICBsaW5lczogdGhpcy5fbGluZXMsXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOWGhemDqOODh+ODvOOCv+OCkuODquOCueODiOOColxyXG4gICAgICAgIHJlc3RvcmUoa2V5OiBzdHJpbmcsIHJlYnVpbGQ6IGJvb2xlYW4gPSB0cnVlKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIGlmIChudWxsID09IHRoaXMuX2JhY2t1cFtrZXldKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKDAgPCB0aGlzLl9saW5lcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVsZWFzZSgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9hZGRMaW5lKHRoaXMuX2JhY2t1cFtrZXldLmxpbmVzKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChyZWJ1aWxkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlYnVpbGQoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg44OQ44OD44Kv44Ki44OD44OX44OH44O844K/44Gu5pyJ54ShXHJcbiAgICAgICAgaGFzQmFja3VwKGtleTogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIGlmIChudWxsICE9IHRoaXMuX2JhY2t1cFtrZXldKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOODkOODg+OCr+OCouODg+ODl+ODh+ODvOOCv+OBruegtOajhFxyXG4gICAgICAgIGNsZWFyQmFja3VwKGtleT86IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICBpZiAobnVsbCA9PSBrZXkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2JhY2t1cCA9IHt9O1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobnVsbCAhPSB0aGlzLl9iYWNrdXBba2V5XSkge1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuX2JhY2t1cFtrZXldO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDjg5Djg4Pjgq/jgqLjg4Pjg5fjg4fjg7zjgr/jgavjgqLjgq/jgrvjgrlcclxuICAgICAgICBnZXQgYmFja3VwRGF0YSgpOiBhbnkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fYmFja3VwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBJbXBsZW1lbnRzOiBJTGlzdFZpZXcgU2Nyb2xsXHJcblxyXG4gICAgICAgIC8vISDjgrnjgq/jg63jg7zjg6vjgqTjg5njg7Pjg4jjg4/jg7Pjg4njg6noqK3lrpov6Kej6ZmkXHJcbiAgICAgICAgc2V0U2Nyb2xsSGFuZGxlcihoYW5kbGVyOiAoZXZlbnQ6IEpRdWVyeUV2ZW50T2JqZWN0KSA9PiB2b2lkLCBvbjogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fc2Nyb2xsZXIpIHtcclxuICAgICAgICAgICAgICAgIGlmIChvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3Njcm9sbGVyLm9uKFwic2Nyb2xsXCIsIGhhbmRsZXIpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9zY3JvbGxlci5vZmYoXCJzY3JvbGxcIiwgaGFuZGxlcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDjgrnjgq/jg63jg7zjg6vntYLkuobjgqTjg5njg7Pjg4jjg4/jg7Pjg4njg6noqK3lrpov6Kej6ZmkXHJcbiAgICAgICAgc2V0U2Nyb2xsU3RvcEhhbmRsZXIoaGFuZGxlcjogKGV2ZW50OiBKUXVlcnlFdmVudE9iamVjdCkgPT4gdm9pZCwgb246IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX3Njcm9sbGVyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAob24pIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9zY3JvbGxlci5vbihcInNjcm9sbHN0b3BcIiwgaGFuZGxlcik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3Njcm9sbGVyLm9mZihcInNjcm9sbHN0b3BcIiwgaGFuZGxlcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDjgrnjgq/jg63jg7zjg6vkvY3nva7jgpLlj5blvpdcclxuICAgICAgICBnZXRTY3JvbGxQb3MoKTogbnVtYmVyIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Njcm9sbGVyID8gdGhpcy5fc2Nyb2xsZXIuZ2V0UG9zKCkgOiAwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOOCueOCr+ODreODvOODq+S9jee9ruOBruacgOWkp+WApOOCkuWPluW+l1xyXG4gICAgICAgIGdldFNjcm9sbFBvc01heCgpOiBudW1iZXIge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc2Nyb2xsZXIgPyB0aGlzLl9zY3JvbGxlci5nZXRQb3NNYXgoKSA6IDA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg44K544Kv44Ot44O844Or5L2N572u44KS5oyH5a6aXHJcbiAgICAgICAgc2Nyb2xsVG8ocG9zOiBudW1iZXIsIGFuaW1hdGU/OiBib29sZWFuLCB0aW1lPzogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9zY3JvbGxlcikge1xyXG4gICAgICAgICAgICAgICAgaWYgKHBvcyA8IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oVEFHICsgXCJpbnZhbGlkIHBvc2l0aW9uLCB0b28gc21hbGwuIFtwb3M6IFwiICsgcG9zICsgXCJdXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHBvcyA9IDA7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuX3Njcm9sbGVyLmdldFBvc01heCgpIDwgcG9zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFRBRyArIFwiaW52YWxpZCBwb3NpdGlvbiwgdG9vIGJpZy4gW3BvczogXCIgKyBwb3MgKyBcIl1cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9zID0gdGhpcy5fc2Nyb2xsZXIuZ2V0UG9zTWF4KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBwb3Mg44Gu44G/5YWI6aeG44GR44Gm5pu05pawXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9sYXN0QWN0aXZlUGFnZUNvbnRleHQucG9zID0gcG9zO1xyXG4gICAgICAgICAgICAgICAgaWYgKHBvcyAhPT0gdGhpcy5fc2Nyb2xsZXIuZ2V0UG9zKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9zY3JvbGxlci5zY3JvbGxUbyhwb3MsIGFuaW1hdGUsIHRpbWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg5oyH5a6a44GV44KM44GfIExpc3RJdGVtVmlldyDjga7ooajnpLrjgpLkv53oqLxcclxuICAgICAgICBlbnN1cmVWaXNpYmxlKGluZGV4OiBudW1iZXIsIG9wdGlvbnM/OiBFbnN1cmVWaXNpYmxlT3B0aW9ucyk6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAoaW5kZXggPCAwIHx8IHRoaXMuX2xpbmVzLmxlbmd0aCA8PSBpbmRleCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFRBRyArIFwiZW5zdXJlVmlzaWJsZSgpLCBpbnZhbGlkIGluZGV4LCBub29wLiBbaW5kZXg6IFwiICsgaW5kZXggKyBcIl1cIik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIXRoaXMuX3Njcm9sbGVyKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oVEFHICsgXCJzY3JvbGxlciBpcyBub3QgcmVhZHkuXCIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IHRhcmdldCA9IHRoaXMuX2xpbmVzW2luZGV4XTtcclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgZGVmYXVsdE9wdGlvbnM6IEVuc3VyZVZpc2libGVPcHRpb25zID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhcnRpYWxPSzogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBzZXRUb3A6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIGFuaW1hdGU6IHRoaXMuX3NldHRpbmdzLmVuYWJsZUFuaW1hdGlvbixcclxuICAgICAgICAgICAgICAgICAgICB0aW1lOiB0aGlzLl9zZXR0aW5ncy5hbmltYXRpb25EdXJhdGlvbixcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjazogKCk6IHZvaWQgPT4geyAvKiBub29wICovIH0sXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgbGV0IG9wZXJhdGlvbjogRW5zdXJlVmlzaWJsZU9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgZGVmYXVsdE9wdGlvbnMsIG9wdGlvbnMpO1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBjdXJyZW50U2NvcGUgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZnJvbTogdGhpcy5fc2Nyb2xsZXIuZ2V0UG9zKCksXHJcbiAgICAgICAgICAgICAgICAgICAgdG86IHRoaXMuX3Njcm9sbGVyLmdldFBvcygpICsgdGhpcy5fYmFzZUhlaWdodCxcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBsZXQgdGFyZ2V0U2NvcGUgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZnJvbTogdGFyZ2V0Lm9mZnNldCxcclxuICAgICAgICAgICAgICAgICAgICB0bzogdGFyZ2V0Lm9mZnNldCArIHRhcmdldC5oZWlnaHQsXHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBpc0luU2NvcGUgPSAoKTogYm9vbGVhbiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wZXJhdGlvbi5wYXJ0aWFsT0spIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldFNjb3BlLmZyb20gPD0gY3VycmVudFNjb3BlLmZyb20pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50U2NvcGUuZnJvbSA8PSB0YXJnZXRTY29wZS50bykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0U2NvcGUuZnJvbSA8PSBjdXJyZW50U2NvcGUudG8pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTY29wZS5mcm9tIDw9IHRhcmdldFNjb3BlLmZyb20gJiYgdGFyZ2V0U2NvcGUudG8gPD0gY3VycmVudFNjb3BlLnRvKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IGRldGVjdFBvc2l0aW9uID0gKCk6IG51bWJlciA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldFNjb3BlLmZyb20gPCBjdXJyZW50U2NvcGUuZnJvbSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGFyZ2V0U2NvcGUuZnJvbTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRTY29wZS5mcm9tIDwgdGFyZ2V0U2NvcGUuZnJvbSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGFyZ2V0Lm9mZnNldCAtIHRhcmdldC5oZWlnaHQ7IC8vIGJvdHRvbSDlkIjjgo/jgZvjga/mg4XloLHkuI3otrPjgavjgojjgorkuI3lj69cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oVEFHICsgXCJsb2dpYyBlcnJvci5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IHBvczogbnVtYmVyO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChvcGVyYXRpb24uc2V0VG9wKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9zID0gdGFyZ2V0U2NvcGUuZnJvbTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNJblNjb3BlKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBub29wLlxyXG4gICAgICAgICAgICAgICAgICAgIG9wZXJhdGlvbi5jYWxsYmFjaygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9zID0gZGV0ZWN0UG9zaXRpb24oKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyDoo5zmraNcclxuICAgICAgICAgICAgICAgIGlmIChwb3MgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9zID0gMDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5fc2Nyb2xsZXIuZ2V0UG9zTWF4KCkgPCBwb3MpIHtcclxuICAgICAgICAgICAgICAgICAgICBwb3MgPSB0aGlzLl9zY3JvbGxlci5nZXRQb3NNYXgoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KG9wZXJhdGlvbi5jYWxsYmFjaywgb3BlcmF0aW9uLnRpbWUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxUbyhwb3MsIG9wZXJhdGlvbi5hbmltYXRlLCBvcGVyYXRpb24udGltZSk7XHJcbiAgICAgICAgICAgIH0pKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIGltcGxlbWVudHM6IElMaXN0Vmlld0ZyYW1ld29yazpcclxuXHJcbiAgICAgICAgLy8hIFNjcm9sbCBNYXAg44Gu6auY44GV44KS5Y+W5b6XXHJcbiAgICAgICAgZ2V0U2Nyb2xsTWFwSGVpZ2h0KCk6IG51bWJlciB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl8kbWFwID8gdGhpcy5fbWFwSGVpZ2h0IDogMDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISBTY3JvbGwgTWFwIOOBrumrmOOBleOCkuabtOaWsC4gZnJhbWV3b3JrIOOBjOS9v+eUqOOBmeOCiy5cclxuICAgICAgICB1cGRhdGVTY3JvbGxNYXBIZWlnaHQoZGVsdGE6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fJG1hcCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbWFwSGVpZ2h0ICs9IGRlbHRhO1xyXG4gICAgICAgICAgICAgICAgLy8gZm9yIGZhaWwgc2FmZS5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9tYXBIZWlnaHQgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbWFwSGVpZ2h0ID0gMDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuXyRtYXAuaGVpZ2h0KHRoaXMuX21hcEhlaWdodCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDlhoXpg6ggUHJvZmlsZSDjga7mm7TmlrAuIGZyYW1ld29yayDjgYzkvb/nlKjjgZnjgosuXHJcbiAgICAgICAgdXBkYXRlUHJvZmlsZXMoZnJvbTogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGxldCBpLCBuO1xyXG4gICAgICAgICAgICBsZXQgbGFzdDogTGluZVByb2ZpbGU7XHJcbiAgICAgICAgICAgIGZvciAoaSA9IGZyb20sIG4gPSB0aGlzLl9saW5lcy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGlmICgwIDwgaSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxhc3QgPSB0aGlzLl9saW5lc1tpIC0gMV07XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbGluZXNbaV0uaW5kZXggPSBsYXN0LmluZGV4ICsgMTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9saW5lc1tpXS5vZmZzZXQgPSBsYXN0Lm9mZnNldCArIGxhc3QuaGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9saW5lc1tpXS5pbmRleCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbGluZXNbaV0ub2Zmc2V0ID0gMDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIFNjcm9sbCBNYXAgRWxlbWVudCDjgpLlj5blvpcuIGZyYW1ld29yayDjgYzkvb/nlKjjgZnjgosuXHJcbiAgICAgICAgZ2V0U2Nyb2xsTWFwRWxlbWVudCgpOiBKUXVlcnkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fJG1hcCB8fCAkKFwiXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOODquOCteOCpOOCr+ODq+WPr+iDveOBqiBFbGVtZW50IOOCkuWPluW+ly4gZnJhbWV3b3JrIOOBjOS9v+eUqOOBmeOCiy5cclxuICAgICAgICBmaW5kUmVjeWNsZUVsZW1lbnRzKCk6IEpRdWVyeSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl8kbWFwID8gdGhpcy5fJG1hcC5maW5kKF9Db25maWcuUkVDWUNMRV9DTEFTU19TRUxFQ1RPUikgOiAkKFwiXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIExpc3RWaWV3T3B0aW9ucyDjgpLlj5blvpcuIGZyYW1ld29yayDjgYzkvb/nlKjjgZnjgosuXHJcbiAgICAgICAgZ2V0TGlzdFZpZXdPcHRpb25zKCk6IExpc3RWaWV3T3B0aW9ucyB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zZXR0aW5ncztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gcHJpdmF0ZSBtZXRob2Q6XHJcblxyXG4gICAgICAgIC8vISBTY3JvbGxlciDnlKjnkrDlooPoqK3lrppcclxuICAgICAgICBwcml2YXRlIHNldFNjcm9sbGVyQ29uZGl0aW9uKCk6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLl9zY3JvbGxlci5vbihcInNjcm9sbFwiLCB0aGlzLl9zY3JvbGxFdmVudEhhbmRsZXIpO1xyXG4gICAgICAgICAgICB0aGlzLl9zY3JvbGxlci5vbihcInNjcm9sbHN0b3BcIiwgdGhpcy5fc2Nyb2xsU3RvcEV2ZW50SGFuZGxlcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgU2Nyb2xsZXIg55So55Kw5aKD56C05qOEXHJcbiAgICAgICAgcHJpdmF0ZSByZXNldFNjcm9sbGVyQ29uZGl0aW9uKCk6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLl9zY3JvbGxlci5vZmYoXCJzY3JvbGxzdG9wXCIsIHRoaXMuX3Njcm9sbFN0b3BFdmVudEhhbmRsZXIpO1xyXG4gICAgICAgICAgICB0aGlzLl9zY3JvbGxlci5vZmYoXCJzY3JvbGxcIiwgdGhpcy5fc2Nyb2xsRXZlbnRIYW5kbGVyKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDml6Llrprjga4gU2Nyb2xsZXIg44Kq44OW44K444Kn44Kv44OI44Gu5L2c5oiQXHJcbiAgICAgICAgcHJpdmF0ZSBjcmVhdGVTY3JvbGxlcigpOiBJU2Nyb2xsZXIge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc2V0dGluZ3Muc2Nyb2xsZXJGYWN0b3J5KHRoaXMuXyRyb290WzBdLCB0aGlzLl9zZXR0aW5ncyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg54++5Zyo44GuIFBhZ2UgSW5kZXgg44KS5Y+W5b6XXHJcbiAgICAgICAgcHJpdmF0ZSBnZXRQYWdlSW5kZXgoKTogbnVtYmVyIHtcclxuICAgICAgICAgICAgbGV0IGk6IG51bWJlciwgbjogbnVtYmVyO1xyXG4gICAgICAgICAgICBsZXQgcGFnZTogUGFnZVByb2ZpbGU7XHJcbiAgICAgICAgICAgIGxldCBjYW5kaWRhdGU6IG51bWJlcjtcclxuXHJcbiAgICAgICAgICAgIGxldCBzY3JvbGxQb3MgPSB0aGlzLl9zY3JvbGxlciA/IHRoaXMuX3Njcm9sbGVyLmdldFBvcygpIDogMDtcclxuICAgICAgICAgICAgbGV0IHNjcm9sbFBvc01heCA9IHRoaXMuX3Njcm9sbGVyID8gdGhpcy5fc2Nyb2xsZXIuZ2V0UG9zTWF4KCkgOiAwO1xyXG4gICAgICAgICAgICBsZXQgc2Nyb2xsTWFwU2l6ZSA9ICgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgbGFzdFBhZ2UgPSB0aGlzLmdldExhc3RQYWdlKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAobnVsbCAhPSBsYXN0UGFnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBsYXN0UGFnZS5vZmZzZXQgKyBsYXN0UGFnZS5oZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9iYXNlSGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KSgpO1xyXG5cclxuICAgICAgICAgICAgbGV0IHBvcyA9ICgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoMCA9PT0gc2Nyb2xsUG9zTWF4IHx8IHNjcm9sbFBvc01heCA8PSB0aGlzLl9iYXNlSGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzY3JvbGxQb3MgKiBzY3JvbGxNYXBTaXplIC8gc2Nyb2xsUG9zTWF4O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KSgpO1xyXG5cclxuICAgICAgICAgICAgbGV0IHZhbGlkUmFuZ2UgPSAocGFnZTogUGFnZVByb2ZpbGUpOiBib29sZWFuID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChudWxsID09IHBhZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHBhZ2Uub2Zmc2V0IDw9IHBvcyAmJiBwb3MgPD0gcGFnZS5vZmZzZXQgKyBwYWdlLmhlaWdodCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5fYmFzZUhlaWdodCA8PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFRBRyArIFwiaW52YWxpZCBiYXNlIGhlaWdodDogXCIgKyB0aGlzLl9iYXNlSGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjYW5kaWRhdGUgPSBNYXRoLmZsb29yKHBvcyAvIHRoaXMuX2Jhc2VIZWlnaHQpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fcGFnZXMubGVuZ3RoIDw9IGNhbmRpZGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgY2FuZGlkYXRlID0gdGhpcy5fcGFnZXMubGVuZ3RoIC0gMTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcGFnZSA9IHRoaXMuX3BhZ2VzW2NhbmRpZGF0ZV07XHJcbiAgICAgICAgICAgIGlmICh2YWxpZFJhbmdlKHBhZ2UpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFnZS5pbmRleDtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChwb3MgPCBwYWdlLm9mZnNldCkge1xyXG4gICAgICAgICAgICAgICAgZm9yIChpID0gY2FuZGlkYXRlIC0gMTsgaSA+PSAwOyBpLS0pIHtcclxuICAgICAgICAgICAgICAgICAgICBwYWdlID0gdGhpcy5fcGFnZXNbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbGlkUmFuZ2UocGFnZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhZ2UuaW5kZXg7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFRBRyArIFwidW5rbm93biBwYWdlIGluZGV4LlwiKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZm9yIChpID0gY2FuZGlkYXRlICsgMSwgbiA9IHRoaXMuX3BhZ2VzLmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhZ2UgPSB0aGlzLl9wYWdlc1tpXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodmFsaWRSYW5nZShwYWdlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFnZS5pbmRleDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oVEFHICsgXCJ1bmtub3duIHBhZ2UgaW5kZXguXCIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3BhZ2VzLmxlbmd0aCAtIDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOOCueOCr+ODreODvOODq+OCpOODmeODs+ODiFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHBvcyB7TnVtYmVyfSBbaW5dIOOCueOCr+ODreODvOODq+ODneOCuOOCt+ODp+ODs1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByaXZhdGUgb25TY3JvbGwocG9zOiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2FjdGl2ZSAmJiAwIDwgdGhpcy5fcGFnZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgY3VycmVudFBhZ2VJbmRleCA9IHRoaXMuZ2V0UGFnZUluZGV4KCk7XHJcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiDoqr/mlbRcclxuICAgICAgICAgICAgICAgIGlmIChfVXRpbHMuYWJzKHBvcyAtIHRoaXMuX2xhc3RBY3RpdmVQYWdlQ29udGV4dC5wb3MpIDwgdGhpcy5fc2V0dGluZ3Muc2Nyb2xsUmVmcmVzaERpc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX2xhc3RBY3RpdmVQYWdlQ29udGV4dC5pbmRleCAhPT0gY3VycmVudFBhZ2VJbmRleCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9sYXN0QWN0aXZlUGFnZUNvbnRleHQucG9zID0gcG9zO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDjgrnjgq/jg63jg7zjg6vlgZzmraLjgqTjg5njg7Pjg4hcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBwb3Mge051bWJlcn0gW2luXSDjgrnjgq/jg63jg7zjg6vjg53jgrjjgrfjg6fjg7NcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlIG9uU2Nyb2xsU3RvcChwb3M6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fYWN0aXZlICYmIDAgPCB0aGlzLl9wYWdlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIGxldCBjdXJyZW50UGFnZUluZGV4ID0gdGhpcy5nZXRQYWdlSW5kZXgoKTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9sYXN0QWN0aXZlUGFnZUNvbnRleHQuaW5kZXggIT09IGN1cnJlbnRQYWdlSW5kZXgpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuX2xhc3RBY3RpdmVQYWdlQ29udGV4dC5wb3MgPSBwb3M7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDmnIDlvozjga7jg5rjg7zjgrjjgpLlj5blvpdcclxuICAgICAgICBwcml2YXRlIGdldExhc3RQYWdlKCk6IFBhZ2VQcm9maWxlIHtcclxuICAgICAgICAgICAgaWYgKDAgPCB0aGlzLl9wYWdlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9wYWdlc1t0aGlzLl9wYWdlcy5sZW5ndGggLSAxXTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDjg5rjg7zjgrjljLrliIbjga7jgqLjgrXjgqTjg7NcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBmcm9tIHtOdW1iZXJ9IFtpbl0gcGFnZSBpbmRleCDjgpLmjIflrppcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlIGFzc2lnblBhZ2UoZnJvbT86IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgICAgICBsZXQgaSwgbjtcclxuICAgICAgICAgICAgaWYgKG51bGwgPT0gZnJvbSkge1xyXG4gICAgICAgICAgICAgICAgZnJvbSA9IDA7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFyUGFnZShmcm9tKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBsaW5lSW5kZXggPSAwO1xyXG4gICAgICAgICAgICAgICAgbGV0IGxhc3RQYWdlID0gdGhpcy5nZXRMYXN0UGFnZSgpO1xyXG4gICAgICAgICAgICAgICAgbGV0IGxhc3RMaW5lOiBMaW5lUHJvZmlsZTtcclxuICAgICAgICAgICAgICAgIGxldCB0ZW1wUGFnZTogUGFnZVByb2ZpbGU7XHJcbiAgICAgICAgICAgICAgICBpZiAobnVsbCA9PSBsYXN0UGFnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxhc3RQYWdlID0gbmV3IFBhZ2VQcm9maWxlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fcGFnZXMucHVzaChsYXN0UGFnZSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGxhc3RMaW5lID0gbGFzdFBhZ2UuZ2V0TGluZVByb2ZpbGVMYXN0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgIT0gbGFzdExpbmUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGluZUluZGV4ID0gbGFzdExpbmUuaW5kZXggKyAxO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgYXNpZ25lZSA9IHRoaXMuX2xpbmVzLnNsaWNlKGxpbmVJbmRleCk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwLCBuID0gYXNpZ25lZS5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fYmFzZUhlaWdodCA8PSBsYXN0UGFnZS5oZWlnaHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGFzdFBhZ2Uubm9ybWFsaXplKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBQYWdlID0gbGFzdFBhZ2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBQYWdlID0gbmV3IFBhZ2VQcm9maWxlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBQYWdlLmluZGV4ID0gbGFzdFBhZ2UuaW5kZXggKyAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wUGFnZS5vZmZzZXQgPSBsYXN0UGFnZS5vZmZzZXQgKyBsYXN0UGFnZS5oZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RQYWdlID0gdGVtcFBhZ2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3BhZ2VzLnB1c2gobGFzdFBhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBhc2lnbmVlW2ldLnBhZ2VJbmRleCA9IGxhc3RQYWdlLmluZGV4O1xyXG4gICAgICAgICAgICAgICAgICAgIGxhc3RQYWdlLnB1c2goYXNpZ25lZVtpXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBsYXN0UGFnZS5ub3JtYWxpemUoKTtcclxuICAgICAgICAgICAgfSkoKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9zY3JvbGxlcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fc2Nyb2xsZXIudXBkYXRlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOODmuODvOOCuOWMuuWIhuOBruino+mZpFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGZyb20ge051bWJlcn0gW2luXSBwYWdlIGluZGV4IOOCkuaMh+WumlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByaXZhdGUgY2xlYXJQYWdlKGZyb20/OiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKG51bGwgPT0gZnJvbSkge1xyXG4gICAgICAgICAgICAgICAgZnJvbSA9IDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5fcGFnZXMgPSB0aGlzLl9wYWdlcy5zbGljZSgwLCBmcm9tKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIlNjcm9sbE1hbmFnZXIudHNcIiAvPlxyXG5cclxubmFtZXNwYWNlIENEUC5VSSB7XHJcblxyXG4gICAgY29uc3QgVEFHID0gXCJbQ0RQLlVJLkxpc3RWaWV3XSBcIjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBpbnRlcmZhY2UgTGlzdFZpZXdDb25zdHJ1Y3RPcHRpb25zXHJcbiAgICAgKiBAYnJpZWYgTGlzdFZpZXcg44G444Gu5Yid5pyf5YyW5oOF5aCx44KS5qC857SN44GZ44KL44Kk44Oz44K/44O844OV44Kn44Kk44K544Kv44Op44K5XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgTGlzdFZpZXdDb25zdHJ1Y3RPcHRpb25zPFRNb2RlbCBleHRlbmRzIEJhY2tib25lLk1vZGVsPiBleHRlbmRzIExpc3RWaWV3T3B0aW9ucywgQmFja2JvbmUuVmlld09wdGlvbnM8VE1vZGVsPiB7XHJcbiAgICAgICAgJGVsPzogSlF1ZXJ5O1xyXG4gICAgICAgIGluaXRpYWxIZWlnaHQ/OiBudW1iZXI7ICAgIC8vITwg6auY44GV44Gu5Yid5pyf5YCkXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAY2xhc3MgTGlzdFZpZXdcclxuICAgICAqIEBicmllZiDjg6Hjg6Ljg6rnrqHnkIbmqZ/og73jgpLmj5DkvpvjgZnjgovku67mg7Pjg6rjgrnjg4jjg5Pjg6Xjg7zjgq/jg6njgrlcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGNsYXNzIExpc3RWaWV3PFRNb2RlbCBleHRlbmRzIEJhY2tib25lLk1vZGVsPiBleHRlbmRzIEJhY2tib25lLlZpZXc8VE1vZGVsPiBpbXBsZW1lbnRzIElMaXN0VmlldywgSUNvbXBvc2FibGVWaWV3IHtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBfc2Nyb2xsTWdyOiBTY3JvbGxNYW5hZ2VyID0gbnVsbDsgICAgLy8hPCBzY3JvbGwg44Kz44Ki44Ot44K444OD44KvXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIGNvbnN0cnVjdG9yXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gb3B0aW9ucyB7TGlzdFZpZXdDb25zdHJ1Y3RPcHRpb25zfSBbaW5dIOOCquODl+OCt+ODp+ODs1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGNvbnN0cnVjdG9yKG9wdGlvbnM/OiBMaXN0Vmlld0NvbnN0cnVjdE9wdGlvbnM8VE1vZGVsPikge1xyXG4gICAgICAgICAgICBzdXBlcihvcHRpb25zKTtcclxuICAgICAgICAgICAgbGV0IG9wdCA9IG9wdGlvbnMgfHwge307XHJcbiAgICAgICAgICAgIHRoaXMuX3Njcm9sbE1nciA9IG5ldyBTY3JvbGxNYW5hZ2VyKG9wdGlvbnMpO1xyXG4gICAgICAgICAgICBpZiAob3B0LiRlbCkge1xyXG4gICAgICAgICAgICAgICAgbGV0IGRlbGVnYXRlcyA9ICg8YW55PnRoaXMpLmV2ZW50cyA/IHRydWUgOiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0RWxlbWVudChvcHQuJGVsLCBkZWxlZ2F0ZXMpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbGV0IGhlaWdodCA9IG9wdC5pbml0aWFsSGVpZ2h0IHx8IHRoaXMuJGVsLmhlaWdodCgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fc2Nyb2xsTWdyLmluaXRpYWxpemUodGhpcy4kZWwsIGhlaWdodCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gT3ZlcnJpZGU6IEJhY2tib25lLlZpZXdcclxuXHJcbiAgICAgICAgLy8hIOWvvuixoSBlbGVtZW50IOOBruioreWumlxyXG4gICAgICAgIHNldEVsZW1lbnQoZWxlbWVudDogSFRNTEVsZW1lbnQsIGRlbGVnYXRlPzogYm9vbGVhbik6IEJhY2tib25lLlZpZXc8VE1vZGVsPjtcclxuICAgICAgICBzZXRFbGVtZW50KGVsZW1lbnQ6IEpRdWVyeSwgZGVsZWdhdGU/OiBib29sZWFuKTogQmFja2JvbmUuVmlldzxUTW9kZWw+O1xyXG4gICAgICAgIHNldEVsZW1lbnQoZWxlbWVudDogYW55LCBkZWxlZ2F0ZT86IGJvb2xlYW4pOiBCYWNrYm9uZS5WaWV3PFRNb2RlbD4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fc2Nyb2xsTWdyKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgJGVsID0gJChlbGVtZW50KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3Njcm9sbE1nci5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zY3JvbGxNZ3IuaW5pdGlhbGl6ZSgkZWwsICRlbC5oZWlnaHQoKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHN1cGVyLnNldEVsZW1lbnQoZWxlbWVudCwgZGVsZWdhdGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOegtOajhFxyXG4gICAgICAgIHJlbW92ZSgpOiBCYWNrYm9uZS5WaWV3PFRNb2RlbD4ge1xyXG4gICAgICAgICAgICB0aGlzLl9zY3JvbGxNZ3IuZGVzdHJveSgpO1xyXG4gICAgICAgICAgICByZXR1cm4gc3VwZXIucmVtb3ZlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIEltcGxlbWVudHM6IElMaXN0VmlldyBQcm9maWxlIOeuoeeQhlxyXG5cclxuICAgICAgICAvLyEg5Yid5pyf5YyW5riI44G/44GL5Yik5a6aXHJcbiAgICAgICAgaXNJbml0aWFsaXplZCgpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Njcm9sbE1nci5pc0luaXRpYWxpemVkKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg44OX44Ot44OR44OG44Kj44KS5oyH5a6a44GX44Gm44CBTGluZVByb2ZpbGUg44KS566h55CGXHJcbiAgICAgICAgYWRkSXRlbShcclxuICAgICAgICAgICAgaGVpZ2h0OiBudW1iZXIsXHJcbiAgICAgICAgICAgIGluaXRpYWxpemVyOiBuZXcgKG9wdGlvbnM/OiBhbnkpID0+IEJhc2VMaXN0SXRlbVZpZXcsXHJcbiAgICAgICAgICAgIGluZm86IGFueSxcclxuICAgICAgICAgICAgaW5zZXJ0VG8/OiBudW1iZXJcclxuICAgICAgICApOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5fYWRkTGluZShuZXcgTGluZVByb2ZpbGUodGhpcy5fc2Nyb2xsTWdyLCBNYXRoLmZsb29yKGhlaWdodCksIGluaXRpYWxpemVyLCBpbmZvKSwgaW5zZXJ0VG8pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOaMh+WumuOBl+OBnyBJdGVtIOOCkuWJiumZpFxyXG4gICAgICAgIHJlbW92ZUl0ZW0oaW5kZXg6IG51bWJlciwgc2l6ZT86IG51bWJlciwgZGVsYXk/OiBudW1iZXIpOiB2b2lkO1xyXG4gICAgICAgIHJlbW92ZUl0ZW0oaW5kZXg6IG51bWJlcltdLCBkZWxheT86IG51bWJlcik6IHZvaWQ7XHJcbiAgICAgICAgcmVtb3ZlSXRlbShpbmRleDogYW55LCBhcmcyPzogbnVtYmVyLCBhcmczPzogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuX3Njcm9sbE1nci5yZW1vdmVJdGVtKGluZGV4LCBhcmcyLCBhcmczKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDmjIflrprjgZfjgZ8gSXRlbSDjgavoqK3lrprjgZfjgZ/mg4XloLHjgpLlj5blvpdcclxuICAgICAgICBnZXRJdGVtSW5mbyh0YXJnZXQ6IG51bWJlcik6IGFueTtcclxuICAgICAgICBnZXRJdGVtSW5mbyh0YXJnZXQ6IEpRdWVyeUV2ZW50T2JqZWN0KTogYW55O1xyXG4gICAgICAgIGdldEl0ZW1JbmZvKHRhcmdldDogYW55KTogYW55IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Njcm9sbE1nci5nZXRJdGVtSW5mbyh0YXJnZXQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOOCouOCr+ODhuOCo+ODluODmuODvOOCuOOCkuabtOaWsFxyXG4gICAgICAgIHJlZnJlc2goKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuX3Njcm9sbE1nci5yZWZyZXNoKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg5pyq44Ki44K144Kk44Oz44Oa44O844K444KS5qeL56+JXHJcbiAgICAgICAgdXBkYXRlKCk6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLl9zY3JvbGxNZ3IudXBkYXRlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg44Oa44O844K444Ki44K144Kk44Oz44KS5YaN5qeL5oiQXHJcbiAgICAgICAgcmVidWlsZCgpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5fc2Nyb2xsTWdyLnJlYnVpbGQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDnrqHovYTjg4fjg7zjgr/jgpLnoLTmo4RcclxuICAgICAgICByZWxlYXNlKCk6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLl9zY3JvbGxNZ3IucmVsZWFzZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBJbXBsZW1lbnRzOiBJTGlzdFZpZXcgUHJvZmlsZSBCYWNrdXAgLyBSZXN0b3JlXHJcblxyXG4gICAgICAgIC8vISDlhoXpg6jjg4fjg7zjgr/jgpLjg5Djg4Pjgq/jgqLjg4Pjg5dcclxuICAgICAgICBiYWNrdXAoa2V5OiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Njcm9sbE1nci5iYWNrdXAoa2V5KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDlhoXpg6jjg4fjg7zjgr/jgpLjg6rjgrnjg4jjgqJcclxuICAgICAgICByZXN0b3JlKGtleTogc3RyaW5nLCByZWJ1aWxkOiBib29sZWFuID0gdHJ1ZSk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc2Nyb2xsTWdyLnJlc3RvcmUoa2V5LCByZWJ1aWxkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDjg5Djg4Pjgq/jgqLjg4Pjg5fjg4fjg7zjgr/jga7mnInnhKFcclxuICAgICAgICBoYXNCYWNrdXAoa2V5OiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Njcm9sbE1nci5oYXNCYWNrdXAoa2V5KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDjg5Djg4Pjgq/jgqLjg4Pjg5fjg4fjg7zjgr/jga7noLTmo4RcclxuICAgICAgICBjbGVhckJhY2t1cChrZXk/OiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Njcm9sbE1nci5jbGVhckJhY2t1cChrZXkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOODkOODg+OCr+OCouODg+ODl+ODh+ODvOOCv+OBq+OCouOCr+OCu+OCuVxyXG4gICAgICAgIGdldCBiYWNrdXBEYXRhKCk6IGFueSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zY3JvbGxNZ3IgPyB0aGlzLl9zY3JvbGxNZ3IuYmFja3VwRGF0YSA6IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIEltcGxlbWVudHM6IElMaXN0VmlldyBTY3JvbGxcclxuXHJcbiAgICAgICAgLy8hIOOCueOCr+ODreODvOODq+OCpOODmeODs+ODiOODj+ODs+ODieODqeioreWumi/op6PpmaRcclxuICAgICAgICBzZXRTY3JvbGxIYW5kbGVyKGhhbmRsZXI6IChldmVudDogSlF1ZXJ5RXZlbnRPYmplY3QpID0+IHZvaWQsIG9uOiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuX3Njcm9sbE1nci5zZXRTY3JvbGxIYW5kbGVyKGhhbmRsZXIsIG9uKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDjgrnjgq/jg63jg7zjg6vntYLkuobjgqTjg5njg7Pjg4jjg4/jg7Pjg4njg6noqK3lrpov6Kej6ZmkXHJcbiAgICAgICAgc2V0U2Nyb2xsU3RvcEhhbmRsZXIoaGFuZGxlcjogKGV2ZW50OiBKUXVlcnlFdmVudE9iamVjdCkgPT4gdm9pZCwgb246IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5fc2Nyb2xsTWdyLnNldFNjcm9sbFN0b3BIYW5kbGVyKGhhbmRsZXIsIG9uKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDjgrnjgq/jg63jg7zjg6vkvY3nva7jgpLlj5blvpdcclxuICAgICAgICBnZXRTY3JvbGxQb3MoKTogbnVtYmVyIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Njcm9sbE1nci5nZXRTY3JvbGxQb3MoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDjgrnjgq/jg63jg7zjg6vkvY3nva7jga7mnIDlpKflgKTjgpLlj5blvpdcclxuICAgICAgICBnZXRTY3JvbGxQb3NNYXgoKTogbnVtYmVyIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Njcm9sbE1nci5nZXRTY3JvbGxQb3NNYXgoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDjgrnjgq/jg63jg7zjg6vkvY3nva7jgpLmjIflrppcclxuICAgICAgICBzY3JvbGxUbyhwb3M6IG51bWJlciwgYW5pbWF0ZT86IGJvb2xlYW4sIHRpbWU/OiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5fc2Nyb2xsTWdyLnNjcm9sbFRvKHBvcywgYW5pbWF0ZSwgdGltZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg5oyH5a6a44GV44KM44GfIExpc3RJdGVtVmlldyDjga7ooajnpLrjgpLkv53oqLxcclxuICAgICAgICBlbnN1cmVWaXNpYmxlKGluZGV4OiBudW1iZXIsIG9wdGlvbnM/OiBFbnN1cmVWaXNpYmxlT3B0aW9ucyk6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLl9zY3JvbGxNZ3IuZW5zdXJlVmlzaWJsZShpbmRleCwgb3B0aW9ucyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIEltcGxlbWVudHM6IElMaXN0VmlldyBQcm9wZXJ0aWVzXHJcblxyXG4gICAgICAgIC8vISBjb3JlIGZyYW1ld29yayBhY2Nlc3NcclxuICAgICAgICBnZXQgY29yZSgpOiBJTGlzdFZpZXdGcmFtZXdvcmsge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc2Nyb2xsTWdyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBJbXBsZW1lbnRzOiBJTGlzdFZpZXcgSW50ZXJuYWwgSS9GXHJcblxyXG4gICAgICAgIC8vISDnmbvpjLIgZnJhbWV3b3JrIOOBjOS9v+eUqOOBmeOCi1xyXG4gICAgICAgIF9hZGRMaW5lKF9saW5lOiBhbnksIGluc2VydFRvPzogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuX3Njcm9sbE1nci5fYWRkTGluZShfbGluZSwgaW5zZXJ0VG8pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBJbXBsZW1lbnRzOiBJQ29tcG9zYWJsZVZpZXdcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog44GZ44Gn44Gr5a6a576p44GV44KM44GfIEJhY2tib25lLlZpZXcg44KS5Z+65bqV44Kv44Op44K544Gr6Kit5a6a44GX44CBZXh0ZW5kIOOCkuWun+ihjOOBmeOCi+OAglxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGRlcml2ZXMgICAgICAgICB7QmFja2JvbmUuVmlld3xCYWNrYm9uZS5WaWV3W119IFtpbl0g5ZCI5oiQ5YWD44GuIFZpZXcg44Kv44Op44K5XHJcbiAgICAgICAgICogQHBhcmFtIHByb3BlcnRpZXMgICAgICB7T2JqZWN0fSAgICAgICAgICAgICAgICAgICAgICAgIFtpbl0gcHJvdG90eXBlIOODl+ODreODkeODhuOCo1xyXG4gICAgICAgICAqIEBwYXJhbSBjbGFzc1Byb3BlcnRpZXMge09iamVjdH0gICAgICAgICAgICAgICAgICAgICAgICBbaW5dIHN0YXRpYyDjg5fjg63jg5Hjg4bjgqNcclxuICAgICAgICAgKiBAcmV0dXJuIHtCYWNrYm9uZS5WaWV3fEJhY2tib25lLlZpZXdbXX0g5paw6KaP44Gr55Sf5oiQ44GV44KM44GfIFZpZXcg44Gu44Kz44Oz44K544OI44Op44Kv44K/XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgc3RhdGljIGNvbXBvc2UoZGVyaXZlczogVmlld0NvbnN0cnVjdG9yIHwgVmlld0NvbnN0cnVjdG9yW10sIHByb3BlcnRpZXM6IGFueSwgY2xhc3NQcm9wZXJ0aWVzPzogYW55KTogVmlld0NvbnN0cnVjdG9yIHtcclxuICAgICAgICAgICAgbGV0IGNvbXBvc2VkOiBhbnkgPSBjb21wb3NlVmlld3MoTGlzdFZpZXcsIGRlcml2ZXMpO1xyXG4gICAgICAgICAgICByZXR1cm4gY29tcG9zZWQuZXh0ZW5kKHByb3BlcnRpZXMsIGNsYXNzUHJvcGVydGllcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJHcm91cFByb2ZpbGUudHNcIiAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiTGlzdEl0ZW1WaWV3LnRzXCIgLz5cclxuXHJcbm5hbWVzcGFjZSBDRFAuVUkge1xyXG5cclxuICAgIGNvbnN0IFRBRyA9IFwiW0NEUC5VSS5Hcm91cExpc3RJdGVtVmlld10gXCI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAaW50ZXJmYWNlIEdyb3VwTGlzdEl0ZW1WaWV3T3B0aW9uc1xyXG4gICAgICogQGJyaWVmIEdyb3VwTGlzdEl0ZW1WaWV3IOOBruOCquODl+OCt+ODp+ODs1xyXG4gICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIEdyb3VwTGlzdEl0ZW1WaWV3T3B0aW9uczxUTW9kZWwgZXh0ZW5kcyBCYWNrYm9uZS5Nb2RlbD4gZXh0ZW5kcyBMaXN0SXRlbVZpZXdPcHRpb25zPFRNb2RlbD4ge1xyXG4gICAgICAgIGdyb3VwUHJvZmlsZT86IEdyb3VwUHJvZmlsZTsgICAgLy8hPCBHcm91cFByb2ZpbGUg44Kk44Oz44K544K/44Oz44K5XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAY2xhc3MgR3JvdXBMaXN0SXRlbVZpZXdcclxuICAgICAqIEBicmllZiBFeHBhbmRhYmxlTGlzdFZpZXcg44GM5omx44GGIExpc3RJdGVtIOOCs+ODs+ODhuODiuOCr+ODqeOCuVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgY2xhc3MgR3JvdXBMaXN0SXRlbVZpZXc8VE1vZGVsIGV4dGVuZHMgQmFja2JvbmUuTW9kZWw+IGV4dGVuZHMgTGlzdEl0ZW1WaWV3PFRNb2RlbD4ge1xyXG5cclxuICAgICAgICBwcml2YXRlIF9ncm91cFByb2ZpbGU6IEdyb3VwUHJvZmlsZSA9IG51bGw7ICAgIC8vITwg566h6L2E44GuIEdyb3VwUHJvZmlsZVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBjb25zdHJ1Y3RvclxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIG9wdGlvbnMge0dyb3VwTGluZVZpZXdPcHRpb25zfSBbaW5dIOOCquODl+OCt+ODp+ODs1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGNvbnN0cnVjdG9yKG9wdGlvbnM6IEdyb3VwTGlzdEl0ZW1WaWV3T3B0aW9uczxUTW9kZWw+KSB7XHJcbiAgICAgICAgICAgIHN1cGVyKG9wdGlvbnMpO1xyXG4gICAgICAgICAgICB0aGlzLl9ncm91cFByb2ZpbGUgPSBvcHRpb25zLmdyb3VwUHJvZmlsZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gcHJvdGVjdGVkIG1ldGhvZHNcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog5bGV6ZaL54q25oWL44KS5Yik5a6aXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHtCb29sZWFufSB0cnVlOiDlsZXplossIGZhbHNlOuWPjuadn1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByb3RlY3RlZCBpc0V4cGFuZGVkKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZ3JvdXBQcm9maWxlLmlzRXhwYW5kZWQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDlsZXplovkuK3jgYvliKTlrppcclxuICAgICAgICBwcm90ZWN0ZWQgaXNFeHBhbmRpbmcoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIHJldHVybiAoPEJhc2VFeHBhbmRhYmxlTGlzdFZpZXc+dGhpcy5vd25lcikuaXNFeHBhbmRpbmcoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDlj47mnZ/kuK3jgYvliKTlrppcclxuICAgICAgICBwcm90ZWN0ZWQgaXNDb2xsYXBzaW5nKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICByZXR1cm4gKDxCYXNlRXhwYW5kYWJsZUxpc3RWaWV3PnRoaXMub3duZXIpLmlzQ29sbGFwc2luZygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOmWi+mWieS4reOBi+WIpOWumlxyXG4gICAgICAgIHByb3RlY3RlZCBpc1N3aXRjaGluZygpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgcmV0dXJuICg8QmFzZUV4cGFuZGFibGVMaXN0Vmlldz50aGlzLm93bmVyKS5pc1N3aXRjaGluZygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOWtkCBHcm91cCDjgpLmjIHjgaPjgabjgYTjgovjgYvliKTlrppcclxuICAgICAgICBwcm90ZWN0ZWQgaGFzQ2hpbGRyZW4obGF5b3V0S2V5Pzogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9ncm91cFByb2ZpbGUuaGFzQ2hpbGRyZW4obGF5b3V0S2V5KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIkdyb3VwUHJvZmlsZS50c1wiIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJTdGF0dXNNYW5hZ2VyLnRzXCIgLz5cclxuXHJcbi8qIHRzbGludDpkaXNhYmxlOm5vLWJpdHdpc2UgKi9cclxuXHJcbm5hbWVzcGFjZSBDRFAuVUkge1xyXG5cclxuICAgIGNvbnN0IFRBRyA9IFwiW0NEUC5VSS5FeHBhbmRNYW5hZ2VyXSBcIjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBjbGFzcyBFeHBhbmRNYW5hZ2VyXHJcbiAgICAgKiBAYnJpZWYg6ZaL6ZaJ54q25oWL566h55CG44Kv44Op44K5XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBjbGFzcyBFeHBhbmRNYW5hZ2VyIGltcGxlbWVudHMgSUV4cGFuZE1hbmFnZXIge1xyXG5cclxuICAgICAgICBwcml2YXRlIF9vd25lcjogQmFzZUV4cGFuZGFibGVMaXN0VmlldyA9IG51bGw7XHJcbiAgICAgICAgcHJpdmF0ZSBfbWFwR3JvdXBzOiBPYmplY3QgPSB7fTsgICAgICAgICAgICAgICAgLy8hPCB7aWQsIEdyb3VwUHJvZmlsZX0g44GuIG1hcFxyXG4gICAgICAgIHByaXZhdGUgX2FyeVRvcEdyb3VwczogR3JvdXBQcm9maWxlW10gPSBbXTsgICAgIC8vITwg56ysMemajuWxpCBHcm91cFByb2ZpbGUg44KS5qC857SNXHJcbiAgICAgICAgcHJpdmF0ZSBfbGF5b3V0S2V5OiBzdHJpbmcgPSBudWxsO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBjb25zdHJ1Y3RvclxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIG93bmVyIHtCYXNlRXhwYW5kYWJsZUxpc3RWaWV3fSBbaW5dIOimqlZpZXcg44Gu44Kk44Oz44K544K/44Oz44K5XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgY29uc3RydWN0b3Iob3duZXI6IEJhc2VFeHBhbmRhYmxlTGlzdFZpZXcpIHtcclxuICAgICAgICAgICAgdGhpcy5fb3duZXIgPSBvd25lcjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gSW1wbGVtZW50czogSUV4cGFuZE1hbmFnZXJcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog5paw6KaPIEdyb3VwUHJvZmlsZSDjgpLkvZzmiJBcclxuICAgICAgICAgKiDnmbvpjLLmuIjjgb/jga7loLTlkIjjga/jgZ3jga7jgqrjg5bjgrjjgqfjgq/jg4jjgpLov5TljbRcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJtYSBpZCB7U3RyaW5nfSBbaW5dIOaWsOimj+OBq+S9nOaIkOOBmeOCiyBHcm91cCBJRCDjgpLmjIflrpouIOaMh+WumuOBl+OBquOBhOWgtOWQiOOBr+iHquWLleWJsuOCiuaMr+OCilxyXG4gICAgICAgICAqIEByZXR1cm4ge0dyb3VwUHJvZmlsZX0gR3JvdXBQcm9maWxlIOOCpOODs+OCueOCv+ODs+OCuVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG5ld0dyb3VwKGlkPzogc3RyaW5nKTogR3JvdXBQcm9maWxlIHtcclxuICAgICAgICAgICAgbGV0IGdyb3VwOiBHcm91cFByb2ZpbGU7XHJcbiAgICAgICAgICAgIGlmIChudWxsID09IGlkKSB7XHJcbiAgICAgICAgICAgICAgICBpZCA9IFwiZ3JvdXAtaWQ6XCIgKyAoXCIwMDAwXCIgKyAoTWF0aC5yYW5kb20oKSAqIE1hdGgucG93KDM2LCA0KSA8PCAwKS50b1N0cmluZygzNikpLnNsaWNlKC00KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAobnVsbCAhPSB0aGlzLl9tYXBHcm91cHNbaWRdKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fbWFwR3JvdXBzW2lkXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBncm91cCA9IG5ldyBHcm91cFByb2ZpbGUoaWQsIHRoaXMuX293bmVyKTtcclxuICAgICAgICAgICAgdGhpcy5fbWFwR3JvdXBzW2lkXSA9IGdyb3VwO1xyXG4gICAgICAgICAgICByZXR1cm4gZ3JvdXA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDnmbvpjLLmuIjjgb8gR3JvdXAg44KS5Y+W5b6XXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFybWEgaWQge1N0cmluZ30gW2luXSDlj5blvpfjgZnjgosgR3JvdXAgSUQg44KS5oyH5a6aXHJcbiAgICAgICAgICogQHJldHVybiB7R3JvdXBQcm9maWxlfSBHcm91cFByb2ZpbGUg44Kk44Oz44K544K/44Oz44K5IC8gbnVsbFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGdldEdyb3VwKGlkOiBzdHJpbmcpOiBHcm91cFByb2ZpbGUge1xyXG4gICAgICAgICAgICBpZiAobnVsbCA9PSB0aGlzLl9tYXBHcm91cHNbaWRdKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oVEFHICsgXCJncm91cCBpZDogXCIgKyBpZCArIFwiIGlzIG5vdCByZWdpc3RlcmVkLlwiKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9tYXBHcm91cHNbaWRdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog56ysMemajuWxpOOBriBHcm91cCDnmbvpjLJcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB0b3BHcm91cCB7R3JvdXBQcm9maWxlfSBbaW5dIOani+eviea4iOOBvyBHcm91cFByb2ZpbGUg44Kk44Oz44K544K/44Oz44K5XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcmVnaXN0ZXJUb3BHcm91cCh0b3BHcm91cDogR3JvdXBQcm9maWxlKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGxldCBsYXN0R3JvdXA6IEdyb3VwUHJvZmlsZTtcclxuICAgICAgICAgICAgbGV0IGluc2VydFRvOiBudW1iZXI7XHJcblxyXG4gICAgICAgICAgICAvLyDjgZnjgafjgavnmbvpjLLmuIjjgb/jga7loLTlkIjjga8gcmVzdG9yZSDjgZfjgaYgbGF5b3V0IOOCreODvOOBlOOBqOOBq+W+qeWFg+OBmeOCi+OAglxyXG4gICAgICAgICAgICBpZiAoXCJyZWdpc3RlcmVkXCIgPT09IHRvcEdyb3VwLnN0YXR1cykge1xyXG4gICAgICAgICAgICAgICAgLy8gVE9ETzogb3JpZW50YXRpb24gY2hhbmdlZCDmmYLjga4gbGF5b3V0IOOCreODvOWkieabtOWvvuW/nOOBoOOBjOOAgeOCreODvOOBq+WkieabtOOBjOeEoeOBhOOBqOOBjeOBr+S4jeWFt+WQiOOBqOOBquOCi+OAglxyXG4gICAgICAgICAgICAgICAgLy8g44GT44GuIEFQSSDjgavlrp/oo4XjgYzlv4XopoHjgYvjgoLlkKvjgoHjgabopovnm7TjgZfjgYzlv4XopoFcclxuICAgICAgICAgICAgICAgIHRvcEdyb3VwLnJlc3RvcmUoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbGFzdEdyb3VwID0gKDAgPCB0aGlzLl9hcnlUb3BHcm91cHMubGVuZ3RoKSA/IHRoaXMuX2FyeVRvcEdyb3Vwc1t0aGlzLl9hcnlUb3BHcm91cHMubGVuZ3RoIC0gMV0gOiBudWxsO1xyXG4gICAgICAgICAgICBpbnNlcnRUbyA9IChudWxsICE9IGxhc3RHcm91cCkgPyBsYXN0R3JvdXAuZ2V0TGFzdExpbmVJbmRleCh0cnVlKSArIDEgOiAwO1xyXG4gICAgICAgICAgICBpZiAoXy5pc05hTihpbnNlcnRUbykpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoVEFHICsgXCJsb2dpYyBlcnJvciwgJ2luc2VydFRvJyBpcyBOYU4uXCIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9hcnlUb3BHcm91cHMucHVzaCh0b3BHcm91cCk7XHJcbiAgICAgICAgICAgIHRvcEdyb3VwLnJlZ2lzdGVyKGluc2VydFRvKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOesrDHpmo7lsaTjga4gR3JvdXAg44KS5Y+W5b6XXHJcbiAgICAgICAgICog44Kz44OU44O86YWN5YiX44GM6L+U44GV44KM44KL44Gf44KB44CB44Kv44Op44Kk44Ki44Oz44OI44Gv44Kt44Oj44OD44K344Ol5LiN5Y+vXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHtHcm91cFByb2ZpbGVbXX0gR3JvdXBQcm9maWxlIOmFjeWIl1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGdldFRvcEdyb3VwcygpOiBHcm91cFByb2ZpbGVbXSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9hcnlUb3BHcm91cHMuc2xpY2UoMCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg44GZ44G544Gm44Gu44Kw44Or44O844OX44KS5bGV6ZaLICgx6ZqO5bGkKVxyXG4gICAgICAgIGV4cGFuZEFsbCgpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5fYXJ5VG9wR3JvdXBzLmZvckVhY2goKGdyb3VwOiBHcm91cFByb2ZpbGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChncm91cC5oYXNDaGlsZHJlbigpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXAuZXhwYW5kKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOOBmeOBueOBpuOBruOCsOODq+ODvOODl+OCkuWPjuadnyAoMemajuWxpClcclxuICAgICAgICBjb2xsYXBzZUFsbChkZWxheT86IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLl9hcnlUb3BHcm91cHMuZm9yRWFjaCgoZ3JvdXA6IEdyb3VwUHJvZmlsZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGdyb3VwLmhhc0NoaWxkcmVuKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBncm91cC5jb2xsYXBzZShkZWxheSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOWxlemWi+S4reOBi+WIpOWumlxyXG4gICAgICAgIGlzRXhwYW5kaW5nKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fb3duZXIuaXNTdGF0dXNJbihcImV4cGFuZGluZ1wiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDlj47mnZ/kuK3jgYvliKTlrppcclxuICAgICAgICBpc0NvbGxhcHNpbmcoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9vd25lci5pc1N0YXR1c0luKFwiY29sbGFwc2luZ1wiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDplovplonkuK3jgYvliKTlrppcclxuICAgICAgICBpc1N3aXRjaGluZygpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXNFeHBhbmRpbmcoKSB8fCB0aGlzLmlzQ29sbGFwc2luZygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOeKtuaFi+WkieaVsOOBruWPgueFp+OCq+OCpuODs+ODiOOBruOCpOODs+OCr+ODquODoeODs+ODiFxyXG4gICAgICAgIHN0YXR1c0FkZFJlZihzdGF0dXM6IHN0cmluZyk6IG51bWJlciB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9vd25lci5zdGF0dXNBZGRSZWYoc3RhdHVzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDnirbmhYvlpInmlbDjga7lj4Lnhafjgqvjgqbjg7Pjg4jjga7jg4fjgq/jg6rjg6Hjg7Pjg4hcclxuICAgICAgICBzdGF0dXNSZWxlYXNlKHN0YXR1czogc3RyaW5nKTogbnVtYmVyIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX293bmVyLnN0YXR1c1JlbGVhc2Uoc3RhdHVzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDlh6bnkIbjgrnjgrPjg7zjg5fmr47jgavnirbmhYvlpInmlbDjgpLoqK3lrppcclxuICAgICAgICBzdGF0dXNTY29wZShzdGF0dXM6IHN0cmluZywgY2FsbGJhY2s6ICgpID0+IHZvaWQpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5fb3duZXIuc3RhdHVzU2NvcGUoc3RhdHVzLCBjYWxsYmFjayk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg5oyH5a6a44GX44Gf54q25oWL5Lit44Gn44GC44KL44GL56K66KqNXHJcbiAgICAgICAgaXNTdGF0dXNJbihzdGF0dXM6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fb3duZXIuaXNTdGF0dXNJbihzdGF0dXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIGxheW91dCBrZXkg44KS5Y+W5b6XXHJcbiAgICAgICAgZ2V0IGxheW91dEtleSgpOiBzdHJpbmcge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fbGF5b3V0S2V5O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIGxheW91dCBrZXkg44KS6Kit5a6aXHJcbiAgICAgICAgc2V0IGxheW91dEtleShrZXk6IHN0cmluZykge1xyXG4gICAgICAgICAgICB0aGlzLl9sYXlvdXRLZXkgPSBrZXk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg44OH44O844K/44KS56C05qOEXHJcbiAgICAgICAgcmVsZWFzZSgpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5fbWFwR3JvdXBzID0ge307XHJcbiAgICAgICAgICAgIHRoaXMuX2FyeVRvcEdyb3VwcyA9IFtdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBJbXBsZW1lbnRlczogSUJhY2t1cFJlc3RvcmVcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog5YaF6YOo44OH44O844K/44KS44OQ44OD44Kv44Ki44OD44OXXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ga2V5IHtTdHJpbmd9IFtpbl0g44OQ44OD44Kv44Ki44OD44OX44Kt44O844KS5oyH5a6aXHJcbiAgICAgICAgICogQHJldHVybiB7Qm9vbGVhbn0gdHJ1ZTog5oiQ5YqfIC8gZmFsc2U6IOWkseaVl1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGJhY2t1cChrZXk6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICBsZXQgX2JhY2t1cCA9IHRoaXMuYmFja3VwRGF0YTtcclxuICAgICAgICAgICAgaWYgKG51bGwgPT0gX2JhY2t1cFtrZXldKSB7XHJcbiAgICAgICAgICAgICAgICBfYmFja3VwW2tleV0gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFwOiB0aGlzLl9tYXBHcm91cHMsXHJcbiAgICAgICAgICAgICAgICAgICAgdG9wczogdGhpcy5fYXJ5VG9wR3JvdXBzLFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOWGhemDqOODh+ODvOOCv+OCkuODquOCueODiOOColxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGtleSAgICAge1N0cmluZ30gIFtpbl0g44OQ44OD44Kv44Ki44OD44OX44Kt44O844KS5oyH5a6aXHJcbiAgICAgICAgICogQHBhcmFtIHJlYnVpbGQge0Jvb2xlYW59IFtpbl0gcmVidWlsZCDjgpLlrp/ooYzjgZnjgovloLTlkIjjga8gdHJ1ZSDjgpLmjIflrppcclxuICAgICAgICAgKiBAcmV0dXJuIHtCb29sZWFufSB0cnVlOiDmiJDlip8gLyBmYWxzZTog5aSx5pWXXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcmVzdG9yZShrZXk6IHN0cmluZywgcmVidWlsZDogYm9vbGVhbiA9IHRydWUpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgbGV0IF9iYWNrdXAgPSB0aGlzLmJhY2t1cERhdGE7XHJcblxyXG4gICAgICAgICAgICBpZiAobnVsbCA9PSBfYmFja3VwW2tleV0pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoMCA8IHRoaXMuX2FyeVRvcEdyb3Vwcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVsZWFzZSgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9tYXBHcm91cHMgPSBfYmFja3VwW2tleV0ubWFwO1xyXG4gICAgICAgICAgICB0aGlzLl9hcnlUb3BHcm91cHMgPSBfYmFja3VwW2tleV0udG9wcztcclxuXHJcbiAgICAgICAgICAgIC8vIGxheW91dCDmg4XloLHjga7norroqo1cclxuICAgICAgICAgICAgaWYgKHRoaXMuX2FyeVRvcEdyb3Vwcy5sZW5ndGggPD0gMCB8fCAhdGhpcy5fYXJ5VG9wR3JvdXBzWzBdLmhhc0xheW91dEtleU9mKHRoaXMubGF5b3V0S2V5KSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyDlsZXplovjgZfjgabjgYTjgovjgoLjga7jgpLnmbvpjLJcclxuICAgICAgICAgICAgdGhpcy5fYXJ5VG9wR3JvdXBzLmZvckVhY2goKGdyb3VwOiBHcm91cFByb2ZpbGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGdyb3VwLnJlc3RvcmUoKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyDlho3mp4vnr4njga7kuojntIRcclxuICAgICAgICAgICAgaWYgKHJlYnVpbGQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX293bmVyLnJlYnVpbGQoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg44OQ44OD44Kv44Ki44OD44OX44OH44O844K/44Gu5pyJ54ShXHJcbiAgICAgICAgaGFzQmFja3VwKGtleTogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9vd25lci5oYXNCYWNrdXAoa2V5KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDjg5Djg4Pjgq/jgqLjg4Pjg5fjg4fjg7zjgr/jga7noLTmo4RcclxuICAgICAgICBjbGVhckJhY2t1cChrZXk/OiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX293bmVyLmNsZWFyQmFja3VwKGtleSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg44OQ44OD44Kv44Ki44OD44OX44OH44O844K/44Gr44Ki44Kv44K744K5XHJcbiAgICAgICAgZ2V0IGJhY2t1cERhdGEoKTogYW55IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX293bmVyLmJhY2t1cERhdGE7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJMaXN0Vmlldy50c1wiIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJFeHBhbmRNYW5hZ2VyLnRzXCIgLz5cclxuXHJcbm5hbWVzcGFjZSBDRFAuVUkge1xyXG5cclxuICAgIGNvbnN0IFRBRyA9IFwiW0NEUC5VSS5FeHBhbmRhYmxlTGlzdFZpZXddIFwiO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGNsYXNzIEV4cGFuZGFibGVMaXN0Vmlld1xyXG4gICAgICogQGJyaWVmIOmWi+mWieapn+iDveOCkuWCmeOBiOOBn+S7ruaDs+ODquOCueODiOODk+ODpeODvOOCr+ODqeOCuVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgY2xhc3MgRXhwYW5kYWJsZUxpc3RWaWV3PFRNb2RlbCBleHRlbmRzIEJhY2tib25lLk1vZGVsPiBleHRlbmRzIExpc3RWaWV3PFRNb2RlbD4gaW1wbGVtZW50cyBJRXhwYW5kYWJsZUxpc3RWaWV3IHtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBfc3RhdHVzTWdyOiBTdGF0dXNNYW5hZ2VyID0gbnVsbDtcclxuICAgICAgICBwcml2YXRlIF9leHBhbmRNYW5hZ2VyOiBFeHBhbmRNYW5hZ2VyID0gbnVsbDtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogY29uc3RydWN0b3JcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBvcHRpb25zIHtMaXN0Vmlld0NvbnN0cnVjdE9wdGlvbnN9IFtpbl0g44Kq44OX44K344On44OzXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgY29uc3RydWN0b3Iob3B0aW9ucz86IExpc3RWaWV3Q29uc3RydWN0T3B0aW9uczxUTW9kZWw+KSB7XHJcbiAgICAgICAgICAgIHN1cGVyKG9wdGlvbnMpO1xyXG4gICAgICAgICAgICB0aGlzLl9zdGF0dXNNZ3IgPSBuZXcgU3RhdHVzTWFuYWdlcigpO1xyXG4gICAgICAgICAgICB0aGlzLl9leHBhbmRNYW5hZ2VyID0gbmV3IEV4cGFuZE1hbmFnZXIodGhpcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIEltcGxlbWVudHM6IElFeHBhbmRhYmxlTGlzdFZpZXdcclxuXHJcbiAgICAgICAgLy8hIOaWsOimjyBHcm91cFByb2ZpbGUg44KS5L2c5oiQXHJcbiAgICAgICAgbmV3R3JvdXAoaWQ/OiBzdHJpbmcpOiBHcm91cFByb2ZpbGUge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZXhwYW5kTWFuYWdlci5uZXdHcm91cChpZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg55m76Yyy5riI44G/IEdyb3VwIOOCkuWPluW+l1xyXG4gICAgICAgIGdldEdyb3VwKGlkOiBzdHJpbmcpOiBHcm91cFByb2ZpbGUge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZXhwYW5kTWFuYWdlci5nZXRHcm91cChpZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg56ysMemajuWxpOOBriBHcm91cCDnmbvpjLJcclxuICAgICAgICByZWdpc3RlclRvcEdyb3VwKHRvcEdyb3VwOiBHcm91cFByb2ZpbGUpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5fZXhwYW5kTWFuYWdlci5yZWdpc3RlclRvcEdyb3VwKHRvcEdyb3VwKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDnrKwx6ZqO5bGk44GuIEdyb3VwIOOCkuWPluW+l1xyXG4gICAgICAgIGdldFRvcEdyb3VwcygpOiBHcm91cFByb2ZpbGVbXSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9leHBhbmRNYW5hZ2VyLmdldFRvcEdyb3VwcygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOOBmeOBueOBpuOBruOCsOODq+ODvOODl+OCkuWxlemWiyAoMemajuWxpClcclxuICAgICAgICBleHBhbmRBbGwoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuX2V4cGFuZE1hbmFnZXIuZXhwYW5kQWxsKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg44GZ44G544Gm44Gu44Kw44Or44O844OX44KS5Y+O5p2fICgx6ZqO5bGkKVxyXG4gICAgICAgIGNvbGxhcHNlQWxsKGRlbGF5PzogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuX2V4cGFuZE1hbmFnZXIuY29sbGFwc2VBbGwoZGVsYXkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOWxlemWi+S4reOBi+WIpOWumlxyXG4gICAgICAgIGlzRXhwYW5kaW5nKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZXhwYW5kTWFuYWdlci5pc0V4cGFuZGluZygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOWPjuadn+S4reOBi+WIpOWumlxyXG4gICAgICAgIGlzQ29sbGFwc2luZygpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2V4cGFuZE1hbmFnZXIuaXNDb2xsYXBzaW5nKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg6ZaL6ZaJ5Lit44GL5Yik5a6aXHJcbiAgICAgICAgaXNTd2l0Y2hpbmcoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9leHBhbmRNYW5hZ2VyLmlzU3dpdGNoaW5nKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg54q25oWL5aSJ5pWw44Gu5Y+C54Wn44Kr44Km44Oz44OI44Gu44Kk44Oz44Kv44Oq44Oh44Oz44OIXHJcbiAgICAgICAgc3RhdHVzQWRkUmVmKHN0YXR1czogc3RyaW5nKTogbnVtYmVyIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3N0YXR1c01nci5zdGF0dXNBZGRSZWYoc3RhdHVzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDnirbmhYvlpInmlbDjga7lj4Lnhafjgqvjgqbjg7Pjg4jjga7jg4fjgq/jg6rjg6Hjg7Pjg4hcclxuICAgICAgICBzdGF0dXNSZWxlYXNlKHN0YXR1czogc3RyaW5nKTogbnVtYmVyIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3N0YXR1c01nci5zdGF0dXNSZWxlYXNlKHN0YXR1cyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg5Yem55CG44K544Kz44O844OX5q+O44Gr54q25oWL5aSJ5pWw44KS6Kit5a6aXHJcbiAgICAgICAgc3RhdHVzU2NvcGUoc3RhdHVzOiBzdHJpbmcsIGNhbGxiYWNrOiAoKSA9PiB2b2lkKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuX3N0YXR1c01nci5zdGF0dXNTY29wZShzdGF0dXMsIGNhbGxiYWNrKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDmjIflrprjgZfjgZ/nirbmhYvkuK3jgafjgYLjgovjgYvnorroqo1cclxuICAgICAgICBpc1N0YXR1c0luKHN0YXR1czogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zdGF0dXNNZ3IuaXNTdGF0dXNJbihzdGF0dXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIGxheW91dCBrZXkg44KS5Y+W5b6XXHJcbiAgICAgICAgZ2V0IGxheW91dEtleSgpOiBzdHJpbmcge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZXhwYW5kTWFuYWdlci5sYXlvdXRLZXk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgbGF5b3V0IGtleSDjgpLoqK3lrppcclxuICAgICAgICBzZXQgbGF5b3V0S2V5KGtleTogc3RyaW5nKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2V4cGFuZE1hbmFnZXIubGF5b3V0S2V5ID0ga2V5O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBPdmVycmlkZTogTGlzdFZpZXdcclxuXHJcbiAgICAgICAgLy8hIOODh+ODvOOCv+OCkuegtOajhFxyXG4gICAgICAgIHJlbGVhc2UoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHN1cGVyLnJlbGVhc2UoKTtcclxuICAgICAgICAgICAgdGhpcy5fZXhwYW5kTWFuYWdlci5yZWxlYXNlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg5YaF6YOo44OH44O844K/44KS44OQ44OD44Kv44Ki44OD44OXXHJcbiAgICAgICAgYmFja3VwKGtleTogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9leHBhbmRNYW5hZ2VyLmJhY2t1cChrZXkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOWGhemDqOODh+ODvOOCv+OCkuODquOCueODiOOColxyXG4gICAgICAgIHJlc3RvcmUoa2V5OiBzdHJpbmcsIHJlYnVpbGQ6IGJvb2xlYW4gPSB0cnVlKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9leHBhbmRNYW5hZ2VyLnJlc3RvcmUoa2V5LCByZWJ1aWxkKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uLy4uLy4uLy4uL2V4dGVybmFsL2luY2x1ZGUvY2RwLmZyYW1ld29yay5qcW0uZC50c1wiIC8+XHJcblxyXG5uYW1lc3BhY2UgQ0RQLlVJIHtcclxuXHJcbiAgICBpbXBvcnQgQ29uZmlnICAgICAgID0gQ0RQLkNvbmZpZztcclxuICAgIGltcG9ydCBGcmFtZXdvcmsgICAgPSBDRFAuRnJhbWV3b3JrO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGludGVyZmFjZSBUcmFuc2l0aW9uTWFwXHJcbiAgICAgKiBAYnJpZWYg44OI44Op44Oz44K444K344On44Oz44Oe44OD44OXXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgUGxhdGZvcm1UcmFuc2l0aW9uIHtcclxuICAgICAgICBbcGxhdGZvcm06IHN0cmluZ106IHN0cmluZzsgICAgIC8vITwgZXgpIGlvczogXCJzbGlkZVwiXHJcbiAgICAgICAgZmFsbGJhY2s6IHN0cmluZzsgICAgICAgICAgICAgICAvLyE8IGZhbGxiYWNrIHRyYW5zaXRpb24gcHJvcFxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGludGVyZmFjZSBUcmFuc2l0aW9uTWFwXHJcbiAgICAgKiBAYnJpZWYg44OI44Op44Oz44K444K344On44Oz44Oe44OD44OXXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgVHJhbnNpdGlvbk1hcCB7XHJcbiAgICAgICAgW3RyYW5zaXRpb25OYW1lOiBzdHJpbmddOiBQbGF0Zm9ybVRyYW5zaXRpb247XHJcbiAgICB9XHJcblxyXG4gICAgLy9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fLy9cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBjbGFzcyBUaGVtZVxyXG4gICAgICogQGJyaWVmIFVJIFRoZW1lIOioreWumuOCkuihjOOBhuODpuODvOODhuOCo+ODquODhuOCo+OCr+ODqeOCuVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgY2xhc3MgVGhlbWUge1xyXG5cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBzX3BsYXRmb3Jtczogc3RyaW5nW10gPSBbXCJpb3NcIiwgXCJhbmRyb2lkXCJdO1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIHNfcGFnZVRyYW5zaXRpb25NYXA6IFRyYW5zaXRpb25NYXAgPSB7XHJcbiAgICAgICAgICAgIFwicGxhdGZvcm0tZGVmYXVsdFwiOiB7XHJcbiAgICAgICAgICAgICAgICBpb3M6IFwic2xpZGVcIixcclxuICAgICAgICAgICAgICAgIGFuZHJvaWQ6IFwiZmxvYXR1cFwiLFxyXG4gICAgICAgICAgICAgICAgZmFsbGJhY2s6IFwic2xpZGVcIixcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgXCJwbGF0Zm9ybS1hbHRlcm5hdGl2ZVwiOiB7XHJcbiAgICAgICAgICAgICAgICBpb3M6IFwic2xpZGV1cFwiLFxyXG4gICAgICAgICAgICAgICAgYW5kcm9pZDogXCJmbG9hdHVwXCIsXHJcbiAgICAgICAgICAgICAgICBmYWxsYmFjazogXCJzbGlkZXVwXCIsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfTtcclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBzX2RpYWxvZ1RyYW5zaXRpb25NYXA6IFRyYW5zaXRpb25NYXAgPSB7XHJcbiAgICAgICAgICAgIFwicGxhdGZvcm0tZGVmYXVsdFwiOiB7XHJcbiAgICAgICAgICAgICAgICBpb3M6IFwicG9wem9vbVwiLFxyXG4gICAgICAgICAgICAgICAgYW5kcm9pZDogXCJjcm9zc3pvb21cIixcclxuICAgICAgICAgICAgICAgIGZhbGxiYWNrOiBcIm5vbmVcIixcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIHB1YmxpYyBzdGF0aWMgbWV0aG9kczpcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog54++5Zyo5oyH5a6a44GV44KM44Gm44GE44KLIFVJIFBsYXRmb3JtIOOCkuWPluW+l1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7U3RyaW5nfSBleCkgXCJpb3NcIlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgZ2V0Q3VycmVudFVJUGxhdGZvcm0oKTogc3RyaW5nIHtcclxuICAgICAgICAgICAgbGV0ICRodG1zID0gJChcImh0bWxcIik7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBuID0gdGhpcy5zX3BsYXRmb3Jtcy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGlmICgkaHRtcy5oYXNDbGFzcyhcInVpLXBsYXRmb3JtLVwiICsgdGhpcy5zX3BsYXRmb3Jtc1tpXSkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zX3BsYXRmb3Jtc1tpXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFVJIFBsYXRmb3JtIOOCkuioreWumlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7U3RyaW5nfSB0cnVlOiDmiJDlip8gLyBmYWxzZTog5aSx5pWXXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBzZXRDdXJyZW50VUlQbGF0Zm9ybShwbGF0Zm9ybTogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIGlmIChudWxsID09IHBsYXRmb3JtIHx8IHRoaXMuc19wbGF0Zm9ybXMuaW5kZXhPZihwbGF0Zm9ybSkgPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgbGV0ICRodG1zID0gJChcImh0bWxcIik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNfcGxhdGZvcm1zLmZvckVhY2goKHRhcmdldCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICRodG1zLnJlbW92ZUNsYXNzKFwidWktcGxhdGZvcm0tXCIgKyB0YXJnZXQpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBpZiAocGxhdGZvcm0pIHtcclxuICAgICAgICAgICAgICAgICAgICAkaHRtcy5hZGRDbGFzcyhcInVpLXBsYXRmb3JtLVwiICsgcGxhdGZvcm0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOePvuWcqOOBriBQbGF0Zm9ybSDjgpLliKTlrprjgZfmnIDpganjgaogcGxhdGZvcm0g44KS6Ieq5YuV5rG65a6aXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHtTdHJpbmd9IGV4KSBcImlvc1wiXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBkZXRlY3RVSVBsYXRmb3JtKCk6IHZvaWQge1xyXG4gICAgICAgICAgICAvLyBwbGF0Zm9ybSDjga7oqK3lrppcclxuICAgICAgICAgICAgaWYgKEZyYW1ld29yay5QbGF0Zm9ybS5pT1MpIHtcclxuICAgICAgICAgICAgICAgICQoXCJodG1sXCIpLmFkZENsYXNzKFwidWktcGxhdGZvcm0taW9zXCIpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJChcImh0bWxcIikuYWRkQ2xhc3MoXCJ1aS1wbGF0Zm9ybS1hbmRyb2lkXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIFBDIOODh+ODkOODg+OCsOeSsOWig+OBp+OBr+OCueOCr+ODreODvOODq+ODkOODvOOCkuihqOekulxyXG4gICAgICAgICAgICBpZiAoQ29uZmlnLkRFQlVHICYmICFGcmFtZXdvcmsuUGxhdGZvcm0uTW9iaWxlKSB7XHJcbiAgICAgICAgICAgICAgICAkKFwiYm9keVwiKS5jc3MoXCJvdmVyZmxvdy15XCIsIFwic2Nyb2xsXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBwbGF0Zm9ybSDjgpLphY3liJfjgafoqK3lrppcclxuICAgICAgICAgKiDkuIrmm7jjgY3jgZXjgozjgotcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7U3RyaW5nW119IHBsYXRmb3JtcyBbaW5dIE9TIGV4KTogW1wiaW9zXCIsIFwiYW5kcm9pZFwiXVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgc2V0VUlQbGF0Zm9ybXMocGxhdGZvcm1zOiBzdHJpbmdbXSk6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAocGxhdGZvcm1zKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNfcGxhdGZvcm1zID0gcGxhdGZvcm1zO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBwYWdlIHRyYW5zaXRpb24g44KS6Kit5a6aXHJcbiAgICAgICAgICog5LiK5pu444GN44GV44KM44KLXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge1RyYW5zaXRpb25NYXB9IG1hcCBbaW5dIFRyYW5zaXRpb25NYXAg44KS5oyH5a6aXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBzZXRQYWdlVHJhbnNpdGlvbk1hcChtYXA6IFRyYW5zaXRpb25NYXApOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKG1hcCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zX3BhZ2VUcmFuc2l0aW9uTWFwID0gbWFwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBkaWFsb2cgdHJhbnNpdGlvbiDjgpLoqK3lrppcclxuICAgICAgICAgKiDkuIrmm7jjgY3jgZXjgozjgotcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7VHJhbnNpdGlvbk1hcH0gbWFwIFtpbl0gVHJhbnNpdGlvbk1hcCDjgpLmjIflrppcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHNldERpYWxvZ1RyYW5zaXRpb25NYXAobWFwOiBUcmFuc2l0aW9uTWFwKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmIChtYXApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc19kaWFsb2dUcmFuc2l0aW9uTWFwID0gbWFwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBwYWdlIHRyYW5zaXRpb24g44KS5Y+W5b6XXHJcbiAgICAgICAgICogVHJhbnNpdGlvbk1hcCDjgavjgqLjgrXjgqTjg7PjgZXjgozjgabjgYTjgovjgoLjga7jgafjgYLjgozjgbDlpInmj5tcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge1N0cmluZ1tdfSBcInNsaWRlXCJcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHF1ZXJ5UGFnZVRyYW5zaXRpb24ob3JpZ2luYWw6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgICAgIGxldCBjb252ZXJ0ID0gdGhpcy5zX3BhZ2VUcmFuc2l0aW9uTWFwW29yaWdpbmFsXTtcclxuICAgICAgICAgICAgaWYgKGNvbnZlcnQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBjb252ZXJ0W3RoaXMuZ2V0Q3VycmVudFVJUGxhdGZvcm0oKV0gfHwgY29udmVydC5mYWxsYmFjaztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBvcmlnaW5hbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogZGlhbG9nIHRyYW5zaXRpb24g44KS5Y+W5b6XXHJcbiAgICAgICAgICogVHJhbnNpdGlvbk1hcCDjgavjgqLjgrXjgqTjg7PjgZXjgozjgabjgYTjgovjgoLjga7jgafjgYLjgozjgbDlpInmj5tcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge1N0cmluZ1tdfSBcInNsaWRlXCJcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHF1ZXJ5RGlhbG9nVHJhbnNpdGlvbihvcmlnaW5hbDogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgICAgICAgICAgbGV0IGNvbnZlcnQgPSB0aGlzLnNfZGlhbG9nVHJhbnNpdGlvbk1hcFtvcmlnaW5hbF07XHJcbiAgICAgICAgICAgIGlmIChjb252ZXJ0KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY29udmVydFt0aGlzLmdldEN1cnJlbnRVSVBsYXRmb3JtKCldIHx8IGNvbnZlcnQuZmFsbGJhY2s7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gb3JpZ2luYWw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fLy9cclxuXHJcbiAgICAvLyBqcXVleS5tb2JpbGUuY2hhbmdlUGFnZSgpIOOBriBIb29rLlxyXG4gICAgZnVuY3Rpb24gYXBwbHlDdXN0b21DaGFuZ2VQYWdlKCkge1xyXG4gICAgICAgIGNvbnN0IGpxbUNoYW5nZVBhZ2U6ICh0bzogYW55LCBvcHRpb25zPzogQ2hhbmdlUGFnZU9wdGlvbnMpID0+IHZvaWQgPSBfLmJpbmQoJC5tb2JpbGUuY2hhbmdlUGFnZSwgJC5tb2JpbGUpO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBjdXN0b21DaGFuZ2VQYWdlKHRvOiBhbnksIG9wdGlvbnM/OiBDaGFuZ2VQYWdlT3B0aW9ucyk6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAoXy5pc1N0cmluZyh0bykpIHtcclxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMudHJhbnNpdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMudHJhbnNpdGlvbiA9IFRoZW1lLnF1ZXJ5UGFnZVRyYW5zaXRpb24ob3B0aW9ucy50cmFuc2l0aW9uKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBqcW1DaGFuZ2VQYWdlKHRvLCBvcHRpb25zKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICQubW9iaWxlLmNoYW5nZVBhZ2UgPSBjdXN0b21DaGFuZ2VQYWdlO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGZyYW1ld29yayDliJ3mnJ/ljJblvozjgavpgannlKhcclxuICAgIEZyYW1ld29yay53YWl0Rm9ySW5pdGlhbGl6ZSgpXHJcbiAgICAgICAgLmRvbmUoKCkgPT4ge1xyXG4gICAgICAgICAgICBhcHBseUN1c3RvbUNoYW5nZVBhZ2UoKTtcclxuICAgICAgICB9KTtcclxufVxyXG4iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vLi4vLi4vLi4vZXh0ZXJuYWwvaW5jbHVkZS9jZHAuZnJhbWV3b3JrLmpxbS5kLnRzXCIgLz5cclxuXHJcbm5hbWVzcGFjZSBDRFAuVUkge1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGludGVyZmFjZSBEb21FeHRlbnNpb25PcHRpb25zXHJcbiAgICAgKiBAYnJlaWYgRG9tRXh0ZW5zaW9uIOOBq+a4oeOBmeOCquODl+OCt+ODp+ODs+OCpOODs+OCv+ODvOODleOCp+OCpOOCuVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIERvbUV4dGVuc2lvbk9wdGlvbnMge1xyXG4gICAgICAgIFtrZXk6IHN0cmluZ106IGFueTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEB0eXBlIERvbUV4dGVuc2lvblxyXG4gICAgICogQGJyaWVmIERPTSDmi6HlvLXplqLmlbBcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IHR5cGUgRG9tRXh0ZW5zaW9uID0gKCR0YXJnZXQ6IEpRdWVyeSwgRG9tRXh0ZW5zaW9uT3B0aW9ucz86IE9iamVjdCkgPT4gSlF1ZXJ5O1xyXG5cclxuICAgIC8vX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXy8vXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAY2xhc3MgRXh0ZW5zaW9uTWFuYWdlclxyXG4gICAgICogQGJyaWVmIOaLoeW8teapn+iDveOCkueuoeeQhuOBmeOCi+ODpuODvOODhuOCo+ODquODhuOCo+OCr+ODqeOCuVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgY2xhc3MgRXh0ZW5zaW9uTWFuYWdlciB7XHJcblxyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIHNfZG9tRXh0ZW5zaW9uczogRG9tRXh0ZW5zaW9uW10gPSBbXTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRE9NIOaLoeW8temWouaVsOOBrueZu+mMslxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtEb21FeHRlbnNpb259IGZ1bmMgW2luXSBET00g5ouh5by16Zai5pWwXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyByZWdpc3RlckRvbUV4dGVuc2lvbihmdW5jOiBEb21FeHRlbnNpb24pOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5zX2RvbUV4dGVuc2lvbnMucHVzaChmdW5jKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIERPTSDmi6HlvLXjgpLpgannlKhcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7alF1ZXJ5fSAkdWkgICAgICAgW2luXSDmi6HlvLXlr77osaHjga4gRE9NXHJcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSBbaW5dIOOCquODl+OCt+ODp+ODs1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYXBwbHlEb21FeHRlbnNpb24oJHVpOiBKUXVlcnksIG9wdGlvbnM/OiBEb21FeHRlbnNpb25PcHRpb25zKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuc19kb21FeHRlbnNpb25zLmZvckVhY2goKGZ1bmM6IERvbUV4dGVuc2lvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgZnVuYygkdWksIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uLy4uLy4uLy4uL2V4dGVybmFsL2luY2x1ZGUvanF1ZXJ5LmQudHNcIiAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vLi4vLi4vLi4vZXh0ZXJuYWwvaW5jbHVkZS9qcXVlcnkubW9iaWxlLmQudHNcIiAvPlxyXG5cclxuLypqc2hpbnQgc3ViOiB0cnVlICovXHJcbi8qIHRzbGludDpkaXNhYmxlOm5vLWJpdHdpc2UgKi9cclxuXHJcbm5hbWVzcGFjZSBDRFAuVUkge1xyXG5cclxuICAgIGNvbnN0IFRBRyA9IFwiW0NEUC5VSS5Ub2FzdF0gXCI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAY2xhc3MgVG9hc3RcclxuICAgICAqIEBicmllZiBBbmRyb2lkIFNESyDjga4gVG9hc3Qg44Kv44Op44K544Gu44KI44GG44Gr6Ieq5YuV5raI5ruF44GZ44KL44Oh44OD44K744O844K45Ye65Yqb44Om44O844OG44Kj44Oq44OG44KjXHJcbiAgICAgKiAgICAgICAg5YWl44KM5a2Q44Gu6Zai5L+C44KS5a6f54++44GZ44KL44Gf44KB44GrIG1vZHVsZSDjgaflrp/oo4VcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IG1vZHVsZSBUb2FzdCB7XHJcblxyXG4gICAgICAgIC8vIOihqOekuuaZgumWk+OBruWumue+qVxyXG4gICAgICAgIGV4cG9ydCBsZXQgTEVOR1RIX1NIT1JUID0gMTUwMDsgICAvLyE8IOefreOBhDoxNTAwIG1zZWNcclxuICAgICAgICBleHBvcnQgbGV0IExFTkdUSF9MT05HICA9IDQwMDA7ICAgLy8hPCDplbfjgYQ6NDAwMCBtc2VjXHJcblxyXG4gICAgICAgIC8vISBAZW51bSDjgqrjg5Xjgrvjg4Pjg4jjga7ln7rmupZcclxuICAgICAgICBleHBvcnQgZW51bSBPZmZzZXRYIHtcclxuICAgICAgICAgICAgTEVGVCAgICA9IDB4MDAwMSxcclxuICAgICAgICAgICAgUklHSFQgICA9IDB4MDAwMixcclxuICAgICAgICAgICAgQ0VOVEVSICA9IDB4MDAwNCxcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISBAZW51bSDjgqrjg5Xjgrvjg4Pjg4jjga7ln7rmupZcclxuICAgICAgICBleHBvcnQgZW51bSBPZmZzZXRZIHtcclxuICAgICAgICAgICAgVE9QICAgICA9IDB4MDAxMCxcclxuICAgICAgICAgICAgQk9UVE9NICA9IDB4MDAyMCxcclxuICAgICAgICAgICAgQ0VOVEVSICA9IDB4MDA0MCxcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBpbnRlcmZhY2UgU3R5bGVCdWlsZGVyXHJcbiAgICAgICAgICogQGJyaWVmICAgICDjgrnjgr/jgqTjg6vlpInmm7TmmYLjgavkvb/nlKjjgZnjgovjgqTjg7Pjgr/jg7zjg5XjgqfjgqTjgrlcclxuICAgICAgICAgKiAgICAgICAgICAgIGNzcyDjgavjgrnjgr/jgqTjg6vjgpLpgIPjgYzjgZnloLTlkIjjgIHni6zoh6rjga4gY2xhc3Mg44KS6Kit5a6a44GX44CBZ2V0U3R5bGUg44GvIG51bGwg44KS6L+U44GZ44GT44Go44CCXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZXhwb3J0IGludGVyZmFjZSBTdHlsZUJ1aWxkZXIge1xyXG4gICAgICAgICAgICAvLyEgY2xhc3MgYXR0cmlidXRlIOOBq+ioreWumuOBmeOCi+aWh+Wtl+WIl+OCkuWPluW+l1xyXG4gICAgICAgICAgICBnZXRDbGFzcygpOiBzdHJpbmc7XHJcbiAgICAgICAgICAgIC8vISBzdHlsZSBhdHRyaWJ1dGUg44Gr6Kit5a6a44GZ44KLIEpTT04g44Kq44OW44K444Kn44Kv44OI44KS5Y+W5b6XXHJcbiAgICAgICAgICAgIGdldFN0eWxlKCk6IGFueTtcclxuICAgICAgICAgICAgLy8hIOOCquODleOCu+ODg+ODiOOBruWfuua6luS9jee9ruOCkuWPluW+l1xyXG4gICAgICAgICAgICBnZXRPZmZzZXRQb2ludCgpOiBudW1iZXI7XHJcbiAgICAgICAgICAgIC8vISBYIOW6p+aomeOBruOCquODleOCu+ODg+ODiOWApOOCkuWPluW+l1xyXG4gICAgICAgICAgICBnZXRPZmZzZXRYKCk6IG51bWJlcjtcclxuICAgICAgICAgICAgLy8hIFkg5bqn5qiZ44Gu44Kq44OV44K744OD44OI5YCk44KS5Y+W5b6XXHJcbiAgICAgICAgICAgIGdldE9mZnNldFkoKTogbnVtYmVyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGNsYXNzIFN0eWxlQnVpbGRlckRlZmF1bHRcclxuICAgICAgICAgKiBAYnJpZWYg44K544K/44Kk44Or5aSJ5pu05pmC44Gr5L2/55So44GZ44KL5pei5a6a44Gu5qeL6YCg5L2T44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZXhwb3J0IGNsYXNzIFN0eWxlQnVpbGRlckRlZmF1bHQgaW1wbGVtZW50cyBTdHlsZUJ1aWxkZXIge1xyXG5cclxuICAgICAgICAgICAgLy8hIGNsYXNzIGF0dHJpYnV0ZSDjgavoqK3lrprjgZnjgovmloflrZfliJfjgpLlj5blvpdcclxuICAgICAgICAgICAgZ2V0Q2xhc3MoKTogc3RyaW5nIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBcInVpLWxvYWRlciB1aS1vdmVybGF5LXNoYWRvdyB1aS1jb3JuZXItYWxsXCI7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vISBzdHlsZSBhdHRyaWJ1dGUg44Gr6Kit5a6a44GZ44KLIEpTT04g44Kq44OW44K444Kn44Kv44OI44KS5Y+W5b6XXHJcbiAgICAgICAgICAgIGdldFN0eWxlKCk6IGFueSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgc3R5bGUgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgXCJwYWRkaW5nXCI6ICAgICAgICAgIFwiN3B4IDI1cHggN3B4IDI1cHhcIixcclxuICAgICAgICAgICAgICAgICAgICBcImRpc3BsYXlcIjogICAgICAgICAgXCJibG9ja1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiYmFja2dyb3VuZC1jb2xvclwiOiBcIiMxZDFkMWRcIixcclxuICAgICAgICAgICAgICAgICAgICBcImJvcmRlci1jb2xvclwiOiAgICAgXCIjMWIxYjFiXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJjb2xvclwiOiAgICAgICAgICAgIFwiI2ZmZlwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwidGV4dC1zaGFkb3dcIjogICAgICBcIjAgMXB4IDAgIzExMVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiZm9udC13ZWlnaHRcIjogICAgICBcImJvbGRcIixcclxuICAgICAgICAgICAgICAgICAgICBcIm9wYWNpdHlcIjogICAgICAgICAgMC44LFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzdHlsZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8hIOOCquODleOCu+ODg+ODiOOBruWfuua6luS9jee9ruOCkuWPluW+l1xyXG4gICAgICAgICAgICBnZXRPZmZzZXRQb2ludCgpOiBudW1iZXIge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIE9mZnNldFguQ0VOVEVSIHwgT2Zmc2V0WS5CT1RUT007XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vISBYIOW6p+aomeOBruOCquODleOCu+ODg+ODiOWApOOCkuWPluW+l1xyXG4gICAgICAgICAgICBnZXRPZmZzZXRYKCk6IG51bWJlciB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8hIFkg5bqn5qiZ44Gu44Kq44OV44K744OD44OI5YCk44KS5Y+W5b6XXHJcbiAgICAgICAgICAgIGdldE9mZnNldFkoKTogbnVtYmVyIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAtNzU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRvYXN0IOihqOekulxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIG1lc3NhZ2UgIFtpbl0g44Oh44OD44K744O844K4XHJcbiAgICAgICAgICogQHBhcmFtIGR1cmF0aW9uIFtpbl0g6KGo56S65pmC6ZaT44KS6Kit5a6aIChtc2VjKSBkZWZhdWx0OiBMRU5HVEhfU0hPUlRcclxuICAgICAgICAgKiBAcGFyYW0gc3R5bGUgICAgW2luXSDjgrnjgr/jgqTjg6vlpInmm7TjgZnjgovloLTlkIjjgavjga/mtL7nlJ/jgq/jg6njgrnjgqrjg5bjgrjjgqfjgq/jg4jjgpLmjIflrppcclxuICAgICAgICAgKi9cclxuICAgICAgICBleHBvcnQgZnVuY3Rpb24gc2hvdyhtZXNzYWdlOiBzdHJpbmcsIGR1cmF0aW9uOiBudW1iZXIgPSBUb2FzdC5MRU5HVEhfU0hPUlQsIHN0eWxlPzogU3R5bGVCdWlsZGVyKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGxldCAkbW9iaWxlID0gJC5tb2JpbGU7XHJcbiAgICAgICAgICAgIGxldCBpbmZvID0gc3R5bGUgfHwgbmV3IFN0eWxlQnVpbGRlckRlZmF1bHQoKTtcclxuICAgICAgICAgICAgbGV0IHNldENTUyA9IGluZm8uZ2V0U3R5bGUoKSA/IHRydWUgOiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIC8vIOaUueihjOOCs+ODvOODieOBryA8YnIvPiDjgavnva7mj5vjgZnjgotcclxuICAgICAgICAgICAgbGV0IG1zZyA9IG1lc3NhZ2UucmVwbGFjZSgvXFxuL2csIFwiPGJyLz5cIik7XHJcblxyXG4gICAgICAgICAgICAvLyDjg6Hjg4Pjgrvjg7zjgrggZWxlbWVudCDjga7li5XnmoTnlJ/miJBcclxuICAgICAgICAgICAgbGV0IGh0bWwgPSBcIjxkaXY+XCIgKyBtc2cgKyBcIjwvZGl2PlwiO1xyXG4gICAgICAgICAgICBsZXQgYm94ID0gJChodG1sKS5hZGRDbGFzcyhpbmZvLmdldENsYXNzKCkpO1xyXG4gICAgICAgICAgICBpZiAoc2V0Q1NTKSB7XHJcbiAgICAgICAgICAgICAgICBib3guY3NzKGluZm8uZ2V0U3R5bGUoKSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIOiHquWLleaUueihjOOBleOCjOOBpuOCguOCiOOBhOOCiOOBhuOBq+OAgeWfuueCueOCkuioreWumuOBl+OBpuOBi+OCiei/veWKoFxyXG4gICAgICAgICAgICBib3guY3NzKHtcclxuICAgICAgICAgICAgICAgIFwidG9wXCI6IDAsXHJcbiAgICAgICAgICAgICAgICBcImxlZnRcIjogMCxcclxuICAgICAgICAgICAgfSkuYXBwZW5kVG8oJG1vYmlsZS5wYWdlQ29udGFpbmVyKTtcclxuXHJcbiAgICAgICAgICAgIC8vIOmFjee9ruS9jee9ruOBruaxuuWumlxyXG4gICAgICAgICAgICBsZXQgb2Zmc2V0UG9pbnQgPSBpbmZvLmdldE9mZnNldFBvaW50KCk7XHJcbiAgICAgICAgICAgIGxldCBwb3NYLCBwb3NZO1xyXG4gICAgICAgICAgICBsZXQgJHdpbmRvdyA9ICQod2luZG93KTtcclxuXHJcbiAgICAgICAgICAgIGxldCBib3hfd2lkdGggPSBib3gud2lkdGgoKSArIHBhcnNlSW50KGJveC5jc3MoXCJwYWRkaW5nLWxlZnRcIiksIDEwKSArIHBhcnNlSW50KGJveC5jc3MoXCJwYWRkaW5nLXJpZ2h0XCIpLCAxMCk7XHJcbiAgICAgICAgICAgIGxldCBib3hfaGVpZ2h0ID0gYm94LmhlaWdodCgpICsgcGFyc2VJbnQoYm94LmNzcyhcInBhZGRpbmctdG9wXCIpLCAxMCkgKyBwYXJzZUludChib3guY3NzKFwicGFkZGluZy1ib3R0b21cIiksIDEwKTtcclxuXHJcbiAgICAgICAgICAgIHN3aXRjaCAob2Zmc2V0UG9pbnQgJiAweDAwMEYpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgT2Zmc2V0WC5MRUZUOlxyXG4gICAgICAgICAgICAgICAgICAgIHBvc1ggPSAwICsgaW5mby5nZXRPZmZzZXRYKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIE9mZnNldFguUklHSFQ6XHJcbiAgICAgICAgICAgICAgICAgICAgcG9zWCA9ICR3aW5kb3cud2lkdGgoKSAtIGJveF93aWR0aCArIGluZm8uZ2V0T2Zmc2V0WCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBPZmZzZXRYLkNFTlRFUjpcclxuICAgICAgICAgICAgICAgICAgICBwb3NYID0gKCR3aW5kb3cud2lkdGgoKSAvIDIpIC0gKGJveF93aWR0aCAvIDIpICsgaW5mby5nZXRPZmZzZXRYKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihUQUcgKyBcIndhcm4uIHVua25vd24gb2Zmc2V0UG9pbnQ6XCIgKyAob2Zmc2V0UG9pbnQgJiAweDAwMEYpKTtcclxuICAgICAgICAgICAgICAgICAgICBwb3NYID0gKCR3aW5kb3cud2lkdGgoKSAvIDIpIC0gKGJveF93aWR0aCAvIDIpICsgaW5mby5nZXRPZmZzZXRYKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHN3aXRjaCAob2Zmc2V0UG9pbnQgJiAweDAwRjApIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgT2Zmc2V0WS5UT1A6XHJcbiAgICAgICAgICAgICAgICAgICAgcG9zWSA9IDAgKyBpbmZvLmdldE9mZnNldFkoKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgT2Zmc2V0WS5CT1RUT006XHJcbiAgICAgICAgICAgICAgICAgICAgcG9zWSA9ICR3aW5kb3cuaGVpZ2h0KCkgLSBib3hfaGVpZ2h0ICsgaW5mby5nZXRPZmZzZXRZKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIE9mZnNldFkuQ0VOVEVSOlxyXG4gICAgICAgICAgICAgICAgICAgIHBvc1kgPSAoJHdpbmRvdy5oZWlnaHQoKSAvIDIpIC0gKGJveF9oZWlnaHQgLyAyKSArIGluZm8uZ2V0T2Zmc2V0WSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oVEFHICsgXCJ3YXJuLiB1bmtub3duIG9mZnNldFBvaW50OlwiICsgKG9mZnNldFBvaW50ICYgMHgwMEYwKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9zWSA9ICgkd2luZG93LmhlaWdodCgpIC8gMikgLSAoYm94X2hlaWdodCAvIDIpICsgaW5mby5nZXRPZmZzZXRZKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIOihqOekulxyXG4gICAgICAgICAgICBib3guY3NzKHtcclxuICAgICAgICAgICAgICAgIFwidG9wXCI6IHBvc1ksXHJcbiAgICAgICAgICAgICAgICBcImxlZnRcIjogcG9zWCxcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmRlbGF5KGR1cmF0aW9uKVxyXG4gICAgICAgICAgICAuZmFkZU91dCg0MDAsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICQodGhpcykucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vLi4vLi4vLi4vZXh0ZXJuYWwvaW5jbHVkZS9jZHAudG9vbHMuZC50c1wiIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJUaGVtZS50c1wiIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJFeHRlbnNpb25NYW5hZ2VyLnRzXCIgLz5cclxuXHJcbm5hbWVzcGFjZSBDRFAuVUkge1xyXG5cclxuICAgIGltcG9ydCBGcmFtZXdvcmsgPSBDRFAuRnJhbWV3b3JrO1xyXG5cclxuICAgIGNvbnN0IFRBRyA9IFwiW0NEUC5VSS5EaWFsb2ddIFwiO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogSC9XIEJhY2sgS2V5IEhvb2sg6Zai5pWwXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCB0eXBlIERpYWxvZ0JhY2tLZXlIYW5kbGVyID0gKGV2ZW50PzogQmFzZUpRdWVyeUV2ZW50T2JqZWN0KSA9PiB2b2lkO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGludGVyZmFjZSBEaWFsb2dPcHRpb25zXHJcbiAgICAgKiAgICAgICAgICAgIOODgOOCpOOCouODreOCsOOCquODl+OCt+ODp+ODs+OCpOODs+OCv+ODvOODleOCp+OCpOOCuVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIERpYWxvZ09wdGlvbnMgZXh0ZW5kcyBQb3B1cE9wdGlvbnMge1xyXG4gICAgICAgIHNyYz86IHN0cmluZzsgICAgICAgICAgICAgICAgICAgLy8hPCB7U3RyaW5nfSB0ZW1wbGF0ZSDjg5XjgqHjgqTjg6vjga7jg5HjgrkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiB1bmRlZmluZWRcclxuICAgICAgICB0aXRsZT86IHN0cmluZzsgICAgICAgICAgICAgICAgIC8vITwge1N0cmluZ30g44OA44Kk44Ki44Ot44Kw44K/44Kk44OI44OrICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiB1bmRlZmluZWRcclxuICAgICAgICBtZXNzYWdlPzogc3RyaW5nOyAgICAgICAgICAgICAgIC8vITwge1N0cmluZ30g44Oh44Kk44Oz44Oh44OD44K744O844K4ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHVuZGVmaW5lZFxyXG4gICAgICAgIGlkUG9zaXRpdmU/OiBzdHJpbmc7ICAgICAgICAgICAgLy8hPCB7U3RyaW5nfSBQb3NpdGl2ZSDjg5zjgr/jg7Pjga5JRCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBcImRsZy1idG4tcG9zaXRpdmVcIlxyXG4gICAgICAgIGlkTmVnYXRpdmU/OiBzdHJpbmc7ICAgICAgICAgICAgLy8hPCB7U3RyaW5nfSBOYWdhdGl2ZSDjg5zjgr/jg7Pjga5JRCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBcImRsZy1idG4tbmVnYXRpdmVcIlxyXG4gICAgICAgIGV2ZW50Pzogc3RyaW5nOyAgICAgICAgICAgICAgICAgLy8hPCB7U3RyaW5nfSBEaWFsb2cg44Kv44Op44K544GM566h55CG44GZ44KL44Kk44OZ44Oz44OIICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IFwidmNsaWNrXCJcclxuICAgICAgICBkZWZhdWx0QXV0b0Nsb3NlPzogYm9vbGVhbjsgICAgIC8vITwge0Jvb2xlYW59IGRhdGEtYXV0by1jbG9zZSDjgYzmjIflrprjgZXjgozjgabjgYTjgarjgYTloLTlkIjjga7ml6LlrprlgKQgICAgICAgICBkZWZhdWx0OiBmYWxzZVxyXG4gICAgICAgIGZvcmNlT3ZlcndyaXRlQWZ0ZXJDbG9zZT86IGJvb2xlYW47IC8vITwge0Jvb2xlYW59IGFmdGVyY2xvc2Ug44Kq44OX44K344On44Oz44KS5by35Yi25LiK5pu444GN44GZ44KL44Gf44KB44Gu6Kit5a6aICAgIGRlZmF1bHQ6IGZhbHNlXHJcbiAgICAgICAgbGFiZWxQb3NpdGl2ZT86IHN0cmluZzsgICAgICAgICAvLyE8IHtTdHJpbmd9IFBvc2l0aXZlIOODnOOCv+ODs+ODqeODmeODqyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogXCJPS1wiXHJcbiAgICAgICAgbGFiZWxOZWdhdGl2ZT86IHN0cmluZzsgICAgICAgICAvLyE8IHtTdHJpbmd9IE5lZ2F0aXZlIOODnOOCv+ODs+ODqeODmeODqyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogXCJDYW5jZWxcIlxyXG4gICAgICAgIGJhY2tLZXk/OiBcImNsb3NlXCIgfCBcImRlbnlcIiB8IERpYWxvZ0JhY2tLZXlIYW5kbGVyOyAgLy8hPCBIL1cgYmFja0tleSDjga7mjK/jgovoiJ7jgYQgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IFwiY2xvc2VcIlxyXG4gICAgICAgIHNjcm9sbEV2ZW50PzogXCJkZW55XCIgfCBcImFsbG93XCIgfCBcImFkanVzdFwiOyAgIC8vITwge1N0cmluZ30gc2Nyb2xs44Gu5oqR5q2i5pa55byPICAo4oC7IGFkanVzdCDjga/oqabpqJPnmoQpICAgICBkZWZhdWx0OiBcImRlbnlcIlxyXG4gICAgICAgIGRvbUV4dGVuc2lvbk9wdGlvbnM/OiBEb21FeHRlbnNpb25PcHRpb25zOyAgIC8vITwgRE9N5ouh5by144Kq44OX44K344On44OzLiBudWxsfHVuZGVmaW5lZCDjgafmi6HlvLXjgZfjgarjgYQgICAgICBkZWZhdWx0OiB7fVxyXG4gICAgICAgIFt4OiBzdHJpbmddOiBhbnk7ICAgICAgICAgICAgICAgLy8hPCBhbnkgZGlhbG9nIHRlbXBsYXRlIHBhcmFtZXRlcnMuXHJcbiAgICB9XHJcblxyXG4gICAgLy9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fLy9cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBjbGFzcyBEaWFsb2dcclxuICAgICAqIEBicmllZiDmsY7nlKjjg4DjgqTjgqLjg63jgrDjgq/jg6njgrlcclxuICAgICAqICAgICAgICBqUU0g44GuIHBvcHVwIHdpZGdldCDjgavjgojjgaPjgablrp/oo4VcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGNsYXNzIERpYWxvZyB7XHJcblxyXG4gICAgICAgIHByaXZhdGUgX3RlbXBsYXRlOiBUb29scy5KU1QgPSBudWxsO1xyXG4gICAgICAgIHByaXZhdGUgX3NldHRpbmdzOiBEaWFsb2dPcHRpb25zID0gbnVsbDtcclxuICAgICAgICBwcml2YXRlIF8kZGlhbG9nOiBKUXVlcnkgPSBudWxsO1xyXG5cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBzX2FjdGl2ZURpYWxvZzogRGlhbG9nID0gbnVsbDtcclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBzX29sZEJhY2tLZXlIYW5kbGVyOiAoZXZlbnQ/OiBCYXNlSlF1ZXJ5RXZlbnRPYmplY3QpID0+IHZvaWQgPSBudWxsO1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIHNfZGVmYXVsdE9wdGlvbnM6IERpYWxvZ09wdGlvbnMgPSBudWxsO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBjb25zdHJ1Y3RvclxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGlkICAgICAge1N0cmluZ30gICAgICAgIFtpbl0g44OA44Kk44Ki44Ot44KwIERPTSBJRCDjgpLmjIflrpogZXgpICNkaWFsb2ctaG9nZVxyXG4gICAgICAgICAqIEBwYXJhbSBvcHRpb25zIHtEaWFsb2dPcHRpb25zfSBbaW5dIOOCquODl+OCt+ODp+ODs1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGNvbnN0cnVjdG9yKGlkOiBzdHJpbmcsIG9wdGlvbnM/OiBEaWFsb2dPcHRpb25zKSB7XHJcbiAgICAgICAgICAgIC8vIERpYWxvZyDlhbHpgJroqK3lrprjga7liJ3mnJ/ljJZcclxuICAgICAgICAgICAgRGlhbG9nLmluaXRDb21tb25Db25kaXRpb24oKTtcclxuICAgICAgICAgICAgLy8g6Kit5a6a44KS5pu05pawXHJcbiAgICAgICAgICAgIHRoaXMuX3NldHRpbmdzID0gJC5leHRlbmQoe30sIERpYWxvZy5zX2RlZmF1bHRPcHRpb25zLCBvcHRpb25zKTtcclxuICAgICAgICAgICAgLy8g44OA44Kk44Ki44Ot44Kw44OG44Oz44OX44Os44O844OI44KS5L2c5oiQXHJcbiAgICAgICAgICAgIHRoaXMuX3RlbXBsYXRlID0gVG9vbHMuVGVtcGxhdGUuZ2V0SlNUKGlkLCB0aGlzLl9zZXR0aW5ncy5zcmMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBwdWJsaWMgbWV0aG9kc1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDooajnpLpcclxuICAgICAgICAgKiDooajnpLrjgpLjgZfjgablp4vjgoHjgaYgRE9NIOOBjOacieWKueOBq+OBquOCi+OAglxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIG9wdGlvbnMge0RpYWxvZ09wdGlvbnN9IFtpbl0g44Kq44OX44K344On44OzIChzcmMg44Gv54Sh6KaW44GV44KM44KLKVxyXG4gICAgICAgICAqIEByZXR1cm4g44OA44Kk44Ki44Ot44Kw44GuIGpRdWVyeSDjgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgc2hvdyhvcHRpb25zPzogRGlhbG9nT3B0aW9ucyk6IEpRdWVyeSB7XHJcbiAgICAgICAgICAgIGxldCAkZG9jdW1lbnQgPSAkKGRvY3VtZW50KSxcclxuICAgICAgICAgICAgICAgICRib2R5ID0gJChcImJvZHlcIiksXHJcbiAgICAgICAgICAgICAgICAkcGFnZSA9ICg8YW55PiRib2R5KS5wYWdlY29udGFpbmVyKFwiZ2V0QWN0aXZlUGFnZVwiKTtcclxuXHJcbiAgICAgICAgICAgIGxldCBvZmNIaWRkZW4gPSB7XHJcbiAgICAgICAgICAgICAgICBcIm92ZXJmbG93XCI6ICAgICBcImhpZGRlblwiLFxyXG4gICAgICAgICAgICAgICAgXCJvdmVyZmxvdy14XCI6ICAgXCJoaWRkZW5cIixcclxuICAgICAgICAgICAgICAgIFwib3ZlcmZsb3cteVwiOiAgIFwiaGlkZGVuXCIsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGxldCBvZmNCb2R5ID0geyAvLyBib2R5IG92ZXJmbG93IGNvbnRleHRcclxuICAgICAgICAgICAgICAgIFwib3ZlcmZsb3dcIjogICAgICRib2R5LmNzcyhcIm92ZXJmbG93XCIpLFxyXG4gICAgICAgICAgICAgICAgXCJvdmVyZmxvdy14XCI6ICAgJGJvZHkuY3NzKFwib3ZlcmZsb3cteFwiKSxcclxuICAgICAgICAgICAgICAgIFwib3ZlcmZsb3cteVwiOiAgICRib2R5LmNzcyhcIm92ZXJmbG93LXlcIiksXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGxldCBwYXJlbnRTY3JvbGxQb3MgPSAkYm9keS5zY3JvbGxUb3AoKTtcclxuICAgICAgICAgICAgbGV0IG9mY1BhZ2UgPSB7IC8vIHBhZ2Ugb3ZlcmZsb3cgY29udGV4dFxyXG4gICAgICAgICAgICAgICAgXCJvdmVyZmxvd1wiOiAgICAgJHBhZ2UuY3NzKFwib3ZlcmZsb3dcIiksXHJcbiAgICAgICAgICAgICAgICBcIm92ZXJmbG93LXhcIjogICAkcGFnZS5jc3MoXCJvdmVyZmxvdy14XCIpLFxyXG4gICAgICAgICAgICAgICAgXCJvdmVyZmxvdy15XCI6ICAgJHBhZ2UuY3NzKFwib3ZlcmZsb3cteVwiKSxcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGxldCBzY3JvbGxFdmVudCA9IFwic2Nyb2xsIHRvdWNobW92ZSBtb3VzZW1vdmUgTVNQb2ludGVyTW92ZVwiO1xyXG5cclxuICAgICAgICAgICAgbGV0IHNjcm9sbEhhbmRlciA9IChldmVudDogSlF1ZXJ5RXZlbnRPYmplY3QpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChcImRlbnlcIiA9PT0gdGhpcy5fc2V0dGluZ3Muc2Nyb2xsRXZlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcImFkanVzdFwiID09PSB0aGlzLl9zZXR0aW5ncy5zY3JvbGxFdmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICRib2R5LnNjcm9sbFRvcChwYXJlbnRTY3JvbGxQb3MpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLy8gb3B0aW9uIOOBjOaMh+WumuOBleOCjOOBpuOBhOOBn+WgtOWQiOabtOaWsFxyXG4gICAgICAgICAgICBpZiAobnVsbCAhPSBvcHRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zZXR0aW5ncyA9ICQuZXh0ZW5kKHt9LCB0aGlzLl9zZXR0aW5ncywgb3B0aW9ucyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIGFmdGVyY2xvc2Ug5Yem55CG44GvIERpYWxvZyDjga7noLTmo4Tlh6bnkIbjgpLlrp/oo4XjgZnjgovjgZ/jgoHln7rmnKznmoTjgavoqK3lrprnpoHmraIgKOW8t+WItuS4iuabuOOBjeODouODvOODieOCkuioreWumuS9v+eUqOWPrylcclxuICAgICAgICAgICAgaWYgKHRoaXMuX3NldHRpbmdzLmFmdGVyY2xvc2UgJiYgIXRoaXMuX3NldHRpbmdzLmZvcmNlT3ZlcndyaXRlQWZ0ZXJDbG9zZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFRBRyArIFwiY2Fubm90IGFjY2VwdCAnYWZ0ZXJjbG9zZScgb3B0aW9uLiBwbGVhc2UgaW5zdGVhZCB1c2luZyAncG9wdXBhZnRlcmNsb3NlJyBldmVudC5cIik7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5fc2V0dGluZ3MuYWZ0ZXJjbG9zZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gdGl0bGUg44Gu5pyJ54ShXHJcbiAgICAgICAgICAgICg8YW55PnRoaXMuX3NldHRpbmdzKS5fdGl0bGVTdGF0ZSA9IHRoaXMuX3NldHRpbmdzLnRpdGxlID8gXCJ1aS1oYXMtdGl0bGVcIiA6IFwidWktbm8tdGl0bGVcIjtcclxuXHJcbiAgICAgICAgICAgIC8qXHJcbiAgICAgICAgICAgICAqIHRlbXBsYXRlIOOBi+OCiSBqUXVlcnkg44Kq44OW44K444Kn44Kv44OI44KS5L2c5oiQ44GX44CBXHJcbiAgICAgICAgICAgICAqIDxib2R5PiDnm7TkuIvjgavov73liqAuXHJcbiAgICAgICAgICAgICAqICRwYWdlIOOBp+OBryBCYWNrYm9uZSBldmVudCDjgpLlj5fjgZHjgonjgozjgarjgYTjgZPjgajjgavms6jmhI9cclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIHRoaXMuXyRkaWFsb2cgPSAkKHRoaXMuX3RlbXBsYXRlKHRoaXMuX3NldHRpbmdzKSk7XHJcbiAgICAgICAgICAgIHRoaXMuXyRkaWFsb2cubG9jYWxpemUoKTtcclxuICAgICAgICAgICAgJGJvZHkuYXBwZW5kKHRoaXMuXyRkaWFsb2cpO1xyXG5cclxuICAgICAgICAgICAgLy8gdGhlbWUg44KS6Kej5rG6XHJcbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZVRoZW1lKCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl8kZGlhbG9nXHJcbiAgICAgICAgICAgICAgICAub24oXCJwb3B1cGNyZWF0ZVwiLCAoZXZlbnQ6IEpRdWVyeUV2ZW50T2JqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g44K544Kv44Ot44O844Or44KS5oqR5q2iXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKFwiYWxsb3dcIiAhPT0gdGhpcy5fc2V0dGluZ3Muc2Nyb2xsRXZlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJGRvY3VtZW50Lm9uKHNjcm9sbEV2ZW50LCBzY3JvbGxIYW5kZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAkYm9keS5jc3Mob2ZjSGlkZGVuKTtcclxuICAgICAgICAgICAgICAgICAgICAkcGFnZS5jc3Mob2ZjSGlkZGVuKTtcclxuICAgICAgICAgICAgICAgICAgICBEaWFsb2cucmVnaXN0ZXIodGhpcyk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmVuaGFuY2VXaXRoaW4oKTtcclxuXHJcbiAgICAgICAgICAgIC8vIERPTSDmi6HlvLVcclxuICAgICAgICAgICAgaWYgKG51bGwgIT0gdGhpcy5fc2V0dGluZ3MuZG9tRXh0ZW5zaW9uT3B0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgRXh0ZW5zaW9uTWFuYWdlci5hcHBseURvbUV4dGVuc2lvbih0aGlzLl8kZGlhbG9nLCB0aGlzLl9zZXR0aW5ncy5kb21FeHRlbnNpb25PcHRpb25zKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5vbkJlZm9yZVNob3coKVxyXG4gICAgICAgICAgICAgICAgLmRvbmUoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIOihqOekulxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuXyRkaWFsb2dcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnBvcHVwKCQuZXh0ZW5kKHt9LCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvblRvOiBcIndpbmRvd1wiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWZ0ZXJjbG9zZTogKGV2ZW50OiBKUXVlcnlFdmVudE9iamVjdCwgdWk6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOOCueOCr+ODreODvOODq+eKtuaFi+OCkuaIu+OBmVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRwYWdlLmNzcyhvZmNQYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkYm9keS5jc3Mob2ZjQm9keSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFwiYWxsb3dcIiAhPT0gdGhpcy5fc2V0dGluZ3Muc2Nyb2xsRXZlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGRvY3VtZW50Lm9mZihzY3JvbGxFdmVudCwgc2Nyb2xsSGFuZGVyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGlhbG9nLnJlZ2lzdGVyKG51bGwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuXyRkaWFsb2cucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fJGRpYWxvZyA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCB0aGlzLl9zZXR0aW5ncykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5wb3B1cChcIm9wZW5cIikub24odGhpcy5fc2V0dGluZ3MuZXZlbnQsIChldmVudDogSlF1ZXJ5RXZlbnRPYmplY3QpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFwiZGF0YS1hdXRvLWNsb3NlPSdmYWxzZSdcIiDjgYzmjIflrprjgZXjgozjgabjgYTjgovopoHntKDjga8gZGlhbG9nIOOCkumWieOBmOOBquOBhFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGF1dG9DbG9zZSA9ICQoZXZlbnQudGFyZ2V0KS5hdHRyKFwiZGF0YS1hdXRvLWNsb3NlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgPT0gYXV0b0Nsb3NlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXV0b0Nsb3NlID0gdGhpcy5fc2V0dGluZ3MuZGVmYXVsdEF1dG9DbG9zZSA/IFwidHJ1ZVwiIDogXCJmYWxzZVwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFwiZmFsc2VcIiA9PT0gYXV0b0Nsb3NlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5mYWlsKChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoVEFHICsgXCJEaWFsb2cuc2hvdygpIGZhaWxlZC5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuXyRkaWFsb2cpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fJGRpYWxvZy50cmlnZ2VyKFwiZXJyb3JcIiwgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuXyRkaWFsb2c7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDntYLkuoZcclxuICAgICAgICAgKiDln7rmnKznmoTjgavjga/oh6rli5XjgafplonjgZjjgovjgYzjgIFcclxuICAgICAgICAgKiDooajnpLrkuK3jga7jg4DjgqTjgqLjg63jgrDjgpLjgq/jg6njgqTjgqLjg7Pjg4jlgbTjgYvjgonplonjgZjjgovjg6Hjgr3jg4Pjg4lcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgY2xvc2UoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl8kZGlhbG9nKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl8kZGlhbG9nLnBvcHVwKFwiY2xvc2VcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDjg4DjgqTjgqLjg63jgrAgZWxlbWVudCDjgpLlj5blvpdcclxuICAgICAgICBwdWJsaWMgZ2V0ICRlbCgpOiBKUXVlcnkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fJGRpYWxvZztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gcHJvdGVjdGVkIG1ldGhvZHM6IE92ZXJyaWRlXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOODgOOCpOOCouODreOCsOihqOekuuOBruebtOWJjVxyXG4gICAgICAgICAqIERPTSDjgpLmk43kvZzjgafjgY3jgovjgr/jgqTjg5/jg7PjgrDjgaflkbzjgbPlh7rjgZXjgozjgosuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHtqUXVlcnlQcm9taXNlfSBwcm9taXNlIOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByb3RlY3RlZCBvbkJlZm9yZVNob3coKTogSlF1ZXJ5UHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgICAgIHJldHVybiAkLkRlZmVycmVkPHZvaWQ+KCkucmVzb2x2ZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog44OA44Kk44Ki44Ot44Kw44Gu5L2/55So44GZ44KLIFRoZW1lIOOCkuino+axulxyXG4gICAgICAgICAqIOS4jeimgeOBquWgtOWQiOOBr+OCquODvOODkOODvOODqeOCpOODieOBmeOCi+OBk+OBqOOCguWPr+iDvVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByb3RlY3RlZCByZXNvbHZlVGhlbWUoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5VGhlbWUgPSAoKTogc3RyaW5nID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAkKFwiLnVpLXBhZ2UtYWN0aXZlXCIpLmpxbURhdGEoXCJ0aGVtZVwiKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGxldCBjYW5kaWRhdGVUaGVtZTogc3RyaW5nO1xyXG5cclxuICAgICAgICAgICAgaWYgKCF0aGlzLl9zZXR0aW5ncy50aGVtZSkge1xyXG4gICAgICAgICAgICAgICAgbGV0IGRvbVRoZW1lID0gdGhpcy5fJGRpYWxvZy5qcW1EYXRhKFwidGhlbWVcIik7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWRvbVRoZW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2V0dGluZ3MudGhlbWUgPSBjYW5kaWRhdGVUaGVtZSA9IHF1ZXJ5VGhlbWUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCF0aGlzLl9zZXR0aW5ncy5vdmVybGF5VGhlbWUpIHtcclxuICAgICAgICAgICAgICAgIGxldCBkb21PdmVybGF5VGhlbWUgPSB0aGlzLl8kZGlhbG9nLmpxbURhdGEoXCJvdmVybGF5LXRoZW1lXCIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFkb21PdmVybGF5VGhlbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9zZXR0aW5ncy5vdmVybGF5VGhlbWUgPSBjYW5kaWRhdGVUaGVtZSB8fCBxdWVyeVRoZW1lKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIHRyYW5zaXRpb24g44Gu5pu05pawXHJcbiAgICAgICAgICAgIHRoaXMuX3NldHRpbmdzLnRyYW5zaXRpb24gPSBUaGVtZS5xdWVyeURpYWxvZ1RyYW5zaXRpb24odGhpcy5fc2V0dGluZ3MudHJhbnNpdGlvbik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIHB1YmxpYyBzdGF0aWMgbWV0aG9kc1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBEaWFsb2cg44Gu5pei5a6a44Kq44OX44K344On44Oz44KS5pu05pawXHJcbiAgICAgICAgICog44GZ44G644Gm44GuIERpYWxvZyDjgYzkvb/nlKjjgZnjgovlhbHpgJroqK3lrppcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBvcHRpb25zIHtEaWFsb2dPcHRpb25zfSBbaW5dIOODgOOCpOOCouODreOCsOOCquODl+OCt+ODp+ODs1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgc2V0RGVmYXVsdE9wdGlvbnMob3B0aW9uczogRGlhbG9nT3B0aW9ucyk6IHZvaWQge1xyXG4gICAgICAgICAgICAvLyBEaWFsb2cg5YWx6YCa6Kit5a6a44Gu5Yid5pyf5YyWXHJcbiAgICAgICAgICAgIERpYWxvZy5pbml0Q29tbW9uQ29uZGl0aW9uKCk7XHJcbiAgICAgICAgICAgICQuZXh0ZW5kKHRydWUsIERpYWxvZy5zX2RlZmF1bHRPcHRpb25zLCBvcHRpb25zKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gcHJpdmF0ZSBtZXRob2RzXHJcblxyXG4gICAgICAgIC8vISDnj77lnKggYWN0aXZlIOOBquODgOOCpOOCouODreOCsOOBqOOBl+OBpueZu+mMsuOBmeOCi1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIHJlZ2lzdGVyKGRpYWxvZzogRGlhbG9nKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmIChudWxsICE9IGRpYWxvZyAmJiBudWxsICE9IERpYWxvZy5zX2FjdGl2ZURpYWxvZykge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFRBRyArIFwibmV3IGRpYWxvZyBwcm9jIGlzIGNhbGxlZCBpbiB0aGUgcGFzdCBkaWFsb2cncyBvbmUuIHVzZSBzZXRUaW1lb3V0KCkgZm9yIHBvc3QgcHJvY2Vzcy5cIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgRGlhbG9nLnNfYWN0aXZlRGlhbG9nID0gZGlhbG9nO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRGlhbG9nIOWFsemAmuioreWumuOBruWIneacn+WMllxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGluaXRDb21tb25Db25kaXRpb24oKTogdm9pZCB7XHJcbiAgICAgICAgICAgIC8vIEZyYW1ld29yayDjga7liJ3mnJ/ljJblvozjgavlh6bnkIbjgZnjgovlv4XopoHjgYzjgYLjgotcclxuICAgICAgICAgICAgaWYgKCFGcmFtZXdvcmsuaXNJbml0aWFsaXplZCgpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oVEFHICsgXCJpbml0Q29tbW9uQ29uZGl0aW9uKCkgc2hvdWxkIGJlIGNhbGxlZCBhZnRlciBGcmFtZXdvcmsuaW5pdGlhbGl6ZWQuXCIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAobnVsbCA9PSBEaWFsb2cuc19vbGRCYWNrS2V5SGFuZGxlcikge1xyXG4gICAgICAgICAgICAgICAgLy8gQmFjayBCdXR0b24gSGFuZGxlclxyXG4gICAgICAgICAgICAgICAgRGlhbG9nLnNfb2xkQmFja0tleUhhbmRsZXIgPSBDRFAuc2V0QmFja0J1dHRvbkhhbmRsZXIobnVsbCk7XHJcbiAgICAgICAgICAgICAgICBDRFAuc2V0QmFja0J1dHRvbkhhbmRsZXIoRGlhbG9nLmN1c3RvbUJhY2tLZXlIYW5kbGVyKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyDml6Llrprjgqrjg5fjgrfjg6fjg7NcclxuICAgICAgICAgICAgICAgIERpYWxvZy5zX2RlZmF1bHRPcHRpb25zID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlkUG9zaXRpdmU6ICAgICAgICAgICAgIFwiZGxnLWJ0bi1wb3NpdGl2ZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGlkTmVnYXRpdmU6ICAgICAgICAgICAgIFwiZGxnLWJ0bi1uZWdhdGl2ZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50OiAgICAgICAgICAgICAgICAgIEZyYW1ld29yay5nZXREZWZhdWx0Q2xpY2tFdmVudCgpLFxyXG4gICAgICAgICAgICAgICAgICAgIGRpc21pc3NpYmxlOiAgICAgICAgICAgIGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHRBdXRvQ2xvc2U6ICAgICAgIGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb246ICAgICAgICAgICAgIFwicGxhdGZvcm0tZGVmYXVsdFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsUG9zaXRpdmU6ICAgICAgICAgIFwiT0tcIixcclxuICAgICAgICAgICAgICAgICAgICBsYWJlbE5lZ2F0aXZlOiAgICAgICAgICBcIkNhbmNlbFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGJhY2tLZXk6ICAgICAgICAgICAgICAgIFwiY2xvc2VcIixcclxuICAgICAgICAgICAgICAgICAgICBzY3JvbGxFdmVudDogICAgICAgICAgICBcImRlbnlcIixcclxuICAgICAgICAgICAgICAgICAgICBkb21FeHRlbnNpb25PcHRpb25zOiAgICB7fSxcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEgvVyBCYWNrIEJ1dHRvbiBIYW5kbGVyXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgY3VzdG9tQmFja0tleUhhbmRsZXIoZXZlbnQ/OiBCYXNlSlF1ZXJ5RXZlbnRPYmplY3QpOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKG51bGwgIT0gRGlhbG9nLnNfYWN0aXZlRGlhbG9nKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoXCJjbG9zZVwiID09PSBEaWFsb2cuc19hY3RpdmVEaWFsb2cuX3NldHRpbmdzLmJhY2tLZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICBEaWFsb2cuc19hY3RpdmVEaWFsb2cuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXCJmdW5jdGlvblwiID09PSB0eXBlb2YgRGlhbG9nLnNfYWN0aXZlRGlhbG9nLl9zZXR0aW5ncy5iYWNrS2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgKDxEaWFsb2dCYWNrS2V5SGFuZGxlcj5EaWFsb2cuc19hY3RpdmVEaWFsb2cuX3NldHRpbmdzLmJhY2tLZXkpKGV2ZW50KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybjsgLy8gRGlhbG9nIOOBjCBhY3RpdmUg44Gq5aC05ZCI44CB5bi444Gr5pei5a6a44Gu44OP44Oz44OJ44Op44Gr44Gv5rih44GV44Gq44GEXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgRGlhbG9nLnNfb2xkQmFja0tleUhhbmRsZXIoZXZlbnQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiRGlhbG9nLnRzXCIgLz5cclxuXHJcbi8qIHRzbGludDpkaXNhYmxlOm1heC1saW5lLWxlbmd0aCAqL1xyXG5cclxubmFtZXNwYWNlIENEUC5VSSB7XHJcblxyXG4gICAgY29uc3QgVEFHID0gXCJbQ0RQLlVJLkRpYWxvZ0NvbW1vbnNdIFwiO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQWxlcnRcclxuICAgICAqIGFsZXJ0IOODoeODg+OCu+ODvOOCuOihqOekulxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlICAgW2luXSDooajnpLrmloflrZfliJdcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBbb3B0aW9uc10gW2luXSDjg4DjgqTjgqLjg63jgrDjgqrjg5fjgrfjg6fjg7NcclxuICAgICAqIEByZXR1cm4ge2pRdWVyeX0g44OA44Kk44Ki44Ot44Kw44GuIERPTSDjgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGFsZXJ0KG1lc3NhZ2U6IHN0cmluZywgb3B0aW9ucz86IERpYWxvZ09wdGlvbnMpOiBKUXVlcnkge1xyXG4gICAgICAgIGxldCB0ZW1wbGF0ZSA9IGBcclxuICAgICAgICAgICAgPHNjcmlwdCB0eXBlPVwidGV4dC90ZW1wbGF0ZVwiPlxyXG4gICAgICAgICAgICAgICAgPHNlY3Rpb24gY2xhc3M9XCJ1aS1tb2RhbFwiIGRhdGEtcm9sZT1cInBvcHVwXCIgZGF0YS1jb3JuZXJzPVwiZmFsc2VcIj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidWktY29udGVudFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8aDEgY2xhc3M9XCJ1aS10aXRsZSB7e190aXRsZVN0YXRlfX1cIj57e3RpdGxlfX08L2gxPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz1cInVpLW1lc3NhZ2VcIj57e21lc3NhZ2V9fTwvcD5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidWktbW9kYWwtZm9vdGVyIHVpLWdyaWQtc29sb1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPVwie3tpZFBvc2l0aXZlfX1cIiBjbGFzcz1cInVpLWJ0biB1aS1ibG9jay1hIHVpLXRleHQtZW1waGFzaXNcIiBkYXRhLWF1dG8tY2xvc2U9XCJ0cnVlXCI+e3tsYWJlbFBvc2l0aXZlfX08L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvc2VjdGlvbj5cclxuICAgICAgICAgICAgPC9zY3JpcHQ+XHJcbiAgICAgICAgYDtcclxuXHJcbiAgICAgICAgbGV0IGRsZ0FsZXJ0ID0gbmV3IERpYWxvZyh0ZW1wbGF0ZSwgJC5leHRlbmQoe30sIHtcclxuICAgICAgICAgICAgc3JjOiBudWxsLFxyXG4gICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLFxyXG4gICAgICAgIH0sIG9wdGlvbnMpKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGRsZ0FsZXJ0LnNob3coKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbmZpcm1cclxuICAgICAqIOeiuuiqjeODoeODg+OCu+ODvOOCuOihqOekulxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlICAgW2luXSDooajnpLrmloflrZfliJdcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBbb3B0aW9uc10gW2luXSDjg4DjgqTjgqLjg63jgrDjgqrjg5fjgrfjg6fjg7NcclxuICAgICAqIEByZXR1cm4ge2pRdWVyeX0g44OA44Kk44Ki44Ot44Kw44GuIERPTSDjgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGNvbmZpcm0obWVzc2FnZTogc3RyaW5nLCBvcHRpb25zPzogRGlhbG9nT3B0aW9ucyk6IEpRdWVyeSB7XHJcbiAgICAgICAgbGV0IHRlbXBsYXRlID0gYFxyXG4gICAgICAgICAgICA8c2NyaXB0IHR5cGU9XCJ0ZXh0L3RlbXBsYXRlXCI+XHJcbiAgICAgICAgICAgICAgICA8c2VjdGlvbiBjbGFzcz1cInVpLW1vZGFsXCIgZGF0YS1yb2xlPVwicG9wdXBcIiBkYXRhLWNvcm5lcnM9XCJmYWxzZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ1aS1jb250ZW50XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxoMSBjbGFzcz1cInVpLXRpdGxlIHt7X3RpdGxlU3RhdGV9fVwiPnt7dGl0bGV9fTwvaDE+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPVwidWktbWVzc2FnZVwiPnt7bWVzc2FnZX19PC9wPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ1aS1tb2RhbC1mb290ZXIgdWktZ3JpZC1hXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9XCJ7e2lkTmVnYXRpdmV9fVwiIGNsYXNzPVwidWktYnRuIHVpLWJsb2NrLWFcIiBkYXRhLWF1dG8tY2xvc2U9XCJ0cnVlXCI+e3tsYWJlbE5lZ2F0aXZlfX08L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD1cInt7aWRQb3NpdGl2ZX19XCIgY2xhc3M9XCJ1aS1idG4gdWktYmxvY2stYiB1aS10ZXh0LWVtcGhhc2lzXCIgZGF0YS1hdXRvLWNsb3NlPVwidHJ1ZVwiPnt7bGFiZWxQb3NpdGl2ZX19PC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L3NlY3Rpb24+XHJcbiAgICAgICAgICAgIDwvc2NyaXB0PlxyXG4gICAgICAgIGA7XHJcblxyXG4gICAgICAgIGxldCBkbGdDb25maXJtID0gbmV3IERpYWxvZyh0ZW1wbGF0ZSwgJC5leHRlbmQoe30sIHtcclxuICAgICAgICAgICAgc3JjOiBudWxsLFxyXG4gICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLFxyXG4gICAgICAgIH0sIG9wdGlvbnMpKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGRsZ0NvbmZpcm0uc2hvdygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGludGVyZmFjZSBEaWFsb2dDb21tb25zT3B0aW9uc1xyXG4gICAgICogQGJyaWVmIHByb21wdCDjga7jgqrjg5fjgrfjg6fjg7NcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBEaWFsb2dQcm9tcHRPcHRpb25zIGV4dGVuZHMgRGlhbG9nT3B0aW9ucyB7XHJcbiAgICAgICAgZXZlbnRPSz86IHN0cmluZzsgLy8hPCBPSyDjg5zjgr/jg7PmirzkuIvmmYLjga4gZXZlbnQ6IGRlZmF1bHQ6IHByb21wdG9rXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAY2xhc3MgRGlhbG9nUHJvbXB0XHJcbiAgICAgKiBAYnJpZWYgcHJvbXB0IOODgOOCpOOCouODreOCsCAo6Z2e5YWs6ZaLKVxyXG4gICAgICovXHJcbiAgICBjbGFzcyBEaWFsb2dQcm9tcHQgZXh0ZW5kcyBEaWFsb2cge1xyXG5cclxuICAgICAgICBwcml2YXRlIF9ldmVudE9LOiBzdHJpbmc7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIGNvbnN0cnVjdG9yXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKi9cclxuICAgICAgICBjb25zdHJ1Y3RvcihpZDogc3RyaW5nLCBvcHRpb25zPzogRGlhbG9nUHJvbXB0T3B0aW9ucykge1xyXG4gICAgICAgICAgICBzdXBlcihpZCwgb3B0aW9ucyk7XHJcbiAgICAgICAgICAgIHRoaXMuX2V2ZW50T0sgPSBvcHRpb25zLmV2ZW50T0sgfHwgXCJwcm9tcHRva1wiO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOODgOOCpOOCouODreOCsOihqOekuuOBruebtOWJjVxyXG4gICAgICAgIHByb3RlY3RlZCBvbkJlZm9yZVNob3coKTogSlF1ZXJ5UHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgICAgIHRoaXMuJGVsXHJcbiAgICAgICAgICAgICAgICAub24oXCJ2Y2xpY2tcIiwgXCIuY29tbWFuZC1wcm9tcHQtb2sgXCIsIChldmVudDogSlF1ZXJ5RXZlbnRPYmplY3QpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgdGV4dCA9IHRoaXMuJGVsLmZpbmQoXCIjX3VpLXByb21wdFwiKS52YWwoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLiRlbC50cmlnZ2VyKHRoaXMuX2V2ZW50T0ssIHRleHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBzdXBlci5vbkJlZm9yZVNob3coKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBQcm9tcHRcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSAgIFtpbl0g6KGo56S65paH5a2X5YiXXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gW29wdGlvbnNdIFtpbl0g44OA44Kk44Ki44Ot44Kw44Kq44OX44K344On44OzXHJcbiAgICAgKiBAcmV0dXJuIHtqUXVlcnl9IOODgOOCpOOCouODreOCsOOBriBET00g44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBwcm9tcHQobWVzc2FnZTogc3RyaW5nLCBvcHRpb25zPzogRGlhbG9nUHJvbXB0T3B0aW9ucyk6IEpRdWVyeSB7XHJcbiAgICAgICAgbGV0IHRlbXBsYXRlID0gYFxyXG4gICAgICAgICAgICA8c2NyaXB0IHR5cGU9XCJ0ZXh0L3RlbXBsYXRlXCI+XHJcbiAgICAgICAgICAgICAgICA8c2VjdGlvbiBjbGFzcz1cInVpLW1vZGFsXCIgZGF0YS1yb2xlPVwicG9wdXBcIiBkYXRhLWNvcm5lcnM9XCJmYWxzZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ1aS1jb250ZW50XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxoMSBjbGFzcz1cInVpLXRpdGxlIHt7X3RpdGxlU3RhdGV9fVwiPnt7dGl0bGV9fTwvaDE+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzPVwidWktbWVzc2FnZVwiPnt7bWVzc2FnZX19PC9wPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8bGFiZWwgZm9yPVwiX3VpLXByb21wdFwiIGNsYXNzPVwidWktaGlkZGVuLWFjY2Vzc2libGVcIj48L2xhYmVsPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInRleHRcIiBuYW1lPVwiX3VpLXByb21wdFwiIGlkPVwiX3VpLXByb21wdFwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ1aS1tb2RhbC1mb290ZXIgdWktZ3JpZC1hXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9XCJ7e2lkTmVnYXRpdmV9fVwiIGNsYXNzPVwidWktYnRuIHVpLWJsb2NrLWFcIiBkYXRhLWF1dG8tY2xvc2U9XCJ0cnVlXCI+e3tsYWJlbE5lZ2F0aXZlfX08L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD1cInt7aWRQb3NpdGl2ZX19XCIgY2xhc3M9XCJjb21tYW5kLXByb21wdC1vayB1aS1idG4gdWktYmxvY2stYiB1aS10ZXh0LWVtcGhhc2lzXCIgZGF0YS1hdXRvLWNsb3NlPVwiZmFsc2VcIj57e2xhYmVsUG9zaXRpdmV9fTwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9zZWN0aW9uPlxyXG4gICAgICAgICAgICA8L3NjcmlwdD5cclxuICAgICAgICBgO1xyXG5cclxuICAgICAgICBsZXQgZGxnUHJvbXB0ID0gbmV3IERpYWxvZ1Byb21wdCh0ZW1wbGF0ZSwgJC5leHRlbmQoe30sIHtcclxuICAgICAgICAgICAgc3JjOiBudWxsLFxyXG4gICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLFxyXG4gICAgICAgIH0sIG9wdGlvbnMpKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGRsZ1Byb21wdC5zaG93KCk7XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uLy4uLy4uLy4uL2V4dGVybmFsL2luY2x1ZGUvY2RwLmZyYW1ld29yay5qcW0uZC50c1wiIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi8uLi8uLi8uLi9leHRlcm5hbC9pbmNsdWRlL2NkcC50b29scy5kLnRzXCIgLz5cclxuXHJcbm5hbWVzcGFjZSBDRFAuVUkge1xyXG5cclxuICAgIGltcG9ydCBSb3V0ZXIgICA9IENEUC5GcmFtZXdvcmsuUm91dGVyO1xyXG4gICAgaW1wb3J0IElQYWdlICAgID0gQ0RQLkZyYW1ld29yay5JUGFnZTtcclxuICAgIGltcG9ydCBUZW1wbGF0ZSA9IENEUC5Ub29scy5UZW1wbGF0ZTtcclxuICAgIGltcG9ydCBKU1QgICAgICA9IENEUC5Ub29scy5KU1Q7XHJcblxyXG4gICAgY29uc3QgVEFHOiBzdHJpbmcgPSBcIltDRFAuVUkuQmFzZUhlYWRlclZpZXddIFwiO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGludGVyZmFjZSBCYXNlSGVhZGVyVmlld09wdGlvbnNcclxuICAgICAqIEBicmllZiBCYXNlSGVhZGVyVmlldyDjgavmjIflrprjgZnjgovjgqrjg5fjgrfjg6fjg7PjgqTjg7Pjgr/jg7zjg5XjgqfjgqTjgrlcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBCYXNlSGVhZGVyVmlld09wdGlvbnM8VE1vZGVsIGV4dGVuZHMgQmFja2JvbmUuTW9kZWw+IGV4dGVuZHMgQmFja2JvbmUuVmlld09wdGlvbnM8VE1vZGVsPiB7XHJcbiAgICAgICAgYmFzZVRlbXBsYXRlPzogSlNUOyAgICAgICAgICAgICAvLyE8IOWbuuWumuODmOODg+ODgOeUqCBKYXZhU2NyaXB0IOODhuODs+ODl+ODrOODvOODiC5cclxuICAgICAgICBiYWNrQ29tbWFuZFNlbGVjdG9yPzogc3RyaW5nOyAgIC8vITwgXCLmiLvjgotcIuOCs+ODnuODs+ODieOCu+ODrOOCr+OCvy4gZGVmYXVsdDogXCJjb21tYW5kLWJhY2tcIlxyXG4gICAgICAgIGJhY2tDb21tYW5kS2luZD86IHN0cmluZzsgICAgICAgLy8hPCBcIuaIu+OCi1wi44Kz44Oe44Oz44OJ56iu5YilIChvbkNvbW1hbmQg56ysMuW8leaVsCkuIGRlZmF1bHQ6IFwicGFnZWJhY2tcIlxyXG4gICAgfVxyXG5cclxuICAgIC8vX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXy8vXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAY2xhc3MgQmFzZUhlYWRlclZpZXdcclxuICAgICAqIEBicmllZiDlhbHpgJrjg5jjg4Pjg4DjgpLmk43kvZzjgZnjgovjgq/jg6njgrlcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGNsYXNzIEJhc2VIZWFkZXJWaWV3PFRNb2RlbCBleHRlbmRzIEJhY2tib25lLk1vZGVsPiBleHRlbmRzIEJhY2tib25lLlZpZXc8VE1vZGVsPiB7XHJcblxyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIHNfJGhlYWRlckJhc2U6IEpRdWVyeTsgICAvLyE8IOODmuODvOOCuOWkluOBq+mFjee9ruOBleOCjOOCi+WFsemAmuODmOODg+ODgOOBruODmeODvOOCuemDqOWTgeeUqCBqUXVlcnkg44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgc19yZWZDb3VudCA9IDA7ICAgICAgICAgIC8vITwg5Y+C54Wn44Kr44Km44Oz44OIXHJcbiAgICAgICAgcHJpdmF0ZSBfdGVtcGxhdGU6IEpTVDtcclxuICAgICAgICBwcml2YXRlIF9oYXNCYWNrSW5kaWNhdG9yOiBib29sZWFuO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBjb25zdHJ1Y3RvclxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtJUGFnZX0gX293bmVyIFtpbl0g44Kq44O844OK44O844Oa44O844K444Kk44Oz44K544K/44Oz44K5XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgY29uc3RydWN0b3IocHJpdmF0ZSBfb3duZXI6IElQYWdlLCBwcml2YXRlIF9vcHRpb25zPzogQmFzZUhlYWRlclZpZXdPcHRpb25zPFRNb2RlbD4pIHtcclxuICAgICAgICAgICAgc3VwZXIoX29wdGlvbnMgPSAkLmV4dGVuZCh7XHJcbiAgICAgICAgICAgICAgICBlbDogX293bmVyLiRwYWdlLmZpbmQoXCJbZGF0YS1yb2xlPSdoZWFkZXInXVwiKSxcclxuICAgICAgICAgICAgICAgIGJhY2tDb21tYW5kU2VsZWN0b3I6IFwiLmNvbW1hbmQtYmFja1wiLFxyXG4gICAgICAgICAgICAgICAgYmFja0NvbW1hbmRLaW5kOiBcInBhZ2ViYWNrXCIsXHJcbiAgICAgICAgICAgIH0sIF9vcHRpb25zKSk7XHJcblxyXG4gICAgICAgICAgICAvLyB0ZW1wbGF0ZSDoqK3lrppcclxuICAgICAgICAgICAgaWYgKF9vcHRpb25zLmJhc2VUZW1wbGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fdGVtcGxhdGUgPSBfb3B0aW9ucy5iYXNlVGVtcGxhdGU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl90ZW1wbGF0ZSA9IFRlbXBsYXRlLmdldEpTVChgXHJcbiAgICAgICAgICAgICAgICAgICAgPHNjcmlwdCB0eXBlPSd0ZXh0L3RlbXBsYXRlJz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGhlYWRlciBjbGFzcz0ndWktaGVhZGVyLWJhc2UgdWktYm9keS17e3RoZW1lfX0nPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ndWktZml4ZWQtYmFjay1pbmRpY2F0b3InPjwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2hlYWRlcj5cclxuICAgICAgICAgICAgICAgICAgICA8L3NjcmlwdD5cclxuICAgICAgICAgICAgICAgIGApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBCYWNrYm9uZS5WaWV3IOeUqOOBruWIneacn+WMllxyXG4gICAgICAgICAgICB0aGlzLnNldEVsZW1lbnQodGhpcy4kZWwsIHRydWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBwdWJsaWMgbWV0aG9kc1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDliJ3mnJ/ljJZcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgY3JlYXRlKCk6IEpRdWVyeSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZUhlYWRlckJhc2UoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOacieWKueWMllxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBhY3RpdmF0ZSgpOiBKUXVlcnkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zaG93SW5kaWNhdG9yKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDnhKHlirnljJZcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgaW5hY3RpdmF0ZSgpOiBKUXVlcnkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5oaWRlSW5kaWNhdG9yKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDnoLTmo4RcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgcmVsZWFzZSgpOiBKUXVlcnkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZWxlYXNlSGVhZGVyQmFzZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBwcml2YXRlIG1ldGhvZHNcclxuXHJcbiAgICAgICAgLy8hIOWFsemAmuODmOODg+ODgOOBruODmeODvOOCueOCkua6luWCmVxyXG4gICAgICAgIHByaXZhdGUgY3JlYXRlSGVhZGVyQmFzZSgpOiBKUXVlcnkge1xyXG4gICAgICAgICAgICAvLyDlm7rlrprjg5jjg4Pjg4Djga7jgajjgY3jgavmnInlirnljJZcclxuICAgICAgICAgICAgaWYgKFwiZml4ZWRcIiA9PT0gdGhpcy5fb3duZXIuJGhlYWRlci5qcW1EYXRhKFwicG9zaXRpb25cIikpIHtcclxuICAgICAgICAgICAgICAgIGlmIChudWxsID09IEJhc2VIZWFkZXJWaWV3LnNfJGhlYWRlckJhc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBCYXNlSGVhZGVyVmlldy5zXyRoZWFkZXJCYXNlID0gJCh0aGlzLl90ZW1wbGF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoZW1lOiB0aGlzLl9vd25lci4kcGFnZS5qcW1EYXRhKFwidGhlbWVcIiksXHJcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgQmFzZUhlYWRlclZpZXcuc19yZWZDb3VudCsrO1xyXG4gICAgICAgICAgICAgICAgQmFzZUhlYWRlclZpZXcuc18kaGVhZGVyQmFzZS5hcHBlbmRUbygkKGRvY3VtZW50LmJvZHkpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBCYWNrIEluZGljYXRvciDjgpLmjIHjgaPjgabjgYTjgovjgYvliKTlrppcclxuICAgICAgICAgICAgaWYgKDAgPCB0aGlzLiRlbC5maW5kKFwiLnVpLWJhY2staW5kaWNhdG9yXCIpLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5faGFzQmFja0luZGljYXRvciA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIEJhc2VIZWFkZXJWaWV3LnNfJGhlYWRlckJhc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgaW5kaWNhdG9yIOOBruihqOekulxyXG4gICAgICAgIHByaXZhdGUgc2hvd0luZGljYXRvcigpOiBKUXVlcnkge1xyXG4gICAgICAgICAgICAvLyBCYWNrIEluZGljYXRvciDjgpLmjIHjgaPjgabjgYTjgarjgYTloLTlkIjooajnpLrjgZfjgarjgYRcclxuICAgICAgICAgICAgaWYgKG51bGwgIT0gQmFzZUhlYWRlclZpZXcuc18kaGVhZGVyQmFzZSAmJiB0aGlzLl9oYXNCYWNrSW5kaWNhdG9yKSB7XHJcbiAgICAgICAgICAgICAgICBCYXNlSGVhZGVyVmlldy5zXyRoZWFkZXJCYXNlLmZpbmQoXCIudWktZml4ZWQtYmFjay1pbmRpY2F0b3JcIikuYWRkQ2xhc3MoXCJzaG93XCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBCYXNlSGVhZGVyVmlldy5zXyRoZWFkZXJCYXNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIGluZGljYXRvciDjga7pnZ7ooajnpLpcclxuICAgICAgICBwcml2YXRlIGhpZGVJbmRpY2F0b3IoKTogSlF1ZXJ5IHtcclxuICAgICAgICAgICAgaWYgKG51bGwgIT0gQmFzZUhlYWRlclZpZXcuc18kaGVhZGVyQmFzZSkge1xyXG4gICAgICAgICAgICAgICAgQmFzZUhlYWRlclZpZXcuc18kaGVhZGVyQmFzZS5maW5kKFwiLnVpLWZpeGVkLWJhY2staW5kaWNhdG9yXCIpLnJlbW92ZUNsYXNzKFwic2hvd1wiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gQmFzZUhlYWRlclZpZXcuc18kaGVhZGVyQmFzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDlhbHpgJrjg5jjg4Pjg4Djga7jg5njg7zjgrnjgpLnoLTmo4RcclxuICAgICAgICBwcml2YXRlIHJlbGVhc2VIZWFkZXJCYXNlKCk6IEpRdWVyeSB7XHJcbiAgICAgICAgICAgIGlmIChudWxsICE9IEJhc2VIZWFkZXJWaWV3LnNfJGhlYWRlckJhc2UpIHtcclxuICAgICAgICAgICAgICAgIEJhc2VIZWFkZXJWaWV3LnNfcmVmQ291bnQtLTtcclxuICAgICAgICAgICAgICAgIGlmICgwID09PSBCYXNlSGVhZGVyVmlldy5zX3JlZkNvdW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgQmFzZUhlYWRlclZpZXcuc18kaGVhZGVyQmFzZS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICBCYXNlSGVhZGVyVmlldy5zXyRoZWFkZXJCYXNlID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gQmFzZUhlYWRlclZpZXcuc18kaGVhZGVyQmFzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gT3ZlcnJpZGU6IEJhY2tib25lLlZpZXdcclxuXHJcbiAgICAgICAgLy8hIGV2ZW50cyBiaW5kaW5nXHJcbiAgICAgICAgZXZlbnRzKCk6IGFueSB7XHJcbiAgICAgICAgICAgIGxldCBldmVudE1hcCA9IHt9O1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fb3B0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgZXZlbnRNYXBbXCJ2Y2xpY2sgXCIgKyB0aGlzLl9vcHRpb25zLmJhY2tDb21tYW5kU2VsZWN0b3JdID0gdGhpcy5vbkNvbW1hbmRCYWNrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBldmVudE1hcDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISBiYWNrIOOBruODj+ODs+ODieODqVxyXG4gICAgICAgIHByaXZhdGUgb25Db21tYW5kQmFjayhldmVudDogSlF1ZXJ5RXZlbnRPYmplY3QpOiB2b2lkIHtcclxuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgbGV0IGhhbmRsZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX293bmVyKSB7XHJcbiAgICAgICAgICAgICAgICBoYW5kbGVkID0gdGhpcy5fb3duZXIub25Db21tYW5kKGV2ZW50LCB0aGlzLl9vcHRpb25zLmJhY2tDb21tYW5kS2luZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCFoYW5kbGVkKSB7XHJcbiAgICAgICAgICAgICAgICBSb3V0ZXIuYmFjaygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJCYXNlSGVhZGVyVmlldy50c1wiIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJFeHRlbnNpb25NYW5hZ2VyLnRzXCIgLz5cclxuXHJcbi8qIHRzbGludDpkaXNhYmxlOm1heC1saW5lLWxlbmd0aCAqL1xyXG5cclxubmFtZXNwYWNlIENEUC5VSSB7XHJcblxyXG4gICAgaW1wb3J0IEZyYW1ld29yayA9IENEUC5GcmFtZXdvcms7XHJcblxyXG4gICAgY29uc3QgVEFHOiBzdHJpbmcgPSBcIltDRFAuVUkuQmFzZVBhZ2VdIFwiO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGludGVyZmFjZSBCYXNlUGFnZU9wdGlvbnNcclxuICAgICAqIEBicmllZiBCYXNlUGFnZSDjgavmjIflrprjgZnjgovjgqrjg5fjgrfjg6fjg7PjgqTjg7Pjgr/jg7zjg5XjgqfjgqTjgrlcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBCYXNlUGFnZU9wdGlvbnM8VE1vZGVsIGV4dGVuZHMgQmFja2JvbmUuTW9kZWw+IGV4dGVuZHMgRnJhbWV3b3JrLlBhZ2VDb25zdHJ1Y3RPcHRpb25zLCBCYXNlSGVhZGVyVmlld09wdGlvbnM8VE1vZGVsPiB7XHJcbiAgICAgICAgYmFzZUhlYWRlcj86IG5ldyAob3duZXI6IEZyYW1ld29yay5JUGFnZSwgb3B0aW9ucz86IEJhc2VIZWFkZXJWaWV3T3B0aW9uczxUTW9kZWw+KSA9PiBCYXNlSGVhZGVyVmlldzxUTW9kZWw+OyAgIC8vITwgSGVhZGVyIOapn+iDveOCkuaPkOS+m+OBmeOCi+WfuuW6leOCpOODs+OCueOCv+ODs+OCuVxyXG4gICAgICAgIGJhY2tDb21tYW5kSGFuZGxlcj86IHN0cmluZzsgICAgICAgICAgICAgICAgLy8hPCBcIuaIu+OCi1wiIOOCs+ODnuODs+ODieODj+ODs+ODieODqeODoeOCveODg+ODieWQjS4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IG9uUGFnZUJhY2tcclxuICAgICAgICBkb21FeHRlbnNpb25PcHRpb25zPzogRG9tRXh0ZW5zaW9uT3B0aW9uczsgIC8vITwgRE9N5ouh5by144Gr5rih44GZ44Kq44OX44K344On44OzLiBudWxsfHVuZGVmaW5lZCDjgpLmjIflrprjgZnjgovjgajmi6HlvLXjgZfjgarjgYQgZGVmYXVsdDoge31cclxuICAgIH1cclxuXHJcbiAgICAvL19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18vL1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGNsYXNzIEJhc2VQYWdlXHJcbiAgICAgKiBAYnJpZWYgSGVhZGVyIOOCkuWCmeOBiOOCiyBQYWdlIOOCr+ODqeOCuVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgY2xhc3MgQmFzZVBhZ2U8VE1vZGVsIGV4dGVuZHMgQmFja2JvbmUuTW9kZWw+IGV4dGVuZHMgRnJhbWV3b3JrLlBhZ2Uge1xyXG5cclxuICAgICAgICBwcml2YXRlIF9iYXNlSGVhZGVyOiBCYXNlSGVhZGVyVmlldzxUTW9kZWw+OyAgICAvLyE8IOODmOODg+ODgOOCr+ODqeOCuVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBjb25zdHJ1Y3RvclxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9ICAgICAgICAgIHVybCAgICAgICBbaW5dIOODmuODvOOCuCBVUkxcclxuICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gICAgICAgICAgaWQgICAgICAgIFtpbl0g44Oa44O844K4IElEXHJcbiAgICAgICAgICogQHBhcmFtIHtCYXNlUGFnZU9wdGlvbnN9IFtvcHRpb25zXSBbaW5dIOOCquODl+OCt+ODp+ODs1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGNvbnN0cnVjdG9yKHVybDogc3RyaW5nLCBpZDogc3RyaW5nLCBwcml2YXRlIF9vcHRpb25zPzogQmFzZVBhZ2VPcHRpb25zPFRNb2RlbD4pIHtcclxuICAgICAgICAgICAgc3VwZXIodXJsLCBpZCwgX29wdGlvbnMgPSAkLmV4dGVuZCh7XHJcbiAgICAgICAgICAgICAgICBiYXNlSGVhZGVyOiBCYXNlSGVhZGVyVmlldyxcclxuICAgICAgICAgICAgICAgIGJhY2tDb21tYW5kSGFuZGxlcjogXCJvblBhZ2VCYWNrXCIsXHJcbiAgICAgICAgICAgICAgICBiYWNrQ29tbWFuZEtpbmQ6IFwicGFnZWJhY2tcIixcclxuICAgICAgICAgICAgICAgIGRvbUV4dGVuc2lvbk9wdGlvbnM6IHt9LFxyXG4gICAgICAgICAgICB9LCBfb3B0aW9ucykpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBPdmVycmlkZTogRnJhbWV3b3JrIFBhZ2VcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogalFNIGV2ZW50OiBcInBhZ2ViZWZvcmVjcmVhdGVcIiDjgavlr77lv5xcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBldmVudCB7SlF1ZXJ5RXZlbnRPYmplY3R9IFtpbl0g44Kk44OZ44Oz44OI44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb25QYWdlQmVmb3JlQ3JlYXRlKGV2ZW50OiBKUXVlcnlFdmVudE9iamVjdCk6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fb3B0aW9ucy5iYXNlSGVhZGVyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9iYXNlSGVhZGVyID0gbmV3IHRoaXMuX29wdGlvbnMuYmFzZUhlYWRlcih0aGlzLCB0aGlzLl9vcHRpb25zKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2Jhc2VIZWFkZXIuY3JlYXRlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc3VwZXIub25QYWdlQmVmb3JlQ3JlYXRlKGV2ZW50KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIGpRTSBldmVudDogXCJwYWdlY3JlYXRlXCIg44Gr5a++5b+cXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gZXZlbnQge0pRdWVyeUV2ZW50T2JqZWN0fSBbaW5dIOOCpOODmeODs+ODiOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9uUGFnZUluaXQoZXZlbnQ6IEpRdWVyeUV2ZW50T2JqZWN0KTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmIChudWxsICE9IHRoaXMuX29wdGlvbnMuZG9tRXh0ZW5zaW9uT3B0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgRXh0ZW5zaW9uTWFuYWdlci5hcHBseURvbUV4dGVuc2lvbih0aGlzLiRwYWdlLCB0aGlzLl9vcHRpb25zLmRvbUV4dGVuc2lvbk9wdGlvbnMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHN1cGVyLm9uUGFnZUluaXQoZXZlbnQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogalFNIGV2ZW50OiBcInBhZ2ViZWZvcmVzaG93XCIg44Gr5a++5b+cXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gZXZlbnQge0pRdWVyeUV2ZW50T2JqZWN0fSBbaW5dIOOCpOODmeODs+ODiOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICAgICAqIEBwYXJhbSBkYXRhICB7U2hvd0V2ZW50RGF0YX0gICAgIFtpbl0g5LuY5Yqg5oOF5aCxXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb25QYWdlQmVmb3JlU2hvdyhldmVudDogSlF1ZXJ5RXZlbnRPYmplY3QsIGRhdGE/OiBGcmFtZXdvcmsuU2hvd0V2ZW50RGF0YSk6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fYmFzZUhlYWRlcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fYmFzZUhlYWRlci5hY3RpdmF0ZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHN1cGVyLm9uUGFnZUJlZm9yZVNob3coZXZlbnQsIGRhdGEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogalFNIGV2ZW50OiBcInBhZ2ViZWZvcmVoaWRlXCIg44Gr5a++5b+cXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gZXZlbnQge0pRdWVyeUV2ZW50T2JqZWN0fSBbaW5dIOOCpOODmeODs+ODiOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICAgICAqIEBwYXJhbSBkYXRhICB7SGlkZUV2ZW50RGF0YX0gICAgIFtpbl0g5LuY5Yqg5oOF5aCxXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb25QYWdlQmVmb3JlSGlkZShldmVudDogSlF1ZXJ5RXZlbnRPYmplY3QsIGRhdGE/OiBGcmFtZXdvcmsuSGlkZUV2ZW50RGF0YSk6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fYmFzZUhlYWRlcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fYmFzZUhlYWRlci5pbmFjdGl2YXRlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc3VwZXIub25QYWdlQmVmb3JlSGlkZShldmVudCwgZGF0YSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBqUU0gZXZlbnQ6IFwicGFnZXJlbW92ZVwiIOOBq+WvvuW/nFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGV2ZW50IHtKUXVlcnlFdmVudE9iamVjdH0gW2luXSDjgqTjg5njg7Pjg4jjgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAgICAgKi9cclxuICAgICAgICBvblBhZ2VSZW1vdmUoZXZlbnQ6IEpRdWVyeUV2ZW50T2JqZWN0KTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9iYXNlSGVhZGVyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9iYXNlSGVhZGVyLnJlbGVhc2UoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2Jhc2VIZWFkZXIgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHN1cGVyLm9uUGFnZVJlbW92ZShldmVudCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBIL1cgQmFjayBCdXR0b24g44OP44Oz44OJ44OpXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gIGV2ZW50IHtKUXVlcnlFdmVudE9iamVjdH0gW2luXSBldmVudCBvYmplY3RcclxuICAgICAgICAgKiBAcmV0dXJuIHtCb29sZWFufSB0cnVlOiDml6Llrprjga7lh6bnkIbjgpLooYzjgo/jgarjgYQgLyBmYWxzZTog5pei5a6a44Gu5Yem55CG44KS6KGM44GGXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb25IYXJkd2FyZUJhY2tCdXR0b24oZXZlbnQ/OiBKUXVlcnlFdmVudE9iamVjdCk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICBsZXQgcmV0dmFsID0gc3VwZXIub25IYXJkd2FyZUJhY2tCdXR0b24oZXZlbnQpO1xyXG4gICAgICAgICAgICBpZiAoIXJldHZhbCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dmFsID0gdGhpcy5vbkNvbW1hbmQoZXZlbnQsIHRoaXMuX29wdGlvbnMuYmFja0NvbW1hbmRLaW5kKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcmV0dmFsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBPdmVycmlkZTogQ3VzdG9tIEV2ZW50XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFwi5oi744KLXCIgZXZlbnQg55m66KGM5pmC44Gr44Kz44O844Or44GV44KM44KLXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gZXZlbnQge0pRdWVyeUV2ZW50T2JqZWN0fSBbaW5dIOOCpOODmeODs+ODiOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IHRydWU6IOaXouWumuOBruWHpueQhuOCkuihjOOCj+OBquOBhCAvIGZhbHNlOiDml6Llrprjga7lh6bnkIbjgpLooYzjgYZcclxuICAgICAgICAgKi9cclxuICAgICAgICBvbkNvbW1hbmQoZXZlbnQ6IEpRdWVyeUV2ZW50T2JqZWN0LCBraW5kOiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX29wdGlvbnMuYmFja0NvbW1hbmRLaW5kID09PSBraW5kKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fb3duZXIgJiYgdGhpcy5fb3duZXJbdGhpcy5fb3B0aW9ucy5iYWNrQ29tbWFuZEhhbmRsZXJdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX293bmVyW3RoaXMuX29wdGlvbnMuYmFja0NvbW1hbmRIYW5kbGVyXShldmVudCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiQmFzZVBhZ2UudHNcIiAvPlxyXG5cclxuLyogdHNsaW50OmRpc2FibGU6bWF4LWxpbmUtbGVuZ3RoICovXHJcblxyXG5uYW1lc3BhY2UgQ0RQLlVJIHtcclxuICAgIGltcG9ydCBGcmFtZXdvcmsgPSBDRFAuRnJhbWV3b3JrO1xyXG5cclxuICAgIGNvbnN0IFRBRyA9IFwiW0NEUC5VSS5QYWdlVmlld10gXCI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAaW50ZXJmYWNlIEJhc2VQYWdlVmlld1xyXG4gICAgICogQGJyaWVmICAgICBQYWdlVmlldzxCYWNrYm9uZS5Nb2RlbD4g44GuIGFsaWFzXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgQmFzZVBhZ2VWaWV3IGV4dGVuZHMgUGFnZVZpZXc8QmFja2JvbmUuTW9kZWw+IHsgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGludGVyZmFjZSBQYWdlVmlld0NvbnN0cnVjdE9wdGlvbnNcclxuICAgICAqIEBicmllZiBSb3V0ZXIg44G444Gu55m76Yyy5oOF5aCx44GoIEJhY2tib25lLlZpZXcg44G444Gu5Yid5pyf5YyW5oOF5aCx44KS5qC857SN44GZ44KL44Kk44Oz44K/44O844OV44Kn44Kk44K544Kv44Op44K5XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgUGFnZVZpZXdDb25zdHJ1Y3RPcHRpb25zPFRNb2RlbCBleHRlbmRzIEJhY2tib25lLk1vZGVsPiBleHRlbmRzIEJhc2VQYWdlT3B0aW9uczxUTW9kZWw+IHtcclxuICAgICAgICBiYXNlUGFnZT86IG5ldyAodXJsOiBzdHJpbmcsIGlkOiBzdHJpbmcsIG9wdGlvbnM/OiBGcmFtZXdvcmsuUGFnZUNvbnN0cnVjdE9wdGlvbnMpID0+IEZyYW1ld29yay5QYWdlOyAgICAvLyE8IFBhZ2Ug5qmf6IO944KS5o+Q5L6b44GZ44KL5Z+65bqV44Kk44Oz44K544K/44Oz44K5XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAaW50ZXJmYWNlIFBhZ2VDb250YWluZXJPcHRpb25zXHJcbiAgICAgKiBAYnJpZWYgUGFnZUNvbnRhaW5lciDjga7jgqrjg5fjgrfjg6fjg7NcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBQYWdlQ29udGFpbmVyT3B0aW9uczxUTW9kZWwgZXh0ZW5kcyBCYWNrYm9uZS5Nb2RlbD4gZXh0ZW5kcyBCYWNrYm9uZS5WaWV3T3B0aW9uczxUTW9kZWw+IHtcclxuICAgICAgICBvd25lcjogQmFzZVBhZ2VWaWV3O1xyXG4gICAgICAgICRlbD86IEpRdWVyeTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBjbGFzcyBQYWdlQ29udGFpbmVyVmlld1xyXG4gICAgICogQGJyaWVmIFBhZ2VWaWV3IOOBqOmAo+aQuuWPr+iDveOBqiDjgrPjg7Pjg4bjg4rjg5Pjg6Xjg7zjgq/jg6njgrlcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGNsYXNzIFBhZ2VDb250YWluZXJWaWV3PFRNb2RlbCBleHRlbmRzIEJhY2tib25lLk1vZGVsPiBleHRlbmRzIEJhY2tib25lLlZpZXc8VE1vZGVsPiB7XHJcblxyXG4gICAgICAgIHByaXZhdGUgX293bmVyOiBCYXNlUGFnZVZpZXcgPSBudWxsO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBjb25zdHJ1Y3RvclxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGNvbnN0cnVjdG9yKG9wdGlvbnM6IFBhZ2VDb250YWluZXJPcHRpb25zPFRNb2RlbD4pIHtcclxuICAgICAgICAgICAgc3VwZXIob3B0aW9ucyk7XHJcbiAgICAgICAgICAgIHRoaXMuX293bmVyID0gb3B0aW9ucy5vd25lcjtcclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuJGVsKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgZGVsZWdhdGVzID0gKDxhbnk+dGhpcykuZXZlbnRzID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRFbGVtZW50KG9wdGlvbnMuJGVsLCBkZWxlZ2F0ZXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIHNob3J0IGN1dCBtZXRob2RzXHJcblxyXG4gICAgICAgIC8vISBPd25lciDlj5blvpdcclxuICAgICAgICBnZXQgb3duZXIoKTogQmFzZVBhZ2VWaWV3IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX293bmVyO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvL19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18vL1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGNsYXNzIFBhZ2VWaWV3XHJcbiAgICAgKiBAYnJpZWYgQ0RQLkZyYW1ld29yay5QYWdlIOOBqCBCYWNrYm9uZS5WaWV3IOOBruS4oeaWueOBruapn+iDveOCkuaPkOS+m+OBmeOCi+ODmuODvOOCuOOBruWfuuW6leOCr+ODqeOCuVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgY2xhc3MgUGFnZVZpZXc8VE1vZGVsIGV4dGVuZHMgQmFja2JvbmUuTW9kZWw+IGV4dGVuZHMgQmFja2JvbmUuVmlldzxUTW9kZWw+IGltcGxlbWVudHMgRnJhbWV3b3JrLklQYWdlLCBJU3RhdHVzTWFuYWdlciB7XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBfcGFnZU9wdGlvbnM6IFBhZ2VWaWV3Q29uc3RydWN0T3B0aW9uczxUTW9kZWw+ID0gbnVsbDtcclxuICAgICAgICBwcm90ZWN0ZWQgX2Jhc2VQYWdlOiBGcmFtZXdvcmsuUGFnZSA9IG51bGw7XHJcbiAgICAgICAgcHJpdmF0ZSBfc3RhdHVzTWdyOiBTdGF0dXNNYW5hZ2VyID0gbnVsbDtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogY29uc3RydWN0b3JcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB1cmwgICAgIHtTdHJpbmd9ICAgICAgICAgICAgICAgICAgIFtpbl0g44Oa44O844K4IFVSTFxyXG4gICAgICAgICAqIEBwYXJhbSBpZCAgICAgIHtTdHJpbmd9ICAgICAgICAgICAgICAgICAgIFtpbl0g44Oa44O844K4IElEXHJcbiAgICAgICAgICogQHBhcmFtIG9wdGlvbnMge1BhZ2VWaWV3Q29uc3RydWN0T3B0aW9uc30gW2luXSDjgqrjg5fjgrfjg6fjg7NcclxuICAgICAgICAgKi9cclxuICAgICAgICBjb25zdHJ1Y3Rvcih1cmw6IHN0cmluZywgaWQ6IHN0cmluZywgb3B0aW9ucz86IFBhZ2VWaWV3Q29uc3RydWN0T3B0aW9uczxUTW9kZWw+KSB7XHJcbiAgICAgICAgICAgIHN1cGVyKG9wdGlvbnMpO1xyXG5cclxuICAgICAgICAgICAgLy8gUGFnZVZpZXcg6Kit5a6aXHJcbiAgICAgICAgICAgIHRoaXMuX3BhZ2VPcHRpb25zID0gJC5leHRlbmQoe30sIHsgb3duZXI6IHRoaXMgfSwgb3B0aW9ucyk7XHJcbiAgICAgICAgICAgIHRoaXMuX2Jhc2VQYWdlID0gdGhpcy5fcGFnZU9wdGlvbnMuYmFzZVBhZ2UgPyBuZXcgdGhpcy5fcGFnZU9wdGlvbnMuYmFzZVBhZ2UodXJsLCBpZCwgdGhpcy5fcGFnZU9wdGlvbnMpIDogbmV3IEJhc2VQYWdlKHVybCwgaWQsIHRoaXMuX3BhZ2VPcHRpb25zKTtcclxuXHJcbiAgICAgICAgICAgIC8vIFN0YXR1c01hbmFnZXJcclxuICAgICAgICAgICAgdGhpcy5fc3RhdHVzTWdyID0gbmV3IFN0YXR1c01hbmFnZXIoKTtcclxuICAgICAgICAgICAgLy8gQmFja2JvbmUuVmlldyDnlKjjga7liJ3mnJ/ljJZcclxuICAgICAgICAgICAgbGV0IGRlbGVnYXRlcyA9ICg8YW55PnRoaXMpLmV2ZW50cyA/IHRydWUgOiBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5zZXRFbGVtZW50KHRoaXMuJHBhZ2UsIGRlbGVnYXRlcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIEltcGxlbWVudHM6IElTdGF0dXNNYW5hZ2VyIOeKtuaFi+euoeeQhlxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDnirbmhYvlpInmlbDjga7lj4Lnhafjgqvjgqbjg7Pjg4jjga7jgqTjg7Pjgq/jg6rjg6Hjg7Pjg4hcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBzdGF0dXMge1N0cmluZ30gW2luXSDnirbmhYvorZjliKXlrZBcclxuICAgICAgICAgKi9cclxuICAgICAgICBzdGF0dXNBZGRSZWYoc3RhdHVzOiBzdHJpbmcpOiBudW1iZXIge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc3RhdHVzTWdyLnN0YXR1c0FkZFJlZihzdGF0dXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog54q25oWL5aSJ5pWw44Gu5Y+C54Wn44Kr44Km44Oz44OI44Gu44OH44Kv44Oq44Oh44Oz44OIXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gc3RhdHVzIHtTdHJpbmd9IFtpbl0g54q25oWL6K2Y5Yil5a2QXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgc3RhdHVzUmVsZWFzZShzdGF0dXM6IHN0cmluZyk6IG51bWJlciB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zdGF0dXNNZ3Iuc3RhdHVzUmVsZWFzZShzdGF0dXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog5Yem55CG44K544Kz44O844OX5q+O44Gr54q25oWL5aSJ5pWw44KS6Kit5a6aXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gc3RhdHVzICAge1N0cmluZ30gICBbaW5dIOeKtuaFi+itmOWIpeWtkFxyXG4gICAgICAgICAqIEBwYXJhbSBjYWxsYmFjayB7RnVuY3Rpb259IFtpbl0g5Yem55CG44Kz44O844Or44OQ44OD44KvXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgc3RhdHVzU2NvcGUoc3RhdHVzOiBzdHJpbmcsIGNhbGxiYWNrOiAoKSA9PiB2b2lkKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuX3N0YXR1c01nci5zdGF0dXNTY29wZShzdGF0dXMsIGNhbGxiYWNrKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOaMh+WumuOBl+OBn+eKtuaFi+S4reOBp+OBguOCi+OBi+eiuuiqjVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHN0YXR1cyB7U3RyaW5nfSAgIFtpbl0g54q25oWL6K2Y5Yil5a2QXHJcbiAgICAgICAgICogQHJldHVybiB7Qm9vbGVhbn0gdHJ1ZTog54q25oWL5YaFIC8gZmFsc2U6IOeKtuaFi+WkllxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGlzU3RhdHVzSW4oc3RhdHVzOiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3N0YXR1c01nci5pc1N0YXR1c0luKHN0YXR1cyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIElQYWdlIHN0dWIgc3R1ZmYuXHJcblxyXG4gICAgICAgIGdldCBhY3RpdmUoKTogYm9vbGVhbiAgICAgICAgICAgICAgICAgICB7IHJldHVybiB0aGlzLl9iYXNlUGFnZS5hY3RpdmU7ICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgIGdldCB1cmwoKTogc3RyaW5nICAgICAgICAgICAgICAgICAgICAgICB7IHJldHVybiB0aGlzLl9iYXNlUGFnZS51cmw7ICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgIGdldCBpZCgpOiBzdHJpbmcgICAgICAgICAgICAgICAgICAgICAgICB7IHJldHVybiB0aGlzLl9iYXNlUGFnZSA/IHRoaXMuX2Jhc2VQYWdlLmlkIDogbnVsbDsgfVxyXG4gICAgICAgIGdldCAkcGFnZSgpOiBKUXVlcnkgICAgICAgICAgICAgICAgICAgICB7IHJldHVybiB0aGlzLl9iYXNlUGFnZS4kcGFnZTsgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgIGdldCAkaGVhZGVyKCk6IEpRdWVyeSAgICAgICAgICAgICAgICAgICB7IHJldHVybiB0aGlzLl9iYXNlUGFnZS4kaGVhZGVyOyAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgIGdldCAkZm9vdGVyKCk6IEpRdWVyeSAgICAgICAgICAgICAgICAgICB7IHJldHVybiB0aGlzLl9iYXNlUGFnZS4kZm9vdGVyOyAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgIGdldCBpbnRlbnQoKTogRnJhbWV3b3JrLkludGVudCAgICAgICAgICB7IHJldHVybiB0aGlzLl9iYXNlUGFnZS5pbnRlbnQ7ICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgIHNldCBpbnRlbnQobmV3SW50ZW50OiBGcmFtZXdvcmsuSW50ZW50KSB7IHRoaXMuX2Jhc2VQYWdlLmludGVudCA9IG5ld0ludGVudDsgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBPcmllbnRhdGlvbiDjga7lpInmm7TjgpLlj5fkv6FcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBuZXdPcmllbnRhdGlvbiB7T3JpZW50YXRpb259IFtpbl0gbmV3IG9yaWVudGF0aW9uIGNvZGUuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb25PcmllbnRhdGlvbkNoYW5nZWQobmV3T3JpZW50YXRpb246IEZyYW1ld29yay5PcmllbnRhdGlvbik6IHZvaWQge1xyXG4gICAgICAgICAgICAvLyBPdmVycmlkZVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSC9XIEJhY2sgQnV0dG9uIOODj+ODs+ODieODqVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtICBldmVudCB7SlF1ZXJ5RXZlbnRPYmplY3R9IFtpbl0gZXZlbnQgb2JqZWN0XHJcbiAgICAgICAgICogQHJldHVybiB7Qm9vbGVhbn0gdHJ1ZTog5pei5a6a44Gu5Yem55CG44KS6KGM44KP44Gq44GEIC8gZmFsc2U6IOaXouWumuOBruWHpueQhuOCkuihjOOBhlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9uSGFyZHdhcmVCYWNrQnV0dG9uKGV2ZW50PzogSlF1ZXJ5RXZlbnRPYmplY3QpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUm91dGVyIFwiYmVmb3JlIHJvdXRlIGNoYW5nZVwiIOODj+ODs+ODieODqVxyXG4gICAgICAgICAqIOODmuODvOOCuOmBt+enu+ebtOWJjeOBq+mdnuWQjOacn+WHpueQhuOCkuihjOOBhuOBk+OBqOOBjOWPr+iDvVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7SlF1ZXJ5UHJvbWlzZX0galF1ZXJ5UHJvbWlzZSDjgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAgICAgKi9cclxuICAgICAgICBvbkJlZm9yZVJvdXRlQ2hhbmdlKCk6IEpRdWVyeVByb21pc2U8YW55PiB7XHJcbiAgICAgICAgICAgIHJldHVybiAkLkRlZmVycmVkKCkucmVzb2x2ZSgpLnByb21pc2UoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOaxjueUqOOCs+ODnuODs+ODieOCkuWPl+S/oVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtICBldmVudCB7SlF1ZXJ5RXZlbnRPYmplY3R9IFtpbl0gZXZlbnQgb2JqZWN0XHJcbiAgICAgICAgICogQHBhcmFtICBldmVudCB7a2luZH0gICAgICAgICAgICAgIFtpbl0gY29tbWFuZCBraW5kIHN0cmluZ1xyXG4gICAgICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IHRydWU6IOaXouWumuOBruWHpueQhuOCkuihjOOCj+OBquOBhCAvIGZhbHNlOiDml6Llrprjga7lh6bnkIbjgpLooYzjgYZcclxuICAgICAgICAgKi9cclxuICAgICAgICBvbkNvbW1hbmQoZXZlbnQ/OiBKUXVlcnlFdmVudE9iamVjdCwga2luZD86IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDmnIDliJ3jga4gT25QYWdlSW5pdCgpIOOBruOBqOOBjeOBq+OBruOBv+OCs+ODvOODq+OBleOCjOOCi1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGV2ZW50IHtKUXVlcnlFdmVudE9iamVjdH0gW2luXSDjgqTjg5njg7Pjg4jjgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAgICAgKi9cclxuICAgICAgICBvbkluaXRpYWxpemUoZXZlbnQ6IEpRdWVyeUV2ZW50T2JqZWN0KTogdm9pZCB7XHJcbiAgICAgICAgICAgIC8vIE92ZXJyaWRlXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBqUU0gZXZlbnQ6IFwicGFnZWJlZm9yZWNyZWF0ZVwiIOOBq+WvvuW/nFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGV2ZW50IHtKUXVlcnlFdmVudE9iamVjdH0gW2luXSDjgqTjg5njg7Pjg4jjgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAgICAgKi9cclxuICAgICAgICBvblBhZ2VCZWZvcmVDcmVhdGUoZXZlbnQ6IEpRdWVyeUV2ZW50T2JqZWN0KTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0RWxlbWVudCh0aGlzLiRwYWdlLCB0cnVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIGpRTSBldmVudDogXCJwYWdlY3JlYXRlXCIgKOaXpzpcInBhZ2Vpbml0XCIpIOOBq+WvvuW/nFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGV2ZW50IHtKUXVlcnlFdmVudE9iamVjdH0gW2luXSDjgqTjg5njg7Pjg4jjgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAgICAgKi9cclxuICAgICAgICBvblBhZ2VJbml0KGV2ZW50OiBKUXVlcnlFdmVudE9iamVjdCk6IHZvaWQge1xyXG4gICAgICAgICAgICAvLyBPdmVycmlkZVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogalFNIGV2ZW50OiBcInBhZ2ViZWZvcmVzaG93XCIg44Gr5a++5b+cXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gZXZlbnQge0pRdWVyeUV2ZW50T2JqZWN0fSBbaW5dIOOCpOODmeODs+ODiOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICAgICAqIEBwYXJhbSBkYXRhICB7U2hvd0V2ZW50RGF0YX0gICAgIFtpbl0g5LuY5Yqg5oOF5aCxXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb25QYWdlQmVmb3JlU2hvdyhldmVudDogSlF1ZXJ5RXZlbnRPYmplY3QsIGRhdGE/OiBGcmFtZXdvcmsuU2hvd0V2ZW50RGF0YSk6IHZvaWQge1xyXG4gICAgICAgICAgICAvLyBPdmVycmlkZVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogalFNIGV2ZW50OiBcInBhZ2Vjb250YWluZXJzaG93XCIgKOaXpzpcInBhZ2VzaG93XCIpIOOBq+WvvuW/nFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGV2ZW50IHtKUXVlcnlFdmVudE9iamVjdH0gW2luXSDjgqTjg5njg7Pjg4jjgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAgICAgKiBAcGFyYW0gZGF0YSAge1Nob3dFdmVudERhdGF9ICAgICBbaW5dIOS7mOWKoOaDheWgsVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9uUGFnZVNob3coZXZlbnQ6IEpRdWVyeUV2ZW50T2JqZWN0LCBkYXRhPzogRnJhbWV3b3JrLlNob3dFdmVudERhdGEpOiB2b2lkIHtcclxuICAgICAgICAgICAgLy8gT3ZlcnJpZGVcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIGpRTSBldmVudDogXCJwYWdlYmVmb3JlaGlkZVwiIOOBq+WvvuW/nFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGV2ZW50IHtKUXVlcnlFdmVudE9iamVjdH0gW2luXSDjgqTjg5njg7Pjg4jjgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAgICAgKiBAcGFyYW0gZGF0YSAge0hpZGVFdmVudERhdGF9ICAgICBbaW5dIOS7mOWKoOaDheWgsVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9uUGFnZUJlZm9yZUhpZGUoZXZlbnQ6IEpRdWVyeUV2ZW50T2JqZWN0LCBkYXRhPzogRnJhbWV3b3JrLkhpZGVFdmVudERhdGEpOiB2b2lkIHtcclxuICAgICAgICAgICAgLy8gT3ZlcnJpZGVcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIGpRTSBldmVudDogXCJwYWdlY29udGFpbmVyaGlkZVwiICjml6c6XCJwYWdlaGlkZVwiKSDjgavlr77lv5xcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBldmVudCB7SlF1ZXJ5RXZlbnRPYmplY3R9IFtpbl0g44Kk44OZ44Oz44OI44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgICAgICogQHBhcmFtIGRhdGEgIHtIaWRlRXZlbnREYXRhfSAgICAgW2luXSDku5jliqDmg4XloLFcclxuICAgICAgICAgKi9cclxuICAgICAgICBvblBhZ2VIaWRlKGV2ZW50OiBKUXVlcnlFdmVudE9iamVjdCwgZGF0YT86IEZyYW1ld29yay5IaWRlRXZlbnREYXRhKTogdm9pZCB7XHJcbiAgICAgICAgICAgIC8vIE92ZXJyaWRlXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBqUU0gZXZlbnQ6IFwicGFnZXJlbW92ZVwiIOOBq+WvvuW/nFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGV2ZW50IHtKUXVlcnlFdmVudE9iamVjdH0gW2luXSDjgqTjg5njg7Pjg4jjgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAgICAgKi9cclxuICAgICAgICBvblBhZ2VSZW1vdmUoZXZlbnQ6IEpRdWVyeUV2ZW50T2JqZWN0KTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi8uLi8uLi8uLi9leHRlcm5hbC9pbmNsdWRlL2NkcC51aS5saXN0dmlldy5kLnRzXCIgLz5cclxuXHJcbi8qIHRzbGludDpkaXNhYmxlOm1heC1saW5lLWxlbmd0aCAqL1xyXG5cclxubmFtZXNwYWNlIENEUC5VSSB7XHJcblxyXG4gICAgY29uc3QgVEFHID0gXCJbQ0RQLlVJLlBhZ2VMaXN0Vmlld10gXCI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAaW50ZXJmYWNlIFBhZ2VMaXN0Vmlld0NvbnN0cnVjdE9wdGlvbnNcclxuICAgICAqIEBicmllZiBQYWdlTGlzdFZpZXcg44G444Gu5Yid5pyf5YyW5oOF5aCx44KS5qC857SN44GZ44KL44Kk44Oz44K/44O844OV44Kn44Kk44K544Kv44Op44K5XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgUGFnZUxpc3RWaWV3Q29uc3RydWN0T3B0aW9uczxUTW9kZWwgZXh0ZW5kcyBCYWNrYm9uZS5Nb2RlbD4gZXh0ZW5kcyBMaXN0Vmlld09wdGlvbnMsIFBhZ2VWaWV3Q29uc3RydWN0T3B0aW9uczxUTW9kZWw+IHtcclxuICAgICAgICBhdXRvRGVzdG9yeUVsZW1lbnQ/OiBib29sZWFuOyAgICAgICAgLy8hPCDjg5rjg7zjgrjpgbfnp7vliY3jgasgTGlzdCBFbGVtZW50IOOCkuegtOajhOOBmeOCi+WgtOWQiOOBryB0cnVlIOOCkuaMh+WumlxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGNsYXNzIFBhZ2VMaXN0Vmlld1xyXG4gICAgICogQGJyaWVmIOS7ruaDs+ODquOCueODiOODk+ODpeODvOapn+iDveOCkuaMgeOBpCBQYWdlVmlldyDjgq/jg6njgrlcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGNsYXNzIFBhZ2VMaXN0VmlldzxUTW9kZWwgZXh0ZW5kcyBCYWNrYm9uZS5Nb2RlbD4gZXh0ZW5kcyBQYWdlVmlldzxUTW9kZWw+IGltcGxlbWVudHMgSUxpc3RWaWV3IHtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBfc2Nyb2xsTWdyOiBTY3JvbGxNYW5hZ2VyID0gbnVsbDsgICAgLy8hPCBzY3JvbGwg44Kz44Ki44Ot44K444OD44KvXHJcbiAgICAgICAgcHJpdmF0ZSBfbmVlZFJlYnVpbGQ6IGJvb2xlYW4gPSBmYWxzZTsgICAgICAgLy8hPCDjg5rjg7zjgrjooajnpLrmmYLjgasgcmVidWlsZCgpIOOCkuOCs+ODvOODq+OBmeOCi+OBn+OCgeOBruWGhemDqOWkieaVsFxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBjb25zdHJ1Y3RvclxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHVybCAgICAge1N0cmluZ30gICAgICAgICAgICAgICAgICAgICAgIFtpbl0gcGFnZSB0ZW1wbGF0ZSDjgavkvb/nlKjjgZnjgosgVVJMXHJcbiAgICAgICAgICogQHBhcmFtIGlkICAgICAge1N0cmluZ30gICAgICAgICAgICAgICAgICAgICAgIFtpbl0gcGFnZSDjgavmjK/jgonjgozjgZ8gSURcclxuICAgICAgICAgKiBAcGFyYW0gb3B0aW9ucyB7UGFnZUxpc3RWaWV3Q29uc3RydWN0T3B0aW9uc30gW2luXSDjgqrjg5fjgrfjg6fjg7NcclxuICAgICAgICAgKi9cclxuICAgICAgICBjb25zdHJ1Y3Rvcih1cmw6IHN0cmluZywgaWQ6IHN0cmluZywgb3B0aW9ucz86IFBhZ2VMaXN0Vmlld0NvbnN0cnVjdE9wdGlvbnM8VE1vZGVsPikge1xyXG4gICAgICAgICAgICBzdXBlcih1cmwsIGlkLCAkLmV4dGVuZCh7fSwge1xyXG4gICAgICAgICAgICAgICAgYXV0b0Rlc3RvcnlFbGVtZW50OiBmYWxzZSxcclxuICAgICAgICAgICAgfSwgb3B0aW9ucykpO1xyXG4gICAgICAgICAgICB0aGlzLl9zY3JvbGxNZ3IgPSBuZXcgU2Nyb2xsTWFuYWdlcihvcHRpb25zKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISByZWJ1aWxkKCkg44Gu44K544Kx44K444Ol44O844Oq44Oz44KwXHJcbiAgICAgICAgcHVibGljIHJlc2VydmVSZWJ1aWxkKCk6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLl9uZWVkUmVidWlsZCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIE92ZXJyaWRlOiBQYWdlVmlld1xyXG5cclxuICAgICAgICAvLyEgT3JpZW50YXRpb24g44Gu5aSJ5pu05qSc55+lXHJcbiAgICAgICAgb25PcmllbnRhdGlvbkNoYW5nZWQobmV3T3JpZW50YXRpb246IEZyYW1ld29yay5PcmllbnRhdGlvbik6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLl9zY3JvbGxNZ3Iuc2V0QmFzZUhlaWdodCh0aGlzLmdldFBhZ2VCYXNlSGVpZ2h0KCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOODmuODvOOCuOmBt+enu+ebtOWJjeOCpOODmeODs+ODiOWHpueQhlxyXG4gICAgICAgIG9uQmVmb3JlUm91dGVDaGFuZ2UoKTogSlF1ZXJ5UHJvbWlzZTxhbnk+IHtcclxuICAgICAgICAgICAgaWYgKCg8UGFnZUxpc3RWaWV3Q29uc3RydWN0T3B0aW9uczxUTW9kZWw+PnRoaXMuX3BhZ2VPcHRpb25zKS5hdXRvRGVzdG9yeUVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3Njcm9sbE1nci5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHN1cGVyLm9uQmVmb3JlUm91dGVDaGFuZ2UoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISBqUU0gZXZlbnQ6IFwicGFnZWJlZm9yZXNob3dcIiDjgavlr77lv5xcclxuICAgICAgICBvblBhZ2VCZWZvcmVTaG93KGV2ZW50OiBKUXVlcnlFdmVudE9iamVjdCwgZGF0YT86IEZyYW1ld29yay5TaG93RXZlbnREYXRhKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHN1cGVyLm9uUGFnZUJlZm9yZVNob3coZXZlbnQsIGRhdGEpO1xyXG4gICAgICAgICAgICB0aGlzLl9zY3JvbGxNZ3IuaW5pdGlhbGl6ZSh0aGlzLiRwYWdlLCB0aGlzLmdldFBhZ2VCYXNlSGVpZ2h0KCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIGpRTSBldmVudDogXCJwYWdlY29udGFpbmVyc2hvd1wiICjml6c6XCJwYWdlc2hvd1wiKSDjgavlr77lv5xcclxuICAgICAgICBvblBhZ2VTaG93KGV2ZW50OiBKUXVlcnlFdmVudE9iamVjdCwgZGF0YT86IEZyYW1ld29yay5TaG93RXZlbnREYXRhKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHN1cGVyLm9uUGFnZVNob3coZXZlbnQsIGRhdGEpO1xyXG4gICAgICAgICAgICB0aGlzLl9zY3JvbGxNZ3Iuc2V0QmFzZUhlaWdodCh0aGlzLmdldFBhZ2VCYXNlSGVpZ2h0KCkpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fbmVlZFJlYnVpbGQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVidWlsZCgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbmVlZFJlYnVpbGQgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIGpRTSBldmVudDogXCJwYWdlcmVtb3ZlXCIg44Gr5a++5b+cXHJcbiAgICAgICAgb25QYWdlUmVtb3ZlKGV2ZW50OiBKUXVlcnlFdmVudE9iamVjdCk6IHZvaWQge1xyXG4gICAgICAgICAgICBzdXBlci5vblBhZ2VSZW1vdmUoZXZlbnQpO1xyXG4gICAgICAgICAgICB0aGlzLnJlbGVhc2UoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gSW1wbGVtZW50czogSUxpc3RWaWV3IFByb2ZpbGUg566h55CGXHJcblxyXG4gICAgICAgIC8vISDliJ3mnJ/ljJbmuIjjgb/jgYvliKTlrppcclxuICAgICAgICBpc0luaXRpYWxpemVkKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc2Nyb2xsTWdyLmlzSW5pdGlhbGl6ZWQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDjg5fjg63jg5Hjg4bjgqPjgpLmjIflrprjgZfjgabjgIFMaXN0SXRlbSDjgpLnrqHnkIZcclxuICAgICAgICBhZGRJdGVtKFxyXG4gICAgICAgICAgICBoZWlnaHQ6IG51bWJlcixcclxuICAgICAgICAgICAgaW5pdGlhbGl6ZXI6IG5ldyAob3B0aW9ucz86IGFueSkgPT4gQmFzZUxpc3RJdGVtVmlldyxcclxuICAgICAgICAgICAgaW5mbzogYW55LFxyXG4gICAgICAgICAgICBpbnNlcnRUbz86IG51bWJlclxyXG4gICAgICAgICAgICApOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5fYWRkTGluZShuZXcgTGluZVByb2ZpbGUodGhpcy5fc2Nyb2xsTWdyLCBNYXRoLmZsb29yKGhlaWdodCksIGluaXRpYWxpemVyLCBpbmZvKSwgaW5zZXJ0VG8pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOaMh+WumuOBl+OBnyBJdGVtIOOCkuWJiumZpFxyXG4gICAgICAgIHJlbW92ZUl0ZW0oaW5kZXg6IG51bWJlciwgc2l6ZT86IG51bWJlciwgZGVsYXk/OiBudW1iZXIpOiB2b2lkO1xyXG4gICAgICAgIHJlbW92ZUl0ZW0oaW5kZXg6IG51bWJlcltdLCBkZWxheT86IG51bWJlcik6IHZvaWQ7XHJcbiAgICAgICAgcmVtb3ZlSXRlbShpbmRleDogYW55LCBhcmcyPzogbnVtYmVyLCBhcmczPzogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuX3Njcm9sbE1nci5yZW1vdmVJdGVtKGluZGV4LCBhcmcyLCBhcmczKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDmjIflrprjgZfjgZ8gSXRlbSDjgavoqK3lrprjgZfjgZ/mg4XloLHjgpLlj5blvpdcclxuICAgICAgICBnZXRJdGVtSW5mbyh0YXJnZXQ6IG51bWJlcik6IGFueTtcclxuICAgICAgICBnZXRJdGVtSW5mbyh0YXJnZXQ6IEpRdWVyeUV2ZW50T2JqZWN0KTogYW55O1xyXG4gICAgICAgIGdldEl0ZW1JbmZvKHRhcmdldDogYW55KTogYW55IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Njcm9sbE1nci5nZXRJdGVtSW5mbyh0YXJnZXQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOOCouOCr+ODhuOCo+ODluODmuODvOOCuOOCkuabtOaWsFxyXG4gICAgICAgIHJlZnJlc2goKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuX3Njcm9sbE1nci5yZWZyZXNoKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg5pyq44Ki44K144Kk44Oz44Oa44O844K444KS5qeL56+JXHJcbiAgICAgICAgdXBkYXRlKCk6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLl9zY3JvbGxNZ3IudXBkYXRlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg44Oa44O844K444Ki44K144Kk44Oz44KS5YaN5qeL5oiQXHJcbiAgICAgICAgcmVidWlsZCgpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5fc2Nyb2xsTWdyLnJlYnVpbGQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDnrqHovYTjg4fjg7zjgr/jgpLnoLTmo4RcclxuICAgICAgICByZWxlYXNlKCk6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLl9zY3JvbGxNZ3IucmVsZWFzZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBJbXBsZW1lbnRzOiBJTGlzdFZpZXcgUHJvZmlsZSBCYWNrdXAgLyBSZXN0b3JlXHJcblxyXG4gICAgICAgIC8vISDlhoXpg6jjg4fjg7zjgr/jgpLjg5Djg4Pjgq/jgqLjg4Pjg5dcclxuICAgICAgICBiYWNrdXAoa2V5OiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Njcm9sbE1nci5iYWNrdXAoa2V5KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDlhoXpg6jjg4fjg7zjgr/jgpLjg6rjgrnjg4jjgqJcclxuICAgICAgICByZXN0b3JlKGtleTogc3RyaW5nLCByZWJ1aWxkOiBib29sZWFuID0gdHJ1ZSk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICBsZXQgcmV0dmFsID0gdGhpcy5fc2Nyb2xsTWdyLnJlc3RvcmUoa2V5LCByZWJ1aWxkKTtcclxuICAgICAgICAgICAgaWYgKHJldHZhbCAmJiAhcmVidWlsZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXNlcnZlUmVidWlsZCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiByZXR2YWw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg44OQ44OD44Kv44Ki44OD44OX44OH44O844K/44Gu5pyJ54ShXHJcbiAgICAgICAgaGFzQmFja3VwKGtleTogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zY3JvbGxNZ3IuaGFzQmFja3VwKGtleSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg44OQ44OD44Kv44Ki44OD44OX44OH44O844K/44Gu56C05qOEXHJcbiAgICAgICAgY2xlYXJCYWNrdXAoa2V5Pzogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zY3JvbGxNZ3IuY2xlYXJCYWNrdXAoa2V5KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDjg5Djg4Pjgq/jgqLjg4Pjg5fjg4fjg7zjgr/jgavjgqLjgq/jgrvjgrlcclxuICAgICAgICBnZXQgYmFja3VwRGF0YSgpOiBhbnkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc2Nyb2xsTWdyLmJhY2t1cERhdGE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIEltcGxlbWVudHM6IElMaXN0VmlldyBTY3JvbGxcclxuXHJcbiAgICAgICAgLy8hIOOCueOCr+ODreODvOODq+OCpOODmeODs+ODiOODj+ODs+ODieODqeioreWumi/op6PpmaRcclxuICAgICAgICBzZXRTY3JvbGxIYW5kbGVyKGhhbmRsZXI6IChldmVudDogSlF1ZXJ5RXZlbnRPYmplY3QpID0+IHZvaWQsIG9uOiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuX3Njcm9sbE1nci5zZXRTY3JvbGxIYW5kbGVyKGhhbmRsZXIsIG9uKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDjgrnjgq/jg63jg7zjg6vntYLkuobjgqTjg5njg7Pjg4jjg4/jg7Pjg4njg6noqK3lrpov6Kej6ZmkXHJcbiAgICAgICAgc2V0U2Nyb2xsU3RvcEhhbmRsZXIoaGFuZGxlcjogKGV2ZW50OiBKUXVlcnlFdmVudE9iamVjdCkgPT4gdm9pZCwgb246IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5fc2Nyb2xsTWdyLnNldFNjcm9sbFN0b3BIYW5kbGVyKGhhbmRsZXIsIG9uKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDjgrnjgq/jg63jg7zjg6vkvY3nva7jgpLlj5blvpdcclxuICAgICAgICBnZXRTY3JvbGxQb3MoKTogbnVtYmVyIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Njcm9sbE1nci5nZXRTY3JvbGxQb3MoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDjgrnjgq/jg63jg7zjg6vkvY3nva7jga7mnIDlpKflgKTjgpLlj5blvpdcclxuICAgICAgICBnZXRTY3JvbGxQb3NNYXgoKTogbnVtYmVyIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Njcm9sbE1nci5nZXRTY3JvbGxQb3NNYXgoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDjgrnjgq/jg63jg7zjg6vkvY3nva7jgpLmjIflrppcclxuICAgICAgICBzY3JvbGxUbyhwb3M6IG51bWJlciwgYW5pbWF0ZT86IGJvb2xlYW4sIHRpbWU/OiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5fc2Nyb2xsTWdyLnNjcm9sbFRvKHBvcywgYW5pbWF0ZSwgdGltZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg5oyH5a6a44GV44KM44GfIExpc3RJdGVtVmlldyDjga7ooajnpLrjgpLkv53oqLxcclxuICAgICAgICBlbnN1cmVWaXNpYmxlKGluZGV4OiBudW1iZXIsIG9wdGlvbnM/OiBFbnN1cmVWaXNpYmxlT3B0aW9ucyk6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLl9zY3JvbGxNZ3IuZW5zdXJlVmlzaWJsZShpbmRleCwgb3B0aW9ucyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIEltcGxlbWVudHM6IElMaXN0VmlldyBQcm9wZXJ0aWVzXHJcblxyXG4gICAgICAgIC8vISBjb3JlIGZyYW1ld29yayBhY2Nlc3NcclxuICAgICAgICBnZXQgY29yZSgpOiBJTGlzdFZpZXdGcmFtZXdvcmsge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc2Nyb2xsTWdyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBJbXBsZW1lbnRzOiBJTGlzdFZpZXcgSW50ZXJuYWwgSS9GXHJcblxyXG4gICAgICAgIC8vISDnmbvpjLIgZnJhbWV3b3JrIOOBjOS9v+eUqOOBmeOCi1xyXG4gICAgICAgIF9hZGRMaW5lKF9saW5lOiBhbnksIGluc2VydFRvPzogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuX3Njcm9sbE1nci5fYWRkTGluZShfbGluZSwgaW5zZXJ0VG8pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBwcml2YXRlIG1ldGhvZDpcclxuXHJcbiAgICAgICAgLy8hIOODmuODvOOCuOOBruWfuua6luWApOOCkuWPluW+l1xyXG4gICAgICAgIHByaXZhdGUgZ2V0UGFnZUJhc2VIZWlnaHQoKTogbnVtYmVyIHtcclxuICAgICAgICAgICAgcmV0dXJuICQod2luZG93KS5oZWlnaHQoKSAtIHBhcnNlSW50KHRoaXMuJHBhZ2UuY3NzKFwicGFkZGluZy10b3BcIiksIDEwKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uLy4uLy4uLy4uL2V4dGVybmFsL2luY2x1ZGUvY2RwLnVpLmxpc3R2aWV3LmQudHNcIiAvPlxyXG5cclxubmFtZXNwYWNlIENEUC5VSSB7XHJcblxyXG4gICAgY29uc3QgVEFHID0gXCJbQ0RQLlVJLlBhZ2VFeHBhbmRhYmxlTGlzdFZpZXddIFwiO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGNsYXNzIFBhZ2VFeHBhbmRhYmxlTGlzdFZpZXdcclxuICAgICAqIEBicmllZiDplovplonjg6rjgrnjg4jjg5Pjg6Xjg7zmqZ/og73jgpLmjIHjgaQgUGFnZVZpZXcg44Kv44Op44K5XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBjbGFzcyBQYWdlRXhwYW5kYWJsZUxpc3RWaWV3PFRNb2RlbCBleHRlbmRzIEJhY2tib25lLk1vZGVsPiBleHRlbmRzIFBhZ2VMaXN0VmlldzxUTW9kZWw+IGltcGxlbWVudHMgSUV4cGFuZGFibGVMaXN0VmlldyB7XHJcblxyXG4gICAgICAgIHByaXZhdGUgX2V4cGFuZE1hbmFnZXI6IEV4cGFuZE1hbmFnZXIgPSBudWxsO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBjb25zdHJ1Y3RvclxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHVybCAgICAge1N0cmluZ30gICAgICAgICAgICAgICAgICAgICAgIFtpbl0gcGFnZSB0ZW1wbGF0ZSDjgavkvb/nlKjjgZnjgosgVVJMXHJcbiAgICAgICAgICogQHBhcmFtIGlkICAgICAge1N0cmluZ30gICAgICAgICAgICAgICAgICAgICAgIFtpbl0gcGFnZSDjgavmjK/jgonjgozjgZ8gSURcclxuICAgICAgICAgKiBAcGFyYW0gb3B0aW9ucyB7UGFnZUxpc3RWaWV3Q29uc3RydWN0T3B0aW9uc30gW2luXSDjgqrjg5fjgrfjg6fjg7NcclxuICAgICAgICAgKi9cclxuICAgICAgICBjb25zdHJ1Y3Rvcih1cmw6IHN0cmluZywgaWQ6IHN0cmluZywgb3B0aW9ucz86IFBhZ2VMaXN0Vmlld0NvbnN0cnVjdE9wdGlvbnM8VE1vZGVsPikge1xyXG4gICAgICAgICAgICBzdXBlcih1cmwsIGlkLCBvcHRpb25zKTtcclxuICAgICAgICAgICAgdGhpcy5fZXhwYW5kTWFuYWdlciA9IG5ldyBFeHBhbmRNYW5hZ2VyKHRoaXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBJbXBsZW1lbnRzOiBJRXhwYW5kYWJsZUxpc3RWaWV3XHJcblxyXG4gICAgICAgIC8vISDmlrDopo8gR3JvdXBQcm9maWxlIOOCkuS9nOaIkFxyXG4gICAgICAgIG5ld0dyb3VwKGlkPzogc3RyaW5nKTogR3JvdXBQcm9maWxlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2V4cGFuZE1hbmFnZXIubmV3R3JvdXAoaWQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOeZu+mMsua4iOOBvyBHcm91cCDjgpLlj5blvpdcclxuICAgICAgICBnZXRHcm91cChpZDogc3RyaW5nKTogR3JvdXBQcm9maWxlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2V4cGFuZE1hbmFnZXIuZ2V0R3JvdXAoaWQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOesrDHpmo7lsaTjga4gR3JvdXAg55m76YyyXHJcbiAgICAgICAgcmVnaXN0ZXJUb3BHcm91cCh0b3BHcm91cDogR3JvdXBQcm9maWxlKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuX2V4cGFuZE1hbmFnZXIucmVnaXN0ZXJUb3BHcm91cCh0b3BHcm91cCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg56ysMemajuWxpOOBriBHcm91cCDjgpLlj5blvpdcclxuICAgICAgICBnZXRUb3BHcm91cHMoKTogR3JvdXBQcm9maWxlW10ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZXhwYW5kTWFuYWdlci5nZXRUb3BHcm91cHMoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDjgZnjgbnjgabjga7jgrDjg6vjg7zjg5fjgpLlsZXplosgKDHpmo7lsaQpXHJcbiAgICAgICAgZXhwYW5kQWxsKCk6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLl9leHBhbmRNYW5hZ2VyLmV4cGFuZEFsbCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOOBmeOBueOBpuOBruOCsOODq+ODvOODl+OCkuWPjuadnyAoMemajuWxpClcclxuICAgICAgICBjb2xsYXBzZUFsbChkZWxheT86IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLl9leHBhbmRNYW5hZ2VyLmNvbGxhcHNlQWxsKGRlbGF5KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDlsZXplovkuK3jgYvliKTlrppcclxuICAgICAgICBpc0V4cGFuZGluZygpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2V4cGFuZE1hbmFnZXIuaXNFeHBhbmRpbmcoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDlj47mnZ/kuK3jgYvliKTlrppcclxuICAgICAgICBpc0NvbGxhcHNpbmcoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9leHBhbmRNYW5hZ2VyLmlzQ29sbGFwc2luZygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOmWi+mWieS4reOBi+WIpOWumlxyXG4gICAgICAgIGlzU3dpdGNoaW5nKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZXhwYW5kTWFuYWdlci5pc1N3aXRjaGluZygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIGxheW91dCBrZXkg44KS5Y+W5b6XXHJcbiAgICAgICAgZ2V0IGxheW91dEtleSgpOiBzdHJpbmcge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZXhwYW5kTWFuYWdlci5sYXlvdXRLZXk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgbGF5b3V0IGtleSDjgpLoqK3lrppcclxuICAgICAgICBzZXQgbGF5b3V0S2V5KGtleTogc3RyaW5nKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2V4cGFuZE1hbmFnZXIubGF5b3V0S2V5ID0ga2V5O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBPdmVycmlkZTogUGFnZUxpc3RWaWV3XHJcblxyXG4gICAgICAgIC8vISDjg4fjg7zjgr/jgpLnoLTmo4RcclxuICAgICAgICByZWxlYXNlKCk6IHZvaWQge1xyXG4gICAgICAgICAgICBzdXBlci5yZWxlYXNlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2V4cGFuZE1hbmFnZXIucmVsZWFzZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOWGhemDqOODh+ODvOOCv+OCkuODkOODg+OCr+OCouODg+ODl1xyXG4gICAgICAgIGJhY2t1cChrZXk6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZXhwYW5kTWFuYWdlci5iYWNrdXAoa2V5KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDlhoXpg6jjg4fjg7zjgr/jgpLjg6rjgrnjg4jjgqJcclxuICAgICAgICByZXN0b3JlKGtleTogc3RyaW5nLCByZWJ1aWxkOiBib29sZWFuID0gdHJ1ZSk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZXhwYW5kTWFuYWdlci5yZXN0b3JlKGtleSwgcmVidWlsZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi9FeHRlbnNpb25NYW5hZ2VyLnRzXCIgLz5cclxuXHJcbi8qKlxyXG4gKiBqUXVlcnkgcGx1Z2luIGRlZmluaXRpb25cclxuICovXHJcbmludGVyZmFjZSBKUXVlcnkge1xyXG4gICAgcmlwcGxlKG9wdGlvbnM/OiBDRFAuVUkuRG9tRXh0ZW5zaW9uT3B0aW9ucyk6IEpRdWVyeTtcclxufVxyXG5cclxubmFtZXNwYWNlIENEUC5VSS5FeHRlbnNpb24ge1xyXG5cclxuICAgIGltcG9ydCBGcmFtZXdvcmsgPSBDRFAuRnJhbWV3b3JrO1xyXG5cclxuICAgIC8vISBqUXVlcnkgcGx1Z2luXHJcbiAgICAkLmZuLnJpcHBsZSA9IGZ1bmN0aW9uIChvcHRpb25zPzogRG9tRXh0ZW5zaW9uT3B0aW9ucykge1xyXG4gICAgICAgIGxldCAkZWwgPSAkKHRoaXMpO1xyXG4gICAgICAgIHJldHVybiAkZWwub24oRnJhbWV3b3JrLlBhdGNoLnNfdmNsaWNrRXZlbnQsIGZ1bmN0aW9uIChldmVudDogSlF1ZXJ5RXZlbnRPYmplY3QpIHtcclxuICAgICAgICAgICAgbGV0IHN1cmZhY2UgPSAkKHRoaXMpO1xyXG5cclxuICAgICAgICAgICAgLy8gY3JlYXRlIHN1cmZhY2UgaWYgaXQgZG9lc24ndCBleGlzdFxyXG4gICAgICAgICAgICBpZiAoc3VyZmFjZS5maW5kKFwiLnVpLXJpcHBsZS1pbmtcIikubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBzdXJmYWNlLnByZXBlbmQoXCI8ZGl2IGNsYXNzPSd1aS1yaXBwbGUtaW5rJz48L2Rpdj5cIik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxldCBpbmsgPSBzdXJmYWNlLmZpbmQoXCIudWktcmlwcGxlLWlua1wiKTtcclxuXHJcbiAgICAgICAgICAgIC8vIHN0b3AgdGhlIHByZXZpb3VzIGFuaW1hdGlvblxyXG4gICAgICAgICAgICBpbmsucmVtb3ZlQ2xhc3MoXCJ1aS1yaXBwbGUtYW5pbWF0ZVwiKTtcclxuXHJcbiAgICAgICAgICAgIC8vIGluayBzaXplOlxyXG4gICAgICAgICAgICBpZiAoIWluay5oZWlnaHQoKSAmJiAhaW5rLndpZHRoKCkpIHtcclxuICAgICAgICAgICAgICAgIGxldCBkID0gTWF0aC5tYXgoc3VyZmFjZS5vdXRlcldpZHRoKCksIHN1cmZhY2Uub3V0ZXJIZWlnaHQoKSk7XHJcbiAgICAgICAgICAgICAgICBpbmsuY3NzKHsgaGVpZ2h0OiBkLCB3aWR0aDogZCB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbGV0IHggPSBldmVudC5wYWdlWCAtIHN1cmZhY2Uub2Zmc2V0KCkubGVmdCAtIChpbmsud2lkdGgoKSAvIDIpO1xyXG4gICAgICAgICAgICBsZXQgeSA9IGV2ZW50LnBhZ2VZIC0gc3VyZmFjZS5vZmZzZXQoKS50b3AgLSAoaW5rLmhlaWdodCgpIC8gMik7XHJcblxyXG4gICAgICAgICAgICBsZXQgcmlwcGxlQ29sb3IgPSBzdXJmYWNlLmRhdGEoXCJyaXBwbGUtY29sb3JcIik7XHJcblxyXG4gICAgICAgICAgICAvLyBhbmltYXRpb24gZW5kIGhhbmRsZXJcclxuICAgICAgICAgICAgY29uc3QgQU5JTUFUSU9OX0VORF9FVkVOVCA9IFwiYW5pbWF0aW9uZW5kIHdlYmtpdEFuaW1hdGlvbkVuZFwiO1xyXG4gICAgICAgICAgICBpbmsub24oQU5JTUFUSU9OX0VORF9FVkVOVCwgZnVuY3Rpb24gKGV2ZW50OiBKUXVlcnlFdmVudE9iamVjdCkge1xyXG4gICAgICAgICAgICAgICAgaW5rLm9mZigpO1xyXG4gICAgICAgICAgICAgICAgaW5rLnJlbW92ZUNsYXNzKFwidWktcmlwcGxlLWFuaW1hdGVcIik7XHJcbiAgICAgICAgICAgICAgICBpbmsgPSBudWxsO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIC8vIHNldCB0aGUgcG9zaXRpb24gYW5kIGFkZCBjbGFzcyAuYW5pbWF0ZVxyXG4gICAgICAgICAgICBpbmsuY3NzKHtcclxuICAgICAgICAgICAgICAgIHRvcDogeSArIFwicHhcIixcclxuICAgICAgICAgICAgICAgIGxlZnQ6IHggKyBcInB4XCIsXHJcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiByaXBwbGVDb2xvclxyXG4gICAgICAgICAgICB9KS5hZGRDbGFzcyhcInVpLXJpcHBsZS1hbmltYXRlXCIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIE1hdGVyaWFsIERlc2lnbiBSaXBwbGUg5ouh5by1XHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtqUXVlcnl9ICAgICAgICAgICAgICAkdWkgICAgICAgW2luXSDmpJzntKLlr77osaHjga4galF1ZXJ5IOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICogQHBhcmFtIHtEb21FeHRlbnNpb25PcHRpb25zfSBbb3B0aW9uc10gW2luXSDjgqrjg5fjgrfjg6fjg7NcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gYXBwbHlEb21FeHRlbnNpb24oJHVpOiBKUXVlcnksIG9wdGlvbnM/OiBEb21FeHRlbnNpb25PcHRpb25zKTogSlF1ZXJ5IHtcclxuICAgICAgICBjb25zdCBOT19SSVBQTEVfQ0xBU1MgPSBbXHJcbiAgICAgICAgICAgIFwiLnVpLXJpcHBsZS1ub25lXCIsXHJcbiAgICAgICAgICAgIFwiLnVpLWZsaXBzd2l0Y2gtb25cIixcclxuICAgICAgICAgICAgXCIudWktc2xpZGVyLWhhbmRsZVwiLFxyXG4gICAgICAgICAgICBcIi51aS1pbnB1dC1jbGVhclwiLFxyXG4gICAgICAgIF07XHJcblxyXG4gICAgICAgIGxldCBzZWxlY3RvciA9IFwiLnVpLWJ0blwiO1xyXG4gICAgICAgIGlmICgkdWkuaGFzQ2xhc3MoXCJ1aS1wYWdlXCIpKSB7XHJcbiAgICAgICAgICAgIHNlbGVjdG9yID0gXCIudWktY29udGVudCAudWktYnRuXCI7IC8vIGhlYWRlciDjga/oh6rli5UgcmlwcGxlIOWMluWvvuixoeWkllxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJHVpLmZpbmQoc2VsZWN0b3IpXHJcbiAgICAgICAgICAgIC5maWx0ZXIoKGluZGV4LCBlbGVtKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgJGVsZW0gPSAkKGVsZW0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKCRlbGVtLmlzKE5PX1JJUFBMRV9DTEFTUy5qb2luKFwiLFwiKSkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuYWRkQ2xhc3MoXCJ1aS1yaXBwbGVcIik7XHJcblxyXG4gICAgICAgIC8vIHJpcHBsaWZ5XHJcbiAgICAgICAgJHVpLmZpbmQoXCIudWktcmlwcGxlXCIpLnJpcHBsZSgpO1xyXG4gICAgICAgIHJldHVybiAkdWk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g55m76YyyXHJcbiAgICBFeHRlbnNpb25NYW5hZ2VyLnJlZ2lzdGVyRG9tRXh0ZW5zaW9uKGFwcGx5RG9tRXh0ZW5zaW9uKTtcclxufVxyXG4iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vRXh0ZW5zaW9uTWFuYWdlci50c1wiIC8+XHJcblxyXG4vKipcclxuICogalF1ZXJ5IHBsdWdpbiBkZWZpbml0aW9uXHJcbiAqL1xyXG5pbnRlcmZhY2UgSlF1ZXJ5IHtcclxuICAgIHNwaW5uZXIob3B0aW9ucz86IENEUC5VSS5Eb21FeHRlbnNpb25PcHRpb25zKTogSlF1ZXJ5O1xyXG59XHJcblxyXG5uYW1lc3BhY2UgQ0RQLlVJLkV4dGVuc2lvbiB7XHJcblxyXG4gICAgaW1wb3J0IFRlbXBsYXRlID0gQ0RQLlRvb2xzLlRlbXBsYXRlO1xyXG4gICAgaW1wb3J0IEpTVCAgICAgID0gQ0RQLlRvb2xzLkpTVDtcclxuXHJcbiAgICBsZXQgX3RlbXBsYXRlOiBKU1Q7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBNYXRlcmlhbCBEZXNpZ24gU3Bpbm5lciDmi6HlvLVcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge2pRdWVyeX0gICAgICAgICAgICAgICR0YXJnZXQgICBbaW5dIOaknOe0ouWvvuixoeOBriBqUXVlcnkg44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgKiBAcGFyYW0ge0RvbUV4dGVuc2lvbk9wdGlvbnN9IFtvcHRpb25zXSBbaW5dIOOCquODl+OCt+ODp+ODs1xyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBhcHBseURvbUV4dGVuc2lvbigkdGFyZ2V0OiBKUXVlcnksIG9wdGlvbnM/OiBEb21FeHRlbnNpb25PcHRpb25zKTogSlF1ZXJ5IHtcclxuICAgICAgICBpZiAoIV90ZW1wbGF0ZSkge1xyXG4gICAgICAgICAgICBfdGVtcGxhdGUgPSBUZW1wbGF0ZS5nZXRKU1QoYFxyXG4gICAgICAgICAgICAgICAgPHNjcmlwdCB0eXBlPVwidGV4dC90ZW1wbGF0ZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwidWktc3Bpbm5lci1iYXNlXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwidWktc3Bpbm5lci1pbm5lclwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJ1aS1zcGlubmVyLWlubmVyLWdhcFwiIHt7Ym9yZGVyVG9wfX0+PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJ1aS1zcGlubmVyLWlubmVyLWxlZnRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInVpLXNwaW5uZXItaW5uZXItaGFsZi1jaXJjbGVcIiB7e2JvcmRlcn19Pjwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwidWktc3Bpbm5lci1pbm5lci1yaWdodFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwidWktc3Bpbm5lci1pbm5lci1oYWxmLWNpcmNsZVwiIHt7Ym9yZGVyfX0+PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPC9zY3JpcHQ+XHJcbiAgICAgICAgICAgIGApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgbWFrZVRlbXBsYXRlUGFyYW0gPSAoY29sb3I6IHN0cmluZyk6IE9iamVjdCA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBib3JkZXJUb3A6IFwic3R5bGU9Ym9yZGVyLXRvcC1jb2xvcjpcIiArIGNvbG9yICsgXCI7XCIsXHJcbiAgICAgICAgICAgICAgICBib3JkZXI6IFwic3R5bGU9Ym9yZGVyLWNvbG9yOlwiICsgY29sb3IgKyBcIjtcIixcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBjb25zdCBzcGlubmVyaWZ5ID0gKGVsZW06IEVsZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgbGV0ICRlbGVtID0gJChlbGVtKTtcclxuICAgICAgICAgICAgbGV0IGNvbG9yID0gJGVsZW0uZGF0YShcInNwaW5uZXItY29sb3JcIik7XHJcbiAgICAgICAgICAgIGxldCBwYXJhbSA9IG51bGw7XHJcbiAgICAgICAgICAgIGlmIChjb2xvcikge1xyXG4gICAgICAgICAgICAgICAgJGVsZW0uY3NzKHsgXCJiYWNrZ3JvdW5kLWNvbG9yXCI6IGNvbG9yIH0pO1xyXG4gICAgICAgICAgICAgICAgcGFyYW0gPSBtYWtlVGVtcGxhdGVQYXJhbShjb2xvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJGVsZW0uYXBwZW5kKF90ZW1wbGF0ZShwYXJhbSkpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICR0YXJnZXQuZmluZChcIi51aS1zcGlubmVyLCAudWktaWNvbi1sb2FkaW5nXCIpXHJcbiAgICAgICAgICAgIC5lYWNoKChpbmRleDogbnVtYmVyLCBlbGVtOiBFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBzcGlubmVyaWZ5KGVsZW0pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuICR0YXJnZXQ7XHJcbiAgICB9XHJcblxyXG4gICAgLy8hIGpRdWVyeSBwbHVnaW5cclxuICAgICQuZm4uc3Bpbm5lciA9IGZ1bmN0aW9uIChvcHRpb25zPzogRG9tRXh0ZW5zaW9uT3B0aW9ucykge1xyXG4gICAgICAgIHJldHVybiBhcHBseURvbUV4dGVuc2lvbigkKHRoaXMpLCBvcHRpb25zKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8g55m76YyyXHJcbiAgICBFeHRlbnNpb25NYW5hZ2VyLnJlZ2lzdGVyRG9tRXh0ZW5zaW9uKGFwcGx5RG9tRXh0ZW5zaW9uKTtcclxufVxyXG4iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vRXh0ZW5zaW9uTWFuYWdlci50c1wiIC8+XHJcblxyXG5uYW1lc3BhY2UgQ0RQLlVJLkV4dGVuc2lvbiB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUZXh0IElucHV0IOeUqCBGbG9hdGluZyBMYWJlbCDmi6HlvLVcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge2pRdWVyeX0gICAgICAgICAgICAgICR1aSAgICAgICBbaW5dIOaknOe0ouWvvuixoeOBriBqUXVlcnkg44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgKiBAcGFyYW0ge0RvbUV4dGVuc2lvbk9wdGlvbnN9IFtvcHRpb25zXSBbaW5dIOOCquODl+OCt+ODp+ODs1xyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBhcHBseURvbUV4dGVuc2lvbigkdWk6IEpRdWVyeSwgb3B0aW9ucz86IERvbUV4dGVuc2lvbk9wdGlvbnMpOiBKUXVlcnkge1xyXG4gICAgICAgIGNvbnN0IHVwZGF0ZSA9IChlbGVtOiBFbGVtZW50LCBmbG9hdGluZzogYm9vbGVhbikgPT4ge1xyXG4gICAgICAgICAgICBsZXQgJGVsZW0gPSAkKGVsZW0pO1xyXG4gICAgICAgICAgICBpZiAoZmxvYXRpbmcpIHtcclxuICAgICAgICAgICAgICAgICRlbGVtLmFkZENsYXNzKFwidWktZmxvYXQtbGFiZWwtZmxvYXRpbmdcIik7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkZWxlbS5yZW1vdmVDbGFzcyhcInVpLWZsb2F0LWxhYmVsLWZsb2F0aW5nXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgY29uc3QgZmxvYXRpbmdpZnkgPSAoZWxlbTogRWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgaWQgPSAkKGVsZW0pLmF0dHIoXCJmb3JcIik7XHJcbiAgICAgICAgICAgIGxldCAkaW5wdXQgPSAkdWkuZmluZChcIiNcIiArIGlkKTtcclxuICAgICAgICAgICAgaWYgKFwic2VhcmNoXCIgPT09ICRpbnB1dC5qcW1EYXRhKFwidHlwZVwiKSkge1xyXG4gICAgICAgICAgICAgICAgJChlbGVtKS5hZGRDbGFzcyhcInVpLWZsb2F0LWxhYmVsLWhhcy1pY29uXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHVwZGF0ZShlbGVtLCAhISRpbnB1dC52YWwoKSk7XHJcbiAgICAgICAgICAgICRpbnB1dC5vbihcImtleXVwIGNoYW5nZSBpbnB1dCBmb2N1cyBibHVyIGN1dCBwYXN0ZVwiLCAoZXZlbnQ6IEpRdWVyeUV2ZW50T2JqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICB1cGRhdGUoZWxlbSwgISEkKGV2ZW50LnRhcmdldCkudmFsKCkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkdWkuZmluZChcImxhYmVsLnVpLWZsb2F0LWxhYmVsLCAudWktZmxvYXQtbGFiZWwgbGFiZWxcIilcclxuICAgICAgICAgICAgLmVhY2goKGluZGV4OiBudW1iZXIsIGVsZW06IEVsZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIGZsb2F0aW5naWZ5KGVsZW0pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuICR1aTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDnmbvpjLJcclxuICAgIEV4dGVuc2lvbk1hbmFnZXIucmVnaXN0ZXJEb21FeHRlbnNpb24oYXBwbHlEb21FeHRlbnNpb24pO1xyXG59XHJcbiIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi9FeHRlbnNpb25NYW5hZ2VyLnRzXCIgLz5cclxuXHJcbm5hbWVzcGFjZSBDRFAuVUkuRXh0ZW5zaW9uIHtcclxuXHJcbiAgICBpbXBvcnQgRnJhbWV3b3JrID0gQ0RQLkZyYW1ld29yaztcclxuXHJcbiAgICAvKipcclxuICAgICAqIGpRdWVyeSBNb2JpbGUgRmxpcCBTd2l0Y2gg5ouh5by1XHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtqUXVlcnl9ICAgICAgICAgICAgICAkdWkgICAgICAgW2luXSDmpJzntKLlr77osaHjga4galF1ZXJ5IOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICogQHBhcmFtIHtEb21FeHRlbnNpb25PcHRpb25zfSBbb3B0aW9uc10gW2luXSDjgqrjg5fjgrfjg6fjg7NcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gYXBwbHlEb21FeHRlbnNpb24oJHVpOiBKUXVlcnksIG9wdGlvbnM/OiBEb21FeHRlbnNpb25PcHRpb25zKTogSlF1ZXJ5IHtcclxuICAgICAgICAvKlxyXG4gICAgICAgICAqIGZsaXBzd2l0Y2gg44Gr57SQ44Gl44GPIGxhYmVsIOOBryBPUyDjgavjgojjgaPjgaYgZXZlbnQg55m66KGM5b2i5byP44GM55Ww44Gq44KL44Gf44KB44OV44OD44Kv44GX44Gm54us6Ieq44Kk44OZ44Oz44OI44Gn5a++5b+c44GZ44KLLlxyXG4gICAgICAgICAqIOOBvuOBnyBmbGlwc3dpdGNoIOOBr+WGhemDqOOBpyBjbGljayDjgpLnmbrooYzjgZfjgabjgYTjgovjgYzjgIF2Y2xpY2sg44Gr5aSJ5pu044GZ44KLLlxyXG4gICAgICAgICAqL1xyXG5cclxuICAgICAgICBsZXQgX2dldEFsbFN3aXRjaGVzID0gKCk6IEpRdWVyeSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiAkdWkuZmluZChcIi51aS1mbGlwc3dpdGNoXCIpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGxldCBfZ2V0SW5wdXRGcm9tU3dpdGNoID0gKCRzd2l0Y2g6IEpRdWVyeSk6IEpRdWVyeSA9PiB7XHJcbiAgICAgICAgICAgIGxldCAkaW5wdXQgPSAkc3dpdGNoLmZpbmQoXCJpbnB1dFwiKTtcclxuICAgICAgICAgICAgaWYgKCRpbnB1dC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAkaW5wdXQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbGV0ICRzZWxlY3QgPSAkc3dpdGNoLmZpbmQoXCJzZWxlY3RcIik7XHJcbiAgICAgICAgICAgIGlmICgkc2VsZWN0Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICRzZWxlY3Q7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgbGV0IF9jaGFuZ2UgPSAoJGlucHV0OiBKUXVlcnksIHRvOiBib29sZWFuKTogdm9pZCA9PiB7XHJcbiAgICAgICAgICAgIGlmICgkaW5wdXQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChcIklOUFVUXCIgPT09ICRpbnB1dFswXS5ub2RlTmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICRpbnB1dC5wcm9wKFwiY2hlY2tlZFwiLCB0bykuZmxpcHN3aXRjaChcInJlZnJlc2hcIik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFwiU0VMRUNUXCIgPT09ICRpbnB1dFswXS5ub2RlTmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICRpbnB1dC52YWwodG8gPyBcIm9uXCIgOiBcIm9mZlwiKS5mbGlwc3dpdGNoKFwicmVmcmVzaFwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGxldCBfZ2V0TGFiZWxzRnJvbVN3aXRjaCA9ICgkc3dpdGNoOiBKUXVlcnkpOiBKUXVlcnkgPT4ge1xyXG4gICAgICAgICAgICBsZXQgJGlucHV0ID0gX2dldElucHV0RnJvbVN3aXRjaCgkc3dpdGNoKTtcclxuICAgICAgICAgICAgaWYgKCRpbnB1dCkge1xyXG4gICAgICAgICAgICAgICAgbGV0IGxhYmVscyA9ICg8YW55PiRpbnB1dFswXSkubGFiZWxzO1xyXG4gICAgICAgICAgICAgICAgaWYgKGxhYmVscykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkKGxhYmVscyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuICQoKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBsZXQgX2dldFN3aXRjaEZyb21MYWJlbCA9ICgkbGFiZWw6IEpRdWVyeSk6IEpRdWVyeSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBuYW1lID0gJGxhYmVsLmF0dHIoXCJmb3JcIik7XHJcbiAgICAgICAgICAgIHJldHVybiBfZ2V0QWxsU3dpdGNoZXMoKS5maW5kKFwiW25hbWU9J1wiICsgbmFtZSArIFwiJ11cIik7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgX2dldEFsbFN3aXRjaGVzKClcclxuICAgICAgICAgICAgLm9uKFwidmNsaWNrIF9jaGFuZ2VfZmxpcHN3aWNoXCIsIChldmVudDogSlF1ZXJ5RXZlbnRPYmplY3QpID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCAkc3dpdGNoID0gJChldmVudC5jdXJyZW50VGFyZ2V0KTtcclxuICAgICAgICAgICAgICAgIGxldCAkdGFyZ2V0ID0gJChldmVudC50YXJnZXQpO1xyXG4gICAgICAgICAgICAgICAgbGV0ICRpbnB1dCA9IF9nZXRJbnB1dEZyb21Td2l0Y2goJHN3aXRjaCk7XHJcbiAgICAgICAgICAgICAgICBsZXQgY2hhbmdlVG8gPSAhJHN3aXRjaC5oYXNDbGFzcyhcInVpLWZsaXBzd2l0Y2gtYWN0aXZlXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICgkdGFyZ2V0Lmhhc0NsYXNzKFwidWktZmxpcHN3aXRjaC1pbnB1dFwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIF9jaGFuZ2UoJGlucHV0LCBjaGFuZ2VUbyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCR0YXJnZXQuaGFzQ2xhc3MoXCJ1aS1mbGlwc3dpdGNoLW9uXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKEZyYW1ld29yay5QbGF0Zm9ybS5Nb2JpbGUgJiYgRnJhbWV3b3JrLlBhdGNoLmlzU3VwcG9ydGVkVmNsaWNrKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2NoYW5nZSgkaW5wdXQsIGNoYW5nZVRvKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5lYWNoKChpbmRleDogbnVtYmVyLCBmbGlwc3dpdGNoOiBFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBfZ2V0TGFiZWxzRnJvbVN3aXRjaCgkKGZsaXBzd2l0Y2gpKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbihcInZjbGlja1wiLCAoZXZlbnQ6IEpRdWVyeUV2ZW50T2JqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCAkc3dpdGNoID0gX2dldFN3aXRjaEZyb21MYWJlbCgkKGV2ZW50LnRhcmdldCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISRzd2l0Y2gucGFyZW50KCkuaGFzQ2xhc3MoXCJ1aS1zdGF0ZS1kaXNhYmxlZFwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHN3aXRjaC50cmlnZ2VyKFwiX2NoYW5nZV9mbGlwc3dpY2hcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiAkdWk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g55m76YyyXHJcbiAgICBFeHRlbnNpb25NYW5hZ2VyLnJlZ2lzdGVyRG9tRXh0ZW5zaW9uKGFwcGx5RG9tRXh0ZW5zaW9uKTtcclxufVxyXG4iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vRXh0ZW5zaW9uTWFuYWdlci50c1wiIC8+XHJcblxyXG5uYW1lc3BhY2UgQ0RQLlVJLkV4dGVuc2lvbiB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBqUXVlcnkgTW9iaWxlIFNsaWRlciDmi6HlvLVcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge2pRdWVyeX0gICAgICAgICAgICAgICR1aSAgICAgICBbaW5dIOaknOe0ouWvvuixoeOBriBqUXVlcnkg44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgKiBAcGFyYW0ge0RvbUV4dGVuc2lvbk9wdGlvbnN9IFtvcHRpb25zXSBbaW5dIOOCquODl+OCt+ODp+ODs1xyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBhcHBseURvbUV4dGVuc2lvbigkdWk6IEpRdWVyeSwgb3B0aW9ucz86IERvbUV4dGVuc2lvbk9wdGlvbnMpOiBKUXVlcnkge1xyXG4gICAgICAgICR1aS5maW5kKFwiLnVpLXNsaWRlci1pbnB1dFwiKVxyXG4gICAgICAgICAgICAub24oXCJzbGlkZXN0b3BcIiwgKGV2ZW50OiBKUXVlcnlFdmVudE9iamVjdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0ICRoYW5kbGVzID0gJChldmVudC5jdXJyZW50VGFyZ2V0KVxyXG4gICAgICAgICAgICAgICAgICAgIC5wYXJlbnQoKVxyXG4gICAgICAgICAgICAgICAgICAgIC5maW5kKFwiLnVpLXNsaWRlci1oYW5kbGVcIik7XHJcbiAgICAgICAgICAgICAgICAkaGFuZGxlcy5ibHVyKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiAkdWk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g55m76YyyXHJcbiAgICBFeHRlbnNpb25NYW5hZ2VyLnJlZ2lzdGVyRG9tRXh0ZW5zaW9uKGFwcGx5RG9tRXh0ZW5zaW9uKTtcclxufVxyXG4iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vRXh0ZW5zaW9uTWFuYWdlci50c1wiIC8+XHJcblxyXG5uYW1lc3BhY2UgQ0RQLlVJLkV4dGVuc2lvbiB7XHJcblxyXG4gICAgLy8hIGlTY3JvbGwuY2xpY2sgcGF0Y2hcclxuICAgIGNvbnN0IHBhdGNoX0lTY3JvbGxfdXRpbHNfY2xpY2sgPSBmdW5jdGlvbiAoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XHJcbiAgICAgICAgbGV0IHRhcmdldDogYW55ID0gZXZlbnQudGFyZ2V0O1xyXG4gICAgICAgIGxldCBldjogTW91c2VFdmVudDtcclxuICAgICAgICBsZXQgZTogYW55ID0gZXZlbnQ7XHJcblxyXG4gICAgICAgIC8vIFtDRFAgbW9kaWZpZWRdOiBzZXQgdGFyZ2V0LmNsaWVudFguXHJcbiAgICAgICAgaWYgKG51bGwgPT0gdGFyZ2V0LmNsaWVudFggfHwgbnVsbCA9PSB0YXJnZXQuY2xpZW50WSkge1xyXG4gICAgICAgICAgICBpZiAobnVsbCAhPSBlLnBhZ2VYICYmIG51bGwgIT0gZS5wYWdlWSkge1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0LmNsaWVudFggPSBlLnBhZ2VYO1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0LmNsaWVudFkgPSBlLnBhZ2VZO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGUuY2hhbmdlZFRvdWNoZXMgJiYgZS5jaGFuZ2VkVG91Y2hlc1swXSkge1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0LmNsaWVudFggPSBlLmNoYW5nZWRUb3VjaGVzWzBdLnBhZ2VYO1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0LmNsaWVudFkgPSBlLmNoYW5nZWRUb3VjaGVzWzBdLnBhZ2VZO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoISgvKFNFTEVDVHxJTlBVVHxURVhUQVJFQSkvaSkudGVzdCh0YXJnZXQudGFnTmFtZSkpIHtcclxuICAgICAgICAgICAgZXYgPSBkb2N1bWVudC5jcmVhdGVFdmVudChcIk1vdXNlRXZlbnRzXCIpO1xyXG4gICAgICAgICAgICBldi5pbml0TW91c2VFdmVudChcImNsaWNrXCIsIHRydWUsIHRydWUsIGUudmlldywgMSxcclxuICAgICAgICAgICAgICAgIHRhcmdldC5zY3JlZW5YLCB0YXJnZXQuc2NyZWVuWSwgdGFyZ2V0LmNsaWVudFgsIHRhcmdldC5jbGllbnRZLFxyXG4gICAgICAgICAgICAgICAgZS5jdHJsS2V5LCBlLmFsdEtleSwgZS5zaGlmdEtleSwgZS5tZXRhS2V5LFxyXG4gICAgICAgICAgICAgICAgMCwgbnVsbCk7XHJcblxyXG4gICAgICAgICAgICAoPGFueT5ldikuX2NvbnN0cnVjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGFyZ2V0LmRpc3BhdGNoRXZlbnQoZXYpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgbGV0IHNfYXBwbGllZCA9IGZhbHNlO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogaVNjcm9sbCBQYXRjaCDmi6HlvLVcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge2pRdWVyeX0gICAgICAgICAgICAgICR1aSAgICAgICBbaW5dIOaknOe0ouWvvuixoeOBriBqUXVlcnkg44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgKiBAcGFyYW0ge0RvbUV4dGVuc2lvbk9wdGlvbnN9IFtvcHRpb25zXSBbaW5dIOOCquODl+OCt+ODp+ODs1xyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBhcHBseVBhdGNoKCR1aTogSlF1ZXJ5LCBvcHRpb25zPzogRG9tRXh0ZW5zaW9uT3B0aW9ucyk6IEpRdWVyeSB7XHJcbiAgICAgICAgaWYgKCFzX2FwcGxpZWQgJiYgZ2xvYmFsLklTY3JvbGwgJiYgZ2xvYmFsLklTY3JvbGwudXRpbHMpIHtcclxuICAgICAgICAgICAgZ2xvYmFsLklTY3JvbGwudXRpbHMuY2xpY2sgPSBwYXRjaF9JU2Nyb2xsX3V0aWxzX2NsaWNrO1xyXG4gICAgICAgICAgICBzX2FwcGxpZWQgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gJHVpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOeZu+mMslxyXG4gICAgRXh0ZW5zaW9uTWFuYWdlci5yZWdpc3RlckRvbUV4dGVuc2lvbihhcHBseVBhdGNoKTtcclxufVxyXG4iLCJpbXBvcnQgX2NvcmUgPSByZXF1aXJlKFwiY2RwLmNvcmVcIik7XHJcblxyXG4vLyBDRFAgc3R1ZmZcclxuZXhwb3J0IGxldCBnbG9iYWwgICAgICAgICAgID0gX2NvcmUuZ2xvYmFsO1xyXG5leHBvcnQgbGV0IGNvcmVJbml0aWFsaXplICAgPSBfY29yZS5pbml0aWFsaXplO1xyXG5leHBvcnQgbGV0IHdlYlJvb3QgICAgICAgICAgPSBfY29yZS53ZWJSb290O1xyXG5leHBvcnQgbGV0IENvbmZpZyAgICAgICAgICAgPSBfY29yZS5Db25maWc7XHJcblxyXG4vLyBpbnRlcmZhY2VzXHJcbmV4cG9ydCB0eXBlIENvcmVJbml0T3B0aW9ucyA9IF9jb3JlLkNvcmVJbml0T3B0aW9ucztcclxuIiwiaW1wb3J0IF9wcm9taXNlID0gcmVxdWlyZShcImNkcC5wcm9taXNlXCIpO1xyXG5cclxuLy8gUHJvbWlzZSBtZXRob2RzXHJcbmV4cG9ydCBsZXQgbWFrZVByb21pc2UgICAgPSBfcHJvbWlzZS5tYWtlUHJvbWlzZTtcclxuZXhwb3J0IGxldCB3YWl0ICAgICAgICAgICA9IF9wcm9taXNlLndhaXQ7XHJcblxyXG4vLyBAY2xhc3MgUHJvbWlzZU1hbmFnZXJcclxuZXhwb3J0IHR5cGUgUHJvbWlzZU1hbmFnZXIgPSBDRFAuUHJvbWlzZU1hbmFnZXI7XHJcbmV4cG9ydCBsZXQgIFByb21pc2VNYW5hZ2VyID0gX3Byb21pc2UuUHJvbWlzZU1hbmFnZXI7XHJcblxyXG4vLyBpbnRlcmZhY2VzXHJcbmV4cG9ydCB0eXBlIElQcm9taXNlPFQ+ID0gQ0RQLklQcm9taXNlPFQ+O1xyXG5leHBvcnQgdHlwZSBQcm9taXNlICAgICA9IENEUC5Qcm9taXNlO1xyXG4iLCJpbXBvcnQgX2kxOG4gPSByZXF1aXJlKFwiY2RwLmkxOG5cIik7XHJcblxyXG4vLyBDRFAgc3R1ZmZcclxuZXhwb3J0IGxldCBpMThuID0gX2kxOG4uaTE4bjtcclxuXHJcbi8vIGludGVyZmFjZXNcclxuZXhwb3J0IHR5cGUgSTE4Tk9wdGlvbnMgPSBfaTE4bi5JMThOT3B0aW9ucztcclxuIiwiLy8vIDxhbWQtZGVwZW5kZW5jeSBwYXRoPVwiY2RwLmZyYW1ld29yay5qcW1cIiAvPlxyXG5cclxuLy8gQ0RQIG1ldGhvZHNcclxuZXhwb3J0IGxldCB3YWl0Rm9yRGV2aWNlUmVhZHkgICA9IENEUC53YWl0Rm9yRGV2aWNlUmVhZHk7XHJcbmV4cG9ydCBsZXQgc2V0QmFja0J1dHRvbkhhbmRsZXIgPSBDRFAuc2V0QmFja0J1dHRvbkhhbmRsZXI7XHJcbiIsImV4cG9ydCAqIGZyb20gXCIuL2NvcmUvY29yZVwiO1xyXG5leHBvcnQgKiBmcm9tIFwiLi9jb3JlL3Byb21pc2VcIjtcclxuZXhwb3J0ICogZnJvbSBcIi4vY29yZS9pMThuXCI7XHJcbmV4cG9ydCAqIGZyb20gXCIuL2NvcmUvZnJhbWV3b3JrLmpxbVwiO1xyXG4iLCJpbXBvcnQgX2ZyYW1ld29yayA9IHJlcXVpcmUoXCJjZHAuZnJhbWV3b3JrLmpxbVwiKTtcclxuXHJcbi8vIEBjbGFzcyBQYXRjaFxyXG5leHBvcnQgdHlwZSBQYXRjaCA9IENEUC5GcmFtZXdvcmsuUGF0Y2g7XHJcbmV4cG9ydCBsZXQgIFBhdGNoID0gX2ZyYW1ld29yay5QYXRjaDtcclxuXHJcbi8vIEBtb2R1bGUgUGxhdGZvcm1cclxuZXhwb3J0IGxldCBQbGF0Zm9ybSA9IF9mcmFtZXdvcmsuUGxhdGZvcm07XHJcblxyXG4vLyBGcmFtZXdvcmsgbWV0aG9kc1xyXG5leHBvcnQgbGV0IGdldE9yaWVudGF0aW9uICAgICAgICAgICAgICAgPSBfZnJhbWV3b3JrLmdldE9yaWVudGF0aW9uO1xyXG5leHBvcnQgbGV0IHRvVXJsICAgICAgICAgICAgICAgICAgICAgICAgPSBfZnJhbWV3b3JrLnRvVXJsO1xyXG5leHBvcnQgbGV0IHNldEJlZm9yZVJvdXRlQ2hhbmdlSGFuZGxlciAgPSBfZnJhbWV3b3JrLnNldEJlZm9yZVJvdXRlQ2hhbmdlSGFuZGxlcjtcclxuXHJcbi8vIEBjbGFzcyBSb3V0ZXJcclxuZXhwb3J0IHR5cGUgUm91dGVyID0gQ0RQLkZyYW1ld29yay5Sb3V0ZXI7XHJcbmV4cG9ydCBsZXQgIFJvdXRlciA9IF9mcmFtZXdvcmsuUm91dGVyO1xyXG5cclxuLy8gRnJhbWV3b3JrIENvcmUgQVBJc1xyXG5leHBvcnQgbGV0IGluaXRpYWxpemUgICAgICAgICAgICAgICAgICAgICAgICAgICA9IF9mcmFtZXdvcmsuaW5pdGlhbGl6ZTtcclxuZXhwb3J0IGxldCBpc0luaXRpYWxpemVkICAgICAgICAgICAgICAgICAgICAgICAgPSBfZnJhbWV3b3JrLmlzSW5pdGlhbGl6ZWQ7XHJcbmV4cG9ydCBsZXQgd2FpdEZvckluaXRpYWxpemUgICAgICAgICAgICAgICAgICAgID0gX2ZyYW1ld29yay53YWl0Rm9ySW5pdGlhbGl6ZTtcclxuZXhwb3J0IGxldCByZWdpc3Rlck9yaWVudGF0aW9uQ2hhbmdlZExpc3RlbmVyICAgPSBfZnJhbWV3b3JrLnJlZ2lzdGVyT3JpZW50YXRpb25DaGFuZ2VkTGlzdGVuZXI7XHJcbmV4cG9ydCBsZXQgdW5yZWdpc3Rlck9yaWVudGF0aW9uQ2hhbmdlZExpc3RlbmVyID0gX2ZyYW1ld29yay51bnJlZ2lzdGVyT3JpZW50YXRpb25DaGFuZ2VkTGlzdGVuZXI7XHJcbmV4cG9ydCBsZXQgc2V0dXBFdmVudEhhbmRsZXJzICAgICAgICAgICAgICAgICAgID0gX2ZyYW1ld29yay5zZXR1cEV2ZW50SGFuZGxlcnM7XHJcbmV4cG9ydCBsZXQgc2V0QWN0aXZlUGFnZSAgICAgICAgICAgICAgICAgICAgICAgID0gX2ZyYW1ld29yay5zZXRBY3RpdmVQYWdlO1xyXG5leHBvcnQgbGV0IGdldERlZmF1bHRDbGlja0V2ZW50ICAgICAgICAgICAgICAgICA9IF9mcmFtZXdvcmsuZ2V0RGVmYXVsdENsaWNrRXZlbnQ7XHJcblxyXG4vLyBAY2xhc3MgUGFnZVxyXG5leHBvcnQgdHlwZSBQYWdlID0gQ0RQLkZyYW1ld29yay5QYWdlO1xyXG5leHBvcnQgbGV0ICBQYWdlID0gX2ZyYW1ld29yay5QYWdlO1xyXG5cclxuLy8gaW50ZXJmYWNlc1xyXG5leHBvcnQgdHlwZSBPcmllbnRhdGlvbiAgICAgICAgID0gQ0RQLkZyYW1ld29yay5PcmllbnRhdGlvbjtcclxuZXhwb3J0IHR5cGUgSVBhZ2UgICAgICAgICAgICAgICA9IENEUC5GcmFtZXdvcmsuSVBhZ2U7XHJcbmV4cG9ydCB0eXBlIFNob3dFdmVudERhdGEgICAgICAgPSBDRFAuRnJhbWV3b3JrLlNob3dFdmVudERhdGE7XHJcbmV4cG9ydCB0eXBlIEhpZGVFdmVudERhdGEgICAgICAgPSBDRFAuRnJhbWV3b3JrLkhpZGVFdmVudERhdGE7XHJcbmV4cG9ydCB0eXBlIEZyYW1ld29ya09wdGlvbnMgICAgPSBDRFAuRnJhbWV3b3JrLkZyYW1ld29ya09wdGlvbnM7XHJcbiIsImV4cG9ydCAqIGZyb20gXCIuL2ZyYW1ld29yay9qcW1cIjtcclxuIiwiaW1wb3J0IF90b29scyA9IHJlcXVpcmUoXCJjZHAudG9vbHNcIik7XHJcblxyXG4vLyBAbW9kdWxlIEJsb2JcclxuZXhwb3J0IG1vZHVsZSBCbG9iIHtcclxuICAgIC8vIEJsb2IgbWV0aG9kc1xyXG4gICAgZXhwb3J0IGxldCBhcnJheUJ1ZmZlclRvQmxvYiAgICA9IF90b29scy5CbG9iLmFycmF5QnVmZmVyVG9CbG9iO1xyXG4gICAgZXhwb3J0IGxldCBiYXNlNjRUb0Jsb2IgICAgICAgICA9IF90b29scy5CbG9iLmJhc2U2NFRvQmxvYjtcclxuICAgIGV4cG9ydCBsZXQgYmFzZTY0VG9BcnJheUJ1ZmZlciAgPSBfdG9vbHMuQmxvYi5iYXNlNjRUb0FycmF5QnVmZmVyO1xyXG4gICAgZXhwb3J0IGxldCBiYXNlNjRUb1VpbnQ4QXJyYXkgICA9IF90b29scy5CbG9iLmJhc2U2NFRvVWludDhBcnJheTtcclxuICAgIGV4cG9ydCBsZXQgYXJyYXlCdWZmZXJUb0Jhc2U2NCAgPSBfdG9vbHMuQmxvYi5hcnJheUJ1ZmZlclRvQmFzZTY0O1xyXG4gICAgZXhwb3J0IGxldCB1aW50OEFycmF5VG9CYXNlNjQgICA9IF90b29scy5CbG9iLnVpbnQ4QXJyYXlUb0Jhc2U2NDtcclxuICAgIC8vIEJsb2Igc3R1ZmZcclxuICAgIGV4cG9ydCBsZXQgVVJMID0gX3Rvb2xzLkJsb2IuVVJMO1xyXG59XHJcblxyXG4vLyBAY2xhc3MgRGF0ZVRpbWVcclxuZXhwb3J0IHR5cGUgRGF0ZVRpbWUgPSBDRFAuVG9vbHMuRGF0ZVRpbWU7XHJcbmV4cG9ydCBsZXQgIERhdGVUaW1lID0gX3Rvb2xzLkRhdGVUaW1lO1xyXG5cclxuLy8gVG9vbHMgQVBJc1xyXG5leHBvcnQgbGV0IGFicyAgICAgICAgICAgICAgICAgID0gX3Rvb2xzLmFicztcclxuZXhwb3J0IGxldCBtYXggICAgICAgICAgICAgICAgICA9IF90b29scy5tYXg7XHJcbmV4cG9ydCBsZXQgbWluICAgICAgICAgICAgICAgICAgPSBfdG9vbHMubWluO1xyXG5leHBvcnQgbGV0IGF3YWl0ICAgICAgICAgICAgICAgID0gX3Rvb2xzLmF3YWl0O1xyXG5leHBvcnQgbGV0IHRvWmVyb1BhZGRpbmcgICAgICAgID0gX3Rvb2xzLnRvWmVyb1BhZGRpbmc7XHJcbmV4cG9ydCBsZXQgaW5oZXJpdCAgICAgICAgICAgICAgPSBfdG9vbHMuaW5oZXJpdDtcclxuZXhwb3J0IGxldCBtaXhpbiAgICAgICAgICAgICAgICA9IF90b29scy5taXhpbjtcclxuZXhwb3J0IGxldCBleHRlbmQgICAgICAgICAgICAgICA9IF90b29scy5leHRlbmQ7XHJcbmV4cG9ydCBsZXQgZ2V0RGV2aWNlUGl4Y2VsUmF0aW8gPSBfdG9vbHMuZ2V0RGV2aWNlUGl4Y2VsUmF0aW87XHJcbmV4cG9ydCBsZXQgZG9Xb3JrICAgICAgICAgICAgICAgPSBfdG9vbHMuZG9Xb3JrO1xyXG5cclxuLy8gQGNsYXNzIFRlbXBsYXRlXHJcbmV4cG9ydCB0eXBlIFRlbXBsYXRlID0gQ0RQLlRvb2xzLlRlbXBsYXRlO1xyXG5leHBvcnQgbGV0ICBUZW1wbGF0ZSA9IF90b29scy5UZW1wbGF0ZTtcclxuXHJcbi8vIGludGVyZmFjZXNcclxuZXhwb3J0IHR5cGUgSlNUID0gQ0RQLlRvb2xzLkpTVDtcclxuIiwiZXhwb3J0ICogZnJvbSBcIi4vdG9vbHMvdG9vbHNcIjtcclxuIiwiaW1wb3J0IF91aSA9IHJlcXVpcmUoXCJjZHAudWkubGlzdHZpZXdcIik7XHJcblxyXG4vLyBnbG9iYWwgY29uZmlnXHJcbmV4cG9ydCBsZXQgTGlzdFZpZXdHbG9iYWxDb25maWcgPSBfdWkuTGlzdFZpZXdHbG9iYWxDb25maWc7XHJcblxyXG4vLyBAY2xhc3MgTGluZVByb2ZpbGVcclxuZXhwb3J0IHR5cGUgTGluZVByb2ZpbGUgPSBDRFAuVUkuTGluZVByb2ZpbGU7XHJcbmV4cG9ydCBsZXQgIExpbmVQcm9maWxlID0gX3VpLkxpbmVQcm9maWxlO1xyXG5cclxuLy8gQGNsYXNzIEdyb3VwUHJvZmlsZVxyXG5leHBvcnQgdHlwZSBHcm91cFByb2ZpbGUgPSBDRFAuVUkuR3JvdXBQcm9maWxlO1xyXG5leHBvcnQgbGV0ICBHcm91cFByb2ZpbGUgPSBfdWkuR3JvdXBQcm9maWxlO1xyXG5cclxuLy8gTGlzdFZpZXcgQVBJc1xyXG5leHBvcnQgbGV0IGNvbXBvc2VWaWV3cyA9IF91aS5jb21wb3NlVmlld3M7XHJcbmV4cG9ydCBsZXQgZGVyaXZlVmlld3MgID0gX3VpLmRlcml2ZVZpZXdzO1xyXG5leHBvcnQgbGV0IG1peGluVmlld3MgICA9IF91aS5taXhpblZpZXdzO1xyXG5cclxuLy8gQGNsYXNzIFN0YXR1c01hbmFnZXJcclxuZXhwb3J0IHR5cGUgU3RhdHVzTWFuYWdlciA9IENEUC5VSS5TdGF0dXNNYW5hZ2VyO1xyXG5leHBvcnQgbGV0ICBTdGF0dXNNYW5hZ2VyID0gX3VpLlN0YXR1c01hbmFnZXI7XHJcblxyXG4vLyBAY2xhc3MgUGFnZVByb2ZpbGVcclxuZXhwb3J0IHR5cGUgUGFnZVByb2ZpbGUgPSBDRFAuVUkuUGFnZVByb2ZpbGU7XHJcbmV4cG9ydCBsZXQgIFBhZ2VQcm9maWxlID0gX3VpLlBhZ2VQcm9maWxlO1xyXG5cclxuLy8gQGNsYXNzIFNjcm9sbGVyRWxlbWVudFxyXG5leHBvcnQgdHlwZSBTY3JvbGxlckVsZW1lbnQgPSBDRFAuVUkuU2Nyb2xsZXJFbGVtZW50O1xyXG5leHBvcnQgbGV0ICBTY3JvbGxlckVsZW1lbnQgPSBfdWkuU2Nyb2xsZXJFbGVtZW50O1xyXG5cclxuLy8gQGNsYXNzIFNjcm9sbGVyTmF0aXZlXHJcbmV4cG9ydCBsZXQgU2Nyb2xsZXJOYXRpdmUgPSBfdWkuU2Nyb2xsZXJOYXRpdmU7XHJcblxyXG4vLyBAY2xhc3MgU2Nyb2xsZXJJU2Nyb2xsXHJcbmV4cG9ydCB0eXBlIFNjcm9sbGVySVNjcm9sbCA9IENEUC5VSS5TY3JvbGxlcklTY3JvbGw7XHJcbmV4cG9ydCBsZXQgIFNjcm9sbGVySVNjcm9sbCA9IF91aS5TY3JvbGxlcklTY3JvbGw7XHJcblxyXG4vLyBAY2xhc3MgTGlzdEl0ZW1WaWV3XHJcbmV4cG9ydCB0eXBlIExpc3RJdGVtVmlldzxUTW9kZWwgZXh0ZW5kcyBCYWNrYm9uZS5Nb2RlbD4gPSBDRFAuVUkuTGlzdEl0ZW1WaWV3PFRNb2RlbD47XHJcbmV4cG9ydCBsZXQgIExpc3RJdGVtVmlldyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPSBfdWkuTGlzdEl0ZW1WaWV3O1xyXG5cclxuLy8gQGNsYXNzIFNjcm9sbE1hbmFnZXJcclxuZXhwb3J0IHR5cGUgU2Nyb2xsTWFuYWdlciA9IENEUC5VSS5TY3JvbGxNYW5hZ2VyO1xyXG5leHBvcnQgbGV0ICBTY3JvbGxNYW5hZ2VyID0gX3VpLlNjcm9sbE1hbmFnZXI7XHJcblxyXG4vLyBAY2xhc3MgTGlzdFZpZXdcclxuZXhwb3J0IHR5cGUgTGlzdFZpZXc8VE1vZGVsIGV4dGVuZHMgQmFja2JvbmUuTW9kZWw+ID0gQ0RQLlVJLkxpc3RWaWV3PFRNb2RlbD47XHJcbmV4cG9ydCBsZXQgIExpc3RWaWV3ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA9IF91aS5MaXN0VmlldztcclxuXHJcbi8vIEBjbGFzcyBHcm91cExpc3RJdGVtVmlld1xyXG5leHBvcnQgdHlwZSBHcm91cExpc3RJdGVtVmlldzxUTW9kZWwgZXh0ZW5kcyBCYWNrYm9uZS5Nb2RlbD4gPSBDRFAuVUkuR3JvdXBMaXN0SXRlbVZpZXc8VE1vZGVsPjtcclxuZXhwb3J0IGxldCAgR3JvdXBMaXN0SXRlbVZpZXcgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID0gX3VpLkdyb3VwTGlzdEl0ZW1WaWV3O1xyXG5cclxuLy8gQGNsYXNzIEV4cGFuZE1hbmFnZXJcclxuZXhwb3J0IHR5cGUgRXhwYW5kTWFuYWdlciA9IENEUC5VSS5FeHBhbmRNYW5hZ2VyO1xyXG5leHBvcnQgbGV0ICBFeHBhbmRNYW5hZ2VyID0gX3VpLkV4cGFuZE1hbmFnZXI7XHJcblxyXG4vLyBAY2xhc3MgRXhwYW5kYWJsZUxpc3RWaWV3XHJcbmV4cG9ydCB0eXBlIEV4cGFuZGFibGVMaXN0VmlldzxUTW9kZWwgZXh0ZW5kcyBCYWNrYm9uZS5Nb2RlbD4gICA9IENEUC5VSS5FeHBhbmRhYmxlTGlzdFZpZXc8VE1vZGVsPjtcclxuZXhwb3J0IGxldCAgRXhwYW5kYWJsZUxpc3RWaWV3ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID0gX3VpLkV4cGFuZGFibGVMaXN0VmlldztcclxuXHJcbi8vIGludGVyZmFjZXNcclxuZXhwb3J0IHR5cGUgTGlzdFZpZXdPcHRpb25zICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA9IENEUC5VSS5MaXN0Vmlld09wdGlvbnM7XHJcbmV4cG9ydCB0eXBlIElMaXN0Vmlld0ZyYW1ld29yayAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPSBDRFAuVUkuSUxpc3RWaWV3RnJhbWV3b3JrO1xyXG5leHBvcnQgdHlwZSBJU2Nyb2xsZXIgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID0gQ0RQLlVJLklTY3JvbGxlcjtcclxuZXhwb3J0IHR5cGUgSVNjcm9sbGFibGUgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA9IENEUC5VSS5JU2Nyb2xsYWJsZTtcclxuZXhwb3J0IHR5cGUgSUJhY2t1cFJlc3RvcmUgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA9IENEUC5VSS5JQmFja3VwUmVzdG9yZTtcclxuZXhwb3J0IHR5cGUgVmlld0NvbnN0cnVjdG9yICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA9IENEUC5VSS5WaWV3Q29uc3RydWN0b3I7XHJcbmV4cG9ydCB0eXBlIElDb21wb3NhYmxlVmlldyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPSBDRFAuVUkuSUNvbXBvc2FibGVWaWV3O1xyXG5leHBvcnQgdHlwZSBJQ29tcG9zYWJsZVZpZXdTdGF0aWMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID0gQ0RQLlVJLklDb21wb3NhYmxlVmlld1N0YXRpYztcclxuZXhwb3J0IHR5cGUgVXBkYXRlSGVpZ2h0T3B0aW9ucyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA9IENEUC5VSS5VcGRhdGVIZWlnaHRPcHRpb25zO1xyXG5leHBvcnQgdHlwZSBJTGlzdEl0ZW1WaWV3ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID0gQ0RQLlVJLklMaXN0SXRlbVZpZXc7XHJcbmV4cG9ydCB0eXBlIEJhc2VMaXN0SXRlbVZpZXcgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPSBDRFAuVUkuQmFzZUxpc3RJdGVtVmlldztcclxuZXhwb3J0IHR5cGUgRW5zdXJlVmlzaWJsZU9wdGlvbnMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA9IENEUC5VSS5FbnN1cmVWaXNpYmxlT3B0aW9ucztcclxuZXhwb3J0IHR5cGUgSUxpc3RWaWV3ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA9IENEUC5VSS5JTGlzdFZpZXc7XHJcbmV4cG9ydCB0eXBlIEJhc2VMaXN0VmlldyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPSBDRFAuVUkuQmFzZUxpc3RWaWV3O1xyXG5leHBvcnQgdHlwZSBJU3RhdHVzTWFuYWdlciAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID0gQ0RQLlVJLklTdGF0dXNNYW5hZ2VyO1xyXG5leHBvcnQgdHlwZSBJRXhwYW5kTWFuYWdlciAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID0gQ0RQLlVJLklFeHBhbmRNYW5hZ2VyO1xyXG5leHBvcnQgdHlwZSBJRXhwYW5kYWJsZUxpc3RWaWV3ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID0gQ0RQLlVJLklFeHBhbmRhYmxlTGlzdFZpZXc7XHJcbmV4cG9ydCB0eXBlIEJhc2VFeHBhbmRhYmxlTGlzdFZpZXcgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPSBDRFAuVUkuQmFzZUV4cGFuZGFibGVMaXN0VmlldztcclxuZXhwb3J0IHR5cGUgTGlzdEl0ZW1WaWV3T3B0aW9uczxUTW9kZWwgZXh0ZW5kcyBCYWNrYm9uZS5Nb2RlbD4gICAgICA9IENEUC5VSS5MaXN0SXRlbVZpZXdPcHRpb25zPFRNb2RlbD47XHJcbmV4cG9ydCB0eXBlIExpc3RWaWV3Q29uc3RydWN0T3B0aW9uczxUTW9kZWwgZXh0ZW5kcyBCYWNrYm9uZS5Nb2RlbD4gPSBDRFAuVUkuTGlzdFZpZXdDb25zdHJ1Y3RPcHRpb25zPFRNb2RlbD47XHJcbmV4cG9ydCB0eXBlIEdyb3VwTGlzdEl0ZW1WaWV3T3B0aW9uczxUTW9kZWwgZXh0ZW5kcyBCYWNrYm9uZS5Nb2RlbD4gPSBDRFAuVUkuR3JvdXBMaXN0SXRlbVZpZXdPcHRpb25zPFRNb2RlbD47XHJcbiIsImltcG9ydCBfdWkgPSByZXF1aXJlKFwiY2RwLnVpLmpxbVwiKTtcclxuXHJcbi8vIEBjbGFzcyBUaGVtZVxyXG5leHBvcnQgdHlwZSBUaGVtZSAgID0gQ0RQLlVJLlRoZW1lO1xyXG5leHBvcnQgbGV0ICBUaGVtZSAgID0gX3VpLlRoZW1lO1xyXG5cclxuZXhwb3J0IHR5cGUgUGxhdGZvcm1UcmFuc2l0aW9uICA9IENEUC5VSS5QbGF0Zm9ybVRyYW5zaXRpb247XHJcbmV4cG9ydCB0eXBlIFRyYW5zaXRpb25NYXAgICAgICAgPSBDRFAuVUkuVHJhbnNpdGlvbk1hcDtcclxuXHJcbi8vIEBjbGFzcyBFeHRlbnNpb25NYW5hZ2VyXHJcbmV4cG9ydCB0eXBlIEV4dGVuc2lvbk1hbmFnZXIgICAgPSBDRFAuVUkuRXh0ZW5zaW9uTWFuYWdlcjtcclxuZXhwb3J0IGxldCBFeHRlbnNpb25NYW5hZ2VyICAgICA9IF91aS5FeHRlbnNpb25NYW5hZ2VyO1xyXG5cclxuZXhwb3J0IHR5cGUgRG9tRXh0ZW5zaW9uT3B0aW9ucyA9IENEUC5VSS5Eb21FeHRlbnNpb25PcHRpb25zO1xyXG5leHBvcnQgdHlwZSBEb21FeHRlbnNpb24gICAgICAgID0gQ0RQLlVJLkRvbUV4dGVuc2lvbjtcclxuXHJcbi8vIEBtb2R1bGUgVG9hc3RcclxuZXhwb3J0IG1vZHVsZSBUb2FzdCB7XHJcbiAgICAvLyBUb2FzdCBzdHVmZlxyXG4gICAgZXhwb3J0IGxldCBMRU5HVEhfU0hPUlQgICAgICAgICA9IF91aS5Ub2FzdC5MRU5HVEhfU0hPUlQ7XHJcbiAgICBleHBvcnQgbGV0IExFTkdUSF9MT05HICAgICAgICAgID0gX3VpLlRvYXN0LkxFTkdUSF9MT05HO1xyXG4gICAgZXhwb3J0IGxldCBTdHlsZUJ1aWxkZXJEZWZhdWx0ICA9IF91aS5Ub2FzdC5TdHlsZUJ1aWxkZXJEZWZhdWx0O1xyXG4gICAgZXhwb3J0IGxldCBzaG93ICAgICAgICAgICAgICAgICA9IF91aS5Ub2FzdC5zaG93O1xyXG4gICAgLy8gaW50ZXJmYWNlc1xyXG4gICAgZXhwb3J0IHR5cGUgT2Zmc2V0WCAgICAgICAgICAgICA9IENEUC5VSS5Ub2FzdC5PZmZzZXRYO1xyXG4gICAgZXhwb3J0IHR5cGUgT2Zmc2V0WSAgICAgICAgICAgICA9IENEUC5VSS5Ub2FzdC5PZmZzZXRZO1xyXG4gICAgZXhwb3J0IHR5cGUgU3R5bGVCdWlsZGVyICAgICAgICA9IENEUC5VSS5Ub2FzdC5TdHlsZUJ1aWxkZXI7XHJcbn1cclxuXHJcbi8vIEBjbGFzcyBEaWFsb2dcclxuZXhwb3J0IHR5cGUgRGlhbG9nID0gQ0RQLlVJLkRpYWxvZztcclxuZXhwb3J0IGxldCAgRGlhbG9nID0gX3VpLkRpYWxvZztcclxuXHJcbmV4cG9ydCB0eXBlIERpYWxvZ09wdGlvbnMgPSBDRFAuVUkuRGlhbG9nT3B0aW9ucztcclxuXHJcbi8vIEBmdW5jdGlvbnMgRGlhbG9nQ29tbW9uc1xyXG5leHBvcnQgbGV0IGFsZXJ0ICAgID0gX3VpLmFsZXJ0O1xyXG5leHBvcnQgbGV0IGNvbmZpcm0gID0gX3VpLmNvbmZpcm07XHJcbmV4cG9ydCBsZXQgcHJvbXB0ICAgPSBfdWkucHJvbXB0O1xyXG5cclxuLy8gQGNsYXNzIEJhc2VIZWFkZXJWaWV3XHJcbmV4cG9ydCB0eXBlIEJhc2VIZWFkZXJWaWV3PFRNb2RlbCBleHRlbmRzIEJhY2tib25lLk1vZGVsPiAgID0gQ0RQLlVJLkJhc2VIZWFkZXJWaWV3PFRNb2RlbD47XHJcbmV4cG9ydCBsZXQgQmFzZUhlYWRlclZpZXcgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID0gX3VpLkJhc2VIZWFkZXJWaWV3O1xyXG5cclxuZXhwb3J0IHR5cGUgQmFzZUhlYWRlclZpZXdPcHRpb25zPFRNb2RlbCBleHRlbmRzIEJhY2tib25lLk1vZGVsPiA9IENEUC5VSS5CYXNlSGVhZGVyVmlld09wdGlvbnM8VE1vZGVsPjtcclxuXHJcblxyXG4vLyBAY2xhc3MgQmFzZVBhZ2VcclxuZXhwb3J0IHR5cGUgQmFzZVBhZ2U8VE1vZGVsIGV4dGVuZHMgQmFja2JvbmUuTW9kZWw+ID0gQ0RQLlVJLkJhc2VQYWdlPFRNb2RlbD47XHJcbmV4cG9ydCBsZXQgQmFzZVBhZ2UgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA9IF91aS5CYXNlUGFnZTtcclxuXHJcbmV4cG9ydCB0eXBlIEJhc2VQYWdlT3B0aW9uczxUTW9kZWwgZXh0ZW5kcyBCYWNrYm9uZS5Nb2RlbD4gID0gQ0RQLlVJLkJhc2VQYWdlT3B0aW9uczxUTW9kZWw+O1xyXG5leHBvcnQgdHlwZSBCYXNlUGFnZVZpZXcgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA9IENEUC5VSS5CYXNlUGFnZVZpZXc7XHJcblxyXG4vLyBAY2xhc3MgUGFnZUNvbnRhaW5lclZpZXdcclxuZXhwb3J0IHR5cGUgUGFnZUNvbnRhaW5lclZpZXc8VE1vZGVsIGV4dGVuZHMgQmFja2JvbmUuTW9kZWw+ICAgID0gQ0RQLlVJLlBhZ2VDb250YWluZXJWaWV3PFRNb2RlbD47XHJcbmV4cG9ydCBsZXQgIFBhZ2VDb250YWluZXJWaWV3ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA9IF91aS5QYWdlQ29udGFpbmVyVmlldztcclxuXHJcbmV4cG9ydCB0eXBlIFBhZ2VDb250YWluZXJPcHRpb25zPFRNb2RlbCBleHRlbmRzIEJhY2tib25lLk1vZGVsPiA9IENEUC5VSS5QYWdlQ29udGFpbmVyT3B0aW9uczxUTW9kZWw+O1xyXG5cclxuXHJcbi8vIEBjbGFzcyBQYWdlVmlld1xyXG5leHBvcnQgdHlwZSBQYWdlVmlldzxUTW9kZWwgZXh0ZW5kcyBCYWNrYm9uZS5Nb2RlbD4gPSBDRFAuVUkuUGFnZVZpZXc8VE1vZGVsPjtcclxuZXhwb3J0IGxldCAgUGFnZVZpZXcgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID0gX3VpLlBhZ2VWaWV3O1xyXG5cclxuZXhwb3J0IHR5cGUgUGFnZVZpZXdDb25zdHJ1Y3RPcHRpb25zPFRNb2RlbCBleHRlbmRzIEJhY2tib25lLk1vZGVsPiA9IENEUC5VSS5QYWdlVmlld0NvbnN0cnVjdE9wdGlvbnM8VE1vZGVsPjtcclxuXHJcbi8vIEBjbGFzcyBQYWdlTGlzdFZpZXdcclxuZXhwb3J0IHR5cGUgUGFnZUxpc3RWaWV3PFRNb2RlbCBleHRlbmRzIEJhY2tib25lLk1vZGVsPiA9IENEUC5VSS5QYWdlTGlzdFZpZXc8VE1vZGVsPjtcclxuZXhwb3J0IGxldCAgUGFnZUxpc3RWaWV3ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA9IF91aS5QYWdlTGlzdFZpZXc7XHJcblxyXG5leHBvcnQgdHlwZSBQYWdlTGlzdFZpZXdDb25zdHJ1Y3RPcHRpb25zPFRNb2RlbCBleHRlbmRzIEJhY2tib25lLk1vZGVsPiA9IENEUC5VSS5QYWdlTGlzdFZpZXdDb25zdHJ1Y3RPcHRpb25zPFRNb2RlbD47XHJcblxyXG4vLyBAY2xhc3MgUGFnZUV4cGFuZGFibGVMaXN0Vmlld1xyXG5leHBvcnQgdHlwZSBQYWdlRXhwYW5kYWJsZUxpc3RWaWV3PFRNb2RlbCBleHRlbmRzIEJhY2tib25lLk1vZGVsPiAgID0gQ0RQLlVJLlBhZ2VFeHBhbmRhYmxlTGlzdFZpZXc8VE1vZGVsPjtcclxuZXhwb3J0IGxldCAgUGFnZUV4cGFuZGFibGVMaXN0VmlldyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA9IF91aS5QYWdlRXhwYW5kYWJsZUxpc3RWaWV3O1xyXG4iLCJleHBvcnQgKiBmcm9tIFwiLi91aS9saXN0dmlld1wiO1xyXG5leHBvcnQgKiBmcm9tIFwiLi91aS9qcW1cIjtcclxuIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIl9kZXYuZGVwZW5kZW5jaWVzLmQudHNcIiAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vZXh0ZXJuYWwvaW5jbHVkZS9jZHAuY29yZS5kLnRzXCIgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uL2V4dGVybmFsL2luY2x1ZGUvY2RwLnByb21pc2UuZC50c1wiIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi9leHRlcm5hbC9pbmNsdWRlL2NkcC5mcmFtZXdvcmsuanFtLmQudHNcIiAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vZXh0ZXJuYWwvaW5jbHVkZS9jZHAudG9vbHMuZC50c1wiIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi9leHRlcm5hbC9pbmNsdWRlL2NkcC51aS5saXN0dmlldy5kLnRzXCIgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uL2V4dGVybmFsL2luY2x1ZGUvY2RwLnVpLmpxbS5kLnRzXCIgLz5cclxuLy8vIDxhbWQtbW9kdWxlIG5hbWU9XCJjZHBcIiAvPlxyXG5cclxuZXhwb3J0ICogZnJvbSBcIi4vY2RwL2NvcmVcIjtcclxuXHJcbmltcG9ydCAqIGFzIEZyYW1ld29yayBmcm9tIFwiLi9jZHAvZnJhbWV3b3JrXCI7XHJcbmltcG9ydCAqIGFzIFRvb2xzIGZyb20gXCIuL2NkcC90b29sc1wiO1xyXG5pbXBvcnQgKiBhcyBVSSBmcm9tIFwiLi9jZHAvdWlcIjtcclxuXHJcbmV4cG9ydCB7IEZyYW1ld29yaywgVG9vbHMsIFVJIH07XHJcblxyXG4vLyBzaG9ydCBjdXQgZm9yIGluaXRpYWxpemUgbWV0aG9kXHJcbmV4cG9ydCBsZXQgaW5pdGlhbGl6ZSAgICAgICAgICAgPSBGcmFtZXdvcmsuaW5pdGlhbGl6ZTtcclxuZXhwb3J0IGxldCBpc0luaXRpYWxpemVkICAgICAgICA9IEZyYW1ld29yay5pc0luaXRpYWxpemVkO1xyXG5leHBvcnQgbGV0IHdhaXRGb3JJbml0aWFsaXplICAgID0gRnJhbWV3b3JrLndhaXRGb3JJbml0aWFsaXplO1xyXG4iLCJkZWNsYXJlIG1vZHVsZSBcImNkcC50b29sc1wiIHtcclxuICAgIGxldCBUb29sczogdHlwZW9mIENEUC5Ub29scztcclxuICAgIGV4cG9ydCA9IFRvb2xzO1xyXG59XHJcbiIsImRlY2xhcmUgbW9kdWxlIFwiY2RwLnVpLmpxbVwiIHtcclxuICAgIGxldCBVSTogdHlwZW9mIENEUC5VSTtcclxuICAgIGV4cG9ydCA9IFVJO1xyXG59XHJcbiJdfQ==