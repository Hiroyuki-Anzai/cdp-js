/*!
 * @cdp/mobile 2.0.0
 *
 * Date: 2017-07-24T07:29:22.694Z
 *
 * including:
 *     @cdp/core 2.0.0
 *     @cdp/promise 2.0.0
 *     @cdp/nativebridge 2.0.0
 *     @cdp/i18n 2.0.0
 *     @cdp/framework-jqm 2.0.0
 *     @cdp/tools 2.0.0
 *     @cdp/ui-listview 2.0.0
 *     @cdp/ui-jqm 2.0.0
 */

//======================================================//

/*!
 * cdp.core.js 2.0.0
 *
 * Date: 2017-07-24T07:24:27.150Z
 */
(function (root, factory) { if (typeof define === "function" && define.amd) { define("cdp.core",[],function () { return factory(root.CDP || (root.CDP = {})); }); } else if (typeof exports === "object") { module.exports = factory(root.CDP || (root.CDP = {})); } else { factory(root.CDP || (root.CDP = {})); } }(((this || 0).self || global), function (CDP) {
var CDP;
(function (CDP) {
    var TAG = "[CDP] ";
    /**
     * システムの global オブジェクトにアクセス
     * 通常は Window オブジェクトとなる
     */
    CDP.global = Function("return this")();
    /**
     * Web root location にアクセス
     */
    CDP.webRoot = (function () {
        if (CDP.global.location) {
            var baseUrl = /(.+\/)[^/]*#[^/]+/.exec(CDP.global.location.href);
            if (!baseUrl) {
                baseUrl = /(.+\/)/.exec(CDP.global.location.href);
            }
            return baseUrl[1];
        }
    })();
    /**
     * Config オブジェクトにアクセス
     */
    CDP.Config = CDP.Config || CDP.global.Config || {};
    /**
     * core の初期化
     */
    function initialize(options) {
        setTimeout(function () {
            try {
                CDP.Patch.apply();
                if (options && typeof options.success === "function") {
                    options.success();
                }
            }
            catch (error) {
                var errorInfo = CDP.makeErrorInfo(CDP.RESULT_CODE.ERROR_CDP_INITIALIZE_FAILED, TAG, (error && error.message) ? error.message : null, error);
                console.error(errorInfo.message);
                if (options && typeof options.fail === "function") {
                    options.fail(error);
                }
            }
        });
    }
    CDP.initialize = initialize;
})(CDP || (CDP = {}));
var CDP;
(function (CDP) {
    var TAG = "[CDP.Patch] ";
    /**
     * @class Patch
     * @brief 実行環境用 Patch 適用ユーティリティクラス
     */
    var Patch = (function () {
        function Patch() {
        }
        ///////////////////////////////////////////////////////////////////////
        // public static methods:
        /**
         * パッチの適用
         */
        Patch.apply = function () {
            Patch.consolePatch();
            Patch.nodePatch();
        };
        ///////////////////////////////////////////////////////////////////////
        // private static methods:
        // console 用 patch
        Patch.consolePatch = function () {
            if (null == CDP.global.console || null == CDP.global.console.error) {
                CDP.global.console = {
                    count: function () { },
                    groupEnd: function () { },
                    time: function () { },
                    timeEnd: function () { },
                    trace: function () { },
                    group: function () { },
                    dirxml: function () { },
                    debug: function () { },
                    groupCollapsed: function () { },
                    select: function () { },
                    info: function () { },
                    profile: function () { },
                    assert: function () { },
                    msIsIndependentlyComposed: function () { },
                    clear: function () { },
                    dir: function () { },
                    warn: function () { },
                    error: function () { },
                    log: function () { },
                    profileEnd: function () { }
                };
            }
        };
        // WinRT 用 patch
        Patch.nodePatch = function () {
            if ("object" === typeof MSApp) {
                var _MSApp_1 = MSApp;
                var originalAppendChild_1 = Node.prototype.appendChild;
                Node.prototype.appendChild = function (node) {
                    var self = this;
                    return _MSApp_1.execUnsafeLocalFunction(function () {
                        return originalAppendChild_1.call(self, node);
                    });
                };
                var originalInsertBefore_1 = Node.prototype.insertBefore;
                Node.prototype.insertBefore = function (newElement, referenceElement) {
                    var self = this;
                    return _MSApp_1.execUnsafeLocalFunction(function () {
                        return originalInsertBefore_1.call(self, newElement, referenceElement);
                    });
                };
            }
        };
        return Patch;
    }());
    CDP.Patch = Patch;
})(CDP || (CDP = {}));
var __assign = (this && this.__assign) || Object.assign || function(t) {
    for (var s, i = 1, n = arguments.length; i < n; i++) {
        s = arguments[i];
        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))
            t[p] = s[p];
    }
    return t;
};
var CDP;
(function (CDP) {
    var CANCELED_MESSAGE = "abort";
    var s_code2message = {
        "0": "operation succeeded.",
        "-1": "operation failed."
    };
    ///////////////////////////////////////////////////////////////////////
    // error utilities:
    /**
     * @enum  RESULT_CODE
     * @brief アプリケーション全体で使用する共通エラーコード定義
     */
    var RESULT_CODE;
    (function (RESULT_CODE) {
        RESULT_CODE[RESULT_CODE["SUCCEEDED"] = 0] = "SUCCEEDED";
        RESULT_CODE[RESULT_CODE["FAILED"] = -1] = "FAILED";
    })(RESULT_CODE = CDP.RESULT_CODE || (CDP.RESULT_CODE = {}));
    // ローカルリザルトコードのアサイン可能数
    CDP.MODULE_RESULT_CODE_RANGE = 1000;
    /**
     * エラー情報がキャンセルされたものか判定
     *
     * @param error [in] エラー情報
     * @returns true: キャンセル / false: その他エラー
     */
    function isCanceledError(error) {
        var errorInfo = error;
        if (errorInfo) {
            if (RESULT_CODE.SUCCEEDED === errorInfo.code || CANCELED_MESSAGE === errorInfo.message) {
                return true;
            }
        }
        return false;
    }
    CDP.isCanceledError = isCanceledError;
    /**
     * エラー情報生成
     *
     * @param resultCode [in] RESULT_CODE を指定
     * @param [tag]      [in] TAG を指定
     * @param [message]  [in] メッセージを指定
     * @param [cause]    [in] 下位のエラーを指定
     * @returns エラーオブジェクト
     */
    function makeErrorInfo(resultCode, tag, message, cause) {
        var canceled = (cause && CANCELED_MESSAGE === cause.message) ? true : false;
        var msg = canceled ? CANCELED_MESSAGE : message;
        var code = canceled ? RESULT_CODE.SUCCEEDED : resultCode;
        return __assign({}, new Error(msg || messageFromResultCode(code)), {
            name: buildErrorName(code, tag),
            code: code,
            cause: cause,
        });
    }
    CDP.makeErrorInfo = makeErrorInfo;
    /**
     * @enum  RESULT_CODE_BASE
     * @brief リザルトコードのオフセット値
     *        エラーコード対応するモジュール内で 定義を拡張する.
     */
    var RESULT_CODE_BASE;
    (function (RESULT_CODE_BASE) {
        RESULT_CODE_BASE[RESULT_CODE_BASE["RESULT_CODE_BASE_DECLARATION"] = 0] = "RESULT_CODE_BASE_DECLARATION";
        //      MODULE_A = 1 * MODULE_RESULT_CODE_RANGE, // ex) moduleA: 1001 ～ 1999
        //      MODULE_B = 2 * MODULE_RESULT_CODE_RANGE, // ex) moduleB: 2001 ～ 2999
        //      MODULE_C = 3 * MODULE_RESULT_CODE_RANGE, // ex) moduleC: 3001 ～ 3999
        RESULT_CODE_BASE[RESULT_CODE_BASE["CDP"] = 101 * CDP.MODULE_RESULT_CODE_RANGE] = "CDP";
    })(RESULT_CODE_BASE = CDP.RESULT_CODE_BASE || (CDP.RESULT_CODE_BASE = {}));
    ASSIGN_RESULT_CODE_BASE(RESULT_CODE_BASE);
    // エラーコード生成
    function DECLARE_ERROR_CODE(baseName, localCode, message) {
        return declareResultCode(RESULT_CODE_BASE[baseName], localCode, message);
    }
    CDP.DECLARE_ERROR_CODE = DECLARE_ERROR_CODE;
    /**
     * RESULT_CODE_BASE のアサイン
     */
    function ASSIGN_RESULT_CODE_BASE(resultCodeBase) {
        CDP.RESULT_CODE_BASE = __assign({}, CDP.RESULT_CODE_BASE, resultCodeBase);
    }
    CDP.ASSIGN_RESULT_CODE_BASE = ASSIGN_RESULT_CODE_BASE;
    /**
     * RESULT_CODE のアサイン
     */
    function ASSIGN_RESULT_CODE(resultCode) {
        CDP.RESULT_CODE = __assign({}, CDP.RESULT_CODE, resultCode);
    }
    CDP.ASSIGN_RESULT_CODE = ASSIGN_RESULT_CODE;
    ///////////////////////////////////////////////////////////////////////
    // module error declaration:
    var FUNCTION_CODE_RANGE = 10;
    /**
     * @enum  LOCAL_CODE_BASE
     * @brief cdp.core 内のローカルコードオフセット値
     */
    var LOCAL_CODE_BASE;
    (function (LOCAL_CODE_BASE) {
        LOCAL_CODE_BASE[LOCAL_CODE_BASE["CORE"] = 0] = "CORE";
        LOCAL_CODE_BASE[LOCAL_CODE_BASE["PATCH"] = 1 * FUNCTION_CODE_RANGE] = "PATCH";
    })(LOCAL_CODE_BASE || (LOCAL_CODE_BASE = {}));
    /**
     * @enum  RESULT_CODE
     * @brief FES.Utils のエラーコード定義
     *        モジュール別に拡張可能
     */
    (function (RESULT_CODE) {
        RESULT_CODE[RESULT_CODE["RESULT_CODE_DECLARATION"] = 0] = "RESULT_CODE_DECLARATION";
        RESULT_CODE[RESULT_CODE["ERROR_CDP_INITIALIZE_FAILED"] = DECLARE_ERROR_CODE("CDP", LOCAL_CODE_BASE.CORE + 1, "initialized failed.")] = "ERROR_CDP_INITIALIZE_FAILED";
    })(RESULT_CODE = CDP.RESULT_CODE || (CDP.RESULT_CODE = {}));
    ASSIGN_RESULT_CODE_BASE(RESULT_CODE);
    ///////////////////////////////////////////////////////////////////////
    // private static methods:
    /**
     * リザルトコードの登録
     *
     * @param base       [in] RESULT_CODE_BASE を指定
     * @param moduleCode [in] モジュールで一意になる数値 (0 < localCode < 1000)
     * @param [message]  [in] リザルトコードに紐づくメッセージ
     * @returns リザルトコード
     */
    function declareResultCode(base, moduleCode, message) {
        if (moduleCode <= 0 || CDP.MODULE_RESULT_CODE_RANGE <= moduleCode) {
            console.error("declareResultCode(), invalid localCode range. [localCode: " + moduleCode + "]");
            return;
        }
        var resultCode = base + moduleCode;
        s_code2message[resultCode] = message ? message : ("[RESULT_CODE: " + resultCode + "]");
        return resultCode;
    }
    /**
     * リザルトコードから登録されているメッセージを取得
     *
     * @param resultCode [in] リザルトコード
     * @returns エラーメッセージ
     */
    function messageFromResultCode(resultCode) {
        if (s_code2message[resultCode]) {
            return s_code2message[resultCode];
        }
        else {
            return "unregistered result code. [RESULT_CODE: " + resultCode + "]";
        }
    }
    /**
     * リザルトコードから登録されているリザルトコード文字列を取得
     *
     * @param resultCode [in] リザルトコード
     * @param tag        [in] TAG を指定
     * @returns リザルトコード識別文字列
     */
    function buildErrorName(resultCode, tag) {
        var prefix = tag || "";
        if (RESULT_CODE[resultCode]) {
            return prefix + RESULT_CODE[resultCode] + ": ";
        }
        else {
            return prefix;
        }
    }
})(CDP || (CDP = {}));

return CDP; }));
/*!
 * cdp.promise.js 2.0.0
 *
 * Date: 2017-07-24T05:03:12.598Z
 */
(function (root, factory) { if (typeof define === "function" && define.amd) { define("cdp.promise",["jquery"], function ($) { return factory(root.CDP || (root.CDP = {}), $, root); }); } else if (typeof exports === "object") { module.exports = factory(root.CDP || (root.CDP = {}), require("jquery"), root); } else { factory(root.CDP || (root.CDP = {}), root.jQuery || root.$, root); } }(((this || 0).self || global), function (CDP, $, root) {
var CDP;
(function (CDP) {
    var TAG = "[CDP.Promise] ";
    /**
     * Cancel 可能オブジェクトの作成
     *
     * @param df       [in] jQueryDeferred instance を指定
     * @param options? [in] jQueryPromise を拡張するオブジェクト or キャンセル時に呼び出される関数を指定
     * @returns {Object} Cancelable property
     */
    function makeCancelable(df, options) {
        var extendOptions;
        var cancel;
        if ("function" === typeof options) {
            cancel = options;
        }
        else {
            extendOptions = options;
            if (extendOptions && extendOptions.cancelCallback) {
                cancel = extendOptions.cancelCallback;
            }
            else {
                cancel = function () { };
            }
        }
        var _abort = function (info) {
            var detail = info ? info : { message: "abort" };
            cancel(detail);
            if (null != this.dependency) {
                if (this.dependency.abort) {
                    this.dependency.abort(detail);
                }
                else {
                    console.error(TAG + "[call] dependency object doesn't have 'abort()' method.");
                }
                if (this.callReject && "pending" === this.state()) {
                    df.reject(detail);
                }
            }
            else if ("pending" === this.state()) {
                df.reject(detail);
            }
        };
        var _dependOn = function (promise) {
            var _this = this;
            if (promise.abort) {
                this.dependency = promise;
                promise
                    .always(function () {
                    _this.dependency = null;
                });
            }
            else {
                console.error(TAG + "[set] dependency object doesn't have 'abort()' method.");
            }
            return promise;
        };
        var _target = $.extend({}, {
            dependency: null,
            callReject: false,
        }, extendOptions);
        return {
            df: df,
            target: _target,
            abort: _abort,
            dependOn: _dependOn,
        };
    }
    /**
     * Promise オブジェクトの作成
     * jQueryDeferred オブジェクトから、Tools.Promise オブジェクトを作成する
     *
     * @param df       [in] jQueryDeferred instance を指定
     * @param options? [in] jQueryPromise を拡張するオブジェクト or キャンセル時に呼び出される関数を指定
     * @returns IPromise オブジェクト
     */
    function makePromise(df, options) {
        var cancelable = makeCancelable(df, options);
        var promise = df.promise(cancelable.target);
        if (null == promise.abort) {
            promise.abort = cancelable.abort.bind(promise);
        }
        if (null == promise.dependOn) {
            promise.dependOn = cancelable.dependOn.bind(promise);
        }
        return promise;
    }
    CDP.makePromise = makePromise;
    function wait() {
        var deferreds = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            deferreds[_i] = arguments[_i];
        }
        // 投入法が可変引数だった場合は配列に修正する
        var _deferreds = [].concat.apply([], deferreds);
        // 実際の作業
        var df = $.Deferred();
        var results = [];
        var initialized = false;
        var isFinished = function () {
            if (!initialized) {
                return false;
            }
            else {
                return !results.some(function (element) {
                    return "pending" === element.status;
                });
            }
        };
        _deferreds.forEach(function (deferred, index) {
            results.push({
                status: "pending",
                args: null,
            });
            deferred
                .then(function () {
                var args = [];
                for (var _i = 0; _i < arguments.length; _i++) {
                    args[_i] = arguments[_i];
                }
                results[index].status = "resolved";
                results[index].args = args;
            }, function () {
                var args = [];
                for (var _i = 0; _i < arguments.length; _i++) {
                    args[_i] = arguments[_i];
                }
                results[index].status = "rejected";
                results[index].args = args;
            })
                .always(function () {
                if (isFinished()) {
                    df.resolve(results);
                }
            });
        });
        initialized = true;
        if (isFinished()) {
            df.resolve(results);
        }
        return df.promise();
    }
    CDP.wait = wait;
    function race() {
        var deferreds = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            deferreds[_i] = arguments[_i];
        }
        var df = $.Deferred();
        var _deferreds = [].concat.apply([], deferreds);
        _deferreds.forEach(function (deferred, index) {
            deferred
                .then(function () {
                var args = [];
                for (var _i = 0; _i < arguments.length; _i++) {
                    args[_i] = arguments[_i];
                }
                if ("pending" === df.state()) {
                    df.resolve(args);
                }
            }, function () {
                var args = [];
                for (var _i = 0; _i < arguments.length; _i++) {
                    args[_i] = arguments[_i];
                }
                if ("pending" === df.state()) {
                    df.reject(args);
                }
            });
        });
        return df.promise();
    }
    CDP.race = race;
    //___________________________________________________________________________________________________________________//
    /**
     * @class PromiseManager
     * @brief 複数の DataProvider.Promise を管理するクラス
     */
    var PromiseManager = (function () {
        function PromiseManager() {
            this._pool = [];
            this._id = 0;
        }
        ///////////////////////////////////////////////////////////////////////
        // public method
        /**
         * Promise を管理下に追加
         *
         * @param promise [in] 管理対象のオブジェクト
         * @returns 引数に渡したオブジェクト
         */
        PromiseManager.prototype.add = function (promise) {
            var _this = this;
            if (promise == null) {
                return null;
            }
            // abort() を持っていない場合はエラー
            if (!promise.abort) {
                console.error(TAG + "[add] promise object doesn't have 'abort()' method.");
                return promise;
            }
            var cookie = {
                promise: promise,
                id: this._id++,
            };
            this._pool.push(cookie);
            promise
                .always(function () {
                _this._pool = _this._pool.filter(function (element) {
                    if (element.id !== cookie.id) {
                        return true;
                    }
                    else {
                        return false;
                    }
                });
            });
            return promise;
        };
        /**
         * 管理対象の Promise に対して abort を発行
         * キャンセル処理に対するキャンセルは不可
         *
         * @returns Promise オブジェクト
         */
        PromiseManager.prototype.cancel = function (info) {
            var promises = this.promises();
            promises.forEach(function (element) {
                if (element.abort) {
                    element.abort(info);
                }
            });
            return wait.apply(null, promises);
        };
        /**
         * 管理対象の Promise を配列で返す
         *
         * @returns Promise オブジェクト配列
         */
        PromiseManager.prototype.promises = function () {
            return this._pool.map(function (element) {
                return element.promise;
            });
        };
        return PromiseManager;
    }());
    CDP.PromiseManager = PromiseManager;
    //___________________________________________________________________________________________________________________//
    /**
     * @class PromiseConstructor
     * @brief ES6 Promise 互換の Promise オブジェクトコンストラクタ
     */
    var PromiseConstructor = (function () {
        /**
         * constructor
         *
         * @param executor [in] ES6 Promise 互換引数. (dependOn を第3引数に渡す)
         * @param options? [in] jQueryPromise を拡張するオブジェクト or キャンセル時に呼び出される関数を指定
         * @return IPromise オブジェクト
         */
        function PromiseConstructor(executor, options) {
            // apply mixin
            var cancelable = makeCancelable($.Deferred(), options);
            $.extend(true, this, cancelable.df, cancelable.target);
            this.abort = cancelable.abort.bind(this);
            this.dependOn = cancelable.dependOn.bind(this);
            executor(this.resolve, this.reject, this.dependOn);
        }
        ///////////////////////////////////////////////////////////////////////
        // static methods:
        PromiseConstructor.resolve = function (value) {
            return $.Deferred().resolve(value);
        };
        PromiseConstructor.reject = function (reason) {
            return $.Deferred().reject(reason);
        };
        PromiseConstructor.all = function () {
            var deferreds = [];
            for (var _i = 0; _i < arguments.length; _i++) {
                deferreds[_i] = arguments[_i];
            }
            return $.when(deferreds);
        };
        PromiseConstructor.wait = function () {
            var deferreds = [];
            for (var _i = 0; _i < arguments.length; _i++) {
                deferreds[_i] = arguments[_i];
            }
            return wait(deferreds);
        };
        PromiseConstructor.race = function () {
            var deferreds = [];
            for (var _i = 0; _i < arguments.length; _i++) {
                deferreds[_i] = arguments[_i];
            }
            return race(deferreds);
        };
        return PromiseConstructor;
    }());
    CDP.PromiseConstructor = PromiseConstructor;
    CDP.Promise = PromiseConstructor;
})(CDP || (CDP = {}));

root.Promise = root.Promise || CDP.Promise; return CDP; }));
/*!
 * cdp.i18n.js 2.0.0
 *
 * Date: 2017-07-24T05:03:48.997Z
 */

(function webpackUniversalModuleDefinition(root, factory) {
    if(typeof exports === 'object' && typeof module === 'object')
        module.exports = factory(require("jquery"), require("cdp.core"), require("cdp.promise"));
    else if(typeof define === 'function' && define.amd)
        define("cdp.i18n", ["jquery", "cdp.core", "cdp.promise"], factory);
    else if(typeof exports === 'object')
        exports["CDP"] = factory(require("jquery"), require("cdp.core"), require("cdp.promise"));
    else
        root["CDP"] = factory(root["jQuery"], root["CDP"], root["CDP"]);
})(this, function(__WEBPACK_EXTERNAL_MODULE_1__, __WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_3__) {
return /******/ (function(modules) { // webpackBootstrap
/******/     // The module cache
/******/     var installedModules = {};
/******/
/******/     // The require function
/******/     function __webpack_require__(moduleId) {
/******/
/******/         // Check if module is in cache
/******/         if(installedModules[moduleId]) {
/******/             return installedModules[moduleId].exports;
/******/         }
/******/         // Create a new module (and put it into the cache)
/******/         var module = installedModules[moduleId] = {
/******/             i: moduleId,
/******/             l: false,
/******/             exports: {}
/******/         };
/******/
/******/         // Execute the module function
/******/         modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/         // Flag the module as loaded
/******/         module.l = true;
/******/
/******/         // Return the exports of the module
/******/         return module.exports;
/******/     }
/******/
/******/
/******/     // expose the modules object (__webpack_modules__)
/******/     __webpack_require__.m = modules;
/******/
/******/     // expose the module cache
/******/     __webpack_require__.c = installedModules;
/******/
/******/     // define getter function for harmony exports
/******/     __webpack_require__.d = function(exports, name, getter) {
/******/         if(!__webpack_require__.o(exports, name)) {
/******/             Object.defineProperty(exports, name, {
/******/                 configurable: false,
/******/                 enumerable: true,
/******/                 get: getter
/******/             });
/******/         }
/******/     };
/******/
/******/     // getDefaultExport function for compatibility with non-harmony modules
/******/     __webpack_require__.n = function(module) {
/******/         var getter = module && module.__esModule ?
/******/             function getDefault() { return module['default']; } :
/******/             function getModuleExports() { return module; };
/******/         __webpack_require__.d(getter, 'a', getter);
/******/         return getter;
/******/     };
/******/
/******/     // Object.prototype.hasOwnProperty.call
/******/     __webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/     // __webpack_public_path__
/******/     __webpack_require__.p = "";
/******/
/******/     // Load entry module and return exports
/******/     return __webpack_require__(__webpack_require__.s = 0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;(function (root, factory) { if (true) { !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(1), __webpack_require__(2), __webpack_require__(3)], __WEBPACK_AMD_DEFINE_RESULT__ = function ($, CDP) { return factory($, CDP); }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
                __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__)); } else { factory(root.jQuery || root.$, root.CDP || (root.CDP = {})); } }(this, function ($, CDP) {

/* tslint:disable:max-line-length */
var CDP;
(function (CDP) {
    var Promise = CDP.Promise;
    var TAG = "[CDP.i18n] ";
    /**
     * \~english
     * initialize i18next.
     *
     * \~japanese
     * i18next の初期化
     *
     * @private
     * @returns IPromiseBase オブジェクト
     */
    function initializeI18N(settings) {
        return new Promise(function (resolve) {
            var i18nSettings = settings || {};
            var i18nOptions = (function (resources) {
                if (resources) {
                    for (var lng in resources) {
                        if (resources.hasOwnProperty(lng)) {
                            for (var ns in resources[lng]) {
                                if (resources[lng].hasOwnProperty(ns)) {
                                    resources[lng][ns] = getLocaleFallbackResource(resources[lng][ns]);
                                }
                            }
                        }
                    }
                    i18nSettings.options.resources = resources;
                    return i18nSettings.options;
                }
                else {
                    return i18nSettings.options;
                }
            })(i18nSettings.fallbackResources);
            new Promise(function(resolve) { resolve(); }).then(function() { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(4)]; (function ($18Next) {
                new Promise(function(resolve) { resolve(); }).then(function() { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [
                    __webpack_require__(5),
                    __webpack_require__(6),
                    __webpack_require__(7),
                    __webpack_require__(8),
                    __webpack_require__(9),
                ]; (function (i18next, Backend, Cache, PostProcessor, LanguageDetector) {
                    i18next
                        .use(Backend)
                        .use(Cache)
                        .use(PostProcessor)
                        .use(LanguageDetector)
                        .init(i18nOptions, function (error, t) {
                        $18Next.init(i18next, $, {
                            tName: "t",
                            i18nName: "i18n",
                            handleName: "localize",
                            selectorAttr: "data-i18n",
                            targetAttr: "i18n-target",
                            optionsAttr: "i18n-options",
                            useOptionsAttr: false,
                            parseDefaultValueFromContent: true // parses default values from content ele.val or ele.text
                        });
                        // i18next 3.4.1: resources が指定されると preload が読み込まれないため、再読み込み処理を行う.
                        if (i18next.options.resources && i18next.options.preload) {
                            // options からプロパティを一旦削除.
                            var _preload_1 = i18next.options.preload;
                            var _resources_1 = i18next.options.resources;
                            delete i18next.options.resources;
                            delete i18next.options.preload;
                            i18next.loadLanguages(_preload_1, function () {
                                // options を元に戻す
                                i18next.options.resources = _resources_1;
                                i18next.options.preload = _preload_1;
                                CDP.i18n = i18next;
                                resolve();
                            });
                        }
                        else {
                            CDP.i18n = i18next;
                            resolve();
                        }
                    });
                }.apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__));}).catch(__webpack_require__.oe);
            }.apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__));}).catch(__webpack_require__.oe);
        });
    }
    CDP.initializeI18N = initializeI18N;
    /**
     * \~english
     * get string resource for fallback.
     *
     * \~japanese
     * Fallback 用ローカライズリソースの取得
     *
     * @private
     * @returns falbakc リソースオブジェクト
     */
    function getLocaleFallbackResource(path) {
        var json;
        $.ajax({
            url: toUrl(path),
            method: "GET",
            async: false,
            dataType: "json",
            success: function (data) {
                json = data;
            },
            error: function (xhr, status) {
                console.error(TAG + "ajax request failed. status: " + status);
            }
        });
        return json;
    }
    /**
     * \~english
     * Convert path to URL.
     *
     * @param path [in] path string
     *
     * \~japanese
     * path を URL に変換
     *
     * @param path [in] パスを指定。
     */
    function toUrl(path) {
        if (!path && "/" !== path[0]) {
            console.error(TAG + "invalid path. path: " + path);
        }
        else {
            return CDP.webRoot + path.slice(1);
        }
    }
})(CDP || (CDP = {}));

return CDP; }));


/***/ }),
/* 1 */
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE_1__;

/***/ }),
/* 2 */
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE_2__;

/***/ }),
/* 3 */
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE_3__;

/***/ }),
/* 4 */
/***/ (function(module, exports, __webpack_require__) {

(function (global, factory) {
   true ? module.exports = factory() :
  typeof define === 'function' && define.amd ? define(factory) :
  (global.jqueryI18next = factory());
}(this, (function () { 'use strict';

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var defaults = {
  tName: 't',
  i18nName: 'i18n',
  handleName: 'localize',
  selectorAttr: 'data-i18n',
  targetAttr: 'i18n-target',
  optionsAttr: 'i18n-options',
  useOptionsAttr: false,
  parseDefaultValueFromContent: true
};

function init(i18next, $) {
  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};


  options = _extends({}, defaults, options);

  function parse(ele, key, opts) {
    if (key.length === 0) return;

    var attr = 'text';

    if (key.indexOf('[') === 0) {
      var parts = key.split(']');
      key = parts[1];
      attr = parts[0].substr(1, parts[0].length - 1);
    }

    if (key.indexOf(';') === key.length - 1) {
      key = key.substr(0, key.length - 2);
    }

    function extendDefault(o, val) {
      if (!options.parseDefaultValueFromContent) return o;
      return _extends({}, o, { defaultValue: val });
    }

    if (attr === 'html') {
      ele.html(i18next.t(key, extendDefault(opts, ele.html())));
    } else if (attr === 'text') {
      ele.text(i18next.t(key, extendDefault(opts, ele.text())));
    } else if (attr === 'prepend') {
      ele.prepend(i18next.t(key, extendDefault(opts, ele.html())));
    } else if (attr === 'append') {
      ele.append(i18next.t(key, extendDefault(opts, ele.html())));
    } else if (attr.indexOf('data-') === 0) {
      var dataAttr = attr.substr('data-'.length);
      var translated = i18next.t(key, extendDefault(opts, ele.data(dataAttr)));

      // we change into the data cache
      ele.data(dataAttr, translated);
      // we change into the dom
      ele.attr(attr, translated);
    } else {
      ele.attr(attr, i18next.t(key, extendDefault(opts, ele.attr(attr))));
    }
  }

  function localize(ele, opts) {
    var key = ele.attr(options.selectorAttr);
    if (!key && typeof key !== 'undefined' && key !== false) key = ele.text() || ele.val();
    if (!key) return;

    var target = ele,
        targetSelector = ele.data(options.targetAttr);

    if (targetSelector) target = ele.find(targetSelector) || ele;

    if (!opts && options.useOptionsAttr === true) opts = ele.data(options.optionsAttr);

    opts = opts || {};

    if (key.indexOf(';') >= 0) {
      var keys = key.split(';');

      $.each(keys, function (m, k) {
        if (k !== '') parse(target, k, opts);
      });
    } else {
      parse(target, key, opts);
    }

    if (options.useOptionsAttr === true) {
      var clone = {};
      clone = _extends({ clone: clone }, opts);

      delete clone.lng;
      ele.data(options.optionsAttr, clone);
    }
  }

  function handle(opts) {
    return this.each(function () {
      // localize element itself
      localize($(this), opts);

      // localize children
      var elements = $(this).find('[' + options.selectorAttr + ']');
      elements.each(function () {
        localize($(this), opts);
      });
    });
  };

  // $.t $.i18n shortcut
  $[options.tName] = i18next.t.bind(i18next);
  $[options.i18nName] = i18next;

  // selector function $(mySelector).localize(opts);
  $.fn[options.handleName] = handle;
}

var index = {
  init: init
};

return index;

})));

/***/ }),
/* 5 */
/***/ (function(module, exports, __webpack_require__) {

(function (global, factory) {
     true ? module.exports = factory() :
    typeof define === 'function' && define.amd ? define(factory) :
    (global.i18next = factory());
}(this, (function () { 'use strict';

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) {
  return typeof obj;
} : function (obj) {
  return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
};











var classCallCheck = function (instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
};









var _extends = Object.assign || function (target) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i];

    for (var key in source) {
      if (Object.prototype.hasOwnProperty.call(source, key)) {
        target[key] = source[key];
      }
    }
  }

  return target;
};



var inherits = function (subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function, not " + typeof superClass);
  }

  subClass.prototype = Object.create(superClass && superClass.prototype, {
    constructor: {
      value: subClass,
      enumerable: false,
      writable: true,
      configurable: true
    }
  });
  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
};











var possibleConstructorReturn = function (self, call) {
  if (!self) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }

  return call && (typeof call === "object" || typeof call === "function") ? call : self;
};





var slicedToArray = function () {
  function sliceIterator(arr, i) {
    var _arr = [];
    var _n = true;
    var _d = false;
    var _e = undefined;

    try {
      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {
        _arr.push(_s.value);

        if (i && _arr.length === i) break;
      }
    } catch (err) {
      _d = true;
      _e = err;
    } finally {
      try {
        if (!_n && _i["return"]) _i["return"]();
      } finally {
        if (_d) throw _e;
      }
    }

    return _arr;
  }

  return function (arr, i) {
    if (Array.isArray(arr)) {
      return arr;
    } else if (Symbol.iterator in Object(arr)) {
      return sliceIterator(arr, i);
    } else {
      throw new TypeError("Invalid attempt to destructure non-iterable instance");
    }
  };
}();













var toConsumableArray = function (arr) {
  if (Array.isArray(arr)) {
    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];

    return arr2;
  } else {
    return Array.from(arr);
  }
};

var consoleLogger = {
  type: 'logger',

  log: function log(args) {
    this.output('log', args);
  },
  warn: function warn(args) {
    this.output('warn', args);
  },
  error: function error(args) {
    this.output('error', args);
  },
  output: function output(type, args) {
    var _console;

    /* eslint no-console: 0 */
    if (console && console[type]) (_console = console)[type].apply(_console, toConsumableArray(args));
  }
};

var Logger = function () {
  function Logger(concreteLogger) {
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    classCallCheck(this, Logger);

    this.init(concreteLogger, options);
  }

  Logger.prototype.init = function init(concreteLogger) {
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

    this.prefix = options.prefix || 'i18next:';
    this.logger = concreteLogger || consoleLogger;
    this.options = options;
    this.debug = options.debug;
  };

  Logger.prototype.setDebug = function setDebug(bool) {
    this.debug = bool;
  };

  Logger.prototype.log = function log() {
    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    return this.forward(args, 'log', '', true);
  };

  Logger.prototype.warn = function warn() {
    for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
      args[_key2] = arguments[_key2];
    }

    return this.forward(args, 'warn', '', true);
  };

  Logger.prototype.error = function error() {
    for (var _len3 = arguments.length, args = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {
      args[_key3] = arguments[_key3];
    }

    return this.forward(args, 'error', '');
  };

  Logger.prototype.deprecate = function deprecate() {
    for (var _len4 = arguments.length, args = Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {
      args[_key4] = arguments[_key4];
    }

    return this.forward(args, 'warn', 'WARNING DEPRECATED: ', true);
  };

  Logger.prototype.forward = function forward(args, lvl, prefix, debugOnly) {
    if (debugOnly && !this.debug) return null;
    if (typeof args[0] === 'string') args[0] = '' + prefix + this.prefix + ' ' + args[0];
    return this.logger[lvl](args);
  };

  Logger.prototype.create = function create(moduleName) {
    return new Logger(this.logger, _extends({ prefix: this.prefix + ':' + moduleName + ':' }, this.options));
  };

  return Logger;
}();

var baseLogger = new Logger();

var EventEmitter = function () {
  function EventEmitter() {
    classCallCheck(this, EventEmitter);

    this.observers = {};
  }

  EventEmitter.prototype.on = function on(events, listener) {
    var _this = this;

    events.split(' ').forEach(function (event) {
      _this.observers[event] = _this.observers[event] || [];
      _this.observers[event].push(listener);
    });
  };

  EventEmitter.prototype.off = function off(event, listener) {
    var _this2 = this;

    if (!this.observers[event]) {
      return;
    }

    this.observers[event].forEach(function () {
      if (!listener) {
        delete _this2.observers[event];
      } else {
        var index = _this2.observers[event].indexOf(listener);
        if (index > -1) {
          _this2.observers[event].splice(index, 1);
        }
      }
    });
  };

  EventEmitter.prototype.emit = function emit(event) {
    for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
      args[_key - 1] = arguments[_key];
    }

    if (this.observers[event]) {
      var cloned = [].concat(this.observers[event]);
      cloned.forEach(function (observer) {
        observer.apply(undefined, args);
      });
    }

    if (this.observers['*']) {
      var _cloned = [].concat(this.observers['*']);
      _cloned.forEach(function (observer) {
        var _ref;

        observer.apply(observer, (_ref = [event]).concat.apply(_ref, args));
      });
    }
  };

  return EventEmitter;
}();

function makeString(object) {
  if (object == null) return '';
  /* eslint prefer-template: 0 */
  return '' + object;
}

function copy(a, s, t) {
  a.forEach(function (m) {
    if (s[m]) t[m] = s[m];
  });
}

function getLastOfPath(object, path, Empty) {
  function cleanKey(key) {
    return key && key.indexOf('###') > -1 ? key.replace(/###/g, '.') : key;
  }

  function canNotTraverseDeeper() {
    return !object || typeof object === 'string';
  }

  var stack = typeof path !== 'string' ? [].concat(path) : path.split('.');
  while (stack.length > 1) {
    if (canNotTraverseDeeper()) return {};

    var key = cleanKey(stack.shift());
    if (!object[key] && Empty) object[key] = new Empty();
    object = object[key];
  }

  if (canNotTraverseDeeper()) return {};
  return {
    obj: object,
    k: cleanKey(stack.shift())
  };
}

function setPath(object, path, newValue) {
  var _getLastOfPath = getLastOfPath(object, path, Object),
      obj = _getLastOfPath.obj,
      k = _getLastOfPath.k;

  obj[k] = newValue;
}

function pushPath(object, path, newValue, concat) {
  var _getLastOfPath2 = getLastOfPath(object, path, Object),
      obj = _getLastOfPath2.obj,
      k = _getLastOfPath2.k;

  obj[k] = obj[k] || [];
  if (concat) obj[k] = obj[k].concat(newValue);
  if (!concat) obj[k].push(newValue);
}

function getPath(object, path) {
  var _getLastOfPath3 = getLastOfPath(object, path),
      obj = _getLastOfPath3.obj,
      k = _getLastOfPath3.k;

  if (!obj) return undefined;
  return obj[k];
}

function deepExtend(target, source, overwrite) {
  /* eslint no-restricted-syntax: 0 */
  for (var prop in source) {
    if (prop in target) {
      // If we reached a leaf string in target or source then replace with source or skip depending on the 'overwrite' switch
      if (typeof target[prop] === 'string' || target[prop] instanceof String || typeof source[prop] === 'string' || source[prop] instanceof String) {
        if (overwrite) target[prop] = source[prop];
      } else {
        deepExtend(target[prop], source[prop], overwrite);
      }
    } else {
      target[prop] = source[prop];
    }
  }
  return target;
}

function regexEscape(str) {
  /* eslint no-useless-escape: 0 */
  return str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, '\\$&');
}

/* eslint-disable */
var _entityMap = {
  "&": "&amp;",
  "<": "&lt;",
  ">": "&gt;",
  '"': '&quot;',
  "'": '&#39;',
  "/": '&#x2F;'
};
/* eslint-enable */

function escape(data) {
  if (typeof data === 'string') {
    return data.replace(/[&<>"'\/]/g, function (s) {
      return _entityMap[s];
    });
  }

  return data;
}

var ResourceStore = function (_EventEmitter) {
  inherits(ResourceStore, _EventEmitter);

  function ResourceStore() {
    var data = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : { ns: ['translation'], defaultNS: 'translation' };
    classCallCheck(this, ResourceStore);

    var _this = possibleConstructorReturn(this, _EventEmitter.call(this));

    _this.data = data;
    _this.options = options;
    return _this;
  }

  ResourceStore.prototype.addNamespaces = function addNamespaces(ns) {
    if (this.options.ns.indexOf(ns) < 0) {
      this.options.ns.push(ns);
    }
  };

  ResourceStore.prototype.removeNamespaces = function removeNamespaces(ns) {
    var index = this.options.ns.indexOf(ns);
    if (index > -1) {
      this.options.ns.splice(index, 1);
    }
  };

  ResourceStore.prototype.getResource = function getResource(lng, ns, key) {
    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};

    var keySeparator = options.keySeparator || this.options.keySeparator;
    if (keySeparator === undefined) keySeparator = '.';

    var path = [lng, ns];
    if (key && typeof key !== 'string') path = path.concat(key);
    if (key && typeof key === 'string') path = path.concat(keySeparator ? key.split(keySeparator) : key);

    if (lng.indexOf('.') > -1) {
      path = lng.split('.');
    }

    return getPath(this.data, path);
  };

  ResourceStore.prototype.addResource = function addResource(lng, ns, key, value) {
    var options = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : { silent: false };

    var keySeparator = this.options.keySeparator;
    if (keySeparator === undefined) keySeparator = '.';

    var path = [lng, ns];
    if (key) path = path.concat(keySeparator ? key.split(keySeparator) : key);

    if (lng.indexOf('.') > -1) {
      path = lng.split('.');
      value = ns;
      ns = path[1];
    }

    this.addNamespaces(ns);

    setPath(this.data, path, value);

    if (!options.silent) this.emit('added', lng, ns, key, value);
  };

  ResourceStore.prototype.addResources = function addResources(lng, ns, resources) {
    /* eslint no-restricted-syntax: 0 */
    for (var m in resources) {
      if (typeof resources[m] === 'string') this.addResource(lng, ns, m, resources[m], { silent: true });
    }
    this.emit('added', lng, ns, resources);
  };

  ResourceStore.prototype.addResourceBundle = function addResourceBundle(lng, ns, resources, deep, overwrite) {
    var path = [lng, ns];
    if (lng.indexOf('.') > -1) {
      path = lng.split('.');
      deep = resources;
      resources = ns;
      ns = path[1];
    }

    this.addNamespaces(ns);

    var pack = getPath(this.data, path) || {};

    if (deep) {
      deepExtend(pack, resources, overwrite);
    } else {
      pack = _extends({}, pack, resources);
    }

    setPath(this.data, path, pack);

    this.emit('added', lng, ns, resources);
  };

  ResourceStore.prototype.removeResourceBundle = function removeResourceBundle(lng, ns) {
    if (this.hasResourceBundle(lng, ns)) {
      delete this.data[lng][ns];
    }
    this.removeNamespaces(ns);

    this.emit('removed', lng, ns);
  };

  ResourceStore.prototype.hasResourceBundle = function hasResourceBundle(lng, ns) {
    return this.getResource(lng, ns) !== undefined;
  };

  ResourceStore.prototype.getResourceBundle = function getResourceBundle(lng, ns) {
    if (!ns) ns = this.options.defaultNS;

    // COMPATIBILITY: remove extend in v2.1.0
    if (this.options.compatibilityAPI === 'v1') return _extends({}, this.getResource(lng, ns));

    return this.getResource(lng, ns);
  };

  ResourceStore.prototype.toJSON = function toJSON() {
    return this.data;
  };

  return ResourceStore;
}(EventEmitter);

var postProcessor = {

  processors: {},

  addPostProcessor: function addPostProcessor(module) {
    this.processors[module.name] = module;
  },
  handle: function handle(processors, value, key, options, translator) {
    var _this = this;

    processors.forEach(function (processor) {
      if (_this.processors[processor]) value = _this.processors[processor].process(value, key, options, translator);
    });

    return value;
  }
};

/* eslint no-param-reassign: 0 */
function convertInterpolation(options) {

  options.interpolation = {
    unescapeSuffix: 'HTML'
  };

  options.interpolation.prefix = options.interpolationPrefix || '__';
  options.interpolation.suffix = options.interpolationSuffix || '__';
  options.interpolation.escapeValue = options.escapeInterpolation || false;

  options.interpolation.nestingPrefix = options.reusePrefix || '$t(';
  options.interpolation.nestingSuffix = options.reuseSuffix || ')';

  return options;
}

function convertAPIOptions(options) {
  if (options.resStore) options.resources = options.resStore;

  if (options.ns && options.ns.defaultNs) {
    options.defaultNS = options.ns.defaultNs;
    options.ns = options.ns.namespaces;
  } else {
    options.defaultNS = options.ns || 'translation';
  }

  if (options.fallbackToDefaultNS && options.defaultNS) options.fallbackNS = options.defaultNS;

  options.saveMissing = options.sendMissing;
  options.saveMissingTo = options.sendMissingTo || 'current';
  options.returnNull = !options.fallbackOnNull;
  options.returnEmptyString = !options.fallbackOnEmpty;
  options.returnObjects = options.returnObjectTrees;
  options.joinArrays = '\n';

  options.returnedObjectHandler = options.objectTreeKeyHandler;
  options.parseMissingKeyHandler = options.parseMissingKey;
  options.appendNamespaceToMissingKey = true;

  options.nsSeparator = options.nsseparator || ':';
  options.keySeparator = options.keyseparator || '.';

  if (options.shortcutFunction === 'sprintf') {
    options.overloadTranslationOptionHandler = function handle(args) {
      var values = [];

      for (var i = 1; i < args.length; i++) {
        values.push(args[i]);
      }

      return {
        postProcess: 'sprintf',
        sprintf: values
      };
    };
  }

  options.whitelist = options.lngWhitelist;
  options.preload = options.preload;
  if (options.load === 'current') options.load = 'currentOnly';
  if (options.load === 'unspecific') options.load = 'languageOnly';

  // backend
  options.backend = options.backend || {};
  options.backend.loadPath = options.resGetPath || 'locales/__lng__/__ns__.json';
  options.backend.addPath = options.resPostPath || 'locales/add/__lng__/__ns__';
  options.backend.allowMultiLoading = options.dynamicLoad;

  // cache
  options.cache = options.cache || {};
  options.cache.prefix = 'res_';
  options.cache.expirationTime = 7 * 24 * 60 * 60 * 1000;
  options.cache.enabled = options.useLocalStorage;

  options = convertInterpolation(options);
  if (options.defaultVariables) options.interpolation.defaultVariables = options.defaultVariables;

  // COMPATIBILITY: deprecation
  // if (options.getAsync === false) throw deprecation error

  return options;
}

function convertJSONOptions(options) {
  options = convertInterpolation(options);
  options.joinArrays = '\n';

  return options;
}

function convertTOptions(options) {
  if (options.interpolationPrefix || options.interpolationSuffix || options.escapeInterpolation !== undefined) {
    options = convertInterpolation(options);
  }

  options.nsSeparator = options.nsseparator;
  options.keySeparator = options.keyseparator;

  options.returnObjects = options.returnObjectTrees;

  return options;
}

function appendBackwardsAPI(i18n) {
  i18n.lng = function () {
    baseLogger.deprecate('i18next.lng() can be replaced by i18next.language for detected language or i18next.languages for languages ordered by translation lookup.');
    return i18n.services.languageUtils.toResolveHierarchy(i18n.language)[0];
  };

  i18n.preload = function (lngs, cb) {
    baseLogger.deprecate('i18next.preload() can be replaced with i18next.loadLanguages()');
    i18n.loadLanguages(lngs, cb);
  };

  i18n.setLng = function (lng, options, callback) {
    baseLogger.deprecate('i18next.setLng() can be replaced with i18next.changeLanguage() or i18next.getFixedT() to get a translation function with fixed language or namespace.');
    if (typeof options === 'function') {
      callback = options;
      options = {};
    }
    if (!options) options = {};

    if (options.fixLng === true) {
      if (callback) return callback(null, i18n.getFixedT(lng));
    }

    return i18n.changeLanguage(lng, callback);
  };

  i18n.addPostProcessor = function (name, fc) {
    baseLogger.deprecate('i18next.addPostProcessor() can be replaced by i18next.use({ type: \'postProcessor\', name: \'name\', process: fc })');
    i18n.use({
      type: 'postProcessor',
      name: name,
      process: fc
    });
  };
}

var Translator = function (_EventEmitter) {
  inherits(Translator, _EventEmitter);

  function Translator(services) {
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    classCallCheck(this, Translator);

    var _this = possibleConstructorReturn(this, _EventEmitter.call(this));

    copy(['resourceStore', 'languageUtils', 'pluralResolver', 'interpolator', 'backendConnector'], services, _this);

    _this.options = options;
    _this.logger = baseLogger.create('translator');
    return _this;
  }

  Translator.prototype.changeLanguage = function changeLanguage(lng) {
    if (lng) this.language = lng;
  };

  Translator.prototype.exists = function exists(key) {
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : { interpolation: {} };

    if (this.options.compatibilityAPI === 'v1') {
      options = convertTOptions(options);
    }

    return this.resolve(key, options) !== undefined;
  };

  Translator.prototype.extractFromKey = function extractFromKey(key, options) {
    var nsSeparator = options.nsSeparator || this.options.nsSeparator;
    if (nsSeparator === undefined) nsSeparator = ':';
    var keySeparator = options.keySeparator || this.options.keySeparator || '.';

    var namespaces = options.ns || this.options.defaultNS;
    if (nsSeparator && key.indexOf(nsSeparator) > -1) {
      var parts = key.split(nsSeparator);
      if (nsSeparator !== keySeparator || nsSeparator === keySeparator && this.options.ns.indexOf(parts[0]) > -1) namespaces = parts.shift();
      key = parts.join(keySeparator);
    }
    if (typeof namespaces === 'string') namespaces = [namespaces];

    return {
      key: key,
      namespaces: namespaces
    };
  };

  Translator.prototype.translate = function translate(keys) {
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

    if ((typeof options === 'undefined' ? 'undefined' : _typeof(options)) !== 'object') {
      /* eslint prefer-rest-params: 0 */
      options = this.options.overloadTranslationOptionHandler(arguments);
    } else if (this.options.compatibilityAPI === 'v1') {
      options = convertTOptions(options);
    }

    // non valid keys handling
    if (keys === undefined || keys === null || keys === '') return '';
    if (typeof keys === 'number') keys = String(keys);
    if (typeof keys === 'string') keys = [keys];

    // separators
    var keySeparator = options.keySeparator || this.options.keySeparator || '.';

    // get namespace(s)

    var _extractFromKey = this.extractFromKey(keys[keys.length - 1], options),
        key = _extractFromKey.key,
        namespaces = _extractFromKey.namespaces;

    var namespace = namespaces[namespaces.length - 1];

    // return key on CIMode
    var lng = options.lng || this.language;
    var appendNamespaceToCIMode = options.appendNamespaceToCIMode || this.options.appendNamespaceToCIMode;
    if (lng && lng.toLowerCase() === 'cimode') {
      if (appendNamespaceToCIMode) {
        var nsSeparator = options.nsSeparator || this.options.nsSeparator;
        return namespace + nsSeparator + key;
      }

      return key;
    }

    // resolve from store
    var res = this.resolve(keys, options);

    var resType = Object.prototype.toString.apply(res);
    var noObject = ['[object Number]', '[object Function]', '[object RegExp]'];
    var joinArrays = options.joinArrays !== undefined ? options.joinArrays : this.options.joinArrays;

    // object
    if (res && typeof res !== 'string' && noObject.indexOf(resType) < 0 && !(joinArrays && resType === '[object Array]')) {
      if (!options.returnObjects && !this.options.returnObjects) {
        this.logger.warn('accessing an object - but returnObjects options is not enabled!');
        return this.options.returnedObjectHandler ? this.options.returnedObjectHandler(key, res, options) : 'key \'' + key + ' (' + this.language + ')\' returned an object instead of string.';
      }

      // if we got a separator we loop over children - else we just return object as is
      // as having it set to false means no hierarchy so no lookup for nested values
      if (options.keySeparator || this.options.keySeparator) {
        var copy$$1 = resType === '[object Array]' ? [] : {}; // apply child translation on a copy

        /* eslint no-restricted-syntax: 0 */
        for (var m in res) {
          if (Object.prototype.hasOwnProperty.call(res, m)) {
            copy$$1[m] = this.translate('' + key + keySeparator + m, _extends({}, options, { joinArrays: false, ns: namespaces }));
          }
        }
        res = copy$$1;
      }
    } else if (joinArrays && resType === '[object Array]') {
      // array special treatment
      res = res.join(joinArrays);
      if (res) res = this.extendTranslation(res, key, options);
    } else {
      // string, empty or null
      var usedDefault = false;
      var usedKey = false;

      // fallback value
      if (!this.isValidLookup(res) && options.defaultValue !== undefined) {
        usedDefault = true;
        res = options.defaultValue;
      }
      if (!this.isValidLookup(res)) {
        usedKey = true;
        res = key;
      }

      // save missing
      if (usedKey || usedDefault) {
        this.logger.log('missingKey', lng, namespace, key, res);

        var lngs = [];
        var fallbackLngs = this.languageUtils.getFallbackCodes(this.options.fallbackLng, options.lng || this.language);
        if (this.options.saveMissingTo === 'fallback' && fallbackLngs && fallbackLngs[0]) {
          for (var i = 0; i < fallbackLngs.length; i++) {
            lngs.push(fallbackLngs[i]);
          }
        } else if (this.options.saveMissingTo === 'all') {
          lngs = this.languageUtils.toResolveHierarchy(options.lng || this.language);
        } else {
          lngs.push(options.lng || this.language);
        }

        if (this.options.saveMissing) {
          if (this.options.missingKeyHandler) {
            this.options.missingKeyHandler(lngs, namespace, key, res);
          } else if (this.backendConnector && this.backendConnector.saveMissing) {
            this.backendConnector.saveMissing(lngs, namespace, key, res);
          }
        }

        this.emit('missingKey', lngs, namespace, key, res);
      }

      // extend
      res = this.extendTranslation(res, key, options);

      // append namespace if still key
      if (usedKey && res === key && this.options.appendNamespaceToMissingKey) res = namespace + ':' + key;

      // parseMissingKeyHandler
      if (usedKey && this.options.parseMissingKeyHandler) res = this.options.parseMissingKeyHandler(res);
    }

    // return
    return res;
  };

  Translator.prototype.extendTranslation = function extendTranslation(res, key, options) {
    var _this2 = this;

    if (options.interpolation) this.interpolator.init(_extends({}, options, { interpolation: _extends({}, this.options.interpolation, options.interpolation) }));

    // interpolate
    var data = options.replace && typeof options.replace !== 'string' ? options.replace : options;
    if (this.options.interpolation.defaultVariables) data = _extends({}, this.options.interpolation.defaultVariables, data);
    res = this.interpolator.interpolate(res, data, options.lng || this.language);

    // nesting
    if (options.nest !== false) res = this.interpolator.nest(res, function () {
      return _this2.translate.apply(_this2, arguments);
    }, options);

    if (options.interpolation) this.interpolator.reset();

    // post process
    var postProcess = options.postProcess || this.options.postProcess;
    var postProcessorNames = typeof postProcess === 'string' ? [postProcess] : postProcess;

    if (res !== undefined && postProcessorNames && postProcessorNames.length && options.applyPostProcessor !== false) {
      res = postProcessor.handle(postProcessorNames, res, key, options, this);
    }

    return res;
  };

  Translator.prototype.resolve = function resolve(keys) {
    var _this3 = this;

    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

    var found = void 0;

    if (typeof keys === 'string') keys = [keys];

    // forEach possible key
    keys.forEach(function (k) {
      if (_this3.isValidLookup(found)) return;

      var extracted = _this3.extractFromKey(k, options);
      var key = extracted.key;
      var namespaces = extracted.namespaces;
      if (_this3.options.fallbackNS) namespaces = namespaces.concat(_this3.options.fallbackNS);

      var needsPluralHandling = options.count !== undefined && typeof options.count !== 'string';
      var needsContextHandling = options.context !== undefined && typeof options.context === 'string' && options.context !== '';

      var codes = options.lngs ? options.lngs : _this3.languageUtils.toResolveHierarchy(options.lng || _this3.language);

      namespaces.forEach(function (ns) {
        if (_this3.isValidLookup(found)) return;

        codes.forEach(function (code) {
          if (_this3.isValidLookup(found)) return;

          var finalKey = key;
          var finalKeys = [finalKey];

          var pluralSuffix = void 0;
          if (needsPluralHandling) pluralSuffix = _this3.pluralResolver.getSuffix(code, options.count);

          // fallback for plural if context not found
          if (needsPluralHandling && needsContextHandling) finalKeys.push(finalKey + pluralSuffix);

          // get key for context if needed
          if (needsContextHandling) finalKeys.push(finalKey += '' + _this3.options.contextSeparator + options.context);

          // get key for plural if needed
          if (needsPluralHandling) finalKeys.push(finalKey += pluralSuffix);

          // iterate over finalKeys starting with most specific pluralkey (-> contextkey only) -> singularkey only
          var possibleKey = void 0;
          /* eslint no-cond-assign: 0 */
          while (possibleKey = finalKeys.pop()) {
            if (!_this3.isValidLookup(found)) {
              found = _this3.getResource(code, ns, possibleKey, options);
            }
          }
        });
      });
    });

    return found;
  };

  Translator.prototype.isValidLookup = function isValidLookup(res) {
    return res !== undefined && !(!this.options.returnNull && res === null) && !(!this.options.returnEmptyString && res === '');
  };

  Translator.prototype.getResource = function getResource(code, ns, key) {
    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};

    return this.resourceStore.getResource(code, ns, key, options);
  };

  return Translator;
}(EventEmitter);

function capitalize(string) {
  return string.charAt(0).toUpperCase() + string.slice(1);
}

var LanguageUtil = function () {
  function LanguageUtil(options) {
    classCallCheck(this, LanguageUtil);

    this.options = options;

    this.whitelist = this.options.whitelist || false;
    this.logger = baseLogger.create('languageUtils');
  }

  LanguageUtil.prototype.getScriptPartFromCode = function getScriptPartFromCode(code) {
    if (!code || code.indexOf('-') < 0) return null;

    var p = code.split('-');
    if (p.length === 2) return null;
    p.pop();
    return this.formatLanguageCode(p.join('-'));
  };

  LanguageUtil.prototype.getLanguagePartFromCode = function getLanguagePartFromCode(code) {
    if (!code || code.indexOf('-') < 0) return code;

    var p = code.split('-');
    return this.formatLanguageCode(p[0]);
  };

  LanguageUtil.prototype.formatLanguageCode = function formatLanguageCode(code) {
    // http://www.iana.org/assignments/language-tags/language-tags.xhtml
    if (typeof code === 'string' && code.indexOf('-') > -1) {
      var specialCases = ['hans', 'hant', 'latn', 'cyrl', 'cans', 'mong', 'arab'];
      var p = code.split('-');

      if (this.options.lowerCaseLng) {
        p = p.map(function (part) {
          return part.toLowerCase();
        });
      } else if (p.length === 2) {
        p[0] = p[0].toLowerCase();
        p[1] = p[1].toUpperCase();

        if (specialCases.indexOf(p[1].toLowerCase()) > -1) p[1] = capitalize(p[1].toLowerCase());
      } else if (p.length === 3) {
        p[0] = p[0].toLowerCase();

        // if lenght 2 guess it's a country
        if (p[1].length === 2) p[1] = p[1].toUpperCase();
        if (p[0] !== 'sgn' && p[2].length === 2) p[2] = p[2].toUpperCase();

        if (specialCases.indexOf(p[1].toLowerCase()) > -1) p[1] = capitalize(p[1].toLowerCase());
        if (specialCases.indexOf(p[2].toLowerCase()) > -1) p[2] = capitalize(p[2].toLowerCase());
      }

      return p.join('-');
    }

    return this.options.cleanCode || this.options.lowerCaseLng ? code.toLowerCase() : code;
  };

  LanguageUtil.prototype.isWhitelisted = function isWhitelisted(code) {
    if (this.options.load === 'languageOnly' || this.options.nonExplicitWhitelist) {
      code = this.getLanguagePartFromCode(code);
    }
    return !this.whitelist || !this.whitelist.length || this.whitelist.indexOf(code) > -1;
  };

  LanguageUtil.prototype.getFallbackCodes = function getFallbackCodes(fallbacks, code) {
    if (!fallbacks) return [];
    if (typeof fallbacks === 'string') fallbacks = [fallbacks];
    if (Object.prototype.toString.apply(fallbacks) === '[object Array]') return fallbacks;

    if (!code) return fallbacks.default || [];

    // asume we have an object defining fallbacks
    var found = fallbacks[code];
    if (!found) found = fallbacks[this.getScriptPartFromCode(code)];
    if (!found) found = fallbacks[this.formatLanguageCode(code)];
    if (!found) found = fallbacks.default;

    return found || [];
  };

  LanguageUtil.prototype.toResolveHierarchy = function toResolveHierarchy(code, fallbackCode) {
    var _this = this;

    var fallbackCodes = this.getFallbackCodes(fallbackCode || this.options.fallbackLng || [], code);

    var codes = [];
    var addCode = function addCode(c) {
      if (!c) return;
      if (_this.isWhitelisted(c)) {
        codes.push(c);
      } else {
        _this.logger.warn('rejecting non-whitelisted language code: ' + c);
      }
    };

    if (typeof code === 'string' && code.indexOf('-') > -1) {
      if (this.options.load !== 'languageOnly') addCode(this.formatLanguageCode(code));
      if (this.options.load !== 'languageOnly' && this.options.load !== 'currentOnly') addCode(this.getScriptPartFromCode(code));
      if (this.options.load !== 'currentOnly') addCode(this.getLanguagePartFromCode(code));
    } else if (typeof code === 'string') {
      addCode(this.formatLanguageCode(code));
    }

    fallbackCodes.forEach(function (fc) {
      if (codes.indexOf(fc) < 0) addCode(_this.formatLanguageCode(fc));
    });

    return codes;
  };

  return LanguageUtil;
}();

// definition http://translate.sourceforge.net/wiki/l10n/pluralforms
/* eslint-disable */
var sets = [{ lngs: ['ach', 'ak', 'am', 'arn', 'br', 'fil', 'gun', 'ln', 'mfe', 'mg', 'mi', 'oc', 'tg', 'ti', 'tr', 'uz', 'wa'], nr: [1, 2], fc: 1 }, { lngs: ['af', 'an', 'ast', 'az', 'bg', 'bn', 'ca', 'da', 'de', 'dev', 'el', 'en', 'eo', 'es', 'es_ar', 'et', 'eu', 'fi', 'fo', 'fur', 'fy', 'gl', 'gu', 'ha', 'he', 'hi', 'hu', 'hy', 'ia', 'it', 'kn', 'ku', 'lb', 'mai', 'ml', 'mn', 'mr', 'nah', 'nap', 'nb', 'ne', 'nl', 'nn', 'no', 'nso', 'pa', 'pap', 'pms', 'ps', 'pt', 'pt_br', 'rm', 'sco', 'se', 'si', 'so', 'son', 'sq', 'sv', 'sw', 'ta', 'te', 'tk', 'ur', 'yo'], nr: [1, 2], fc: 2 }, { lngs: ['ay', 'bo', 'cgg', 'fa', 'id', 'ja', 'jbo', 'ka', 'kk', 'km', 'ko', 'ky', 'lo', 'ms', 'sah', 'su', 'th', 'tt', 'ug', 'vi', 'wo', 'zh'], nr: [1], fc: 3 }, { lngs: ['be', 'bs', 'dz', 'hr', 'ru', 'sr', 'uk'], nr: [1, 2, 5], fc: 4 }, { lngs: ['ar'], nr: [0, 1, 2, 3, 11, 100], fc: 5 }, { lngs: ['cs', 'sk'], nr: [1, 2, 5], fc: 6 }, { lngs: ['csb', 'pl'], nr: [1, 2, 5], fc: 7 }, { lngs: ['cy'], nr: [1, 2, 3, 8], fc: 8 }, { lngs: ['fr'], nr: [1, 2], fc: 9 }, { lngs: ['ga'], nr: [1, 2, 3, 7, 11], fc: 10 }, { lngs: ['gd'], nr: [1, 2, 3, 20], fc: 11 }, { lngs: ['is'], nr: [1, 2], fc: 12 }, { lngs: ['jv'], nr: [0, 1], fc: 13 }, { lngs: ['kw'], nr: [1, 2, 3, 4], fc: 14 }, { lngs: ['lt'], nr: [1, 2, 10], fc: 15 }, { lngs: ['lv'], nr: [1, 2, 0], fc: 16 }, { lngs: ['mk'], nr: [1, 2], fc: 17 }, { lngs: ['mnk'], nr: [0, 1, 2], fc: 18 }, { lngs: ['mt'], nr: [1, 2, 11, 20], fc: 19 }, { lngs: ['or'], nr: [2, 1], fc: 2 }, { lngs: ['ro'], nr: [1, 2, 20], fc: 20 }, { lngs: ['sl'], nr: [5, 1, 2, 3], fc: 21 }];

var _rulesPluralsTypes = {
  1: function _(n) {
    return Number(n > 1);
  },
  2: function _(n) {
    return Number(n != 1);
  },
  3: function _(n) {
    return 0;
  },
  4: function _(n) {
    return Number(n % 10 == 1 && n % 100 != 11 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2);
  },
  5: function _(n) {
    return Number(n === 0 ? 0 : n == 1 ? 1 : n == 2 ? 2 : n % 100 >= 3 && n % 100 <= 10 ? 3 : n % 100 >= 11 ? 4 : 5);
  },
  6: function _(n) {
    return Number(n == 1 ? 0 : n >= 2 && n <= 4 ? 1 : 2);
  },
  7: function _(n) {
    return Number(n == 1 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2);
  },
  8: function _(n) {
    return Number(n == 1 ? 0 : n == 2 ? 1 : n != 8 && n != 11 ? 2 : 3);
  },
  9: function _(n) {
    return Number(n >= 2);
  },
  10: function _(n) {
    return Number(n == 1 ? 0 : n == 2 ? 1 : n < 7 ? 2 : n < 11 ? 3 : 4);
  },
  11: function _(n) {
    return Number(n == 1 || n == 11 ? 0 : n == 2 || n == 12 ? 1 : n > 2 && n < 20 ? 2 : 3);
  },
  12: function _(n) {
    return Number(n % 10 != 1 || n % 100 == 11);
  },
  13: function _(n) {
    return Number(n !== 0);
  },
  14: function _(n) {
    return Number(n == 1 ? 0 : n == 2 ? 1 : n == 3 ? 2 : 3);
  },
  15: function _(n) {
    return Number(n % 10 == 1 && n % 100 != 11 ? 0 : n % 10 >= 2 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2);
  },
  16: function _(n) {
    return Number(n % 10 == 1 && n % 100 != 11 ? 0 : n !== 0 ? 1 : 2);
  },
  17: function _(n) {
    return Number(n == 1 || n % 10 == 1 ? 0 : 1);
  },
  18: function _(n) {
    return Number(n == 0 ? 0 : n == 1 ? 1 : 2);
  },
  19: function _(n) {
    return Number(n == 1 ? 0 : n === 0 || n % 100 > 1 && n % 100 < 11 ? 1 : n % 100 > 10 && n % 100 < 20 ? 2 : 3);
  },
  20: function _(n) {
    return Number(n == 1 ? 0 : n === 0 || n % 100 > 0 && n % 100 < 20 ? 1 : 2);
  },
  21: function _(n) {
    return Number(n % 100 == 1 ? 1 : n % 100 == 2 ? 2 : n % 100 == 3 || n % 100 == 4 ? 3 : 0);
  }
};
/* eslint-enable */

function createRules() {
  var rules = {};
  sets.forEach(function (set$$1) {
    set$$1.lngs.forEach(function (l) {
      rules[l] = {
        numbers: set$$1.nr,
        plurals: _rulesPluralsTypes[set$$1.fc]
      };
    });
  });
  return rules;
}

var PluralResolver = function () {
  function PluralResolver(languageUtils) {
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    classCallCheck(this, PluralResolver);

    this.languageUtils = languageUtils;
    this.options = options;

    this.logger = baseLogger.create('pluralResolver');

    this.rules = createRules();
  }

  PluralResolver.prototype.addRule = function addRule(lng, obj) {
    this.rules[lng] = obj;
  };

  PluralResolver.prototype.getRule = function getRule(code) {
    return this.rules[this.languageUtils.getLanguagePartFromCode(code)];
  };

  PluralResolver.prototype.needsPlural = function needsPlural(code) {
    var rule = this.getRule(code);

    return rule && rule.numbers.length > 1;
  };

  PluralResolver.prototype.getSuffix = function getSuffix(code, count) {
    var _this = this;

    var rule = this.getRule(code);

    if (rule) {
      if (rule.numbers.length === 1) return ''; // only singular

      var idx = rule.noAbs ? rule.plurals(count) : rule.plurals(Math.abs(count));
      var suffix = rule.numbers[idx];

      // special treatment for lngs only having singular and plural
      if (this.options.simplifyPluralSuffix && rule.numbers.length === 2 && rule.numbers[0] === 1) {
        if (suffix === 2) {
          suffix = 'plural';
        } else if (suffix === 1) {
          suffix = '';
        }
      }

      var returnSuffix = function returnSuffix() {
        return _this.options.prepend && suffix.toString() ? _this.options.prepend + suffix.toString() : suffix.toString();
      };

      // COMPATIBILITY JSON
      // v1
      if (this.options.compatibilityJSON === 'v1') {
        if (suffix === 1) return '';
        if (typeof suffix === 'number') return '_plural_' + suffix.toString();
        return returnSuffix();
      } else if ( /* v2 */this.options.compatibilityJSON === 'v2' || rule.numbers.length === 2 && rule.numbers[0] === 1) {
        return returnSuffix();
      } else if ( /* v3 - gettext index */rule.numbers.length === 2 && rule.numbers[0] === 1) {
        return returnSuffix();
      }
      return this.options.prepend && idx.toString() ? this.options.prepend + idx.toString() : idx.toString();
    }

    this.logger.warn('no plural rule found for: ' + code);
    return '';
  };

  return PluralResolver;
}();

var Interpolator = function () {
  function Interpolator() {
    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    classCallCheck(this, Interpolator);

    this.logger = baseLogger.create('interpolator');

    this.init(options, true);
  }

  /* eslint no-param-reassign: 0 */


  Interpolator.prototype.init = function init() {
    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    var reset = arguments[1];

    if (reset) {
      this.options = options;
      this.format = options.interpolation && options.interpolation.format || function (value) {
        return value;
      };
      this.escape = options.interpolation && options.interpolation.escape || escape;
    }
    if (!options.interpolation) options.interpolation = { escapeValue: true };

    var iOpts = options.interpolation;

    this.escapeValue = iOpts.escapeValue !== undefined ? iOpts.escapeValue : true;

    this.prefix = iOpts.prefix ? regexEscape(iOpts.prefix) : iOpts.prefixEscaped || '{{';
    this.suffix = iOpts.suffix ? regexEscape(iOpts.suffix) : iOpts.suffixEscaped || '}}';

    this.formatSeparator = iOpts.formatSeparator ? iOpts.formatSeparator : iOpts.formatSeparator || ',';

    this.unescapePrefix = iOpts.unescapeSuffix ? '' : iOpts.unescapePrefix || '-';
    this.unescapeSuffix = this.unescapePrefix ? '' : iOpts.unescapeSuffix || '';

    this.nestingPrefix = iOpts.nestingPrefix ? regexEscape(iOpts.nestingPrefix) : iOpts.nestingPrefixEscaped || regexEscape('$t(');
    this.nestingSuffix = iOpts.nestingSuffix ? regexEscape(iOpts.nestingSuffix) : iOpts.nestingSuffixEscaped || regexEscape(')');

    // the regexp
    this.resetRegExp();
  };

  Interpolator.prototype.reset = function reset() {
    if (this.options) this.init(this.options);
  };

  Interpolator.prototype.resetRegExp = function resetRegExp() {
    // the regexp
    var regexpStr = this.prefix + '(.+?)' + this.suffix;
    this.regexp = new RegExp(regexpStr, 'g');

    var regexpUnescapeStr = '' + this.prefix + this.unescapePrefix + '(.+?)' + this.unescapeSuffix + this.suffix;
    this.regexpUnescape = new RegExp(regexpUnescapeStr, 'g');

    var nestingRegexpStr = this.nestingPrefix + '(.+?)' + this.nestingSuffix;
    this.nestingRegexp = new RegExp(nestingRegexpStr, 'g');
  };

  Interpolator.prototype.interpolate = function interpolate(str, data, lng) {
    var _this = this;

    var match = void 0;
    var value = void 0;

    function regexSafe(val) {
      return val.replace(/\$/g, '$$$$');
    }

    var handleFormat = function handleFormat(key) {
      if (key.indexOf(_this.formatSeparator) < 0) return getPath(data, key);

      var p = key.split(_this.formatSeparator);
      var k = p.shift().trim();
      var f = p.join(_this.formatSeparator).trim();

      return _this.format(getPath(data, k), f, lng);
    };

    this.resetRegExp();

    // unescape if has unescapePrefix/Suffix
    /* eslint no-cond-assign: 0 */
    while (match = this.regexpUnescape.exec(str)) {
      value = handleFormat(match[1].trim());
      str = str.replace(match[0], value);
      this.regexpUnescape.lastIndex = 0;
    }

    // regular escape on demand
    while (match = this.regexp.exec(str)) {
      value = handleFormat(match[1].trim());
      if (typeof value !== 'string') value = makeString(value);
      if (!value) {
        this.logger.warn('missed to pass in variable ' + match[1] + ' for interpolating ' + str);
        value = '';
      }
      value = this.escapeValue ? regexSafe(this.escape(value)) : regexSafe(value);
      str = str.replace(match[0], value);
      this.regexp.lastIndex = 0;
    }
    return str;
  };

  Interpolator.prototype.nest = function nest(str, fc) {
    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};

    var match = void 0;
    var value = void 0;

    var clonedOptions = _extends({}, options);
    clonedOptions.applyPostProcessor = false; // avoid post processing on nested lookup

    // if value is something like "myKey": "lorem $(anotherKey, { "count": {{aValueInOptions}} })"
    function handleHasOptions(key) {
      if (key.indexOf(',') < 0) return key;

      var p = key.split(',');
      key = p.shift();
      var optionsString = p.join(',');
      optionsString = this.interpolate(optionsString, clonedOptions);
      optionsString = optionsString.replace(/'/g, '"');

      try {
        clonedOptions = JSON.parse(optionsString);
      } catch (e) {
        this.logger.error('failed parsing options string in nesting for key ' + key, e);
      }

      return key;
    }

    // regular escape on demand
    while (match = this.nestingRegexp.exec(str)) {
      value = fc(handleHasOptions.call(this, match[1].trim()), clonedOptions);

      // is only the nesting key (key1 = '$(key2)') return the value without stringify
      if (value && match[0] === str && typeof value !== 'string') return value;

      // no string to include or empty
      if (typeof value !== 'string') value = makeString(value);
      if (!value) {
        this.logger.warn('missed to resolve ' + match[1] + ' for nesting ' + str);
        value = '';
      }
      // Nested keys should not be escaped by default #854
      // value = this.escapeValue ? regexSafe(utils.escape(value)) : regexSafe(value);
      str = str.replace(match[0], value);
      this.regexp.lastIndex = 0;
    }
    return str;
  };

  return Interpolator;
}();

function remove(arr, what) {
  var found = arr.indexOf(what);

  while (found !== -1) {
    arr.splice(found, 1);
    found = arr.indexOf(what);
  }
}

var Connector = function (_EventEmitter) {
  inherits(Connector, _EventEmitter);

  function Connector(backend, store, services) {
    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};
    classCallCheck(this, Connector);

    var _this = possibleConstructorReturn(this, _EventEmitter.call(this));

    _this.backend = backend;
    _this.store = store;
    _this.services = services;
    _this.options = options;
    _this.logger = baseLogger.create('backendConnector');

    _this.state = {};
    _this.queue = [];

    if (_this.backend && _this.backend.init) {
      _this.backend.init(services, options.backend, options);
    }
    return _this;
  }

  Connector.prototype.queueLoad = function queueLoad(languages, namespaces, callback) {
    var _this2 = this;

    // find what needs to be loaded
    var toLoad = [];
    var pending = [];
    var toLoadLanguages = [];
    var toLoadNamespaces = [];

    languages.forEach(function (lng) {
      var hasAllNamespaces = true;

      namespaces.forEach(function (ns) {
        var name = lng + '|' + ns;

        if (_this2.store.hasResourceBundle(lng, ns)) {
          _this2.state[name] = 2; // loaded
        } else if (_this2.state[name] < 0) {
          // nothing to do for err
        } else if (_this2.state[name] === 1) {
          if (pending.indexOf(name) < 0) pending.push(name);
        } else {
          _this2.state[name] = 1; // pending

          hasAllNamespaces = false;

          if (pending.indexOf(name) < 0) pending.push(name);
          if (toLoad.indexOf(name) < 0) toLoad.push(name);
          if (toLoadNamespaces.indexOf(ns) < 0) toLoadNamespaces.push(ns);
        }
      });

      if (!hasAllNamespaces) toLoadLanguages.push(lng);
    });

    if (toLoad.length || pending.length) {
      this.queue.push({
        pending: pending,
        loaded: {},
        errors: [],
        callback: callback
      });
    }

    return {
      toLoad: toLoad,
      pending: pending,
      toLoadLanguages: toLoadLanguages,
      toLoadNamespaces: toLoadNamespaces
    };
  };

  Connector.prototype.loaded = function loaded(name, err, data) {
    var _this3 = this;

    var _name$split = name.split('|'),
        _name$split2 = slicedToArray(_name$split, 2),
        lng = _name$split2[0],
        ns = _name$split2[1];

    if (err) this.emit('failedLoading', lng, ns, err);

    if (data) {
      this.store.addResourceBundle(lng, ns, data);
    }

    // set loaded
    this.state[name] = err ? -1 : 2;

    // callback if ready
    this.queue.forEach(function (q) {
      pushPath(q.loaded, [lng], ns);
      remove(q.pending, name);

      if (err) q.errors.push(err);

      if (q.pending.length === 0 && !q.done) {
        _this3.emit('loaded', q.loaded);
        /* eslint no-param-reassign: 0 */
        q.done = true;
        if (q.errors.length) {
          q.callback(q.errors);
        } else {
          q.callback();
        }
      }
    });

    // remove done load requests
    this.queue = this.queue.filter(function (q) {
      return !q.done;
    });
  };

  Connector.prototype.read = function read(lng, ns, fcName) {
    var tried = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;

    var _this4 = this;

    var wait = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 250;
    var callback = arguments[5];

    if (!lng.length) return callback(null, {}); // noting to load

    return this.backend[fcName](lng, ns, function (err, data) {
      if (err && data /* = retryFlag */ && tried < 5) {
        setTimeout(function () {
          _this4.read.call(_this4, lng, ns, fcName, tried + 1, wait * 2, callback);
        }, wait);
        return;
      }
      callback(err, data);
    });
  };

  /* eslint consistent-return: 0 */


  Connector.prototype.load = function load(languages, namespaces, callback) {
    var _this5 = this;

    if (!this.backend) {
      this.logger.warn('No backend was added via i18next.use. Will not load resources.');
      return callback && callback();
    }
    var options = _extends({}, this.backend.options, this.options.backend);

    if (typeof languages === 'string') languages = this.services.languageUtils.toResolveHierarchy(languages);
    if (typeof namespaces === 'string') namespaces = [namespaces];

    var toLoad = this.queueLoad(languages, namespaces, callback);
    if (!toLoad.toLoad.length) {
      if (!toLoad.pending.length) callback(); // nothing to load and no pendings...callback now
      return null; // pendings will trigger callback
    }

    // load with multi-load
    if (options.allowMultiLoading && this.backend.readMulti) {
      this.read(toLoad.toLoadLanguages, toLoad.toLoadNamespaces, 'readMulti', null, null, function (err, data) {
        if (err) _this5.logger.warn('loading namespaces ' + toLoad.toLoadNamespaces.join(', ') + ' for languages ' + toLoad.toLoadLanguages.join(', ') + ' via multiloading failed', err);
        if (!err && data) _this5.logger.log('successfully loaded namespaces ' + toLoad.toLoadNamespaces.join(', ') + ' for languages ' + toLoad.toLoadLanguages.join(', ') + ' via multiloading', data);

        toLoad.toLoad.forEach(function (name) {
          var _name$split3 = name.split('|'),
              _name$split4 = slicedToArray(_name$split3, 2),
              l = _name$split4[0],
              n = _name$split4[1];

          var bundle = getPath(data, [l, n]);
          if (bundle) {
            _this5.loaded(name, err, bundle);
          } else {
            var error = 'loading namespace ' + n + ' for language ' + l + ' via multiloading failed';
            _this5.loaded(name, error);
            _this5.logger.error(error);
          }
        });
      });
    } else {
      toLoad.toLoad.forEach(function (name) {
        _this5.loadOne(name);
      });
    }
  };

  Connector.prototype.reload = function reload(languages, namespaces) {
    var _this6 = this;

    if (!this.backend) {
      this.logger.warn('No backend was added via i18next.use. Will not load resources.');
    }
    var options = _extends({}, this.backend.options, this.options.backend);

    if (typeof languages === 'string') languages = this.services.languageUtils.toResolveHierarchy(languages);
    if (typeof namespaces === 'string') namespaces = [namespaces];

    // load with multi-load
    if (options.allowMultiLoading && this.backend.readMulti) {
      this.read(languages, namespaces, 'readMulti', null, null, function (err, data) {
        if (err) _this6.logger.warn('reloading namespaces ' + namespaces.join(', ') + ' for languages ' + languages.join(', ') + ' via multiloading failed', err);
        if (!err && data) _this6.logger.log('successfully reloaded namespaces ' + namespaces.join(', ') + ' for languages ' + languages.join(', ') + ' via multiloading', data);

        languages.forEach(function (l) {
          namespaces.forEach(function (n) {
            var bundle = getPath(data, [l, n]);
            if (bundle) {
              _this6.loaded(l + '|' + n, err, bundle);
            } else {
              var error = 'reloading namespace ' + n + ' for language ' + l + ' via multiloading failed';
              _this6.loaded(l + '|' + n, error);
              _this6.logger.error(error);
            }
          });
        });
      });
    } else {
      languages.forEach(function (l) {
        namespaces.forEach(function (n) {
          _this6.loadOne(l + '|' + n, 're');
        });
      });
    }
  };

  Connector.prototype.loadOne = function loadOne(name) {
    var _this7 = this;

    var prefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';

    var _name$split5 = name.split('|'),
        _name$split6 = slicedToArray(_name$split5, 2),
        lng = _name$split6[0],
        ns = _name$split6[1];

    this.read(lng, ns, 'read', null, null, function (err, data) {
      if (err) _this7.logger.warn(prefix + 'loading namespace ' + ns + ' for language ' + lng + ' failed', err);
      if (!err && data) _this7.logger.log(prefix + 'loaded namespace ' + ns + ' for language ' + lng, data);

      _this7.loaded(name, err, data);
    });
  };

  Connector.prototype.saveMissing = function saveMissing(languages, namespace, key, fallbackValue) {
    if (this.backend && this.backend.create) this.backend.create(languages, namespace, key, fallbackValue);

    // write to store to avoid resending
    if (!languages || !languages[0]) return;
    this.store.addResource(languages[0], namespace, key, fallbackValue);
  };

  return Connector;
}(EventEmitter);

var Connector$1 = function (_EventEmitter) {
  inherits(Connector, _EventEmitter);

  function Connector(cache, store, services) {
    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};
    classCallCheck(this, Connector);

    var _this = possibleConstructorReturn(this, _EventEmitter.call(this));

    _this.cache = cache;
    _this.store = store;
    _this.services = services;
    _this.options = options;
    _this.logger = baseLogger.create('cacheConnector');

    if (_this.cache && _this.cache.init) _this.cache.init(services, options.cache, options);
    return _this;
  }

  /* eslint consistent-return: 0 */


  Connector.prototype.load = function load(languages, namespaces, callback) {
    var _this2 = this;

    if (!this.cache) return callback && callback();
    var options = _extends({}, this.cache.options, this.options.cache);

    var loadLngs = typeof languages === 'string' ? this.services.languageUtils.toResolveHierarchy(languages) : languages;

    if (options.enabled) {
      this.cache.load(loadLngs, function (err, data) {
        if (err) _this2.logger.error('loading languages ' + loadLngs.join(', ') + ' from cache failed', err);
        if (data) {
          /* eslint no-restricted-syntax: 0 */
          for (var l in data) {
            if (Object.prototype.hasOwnProperty.call(data, l)) {
              for (var n in data[l]) {
                if (Object.prototype.hasOwnProperty.call(data[l], n)) {
                  if (n !== 'i18nStamp') {
                    var bundle = data[l][n];
                    if (bundle) _this2.store.addResourceBundle(l, n, bundle);
                  }
                }
              }
            }
          }
        }
        if (callback) callback();
      });
    } else if (callback) {
      callback();
    }
  };

  Connector.prototype.save = function save() {
    if (this.cache && this.options.cache && this.options.cache.enabled) this.cache.save(this.store.data);
  };

  return Connector;
}(EventEmitter);

function get$1() {
  return {
    debug: false,
    initImmediate: true,

    ns: ['translation'],
    defaultNS: ['translation'],
    fallbackLng: ['dev'],
    fallbackNS: false, // string or array of namespaces

    whitelist: false, // array with whitelisted languages
    nonExplicitWhitelist: false,
    load: 'all', // | currentOnly | languageOnly
    preload: false, // array with preload languages

    simplifyPluralSuffix: true,
    keySeparator: '.',
    nsSeparator: ':',
    pluralSeparator: '_',
    contextSeparator: '_',

    saveMissing: false, // enable to send missing values
    saveMissingTo: 'fallback', // 'current' || 'all'
    missingKeyHandler: false, // function(lng, ns, key, fallbackValue) -> override if prefer on handling

    postProcess: false, // string or array of postProcessor names
    returnNull: true, // allows null value as valid translation
    returnEmptyString: true, // allows empty string value as valid translation
    returnObjects: false,
    joinArrays: false, // or string to join array
    returnedObjectHandler: function returnedObjectHandler() {}, // function(key, value, options) triggered if key returns object but returnObjects is set to false
    parseMissingKeyHandler: false, // function(key) parsed a key that was not found in t() before returning
    appendNamespaceToMissingKey: false,
    appendNamespaceToCIMode: false,
    overloadTranslationOptionHandler: function handle(args) {
      return { defaultValue: args[1] };
    },

    interpolation: {
      escapeValue: true,
      format: function format(value, _format, lng) {
        return value;
      },
      prefix: '{{',
      suffix: '}}',
      formatSeparator: ',',
      // prefixEscaped: '{{',
      // suffixEscaped: '}}',
      // unescapeSuffix: '',
      unescapePrefix: '-',

      nestingPrefix: '$t(',
      nestingSuffix: ')',
      // nestingPrefixEscaped: '$t(',
      // nestingSuffixEscaped: ')',
      defaultVariables: undefined // object that can have values to interpolate on - extends passed in interpolation data
    }
  };
}

/* eslint no-param-reassign: 0 */
function transformOptions(options) {
  // create namespace object if namespace is passed in as string
  if (typeof options.ns === 'string') options.ns = [options.ns];
  if (typeof options.fallbackLng === 'string') options.fallbackLng = [options.fallbackLng];
  if (typeof options.fallbackNS === 'string') options.fallbackNS = [options.fallbackNS];

  // extend whitelist with cimode
  if (options.whitelist && options.whitelist.indexOf('cimode') < 0) options.whitelist.push('cimode');

  return options;
}

function noop() {}

var I18n = function (_EventEmitter) {
  inherits(I18n, _EventEmitter);

  function I18n() {
    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    var callback = arguments[1];
    classCallCheck(this, I18n);

    var _this = possibleConstructorReturn(this, _EventEmitter.call(this));

    _this.options = transformOptions(options);
    _this.services = {};
    _this.logger = baseLogger;
    _this.modules = { external: [] };

    if (callback && !_this.isInitialized && !options.isClone) {
      var _ret;

      // https://github.com/i18next/i18next/issues/879
      if (!_this.options.initImmediate) return _ret = _this.init(options, callback), possibleConstructorReturn(_this, _ret);
      setTimeout(function () {
        _this.init(options, callback);
      }, 0);
    }
    return _this;
  }

  I18n.prototype.init = function init(options, callback) {
    var _this2 = this;

    if (typeof options === 'function') {
      callback = options;
      options = {};
    }
    if (!options) options = {};

    if (options.compatibilityAPI === 'v1') {
      this.options = _extends({}, get$1(), transformOptions(convertAPIOptions(options)), {});
    } else if (options.compatibilityJSON === 'v1') {
      this.options = _extends({}, get$1(), transformOptions(convertJSONOptions(options)), {});
    } else {
      this.options = _extends({}, get$1(), this.options, transformOptions(options));
    }
    this.format = this.options.interpolation.format;
    if (!callback) callback = noop;

    function createClassOnDemand(ClassOrObject) {
      if (!ClassOrObject) return null;
      if (typeof ClassOrObject === 'function') return new ClassOrObject();
      return ClassOrObject;
    }

    // init services
    if (!this.options.isClone) {
      if (this.modules.logger) {
        baseLogger.init(createClassOnDemand(this.modules.logger), this.options);
      } else {
        baseLogger.init(null, this.options);
      }

      var lu = new LanguageUtil(this.options);
      this.store = new ResourceStore(this.options.resources, this.options);

      var s = this.services;
      s.logger = baseLogger;
      s.resourceStore = this.store;
      s.resourceStore.on('added removed', function (lng, ns) {
        s.cacheConnector.save();
      });
      s.languageUtils = lu;
      s.pluralResolver = new PluralResolver(lu, { prepend: this.options.pluralSeparator, compatibilityJSON: this.options.compatibilityJSON, simplifyPluralSuffix: this.options.simplifyPluralSuffix });
      s.interpolator = new Interpolator(this.options);

      s.backendConnector = new Connector(createClassOnDemand(this.modules.backend), s.resourceStore, s, this.options);
      // pipe events from backendConnector
      s.backendConnector.on('*', function (event) {
        for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
          args[_key - 1] = arguments[_key];
        }

        _this2.emit.apply(_this2, [event].concat(args));
      });

      s.backendConnector.on('loaded', function (loaded) {
        s.cacheConnector.save();
      });

      s.cacheConnector = new Connector$1(createClassOnDemand(this.modules.cache), s.resourceStore, s, this.options);
      // pipe events from backendConnector
      s.cacheConnector.on('*', function (event) {
        for (var _len2 = arguments.length, args = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
          args[_key2 - 1] = arguments[_key2];
        }

        _this2.emit.apply(_this2, [event].concat(args));
      });

      if (this.modules.languageDetector) {
        s.languageDetector = createClassOnDemand(this.modules.languageDetector);
        s.languageDetector.init(s, this.options.detection, this.options);
      }

      this.translator = new Translator(this.services, this.options);
      // pipe events from translator
      this.translator.on('*', function (event) {
        for (var _len3 = arguments.length, args = Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {
          args[_key3 - 1] = arguments[_key3];
        }

        _this2.emit.apply(_this2, [event].concat(args));
      });

      this.modules.external.forEach(function (m) {
        if (m.init) m.init(_this2);
      });
    }

    // append api
    var storeApi = ['getResource', 'addResource', 'addResources', 'addResourceBundle', 'removeResourceBundle', 'hasResourceBundle', 'getResourceBundle'];
    storeApi.forEach(function (fcName) {
      _this2[fcName] = function () {
        var _store;

        return (_store = _this2.store)[fcName].apply(_store, arguments);
      };
    });

    // COMPATIBILITY: remove this
    if (this.options.compatibilityAPI === 'v1') appendBackwardsAPI(this);

    var load = function load() {
      _this2.changeLanguage(_this2.options.lng, function (err, t) {
        _this2.isInitialized = true;
        _this2.logger.log('initialized', _this2.options);
        _this2.emit('initialized', _this2.options);

        callback(err, t);
      });
    };

    if (this.options.resources || !this.options.initImmediate) {
      load();
    } else {
      setTimeout(load, 0);
    }

    return this;
  };

  /* eslint consistent-return: 0 */


  I18n.prototype.loadResources = function loadResources() {
    var _this3 = this;

    var callback = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : noop;

    if (!this.options.resources) {
      if (this.language && this.language.toLowerCase() === 'cimode') return callback(); // avoid loading resources for cimode

      var toLoad = [];

      var append = function append(lng) {
        if (!lng) return;
        var lngs = _this3.services.languageUtils.toResolveHierarchy(lng);
        lngs.forEach(function (l) {
          if (toLoad.indexOf(l) < 0) toLoad.push(l);
        });
      };

      if (!this.language) {
        // at least load fallbacks in this case
        var fallbacks = this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);
        fallbacks.forEach(function (l) {
          return append(l);
        });
      } else {
        append(this.language);
      }

      if (this.options.preload) {
        this.options.preload.forEach(function (l) {
          return append(l);
        });
      }

      this.services.cacheConnector.load(toLoad, this.options.ns, function () {
        _this3.services.backendConnector.load(toLoad, _this3.options.ns, callback);
      });
    } else {
      callback(null);
    }
  };

  I18n.prototype.reloadResources = function reloadResources(lngs, ns) {
    if (!lngs) lngs = this.languages;
    if (!ns) ns = this.options.ns;
    this.services.backendConnector.reload(lngs, ns);
  };

  I18n.prototype.use = function use(module) {
    if (module.type === 'backend') {
      this.modules.backend = module;
    }

    if (module.type === 'cache') {
      this.modules.cache = module;
    }

    if (module.type === 'logger' || module.log && module.warn && module.error) {
      this.modules.logger = module;
    }

    if (module.type === 'languageDetector') {
      this.modules.languageDetector = module;
    }

    if (module.type === 'postProcessor') {
      postProcessor.addPostProcessor(module);
    }

    if (module.type === '3rdParty') {
      this.modules.external.push(module);
    }

    return this;
  };

  I18n.prototype.changeLanguage = function changeLanguage(lng, callback) {
    var _this4 = this;

    var done = function done(err, l) {
      if (l) {
        _this4.emit('languageChanged', l);
        _this4.logger.log('languageChanged', l);
      }

      if (callback) callback(err, function () {
        return _this4.t.apply(_this4, arguments);
      });
    };

    var setLng = function setLng(l) {
      if (l) {
        _this4.language = l;
        _this4.languages = _this4.services.languageUtils.toResolveHierarchy(l);

        _this4.translator.changeLanguage(l);

        if (_this4.services.languageDetector) _this4.services.languageDetector.cacheUserLanguage(l);
      }

      _this4.loadResources(function (err) {
        done(err, l);
      });
    };

    if (!lng && this.services.languageDetector && !this.services.languageDetector.async) {
      setLng(this.services.languageDetector.detect());
    } else if (!lng && this.services.languageDetector && this.services.languageDetector.async) {
      this.services.languageDetector.detect(setLng);
    } else {
      setLng(lng);
    }
  };

  I18n.prototype.getFixedT = function getFixedT(lng, ns) {
    var _this5 = this;

    var fixedT = function fixedT(key) {
      var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

      var options = _extends({}, opts);
      options.lng = options.lng || fixedT.lng;
      options.lngs = options.lngs || fixedT.lngs;
      options.ns = options.ns || fixedT.ns;
      return _this5.t(key, options);
    };
    if (typeof lng === 'string') {
      fixedT.lng = lng;
    } else {
      fixedT.lngs = lng;
    }
    fixedT.ns = ns;
    return fixedT;
  };

  I18n.prototype.t = function t() {
    var _translator;

    return this.translator && (_translator = this.translator).translate.apply(_translator, arguments);
  };

  I18n.prototype.exists = function exists() {
    var _translator2;

    return this.translator && (_translator2 = this.translator).exists.apply(_translator2, arguments);
  };

  I18n.prototype.setDefaultNamespace = function setDefaultNamespace(ns) {
    this.options.defaultNS = ns;
  };

  I18n.prototype.loadNamespaces = function loadNamespaces(ns, callback) {
    var _this6 = this;

    if (!this.options.ns) return callback && callback();
    if (typeof ns === 'string') ns = [ns];

    ns.forEach(function (n) {
      if (_this6.options.ns.indexOf(n) < 0) _this6.options.ns.push(n);
    });

    this.loadResources(callback);
  };

  I18n.prototype.loadLanguages = function loadLanguages(lngs, callback) {
    if (typeof lngs === 'string') lngs = [lngs];
    var preloaded = this.options.preload || [];

    var newLngs = lngs.filter(function (lng) {
      return preloaded.indexOf(lng) < 0;
    });
    // Exit early if all given languages are already preloaded
    if (!newLngs.length) return callback();

    this.options.preload = preloaded.concat(newLngs);
    this.loadResources(callback);
  };

  I18n.prototype.dir = function dir(lng) {
    if (!lng) lng = this.languages && this.languages.length > 0 ? this.languages[0] : this.language;
    if (!lng) return 'rtl';

    var rtlLngs = ['ar', 'shu', 'sqr', 'ssh', 'xaa', 'yhd', 'yud', 'aao', 'abh', 'abv', 'acm', 'acq', 'acw', 'acx', 'acy', 'adf', 'ads', 'aeb', 'aec', 'afb', 'ajp', 'apc', 'apd', 'arb', 'arq', 'ars', 'ary', 'arz', 'auz', 'avl', 'ayh', 'ayl', 'ayn', 'ayp', 'bbz', 'pga', 'he', 'iw', 'ps', 'pbt', 'pbu', 'pst', 'prp', 'prd', 'ur', 'ydd', 'yds', 'yih', 'ji', 'yi', 'hbo', 'men', 'xmn', 'fa', 'jpr', 'peo', 'pes', 'prs', 'dv', 'sam'];

    return rtlLngs.indexOf(this.services.languageUtils.getLanguagePartFromCode(lng)) >= 0 ? 'rtl' : 'ltr';
  };

  /* eslint class-methods-use-this: 0 */


  I18n.prototype.createInstance = function createInstance() {
    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    var callback = arguments[1];

    return new I18n(options, callback);
  };

  I18n.prototype.cloneInstance = function cloneInstance() {
    var _this7 = this;

    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;

    var mergedOptions = _extends({}, this.options, options, { isClone: true });
    var clone = new I18n(mergedOptions, callback);
    var membersToCopy = ['store', 'services', 'language'];
    membersToCopy.forEach(function (m) {
      clone[m] = _this7[m];
    });
    clone.translator = new Translator(clone.services, clone.options);
    clone.translator.on('*', function (event) {
      for (var _len4 = arguments.length, args = Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {
        args[_key4 - 1] = arguments[_key4];
      }

      clone.emit.apply(clone, [event].concat(args));
    });
    clone.init(mergedOptions, callback);

    return clone;
  };

  return I18n;
}(EventEmitter);

var i18next = new I18n();

return i18next;

})));


/***/ }),
/* 6 */
/***/ (function(module, exports, __webpack_require__) {

(function (global, factory) {
   true ? module.exports = factory() :
  typeof define === 'function' && define.amd ? define(factory) :
  (global.i18nextXHRBackend = factory());
}(this, (function () { 'use strict';

var arr = [];
var each = arr.forEach;
var slice = arr.slice;

function defaults(obj) {
  each.call(slice.call(arguments, 1), function (source) {
    if (source) {
      for (var prop in source) {
        if (obj[prop] === undefined) obj[prop] = source[prop];
      }
    }
  });
  return obj;
}

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

function addQueryString(url, params) {
  if (params && (typeof params === 'undefined' ? 'undefined' : _typeof(params)) === 'object') {
    var queryString = '',
        e = encodeURIComponent;

    // Must encode data
    for (var paramName in params) {
      queryString += '&' + e(paramName) + '=' + e(params[paramName]);
    }

    if (!queryString) {
      return url;
    }

    url = url + (url.indexOf('?') !== -1 ? '&' : '?') + queryString.slice(1);
  }

  return url;
}

// https://gist.github.com/Xeoncross/7663273
function ajax(url, options, callback, data, cache) {

  if (data && (typeof data === 'undefined' ? 'undefined' : _typeof(data)) === 'object') {
    if (!cache) {
      data['_t'] = new Date();
    }
    // URL encoded form data must be in querystring format
    data = addQueryString('', data).slice(1);
  }

  if (options.queryStringParams) {
    url = addQueryString(url, options.queryStringParams);
  }

  try {
    var x;
    if (XMLHttpRequest) {
      x = new XMLHttpRequest();
    } else {
      x = new ActiveXObject('MSXML2.XMLHTTP.3.0');
    }
    x.open(data ? 'POST' : 'GET', url, 1);
    if (!options.crossDomain) {
      x.setRequestHeader('X-Requested-With', 'XMLHttpRequest');
    }
    x.withCredentials = !!options.withCredentials;
    if (data) {
      x.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
    }
    var h = options.customHeaders;
    if (h) {
      for (var i in h) {
        x.setRequestHeader(i, h[i]);
      }
    }
    x.onreadystatechange = function () {
      x.readyState > 3 && callback && callback(x.responseText, x);
    };
    x.send(data);
  } catch (e) {
    console && console.log(e);
  }
}

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function getDefaults() {
  return {
    loadPath: '/locales/{{lng}}/{{ns}}.json',
    addPath: 'locales/add/{{lng}}/{{ns}}',
    allowMultiLoading: false,
    parse: JSON.parse,
    crossDomain: false,
    ajax: ajax
  };
}

var Backend = function () {
  function Backend(services) {
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

    _classCallCheck(this, Backend);

    this.init(services, options);

    this.type = 'backend';
  }

  _createClass(Backend, [{
    key: 'init',
    value: function init(services) {
      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

      this.services = services;
      this.options = defaults(options, this.options || {}, getDefaults());
    }
  }, {
    key: 'readMulti',
    value: function readMulti(languages, namespaces, callback) {
      var loadPath = this.options.loadPath;
      if (typeof this.options.loadPath === 'function') {
        loadPath = this.options.loadPath(languages, namespaces);
      }

      var url = this.services.interpolator.interpolate(loadPath, { lng: languages.join('+'), ns: namespaces.join('+') });

      this.loadUrl(url, callback);
    }
  }, {
    key: 'read',
    value: function read(language, namespace, callback) {
      var loadPath = this.options.loadPath;
      if (typeof this.options.loadPath === 'function') {
        loadPath = this.options.loadPath([language], [namespace]);
      }

      var url = this.services.interpolator.interpolate(loadPath, { lng: language, ns: namespace });

      this.loadUrl(url, callback);
    }
  }, {
    key: 'loadUrl',
    value: function loadUrl(url, callback) {
      var _this = this;

      this.options.ajax(url, this.options, function (data, xhr) {
        if (xhr.status >= 500 && xhr.status < 600) return callback('failed loading ' + url, true /* retry */);
        if (xhr.status >= 400 && xhr.status < 500) return callback('failed loading ' + url, false /* no retry */);

        var ret = void 0,
            err = void 0;
        try {
          ret = _this.options.parse(data, url);
        } catch (e) {
          err = 'failed parsing ' + url + ' to json';
        }
        if (err) return callback(err, false);
        callback(null, ret);
      });
    }
  }, {
    key: 'create',
    value: function create(languages, namespace, key, fallbackValue) {
      var _this2 = this;

      if (typeof languages === 'string') languages = [languages];

      var payload = {};
      payload[key] = fallbackValue || '';

      languages.forEach(function (lng) {
        var url = _this2.services.interpolator.interpolate(_this2.options.addPath, { lng: lng, ns: namespace });

        _this2.options.ajax(url, _this2.options, function (data, xhr) {
          //const statusCode = xhr.status.toString();
          // TODO: if statusCode === 4xx do log
        }, payload);
      });
    }
  }]);

  return Backend;
}();

Backend.type = 'backend';

return Backend;

})));


/***/ }),
/* 7 */
/***/ (function(module, exports, __webpack_require__) {

(function (global, factory) {
     true ? module.exports = factory() :
    typeof define === 'function' && define.amd ? define(factory) :
    (global.i18nextLocalStorageCache = factory());
}(this, (function () { 'use strict';

var arr = [];
var each = arr.forEach;
var slice = arr.slice;

function defaults(obj) {
  each.call(slice.call(arguments, 1), function (source) {
    if (source) {
      for (var prop in source) {
        if (obj[prop] === undefined) obj[prop] = source[prop];
      }
    }
  });
  return obj;
}



function debounce(func, wait, immediate) {
  var timeout;
  return function () {
    var context = this,
        args = arguments;
    var later = function later() {
      timeout = null;
      if (!immediate) func.apply(context, args);
    };
    var callNow = immediate && !timeout;
    clearTimeout(timeout);
    timeout = setTimeout(later, wait);
    if (callNow) func.apply(context, args);
  };
}

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var storage = {
  setItem: function setItem(key, value) {
    if (window.localStorage) {
      try {
        window.localStorage.setItem(key, value);
      } catch (e) {
        // f.log('failed to set value for key "' + key + '" to localStorage.');
      }
    }
  },
  getItem: function getItem(key, value) {
    if (window.localStorage) {
      try {
        return window.localStorage.getItem(key, value);
      } catch (e) {
        // f.log('failed to get value for key "' + key + '" from localStorage.');
      }
    }
    return undefined;
  }
};

function getDefaults() {
  return {
    enabled: false,
    prefix: 'i18next_res_',
    expirationTime: 7 * 24 * 60 * 60 * 1000,
    versions: {}
  };
}

var Cache = function () {
  function Cache(services) {
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

    _classCallCheck(this, Cache);

    this.init(services, options);

    this.type = 'cache';
    this.debouncedStore = debounce(this.store, 10000);
  }

  _createClass(Cache, [{
    key: 'init',
    value: function init(services) {
      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

      this.services = services;
      this.options = defaults(options, this.options || {}, getDefaults());
    }
  }, {
    key: 'load',
    value: function load(lngs, callback) {
      var _this = this;

      var store = {};
      var nowMS = new Date().getTime();

      if (!window.localStorage || !lngs.length) {
        return callback(null, null);
      }

      var todo = lngs.length;

      lngs.forEach(function (lng) {
        var local = storage.getItem(_this.options.prefix + lng);

        if (local) {
          local = JSON.parse(local);
          if (
          // expiration field is mandatory, and should not be expired
          local.i18nStamp && local.i18nStamp + _this.options.expirationTime > nowMS &&

          // there should be no language version set, or if it is, it should match the one in translation
          _this.options.versions[lng] === local.i18nVersion) {
            delete local.i18nVersion;
            store[lng] = local;
          }
        }

        todo -= 1;
        if (todo === 0) {
          callback(null, store);
        }
      });
      return undefined;
    }
  }, {
    key: 'store',
    value: function store(storeParam) {
      var store = storeParam;
      if (window.localStorage) {
        for (var m in store) {
          // eslint-disable-line
          // timestamp
          store[m].i18nStamp = new Date().getTime();

          // language version (if set)
          if (this.options.versions[m]) {
            store[m].i18nVersion = this.options.versions[m];
          }

          // save
          storage.setItem(this.options.prefix + m, JSON.stringify(store[m]));
        }
      }
    }
  }, {
    key: 'save',
    value: function save(store) {
      this.debouncedStore(store);
    }
  }]);

  return Cache;
}();

Cache.type = 'cache';

return Cache;

})));


/***/ }),
/* 8 */
/***/ (function(module, exports, __webpack_require__) {

(function (global, factory) {
     true ? module.exports = factory() :
    typeof define === 'function' && define.amd ? define('i18nextSprintfPostProcessor', factory) :
    (global.i18nextSprintfPostProcessor = factory());
}(this, function () { 'use strict';

    var babelHelpers = {};
    babelHelpers.typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) {
      return typeof obj;
    } : function (obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol ? "symbol" : typeof obj;
    };
    babelHelpers;

    var re = {
        not_string: /[^s]/,
        number: /[diefg]/,
        json: /[j]/,
        not_json: /[^j]/,
        text: /^[^\x25]+/,
        modulo: /^\x25{2}/,
        placeholder: /^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijosuxX])/,
        key: /^([a-z_][a-z_\d]*)/i,
        key_access: /^\.([a-z_][a-z_\d]*)/i,
        index_access: /^\[(\d+)\]/,
        sign: /^[\+\-]/
    };

    function sprintf() {
        var key = arguments[0],
            cache = sprintf.cache;
        if (!(cache[key] && cache.hasOwnProperty(key))) {
            cache[key] = sprintf.parse(key);
        }
        return sprintf.format.call(null, cache[key], arguments);
    }

    sprintf.format = function (parse_tree, argv) {
        var cursor = 1,
            tree_length = parse_tree.length,
            node_type = "",
            arg,
            output = [],
            i,
            k,
            match,
            pad,
            pad_character,
            pad_length,
            is_positive = true,
            sign = "";
        for (i = 0; i < tree_length; i++) {
            node_type = get_type(parse_tree[i]);
            if (node_type === "string") {
                output[output.length] = parse_tree[i];
            } else if (node_type === "array") {
                match = parse_tree[i]; // convenience purposes only
                if (match[2]) {
                    // keyword argument
                    arg = argv[cursor];
                    for (k = 0; k < match[2].length; k++) {
                        if (!arg.hasOwnProperty(match[2][k])) {
                            throw new Error(sprintf("[sprintf] property '%s' does not exist", match[2][k]));
                        }
                        arg = arg[match[2][k]];
                    }
                } else if (match[1]) {
                    // positional argument (explicit)
                    arg = argv[match[1]];
                } else {
                    // positional argument (implicit)
                    arg = argv[cursor++];
                }

                if (get_type(arg) == "function") {
                    arg = arg();
                }

                if (re.not_string.test(match[8]) && re.not_json.test(match[8]) && get_type(arg) != "number" && isNaN(arg)) {
                    throw new TypeError(sprintf("[sprintf] expecting number but found %s", get_type(arg)));
                }

                if (re.number.test(match[8])) {
                    is_positive = arg >= 0;
                }

                switch (match[8]) {
                    case "b":
                        arg = arg.toString(2);
                        break;
                    case "c":
                        arg = String.fromCharCode(arg);
                        break;
                    case "d":
                    case "i":
                        arg = parseInt(arg, 10);
                        break;
                    case "j":
                        arg = JSON.stringify(arg, null, match[6] ? parseInt(match[6]) : 0);
                        break;
                    case "e":
                        arg = match[7] ? arg.toExponential(match[7]) : arg.toExponential();
                        break;
                    case "f":
                        arg = match[7] ? parseFloat(arg).toFixed(match[7]) : parseFloat(arg);
                        break;
                    case "g":
                        arg = match[7] ? parseFloat(arg).toPrecision(match[7]) : parseFloat(arg);
                        break;
                    case "o":
                        arg = arg.toString(8);
                        break;
                    case "s":
                        arg = (arg = String(arg)) && match[7] ? arg.substring(0, match[7]) : arg;
                        break;
                    case "u":
                        arg = arg >>> 0;
                        break;
                    case "x":
                        arg = arg.toString(16);
                        break;
                    case "X":
                        arg = arg.toString(16).toUpperCase();
                        break;
                }
                if (re.json.test(match[8])) {
                    output[output.length] = arg;
                } else {
                    if (re.number.test(match[8]) && (!is_positive || match[3])) {
                        sign = is_positive ? "+" : "-";
                        arg = arg.toString().replace(re.sign, "");
                    } else {
                        sign = "";
                    }
                    pad_character = match[4] ? match[4] === "0" ? "0" : match[4].charAt(1) : " ";
                    pad_length = match[6] - (sign + arg).length;
                    pad = match[6] ? pad_length > 0 ? str_repeat(pad_character, pad_length) : "" : "";
                    output[output.length] = match[5] ? sign + arg + pad : pad_character === "0" ? sign + pad + arg : pad + sign + arg;
                }
            }
        }
        return output.join("");
    };

    sprintf.cache = {};

    sprintf.parse = function (fmt) {
        var _fmt = fmt,
            match = [],
            parse_tree = [],
            arg_names = 0;
        while (_fmt) {
            if ((match = re.text.exec(_fmt)) !== null) {
                parse_tree[parse_tree.length] = match[0];
            } else if ((match = re.modulo.exec(_fmt)) !== null) {
                parse_tree[parse_tree.length] = "%";
            } else if ((match = re.placeholder.exec(_fmt)) !== null) {
                if (match[2]) {
                    arg_names |= 1;
                    var field_list = [],
                        replacement_field = match[2],
                        field_match = [];
                    if ((field_match = re.key.exec(replacement_field)) !== null) {
                        field_list[field_list.length] = field_match[1];
                        while ((replacement_field = replacement_field.substring(field_match[0].length)) !== "") {
                            if ((field_match = re.key_access.exec(replacement_field)) !== null) {
                                field_list[field_list.length] = field_match[1];
                            } else if ((field_match = re.index_access.exec(replacement_field)) !== null) {
                                field_list[field_list.length] = field_match[1];
                            } else {
                                throw new SyntaxError("[sprintf] failed to parse named argument key");
                            }
                        }
                    } else {
                        throw new SyntaxError("[sprintf] failed to parse named argument key");
                    }
                    match[2] = field_list;
                } else {
                    arg_names |= 2;
                }
                if (arg_names === 3) {
                    throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");
                }
                parse_tree[parse_tree.length] = match;
            } else {
                throw new SyntaxError("[sprintf] unexpected placeholder");
            }
            _fmt = _fmt.substring(match[0].length);
        }
        return parse_tree;
    };

    function vsprintf(fmt, argv, _argv) {
        _argv = (argv || []).slice(0);
        _argv.splice(0, 0, fmt);
        return sprintf.apply(null, _argv);
    }

    /**
     * helpers
     */
    function get_type(variable) {
        return Object.prototype.toString.call(variable).slice(8, -1).toLowerCase();
    }

    function str_repeat(input, multiplier) {
        return Array(multiplier + 1).join(input);
    }

    var index = {
      name: 'sprintf',
      type: 'postProcessor',

      process: function process(value, key, options) {
        if (!options.sprintf) return value;

        if (Object.prototype.toString.apply(options.sprintf) === '[object Array]') {
          return vsprintf(value, options.sprintf);
        } else if (babelHelpers.typeof(options.sprintf) === 'object') {
          return sprintf(value, options.sprintf);
        }

        return value;
      },
      overloadTranslationOptionHandler: function overloadTranslationOptionHandler(args) {
        var values = [];

        for (var i = 1; i < args.length; i++) {
          values.push(args[i]);
        }

        return {
          postProcess: 'sprintf',
          sprintf: values
        };
      }
    };

    return index;

}));

/***/ }),
/* 9 */
/***/ (function(module, exports, __webpack_require__) {

(function (global, factory) {
   true ? module.exports = factory() :
  typeof define === 'function' && define.amd ? define(factory) :
  (global.i18nextBrowserLanguageDetector = factory());
}(this, function () { 'use strict';

  var babelHelpers = {};

  babelHelpers.classCallCheck = function (instance, Constructor) {
    if (!(instance instanceof Constructor)) {
      throw new TypeError("Cannot call a class as a function");
    }
  };

  babelHelpers.createClass = function () {
    function defineProperties(target, props) {
      for (var i = 0; i < props.length; i++) {
        var descriptor = props[i];
        descriptor.enumerable = descriptor.enumerable || false;
        descriptor.configurable = true;
        if ("value" in descriptor) descriptor.writable = true;
        Object.defineProperty(target, descriptor.key, descriptor);
      }
    }

    return function (Constructor, protoProps, staticProps) {
      if (protoProps) defineProperties(Constructor.prototype, protoProps);
      if (staticProps) defineProperties(Constructor, staticProps);
      return Constructor;
    };
  }();

  babelHelpers;

  var arr = [];
  var each = arr.forEach;
  var slice = arr.slice;

  function defaults(obj) {
    each.call(slice.call(arguments, 1), function (source) {
      if (source) {
        for (var prop in source) {
          if (obj[prop] === undefined) obj[prop] = source[prop];
        }
      }
    });
    return obj;
  }

  var cookie = {
    create: function create(name, value, minutes, domain) {
      var expires = void 0;
      if (minutes) {
        var date = new Date();
        date.setTime(date.getTime() + minutes * 60 * 1000);
        expires = '; expires=' + date.toGMTString();
      } else expires = '';
      domain = domain ? 'domain=' + domain + ';' : '';
      document.cookie = name + '=' + value + expires + ';' + domain + 'path=/';
    },

    read: function read(name) {
      var nameEQ = name + '=';
      var ca = document.cookie.split(';');
      for (var i = 0; i < ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0) === ' ') {
          c = c.substring(1, c.length);
        }if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length, c.length);
      }
      return null;
    },

    remove: function remove(name) {
      this.create(name, '', -1);
    }
  };

  var cookie$1 = {
    name: 'cookie',

    lookup: function lookup(options) {
      var found = void 0;

      if (options.lookupCookie && typeof document !== 'undefined') {
        var c = cookie.read(options.lookupCookie);
        if (c) found = c;
      }

      return found;
    },
    cacheUserLanguage: function cacheUserLanguage(lng, options) {
      if (options.lookupCookie && typeof document !== 'undefined') {
        cookie.create(options.lookupCookie, lng, options.cookieMinutes, options.cookieDomain);
      }
    }
  };

  var querystring = {
    name: 'querystring',

    lookup: function lookup(options) {
      var found = void 0;

      if (typeof window !== 'undefined') {
        var query = window.location.search.substring(1);
        var params = query.split('&');
        for (var i = 0; i < params.length; i++) {
          var pos = params[i].indexOf('=');
          if (pos > 0) {
            var key = params[i].substring(0, pos);
            if (key === options.lookupQuerystring) {
              found = params[i].substring(pos + 1);
            }
          }
        }
      }

      return found;
    }
  };

  var hasLocalStorageSupport = void 0;
  try {
    hasLocalStorageSupport = window !== 'undefined' && window.localStorage !== null;
    var testKey = 'i18next.translate.boo';
    window.localStorage.setItem(testKey, 'foo');
    window.localStorage.removeItem(testKey);
  } catch (e) {
    hasLocalStorageSupport = false;
  }

  var localStorage = {
    name: 'localStorage',

    lookup: function lookup(options) {
      var found = void 0;

      if (options.lookupLocalStorage && hasLocalStorageSupport) {
        var lng = window.localStorage.getItem(options.lookupLocalStorage);
        if (lng) found = lng;
      }

      return found;
    },
    cacheUserLanguage: function cacheUserLanguage(lng, options) {
      if (options.lookupLocalStorage && hasLocalStorageSupport) {
        window.localStorage.setItem(options.lookupLocalStorage, lng);
      }
    }
  };

  var navigator$1 = {
    name: 'navigator',

    lookup: function lookup(options) {
      var found = [];

      if (typeof navigator !== 'undefined') {
        if (navigator.languages) {
          // chrome only; not an array, so can't use .push.apply instead of iterating
          for (var i = 0; i < navigator.languages.length; i++) {
            found.push(navigator.languages[i]);
          }
        }
        if (navigator.userLanguage) {
          found.push(navigator.userLanguage);
        }
        if (navigator.language) {
          found.push(navigator.language);
        }
      }

      return found.length > 0 ? found : undefined;
    }
  };

  var htmlTag = {
    name: 'htmlTag',

    lookup: function lookup(options) {
      var found = void 0;
      var htmlTag = options.htmlTag || (typeof document !== 'undefined' ? document.documentElement : null);

      if (htmlTag && typeof htmlTag.getAttribute === 'function') {
        found = htmlTag.getAttribute('lang');
      }

      return found;
    }
  };

  function getDefaults() {
    return {
      order: ['querystring', 'cookie', 'localStorage', 'navigator', 'htmlTag'],
      lookupQuerystring: 'lng',
      lookupCookie: 'i18next',
      lookupLocalStorage: 'i18nextLng',

      // cache user language
      caches: ['localStorage'],
      excludeCacheFor: ['cimode']
      //cookieMinutes: 10,
      //cookieDomain: 'myDomain'
    };
  }

  var Browser = function () {
    function Browser(services) {
      var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];
      babelHelpers.classCallCheck(this, Browser);

      this.type = 'languageDetector';
      this.detectors = {};

      this.init(services, options);
    }

    babelHelpers.createClass(Browser, [{
      key: 'init',
      value: function init(services) {
        var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];
        var i18nOptions = arguments.length <= 2 || arguments[2] === undefined ? {} : arguments[2];

        this.services = services;
        this.options = defaults(options, this.options || {}, getDefaults());
        this.i18nOptions = i18nOptions;

        this.addDetector(cookie$1);
        this.addDetector(querystring);
        this.addDetector(localStorage);
        this.addDetector(navigator$1);
        this.addDetector(htmlTag);
      }
    }, {
      key: 'addDetector',
      value: function addDetector(detector) {
        this.detectors[detector.name] = detector;
      }
    }, {
      key: 'detect',
      value: function detect(detectionOrder) {
        var _this = this;

        if (!detectionOrder) detectionOrder = this.options.order;

        var detected = [];
        detectionOrder.forEach(function (detectorName) {
          if (_this.detectors[detectorName]) {
            var lookup = _this.detectors[detectorName].lookup(_this.options);
            if (lookup && typeof lookup === 'string') lookup = [lookup];
            if (lookup) detected = detected.concat(lookup);
          }
        });

        var found = void 0;
        detected.forEach(function (lng) {
          if (found) return;
          var cleanedLng = _this.services.languageUtils.formatLanguageCode(lng);
          if (_this.services.languageUtils.isWhitelisted(cleanedLng)) found = cleanedLng;
        });

        return found || this.i18nOptions.fallbackLng[0];
      }
    }, {
      key: 'cacheUserLanguage',
      value: function cacheUserLanguage(lng, caches) {
        var _this2 = this;

        if (!caches) caches = this.options.caches;
        if (!caches) return;
        if (this.options.excludeCacheFor && this.options.excludeCacheFor.indexOf(lng) > -1) return;
        caches.forEach(function (cacheName) {
          if (_this2.detectors[cacheName]) _this2.detectors[cacheName].cacheUserLanguage(lng, _this2.options);
        });
      }
    }]);
    return Browser;
  }();

  Browser.type = 'languageDetector';

  return Browser;

}));

/***/ })
/******/ ]);
});
/*!
 * cdp.framework.jqm.js 2.0.0
 *
 * Date: 2017-07-24T05:04:25.636Z
 */

(function webpackUniversalModuleDefinition(root, factory) {
    if(typeof exports === 'object' && typeof module === 'object')
        module.exports = factory(require("cdp.i18n"), require("backbone"), require("jquery"));
    else if(typeof define === 'function' && define.amd)
        define("cdp.framework.jqm",["cdp.i18n", "backbone", "jquery"], factory);
    else if(typeof exports === 'object')
        exports["Framework"] = factory(require("cdp.i18n"), require("backbone"), require("jquery"));
    else
        root["CDP"] = root["CDP"] || {}, root["CDP"]["Framework"] = factory(root["CDP"], root["Backbone"], root["jQuery"]);
})(this, function(__WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_5__) {
return /******/ (function(modules) { // webpackBootstrap
/******/     // The module cache
/******/     var installedModules = {};
/******/
/******/     // The require function
/******/     function __webpack_require__(moduleId) {
/******/
/******/         // Check if module is in cache
/******/         if(installedModules[moduleId]) {
/******/             return installedModules[moduleId].exports;
/******/         }
/******/         // Create a new module (and put it into the cache)
/******/         var module = installedModules[moduleId] = {
/******/             i: moduleId,
/******/             l: false,
/******/             exports: {}
/******/         };
/******/
/******/         // Execute the module function
/******/         modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/         // Flag the module as loaded
/******/         module.l = true;
/******/
/******/         // Return the exports of the module
/******/         return module.exports;
/******/     }
/******/
/******/
/******/     // expose the modules object (__webpack_modules__)
/******/     __webpack_require__.m = modules;
/******/
/******/     // expose the module cache
/******/     __webpack_require__.c = installedModules;
/******/
/******/     // define getter function for harmony exports
/******/     __webpack_require__.d = function(exports, name, getter) {
/******/         if(!__webpack_require__.o(exports, name)) {
/******/             Object.defineProperty(exports, name, {
/******/                 configurable: false,
/******/                 enumerable: true,
/******/                 get: getter
/******/             });
/******/         }
/******/     };
/******/
/******/     // getDefaultExport function for compatibility with non-harmony modules
/******/     __webpack_require__.n = function(module) {
/******/         var getter = module && module.__esModule ?
/******/             function getDefault() { return module['default']; } :
/******/             function getModuleExports() { return module; };
/******/         __webpack_require__.d(getter, 'a', getter);
/******/         return getter;
/******/     };
/******/
/******/     // Object.prototype.hasOwnProperty.call
/******/     __webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/     // __webpack_public_path__
/******/     __webpack_require__.p = "";
/******/
/******/     // Load entry module and return exports
/******/     return __webpack_require__(__webpack_require__.s = 1);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*** IMPORTS FROM imports-loader ***/
(function() {

/*!
* jQuery Mobile 1.4.5
* Git HEAD hash: 68e55e78b292634d3991c795f06f5e37a512decc <> Date: Fri Oct 31 2014 17:33:30 UTC
* http://jquerymobile.com
*
* Copyright 2010, 2014 jQuery Foundation, Inc. and othercontributors
* Released under the MIT license.
* http://jquery.org/license
*
*/


(function ( root, doc, factory ) {
    if ( true ) {
        // AMD. Register as an anonymous module.
        !(__WEBPACK_AMD_DEFINE_ARRAY__ = [ __webpack_require__(5) ], __WEBPACK_AMD_DEFINE_RESULT__ = function ( $ ) {
            factory( $, root, doc );
            return $.mobile;
        }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
                __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
    } else {
        // Browser globals
        factory( root.jQuery, root, doc );
    }
}( this, document, function ( jQuery, window, document, undefined ) {
(function( $ ) {
    $.mobile = {};
}( jQuery ));

/*!
 * jQuery UI Core c0ab71056b936627e8a7821f03c044aec6280a40
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/ui-core/
 */
(function( $, undefined ) {

var uuid = 0,
    runiqueId = /^ui-id-\d+$/;

// $.ui might exist from components with no dependencies, e.g., $.ui.position
$.ui = $.ui || {};

$.extend( $.ui, {
    version: "c0ab71056b936627e8a7821f03c044aec6280a40",

    keyCode: {
        BACKSPACE: 8,
        COMMA: 188,
        DELETE: 46,
        DOWN: 40,
        END: 35,
        ENTER: 13,
        ESCAPE: 27,
        HOME: 36,
        LEFT: 37,
        PAGE_DOWN: 34,
        PAGE_UP: 33,
        PERIOD: 190,
        RIGHT: 39,
        SPACE: 32,
        TAB: 9,
        UP: 38
    }
});

// plugins
$.fn.extend({
    focus: (function( orig ) {
        return function( delay, fn ) {
            return typeof delay === "number" ?
                this.each(function() {
                    var elem = this;
                    setTimeout(function() {
                        $( elem ).focus();
                        if ( fn ) {
                            fn.call( elem );
                        }
                    }, delay );
                }) :
                orig.apply( this, arguments );
        };
    })( $.fn.focus ),

    scrollParent: function() {
        var scrollParent;
        if (($.ui.ie && (/(static|relative)/).test(this.css("position"))) || (/absolute/).test(this.css("position"))) {
            scrollParent = this.parents().filter(function() {
                return (/(relative|absolute|fixed)/).test($.css(this,"position")) && (/(auto|scroll)/).test($.css(this,"overflow")+$.css(this,"overflow-y")+$.css(this,"overflow-x"));
            }).eq(0);
        } else {
            scrollParent = this.parents().filter(function() {
                return (/(auto|scroll)/).test($.css(this,"overflow")+$.css(this,"overflow-y")+$.css(this,"overflow-x"));
            }).eq(0);
        }

        return ( /fixed/ ).test( this.css( "position") ) || !scrollParent.length ? $( this[ 0 ].ownerDocument || document ) : scrollParent;
    },

    uniqueId: function() {
        return this.each(function() {
            if ( !this.id ) {
                this.id = "ui-id-" + (++uuid);
            }
        });
    },

    removeUniqueId: function() {
        return this.each(function() {
            if ( runiqueId.test( this.id ) ) {
                $( this ).removeAttr( "id" );
            }
        });
    }
});

// selectors
function focusable( element, isTabIndexNotNaN ) {
    var map, mapName, img,
        nodeName = element.nodeName.toLowerCase();
    if ( "area" === nodeName ) {
        map = element.parentNode;
        mapName = map.name;
        if ( !element.href || !mapName || map.nodeName.toLowerCase() !== "map" ) {
            return false;
        }
        img = $( "img[usemap=#" + mapName + "]" )[0];
        return !!img && visible( img );
    }
    return ( /input|select|textarea|button|object/.test( nodeName ) ?
        !element.disabled :
        "a" === nodeName ?
            element.href || isTabIndexNotNaN :
            isTabIndexNotNaN) &&
        // the element and all of its ancestors must be visible
        visible( element );
}

function visible( element ) {
    return $.expr.filters.visible( element ) &&
        !$( element ).parents().addBack().filter(function() {
            return $.css( this, "visibility" ) === "hidden";
        }).length;
}

$.extend( $.expr[ ":" ], {
    data: $.expr.createPseudo ?
        $.expr.createPseudo(function( dataName ) {
            return function( elem ) {
                return !!$.data( elem, dataName );
            };
        }) :
        // support: jQuery <1.8
        function( elem, i, match ) {
            return !!$.data( elem, match[ 3 ] );
        },

    focusable: function( element ) {
        return focusable( element, !isNaN( $.attr( element, "tabindex" ) ) );
    },

    tabbable: function( element ) {
        var tabIndex = $.attr( element, "tabindex" ),
            isTabIndexNaN = isNaN( tabIndex );
        return ( isTabIndexNaN || tabIndex >= 0 ) && focusable( element, !isTabIndexNaN );
    }
});

// support: jQuery <1.8
if ( !$( "<a>" ).outerWidth( 1 ).jquery ) {
    $.each( [ "Width", "Height" ], function( i, name ) {
        var side = name === "Width" ? [ "Left", "Right" ] : [ "Top", "Bottom" ],
            type = name.toLowerCase(),
            orig = {
                innerWidth: $.fn.innerWidth,
                innerHeight: $.fn.innerHeight,
                outerWidth: $.fn.outerWidth,
                outerHeight: $.fn.outerHeight
            };

        function reduce( elem, size, border, margin ) {
            $.each( side, function() {
                size -= parseFloat( $.css( elem, "padding" + this ) ) || 0;
                if ( border ) {
                    size -= parseFloat( $.css( elem, "border" + this + "Width" ) ) || 0;
                }
                if ( margin ) {
                    size -= parseFloat( $.css( elem, "margin" + this ) ) || 0;
                }
            });
            return size;
        }

        $.fn[ "inner" + name ] = function( size ) {
            if ( size === undefined ) {
                return orig[ "inner" + name ].call( this );
            }

            return this.each(function() {
                $( this ).css( type, reduce( this, size ) + "px" );
            });
        };

        $.fn[ "outer" + name] = function( size, margin ) {
            if ( typeof size !== "number" ) {
                return orig[ "outer" + name ].call( this, size );
            }

            return this.each(function() {
                $( this).css( type, reduce( this, size, true, margin ) + "px" );
            });
        };
    });
}

// support: jQuery <1.8
if ( !$.fn.addBack ) {
    $.fn.addBack = function( selector ) {
        return this.add( selector == null ?
            this.prevObject : this.prevObject.filter( selector )
        );
    };
}

// support: jQuery 1.6.1, 1.6.2 (http://bugs.jquery.com/ticket/9413)
if ( $( "<a>" ).data( "a-b", "a" ).removeData( "a-b" ).data( "a-b" ) ) {
    $.fn.removeData = (function( removeData ) {
        return function( key ) {
            if ( arguments.length ) {
                return removeData.call( this, $.camelCase( key ) );
            } else {
                return removeData.call( this );
            }
        };
    })( $.fn.removeData );
}





// deprecated
$.ui.ie = !!/msie [\w.]+/.exec( navigator.userAgent.toLowerCase() );

$.support.selectstart = "onselectstart" in document.createElement( "div" );
$.fn.extend({
    disableSelection: function() {
        return this.bind( ( $.support.selectstart ? "selectstart" : "mousedown" ) +
            ".ui-disableSelection", function( event ) {
                event.preventDefault();
            });
    },

    enableSelection: function() {
        return this.unbind( ".ui-disableSelection" );
    },

    zIndex: function( zIndex ) {
        if ( zIndex !== undefined ) {
            return this.css( "zIndex", zIndex );
        }

        if ( this.length ) {
            var elem = $( this[ 0 ] ), position, value;
            while ( elem.length && elem[ 0 ] !== document ) {
                // Ignore z-index if position is set to a value where z-index is ignored by the browser
                // This makes behavior of this function consistent across browsers
                // WebKit always returns auto if the element is positioned
                position = elem.css( "position" );
                if ( position === "absolute" || position === "relative" || position === "fixed" ) {
                    // IE returns 0 when zIndex is not specified
                    // other browsers return a string
                    // we ignore the case of nested elements with an explicit value of 0
                    // <div style="z-index: -10;"><div style="z-index: 0;"></div></div>
                    value = parseInt( elem.css( "zIndex" ), 10 );
                    if ( !isNaN( value ) && value !== 0 ) {
                        return value;
                    }
                }
                elem = elem.parent();
            }
        }

        return 0;
    }
});

// $.ui.plugin is deprecated. Use $.widget() extensions instead.
$.ui.plugin = {
    add: function( module, option, set ) {
        var i,
            proto = $.ui[ module ].prototype;
        for ( i in set ) {
            proto.plugins[ i ] = proto.plugins[ i ] || [];
            proto.plugins[ i ].push( [ option, set[ i ] ] );
        }
    },
    call: function( instance, name, args, allowDisconnected ) {
        var i,
            set = instance.plugins[ name ];

        if ( !set ) {
            return;
        }

        if ( !allowDisconnected && ( !instance.element[ 0 ].parentNode || instance.element[ 0 ].parentNode.nodeType === 11 ) ) {
            return;
        }

        for ( i = 0; i < set.length; i++ ) {
            if ( instance.options[ set[ i ][ 0 ] ] ) {
                set[ i ][ 1 ].apply( instance.element, args );
            }
        }
    }
};

})( jQuery );

(function( $, window, undefined ) {

    // Subtract the height of external toolbars from the page height, if the page does not have
    // internal toolbars of the same type. We take care to use the widget options if we find a
    // widget instance and the element's data-attributes otherwise.
    var compensateToolbars = function( page, desiredHeight ) {
        var pageParent = page.parent(),
            toolbarsAffectingHeight = [],

            // We use this function to filter fixed toolbars with option updatePagePadding set to
            // true (which is the default) from our height subtraction, because fixed toolbars with
            // option updatePagePadding set to true compensate for their presence by adding padding
            // to the active page. We want to avoid double-counting by also subtracting their
            // height from the desired page height.
            noPadders = function() {
                var theElement = $( this ),
                    widgetOptions = $.mobile.toolbar && theElement.data( "mobile-toolbar" ) ?
                        theElement.toolbar( "option" ) : {
                            position: theElement.attr( "data-" + $.mobile.ns + "position" ),
                            updatePagePadding: ( theElement.attr( "data-" + $.mobile.ns +
                                "update-page-padding" ) !== false )
                        };

                return !( widgetOptions.position === "fixed" &&
                    widgetOptions.updatePagePadding === true );
            },
            externalHeaders = pageParent.children( ":jqmData(role='header')" ).filter( noPadders ),
            internalHeaders = page.children( ":jqmData(role='header')" ),
            externalFooters = pageParent.children( ":jqmData(role='footer')" ).filter( noPadders ),
            internalFooters = page.children( ":jqmData(role='footer')" );

        // If we have no internal headers, but we do have external headers, then their height
        // reduces the page height
        if ( internalHeaders.length === 0 && externalHeaders.length > 0 ) {
            toolbarsAffectingHeight = toolbarsAffectingHeight.concat( externalHeaders.toArray() );
        }

        // If we have no internal footers, but we do have external footers, then their height
        // reduces the page height
        if ( internalFooters.length === 0 && externalFooters.length > 0 ) {
            toolbarsAffectingHeight = toolbarsAffectingHeight.concat( externalFooters.toArray() );
        }

        $.each( toolbarsAffectingHeight, function( index, value ) {
            desiredHeight -= $( value ).outerHeight();
        });

        // Height must be at least zero
        return Math.max( 0, desiredHeight );
    };

    $.extend( $.mobile, {
        // define the window and the document objects
        window: $( window ),
        document: $( document ),

        // TODO: Remove and use $.ui.keyCode directly
        keyCode: $.ui.keyCode,

        // Place to store various widget extensions
        behaviors: {},

        // Scroll page vertically: scroll to 0 to hide iOS address bar, or pass a Y value
        silentScroll: function( ypos ) {
            if ( $.type( ypos ) !== "number" ) {
                ypos = $.mobile.defaultHomeScroll;
            }

            // prevent scrollstart and scrollstop events
            $.event.special.scrollstart.enabled = false;

            setTimeout(function() {
                window.scrollTo( 0, ypos );
                $.mobile.document.trigger( "silentscroll", { x: 0, y: ypos });
            }, 20 );

            setTimeout(function() {
                $.event.special.scrollstart.enabled = true;
            }, 150 );
        },

        getClosestBaseUrl: function( ele )    {
            // Find the closest page and extract out its url.
            var url = $( ele ).closest( ".ui-page" ).jqmData( "url" ),
                base = $.mobile.path.documentBase.hrefNoHash;

            if ( !$.mobile.dynamicBaseEnabled || !url || !$.mobile.path.isPath( url ) ) {
                url = base;
            }

            return $.mobile.path.makeUrlAbsolute( url, base );
        },
        removeActiveLinkClass: function( forceRemoval ) {
            if ( !!$.mobile.activeClickedLink &&
                ( !$.mobile.activeClickedLink.closest( "." + $.mobile.activePageClass ).length ||
                    forceRemoval ) ) {

                $.mobile.activeClickedLink.removeClass( $.mobile.activeBtnClass );
            }
            $.mobile.activeClickedLink = null;
        },

        // DEPRECATED in 1.4
        // Find the closest parent with a theme class on it. Note that
        // we are not using $.fn.closest() on purpose here because this
        // method gets called quite a bit and we need it to be as fast
        // as possible.
        getInheritedTheme: function( el, defaultTheme ) {
            var e = el[ 0 ],
                ltr = "",
                re = /ui-(bar|body|overlay)-([a-z])\b/,
                c, m;
            while ( e ) {
                c = e.className || "";
                if ( c && ( m = re.exec( c ) ) && ( ltr = m[ 2 ] ) ) {
                    // We found a parent with a theme class
                    // on it so bail from this loop.
                    break;
                }

                e = e.parentNode;
            }
            // Return the theme letter we found, if none, return the
            // specified default.
            return ltr || defaultTheme || "a";
        },

        enhanceable: function( elements ) {
            return this.haveParents( elements, "enhance" );
        },

        hijackable: function( elements ) {
            return this.haveParents( elements, "ajax" );
        },

        haveParents: function( elements, attr ) {
            if ( !$.mobile.ignoreContentEnabled ) {
                return elements;
            }

            var count = elements.length,
                $newSet = $(),
                e, $element, excluded,
                i, c;

            for ( i = 0; i < count; i++ ) {
                $element = elements.eq( i );
                excluded = false;
                e = elements[ i ];

                while ( e ) {
                    c = e.getAttribute ? e.getAttribute( "data-" + $.mobile.ns + attr ) : "";

                    if ( c === "false" ) {
                        excluded = true;
                        break;
                    }

                    e = e.parentNode;
                }

                if ( !excluded ) {
                    $newSet = $newSet.add( $element );
                }
            }

            return $newSet;
        },

        getScreenHeight: function() {
            // Native innerHeight returns more accurate value for this across platforms,
            // jQuery version is here as a normalized fallback for platforms like Symbian
            return window.innerHeight || $.mobile.window.height();
        },

        //simply set the active page's minimum height to screen height, depending on orientation
        resetActivePageHeight: function( height ) {
            var page = $( "." + $.mobile.activePageClass ),
                pageHeight = page.height(),
                pageOuterHeight = page.outerHeight( true );

            height = compensateToolbars( page,
                ( typeof height === "number" ) ? height : $.mobile.getScreenHeight() );

            // Remove any previous min-height setting
            page.css( "min-height", "" );

            // Set the minimum height only if the height as determined by CSS is insufficient
            if ( page.height() < height ) {
                page.css( "min-height", height - ( pageOuterHeight - pageHeight ) );
            }
        },

        loading: function() {
            // If this is the first call to this function, instantiate a loader widget
            var loader = this.loading._widget || $( $.mobile.loader.prototype.defaultHtml ).loader(),

                // Call the appropriate method on the loader
                returnValue = loader.loader.apply( loader, arguments );

            // Make sure the loader is retained for future calls to this function.
            this.loading._widget = loader;

            return returnValue;
        }
    });

    $.addDependents = function( elem, newDependents ) {
        var $elem = $( elem ),
            dependents = $elem.jqmData( "dependents" ) || $();

        $elem.jqmData( "dependents", $( dependents ).add( newDependents ) );
    };

    // plugins
    $.fn.extend({
        removeWithDependents: function() {
            $.removeWithDependents( this );
        },

        // Enhance child elements
        enhanceWithin: function() {
            var index,
                widgetElements = {},
                keepNative = $.mobile.page.prototype.keepNativeSelector(),
                that = this;

            // Add no js class to elements
            if ( $.mobile.nojs ) {
                $.mobile.nojs( this );
            }

            // Bind links for ajax nav
            if ( $.mobile.links ) {
                $.mobile.links( this );
            }

            // Degrade inputs for styleing
            if ( $.mobile.degradeInputsWithin ) {
                $.mobile.degradeInputsWithin( this );
            }

            // Run buttonmarkup
            if ( $.fn.buttonMarkup ) {
                this.find( $.fn.buttonMarkup.initSelector ).not( keepNative )
                .jqmEnhanceable().buttonMarkup();
            }

            // Add classes for fieldContain
            if ( $.fn.fieldcontain ) {
                this.find( ":jqmData(role='fieldcontain')" ).not( keepNative )
                .jqmEnhanceable().fieldcontain();
            }

            // Enhance widgets
            $.each( $.mobile.widgets, function( name, constructor ) {

                // If initSelector not false find elements
                if ( constructor.initSelector ) {

                    // Filter elements that should not be enhanced based on parents
                    var elements = $.mobile.enhanceable( that.find( constructor.initSelector ) );

                    // If any matching elements remain filter ones with keepNativeSelector
                    if ( elements.length > 0 ) {

                        // $.mobile.page.prototype.keepNativeSelector is deprecated this is just for backcompat
                        // Switch to $.mobile.keepNative in 1.5 which is just a value not a function
                        elements = elements.not( keepNative );
                    }

                    // Enhance whatever is left
                    if ( elements.length > 0 ) {
                        widgetElements[ constructor.prototype.widgetName ] = elements;
                    }
                }
            });

            for ( index in widgetElements ) {
                widgetElements[ index ][ index ]();
            }

            return this;
        },

        addDependents: function( newDependents ) {
            $.addDependents( this, newDependents );
        },

        // note that this helper doesn't attempt to handle the callback
        // or setting of an html element's text, its only purpose is
        // to return the html encoded version of the text in all cases. (thus the name)
        getEncodedText: function() {
            return $( "<a>" ).text( this.text() ).html();
        },

        // fluent helper function for the mobile namespaced equivalent
        jqmEnhanceable: function() {
            return $.mobile.enhanceable( this );
        },

        jqmHijackable: function() {
            return $.mobile.hijackable( this );
        }
    });

    $.removeWithDependents = function( nativeElement ) {
        var element = $( nativeElement );

        ( element.jqmData( "dependents" ) || $() ).remove();
        element.remove();
    };
    $.addDependents = function( nativeElement, newDependents ) {
        var element = $( nativeElement ),
            dependents = element.jqmData( "dependents" ) || $();

        element.jqmData( "dependents", $( dependents ).add( newDependents ) );
    };

    $.find.matches = function( expr, set ) {
        return $.find( expr, null, null, set );
    };

    $.find.matchesSelector = function( node, expr ) {
        return $.find( expr, null, null, [ node ] ).length > 0;
    };

})( jQuery, this );

(function( $, window, undefined ) {
    $.extend( $.mobile, {

        // Version of the jQuery Mobile Framework
        version: "1.4.5",

        // Deprecated and no longer used in 1.4 remove in 1.5
        // Define the url parameter used for referencing widget-generated sub-pages.
        // Translates to example.html&ui-page=subpageIdentifier
        // hash segment before &ui-page= is used to make Ajax request
        subPageUrlKey: "ui-page",

        hideUrlBar: true,

        // Keepnative Selector
        keepNative: ":jqmData(role='none'), :jqmData(role='nojs')",

        // Deprecated in 1.4 remove in 1.5
        // Class assigned to page currently in view, and during transitions
        activePageClass: "ui-page-active",

        // Deprecated in 1.4 remove in 1.5
        // Class used for "active" button state, from CSS framework
        activeBtnClass: "ui-btn-active",

        // Deprecated in 1.4 remove in 1.5
        // Class used for "focus" form element state, from CSS framework
        focusClass: "ui-focus",

        // Automatically handle clicks and form submissions through Ajax, when same-domain
        ajaxEnabled: true,

        // Automatically load and show pages based on location.hash
        hashListeningEnabled: true,

        // disable to prevent jquery from bothering with links
        linkBindingEnabled: true,

        // Set default page transition - 'none' for no transitions
        defaultPageTransition: "fade",

        // Set maximum window width for transitions to apply - 'false' for no limit
        maxTransitionWidth: false,

        // Minimum scroll distance that will be remembered when returning to a page
        // Deprecated remove in 1.5
        minScrollBack: 0,

        // Set default dialog transition - 'none' for no transitions
        defaultDialogTransition: "pop",

        // Error response message - appears when an Ajax page request fails
        pageLoadErrorMessage: "Error Loading Page",

        // For error messages, which theme does the box use?
        pageLoadErrorMessageTheme: "a",

        // replace calls to window.history.back with phonegaps navigation helper
        // where it is provided on the window object
        phonegapNavigationEnabled: false,

        //automatically initialize the DOM when it's ready
        autoInitializePage: true,

        pushStateEnabled: true,

        // allows users to opt in to ignoring content by marking a parent element as
        // data-ignored
        ignoreContentEnabled: false,

        buttonMarkup: {
            hoverDelay: 200
        },

        // disable the alteration of the dynamic base tag or links in the case
        // that a dynamic base tag isn't supported
        dynamicBaseEnabled: true,

        // default the property to remove dependency on assignment in init module
        pageContainer: $(),

        //enable cross-domain page support
        allowCrossDomainPages: false,

        dialogHashKey: "&ui-state=dialog"
    });
})( jQuery, this );

/*!
 * jQuery UI Widget c0ab71056b936627e8a7821f03c044aec6280a40
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/jQuery.widget/
 */
(function( $, undefined ) {

var uuid = 0,
    slice = Array.prototype.slice,
    _cleanData = $.cleanData;
$.cleanData = function( elems ) {
    for ( var i = 0, elem; (elem = elems[i]) != null; i++ ) {
        try {
            $( elem ).triggerHandler( "remove" );
        // http://bugs.jquery.com/ticket/8235
        } catch( e ) {}
    }
    _cleanData( elems );
};

$.widget = function( name, base, prototype ) {
    var fullName, existingConstructor, constructor, basePrototype,
        // proxiedPrototype allows the provided prototype to remain unmodified
        // so that it can be used as a mixin for multiple widgets (#8876)
        proxiedPrototype = {},
        namespace = name.split( "." )[ 0 ];

    name = name.split( "." )[ 1 ];
    fullName = namespace + "-" + name;

    if ( !prototype ) {
        prototype = base;
        base = $.Widget;
    }

    // create selector for plugin
    $.expr[ ":" ][ fullName.toLowerCase() ] = function( elem ) {
        return !!$.data( elem, fullName );
    };

    $[ namespace ] = $[ namespace ] || {};
    existingConstructor = $[ namespace ][ name ];
    constructor = $[ namespace ][ name ] = function( options, element ) {
        // allow instantiation without "new" keyword
        if ( !this._createWidget ) {
            return new constructor( options, element );
        }

        // allow instantiation without initializing for simple inheritance
        // must use "new" keyword (the code above always passes args)
        if ( arguments.length ) {
            this._createWidget( options, element );
        }
    };
    // extend with the existing constructor to carry over any static properties
    $.extend( constructor, existingConstructor, {
        version: prototype.version,
        // copy the object used to create the prototype in case we need to
        // redefine the widget later
        _proto: $.extend( {}, prototype ),
        // track widgets that inherit from this widget in case this widget is
        // redefined after a widget inherits from it
        _childConstructors: []
    });

    basePrototype = new base();
    // we need to make the options hash a property directly on the new instance
    // otherwise we'll modify the options hash on the prototype that we're
    // inheriting from
    basePrototype.options = $.widget.extend( {}, basePrototype.options );
    $.each( prototype, function( prop, value ) {
        if ( !$.isFunction( value ) ) {
            proxiedPrototype[ prop ] = value;
            return;
        }
        proxiedPrototype[ prop ] = (function() {
            var _super = function() {
                    return base.prototype[ prop ].apply( this, arguments );
                },
                _superApply = function( args ) {
                    return base.prototype[ prop ].apply( this, args );
                };
            return function() {
                var __super = this._super,
                    __superApply = this._superApply,
                    returnValue;

                this._super = _super;
                this._superApply = _superApply;

                returnValue = value.apply( this, arguments );

                this._super = __super;
                this._superApply = __superApply;

                return returnValue;
            };
        })();
    });
    constructor.prototype = $.widget.extend( basePrototype, {
        // TODO: remove support for widgetEventPrefix
        // always use the name + a colon as the prefix, e.g., draggable:start
        // don't prefix for widgets that aren't DOM-based
        widgetEventPrefix: existingConstructor ? (basePrototype.widgetEventPrefix || name) : name
    }, proxiedPrototype, {
        constructor: constructor,
        namespace: namespace,
        widgetName: name,
        widgetFullName: fullName
    });

    // If this widget is being redefined then we need to find all widgets that
    // are inheriting from it and redefine all of them so that they inherit from
    // the new version of this widget. We're essentially trying to replace one
    // level in the prototype chain.
    if ( existingConstructor ) {
        $.each( existingConstructor._childConstructors, function( i, child ) {
            var childPrototype = child.prototype;

            // redefine the child widget using the same prototype that was
            // originally used, but inherit from the new version of the base
            $.widget( childPrototype.namespace + "." + childPrototype.widgetName, constructor, child._proto );
        });
        // remove the list of existing child constructors from the old constructor
        // so the old child constructors can be garbage collected
        delete existingConstructor._childConstructors;
    } else {
        base._childConstructors.push( constructor );
    }

    $.widget.bridge( name, constructor );

    return constructor;
};

$.widget.extend = function( target ) {
    var input = slice.call( arguments, 1 ),
        inputIndex = 0,
        inputLength = input.length,
        key,
        value;
    for ( ; inputIndex < inputLength; inputIndex++ ) {
        for ( key in input[ inputIndex ] ) {
            value = input[ inputIndex ][ key ];
            if ( input[ inputIndex ].hasOwnProperty( key ) && value !== undefined ) {
                // Clone objects
                if ( $.isPlainObject( value ) ) {
                    target[ key ] = $.isPlainObject( target[ key ] ) ?
                        $.widget.extend( {}, target[ key ], value ) :
                        // Don't extend strings, arrays, etc. with objects
                        $.widget.extend( {}, value );
                // Copy everything else by reference
                } else {
                    target[ key ] = value;
                }
            }
        }
    }
    return target;
};

$.widget.bridge = function( name, object ) {
    var fullName = object.prototype.widgetFullName || name;
    $.fn[ name ] = function( options ) {
        var isMethodCall = typeof options === "string",
            args = slice.call( arguments, 1 ),
            returnValue = this;

        // allow multiple hashes to be passed on init
        options = !isMethodCall && args.length ?
            $.widget.extend.apply( null, [ options ].concat(args) ) :
            options;

        if ( isMethodCall ) {
            this.each(function() {
                var methodValue,
                    instance = $.data( this, fullName );
                if ( options === "instance" ) {
                    returnValue = instance;
                    return false;
                }
                if ( !instance ) {
                    return $.error( "cannot call methods on " + name + " prior to initialization; " +
                        "attempted to call method '" + options + "'" );
                }
                if ( !$.isFunction( instance[options] ) || options.charAt( 0 ) === "_" ) {
                    return $.error( "no such method '" + options + "' for " + name + " widget instance" );
                }
                methodValue = instance[ options ].apply( instance, args );
                if ( methodValue !== instance && methodValue !== undefined ) {
                    returnValue = methodValue && methodValue.jquery ?
                        returnValue.pushStack( methodValue.get() ) :
                        methodValue;
                    return false;
                }
            });
        } else {
            this.each(function() {
                var instance = $.data( this, fullName );
                if ( instance ) {
                    instance.option( options || {} )._init();
                } else {
                    $.data( this, fullName, new object( options, this ) );
                }
            });
        }

        return returnValue;
    };
};

$.Widget = function( /* options, element */ ) {};
$.Widget._childConstructors = [];

$.Widget.prototype = {
    widgetName: "widget",
    widgetEventPrefix: "",
    defaultElement: "<div>",
    options: {
        disabled: false,

        // callbacks
        create: null
    },
    _createWidget: function( options, element ) {
        element = $( element || this.defaultElement || this )[ 0 ];
        this.element = $( element );
        this.uuid = uuid++;
        this.eventNamespace = "." + this.widgetName + this.uuid;
        this.options = $.widget.extend( {},
            this.options,
            this._getCreateOptions(),
            options );

        this.bindings = $();
        this.hoverable = $();
        this.focusable = $();

        if ( element !== this ) {
            $.data( element, this.widgetFullName, this );
            this._on( true, this.element, {
                remove: function( event ) {
                    if ( event.target === element ) {
                        this.destroy();
                    }
                }
            });
            this.document = $( element.style ?
                // element within the document
                element.ownerDocument :
                // element is window or document
                element.document || element );
            this.window = $( this.document[0].defaultView || this.document[0].parentWindow );
        }

        this._create();
        this._trigger( "create", null, this._getCreateEventData() );
        this._init();
    },
    _getCreateOptions: $.noop,
    _getCreateEventData: $.noop,
    _create: $.noop,
    _init: $.noop,

    destroy: function() {
        this._destroy();
        // we can probably remove the unbind calls in 2.0
        // all event bindings should go through this._on()
        this.element
            .unbind( this.eventNamespace )
            .removeData( this.widgetFullName )
            // support: jquery <1.6.3
            // http://bugs.jquery.com/ticket/9413
            .removeData( $.camelCase( this.widgetFullName ) );
        this.widget()
            .unbind( this.eventNamespace )
            .removeAttr( "aria-disabled" )
            .removeClass(
                this.widgetFullName + "-disabled " +
                "ui-state-disabled" );

        // clean up events and states
        this.bindings.unbind( this.eventNamespace );
        this.hoverable.removeClass( "ui-state-hover" );
        this.focusable.removeClass( "ui-state-focus" );
    },
    _destroy: $.noop,

    widget: function() {
        return this.element;
    },

    option: function( key, value ) {
        var options = key,
            parts,
            curOption,
            i;

        if ( arguments.length === 0 ) {
            // don't return a reference to the internal hash
            return $.widget.extend( {}, this.options );
        }

        if ( typeof key === "string" ) {
            // handle nested keys, e.g., "foo.bar" => { foo: { bar: ___ } }
            options = {};
            parts = key.split( "." );
            key = parts.shift();
            if ( parts.length ) {
                curOption = options[ key ] = $.widget.extend( {}, this.options[ key ] );
                for ( i = 0; i < parts.length - 1; i++ ) {
                    curOption[ parts[ i ] ] = curOption[ parts[ i ] ] || {};
                    curOption = curOption[ parts[ i ] ];
                }
                key = parts.pop();
                if ( value === undefined ) {
                    return curOption[ key ] === undefined ? null : curOption[ key ];
                }
                curOption[ key ] = value;
            } else {
                if ( value === undefined ) {
                    return this.options[ key ] === undefined ? null : this.options[ key ];
                }
                options[ key ] = value;
            }
        }

        this._setOptions( options );

        return this;
    },
    _setOptions: function( options ) {
        var key;

        for ( key in options ) {
            this._setOption( key, options[ key ] );
        }

        return this;
    },
    _setOption: function( key, value ) {
        this.options[ key ] = value;

        if ( key === "disabled" ) {
            this.widget()
                .toggleClass( this.widgetFullName + "-disabled", !!value );
            this.hoverable.removeClass( "ui-state-hover" );
            this.focusable.removeClass( "ui-state-focus" );
        }

        return this;
    },

    enable: function() {
        return this._setOptions({ disabled: false });
    },
    disable: function() {
        return this._setOptions({ disabled: true });
    },

    _on: function( suppressDisabledCheck, element, handlers ) {
        var delegateElement,
            instance = this;

        // no suppressDisabledCheck flag, shuffle arguments
        if ( typeof suppressDisabledCheck !== "boolean" ) {
            handlers = element;
            element = suppressDisabledCheck;
            suppressDisabledCheck = false;
        }

        // no element argument, shuffle and use this.element
        if ( !handlers ) {
            handlers = element;
            element = this.element;
            delegateElement = this.widget();
        } else {
            // accept selectors, DOM elements
            element = delegateElement = $( element );
            this.bindings = this.bindings.add( element );
        }

        $.each( handlers, function( event, handler ) {
            function handlerProxy() {
                // allow widgets to customize the disabled handling
                // - disabled as an array instead of boolean
                // - disabled class as method for disabling individual parts
                if ( !suppressDisabledCheck &&
                        ( instance.options.disabled === true ||
                            $( this ).hasClass( "ui-state-disabled" ) ) ) {
                    return;
                }
                return ( typeof handler === "string" ? instance[ handler ] : handler )
                    .apply( instance, arguments );
            }

            // copy the guid so direct unbinding works
            if ( typeof handler !== "string" ) {
                handlerProxy.guid = handler.guid =
                    handler.guid || handlerProxy.guid || $.guid++;
            }

            var match = event.match( /^(\w+)\s*(.*)$/ ),
                eventName = match[1] + instance.eventNamespace,
                selector = match[2];
            if ( selector ) {
                delegateElement.delegate( selector, eventName, handlerProxy );
            } else {
                element.bind( eventName, handlerProxy );
            }
        });
    },

    _off: function( element, eventName ) {
        eventName = (eventName || "").split( " " ).join( this.eventNamespace + " " ) + this.eventNamespace;
        element.unbind( eventName ).undelegate( eventName );
    },

    _delay: function( handler, delay ) {
        function handlerProxy() {
            return ( typeof handler === "string" ? instance[ handler ] : handler )
                .apply( instance, arguments );
        }
        var instance = this;
        return setTimeout( handlerProxy, delay || 0 );
    },

    _hoverable: function( element ) {
        this.hoverable = this.hoverable.add( element );
        this._on( element, {
            mouseenter: function( event ) {
                $( event.currentTarget ).addClass( "ui-state-hover" );
            },
            mouseleave: function( event ) {
                $( event.currentTarget ).removeClass( "ui-state-hover" );
            }
        });
    },

    _focusable: function( element ) {
        this.focusable = this.focusable.add( element );
        this._on( element, {
            focusin: function( event ) {
                $( event.currentTarget ).addClass( "ui-state-focus" );
            },
            focusout: function( event ) {
                $( event.currentTarget ).removeClass( "ui-state-focus" );
            }
        });
    },

    _trigger: function( type, event, data ) {
        var prop, orig,
            callback = this.options[ type ];

        data = data || {};
        event = $.Event( event );
        event.type = ( type === this.widgetEventPrefix ?
            type :
            this.widgetEventPrefix + type ).toLowerCase();
        // the original event may come from any element
        // so we need to reset the target on the new event
        event.target = this.element[ 0 ];

        // copy original event properties over to the new event
        orig = event.originalEvent;
        if ( orig ) {
            for ( prop in orig ) {
                if ( !( prop in event ) ) {
                    event[ prop ] = orig[ prop ];
                }
            }
        }

        this.element.trigger( event, data );
        return !( $.isFunction( callback ) &&
            callback.apply( this.element[0], [ event ].concat( data ) ) === false ||
            event.isDefaultPrevented() );
    }
};

$.each( { show: "fadeIn", hide: "fadeOut" }, function( method, defaultEffect ) {
    $.Widget.prototype[ "_" + method ] = function( element, options, callback ) {
        if ( typeof options === "string" ) {
            options = { effect: options };
        }
        var hasOptions,
            effectName = !options ?
                method :
                options === true || typeof options === "number" ?
                    defaultEffect :
                    options.effect || defaultEffect;
        options = options || {};
        if ( typeof options === "number" ) {
            options = { duration: options };
        }
        hasOptions = !$.isEmptyObject( options );
        options.complete = callback;
        if ( options.delay ) {
            element.delay( options.delay );
        }
        if ( hasOptions && $.effects && $.effects.effect[ effectName ] ) {
            element[ method ]( options );
        } else if ( effectName !== method && element[ effectName ] ) {
            element[ effectName ]( options.duration, options.easing, callback );
        } else {
            element.queue(function( next ) {
                $( this )[ method ]();
                if ( callback ) {
                    callback.call( element[ 0 ] );
                }
                next();
            });
        }
    };
});

})( jQuery );

(function( $, window, undefined ) {
    var nsNormalizeDict = {},
        oldFind = $.find,
        rbrace = /(?:\{[\s\S]*\}|\[[\s\S]*\])$/,
        jqmDataRE = /:jqmData\(([^)]*)\)/g;

    $.extend( $.mobile, {

        // Namespace used framework-wide for data-attrs. Default is no namespace

        ns: "",

        // Retrieve an attribute from an element and perform some massaging of the value

        getAttribute: function( element, key ) {
            var data;

            element = element.jquery ? element[0] : element;

            if ( element && element.getAttribute ) {
                data = element.getAttribute( "data-" + $.mobile.ns + key );
            }

            // Copied from core's src/data.js:dataAttr()
            // Convert from a string to a proper data type
            try {
                data = data === "true" ? true :
                    data === "false" ? false :
                    data === "null" ? null :
                    // Only convert to a number if it doesn't change the string
                    +data + "" === data ? +data :
                    rbrace.test( data ) ? JSON.parse( data ) :
                    data;
            } catch( err ) {}

            return data;
        },

        // Expose our cache for testing purposes.
        nsNormalizeDict: nsNormalizeDict,

        // Take a data attribute property, prepend the namespace
        // and then camel case the attribute string. Add the result
        // to our nsNormalizeDict so we don't have to do this again.
        nsNormalize: function( prop ) {
            return nsNormalizeDict[ prop ] ||
                ( nsNormalizeDict[ prop ] = $.camelCase( $.mobile.ns + prop ) );
        },

        // Find the closest javascript page element to gather settings data jsperf test
        // http://jsperf.com/single-complex-selector-vs-many-complex-selectors/edit
        // possibly naive, but it shows that the parsing overhead for *just* the page selector vs
        // the page and dialog selector is negligable. This could probably be speed up by
        // doing a similar parent node traversal to the one found in the inherited theme code above
        closestPageData: function( $target ) {
            return $target
                .closest( ":jqmData(role='page'), :jqmData(role='dialog')" )
                .data( "mobile-page" );
        }

    });

    // Mobile version of data and removeData and hasData methods
    // ensures all data is set and retrieved using jQuery Mobile's data namespace
    $.fn.jqmData = function( prop, value ) {
        var result;
        if ( typeof prop !== "undefined" ) {
            if ( prop ) {
                prop = $.mobile.nsNormalize( prop );
            }

            // undefined is permitted as an explicit input for the second param
            // in this case it returns the value and does not set it to undefined
            if ( arguments.length < 2 || value === undefined ) {
                result = this.data( prop );
            } else {
                result = this.data( prop, value );
            }
        }
        return result;
    };

    $.jqmData = function( elem, prop, value ) {
        var result;
        if ( typeof prop !== "undefined" ) {
            result = $.data( elem, prop ? $.mobile.nsNormalize( prop ) : prop, value );
        }
        return result;
    };

    $.fn.jqmRemoveData = function( prop ) {
        return this.removeData( $.mobile.nsNormalize( prop ) );
    };

    $.jqmRemoveData = function( elem, prop ) {
        return $.removeData( elem, $.mobile.nsNormalize( prop ) );
    };

    $.find = function( selector, context, ret, extra ) {
        if ( selector.indexOf( ":jqmData" ) > -1 ) {
            selector = selector.replace( jqmDataRE, "[data-" + ( $.mobile.ns || "" ) + "$1]" );
        }

        return oldFind.call( this, selector, context, ret, extra );
    };

    $.extend( $.find, oldFind );

})( jQuery, this );

(function( $, undefined ) {

var rcapitals = /[A-Z]/g,
    replaceFunction = function( c ) {
        return "-" + c.toLowerCase();
    };

$.extend( $.Widget.prototype, {
    _getCreateOptions: function() {
        var option, value,
            elem = this.element[ 0 ],
            options = {};

        //
        if ( !$.mobile.getAttribute( elem, "defaults" ) ) {
            for ( option in this.options ) {
                value = $.mobile.getAttribute( elem, option.replace( rcapitals, replaceFunction ) );

                if ( value != null ) {
                    options[ option ] = value;
                }
            }
        }

        return options;
    }
});

//TODO: Remove in 1.5 for backcompat only
$.mobile.widget = $.Widget;

})( jQuery );


(function( $ ) {
    // TODO move loader class down into the widget settings
    var loaderClass = "ui-loader", $html = $( "html" );

    $.widget( "mobile.loader", {
        // NOTE if the global config settings are defined they will override these
        //      options
        options: {
            // the theme for the loading message
            theme: "a",

            // whether the text in the loading message is shown
            textVisible: false,

            // custom html for the inner content of the loading message
            html: "",

            // the text to be displayed when the popup is shown
            text: "loading"
        },

        defaultHtml: "<div class='" + loaderClass + "'>" +
            "<span class='ui-icon-loading'></span>" +
            "<h1></h1>" +
            "</div>",

        // For non-fixed supportin browsers. Position at y center (if scrollTop supported), above the activeBtn (if defined), or just 100px from top
        fakeFixLoader: function() {
            var activeBtn = $( "." + $.mobile.activeBtnClass ).first();

            this.element
                .css({
                    top: $.support.scrollTop && this.window.scrollTop() + this.window.height() / 2 ||
                        activeBtn.length && activeBtn.offset().top || 100
                });
        },

        // check position of loader to see if it appears to be "fixed" to center
        // if not, use abs positioning
        checkLoaderPosition: function() {
            var offset = this.element.offset(),
                scrollTop = this.window.scrollTop(),
                screenHeight = $.mobile.getScreenHeight();

            if ( offset.top < scrollTop || ( offset.top - scrollTop ) > screenHeight ) {
                this.element.addClass( "ui-loader-fakefix" );
                this.fakeFixLoader();
                this.window
                    .unbind( "scroll", this.checkLoaderPosition )
                    .bind( "scroll", $.proxy( this.fakeFixLoader, this ) );
            }
        },

        resetHtml: function() {
            this.element.html( $( this.defaultHtml ).html() );
        },

        // Turn on/off page loading message. Theme doubles as an object argument
        // with the following shape: { theme: '', text: '', html: '', textVisible: '' }
        // NOTE that the $.mobile.loading* settings and params past the first are deprecated
        // TODO sweet jesus we need to break some of this out
        show: function( theme, msgText, textonly ) {
            var textVisible, message, loadSettings;

            this.resetHtml();

            // use the prototype options so that people can set them globally at
            // mobile init. Consistency, it's what's for dinner
            if ( $.type( theme ) === "object" ) {
                loadSettings = $.extend( {}, this.options, theme );

                theme = loadSettings.theme;
            } else {
                loadSettings = this.options;

                // here we prefer the theme value passed as a string argument, then
                // we prefer the global option because we can't use undefined default
                // prototype options, then the prototype option
                theme = theme || loadSettings.theme;
            }

            // set the message text, prefer the param, then the settings object
            // then loading message
            message = msgText || ( loadSettings.text === false ? "" : loadSettings.text );

            // prepare the dom
            $html.addClass( "ui-loading" );

            textVisible = loadSettings.textVisible;

            // add the proper css given the options (theme, text, etc)
            // Force text visibility if the second argument was supplied, or
            // if the text was explicitly set in the object args
            this.element.attr("class", loaderClass +
                " ui-corner-all ui-body-" + theme +
                " ui-loader-" + ( textVisible || msgText || theme.text ? "verbose" : "default" ) +
                ( loadSettings.textonly || textonly ? " ui-loader-textonly" : "" ) );

            // TODO verify that jquery.fn.html is ok to use in both cases here
            //      this might be overly defensive in preventing unknowing xss
            // if the html attribute is defined on the loading settings, use that
            // otherwise use the fallbacks from above
            if ( loadSettings.html ) {
                this.element.html( loadSettings.html );
            } else {
                this.element.find( "h1" ).text( message );
            }

            // If the pagecontainer widget has been defined we may use the :mobile-pagecontainer
            // and attach to the element on which the pagecontainer widget has been defined. If not,
            // we attach to the body.
            this.element.appendTo( $.mobile.pagecontainer ?
                $( ":mobile-pagecontainer" ) : $( "body" ) );

            // check that the loader is visible
            this.checkLoaderPosition();

            // on scroll check the loader position
            this.window.bind( "scroll", $.proxy( this.checkLoaderPosition, this ) );
        },

        hide: function() {
            $html.removeClass( "ui-loading" );

            if ( this.options.text ) {
                this.element.removeClass( "ui-loader-fakefix" );
            }

            this.window.unbind( "scroll", this.fakeFixLoader );
            this.window.unbind( "scroll", this.checkLoaderPosition );
        }
    });

})(jQuery, this);


/*!
 * jQuery hashchange event - v1.3 - 7/21/2010
 * http://benalman.com/projects/jquery-hashchange-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */

// Script: jQuery hashchange event
//
// *Version: 1.3, Last updated: 7/21/2010*
// 
// Project Home - http://benalman.com/projects/jquery-hashchange-plugin/
// GitHub       - http://github.com/cowboy/jquery-hashchange/
// Source       - http://github.com/cowboy/jquery-hashchange/raw/master/jquery.ba-hashchange.js
// (Minified)   - http://github.com/cowboy/jquery-hashchange/raw/master/jquery.ba-hashchange.min.js (0.8kb gzipped)
// 
// About: License
// 
// Copyright (c) 2010 "Cowboy" Ben Alman,
// Dual licensed under the MIT and GPL licenses.
// http://benalman.com/about/license/
// 
// About: Examples
// 
// These working examples, complete with fully commented code, illustrate a few
// ways in which this plugin can be used.
// 
// hashchange event - http://benalman.com/code/projects/jquery-hashchange/examples/hashchange/
// document.domain - http://benalman.com/code/projects/jquery-hashchange/examples/document_domain/
// 
// About: Support and Testing
// 
// Information about what version or versions of jQuery this plugin has been
// tested with, what browsers it has been tested in, and where the unit tests
// reside (so you can test it yourself).
// 
// jQuery Versions - 1.2.6, 1.3.2, 1.4.1, 1.4.2
// Browsers Tested - Internet Explorer 6-8, Firefox 2-4, Chrome 5-6, Safari 3.2-5,
//                   Opera 9.6-10.60, iPhone 3.1, Android 1.6-2.2, BlackBerry 4.6-5.
// Unit Tests      - http://benalman.com/code/projects/jquery-hashchange/unit/
// 
// About: Known issues
// 
// While this jQuery hashchange event implementation is quite stable and
// robust, there are a few unfortunate browser bugs surrounding expected
// hashchange event-based behaviors, independent of any JavaScript
// window.onhashchange abstraction. See the following examples for more
// information:
// 
// Chrome: Back Button - http://benalman.com/code/projects/jquery-hashchange/examples/bug-chrome-back-button/
// Firefox: Remote XMLHttpRequest - http://benalman.com/code/projects/jquery-hashchange/examples/bug-firefox-remote-xhr/
// WebKit: Back Button in an Iframe - http://benalman.com/code/projects/jquery-hashchange/examples/bug-webkit-hash-iframe/
// Safari: Back Button from a different domain - http://benalman.com/code/projects/jquery-hashchange/examples/bug-safari-back-from-diff-domain/
// 
// Also note that should a browser natively support the window.onhashchange 
// event, but not report that it does, the fallback polling loop will be used.
// 
// About: Release History
// 
// 1.3   - (7/21/2010) Reorganized IE6/7 Iframe code to make it more
//         "removable" for mobile-only development. Added IE6/7 document.title
//         support. Attempted to make Iframe as hidden as possible by using
//         techniques from http://www.paciellogroup.com/blog/?p=604. Added 
//         support for the "shortcut" format $(window).hashchange( fn ) and
//         $(window).hashchange() like jQuery provides for built-in events.
//         Renamed jQuery.hashchangeDelay to <jQuery.fn.hashchange.delay> and
//         lowered its default value to 50. Added <jQuery.fn.hashchange.domain>
//         and <jQuery.fn.hashchange.src> properties plus document-domain.html
//         file to address access denied issues when setting document.domain in
//         IE6/7.
// 1.2   - (2/11/2010) Fixed a bug where coming back to a page using this plugin
//         from a page on another domain would cause an error in Safari 4. Also,
//         IE6/7 Iframe is now inserted after the body (this actually works),
//         which prevents the page from scrolling when the event is first bound.
//         Event can also now be bound before DOM ready, but it won't be usable
//         before then in IE6/7.
// 1.1   - (1/21/2010) Incorporated document.documentMode test to fix IE8 bug
//         where browser version is incorrectly reported as 8.0, despite
//         inclusion of the X-UA-Compatible IE=EmulateIE7 meta tag.
// 1.0   - (1/9/2010) Initial Release. Broke out the jQuery BBQ event.special
//         window.onhashchange functionality into a separate plugin for users
//         who want just the basic event & back button support, without all the
//         extra awesomeness that BBQ provides. This plugin will be included as
//         part of jQuery BBQ, but also be available separately.

(function($,window,undefined){
  '$:nomunge'; // Used by YUI compressor.
  
  // Reused string.
  var str_hashchange = 'hashchange',
    
    // Method / object references.
    doc = document,
    fake_onhashchange,
    special = $.event.special,
    
    // Does the browser support window.onhashchange? Note that IE8 running in
    // IE7 compatibility mode reports true for 'onhashchange' in window, even
    // though the event isn't supported, so also test document.documentMode.
    doc_mode = doc.documentMode,
    supports_onhashchange = 'on' + str_hashchange in window && ( doc_mode === undefined || doc_mode > 7 );
  
  // Get location.hash (or what you'd expect location.hash to be) sans any
  // leading #. Thanks for making this necessary, Firefox!
  function get_fragment( url ) {
    url = url || location.href;
    return '#' + url.replace( /^[^#]*#?(.*)$/, '$1' );
  };
  
  // Method: jQuery.fn.hashchange
  // 
  // Bind a handler to the window.onhashchange event or trigger all bound
  // window.onhashchange event handlers. This behavior is consistent with
  // jQuery's built-in event handlers.
  // 
  // Usage:
  // 
  // > jQuery(window).hashchange( [ handler ] );
  // 
  // Arguments:
  // 
  //  handler - (Function) Optional handler to be bound to the hashchange
  //    event. This is a "shortcut" for the more verbose form:
  //    jQuery(window).bind( 'hashchange', handler ). If handler is omitted,
  //    all bound window.onhashchange event handlers will be triggered. This
  //    is a shortcut for the more verbose
  //    jQuery(window).trigger( 'hashchange' ). These forms are described in
  //    the <hashchange event> section.
  // 
  // Returns:
  // 
  //  (jQuery) The initial jQuery collection of elements.
  
  // Allow the "shortcut" format $(elem).hashchange( fn ) for binding and
  // $(elem).hashchange() for triggering, like jQuery does for built-in events.
  $.fn[ str_hashchange ] = function( fn ) {
    return fn ? this.bind( str_hashchange, fn ) : this.trigger( str_hashchange );
  };
  
  // Property: jQuery.fn.hashchange.delay
  // 
  // The numeric interval (in milliseconds) at which the <hashchange event>
  // polling loop executes. Defaults to 50.
  
  // Property: jQuery.fn.hashchange.domain
  // 
  // If you're setting document.domain in your JavaScript, and you want hash
  // history to work in IE6/7, not only must this property be set, but you must
  // also set document.domain BEFORE jQuery is loaded into the page. This
  // property is only applicable if you are supporting IE6/7 (or IE8 operating
  // in "IE7 compatibility" mode).
  // 
  // In addition, the <jQuery.fn.hashchange.src> property must be set to the
  // path of the included "document-domain.html" file, which can be renamed or
  // modified if necessary (note that the document.domain specified must be the
  // same in both your main JavaScript as well as in this file).
  // 
  // Usage:
  // 
  // jQuery.fn.hashchange.domain = document.domain;
  
  // Property: jQuery.fn.hashchange.src
  // 
  // If, for some reason, you need to specify an Iframe src file (for example,
  // when setting document.domain as in <jQuery.fn.hashchange.domain>), you can
  // do so using this property. Note that when using this property, history
  // won't be recorded in IE6/7 until the Iframe src file loads. This property
  // is only applicable if you are supporting IE6/7 (or IE8 operating in "IE7
  // compatibility" mode).
  // 
  // Usage:
  // 
  // jQuery.fn.hashchange.src = 'path/to/file.html';
  
  $.fn[ str_hashchange ].delay = 50;
  /*
  $.fn[ str_hashchange ].domain = null;
  $.fn[ str_hashchange ].src = null;
  */
  
  // Event: hashchange event
  // 
  // Fired when location.hash changes. In browsers that support it, the native
  // HTML5 window.onhashchange event is used, otherwise a polling loop is
  // initialized, running every <jQuery.fn.hashchange.delay> milliseconds to
  // see if the hash has changed. In IE6/7 (and IE8 operating in "IE7
  // compatibility" mode), a hidden Iframe is created to allow the back button
  // and hash-based history to work.
  // 
  // Usage as described in <jQuery.fn.hashchange>:
  // 
  // > // Bind an event handler.
  // > jQuery(window).hashchange( function(e) {
  // >   var hash = location.hash;
  // >   ...
  // > });
  // > 
  // > // Manually trigger the event handler.
  // > jQuery(window).hashchange();
  // 
  // A more verbose usage that allows for event namespacing:
  // 
  // > // Bind an event handler.
  // > jQuery(window).bind( 'hashchange', function(e) {
  // >   var hash = location.hash;
  // >   ...
  // > });
  // > 
  // > // Manually trigger the event handler.
  // > jQuery(window).trigger( 'hashchange' );
  // 
  // Additional Notes:
  // 
  // * The polling loop and Iframe are not created until at least one handler
  //   is actually bound to the 'hashchange' event.
  // * If you need the bound handler(s) to execute immediately, in cases where
  //   a location.hash exists on page load, via bookmark or page refresh for
  //   example, use jQuery(window).hashchange() or the more verbose 
  //   jQuery(window).trigger( 'hashchange' ).
  // * The event can be bound before DOM ready, but since it won't be usable
  //   before then in IE6/7 (due to the necessary Iframe), recommended usage is
  //   to bind it inside a DOM ready handler.
  
  // Override existing $.event.special.hashchange methods (allowing this plugin
  // to be defined after jQuery BBQ in BBQ's source code).
  special[ str_hashchange ] = $.extend( special[ str_hashchange ], {
    
    // Called only when the first 'hashchange' event is bound to window.
    setup: function() {
      // If window.onhashchange is supported natively, there's nothing to do..
      if ( supports_onhashchange ) { return false; }
      
      // Otherwise, we need to create our own. And we don't want to call this
      // until the user binds to the event, just in case they never do, since it
      // will create a polling loop and possibly even a hidden Iframe.
      $( fake_onhashchange.start );
    },
    
    // Called only when the last 'hashchange' event is unbound from window.
    teardown: function() {
      // If window.onhashchange is supported natively, there's nothing to do..
      if ( supports_onhashchange ) { return false; }
      
      // Otherwise, we need to stop ours (if possible).
      $( fake_onhashchange.stop );
    }
    
  });
  
  // fake_onhashchange does all the work of triggering the window.onhashchange
  // event for browsers that don't natively support it, including creating a
  // polling loop to watch for hash changes and in IE 6/7 creating a hidden
  // Iframe to enable back and forward.
  fake_onhashchange = (function(){
    var self = {},
      timeout_id,
      
      // Remember the initial hash so it doesn't get triggered immediately.
      last_hash = get_fragment(),
      
      fn_retval = function(val){ return val; },
      history_set = fn_retval,
      history_get = fn_retval;
    
    // Start the polling loop.
    self.start = function() {
      timeout_id || poll();
    };
    
    // Stop the polling loop.
    self.stop = function() {
      timeout_id && clearTimeout( timeout_id );
      timeout_id = undefined;
    };
    
    // This polling loop checks every $.fn.hashchange.delay milliseconds to see
    // if location.hash has changed, and triggers the 'hashchange' event on
    // window when necessary.
    function poll() {
      var hash = get_fragment(),
        history_hash = history_get( last_hash );
      
      if ( hash !== last_hash ) {
        history_set( last_hash = hash, history_hash );
        
        $(window).trigger( str_hashchange );
        
      } else if ( history_hash !== last_hash ) {
        location.href = location.href.replace( /#.*/, '' ) + history_hash;
      }
      
      timeout_id = setTimeout( poll, $.fn[ str_hashchange ].delay );
    };
    
    // vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv
    // vvvvvvvvvvvvvvvvvvv REMOVE IF NOT SUPPORTING IE6/7/8 vvvvvvvvvvvvvvvvvvv
    // vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv
    window.attachEvent && !window.addEventListener && !supports_onhashchange && (function(){
      // Not only do IE6/7 need the "magical" Iframe treatment, but so does IE8
      // when running in "IE7 compatibility" mode.
      
      var iframe,
        iframe_src;
      
      // When the event is bound and polling starts in IE 6/7, create a hidden
      // Iframe for history handling.
      self.start = function(){
        if ( !iframe ) {
          iframe_src = $.fn[ str_hashchange ].src;
          iframe_src = iframe_src && iframe_src + get_fragment();
          
          // Create hidden Iframe. Attempt to make Iframe as hidden as possible
          // by using techniques from http://www.paciellogroup.com/blog/?p=604.
          iframe = $('<iframe tabindex="-1" title="empty"/>').hide()
            
            // When Iframe has completely loaded, initialize the history and
            // start polling.
            .one( 'load', function(){
              iframe_src || history_set( get_fragment() );
              poll();
            })
            
            // Load Iframe src if specified, otherwise nothing.
            .attr( 'src', iframe_src || 'javascript:0' )
            
            // Append Iframe after the end of the body to prevent unnecessary
            // initial page scrolling (yes, this works).
            .insertAfter( 'body' )[0].contentWindow;
          
          // Whenever `document.title` changes, update the Iframe's title to
          // prettify the back/next history menu entries. Since IE sometimes
          // errors with "Unspecified error" the very first time this is set
          // (yes, very useful) wrap this with a try/catch block.
          doc.onpropertychange = function(){
            try {
              if ( event.propertyName === 'title' ) {
                iframe.document.title = doc.title;
              }
            } catch(e) {}
          };
          
        }
      };
      
      // Override the "stop" method since an IE6/7 Iframe was created. Even
      // if there are no longer any bound event handlers, the polling loop
      // is still necessary for back/next to work at all!
      self.stop = fn_retval;
      
      // Get history by looking at the hidden Iframe's location.hash.
      history_get = function() {
        return get_fragment( iframe.location.href );
      };
      
      // Set a new history item by opening and then closing the Iframe
      // document, *then* setting its location.hash. If document.domain has
      // been set, update that as well.
      history_set = function( hash, history_hash ) {
        var iframe_doc = iframe.document,
          domain = $.fn[ str_hashchange ].domain;
        
        if ( hash !== history_hash ) {
          // Update Iframe with any initial `document.title` that might be set.
          iframe_doc.title = doc.title;
          
          // Opening the Iframe's document after it has been closed is what
          // actually adds a history entry.
          iframe_doc.open();
          
          // Set document.domain for the Iframe document as well, if necessary.
          domain && iframe_doc.write( '\x3cscript>document.domain="' + domain + '"\x3c/script>' );
          
          iframe_doc.close();
          
          // Update the Iframe's hash, for great justice.
          iframe.location.hash = hash;
        }
      };
      
    })();
    // ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    // ^^^^^^^^^^^^^^^^^^^ REMOVE IF NOT SUPPORTING IE6/7/8 ^^^^^^^^^^^^^^^^^^^
    // ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    
    return self;
  })();
  
})(jQuery,this);


(function( $, undefined ) {

    /*! matchMedia() polyfill - Test a CSS media type/query in JS. Authors & copyright (c) 2012: Scott Jehl, Paul Irish, Nicholas Zakas. Dual MIT/BSD license */
    window.matchMedia = window.matchMedia || (function( doc, undefined ) {

        var bool,
            docElem = doc.documentElement,
            refNode = docElem.firstElementChild || docElem.firstChild,
            // fakeBody required for <FF4 when executed in <head>
            fakeBody = doc.createElement( "body" ),
            div = doc.createElement( "div" );

        div.id = "mq-test-1";
        div.style.cssText = "position:absolute;top:-100em";
        fakeBody.style.background = "none";
        fakeBody.appendChild(div);

        return function(q){

            div.innerHTML = "&shy;<style media=\"" + q + "\"> #mq-test-1 { width: 42px; }</style>";

            docElem.insertBefore( fakeBody, refNode );
            bool = div.offsetWidth === 42;
            docElem.removeChild( fakeBody );

            return {
                matches: bool,
                media: q
            };

        };

    }( document ));

    // $.mobile.media uses matchMedia to return a boolean.
    $.mobile.media = function( q ) {
        return window.matchMedia( q ).matches;
    };

})(jQuery);

    (function( $, undefined ) {
        var support = {
            touch: "ontouchend" in document
        };

        $.mobile.support = $.mobile.support || {};
        $.extend( $.support, support );
        $.extend( $.mobile.support, support );
    }( jQuery ));

    (function( $, undefined ) {
        $.extend( $.support, {
            orientation: "orientation" in window && "onorientationchange" in window
        });
    }( jQuery ));

(function( $, undefined ) {

// thx Modernizr
function propExists( prop ) {
    var uc_prop = prop.charAt( 0 ).toUpperCase() + prop.substr( 1 ),
        props = ( prop + " " + vendors.join( uc_prop + " " ) + uc_prop ).split( " " ),
        v;

    for ( v in props ) {
        if ( fbCSS[ props[ v ] ] !== undefined ) {
            return true;
        }
    }
}

var fakeBody = $( "<body>" ).prependTo( "html" ),
    fbCSS = fakeBody[ 0 ].style,
    vendors = [ "Webkit", "Moz", "O" ],
    webos = "palmGetResource" in window, //only used to rule out scrollTop
    operamini = window.operamini && ({}).toString.call( window.operamini ) === "[object OperaMini]",
    bb = window.blackberry && !propExists( "-webkit-transform" ), //only used to rule out box shadow, as it's filled opaque on BB 5 and lower
    nokiaLTE7_3;

// inline SVG support test
function inlineSVG() {
    // Thanks Modernizr & Erik Dahlstrom
    var w = window,
        svg = !!w.document.createElementNS && !!w.document.createElementNS( "http://www.w3.org/2000/svg", "svg" ).createSVGRect && !( w.opera && navigator.userAgent.indexOf( "Chrome" ) === -1 ),
        support = function( data ) {
            if ( !( data && svg ) ) {
                $( "html" ).addClass( "ui-nosvg" );
            }
        },
        img = new w.Image();

    img.onerror = function() {
        support( false );
    };
    img.onload = function() {
        support( img.width === 1 && img.height === 1 );
    };
    img.src = "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";
}

function transform3dTest() {
    var mqProp = "transform-3d",
        // Because the `translate3d` test below throws false positives in Android:
        ret = $.mobile.media( "(-" + vendors.join( "-" + mqProp + "),(-" ) + "-" + mqProp + "),(" + mqProp + ")" ),
        el, transforms, t;

    if ( ret ) {
        return !!ret;
    }

    el = document.createElement( "div" );
    transforms = {
        // We’re omitting Opera for the time being; MS uses unprefixed.
        "MozTransform": "-moz-transform",
        "transform": "transform"
    };

    fakeBody.append( el );

    for ( t in transforms ) {
        if ( el.style[ t ] !== undefined ) {
            el.style[ t ] = "translate3d( 100px, 1px, 1px )";
            ret = window.getComputedStyle( el ).getPropertyValue( transforms[ t ] );
        }
    }
    return ( !!ret && ret !== "none" );
}

// Test for dynamic-updating base tag support ( allows us to avoid href,src attr rewriting )
function baseTagTest() {
    var fauxBase = location.protocol + "//" + location.host + location.pathname + "ui-dir/",
        base = $( "head base" ),
        fauxEle = null,
        href = "",
        link, rebase;

    if ( !base.length ) {
        base = fauxEle = $( "<base>", { "href": fauxBase }).appendTo( "head" );
    } else {
        href = base.attr( "href" );
    }

    link = $( "<a href='testurl' />" ).prependTo( fakeBody );
    rebase = link[ 0 ].href;
    base[ 0 ].href = href || location.pathname;

    if ( fauxEle ) {
        fauxEle.remove();
    }
    return rebase.indexOf( fauxBase ) === 0;
}

// Thanks Modernizr
function cssPointerEventsTest() {
    var element = document.createElement( "x" ),
        documentElement = document.documentElement,
        getComputedStyle = window.getComputedStyle,
        supports;

    if ( !( "pointerEvents" in element.style ) ) {
        return false;
    }

    element.style.pointerEvents = "auto";
    element.style.pointerEvents = "x";
    documentElement.appendChild( element );
    supports = getComputedStyle &&
    getComputedStyle( element, "" ).pointerEvents === "auto";
    documentElement.removeChild( element );
    return !!supports;
}

function boundingRect() {
    var div = document.createElement( "div" );
    return typeof div.getBoundingClientRect !== "undefined";
}

// non-UA-based IE version check by James Padolsey, modified by jdalton - from http://gist.github.com/527683
// allows for inclusion of IE 6+, including Windows Mobile 7
$.extend( $.mobile, { browser: {} } );
$.mobile.browser.oldIE = (function() {
    var v = 3,
        div = document.createElement( "div" ),
        a = div.all || [];

    do {
        div.innerHTML = "<!--[if gt IE " + ( ++v ) + "]><br><![endif]-->";
    } while( a[0] );

    return v > 4 ? v : !v;
})();

function fixedPosition() {
    var w = window,
        ua = navigator.userAgent,
        platform = navigator.platform,
        // Rendering engine is Webkit, and capture major version
        wkmatch = ua.match( /AppleWebKit\/([0-9]+)/ ),
        wkversion = !!wkmatch && wkmatch[ 1 ],
        ffmatch = ua.match( /Fennec\/([0-9]+)/ ),
        ffversion = !!ffmatch && ffmatch[ 1 ],
        operammobilematch = ua.match( /Opera Mobi\/([0-9]+)/ ),
        omversion = !!operammobilematch && operammobilematch[ 1 ];

    if (
        // iOS 4.3 and older : Platform is iPhone/Pad/Touch and Webkit version is less than 534 (ios5)
        ( ( platform.indexOf( "iPhone" ) > -1 || platform.indexOf( "iPad" ) > -1  || platform.indexOf( "iPod" ) > -1 ) && wkversion && wkversion < 534 ) ||
        // Opera Mini
        ( w.operamini && ({}).toString.call( w.operamini ) === "[object OperaMini]" ) ||
        ( operammobilematch && omversion < 7458 )    ||
        //Android lte 2.1: Platform is Android and Webkit version is less than 533 (Android 2.2)
        ( ua.indexOf( "Android" ) > -1 && wkversion && wkversion < 533 ) ||
        // Firefox Mobile before 6.0 -
        ( ffversion && ffversion < 6 ) ||
        // WebOS less than 3
        ( "palmGetResource" in window && wkversion && wkversion < 534 )    ||
        // MeeGo
        ( ua.indexOf( "MeeGo" ) > -1 && ua.indexOf( "NokiaBrowser/8.5.0" ) > -1 ) ) {
        return false;
    }

    return true;
}

$.extend( $.support, {
    // Note, Chrome for iOS has an extremely quirky implementation of popstate.
    // We've chosen to take the shortest path to a bug fix here for issue #5426
    // See the following link for information about the regex chosen
    // https://developers.google.com/chrome/mobile/docs/user-agent#chrome_for_ios_user-agent
    pushState: "pushState" in history &&
        "replaceState" in history &&
        // When running inside a FF iframe, calling replaceState causes an error
        !( window.navigator.userAgent.indexOf( "Firefox" ) >= 0 && window.top !== window ) &&
        ( window.navigator.userAgent.search(/CriOS/) === -1 ),

    mediaquery: $.mobile.media( "only all" ),
    cssPseudoElement: !!propExists( "content" ),
    touchOverflow: !!propExists( "overflowScrolling" ),
    cssTransform3d: transform3dTest(),
    boxShadow: !!propExists( "boxShadow" ) && !bb,
    fixedPosition: fixedPosition(),
    scrollTop: ("pageXOffset" in window ||
        "scrollTop" in document.documentElement ||
        "scrollTop" in fakeBody[ 0 ]) && !webos && !operamini,

    dynamicBaseTag: baseTagTest(),
    cssPointerEvents: cssPointerEventsTest(),
    boundingRect: boundingRect(),
    inlineSVG: inlineSVG
});

fakeBody.remove();

// $.mobile.ajaxBlacklist is used to override ajaxEnabled on platforms that have known conflicts with hash history updates (BB5, Symbian)
// or that generally work better browsing in regular http for full page refreshes (Opera Mini)
// Note: This detection below is used as a last resort.
// We recommend only using these detection methods when all other more reliable/forward-looking approaches are not possible
nokiaLTE7_3 = (function() {

    var ua = window.navigator.userAgent;

    //The following is an attempt to match Nokia browsers that are running Symbian/s60, with webkit, version 7.3 or older
    return ua.indexOf( "Nokia" ) > -1 &&
            ( ua.indexOf( "Symbian/3" ) > -1 || ua.indexOf( "Series60/5" ) > -1 ) &&
            ua.indexOf( "AppleWebKit" ) > -1 &&
            ua.match( /(BrowserNG|NokiaBrowser)\/7\.[0-3]/ );
})();

// Support conditions that must be met in order to proceed
// default enhanced qualifications are media query support OR IE 7+

$.mobile.gradeA = function() {
    return ( ( $.support.mediaquery && $.support.cssPseudoElement ) || $.mobile.browser.oldIE && $.mobile.browser.oldIE >= 8 ) && ( $.support.boundingRect || $.fn.jquery.match(/1\.[0-7+]\.[0-9+]?/) !== null );
};

$.mobile.ajaxBlacklist =
            // BlackBerry browsers, pre-webkit
            window.blackberry && !window.WebKitPoint ||
            // Opera Mini
            operamini ||
            // Symbian webkits pre 7.3
            nokiaLTE7_3;

// Lastly, this workaround is the only way we've found so far to get pre 7.3 Symbian webkit devices
// to render the stylesheets when they're referenced before this script, as we'd recommend doing.
// This simply reappends the CSS in place, which for some reason makes it apply
if ( nokiaLTE7_3 ) {
    $(function() {
        $( "head link[rel='stylesheet']" ).attr( "rel", "alternate stylesheet" ).attr( "rel", "stylesheet" );
    });
}

// For ruling out shadows via css
if ( !$.support.boxShadow ) {
    $( "html" ).addClass( "ui-noboxshadow" );
}

})( jQuery );


(function( $, undefined ) {
    var $win = $.mobile.window, self,
        dummyFnToInitNavigate = function() {
        };

    $.event.special.beforenavigate = {
        setup: function() {
            $win.on( "navigate", dummyFnToInitNavigate );
        },

        teardown: function() {
            $win.off( "navigate", dummyFnToInitNavigate );
        }
    };

    $.event.special.navigate = self = {
        bound: false,

        pushStateEnabled: true,

        originalEventName: undefined,

        // If pushstate support is present and push state support is defined to
        // be true on the mobile namespace.
        isPushStateEnabled: function() {
            return $.support.pushState &&
                $.mobile.pushStateEnabled === true &&
                this.isHashChangeEnabled();
        },

        // !! assumes mobile namespace is present
        isHashChangeEnabled: function() {
            return $.mobile.hashListeningEnabled === true;
        },

        // TODO a lot of duplication between popstate and hashchange
        popstate: function( event ) {
            var newEvent = new $.Event( "navigate" ),
                beforeNavigate = new $.Event( "beforenavigate" ),
                state = event.originalEvent.state || {};

            beforeNavigate.originalEvent = event;
            $win.trigger( beforeNavigate );

            if ( beforeNavigate.isDefaultPrevented() ) {
                return;
            }

            if ( event.historyState ) {
                $.extend(state, event.historyState);
            }

            // Make sure the original event is tracked for the end
            // user to inspect incase they want to do something special
            newEvent.originalEvent = event;

            // NOTE we let the current stack unwind because any assignment to
            //      location.hash will stop the world and run this event handler. By
            //      doing this we create a similar behavior to hashchange on hash
            //      assignment
            setTimeout(function() {
                $win.trigger( newEvent, {
                    state: state
                });
            }, 0);
        },

        hashchange: function( event /*, data */ ) {
            var newEvent = new $.Event( "navigate" ),
                beforeNavigate = new $.Event( "beforenavigate" );

            beforeNavigate.originalEvent = event;
            $win.trigger( beforeNavigate );

            if ( beforeNavigate.isDefaultPrevented() ) {
                return;
            }

            // Make sure the original event is tracked for the end
            // user to inspect incase they want to do something special
            newEvent.originalEvent = event;

            // Trigger the hashchange with state provided by the user
            // that altered the hash
            $win.trigger( newEvent, {
                // Users that want to fully normalize the two events
                // will need to do history management down the stack and
                // add the state to the event before this binding is fired
                // TODO consider allowing for the explicit addition of callbacks
                //      to be fired before this value is set to avoid event timing issues
                state: event.hashchangeState || {}
            });
        },

        // TODO We really only want to set this up once
        //      but I'm not clear if there's a beter way to achieve
        //      this with the jQuery special event structure
        setup: function( /* data, namespaces */ ) {
            if ( self.bound ) {
                return;
            }

            self.bound = true;

            if ( self.isPushStateEnabled() ) {
                self.originalEventName = "popstate";
                $win.bind( "popstate.navigate", self.popstate );
            } else if ( self.isHashChangeEnabled() ) {
                self.originalEventName = "hashchange";
                $win.bind( "hashchange.navigate", self.hashchange );
            }
        }
    };
})( jQuery );



(function( $, undefined ) {
        var path, $base, dialogHashKey = "&ui-state=dialog";

        $.mobile.path = path = {
            uiStateKey: "&ui-state",

            // This scary looking regular expression parses an absolute URL or its relative
            // variants (protocol, site, document, query, and hash), into the various
            // components (protocol, host, path, query, fragment, etc that make up the
            // URL as well as some other commonly used sub-parts. When used with RegExp.exec()
            // or String.match, it parses the URL into a results array that looks like this:
            //
            //     [0]: http://jblas:password@mycompany.com:8080/mail/inbox?msg=1234&type=unread#msg-content
            //     [1]: http://jblas:password@mycompany.com:8080/mail/inbox?msg=1234&type=unread
            //     [2]: http://jblas:password@mycompany.com:8080/mail/inbox
            //     [3]: http://jblas:password@mycompany.com:8080
            //     [4]: http:
            //     [5]: //
            //     [6]: jblas:password@mycompany.com:8080
            //     [7]: jblas:password
            //     [8]: jblas
            //     [9]: password
            //    [10]: mycompany.com:8080
            //    [11]: mycompany.com
            //    [12]: 8080
            //    [13]: /mail/inbox
            //    [14]: /mail/
            //    [15]: inbox
            //    [16]: ?msg=1234&type=unread
            //    [17]: #msg-content
            //
            urlParseRE: /^\s*(((([^:\/#\?]+:)?(?:(\/\/)((?:(([^:@\/#\?]+)(?:\:([^:@\/#\?]+))?)@)?(([^:\/#\?\]\[]+|\[[^\/\]@#?]+\])(?:\:([0-9]+))?))?)?)?((\/?(?:[^\/\?#]+\/+)*)([^\?#]*)))?(\?[^#]+)?)(#.*)?/,

            // Abstraction to address xss (Issue #4787) by removing the authority in
            // browsers that auto-decode it. All references to location.href should be
            // replaced with a call to this method so that it can be dealt with properly here
            getLocation: function( url ) {
                var parsedUrl = this.parseUrl( url || location.href ),
                    uri = url ? parsedUrl : location,

                    // Make sure to parse the url or the location object for the hash because using
                    // location.hash is autodecoded in firefox, the rest of the url should be from
                    // the object (location unless we're testing) to avoid the inclusion of the
                    // authority
                    hash = parsedUrl.hash;

                // mimic the browser with an empty string when the hash is empty
                hash = hash === "#" ? "" : hash;

                return uri.protocol +
                    parsedUrl.doubleSlash +
                    uri.host +

                    // The pathname must start with a slash if there's a protocol, because you
                    // can't have a protocol followed by a relative path. Also, it's impossible to
                    // calculate absolute URLs from relative ones if the absolute one doesn't have
                    // a leading "/".
                    ( ( uri.protocol !== "" && uri.pathname.substring( 0, 1 ) !== "/" ) ?
                        "/" : "" ) +
                    uri.pathname +
                    uri.search +
                    hash;
            },

            //return the original document url
            getDocumentUrl: function( asParsedObject ) {
                return asParsedObject ? $.extend( {}, path.documentUrl ) : path.documentUrl.href;
            },

            parseLocation: function() {
                return this.parseUrl( this.getLocation() );
            },

            //Parse a URL into a structure that allows easy access to
            //all of the URL components by name.
            parseUrl: function( url ) {
                // If we're passed an object, we'll assume that it is
                // a parsed url object and just return it back to the caller.
                if ( $.type( url ) === "object" ) {
                    return url;
                }

                var matches = path.urlParseRE.exec( url || "" ) || [];

                    // Create an object that allows the caller to access the sub-matches
                    // by name. Note that IE returns an empty string instead of undefined,
                    // like all other browsers do, so we normalize everything so its consistent
                    // no matter what browser we're running on.
                    return {
                        href:         matches[  0 ] || "",
                        hrefNoHash:   matches[  1 ] || "",
                        hrefNoSearch: matches[  2 ] || "",
                        domain:       matches[  3 ] || "",
                        protocol:     matches[  4 ] || "",
                        doubleSlash:  matches[  5 ] || "",
                        authority:    matches[  6 ] || "",
                        username:     matches[  8 ] || "",
                        password:     matches[  9 ] || "",
                        host:         matches[ 10 ] || "",
                        hostname:     matches[ 11 ] || "",
                        port:         matches[ 12 ] || "",
                        pathname:     matches[ 13 ] || "",
                        directory:    matches[ 14 ] || "",
                        filename:     matches[ 15 ] || "",
                        search:       matches[ 16 ] || "",
                        hash:         matches[ 17 ] || ""
                    };
            },

            //Turn relPath into an asbolute path. absPath is
            //an optional absolute path which describes what
            //relPath is relative to.
            makePathAbsolute: function( relPath, absPath ) {
                var absStack,
                    relStack,
                    i, d;

                if ( relPath && relPath.charAt( 0 ) === "/" ) {
                    return relPath;
                }

                relPath = relPath || "";
                absPath = absPath ? absPath.replace( /^\/|(\/[^\/]*|[^\/]+)$/g, "" ) : "";

                absStack = absPath ? absPath.split( "/" ) : [];
                relStack = relPath.split( "/" );

                for ( i = 0; i < relStack.length; i++ ) {
                    d = relStack[ i ];
                    switch ( d ) {
                        case ".":
                            break;
                        case "..":
                            if ( absStack.length ) {
                                absStack.pop();
                            }
                            break;
                        default:
                            absStack.push( d );
                            break;
                    }
                }
                return "/" + absStack.join( "/" );
            },

            //Returns true if both urls have the same domain.
            isSameDomain: function( absUrl1, absUrl2 ) {
                return path.parseUrl( absUrl1 ).domain.toLowerCase() ===
                    path.parseUrl( absUrl2 ).domain.toLowerCase();
            },

            //Returns true for any relative variant.
            isRelativeUrl: function( url ) {
                // All relative Url variants have one thing in common, no protocol.
                return path.parseUrl( url ).protocol === "";
            },

            //Returns true for an absolute url.
            isAbsoluteUrl: function( url ) {
                return path.parseUrl( url ).protocol !== "";
            },

            //Turn the specified realtive URL into an absolute one. This function
            //can handle all relative variants (protocol, site, document, query, fragment).
            makeUrlAbsolute: function( relUrl, absUrl ) {
                if ( !path.isRelativeUrl( relUrl ) ) {
                    return relUrl;
                }

                if ( absUrl === undefined ) {
                    absUrl = this.documentBase;
                }

                var relObj = path.parseUrl( relUrl ),
                    absObj = path.parseUrl( absUrl ),
                    protocol = relObj.protocol || absObj.protocol,
                    doubleSlash = relObj.protocol ? relObj.doubleSlash : ( relObj.doubleSlash || absObj.doubleSlash ),
                    authority = relObj.authority || absObj.authority,
                    hasPath = relObj.pathname !== "",
                    pathname = path.makePathAbsolute( relObj.pathname || absObj.filename, absObj.pathname ),
                    search = relObj.search || ( !hasPath && absObj.search ) || "",
                    hash = relObj.hash;

                return protocol + doubleSlash + authority + pathname + search + hash;
            },

            //Add search (aka query) params to the specified url.
            addSearchParams: function( url, params ) {
                var u = path.parseUrl( url ),
                    p = ( typeof params === "object" ) ? $.param( params ) : params,
                    s = u.search || "?";
                return u.hrefNoSearch + s + ( s.charAt( s.length - 1 ) !== "?" ? "&" : "" ) + p + ( u.hash || "" );
            },

            convertUrlToDataUrl: function( absUrl ) {
                var result = absUrl,
                    u = path.parseUrl( absUrl );

                if ( path.isEmbeddedPage( u ) ) {
                    // For embedded pages, remove the dialog hash key as in getFilePath(),
                    // and remove otherwise the Data Url won't match the id of the embedded Page.
                    result = u.hash
                        .split( dialogHashKey )[0]
                        .replace( /^#/, "" )
                        .replace( /\?.*$/, "" );
                } else if ( path.isSameDomain( u, this.documentBase ) ) {
                    result = u.hrefNoHash.replace( this.documentBase.domain, "" ).split( dialogHashKey )[0];
                }

                return window.decodeURIComponent( result );
            },

            //get path from current hash, or from a file path
            get: function( newPath ) {
                if ( newPath === undefined ) {
                    newPath = path.parseLocation().hash;
                }
                return path.stripHash( newPath ).replace( /[^\/]*\.[^\/*]+$/, "" );
            },

            //set location hash to path
            set: function( path ) {
                location.hash = path;
            },

            //test if a given url (string) is a path
            //NOTE might be exceptionally naive
            isPath: function( url ) {
                return ( /\// ).test( url );
            },

            //return a url path with the window's location protocol/hostname/pathname removed
            clean: function( url ) {
                return url.replace( this.documentBase.domain, "" );
            },

            //just return the url without an initial #
            stripHash: function( url ) {
                return url.replace( /^#/, "" );
            },

            stripQueryParams: function( url ) {
                return url.replace( /\?.*$/, "" );
            },

            //remove the preceding hash, any query params, and dialog notations
            cleanHash: function( hash ) {
                return path.stripHash( hash.replace( /\?.*$/, "" ).replace( dialogHashKey, "" ) );
            },

            isHashValid: function( hash ) {
                return ( /^#[^#]+$/ ).test( hash );
            },

            //check whether a url is referencing the same domain, or an external domain or different protocol
            //could be mailto, etc
            isExternal: function( url ) {
                var u = path.parseUrl( url );

                return !!( u.protocol &&
                    ( u.domain.toLowerCase() !== this.documentUrl.domain.toLowerCase() ) );
            },

            hasProtocol: function( url ) {
                return ( /^(:?\w+:)/ ).test( url );
            },

            isEmbeddedPage: function( url ) {
                var u = path.parseUrl( url );

                //if the path is absolute, then we need to compare the url against
                //both the this.documentUrl and the documentBase. The main reason for this
                //is that links embedded within external documents will refer to the
                //application document, whereas links embedded within the application
                //document will be resolved against the document base.
                if ( u.protocol !== "" ) {
                    return ( !this.isPath(u.hash) && u.hash && ( u.hrefNoHash === this.documentUrl.hrefNoHash || ( this.documentBaseDiffers && u.hrefNoHash === this.documentBase.hrefNoHash ) ) );
                }
                return ( /^#/ ).test( u.href );
            },

            squash: function( url, resolutionUrl ) {
                var href, cleanedUrl, search, stateIndex, docUrl,
                    isPath = this.isPath( url ),
                    uri = this.parseUrl( url ),
                    preservedHash = uri.hash,
                    uiState = "";

                // produce a url against which we can resolve the provided path
                if ( !resolutionUrl ) {
                    if ( isPath ) {
                        resolutionUrl = path.getLocation();
                    } else {
                        docUrl = path.getDocumentUrl( true );
                        if ( path.isPath( docUrl.hash ) ) {
                            resolutionUrl = path.squash( docUrl.href );
                        } else {
                            resolutionUrl = docUrl.href;
                        }
                    }
                }

                // If the url is anything but a simple string, remove any preceding hash
                // eg #foo/bar -> foo/bar
                //    #foo -> #foo
                cleanedUrl = isPath ? path.stripHash( url ) : url;

                // If the url is a full url with a hash check if the parsed hash is a path
                // if it is, strip the #, and use it otherwise continue without change
                cleanedUrl = path.isPath( uri.hash ) ? path.stripHash( uri.hash ) : cleanedUrl;

                // Split the UI State keys off the href
                stateIndex = cleanedUrl.indexOf( this.uiStateKey );

                // store the ui state keys for use
                if ( stateIndex > -1 ) {
                    uiState = cleanedUrl.slice( stateIndex );
                    cleanedUrl = cleanedUrl.slice( 0, stateIndex );
                }

                // make the cleanedUrl absolute relative to the resolution url
                href = path.makeUrlAbsolute( cleanedUrl, resolutionUrl );

                // grab the search from the resolved url since parsing from
                // the passed url may not yield the correct result
                search = this.parseUrl( href ).search;

                // TODO all this crap is terrible, clean it up
                if ( isPath ) {
                    // reject the hash if it's a path or it's just a dialog key
                    if ( path.isPath( preservedHash ) || preservedHash.replace("#", "").indexOf( this.uiStateKey ) === 0) {
                        preservedHash = "";
                    }

                    // Append the UI State keys where it exists and it's been removed
                    // from the url
                    if ( uiState && preservedHash.indexOf( this.uiStateKey ) === -1) {
                        preservedHash += uiState;
                    }

                    // make sure that pound is on the front of the hash
                    if ( preservedHash.indexOf( "#" ) === -1 && preservedHash !== "" ) {
                        preservedHash = "#" + preservedHash;
                    }

                    // reconstruct each of the pieces with the new search string and hash
                    href = path.parseUrl( href );
                    href = href.protocol + href.doubleSlash + href.host + href.pathname + search +
                        preservedHash;
                } else {
                    href += href.indexOf( "#" ) > -1 ? uiState : "#" + uiState;
                }

                return href;
            },

            isPreservableHash: function( hash ) {
                return hash.replace( "#", "" ).indexOf( this.uiStateKey ) === 0;
            },

            // Escape weird characters in the hash if it is to be used as a selector
            hashToSelector: function( hash ) {
                var hasHash = ( hash.substring( 0, 1 ) === "#" );
                if ( hasHash ) {
                    hash = hash.substring( 1 );
                }
                return ( hasHash ? "#" : "" ) + hash.replace( /([!"#$%&'()*+,./:;<=>?@[\]^`{|}~])/g, "\\$1" );
            },

            // return the substring of a filepath before the dialogHashKey, for making a server
            // request
            getFilePath: function( path ) {
                return path && path.split( dialogHashKey )[0];
            },

            // check if the specified url refers to the first page in the main
            // application document.
            isFirstPageUrl: function( url ) {
                // We only deal with absolute paths.
                var u = path.parseUrl( path.makeUrlAbsolute( url, this.documentBase ) ),

                    // Does the url have the same path as the document?
                    samePath = u.hrefNoHash === this.documentUrl.hrefNoHash ||
                        ( this.documentBaseDiffers &&
                            u.hrefNoHash === this.documentBase.hrefNoHash ),

                    // Get the first page element.
                    fp = $.mobile.firstPage,

                    // Get the id of the first page element if it has one.
                    fpId = fp && fp[0] ? fp[0].id : undefined;

                // The url refers to the first page if the path matches the document and
                // it either has no hash value, or the hash is exactly equal to the id
                // of the first page element.
                return samePath &&
                    ( !u.hash ||
                        u.hash === "#" ||
                        ( fpId && u.hash.replace( /^#/, "" ) === fpId ) );
            },

            // Some embedded browsers, like the web view in Phone Gap, allow
            // cross-domain XHR requests if the document doing the request was loaded
            // via the file:// protocol. This is usually to allow the application to
            // "phone home" and fetch app specific data. We normally let the browser
            // handle external/cross-domain urls, but if the allowCrossDomainPages
            // option is true, we will allow cross-domain http/https requests to go
            // through our page loading logic.
            isPermittedCrossDomainRequest: function( docUrl, reqUrl ) {
                return $.mobile.allowCrossDomainPages &&
                    (docUrl.protocol === "file:" || docUrl.protocol === "content:") &&
                    reqUrl.search( /^https?:/ ) !== -1;
            }
        };

        path.documentUrl = path.parseLocation();

        $base = $( "head" ).find( "base" );

        path.documentBase = $base.length ?
            path.parseUrl( path.makeUrlAbsolute( $base.attr( "href" ), path.documentUrl.href ) ) :
            path.documentUrl;

        path.documentBaseDiffers = (path.documentUrl.hrefNoHash !== path.documentBase.hrefNoHash);

        //return the original document base url
        path.getDocumentBase = function( asParsedObject ) {
            return asParsedObject ? $.extend( {}, path.documentBase ) : path.documentBase.href;
        };

        // DEPRECATED as of 1.4.0 - remove in 1.5.0
        $.extend( $.mobile, {

            //return the original document url
            getDocumentUrl: path.getDocumentUrl,

            //return the original document base url
            getDocumentBase: path.getDocumentBase
        });
})( jQuery );



(function( $, undefined ) {
    $.mobile.History = function( stack, index ) {
        this.stack = stack || [];
        this.activeIndex = index || 0;
    };

    $.extend($.mobile.History.prototype, {
        getActive: function() {
            return this.stack[ this.activeIndex ];
        },

        getLast: function() {
            return this.stack[ this.previousIndex ];
        },

        getNext: function() {
            return this.stack[ this.activeIndex + 1 ];
        },

        getPrev: function() {
            return this.stack[ this.activeIndex - 1 ];
        },

        // addNew is used whenever a new page is added
        add: function( url, data ) {
            data = data || {};

            //if there's forward history, wipe it
            if ( this.getNext() ) {
                this.clearForward();
            }

            // if the hash is included in the data make sure the shape
            // is consistent for comparison
            if ( data.hash && data.hash.indexOf( "#" ) === -1) {
                data.hash = "#" + data.hash;
            }

            data.url = url;
            this.stack.push( data );
            this.activeIndex = this.stack.length - 1;
        },

        //wipe urls ahead of active index
        clearForward: function() {
            this.stack = this.stack.slice( 0, this.activeIndex + 1 );
        },

        find: function( url, stack, earlyReturn ) {
            stack = stack || this.stack;

            var entry, i, length = stack.length, index;

            for ( i = 0; i < length; i++ ) {
                entry = stack[i];

                if ( decodeURIComponent(url) === decodeURIComponent(entry.url) ||
                    decodeURIComponent(url) === decodeURIComponent(entry.hash) ) {
                    index = i;

                    if ( earlyReturn ) {
                        return index;
                    }
                }
            }

            return index;
        },

        closest: function( url ) {
            var closest, a = this.activeIndex;

            // First, take the slice of the history stack before the current index and search
            // for a url match. If one is found, we'll avoid avoid looking through forward history
            // NOTE the preference for backward history movement is driven by the fact that
            //      most mobile browsers only have a dedicated back button, and users rarely use
            //      the forward button in desktop browser anyhow
            closest = this.find( url, this.stack.slice(0, a) );

            // If nothing was found in backward history check forward. The `true`
            // value passed as the third parameter causes the find method to break
            // on the first match in the forward history slice. The starting index
            // of the slice must then be added to the result to get the element index
            // in the original history stack :( :(
            //
            // TODO this is hyper confusing and should be cleaned up (ugh so bad)
            if ( closest === undefined ) {
                closest = this.find( url, this.stack.slice(a), true );
                closest = closest === undefined ? closest : closest + a;
            }

            return closest;
        },

        direct: function( opts ) {
            var newActiveIndex = this.closest( opts.url ), a = this.activeIndex;

            // save new page index, null check to prevent falsey 0 result
            // record the previous index for reference
            if ( newActiveIndex !== undefined ) {
                this.activeIndex = newActiveIndex;
                this.previousIndex = a;
            }

            // invoke callbacks where appropriate
            //
            // TODO this is also convoluted and confusing
            if ( newActiveIndex < a ) {
                ( opts.present || opts.back || $.noop )( this.getActive(), "back" );
            } else if ( newActiveIndex > a ) {
                ( opts.present || opts.forward || $.noop )( this.getActive(), "forward" );
            } else if ( newActiveIndex === undefined && opts.missing ) {
                opts.missing( this.getActive() );
            }
        }
    });
})( jQuery );



(function( $, undefined ) {
    var path = $.mobile.path,
        initialHref = location.href;

    $.mobile.Navigator = function( history ) {
        this.history = history;
        this.ignoreInitialHashChange = true;

        $.mobile.window.bind({
            "popstate.history": $.proxy( this.popstate, this ),
            "hashchange.history": $.proxy( this.hashchange, this )
        });
    };

    $.extend($.mobile.Navigator.prototype, {
        squash: function( url, data ) {
            var state, href, hash = path.isPath(url) ? path.stripHash(url) : url;

            href = path.squash( url );

            // make sure to provide this information when it isn't explicitly set in the
            // data object that was passed to the squash method
            state = $.extend({
                hash: hash,
                url: href
            }, data);

            // replace the current url with the new href and store the state
            // Note that in some cases we might be replacing an url with the
            // same url. We do this anyways because we need to make sure that
            // all of our history entries have a state object associated with
            // them. This allows us to work around the case where $.mobile.back()
            // is called to transition from an external page to an embedded page.
            // In that particular case, a hashchange event is *NOT* generated by the browser.
            // Ensuring each history entry has a state object means that onPopState()
            // will always trigger our hashchange callback even when a hashchange event
            // is not fired.
            window.history.replaceState( state, state.title || document.title, href );

            return state;
        },

        hash: function( url, href ) {
            var parsed, loc, hash, resolved;

            // Grab the hash for recording. If the passed url is a path
            // we used the parsed version of the squashed url to reconstruct,
            // otherwise we assume it's a hash and store it directly
            parsed = path.parseUrl( url );
            loc = path.parseLocation();

            if ( loc.pathname + loc.search === parsed.pathname + parsed.search ) {
                // If the pathname and search of the passed url is identical to the current loc
                // then we must use the hash. Otherwise there will be no event
                // eg, url = "/foo/bar?baz#bang", location.href = "http://example.com/foo/bar?baz"
                hash = parsed.hash ? parsed.hash : parsed.pathname + parsed.search;
            } else if ( path.isPath(url) ) {
                resolved = path.parseUrl( href );
                // If the passed url is a path, make it domain relative and remove any trailing hash
                hash = resolved.pathname + resolved.search + (path.isPreservableHash( resolved.hash )? resolved.hash.replace( "#", "" ) : "");
            } else {
                hash = url;
            }

            return hash;
        },

        // TODO reconsider name
        go: function( url, data, noEvents ) {
            var state, href, hash, popstateEvent,
                isPopStateEvent = $.event.special.navigate.isPushStateEnabled();

            // Get the url as it would look squashed on to the current resolution url
            href = path.squash( url );

            // sort out what the hash sould be from the url
            hash = this.hash( url, href );

            // Here we prevent the next hash change or popstate event from doing any
            // history management. In the case of hashchange we don't swallow it
            // if there will be no hashchange fired (since that won't reset the value)
            // and will swallow the following hashchange
            if ( noEvents && hash !== path.stripHash(path.parseLocation().hash) ) {
                this.preventNextHashChange = noEvents;
            }

            // IMPORTANT in the case where popstate is supported the event will be triggered
            //      directly, stopping further execution - ie, interupting the flow of this
            //      method call to fire bindings at this expression. Below the navigate method
            //      there is a binding to catch this event and stop its propagation.
            //
            //      We then trigger a new popstate event on the window with a null state
            //      so that the navigate events can conclude their work properly
            //
            // if the url is a path we want to preserve the query params that are available on
            // the current url.
            this.preventHashAssignPopState = true;
            window.location.hash = hash;

            // If popstate is enabled and the browser triggers `popstate` events when the hash
            // is set (this often happens immediately in browsers like Chrome), then the
            // this flag will be set to false already. If it's a browser that does not trigger
            // a `popstate` on hash assignement or `replaceState` then we need avoid the branch
            // that swallows the event created by the popstate generated by the hash assignment
            // At the time of this writing this happens with Opera 12 and some version of IE
            this.preventHashAssignPopState = false;

            state = $.extend({
                url: href,
                hash: hash,
                title: document.title
            }, data);

            if ( isPopStateEvent ) {
                popstateEvent = new $.Event( "popstate" );
                popstateEvent.originalEvent = {
                    type: "popstate",
                    state: null
                };

                this.squash( url, state );

                // Trigger a new faux popstate event to replace the one that we
                // caught that was triggered by the hash setting above.
                if ( !noEvents ) {
                    this.ignorePopState = true;
                    $.mobile.window.trigger( popstateEvent );
                }
            }

            // record the history entry so that the information can be included
            // in hashchange event driven navigate events in a similar fashion to
            // the state that's provided by popstate
            this.history.add( state.url, state );
        },

        // This binding is intended to catch the popstate events that are fired
        // when execution of the `$.navigate` method stops at window.location.hash = url;
        // and completely prevent them from propagating. The popstate event will then be
        // retriggered after execution resumes
        //
        // TODO grab the original event here and use it for the synthetic event in the
        //      second half of the navigate execution that will follow this binding
        popstate: function( event ) {
            var hash, state;

            // Partly to support our test suite which manually alters the support
            // value to test hashchange. Partly to prevent all around weirdness
            if ( !$.event.special.navigate.isPushStateEnabled() ) {
                return;
            }

            // If this is the popstate triggered by the actual alteration of the hash
            // prevent it completely. History is tracked manually
            if ( this.preventHashAssignPopState ) {
                this.preventHashAssignPopState = false;
                event.stopImmediatePropagation();
                return;
            }

            // if this is the popstate triggered after the `replaceState` call in the go
            // method, then simply ignore it. The history entry has already been captured
            if ( this.ignorePopState ) {
                this.ignorePopState = false;
                return;
            }

            // If there is no state, and the history stack length is one were
            // probably getting the page load popstate fired by browsers like chrome
            // avoid it and set the one time flag to false.
            // TODO: Do we really need all these conditions? Comparing location hrefs
            // should be sufficient.
            if ( !event.originalEvent.state &&
                this.history.stack.length === 1 &&
                this.ignoreInitialHashChange ) {
                this.ignoreInitialHashChange = false;

                if ( location.href === initialHref ) {
                    event.preventDefault();
                    return;
                }
            }

            // account for direct manipulation of the hash. That is, we will receive a popstate
            // when the hash is changed by assignment, and it won't have a state associated. We
            // then need to squash the hash. See below for handling of hash assignment that
            // matches an existing history entry
            // TODO it might be better to only add to the history stack
            //      when the hash is adjacent to the active history entry
            hash = path.parseLocation().hash;
            if ( !event.originalEvent.state && hash ) {
                // squash the hash that's been assigned on the URL with replaceState
                // also grab the resulting state object for storage
                state = this.squash( hash );

                // record the new hash as an additional history entry
                // to match the browser's treatment of hash assignment
                this.history.add( state.url, state );

                // pass the newly created state information
                // along with the event
                event.historyState = state;

                // do not alter history, we've added a new history entry
                // so we know where we are
                return;
            }

            // If all else fails this is a popstate that comes from the back or forward buttons
            // make sure to set the state of our history stack properly, and record the directionality
            this.history.direct({
                url: (event.originalEvent.state || {}).url || hash,

                // When the url is either forward or backward in history include the entry
                // as data on the event object for merging as data in the navigate event
                present: function( historyEntry, direction ) {
                    // make sure to create a new object to pass down as the navigate event data
                    event.historyState = $.extend({}, historyEntry);
                    event.historyState.direction = direction;
                }
            });
        },

        // NOTE must bind before `navigate` special event hashchange binding otherwise the
        //      navigation data won't be attached to the hashchange event in time for those
        //      bindings to attach it to the `navigate` special event
        // TODO add a check here that `hashchange.navigate` is bound already otherwise it's
        //      broken (exception?)
        hashchange: function( event ) {
            var history, hash;

            // If hashchange listening is explicitly disabled or pushstate is supported
            // avoid making use of the hashchange handler.
            if (!$.event.special.navigate.isHashChangeEnabled() ||
                $.event.special.navigate.isPushStateEnabled() ) {
                return;
            }

            // On occasion explicitly want to prevent the next hash from propogating because we only
            // with to alter the url to represent the new state do so here
            if ( this.preventNextHashChange ) {
                this.preventNextHashChange = false;
                event.stopImmediatePropagation();
                return;
            }

            history = this.history;
            hash = path.parseLocation().hash;

            // If this is a hashchange caused by the back or forward button
            // make sure to set the state of our history stack properly
            this.history.direct({
                url: hash,

                // When the url is either forward or backward in history include the entry
                // as data on the event object for merging as data in the navigate event
                present: function( historyEntry, direction ) {
                    // make sure to create a new object to pass down as the navigate event data
                    event.hashchangeState = $.extend({}, historyEntry);
                    event.hashchangeState.direction = direction;
                },

                // When we don't find a hash in our history clearly we're aiming to go there
                // record the entry as new for future traversal
                //
                // NOTE it's not entirely clear that this is the right thing to do given that we
                //      can't know the users intention. It might be better to explicitly _not_
                //      support location.hash assignment in preference to $.navigate calls
                // TODO first arg to add should be the href, but it causes issues in identifying
                //      embeded pages
                missing: function() {
                    history.add( hash, {
                        hash: hash,
                        title: document.title
                    });
                }
            });
        }
    });
})( jQuery );



(function( $, undefined ) {
    // TODO consider queueing navigation activity until previous activities have completed
    //      so that end users don't have to think about it. Punting for now
    // TODO !! move the event bindings into callbacks on the navigate event
    $.mobile.navigate = function( url, data, noEvents ) {
        $.mobile.navigate.navigator.go( url, data, noEvents );
    };

    // expose the history on the navigate method in anticipation of full integration with
    // existing navigation functionalty that is tightly coupled to the history information
    $.mobile.navigate.history = new $.mobile.History();

    // instantiate an instance of the navigator for use within the $.navigate method
    $.mobile.navigate.navigator = new $.mobile.Navigator( $.mobile.navigate.history );

    var loc = $.mobile.path.parseLocation();
    $.mobile.navigate.history.add( loc.href, {hash: loc.hash} );
})( jQuery );


(function( $, undefined ) {
    var props = {
            "animation": {},
            "transition": {}
        },
        testElement = document.createElement( "a" ),
        vendorPrefixes = [ "", "webkit-", "moz-", "o-" ];

    $.each( [ "animation", "transition" ], function( i, test ) {

        // Get correct name for test
        var testName = ( i === 0 ) ? test + "-" + "name" : test;

        $.each( vendorPrefixes, function( j, prefix ) {
            if ( testElement.style[ $.camelCase( prefix + testName ) ] !== undefined ) {
                 props[ test ][ "prefix" ] = prefix;
                return false;
            }
        });

        // Set event and duration names for later use
        props[ test ][ "duration" ] =
            $.camelCase( props[ test ][ "prefix" ] + test + "-" + "duration" );
        props[ test ][ "event" ] =
            $.camelCase( props[ test ][ "prefix" ] + test + "-" + "end" );

        // All lower case if not a vendor prop
        if ( props[ test ][ "prefix" ] === "" ) {
            props[ test ][ "event" ] = props[ test ][ "event" ].toLowerCase();
        }
    });

    // If a valid prefix was found then the it is supported by the browser
    $.support.cssTransitions = ( props[ "transition" ][ "prefix" ] !== undefined );
    $.support.cssAnimations = ( props[ "animation" ][ "prefix" ] !== undefined );

    // Remove the testElement
    $( testElement ).remove();

    // Animation complete callback
    $.fn.animationComplete = function( callback, type, fallbackTime ) {
        var timer, duration,
            that = this,
            eventBinding = function() {

                // Clear the timer so we don't call callback twice
                clearTimeout( timer );
                callback.apply( this, arguments );
            },
            animationType = ( !type || type === "animation" ) ? "animation" : "transition";

        // Make sure selected type is supported by browser
        if ( ( $.support.cssTransitions && animationType === "transition" ) ||
            ( $.support.cssAnimations && animationType === "animation" ) ) {

            // If a fallback time was not passed set one
            if ( fallbackTime === undefined ) {

                // Make sure the was not bound to document before checking .css
                if ( $( this ).context !== document ) {

                    // Parse the durration since its in second multiple by 1000 for milliseconds
                    // Multiply by 3 to make sure we give the animation plenty of time.
                    duration = parseFloat(
                        $( this ).css( props[ animationType ].duration )
                    ) * 3000;
                }

                // If we could not read a duration use the default
                if ( duration === 0 || duration === undefined || isNaN( duration ) ) {
                    duration = $.fn.animationComplete.defaultDuration;
                }
            }

            // Sets up the fallback if event never comes
            timer = setTimeout( function() {
                $( that ).off( props[ animationType ].event, eventBinding );
                callback.apply( that );
            }, duration );

            // Bind the event
            return $( this ).one( props[ animationType ].event, eventBinding );
        } else {

            // CSS animation / transitions not supported
            // Defer execution for consistency between webkit/non webkit
            setTimeout( $.proxy( callback, this ), 0 );
            return $( this );
        }
    };

    // Allow default callback to be configured on mobileInit
    $.fn.animationComplete.defaultDuration = 1000;
})( jQuery );

// This plugin is an experiment for abstracting away the touch and mouse
// events so that developers don't have to worry about which method of input
// the device their document is loaded on supports.
//
// The idea here is to allow the developer to register listeners for the
// basic mouse events, such as mousedown, mousemove, mouseup, and click,
// and the plugin will take care of registering the correct listeners
// behind the scenes to invoke the listener at the fastest possible time
// for that device, while still retaining the order of event firing in
// the traditional mouse environment, should multiple handlers be registered
// on the same element for different events.
//
// The current version exposes the following virtual events to jQuery bind methods:
// "vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel"

(function( $, window, document, undefined ) {

var dataPropertyName = "virtualMouseBindings",
    touchTargetPropertyName = "virtualTouchID",
    virtualEventNames = "vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split( " " ),
    touchEventProps = "clientX clientY pageX pageY screenX screenY".split( " " ),
    mouseHookProps = $.event.mouseHooks ? $.event.mouseHooks.props : [],
    mouseEventProps = $.event.props.concat( mouseHookProps ),
    activeDocHandlers = {},
    resetTimerID = 0,
    startX = 0,
    startY = 0,
    didScroll = false,
    clickBlockList = [],
    blockMouseTriggers = false,
    blockTouchTriggers = false,
    eventCaptureSupported = "addEventListener" in document,
    $document = $( document ),
    nextTouchID = 1,
    lastTouchID = 0, threshold,
    i;

$.vmouse = {
    moveDistanceThreshold: 10,
    clickDistanceThreshold: 10,
    resetTimerDuration: 1500
};

function getNativeEvent( event ) {

    while ( event && typeof event.originalEvent !== "undefined" ) {
        event = event.originalEvent;
    }
    return event;
}

function createVirtualEvent( event, eventType ) {

    var t = event.type,
        oe, props, ne, prop, ct, touch, i, j, len;

    event = $.Event( event );
    event.type = eventType;

    oe = event.originalEvent;
    props = $.event.props;

    // addresses separation of $.event.props in to $.event.mouseHook.props and Issue 3280
    // https://github.com/jquery/jquery-mobile/issues/3280
    if ( t.search( /^(mouse|click)/ ) > -1 ) {
        props = mouseEventProps;
    }

    // copy original event properties over to the new event
    // this would happen if we could call $.event.fix instead of $.Event
    // but we don't have a way to force an event to be fixed multiple times
    if ( oe ) {
        for ( i = props.length, prop; i; ) {
            prop = props[ --i ];
            event[ prop ] = oe[ prop ];
        }
    }

    // make sure that if the mouse and click virtual events are generated
    // without a .which one is defined
    if ( t.search(/mouse(down|up)|click/) > -1 && !event.which ) {
        event.which = 1;
    }

    if ( t.search(/^touch/) !== -1 ) {
        ne = getNativeEvent( oe );
        t = ne.touches;
        ct = ne.changedTouches;
        touch = ( t && t.length ) ? t[0] : ( ( ct && ct.length ) ? ct[ 0 ] : undefined );

        if ( touch ) {
            for ( j = 0, len = touchEventProps.length; j < len; j++) {
                prop = touchEventProps[ j ];
                event[ prop ] = touch[ prop ];
            }
        }
    }

    return event;
}

function getVirtualBindingFlags( element ) {

    var flags = {},
        b, k;

    while ( element ) {

        b = $.data( element, dataPropertyName );

        for (  k in b ) {
            if ( b[ k ] ) {
                flags[ k ] = flags.hasVirtualBinding = true;
            }
        }
        element = element.parentNode;
    }
    return flags;
}

function getClosestElementWithVirtualBinding( element, eventType ) {
    var b;
    while ( element ) {

        b = $.data( element, dataPropertyName );

        if ( b && ( !eventType || b[ eventType ] ) ) {
            return element;
        }
        element = element.parentNode;
    }
    return null;
}

function enableTouchBindings() {
    blockTouchTriggers = false;
}

function disableTouchBindings() {
    blockTouchTriggers = true;
}

function enableMouseBindings() {
    lastTouchID = 0;
    clickBlockList.length = 0;
    blockMouseTriggers = false;

    // When mouse bindings are enabled, our
    // touch bindings are disabled.
    disableTouchBindings();
}

function disableMouseBindings() {
    // When mouse bindings are disabled, our
    // touch bindings are enabled.
    enableTouchBindings();
}

function startResetTimer() {
    clearResetTimer();
    resetTimerID = setTimeout( function() {
        resetTimerID = 0;
        enableMouseBindings();
    }, $.vmouse.resetTimerDuration );
}

function clearResetTimer() {
    if ( resetTimerID ) {
        clearTimeout( resetTimerID );
        resetTimerID = 0;
    }
}

function triggerVirtualEvent( eventType, event, flags ) {
    var ve;

    if ( ( flags && flags[ eventType ] ) ||
                ( !flags && getClosestElementWithVirtualBinding( event.target, eventType ) ) ) {

        ve = createVirtualEvent( event, eventType );

        $( event.target).trigger( ve );
    }

    return ve;
}

function mouseEventCallback( event ) {
    var touchID = $.data( event.target, touchTargetPropertyName ),
        ve;

    if ( !blockMouseTriggers && ( !lastTouchID || lastTouchID !== touchID ) ) {
        ve = triggerVirtualEvent( "v" + event.type, event );
        if ( ve ) {
            if ( ve.isDefaultPrevented() ) {
                event.preventDefault();
            }
            if ( ve.isPropagationStopped() ) {
                event.stopPropagation();
            }
            if ( ve.isImmediatePropagationStopped() ) {
                event.stopImmediatePropagation();
            }
        }
    }
}

function handleTouchStart( event ) {

    var touches = getNativeEvent( event ).touches,
        target, flags, t;

    if ( touches && touches.length === 1 ) {

        target = event.target;
        flags = getVirtualBindingFlags( target );

        if ( flags.hasVirtualBinding ) {

            lastTouchID = nextTouchID++;
            $.data( target, touchTargetPropertyName, lastTouchID );

            clearResetTimer();

            disableMouseBindings();
            didScroll = false;

            t = getNativeEvent( event ).touches[ 0 ];
            startX = t.pageX;
            startY = t.pageY;

            triggerVirtualEvent( "vmouseover", event, flags );
            triggerVirtualEvent( "vmousedown", event, flags );
        }
    }
}

function handleScroll( event ) {
    if ( blockTouchTriggers ) {
        return;
    }

    if ( !didScroll ) {
        triggerVirtualEvent( "vmousecancel", event, getVirtualBindingFlags( event.target ) );
    }

    didScroll = true;
    startResetTimer();
}

function handleTouchMove( event ) {
    if ( blockTouchTriggers ) {
        return;
    }

    var t = getNativeEvent( event ).touches[ 0 ],
        didCancel = didScroll,
        moveThreshold = $.vmouse.moveDistanceThreshold,
        flags = getVirtualBindingFlags( event.target );

        didScroll = didScroll ||
            ( Math.abs( t.pageX - startX ) > moveThreshold ||
                Math.abs( t.pageY - startY ) > moveThreshold );

    if ( didScroll && !didCancel ) {
        triggerVirtualEvent( "vmousecancel", event, flags );
    }

    triggerVirtualEvent( "vmousemove", event, flags );
    startResetTimer();
}

function handleTouchEnd( event ) {
    if ( blockTouchTriggers ) {
        return;
    }

    disableTouchBindings();

    var flags = getVirtualBindingFlags( event.target ),
        ve, t;
    triggerVirtualEvent( "vmouseup", event, flags );

    if ( !didScroll ) {
        ve = triggerVirtualEvent( "vclick", event, flags );
        if ( ve && ve.isDefaultPrevented() ) {
            // The target of the mouse events that follow the touchend
            // event don't necessarily match the target used during the
            // touch. This means we need to rely on coordinates for blocking
            // any click that is generated.
            t = getNativeEvent( event ).changedTouches[ 0 ];
            clickBlockList.push({
                touchID: lastTouchID,
                x: t.clientX,
                y: t.clientY
            });

            // Prevent any mouse events that follow from triggering
            // virtual event notifications.
            blockMouseTriggers = true;
        }
    }
    triggerVirtualEvent( "vmouseout", event, flags);
    didScroll = false;

    startResetTimer();
}

function hasVirtualBindings( ele ) {
    var bindings = $.data( ele, dataPropertyName ),
        k;

    if ( bindings ) {
        for ( k in bindings ) {
            if ( bindings[ k ] ) {
                return true;
            }
        }
    }
    return false;
}

function dummyMouseHandler() {}

function getSpecialEventObject( eventType ) {
    var realType = eventType.substr( 1 );

    return {
        setup: function(/* data, namespace */) {
            // If this is the first virtual mouse binding for this element,
            // add a bindings object to its data.

            if ( !hasVirtualBindings( this ) ) {
                $.data( this, dataPropertyName, {} );
            }

            // If setup is called, we know it is the first binding for this
            // eventType, so initialize the count for the eventType to zero.
            var bindings = $.data( this, dataPropertyName );
            bindings[ eventType ] = true;

            // If this is the first virtual mouse event for this type,
            // register a global handler on the document.

            activeDocHandlers[ eventType ] = ( activeDocHandlers[ eventType ] || 0 ) + 1;

            if ( activeDocHandlers[ eventType ] === 1 ) {
                $document.bind( realType, mouseEventCallback );
            }

            // Some browsers, like Opera Mini, won't dispatch mouse/click events
            // for elements unless they actually have handlers registered on them.
            // To get around this, we register dummy handlers on the elements.

            $( this ).bind( realType, dummyMouseHandler );

            // For now, if event capture is not supported, we rely on mouse handlers.
            if ( eventCaptureSupported ) {
                // If this is the first virtual mouse binding for the document,
                // register our touchstart handler on the document.

                activeDocHandlers[ "touchstart" ] = ( activeDocHandlers[ "touchstart" ] || 0) + 1;

                if ( activeDocHandlers[ "touchstart" ] === 1 ) {
                    $document.bind( "touchstart", handleTouchStart )
                        .bind( "touchend", handleTouchEnd )

                        // On touch platforms, touching the screen and then dragging your finger
                        // causes the window content to scroll after some distance threshold is
                        // exceeded. On these platforms, a scroll prevents a click event from being
                        // dispatched, and on some platforms, even the touchend is suppressed. To
                        // mimic the suppression of the click event, we need to watch for a scroll
                        // event. Unfortunately, some platforms like iOS don't dispatch scroll
                        // events until *AFTER* the user lifts their finger (touchend). This means
                        // we need to watch both scroll and touchmove events to figure out whether
                        // or not a scroll happenens before the touchend event is fired.

                        .bind( "touchmove", handleTouchMove )
                        .bind( "scroll", handleScroll );
                }
            }
        },

        teardown: function(/* data, namespace */) {
            // If this is the last virtual binding for this eventType,
            // remove its global handler from the document.

            --activeDocHandlers[ eventType ];

            if ( !activeDocHandlers[ eventType ] ) {
                $document.unbind( realType, mouseEventCallback );
            }

            if ( eventCaptureSupported ) {
                // If this is the last virtual mouse binding in existence,
                // remove our document touchstart listener.

                --activeDocHandlers[ "touchstart" ];

                if ( !activeDocHandlers[ "touchstart" ] ) {
                    $document.unbind( "touchstart", handleTouchStart )
                        .unbind( "touchmove", handleTouchMove )
                        .unbind( "touchend", handleTouchEnd )
                        .unbind( "scroll", handleScroll );
                }
            }

            var $this = $( this ),
                bindings = $.data( this, dataPropertyName );

            // teardown may be called when an element was
            // removed from the DOM. If this is the case,
            // jQuery core may have already stripped the element
            // of any data bindings so we need to check it before
            // using it.
            if ( bindings ) {
                bindings[ eventType ] = false;
            }

            // Unregister the dummy event handler.

            $this.unbind( realType, dummyMouseHandler );

            // If this is the last virtual mouse binding on the
            // element, remove the binding data from the element.

            if ( !hasVirtualBindings( this ) ) {
                $this.removeData( dataPropertyName );
            }
        }
    };
}

// Expose our custom events to the jQuery bind/unbind mechanism.

for ( i = 0; i < virtualEventNames.length; i++ ) {
    $.event.special[ virtualEventNames[ i ] ] = getSpecialEventObject( virtualEventNames[ i ] );
}

// Add a capture click handler to block clicks.
// Note that we require event capture support for this so if the device
// doesn't support it, we punt for now and rely solely on mouse events.
if ( eventCaptureSupported ) {
    document.addEventListener( "click", function( e ) {
        var cnt = clickBlockList.length,
            target = e.target,
            x, y, ele, i, o, touchID;

        if ( cnt ) {
            x = e.clientX;
            y = e.clientY;
            threshold = $.vmouse.clickDistanceThreshold;

            // The idea here is to run through the clickBlockList to see if
            // the current click event is in the proximity of one of our
            // vclick events that had preventDefault() called on it. If we find
            // one, then we block the click.
            //
            // Why do we have to rely on proximity?
            //
            // Because the target of the touch event that triggered the vclick
            // can be different from the target of the click event synthesized
            // by the browser. The target of a mouse/click event that is synthesized
            // from a touch event seems to be implementation specific. For example,
            // some browsers will fire mouse/click events for a link that is near
            // a touch event, even though the target of the touchstart/touchend event
            // says the user touched outside the link. Also, it seems that with most
            // browsers, the target of the mouse/click event is not calculated until the
            // time it is dispatched, so if you replace an element that you touched
            // with another element, the target of the mouse/click will be the new
            // element underneath that point.
            //
            // Aside from proximity, we also check to see if the target and any
            // of its ancestors were the ones that blocked a click. This is necessary
            // because of the strange mouse/click target calculation done in the
            // Android 2.1 browser, where if you click on an element, and there is a
            // mouse/click handler on one of its ancestors, the target will be the
            // innermost child of the touched element, even if that child is no where
            // near the point of touch.

            ele = target;

            while ( ele ) {
                for ( i = 0; i < cnt; i++ ) {
                    o = clickBlockList[ i ];
                    touchID = 0;

                    if ( ( ele === target && Math.abs( o.x - x ) < threshold && Math.abs( o.y - y ) < threshold ) ||
                                $.data( ele, touchTargetPropertyName ) === o.touchID ) {
                        // XXX: We may want to consider removing matches from the block list
                        //      instead of waiting for the reset timer to fire.
                        e.preventDefault();
                        e.stopPropagation();
                        return;
                    }
                }
                ele = ele.parentNode;
            }
        }
    }, true);
}
})( jQuery, window, document );


(function( $, window, undefined ) {
    var $document = $( document ),
        supportTouch = $.mobile.support.touch,
        scrollEvent = "touchmove scroll",
        touchStartEvent = supportTouch ? "touchstart" : "mousedown",
        touchStopEvent = supportTouch ? "touchend" : "mouseup",
        touchMoveEvent = supportTouch ? "touchmove" : "mousemove";

    // setup new event shortcuts
    $.each( ( "touchstart touchmove touchend " +
        "tap taphold " +
        "swipe swipeleft swiperight " +
        "scrollstart scrollstop" ).split( " " ), function( i, name ) {

        $.fn[ name ] = function( fn ) {
            return fn ? this.bind( name, fn ) : this.trigger( name );
        };

        // jQuery < 1.8
        if ( $.attrFn ) {
            $.attrFn[ name ] = true;
        }
    });

    function triggerCustomEvent( obj, eventType, event, bubble ) {
        var originalType = event.type;
        event.type = eventType;
        if ( bubble ) {
            $.event.trigger( event, undefined, obj );
        } else {
            $.event.dispatch.call( obj, event );
        }
        event.type = originalType;
    }

    // also handles scrollstop
    $.event.special.scrollstart = {

        enabled: true,
        setup: function() {

            var thisObject = this,
                $this = $( thisObject ),
                scrolling,
                timer;

            function trigger( event, state ) {
                scrolling = state;
                triggerCustomEvent( thisObject, scrolling ? "scrollstart" : "scrollstop", event );
            }

            // iPhone triggers scroll after a small delay; use touchmove instead
            $this.bind( scrollEvent, function( event ) {

                if ( !$.event.special.scrollstart.enabled ) {
                    return;
                }

                if ( !scrolling ) {
                    trigger( event, true );
                }

                clearTimeout( timer );
                timer = setTimeout( function() {
                    trigger( event, false );
                }, 50 );
            });
        },
        teardown: function() {
            $( this ).unbind( scrollEvent );
        }
    };

    // also handles taphold
    $.event.special.tap = {
        tapholdThreshold: 750,
        emitTapOnTaphold: true,
        setup: function() {
            var thisObject = this,
                $this = $( thisObject ),
                isTaphold = false;

            $this.bind( "vmousedown", function( event ) {
                isTaphold = false;
                if ( event.which && event.which !== 1 ) {
                    return false;
                }

                var origTarget = event.target,
                    timer;

                function clearTapTimer() {
                    clearTimeout( timer );
                }

                function clearTapHandlers() {
                    clearTapTimer();

                    $this.unbind( "vclick", clickHandler )
                        .unbind( "vmouseup", clearTapTimer );
                    $document.unbind( "vmousecancel", clearTapHandlers );
                }

                function clickHandler( event ) {
                    clearTapHandlers();

                    // ONLY trigger a 'tap' event if the start target is
                    // the same as the stop target.
                    if ( !isTaphold && origTarget === event.target ) {
                        triggerCustomEvent( thisObject, "tap", event );
                    } else if ( isTaphold ) {
                        event.preventDefault();
                    }
                }

                $this.bind( "vmouseup", clearTapTimer )
                    .bind( "vclick", clickHandler );
                $document.bind( "vmousecancel", clearTapHandlers );

                timer = setTimeout( function() {
                    if ( !$.event.special.tap.emitTapOnTaphold ) {
                        isTaphold = true;
                    }
                    triggerCustomEvent( thisObject, "taphold", $.Event( "taphold", { target: origTarget } ) );
                }, $.event.special.tap.tapholdThreshold );
            });
        },
        teardown: function() {
            $( this ).unbind( "vmousedown" ).unbind( "vclick" ).unbind( "vmouseup" );
            $document.unbind( "vmousecancel" );
        }
    };

    // Also handles swipeleft, swiperight
    $.event.special.swipe = {

        // More than this horizontal displacement, and we will suppress scrolling.
        scrollSupressionThreshold: 30,

        // More time than this, and it isn't a swipe.
        durationThreshold: 1000,

        // Swipe horizontal displacement must be more than this.
        horizontalDistanceThreshold: 30,

        // Swipe vertical displacement must be less than this.
        verticalDistanceThreshold: 30,

        getLocation: function ( event ) {
            var winPageX = window.pageXOffset,
                winPageY = window.pageYOffset,
                x = event.clientX,
                y = event.clientY;

            if ( event.pageY === 0 && Math.floor( y ) > Math.floor( event.pageY ) ||
                event.pageX === 0 && Math.floor( x ) > Math.floor( event.pageX ) ) {

                // iOS4 clientX/clientY have the value that should have been
                // in pageX/pageY. While pageX/page/ have the value 0
                x = x - winPageX;
                y = y - winPageY;
            } else if ( y < ( event.pageY - winPageY) || x < ( event.pageX - winPageX ) ) {

                // Some Android browsers have totally bogus values for clientX/Y
                // when scrolling/zooming a page. Detectable since clientX/clientY
                // should never be smaller than pageX/pageY minus page scroll
                x = event.pageX - winPageX;
                y = event.pageY - winPageY;
            }

            return {
                x: x,
                y: y
            };
        },

        start: function( event ) {
            var data = event.originalEvent.touches ?
                    event.originalEvent.touches[ 0 ] : event,
                location = $.event.special.swipe.getLocation( data );
            return {
                        time: ( new Date() ).getTime(),
                        coords: [ location.x, location.y ],
                        origin: $( event.target )
                    };
        },

        stop: function( event ) {
            var data = event.originalEvent.touches ?
                    event.originalEvent.touches[ 0 ] : event,
                location = $.event.special.swipe.getLocation( data );
            return {
                        time: ( new Date() ).getTime(),
                        coords: [ location.x, location.y ]
                    };
        },

        handleSwipe: function( start, stop, thisObject, origTarget ) {
            if ( stop.time - start.time < $.event.special.swipe.durationThreshold &&
                Math.abs( start.coords[ 0 ] - stop.coords[ 0 ] ) > $.event.special.swipe.horizontalDistanceThreshold &&
                Math.abs( start.coords[ 1 ] - stop.coords[ 1 ] ) < $.event.special.swipe.verticalDistanceThreshold ) {
                var direction = start.coords[0] > stop.coords[ 0 ] ? "swipeleft" : "swiperight";

                triggerCustomEvent( thisObject, "swipe", $.Event( "swipe", { target: origTarget, swipestart: start, swipestop: stop }), true );
                triggerCustomEvent( thisObject, direction,$.Event( direction, { target: origTarget, swipestart: start, swipestop: stop } ), true );
                return true;
            }
            return false;

        },

        // This serves as a flag to ensure that at most one swipe event event is
        // in work at any given time
        eventInProgress: false,

        setup: function() {
            var events,
                thisObject = this,
                $this = $( thisObject ),
                context = {};

            // Retrieve the events data for this element and add the swipe context
            events = $.data( this, "mobile-events" );
            if ( !events ) {
                events = { length: 0 };
                $.data( this, "mobile-events", events );
            }
            events.length++;
            events.swipe = context;

            context.start = function( event ) {

                // Bail if we're already working on a swipe event
                if ( $.event.special.swipe.eventInProgress ) {
                    return;
                }
                $.event.special.swipe.eventInProgress = true;

                var stop,
                    start = $.event.special.swipe.start( event ),
                    origTarget = event.target,
                    emitted = false;

                context.move = function( event ) {
                    if ( !start || event.isDefaultPrevented() ) {
                        return;
                    }

                    stop = $.event.special.swipe.stop( event );
                    if ( !emitted ) {
                        emitted = $.event.special.swipe.handleSwipe( start, stop, thisObject, origTarget );
                        if ( emitted ) {

                            // Reset the context to make way for the next swipe event
                            $.event.special.swipe.eventInProgress = false;
                        }
                    }
                    // prevent scrolling
                    if ( Math.abs( start.coords[ 0 ] - stop.coords[ 0 ] ) > $.event.special.swipe.scrollSupressionThreshold ) {
                        event.preventDefault();
                    }
                };

                context.stop = function() {
                        emitted = true;

                        // Reset the context to make way for the next swipe event
                        $.event.special.swipe.eventInProgress = false;
                        $document.off( touchMoveEvent, context.move );
                        context.move = null;
                };

                $document.on( touchMoveEvent, context.move )
                    .one( touchStopEvent, context.stop );
            };
            $this.on( touchStartEvent, context.start );
        },

        teardown: function() {
            var events, context;

            events = $.data( this, "mobile-events" );
            if ( events ) {
                context = events.swipe;
                delete events.swipe;
                events.length--;
                if ( events.length === 0 ) {
                    $.removeData( this, "mobile-events" );
                }
            }

            if ( context ) {
                if ( context.start ) {
                    $( this ).off( touchStartEvent, context.start );
                }
                if ( context.move ) {
                    $document.off( touchMoveEvent, context.move );
                }
                if ( context.stop ) {
                    $document.off( touchStopEvent, context.stop );
                }
            }
        }
    };
    $.each({
        scrollstop: "scrollstart",
        taphold: "tap",
        swipeleft: "swipe.left",
        swiperight: "swipe.right"
    }, function( event, sourceEvent ) {

        $.event.special[ event ] = {
            setup: function() {
                $( this ).bind( sourceEvent, $.noop );
            },
            teardown: function() {
                $( this ).unbind( sourceEvent );
            }
        };
    });

})( jQuery, this );


    // throttled resize event
    (function( $ ) {
        $.event.special.throttledresize = {
            setup: function() {
                $( this ).bind( "resize", handler );
            },
            teardown: function() {
                $( this ).unbind( "resize", handler );
            }
        };

        var throttle = 250,
            handler = function() {
                curr = ( new Date() ).getTime();
                diff = curr - lastCall;

                if ( diff >= throttle ) {

                    lastCall = curr;
                    $( this ).trigger( "throttledresize" );

                } else {

                    if ( heldCall ) {
                        clearTimeout( heldCall );
                    }

                    // Promise a held call will still execute
                    heldCall = setTimeout( handler, throttle - diff );
                }
            },
            lastCall = 0,
            heldCall,
            curr,
            diff;
    })( jQuery );


(function( $, window ) {
    var win = $( window ),
        event_name = "orientationchange",
        get_orientation,
        last_orientation,
        initial_orientation_is_landscape,
        initial_orientation_is_default,
        portrait_map = { "0": true, "180": true },
        ww, wh, landscape_threshold;

    // It seems that some device/browser vendors use window.orientation values 0 and 180 to
    // denote the "default" orientation. For iOS devices, and most other smart-phones tested,
    // the default orientation is always "portrait", but in some Android and RIM based tablets,
    // the default orientation is "landscape". The following code attempts to use the window
    // dimensions to figure out what the current orientation is, and then makes adjustments
    // to the to the portrait_map if necessary, so that we can properly decode the
    // window.orientation value whenever get_orientation() is called.
    //
    // Note that we used to use a media query to figure out what the orientation the browser
    // thinks it is in:
    //
    //     initial_orientation_is_landscape = $.mobile.media("all and (orientation: landscape)");
    //
    // but there was an iPhone/iPod Touch bug beginning with iOS 4.2, up through iOS 5.1,
    // where the browser *ALWAYS* applied the landscape media query. This bug does not
    // happen on iPad.

    if ( $.support.orientation ) {

        // Check the window width and height to figure out what the current orientation
        // of the device is at this moment. Note that we've initialized the portrait map
        // values to 0 and 180, *AND* we purposely check for landscape so that if we guess
        // wrong, , we default to the assumption that portrait is the default orientation.
        // We use a threshold check below because on some platforms like iOS, the iPhone
        // form-factor can report a larger width than height if the user turns on the
        // developer console. The actual threshold value is somewhat arbitrary, we just
        // need to make sure it is large enough to exclude the developer console case.

        ww = window.innerWidth || win.width();
        wh = window.innerHeight || win.height();
        landscape_threshold = 50;

        initial_orientation_is_landscape = ww > wh && ( ww - wh ) > landscape_threshold;

        // Now check to see if the current window.orientation is 0 or 180.
        initial_orientation_is_default = portrait_map[ window.orientation ];

        // If the initial orientation is landscape, but window.orientation reports 0 or 180, *OR*
        // if the initial orientation is portrait, but window.orientation reports 90 or -90, we
        // need to flip our portrait_map values because landscape is the default orientation for
        // this device/browser.
        if ( ( initial_orientation_is_landscape && initial_orientation_is_default ) || ( !initial_orientation_is_landscape && !initial_orientation_is_default ) ) {
            portrait_map = { "-90": true, "90": true };
        }
    }

    $.event.special.orientationchange = $.extend( {}, $.event.special.orientationchange, {
        setup: function() {
            // If the event is supported natively, return false so that jQuery
            // will bind to the event using DOM methods.
            if ( $.support.orientation && !$.event.special.orientationchange.disabled ) {
                return false;
            }

            // Get the current orientation to avoid initial double-triggering.
            last_orientation = get_orientation();

            // Because the orientationchange event doesn't exist, simulate the
            // event by testing window dimensions on resize.
            win.bind( "throttledresize", handler );
        },
        teardown: function() {
            // If the event is not supported natively, return false so that
            // jQuery will unbind the event using DOM methods.
            if ( $.support.orientation && !$.event.special.orientationchange.disabled ) {
                return false;
            }

            // Because the orientationchange event doesn't exist, unbind the
            // resize event handler.
            win.unbind( "throttledresize", handler );
        },
        add: function( handleObj ) {
            // Save a reference to the bound event handler.
            var old_handler = handleObj.handler;

            handleObj.handler = function( event ) {
                // Modify event object, adding the .orientation property.
                event.orientation = get_orientation();

                // Call the originally-bound event handler and return its result.
                return old_handler.apply( this, arguments );
            };
        }
    });

    // If the event is not supported natively, this handler will be bound to
    // the window resize event to simulate the orientationchange event.
    function handler() {
        // Get the current orientation.
        var orientation = get_orientation();

        if ( orientation !== last_orientation ) {
            // The orientation has changed, so trigger the orientationchange event.
            last_orientation = orientation;
            win.trigger( event_name );
        }
    }

    // Get the current page orientation. This method is exposed publicly, should it
    // be needed, as jQuery.event.special.orientationchange.orientation()
    $.event.special.orientationchange.orientation = get_orientation = function() {
        var isPortrait = true, elem = document.documentElement;

        // prefer window orientation to the calculation based on screensize as
        // the actual screen resize takes place before or after the orientation change event
        // has been fired depending on implementation (eg android 2.3 is before, iphone after).
        // More testing is required to determine if a more reliable method of determining the new screensize
        // is possible when orientationchange is fired. (eg, use media queries + element + opacity)
        if ( $.support.orientation ) {
            // if the window orientation registers as 0 or 180 degrees report
            // portrait, otherwise landscape
            isPortrait = portrait_map[ window.orientation ];
        } else {
            isPortrait = elem && elem.clientWidth / elem.clientHeight < 1.1;
        }

        return isPortrait ? "portrait" : "landscape";
    };

    $.fn[ event_name ] = function( fn ) {
        return fn ? this.bind( event_name, fn ) : this.trigger( event_name );
    };

    // jQuery < 1.8
    if ( $.attrFn ) {
        $.attrFn[ event_name ] = true;
    }

}( jQuery, this ));




(function( $, undefined ) {

    // existing base tag?
    var baseElement = $( "head" ).children( "base" ),

    // base element management, defined depending on dynamic base tag support
    // TODO move to external widget
    base = {

        // define base element, for use in routing asset urls that are referenced
        // in Ajax-requested markup
        element: ( baseElement.length ? baseElement :
            $( "<base>", { href: $.mobile.path.documentBase.hrefNoHash } ).prependTo( $( "head" ) ) ),

        linkSelector: "[src], link[href], a[rel='external'], :jqmData(ajax='false'), a[target]",

        // set the generated BASE element's href to a new page's base path
        set: function( href ) {

            // we should do nothing if the user wants to manage their url base
            // manually
            if ( !$.mobile.dynamicBaseEnabled ) {
                return;
            }

            // we should use the base tag if we can manipulate it dynamically
            if ( $.support.dynamicBaseTag ) {
                base.element.attr( "href",
                    $.mobile.path.makeUrlAbsolute( href, $.mobile.path.documentBase ) );
            }
        },

        rewrite: function( href, page ) {
            var newPath = $.mobile.path.get( href );

            page.find( base.linkSelector ).each(function( i, link ) {
                var thisAttr = $( link ).is( "[href]" ) ? "href" :
                    $( link ).is( "[src]" ) ? "src" : "action",
                theLocation = $.mobile.path.parseLocation(),
                thisUrl = $( link ).attr( thisAttr );

                // XXX_jblas: We need to fix this so that it removes the document
                //            base URL, and then prepends with the new page URL.
                // if full path exists and is same, chop it - helps IE out
                thisUrl = thisUrl.replace( theLocation.protocol + theLocation.doubleSlash +
                    theLocation.host + theLocation.pathname, "" );

                if ( !/^(\w+:|#|\/)/.test( thisUrl ) ) {
                    $( link ).attr( thisAttr, newPath + thisUrl );
                }
            });
        },

        // set the generated BASE element's href to a new page's base path
        reset: function(/* href */) {
            base.element.attr( "href", $.mobile.path.documentBase.hrefNoSearch );
        }
    };

    $.mobile.base = base;

})( jQuery );


(function( $, undefined ) {
$.mobile.widgets = {};

var originalWidget = $.widget,

    // Record the original, non-mobileinit-modified version of $.mobile.keepNative
    // so we can later determine whether someone has modified $.mobile.keepNative
    keepNativeFactoryDefault = $.mobile.keepNative;

$.widget = (function( orig ) {
    return function() {
        var constructor = orig.apply( this, arguments ),
            name = constructor.prototype.widgetName;

        constructor.initSelector = ( ( constructor.prototype.initSelector !== undefined ) ?
            constructor.prototype.initSelector : ":jqmData(role='" + name + "')" );

        $.mobile.widgets[ name ] = constructor;

        return constructor;
    };
})( $.widget );

// Make sure $.widget still has bridge and extend methods
$.extend( $.widget, originalWidget );

// For backcompat remove in 1.5
$.mobile.document.on( "create", function( event ) {
    $( event.target ).enhanceWithin();
});

$.widget( "mobile.page", {
    options: {
        theme: "a",
        domCache: false,

        // Deprecated in 1.4 remove in 1.5
        keepNativeDefault: $.mobile.keepNative,

        // Deprecated in 1.4 remove in 1.5
        contentTheme: null,
        enhanced: false
    },

    // DEPRECATED for > 1.4
    // TODO remove at 1.5
    _createWidget: function() {
        $.Widget.prototype._createWidget.apply( this, arguments );
        this._trigger( "init" );
    },

    _create: function() {
        // If false is returned by the callbacks do not create the page
        if ( this._trigger( "beforecreate" ) === false ) {
            return false;
        }

        if ( !this.options.enhanced ) {
            this._enhance();
        }

        this._on( this.element, {
            pagebeforehide: "removeContainerBackground",
            pagebeforeshow: "_handlePageBeforeShow"
        });

        this.element.enhanceWithin();
        // Dialog widget is deprecated in 1.4 remove this in 1.5
        if ( $.mobile.getAttribute( this.element[0], "role" ) === "dialog" && $.mobile.dialog ) {
            this.element.dialog();
        }
    },

    _enhance: function () {
        var attrPrefix = "data-" + $.mobile.ns,
            self = this;

        if ( this.options.role ) {
            this.element.attr( "data-" + $.mobile.ns + "role", this.options.role );
        }

        this.element
            .attr( "tabindex", "0" )
            .addClass( "ui-page ui-page-theme-" + this.options.theme );

        // Manipulation of content os Deprecated as of 1.4 remove in 1.5
        this.element.find( "[" + attrPrefix + "role='content']" ).each( function() {
            var $this = $( this ),
                theme = this.getAttribute( attrPrefix + "theme" ) || undefined;
                self.options.contentTheme = theme || self.options.contentTheme || ( self.options.dialog && self.options.theme ) || ( self.element.jqmData("role") === "dialog" &&  self.options.theme );
                $this.addClass( "ui-content" );
                if ( self.options.contentTheme ) {
                    $this.addClass( "ui-body-" + ( self.options.contentTheme ) );
                }
                // Add ARIA role
                $this.attr( "role", "main" ).addClass( "ui-content" );
        });
    },

    bindRemove: function( callback ) {
        var page = this.element;

        // when dom caching is not enabled or the page is embedded bind to remove the page on hide
        if ( !page.data( "mobile-page" ).options.domCache &&
            page.is( ":jqmData(external-page='true')" ) ) {

            // TODO use _on - that is, sort out why it doesn't work in this case
            page.bind( "pagehide.remove", callback || function( e, data ) {

                //check if this is a same page transition and if so don't remove the page
                if( !data.samePage ){
                    var $this = $( this ),
                        prEvent = new $.Event( "pageremove" );

                    $this.trigger( prEvent );

                    if ( !prEvent.isDefaultPrevented() ) {
                        $this.removeWithDependents();
                    }
                }
            });
        }
    },

    _setOptions: function( o ) {
        if ( o.theme !== undefined ) {
            this.element.removeClass( "ui-page-theme-" + this.options.theme ).addClass( "ui-page-theme-" + o.theme );
        }

        if ( o.contentTheme !== undefined ) {
            this.element.find( "[data-" + $.mobile.ns + "='content']" ).removeClass( "ui-body-" + this.options.contentTheme )
                .addClass( "ui-body-" + o.contentTheme );
        }
    },

    _handlePageBeforeShow: function(/* e */) {
        this.setContainerBackground();
    },
    // Deprecated in 1.4 remove in 1.5
    removeContainerBackground: function() {
        this.element.closest( ":mobile-pagecontainer" ).pagecontainer({ "theme": "none" });
    },
    // Deprecated in 1.4 remove in 1.5
    // set the page container background to the page theme
    setContainerBackground: function( theme ) {
        this.element.parent().pagecontainer( { "theme": theme || this.options.theme } );
    },
    // Deprecated in 1.4 remove in 1.5
    keepNativeSelector: function() {
        var options = this.options,
            keepNative = $.trim( options.keepNative || "" ),
            globalValue = $.trim( $.mobile.keepNative ),
            optionValue = $.trim( options.keepNativeDefault ),

            // Check if $.mobile.keepNative has changed from the factory default
            newDefault = ( keepNativeFactoryDefault === globalValue ?
                "" : globalValue ),

            // If $.mobile.keepNative has not changed, use options.keepNativeDefault
            oldDefault = ( newDefault === "" ? optionValue : "" );

        // Concatenate keepNative selectors from all sources where the value has
        // changed or, if nothing has changed, return the default
        return ( ( keepNative ? [ keepNative ] : [] )
            .concat( newDefault ? [ newDefault ] : [] )
            .concat( oldDefault ? [ oldDefault ] : [] )
            .join( ", " ) );
    }
});
})( jQuery );

(function( $, undefined ) {

    $.widget( "mobile.pagecontainer", {
        options: {
            theme: "a"
        },

        initSelector: false,

        _create: function() {
            this._trigger( "beforecreate" );
            this.setLastScrollEnabled = true;

            this._on( this.window, {
                // disable an scroll setting when a hashchange has been fired,
                // this only works because the recording of the scroll position
                // is delayed for 100ms after the browser might have changed the
                // position because of the hashchange
                navigate: "_disableRecordScroll",

                // bind to scrollstop for the first page, "pagechange" won't be
                // fired in that case
                scrollstop: "_delayedRecordScroll"
            });

            // TODO consider moving the navigation handler OUT of widget into
            //      some other object as glue between the navigate event and the
            //      content widget load and change methods
            this._on( this.window, { navigate: "_filterNavigateEvents" });

            // TODO move from page* events to content* events
            this._on({ pagechange: "_afterContentChange" });

            // handle initial hashchange from chrome :(
            this.window.one( "navigate", $.proxy(function() {
                this.setLastScrollEnabled = true;
            }, this));
        },

        _setOptions: function( options ) {
            if ( options.theme !== undefined && options.theme !== "none" ) {
                this.element.removeClass( "ui-overlay-" + this.options.theme )
                    .addClass( "ui-overlay-" + options.theme );
            } else if ( options.theme !== undefined ) {
                this.element.removeClass( "ui-overlay-" + this.options.theme );
            }

            this._super( options );
        },

        _disableRecordScroll: function() {
            this.setLastScrollEnabled = false;
        },

        _enableRecordScroll: function() {
            this.setLastScrollEnabled = true;
        },

        // TODO consider the name here, since it's purpose specific
        _afterContentChange: function() {
            // once the page has changed, re-enable the scroll recording
            this.setLastScrollEnabled = true;

            // remove any binding that previously existed on the get scroll
            // which may or may not be different than the scroll element
            // determined for this page previously
            this._off( this.window, "scrollstop" );

            // determine and bind to the current scoll element which may be the
            // window or in the case of touch overflow the element touch overflow
            this._on( this.window, { scrollstop: "_delayedRecordScroll" });
        },

        _recordScroll: function() {
            // this barrier prevents setting the scroll value based on
            // the browser scrolling the window based on a hashchange
            if ( !this.setLastScrollEnabled ) {
                return;
            }

            var active = this._getActiveHistory(),
                currentScroll, minScroll, defaultScroll;

            if ( active ) {
                currentScroll = this._getScroll();
                minScroll = this._getMinScroll();
                defaultScroll = this._getDefaultScroll();

                // Set active page's lastScroll prop. If the location we're
                // scrolling to is less than minScrollBack, let it go.
                active.lastScroll = currentScroll < minScroll ? defaultScroll : currentScroll;
            }
        },

        _delayedRecordScroll: function() {
            setTimeout( $.proxy(this, "_recordScroll"), 100 );
        },

        _getScroll: function() {
            return this.window.scrollTop();
        },

        _getMinScroll: function() {
            return $.mobile.minScrollBack;
        },

        _getDefaultScroll: function() {
            return $.mobile.defaultHomeScroll;
        },

        _filterNavigateEvents: function( e, data ) {
            var url;

            if ( e.originalEvent && e.originalEvent.isDefaultPrevented() ) {
                return;
            }

            url = e.originalEvent.type.indexOf( "hashchange" ) > -1 ? data.state.hash : data.state.url;

            if ( !url ) {
                url = this._getHash();
            }

            if ( !url || url === "#" || url.indexOf( "#" + $.mobile.path.uiStateKey ) === 0 ) {
                url = location.href;
            }

            this._handleNavigate( url, data.state );
        },

        _getHash: function() {
            return $.mobile.path.parseLocation().hash;
        },

        // TODO active page should be managed by the container (ie, it should be a property)
        getActivePage: function() {
            return this.activePage;
        },

        // TODO the first page should be a property set during _create using the logic
        //      that currently resides in init
        _getInitialContent: function() {
            return $.mobile.firstPage;
        },

        // TODO each content container should have a history object
        _getHistory: function() {
            return $.mobile.navigate.history;
        },

        _getActiveHistory: function() {
            return this._getHistory().getActive();
        },

        // TODO the document base should be determined at creation
        _getDocumentBase: function() {
            return $.mobile.path.documentBase;
        },

        back: function() {
            this.go( -1 );
        },

        forward: function() {
            this.go( 1 );
        },

        go: function( steps ) {

            //if hashlistening is enabled use native history method
            if ( $.mobile.hashListeningEnabled ) {
                window.history.go( steps );
            } else {

                //we are not listening to the hash so handle history internally
                var activeIndex = $.mobile.navigate.history.activeIndex,
                    index = activeIndex + parseInt( steps, 10 ),
                    url = $.mobile.navigate.history.stack[ index ].url,
                    direction = ( steps >= 1 )? "forward" : "back";

                //update the history object
                $.mobile.navigate.history.activeIndex = index;
                $.mobile.navigate.history.previousIndex = activeIndex;

                //change to the new page
                this.change( url, { direction: direction, changeHash: false, fromHashChange: true } );
            }
        },

        // TODO rename _handleDestination
        _handleDestination: function( to ) {
            var history;

            // clean the hash for comparison if it's a url
            if ( $.type(to) === "string" ) {
                to = $.mobile.path.stripHash( to );
            }

            if ( to ) {
                history = this._getHistory();

                // At this point, 'to' can be one of 3 things, a cached page
                // element from a history stack entry, an id, or site-relative /
                // absolute URL. If 'to' is an id, we need to resolve it against
                // the documentBase, not the location.href, since the hashchange
                // could've been the result of a forward/backward navigation
                // that crosses from an external page/dialog to an internal
                // page/dialog.
                //
                // TODO move check to history object or path object?
                to = !$.mobile.path.isPath( to ) ? ( $.mobile.path.makeUrlAbsolute( "#" + to, this._getDocumentBase() ) ) : to;
            }
            return to || this._getInitialContent();
        },

        _transitionFromHistory: function( direction, defaultTransition ) {
            var history = this._getHistory(),
                entry = ( direction === "back" ? history.getLast() : history.getActive() );

            return ( entry && entry.transition ) || defaultTransition;
        },

        _handleDialog: function( changePageOptions, data ) {
            var to, active, activeContent = this.getActivePage();

            // If current active page is not a dialog skip the dialog and continue
            // in the same direction
            // Note: The dialog widget is deprecated as of 1.4.0 and will be removed in 1.5.0.
            // Thus, as of 1.5.0 activeContent.data( "mobile-dialog" ) will always evaluate to
            // falsy, so the second condition in the if-statement below can be removed altogether.
            if ( activeContent && !activeContent.data( "mobile-dialog" ) ) {
                // determine if we're heading forward or backward and continue
                // accordingly past the current dialog
                if ( data.direction === "back" ) {
                    this.back();
                } else {
                    this.forward();
                }

                // prevent changePage call
                return false;
            } else {
                // if the current active page is a dialog and we're navigating
                // to a dialog use the dialog objected saved in the stack
                to = data.pageUrl;
                active = this._getActiveHistory();

                // make sure to set the role, transition and reversal
                // as most of this is lost by the domCache cleaning
                $.extend( changePageOptions, {
                    role: active.role,
                    transition: this._transitionFromHistory(
                        data.direction,
                        changePageOptions.transition ),
                    reverse: data.direction === "back"
                });
            }

            return to;
        },

        _handleNavigate: function( url, data ) {
            //find first page via hash
            // TODO stripping the hash twice with handleUrl
            var to = $.mobile.path.stripHash( url ), history = this._getHistory(),

                // transition is false if it's the first page, undefined
                // otherwise (and may be overridden by default)
                transition = history.stack.length === 0 ? "none" :
                    this._transitionFromHistory( data.direction ),

                // default options for the changPage calls made after examining
                // the current state of the page and the hash, NOTE that the
                // transition is derived from the previous history entry
                changePageOptions = {
                    changeHash: false,
                    fromHashChange: true,
                    reverse: data.direction === "back"
                };

            $.extend( changePageOptions, data, {
                transition: transition
            });

            // TODO move to _handleDestination ?
            // If this isn't the first page, if the current url is a dialog hash
            // key, and the initial destination isn't equal to the current target
            // page, use the special dialog handling
            if ( history.activeIndex > 0 &&
                to.indexOf( $.mobile.dialogHashKey ) > -1 ) {

                to = this._handleDialog( changePageOptions, data );

                if ( to === false ) {
                    return;
                }
            }

            this._changeContent( this._handleDestination( to ), changePageOptions );
        },

        _changeContent: function( to, opts ) {
            $.mobile.changePage( to, opts );
        },

        _getBase: function() {
            return $.mobile.base;
        },

        _getNs: function() {
            return $.mobile.ns;
        },

        _enhance: function( content, role ) {
            // TODO consider supporting a custom callback, and passing in
            // the settings which includes the role
            return content.page({ role: role });
        },

        _include: function( page, settings ) {
            // append to page and enhance
            page.appendTo( this.element );

            // use the page widget to enhance
            this._enhance( page, settings.role );

            // remove page on hide
            page.page( "bindRemove" );
        },

        _find: function( absUrl ) {
            // TODO consider supporting a custom callback
            var fileUrl = this._createFileUrl( absUrl ),
                dataUrl = this._createDataUrl( absUrl ),
                page, initialContent = this._getInitialContent();

            // Check to see if the page already exists in the DOM.
            // NOTE do _not_ use the :jqmData pseudo selector because parenthesis
            //      are a valid url char and it breaks on the first occurence
            page = this.element
                .children( "[data-" + this._getNs() +
                    "url='" + $.mobile.path.hashToSelector( dataUrl ) + "']" );

            // If we failed to find the page, check to see if the url is a
            // reference to an embedded page. If so, it may have been dynamically
            // injected by a developer, in which case it would be lacking a
            // data-url attribute and in need of enhancement.
            if ( page.length === 0 && dataUrl && !$.mobile.path.isPath( dataUrl ) ) {
                page = this.element.children( $.mobile.path.hashToSelector("#" + dataUrl) )
                    .attr( "data-" + this._getNs() + "url", dataUrl )
                    .jqmData( "url", dataUrl );
            }

            // If we failed to find a page in the DOM, check the URL to see if it
            // refers to the first page in the application. Also check to make sure
            // our cached-first-page is actually in the DOM. Some user deployed
            // apps are pruning the first page from the DOM for various reasons.
            // We check for this case here because we don't want a first-page with
            // an id falling through to the non-existent embedded page error case.
            if ( page.length === 0 &&
                $.mobile.path.isFirstPageUrl( fileUrl ) &&
                initialContent &&
                initialContent.parent().length ) {
                page = $( initialContent );
            }

            return page;
        },

        _getLoader: function() {
            return $.mobile.loading();
        },

        _showLoading: function( delay, theme, msg, textonly ) {
            // This configurable timeout allows cached pages a brief
            // delay to load without showing a message
            if ( this._loadMsg ) {
                return;
            }

            this._loadMsg = setTimeout($.proxy(function() {
                this._getLoader().loader( "show", theme, msg, textonly );
                this._loadMsg = 0;
            }, this), delay );
        },

        _hideLoading: function() {
            // Stop message show timer
            clearTimeout( this._loadMsg );
            this._loadMsg = 0;

            // Hide loading message
            this._getLoader().loader( "hide" );
        },

        _showError: function() {
            // make sure to remove the current loading message
            this._hideLoading();

            // show the error message
            this._showLoading( 0, $.mobile.pageLoadErrorMessageTheme, $.mobile.pageLoadErrorMessage, true );

            // hide the error message after a delay
            // TODO configuration
            setTimeout( $.proxy(this, "_hideLoading"), 1500 );
        },

        _parse: function( html, fileUrl ) {
            // TODO consider allowing customization of this method. It's very JQM specific
            var page, all = $( "<div></div>" );

            //workaround to allow scripts to execute when included in page divs
            all.get( 0 ).innerHTML = html;

            page = all.find( ":jqmData(role='page'), :jqmData(role='dialog')" ).first();

            //if page elem couldn't be found, create one and insert the body element's contents
            if ( !page.length ) {
                page = $( "<div data-" + this._getNs() + "role='page'>" +
                    ( html.split( /<\/?body[^>]*>/gmi )[1] || "" ) +
                    "</div>" );
            }

            // TODO tagging a page with external to make sure that embedded pages aren't
            // removed by the various page handling code is bad. Having page handling code
            // in many places is bad. Solutions post 1.0
            page.attr( "data-" + this._getNs() + "url", this._createDataUrl( fileUrl ) )
                .attr( "data-" + this._getNs() + "external-page", true );

            return page;
        },

        _setLoadedTitle: function( page, html ) {
            //page title regexp
            var newPageTitle = html.match( /<title[^>]*>([^<]*)/ ) && RegExp.$1;

            if ( newPageTitle && !page.jqmData("title") ) {
                newPageTitle = $( "<div>" + newPageTitle + "</div>" ).text();
                page.jqmData( "title", newPageTitle );
            }
        },

        _isRewritableBaseTag: function() {
            return $.mobile.dynamicBaseEnabled && !$.support.dynamicBaseTag;
        },

        _createDataUrl: function( absoluteUrl ) {
            return $.mobile.path.convertUrlToDataUrl( absoluteUrl );
        },

        _createFileUrl: function( absoluteUrl ) {
            return $.mobile.path.getFilePath( absoluteUrl );
        },

        _triggerWithDeprecated: function( name, data, page ) {
            var deprecatedEvent = $.Event( "page" + name ),
                newEvent = $.Event( this.widgetName + name );

            // DEPRECATED
            // trigger the old deprecated event on the page if it's provided
            ( page || this.element ).trigger( deprecatedEvent, data );

            // use the widget trigger method for the new content* event
            this._trigger( name, newEvent, data );

            return {
                deprecatedEvent: deprecatedEvent,
                event: newEvent
            };
        },

        // TODO it would be nice to split this up more but everything appears to be "one off"
        //      or require ordering such that other bits are sprinkled in between parts that
        //      could be abstracted out as a group
        _loadSuccess: function( absUrl, triggerData, settings, deferred ) {
            var fileUrl = this._createFileUrl( absUrl );

            return $.proxy(function( html, textStatus, xhr ) {
                //pre-parse html to check for a data-url,
                //use it as the new fileUrl, base path, etc
                var content,

                    // TODO handle dialogs again
                    pageElemRegex = new RegExp( "(<[^>]+\\bdata-" + this._getNs() + "role=[\"']?page[\"']?[^>]*>)" ),

                    dataUrlRegex = new RegExp( "\\bdata-" + this._getNs() + "url=[\"']?([^\"'>]*)[\"']?" );

                // data-url must be provided for the base tag so resource requests
                // can be directed to the correct url. loading into a temprorary
                // element makes these requests immediately
                if ( pageElemRegex.test( html ) &&
                    RegExp.$1 &&
                    dataUrlRegex.test( RegExp.$1 ) &&
                    RegExp.$1 ) {
                    fileUrl = $.mobile.path.getFilePath( $("<div>" + RegExp.$1 + "</div>").text() );

                    // We specify that, if a data-url attribute is given on the page div, its value
                    // must be given non-URL-encoded. However, in this part of the code, fileUrl is
                    // assumed to be URL-encoded, so we URL-encode the retrieved value here
                    fileUrl = this.window[ 0 ].encodeURIComponent( fileUrl );
                }

                //dont update the base tag if we are prefetching
                if ( settings.prefetch === undefined ) {
                    this._getBase().set( fileUrl );
                }

                content = this._parse( html, fileUrl );

                this._setLoadedTitle( content, html );

                // Add the content reference and xhr to our triggerData.
                triggerData.xhr = xhr;
                triggerData.textStatus = textStatus;

                // DEPRECATED
                triggerData.page = content;

                triggerData.content = content;

                triggerData.toPage = content;

                // If the default behavior is prevented, stop here!
                // Note that it is the responsibility of the listener/handler
                // that called preventDefault(), to resolve/reject the
                // deferred object within the triggerData.
                if ( this._triggerWithDeprecated( "load", triggerData ).event.isDefaultPrevented() ) {
                    return;
                }

                // rewrite src and href attrs to use a base url if the base tag won't work
                if ( this._isRewritableBaseTag() && content ) {
                    this._getBase().rewrite( fileUrl, content );
                }

                this._include( content, settings );

                // Remove loading message.
                if ( settings.showLoadMsg ) {
                    this._hideLoading();
                }

                deferred.resolve( absUrl, settings, content );
            }, this);
        },

        _loadDefaults: {
            type: "get",
            data: undefined,

            // DEPRECATED
            reloadPage: false,

            reload: false,

            // By default we rely on the role defined by the @data-role attribute.
            role: undefined,

            showLoadMsg: false,

            // This delay allows loads that pull from browser cache to
            // occur without showing the loading message.
            loadMsgDelay: 50
        },

        load: function( url, options ) {
            // This function uses deferred notifications to let callers
            // know when the content is done loading, or if an error has occurred.
            var deferred = ( options && options.deferred ) || $.Deferred(),

                // Examining the option "reloadPage" passed by the user is deprecated as of 1.4.0
                // and will be removed in 1.5.0.
                // Copy option "reloadPage" to "reload", but only if option "reload" is not present
                reloadOptionExtension =
                    ( ( options && options.reload === undefined &&
                        options.reloadPage !== undefined ) ?
                            { reload: options.reloadPage } : {} ),

                // The default load options with overrides specified by the caller.
                settings = $.extend( {}, this._loadDefaults, options, reloadOptionExtension ),

                // The DOM element for the content after it has been loaded.
                content = null,

                // The absolute version of the URL passed into the function. This
                // version of the URL may contain dialog/subcontent params in it.
                absUrl = $.mobile.path.makeUrlAbsolute( url, this._findBaseWithDefault() ),
                fileUrl, dataUrl, pblEvent, triggerData;

            // If the caller provided data, and we're using "get" request,
            // append the data to the URL.
            if ( settings.data && settings.type === "get" ) {
                absUrl = $.mobile.path.addSearchParams( absUrl, settings.data );
                settings.data = undefined;
            }

            // If the caller is using a "post" request, reload must be true
            if ( settings.data && settings.type === "post" ) {
                settings.reload = true;
            }

            // The absolute version of the URL minus any dialog/subcontent params.
            // In otherwords the real URL of the content to be loaded.
            fileUrl = this._createFileUrl( absUrl );

            // The version of the Url actually stored in the data-url attribute of
            // the content. For embedded content, it is just the id of the page. For
            // content within the same domain as the document base, it is the site
            // relative path. For cross-domain content (Phone Gap only) the entire
            // absolute Url is used to load the content.
            dataUrl = this._createDataUrl( absUrl );

            content = this._find( absUrl );

            // If it isn't a reference to the first content and refers to missing
            // embedded content reject the deferred and return
            if ( content.length === 0 &&
                $.mobile.path.isEmbeddedPage(fileUrl) &&
                !$.mobile.path.isFirstPageUrl(fileUrl) ) {
                deferred.reject( absUrl, settings );
                return deferred.promise();
            }

            // Reset base to the default document base
            // TODO figure out why we doe this
            this._getBase().reset();

            // If the content we are interested in is already in the DOM,
            // and the caller did not indicate that we should force a
            // reload of the file, we are done. Resolve the deferrred so that
            // users can bind to .done on the promise
            if ( content.length && !settings.reload ) {
                this._enhance( content, settings.role );
                deferred.resolve( absUrl, settings, content );

                //if we are reloading the content make sure we update
                // the base if its not a prefetch
                if ( !settings.prefetch ) {
                    this._getBase().set(url);
                }

                return deferred.promise();
            }

            triggerData = {
                url: url,
                absUrl: absUrl,
                toPage: url,
                prevPage: options ? options.fromPage : undefined,
                dataUrl: dataUrl,
                deferred: deferred,
                options: settings
            };

            // Let listeners know we're about to load content.
            pblEvent = this._triggerWithDeprecated( "beforeload", triggerData );

            // If the default behavior is prevented, stop here!
            if ( pblEvent.deprecatedEvent.isDefaultPrevented() ||
                pblEvent.event.isDefaultPrevented() ) {
                return deferred.promise();
            }

            if ( settings.showLoadMsg ) {
                this._showLoading( settings.loadMsgDelay );
            }

            // Reset base to the default document base.
            // only reset if we are not prefetching
            if ( settings.prefetch === undefined ) {
                this._getBase().reset();
            }

            if ( !( $.mobile.allowCrossDomainPages ||
                $.mobile.path.isSameDomain($.mobile.path.documentUrl, absUrl ) ) ) {
                deferred.reject( absUrl, settings );
                return deferred.promise();
            }

            // Load the new content.
            $.ajax({
                url: fileUrl,
                type: settings.type,
                data: settings.data,
                contentType: settings.contentType,
                dataType: "html",
                success: this._loadSuccess( absUrl, triggerData, settings, deferred ),
                error: this._loadError( absUrl, triggerData, settings, deferred )
            });

            return deferred.promise();
        },

        _loadError: function( absUrl, triggerData, settings, deferred ) {
            return $.proxy(function( xhr, textStatus, errorThrown ) {
                //set base back to current path
                this._getBase().set( $.mobile.path.get() );

                // Add error info to our triggerData.
                triggerData.xhr = xhr;
                triggerData.textStatus = textStatus;
                triggerData.errorThrown = errorThrown;

                // Let listeners know the page load failed.
                var plfEvent = this._triggerWithDeprecated( "loadfailed", triggerData );

                // If the default behavior is prevented, stop here!
                // Note that it is the responsibility of the listener/handler
                // that called preventDefault(), to resolve/reject the
                // deferred object within the triggerData.
                if ( plfEvent.deprecatedEvent.isDefaultPrevented() ||
                    plfEvent.event.isDefaultPrevented() ) {
                    return;
                }

                // Remove loading message.
                if ( settings.showLoadMsg ) {
                    this._showError();
                }

                deferred.reject( absUrl, settings );
            }, this);
        },

        _getTransitionHandler: function( transition ) {
            transition = $.mobile._maybeDegradeTransition( transition );

            //find the transition handler for the specified transition. If there
            //isn't one in our transitionHandlers dictionary, use the default one.
            //call the handler immediately to kick-off the transition.
            return $.mobile.transitionHandlers[ transition ] || $.mobile.defaultTransitionHandler;
        },

        // TODO move into transition handlers?
        _triggerCssTransitionEvents: function( to, from, prefix ) {
            var samePage = false;

            prefix = prefix || "";

            // TODO decide if these events should in fact be triggered on the container
            if ( from ) {

                //Check if this is a same page transition and tell the handler in page
                if( to[0] === from[0] ){
                    samePage = true;
                }

                //trigger before show/hide events
                // TODO deprecate nextPage in favor of next
                this._triggerWithDeprecated( prefix + "hide", {

                    // Deprecated in 1.4 remove in 1.5
                    nextPage: to,
                    toPage: to,
                    prevPage: from,
                    samePage: samePage
                }, from );
            }

            // TODO deprecate prevPage in favor of previous
            this._triggerWithDeprecated( prefix + "show", {
                prevPage: from || $( "" ),
                toPage: to
            }, to );
        },

        // TODO make private once change has been defined in the widget
        _cssTransition: function( to, from, options ) {
            var transition = options.transition,
                reverse = options.reverse,
                deferred = options.deferred,
                TransitionHandler,
                promise;

            this._triggerCssTransitionEvents( to, from, "before" );

            // TODO put this in a binding to events *outside* the widget
            this._hideLoading();

            TransitionHandler = this._getTransitionHandler( transition );

            promise = ( new TransitionHandler( transition, reverse, to, from ) ).transition();

            promise.done( $.proxy( function() {
                this._triggerCssTransitionEvents( to, from );
            }, this ));

            // TODO temporary accomodation of argument deferred
            promise.done(function() {
                deferred.resolve.apply( deferred, arguments );
            });
        },

        _releaseTransitionLock: function() {
            //release transition lock so navigation is free again
            isPageTransitioning = false;
            if ( pageTransitionQueue.length > 0 ) {
                $.mobile.changePage.apply( null, pageTransitionQueue.pop() );
            }
        },

        _removeActiveLinkClass: function( force ) {
            //clear out the active button state
            $.mobile.removeActiveLinkClass( force );
        },

        _loadUrl: function( to, triggerData, settings ) {
            // preserve the original target as the dataUrl value will be
            // simplified eg, removing ui-state, and removing query params
            // from the hash this is so that users who want to use query
            // params have access to them in the event bindings for the page
            // life cycle See issue #5085
            settings.target = to;
            settings.deferred = $.Deferred();

            this.load( to, settings );

            settings.deferred.done($.proxy(function( url, options, content ) {
                isPageTransitioning = false;

                // store the original absolute url so that it can be provided
                // to events in the triggerData of the subsequent changePage call
                options.absUrl = triggerData.absUrl;

                this.transition( content, triggerData, options );
            }, this));

            settings.deferred.fail($.proxy(function(/* url, options */) {
                this._removeActiveLinkClass( true );
                this._releaseTransitionLock();
                this._triggerWithDeprecated( "changefailed", triggerData );
            }, this));
        },

        _triggerPageBeforeChange: function( to, triggerData, settings ) {
            var returnEvents;

            triggerData.prevPage = this.activePage;
            $.extend( triggerData, {
                toPage: to,
                options: settings
            });

            // NOTE: preserve the original target as the dataUrl value will be
            // simplified eg, removing ui-state, and removing query params from
            // the hash this is so that users who want to use query params have
            // access to them in the event bindings for the page life cycle
            // See issue #5085
            if ( $.type(to) === "string" ) {
                // if the toPage is a string simply convert it
                triggerData.absUrl = $.mobile.path.makeUrlAbsolute( to, this._findBaseWithDefault() );
            } else {
                // if the toPage is a jQuery object grab the absolute url stored
                // in the loadPage callback where it exists
                triggerData.absUrl = settings.absUrl;
            }

            // Let listeners know we're about to change the current page.
            returnEvents = this._triggerWithDeprecated( "beforechange", triggerData );

            // If the default behavior is prevented, stop here!
            if ( returnEvents.event.isDefaultPrevented() ||
                returnEvents.deprecatedEvent.isDefaultPrevented() ) {
                return false;
            }

            return true;
        },

        change: function( to, options ) {
            // If we are in the midst of a transition, queue the current request.
            // We'll call changePage() once we're done with the current transition
            // to service the request.
            if ( isPageTransitioning ) {
                pageTransitionQueue.unshift( arguments );
                return;
            }

            var settings = $.extend( {}, $.mobile.changePage.defaults, options ),
                triggerData = {};

            // Make sure we have a fromPage.
            settings.fromPage = settings.fromPage || this.activePage;

            // if the page beforechange default is prevented return early
            if ( !this._triggerPageBeforeChange(to, triggerData, settings) ) {
                return;
            }

            // We allow "pagebeforechange" observers to modify the to in
            // the trigger data to allow for redirects. Make sure our to is
            // updated. We also need to re-evaluate whether it is a string,
            // because an object can also be replaced by a string
            to = triggerData.toPage;

            // If the caller passed us a url, call loadPage()
            // to make sure it is loaded into the DOM. We'll listen
            // to the promise object it returns so we know when
            // it is done loading or if an error ocurred.
            if ( $.type(to) === "string" ) {
                // Set the isPageTransitioning flag to prevent any requests from
                // entering this method while we are in the midst of loading a page
                // or transitioning.
                isPageTransitioning = true;

                this._loadUrl( to, triggerData, settings );
            } else {
                this.transition( to, triggerData, settings );
            }
        },

        transition: function( toPage, triggerData, settings ) {
            var fromPage, url, pageUrl, fileUrl,
                active, activeIsInitialPage,
                historyDir, pageTitle, isDialog,
                alreadyThere, newPageTitle,
                params,    cssTransitionDeferred,
                beforeTransition;

            // If we are in the midst of a transition, queue the current request.
            // We'll call changePage() once we're done with the current transition
            // to service the request.
            if ( isPageTransitioning ) {
                // make sure to only queue the to and settings values so the arguments
                // work with a call to the change method
                pageTransitionQueue.unshift( [toPage, settings] );
                return;
            }

            // DEPRECATED - this call only, in favor of the before transition
            // if the page beforechange default is prevented return early
            if ( !this._triggerPageBeforeChange(toPage, triggerData, settings) ) {
                return;
            }

            triggerData.prevPage = settings.fromPage;
            // if the (content|page)beforetransition default is prevented return early
            // Note, we have to check for both the deprecated and new events
            beforeTransition = this._triggerWithDeprecated( "beforetransition", triggerData );
            if (beforeTransition.deprecatedEvent.isDefaultPrevented() ||
                beforeTransition.event.isDefaultPrevented() ) {
                return;
            }

            // Set the isPageTransitioning flag to prevent any requests from
            // entering this method while we are in the midst of loading a page
            // or transitioning.
            isPageTransitioning = true;

            // If we are going to the first-page of the application, we need to make
            // sure settings.dataUrl is set to the application document url. This allows
            // us to avoid generating a document url with an id hash in the case where the
            // first-page of the document has an id attribute specified.
            if ( toPage[ 0 ] === $.mobile.firstPage[ 0 ] && !settings.dataUrl ) {
                settings.dataUrl = $.mobile.path.documentUrl.hrefNoHash;
            }

            // The caller passed us a real page DOM element. Update our
            // internal state and then trigger a transition to the page.
            fromPage = settings.fromPage;
            url = ( settings.dataUrl && $.mobile.path.convertUrlToDataUrl(settings.dataUrl) ) ||
                toPage.jqmData( "url" );

            // The pageUrl var is usually the same as url, except when url is obscured
            // as a dialog url. pageUrl always contains the file path
            pageUrl = url;
            fileUrl = $.mobile.path.getFilePath( url );
            active = $.mobile.navigate.history.getActive();
            activeIsInitialPage = $.mobile.navigate.history.activeIndex === 0;
            historyDir = 0;
            pageTitle = document.title;
            isDialog = ( settings.role === "dialog" ||
                toPage.jqmData( "role" ) === "dialog" ) &&
                toPage.jqmData( "dialog" ) !== true;

            // By default, we prevent changePage requests when the fromPage and toPage
            // are the same element, but folks that generate content
            // manually/dynamically and reuse pages want to be able to transition to
            // the same page. To allow this, they will need to change the default
            // value of allowSamePageTransition to true, *OR*, pass it in as an
            // option when they manually call changePage(). It should be noted that
            // our default transition animations assume that the formPage and toPage
            // are different elements, so they may behave unexpectedly. It is up to
            // the developer that turns on the allowSamePageTransitiona option to
            // either turn off transition animations, or make sure that an appropriate
            // animation transition is used.
            if ( fromPage && fromPage[0] === toPage[0] &&
                !settings.allowSamePageTransition ) {

                isPageTransitioning = false;
                this._triggerWithDeprecated( "transition", triggerData );
                this._triggerWithDeprecated( "change", triggerData );

                // Even if there is no page change to be done, we should keep the
                // urlHistory in sync with the hash changes
                if ( settings.fromHashChange ) {
                    $.mobile.navigate.history.direct({ url: url });
                }

                return;
            }

            // We need to make sure the page we are given has already been enhanced.
            toPage.page({ role: settings.role });

            // If the changePage request was sent from a hashChange event, check to
            // see if the page is already within the urlHistory stack. If so, we'll
            // assume the user hit the forward/back button and will try to match the
            // transition accordingly.
            if ( settings.fromHashChange ) {
                historyDir = settings.direction === "back" ? -1 : 1;
            }

            // Kill the keyboard.
            // XXX_jblas: We need to stop crawling the entire document to kill focus.
            //            Instead, we should be tracking focus with a delegate()
            //            handler so we already have the element in hand at this
            //            point.
            // Wrap this in a try/catch block since IE9 throw "Unspecified error" if
            // document.activeElement is undefined when we are in an IFrame.
            try {
                if ( document.activeElement &&
                    document.activeElement.nodeName.toLowerCase() !== "body" ) {

                    $( document.activeElement ).blur();
                } else {
                    $( "input:focus, textarea:focus, select:focus" ).blur();
                }
            } catch( e ) {}

            // Record whether we are at a place in history where a dialog used to be -
            // if so, do not add a new history entry and do not change the hash either
            alreadyThere = false;

            // If we're displaying the page as a dialog, we don't want the url
            // for the dialog content to be used in the hash. Instead, we want
            // to append the dialogHashKey to the url of the current page.
            if ( isDialog && active ) {
                // on the initial page load active.url is undefined and in that case
                // should be an empty string. Moving the undefined -> empty string back
                // into urlHistory.addNew seemed imprudent given undefined better
                // represents the url state

                // If we are at a place in history that once belonged to a dialog, reuse
                // this state without adding to urlHistory and without modifying the
                // hash. However, if a dialog is already displayed at this point, and
                // we're about to display another dialog, then we must add another hash
                // and history entry on top so that one may navigate back to the
                // original dialog
                if ( active.url &&
                    active.url.indexOf( $.mobile.dialogHashKey ) > -1 &&
                    this.activePage &&
                    !this.activePage.hasClass( "ui-dialog" ) &&
                    $.mobile.navigate.history.activeIndex > 0 ) {

                    settings.changeHash = false;
                    alreadyThere = true;
                }

                // Normally, we tack on a dialog hash key, but if this is the location
                // of a stale dialog, we reuse the URL from the entry
                url = ( active.url || "" );

                // account for absolute urls instead of just relative urls use as hashes
                if ( !alreadyThere && url.indexOf("#") > -1 ) {
                    url += $.mobile.dialogHashKey;
                } else {
                    url += "#" + $.mobile.dialogHashKey;
                }
            }

            // if title element wasn't found, try the page div data attr too
            // If this is a deep-link or a reload ( active === undefined ) then just
            // use pageTitle
            newPageTitle = ( !active ) ? pageTitle : toPage.jqmData( "title" ) ||
                toPage.children( ":jqmData(role='header')" ).find( ".ui-title" ).text();
            if ( !!newPageTitle && pageTitle === document.title ) {
                pageTitle = newPageTitle;
            }
            if ( !toPage.jqmData( "title" ) ) {
                toPage.jqmData( "title", pageTitle );
            }

            // Make sure we have a transition defined.
            settings.transition = settings.transition ||
                ( ( historyDir && !activeIsInitialPage ) ? active.transition : undefined ) ||
                ( isDialog ? $.mobile.defaultDialogTransition : $.mobile.defaultPageTransition );

            //add page to history stack if it's not back or forward
            if ( !historyDir && alreadyThere ) {
                $.mobile.navigate.history.getActive().pageUrl = pageUrl;
            }

            // Set the location hash.
            if ( url && !settings.fromHashChange ) {

                // rebuilding the hash here since we loose it earlier on
                // TODO preserve the originally passed in path
                if ( !$.mobile.path.isPath( url ) && url.indexOf( "#" ) < 0 ) {
                    url = "#" + url;
                }

                // TODO the property names here are just silly
                params = {
                    transition: settings.transition,
                    title: pageTitle,
                    pageUrl: pageUrl,
                    role: settings.role
                };

                if ( settings.changeHash !== false && $.mobile.hashListeningEnabled ) {
                    $.mobile.navigate( this.window[ 0 ].encodeURI( url ), params, true);
                } else if ( toPage[ 0 ] !== $.mobile.firstPage[ 0 ] ) {
                    $.mobile.navigate.history.add( url, params );
                }
            }

            //set page title
            document.title = pageTitle;

            //set "toPage" as activePage deprecated in 1.4 remove in 1.5
            $.mobile.activePage = toPage;

            //new way to handle activePage
            this.activePage = toPage;

            // If we're navigating back in the URL history, set reverse accordingly.
            settings.reverse = settings.reverse || historyDir < 0;

            cssTransitionDeferred = $.Deferred();

            this._cssTransition(toPage, fromPage, {
                transition: settings.transition,
                reverse: settings.reverse,
                deferred: cssTransitionDeferred
            });

            cssTransitionDeferred.done($.proxy(function( name, reverse, $to, $from, alreadyFocused ) {
                $.mobile.removeActiveLinkClass();

                //if there's a duplicateCachedPage, remove it from the DOM now that it's hidden
                if ( settings.duplicateCachedPage ) {
                    settings.duplicateCachedPage.remove();
                }

                // despite visibility: hidden addresses issue #2965
                // https://github.com/jquery/jquery-mobile/issues/2965
                if ( !alreadyFocused ) {
                    $.mobile.focusPage( toPage );
                }

                this._releaseTransitionLock();
                this._triggerWithDeprecated( "transition", triggerData );
                this._triggerWithDeprecated( "change", triggerData );
            }, this));
        },

        // determine the current base url
        _findBaseWithDefault: function() {
            var closestBase = ( this.activePage &&
            $.mobile.getClosestBaseUrl( this.activePage ) );
        return closestBase || $.mobile.path.documentBase.hrefNoHash;
        }
    });

    // The following handlers should be bound after mobileinit has been triggered
    // the following deferred is resolved in the init file
    $.mobile.navreadyDeferred = $.Deferred();

    //these variables make all page containers use the same queue and only navigate one at a time
    // queue to hold simultanious page transitions
    var pageTransitionQueue = [],

        // indicates whether or not page is in process of transitioning
        isPageTransitioning = false;

})( jQuery );

(function( $, undefined ) {

        // resolved on domready
    var domreadyDeferred = $.Deferred(),

        // resolved and nulled on window.load()
        loadDeferred = $.Deferred(),

        // function that resolves the above deferred
        pageIsFullyLoaded = function() {

            // Resolve and null the deferred
            loadDeferred.resolve();
            loadDeferred = null;
        },

        documentUrl = $.mobile.path.documentUrl,

        // used to track last vclicked element to make sure its value is added to form data
        $lastVClicked = null;

    /* Event Bindings - hashchange, submit, and click */
    function findClosestLink( ele )    {
        while ( ele ) {
            // Look for the closest element with a nodeName of "a".
            // Note that we are checking if we have a valid nodeName
            // before attempting to access it. This is because the
            // node we get called with could have originated from within
            // an embedded SVG document where some symbol instance elements
            // don't have nodeName defined on them, or strings are of type
            // SVGAnimatedString.
            if ( ( typeof ele.nodeName === "string" ) && ele.nodeName.toLowerCase() === "a" ) {
                break;
            }
            ele = ele.parentNode;
        }
        return ele;
    }

    $.mobile.loadPage = function( url, opts ) {
        var container;

        opts = opts || {};
        container = ( opts.pageContainer || $.mobile.pageContainer );

        // create the deferred that will be supplied to loadPage callers
        // and resolved by the content widget's load method
        opts.deferred = $.Deferred();

        // Preferring to allow exceptions for uninitialized opts.pageContainer
        // widgets so we know if we need to force init here for users
        container.pagecontainer( "load", url, opts );

        // provide the deferred
        return opts.deferred.promise();
    };

    //define vars for interal use

    /* internal utility functions */

    // NOTE Issue #4950 Android phonegap doesn't navigate back properly
    //      when a full page refresh has taken place. It appears that hashchange
    //      and replacestate history alterations work fine but we need to support
    //      both forms of history traversal in our code that uses backward history
    //      movement
    $.mobile.back = function() {
        var nav = window.navigator;

        // if the setting is on and the navigator object is
        // available use the phonegap navigation capability
        if ( this.phonegapNavigationEnabled &&
            nav &&
            nav.app &&
            nav.app.backHistory ) {
            nav.app.backHistory();
        } else {
            $.mobile.pageContainer.pagecontainer( "back" );
        }
    };

    // Direct focus to the page title, or otherwise first focusable element
    $.mobile.focusPage = function ( page ) {
        var autofocus = page.find( "[autofocus]" ),
            pageTitle = page.find( ".ui-title:eq(0)" );

        if ( autofocus.length ) {
            autofocus.focus();
            return;
        }

        if ( pageTitle.length ) {
            pageTitle.focus();
        } else{
            page.focus();
        }
    };

    // No-op implementation of transition degradation
    $.mobile._maybeDegradeTransition = $.mobile._maybeDegradeTransition || function( transition ) {
        return transition;
    };

    // Exposed $.mobile methods

    $.mobile.changePage = function( to, options ) {
        $.mobile.pageContainer.pagecontainer( "change", to, options );
    };

    $.mobile.changePage.defaults = {
        transition: undefined,
        reverse: false,
        changeHash: true,
        fromHashChange: false,
        role: undefined, // By default we rely on the role defined by the @data-role attribute.
        duplicateCachedPage: undefined,
        pageContainer: undefined,
        showLoadMsg: true, //loading message shows by default when pages are being fetched during changePage
        dataUrl: undefined,
        fromPage: undefined,
        allowSamePageTransition: false
    };

    $.mobile._registerInternalEvents = function() {
        var getAjaxFormData = function( $form, calculateOnly ) {
            var url, ret = true, formData, vclickedName, method;
            if ( !$.mobile.ajaxEnabled ||
                    // test that the form is, itself, ajax false
                    $form.is( ":jqmData(ajax='false')" ) ||
                    // test that $.mobile.ignoreContentEnabled is set and
                    // the form or one of it's parents is ajax=false
                    !$form.jqmHijackable().length ||
                    $form.attr( "target" ) ) {
                return false;
            }

            url = ( $lastVClicked && $lastVClicked.attr( "formaction" ) ) ||
                $form.attr( "action" );
            method = ( $form.attr( "method" ) || "get" ).toLowerCase();

            // If no action is specified, browsers default to using the
            // URL of the document containing the form. Since we dynamically
            // pull in pages from external documents, the form should submit
            // to the URL for the source document of the page containing
            // the form.
            if ( !url ) {
                // Get the @data-url for the page containing the form.
                url = $.mobile.getClosestBaseUrl( $form );

                // NOTE: If the method is "get", we need to strip off the query string
                // because it will get replaced with the new form data. See issue #5710.
                if ( method === "get" ) {
                    url = $.mobile.path.parseUrl( url ).hrefNoSearch;
                }

                if ( url === $.mobile.path.documentBase.hrefNoHash ) {
                    // The url we got back matches the document base,
                    // which means the page must be an internal/embedded page,
                    // so default to using the actual document url as a browser
                    // would.
                    url = documentUrl.hrefNoSearch;
                }
            }

            url = $.mobile.path.makeUrlAbsolute(  url, $.mobile.getClosestBaseUrl( $form ) );

            if ( ( $.mobile.path.isExternal( url ) && !$.mobile.path.isPermittedCrossDomainRequest( documentUrl, url ) ) ) {
                return false;
            }

            if ( !calculateOnly ) {
                formData = $form.serializeArray();

                if ( $lastVClicked && $lastVClicked[ 0 ].form === $form[ 0 ] ) {
                    vclickedName = $lastVClicked.attr( "name" );
                    if ( vclickedName ) {
                        // Make sure the last clicked element is included in the form
                        $.each( formData, function( key, value ) {
                            if ( value.name === vclickedName ) {
                                // Unset vclickedName - we've found it in the serialized data already
                                vclickedName = "";
                                return false;
                            }
                        });
                        if ( vclickedName ) {
                            formData.push( { name: vclickedName, value: $lastVClicked.attr( "value" ) } );
                        }
                    }
                }

                ret = {
                    url: url,
                    options: {
                        type:        method,
                        data:        $.param( formData ),
                        transition:    $form.jqmData( "transition" ),
                        reverse:    $form.jqmData( "direction" ) === "reverse",
                        reloadPage:    true
                    }
                };
            }

            return ret;
        };

        //bind to form submit events, handle with Ajax
        $.mobile.document.delegate( "form", "submit", function( event ) {
            var formData;

            if ( !event.isDefaultPrevented() ) {
                formData = getAjaxFormData( $( this ) );
                if ( formData ) {
                    $.mobile.changePage( formData.url, formData.options );
                    event.preventDefault();
                }
            }
        });

        //add active state on vclick
        $.mobile.document.bind( "vclick", function( event ) {
            var $btn, btnEls, target = event.target, needClosest = false;
            // if this isn't a left click we don't care. Its important to note
            // that when the virtual event is generated it will create the which attr
            if ( event.which > 1 || !$.mobile.linkBindingEnabled ) {
                return;
            }

            // Record that this element was clicked, in case we need it for correct
            // form submission during the "submit" handler above
            $lastVClicked = $( target );

            // Try to find a target element to which the active class will be applied
            if ( $.data( target, "mobile-button" ) ) {
                // If the form will not be submitted via AJAX, do not add active class
                if ( !getAjaxFormData( $( target ).closest( "form" ), true ) ) {
                    return;
                }
                // We will apply the active state to this button widget - the parent
                // of the input that was clicked will have the associated data
                if ( target.parentNode ) {
                    target = target.parentNode;
                }
            } else {
                target = findClosestLink( target );
                if ( !( target && $.mobile.path.parseUrl( target.getAttribute( "href" ) || "#" ).hash !== "#" ) ) {
                    return;
                }

                // TODO teach $.mobile.hijackable to operate on raw dom elements so the
                // link wrapping can be avoided
                if ( !$( target ).jqmHijackable().length ) {
                    return;
                }
            }

            // Avoid calling .closest by using the data set during .buttonMarkup()
            // List items have the button data in the parent of the element clicked
            if ( !!~target.className.indexOf( "ui-link-inherit" ) ) {
                if ( target.parentNode ) {
                    btnEls = $.data( target.parentNode, "buttonElements" );
                }
            // Otherwise, look for the data on the target itself
            } else {
                btnEls = $.data( target, "buttonElements" );
            }
            // If found, grab the button's outer element
            if ( btnEls ) {
                target = btnEls.outer;
            } else {
                needClosest = true;
            }

            $btn = $( target );
            // If the outer element wasn't found by the our heuristics, use .closest()
            if ( needClosest ) {
                $btn = $btn.closest( ".ui-btn" );
            }

            if ( $btn.length > 0 &&
                !( $btn.hasClass( "ui-state-disabled" ||

                    // DEPRECATED as of 1.4.0 - remove after 1.4.0 release
                    // only ui-state-disabled should be present thereafter
                    $btn.hasClass( "ui-disabled" ) ) ) ) {
                $.mobile.removeActiveLinkClass( true );
                $.mobile.activeClickedLink = $btn;
                $.mobile.activeClickedLink.addClass( $.mobile.activeBtnClass );
            }
        });

        // click routing - direct to HTTP or Ajax, accordingly
        $.mobile.document.bind( "click", function( event ) {
            if ( !$.mobile.linkBindingEnabled || event.isDefaultPrevented() ) {
                return;
            }

            var link = findClosestLink( event.target ),
                $link = $( link ),

                //remove active link class if external (then it won't be there if you come back)
                httpCleanup = function() {
                    window.setTimeout(function() { $.mobile.removeActiveLinkClass( true ); }, 200 );
                },
                baseUrl, href,
                useDefaultUrlHandling, isExternal,
                transition, reverse, role;

            // If a button was clicked, clean up the active class added by vclick above
            if ( $.mobile.activeClickedLink &&
                $.mobile.activeClickedLink[ 0 ] === event.target.parentNode ) {
                httpCleanup();
            }

            // If there is no link associated with the click or its not a left
            // click we want to ignore the click
            // TODO teach $.mobile.hijackable to operate on raw dom elements so the link wrapping
            // can be avoided
            if ( !link || event.which > 1 || !$link.jqmHijackable().length ) {
                return;
            }

            //if there's a data-rel=back attr, go back in history
            if ( $link.is( ":jqmData(rel='back')" ) ) {
                $.mobile.back();
                return false;
            }

            baseUrl = $.mobile.getClosestBaseUrl( $link );

            //get href, if defined, otherwise default to empty hash
            href = $.mobile.path.makeUrlAbsolute( $link.attr( "href" ) || "#", baseUrl );

            //if ajax is disabled, exit early
            if ( !$.mobile.ajaxEnabled && !$.mobile.path.isEmbeddedPage( href ) ) {
                httpCleanup();
                //use default click handling
                return;
            }

            // XXX_jblas: Ideally links to application pages should be specified as
            //            an url to the application document with a hash that is either
            //            the site relative path or id to the page. But some of the
            //            internal code that dynamically generates sub-pages for nested
            //            lists and select dialogs, just write a hash in the link they
            //            create. This means the actual URL path is based on whatever
            //            the current value of the base tag is at the time this code
            //            is called.
            if ( href.search( "#" ) !== -1 &&
                !( $.mobile.path.isExternal( href ) && $.mobile.path.isAbsoluteUrl( href ) ) ) {

                href = href.replace( /[^#]*#/, "" );
                if ( !href ) {
                    //link was an empty hash meant purely
                    //for interaction, so we ignore it.
                    event.preventDefault();
                    return;
                } else if ( $.mobile.path.isPath( href ) ) {
                    //we have apath so make it the href we want to load.
                    href = $.mobile.path.makeUrlAbsolute( href, baseUrl );
                } else {
                    //we have a simple id so use the documentUrl as its base.
                    href = $.mobile.path.makeUrlAbsolute( "#" + href, documentUrl.hrefNoHash );
                }
            }

            // Should we handle this link, or let the browser deal with it?
            useDefaultUrlHandling = $link.is( "[rel='external']" ) || $link.is( ":jqmData(ajax='false')" ) || $link.is( "[target]" );

            // Some embedded browsers, like the web view in Phone Gap, allow cross-domain XHR
            // requests if the document doing the request was loaded via the file:// protocol.
            // This is usually to allow the application to "phone home" and fetch app specific
            // data. We normally let the browser handle external/cross-domain urls, but if the
            // allowCrossDomainPages option is true, we will allow cross-domain http/https
            // requests to go through our page loading logic.

            //check for protocol or rel and its not an embedded page
            //TODO overlap in logic from isExternal, rel=external check should be
            //     moved into more comprehensive isExternalLink
            isExternal = useDefaultUrlHandling || ( $.mobile.path.isExternal( href ) && !$.mobile.path.isPermittedCrossDomainRequest( documentUrl, href ) );

            if ( isExternal ) {
                httpCleanup();
                //use default click handling
                return;
            }

            //use ajax
            transition = $link.jqmData( "transition" );
            reverse = $link.jqmData( "direction" ) === "reverse" ||
                        // deprecated - remove by 1.0
                        $link.jqmData( "back" );

            //this may need to be more specific as we use data-rel more
            role = $link.attr( "data-" + $.mobile.ns + "rel" ) || undefined;

            $.mobile.changePage( href, { transition: transition, reverse: reverse, role: role, link: $link } );
            event.preventDefault();
        });

        //prefetch pages when anchors with data-prefetch are encountered
        $.mobile.document.delegate( ".ui-page", "pageshow.prefetch", function() {
            var urls = [];
            $( this ).find( "a:jqmData(prefetch)" ).each(function() {
                var $link = $( this ),
                    url = $link.attr( "href" );

                if ( url && $.inArray( url, urls ) === -1 ) {
                    urls.push( url );

                    $.mobile.loadPage( url, { role: $link.attr( "data-" + $.mobile.ns + "rel" ),prefetch: true } );
                }
            });
        });

        // TODO ensure that the navigate binding in the content widget happens at the right time
        $.mobile.pageContainer.pagecontainer();

        //set page min-heights to be device specific
        $.mobile.document.bind( "pageshow", function() {

            // We need to wait for window.load to make sure that styles have already been rendered,
            // otherwise heights of external toolbars will have the wrong value
            if ( loadDeferred ) {
                loadDeferred.done( $.mobile.resetActivePageHeight );
            } else {
                $.mobile.resetActivePageHeight();
            }
        });
        $.mobile.window.bind( "throttledresize", $.mobile.resetActivePageHeight );

    };//navreadyDeferred done callback

    $( function() { domreadyDeferred.resolve(); } );

    // Account for the possibility that the load event has already fired
    if ( document.readyState === "complete" ) {
        pageIsFullyLoaded();
    } else {
        $.mobile.window.load( pageIsFullyLoaded );
    }

    $.when( domreadyDeferred, $.mobile.navreadyDeferred ).done( function() { $.mobile._registerInternalEvents(); } );
})( jQuery );


(function( $, window, undefined ) {

    // TODO remove direct references to $.mobile and properties, we should
    //      favor injection with params to the constructor
    $.mobile.Transition = function() {
        this.init.apply( this, arguments );
    };

    $.extend($.mobile.Transition.prototype, {
        toPreClass: " ui-page-pre-in",

        init: function( name, reverse, $to, $from ) {
            $.extend(this, {
                name: name,
                reverse: reverse,
                $to: $to,
                $from: $from,
                deferred: new $.Deferred()
            });
        },

        cleanFrom: function() {
            this.$from
                .removeClass( $.mobile.activePageClass + " out in reverse " + this.name )
                .height( "" );
        },

        // NOTE overridden by child object prototypes, noop'd here as defaults
        beforeDoneIn: function() {},
        beforeDoneOut: function() {},
        beforeStartOut: function() {},

        doneIn: function() {
            this.beforeDoneIn();

            this.$to.removeClass( "out in reverse " + this.name ).height( "" );

            this.toggleViewportClass();

            // In some browsers (iOS5), 3D transitions block the ability to scroll to the desired location during transition
            // This ensures we jump to that spot after the fact, if we aren't there already.
            if ( $.mobile.window.scrollTop() !== this.toScroll ) {
                this.scrollPage();
            }
            if ( !this.sequential ) {
                this.$to.addClass( $.mobile.activePageClass );
            }
            this.deferred.resolve( this.name, this.reverse, this.$to, this.$from, true );
        },

        doneOut: function( screenHeight, reverseClass, none, preventFocus ) {
            this.beforeDoneOut();
            this.startIn( screenHeight, reverseClass, none, preventFocus );
        },

        hideIn: function( callback ) {
            // Prevent flickering in phonegap container: see comments at #4024 regarding iOS
            this.$to.css( "z-index", -10 );
            callback.call( this );
            this.$to.css( "z-index", "" );
        },

        scrollPage: function() {
            // By using scrollTo instead of silentScroll, we can keep things better in order
            // Just to be precautios, disable scrollstart listening like silentScroll would
            $.event.special.scrollstart.enabled = false;
            //if we are hiding the url bar or the page was previously scrolled scroll to hide or return to position
            if ( $.mobile.hideUrlBar || this.toScroll !== $.mobile.defaultHomeScroll ) {
                window.scrollTo( 0, this.toScroll );
            }

            // reenable scrollstart listening like silentScroll would
            setTimeout( function() {
                $.event.special.scrollstart.enabled = true;
            }, 150 );
        },

        startIn: function( screenHeight, reverseClass, none, preventFocus ) {
            this.hideIn(function() {
                this.$to.addClass( $.mobile.activePageClass + this.toPreClass );

                // Send focus to page as it is now display: block
                if ( !preventFocus ) {
                    $.mobile.focusPage( this.$to );
                }

                // Set to page height
                this.$to.height( screenHeight + this.toScroll );

                if ( !none ) {
                    this.scrollPage();
                }
            });

            this.$to
                .removeClass( this.toPreClass )
                .addClass( this.name + " in " + reverseClass );

            if ( !none ) {
                this.$to.animationComplete( $.proxy(function() {
                    this.doneIn();
                }, this ));
            } else {
                this.doneIn();
            }

        },

        startOut: function( screenHeight, reverseClass, none ) {
            this.beforeStartOut( screenHeight, reverseClass, none );

            // Set the from page's height and start it transitioning out
            // Note: setting an explicit height helps eliminate tiling in the transitions
            this.$from
                .height( screenHeight + $.mobile.window.scrollTop() )
                .addClass( this.name + " out" + reverseClass );
        },

        toggleViewportClass: function() {
            $.mobile.pageContainer.toggleClass( "ui-mobile-viewport-transitioning viewport-" + this.name );
        },

        transition: function() {
            // NOTE many of these could be calculated/recorded in the constructor, it's my
            //      opinion that binding them as late as possible has value with regards to
            //      better transitions with fewer bugs. Ie, it's not guaranteed that the
            //      object will be created and transition will be run immediately after as
            //      it is today. So we wait until transition is invoked to gather the following
            var none,
                reverseClass = this.reverse ? " reverse" : "",
                screenHeight = $.mobile.getScreenHeight(),
                maxTransitionOverride = $.mobile.maxTransitionWidth !== false &&
                    $.mobile.window.width() > $.mobile.maxTransitionWidth;

            this.toScroll = $.mobile.navigate.history.getActive().lastScroll || $.mobile.defaultHomeScroll;

            none = !$.support.cssTransitions || !$.support.cssAnimations ||
                maxTransitionOverride || !this.name || this.name === "none" ||
                Math.max( $.mobile.window.scrollTop(), this.toScroll ) >
                    $.mobile.getMaxScrollForTransition();

            this.toggleViewportClass();

            if ( this.$from && !none ) {
                this.startOut( screenHeight, reverseClass, none );
            } else {
                this.doneOut( screenHeight, reverseClass, none, true );
            }

            return this.deferred.promise();
        }
    });
})( jQuery, this );


(function( $ ) {

    $.mobile.SerialTransition = function() {
        this.init.apply(this, arguments);
    };

    $.extend($.mobile.SerialTransition.prototype, $.mobile.Transition.prototype, {
        sequential: true,

        beforeDoneOut: function() {
            if ( this.$from ) {
                this.cleanFrom();
            }
        },

        beforeStartOut: function( screenHeight, reverseClass, none ) {
            this.$from.animationComplete($.proxy(function() {
                this.doneOut( screenHeight, reverseClass, none );
            }, this ));
        }
    });

})( jQuery );


(function( $ ) {

    $.mobile.ConcurrentTransition = function() {
        this.init.apply(this, arguments);
    };

    $.extend($.mobile.ConcurrentTransition.prototype, $.mobile.Transition.prototype, {
        sequential: false,

        beforeDoneIn: function() {
            if ( this.$from ) {
                this.cleanFrom();
            }
        },

        beforeStartOut: function( screenHeight, reverseClass, none ) {
            this.doneOut( screenHeight, reverseClass, none );
        }
    });

})( jQuery );


(function( $ ) {

    // generate the handlers from the above
    var defaultGetMaxScrollForTransition = function() {
        return $.mobile.getScreenHeight() * 3;
    };

    //transition handler dictionary for 3rd party transitions
    $.mobile.transitionHandlers = {
        "sequential": $.mobile.SerialTransition,
        "simultaneous": $.mobile.ConcurrentTransition
    };

    // Make our transition handler the public default.
    $.mobile.defaultTransitionHandler = $.mobile.transitionHandlers.sequential;

    $.mobile.transitionFallbacks = {};

    // If transition is defined, check if css 3D transforms are supported, and if not, if a fallback is specified
    $.mobile._maybeDegradeTransition = function( transition ) {
        if ( transition && !$.support.cssTransform3d && $.mobile.transitionFallbacks[ transition ] ) {
            transition = $.mobile.transitionFallbacks[ transition ];
        }

        return transition;
    };

    // Set the getMaxScrollForTransition to default if no implementation was set by user
    $.mobile.getMaxScrollForTransition = $.mobile.getMaxScrollForTransition || defaultGetMaxScrollForTransition;

})( jQuery );

/*
* fallback transition for flip in non-3D supporting browsers (which tend to handle complex transitions poorly in general
*/

(function( $, window, undefined ) {

$.mobile.transitionFallbacks.flip = "fade";

})( jQuery, this );

/*
* fallback transition for flow in non-3D supporting browsers (which tend to handle complex transitions poorly in general
*/

(function( $, window, undefined ) {

$.mobile.transitionFallbacks.flow = "fade";

})( jQuery, this );

/*
* fallback transition for pop in non-3D supporting browsers (which tend to handle complex transitions poorly in general
*/

(function( $, window, undefined ) {

$.mobile.transitionFallbacks.pop = "fade";

})( jQuery, this );

/*
* fallback transition for slide in non-3D supporting browsers (which tend to handle complex transitions poorly in general
*/

(function( $, window, undefined ) {

// Use the simultaneous transitions handler for slide transitions
$.mobile.transitionHandlers.slide = $.mobile.transitionHandlers.simultaneous;

// Set the slide transitions's fallback to "fade"
$.mobile.transitionFallbacks.slide = "fade";

})( jQuery, this );

/*
* fallback transition for slidedown in non-3D supporting browsers (which tend to handle complex transitions poorly in general
*/

(function( $, window, undefined ) {

$.mobile.transitionFallbacks.slidedown = "fade";

})( jQuery, this );

/*
* fallback transition for slidefade in non-3D supporting browsers (which tend to handle complex transitions poorly in general
*/

(function( $, window, undefined ) {

// Set the slide transitions's fallback to "fade"
$.mobile.transitionFallbacks.slidefade = "fade";

})( jQuery, this );

/*
* fallback transition for slideup in non-3D supporting browsers (which tend to handle complex transitions poorly in general
*/

(function( $, window, undefined ) {

$.mobile.transitionFallbacks.slideup = "fade";

})( jQuery, this );

/*
* fallback transition for turn in non-3D supporting browsers (which tend to handle complex transitions poorly in general
*/

(function( $, window, undefined ) {

$.mobile.transitionFallbacks.turn = "fade";

})( jQuery, this );


(function( $, undefined ) {

$.mobile.degradeInputs = {
    color: false,
    date: false,
    datetime: false,
    "datetime-local": false,
    email: false,
    month: false,
    number: false,
    range: "number",
    search: "text",
    tel: false,
    time: false,
    url: false,
    week: false
};
// Backcompat remove in 1.5
$.mobile.page.prototype.options.degradeInputs = $.mobile.degradeInputs;

// Auto self-init widgets
$.mobile.degradeInputsWithin = function( target ) {

    target = $( target );

    // Degrade inputs to avoid poorly implemented native functionality
    target.find( "input" ).not( $.mobile.page.prototype.keepNativeSelector() ).each(function() {
        var element = $( this ),
            type = this.getAttribute( "type" ),
            optType = $.mobile.degradeInputs[ type ] || "text",
            html, hasType, findstr, repstr;

        if ( $.mobile.degradeInputs[ type ] ) {
            html = $( "<div>" ).html( element.clone() ).html();
            // In IE browsers, the type sometimes doesn't exist in the cloned markup, so we replace the closing tag instead
            hasType = html.indexOf( " type=" ) > -1;
            findstr = hasType ? /\s+type=["']?\w+['"]?/ : /\/?>/;
            repstr = " type=\"" + optType + "\" data-" + $.mobile.ns + "type=\"" + type + "\"" + ( hasType ? "" : ">" );

            element.replaceWith( html.replace( findstr, repstr ) );
        }
    });

};

})( jQuery );

(function( $, window, undefined ) {

$.widget( "mobile.page", $.mobile.page, {
    options: {

        // Accepts left, right and none
        closeBtn: "left",
        closeBtnText: "Close",
        overlayTheme: "a",
        corners: true,
        dialog: false
    },

    _create: function() {
        this._super();
        if ( this.options.dialog ) {

            $.extend( this, {
                _inner: this.element.children(),
                _headerCloseButton: null
            });

            if ( !this.options.enhanced ) {
                this._setCloseBtn( this.options.closeBtn );
            }
        }
    },

    _enhance: function() {
        this._super();

        // Class the markup for dialog styling and wrap interior
        if ( this.options.dialog ) {
            this.element.addClass( "ui-dialog" )
                .wrapInner( $( "<div/>", {

                    // ARIA role
                    "role" : "dialog",
                    "class" : "ui-dialog-contain ui-overlay-shadow" +
                        ( this.options.corners ? " ui-corner-all" : "" )
                }));
        }
    },

    _setOptions: function( options ) {
        var closeButtonLocation, closeButtonText,
            currentOpts = this.options;

        if ( options.corners !== undefined ) {
            this._inner.toggleClass( "ui-corner-all", !!options.corners );
        }

        if ( options.overlayTheme !== undefined ) {
            if ( $.mobile.activePage[ 0 ] === this.element[ 0 ] ) {
                currentOpts.overlayTheme = options.overlayTheme;
                this._handlePageBeforeShow();
            }
        }

        if ( options.closeBtnText !== undefined ) {
            closeButtonLocation = currentOpts.closeBtn;
            closeButtonText = options.closeBtnText;
        }

        if ( options.closeBtn !== undefined ) {
            closeButtonLocation = options.closeBtn;
        }

        if ( closeButtonLocation ) {
            this._setCloseBtn( closeButtonLocation, closeButtonText );
        }

        this._super( options );
    },

    _handlePageBeforeShow: function () {
        if ( this.options.overlayTheme && this.options.dialog ) {
            this.removeContainerBackground();
            this.setContainerBackground( this.options.overlayTheme );
        } else {
            this._super();
        }
    },

    _setCloseBtn: function( location, text ) {
        var dst,
            btn = this._headerCloseButton;

        // Sanitize value
        location = "left" === location ? "left" : "right" === location ? "right" : "none";

        if ( "none" === location ) {
            if ( btn ) {
                btn.remove();
                btn = null;
            }
        } else if ( btn ) {
            btn.removeClass( "ui-btn-left ui-btn-right" ).addClass( "ui-btn-" + location );
            if ( text ) {
                btn.text( text );
            }
        } else {
            dst = this._inner.find( ":jqmData(role='header')" ).first();
            btn = $( "<a></a>", {
                    "href": "#",
                    "class": "ui-btn ui-corner-all ui-icon-delete ui-btn-icon-notext ui-btn-" + location
                })
                .attr( "data-" + $.mobile.ns + "rel", "back" )
                .text( text || this.options.closeBtnText || "" )
                .prependTo( dst );
        }

        this._headerCloseButton = btn;
    }
});

})( jQuery, this );

(function( $, window, undefined ) {

$.widget( "mobile.dialog", {
    options: {

        // Accepts left, right and none
        closeBtn: "left",
        closeBtnText: "Close",
        overlayTheme: "a",
        corners: true
    },

    // Override the theme set by the page plugin on pageshow
    _handlePageBeforeShow: function() {
        this._isCloseable = true;
        if ( this.options.overlayTheme ) {
            this.element
                .page( "removeContainerBackground" )
                .page( "setContainerBackground", this.options.overlayTheme );
        }
    },

    _handlePageBeforeHide: function() {
        this._isCloseable = false;
    },

    // click and submit events:
    // - clicks and submits should use the closing transition that the dialog
    //   opened with unless a data-transition is specified on the link/form
    // - if the click was on the close button, or the link has a data-rel="back"
    //   it'll go back in history naturally
    _handleVClickSubmit: function( event ) {
        var attrs,
            $target = $( event.target ).closest( event.type === "vclick" ? "a" : "form" );

        if ( $target.length && !$target.jqmData( "transition" ) ) {
            attrs = {};
            attrs[ "data-" + $.mobile.ns + "transition" ] =
                ( $.mobile.navigate.history.getActive() || {} )[ "transition" ] ||
                $.mobile.defaultDialogTransition;
            attrs[ "data-" + $.mobile.ns + "direction" ] = "reverse";
            $target.attr( attrs );
        }
    },

    _create: function() {
        var elem = this.element,
            opts = this.options;

        // Class the markup for dialog styling and wrap interior
        elem.addClass( "ui-dialog" )
            .wrapInner( $( "<div/>", {

                // ARIA role
                "role" : "dialog",
                "class" : "ui-dialog-contain ui-overlay-shadow" +
                    ( !!opts.corners ? " ui-corner-all" : "" )
            }));

        $.extend( this, {
            _isCloseable: false,
            _inner: elem.children(),
            _headerCloseButton: null
        });

        this._on( elem, {
            vclick: "_handleVClickSubmit",
            submit: "_handleVClickSubmit",
            pagebeforeshow: "_handlePageBeforeShow",
            pagebeforehide: "_handlePageBeforeHide"
        });

        this._setCloseBtn( opts.closeBtn );
    },

    _setOptions: function( options ) {
        var closeButtonLocation, closeButtonText,
            currentOpts = this.options;

        if ( options.corners !== undefined ) {
            this._inner.toggleClass( "ui-corner-all", !!options.corners );
        }

        if ( options.overlayTheme !== undefined ) {
            if ( $.mobile.activePage[ 0 ] === this.element[ 0 ] ) {
                currentOpts.overlayTheme = options.overlayTheme;
                this._handlePageBeforeShow();
            }
        }

        if ( options.closeBtnText !== undefined ) {
            closeButtonLocation = currentOpts.closeBtn;
            closeButtonText = options.closeBtnText;
        }

        if ( options.closeBtn !== undefined ) {
            closeButtonLocation = options.closeBtn;
        }

        if ( closeButtonLocation ) {
            this._setCloseBtn( closeButtonLocation, closeButtonText );
        }

        this._super( options );
    },

    _setCloseBtn: function( location, text ) {
        var dst,
            btn = this._headerCloseButton;

        // Sanitize value
        location = "left" === location ? "left" : "right" === location ? "right" : "none";

        if ( "none" === location ) {
            if ( btn ) {
                btn.remove();
                btn = null;
            }
        } else if ( btn ) {
            btn.removeClass( "ui-btn-left ui-btn-right" ).addClass( "ui-btn-" + location );
            if ( text ) {
                btn.text( text );
            }
        } else {
            dst = this._inner.find( ":jqmData(role='header')" ).first();
            btn = $( "<a></a>", {
                    "role": "button",
                    "href": "#",
                    "class": "ui-btn ui-corner-all ui-icon-delete ui-btn-icon-notext ui-btn-" + location
                })
                .text( text || this.options.closeBtnText || "" )
                .prependTo( dst );
            this._on( btn, { click: "close" } );
        }

        this._headerCloseButton = btn;
    },

    // Close method goes back in history
    close: function() {
        var hist = $.mobile.navigate.history;

        if ( this._isCloseable ) {
            this._isCloseable = false;
            // If the hash listening is enabled and there is at least one preceding history
            // entry it's ok to go back. Initial pages with the dialog hash state are an example
            // where the stack check is necessary
            if ( $.mobile.hashListeningEnabled && hist.activeIndex > 0 ) {
                $.mobile.back();
            } else {
                $.mobile.pageContainer.pagecontainer( "back" );
            }
        }
    }
});

})( jQuery, this );

(function( $, undefined ) {

var rInitialLetter = /([A-Z])/g,

    // Construct iconpos class from iconpos value
    iconposClass = function( iconpos ) {
        return ( "ui-btn-icon-" + ( iconpos === null ? "left" : iconpos ) );
    };

$.widget( "mobile.collapsible", {
    options: {
        enhanced: false,
        expandCueText: null,
        collapseCueText: null,
        collapsed: true,
        heading: "h1,h2,h3,h4,h5,h6,legend",
        collapsedIcon: null,
        expandedIcon: null,
        iconpos: null,
        theme: null,
        contentTheme: null,
        inset: null,
        corners: null,
        mini: null
    },

    _create: function() {
        var elem = this.element,
            ui = {
                accordion: elem
                    .closest( ":jqmData(role='collapsible-set')," +
                        ":jqmData(role='collapsibleset')" +
                        ( $.mobile.collapsibleset ? ", :mobile-collapsibleset" :
                            "" ) )
                    .addClass( "ui-collapsible-set" )
            };

        this._ui = ui;
        this._renderedOptions = this._getOptions( this.options );

        if ( this.options.enhanced ) {
            ui.heading = this.element.children( ".ui-collapsible-heading" );
            ui.content = ui.heading.next();
            ui.anchor = ui.heading.children();
            ui.status = ui.anchor.children( ".ui-collapsible-heading-status" );
        } else {
            this._enhance( elem, ui );
        }

        this._on( ui.heading, {
            "tap": function() {
                ui.heading.find( "a" ).first().addClass( $.mobile.activeBtnClass );
            },

            "click": function( event ) {
                this._handleExpandCollapse( !ui.heading.hasClass( "ui-collapsible-heading-collapsed" ) );
                event.preventDefault();
                event.stopPropagation();
            }
        });
    },

    // Adjust the keys inside options for inherited values
    _getOptions: function( options ) {
        var key,
            accordion = this._ui.accordion,
            accordionWidget = this._ui.accordionWidget;

        // Copy options
        options = $.extend( {}, options );

        if ( accordion.length && !accordionWidget ) {
            this._ui.accordionWidget =
            accordionWidget = accordion.data( "mobile-collapsibleset" );
        }

        for ( key in options ) {

            // Retrieve the option value first from the options object passed in and, if
            // null, from the parent accordion or, if that's null too, or if there's no
            // parent accordion, then from the defaults.
            options[ key ] =
                ( options[ key ] != null ) ? options[ key ] :
                ( accordionWidget ) ? accordionWidget.options[ key ] :
                accordion.length ? $.mobile.getAttribute( accordion[ 0 ],
                    key.replace( rInitialLetter, "-$1" ).toLowerCase() ):
                null;

            if ( null == options[ key ] ) {
                options[ key ] = $.mobile.collapsible.defaults[ key ];
            }
        }

        return options;
    },

    _themeClassFromOption: function( prefix, value ) {
        return ( value ? ( value === "none" ? "" : prefix + value ) : "" );
    },

    _enhance: function( elem, ui ) {
        var iconclass,
            opts = this._renderedOptions,
            contentThemeClass = this._themeClassFromOption( "ui-body-", opts.contentTheme );

        elem.addClass( "ui-collapsible " +
            ( opts.inset ? "ui-collapsible-inset " : "" ) +
            ( opts.inset && opts.corners ? "ui-corner-all " : "" ) +
            ( contentThemeClass ? "ui-collapsible-themed-content " : "" ) );
        ui.originalHeading = elem.children( this.options.heading ).first(),
        ui.content = elem
            .wrapInner( "<div " +
                "class='ui-collapsible-content " +
                contentThemeClass + "'></div>" )
            .children( ".ui-collapsible-content" ),
        ui.heading = ui.originalHeading;

        // Replace collapsibleHeading if it's a legend
        if ( ui.heading.is( "legend" ) ) {
            ui.heading = $( "<div role='heading'>"+ ui.heading.html() +"</div>" );
            ui.placeholder = $( "<div><!-- placeholder for legend --></div>" ).insertBefore( ui.originalHeading );
            ui.originalHeading.remove();
        }

        iconclass = ( opts.collapsed ? ( opts.collapsedIcon ? "ui-icon-" + opts.collapsedIcon : "" ):
            ( opts.expandedIcon ? "ui-icon-" + opts.expandedIcon : "" ) );

        ui.status = $( "<span class='ui-collapsible-heading-status'></span>" );
        ui.anchor = ui.heading
            .detach()
            //modify markup & attributes
            .addClass( "ui-collapsible-heading" )
            .append( ui.status )
            .wrapInner( "<a href='#' class='ui-collapsible-heading-toggle'></a>" )
            .find( "a" )
                .first()
                .addClass( "ui-btn " +
                    ( iconclass ? iconclass + " " : "" ) +
                    ( iconclass ? iconposClass( opts.iconpos ) +
                        " " : "" ) +
                    this._themeClassFromOption( "ui-btn-", opts.theme ) + " " +
                    ( opts.mini ? "ui-mini " : "" ) );

        //drop heading in before content
        ui.heading.insertBefore( ui.content );

        this._handleExpandCollapse( this.options.collapsed );

        return ui;
    },

    refresh: function() {
        this._applyOptions( this.options );
        this._renderedOptions = this._getOptions( this.options );
    },

    _applyOptions: function( options ) {
        var isCollapsed, newTheme, oldTheme, hasCorners, hasIcon,
            elem = this.element,
            currentOpts = this._renderedOptions,
            ui = this._ui,
            anchor = ui.anchor,
            status = ui.status,
            opts = this._getOptions( options );

        // First and foremost we need to make sure the collapsible is in the proper
        // state, in case somebody decided to change the collapsed option at the
        // same time as another option
        if ( options.collapsed !== undefined ) {
            this._handleExpandCollapse( options.collapsed );
        }

        isCollapsed = elem.hasClass( "ui-collapsible-collapsed" );

        // We only need to apply the cue text for the current state right away.
        // The cue text for the alternate state will be stored in the options
        // and applied the next time the collapsible's state is toggled
        if ( isCollapsed ) {
            if ( opts.expandCueText !== undefined ) {
                status.text( opts.expandCueText );
            }
        } else {
            if ( opts.collapseCueText !== undefined ) {
                status.text( opts.collapseCueText );
            }
        }

        // Update icon

        // Is it supposed to have an icon?
        hasIcon =

            // If the collapsedIcon is being set, consult that
            ( opts.collapsedIcon !== undefined ? opts.collapsedIcon !== false :

                // Otherwise consult the existing option value
                currentOpts.collapsedIcon !== false );


        // If any icon-related options have changed, make sure the new icon
        // state is reflected by first removing all icon-related classes
        // reflecting the current state and then adding all icon-related
        // classes for the new state
        if ( !( opts.iconpos === undefined &&
            opts.collapsedIcon === undefined &&
            opts.expandedIcon === undefined ) ) {

            // Remove all current icon-related classes
            anchor.removeClass( [ iconposClass( currentOpts.iconpos ) ]
                .concat( ( currentOpts.expandedIcon ?
                    [ "ui-icon-" + currentOpts.expandedIcon ] : [] ) )
                .concat( ( currentOpts.collapsedIcon ?
                    [ "ui-icon-" + currentOpts.collapsedIcon ] : [] ) )
                .join( " " ) );

            // Add new classes if an icon is supposed to be present
            if ( hasIcon ) {
                anchor.addClass(
                    [ iconposClass( opts.iconpos !== undefined ?
                        opts.iconpos : currentOpts.iconpos ) ]
                        .concat( isCollapsed ?
                            [ "ui-icon-" + ( opts.collapsedIcon !== undefined ?
                                opts.collapsedIcon :
                                currentOpts.collapsedIcon ) ] :
                            [ "ui-icon-" + ( opts.expandedIcon !== undefined ?
                                opts.expandedIcon :
                                currentOpts.expandedIcon ) ] )
                        .join( " " ) );
            }
        }

        if ( opts.theme !== undefined ) {
            oldTheme = this._themeClassFromOption( "ui-btn-", currentOpts.theme );
            newTheme = this._themeClassFromOption( "ui-btn-", opts.theme );
            anchor.removeClass( oldTheme ).addClass( newTheme );
        }

        if ( opts.contentTheme !== undefined ) {
            oldTheme = this._themeClassFromOption( "ui-body-",
                currentOpts.contentTheme );
            newTheme = this._themeClassFromOption( "ui-body-",
                opts.contentTheme );
            ui.content.removeClass( oldTheme ).addClass( newTheme );
        }

        if ( opts.inset !== undefined ) {
            elem.toggleClass( "ui-collapsible-inset", opts.inset );
            hasCorners = !!( opts.inset && ( opts.corners || currentOpts.corners ) );
        }

        if ( opts.corners !== undefined ) {
            hasCorners = !!( opts.corners && ( opts.inset || currentOpts.inset ) );
        }

        if ( hasCorners !== undefined ) {
            elem.toggleClass( "ui-corner-all", hasCorners );
        }

        if ( opts.mini !== undefined ) {
            anchor.toggleClass( "ui-mini", opts.mini );
        }
    },

    _setOptions: function( options ) {
        this._applyOptions( options );
        this._super( options );
        this._renderedOptions = this._getOptions( this.options );
    },

    _handleExpandCollapse: function( isCollapse ) {
        var opts = this._renderedOptions,
            ui = this._ui;

        ui.status.text( isCollapse ? opts.expandCueText : opts.collapseCueText );
        ui.heading
            .toggleClass( "ui-collapsible-heading-collapsed", isCollapse )
            .find( "a" ).first()
            .toggleClass( "ui-icon-" + opts.expandedIcon, !isCollapse )

            // logic or cause same icon for expanded/collapsed state would remove the ui-icon-class
            .toggleClass( "ui-icon-" + opts.collapsedIcon, ( isCollapse || opts.expandedIcon === opts.collapsedIcon ) )
            .removeClass( $.mobile.activeBtnClass );

        this.element.toggleClass( "ui-collapsible-collapsed", isCollapse );
        ui.content
            .toggleClass( "ui-collapsible-content-collapsed", isCollapse )
            .attr( "aria-hidden", isCollapse )
            .trigger( "updatelayout" );
        this.options.collapsed = isCollapse;
        this._trigger( isCollapse ? "collapse" : "expand" );
    },

    expand: function() {
        this._handleExpandCollapse( false );
    },

    collapse: function() {
        this._handleExpandCollapse( true );
    },

    _destroy: function() {
        var ui = this._ui,
            opts = this.options;

        if ( opts.enhanced ) {
            return;
        }

        if ( ui.placeholder ) {
            ui.originalHeading.insertBefore( ui.placeholder );
            ui.placeholder.remove();
            ui.heading.remove();
        } else {
            ui.status.remove();
            ui.heading
                .removeClass( "ui-collapsible-heading ui-collapsible-heading-collapsed" )
                .children()
                    .contents()
                        .unwrap();
        }

        ui.anchor.contents().unwrap();
        ui.content.contents().unwrap();
        this.element
            .removeClass( "ui-collapsible ui-collapsible-collapsed " +
                "ui-collapsible-themed-content ui-collapsible-inset ui-corner-all" );
    }
});

// Defaults to be used by all instances of collapsible if per-instance values
// are unset or if nothing is specified by way of inheritance from an accordion.
// Note that this hash does not contain options "collapsed" or "heading",
// because those are not inheritable.
$.mobile.collapsible.defaults = {
    expandCueText: " click to expand contents",
    collapseCueText: " click to collapse contents",
    collapsedIcon: "plus",
    contentTheme: "inherit",
    expandedIcon: "minus",
    iconpos: "left",
    inset: true,
    corners: true,
    theme: "inherit",
    mini: false
};

})( jQuery );

(function( $, undefined ) {

var uiScreenHiddenRegex = /\bui-screen-hidden\b/;
function noHiddenClass( elements ) {
    var index,
        length = elements.length,
        result = [];

    for ( index = 0; index < length; index++ ) {
        if ( !elements[ index ].className.match( uiScreenHiddenRegex ) ) {
            result.push( elements[ index ] );
        }
    }

    return $( result );
}

$.mobile.behaviors.addFirstLastClasses = {
    _getVisibles: function( $els, create ) {
        var visibles;

        if ( create ) {
            visibles = noHiddenClass( $els );
        } else {
            visibles = $els.filter( ":visible" );
            if ( visibles.length === 0 ) {
                visibles = noHiddenClass( $els );
            }
        }

        return visibles;
    },

    _addFirstLastClasses: function( $els, $visibles, create ) {
        $els.removeClass( "ui-first-child ui-last-child" );
        $visibles.eq( 0 ).addClass( "ui-first-child" ).end().last().addClass( "ui-last-child" );
        if ( !create ) {
            this.element.trigger( "updatelayout" );
        }
    },

    _removeFirstLastClasses: function( $els ) {
        $els.removeClass( "ui-first-child ui-last-child" );
    }
};

})( jQuery );

(function( $, undefined ) {

var childCollapsiblesSelector = ":mobile-collapsible, " + $.mobile.collapsible.initSelector;

$.widget( "mobile.collapsibleset", $.extend( {

    // The initSelector is deprecated as of 1.4.0. In 1.5.0 we will use
    // :jqmData(role='collapsibleset') which will allow us to get rid of the line
    // below altogether, because the autoinit will generate such an initSelector
    initSelector: ":jqmData(role='collapsible-set'),:jqmData(role='collapsibleset')",

    options: $.extend( {
        enhanced: false
    }, $.mobile.collapsible.defaults ),

    _handleCollapsibleExpand: function( event ) {
        var closestCollapsible = $( event.target ).closest( ".ui-collapsible" );

        if ( closestCollapsible.parent().is( ":mobile-collapsibleset, :jqmData(role='collapsible-set')" ) ) {
            closestCollapsible
                .siblings( ".ui-collapsible:not(.ui-collapsible-collapsed)" )
                .collapsible( "collapse" );
        }
    },

    _create: function() {
        var elem = this.element,
            opts = this.options;

        $.extend( this, {
            _classes: ""
        });

        if ( !opts.enhanced ) {
            elem.addClass( "ui-collapsible-set " +
                this._themeClassFromOption( "ui-group-theme-", opts.theme ) + " " +
                ( opts.corners && opts.inset ? "ui-corner-all " : "" ) );
            this.element.find( $.mobile.collapsible.initSelector ).collapsible();
        }

        this._on( elem, { collapsibleexpand: "_handleCollapsibleExpand" } );
    },

    _themeClassFromOption: function( prefix, value ) {
        return ( value ? ( value === "none" ? "" : prefix + value ) : "" );
    },

    _init: function() {
        this._refresh( true );

        // Because the corners are handled by the collapsible itself and the default state is collapsed
        // That was causing https://github.com/jquery/jquery-mobile/issues/4116
        this.element
            .children( childCollapsiblesSelector )
            .filter( ":jqmData(collapsed='false')" )
            .collapsible( "expand" );
    },

    _setOptions: function( options ) {
        var ret, hasCorners,
            elem = this.element,
            themeClass = this._themeClassFromOption( "ui-group-theme-", options.theme );

        if ( themeClass ) {
            elem
                .removeClass( this._themeClassFromOption( "ui-group-theme-", this.options.theme ) )
                .addClass( themeClass );
        }

        if ( options.inset !== undefined ) {
            hasCorners = !!( options.inset && ( options.corners || this.options.corners ) );
        }

        if ( options.corners !== undefined ) {
            hasCorners = !!( options.corners && ( options.inset || this.options.inset ) );
        }

        if ( hasCorners !== undefined ) {
            elem.toggleClass( "ui-corner-all", hasCorners );
        }

        ret = this._super( options );
        this.element.children( ":mobile-collapsible" ).collapsible( "refresh" );
        return ret;
    },

    _destroy: function() {
        var el = this.element;

        this._removeFirstLastClasses( el.children( childCollapsiblesSelector ) );
        el
            .removeClass( "ui-collapsible-set ui-corner-all " +
                this._themeClassFromOption( "ui-group-theme-", this.options.theme ) )
            .children( ":mobile-collapsible" )
            .collapsible( "destroy" );
    },

    _refresh: function( create ) {
        var collapsiblesInSet = this.element.children( childCollapsiblesSelector );

        this.element.find( $.mobile.collapsible.initSelector ).not( ".ui-collapsible" ).collapsible();

        this._addFirstLastClasses( collapsiblesInSet, this._getVisibles( collapsiblesInSet, create ), create );
    },

    refresh: function() {
        this._refresh( false );
    }
}, $.mobile.behaviors.addFirstLastClasses ) );

})( jQuery );

(function( $, undefined ) {

// Deprecated in 1.4
$.fn.fieldcontain = function(/* options */) {
    return this.addClass( "ui-field-contain" );
};

})( jQuery );

(function( $, undefined ) {

$.fn.grid = function( options ) {
    return this.each(function() {

        var $this = $( this ),
            o = $.extend({
                grid: null
            }, options ),
            $kids = $this.children(),
            gridCols = { solo:1, a:2, b:3, c:4, d:5 },
            grid = o.grid,
            iterator,
            letter;

            if ( !grid ) {
                if ( $kids.length <= 5 ) {
                    for ( letter in gridCols ) {
                        if ( gridCols[ letter ] === $kids.length ) {
                            grid = letter;
                        }
                    }
                } else {
                    grid = "a";
                    $this.addClass( "ui-grid-duo" );
                }
            }
            iterator = gridCols[grid];

        $this.addClass( "ui-grid-" + grid );

        $kids.filter( ":nth-child(" + iterator + "n+1)" ).addClass( "ui-block-a" );

        if ( iterator > 1 ) {
            $kids.filter( ":nth-child(" + iterator + "n+2)" ).addClass( "ui-block-b" );
        }
        if ( iterator > 2 ) {
            $kids.filter( ":nth-child(" + iterator + "n+3)" ).addClass( "ui-block-c" );
        }
        if ( iterator > 3 ) {
            $kids.filter( ":nth-child(" + iterator + "n+4)" ).addClass( "ui-block-d" );
        }
        if ( iterator > 4 ) {
            $kids.filter( ":nth-child(" + iterator + "n+5)" ).addClass( "ui-block-e" );
        }
    });
};
})( jQuery );

(function( $, undefined ) {

$.widget( "mobile.navbar", {
    options: {
        iconpos: "top",
        grid: null
    },

    _create: function() {

        var $navbar = this.element,
            $navbtns = $navbar.find( "a, button" ),
            iconpos = $navbtns.filter( ":jqmData(icon)" ).length ? this.options.iconpos : undefined;

        $navbar.addClass( "ui-navbar" )
            .attr( "role", "navigation" )
            .find( "ul" )
            .jqmEnhanceable()
            .grid({ grid: this.options.grid });

        $navbtns
            .each( function() {
                var icon = $.mobile.getAttribute( this, "icon" ),
                    theme = $.mobile.getAttribute( this, "theme" ),
                    classes = "ui-btn";

                if ( theme ) {
                    classes += " ui-btn-" + theme;
                }
                if ( icon ) {
                    classes += " ui-icon-" + icon + " ui-btn-icon-" + iconpos;
                }
                $( this ).addClass( classes );
            });

        $navbar.delegate( "a", "vclick", function( /* event */ ) {
            var activeBtn = $( this );

            if ( !( activeBtn.hasClass( "ui-state-disabled" ) ||

                // DEPRECATED as of 1.4.0 - remove after 1.4.0 release
                // only ui-state-disabled should be present thereafter
                activeBtn.hasClass( "ui-disabled" ) ||
                activeBtn.hasClass( $.mobile.activeBtnClass ) ) ) {

                $navbtns.removeClass( $.mobile.activeBtnClass );
                activeBtn.addClass( $.mobile.activeBtnClass );

                // The code below is a workaround to fix #1181
                $( document ).one( "pagehide", function() {
                    activeBtn.removeClass( $.mobile.activeBtnClass );
                });
            }
        });

        // Buttons in the navbar with ui-state-persist class should regain their active state before page show
        $navbar.closest( ".ui-page" ).bind( "pagebeforeshow", function() {
            $navbtns.filter( ".ui-state-persist" ).addClass( $.mobile.activeBtnClass );
        });
    }
});

})( jQuery );

(function( $, undefined ) {

var getAttr = $.mobile.getAttribute;

$.widget( "mobile.listview", $.extend( {

    options: {
        theme: null,
        countTheme: null, /* Deprecated in 1.4 */
        dividerTheme: null,
        icon: "carat-r",
        splitIcon: "carat-r",
        splitTheme: null,
        corners: true,
        shadow: true,
        inset: false
    },

    _create: function() {
        var t = this,
            listviewClasses = "";

        listviewClasses += t.options.inset ? " ui-listview-inset" : "";

        if ( !!t.options.inset ) {
            listviewClasses += t.options.corners ? " ui-corner-all" : "";
            listviewClasses += t.options.shadow ? " ui-shadow" : "";
        }

        // create listview markup
        t.element.addClass( " ui-listview" + listviewClasses );

        t.refresh( true );
    },

    // TODO: Remove in 1.5
    _findFirstElementByTagName: function( ele, nextProp, lcName, ucName ) {
        var dict = {};
        dict[ lcName ] = dict[ ucName ] = true;
        while ( ele ) {
            if ( dict[ ele.nodeName ] ) {
                return ele;
            }
            ele = ele[ nextProp ];
        }
        return null;
    },
    // TODO: Remove in 1.5
    _addThumbClasses: function( containers ) {
        var i, img, len = containers.length;
        for ( i = 0; i < len; i++ ) {
            img = $( this._findFirstElementByTagName( containers[ i ].firstChild, "nextSibling", "img", "IMG" ) );
            if ( img.length ) {
                $( this._findFirstElementByTagName( img[ 0 ].parentNode, "parentNode", "li", "LI" ) ).addClass( img.hasClass( "ui-li-icon" ) ? "ui-li-has-icon" : "ui-li-has-thumb" );
            }
        }
    },

    _getChildrenByTagName: function( ele, lcName, ucName ) {
        var results = [],
            dict = {};
        dict[ lcName ] = dict[ ucName ] = true;
        ele = ele.firstChild;
        while ( ele ) {
            if ( dict[ ele.nodeName ] ) {
                results.push( ele );
            }
            ele = ele.nextSibling;
        }
        return $( results );
    },

    _beforeListviewRefresh: $.noop,
    _afterListviewRefresh: $.noop,

    refresh: function( create ) {
        var buttonClass, pos, numli, item, itemClass, itemTheme, itemIcon, icon, a,
            isDivider, startCount, newStartCount, value, last, splittheme, splitThemeClass, spliticon,
            altButtonClass, dividerTheme, li,
            o = this.options,
            $list = this.element,
            ol = !!$.nodeName( $list[ 0 ], "ol" ),
            start = $list.attr( "start" ),
            itemClassDict = {},
            countBubbles = $list.find( ".ui-li-count" ),
            countTheme = getAttr( $list[ 0 ], "counttheme" ) || this.options.countTheme,
            countThemeClass = countTheme ? "ui-body-" + countTheme : "ui-body-inherit";

        if ( o.theme ) {
            $list.addClass( "ui-group-theme-" + o.theme );
        }

        // Check if a start attribute has been set while taking a value of 0 into account
        if ( ol && ( start || start === 0 ) ) {
            startCount = parseInt( start, 10 ) - 1;
            $list.css( "counter-reset", "listnumbering " + startCount );
        }

        this._beforeListviewRefresh();

        li = this._getChildrenByTagName( $list[ 0 ], "li", "LI" );

        for ( pos = 0, numli = li.length; pos < numli; pos++ ) {
            item = li.eq( pos );
            itemClass = "";

            if ( create || item[ 0 ].className.search( /\bui-li-static\b|\bui-li-divider\b/ ) < 0 ) {
                a = this._getChildrenByTagName( item[ 0 ], "a", "A" );
                isDivider = ( getAttr( item[ 0 ], "role" ) === "list-divider" );
                value = item.attr( "value" );
                itemTheme = getAttr( item[ 0 ], "theme" );

                if ( a.length && a[ 0 ].className.search( /\bui-btn\b/ ) < 0 && !isDivider ) {
                    itemIcon = getAttr( item[ 0 ], "icon" );
                    icon = ( itemIcon === false ) ? false : ( itemIcon || o.icon );

                    // TODO: Remove in 1.5 together with links.js (links.js / .ui-link deprecated in 1.4)
                    a.removeClass( "ui-link" );

                    buttonClass = "ui-btn";

                    if ( itemTheme ) {
                        buttonClass += " ui-btn-" + itemTheme;
                    }

                    if ( a.length > 1 ) {
                        itemClass = "ui-li-has-alt";

                        last = a.last();
                        splittheme = getAttr( last[ 0 ], "theme" ) || o.splitTheme || getAttr( item[ 0 ], "theme", true );
                        splitThemeClass = splittheme ? " ui-btn-" + splittheme : "";
                        spliticon = getAttr( last[ 0 ], "icon" ) || getAttr( item[ 0 ], "icon" ) || o.splitIcon;
                        altButtonClass = "ui-btn ui-btn-icon-notext ui-icon-" + spliticon + splitThemeClass;

                        last
                            .attr( "title", $.trim( last.getEncodedText() ) )
                            .addClass( altButtonClass )
                            .empty();

                        // Reduce to the first anchor, because only the first gets the buttonClass
                        a = a.first();
                    } else if ( icon ) {
                        buttonClass += " ui-btn-icon-right ui-icon-" + icon;
                    }

                    // Apply buttonClass to the (first) anchor
                    a.addClass( buttonClass );
                } else if ( isDivider ) {
                    dividerTheme = ( getAttr( item[ 0 ], "theme" ) || o.dividerTheme || o.theme );

                    itemClass = "ui-li-divider ui-bar-" + ( dividerTheme ? dividerTheme : "inherit" );

                    item.attr( "role", "heading" );
                } else if ( a.length <= 0 ) {
                    itemClass = "ui-li-static ui-body-" + ( itemTheme ? itemTheme : "inherit" );
                }
                if ( ol && value ) {
                    newStartCount = parseInt( value , 10 ) - 1;

                    item.css( "counter-reset", "listnumbering " + newStartCount );
                }
            }

            // Instead of setting item class directly on the list item
            // at this point in time, push the item into a dictionary
            // that tells us what class to set on it so we can do this after this
            // processing loop is finished.

            if ( !itemClassDict[ itemClass ] ) {
                itemClassDict[ itemClass ] = [];
            }

            itemClassDict[ itemClass ].push( item[ 0 ] );
        }

        // Set the appropriate listview item classes on each list item.
        // The main reason we didn't do this
        // in the for-loop above is because we can eliminate per-item function overhead
        // by calling addClass() and children() once or twice afterwards. This
        // can give us a significant boost on platforms like WP7.5.

        for ( itemClass in itemClassDict ) {
            $( itemClassDict[ itemClass ] ).addClass( itemClass );
        }

        countBubbles.each( function() {
            $( this ).closest( "li" ).addClass( "ui-li-has-count" );
        });
        if ( countThemeClass ) {
            countBubbles.not( "[class*='ui-body-']" ).addClass( countThemeClass );
        }

        // Deprecated in 1.4. From 1.5 you have to add class ui-li-has-thumb or ui-li-has-icon to the LI.
        this._addThumbClasses( li );
        this._addThumbClasses( li.find( ".ui-btn" ) );

        this._afterListviewRefresh();

        this._addFirstLastClasses( li, this._getVisibles( li, create ), create );
    }
}, $.mobile.behaviors.addFirstLastClasses ) );

})( jQuery );

(function( $, undefined ) {

function defaultAutodividersSelector( elt ) {
    // look for the text in the given element
    var text = $.trim( elt.text() ) || null;

    if ( !text ) {
        return null;
    }

    // create the text for the divider (first uppercased letter)
    text = text.slice( 0, 1 ).toUpperCase();

    return text;
}

$.widget( "mobile.listview", $.mobile.listview, {
    options: {
        autodividers: false,
        autodividersSelector: defaultAutodividersSelector
    },

    _beforeListviewRefresh: function() {
        if ( this.options.autodividers ) {
            this._replaceDividers();
            this._superApply( arguments );
        }
    },

    _replaceDividers: function() {
        var i, lis, li, dividerText,
            lastDividerText = null,
            list = this.element,
            divider;

        list.children( "li:jqmData(role='list-divider')" ).remove();

        lis = list.children( "li" );

        for ( i = 0; i < lis.length ; i++ ) {
            li = lis[ i ];
            dividerText = this.options.autodividersSelector( $( li ) );

            if ( dividerText && lastDividerText !== dividerText ) {
                divider = document.createElement( "li" );
                divider.appendChild( document.createTextNode( dividerText ) );
                divider.setAttribute( "data-" + $.mobile.ns + "role", "list-divider" );
                li.parentNode.insertBefore( divider, li );
            }

            lastDividerText = dividerText;
        }
    }
});

})( jQuery );

(function( $, undefined ) {

var rdivider = /(^|\s)ui-li-divider($|\s)/,
    rhidden = /(^|\s)ui-screen-hidden($|\s)/;

$.widget( "mobile.listview", $.mobile.listview, {
    options: {
        hideDividers: false
    },

    _afterListviewRefresh: function() {
        var items, idx, item, hideDivider = true;

        this._superApply( arguments );

        if ( this.options.hideDividers ) {
            items = this._getChildrenByTagName( this.element[ 0 ], "li", "LI" );
            for ( idx = items.length - 1 ; idx > -1 ; idx-- ) {
                item = items[ idx ];
                if ( item.className.match( rdivider ) ) {
                    if ( hideDivider ) {
                        item.className = item.className + " ui-screen-hidden";
                    }
                    hideDivider = true;
                } else {
                    if ( !item.className.match( rhidden ) ) {
                        hideDivider = false;
                    }
                }
            }
        }
    }
});

})( jQuery );

(function( $, undefined ) {

$.mobile.nojs = function( target ) {
    $( ":jqmData(role='nojs')", target ).addClass( "ui-nojs" );
};

})( jQuery );

(function( $, undefined ) {

$.mobile.behaviors.formReset = {
    _handleFormReset: function() {
        this._on( this.element.closest( "form" ), {
            reset: function() {
                this._delay( "_reset" );
            }
        });
    }
};

})( jQuery );

/*
* "checkboxradio" plugin
*/

(function( $, undefined ) {

var escapeId = $.mobile.path.hashToSelector;

$.widget( "mobile.checkboxradio", $.extend( {

    initSelector: "input:not( :jqmData(role='flipswitch' ) )[type='checkbox'],input[type='radio']:not( :jqmData(role='flipswitch' ))",

    options: {
        theme: "inherit",
        mini: false,
        wrapperClass: null,
        enhanced: false,
        iconpos: "left"

    },
    _create: function() {
        var input = this.element,
            o = this.options,
            inheritAttr = function( input, dataAttr ) {
                return input.jqmData( dataAttr ) ||
                    input.closest( "form, fieldset" ).jqmData( dataAttr );
            },
            label = this.options.enhanced ?
                {
                    element: this.element.siblings( "label" ),
                    isParent: false
                } :
                this._findLabel(),
            inputtype = input[0].type,
            checkedClass = "ui-" + inputtype + "-on",
            uncheckedClass = "ui-" + inputtype + "-off";

        if ( inputtype !== "checkbox" && inputtype !== "radio" ) {
            return;
        }

        if ( this.element[0].disabled ) {
            this.options.disabled = true;
        }

        o.iconpos = inheritAttr( input, "iconpos" ) ||
            label.element.attr( "data-" + $.mobile.ns + "iconpos" ) || o.iconpos,

        // Establish options
        o.mini = inheritAttr( input, "mini" ) || o.mini;

        // Expose for other methods
        $.extend( this, {
            input: input,
            label: label.element,
            labelIsParent: label.isParent,
            inputtype: inputtype,
            checkedClass: checkedClass,
            uncheckedClass: uncheckedClass
        });

        if ( !this.options.enhanced ) {
            this._enhance();
        }

        this._on( label.element, {
            vmouseover: "_handleLabelVMouseOver",
            vclick: "_handleLabelVClick"
        });

        this._on( input, {
            vmousedown: "_cacheVals",
            vclick: "_handleInputVClick",
            focus: "_handleInputFocus",
            blur: "_handleInputBlur"
        });

        this._handleFormReset();
        this.refresh();
    },

    _findLabel: function() {
        var parentLabel, label, isParent,
            input = this.element,
            labelsList = input[ 0 ].labels;

        if( labelsList && labelsList.length > 0 ) {
            label = $( labelsList[ 0 ] );
            isParent = $.contains( label[ 0 ], input[ 0 ] );
        } else {
            parentLabel = input.closest( "label" );
            isParent = ( parentLabel.length > 0 );

            // NOTE: Windows Phone could not find the label through a selector
            // filter works though.
            label = isParent ? parentLabel :
                $( this.document[ 0 ].getElementsByTagName( "label" ) )
                    .filter( "[for='" + escapeId( input[ 0 ].id ) + "']" )
                    .first();
        }

        return {
            element: label,
            isParent: isParent
        };
    },

    _enhance: function() {
        this.label.addClass( "ui-btn ui-corner-all");

        if ( this.labelIsParent ) {
            this.input.add( this.label ).wrapAll( this._wrapper() );
        } else {
            //this.element.replaceWith( this.input.add( this.label ).wrapAll( this._wrapper() ) );
            this.element.wrap( this._wrapper() );
            this.element.parent().prepend( this.label );
        }

        // Wrap the input + label in a div

        this._setOptions({
            "theme": this.options.theme,
            "iconpos": this.options.iconpos,
            "mini": this.options.mini
        });

    },

    _wrapper: function() {
        return $( "<div class='"  +
            ( this.options.wrapperClass ? this.options.wrapperClass : "" ) +
            " ui-" + this.inputtype +
            ( this.options.disabled ? " ui-state-disabled" : "" ) + "' ></div>" );
    },

    _handleInputFocus: function() {
        this.label.addClass( $.mobile.focusClass );
    },

    _handleInputBlur: function() {
        this.label.removeClass( $.mobile.focusClass );
    },

    _handleInputVClick: function() {
        // Adds checked attribute to checked input when keyboard is used
        this.element.prop( "checked", this.element.is( ":checked" ) );
        this._getInputSet().not( this.element ).prop( "checked", false );
        this._updateAll( true );
    },

    _handleLabelVMouseOver: function( event ) {
        if ( this.label.parent().hasClass( "ui-state-disabled" ) ) {
            event.stopPropagation();
        }
    },

    _handleLabelVClick: function( event ) {
        var input = this.element;

        if ( input.is( ":disabled" ) ) {
            event.preventDefault();
            return;
        }

        this._cacheVals();

        input.prop( "checked", this.inputtype === "radio" && true || !input.prop( "checked" ) );

        // trigger click handler's bound directly to the input as a substitute for
        // how label clicks behave normally in the browsers
        // TODO: it would be nice to let the browser's handle the clicks and pass them
        //       through to the associate input. we can swallow that click at the parent
        //       wrapper element level
        input.triggerHandler( "click" );

        // Input set for common radio buttons will contain all the radio
        // buttons, but will not for checkboxes. clearing the checked status
        // of other radios ensures the active button state is applied properly
        this._getInputSet().not( input ).prop( "checked", false );

        this._updateAll();
        return false;
    },

    _cacheVals: function() {
        this._getInputSet().each( function() {
            $( this ).attr("data-" + $.mobile.ns + "cacheVal", this.checked );
        });
    },

    // Returns those radio buttons that are supposed to be in the same group as
    // this radio button. In the case of a checkbox or a radio lacking a name
    // attribute, it returns this.element.
    _getInputSet: function() {
        var selector, formId,
            radio = this.element[ 0 ],
            name = radio.name,
            form = radio.form,
            doc = this.element.parents().last().get( 0 ),

            // A radio is always a member of its own group
            radios = this.element;

        // Only start running selectors if this is an attached radio button with a name
        if ( name && this.inputtype === "radio" && doc ) {
            selector = "input[type='radio'][name='" + escapeId( name ) + "']";

            // If we're inside a form
            if ( form ) {
                formId = form.getAttribute( "id" );

                // If the form has an ID, collect radios scattered throught the document which
                // nevertheless are part of the form by way of the value of their form attribute
                if ( formId ) {
                    radios = $( selector + "[form='" + escapeId( formId ) + "']", doc );
                }

                // Also add to those the radios in the form itself
                radios = $( form ).find( selector ).filter( function() {

                    // Some radios inside the form may belong to some other form by virtue of
                    // having a form attribute defined on them, so we must filter them out here
                    return ( this.form === form );
                }).add( radios );

            // If we're outside a form
            } else {

                // Collect all those radios which are also outside of a form and match our name
                radios = $( selector, doc ).filter( function() {
                    return !this.form;
                });
            }
        }
        return radios;
    },

    _updateAll: function( changeTriggered ) {
        var self = this;

        this._getInputSet().each( function() {
            var $this = $( this );

            if ( ( this.checked || self.inputtype === "checkbox" ) && !changeTriggered ) {
                $this.trigger( "change" );
            }
        })
        .checkboxradio( "refresh" );
    },

    _reset: function() {
        this.refresh();
    },

    // Is the widget supposed to display an icon?
    _hasIcon: function() {
        var controlgroup, controlgroupWidget,
            controlgroupConstructor = $.mobile.controlgroup;

        // If the controlgroup widget is defined ...
        if ( controlgroupConstructor ) {
            controlgroup = this.element.closest(
                ":mobile-controlgroup," +
                controlgroupConstructor.prototype.initSelector );

            // ... and the checkbox is in a controlgroup ...
            if ( controlgroup.length > 0 ) {

                // ... look for a controlgroup widget instance, and ...
                controlgroupWidget = $.data( controlgroup[ 0 ], "mobile-controlgroup" );

                // ... if found, decide based on the option value, ...
                return ( ( controlgroupWidget ? controlgroupWidget.options.type :

                    // ... otherwise decide based on the "type" data attribute.
                    controlgroup.attr( "data-" + $.mobile.ns + "type" ) ) !== "horizontal" );
            }
        }

        // Normally, the widget displays an icon.
        return true;
    },

    refresh: function() {
        var isChecked = this.element[ 0 ].checked,
            active = $.mobile.activeBtnClass,
            iconposClass = "ui-btn-icon-" + this.options.iconpos,
            addClasses = [],
            removeClasses = [];

        if ( this._hasIcon() ) {
            removeClasses.push( active );
            addClasses.push( iconposClass );
        } else {
            removeClasses.push( iconposClass );
            ( isChecked ? addClasses : removeClasses ).push( active );
        }

        if ( isChecked ) {
            addClasses.push( this.checkedClass );
            removeClasses.push( this.uncheckedClass );
        } else {
            addClasses.push( this.uncheckedClass );
            removeClasses.push( this.checkedClass );
        }

        this.widget().toggleClass( "ui-state-disabled", this.element.prop( "disabled" ) );

        this.label
            .addClass( addClasses.join( " " ) )
            .removeClass( removeClasses.join( " " ) );
    },

    widget: function() {
        return this.label.parent();
    },

    _setOptions: function( options ) {
        var label = this.label,
            currentOptions = this.options,
            outer = this.widget(),
            hasIcon = this._hasIcon();

        if ( options.disabled !== undefined ) {
            this.input.prop( "disabled", !!options.disabled );
            outer.toggleClass( "ui-state-disabled", !!options.disabled );
        }
        if ( options.mini !== undefined ) {
            outer.toggleClass( "ui-mini", !!options.mini );
        }
        if ( options.theme !== undefined ) {
            label
                .removeClass( "ui-btn-" + currentOptions.theme )
                .addClass( "ui-btn-" + options.theme );
        }
        if ( options.wrapperClass !== undefined ) {
            outer
                .removeClass( currentOptions.wrapperClass )
                .addClass( options.wrapperClass );
        }
        if ( options.iconpos !== undefined && hasIcon ) {
            label.removeClass( "ui-btn-icon-" + currentOptions.iconpos ).addClass( "ui-btn-icon-" + options.iconpos );
        } else if ( !hasIcon ) {
            label.removeClass( "ui-btn-icon-" + currentOptions.iconpos );
        }
        this._super( options );
    }

}, $.mobile.behaviors.formReset ) );

})( jQuery );

(function( $, undefined ) {

$.widget( "mobile.button", {

    initSelector: "input[type='button'], input[type='submit'], input[type='reset']",

    options: {
        theme: null,
        icon: null,
        iconpos: "left",
        iconshadow: false, /* TODO: Deprecated in 1.4, remove in 1.5. */
        corners: true,
        shadow: true,
        inline: null,
        mini: null,
        wrapperClass: null,
        enhanced: false
    },

    _create: function() {

        if ( this.element.is( ":disabled" ) ) {
            this.options.disabled = true;
        }

        if ( !this.options.enhanced ) {
            this._enhance();
        }

        $.extend( this, {
            wrapper: this.element.parent()
        });

        this._on( {
            focus: function() {
                this.widget().addClass( $.mobile.focusClass );
            },

            blur: function() {
                this.widget().removeClass( $.mobile.focusClass );
            }
        });

        this.refresh( true );
    },

    _enhance: function() {
        this.element.wrap( this._button() );
    },

    _button: function() {
        var options = this.options,
            iconClasses = this._getIconClasses( this.options );

        return $("<div class='ui-btn ui-input-btn" +
            ( options.wrapperClass ? " " + options.wrapperClass : "" ) +
            ( options.theme ? " ui-btn-" + options.theme : "" ) +
            ( options.corners ? " ui-corner-all" : "" ) +
            ( options.shadow ? " ui-shadow" : "" ) +
            ( options.inline ? " ui-btn-inline" : "" ) +
            ( options.mini ? " ui-mini" : "" ) +
            ( options.disabled ? " ui-state-disabled" : "" ) +
            ( iconClasses ? ( " " + iconClasses ) : "" ) +
            "' >" + this.element.val() + "</div>" );
    },

    widget: function() {
        return this.wrapper;
    },

    _destroy: function() {
            this.element.insertBefore( this.wrapper );
            this.wrapper.remove();
    },

    _getIconClasses: function( options ) {
        return ( options.icon ? ( "ui-icon-" + options.icon +
            ( options.iconshadow ? " ui-shadow-icon" : "" ) + /* TODO: Deprecated in 1.4, remove in 1.5. */
            " ui-btn-icon-" + options.iconpos ) : "" );
    },

    _setOptions: function( options ) {
        var outer = this.widget();

        if ( options.theme !== undefined ) {
            outer
                .removeClass( this.options.theme )
                .addClass( "ui-btn-" + options.theme );
        }
        if ( options.corners !== undefined ) {
            outer.toggleClass( "ui-corner-all", options.corners );
        }
        if ( options.shadow !== undefined ) {
            outer.toggleClass( "ui-shadow", options.shadow );
        }
        if ( options.inline !== undefined ) {
            outer.toggleClass( "ui-btn-inline", options.inline );
        }
        if ( options.mini !== undefined ) {
            outer.toggleClass( "ui-mini", options.mini );
        }
        if ( options.disabled !== undefined ) {
            this.element.prop( "disabled", options.disabled );
            outer.toggleClass( "ui-state-disabled", options.disabled );
        }

        if ( options.icon !== undefined ||
                options.iconshadow !== undefined || /* TODO: Deprecated in 1.4, remove in 1.5. */
                options.iconpos !== undefined ) {
            outer
                .removeClass( this._getIconClasses( this.options ) )
                .addClass( this._getIconClasses(
                    $.extend( {}, this.options, options ) ) );
        }

        this._super( options );
    },

    refresh: function( create ) {
        var originalElement,
            isDisabled = this.element.prop( "disabled" );

        if ( this.options.icon && this.options.iconpos === "notext" && this.element.attr( "title" ) ) {
            this.element.attr( "title", this.element.val() );
        }
        if ( !create ) {
            originalElement = this.element.detach();
            $( this.wrapper ).text( this.element.val() ).append( originalElement );
        }
        if ( this.options.disabled !== isDisabled ) {
            this._setOptions({ disabled: isDisabled });
        }
    }
});

})( jQuery );

(function( $ ) {
    var    meta = $( "meta[name=viewport]" ),
        initialContent = meta.attr( "content" ),
        disabledZoom = initialContent + ",maximum-scale=1, user-scalable=no",
        enabledZoom = initialContent + ",maximum-scale=10, user-scalable=yes",
        disabledInitially = /(user-scalable[\s]*=[\s]*no)|(maximum-scale[\s]*=[\s]*1)[$,\s]/.test( initialContent );

    $.mobile.zoom = $.extend( {}, {
        enabled: !disabledInitially,
        locked: false,
        disable: function( lock ) {
            if ( !disabledInitially && !$.mobile.zoom.locked ) {
                meta.attr( "content", disabledZoom );
                $.mobile.zoom.enabled = false;
                $.mobile.zoom.locked = lock || false;
            }
        },
        enable: function( unlock ) {
            if ( !disabledInitially && ( !$.mobile.zoom.locked || unlock === true ) ) {
                meta.attr( "content", enabledZoom );
                $.mobile.zoom.enabled = true;
                $.mobile.zoom.locked = false;
            }
        },
        restore: function() {
            if ( !disabledInitially ) {
                meta.attr( "content", initialContent );
                $.mobile.zoom.enabled = true;
            }
        }
    });

}( jQuery ));

(function( $, undefined ) {

$.widget( "mobile.textinput", {
    initSelector: "input[type='text']," +
        "input[type='search']," +
        ":jqmData(type='search')," +
        "input[type='number']," +
        ":jqmData(type='number')," +
        "input[type='password']," +
        "input[type='email']," +
        "input[type='url']," +
        "input[type='tel']," +
        "textarea," +
        "input[type='time']," +
        "input[type='date']," +
        "input[type='month']," +
        "input[type='week']," +
        "input[type='datetime']," +
        "input[type='datetime-local']," +
        "input[type='color']," +
        "input:not([type])," +
        "input[type='file']",

    options: {
        theme: null,
        corners: true,
        mini: false,
        // This option defaults to true on iOS devices.
        preventFocusZoom: /iPhone|iPad|iPod/.test( navigator.platform ) && navigator.userAgent.indexOf( "AppleWebKit" ) > -1,
        wrapperClass: "",
        enhanced: false
    },

    _create: function() {

        var options = this.options,
            isSearch = this.element.is( "[type='search'], :jqmData(type='search')" ),
            isTextarea = this.element[ 0 ].tagName === "TEXTAREA",
            isRange = this.element.is( "[data-" + ( $.mobile.ns || "" ) + "type='range']" ),
            inputNeedsWrap = ( (this.element.is( "input" ) ||
                this.element.is( "[data-" + ( $.mobile.ns || "" ) + "type='search']" ) ) &&
                    !isRange );

        if ( this.element.prop( "disabled" ) ) {
            options.disabled = true;
        }

        $.extend( this, {
            classes: this._classesFromOptions(),
            isSearch: isSearch,
            isTextarea: isTextarea,
            isRange: isRange,
            inputNeedsWrap: inputNeedsWrap
        });

        this._autoCorrect();

        if ( !options.enhanced ) {
            this._enhance();
        }

        this._on( {
            "focus": "_handleFocus",
            "blur": "_handleBlur"
        });

    },

    refresh: function() {
        this.setOptions({
            "disabled" : this.element.is( ":disabled" )
        });
    },

    _enhance: function() {
        var elementClasses = [];

        if ( this.isTextarea ) {
            elementClasses.push( "ui-input-text" );
        }

        if ( this.isTextarea || this.isRange ) {
            elementClasses.push( "ui-shadow-inset" );
        }

        //"search" and "text" input widgets
        if ( this.inputNeedsWrap ) {
            this.element.wrap( this._wrap() );
        } else {
            elementClasses = elementClasses.concat( this.classes );
        }

        this.element.addClass( elementClasses.join( " " ) );
    },

    widget: function() {
        return ( this.inputNeedsWrap ) ? this.element.parent() : this.element;
    },

    _classesFromOptions: function() {
        var options = this.options,
            classes = [];

        classes.push( "ui-body-" + ( ( options.theme === null ) ? "inherit" : options.theme ) );
        if ( options.corners ) {
            classes.push( "ui-corner-all" );
        }
        if ( options.mini ) {
            classes.push( "ui-mini" );
        }
        if ( options.disabled ) {
            classes.push( "ui-state-disabled" );
        }
        if ( options.wrapperClass ) {
            classes.push( options.wrapperClass );
        }

        return classes;
    },

    _wrap: function() {
        return $( "<div class='" +
            ( this.isSearch ? "ui-input-search " : "ui-input-text " ) +
            this.classes.join( " " ) + " " +
            "ui-shadow-inset'></div>" );
    },

    _autoCorrect: function() {
        // XXX: Temporary workaround for issue 785 (Apple bug 8910589).
        //      Turn off autocorrect and autocomplete on non-iOS 5 devices
        //      since the popup they use can't be dismissed by the user. Note
        //      that we test for the presence of the feature by looking for
        //      the autocorrect property on the input element. We currently
        //      have no test for iOS 5 or newer so we're temporarily using
        //      the touchOverflow support flag for jQM 1.0. Yes, I feel dirty.
        //      - jblas
        if ( typeof this.element[0].autocorrect !== "undefined" &&
            !$.support.touchOverflow ) {

            // Set the attribute instead of the property just in case there
            // is code that attempts to make modifications via HTML.
            this.element[0].setAttribute( "autocorrect", "off" );
            this.element[0].setAttribute( "autocomplete", "off" );
        }
    },

    _handleBlur: function() {
        this.widget().removeClass( $.mobile.focusClass );
        if ( this.options.preventFocusZoom ) {
            $.mobile.zoom.enable( true );
        }
    },

    _handleFocus: function() {
        // In many situations, iOS will zoom into the input upon tap, this
        // prevents that from happening
        if ( this.options.preventFocusZoom ) {
            $.mobile.zoom.disable( true );
        }
        this.widget().addClass( $.mobile.focusClass );
    },

    _setOptions: function ( options ) {
        var outer = this.widget();

        this._super( options );

        if ( !( options.disabled === undefined &&
            options.mini === undefined &&
            options.corners === undefined &&
            options.theme === undefined &&
            options.wrapperClass === undefined ) ) {

            outer.removeClass( this.classes.join( " " ) );
            this.classes = this._classesFromOptions();
            outer.addClass( this.classes.join( " " ) );
        }

        if ( options.disabled !== undefined ) {
            this.element.prop( "disabled", !!options.disabled );
        }
    },

    _destroy: function() {
        if ( this.options.enhanced ) {
            return;
        }
        if ( this.inputNeedsWrap ) {
            this.element.unwrap();
        }
        this.element.removeClass( "ui-input-text " + this.classes.join( " " ) );
    }
});

})( jQuery );

(function( $, undefined ) {

$.widget( "mobile.slider", $.extend( {
    initSelector: "input[type='range'], :jqmData(type='range'), :jqmData(role='slider')",

    widgetEventPrefix: "slide",

    options: {
        theme: null,
        trackTheme: null,
        corners: true,
        mini: false,
        highlight: false
    },

    _create: function() {

        // TODO: Each of these should have comments explain what they're for
        var self = this,
            control = this.element,
            trackTheme = this.options.trackTheme || $.mobile.getAttribute( control[ 0 ], "theme" ),
            trackThemeClass = trackTheme ? " ui-bar-" + trackTheme : " ui-bar-inherit",
            cornerClass = ( this.options.corners || control.jqmData( "corners" ) ) ? " ui-corner-all" : "",
            miniClass = ( this.options.mini || control.jqmData( "mini" ) ) ? " ui-mini" : "",
            cType = control[ 0 ].nodeName.toLowerCase(),
            isToggleSwitch = ( cType === "select" ),
            isRangeslider = control.parent().is( ":jqmData(role='rangeslider')" ),
            selectClass = ( isToggleSwitch ) ? "ui-slider-switch" : "",
            controlID = control.attr( "id" ),
            $label = $( "[for='" + controlID + "']" ),
            labelID = $label.attr( "id" ) || controlID + "-label",
            min = !isToggleSwitch ? parseFloat( control.attr( "min" ) ) : 0,
            max =  !isToggleSwitch ? parseFloat( control.attr( "max" ) ) : control.find( "option" ).length-1,
            step = window.parseFloat( control.attr( "step" ) || 1 ),
            domHandle = document.createElement( "a" ),
            handle = $( domHandle ),
            domSlider = document.createElement( "div" ),
            slider = $( domSlider ),
            valuebg = this.options.highlight && !isToggleSwitch ? (function() {
                var bg = document.createElement( "div" );
                bg.className = "ui-slider-bg " + $.mobile.activeBtnClass;
                return $( bg ).prependTo( slider );
            })() : false,
            options,
            wrapper,
            j, length,
            i, optionsCount, origTabIndex,
            side, activeClass, sliderImg;

        $label.attr( "id", labelID );
        this.isToggleSwitch = isToggleSwitch;

        domHandle.setAttribute( "href", "#" );
        domSlider.setAttribute( "role", "application" );
        domSlider.className = [ this.isToggleSwitch ? "ui-slider ui-slider-track ui-shadow-inset " : "ui-slider-track ui-shadow-inset ", selectClass, trackThemeClass, cornerClass, miniClass ].join( "" );
        domHandle.className = "ui-slider-handle";
        domSlider.appendChild( domHandle );

        handle.attr({
            "role": "slider",
            "aria-valuemin": min,
            "aria-valuemax": max,
            "aria-valuenow": this._value(),
            "aria-valuetext": this._value(),
            "title": this._value(),
            "aria-labelledby": labelID
        });

        $.extend( this, {
            slider: slider,
            handle: handle,
            control: control,
            type: cType,
            step: step,
            max: max,
            min: min,
            valuebg: valuebg,
            isRangeslider: isRangeslider,
            dragging: false,
            beforeStart: null,
            userModified: false,
            mouseMoved: false
        });

        if ( isToggleSwitch ) {
            // TODO: restore original tabindex (if any) in a destroy method
            origTabIndex = control.attr( "tabindex" );
            if ( origTabIndex ) {
                handle.attr( "tabindex", origTabIndex );
            }
            control.attr( "tabindex", "-1" ).focus(function() {
                $( this ).blur();
                handle.focus();
            });

            wrapper = document.createElement( "div" );
            wrapper.className = "ui-slider-inneroffset";

            for ( j = 0, length = domSlider.childNodes.length; j < length; j++ ) {
                wrapper.appendChild( domSlider.childNodes[j] );
            }

            domSlider.appendChild( wrapper );

            // slider.wrapInner( "<div class='ui-slider-inneroffset'></div>" );

            // make the handle move with a smooth transition
            handle.addClass( "ui-slider-handle-snapping" );

            options = control.find( "option" );

            for ( i = 0, optionsCount = options.length; i < optionsCount; i++ ) {
                side = !i ? "b" : "a";
                activeClass = !i ? "" : " " + $.mobile.activeBtnClass;
                sliderImg = document.createElement( "span" );

                sliderImg.className = [ "ui-slider-label ui-slider-label-", side, activeClass ].join( "" );
                sliderImg.setAttribute( "role", "img" );
                sliderImg.appendChild( document.createTextNode( options[i].innerHTML ) );
                $( sliderImg ).prependTo( slider );
            }

            self._labels = $( ".ui-slider-label", slider );

        }

        // monitor the input for updated values
        control.addClass( isToggleSwitch ? "ui-slider-switch" : "ui-slider-input" );

        this._on( control, {
            "change": "_controlChange",
            "keyup": "_controlKeyup",
            "blur": "_controlBlur",
            "vmouseup": "_controlVMouseUp"
        });

        slider.bind( "vmousedown", $.proxy( this._sliderVMouseDown, this ) )
            .bind( "vclick", false );

        // We have to instantiate a new function object for the unbind to work properly
        // since the method itself is defined in the prototype (causing it to unbind everything)
        this._on( document, { "vmousemove": "_preventDocumentDrag" });
        this._on( slider.add( document ), { "vmouseup": "_sliderVMouseUp" });

        slider.insertAfter( control );

        // wrap in a div for styling purposes
        if ( !isToggleSwitch && !isRangeslider ) {
            wrapper = this.options.mini ? "<div class='ui-slider ui-mini'>" : "<div class='ui-slider'>";

            control.add( slider ).wrapAll( wrapper );
        }

        // bind the handle event callbacks and set the context to the widget instance
        this._on( this.handle, {
            "vmousedown": "_handleVMouseDown",
            "keydown": "_handleKeydown",
            "keyup": "_handleKeyup"
        });

        this.handle.bind( "vclick", false );

        this._handleFormReset();

        this.refresh( undefined, undefined, true );
    },

    _setOptions: function( options ) {
        if ( options.theme !== undefined ) {
            this._setTheme( options.theme );
        }

        if ( options.trackTheme !== undefined ) {
            this._setTrackTheme( options.trackTheme );
        }

        if ( options.corners !== undefined ) {
            this._setCorners( options.corners );
        }

        if ( options.mini !== undefined ) {
            this._setMini( options.mini );
        }

        if ( options.highlight !== undefined ) {
            this._setHighlight( options.highlight );
        }

        if ( options.disabled !== undefined ) {
            this._setDisabled( options.disabled );
        }
        this._super( options );
    },

    _controlChange: function( event ) {
        // if the user dragged the handle, the "change" event was triggered from inside refresh(); don't call refresh() again
        if ( this._trigger( "controlchange", event ) === false ) {
            return false;
        }
        if ( !this.mouseMoved ) {
            this.refresh( this._value(), true );
        }
    },

    _controlKeyup: function(/* event */) { // necessary?
        this.refresh( this._value(), true, true );
    },

    _controlBlur: function(/* event */) {
        this.refresh( this._value(), true );
    },

    // it appears the clicking the up and down buttons in chrome on
    // range/number inputs doesn't trigger a change until the field is
    // blurred. Here we check thif the value has changed and refresh
    _controlVMouseUp: function(/* event */) {
        this._checkedRefresh();
    },

    // NOTE force focus on handle
    _handleVMouseDown: function(/* event */) {
        this.handle.focus();
    },

    _handleKeydown: function( event ) {
        var index = this._value();
        if ( this.options.disabled ) {
            return;
        }

        // In all cases prevent the default and mark the handle as active
        switch ( event.keyCode ) {
            case $.mobile.keyCode.HOME:
            case $.mobile.keyCode.END:
            case $.mobile.keyCode.PAGE_UP:
            case $.mobile.keyCode.PAGE_DOWN:
            case $.mobile.keyCode.UP:
            case $.mobile.keyCode.RIGHT:
            case $.mobile.keyCode.DOWN:
            case $.mobile.keyCode.LEFT:
                event.preventDefault();

                if ( !this._keySliding ) {
                    this._keySliding = true;
                    this.handle.addClass( "ui-state-active" ); /* TODO: We don't use this class for styling. Do we need to add it? */
                }

                break;
        }

        // move the slider according to the keypress
        switch ( event.keyCode ) {
            case $.mobile.keyCode.HOME:
                this.refresh( this.min );
                break;
            case $.mobile.keyCode.END:
                this.refresh( this.max );
                break;
            case $.mobile.keyCode.PAGE_UP:
            case $.mobile.keyCode.UP:
            case $.mobile.keyCode.RIGHT:
                this.refresh( index + this.step );
                break;
            case $.mobile.keyCode.PAGE_DOWN:
            case $.mobile.keyCode.DOWN:
            case $.mobile.keyCode.LEFT:
                this.refresh( index - this.step );
                break;
        }
    }, // remove active mark

    _handleKeyup: function(/* event */) {
        if ( this._keySliding ) {
            this._keySliding = false;
            this.handle.removeClass( "ui-state-active" ); /* See comment above. */
        }
    },

    _sliderVMouseDown: function( event ) {
        // NOTE: we don't do this in refresh because we still want to
        //       support programmatic alteration of disabled inputs
        if ( this.options.disabled || !( event.which === 1 || event.which === 0 || event.which === undefined ) ) {
            return false;
        }
        if ( this._trigger( "beforestart", event ) === false ) {
            return false;
        }
        this.dragging = true;
        this.userModified = false;
        this.mouseMoved = false;

        if ( this.isToggleSwitch ) {
            this.beforeStart = this.element[0].selectedIndex;
        }

        this.refresh( event );
        this._trigger( "start" );
        return false;
    },

    _sliderVMouseUp: function() {
        if ( this.dragging ) {
            this.dragging = false;

            if ( this.isToggleSwitch ) {
                // make the handle move with a smooth transition
                this.handle.addClass( "ui-slider-handle-snapping" );

                if ( this.mouseMoved ) {
                    // this is a drag, change the value only if user dragged enough
                    if ( this.userModified ) {
                        this.refresh( this.beforeStart === 0 ? 1 : 0 );
                    } else {
                        this.refresh( this.beforeStart );
                    }
                } else {
                    // this is just a click, change the value
                    this.refresh( this.beforeStart === 0 ? 1 : 0 );
                }
            }

            this.mouseMoved = false;
            this._trigger( "stop" );
            return false;
        }
    },

    _preventDocumentDrag: function( event ) {
            // NOTE: we don't do this in refresh because we still want to
            //       support programmatic alteration of disabled inputs
            if ( this._trigger( "drag", event ) === false) {
                return false;
            }
            if ( this.dragging && !this.options.disabled ) {

                // this.mouseMoved must be updated before refresh() because it will be used in the control "change" event
                this.mouseMoved = true;

                if ( this.isToggleSwitch ) {
                    // make the handle move in sync with the mouse
                    this.handle.removeClass( "ui-slider-handle-snapping" );
                }

                this.refresh( event );

                // only after refresh() you can calculate this.userModified
                this.userModified = this.beforeStart !== this.element[0].selectedIndex;
                return false;
            }
        },

    _checkedRefresh: function() {
        if ( this.value !== this._value() ) {
            this.refresh( this._value() );
        }
    },

    _value: function() {
        return  this.isToggleSwitch ? this.element[0].selectedIndex : parseFloat( this.element.val() ) ;
    },

    _reset: function() {
        this.refresh( undefined, false, true );
    },

    refresh: function( val, isfromControl, preventInputUpdate ) {
        // NOTE: we don't return here because we want to support programmatic
        //       alteration of the input value, which should still update the slider

        var self = this,
            parentTheme = $.mobile.getAttribute( this.element[ 0 ], "theme" ),
            theme = this.options.theme || parentTheme,
            themeClass =  theme ? " ui-btn-" + theme : "",
            trackTheme = this.options.trackTheme || parentTheme,
            trackThemeClass = trackTheme ? " ui-bar-" + trackTheme : " ui-bar-inherit",
            cornerClass = this.options.corners ? " ui-corner-all" : "",
            miniClass = this.options.mini ? " ui-mini" : "",
            left, width, data, tol,
            pxStep, percent,
            control, isInput, optionElements, min, max, step,
            newval, valModStep, alignValue, percentPerStep,
            handlePercent, aPercent, bPercent,
            valueChanged;

        self.slider[0].className = [ this.isToggleSwitch ? "ui-slider ui-slider-switch ui-slider-track ui-shadow-inset" : "ui-slider-track ui-shadow-inset", trackThemeClass, cornerClass, miniClass ].join( "" );
        if ( this.options.disabled || this.element.prop( "disabled" ) ) {
            this.disable();
        }

        // set the stored value for comparison later
        this.value = this._value();
        if ( this.options.highlight && !this.isToggleSwitch && this.slider.find( ".ui-slider-bg" ).length === 0 ) {
            this.valuebg = (function() {
                var bg = document.createElement( "div" );
                bg.className = "ui-slider-bg " + $.mobile.activeBtnClass;
                return $( bg ).prependTo( self.slider );
            })();
        }
        this.handle.addClass( "ui-btn" + themeClass + " ui-shadow" );

        control = this.element;
        isInput = !this.isToggleSwitch;
        optionElements = isInput ? [] : control.find( "option" );
        min =  isInput ? parseFloat( control.attr( "min" ) ) : 0;
        max = isInput ? parseFloat( control.attr( "max" ) ) : optionElements.length - 1;
        step = ( isInput && parseFloat( control.attr( "step" ) ) > 0 ) ? parseFloat( control.attr( "step" ) ) : 1;

        if ( typeof val === "object" ) {
            data = val;
            // a slight tolerance helped get to the ends of the slider
            tol = 8;

            left = this.slider.offset().left;
            width = this.slider.width();
            pxStep = width/((max-min)/step);
            if ( !this.dragging ||
                    data.pageX < left - tol ||
                    data.pageX > left + width + tol ) {
                return;
            }
            if ( pxStep > 1 ) {
                percent = ( ( data.pageX - left ) / width ) * 100;
            } else {
                percent = Math.round( ( ( data.pageX - left ) / width ) * 100 );
            }
        } else {
            if ( val == null ) {
                val = isInput ? parseFloat( control.val() || 0 ) : control[0].selectedIndex;
            }
            percent = ( parseFloat( val ) - min ) / ( max - min ) * 100;
        }

        if ( isNaN( percent ) ) {
            return;
        }

        newval = ( percent / 100 ) * ( max - min ) + min;

        //from jQuery UI slider, the following source will round to the nearest step
        valModStep = ( newval - min ) % step;
        alignValue = newval - valModStep;

        if ( Math.abs( valModStep ) * 2 >= step ) {
            alignValue += ( valModStep > 0 ) ? step : ( -step );
        }

        percentPerStep = 100/((max-min)/step);
        // Since JavaScript has problems with large floats, round
        // the final value to 5 digits after the decimal point (see jQueryUI: #4124)
        newval = parseFloat( alignValue.toFixed(5) );

        if ( typeof pxStep === "undefined" ) {
            pxStep = width / ( (max-min) / step );
        }
        if ( pxStep > 1 && isInput ) {
            percent = ( newval - min ) * percentPerStep * ( 1 / step );
        }
        if ( percent < 0 ) {
            percent = 0;
        }

        if ( percent > 100 ) {
            percent = 100;
        }

        if ( newval < min ) {
            newval = min;
        }

        if ( newval > max ) {
            newval = max;
        }

        this.handle.css( "left", percent + "%" );

        this.handle[0].setAttribute( "aria-valuenow", isInput ? newval : optionElements.eq( newval ).attr( "value" ) );

        this.handle[0].setAttribute( "aria-valuetext", isInput ? newval : optionElements.eq( newval ).getEncodedText() );

        this.handle[0].setAttribute( "title", isInput ? newval : optionElements.eq( newval ).getEncodedText() );

        if ( this.valuebg ) {
            this.valuebg.css( "width", percent + "%" );
        }

        // drag the label widths
        if ( this._labels ) {
            handlePercent = this.handle.width() / this.slider.width() * 100;
            aPercent = percent && handlePercent + ( 100 - handlePercent ) * percent / 100;
            bPercent = percent === 100 ? 0 : Math.min( handlePercent + 100 - aPercent, 100 );

            this._labels.each(function() {
                var ab = $( this ).hasClass( "ui-slider-label-a" );
                $( this ).width( ( ab ? aPercent : bPercent  ) + "%" );
            });
        }

        if ( !preventInputUpdate ) {
            valueChanged = false;

            // update control"s value
            if ( isInput ) {
                valueChanged = parseFloat( control.val() ) !== newval;
                control.val( newval );
            } else {
                valueChanged = control[ 0 ].selectedIndex !== newval;
                control[ 0 ].selectedIndex = newval;
            }
            if ( this._trigger( "beforechange", val ) === false) {
                    return false;
            }
            if ( !isfromControl && valueChanged ) {
                control.trigger( "change" );
            }
        }
    },

    _setHighlight: function( value ) {
        value = !!value;
        if ( value ) {
            this.options.highlight = !!value;
            this.refresh();
        } else if ( this.valuebg ) {
            this.valuebg.remove();
            this.valuebg = false;
        }
    },

    _setTheme: function( value ) {
        this.handle
            .removeClass( "ui-btn-" + this.options.theme )
            .addClass( "ui-btn-" + value );

        var currentTheme = this.options.theme ? this.options.theme : "inherit",
            newTheme = value ? value : "inherit";

        this.control
            .removeClass( "ui-body-" + currentTheme )
            .addClass( "ui-body-" + newTheme );
    },

    _setTrackTheme: function( value ) {
        var currentTrackTheme = this.options.trackTheme ? this.options.trackTheme : "inherit",
            newTrackTheme = value ? value : "inherit";

        this.slider
            .removeClass( "ui-body-" + currentTrackTheme )
            .addClass( "ui-body-" + newTrackTheme );
    },

    _setMini: function( value ) {
        value = !!value;
        if ( !this.isToggleSwitch && !this.isRangeslider ) {
            this.slider.parent().toggleClass( "ui-mini", value );
            this.element.toggleClass( "ui-mini", value );
        }
        this.slider.toggleClass( "ui-mini", value );
    },

    _setCorners: function( value ) {
        this.slider.toggleClass( "ui-corner-all", value );

        if ( !this.isToggleSwitch ) {
            this.control.toggleClass( "ui-corner-all", value );
        }
    },

    _setDisabled: function( value ) {
        value = !!value;
        this.element.prop( "disabled", value );
        this.slider
            .toggleClass( "ui-state-disabled", value )
            .attr( "aria-disabled", value );

        this.element.toggleClass( "ui-state-disabled", value );
    }

}, $.mobile.behaviors.formReset ) );

})( jQuery );

(function( $, undefined ) {

var popup;

function getPopup() {
    if ( !popup ) {
        popup = $( "<div></div>", {
            "class": "ui-slider-popup ui-shadow ui-corner-all"
        });
    }
    return popup.clone();
}

$.widget( "mobile.slider", $.mobile.slider, {
    options: {
        popupEnabled: false,
        showValue: false
    },

    _create: function() {
        this._super();

        $.extend( this, {
            _currentValue: null,
            _popup: null,
            _popupVisible: false
        });

        this._setOption( "popupEnabled", this.options.popupEnabled );

        this._on( this.handle, { "vmousedown" : "_showPopup" } );
        this._on( this.slider.add( this.document ), { "vmouseup" : "_hidePopup" } );
        this._refresh();
    },

    // position the popup centered 5px above the handle
    _positionPopup: function() {
        var dstOffset = this.handle.offset();

        this._popup.offset( {
            left: dstOffset.left + ( this.handle.width() - this._popup.width() ) / 2,
            top: dstOffset.top - this._popup.outerHeight() - 5
        });
    },

    _setOption: function( key, value ) {
        this._super( key, value );

        if ( key === "showValue" ) {
            this.handle.html( value && !this.options.mini ? this._value() : "" );
        } else if ( key === "popupEnabled" ) {
            if ( value && !this._popup ) {
                this._popup = getPopup()
                    .addClass( "ui-body-" + ( this.options.theme || "a" ) )
                    .hide()
                    .insertBefore( this.element );
            }
        }
    },

    // show value on the handle and in popup
    refresh: function() {
        this._super.apply( this, arguments );
        this._refresh();
    },

    _refresh: function() {
        var o = this.options, newValue;

        if ( o.popupEnabled ) {
            // remove the title attribute from the handle (which is
            // responsible for the annoying tooltip); NB we have
            // to do it here as the jqm slider sets it every time
            // the slider's value changes :(
            this.handle.removeAttr( "title" );
        }

        newValue = this._value();
        if ( newValue === this._currentValue ) {
            return;
        }
        this._currentValue = newValue;

        if ( o.popupEnabled && this._popup ) {
            this._positionPopup();
            this._popup.html( newValue );
        }

        if ( o.showValue && !this.options.mini ) {
            this.handle.html( newValue );
        }
    },

    _showPopup: function() {
        if ( this.options.popupEnabled && !this._popupVisible ) {
            this.handle.html( "" );
            this._popup.show();
            this._positionPopup();
            this._popupVisible = true;
        }
    },

    _hidePopup: function() {
        var o = this.options;

        if ( o.popupEnabled && this._popupVisible ) {
            if ( o.showValue && !o.mini ) {
                this.handle.html( this._value() );
            }
            this._popup.hide();
            this._popupVisible = false;
        }
    }
});

})( jQuery );

(function( $, undefined ) {

$.widget( "mobile.flipswitch", $.extend({

    options: {
        onText: "On",
        offText: "Off",
        theme: null,
        enhanced: false,
        wrapperClass: null,
        corners: true,
        mini: false
    },

    _create: function() {
            if ( !this.options.enhanced ) {
                this._enhance();
            } else {
                $.extend( this, {
                    flipswitch: this.element.parent(),
                    on: this.element.find( ".ui-flipswitch-on" ).eq( 0 ),
                    off: this.element.find( ".ui-flipswitch-off" ).eq(0),
                    type: this.element.get( 0 ).tagName
                });
            }

            this._handleFormReset();

            // Transfer tabindex to "on" element and make input unfocusable
            this._originalTabIndex = this.element.attr( "tabindex" );
            if ( this._originalTabIndex != null ) {
                this.on.attr( "tabindex", this._originalTabIndex );
            }
            this.element.attr( "tabindex", "-1" );
            this._on({
                "focus" : "_handleInputFocus"
            });

            if ( this.element.is( ":disabled" ) ) {
                this._setOptions({
                    "disabled": true
                });
            }

            this._on( this.flipswitch, {
                "click": "_toggle",
                "swipeleft": "_left",
                "swiperight": "_right"
            });

            this._on( this.on, {
                "keydown": "_keydown"
            });

            this._on( {
                "change": "refresh"
            });
    },

    _handleInputFocus: function() {
        this.on.focus();
    },

    widget: function() {
        return this.flipswitch;
    },

    _left: function() {
        this.flipswitch.removeClass( "ui-flipswitch-active" );
        if ( this.type === "SELECT" ) {
            this.element.get( 0 ).selectedIndex = 0;
        } else {
            this.element.prop( "checked", false );
        }
        this.element.trigger( "change" );
    },

    _right: function() {
        this.flipswitch.addClass( "ui-flipswitch-active" );
        if ( this.type === "SELECT" ) {
            this.element.get( 0 ).selectedIndex = 1;
        } else {
            this.element.prop( "checked", true );
        }
        this.element.trigger( "change" );
    },

    _enhance: function() {
        var flipswitch = $( "<div>" ),
            options = this.options,
            element = this.element,
            theme = options.theme ? options.theme : "inherit",

            // The "on" button is an anchor so it's focusable
            on = $( "<a></a>", {
                "href": "#"
            }),
            off = $( "<span></span>" ),
            type = element.get( 0 ).tagName,
            onText = ( type === "INPUT" ) ?
                options.onText : element.find( "option" ).eq( 1 ).text(),
            offText = ( type === "INPUT" ) ?
                options.offText : element.find( "option" ).eq( 0 ).text();

            on
                .addClass( "ui-flipswitch-on ui-btn ui-shadow ui-btn-inherit" )
                .text( onText );
            off
                .addClass( "ui-flipswitch-off" )
                .text( offText );

            flipswitch
                .addClass( "ui-flipswitch ui-shadow-inset " +
                    "ui-bar-" + theme + " " +
                    ( options.wrapperClass ? options.wrapperClass : "" ) + " " +
                    ( ( element.is( ":checked" ) ||
                        element
                            .find( "option" )
                            .eq( 1 )
                            .is( ":selected" ) ) ? "ui-flipswitch-active" : "" ) +
                    ( element.is(":disabled") ? " ui-state-disabled": "") +
                    ( options.corners ? " ui-corner-all": "" ) +
                    ( options.mini ? " ui-mini": "" ) )
                .append( on, off );

            element
                .addClass( "ui-flipswitch-input" )
                .after( flipswitch )
                .appendTo( flipswitch );

        $.extend( this, {
            flipswitch: flipswitch,
            on: on,
            off: off,
            type: type
        });
    },

    _reset: function() {
        this.refresh();
    },

    refresh: function() {
        var direction,
            existingDirection = this.flipswitch.hasClass( "ui-flipswitch-active" ) ? "_right" : "_left";

        if ( this.type === "SELECT" ) {
            direction = ( this.element.get( 0 ).selectedIndex > 0 ) ? "_right": "_left";
        } else {
            direction = this.element.prop( "checked" ) ? "_right": "_left";
        }

        if ( direction !== existingDirection ) {
            this[ direction ]();
        }
    },

    _toggle: function() {
        var direction = this.flipswitch.hasClass( "ui-flipswitch-active" ) ? "_left" : "_right";

        this[ direction ]();
    },

    _keydown: function( e ) {
        if ( e.which === $.mobile.keyCode.LEFT ) {
            this._left();
        } else if ( e.which === $.mobile.keyCode.RIGHT ) {
            this._right();
        } else if ( e.which === $.mobile.keyCode.SPACE ) {
            this._toggle();
            e.preventDefault();
        }
    },

    _setOptions: function( options ) {
        if ( options.theme !== undefined ) {
            var currentTheme = options.theme ? options.theme : "inherit",
                newTheme = options.theme ? options.theme : "inherit";

            this.widget()
                .removeClass( "ui-bar-" + currentTheme )
                .addClass( "ui-bar-" + newTheme );
        }
        if ( options.onText !== undefined ) {
            this.on.text( options.onText );
        }
        if ( options.offText !== undefined ) {
            this.off.text( options.offText );
        }
        if ( options.disabled !== undefined ) {
            this.widget().toggleClass( "ui-state-disabled", options.disabled );
        }
        if ( options.mini !== undefined ) {
            this.widget().toggleClass( "ui-mini", options.mini );
        }
        if ( options.corners !== undefined ) {
            this.widget().toggleClass( "ui-corner-all", options.corners );
        }

        this._super( options );
    },

    _destroy: function() {
        if ( this.options.enhanced ) {
            return;
        }
        if ( this._originalTabIndex != null ) {
            this.element.attr( "tabindex", this._originalTabIndex );
        } else {
            this.element.removeAttr( "tabindex" );
        }
        this.on.remove();
        this.off.remove();
        this.element.unwrap();
        this.flipswitch.remove();
        this.removeClass( "ui-flipswitch-input" );
    }

}, $.mobile.behaviors.formReset ) );

})( jQuery );

(function( $, undefined ) {
    $.widget( "mobile.rangeslider", $.extend( {

        options: {
            theme: null,
            trackTheme: null,
            corners: true,
            mini: false,
            highlight: true
        },

        _create: function() {
            var $el = this.element,
            elClass = this.options.mini ? "ui-rangeslider ui-mini" : "ui-rangeslider",
            _inputFirst = $el.find( "input" ).first(),
            _inputLast = $el.find( "input" ).last(),
            _label = $el.find( "label" ).first(),
            _sliderWidgetFirst = $.data( _inputFirst.get( 0 ), "mobile-slider" ) ||
                $.data( _inputFirst.slider().get( 0 ), "mobile-slider" ),
            _sliderWidgetLast = $.data( _inputLast.get(0), "mobile-slider" ) ||
                $.data( _inputLast.slider().get( 0 ), "mobile-slider" ),
            _sliderFirst = _sliderWidgetFirst.slider,
            _sliderLast = _sliderWidgetLast.slider,
            firstHandle = _sliderWidgetFirst.handle,
            _sliders = $( "<div class='ui-rangeslider-sliders' />" ).appendTo( $el );

            _inputFirst.addClass( "ui-rangeslider-first" );
            _inputLast.addClass( "ui-rangeslider-last" );
            $el.addClass( elClass );

            _sliderFirst.appendTo( _sliders );
            _sliderLast.appendTo( _sliders );
            _label.insertBefore( $el );
            firstHandle.prependTo( _sliderLast );

            $.extend( this, {
                _inputFirst: _inputFirst,
                _inputLast: _inputLast,
                _sliderFirst: _sliderFirst,
                _sliderLast: _sliderLast,
                _label: _label,
                _targetVal: null,
                _sliderTarget: false,
                _sliders: _sliders,
                _proxy: false
            });

            this.refresh();
            this._on( this.element.find( "input.ui-slider-input" ), {
                "slidebeforestart": "_slidebeforestart",
                "slidestop": "_slidestop",
                "slidedrag": "_slidedrag",
                "slidebeforechange": "_change",
                "blur": "_change",
                "keyup": "_change"
            });
            this._on({
                "mousedown":"_change"
            });
            this._on( this.element.closest( "form" ), {
                "reset":"_handleReset"
            });
            this._on( firstHandle, {
                "vmousedown": "_dragFirstHandle"
            });
        },
        _handleReset: function() {
            var self = this;
            //we must wait for the stack to unwind before updateing other wise sliders will not have updated yet
            setTimeout( function() {
                self._updateHighlight();
            },0);
        },

        _dragFirstHandle: function( event ) {
            //if the first handle is dragged send the event to the first slider
            $.data( this._inputFirst.get(0), "mobile-slider" ).dragging = true;
            $.data( this._inputFirst.get(0), "mobile-slider" ).refresh( event );
            $.data( this._inputFirst.get(0), "mobile-slider" )._trigger( "start" );
            return false;
        },

        _slidedrag: function( event ) {
            var first = $( event.target ).is( this._inputFirst ),
                otherSlider = ( first ) ? this._inputLast : this._inputFirst;

            this._sliderTarget = false;
            //if the drag was initiated on an extreme and the other handle is focused send the events to
            //the closest handle
            if ( ( this._proxy === "first" && first ) || ( this._proxy === "last" && !first ) ) {
                $.data( otherSlider.get(0), "mobile-slider" ).dragging = true;
                $.data( otherSlider.get(0), "mobile-slider" ).refresh( event );
                return false;
            }
        },

        _slidestop: function( event ) {
            var first = $( event.target ).is( this._inputFirst );

            this._proxy = false;
            //this stops dragging of the handle and brings the active track to the front
            //this makes clicks on the track go the the last handle used
            this.element.find( "input" ).trigger( "vmouseup" );
            this._sliderFirst.css( "z-index", first ? 1 : "" );
        },

        _slidebeforestart: function( event ) {
            this._sliderTarget = false;
            //if the track is the target remember this and the original value
            if ( $( event.originalEvent.target ).hasClass( "ui-slider-track" ) ) {
                this._sliderTarget = true;
                this._targetVal = $( event.target ).val();
            }
        },

        _setOptions: function( options ) {
            if ( options.theme !== undefined ) {
                this._setTheme( options.theme );
            }

            if ( options.trackTheme !== undefined ) {
                this._setTrackTheme( options.trackTheme );
            }

            if ( options.mini !== undefined ) {
                this._setMini( options.mini );
            }

            if ( options.highlight !== undefined ) {
                this._setHighlight( options.highlight );
            }

            if ( options.disabled !== undefined ) {
                this._setDisabled( options.disabled );
            }

            this._super( options );
            this.refresh();
        },

        refresh: function() {
            var $el = this.element,
                o = this.options;

            if ( this._inputFirst.is( ":disabled" ) || this._inputLast.is( ":disabled" ) ) {
                this.options.disabled = true;
            }

            $el.find( "input" ).slider({
                theme: o.theme,
                trackTheme: o.trackTheme,
                disabled: o.disabled,
                corners: o.corners,
                mini: o.mini,
                highlight: o.highlight
            }).slider( "refresh" );
            this._updateHighlight();
        },

        _change: function( event ) {
            if ( event.type === "keyup" ) {
                this._updateHighlight();
                return false;
            }

            var self = this,
                min = parseFloat( this._inputFirst.val(), 10 ),
                max = parseFloat( this._inputLast.val(), 10 ),
                first = $( event.target ).hasClass( "ui-rangeslider-first" ),
                thisSlider = first ? this._inputFirst : this._inputLast,
                otherSlider = first ? this._inputLast : this._inputFirst;

            if ( ( this._inputFirst.val() > this._inputLast.val() && event.type === "mousedown" && !$(event.target).hasClass("ui-slider-handle")) ) {
                thisSlider.blur();
            } else if ( event.type === "mousedown" ) {
                return;
            }
            if ( min > max && !this._sliderTarget ) {
                //this prevents min from being greater then max
                thisSlider.val( first ? max: min ).slider( "refresh" );
                this._trigger( "normalize" );
            } else if ( min > max ) {
                //this makes it so clicks on the target on either extreme go to the closest handle
                thisSlider.val( this._targetVal ).slider( "refresh" );

                //You must wait for the stack to unwind so first slider is updated before updating second
                setTimeout( function() {
                    otherSlider.val( first ? min: max ).slider( "refresh" );
                    $.data( otherSlider.get(0), "mobile-slider" ).handle.focus();
                    self._sliderFirst.css( "z-index", first ? "" : 1 );
                    self._trigger( "normalize" );
                }, 0 );
                this._proxy = ( first ) ? "first" : "last";
            }
            //fixes issue where when both _sliders are at min they cannot be adjusted
            if ( min === max ) {
                $.data( thisSlider.get(0), "mobile-slider" ).handle.css( "z-index", 1 );
                $.data( otherSlider.get(0), "mobile-slider" ).handle.css( "z-index", 0 );
            } else {
                $.data( otherSlider.get(0), "mobile-slider" ).handle.css( "z-index", "" );
                $.data( thisSlider.get(0), "mobile-slider" ).handle.css( "z-index", "" );
            }

            this._updateHighlight();

            if ( min >= max ) {
                return false;
            }
        },

        _updateHighlight: function() {
            var min = parseInt( $.data( this._inputFirst.get(0), "mobile-slider" ).handle.get(0).style.left, 10 ),
                max = parseInt( $.data( this._inputLast.get(0), "mobile-slider" ).handle.get(0).style.left, 10 ),
                width = (max - min);

            this.element.find( ".ui-slider-bg" ).css({
                "margin-left": min + "%",
                "width": width + "%"
            });
        },

        _setTheme: function( value ) {
            this._inputFirst.slider( "option", "theme", value );
            this._inputLast.slider( "option", "theme", value );
        },

        _setTrackTheme: function( value ) {
            this._inputFirst.slider( "option", "trackTheme", value );
            this._inputLast.slider( "option", "trackTheme", value );
        },

        _setMini: function( value ) {
            this._inputFirst.slider( "option", "mini", value );
            this._inputLast.slider( "option", "mini", value );
            this.element.toggleClass( "ui-mini", !!value );
        },

        _setHighlight: function( value ) {
            this._inputFirst.slider( "option", "highlight", value );
            this._inputLast.slider( "option", "highlight", value );
        },

        _setDisabled: function( value ) {
            this._inputFirst.prop( "disabled", value );
            this._inputLast.prop( "disabled", value );
        },

        _destroy: function() {
            this._label.prependTo( this.element );
            this.element.removeClass( "ui-rangeslider ui-mini" );
            this._inputFirst.after( this._sliderFirst );
            this._inputLast.after( this._sliderLast );
            this._sliders.remove();
            this.element.find( "input" ).removeClass( "ui-rangeslider-first ui-rangeslider-last" ).slider( "destroy" );
        }

    }, $.mobile.behaviors.formReset ) );

})( jQuery );

(function( $, undefined ) {

    $.widget( "mobile.textinput", $.mobile.textinput, {
        options: {
            clearBtn: false,
            clearBtnText: "Clear text"
        },

        _create: function() {
            this._super();

            if ( this.isSearch ) {
                this.options.clearBtn = true;
            }

            if ( !!this.options.clearBtn && this.inputNeedsWrap ) {
                this._addClearBtn();
            }
        },

        clearButton: function() {
            return $( "<a href='#' tabindex='-1' aria-hidden='true' " +
                "class='ui-input-clear ui-btn ui-icon-delete ui-btn-icon-notext ui-corner-all'>" +
                "</a>" )
                    .attr( "title", this.options.clearBtnText )
                    .text( this.options.clearBtnText );
        },

        _clearBtnClick: function( event ) {
            this.element.val( "" )
                    .focus()
                    .trigger( "change" );

            this._clearBtn.addClass( "ui-input-clear-hidden" );
            event.preventDefault();
        },

        _addClearBtn: function() {

            if ( !this.options.enhanced ) {
                this._enhanceClear();
            }

            $.extend( this, {
                _clearBtn: this.widget().find("a.ui-input-clear")
            });

            this._bindClearEvents();

            this._toggleClear();

        },

        _enhanceClear: function() {

            this.clearButton().appendTo( this.widget() );
            this.widget().addClass( "ui-input-has-clear" );

        },

        _bindClearEvents: function() {

            this._on( this._clearBtn, {
                "click": "_clearBtnClick"
            });

            this._on({
                "keyup": "_toggleClear",
                "change": "_toggleClear",
                "input": "_toggleClear",
                "focus": "_toggleClear",
                "blur": "_toggleClear",
                "cut": "_toggleClear",
                "paste": "_toggleClear"

            });

        },

        _unbindClear: function() {
            this._off( this._clearBtn, "click");
            this._off( this.element, "keyup change input focus blur cut paste" );
        },

        _setOptions: function( options ) {
            this._super( options );

            if ( options.clearBtn !== undefined &&
                !this.element.is( "textarea, :jqmData(type='range')" ) ) {
                if ( options.clearBtn ) {
                    this._addClearBtn();
                } else {
                    this._destroyClear();
                }
            }

            if ( options.clearBtnText !== undefined && this._clearBtn !== undefined ) {
                this._clearBtn.text( options.clearBtnText )
                    .attr("title", options.clearBtnText);
            }
        },

        _toggleClear: function() {
            this._delay( "_toggleClearClass", 0 );
        },

        _toggleClearClass: function() {
            this._clearBtn.toggleClass( "ui-input-clear-hidden", !this.element.val() );
        },

        _destroyClear: function() {
            this.widget().removeClass( "ui-input-has-clear" );
            this._unbindClear();
            this._clearBtn.remove();
        },

        _destroy: function() {
            this._super();
            if ( this.options.clearBtn ) {
                this._destroyClear();
            }
        }

    });

})( jQuery );

(function( $, undefined ) {

    $.widget( "mobile.textinput", $.mobile.textinput, {
        options: {
            autogrow:true,
            keyupTimeoutBuffer: 100
        },

        _create: function() {
            this._super();

            if ( this.options.autogrow && this.isTextarea ) {
                this._autogrow();
            }
        },

        _autogrow: function() {
            this.element.addClass( "ui-textinput-autogrow" );

            this._on({
                "keyup": "_timeout",
                "change": "_timeout",
                "input": "_timeout",
                "paste": "_timeout"
            });

            // Attach to the various you-have-become-visible notifications that the
            // various framework elements emit.
            // TODO: Remove all but the updatelayout handler once #6426 is fixed.
            this._on( true, this.document, {

                // TODO: Move to non-deprecated event
                "pageshow": "_handleShow",
                "popupbeforeposition": "_handleShow",
                "updatelayout": "_handleShow",
                "panelopen": "_handleShow"
            });
        },

        // Synchronously fix the widget height if this widget's parents are such
        // that they show/hide content at runtime. We still need to check whether
        // the widget is actually visible in case it is contained inside multiple
        // such containers. For example: panel contains collapsible contains
        // autogrow textinput. The panel may emit "panelopen" indicating that its
        // content has become visible, but the collapsible is still collapsed, so
        // the autogrow textarea is still not visible.
        _handleShow: function( event ) {
            if ( $.contains( event.target, this.element[ 0 ] ) &&
                this.element.is( ":visible" ) ) {

                if ( event.type !== "popupbeforeposition" ) {
                    this.element
                        .addClass( "ui-textinput-autogrow-resize" )
                        .animationComplete(
                            $.proxy( function() {
                                this.element.removeClass( "ui-textinput-autogrow-resize" );
                            }, this ),
                        "transition" );
                }
                this._prepareHeightUpdate();
            }
        },

        _unbindAutogrow: function() {
            this.element.removeClass( "ui-textinput-autogrow" );
            this._off( this.element, "keyup change input paste" );
            this._off( this.document,
                "pageshow popupbeforeposition updatelayout panelopen" );
        },

        keyupTimeout: null,

        _prepareHeightUpdate: function( delay ) {
            if ( this.keyupTimeout ) {
                clearTimeout( this.keyupTimeout );
            }
            if ( delay === undefined ) {
                this._updateHeight();
            } else {
                this.keyupTimeout = this._delay( "_updateHeight", delay );
            }
        },

        _timeout: function() {
            this._prepareHeightUpdate( this.options.keyupTimeoutBuffer );
        },

        _updateHeight: function() {
            var paddingTop, paddingBottom, paddingHeight, scrollHeight, clientHeight,
                borderTop, borderBottom, borderHeight, height,
                scrollTop = this.window.scrollTop();
            this.keyupTimeout = 0;

            // IE8 textareas have the onpage property - others do not
            if ( !( "onpage" in this.element[ 0 ] ) ) {
                this.element.css({
                    "height": 0,
                    "min-height": 0,
                    "max-height": 0
                });
            }

            scrollHeight = this.element[ 0 ].scrollHeight;
            clientHeight = this.element[ 0 ].clientHeight;
            borderTop = parseFloat( this.element.css( "border-top-width" ) );
            borderBottom = parseFloat( this.element.css( "border-bottom-width" ) );
            borderHeight = borderTop + borderBottom;
            height = scrollHeight + borderHeight + 15;

            // Issue 6179: Padding is not included in scrollHeight and
            // clientHeight by Firefox if no scrollbar is visible. Because
            // textareas use the border-box box-sizing model, padding should be
            // included in the new (assigned) height. Because the height is set
            // to 0, clientHeight == 0 in Firefox. Therefore, we can use this to
            // check if padding must be added.
            if ( clientHeight === 0 ) {
                paddingTop = parseFloat( this.element.css( "padding-top" ) );
                paddingBottom = parseFloat( this.element.css( "padding-bottom" ) );
                paddingHeight = paddingTop + paddingBottom;

                height += paddingHeight;
            }

            this.element.css({
                "height": height,
                "min-height": "",
                "max-height": ""
            });

            this.window.scrollTop( scrollTop );
        },

        refresh: function() {
            if ( this.options.autogrow && this.isTextarea ) {
                this._updateHeight();
            }
        },

        _setOptions: function( options ) {

            this._super( options );

            if ( options.autogrow !== undefined && this.isTextarea ) {
                if ( options.autogrow ) {
                    this._autogrow();
                } else {
                    this._unbindAutogrow();
                }
            }
        }

    });
})( jQuery );

(function( $, undefined ) {

$.widget( "mobile.selectmenu", $.extend( {
    initSelector: "select:not( :jqmData(role='slider')):not( :jqmData(role='flipswitch') )",

    options: {
        theme: null,
        icon: "carat-d",
        iconpos: "right",
        inline: false,
        corners: true,
        shadow: true,
        iconshadow: false, /* TODO: Deprecated in 1.4, remove in 1.5. */
        overlayTheme: null,
        dividerTheme: null,
        hidePlaceholderMenuItems: true,
        closeText: "Close",
        nativeMenu: true,
        // This option defaults to true on iOS devices.
        preventFocusZoom: /iPhone|iPad|iPod/.test( navigator.platform ) && navigator.userAgent.indexOf( "AppleWebKit" ) > -1,
        mini: false
    },

    _button: function() {
        return $( "<div/>" );
    },

    _setDisabled: function( value ) {
        this.element.attr( "disabled", value );
        this.button.attr( "aria-disabled", value );
        return this._setOption( "disabled", value );
    },

    _focusButton : function() {
        var self = this;

        setTimeout( function() {
            self.button.focus();
        }, 40);
    },

    _selectOptions: function() {
        return this.select.find( "option" );
    },

    // setup items that are generally necessary for select menu extension
    _preExtension: function() {
        var inline = this.options.inline || this.element.jqmData( "inline" ),
            mini = this.options.mini || this.element.jqmData( "mini" ),
            classes = "";
        // TODO: Post 1.1--once we have time to test thoroughly--any classes manually applied to the original element should be carried over to the enhanced element, with an `-enhanced` suffix. See https://github.com/jquery/jquery-mobile/issues/3577
        /* if ( $el[0].className.length ) {
            classes = $el[0].className;
        } */
        if ( !!~this.element[0].className.indexOf( "ui-btn-left" ) ) {
            classes = " ui-btn-left";
        }

        if (  !!~this.element[0].className.indexOf( "ui-btn-right" ) ) {
            classes = " ui-btn-right";
        }

        if ( inline ) {
            classes += " ui-btn-inline";
        }
        if ( mini ) {
            classes += " ui-mini";
        }

        this.select = this.element.removeClass( "ui-btn-left ui-btn-right" ).wrap( "<div class='ui-select" + classes + "'>" );
        this.selectId  = this.select.attr( "id" ) || ( "select-" + this.uuid );
        this.buttonId = this.selectId + "-button";
        this.label = $( "label[for='"+ this.selectId +"']" );
        this.isMultiple = this.select[ 0 ].multiple;
    },

    _destroy: function() {
        var wrapper = this.element.parents( ".ui-select" );
        if ( wrapper.length > 0 ) {
            if ( wrapper.is( ".ui-btn-left, .ui-btn-right" ) ) {
                this.element.addClass( wrapper.hasClass( "ui-btn-left" ) ? "ui-btn-left" : "ui-btn-right" );
            }
            this.element.insertAfter( wrapper );
            wrapper.remove();
        }
    },

    _create: function() {
        this._preExtension();

        this.button = this._button();

        var self = this,

            options = this.options,

            iconpos = options.icon ? ( options.iconpos || this.select.jqmData( "iconpos" ) ) : false,

            button = this.button
                .insertBefore( this.select )
                .attr( "id", this.buttonId )
                .addClass( "ui-btn" +
                    ( options.icon ? ( " ui-icon-" + options.icon + " ui-btn-icon-" + iconpos +
                    ( options.iconshadow ? " ui-shadow-icon" : "" ) ) :    "" ) + /* TODO: Remove in 1.5. */
                    ( options.theme ? " ui-btn-" + options.theme : "" ) +
                    ( options.corners ? " ui-corner-all" : "" ) +
                    ( options.shadow ? " ui-shadow" : "" ) );

        this.setButtonText();

        // Opera does not properly support opacity on select elements
        // In Mini, it hides the element, but not its text
        // On the desktop,it seems to do the opposite
        // for these reasons, using the nativeMenu option results in a full native select in Opera
        if ( options.nativeMenu && window.opera && window.opera.version ) {
            button.addClass( "ui-select-nativeonly" );
        }

        // Add counter for multi selects
        if ( this.isMultiple ) {
            this.buttonCount = $( "<span>" )
                .addClass( "ui-li-count ui-body-inherit" )
                .hide()
                .appendTo( button.addClass( "ui-li-has-count" ) );
        }

        // Disable if specified
        if ( options.disabled || this.element.attr( "disabled" )) {
            this.disable();
        }

        // Events on native select
        this.select.change(function() {
            self.refresh();

            if ( !!options.nativeMenu ) {
                self._delay( function() {
                    self.select.blur();
                });
            }
        });

        this._handleFormReset();

        this._on( this.button, {
            keydown: "_handleKeydown"
        });

        this.build();
    },

    build: function() {
        var self = this;

        this.select
            .appendTo( self.button )
            .bind( "vmousedown", function() {
                // Add active class to button
                self.button.addClass( $.mobile.activeBtnClass );
            })
            .bind( "focus", function() {
                self.button.addClass( $.mobile.focusClass );
            })
            .bind( "blur", function() {
                self.button.removeClass( $.mobile.focusClass );
            })
            .bind( "focus vmouseover", function() {
                self.button.trigger( "vmouseover" );
            })
            .bind( "vmousemove", function() {
                // Remove active class on scroll/touchmove
                self.button.removeClass( $.mobile.activeBtnClass );
            })
            .bind( "change blur vmouseout", function() {
                self.button.trigger( "vmouseout" )
                    .removeClass( $.mobile.activeBtnClass );
            });

        // In many situations, iOS will zoom into the select upon tap, this prevents that from happening
        self.button.bind( "vmousedown", function() {
            if ( self.options.preventFocusZoom ) {
                    $.mobile.zoom.disable( true );
            }
        });
        self.label.bind( "click focus", function() {
            if ( self.options.preventFocusZoom ) {
                    $.mobile.zoom.disable( true );
            }
        });
        self.select.bind( "focus", function() {
            if ( self.options.preventFocusZoom ) {
                    $.mobile.zoom.disable( true );
            }
        });
        self.button.bind( "mouseup", function() {
            if ( self.options.preventFocusZoom ) {
                setTimeout(function() {
                    $.mobile.zoom.enable( true );
                }, 0 );
            }
        });
        self.select.bind( "blur", function() {
            if ( self.options.preventFocusZoom ) {
                $.mobile.zoom.enable( true );
            }
        });

    },

    selected: function() {
        return this._selectOptions().filter( ":selected" );
    },

    selectedIndices: function() {
        var self = this;

        return this.selected().map(function() {
            return self._selectOptions().index( this );
        }).get();
    },

    setButtonText: function() {
        var self = this,
            selected = this.selected(),
            text = this.placeholder,
            span = $( document.createElement( "span" ) );

        this.button.children( "span" ).not( ".ui-li-count" ).remove().end().end().prepend( (function() {
            if ( selected.length ) {
                text = selected.map(function() {
                    return $( this ).text();
                }).get().join( ", " );
            } else {
                text = self.placeholder;
            }

            if ( text ) {
                span.text( text );
            } else {

                // Set the contents to &nbsp; which we write as &#160; to be XHTML compliant - see gh-6699
                span.html( "&#160;" );
            }

            // TODO possibly aggregate multiple select option classes
            return span
                .addClass( self.select.attr( "class" ) )
                .addClass( selected.attr( "class" ) )
                .removeClass( "ui-screen-hidden" );
        })());
    },

    setButtonCount: function() {
        var selected = this.selected();

        // multiple count inside button
        if ( this.isMultiple ) {
            this.buttonCount[ selected.length > 1 ? "show" : "hide" ]().text( selected.length );
        }
    },

    _handleKeydown: function( /* event */ ) {
        this._delay( "_refreshButton" );
    },

    _reset: function() {
        this.refresh();
    },

    _refreshButton: function() {
        this.setButtonText();
        this.setButtonCount();
    },

    refresh: function() {
        this._refreshButton();
    },

    // open and close preserved in native selects
    // to simplify users code when looping over selects
    open: $.noop,
    close: $.noop,

    disable: function() {
        this._setDisabled( true );
        this.button.addClass( "ui-state-disabled" );
    },

    enable: function() {
        this._setDisabled( false );
        this.button.removeClass( "ui-state-disabled" );
    }
}, $.mobile.behaviors.formReset ) );

})( jQuery );

(function( $, undefined ) {

$.mobile.links = function( target ) {

    //links within content areas, tests included with page
    $( target )
        .find( "a" )
        .jqmEnhanceable()
        .filter( ":jqmData(rel='popup')[href][href!='']" )
        .each( function() {
            // Accessibility info for popups
            var element = this,
                idref = element.getAttribute( "href" ).substring( 1 );

            if ( idref ) {
                element.setAttribute( "aria-haspopup", true );
                element.setAttribute( "aria-owns", idref );
                element.setAttribute( "aria-expanded", false );
            }
        })
        .end()
        .not( ".ui-btn, :jqmData(role='none'), :jqmData(role='nojs')" )
        .addClass( "ui-link" );

};

})( jQuery );


(function( $, undefined ) {

function fitSegmentInsideSegment( windowSize, segmentSize, offset, desired ) {
    var returnValue = desired;

    if ( windowSize < segmentSize ) {
        // Center segment if it's bigger than the window
        returnValue = offset + ( windowSize - segmentSize ) / 2;
    } else {
        // Otherwise center it at the desired coordinate while keeping it completely inside the window
        returnValue = Math.min( Math.max( offset, desired - segmentSize / 2 ), offset + windowSize - segmentSize );
    }

    return returnValue;
}

function getWindowCoordinates( theWindow ) {
    return {
        x: theWindow.scrollLeft(),
        y: theWindow.scrollTop(),
        cx: ( theWindow[ 0 ].innerWidth || theWindow.width() ),
        cy: ( theWindow[ 0 ].innerHeight || theWindow.height() )
    };
}

$.widget( "mobile.popup", {
    options: {
        wrapperClass: null,
        theme: null,
        overlayTheme: null,
        shadow: true,
        corners: true,
        transition: "none",
        positionTo: "origin",
        tolerance: null,
        closeLinkSelector: "a:jqmData(rel='back')",
        closeLinkEvents: "click.popup",
        navigateEvents: "navigate.popup",
        closeEvents: "navigate.popup pagebeforechange.popup",
        dismissible: true,
        enhanced: false,

        // NOTE Windows Phone 7 has a scroll position caching issue that
        //      requires us to disable popup history management by default
        //      https://github.com/jquery/jquery-mobile/issues/4784
        //
        // NOTE this option is modified in _create!
        history: !$.mobile.browser.oldIE
    },

    // When the user depresses the mouse/finger on an element inside the popup while the popup is
    // open, we ignore resize events for a short while. This prevents #6961.
    _handleDocumentVmousedown: function( theEvent ) {
        if ( this._isOpen && $.contains( this._ui.container[ 0 ], theEvent.target ) ) {
            this._ignoreResizeEvents();
        }
    },

    _create: function() {
        var theElement = this.element,
            myId = theElement.attr( "id" ),
            currentOptions = this.options;

        // We need to adjust the history option to be false if there's no AJAX nav.
        // We can't do it in the option declarations because those are run before
        // it is determined whether there shall be AJAX nav.
        currentOptions.history = currentOptions.history && $.mobile.ajaxEnabled && $.mobile.hashListeningEnabled;

        this._on( this.document, {
            "vmousedown": "_handleDocumentVmousedown"
        });

        // Define instance variables
        $.extend( this, {
            _scrollTop: 0,
            _page: theElement.closest( ".ui-page" ),
            _ui: null,
            _fallbackTransition: "",
            _currentTransition: false,
            _prerequisites: null,
            _isOpen: false,
            _tolerance: null,
            _resizeData: null,
            _ignoreResizeTo: 0,
            _orientationchangeInProgress: false
        });

        if ( this._page.length === 0 ) {
            this._page = $( "body" );
        }

        if ( currentOptions.enhanced ) {
            this._ui = {
                container: theElement.parent(),
                screen: theElement.parent().prev(),
                placeholder: $( this.document[ 0 ].getElementById( myId + "-placeholder" ) )
            };
        } else {
            this._ui = this._enhance( theElement, myId );
            this._applyTransition( currentOptions.transition );
        }
        this
            ._setTolerance( currentOptions.tolerance )
            ._ui.focusElement = this._ui.container;

        // Event handlers
        this._on( this._ui.screen, { "vclick": "_eatEventAndClose" } );
        this._on( this.window, {
            orientationchange: $.proxy( this, "_handleWindowOrientationchange" ),
            resize: $.proxy( this, "_handleWindowResize" ),
            keyup: $.proxy( this, "_handleWindowKeyUp" )
        });
        this._on( this.document, { "focusin": "_handleDocumentFocusIn" } );
    },

    _enhance: function( theElement, myId ) {
        var currentOptions = this.options,
            wrapperClass = currentOptions.wrapperClass,
            ui = {
                screen: $( "<div class='ui-screen-hidden ui-popup-screen " +
                this._themeClassFromOption( "ui-overlay-", currentOptions.overlayTheme ) + "'></div>" ),
                placeholder: $( "<div style='display: none;'><!-- placeholder --></div>" ),
                container: $( "<div class='ui-popup-container ui-popup-hidden ui-popup-truncate" +
                    ( wrapperClass ? ( " " + wrapperClass ) : "" ) + "'></div>" )
            },
            fragment = this.document[ 0 ].createDocumentFragment();

        fragment.appendChild( ui.screen[ 0 ] );
        fragment.appendChild( ui.container[ 0 ] );

        if ( myId ) {
            ui.screen.attr( "id", myId + "-screen" );
            ui.container.attr( "id", myId + "-popup" );
            ui.placeholder
                .attr( "id", myId + "-placeholder" )
                .html( "<!-- placeholder for " + myId + " -->" );
        }

        // Apply the proto
        this._page[ 0 ].appendChild( fragment );
        // Leave a placeholder where the element used to be
        ui.placeholder.insertAfter( theElement );
        theElement
            .detach()
            .addClass( "ui-popup " +
                this._themeClassFromOption( "ui-body-", currentOptions.theme ) + " " +
                ( currentOptions.shadow ? "ui-overlay-shadow " : "" ) +
                ( currentOptions.corners ? "ui-corner-all " : "" ) )
            .appendTo( ui.container );

        return ui;
    },

    _eatEventAndClose: function( theEvent ) {
        theEvent.preventDefault();
        theEvent.stopImmediatePropagation();
        if ( this.options.dismissible ) {
            this.close();
        }
        return false;
    },

    // Make sure the screen covers the entire document - CSS is sometimes not
    // enough to accomplish this.
    _resizeScreen: function() {
        var screen = this._ui.screen,
            popupHeight = this._ui.container.outerHeight( true ),
            screenHeight = screen.removeAttr( "style" ).height(),

            // Subtracting 1 here is necessary for an obscure Andrdoid 4.0 bug where
            // the browser hangs if the screen covers the entire document :/
            documentHeight = this.document.height() - 1;

        if ( screenHeight < documentHeight ) {
            screen.height( documentHeight );
        } else if ( popupHeight > screenHeight ) {
            screen.height( popupHeight );
        }
    },

    _handleWindowKeyUp: function( theEvent ) {
        if ( this._isOpen && theEvent.keyCode === $.mobile.keyCode.ESCAPE ) {
            return this._eatEventAndClose( theEvent );
        }
    },

    _expectResizeEvent: function() {
        var windowCoordinates = getWindowCoordinates( this.window );

        if ( this._resizeData ) {
            if ( windowCoordinates.x === this._resizeData.windowCoordinates.x &&
                windowCoordinates.y === this._resizeData.windowCoordinates.y &&
                windowCoordinates.cx === this._resizeData.windowCoordinates.cx &&
                windowCoordinates.cy === this._resizeData.windowCoordinates.cy ) {
                // timeout not refreshed
                return false;
            } else {
                // clear existing timeout - it will be refreshed below
                clearTimeout( this._resizeData.timeoutId );
            }
        }

        this._resizeData = {
            timeoutId: this._delay( "_resizeTimeout", 200 ),
            windowCoordinates: windowCoordinates
        };

        return true;
    },

    _resizeTimeout: function() {
        if ( this._isOpen ) {
            if ( !this._expectResizeEvent() ) {
                if ( this._ui.container.hasClass( "ui-popup-hidden" ) ) {
                    // effectively rapid-open the popup while leaving the screen intact
                    this._ui.container.removeClass( "ui-popup-hidden ui-popup-truncate" );
                    this.reposition( { positionTo: "window" } );
                    this._ignoreResizeEvents();
                }

                this._resizeScreen();
                this._resizeData = null;
                this._orientationchangeInProgress = false;
            }
        } else {
            this._resizeData = null;
            this._orientationchangeInProgress = false;
        }
    },

    _stopIgnoringResizeEvents: function() {
        this._ignoreResizeTo = 0;
    },

    _ignoreResizeEvents: function() {
        if ( this._ignoreResizeTo ) {
            clearTimeout( this._ignoreResizeTo );
        }
        this._ignoreResizeTo = this._delay( "_stopIgnoringResizeEvents", 1000 );
    },

    _handleWindowResize: function(/* theEvent */) {
        if ( this._isOpen && this._ignoreResizeTo === 0 ) {
            if ( ( this._expectResizeEvent() || this._orientationchangeInProgress ) &&
                !this._ui.container.hasClass( "ui-popup-hidden" ) ) {
                // effectively rapid-close the popup while leaving the screen intact
                this._ui.container
                    .addClass( "ui-popup-hidden ui-popup-truncate" )
                    .removeAttr( "style" );
            }
        }
    },

    _handleWindowOrientationchange: function(/* theEvent */) {
        if ( !this._orientationchangeInProgress && this._isOpen && this._ignoreResizeTo === 0 ) {
            this._expectResizeEvent();
            this._orientationchangeInProgress = true;
        }
    },

    // When the popup is open, attempting to focus on an element that is not a
    // child of the popup will redirect focus to the popup
    _handleDocumentFocusIn: function( theEvent ) {
        var target,
            targetElement = theEvent.target,
            ui = this._ui;

        if ( !this._isOpen ) {
            return;
        }

        if ( targetElement !== ui.container[ 0 ] ) {
            target = $( targetElement );
            if ( !$.contains( ui.container[ 0 ], targetElement ) ) {
                $( this.document[ 0 ].activeElement ).one( "focus", $.proxy( function() {
                    this._safelyBlur( targetElement );
                }, this ) );
                ui.focusElement.focus();
                theEvent.preventDefault();
                theEvent.stopImmediatePropagation();
                return false;
            } else if ( ui.focusElement[ 0 ] === ui.container[ 0 ] ) {
                ui.focusElement = target;
            }
        }

        this._ignoreResizeEvents();
    },

    _themeClassFromOption: function( prefix, value ) {
        return ( value ? ( value === "none" ? "" : ( prefix + value ) ) : ( prefix + "inherit" ) );
    },

    _applyTransition: function( value ) {
        if ( value ) {
            this._ui.container.removeClass( this._fallbackTransition );
            if ( value !== "none" ) {
                this._fallbackTransition = $.mobile._maybeDegradeTransition( value );
                if ( this._fallbackTransition === "none" ) {
                    this._fallbackTransition = "";
                }
                this._ui.container.addClass( this._fallbackTransition );
            }
        }

        return this;
    },

    _setOptions: function( newOptions ) {
        var currentOptions = this.options,
            theElement = this.element,
            screen = this._ui.screen;

        if ( newOptions.wrapperClass !== undefined ) {
            this._ui.container
                .removeClass( currentOptions.wrapperClass )
                .addClass( newOptions.wrapperClass );
        }

        if ( newOptions.theme !== undefined ) {
            theElement
                .removeClass( this._themeClassFromOption( "ui-body-", currentOptions.theme ) )
                .addClass( this._themeClassFromOption( "ui-body-", newOptions.theme ) );
        }

        if ( newOptions.overlayTheme !== undefined ) {
            screen
                .removeClass( this._themeClassFromOption( "ui-overlay-", currentOptions.overlayTheme ) )
                .addClass( this._themeClassFromOption( "ui-overlay-", newOptions.overlayTheme ) );

            if ( this._isOpen ) {
                screen.addClass( "in" );
            }
        }

        if ( newOptions.shadow !== undefined ) {
            theElement.toggleClass( "ui-overlay-shadow", newOptions.shadow );
        }

        if ( newOptions.corners !== undefined ) {
            theElement.toggleClass( "ui-corner-all", newOptions.corners );
        }

        if ( newOptions.transition !== undefined ) {
            if ( !this._currentTransition ) {
                this._applyTransition( newOptions.transition );
            }
        }

        if ( newOptions.tolerance !== undefined ) {
            this._setTolerance( newOptions.tolerance );
        }

        if ( newOptions.disabled !== undefined ) {
            if ( newOptions.disabled ) {
                this.close();
            }
        }

        return this._super( newOptions );
    },

    _setTolerance: function( value ) {
        var tol = { t: 30, r: 15, b: 30, l: 15 },
            ar;

        if ( value !== undefined ) {
            ar = String( value ).split( "," );

            $.each( ar, function( idx, val ) { ar[ idx ] = parseInt( val, 10 ); } );

            switch( ar.length ) {
                // All values are to be the same
                case 1:
                    if ( !isNaN( ar[ 0 ] ) ) {
                        tol.t = tol.r = tol.b = tol.l = ar[ 0 ];
                    }
                    break;

                // The first value denotes top/bottom tolerance, and the second value denotes left/right tolerance
                case 2:
                    if ( !isNaN( ar[ 0 ] ) ) {
                        tol.t = tol.b = ar[ 0 ];
                    }
                    if ( !isNaN( ar[ 1 ] ) ) {
                        tol.l = tol.r = ar[ 1 ];
                    }
                    break;

                // The array contains values in the order top, right, bottom, left
                case 4:
                    if ( !isNaN( ar[ 0 ] ) ) {
                        tol.t = ar[ 0 ];
                    }
                    if ( !isNaN( ar[ 1 ] ) ) {
                        tol.r = ar[ 1 ];
                    }
                    if ( !isNaN( ar[ 2 ] ) ) {
                        tol.b = ar[ 2 ];
                    }
                    if ( !isNaN( ar[ 3 ] ) ) {
                        tol.l = ar[ 3 ];
                    }
                    break;

                default:
                    break;
            }
        }

        this._tolerance = tol;
        return this;
    },

    _clampPopupWidth: function( infoOnly ) {
        var menuSize,
            windowCoordinates = getWindowCoordinates( this.window ),
            // rectangle within which the popup must fit
            rectangle = {
                x: this._tolerance.l,
                y: windowCoordinates.y + this._tolerance.t,
                cx: windowCoordinates.cx - this._tolerance.l - this._tolerance.r,
                cy: windowCoordinates.cy - this._tolerance.t - this._tolerance.b
            };

        if ( !infoOnly ) {
            // Clamp the width of the menu before grabbing its size
            this._ui.container.css( "max-width", rectangle.cx );
        }

        menuSize = {
            cx: this._ui.container.outerWidth( true ),
            cy: this._ui.container.outerHeight( true )
        };

        return { rc: rectangle, menuSize: menuSize };
    },

    _calculateFinalLocation: function( desired, clampInfo ) {
        var returnValue,
            rectangle = clampInfo.rc,
            menuSize = clampInfo.menuSize;

        // Center the menu over the desired coordinates, while not going outside
        // the window tolerances. This will center wrt. the window if the popup is
        // too large.
        returnValue = {
            left: fitSegmentInsideSegment( rectangle.cx, menuSize.cx, rectangle.x, desired.x ),
            top: fitSegmentInsideSegment( rectangle.cy, menuSize.cy, rectangle.y, desired.y )
        };

        // Make sure the top of the menu is visible
        returnValue.top = Math.max( 0, returnValue.top );

        // If the height of the menu is smaller than the height of the document
        // align the bottom with the bottom of the document

        returnValue.top -= Math.min( returnValue.top,
            Math.max( 0, returnValue.top + menuSize.cy - this.document.height() ) );

        return returnValue;
    },

    // Try and center the overlay over the given coordinates
    _placementCoords: function( desired ) {
        return this._calculateFinalLocation( desired, this._clampPopupWidth() );
    },

    _createPrerequisites: function( screenPrerequisite, containerPrerequisite, whenDone ) {
        var prerequisites,
            self = this;

        // It is important to maintain both the local variable prerequisites and
        // self._prerequisites. The local variable remains in the closure of the
        // functions which call the callbacks passed in. The comparison between the
        // local variable and self._prerequisites is necessary, because once a
        // function has been passed to .animationComplete() it will be called next
        // time an animation completes, even if that's not the animation whose end
        // the function was supposed to catch (for example, if an abort happens
        // during the opening animation, the .animationComplete handler is not
        // called for that animation anymore, but the handler remains attached, so
        // it is called the next time the popup is opened - making it stale.
        // Comparing the local variable prerequisites to the widget-level variable
        // self._prerequisites ensures that callbacks triggered by a stale
        // .animationComplete will be ignored.

        prerequisites = {
            screen: $.Deferred(),
            container: $.Deferred()
        };

        prerequisites.screen.then( function() {
            if ( prerequisites === self._prerequisites ) {
                screenPrerequisite();
            }
        });

        prerequisites.container.then( function() {
            if ( prerequisites === self._prerequisites ) {
                containerPrerequisite();
            }
        });

        $.when( prerequisites.screen, prerequisites.container ).done( function() {
            if ( prerequisites === self._prerequisites ) {
                self._prerequisites = null;
                whenDone();
            }
        });

        self._prerequisites = prerequisites;
    },

    _animate: function( args ) {
        // NOTE before removing the default animation of the screen
        //      this had an animate callback that would resolve the deferred
        //      now the deferred is resolved immediately
        // TODO remove the dependency on the screen deferred
        this._ui.screen
            .removeClass( args.classToRemove )
            .addClass( args.screenClassToAdd );

        args.prerequisites.screen.resolve();

        if ( args.transition && args.transition !== "none" ) {
            if ( args.applyTransition ) {
                this._applyTransition( args.transition );
            }
            if ( this._fallbackTransition ) {
                this._ui.container
                    .addClass( args.containerClassToAdd )
                    .removeClass( args.classToRemove )
                    .animationComplete( $.proxy( args.prerequisites.container, "resolve" ) );
                return;
            }
        }
        this._ui.container.removeClass( args.classToRemove );
        args.prerequisites.container.resolve();
    },

    // The desired coordinates passed in will be returned untouched if no reference element can be identified via
    // desiredPosition.positionTo. Nevertheless, this function ensures that its return value always contains valid
    // x and y coordinates by specifying the center middle of the window if the coordinates are absent.
    // options: { x: coordinate, y: coordinate, positionTo: string: "origin", "window", or jQuery selector
    _desiredCoords: function( openOptions ) {
        var offset,
            dst = null,
            windowCoordinates = getWindowCoordinates( this.window ),
            x = openOptions.x,
            y = openOptions.y,
            pTo = openOptions.positionTo;

        // Establish which element will serve as the reference
        if ( pTo && pTo !== "origin" ) {
            if ( pTo === "window" ) {
                x = windowCoordinates.cx / 2 + windowCoordinates.x;
                y = windowCoordinates.cy / 2 + windowCoordinates.y;
            } else {
                try {
                    dst = $( pTo );
                } catch( err ) {
                    dst = null;
                }
                if ( dst ) {
                    dst.filter( ":visible" );
                    if ( dst.length === 0 ) {
                        dst = null;
                    }
                }
            }
        }

        // If an element was found, center over it
        if ( dst ) {
            offset = dst.offset();
            x = offset.left + dst.outerWidth() / 2;
            y = offset.top + dst.outerHeight() / 2;
        }

        // Make sure x and y are valid numbers - center over the window
        if ( $.type( x ) !== "number" || isNaN( x ) ) {
            x = windowCoordinates.cx / 2 + windowCoordinates.x;
        }
        if ( $.type( y ) !== "number" || isNaN( y ) ) {
            y = windowCoordinates.cy / 2 + windowCoordinates.y;
        }

        return { x: x, y: y };
    },

    _reposition: function( openOptions ) {
        // We only care about position-related parameters for repositioning
        openOptions = {
            x: openOptions.x,
            y: openOptions.y,
            positionTo: openOptions.positionTo
        };
        this._trigger( "beforeposition", undefined, openOptions );
        this._ui.container.offset( this._placementCoords( this._desiredCoords( openOptions ) ) );
    },

    reposition: function( openOptions ) {
        if ( this._isOpen ) {
            this._reposition( openOptions );
        }
    },

    _safelyBlur: function( currentElement ){
        if ( currentElement !== this.window[ 0 ] &&
            currentElement.nodeName.toLowerCase() !== "body" ) {
                $( currentElement ).blur();
        }
    },

    _openPrerequisitesComplete: function() {
        var id = this.element.attr( "id" ),
            firstFocus = this._ui.container.find( ":focusable" ).first();

        this._ui.container.addClass( "ui-popup-active" );
        this._isOpen = true;
        this._resizeScreen();

        // Check to see if currElement is not a child of the container.  If it's not, blur
        if ( !$.contains( this._ui.container[ 0 ], this.document[ 0 ].activeElement ) ) {
            this._safelyBlur( this.document[ 0 ].activeElement );
        }
        if ( firstFocus.length > 0 ) {
            this._ui.focusElement = firstFocus;
        }
        this._ignoreResizeEvents();
        if ( id ) {
            this.document.find( "[aria-haspopup='true'][aria-owns='" +  id + "']" ).attr( "aria-expanded", true );
        }
        this._trigger( "afteropen" );
    },

    _open: function( options ) {
        var openOptions = $.extend( {}, this.options, options ),
            // TODO move blacklist to private method
            androidBlacklist = ( function() {
                var ua = navigator.userAgent,
                    // Rendering engine is Webkit, and capture major version
                    wkmatch = ua.match( /AppleWebKit\/([0-9\.]+)/ ),
                    wkversion = !!wkmatch && wkmatch[ 1 ],
                    androidmatch = ua.match( /Android (\d+(?:\.\d+))/ ),
                    andversion = !!androidmatch && androidmatch[ 1 ],
                    chromematch = ua.indexOf( "Chrome" ) > -1;

                // Platform is Android, WebKit version is greater than 534.13 ( Android 3.2.1 ) and not Chrome.
                if ( androidmatch !== null && andversion === "4.0" && wkversion && wkversion > 534.13 && !chromematch ) {
                    return true;
                }
                return false;
            }());

        // Count down to triggering "popupafteropen" - we have two prerequisites:
        // 1. The popup window animation completes (container())
        // 2. The screen opacity animation completes (screen())
        this._createPrerequisites(
            $.noop,
            $.noop,
            $.proxy( this, "_openPrerequisitesComplete" ) );

        this._currentTransition = openOptions.transition;
        this._applyTransition( openOptions.transition );

        this._ui.screen.removeClass( "ui-screen-hidden" );
        this._ui.container.removeClass( "ui-popup-truncate" );

        // Give applications a chance to modify the contents of the container before it appears
        this._reposition( openOptions );

        this._ui.container.removeClass( "ui-popup-hidden" );

        if ( this.options.overlayTheme && androidBlacklist ) {
            /* TODO: The native browser on Android 4.0.X ("Ice Cream Sandwich") suffers from an issue where the popup overlay appears to be z-indexed above the popup itself when certain other styles exist on the same page -- namely, any element set to `position: fixed` and certain types of input. These issues are reminiscent of previously uncovered bugs in older versions of Android's native browser: https://github.com/scottjehl/Device-Bugs/issues/3
            This fix closes the following bugs ( I use "closes" with reluctance, and stress that this issue should be revisited as soon as possible ):
            https://github.com/jquery/jquery-mobile/issues/4816
            https://github.com/jquery/jquery-mobile/issues/4844
            https://github.com/jquery/jquery-mobile/issues/4874
            */

            // TODO sort out why this._page isn't working
            this.element.closest( ".ui-page" ).addClass( "ui-popup-open" );
        }
        this._animate({
            additionalCondition: true,
            transition: openOptions.transition,
            classToRemove: "",
            screenClassToAdd: "in",
            containerClassToAdd: "in",
            applyTransition: false,
            prerequisites: this._prerequisites
        });
    },

    _closePrerequisiteScreen: function() {
        this._ui.screen
            .removeClass( "out" )
            .addClass( "ui-screen-hidden" );
    },

    _closePrerequisiteContainer: function() {
        this._ui.container
            .removeClass( "reverse out" )
            .addClass( "ui-popup-hidden ui-popup-truncate" )
            .removeAttr( "style" );
    },

    _closePrerequisitesDone: function() {
        var container = this._ui.container,
            id = this.element.attr( "id" );

        // remove the global mutex for popups
        $.mobile.popup.active = undefined;

        // Blur elements inside the container, including the container
        $( ":focus", container[ 0 ] ).add( container[ 0 ] ).blur();

        if ( id ) {
            this.document.find( "[aria-haspopup='true'][aria-owns='" +  id + "']" ).attr( "aria-expanded", false );
        }

        // alert users that the popup is closed
        this._trigger( "afterclose" );
    },

    _close: function( immediate ) {
        this._ui.container.removeClass( "ui-popup-active" );
        this._page.removeClass( "ui-popup-open" );

        this._isOpen = false;

        // Count down to triggering "popupafterclose" - we have two prerequisites:
        // 1. The popup window reverse animation completes (container())
        // 2. The screen opacity animation completes (screen())
        this._createPrerequisites(
            $.proxy( this, "_closePrerequisiteScreen" ),
            $.proxy( this, "_closePrerequisiteContainer" ),
            $.proxy( this, "_closePrerequisitesDone" ) );

        this._animate( {
            additionalCondition: this._ui.screen.hasClass( "in" ),
            transition: ( immediate ? "none" : ( this._currentTransition ) ),
            classToRemove: "in",
            screenClassToAdd: "out",
            containerClassToAdd: "reverse out",
            applyTransition: true,
            prerequisites: this._prerequisites
        });
    },

    _unenhance: function() {
        if ( this.options.enhanced ) {
            return;
        }

        // Put the element back to where the placeholder was and remove the "ui-popup" class
        this._setOptions( { theme: $.mobile.popup.prototype.options.theme } );
        this.element
            // Cannot directly insertAfter() - we need to detach() first, because
            // insertAfter() will do nothing if the payload div was not attached
            // to the DOM at the time the widget was created, and so the payload
            // will remain inside the container even after we call insertAfter().
            // If that happens and we remove the container a few lines below, we
            // will cause an infinite recursion - #5244
            .detach()
            .insertAfter( this._ui.placeholder )
            .removeClass( "ui-popup ui-overlay-shadow ui-corner-all ui-body-inherit" );
        this._ui.screen.remove();
        this._ui.container.remove();
        this._ui.placeholder.remove();
    },

    _destroy: function() {
        if ( $.mobile.popup.active === this ) {
            this.element.one( "popupafterclose", $.proxy( this, "_unenhance" ) );
            this.close();
        } else {
            this._unenhance();
        }

        return this;
    },

    _closePopup: function( theEvent, data ) {
        var parsedDst, toUrl,
            currentOptions = this.options,
            immediate = false;

        if ( ( theEvent && theEvent.isDefaultPrevented() ) || $.mobile.popup.active !== this ) {
            return;
        }

        // restore location on screen
        window.scrollTo( 0, this._scrollTop );

        if ( theEvent && theEvent.type === "pagebeforechange" && data ) {
            // Determine whether we need to rapid-close the popup, or whether we can
            // take the time to run the closing transition
            if ( typeof data.toPage === "string" ) {
                parsedDst = data.toPage;
            } else {
                parsedDst = data.toPage.jqmData( "url" );
            }
            parsedDst = $.mobile.path.parseUrl( parsedDst );
            toUrl = parsedDst.pathname + parsedDst.search + parsedDst.hash;

            if ( this._myUrl !== $.mobile.path.makeUrlAbsolute( toUrl ) ) {
                // Going to a different page - close immediately
                immediate = true;
            } else {
                theEvent.preventDefault();
            }
        }

        // remove nav bindings
        this.window.off( currentOptions.closeEvents );
        // unbind click handlers added when history is disabled
        this.element.undelegate( currentOptions.closeLinkSelector, currentOptions.closeLinkEvents );

        this._close( immediate );
    },

    // any navigation event after a popup is opened should close the popup
    // NOTE the pagebeforechange is bound to catch navigation events that don't
    //      alter the url (eg, dialogs from popups)
    _bindContainerClose: function() {
        this.window
            .on( this.options.closeEvents, $.proxy( this, "_closePopup" ) );
    },

    widget: function() {
        return this._ui.container;
    },

    // TODO no clear deliniation of what should be here and
    // what should be in _open. Seems to be "visual" vs "history" for now
    open: function( options ) {
        var url, hashkey, activePage, currentIsDialog, hasHash, urlHistory,
            self = this,
            currentOptions = this.options;

        // make sure open is idempotent
        if ( $.mobile.popup.active || currentOptions.disabled ) {
            return this;
        }

        // set the global popup mutex
        $.mobile.popup.active = this;
        this._scrollTop = this.window.scrollTop();

        // if history alteration is disabled close on navigate events
        // and leave the url as is
        if ( !( currentOptions.history ) ) {
            self._open( options );
            self._bindContainerClose();

            // When histoy is disabled we have to grab the data-rel
            // back link clicks so we can close the popup instead of
            // relying on history to do it for us
            self.element
                .delegate( currentOptions.closeLinkSelector, currentOptions.closeLinkEvents, function( theEvent ) {
                    self.close();
                    theEvent.preventDefault();
                });

            return this;
        }

        // cache some values for min/readability
        urlHistory = $.mobile.navigate.history;
        hashkey = $.mobile.dialogHashKey;
        activePage = $.mobile.activePage;
        currentIsDialog = ( activePage ? activePage.hasClass( "ui-dialog" ) : false );
        this._myUrl = url = urlHistory.getActive().url;
        hasHash = ( url.indexOf( hashkey ) > -1 ) && !currentIsDialog && ( urlHistory.activeIndex > 0 );

        if ( hasHash ) {
            self._open( options );
            self._bindContainerClose();
            return this;
        }

        // if the current url has no dialog hash key proceed as normal
        // otherwise, if the page is a dialog simply tack on the hash key
        if ( url.indexOf( hashkey ) === -1 && !currentIsDialog ) {
            url = url + (url.indexOf( "#" ) > -1 ? hashkey : "#" + hashkey);
        } else {
            url = $.mobile.path.parseLocation().hash + hashkey;
        }

        // swallow the the initial navigation event, and bind for the next
        this.window.one( "beforenavigate", function( theEvent ) {
            theEvent.preventDefault();
            self._open( options );
            self._bindContainerClose();
        });

        this.urlAltered = true;
        $.mobile.navigate( url, { role: "dialog" } );

        return this;
    },

    close: function() {
        // make sure close is idempotent
        if ( $.mobile.popup.active !== this ) {
            return this;
        }

        this._scrollTop = this.window.scrollTop();

        if ( this.options.history && this.urlAltered ) {
            $.mobile.back();
            this.urlAltered = false;
        } else {
            // simulate the nav bindings having fired
            this._closePopup();
        }

        return this;
    }
});

// TODO this can be moved inside the widget
$.mobile.popup.handleLink = function( $link ) {
    var offset,
        path = $.mobile.path,

        // NOTE make sure to get only the hash from the href because ie7 (wp7)
        //      returns the absolute href in this case ruining the element selection
        popup = $( path.hashToSelector( path.parseUrl( $link.attr( "href" ) ).hash ) ).first();

    if ( popup.length > 0 && popup.data( "mobile-popup" ) ) {
        offset = $link.offset();
        popup.popup( "open", {
            x: offset.left + $link.outerWidth() / 2,
            y: offset.top + $link.outerHeight() / 2,
            transition: $link.jqmData( "transition" ),
            positionTo: $link.jqmData( "position-to" )
        });
    }

    //remove after delay
    setTimeout( function() {
        $link.removeClass( $.mobile.activeBtnClass );
    }, 300 );
};

// TODO move inside _create
$.mobile.document.on( "pagebeforechange", function( theEvent, data ) {
    if ( data.options.role === "popup" ) {
        $.mobile.popup.handleLink( data.options.link );
        theEvent.preventDefault();
    }
});

})( jQuery );

/*
* custom "selectmenu" plugin
*/

(function( $, undefined ) {

var unfocusableItemSelector = ".ui-disabled,.ui-state-disabled,.ui-li-divider,.ui-screen-hidden,:jqmData(role='placeholder')",
    goToAdjacentItem = function( item, target, direction ) {
        var adjacent = item[ direction + "All" ]()
            .not( unfocusableItemSelector )
            .first();

        // if there's a previous option, focus it
        if ( adjacent.length ) {
            target
                .blur()
                .attr( "tabindex", "-1" );

            adjacent.find( "a" ).first().focus();
        }
    };

$.widget( "mobile.selectmenu", $.mobile.selectmenu, {
    _create: function() {
        var o = this.options;

        // Custom selects cannot exist inside popups, so revert the "nativeMenu"
        // option to true if a parent is a popup
        o.nativeMenu = o.nativeMenu || ( this.element.parents( ":jqmData(role='popup'),:mobile-popup" ).length > 0 );

        return this._super();
    },

    _handleSelectFocus: function() {
        this.element.blur();
        this.button.focus();
    },

    _handleKeydown: function( event ) {
        this._super( event );
        this._handleButtonVclickKeydown( event );
    },

    _handleButtonVclickKeydown: function( event ) {
        if ( this.options.disabled || this.isOpen || this.options.nativeMenu ) {
            return;
        }

        if (event.type === "vclick" ||
                event.keyCode && (event.keyCode === $.mobile.keyCode.ENTER || event.keyCode === $.mobile.keyCode.SPACE)) {

            this._decideFormat();
            if ( this.menuType === "overlay" ) {
                this.button.attr( "href", "#" + this.popupId ).attr( "data-" + ( $.mobile.ns || "" ) + "rel", "popup" );
            } else {
                this.button.attr( "href", "#" + this.dialogId ).attr( "data-" + ( $.mobile.ns || "" ) + "rel", "dialog" );
            }
            this.isOpen = true;
            // Do not prevent default, so the navigation may have a chance to actually open the chosen format
        }
    },

    _handleListFocus: function( e ) {
        var params = ( e.type === "focusin" ) ?
            { tabindex: "0", event: "vmouseover" }:
            { tabindex: "-1", event: "vmouseout" };

        $( e.target )
            .attr( "tabindex", params.tabindex )
            .trigger( params.event );
    },

    _handleListKeydown: function( event ) {
        var target = $( event.target ),
            li = target.closest( "li" );

        // switch logic based on which key was pressed
        switch ( event.keyCode ) {
            // up or left arrow keys
        case 38:
            goToAdjacentItem( li, target, "prev" );
            return false;
            // down or right arrow keys
        case 40:
            goToAdjacentItem( li, target, "next" );
            return false;
            // If enter or space is pressed, trigger click
        case 13:
        case 32:
            target.trigger( "click" );
            return false;
        }
    },

    _handleMenuPageHide: function() {

        // After the dialog's done, we may want to trigger change if the value has actually changed
        this._delayedTrigger();

        // TODO centralize page removal binding / handling in the page plugin.
        // Suggestion from @jblas to do refcounting
        //
        // TODO extremely confusing dependency on the open method where the pagehide.remove
        // bindings are stripped to prevent the parent page from disappearing. The way
        // we're keeping pages in the DOM right now sucks
        //
        // rebind the page remove that was unbound in the open function
        // to allow for the parent page removal from actions other than the use
        // of a dialog sized custom select
        //
        // doing this here provides for the back button on the custom select dialog
        this.thisPage.page( "bindRemove" );
    },

    _handleHeaderCloseClick: function() {
        if ( this.menuType === "overlay" ) {
            this.close();
            return false;
        }
    },

    _handleListItemClick: function( event ) {
        var listItem = $( event.target ).closest( "li" ),

            // Index of option tag to be selected
            oldIndex = this.select[ 0 ].selectedIndex,
            newIndex = $.mobile.getAttribute( listItem, "option-index" ),
            option = this._selectOptions().eq( newIndex )[ 0 ];

        // Toggle selected status on the tag for multi selects
        option.selected = this.isMultiple ? !option.selected : true;

        // Toggle checkbox class for multiple selects
        if ( this.isMultiple ) {
            listItem.find( "a" )
                .toggleClass( "ui-checkbox-on", option.selected )
                .toggleClass( "ui-checkbox-off", !option.selected );
        }

        // If it's not a multiple select, trigger change after it has finished closing
        if ( !this.isMultiple && oldIndex !== newIndex ) {
            this._triggerChange = true;
        }

        // Trigger change if it's a multiple select
        // Hide custom select for single selects only - otherwise focus clicked item
        // We need to grab the clicked item the hard way, because the list may have been rebuilt
        if ( this.isMultiple ) {
            this.select.trigger( "change" );
            this.list.find( "li:not(.ui-li-divider)" ).eq( newIndex )
                .find( "a" ).first().focus();
        }
        else {
            this.close();
        }

        event.preventDefault();
    },

    build: function() {
        var selectId, popupId, dialogId, label, thisPage, isMultiple, menuId,
            themeAttr, overlayTheme, overlayThemeAttr, dividerThemeAttr,
            menuPage, listbox, list, header, headerTitle, menuPageContent,
            menuPageClose, headerClose,
            o = this.options;

        if ( o.nativeMenu ) {
            return this._super();
        }

        selectId = this.selectId;
        popupId = selectId + "-listbox";
        dialogId = selectId + "-dialog";
        label = this.label;
        thisPage = this.element.closest( ".ui-page" );
        isMultiple = this.element[ 0 ].multiple;
        menuId = selectId + "-menu";
        themeAttr = o.theme ? ( " data-" + $.mobile.ns + "theme='" + o.theme + "'" ) : "";
        overlayTheme = o.overlayTheme || o.theme || null;
        overlayThemeAttr = overlayTheme ? ( " data-" + $.mobile.ns +
            "overlay-theme='" + overlayTheme + "'" ) : "";
        dividerThemeAttr = ( o.dividerTheme && isMultiple ) ? ( " data-" + $.mobile.ns + "divider-theme='" + o.dividerTheme + "'" ) : "";
        menuPage = $( "<div data-" + $.mobile.ns + "role='dialog' class='ui-selectmenu' id='" + dialogId + "'" + themeAttr + overlayThemeAttr + ">" +
            "<div data-" + $.mobile.ns + "role='header'>" +
            "<div class='ui-title'></div>"+
            "</div>"+
            "<div data-" + $.mobile.ns + "role='content'></div>"+
            "</div>" );
        listbox = $( "<div" + themeAttr + overlayThemeAttr + " id='" + popupId +
                "' class='ui-selectmenu'></div>" )
            .insertAfter( this.select )
            .popup();
        list = $( "<ul class='ui-selectmenu-list' id='" + menuId + "' role='listbox' aria-labelledby='" + this.buttonId + "'" + themeAttr + dividerThemeAttr + "></ul>" ).appendTo( listbox );
        header = $( "<div class='ui-header ui-bar-" + ( o.theme ? o.theme : "inherit" ) + "'></div>" ).prependTo( listbox );
        headerTitle = $( "<h1 class='ui-title'></h1>" ).appendTo( header );

        if ( this.isMultiple ) {
            headerClose = $( "<a>", {
                "role": "button",
                "text": o.closeText,
                "href": "#",
                "class": "ui-btn ui-corner-all ui-btn-left ui-btn-icon-notext ui-icon-delete"
            }).appendTo( header );
        }

        $.extend( this, {
            selectId: selectId,
            menuId: menuId,
            popupId: popupId,
            dialogId: dialogId,
            thisPage: thisPage,
            menuPage: menuPage,
            label: label,
            isMultiple: isMultiple,
            theme: o.theme,
            listbox: listbox,
            list: list,
            header: header,
            headerTitle: headerTitle,
            headerClose: headerClose,
            menuPageContent: menuPageContent,
            menuPageClose: menuPageClose,
            placeholder: ""
        });

        // Create list from select, update state
        this.refresh();

        if ( this._origTabIndex === undefined ) {
            // Map undefined to false, because this._origTabIndex === undefined
            // indicates that we have not yet checked whether the select has
            // originally had a tabindex attribute, whereas false indicates that
            // we have checked the select for such an attribute, and have found
            // none present.
            this._origTabIndex = ( this.select[ 0 ].getAttribute( "tabindex" ) === null ) ? false : this.select.attr( "tabindex" );
        }
        this.select.attr( "tabindex", "-1" );
        this._on( this.select, { focus : "_handleSelectFocus" } );

        // Button events
        this._on( this.button, {
            vclick: "_handleButtonVclickKeydown"
        });

        // Events for list items
        this.list.attr( "role", "listbox" );
        this._on( this.list, {
            "focusin": "_handleListFocus",
            "focusout": "_handleListFocus",
            "keydown": "_handleListKeydown",
            "click li:not(.ui-disabled,.ui-state-disabled,.ui-li-divider)": "_handleListItemClick"
        });

        // button refocus ensures proper height calculation
        // by removing the inline style and ensuring page inclusion
        this._on( this.menuPage, { pagehide: "_handleMenuPageHide" } );

        // Events on the popup
        this._on( this.listbox, { popupafterclose: "_popupClosed" } );

        // Close button on small overlays
        if ( this.isMultiple ) {
            this._on( this.headerClose, { click: "_handleHeaderCloseClick" } );
        }

        return this;
    },

    _popupClosed: function() {
        this.close();
        this._delayedTrigger();
    },

    _delayedTrigger: function() {
        if ( this._triggerChange ) {
            this.element.trigger( "change" );
        }
        this._triggerChange = false;
    },

    _isRebuildRequired: function() {
        var list = this.list.find( "li" ),
            options = this._selectOptions().not( ".ui-screen-hidden" );

        // TODO exceedingly naive method to determine difference
        // ignores value changes etc in favor of a forcedRebuild
        // from the user in the refresh method
        return options.text() !== list.text();
    },

    selected: function() {
        return this._selectOptions().filter( ":selected:not( :jqmData(placeholder='true') )" );
    },

    refresh: function( force ) {
        var self, indices;

        if ( this.options.nativeMenu ) {
            return this._super( force );
        }

        self = this;
        if ( force || this._isRebuildRequired() ) {
            self._buildList();
        }

        indices = this.selectedIndices();

        self.setButtonText();
        self.setButtonCount();

        self.list.find( "li:not(.ui-li-divider)" )
            .find( "a" ).removeClass( $.mobile.activeBtnClass ).end()
            .attr( "aria-selected", false )
            .each(function( i ) {
                var item = $( this );
                if ( $.inArray( i, indices ) > -1 ) {

                    // Aria selected attr
                    item.attr( "aria-selected", true );

                    // Multiple selects: add the "on" checkbox state to the icon
                    if ( self.isMultiple ) {
                        item.find( "a" ).removeClass( "ui-checkbox-off" ).addClass( "ui-checkbox-on" );
                    } else {
                        if ( item.hasClass( "ui-screen-hidden" ) ) {
                            item.next().find( "a" ).addClass( $.mobile.activeBtnClass );
                        } else {
                            item.find( "a" ).addClass( $.mobile.activeBtnClass );
                        }
                    }
                } else if ( self.isMultiple ) {
                    item.find( "a" ).removeClass( "ui-checkbox-on" ).addClass( "ui-checkbox-off" );
                }
            });
    },

    close: function() {
        if ( this.options.disabled || !this.isOpen ) {
            return;
        }

        var self = this;

        if ( self.menuType === "page" ) {
            self.menuPage.dialog( "close" );
            self.list.appendTo( self.listbox );
        } else {
            self.listbox.popup( "close" );
        }

        self._focusButton();
        // allow the dialog to be closed again
        self.isOpen = false;
    },

    open: function() {
        this.button.click();
    },

    _focusMenuItem: function() {
        var selector = this.list.find( "a." + $.mobile.activeBtnClass );
        if ( selector.length === 0 ) {
            selector = this.list.find( "li:not(" + unfocusableItemSelector + ") a.ui-btn" );
        }
        selector.first().focus();
    },

    _decideFormat: function() {
        var self = this,
            $window = this.window,
            selfListParent = self.list.parent(),
            menuHeight = selfListParent.outerHeight(),
            scrollTop = $window.scrollTop(),
            btnOffset = self.button.offset().top,
            screenHeight = $window.height();

        if ( menuHeight > screenHeight - 80 || !$.support.scrollTop ) {

            self.menuPage.appendTo( $.mobile.pageContainer ).page();
            self.menuPageContent = self.menuPage.find( ".ui-content" );
            self.menuPageClose = self.menuPage.find( ".ui-header a" );

            // prevent the parent page from being removed from the DOM,
            // otherwise the results of selecting a list item in the dialog
            // fall into a black hole
            self.thisPage.unbind( "pagehide.remove" );

            //for WebOS/Opera Mini (set lastscroll using button offset)
            if ( scrollTop === 0 && btnOffset > screenHeight ) {
                self.thisPage.one( "pagehide", function() {
                    $( this ).jqmData( "lastScroll", btnOffset );
                });
            }

            self.menuPage.one( {
                pageshow: $.proxy( this, "_focusMenuItem" ),
                pagehide: $.proxy( this, "close" )
            });

            self.menuType = "page";
            self.menuPageContent.append( self.list );
            self.menuPage
                .find( "div .ui-title" )
                    .text( self.label.getEncodedText() || self.placeholder );
        } else {
            self.menuType = "overlay";

            self.listbox.one( { popupafteropen: $.proxy( this, "_focusMenuItem" ) } );
        }
    },

    _buildList: function() {
        var self = this,
            o = this.options,
            placeholder = this.placeholder,
            needPlaceholder = true,
            dataIcon = "false",
            $options, numOptions, select,
            dataPrefix = "data-" + $.mobile.ns,
            dataIndexAttr = dataPrefix + "option-index",
            dataIconAttr = dataPrefix + "icon",
            dataRoleAttr = dataPrefix + "role",
            dataPlaceholderAttr = dataPrefix + "placeholder",
            fragment = document.createDocumentFragment(),
            isPlaceholderItem = false,
            optGroup,
            i,
            option, $option, parent, text, anchor, classes,
            optLabel, divider, item;

        self.list.empty().filter( ".ui-listview" ).listview( "destroy" );
        $options = this._selectOptions();
        numOptions = $options.length;
        select = this.select[ 0 ];

        for ( i = 0; i < numOptions;i++, isPlaceholderItem = false) {
            option = $options[i];
            $option = $( option );

            // Do not create options based on ui-screen-hidden select options
            if ( $option.hasClass( "ui-screen-hidden" ) ) {
                continue;
            }

            parent = option.parentNode;
            classes = [];

            // Although using .text() here raises the risk that, when we later paste this into the
            // list item we end up pasting possibly malicious things like <script> tags, that risk
            // only arises if we do something like $( "<li><a href='#'>" + text + "</a></li>" ). We
            // don't do that. We do document.createTextNode( text ) instead, which guarantees that
            // whatever we paste in will end up as text, with characters like <, > and & escaped.
            text = $option.text();
            anchor = document.createElement( "a" );
            anchor.setAttribute( "href", "#" );
            anchor.appendChild( document.createTextNode( text ) );

            // Are we inside an optgroup?
            if ( parent !== select && parent.nodeName.toLowerCase() === "optgroup" ) {
                optLabel = parent.getAttribute( "label" );
                if ( optLabel !== optGroup ) {
                    divider = document.createElement( "li" );
                    divider.setAttribute( dataRoleAttr, "list-divider" );
                    divider.setAttribute( "role", "option" );
                    divider.setAttribute( "tabindex", "-1" );
                    divider.appendChild( document.createTextNode( optLabel ) );
                    fragment.appendChild( divider );
                    optGroup = optLabel;
                }
            }

            if ( needPlaceholder && ( !option.getAttribute( "value" ) || text.length === 0 || $option.jqmData( "placeholder" ) ) ) {
                needPlaceholder = false;
                isPlaceholderItem = true;

                // If we have identified a placeholder, record the fact that it was
                // us who have added the placeholder to the option and mark it
                // retroactively in the select as well
                if ( null === option.getAttribute( dataPlaceholderAttr ) ) {
                    this._removePlaceholderAttr = true;
                }
                option.setAttribute( dataPlaceholderAttr, true );
                if ( o.hidePlaceholderMenuItems ) {
                    classes.push( "ui-screen-hidden" );
                }
                if ( placeholder !== text ) {
                    placeholder = self.placeholder = text;
                }
            }

            item = document.createElement( "li" );
            if ( option.disabled ) {
                classes.push( "ui-state-disabled" );
                item.setAttribute( "aria-disabled", true );
            }
            item.setAttribute( dataIndexAttr, i );
            item.setAttribute( dataIconAttr, dataIcon );
            if ( isPlaceholderItem ) {
                item.setAttribute( dataPlaceholderAttr, true );
            }
            item.className = classes.join( " " );
            item.setAttribute( "role", "option" );
            anchor.setAttribute( "tabindex", "-1" );
            if ( this.isMultiple ) {
                $( anchor ).addClass( "ui-btn ui-checkbox-off ui-btn-icon-right" );
            }

            item.appendChild( anchor );
            fragment.appendChild( item );
        }

        self.list[0].appendChild( fragment );

        // Hide header if it's not a multiselect and there's no placeholder
        if ( !this.isMultiple && !placeholder.length ) {
            this.header.addClass( "ui-screen-hidden" );
        } else {
            this.headerTitle.text( this.placeholder );
        }

        // Now populated, create listview
        self.list.listview();
    },

    _button: function() {
        return this.options.nativeMenu ?
            this._super() :
            $( "<a>", {
                "href": "#",
                "role": "button",
                // TODO value is undefined at creation
                "id": this.buttonId,
                "aria-haspopup": "true",

                // TODO value is undefined at creation
                "aria-owns": this.menuId
            });
    },

    _destroy: function() {

        if ( !this.options.nativeMenu ) {
            this.close();

            // Restore the tabindex attribute to its original value
            if ( this._origTabIndex !== undefined ) {
                if ( this._origTabIndex !== false ) {
                    this.select.attr( "tabindex", this._origTabIndex );
                } else {
                    this.select.removeAttr( "tabindex" );
                }
            }

            // Remove the placeholder attribute if we were the ones to add it
            if ( this._removePlaceholderAttr ) {
                this._selectOptions().removeAttr( "data-" + $.mobile.ns + "placeholder" );
            }

            // Remove the popup
            this.listbox.remove();

            // Remove the dialog
            this.menuPage.remove();
        }

        // Chain up
        this._super();
    }
});

})( jQuery );


// buttonMarkup is deprecated as of 1.4.0 and will be removed in 1.5.0.

(function( $, undefined ) {

// General policy: Do not access data-* attributes except during enhancement.
// In all other cases we determine the state of the button exclusively from its
// className. That's why optionsToClasses expects a full complement of options,
// and the jQuery plugin completes the set of options from the default values.

// Map classes to buttonMarkup boolean options - used in classNameToOptions()
var reverseBoolOptionMap = {
        "ui-shadow" : "shadow",
        "ui-corner-all" : "corners",
        "ui-btn-inline" : "inline",
        "ui-shadow-icon" : "iconshadow", /* TODO: Remove in 1.5 */
        "ui-mini" : "mini"
    },
    getAttrFixed = function() {
        var ret = $.mobile.getAttribute.apply( this, arguments );

        return ( ret == null ? undefined : ret );
    },
    capitalLettersRE = /[A-Z]/g;

// optionsToClasses:
// @options: A complete set of options to convert to class names.
// @existingClasses: extra classes to add to the result
//
// Converts @options to buttonMarkup classes and returns the result as an array
// that can be converted to an element's className with .join( " " ). All
// possible options must be set inside @options. Use $.fn.buttonMarkup.defaults
// to get a complete set and use $.extend to override your choice of options
// from that set.
function optionsToClasses( options, existingClasses ) {
    var classes = existingClasses ? existingClasses : [];

    // Add classes to the array - first ui-btn
    classes.push( "ui-btn" );

    // If there is a theme
    if ( options.theme ) {
        classes.push( "ui-btn-" + options.theme );
    }

    // If there's an icon, add the icon-related classes
    if ( options.icon ) {
        classes = classes.concat([
            "ui-icon-" + options.icon,
            "ui-btn-icon-" + options.iconpos
        ]);
        if ( options.iconshadow ) {
            classes.push( "ui-shadow-icon" ); /* TODO: Remove in 1.5 */
        }
    }

    // Add the appropriate class for each boolean option
    if ( options.inline ) {
        classes.push( "ui-btn-inline" );
    }
    if ( options.shadow ) {
        classes.push( "ui-shadow" );
    }
    if ( options.corners ) {
        classes.push( "ui-corner-all" );
    }
    if ( options.mini ) {
        classes.push( "ui-mini" );
    }

    // Create a string from the array and return it
    return classes;
}

// classNameToOptions:
// @classes: A string containing a .className-style space-separated class list
//
// Loops over @classes and calculates an options object based on the
// buttonMarkup-related classes it finds. It records unrecognized classes in an
// array.
//
// Returns: An object containing the following items:
//
// "options": buttonMarkup options found to be present because of the
// presence/absence of corresponding classes
//
// "unknownClasses": a string containing all the non-buttonMarkup-related
// classes found in @classes
//
// "alreadyEnhanced": A boolean indicating whether the ui-btn class was among
// those found to be present
function classNameToOptions( classes ) {
    var idx, map, unknownClass,
        alreadyEnhanced = false,
        noIcon = true,
        o = {
            icon: "",
            inline: false,
            shadow: false,
            corners: false,
            iconshadow: false,
            mini: false
        },
        unknownClasses = [];

    classes = classes.split( " " );

    // Loop over the classes
    for ( idx = 0 ; idx < classes.length ; idx++ ) {

        // Assume it's an unrecognized class
        unknownClass = true;

        // Recognize boolean options from the presence of classes
        map = reverseBoolOptionMap[ classes[ idx ] ];
        if ( map !== undefined ) {
            unknownClass = false;
            o[ map ] = true;

        // Recognize the presence of an icon and establish the icon position
        } else if ( classes[ idx ].indexOf( "ui-btn-icon-" ) === 0 ) {
            unknownClass = false;
            noIcon = false;
            o.iconpos = classes[ idx ].substring( 12 );

        // Establish which icon is present
        } else if ( classes[ idx ].indexOf( "ui-icon-" ) === 0 ) {
            unknownClass = false;
            o.icon = classes[ idx ].substring( 8 );

        // Establish the theme - this recognizes one-letter theme swatch names
        } else if ( classes[ idx ].indexOf( "ui-btn-" ) === 0 && classes[ idx ].length === 8 ) {
            unknownClass = false;
            o.theme = classes[ idx ].substring( 7 );

        // Recognize that this element has already been buttonMarkup-enhanced
        } else if ( classes[ idx ] === "ui-btn" ) {
            unknownClass = false;
            alreadyEnhanced = true;
        }

        // If this class has not been recognized, add it to the list
        if ( unknownClass ) {
            unknownClasses.push( classes[ idx ] );
        }
    }

    // If a "ui-btn-icon-*" icon position class is absent there cannot be an icon
    if ( noIcon ) {
        o.icon = "";
    }

    return {
        options: o,
        unknownClasses: unknownClasses,
        alreadyEnhanced: alreadyEnhanced
    };
}

function camelCase2Hyphenated( c ) {
    return "-" + c.toLowerCase();
}

// $.fn.buttonMarkup:
// DOM: gets/sets .className
//
// @options: options to apply to the elements in the jQuery object
// @overwriteClasses: boolean indicating whether to honour existing classes
//
// Calculates the classes to apply to the elements in the jQuery object based on
// the options passed in. If @overwriteClasses is true, it sets the className
// property of each element in the jQuery object to the buttonMarkup classes
// it calculates based on the options passed in.
//
// If you wish to preserve any classes that are already present on the elements
// inside the jQuery object, including buttonMarkup-related classes that were
// added by a previous call to $.fn.buttonMarkup() or during page enhancement
// then you should omit @overwriteClasses or set it to false.
$.fn.buttonMarkup = function( options, overwriteClasses ) {
    var idx, data, el, retrievedOptions, optionKey,
        defaults = $.fn.buttonMarkup.defaults;

    for ( idx = 0 ; idx < this.length ; idx++ ) {
        el = this[ idx ];
        data = overwriteClasses ?

            // Assume this element is not enhanced and ignore its classes
            { alreadyEnhanced: false, unknownClasses: [] } :

            // Otherwise analyze existing classes to establish existing options and
            // classes
            classNameToOptions( el.className );

        retrievedOptions = $.extend( {},

            // If the element already has the class ui-btn, then we assume that
            // it has passed through buttonMarkup before - otherwise, the options
            // returned by classNameToOptions do not correctly reflect the state of
            // the element
            ( data.alreadyEnhanced ? data.options : {} ),

            // Finally, apply the options passed in
            options );

        // If this is the first call on this element, retrieve remaining options
        // from the data-attributes
        if ( !data.alreadyEnhanced ) {
            for ( optionKey in defaults ) {
                if ( retrievedOptions[ optionKey ] === undefined ) {
                    retrievedOptions[ optionKey ] = getAttrFixed( el,
                        optionKey.replace( capitalLettersRE, camelCase2Hyphenated )
                    );
                }
            }
        }

        el.className = optionsToClasses(

            // Merge all the options and apply them as classes
            $.extend( {},

                // The defaults form the basis
                defaults,

                // Add the computed options
                retrievedOptions
            ),

            // ... and re-apply any unrecognized classes that were found
            data.unknownClasses ).join( " " );
        if ( el.tagName.toLowerCase() !== "button" ) {
            el.setAttribute( "role", "button" );
        }
    }

    return this;
};

// buttonMarkup defaults. This must be a complete set, i.e., a value must be
// given here for all recognized options
$.fn.buttonMarkup.defaults = {
    icon: "",
    iconpos: "left",
    theme: null,
    inline: false,
    shadow: true,
    corners: true,
    iconshadow: false, /* TODO: Remove in 1.5. Option deprecated in 1.4. */
    mini: false
};

$.extend( $.fn.buttonMarkup, {
    initSelector: "a:jqmData(role='button'), .ui-bar > a, .ui-bar > :jqmData(role='controlgroup') > a, button:not(:jqmData(role='navbar') button)"
});

})( jQuery );


(function( $, undefined ) {

$.widget( "mobile.controlgroup", $.extend( {
    options: {
        enhanced: false,
        theme: null,
        shadow: false,
        corners: true,
        excludeInvisible: true,
        type: "vertical",
        mini: false
    },

    _create: function() {
        var elem = this.element,
            opts = this.options,
            keepNative = $.mobile.page.prototype.keepNativeSelector();

        // Run buttonmarkup
        if ( $.fn.buttonMarkup ) {
            this.element
                .find( $.fn.buttonMarkup.initSelector )
                .not( keepNative )
                .buttonMarkup();
        }
        // Enhance child widgets
        $.each( this._childWidgets, $.proxy( function( number, widgetName ) {
            if ( $.mobile[ widgetName ] ) {
                this.element
                    .find( $.mobile[ widgetName ].initSelector )
                    .not( keepNative )[ widgetName ]();
            }
        }, this ));

        $.extend( this, {
            _ui: null,
            _initialRefresh: true
        });

        if ( opts.enhanced ) {
            this._ui = {
                groupLegend: elem.children( ".ui-controlgroup-label" ).children(),
                childWrapper: elem.children( ".ui-controlgroup-controls" )
            };
        } else {
            this._ui = this._enhance();
        }

    },

    _childWidgets: [ "checkboxradio", "selectmenu", "button" ],

    _themeClassFromOption: function( value ) {
        return ( value ? ( value === "none" ? "" : "ui-group-theme-" + value ) : "" );
    },

    _enhance: function() {
        var elem = this.element,
            opts = this.options,
            ui = {
                groupLegend: elem.children( "legend" ),
                childWrapper: elem
                    .addClass( "ui-controlgroup " +
                        "ui-controlgroup-" +
                            ( opts.type === "horizontal" ? "horizontal" : "vertical" ) + " " +
                        this._themeClassFromOption( opts.theme ) + " " +
                        ( opts.corners ? "ui-corner-all " : "" ) +
                        ( opts.mini ? "ui-mini " : "" ) )
                    .wrapInner( "<div " +
                        "class='ui-controlgroup-controls " +
                            ( opts.shadow === true ? "ui-shadow" : "" ) + "'></div>" )
                    .children()
            };

        if ( ui.groupLegend.length > 0 ) {
            $( "<div role='heading' class='ui-controlgroup-label'></div>" )
                .append( ui.groupLegend )
                .prependTo( elem );
        }

        return ui;
    },

    _init: function() {
        this.refresh();
    },

    _setOptions: function( options ) {
        var callRefresh, returnValue,
            elem = this.element;

        // Must have one of horizontal or vertical
        if ( options.type !== undefined ) {
            elem
                .removeClass( "ui-controlgroup-horizontal ui-controlgroup-vertical" )
                .addClass( "ui-controlgroup-" + ( options.type === "horizontal" ? "horizontal" : "vertical" ) );
            callRefresh = true;
        }

        if ( options.theme !== undefined ) {
            elem
                .removeClass( this._themeClassFromOption( this.options.theme ) )
                .addClass( this._themeClassFromOption( options.theme ) );
        }

        if ( options.corners !== undefined ) {
            elem.toggleClass( "ui-corner-all", options.corners );
        }

        if ( options.mini !== undefined ) {
            elem.toggleClass( "ui-mini", options.mini );
        }

        if ( options.shadow !== undefined ) {
            this._ui.childWrapper.toggleClass( "ui-shadow", options.shadow );
        }

        if ( options.excludeInvisible !== undefined ) {
            this.options.excludeInvisible = options.excludeInvisible;
            callRefresh = true;
        }

        returnValue = this._super( options );

        if ( callRefresh ) {
            this.refresh();
        }

        return returnValue;
    },

    container: function() {
        return this._ui.childWrapper;
    },

    refresh: function() {
        var $el = this.container(),
            els = $el.find( ".ui-btn" ).not( ".ui-slider-handle" ),
            create = this._initialRefresh;
        if ( $.mobile.checkboxradio ) {
            $el.find( ":mobile-checkboxradio" ).checkboxradio( "refresh" );
        }
        this._addFirstLastClasses( els,
            this.options.excludeInvisible ? this._getVisibles( els, create ) : els,
            create );
        this._initialRefresh = false;
    },

    // Caveat: If the legend is not the first child of the controlgroup at enhance
    // time, it will be after _destroy().
    _destroy: function() {
        var ui, buttons,
            opts = this.options;

        if ( opts.enhanced ) {
            return this;
        }

        ui = this._ui;
        buttons = this.element
            .removeClass( "ui-controlgroup " +
                "ui-controlgroup-horizontal ui-controlgroup-vertical ui-corner-all ui-mini " +
                this._themeClassFromOption( opts.theme ) )
            .find( ".ui-btn" )
            .not( ".ui-slider-handle" );

        this._removeFirstLastClasses( buttons );

        ui.groupLegend.unwrap();
        ui.childWrapper.children().unwrap();
    }
}, $.mobile.behaviors.addFirstLastClasses ) );

})(jQuery);

(function( $, undefined ) {

    $.widget( "mobile.toolbar", {
        initSelector: ":jqmData(role='footer'), :jqmData(role='header')",

        options: {
            theme: null,
            addBackBtn: false,
            backBtnTheme: null,
            backBtnText: "Back"
        },

        _create: function() {
            var leftbtn, rightbtn,
                role =  this.element.is( ":jqmData(role='header')" ) ? "header" : "footer",
                page = this.element.closest( ".ui-page" );
            if ( page.length === 0 ) {
                page = false;
                this._on( this.document, {
                    "pageshow": "refresh"
                });
            }
            $.extend( this, {
                role: role,
                page: page,
                leftbtn: leftbtn,
                rightbtn: rightbtn
            });
            this.element.attr( "role", role === "header" ? "banner" : "contentinfo" ).addClass( "ui-" + role );
            this.refresh();
            this._setOptions( this.options );
        },
        _setOptions: function( o ) {
            if ( o.addBackBtn !== undefined ) {
                this._updateBackButton();
            }
            if ( o.backBtnTheme != null ) {
                this.element
                    .find( ".ui-toolbar-back-btn" )
                    .addClass( "ui-btn ui-btn-" + o.backBtnTheme );
            }
            if ( o.backBtnText !== undefined ) {
                this.element.find( ".ui-toolbar-back-btn .ui-btn-text" ).text( o.backBtnText );
            }
            if ( o.theme !== undefined ) {
                var currentTheme = this.options.theme ? this.options.theme : "inherit",
                    newTheme = o.theme ? o.theme : "inherit";

                this.element.removeClass( "ui-bar-" + currentTheme ).addClass( "ui-bar-" + newTheme );
            }

            this._super( o );
        },
        refresh: function() {
            if ( this.role === "header" ) {
                this._addHeaderButtonClasses();
            }
            if ( !this.page ) {
                this._setRelative();
                if ( this.role === "footer" ) {
                    this.element.appendTo( "body" );
                } else if ( this.role === "header" ) {
                    this._updateBackButton();
                }
            }
            this._addHeadingClasses();
            this._btnMarkup();
        },

        //we only want this to run on non fixed toolbars so make it easy to override
        _setRelative: function() {
            $( "[data-"+ $.mobile.ns + "role='page']" ).css({ "position": "relative" });
        },

        // Deprecated in 1.4. As from 1.5 button classes have to be present in the markup.
        _btnMarkup: function() {
            this.element
                .children( "a" )
                .filter( ":not([data-" + $.mobile.ns + "role='none'])" )
                .attr( "data-" + $.mobile.ns + "role", "button" );
            this.element.trigger( "create" );
        },
        // Deprecated in 1.4. As from 1.5 ui-btn-left/right classes have to be present in the markup.
        _addHeaderButtonClasses: function() {
            var headerAnchors = this.element.children( "a, button" );

            // Do not mistake a back button for a left toolbar button
            this.leftbtn = headerAnchors.hasClass( "ui-btn-left" ) &&
                !headerAnchors.hasClass( "ui-toolbar-back-btn" );

            this.rightbtn = headerAnchors.hasClass( "ui-btn-right" );

            // Filter out right buttons and back buttons
            this.leftbtn = this.leftbtn ||
                headerAnchors.eq( 0 )
                    .not( ".ui-btn-right,.ui-toolbar-back-btn" )
                    .addClass( "ui-btn-left" )
                    .length;

            this.rightbtn = this.rightbtn || headerAnchors.eq( 1 ).addClass( "ui-btn-right" ).length;
        },
        _updateBackButton: function() {
            var backButton,
                options = this.options,
                theme = options.backBtnTheme || options.theme;

            // Retrieve the back button or create a new, empty one
            backButton = this._backButton = ( this._backButton || {} );

            // We add a back button only if the option to do so is on
            if ( this.options.addBackBtn &&

                    // This must also be a header toolbar
                    this.role === "header" &&

                    // There must be multiple pages in the DOM
                    $( ".ui-page" ).length > 1 &&
                    ( this.page ?

                        // If the toolbar is internal the page's URL must differ from the hash
                        ( this.page[ 0 ].getAttribute( "data-" + $.mobile.ns + "url" ) !==
                            $.mobile.path.stripHash( location.hash ) ) :

                        // Otherwise, if the toolbar is external there must be at least one
                        // history item to which one can go back
                        ( $.mobile.navigate && $.mobile.navigate.history &&
                            $.mobile.navigate.history.activeIndex > 0 ) ) &&

                    // The toolbar does not have a left button
                    !this.leftbtn ) {

                // Skip back button creation if one is already present
                if ( !backButton.attached ) {
                    this.backButton = backButton.element = ( backButton.element ||
                        $( "<a role='button' href='javascript:void(0);' " +
                            "class='ui-btn ui-corner-all ui-shadow ui-btn-left " +
                                ( theme ? "ui-btn-" + theme + " " : "" ) +
                                "ui-toolbar-back-btn ui-icon-carat-l ui-btn-icon-left' " +
                            "data-" + $.mobile.ns + "rel='back'>" + options.backBtnText +
                            "</a>" ) )
                            .prependTo( this.element );
                    backButton.attached = true;
                }

            // If we are not adding a back button, then remove the one present, if any
            } else if ( backButton.element ) {
                backButton.element.detach();
                backButton.attached = false;
            }
        },
        _addHeadingClasses: function() {
            this.element.children( "h1, h2, h3, h4, h5, h6" )
                .addClass( "ui-title" )
                // Regardless of h element number in src, it becomes h1 for the enhanced page
                .attr({
                    "role": "heading",
                    "aria-level": "1"
                });
        },
        _destroy: function() {
            var currentTheme;

            this.element.children( "h1, h2, h3, h4, h5, h6" )
                .removeClass( "ui-title" )
                .removeAttr( "role" )
                .removeAttr( "aria-level" );

            if ( this.role === "header" ) {
                this.element.children( "a, button" )
                    .removeClass( "ui-btn-left ui-btn-right ui-btn ui-shadow ui-corner-all" );
                if ( this.backButton) {
                    this.backButton.remove();
                }
            }

            currentTheme = this.options.theme ? this.options.theme : "inherit";
            this.element.removeClass( "ui-bar-" + currentTheme );

            this.element.removeClass( "ui-" + this.role ).removeAttr( "role" );
        }
    });

})( jQuery );

(function( $, undefined ) {

    $.widget( "mobile.toolbar", $.mobile.toolbar, {
        options: {
            position:null,
            visibleOnPageShow: true,
            disablePageZoom: true,
            transition: "slide", //can be none, fade, slide (slide maps to slideup or slidedown)
            fullscreen: false,
            tapToggle: true,
            tapToggleBlacklist: "a, button, input, select, textarea, .ui-header-fixed, .ui-footer-fixed, .ui-flipswitch, .ui-popup, .ui-panel, .ui-panel-dismiss-open",
            hideDuringFocus: "input, textarea, select",
            updatePagePadding: true,
            trackPersistentToolbars: true,

            // Browser detection! Weeee, here we go...
            // Unfortunately, position:fixed is costly, not to mention probably impossible, to feature-detect accurately.
            // Some tests exist, but they currently return false results in critical devices and browsers, which could lead to a broken experience.
            // Testing fixed positioning is also pretty obtrusive to page load, requiring injected elements and scrolling the window
            // The following function serves to rule out some popular browsers with known fixed-positioning issues
            // This is a plugin option like any other, so feel free to improve or overwrite it
            supportBlacklist: function() {
                return !$.support.fixedPosition;
            }
        },

        _create: function() {
            this._super();
            this.pagecontainer = $( ":mobile-pagecontainer" );
            if ( this.options.position === "fixed" && !this.options.supportBlacklist() ) {
                this._makeFixed();
            }
        },

        _makeFixed: function() {
            this.element.addClass( "ui-"+ this.role +"-fixed" );
            this.updatePagePadding();
            this._addTransitionClass();
            this._bindPageEvents();
            this._bindToggleHandlers();
        },

        _setOptions: function( o ) {
            if ( o.position === "fixed" && this.options.position !== "fixed" ) {
                this._makeFixed();
            }
            if ( this.options.position === "fixed" && !this.options.supportBlacklist() ) {
                var $page = ( !!this.page )? this.page: ( $(".ui-page-active").length > 0 )? $(".ui-page-active"): $(".ui-page").eq(0);

                if ( o.fullscreen !== undefined) {
                    if ( o.fullscreen ) {
                        this.element.addClass( "ui-"+ this.role +"-fullscreen" );
                        $page.addClass( "ui-page-" + this.role + "-fullscreen" );
                    }
                    // If not fullscreen, add class to page to set top or bottom padding
                    else {
                        this.element.removeClass( "ui-"+ this.role +"-fullscreen" );
                        $page.removeClass( "ui-page-" + this.role + "-fullscreen" ).addClass( "ui-page-" + this.role+ "-fixed" );
                    }
                }
            }
            this._super(o);
        },

        _addTransitionClass: function() {
            var tclass = this.options.transition;

            if ( tclass && tclass !== "none" ) {
                // use appropriate slide for header or footer
                if ( tclass === "slide" ) {
                    tclass = this.element.hasClass( "ui-header" ) ? "slidedown" : "slideup";
                }

                this.element.addClass( tclass );
            }
        },

        _bindPageEvents: function() {
            var page = ( !!this.page )? this.element.closest( ".ui-page" ): this.document;
            //page event bindings
            // Fixed toolbars require page zoom to be disabled, otherwise usability issues crop up
            // This method is meant to disable zoom while a fixed-positioned toolbar page is visible
            this._on( page , {
                "pagebeforeshow": "_handlePageBeforeShow",
                "webkitAnimationStart":"_handleAnimationStart",
                "animationstart":"_handleAnimationStart",
                "updatelayout": "_handleAnimationStart",
                "pageshow": "_handlePageShow",
                "pagebeforehide": "_handlePageBeforeHide"
            });
        },

        _handlePageBeforeShow: function( ) {
            var o = this.options;
            if ( o.disablePageZoom ) {
                $.mobile.zoom.disable( true );
            }
            if ( !o.visibleOnPageShow ) {
                this.hide( true );
            }
        },

        _handleAnimationStart: function() {
            if ( this.options.updatePagePadding ) {
                this.updatePagePadding( ( !!this.page )? this.page: ".ui-page-active" );
            }
        },

        _handlePageShow: function() {
            this.updatePagePadding( ( !!this.page )? this.page: ".ui-page-active" );
            if ( this.options.updatePagePadding ) {
                this._on( this.window, { "throttledresize": "updatePagePadding" } );
            }
        },

        _handlePageBeforeHide: function( e, ui ) {
            var o = this.options,
                thisFooter, thisHeader, nextFooter, nextHeader;

            if ( o.disablePageZoom ) {
                $.mobile.zoom.enable( true );
            }
            if ( o.updatePagePadding ) {
                this._off( this.window, "throttledresize" );
            }

            if ( o.trackPersistentToolbars ) {
                thisFooter = $( ".ui-footer-fixed:jqmData(id)", this.page );
                thisHeader = $( ".ui-header-fixed:jqmData(id)", this.page );
                nextFooter = thisFooter.length && ui.nextPage && $( ".ui-footer-fixed:jqmData(id='" + thisFooter.jqmData( "id" ) + "')", ui.nextPage ) || $();
                nextHeader = thisHeader.length && ui.nextPage && $( ".ui-header-fixed:jqmData(id='" + thisHeader.jqmData( "id" ) + "')", ui.nextPage ) || $();

                if ( nextFooter.length || nextHeader.length ) {

                    nextFooter.add( nextHeader ).appendTo( $.mobile.pageContainer );

                    ui.nextPage.one( "pageshow", function() {
                        nextHeader.prependTo( this );
                        nextFooter.appendTo( this );
                    });
                }
            }
        },

        _visible: true,

        // This will set the content element's top or bottom padding equal to the toolbar's height
        updatePagePadding: function( tbPage ) {
            var $el = this.element,
                header = ( this.role ==="header" ),
                pos = parseFloat( $el.css( header ? "top" : "bottom" ) );

            // This behavior only applies to "fixed", not "fullscreen"
            if ( this.options.fullscreen ) { return; }
            // tbPage argument can be a Page object or an event, if coming from throttled resize.
            tbPage = ( tbPage && tbPage.type === undefined && tbPage ) || this.page || $el.closest( ".ui-page" );
            tbPage = ( !!this.page )? this.page: ".ui-page-active";
            $( tbPage ).css( "padding-" + ( header ? "top" : "bottom" ), $el.outerHeight() + pos );
        },

        _useTransition: function( notransition ) {
            var $win = this.window,
                $el = this.element,
                scroll = $win.scrollTop(),
                elHeight = $el.height(),
                pHeight = ( !!this.page )? $el.closest( ".ui-page" ).height():$(".ui-page-active").height(),
                viewportHeight = $.mobile.getScreenHeight();

            return !notransition &&
                ( this.options.transition && this.options.transition !== "none" &&
                (
                    ( this.role === "header" && !this.options.fullscreen && scroll > elHeight ) ||
                    ( this.role === "footer" && !this.options.fullscreen && scroll + viewportHeight < pHeight - elHeight )
                ) || this.options.fullscreen
                );
        },

        show: function( notransition ) {
            var hideClass = "ui-fixed-hidden",
                $el = this.element;

            if ( this._useTransition( notransition ) ) {
                $el
                    .removeClass( "out " + hideClass )
                    .addClass( "in" )
                    .animationComplete(function () {
                        $el.removeClass( "in" );
                    });
            }
            else {
                $el.removeClass( hideClass );
            }
            this._visible = true;
        },

        hide: function( notransition ) {
            var hideClass = "ui-fixed-hidden",
                $el = this.element,
                // if it's a slide transition, our new transitions need the reverse class as well to slide outward
                outclass = "out" + ( this.options.transition === "slide" ? " reverse" : "" );

            if ( this._useTransition( notransition ) ) {
                $el
                    .addClass( outclass )
                    .removeClass( "in" )
                    .animationComplete(function() {
                        $el.addClass( hideClass ).removeClass( outclass );
                    });
            }
            else {
                $el.addClass( hideClass ).removeClass( outclass );
            }
            this._visible = false;
        },

        toggle: function() {
            this[ this._visible ? "hide" : "show" ]();
        },

        _bindToggleHandlers: function() {
            var self = this,
                o = self.options,
                delayShow, delayHide,
                isVisible = true,
                page = ( !!this.page )? this.page: $(".ui-page");

            // tap toggle
            page
                .bind( "vclick", function( e ) {
                    if ( o.tapToggle && !$( e.target ).closest( o.tapToggleBlacklist ).length ) {
                        self.toggle();
                    }
                })
                .bind( "focusin focusout", function( e ) {
                    //this hides the toolbars on a keyboard pop to give more screen room and prevent ios bug which
                    //positions fixed toolbars in the middle of the screen on pop if the input is near the top or
                    //bottom of the screen addresses issues #4410 Footer navbar moves up when clicking on a textbox in an Android environment
                    //and issue #4113 Header and footer change their position after keyboard popup - iOS
                    //and issue #4410 Footer navbar moves up when clicking on a textbox in an Android environment
                    if ( screen.width < 1025 && $( e.target ).is( o.hideDuringFocus ) && !$( e.target ).closest( ".ui-header-fixed, .ui-footer-fixed" ).length ) {
                        //Fix for issue #4724 Moving through form in Mobile Safari with "Next" and "Previous" system
                        //controls causes fixed position, tap-toggle false Header to reveal itself
                        // isVisible instead of self._visible because the focusin and focusout events fire twice at the same time
                        // Also use a delay for hiding the toolbars because on Android native browser focusin is direclty followed
                        // by a focusout when a native selects opens and the other way around when it closes.
                        if ( e.type === "focusout" && !isVisible ) {
                            isVisible = true;
                            //wait for the stack to unwind and see if we have jumped to another input
                            clearTimeout( delayHide );
                            delayShow = setTimeout( function() {
                                self.show();
                            }, 0 );
                        } else if ( e.type === "focusin" && !!isVisible ) {
                            //if we have jumped to another input clear the time out to cancel the show.
                            clearTimeout( delayShow );
                            isVisible = false;
                            delayHide = setTimeout( function() {
                                self.hide();
                            }, 0 );
                        }
                    }
                });
        },

        _setRelative: function() {
            if( this.options.position !== "fixed" ){
                $( "[data-"+ $.mobile.ns + "role='page']" ).css({ "position": "relative" });
            }
        },

        _destroy: function() {
            var pageClasses, toolbarClasses, hasFixed, header, hasFullscreen,
                page = this.pagecontainer.pagecontainer( "getActivePage" );

            this._super();
            if ( this.options.position === "fixed" ) {
                hasFixed = $(  "body>.ui-" + this.role + "-fixed" )
                            .add( page.find( ".ui-" + this.options.role + "-fixed" ) )
                            .not( this.element ).length > 0;
                hasFullscreen = $(  "body>.ui-" + this.role + "-fixed" )
                            .add( page.find( ".ui-" + this.options.role + "-fullscreen" ) )
                            .not( this.element ).length > 0;
                toolbarClasses =  "ui-header-fixed ui-footer-fixed ui-header-fullscreen in out" +
                    " ui-footer-fullscreen fade slidedown slideup ui-fixed-hidden";
                this.element.removeClass( toolbarClasses );
                if ( !hasFullscreen ) {
                    pageClasses = "ui-page-" + this.role + "-fullscreen";
                }
                if ( !hasFixed ) {
                    header = this.role === "header";
                    pageClasses += " ui-page-" + this.role + "-fixed";
                    page.css( "padding-" + ( header ? "top" : "bottom" ), "" );
                }
                page.removeClass( pageClasses );
            }
        }

    });
})( jQuery );

(function( $, undefined ) {
    $.widget( "mobile.toolbar", $.mobile.toolbar, {

        _makeFixed: function() {
            this._super();
            this._workarounds();
        },

        //check the browser and version and run needed workarounds
        _workarounds: function() {
            var ua = navigator.userAgent,
            platform = navigator.platform,
            // Rendering engine is Webkit, and capture major version
            wkmatch = ua.match( /AppleWebKit\/([0-9]+)/ ),
            wkversion = !!wkmatch && wkmatch[ 1 ],
            os = null,
            self = this;
            //set the os we are working in if it dosent match one with workarounds return
            if ( platform.indexOf( "iPhone" ) > -1 || platform.indexOf( "iPad" ) > -1  || platform.indexOf( "iPod" ) > -1 ) {
                os = "ios";
            } else if ( ua.indexOf( "Android" ) > -1 ) {
                os = "android";
            } else {
                return;
            }
            //check os version if it dosent match one with workarounds return
            if ( os === "ios" ) {
                //iOS  workarounds
                self._bindScrollWorkaround();
            } else if ( os === "android" && wkversion && wkversion < 534 ) {
                //Android 2.3 run all Android 2.3 workaround
                self._bindScrollWorkaround();
                self._bindListThumbWorkaround();
            } else {
                return;
            }
        },

        //Utility class for checking header and footer positions relative to viewport
        _viewportOffset: function() {
            var $el = this.element,
                header = $el.hasClass( "ui-header" ),
                offset = Math.abs( $el.offset().top - this.window.scrollTop() );
            if ( !header ) {
                offset = Math.round( offset - this.window.height() + $el.outerHeight() ) - 60;
            }
            return offset;
        },

        //bind events for _triggerRedraw() function
        _bindScrollWorkaround: function() {
            var self = this;
            //bind to scrollstop and check if the toolbars are correctly positioned
            this._on( this.window, { scrollstop: function() {
                var viewportOffset = self._viewportOffset();
                //check if the header is visible and if its in the right place
                if ( viewportOffset > 2 && self._visible ) {
                    self._triggerRedraw();
                }
            }});
        },

        //this addresses issue #4250 Persistent footer instability in v1.1 with long select lists in Android 2.3.3
        //and issue #3748 Android 2.x: Page transitions broken when fixed toolbars used
        //the absolutely positioned thumbnail in a list view causes problems with fixed position buttons above in a nav bar
        //setting the li's to -webkit-transform:translate3d(0,0,0); solves this problem to avoide potential issues in other
        //platforms we scope this with the class ui-android-2x-fix
        _bindListThumbWorkaround: function() {
            this.element.closest( ".ui-page" ).addClass( "ui-android-2x-fixed" );
        },
        //this addresses issues #4337 Fixed header problem after scrolling content on iOS and Android
        //and device bugs project issue #1 Form elements can lose click hit area in position: fixed containers.
        //this also addresses not on fixed toolbars page in docs
        //adding 1px of padding to the bottom then removing it causes a "redraw"
        //which positions the toolbars correctly (they will always be visually correct)
        _triggerRedraw: function() {
            var paddingBottom = parseFloat( $( ".ui-page-active" ).css( "padding-bottom" ) );
            //trigger page redraw to fix incorrectly positioned fixed elements
            $( ".ui-page-active" ).css( "padding-bottom", ( paddingBottom + 1 ) + "px" );
            //if the padding is reset with out a timeout the reposition will not occure.
            //this is independant of JQM the browser seems to need the time to react.
            setTimeout( function() {
                $( ".ui-page-active" ).css( "padding-bottom", paddingBottom + "px" );
            }, 0 );
        },

        destroy: function() {
            this._super();
            //Remove the class we added to the page previously in android 2.x
            this.element.closest( ".ui-page-active" ).removeClass( "ui-android-2x-fix" );
        }
    });

})( jQuery );


( function( $, undefined ) {

var ieHack = ( $.mobile.browser.oldIE && $.mobile.browser.oldIE <= 8 ),
    uiTemplate = $(
        "<div class='ui-popup-arrow-guide'></div>" +
        "<div class='ui-popup-arrow-container" + ( ieHack ? " ie" : "" ) + "'>" +
            "<div class='ui-popup-arrow'></div>" +
        "</div>"
    );

function getArrow() {
    var clone = uiTemplate.clone(),
        gd = clone.eq( 0 ),
        ct = clone.eq( 1 ),
        ar = ct.children();

    return { arEls: ct.add( gd ), gd: gd, ct: ct, ar: ar };
}

$.widget( "mobile.popup", $.mobile.popup, {
    options: {

        arrow: ""
    },

    _create: function() {
        var ar,
            ret = this._super();

        if ( this.options.arrow ) {
            this._ui.arrow = ar = this._addArrow();
        }

        return ret;
    },

    _addArrow: function() {
        var theme,
            opts = this.options,
            ar = getArrow();

        theme = this._themeClassFromOption( "ui-body-", opts.theme );
        ar.ar.addClass( theme + ( opts.shadow ? " ui-overlay-shadow" : "" ) );
        ar.arEls.hide().appendTo( this.element );

        return ar;
    },

    _unenhance: function() {
        var ar = this._ui.arrow;

        if ( ar ) {
            ar.arEls.remove();
        }

        return this._super();
    },

    // Pretend to show an arrow described by @p and @dir and calculate the
    // distance from the desired point. If a best-distance is passed in, return
    // the minimum of the one passed in and the one calculated.
    _tryAnArrow: function( p, dir, desired, s, best ) {
        var result, r, diff, desiredForArrow = {}, tip = {};

        // If the arrow has no wiggle room along the edge of the popup, it cannot
        // be displayed along the requested edge without it sticking out.
        if ( s.arFull[ p.dimKey ] > s.guideDims[ p.dimKey ] ) {
            return best;
        }

        desiredForArrow[ p.fst ] = desired[ p.fst ] +
            ( s.arHalf[ p.oDimKey ] + s.menuHalf[ p.oDimKey ] ) * p.offsetFactor -
            s.contentBox[ p.fst ] + ( s.clampInfo.menuSize[ p.oDimKey ] - s.contentBox[ p.oDimKey ] ) * p.arrowOffsetFactor;
        desiredForArrow[ p.snd ] = desired[ p.snd ];

        result = s.result || this._calculateFinalLocation( desiredForArrow, s.clampInfo );
        r = { x: result.left, y: result.top };

        tip[ p.fst ] = r[ p.fst ] + s.contentBox[ p.fst ] + p.tipOffset;
        tip[ p.snd ] = Math.max( result[ p.prop ] + s.guideOffset[ p.prop ] + s.arHalf[ p.dimKey ],
            Math.min( result[ p.prop ] + s.guideOffset[ p.prop ] + s.guideDims[ p.dimKey ] - s.arHalf[ p.dimKey ],
                desired[ p.snd ] ) );

        diff = Math.abs( desired.x - tip.x ) + Math.abs( desired.y - tip.y );
        if ( !best || diff < best.diff ) {
            // Convert tip offset to coordinates inside the popup
            tip[ p.snd ] -= s.arHalf[ p.dimKey ] + result[ p.prop ] + s.contentBox[ p.snd ];
            best = { dir: dir, diff: diff, result: result, posProp: p.prop, posVal: tip[ p.snd ] };
        }

        return best;
    },

    _getPlacementState: function( clamp ) {
        var offset, gdOffset,
            ar = this._ui.arrow,
            state = {
                clampInfo: this._clampPopupWidth( !clamp ),
                arFull: { cx: ar.ct.width(), cy: ar.ct.height() },
                guideDims: { cx: ar.gd.width(), cy: ar.gd.height() },
                guideOffset: ar.gd.offset()
            };

        offset = this.element.offset();

        ar.gd.css( { left: 0, top: 0, right: 0, bottom: 0 } );
        gdOffset = ar.gd.offset();
        state.contentBox = {
            x: gdOffset.left - offset.left,
            y: gdOffset.top - offset.top,
            cx: ar.gd.width(),
            cy: ar.gd.height()
        };
        ar.gd.removeAttr( "style" );

        // The arrow box moves between guideOffset and guideOffset + guideDims - arFull
        state.guideOffset = { left: state.guideOffset.left - offset.left, top: state.guideOffset.top - offset.top };
        state.arHalf = { cx: state.arFull.cx / 2, cy: state.arFull.cy / 2 };
        state.menuHalf = { cx: state.clampInfo.menuSize.cx / 2, cy: state.clampInfo.menuSize.cy / 2 };

        return state;
    },

    _placementCoords: function( desired ) {
        var state, best, params, elOffset, bgRef,
            optionValue = this.options.arrow,
            ar = this._ui.arrow;

        if ( !ar ) {
            return this._super( desired );
        }

        ar.arEls.show();

        bgRef = {};
        state = this._getPlacementState( true );
        params = {
            "l": { fst: "x", snd: "y", prop: "top", dimKey: "cy", oDimKey: "cx", offsetFactor: 1, tipOffset:  -state.arHalf.cx, arrowOffsetFactor: 0 },
            "r": { fst: "x", snd: "y", prop: "top", dimKey: "cy", oDimKey: "cx", offsetFactor: -1, tipOffset: state.arHalf.cx + state.contentBox.cx, arrowOffsetFactor: 1 },
            "b": { fst: "y", snd: "x", prop: "left", dimKey: "cx", oDimKey: "cy", offsetFactor: -1, tipOffset: state.arHalf.cy + state.contentBox.cy, arrowOffsetFactor: 1 },
            "t": { fst: "y", snd: "x", prop: "left", dimKey: "cx", oDimKey: "cy", offsetFactor: 1, tipOffset: -state.arHalf.cy, arrowOffsetFactor: 0 }
        };

        // Try each side specified in the options to see on which one the arrow
        // should be placed such that the distance between the tip of the arrow and
        // the desired coordinates is the shortest.
        $.each( ( optionValue === true ? "l,t,r,b" : optionValue ).split( "," ),
            $.proxy( function( key, value ) {
                best = this._tryAnArrow( params[ value ], value, desired, state, best );
            }, this ) );

        // Could not place the arrow along any of the edges - behave as if showing
        // the arrow was turned off.
        if ( !best ) {
            ar.arEls.hide();
            return this._super( desired );
        }

        // Move the arrow into place
        ar.ct
            .removeClass( "ui-popup-arrow-l ui-popup-arrow-t ui-popup-arrow-r ui-popup-arrow-b" )
            .addClass( "ui-popup-arrow-" + best.dir )
            .removeAttr( "style" ).css( best.posProp, best.posVal )
            .show();

        // Do not move/size the background div on IE, because we use the arrow div for background as well.
        if ( !ieHack ) {
            elOffset = this.element.offset();
            bgRef[ params[ best.dir ].fst ] = ar.ct.offset();
            bgRef[ params[ best.dir ].snd ] = {
                left: elOffset.left + state.contentBox.x,
                top: elOffset.top + state.contentBox.y
            };
        }

        return best.result;
    },

    _setOptions: function( opts ) {
        var newTheme,
            oldTheme = this.options.theme,
            ar = this._ui.arrow,
            ret = this._super( opts );

        if ( opts.arrow !== undefined ) {
            if ( !ar && opts.arrow ) {
                this._ui.arrow = this._addArrow();

                // Important to return here so we don't set the same options all over
                // again below.
                return;
            } else if ( ar && !opts.arrow ) {
                ar.arEls.remove();
                this._ui.arrow = null;
            }
        }

        // Reassign with potentially new arrow
        ar = this._ui.arrow;

        if ( ar ) {
            if ( opts.theme !== undefined ) {
                oldTheme = this._themeClassFromOption( "ui-body-", oldTheme );
                newTheme = this._themeClassFromOption( "ui-body-", opts.theme );
                ar.ar.removeClass( oldTheme ).addClass( newTheme );
            }

            if ( opts.shadow !== undefined ) {
                ar.ar.toggleClass( "ui-overlay-shadow", opts.shadow );
            }
        }

        return ret;
    },

    _destroy: function() {
        var ar = this._ui.arrow;

        if ( ar ) {
            ar.arEls.remove();
        }

        return this._super();
    }
});

})( jQuery );


(function( $, undefined ) {

$.widget( "mobile.panel", {
    options: {
        classes: {
            panel: "ui-panel",
            panelOpen: "ui-panel-open",
            panelClosed: "ui-panel-closed",
            panelFixed: "ui-panel-fixed",
            panelInner: "ui-panel-inner",
            modal: "ui-panel-dismiss",
            modalOpen: "ui-panel-dismiss-open",
            pageContainer: "ui-panel-page-container",
            pageWrapper: "ui-panel-wrapper",
            pageFixedToolbar: "ui-panel-fixed-toolbar",
            pageContentPrefix: "ui-panel-page-content", /* Used for wrapper and fixed toolbars position, display and open classes. */
            animate: "ui-panel-animate"
        },
        animate: true,
        theme: null,
        position: "left",
        dismissible: true,
        display: "reveal", //accepts reveal, push, overlay
        swipeClose: true,
        positionFixed: false
    },

    _closeLink: null,
    _parentPage: null,
    _page: null,
    _modal: null,
    _panelInner: null,
    _wrapper: null,
    _fixedToolbars: null,

    _create: function() {
        var el = this.element,
            parentPage = el.closest( ".ui-page, :jqmData(role='page')" );

        // expose some private props to other methods
        $.extend( this, {
            _closeLink: el.find( ":jqmData(rel='close')" ),
            _parentPage: ( parentPage.length > 0 ) ? parentPage : false,
            _openedPage: null,
            _page: this._getPage,
            _panelInner: this._getPanelInner(),
            _fixedToolbars: this._getFixedToolbars
        });
        if ( this.options.display !== "overlay" ){
            this._getWrapper();
        }
        this._addPanelClasses();

        // if animating, add the class to do so
        if ( $.support.cssTransform3d && !!this.options.animate ) {
            this.element.addClass( this.options.classes.animate );
        }

        this._bindUpdateLayout();
        this._bindCloseEvents();
        this._bindLinkListeners();
        this._bindPageEvents();

        if ( !!this.options.dismissible ) {
            this._createModal();
        }

        this._bindSwipeEvents();
    },

    _getPanelInner: function() {
        var panelInner = this.element.find( "." + this.options.classes.panelInner );

        if ( panelInner.length === 0 ) {
            panelInner = this.element.children().wrapAll( "<div class='" + this.options.classes.panelInner + "' />" ).parent();
        }

        return panelInner;
    },

    _createModal: function() {
        var self = this,
            target = self._parentPage ? self._parentPage.parent() : self.element.parent();

        self._modal = $( "<div class='" + self.options.classes.modal + "'></div>" )
            .on( "mousedown", function() {
                self.close();
            })
            .appendTo( target );
    },

    _getPage: function() {
        var page = this._openedPage || this._parentPage || $( "." + $.mobile.activePageClass );

        return page;
    },

    _getWrapper: function() {
        var wrapper = this._page().find( "." + this.options.classes.pageWrapper );
        if ( wrapper.length === 0 ) {
            wrapper = this._page().children( ".ui-header:not(.ui-header-fixed), .ui-content:not(.ui-popup), .ui-footer:not(.ui-footer-fixed)" )
                .wrapAll( "<div class='" + this.options.classes.pageWrapper + "'></div>" )
                .parent();
        }

        this._wrapper = wrapper;
    },

    _getFixedToolbars: function() {
        var extFixedToolbars = $( "body" ).children( ".ui-header-fixed, .ui-footer-fixed" ),
            intFixedToolbars = this._page().find( ".ui-header-fixed, .ui-footer-fixed" ),
            fixedToolbars = extFixedToolbars.add( intFixedToolbars ).addClass( this.options.classes.pageFixedToolbar );

        return fixedToolbars;
    },

    _getPosDisplayClasses: function( prefix ) {
        return prefix + "-position-" + this.options.position + " " + prefix + "-display-" + this.options.display;
    },

    _getPanelClasses: function() {
        var panelClasses = this.options.classes.panel +
            " " + this._getPosDisplayClasses( this.options.classes.panel ) +
            " " + this.options.classes.panelClosed +
            " " + "ui-body-" + ( this.options.theme ? this.options.theme : "inherit" );

        if ( !!this.options.positionFixed ) {
            panelClasses += " " + this.options.classes.panelFixed;
        }

        return panelClasses;
    },

    _addPanelClasses: function() {
        this.element.addClass( this._getPanelClasses() );
    },

    _handleCloseClick: function( event ) {
        if ( !event.isDefaultPrevented() ) {
            this.close();
        }
    },

    _bindCloseEvents: function() {
        this._on( this._closeLink, {
            "click": "_handleCloseClick"
        });

        this._on({
            "click a:jqmData(ajax='false')": "_handleCloseClick"
        });
    },

    _positionPanel: function( scrollToTop ) {
        var self = this,
            panelInnerHeight = self._panelInner.outerHeight(),
            expand = panelInnerHeight > $.mobile.getScreenHeight();

        if ( expand || !self.options.positionFixed ) {
            if ( expand ) {
                self._unfixPanel();
                $.mobile.resetActivePageHeight( panelInnerHeight );
            }
            if ( scrollToTop ) {
                this.window[ 0 ].scrollTo( 0, $.mobile.defaultHomeScroll );
            }
        } else {
            self._fixPanel();
        }
    },

    _bindFixListener: function() {
        this._on( $( window ), { "throttledresize": "_positionPanel" });
    },

    _unbindFixListener: function() {
        this._off( $( window ), "throttledresize" );
    },

    _unfixPanel: function() {
        if ( !!this.options.positionFixed && $.support.fixedPosition ) {
            this.element.removeClass( this.options.classes.panelFixed );
        }
    },

    _fixPanel: function() {
        if ( !!this.options.positionFixed && $.support.fixedPosition ) {
            this.element.addClass( this.options.classes.panelFixed );
        }
    },

    _bindUpdateLayout: function() {
        var self = this;

        self.element.on( "updatelayout", function(/* e */) {
            if ( self._open ) {
                self._positionPanel();
            }
        });
    },

    _bindLinkListeners: function() {
        this._on( "body", {
            "click a": "_handleClick"
        });

    },

    _handleClick: function( e ) {
        var link,
            panelId = this.element.attr( "id" );

        if ( e.currentTarget.href.split( "#" )[ 1 ] === panelId && panelId !== undefined ) {

            e.preventDefault();
            link = $( e.target );
            if ( link.hasClass( "ui-btn" ) ) {
                link.addClass( $.mobile.activeBtnClass );
                this.element.one( "panelopen panelclose", function() {
                    link.removeClass( $.mobile.activeBtnClass );
                });
            }
            this.toggle();
        }
    },

    _bindSwipeEvents: function() {
        var self = this,
            area = self._modal ? self.element.add( self._modal ) : self.element;

        // on swipe, close the panel
        if ( !!self.options.swipeClose ) {
            if ( self.options.position === "left" ) {
                area.on( "swipeleft.panel", function(/* e */) {
                    self.close();
                });
            } else {
                area.on( "swiperight.panel", function(/* e */) {
                    self.close();
                });
            }
        }
    },

    _bindPageEvents: function() {
        var self = this;

        this.document
            // Close the panel if another panel on the page opens
            .on( "panelbeforeopen", function( e ) {
                if ( self._open && e.target !== self.element[ 0 ] ) {
                    self.close();
                }
            })
            // On escape, close? might need to have a target check too...
            .on( "keyup.panel", function( e ) {
                if ( e.keyCode === 27 && self._open ) {
                    self.close();
                }
            });
        if ( !this._parentPage && this.options.display !== "overlay" ) {
            this._on( this.document, {
                "pageshow": function() {
                    this._openedPage = null;
                    this._getWrapper();
                }
            });
        }
        // Clean up open panels after page hide
        if ( self._parentPage ) {
            this.document.on( "pagehide", ":jqmData(role='page')", function() {
                if ( self._open ) {
                    self.close( true );
                }
            });
        } else {
            this.document.on( "pagebeforehide", function() {
                if ( self._open ) {
                    self.close( true );
                }
            });
        }
    },

    // state storage of open or closed
    _open: false,
    _pageContentOpenClasses: null,
    _modalOpenClasses: null,

    open: function( immediate ) {
        if ( !this._open ) {
            var self = this,
                o = self.options,

                _openPanel = function() {
                    self._off( self.document , "panelclose" );
                    self._page().jqmData( "panel", "open" );

                    if ( $.support.cssTransform3d && !!o.animate && o.display !== "overlay" ) {
                        self._wrapper.addClass( o.classes.animate );
                        self._fixedToolbars().addClass( o.classes.animate );
                    }

                    if ( !immediate && $.support.cssTransform3d && !!o.animate ) {
                        ( self._wrapper || self.element )
                            .animationComplete( complete, "transition" );
                    } else {
                        setTimeout( complete, 0 );
                    }

                    if ( o.theme && o.display !== "overlay" ) {
                        self._page().parent()
                            .addClass( o.classes.pageContainer + "-themed " + o.classes.pageContainer + "-" + o.theme );
                    }

                    self.element
                        .removeClass( o.classes.panelClosed )
                        .addClass( o.classes.panelOpen );

                    self._positionPanel( true );

                    self._pageContentOpenClasses = self._getPosDisplayClasses( o.classes.pageContentPrefix );

                    if ( o.display !== "overlay" ) {
                        self._page().parent().addClass( o.classes.pageContainer );
                        self._wrapper.addClass( self._pageContentOpenClasses );
                        self._fixedToolbars().addClass( self._pageContentOpenClasses );
                    }

                    self._modalOpenClasses = self._getPosDisplayClasses( o.classes.modal ) + " " + o.classes.modalOpen;
                    if ( self._modal ) {
                        self._modal
                            .addClass( self._modalOpenClasses )
                            .height( Math.max( self._modal.height(), self.document.height() ) );
                    }
                },
                complete = function() {

                    // Bail if the panel was closed before the opening animation has completed
                    if ( !self._open ) {
                        return;
                    }

                    if ( o.display !== "overlay" ) {
                        self._wrapper.addClass( o.classes.pageContentPrefix + "-open" );
                        self._fixedToolbars().addClass( o.classes.pageContentPrefix + "-open" );
                    }

                    self._bindFixListener();

                    self._trigger( "open" );

                    self._openedPage = self._page();
                };

            self._trigger( "beforeopen" );

            if ( self._page().jqmData( "panel" ) === "open" ) {
                self._on( self.document, {
                    "panelclose": _openPanel
                });
            } else {
                _openPanel();
            }

            self._open = true;
        }
    },

    close: function( immediate ) {
        if ( this._open ) {
            var self = this,
                o = this.options,

                _closePanel = function() {

                    self.element.removeClass( o.classes.panelOpen );

                    if ( o.display !== "overlay" ) {
                        self._wrapper.removeClass( self._pageContentOpenClasses );
                        self._fixedToolbars().removeClass( self._pageContentOpenClasses );
                    }

                    if ( !immediate && $.support.cssTransform3d && !!o.animate ) {
                        ( self._wrapper || self.element )
                            .animationComplete( complete, "transition" );
                    } else {
                        setTimeout( complete, 0 );
                    }

                    if ( self._modal ) {
                        self._modal
                            .removeClass( self._modalOpenClasses )
                            .height( "" );
                    }
                },
                complete = function() {
                    if ( o.theme && o.display !== "overlay" ) {
                        self._page().parent().removeClass( o.classes.pageContainer + "-themed " + o.classes.pageContainer + "-" + o.theme );
                    }

                    self.element.addClass( o.classes.panelClosed );

                    if ( o.display !== "overlay" ) {
                        self._page().parent().removeClass( o.classes.pageContainer );
                        self._wrapper.removeClass( o.classes.pageContentPrefix + "-open" );
                        self._fixedToolbars().removeClass( o.classes.pageContentPrefix + "-open" );
                    }

                    if ( $.support.cssTransform3d && !!o.animate && o.display !== "overlay" ) {
                        self._wrapper.removeClass( o.classes.animate );
                        self._fixedToolbars().removeClass( o.classes.animate );
                    }

                    self._fixPanel();
                    self._unbindFixListener();
                    $.mobile.resetActivePageHeight();

                    self._page().jqmRemoveData( "panel" );

                    self._trigger( "close" );

                    self._openedPage = null;
                };

            self._trigger( "beforeclose" );

            _closePanel();

            self._open = false;
        }
    },

    toggle: function() {
        this[ this._open ? "close" : "open" ]();
    },

    _destroy: function() {
        var otherPanels,
        o = this.options,
        multiplePanels = ( $( "body > :mobile-panel" ).length + $.mobile.activePage.find( ":mobile-panel" ).length ) > 1;

        if ( o.display !== "overlay" ) {

            //  remove the wrapper if not in use by another panel
            otherPanels = $( "body > :mobile-panel" ).add( $.mobile.activePage.find( ":mobile-panel" ) );
            if ( otherPanels.not( ".ui-panel-display-overlay" ).not( this.element ).length === 0 ) {
                this._wrapper.children().unwrap();
            }

            if ( this._open ) {

                this._fixedToolbars().removeClass( o.classes.pageContentPrefix + "-open" );

                if ( $.support.cssTransform3d && !!o.animate ) {
                    this._fixedToolbars().removeClass( o.classes.animate );
                }

                this._page().parent().removeClass( o.classes.pageContainer );

                if ( o.theme ) {
                    this._page().parent().removeClass( o.classes.pageContainer + "-themed " + o.classes.pageContainer + "-" + o.theme );
                }
            }
        }

        if ( !multiplePanels ) {

            this.document.off( "panelopen panelclose" );

        }

        if ( this._open ) {
            this._page().jqmRemoveData( "panel" );
        }

        this._panelInner.children().unwrap();

        this.element
            .removeClass( [ this._getPanelClasses(), o.classes.panelOpen, o.classes.animate ].join( " " ) )
            .off( "swipeleft.panel swiperight.panel" )
            .off( "panelbeforeopen" )
            .off( "panelhide" )
            .off( "keyup.panel" )
            .off( "updatelayout" );

        if ( this._modal ) {
            this._modal.remove();
        }
    }
});

})( jQuery );

(function( $, undefined ) {

$.widget( "mobile.table", {
    options: {
        classes: {
            table: "ui-table"
        },
        enhanced: false
    },

    _create: function() {
        if ( !this.options.enhanced ) {
            this.element.addClass( this.options.classes.table );
        }

        // extend here, assign on refresh > _setHeaders
        $.extend( this, {

            // Expose headers and allHeaders properties on the widget
            // headers references the THs within the first TR in the table
            headers: undefined,

            // allHeaders references headers, plus all THs in the thead, which may
            // include several rows, or not
            allHeaders: undefined
        });

        this._refresh( true );
    },

    _setHeaders: function() {
        var trs = this.element.find( "thead tr" );

        this.headers = this.element.find( "tr:eq(0)" ).children();
        this.allHeaders = this.headers.add( trs.children() );
    },

    refresh: function() {
        this._refresh();
    },

    rebuild: $.noop,

    _refresh: function( /* create */ ) {
        var table = this.element,
            trs = table.find( "thead tr" );

        // updating headers on refresh (fixes #5880)
        this._setHeaders();

        // Iterate over the trs
        trs.each( function() {
            var columnCount = 0;

            // Iterate over the children of the tr
            $( this ).children().each( function() {
                var span = parseInt( this.getAttribute( "colspan" ), 10 ),
                    selector = ":nth-child(" + ( columnCount + 1 ) + ")",
                    j;

                this.setAttribute( "data-" + $.mobile.ns + "colstart", columnCount + 1 );

                if ( span ) {
                    for( j = 0; j < span - 1; j++ ) {
                        columnCount++;
                        selector += ", :nth-child(" + ( columnCount + 1 ) + ")";
                    }
                }

                // Store "cells" data on header as a reference to all cells in the
                // same column as this TH
                $( this ).jqmData( "cells", table.find( "tr" ).not( trs.eq( 0 ) ).not( this ).children( selector ) );

                columnCount++;
            });
        });
    }
});

})( jQuery );


(function( $, undefined ) {

$.widget( "mobile.table", $.mobile.table, {
    options: {
        mode: "columntoggle",
        columnBtnTheme: null,
        columnPopupTheme: null,
        columnBtnText: "Columns...",
        classes: $.extend( $.mobile.table.prototype.options.classes, {
            popup: "ui-table-columntoggle-popup",
            columnBtn: "ui-table-columntoggle-btn",
            priorityPrefix: "ui-table-priority-",
            columnToggleTable: "ui-table-columntoggle"
        })
    },

    _create: function() {
        this._super();

        if ( this.options.mode !== "columntoggle" ) {
            return;
        }

        $.extend( this, {
            _menu: null
        });

        if ( this.options.enhanced ) {
            this._menu = $( this.document[ 0 ].getElementById( this._id() + "-popup" ) ).children().first();
            this._addToggles( this._menu, true );
        } else {
            this._menu = this._enhanceColToggle();
            this.element.addClass( this.options.classes.columnToggleTable );
        }

        this._setupEvents();

        this._setToggleState();
    },

    _id: function() {
        return ( this.element.attr( "id" ) || ( this.widgetName + this.uuid ) );
    },

    _setupEvents: function() {
        //NOTE: inputs are bound in bindToggles,
        // so it can be called on refresh, too

        // update column toggles on resize
        this._on( this.window, {
            throttledresize: "_setToggleState"
        });
        this._on( this._menu, {
            "change input": "_menuInputChange"
        });
    },

    _addToggles: function( menu, keep ) {
        var inputs,
            checkboxIndex = 0,
            opts = this.options,
            container = menu.controlgroup( "container" );

        // allow update of menu on refresh (fixes #5880)
        if ( keep ) {
            inputs = menu.find( "input" );
        } else {
            container.empty();
        }

        // create the hide/show toggles
        this.headers.not( "td" ).each( function() {
            var input, cells,
                header = $( this ),
                priority = $.mobile.getAttribute( this, "priority" );

            if ( priority ) {
                cells = header.add( header.jqmData( "cells" ) );
                cells.addClass( opts.classes.priorityPrefix + priority );

                // Make sure the (new?) checkbox is associated with its header via .jqmData() and
                // that, vice versa, the header is also associated with the checkbox
                input = ( keep ? inputs.eq( checkboxIndex++ ) :
                    $("<label><input type='checkbox' checked />" +
                        ( header.children( "abbr" ).first().attr( "title" ) ||
                            header.text() ) +
                        "</label>" )
                        .appendTo( container )
                        .children( 0 )
                        .checkboxradio( {
                            theme: opts.columnPopupTheme
                        }) )

                        // Associate the header with the checkbox
                        .jqmData( "header", header )
                        .jqmData( "cells", cells );

                // Associate the checkbox with the header
                header.jqmData( "input", input );
            }
        });

        // set bindings here
        if ( !keep ) {
            menu.controlgroup( "refresh" );
        }
    },

    _menuInputChange: function( evt ) {
        var input = $( evt.target ),
            checked = input[ 0 ].checked;

        input.jqmData( "cells" )
            .toggleClass( "ui-table-cell-hidden", !checked )
            .toggleClass( "ui-table-cell-visible", checked );
    },

    _unlockCells: function( cells ) {
        // allow hide/show via CSS only = remove all toggle-locks
        cells.removeClass( "ui-table-cell-hidden ui-table-cell-visible");
    },

    _enhanceColToggle: function() {
        var id , menuButton, popup, menu,
            table = this.element,
            opts = this.options,
            ns = $.mobile.ns,
            fragment = this.document[ 0 ].createDocumentFragment();

        id = this._id() + "-popup";
        menuButton = $( "<a href='#" + id + "' " +
            "class='" + opts.classes.columnBtn + " ui-btn " +
            "ui-btn-" + ( opts.columnBtnTheme || "a" ) +
            " ui-corner-all ui-shadow ui-mini' " +
            "data-" + ns + "rel='popup'>" + opts.columnBtnText + "</a>" );
        popup = $( "<div class='" + opts.classes.popup + "' id='" + id + "'></div>" );
        menu = $( "<fieldset></fieldset>" ).controlgroup();

        // set extension here, send "false" to trigger build/rebuild
        this._addToggles( menu, false );

        menu.appendTo( popup );

        fragment.appendChild( popup[ 0 ] );
        fragment.appendChild( menuButton[ 0 ] );
        table.before( fragment );

        popup.popup();

        return menu;
    },

    rebuild: function() {
        this._super();

        if ( this.options.mode === "columntoggle" ) {
            // NOTE: rebuild passes "false", while refresh passes "undefined"
            // both refresh the table, but inside addToggles, !false will be true,
            // so a rebuild call can be indentified
            this._refresh( false );
        }
    },

    _refresh: function( create ) {
        var headers, hiddenColumns, index;

        // Calling _super() here updates this.headers
        this._super( create );

        if ( !create && this.options.mode === "columntoggle" ) {
            headers = this.headers;
            hiddenColumns = [];

            // Find the index of the column header associated with each old checkbox among the
            // post-refresh headers and, if the header is still there, make sure the corresponding
            // column will be hidden if the pre-refresh checkbox indicates that the column is
            // hidden by recording its index in the array of hidden columns.
            this._menu.find( "input" ).each( function() {
                var input = $( this ),
                    header = input.jqmData( "header" ),
                    index = headers.index( header[ 0 ] );

                if ( index > -1 && !input.prop( "checked" ) ) {

                    // The column header associated with /this/ checkbox is still present in the
                    // post-refresh table and the checkbox is not checked, so the column associated
                    // with this column header is currently hidden. Let's record that.
                    hiddenColumns.push( index );
                }
            });

            // columns not being replaced must be cleared from input toggle-locks
            this._unlockCells( this.element.find( ".ui-table-cell-hidden, " +
                ".ui-table-cell-visible" ) );

            // update columntoggles and cells
            this._addToggles( this._menu, create );

            // At this point all columns are visible, so uncheck the checkboxes that correspond to
            // those columns we've found to be hidden
            for ( index = hiddenColumns.length - 1 ; index > -1 ; index-- ) {
                headers.eq( hiddenColumns[ index ] ).jqmData( "input" )
                    .prop( "checked", false )
                    .checkboxradio( "refresh" )
                    .trigger( "change" );
            }
        }
    },

    _setToggleState: function() {
        this._menu.find( "input" ).each( function() {
            var checkbox = $( this );

            this.checked = checkbox.jqmData( "cells" ).eq( 0 ).css( "display" ) === "table-cell";
            checkbox.checkboxradio( "refresh" );
        });
    },

    _destroy: function() {
        this._super();
    }
});

})( jQuery );

(function( $, undefined ) {

$.widget( "mobile.table", $.mobile.table, {
    options: {
        mode: "reflow",
        classes: $.extend( $.mobile.table.prototype.options.classes, {
            reflowTable: "ui-table-reflow",
            cellLabels: "ui-table-cell-label"
        })
    },

    _create: function() {
        this._super();

        // If it's not reflow mode, return here.
        if ( this.options.mode !== "reflow" ) {
            return;
        }

        if ( !this.options.enhanced ) {
            this.element.addClass( this.options.classes.reflowTable );

            this._updateReflow();
        }
    },

    rebuild: function() {
        this._super();

        if ( this.options.mode === "reflow" ) {
            this._refresh( false );
        }
    },

    _refresh: function( create ) {
        this._super( create );
        if ( !create && this.options.mode === "reflow" ) {
            this._updateReflow( );
        }
    },

    _updateReflow: function() {
        var table = this,
            opts = this.options;

        // get headers in reverse order so that top-level headers are appended last
        $( table.allHeaders.get().reverse() ).each( function() {
            var cells = $( this ).jqmData( "cells" ),
                colstart = $.mobile.getAttribute( this, "colstart" ),
                hierarchyClass = cells.not( this ).filter( "thead th" ).length && " ui-table-cell-label-top",
                contents = $( this ).clone().contents(),
                iteration, filter;

                if ( contents.length > 0  ) {

                    if ( hierarchyClass ) {
                        iteration = parseInt( this.getAttribute( "colspan" ), 10 );
                        filter = "";

                        if ( iteration ) {
                            filter = "td:nth-child("+ iteration +"n + " + ( colstart ) +")";
                        }

                        table._addLabels( cells.filter( filter ),
                            opts.classes.cellLabels + hierarchyClass, contents );
                    } else {
                        table._addLabels( cells, opts.classes.cellLabels, contents );
                    }

                }
        });
    },

    _addLabels: function( cells, label, contents ) {
        if ( contents.length === 1 && contents[ 0 ].nodeName.toLowerCase() === "abbr" ) {
            contents = contents.eq( 0 ).attr( "title" );
        }
        // .not fixes #6006
        cells
            .not( ":has(b." + label + ")" )
                .prepend( $( "<b class='" + label + "'></b>" ).append( contents ) );
    }
});

})( jQuery );

(function( $, undefined ) {

// TODO rename filterCallback/deprecate and default to the item itself as the first argument
var defaultFilterCallback = function( index, searchValue ) {
    return ( ( "" + ( $.mobile.getAttribute( this, "filtertext" ) || $( this ).text() ) )
        .toLowerCase().indexOf( searchValue ) === -1 );
};

$.widget( "mobile.filterable", {

    initSelector: ":jqmData(filter='true')",

    options: {
        filterReveal: false,
        filterCallback: defaultFilterCallback,
        enhanced: false,
        input: null,
        children: "> li, > option, > optgroup option, > tbody tr, > .ui-controlgroup-controls > .ui-btn, > .ui-controlgroup-controls > .ui-checkbox, > .ui-controlgroup-controls > .ui-radio"
    },

    _create: function() {
        var opts = this.options;

        $.extend( this, {
            _search: null,
            _timer: 0
        });

        this._setInput( opts.input );
        if ( !opts.enhanced ) {
            this._filterItems( ( ( this._search && this._search.val() ) || "" ).toLowerCase() );
        }
    },

    _onKeyUp: function() {
        var val, lastval,
            search = this._search;

        if ( search ) {
            val = search.val().toLowerCase(),
            lastval = $.mobile.getAttribute( search[ 0 ], "lastval" ) + "";

            if ( lastval && lastval === val ) {
                // Execute the handler only once per value change
                return;
            }

            if ( this._timer ) {
                window.clearTimeout( this._timer );
                this._timer = 0;
            }

            this._timer = this._delay( function() {
                if ( this._trigger( "beforefilter", null, { input: search } ) === false ) {
                    return false;
                }

                // Change val as lastval for next execution
                search[ 0 ].setAttribute( "data-" + $.mobile.ns + "lastval", val );

                this._filterItems( val );
                this._timer = 0;
            }, 250 );
        }
    },

    _getFilterableItems: function() {
        var elem = this.element,
            children = this.options.children,
            items = !children ? { length: 0 }:
                $.isFunction( children ) ? children():
                children.nodeName ? $( children ):
                children.jquery ? children:
                this.element.find( children );

        if ( items.length === 0 ) {
            items = elem.children();
        }

        return items;
    },

    _filterItems: function( val ) {
        var idx, callback, length, dst,
            show = [],
            hide = [],
            opts = this.options,
            filterItems = this._getFilterableItems();

        if ( val != null ) {
            callback = opts.filterCallback || defaultFilterCallback;
            length = filterItems.length;

            // Partition the items into those to be hidden and those to be shown
            for ( idx = 0 ; idx < length ; idx++ ) {
                dst = ( callback.call( filterItems[ idx ], idx, val ) ) ? hide : show;
                dst.push( filterItems[ idx ] );
            }
        }

        // If nothing is hidden, then the decision whether to hide or show the items
        // is based on the "filterReveal" option.
        if ( hide.length === 0 ) {
            filterItems[ ( opts.filterReveal && val.length === 0 ) ?
                "addClass" : "removeClass" ]( "ui-screen-hidden" );
        } else {
            $( hide ).addClass( "ui-screen-hidden" );
            $( show ).removeClass( "ui-screen-hidden" );
        }

        this._refreshChildWidget();

        this._trigger( "filter", null, {
            items: filterItems
        });
    },

    // The Default implementation of _refreshChildWidget attempts to call
    // refresh on collapsibleset, controlgroup, selectmenu, or listview
    _refreshChildWidget: function() {
        var widget, idx,
            recognizedWidgets = [ "collapsibleset", "selectmenu", "controlgroup", "listview" ];

        for ( idx = recognizedWidgets.length - 1 ; idx > -1 ; idx-- ) {
            widget = recognizedWidgets[ idx ];
            if ( $.mobile[ widget ] ) {
                widget = this.element.data( "mobile-" + widget );
                if ( widget && $.isFunction( widget.refresh ) ) {
                    widget.refresh();
                }
            }
        }
    },

    // TODO: When the input is not internal, do not even store it in this._search
    _setInput: function ( selector ) {
        var search = this._search;

        // Stop a pending filter operation
        if ( this._timer ) {
            window.clearTimeout( this._timer );
            this._timer = 0;
        }

        if ( search ) {
            this._off( search, "keyup change input" );
            search = null;
        }

        if ( selector ) {
            search = selector.jquery ? selector:
                selector.nodeName ? $( selector ):
                this.document.find( selector );

            this._on( search, {
                keydown: "_onKeyDown",
                keypress: "_onKeyPress",
                keyup: "_onKeyUp",
                change: "_onKeyUp",
                input: "_onKeyUp"
            });
        }

        this._search = search;
    },

    // Prevent form submission
    _onKeyDown: function( event ) {
        if ( event.keyCode === $.ui.keyCode.ENTER ) {
            event.preventDefault();
            this._preventKeyPress = true;
        }
    },

    _onKeyPress: function( event ) {
        if ( this._preventKeyPress ) {
            event.preventDefault();
            this._preventKeyPress = false;
        }
    },

    _setOptions: function( options ) {
        var refilter = !( ( options.filterReveal === undefined ) &&
                ( options.filterCallback === undefined ) &&
                ( options.children === undefined ) );

        this._super( options );

        if ( options.input !== undefined ) {
            this._setInput( options.input );
            refilter = true;
        }

        if ( refilter ) {
            this.refresh();
        }
    },

    _destroy: function() {
        var opts = this.options,
            items = this._getFilterableItems();

        if ( opts.enhanced ) {
            items.toggleClass( "ui-screen-hidden", opts.filterReveal );
        } else {
            items.removeClass( "ui-screen-hidden" );
        }
    },

    refresh: function() {
        if ( this._timer ) {
            window.clearTimeout( this._timer );
            this._timer = 0;
        }
        this._filterItems( ( ( this._search && this._search.val() ) || "" ).toLowerCase() );
    }
});

})( jQuery );

(function( $, undefined ) {

// Create a function that will replace the _setOptions function of a widget,
// and will pass the options on to the input of the filterable.
var replaceSetOptions = function( self, orig ) {
        return function( options ) {
            orig.call( this, options );
            self._syncTextInputOptions( options );
        };
    },
    rDividerListItem = /(^|\s)ui-li-divider(\s|$)/,
    origDefaultFilterCallback = $.mobile.filterable.prototype.options.filterCallback;

// Override the default filter callback with one that does not hide list dividers
$.mobile.filterable.prototype.options.filterCallback = function( index, searchValue ) {
    return !this.className.match( rDividerListItem ) &&
        origDefaultFilterCallback.call( this, index, searchValue );
};

$.widget( "mobile.filterable", $.mobile.filterable, {
    options: {
        filterPlaceholder: "Filter items...",
        filterTheme: null
    },

    _create: function() {
        var idx, widgetName,
            elem = this.element,
            recognizedWidgets = [ "collapsibleset", "selectmenu", "controlgroup", "listview" ],
            createHandlers = {};

        this._super();

        $.extend( this, {
            _widget: null
        });

        for ( idx = recognizedWidgets.length - 1 ; idx > -1 ; idx-- ) {
            widgetName = recognizedWidgets[ idx ];
            if ( $.mobile[ widgetName ] ) {
                if ( this._setWidget( elem.data( "mobile-" + widgetName ) ) ) {
                    break;
                } else {
                    createHandlers[ widgetName + "create" ] = "_handleCreate";
                }
            }
        }

        if ( !this._widget ) {
            this._on( elem, createHandlers );
        }
    },

    _handleCreate: function( evt ) {
        this._setWidget( this.element.data( "mobile-" + evt.type.substring( 0, evt.type.length - 6 ) ) );
    },

    _trigger: function( type, event, data ) {
        if ( this._widget && this._widget.widgetFullName === "mobile-listview" &&
            type === "beforefilter" ) {

            // Also trigger listviewbeforefilter if this widget is also a listview
            this._widget._trigger( "beforefilter", event, data );
        }

        // Passing back the response enables calling preventDefault()
        return this._super( type, event, data );
    },

    _setWidget: function( widget ) {
        if ( !this._widget && widget ) {
            this._widget = widget;
            this._widget._setOptions = replaceSetOptions( this, this._widget._setOptions );
        }

        if ( !!this._widget ) {
            this._syncTextInputOptions( this._widget.options );
            if ( this._widget.widgetName === "listview" ) {
                this._widget.options.hideDividers = true;
                this._widget.element.listview( "refresh" );
            }
        }

        return !!this._widget;
    },

    _isSearchInternal: function() {
        return ( this._search && this._search.jqmData( "ui-filterable-" + this.uuid + "-internal" ) );
    },

    _setInput: function( selector ) {
        var opts = this.options,
            updatePlaceholder = true,
            textinputOpts = {};

        if ( !selector ) {
            if ( this._isSearchInternal() ) {

                // Ignore the call to set a new input if the selector goes to falsy and
                // the current textinput is already of the internally generated variety.
                return;
            } else {

                // Generating a new textinput widget. No need to set the placeholder
                // further down the function.
                updatePlaceholder = false;
                selector = $( "<input " +
                    "data-" + $.mobile.ns + "type='search' " +
                    "placeholder='" + opts.filterPlaceholder + "'></input>" )
                    .jqmData( "ui-filterable-" + this.uuid + "-internal", true );
                $( "<form class='ui-filterable'></form>" )
                    .append( selector )
                    .submit( function( evt ) {
                        evt.preventDefault();
                        selector.blur();
                    })
                    .insertBefore( this.element );
                if ( $.mobile.textinput ) {
                    if ( this.options.filterTheme != null ) {
                        textinputOpts[ "theme" ] = opts.filterTheme;
                    }

                    selector.textinput( textinputOpts );
                }
            }
        }

        this._super( selector );

        if ( this._isSearchInternal() && updatePlaceholder ) {
            this._search.attr( "placeholder", this.options.filterPlaceholder );
        }
    },

    _setOptions: function( options ) {
        var ret = this._super( options );

        // Need to set the filterPlaceholder after having established the search input
        if ( options.filterPlaceholder !== undefined ) {
            if ( this._isSearchInternal() ) {
                this._search.attr( "placeholder", options.filterPlaceholder );
            }
        }

        if ( options.filterTheme !== undefined && this._search && $.mobile.textinput ) {
            this._search.textinput( "option", "theme", options.filterTheme );
        }

        return ret;
    },

    // The listview implementation accompanying this filterable backcompat layer will call
    // filterable.refresh() after it's done refreshing the listview to make sure the filterable
    // filters out any new items added. However, when the listview refresh has been initiated by
    // the filterable itself, then such filtering has already taken place, and calling the
    // filterable's refresh() method will cause an infinite recursion. We stop this by setting a
    // flag that will cause the filterable's refresh() method to short-circuit.
    _refreshChildWidget: function() {
        this._refreshingChildWidget = true;
        this._superApply( arguments );
        this._refreshingChildWidget = false;
    },

    refresh: function() {
        if ( !this._refreshingChildWidget ) {
            this._superApply( arguments );
        }
    },

    _destroy: function() {
        if ( this._isSearchInternal() ) {
            this._search.remove();
        }
        this._super();
    },

    _syncTextInputOptions: function( options ) {
        var idx,
            textinputOptions = {};

        // We only sync options if the filterable's textinput is of the internally
        // generated variety, rather than one specified by the user.
        if ( this._isSearchInternal() && $.mobile.textinput ) {

            // Apply only the options understood by textinput
            for ( idx in $.mobile.textinput.prototype.options ) {
                if ( options[ idx ] !== undefined ) {
                    if ( idx === "theme" && this.options.filterTheme != null ) {
                        textinputOptions[ idx ] = this.options.filterTheme;
                    } else {
                        textinputOptions[ idx ] = options[ idx ];
                    }
                }
            }
            this._search.textinput( "option", textinputOptions );
        }
    }
});

// Instantiate a filterable on a listview that has the data-filter="true" attribute
// This is not necessary for static content, because the auto-enhance takes care of instantiating
// the filterable upon encountering data-filter="true". However, because of 1.3.x it is expected
// that a listview with data-filter="true" will be filterable even if you just instantiate a
// listview on it. The extension below ensures that this continues to happen in 1.4.x.
$.widget( "mobile.listview", $.mobile.listview, {
    options: {
        filter: false
    },
    _create: function() {
        if ( this.options.filter === true &&
                !this.element.data( "mobile-filterable" ) ) {
            this.element.filterable();
        }
        return this._super();
    },

    refresh: function() {
        var filterable;

        this._superApply( arguments );

        if ( this.options.filter === true ) {
            filterable = this.element.data( "mobile-filterable" );

            if ( filterable ) {
                filterable.refresh();
            }
        }
    }
});

})( jQuery );

/*!
 * jQuery UI Tabs fadf2b312a05040436451c64bbfaf4814bc62c56
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/tabs/
 *
 * Depends:
 *    jquery.ui.core.js
 *    jquery.ui.widget.js
 */
(function( $, undefined ) {

var tabId = 0,
    rhash = /#.*$/;

function getNextTabId() {
    return ++tabId;
}

function isLocal( anchor ) {
    return anchor.hash.length > 1 &&
        decodeURIComponent( anchor.href.replace( rhash, "" ) ) ===
            decodeURIComponent( location.href.replace( rhash, "" ) );
}

$.widget( "ui.tabs", {
    version: "fadf2b312a05040436451c64bbfaf4814bc62c56",
    delay: 300,
    options: {
        active: null,
        collapsible: false,
        event: "click",
        heightStyle: "content",
        hide: null,
        show: null,

        // callbacks
        activate: null,
        beforeActivate: null,
        beforeLoad: null,
        load: null
    },

    _create: function() {
        var that = this,
            options = this.options;

        this.running = false;

        this.element
            .addClass( "ui-tabs ui-widget ui-widget-content ui-corner-all" )
            .toggleClass( "ui-tabs-collapsible", options.collapsible )
            // Prevent users from focusing disabled tabs via click
            .delegate( ".ui-tabs-nav > li", "mousedown" + this.eventNamespace, function( event ) {
                if ( $( this ).is( ".ui-state-disabled" ) ) {
                    event.preventDefault();
                }
            })
            // support: IE <9
            // Preventing the default action in mousedown doesn't prevent IE
            // from focusing the element, so if the anchor gets focused, blur.
            // We don't have to worry about focusing the previously focused
            // element since clicking on a non-focusable element should focus
            // the body anyway.
            .delegate( ".ui-tabs-anchor", "focus" + this.eventNamespace, function() {
                if ( $( this ).closest( "li" ).is( ".ui-state-disabled" ) ) {
                    this.blur();
                }
            });

        this._processTabs();
        options.active = this._initialActive();

        // Take disabling tabs via class attribute from HTML
        // into account and update option properly.
        if ( $.isArray( options.disabled ) ) {
            options.disabled = $.unique( options.disabled.concat(
                $.map( this.tabs.filter( ".ui-state-disabled" ), function( li ) {
                    return that.tabs.index( li );
                })
            ) ).sort();
        }

        // check for length avoids error when initializing empty list
        if ( this.options.active !== false && this.anchors.length ) {
            this.active = this._findActive( options.active );
        } else {
            this.active = $();
        }

        this._refresh();

        if ( this.active.length ) {
            this.load( options.active );
        }
    },

    _initialActive: function() {
        var active = this.options.active,
            collapsible = this.options.collapsible,
            locationHash = location.hash.substring( 1 );

        if ( active === null ) {
            // check the fragment identifier in the URL
            if ( locationHash ) {
                this.tabs.each(function( i, tab ) {
                    if ( $( tab ).attr( "aria-controls" ) === locationHash ) {
                        active = i;
                        return false;
                    }
                });
            }

            // check for a tab marked active via a class
            if ( active === null ) {
                active = this.tabs.index( this.tabs.filter( ".ui-tabs-active" ) );
            }

            // no active tab, set to false
            if ( active === null || active === -1 ) {
                active = this.tabs.length ? 0 : false;
            }
        }

        // handle numbers: negative, out of range
        if ( active !== false ) {
            active = this.tabs.index( this.tabs.eq( active ) );
            if ( active === -1 ) {
                active = collapsible ? false : 0;
            }
        }

        // don't allow collapsible: false and active: false
        if ( !collapsible && active === false && this.anchors.length ) {
            active = 0;
        }

        return active;
    },

    _getCreateEventData: function() {
        return {
            tab: this.active,
            panel: !this.active.length ? $() : this._getPanelForTab( this.active )
        };
    },

    _tabKeydown: function( event ) {
        var focusedTab = $( this.document[0].activeElement ).closest( "li" ),
            selectedIndex = this.tabs.index( focusedTab ),
            goingForward = true;

        if ( this._handlePageNav( event ) ) {
            return;
        }

        switch ( event.keyCode ) {
            case $.ui.keyCode.RIGHT:
            case $.ui.keyCode.DOWN:
                selectedIndex++;
                break;
            case $.ui.keyCode.UP:
            case $.ui.keyCode.LEFT:
                goingForward = false;
                selectedIndex--;
                break;
            case $.ui.keyCode.END:
                selectedIndex = this.anchors.length - 1;
                break;
            case $.ui.keyCode.HOME:
                selectedIndex = 0;
                break;
            case $.ui.keyCode.SPACE:
                // Activate only, no collapsing
                event.preventDefault();
                clearTimeout( this.activating );
                this._activate( selectedIndex );
                return;
            case $.ui.keyCode.ENTER:
                // Toggle (cancel delayed activation, allow collapsing)
                event.preventDefault();
                clearTimeout( this.activating );
                // Determine if we should collapse or activate
                this._activate( selectedIndex === this.options.active ? false : selectedIndex );
                return;
            default:
                return;
        }

        // Focus the appropriate tab, based on which key was pressed
        event.preventDefault();
        clearTimeout( this.activating );
        selectedIndex = this._focusNextTab( selectedIndex, goingForward );

        // Navigating with control key will prevent automatic activation
        if ( !event.ctrlKey ) {
            // Update aria-selected immediately so that AT think the tab is already selected.
            // Otherwise AT may confuse the user by stating that they need to activate the tab,
            // but the tab will already be activated by the time the announcement finishes.
            focusedTab.attr( "aria-selected", "false" );
            this.tabs.eq( selectedIndex ).attr( "aria-selected", "true" );

            this.activating = this._delay(function() {
                this.option( "active", selectedIndex );
            }, this.delay );
        }
    },

    _panelKeydown: function( event ) {
        if ( this._handlePageNav( event ) ) {
            return;
        }

        // Ctrl+up moves focus to the current tab
        if ( event.ctrlKey && event.keyCode === $.ui.keyCode.UP ) {
            event.preventDefault();
            this.active.focus();
        }
    },

    // Alt+page up/down moves focus to the previous/next tab (and activates)
    _handlePageNav: function( event ) {
        if ( event.altKey && event.keyCode === $.ui.keyCode.PAGE_UP ) {
            this._activate( this._focusNextTab( this.options.active - 1, false ) );
            return true;
        }
        if ( event.altKey && event.keyCode === $.ui.keyCode.PAGE_DOWN ) {
            this._activate( this._focusNextTab( this.options.active + 1, true ) );
            return true;
        }
    },

    _findNextTab: function( index, goingForward ) {
        var lastTabIndex = this.tabs.length - 1;

        function constrain() {
            if ( index > lastTabIndex ) {
                index = 0;
            }
            if ( index < 0 ) {
                index = lastTabIndex;
            }
            return index;
        }

        while ( $.inArray( constrain(), this.options.disabled ) !== -1 ) {
            index = goingForward ? index + 1 : index - 1;
        }

        return index;
    },

    _focusNextTab: function( index, goingForward ) {
        index = this._findNextTab( index, goingForward );
        this.tabs.eq( index ).focus();
        return index;
    },

    _setOption: function( key, value ) {
        if ( key === "active" ) {
            // _activate() will handle invalid values and update this.options
            this._activate( value );
            return;
        }

        if ( key === "disabled" ) {
            // don't use the widget factory's disabled handling
            this._setupDisabled( value );
            return;
        }

        this._super( key, value);

        if ( key === "collapsible" ) {
            this.element.toggleClass( "ui-tabs-collapsible", value );
            // Setting collapsible: false while collapsed; open first panel
            if ( !value && this.options.active === false ) {
                this._activate( 0 );
            }
        }

        if ( key === "event" ) {
            this._setupEvents( value );
        }

        if ( key === "heightStyle" ) {
            this._setupHeightStyle( value );
        }
    },

    _tabId: function( tab ) {
        return tab.attr( "aria-controls" ) || "ui-tabs-" + getNextTabId();
    },

    _sanitizeSelector: function( hash ) {
        return hash ? hash.replace( /[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g, "\\$&" ) : "";
    },

    refresh: function() {
        var options = this.options,
            lis = this.tablist.children( ":has(a[href])" );

        // get disabled tabs from class attribute from HTML
        // this will get converted to a boolean if needed in _refresh()
        options.disabled = $.map( lis.filter( ".ui-state-disabled" ), function( tab ) {
            return lis.index( tab );
        });

        this._processTabs();

        // was collapsed or no tabs
        if ( options.active === false || !this.anchors.length ) {
            options.active = false;
            this.active = $();
        // was active, but active tab is gone
        } else if ( this.active.length && !$.contains( this.tablist[ 0 ], this.active[ 0 ] ) ) {
            // all remaining tabs are disabled
            if ( this.tabs.length === options.disabled.length ) {
                options.active = false;
                this.active = $();
            // activate previous tab
            } else {
                this._activate( this._findNextTab( Math.max( 0, options.active - 1 ), false ) );
            }
        // was active, active tab still exists
        } else {
            // make sure active index is correct
            options.active = this.tabs.index( this.active );
        }

        this._refresh();
    },

    _refresh: function() {
        this._setupDisabled( this.options.disabled );
        this._setupEvents( this.options.event );
        this._setupHeightStyle( this.options.heightStyle );

        this.tabs.not( this.active ).attr({
            "aria-selected": "false",
            tabIndex: -1
        });
        this.panels.not( this._getPanelForTab( this.active ) )
            .hide()
            .attr({
                "aria-expanded": "false",
                "aria-hidden": "true"
            });

        // Make sure one tab is in the tab order
        if ( !this.active.length ) {
            this.tabs.eq( 0 ).attr( "tabIndex", 0 );
        } else {
            this.active
                .addClass( "ui-tabs-active ui-state-active" )
                .attr({
                    "aria-selected": "true",
                    tabIndex: 0
                });
            this._getPanelForTab( this.active )
                .show()
                .attr({
                    "aria-expanded": "true",
                    "aria-hidden": "false"
                });
        }
    },

    _processTabs: function() {
        var that = this;

        this.tablist = this._getList()
            .addClass( "ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all" )
            .attr( "role", "tablist" );

        this.tabs = this.tablist.find( "> li:has(a[href])" )
            .addClass( "ui-state-default ui-corner-top" )
            .attr({
                role: "tab",
                tabIndex: -1
            });

        this.anchors = this.tabs.map(function() {
                return $( "a", this )[ 0 ];
            })
            .addClass( "ui-tabs-anchor" )
            .attr({
                role: "presentation",
                tabIndex: -1
            });

        this.panels = $();

        this.anchors.each(function( i, anchor ) {
            var selector, panel, panelId,
                anchorId = $( anchor ).uniqueId().attr( "id" ),
                tab = $( anchor ).closest( "li" ),
                originalAriaControls = tab.attr( "aria-controls" );

            // inline tab
            if ( isLocal( anchor ) ) {
                selector = anchor.hash;
                panel = that.element.find( that._sanitizeSelector( selector ) );
            // remote tab
            } else {
                panelId = that._tabId( tab );
                selector = "#" + panelId;
                panel = that.element.find( selector );
                if ( !panel.length ) {
                    panel = that._createPanel( panelId );
                    panel.insertAfter( that.panels[ i - 1 ] || that.tablist );
                }
                panel.attr( "aria-live", "polite" );
            }

            if ( panel.length) {
                that.panels = that.panels.add( panel );
            }
            if ( originalAriaControls ) {
                tab.data( "ui-tabs-aria-controls", originalAriaControls );
            }
            tab.attr({
                "aria-controls": selector.substring( 1 ),
                "aria-labelledby": anchorId
            });
            panel.attr( "aria-labelledby", anchorId );
        });

        this.panels
            .addClass( "ui-tabs-panel ui-widget-content ui-corner-bottom" )
            .attr( "role", "tabpanel" );
    },

    // allow overriding how to find the list for rare usage scenarios (#7715)
    _getList: function() {
        return this.element.find( "ol,ul" ).eq( 0 );
    },

    _createPanel: function( id ) {
        return $( "<div>" )
            .attr( "id", id )
            .addClass( "ui-tabs-panel ui-widget-content ui-corner-bottom" )
            .data( "ui-tabs-destroy", true );
    },

    _setupDisabled: function( disabled ) {
        if ( $.isArray( disabled ) ) {
            if ( !disabled.length ) {
                disabled = false;
            } else if ( disabled.length === this.anchors.length ) {
                disabled = true;
            }
        }

        // disable tabs
        for ( var i = 0, li; ( li = this.tabs[ i ] ); i++ ) {
            if ( disabled === true || $.inArray( i, disabled ) !== -1 ) {
                $( li )
                    .addClass( "ui-state-disabled" )
                    .attr( "aria-disabled", "true" );
            } else {
                $( li )
                    .removeClass( "ui-state-disabled" )
                    .removeAttr( "aria-disabled" );
            }
        }

        this.options.disabled = disabled;
    },

    _setupEvents: function( event ) {
        var events = {
            click: function( event ) {
                event.preventDefault();
            }
        };
        if ( event ) {
            $.each( event.split(" "), function( index, eventName ) {
                events[ eventName ] = "_eventHandler";
            });
        }

        this._off( this.anchors.add( this.tabs ).add( this.panels ) );
        this._on( this.anchors, events );
        this._on( this.tabs, { keydown: "_tabKeydown" } );
        this._on( this.panels, { keydown: "_panelKeydown" } );

        this._focusable( this.tabs );
        this._hoverable( this.tabs );
    },

    _setupHeightStyle: function( heightStyle ) {
        var maxHeight,
            parent = this.element.parent();

        if ( heightStyle === "fill" ) {
            maxHeight = parent.height();
            maxHeight -= this.element.outerHeight() - this.element.height();

            this.element.siblings( ":visible" ).each(function() {
                var elem = $( this ),
                    position = elem.css( "position" );

                if ( position === "absolute" || position === "fixed" ) {
                    return;
                }
                maxHeight -= elem.outerHeight( true );
            });

            this.element.children().not( this.panels ).each(function() {
                maxHeight -= $( this ).outerHeight( true );
            });

            this.panels.each(function() {
                $( this ).height( Math.max( 0, maxHeight -
                    $( this ).innerHeight() + $( this ).height() ) );
            })
            .css( "overflow", "auto" );
        } else if ( heightStyle === "auto" ) {
            maxHeight = 0;
            this.panels.each(function() {
                maxHeight = Math.max( maxHeight, $( this ).height( "" ).height() );
            }).height( maxHeight );
        }
    },

    _eventHandler: function( event ) {
        var options = this.options,
            active = this.active,
            anchor = $( event.currentTarget ),
            tab = anchor.closest( "li" ),
            clickedIsActive = tab[ 0 ] === active[ 0 ],
            collapsing = clickedIsActive && options.collapsible,
            toShow = collapsing ? $() : this._getPanelForTab( tab ),
            toHide = !active.length ? $() : this._getPanelForTab( active ),
            eventData = {
                oldTab: active,
                oldPanel: toHide,
                newTab: collapsing ? $() : tab,
                newPanel: toShow
            };

        event.preventDefault();

        if ( tab.hasClass( "ui-state-disabled" ) ||
                // tab is already loading
                tab.hasClass( "ui-tabs-loading" ) ||
                // can't switch durning an animation
                this.running ||
                // click on active header, but not collapsible
                ( clickedIsActive && !options.collapsible ) ||
                // allow canceling activation
                ( this._trigger( "beforeActivate", event, eventData ) === false ) ) {
            return;
        }

        options.active = collapsing ? false : this.tabs.index( tab );

        this.active = clickedIsActive ? $() : tab;
        if ( this.xhr ) {
            this.xhr.abort();
        }

        if ( !toHide.length && !toShow.length ) {
            $.error( "jQuery UI Tabs: Mismatching fragment identifier." );
        }

        if ( toShow.length ) {
            this.load( this.tabs.index( tab ), event );
        }
        this._toggle( event, eventData );
    },

    // handles show/hide for selecting tabs
    _toggle: function( event, eventData ) {
        var that = this,
            toShow = eventData.newPanel,
            toHide = eventData.oldPanel;

        this.running = true;

        function complete() {
            that.running = false;
            that._trigger( "activate", event, eventData );
        }

        function show() {
            eventData.newTab.closest( "li" ).addClass( "ui-tabs-active ui-state-active" );

            if ( toShow.length && that.options.show ) {
                that._show( toShow, that.options.show, complete );
            } else {
                toShow.show();
                complete();
            }
        }

        // start out by hiding, then showing, then completing
        if ( toHide.length && this.options.hide ) {
            this._hide( toHide, this.options.hide, function() {
                eventData.oldTab.closest( "li" ).removeClass( "ui-tabs-active ui-state-active" );
                show();
            });
        } else {
            eventData.oldTab.closest( "li" ).removeClass( "ui-tabs-active ui-state-active" );
            toHide.hide();
            show();
        }

        toHide.attr({
            "aria-expanded": "false",
            "aria-hidden": "true"
        });
        eventData.oldTab.attr( "aria-selected", "false" );
        // If we're switching tabs, remove the old tab from the tab order.
        // If we're opening from collapsed state, remove the previous tab from the tab order.
        // If we're collapsing, then keep the collapsing tab in the tab order.
        if ( toShow.length && toHide.length ) {
            eventData.oldTab.attr( "tabIndex", -1 );
        } else if ( toShow.length ) {
            this.tabs.filter(function() {
                return $( this ).attr( "tabIndex" ) === 0;
            })
            .attr( "tabIndex", -1 );
        }

        toShow.attr({
            "aria-expanded": "true",
            "aria-hidden": "false"
        });
        eventData.newTab.attr({
            "aria-selected": "true",
            tabIndex: 0
        });
    },

    _activate: function( index ) {
        var anchor,
            active = this._findActive( index );

        // trying to activate the already active panel
        if ( active[ 0 ] === this.active[ 0 ] ) {
            return;
        }

        // trying to collapse, simulate a click on the current active header
        if ( !active.length ) {
            active = this.active;
        }

        anchor = active.find( ".ui-tabs-anchor" )[ 0 ];
        this._eventHandler({
            target: anchor,
            currentTarget: anchor,
            preventDefault: $.noop
        });
    },

    _findActive: function( index ) {
        return index === false ? $() : this.tabs.eq( index );
    },

    _getIndex: function( index ) {
        // meta-function to give users option to provide a href string instead of a numerical index.
        if ( typeof index === "string" ) {
            index = this.anchors.index( this.anchors.filter( "[href$='" + index + "']" ) );
        }

        return index;
    },

    _destroy: function() {
        if ( this.xhr ) {
            this.xhr.abort();
        }

        this.element.removeClass( "ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible" );

        this.tablist
            .removeClass( "ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all" )
            .removeAttr( "role" );

        this.anchors
            .removeClass( "ui-tabs-anchor" )
            .removeAttr( "role" )
            .removeAttr( "tabIndex" )
            .removeUniqueId();

        this.tabs.add( this.panels ).each(function() {
            if ( $.data( this, "ui-tabs-destroy" ) ) {
                $( this ).remove();
            } else {
                $( this )
                    .removeClass( "ui-state-default ui-state-active ui-state-disabled " +
                        "ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel" )
                    .removeAttr( "tabIndex" )
                    .removeAttr( "aria-live" )
                    .removeAttr( "aria-busy" )
                    .removeAttr( "aria-selected" )
                    .removeAttr( "aria-labelledby" )
                    .removeAttr( "aria-hidden" )
                    .removeAttr( "aria-expanded" )
                    .removeAttr( "role" );
            }
        });

        this.tabs.each(function() {
            var li = $( this ),
                prev = li.data( "ui-tabs-aria-controls" );
            if ( prev ) {
                li
                    .attr( "aria-controls", prev )
                    .removeData( "ui-tabs-aria-controls" );
            } else {
                li.removeAttr( "aria-controls" );
            }
        });

        this.panels.show();

        if ( this.options.heightStyle !== "content" ) {
            this.panels.css( "height", "" );
        }
    },

    enable: function( index ) {
        var disabled = this.options.disabled;
        if ( disabled === false ) {
            return;
        }

        if ( index === undefined ) {
            disabled = false;
        } else {
            index = this._getIndex( index );
            if ( $.isArray( disabled ) ) {
                disabled = $.map( disabled, function( num ) {
                    return num !== index ? num : null;
                });
            } else {
                disabled = $.map( this.tabs, function( li, num ) {
                    return num !== index ? num : null;
                });
            }
        }
        this._setupDisabled( disabled );
    },

    disable: function( index ) {
        var disabled = this.options.disabled;
        if ( disabled === true ) {
            return;
        }

        if ( index === undefined ) {
            disabled = true;
        } else {
            index = this._getIndex( index );
            if ( $.inArray( index, disabled ) !== -1 ) {
                return;
            }
            if ( $.isArray( disabled ) ) {
                disabled = $.merge( [ index ], disabled ).sort();
            } else {
                disabled = [ index ];
            }
        }
        this._setupDisabled( disabled );
    },

    load: function( index, event ) {
        index = this._getIndex( index );
        var that = this,
            tab = this.tabs.eq( index ),
            anchor = tab.find( ".ui-tabs-anchor" ),
            panel = this._getPanelForTab( tab ),
            eventData = {
                tab: tab,
                panel: panel
            };

        // not remote
        if ( isLocal( anchor[ 0 ] ) ) {
            return;
        }

        this.xhr = $.ajax( this._ajaxSettings( anchor, event, eventData ) );

        // support: jQuery <1.8
        // jQuery <1.8 returns false if the request is canceled in beforeSend,
        // but as of 1.8, $.ajax() always returns a jqXHR object.
        if ( this.xhr && this.xhr.statusText !== "canceled" ) {
            tab.addClass( "ui-tabs-loading" );
            panel.attr( "aria-busy", "true" );

            this.xhr
                .success(function( response ) {
                    // support: jQuery <1.8
                    // http://bugs.jquery.com/ticket/11778
                    setTimeout(function() {
                        panel.html( response );
                        that._trigger( "load", event, eventData );
                    }, 1 );
                })
                .complete(function( jqXHR, status ) {
                    // support: jQuery <1.8
                    // http://bugs.jquery.com/ticket/11778
                    setTimeout(function() {
                        if ( status === "abort" ) {
                            that.panels.stop( false, true );
                        }

                        tab.removeClass( "ui-tabs-loading" );
                        panel.removeAttr( "aria-busy" );

                        if ( jqXHR === that.xhr ) {
                            delete that.xhr;
                        }
                    }, 1 );
                });
        }
    },

    _ajaxSettings: function( anchor, event, eventData ) {
        var that = this;
        return {
            url: anchor.attr( "href" ),
            beforeSend: function( jqXHR, settings ) {
                return that._trigger( "beforeLoad", event,
                    $.extend( { jqXHR : jqXHR, ajaxSettings: settings }, eventData ) );
            }
        };
    },

    _getPanelForTab: function( tab ) {
        var id = $( tab ).attr( "aria-controls" );
        return this.element.find( this._sanitizeSelector( "#" + id ) );
    }
});

})( jQuery );

(function( $, undefined ) {

})( jQuery );

(function( $, window ) {

    $.mobile.iosorientationfixEnabled = true;

    // This fix addresses an iOS bug, so return early if the UA claims it's something else.
    var ua = navigator.userAgent,
        zoom,
        evt, x, y, z, aig;
    if ( !( /iPhone|iPad|iPod/.test( navigator.platform ) && /OS [1-5]_[0-9_]* like Mac OS X/i.test( ua ) && ua.indexOf( "AppleWebKit" ) > -1 ) ) {
        $.mobile.iosorientationfixEnabled = false;
        return;
    }

    zoom = $.mobile.zoom;

    function checkTilt( e ) {
        evt = e.originalEvent;
        aig = evt.accelerationIncludingGravity;

        x = Math.abs( aig.x );
        y = Math.abs( aig.y );
        z = Math.abs( aig.z );

        // If portrait orientation and in one of the danger zones
        if ( !window.orientation && ( x > 7 || ( ( z > 6 && y < 8 || z < 8 && y > 6 ) && x > 5 ) ) ) {
                if ( zoom.enabled ) {
                    zoom.disable();
                }
        }    else if ( !zoom.enabled ) {
                zoom.enable();
        }
    }

    $.mobile.document.on( "mobileinit", function() {
        if ( $.mobile.iosorientationfixEnabled ) {
            $.mobile.window
                .bind( "orientationchange.iosorientationfix", zoom.enable )
                .bind( "devicemotion.iosorientationfix", checkTilt );
        }
    });

}( jQuery, this ));

(function( $, window, undefined ) {
    var    $html = $( "html" ),
        $window = $.mobile.window;

    //remove initial build class (only present on first pageshow)
    function hideRenderingClass() {
        $html.removeClass( "ui-mobile-rendering" );
    }

    // trigger mobileinit event - useful hook for configuring $.mobile settings before they're used
    $( window.document ).trigger( "mobileinit" );

    // support conditions
    // if device support condition(s) aren't met, leave things as they are -> a basic, usable experience,
    // otherwise, proceed with the enhancements
    if ( !$.mobile.gradeA() ) {
        return;
    }

    // override ajaxEnabled on platforms that have known conflicts with hash history updates
    // or generally work better browsing in regular http for full page refreshes (BB5, Opera Mini)
    if ( $.mobile.ajaxBlacklist ) {
        $.mobile.ajaxEnabled = false;
    }

    // Add mobile, initial load "rendering" classes to docEl
    $html.addClass( "ui-mobile ui-mobile-rendering" );

    // This is a fallback. If anything goes wrong (JS errors, etc), or events don't fire,
    // this ensures the rendering class is removed after 5 seconds, so content is visible and accessible
    setTimeout( hideRenderingClass, 5000 );

    $.extend( $.mobile, {
        // find and enhance the pages in the dom and transition to the first page.
        initializePage: function() {
            // find present pages
            var path = $.mobile.path,
                $pages = $( ":jqmData(role='page'), :jqmData(role='dialog')" ),
                hash = path.stripHash( path.stripQueryParams(path.parseLocation().hash) ),
                theLocation = $.mobile.path.parseLocation(),
                hashPage = hash ? document.getElementById( hash ) : undefined;

            // if no pages are found, create one with body's inner html
            if ( !$pages.length ) {
                $pages = $( "body" ).wrapInner( "<div data-" + $.mobile.ns + "role='page'></div>" ).children( 0 );
            }

            // add dialogs, set data-url attrs
            $pages.each(function() {
                var $this = $( this );

                // unless the data url is already set set it to the pathname
                if ( !$this[ 0 ].getAttribute( "data-" + $.mobile.ns + "url" ) ) {
                    $this.attr( "data-" + $.mobile.ns + "url", $this.attr( "id" ) ||
                        path.convertUrlToDataUrl( theLocation.pathname + theLocation.search ) );
                }
            });

            // define first page in dom case one backs out to the directory root (not always the first page visited, but defined as fallback)
            $.mobile.firstPage = $pages.first();

            // define page container
            $.mobile.pageContainer = $.mobile.firstPage
                .parent()
                .addClass( "ui-mobile-viewport" )
                .pagecontainer();

            // initialize navigation events now, after mobileinit has occurred and the page container
            // has been created but before the rest of the library is alerted to that fact
            $.mobile.navreadyDeferred.resolve();

            // alert listeners that the pagecontainer has been determined for binding
            // to events triggered on it
            $window.trigger( "pagecontainercreate" );

            // cue page loading message
            $.mobile.loading( "show" );

            //remove initial build class (only present on first pageshow)
            hideRenderingClass();

            // if hashchange listening is disabled, there's no hash deeplink,
            // the hash is not valid (contains more than one # or does not start with #)
            // or there is no page with that hash, change to the first page in the DOM
            // Remember, however, that the hash can also be a path!
            if ( ! ( $.mobile.hashListeningEnabled &&
                $.mobile.path.isHashValid( location.hash ) &&
                ( $( hashPage ).is( ":jqmData(role='page')" ) ||
                    $.mobile.path.isPath( hash ) ||
                    hash === $.mobile.dialogHashKey ) ) ) {

                // make sure to set initial popstate state if it exists
                // so that navigation back to the initial page works properly
                if ( $.event.special.navigate.isPushStateEnabled() ) {
                    $.mobile.navigate.navigator.squash( path.parseLocation().href );
                }

                $.mobile.changePage( $.mobile.firstPage, {
                    transition: "none",
                    reverse: true,
                    changeHash: false,
                    fromHashChange: true
                });
            } else {
                // trigger hashchange or navigate to squash and record the correct
                // history entry for an initial hash path
                if ( !$.event.special.navigate.isPushStateEnabled() ) {
                    $window.trigger( "hashchange", [true] );
                } else {
                    // TODO figure out how to simplify this interaction with the initial history entry
                    // at the bottom js/navigate/navigate.js
                    $.mobile.navigate.history.stack = [];
                    $.mobile.navigate( $.mobile.path.isPath( location.hash ) ? location.hash : location.href );
                }
            }
        }
    });

    $(function() {
        //Run inlineSVG support test
        $.support.inlineSVG();

        // check which scrollTop value should be used by scrolling to 1 immediately at domready
        // then check what the scroll top is. Android will report 0... others 1
        // note that this initial scroll won't hide the address bar. It's just for the check.

        // hide iOS browser chrome on load if hideUrlBar is true this is to try and do it as soon as possible
        if ( $.mobile.hideUrlBar ) {
            window.scrollTo( 0, 1 );
        }

        // if defaultHomeScroll hasn't been set yet, see if scrollTop is 1
        // it should be 1 in most browsers, but android treats 1 as 0 (for hiding addr bar)
        // so if it's 1, use 0 from now on
        $.mobile.defaultHomeScroll = ( !$.support.scrollTop || $.mobile.window.scrollTop() === 1 ) ? 0 : 1;

        //dom-ready inits
        if ( $.mobile.autoInitializePage ) {
            $.mobile.initializePage();
        }

        // window load event
        // hide iOS browser chrome on load if hideUrlBar is true this is as fall back incase we were too early before
        if ( $.mobile.hideUrlBar ) {
            $window.load( $.mobile.silentScroll );
        }

        if ( !$.support.cssPointerEvents ) {
            // IE and Opera don't support CSS pointer-events: none that we use to disable link-based buttons
            // by adding the 'ui-disabled' class to them. Using a JavaScript workaround for those browser.
            // https://github.com/jquery/jquery-mobile/issues/3558

            // DEPRECATED as of 1.4.0 - remove ui-disabled after 1.4.0 release
            // only ui-state-disabled should be present thereafter
            $.mobile.document.delegate( ".ui-state-disabled,.ui-disabled", "vclick",
                function( e ) {
                    e.preventDefault();
                    e.stopImmediatePropagation();
                }
            );
        }
    });
}( jQuery, this ));


}));

}.call(window));

/***/ }),
/* 1 */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*** IMPORTS FROM imports-loader ***/
(function() {

(function (root, factory) { if (true) { !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(2), __webpack_require__(3)], __WEBPACK_AMD_DEFINE_RESULT__ = function () { return factory(root.CDP || (root.CDP = {})); }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
                __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__)); } else { factory(root.CDP || (root.CDP = {})); } }(this, function (CDP) { CDP.Framework = CDP.Framework || {};
/// <reference types="backbone" />
var CDP;
(function (CDP) {
    var Framework;
    (function (Framework) {
        Framework.Model = Backbone.Model;
        Framework.Collection = Backbone.Collection;
        Framework.View = Backbone.View;
        Framework.Events = Backbone.Events;
    })(Framework = CDP.Framework || (CDP.Framework = {}));
})(CDP || (CDP = {}));
/* tslint:disable:max-line-length */
var CDP;
(function (CDP) {
    var Framework;
    (function (Framework) {
        /**
         * platform 判定オブジェクト
         * [参考] https://w3g.jp/blog/tools/js_browser_sniffing
         */
        Framework.Platform = (function () {
            var ua = navigator.userAgent.toLowerCase();
            var majorVersion = function (browser) {
                var version = ua.match(new RegExp("(" + browser + ")( |/)([0-9]+)"));
                if (!version || version.length < 4) {
                    return 0;
                }
                return parseInt(version[3], 10);
            };
            return {
                ltIE6: typeof window.addEventListener === "undefined" && typeof document.documentElement.style.maxHeight === "undefined",
                ltIE7: typeof window.addEventListener === "undefined" && typeof document.querySelectorAll === "undefined",
                ltIE8: typeof window.addEventListener === "undefined" && typeof document.getElementsByClassName === "undefined",
                ltIE9: document.uniqueID && typeof window.matchMedia === "undefined",
                gtIE10: document.uniqueID && window.matchMedia,
                Trident: document.uniqueID,
                Gecko: "MozAppearance" in document.documentElement.style,
                Presto: CDP.global.opera,
                Blink: CDP.global.chrome,
                Webkit: typeof CDP.global.chrome === "undefined" && "WebkitAppearance" in document.documentElement.style,
                Touch: typeof CDP.global.ontouchstart !== "undefined",
                Mobile: (typeof CDP.global.orientation !== "undefined") || (ua.indexOf("Windows Phone") !== -1),
                ltAd4_4: typeof CDP.global.orientation !== "undefined" && (typeof CDP.global.EventSource === "undefined" || 30 > majorVersion("chrome")),
                Pointer: CDP.global.navigator.pointerEnabled,
                MSPoniter: CDP.global.navigator.msPointerEnabled,
                Android: (ua.indexOf("android") !== -1),
                iOS: (ua.indexOf("iphone") !== -1 || ua.indexOf("ipad") !== -1 || ua.indexOf("ipod") !== -1),
            };
        })();
    })(Framework = CDP.Framework || (CDP.Framework = {}));
})(CDP || (CDP = {}));
/* tslint:disable:typedef no-bitwise */
var CDP;
(function (CDP) {
    var Framework;
    (function (Framework) {
        /**
         * vclick patch
         */
        var _vclickPatch = function () {
            var jquery_on = $.fn.on, jquery_off = $.fn.off;
            var custom_on = function (types, selector, data, fn, /*INTERNAL*/ one) {
                if (typeof types === "string") {
                    types = types.replace(/vclick/g, "click");
                }
                return _.bind(jquery_on, this)(types, selector, data, fn, one);
            };
            var custom_off = function (types, selector, fn) {
                if (typeof types === "string") {
                    types = types.replace(/vclick/g, "click");
                }
                return _.bind(jquery_off, this)(types, selector, fn);
            };
            // replace functions.
            $.fn.on = custom_on;
            $.fn.off = custom_off;
        };
        /**
         * $.mobile.widget.popup patch for "_createPrerequisites"
         *
         * patch code from jqm 1.5
         * https://github.com/jquery/jquery-mobile/commit/d34c86ae14d4ea603357be5e326de1fb8c31dbf9
         */
        var _apply_jqm_popup_createPrerequisites = function () {
            var _safeCreatePrerequisites = function (screenPrerequisite, containerPrerequisite, whenDone) {
                var prerequisites;
                var self = this;
                prerequisites = {
                    screen: $.Deferred(),
                    container: $.Deferred()
                };
                prerequisites.screen.done(function () {
                    if (prerequisites === self._prerequisites) {
                        screenPrerequisite();
                    }
                });
                prerequisites.container.done(function () {
                    if (prerequisites === self._prerequisites) {
                        containerPrerequisite();
                    }
                });
                $.when(prerequisites.screen, prerequisites.container).done(function () {
                    if (prerequisites === self._prerequisites) {
                        self._prerequisites = null;
                        whenDone();
                    }
                });
                self._prerequisites = prerequisites;
            };
            var $mobile = $.mobile;
            if ($mobile.widgets && $mobile.widgets.popup) {
                $mobile.widgets.popup.prototype._createPrerequisites = _safeCreatePrerequisites;
            }
        };
        /**
         * $.mobile.widget.popup patch for "_handleWindowResize"
         *
         * patch code from stack overflow
         * https://stackoverflow.com/questions/27090445/jqmobile-re-positions-popup-window-every-time-when-android-opens-own-virtual-key
         */
        var _apply_jqm_popup_handleWindowResize = function () {
            var _safeHandleWindowResize = function () {
                if (this._isOpen && this._ignoreResizeTo === 0) {
                    if ((this._expectResizeEvent() || this._orientationchangeInProgress) &&
                        !this._ui.container.hasClass("ui-popup-hidden")) {
                        // effectively rapid-close the popup while leaving the screen intact
                        //judge user is in input mode or not.
                        if (!($(":focus").is("input") || $(":focus").is("textarea"))) {
                            this._ui.container
                                .addClass("ui-popup-hidden ui-popup-truncate")
                                .removeAttr("style");
                        }
                    }
                }
            };
            var $mobile = $.mobile;
            if ($mobile.widgets && $mobile.widgets.popup) {
                $mobile.widgets.popup.prototype._handleWindowResize = _safeHandleWindowResize;
            }
        };
        /**
         * $.mobile.widget.popup patch
         */
        var _mobilePopupPatch = function () {
            var jqueryMajor = ~~$.fn.jquery.split(".")[0];
            var jqmVersion = $.mobile.version.split(".");
            var jqmMajor = ~~jqmVersion[0];
            var jqmMiner = ~~jqmVersion[1];
            if (3 <= jqueryMajor && jqmMajor < 2 && jqmMiner < 5) {
                _apply_jqm_popup_createPrerequisites();
                _apply_jqm_popup_handleWindowResize();
            }
        };
        //___________________________________________________________________________________________________________________//
        /**
         * @class Patch
         * @brief patch class for jqm framework.
         *       [review] vclick のパッチを当てることがわかるとよい
         */
        var Patch = (function () {
            function Patch() {
            }
            ///////////////////////////////////////////////////////////////////////
            // public static methods
            /**
             * \~english
             * Apply patch before initialize.
             *
             * \~japanese
             * 初期化前のパッチの適用
             */
            Patch.applyBeforeInit = function () {
                if (!Patch.isSupportedVclick()) {
                    _vclickPatch();
                    Patch.s_vclickEvent = "click";
                }
            };
            /**
             * \~english
             * Apply patch after initialize.
             *
             * \~japanese
             * 初期化後のパッチの適用
             */
            Patch.applyAfterInit = function () {
                _mobilePopupPatch();
            };
            /**
             * \~english
             * if "vclick" event is unsupported, returns false. ex: Android 4.4 (Kitkat)
             *
             * \~japanese
             * "vclick" event が非サポートである platform (KitKat) は false を返す。
             * jQM の version up により、解決される場合は無効かする。
             */
            Patch.isSupportedVclick = function () {
                // for Android 4.4+ (Kitkat ～)
                if (Framework.Platform.Android && !Framework.Platform.ltAd4_4) {
                    return false;
                }
                return true;
            };
            Patch.s_vclickEvent = "vclick";
            return Patch;
        }());
        Framework.Patch = Patch;
    })(Framework = CDP.Framework || (CDP.Framework = {}));
})(CDP || (CDP = {}));
var CDP;
(function (CDP) {
    var Framework;
    (function (Framework) {
        /**
         * @enum Orientation
         */
        var Orientation;
        (function (Orientation) {
            Orientation[Orientation["PORTRAIT"] = 0] = "PORTRAIT";
            Orientation[Orientation["LANDSCAPE"] = 1] = "LANDSCAPE";
        })(Orientation = Framework.Orientation || (Framework.Orientation = {}));
        /**
         * \~english
         * Get Orientation enum code
         *
         * @return {Number} Orientation Code.
         *
         * \~japanese
         * Orientation の取得
         *
         * @return {Number} Orientation Code.
         */
        function getOrientation() {
            var $window = $(window);
            return ($window.width() < $window.height()) ? Orientation.PORTRAIT : Orientation.LANDSCAPE;
        }
        Framework.getOrientation = getOrientation;
    })(Framework = CDP.Framework || (CDP.Framework = {}));
})(CDP || (CDP = {}));

/* tslint:disable:max-line-length forin no-bitwise */
var CDP;
(function (CDP) {
    var Promise = CDP.Promise;
    /**
     * \~english
     * The function returned Promise waits until PhoneGap is ready.
     * [Note] emulate when PC enviroment.
     *
     * \~japanese
     * PhoneGap が有効になるまで待機
     * PC 環境ではエミュレートされる。
     */
    function waitForDeviceReady() {
        return new Promise(function (resolve) {
            if (!CDP.Framework.Platform.Mobile) {
                setTimeout(function () {
                    resolve();
                }, 100);
            }
            else {
                if (null == CDP.global.cordova || null == CDP.global.cordova.exec) {
                    $(document).one("deviceready", function () {
                        resolve();
                    });
                }
                else {
                    resolve();
                }
            }
        });
    }
    CDP.waitForDeviceReady = waitForDeviceReady;
    var _defaultBackButtonHandler = null;
    /**
     * \~english
     * Setup H/W Back key handler.
     *
     * @param  {Function} handler function.
     * @return {Function} old handler function.
     *
     * \~japanese
     *
     * @param  {Function} handler 指定.
     * @return {Function} 以前の handler.
     */
    function setBackButtonHandler(handler) {
        var oldHandler = _defaultBackButtonHandler;
        _defaultBackButtonHandler = handler;
        return oldHandler;
    }
    CDP.setBackButtonHandler = setBackButtonHandler;
    // back key handler implement.
    (function () {
        waitForDeviceReady()
            .then(function () {
            $(document).on("backbutton", function (event) {
                if (_defaultBackButtonHandler) {
                    _defaultBackButtonHandler(event);
                }
            });
        });
    })();
    //___________________________________________________________________________________________________________________//
    var Framework;
    (function (Framework) {
        var TAG = "[CDP.Framework] ";
        var _dfInitialize = $.Deferred();
        /**
         * \~english
         * Initialization function of Framework.
         *
         * \~japanese
         * Framework の初期化関数
         *
         * @param options {FrameworkOptions} [in] options object.
         */
        function initialize(options) {
            if ("pending" !== _dfInitialize.state()) {
                return _dfInitialize.promise();
            }
            // CDP 環境の初期化
            // 現状は、console オブジェクトの保証と jQuery の WinRT 対応。
            CDP.initialize({
                success: function () {
                    var config = getConfig(options);
                    // Framework 用の Patch 適用 (Framework 初期化前)
                    if (config.applyPatch) {
                        Framework.Patch.applyBeforeInit();
                    }
                    // config の反映: jquery
                    config.applyJQueryConfig();
                    // jQuery Mobile の初期化
                    $(document).on("mobileinit", function () {
                        // config の反映: jquery mobile
                        config.applyJQueryMobileConfig();
                        // cdp.i18n の初期化
                        CDP.initializeI18N(config.i18n)
                            .always(function (info) {
                            // i18next の初期化時のエラーは無視する. info が array の場合、エラー情報が格納されている.
                            $(document)
                                .one("pagebeforechange", function (event, data) {
                                data.options.showLoadMsg = false;
                            })
                                .on("pagebeforecreate", function (event) {
                                // i18nextライブラリによるhtml fragmentの翻訳処理
                                $(event.target).localize();
                            });
                            // Router の初期化
                            if (Framework.Router.initialize({
                                anchorVclick: config.anchorVclick,
                                firstPageTransition: config.firstPageTransition,
                            })) {
                                // Framework 用の Patch 適用 (Framework 初期化後)
                                if (config.applyPatch) {
                                    Framework.Patch.applyAfterInit();
                                }
                                _dfInitialize.resolve();
                            }
                            else {
                                console.error(TAG + "error. CDP.Framework.Router.initialize() failed.");
                                _dfInitialize.reject();
                                _dfInitialize = $.Deferred();
                            }
                        });
                    });
                    {
                        // jquery 3+
                        var jqueryMajor = ~~$.fn.jquery.split(".")[0];
                        if (3 <= jqueryMajor) {
                            if (4 <= jqueryMajor) {
                                console.warn(TAG + "jquery-migrate for 3.0.0+ in use.");
                            }
                            new Promise(function(resolve) { resolve(); }).then(function() { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(4)]; (function () {
                                new Promise(function(resolve) { resolve(); }).then(function() {[__webpack_require__(0)];}).catch(__webpack_require__.oe);
                            }.apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__));}).catch(__webpack_require__.oe);
                        }
                        else {
                            new Promise(function(resolve) { resolve(); }).then(function() {[__webpack_require__(0)];}).catch(__webpack_require__.oe);
                        }
                    }
                },
                fail: function (error) {
                    console.error(TAG + "error. CDP.initialize() failed.");
                    _dfInitialize.reject();
                    _dfInitialize = $.Deferred();
                },
            });
            return _dfInitialize.promise();
        }
        Framework.initialize = initialize;
        /**
         * \~english
         * Check for initialization status.
         *
         * @return {Boolean} true: initialized / false: uninitialized
         *
         * \~japanese
         * 初期化済みか判定
         *
         * @return {Boolean} true: 初期化済み / false: 未初期化
         */
        function isInitialized() {
            return "resolved" === _dfInitialize.state();
        }
        Framework.isInitialized = isInitialized;
        /**
         * \~english
         * Wait for initialization status.
         *
         * @return {IPromiseBase<void>}
         *
         * \~japanese
         * 初期化待ち
         *
         * @return {IPromiseBase<void>}
         */
        function waitForInitialize() {
            return _dfInitialize.promise();
        }
        Framework.waitForInitialize = waitForInitialize;
        var _orientationListenerHolder = {};
        /**
         * \~english
         * Register IOrientationChangedListener to framework.
         *
         * @param key      {String}                      [in] ID key
         * @param listener {IOrientationChangedListener} [in] IOrientationChangedListener instance
         *
         * \~japanese
         * IOrientationChangedListener を Framework に登録
         *
         * @param key      {String}                      [in] ID key
         * @param listener {IOrientationChangedListener} [in] IOrientationChangedListener instance
         */
        function registerOrientationChangedListener(key, listener) {
            _orientationListenerHolder[key] = listener;
        }
        Framework.registerOrientationChangedListener = registerOrientationChangedListener;
        /**
         * \~english
         * Unregister IOrientationChangedListener from framework.
         *
         * @param key {String} [in] ID key
         *
         * \~japanese
         * IOrientationChangedListener を Framework から登録解除
         *
         * @param key {String} [in] ID key
         */
        function unregisterOrientationChangedListener(key) {
            delete _orientationListenerHolder[key];
        }
        Framework.unregisterOrientationChangedListener = unregisterOrientationChangedListener;
        var _activePage = null;
        /**
         * \~english
         * Setup event handlers when after router initialized.
         *
         * @private
         *
         * \~japanese
         * イベントハンドラの設定. Router 初期化後に Framework がコールする.
         *
         * @private
         */
        function setupEventHandlers() {
            (function () {
                var oldBackButtonHandler = CDP.setBackButtonHandler(null);
                var baseBackButtonHandler = function (event) {
                    if (_activePage && _activePage.onHardwareBackButton(event)) {
                        // クライアント側でハンドリング済みと指定された場合、既定の処理を行わない
                        return;
                    }
                    else {
                        oldBackButtonHandler(event);
                    }
                };
                CDP.setBackButtonHandler(baseBackButtonHandler);
            })();
            (function () {
                var oldRouteChangeHandler = CDP.Framework.setBeforeRouteChangeHandler(null);
                var baseRouteChangeHandler = function () {
                    if (_activePage) {
                        return _activePage.onBeforeRouteChange();
                    }
                    else {
                        return oldRouteChangeHandler();
                    }
                };
                CDP.Framework.setBeforeRouteChangeHandler(baseRouteChangeHandler);
            })();
        }
        Framework.setupEventHandlers = setupEventHandlers;
        var _lastOrientation = null;
        /**
         * \~english
         * Setup active IPage instance.
         *
         * @private
         * @param page {IPage} [in] IPage instance.
         *
         * \~japanese
         * active Page の設定. Framework がコールする.
         *
         * @private
         * @param page {IPage} [in] IPage instance.
         */
        function setActivePage(page) {
            _activePage = page;
            if (_activePage) {
                _lastOrientation = Framework.getOrientation();
            }
        }
        Framework.setActivePage = setActivePage;
        /**
         * \~english
         * Reterns framework default click event string.
         *
         * @private
         *
         * \~japanese
         * Framework が既定に使用するクリックイベント文字列を取得
         *
         * @private
         * @return {String} "vclick" / "click"
         */
        function getDefaultClickEvent() {
            return Framework.Patch.s_vclickEvent;
        }
        Framework.getDefaultClickEvent = getDefaultClickEvent;
        var _pageConstructors = [];
        var _pageInstances = [];
        /**
         * Page の登録
         * constructor を指定する. 引数がある場合は、bind を行うこと
         *
         * @param {constructor} ctor [in] コンストラクタを指定
         */
        function registerPage(ctor) {
            _pageConstructors.push(ctor);
        }
        Framework.registerPage = registerPage;
        /**
         * 予約されたコンストラクタからPage インスタンスを生成
         */
        function constructPages() {
            _pageConstructors.forEach(function (ctor) {
                _pageInstances.push(new ctor());
            });
            _pageConstructors = [];
        }
        Framework.constructPages = constructPages;
        /**
         * Page インスタンスの参照を破棄
         */
        function disposePages() {
            _pageInstances = [];
        }
        Framework.disposePages = disposePages;
        /**
         * \~english
         * Get Config object.
         *
         * @private
         * @return {FrameworkOptions} Config object.
         *
         * \~japanese
         * Config object の取得
         *
         * @private
         * @return {FrameworkOptions} Config object.
         */
        function getConfig(options) {
            var defConfig = {
                // for fail safe, default settings.
                jquery: {
                    ajaxSetup: { cache: false },
                    migrateMute: true,
                },
                jquerymobile: {
                    allowCrossDomainPages: true,
                    defaultPageTransition: "platform-default",
                    defaultDialogTransition: "platform-default",
                    hashListeningEnabled: false,
                    pushStateEnabled: false,
                    // @see jquery.mobile.js LINE 6394
                    transitionHandler: {
                        defaultHandler: "simultaneous",
                        sequential: ["fade", "flip", "flow"],
                        simultaneous: [],
                    },
                },
                i18n: {
                    fallbackResources: {},
                    options: {},
                },
                applyPatch: true,
                anchorVclick: true,
                firstPageTransition: false,
                applyJQueryConfig: function () {
                    var _this = this;
                    Object.keys(this.jquery).forEach(function (key) {
                        if ("ajaxSetup" === key) {
                            $.ajaxSetup(_this.jquery.ajaxSetup);
                        }
                        else {
                            $[key] = _this.jquery[key];
                        }
                    });
                },
                applyJQueryMobileConfig: function () {
                    var _this = this;
                    $.mobile.loader.prototype.options.text = undefined;
                    Object.keys(this.jquerymobile).forEach(function (key) {
                        if ("transitionHandler" === key) {
                            var $mobile_1 = $.mobile;
                            // default handler
                            $mobile_1.defaultTransitionHandler
                                = $mobile_1.transitionHandlers[_this.jquerymobile.transitionHandler.defaultHandler];
                            // simultaneous handler
                            _this.jquerymobile.transitionHandler.simultaneous.forEach(function (transition) {
                                $mobile_1.transitionHandlers[transition] = $mobile_1.transitionHandlers.simultaneous;
                            });
                            // sequential handler
                            _this.jquerymobile.transitionHandler.sequential.forEach(function (transition) {
                                $mobile_1.transitionHandlers[transition] = $mobile_1.transitionHandlers.sequential;
                            });
                        }
                        else {
                            $.mobile[key] = _this.jquerymobile[key];
                        }
                    });
                },
            };
            return $.extend(true, {}, defConfig, CDP.Config, options);
        }
        ///////////////////////////////////////////////////////////////////////
        // closure methods
        // resize handler
        $(window).on("resize", function (event) {
            var newOrientation = Framework.getOrientation();
            if (_lastOrientation !== newOrientation) {
                for (var key in _orientationListenerHolder) {
                    _orientationListenerHolder[key].onOrientationChanged(newOrientation);
                }
                if (_activePage) {
                    _activePage.onOrientationChanged(newOrientation);
                }
                _lastOrientation = newOrientation;
            }
        });
    })(Framework = CDP.Framework || (CDP.Framework = {}));
})(CDP || (CDP = {}));

/* tslint:disable:max-line-length no-string-literal */
var CDP;
(function (CDP) {
    var Framework;
    (function (Framework) {
        var Promise = CDP.Promise;
        var TAG = "[CDP.Framework.Router] ";
        ///////////////////////////////////////////////////////////////////////
        // closure methods
        /**
         * \~english
         * Convert path to URL.
         * If the path starts from "/", the function translate the path as child folder of "web root".
         * Otherwise, it interprets as relative path from current page.
         * [Note] This behavior go along with jQM, NOT with require.toUrl().
         *
         * @param path {String} [in] path string
         *
         * \~japanese
         * path を URL に変換
         * "/" から始まるものは web root から、それ以外は現在のページから絶対パスURLに変換する。
         * jQM の挙動にあわせており、require.toUrl() と異なるので注意。
         *
         * @param path {String} [in] パスを指定。
         */
        function toUrl(path) {
            if (null != path[0] && "/" === path[0]) {
                return CDP.webRoot + path.slice(1);
            }
            else {
                return $.mobile.path.makeUrlAbsolute(path, getCurrentDocumentUrl());
            }
        }
        Framework.toUrl = toUrl;
        /**
         * \~english
         * Get current document url.
         *
         * @private
         *
         * \~japanese
         * 現在表示しているドキュメントの URL を取得
         *
         * @private
         */
        function getCurrentDocumentUrl() {
            var $activePage = $("body").pagecontainer("getActivePage");
            if (null == $activePage) {
                return $.mobile.path.documentBase.hrefNoHash;
            }
            var base = $.mobile.path.documentBase.hrefNoHash;
            var url = $.mobile.activePage.closest(".ui-page").jqmData("url");
            if (!url || !$.mobile.path.isPath(url)) {
                url = base;
            }
            return $.mobile.path.makeUrlAbsolute(url, base);
        }
        /**
         * \~english
         * Default "before route change" handler.
         *
         * @private
         *
         * \~japanese
         * 既定の "before route change" ハンドラ
         *
         * @private
         */
        var _beforeRouteChange = function () {
            return Promise.resolve();
        };
        // default "before route change" hanndler
        var _defaultBeforeRouteChange = _beforeRouteChange;
        /**
         * \~english
         * Setup "before route change" handler.
         *
         * @param  {Function} handler function.
         * @return {Function} old handler function.
         *
         * \~japanese
         * "before route change" ハンドラ設定
         *
         * @param  {Function} handler 指定.
         * @return {Function} 以前の handler.
         */
        function setBeforeRouteChangeHandler(handler) {
            if (null == handler) {
                return _beforeRouteChange;
            }
            else {
                var oldHandler = _beforeRouteChange;
                _beforeRouteChange = handler;
                return oldHandler;
            }
        }
        Framework.setBeforeRouteChangeHandler = setBeforeRouteChangeHandler;
        //___________________________________________________________________________________________________________________//
        /**
         * \~english
         * @class Router
         * @brief Router class for adjusting jQueryMobile functions and Backbone.Router functions.
         *        Even if Backbone.Router does not start routing, natigate() method works good with jQM framework.
         *
         * \~japanese
         * @class Router
         * @brief jQueryMobile と Backbone.Router を調停する Router クラス
         *        ルーティングを開始していない場合にも、navigate() は jQM フレームワークを使用して機能する。
         */
        var Router = (function () {
            function Router() {
            }
            ///////////////////////////////////////////////////////////////////////
            // public static methods
            /**
             * \~english
             * for initialize Router. this function is called in framework.
             *
             * @return {Boolean} true: succeeded / false: failed.
             *
             * \~japanese
             * 初期化
             * この関数はフレームワーク内部で使用される。
             *
             * @param  options {Object} [in] オプション
             * @return {Boolean} 成否
             */
            Router.initialize = function (options) {
                var $body = $("body");
                if (!!Router.s_router) {
                    console.warn(TAG + "logic error. initialize call twice.");
                    return false;
                }
                Router.s_initOptions = $.extend({}, Router.s_defaultInitOptions, options);
                if (Router.s_initOptions.firstPageTransition) {
                    Router.s_firstChangePage = false;
                }
                // Backbone.Router が、route を解決できなかった場合にも通知を捕捉するためのコールバックを設定
                Router.s_loadUrl = _.bind(Backbone.history.loadUrl, Backbone.history);
                Backbone.history.loadUrl = Router.customLoadUrl;
                Router.s_router = new Backbone.Router();
                Router.s_router.on("route", Router.onRouteSucceeded);
                // Backbone.Router を使用している場合、$.mobile.back() の挙動をブラウザの[戻る]に統一
                if (!$.mobile.hashListeningEnabled) {
                    Router.s_back = _.bind($.mobile.back, $.mobile);
                    $.mobile.back = Router.customJqmBack;
                }
                // changePage をサポート
                if (null == $.mobile.changePage) {
                    $.mobile.changePage = function (to, opt) {
                        $body.pagecontainer("change", to, opt);
                    };
                }
                Router.bindEvents();
                // Framework のイベントハンドラを更新
                Framework.setupEventHandlers();
                return true;
            };
            /**
             * \~english
             * Register to Router.
             *
             * @param route    {String}   [in] route string, it can be regular expression.
             * @param page     {String}   [in] page template path.
             * @param top      {Boolean}  [in] set "true" if application's top view. (optional)
             * @param callback {Function} [in] callback for custom page transition. If you don't want to trigger jQM.changePage(), return true by this callback. (optional)
             * @return {Router} Router instance.
             *
             * \~japanese
             * 登録
             *
             * @param route    {String}   [in] ルーティング文字列 / 正規表現
             * @param page     {String}   [in] page template path. イベント名にも使用される
             * @param top      {Boolean}  [in] Top ページの場合は true を指定 (任意)
             * @param callback {Function} [in] 遷移を自身で管理する場合に指定し、戻り値を true に設定すると changePage をコールしない (任意)
             * @return {Router} インスタンス。ただし method chain をしたい場合は、any cast が必要。
             */
            Router.register = function (route, page, top, callback) {
                if (top === void 0) { top = false; }
                // Backbone.Router への登録は history の停止が必要
                var restart = Router.stop();
                var name = route + page;
                var context = {
                    route: route,
                    regexp: Router.s_router._routeToRegExp(route),
                    page: page,
                    top: top,
                    callback: callback || function () { return false; }
                };
                if (Router.pushContext(name, context)) {
                    Router.s_router.route(route, name, function () { });
                }
                if (restart) {
                    // 再開時は再読み込みしない。
                    Router.start({ silent: true, pageConstruct: false });
                }
                return Router;
            };
            /**
             * \~english
             * Start listening hash change.
             * It should be called after register().
             *
             * @param options {Object} [in] options object for Backbone.History.
             *
             * \~japanese
             * 履歴監視の開始
             * 登録完了後に呼び出す。
             *
             * @param options {Object} [in] Backbone.History にわたるオプション
             */
            Router.start = function (options) {
                var opt = $.extend({ pageConstruct: true }, options);
                if (opt.pageConstruct) {
                    Framework.constructPages();
                }
                if ($.mobile.hashListeningEnabled) {
                    console.error(TAG + "setting error. confict: $.mobile.hashListeningEnabled = true, cannot start.");
                    return;
                }
                Backbone.history.start(opt);
            };
            /**
             * \~english
             * Stop listening hash change.
             *
             * @return {Boolean} previous status.
             *
             * \~japanese
             * 履歴監視の終了
             *
             * @return {Boolean} 以前の開始状態を返却
             */
            Router.stop = function () {
                var prevState = Backbone.History.started;
                Backbone.history.stop();
                return prevState;
            };
            /**
             * \~english
             * Check routing status.
             *
             * @return {Boolean} true: routing / false: not routing
             *
             * \~japanese
             * ルーティングを開始しているか判定
             *
             * @return {Boolean} true: 有効 / false: 無効
             */
            Router.isRouting = function () {
                return Backbone.History.started;
            };
            /**
             * \~english
             * URL navigation.
             *
             * @param url        {String}          [in] set a navigate URL. (relative path / absolute path / fragment)
             * @param transition {String}          [in] set a transition string (optional)
             * @param reverse    {Boolean}         [in] set a direction string for transition. true:reverse / false:nomal (optional)
             * @param options    {NavigateOptions} [in] set a options object for Backbone.Router.navigate(). (optional)
             *
             * \~japanese
             * URL遷移
             *
             * @param url        {String}          [in] 遷移 URL を指定 (相対パス/絶対パス/フラグメント)
             * @param transition {String}          [in] transition に使用する effect を指定 (任意)
             * @param reverse    {Boolean}         [in] transition に使用する direction を指定 true:reverse/false:通常 (任意)
             * @param options    {NavigateOptions} [in] Backbone.Router.navigate() に渡されるオプション (任意)
             */
            Router.navigate = function (url, transition, reverse, options) {
                if (!!Router.s_lastNavigateInfo.inNavigation) {
                    // すでに Navigation 中であれば抑止
                    console.warn(TAG + "Router.navigate() called in navigation proc.");
                    return;
                }
                else if (Router.initFirstPageIfNeeded(url)) {
                    return;
                }
                var navOptions = $.extend({}, Router.s_defaultNavigateOptions, options);
                // ページ遷移開始通知. Sub Flow にてすでにコールされている場合は既定の何もしないコールバックを使用する.
                var notifyBeforeRouteChange = Router.s_lastNavigateInfo.calledBeforeRouteChange ? _defaultBeforeRouteChange : _beforeRouteChange;
                Router.s_lastNavigateInfo = {
                    url: url,
                    transition: transition,
                    reverse: reverse,
                    backDestination: navOptions.backDestination,
                    noHashChange: navOptions.noHashChange,
                    intent: navOptions.intent || {},
                    positiveNavigate: true,
                    calledBeforeRouteChange: true,
                    inNavigation: true,
                };
                // ページ遷移開始通知
                notifyBeforeRouteChange()
                    .fail(function () {
                    // beforeRouteChange() が失敗した場合、致命的な不具合となるため、error 記録のみにして先に進む。
                    console.error(TAG + "before route change call, failed.");
                })
                    .always(function () {
                    if (Router.isRouting() && !Router.s_lastNavigateInfo.noHashChange) {
                        if (navOptions.subFlow) {
                            switch (navOptions.subFlow.operation) {
                                case "begin":
                                    Router.startSubFlow(navOptions.subFlow);
                                    break;
                                case "end":
                                    Router.finishSubFlow(navOptions);
                                    return; // navigation は呼ばない
                                default:
                                    console.warn(TAG + "unknown subFlow.operation. operation: " + navOptions.subFlow.operation);
                                    break;
                            }
                        }
                        var result = Backbone.history.navigate(url, navOptions);
                        // Backbone.history.loadUrl() がコールされなかった場合, navigation 終了
                        if (!result || "string" === typeof result) {
                            Router.s_lastNavigateInfo.inNavigation = false;
                        }
                    }
                    else {
                        if (navOptions.subFlow) {
                            console.warn(TAG + "subFlow only supported under routing and hash change condition.");
                        }
                        var fragment_1 = Backbone.history.getFragment(url);
                        var context = void 0;
                        if (Router.s_lastNavigateInfo.noHashChange) {
                            // noHashChange が指定されたとき
                            context = _.find(Router.s_rootContexts, function (ctx) {
                                return ctx.regexp.test(fragment_1);
                            });
                        }
                        else {
                            // Backbone.Router が有効でないとき
                            context = _.findWhere(Router.s_rootContexts, { route: fragment_1 });
                        }
                        if (context) {
                            url = context.page;
                        }
                        Router.changePage(url);
                    }
                });
            };
            /**
             * \~english
             * Navigate from Top Page.
             * If SubFlow set up, the param is cleared.
             *
             * @param to         {String|PageStack|PageStack[]} [in] set a navigate URL or PageStackOptions object or array.
             * @param transition {String}                       [in] set a transition string (optional)
             * @param reverse    {Boolean}                      [in] set a direction string for transition. true:reverse / false:nomal (optional)
             * @param options    {NavigateOptions}              [in] set a options object for Backbone.Router.navigate(). (optional)
             *
             * \~japanese
             * トップページからの画面遷移
             * SubFlow が指定されていた場合はクリアされる
             *
             * @param to         {String|PageStack|PageStack[]} [in] 遷移 URL / PageStackOptions オブジェクト/配列
             * @param transition {String}                       [in] transition に使用する effect を指定 (任意)
             * @param reverse    {Boolean}                      [in] transition に使用する direction を指定 true:reverse/false:通常 (任意)
             * @param options    {NavigateOptions}              [in] Backbone.Router.navigate() に渡されるオプション (任意)
             */
            Router.navigateFromTop = function (to, transition, reverse, options) {
                var stack = Router.getJqmHistory().stack;
                var currentPage = stack[Router.getJqmHistory().activeIndex];
                var _transition = transition || currentPage.transition;
                var _reverse = (null != reverse) ? reverse : true;
                var destStacks = (function () {
                    if (!to) {
                        return null;
                    }
                    else if ("string" === typeof to) {
                        return [{ route: to }];
                    }
                    else if (to instanceof Array) {
                        return to;
                    }
                    else {
                        return [to];
                    }
                })();
                // 指定された SubFlow を削除
                stack.forEach(function (value) {
                    delete value[Router.SUBFLOW_PARAM];
                });
                // 初期ページに SubFlow パラメータを指定
                stack[0][Router.SUBFLOW_PARAM] = {
                    operation: "begin",
                    destBase: stack[0].hash,
                    destStacks: destStacks,
                    additionalDistance: 0,
                };
                Router.navigate(null, _transition, _reverse, $.extend({}, options, {
                    subFlow: {
                        operation: "end",
                    }
                }));
            };
            /**
             * \~english
             * Back to previous history.
             * It's same as browser back button's behaviour.
             * [Note] If set the jQM: data-rel="back", work as well.
             *
             * \~japanese
             * 履歴を戻る
             * ブラウザの戻るボタンと同じ挙動。
             * jQM: data-rel="back" を指定しても同じであることに注意。
             */
            Router.back = function () {
                if (!!Router.s_lastNavigateInfo.inNavigation) {
                    // すでに Navigation 中であれば抑止
                    console.warn(TAG + "Router.back() called in navigation proc.");
                    return;
                }
                else if (Router.isTopPage()) {
                    // Top ページに指定されていれば終了
                    var app = navigator.app || {};
                    if (!!app.exitApp) {
                        app.exitApp(); // note: never exit on iOS
                        return;
                    }
                }
                Router.s_lastNavigateInfo = {
                    inNavigation: true,
                    calledBeforeRouteChange: true,
                };
                // ページ遷移開始通知
                _beforeRouteChange()
                    .then(function () {
                    $.mobile.back();
                })
                    .fail(function () {
                    console.error("before route change call, failed.");
                    Router.s_lastNavigateInfo = {};
                });
            };
            /**
             * \~english
             * Store Intent object.
             *
             * \~japanese
             * Intent を格納
             */
            Router.pushIntent = function (intent) {
                Router.s_lastIntent = $.extend(true, Router.s_lastIntent, intent);
            };
            /**
             * \~english
             * Get Intent object.
             *
             * \~japanese
             * Intent を取得
             */
            Router.popIntent = function () {
                var intent = Router.s_lastIntent;
                Router.s_lastIntent = {};
                return intent;
            };
            /**
             * \~english
             * Get query parameters.
             *
             * \~japanese
             * query parameter に指定された引数の取得
             * ページ遷移中にのみアクセス可能 (pagebeforecreate ～ pagechange)
             */
            Router.getQueryParameters = function () {
                if (Router.s_lastNavigateInfo.intent && Router.s_lastNavigateInfo.intent.params) {
                    return Router.s_lastNavigateInfo.intent.params["queryParams"];
                }
                else {
                    return null;
                }
            };
            /**
             * \~english
             * Begin sub flow transaction.
             *
             * @param url        {String}          [in] set a navigate URL. (relative path / absolute path / fragment)
             * @param options    {NavigateOptions} [in] set a options object for Backbone.Router.navigate(). (optional)
             * @param transition {String}          [in] set a transition string (optional)
             * @param reverse    {Boolean}         [in] set a direction string for transition. true:reverse / false:nomal (optional)
             *
             * \~japanese
             * sub flow トランザクションの開始.
             * navigate() の 糖衣構文
             *
             * @param url        {String}          [in] 遷移 URL を指定 (相対パス/絶対パス/フラグメント)
             * @param options    {NavigateOptions} [in] Backbone.Router.navigate() に渡されるオプション (任意)
             * @param transition {String}          [in] transition に使用する effect を指定 (任意)
             * @param reverse    {Boolean}         [in] transition に使用する direction を指定 true:reverse/false:通常 (任意)
             */
            Router.beginSubFlow = function (url, options, transition, reverse) {
                var opt = $.extend({}, options);
                opt.subFlow = opt.subFlow || { operation: "begin" };
                if ("begin" !== opt.subFlow.operation) {
                    console.error(TAG + "logic error. invalid subflow operation. [operation: " + opt.subFlow.operation + "]");
                    return;
                }
                Router.navigate(url, transition, reverse, opt);
            };
            /**
             * \~english
             * Commit sub flow transaction.
             *
             * @param transition {String}  [in] set a transition string (optional)
             * @param reverse    {Boolean} [in] set a direction string for transition. true:reverse / false:nomal (optional)
             *
             * \~japanese
             * sub flow トランザクションの終了.
             * navigate() の 糖衣構文
             *
             * @param transition {String}  [in] transition に使用する effect を指定 (任意)
             * @param reverse    {Boolean} [in] transition に使用する direction を指定 true:reverse/false:通常 (任意)
             */
            Router.commitSubFlow = function (transition, reverse) {
                Router.navigate(null, transition, reverse, {
                    subFlow: {
                        operation: "end",
                    }
                });
            };
            /**
             * \~english
             * Cancel sub flow transaction.
             *
             * @param transition {String}  [in] set a transition string (optional)
             * @param reverse    {Boolean} [in] set a direction string for transition. true:reverse[default] / false:nomal (optional)
             *
             * \~japanese
             * sub flow トランザクションのキャンセル.
             * navigate() の 糖衣構文
             *
             * @param transition {String}  [in] transition に使用する effect を指定 (任意)
             * @param reverse    {Boolean} [in] transition に使用する direction を指定 true:reverse[既定]/false:通常 (任意)
             */
            Router.cancelSubFlow = function (transition, reverse) {
                // 起点のページに戻る
                var baseInfo = Router.detectSubFlowBaseInfo();
                baseInfo.subFlowParam.additionalDistance = 0;
                Router.navigate(null, transition, (null != reverse) ? reverse : true, {
                    subFlow: {
                        operation: "end",
                        destStacks: null,
                    }
                });
            };
            /**
             * \~english
             * Check in sub flow.
             *
             * \~japanese
             * sub flow 内であるか判定
             */
            Router.isInSubFlow = function () {
                var stack = Router.getJqmHistory().stack;
                var has = _.some(stack, function (value) {
                    return !!value[Router.SUBFLOW_PARAM];
                });
                return has;
            };
            /**
             * \~english
             * Check from hash changed navigation.
             *
             * \~japanese
             * Hash 変更によって Navigate が起こったか判定
             * "pagechange" が発生するまでに判定可能
             */
            Router.fromHashChanged = function () {
                // positiveNavigate = false は含めない
                return Router.s_lastNavigateInfo.inNavigation && (null == Router.s_lastNavigateInfo.positiveNavigate);
            };
            Router.registerPageStack = function (pageStack, withNavigate, options) {
                var newStacks = [];
                var failed = false;
                pageStack = (pageStack instanceof Array) ? pageStack : [pageStack];
                withNavigate = (null == withNavigate) ? false : withNavigate;
                (function () {
                    var makeStack = function (info) {
                        var url;
                        var fragment = Backbone.history.getFragment(info.route);
                        var context = _.find(Router.s_rootContexts, function (ctx) {
                            return ctx.regexp.test(fragment);
                        });
                        if (!context) {
                            console.warn(TAG + "route is not registered. route: " + info.route);
                            return null;
                        }
                        else {
                            url = Router.pathToJqmDataUrl(context.page);
                        }
                        var stack = {
                            route: info.route,
                            pageUrl: url,
                            title: info.title,
                            transition: info.transition,
                            url: url,
                        };
                        return stack;
                    };
                    for (var i = 0, n = pageStack.length; i < n; i++) {
                        var stack = makeStack(pageStack[i]);
                        if (!stack) {
                            failed = true;
                            break;
                        }
                        else {
                            newStacks.push(stack);
                        }
                    }
                })();
                if (failed) {
                    return false;
                }
                (function () {
                    // Router の停止
                    var restart = Router.stop();
                    var silentLength = newStacks.length - 1;
                    var finalIndex = newStacks.length - 1;
                    Router.getJqmHistory().clearForward();
                    for (var i = 0, n = silentLength; i < n; i++) {
                        location.hash = newStacks[i].route;
                        Router.getJqmHistory().stack.push(newStacks[i]);
                        Router.getJqmHistory().activeIndex = Router.getJqmHistory().stack.length - 1;
                    }
                    // final stack with navigate
                    if (withNavigate) {
                        var transition = (function () {
                            if (null != Router.s_lastNavigateInfo.transition) {
                                return Router.s_lastNavigateInfo.transition;
                            }
                            else {
                                return newStacks[finalIndex].transition;
                            }
                        })();
                        var reverse = (function () {
                            if (null != Router.s_lastNavigateInfo.reverse) {
                                return Router.s_lastNavigateInfo.reverse;
                            }
                            else {
                                return false;
                            }
                        })();
                        restart = false;
                        Router.start({ silent: true });
                        Router.navigate(newStacks[finalIndex].route, transition, reverse, options);
                    }
                    else {
                        location.hash = newStacks[finalIndex].route;
                        Router.getJqmHistory().stack.push(newStacks[finalIndex]);
                        Router.getJqmHistory().activeIndex = Router.getJqmHistory().stack.length - 1;
                    }
                    // Router の再開
                    if (restart) {
                        Router.start({ silent: true });
                    }
                })();
                return true;
            };
            /**
             * \~english
             * Get jQM's history object
             *
             * \~japanese
             * jQM の History オブジェクトの取得
             *
             */
            Router.getJqmHistory = function () {
                return $.mobile.navigate.history;
            };
            ///////////////////////////////////////////////////////////////////////
            // private static methods
            /**
             * \~english
             * Override: Backbone.History.loadUrl().
             *
             * @private
             *
             * \~japanese
             * Backbone.History.loadUrl() のオーバーライド
             *
             * @private
             */
            Router.customLoadUrl = function (fragment) {
                var handled = Router.s_loadUrl(fragment);
                if (!handled) {
                    Router.onRouteFailed(fragment);
                }
                return true;
            };
            /**
             * \~english
             * Override: $.mobile.back().
             *
             * fail safe processing.
             *  If using Backbone's Router,
             *  this class unuses history object of jQuery Mobile 1.4,
             *  and standardize as browser back button's behaviour. (jQM 1.3 comparable)
             *
             * @private
             *
             * \~japanese
             * $.mobile.back() のオーバーライド
             *
             * [TBD] fail safe 処理
             *  Backbone の Router を使用している場合、
             *  jQuery Mobile 1.4 以降の内部の History 管理は使用せずに
             *  1.3 相当のブラウザの[戻る]の挙動に統一する。
             *
             * @private
             */
            Router.customJqmBack = function () {
                if (Router.isRouting()) {
                    history.back();
                }
                else {
                    // jQM 既定処理
                    Router.s_back();
                }
            };
            /**
             * \~english
             * Bind events.
             *
             * @private
             *
             * \~japanese
             * イベントバインド
             *
             * @private
             */
            Router.bindEvents = function () {
                $(document)
                    .one("pagechange", function () {
                    if (Router.s_initOptions.anchorVclick) {
                        // anchor vclick
                        $(document).on("vclick", "[href]", function (event) {
                            Router.onAnchorVclicked(event);
                        });
                    }
                })
                    .on("pagebeforeshow", function (event) {
                    // "data-back-dst" を page に設定
                    if (null != Router.s_lastNavigateInfo.backDestination) {
                        var active = Router.getJqmHistory().getActive();
                        active[Router.BACK_DESTINATION_URL] = Router.s_lastNavigateInfo.backDestination;
                    }
                })
                    .on("pageshow", function (event) {
                    var active = Router.getJqmHistory().getActive();
                    if (active[Router.SUBFLOW_PARAM]) {
                        delete active[Router.SUBFLOW_PARAM];
                    }
                })
                    .on("pagechange pagecontainerloadfailed", function (event) {
                    Router.s_lastNavigateInfo = {};
                });
                // back key assign
                CDP.setBackButtonHandler(Router.back);
            };
            /**
             * \~english
             * Store the RootContext.
             *
             * @private
             * @param name    {String}       [in] name of route
             * @param context {RouteContext} [in] context object
             * @return true: succeeded / false: already registered
             *
             * \~japanese
             * RootContext の格納
             *
             * @private
             * @param name    {String}       [in] route 名
             * @param context {RouteContext} [in] context オブジェクト
             * @return true: 登録成功 / false: すでに登録されている
             */
            Router.pushContext = function (name, context) {
                if (!!Router.s_rootContexts[name]) {
                    console.error(TAG + "logic error. route is already registered. name: " + name);
                    return false;
                }
                Router.s_rootContexts[name] = context;
                return true;
            };
            /**
             * \~english
             * Check if $.mobile.initializePage() is called or not, and call it if needed.
             *
             * @private
             * @param url {String}  [in] set a navigate URL. (relative path / absolute path / fragment)
             *
             * \~japanese
             * $.mobile.initializePage() が呼ばれているか確認し、必要なら初期化する。
             *
             * @private
             * @param url {String} [in] 遷移 URL を指定 (相対パス/絶対パス/フラグメント)
             */
            Router.initFirstPageIfNeeded = function (url) {
                if (!$.mobile.autoInitializePage) {
                    $(document).one("pagebeforechange", function (event, data) {
                        data.toPage = Framework.toUrl(url);
                    });
                    $.mobile.initializePage();
                    $.mobile.autoInitializePage = true;
                    return true;
                }
                return false;
            };
            /**
             * \~english
             * Check for current page is top.
             *
             * @private
             * @return true: top page / false: not top page
             *
             * \~japanese
             * 現在のページが top に指定されているか判定
             *
             * @private
             * @return true: top 指定 / false: top ではない
             */
            Router.isTopPage = function () {
                var fragment = Backbone.history.getFragment($.mobile.path.parseUrl(location.href).hash);
                var context = _.find(Router.s_rootContexts, function (ctx) {
                    return ctx.regexp.test(fragment);
                });
                return (null == context) ? false : context.top;
            };
            /**
             * \~english
             * Called when anchor received "vclick" event.
             *
             * @private
             * @return true: need default processing / false: need custom processing
             *
             * \~japanese
             * anchor が vclick されたときにコールされる
             *
             * @private
             * @return true: default 処理 / false: カスタム処理
             */
            Router.onAnchorVclicked = function (event) {
                if (Router.isJustBeforeVclicked()) {
                    event.preventDefault();
                    return false;
                }
                return Router.followAnchor(event);
            };
            /**
             * \~english
             * Anchor processing.
             *
             * @private
             *
             * \~japanese
             * anchor 処理
             *
             * @private
             */
            Router.followAnchor = function (event) {
                var $target = $(event.currentTarget);
                var url = $target.jqmData("href") || $target.attr("href");
                var transition = $target.jqmData("transition");
                var direction = $target.jqmData("direction");
                var backDst = $target.attr(Router.DATA_BACK_DESTINATION);
                var noHashChange = $target.attr(Router.DATA_NO_HASH_CHANGE) ?
                    $target.attr(Router.DATA_NO_HASH_CHANGE) === "true" : false;
                var noHrefHandle = $target.attr(Router.DATA_NO_VCLICK_HANDLE) ?
                    $target.attr(Router.DATA_NO_VCLICK_HANDLE) === "true" : false;
                /*
                 * - 明示的にハンドルしない指定がある場合
                 * - jQM のフラグメントの場合
                 * 既定の処理を行う
                 */
                if (noHrefHandle || Router.needDefaultOperation(url)) {
                    return true;
                }
                // custom behavier
                event.preventDefault();
                if (Router.isBackButtonClicked(event)) {
                    Router.back();
                }
                else {
                    Router.navigate(url, transition, !!direction, { noHashChange: noHashChange, backDestination: backDst });
                }
                return false;
            };
            /**
             * \~english
             * Check default processing needed.
             *
             * @private
             * @param  url {String} [in] url string
             * @return true: need default processing / false: need not
             *
             * \~japanese
             * 既定の処理を行わせるか判定
             *
             * @private
             * @param  url {String} [in] url 文字列
             * @return true: 既定の処理が必要 / false: 不要
             */
            Router.needDefaultOperation = function (url) {
                if (!url || ("#" === url)) {
                    return true;
                }
                else if ("#" === url[0]) {
                    return !Router.canResolveRoute(url);
                }
                else {
                    return false;
                }
            };
            /**
             * \~english
             * Check status of Backbone.Router if they can resolve route.
             *
             * @private
             * @param  url {String} [in] url 文字列
             * @return true: can resolve / false: can not
             *
             * \~japanese
             * Backbone.Router が route を解決可能か判定
             *
             * @private
             * @param  url {String} [in] url 文字列
             * @return true: 解決可能 / false: 解決不可
             */
            Router.canResolveRoute = function (url) {
                var fragment = Backbone.history.getFragment(url);
                return _.any(Backbone.history.handlers, function (handler) {
                    if (handler.route.test(fragment)) {
                        return true;
                    }
                });
            };
            /**
             * \~english
             * Check "vclick" fired at the last minute.
             *
             * @private
             *
             * \~japanese
             * 直前に vclick が呼ばれたか判定
             *
             * @private
             */
            Router.isJustBeforeVclicked = function () {
                var isBefore = (Date.now() - Router.s_lastClickedTime) < Router.DELAY_TIME * 2;
                Router.s_lastClickedTime = Date.now();
                return isBefore;
            };
            /**
             * \~english
             * Check back button clicked.
             *
             * @private
             *
             * \~japanese
             * Back Button がクリックされたか判定
             *
             * @private
             */
            Router.isBackButtonClicked = function (event) {
                if ($(event.currentTarget).jqmData("rel") === "back") {
                    return true;
                }
                else {
                    return false;
                }
            };
            /**
             * \~english
             * It called on succeed routing triggered by changing hash.
             *
             * @private
             * @param name {String} [in] name of route
             * @param args {Array}  [in] array of paramter
             *
             * \~japanese
             * ハッシュ値が変更され、ルーティングが成功したときにコールされる
             *
             * @private
             * @param name {String} [in] route 名。page の値が渡る。
             * @param args {Array}  [in] パラメータ配列。
             */
            Router.onRouteSucceeded = function (name) {
                var args = [];
                for (var _i = 1; _i < arguments.length; _i++) {
                    args[_i - 1] = arguments[_i];
                }
                var context = Router.s_rootContexts[name];
                if (!!context) {
                    var intent = { params: { queryParams: args } };
                    Router.s_lastNavigateInfo.inNavigation = true;
                    if (null != Router.s_lastNavigateInfo.intent) {
                        intent.params = $.extend({}, intent.params, Router.s_lastNavigateInfo.intent.params || {});
                    }
                    Router.s_lastNavigateInfo.intent = $.extend({}, Router.s_lastNavigateInfo.intent, intent);
                    var handled = context.callback(args);
                    if (!handled) {
                        Router.changePage(context.page);
                    }
                }
            };
            /**
             * \~english
             * It called on failed routing triggered by changing hash.
             *
             * @private
             * @param name {String} [in] name of route
             * @param args {Array}  [in] array of paramter
             *
             * \~japanese
             * ハッシュ値が変更され、ルーティングが失敗したときにコールされる
             *
             * @private
             * @param name {String} [in] route 名。page の値が渡る。
             * @param args {Array}  [in] パラメータ配列。
             */
            Router.onRouteFailed = function (fragment) {
                Router.s_lastNavigateInfo.inNavigation = true;
                if (null == fragment) {
                    fragment = Backbone.history.getFragment();
                }
                // route が解決できなかったものを管理下に
                if (Router.s_lastNavigateInfo.positiveNavigate) {
                    var context = Router.s_rootContexts[fragment];
                    if (null == context) {
                        context = {
                            route: fragment,
                            regexp: Router.s_router._routeToRegExp(fragment),
                            page: Router.s_lastNavigateInfo.url,
                            top: false,
                            callback: null,
                        };
                        Router.pushContext(fragment, context);
                    }
                }
                // fragment から path を解決
                var path = fragment;
                if (null != Router.s_rootContexts[fragment]) {
                    path = Router.s_rootContexts[fragment].page;
                }
                Router.changePage(path);
            };
            /**
             * \~english
             * This function just calls jQuery Mobile's navigation method.
             *
             * @private
             * @param path {String} [in] to page path
             *
             * \~japanese
             * jQuery Mobile によるページ遷移指定
             *
             * @private
             * @param path {String} [in] 遷移先パスを指定
             */
            Router.changePage = function (path) {
                var notifyBeforeRouteChange;
                // data-rel="back", ブラウザボタン, H/W Back Key が押下されたとき
                if (!Router.s_lastNavigateInfo.positiveNavigate) {
                    if (Router.s_lastNavigateInfo.inAdditionalBack) {
                        Router.s_lastNavigateInfo.inAdditionalBack = false;
                    }
                    else {
                        Router.decideDirection(path);
                        // 指定先に戻るか判定
                        var additional = Router.detectAdditionalBackDistance();
                        if (0 < additional) {
                            // 2回目以降の hash change には反応させない.
                            Router.s_lastNavigateInfo.inAdditionalBack = true;
                            Router.getJqmHistory().activeIndex -= additional;
                            history.go(-additional);
                            return;
                        }
                    }
                    // 遷移先が subflow 開始点である場合、param を削除
                    var subFlowInfo = Router.detectSubFlowBaseInfo();
                    if (subFlowInfo.isCurrent) {
                        delete subFlowInfo.stack[Router.SUBFLOW_PARAM];
                    }
                }
                else {
                    // 能動的遷移の場合 previousIndex を更新
                    Router.getJqmHistory().previousIndex = Router.getJqmHistory().activeIndex;
                }
                // ページ遷移開始通知. すでにコールされている場合は既定の何もしないコールバックを使用する.
                notifyBeforeRouteChange = Router.s_lastNavigateInfo.calledBeforeRouteChange ? _defaultBeforeRouteChange : _beforeRouteChange;
                notifyBeforeRouteChange()
                    .then(function () {
                    // 付加情報
                    if (Router.s_lastNavigateInfo.intent) {
                        Router.pushIntent(Router.s_lastNavigateInfo.intent);
                    }
                    Router.treatUrlHistory();
                    var pageTransition = (function () {
                        if (Router.s_lastNavigateInfo.transition) {
                            return Router.s_lastNavigateInfo.transition;
                        }
                        else if (Router.s_firstChangePage) {
                            Router.s_firstChangePage = false;
                            return "none"; // splash からの遷移
                        }
                        else {
                            return $.mobile.defaultPageTransition;
                        }
                    })();
                    $.mobile.changePage(Framework.toUrl(path), {
                        showLoadMsg: false,
                        allowSamePageTransition: true,
                        transition: pageTransition,
                        reverse: Router.s_lastNavigateInfo.reverse,
                        fromHashChange: !Router.s_lastNavigateInfo.positiveNavigate,
                        changeHash: !Router.s_lastNavigateInfo.noHashChange,
                    });
                })
                    .fail(function () {
                    console.error(TAG + "before route change call, failed.");
                    Router.s_lastNavigateInfo = {};
                });
            };
            /**
             * \~english
             * Decide direction parameter.
             * It's as same as jQM internal implement. (imperfection)
             *
             * @private
             * @param path {String} [in] to page path
             *
             * \~japanese
             * direction の判定
             * jQM の内部実装と等価 (不完全)
             *
             * @private
             * @param path {String} [in] 遷移先パスを指定
             */
            Router.decideDirection = function (path) {
                var url = $.mobile.path.convertUrlToDataUrl(Framework.toUrl(path));
                if (null == Router.s_lastNavigateInfo.transition) {
                    Router.s_lastNavigateInfo.transition = Router.getJqmHistory().getActive().transition;
                }
                Router.getJqmHistory().direct({
                    url: url,
                    present: function (newPage, direction) {
                        switch (direction) {
                            case "back":
                                if (null == Router.s_lastNavigateInfo.reverse) {
                                    Router.s_lastNavigateInfo.reverse = true;
                                }
                                break;
                            case "forward":
                                if (null == Router.s_lastNavigateInfo.transition) {
                                    Router.s_lastNavigateInfo.transition = newPage.transition;
                                }
                                break;
                            default:
                                console.warn(TAG + "unknown direction: " + direction);
                                break;
                        }
                    },
                    missing: function () {
                        // 初期ページ URL は判定できない。正常系。
                        if (1 === Router.getJqmHistory().activeIndex) {
                            Router.getJqmHistory().previousIndex = 1;
                            Router.getJqmHistory().activeIndex = 0;
                            if (null == Router.s_lastNavigateInfo.reverse) {
                                Router.s_lastNavigateInfo.reverse = true;
                            }
                        }
                        else if (0 !== Router.getJqmHistory().activeIndex) {
                            console.warn(TAG + "unknown direction.");
                        }
                    }
                });
            };
            /**
             * \~english
             * Return additional back distance count when back destination set.
             * (const function)
             *
             * @private
             * @return {Number} count of additiona back distance.
             *
             * \~japanese
             * 戻り先が指定されているとき、追加の Back 数を返します。
             * (この関数は Router の状態を変更しません。)
             *
             * @private
             * @return {String} 追加で Back に必要な距離.
             */
            Router.detectAdditionalBackDistance = function () {
                var stack = Router.getJqmHistory().stack;
                var historyActiveIndex = Router.getJqmHistory().activeIndex; // decideDirection() の Router.getJqmHistory().direct() によって、history の activeIndex はすでに変わっている
                var previousIndex = Router.getJqmHistory().previousIndex; // [戻る]が押下された場合に値が入る
                var i, backDst, distance, fragment, context, jqmDataUrl;
                // check "operation". [戻る]および clearForward() されていない状況をチェック
                if (!Router.s_lastNavigateInfo.reverse || null == previousIndex || !stack[previousIndex]) {
                    return 0;
                }
                // "backDst exists". [戻り先]が指定されているかチェック
                backDst = stack[previousIndex][Router.BACK_DESTINATION_URL];
                if ((null == backDst)) {
                    return 0;
                }
                fragment = Backbone.history.getFragment(backDst);
                // 初期ページ
                if ("" === fragment) {
                    return historyActiveIndex;
                }
                // rootContext から path を逆引き
                context = _.find(Router.s_rootContexts, function (ctx) {
                    return ctx.regexp.test(fragment);
                });
                if (null == context) {
                    console.warn(TAG + "back destination is not registered. back-dst: " + backDst);
                    return 0;
                }
                // dataUrl を元に jQM History を検索
                jqmDataUrl = Router.pathToJqmDataUrl(context.page);
                for (i = historyActiveIndex, distance = 0; 0 <= i; i--, distance++) {
                    if (jqmDataUrl === stack[i].pageUrl) {
                        break;
                    }
                }
                if (i < 0) {
                    console.warn(TAG + "back destination does not exist in history. back-dst: " + backDst);
                    return 0;
                }
                return distance;
            };
            /**
             * \~english
             * Start sub flow
             * Attach SubFlowParam to jqm history stack object.
             *
             * @param subFlowParam {SubFlowParam} [in] Sub Flow parameter
             *
             * \~japanese
             * Sub Flow の開始
             * SubFlowParam を jqm history stack にアタッチ
             *
             * @param subFlowParam {SubFlowParam} [in] Sub Flow パラメータ
             */
            Router.startSubFlow = function (subFlowParam) {
                var active = Router.getJqmHistory().getActive();
                var param = subFlowParam;
                if (subFlowParam.destBase) {
                    var distance = 0;
                    var fragment_2 = Backbone.history.getFragment(subFlowParam.destBase);
                    var context = _.find(Router.s_rootContexts, function (ctx) {
                        return ctx.regexp.test(fragment_2);
                    });
                    if (null == context) {
                        console.warn(TAG + "base destination is not registered. destBase: " + subFlowParam.destBase);
                        return;
                    }
                    // dataUrl を元に jQM History を検索
                    var jqmDataUrl = Router.pathToJqmDataUrl(context.page);
                    var stack = Router.getJqmHistory().stack;
                    for (var i = Router.getJqmHistory().activeIndex; 0 <= i; i--, distance++) {
                        if (jqmDataUrl === stack[i].pageUrl) {
                            param.additionalDistance = distance;
                            break;
                        }
                    }
                }
                else {
                    param.destBase = location.hash;
                    param.additionalDistance = 0;
                }
                active[Router.SUBFLOW_PARAM] = param;
            };
            /**
             * \~english
             * End sub flow
             * navigate and delete SubFlowParam from jqm history stack object.
             *
             * @param navOptions {NavigateOptions} [in] Sub Flow parameter
             *
             * \~japanese
             * Sub Flow の終了
             * 遷移と SubFlowParam を jqm history stack から削除
             *
             * @param navOptions {NavigateOptions} [in] Sub Flow パラメータ
             */
            Router.finishSubFlow = function (options) {
                var navOptions = $.extend(true, {}, options);
                var baseInfo = Router.detectSubFlowBaseInfo();
                // "end" 時に更新されたものを上書き
                var param = $.extend({}, baseInfo.subFlowParam, navOptions.subFlow);
                var distance = baseInfo.distance;
                var stack = baseInfo.stack;
                var retry = 0;
                var NAVIGATE_INTERVAL = 100;
                var MAX_RETRY_COUNT = 10;
                // hash 変更が完了した後に navigate を実行
                var _navigate = function () {
                    if (MAX_RETRY_COUNT <= retry) {
                        console.error(TAG + "reached navigate max retry count.");
                        Router.s_lastNavigateInfo = {};
                    }
                    else if (param.destBase !== location.hash) {
                        retry++;
                        setTimeout(_navigate, NAVIGATE_INTERVAL);
                    }
                    else {
                        Router.s_lastNavigateInfo.inNavigation = false;
                        Router.registerPageStack(param.destStacks, true, navOptions);
                    }
                };
                if (stack) {
                    delete stack[Router.SUBFLOW_PARAM];
                    Router.getJqmHistory().activeIndex -= distance;
                    Router.getJqmHistory().clearForward();
                    if (param.destStacks) {
                        Router.stop();
                        // iOS 環境において index.html より history.go(0) が発生するとリロードが発生する.
                        // その後画面遷移を控えるため, 履歴を戻る必要があるときにのみ限定する.
                        if (0 !== distance) {
                            history.go(-distance);
                        }
                        delete navOptions.subFlow; // subFlow プロパティの破棄
                        setTimeout(_navigate, 0);
                    }
                    else {
                        Router.s_lastNavigateInfo.positiveNavigate = false;
                        history.go(-distance);
                    }
                }
                else {
                    console.warn(TAG + "subFlow begin status does not exist in history.");
                    Router.s_lastNavigateInfo = {};
                }
            };
            /**
             * \~english
             * Return destination Sub Flow information.
             * (const function)
             *
             * @private
             * @return {Object} sub flow info.
             *
             * \~japanese
             * Sub Flow 情報を返却
             * (この関数は Router の状態を変更しません。)
             *
             * @private
             * @return {Object} Sub Flow 情報.
             */
            Router.detectSubFlowBaseInfo = function () {
                var stack = Router.getJqmHistory().stack;
                var historyActiveIndex = Router.getJqmHistory().activeIndex;
                var i, distance;
                var param = {};
                var target;
                for (i = historyActiveIndex, distance = 0; 0 <= i; i--, distance++) {
                    if (stack[i][Router.SUBFLOW_PARAM]) {
                        target = stack[i];
                        param = stack[i][Router.SUBFLOW_PARAM];
                        break;
                    }
                }
                if (null == param.additionalDistance) {
                    param.additionalDistance = 0;
                }
                return {
                    stack: target,
                    subFlowParam: param,
                    distance: distance + param.additionalDistance,
                    isCurrent: (function () {
                        if (target && 0 === distance) {
                            return true;
                        }
                        else {
                            return false;
                        }
                    })(),
                };
            };
            /**
             * \~english
             * Convert path to jQM dataUrl.
             *
             * @private
             * @return {String} jQM data url.
             *
             * \~japanese
             * パスを jQM dataUrl に変換
             *
             * @private
             * @return {String} jQM data url.
             */
            Router.pathToJqmDataUrl = function (path) {
                var url = Framework.toUrl(path);
                var dataUrl = $.mobile.path.convertUrlToDataUrl(url);
                return dataUrl;
            };
            /**
             * \~english
             * Update jQM urlHistory by window.history object.
             * To be natural browsing history behavior, application needs to update jQM urlHistory
             * when clicking back or next button of browser. (imperfection for decideDirection())
             *
             * @private
             *
             * \~japanese
             * ブラウザの履歴に基づき jQM urlHistory を更新
             * [戻る]/[進む]が押下された後、ページ遷移されるとき、jQM urlHistory を更新する。(decideDirection() により不完全)
             *
             * @private
             */
            Router.treatUrlHistory = function () {
                if (Router.s_lastNavigateInfo.positiveNavigate || history.length < Router.getJqmHistory().stack.length) {
                    Router.getJqmHistory().clearForward();
                }
            };
            Router.s_initOptions = {};
            Router.s_router = null;
            Router.s_rootContexts = {};
            Router.s_lastNavigateInfo = {};
            Router.s_lastClickedTime = null;
            Router.s_lastIntent = {};
            Router.s_firstChangePage = true;
            Router.s_loadUrl = null;
            Router.s_back = null;
            Router.DELAY_TIME = 200; // TBD: 暫定値
            Router.DATA_BACK_DESTINATION = "data-back-dst";
            Router.DATA_NO_HASH_CHANGE = "data-no-hash-change";
            Router.DATA_NO_VCLICK_HANDLE = "data-no-vclick-handle";
            Router.BACK_DESTINATION_URL = "backDstUrl";
            Router.SUBFLOW_PARAM = "subFlowParam";
            Router.s_defaultInitOptions = {
                anchorVclick: true,
                firstPageTransition: false,
            };
            Router.s_defaultNavigateOptions = {
                trigger: true,
                replace: false,
                intent: null,
            };
            return Router;
        }());
        Framework.Router = Router;
    })(Framework = CDP.Framework || (CDP.Framework = {}));
})(CDP || (CDP = {}));
var CDP;
(function (CDP) {
    var Framework;
    (function (Framework) {
        var Promise = CDP.Promise;
        var TAG = "[CDP.Framework.Page] ";
        /**
         * \~english
         * @class Page
         * @brief Base class of all page unit.
         *
         * \~japanese
         * @class Page
         * @brief すべてのページの基本となる既定クラス
         */
        var Page = (function () {
            //////////////////////////////////////////
            // public methods
            /**
             * \~english
             * constructor
             *
             * @param _url    {String}               [in] page's URL
             * @param _id     {String}               [in] page's ID
             * @param options {PageConstructOptions} [in] options
             *
             * \~japanese
             * constructor
             *
             * @param _url    {String}               [in] ページ URL
             * @param _id     {String}               [in] ページ ID
             * @param options {PageConstructOptions} [in] オプション
             */
            function Page(_url, _id, options) {
                this._url = _url;
                this._id = _id;
                this.setup(options);
            }
            Object.defineProperty(Page.prototype, "active", {
                //////////////////////////////////////////
                // public accessor
                get: function () { return !!this._$page && this._$page.hasClass("ui-page-active"); },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Page.prototype, "url", {
                get: function () { return this._url; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Page.prototype, "id", {
                get: function () { return this._id; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Page.prototype, "$page", {
                get: function () { return this._$page; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Page.prototype, "$header", {
                get: function () { return this._$header; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Page.prototype, "$footer", {
                get: function () { return this._$footer; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Page.prototype, "intent", {
                get: function () { return this._intent; },
                set: function (newIntent) { this._intent = newIntent; this._intent._update = true; },
                enumerable: true,
                configurable: true
            });
            //////////////////////////////////////////
            // public Event Handler
            //! Orientation の変更を受信
            Page.prototype.onOrientationChanged = function (newOrientation) {
                if (this._owner) {
                    this._owner.onOrientationChanged(newOrientation);
                }
            };
            //! H/W Back Button ハンドラ
            Page.prototype.onHardwareBackButton = function (event) {
                if (this._owner) {
                    return this._owner.onHardwareBackButton(event);
                }
                else {
                    return false;
                }
            };
            //! Router "before route change" ハンドラ
            Page.prototype.onBeforeRouteChange = function () {
                if (this._owner) {
                    return this._owner.onBeforeRouteChange();
                }
                else {
                    return Promise.resolve();
                }
            };
            //! 汎用コマンドを受信
            Page.prototype.onCommand = function (event, kind) {
                if (this._owner) {
                    return this._owner.onCommand(event, kind);
                }
                else {
                    return false;
                }
            };
            //! 最初の OnPageInit() のときにのみコールされる
            Page.prototype.onInitialize = function (event) {
                if (this._owner) {
                    this._owner.onInitialize(event);
                }
            };
            //! jQM event: "pagebeforecreate" に対応
            Page.prototype.onPageBeforeCreate = function (event) {
                if (this._owner) {
                    this._owner.onPageBeforeCreate(event);
                }
            };
            //! jQM event: "pagecreate" (旧:"pageinit") に対応
            Page.prototype.onPageInit = function (event) {
                if (this._owner) {
                    this._owner.onPageInit(event);
                }
            };
            //! jQM event: "pagebeforeshow" に対応
            Page.prototype.onPageBeforeShow = function (event, data) {
                if (this._owner) {
                    this._owner.onPageBeforeShow(event, data);
                }
            };
            //! jQM event: "pagecontainershow" (旧:"pageshow") に対応
            Page.prototype.onPageShow = function (event, data) {
                if (this._owner) {
                    this._owner.onPageShow(event, data);
                }
            };
            //! jQM event: "pagebeforehide" に対応
            Page.prototype.onPageBeforeHide = function (event, data) {
                if (this._owner) {
                    this._owner.onPageBeforeHide(event, data);
                }
            };
            //! jQM event: "pagecontainerhide" (旧:"pagehide") に対応
            Page.prototype.onPageHide = function (event, data) {
                if (this._owner) {
                    this._owner.onPageHide(event, data);
                }
            };
            //! jQM event: "pageremove" に対応
            Page.prototype.onPageRemove = function (event) {
                if (this._owner) {
                    this._owner.onPageRemove(event);
                }
            };
            //////////////////////////////////////////
            // private methods
            //! mixin 用疑似コンストラクタ
            Page.prototype.setup = function (options) {
                var _this = this;
                // mixin destination 用の再初期化
                this._initialized = false;
                this._intent = null;
                // イベントバインド
                var selector = "#" + this._id;
                $(document)
                    .off("pagebeforecreate", selector)
                    .on("pagebeforecreate", selector, function (event) {
                    _this._$page = $(selector).first();
                    _this._$header = _this._$page.children(":jqmData(role=header)").first();
                    _this._$footer = _this._$page.children(":jqmData(role=footer)").first();
                    _this._$page
                        .on("pagecreate", function (ev) {
                        _this.pageInit(ev);
                    })
                        .on("pagebeforeshow", function (ev, data) {
                        _this.pageBeforeShow(ev, data);
                    })
                        .on("pageshow", function (ev, data) {
                        _this.pageShow(ev, data);
                    })
                        .on("pagebeforehide", function (ev, data) {
                        _this.pageBeforeHide(ev, data);
                    })
                        .on("pagehide", function (ev, data) {
                        _this.pageHide(ev, data);
                    })
                        .on("pageremove", function (ev) {
                        _this.pageRemove(ev);
                    });
                    _this.pageBeforeCreate(event);
                });
                options = options || {};
                // owner 設定
                this._owner = options.owner;
                // intent 設定
                this._keepIntent = options.keepIntent;
                // Router へ登録
                if (null == options.route) {
                    options.route = this._id;
                }
                Framework.Router.register(options.route, this._url, options.top, options.callback);
            };
            //! PageTransitionDirection の判定
            Page.prototype.getDirection = function () {
                var activeIndex = Framework.Router.getJqmHistory().activeIndex;
                var prevIndex = Framework.Router.getJqmHistory().previousIndex;
                if (null == activeIndex || null == prevIndex) {
                    return "unknown";
                }
                else if (prevIndex === activeIndex) {
                    return "same";
                }
                else if (activeIndex < prevIndex) {
                    return "back";
                }
                else {
                    return "forward";
                }
            };
            Page.prototype.pageBeforeCreate = function (event) {
                this.onPageBeforeCreate(event);
            };
            Page.prototype.pageInit = function (event) {
                if (!this._initialized) {
                    this.onInitialize(event);
                    this._initialized = true;
                }
                this.onPageInit(event);
            };
            Page.prototype.pageBeforeShow = function (event, data) {
                Framework.setActivePage(this);
                this._intent = Framework.Router.popIntent();
                this.onPageBeforeShow(event, $.extend(data, { direction: this.getDirection() }));
            };
            Page.prototype.pageShow = function (event, data) {
                this.onPageShow(event, $.extend(data, { direction: this.getDirection() }));
            };
            Page.prototype.pageBeforeHide = function (event, data) {
                this.onPageBeforeHide(event, $.extend(data, { direction: this.getDirection() }));
                if (null != this._intent && (this._keepIntent || this._intent._update)) {
                    delete this._intent._update;
                    Framework.Router.pushIntent(this._intent);
                }
                else if (Framework.Router.fromHashChanged() && Framework.Router.isInSubFlow()) {
                    Framework.Router.pushIntent(this._intent);
                }
                this._intent = null;
                Framework.setActivePage(null);
            };
            Page.prototype.pageHide = function (event, data) {
                this.onPageHide(event, $.extend(data, { direction: this.getDirection() }));
            };
            Page.prototype.pageRemove = function (event) {
                this.onPageRemove(event);
                this._$page.off();
                this._$page = null;
                this._$header.off();
                this._$header = null;
                this._$footer.off();
                this._$footer = null;
            };
            return Page;
        }());
        Framework.Page = Page;
        ///////////////////////////////////////////////////////////////////////
        // closure methods
        /*
         * jQM1.4 にて、duplicate とされている "pageshow", "pagehide" はまだ据え置き。
         * http://jquerymobile.com/upgrade-guide/1.4/#navigation
         *
         * 特定ページに対して、イベントを取得できないため。
         * Forum でも議論中なので、決着がついてから対応を考慮する。
         * https://github.com/jquery/jquery-mobile/issues/6865
         *
         * [参考] よくわかるイベントチートシート
         *  - 本家(1.4+) http://jqmtricks.wordpress.com/2014/03/26/jquery-mobile-page-events/
         *  - 有志(~1.3) http://dev.screw-axis.com/doc/jquery_mobile/resources/cheatsheet/
         *
         * 以下は不完全な対応予定コード
         *
         * 特に振る舞いが変わるのは、"pagehide" で、検討されている仕様では
         * DOM を特定できないため、onPageHide() をインスタンスに伝えることができない。
         *
         * 仕様が変わらない場合は
         * onPageBeforeHide() の中で post して onPageHide() を発行する予定(過去互換保証)
         *
         * 2015/03/25 追記:
         * 仕様は確定. jQM1.6 より削除される予定
         *  jQM1.4 相当の参考実装 plugin があり、この実装相当の機能を cdp.framework.jqm で抱える予定
         *  https://github.com/arschmitz/jquery-mobile-onpage
         *
         * 公式見解
         * https://github.com/jquery/jquery-mobile/issues/7283#issuecomment-40746622
         */
        /*
            // bind "pagecontainershow", and "pagecontainerhide".
            (() => {
                let $body: any = $("body");
                $(document)
                    .on("pagecontainershow", (event: JQuery.Event, data: ShowEventData) => {
                        if (0 < data.prevPage.length) {
                            // "pagecontainershow" は "pagecontainerhide" よりも遅いので、やはり DOM にはアクセスできない
                            let $prevpage = $("#" + data.prevPage[0].id);
                            $prevpage.trigger("_pagehide", data);
                        }
                        // 以下の対応で、"pagecontainershow" は "pageshow" 同等の振る舞いにすることが可能
                        let pageId = $body.pagecontainer("getActivePage").prop("id");
                        let $page = $("#" + pageId);
                        $page.trigger("_pageshow", data);
                    })
                    .on("pagecontainerhide", (event: JQuery.Event, data: HideEventData) => {
                        // "pagecontainerhide" を受けたときは既に DOM から消えているため、page は特定できない。
                        //let pageId = $body.pagecontainer('getActivePage').prop("id");
                        //let $page = $("#" + pageId);
                        //$page.trigger("_pagehide", data);
                    })
                    .on("pagecontainertransition", (event: JQuery.Event, data: any) => {
                        // "pagecontainertransition" には toPage にしかアクセスはできない
                    })
                ;
            })();
        */
    })(Framework = CDP.Framework || (CDP.Framework = {}));
})(CDP || (CDP = {}));

return CDP.Framework; }));

}.call(window));

/***/ }),
/* 2 */
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE_2__;

/***/ }),
/* 3 */
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE_3__;

/***/ }),
/* 4 */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*** IMPORTS FROM imports-loader ***/
(function() {

/*!
 * jQuery Migrate - v3.0.1-hotfix - 2017-01-11
 * Copyright jQuery Foundation and other contributors
 */
; (function (factory) {
    if (true) {
        // AMD. Register as an anonymous module.
        !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(5)], __WEBPACK_AMD_DEFINE_RESULT__ = function ($) {
            return factory($, window);
        }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
                __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
    } else if (typeof module === "object" && module.exports) {
        // Node/CommonJS
        // eslint-disable-next-line no-undef
        module.exports = factory(require("jquery"), window);
    } else {
        // Browser globals
        factory(jQuery, window);
    }
})(function (jQuery, window) {
    "use strict";

    jQuery.migrateVersion = "3.0.1-hotfix"; // with hotfix

    /* exported migrateWarn, migrateWarnFunc, migrateWarnProp */

    (function () {

        // Support: IE9 only
        // IE9 only creates console object when dev tools are first opened
        // Also, avoid Function#bind here to simplify PhantomJS usage
        var log = window.console && window.console.log &&
            function () {
                window.console.log.apply(window.console, arguments);
            },
            rbadVersions = /^[12]\./;

        if (!log) {
            return;
        }

        // Need jQuery 3.0.0+ and no older Migrate loaded
        if (!jQuery || rbadVersions.test(jQuery.fn.jquery)) {
            log("JQMIGRATE: jQuery 3.0.0+ REQUIRED");
        }
        if (jQuery.migrateWarnings) {
            log("JQMIGRATE: Migrate plugin loaded multiple times");
        }

        // Show a message on the console so devs know we're active
        if (!jQuery.migrateMute) {
            log("JQMIGRATE: Migrate is installed" +
                (jQuery.migrateMute ? "" : " with logging active") +
                ", version " + jQuery.migrateVersion);
        }
    })();

    var warnedAbout = {};

    // List of warnings already given; public read only
    jQuery.migrateWarnings = [];

    // Set to false to disable traces that appear with warnings
    if (jQuery.migrateTrace === undefined) {
        jQuery.migrateTrace = true;
    }

    // Forget any warnings we've already given; public
    jQuery.migrateReset = function () {
        warnedAbout = {};
        jQuery.migrateWarnings.length = 0;
    };

    function migrateWarn(msg) {
        var console = window.console;
        if (!warnedAbout[msg]) {
            warnedAbout[msg] = true;
            jQuery.migrateWarnings.push(msg);
            if (console && console.warn && !jQuery.migrateMute) {
                console.warn("JQMIGRATE: " + msg);
                if (jQuery.migrateTrace && console.trace) {
                    console.trace();
                }
            }
        }
    }

    function migrateWarnProp(obj, prop, value, msg) {
        Object.defineProperty(obj, prop, {
            configurable: true,
            enumerable: true,
            get: function () {
                migrateWarn(msg);
                return value;
            },
            set: function (newValue) {
                migrateWarn(msg);
                value = newValue;
            }
        });
    }

    function migrateWarnFunc(obj, prop, newFunc, msg) {
        obj[prop] = function () {
            migrateWarn(msg);
            return newFunc.apply(this, arguments);
        };
    }

    if (window.document.compatMode === "BackCompat") {
        // JQuery has never supported or tested Quirks Mode
        migrateWarn("jQuery is not compatible with Quirks Mode");
    }


    var oldInit = jQuery.fn.init,
        oldIsNumeric = jQuery.isNumeric,
        oldFind = jQuery.find,
        rattrHashTest = /\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/,
        rattrHashGlob = /\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/g;

    jQuery.fn.init = function (arg1) {
        var args = Array.prototype.slice.call(arguments);

        if (typeof arg1 === "string" && arg1 === "#") {
            // JQuery( "#" ) is a bogus ID selector, but it returned an empty set before jQuery 3.0
            migrateWarn("jQuery( '#' ) is not a valid selector");
            args[0] = [];
        }

        return oldInit.apply(this, args);
    };
    jQuery.fn.init.prototype = jQuery.fn;

    jQuery.find = function (selector) {
        var args = Array.prototype.slice.call(arguments);

        // Support: PhantomJS 1.x
        // String#match fails to match when used with a //g RegExp, only on some strings
        if (typeof selector === "string" && rattrHashTest.test(selector)) {
            // The nonstandard and undocumented unquoted-hash was removed in jQuery 1.12.0
            // First see if qS thinks it's a valid selector, if so avoid a false positive
            try {
                window.document.querySelector(selector);
            } catch (err1) {
                // Didn't *look* valid to qSA, warn and try quoting what we think is the value
                selector = selector.replace(rattrHashGlob, function (_, attr, op, value) {
                    return "[" + attr + op + "\"" + value + "\"]";
                });

                // If the regexp *may* have created an invalid selector, don't update it
                // Note that there may be false alarms if selector uses jQuery extensions
                try {
                    window.document.querySelector(selector);
                    migrateWarn("Attribute selector with '#' must be quoted: " + args[0]);
                    args[0] = selector;
                } catch (err2) {
                    migrateWarn("Attribute selector with '#' was not fixed: " + args[0]);
                }
            }
        }

        return oldFind.apply(this, args);
    };

    // Copy properties attached to original jQuery.find method (e.g. .attr, .isXML)
    var findProp;
    for (findProp in oldFind) {
        if (Object.prototype.hasOwnProperty.call(oldFind, findProp)) {
            jQuery.find[findProp] = oldFind[findProp];
        }
    }

    // The number of elements contained in the matched element set
    jQuery.fn.size = function () {
        migrateWarn("jQuery.fn.size() is deprecated and removed; use the .length property");
        return this.length;
    };

    jQuery.parseJSON = function () {
        migrateWarn("jQuery.parseJSON is deprecated; use JSON.parse");
        return JSON.parse.apply(null, arguments);
    };

    jQuery.isNumeric = function (val) {
        // The jQuery 2.2.3 implementation of isNumeric
        function isNumeric2(obj) {
            var realStringObj = obj && obj.toString();
            return !jQuery.isArray(obj) && (realStringObj - parseFloat(realStringObj) + 1) >= 0;
        }

        var newValue = oldIsNumeric(val),
            oldValue = isNumeric2(val);

        if (newValue !== oldValue) {
            migrateWarn("jQuery.isNumeric() should not be called on constructed objects");
        }

        return oldValue;
    };

    migrateWarnFunc(jQuery, "unique", jQuery.uniqueSort,
        "jQuery.unique is deprecated; use jQuery.uniqueSort");

    // Now jQuery.expr.pseudos is the standard incantation
    migrateWarnProp(jQuery.expr, "filters", jQuery.expr.pseudos,
        "jQuery.expr.filters is deprecated; use jQuery.expr.pseudos");
    migrateWarnProp(jQuery.expr, ":", jQuery.expr.pseudos,
        "jQuery.expr[':'] is deprecated; use jQuery.expr.pseudos");


    var oldAjax = jQuery.ajax;

    jQuery.ajax = function () {
        var jQXHR = oldAjax.apply(this, arguments);

        // Be sure we got a jQXHR (e.g., not sync)
        if (jQXHR.promise) {
            migrateWarnFunc(jQXHR, "success", jQXHR.done,
                "jQXHR.success is deprecated and removed");
            migrateWarnFunc(jQXHR, "error", jQXHR.fail,
                "jQXHR.error is deprecated and removed");
            migrateWarnFunc(jQXHR, "complete", jQXHR.always,
                "jQXHR.complete is deprecated and removed");
        }

        return jQXHR;
    };


    var oldRemoveAttr = jQuery.fn.removeAttr,
        oldToggleClass = jQuery.fn.toggleClass,
        rmatchNonSpace = /\S+/g;

    jQuery.fn.removeAttr = function (name) {
        var self = this;

        jQuery.each(name.match(rmatchNonSpace), function (i, attr) {
            if (jQuery.expr.match.bool.test(attr)) {
                migrateWarn("jQuery.fn.removeAttr no longer sets boolean properties: " + attr);
                self.prop(attr, false);
            }
        });

        return oldRemoveAttr.apply(this, arguments);
    };

    jQuery.fn.toggleClass = function (state) {
        // Only deprecating no-args or single boolean arg
        if (state !== undefined && typeof state !== "boolean") {
            return oldToggleClass.apply(this, arguments);
        }

        migrateWarn("jQuery.fn.toggleClass( boolean ) is deprecated");

        // Toggle entire class name of each element
        return this.each(function () {
            var className = this.getAttribute && this.getAttribute("class") || "";

            if (className) {
                jQuery.data(this, "__className__", className);
            }

            // If the element has a class name or if we're passed `false`,
            // then remove the whole classname (if there was one, the above saved it).
            // Otherwise bring back whatever was previously saved (if anything),
            // falling back to the empty string if nothing was stored.
            if (this.setAttribute) {
                this.setAttribute("class",
                    className || state === false ?
                    "" :
                    jQuery.data(this, "__className__") || ""
                );
            }
        });
    };


    var internalSwapCall = false;

    // If this version of jQuery has .swap(), don't false-alarm on internal uses
    if (jQuery.swap) {
        jQuery.each(["height", "width", "reliableMarginRight"], function (_, name) {
            var oldHook = jQuery.cssHooks[name] && jQuery.cssHooks[name].get;

            if (oldHook) {
                jQuery.cssHooks[name].get = function () {
                    var ret;

                    internalSwapCall = true;
                    ret = oldHook.apply(this, arguments);
                    internalSwapCall = false;
                    return ret;
                };
            }
        });
    }

    jQuery.swap = function (elem, options, callback, args) {
        var ret, name,
            old = {};

        if (!internalSwapCall) {
            migrateWarn("jQuery.swap() is undocumented and deprecated");
        }

        // Remember the old values, and insert the new ones
        for (name in options) {
            old[name] = elem.style[name];
            elem.style[name] = options[name];
        }

        ret = callback.apply(elem, args || []);

        // Revert the old values
        for (name in options) {
            elem.style[name] = old[name];
        }

        return ret;
    };

    var oldData = jQuery.data;

    jQuery.data = function (elem, name, value) {
        var curData;

        // Name can be an object, and each entry in the object is meant to be set as data
        if (name && typeof name === "object" && arguments.length === 2) {
            curData = jQuery.hasData(elem) && oldData.call(this, elem);
            var sameKeys = {};
            for (var key in name) {
                if (key !== jQuery.camelCase(key)) {
                    migrateWarn("jQuery.data() always sets/gets camelCased names: " + key);
                    curData[key] = name[key];
                } else {
                    sameKeys[key] = name[key];
                }
            }

            oldData.call(this, elem, sameKeys);

            return name;
        }

        // If the name is transformed, look for the un-transformed name in the data object
        if (name && typeof name === "string" && name !== jQuery.camelCase(name)) {
            curData = jQuery.hasData(elem) && oldData.call(this, elem);
            if (curData && name in curData) {
                migrateWarn("jQuery.data() always sets/gets camelCased names: " + name);
                if (arguments.length > 2) {
                    curData[name] = value;
                }
                return curData[name];
            }
        }

        return oldData.apply(this, arguments);
    };

    var oldTweenRun = jQuery.Tween.prototype.run;

    jQuery.Tween.prototype.run = function () {
        if (jQuery.easing[this.easing].length > 1) {
            migrateWarn(
                "easing function " +
                "\"jQuery.easing." + this.easing.toString() +
                "\" should use only first argument"
            );

            var oldEasing = jQuery.easing[this.easing];
            jQuery.easing[this.easing] = function (percent) {
                return oldEasing.call(jQuery.easing, percent, percent, 0, 1, 1);
            }.bind(this);
        }

        oldTweenRun.apply(this, arguments);
    };

    jQuery.fx.interval = jQuery.fx.interval || 13;

    // Support: IE9, Android <=4.4
    // Avoid false positives on browsers that lack rAF
    if (window.requestAnimationFrame) {
        migrateWarnProp(jQuery.fx, "interval", jQuery.fx.interval,
            "jQuery.fx.interval is deprecated");
    }

    var oldLoad = jQuery.fn.load,
        oldEventAdd = jQuery.event.add,
        originalFix = jQuery.event.fix;

    jQuery.event.props = [];
    jQuery.event.fixHooks = {};

    migrateWarnProp(jQuery.event.props, "concat", jQuery.event.props.concat,
        "jQuery.event.props.concat() is deprecated and removed");

    jQuery.event.fix = function (originalEvent) {
        var event,
            type = originalEvent.type,
            fixHook = this.fixHooks[type],
            props = jQuery.event.props;

        if (props.length) {
            migrateWarn("jQuery.event.props are deprecated and removed: " + props.join());
            while (props.length) {
                jQuery.event.addProp(props.pop());
            }
        }

        if (fixHook && !fixHook._migrated_) {
            fixHook._migrated_ = true;
            migrateWarn("jQuery.event.fixHooks are deprecated and removed: " + type);
            if ((props = fixHook.props) && props.length) {
                while (props.length) {
                    jQuery.event.addProp(props.pop());
                }
            }
        }

        event = originalFix.call(this, originalEvent);

        return fixHook && fixHook.filter ? fixHook.filter(event, originalEvent) : event;
    };

    jQuery.event.add = function (elem, types) {
        // This misses the multiple-types case but that seems awfully rare
        if (elem === window && types === "load" && window.document.readyState === "complete") {
            migrateWarn("jQuery(window).on('load'...) called after load event occurred");
        }
        return oldEventAdd.apply(this, arguments);
    };

    jQuery.each(["load", "unload", "error"], function (_, name) {

        jQuery.fn[name] = function () {
            var args = Array.prototype.slice.call(arguments, 0);

            // If this is an ajax load() the first arg should be the string URL;
            // technically this could also be the "Anything" arg of the event .load()
            // which just goes to show why this dumb signature has been deprecated!
            // jQuery custom builds that exclude the Ajax module justifiably die here.
            if (name === "load" && typeof args[0] === "string") {
                return oldLoad.apply(this, args);
            }

            migrateWarn("jQuery.fn." + name + "() is deprecated");

            args.splice(0, 0, name);
            if (arguments.length) {
                return this.on.apply(this, args);
            }

            // Use .triggerHandler here because:
            // - load and unload events don't need to bubble, only applied to window or image
            // - error event should not bubble to window, although it does pre-1.7
            // See http://bugs.jquery.com/ticket/11820
            this.triggerHandler.apply(this, args);
            return this;
        };

    });

    // Trigger "ready" event only once, on document ready
    jQuery(function () {
        jQuery(window.document).triggerHandler("ready");
    });

    jQuery.event.special.ready = {
        setup: function () {
            if (this === window.document) {
                migrateWarn("'ready' event is deprecated");
            }
        }
    };

    jQuery.fn.extend({
        bind: function (types, data, fn) {
            migrateWarn("jQuery.fn.bind() is deprecated");
            return this.on(types, null, data, fn);
        },
        unbind: function (types, fn) {
            migrateWarn("jQuery.fn.unbind() is deprecated");
            return this.off(types, null, fn);
        },
        delegate: function (selector, types, data, fn) {
            migrateWarn("jQuery.fn.delegate() is deprecated");
            return this.on(types, selector, data, fn);
        },
        undelegate: function (selector, types, fn) {
            migrateWarn("jQuery.fn.undelegate() is deprecated");
            return arguments.length === 1 ?
                this.off(selector, "**") :
                this.off(types, selector || "**", fn);
        }
    });


    var oldOffset = jQuery.fn.offset;

    jQuery.fn.offset = function () {
        var docElem,
            elem = this[0],
            origin = { top: 0, left: 0 };

        if (!elem || !elem.nodeType) {
            migrateWarn("jQuery.fn.offset() requires a valid DOM element");
            return origin;
        }

        docElem = (elem.ownerDocument || window.document).documentElement;
        if (!jQuery.contains(docElem, elem)) {
            migrateWarn("jQuery.fn.offset() requires an element connected to a document");
            return origin;
        }

        return oldOffset.apply(this, arguments);
    };


    var oldParam = jQuery.param;

    jQuery.param = function (data, traditional) {
        var ajaxTraditional = jQuery.ajaxSettings && jQuery.ajaxSettings.traditional;

        if (traditional === undefined && ajaxTraditional) {
            migrateWarn("jQuery.param() no longer uses jQuery.ajaxSettings.traditional");
            traditional = ajaxTraditional;
        }

        return oldParam.call(this, data, traditional);
    };

    var oldSelf = jQuery.fn.andSelf || jQuery.fn.addBack;

    jQuery.fn.andSelf = function () {
        migrateWarn("jQuery.fn.andSelf() is deprecated and removed, use jQuery.fn.addBack()");
        return oldSelf.apply(this, arguments);
    };


    var oldDeferred = jQuery.Deferred,
        tuples = [
            // Action, add listener, callbacks, .then handlers, final state
            ["resolve", "done", jQuery.Callbacks("once memory"),
                jQuery.Callbacks("once memory"), "resolved"],
            ["reject", "fail", jQuery.Callbacks("once memory"),
                jQuery.Callbacks("once memory"), "rejected"],
            ["notify", "progress", jQuery.Callbacks("memory"),
                jQuery.Callbacks("memory")]
        ];

    jQuery.Deferred = function (func) {
        var deferred = oldDeferred(),
            promise = deferred.promise();

        deferred.pipe = promise.pipe = function ( /* fnDone, fnFail, fnProgress */) {
            var fns = arguments;

            migrateWarn("deferred.pipe() is deprecated");

            return jQuery.Deferred(function (newDefer) {
                jQuery.each(tuples, function (i, tuple) {
                    var fn = jQuery.isFunction(fns[i]) && fns[i];

                    // Deferred.done(function() { bind to newDefer or newDefer.resolve })
                    // deferred.fail(function() { bind to newDefer or newDefer.reject })
                    // deferred.progress(function() { bind to newDefer or newDefer.notify })
                    deferred[tuple[1]](function () {
                        var returned = fn && fn.apply(this, arguments);
                        if (returned && jQuery.isFunction(returned.promise)) {
                            returned.promise()
                                .done(newDefer.resolve)
                                .fail(newDefer.reject)
                                .progress(newDefer.notify);
                        } else {
                            newDefer[tuple[0] + "With"](
                                this === promise ? newDefer.promise() : this,
                                fn ? [returned] : arguments
                            );
                        }
                    });
                });
                fns = null;
            }).promise();

        };

        if (func) {
            func.call(deferred, deferred);
        }

        return deferred;
    };


    return jQuery;
});

}.call(window));

/***/ }),
/* 5 */
/***/ (function(module, exports) {

module.exports = __WEBPACK_EXTERNAL_MODULE_5__;

/***/ })
/******/ ]);
});
/*!
 * cdp.tools.js 2.0.0
 *
 * Date: 2017-07-24T05:05:03.624Z
 */
(function (root, factory) { if (typeof define === "function" && define.amd) { define("cdp.tools",["jquery", "underscore"], function ($, _) { return factory(root.CDP || (root.CDP = {}), $, _); }); } else if (typeof exports === "object") { module.exports = factory(root.CDP || (root.CDP = {}), require("jquery"), require("underscore")); } else { factory(root.CDP || (root.CDP = {}), root.jQuery || root.$, root._); } }(((this || 0).self || global), function (CDP, $, _) { CDP.Tools = CDP.Tools || {};
/**
 * @file  Utils.
 * @brief Tools 専用のユーティリティ
 */
var CDP;
(function (CDP) {
    var Tools;
    (function (Tools) {
        // cdp.tools は cdp.core に依存しないため、独自にglobal を提供する
        Tools.global = CDP.global || Function("return this")();
    })(Tools = CDP.Tools || (CDP.Tools = {}));
})(CDP || (CDP = {}));
var CDP;
(function (CDP) {
    var Tools;
    (function (Tools) {
        var TAG = "[CDP.Tools.Blob] ";
        var Blob;
        (function (Blob) {
            /**
             * Get BlobBuilder
             *
             * @return {any} BlobBuilder
             */
            function getBlobBuilder() {
                return Tools.global.BlobBuilder || Tools.global.WebKitBlobBuilder || Tools.global.MozBlobBuilder || Tools.global.MSBlobBuilder;
            }
            /**
             * ArrayBuffer to Blob
             *
             * @param buf {ArrayBuffer} [in] ArrayBuffer data
             * @param mimeType {string} [in] MimeType of data
             * @return {Blob} Blob data
             */
            function arrayBufferToBlob(buf, mimeType) {
                var blob = null;
                var blobBuilderObject = getBlobBuilder();
                if (blobBuilderObject != null) {
                    var blobBuilder = new blobBuilderObject();
                    blobBuilder.append(buf);
                    blob = blobBuilder.getBlob(mimeType);
                }
                else {
                    // Android 4.4 KitKat Chromium WebView
                    blob = new Tools.global.Blob([buf], { type: mimeType });
                }
                return blob;
            }
            Blob.arrayBufferToBlob = arrayBufferToBlob;
            /**
             * Base64 string to Blob
             *
             * @param base64 {string} [in] Base64 string data
             * @param mimeType {string} [in] MimeType of data
             * @return {Blob} Blob data
             */
            function base64ToBlob(base64, mimeType) {
                var blob = null;
                var blobBuilderObject = getBlobBuilder();
                if (blobBuilderObject != null) {
                    var blobBuilder = new blobBuilderObject();
                    blobBuilder.append(base64ToArrayBuffer(base64));
                    blob = blobBuilder.getBlob(mimeType);
                }
                else {
                    // Android 4.4 KitKat Chromium WebView
                    blob = new Tools.global.Blob([base64ToArrayBuffer(base64)], { type: mimeType });
                }
                return blob;
            }
            Blob.base64ToBlob = base64ToBlob;
            /**
             * Base64 string to ArrayBuffer
             *
             * @param base64 {string} [in] Base64 string data
             * @return {ArrayBuffer} ArrayBuffer data
             */
            function base64ToArrayBuffer(base64) {
                var bytes = window.atob(base64);
                var arrayBuffer = new ArrayBuffer(bytes.length);
                var data = new Uint8Array(arrayBuffer);
                for (var i = 0, len = bytes.length; i < len; ++i) {
                    data[i] = bytes.charCodeAt(i);
                }
                return arrayBuffer;
            }
            Blob.base64ToArrayBuffer = base64ToArrayBuffer;
            /**
             * Base64 string to Uint8Array
             *
             * @param base64 {string} [in] Base64 string data
             * @return {Uint8Array} Uint8Array data
             */
            function base64ToUint8Array(encoded) {
                var bytes = window.atob(encoded);
                var data = new Uint8Array(bytes.length);
                for (var i = 0, len = bytes.length; i < len; ++i) {
                    data[i] = bytes.charCodeAt(i);
                }
                return data;
            }
            Blob.base64ToUint8Array = base64ToUint8Array;
            /**
             * ArrayBuffer to base64 string
             *
             * @param arrayBuffer {ArrayBuffer} [in] ArrayBuffer data
             * @return {string} base64 data
             */
            function arrayBufferToBase64(arrayBuffer) {
                var bytes = new Uint8Array(arrayBuffer);
                return uint8ArrayToBase64(bytes);
            }
            Blob.arrayBufferToBase64 = arrayBufferToBase64;
            /**
             * Uint8Array to base64 string
             *
             * @param bytes {Uint8Array} [in] Uint8Array data
             * @return {string} base64 data
             */
            function uint8ArrayToBase64(bytes) {
                var data = "";
                for (var i = 0, len = bytes.byteLength; i < len; ++i) {
                    data += String.fromCharCode(bytes[i]);
                }
                return window.btoa(data);
            }
            Blob.uint8ArrayToBase64 = uint8ArrayToBase64;
            /**
             * URL Object
             *
             * @return {any} URL Object
             */
            Blob.URL = (function () {
                return Tools.global.URL || Tools.global.webkitURL;
            })();
        })(Blob = Tools.Blob || (Tools.Blob = {}));
    })(Tools = CDP.Tools || (CDP.Tools = {}));
})(CDP || (CDP = {}));
/**
 * @file  BinaryTransport.ts
 * @brief jQuery ajax transport for making binary data type requests.
 *
 *        original: https://github.com/henrya/js-jquery/blob/master/BinaryTransport/jquery.binarytransport.js
 *        author:   Henry Algus <henryalgus@gmail.com>
 */
var CDP;
(function (CDP) {
    var Tools;
    (function (Tools) {
        // Support file protocol. (as same as official way)
        var xhrSuccessStatus = {
            0: 200,
            1223: 204
        };
        $.ajaxTransport("+binary", function (options, originalOptions, jqXHR) {
            if (Tools.global.FormData &&
                ((options.dataType && (options.dataType === "binary")) ||
                    (options.data && ((Tools.global.ArrayBuffer && options.data instanceof ArrayBuffer) ||
                        (Tools.global.Blob && options.data instanceof Tools.global.Blob))))) {
                var abortCallback_1;
                return {
                    send: function (headers, callback) {
                        // setup all variables
                        var xhr = new XMLHttpRequest();
                        var url = options.url;
                        var type = options.type;
                        var async = options.async || true;
                        // blob or arraybuffer. Default is blob
                        var dataType = options.responseType || "blob";
                        var data = options.data || null;
                        var username = options.username || null;
                        var password = options.password || null;
                        var _callback = callback || (function () { });
                        // succeeded handler
                        xhr.addEventListener("load", function () {
                            var _data = {};
                            _data[options.dataType] = xhr.response;
                            _callback(xhrSuccessStatus[xhr.status] || xhr.status, xhr.statusText, _data, xhr.getAllResponseHeaders());
                        });
                        // error handler
                        xhr.addEventListener("error", function () {
                            var _data = {};
                            _data[options.dataType] = xhr.response;
                            // make callback and send data
                            _callback(xhr.status, xhr.statusText, _data, xhr.getAllResponseHeaders());
                        });
                        // abort handler
                        xhr.addEventListener("abort", function () {
                            var _data = {};
                            _data[options.dataType] = xhr.response;
                            // make callback and send data
                            _callback(xhr.status, xhr.statusText, _data, xhr.getAllResponseHeaders());
                        });
                        // abort callback
                        abortCallback_1 = function () {
                            xhr.abort();
                        };
                        xhr.open(type, url, async, username, password);
                        // setup custom headers
                        for (var i in headers) {
                            if (headers.hasOwnProperty(i)) {
                                xhr.setRequestHeader(i, headers[i]);
                            }
                        }
                        xhr.responseType = dataType;
                        xhr.send(data);
                    },
                    abort: function () {
                        if (abortCallback_1) {
                            abortCallback_1();
                        }
                    }
                };
            }
        });
    })(Tools = CDP.Tools || (CDP.Tools = {}));
})(CDP || (CDP = {}));
/* tslint:disable:max-line-length */
var CDP;
(function (CDP) {
    var Tools;
    (function (Tools) {
        var TAG = "[CDP.Tools.DateTime] ";
        /**
         * @class DateTime
         * @brief 時刻操作のユーティリティクラス
         */
        var DateTime = (function () {
            function DateTime() {
            }
            ///////////////////////////////////////////////////////////////////////
            // public static method
            /**
             * 基点となる日付から、n日後、n日前を算出
             *
             * @param base    {Date}   [in] 基準日
             * @param addDays {Number} [in] 加算日. マイナス指定でn日前も設定可能
             * @return {Date} 日付オブジェクト
             */
            DateTime.computeDate = function (base, addDays) {
                var dt = new Date(base.getTime());
                var baseSec = dt.getTime();
                var addSec = addDays * 86400000; //日数 * 1日のミリ秒数
                var targetSec = baseSec + addSec;
                dt.setTime(targetSec);
                return dt;
            };
            /**
             * Convert string to date object
             *
             * @param {String} date string ex) YYYY-MM-DDTHH:mm:SS.SSS
             * @return {Object} date object
             */
            DateTime.convertISOStringToDate = function (dateString) {
                var dateTime = dateString.split("T"), dateArray = dateTime[0].split("-");
                var timeArray, secArray, dateObject;
                if (dateTime[1]) {
                    timeArray = dateTime[1].split(":");
                    secArray = timeArray[2].split(".");
                }
                if (timeArray) {
                    dateObject = new Date(dateArray[0], dateArray[1] - 1, dateArray[2], timeArray[0], timeArray[1], secArray[0], secArray[1]);
                }
                else {
                    if (dateArray[2]) {
                        dateObject = new Date(dateArray[0], dateArray[1] - 1, dateArray[2]);
                    }
                    else if (dateArray[1]) {
                        dateObject = new Date(dateArray[0], dateArray[1] - 1);
                    }
                    else {
                        dateObject = new Date(dateArray[0]);
                    }
                }
                return dateObject;
            };
            /**
             *  Convert a date object into a string in PMOAPI recorded_date format(the ISO 8601 Extended Format)
             *
             * @param date   {Date}   [in] date object
             * @param target {String} [in] {year | month | date | hour | min | sec | msec }
             * @return {String}
             */
            DateTime.convertDateToISOString = function (date, target) {
                if (target === void 0) { target = "msec"; }
                var isoDateString;
                switch (target) {
                    case "year":
                    case "month":
                    case "date":
                    case "hour":
                    case "min":
                    case "sec":
                    case "msec":
                        break;
                    default:
                        console.warn(TAG + "unknown target: " + target);
                        target = "msec";
                }
                isoDateString = date.getFullYear();
                if ("year" === target) {
                    return isoDateString;
                }
                isoDateString += ("-" + DateTime.numberToDoubleDigitsString(date.getMonth() + 1));
                if ("month" === target) {
                    return isoDateString;
                }
                isoDateString += ("-" + DateTime.numberToDoubleDigitsString(date.getDate()));
                if ("date" === target) {
                    return isoDateString;
                }
                isoDateString += ("T" + DateTime.numberToDoubleDigitsString(date.getHours()));
                if ("hour" === target) {
                    return isoDateString;
                }
                isoDateString += (":" + DateTime.numberToDoubleDigitsString(date.getMinutes()));
                if ("min" === target) {
                    return isoDateString;
                }
                isoDateString += (":" + DateTime.numberToDoubleDigitsString(date.getSeconds()));
                if ("sec" === target) {
                    return isoDateString;
                }
                isoDateString += ("." + String((date.getMilliseconds() / 1000).toFixed(3)).slice(2, 5));
                return isoDateString;
            };
            /**
             * Convert file system compatible string to date object
             *
             * @param {String} date string ex) yyyy_MM_ddTHH_mm_ss_SSS
             * @return {Object} date object
             */
            DateTime.convertFileSystemStringToDate = function (dateString) {
                var dateTime = dateString.split("T"), dateArray = dateTime[0].split("_");
                var timeArray, dateObject;
                if (dateTime[1]) {
                    timeArray = dateTime[1].split("_");
                }
                if (timeArray) {
                    dateObject = new Date(dateArray[0], dateArray[1] - 1, dateArray[2], timeArray[0], timeArray[1], timeArray[2], timeArray[3]);
                }
                else {
                    if (dateArray[2]) {
                        dateObject = new Date(dateArray[0], dateArray[1] - 1, dateArray[2]);
                    }
                    else if (dateArray[1]) {
                        dateObject = new Date(dateArray[0], dateArray[1] - 1);
                    }
                    else {
                        dateObject = new Date(dateArray[0]);
                    }
                }
                return dateObject;
            };
            /**
             *  Convert a date object into a string in file system compatible format(yyyy_MM_ddTHH_mm_ss_SSS)
             *
             * @param date   {Date}   [in] date object
             * @param target {String} [in] {year | month | date | hour | min | sec | msec }
             * @return {String}
             */
            DateTime.convertDateToFileSystemString = function (date, target) {
                if (target === void 0) { target = "msec"; }
                var fileSystemString;
                switch (target) {
                    case "year":
                    case "month":
                    case "date":
                    case "hour":
                    case "min":
                    case "sec":
                    case "msec":
                        break;
                    default:
                        console.warn(TAG + "unknown target: " + target);
                        target = "msec";
                }
                fileSystemString = date.getFullYear();
                if ("year" === target) {
                    return fileSystemString;
                }
                fileSystemString += ("_" + DateTime.numberToDoubleDigitsString(date.getMonth() + 1));
                if ("month" === target) {
                    return fileSystemString;
                }
                fileSystemString += ("_" + DateTime.numberToDoubleDigitsString(date.getDate()));
                if ("date" === target) {
                    return fileSystemString;
                }
                fileSystemString += ("T" + DateTime.numberToDoubleDigitsString(date.getHours()));
                if ("hour" === target) {
                    return fileSystemString;
                }
                fileSystemString += ("_" + DateTime.numberToDoubleDigitsString(date.getMinutes()));
                if ("min" === target) {
                    return fileSystemString;
                }
                fileSystemString += ("_" + DateTime.numberToDoubleDigitsString(date.getSeconds()));
                if ("sec" === target) {
                    return fileSystemString;
                }
                fileSystemString += ("_" + String((date.getMilliseconds() / 1000).toFixed(3)).slice(2, 5));
                return fileSystemString;
            };
            ///////////////////////////////////////////////////////////////////////
            // private static method
            /**
             * Convert num to string(double digits)
             *
             * @param  {Number} number (0 <number < 100)
             * @return {String} double digits string
             */
            DateTime.numberToDoubleDigitsString = function (num) {
                if (num < 0 || num > 100) {
                    return null;
                }
                if (num < 10) {
                    return "0" + num;
                }
                return "" + num;
            };
            return DateTime;
        }());
        Tools.DateTime = DateTime;
    })(Tools = CDP.Tools || (CDP.Tools = {}));
})(CDP || (CDP = {}));
/// <reference types="jquery" />
var CDP;
(function (CDP) {
    var Tools;
    (function (Tools) {
        var TAG = "[CDP.Tools.Functions] ";
        /**
         * Math.abs よりも高速な abs
         */
        function abs(x) {
            return x >= 0 ? x : -x;
        }
        Tools.abs = abs;
        /**
         * Math.max よりも高速な max
         */
        function max(lhs, rhs) {
            return lhs >= rhs ? lhs : rhs;
        }
        Tools.max = max;
        /**
         * Math.min よりも高速な min
         */
        function min(lhs, rhs) {
            return lhs <= rhs ? lhs : rhs;
        }
        Tools.min = min;
        /**
         * 数値を 0 詰めして文字列を生成
         */
        function toZeroPadding(no, limit) {
            var signed = "";
            no = Number(no);
            if (isNaN(no) || isNaN(limit) || limit <= 0) {
                return null;
            }
            if (no < 0) {
                no = Tools.abs(no);
                signed = "-";
            }
            return signed + (Array(limit).join("0") + no).slice(-limit);
        }
        Tools.toZeroPadding = toZeroPadding;
        /**
         * 多重継承のための実行時継承関数
         *
         * Sub Class 候補オブジェクトに対して Super Class 候補オブジェクトを直前の Super Class として挿入する。
         * prototype のみコピーする。
         * インスタンスメンバをコピーしたい場合、Super Class が疑似コンストラクタを提供する必要がある。
         * 詳細は cdp.tools.Functions.spec.ts を参照。
         *
         * @param subClass   {constructor} [in] オブジェクトの constructor を指定
         * @param superClass {constructor} [in] オブジェクトの constructor を指定
         */
        function inherit(subClass, superClass) {
            var _prototype = subClass.prototype;
            function _inherit() {
                this.constructor = subClass;
            }
            _inherit.prototype = superClass.prototype;
            subClass.prototype = new _inherit();
            $.extend(subClass.prototype, _prototype);
        }
        Tools.inherit = inherit;
        /**
         * mixin 関数
         *
         * TypeScript Official Site に載っている mixin 関数
         * http://www.typescriptlang.org/Handbook#mixins
         * 既に定義されているオブジェクトから、新規にオブジェクトを合成する。
         *
         * @param derived {constructor}    [in] 合成されるオブジェクトの constructor を指定
         * @param bases   {constructor...} [in] 合成元オブジェクトの constructor を指定 (可変引数)
         */
        function mixin(derived) {
            var bases = [];
            for (var _i = 1; _i < arguments.length; _i++) {
                bases[_i - 1] = arguments[_i];
            }
            bases.forEach(function (base) {
                Object.getOwnPropertyNames(base.prototype).forEach(function (name) {
                    derived.prototype[name] = base.prototype[name];
                });
            });
        }
        Tools.mixin = mixin;
        /**
         * \~english
         * Helper function to correctly set up the prototype chain, for subclasses.
         * The function behavior is same as extend() function of Backbone.js.
         *
         * @param protoProps  {Object} [in] set prototype properties as object.
         * @param staticProps {Object} [in] set static properties as object.
         * @return {Object} subclass constructor.
         *
         * \~japanese
         * クラス継承のためのヘルパー関数
         * Backbone.js extend() 関数と同等
         *
         * @param protoProps  {Object} [in] prototype properties をオブジェクトで指定
         * @param staticProps {Object} [in] static properties をオブジェクトで指定
         * @return {Object} サブクラスのコンストラクタ
         */
        function extend(protoProps, staticProps) {
            var parent = this;
            var child;
            if (protoProps && protoProps.hasOwnProperty("constructor")) {
                child = protoProps.constructor;
            }
            else {
                child = function () {
                    return parent.apply(this, arguments);
                };
            }
            $.extend(child, parent, staticProps);
            var Surrogate = function () {
                this.constructor = child;
            };
            Surrogate.prototype = parent.prototype;
            child.prototype = new Surrogate;
            if (protoProps) {
                $.extend(child.prototype, protoProps);
            }
            child.__super__ = parent.prototype;
            return child;
        }
        Tools.extend = extend;
        /**
         * DPI 取得
         */
        function getDevicePixcelRatio() {
            var mediaQuery;
            var is_firefox = navigator.userAgent.toLowerCase().indexOf("firefox") > -1;
            if (null != window.devicePixelRatio && !is_firefox) {
                return window.devicePixelRatio;
            }
            else if (window.matchMedia) {
                mediaQuery =
                    "(-webkit-min-device-pixel-ratio: 1.5),\
                    (min--moz-device-pixel-ratio: 1.5),\
                    (-o-min-device-pixel-ratio: 3/2),\
                    (min-resolution: 1.5dppx)";
                if (window.matchMedia(mediaQuery).matches) {
                    return 1.5;
                }
                mediaQuery =
                    "(-webkit-min-device-pixel-ratio: 2),\
                    (min--moz-device-pixel-ratio: 2),\
                    (-o-min-device-pixel-ratio: 2/1),\
                    (min-resolution: 2dppx)";
                if (window.matchMedia(mediaQuery).matches) {
                    return 2;
                }
                mediaQuery =
                    "(-webkit-min-device-pixel-ratio: 0.75),\
                    (min--moz-device-pixel-ratio: 0.75),\
                    (-o-min-device-pixel-ratio: 3/4),\
                    (min-resolution: 0.75dppx)";
                if (window.matchMedia(mediaQuery).matches) {
                    return 0.7;
                }
            }
            else {
                return 1;
            }
        }
        Tools.getDevicePixcelRatio = getDevicePixcelRatio;
    })(Tools = CDP.Tools || (CDP.Tools = {}));
})(CDP || (CDP = {}));
/// <reference types="jquery" />
/// <reference types="underscore" />
var CDP;
(function (CDP) {
    var Tools;
    (function (Tools) {
        var TAG = "[CDP.Tools.Template] ";
        //___________________________________________________________________________________________________________________//
        /**
         * @class Template
         * @brief template script を管理するユーティリティクラス
         */
        var Template = (function () {
            function Template() {
            }
            ///////////////////////////////////////////////////////////////////////
            // 公開メソッド
            /**
             * 指定した id, class 名, Tag 名をキーにテンプレートの JQuery Element を取得する。
             *
             * @param {String}  key     [in] id, class, tag を表す文字列
             * @param {String}  [src]   [in] 外部 html を指定する場合は url を設定
             * @param {Boolean} [cache] [in] src html をキャッシュする場合は true. src が指定されているときのみ有効
             * @return template が格納されている JQuery Element
             */
            Template.getTemplateElement = function (key, src, cache) {
                if (src === void 0) { src = null; }
                if (cache === void 0) { cache = true; }
                var mapElement = Template.getElementMap();
                var $element = mapElement[key];
                try {
                    if (!$element) {
                        if (src) {
                            var html = Template.findHtmlFromSource(src);
                            $element = $(html).find(key);
                        }
                        else {
                            $element = $(key);
                        }
                        // 要素の検証
                        if ($element <= 0) {
                            throw ("invalid [key, src] = [" + key + ", " + src + "]");
                        }
                        if (src && cache) {
                            mapElement[key] = $element;
                        }
                    }
                }
                catch (exception) {
                    console.error(TAG + exception);
                    return null;
                }
                return $element;
            };
            /**
             * Map オブジェクトの削除
             * 明示的にキャッシュを開放する場合は本メソッドをコールする
             */
            Template.empty = function () {
                Template._mapElement = null;
                Template._mapSource = null;
            };
            Template.getJST = function (key, src, cache) {
                var template = null;
                var jst;
                var $element;
                if (key instanceof jQuery) {
                    $element = key;
                }
                else {
                    $element = Template.getTemplateElement(key, src, cache);
                }
                if (null != Tools.global.Hogan) {
                    template = Hogan.compile($element.text());
                    jst = function (data) {
                        return template.render(data);
                    };
                }
                else {
                    template = _.template($element.html());
                    jst = function (data) {
                        // 改行とタブは削除する
                        return template(data).replace(/\n|\t/g, "");
                    };
                }
                return jst;
            };
            ///////////////////////////////////////////////////////////////////////
            // 内部メソッド
            //! Element Map オブジェクトの取得
            Template.getElementMap = function () {
                if (!Template._mapElement) {
                    Template._mapElement = {};
                }
                return Template._mapElement;
            };
            //! URL Map オブジェクトの取得
            Template.getSourceMap = function () {
                if (!Template._mapSource) {
                    Template._mapSource = {};
                }
                return Template._mapSource;
            };
            //! URL Map から HTML を検索. 失敗した場合は undefined が返る
            Template.findHtmlFromSource = function (src) {
                var mapSource = Template.getSourceMap();
                var html = mapSource[src];
                if (!html) {
                    $.ajax({
                        url: src,
                        method: "GET",
                        async: false,
                        dataType: "html",
                        success: function (data) {
                            html = data;
                        },
                        error: function (data, status) {
                            throw ("ajax request failed. status: " + status);
                        }
                    });
                    // キャッシュに格納
                    mapSource[src] = html;
                }
                return html;
            };
            return Template;
        }());
        Tools.Template = Template;
    })(Tools = CDP.Tools || (CDP.Tools = {}));
})(CDP || (CDP = {}));

return CDP.Tools; }));
/*!
 * cdp.ui.listview.js 2.0.0
 *
 * Date: 2017-07-24T05:05:38.226Z
 */
(function (root, factory) { if (typeof define === "function" && define.amd) { define("cdp.ui.listview",["jquery", "underscore", "backbone"], function ($, _, Backbone) { return factory(root.CDP || (root.CDP = {}), $, _, Backbone); }); } else if (typeof exports === "object") { module.exports = factory(root.CDP || (root.CDP = {}), require("jquery"), require("underscore"), require("backbone")); } else { factory(root.CDP || (root.CDP = {}), root.$, root._, root.Backbone); } }(((this || 0).self || global), function (CDP, $, _, Backbone) { CDP.UI = CDP.UI || {};
/// <reference types="jquery" />
/// <reference types="backbone" />
var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        /**
         * @class ListViewGlobalConfig
         * @brief cdp.ui.listview の global confing
         */
        var ListViewGlobalConfig;
        (function (ListViewGlobalConfig) {
            ListViewGlobalConfig.WRAPPER_CLASS = "ui-listview-wrapper";
            ListViewGlobalConfig.WRAPPER_SELECTOR = "." + ListViewGlobalConfig.WRAPPER_CLASS;
            ListViewGlobalConfig.SCROLL_MAP_CLASS = "ui-listview-scroll-map";
            ListViewGlobalConfig.SCROLL_MAP_SELECTOR = "." + ListViewGlobalConfig.SCROLL_MAP_CLASS;
            ListViewGlobalConfig.INACTIVE_CLASS = "inactive";
            ListViewGlobalConfig.INACTIVE_CLASS_SELECTOR = "." + ListViewGlobalConfig.INACTIVE_CLASS;
            ListViewGlobalConfig.RECYCLE_CLASS = "ui-listview-recycle";
            ListViewGlobalConfig.RECYCLE_CLASS_SELECTOR = "." + ListViewGlobalConfig.RECYCLE_CLASS;
            ListViewGlobalConfig.LISTITEM_BASE_CLASS = "ui-listview-item-base";
            ListViewGlobalConfig.LISTITEM_BASE_CLASS_SELECTOR = "." + ListViewGlobalConfig.LISTITEM_BASE_CLASS;
            ListViewGlobalConfig.DATA_PAGE_INDEX = "data-page-index";
            ListViewGlobalConfig.DATA_CONTAINER_INDEX = "data-container-index";
        })(ListViewGlobalConfig = UI.ListViewGlobalConfig || (UI.ListViewGlobalConfig = {}));
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));
var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        // cdp.ui.listview は cdp.core に依存しないため、独自にglobal を提供する
        /*jshint evil:true */
        UI.global = CDP.global || Function("return this")();
        /*jshint evil:false */
        /**
         * Backbone.View の新規合成
         *
         * @param base    {Backbone.View}                 [in] prototype chain 最下位の View クラス
         * @param derives {Backbone.View|Backbone.View[]} [in] 派生されるの View クラス
         * @return {Backbone.View|Backbone.View[]} 新規に生成された View のコンストラクタ
         */
        function composeViews(base, derives) {
            var _composed = base;
            var _derives = (derives instanceof Array ? derives : [derives]);
            _derives.forEach(function (derive) {
                var seed = {};
                _.extendOwn(seed, derive.prototype);
                delete seed.constructor;
                _composed = _composed.extend(seed);
            });
            return _composed;
        }
        UI.composeViews = composeViews;
        /**
         * Backbone.View の合成
         * prototype chain を作る合成
         *
         * @param derived {Backbone.View}                 [in] prototype chain 最上位の View クラス
         * @param bases   {Backbone.View|Backbone.View[]} [in] 合成元のView クラス
         */
        function deriveViews(derived, bases) {
            var _composed;
            var _bases = (bases instanceof Array ? bases : [bases]);
            if (2 <= _bases.length) {
                _composed = composeViews(_bases[0], _bases.slice(1));
            }
            else {
                _composed = _bases[0];
            }
            derived = composeViews(_composed, derived);
        }
        UI.deriveViews = deriveViews;
        /**
         * Backbone.View の合成
         * prototype chain を作らない合成
         *
         * @param derived {Backbone.View}                 [in] 元となる View クラス
         * @param bases   {Backbone.View|Backbone.View[]} [in] 合成元のView クラス
         */
        function mixinViews(derived, bases) {
            var _bases = (bases instanceof Array ? bases : [bases]);
            _bases.forEach(function (base) {
                Object.getOwnPropertyNames(base.prototype).forEach(function (name) {
                    derived.prototype[name] = base.prototype[name];
                });
            });
        }
        UI.mixinViews = mixinViews;
        //___________________________________________________________________________________________________________________//
        /**
         * @class _ListViewUtils
         * @brief 内部で使用する便利関数
         *        Tools からの最低限の流用
         */
        var _ListViewUtils;
        (function (_ListViewUtils) {
            /**
             * css の vender 拡張 prefix を返す
             *
             * @return {Array} prefix
             */
            _ListViewUtils.cssPrefixes = ["-webkit-", "-moz-", "-ms-", "-o-", ""];
            /**
             * css の matrix の値を取得.
             *
             * @param element {jQuery} [in] 対象の jQuery オブジェクト
             * @param type    {String} [in] matrix type string [translateX | translateY | scaleX | scaleY]
             * @return {Number} value
             */
            _ListViewUtils.getCssMatrixValue = function (element, type) {
                var transX = 0;
                var transY = 0;
                var scaleX = 0;
                var scaleY = 0;
                for (var i = 0; i < _ListViewUtils.cssPrefixes.length; i++) {
                    var matrix = $(element).css(_ListViewUtils.cssPrefixes[i] + "transform");
                    if (matrix) {
                        var is3dMatrix = matrix.indexOf("3d") !== -1 ? true : false;
                        matrix = matrix.replace("matrix3d", "").replace("matrix", "").replace(/[^\d.,-]/g, "");
                        var arr = matrix.split(",");
                        transX = Number(arr[is3dMatrix ? 12 : 4]);
                        transY = Number(arr[is3dMatrix ? 13 : 5]);
                        scaleX = Number(arr[0]);
                        scaleY = Number(arr[is3dMatrix ? 5 : 3]);
                        break;
                    }
                }
                switch (type) {
                    case "translateX":
                        return isNaN(transX) ? 0 : transX;
                    case "translateY":
                        return isNaN(transY) ? 0 : transY;
                    case "scaleX":
                        return isNaN(scaleX) ? 1 : scaleX;
                    case "scaleY":
                        return isNaN(scaleY) ? 1 : scaleY;
                    default:
                        return 0;
                }
            };
            /**
             * "transitionend" のイベント名配列を返す
             *
             * @return {Array} transitionend イベント名
             */
            _ListViewUtils.transitionEnd = "transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd";
            /**
             * transition 設定
             *
             * @private
             * @param {Object} element
             */
            _ListViewUtils.setTransformsTransitions = function (element, prop, msec, timingFunction) {
                var $element = $(element);
                var transitions = {};
                var second = (msec / 1000) + "s";
                var animation = " " + second + " " + timingFunction;
                var transform = ", transform" + animation;
                for (var i = 0; i < _ListViewUtils.cssPrefixes.length; i++) {
                    transitions[_ListViewUtils.cssPrefixes[i] + "transition"] = prop + animation + transform;
                }
                $element.css(transitions);
            };
            /**
             * transition 設定の削除
             *
             * @private
             * @param {Object} element
             */
            _ListViewUtils.clearTransitions = function (element) {
                var $element = $(element);
                $element.off(_ListViewUtils.transitionEnd);
                var transitions = {};
                for (var i = 0; i < _ListViewUtils.cssPrefixes.length; i++) {
                    transitions[_ListViewUtils.cssPrefixes[i] + "transition"] = "";
                }
                $element.css(transitions);
            };
            /**
             * Math.abs よりも高速な abs
             */
            _ListViewUtils.abs = function (x) {
                return x >= 0 ? x : -x;
            };
            /**
             * Math.max よりも高速な max
             */
            _ListViewUtils.max = function (lhs, rhs) {
                return lhs >= rhs ? lhs : rhs;
            };
        })(_ListViewUtils = UI._ListViewUtils || (UI._ListViewUtils = {}));
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));
var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var TAG = "[CDP.UI.StatusManager] ";
        /**
         * @class StatusManager
         * @brief UI 用状態管理クラス
         *        StatusManager のインスタンスごとに任意の状態管理ができる
         *
         */
        var StatusManager = (function () {
            function StatusManager() {
                this._status = {}; //!< statusScope() に使用される状態管理オブジェクト
            }
            ///////////////////////////////////////////////////////////////////////
            // Implements: IStatusManager
            //! 状態変数の参照カウントのインクリメント
            StatusManager.prototype.statusAddRef = function (status) {
                if (!this._status[status]) {
                    this._status[status] = 1;
                }
                else {
                    this._status[status]++;
                }
                return this._status[status];
            };
            //! 状態変数の参照カウントのデクリメント
            StatusManager.prototype.statusRelease = function (status) {
                var retval;
                if (!this._status[status]) {
                    retval = 0;
                }
                else {
                    this._status[status]--;
                    retval = this._status[status];
                    if (0 === retval) {
                        delete this._status[status];
                    }
                }
                return retval;
            };
            //! 処理スコープ毎に状態変数を設定
            StatusManager.prototype.statusScope = function (status, callback) {
                var _this = this;
                this.statusAddRef(status);
                var promise = callback();
                if (!promise) {
                    this.statusRelease(status);
                }
                else {
                    promise.then(function () {
                        _this.statusRelease(status);
                    }, function () {
                        _this.statusRelease(status);
                    });
                }
            };
            //! 指定した状態中であるか確認
            StatusManager.prototype.isStatusIn = function (status) {
                return !!this._status[status];
            };
            return StatusManager;
        }());
        UI.StatusManager = StatusManager;
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));
var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var _Config = CDP.UI.ListViewGlobalConfig;
        var _ToolCSS = CDP.UI._ListViewUtils;
        var TAG = "[CDP.UI.LineProfile] ";
        /**
         * @class LineProfile
         * @brief 1 ラインに関するプロファイルクラス
         *        framework が使用する
         */
        var LineProfile = (function () {
            /**
             * constructor
             *
             * @param _owner       {IListViewFramework} [in] 管理者である IListViewFramework インスタンス
             * @param _height      {Number}             [in] 初期の高さ
             * @param _initializer {Function}           [in] ListItemView 派生クラスのコンストラクタ
             * @param _info        {Object}             [in] ListItemView コンストラクタに渡されるオプション
             */
            function LineProfile(_owner, _height, _initializer, _info) {
                this._owner = _owner;
                this._height = _height;
                this._initializer = _initializer;
                this._info = _info;
                this._index = null; //!< global index
                this._pageIndex = null; //!< 所属する page index
                this._offset = null; //!< global offset
                this._$base = null; //!< 土台となる DOM インスタンスを格納
                this._instance = null; //!< ListItemView インスタンスを格納
            }
            ///////////////////////////////////////////////////////////////////////
            // public methods
            //! 有効化
            LineProfile.prototype.activate = function () {
                if (null == this._instance) {
                    var options = void 0;
                    this._$base = this.prepareBaseElement();
                    options = $.extend({}, {
                        el: this._$base,
                        owner: this._owner,
                        lineProfile: this,
                    }, this._info);
                    this._instance = new this._initializer(options);
                    if ("none" === this._$base.css("display")) {
                        this._$base.css("display", "block");
                    }
                }
                this.updatePageIndex(this._$base);
                if ("visible" !== this._$base.css("visibility")) {
                    this._$base.css("visibility", "visible");
                }
            };
            //! 不可視化
            LineProfile.prototype.hide = function () {
                if (null == this._instance) {
                    this.activate();
                }
                if ("hidden" !== this._$base.css("visibility")) {
                    this._$base.css("visibility", "hidden");
                }
            };
            //! 無効化
            LineProfile.prototype.inactivate = function () {
                if (null != this._instance) {
                    // xperia AX Jelly Bean (4.1.2)にて、 hidden element の削除でメモリーリークするため可視化する。
                    if ("visible" !== this._$base.css("visibility")) {
                        this._$base.css("visibility", "visible");
                    }
                    this._instance.remove();
                    this._instance = null;
                    this._$base.addClass(_Config.RECYCLE_CLASS);
                    this._$base.css("display", "none");
                    this._$base = null;
                }
            };
            //! 更新
            LineProfile.prototype.refresh = function () {
                if (null != this._instance) {
                    this._instance.render();
                }
            };
            //! 有効無効判定
            LineProfile.prototype.isActive = function () {
                return null != this._instance;
            };
            //! 高さ情報の更新. ListItemView からコールされる。
            LineProfile.prototype.updateHeight = function (newHeight, options) {
                var delta = newHeight - this._height;
                this._height = newHeight;
                this._owner.updateScrollMapHeight(delta);
                if (null != options && options.reflectAll) {
                    this._owner.updateProfiles(this._index);
                }
            };
            //! z-index のリセット. ScrollManager.removeItem() からコールされる。
            LineProfile.prototype.resetDepth = function () {
                if (null != this._instance) {
                    this._$base.css("z-index", this._owner.getListViewOptions().baseDepth);
                }
            };
            Object.defineProperty(LineProfile.prototype, "height", {
                ///////////////////////////////////////////////////////////////////////
                // getter/setter methods
                //! getter: ラインの高さ
                get: function () {
                    return this._height;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(LineProfile.prototype, "index", {
                //! getter: global index
                get: function () {
                    return this._index;
                },
                //! setter: global index
                set: function (index) {
                    this._index = index;
                    if (null != this._$base) {
                        this.updateIndex(this._$base);
                    }
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(LineProfile.prototype, "pageIndex", {
                //! getter: 所属ページ index
                get: function () {
                    return this._pageIndex;
                },
                //! setter: 所属ページ index
                set: function (index) {
                    this._pageIndex = index;
                    if (null != this._$base) {
                        this.updatePageIndex(this._$base);
                    }
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(LineProfile.prototype, "offset", {
                //! getter: line offset
                get: function () {
                    return this._offset;
                },
                //! setter: line offset
                set: function (offset) {
                    this._offset = offset;
                    if (null != this._$base) {
                        this.updateOffset(this._$base);
                    }
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(LineProfile.prototype, "info", {
                //! getter: info
                get: function () {
                    return this._info;
                },
                enumerable: true,
                configurable: true
            });
            ///////////////////////////////////////////////////////////////////////
            // private methods
            //! Base jQuery オブジェクトの生成
            LineProfile.prototype.prepareBaseElement = function () {
                var $base;
                var $map = this._owner.getScrollMapElement();
                var $recycle = this._owner.findRecycleElements().first();
                var itemTagName = this._owner.getListViewOptions().itemTagName;
                if (null != this._$base) {
                    console.warn(TAG + "this._$base is not null.");
                    return this._$base;
                }
                if (0 < $recycle.length) {
                    $base = $recycle;
                    $base.removeAttr("z-index");
                    $base.removeClass(_Config.RECYCLE_CLASS);
                }
                else {
                    $base = $("<" + itemTagName + " class='" + _Config.LISTITEM_BASE_CLASS + "'></" + itemTagName + ">");
                    $base.css("display", "none");
                    $map.append($base);
                }
                // 高さの更新
                if ($base.height() !== this._height) {
                    $base.height(this._height);
                }
                // index の設定
                this.updateIndex($base);
                // offset の更新
                this.updateOffset($base);
                return $base;
            };
            //! global index の更新
            LineProfile.prototype.updateIndex = function ($base) {
                if ($base.attr(_Config.DATA_CONTAINER_INDEX) !== this._index.toString()) {
                    $base.attr(_Config.DATA_CONTAINER_INDEX, this._index.toString());
                }
            };
            //! page index の更新
            LineProfile.prototype.updatePageIndex = function ($base) {
                if ($base.attr(_Config.DATA_PAGE_INDEX) !== this._pageIndex.toString()) {
                    $base.attr(_Config.DATA_PAGE_INDEX, this._pageIndex.toString());
                }
            };
            //! offset の更新
            LineProfile.prototype.updateOffset = function ($base) {
                var transform = {};
                if (this._owner.getListViewOptions().enableTransformOffset) {
                    if (_ToolCSS.getCssMatrixValue($base, "translateY") !== this._offset) {
                        for (var i = 0; i < _ToolCSS.cssPrefixes.length; i++) {
                            transform[_ToolCSS.cssPrefixes[i] + "transform"] = "translate3d(0px," + this._offset + "px,0px)";
                        }
                        $base.css(transform);
                    }
                }
                else {
                    if (parseInt($base.css("top"), 10) !== this._offset) {
                        $base.css("top", this._offset + "px");
                    }
                }
            };
            return LineProfile;
        }());
        UI.LineProfile = LineProfile;
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));
var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var TAG = "[CDP.UI.PageProfile] ";
        /**
         * @class PageProfile
         * @brief 1 ページに関するプロファイルクラス
         *        framework が使用する
         *        本クラスでは直接 DOM を操作してはいけない
         */
        var PageProfile = (function () {
            function PageProfile() {
                this._index = 0; //!< page index
                this._offset = 0; //!< page の Top からのオフセット
                this._height = 0; //!< page の高さ
                this._lines = []; //!< page 内で管理される LineProfile
                this._status = "inactive"; //!< page の状態 [ inactive | hidden | active ]
            }
            ///////////////////////////////////////////////////////////////////////
            // public methods
            //! 有効化
            PageProfile.prototype.activate = function () {
                if ("active" !== this._status) {
                    this._lines.forEach(function (line) {
                        line.activate();
                    });
                }
                this._status = "active";
            };
            //! 無可視化
            PageProfile.prototype.hide = function () {
                if ("hidden" !== this._status) {
                    this._lines.forEach(function (line) {
                        line.hide();
                    });
                }
                this._status = "hidden";
            };
            //! 無効化
            PageProfile.prototype.inactivate = function () {
                if ("inactive" !== this._status) {
                    this._lines.forEach(function (line) {
                        line.inactivate();
                    });
                }
                this._status = "inactive";
            };
            //! LineProfile を設定
            PageProfile.prototype.push = function (line) {
                this._lines.push(line);
                this._height += line.height;
            };
            //! 配下の LineProfile すべてが有効でない場合、Page ステータスを無効にする
            PageProfile.prototype.normalize = function () {
                var enableAll = _.every(this._lines, function (line) {
                    return line.isActive();
                });
                if (!enableAll) {
                    this._status = "inactive";
                }
            };
            //! LineProfile を取得
            PageProfile.prototype.getLineProfile = function (index) {
                if (0 <= index && index < this._lines.length) {
                    return this._lines[index];
                }
                else {
                    return null;
                }
            };
            //! 最初の LineProfile を取得
            PageProfile.prototype.getLineProfileFirst = function () {
                return this.getLineProfile(0);
            };
            //! 最後の LineProfile を取得
            PageProfile.prototype.getLineProfileLast = function () {
                return this.getLineProfile(this._lines.length - 1);
            };
            Object.defineProperty(PageProfile.prototype, "index", {
                ///////////////////////////////////////////////////////////////////////
                // getter/setter methods
                //! getter: page index
                get: function () {
                    return this._index;
                },
                //! setter: page index
                set: function (index) {
                    this._index = index;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(PageProfile.prototype, "offset", {
                //! getter: page offset
                get: function () {
                    return this._offset;
                },
                //! setter: page offset
                set: function (offset) {
                    this._offset = offset;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(PageProfile.prototype, "height", {
                //! getter: 実際にページに割り当てられている高さ
                get: function () {
                    return this._height;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(PageProfile.prototype, "status", {
                //! getter: 状態取得
                get: function () {
                    return this._status;
                },
                enumerable: true,
                configurable: true
            });
            return PageProfile;
        }());
        UI.PageProfile = PageProfile;
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));
var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var TAG = "[CDP.UI.GroupProfile] ";
        /**
         * @class GroupProfile
         * @brief ラインをグループ管理するプロファイルクラス
         *        本クラスでは直接 DOM を操作してはいけない
         */
        var GroupProfile = (function () {
            /**
             * constructor
             *
             * @param _id    {String}             [in] GroupProfile の ID
             * @param _owner {ExpandableListView} [in] 管理者である ExpandableListView インスタンス
             */
            function GroupProfile(_id, _owner) {
                this._id = _id;
                this._owner = _owner;
                this._parent = null; //!< 親 GroupProfile インスタンス
                this._children = []; //!< 子 GroupProfile インスタンス
                this._expanded = false; //!< 開閉情報
                this._status = "unregistered"; //!< _owner への登録状態 [ unregistered | registered ]
                this._mapLines = {}; //!< 自身が管轄する LineProfile を key とともに格納
            }
            ///////////////////////////////////////////////////////////////////////
            // public method
            /**
             * 本 GroupProfile が管理する List を作成して登録
             *
             * @param height      {Number}   [in] ラインの高さ
             * @param initializer {Function} [in] ListItemView 派生クラスのコンストラクタ
             * @param info        {Object}   [in] initializer に渡されるオプション引数
             * @param layoutKey   {String}   [in] layout 毎に使用する識別子 (オプショナル)
             * @return {GroupProfile} 本インスタンス
             */
            GroupProfile.prototype.addItem = function (height, initializer, info, layoutKey) {
                var line;
                var options = $.extend({}, { groupProfile: this }, info);
                if (null == layoutKey) {
                    layoutKey = GroupProfile.LAYOUT_KEY_DEFAULT;
                }
                if (null == this._mapLines[layoutKey]) {
                    this._mapLines[layoutKey] = [];
                }
                line = new UI.LineProfile(this._owner.core, Math.floor(height), initializer, options);
                // _owner の管理下にあるときは速やかに追加
                if (("registered" === this._status) &&
                    (null == this._owner.layoutKey || layoutKey === this._owner.layoutKey)) {
                    this._owner._addLine(line, this.getLastLineIndex() + 1);
                    this._owner.update();
                }
                this._mapLines[layoutKey].push(line);
                return this;
            };
            GroupProfile.prototype.addChildren = function (target) {
                var _this = this;
                var children = (target instanceof Array) ? target : [target];
                children.forEach(function (child) {
                    child.setParent(_this);
                });
                this._children = this._children.concat(children);
                return this;
            };
            /**
             * 親 GroupProfile を取得
             *
             * @return {GroupProfile} GroupProfile 親 インスタンス
             */
            GroupProfile.prototype.getParent = function () {
                return this._parent;
            };
            /**
             * 子 GroupProfile を取得
             *
             * @return {GroupProfile[]} GroupProfile 子 インスタンス配列
             */
            GroupProfile.prototype.getChildren = function () {
                return this._children;
            };
            /**
             * 子 Group を持っているか判定
             * layoutKey が指定されれば、layout の状態まで判定
             *
             * @param layoutKey {String} [in] layout 毎に使用する識別子 (オプショナル)
             * @return {Boolean} true: 有, false: 無
             */
            GroupProfile.prototype.hasChildren = function (layoutKey) {
                if (this._children.length <= 0) {
                    return false;
                }
                else if (null != layoutKey) {
                    return this._children[0].hasLayoutKeyOf(layoutKey);
                }
                else {
                    return true;
                }
            };
            /**
             * layout の状態を判定
             *
             * @param layoutKey {String} [in] layout 毎に使用する識別子
             * @return {Boolean} true: 有, false: 無
             */
            GroupProfile.prototype.hasLayoutKeyOf = function (layoutKey) {
                if (null == layoutKey) {
                    layoutKey = GroupProfile.LAYOUT_KEY_DEFAULT;
                }
                return (null != this._mapLines[layoutKey]);
            };
            /**
             * グループ展開
             */
            GroupProfile.prototype.expand = function () {
                var _this = this;
                var lines = [];
                if (this._lines.length < 0) {
                    console.warn(TAG + "this group has no lines.");
                }
                else if (!this.hasChildren()) {
                    console.warn(TAG + "this group has no children.");
                }
                else if (!this.isExpanded()) {
                    lines = this.queryOperationTarget("registered");
                    this._expanded = true;
                    if (0 < lines.length) {
                        this._owner.statusScope("expanding", function () {
                            // 自身を更新
                            _this._lines.forEach(function (line) {
                                line.refresh();
                            });
                            // 配下を更新
                            _this._owner._addLine(lines, _this.getLastLineIndex() + 1);
                            _this._owner.update();
                        });
                    }
                }
            };
            /**
             * グループ収束
             *
             * @param delay {Number} [in] 要素削除に費やす遅延時間. 既定: animationDuration 値
             */
            GroupProfile.prototype.collapse = function (delay) {
                var _this = this;
                var lines = [];
                if (!this.hasChildren()) {
                    console.warn(TAG + "this group has no children.");
                }
                else if (this.isExpanded()) {
                    lines = this.queryOperationTarget("unregistered");
                    this._expanded = false;
                    if (0 < lines.length) {
                        delay = (null != delay) ? delay : this._owner.core.getListViewOptions().animationDuration;
                        this._owner.statusScope("collapsing", function () {
                            // 自身を更新
                            _this._lines.forEach(function (line) {
                                line.refresh();
                            });
                            // 配下を更新
                            _this._owner.removeItem(lines[0].index, lines.length, delay);
                            _this._owner.update();
                        });
                    }
                }
            };
            /**
             * 自身をリストの可視領域に表示
             *
             * @param options {EnsureVisibleOptions} [in] オプション
             */
            GroupProfile.prototype.ensureVisible = function (options) {
                if (0 < this._lines.length) {
                    this._owner.ensureVisible(this._lines[0].index, options);
                }
                else if (null != options.callback) {
                    options.callback();
                }
            };
            /**
             * 開閉のトグル
             *
             * @param delay {Number} [in] collapse の要素削除に費やす遅延時間. 既定: animationDuration 値
             */
            GroupProfile.prototype.toggle = function (delay) {
                if (this._expanded) {
                    this.collapse(delay);
                }
                else {
                    this.expand();
                }
            };
            /**
             * 展開状態を判定
             *
             * @return {Boolean} true: 展開, false:収束
             */
            GroupProfile.prototype.isExpanded = function () {
                return this._expanded;
            };
            /**
             * list view へ登録
             * Top Group のみ登録可能
             *
             * @param insertTo {Number} 挿入位置を index で指定
             * @return {GroupProfile} 本インスタンス
             */
            GroupProfile.prototype.register = function (insertTo) {
                if (this._parent) {
                    console.error(TAG + "logic error: 'register' method is acceptable only top group.");
                }
                else {
                    this._owner._addLine(this.preprocess("registered"), insertTo);
                }
                return this;
            };
            /**
             * list view へ復元
             * Top Group のみ登録可能
             *
             * @return {GroupProfile} 本インスタンス
             */
            GroupProfile.prototype.restore = function () {
                var lines = [];
                if (this._parent) {
                    console.error(TAG + "logic error: 'restore' method is acceptable only top group.");
                }
                else if (this._lines) {
                    if (this._expanded) {
                        lines = this._lines.concat(this.queryOperationTarget("active"));
                    }
                    else {
                        lines = this._lines;
                    }
                    this._owner._addLine(lines);
                }
                return this;
            };
            /**
             * 配下の最後の line index を取得
             *
             * @param withActiveChildren {Boolean} [in] 登録済みの子 GroupProfile を含めて検索する場合は true を指定
             * @return {Number} index. エラーの場合は null.
             */
            GroupProfile.prototype.getLastLineIndex = function (withActiveChildren) {
                var _this = this;
                if (withActiveChildren === void 0) { withActiveChildren = false; }
                var lines = (function () {
                    var _lines;
                    if (withActiveChildren) {
                        _lines = _this.queryOperationTarget("active");
                    }
                    if (null == lines || lines.length <= 0) {
                        _lines = _this._lines;
                    }
                    return _lines;
                })();
                if (lines.length <= 0) {
                    console.error(TAG + "logic error: this group is stil not registered.");
                    return null;
                }
                else {
                    return lines[lines.length - 1].index;
                }
            };
            Object.defineProperty(GroupProfile.prototype, "id", {
                /**
                 * ID を取得
                 *
                 * @return {String} 割り振られた ID
                 */
                get: function () {
                    return this._id;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(GroupProfile.prototype, "status", {
                /**
                 * ステータスを取得
                 *
                 * @return {String} ステータス文字列
                 */
                get: function () {
                    return this._status;
                },
                enumerable: true,
                configurable: true
            });
            ///////////////////////////////////////////////////////////////////////
            // private method
            /* tslint:disable:no-unused-variable */
            /**
             * 親 Group 指定
             *
             * @param parent {GroupProfile} [in] 親 GroupProfile インスタンス
             */
            GroupProfile.prototype.setParent = function (parent) {
                this._parent = parent;
            };
            /* tslint:enable:no-unused-variable */
            /**
             * register / unregister の前処理
             *
             * @param newStatus {String} [in] 新ステータス文字列
             * @return {LineProfile[]} 更新すべき LineProfile の配列
             */
            GroupProfile.prototype.preprocess = function (newStatus) {
                var lines = [];
                if (newStatus !== this._status && null != this._lines) {
                    lines = this._lines;
                }
                this._status = newStatus;
                return lines;
            };
            /**
             * 操作対象の LineProfile 配列を取得
             *
             * @param newStatus {String} [in] 新ステータス文字列
             * @return {LineProfile[]} 操作対象の LineProfile の配列
             */
            GroupProfile.prototype.queryOperationTarget = function (operation) {
                var findTargets = function (group) {
                    var lines = [];
                    group._children.forEach(function (child) {
                        switch (operation) {
                            case "registered":
                                lines = lines.concat(child.preprocess(operation));
                                break;
                            case "unregistered":
                                lines = lines.concat(child.preprocess(operation));
                                break;
                            case "active":
                                if (null != child._lines) {
                                    lines = lines.concat(child._lines);
                                }
                                break;
                            default:
                                console.warn(TAG + "unknown operation: " + operation);
                                return;
                        }
                        if (child.isExpanded()) {
                            lines = lines.concat(findTargets(child));
                        }
                    });
                    return lines;
                };
                return findTargets(this);
            };
            Object.defineProperty(GroupProfile.prototype, "_lines", {
                /**
                 * 自身の管理するアクティブな LineProfie を取得
                 *
                 * @return {LineProfile[]} LineProfie 配列
                 */
                get: function () {
                    var key = this._owner.layoutKey;
                    if (null != key) {
                        return this._mapLines[key];
                    }
                    else {
                        return this._mapLines[GroupProfile.LAYOUT_KEY_DEFAULT];
                    }
                },
                enumerable: true,
                configurable: true
            });
            GroupProfile.LAYOUT_KEY_DEFAULT = "-layout-default";
            return GroupProfile;
        }());
        UI.GroupProfile = GroupProfile;
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));
var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var _Utils = CDP.UI._ListViewUtils;
        var TAG = "[CDP.UI.ScrollerElement] ";
        /**
         * @class ScrollerElement
         * @brief HTMLElement の Scroller クラス
         */
        var ScrollerElement = (function () {
            function ScrollerElement(element, options) {
                this._$target = null;
                this._$scrollMap = null;
                this._listviewOptions = null;
                this._$target = $(element);
                this._listviewOptions = options;
            }
            //! Scroller の型を取得
            ScrollerElement.prototype.getType = function () {
                return ScrollerElement.TYPE;
            };
            //! position 取得
            ScrollerElement.prototype.getPos = function () {
                return this._$target.scrollTop();
            };
            //! position の最大値を取得
            ScrollerElement.prototype.getPosMax = function () {
                if (null == this._$scrollMap) {
                    this._$scrollMap = this._$target.children().first();
                }
                return _Utils.max(this._$scrollMap.height() - this._$target.height(), 0);
            };
            //! イベント登録
            ScrollerElement.prototype.on = function (type, func) {
                switch (type) {
                    case "scroll":
                        this._$target.on("scroll", func);
                        break;
                    case "scrollstop":
                        this._$target.on("scrollstop", func);
                        break;
                    default:
                        console.warn(TAG + "unsupported type: " + type);
                        break;
                }
            };
            //! イベント登録解除
            ScrollerElement.prototype.off = function (type, func) {
                switch (type) {
                    case "scroll":
                        this._$target.off("scroll", func);
                        break;
                    case "scrollstop":
                        this._$target.off("scrollstop", func);
                        break;
                    default:
                        console.warn(TAG + "unsupported type: " + type);
                        break;
                }
            };
            //! スクロール位置を指定
            ScrollerElement.prototype.scrollTo = function (pos, animate, time) {
                if (!this._listviewOptions.enableAnimation || !animate) {
                    this._$target.scrollTop(pos);
                }
                else {
                    if (null == time) {
                        time = this._listviewOptions.animationDuration;
                    }
                    this._$target.animate({
                        scrollTop: pos
                    }, time);
                }
            };
            //! Scroller の状態更新
            ScrollerElement.prototype.update = function () {
                // noop.
            };
            //! Scroller の破棄
            ScrollerElement.prototype.destroy = function () {
                this._$scrollMap = null;
                if (this._$target) {
                    this._$target.off();
                    this._$target = null;
                }
            };
            Object.defineProperty(ScrollerElement, "TYPE", {
                //! タイプ定義
                get: function () {
                    return "element-overflow";
                },
                enumerable: true,
                configurable: true
            });
            //! factory 取得
            ScrollerElement.getFactory = function () {
                var factory = function (element, options) {
                    return new ScrollerElement(element, options);
                };
                // set type signature.
                factory.type = ScrollerElement.TYPE;
                return factory;
            };
            return ScrollerElement;
        }());
        UI.ScrollerElement = ScrollerElement;
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));
var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var _Utils = CDP.UI._ListViewUtils;
        var TAG = "[CDP.UI.ScrollerNative] ";
        /**
         * @class ScrollerNative
         * @brief Browser Native の Scroller クラス
         */
        var ScrollerNative = (function () {
            //! constructor
            function ScrollerNative(options) {
                this._$body = null;
                this._$target = null;
                this._$scrollMap = null;
                this._listviewOptions = null;
                this._$target = $(document);
                this._$body = $("body");
                this._listviewOptions = options;
            }
            //! Scroller の型を取得
            ScrollerNative.prototype.getType = function () {
                return ScrollerNative.TYPE;
            };
            //! position 取得
            ScrollerNative.prototype.getPos = function () {
                return this._$target.scrollTop();
            };
            //! position の最大値を取得
            ScrollerNative.prototype.getPosMax = function () {
                return _Utils.max(this._$target.height() - window.innerHeight, 0);
            };
            //! イベント登録
            ScrollerNative.prototype.on = function (type, func) {
                switch (type) {
                    case "scroll":
                        this._$target.on("scroll", func);
                        break;
                    case "scrollstop":
                        $(window).on("scrollstop", func);
                        break;
                    default:
                        console.warn(TAG + "unsupported type: " + type);
                        break;
                }
            };
            //! イベント登録解除
            ScrollerNative.prototype.off = function (type, func) {
                switch (type) {
                    case "scroll":
                        this._$target.off("scroll", func);
                        break;
                    case "scrollstop":
                        $(window).off("scrollstop", func);
                        break;
                    default:
                        console.warn(TAG + "unsupported type: " + type);
                        break;
                }
            };
            //! スクロール位置を指定
            ScrollerNative.prototype.scrollTo = function (pos, animate, time) {
                if (!this._listviewOptions.enableAnimation || !animate) {
                    this._$body.scrollTop(pos);
                }
                else {
                    if (null == time) {
                        time = this._listviewOptions.animationDuration;
                    }
                    this._$body.animate({
                        scrollTop: pos
                    }, time);
                }
            };
            //! Scroller の状態更新
            ScrollerNative.prototype.update = function () {
                // noop.
            };
            //! Scroller の破棄
            ScrollerNative.prototype.destroy = function () {
                this._$scrollMap = null;
                this._$target = null;
            };
            Object.defineProperty(ScrollerNative, "TYPE", {
                //! タイプ定義
                get: function () {
                    return "native-scroll";
                },
                enumerable: true,
                configurable: true
            });
            //! factory 取得
            ScrollerNative.getFactory = function () {
                var factory = function (element, options) {
                    return new ScrollerNative(options);
                };
                // set type signature.
                factory.type = ScrollerNative.TYPE;
                return factory;
            };
            return ScrollerNative;
        }());
        UI.ScrollerNative = ScrollerNative;
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));
var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var _Config = CDP.UI.ListViewGlobalConfig;
        var _Utils = CDP.UI._ListViewUtils;
        var TAG = "[CDP.UI.ScrollerIScroll] ";
        /**
         * @class ScrollerIScroll
         * @brief iScroll を使用した Scroller クラス
         */
        var ScrollerIScroll = (function () {
            function ScrollerIScroll($owner, element, iscrollOptions, listviewOptions) {
                this._$owner = null;
                this._iscroll = null;
                this._refreshTimerId = null;
                this._$wrapper = null;
                this._$scroller = null;
                this._listviewOptions = null;
                if (null != UI.global.IScroll) {
                    this._$owner = $owner;
                    this._iscroll = new IScroll(element, iscrollOptions);
                    this._$wrapper = $(this._iscroll.wrapper);
                    this._$scroller = $(this._iscroll.scroller);
                    this._listviewOptions = listviewOptions;
                }
                else {
                    console.error(TAG + "iscroll module doesn't load.");
                }
            }
            //! Scroller の型を取得
            ScrollerIScroll.prototype.getType = function () {
                return ScrollerIScroll.TYPE;
            };
            //! position 取得
            ScrollerIScroll.prototype.getPos = function () {
                var pos = this._iscroll.getComputedPosition().y;
                if (_.isNaN(pos)) {
                    pos = 0;
                }
                else {
                    pos = -pos;
                }
                return pos;
            };
            //! position の最大値を取得
            ScrollerIScroll.prototype.getPosMax = function () {
                return _Utils.max(-this._iscroll.maxScrollY, 0);
            };
            //! イベント登録
            ScrollerIScroll.prototype.on = function (type, func) {
                switch (type) {
                    case "scroll":
                        this._iscroll.on("scroll", func);
                        break;
                    case "scrollstop":
                        this._iscroll.on("scrollEnd", func);
                        break;
                    default:
                        console.warn(TAG + "unsupported type: " + type);
                        break;
                }
            };
            //! イベント登録解除
            ScrollerIScroll.prototype.off = function (type, func) {
                switch (type) {
                    case "scroll":
                        this._iscroll.off("scroll", func);
                        break;
                    case "scrollstop":
                        this._iscroll.on("scrollEnd", func);
                        break;
                    default:
                        console.warn(TAG + "unsupported type: " + type);
                        break;
                }
            };
            //! スクロール位置を指定
            ScrollerIScroll.prototype.scrollTo = function (pos, animate, time) {
                time = 0;
                if (this._listviewOptions.enableAnimation && animate) {
                    time = time || this._listviewOptions.animationDuration;
                }
                this._iscroll.scrollTo(0, -pos, time);
            };
            //! Scroller の状態更新
            ScrollerIScroll.prototype.update = function () {
                var _this = this;
                if (this._$owner) {
                    // update wrapper
                    (function () {
                        var ownerHeight = _this._$owner.height();
                        if (ownerHeight !== _this._$wrapper.height()) {
                            _this._$wrapper.height(ownerHeight);
                        }
                    })();
                    if (null != this._refreshTimerId) {
                        clearTimeout(this._refreshTimerId);
                    }
                    var proc_1 = function () {
                        if (_this._$scroller && _this._$scroller.height() !== _this._iscroll.scrollerHeight) {
                            _this._iscroll.refresh();
                            _this._refreshTimerId = setTimeout(proc_1, _this._listviewOptions.scrollMapRefreshInterval);
                        }
                        else {
                            _this._refreshTimerId = null;
                        }
                    };
                    this._iscroll.refresh();
                    this._refreshTimerId = setTimeout(proc_1, this._listviewOptions.scrollMapRefreshInterval);
                }
            };
            //! Scroller の破棄
            ScrollerIScroll.prototype.destroy = function () {
                this._$scroller = null;
                this._$wrapper = null;
                this._iscroll.destroy();
                this._$owner = null;
            };
            Object.defineProperty(ScrollerIScroll, "TYPE", {
                //! タイプ定義
                get: function () {
                    return "iscroll";
                },
                enumerable: true,
                configurable: true
            });
            //! factory 取得
            ScrollerIScroll.getFactory = function (options) {
                var defaultOpt = {
                    scrollX: false,
                    bounce: false,
                    tap: true,
                    click: true,
                    mouseWheel: true,
                    scrollbars: true,
                    interactiveScrollbars: true,
                    shrinkScrollbars: "scale",
                    fadeScrollbars: true,
                    preventDefault: false,
                    disablePointer: true,
                    disableMouse: false,
                    disableTouch: false,
                    probeType: 2,
                };
                var iscrollOptions = $.extend({}, defaultOpt, options);
                var factory = function (element, listviewOptions) {
                    var $owner = $(element);
                    var $map = $owner.find(_Config.SCROLL_MAP_SELECTOR);
                    var $wrapper = $("<div class='" + _Config.WRAPPER_CLASS + "'></div>")
                        .css({
                        position: "absolute",
                        width: "100%",
                        height: "100%",
                        overflow: "hidden",
                    });
                    $map.wrap($wrapper);
                    return new ScrollerIScroll($owner, _Config.WRAPPER_SELECTOR, iscrollOptions, listviewOptions);
                };
                // set type signature.
                factory.type = ScrollerIScroll.TYPE;
                return factory;
            };
            return ScrollerIScroll;
        }());
        UI.ScrollerIScroll = ScrollerIScroll;
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var TAG = "[CDP.UI.ListItemView] ";
        /**
         * @class ListItemView
         * @brief ListView が扱う ListItem コンテナクラス
         */
        var ListItemView = (function (_super) {
            __extends(ListItemView, _super);
            /**
             * constructor
             */
            function ListItemView(options) {
                var _this = _super.call(this, options) || this;
                _this._owner = null;
                _this._lineProfile = null;
                _this._owner = options.owner;
                if (options.$el) {
                    var delegates = _this.events ? true : false;
                    _this.setElement(options.$el, delegates);
                }
                _this._lineProfile = options.lineProfile;
                return _this;
            }
            ///////////////////////////////////////////////////////////////////////
            // Implements: ListItemView
            //! 描画: framework から呼び出されるため、オーバーライド必須
            ListItemView.prototype.render = function () {
                console.warn(TAG + "need override 'render()' method.");
                return this;
            };
            //! 自身の Line インデックスを取得
            ListItemView.prototype.getIndex = function () {
                return this._lineProfile.index;
            };
            //! 自身に指定された高さを取得
            ListItemView.prototype.getSpecifiedHeight = function () {
                return this._lineProfile.height;
            };
            //! child node が存在するか判定
            ListItemView.prototype.hasChildNode = function () {
                if (!this.$el) {
                    return false;
                }
                else {
                    return 0 < this.$el.children().length;
                }
            };
            /**
             * 高さを更新
             *
             * @param newHeight {Number}              [in] 新しい高さ
             * @param options   {UpdateHeightOptions} [in] line の高さ更新時に影響するすべての LineProfile の再計算を行う場合は { reflectAll: true }
             * @return {ListItemView} インスタンス
             */
            ListItemView.prototype.updateHeight = function (newHeight, options) {
                if (this.$el) {
                    if (this.getSpecifiedHeight() !== newHeight) {
                        this._lineProfile.updateHeight(newHeight, options);
                        this.$el.height(newHeight);
                    }
                }
                return this;
            };
            ///////////////////////////////////////////////////////////////////////
            // Implements: IComposableView
            /**
             * すでに定義された Backbone.View を基底クラスに設定し、extend を実行する。
             *
             * @param derives         {Backbone.View|Backbone.View[]} [in] 合成元の View クラス
             * @param properties      {Object}                        [in] prototype プロパティ
             * @param classProperties {Object}                        [in] static プロパティ
             * @return {Backbone.View|Backbone.View[]} 新規に生成された View のコンストラクタ
             */
            ListItemView.compose = function (derives, properties, classProperties) {
                var composed = UI.composeViews(ListItemView, derives);
                return composed.extend(properties, classProperties);
            };
            ///////////////////////////////////////////////////////////////////////
            // Override: Backbone.View
            //! 開放
            ListItemView.prototype.remove = function () {
                // xperia AX Jelly Bean (4.1.2)にて、メモリーリークを軽減させる効果
                this.$el.find("figure").css("background-image", "none");
                // this.$el は再利用するため破棄しない
                this.$el.children().remove();
                this.$el.off();
                this.$el = null;
                this.stopListening();
                this._lineProfile = null;
                return this;
            };
            Object.defineProperty(ListItemView.prototype, "owner", {
                ///////////////////////////////////////////////////////////////////////
                // short cut methods
                //! Owner 取得
                get: function () {
                    return this._owner;
                },
                enumerable: true,
                configurable: true
            });
            return ListItemView;
        }(Backbone.View));
        UI.ListItemView = ListItemView;
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));
/* tslint:disable:no-bitwise no-unused-expression */
/* jshint -W030 */ // for "Expected an assignment or function call and instead saw an expression"
var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var _Config = CDP.UI.ListViewGlobalConfig;
        var _Utils = CDP.UI._ListViewUtils;
        var TAG = "[CDP.UI.ScrollManager] ";
        /**
         * @class ScrollManager
         * @brief メモリ管理を行うスクロール処理のコアロジック実装クラス
         *        本クラスは IListView インターフェイスを持ち DOM にアクセスするが、Backbone.View を継承しない
         */
        var ScrollManager = (function () {
            /**
             * constructor
             *
             * @param _$root  {JQuery} [in] 管理対象のルートエレメント
             * @param options {ListViewOptions} [in] オプション
             */
            function ScrollManager(options) {
                var _this = this;
                this._$root = null; //!< Scroll 対象のルートオブジェクト
                this._$map = null; //!< Scroll Map element を格納
                this._mapHeight = 0; //!< Scroll Map の高さを格納 (_$map の状態に依存させない)
                this._scroller = null; //!< Scroll に使用する IScroller インスタンス
                this._settings = null; //!< ScrollManager オプションを格納
                this._active = true; //!< UI 表示中は true に指定
                this._scrollEventHandler = null; //!< Scroll Event Handler
                this._scrollStopEventHandler = null; //!< Scroll Stop Event Handler
                this._baseHeight = 0; //!< 高さの基準値
                this._lines = []; //!< 管理下にある LineProfile 配列
                this._pages = []; //!< 管理下にある PageProfile 配列
                //! 最新の表示領域情報を格納 (Scroll 中の更新処理に使用)
                this._lastActivePageContext = {
                    index: 0,
                    from: 0,
                    to: 0,
                    pos: 0,
                };
                this._backup = {}; //!< データの backup 領域. key と _lines を格納。派生クラスで拡張可能。
                // ListViewOptions 既定値
                var defOptions = {
                    scrollerFactory: UI.ScrollerNative.getFactory(),
                    enableHiddenPage: false,
                    enableTransformOffset: false,
                    scrollMapRefreshInterval: 200,
                    scrollRefreshDistance: 200,
                    pagePrepareCount: 3,
                    pagePreloadCount: 1,
                    enableAnimation: true,
                    animationDuration: 0,
                    baseDepth: "auto",
                    itemTagName: "div",
                    removeItemWithTransition: true,
                    useDummyInactiveScrollMap: false,
                };
                // 設定格納
                this._settings = $.extend({}, defOptions, options);
                // スクロールイベント
                this._scrollEventHandler = function (event) {
                    _this.onScroll(_this._scroller.getPos());
                };
                // スクロール停止イベント
                this._scrollStopEventHandler = function (event) {
                    _this.onScrollStop(_this._scroller.getPos());
                };
            }
            ///////////////////////////////////////////////////////////////////////
            // public method
            //! 内部オブジェクトの初期化
            ScrollManager.prototype.initialize = function ($root, height) {
                // 既に構築されていた場合は破棄
                if (this._$root) {
                    this.destroy();
                }
                this._$root = $root;
                this._$map = $root.hasClass(_Config.SCROLL_MAP_CLASS) ? $root : $root.find(_Config.SCROLL_MAP_SELECTOR);
                // _$map が無い場合は初期化しない
                if (this._$map.length <= 0) {
                    this._$root = null;
                    return false;
                }
                this._scroller = this.createScroller();
                this.setBaseHeight(height);
                this.setScrollerCondition();
                return true;
            };
            //! 内部オブジェクトの破棄
            ScrollManager.prototype.destroy = function () {
                if (this._scroller) {
                    this.resetScrollerCondition();
                    this._scroller.destroy();
                    this._scroller = null;
                }
                this.release();
                this._$map = null;
                this._$root = null;
            };
            //! ページの基準値を取得
            ScrollManager.prototype.setBaseHeight = function (height) {
                this._baseHeight = height;
                if (this._baseHeight <= 0) {
                    console.warn(TAG + "invalid base height: " + this._baseHeight);
                }
                if (this._scroller) {
                    this._scroller.update();
                }
            };
            //! active 状態設定
            ScrollManager.prototype.setActiveState = function (active) {
                this._active = active;
                this.treatScrollPosition();
            };
            //! active 状態判定
            ScrollManager.prototype.isActive = function () {
                return this._active;
            };
            //! scroller の種類を取得
            ScrollManager.prototype.getScrollerType = function () {
                return this._settings.scrollerFactory.type;
            };
            /**
             * 状態に応じたスクロール位置の保存/復元
             * cdp.ui.fs.js: PageTabListView が実験的に使用
             * TODO: ※iscroll は未対応
             */
            ScrollManager.prototype.treatScrollPosition = function () {
                var _this = this;
                var i;
                var transform = {};
                var updateOffset = function ($target, offset) {
                    offset = offset || (_this._scroller.getPos() - _this._lastActivePageContext.pos);
                    if (_Utils.getCssMatrixValue($target, "translateY") !== offset) {
                        for (i = 0; i < _Utils.cssPrefixes.length; i++) {
                            transform[_Utils.cssPrefixes[i] + "transform"] = "translate3d(0px," + offset + "px,0px)";
                        }
                        $target.css(transform);
                        return $target;
                    }
                };
                var clearOffset = function ($target) {
                    for (i = 0; i < _Utils.cssPrefixes.length; i++) {
                        transform[_Utils.cssPrefixes[i] + "transform"] = "";
                    }
                    $target.css(transform);
                    return $target;
                };
                if (this._active) {
                    // 以下のスコープの処理に対して画面更新を1回にできないため、JB, ICS ではちらつきが発生する。Kitkat 以降は良好。
                    (function () {
                        if (_this._scroller) {
                            _this._scroller.scrollTo(_this._lastActivePageContext.pos, false, 0);
                        }
                        clearOffset(_this._$map).css("display", "block");
                    })();
                    if (this._settings.useDummyInactiveScrollMap) {
                        this.prepareInactiveMap().remove();
                    }
                }
                else {
                    if (this._settings.useDummyInactiveScrollMap) {
                        updateOffset(this.prepareInactiveMap());
                    }
                    else {
                        updateOffset(this._$map);
                    }
                }
            };
            //! inactive 用 Map の生成
            ScrollManager.prototype.prepareInactiveMap = function () {
                var $parent = this._$map.parent();
                var $inactiveMap = $parent.find(_Config.INACTIVE_CLASS_SELECTOR);
                if ($inactiveMap.length <= 0) {
                    var currentPageIndex_1 = this.getPageIndex();
                    var $listItemViews = this._$map.clone().children().filter(function (index, element) {
                        var pageIndex = ~~$(element).attr(_Config.DATA_PAGE_INDEX);
                        if (currentPageIndex_1 - 1 <= pageIndex || pageIndex <= currentPageIndex_1 + 1) {
                            return true;
                        }
                        else {
                            return false;
                        }
                    });
                    $inactiveMap = $("<section class='" + _Config.SCROLL_MAP_CLASS + " " + _Config.INACTIVE_CLASS + "'></section>")
                        .append($listItemViews)
                        .height(this._mapHeight);
                    $parent.append($inactiveMap);
                    this._$map.css("display", "none");
                }
                return $inactiveMap;
            };
            ///////////////////////////////////////////////////////////////////////
            // Implements: IListView プロファイル管理
            //! 初期化済みか判定
            ScrollManager.prototype.isInitialized = function () {
                return !!this._$root;
            };
            //! プロパティを指定して、LineProfile を管理
            ScrollManager.prototype.addItem = function (height, initializer, info, insertTo) {
                this._addLine(new UI.LineProfile(this, Math.floor(height), initializer, info), insertTo);
            };
            //! プロパティを指定して、LineProfile を管理. 登録 framework が使用する
            ScrollManager.prototype._addLine = function (_line, insertTo) {
                var lines = (_line instanceof Array) ? _line : [_line];
                var i, n;
                var deltaHeight = 0;
                var addTail = false;
                if (null == insertTo) {
                    insertTo = this._lines.length;
                }
                if (insertTo === this._lines.length) {
                    addTail = true;
                }
                // scroll map の更新
                for (i = 0, n = lines.length; i < n; i++) {
                    deltaHeight += lines[i].height;
                }
                this.updateScrollMapHeight(deltaHeight);
                // 挿入
                for (i = lines.length - 1; i >= 0; i--) {
                    this._lines.splice(insertTo, 0, lines[i]);
                }
                // page 設定の解除
                if (!addTail) {
                    if (0 === insertTo) {
                        this.clearPage();
                    }
                    else if (null != this._lines[insertTo - 1].pageIndex) {
                        this.clearPage(this._lines[insertTo - 1].pageIndex);
                    }
                }
                // offset の再計算
                this.updateProfiles(insertTo);
            };
            ScrollManager.prototype.removeItem = function (index, arg2, arg3) {
                if (index instanceof Array) {
                    this._removeLines(index, arg2);
                }
                else {
                    this._removeLine(index, arg2, arg3);
                }
            };
            //! 指定した LineProfile を削除: 連続 index 版
            ScrollManager.prototype._removeLine = function (index, size, delay) {
                var _this = this;
                if (null == size) {
                    size = 1;
                }
                if (index < 0 || this._lines.length < index + size) {
                    console.error(TAG + "logic error. removeItem(), invalid index: " + index);
                    return;
                }
                delay = (null != delay) ? delay : 0;
                var removed = [];
                var delta = 0;
                var mapTransition = false;
                // 削除候補と変化量の算出
                (function () {
                    var line;
                    for (var i = 0; i < size; i++) {
                        line = _this._lines[index + i];
                        delta += line.height;
                        // 削除要素の z-index の初期化
                        line.resetDepth();
                        removed.push(line);
                    }
                    // 自動設定・削除遅延時間が設定されかつ、スクロールポジションに変更がある場合は transition 設定
                    if (_this._settings.removeItemWithTransition && (0 < delay)) {
                        var current = _this.getScrollPos();
                        var posMax = _this.getScrollPosMax() - delta;
                        mapTransition = (posMax < current);
                    }
                })();
                // 更新
                (function () {
                    // transition 設定
                    if (mapTransition) {
                        _this.setupScrollMapTransition(_this._$map, delay);
                    }
                    // page 設定の解除
                    if (null != _this._lines[index].pageIndex) {
                        _this.clearPage(_this._lines[index].pageIndex);
                    }
                    // スクロール領域の更新
                    _this.updateScrollMapHeight(-delta);
                    // 配列から削除
                    _this._lines.splice(index, size);
                    // offset の再計算
                    _this.updateProfiles(index);
                    // 遅延削除
                    setTimeout(function () {
                        removed.forEach(function (line) {
                            line.inactivate();
                        });
                    }, delay);
                })();
            };
            //! 指定した LineProfile を削除: random access 版
            ScrollManager.prototype._removeLines = function (indexes, delay) {
                var _this = this;
                delay = (null != delay) ? delay : 0;
                for (var i = 0, n = indexes.length; i < n; i++) {
                    if (i < 0 || this._lines.length < i) {
                        console.error(TAG + "logic error. removeItem(), invalid index: " + i);
                        return;
                    }
                }
                var removed = [];
                var delta = 0;
                var mapTransition = false;
                // 削除候補と変化量の算出
                (function () {
                    var line;
                    indexes.forEach(function (index) {
                        line = _this._lines[index];
                        delta += line.height;
                        // 削除要素の z-index の初期化
                        line.resetDepth();
                        removed.push(line);
                    });
                    // 自動設定・削除遅延時間が設定されかつ、スクロールポジションに変更がある場合は transition 設定
                    if (_this._settings.removeItemWithTransition && (0 < delay)) {
                        var current = _this.getScrollPos();
                        var posMax = _this.getScrollPosMax() - delta;
                        mapTransition = (posMax < current);
                    }
                })();
                // 更新
                (function () {
                    // transition 設定
                    if (mapTransition) {
                        _this.setupScrollMapTransition(_this._$map, delay);
                    }
                    indexes.forEach(function (index) {
                        // page 設定の解除
                        if (null != _this._lines[index].pageIndex) {
                            _this.clearPage(_this._lines[index].pageIndex);
                        }
                        // 配列から削除
                        _this._lines.splice(index, 1);
                        // offset の再計算
                        _this.updateProfiles(index);
                    });
                    // スクロール領域の更新
                    _this.updateScrollMapHeight(-delta);
                    // 遅延削除
                    setTimeout(function () {
                        removed.forEach(function (line) {
                            line.inactivate();
                        });
                    }, delay);
                })();
            };
            //! scroll map のトランジション設定
            ScrollManager.prototype.setupScrollMapTransition = function ($map, delay) {
                var transitionEndHandler = function (event) {
                    $map.off(_Utils.transitionEnd);
                    _Utils.clearTransitions($map);
                };
                this._$map.on(_Utils.transitionEnd, transitionEndHandler);
                _Utils.setTransformsTransitions($map, "height", delay, "ease");
            };
            ScrollManager.prototype.getItemInfo = function (target) {
                var index;
                var parser = function ($target) {
                    if ($target.hasClass(_Config.LISTITEM_BASE_CLASS)) {
                        return ~~$target.attr(_Config.DATA_CONTAINER_INDEX);
                    }
                    else if ($target.hasClass(_Config.SCROLL_MAP_CLASS) || $target.length <= 0) {
                        console.warn(TAG + "cannot ditect line from event object.");
                        return null;
                    }
                    else {
                        return parser($target.parent());
                    }
                };
                if (target instanceof $.Event) {
                    index = parser($(target.currentTarget));
                }
                else if (typeof target === "number") {
                    index = target;
                }
                if (null == index) {
                    console.error(TAG + "logic error. unsupported arg type. type: " + typeof target);
                    return null;
                }
                else if (index < 0 || this._lines.length <= index) {
                    console.error(TAG + "logic error. invalid range. index: " + index);
                    return null;
                }
                return this._lines[index].info;
            };
            //! アクティブページを更新
            ScrollManager.prototype.refresh = function () {
                var _this = this;
                var targets = {};
                var searchCount = this._settings.pagePrepareCount + this._settings.pagePreloadCount;
                var currentPageIndex = this.getPageIndex();
                var highPriorityIndex = [];
                var oldExsistPage = _.filter(this._pages, function (page) {
                    return "inactive" !== page.status;
                });
                var changeState = function (index) {
                    if (index === currentPageIndex) {
                        targets[index] = "activate";
                        highPriorityIndex.push(index);
                    }
                    else if (_Utils.abs(currentPageIndex - index) <= _this._settings.pagePrepareCount) {
                        targets[index] = "activate";
                    }
                    else {
                        if (_this._settings.enableHiddenPage) {
                            targets[index] = "hide";
                        }
                        else {
                            targets[index] = "activate";
                        }
                    }
                    // current page の 前後は high priority にする
                    if (currentPageIndex + 1 === index || currentPageIndex - 1 === index) {
                        highPriorityIndex.push(index);
                    }
                };
                // 対象無し
                if (this._lines.length <= 0) {
                    return;
                }
                (function () {
                    var i = 0;
                    var pageIndex = 0;
                    var overflowPrev = 0, overflowNext = 0;
                    var beginIndex = currentPageIndex - searchCount;
                    var endIndex = currentPageIndex + searchCount;
                    for (pageIndex = beginIndex; pageIndex <= endIndex; pageIndex++) {
                        if (pageIndex < 0) {
                            overflowPrev++;
                            continue;
                        }
                        if (_this._pages.length <= pageIndex) {
                            overflowNext++;
                            continue;
                        }
                        changeState(pageIndex);
                    }
                    if (0 < overflowPrev) {
                        for (i = 0, pageIndex = currentPageIndex + searchCount + 1; i < overflowPrev; i++, pageIndex++) {
                            if (_this._pages.length <= pageIndex) {
                                break;
                            }
                            changeState(pageIndex);
                        }
                    }
                    if (0 < overflowNext) {
                        for (i = 0, pageIndex = currentPageIndex - searchCount - 1; i < overflowNext; i++, pageIndex--) {
                            if (pageIndex < 0) {
                                break;
                            }
                            changeState(pageIndex);
                        }
                    }
                })();
                // 不要になった page の inactivate
                oldExsistPage.forEach(function (page) {
                    var index = page.index;
                    if (null == targets[index]) {
                        page.inactivate();
                    }
                });
                // 優先 page の activate
                highPriorityIndex
                    .sort(function (lhs, rhs) {
                    if (lhs < rhs) {
                        return -1;
                    }
                    else if (lhs > rhs) {
                        return 1;
                    }
                    else {
                        return 0;
                    }
                })
                    .forEach(function (index) {
                    setTimeout(function () {
                        if (_this.isInitialized()) {
                            _this._pages[index] && _this._pages[index].activate();
                        }
                    }, 0);
                });
                // そのほかの page の 状態変更
                _.each(targets, function (action, key) {
                    setTimeout(function () {
                        if (_this.isInitialized()) {
                            var index = ~~key;
                            switch (action) {
                                case "activate":
                                    _this._pages[index] && _this._pages[index].activate();
                                    break;
                                case "hide":
                                    _this._pages[index] && _this._pages[index].hide();
                                    break;
                                case "inactivate":
                                    console.warn(TAG + "unexpected operation: inactivate");
                                    break;
                                default:
                                    console.warn(TAG + "unknown operation: " + targets[key]);
                                    break;
                            }
                        }
                    }, 0);
                });
                // 更新後に使用しなかった DOM を削除
                this.findRecycleElements().remove();
                this._lastActivePageContext.from = this._pages[currentPageIndex].getLineProfileFirst() ?
                    this._pages[currentPageIndex].getLineProfileFirst().index : 0;
                this._lastActivePageContext.to = this._pages[currentPageIndex].getLineProfileLast() ?
                    this._pages[currentPageIndex].getLineProfileLast().index : 0;
                this._lastActivePageContext.index = currentPageIndex;
            };
            //! 未アサインページを構築
            ScrollManager.prototype.update = function () {
                var index = this._pages.length;
                this.assignPage(index);
                this.refresh();
            };
            //! ページアサインを再構成
            ScrollManager.prototype.rebuild = function () {
                this.clearPage();
                this.assignPage();
                this.refresh();
            };
            //! 管轄データを破棄
            ScrollManager.prototype.release = function () {
                this._lines.forEach(function (line) {
                    line.inactivate();
                });
                this._pages = [];
                this._lines = [];
                if (this._$map) {
                    this._mapHeight = 0;
                    this._$map.height(0);
                }
            };
            ///////////////////////////////////////////////////////////////////////
            // Implements: IListView Backup / Restore
            //! 内部データをバックアップ
            ScrollManager.prototype.backup = function (key) {
                if (null == this._backup[key]) {
                    this._backup[key] = {
                        lines: this._lines,
                    };
                }
                return true;
            };
            //! 内部データをリストア
            ScrollManager.prototype.restore = function (key, rebuild) {
                if (rebuild === void 0) { rebuild = true; }
                if (null == this._backup[key]) {
                    return false;
                }
                if (0 < this._lines.length) {
                    this.release();
                }
                this._addLine(this._backup[key].lines);
                if (rebuild) {
                    this.rebuild();
                }
                return true;
            };
            //! バックアップデータの有無
            ScrollManager.prototype.hasBackup = function (key) {
                if (null != this._backup[key]) {
                    return true;
                }
                else {
                    return false;
                }
            };
            //! バックアップデータの破棄
            ScrollManager.prototype.clearBackup = function (key) {
                if (null == key) {
                    this._backup = {};
                    return true;
                }
                else if (null != this._backup[key]) {
                    delete this._backup[key];
                    return true;
                }
                else {
                    return false;
                }
            };
            Object.defineProperty(ScrollManager.prototype, "backupData", {
                //! バックアップデータにアクセス
                get: function () {
                    return this._backup;
                },
                enumerable: true,
                configurable: true
            });
            ///////////////////////////////////////////////////////////////////////
            // Implements: IListView Scroll
            //! スクロールイベントハンドラ設定/解除
            ScrollManager.prototype.setScrollHandler = function (handler, on) {
                if (this._scroller) {
                    if (on) {
                        this._scroller.on("scroll", handler);
                    }
                    else {
                        this._scroller.off("scroll", handler);
                    }
                }
            };
            //! スクロール終了イベントハンドラ設定/解除
            ScrollManager.prototype.setScrollStopHandler = function (handler, on) {
                if (this._scroller) {
                    if (on) {
                        this._scroller.on("scrollstop", handler);
                    }
                    else {
                        this._scroller.off("scrollstop", handler);
                    }
                }
            };
            //! スクロール位置を取得
            ScrollManager.prototype.getScrollPos = function () {
                return this._scroller ? this._scroller.getPos() : 0;
            };
            //! スクロール位置の最大値を取得
            ScrollManager.prototype.getScrollPosMax = function () {
                return this._scroller ? this._scroller.getPosMax() : 0;
            };
            //! スクロール位置を指定
            ScrollManager.prototype.scrollTo = function (pos, animate, time) {
                if (this._scroller) {
                    if (pos < 0) {
                        console.warn(TAG + "invalid position, too small. [pos: " + pos + "]");
                        pos = 0;
                    }
                    else if (this._scroller.getPosMax() < pos) {
                        console.warn(TAG + "invalid position, too big. [pos: " + pos + "]");
                        pos = this._scroller.getPosMax();
                    }
                    // pos のみ先駆けて更新
                    this._lastActivePageContext.pos = pos;
                    if (pos !== this._scroller.getPos()) {
                        this._scroller.scrollTo(pos, animate, time);
                    }
                }
            };
            //! 指定された ListItemView の表示を保証
            ScrollManager.prototype.ensureVisible = function (index, options) {
                var _this = this;
                if (index < 0 || this._lines.length <= index) {
                    console.warn(TAG + "ensureVisible(), invalid index, noop. [index: " + index + "]");
                    return;
                }
                else if (!this._scroller) {
                    console.warn(TAG + "scroller is not ready.");
                    return;
                }
                (function () {
                    var target = _this._lines[index];
                    var defaultOptions = {
                        partialOK: true,
                        setTop: false,
                        animate: _this._settings.enableAnimation,
                        time: _this._settings.animationDuration,
                        callback: function () { },
                    };
                    var operation = $.extend({}, defaultOptions, options);
                    var currentScope = {
                        from: _this._scroller.getPos(),
                        to: _this._scroller.getPos() + _this._baseHeight,
                    };
                    var targetScope = {
                        from: target.offset,
                        to: target.offset + target.height,
                    };
                    var isInScope = function () {
                        if (operation.partialOK) {
                            if (targetScope.from <= currentScope.from) {
                                if (currentScope.from <= targetScope.to) {
                                    return true;
                                }
                                else {
                                    return false;
                                }
                            }
                            else {
                                if (targetScope.from <= currentScope.to) {
                                    return true;
                                }
                                else {
                                    return false;
                                }
                            }
                        }
                        else {
                            if (currentScope.from <= targetScope.from && targetScope.to <= currentScope.to) {
                                return true;
                            }
                            else {
                                return false;
                            }
                        }
                    };
                    var detectPosition = function () {
                        if (targetScope.from < currentScope.from) {
                            return targetScope.from;
                        }
                        else if (currentScope.from < targetScope.from) {
                            return target.offset - target.height; // bottom 合わせは情報不足により不可
                        }
                        else {
                            console.warn(TAG + "logic error.");
                            return 0;
                        }
                    };
                    var pos;
                    if (operation.setTop) {
                        pos = targetScope.from;
                    }
                    else if (isInScope()) {
                        // noop.
                        operation.callback();
                        return;
                    }
                    else {
                        pos = detectPosition();
                    }
                    // 補正
                    if (pos < 0) {
                        pos = 0;
                    }
                    else if (_this._scroller.getPosMax() < pos) {
                        pos = _this._scroller.getPosMax();
                    }
                    setTimeout(operation.callback, operation.time);
                    _this.scrollTo(pos, operation.animate, operation.time);
                })();
            };
            ///////////////////////////////////////////////////////////////////////
            // implements: IListViewFramework:
            //! Scroll Map の高さを取得
            ScrollManager.prototype.getScrollMapHeight = function () {
                return this._$map ? this._mapHeight : 0;
            };
            //! Scroll Map の高さを更新. framework が使用する.
            ScrollManager.prototype.updateScrollMapHeight = function (delta) {
                if (this._$map) {
                    this._mapHeight += delta;
                    // for fail safe.
                    if (this._mapHeight < 0) {
                        this._mapHeight = 0;
                    }
                    this._$map.height(this._mapHeight);
                }
            };
            //! 内部 Profile の更新. framework が使用する.
            ScrollManager.prototype.updateProfiles = function (from) {
                var i, n;
                var last;
                for (i = from, n = this._lines.length; i < n; i++) {
                    if (0 < i) {
                        last = this._lines[i - 1];
                        this._lines[i].index = last.index + 1;
                        this._lines[i].offset = last.offset + last.height;
                    }
                    else {
                        this._lines[i].index = 0;
                        this._lines[i].offset = 0;
                    }
                }
            };
            //! Scroll Map Element を取得. framework が使用する.
            ScrollManager.prototype.getScrollMapElement = function () {
                return this._$map || $("");
            };
            //! リサイクル可能な Element を取得. framework が使用する.
            ScrollManager.prototype.findRecycleElements = function () {
                return this._$map ? this._$map.find(_Config.RECYCLE_CLASS_SELECTOR) : $("");
            };
            //! ListViewOptions を取得. framework が使用する.
            ScrollManager.prototype.getListViewOptions = function () {
                return this._settings;
            };
            ///////////////////////////////////////////////////////////////////////
            // private method:
            //! Scroller 用環境設定
            ScrollManager.prototype.setScrollerCondition = function () {
                this._scroller.on("scroll", this._scrollEventHandler);
                this._scroller.on("scrollstop", this._scrollStopEventHandler);
            };
            //! Scroller 用環境破棄
            ScrollManager.prototype.resetScrollerCondition = function () {
                this._scroller.off("scrollstop", this._scrollStopEventHandler);
                this._scroller.off("scroll", this._scrollEventHandler);
            };
            //! 既定の Scroller オブジェクトの作成
            ScrollManager.prototype.createScroller = function () {
                return this._settings.scrollerFactory(this._$root[0], this._settings);
            };
            //! 現在の Page Index を取得
            ScrollManager.prototype.getPageIndex = function () {
                var _this = this;
                var i, n;
                var page;
                var candidate;
                var scrollPos = this._scroller ? this._scroller.getPos() : 0;
                var scrollPosMax = this._scroller ? this._scroller.getPosMax() : 0;
                var scrollMapSize = (function () {
                    var lastPage = _this.getLastPage();
                    if (null != lastPage) {
                        return lastPage.offset + lastPage.height;
                    }
                    else {
                        return _this._baseHeight;
                    }
                })();
                var pos = (function () {
                    if (0 === scrollPosMax || scrollPosMax <= _this._baseHeight) {
                        return 0;
                    }
                    else {
                        return scrollPos * scrollMapSize / scrollPosMax;
                    }
                })();
                var validRange = function (_page) {
                    if (null == _page) {
                        return false;
                    }
                    else if (_page.offset <= pos && pos <= _page.offset + _page.height) {
                        return true;
                    }
                    else {
                        return false;
                    }
                };
                if (this._baseHeight <= 0) {
                    console.error(TAG + "invalid base height: " + this._baseHeight);
                    return 0;
                }
                candidate = Math.floor(pos / this._baseHeight);
                if (this._pages.length <= candidate) {
                    candidate = this._pages.length - 1;
                }
                page = this._pages[candidate];
                if (validRange(page)) {
                    return page.index;
                }
                else if (pos < page.offset) {
                    for (i = candidate - 1; i >= 0; i--) {
                        page = this._pages[i];
                        if (validRange(page)) {
                            return page.index;
                        }
                    }
                    console.warn(TAG + "unknown page index.");
                    return 0;
                }
                else {
                    for (i = candidate + 1, n = this._pages.length; i < n; i++) {
                        page = this._pages[i];
                        if (validRange(page)) {
                            return page.index;
                        }
                    }
                    console.warn(TAG + "unknown page index.");
                    return this._pages.length - 1;
                }
            };
            /**
             * スクロールイベント
             *
             * @param pos {Number} [in] スクロールポジション
             */
            ScrollManager.prototype.onScroll = function (pos) {
                if (this._active && 0 < this._pages.length) {
                    var currentPageIndex = this.getPageIndex();
                    // TODO: 調整
                    if (_Utils.abs(pos - this._lastActivePageContext.pos) < this._settings.scrollRefreshDistance) {
                        if (this._lastActivePageContext.index !== currentPageIndex) {
                            this.refresh();
                        }
                    }
                    this._lastActivePageContext.pos = pos;
                }
            };
            /**
             * スクロール停止イベント
             *
             * @param pos {Number} [in] スクロールポジション
             */
            ScrollManager.prototype.onScrollStop = function (pos) {
                if (this._active && 0 < this._pages.length) {
                    var currentPageIndex = this.getPageIndex();
                    if (this._lastActivePageContext.index !== currentPageIndex) {
                        this.refresh();
                    }
                    this._lastActivePageContext.pos = pos;
                }
            };
            //! 最後のページを取得
            ScrollManager.prototype.getLastPage = function () {
                if (0 < this._pages.length) {
                    return this._pages[this._pages.length - 1];
                }
                else {
                    return null;
                }
            };
            /**
             * ページ区分のアサイン
             *
             * @param from {Number} [in] page index を指定
             */
            ScrollManager.prototype.assignPage = function (from) {
                var _this = this;
                var i, n;
                if (null == from) {
                    from = 0;
                }
                else {
                    this.clearPage(from);
                }
                (function () {
                    var lineIndex = 0;
                    var lastPage = _this.getLastPage();
                    var lastLine;
                    var tempPage;
                    if (null == lastPage) {
                        lastPage = new UI.PageProfile();
                        _this._pages.push(lastPage);
                    }
                    else {
                        lastLine = lastPage.getLineProfileLast();
                        if (null != lastLine) {
                            lineIndex = lastLine.index + 1;
                        }
                    }
                    var asignee = _this._lines.slice(lineIndex);
                    for (i = 0, n = asignee.length; i < n; i++) {
                        if (_this._baseHeight <= lastPage.height) {
                            lastPage.normalize();
                            tempPage = lastPage;
                            tempPage = new UI.PageProfile();
                            tempPage.index = lastPage.index + 1;
                            tempPage.offset = lastPage.offset + lastPage.height;
                            lastPage = tempPage;
                            _this._pages.push(lastPage);
                        }
                        asignee[i].pageIndex = lastPage.index;
                        lastPage.push(asignee[i]);
                    }
                    lastPage.normalize();
                })();
                if (this._scroller) {
                    this._scroller.update();
                }
            };
            /**
             * ページ区分の解除
             *
             * @param from {Number} [in] page index を指定
             */
            ScrollManager.prototype.clearPage = function (from) {
                if (null == from) {
                    from = 0;
                }
                this._pages = this._pages.slice(0, from);
            };
            return ScrollManager;
        }());
        UI.ScrollManager = ScrollManager;
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));
var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var TAG = "[CDP.UI.ListView] ";
        /**
         * @class ListView
         * @brief メモリ管理機能を提供する仮想リストビュークラス
         */
        var ListView = (function (_super) {
            __extends(ListView, _super);
            /**
             * constructor
             *
             * @param options {ListViewConstructOptions} [in] オプション
             */
            function ListView(options) {
                var _this = _super.call(this, options) || this;
                _this._scrollMgr = null; //!< scroll コアロジック
                var opt = options || {};
                _this._scrollMgr = new UI.ScrollManager(options);
                if (opt.$el) {
                    var delegates = _this.events ? true : false;
                    _this.setElement(opt.$el, delegates);
                }
                else {
                    var height = opt.initialHeight || _this.$el.height();
                    _this._scrollMgr.initialize(_this.$el, height);
                }
                return _this;
            }
            ListView.prototype.setElement = function (element, delegate) {
                if (this._scrollMgr) {
                    var $el = $(element);
                    this._scrollMgr.destroy();
                    this._scrollMgr.initialize($el, $el.height());
                }
                return _super.prototype.setElement.call(this, element, delegate);
            };
            //! 破棄
            ListView.prototype.remove = function () {
                this._scrollMgr.destroy();
                return _super.prototype.remove.call(this);
            };
            ///////////////////////////////////////////////////////////////////////
            // Implements: IListView Profile 管理
            //! 初期化済みか判定
            ListView.prototype.isInitialized = function () {
                return this._scrollMgr.isInitialized();
            };
            //! プロパティを指定して、LineProfile を管理
            ListView.prototype.addItem = function (height, initializer, info, insertTo) {
                this._addLine(new UI.LineProfile(this._scrollMgr, Math.floor(height), initializer, info), insertTo);
            };
            ListView.prototype.removeItem = function (index, arg2, arg3) {
                this._scrollMgr.removeItem(index, arg2, arg3);
            };
            ListView.prototype.getItemInfo = function (target) {
                return this._scrollMgr.getItemInfo(target);
            };
            //! アクティブページを更新
            ListView.prototype.refresh = function () {
                this._scrollMgr.refresh();
            };
            //! 未アサインページを構築
            ListView.prototype.update = function () {
                this._scrollMgr.update();
            };
            //! ページアサインを再構成
            ListView.prototype.rebuild = function () {
                this._scrollMgr.rebuild();
            };
            //! 管轄データを破棄
            ListView.prototype.release = function () {
                this._scrollMgr.release();
            };
            ///////////////////////////////////////////////////////////////////////
            // Implements: IListView Profile Backup / Restore
            //! 内部データをバックアップ
            ListView.prototype.backup = function (key) {
                return this._scrollMgr.backup(key);
            };
            //! 内部データをリストア
            ListView.prototype.restore = function (key, rebuild) {
                if (rebuild === void 0) { rebuild = true; }
                return this._scrollMgr.restore(key, rebuild);
            };
            //! バックアップデータの有無
            ListView.prototype.hasBackup = function (key) {
                return this._scrollMgr.hasBackup(key);
            };
            //! バックアップデータの破棄
            ListView.prototype.clearBackup = function (key) {
                return this._scrollMgr.clearBackup(key);
            };
            Object.defineProperty(ListView.prototype, "backupData", {
                //! バックアップデータにアクセス
                get: function () {
                    return this._scrollMgr ? this._scrollMgr.backupData : null;
                },
                enumerable: true,
                configurable: true
            });
            ///////////////////////////////////////////////////////////////////////
            // Implements: IListView Scroll
            //! スクロールイベントハンドラ設定/解除
            ListView.prototype.setScrollHandler = function (handler, on) {
                this._scrollMgr.setScrollHandler(handler, on);
            };
            //! スクロール終了イベントハンドラ設定/解除
            ListView.prototype.setScrollStopHandler = function (handler, on) {
                this._scrollMgr.setScrollStopHandler(handler, on);
            };
            //! スクロール位置を取得
            ListView.prototype.getScrollPos = function () {
                return this._scrollMgr.getScrollPos();
            };
            //! スクロール位置の最大値を取得
            ListView.prototype.getScrollPosMax = function () {
                return this._scrollMgr.getScrollPosMax();
            };
            //! スクロール位置を指定
            ListView.prototype.scrollTo = function (pos, animate, time) {
                this._scrollMgr.scrollTo(pos, animate, time);
            };
            //! 指定された ListItemView の表示を保証
            ListView.prototype.ensureVisible = function (index, options) {
                this._scrollMgr.ensureVisible(index, options);
            };
            Object.defineProperty(ListView.prototype, "core", {
                ///////////////////////////////////////////////////////////////////////
                // Implements: IListView Properties
                //! core framework access
                get: function () {
                    return this._scrollMgr;
                },
                enumerable: true,
                configurable: true
            });
            ///////////////////////////////////////////////////////////////////////
            // Implements: IListView Internal I/F
            //! 登録 framework が使用する
            ListView.prototype._addLine = function (_line, insertTo) {
                this._scrollMgr._addLine(_line, insertTo);
            };
            ///////////////////////////////////////////////////////////////////////
            // Implements: IComposableView
            /**
             * すでに定義された Backbone.View を基底クラスに設定し、extend を実行する。
             *
             * @param derives         {Backbone.View|Backbone.View[]} [in] 合成元の View クラス
             * @param properties      {Object}                        [in] prototype プロパティ
             * @param classProperties {Object}                        [in] static プロパティ
             * @return {Backbone.View|Backbone.View[]} 新規に生成された View のコンストラクタ
             */
            ListView.compose = function (derives, properties, classProperties) {
                var composed = UI.composeViews(ListView, derives);
                return composed.extend(properties, classProperties);
            };
            return ListView;
        }(Backbone.View));
        UI.ListView = ListView;
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));
var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var TAG = "[CDP.UI.GroupListItemView] ";
        /**
         * @class GroupListItemView
         * @brief ExpandableListView が扱う ListItem コンテナクラス
         */
        var GroupListItemView = (function (_super) {
            __extends(GroupListItemView, _super);
            /**
             * constructor
             *
             * @param options {GroupLineViewOptions} [in] オプション
             */
            function GroupListItemView(options) {
                var _this = _super.call(this, options) || this;
                _this._groupProfile = null; //!< 管轄の GroupProfile
                _this._groupProfile = options.groupProfile;
                return _this;
            }
            ///////////////////////////////////////////////////////////////////////
            // protected methods
            /**
             * 展開状態を判定
             *
             * @return {Boolean} true: 展開, false:収束
             */
            GroupListItemView.prototype.isExpanded = function () {
                return this._groupProfile.isExpanded();
            };
            //! 展開中か判定
            GroupListItemView.prototype.isExpanding = function () {
                return this.owner.isExpanding();
            };
            //! 収束中か判定
            GroupListItemView.prototype.isCollapsing = function () {
                return this.owner.isCollapsing();
            };
            //! 開閉中か判定
            GroupListItemView.prototype.isSwitching = function () {
                return this.owner.isSwitching();
            };
            //! 子 Group を持っているか判定
            GroupListItemView.prototype.hasChildren = function (layoutKey) {
                return this._groupProfile.hasChildren(layoutKey);
            };
            return GroupListItemView;
        }(UI.ListItemView));
        UI.GroupListItemView = GroupListItemView;
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));
/* tslint:disable:no-bitwise */
var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var TAG = "[CDP.UI.ExpandManager] ";
        /**
         * @class ExpandManager
         * @brief 開閉状態管理クラス
         */
        var ExpandManager = (function () {
            /**
             * constructor
             *
             * @param owner {BaseExpandableListView} [in] 親View のインスタンス
             */
            function ExpandManager(owner) {
                this._owner = null;
                this._mapGroups = {}; //!< {id, GroupProfile} の map
                this._aryTopGroups = []; //!< 第1階層 GroupProfile を格納
                this._layoutKey = null;
                this._owner = owner;
            }
            ///////////////////////////////////////////////////////////////////////
            // Implements: IExpandManager
            /**
             * 新規 GroupProfile を作成
             * 登録済みの場合はそのオブジェクトを返却
             *
             * @parma id {String} [in] 新規に作成する Group ID を指定. 指定しない場合は自動割り振り
             * @return {GroupProfile} GroupProfile インスタンス
             */
            ExpandManager.prototype.newGroup = function (id) {
                var group;
                if (null == id) {
                    id = "group-id:" + ("0000" + (Math.random() * Math.pow(36, 4) << 0).toString(36)).slice(-4);
                }
                if (null != this._mapGroups[id]) {
                    return this._mapGroups[id];
                }
                group = new UI.GroupProfile(id, this._owner);
                this._mapGroups[id] = group;
                return group;
            };
            /**
             * 登録済み Group を取得
             *
             * @parma id {String} [in] 取得する Group ID を指定
             * @return {GroupProfile} GroupProfile インスタンス / null
             */
            ExpandManager.prototype.getGroup = function (id) {
                if (null == this._mapGroups[id]) {
                    console.warn(TAG + "group id: " + id + " is not registered.");
                    return null;
                }
                return this._mapGroups[id];
            };
            /**
             * 第1階層の Group 登録
             *
             * @param topGroup {GroupProfile} [in] 構築済み GroupProfile インスタンス
             */
            ExpandManager.prototype.registerTopGroup = function (topGroup) {
                var lastGroup;
                var insertTo;
                // すでに登録済みの場合は restore して layout キーごとに復元する。
                if ("registered" === topGroup.status) {
                    // TODO: orientation changed 時の layout キー変更対応だが、キーに変更が無いときは不具合となる。
                    // この API に実装が必要かも含めて見直しが必要
                    topGroup.restore();
                    return;
                }
                lastGroup = (0 < this._aryTopGroups.length) ? this._aryTopGroups[this._aryTopGroups.length - 1] : null;
                insertTo = (null != lastGroup) ? lastGroup.getLastLineIndex(true) + 1 : 0;
                if (_.isNaN(insertTo)) {
                    console.error(TAG + "logic error, 'insertTo' is NaN.");
                    return;
                }
                this._aryTopGroups.push(topGroup);
                topGroup.register(insertTo);
            };
            /**
             * 第1階層の Group を取得
             * コピー配列が返されるため、クライアントはキャッシュ不可
             *
             * @return {GroupProfile[]} GroupProfile 配列
             */
            ExpandManager.prototype.getTopGroups = function () {
                return this._aryTopGroups.slice(0);
            };
            //! すべてのグループを展開 (1階層)
            ExpandManager.prototype.expandAll = function () {
                this._aryTopGroups.forEach(function (group) {
                    if (group.hasChildren()) {
                        group.expand();
                    }
                });
            };
            //! すべてのグループを収束 (1階層)
            ExpandManager.prototype.collapseAll = function (delay) {
                this._aryTopGroups.forEach(function (group) {
                    if (group.hasChildren()) {
                        group.collapse(delay);
                    }
                });
            };
            //! 展開中か判定
            ExpandManager.prototype.isExpanding = function () {
                return this._owner.isStatusIn("expanding");
            };
            //! 収束中か判定
            ExpandManager.prototype.isCollapsing = function () {
                return this._owner.isStatusIn("collapsing");
            };
            //! 開閉中か判定
            ExpandManager.prototype.isSwitching = function () {
                return this.isExpanding() || this.isCollapsing();
            };
            //! 状態変数の参照カウントのインクリメント
            ExpandManager.prototype.statusAddRef = function (status) {
                return this._owner.statusAddRef(status);
            };
            //! 状態変数の参照カウントのデクリメント
            ExpandManager.prototype.statusRelease = function (status) {
                return this._owner.statusRelease(status);
            };
            //! 処理スコープ毎に状態変数を設定
            ExpandManager.prototype.statusScope = function (status, callback) {
                this._owner.statusScope(status, callback);
            };
            //! 指定した状態中であるか確認
            ExpandManager.prototype.isStatusIn = function (status) {
                return this._owner.isStatusIn(status);
            };
            Object.defineProperty(ExpandManager.prototype, "layoutKey", {
                //! layout key を取得
                get: function () {
                    return this._layoutKey;
                },
                //! layout key を設定
                set: function (key) {
                    this._layoutKey = key;
                },
                enumerable: true,
                configurable: true
            });
            //! データを破棄
            ExpandManager.prototype.release = function () {
                this._mapGroups = {};
                this._aryTopGroups = [];
            };
            ///////////////////////////////////////////////////////////////////////
            // Implementes: IBackupRestore
            /**
             * 内部データをバックアップ
             *
             * @param key {String} [in] バックアップキーを指定
             * @return {Boolean} true: 成功 / false: 失敗
             */
            ExpandManager.prototype.backup = function (key) {
                var _backup = this.backupData;
                if (null == _backup[key]) {
                    _backup[key] = {
                        map: this._mapGroups,
                        tops: this._aryTopGroups,
                    };
                }
                return true;
            };
            /**
             * 内部データをリストア
             *
             * @param key     {String}  [in] バックアップキーを指定
             * @param rebuild {Boolean} [in] rebuild を実行する場合は true を指定
             * @return {Boolean} true: 成功 / false: 失敗
             */
            ExpandManager.prototype.restore = function (key, rebuild) {
                if (rebuild === void 0) { rebuild = true; }
                var _backup = this.backupData;
                if (null == _backup[key]) {
                    return false;
                }
                if (0 < this._aryTopGroups.length) {
                    this.release();
                }
                this._mapGroups = _backup[key].map;
                this._aryTopGroups = _backup[key].tops;
                // layout 情報の確認
                if (this._aryTopGroups.length <= 0 || !this._aryTopGroups[0].hasLayoutKeyOf(this.layoutKey)) {
                    return false;
                }
                // 展開しているものを登録
                this._aryTopGroups.forEach(function (group) {
                    group.restore();
                });
                // 再構築の予約
                if (rebuild) {
                    this._owner.rebuild();
                }
                return true;
            };
            //! バックアップデータの有無
            ExpandManager.prototype.hasBackup = function (key) {
                return this._owner.hasBackup(key);
            };
            //! バックアップデータの破棄
            ExpandManager.prototype.clearBackup = function (key) {
                return this._owner.clearBackup(key);
            };
            Object.defineProperty(ExpandManager.prototype, "backupData", {
                //! バックアップデータにアクセス
                get: function () {
                    return this._owner.backupData;
                },
                enumerable: true,
                configurable: true
            });
            return ExpandManager;
        }());
        UI.ExpandManager = ExpandManager;
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));
var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var TAG = "[CDP.UI.ExpandableListView] ";
        /**
         * @class ExpandableListView
         * @brief 開閉機能を備えた仮想リストビュークラス
         */
        var ExpandableListView = (function (_super) {
            __extends(ExpandableListView, _super);
            /**
             * constructor
             *
             * @param options {ListViewConstructOptions} [in] オプション
             */
            function ExpandableListView(options) {
                var _this = _super.call(this, options) || this;
                _this._statusMgr = null;
                _this._expandManager = null;
                _this._statusMgr = new UI.StatusManager();
                _this._expandManager = new UI.ExpandManager(_this);
                return _this;
            }
            ///////////////////////////////////////////////////////////////////////
            // Implements: IExpandableListView
            //! 新規 GroupProfile を作成
            ExpandableListView.prototype.newGroup = function (id) {
                return this._expandManager.newGroup(id);
            };
            //! 登録済み Group を取得
            ExpandableListView.prototype.getGroup = function (id) {
                return this._expandManager.getGroup(id);
            };
            //! 第1階層の Group 登録
            ExpandableListView.prototype.registerTopGroup = function (topGroup) {
                this._expandManager.registerTopGroup(topGroup);
            };
            //! 第1階層の Group を取得
            ExpandableListView.prototype.getTopGroups = function () {
                return this._expandManager.getTopGroups();
            };
            //! すべてのグループを展開 (1階層)
            ExpandableListView.prototype.expandAll = function () {
                this._expandManager.expandAll();
            };
            //! すべてのグループを収束 (1階層)
            ExpandableListView.prototype.collapseAll = function (delay) {
                this._expandManager.collapseAll(delay);
            };
            //! 展開中か判定
            ExpandableListView.prototype.isExpanding = function () {
                return this._expandManager.isExpanding();
            };
            //! 収束中か判定
            ExpandableListView.prototype.isCollapsing = function () {
                return this._expandManager.isCollapsing();
            };
            //! 開閉中か判定
            ExpandableListView.prototype.isSwitching = function () {
                return this._expandManager.isSwitching();
            };
            //! 状態変数の参照カウントのインクリメント
            ExpandableListView.prototype.statusAddRef = function (status) {
                return this._statusMgr.statusAddRef(status);
            };
            //! 状態変数の参照カウントのデクリメント
            ExpandableListView.prototype.statusRelease = function (status) {
                return this._statusMgr.statusRelease(status);
            };
            //! 処理スコープ毎に状態変数を設定
            ExpandableListView.prototype.statusScope = function (status, callback) {
                this._statusMgr.statusScope(status, callback);
            };
            //! 指定した状態中であるか確認
            ExpandableListView.prototype.isStatusIn = function (status) {
                return this._statusMgr.isStatusIn(status);
            };
            Object.defineProperty(ExpandableListView.prototype, "layoutKey", {
                //! layout key を取得
                get: function () {
                    return this._expandManager.layoutKey;
                },
                //! layout key を設定
                set: function (key) {
                    this._expandManager.layoutKey = key;
                },
                enumerable: true,
                configurable: true
            });
            ///////////////////////////////////////////////////////////////////////
            // Override: ListView
            //! データを破棄
            ExpandableListView.prototype.release = function () {
                _super.prototype.release.call(this);
                this._expandManager.release();
            };
            //! 内部データをバックアップ
            ExpandableListView.prototype.backup = function (key) {
                return this._expandManager.backup(key);
            };
            //! 内部データをリストア
            ExpandableListView.prototype.restore = function (key, rebuild) {
                if (rebuild === void 0) { rebuild = true; }
                return this._expandManager.restore(key, rebuild);
            };
            return ExpandableListView;
        }(UI.ListView));
        UI.ExpandableListView = ExpandableListView;
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));

return CDP.UI; }));
/*!
 * cdp.ui.jqm.js 2.0.0
 *
 * Date: 2017-07-24T05:06:19.205Z
 */
(function (root, factory) { if (typeof define === "function" && define.amd) { define("cdp.ui.jqm",["cdp.framework.jqm", "cdp.tools", "cdp.ui.listview"], function () { return factory(root.CDP || (root.CDP = {})); }); } else { factory(root.CDP || (root.CDP = {})); } }(this, function (CDP) { CDP.UI = CDP.UI || {};
var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var Config = CDP.Config;
        var Framework = CDP.Framework;
        var TAG = "[CDP.UI.Theme] ";
        //__________________________________________________________________________________________________________//
        /**
         * @class Theme
         * @brief UI Theme 設定を行うユーティリティクラス
         */
        var Theme = (function () {
            function Theme() {
            }
            ///////////////////////////////////////////////////////////////////////
            // public static methods:
            /**
             * Theme の初期化
             *
             * @param options オプション指定
             * @returns true: 成功 / false: 失敗
             */
            Theme.initialize = function (options) {
                var opt = $.extend({}, {
                    platform: "auto",
                    reserveScrollbarRegion: true,
                }, options);
                if ("auto" === opt.platform) {
                    return Theme.detectUIPlatform(opt.reserveScrollbarRegion);
                }
                else {
                    if (Theme.setCurrentUIPlatform(opt.platform)) {
                        return opt.platform;
                    }
                    else {
                        console.warn(TAG + "setCurrentUIPlatform(), failed. platform: " + opt.platform);
                    }
                }
            };
            /**
             * 現在指定されている UI Platform を取得
             *
             * @return {String} ex) "ios"
             */
            Theme.getCurrentUIPlatform = function () {
                var $htms = $("html");
                for (var i = 0, n = Theme.s_platforms.length; i < n; i++) {
                    if ($htms.hasClass("ui-platform-" + Theme.s_platforms[i])) {
                        return Theme.s_platforms[i];
                    }
                }
                return null;
            };
            /**
             * UI Platform を設定
             *
             * @return {String} true: 成功 / false: 失敗
             */
            Theme.setCurrentUIPlatform = function (platform) {
                if (null == platform || Theme.s_platforms.indexOf(platform) >= 0) {
                    var $htms_1 = $("html");
                    Theme.s_platforms.forEach(function (target) {
                        $htms_1.removeClass("ui-platform-" + target);
                    });
                    if (platform) {
                        $htms_1.addClass("ui-platform-" + platform);
                    }
                    return true;
                }
                else {
                    return false;
                }
            };
            /**
             * 現在の Platform を判定し最適な platform を自動決定
             *
             * @param reserveScrollbarRegion PC デバッグ環境ではスクロールバーを表示. default: true
             * @returns ex) "ios"
             */
            Theme.detectUIPlatform = function (reserveScrollbarRegion) {
                if (reserveScrollbarRegion === void 0) { reserveScrollbarRegion = true; }
                var platform = "";
                // platform の設定
                if (Framework.Platform.iOS) {
                    $("html").addClass("ui-platform-ios");
                    platform = "ios";
                }
                else {
                    $("html").addClass("ui-platform-android");
                    platform = "android";
                }
                // PC デバッグ環境ではスクロールバーを表示
                if (Config.DEBUG && reserveScrollbarRegion && !Framework.Platform.Mobile) {
                    $("body").css("overflow-y", "scroll");
                }
                return platform;
            };
            /**
             * platform を配列で登録
             * 上書きされる
             *
             * @param {String[]} platforms [in] OS ex): ["ios", "android"]
             */
            Theme.registerUIPlatforms = function (platforms) {
                if (platforms) {
                    Theme.s_platforms = platforms;
                }
            };
            /**
             * page transition を登録
             * 上書きされる
             *
             * @param {TransitionMap} map [in] TransitionMap を指定
             */
            Theme.registerPageTransitionMap = function (map) {
                if (map) {
                    Theme.s_pageTransitionMap = map;
                }
            };
            /**
             * dialog transition を登録
             * 上書きされる
             *
             * @param {TransitionMap} map [in] TransitionMap を指定
             */
            Theme.registerDialogTransitionMap = function (map) {
                if (map) {
                    Theme.s_dialogTransitionMap = map;
                }
            };
            /**
             * page transition を取得
             * TransitionMap にアサインされているものであれば変換
             *
             * @return {String[]} "slide"
             */
            Theme.queryPageTransition = function (original) {
                var convert = Theme.s_pageTransitionMap[original];
                if (convert) {
                    return convert[Theme.getCurrentUIPlatform()] || convert.fallback;
                }
                else {
                    return original;
                }
            };
            /**
             * dialog transition を取得
             * TransitionMap にアサインされているものであれば変換
             *
             * @return {String[]} "slide"
             */
            Theme.queryDialogTransition = function (original) {
                var convert = Theme.s_dialogTransitionMap[original];
                if (convert) {
                    return convert[Theme.getCurrentUIPlatform()] || convert.fallback;
                }
                else {
                    return original;
                }
            };
            Theme.s_platforms = ["ios", "android"];
            Theme.s_pageTransitionMap = {
                "platform-default": {
                    ios: "slide",
                    android: "floatup",
                    fallback: "slide",
                },
                "platform-alternative": {
                    ios: "slideup",
                    android: "floatup",
                    fallback: "slideup",
                },
            };
            Theme.s_dialogTransitionMap = {
                "platform-default": {
                    ios: "popzoom",
                    android: "crosszoom",
                    fallback: "none",
                },
            };
            return Theme;
        }());
        UI.Theme = Theme;
        //__________________________________________________________________________________________________________//
        // jquey.mobile.changePage() の Hook.
        function applyCustomChangePage() {
            var jqmChangePage = _.bind($.mobile.changePage, $.mobile);
            function customChangePage(to, options) {
                if (_.isString(to)) {
                    if (options && options.transition) {
                        options.transition = Theme.queryPageTransition(options.transition);
                    }
                }
                jqmChangePage(to, options);
            }
            $.mobile.changePage = customChangePage;
        }
        // framework 初期化後に適用
        Framework.waitForInitialize()
            .done(function () {
            applyCustomChangePage();
        });
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));
var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        //__________________________________________________________________________________________________________//
        /**
         * @class ExtensionManager
         * @brief 拡張機能を管理するユーティリティクラス
         */
        var ExtensionManager = (function () {
            function ExtensionManager() {
            }
            /**
             * DOM 拡張関数の登録
             *
             * @param {DomExtension} func [in] DOM 拡張関数
             */
            ExtensionManager.registerDomExtension = function (func) {
                this.s_domExtensions.push(func);
            };
            /**
             * DOM 拡張を適用
             *
             * @param {jQuery} $ui       [in] 拡張対象の DOM
             * @param {Object} [options] [in] オプション
             */
            ExtensionManager.applyDomExtension = function ($ui, options) {
                this.s_domExtensions.forEach(function (func) {
                    func($ui, options);
                });
            };
            ExtensionManager.s_domExtensions = [];
            return ExtensionManager;
        }());
        UI.ExtensionManager = ExtensionManager;
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));
/* tslint:disable:no-bitwise */
var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var TAG = "[CDP.UI.Toast] ";
        /**
         * @class Toast
         * @brief Android SDK の Toast クラスのように自動消滅するメッセージ出力ユーティリティ
         *        入れ子の関係を実現するために module で実装
         */
        var Toast;
        (function (Toast) {
            // 表示時間の定義
            Toast.LENGTH_SHORT = 1500; //!< 短い:1500 msec
            Toast.LENGTH_LONG = 4000; //!< 長い:4000 msec
            //! @enum オフセットの基準
            var OffsetX;
            (function (OffsetX) {
                OffsetX[OffsetX["LEFT"] = 1] = "LEFT";
                OffsetX[OffsetX["RIGHT"] = 2] = "RIGHT";
                OffsetX[OffsetX["CENTER"] = 4] = "CENTER";
            })(OffsetX = Toast.OffsetX || (Toast.OffsetX = {}));
            //! @enum オフセットの基準
            var OffsetY;
            (function (OffsetY) {
                OffsetY[OffsetY["TOP"] = 16] = "TOP";
                OffsetY[OffsetY["BOTTOM"] = 32] = "BOTTOM";
                OffsetY[OffsetY["CENTER"] = 64] = "CENTER";
            })(OffsetY = Toast.OffsetY || (Toast.OffsetY = {}));
            /**
             * @class StyleBuilderDefault
             * @brief スタイル変更時に使用する既定の構造体オブジェクト
             */
            var StyleBuilderDefault = (function () {
                function StyleBuilderDefault() {
                }
                //! class attribute に設定する文字列を取得
                StyleBuilderDefault.prototype.getClass = function () {
                    return "ui-loader ui-overlay-shadow ui-corner-all";
                };
                //! style attribute に設定する JSON オブジェクトを取得
                StyleBuilderDefault.prototype.getStyle = function () {
                    var style = {
                        "padding": "7px 25px 7px 25px",
                        "display": "block",
                        "background-color": "#1d1d1d",
                        "border-color": "#1b1b1b",
                        "color": "#fff",
                        "text-shadow": "0 1px 0 #111",
                        "font-weight": "bold",
                        "opacity": 0.8,
                    };
                    return style;
                };
                //! オフセットの基準位置を取得
                StyleBuilderDefault.prototype.getOffsetPoint = function () {
                    return OffsetX.CENTER | OffsetY.BOTTOM;
                };
                //! X 座標のオフセット値を取得
                StyleBuilderDefault.prototype.getOffsetX = function () {
                    return 0;
                };
                //! Y 座標のオフセット値を取得
                StyleBuilderDefault.prototype.getOffsetY = function () {
                    return -75;
                };
                return StyleBuilderDefault;
            }());
            Toast.StyleBuilderDefault = StyleBuilderDefault;
            /**
             * Toast 表示
             *
             * @param message  [in] メッセージ
             * @param duration [in] 表示時間を設定 (msec) default: LENGTH_SHORT
             * @param style    [in] スタイル変更する場合には派生クラスオブジェクトを指定
             */
            function show(message, duration, style) {
                if (duration === void 0) { duration = Toast.LENGTH_SHORT; }
                var $mobile = $.mobile;
                var info = style || new StyleBuilderDefault();
                var setCSS = info.getStyle() ? true : false;
                // 改行コードは <br/> に置換する
                var msg = message.replace(/\n/g, "<br/>");
                // メッセージ element の動的生成
                var html = "<div>" + msg + "</div>";
                var box = $(html).addClass(info.getClass());
                if (setCSS) {
                    box.css(info.getStyle());
                }
                // 自動改行されてもよいように、基点を設定してから追加
                box.css({
                    "top": 0,
                    "left": 0,
                }).appendTo($mobile.pageContainer);
                // 配置位置の決定
                var offsetPoint = info.getOffsetPoint();
                var $window = $(window);
                var posX, posY;
                var box_width = box.width() + parseInt(box.css("padding-left"), 10) + parseInt(box.css("padding-right"), 10);
                var box_height = box.height() + parseInt(box.css("padding-top"), 10) + parseInt(box.css("padding-bottom"), 10);
                switch (offsetPoint & 0x000F) {
                    case OffsetX.LEFT:
                        posX = 0 + info.getOffsetX();
                        break;
                    case OffsetX.RIGHT:
                        posX = $window.width() - box_width + info.getOffsetX();
                        break;
                    case OffsetX.CENTER:
                        posX = ($window.width() / 2) - (box_width / 2) + info.getOffsetX();
                        break;
                    default:
                        console.warn(TAG + "warn. unknown offsetPoint:" + (offsetPoint & 0x000F));
                        posX = ($window.width() / 2) - (box_width / 2) + info.getOffsetX();
                        break;
                }
                switch (offsetPoint & 0x00F0) {
                    case OffsetY.TOP:
                        posY = 0 + info.getOffsetY();
                        break;
                    case OffsetY.BOTTOM:
                        posY = $window.height() - box_height + info.getOffsetY();
                        break;
                    case OffsetY.CENTER:
                        posY = ($window.height() / 2) - (box_height / 2) + info.getOffsetY();
                        break;
                    default:
                        console.warn(TAG + "warn. unknown offsetPoint:" + (offsetPoint & 0x00F0));
                        posY = ($window.height() / 2) - (box_height / 2) + info.getOffsetY();
                        break;
                }
                // 表示
                box.css({
                    "top": posY,
                    "left": posX,
                })
                    .delay(duration)
                    .fadeOut(400, function () {
                    $(this).remove();
                });
            }
            Toast.show = show;
        })(Toast = UI.Toast || (UI.Toast = {}));
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));
var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var Promise = CDP.Promise;
        var Framework = CDP.Framework;
        var TAG = "[CDP.UI.Dialog] ";
        //___________________________________________________________________________________________________________________//
        /**
         * @class Dialog
         * @brief 汎用ダイアログクラス
         *        jQM の popup widget によって実装
         */
        var Dialog = (function () {
            /**
             * constructor
             *
             * @param id      {String}        [in] ダイアログ DOM ID を指定 ex) #dialog-hoge
             * @param options {DialogOptions} [in] オプション
             */
            function Dialog(id, options) {
                this._template = null;
                this._settings = null;
                this._$dialog = null;
                // Dialog 共通設定の初期化
                Dialog.initCommonCondition();
                // 設定を更新
                this._settings = $.extend({}, Dialog.s_defaultOptions, options);
                // ダイアログテンプレートを作成
                this._template = CDP.Tools.Template.getJST(id, this._settings.src);
            }
            ///////////////////////////////////////////////////////////////////////
            // public methods
            /**
             * 表示
             * 表示をして始めて DOM が有効になる。
             *
             * @param options {DialogOptions} [in] オプション (src は無視される)
             * @return ダイアログの jQuery オブジェクト
             */
            Dialog.prototype.show = function (options) {
                var _this = this;
                var $document = $(document);
                var $body = $("body");
                var $page = $body.pagecontainer("getActivePage");
                var ofcHidden = {
                    "overflow": "hidden",
                    "overflow-x": "hidden",
                    "overflow-y": "hidden",
                };
                var ofcBody = {
                    "overflow": $body.css("overflow"),
                    "overflow-x": $body.css("overflow-x"),
                    "overflow-y": $body.css("overflow-y"),
                };
                var parentScrollPos = $body.scrollTop();
                var ofcPage = {
                    "overflow": $page.css("overflow"),
                    "overflow-x": $page.css("overflow-x"),
                    "overflow-y": $page.css("overflow-y"),
                };
                var scrollEvent = "scroll touchmove mousemove MSPointerMove";
                var scrollHander = function (event) {
                    if ("deny" === _this._settings.scrollEvent) {
                        event.preventDefault();
                    }
                    else if ("adjust" === _this._settings.scrollEvent) {
                        $body.scrollTop(parentScrollPos);
                    }
                };
                // option が指定されていた場合更新
                if (null != options) {
                    this._settings = $.extend({}, this._settings, options);
                }
                // afterclose 処理は Dialog の破棄処理を実装するため基本的に設定禁止 (強制上書きモードを設定使用可)
                if (this._settings.afterclose && !this._settings.forceOverwriteAfterClose) {
                    console.warn(TAG + "cannot accept 'afterclose' option. please instead using 'popupafterclose' event.");
                    delete this._settings.afterclose;
                }
                // title の有無
                this._settings._titleState = this._settings.title ? "ui-has-title" : "ui-no-title";
                /*
                 * template から jQuery オブジェクトを作成し、
                 * <body> 直下に追加.
                 * $page では Backbone event を受けられないことに注意
                 */
                this._$dialog = $(this._template(this._settings));
                this._$dialog.localize();
                $body.append(this._$dialog);
                // theme を解決
                this.resolveTheme();
                this._$dialog
                    .on("popupcreate", function (event) {
                    // スクロールを抑止
                    if ("allow" !== _this._settings.scrollEvent) {
                        $document.on(scrollEvent, scrollHander);
                    }
                    $body.css(ofcHidden);
                    $page.css(ofcHidden);
                    Dialog.register(_this);
                })
                    .enhanceWithin();
                // DOM 拡張
                if (null != this._settings.domExtensionOptions) {
                    UI.ExtensionManager.applyDomExtension(this._$dialog, this._settings.domExtensionOptions);
                }
                this.onBeforeShow()
                    .done(function () {
                    // 表示
                    _this._$dialog
                        .popup($.extend({}, {
                        positionTo: "window",
                        afterclose: function (event, ui) {
                            // スクロール状態を戻す
                            $page.css(ofcPage);
                            $body.css(ofcBody);
                            if ("allow" !== _this._settings.scrollEvent) {
                                $document.off(scrollEvent, scrollHander);
                            }
                            Dialog.register(null);
                            _this._$dialog.remove();
                            _this._$dialog = null;
                        },
                    }, _this._settings))
                        .popup("open").on(_this._settings.event, function (event) {
                        // "data-auto-close='false'" が指定されている要素は dialog を閉じない
                        var autoClose = $(event.target).attr("data-auto-close");
                        if (null == autoClose) {
                            autoClose = _this._settings.defaultAutoClose ? "true" : "false";
                        }
                        if ("false" === autoClose) {
                            return;
                        }
                        _this.close();
                        event.preventDefault();
                    });
                })
                    .fail(function (error) {
                    console.error(TAG + "Dialog.show() failed.");
                    if (_this._$dialog) {
                        _this._$dialog.trigger("error", error);
                    }
                });
                return this._$dialog;
            };
            /**
             * 終了
             * 基本的には自動で閉じるが、
             * 表示中のダイアログをクライアント側から閉じるメソッド
             */
            Dialog.prototype.close = function () {
                if (this._$dialog) {
                    this._$dialog.popup("close");
                }
            };
            Object.defineProperty(Dialog.prototype, "$el", {
                //! ダイアログ element を取得
                get: function () {
                    return this._$dialog;
                },
                enumerable: true,
                configurable: true
            });
            ///////////////////////////////////////////////////////////////////////
            // protected methods: Override
            /**
             * ダイアログ表示の直前
             * DOM を操作できるタイミングで呼び出される.
             *
             * @return {IPromiseBase} promise オブジェクト
             */
            Dialog.prototype.onBeforeShow = function () {
                return Promise.resolve();
            };
            /**
             * ダイアログの使用する Theme を解決
             * 不要な場合はオーバーライドすることも可能
             */
            Dialog.prototype.resolveTheme = function () {
                var queryTheme = function () {
                    return $(".ui-page-active").jqmData("theme");
                };
                var candidateTheme;
                if (!this._settings.theme) {
                    var domTheme = this._$dialog.jqmData("theme");
                    if (!domTheme) {
                        this._settings.theme = candidateTheme = queryTheme();
                    }
                }
                if (!this._settings.overlayTheme) {
                    var domOverlayTheme = this._$dialog.jqmData("overlay-theme");
                    if (!domOverlayTheme) {
                        this._settings.overlayTheme = candidateTheme || queryTheme();
                    }
                }
                // transition の更新
                this._settings.transition = UI.Theme.queryDialogTransition(this._settings.transition);
            };
            ///////////////////////////////////////////////////////////////////////
            // public static methods
            /**
             * Dialog の既定オプションを更新
             * すぺての Dialog が使用する共通設定
             *
             * @param options {DialogOptions} [in] ダイアログオプション
             */
            Dialog.setDefaultOptions = function (options) {
                // Dialog 共通設定の初期化
                Dialog.initCommonCondition();
                $.extend(true, Dialog.s_defaultOptions, options);
            };
            ///////////////////////////////////////////////////////////////////////
            // private methods
            //! 現在 active なダイアログとして登録する
            Dialog.register = function (dialog) {
                if (null != dialog && null != Dialog.s_activeDialog) {
                    console.warn(TAG + "new dialog proc is called in the past dialog's one. use setTimeout() for post process.");
                }
                Dialog.s_activeDialog = dialog;
            };
            /**
             * Dialog 共通設定の初期化
             */
            Dialog.initCommonCondition = function () {
                // Framework の初期化後に処理する必要がある
                if (!Framework.isInitialized()) {
                    console.warn(TAG + "initCommonCondition() should be called after Framework.initialized.");
                    return;
                }
                if (null == Dialog.s_oldBackKeyHandler) {
                    // Back Button Handler
                    Dialog.s_oldBackKeyHandler = CDP.setBackButtonHandler(null);
                    CDP.setBackButtonHandler(Dialog.customBackKeyHandler);
                    // 既定オプション
                    Dialog.s_defaultOptions = {
                        idPositive: "dlg-btn-positive",
                        idNegative: "dlg-btn-negative",
                        event: Framework.getDefaultClickEvent(),
                        dismissible: false,
                        defaultAutoClose: false,
                        transition: "platform-default",
                        labelPositive: "OK",
                        labelNegative: "Cancel",
                        backKey: "close",
                        scrollEvent: "deny",
                        domExtensionOptions: {},
                    };
                }
            };
            /**
             * H/W Back Button Handler
             */
            Dialog.customBackKeyHandler = function (event) {
                if (null != Dialog.s_activeDialog) {
                    if ("close" === Dialog.s_activeDialog._settings.backKey) {
                        Dialog.s_activeDialog.close();
                    }
                    else if ("function" === typeof Dialog.s_activeDialog._settings.backKey) {
                        Dialog.s_activeDialog._settings.backKey(event);
                    }
                    return; // Dialog が active な場合、常に既定のハンドラには渡さない
                }
                Dialog.s_oldBackKeyHandler(event);
            };
            Dialog.s_activeDialog = null;
            Dialog.s_oldBackKeyHandler = null;
            Dialog.s_defaultOptions = null;
            return Dialog;
        }());
        UI.Dialog = Dialog;
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));
/* tslint:disable:max-line-length */
var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var TAG = "[CDP.UI.DialogCommons] ";
        /**
         * Alert
         * alert メッセージ表示
         *
         * @param {String} message   [in] 表示文字列
         * @param {String} [options] [in] ダイアログオプション
         * @return {jQuery} ダイアログの DOM オブジェクト
         */
        function alert(message, options) {
            var template = "\n            <script type=\"text/template\">\n                <section class=\"ui-modal\" data-role=\"popup\" data-corners=\"false\">\n                    <div class=\"ui-content\">\n                        <h1 class=\"ui-title {{_titleState}}\">{{title}}</h1>\n                        <p class=\"ui-message\">{{message}}</p>\n                    </div>\n                    <div class=\"ui-modal-footer ui-grid-solo\">\n                        <button id=\"{{idPositive}}\" class=\"ui-btn ui-block-a ui-text-emphasis\" data-auto-close=\"true\">{{labelPositive}}</button>\n                    </div>\n                </section>\n            </script>\n        ";
            var dlgAlert = new UI.Dialog(template, $.extend({}, {
                src: null,
                message: message,
            }, options));
            return dlgAlert.show();
        }
        UI.alert = alert;
        /**
         * Confirm
         * 確認メッセージ表示
         *
         * @param {String} message   [in] 表示文字列
         * @param {String} [options] [in] ダイアログオプション
         * @return {jQuery} ダイアログの DOM オブジェクト
         */
        function confirm(message, options) {
            var template = "\n            <script type=\"text/template\">\n                <section class=\"ui-modal\" data-role=\"popup\" data-corners=\"false\">\n                    <div class=\"ui-content\">\n                        <h1 class=\"ui-title {{_titleState}}\">{{title}}</h1>\n                        <p class=\"ui-message\">{{message}}</p>\n                    </div>\n                    <div class=\"ui-modal-footer ui-grid-a\">\n                        <button id=\"{{idNegative}}\" class=\"ui-btn ui-block-a\" data-auto-close=\"true\">{{labelNegative}}</button>\n                        <button id=\"{{idPositive}}\" class=\"ui-btn ui-block-b ui-text-emphasis\" data-auto-close=\"true\">{{labelPositive}}</button>\n                    </div>\n                </section>\n            </script>\n        ";
            var dlgConfirm = new UI.Dialog(template, $.extend({}, {
                src: null,
                message: message,
            }, options));
            return dlgConfirm.show();
        }
        UI.confirm = confirm;
        /**
         * @class DialogPrompt
         * @brief prompt ダイアログ (非公開)
         */
        var DialogPrompt = (function (_super) {
            __extends(DialogPrompt, _super);
            /**
             * constructor
             *
             */
            function DialogPrompt(id, options) {
                var _this = _super.call(this, id, options) || this;
                _this._eventOK = options.eventOK || "promptok";
                return _this;
            }
            //! ダイアログ表示の直前
            DialogPrompt.prototype.onBeforeShow = function () {
                var _this = this;
                var onCommit = function (event) {
                    var text = _this.$el.find("#_ui-prompt").val();
                    _this.$el.trigger(_this._eventOK, text);
                    _this.close();
                    event.preventDefault();
                };
                this.$el
                    .on("vclick", ".command-prompt-ok ", function (event) {
                    onCommit(event);
                })
                    .on("keydown", "#_ui-prompt", function (event) {
                    var ENTER_KEY_CODE = 13;
                    if (ENTER_KEY_CODE === event.keyCode) {
                        onCommit(event);
                    }
                });
                return _super.prototype.onBeforeShow.call(this);
            };
            return DialogPrompt;
        }(UI.Dialog));
        /**
         * Prompt
         *
         * @param {String} message   [in] 表示文字列
         * @param {String} [options] [in] ダイアログオプション
         * @return {jQuery} ダイアログの DOM オブジェクト
         */
        function prompt(message, options) {
            var template = "\n            <script type=\"text/template\">\n                <section class=\"ui-modal\" data-role=\"popup\" data-corners=\"false\">\n                    <div class=\"ui-content\">\n                        <h1 class=\"ui-title {{_titleState}}\">{{title}}</h1>\n                        <p class=\"ui-message\">{{message}}</p>\n                        <label for=\"_ui-prompt\" class=\"ui-hidden-accessible\"></label>\n                        <input type=\"text\" name=\"_ui-prompt\" id=\"_ui-prompt\">\n                    </div>\n                    <div class=\"ui-modal-footer ui-grid-a\">\n                        <button id=\"{{idNegative}}\" class=\"ui-btn ui-block-a\" data-auto-close=\"true\">{{labelNegative}}</button>\n                        <button id=\"{{idPositive}}\" class=\"command-prompt-ok ui-btn ui-block-b ui-text-emphasis\" data-auto-close=\"false\">{{labelPositive}}</button>\n                    </div>\n                </section>\n            </script>\n        ";
            var dlgPrompt = new DialogPrompt(template, $.extend({}, {
                src: null,
                message: message,
            }, options));
            return dlgPrompt.show();
        }
        UI.prompt = prompt;
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));
var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var Router = CDP.Framework.Router;
        var View = CDP.Framework.View;
        var Template = CDP.Tools.Template;
        var TAG = "[CDP.UI.BaseHeaderView] ";
        //__________________________________________________________________________________________________________//
        /**
         * @class BaseHeaderView
         * @brief 共通ヘッダを操作するクラス
         */
        var BaseHeaderView = (function (_super) {
            __extends(BaseHeaderView, _super);
            /**
             * constructor
             *
             * @param {IPage} _owner [in] オーナーページインスタンス
             */
            function BaseHeaderView(_owner, _options) {
                var _this = _super.call(this, _options = $.extend({
                    el: _owner.$page.find("[data-role='header']"),
                    backCommandSelector: ".command-back",
                    backCommandKind: "pageback",
                }, _options)) || this;
                _this._owner = _owner;
                _this._options = _options;
                // template 設定
                if (_options.baseTemplate) {
                    _this._template = _options.baseTemplate;
                }
                else {
                    _this._template = Template.getJST("\n                    <script type='text/template'>\n                        <header class='ui-header-base ui-body-{{theme}}'>\n                            <div class='ui-fixed-back-indicator'></div>\n                        </header>\n                    </script>\n                ");
                }
                // Backbone.View 用の初期化
                _this.setElement(_this.$el, true);
                return _this;
            }
            ///////////////////////////////////////////////////////////////////////
            // public methods
            /**
             * 初期化
             */
            BaseHeaderView.prototype.create = function () {
                return this.createHeaderBase();
            };
            /**
             * 有効化
             */
            BaseHeaderView.prototype.activate = function () {
                return this.showIndicator();
            };
            /**
             * 無効化
             */
            BaseHeaderView.prototype.inactivate = function () {
                return this.hideIndicator();
            };
            /**
             * 破棄
             */
            BaseHeaderView.prototype.release = function () {
                return this.releaseHeaderBase();
            };
            ///////////////////////////////////////////////////////////////////////
            // private methods
            //! 共通ヘッダのベースを準備
            BaseHeaderView.prototype.createHeaderBase = function () {
                // 固定ヘッダのときに有効化
                if ("fixed" === this._owner.$header.jqmData("position")) {
                    if (null == BaseHeaderView.s_$headerBase) {
                        BaseHeaderView.s_$headerBase = $(this._template({
                            theme: this._owner.$page.jqmData("theme"),
                        }));
                    }
                    BaseHeaderView.s_refCount++;
                    BaseHeaderView.s_$headerBase.appendTo($(document.body));
                }
                // Back Indicator を持っているか判定
                if (0 < this.$el.find(".ui-back-indicator").length) {
                    this._hasBackIndicator = true;
                }
                return BaseHeaderView.s_$headerBase;
            };
            //! indicator の表示
            BaseHeaderView.prototype.showIndicator = function () {
                // Back Indicator を持っていない場合表示しない
                if (null != BaseHeaderView.s_$headerBase && this._hasBackIndicator) {
                    BaseHeaderView.s_$headerBase.find(".ui-fixed-back-indicator").addClass("show");
                }
                return BaseHeaderView.s_$headerBase;
            };
            //! indicator の非表示
            BaseHeaderView.prototype.hideIndicator = function () {
                if (null != BaseHeaderView.s_$headerBase) {
                    BaseHeaderView.s_$headerBase.find(".ui-fixed-back-indicator").removeClass("show");
                }
                return BaseHeaderView.s_$headerBase;
            };
            //! 共通ヘッダのベースを破棄
            BaseHeaderView.prototype.releaseHeaderBase = function () {
                // 固定ヘッダ時に参照カウントを管理
                if ("fixed" === this._owner.$header.jqmData("position")) {
                    if (null != BaseHeaderView.s_$headerBase) {
                        BaseHeaderView.s_refCount--;
                        if (0 === BaseHeaderView.s_refCount) {
                            BaseHeaderView.s_$headerBase.remove();
                            BaseHeaderView.s_$headerBase = null;
                        }
                    }
                }
                return BaseHeaderView.s_$headerBase;
            };
            ///////////////////////////////////////////////////////////////////////
            // Override: Backbone.View
            //! events binding
            BaseHeaderView.prototype.events = function () {
                var eventMap = {};
                if (this._options) {
                    eventMap["vclick " + this._options.backCommandSelector] = this.onCommandBack;
                }
                return eventMap;
            };
            //! back のハンドラ
            BaseHeaderView.prototype.onCommandBack = function (event) {
                event.preventDefault();
                var handled = false;
                if (this._owner) {
                    handled = this._owner.onCommand(event, this._options.backCommandKind);
                }
                if (!handled) {
                    Router.back();
                }
            };
            BaseHeaderView.s_refCount = 0; //!< 参照カウント
            return BaseHeaderView;
        }(View));
        UI.BaseHeaderView = BaseHeaderView;
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));
/* tslint:disable:max-line-length */
var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var Framework = CDP.Framework;
        var TAG = "[CDP.UI.BasePage] ";
        //__________________________________________________________________________________________________________//
        /**
         * @class BasePage
         * @brief Header を備える Page クラス
         */
        var BasePage = (function (_super) {
            __extends(BasePage, _super);
            /**
             * constructor
             *
             * @param {String}          url       [in] ページ URL
             * @param {String}          id        [in] ページ ID
             * @param {BasePageOptions} [options] [in] オプション
             */
            function BasePage(url, id, _options) {
                var _this = _super.call(this, url, id, _options = $.extend({
                    baseHeader: UI.BaseHeaderView,
                    backCommandHandler: "onPageBack",
                    backCommandKind: "pageback",
                    domExtensionOptions: {},
                }, _options)) || this;
                _this._options = _options;
                return _this;
            }
            ///////////////////////////////////////////////////////////////////////
            // Override: Framework Page
            /**
             * jQM event: "pagebeforecreate" に対応
             *
             * @param event {JQuery.Event} [in] イベントオブジェクト
             */
            BasePage.prototype.onPageBeforeCreate = function (event) {
                if (this._options.baseHeader) {
                    this._baseHeader = new this._options.baseHeader(this, this._options);
                    this._baseHeader.create();
                }
                _super.prototype.onPageBeforeCreate.call(this, event);
            };
            /**
             * jQM event: "pagecreate" に対応
             *
             * @param event {JQuery.Event} [in] イベントオブジェクト
             */
            BasePage.prototype.onPageInit = function (event) {
                if (null != this._options.domExtensionOptions) {
                    UI.ExtensionManager.applyDomExtension(this.$page, this._options.domExtensionOptions);
                }
                _super.prototype.onPageInit.call(this, event);
            };
            /**
             * jQM event: "pagebeforeshow" に対応
             *
             * @param event {JQuery.Event} [in] イベントオブジェクト
             * @param data  {ShowEventData}     [in] 付加情報
             */
            BasePage.prototype.onPageBeforeShow = function (event, data) {
                if (this._baseHeader) {
                    this._baseHeader.activate();
                }
                _super.prototype.onPageBeforeShow.call(this, event, data);
            };
            /**
             * jQM event: "pagebeforehide" に対応
             *
             * @param event {JQuery.Event} [in] イベントオブジェクト
             * @param data  {HideEventData}     [in] 付加情報
             */
            BasePage.prototype.onPageBeforeHide = function (event, data) {
                if (this._baseHeader) {
                    this._baseHeader.inactivate();
                }
                _super.prototype.onPageBeforeHide.call(this, event, data);
            };
            /**
             * jQM event: "pageremove" に対応
             *
             * @param event {JQuery.Event} [in] イベントオブジェクト
             */
            BasePage.prototype.onPageRemove = function (event) {
                if (this._baseHeader) {
                    this._baseHeader.release();
                    this._baseHeader = null;
                }
                _super.prototype.onPageRemove.call(this, event);
            };
            /**
             * H/W Back Button ハンドラ
             *
             * @param  event {JQuery.Event} [in] event object
             * @return {Boolean} true: 既定の処理を行わない / false: 既定の処理を行う
             */
            BasePage.prototype.onHardwareBackButton = function (event) {
                var retval = _super.prototype.onHardwareBackButton.call(this, event);
                if (!retval) {
                    retval = this.onCommand(event, this._options.backCommandKind);
                }
                return retval;
            };
            ///////////////////////////////////////////////////////////////////////
            // Override: Custom Event
            /**
             * "戻る" event 発行時にコールされる
             *
             * @param event {JQuery.Event} [in] イベントオブジェクト
             * @return {Boolean} true: 既定の処理を行わない / false: 既定の処理を行う
             */
            BasePage.prototype.onCommand = function (event, kind) {
                if (this._options.backCommandKind === kind) {
                    if (this._owner && this._owner[this._options.backCommandHandler]) {
                        return this._owner[this._options.backCommandHandler](event);
                    }
                }
                return false;
            };
            return BasePage;
        }(Framework.Page));
        UI.BasePage = BasePage;
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));
/* tslint:disable:max-line-length */
var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var Promise = CDP.Promise;
        var Framework = CDP.Framework;
        var TAG = "[CDP.UI.PageView] ";
        /**
         * @class PageContainerView
         * @brief PageView と連携可能な コンテナビュークラス
         */
        var PageContainerView = (function (_super) {
            __extends(PageContainerView, _super);
            /**
             * constructor
             */
            function PageContainerView(options) {
                var _this = _super.call(this, options) || this;
                _this._owner = null;
                _this._owner = options.owner;
                if (options.$el) {
                    var delegates = _this.events ? true : false;
                    _this.setElement(options.$el, delegates);
                }
                return _this;
            }
            Object.defineProperty(PageContainerView.prototype, "owner", {
                ///////////////////////////////////////////////////////////////////////
                // short cut methods
                //! Owner 取得
                get: function () {
                    return this._owner;
                },
                enumerable: true,
                configurable: true
            });
            return PageContainerView;
        }(Framework.View));
        UI.PageContainerView = PageContainerView;
        /* tslint:enable:no-use-before-declare */
        //___________________________________________________________________________________________________________________//
        /**
         * @class PageView
         * @brief CDP.Framework.Page と Backbone.View の両方の機能を提供するページの基底クラス
         */
        var PageView = (function (_super) {
            __extends(PageView, _super);
            /**
             * constructor
             *
             * @param url     {String}                   [in] ページ URL
             * @param id      {String}                   [in] ページ ID
             * @param options {PageViewConstructOptions} [in] オプション
             */
            function PageView(url, id, options) {
                var _this = _super.call(this, options) || this;
                _this._pageOptions = null;
                _this._basePage = null;
                _this._statusMgr = null;
                // PageView 設定
                _this._pageOptions = $.extend({}, { owner: _this }, options);
                _this._basePage = _this._pageOptions.basePage ? new _this._pageOptions.basePage(url, id, _this._pageOptions) : new UI.BasePage(url, id, _this._pageOptions);
                // StatusManager
                _this._statusMgr = new UI.StatusManager();
                // Backbone.View 用の初期化
                var delegates = _this.events ? true : false;
                _this.setElement(_this.$page, delegates);
                return _this;
            }
            ///////////////////////////////////////////////////////////////////////
            // Implements: IStatusManager 状態管理
            /**
             * 状態変数の参照カウントのインクリメント
             *
             * @param status {String} [in] 状態識別子
             */
            PageView.prototype.statusAddRef = function (status) {
                return this._statusMgr.statusAddRef(status);
            };
            /**
             * 状態変数の参照カウントのデクリメント
             *
             * @param status {String} [in] 状態識別子
             */
            PageView.prototype.statusRelease = function (status) {
                return this._statusMgr.statusRelease(status);
            };
            /**
             * 処理スコープ毎に状態変数を設定
             *
             * @param status   {String}   [in] 状態識別子
             * @param callback {Function} [in] 処理コールバック
             */
            PageView.prototype.statusScope = function (status, callback) {
                this._statusMgr.statusScope(status, callback);
            };
            /**
             * 指定した状態中であるか確認
             *
             * @param status {String}   [in] 状態識別子
             * @return {Boolean} true: 状態内 / false: 状態外
             */
            PageView.prototype.isStatusIn = function (status) {
                return this._statusMgr.isStatusIn(status);
            };
            Object.defineProperty(PageView.prototype, "active", {
                ///////////////////////////////////////////////////////////////////////
                // IPage stub stuff.
                get: function () { return this._basePage.active; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(PageView.prototype, "url", {
                get: function () { return this._basePage.url; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(PageView.prototype, "id", {
                get: function () { return this._basePage ? this._basePage.id : null; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(PageView.prototype, "$page", {
                get: function () { return this._basePage.$page; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(PageView.prototype, "$header", {
                get: function () { return this._basePage.$header; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(PageView.prototype, "$footer", {
                get: function () { return this._basePage.$footer; },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(PageView.prototype, "intent", {
                get: function () { return this._basePage.intent; },
                set: function (newIntent) { this._basePage.intent = newIntent; },
                enumerable: true,
                configurable: true
            });
            /**
             * Orientation の変更を受信
             *
             * @param newOrientation {Orientation} [in] new orientation code.
             */
            PageView.prototype.onOrientationChanged = function (newOrientation) {
                // Override
            };
            /**
             * H/W Back Button ハンドラ
             *
             * @param  event {JQuery.Event} [in] event object
             * @return {Boolean} true: 既定の処理を行わない / false: 既定の処理を行う
             */
            PageView.prototype.onHardwareBackButton = function (event) {
                return false;
            };
            /**
             * Router "before route change" ハンドラ
             * ページ遷移直前に非同期処理を行うことが可能
             *
             * @return {IPromiseBase} Promise オブジェクト
             */
            PageView.prototype.onBeforeRouteChange = function () {
                return Promise.resolve();
            };
            /**
             * 汎用コマンドを受信
             *
             * @param  event {JQuery.Event} [in] event object
             * @param  event {kind}              [in] command kind string
             * @return {Boolean} true: 既定の処理を行わない / false: 既定の処理を行う
             */
            PageView.prototype.onCommand = function (event, kind) {
                return false;
            };
            /**
             * 最初の OnPageInit() のときにのみコールされる
             *
             * @param event {JQuery.Event} [in] イベントオブジェクト
             */
            PageView.prototype.onInitialize = function (event) {
                // Override
            };
            /**
             * jQM event: "pagebeforecreate" に対応
             *
             * @param event {JQuery.Event} [in] イベントオブジェクト
             */
            PageView.prototype.onPageBeforeCreate = function (event) {
                this.setElement(this.$page, true);
            };
            /**
             * jQM event: "pagecreate" (旧:"pageinit") に対応
             *
             * @param event {JQuery.Event} [in] イベントオブジェクト
             */
            PageView.prototype.onPageInit = function (event) {
                // Override
            };
            /**
             * jQM event: "pagebeforeshow" に対応
             *
             * @param event {JQuery.Event} [in] イベントオブジェクト
             * @param data  {ShowEventData}     [in] 付加情報
             */
            PageView.prototype.onPageBeforeShow = function (event, data) {
                // Override
            };
            /**
             * jQM event: "pagecontainershow" (旧:"pageshow") に対応
             *
             * @param event {JQuery.Event} [in] イベントオブジェクト
             * @param data  {ShowEventData}     [in] 付加情報
             */
            PageView.prototype.onPageShow = function (event, data) {
                // Override
            };
            /**
             * jQM event: "pagebeforehide" に対応
             *
             * @param event {JQuery.Event} [in] イベントオブジェクト
             * @param data  {HideEventData}     [in] 付加情報
             */
            PageView.prototype.onPageBeforeHide = function (event, data) {
                // Override
            };
            /**
             * jQM event: "pagecontainerhide" (旧:"pagehide") に対応
             *
             * @param event {JQuery.Event} [in] イベントオブジェクト
             * @param data  {HideEventData}     [in] 付加情報
             */
            PageView.prototype.onPageHide = function (event, data) {
                // Override
            };
            /**
             * jQM event: "pageremove" に対応
             *
             * @param event {JQuery.Event} [in] イベントオブジェクト
             */
            PageView.prototype.onPageRemove = function (event) {
                this.remove();
                this.el = null;
                this.$el = null;
            };
            return PageView;
        }(Framework.View));
        UI.PageView = PageView;
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));
/* tslint:disable:max-line-length */
var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var TAG = "[CDP.UI.PageListView] ";
        /**
         * @class PageListView
         * @brief 仮想リストビュー機能を持つ PageView クラス
         */
        var PageListView = (function (_super) {
            __extends(PageListView, _super);
            /**
             * constructor
             *
             * @param url     {String}                       [in] page template に使用する URL
             * @param id      {String}                       [in] page に振られた ID
             * @param options {PageListViewConstructOptions} [in] オプション
             */
            function PageListView(url, id, options) {
                var _this = _super.call(this, url, id, $.extend({}, {
                    autoDestoryElement: false,
                }, options)) || this;
                _this._scrollMgr = null; //!< scroll コアロジック
                _this._needRebuild = false; //!< ページ表示時に rebuild() をコールするための内部変数
                _this._scrollMgr = new UI.ScrollManager(options);
                return _this;
            }
            //! rebuild() のスケジューリング
            PageListView.prototype.reserveRebuild = function () {
                this._needRebuild = true;
            };
            ///////////////////////////////////////////////////////////////////////
            // Override: PageView
            //! Orientation の変更検知
            PageListView.prototype.onOrientationChanged = function (newOrientation) {
                this._scrollMgr.setBaseHeight(this.getPageBaseHeight());
            };
            //! ページ遷移直前イベント処理
            PageListView.prototype.onBeforeRouteChange = function () {
                if (this._pageOptions.autoDestoryElement) {
                    this._scrollMgr.destroy();
                }
                return _super.prototype.onBeforeRouteChange.call(this);
            };
            //! jQM event: "pagebeforeshow" に対応
            PageListView.prototype.onPageBeforeShow = function (event, data) {
                _super.prototype.onPageBeforeShow.call(this, event, data);
                this._scrollMgr.initialize(this.$page, this.getPageBaseHeight());
            };
            //! jQM event: "pagecontainershow" (旧:"pageshow") に対応
            PageListView.prototype.onPageShow = function (event, data) {
                _super.prototype.onPageShow.call(this, event, data);
                this._scrollMgr.setBaseHeight(this.getPageBaseHeight());
                if (this._needRebuild) {
                    this.rebuild();
                    this._needRebuild = false;
                }
            };
            //! jQM event: "pageremove" に対応
            PageListView.prototype.onPageRemove = function (event) {
                _super.prototype.onPageRemove.call(this, event);
                this.release();
            };
            ///////////////////////////////////////////////////////////////////////
            // Implements: IListView Profile 管理
            //! 初期化済みか判定
            PageListView.prototype.isInitialized = function () {
                return this._scrollMgr.isInitialized();
            };
            //! プロパティを指定して、ListItem を管理
            PageListView.prototype.addItem = function (height, initializer, info, insertTo) {
                this._addLine(new UI.LineProfile(this._scrollMgr, Math.floor(height), initializer, info), insertTo);
            };
            PageListView.prototype.removeItem = function (index, arg2, arg3) {
                this._scrollMgr.removeItem(index, arg2, arg3);
            };
            PageListView.prototype.getItemInfo = function (target) {
                return this._scrollMgr.getItemInfo(target);
            };
            //! アクティブページを更新
            PageListView.prototype.refresh = function () {
                this._scrollMgr.refresh();
            };
            //! 未アサインページを構築
            PageListView.prototype.update = function () {
                this._scrollMgr.update();
            };
            //! ページアサインを再構成
            PageListView.prototype.rebuild = function () {
                this._scrollMgr.rebuild();
            };
            //! 管轄データを破棄
            PageListView.prototype.release = function () {
                this._scrollMgr.release();
            };
            ///////////////////////////////////////////////////////////////////////
            // Implements: IListView Profile Backup / Restore
            //! 内部データをバックアップ
            PageListView.prototype.backup = function (key) {
                return this._scrollMgr.backup(key);
            };
            //! 内部データをリストア
            PageListView.prototype.restore = function (key, rebuild) {
                if (rebuild === void 0) { rebuild = true; }
                var retval = this._scrollMgr.restore(key, rebuild);
                if (retval && !rebuild) {
                    this.reserveRebuild();
                }
                return retval;
            };
            //! バックアップデータの有無
            PageListView.prototype.hasBackup = function (key) {
                return this._scrollMgr.hasBackup(key);
            };
            //! バックアップデータの破棄
            PageListView.prototype.clearBackup = function (key) {
                return this._scrollMgr.clearBackup(key);
            };
            Object.defineProperty(PageListView.prototype, "backupData", {
                //! バックアップデータにアクセス
                get: function () {
                    return this._scrollMgr.backupData;
                },
                enumerable: true,
                configurable: true
            });
            ///////////////////////////////////////////////////////////////////////
            // Implements: IListView Scroll
            //! スクロールイベントハンドラ設定/解除
            PageListView.prototype.setScrollHandler = function (handler, on) {
                this._scrollMgr.setScrollHandler(handler, on);
            };
            //! スクロール終了イベントハンドラ設定/解除
            PageListView.prototype.setScrollStopHandler = function (handler, on) {
                this._scrollMgr.setScrollStopHandler(handler, on);
            };
            //! スクロール位置を取得
            PageListView.prototype.getScrollPos = function () {
                return this._scrollMgr.getScrollPos();
            };
            //! スクロール位置の最大値を取得
            PageListView.prototype.getScrollPosMax = function () {
                return this._scrollMgr.getScrollPosMax();
            };
            //! スクロール位置を指定
            PageListView.prototype.scrollTo = function (pos, animate, time) {
                this._scrollMgr.scrollTo(pos, animate, time);
            };
            //! 指定された ListItemView の表示を保証
            PageListView.prototype.ensureVisible = function (index, options) {
                this._scrollMgr.ensureVisible(index, options);
            };
            Object.defineProperty(PageListView.prototype, "core", {
                ///////////////////////////////////////////////////////////////////////
                // Implements: IListView Properties
                //! core framework access
                get: function () {
                    return this._scrollMgr;
                },
                enumerable: true,
                configurable: true
            });
            ///////////////////////////////////////////////////////////////////////
            // Implements: IListView Internal I/F
            //! 登録 framework が使用する
            PageListView.prototype._addLine = function (_line, insertTo) {
                this._scrollMgr._addLine(_line, insertTo);
            };
            ///////////////////////////////////////////////////////////////////////
            // private method:
            //! ページの基準値を取得
            PageListView.prototype.getPageBaseHeight = function () {
                return $(window).height() - parseInt(this.$page.css("padding-top"), 10);
            };
            return PageListView;
        }(UI.PageView));
        UI.PageListView = PageListView;
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));
var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var TAG = "[CDP.UI.PageExpandableListView] ";
        /**
         * @class PageExpandableListView
         * @brief 開閉リストビュー機能を持つ PageView クラス
         */
        var PageExpandableListView = (function (_super) {
            __extends(PageExpandableListView, _super);
            /**
             * constructor
             *
             * @param url     {String}                       [in] page template に使用する URL
             * @param id      {String}                       [in] page に振られた ID
             * @param options {PageListViewConstructOptions} [in] オプション
             */
            function PageExpandableListView(url, id, options) {
                var _this = _super.call(this, url, id, options) || this;
                _this._expandManager = null;
                _this._expandManager = new UI.ExpandManager(_this);
                return _this;
            }
            ///////////////////////////////////////////////////////////////////////
            // Implements: IExpandableListView
            //! 新規 GroupProfile を作成
            PageExpandableListView.prototype.newGroup = function (id) {
                return this._expandManager.newGroup(id);
            };
            //! 登録済み Group を取得
            PageExpandableListView.prototype.getGroup = function (id) {
                return this._expandManager.getGroup(id);
            };
            //! 第1階層の Group 登録
            PageExpandableListView.prototype.registerTopGroup = function (topGroup) {
                this._expandManager.registerTopGroup(topGroup);
            };
            //! 第1階層の Group を取得
            PageExpandableListView.prototype.getTopGroups = function () {
                return this._expandManager.getTopGroups();
            };
            //! すべてのグループを展開 (1階層)
            PageExpandableListView.prototype.expandAll = function () {
                this._expandManager.expandAll();
            };
            //! すべてのグループを収束 (1階層)
            PageExpandableListView.prototype.collapseAll = function (delay) {
                this._expandManager.collapseAll(delay);
            };
            //! 展開中か判定
            PageExpandableListView.prototype.isExpanding = function () {
                return this._expandManager.isExpanding();
            };
            //! 収束中か判定
            PageExpandableListView.prototype.isCollapsing = function () {
                return this._expandManager.isCollapsing();
            };
            //! 開閉中か判定
            PageExpandableListView.prototype.isSwitching = function () {
                return this._expandManager.isSwitching();
            };
            Object.defineProperty(PageExpandableListView.prototype, "layoutKey", {
                //! layout key を取得
                get: function () {
                    return this._expandManager.layoutKey;
                },
                //! layout key を設定
                set: function (key) {
                    this._expandManager.layoutKey = key;
                },
                enumerable: true,
                configurable: true
            });
            ///////////////////////////////////////////////////////////////////////
            // Override: PageListView
            //! データを破棄
            PageExpandableListView.prototype.release = function () {
                _super.prototype.release.call(this);
                this._expandManager.release();
            };
            //! 内部データをバックアップ
            PageExpandableListView.prototype.backup = function (key) {
                return this._expandManager.backup(key);
            };
            //! 内部データをリストア
            PageExpandableListView.prototype.restore = function (key, rebuild) {
                if (rebuild === void 0) { rebuild = true; }
                return this._expandManager.restore(key, rebuild);
            };
            return PageExpandableListView;
        }(UI.PageListView));
        UI.PageExpandableListView = PageExpandableListView;
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));
var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var Extension;
        (function (Extension) {
            var Framework = CDP.Framework;
            // jQuery plugin
            $.fn.ripple = function (options) {
                var $el = $(this);
                if ($el.length <= 0) {
                    return $el;
                }
                return $el.on(Framework.Patch.s_vclickEvent, function (event) {
                    var surface = $(this);
                    // create surface if it doesn't exist
                    if (surface.find(".ui-ripple-ink").length === 0) {
                        surface.prepend("<div class='ui-ripple-ink'></div>");
                    }
                    var ink = surface.find(".ui-ripple-ink");
                    // stop the previous animation
                    ink.removeClass("ui-ripple-animate");
                    // ink size:
                    if (!ink.height() && !ink.width()) {
                        var d = Math.max(surface.outerWidth(), surface.outerHeight());
                        ink.css({ height: d, width: d });
                    }
                    var x = event.pageX - surface.offset().left - (ink.width() / 2);
                    var y = event.pageY - surface.offset().top - (ink.height() / 2);
                    var rippleColor = surface.data("ripple-color");
                    // animation end handler
                    var ANIMATION_END_EVENT = "animationend webkitAnimationEnd";
                    ink.on(ANIMATION_END_EVENT, function (ev) {
                        ink.off();
                        ink.removeClass("ui-ripple-animate");
                        ink = null;
                    });
                    // set the position and add class .animate
                    ink.css({
                        top: y + "px",
                        left: x + "px",
                        background: rippleColor
                    }).addClass("ui-ripple-animate");
                });
            };
            /**
             * Material Design Ripple 拡張
             *
             * @param {jQuery}              $ui       [in] 検索対象の jQuery オブジェクト
             * @param {DomExtensionOptions} [options] [in] オプション
             */
            function applyDomExtension($ui, options) {
                var NO_RIPPLE_CLASS = [
                    ".ui-ripple-none",
                    ".ui-flipswitch-on",
                    ".ui-slider-handle",
                    ".ui-input-clear",
                ];
                var selector = ".ui-btn";
                if ($ui.hasClass("ui-page")) {
                    selector = ".ui-content .ui-btn"; // header は自動 ripple 化対象外
                }
                $ui.find(selector)
                    .filter(function (index, elem) {
                    var $elem = $(elem);
                    if ($elem.is(NO_RIPPLE_CLASS.join(","))) {
                        return false;
                    }
                    else {
                        return true;
                    }
                })
                    .addClass("ui-ripple");
                // ripplify
                //        $ui.find(".ui-ripple").ripple(options);
                $ui.find(".ui-ripple")
                    .each(function (index, elem) {
                    $(elem).ripple(options);
                });
                return $ui;
            }
            // 登録
            UI.ExtensionManager.registerDomExtension(applyDomExtension);
        })(Extension = UI.Extension || (UI.Extension = {}));
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));
var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var Extension;
        (function (Extension) {
            var Template = CDP.Tools.Template;
            var _template;
            // jQuery plugin
            $.fn.spinner = function (options) {
                if ("string" === typeof options) {
                    return refresh($(this));
                }
                else {
                    return spinnerify($(this), options);
                }
            };
            function spinnerify($target, options) {
                if ($target.length <= 0) {
                    return $target;
                }
                if (!_template) {
                    _template = Template.getJST("\n                <script type=\"text/template\">\n                    <span class=\"ui-spinner-base\">\n                        <span class=\"ui-spinner-inner\">\n                            <span class=\"ui-spinner-inner-gap\" {{borderTop}}></span>\n                            <span class=\"ui-spinner-inner-left\">\n                                <span class=\"ui-spinner-inner-half-circle\" {{border}}></span>\n                            </span>\n                            <span class=\"ui-spinner-inner-right\">\n                                <span class=\"ui-spinner-inner-half-circle\" {{border}}></span>\n                            </span>\n                        </span>\n                    </span>\n                </script>\n            ");
                }
                var makeTemplateParam = function (clr) {
                    return {
                        borderTop: "style=border-top-color:" + clr + ";",
                        border: "style=border-color:" + clr + ";",
                    };
                };
                var color = $target.data("spinner-color");
                var param = null;
                if (color) {
                    $target.css({ "background-color": color });
                    param = makeTemplateParam(color);
                }
                $target.append(_template(param));
                return refresh($target);
            }
            // iOS 10.2+ SVG SMIL アニメーションが 2回目以降動かない問題の対策
            // data:image/svg+xml;<cache bust string>;base64,... とすることで data-url にも cache busting が有効になる
            function refresh($target) {
                var PREFIX = ["-webkit-", ""];
                var valid = function (prop) {
                    return (prop && "none" !== prop);
                };
                var dataUrl;
                for (var i = 0, n = PREFIX.length; i < n; i++) {
                    if (!valid(dataUrl)) {
                        dataUrl = $target.css(PREFIX[i] + "mask-image");
                        if (valid(dataUrl)) {
                            // iOS では url(data***); 内に '"' は入らない
                            var match = dataUrl.match(/(url\(data:image\/svg\+xml;)([\s\S]*)?(base64,[\s\S]*\))/);
                            if (match) {
                                dataUrl = match[1] + "bust=" + Date.now().toString(36) + ";" + match[3];
                            }
                            else {
                                dataUrl = null;
                            }
                        }
                    }
                    if (valid(dataUrl)) {
                        $target.css(PREFIX[i] + "mask-image", dataUrl);
                    }
                }
                return $target;
            }
            /**
             * Material Design Spinner 拡張
             *
             * @param {jQuery}              $ui       [in] 検索対象の jQuery オブジェクト
             * @param {DomExtensionOptions} [options] [in] オプション
             */
            function applyDomExtension($ui, options) {
                $ui.find(".ui-spinner, .ui-icon-loading")
                    .each(function (index, elem) {
                    $(elem).spinner(options);
                });
                return $ui;
            }
            // 登録
            UI.ExtensionManager.registerDomExtension(applyDomExtension);
        })(Extension = UI.Extension || (UI.Extension = {}));
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));
var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var Extension;
        (function (Extension) {
            /**
             * Text Input 用 Floating Label 拡張
             *
             * @param {jQuery}              $ui       [in] 検索対象の jQuery オブジェクト
             * @param {DomExtensionOptions} [options] [in] オプション
             */
            function applyDomExtension($ui, options) {
                var update = function (elem, floating) {
                    var $elem = $(elem);
                    if (floating) {
                        $elem.addClass("ui-float-label-floating");
                    }
                    else {
                        $elem.removeClass("ui-float-label-floating");
                    }
                };
                var floatingify = function (elem) {
                    var id = $(elem).attr("for");
                    var $input = $ui.find("#" + id);
                    if ("search" === $input.jqmData("type")) {
                        $(elem).addClass("ui-float-label-has-icon");
                    }
                    update(elem, !!$input.val());
                    $input.on("keyup change input focus blur cut paste", function (event) {
                        update(elem, !!$(event.target).val());
                    });
                };
                $ui.find("label.ui-float-label, .ui-float-label label")
                    .each(function (index, elem) {
                    floatingify(elem);
                });
                return $ui;
            }
            // 登録
            UI.ExtensionManager.registerDomExtension(applyDomExtension);
        })(Extension = UI.Extension || (UI.Extension = {}));
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));
var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var Extension;
        (function (Extension) {
            var Framework = CDP.Framework;
            /**
             * jQuery Mobile Flip Switch 拡張
             *
             * @param {jQuery}              $ui       [in] 検索対象の jQuery オブジェクト
             * @param {DomExtensionOptions} [options] [in] オプション
             */
            function applyDomExtension($ui, options) {
                /*
                 * flipswitch に紐づく label は OS によって event 発行形式が異なるためフックして独自イベントで対応する.
                 * また flipswitch は内部で click を発行しているが、vclick に変更する.
                 */
                var _getAllSwitches = function () {
                    return $ui.find(".ui-flipswitch");
                };
                var _getInputFromSwitch = function ($switch) {
                    var $input = $switch.find("input");
                    if ($input.length) {
                        return $input;
                    }
                    var $select = $switch.find("select");
                    if ($select.length) {
                        return $select;
                    }
                    return null;
                };
                var _change = function ($input, to) {
                    if ($input) {
                        if ("INPUT" === $input[0].nodeName) {
                            $input.prop("checked", to).flipswitch("refresh");
                        }
                        else if ("SELECT" === $input[0].nodeName) {
                            $input.val(to ? "on" : "off").flipswitch("refresh");
                        }
                    }
                };
                var _getLabelsFromSwitch = function ($switch) {
                    var $input = _getInputFromSwitch($switch);
                    if ($input) {
                        var labels = $input[0].labels;
                        if (labels) {
                            return $(labels);
                        }
                    }
                    return $();
                };
                var _getSwitchFromLabel = function ($label) {
                    var name = $label.attr("for");
                    return _getAllSwitches().find("[name='" + name + "']");
                };
                _getAllSwitches()
                    .on("vclick _change_flipswich", function (event) {
                    var $switch = $(event.currentTarget);
                    var $target = $(event.target);
                    var $input = _getInputFromSwitch($switch);
                    var changeTo = !$switch.hasClass("ui-flipswitch-active");
                    if ($target.hasClass("ui-flipswitch-input")) {
                        _change($input, changeTo);
                    }
                    else if ($target.hasClass("ui-flipswitch-on")) {
                        if (Framework.Platform.Mobile && Framework.Patch.isSupportedVclick()) {
                            _change($input, changeTo);
                            event.preventDefault();
                        }
                    }
                })
                    .each(function (index, flipswitch) {
                    _getLabelsFromSwitch($(flipswitch))
                        .on("vclick", function (event) {
                        var $switch = _getSwitchFromLabel($(event.target));
                        if (!$switch.parent().hasClass("ui-state-disabled")) {
                            $switch.trigger("_change_flipswich");
                        }
                        event.preventDefault();
                    });
                });
                return $ui;
            }
            // 登録
            UI.ExtensionManager.registerDomExtension(applyDomExtension);
        })(Extension = UI.Extension || (UI.Extension = {}));
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));
var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var Extension;
        (function (Extension) {
            /**
             * jQuery Mobile Slider 拡張
             *
             * @param {jQuery}              $ui       [in] 検索対象の jQuery オブジェクト
             * @param {DomExtensionOptions} [options] [in] オプション
             */
            function applyDomExtension($ui, options) {
                $ui.find(".ui-slider-input")
                    .on("slidestop", function (event) {
                    var $handles = $(event.currentTarget)
                        .parent()
                        .find(".ui-slider-handle");
                    $handles.blur();
                });
                return $ui;
            }
            // 登録
            UI.ExtensionManager.registerDomExtension(applyDomExtension);
        })(Extension = UI.Extension || (UI.Extension = {}));
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));
var CDP;
(function (CDP) {
    var UI;
    (function (UI) {
        var Extension;
        (function (Extension) {
            //! iScroll.click patch
            var patch_IScroll_utils_click = function (event) {
                var target = event.target;
                var e = event;
                var ev;
                // [CDP modified]: set target.clientX.
                if (null == target.clientX || null == target.clientY) {
                    if (null != e.pageX && null != e.pageY) {
                        target.clientX = e.pageX;
                        target.clientY = e.pageY;
                    }
                    else if (e.changedTouches && e.changedTouches[0]) {
                        target.clientX = e.changedTouches[0].pageX;
                        target.clientY = e.changedTouches[0].pageY;
                    }
                }
                if (!(/(SELECT|INPUT|TEXTAREA)/i).test(target.tagName)) {
                    ev = document.createEvent("MouseEvents");
                    ev.initMouseEvent("click", true, true, e.view, 1, target.screenX, target.screenY, target.clientX, target.clientY, e.ctrlKey, e.altKey, e.shiftKey, e.metaKey, 0, null);
                    ev._constructed = true;
                    target.dispatchEvent(ev);
                }
            };
            var s_applied = false;
            /**
             * iScroll Patch 拡張
             *
             * @param {jQuery}              $ui       [in] 検索対象の jQuery オブジェクト
             * @param {DomExtensionOptions} [options] [in] オプション
             */
            function applyPatch($ui, options) {
                if (!s_applied && UI.global.IScroll && UI.global.IScroll.utils) {
                    UI.global.IScroll.utils.click = patch_IScroll_utils_click;
                    s_applied = true;
                }
                return $ui;
            }
            // 登録
            UI.ExtensionManager.registerDomExtension(applyPatch);
        })(Extension = UI.Extension || (UI.Extension = {}));
    })(UI = CDP.UI || (CDP.UI = {}));
})(CDP || (CDP = {}));

return CDP.UI; }));
/*!
 * cdp.nativebridge.js 2.0.0
 *
 * Date: 2017-07-24T05:06:58.113Z
 */
(function (root, factory) { if (typeof define === "function" && define.amd) { define("cdp.nativebridge",["cdp.promise"], function () { return factory(root.CDP || (root.CDP = {}), root.jQuery || root.$); }); } else { factory(root.CDP || (root.CDP = {}), root.jQuery || root.$); } }(((this || 0).self || global), function (CDP, $) { CDP.NativeBridge = CDP.NativeBridge || {};

var CDP;
(function (CDP) {
    var NativeBridge;
    (function (NativeBridge) {
        var TAG = "[CDP.NativeBridge.Utils] ";
        /**
         * \~english
         * @class Utils
         * @brief The utility class for CDP.NativeBridge.
         *
         * \~japanese
         * @class Utils
         * @brief CDP.NativeBridge が使用するユーティリティクラス
         */
        var Utils = (function () {
            function Utils() {
            }
            ///////////////////////////////////////////////////////////////////////
            // public static methods
            /**
             * \~english
             * Defines error code map from the plugin result to CDP.NativeBridge result code.
             *
             * @param errorCode [in] set result code string. ex): "SUCCESS_OK"
             *
             * \~japanese
             * plugin の Result Code を CDP.NativeBridge にマップする
             *
             * @param errorCode [in] Result Code 文字列を指定 ex): "SUCCESS_OK"
             */
            Utils.defineResultCode = function (errorCode) {
                Object.defineProperty(NativeBridge, errorCode, {
                    get: function () {
                        if (Utils.s_pluginReady) {
                            return CDP.Plugin.NativeBridge[errorCode];
                        }
                        else {
                            return null;
                        }
                    },
                    enumerable: true,
                    configurable: true
                });
            };
            /**
             * \~english
             * Wait for cordova "deviceready" event fired.
             *
             * \~japanese
             * cordova が 使用可能になるまで待機
             */
            Utils.waitForPluginReady = function () {
                var df = $.Deferred();
                if (Utils.s_pluginReady) {
                    return $.Deferred().resolve();
                }
                try {
                    var channel = cordova.require("cordova/channel");
                    channel.onCordovaReady.subscribe(function () {
                        if (null != CDP.Plugin.NativeBridge) {
                            Utils.s_pluginReady = true;
                            df.resolve();
                        }
                        else {
                            df.reject(TAG + "'cordova-plugin-cdp-nativebridge' cordova plugin required.");
                        }
                    });
                }
                catch (error) {
                    df.reject(TAG + "cordova required.");
                }
                return df.promise();
            };
            /**
             * \~english
             * Create NativeBridge.Promise object from jQueryDeferred object.
             *
             * @param df [in] set jQueryDeferred instance.
             * @returns NativeBridge.Promise object.
             *
             * \~japanese
             * Promise オブジェクトの作成
             * jQueryDeferred オブジェクトから、NativeBridge.Promise オブジェクトを作成する
             *
             * @param df [in] jQueryDeferred instance を指定
             * @returns NativeBridge.Promise オブジェクト
             */
            Utils.makePromise = function (df) {
                return CDP.makePromise(df, {
                    _bridge: null,
                    _taskId: null,
                    abort: function (info) {
                        var _this = this;
                        var detail = $.extend({
                            code: NativeBridge.ERROR_CANCEL,
                            message: "abort",
                            name: TAG + "ERROR_CANCEL",
                            taskId: this._taskId,
                        }, info);
                        var cancel = function () {
                            if (null != _this._bridge && null != _this._taskId) {
                                _this._bridge.cancel(_this._taskId, detail);
                            }
                            df.reject(detail);
                        };
                        if (null != this.dependency) {
                            if (this.dependency.abort) {
                                this.dependency.abort(detail);
                            }
                            else {
                                console.error(TAG + "[call] dependency object doesn't have 'abort()' method.");
                            }
                            if (this.callReject && "pending" === this.state()) {
                                cancel();
                            }
                        }
                        else if ("pending" === this.state()) {
                            cancel();
                        }
                    }
                });
            };
            /**
             * \~english
             * Helper function to correctly set up the prototype chain, for subclasses.
             * The function behavior is same as extend() function of Backbone.js.
             *
             * @param protoProps  [in] set prototype properties as object.
             * @param staticProps [in] set static properties as object.
             * @returns subclass constructor.
             *
             * \~japanese
             * クラス継承のためのヘルパー関数
             * Backbone.js extend() 関数と同等
             *
             * @param protoProps  [in] prototype properties をオブジェクトで指定
             * @param staticProps [in] static properties をオブジェクトで指定
             * @returns サブクラスのコンストラクタ
             */
            Utils.extend = function (protoProps, staticProps) {
                var parent = this;
                var child;
                if (protoProps && protoProps.hasOwnProperty("constructor")) {
                    child = protoProps.constructor;
                }
                else {
                    child = function () {
                        return parent.apply(this, arguments);
                    };
                }
                $.extend(child, parent, staticProps);
                var Surrogate = function () {
                    this.constructor = child;
                };
                Surrogate.prototype = parent.prototype;
                child.prototype = new Surrogate;
                if (protoProps) {
                    $.extend(child.prototype, protoProps);
                }
                child.__super__ = parent.prototype;
                return child;
            };
            Utils.s_pluginReady = false;
            return Utils;
        }());
        NativeBridge.Utils = Utils;
    })(NativeBridge = CDP.NativeBridge || (CDP.NativeBridge = {}));
})(CDP || (CDP = {}));
var CDP;
(function (CDP) {
    var NativeBridge;
    (function (NativeBridge) {
        var TAG = "[CDP.NativeBridge.Gate] ";
        NativeBridge.Utils.defineResultCode("SUCCESS_OK");
        NativeBridge.Utils.defineResultCode("SUCCESS_PROGRESS");
        NativeBridge.Utils.defineResultCode("ERROR_FAIL");
        NativeBridge.Utils.defineResultCode("ERROR_CANCEL");
        NativeBridge.Utils.defineResultCode("ERROR_INVALID_ARG");
        NativeBridge.Utils.defineResultCode("ERROR_NOT_IMPLEMENT");
        NativeBridge.Utils.defineResultCode("ERROR_NOT_SUPPORT");
        NativeBridge.Utils.defineResultCode("ERROR_INVALID_OPERATION");
        NativeBridge.Utils.defineResultCode("ERROR_CLASS_NOT_FOUND");
        NativeBridge.Utils.defineResultCode("ERROR_METHOD_NOT_FOUND");
        //___________________________________________________________________________________________________________________//
        /**
         * \~english
         * @class Gate
         * @brief The base class for NativeBridge communication.
         *        You can derive any Gate class from this class.
         *
         * \~japanese
         * @class Gate
         * @brief NativeBridge と通信するベースクラス
         *        このクラスから任意の Gate クラスを派生して実装可能
         */
        var Gate = (function () {
            /* tslint:enable:no-unused-variable */
            /**
             * \~english
             * constructor
             *
             * @param feature [in] feature information.
             * @param options [in] construction options.
             *
             * \~japanese
             * constructor
             *
             * @param feature [in] 初期化情報を指定
             * @param options [in] オプションを指定
             */
            function Gate(feature, options) {
                var _this = this;
                this._options = $.extend({ receiveParams: true }, options);
                NativeBridge.Utils.waitForPluginReady()
                    .done(function () {
                    _this._bridge = new CDP.Plugin.NativeBridge(feature, options);
                })
                    .catch(function (reason) {
                    throw Error(reason);
                });
            }
            ///////////////////////////////////////////////////////////////////////
            // override methods
            /**
             * \~english
             * Execute task.
             * the function calls the Native class method from correspondent method name.
             *
             * @param method  [in] method name of Native class
             * @param args    [in] set arguments by array type.
             * @param options [in] set exec options.
             * @returns Promise object.
             *
             * \~japanese
             * タスクの実行
             * 指定した method 名に対応する Native Class の method を呼び出す。
             *
             * @param method  [in] Native Class のメソッド名を指定
             * @param args    [in] 引数を配列で指定
             * @param options [in] 実行オプションを指定
             * @returns Promise オブジェクト
             */
            Gate.prototype.exec = function (method, args, options) {
                var _this = this;
                var df = $.Deferred();
                var promise = NativeBridge.Utils.makePromise(df);
                var opt = $.extend({}, this._options, options);
                NativeBridge.Utils.waitForPluginReady()
                    .done(function () {
                    var taskId = _this._bridge.exec(function (result) {
                        if (NativeBridge.SUCCESS_PROGRESS === result.code) {
                            if (opt.receiveParams && null != result.params) {
                                df.notify.apply(df, result.params.concat([result]));
                            }
                            else {
                                df.notify(result);
                            }
                        }
                        else {
                            if (opt.receiveParams && null != result.params) {
                                df.resolve.apply(df, result.params.concat([result]));
                            }
                            else {
                                df.resolve(result);
                            }
                        }
                    }, function (error) {
                        df.reject(error);
                    }, method, args, options);
                    // set internal properties.
                    promise._bridge = _this._bridge;
                    promise._taskId = taskId;
                })
                    .catch(function () {
                    df.reject(_this.makeFatal());
                });
                return promise;
            };
            /**
             * \~english
             * Cancel all tasks.
             *
             * @param options [in] set execute options.
             * @returns Promise object.
             *
             * \~japanese
             * すべてのタスクのキャンセル
             *
             * @param options [in] 実行オプションを指定
             * @returns Promise オブジェクト
             */
            Gate.prototype.cancel = function (options) {
                var _this = this;
                var df = $.Deferred();
                NativeBridge.Utils.waitForPluginReady()
                    .done(function () {
                    _this._bridge.cancel(null, options, function (result) {
                        df.resolve(result);
                    }, function (error) {
                        df.reject(error);
                    });
                })
                    .catch(function () {
                    df.reject(_this.makeFatal());
                });
                return df.promise();
            };
            /**
             * \~english
             * Destruction for the instance.
             * release Native class reference. after that, exec() becomes invalid.
             *
             * @param options [in] set execute options.
             * @returns Promise object.
             *
             * \~japanese
             * インスタンスの破棄
             * Native の参照を解除する。以降、exec は無効となる。
             *
             * @param options [in] 実行オプションを指定
             * @returns Promise オブジェクト
             */
            Gate.prototype.dispose = function (options) {
                var _this = this;
                var df = $.Deferred();
                NativeBridge.Utils.waitForPluginReady()
                    .done(function () {
                    _this._bridge.dispose(options, function (result) {
                        df.resolve(result);
                    }, function (error) {
                        df.reject(error);
                    });
                })
                    .catch(function () {
                    df.reject(_this.makeFatal());
                });
                return df.promise();
            };
            Object.defineProperty(Gate.prototype, "bridge", {
                ///////////////////////////////////////////////////////////////////////
                // protected methods
                /**
                 * \~english
                 * Access to Plugin.NativeBridge object.
                 * If you want to use low level exec(), you can use this accessor.
                 *
                 * @returns Plugin.NativeBridge instance.
                 *
                 * \~japanese
                 * Plugin.NativeBridge オブジェクトへのアクセス
                 * 低レベル exec() を使用したい場合に利用可能
                 *
                 * @returns Plugin.NativeBridge インスタンス.
                 */
                get: function () {
                    return this._bridge;
                },
                enumerable: true,
                configurable: true
            });
            ///////////////////////////////////////////////////////////////////////
            // private methods
            //! Make fatal error object.
            Gate.prototype.makeFatal = function () {
                var msg = TAG + "fatal error. 'cordova-plugin-cdp-nativebridge' is not available.";
                console.error(msg);
                return {
                    code: null,
                    name: TAG + "ERROR_FATAL",
                    message: msg,
                };
            };
            /* tslint:disable:no-unused-variable */
            // For pure javascript extend helper.
            Gate.extend = NativeBridge.Utils.extend;
            return Gate;
        }());
        NativeBridge.Gate = Gate;
    })(NativeBridge = CDP.NativeBridge || (CDP.NativeBridge = {}));
})(CDP || (CDP = {}));

return CDP.NativeBridge; }));
// amd define function shim
(function (root) {
    if (!(typeof define === "function" && define.amd)) {
        root.define = function () { /* noop */ };
    }
})(this);

define("cdp/core/core", ["require", "exports", "cdp.core"], function (require, exports, _core) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.global = _core.global;
    exports.coreInitialize = _core.initialize;
    exports.webRoot = _core.webRoot;
    exports.Config = _core.Config;
    exports.makeErrorInfo = _core.makeErrorInfo;
    exports.isCanceledError = _core.isCanceledError;
    exports.RESULT_CODE = _core.RESULT_CODE;
    exports.DECLARE_ERROR_CODE = _core.DECLARE_ERROR_CODE;
    exports.ASSIGN_RESULT_CODE = _core.ASSIGN_RESULT_CODE;
    exports.MODULE_RESULT_CODE_RANGE = _core.MODULE_RESULT_CODE_RANGE;
    exports.RESULT_CODE_BASE = _core.RESULT_CODE_BASE;
    exports.ASSIGN_RESULT_CODE_BASE = _core.ASSIGN_RESULT_CODE_BASE;
});
define("cdp/core/promise", ["require", "exports", "cdp.promise"], function (require, exports, _promise) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.makePromise = _promise.makePromise;
    exports.wait = _promise.wait;
    exports.PromiseManager = _promise.PromiseManager;
    exports.Promise = _promise.Promise;
});
define("cdp/core/i18n", ["require", "exports"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    var i18n = CDP.i18n;
    exports.i18n = i18n;
});
define("cdp/core/framework.jqm", ["require", "exports", "cdp.framework.jqm"], function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.waitForDeviceReady = CDP.waitForDeviceReady;
    exports.setBackButtonHandler = CDP.setBackButtonHandler;
});
define("cdp/core", ["require", "exports", "cdp/core/core", "cdp/core/promise", "cdp/core/i18n", "cdp/core/framework.jqm"], function (require, exports, core_1, promise_1, i18n_1, framework_jqm_1) {
    "use strict";
    function __export(m) {
        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];
    }
    Object.defineProperty(exports, "__esModule", { value: true });
    __export(core_1);
    __export(promise_1);
    __export(i18n_1);
    __export(framework_jqm_1);
});
define("cdp/framework/jqm", ["require", "exports", "cdp.framework.jqm"], function (require, exports, _framework) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.Platform = _framework.Platform;
    exports.getOrientation = _framework.getOrientation;
    exports.toUrl = _framework.toUrl;
    exports.setBeforeRouteChangeHandler = _framework.setBeforeRouteChangeHandler;
    exports.Router = _framework.Router;
    exports.initialize = _framework.initialize;
    exports.isInitialized = _framework.isInitialized;
    exports.waitForInitialize = _framework.waitForInitialize;
    exports.registerOrientationChangedListener = _framework.registerOrientationChangedListener;
    exports.unregisterOrientationChangedListener = _framework.unregisterOrientationChangedListener;
    exports.getDefaultClickEvent = _framework.getDefaultClickEvent;
    exports.registerPage = _framework.registerPage;
    exports.constructPages = _framework.constructPages;
    exports.disposePages = _framework.disposePages;
    exports.setBackButtonHandler = CDP.setBackButtonHandler;
    exports.Page = _framework.Page;
    exports.Model = _framework.Model;
    exports.Collection = _framework.Collection;
    exports.View = _framework.View;
    exports.Events = _framework.Events;
    exports.Orientation = _framework.Orientation;
});
define("cdp/framework", ["require", "exports", "cdp/core/core", "cdp/core/promise", "cdp/framework/jqm"], function (require, exports, _errors, promise_2, jqm_1) {
    "use strict";
    function __export(m) {
        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];
    }
    Object.defineProperty(exports, "__esModule", { value: true });
    __export(promise_2);
    __export(jqm_1);
    exports.makeErrorInfo = _errors.makeErrorInfo;
    exports.isCanceledError = _errors.isCanceledError;
    exports.RESULT_CODE = _errors.RESULT_CODE;
    exports.DECLARE_ERROR_CODE = _errors.DECLARE_ERROR_CODE;
    exports.ASSIGN_RESULT_CODE = _errors.ASSIGN_RESULT_CODE;
    exports.MODULE_RESULT_CODE_RANGE = _errors.MODULE_RESULT_CODE_RANGE;
    exports.RESULT_CODE_BASE = _errors.RESULT_CODE_BASE;
    exports.ASSIGN_RESULT_CODE_BASE = _errors.ASSIGN_RESULT_CODE_BASE;
});
define("cdp/tools/tools", ["require", "exports", "cdp.tools"], function (require, exports, _tools) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    var Blob;
    (function (Blob) {
        Blob.arrayBufferToBlob = _tools.Blob.arrayBufferToBlob;
        Blob.base64ToBlob = _tools.Blob.base64ToBlob;
        Blob.base64ToArrayBuffer = _tools.Blob.base64ToArrayBuffer;
        Blob.base64ToUint8Array = _tools.Blob.base64ToUint8Array;
        Blob.arrayBufferToBase64 = _tools.Blob.arrayBufferToBase64;
        Blob.uint8ArrayToBase64 = _tools.Blob.uint8ArrayToBase64;
        Blob.URL = _tools.Blob.URL;
    })(Blob = exports.Blob || (exports.Blob = {}));
    exports.DateTime = _tools.DateTime;
    exports.abs = _tools.abs;
    exports.max = _tools.max;
    exports.min = _tools.min;
    exports.toZeroPadding = _tools.toZeroPadding;
    exports.inherit = _tools.inherit;
    exports.mixin = _tools.mixin;
    exports.extend = _tools.extend;
    exports.getDevicePixcelRatio = _tools.getDevicePixcelRatio;
    exports.Template = _tools.Template;
});
define("cdp/tools", ["require", "exports", "cdp/tools/tools"], function (require, exports, tools_1) {
    "use strict";
    function __export(m) {
        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];
    }
    Object.defineProperty(exports, "__esModule", { value: true });
    __export(tools_1);
});
define("cdp/ui/listview", ["require", "exports", "cdp.ui.listview"], function (require, exports, _ui) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.ListViewGlobalConfig = _ui.ListViewGlobalConfig;
    exports.LineProfile = _ui.LineProfile;
    exports.GroupProfile = _ui.GroupProfile;
    exports.composeViews = _ui.composeViews;
    exports.deriveViews = _ui.deriveViews;
    exports.mixinViews = _ui.mixinViews;
    exports.StatusManager = _ui.StatusManager;
    exports.PageProfile = _ui.PageProfile;
    exports.ScrollerElement = _ui.ScrollerElement;
    exports.ScrollerNative = _ui.ScrollerNative;
    exports.ScrollerIScroll = _ui.ScrollerIScroll;
    exports.ListItemView = _ui.ListItemView;
    exports.ScrollManager = _ui.ScrollManager;
    exports.ListView = _ui.ListView;
    exports.GroupListItemView = _ui.GroupListItemView;
    exports.ExpandManager = _ui.ExpandManager;
    exports.ExpandableListView = _ui.ExpandableListView;
});
define("cdp/ui/jqm", ["require", "exports", "cdp.ui.jqm"], function (require, exports, _ui) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.Theme = _ui.Theme;
    exports.ExtensionManager = _ui.ExtensionManager;
    var Toast;
    (function (Toast) {
        Toast.LENGTH_SHORT = _ui.Toast.LENGTH_SHORT;
        Toast.LENGTH_LONG = _ui.Toast.LENGTH_LONG;
        Toast.StyleBuilderDefault = _ui.Toast.StyleBuilderDefault;
        Toast.show = _ui.Toast.show;
    })(Toast = exports.Toast || (exports.Toast = {}));
    exports.Dialog = _ui.Dialog;
    exports.alert = _ui.alert;
    exports.confirm = _ui.confirm;
    exports.prompt = _ui.prompt;
    exports.BaseHeaderView = _ui.BaseHeaderView;
    exports.BasePage = _ui.BasePage;
    exports.PageContainerView = _ui.PageContainerView;
    exports.PageView = _ui.PageView;
    exports.PageListView = _ui.PageListView;
    exports.PageExpandableListView = _ui.PageExpandableListView;
});
define("cdp/ui", ["require", "exports", "cdp/framework/jqm", "cdp/tools/tools", "cdp/core/promise", "cdp/ui/listview", "cdp/ui/jqm"], function (require, exports, _framework, _tools, promise_3, listview_1, jqm_2) {
    "use strict";
    function __export(m) {
        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];
    }
    Object.defineProperty(exports, "__esModule", { value: true });
    __export(promise_3);
    __export(listview_1);
    __export(jqm_2);
    exports.View = _framework.View;
    exports.toUrl = _framework.toUrl;
    exports.registerPage = _framework.registerPage;
    exports.Orientation = _framework.Orientation;
    exports.getOrientation = _framework.getOrientation;
    exports.registerOrientationChangedListener = _framework.registerOrientationChangedListener;
    exports.unregisterOrientationChangedListener = _framework.unregisterOrientationChangedListener;
    exports.getTemplate = _tools.Template.getJST;
});
define("cdp/bridge/nativebridge", ["require", "exports", "cdp.nativebridge"], function (require, exports, _bridge) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.Gate = _bridge.Gate;
});
define("cdp/bridge", ["require", "exports", "cdp/bridge/nativebridge"], function (require, exports, nativebridge_1) {
    "use strict";
    function __export(m) {
        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];
    }
    Object.defineProperty(exports, "__esModule", { value: true });
    __export(nativebridge_1);
});
define(["require", "exports", "cdp/core", "cdp/framework", "cdp/tools", "cdp/ui", "cdp/bridge"], function (require, exports, core_2, Framework, Tools, UI, NativeBridge) {
    "use strict";
    function __export(m) {
        for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];
    }
    Object.defineProperty(exports, "__esModule", { value: true });
    __export(core_2);
    exports.Framework = Framework;
    exports.Tools = Tools;
    exports.UI = UI;
    exports.NativeBridge = NativeBridge;
    exports.initialize = Framework.initialize;
    exports.isInitialized = Framework.isInitialized;
    exports.waitForInitialize = Framework.waitForInitialize;
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNkcDovLy9DRFAvQ29yZS50cyIsImNkcDovLy9DRFAvUGF0Y2gudHMiLCJjZHA6Ly8vQ0RQL0Vycm9yRGVmcy50cyIsImNkcDovLy9DRFAvUHJvbWlzZS50cyIsIndlYnBhY2s6Ly8vd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCA4YTlhOWI4OTIyMjFhMjQwYTEwMCIsImNkcDovLy9DRFAvaTE4bi50cyIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwvIHtcInJvb3RcIjpcImpRdWVyeVwiLFwiY29tbW9uanNcIjpcImpxdWVyeVwiLFwiY29tbW9uanMyXCI6XCJqcXVlcnlcIixcImFtZFwiOlwianF1ZXJ5XCJ9Iiwid2VicGFjazovLy9leHRlcm5hbC8ge1wicm9vdFwiOlwiQ0RQXCIsXCJjb21tb25qc1wiOlwiY2RwLmNvcmVcIixcImNvbW1vbmpzMlwiOlwiY2RwLmNvcmVcIixcImFtZFwiOlwiY2RwLmNvcmVcIn0iLCJ3ZWJwYWNrOi8vL2V4dGVybmFsLyB7XCJyb290XCI6XCJDRFBcIixcImNvbW1vbmpzXCI6XCJjZHAucHJvbWlzZVwiLFwiY29tbW9uanMyXCI6XCJjZHAucHJvbWlzZVwiLFwiYW1kXCI6XCJjZHAucHJvbWlzZVwifSIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwvaTE4bmV4dC9zY3JpcHRzL2pxdWVyeS1pMThuZXh0LmpzIiwid2VicGFjazovLy9leHRlcm5hbC9pMThuZXh0L3NjcmlwdHMvaTE4bmV4dC5qcyIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwvaTE4bmV4dC9zY3JpcHRzL2kxOG5leHRYSFJCYWNrZW5kLmpzIiwid2VicGFjazovLy9leHRlcm5hbC9pMThuZXh0L3NjcmlwdHMvaTE4bmV4dExvY2FsU3RvcmFnZUNhY2hlLmpzIiwid2VicGFjazovLy9leHRlcm5hbC9pMThuZXh0L3NjcmlwdHMvaTE4bmV4dFNwcmludGZQb3N0UHJvY2Vzc29yLmpzIiwid2VicGFjazovLy9leHRlcm5hbC9pMThuZXh0L3NjcmlwdHMvaTE4bmV4dEJyb3dzZXJMYW5ndWFnZURldGVjdG9yLmpzIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCBkMzQ2ZDkxMTkzYTk5MWU3YjdlOSIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwvanF1ZXJ5L3NjcmlwdHMvanF1ZXJ5Lm1vYmlsZS5qcyIsImNkcDovLy9DRFAvRnJhbWV3b3JrL0ludGVyZmFjZXMudHMiLCJjZHA6Ly8vQ0RQL0ZyYW1ld29yay9QbGF0Zm9ybS50cyIsImNkcDovLy9DRFAvRnJhbWV3b3JrL1BhdGNoLnRzIiwiY2RwOi8vL0NEUC9GcmFtZXdvcmsvT3JpZW50YXRpb24udHMiLCJjZHA6Ly8vQ0RQL0ZyYW1ld29yay9Db3JlQVBJLnRzIiwiY2RwOi8vL0NEUC9GcmFtZXdvcmsvUm91dGVyLnRzIiwiY2RwOi8vL0NEUC9GcmFtZXdvcmsvUGFnZS50cyIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwvIHtcInJvb3RcIjpcIkNEUFwiLFwiY29tbW9uanNcIjpcImNkcC5pMThuXCIsXCJjb21tb25qczJcIjpcImNkcC5pMThuXCIsXCJhbWRcIjpcImNkcC5pMThuXCJ9Iiwid2VicGFjazovLy9leHRlcm5hbC8ge1wicm9vdFwiOlwiQmFja2JvbmVcIixcImNvbW1vbmpzXCI6XCJiYWNrYm9uZVwiLFwiY29tbW9uanMyXCI6XCJiYWNrYm9uZVwiLFwiYW1kXCI6XCJiYWNrYm9uZVwifSIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwvanF1ZXJ5L3NjcmlwdHMvanF1ZXJ5LW1pZ3JhdGUuanMiLCJjZHA6Ly8vQ0RQL1Rvb2xzL1V0aWxzLnRzIiwiY2RwOi8vL0NEUC9Ub29scy9CbG9iLnRzIiwiY2RwOi8vL0NEUC9Ub29scy9CaW5hcnlUcmFuc3BvcnQudHMiLCJjZHA6Ly8vQ0RQL1Rvb2xzL0RhdGVUaW1lLnRzIiwiY2RwOi8vL0NEUC9Ub29scy9GdW5jdGlvbnMudHMiLCJjZHA6Ly8vQ0RQL1Rvb2xzL1RlbXBsYXRlLnRzIiwiY2RwOi8vL0NEUC9VSS9saXN0dmlldy9JbnRlcmZhY2VzLnRzIiwiY2RwOi8vL0NEUC9VSS9saXN0dmlldy9Db25maWcudHMiLCJjZHA6Ly8vQ0RQL1VJL2xpc3R2aWV3L1V0aWxzLnRzIiwiY2RwOi8vL0NEUC9VSS9saXN0dmlldy9TdGF0dXNNYW5hZ2VyLnRzIiwiY2RwOi8vL0NEUC9VSS9saXN0dmlldy9MaW5lUHJvZmlsZS50cyIsImNkcDovLy9DRFAvVUkvbGlzdHZpZXcvUGFnZVByb2ZpbGUudHMiLCJjZHA6Ly8vQ0RQL1VJL2xpc3R2aWV3L0dyb3VwUHJvZmlsZS50cyIsImNkcDovLy9DRFAvVUkvbGlzdHZpZXcvU2Nyb2xsZXJFbGVtZW50LnRzIiwiY2RwOi8vL0NEUC9VSS9saXN0dmlldy9TY3JvbGxlck5hdGl2ZS50cyIsImNkcDovLy9DRFAvVUkvbGlzdHZpZXcvU2Nyb2xsZXJJU2Nyb2xsLnRzIiwiY2RwOi8vL0NEUC9VSS9saXN0dmlldy9MaXN0SXRlbVZpZXcudHMiLCJjZHA6Ly8vQ0RQL1VJL2xpc3R2aWV3L1Njcm9sbE1hbmFnZXIudHMiLCJjZHA6Ly8vQ0RQL1VJL2xpc3R2aWV3L0xpc3RWaWV3LnRzIiwiY2RwOi8vL0NEUC9VSS9saXN0dmlldy9Hcm91cExpc3RJdGVtVmlldy50cyIsImNkcDovLy9DRFAvVUkvbGlzdHZpZXcvRXhwYW5kTWFuYWdlci50cyIsImNkcDovLy9DRFAvVUkvbGlzdHZpZXcvRXhwYW5kYWJsZUxpc3RWaWV3LnRzIiwiY2RwOi8vL0NEUC9VSS9qcW0vVGhlbWUudHMiLCJjZHA6Ly8vQ0RQL1VJL2pxbS9FeHRlbnNpb25NYW5hZ2VyLnRzIiwiY2RwOi8vL0NEUC9VSS9qcW0vVG9hc3QudHMiLCJjZHA6Ly8vQ0RQL1VJL2pxbS9EaWFsb2cudHMiLCJjZHA6Ly8vQ0RQL1VJL2pxbS9EaWFsb2dDb21tb25zLnRzIiwiY2RwOi8vL0NEUC9VSS9qcW0vQmFzZUhlYWRlclZpZXcudHMiLCJjZHA6Ly8vQ0RQL1VJL2pxbS9CYXNlUGFnZS50cyIsImNkcDovLy9DRFAvVUkvanFtL1BhZ2VWaWV3LnRzIiwiY2RwOi8vL0NEUC9VSS9qcW0vUGFnZUxpc3RWaWV3LnRzIiwiY2RwOi8vL0NEUC9VSS9qcW0vUGFnZUV4cGFuZGFibGVMaXN0Vmlldy50cyIsImNkcDovLy9DRFAvVUkvanFtL0V4dGVuc2lvbi9SaXBwbGUudHMiLCJjZHA6Ly8vQ0RQL1VJL2pxbS9FeHRlbnNpb24vU3Bpbm5lci50cyIsImNkcDovLy9DRFAvVUkvanFtL0V4dGVuc2lvbi9GbG9hdExhYmVsLnRzIiwiY2RwOi8vL0NEUC9VSS9qcW0vRXh0ZW5zaW9uL0ZsaXBTd2l0Y2gudHMiLCJjZHA6Ly8vQ0RQL1VJL2pxbS9FeHRlbnNpb24vU2xpZGVyLnRzIiwiY2RwOi8vL0NEUC9VSS9qcW0vRXh0ZW5zaW9uL0lTY3JvbGwudHMiLCJjZHA6Ly8vQ0RQL05hdGl2ZUJyaWRnZS9JbnRlcmZhY2VzLnRzIiwiY2RwOi8vL0NEUC9OYXRpdmVCcmlkZ2UvVXRpbHMudHMiLCJjZHA6Ly8vQ0RQL05hdGl2ZUJyaWRnZS9HYXRlLnRzIiwiY2RwOi8vL2V4cG9ydHM6Ly9jZHAvY29yZS9jb3JlLnRzIiwiY2RwOi8vL2V4cG9ydHM6Ly9jZHAvY29yZS9wcm9taXNlLnRzIiwiY2RwOi8vL2V4cG9ydHM6Ly9jZHAvY29yZS9pMThuLnRzIiwiY2RwOi8vL2V4cG9ydHM6Ly9jZHAvY29yZS9mcmFtZXdvcmsuanFtLnRzIiwiY2RwOi8vL2V4cG9ydHM6Ly9jZHAvY29yZS50cyIsImNkcDovLy9leHBvcnRzOi8vY2RwL2ZyYW1ld29yay9qcW0udHMiLCJjZHA6Ly8vZXhwb3J0czovL2NkcC9mcmFtZXdvcmsudHMiLCJjZHA6Ly8vZXhwb3J0czovL2NkcC90b29scy90b29scy50cyIsImNkcDovLy9leHBvcnRzOi8vY2RwL3Rvb2xzLnRzIiwiY2RwOi8vL2V4cG9ydHM6Ly9jZHAvdWkvbGlzdHZpZXcudHMiLCJjZHA6Ly8vZXhwb3J0czovL2NkcC91aS9qcW0udHMiLCJjZHA6Ly8vZXhwb3J0czovL2NkcC91aS50cyIsImNkcDovLy9leHBvcnRzOi8vY2RwL2JyaWRnZS9uYXRpdmVicmlkZ2UudHMiLCJjZHA6Ly8vZXhwb3J0czovL2NkcC9icmlkZ2UudHMiLCJjZHA6Ly8vZXhwb3J0czovL2NkcC50cyIsImNkcDovLy9DRFAvVG9vbHMvSW50ZXJmYWNlcy50cyIsImNkcDovLy9DRFAvVUkvanFtL0ludGVyZmFjZXMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsSUFBVSxHQUFHLENBOERaO0FBOURELFdBQVUsR0FBRztJQUVULElBQU0sR0FBRyxHQUFHLFFBQVEsQ0FBQztJQUVyQjs7O09BR0c7SUFDVSxVQUFNLEdBQVEsUUFBUSxDQUFDLGFBQWEsQ0FBQyxFQUFFLENBQUM7SUFHckQ7O09BRUc7SUFDVSxXQUFPLEdBQVcsQ0FBQztRQUM1QixFQUFFLENBQUMsQ0FBQyxVQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztZQUNsQixJQUFJLE9BQU8sR0FBRyxtQkFBbUIsQ0FBQyxJQUFJLENBQUMsVUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUM3RCxFQUFFLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7Z0JBQ1gsT0FBTyxHQUFHLFFBQVEsQ0FBQyxJQUFJLENBQUMsVUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUNsRCxDQUFDO1lBQ0QsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN0QixDQUFDO0lBQ0wsQ0FBQyxDQUFDLEVBQUUsQ0FBQztJQUVMOztPQUVHO0lBQ1UsVUFBTSxHQUFRLEdBQUcsQ0FBQyxNQUFNLElBQUksVUFBTSxDQUFDLE1BQU0sSUFBSSxFQUFFLENBQUM7SUFXN0Q7O09BRUc7SUFDSCxvQkFBMkIsT0FBeUI7UUFDaEQsVUFBVSxDQUFDO1lBQ1AsSUFBSSxDQUFDO2dCQUNELFNBQUssQ0FBQyxLQUFLLEVBQUUsQ0FBQztnQkFDZCxFQUFFLENBQUMsQ0FBQyxPQUFPLElBQUksT0FBTyxP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QUEyQixzREFBc0Q7O0FBRTlKO0FBQ0E7QUFDQSx1RUFBdUU7QUFDdkU7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQLEtBQUs7O0FBRUw7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQO0FBQ0E7O0FBRUE7QUFDQSxPQUFPO0FBQ1A7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTs7QUFFQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBLGFBQWEsdUlBQXVJLEdBQUcsbWJBQW1iLEdBQUcsZ0tBQWdLLEdBQUcseUVBQXlFLEdBQUcsaURBQWlELEdBQUcsMkNBQTJDLEdBQUcsNENBQTRDLEdBQUcsd0NBQXdDLEdBQUcsa0NBQWtDLEdBQUcsNkNBQTZDLEdBQUcsMENBQTBDLEdBQUcsbUNBQW1DLEdBQUcsbUNBQW1DLEdBQUcseUNBQXlDLEdBQUcsdUNBQXVDLEdBQUcsc0NBQXNDLEdBQUcsbUNBQW1DLEdBQUcsdUNBQXVDLEdBQUcsMkNBQTJDLEdBQUcsa0NBQWtDLEdBQUcsdUNBQXVDLEdBQUcseUNBQXlDOztBQUUzakQ7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVB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Q0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQLEtBQUs7QUFDTDtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7O0FBRTdCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYLFNBQVM7QUFDVCxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7O0FBR0E7QUFDQTs7QUFFQTtBQUNBLDZCQUE2Qjs7QUFFN0I7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4REFBOEQ7QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2QsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxpQkFBaUI7QUFDakIsaUJBQWlCO0FBQ2pCO0FBQ0EsMkJBQTJCO0FBQzNCLDJCQUEyQjtBQUMzQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjs7QUFFckI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsZ0NBQWdDLDJEQUEyRDtBQUMzRixLQUFLO0FBQ0wsZ0NBQWdDLDREQUE0RDtBQUM1RixLQUFLO0FBQ0wsZ0NBQWdDO0FBQ2hDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsaURBQWlELG9KQUFvSjtBQUNyTTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSwwRkFBMEYsYUFBYTtBQUN2RztBQUNBOztBQUVBO0FBQ0EsT0FBTzs7QUFFUDtBQUNBO0FBQ0EsT0FBTzs7QUFFUDtBQUNBO0FBQ0E7QUFDQSw4RkFBOEYsZUFBZTtBQUM3RztBQUNBOztBQUVBO0FBQ0EsT0FBTzs7QUFFUDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSw4RkFBOEYsZUFBZTtBQUM3RztBQUNBOztBQUVBO0FBQ0EsT0FBTzs7QUFFUDtBQUNBO0FBQ0EsT0FBTztBQUNQOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsT0FBTztBQUNQOztBQUVBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBOztBQUVBOzs7QUFHQTtBQUNBOztBQUVBOztBQUVBO0FBQ0EsdUZBQXVGOztBQUV2Rjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLE9BQU87QUFDUDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7O0FBRUE7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBLCtCQUErQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FB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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLEVBQUU7QUFDRjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7Ozs7OztBQU1BO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyx5QkFBeUI7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsY0FBYyxnQkFBZ0I7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLENBQUM7O0FBRUQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsZUFBZTs7QUFFZjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGdEQUFnRCxnQkFBZ0I7QUFDaEUsSUFBSTs7QUFFSjtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxlQUFlLFdBQVc7QUFDMUI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSx1QkFBdUI7QUFDdkI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsQ0FBQzs7QUFFRDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFO0FBQ0YsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLDJCQUEyQjtBQUNsRDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCO0FBQ3ZCOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsMEJBQTBCO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0ZBQWtGO0FBQ2xGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DO0FBQ25DLEtBQUs7QUFDTDtBQUNBO0FBQ0EsSUFBSTtBQUNKOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0M7QUFDcEM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjs7QUFFQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7O0FBRUE7QUFDQSw4Q0FBOEMsT0FBTyxXQUFXO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0RBQW9EO0FBQ3BELGdCQUFnQixzQkFBc0I7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSxFQUFFO0FBQ0Y7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFO0FBQ0Y7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0EsMkJBQTJCLGtCQUFrQjtBQUM3QyxFQUFFO0FBQ0Y7QUFDQSwyQkFBMkIsaUJBQWlCO0FBQzVDLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsU0FBUyxrQ0FBa0M7QUFDM0M7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLENBQUM7O0FBRUQsQ0FBQzs7QUFFRDtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBLGlCQUFpQixTQUFTO0FBQzFCOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQSxDQUFDOztBQUVEOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBOztBQUVBLENBQUM7OztBQUdEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQSxnQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsK0JBQStCOztBQUUvQjtBQUNBLElBQUk7QUFDSjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGLENBQUM7OztBQUdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGNBQWM7O0FBRWQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLGNBQWM7O0FBRWxEO0FBQ0E7QUFDQTtBQUNBO0FBQ0Es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O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLENBQUM7OztBQUdEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLElBQUk7QUFDSixHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOzs7O0FBSUQ7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0Esd0NBQXdDO0FBQ3hDLElBQUk7O0FBRUo7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBLGdCQUFnQixxQkFBcUI7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxRUFBcUUsV0FBVyxFQUFFO0FBQ2xGLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLHVDQUF1QztBQUN2Qzs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSCxDQUFDOzs7O0FBSUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBOztBQUVBLGVBQWUsWUFBWTtBQUMzQjs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0YsQ0FBQzs7OztBQUlEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTs7QUFFQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5Qzs7QUFFekM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUM7QUFDckM7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDO0FBQ3hDO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQSxJQUFJO0FBQ0o7QUFDQSxFQUFFO0FBQ0YsQ0FBQzs7OztBQUlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsMkNBQTJDLGVBQWU7QUFDMUQsQ0FBQzs7O0FBR0Q7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixHQUFHO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDZDQUE2QyxTQUFTO0FBQ3REO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQSxlQUFlO0FBQ2Y7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHNDQUFzQztBQUN0Qzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBLFlBQVksOEJBQThCO0FBQzFDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0EsZ0JBQWdCLFNBQVM7QUFDekI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQSxDQUFDOzs7QUFHRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsaURBQWlEO0FBQ2pEOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUVBQXFFLHFCQUFxQjtBQUMxRixLQUFLO0FBQ0wsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGdFQUFnRSx5REFBeUQ7QUFDekgsbUVBQW1FLHlEQUF5RDtBQUM1SDtBQUNBO0FBQ0E7O0FBRUEsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUYsQ0FBQzs7O0FBR0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBLEtBQUs7O0FBRUw7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7OztBQUdGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHlCQUF5QjtBQUMzQzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUI7QUFDbkI7QUFDQTs7QUFFQSxpREFBaUQ7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsQ0FBQzs7Ozs7QUFLRDs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsOENBQThDOztBQUUvRDs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSxDQUFDOzs7QUFHRDtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBLGlFQUFpRSxrQkFBa0I7QUFDbkYsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBLHdDQUF3Qyx1Q0FBdUM7QUFDL0UsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxDQUFDOztBQUVEOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixvQ0FBb0M7O0FBRS9EO0FBQ0EsYUFBYSxvQ0FBb0M7O0FBRWpEO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7O0FBRUE7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSwyQkFBMkIscUNBQXFDO0FBQ2hFLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsdUJBQXVCLGdFQUFnRTtBQUN2RjtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHOztBQUVIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsYUFBYTtBQUNyQyxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLElBQUk7QUFDSixHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLDZCQUE2QixLQUFLOztBQUUxQztBQUNBLDJCQUEyQjs7QUFFM0I7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLElBQUk7QUFDSixHQUFHOztBQUVIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSw4QkFBOEI7QUFDOUI7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLFdBQVc7QUFDbEQ7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLGdCQUFnQixzQkFBc0I7O0FBRXRDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxDQUFDOztBQUVEOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSx1QkFBdUIsMkRBQTJEO0FBQ2xGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLG1DQUFtQyx3Q0FBd0MsRUFBRTtBQUM3RSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSwrQkFBK0Isb0VBQW9FO0FBQ25HO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSw4QkFBOEIsbUVBQW1FO0FBQ2pHO0FBQ0EsSUFBSTtBQUNKLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUEsR0FBRzs7QUFFSCxnQkFBZ0IsNEJBQTRCLEVBQUU7O0FBRTlDO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBOztBQUVBLHlFQUF5RSxvQ0FBb0MsRUFBRTtBQUMvRyxDQUFDOzs7QUFHRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQSw2QkFBNkI7QUFDN0IsOEJBQThCO0FBQzlCLCtCQUErQjs7QUFFL0I7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRzs7QUFFSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSTtBQUNKO0FBQ0E7O0FBRUEsR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBOztBQUVBO0FBQ0E7QUFDQSxFQUFFO0FBQ0YsQ0FBQzs7O0FBR0Q7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLEVBQUU7O0FBRUYsQ0FBQzs7O0FBR0Q7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUYsQ0FBQzs7O0FBR0Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBLENBQUM7O0FBRUQ7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBLENBQUM7O0FBRUQ7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBLENBQUM7O0FBRUQ7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBLENBQUM7O0FBRUQ7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBLENBQUM7O0FBRUQ7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBLENBQUM7O0FBRUQ7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBLENBQUM7OztBQUdEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxFQUFFOztBQUVGOztBQUVBLENBQUM7O0FBRUQ7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxDQUFDOztBQUVELENBQUM7O0FBRUQ7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRDtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLG1CQUFtQixpQkFBaUI7QUFDcEM7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQsQ0FBQzs7QUFFRDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSx3QkFBd0I7O0FBRXhCO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxDQUFDOztBQUVEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsaUJBQWlCLGdCQUFnQjtBQUNqQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsQ0FBQzs7QUFFRDs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsbUJBQW1CLGdEQUFnRDtBQUNuRSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQsQ0FBQzs7QUFFRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxDQUFDOztBQUVEOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsZUFBZSw2QkFBNkI7QUFDNUM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0EsQ0FBQzs7QUFFRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSwwQkFBMEI7O0FBRXBDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLENBQUM7O0FBRUQsQ0FBQzs7QUFFRDs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0EsY0FBYyxTQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQSxtQ0FBbUMsYUFBYTtBQUNoRDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTs7QUFFQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxDQUFDOztBQUVELENBQUM7O0FBRUQ7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUEsY0FBYyxpQkFBaUI7QUFDL0I7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRCxDQUFDOztBQUVEOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxpQ0FBaUMsV0FBVztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVELENBQUM7O0FBRUQ7O0FBRUE7QUFDQTtBQUNBOztBQUVBLENBQUM7O0FBRUQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUEsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUgsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxDQUFDOztBQUVELENBQUM7O0FBRUQ7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQix1QkFBdUI7QUFDNUM7QUFDQTtBQUNBLENBQUM7O0FBRUQsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsNkJBQTZCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUYsQ0FBQzs7QUFFRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVILEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQsQ0FBQzs7QUFFRDs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBOztBQUVBLHFEQUFxRCxZQUFZO0FBQ2pFO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQSw4Q0FBOEMsa0JBQWtCO0FBQ2hFO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsdUJBQXVCLHVDQUF1QztBQUM5RCxxQ0FBcUMsZ0NBQWdDOztBQUVyRTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDs7QUFFQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBLDRGQUE0RjtBQUM1RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGLHVDQUF1QztBQUN2QztBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLCtDQUErQztBQUMvQzs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQSxnREFBZ0Q7QUFDaEQ7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsQ0FBQzs7QUFFRCxDQUFDOztBQUVEOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7O0FBRUEsMEJBQTBCLDhCQUE4QjtBQUN4RCwrQ0FBK0MsNEJBQTRCO0FBQzNFO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsNENBQTRDO0FBQzVDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRCxDQUFDOztBQUVEOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBLElBQUk7QUFDSixFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLENBQUM7O0FBRUQsQ0FBQzs7QUFFRDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsRUFBRTs7QUFFRixDQUFDOztBQUVEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7O0FBRUg7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxJQUFJOztBQUVKOztBQUVBOztBQUVBLEdBQUc7O0FBRUg7O0FBRUE7QUFDQTs7QUFFQSxHQUFHOztBQUVIOztBQUVBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsSUFBSTs7QUFFSixHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsRUFBRTs7QUFFRixDQUFDOztBQUVEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBLEVBQUU7QUFDRixDQUFDOztBQUVEOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEdBQUc7O0FBRUg7O0FBRUE7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSCxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSTtBQUNKO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLElBQUk7O0FBRUosaUNBQWlDLHlCQUF5QjtBQUMxRCxzQkFBc0I7QUFDdEI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQsQ0FBQzs7QUFFRDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsQ0FBQzs7O0FBR0Q7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNB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QUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxVQUFVO0FBQ1YsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxVQUFVO0FBQ1YsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQSxnQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHFCQUFxQixnREFBZ0Q7QUFDckU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0EsMkJBQTJCLGlCQUFpQjs7QUFFNUM7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLElBQUkscUNBQXFDO0FBQ3pDLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQiwrQkFBK0I7O0FBRXpEO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSw0QkFBNEIsa0NBQWtDOztBQUU5RDtBQUNBLDJCQUEyQixrQ0FBa0M7O0FBRTdEO0FBQ0E7QUFDQSxnQ0FBZ0MsbUNBQW1DO0FBQ25FOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLElBQUk7QUFDSixFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUEsc0JBQXNCLG9EQUFvRDtBQUMxRTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGNBQWMsZ0JBQWdCO0FBQzlCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEVBQUU7O0FBRUY7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRCxDQUFDOzs7QUFHRDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBOztBQUVBO0FBQ0EsRUFBRTtBQUNGOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQztBQUNwQztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTs7QUFFQTtBQUNBLGdCQUFnQix1QkFBdUI7O0FBRXZDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGdCQUFnQixvQkFBb0I7QUFDcEM7QUFDQTs7QUFFQTtBQUNBLElBQUksNkNBQTZDOztBQUVqRDtBQUNBO0FBQ0E7O0FBRUEsaUNBQWlDOztBQUVqQztBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2Qzs7QUFFN0M7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0EsZUFBZTs7QUFFZjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLENBQUM7O0FBRUQsQ0FBQzs7O0FBR0Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQSxFQUFFOztBQUVGOztBQUVBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVELENBQUM7O0FBRUQ7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0Esb0RBQW9ELHlCQUF5QjtBQUM3RSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsMkRBQTJEOztBQUUzRDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLG9EQUFvRDtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxFQUFFOztBQUVGLENBQUM7O0FBRUQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIseUNBQXlDO0FBQ3JFO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxHQUFHOztBQUVIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxtQ0FBbUMsUUFBUTtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1IsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHOztB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QSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxDQUFDOztBQUVELENBQUM7OztBQUdEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQSwwQkFBMEIsc0NBQXNDO0FBQ2hFLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSCxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJO0FBQ0o7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSTtBQUNKO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRCxDQUFDOztBQUVEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0EsZ0JBQWdCLGNBQWM7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBLENBQUM7O0FBRUQsQ0FBQzs7O0FBR0Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87O0FBRVA7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLDJDQUEyQyxhQUFhO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVELENBQUM7O0FBRUQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7O0FBRUE7QUFDQSxHQUFHO0FBQ0gsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVELENBQUM7O0FBRUQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLCtDQUErQyxnQkFBZ0I7QUFDL0Q7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixZQUFZO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGtCQUFrQixlQUFlO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLDRDQUE0QyxXQUFXO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRCxDQUFDOztBQUVEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSCw0Q0FBNEMsV0FBVztBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRCxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLGlEQUFpRDtBQUNqRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBLGdEQUFnRCxhQUFhLEVBQUU7QUFDL0QsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxzQkFBc0IseUJBQXlCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjs7QUFFQTtBQUNBO0FBQ0Esd0JBQXdCLHlCQUF5QjtBQUNqRCwwQkFBMEIsMkJBQTJCOztBQUVyRDtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsR0FBRzs7QUFFSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxJQUFJO0FBQ0o7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTixLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ04sS0FBSztBQUNMO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0Isd0NBQXdDO0FBQ3hEO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRCxDQUFDOztBQUVEOztBQUVBLENBQUM7O0FBRUQ7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUYsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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MkNBQTJDO0FBQzNDO0FBQ0Esd0NBQXdDOzs7QUFHeEM7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7O0FBR0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDs7O0FBR0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtB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O0lBQy9CLHFCQUE4QjtJQUM5QixnQkFBeUI7SUFVWixZQUFJLEdBQUcsVUFBVSxDQUFDLElBQUksQ0FBQztJQUd2QixhQUFLLEdBQW9DLFVBQVUsQ0FBQyxLQUFLLENBQUM7SUFDMUQsb0JBQVksR0FBNkIsVUFBVSxDQUFDLFlBQVksQ0FBQztJQUNqRSxtQkFBVyxHQUE4QixVQUFVLENBQUMsV0FBVyxDQUFDO0lBQ2hFLHNCQUFjLEdBQTJCLFVBQVUsQ0FBQyxjQUFjLENBQUM7SUFDbkUsMENBQWtDLEdBQU8sVUFBVSxDQUFDLGtDQUFrQyxDQUFDO0lBQ3ZGLDRDQUFvQyxHQUFLLFVBQVUsQ0FBQyxvQ0FBb0MsQ0FBQztJQUl6RixtQkFBVyxHQUFNLE1BQU0sQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDOzs7OztJQ3RCeEMsWUFBSSxHQUFHLE9BQU8sQ0FBQyxJQUFJLENBQUM7Ozs7Ozs7O0lDSmpDLHlCQUFzQzs7Ozs7Ozs7SUNVdEMsaUJBQTJCO0lBT2xCLDhCQUFTO0lBQUUsc0JBQUs7SUFBRSxnQkFBRTtJQUFFLG9DQUFZO0lBRzlCLGtCQUFVLEdBQWEsU0FBUyxDQUFDLFVBQVUsQ0FBQztJQUM1QyxxQkFBYSxHQUFVLFNBQVMsQ0FBQyxhQUFhLENBQUM7SUFDL0MseUJBQWlCLEdBQU0sU0FBUyxDQUFDLGlCQUFpQixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsibmFtZXNwYWNlIENEUCB7XHJcblxyXG4gICAgY29uc3QgVEFHID0gXCJbQ0RQXSBcIjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIOOCt+OCueODhuODoOOBriBnbG9iYWwg44Kq44OW44K444Kn44Kv44OI44Gr44Ki44Kv44K744K5XHJcbiAgICAgKiDpgJrluLjjga8gV2luZG93IOOCquODluOCuOOCp+OCr+ODiOOBqOOBquOCi1xyXG4gICAgICovXHJcbiAgICBleHBvcnQgY29uc3QgZ2xvYmFsOiBhbnkgPSBGdW5jdGlvbihcInJldHVybiB0aGlzXCIpKCk7XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogV2ViIHJvb3QgbG9jYXRpb24g44Gr44Ki44Kv44K744K5XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBjb25zdCB3ZWJSb290OiBzdHJpbmcgPSAoKCkgPT4ge1xyXG4gICAgICAgIGlmIChnbG9iYWwubG9jYXRpb24pIHtcclxuICAgICAgICAgICAgbGV0IGJhc2VVcmwgPSAvKC4rXFwvKVteL10qI1teL10rLy5leGVjKGdsb2JhbC5sb2NhdGlvbi5ocmVmKTtcclxuICAgICAgICAgICAgaWYgKCFiYXNlVXJsKSB7XHJcbiAgICAgICAgICAgICAgICBiYXNlVXJsID0gLyguK1xcLykvLmV4ZWMoZ2xvYmFsLmxvY2F0aW9uLmhyZWYpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBiYXNlVXJsWzFdO1xyXG4gICAgICAgIH1cclxuICAgIH0pKCk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb25maWcg44Kq44OW44K444Kn44Kv44OI44Gr44Ki44Kv44K744K5XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBjb25zdCBDb25maWc6IGFueSA9IENEUC5Db25maWcgfHwgZ2xvYmFsLkNvbmZpZyB8fCB7fTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIOWIneacn+WMluOCquODl+OCt+ODp+ODs+OCpOODs+OCv+ODvOODleOCp+OCpOOCuVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIENvcmVJbml0T3B0aW9ucyB7XHJcbiAgICAgICAgc3VjY2Vzcz86ICgpID0+IHZvaWQ7XHJcbiAgICAgICAgZmFpbD86IChlcnJvcj86IGFueSkgPT4gdm9pZDtcclxuICAgICAgICBba2V5OiBzdHJpbmddOiBhbnk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBjb3JlIOOBruWIneacn+WMllxyXG4gICAgICovXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gaW5pdGlhbGl6ZShvcHRpb25zPzogQ29yZUluaXRPcHRpb25zKTogdm9pZCB7XHJcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBQYXRjaC5hcHBseSgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMgJiYgdHlwZW9mIG9wdGlvbnMuc3VjY2VzcyA9PT0gXCJmdW5jdGlvblwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5zdWNjZXNzKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBlcnJvckluZm8gPSBtYWtlRXJyb3JJbmZvKFxyXG4gICAgICAgICAgICAgICAgICAgIFJFU1VMVF9DT0RFLkVSUk9SX0NEUF9JTklUSUFMSVpFX0ZBSUxFRCxcclxuICAgICAgICAgICAgICAgICAgICBUQUcsXHJcbiAgICAgICAgICAgICAgICAgICAgKGVycm9yICYmIGVycm9yLm1lc3NhZ2UpID8gZXJyb3IubWVzc2FnZSA6IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3JcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9ySW5mby5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zICYmIHR5cGVvZiBvcHRpb25zLmZhaWwgPT09IFwiZnVuY3Rpb25cIikge1xyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuZmFpbChlcnJvcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5cclxuZGVjbGFyZSBtb2R1bGUgXCJjZHAuY29yZVwiIHtcclxuICAgIGV4cG9ydCA9IENEUDtcclxufVxyXG4iLCJuYW1lc3BhY2UgQ0RQIHtcclxuXHJcbiAgICBjb25zdCBUQUc6IHN0cmluZyA9IFwiW0NEUC5QYXRjaF0gXCI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAY2xhc3MgUGF0Y2hcclxuICAgICAqIEBicmllZiDlrp/ooYznkrDlooPnlKggUGF0Y2gg6YGp55So44Om44O844OG44Kj44Oq44OG44Kj44Kv44Op44K5XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBjbGFzcyBQYXRjaCB7XHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBwdWJsaWMgc3RhdGljIG1ldGhvZHM6XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOODkeODg+ODgeOBrumBqeeUqFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYXBwbHkoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIFBhdGNoLmNvbnNvbGVQYXRjaCgpO1xyXG4gICAgICAgICAgICBQYXRjaC5ub2RlUGF0Y2goKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gcHJpdmF0ZSBzdGF0aWMgbWV0aG9kczpcclxuXHJcbiAgICAgICAgLy8gY29uc29sZSDnlKggcGF0Y2hcclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBjb25zb2xlUGF0Y2goKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmIChudWxsID09IGdsb2JhbC5jb25zb2xlIHx8IG51bGwgPT0gZ2xvYmFsLmNvbnNvbGUuZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIGdsb2JhbC5jb25zb2xlID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvdW50OiAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7IC8qIGR1bW15ICovIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXBFbmQ6ICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsgLyogZHVtbXkgKi8gfSxcclxuICAgICAgICAgICAgICAgICAgICB0aW1lOiAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkgeyAvKiBkdW1teSAqLyB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHRpbWVFbmQ6ICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7IC8qIGR1bW15ICovIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgdHJhY2U6ICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsgLyogZHVtbXkgKi8gfSxcclxuICAgICAgICAgICAgICAgICAgICBncm91cDogICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkgeyAvKiBkdW1teSAqLyB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGRpcnhtbDogICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7IC8qIGR1bW15ICovIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgZGVidWc6ICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsgLyogZHVtbXkgKi8gfSxcclxuICAgICAgICAgICAgICAgICAgICBncm91cENvbGxhcHNlZDogICAgICAgICAgICAgZnVuY3Rpb24gKCkgeyAvKiBkdW1teSAqLyB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdDogICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7IC8qIGR1bW15ICovIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgaW5mbzogICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsgLyogZHVtbXkgKi8gfSxcclxuICAgICAgICAgICAgICAgICAgICBwcm9maWxlOiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkgeyAvKiBkdW1teSAqLyB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGFzc2VydDogICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7IC8qIGR1bW15ICovIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgbXNJc0luZGVwZW5kZW50bHlDb21wb3NlZDogIGZ1bmN0aW9uICgpIHsgLyogZHVtbXkgKi8gfSxcclxuICAgICAgICAgICAgICAgICAgICBjbGVhcjogICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkgeyAvKiBkdW1teSAqLyB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGRpcjogICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7IC8qIGR1bW15ICovIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgd2FybjogICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsgLyogZHVtbXkgKi8gfSxcclxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkgeyAvKiBkdW1teSAqLyB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGxvZzogICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7IC8qIGR1bW15ICovIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvZmlsZUVuZDogICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsgLyogZHVtbXkgKi8gfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gV2luUlQg55SoIHBhdGNoXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgbm9kZVBhdGNoKCk6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAoXCJvYmplY3RcIiA9PT0gdHlwZW9mIE1TQXBwKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBfTVNBcHA6IGFueSA9IE1TQXBwO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IG9yaWdpbmFsQXBwZW5kQ2hpbGQgPSBOb2RlLnByb3RvdHlwZS5hcHBlbmRDaGlsZDtcclxuICAgICAgICAgICAgICAgIE5vZGUucHJvdG90eXBlLmFwcGVuZENoaWxkID0gZnVuY3Rpb24gKG5vZGU6IGFueSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfTVNBcHAuZXhlY1Vuc2FmZUxvY2FsRnVuY3Rpb24oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb3JpZ2luYWxBcHBlbmRDaGlsZC5jYWxsKHNlbGYsIG5vZGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBvcmlnaW5hbEluc2VydEJlZm9yZSA9IE5vZGUucHJvdG90eXBlLmluc2VydEJlZm9yZTtcclxuICAgICAgICAgICAgICAgIE5vZGUucHJvdG90eXBlLmluc2VydEJlZm9yZSA9IGZ1bmN0aW9uIChuZXdFbGVtZW50OiBhbnksIHJlZmVyZW5jZUVsZW1lbnQ6IE5vZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzZWxmID0gdGhpcztcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX01TQXBwLmV4ZWNVbnNhZmVMb2NhbEZ1bmN0aW9uKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9yaWdpbmFsSW5zZXJ0QmVmb3JlLmNhbGwoc2VsZiwgbmV3RWxlbWVudCwgcmVmZXJlbmNlRWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIm5hbWVzcGFjZSBDRFAge1xyXG5cclxuICAgIGNvbnN0IENBTkNFTEVEX01FU1NBR0UgPSBcImFib3J0XCI7XHJcbiAgICBjb25zdCBzX2NvZGUybWVzc2FnZTogeyBbcmVzdWx0Q29kZTogc3RyaW5nXTogc3RyaW5nIH0gPSB7XHJcbiAgICAgICAgXCIwXCI6IFwib3BlcmF0aW9uIHN1Y2NlZWRlZC5cIixcclxuICAgICAgICBcIi0xXCI6IFwib3BlcmF0aW9uIGZhaWxlZC5cIlxyXG4gICAgfTtcclxuXHJcbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgLy8gZXJyb3IgdXRpbGl0aWVzOlxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGVudW0gIFJFU1VMVF9DT0RFXHJcbiAgICAgKiBAYnJpZWYg44Ki44OX44Oq44Kx44O844K344On44Oz5YWo5L2T44Gn5L2/55So44GZ44KL5YWx6YCa44Ko44Op44O844Kz44O844OJ5a6a576pXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBlbnVtIFJFU1VMVF9DT0RFIHtcclxuICAgICAgICBTVUNDRUVERUQgPSAwLCAgLy8g5rGO55So5oiQ5YqfXHJcbiAgICAgICAgRkFJTEVEID0gLTEsICAgIC8vIOaxjueUqOOBruOCqOODqeODvFxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGludGVyZmFjZSBFcnJvckluZm9cclxuICAgICAqIEBicmllZiAgICAg44Ko44Op44O85Lyd6YGU44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgRXJyb3JJbmZvIGV4dGVuZHMgRXJyb3Ige1xyXG4gICAgICAgIGNvZGU6IFJFU1VMVF9DT0RFOyAgIC8vIOOCouODl+ODquOCseODvOOCt+ODp+ODsy/jg6njgqTjg5bjg6njg6rjgaflrprnvqnjgZnjgovjg6rjgrbjg6vjg4jjgrPjg7zjg4lcclxuICAgICAgICBjYXVzZT86IEVycm9yOyAgICAgICAvLyDjgqjjg6njg7zjga7oqbPntLBcclxuICAgIH1cclxuXHJcbiAgICAvLyDjg63jg7zjgqvjg6vjg6rjgrbjg6vjg4jjgrPjg7zjg4njga7jgqLjgrXjgqTjg7Plj6/og73mlbBcclxuICAgIGV4cG9ydCBjb25zdCBNT0RVTEVfUkVTVUxUX0NPREVfUkFOR0UgPSAxMDAwO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICog44Ko44Op44O85oOF5aCx44GM44Kt44Oj44Oz44K744Or44GV44KM44Gf44KC44Gu44GL5Yik5a6aXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGVycm9yIFtpbl0g44Ko44Op44O85oOF5aCxXHJcbiAgICAgKiBAcmV0dXJucyB0cnVlOiDjgq3jg6Pjg7Pjgrvjg6sgLyBmYWxzZTog44Gd44Gu5LuW44Ko44Op44O8XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBpc0NhbmNlbGVkRXJyb3IoZXJyb3I6IEVycm9yKTogYm9vbGVhbiB7XHJcbiAgICAgICAgY29uc3QgZXJyb3JJbmZvID0gPEVycm9ySW5mbz5lcnJvcjtcclxuICAgICAgICBpZiAoZXJyb3JJbmZvKSB7XHJcbiAgICAgICAgICAgIGlmIChSRVNVTFRfQ09ERS5TVUNDRUVERUQgPT09IGVycm9ySW5mby5jb2RlIHx8IENBTkNFTEVEX01FU1NBR0UgPT09IGVycm9ySW5mby5tZXNzYWdlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDjgqjjg6njg7zmg4XloLHnlJ/miJBcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gcmVzdWx0Q29kZSBbaW5dIFJFU1VMVF9DT0RFIOOCkuaMh+WumlxyXG4gICAgICogQHBhcmFtIFt0YWddICAgICAgW2luXSBUQUcg44KS5oyH5a6aXHJcbiAgICAgKiBAcGFyYW0gW21lc3NhZ2VdICBbaW5dIOODoeODg+OCu+ODvOOCuOOCkuaMh+WumlxyXG4gICAgICogQHBhcmFtIFtjYXVzZV0gICAgW2luXSDkuIvkvY3jga7jgqjjg6njg7zjgpLmjIflrppcclxuICAgICAqIEByZXR1cm5zIOOCqOODqeODvOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICovXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gbWFrZUVycm9ySW5mbyhyZXN1bHRDb2RlOiBSRVNVTFRfQ09ERSwgdGFnPzogc3RyaW5nLCBtZXNzYWdlPzogc3RyaW5nLCBjYXVzZT86IEVycm9yKTogRXJyb3JJbmZvIHtcclxuICAgICAgICBjb25zdCBjYW5jZWxlZCA9IChjYXVzZSAmJiBDQU5DRUxFRF9NRVNTQUdFID09PSBjYXVzZS5tZXNzYWdlKSA/IHRydWUgOiBmYWxzZTtcclxuICAgICAgICBjb25zdCBtc2cgPSBjYW5jZWxlZCA/IENBTkNFTEVEX01FU1NBR0UgOiBtZXNzYWdlO1xyXG4gICAgICAgIGNvbnN0IGNvZGUgPSBjYW5jZWxlZCA/IFJFU1VMVF9DT0RFLlNVQ0NFRURFRCA6IHJlc3VsdENvZGU7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgLi4ubmV3IEVycm9yKG1zZyB8fCBtZXNzYWdlRnJvbVJlc3VsdENvZGUoY29kZSkpLFxyXG4gICAgICAgICAgICAuLi57XHJcbiAgICAgICAgICAgICAgICBuYW1lOiBidWlsZEVycm9yTmFtZShjb2RlLCB0YWcpLFxyXG4gICAgICAgICAgICAgICAgY29kZTogY29kZSxcclxuICAgICAgICAgICAgICAgIGNhdXNlOiBjYXVzZSxcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZW51bSAgUkVTVUxUX0NPREVfQkFTRVxyXG4gICAgICogQGJyaWVmIOODquOCtuODq+ODiOOCs+ODvOODieOBruOCquODleOCu+ODg+ODiOWApFxyXG4gICAgICogICAgICAgIOOCqOODqeODvOOCs+ODvOODieWvvuW/nOOBmeOCi+ODouOCuOODpeODvOODq+WGheOBpyDlrprnvqnjgpLmi6HlvLXjgZnjgosuXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBlbnVtIFJFU1VMVF9DT0RFX0JBU0Uge1xyXG4gICAgICAgIFJFU1VMVF9DT0RFX0JBU0VfREVDTEFSQVRJT04gPSAwLCAgICAgICAvLyBUUzI0MzIg5a++562WXHJcbi8vICAgICAgTU9EVUxFX0EgPSAxICogTU9EVUxFX1JFU1VMVF9DT0RFX1JBTkdFLCAvLyBleCkgbW9kdWxlQTogMTAwMSDvvZ4gMTk5OVxyXG4vLyAgICAgIE1PRFVMRV9CID0gMiAqIE1PRFVMRV9SRVNVTFRfQ09ERV9SQU5HRSwgLy8gZXgpIG1vZHVsZUI6IDIwMDEg772eIDI5OTlcclxuLy8gICAgICBNT0RVTEVfQyA9IDMgKiBNT0RVTEVfUkVTVUxUX0NPREVfUkFOR0UsIC8vIGV4KSBtb2R1bGVDOiAzMDAxIO+9niAzOTk5XHJcbiAgICAgICAgQ0RQID0gMTAxICogTU9EVUxFX1JFU1VMVF9DT0RFX1JBTkdFLCAgICAvLyBjZHAgcmVzZXJ2ZWQuIDEwMSwwMDAg772eXHJcbiAgICB9XHJcbiAgICBBU1NJR05fUkVTVUxUX0NPREVfQkFTRShSRVNVTFRfQ09ERV9CQVNFKTtcclxuXHJcbiAgICAvLyDjgqjjg6njg7zjgrPjg7zjg4nnlJ/miJBcclxuICAgIGV4cG9ydCBmdW5jdGlvbiBERUNMQVJFX0VSUk9SX0NPREUoYmFzZU5hbWU6IHN0cmluZywgbG9jYWxDb2RlOiBudW1iZXIsIG1lc3NhZ2U/OiBzdHJpbmcpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiBkZWNsYXJlUmVzdWx0Q29kZShSRVNVTFRfQ09ERV9CQVNFW2Jhc2VOYW1lXSwgbG9jYWxDb2RlLCBtZXNzYWdlKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJFU1VMVF9DT0RFX0JBU0Ug44Gu44Ki44K144Kk44OzXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBBU1NJR05fUkVTVUxUX0NPREVfQkFTRShyZXN1bHRDb2RlQmFzZTogb2JqZWN0KTogdm9pZCB7XHJcbiAgICAgICAgQ0RQLlJFU1VMVF9DT0RFX0JBU0UgPSA8YW55PnsgLi4uQ0RQLlJFU1VMVF9DT0RFX0JBU0UsIC4uLnJlc3VsdENvZGVCYXNlIH07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSRVNVTFRfQ09ERSDjga7jgqLjgrXjgqTjg7NcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIEFTU0lHTl9SRVNVTFRfQ09ERShyZXN1bHRDb2RlOiBvYmplY3QpOiB2b2lkIHtcclxuICAgICAgICBDRFAuUkVTVUxUX0NPREUgPSA8YW55PnsgLi4uQ0RQLlJFU1VMVF9DT0RFLCAuLi5yZXN1bHRDb2RlIH07XHJcbiAgICB9XHJcblxyXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgIC8vIG1vZHVsZSBlcnJvciBkZWNsYXJhdGlvbjpcclxuXHJcbiAgICBjb25zdCBGVU5DVElPTl9DT0RFX1JBTkdFID0gMTA7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZW51bSAgTE9DQUxfQ09ERV9CQVNFXHJcbiAgICAgKiBAYnJpZWYgY2RwLmNvcmUg5YaF44Gu44Ot44O844Kr44Or44Kz44O844OJ44Kq44OV44K744OD44OI5YCkXHJcbiAgICAgKi9cclxuICAgIGVudW0gTE9DQUxfQ09ERV9CQVNFIHtcclxuICAgICAgICBDT1JFICAgID0gMCxcclxuICAgICAgICBQQVRDSCAgID0gMSAqIEZVTkNUSU9OX0NPREVfUkFOR0UsXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZW51bSAgUkVTVUxUX0NPREVcclxuICAgICAqIEBicmllZiBGRVMuVXRpbHMg44Gu44Ko44Op44O844Kz44O844OJ5a6a576pXHJcbiAgICAgKiAgICAgICAg44Oi44K444Ol44O844Or5Yil44Gr5ouh5by15Y+v6IO9XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBlbnVtIFJFU1VMVF9DT0RFIHtcclxuICAgICAgICBSRVNVTFRfQ09ERV9ERUNMQVJBVElPTiA9IDAsICAgIC8vIFRTMjQzMiDlr77nrZZcclxuICAgICAgICBFUlJPUl9DRFBfSU5JVElBTElaRV9GQUlMRUQgPSBERUNMQVJFX0VSUk9SX0NPREUoXCJDRFBcIiwgTE9DQUxfQ09ERV9CQVNFLkNPUkUgKyAxLCBcImluaXRpYWxpemVkIGZhaWxlZC5cIiksXHJcbiAgICB9XHJcbiAgICBBU1NJR05fUkVTVUxUX0NPREVfQkFTRShSRVNVTFRfQ09ERSk7XHJcblxyXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgIC8vIHByaXZhdGUgc3RhdGljIG1ldGhvZHM6XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDjg6rjgrbjg6vjg4jjgrPjg7zjg4njga7nmbvpjLJcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gYmFzZSAgICAgICBbaW5dIFJFU1VMVF9DT0RFX0JBU0Ug44KS5oyH5a6aXHJcbiAgICAgKiBAcGFyYW0gbW9kdWxlQ29kZSBbaW5dIOODouOCuOODpeODvOODq+OBp+S4gOaEj+OBq+OBquOCi+aVsOWApCAoMCA8IGxvY2FsQ29kZSA8IDEwMDApXHJcbiAgICAgKiBAcGFyYW0gW21lc3NhZ2VdICBbaW5dIOODquOCtuODq+ODiOOCs+ODvOODieOBq+e0kOOBpeOBj+ODoeODg+OCu+ODvOOCuFxyXG4gICAgICogQHJldHVybnMg44Oq44K244Or44OI44Kz44O844OJXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGRlY2xhcmVSZXN1bHRDb2RlKGJhc2U6IFJFU1VMVF9DT0RFX0JBU0UsIG1vZHVsZUNvZGU6IG51bWJlciwgbWVzc2FnZT86IHN0cmluZyk6IG51bWJlciB7XHJcbiAgICAgICAgaWYgKG1vZHVsZUNvZGUgPD0gMCB8fCBNT0RVTEVfUkVTVUxUX0NPREVfUkFOR0UgPD0gbW9kdWxlQ29kZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBkZWNsYXJlUmVzdWx0Q29kZSgpLCBpbnZhbGlkIGxvY2FsQ29kZSByYW5nZS4gW2xvY2FsQ29kZTogJHttb2R1bGVDb2RlfV1gKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCByZXN1bHRDb2RlID0gYmFzZSArIG1vZHVsZUNvZGU7XHJcbiAgICAgICAgc19jb2RlMm1lc3NhZ2VbcmVzdWx0Q29kZV0gPSBtZXNzYWdlID8gbWVzc2FnZSA6IChgW1JFU1VMVF9DT0RFOiAke3Jlc3VsdENvZGV9XWApO1xyXG4gICAgICAgIHJldHVybiByZXN1bHRDb2RlO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIOODquOCtuODq+ODiOOCs+ODvOODieOBi+OCieeZu+mMsuOBleOCjOOBpuOBhOOCi+ODoeODg+OCu+ODvOOCuOOCkuWPluW+l1xyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSByZXN1bHRDb2RlIFtpbl0g44Oq44K244Or44OI44Kz44O844OJXHJcbiAgICAgKiBAcmV0dXJucyDjgqjjg6njg7zjg6Hjg4Pjgrvjg7zjgrhcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gbWVzc2FnZUZyb21SZXN1bHRDb2RlKHJlc3VsdENvZGU6IG51bWJlcik6IHN0cmluZyB7XHJcbiAgICAgICAgaWYgKHNfY29kZTJtZXNzYWdlW3Jlc3VsdENvZGVdKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzX2NvZGUybWVzc2FnZVtyZXN1bHRDb2RlXTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gYHVucmVnaXN0ZXJlZCByZXN1bHQgY29kZS4gW1JFU1VMVF9DT0RFOiAke3Jlc3VsdENvZGV9XWA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog44Oq44K244Or44OI44Kz44O844OJ44GL44KJ55m76Yyy44GV44KM44Gm44GE44KL44Oq44K244Or44OI44Kz44O844OJ5paH5a2X5YiX44KS5Y+W5b6XXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHJlc3VsdENvZGUgW2luXSDjg6rjgrbjg6vjg4jjgrPjg7zjg4lcclxuICAgICAqIEBwYXJhbSB0YWcgICAgICAgIFtpbl0gVEFHIOOCkuaMh+WumlxyXG4gICAgICogQHJldHVybnMg44Oq44K244Or44OI44Kz44O844OJ6K2Y5Yil5paH5a2X5YiXXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGJ1aWxkRXJyb3JOYW1lKHJlc3VsdENvZGU6IG51bWJlciwgdGFnOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgICAgIGNvbnN0IHByZWZpeCA9IHRhZyB8fCBcIlwiO1xyXG4gICAgICAgIGlmIChSRVNVTFRfQ09ERVtyZXN1bHRDb2RlXSkge1xyXG4gICAgICAgICAgICByZXR1cm4gcHJlZml4ICsgUkVTVUxUX0NPREVbcmVzdWx0Q29kZV0gKyBcIjogXCI7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHByZWZpeDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwibmFtZXNwYWNlIENEUCB7XHJcblxyXG4gICAgY29uc3QgVEFHOiBzdHJpbmcgPSBcIltDRFAuUHJvbWlzZV0gXCI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAaW50ZXJmYWNlIElQcm9taXNlQmFzZVxyXG4gICAgICogQGJyaWVmIE5hdGl2ZSBQcm9taXNlIOOCquODluOCuOOCp+OCr+ODiOOBruaLoeW8teOCpOODs+OCv+ODvOODleOCp+OCpOOCueWumue+qVxyXG4gICAgICogICAgICAgIOOCreODo+ODs+OCu+ODq+OBleOBm+OBn+OBj+OBquOBhOOBjCBhbHdheXMoKSDjgarjgakgalF1ZXJ5IG1ldGhvZCDjgpLmj5DkvpvjgZfjgZ/jgYTloLTlkIjjgavkvb/nlKjjgZnjgosuXHJcbiAgICAgKiAgICAgICAgTmF0aXZlIOOCquODluOCuOOCp+OCr+ODiOOBruaLoeW8teWun+ijheOBr+eEoeOBhOOBn+OCgeOAgWdsb2JhbCDjgavjga/lrprnvqnjgZfjgarjgYQuXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSVByb21pc2VCYXNlPFQ+IGV4dGVuZHMgUHJvbWlzZTxUPiB7XHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBQcm9taXNlIGV4dGVuZHM6XHJcblxyXG4gICAgICAgIHRoZW48VFJlc3VsdDEgPSBULCBUUmVzdWx0MiA9IG5ldmVyPihcclxuICAgICAgICAgICAgb25mdWxmaWxsZWQ/OiAoXHJcbiAgICAgICAgICAgICAgICAodmFsdWU6IFQpID0+IFRSZXN1bHQxIHwgUHJvbWlzZUxpa2U8VFJlc3VsdDE+XHJcbiAgICAgICAgICAgICkgfCB1bmRlZmluZWQgfCBudWxsLFxyXG4gICAgICAgICAgICBvbnJlamVjdGVkPzogKFxyXG4gICAgICAgICAgICAgICAgKHJlYXNvbjogYW55KSA9PiBUUmVzdWx0MiB8IFByb21pc2VMaWtlPFRSZXN1bHQyPlxyXG4gICAgICAgICAgICApIHwgdW5kZWZpbmVkIHwgbnVsbFxyXG4gICAgICAgICk6IElQcm9taXNlQmFzZTxUUmVzdWx0MSB8IFRSZXN1bHQyPjtcclxuXHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gSlF1ZXJ5UHJvbWlzZSBzdHVmZjpcclxuXHJcbiAgICAgICAgc3RhdGU6ICgpID0+IHN0cmluZztcclxuICAgICAgICBhbHdheXM6IChcclxuICAgICAgICAgICAgYWx3YXlzQ2FsbGJhY2sxPzogSlF1ZXJ5UHJvbWlzZUNhbGxiYWNrPGFueT4gfCBKUXVlcnlQcm9taXNlQ2FsbGJhY2s8YW55PltdLFxyXG4gICAgICAgICAgICAuLi5hbHdheXNDYWxsYmFja3NOOiBBcnJheTxKUXVlcnlQcm9taXNlQ2FsbGJhY2s8YW55PiB8IEpRdWVyeVByb21pc2VDYWxsYmFjazxhbnk+W10+XHJcbiAgICAgICAgKSA9PiBJUHJvbWlzZUJhc2U8VD47XHJcbiAgICAgICAgZG9uZTogKFxyXG4gICAgICAgICAgICBkb25lQ2FsbGJhY2sxPzogSlF1ZXJ5UHJvbWlzZUNhbGxiYWNrPFQ+IHwgSlF1ZXJ5UHJvbWlzZUNhbGxiYWNrPFQ+W10sXHJcbiAgICAgICAgICAgIC4uLmRvbmVDYWxsYmFja046IEFycmF5PEpRdWVyeVByb21pc2VDYWxsYmFjazxUPiB8IEpRdWVyeVByb21pc2VDYWxsYmFjazxUPltdPlxyXG4gICAgICAgICkgPT4gSVByb21pc2VCYXNlPFQ+O1xyXG4gICAgICAgIGZhaWw6IChcclxuICAgICAgICAgICAgZmFpbENhbGxiYWNrMT86IEpRdWVyeVByb21pc2VDYWxsYmFjazxhbnk+IHwgSlF1ZXJ5UHJvbWlzZUNhbGxiYWNrPGFueT5bXSxcclxuICAgICAgICAgICAgLi4uZmFpbENhbGxiYWNrc046IEFycmF5PEpRdWVyeVByb21pc2VDYWxsYmFjazxhbnk+IHwgSlF1ZXJ5UHJvbWlzZUNhbGxiYWNrPGFueT5bXT5cclxuICAgICAgICApID0+IElQcm9taXNlQmFzZTxUPjtcclxuICAgICAgICBwcm9ncmVzczogKFxyXG4gICAgICAgICAgICBwcm9ncmVzc0NhbGxiYWNrMT86IEpRdWVyeVByb21pc2VDYWxsYmFjazxhbnk+IHwgSlF1ZXJ5UHJvbWlzZUNhbGxiYWNrPGFueT5bXSxcclxuICAgICAgICAgICAgLi4ucHJvZ3Jlc3NDYWxsYmFja046IEFycmF5PEpRdWVyeVByb21pc2VDYWxsYmFjazxhbnk+IHwgSlF1ZXJ5UHJvbWlzZUNhbGxiYWNrPGFueT5bXT5cclxuICAgICAgICApID0+IElQcm9taXNlQmFzZTxUPjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBpbnRlcmZhY2UgSVByb21pc2VcclxuICAgICAqIEBicmllZiDjgq3jg6Pjg7Pjgrvjg6vlj6/og73jgaogUHJvbWlzZSDjgqrjg5bjgrjjgqfjgq/jg4jjga7jgqTjg7Pjgr/jg7zjg5XjgqfjgqTjgrnlrprnvqlcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJUHJvbWlzZTxUPiBleHRlbmRzIElQcm9taXNlQmFzZTxUPiB7XHJcbiAgICAgICAgLy8hIOOCreODo+ODs+OCu+ODq+WHpueQhlxyXG4gICAgICAgIGFib3J0KGluZm8/OiBhbnkpOiB2b2lkO1xyXG4gICAgICAgIC8vISDkvp3lrZjjgZnjgosgcHJvbWlzZS5cclxuICAgICAgICBkZXBlbmRlbmN5PzogSVByb21pc2U8YW55PjtcclxuICAgICAgICAvLyEgYWJvcnQg5pmC44Gr6Ieq6Lqr44KCIHJlamVjdFxyXG4gICAgICAgIGNhbGxSZWplY3Q/OiBib29sZWFuO1xyXG4gICAgICAgIC8vISDkvp3lrZjjgZnjgosgcHJvbWlzZSDjgpLoqK3lrppcclxuICAgICAgICBkZXBlbmRPbjxVPihwcm9taXNlOiBJUHJvbWlzZTxVPiB8IEpRdWVyeVhIUik6IElQcm9taXNlPFU+O1xyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIFByb21pc2UgZXh0ZW5kczpcclxuXHJcbiAgICAgICAgdGhlbjxUUmVzdWx0MSA9IFQsIFRSZXN1bHQyID0gbmV2ZXI+KFxyXG4gICAgICAgICAgICBvbmZ1bGZpbGxlZD86IChcclxuICAgICAgICAgICAgICAgICh2YWx1ZTogVCkgPT4gVFJlc3VsdDEgfCBQcm9taXNlTGlrZTxUUmVzdWx0MT5cclxuICAgICAgICAgICAgKSB8IHVuZGVmaW5lZCB8IG51bGwsXHJcbiAgICAgICAgICAgIG9ucmVqZWN0ZWQ/OiAoXHJcbiAgICAgICAgICAgICAgICAocmVhc29uOiBhbnkpID0+IFRSZXN1bHQyIHwgUHJvbWlzZUxpa2U8VFJlc3VsdDI+XHJcbiAgICAgICAgICAgICkgfCB1bmRlZmluZWQgfCBudWxsXHJcbiAgICAgICAgKTogSVByb21pc2U8VFJlc3VsdDEgfCBUUmVzdWx0Mj47XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gSlF1ZXJ5UHJvbWlzZSBzdHVmZjpcclxuXHJcbiAgICAgICAgc3RhdGU6ICgpID0+IHN0cmluZztcclxuICAgICAgICBhbHdheXM6IChcclxuICAgICAgICAgICAgYWx3YXlzQ2FsbGJhY2sxPzogSlF1ZXJ5UHJvbWlzZUNhbGxiYWNrPGFueT4gfCBKUXVlcnlQcm9taXNlQ2FsbGJhY2s8YW55PltdLFxyXG4gICAgICAgICAgICAuLi5hbHdheXNDYWxsYmFja3NOOiBBcnJheTxKUXVlcnlQcm9taXNlQ2FsbGJhY2s8YW55PiB8IEpRdWVyeVByb21pc2VDYWxsYmFjazxhbnk+W10+XHJcbiAgICAgICAgKSA9PiBJUHJvbWlzZTxUPjtcclxuICAgICAgICBkb25lOiAoXHJcbiAgICAgICAgICAgIGRvbmVDYWxsYmFjazE/OiBKUXVlcnlQcm9taXNlQ2FsbGJhY2s8VD4gfCBKUXVlcnlQcm9taXNlQ2FsbGJhY2s8VD5bXSxcclxuICAgICAgICAgICAgLi4uZG9uZUNhbGxiYWNrTjogQXJyYXk8SlF1ZXJ5UHJvbWlzZUNhbGxiYWNrPFQ+IHwgSlF1ZXJ5UHJvbWlzZUNhbGxiYWNrPFQ+W10+XHJcbiAgICAgICAgKSA9PiBJUHJvbWlzZTxUPjtcclxuICAgICAgICBmYWlsOiAoXHJcbiAgICAgICAgICAgIGZhaWxDYWxsYmFjazE/OiBKUXVlcnlQcm9taXNlQ2FsbGJhY2s8YW55PiB8IEpRdWVyeVByb21pc2VDYWxsYmFjazxhbnk+W10sXHJcbiAgICAgICAgICAgIC4uLmZhaWxDYWxsYmFja3NOOiBBcnJheTxKUXVlcnlQcm9taXNlQ2FsbGJhY2s8YW55PiB8IEpRdWVyeVByb21pc2VDYWxsYmFjazxhbnk+W10+XHJcbiAgICAgICAgKSA9PiBJUHJvbWlzZTxUPjtcclxuICAgICAgICBwcm9ncmVzczogKFxyXG4gICAgICAgICAgICBwcm9ncmVzc0NhbGxiYWNrMT86IEpRdWVyeVByb21pc2VDYWxsYmFjazxhbnk+IHwgSlF1ZXJ5UHJvbWlzZUNhbGxiYWNrPGFueT5bXSxcclxuICAgICAgICAgICAgLi4ucHJvZ3Jlc3NDYWxsYmFja046IEFycmF5PEpRdWVyeVByb21pc2VDYWxsYmFjazxhbnk+IHwgSlF1ZXJ5UHJvbWlzZUNhbGxiYWNrPGFueT5bXT5cclxuICAgICAgICApID0+IElQcm9taXNlPFQ+O1xyXG4gICAgfVxyXG5cclxuICAgIC8vX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXy8vXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBtYWtlUHJvbWlzZSDjgavmjIflrprlj6/og73jgaogY2FuY2VsIGNhbGxiYWNrIOOBriBhbGlhcy5cclxuICAgICAqL1xyXG4gICAgZXhwb3J0IHR5cGUgY2FuY2VsQ2FsbGJhY2sgPSAoZGV0YWlsPzogYW55KSA9PiB2b2lkO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGludGVyZmFjZSBNYWtlUHJvbWlzZU9wdGlvbnNcclxuICAgICAqIEBicmllZiAgICAgbWFrZVByb21pc2Ug44Gr5rih44Gb44KL44Kq44OX44K344On44OzXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgTWFrZVByb21pc2VPcHRpb25zIHtcclxuICAgICAgICBkZXBlbmRlbmN5PzogSVByb21pc2U8YW55PjsgICAgICAgICAvLyE8IOS+neWtmOOBmeOCiyBwcm9taXNlIOOCkuioreWumlxyXG4gICAgICAgIGNhbGxSZWplY3Q/OiBib29sZWFuOyAgICAgICAgICAgICAgIC8vITwgYWJvcnQg5pmC44Gr6Ieq6Lqr44KCIHJlamVjdFxyXG4gICAgICAgIGNhbmNlbENhbGxiYWNrPzogY2FuY2VsQ2FsbGJhY2s7ICAgIC8vITwg44Kt44Oj44Oz44K744Or5pmC44Gr5ZG844Gw44KM44KL6Zai5pWwXHJcbiAgICAgICAgW2tleTogc3RyaW5nXTogYW55OyAgICAgICAgICAgICAgICAgLy8hPCDmi6HlvLXjg5Hjg6njg6Hjg7zjgr9cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENhbmNlbCDlj6/og73jgqrjg5bjgrjjgqfjgq/jg4jjga7kvZzmiJBcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gZGYgICAgICAgW2luXSBqUXVlcnlEZWZlcnJlZCBpbnN0YW5jZSDjgpLmjIflrppcclxuICAgICAqIEBwYXJhbSBvcHRpb25zPyBbaW5dIGpRdWVyeVByb21pc2Ug44KS5ouh5by144GZ44KL44Kq44OW44K444Kn44Kv44OIIG9yIOOCreODo+ODs+OCu+ODq+aZguOBq+WRvOOBs+WHuuOBleOCjOOCi+mWouaVsOOCkuaMh+WumlxyXG4gICAgICogQHJldHVybnMge09iamVjdH0gQ2FuY2VsYWJsZSBwcm9wZXJ0eVxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBtYWtlQ2FuY2VsYWJsZTxUPihcclxuICAgICAgICBkZjogSlF1ZXJ5RGVmZXJyZWQ8VD4sXHJcbiAgICAgICAgb3B0aW9ucz86IE1ha2VQcm9taXNlT3B0aW9ucyB8IGNhbmNlbENhbGxiYWNrXHJcbiAgICApOiB7IGRmOiBKUXVlcnlEZWZlcnJlZDxUPiwgdGFyZ2V0OiBvYmplY3Q7IGFib3J0OiAoaW5mbz86IGFueSkgPT4gdm9pZDsgZGVwZW5kT246IChwcm9taXNlOiBhbnkpID0+IEpRdWVyeVByb21pc2U8YW55PiB9IHtcclxuICAgICAgICBsZXQgZXh0ZW5kT3B0aW9uczogTWFrZVByb21pc2VPcHRpb25zO1xyXG4gICAgICAgIGxldCBjYW5jZWw6IGNhbmNlbENhbGxiYWNrO1xyXG5cclxuICAgICAgICBpZiAoXCJmdW5jdGlvblwiID09PSB0eXBlb2Ygb3B0aW9ucykge1xyXG4gICAgICAgICAgICBjYW5jZWwgPSA8Y2FuY2VsQ2FsbGJhY2s+b3B0aW9ucztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBleHRlbmRPcHRpb25zID0gb3B0aW9ucztcclxuICAgICAgICAgICAgaWYgKGV4dGVuZE9wdGlvbnMgJiYgZXh0ZW5kT3B0aW9ucy5jYW5jZWxDYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgY2FuY2VsID0gZXh0ZW5kT3B0aW9ucy5jYW5jZWxDYWxsYmFjaztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNhbmNlbCA9ICgpID0+IHsgLyogbm9vcCAqLyB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBfYWJvcnQgPSBmdW5jdGlvbiAoaW5mbz86IGFueSk6IHZvaWQge1xyXG4gICAgICAgICAgICBjb25zdCBkZXRhaWwgPSBpbmZvID8gaW5mbyA6IHsgbWVzc2FnZTogXCJhYm9ydFwiIH07XHJcbiAgICAgICAgICAgIGNhbmNlbChkZXRhaWwpO1xyXG4gICAgICAgICAgICBpZiAobnVsbCAhPSB0aGlzLmRlcGVuZGVuY3kpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmRlcGVuZGVuY3kuYWJvcnQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRlcGVuZGVuY3kuYWJvcnQoZGV0YWlsKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihUQUcgKyBcIltjYWxsXSBkZXBlbmRlbmN5IG9iamVjdCBkb2Vzbid0IGhhdmUgJ2Fib3J0KCknIG1ldGhvZC5cIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jYWxsUmVqZWN0ICYmIFwicGVuZGluZ1wiID09PSB0aGlzLnN0YXRlKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBkZi5yZWplY3QoZGV0YWlsKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIGlmIChcInBlbmRpbmdcIiA9PT0gdGhpcy5zdGF0ZSgpKSB7XHJcbiAgICAgICAgICAgICAgICBkZi5yZWplY3QoZGV0YWlsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNvbnN0IF9kZXBlbmRPbiA9IGZ1bmN0aW9uIChwcm9taXNlOiBhbnkpOiBKUXVlcnlQcm9taXNlPGFueT4ge1xyXG4gICAgICAgICAgICBpZiAocHJvbWlzZS5hYm9ydCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kZXBlbmRlbmN5ID0gcHJvbWlzZTtcclxuICAgICAgICAgICAgICAgIHByb21pc2VcclxuICAgICAgICAgICAgICAgICAgICAuYWx3YXlzKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZXBlbmRlbmN5ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoVEFHICsgXCJbc2V0XSBkZXBlbmRlbmN5IG9iamVjdCBkb2Vzbid0IGhhdmUgJ2Fib3J0KCknIG1ldGhvZC5cIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgY29uc3QgX3RhcmdldCA9ICQuZXh0ZW5kKHt9LCB7XHJcbiAgICAgICAgICAgIGRlcGVuZGVuY3k6IG51bGwsXHJcbiAgICAgICAgICAgIGNhbGxSZWplY3Q6IGZhbHNlLFxyXG4gICAgICAgIH0sIGV4dGVuZE9wdGlvbnMpO1xyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBkZjogZGYsXHJcbiAgICAgICAgICAgIHRhcmdldDogX3RhcmdldCxcclxuICAgICAgICAgICAgYWJvcnQ6IF9hYm9ydCxcclxuICAgICAgICAgICAgZGVwZW5kT246IF9kZXBlbmRPbixcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUHJvbWlzZSDjgqrjg5bjgrjjgqfjgq/jg4jjga7kvZzmiJBcclxuICAgICAqIGpRdWVyeURlZmVycmVkIOOCquODluOCuOOCp+OCr+ODiOOBi+OCieOAgVRvb2xzLlByb21pc2Ug44Kq44OW44K444Kn44Kv44OI44KS5L2c5oiQ44GZ44KLXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGRmICAgICAgIFtpbl0galF1ZXJ5RGVmZXJyZWQgaW5zdGFuY2Ug44KS5oyH5a6aXHJcbiAgICAgKiBAcGFyYW0gb3B0aW9ucz8gW2luXSBqUXVlcnlQcm9taXNlIOOCkuaLoeW8teOBmeOCi+OCquODluOCuOOCp+OCr+ODiCBvciDjgq3jg6Pjg7Pjgrvjg6vmmYLjgavlkbzjgbPlh7rjgZXjgozjgovplqLmlbDjgpLmjIflrppcclxuICAgICAqIEByZXR1cm5zIElQcm9taXNlIOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICovXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gbWFrZVByb21pc2U8VD4oZGY6IEpRdWVyeURlZmVycmVkPFQ+LCBvcHRpb25zPzogTWFrZVByb21pc2VPcHRpb25zIHwgY2FuY2VsQ2FsbGJhY2spOiBJUHJvbWlzZTxUPiB7XHJcbiAgICAgICAgY29uc3QgY2FuY2VsYWJsZSA9IG1ha2VDYW5jZWxhYmxlKGRmLCBvcHRpb25zKTtcclxuICAgICAgICBjb25zdCBwcm9taXNlID0gPElQcm9taXNlPFQ+Pjxhbnk+ZGYucHJvbWlzZShjYW5jZWxhYmxlLnRhcmdldCk7XHJcbiAgICAgICAgaWYgKG51bGwgPT0gcHJvbWlzZS5hYm9ydCkge1xyXG4gICAgICAgICAgICBwcm9taXNlLmFib3J0ID0gY2FuY2VsYWJsZS5hYm9ydC5iaW5kKHByb21pc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobnVsbCA9PSBwcm9taXNlLmRlcGVuZE9uKSB7XHJcbiAgICAgICAgICAgIHByb21pc2UuZGVwZW5kT24gPSBjYW5jZWxhYmxlLmRlcGVuZE9uLmJpbmQocHJvbWlzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8vX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXy8vXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBQcm9taXNlIOOCquODluOCuOOCp+OCr+ODiOOBrue1guS6huOCkuW+heOBpFxyXG4gICAgICogJC53aGVuKCkg44Gv5aSx5pWX44GZ44KL44Go44GZ44GQ44Gr5Yi25b6h44KS6L+U44GZ44Gu44Gr5a++44GX44CB5aSx5pWX44KC5ZCr44KB44Gm5b6F44GkIFByb21pc2Ug44Kq44OW44K444Kn44Kv44OI44KS6L+U5Y20XHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGRlZmVycmVkcyBbaW5dIFByb21pc2Ug44Kq44OW44K444Kn44Kv44OIKOWPr+WkieW8leaVsCwg6YWN5YiXKVxyXG4gICAgICogQHJldHVybnMgUHJvbWlzZSDjgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIHdhaXQ8VD4oLi4uZGVmZXJyZWRzOiBQcm9taXNlPFQ+W10pOiBJUHJvbWlzZUJhc2U8VD47XHJcbiAgICBleHBvcnQgZnVuY3Rpb24gd2FpdDxUPiguLi5kZWZlcnJlZHM6IEpRdWVyeUdlbmVyaWNQcm9taXNlPFQ+W10pOiBJUHJvbWlzZUJhc2U8VD47XHJcbiAgICBleHBvcnQgZnVuY3Rpb24gd2FpdDxUPiguLi5kZWZlcnJlZHM6IFRbXSk6IElQcm9taXNlQmFzZTxUPjtcclxuICAgIGV4cG9ydCBmdW5jdGlvbiB3YWl0PFQ+KC4uLmRlZmVycmVkczogYW55W10pOiBJUHJvbWlzZUJhc2U8VD4ge1xyXG5cclxuICAgICAgICAvLyDmipXlhaXms5XjgYzlj6/lpInlvJXmlbDjgaDjgaPjgZ/loLTlkIjjga/phY3liJfjgavkv67mraPjgZnjgotcclxuICAgICAgICBjb25zdCBfZGVmZXJyZWRzOiBKUXVlcnlQcm9taXNlPFQ+W10gPSBbXS5jb25jYXQuYXBwbHkoW10sIGRlZmVycmVkcyk7XHJcblxyXG4gICAgICAgIC8vIOWun+mam+OBruS9nOalrVxyXG4gICAgICAgIGNvbnN0IGRmID0gJC5EZWZlcnJlZCgpO1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdHMgPSBbXTtcclxuICAgICAgICBsZXQgaW5pdGlhbGl6ZWQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgY29uc3QgaXNGaW5pc2hlZCA9ICgpOiBib29sZWFuID0+IHtcclxuICAgICAgICAgICAgaWYgKCFpbml0aWFsaXplZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICFyZXN1bHRzLnNvbWUoKGVsZW1lbnQ6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcInBlbmRpbmdcIiA9PT0gZWxlbWVudC5zdGF0dXM7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIF9kZWZlcnJlZHMuZm9yRWFjaCgoZGVmZXJyZWQsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgIHJlc3VsdHMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBzdGF0dXM6IFwicGVuZGluZ1wiLFxyXG4gICAgICAgICAgICAgICAgYXJnczogbnVsbCxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGRlZmVycmVkXHJcbiAgICAgICAgICAgICAgICAudGhlbigoLi4uYXJnczogYW55W10pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHRzW2luZGV4XS5zdGF0dXMgPSBcInJlc29sdmVkXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0c1tpbmRleF0uYXJncyA9IGFyZ3M7XHJcbiAgICAgICAgICAgICAgICB9LCAoLi4uYXJnczogYW55W10pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHRzW2luZGV4XS5zdGF0dXMgPSBcInJlamVjdGVkXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0c1tpbmRleF0uYXJncyA9IGFyZ3M7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmFsd2F5cygoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzRmluaXNoZWQoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZi5yZXNvbHZlKHJlc3VsdHMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpbml0aWFsaXplZCA9IHRydWU7XHJcbiAgICAgICAgaWYgKGlzRmluaXNoZWQoKSkge1xyXG4gICAgICAgICAgICBkZi5yZXNvbHZlKHJlc3VsdHMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIDxhbnk+ZGYucHJvbWlzZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUHJvbWlzZSDjgqrjg5bjgrjjgqfjgq/jg4jjga7mnIDliJ3jga7lrozkuobjgpLlvoXjgaRcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gZGVmZXJyZWRzIFtpbl0gUHJvbWlzZSDjgqrjg5bjgrjjgqfjgq/jg4go5Y+v5aSJ5byV5pWwLCDphY3liJcpXHJcbiAgICAgKiBAcmV0dXJucyBQcm9taXNlIOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICovXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gcmFjZTxUPiguLi5kZWZlcnJlZHM6IFByb21pc2U8VD5bXSk6IElQcm9taXNlQmFzZTxUPjtcclxuICAgIGV4cG9ydCBmdW5jdGlvbiByYWNlPFQ+KC4uLmRlZmVycmVkczogSlF1ZXJ5R2VuZXJpY1Byb21pc2U8VD5bXSk6IElQcm9taXNlQmFzZTxUPjtcclxuICAgIGV4cG9ydCBmdW5jdGlvbiByYWNlPFQ+KC4uLmRlZmVycmVkczogVFtdKTogSVByb21pc2VCYXNlPFQ+O1xyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIHJhY2U8VD4oLi4uZGVmZXJyZWRzOiBhbnlbXSk6IElQcm9taXNlQmFzZTxUPiB7XHJcbiAgICAgICAgY29uc3QgZGYgPSAkLkRlZmVycmVkKCk7XHJcblxyXG4gICAgICAgIGNvbnN0IF9kZWZlcnJlZHM6IEpRdWVyeVByb21pc2U8VD5bXSA9IFtdLmNvbmNhdC5hcHBseShbXSwgZGVmZXJyZWRzKTtcclxuICAgICAgICBfZGVmZXJyZWRzLmZvckVhY2goKGRlZmVycmVkLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICBkZWZlcnJlZFxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKC4uLmFyZ3M6IGFueVtdKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKFwicGVuZGluZ1wiID09PSBkZi5zdGF0ZSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRmLnJlc29sdmUoYXJncyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSwgKC4uLmFyZ3M6IGFueVtdKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKFwicGVuZGluZ1wiID09PSBkZi5zdGF0ZSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRmLnJlamVjdChhcmdzKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIDxhbnk+ZGYucHJvbWlzZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXy8vXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAY2xhc3MgUHJvbWlzZU1hbmFnZXJcclxuICAgICAqIEBicmllZiDopIfmlbDjga4gRGF0YVByb3ZpZGVyLlByb21pc2Ug44KS566h55CG44GZ44KL44Kv44Op44K5XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBjbGFzcyBQcm9taXNlTWFuYWdlciB7XHJcblxyXG4gICAgICAgIHByaXZhdGUgX3Bvb2w6IHsgcHJvbWlzZTogSVByb21pc2U8YW55PjsgaWQ6IG51bWJlcjsgfVtdID0gW107XHJcbiAgICAgICAgcHJpdmF0ZSBfaWQ6IG51bWJlciA9IDA7XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gcHVibGljIG1ldGhvZFxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBQcm9taXNlIOOCkueuoeeQhuS4i+OBq+i/veWKoFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHByb21pc2UgW2luXSDnrqHnkIblr77osaHjga7jgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAgICAgKiBAcmV0dXJucyDlvJXmlbDjgavmuKHjgZfjgZ/jgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgYWRkPFQ+KHByb21pc2U6IElQcm9taXNlPFQ+IHwgSlF1ZXJ5WEhSKTogSVByb21pc2U8VD4ge1xyXG4gICAgICAgICAgICBpZiAocHJvbWlzZSA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gYWJvcnQoKSDjgpLmjIHjgaPjgabjgYTjgarjgYTloLTlkIjjga/jgqjjg6njg7xcclxuICAgICAgICAgICAgaWYgKCFwcm9taXNlLmFib3J0KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFRBRyArIFwiW2FkZF0gcHJvbWlzZSBvYmplY3QgZG9lc24ndCBoYXZlICdhYm9ydCgpJyBtZXRob2QuXCIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDxhbnk+cHJvbWlzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgY29va2llID0ge1xyXG4gICAgICAgICAgICAgICAgcHJvbWlzZTogPGFueT5wcm9taXNlLFxyXG4gICAgICAgICAgICAgICAgaWQ6IHRoaXMuX2lkKyssXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9wb29sLnB1c2goY29va2llKTtcclxuXHJcbiAgICAgICAgICAgICg8YW55PnByb21pc2UpXHJcbiAgICAgICAgICAgICAgICAuYWx3YXlzKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9wb29sID0gdGhpcy5fcG9vbC5maWx0ZXIoKGVsZW1lbnQ6IHsgcHJvbWlzZTogSVByb21pc2U8YW55PjsgaWQ6IG51bWJlcjsgfSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5pZCAhPT0gY29va2llLmlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gPGFueT5wcm9taXNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog566h55CG5a++6LGh44GuIFByb21pc2Ug44Gr5a++44GX44GmIGFib3J0IOOCkueZuuihjFxyXG4gICAgICAgICAqIOOCreODo+ODs+OCu+ODq+WHpueQhuOBq+WvvuOBmeOCi+OCreODo+ODs+OCu+ODq+OBr+S4jeWPr1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybnMgUHJvbWlzZSDjgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgY2FuY2VsKGluZm8/OiBhbnkpOiBJUHJvbWlzZUJhc2U8YW55PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHByb21pc2VzID0gdGhpcy5wcm9taXNlcygpO1xyXG4gICAgICAgICAgICBwcm9taXNlcy5mb3JFYWNoKChlbGVtZW50OiBJUHJvbWlzZTxhbnk+KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5hYm9ydCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuYWJvcnQoaW5mbyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gd2FpdC5hcHBseShudWxsLCBwcm9taXNlcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDnrqHnkIblr77osaHjga4gUHJvbWlzZSDjgpLphY3liJfjgafov5TjgZlcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm5zIFByb21pc2Ug44Kq44OW44K444Kn44Kv44OI6YWN5YiXXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHByb21pc2VzKCk6IElQcm9taXNlPGFueT5bXSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9wb29sLm1hcCgoZWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQucHJvbWlzZTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXy8vXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAY2xhc3MgUHJvbWlzZUNvbnN0cnVjdG9yXHJcbiAgICAgKiBAYnJpZWYgRVM2IFByb21pc2Ug5LqS5o+b44GuIFByb21pc2Ug44Kq44OW44K444Kn44Kv44OI44Kz44Oz44K544OI44Op44Kv44K/XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBjbGFzcyBQcm9taXNlQ29uc3RydWN0b3I8VD4gaW1wbGVtZW50cyBJUHJvbWlzZTxUPiB7XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gbWl4aW46IG5hdGl2ZSBQcm9taXNlXHJcblxyXG4gICAgICAgIHRoZW46IDxUUmVzdWx0MSA9IFQsIFRSZXN1bHQyID0gbmV2ZXI+KFxyXG4gICAgICAgICAgICBvbmZ1bGZpbGxlZD86IChcclxuICAgICAgICAgICAgICAgICh2YWx1ZTogVCkgPT4gVFJlc3VsdDEgfCBQcm9taXNlTGlrZTxUUmVzdWx0MT5cclxuICAgICAgICAgICAgKSB8IHVuZGVmaW5lZCB8IG51bGwsXHJcbiAgICAgICAgICAgIG9ucmVqZWN0ZWQ/OiAoXHJcbiAgICAgICAgICAgICAgICAocmVhc29uOiBhbnkpID0+IFRSZXN1bHQyIHwgUHJvbWlzZUxpa2U8VFJlc3VsdDI+XHJcbiAgICAgICAgICAgICkgfCB1bmRlZmluZWQgfCBudWxsXHJcbiAgICAgICAgKSA9PiBJUHJvbWlzZTxUUmVzdWx0MSB8IFRSZXN1bHQyPjtcclxuXHJcbiAgICAgICAgY2F0Y2g6IDxUUmVzdWx0ID0gbmV2ZXI+KFxyXG4gICAgICAgICAgICBvbnJlamVjdGVkPzogKChyZWFzb246IGFueSkgPT4gVFJlc3VsdCB8IFByb21pc2VMaWtlPFRSZXN1bHQ+KSB8IHVuZGVmaW5lZCB8IG51bGxcclxuICAgICAgICApID0+IElQcm9taXNlQmFzZTxUUmVzdWx0PjtcclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBtaXhpbjogSlF1ZXJ5UHJvbWlzZVxyXG5cclxuICAgICAgICBzdGF0ZTogKCkgPT4gc3RyaW5nO1xyXG4gICAgICAgIGFsd2F5czogKFxyXG4gICAgICAgICAgICBhbHdheXNDYWxsYmFjazE/OiBKUXVlcnlQcm9taXNlQ2FsbGJhY2s8YW55PiB8IEpRdWVyeVByb21pc2VDYWxsYmFjazxhbnk+W10sXHJcbiAgICAgICAgICAgIC4uLmFsd2F5c0NhbGxiYWNrc046IEFycmF5PEpRdWVyeVByb21pc2VDYWxsYmFjazxhbnk+IHwgSlF1ZXJ5UHJvbWlzZUNhbGxiYWNrPGFueT5bXT5cclxuICAgICAgICApID0+IElQcm9taXNlPFQ+O1xyXG4gICAgICAgIGRvbmU6IChcclxuICAgICAgICAgICAgZG9uZUNhbGxiYWNrMT86IEpRdWVyeVByb21pc2VDYWxsYmFjazxUPiB8IEpRdWVyeVByb21pc2VDYWxsYmFjazxUPltdLFxyXG4gICAgICAgICAgICAuLi5kb25lQ2FsbGJhY2tOOiBBcnJheTxKUXVlcnlQcm9taXNlQ2FsbGJhY2s8VD4gfCBKUXVlcnlQcm9taXNlQ2FsbGJhY2s8VD5bXT5cclxuICAgICAgICApID0+IElQcm9taXNlPFQ+O1xyXG4gICAgICAgIGZhaWw6IChcclxuICAgICAgICAgICAgZmFpbENhbGxiYWNrMT86IEpRdWVyeVByb21pc2VDYWxsYmFjazxhbnk+IHwgSlF1ZXJ5UHJvbWlzZUNhbGxiYWNrPGFueT5bXSxcclxuICAgICAgICAgICAgLi4uZmFpbENhbGxiYWNrc046IEFycmF5PEpRdWVyeVByb21pc2VDYWxsYmFjazxhbnk+IHwgSlF1ZXJ5UHJvbWlzZUNhbGxiYWNrPGFueT5bXT5cclxuICAgICAgICApID0+IElQcm9taXNlPFQ+O1xyXG4gICAgICAgIHByb2dyZXNzOiAoXHJcbiAgICAgICAgICAgIHByb2dyZXNzQ2FsbGJhY2sxPzogSlF1ZXJ5UHJvbWlzZUNhbGxiYWNrPGFueT4gfCBKUXVlcnlQcm9taXNlQ2FsbGJhY2s8YW55PltdLFxyXG4gICAgICAgICAgICAuLi5wcm9ncmVzc0NhbGxiYWNrTjogQXJyYXk8SlF1ZXJ5UHJvbWlzZUNhbGxiYWNrPGFueT4gfCBKUXVlcnlQcm9taXNlQ2FsbGJhY2s8YW55PltdPlxyXG4gICAgICAgICkgPT4gSVByb21pc2U8VD47XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gbWl4aW46IEpRdWVyeURlZmVycmVkXHJcblxyXG4gICAgICAgIC8qIHRzbGludDpkaXNhYmxlOm5vLXVudXNlZC12YXJpYWJsZSAqL1xyXG4gICAgICAgIHByaXZhdGUgbm90aWZ5OiAodmFsdWU/OiBhbnksIC4uLmFyZ3M6IGFueVtdKSA9PiBKUXVlcnlEZWZlcnJlZDxUPjtcclxuICAgICAgICBwcml2YXRlIG5vdGlmeVdpdGg6IChjb250ZXh0OiBhbnksIHZhbHVlPzogYW55W10pID0+IEpRdWVyeURlZmVycmVkPFQ+O1xyXG4gICAgICAgIHByaXZhdGUgcmVqZWN0OiAodmFsdWU/OiBhbnksIC4uLmFyZ3M6IGFueVtdKSA9PiBKUXVlcnlEZWZlcnJlZDxUPjtcclxuICAgICAgICBwcml2YXRlIHJlamVjdFdpdGg6IChjb250ZXh0OiBhbnksIHZhbHVlPzogYW55W10pID0+IEpRdWVyeURlZmVycmVkPFQ+O1xyXG4gICAgICAgIHByaXZhdGUgcmVzb2x2ZTogKHZhbHVlPzogVCwgLi4uYXJnczogYW55W10pID0+IEpRdWVyeURlZmVycmVkPFQ+O1xyXG4gICAgICAgIHByaXZhdGUgcmVzb2x2ZVdpdGg6IChjb250ZXh0OiBhbnksIHZhbHVlPzogVFtdKSA9PiBKUXVlcnlEZWZlcnJlZDxUPjtcclxuICAgICAgICAvKiB0c2xpbnQ6ZW5hYmxlOm5vLXVudXNlZC12YXJpYWJsZSAqL1xyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIG1peGluOiBJUHJvaW1pc2VcclxuXHJcbiAgICAgICAgYWJvcnQ6IChpbmZvPzogYW55KSA9PiB2b2lkO1xyXG4gICAgICAgIGRlcGVuZE9uOiA8VT4ocHJvbWlzZTogSVByb21pc2U8VT4gfCBKUXVlcnlYSFIpID0+IElQcm9taXNlPFU+O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBjb25zdHJ1Y3RvclxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGV4ZWN1dG9yIFtpbl0gRVM2IFByb21pc2Ug5LqS5o+b5byV5pWwLiAoZGVwZW5kT24g44KS56ysM+W8leaVsOOBq+a4oeOBmSlcclxuICAgICAgICAgKiBAcGFyYW0gb3B0aW9ucz8gW2luXSBqUXVlcnlQcm9taXNlIOOCkuaLoeW8teOBmeOCi+OCquODluOCuOOCp+OCr+ODiCBvciDjgq3jg6Pjg7Pjgrvjg6vmmYLjgavlkbzjgbPlh7rjgZXjgozjgovplqLmlbDjgpLmjIflrppcclxuICAgICAgICAgKiBAcmV0dXJuIElQcm9taXNlIOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgICAgICBleGVjdXRvcjogKFxyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZTogKHZhbHVlPzogVCB8IFByb21pc2VMaWtlPFQ+LCAuLi5hZGRpdGlvbmFsOiBhbnlbXSkgPT4gdm9pZCxcclxuICAgICAgICAgICAgICAgIHJlamVjdD86IChyZWFzb24/OiBhbnksIC4uLmFkZGl0aW9uYWw6IGFueVtdKSA9PiB2b2lkLFxyXG4gICAgICAgICAgICAgICAgZGVwZW5kT24/OiA8VT4ocHJvbWlzZTogSVByb21pc2U8VT4gfCBKUXVlcnlYSFIpID0+IElQcm9taXNlPFU+LFxyXG4gICAgICAgICAgICApID0+IHZvaWQsXHJcbiAgICAgICAgICAgIG9wdGlvbnM/OiBNYWtlUHJvbWlzZU9wdGlvbnMgfCBjYW5jZWxDYWxsYmFja1xyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICAvLyBhcHBseSBtaXhpblxyXG4gICAgICAgICAgICBjb25zdCBjYW5jZWxhYmxlID0gbWFrZUNhbmNlbGFibGUoJC5EZWZlcnJlZCgpLCBvcHRpb25zKTtcclxuICAgICAgICAgICAgJC5leHRlbmQodHJ1ZSwgdGhpcywgY2FuY2VsYWJsZS5kZiwgY2FuY2VsYWJsZS50YXJnZXQpO1xyXG4gICAgICAgICAgICB0aGlzLmFib3J0ID0gY2FuY2VsYWJsZS5hYm9ydC5iaW5kKHRoaXMpO1xyXG4gICAgICAgICAgICB0aGlzLmRlcGVuZE9uID0gY2FuY2VsYWJsZS5kZXBlbmRPbi5iaW5kKHRoaXMpO1xyXG5cclxuICAgICAgICAgICAgZXhlY3V0b3IodGhpcy5yZXNvbHZlLCB0aGlzLnJlamVjdCwgdGhpcy5kZXBlbmRPbik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIHN0YXRpYyBtZXRob2RzOlxyXG5cclxuICAgICAgICBzdGF0aWMgcmVzb2x2ZTxVPih2YWx1ZT86IFUgfCBQcm9taXNlTGlrZTxVPik6IElQcm9taXNlPFU+IHtcclxuICAgICAgICAgICAgcmV0dXJuIDxhbnk+JC5EZWZlcnJlZCgpLnJlc29sdmUodmFsdWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIHJlamVjdDxVPihyZWFzb24/OiBhbnkpOiBJUHJvbWlzZTxVPiB7XHJcbiAgICAgICAgICAgIHJldHVybiA8YW55PiQuRGVmZXJyZWQoKS5yZWplY3QocmVhc29uKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyBhbGw8VT4oLi4uZGVmZXJyZWRzOiBBcnJheTxVIHwgSVByb21pc2U8VT4gfCBKUXVlcnlQcm9taXNlPFU+Pik6IElQcm9taXNlQmFzZTxVPiB7XHJcbiAgICAgICAgICAgIHJldHVybiA8YW55PiQud2hlbihkZWZlcnJlZHMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3RhdGljIHdhaXQ8VT4oLi4uZGVmZXJyZWRzOiBBcnJheTxVIHwgSVByb21pc2U8VT4gfCBKUXVlcnlQcm9taXNlPFU+Pik6IElQcm9taXNlQmFzZTxVPiB7XHJcbiAgICAgICAgICAgIHJldHVybiA8YW55PndhaXQoZGVmZXJyZWRzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0YXRpYyByYWNlPFU+KC4uLmRlZmVycmVkczogQXJyYXk8VSB8IElQcm9taXNlPFU+IHwgSlF1ZXJ5UHJvbWlzZTxVPj4pOiBJUHJvbWlzZUJhc2U8VT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gPGFueT5yYWNlKGRlZmVycmVkcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBjb25zdCBQcm9taXNlID0gUHJvbWlzZUNvbnN0cnVjdG9yO1xyXG59XHJcblxyXG5cclxuZGVjbGFyZSBtb2R1bGUgXCJjZHAucHJvbWlzZVwiIHtcclxuICAgIGV4cG9ydCA9IENEUDtcclxufVxyXG4iLCIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KHJlcXVpcmUoXCJjZHAuaTE4blwiKSwgcmVxdWlyZShcImJhY2tib25lXCIpLCByZXF1aXJlKFwianF1ZXJ5XCIpKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFtcImNkcC5pMThuXCIsIFwiYmFja2JvbmVcIiwgXCJqcXVlcnlcIl0sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wiRnJhbWV3b3JrXCJdID0gZmFjdG9yeShyZXF1aXJlKFwiY2RwLmkxOG5cIiksIHJlcXVpcmUoXCJiYWNrYm9uZVwiKSwgcmVxdWlyZShcImpxdWVyeVwiKSk7XG5cdGVsc2Vcblx0XHRyb290W1wiQ0RQXCJdID0gcm9vdFtcIkNEUFwiXSB8fCB7fSwgcm9vdFtcIkNEUFwiXVtcIkZyYW1ld29ya1wiXSA9IGZhY3Rvcnkocm9vdFtcIkNEUFwiXSwgcm9vdFtcIkJhY2tib25lXCJdLCByb290W1wialF1ZXJ5XCJdKTtcbn0pKHRoaXMsIGZ1bmN0aW9uKF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfMl9fLCBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzNfXywgX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV81X18pIHtcbnJldHVybiBcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7XG4gXHRcdFx0XHRjb25maWd1cmFibGU6IGZhbHNlLFxuIFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcbiBcdFx0XHRcdGdldDogZ2V0dGVyXG4gXHRcdFx0fSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjay9ib290c3RyYXAgOGE5YTliODkyMjIxYTI0MGExMDAiLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vQHR5cGVzL2kxOG5leHQuZC50c1wiIC8+XHJcbi8qIHRzbGludDpkaXNhYmxlOm1heC1saW5lLWxlbmd0aCAqL1xyXG5uYW1lc3BhY2UgQ0RQIHtcclxuXHJcbiAgICBpbXBvcnQgUHJvbWlzZSA9IENEUC5Qcm9taXNlO1xyXG4gICAgaW1wb3J0IEkxOG5leHQgPSBpMThuZXh0LmkxOG47XHJcblxyXG4gICAgZXhwb3J0IG5hbWVzcGFjZSBJMThOIHtcclxuICAgICAgICBleHBvcnQgdHlwZSBJMThuID0gSTE4bmV4dC5pMThuO1xyXG4gICAgICAgIGV4cG9ydCB0eXBlIE9wdGlvbnMgPSBJMThuZXh0LkluaXRPcHRpb25zICYgeyBba2V5czogc3RyaW5nXTogYW55IH07XHJcbiAgICAgICAgZXhwb3J0IHR5cGUgVHJhbnNsYXRpb25PcHRpb25zID0gSTE4bmV4dC5UcmFuc2xhdGlvbk9wdGlvbnM7XHJcbiAgICAgICAgZXhwb3J0IHR5cGUgVHJhbnNsYXRpb25GdW5jdGlvbiA9IEkxOG5leHQuVHJhbnNsYXRpb25GdW5jdGlvbjtcclxuICAgICAgICBleHBvcnQgdHlwZSBJbnRlcnBvbGF0aW9uT3B0aW9ucyA9IEkxOG5leHQuSW50ZXJwb2xhdGlvbk9wdGlvbnM7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgVEFHID0gXCJbQ0RQLmkxOG5dIFwiO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogaTE4bmV4dCDjgbjjga7jg4DjgqTjg6zjgq/jg4jjgqLjgq/jgrvjgrlcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGxldCBpMThuOiBJMThOLkkxOG47XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAaW50ZXJmYWNlIEkxOE5TZXR0aW5nc1xyXG4gICAgICogQGJyaWVmIOODreODvOOCq+ODqeOCpOOCuuioreWumueUqOOCquODl+OCt+ODp+ODs1xyXG4gICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIEkxOE5TZXR0aW5ncyB7XHJcbiAgICAgICAgZmFsbGJhY2tSZXNvdXJjZXM/OiB7IFtsbmc6IHN0cmluZ106IHsgW25zOiBzdHJpbmddOiBzdHJpbmcgfSB9O1xyXG4gICAgICAgIHByZWxvYWQ/OiBzdHJpbmdbXTtcclxuICAgICAgICBvcHRpb25zPzogSTE4Ti5PcHRpb25zO1xyXG4gICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAqIGluaXRpYWxpemUgaTE4bmV4dC5cclxuICAgICAqXHJcbiAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICogaTE4bmV4dCDjga7liJ3mnJ/ljJZcclxuICAgICAqXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICogQHJldHVybnMgSVByb21pc2VCYXNlIOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICovXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gaW5pdGlhbGl6ZUkxOE4oc2V0dGluZ3M/OiBJMThOU2V0dGluZ3MpOiBJUHJvbWlzZUJhc2U8YW55PiB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGkxOG5TZXR0aW5nczogSTE4TlNldHRpbmdzID0gc2V0dGluZ3MgfHwge307XHJcblxyXG4gICAgICAgICAgICBjb25zdCBpMThuT3B0aW9uczogSTE4Ti5PcHRpb25zID0gKChyZXNvdXJjZXM6IHsgW2xuZzogc3RyaW5nXTogeyBbbnM6IHN0cmluZ106IHN0cmluZyB9IH0pID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXNvdXJjZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGxuZyBpbiByZXNvdXJjZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc291cmNlcy5oYXNPd25Qcm9wZXJ0eShsbmcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG5zIGluIHJlc291cmNlc1tsbmddKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc291cmNlc1tsbmddLmhhc093blByb3BlcnR5KG5zKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvdXJjZXNbbG5nXVtuc10gPSBnZXRMb2NhbGVGYWxsYmFja1Jlc291cmNlKHJlc291cmNlc1tsbmddW25zXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGkxOG5TZXR0aW5ncy5vcHRpb25zLnJlc291cmNlcyA9IDxhbnk+cmVzb3VyY2VzO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpMThuU2V0dGluZ3Mub3B0aW9ucztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGkxOG5TZXR0aW5ncy5vcHRpb25zO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KShpMThuU2V0dGluZ3MuZmFsbGJhY2tSZXNvdXJjZXMpO1xyXG5cclxuICAgICAgICAgICAgcmVxdWlyZShbXCJqcXVlcnlJMThuZXh0XCJdLCAoJDE4TmV4dDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXF1aXJlKFtcclxuICAgICAgICAgICAgICAgICAgICBcImkxOG5leHRcIixcclxuICAgICAgICAgICAgICAgICAgICBcImkxOG5leHRYSFJCYWNrZW5kXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJpMThuZXh0TG9jYWxTdG9yYWdlQ2FjaGVcIixcclxuICAgICAgICAgICAgICAgICAgICBcImkxOG5leHRTcHJpbnRmUG9zdFByb2Nlc3NvclwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiaTE4bmV4dEJyb3dzZXJMYW5ndWFnZURldGVjdG9yXCIsXHJcbiAgICAgICAgICAgICAgICBdLCAoaTE4bmV4dDogSTE4Ti5JMThuXHJcbiAgICAgICAgICAgICAgICAgICAgLCBCYWNrZW5kOiBhbnlcclxuICAgICAgICAgICAgICAgICAgICAsIENhY2hlOiBhbnlcclxuICAgICAgICAgICAgICAgICAgICAsIFBvc3RQcm9jZXNzb3I6IGFueVxyXG4gICAgICAgICAgICAgICAgICAgICwgTGFuZ3VhZ2VEZXRlY3RvcjogYW55XHJcbiAgICAgICAgICAgICAgICApID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaTE4bmV4dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnVzZShCYWNrZW5kKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnVzZShDYWNoZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC51c2UoUG9zdFByb2Nlc3NvcilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC51c2UoTGFuZ3VhZ2VEZXRlY3RvcilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbml0KGkxOG5PcHRpb25zLCAoZXJyb3I6IGFueSwgdDogSTE4Ti5UcmFuc2xhdGlvbkZ1bmN0aW9uKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJDE4TmV4dC5pbml0KGkxOG5leHQsICQsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdE5hbWU6IFwidFwiLCAgICAgICAgICAgICAgICAgICAgICAgICAvLyAtLT4gYXBwZW5kcyAkLnQgPSBpMThuZXh0LnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaTE4bk5hbWU6IFwiaTE4blwiLCAgICAgICAgICAgICAgICAgICAvLyAtLT4gYXBwZW5kcyAkLmkxOG4gPSBpMThuZXh0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZU5hbWU6IFwibG9jYWxpemVcIiwgICAgICAgICAgICAgLy8gLS0+IGFwcGVuZHMgJChzZWxlY3RvcikubG9jYWxpemUob3B0cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdG9yQXR0cjogXCJkYXRhLWkxOG5cIiwgICAgICAgICAgLy8gc2VsZWN0b3IgZm9yIHRyYW5zbGF0aW5nIGVsZW1lbnRzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldEF0dHI6IFwiaTE4bi10YXJnZXRcIiwgICAgICAgICAgLy8gZGF0YS0oKSBhdHRyaWJ1dGUgdG8gZ3JhYiB0YXJnZXQgZWxlbWVudCB0byB0cmFuc2xhdGUgKGlmIGRpZmZyZW50IHRoZW4gaXRzZWxmKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zQXR0cjogXCJpMThuLW9wdGlvbnNcIiwgICAgICAgIC8vIGRhdGEtKCkgYXR0cmlidXRlIHRoYXQgY29udGFpbnMgb3B0aW9ucywgd2lsbCBsb2FkL3NldCBpZiB1c2VPcHRpb25zQXR0ciA9IHRydWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlT3B0aW9uc0F0dHI6IGZhbHNlLCAgICAgICAgICAgICAgLy8gbm8gdXNlIG9wdGlvbnNBdHRyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlRGVmYXVsdFZhbHVlRnJvbUNvbnRlbnQ6IHRydWUgIC8vIHBhcnNlcyBkZWZhdWx0IHZhbHVlcyBmcm9tIGNvbnRlbnQgZWxlLnZhbCBvciBlbGUudGV4dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGkxOG5leHQgMy40LjE6IHJlc291cmNlcyDjgYzmjIflrprjgZXjgozjgovjgaggcHJlbG9hZCDjgYzoqq3jgb/ovrzjgb7jgozjgarjgYTjgZ/jgoHjgIHlho3oqq3jgb/ovrzjgb/lh6bnkIbjgpLooYzjgYYuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkxOG5leHQub3B0aW9ucy5yZXNvdXJjZXMgJiYgaTE4bmV4dC5vcHRpb25zLnByZWxvYWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gb3B0aW9ucyDjgYvjgonjg5fjg63jg5Hjg4bjgqPjgpLkuIDml6bliYrpmaQuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IF9wcmVsb2FkICAgPSBpMThuZXh0Lm9wdGlvbnMucHJlbG9hZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgX3Jlc291cmNlcyA9IGkxOG5leHQub3B0aW9ucy5yZXNvdXJjZXM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBpMThuZXh0Lm9wdGlvbnMucmVzb3VyY2VzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgaTE4bmV4dC5vcHRpb25zLnByZWxvYWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkxOG5leHQubG9hZExhbmd1YWdlcyhfcHJlbG9hZCwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gb3B0aW9ucyDjgpLlhYPjgavmiLvjgZlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkxOG5leHQub3B0aW9ucy5yZXNvdXJjZXMgPSBfcmVzb3VyY2VzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaTE4bmV4dC5vcHRpb25zLnByZWxvYWQgPSBfcHJlbG9hZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIENEUC5pMThuID0gaTE4bmV4dDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ0RQLmkxOG4gPSBpMThuZXh0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICogZ2V0IHN0cmluZyByZXNvdXJjZSBmb3IgZmFsbGJhY2suXHJcbiAgICAgKlxyXG4gICAgICogXFx+amFwYW5lc2VcclxuICAgICAqIEZhbGxiYWNrIOeUqOODreODvOOCq+ODqeOCpOOCuuODquOCveODvOOCueOBruWPluW+l1xyXG4gICAgICpcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKiBAcmV0dXJucyBmYWxiYWtjIOODquOCveODvOOCueOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBnZXRMb2NhbGVGYWxsYmFja1Jlc291cmNlKHBhdGg6IHN0cmluZyk6IGFueSB7XHJcbiAgICAgICAgbGV0IGpzb246IEpTT047XHJcbiAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgdXJsOiB0b1VybChwYXRoKSxcclxuICAgICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxyXG4gICAgICAgICAgICBhc3luYzogZmFsc2UsXHJcbiAgICAgICAgICAgIGRhdGFUeXBlOiBcImpzb25cIixcclxuICAgICAgICAgICAgc3VjY2VzczogKGRhdGE6IEpTT04pID0+IHtcclxuICAgICAgICAgICAgICAgIGpzb24gPSBkYXRhO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBlcnJvcjogKHhocjogSlF1ZXJ5WEhSLCBzdGF0dXM6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihUQUcgKyBcImFqYXggcmVxdWVzdCBmYWlsZWQuIHN0YXR1czogXCIgKyBzdGF0dXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGpzb247XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgKiBDb252ZXJ0IHBhdGggdG8gVVJMLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBwYXRoIFtpbl0gcGF0aCBzdHJpbmdcclxuICAgICAqXHJcbiAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICogcGF0aCDjgpIgVVJMIOOBq+WkieaPm1xyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBwYXRoIFtpbl0g44OR44K544KS5oyH5a6a44CCXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIHRvVXJsKHBhdGg6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgaWYgKCFwYXRoICYmIFwiL1wiICE9PSBwYXRoWzBdKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoVEFHICsgXCJpbnZhbGlkIHBhdGguIHBhdGg6IFwiICsgcGF0aCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIENEUC53ZWJSb290ICsgcGF0aC5zbGljZSgxKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbi8vIGpxdWVyeS1pMThuZXh0IGV4dGVuc2lvbnNcclxuXHJcbmludGVyZmFjZSBKUXVlcnlTdGF0aWMge1xyXG4gICAgaTE4bjogQ0RQLkkxOE4uSTE4bjtcclxuICAgIHQ6IChrZXk6IHN0cmluZywgb3B0aW9ucz86IENEUC5JMThOLk9wdGlvbnMpID0+IHN0cmluZztcclxufVxyXG5cclxuaW50ZXJmYWNlIEpRdWVyeSB7XHJcbiAgICBsb2NhbGl6ZTogKG9wdGlvbnM/OiBDRFAuSTE4Ti5UcmFuc2xhdGlvbk9wdGlvbnMpID0+IEpRdWVyeTtcclxufVxyXG5cclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuLy8gY2RwLmkxOG4gZGVjbGFyYXRpb25cclxuXHJcbmRlY2xhcmUgbW9kdWxlIFwiY2RwLmkxOG5cIiB7XHJcbiAgICBleHBvcnQgPSBDRFA7XHJcbn1cclxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGNkcDovLy9DRFAvaTE4bi50cyIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV81X187XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwge1wicm9vdFwiOlwialF1ZXJ5XCIsXCJjb21tb25qc1wiOlwianF1ZXJ5XCIsXCJjb21tb25qczJcIjpcImpxdWVyeVwiLFwiYW1kXCI6XCJqcXVlcnlcIn1cbi8vIG1vZHVsZSBpZCA9IDVcbi8vIG1vZHVsZSBjaHVua3MgPSAiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfMl9fO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIHtcInJvb3RcIjpcIkNEUFwiLFwiY29tbW9uanNcIjpcImNkcC5jb3JlXCIsXCJjb21tb25qczJcIjpcImNkcC5jb3JlXCIsXCJhbWRcIjpcImNkcC5jb3JlXCJ9XG4vLyBtb2R1bGUgaWQgPSAyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV8zX187XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwge1wicm9vdFwiOlwiQ0RQXCIsXCJjb21tb25qc1wiOlwiY2RwLnByb21pc2VcIixcImNvbW1vbmpzMlwiOlwiY2RwLnByb21pc2VcIixcImFtZFwiOlwiY2RwLnByb21pc2VcIn1cbi8vIG1vZHVsZSBpZCA9IDNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiKGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcbiAgdHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnID8gbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCkgOlxuICB0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoZmFjdG9yeSkgOlxuICAoZ2xvYmFsLmpxdWVyeUkxOG5leHQgPSBmYWN0b3J5KCkpO1xufSh0aGlzLCAoZnVuY3Rpb24gKCkgeyAndXNlIHN0cmljdCc7XG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07XG5cbnZhciBkZWZhdWx0cyA9IHtcbiAgdE5hbWU6ICd0JyxcbiAgaTE4bk5hbWU6ICdpMThuJyxcbiAgaGFuZGxlTmFtZTogJ2xvY2FsaXplJyxcbiAgc2VsZWN0b3JBdHRyOiAnZGF0YS1pMThuJyxcbiAgdGFyZ2V0QXR0cjogJ2kxOG4tdGFyZ2V0JyxcbiAgb3B0aW9uc0F0dHI6ICdpMThuLW9wdGlvbnMnLFxuICB1c2VPcHRpb25zQXR0cjogZmFsc2UsXG4gIHBhcnNlRGVmYXVsdFZhbHVlRnJvbUNvbnRlbnQ6IHRydWVcbn07XG5cbmZ1bmN0aW9uIGluaXQoaTE4bmV4dCwgJCkge1xuICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDoge307XG5cblxuICBvcHRpb25zID0gX2V4dGVuZHMoe30sIGRlZmF1bHRzLCBvcHRpb25zKTtcblxuICBmdW5jdGlvbiBwYXJzZShlbGUsIGtleSwgb3B0cykge1xuICAgIGlmIChrZXkubGVuZ3RoID09PSAwKSByZXR1cm47XG5cbiAgICB2YXIgYXR0ciA9ICd0ZXh0JztcblxuICAgIGlmIChrZXkuaW5kZXhPZignWycpID09PSAwKSB7XG4gICAgICB2YXIgcGFydHMgPSBrZXkuc3BsaXQoJ10nKTtcbiAgICAgIGtleSA9IHBhcnRzWzFdO1xuICAgICAgYXR0ciA9IHBhcnRzWzBdLnN1YnN0cigxLCBwYXJ0c1swXS5sZW5ndGggLSAxKTtcbiAgICB9XG5cbiAgICBpZiAoa2V5LmluZGV4T2YoJzsnKSA9PT0ga2V5Lmxlbmd0aCAtIDEpIHtcbiAgICAgIGtleSA9IGtleS5zdWJzdHIoMCwga2V5Lmxlbmd0aCAtIDIpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGV4dGVuZERlZmF1bHQobywgdmFsKSB7XG4gICAgICBpZiAoIW9wdGlvbnMucGFyc2VEZWZhdWx0VmFsdWVGcm9tQ29udGVudCkgcmV0dXJuIG87XG4gICAgICByZXR1cm4gX2V4dGVuZHMoe30sIG8sIHsgZGVmYXVsdFZhbHVlOiB2YWwgfSk7XG4gICAgfVxuXG4gICAgaWYgKGF0dHIgPT09ICdodG1sJykge1xuICAgICAgZWxlLmh0bWwoaTE4bmV4dC50KGtleSwgZXh0ZW5kRGVmYXVsdChvcHRzLCBlbGUuaHRtbCgpKSkpO1xuICAgIH0gZWxzZSBpZiAoYXR0ciA9PT0gJ3RleHQnKSB7XG4gICAgICBlbGUudGV4dChpMThuZXh0LnQoa2V5LCBleHRlbmREZWZhdWx0KG9wdHMsIGVsZS50ZXh0KCkpKSk7XG4gICAgfSBlbHNlIGlmIChhdHRyID09PSAncHJlcGVuZCcpIHtcbiAgICAgIGVsZS5wcmVwZW5kKGkxOG5leHQudChrZXksIGV4dGVuZERlZmF1bHQob3B0cywgZWxlLmh0bWwoKSkpKTtcbiAgICB9IGVsc2UgaWYgKGF0dHIgPT09ICdhcHBlbmQnKSB7XG4gICAgICBlbGUuYXBwZW5kKGkxOG5leHQudChrZXksIGV4dGVuZERlZmF1bHQob3B0cywgZWxlLmh0bWwoKSkpKTtcbiAgICB9IGVsc2UgaWYgKGF0dHIuaW5kZXhPZignZGF0YS0nKSA9PT0gMCkge1xuICAgICAgdmFyIGRhdGFBdHRyID0gYXR0ci5zdWJzdHIoJ2RhdGEtJy5sZW5ndGgpO1xuICAgICAgdmFyIHRyYW5zbGF0ZWQgPSBpMThuZXh0LnQoa2V5LCBleHRlbmREZWZhdWx0KG9wdHMsIGVsZS5kYXRhKGRhdGFBdHRyKSkpO1xuXG4gICAgICAvLyB3ZSBjaGFuZ2UgaW50byB0aGUgZGF0YSBjYWNoZVxuICAgICAgZWxlLmRhdGEoZGF0YUF0dHIsIHRyYW5zbGF0ZWQpO1xuICAgICAgLy8gd2UgY2hhbmdlIGludG8gdGhlIGRvbVxuICAgICAgZWxlLmF0dHIoYXR0ciwgdHJhbnNsYXRlZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVsZS5hdHRyKGF0dHIsIGkxOG5leHQudChrZXksIGV4dGVuZERlZmF1bHQob3B0cywgZWxlLmF0dHIoYXR0cikpKSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gbG9jYWxpemUoZWxlLCBvcHRzKSB7XG4gICAgdmFyIGtleSA9IGVsZS5hdHRyKG9wdGlvbnMuc2VsZWN0b3JBdHRyKTtcbiAgICBpZiAoIWtleSAmJiB0eXBlb2Yga2V5ICE9PSAndW5kZWZpbmVkJyAmJiBrZXkgIT09IGZhbHNlKSBrZXkgPSBlbGUudGV4dCgpIHx8IGVsZS52YWwoKTtcbiAgICBpZiAoIWtleSkgcmV0dXJuO1xuXG4gICAgdmFyIHRhcmdldCA9IGVsZSxcbiAgICAgICAgdGFyZ2V0U2VsZWN0b3IgPSBlbGUuZGF0YShvcHRpb25zLnRhcmdldEF0dHIpO1xuXG4gICAgaWYgKHRhcmdldFNlbGVjdG9yKSB0YXJnZXQgPSBlbGUuZmluZCh0YXJnZXRTZWxlY3RvcikgfHwgZWxlO1xuXG4gICAgaWYgKCFvcHRzICYmIG9wdGlvbnMudXNlT3B0aW9uc0F0dHIgPT09IHRydWUpIG9wdHMgPSBlbGUuZGF0YShvcHRpb25zLm9wdGlvbnNBdHRyKTtcblxuICAgIG9wdHMgPSBvcHRzIHx8IHt9O1xuXG4gICAgaWYgKGtleS5pbmRleE9mKCc7JykgPj0gMCkge1xuICAgICAgdmFyIGtleXMgPSBrZXkuc3BsaXQoJzsnKTtcblxuICAgICAgJC5lYWNoKGtleXMsIGZ1bmN0aW9uIChtLCBrKSB7XG4gICAgICAgIGlmIChrICE9PSAnJykgcGFyc2UodGFyZ2V0LCBrLCBvcHRzKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBwYXJzZSh0YXJnZXQsIGtleSwgb3B0cyk7XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMudXNlT3B0aW9uc0F0dHIgPT09IHRydWUpIHtcbiAgICAgIHZhciBjbG9uZSA9IHt9O1xuICAgICAgY2xvbmUgPSBfZXh0ZW5kcyh7IGNsb25lOiBjbG9uZSB9LCBvcHRzKTtcblxuICAgICAgZGVsZXRlIGNsb25lLmxuZztcbiAgICAgIGVsZS5kYXRhKG9wdGlvbnMub3B0aW9uc0F0dHIsIGNsb25lKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBoYW5kbGUob3B0cykge1xuICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgLy8gbG9jYWxpemUgZWxlbWVudCBpdHNlbGZcbiAgICAgIGxvY2FsaXplKCQodGhpcyksIG9wdHMpO1xuXG4gICAgICAvLyBsb2NhbGl6ZSBjaGlsZHJlblxuICAgICAgdmFyIGVsZW1lbnRzID0gJCh0aGlzKS5maW5kKCdbJyArIG9wdGlvbnMuc2VsZWN0b3JBdHRyICsgJ10nKTtcbiAgICAgIGVsZW1lbnRzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICBsb2NhbGl6ZSgkKHRoaXMpLCBvcHRzKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xuXG4gIC8vICQudCAkLmkxOG4gc2hvcnRjdXRcbiAgJFtvcHRpb25zLnROYW1lXSA9IGkxOG5leHQudC5iaW5kKGkxOG5leHQpO1xuICAkW29wdGlvbnMuaTE4bk5hbWVdID0gaTE4bmV4dDtcblxuICAvLyBzZWxlY3RvciBmdW5jdGlvbiAkKG15U2VsZWN0b3IpLmxvY2FsaXplKG9wdHMpO1xuICAkLmZuW29wdGlvbnMuaGFuZGxlTmFtZV0gPSBoYW5kbGU7XG59XG5cbnZhciBpbmRleCA9IHtcbiAgaW5pdDogaW5pdFxufTtcblxucmV0dXJuIGluZGV4O1xuXG59KSkpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vZXh0ZXJuYWwvaTE4bmV4dC9zY3JpcHRzL2pxdWVyeS1pMThuZXh0LmpzXG4vLyBtb2R1bGUgaWQgPSA0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG5cdHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpIDpcblx0dHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKGZhY3RvcnkpIDpcblx0KGdsb2JhbC5pMThuZXh0ID0gZmFjdG9yeSgpKTtcbn0odGhpcywgKGZ1bmN0aW9uICgpIHsgJ3VzZSBzdHJpY3QnO1xuXG52YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikge1xuICByZXR1cm4gdHlwZW9mIG9iajtcbn0gOiBmdW5jdGlvbiAob2JqKSB7XG4gIHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqO1xufTtcblxuXG5cblxuXG5cblxuXG5cblxuXG52YXIgY2xhc3NDYWxsQ2hlY2sgPSBmdW5jdGlvbiAoaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7XG4gIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTtcbiAgfVxufTtcblxuXG5cblxuXG5cblxuXG5cbnZhciBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkge1xuICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07XG5cbiAgICBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7XG4gICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkge1xuICAgICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0YXJnZXQ7XG59O1xuXG5cblxudmFyIGluaGVyaXRzID0gZnVuY3Rpb24gKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7XG4gIGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTtcbiAgfVxuXG4gIHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwge1xuICAgIGNvbnN0cnVjdG9yOiB7XG4gICAgICB2YWx1ZTogc3ViQ2xhc3MsXG4gICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfVxuICB9KTtcbiAgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzO1xufTtcblxuXG5cblxuXG5cblxuXG5cblxuXG52YXIgcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiA9IGZ1bmN0aW9uIChzZWxmLCBjYWxsKSB7XG4gIGlmICghc2VsZikge1xuICAgIHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTtcbiAgfVxuXG4gIHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmO1xufTtcblxuXG5cblxuXG52YXIgc2xpY2VkVG9BcnJheSA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gc2xpY2VJdGVyYXRvcihhcnIsIGkpIHtcbiAgICB2YXIgX2FyciA9IFtdO1xuICAgIHZhciBfbiA9IHRydWU7XG4gICAgdmFyIF9kID0gZmFsc2U7XG4gICAgdmFyIF9lID0gdW5kZWZpbmVkO1xuXG4gICAgdHJ5IHtcbiAgICAgIGZvciAodmFyIF9pID0gYXJyW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3M7ICEoX24gPSAoX3MgPSBfaS5uZXh0KCkpLmRvbmUpOyBfbiA9IHRydWUpIHtcbiAgICAgICAgX2Fyci5wdXNoKF9zLnZhbHVlKTtcblxuICAgICAgICBpZiAoaSAmJiBfYXJyLmxlbmd0aCA9PT0gaSkgYnJlYWs7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBfZCA9IHRydWU7XG4gICAgICBfZSA9IGVycjtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKCFfbiAmJiBfaVtcInJldHVyblwiXSkgX2lbXCJyZXR1cm5cIl0oKTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIGlmIChfZCkgdGhyb3cgX2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIF9hcnI7XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24gKGFyciwgaSkge1xuICAgIGlmIChBcnJheS5pc0FycmF5KGFycikpIHtcbiAgICAgIHJldHVybiBhcnI7XG4gICAgfSBlbHNlIGlmIChTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGFycikpIHtcbiAgICAgIHJldHVybiBzbGljZUl0ZXJhdG9yKGFyciwgaSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJJbnZhbGlkIGF0dGVtcHQgdG8gZGVzdHJ1Y3R1cmUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlXCIpO1xuICAgIH1cbiAgfTtcbn0oKTtcblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxudmFyIHRvQ29uc3VtYWJsZUFycmF5ID0gZnVuY3Rpb24gKGFycikge1xuICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBBcnJheShhcnIubGVuZ3RoKTsgaSA8IGFyci5sZW5ndGg7IGkrKykgYXJyMltpXSA9IGFycltpXTtcblxuICAgIHJldHVybiBhcnIyO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBBcnJheS5mcm9tKGFycik7XG4gIH1cbn07XG5cbnZhciBjb25zb2xlTG9nZ2VyID0ge1xuICB0eXBlOiAnbG9nZ2VyJyxcblxuICBsb2c6IGZ1bmN0aW9uIGxvZyhhcmdzKSB7XG4gICAgdGhpcy5vdXRwdXQoJ2xvZycsIGFyZ3MpO1xuICB9LFxuICB3YXJuOiBmdW5jdGlvbiB3YXJuKGFyZ3MpIHtcbiAgICB0aGlzLm91dHB1dCgnd2FybicsIGFyZ3MpO1xuICB9LFxuICBlcnJvcjogZnVuY3Rpb24gZXJyb3IoYXJncykge1xuICAgIHRoaXMub3V0cHV0KCdlcnJvcicsIGFyZ3MpO1xuICB9LFxuICBvdXRwdXQ6IGZ1bmN0aW9uIG91dHB1dCh0eXBlLCBhcmdzKSB7XG4gICAgdmFyIF9jb25zb2xlO1xuXG4gICAgLyogZXNsaW50IG5vLWNvbnNvbGU6IDAgKi9cbiAgICBpZiAoY29uc29sZSAmJiBjb25zb2xlW3R5cGVdKSAoX2NvbnNvbGUgPSBjb25zb2xlKVt0eXBlXS5hcHBseShfY29uc29sZSwgdG9Db25zdW1hYmxlQXJyYXkoYXJncykpO1xuICB9XG59O1xuXG52YXIgTG9nZ2VyID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBMb2dnZXIoY29uY3JldGVMb2dnZXIpIHtcbiAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307XG4gICAgY2xhc3NDYWxsQ2hlY2sodGhpcywgTG9nZ2VyKTtcblxuICAgIHRoaXMuaW5pdChjb25jcmV0ZUxvZ2dlciwgb3B0aW9ucyk7XG4gIH1cblxuICBMb2dnZXIucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiBpbml0KGNvbmNyZXRlTG9nZ2VyKSB7XG4gICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9O1xuXG4gICAgdGhpcy5wcmVmaXggPSBvcHRpb25zLnByZWZpeCB8fCAnaTE4bmV4dDonO1xuICAgIHRoaXMubG9nZ2VyID0gY29uY3JldGVMb2dnZXIgfHwgY29uc29sZUxvZ2dlcjtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIHRoaXMuZGVidWcgPSBvcHRpb25zLmRlYnVnO1xuICB9O1xuXG4gIExvZ2dlci5wcm90b3R5cGUuc2V0RGVidWcgPSBmdW5jdGlvbiBzZXREZWJ1Zyhib29sKSB7XG4gICAgdGhpcy5kZWJ1ZyA9IGJvb2w7XG4gIH07XG5cbiAgTG9nZ2VyLnByb3RvdHlwZS5sb2cgPSBmdW5jdGlvbiBsb2coKSB7XG4gICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuZm9yd2FyZChhcmdzLCAnbG9nJywgJycsIHRydWUpO1xuICB9O1xuXG4gIExvZ2dlci5wcm90b3R5cGUud2FybiA9IGZ1bmN0aW9uIHdhcm4oKSB7XG4gICAgZm9yICh2YXIgX2xlbjIgPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbjIpLCBfa2V5MiA9IDA7IF9rZXkyIDwgX2xlbjI7IF9rZXkyKyspIHtcbiAgICAgIGFyZ3NbX2tleTJdID0gYXJndW1lbnRzW19rZXkyXTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5mb3J3YXJkKGFyZ3MsICd3YXJuJywgJycsIHRydWUpO1xuICB9O1xuXG4gIExvZ2dlci5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiBlcnJvcigpIHtcbiAgICBmb3IgKHZhciBfbGVuMyA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuMyksIF9rZXkzID0gMDsgX2tleTMgPCBfbGVuMzsgX2tleTMrKykge1xuICAgICAgYXJnc1tfa2V5M10gPSBhcmd1bWVudHNbX2tleTNdO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmZvcndhcmQoYXJncywgJ2Vycm9yJywgJycpO1xuICB9O1xuXG4gIExvZ2dlci5wcm90b3R5cGUuZGVwcmVjYXRlID0gZnVuY3Rpb24gZGVwcmVjYXRlKCkge1xuICAgIGZvciAodmFyIF9sZW40ID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW40KSwgX2tleTQgPSAwOyBfa2V5NCA8IF9sZW40OyBfa2V5NCsrKSB7XG4gICAgICBhcmdzW19rZXk0XSA9IGFyZ3VtZW50c1tfa2V5NF07XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuZm9yd2FyZChhcmdzLCAnd2FybicsICdXQVJOSU5HIERFUFJFQ0FURUQ6ICcsIHRydWUpO1xuICB9O1xuXG4gIExvZ2dlci5wcm90b3R5cGUuZm9yd2FyZCA9IGZ1bmN0aW9uIGZvcndhcmQoYXJncywgbHZsLCBwcmVmaXgsIGRlYnVnT25seSkge1xuICAgIGlmIChkZWJ1Z09ubHkgJiYgIXRoaXMuZGVidWcpIHJldHVybiBudWxsO1xuICAgIGlmICh0eXBlb2YgYXJnc1swXSA9PT0gJ3N0cmluZycpIGFyZ3NbMF0gPSAnJyArIHByZWZpeCArIHRoaXMucHJlZml4ICsgJyAnICsgYXJnc1swXTtcbiAgICByZXR1cm4gdGhpcy5sb2dnZXJbbHZsXShhcmdzKTtcbiAgfTtcblxuICBMb2dnZXIucHJvdG90eXBlLmNyZWF0ZSA9IGZ1bmN0aW9uIGNyZWF0ZShtb2R1bGVOYW1lKSB7XG4gICAgcmV0dXJuIG5ldyBMb2dnZXIodGhpcy5sb2dnZXIsIF9leHRlbmRzKHsgcHJlZml4OiB0aGlzLnByZWZpeCArICc6JyArIG1vZHVsZU5hbWUgKyAnOicgfSwgdGhpcy5vcHRpb25zKSk7XG4gIH07XG5cbiAgcmV0dXJuIExvZ2dlcjtcbn0oKTtcblxudmFyIGJhc2VMb2dnZXIgPSBuZXcgTG9nZ2VyKCk7XG5cbnZhciBFdmVudEVtaXR0ZXIgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIEV2ZW50RW1pdHRlcigpIHtcbiAgICBjbGFzc0NhbGxDaGVjayh0aGlzLCBFdmVudEVtaXR0ZXIpO1xuXG4gICAgdGhpcy5vYnNlcnZlcnMgPSB7fTtcbiAgfVxuXG4gIEV2ZW50RW1pdHRlci5wcm90b3R5cGUub24gPSBmdW5jdGlvbiBvbihldmVudHMsIGxpc3RlbmVyKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIGV2ZW50cy5zcGxpdCgnICcpLmZvckVhY2goZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICBfdGhpcy5vYnNlcnZlcnNbZXZlbnRdID0gX3RoaXMub2JzZXJ2ZXJzW2V2ZW50XSB8fCBbXTtcbiAgICAgIF90aGlzLm9ic2VydmVyc1tldmVudF0ucHVzaChsaXN0ZW5lcik7XG4gICAgfSk7XG4gIH07XG5cbiAgRXZlbnRFbWl0dGVyLnByb3RvdHlwZS5vZmYgPSBmdW5jdGlvbiBvZmYoZXZlbnQsIGxpc3RlbmVyKSB7XG4gICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICBpZiAoIXRoaXMub2JzZXJ2ZXJzW2V2ZW50XSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMub2JzZXJ2ZXJzW2V2ZW50XS5mb3JFYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICghbGlzdGVuZXIpIHtcbiAgICAgICAgZGVsZXRlIF90aGlzMi5vYnNlcnZlcnNbZXZlbnRdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGluZGV4ID0gX3RoaXMyLm9ic2VydmVyc1tldmVudF0uaW5kZXhPZihsaXN0ZW5lcik7XG4gICAgICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICAgICAgX3RoaXMyLm9ic2VydmVyc1tldmVudF0uc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9O1xuXG4gIEV2ZW50RW1pdHRlci5wcm90b3R5cGUuZW1pdCA9IGZ1bmN0aW9uIGVtaXQoZXZlbnQpIHtcbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4gPiAxID8gX2xlbiAtIDEgOiAwKSwgX2tleSA9IDE7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgIGFyZ3NbX2tleSAtIDFdID0gYXJndW1lbnRzW19rZXldO1xuICAgIH1cblxuICAgIGlmICh0aGlzLm9ic2VydmVyc1tldmVudF0pIHtcbiAgICAgIHZhciBjbG9uZWQgPSBbXS5jb25jYXQodGhpcy5vYnNlcnZlcnNbZXZlbnRdKTtcbiAgICAgIGNsb25lZC5mb3JFYWNoKGZ1bmN0aW9uIChvYnNlcnZlcikge1xuICAgICAgICBvYnNlcnZlci5hcHBseSh1bmRlZmluZWQsIGFyZ3MpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMub2JzZXJ2ZXJzWycqJ10pIHtcbiAgICAgIHZhciBfY2xvbmVkID0gW10uY29uY2F0KHRoaXMub2JzZXJ2ZXJzWycqJ10pO1xuICAgICAgX2Nsb25lZC5mb3JFYWNoKGZ1bmN0aW9uIChvYnNlcnZlcikge1xuICAgICAgICB2YXIgX3JlZjtcblxuICAgICAgICBvYnNlcnZlci5hcHBseShvYnNlcnZlciwgKF9yZWYgPSBbZXZlbnRdKS5jb25jYXQuYXBwbHkoX3JlZiwgYXJncykpO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBFdmVudEVtaXR0ZXI7XG59KCk7XG5cbmZ1bmN0aW9uIG1ha2VTdHJpbmcob2JqZWN0KSB7XG4gIGlmIChvYmplY3QgPT0gbnVsbCkgcmV0dXJuICcnO1xuICAvKiBlc2xpbnQgcHJlZmVyLXRlbXBsYXRlOiAwICovXG4gIHJldHVybiAnJyArIG9iamVjdDtcbn1cblxuZnVuY3Rpb24gY29weShhLCBzLCB0KSB7XG4gIGEuZm9yRWFjaChmdW5jdGlvbiAobSkge1xuICAgIGlmIChzW21dKSB0W21dID0gc1ttXTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGdldExhc3RPZlBhdGgob2JqZWN0LCBwYXRoLCBFbXB0eSkge1xuICBmdW5jdGlvbiBjbGVhbktleShrZXkpIHtcbiAgICByZXR1cm4ga2V5ICYmIGtleS5pbmRleE9mKCcjIyMnKSA+IC0xID8ga2V5LnJlcGxhY2UoLyMjIy9nLCAnLicpIDoga2V5O1xuICB9XG5cbiAgZnVuY3Rpb24gY2FuTm90VHJhdmVyc2VEZWVwZXIoKSB7XG4gICAgcmV0dXJuICFvYmplY3QgfHwgdHlwZW9mIG9iamVjdCA9PT0gJ3N0cmluZyc7XG4gIH1cblxuICB2YXIgc3RhY2sgPSB0eXBlb2YgcGF0aCAhPT0gJ3N0cmluZycgPyBbXS5jb25jYXQocGF0aCkgOiBwYXRoLnNwbGl0KCcuJyk7XG4gIHdoaWxlIChzdGFjay5sZW5ndGggPiAxKSB7XG4gICAgaWYgKGNhbk5vdFRyYXZlcnNlRGVlcGVyKCkpIHJldHVybiB7fTtcblxuICAgIHZhciBrZXkgPSBjbGVhbktleShzdGFjay5zaGlmdCgpKTtcbiAgICBpZiAoIW9iamVjdFtrZXldICYmIEVtcHR5KSBvYmplY3Rba2V5XSA9IG5ldyBFbXB0eSgpO1xuICAgIG9iamVjdCA9IG9iamVjdFtrZXldO1xuICB9XG5cbiAgaWYgKGNhbk5vdFRyYXZlcnNlRGVlcGVyKCkpIHJldHVybiB7fTtcbiAgcmV0dXJuIHtcbiAgICBvYmo6IG9iamVjdCxcbiAgICBrOiBjbGVhbktleShzdGFjay5zaGlmdCgpKVxuICB9O1xufVxuXG5mdW5jdGlvbiBzZXRQYXRoKG9iamVjdCwgcGF0aCwgbmV3VmFsdWUpIHtcbiAgdmFyIF9nZXRMYXN0T2ZQYXRoID0gZ2V0TGFzdE9mUGF0aChvYmplY3QsIHBhdGgsIE9iamVjdCksXG4gICAgICBvYmogPSBfZ2V0TGFzdE9mUGF0aC5vYmosXG4gICAgICBrID0gX2dldExhc3RPZlBhdGguaztcblxuICBvYmpba10gPSBuZXdWYWx1ZTtcbn1cblxuZnVuY3Rpb24gcHVzaFBhdGgob2JqZWN0LCBwYXRoLCBuZXdWYWx1ZSwgY29uY2F0KSB7XG4gIHZhciBfZ2V0TGFzdE9mUGF0aDIgPSBnZXRMYXN0T2ZQYXRoKG9iamVjdCwgcGF0aCwgT2JqZWN0KSxcbiAgICAgIG9iaiA9IF9nZXRMYXN0T2ZQYXRoMi5vYmosXG4gICAgICBrID0gX2dldExhc3RPZlBhdGgyLms7XG5cbiAgb2JqW2tdID0gb2JqW2tdIHx8IFtdO1xuICBpZiAoY29uY2F0KSBvYmpba10gPSBvYmpba10uY29uY2F0KG5ld1ZhbHVlKTtcbiAgaWYgKCFjb25jYXQpIG9ialtrXS5wdXNoKG5ld1ZhbHVlKTtcbn1cblxuZnVuY3Rpb24gZ2V0UGF0aChvYmplY3QsIHBhdGgpIHtcbiAgdmFyIF9nZXRMYXN0T2ZQYXRoMyA9IGdldExhc3RPZlBhdGgob2JqZWN0LCBwYXRoKSxcbiAgICAgIG9iaiA9IF9nZXRMYXN0T2ZQYXRoMy5vYmosXG4gICAgICBrID0gX2dldExhc3RPZlBhdGgzLms7XG5cbiAgaWYgKCFvYmopIHJldHVybiB1bmRlZmluZWQ7XG4gIHJldHVybiBvYmpba107XG59XG5cbmZ1bmN0aW9uIGRlZXBFeHRlbmQodGFyZ2V0LCBzb3VyY2UsIG92ZXJ3cml0ZSkge1xuICAvKiBlc2xpbnQgbm8tcmVzdHJpY3RlZC1zeW50YXg6IDAgKi9cbiAgZm9yICh2YXIgcHJvcCBpbiBzb3VyY2UpIHtcbiAgICBpZiAocHJvcCBpbiB0YXJnZXQpIHtcbiAgICAgIC8vIElmIHdlIHJlYWNoZWQgYSBsZWFmIHN0cmluZyBpbiB0YXJnZXQgb3Igc291cmNlIHRoZW4gcmVwbGFjZSB3aXRoIHNvdXJjZSBvciBza2lwIGRlcGVuZGluZyBvbiB0aGUgJ292ZXJ3cml0ZScgc3dpdGNoXG4gICAgICBpZiAodHlwZW9mIHRhcmdldFtwcm9wXSA9PT0gJ3N0cmluZycgfHwgdGFyZ2V0W3Byb3BdIGluc3RhbmNlb2YgU3RyaW5nIHx8IHR5cGVvZiBzb3VyY2VbcHJvcF0gPT09ICdzdHJpbmcnIHx8IHNvdXJjZVtwcm9wXSBpbnN0YW5jZW9mIFN0cmluZykge1xuICAgICAgICBpZiAob3ZlcndyaXRlKSB0YXJnZXRbcHJvcF0gPSBzb3VyY2VbcHJvcF07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkZWVwRXh0ZW5kKHRhcmdldFtwcm9wXSwgc291cmNlW3Byb3BdLCBvdmVyd3JpdGUpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0YXJnZXRbcHJvcF0gPSBzb3VyY2VbcHJvcF07XG4gICAgfVxuICB9XG4gIHJldHVybiB0YXJnZXQ7XG59XG5cbmZ1bmN0aW9uIHJlZ2V4RXNjYXBlKHN0cikge1xuICAvKiBlc2xpbnQgbm8tdXNlbGVzcy1lc2NhcGU6IDAgKi9cbiAgcmV0dXJuIHN0ci5yZXBsYWNlKC9bXFwtXFxbXFxdXFwvXFx7XFx9XFwoXFwpXFwqXFwrXFw/XFwuXFxcXFxcXlxcJFxcfF0vZywgJ1xcXFwkJicpO1xufVxuXG4vKiBlc2xpbnQtZGlzYWJsZSAqL1xudmFyIF9lbnRpdHlNYXAgPSB7XG4gIFwiJlwiOiBcIiZhbXA7XCIsXG4gIFwiPFwiOiBcIiZsdDtcIixcbiAgXCI+XCI6IFwiJmd0O1wiLFxuICAnXCInOiAnJnF1b3Q7JyxcbiAgXCInXCI6ICcmIzM5OycsXG4gIFwiL1wiOiAnJiN4MkY7J1xufTtcbi8qIGVzbGludC1lbmFibGUgKi9cblxuZnVuY3Rpb24gZXNjYXBlKGRhdGEpIHtcbiAgaWYgKHR5cGVvZiBkYXRhID09PSAnc3RyaW5nJykge1xuICAgIHJldHVybiBkYXRhLnJlcGxhY2UoL1smPD5cIidcXC9dL2csIGZ1bmN0aW9uIChzKSB7XG4gICAgICByZXR1cm4gX2VudGl0eU1hcFtzXTtcbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiBkYXRhO1xufVxuXG52YXIgUmVzb3VyY2VTdG9yZSA9IGZ1bmN0aW9uIChfRXZlbnRFbWl0dGVyKSB7XG4gIGluaGVyaXRzKFJlc291cmNlU3RvcmUsIF9FdmVudEVtaXR0ZXIpO1xuXG4gIGZ1bmN0aW9uIFJlc291cmNlU3RvcmUoKSB7XG4gICAgdmFyIGRhdGEgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9O1xuICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7IG5zOiBbJ3RyYW5zbGF0aW9uJ10sIGRlZmF1bHROUzogJ3RyYW5zbGF0aW9uJyB9O1xuICAgIGNsYXNzQ2FsbENoZWNrKHRoaXMsIFJlc291cmNlU3RvcmUpO1xuXG4gICAgdmFyIF90aGlzID0gcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfRXZlbnRFbWl0dGVyLmNhbGwodGhpcykpO1xuXG4gICAgX3RoaXMuZGF0YSA9IGRhdGE7XG4gICAgX3RoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgUmVzb3VyY2VTdG9yZS5wcm90b3R5cGUuYWRkTmFtZXNwYWNlcyA9IGZ1bmN0aW9uIGFkZE5hbWVzcGFjZXMobnMpIHtcbiAgICBpZiAodGhpcy5vcHRpb25zLm5zLmluZGV4T2YobnMpIDwgMCkge1xuICAgICAgdGhpcy5vcHRpb25zLm5zLnB1c2gobnMpO1xuICAgIH1cbiAgfTtcblxuICBSZXNvdXJjZVN0b3JlLnByb3RvdHlwZS5yZW1vdmVOYW1lc3BhY2VzID0gZnVuY3Rpb24gcmVtb3ZlTmFtZXNwYWNlcyhucykge1xuICAgIHZhciBpbmRleCA9IHRoaXMub3B0aW9ucy5ucy5pbmRleE9mKG5zKTtcbiAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgdGhpcy5vcHRpb25zLm5zLnNwbGljZShpbmRleCwgMSk7XG4gICAgfVxuICB9O1xuXG4gIFJlc291cmNlU3RvcmUucHJvdG90eXBlLmdldFJlc291cmNlID0gZnVuY3Rpb24gZ2V0UmVzb3VyY2UobG5nLCBucywga2V5KSB7XG4gICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IHt9O1xuXG4gICAgdmFyIGtleVNlcGFyYXRvciA9IG9wdGlvbnMua2V5U2VwYXJhdG9yIHx8IHRoaXMub3B0aW9ucy5rZXlTZXBhcmF0b3I7XG4gICAgaWYgKGtleVNlcGFyYXRvciA9PT0gdW5kZWZpbmVkKSBrZXlTZXBhcmF0b3IgPSAnLic7XG5cbiAgICB2YXIgcGF0aCA9IFtsbmcsIG5zXTtcbiAgICBpZiAoa2V5ICYmIHR5cGVvZiBrZXkgIT09ICdzdHJpbmcnKSBwYXRoID0gcGF0aC5jb25jYXQoa2V5KTtcbiAgICBpZiAoa2V5ICYmIHR5cGVvZiBrZXkgPT09ICdzdHJpbmcnKSBwYXRoID0gcGF0aC5jb25jYXQoa2V5U2VwYXJhdG9yID8ga2V5LnNwbGl0KGtleVNlcGFyYXRvcikgOiBrZXkpO1xuXG4gICAgaWYgKGxuZy5pbmRleE9mKCcuJykgPiAtMSkge1xuICAgICAgcGF0aCA9IGxuZy5zcGxpdCgnLicpO1xuICAgIH1cblxuICAgIHJldHVybiBnZXRQYXRoKHRoaXMuZGF0YSwgcGF0aCk7XG4gIH07XG5cbiAgUmVzb3VyY2VTdG9yZS5wcm90b3R5cGUuYWRkUmVzb3VyY2UgPSBmdW5jdGlvbiBhZGRSZXNvdXJjZShsbmcsIG5zLCBrZXksIHZhbHVlKSB7XG4gICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gNCAmJiBhcmd1bWVudHNbNF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1s0XSA6IHsgc2lsZW50OiBmYWxzZSB9O1xuXG4gICAgdmFyIGtleVNlcGFyYXRvciA9IHRoaXMub3B0aW9ucy5rZXlTZXBhcmF0b3I7XG4gICAgaWYgKGtleVNlcGFyYXRvciA9PT0gdW5kZWZpbmVkKSBrZXlTZXBhcmF0b3IgPSAnLic7XG5cbiAgICB2YXIgcGF0aCA9IFtsbmcsIG5zXTtcbiAgICBpZiAoa2V5KSBwYXRoID0gcGF0aC5jb25jYXQoa2V5U2VwYXJhdG9yID8ga2V5LnNwbGl0KGtleVNlcGFyYXRvcikgOiBrZXkpO1xuXG4gICAgaWYgKGxuZy5pbmRleE9mKCcuJykgPiAtMSkge1xuICAgICAgcGF0aCA9IGxuZy5zcGxpdCgnLicpO1xuICAgICAgdmFsdWUgPSBucztcbiAgICAgIG5zID0gcGF0aFsxXTtcbiAgICB9XG5cbiAgICB0aGlzLmFkZE5hbWVzcGFjZXMobnMpO1xuXG4gICAgc2V0UGF0aCh0aGlzLmRhdGEsIHBhdGgsIHZhbHVlKTtcblxuICAgIGlmICghb3B0aW9ucy5zaWxlbnQpIHRoaXMuZW1pdCgnYWRkZWQnLCBsbmcsIG5zLCBrZXksIHZhbHVlKTtcbiAgfTtcblxuICBSZXNvdXJjZVN0b3JlLnByb3RvdHlwZS5hZGRSZXNvdXJjZXMgPSBmdW5jdGlvbiBhZGRSZXNvdXJjZXMobG5nLCBucywgcmVzb3VyY2VzKSB7XG4gICAgLyogZXNsaW50IG5vLXJlc3RyaWN0ZWQtc3ludGF4OiAwICovXG4gICAgZm9yICh2YXIgbSBpbiByZXNvdXJjZXMpIHtcbiAgICAgIGlmICh0eXBlb2YgcmVzb3VyY2VzW21dID09PSAnc3RyaW5nJykgdGhpcy5hZGRSZXNvdXJjZShsbmcsIG5zLCBtLCByZXNvdXJjZXNbbV0sIHsgc2lsZW50OiB0cnVlIH0pO1xuICAgIH1cbiAgICB0aGlzLmVtaXQoJ2FkZGVkJywgbG5nLCBucywgcmVzb3VyY2VzKTtcbiAgfTtcblxuICBSZXNvdXJjZVN0b3JlLnByb3RvdHlwZS5hZGRSZXNvdXJjZUJ1bmRsZSA9IGZ1bmN0aW9uIGFkZFJlc291cmNlQnVuZGxlKGxuZywgbnMsIHJlc291cmNlcywgZGVlcCwgb3ZlcndyaXRlKSB7XG4gICAgdmFyIHBhdGggPSBbbG5nLCBuc107XG4gICAgaWYgKGxuZy5pbmRleE9mKCcuJykgPiAtMSkge1xuICAgICAgcGF0aCA9IGxuZy5zcGxpdCgnLicpO1xuICAgICAgZGVlcCA9IHJlc291cmNlcztcbiAgICAgIHJlc291cmNlcyA9IG5zO1xuICAgICAgbnMgPSBwYXRoWzFdO1xuICAgIH1cblxuICAgIHRoaXMuYWRkTmFtZXNwYWNlcyhucyk7XG5cbiAgICB2YXIgcGFjayA9IGdldFBhdGgodGhpcy5kYXRhLCBwYXRoKSB8fCB7fTtcblxuICAgIGlmIChkZWVwKSB7XG4gICAgICBkZWVwRXh0ZW5kKHBhY2ssIHJlc291cmNlcywgb3ZlcndyaXRlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcGFjayA9IF9leHRlbmRzKHt9LCBwYWNrLCByZXNvdXJjZXMpO1xuICAgIH1cblxuICAgIHNldFBhdGgodGhpcy5kYXRhLCBwYXRoLCBwYWNrKTtcblxuICAgIHRoaXMuZW1pdCgnYWRkZWQnLCBsbmcsIG5zLCByZXNvdXJjZXMpO1xuICB9O1xuXG4gIFJlc291cmNlU3RvcmUucHJvdG90eXBlLnJlbW92ZVJlc291cmNlQnVuZGxlID0gZnVuY3Rpb24gcmVtb3ZlUmVzb3VyY2VCdW5kbGUobG5nLCBucykge1xuICAgIGlmICh0aGlzLmhhc1Jlc291cmNlQnVuZGxlKGxuZywgbnMpKSB7XG4gICAgICBkZWxldGUgdGhpcy5kYXRhW2xuZ11bbnNdO1xuICAgIH1cbiAgICB0aGlzLnJlbW92ZU5hbWVzcGFjZXMobnMpO1xuXG4gICAgdGhpcy5lbWl0KCdyZW1vdmVkJywgbG5nLCBucyk7XG4gIH07XG5cbiAgUmVzb3VyY2VTdG9yZS5wcm90b3R5cGUuaGFzUmVzb3VyY2VCdW5kbGUgPSBmdW5jdGlvbiBoYXNSZXNvdXJjZUJ1bmRsZShsbmcsIG5zKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0UmVzb3VyY2UobG5nLCBucykgIT09IHVuZGVmaW5lZDtcbiAgfTtcblxuICBSZXNvdXJjZVN0b3JlLnByb3RvdHlwZS5nZXRSZXNvdXJjZUJ1bmRsZSA9IGZ1bmN0aW9uIGdldFJlc291cmNlQnVuZGxlKGxuZywgbnMpIHtcbiAgICBpZiAoIW5zKSBucyA9IHRoaXMub3B0aW9ucy5kZWZhdWx0TlM7XG5cbiAgICAvLyBDT01QQVRJQklMSVRZOiByZW1vdmUgZXh0ZW5kIGluIHYyLjEuMFxuICAgIGlmICh0aGlzLm9wdGlvbnMuY29tcGF0aWJpbGl0eUFQSSA9PT0gJ3YxJykgcmV0dXJuIF9leHRlbmRzKHt9LCB0aGlzLmdldFJlc291cmNlKGxuZywgbnMpKTtcblxuICAgIHJldHVybiB0aGlzLmdldFJlc291cmNlKGxuZywgbnMpO1xuICB9O1xuXG4gIFJlc291cmNlU3RvcmUucHJvdG90eXBlLnRvSlNPTiA9IGZ1bmN0aW9uIHRvSlNPTigpIHtcbiAgICByZXR1cm4gdGhpcy5kYXRhO1xuICB9O1xuXG4gIHJldHVybiBSZXNvdXJjZVN0b3JlO1xufShFdmVudEVtaXR0ZXIpO1xuXG52YXIgcG9zdFByb2Nlc3NvciA9IHtcblxuICBwcm9jZXNzb3JzOiB7fSxcblxuICBhZGRQb3N0UHJvY2Vzc29yOiBmdW5jdGlvbiBhZGRQb3N0UHJvY2Vzc29yKG1vZHVsZSkge1xuICAgIHRoaXMucHJvY2Vzc29yc1ttb2R1bGUubmFtZV0gPSBtb2R1bGU7XG4gIH0sXG4gIGhhbmRsZTogZnVuY3Rpb24gaGFuZGxlKHByb2Nlc3NvcnMsIHZhbHVlLCBrZXksIG9wdGlvbnMsIHRyYW5zbGF0b3IpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgcHJvY2Vzc29ycy5mb3JFYWNoKGZ1bmN0aW9uIChwcm9jZXNzb3IpIHtcbiAgICAgIGlmIChfdGhpcy5wcm9jZXNzb3JzW3Byb2Nlc3Nvcl0pIHZhbHVlID0gX3RoaXMucHJvY2Vzc29yc1twcm9jZXNzb3JdLnByb2Nlc3ModmFsdWUsIGtleSwgb3B0aW9ucywgdHJhbnNsYXRvcik7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbn07XG5cbi8qIGVzbGludCBuby1wYXJhbS1yZWFzc2lnbjogMCAqL1xuZnVuY3Rpb24gY29udmVydEludGVycG9sYXRpb24ob3B0aW9ucykge1xuXG4gIG9wdGlvbnMuaW50ZXJwb2xhdGlvbiA9IHtcbiAgICB1bmVzY2FwZVN1ZmZpeDogJ0hUTUwnXG4gIH07XG5cbiAgb3B0aW9ucy5pbnRlcnBvbGF0aW9uLnByZWZpeCA9IG9wdGlvbnMuaW50ZXJwb2xhdGlvblByZWZpeCB8fCAnX18nO1xuICBvcHRpb25zLmludGVycG9sYXRpb24uc3VmZml4ID0gb3B0aW9ucy5pbnRlcnBvbGF0aW9uU3VmZml4IHx8ICdfXyc7XG4gIG9wdGlvbnMuaW50ZXJwb2xhdGlvbi5lc2NhcGVWYWx1ZSA9IG9wdGlvbnMuZXNjYXBlSW50ZXJwb2xhdGlvbiB8fCBmYWxzZTtcblxuICBvcHRpb25zLmludGVycG9sYXRpb24ubmVzdGluZ1ByZWZpeCA9IG9wdGlvbnMucmV1c2VQcmVmaXggfHwgJyR0KCc7XG4gIG9wdGlvbnMuaW50ZXJwb2xhdGlvbi5uZXN0aW5nU3VmZml4ID0gb3B0aW9ucy5yZXVzZVN1ZmZpeCB8fCAnKSc7XG5cbiAgcmV0dXJuIG9wdGlvbnM7XG59XG5cbmZ1bmN0aW9uIGNvbnZlcnRBUElPcHRpb25zKG9wdGlvbnMpIHtcbiAgaWYgKG9wdGlvbnMucmVzU3RvcmUpIG9wdGlvbnMucmVzb3VyY2VzID0gb3B0aW9ucy5yZXNTdG9yZTtcblxuICBpZiAob3B0aW9ucy5ucyAmJiBvcHRpb25zLm5zLmRlZmF1bHROcykge1xuICAgIG9wdGlvbnMuZGVmYXVsdE5TID0gb3B0aW9ucy5ucy5kZWZhdWx0TnM7XG4gICAgb3B0aW9ucy5ucyA9IG9wdGlvbnMubnMubmFtZXNwYWNlcztcbiAgfSBlbHNlIHtcbiAgICBvcHRpb25zLmRlZmF1bHROUyA9IG9wdGlvbnMubnMgfHwgJ3RyYW5zbGF0aW9uJztcbiAgfVxuXG4gIGlmIChvcHRpb25zLmZhbGxiYWNrVG9EZWZhdWx0TlMgJiYgb3B0aW9ucy5kZWZhdWx0TlMpIG9wdGlvbnMuZmFsbGJhY2tOUyA9IG9wdGlvbnMuZGVmYXVsdE5TO1xuXG4gIG9wdGlvbnMuc2F2ZU1pc3NpbmcgPSBvcHRpb25zLnNlbmRNaXNzaW5nO1xuICBvcHRpb25zLnNhdmVNaXNzaW5nVG8gPSBvcHRpb25zLnNlbmRNaXNzaW5nVG8gfHwgJ2N1cnJlbnQnO1xuICBvcHRpb25zLnJldHVybk51bGwgPSAhb3B0aW9ucy5mYWxsYmFja09uTnVsbDtcbiAgb3B0aW9ucy5yZXR1cm5FbXB0eVN0cmluZyA9ICFvcHRpb25zLmZhbGxiYWNrT25FbXB0eTtcbiAgb3B0aW9ucy5yZXR1cm5PYmplY3RzID0gb3B0aW9ucy5yZXR1cm5PYmplY3RUcmVlcztcbiAgb3B0aW9ucy5qb2luQXJyYXlzID0gJ1xcbic7XG5cbiAgb3B0aW9ucy5yZXR1cm5lZE9iamVjdEhhbmRsZXIgPSBvcHRpb25zLm9iamVjdFRyZWVLZXlIYW5kbGVyO1xuICBvcHRpb25zLnBhcnNlTWlzc2luZ0tleUhhbmRsZXIgPSBvcHRpb25zLnBhcnNlTWlzc2luZ0tleTtcbiAgb3B0aW9ucy5hcHBlbmROYW1lc3BhY2VUb01pc3NpbmdLZXkgPSB0cnVlO1xuXG4gIG9wdGlvbnMubnNTZXBhcmF0b3IgPSBvcHRpb25zLm5zc2VwYXJhdG9yIHx8ICc6JztcbiAgb3B0aW9ucy5rZXlTZXBhcmF0b3IgPSBvcHRpb25zLmtleXNlcGFyYXRvciB8fCAnLic7XG5cbiAgaWYgKG9wdGlvbnMuc2hvcnRjdXRGdW5jdGlvbiA9PT0gJ3NwcmludGYnKSB7XG4gICAgb3B0aW9ucy5vdmVybG9hZFRyYW5zbGF0aW9uT3B0aW9uSGFuZGxlciA9IGZ1bmN0aW9uIGhhbmRsZShhcmdzKSB7XG4gICAgICB2YXIgdmFsdWVzID0gW107XG5cbiAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJncy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YWx1ZXMucHVzaChhcmdzW2ldKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcG9zdFByb2Nlc3M6ICdzcHJpbnRmJyxcbiAgICAgICAgc3ByaW50ZjogdmFsdWVzXG4gICAgICB9O1xuICAgIH07XG4gIH1cblxuICBvcHRpb25zLndoaXRlbGlzdCA9IG9wdGlvbnMubG5nV2hpdGVsaXN0O1xuICBvcHRpb25zLnByZWxvYWQgPSBvcHRpb25zLnByZWxvYWQ7XG4gIGlmIChvcHRpb25zLmxvYWQgPT09ICdjdXJyZW50Jykgb3B0aW9ucy5sb2FkID0gJ2N1cnJlbnRPbmx5JztcbiAgaWYgKG9wdGlvbnMubG9hZCA9PT0gJ3Vuc3BlY2lmaWMnKSBvcHRpb25zLmxvYWQgPSAnbGFuZ3VhZ2VPbmx5JztcblxuICAvLyBiYWNrZW5kXG4gIG9wdGlvbnMuYmFja2VuZCA9IG9wdGlvbnMuYmFja2VuZCB8fCB7fTtcbiAgb3B0aW9ucy5iYWNrZW5kLmxvYWRQYXRoID0gb3B0aW9ucy5yZXNHZXRQYXRoIHx8ICdsb2NhbGVzL19fbG5nX18vX19uc19fLmpzb24nO1xuICBvcHRpb25zLmJhY2tlbmQuYWRkUGF0aCA9IG9wdGlvbnMucmVzUG9zdFBhdGggfHwgJ2xvY2FsZXMvYWRkL19fbG5nX18vX19uc19fJztcbiAgb3B0aW9ucy5iYWNrZW5kLmFsbG93TXVsdGlMb2FkaW5nID0gb3B0aW9ucy5keW5hbWljTG9hZDtcblxuICAvLyBjYWNoZVxuICBvcHRpb25zLmNhY2hlID0gb3B0aW9ucy5jYWNoZSB8fCB7fTtcbiAgb3B0aW9ucy5jYWNoZS5wcmVmaXggPSAncmVzXyc7XG4gIG9wdGlvbnMuY2FjaGUuZXhwaXJhdGlvblRpbWUgPSA3ICogMjQgKiA2MCAqIDYwICogMTAwMDtcbiAgb3B0aW9ucy5jYWNoZS5lbmFibGVkID0gb3B0aW9ucy51c2VMb2NhbFN0b3JhZ2U7XG5cbiAgb3B0aW9ucyA9IGNvbnZlcnRJbnRlcnBvbGF0aW9uKG9wdGlvbnMpO1xuICBpZiAob3B0aW9ucy5kZWZhdWx0VmFyaWFibGVzKSBvcHRpb25zLmludGVycG9sYXRpb24uZGVmYXVsdFZhcmlhYmxlcyA9IG9wdGlvbnMuZGVmYXVsdFZhcmlhYmxlcztcblxuICAvLyBDT01QQVRJQklMSVRZOiBkZXByZWNhdGlvblxuICAvLyBpZiAob3B0aW9ucy5nZXRBc3luYyA9PT0gZmFsc2UpIHRocm93IGRlcHJlY2F0aW9uIGVycm9yXG5cbiAgcmV0dXJuIG9wdGlvbnM7XG59XG5cbmZ1bmN0aW9uIGNvbnZlcnRKU09OT3B0aW9ucyhvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBjb252ZXJ0SW50ZXJwb2xhdGlvbihvcHRpb25zKTtcbiAgb3B0aW9ucy5qb2luQXJyYXlzID0gJ1xcbic7XG5cbiAgcmV0dXJuIG9wdGlvbnM7XG59XG5cbmZ1bmN0aW9uIGNvbnZlcnRUT3B0aW9ucyhvcHRpb25zKSB7XG4gIGlmIChvcHRpb25zLmludGVycG9sYXRpb25QcmVmaXggfHwgb3B0aW9ucy5pbnRlcnBvbGF0aW9uU3VmZml4IHx8IG9wdGlvbnMuZXNjYXBlSW50ZXJwb2xhdGlvbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgb3B0aW9ucyA9IGNvbnZlcnRJbnRlcnBvbGF0aW9uKG9wdGlvbnMpO1xuICB9XG5cbiAgb3B0aW9ucy5uc1NlcGFyYXRvciA9IG9wdGlvbnMubnNzZXBhcmF0b3I7XG4gIG9wdGlvbnMua2V5U2VwYXJhdG9yID0gb3B0aW9ucy5rZXlzZXBhcmF0b3I7XG5cbiAgb3B0aW9ucy5yZXR1cm5PYmplY3RzID0gb3B0aW9ucy5yZXR1cm5PYmplY3RUcmVlcztcblxuICByZXR1cm4gb3B0aW9ucztcbn1cblxuZnVuY3Rpb24gYXBwZW5kQmFja3dhcmRzQVBJKGkxOG4pIHtcbiAgaTE4bi5sbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgYmFzZUxvZ2dlci5kZXByZWNhdGUoJ2kxOG5leHQubG5nKCkgY2FuIGJlIHJlcGxhY2VkIGJ5IGkxOG5leHQubGFuZ3VhZ2UgZm9yIGRldGVjdGVkIGxhbmd1YWdlIG9yIGkxOG5leHQubGFuZ3VhZ2VzIGZvciBsYW5ndWFnZXMgb3JkZXJlZCBieSB0cmFuc2xhdGlvbiBsb29rdXAuJyk7XG4gICAgcmV0dXJuIGkxOG4uc2VydmljZXMubGFuZ3VhZ2VVdGlscy50b1Jlc29sdmVIaWVyYXJjaHkoaTE4bi5sYW5ndWFnZSlbMF07XG4gIH07XG5cbiAgaTE4bi5wcmVsb2FkID0gZnVuY3Rpb24gKGxuZ3MsIGNiKSB7XG4gICAgYmFzZUxvZ2dlci5kZXByZWNhdGUoJ2kxOG5leHQucHJlbG9hZCgpIGNhbiBiZSByZXBsYWNlZCB3aXRoIGkxOG5leHQubG9hZExhbmd1YWdlcygpJyk7XG4gICAgaTE4bi5sb2FkTGFuZ3VhZ2VzKGxuZ3MsIGNiKTtcbiAgfTtcblxuICBpMThuLnNldExuZyA9IGZ1bmN0aW9uIChsbmcsIG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gICAgYmFzZUxvZ2dlci5kZXByZWNhdGUoJ2kxOG5leHQuc2V0TG5nKCkgY2FuIGJlIHJlcGxhY2VkIHdpdGggaTE4bmV4dC5jaGFuZ2VMYW5ndWFnZSgpIG9yIGkxOG5leHQuZ2V0Rml4ZWRUKCkgdG8gZ2V0IGEgdHJhbnNsYXRpb24gZnVuY3Rpb24gd2l0aCBmaXhlZCBsYW5ndWFnZSBvciBuYW1lc3BhY2UuJyk7XG4gICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBjYWxsYmFjayA9IG9wdGlvbnM7XG4gICAgICBvcHRpb25zID0ge307XG4gICAgfVxuICAgIGlmICghb3B0aW9ucykgb3B0aW9ucyA9IHt9O1xuXG4gICAgaWYgKG9wdGlvbnMuZml4TG5nID09PSB0cnVlKSB7XG4gICAgICBpZiAoY2FsbGJhY2spIHJldHVybiBjYWxsYmFjayhudWxsLCBpMThuLmdldEZpeGVkVChsbmcpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gaTE4bi5jaGFuZ2VMYW5ndWFnZShsbmcsIGNhbGxiYWNrKTtcbiAgfTtcblxuICBpMThuLmFkZFBvc3RQcm9jZXNzb3IgPSBmdW5jdGlvbiAobmFtZSwgZmMpIHtcbiAgICBiYXNlTG9nZ2VyLmRlcHJlY2F0ZSgnaTE4bmV4dC5hZGRQb3N0UHJvY2Vzc29yKCkgY2FuIGJlIHJlcGxhY2VkIGJ5IGkxOG5leHQudXNlKHsgdHlwZTogXFwncG9zdFByb2Nlc3NvclxcJywgbmFtZTogXFwnbmFtZVxcJywgcHJvY2VzczogZmMgfSknKTtcbiAgICBpMThuLnVzZSh7XG4gICAgICB0eXBlOiAncG9zdFByb2Nlc3NvcicsXG4gICAgICBuYW1lOiBuYW1lLFxuICAgICAgcHJvY2VzczogZmNcbiAgICB9KTtcbiAgfTtcbn1cblxudmFyIFRyYW5zbGF0b3IgPSBmdW5jdGlvbiAoX0V2ZW50RW1pdHRlcikge1xuICBpbmhlcml0cyhUcmFuc2xhdG9yLCBfRXZlbnRFbWl0dGVyKTtcblxuICBmdW5jdGlvbiBUcmFuc2xhdG9yKHNlcnZpY2VzKSB7XG4gICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9O1xuICAgIGNsYXNzQ2FsbENoZWNrKHRoaXMsIFRyYW5zbGF0b3IpO1xuXG4gICAgdmFyIF90aGlzID0gcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfRXZlbnRFbWl0dGVyLmNhbGwodGhpcykpO1xuXG4gICAgY29weShbJ3Jlc291cmNlU3RvcmUnLCAnbGFuZ3VhZ2VVdGlscycsICdwbHVyYWxSZXNvbHZlcicsICdpbnRlcnBvbGF0b3InLCAnYmFja2VuZENvbm5lY3RvciddLCBzZXJ2aWNlcywgX3RoaXMpO1xuXG4gICAgX3RoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgX3RoaXMubG9nZ2VyID0gYmFzZUxvZ2dlci5jcmVhdGUoJ3RyYW5zbGF0b3InKTtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICBUcmFuc2xhdG9yLnByb3RvdHlwZS5jaGFuZ2VMYW5ndWFnZSA9IGZ1bmN0aW9uIGNoYW5nZUxhbmd1YWdlKGxuZykge1xuICAgIGlmIChsbmcpIHRoaXMubGFuZ3VhZ2UgPSBsbmc7XG4gIH07XG5cbiAgVHJhbnNsYXRvci5wcm90b3R5cGUuZXhpc3RzID0gZnVuY3Rpb24gZXhpc3RzKGtleSkge1xuICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7IGludGVycG9sYXRpb246IHt9IH07XG5cbiAgICBpZiAodGhpcy5vcHRpb25zLmNvbXBhdGliaWxpdHlBUEkgPT09ICd2MScpIHtcbiAgICAgIG9wdGlvbnMgPSBjb252ZXJ0VE9wdGlvbnMob3B0aW9ucyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMucmVzb2x2ZShrZXksIG9wdGlvbnMpICE9PSB1bmRlZmluZWQ7XG4gIH07XG5cbiAgVHJhbnNsYXRvci5wcm90b3R5cGUuZXh0cmFjdEZyb21LZXkgPSBmdW5jdGlvbiBleHRyYWN0RnJvbUtleShrZXksIG9wdGlvbnMpIHtcbiAgICB2YXIgbnNTZXBhcmF0b3IgPSBvcHRpb25zLm5zU2VwYXJhdG9yIHx8IHRoaXMub3B0aW9ucy5uc1NlcGFyYXRvcjtcbiAgICBpZiAobnNTZXBhcmF0b3IgPT09IHVuZGVmaW5lZCkgbnNTZXBhcmF0b3IgPSAnOic7XG4gICAgdmFyIGtleVNlcGFyYXRvciA9IG9wdGlvbnMua2V5U2VwYXJhdG9yIHx8IHRoaXMub3B0aW9ucy5rZXlTZXBhcmF0b3IgfHwgJy4nO1xuXG4gICAgdmFyIG5hbWVzcGFjZXMgPSBvcHRpb25zLm5zIHx8IHRoaXMub3B0aW9ucy5kZWZhdWx0TlM7XG4gICAgaWYgKG5zU2VwYXJhdG9yICYmIGtleS5pbmRleE9mKG5zU2VwYXJhdG9yKSA+IC0xKSB7XG4gICAgICB2YXIgcGFydHMgPSBrZXkuc3BsaXQobnNTZXBhcmF0b3IpO1xuICAgICAgaWYgKG5zU2VwYXJhdG9yICE9PSBrZXlTZXBhcmF0b3IgfHwgbnNTZXBhcmF0b3IgPT09IGtleVNlcGFyYXRvciAmJiB0aGlzLm9wdGlvbnMubnMuaW5kZXhPZihwYXJ0c1swXSkgPiAtMSkgbmFtZXNwYWNlcyA9IHBhcnRzLnNoaWZ0KCk7XG4gICAgICBrZXkgPSBwYXJ0cy5qb2luKGtleVNlcGFyYXRvcik7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgbmFtZXNwYWNlcyA9PT0gJ3N0cmluZycpIG5hbWVzcGFjZXMgPSBbbmFtZXNwYWNlc107XG5cbiAgICByZXR1cm4ge1xuICAgICAga2V5OiBrZXksXG4gICAgICBuYW1lc3BhY2VzOiBuYW1lc3BhY2VzXG4gICAgfTtcbiAgfTtcblxuICBUcmFuc2xhdG9yLnByb3RvdHlwZS50cmFuc2xhdGUgPSBmdW5jdGlvbiB0cmFuc2xhdGUoa2V5cykge1xuICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTtcblxuICAgIGlmICgodHlwZW9mIG9wdGlvbnMgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKG9wdGlvbnMpKSAhPT0gJ29iamVjdCcpIHtcbiAgICAgIC8qIGVzbGludCBwcmVmZXItcmVzdC1wYXJhbXM6IDAgKi9cbiAgICAgIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnMub3ZlcmxvYWRUcmFuc2xhdGlvbk9wdGlvbkhhbmRsZXIoYXJndW1lbnRzKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMub3B0aW9ucy5jb21wYXRpYmlsaXR5QVBJID09PSAndjEnKSB7XG4gICAgICBvcHRpb25zID0gY29udmVydFRPcHRpb25zKG9wdGlvbnMpO1xuICAgIH1cblxuICAgIC8vIG5vbiB2YWxpZCBrZXlzIGhhbmRsaW5nXG4gICAgaWYgKGtleXMgPT09IHVuZGVmaW5lZCB8fCBrZXlzID09PSBudWxsIHx8IGtleXMgPT09ICcnKSByZXR1cm4gJyc7XG4gICAgaWYgKHR5cGVvZiBrZXlzID09PSAnbnVtYmVyJykga2V5cyA9IFN0cmluZyhrZXlzKTtcbiAgICBpZiAodHlwZW9mIGtleXMgPT09ICdzdHJpbmcnKSBrZXlzID0gW2tleXNdO1xuXG4gICAgLy8gc2VwYXJhdG9yc1xuICAgIHZhciBrZXlTZXBhcmF0b3IgPSBvcHRpb25zLmtleVNlcGFyYXRvciB8fCB0aGlzLm9wdGlvbnMua2V5U2VwYXJhdG9yIHx8ICcuJztcblxuICAgIC8vIGdldCBuYW1lc3BhY2UocylcblxuICAgIHZhciBfZXh0cmFjdEZyb21LZXkgPSB0aGlzLmV4dHJhY3RGcm9tS2V5KGtleXNba2V5cy5sZW5ndGggLSAxXSwgb3B0aW9ucyksXG4gICAgICAgIGtleSA9IF9leHRyYWN0RnJvbUtleS5rZXksXG4gICAgICAgIG5hbWVzcGFjZXMgPSBfZXh0cmFjdEZyb21LZXkubmFtZXNwYWNlcztcblxuICAgIHZhciBuYW1lc3BhY2UgPSBuYW1lc3BhY2VzW25hbWVzcGFjZXMubGVuZ3RoIC0gMV07XG5cbiAgICAvLyByZXR1cm4ga2V5IG9uIENJTW9kZVxuICAgIHZhciBsbmcgPSBvcHRpb25zLmxuZyB8fCB0aGlzLmxhbmd1YWdlO1xuICAgIHZhciBhcHBlbmROYW1lc3BhY2VUb0NJTW9kZSA9IG9wdGlvbnMuYXBwZW5kTmFtZXNwYWNlVG9DSU1vZGUgfHwgdGhpcy5vcHRpb25zLmFwcGVuZE5hbWVzcGFjZVRvQ0lNb2RlO1xuICAgIGlmIChsbmcgJiYgbG5nLnRvTG93ZXJDYXNlKCkgPT09ICdjaW1vZGUnKSB7XG4gICAgICBpZiAoYXBwZW5kTmFtZXNwYWNlVG9DSU1vZGUpIHtcbiAgICAgICAgdmFyIG5zU2VwYXJhdG9yID0gb3B0aW9ucy5uc1NlcGFyYXRvciB8fCB0aGlzLm9wdGlvbnMubnNTZXBhcmF0b3I7XG4gICAgICAgIHJldHVybiBuYW1lc3BhY2UgKyBuc1NlcGFyYXRvciArIGtleTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGtleTtcbiAgICB9XG5cbiAgICAvLyByZXNvbHZlIGZyb20gc3RvcmVcbiAgICB2YXIgcmVzID0gdGhpcy5yZXNvbHZlKGtleXMsIG9wdGlvbnMpO1xuXG4gICAgdmFyIHJlc1R5cGUgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmFwcGx5KHJlcyk7XG4gICAgdmFyIG5vT2JqZWN0ID0gWydbb2JqZWN0IE51bWJlcl0nLCAnW29iamVjdCBGdW5jdGlvbl0nLCAnW29iamVjdCBSZWdFeHBdJ107XG4gICAgdmFyIGpvaW5BcnJheXMgPSBvcHRpb25zLmpvaW5BcnJheXMgIT09IHVuZGVmaW5lZCA/IG9wdGlvbnMuam9pbkFycmF5cyA6IHRoaXMub3B0aW9ucy5qb2luQXJyYXlzO1xuXG4gICAgLy8gb2JqZWN0XG4gICAgaWYgKHJlcyAmJiB0eXBlb2YgcmVzICE9PSAnc3RyaW5nJyAmJiBub09iamVjdC5pbmRleE9mKHJlc1R5cGUpIDwgMCAmJiAhKGpvaW5BcnJheXMgJiYgcmVzVHlwZSA9PT0gJ1tvYmplY3QgQXJyYXldJykpIHtcbiAgICAgIGlmICghb3B0aW9ucy5yZXR1cm5PYmplY3RzICYmICF0aGlzLm9wdGlvbnMucmV0dXJuT2JqZWN0cykge1xuICAgICAgICB0aGlzLmxvZ2dlci53YXJuKCdhY2Nlc3NpbmcgYW4gb2JqZWN0IC0gYnV0IHJldHVybk9iamVjdHMgb3B0aW9ucyBpcyBub3QgZW5hYmxlZCEnKTtcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5yZXR1cm5lZE9iamVjdEhhbmRsZXIgPyB0aGlzLm9wdGlvbnMucmV0dXJuZWRPYmplY3RIYW5kbGVyKGtleSwgcmVzLCBvcHRpb25zKSA6ICdrZXkgXFwnJyArIGtleSArICcgKCcgKyB0aGlzLmxhbmd1YWdlICsgJylcXCcgcmV0dXJuZWQgYW4gb2JqZWN0IGluc3RlYWQgb2Ygc3RyaW5nLic7XG4gICAgICB9XG5cbiAgICAgIC8vIGlmIHdlIGdvdCBhIHNlcGFyYXRvciB3ZSBsb29wIG92ZXIgY2hpbGRyZW4gLSBlbHNlIHdlIGp1c3QgcmV0dXJuIG9iamVjdCBhcyBpc1xuICAgICAgLy8gYXMgaGF2aW5nIGl0IHNldCB0byBmYWxzZSBtZWFucyBubyBoaWVyYXJjaHkgc28gbm8gbG9va3VwIGZvciBuZXN0ZWQgdmFsdWVzXG4gICAgICBpZiAob3B0aW9ucy5rZXlTZXBhcmF0b3IgfHwgdGhpcy5vcHRpb25zLmtleVNlcGFyYXRvcikge1xuICAgICAgICB2YXIgY29weSQkMSA9IHJlc1R5cGUgPT09ICdbb2JqZWN0IEFycmF5XScgPyBbXSA6IHt9OyAvLyBhcHBseSBjaGlsZCB0cmFuc2xhdGlvbiBvbiBhIGNvcHlcblxuICAgICAgICAvKiBlc2xpbnQgbm8tcmVzdHJpY3RlZC1zeW50YXg6IDAgKi9cbiAgICAgICAgZm9yICh2YXIgbSBpbiByZXMpIHtcbiAgICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHJlcywgbSkpIHtcbiAgICAgICAgICAgIGNvcHkkJDFbbV0gPSB0aGlzLnRyYW5zbGF0ZSgnJyArIGtleSArIGtleVNlcGFyYXRvciArIG0sIF9leHRlbmRzKHt9LCBvcHRpb25zLCB7IGpvaW5BcnJheXM6IGZhbHNlLCBuczogbmFtZXNwYWNlcyB9KSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJlcyA9IGNvcHkkJDE7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChqb2luQXJyYXlzICYmIHJlc1R5cGUgPT09ICdbb2JqZWN0IEFycmF5XScpIHtcbiAgICAgIC8vIGFycmF5IHNwZWNpYWwgdHJlYXRtZW50XG4gICAgICByZXMgPSByZXMuam9pbihqb2luQXJyYXlzKTtcbiAgICAgIGlmIChyZXMpIHJlcyA9IHRoaXMuZXh0ZW5kVHJhbnNsYXRpb24ocmVzLCBrZXksIG9wdGlvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBzdHJpbmcsIGVtcHR5IG9yIG51bGxcbiAgICAgIHZhciB1c2VkRGVmYXVsdCA9IGZhbHNlO1xuICAgICAgdmFyIHVzZWRLZXkgPSBmYWxzZTtcblxuICAgICAgLy8gZmFsbGJhY2sgdmFsdWVcbiAgICAgIGlmICghdGhpcy5pc1ZhbGlkTG9va3VwKHJlcykgJiYgb3B0aW9ucy5kZWZhdWx0VmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB1c2VkRGVmYXVsdCA9IHRydWU7XG4gICAgICAgIHJlcyA9IG9wdGlvbnMuZGVmYXVsdFZhbHVlO1xuICAgICAgfVxuICAgICAgaWYgKCF0aGlzLmlzVmFsaWRMb29rdXAocmVzKSkge1xuICAgICAgICB1c2VkS2V5ID0gdHJ1ZTtcbiAgICAgICAgcmVzID0ga2V5O1xuICAgICAgfVxuXG4gICAgICAvLyBzYXZlIG1pc3NpbmdcbiAgICAgIGlmICh1c2VkS2V5IHx8IHVzZWREZWZhdWx0KSB7XG4gICAgICAgIHRoaXMubG9nZ2VyLmxvZygnbWlzc2luZ0tleScsIGxuZywgbmFtZXNwYWNlLCBrZXksIHJlcyk7XG5cbiAgICAgICAgdmFyIGxuZ3MgPSBbXTtcbiAgICAgICAgdmFyIGZhbGxiYWNrTG5ncyA9IHRoaXMubGFuZ3VhZ2VVdGlscy5nZXRGYWxsYmFja0NvZGVzKHRoaXMub3B0aW9ucy5mYWxsYmFja0xuZywgb3B0aW9ucy5sbmcgfHwgdGhpcy5sYW5ndWFnZSk7XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuc2F2ZU1pc3NpbmdUbyA9PT0gJ2ZhbGxiYWNrJyAmJiBmYWxsYmFja0xuZ3MgJiYgZmFsbGJhY2tMbmdzWzBdKSB7XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmYWxsYmFja0xuZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxuZ3MucHVzaChmYWxsYmFja0xuZ3NbaV0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLm9wdGlvbnMuc2F2ZU1pc3NpbmdUbyA9PT0gJ2FsbCcpIHtcbiAgICAgICAgICBsbmdzID0gdGhpcy5sYW5ndWFnZVV0aWxzLnRvUmVzb2x2ZUhpZXJhcmNoeShvcHRpb25zLmxuZyB8fCB0aGlzLmxhbmd1YWdlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsbmdzLnB1c2gob3B0aW9ucy5sbmcgfHwgdGhpcy5sYW5ndWFnZSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLnNhdmVNaXNzaW5nKSB7XG4gICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5taXNzaW5nS2V5SGFuZGxlcikge1xuICAgICAgICAgICAgdGhpcy5vcHRpb25zLm1pc3NpbmdLZXlIYW5kbGVyKGxuZ3MsIG5hbWVzcGFjZSwga2V5LCByZXMpO1xuICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5iYWNrZW5kQ29ubmVjdG9yICYmIHRoaXMuYmFja2VuZENvbm5lY3Rvci5zYXZlTWlzc2luZykge1xuICAgICAgICAgICAgdGhpcy5iYWNrZW5kQ29ubmVjdG9yLnNhdmVNaXNzaW5nKGxuZ3MsIG5hbWVzcGFjZSwga2V5LCByZXMpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZW1pdCgnbWlzc2luZ0tleScsIGxuZ3MsIG5hbWVzcGFjZSwga2V5LCByZXMpO1xuICAgICAgfVxuXG4gICAgICAvLyBleHRlbmRcbiAgICAgIHJlcyA9IHRoaXMuZXh0ZW5kVHJhbnNsYXRpb24ocmVzLCBrZXksIG9wdGlvbnMpO1xuXG4gICAgICAvLyBhcHBlbmQgbmFtZXNwYWNlIGlmIHN0aWxsIGtleVxuICAgICAgaWYgKHVzZWRLZXkgJiYgcmVzID09PSBrZXkgJiYgdGhpcy5vcHRpb25zLmFwcGVuZE5hbWVzcGFjZVRvTWlzc2luZ0tleSkgcmVzID0gbmFtZXNwYWNlICsgJzonICsga2V5O1xuXG4gICAgICAvLyBwYXJzZU1pc3NpbmdLZXlIYW5kbGVyXG4gICAgICBpZiAodXNlZEtleSAmJiB0aGlzLm9wdGlvbnMucGFyc2VNaXNzaW5nS2V5SGFuZGxlcikgcmVzID0gdGhpcy5vcHRpb25zLnBhcnNlTWlzc2luZ0tleUhhbmRsZXIocmVzKTtcbiAgICB9XG5cbiAgICAvLyByZXR1cm5cbiAgICByZXR1cm4gcmVzO1xuICB9O1xuXG4gIFRyYW5zbGF0b3IucHJvdG90eXBlLmV4dGVuZFRyYW5zbGF0aW9uID0gZnVuY3Rpb24gZXh0ZW5kVHJhbnNsYXRpb24ocmVzLCBrZXksIG9wdGlvbnMpIHtcbiAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgIGlmIChvcHRpb25zLmludGVycG9sYXRpb24pIHRoaXMuaW50ZXJwb2xhdG9yLmluaXQoX2V4dGVuZHMoe30sIG9wdGlvbnMsIHsgaW50ZXJwb2xhdGlvbjogX2V4dGVuZHMoe30sIHRoaXMub3B0aW9ucy5pbnRlcnBvbGF0aW9uLCBvcHRpb25zLmludGVycG9sYXRpb24pIH0pKTtcblxuICAgIC8vIGludGVycG9sYXRlXG4gICAgdmFyIGRhdGEgPSBvcHRpb25zLnJlcGxhY2UgJiYgdHlwZW9mIG9wdGlvbnMucmVwbGFjZSAhPT0gJ3N0cmluZycgPyBvcHRpb25zLnJlcGxhY2UgOiBvcHRpb25zO1xuICAgIGlmICh0aGlzLm9wdGlvbnMuaW50ZXJwb2xhdGlvbi5kZWZhdWx0VmFyaWFibGVzKSBkYXRhID0gX2V4dGVuZHMoe30sIHRoaXMub3B0aW9ucy5pbnRlcnBvbGF0aW9uLmRlZmF1bHRWYXJpYWJsZXMsIGRhdGEpO1xuICAgIHJlcyA9IHRoaXMuaW50ZXJwb2xhdG9yLmludGVycG9sYXRlKHJlcywgZGF0YSwgb3B0aW9ucy5sbmcgfHwgdGhpcy5sYW5ndWFnZSk7XG5cbiAgICAvLyBuZXN0aW5nXG4gICAgaWYgKG9wdGlvbnMubmVzdCAhPT0gZmFsc2UpIHJlcyA9IHRoaXMuaW50ZXJwb2xhdG9yLm5lc3QocmVzLCBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gX3RoaXMyLnRyYW5zbGF0ZS5hcHBseShfdGhpczIsIGFyZ3VtZW50cyk7XG4gICAgfSwgb3B0aW9ucyk7XG5cbiAgICBpZiAob3B0aW9ucy5pbnRlcnBvbGF0aW9uKSB0aGlzLmludGVycG9sYXRvci5yZXNldCgpO1xuXG4gICAgLy8gcG9zdCBwcm9jZXNzXG4gICAgdmFyIHBvc3RQcm9jZXNzID0gb3B0aW9ucy5wb3N0UHJvY2VzcyB8fCB0aGlzLm9wdGlvbnMucG9zdFByb2Nlc3M7XG4gICAgdmFyIHBvc3RQcm9jZXNzb3JOYW1lcyA9IHR5cGVvZiBwb3N0UHJvY2VzcyA9PT0gJ3N0cmluZycgPyBbcG9zdFByb2Nlc3NdIDogcG9zdFByb2Nlc3M7XG5cbiAgICBpZiAocmVzICE9PSB1bmRlZmluZWQgJiYgcG9zdFByb2Nlc3Nvck5hbWVzICYmIHBvc3RQcm9jZXNzb3JOYW1lcy5sZW5ndGggJiYgb3B0aW9ucy5hcHBseVBvc3RQcm9jZXNzb3IgIT09IGZhbHNlKSB7XG4gICAgICByZXMgPSBwb3N0UHJvY2Vzc29yLmhhbmRsZShwb3N0UHJvY2Vzc29yTmFtZXMsIHJlcywga2V5LCBvcHRpb25zLCB0aGlzKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzO1xuICB9O1xuXG4gIFRyYW5zbGF0b3IucHJvdG90eXBlLnJlc29sdmUgPSBmdW5jdGlvbiByZXNvbHZlKGtleXMpIHtcbiAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fTtcblxuICAgIHZhciBmb3VuZCA9IHZvaWQgMDtcblxuICAgIGlmICh0eXBlb2Yga2V5cyA9PT0gJ3N0cmluZycpIGtleXMgPSBba2V5c107XG5cbiAgICAvLyBmb3JFYWNoIHBvc3NpYmxlIGtleVxuICAgIGtleXMuZm9yRWFjaChmdW5jdGlvbiAoaykge1xuICAgICAgaWYgKF90aGlzMy5pc1ZhbGlkTG9va3VwKGZvdW5kKSkgcmV0dXJuO1xuXG4gICAgICB2YXIgZXh0cmFjdGVkID0gX3RoaXMzLmV4dHJhY3RGcm9tS2V5KGssIG9wdGlvbnMpO1xuICAgICAgdmFyIGtleSA9IGV4dHJhY3RlZC5rZXk7XG4gICAgICB2YXIgbmFtZXNwYWNlcyA9IGV4dHJhY3RlZC5uYW1lc3BhY2VzO1xuICAgICAgaWYgKF90aGlzMy5vcHRpb25zLmZhbGxiYWNrTlMpIG5hbWVzcGFjZXMgPSBuYW1lc3BhY2VzLmNvbmNhdChfdGhpczMub3B0aW9ucy5mYWxsYmFja05TKTtcblxuICAgICAgdmFyIG5lZWRzUGx1cmFsSGFuZGxpbmcgPSBvcHRpb25zLmNvdW50ICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIG9wdGlvbnMuY291bnQgIT09ICdzdHJpbmcnO1xuICAgICAgdmFyIG5lZWRzQ29udGV4dEhhbmRsaW5nID0gb3B0aW9ucy5jb250ZXh0ICE9PSB1bmRlZmluZWQgJiYgdHlwZW9mIG9wdGlvbnMuY29udGV4dCA9PT0gJ3N0cmluZycgJiYgb3B0aW9ucy5jb250ZXh0ICE9PSAnJztcblxuICAgICAgdmFyIGNvZGVzID0gb3B0aW9ucy5sbmdzID8gb3B0aW9ucy5sbmdzIDogX3RoaXMzLmxhbmd1YWdlVXRpbHMudG9SZXNvbHZlSGllcmFyY2h5KG9wdGlvbnMubG5nIHx8IF90aGlzMy5sYW5ndWFnZSk7XG5cbiAgICAgIG5hbWVzcGFjZXMuZm9yRWFjaChmdW5jdGlvbiAobnMpIHtcbiAgICAgICAgaWYgKF90aGlzMy5pc1ZhbGlkTG9va3VwKGZvdW5kKSkgcmV0dXJuO1xuXG4gICAgICAgIGNvZGVzLmZvckVhY2goZnVuY3Rpb24gKGNvZGUpIHtcbiAgICAgICAgICBpZiAoX3RoaXMzLmlzVmFsaWRMb29rdXAoZm91bmQpKSByZXR1cm47XG5cbiAgICAgICAgICB2YXIgZmluYWxLZXkgPSBrZXk7XG4gICAgICAgICAgdmFyIGZpbmFsS2V5cyA9IFtmaW5hbEtleV07XG5cbiAgICAgICAgICB2YXIgcGx1cmFsU3VmZml4ID0gdm9pZCAwO1xuICAgICAgICAgIGlmIChuZWVkc1BsdXJhbEhhbmRsaW5nKSBwbHVyYWxTdWZmaXggPSBfdGhpczMucGx1cmFsUmVzb2x2ZXIuZ2V0U3VmZml4KGNvZGUsIG9wdGlvbnMuY291bnQpO1xuXG4gICAgICAgICAgLy8gZmFsbGJhY2sgZm9yIHBsdXJhbCBpZiBjb250ZXh0IG5vdCBmb3VuZFxuICAgICAgICAgIGlmIChuZWVkc1BsdXJhbEhhbmRsaW5nICYmIG5lZWRzQ29udGV4dEhhbmRsaW5nKSBmaW5hbEtleXMucHVzaChmaW5hbEtleSArIHBsdXJhbFN1ZmZpeCk7XG5cbiAgICAgICAgICAvLyBnZXQga2V5IGZvciBjb250ZXh0IGlmIG5lZWRlZFxuICAgICAgICAgIGlmIChuZWVkc0NvbnRleHRIYW5kbGluZykgZmluYWxLZXlzLnB1c2goZmluYWxLZXkgKz0gJycgKyBfdGhpczMub3B0aW9ucy5jb250ZXh0U2VwYXJhdG9yICsgb3B0aW9ucy5jb250ZXh0KTtcblxuICAgICAgICAgIC8vIGdldCBrZXkgZm9yIHBsdXJhbCBpZiBuZWVkZWRcbiAgICAgICAgICBpZiAobmVlZHNQbHVyYWxIYW5kbGluZykgZmluYWxLZXlzLnB1c2goZmluYWxLZXkgKz0gcGx1cmFsU3VmZml4KTtcblxuICAgICAgICAgIC8vIGl0ZXJhdGUgb3ZlciBmaW5hbEtleXMgc3RhcnRpbmcgd2l0aCBtb3N0IHNwZWNpZmljIHBsdXJhbGtleSAoLT4gY29udGV4dGtleSBvbmx5KSAtPiBzaW5ndWxhcmtleSBvbmx5XG4gICAgICAgICAgdmFyIHBvc3NpYmxlS2V5ID0gdm9pZCAwO1xuICAgICAgICAgIC8qIGVzbGludCBuby1jb25kLWFzc2lnbjogMCAqL1xuICAgICAgICAgIHdoaWxlIChwb3NzaWJsZUtleSA9IGZpbmFsS2V5cy5wb3AoKSkge1xuICAgICAgICAgICAgaWYgKCFfdGhpczMuaXNWYWxpZExvb2t1cChmb3VuZCkpIHtcbiAgICAgICAgICAgICAgZm91bmQgPSBfdGhpczMuZ2V0UmVzb3VyY2UoY29kZSwgbnMsIHBvc3NpYmxlS2V5LCBvcHRpb25zKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gZm91bmQ7XG4gIH07XG5cbiAgVHJhbnNsYXRvci5wcm90b3R5cGUuaXNWYWxpZExvb2t1cCA9IGZ1bmN0aW9uIGlzVmFsaWRMb29rdXAocmVzKSB7XG4gICAgcmV0dXJuIHJlcyAhPT0gdW5kZWZpbmVkICYmICEoIXRoaXMub3B0aW9ucy5yZXR1cm5OdWxsICYmIHJlcyA9PT0gbnVsbCkgJiYgISghdGhpcy5vcHRpb25zLnJldHVybkVtcHR5U3RyaW5nICYmIHJlcyA9PT0gJycpO1xuICB9O1xuXG4gIFRyYW5zbGF0b3IucHJvdG90eXBlLmdldFJlc291cmNlID0gZnVuY3Rpb24gZ2V0UmVzb3VyY2UoY29kZSwgbnMsIGtleSkge1xuICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiB7fTtcblxuICAgIHJldHVybiB0aGlzLnJlc291cmNlU3RvcmUuZ2V0UmVzb3VyY2UoY29kZSwgbnMsIGtleSwgb3B0aW9ucyk7XG4gIH07XG5cbiAgcmV0dXJuIFRyYW5zbGF0b3I7XG59KEV2ZW50RW1pdHRlcik7XG5cbmZ1bmN0aW9uIGNhcGl0YWxpemUoc3RyaW5nKSB7XG4gIHJldHVybiBzdHJpbmcuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzdHJpbmcuc2xpY2UoMSk7XG59XG5cbnZhciBMYW5ndWFnZVV0aWwgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIExhbmd1YWdlVXRpbChvcHRpb25zKSB7XG4gICAgY2xhc3NDYWxsQ2hlY2sodGhpcywgTGFuZ3VhZ2VVdGlsKTtcblxuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG5cbiAgICB0aGlzLndoaXRlbGlzdCA9IHRoaXMub3B0aW9ucy53aGl0ZWxpc3QgfHwgZmFsc2U7XG4gICAgdGhpcy5sb2dnZXIgPSBiYXNlTG9nZ2VyLmNyZWF0ZSgnbGFuZ3VhZ2VVdGlscycpO1xuICB9XG5cbiAgTGFuZ3VhZ2VVdGlsLnByb3RvdHlwZS5nZXRTY3JpcHRQYXJ0RnJvbUNvZGUgPSBmdW5jdGlvbiBnZXRTY3JpcHRQYXJ0RnJvbUNvZGUoY29kZSkge1xuICAgIGlmICghY29kZSB8fCBjb2RlLmluZGV4T2YoJy0nKSA8IDApIHJldHVybiBudWxsO1xuXG4gICAgdmFyIHAgPSBjb2RlLnNwbGl0KCctJyk7XG4gICAgaWYgKHAubGVuZ3RoID09PSAyKSByZXR1cm4gbnVsbDtcbiAgICBwLnBvcCgpO1xuICAgIHJldHVybiB0aGlzLmZvcm1hdExhbmd1YWdlQ29kZShwLmpvaW4oJy0nKSk7XG4gIH07XG5cbiAgTGFuZ3VhZ2VVdGlsLnByb3RvdHlwZS5nZXRMYW5ndWFnZVBhcnRGcm9tQ29kZSA9IGZ1bmN0aW9uIGdldExhbmd1YWdlUGFydEZyb21Db2RlKGNvZGUpIHtcbiAgICBpZiAoIWNvZGUgfHwgY29kZS5pbmRleE9mKCctJykgPCAwKSByZXR1cm4gY29kZTtcblxuICAgIHZhciBwID0gY29kZS5zcGxpdCgnLScpO1xuICAgIHJldHVybiB0aGlzLmZvcm1hdExhbmd1YWdlQ29kZShwWzBdKTtcbiAgfTtcblxuICBMYW5ndWFnZVV0aWwucHJvdG90eXBlLmZvcm1hdExhbmd1YWdlQ29kZSA9IGZ1bmN0aW9uIGZvcm1hdExhbmd1YWdlQ29kZShjb2RlKSB7XG4gICAgLy8gaHR0cDovL3d3dy5pYW5hLm9yZy9hc3NpZ25tZW50cy9sYW5ndWFnZS10YWdzL2xhbmd1YWdlLXRhZ3MueGh0bWxcbiAgICBpZiAodHlwZW9mIGNvZGUgPT09ICdzdHJpbmcnICYmIGNvZGUuaW5kZXhPZignLScpID4gLTEpIHtcbiAgICAgIHZhciBzcGVjaWFsQ2FzZXMgPSBbJ2hhbnMnLCAnaGFudCcsICdsYXRuJywgJ2N5cmwnLCAnY2FucycsICdtb25nJywgJ2FyYWInXTtcbiAgICAgIHZhciBwID0gY29kZS5zcGxpdCgnLScpO1xuXG4gICAgICBpZiAodGhpcy5vcHRpb25zLmxvd2VyQ2FzZUxuZykge1xuICAgICAgICBwID0gcC5tYXAoZnVuY3Rpb24gKHBhcnQpIHtcbiAgICAgICAgICByZXR1cm4gcGFydC50b0xvd2VyQ2FzZSgpO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSBpZiAocC5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgcFswXSA9IHBbMF0udG9Mb3dlckNhc2UoKTtcbiAgICAgICAgcFsxXSA9IHBbMV0udG9VcHBlckNhc2UoKTtcblxuICAgICAgICBpZiAoc3BlY2lhbENhc2VzLmluZGV4T2YocFsxXS50b0xvd2VyQ2FzZSgpKSA+IC0xKSBwWzFdID0gY2FwaXRhbGl6ZShwWzFdLnRvTG93ZXJDYXNlKCkpO1xuICAgICAgfSBlbHNlIGlmIChwLmxlbmd0aCA9PT0gMykge1xuICAgICAgICBwWzBdID0gcFswXS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgICAgIC8vIGlmIGxlbmdodCAyIGd1ZXNzIGl0J3MgYSBjb3VudHJ5XG4gICAgICAgIGlmIChwWzFdLmxlbmd0aCA9PT0gMikgcFsxXSA9IHBbMV0udG9VcHBlckNhc2UoKTtcbiAgICAgICAgaWYgKHBbMF0gIT09ICdzZ24nICYmIHBbMl0ubGVuZ3RoID09PSAyKSBwWzJdID0gcFsyXS50b1VwcGVyQ2FzZSgpO1xuXG4gICAgICAgIGlmIChzcGVjaWFsQ2FzZXMuaW5kZXhPZihwWzFdLnRvTG93ZXJDYXNlKCkpID4gLTEpIHBbMV0gPSBjYXBpdGFsaXplKHBbMV0udG9Mb3dlckNhc2UoKSk7XG4gICAgICAgIGlmIChzcGVjaWFsQ2FzZXMuaW5kZXhPZihwWzJdLnRvTG93ZXJDYXNlKCkpID4gLTEpIHBbMl0gPSBjYXBpdGFsaXplKHBbMl0udG9Mb3dlckNhc2UoKSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBwLmpvaW4oJy0nKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5vcHRpb25zLmNsZWFuQ29kZSB8fCB0aGlzLm9wdGlvbnMubG93ZXJDYXNlTG5nID8gY29kZS50b0xvd2VyQ2FzZSgpIDogY29kZTtcbiAgfTtcblxuICBMYW5ndWFnZVV0aWwucHJvdG90eXBlLmlzV2hpdGVsaXN0ZWQgPSBmdW5jdGlvbiBpc1doaXRlbGlzdGVkKGNvZGUpIHtcbiAgICBpZiAodGhpcy5vcHRpb25zLmxvYWQgPT09ICdsYW5ndWFnZU9ubHknIHx8IHRoaXMub3B0aW9ucy5ub25FeHBsaWNpdFdoaXRlbGlzdCkge1xuICAgICAgY29kZSA9IHRoaXMuZ2V0TGFuZ3VhZ2VQYXJ0RnJvbUNvZGUoY29kZSk7XG4gICAgfVxuICAgIHJldHVybiAhdGhpcy53aGl0ZWxpc3QgfHwgIXRoaXMud2hpdGVsaXN0Lmxlbmd0aCB8fCB0aGlzLndoaXRlbGlzdC5pbmRleE9mKGNvZGUpID4gLTE7XG4gIH07XG5cbiAgTGFuZ3VhZ2VVdGlsLnByb3RvdHlwZS5nZXRGYWxsYmFja0NvZGVzID0gZnVuY3Rpb24gZ2V0RmFsbGJhY2tDb2RlcyhmYWxsYmFja3MsIGNvZGUpIHtcbiAgICBpZiAoIWZhbGxiYWNrcykgcmV0dXJuIFtdO1xuICAgIGlmICh0eXBlb2YgZmFsbGJhY2tzID09PSAnc3RyaW5nJykgZmFsbGJhY2tzID0gW2ZhbGxiYWNrc107XG4gICAgaWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuYXBwbHkoZmFsbGJhY2tzKSA9PT0gJ1tvYmplY3QgQXJyYXldJykgcmV0dXJuIGZhbGxiYWNrcztcblxuICAgIGlmICghY29kZSkgcmV0dXJuIGZhbGxiYWNrcy5kZWZhdWx0IHx8IFtdO1xuXG4gICAgLy8gYXN1bWUgd2UgaGF2ZSBhbiBvYmplY3QgZGVmaW5pbmcgZmFsbGJhY2tzXG4gICAgdmFyIGZvdW5kID0gZmFsbGJhY2tzW2NvZGVdO1xuICAgIGlmICghZm91bmQpIGZvdW5kID0gZmFsbGJhY2tzW3RoaXMuZ2V0U2NyaXB0UGFydEZyb21Db2RlKGNvZGUpXTtcbiAgICBpZiAoIWZvdW5kKSBmb3VuZCA9IGZhbGxiYWNrc1t0aGlzLmZvcm1hdExhbmd1YWdlQ29kZShjb2RlKV07XG4gICAgaWYgKCFmb3VuZCkgZm91bmQgPSBmYWxsYmFja3MuZGVmYXVsdDtcblxuICAgIHJldHVybiBmb3VuZCB8fCBbXTtcbiAgfTtcblxuICBMYW5ndWFnZVV0aWwucHJvdG90eXBlLnRvUmVzb2x2ZUhpZXJhcmNoeSA9IGZ1bmN0aW9uIHRvUmVzb2x2ZUhpZXJhcmNoeShjb2RlLCBmYWxsYmFja0NvZGUpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgdmFyIGZhbGxiYWNrQ29kZXMgPSB0aGlzLmdldEZhbGxiYWNrQ29kZXMoZmFsbGJhY2tDb2RlIHx8IHRoaXMub3B0aW9ucy5mYWxsYmFja0xuZyB8fCBbXSwgY29kZSk7XG5cbiAgICB2YXIgY29kZXMgPSBbXTtcbiAgICB2YXIgYWRkQ29kZSA9IGZ1bmN0aW9uIGFkZENvZGUoYykge1xuICAgICAgaWYgKCFjKSByZXR1cm47XG4gICAgICBpZiAoX3RoaXMuaXNXaGl0ZWxpc3RlZChjKSkge1xuICAgICAgICBjb2Rlcy5wdXNoKGMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgX3RoaXMubG9nZ2VyLndhcm4oJ3JlamVjdGluZyBub24td2hpdGVsaXN0ZWQgbGFuZ3VhZ2UgY29kZTogJyArIGMpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBpZiAodHlwZW9mIGNvZGUgPT09ICdzdHJpbmcnICYmIGNvZGUuaW5kZXhPZignLScpID4gLTEpIHtcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMubG9hZCAhPT0gJ2xhbmd1YWdlT25seScpIGFkZENvZGUodGhpcy5mb3JtYXRMYW5ndWFnZUNvZGUoY29kZSkpO1xuICAgICAgaWYgKHRoaXMub3B0aW9ucy5sb2FkICE9PSAnbGFuZ3VhZ2VPbmx5JyAmJiB0aGlzLm9wdGlvbnMubG9hZCAhPT0gJ2N1cnJlbnRPbmx5JykgYWRkQ29kZSh0aGlzLmdldFNjcmlwdFBhcnRGcm9tQ29kZShjb2RlKSk7XG4gICAgICBpZiAodGhpcy5vcHRpb25zLmxvYWQgIT09ICdjdXJyZW50T25seScpIGFkZENvZGUodGhpcy5nZXRMYW5ndWFnZVBhcnRGcm9tQ29kZShjb2RlKSk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgY29kZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGFkZENvZGUodGhpcy5mb3JtYXRMYW5ndWFnZUNvZGUoY29kZSkpO1xuICAgIH1cblxuICAgIGZhbGxiYWNrQ29kZXMuZm9yRWFjaChmdW5jdGlvbiAoZmMpIHtcbiAgICAgIGlmIChjb2Rlcy5pbmRleE9mKGZjKSA8IDApIGFkZENvZGUoX3RoaXMuZm9ybWF0TGFuZ3VhZ2VDb2RlKGZjKSk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gY29kZXM7XG4gIH07XG5cbiAgcmV0dXJuIExhbmd1YWdlVXRpbDtcbn0oKTtcblxuLy8gZGVmaW5pdGlvbiBodHRwOi8vdHJhbnNsYXRlLnNvdXJjZWZvcmdlLm5ldC93aWtpL2wxMG4vcGx1cmFsZm9ybXNcbi8qIGVzbGludC1kaXNhYmxlICovXG52YXIgc2V0cyA9IFt7IGxuZ3M6IFsnYWNoJywgJ2FrJywgJ2FtJywgJ2FybicsICdicicsICdmaWwnLCAnZ3VuJywgJ2xuJywgJ21mZScsICdtZycsICdtaScsICdvYycsICd0ZycsICd0aScsICd0cicsICd1eicsICd3YSddLCBucjogWzEsIDJdLCBmYzogMSB9LCB7IGxuZ3M6IFsnYWYnLCAnYW4nLCAnYXN0JywgJ2F6JywgJ2JnJywgJ2JuJywgJ2NhJywgJ2RhJywgJ2RlJywgJ2RldicsICdlbCcsICdlbicsICdlbycsICdlcycsICdlc19hcicsICdldCcsICdldScsICdmaScsICdmbycsICdmdXInLCAnZnknLCAnZ2wnLCAnZ3UnLCAnaGEnLCAnaGUnLCAnaGknLCAnaHUnLCAnaHknLCAnaWEnLCAnaXQnLCAna24nLCAna3UnLCAnbGInLCAnbWFpJywgJ21sJywgJ21uJywgJ21yJywgJ25haCcsICduYXAnLCAnbmInLCAnbmUnLCAnbmwnLCAnbm4nLCAnbm8nLCAnbnNvJywgJ3BhJywgJ3BhcCcsICdwbXMnLCAncHMnLCAncHQnLCAncHRfYnInLCAncm0nLCAnc2NvJywgJ3NlJywgJ3NpJywgJ3NvJywgJ3NvbicsICdzcScsICdzdicsICdzdycsICd0YScsICd0ZScsICd0aycsICd1cicsICd5byddLCBucjogWzEsIDJdLCBmYzogMiB9LCB7IGxuZ3M6IFsnYXknLCAnYm8nLCAnY2dnJywgJ2ZhJywgJ2lkJywgJ2phJywgJ2pibycsICdrYScsICdraycsICdrbScsICdrbycsICdreScsICdsbycsICdtcycsICdzYWgnLCAnc3UnLCAndGgnLCAndHQnLCAndWcnLCAndmknLCAnd28nLCAnemgnXSwgbnI6IFsxXSwgZmM6IDMgfSwgeyBsbmdzOiBbJ2JlJywgJ2JzJywgJ2R6JywgJ2hyJywgJ3J1JywgJ3NyJywgJ3VrJ10sIG5yOiBbMSwgMiwgNV0sIGZjOiA0IH0sIHsgbG5nczogWydhciddLCBucjogWzAsIDEsIDIsIDMsIDExLCAxMDBdLCBmYzogNSB9LCB7IGxuZ3M6IFsnY3MnLCAnc2snXSwgbnI6IFsxLCAyLCA1XSwgZmM6IDYgfSwgeyBsbmdzOiBbJ2NzYicsICdwbCddLCBucjogWzEsIDIsIDVdLCBmYzogNyB9LCB7IGxuZ3M6IFsnY3knXSwgbnI6IFsxLCAyLCAzLCA4XSwgZmM6IDggfSwgeyBsbmdzOiBbJ2ZyJ10sIG5yOiBbMSwgMl0sIGZjOiA5IH0sIHsgbG5nczogWydnYSddLCBucjogWzEsIDIsIDMsIDcsIDExXSwgZmM6IDEwIH0sIHsgbG5nczogWydnZCddLCBucjogWzEsIDIsIDMsIDIwXSwgZmM6IDExIH0sIHsgbG5nczogWydpcyddLCBucjogWzEsIDJdLCBmYzogMTIgfSwgeyBsbmdzOiBbJ2p2J10sIG5yOiBbMCwgMV0sIGZjOiAxMyB9LCB7IGxuZ3M6IFsna3cnXSwgbnI6IFsxLCAyLCAzLCA0XSwgZmM6IDE0IH0sIHsgbG5nczogWydsdCddLCBucjogWzEsIDIsIDEwXSwgZmM6IDE1IH0sIHsgbG5nczogWydsdiddLCBucjogWzEsIDIsIDBdLCBmYzogMTYgfSwgeyBsbmdzOiBbJ21rJ10sIG5yOiBbMSwgMl0sIGZjOiAxNyB9LCB7IGxuZ3M6IFsnbW5rJ10sIG5yOiBbMCwgMSwgMl0sIGZjOiAxOCB9LCB7IGxuZ3M6IFsnbXQnXSwgbnI6IFsxLCAyLCAxMSwgMjBdLCBmYzogMTkgfSwgeyBsbmdzOiBbJ29yJ10sIG5yOiBbMiwgMV0sIGZjOiAyIH0sIHsgbG5nczogWydybyddLCBucjogWzEsIDIsIDIwXSwgZmM6IDIwIH0sIHsgbG5nczogWydzbCddLCBucjogWzUsIDEsIDIsIDNdLCBmYzogMjEgfV07XG5cbnZhciBfcnVsZXNQbHVyYWxzVHlwZXMgPSB7XG4gIDE6IGZ1bmN0aW9uIF8obikge1xuICAgIHJldHVybiBOdW1iZXIobiA+IDEpO1xuICB9LFxuICAyOiBmdW5jdGlvbiBfKG4pIHtcbiAgICByZXR1cm4gTnVtYmVyKG4gIT0gMSk7XG4gIH0sXG4gIDM6IGZ1bmN0aW9uIF8obikge1xuICAgIHJldHVybiAwO1xuICB9LFxuICA0OiBmdW5jdGlvbiBfKG4pIHtcbiAgICByZXR1cm4gTnVtYmVyKG4gJSAxMCA9PSAxICYmIG4gJSAxMDAgIT0gMTEgPyAwIDogbiAlIDEwID49IDIgJiYgbiAlIDEwIDw9IDQgJiYgKG4gJSAxMDAgPCAxMCB8fCBuICUgMTAwID49IDIwKSA/IDEgOiAyKTtcbiAgfSxcbiAgNTogZnVuY3Rpb24gXyhuKSB7XG4gICAgcmV0dXJuIE51bWJlcihuID09PSAwID8gMCA6IG4gPT0gMSA/IDEgOiBuID09IDIgPyAyIDogbiAlIDEwMCA+PSAzICYmIG4gJSAxMDAgPD0gMTAgPyAzIDogbiAlIDEwMCA+PSAxMSA/IDQgOiA1KTtcbiAgfSxcbiAgNjogZnVuY3Rpb24gXyhuKSB7XG4gICAgcmV0dXJuIE51bWJlcihuID09IDEgPyAwIDogbiA+PSAyICYmIG4gPD0gNCA/IDEgOiAyKTtcbiAgfSxcbiAgNzogZnVuY3Rpb24gXyhuKSB7XG4gICAgcmV0dXJuIE51bWJlcihuID09IDEgPyAwIDogbiAlIDEwID49IDIgJiYgbiAlIDEwIDw9IDQgJiYgKG4gJSAxMDAgPCAxMCB8fCBuICUgMTAwID49IDIwKSA/IDEgOiAyKTtcbiAgfSxcbiAgODogZnVuY3Rpb24gXyhuKSB7XG4gICAgcmV0dXJuIE51bWJlcihuID09IDEgPyAwIDogbiA9PSAyID8gMSA6IG4gIT0gOCAmJiBuICE9IDExID8gMiA6IDMpO1xuICB9LFxuICA5OiBmdW5jdGlvbiBfKG4pIHtcbiAgICByZXR1cm4gTnVtYmVyKG4gPj0gMik7XG4gIH0sXG4gIDEwOiBmdW5jdGlvbiBfKG4pIHtcbiAgICByZXR1cm4gTnVtYmVyKG4gPT0gMSA/IDAgOiBuID09IDIgPyAxIDogbiA8IDcgPyAyIDogbiA8IDExID8gMyA6IDQpO1xuICB9LFxuICAxMTogZnVuY3Rpb24gXyhuKSB7XG4gICAgcmV0dXJuIE51bWJlcihuID09IDEgfHwgbiA9PSAxMSA/IDAgOiBuID09IDIgfHwgbiA9PSAxMiA/IDEgOiBuID4gMiAmJiBuIDwgMjAgPyAyIDogMyk7XG4gIH0sXG4gIDEyOiBmdW5jdGlvbiBfKG4pIHtcbiAgICByZXR1cm4gTnVtYmVyKG4gJSAxMCAhPSAxIHx8IG4gJSAxMDAgPT0gMTEpO1xuICB9LFxuICAxMzogZnVuY3Rpb24gXyhuKSB7XG4gICAgcmV0dXJuIE51bWJlcihuICE9PSAwKTtcbiAgfSxcbiAgMTQ6IGZ1bmN0aW9uIF8obikge1xuICAgIHJldHVybiBOdW1iZXIobiA9PSAxID8gMCA6IG4gPT0gMiA/IDEgOiBuID09IDMgPyAyIDogMyk7XG4gIH0sXG4gIDE1OiBmdW5jdGlvbiBfKG4pIHtcbiAgICByZXR1cm4gTnVtYmVyKG4gJSAxMCA9PSAxICYmIG4gJSAxMDAgIT0gMTEgPyAwIDogbiAlIDEwID49IDIgJiYgKG4gJSAxMDAgPCAxMCB8fCBuICUgMTAwID49IDIwKSA/IDEgOiAyKTtcbiAgfSxcbiAgMTY6IGZ1bmN0aW9uIF8obikge1xuICAgIHJldHVybiBOdW1iZXIobiAlIDEwID09IDEgJiYgbiAlIDEwMCAhPSAxMSA/IDAgOiBuICE9PSAwID8gMSA6IDIpO1xuICB9LFxuICAxNzogZnVuY3Rpb24gXyhuKSB7XG4gICAgcmV0dXJuIE51bWJlcihuID09IDEgfHwgbiAlIDEwID09IDEgPyAwIDogMSk7XG4gIH0sXG4gIDE4OiBmdW5jdGlvbiBfKG4pIHtcbiAgICByZXR1cm4gTnVtYmVyKG4gPT0gMCA/IDAgOiBuID09IDEgPyAxIDogMik7XG4gIH0sXG4gIDE5OiBmdW5jdGlvbiBfKG4pIHtcbiAgICByZXR1cm4gTnVtYmVyKG4gPT0gMSA/IDAgOiBuID09PSAwIHx8IG4gJSAxMDAgPiAxICYmIG4gJSAxMDAgPCAxMSA/IDEgOiBuICUgMTAwID4gMTAgJiYgbiAlIDEwMCA8IDIwID8gMiA6IDMpO1xuICB9LFxuICAyMDogZnVuY3Rpb24gXyhuKSB7XG4gICAgcmV0dXJuIE51bWJlcihuID09IDEgPyAwIDogbiA9PT0gMCB8fCBuICUgMTAwID4gMCAmJiBuICUgMTAwIDwgMjAgPyAxIDogMik7XG4gIH0sXG4gIDIxOiBmdW5jdGlvbiBfKG4pIHtcbiAgICByZXR1cm4gTnVtYmVyKG4gJSAxMDAgPT0gMSA/IDEgOiBuICUgMTAwID09IDIgPyAyIDogbiAlIDEwMCA9PSAzIHx8IG4gJSAxMDAgPT0gNCA/IDMgOiAwKTtcbiAgfVxufTtcbi8qIGVzbGludC1lbmFibGUgKi9cblxuZnVuY3Rpb24gY3JlYXRlUnVsZXMoKSB7XG4gIHZhciBydWxlcyA9IHt9O1xuICBzZXRzLmZvckVhY2goZnVuY3Rpb24gKHNldCQkMSkge1xuICAgIHNldCQkMS5sbmdzLmZvckVhY2goZnVuY3Rpb24gKGwpIHtcbiAgICAgIHJ1bGVzW2xdID0ge1xuICAgICAgICBudW1iZXJzOiBzZXQkJDEubnIsXG4gICAgICAgIHBsdXJhbHM6IF9ydWxlc1BsdXJhbHNUeXBlc1tzZXQkJDEuZmNdXG4gICAgICB9O1xuICAgIH0pO1xuICB9KTtcbiAgcmV0dXJuIHJ1bGVzO1xufVxuXG52YXIgUGx1cmFsUmVzb2x2ZXIgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIFBsdXJhbFJlc29sdmVyKGxhbmd1YWdlVXRpbHMpIHtcbiAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307XG4gICAgY2xhc3NDYWxsQ2hlY2sodGhpcywgUGx1cmFsUmVzb2x2ZXIpO1xuXG4gICAgdGhpcy5sYW5ndWFnZVV0aWxzID0gbGFuZ3VhZ2VVdGlscztcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuXG4gICAgdGhpcy5sb2dnZXIgPSBiYXNlTG9nZ2VyLmNyZWF0ZSgncGx1cmFsUmVzb2x2ZXInKTtcblxuICAgIHRoaXMucnVsZXMgPSBjcmVhdGVSdWxlcygpO1xuICB9XG5cbiAgUGx1cmFsUmVzb2x2ZXIucHJvdG90eXBlLmFkZFJ1bGUgPSBmdW5jdGlvbiBhZGRSdWxlKGxuZywgb2JqKSB7XG4gICAgdGhpcy5ydWxlc1tsbmddID0gb2JqO1xuICB9O1xuXG4gIFBsdXJhbFJlc29sdmVyLnByb3RvdHlwZS5nZXRSdWxlID0gZnVuY3Rpb24gZ2V0UnVsZShjb2RlKSB7XG4gICAgcmV0dXJuIHRoaXMucnVsZXNbdGhpcy5sYW5ndWFnZVV0aWxzLmdldExhbmd1YWdlUGFydEZyb21Db2RlKGNvZGUpXTtcbiAgfTtcblxuICBQbHVyYWxSZXNvbHZlci5wcm90b3R5cGUubmVlZHNQbHVyYWwgPSBmdW5jdGlvbiBuZWVkc1BsdXJhbChjb2RlKSB7XG4gICAgdmFyIHJ1bGUgPSB0aGlzLmdldFJ1bGUoY29kZSk7XG5cbiAgICByZXR1cm4gcnVsZSAmJiBydWxlLm51bWJlcnMubGVuZ3RoID4gMTtcbiAgfTtcblxuICBQbHVyYWxSZXNvbHZlci5wcm90b3R5cGUuZ2V0U3VmZml4ID0gZnVuY3Rpb24gZ2V0U3VmZml4KGNvZGUsIGNvdW50KSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIHZhciBydWxlID0gdGhpcy5nZXRSdWxlKGNvZGUpO1xuXG4gICAgaWYgKHJ1bGUpIHtcbiAgICAgIGlmIChydWxlLm51bWJlcnMubGVuZ3RoID09PSAxKSByZXR1cm4gJyc7IC8vIG9ubHkgc2luZ3VsYXJcblxuICAgICAgdmFyIGlkeCA9IHJ1bGUubm9BYnMgPyBydWxlLnBsdXJhbHMoY291bnQpIDogcnVsZS5wbHVyYWxzKE1hdGguYWJzKGNvdW50KSk7XG4gICAgICB2YXIgc3VmZml4ID0gcnVsZS5udW1iZXJzW2lkeF07XG5cbiAgICAgIC8vIHNwZWNpYWwgdHJlYXRtZW50IGZvciBsbmdzIG9ubHkgaGF2aW5nIHNpbmd1bGFyIGFuZCBwbHVyYWxcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuc2ltcGxpZnlQbHVyYWxTdWZmaXggJiYgcnVsZS5udW1iZXJzLmxlbmd0aCA9PT0gMiAmJiBydWxlLm51bWJlcnNbMF0gPT09IDEpIHtcbiAgICAgICAgaWYgKHN1ZmZpeCA9PT0gMikge1xuICAgICAgICAgIHN1ZmZpeCA9ICdwbHVyYWwnO1xuICAgICAgICB9IGVsc2UgaWYgKHN1ZmZpeCA9PT0gMSkge1xuICAgICAgICAgIHN1ZmZpeCA9ICcnO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHZhciByZXR1cm5TdWZmaXggPSBmdW5jdGlvbiByZXR1cm5TdWZmaXgoKSB7XG4gICAgICAgIHJldHVybiBfdGhpcy5vcHRpb25zLnByZXBlbmQgJiYgc3VmZml4LnRvU3RyaW5nKCkgPyBfdGhpcy5vcHRpb25zLnByZXBlbmQgKyBzdWZmaXgudG9TdHJpbmcoKSA6IHN1ZmZpeC50b1N0cmluZygpO1xuICAgICAgfTtcblxuICAgICAgLy8gQ09NUEFUSUJJTElUWSBKU09OXG4gICAgICAvLyB2MVxuICAgICAgaWYgKHRoaXMub3B0aW9ucy5jb21wYXRpYmlsaXR5SlNPTiA9PT0gJ3YxJykge1xuICAgICAgICBpZiAoc3VmZml4ID09PSAxKSByZXR1cm4gJyc7XG4gICAgICAgIGlmICh0eXBlb2Ygc3VmZml4ID09PSAnbnVtYmVyJykgcmV0dXJuICdfcGx1cmFsXycgKyBzdWZmaXgudG9TdHJpbmcoKTtcbiAgICAgICAgcmV0dXJuIHJldHVyblN1ZmZpeCgpO1xuICAgICAgfSBlbHNlIGlmICggLyogdjIgKi90aGlzLm9wdGlvbnMuY29tcGF0aWJpbGl0eUpTT04gPT09ICd2MicgfHwgcnVsZS5udW1iZXJzLmxlbmd0aCA9PT0gMiAmJiBydWxlLm51bWJlcnNbMF0gPT09IDEpIHtcbiAgICAgICAgcmV0dXJuIHJldHVyblN1ZmZpeCgpO1xuICAgICAgfSBlbHNlIGlmICggLyogdjMgLSBnZXR0ZXh0IGluZGV4ICovcnVsZS5udW1iZXJzLmxlbmd0aCA9PT0gMiAmJiBydWxlLm51bWJlcnNbMF0gPT09IDEpIHtcbiAgICAgICAgcmV0dXJuIHJldHVyblN1ZmZpeCgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMub3B0aW9ucy5wcmVwZW5kICYmIGlkeC50b1N0cmluZygpID8gdGhpcy5vcHRpb25zLnByZXBlbmQgKyBpZHgudG9TdHJpbmcoKSA6IGlkeC50b1N0cmluZygpO1xuICAgIH1cblxuICAgIHRoaXMubG9nZ2VyLndhcm4oJ25vIHBsdXJhbCBydWxlIGZvdW5kIGZvcjogJyArIGNvZGUpO1xuICAgIHJldHVybiAnJztcbiAgfTtcblxuICByZXR1cm4gUGx1cmFsUmVzb2x2ZXI7XG59KCk7XG5cbnZhciBJbnRlcnBvbGF0b3IgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIEludGVycG9sYXRvcigpIHtcbiAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307XG4gICAgY2xhc3NDYWxsQ2hlY2sodGhpcywgSW50ZXJwb2xhdG9yKTtcblxuICAgIHRoaXMubG9nZ2VyID0gYmFzZUxvZ2dlci5jcmVhdGUoJ2ludGVycG9sYXRvcicpO1xuXG4gICAgdGhpcy5pbml0KG9wdGlvbnMsIHRydWUpO1xuICB9XG5cbiAgLyogZXNsaW50IG5vLXBhcmFtLXJlYXNzaWduOiAwICovXG5cblxuICBJbnRlcnBvbGF0b3IucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiBpbml0KCkge1xuICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcbiAgICB2YXIgcmVzZXQgPSBhcmd1bWVudHNbMV07XG5cbiAgICBpZiAocmVzZXQpIHtcbiAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICB0aGlzLmZvcm1hdCA9IG9wdGlvbnMuaW50ZXJwb2xhdGlvbiAmJiBvcHRpb25zLmludGVycG9sYXRpb24uZm9ybWF0IHx8IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICB9O1xuICAgICAgdGhpcy5lc2NhcGUgPSBvcHRpb25zLmludGVycG9sYXRpb24gJiYgb3B0aW9ucy5pbnRlcnBvbGF0aW9uLmVzY2FwZSB8fCBlc2NhcGU7XG4gICAgfVxuICAgIGlmICghb3B0aW9ucy5pbnRlcnBvbGF0aW9uKSBvcHRpb25zLmludGVycG9sYXRpb24gPSB7IGVzY2FwZVZhbHVlOiB0cnVlIH07XG5cbiAgICB2YXIgaU9wdHMgPSBvcHRpb25zLmludGVycG9sYXRpb247XG5cbiAgICB0aGlzLmVzY2FwZVZhbHVlID0gaU9wdHMuZXNjYXBlVmFsdWUgIT09IHVuZGVmaW5lZCA/IGlPcHRzLmVzY2FwZVZhbHVlIDogdHJ1ZTtcblxuICAgIHRoaXMucHJlZml4ID0gaU9wdHMucHJlZml4ID8gcmVnZXhFc2NhcGUoaU9wdHMucHJlZml4KSA6IGlPcHRzLnByZWZpeEVzY2FwZWQgfHwgJ3t7JztcbiAgICB0aGlzLnN1ZmZpeCA9IGlPcHRzLnN1ZmZpeCA/IHJlZ2V4RXNjYXBlKGlPcHRzLnN1ZmZpeCkgOiBpT3B0cy5zdWZmaXhFc2NhcGVkIHx8ICd9fSc7XG5cbiAgICB0aGlzLmZvcm1hdFNlcGFyYXRvciA9IGlPcHRzLmZvcm1hdFNlcGFyYXRvciA/IGlPcHRzLmZvcm1hdFNlcGFyYXRvciA6IGlPcHRzLmZvcm1hdFNlcGFyYXRvciB8fCAnLCc7XG5cbiAgICB0aGlzLnVuZXNjYXBlUHJlZml4ID0gaU9wdHMudW5lc2NhcGVTdWZmaXggPyAnJyA6IGlPcHRzLnVuZXNjYXBlUHJlZml4IHx8ICctJztcbiAgICB0aGlzLnVuZXNjYXBlU3VmZml4ID0gdGhpcy51bmVzY2FwZVByZWZpeCA/ICcnIDogaU9wdHMudW5lc2NhcGVTdWZmaXggfHwgJyc7XG5cbiAgICB0aGlzLm5lc3RpbmdQcmVmaXggPSBpT3B0cy5uZXN0aW5nUHJlZml4ID8gcmVnZXhFc2NhcGUoaU9wdHMubmVzdGluZ1ByZWZpeCkgOiBpT3B0cy5uZXN0aW5nUHJlZml4RXNjYXBlZCB8fCByZWdleEVzY2FwZSgnJHQoJyk7XG4gICAgdGhpcy5uZXN0aW5nU3VmZml4ID0gaU9wdHMubmVzdGluZ1N1ZmZpeCA/IHJlZ2V4RXNjYXBlKGlPcHRzLm5lc3RpbmdTdWZmaXgpIDogaU9wdHMubmVzdGluZ1N1ZmZpeEVzY2FwZWQgfHwgcmVnZXhFc2NhcGUoJyknKTtcblxuICAgIC8vIHRoZSByZWdleHBcbiAgICB0aGlzLnJlc2V0UmVnRXhwKCk7XG4gIH07XG5cbiAgSW50ZXJwb2xhdG9yLnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uIHJlc2V0KCkge1xuICAgIGlmICh0aGlzLm9wdGlvbnMpIHRoaXMuaW5pdCh0aGlzLm9wdGlvbnMpO1xuICB9O1xuXG4gIEludGVycG9sYXRvci5wcm90b3R5cGUucmVzZXRSZWdFeHAgPSBmdW5jdGlvbiByZXNldFJlZ0V4cCgpIHtcbiAgICAvLyB0aGUgcmVnZXhwXG4gICAgdmFyIHJlZ2V4cFN0ciA9IHRoaXMucHJlZml4ICsgJyguKz8pJyArIHRoaXMuc3VmZml4O1xuICAgIHRoaXMucmVnZXhwID0gbmV3IFJlZ0V4cChyZWdleHBTdHIsICdnJyk7XG5cbiAgICB2YXIgcmVnZXhwVW5lc2NhcGVTdHIgPSAnJyArIHRoaXMucHJlZml4ICsgdGhpcy51bmVzY2FwZVByZWZpeCArICcoLis/KScgKyB0aGlzLnVuZXNjYXBlU3VmZml4ICsgdGhpcy5zdWZmaXg7XG4gICAgdGhpcy5yZWdleHBVbmVzY2FwZSA9IG5ldyBSZWdFeHAocmVnZXhwVW5lc2NhcGVTdHIsICdnJyk7XG5cbiAgICB2YXIgbmVzdGluZ1JlZ2V4cFN0ciA9IHRoaXMubmVzdGluZ1ByZWZpeCArICcoLis/KScgKyB0aGlzLm5lc3RpbmdTdWZmaXg7XG4gICAgdGhpcy5uZXN0aW5nUmVnZXhwID0gbmV3IFJlZ0V4cChuZXN0aW5nUmVnZXhwU3RyLCAnZycpO1xuICB9O1xuXG4gIEludGVycG9sYXRvci5wcm90b3R5cGUuaW50ZXJwb2xhdGUgPSBmdW5jdGlvbiBpbnRlcnBvbGF0ZShzdHIsIGRhdGEsIGxuZykge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICB2YXIgbWF0Y2ggPSB2b2lkIDA7XG4gICAgdmFyIHZhbHVlID0gdm9pZCAwO1xuXG4gICAgZnVuY3Rpb24gcmVnZXhTYWZlKHZhbCkge1xuICAgICAgcmV0dXJuIHZhbC5yZXBsYWNlKC9cXCQvZywgJyQkJCQnKTtcbiAgICB9XG5cbiAgICB2YXIgaGFuZGxlRm9ybWF0ID0gZnVuY3Rpb24gaGFuZGxlRm9ybWF0KGtleSkge1xuICAgICAgaWYgKGtleS5pbmRleE9mKF90aGlzLmZvcm1hdFNlcGFyYXRvcikgPCAwKSByZXR1cm4gZ2V0UGF0aChkYXRhLCBrZXkpO1xuXG4gICAgICB2YXIgcCA9IGtleS5zcGxpdChfdGhpcy5mb3JtYXRTZXBhcmF0b3IpO1xuICAgICAgdmFyIGsgPSBwLnNoaWZ0KCkudHJpbSgpO1xuICAgICAgdmFyIGYgPSBwLmpvaW4oX3RoaXMuZm9ybWF0U2VwYXJhdG9yKS50cmltKCk7XG5cbiAgICAgIHJldHVybiBfdGhpcy5mb3JtYXQoZ2V0UGF0aChkYXRhLCBrKSwgZiwgbG5nKTtcbiAgICB9O1xuXG4gICAgdGhpcy5yZXNldFJlZ0V4cCgpO1xuXG4gICAgLy8gdW5lc2NhcGUgaWYgaGFzIHVuZXNjYXBlUHJlZml4L1N1ZmZpeFxuICAgIC8qIGVzbGludCBuby1jb25kLWFzc2lnbjogMCAqL1xuICAgIHdoaWxlIChtYXRjaCA9IHRoaXMucmVnZXhwVW5lc2NhcGUuZXhlYyhzdHIpKSB7XG4gICAgICB2YWx1ZSA9IGhhbmRsZUZvcm1hdChtYXRjaFsxXS50cmltKCkpO1xuICAgICAgc3RyID0gc3RyLnJlcGxhY2UobWF0Y2hbMF0sIHZhbHVlKTtcbiAgICAgIHRoaXMucmVnZXhwVW5lc2NhcGUubGFzdEluZGV4ID0gMDtcbiAgICB9XG5cbiAgICAvLyByZWd1bGFyIGVzY2FwZSBvbiBkZW1hbmRcbiAgICB3aGlsZSAobWF0Y2ggPSB0aGlzLnJlZ2V4cC5leGVjKHN0cikpIHtcbiAgICAgIHZhbHVlID0gaGFuZGxlRm9ybWF0KG1hdGNoWzFdLnRyaW0oKSk7XG4gICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJykgdmFsdWUgPSBtYWtlU3RyaW5nKHZhbHVlKTtcbiAgICAgIGlmICghdmFsdWUpIHtcbiAgICAgICAgdGhpcy5sb2dnZXIud2FybignbWlzc2VkIHRvIHBhc3MgaW4gdmFyaWFibGUgJyArIG1hdGNoWzFdICsgJyBmb3IgaW50ZXJwb2xhdGluZyAnICsgc3RyKTtcbiAgICAgICAgdmFsdWUgPSAnJztcbiAgICAgIH1cbiAgICAgIHZhbHVlID0gdGhpcy5lc2NhcGVWYWx1ZSA/IHJlZ2V4U2FmZSh0aGlzLmVzY2FwZSh2YWx1ZSkpIDogcmVnZXhTYWZlKHZhbHVlKTtcbiAgICAgIHN0ciA9IHN0ci5yZXBsYWNlKG1hdGNoWzBdLCB2YWx1ZSk7XG4gICAgICB0aGlzLnJlZ2V4cC5sYXN0SW5kZXggPSAwO1xuICAgIH1cbiAgICByZXR1cm4gc3RyO1xuICB9O1xuXG4gIEludGVycG9sYXRvci5wcm90b3R5cGUubmVzdCA9IGZ1bmN0aW9uIG5lc3Qoc3RyLCBmYykge1xuICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiB7fTtcblxuICAgIHZhciBtYXRjaCA9IHZvaWQgMDtcbiAgICB2YXIgdmFsdWUgPSB2b2lkIDA7XG5cbiAgICB2YXIgY2xvbmVkT3B0aW9ucyA9IF9leHRlbmRzKHt9LCBvcHRpb25zKTtcbiAgICBjbG9uZWRPcHRpb25zLmFwcGx5UG9zdFByb2Nlc3NvciA9IGZhbHNlOyAvLyBhdm9pZCBwb3N0IHByb2Nlc3Npbmcgb24gbmVzdGVkIGxvb2t1cFxuXG4gICAgLy8gaWYgdmFsdWUgaXMgc29tZXRoaW5nIGxpa2UgXCJteUtleVwiOiBcImxvcmVtICQoYW5vdGhlcktleSwgeyBcImNvdW50XCI6IHt7YVZhbHVlSW5PcHRpb25zfX0gfSlcIlxuICAgIGZ1bmN0aW9uIGhhbmRsZUhhc09wdGlvbnMoa2V5KSB7XG4gICAgICBpZiAoa2V5LmluZGV4T2YoJywnKSA8IDApIHJldHVybiBrZXk7XG5cbiAgICAgIHZhciBwID0ga2V5LnNwbGl0KCcsJyk7XG4gICAgICBrZXkgPSBwLnNoaWZ0KCk7XG4gICAgICB2YXIgb3B0aW9uc1N0cmluZyA9IHAuam9pbignLCcpO1xuICAgICAgb3B0aW9uc1N0cmluZyA9IHRoaXMuaW50ZXJwb2xhdGUob3B0aW9uc1N0cmluZywgY2xvbmVkT3B0aW9ucyk7XG4gICAgICBvcHRpb25zU3RyaW5nID0gb3B0aW9uc1N0cmluZy5yZXBsYWNlKC8nL2csICdcIicpO1xuXG4gICAgICB0cnkge1xuICAgICAgICBjbG9uZWRPcHRpb25zID0gSlNPTi5wYXJzZShvcHRpb25zU3RyaW5nKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgdGhpcy5sb2dnZXIuZXJyb3IoJ2ZhaWxlZCBwYXJzaW5nIG9wdGlvbnMgc3RyaW5nIGluIG5lc3RpbmcgZm9yIGtleSAnICsga2V5LCBlKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGtleTtcbiAgICB9XG5cbiAgICAvLyByZWd1bGFyIGVzY2FwZSBvbiBkZW1hbmRcbiAgICB3aGlsZSAobWF0Y2ggPSB0aGlzLm5lc3RpbmdSZWdleHAuZXhlYyhzdHIpKSB7XG4gICAgICB2YWx1ZSA9IGZjKGhhbmRsZUhhc09wdGlvbnMuY2FsbCh0aGlzLCBtYXRjaFsxXS50cmltKCkpLCBjbG9uZWRPcHRpb25zKTtcblxuICAgICAgLy8gaXMgb25seSB0aGUgbmVzdGluZyBrZXkgKGtleTEgPSAnJChrZXkyKScpIHJldHVybiB0aGUgdmFsdWUgd2l0aG91dCBzdHJpbmdpZnlcbiAgICAgIGlmICh2YWx1ZSAmJiBtYXRjaFswXSA9PT0gc3RyICYmIHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycpIHJldHVybiB2YWx1ZTtcblxuICAgICAgLy8gbm8gc3RyaW5nIHRvIGluY2x1ZGUgb3IgZW1wdHlcbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnKSB2YWx1ZSA9IG1ha2VTdHJpbmcodmFsdWUpO1xuICAgICAgaWYgKCF2YWx1ZSkge1xuICAgICAgICB0aGlzLmxvZ2dlci53YXJuKCdtaXNzZWQgdG8gcmVzb2x2ZSAnICsgbWF0Y2hbMV0gKyAnIGZvciBuZXN0aW5nICcgKyBzdHIpO1xuICAgICAgICB2YWx1ZSA9ICcnO1xuICAgICAgfVxuICAgICAgLy8gTmVzdGVkIGtleXMgc2hvdWxkIG5vdCBiZSBlc2NhcGVkIGJ5IGRlZmF1bHQgIzg1NFxuICAgICAgLy8gdmFsdWUgPSB0aGlzLmVzY2FwZVZhbHVlID8gcmVnZXhTYWZlKHV0aWxzLmVzY2FwZSh2YWx1ZSkpIDogcmVnZXhTYWZlKHZhbHVlKTtcbiAgICAgIHN0ciA9IHN0ci5yZXBsYWNlKG1hdGNoWzBdLCB2YWx1ZSk7XG4gICAgICB0aGlzLnJlZ2V4cC5sYXN0SW5kZXggPSAwO1xuICAgIH1cbiAgICByZXR1cm4gc3RyO1xuICB9O1xuXG4gIHJldHVybiBJbnRlcnBvbGF0b3I7XG59KCk7XG5cbmZ1bmN0aW9uIHJlbW92ZShhcnIsIHdoYXQpIHtcbiAgdmFyIGZvdW5kID0gYXJyLmluZGV4T2Yod2hhdCk7XG5cbiAgd2hpbGUgKGZvdW5kICE9PSAtMSkge1xuICAgIGFyci5zcGxpY2UoZm91bmQsIDEpO1xuICAgIGZvdW5kID0gYXJyLmluZGV4T2Yod2hhdCk7XG4gIH1cbn1cblxudmFyIENvbm5lY3RvciA9IGZ1bmN0aW9uIChfRXZlbnRFbWl0dGVyKSB7XG4gIGluaGVyaXRzKENvbm5lY3RvciwgX0V2ZW50RW1pdHRlcik7XG5cbiAgZnVuY3Rpb24gQ29ubmVjdG9yKGJhY2tlbmQsIHN0b3JlLCBzZXJ2aWNlcykge1xuICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiB7fTtcbiAgICBjbGFzc0NhbGxDaGVjayh0aGlzLCBDb25uZWN0b3IpO1xuXG4gICAgdmFyIF90aGlzID0gcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfRXZlbnRFbWl0dGVyLmNhbGwodGhpcykpO1xuXG4gICAgX3RoaXMuYmFja2VuZCA9IGJhY2tlbmQ7XG4gICAgX3RoaXMuc3RvcmUgPSBzdG9yZTtcbiAgICBfdGhpcy5zZXJ2aWNlcyA9IHNlcnZpY2VzO1xuICAgIF90aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIF90aGlzLmxvZ2dlciA9IGJhc2VMb2dnZXIuY3JlYXRlKCdiYWNrZW5kQ29ubmVjdG9yJyk7XG5cbiAgICBfdGhpcy5zdGF0ZSA9IHt9O1xuICAgIF90aGlzLnF1ZXVlID0gW107XG5cbiAgICBpZiAoX3RoaXMuYmFja2VuZCAmJiBfdGhpcy5iYWNrZW5kLmluaXQpIHtcbiAgICAgIF90aGlzLmJhY2tlbmQuaW5pdChzZXJ2aWNlcywgb3B0aW9ucy5iYWNrZW5kLCBvcHRpb25zKTtcbiAgICB9XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgQ29ubmVjdG9yLnByb3RvdHlwZS5xdWV1ZUxvYWQgPSBmdW5jdGlvbiBxdWV1ZUxvYWQobGFuZ3VhZ2VzLCBuYW1lc3BhY2VzLCBjYWxsYmFjaykge1xuICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgLy8gZmluZCB3aGF0IG5lZWRzIHRvIGJlIGxvYWRlZFxuICAgIHZhciB0b0xvYWQgPSBbXTtcbiAgICB2YXIgcGVuZGluZyA9IFtdO1xuICAgIHZhciB0b0xvYWRMYW5ndWFnZXMgPSBbXTtcbiAgICB2YXIgdG9Mb2FkTmFtZXNwYWNlcyA9IFtdO1xuXG4gICAgbGFuZ3VhZ2VzLmZvckVhY2goZnVuY3Rpb24gKGxuZykge1xuICAgICAgdmFyIGhhc0FsbE5hbWVzcGFjZXMgPSB0cnVlO1xuXG4gICAgICBuYW1lc3BhY2VzLmZvckVhY2goZnVuY3Rpb24gKG5zKSB7XG4gICAgICAgIHZhciBuYW1lID0gbG5nICsgJ3wnICsgbnM7XG5cbiAgICAgICAgaWYgKF90aGlzMi5zdG9yZS5oYXNSZXNvdXJjZUJ1bmRsZShsbmcsIG5zKSkge1xuICAgICAgICAgIF90aGlzMi5zdGF0ZVtuYW1lXSA9IDI7IC8vIGxvYWRlZFxuICAgICAgICB9IGVsc2UgaWYgKF90aGlzMi5zdGF0ZVtuYW1lXSA8IDApIHtcbiAgICAgICAgICAvLyBub3RoaW5nIHRvIGRvIGZvciBlcnJcbiAgICAgICAgfSBlbHNlIGlmIChfdGhpczIuc3RhdGVbbmFtZV0gPT09IDEpIHtcbiAgICAgICAgICBpZiAocGVuZGluZy5pbmRleE9mKG5hbWUpIDwgMCkgcGVuZGluZy5wdXNoKG5hbWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIF90aGlzMi5zdGF0ZVtuYW1lXSA9IDE7IC8vIHBlbmRpbmdcblxuICAgICAgICAgIGhhc0FsbE5hbWVzcGFjZXMgPSBmYWxzZTtcblxuICAgICAgICAgIGlmIChwZW5kaW5nLmluZGV4T2YobmFtZSkgPCAwKSBwZW5kaW5nLnB1c2gobmFtZSk7XG4gICAgICAgICAgaWYgKHRvTG9hZC5pbmRleE9mKG5hbWUpIDwgMCkgdG9Mb2FkLnB1c2gobmFtZSk7XG4gICAgICAgICAgaWYgKHRvTG9hZE5hbWVzcGFjZXMuaW5kZXhPZihucykgPCAwKSB0b0xvYWROYW1lc3BhY2VzLnB1c2gobnMpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgaWYgKCFoYXNBbGxOYW1lc3BhY2VzKSB0b0xvYWRMYW5ndWFnZXMucHVzaChsbmcpO1xuICAgIH0pO1xuXG4gICAgaWYgKHRvTG9hZC5sZW5ndGggfHwgcGVuZGluZy5sZW5ndGgpIHtcbiAgICAgIHRoaXMucXVldWUucHVzaCh7XG4gICAgICAgIHBlbmRpbmc6IHBlbmRpbmcsXG4gICAgICAgIGxvYWRlZDoge30sXG4gICAgICAgIGVycm9yczogW10sXG4gICAgICAgIGNhbGxiYWNrOiBjYWxsYmFja1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHRvTG9hZDogdG9Mb2FkLFxuICAgICAgcGVuZGluZzogcGVuZGluZyxcbiAgICAgIHRvTG9hZExhbmd1YWdlczogdG9Mb2FkTGFuZ3VhZ2VzLFxuICAgICAgdG9Mb2FkTmFtZXNwYWNlczogdG9Mb2FkTmFtZXNwYWNlc1xuICAgIH07XG4gIH07XG5cbiAgQ29ubmVjdG9yLnByb3RvdHlwZS5sb2FkZWQgPSBmdW5jdGlvbiBsb2FkZWQobmFtZSwgZXJyLCBkYXRhKSB7XG4gICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICB2YXIgX25hbWUkc3BsaXQgPSBuYW1lLnNwbGl0KCd8JyksXG4gICAgICAgIF9uYW1lJHNwbGl0MiA9IHNsaWNlZFRvQXJyYXkoX25hbWUkc3BsaXQsIDIpLFxuICAgICAgICBsbmcgPSBfbmFtZSRzcGxpdDJbMF0sXG4gICAgICAgIG5zID0gX25hbWUkc3BsaXQyWzFdO1xuXG4gICAgaWYgKGVycikgdGhpcy5lbWl0KCdmYWlsZWRMb2FkaW5nJywgbG5nLCBucywgZXJyKTtcblxuICAgIGlmIChkYXRhKSB7XG4gICAgICB0aGlzLnN0b3JlLmFkZFJlc291cmNlQnVuZGxlKGxuZywgbnMsIGRhdGEpO1xuICAgIH1cblxuICAgIC8vIHNldCBsb2FkZWRcbiAgICB0aGlzLnN0YXRlW25hbWVdID0gZXJyID8gLTEgOiAyO1xuXG4gICAgLy8gY2FsbGJhY2sgaWYgcmVhZHlcbiAgICB0aGlzLnF1ZXVlLmZvckVhY2goZnVuY3Rpb24gKHEpIHtcbiAgICAgIHB1c2hQYXRoKHEubG9hZGVkLCBbbG5nXSwgbnMpO1xuICAgICAgcmVtb3ZlKHEucGVuZGluZywgbmFtZSk7XG5cbiAgICAgIGlmIChlcnIpIHEuZXJyb3JzLnB1c2goZXJyKTtcblxuICAgICAgaWYgKHEucGVuZGluZy5sZW5ndGggPT09IDAgJiYgIXEuZG9uZSkge1xuICAgICAgICBfdGhpczMuZW1pdCgnbG9hZGVkJywgcS5sb2FkZWQpO1xuICAgICAgICAvKiBlc2xpbnQgbm8tcGFyYW0tcmVhc3NpZ246IDAgKi9cbiAgICAgICAgcS5kb25lID0gdHJ1ZTtcbiAgICAgICAgaWYgKHEuZXJyb3JzLmxlbmd0aCkge1xuICAgICAgICAgIHEuY2FsbGJhY2socS5lcnJvcnMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHEuY2FsbGJhY2soKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gcmVtb3ZlIGRvbmUgbG9hZCByZXF1ZXN0c1xuICAgIHRoaXMucXVldWUgPSB0aGlzLnF1ZXVlLmZpbHRlcihmdW5jdGlvbiAocSkge1xuICAgICAgcmV0dXJuICFxLmRvbmU7XG4gICAgfSk7XG4gIH07XG5cbiAgQ29ubmVjdG9yLnByb3RvdHlwZS5yZWFkID0gZnVuY3Rpb24gcmVhZChsbmcsIG5zLCBmY05hbWUpIHtcbiAgICB2YXIgdHJpZWQgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IDA7XG5cbiAgICB2YXIgX3RoaXM0ID0gdGhpcztcblxuICAgIHZhciB3YWl0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDQgJiYgYXJndW1lbnRzWzRdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbNF0gOiAyNTA7XG4gICAgdmFyIGNhbGxiYWNrID0gYXJndW1lbnRzWzVdO1xuXG4gICAgaWYgKCFsbmcubGVuZ3RoKSByZXR1cm4gY2FsbGJhY2sobnVsbCwge30pOyAvLyBub3RpbmcgdG8gbG9hZFxuXG4gICAgcmV0dXJuIHRoaXMuYmFja2VuZFtmY05hbWVdKGxuZywgbnMsIGZ1bmN0aW9uIChlcnIsIGRhdGEpIHtcbiAgICAgIGlmIChlcnIgJiYgZGF0YSAvKiA9IHJldHJ5RmxhZyAqLyAmJiB0cmllZCA8IDUpIHtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgX3RoaXM0LnJlYWQuY2FsbChfdGhpczQsIGxuZywgbnMsIGZjTmFtZSwgdHJpZWQgKyAxLCB3YWl0ICogMiwgY2FsbGJhY2spO1xuICAgICAgICB9LCB3YWl0KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY2FsbGJhY2soZXJyLCBkYXRhKTtcbiAgICB9KTtcbiAgfTtcblxuICAvKiBlc2xpbnQgY29uc2lzdGVudC1yZXR1cm46IDAgKi9cblxuXG4gIENvbm5lY3Rvci5wcm90b3R5cGUubG9hZCA9IGZ1bmN0aW9uIGxvYWQobGFuZ3VhZ2VzLCBuYW1lc3BhY2VzLCBjYWxsYmFjaykge1xuICAgIHZhciBfdGhpczUgPSB0aGlzO1xuXG4gICAgaWYgKCF0aGlzLmJhY2tlbmQpIHtcbiAgICAgIHRoaXMubG9nZ2VyLndhcm4oJ05vIGJhY2tlbmQgd2FzIGFkZGVkIHZpYSBpMThuZXh0LnVzZS4gV2lsbCBub3QgbG9hZCByZXNvdXJjZXMuJyk7XG4gICAgICByZXR1cm4gY2FsbGJhY2sgJiYgY2FsbGJhY2soKTtcbiAgICB9XG4gICAgdmFyIG9wdGlvbnMgPSBfZXh0ZW5kcyh7fSwgdGhpcy5iYWNrZW5kLm9wdGlvbnMsIHRoaXMub3B0aW9ucy5iYWNrZW5kKTtcblxuICAgIGlmICh0eXBlb2YgbGFuZ3VhZ2VzID09PSAnc3RyaW5nJykgbGFuZ3VhZ2VzID0gdGhpcy5zZXJ2aWNlcy5sYW5ndWFnZVV0aWxzLnRvUmVzb2x2ZUhpZXJhcmNoeShsYW5ndWFnZXMpO1xuICAgIGlmICh0eXBlb2YgbmFtZXNwYWNlcyA9PT0gJ3N0cmluZycpIG5hbWVzcGFjZXMgPSBbbmFtZXNwYWNlc107XG5cbiAgICB2YXIgdG9Mb2FkID0gdGhpcy5xdWV1ZUxvYWQobGFuZ3VhZ2VzLCBuYW1lc3BhY2VzLCBjYWxsYmFjayk7XG4gICAgaWYgKCF0b0xvYWQudG9Mb2FkLmxlbmd0aCkge1xuICAgICAgaWYgKCF0b0xvYWQucGVuZGluZy5sZW5ndGgpIGNhbGxiYWNrKCk7IC8vIG5vdGhpbmcgdG8gbG9hZCBhbmQgbm8gcGVuZGluZ3MuLi5jYWxsYmFjayBub3dcbiAgICAgIHJldHVybiBudWxsOyAvLyBwZW5kaW5ncyB3aWxsIHRyaWdnZXIgY2FsbGJhY2tcbiAgICB9XG5cbiAgICAvLyBsb2FkIHdpdGggbXVsdGktbG9hZFxuICAgIGlmIChvcHRpb25zLmFsbG93TXVsdGlMb2FkaW5nICYmIHRoaXMuYmFja2VuZC5yZWFkTXVsdGkpIHtcbiAgICAgIHRoaXMucmVhZCh0b0xvYWQudG9Mb2FkTGFuZ3VhZ2VzLCB0b0xvYWQudG9Mb2FkTmFtZXNwYWNlcywgJ3JlYWRNdWx0aScsIG51bGwsIG51bGwsIGZ1bmN0aW9uIChlcnIsIGRhdGEpIHtcbiAgICAgICAgaWYgKGVycikgX3RoaXM1LmxvZ2dlci53YXJuKCdsb2FkaW5nIG5hbWVzcGFjZXMgJyArIHRvTG9hZC50b0xvYWROYW1lc3BhY2VzLmpvaW4oJywgJykgKyAnIGZvciBsYW5ndWFnZXMgJyArIHRvTG9hZC50b0xvYWRMYW5ndWFnZXMuam9pbignLCAnKSArICcgdmlhIG11bHRpbG9hZGluZyBmYWlsZWQnLCBlcnIpO1xuICAgICAgICBpZiAoIWVyciAmJiBkYXRhKSBfdGhpczUubG9nZ2VyLmxvZygnc3VjY2Vzc2Z1bGx5IGxvYWRlZCBuYW1lc3BhY2VzICcgKyB0b0xvYWQudG9Mb2FkTmFtZXNwYWNlcy5qb2luKCcsICcpICsgJyBmb3IgbGFuZ3VhZ2VzICcgKyB0b0xvYWQudG9Mb2FkTGFuZ3VhZ2VzLmpvaW4oJywgJykgKyAnIHZpYSBtdWx0aWxvYWRpbmcnLCBkYXRhKTtcblxuICAgICAgICB0b0xvYWQudG9Mb2FkLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgICB2YXIgX25hbWUkc3BsaXQzID0gbmFtZS5zcGxpdCgnfCcpLFxuICAgICAgICAgICAgICBfbmFtZSRzcGxpdDQgPSBzbGljZWRUb0FycmF5KF9uYW1lJHNwbGl0MywgMiksXG4gICAgICAgICAgICAgIGwgPSBfbmFtZSRzcGxpdDRbMF0sXG4gICAgICAgICAgICAgIG4gPSBfbmFtZSRzcGxpdDRbMV07XG5cbiAgICAgICAgICB2YXIgYnVuZGxlID0gZ2V0UGF0aChkYXRhLCBbbCwgbl0pO1xuICAgICAgICAgIGlmIChidW5kbGUpIHtcbiAgICAgICAgICAgIF90aGlzNS5sb2FkZWQobmFtZSwgZXJyLCBidW5kbGUpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgZXJyb3IgPSAnbG9hZGluZyBuYW1lc3BhY2UgJyArIG4gKyAnIGZvciBsYW5ndWFnZSAnICsgbCArICcgdmlhIG11bHRpbG9hZGluZyBmYWlsZWQnO1xuICAgICAgICAgICAgX3RoaXM1LmxvYWRlZChuYW1lLCBlcnJvcik7XG4gICAgICAgICAgICBfdGhpczUubG9nZ2VyLmVycm9yKGVycm9yKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRvTG9hZC50b0xvYWQuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICBfdGhpczUubG9hZE9uZShuYW1lKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICBDb25uZWN0b3IucHJvdG90eXBlLnJlbG9hZCA9IGZ1bmN0aW9uIHJlbG9hZChsYW5ndWFnZXMsIG5hbWVzcGFjZXMpIHtcbiAgICB2YXIgX3RoaXM2ID0gdGhpcztcblxuICAgIGlmICghdGhpcy5iYWNrZW5kKSB7XG4gICAgICB0aGlzLmxvZ2dlci53YXJuKCdObyBiYWNrZW5kIHdhcyBhZGRlZCB2aWEgaTE4bmV4dC51c2UuIFdpbGwgbm90IGxvYWQgcmVzb3VyY2VzLicpO1xuICAgIH1cbiAgICB2YXIgb3B0aW9ucyA9IF9leHRlbmRzKHt9LCB0aGlzLmJhY2tlbmQub3B0aW9ucywgdGhpcy5vcHRpb25zLmJhY2tlbmQpO1xuXG4gICAgaWYgKHR5cGVvZiBsYW5ndWFnZXMgPT09ICdzdHJpbmcnKSBsYW5ndWFnZXMgPSB0aGlzLnNlcnZpY2VzLmxhbmd1YWdlVXRpbHMudG9SZXNvbHZlSGllcmFyY2h5KGxhbmd1YWdlcyk7XG4gICAgaWYgKHR5cGVvZiBuYW1lc3BhY2VzID09PSAnc3RyaW5nJykgbmFtZXNwYWNlcyA9IFtuYW1lc3BhY2VzXTtcblxuICAgIC8vIGxvYWQgd2l0aCBtdWx0aS1sb2FkXG4gICAgaWYgKG9wdGlvbnMuYWxsb3dNdWx0aUxvYWRpbmcgJiYgdGhpcy5iYWNrZW5kLnJlYWRNdWx0aSkge1xuICAgICAgdGhpcy5yZWFkKGxhbmd1YWdlcywgbmFtZXNwYWNlcywgJ3JlYWRNdWx0aScsIG51bGwsIG51bGwsIGZ1bmN0aW9uIChlcnIsIGRhdGEpIHtcbiAgICAgICAgaWYgKGVycikgX3RoaXM2LmxvZ2dlci53YXJuKCdyZWxvYWRpbmcgbmFtZXNwYWNlcyAnICsgbmFtZXNwYWNlcy5qb2luKCcsICcpICsgJyBmb3IgbGFuZ3VhZ2VzICcgKyBsYW5ndWFnZXMuam9pbignLCAnKSArICcgdmlhIG11bHRpbG9hZGluZyBmYWlsZWQnLCBlcnIpO1xuICAgICAgICBpZiAoIWVyciAmJiBkYXRhKSBfdGhpczYubG9nZ2VyLmxvZygnc3VjY2Vzc2Z1bGx5IHJlbG9hZGVkIG5hbWVzcGFjZXMgJyArIG5hbWVzcGFjZXMuam9pbignLCAnKSArICcgZm9yIGxhbmd1YWdlcyAnICsgbGFuZ3VhZ2VzLmpvaW4oJywgJykgKyAnIHZpYSBtdWx0aWxvYWRpbmcnLCBkYXRhKTtcblxuICAgICAgICBsYW5ndWFnZXMuZm9yRWFjaChmdW5jdGlvbiAobCkge1xuICAgICAgICAgIG5hbWVzcGFjZXMuZm9yRWFjaChmdW5jdGlvbiAobikge1xuICAgICAgICAgICAgdmFyIGJ1bmRsZSA9IGdldFBhdGgoZGF0YSwgW2wsIG5dKTtcbiAgICAgICAgICAgIGlmIChidW5kbGUpIHtcbiAgICAgICAgICAgICAgX3RoaXM2LmxvYWRlZChsICsgJ3wnICsgbiwgZXJyLCBidW5kbGUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdmFyIGVycm9yID0gJ3JlbG9hZGluZyBuYW1lc3BhY2UgJyArIG4gKyAnIGZvciBsYW5ndWFnZSAnICsgbCArICcgdmlhIG11bHRpbG9hZGluZyBmYWlsZWQnO1xuICAgICAgICAgICAgICBfdGhpczYubG9hZGVkKGwgKyAnfCcgKyBuLCBlcnJvcik7XG4gICAgICAgICAgICAgIF90aGlzNi5sb2dnZXIuZXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBsYW5ndWFnZXMuZm9yRWFjaChmdW5jdGlvbiAobCkge1xuICAgICAgICBuYW1lc3BhY2VzLmZvckVhY2goZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgICBfdGhpczYubG9hZE9uZShsICsgJ3wnICsgbiwgJ3JlJyk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gIENvbm5lY3Rvci5wcm90b3R5cGUubG9hZE9uZSA9IGZ1bmN0aW9uIGxvYWRPbmUobmFtZSkge1xuICAgIHZhciBfdGhpczcgPSB0aGlzO1xuXG4gICAgdmFyIHByZWZpeCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogJyc7XG5cbiAgICB2YXIgX25hbWUkc3BsaXQ1ID0gbmFtZS5zcGxpdCgnfCcpLFxuICAgICAgICBfbmFtZSRzcGxpdDYgPSBzbGljZWRUb0FycmF5KF9uYW1lJHNwbGl0NSwgMiksXG4gICAgICAgIGxuZyA9IF9uYW1lJHNwbGl0NlswXSxcbiAgICAgICAgbnMgPSBfbmFtZSRzcGxpdDZbMV07XG5cbiAgICB0aGlzLnJlYWQobG5nLCBucywgJ3JlYWQnLCBudWxsLCBudWxsLCBmdW5jdGlvbiAoZXJyLCBkYXRhKSB7XG4gICAgICBpZiAoZXJyKSBfdGhpczcubG9nZ2VyLndhcm4ocHJlZml4ICsgJ2xvYWRpbmcgbmFtZXNwYWNlICcgKyBucyArICcgZm9yIGxhbmd1YWdlICcgKyBsbmcgKyAnIGZhaWxlZCcsIGVycik7XG4gICAgICBpZiAoIWVyciAmJiBkYXRhKSBfdGhpczcubG9nZ2VyLmxvZyhwcmVmaXggKyAnbG9hZGVkIG5hbWVzcGFjZSAnICsgbnMgKyAnIGZvciBsYW5ndWFnZSAnICsgbG5nLCBkYXRhKTtcblxuICAgICAgX3RoaXM3LmxvYWRlZChuYW1lLCBlcnIsIGRhdGEpO1xuICAgIH0pO1xuICB9O1xuXG4gIENvbm5lY3Rvci5wcm90b3R5cGUuc2F2ZU1pc3NpbmcgPSBmdW5jdGlvbiBzYXZlTWlzc2luZyhsYW5ndWFnZXMsIG5hbWVzcGFjZSwga2V5LCBmYWxsYmFja1ZhbHVlKSB7XG4gICAgaWYgKHRoaXMuYmFja2VuZCAmJiB0aGlzLmJhY2tlbmQuY3JlYXRlKSB0aGlzLmJhY2tlbmQuY3JlYXRlKGxhbmd1YWdlcywgbmFtZXNwYWNlLCBrZXksIGZhbGxiYWNrVmFsdWUpO1xuXG4gICAgLy8gd3JpdGUgdG8gc3RvcmUgdG8gYXZvaWQgcmVzZW5kaW5nXG4gICAgaWYgKCFsYW5ndWFnZXMgfHwgIWxhbmd1YWdlc1swXSkgcmV0dXJuO1xuICAgIHRoaXMuc3RvcmUuYWRkUmVzb3VyY2UobGFuZ3VhZ2VzWzBdLCBuYW1lc3BhY2UsIGtleSwgZmFsbGJhY2tWYWx1ZSk7XG4gIH07XG5cbiAgcmV0dXJuIENvbm5lY3Rvcjtcbn0oRXZlbnRFbWl0dGVyKTtcblxudmFyIENvbm5lY3RvciQxID0gZnVuY3Rpb24gKF9FdmVudEVtaXR0ZXIpIHtcbiAgaW5oZXJpdHMoQ29ubmVjdG9yLCBfRXZlbnRFbWl0dGVyKTtcblxuICBmdW5jdGlvbiBDb25uZWN0b3IoY2FjaGUsIHN0b3JlLCBzZXJ2aWNlcykge1xuICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiB7fTtcbiAgICBjbGFzc0NhbGxDaGVjayh0aGlzLCBDb25uZWN0b3IpO1xuXG4gICAgdmFyIF90aGlzID0gcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCBfRXZlbnRFbWl0dGVyLmNhbGwodGhpcykpO1xuXG4gICAgX3RoaXMuY2FjaGUgPSBjYWNoZTtcbiAgICBfdGhpcy5zdG9yZSA9IHN0b3JlO1xuICAgIF90aGlzLnNlcnZpY2VzID0gc2VydmljZXM7XG4gICAgX3RoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgX3RoaXMubG9nZ2VyID0gYmFzZUxvZ2dlci5jcmVhdGUoJ2NhY2hlQ29ubmVjdG9yJyk7XG5cbiAgICBpZiAoX3RoaXMuY2FjaGUgJiYgX3RoaXMuY2FjaGUuaW5pdCkgX3RoaXMuY2FjaGUuaW5pdChzZXJ2aWNlcywgb3B0aW9ucy5jYWNoZSwgb3B0aW9ucyk7XG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgLyogZXNsaW50IGNvbnNpc3RlbnQtcmV0dXJuOiAwICovXG5cblxuICBDb25uZWN0b3IucHJvdG90eXBlLmxvYWQgPSBmdW5jdGlvbiBsb2FkKGxhbmd1YWdlcywgbmFtZXNwYWNlcywgY2FsbGJhY2spIHtcbiAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgIGlmICghdGhpcy5jYWNoZSkgcmV0dXJuIGNhbGxiYWNrICYmIGNhbGxiYWNrKCk7XG4gICAgdmFyIG9wdGlvbnMgPSBfZXh0ZW5kcyh7fSwgdGhpcy5jYWNoZS5vcHRpb25zLCB0aGlzLm9wdGlvbnMuY2FjaGUpO1xuXG4gICAgdmFyIGxvYWRMbmdzID0gdHlwZW9mIGxhbmd1YWdlcyA9PT0gJ3N0cmluZycgPyB0aGlzLnNlcnZpY2VzLmxhbmd1YWdlVXRpbHMudG9SZXNvbHZlSGllcmFyY2h5KGxhbmd1YWdlcykgOiBsYW5ndWFnZXM7XG5cbiAgICBpZiAob3B0aW9ucy5lbmFibGVkKSB7XG4gICAgICB0aGlzLmNhY2hlLmxvYWQobG9hZExuZ3MsIGZ1bmN0aW9uIChlcnIsIGRhdGEpIHtcbiAgICAgICAgaWYgKGVycikgX3RoaXMyLmxvZ2dlci5lcnJvcignbG9hZGluZyBsYW5ndWFnZXMgJyArIGxvYWRMbmdzLmpvaW4oJywgJykgKyAnIGZyb20gY2FjaGUgZmFpbGVkJywgZXJyKTtcbiAgICAgICAgaWYgKGRhdGEpIHtcbiAgICAgICAgICAvKiBlc2xpbnQgbm8tcmVzdHJpY3RlZC1zeW50YXg6IDAgKi9cbiAgICAgICAgICBmb3IgKHZhciBsIGluIGRhdGEpIHtcbiAgICAgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZGF0YSwgbCkpIHtcbiAgICAgICAgICAgICAgZm9yICh2YXIgbiBpbiBkYXRhW2xdKSB7XG4gICAgICAgICAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChkYXRhW2xdLCBuKSkge1xuICAgICAgICAgICAgICAgICAgaWYgKG4gIT09ICdpMThuU3RhbXAnKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBidW5kbGUgPSBkYXRhW2xdW25dO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYnVuZGxlKSBfdGhpczIuc3RvcmUuYWRkUmVzb3VyY2VCdW5kbGUobCwgbiwgYnVuZGxlKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNhbGxiYWNrKSBjYWxsYmFjaygpO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmIChjYWxsYmFjaykge1xuICAgICAgY2FsbGJhY2soKTtcbiAgICB9XG4gIH07XG5cbiAgQ29ubmVjdG9yLnByb3RvdHlwZS5zYXZlID0gZnVuY3Rpb24gc2F2ZSgpIHtcbiAgICBpZiAodGhpcy5jYWNoZSAmJiB0aGlzLm9wdGlvbnMuY2FjaGUgJiYgdGhpcy5vcHRpb25zLmNhY2hlLmVuYWJsZWQpIHRoaXMuY2FjaGUuc2F2ZSh0aGlzLnN0b3JlLmRhdGEpO1xuICB9O1xuXG4gIHJldHVybiBDb25uZWN0b3I7XG59KEV2ZW50RW1pdHRlcik7XG5cbmZ1bmN0aW9uIGdldCQxKCkge1xuICByZXR1cm4ge1xuICAgIGRlYnVnOiBmYWxzZSxcbiAgICBpbml0SW1tZWRpYXRlOiB0cnVlLFxuXG4gICAgbnM6IFsndHJhbnNsYXRpb24nXSxcbiAgICBkZWZhdWx0TlM6IFsndHJhbnNsYXRpb24nXSxcbiAgICBmYWxsYmFja0xuZzogWydkZXYnXSxcbiAgICBmYWxsYmFja05TOiBmYWxzZSwgLy8gc3RyaW5nIG9yIGFycmF5IG9mIG5hbWVzcGFjZXNcblxuICAgIHdoaXRlbGlzdDogZmFsc2UsIC8vIGFycmF5IHdpdGggd2hpdGVsaXN0ZWQgbGFuZ3VhZ2VzXG4gICAgbm9uRXhwbGljaXRXaGl0ZWxpc3Q6IGZhbHNlLFxuICAgIGxvYWQ6ICdhbGwnLCAvLyB8IGN1cnJlbnRPbmx5IHwgbGFuZ3VhZ2VPbmx5XG4gICAgcHJlbG9hZDogZmFsc2UsIC8vIGFycmF5IHdpdGggcHJlbG9hZCBsYW5ndWFnZXNcblxuICAgIHNpbXBsaWZ5UGx1cmFsU3VmZml4OiB0cnVlLFxuICAgIGtleVNlcGFyYXRvcjogJy4nLFxuICAgIG5zU2VwYXJhdG9yOiAnOicsXG4gICAgcGx1cmFsU2VwYXJhdG9yOiAnXycsXG4gICAgY29udGV4dFNlcGFyYXRvcjogJ18nLFxuXG4gICAgc2F2ZU1pc3Npbmc6IGZhbHNlLCAvLyBlbmFibGUgdG8gc2VuZCBtaXNzaW5nIHZhbHVlc1xuICAgIHNhdmVNaXNzaW5nVG86ICdmYWxsYmFjaycsIC8vICdjdXJyZW50JyB8fCAnYWxsJ1xuICAgIG1pc3NpbmdLZXlIYW5kbGVyOiBmYWxzZSwgLy8gZnVuY3Rpb24obG5nLCBucywga2V5LCBmYWxsYmFja1ZhbHVlKSAtPiBvdmVycmlkZSBpZiBwcmVmZXIgb24gaGFuZGxpbmdcblxuICAgIHBvc3RQcm9jZXNzOiBmYWxzZSwgLy8gc3RyaW5nIG9yIGFycmF5IG9mIHBvc3RQcm9jZXNzb3IgbmFtZXNcbiAgICByZXR1cm5OdWxsOiB0cnVlLCAvLyBhbGxvd3MgbnVsbCB2YWx1ZSBhcyB2YWxpZCB0cmFuc2xhdGlvblxuICAgIHJldHVybkVtcHR5U3RyaW5nOiB0cnVlLCAvLyBhbGxvd3MgZW1wdHkgc3RyaW5nIHZhbHVlIGFzIHZhbGlkIHRyYW5zbGF0aW9uXG4gICAgcmV0dXJuT2JqZWN0czogZmFsc2UsXG4gICAgam9pbkFycmF5czogZmFsc2UsIC8vIG9yIHN0cmluZyB0byBqb2luIGFycmF5XG4gICAgcmV0dXJuZWRPYmplY3RIYW5kbGVyOiBmdW5jdGlvbiByZXR1cm5lZE9iamVjdEhhbmRsZXIoKSB7fSwgLy8gZnVuY3Rpb24oa2V5LCB2YWx1ZSwgb3B0aW9ucykgdHJpZ2dlcmVkIGlmIGtleSByZXR1cm5zIG9iamVjdCBidXQgcmV0dXJuT2JqZWN0cyBpcyBzZXQgdG8gZmFsc2VcbiAgICBwYXJzZU1pc3NpbmdLZXlIYW5kbGVyOiBmYWxzZSwgLy8gZnVuY3Rpb24oa2V5KSBwYXJzZWQgYSBrZXkgdGhhdCB3YXMgbm90IGZvdW5kIGluIHQoKSBiZWZvcmUgcmV0dXJuaW5nXG4gICAgYXBwZW5kTmFtZXNwYWNlVG9NaXNzaW5nS2V5OiBmYWxzZSxcbiAgICBhcHBlbmROYW1lc3BhY2VUb0NJTW9kZTogZmFsc2UsXG4gICAgb3ZlcmxvYWRUcmFuc2xhdGlvbk9wdGlvbkhhbmRsZXI6IGZ1bmN0aW9uIGhhbmRsZShhcmdzKSB7XG4gICAgICByZXR1cm4geyBkZWZhdWx0VmFsdWU6IGFyZ3NbMV0gfTtcbiAgICB9LFxuXG4gICAgaW50ZXJwb2xhdGlvbjoge1xuICAgICAgZXNjYXBlVmFsdWU6IHRydWUsXG4gICAgICBmb3JtYXQ6IGZ1bmN0aW9uIGZvcm1hdCh2YWx1ZSwgX2Zvcm1hdCwgbG5nKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgIH0sXG4gICAgICBwcmVmaXg6ICd7eycsXG4gICAgICBzdWZmaXg6ICd9fScsXG4gICAgICBmb3JtYXRTZXBhcmF0b3I6ICcsJyxcbiAgICAgIC8vIHByZWZpeEVzY2FwZWQ6ICd7eycsXG4gICAgICAvLyBzdWZmaXhFc2NhcGVkOiAnfX0nLFxuICAgICAgLy8gdW5lc2NhcGVTdWZmaXg6ICcnLFxuICAgICAgdW5lc2NhcGVQcmVmaXg6ICctJyxcblxuICAgICAgbmVzdGluZ1ByZWZpeDogJyR0KCcsXG4gICAgICBuZXN0aW5nU3VmZml4OiAnKScsXG4gICAgICAvLyBuZXN0aW5nUHJlZml4RXNjYXBlZDogJyR0KCcsXG4gICAgICAvLyBuZXN0aW5nU3VmZml4RXNjYXBlZDogJyknLFxuICAgICAgZGVmYXVsdFZhcmlhYmxlczogdW5kZWZpbmVkIC8vIG9iamVjdCB0aGF0IGNhbiBoYXZlIHZhbHVlcyB0byBpbnRlcnBvbGF0ZSBvbiAtIGV4dGVuZHMgcGFzc2VkIGluIGludGVycG9sYXRpb24gZGF0YVxuICAgIH1cbiAgfTtcbn1cblxuLyogZXNsaW50IG5vLXBhcmFtLXJlYXNzaWduOiAwICovXG5mdW5jdGlvbiB0cmFuc2Zvcm1PcHRpb25zKG9wdGlvbnMpIHtcbiAgLy8gY3JlYXRlIG5hbWVzcGFjZSBvYmplY3QgaWYgbmFtZXNwYWNlIGlzIHBhc3NlZCBpbiBhcyBzdHJpbmdcbiAgaWYgKHR5cGVvZiBvcHRpb25zLm5zID09PSAnc3RyaW5nJykgb3B0aW9ucy5ucyA9IFtvcHRpb25zLm5zXTtcbiAgaWYgKHR5cGVvZiBvcHRpb25zLmZhbGxiYWNrTG5nID09PSAnc3RyaW5nJykgb3B0aW9ucy5mYWxsYmFja0xuZyA9IFtvcHRpb25zLmZhbGxiYWNrTG5nXTtcbiAgaWYgKHR5cGVvZiBvcHRpb25zLmZhbGxiYWNrTlMgPT09ICdzdHJpbmcnKSBvcHRpb25zLmZhbGxiYWNrTlMgPSBbb3B0aW9ucy5mYWxsYmFja05TXTtcblxuICAvLyBleHRlbmQgd2hpdGVsaXN0IHdpdGggY2ltb2RlXG4gIGlmIChvcHRpb25zLndoaXRlbGlzdCAmJiBvcHRpb25zLndoaXRlbGlzdC5pbmRleE9mKCdjaW1vZGUnKSA8IDApIG9wdGlvbnMud2hpdGVsaXN0LnB1c2goJ2NpbW9kZScpO1xuXG4gIHJldHVybiBvcHRpb25zO1xufVxuXG5mdW5jdGlvbiBub29wKCkge31cblxudmFyIEkxOG4gPSBmdW5jdGlvbiAoX0V2ZW50RW1pdHRlcikge1xuICBpbmhlcml0cyhJMThuLCBfRXZlbnRFbWl0dGVyKTtcblxuICBmdW5jdGlvbiBJMThuKCkge1xuICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcbiAgICB2YXIgY2FsbGJhY2sgPSBhcmd1bWVudHNbMV07XG4gICAgY2xhc3NDYWxsQ2hlY2sodGhpcywgSTE4bik7XG5cbiAgICB2YXIgX3RoaXMgPSBwb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIF9FdmVudEVtaXR0ZXIuY2FsbCh0aGlzKSk7XG5cbiAgICBfdGhpcy5vcHRpb25zID0gdHJhbnNmb3JtT3B0aW9ucyhvcHRpb25zKTtcbiAgICBfdGhpcy5zZXJ2aWNlcyA9IHt9O1xuICAgIF90aGlzLmxvZ2dlciA9IGJhc2VMb2dnZXI7XG4gICAgX3RoaXMubW9kdWxlcyA9IHsgZXh0ZXJuYWw6IFtdIH07XG5cbiAgICBpZiAoY2FsbGJhY2sgJiYgIV90aGlzLmlzSW5pdGlhbGl6ZWQgJiYgIW9wdGlvbnMuaXNDbG9uZSkge1xuICAgICAgdmFyIF9yZXQ7XG5cbiAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9pMThuZXh0L2kxOG5leHQvaXNzdWVzLzg3OVxuICAgICAgaWYgKCFfdGhpcy5vcHRpb25zLmluaXRJbW1lZGlhdGUpIHJldHVybiBfcmV0ID0gX3RoaXMuaW5pdChvcHRpb25zLCBjYWxsYmFjayksIHBvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oX3RoaXMsIF9yZXQpO1xuICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIF90aGlzLmluaXQob3B0aW9ucywgY2FsbGJhY2spO1xuICAgICAgfSwgMCk7XG4gICAgfVxuICAgIHJldHVybiBfdGhpcztcbiAgfVxuXG4gIEkxOG4ucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiBpbml0KG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICBpZiAodHlwZW9mIG9wdGlvbnMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGNhbGxiYWNrID0gb3B0aW9ucztcbiAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICB9XG4gICAgaWYgKCFvcHRpb25zKSBvcHRpb25zID0ge307XG5cbiAgICBpZiAob3B0aW9ucy5jb21wYXRpYmlsaXR5QVBJID09PSAndjEnKSB7XG4gICAgICB0aGlzLm9wdGlvbnMgPSBfZXh0ZW5kcyh7fSwgZ2V0JDEoKSwgdHJhbnNmb3JtT3B0aW9ucyhjb252ZXJ0QVBJT3B0aW9ucyhvcHRpb25zKSksIHt9KTtcbiAgICB9IGVsc2UgaWYgKG9wdGlvbnMuY29tcGF0aWJpbGl0eUpTT04gPT09ICd2MScpIHtcbiAgICAgIHRoaXMub3B0aW9ucyA9IF9leHRlbmRzKHt9LCBnZXQkMSgpLCB0cmFuc2Zvcm1PcHRpb25zKGNvbnZlcnRKU09OT3B0aW9ucyhvcHRpb25zKSksIHt9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5vcHRpb25zID0gX2V4dGVuZHMoe30sIGdldCQxKCksIHRoaXMub3B0aW9ucywgdHJhbnNmb3JtT3B0aW9ucyhvcHRpb25zKSk7XG4gICAgfVxuICAgIHRoaXMuZm9ybWF0ID0gdGhpcy5vcHRpb25zLmludGVycG9sYXRpb24uZm9ybWF0O1xuICAgIGlmICghY2FsbGJhY2spIGNhbGxiYWNrID0gbm9vcDtcblxuICAgIGZ1bmN0aW9uIGNyZWF0ZUNsYXNzT25EZW1hbmQoQ2xhc3NPck9iamVjdCkge1xuICAgICAgaWYgKCFDbGFzc09yT2JqZWN0KSByZXR1cm4gbnVsbDtcbiAgICAgIGlmICh0eXBlb2YgQ2xhc3NPck9iamVjdCA9PT0gJ2Z1bmN0aW9uJykgcmV0dXJuIG5ldyBDbGFzc09yT2JqZWN0KCk7XG4gICAgICByZXR1cm4gQ2xhc3NPck9iamVjdDtcbiAgICB9XG5cbiAgICAvLyBpbml0IHNlcnZpY2VzXG4gICAgaWYgKCF0aGlzLm9wdGlvbnMuaXNDbG9uZSkge1xuICAgICAgaWYgKHRoaXMubW9kdWxlcy5sb2dnZXIpIHtcbiAgICAgICAgYmFzZUxvZ2dlci5pbml0KGNyZWF0ZUNsYXNzT25EZW1hbmQodGhpcy5tb2R1bGVzLmxvZ2dlciksIHRoaXMub3B0aW9ucyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBiYXNlTG9nZ2VyLmluaXQobnVsbCwgdGhpcy5vcHRpb25zKTtcbiAgICAgIH1cblxuICAgICAgdmFyIGx1ID0gbmV3IExhbmd1YWdlVXRpbCh0aGlzLm9wdGlvbnMpO1xuICAgICAgdGhpcy5zdG9yZSA9IG5ldyBSZXNvdXJjZVN0b3JlKHRoaXMub3B0aW9ucy5yZXNvdXJjZXMsIHRoaXMub3B0aW9ucyk7XG5cbiAgICAgIHZhciBzID0gdGhpcy5zZXJ2aWNlcztcbiAgICAgIHMubG9nZ2VyID0gYmFzZUxvZ2dlcjtcbiAgICAgIHMucmVzb3VyY2VTdG9yZSA9IHRoaXMuc3RvcmU7XG4gICAgICBzLnJlc291cmNlU3RvcmUub24oJ2FkZGVkIHJlbW92ZWQnLCBmdW5jdGlvbiAobG5nLCBucykge1xuICAgICAgICBzLmNhY2hlQ29ubmVjdG9yLnNhdmUoKTtcbiAgICAgIH0pO1xuICAgICAgcy5sYW5ndWFnZVV0aWxzID0gbHU7XG4gICAgICBzLnBsdXJhbFJlc29sdmVyID0gbmV3IFBsdXJhbFJlc29sdmVyKGx1LCB7IHByZXBlbmQ6IHRoaXMub3B0aW9ucy5wbHVyYWxTZXBhcmF0b3IsIGNvbXBhdGliaWxpdHlKU09OOiB0aGlzLm9wdGlvbnMuY29tcGF0aWJpbGl0eUpTT04sIHNpbXBsaWZ5UGx1cmFsU3VmZml4OiB0aGlzLm9wdGlvbnMuc2ltcGxpZnlQbHVyYWxTdWZmaXggfSk7XG4gICAgICBzLmludGVycG9sYXRvciA9IG5ldyBJbnRlcnBvbGF0b3IodGhpcy5vcHRpb25zKTtcblxuICAgICAgcy5iYWNrZW5kQ29ubmVjdG9yID0gbmV3IENvbm5lY3RvcihjcmVhdGVDbGFzc09uRGVtYW5kKHRoaXMubW9kdWxlcy5iYWNrZW5kKSwgcy5yZXNvdXJjZVN0b3JlLCBzLCB0aGlzLm9wdGlvbnMpO1xuICAgICAgLy8gcGlwZSBldmVudHMgZnJvbSBiYWNrZW5kQ29ubmVjdG9yXG4gICAgICBzLmJhY2tlbmRDb25uZWN0b3Iub24oJyonLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuID4gMSA/IF9sZW4gLSAxIDogMCksIF9rZXkgPSAxOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICAgICAgYXJnc1tfa2V5IC0gMV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgICAgIH1cblxuICAgICAgICBfdGhpczIuZW1pdC5hcHBseShfdGhpczIsIFtldmVudF0uY29uY2F0KGFyZ3MpKTtcbiAgICAgIH0pO1xuXG4gICAgICBzLmJhY2tlbmRDb25uZWN0b3Iub24oJ2xvYWRlZCcsIGZ1bmN0aW9uIChsb2FkZWQpIHtcbiAgICAgICAgcy5jYWNoZUNvbm5lY3Rvci5zYXZlKCk7XG4gICAgICB9KTtcblxuICAgICAgcy5jYWNoZUNvbm5lY3RvciA9IG5ldyBDb25uZWN0b3IkMShjcmVhdGVDbGFzc09uRGVtYW5kKHRoaXMubW9kdWxlcy5jYWNoZSksIHMucmVzb3VyY2VTdG9yZSwgcywgdGhpcy5vcHRpb25zKTtcbiAgICAgIC8vIHBpcGUgZXZlbnRzIGZyb20gYmFja2VuZENvbm5lY3RvclxuICAgICAgcy5jYWNoZUNvbm5lY3Rvci5vbignKicsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBmb3IgKHZhciBfbGVuMiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBBcnJheShfbGVuMiA+IDEgPyBfbGVuMiAtIDEgOiAwKSwgX2tleTIgPSAxOyBfa2V5MiA8IF9sZW4yOyBfa2V5MisrKSB7XG4gICAgICAgICAgYXJnc1tfa2V5MiAtIDFdID0gYXJndW1lbnRzW19rZXkyXTtcbiAgICAgICAgfVxuXG4gICAgICAgIF90aGlzMi5lbWl0LmFwcGx5KF90aGlzMiwgW2V2ZW50XS5jb25jYXQoYXJncykpO1xuICAgICAgfSk7XG5cbiAgICAgIGlmICh0aGlzLm1vZHVsZXMubGFuZ3VhZ2VEZXRlY3Rvcikge1xuICAgICAgICBzLmxhbmd1YWdlRGV0ZWN0b3IgPSBjcmVhdGVDbGFzc09uRGVtYW5kKHRoaXMubW9kdWxlcy5sYW5ndWFnZURldGVjdG9yKTtcbiAgICAgICAgcy5sYW5ndWFnZURldGVjdG9yLmluaXQocywgdGhpcy5vcHRpb25zLmRldGVjdGlvbiwgdGhpcy5vcHRpb25zKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy50cmFuc2xhdG9yID0gbmV3IFRyYW5zbGF0b3IodGhpcy5zZXJ2aWNlcywgdGhpcy5vcHRpb25zKTtcbiAgICAgIC8vIHBpcGUgZXZlbnRzIGZyb20gdHJhbnNsYXRvclxuICAgICAgdGhpcy50cmFuc2xhdG9yLm9uKCcqJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGZvciAodmFyIF9sZW4zID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4zID4gMSA/IF9sZW4zIC0gMSA6IDApLCBfa2V5MyA9IDE7IF9rZXkzIDwgX2xlbjM7IF9rZXkzKyspIHtcbiAgICAgICAgICBhcmdzW19rZXkzIC0gMV0gPSBhcmd1bWVudHNbX2tleTNdO1xuICAgICAgICB9XG5cbiAgICAgICAgX3RoaXMyLmVtaXQuYXBwbHkoX3RoaXMyLCBbZXZlbnRdLmNvbmNhdChhcmdzKSk7XG4gICAgICB9KTtcblxuICAgICAgdGhpcy5tb2R1bGVzLmV4dGVybmFsLmZvckVhY2goZnVuY3Rpb24gKG0pIHtcbiAgICAgICAgaWYgKG0uaW5pdCkgbS5pbml0KF90aGlzMik7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBhcHBlbmQgYXBpXG4gICAgdmFyIHN0b3JlQXBpID0gWydnZXRSZXNvdXJjZScsICdhZGRSZXNvdXJjZScsICdhZGRSZXNvdXJjZXMnLCAnYWRkUmVzb3VyY2VCdW5kbGUnLCAncmVtb3ZlUmVzb3VyY2VCdW5kbGUnLCAnaGFzUmVzb3VyY2VCdW5kbGUnLCAnZ2V0UmVzb3VyY2VCdW5kbGUnXTtcbiAgICBzdG9yZUFwaS5mb3JFYWNoKGZ1bmN0aW9uIChmY05hbWUpIHtcbiAgICAgIF90aGlzMltmY05hbWVdID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3N0b3JlO1xuXG4gICAgICAgIHJldHVybiAoX3N0b3JlID0gX3RoaXMyLnN0b3JlKVtmY05hbWVdLmFwcGx5KF9zdG9yZSwgYXJndW1lbnRzKTtcbiAgICAgIH07XG4gICAgfSk7XG5cbiAgICAvLyBDT01QQVRJQklMSVRZOiByZW1vdmUgdGhpc1xuICAgIGlmICh0aGlzLm9wdGlvbnMuY29tcGF0aWJpbGl0eUFQSSA9PT0gJ3YxJykgYXBwZW5kQmFja3dhcmRzQVBJKHRoaXMpO1xuXG4gICAgdmFyIGxvYWQgPSBmdW5jdGlvbiBsb2FkKCkge1xuICAgICAgX3RoaXMyLmNoYW5nZUxhbmd1YWdlKF90aGlzMi5vcHRpb25zLmxuZywgZnVuY3Rpb24gKGVyciwgdCkge1xuICAgICAgICBfdGhpczIuaXNJbml0aWFsaXplZCA9IHRydWU7XG4gICAgICAgIF90aGlzMi5sb2dnZXIubG9nKCdpbml0aWFsaXplZCcsIF90aGlzMi5vcHRpb25zKTtcbiAgICAgICAgX3RoaXMyLmVtaXQoJ2luaXRpYWxpemVkJywgX3RoaXMyLm9wdGlvbnMpO1xuXG4gICAgICAgIGNhbGxiYWNrKGVyciwgdCk7XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgaWYgKHRoaXMub3B0aW9ucy5yZXNvdXJjZXMgfHwgIXRoaXMub3B0aW9ucy5pbml0SW1tZWRpYXRlKSB7XG4gICAgICBsb2FkKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNldFRpbWVvdXQobG9hZCwgMCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyogZXNsaW50IGNvbnNpc3RlbnQtcmV0dXJuOiAwICovXG5cblxuICBJMThuLnByb3RvdHlwZS5sb2FkUmVzb3VyY2VzID0gZnVuY3Rpb24gbG9hZFJlc291cmNlcygpIHtcbiAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgIHZhciBjYWxsYmFjayA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogbm9vcDtcblxuICAgIGlmICghdGhpcy5vcHRpb25zLnJlc291cmNlcykge1xuICAgICAgaWYgKHRoaXMubGFuZ3VhZ2UgJiYgdGhpcy5sYW5ndWFnZS50b0xvd2VyQ2FzZSgpID09PSAnY2ltb2RlJykgcmV0dXJuIGNhbGxiYWNrKCk7IC8vIGF2b2lkIGxvYWRpbmcgcmVzb3VyY2VzIGZvciBjaW1vZGVcblxuICAgICAgdmFyIHRvTG9hZCA9IFtdO1xuXG4gICAgICB2YXIgYXBwZW5kID0gZnVuY3Rpb24gYXBwZW5kKGxuZykge1xuICAgICAgICBpZiAoIWxuZykgcmV0dXJuO1xuICAgICAgICB2YXIgbG5ncyA9IF90aGlzMy5zZXJ2aWNlcy5sYW5ndWFnZVV0aWxzLnRvUmVzb2x2ZUhpZXJhcmNoeShsbmcpO1xuICAgICAgICBsbmdzLmZvckVhY2goZnVuY3Rpb24gKGwpIHtcbiAgICAgICAgICBpZiAodG9Mb2FkLmluZGV4T2YobCkgPCAwKSB0b0xvYWQucHVzaChsKTtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuXG4gICAgICBpZiAoIXRoaXMubGFuZ3VhZ2UpIHtcbiAgICAgICAgLy8gYXQgbGVhc3QgbG9hZCBmYWxsYmFja3MgaW4gdGhpcyBjYXNlXG4gICAgICAgIHZhciBmYWxsYmFja3MgPSB0aGlzLnNlcnZpY2VzLmxhbmd1YWdlVXRpbHMuZ2V0RmFsbGJhY2tDb2Rlcyh0aGlzLm9wdGlvbnMuZmFsbGJhY2tMbmcpO1xuICAgICAgICBmYWxsYmFja3MuZm9yRWFjaChmdW5jdGlvbiAobCkge1xuICAgICAgICAgIHJldHVybiBhcHBlbmQobCk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYXBwZW5kKHRoaXMubGFuZ3VhZ2UpO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5vcHRpb25zLnByZWxvYWQpIHtcbiAgICAgICAgdGhpcy5vcHRpb25zLnByZWxvYWQuZm9yRWFjaChmdW5jdGlvbiAobCkge1xuICAgICAgICAgIHJldHVybiBhcHBlbmQobCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnNlcnZpY2VzLmNhY2hlQ29ubmVjdG9yLmxvYWQodG9Mb2FkLCB0aGlzLm9wdGlvbnMubnMsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3RoaXMzLnNlcnZpY2VzLmJhY2tlbmRDb25uZWN0b3IubG9hZCh0b0xvYWQsIF90aGlzMy5vcHRpb25zLm5zLCBjYWxsYmFjayk7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgY2FsbGJhY2sobnVsbCk7XG4gICAgfVxuICB9O1xuXG4gIEkxOG4ucHJvdG90eXBlLnJlbG9hZFJlc291cmNlcyA9IGZ1bmN0aW9uIHJlbG9hZFJlc291cmNlcyhsbmdzLCBucykge1xuICAgIGlmICghbG5ncykgbG5ncyA9IHRoaXMubGFuZ3VhZ2VzO1xuICAgIGlmICghbnMpIG5zID0gdGhpcy5vcHRpb25zLm5zO1xuICAgIHRoaXMuc2VydmljZXMuYmFja2VuZENvbm5lY3Rvci5yZWxvYWQobG5ncywgbnMpO1xuICB9O1xuXG4gIEkxOG4ucHJvdG90eXBlLnVzZSA9IGZ1bmN0aW9uIHVzZShtb2R1bGUpIHtcbiAgICBpZiAobW9kdWxlLnR5cGUgPT09ICdiYWNrZW5kJykge1xuICAgICAgdGhpcy5tb2R1bGVzLmJhY2tlbmQgPSBtb2R1bGU7XG4gICAgfVxuXG4gICAgaWYgKG1vZHVsZS50eXBlID09PSAnY2FjaGUnKSB7XG4gICAgICB0aGlzLm1vZHVsZXMuY2FjaGUgPSBtb2R1bGU7XG4gICAgfVxuXG4gICAgaWYgKG1vZHVsZS50eXBlID09PSAnbG9nZ2VyJyB8fCBtb2R1bGUubG9nICYmIG1vZHVsZS53YXJuICYmIG1vZHVsZS5lcnJvcikge1xuICAgICAgdGhpcy5tb2R1bGVzLmxvZ2dlciA9IG1vZHVsZTtcbiAgICB9XG5cbiAgICBpZiAobW9kdWxlLnR5cGUgPT09ICdsYW5ndWFnZURldGVjdG9yJykge1xuICAgICAgdGhpcy5tb2R1bGVzLmxhbmd1YWdlRGV0ZWN0b3IgPSBtb2R1bGU7XG4gICAgfVxuXG4gICAgaWYgKG1vZHVsZS50eXBlID09PSAncG9zdFByb2Nlc3NvcicpIHtcbiAgICAgIHBvc3RQcm9jZXNzb3IuYWRkUG9zdFByb2Nlc3Nvcihtb2R1bGUpO1xuICAgIH1cblxuICAgIGlmIChtb2R1bGUudHlwZSA9PT0gJzNyZFBhcnR5Jykge1xuICAgICAgdGhpcy5tb2R1bGVzLmV4dGVybmFsLnB1c2gobW9kdWxlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICBJMThuLnByb3RvdHlwZS5jaGFuZ2VMYW5ndWFnZSA9IGZ1bmN0aW9uIGNoYW5nZUxhbmd1YWdlKGxuZywgY2FsbGJhY2spIHtcbiAgICB2YXIgX3RoaXM0ID0gdGhpcztcblxuICAgIHZhciBkb25lID0gZnVuY3Rpb24gZG9uZShlcnIsIGwpIHtcbiAgICAgIGlmIChsKSB7XG4gICAgICAgIF90aGlzNC5lbWl0KCdsYW5ndWFnZUNoYW5nZWQnLCBsKTtcbiAgICAgICAgX3RoaXM0LmxvZ2dlci5sb2coJ2xhbmd1YWdlQ2hhbmdlZCcsIGwpO1xuICAgICAgfVxuXG4gICAgICBpZiAoY2FsbGJhY2spIGNhbGxiYWNrKGVyciwgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX3RoaXM0LnQuYXBwbHkoX3RoaXM0LCBhcmd1bWVudHMpO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIHZhciBzZXRMbmcgPSBmdW5jdGlvbiBzZXRMbmcobCkge1xuICAgICAgaWYgKGwpIHtcbiAgICAgICAgX3RoaXM0Lmxhbmd1YWdlID0gbDtcbiAgICAgICAgX3RoaXM0Lmxhbmd1YWdlcyA9IF90aGlzNC5zZXJ2aWNlcy5sYW5ndWFnZVV0aWxzLnRvUmVzb2x2ZUhpZXJhcmNoeShsKTtcblxuICAgICAgICBfdGhpczQudHJhbnNsYXRvci5jaGFuZ2VMYW5ndWFnZShsKTtcblxuICAgICAgICBpZiAoX3RoaXM0LnNlcnZpY2VzLmxhbmd1YWdlRGV0ZWN0b3IpIF90aGlzNC5zZXJ2aWNlcy5sYW5ndWFnZURldGVjdG9yLmNhY2hlVXNlckxhbmd1YWdlKGwpO1xuICAgICAgfVxuXG4gICAgICBfdGhpczQubG9hZFJlc291cmNlcyhmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIGRvbmUoZXJyLCBsKTtcbiAgICAgIH0pO1xuICAgIH07XG5cbiAgICBpZiAoIWxuZyAmJiB0aGlzLnNlcnZpY2VzLmxhbmd1YWdlRGV0ZWN0b3IgJiYgIXRoaXMuc2VydmljZXMubGFuZ3VhZ2VEZXRlY3Rvci5hc3luYykge1xuICAgICAgc2V0TG5nKHRoaXMuc2VydmljZXMubGFuZ3VhZ2VEZXRlY3Rvci5kZXRlY3QoKSk7XG4gICAgfSBlbHNlIGlmICghbG5nICYmIHRoaXMuc2VydmljZXMubGFuZ3VhZ2VEZXRlY3RvciAmJiB0aGlzLnNlcnZpY2VzLmxhbmd1YWdlRGV0ZWN0b3IuYXN5bmMpIHtcbiAgICAgIHRoaXMuc2VydmljZXMubGFuZ3VhZ2VEZXRlY3Rvci5kZXRlY3Qoc2V0TG5nKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2V0TG5nKGxuZyk7XG4gICAgfVxuICB9O1xuXG4gIEkxOG4ucHJvdG90eXBlLmdldEZpeGVkVCA9IGZ1bmN0aW9uIGdldEZpeGVkVChsbmcsIG5zKSB7XG4gICAgdmFyIF90aGlzNSA9IHRoaXM7XG5cbiAgICB2YXIgZml4ZWRUID0gZnVuY3Rpb24gZml4ZWRUKGtleSkge1xuICAgICAgdmFyIG9wdHMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9O1xuXG4gICAgICB2YXIgb3B0aW9ucyA9IF9leHRlbmRzKHt9LCBvcHRzKTtcbiAgICAgIG9wdGlvbnMubG5nID0gb3B0aW9ucy5sbmcgfHwgZml4ZWRULmxuZztcbiAgICAgIG9wdGlvbnMubG5ncyA9IG9wdGlvbnMubG5ncyB8fCBmaXhlZFQubG5ncztcbiAgICAgIG9wdGlvbnMubnMgPSBvcHRpb25zLm5zIHx8IGZpeGVkVC5ucztcbiAgICAgIHJldHVybiBfdGhpczUudChrZXksIG9wdGlvbnMpO1xuICAgIH07XG4gICAgaWYgKHR5cGVvZiBsbmcgPT09ICdzdHJpbmcnKSB7XG4gICAgICBmaXhlZFQubG5nID0gbG5nO1xuICAgIH0gZWxzZSB7XG4gICAgICBmaXhlZFQubG5ncyA9IGxuZztcbiAgICB9XG4gICAgZml4ZWRULm5zID0gbnM7XG4gICAgcmV0dXJuIGZpeGVkVDtcbiAgfTtcblxuICBJMThuLnByb3RvdHlwZS50ID0gZnVuY3Rpb24gdCgpIHtcbiAgICB2YXIgX3RyYW5zbGF0b3I7XG5cbiAgICByZXR1cm4gdGhpcy50cmFuc2xhdG9yICYmIChfdHJhbnNsYXRvciA9IHRoaXMudHJhbnNsYXRvcikudHJhbnNsYXRlLmFwcGx5KF90cmFuc2xhdG9yLCBhcmd1bWVudHMpO1xuICB9O1xuXG4gIEkxOG4ucHJvdG90eXBlLmV4aXN0cyA9IGZ1bmN0aW9uIGV4aXN0cygpIHtcbiAgICB2YXIgX3RyYW5zbGF0b3IyO1xuXG4gICAgcmV0dXJuIHRoaXMudHJhbnNsYXRvciAmJiAoX3RyYW5zbGF0b3IyID0gdGhpcy50cmFuc2xhdG9yKS5leGlzdHMuYXBwbHkoX3RyYW5zbGF0b3IyLCBhcmd1bWVudHMpO1xuICB9O1xuXG4gIEkxOG4ucHJvdG90eXBlLnNldERlZmF1bHROYW1lc3BhY2UgPSBmdW5jdGlvbiBzZXREZWZhdWx0TmFtZXNwYWNlKG5zKSB7XG4gICAgdGhpcy5vcHRpb25zLmRlZmF1bHROUyA9IG5zO1xuICB9O1xuXG4gIEkxOG4ucHJvdG90eXBlLmxvYWROYW1lc3BhY2VzID0gZnVuY3Rpb24gbG9hZE5hbWVzcGFjZXMobnMsIGNhbGxiYWNrKSB7XG4gICAgdmFyIF90aGlzNiA9IHRoaXM7XG5cbiAgICBpZiAoIXRoaXMub3B0aW9ucy5ucykgcmV0dXJuIGNhbGxiYWNrICYmIGNhbGxiYWNrKCk7XG4gICAgaWYgKHR5cGVvZiBucyA9PT0gJ3N0cmluZycpIG5zID0gW25zXTtcblxuICAgIG5zLmZvckVhY2goZnVuY3Rpb24gKG4pIHtcbiAgICAgIGlmIChfdGhpczYub3B0aW9ucy5ucy5pbmRleE9mKG4pIDwgMCkgX3RoaXM2Lm9wdGlvbnMubnMucHVzaChuKTtcbiAgICB9KTtcblxuICAgIHRoaXMubG9hZFJlc291cmNlcyhjYWxsYmFjayk7XG4gIH07XG5cbiAgSTE4bi5wcm90b3R5cGUubG9hZExhbmd1YWdlcyA9IGZ1bmN0aW9uIGxvYWRMYW5ndWFnZXMobG5ncywgY2FsbGJhY2spIHtcbiAgICBpZiAodHlwZW9mIGxuZ3MgPT09ICdzdHJpbmcnKSBsbmdzID0gW2xuZ3NdO1xuICAgIHZhciBwcmVsb2FkZWQgPSB0aGlzLm9wdGlvbnMucHJlbG9hZCB8fCBbXTtcblxuICAgIHZhciBuZXdMbmdzID0gbG5ncy5maWx0ZXIoZnVuY3Rpb24gKGxuZykge1xuICAgICAgcmV0dXJuIHByZWxvYWRlZC5pbmRleE9mKGxuZykgPCAwO1xuICAgIH0pO1xuICAgIC8vIEV4aXQgZWFybHkgaWYgYWxsIGdpdmVuIGxhbmd1YWdlcyBhcmUgYWxyZWFkeSBwcmVsb2FkZWRcbiAgICBpZiAoIW5ld0xuZ3MubGVuZ3RoKSByZXR1cm4gY2FsbGJhY2soKTtcblxuICAgIHRoaXMub3B0aW9ucy5wcmVsb2FkID0gcHJlbG9hZGVkLmNvbmNhdChuZXdMbmdzKTtcbiAgICB0aGlzLmxvYWRSZXNvdXJjZXMoY2FsbGJhY2spO1xuICB9O1xuXG4gIEkxOG4ucHJvdG90eXBlLmRpciA9IGZ1bmN0aW9uIGRpcihsbmcpIHtcbiAgICBpZiAoIWxuZykgbG5nID0gdGhpcy5sYW5ndWFnZXMgJiYgdGhpcy5sYW5ndWFnZXMubGVuZ3RoID4gMCA/IHRoaXMubGFuZ3VhZ2VzWzBdIDogdGhpcy5sYW5ndWFnZTtcbiAgICBpZiAoIWxuZykgcmV0dXJuICdydGwnO1xuXG4gICAgdmFyIHJ0bExuZ3MgPSBbJ2FyJywgJ3NodScsICdzcXInLCAnc3NoJywgJ3hhYScsICd5aGQnLCAneXVkJywgJ2FhbycsICdhYmgnLCAnYWJ2JywgJ2FjbScsICdhY3EnLCAnYWN3JywgJ2FjeCcsICdhY3knLCAnYWRmJywgJ2FkcycsICdhZWInLCAnYWVjJywgJ2FmYicsICdhanAnLCAnYXBjJywgJ2FwZCcsICdhcmInLCAnYXJxJywgJ2FycycsICdhcnknLCAnYXJ6JywgJ2F1eicsICdhdmwnLCAnYXloJywgJ2F5bCcsICdheW4nLCAnYXlwJywgJ2JieicsICdwZ2EnLCAnaGUnLCAnaXcnLCAncHMnLCAncGJ0JywgJ3BidScsICdwc3QnLCAncHJwJywgJ3ByZCcsICd1cicsICd5ZGQnLCAneWRzJywgJ3lpaCcsICdqaScsICd5aScsICdoYm8nLCAnbWVuJywgJ3htbicsICdmYScsICdqcHInLCAncGVvJywgJ3BlcycsICdwcnMnLCAnZHYnLCAnc2FtJ107XG5cbiAgICByZXR1cm4gcnRsTG5ncy5pbmRleE9mKHRoaXMuc2VydmljZXMubGFuZ3VhZ2VVdGlscy5nZXRMYW5ndWFnZVBhcnRGcm9tQ29kZShsbmcpKSA+PSAwID8gJ3J0bCcgOiAnbHRyJztcbiAgfTtcblxuICAvKiBlc2xpbnQgY2xhc3MtbWV0aG9kcy11c2UtdGhpczogMCAqL1xuXG5cbiAgSTE4bi5wcm90b3R5cGUuY3JlYXRlSW5zdGFuY2UgPSBmdW5jdGlvbiBjcmVhdGVJbnN0YW5jZSgpIHtcbiAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307XG4gICAgdmFyIGNhbGxiYWNrID0gYXJndW1lbnRzWzFdO1xuXG4gICAgcmV0dXJuIG5ldyBJMThuKG9wdGlvbnMsIGNhbGxiYWNrKTtcbiAgfTtcblxuICBJMThuLnByb3RvdHlwZS5jbG9uZUluc3RhbmNlID0gZnVuY3Rpb24gY2xvbmVJbnN0YW5jZSgpIHtcbiAgICB2YXIgX3RoaXM3ID0gdGhpcztcblxuICAgIHZhciBvcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTtcbiAgICB2YXIgY2FsbGJhY2sgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IG5vb3A7XG5cbiAgICB2YXIgbWVyZ2VkT3B0aW9ucyA9IF9leHRlbmRzKHt9LCB0aGlzLm9wdGlvbnMsIG9wdGlvbnMsIHsgaXNDbG9uZTogdHJ1ZSB9KTtcbiAgICB2YXIgY2xvbmUgPSBuZXcgSTE4bihtZXJnZWRPcHRpb25zLCBjYWxsYmFjayk7XG4gICAgdmFyIG1lbWJlcnNUb0NvcHkgPSBbJ3N0b3JlJywgJ3NlcnZpY2VzJywgJ2xhbmd1YWdlJ107XG4gICAgbWVtYmVyc1RvQ29weS5mb3JFYWNoKGZ1bmN0aW9uIChtKSB7XG4gICAgICBjbG9uZVttXSA9IF90aGlzN1ttXTtcbiAgICB9KTtcbiAgICBjbG9uZS50cmFuc2xhdG9yID0gbmV3IFRyYW5zbGF0b3IoY2xvbmUuc2VydmljZXMsIGNsb25lLm9wdGlvbnMpO1xuICAgIGNsb25lLnRyYW5zbGF0b3Iub24oJyonLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgIGZvciAodmFyIF9sZW40ID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW40ID4gMSA/IF9sZW40IC0gMSA6IDApLCBfa2V5NCA9IDE7IF9rZXk0IDwgX2xlbjQ7IF9rZXk0KyspIHtcbiAgICAgICAgYXJnc1tfa2V5NCAtIDFdID0gYXJndW1lbnRzW19rZXk0XTtcbiAgICAgIH1cblxuICAgICAgY2xvbmUuZW1pdC5hcHBseShjbG9uZSwgW2V2ZW50XS5jb25jYXQoYXJncykpO1xuICAgIH0pO1xuICAgIGNsb25lLmluaXQobWVyZ2VkT3B0aW9ucywgY2FsbGJhY2spO1xuXG4gICAgcmV0dXJuIGNsb25lO1xuICB9O1xuXG4gIHJldHVybiBJMThuO1xufShFdmVudEVtaXR0ZXIpO1xuXG52YXIgaTE4bmV4dCA9IG5ldyBJMThuKCk7XG5cbnJldHVybiBpMThuZXh0O1xuXG59KSkpO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9leHRlcm5hbC9pMThuZXh0L3NjcmlwdHMvaTE4bmV4dC5qc1xuLy8gbW9kdWxlIGlkID0gNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCIoZnVuY3Rpb24gKGdsb2JhbCwgZmFjdG9yeSkge1xuICB0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgPyBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKSA6XG4gIHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCA/IGRlZmluZShmYWN0b3J5KSA6XG4gIChnbG9iYWwuaTE4bmV4dFhIUkJhY2tlbmQgPSBmYWN0b3J5KCkpO1xufSh0aGlzLCAoZnVuY3Rpb24gKCkgeyAndXNlIHN0cmljdCc7XG5cbnZhciBhcnIgPSBbXTtcbnZhciBlYWNoID0gYXJyLmZvckVhY2g7XG52YXIgc2xpY2UgPSBhcnIuc2xpY2U7XG5cbmZ1bmN0aW9uIGRlZmF1bHRzKG9iaikge1xuICBlYWNoLmNhbGwoc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpLCBmdW5jdGlvbiAoc291cmNlKSB7XG4gICAgaWYgKHNvdXJjZSkge1xuICAgICAgZm9yICh2YXIgcHJvcCBpbiBzb3VyY2UpIHtcbiAgICAgICAgaWYgKG9ialtwcm9wXSA9PT0gdW5kZWZpbmVkKSBvYmpbcHJvcF0gPSBzb3VyY2VbcHJvcF07XG4gICAgICB9XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIG9iajtcbn1cblxudmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXG5mdW5jdGlvbiBhZGRRdWVyeVN0cmluZyh1cmwsIHBhcmFtcykge1xuICBpZiAocGFyYW1zICYmICh0eXBlb2YgcGFyYW1zID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihwYXJhbXMpKSA9PT0gJ29iamVjdCcpIHtcbiAgICB2YXIgcXVlcnlTdHJpbmcgPSAnJyxcbiAgICAgICAgZSA9IGVuY29kZVVSSUNvbXBvbmVudDtcblxuICAgIC8vIE11c3QgZW5jb2RlIGRhdGFcbiAgICBmb3IgKHZhciBwYXJhbU5hbWUgaW4gcGFyYW1zKSB7XG4gICAgICBxdWVyeVN0cmluZyArPSAnJicgKyBlKHBhcmFtTmFtZSkgKyAnPScgKyBlKHBhcmFtc1twYXJhbU5hbWVdKTtcbiAgICB9XG5cbiAgICBpZiAoIXF1ZXJ5U3RyaW5nKSB7XG4gICAgICByZXR1cm4gdXJsO1xuICAgIH1cblxuICAgIHVybCA9IHVybCArICh1cmwuaW5kZXhPZignPycpICE9PSAtMSA/ICcmJyA6ICc/JykgKyBxdWVyeVN0cmluZy5zbGljZSgxKTtcbiAgfVxuXG4gIHJldHVybiB1cmw7XG59XG5cbi8vIGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL1hlb25jcm9zcy83NjYzMjczXG5mdW5jdGlvbiBhamF4KHVybCwgb3B0aW9ucywgY2FsbGJhY2ssIGRhdGEsIGNhY2hlKSB7XG5cbiAgaWYgKGRhdGEgJiYgKHR5cGVvZiBkYXRhID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihkYXRhKSkgPT09ICdvYmplY3QnKSB7XG4gICAgaWYgKCFjYWNoZSkge1xuICAgICAgZGF0YVsnX3QnXSA9IG5ldyBEYXRlKCk7XG4gICAgfVxuICAgIC8vIFVSTCBlbmNvZGVkIGZvcm0gZGF0YSBtdXN0IGJlIGluIHF1ZXJ5c3RyaW5nIGZvcm1hdFxuICAgIGRhdGEgPSBhZGRRdWVyeVN0cmluZygnJywgZGF0YSkuc2xpY2UoMSk7XG4gIH1cblxuICBpZiAob3B0aW9ucy5xdWVyeVN0cmluZ1BhcmFtcykge1xuICAgIHVybCA9IGFkZFF1ZXJ5U3RyaW5nKHVybCwgb3B0aW9ucy5xdWVyeVN0cmluZ1BhcmFtcyk7XG4gIH1cblxuICB0cnkge1xuICAgIHZhciB4O1xuICAgIGlmIChYTUxIdHRwUmVxdWVzdCkge1xuICAgICAgeCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB4ID0gbmV3IEFjdGl2ZVhPYmplY3QoJ01TWE1MMi5YTUxIVFRQLjMuMCcpO1xuICAgIH1cbiAgICB4Lm9wZW4oZGF0YSA/ICdQT1NUJyA6ICdHRVQnLCB1cmwsIDEpO1xuICAgIGlmICghb3B0aW9ucy5jcm9zc0RvbWFpbikge1xuICAgICAgeC5zZXRSZXF1ZXN0SGVhZGVyKCdYLVJlcXVlc3RlZC1XaXRoJywgJ1hNTEh0dHBSZXF1ZXN0Jyk7XG4gICAgfVxuICAgIHgud2l0aENyZWRlbnRpYWxzID0gISFvcHRpb25zLndpdGhDcmVkZW50aWFscztcbiAgICBpZiAoZGF0YSkge1xuICAgICAgeC5zZXRSZXF1ZXN0SGVhZGVyKCdDb250ZW50LXR5cGUnLCAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyk7XG4gICAgfVxuICAgIHZhciBoID0gb3B0aW9ucy5jdXN0b21IZWFkZXJzO1xuICAgIGlmIChoKSB7XG4gICAgICBmb3IgKHZhciBpIGluIGgpIHtcbiAgICAgICAgeC5zZXRSZXF1ZXN0SGVhZGVyKGksIGhbaV0pO1xuICAgICAgfVxuICAgIH1cbiAgICB4Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHgucmVhZHlTdGF0ZSA+IDMgJiYgY2FsbGJhY2sgJiYgY2FsbGJhY2soeC5yZXNwb25zZVRleHQsIHgpO1xuICAgIH07XG4gICAgeC5zZW5kKGRhdGEpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZSAmJiBjb25zb2xlLmxvZyhlKTtcbiAgfVxufVxuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBnZXREZWZhdWx0cygpIHtcbiAgcmV0dXJuIHtcbiAgICBsb2FkUGF0aDogJy9sb2NhbGVzL3t7bG5nfX0ve3tuc319Lmpzb24nLFxuICAgIGFkZFBhdGg6ICdsb2NhbGVzL2FkZC97e2xuZ319L3t7bnN9fScsXG4gICAgYWxsb3dNdWx0aUxvYWRpbmc6IGZhbHNlLFxuICAgIHBhcnNlOiBKU09OLnBhcnNlLFxuICAgIGNyb3NzRG9tYWluOiBmYWxzZSxcbiAgICBhamF4OiBhamF4XG4gIH07XG59XG5cbnZhciBCYWNrZW5kID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBCYWNrZW5kKHNlcnZpY2VzKSB7XG4gICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9O1xuXG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEJhY2tlbmQpO1xuXG4gICAgdGhpcy5pbml0KHNlcnZpY2VzLCBvcHRpb25zKTtcblxuICAgIHRoaXMudHlwZSA9ICdiYWNrZW5kJztcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhCYWNrZW5kLCBbe1xuICAgIGtleTogJ2luaXQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0KHNlcnZpY2VzKSB7XG4gICAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307XG5cbiAgICAgIHRoaXMuc2VydmljZXMgPSBzZXJ2aWNlcztcbiAgICAgIHRoaXMub3B0aW9ucyA9IGRlZmF1bHRzKG9wdGlvbnMsIHRoaXMub3B0aW9ucyB8fCB7fSwgZ2V0RGVmYXVsdHMoKSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAncmVhZE11bHRpJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gcmVhZE11bHRpKGxhbmd1YWdlcywgbmFtZXNwYWNlcywgY2FsbGJhY2spIHtcbiAgICAgIHZhciBsb2FkUGF0aCA9IHRoaXMub3B0aW9ucy5sb2FkUGF0aDtcbiAgICAgIGlmICh0eXBlb2YgdGhpcy5vcHRpb25zLmxvYWRQYXRoID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIGxvYWRQYXRoID0gdGhpcy5vcHRpb25zLmxvYWRQYXRoKGxhbmd1YWdlcywgbmFtZXNwYWNlcyk7XG4gICAgICB9XG5cbiAgICAgIHZhciB1cmwgPSB0aGlzLnNlcnZpY2VzLmludGVycG9sYXRvci5pbnRlcnBvbGF0ZShsb2FkUGF0aCwgeyBsbmc6IGxhbmd1YWdlcy5qb2luKCcrJyksIG5zOiBuYW1lc3BhY2VzLmpvaW4oJysnKSB9KTtcblxuICAgICAgdGhpcy5sb2FkVXJsKHVybCwgY2FsbGJhY2spO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ3JlYWQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiByZWFkKGxhbmd1YWdlLCBuYW1lc3BhY2UsIGNhbGxiYWNrKSB7XG4gICAgICB2YXIgbG9hZFBhdGggPSB0aGlzLm9wdGlvbnMubG9hZFBhdGg7XG4gICAgICBpZiAodHlwZW9mIHRoaXMub3B0aW9ucy5sb2FkUGF0aCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBsb2FkUGF0aCA9IHRoaXMub3B0aW9ucy5sb2FkUGF0aChbbGFuZ3VhZ2VdLCBbbmFtZXNwYWNlXSk7XG4gICAgICB9XG5cbiAgICAgIHZhciB1cmwgPSB0aGlzLnNlcnZpY2VzLmludGVycG9sYXRvci5pbnRlcnBvbGF0ZShsb2FkUGF0aCwgeyBsbmc6IGxhbmd1YWdlLCBuczogbmFtZXNwYWNlIH0pO1xuXG4gICAgICB0aGlzLmxvYWRVcmwodXJsLCBjYWxsYmFjayk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiAnbG9hZFVybCcsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGxvYWRVcmwodXJsLCBjYWxsYmFjaykge1xuICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgdGhpcy5vcHRpb25zLmFqYXgodXJsLCB0aGlzLm9wdGlvbnMsIGZ1bmN0aW9uIChkYXRhLCB4aHIpIHtcbiAgICAgICAgaWYgKHhoci5zdGF0dXMgPj0gNTAwICYmIHhoci5zdGF0dXMgPCA2MDApIHJldHVybiBjYWxsYmFjaygnZmFpbGVkIGxvYWRpbmcgJyArIHVybCwgdHJ1ZSAvKiByZXRyeSAqLyk7XG4gICAgICAgIGlmICh4aHIuc3RhdHVzID49IDQwMCAmJiB4aHIuc3RhdHVzIDwgNTAwKSByZXR1cm4gY2FsbGJhY2soJ2ZhaWxlZCBsb2FkaW5nICcgKyB1cmwsIGZhbHNlIC8qIG5vIHJldHJ5ICovKTtcblxuICAgICAgICB2YXIgcmV0ID0gdm9pZCAwLFxuICAgICAgICAgICAgZXJyID0gdm9pZCAwO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHJldCA9IF90aGlzLm9wdGlvbnMucGFyc2UoZGF0YSwgdXJsKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgIGVyciA9ICdmYWlsZWQgcGFyc2luZyAnICsgdXJsICsgJyB0byBqc29uJztcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXJyKSByZXR1cm4gY2FsbGJhY2soZXJyLCBmYWxzZSk7XG4gICAgICAgIGNhbGxiYWNrKG51bGwsIHJldCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdjcmVhdGUnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGUobGFuZ3VhZ2VzLCBuYW1lc3BhY2UsIGtleSwgZmFsbGJhY2tWYWx1ZSkge1xuICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgIGlmICh0eXBlb2YgbGFuZ3VhZ2VzID09PSAnc3RyaW5nJykgbGFuZ3VhZ2VzID0gW2xhbmd1YWdlc107XG5cbiAgICAgIHZhciBwYXlsb2FkID0ge307XG4gICAgICBwYXlsb2FkW2tleV0gPSBmYWxsYmFja1ZhbHVlIHx8ICcnO1xuXG4gICAgICBsYW5ndWFnZXMuZm9yRWFjaChmdW5jdGlvbiAobG5nKSB7XG4gICAgICAgIHZhciB1cmwgPSBfdGhpczIuc2VydmljZXMuaW50ZXJwb2xhdG9yLmludGVycG9sYXRlKF90aGlzMi5vcHRpb25zLmFkZFBhdGgsIHsgbG5nOiBsbmcsIG5zOiBuYW1lc3BhY2UgfSk7XG5cbiAgICAgICAgX3RoaXMyLm9wdGlvbnMuYWpheCh1cmwsIF90aGlzMi5vcHRpb25zLCBmdW5jdGlvbiAoZGF0YSwgeGhyKSB7XG4gICAgICAgICAgLy9jb25zdCBzdGF0dXNDb2RlID0geGhyLnN0YXR1cy50b1N0cmluZygpO1xuICAgICAgICAgIC8vIFRPRE86IGlmIHN0YXR1c0NvZGUgPT09IDR4eCBkbyBsb2dcbiAgICAgICAgfSwgcGF5bG9hZCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gQmFja2VuZDtcbn0oKTtcblxuQmFja2VuZC50eXBlID0gJ2JhY2tlbmQnO1xuXG5yZXR1cm4gQmFja2VuZDtcblxufSkpKTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vZXh0ZXJuYWwvaTE4bmV4dC9zY3JpcHRzL2kxOG5leHRYSFJCYWNrZW5kLmpzXG4vLyBtb2R1bGUgaWQgPSA2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG5cdHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpIDpcblx0dHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKGZhY3RvcnkpIDpcblx0KGdsb2JhbC5pMThuZXh0TG9jYWxTdG9yYWdlQ2FjaGUgPSBmYWN0b3J5KCkpO1xufSh0aGlzLCAoZnVuY3Rpb24gKCkgeyAndXNlIHN0cmljdCc7XG5cbnZhciBhcnIgPSBbXTtcbnZhciBlYWNoID0gYXJyLmZvckVhY2g7XG52YXIgc2xpY2UgPSBhcnIuc2xpY2U7XG5cbmZ1bmN0aW9uIGRlZmF1bHRzKG9iaikge1xuICBlYWNoLmNhbGwoc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpLCBmdW5jdGlvbiAoc291cmNlKSB7XG4gICAgaWYgKHNvdXJjZSkge1xuICAgICAgZm9yICh2YXIgcHJvcCBpbiBzb3VyY2UpIHtcbiAgICAgICAgaWYgKG9ialtwcm9wXSA9PT0gdW5kZWZpbmVkKSBvYmpbcHJvcF0gPSBzb3VyY2VbcHJvcF07XG4gICAgICB9XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIG9iajtcbn1cblxuXG5cbmZ1bmN0aW9uIGRlYm91bmNlKGZ1bmMsIHdhaXQsIGltbWVkaWF0ZSkge1xuICB2YXIgdGltZW91dDtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgY29udGV4dCA9IHRoaXMsXG4gICAgICAgIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgdmFyIGxhdGVyID0gZnVuY3Rpb24gbGF0ZXIoKSB7XG4gICAgICB0aW1lb3V0ID0gbnVsbDtcbiAgICAgIGlmICghaW1tZWRpYXRlKSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgIH07XG4gICAgdmFyIGNhbGxOb3cgPSBpbW1lZGlhdGUgJiYgIXRpbWVvdXQ7XG4gICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCB3YWl0KTtcbiAgICBpZiAoY2FsbE5vdykgZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgfTtcbn1cblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxudmFyIHN0b3JhZ2UgPSB7XG4gIHNldEl0ZW06IGZ1bmN0aW9uIHNldEl0ZW0oa2V5LCB2YWx1ZSkge1xuICAgIGlmICh3aW5kb3cubG9jYWxTdG9yYWdlKSB7XG4gICAgICB0cnkge1xuICAgICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCB2YWx1ZSk7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIC8vIGYubG9nKCdmYWlsZWQgdG8gc2V0IHZhbHVlIGZvciBrZXkgXCInICsga2V5ICsgJ1wiIHRvIGxvY2FsU3RvcmFnZS4nKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG4gIGdldEl0ZW06IGZ1bmN0aW9uIGdldEl0ZW0oa2V5LCB2YWx1ZSkge1xuICAgIGlmICh3aW5kb3cubG9jYWxTdG9yYWdlKSB7XG4gICAgICB0cnkge1xuICAgICAgICByZXR1cm4gd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSwgdmFsdWUpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvLyBmLmxvZygnZmFpbGVkIHRvIGdldCB2YWx1ZSBmb3Iga2V5IFwiJyArIGtleSArICdcIiBmcm9tIGxvY2FsU3RvcmFnZS4nKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxufTtcblxuZnVuY3Rpb24gZ2V0RGVmYXVsdHMoKSB7XG4gIHJldHVybiB7XG4gICAgZW5hYmxlZDogZmFsc2UsXG4gICAgcHJlZml4OiAnaTE4bmV4dF9yZXNfJyxcbiAgICBleHBpcmF0aW9uVGltZTogNyAqIDI0ICogNjAgKiA2MCAqIDEwMDAsXG4gICAgdmVyc2lvbnM6IHt9XG4gIH07XG59XG5cbnZhciBDYWNoZSA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gQ2FjaGUoc2VydmljZXMpIHtcbiAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307XG5cbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ2FjaGUpO1xuXG4gICAgdGhpcy5pbml0KHNlcnZpY2VzLCBvcHRpb25zKTtcblxuICAgIHRoaXMudHlwZSA9ICdjYWNoZSc7XG4gICAgdGhpcy5kZWJvdW5jZWRTdG9yZSA9IGRlYm91bmNlKHRoaXMuc3RvcmUsIDEwMDAwKTtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhDYWNoZSwgW3tcbiAgICBrZXk6ICdpbml0JyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdChzZXJ2aWNlcykge1xuICAgICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9O1xuXG4gICAgICB0aGlzLnNlcnZpY2VzID0gc2VydmljZXM7XG4gICAgICB0aGlzLm9wdGlvbnMgPSBkZWZhdWx0cyhvcHRpb25zLCB0aGlzLm9wdGlvbnMgfHwge30sIGdldERlZmF1bHRzKCkpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogJ2xvYWQnLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBsb2FkKGxuZ3MsIGNhbGxiYWNrKSB7XG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICB2YXIgc3RvcmUgPSB7fTtcbiAgICAgIHZhciBub3dNUyA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuXG4gICAgICBpZiAoIXdpbmRvdy5sb2NhbFN0b3JhZ2UgfHwgIWxuZ3MubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsLCBudWxsKTtcbiAgICAgIH1cblxuICAgICAgdmFyIHRvZG8gPSBsbmdzLmxlbmd0aDtcblxuICAgICAgbG5ncy5mb3JFYWNoKGZ1bmN0aW9uIChsbmcpIHtcbiAgICAgICAgdmFyIGxvY2FsID0gc3RvcmFnZS5nZXRJdGVtKF90aGlzLm9wdGlvbnMucHJlZml4ICsgbG5nKTtcblxuICAgICAgICBpZiAobG9jYWwpIHtcbiAgICAgICAgICBsb2NhbCA9IEpTT04ucGFyc2UobG9jYWwpO1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAvLyBleHBpcmF0aW9uIGZpZWxkIGlzIG1hbmRhdG9yeSwgYW5kIHNob3VsZCBub3QgYmUgZXhwaXJlZFxuICAgICAgICAgIGxvY2FsLmkxOG5TdGFtcCAmJiBsb2NhbC5pMThuU3RhbXAgKyBfdGhpcy5vcHRpb25zLmV4cGlyYXRpb25UaW1lID4gbm93TVMgJiZcblxuICAgICAgICAgIC8vIHRoZXJlIHNob3VsZCBiZSBubyBsYW5ndWFnZSB2ZXJzaW9uIHNldCwgb3IgaWYgaXQgaXMsIGl0IHNob3VsZCBtYXRjaCB0aGUgb25lIGluIHRyYW5zbGF0aW9uXG4gICAgICAgICAgX3RoaXMub3B0aW9ucy52ZXJzaW9uc1tsbmddID09PSBsb2NhbC5pMThuVmVyc2lvbikge1xuICAgICAgICAgICAgZGVsZXRlIGxvY2FsLmkxOG5WZXJzaW9uO1xuICAgICAgICAgICAgc3RvcmVbbG5nXSA9IGxvY2FsO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRvZG8gLT0gMTtcbiAgICAgICAgaWYgKHRvZG8gPT09IDApIHtcbiAgICAgICAgICBjYWxsYmFjayhudWxsLCBzdG9yZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdzdG9yZScsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHN0b3JlKHN0b3JlUGFyYW0pIHtcbiAgICAgIHZhciBzdG9yZSA9IHN0b3JlUGFyYW07XG4gICAgICBpZiAod2luZG93LmxvY2FsU3RvcmFnZSkge1xuICAgICAgICBmb3IgKHZhciBtIGluIHN0b3JlKSB7XG4gICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbGluZVxuICAgICAgICAgIC8vIHRpbWVzdGFtcFxuICAgICAgICAgIHN0b3JlW21dLmkxOG5TdGFtcCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuXG4gICAgICAgICAgLy8gbGFuZ3VhZ2UgdmVyc2lvbiAoaWYgc2V0KVxuICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMudmVyc2lvbnNbbV0pIHtcbiAgICAgICAgICAgIHN0b3JlW21dLmkxOG5WZXJzaW9uID0gdGhpcy5vcHRpb25zLnZlcnNpb25zW21dO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIHNhdmVcbiAgICAgICAgICBzdG9yYWdlLnNldEl0ZW0odGhpcy5vcHRpb25zLnByZWZpeCArIG0sIEpTT04uc3RyaW5naWZ5KHN0b3JlW21dKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6ICdzYXZlJyxcbiAgICB2YWx1ZTogZnVuY3Rpb24gc2F2ZShzdG9yZSkge1xuICAgICAgdGhpcy5kZWJvdW5jZWRTdG9yZShzdG9yZSk7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIENhY2hlO1xufSgpO1xuXG5DYWNoZS50eXBlID0gJ2NhY2hlJztcblxucmV0dXJuIENhY2hlO1xuXG59KSkpO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9leHRlcm5hbC9pMThuZXh0L3NjcmlwdHMvaTE4bmV4dExvY2FsU3RvcmFnZUNhY2hlLmpzXG4vLyBtb2R1bGUgaWQgPSA3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG4gICAgdHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnID8gbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCkgOlxuICAgIHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCA/IGRlZmluZSgnaTE4bmV4dFNwcmludGZQb3N0UHJvY2Vzc29yJywgZmFjdG9yeSkgOlxuICAgIChnbG9iYWwuaTE4bmV4dFNwcmludGZQb3N0UHJvY2Vzc29yID0gZmFjdG9yeSgpKTtcbn0odGhpcywgZnVuY3Rpb24gKCkgeyAndXNlIHN0cmljdCc7XG5cbiAgICB2YXIgYmFiZWxIZWxwZXJzID0ge307XG4gICAgYmFiZWxIZWxwZXJzLnR5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikge1xuICAgICAgcmV0dXJuIHR5cGVvZiBvYmo7XG4gICAgfSA6IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgIHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7XG4gICAgfTtcbiAgICBiYWJlbEhlbHBlcnM7XG5cbiAgICB2YXIgcmUgPSB7XG4gICAgICAgIG5vdF9zdHJpbmc6IC9bXnNdLyxcbiAgICAgICAgbnVtYmVyOiAvW2RpZWZnXS8sXG4gICAgICAgIGpzb246IC9bal0vLFxuICAgICAgICBub3RfanNvbjogL1teal0vLFxuICAgICAgICB0ZXh0OiAvXlteXFx4MjVdKy8sXG4gICAgICAgIG1vZHVsbzogL15cXHgyNXsyfS8sXG4gICAgICAgIHBsYWNlaG9sZGVyOiAvXlxceDI1KD86KFsxLTldXFxkKilcXCR8XFwoKFteXFwpXSspXFwpKT8oXFwrKT8oMHwnW14kXSk/KC0pPyhcXGQrKT8oPzpcXC4oXFxkKykpPyhbYi1naWpvc3V4WF0pLyxcbiAgICAgICAga2V5OiAvXihbYS16X11bYS16X1xcZF0qKS9pLFxuICAgICAgICBrZXlfYWNjZXNzOiAvXlxcLihbYS16X11bYS16X1xcZF0qKS9pLFxuICAgICAgICBpbmRleF9hY2Nlc3M6IC9eXFxbKFxcZCspXFxdLyxcbiAgICAgICAgc2lnbjogL15bXFwrXFwtXS9cbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gc3ByaW50ZigpIHtcbiAgICAgICAgdmFyIGtleSA9IGFyZ3VtZW50c1swXSxcbiAgICAgICAgICAgIGNhY2hlID0gc3ByaW50Zi5jYWNoZTtcbiAgICAgICAgaWYgKCEoY2FjaGVba2V5XSAmJiBjYWNoZS5oYXNPd25Qcm9wZXJ0eShrZXkpKSkge1xuICAgICAgICAgICAgY2FjaGVba2V5XSA9IHNwcmludGYucGFyc2Uoa2V5KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3ByaW50Zi5mb3JtYXQuY2FsbChudWxsLCBjYWNoZVtrZXldLCBhcmd1bWVudHMpO1xuICAgIH1cblxuICAgIHNwcmludGYuZm9ybWF0ID0gZnVuY3Rpb24gKHBhcnNlX3RyZWUsIGFyZ3YpIHtcbiAgICAgICAgdmFyIGN1cnNvciA9IDEsXG4gICAgICAgICAgICB0cmVlX2xlbmd0aCA9IHBhcnNlX3RyZWUubGVuZ3RoLFxuICAgICAgICAgICAgbm9kZV90eXBlID0gXCJcIixcbiAgICAgICAgICAgIGFyZyxcbiAgICAgICAgICAgIG91dHB1dCA9IFtdLFxuICAgICAgICAgICAgaSxcbiAgICAgICAgICAgIGssXG4gICAgICAgICAgICBtYXRjaCxcbiAgICAgICAgICAgIHBhZCxcbiAgICAgICAgICAgIHBhZF9jaGFyYWN0ZXIsXG4gICAgICAgICAgICBwYWRfbGVuZ3RoLFxuICAgICAgICAgICAgaXNfcG9zaXRpdmUgPSB0cnVlLFxuICAgICAgICAgICAgc2lnbiA9IFwiXCI7XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCB0cmVlX2xlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBub2RlX3R5cGUgPSBnZXRfdHlwZShwYXJzZV90cmVlW2ldKTtcbiAgICAgICAgICAgIGlmIChub2RlX3R5cGUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICBvdXRwdXRbb3V0cHV0Lmxlbmd0aF0gPSBwYXJzZV90cmVlW2ldO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChub2RlX3R5cGUgPT09IFwiYXJyYXlcIikge1xuICAgICAgICAgICAgICAgIG1hdGNoID0gcGFyc2VfdHJlZVtpXTsgLy8gY29udmVuaWVuY2UgcHVycG9zZXMgb25seVxuICAgICAgICAgICAgICAgIGlmIChtYXRjaFsyXSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBrZXl3b3JkIGFyZ3VtZW50XG4gICAgICAgICAgICAgICAgICAgIGFyZyA9IGFyZ3ZbY3Vyc29yXTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChrID0gMDsgayA8IG1hdGNoWzJdLmxlbmd0aDsgaysrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWFyZy5oYXNPd25Qcm9wZXJ0eShtYXRjaFsyXVtrXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3Ioc3ByaW50ZihcIltzcHJpbnRmXSBwcm9wZXJ0eSAnJXMnIGRvZXMgbm90IGV4aXN0XCIsIG1hdGNoWzJdW2tdKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmcgPSBhcmdbbWF0Y2hbMl1ba11dO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChtYXRjaFsxXSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBwb3NpdGlvbmFsIGFyZ3VtZW50IChleHBsaWNpdClcbiAgICAgICAgICAgICAgICAgICAgYXJnID0gYXJndlttYXRjaFsxXV07XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gcG9zaXRpb25hbCBhcmd1bWVudCAoaW1wbGljaXQpXG4gICAgICAgICAgICAgICAgICAgIGFyZyA9IGFyZ3ZbY3Vyc29yKytdO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChnZXRfdHlwZShhcmcpID09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgICAgICBhcmcgPSBhcmcoKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAocmUubm90X3N0cmluZy50ZXN0KG1hdGNoWzhdKSAmJiByZS5ub3RfanNvbi50ZXN0KG1hdGNoWzhdKSAmJiBnZXRfdHlwZShhcmcpICE9IFwibnVtYmVyXCIgJiYgaXNOYU4oYXJnKSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHNwcmludGYoXCJbc3ByaW50Zl0gZXhwZWN0aW5nIG51bWJlciBidXQgZm91bmQgJXNcIiwgZ2V0X3R5cGUoYXJnKSkpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChyZS5udW1iZXIudGVzdChtYXRjaFs4XSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaXNfcG9zaXRpdmUgPSBhcmcgPj0gMDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBzd2l0Y2ggKG1hdGNoWzhdKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJiXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmcgPSBhcmcudG9TdHJpbmcoMik7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImNcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZyA9IFN0cmluZy5mcm9tQ2hhckNvZGUoYXJnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZFwiOlxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiaVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgYXJnID0gcGFyc2VJbnQoYXJnLCAxMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImpcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZyA9IEpTT04uc3RyaW5naWZ5KGFyZywgbnVsbCwgbWF0Y2hbNl0gPyBwYXJzZUludChtYXRjaFs2XSkgOiAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgYXJnID0gbWF0Y2hbN10gPyBhcmcudG9FeHBvbmVudGlhbChtYXRjaFs3XSkgOiBhcmcudG9FeHBvbmVudGlhbCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJmXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmcgPSBtYXRjaFs3XSA/IHBhcnNlRmxvYXQoYXJnKS50b0ZpeGVkKG1hdGNoWzddKSA6IHBhcnNlRmxvYXQoYXJnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZ1wiOlxuICAgICAgICAgICAgICAgICAgICAgICAgYXJnID0gbWF0Y2hbN10gPyBwYXJzZUZsb2F0KGFyZykudG9QcmVjaXNpb24obWF0Y2hbN10pIDogcGFyc2VGbG9hdChhcmcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJvXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmcgPSBhcmcudG9TdHJpbmcoOCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInNcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZyA9IChhcmcgPSBTdHJpbmcoYXJnKSkgJiYgbWF0Y2hbN10gPyBhcmcuc3Vic3RyaW5nKDAsIG1hdGNoWzddKSA6IGFyZztcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwidVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgYXJnID0gYXJnID4+PiAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ4XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmcgPSBhcmcudG9TdHJpbmcoMTYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJYXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmcgPSBhcmcudG9TdHJpbmcoMTYpLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJlLmpzb24udGVzdChtYXRjaFs4XSkpIHtcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0W291dHB1dC5sZW5ndGhdID0gYXJnO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZS5udW1iZXIudGVzdChtYXRjaFs4XSkgJiYgKCFpc19wb3NpdGl2ZSB8fCBtYXRjaFszXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpZ24gPSBpc19wb3NpdGl2ZSA/IFwiK1wiIDogXCItXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmcgPSBhcmcudG9TdHJpbmcoKS5yZXBsYWNlKHJlLnNpZ24sIFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2lnbiA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcGFkX2NoYXJhY3RlciA9IG1hdGNoWzRdID8gbWF0Y2hbNF0gPT09IFwiMFwiID8gXCIwXCIgOiBtYXRjaFs0XS5jaGFyQXQoMSkgOiBcIiBcIjtcbiAgICAgICAgICAgICAgICAgICAgcGFkX2xlbmd0aCA9IG1hdGNoWzZdIC0gKHNpZ24gKyBhcmcpLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgcGFkID0gbWF0Y2hbNl0gPyBwYWRfbGVuZ3RoID4gMCA/IHN0cl9yZXBlYXQocGFkX2NoYXJhY3RlciwgcGFkX2xlbmd0aCkgOiBcIlwiIDogXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0W291dHB1dC5sZW5ndGhdID0gbWF0Y2hbNV0gPyBzaWduICsgYXJnICsgcGFkIDogcGFkX2NoYXJhY3RlciA9PT0gXCIwXCIgPyBzaWduICsgcGFkICsgYXJnIDogcGFkICsgc2lnbiArIGFyZztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dHB1dC5qb2luKFwiXCIpO1xuICAgIH07XG5cbiAgICBzcHJpbnRmLmNhY2hlID0ge307XG5cbiAgICBzcHJpbnRmLnBhcnNlID0gZnVuY3Rpb24gKGZtdCkge1xuICAgICAgICB2YXIgX2ZtdCA9IGZtdCxcbiAgICAgICAgICAgIG1hdGNoID0gW10sXG4gICAgICAgICAgICBwYXJzZV90cmVlID0gW10sXG4gICAgICAgICAgICBhcmdfbmFtZXMgPSAwO1xuICAgICAgICB3aGlsZSAoX2ZtdCkge1xuICAgICAgICAgICAgaWYgKChtYXRjaCA9IHJlLnRleHQuZXhlYyhfZm10KSkgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBwYXJzZV90cmVlW3BhcnNlX3RyZWUubGVuZ3RoXSA9IG1hdGNoWzBdO1xuICAgICAgICAgICAgfSBlbHNlIGlmICgobWF0Y2ggPSByZS5tb2R1bG8uZXhlYyhfZm10KSkgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBwYXJzZV90cmVlW3BhcnNlX3RyZWUubGVuZ3RoXSA9IFwiJVwiO1xuICAgICAgICAgICAgfSBlbHNlIGlmICgobWF0Y2ggPSByZS5wbGFjZWhvbGRlci5leGVjKF9mbXQpKSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIGlmIChtYXRjaFsyXSkge1xuICAgICAgICAgICAgICAgICAgICBhcmdfbmFtZXMgfD0gMTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZpZWxkX2xpc3QgPSBbXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50X2ZpZWxkID0gbWF0Y2hbMl0sXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWVsZF9tYXRjaCA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoKGZpZWxkX21hdGNoID0gcmUua2V5LmV4ZWMocmVwbGFjZW1lbnRfZmllbGQpKSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRfbGlzdFtmaWVsZF9saXN0Lmxlbmd0aF0gPSBmaWVsZF9tYXRjaFsxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgocmVwbGFjZW1lbnRfZmllbGQgPSByZXBsYWNlbWVudF9maWVsZC5zdWJzdHJpbmcoZmllbGRfbWF0Y2hbMF0ubGVuZ3RoKSkgIT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKGZpZWxkX21hdGNoID0gcmUua2V5X2FjY2Vzcy5leGVjKHJlcGxhY2VtZW50X2ZpZWxkKSkgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRfbGlzdFtmaWVsZF9saXN0Lmxlbmd0aF0gPSBmaWVsZF9tYXRjaFsxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKChmaWVsZF9tYXRjaCA9IHJlLmluZGV4X2FjY2Vzcy5leGVjKHJlcGxhY2VtZW50X2ZpZWxkKSkgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRfbGlzdFtmaWVsZF9saXN0Lmxlbmd0aF0gPSBmaWVsZF9tYXRjaFsxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgU3ludGF4RXJyb3IoXCJbc3ByaW50Zl0gZmFpbGVkIHRvIHBhcnNlIG5hbWVkIGFyZ3VtZW50IGtleVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgU3ludGF4RXJyb3IoXCJbc3ByaW50Zl0gZmFpbGVkIHRvIHBhcnNlIG5hbWVkIGFyZ3VtZW50IGtleVwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBtYXRjaFsyXSA9IGZpZWxkX2xpc3Q7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYXJnX25hbWVzIHw9IDI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChhcmdfbmFtZXMgPT09IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiW3NwcmludGZdIG1peGluZyBwb3NpdGlvbmFsIGFuZCBuYW1lZCBwbGFjZWhvbGRlcnMgaXMgbm90ICh5ZXQpIHN1cHBvcnRlZFwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcGFyc2VfdHJlZVtwYXJzZV90cmVlLmxlbmd0aF0gPSBtYXRjaDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFN5bnRheEVycm9yKFwiW3NwcmludGZdIHVuZXhwZWN0ZWQgcGxhY2Vob2xkZXJcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBfZm10ID0gX2ZtdC5zdWJzdHJpbmcobWF0Y2hbMF0ubGVuZ3RoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGFyc2VfdHJlZTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gdnNwcmludGYoZm10LCBhcmd2LCBfYXJndikge1xuICAgICAgICBfYXJndiA9IChhcmd2IHx8IFtdKS5zbGljZSgwKTtcbiAgICAgICAgX2FyZ3Yuc3BsaWNlKDAsIDAsIGZtdCk7XG4gICAgICAgIHJldHVybiBzcHJpbnRmLmFwcGx5KG51bGwsIF9hcmd2KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBoZWxwZXJzXG4gICAgICovXG4gICAgZnVuY3Rpb24gZ2V0X3R5cGUodmFyaWFibGUpIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YXJpYWJsZSkuc2xpY2UoOCwgLTEpLnRvTG93ZXJDYXNlKCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc3RyX3JlcGVhdChpbnB1dCwgbXVsdGlwbGllcikge1xuICAgICAgICByZXR1cm4gQXJyYXkobXVsdGlwbGllciArIDEpLmpvaW4oaW5wdXQpO1xuICAgIH1cblxuICAgIHZhciBpbmRleCA9IHtcbiAgICAgIG5hbWU6ICdzcHJpbnRmJyxcbiAgICAgIHR5cGU6ICdwb3N0UHJvY2Vzc29yJyxcblxuICAgICAgcHJvY2VzczogZnVuY3Rpb24gcHJvY2Vzcyh2YWx1ZSwga2V5LCBvcHRpb25zKSB7XG4gICAgICAgIGlmICghb3B0aW9ucy5zcHJpbnRmKSByZXR1cm4gdmFsdWU7XG5cbiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuYXBwbHkob3B0aW9ucy5zcHJpbnRmKSA9PT0gJ1tvYmplY3QgQXJyYXldJykge1xuICAgICAgICAgIHJldHVybiB2c3ByaW50Zih2YWx1ZSwgb3B0aW9ucy5zcHJpbnRmKTtcbiAgICAgICAgfSBlbHNlIGlmIChiYWJlbEhlbHBlcnMudHlwZW9mKG9wdGlvbnMuc3ByaW50ZikgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgcmV0dXJuIHNwcmludGYodmFsdWUsIG9wdGlvbnMuc3ByaW50Zik7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICB9LFxuICAgICAgb3ZlcmxvYWRUcmFuc2xhdGlvbk9wdGlvbkhhbmRsZXI6IGZ1bmN0aW9uIG92ZXJsb2FkVHJhbnNsYXRpb25PcHRpb25IYW5kbGVyKGFyZ3MpIHtcbiAgICAgICAgdmFyIHZhbHVlcyA9IFtdO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJncy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHZhbHVlcy5wdXNoKGFyZ3NbaV0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBwb3N0UHJvY2VzczogJ3NwcmludGYnLFxuICAgICAgICAgIHNwcmludGY6IHZhbHVlc1xuICAgICAgICB9O1xuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gaW5kZXg7XG5cbn0pKTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2V4dGVybmFsL2kxOG5leHQvc2NyaXB0cy9pMThuZXh0U3ByaW50ZlBvc3RQcm9jZXNzb3IuanNcbi8vIG1vZHVsZSBpZCA9IDhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiKGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcbiAgdHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnID8gbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCkgOlxuICB0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoZmFjdG9yeSkgOlxuICAoZ2xvYmFsLmkxOG5leHRCcm93c2VyTGFuZ3VhZ2VEZXRlY3RvciA9IGZhY3RvcnkoKSk7XG59KHRoaXMsIGZ1bmN0aW9uICgpIHsgJ3VzZSBzdHJpY3QnO1xuXG4gIHZhciBiYWJlbEhlbHBlcnMgPSB7fTtcblxuICBiYWJlbEhlbHBlcnMuY2xhc3NDYWxsQ2hlY2sgPSBmdW5jdGlvbiAoaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7XG4gICAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7XG4gICAgfVxuICB9O1xuXG4gIGJhYmVsSGVscGVycy5jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTtcbiAgICAgICAgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlO1xuICAgICAgICBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7XG4gICAgICAgIGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykge1xuICAgICAgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTtcbiAgICAgIGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpO1xuICAgICAgcmV0dXJuIENvbnN0cnVjdG9yO1xuICAgIH07XG4gIH0oKTtcblxuICBiYWJlbEhlbHBlcnM7XG5cbiAgdmFyIGFyciA9IFtdO1xuICB2YXIgZWFjaCA9IGFyci5mb3JFYWNoO1xuICB2YXIgc2xpY2UgPSBhcnIuc2xpY2U7XG5cbiAgZnVuY3Rpb24gZGVmYXVsdHMob2JqKSB7XG4gICAgZWFjaC5jYWxsKHNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSwgZnVuY3Rpb24gKHNvdXJjZSkge1xuICAgICAgaWYgKHNvdXJjZSkge1xuICAgICAgICBmb3IgKHZhciBwcm9wIGluIHNvdXJjZSkge1xuICAgICAgICAgIGlmIChvYmpbcHJvcF0gPT09IHVuZGVmaW5lZCkgb2JqW3Byb3BdID0gc291cmNlW3Byb3BdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIG9iajtcbiAgfVxuXG4gIHZhciBjb29raWUgPSB7XG4gICAgY3JlYXRlOiBmdW5jdGlvbiBjcmVhdGUobmFtZSwgdmFsdWUsIG1pbnV0ZXMsIGRvbWFpbikge1xuICAgICAgdmFyIGV4cGlyZXMgPSB2b2lkIDA7XG4gICAgICBpZiAobWludXRlcykge1xuICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgICAgIGRhdGUuc2V0VGltZShkYXRlLmdldFRpbWUoKSArIG1pbnV0ZXMgKiA2MCAqIDEwMDApO1xuICAgICAgICBleHBpcmVzID0gJzsgZXhwaXJlcz0nICsgZGF0ZS50b0dNVFN0cmluZygpO1xuICAgICAgfSBlbHNlIGV4cGlyZXMgPSAnJztcbiAgICAgIGRvbWFpbiA9IGRvbWFpbiA/ICdkb21haW49JyArIGRvbWFpbiArICc7JyA6ICcnO1xuICAgICAgZG9jdW1lbnQuY29va2llID0gbmFtZSArICc9JyArIHZhbHVlICsgZXhwaXJlcyArICc7JyArIGRvbWFpbiArICdwYXRoPS8nO1xuICAgIH0sXG5cbiAgICByZWFkOiBmdW5jdGlvbiByZWFkKG5hbWUpIHtcbiAgICAgIHZhciBuYW1lRVEgPSBuYW1lICsgJz0nO1xuICAgICAgdmFyIGNhID0gZG9jdW1lbnQuY29va2llLnNwbGl0KCc7Jyk7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBjID0gY2FbaV07XG4gICAgICAgIHdoaWxlIChjLmNoYXJBdCgwKSA9PT0gJyAnKSB7XG4gICAgICAgICAgYyA9IGMuc3Vic3RyaW5nKDEsIGMubGVuZ3RoKTtcbiAgICAgICAgfWlmIChjLmluZGV4T2YobmFtZUVRKSA9PT0gMCkgcmV0dXJuIGMuc3Vic3RyaW5nKG5hbWVFUS5sZW5ndGgsIGMubGVuZ3RoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0sXG5cbiAgICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZShuYW1lKSB7XG4gICAgICB0aGlzLmNyZWF0ZShuYW1lLCAnJywgLTEpO1xuICAgIH1cbiAgfTtcblxuICB2YXIgY29va2llJDEgPSB7XG4gICAgbmFtZTogJ2Nvb2tpZScsXG5cbiAgICBsb29rdXA6IGZ1bmN0aW9uIGxvb2t1cChvcHRpb25zKSB7XG4gICAgICB2YXIgZm91bmQgPSB2b2lkIDA7XG5cbiAgICAgIGlmIChvcHRpb25zLmxvb2t1cENvb2tpZSAmJiB0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHZhciBjID0gY29va2llLnJlYWQob3B0aW9ucy5sb29rdXBDb29raWUpO1xuICAgICAgICBpZiAoYykgZm91bmQgPSBjO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZm91bmQ7XG4gICAgfSxcbiAgICBjYWNoZVVzZXJMYW5ndWFnZTogZnVuY3Rpb24gY2FjaGVVc2VyTGFuZ3VhZ2UobG5nLCBvcHRpb25zKSB7XG4gICAgICBpZiAob3B0aW9ucy5sb29rdXBDb29raWUgJiYgdHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBjb29raWUuY3JlYXRlKG9wdGlvbnMubG9va3VwQ29va2llLCBsbmcsIG9wdGlvbnMuY29va2llTWludXRlcywgb3B0aW9ucy5jb29raWVEb21haW4pO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICB2YXIgcXVlcnlzdHJpbmcgPSB7XG4gICAgbmFtZTogJ3F1ZXJ5c3RyaW5nJyxcblxuICAgIGxvb2t1cDogZnVuY3Rpb24gbG9va3VwKG9wdGlvbnMpIHtcbiAgICAgIHZhciBmb3VuZCA9IHZvaWQgMDtcblxuICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHZhciBxdWVyeSA9IHdpbmRvdy5sb2NhdGlvbi5zZWFyY2guc3Vic3RyaW5nKDEpO1xuICAgICAgICB2YXIgcGFyYW1zID0gcXVlcnkuc3BsaXQoJyYnKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYXJhbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICB2YXIgcG9zID0gcGFyYW1zW2ldLmluZGV4T2YoJz0nKTtcbiAgICAgICAgICBpZiAocG9zID4gMCkge1xuICAgICAgICAgICAgdmFyIGtleSA9IHBhcmFtc1tpXS5zdWJzdHJpbmcoMCwgcG9zKTtcbiAgICAgICAgICAgIGlmIChrZXkgPT09IG9wdGlvbnMubG9va3VwUXVlcnlzdHJpbmcpIHtcbiAgICAgICAgICAgICAgZm91bmQgPSBwYXJhbXNbaV0uc3Vic3RyaW5nKHBvcyArIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gZm91bmQ7XG4gICAgfVxuICB9O1xuXG4gIHZhciBoYXNMb2NhbFN0b3JhZ2VTdXBwb3J0ID0gdm9pZCAwO1xuICB0cnkge1xuICAgIGhhc0xvY2FsU3RvcmFnZVN1cHBvcnQgPSB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5sb2NhbFN0b3JhZ2UgIT09IG51bGw7XG4gICAgdmFyIHRlc3RLZXkgPSAnaTE4bmV4dC50cmFuc2xhdGUuYm9vJztcbiAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0odGVzdEtleSwgJ2ZvbycpO1xuICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSh0ZXN0S2V5KTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGhhc0xvY2FsU3RvcmFnZVN1cHBvcnQgPSBmYWxzZTtcbiAgfVxuXG4gIHZhciBsb2NhbFN0b3JhZ2UgPSB7XG4gICAgbmFtZTogJ2xvY2FsU3RvcmFnZScsXG5cbiAgICBsb29rdXA6IGZ1bmN0aW9uIGxvb2t1cChvcHRpb25zKSB7XG4gICAgICB2YXIgZm91bmQgPSB2b2lkIDA7XG5cbiAgICAgIGlmIChvcHRpb25zLmxvb2t1cExvY2FsU3RvcmFnZSAmJiBoYXNMb2NhbFN0b3JhZ2VTdXBwb3J0KSB7XG4gICAgICAgIHZhciBsbmcgPSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0ob3B0aW9ucy5sb29rdXBMb2NhbFN0b3JhZ2UpO1xuICAgICAgICBpZiAobG5nKSBmb3VuZCA9IGxuZztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGZvdW5kO1xuICAgIH0sXG4gICAgY2FjaGVVc2VyTGFuZ3VhZ2U6IGZ1bmN0aW9uIGNhY2hlVXNlckxhbmd1YWdlKGxuZywgb3B0aW9ucykge1xuICAgICAgaWYgKG9wdGlvbnMubG9va3VwTG9jYWxTdG9yYWdlICYmIGhhc0xvY2FsU3RvcmFnZVN1cHBvcnQpIHtcbiAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKG9wdGlvbnMubG9va3VwTG9jYWxTdG9yYWdlLCBsbmcpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICB2YXIgbmF2aWdhdG9yJDEgPSB7XG4gICAgbmFtZTogJ25hdmlnYXRvcicsXG5cbiAgICBsb29rdXA6IGZ1bmN0aW9uIGxvb2t1cChvcHRpb25zKSB7XG4gICAgICB2YXIgZm91bmQgPSBbXTtcblxuICAgICAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGlmIChuYXZpZ2F0b3IubGFuZ3VhZ2VzKSB7XG4gICAgICAgICAgLy8gY2hyb21lIG9ubHk7IG5vdCBhbiBhcnJheSwgc28gY2FuJ3QgdXNlIC5wdXNoLmFwcGx5IGluc3RlYWQgb2YgaXRlcmF0aW5nXG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuYXZpZ2F0b3IubGFuZ3VhZ2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBmb3VuZC5wdXNoKG5hdmlnYXRvci5sYW5ndWFnZXNbaV0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAobmF2aWdhdG9yLnVzZXJMYW5ndWFnZSkge1xuICAgICAgICAgIGZvdW5kLnB1c2gobmF2aWdhdG9yLnVzZXJMYW5ndWFnZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5hdmlnYXRvci5sYW5ndWFnZSkge1xuICAgICAgICAgIGZvdW5kLnB1c2gobmF2aWdhdG9yLmxhbmd1YWdlKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gZm91bmQubGVuZ3RoID4gMCA/IGZvdW5kIDogdW5kZWZpbmVkO1xuICAgIH1cbiAgfTtcblxuICB2YXIgaHRtbFRhZyA9IHtcbiAgICBuYW1lOiAnaHRtbFRhZycsXG5cbiAgICBsb29rdXA6IGZ1bmN0aW9uIGxvb2t1cChvcHRpb25zKSB7XG4gICAgICB2YXIgZm91bmQgPSB2b2lkIDA7XG4gICAgICB2YXIgaHRtbFRhZyA9IG9wdGlvbnMuaHRtbFRhZyB8fCAodHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJyA/IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCA6IG51bGwpO1xuXG4gICAgICBpZiAoaHRtbFRhZyAmJiB0eXBlb2YgaHRtbFRhZy5nZXRBdHRyaWJ1dGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgZm91bmQgPSBodG1sVGFnLmdldEF0dHJpYnV0ZSgnbGFuZycpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZm91bmQ7XG4gICAgfVxuICB9O1xuXG4gIGZ1bmN0aW9uIGdldERlZmF1bHRzKCkge1xuICAgIHJldHVybiB7XG4gICAgICBvcmRlcjogWydxdWVyeXN0cmluZycsICdjb29raWUnLCAnbG9jYWxTdG9yYWdlJywgJ25hdmlnYXRvcicsICdodG1sVGFnJ10sXG4gICAgICBsb29rdXBRdWVyeXN0cmluZzogJ2xuZycsXG4gICAgICBsb29rdXBDb29raWU6ICdpMThuZXh0JyxcbiAgICAgIGxvb2t1cExvY2FsU3RvcmFnZTogJ2kxOG5leHRMbmcnLFxuXG4gICAgICAvLyBjYWNoZSB1c2VyIGxhbmd1YWdlXG4gICAgICBjYWNoZXM6IFsnbG9jYWxTdG9yYWdlJ10sXG4gICAgICBleGNsdWRlQ2FjaGVGb3I6IFsnY2ltb2RlJ11cbiAgICAgIC8vY29va2llTWludXRlczogMTAsXG4gICAgICAvL2Nvb2tpZURvbWFpbjogJ215RG9tYWluJ1xuICAgIH07XG4gIH1cblxuICB2YXIgQnJvd3NlciA9IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBCcm93c2VyKHNlcnZpY2VzKSB7XG4gICAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMSB8fCBhcmd1bWVudHNbMV0gPT09IHVuZGVmaW5lZCA/IHt9IDogYXJndW1lbnRzWzFdO1xuICAgICAgYmFiZWxIZWxwZXJzLmNsYXNzQ2FsbENoZWNrKHRoaXMsIEJyb3dzZXIpO1xuXG4gICAgICB0aGlzLnR5cGUgPSAnbGFuZ3VhZ2VEZXRlY3Rvcic7XG4gICAgICB0aGlzLmRldGVjdG9ycyA9IHt9O1xuXG4gICAgICB0aGlzLmluaXQoc2VydmljZXMsIG9wdGlvbnMpO1xuICAgIH1cblxuICAgIGJhYmVsSGVscGVycy5jcmVhdGVDbGFzcyhCcm93c2VyLCBbe1xuICAgICAga2V5OiAnaW5pdCcsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdChzZXJ2aWNlcykge1xuICAgICAgICB2YXIgb3B0aW9ucyA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMSB8fCBhcmd1bWVudHNbMV0gPT09IHVuZGVmaW5lZCA/IHt9IDogYXJndW1lbnRzWzFdO1xuICAgICAgICB2YXIgaTE4bk9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDIgfHwgYXJndW1lbnRzWzJdID09PSB1bmRlZmluZWQgPyB7fSA6IGFyZ3VtZW50c1syXTtcblxuICAgICAgICB0aGlzLnNlcnZpY2VzID0gc2VydmljZXM7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IGRlZmF1bHRzKG9wdGlvbnMsIHRoaXMub3B0aW9ucyB8fCB7fSwgZ2V0RGVmYXVsdHMoKSk7XG4gICAgICAgIHRoaXMuaTE4bk9wdGlvbnMgPSBpMThuT3B0aW9ucztcblxuICAgICAgICB0aGlzLmFkZERldGVjdG9yKGNvb2tpZSQxKTtcbiAgICAgICAgdGhpcy5hZGREZXRlY3RvcihxdWVyeXN0cmluZyk7XG4gICAgICAgIHRoaXMuYWRkRGV0ZWN0b3IobG9jYWxTdG9yYWdlKTtcbiAgICAgICAgdGhpcy5hZGREZXRlY3RvcihuYXZpZ2F0b3IkMSk7XG4gICAgICAgIHRoaXMuYWRkRGV0ZWN0b3IoaHRtbFRhZyk7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiAnYWRkRGV0ZWN0b3InLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGFkZERldGVjdG9yKGRldGVjdG9yKSB7XG4gICAgICAgIHRoaXMuZGV0ZWN0b3JzW2RldGVjdG9yLm5hbWVdID0gZGV0ZWN0b3I7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiAnZGV0ZWN0JyxcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBkZXRlY3QoZGV0ZWN0aW9uT3JkZXIpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgICBpZiAoIWRldGVjdGlvbk9yZGVyKSBkZXRlY3Rpb25PcmRlciA9IHRoaXMub3B0aW9ucy5vcmRlcjtcblxuICAgICAgICB2YXIgZGV0ZWN0ZWQgPSBbXTtcbiAgICAgICAgZGV0ZWN0aW9uT3JkZXIuZm9yRWFjaChmdW5jdGlvbiAoZGV0ZWN0b3JOYW1lKSB7XG4gICAgICAgICAgaWYgKF90aGlzLmRldGVjdG9yc1tkZXRlY3Rvck5hbWVdKSB7XG4gICAgICAgICAgICB2YXIgbG9va3VwID0gX3RoaXMuZGV0ZWN0b3JzW2RldGVjdG9yTmFtZV0ubG9va3VwKF90aGlzLm9wdGlvbnMpO1xuICAgICAgICAgICAgaWYgKGxvb2t1cCAmJiB0eXBlb2YgbG9va3VwID09PSAnc3RyaW5nJykgbG9va3VwID0gW2xvb2t1cF07XG4gICAgICAgICAgICBpZiAobG9va3VwKSBkZXRlY3RlZCA9IGRldGVjdGVkLmNvbmNhdChsb29rdXApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdmFyIGZvdW5kID0gdm9pZCAwO1xuICAgICAgICBkZXRlY3RlZC5mb3JFYWNoKGZ1bmN0aW9uIChsbmcpIHtcbiAgICAgICAgICBpZiAoZm91bmQpIHJldHVybjtcbiAgICAgICAgICB2YXIgY2xlYW5lZExuZyA9IF90aGlzLnNlcnZpY2VzLmxhbmd1YWdlVXRpbHMuZm9ybWF0TGFuZ3VhZ2VDb2RlKGxuZyk7XG4gICAgICAgICAgaWYgKF90aGlzLnNlcnZpY2VzLmxhbmd1YWdlVXRpbHMuaXNXaGl0ZWxpc3RlZChjbGVhbmVkTG5nKSkgZm91bmQgPSBjbGVhbmVkTG5nO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gZm91bmQgfHwgdGhpcy5pMThuT3B0aW9ucy5mYWxsYmFja0xuZ1swXTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6ICdjYWNoZVVzZXJMYW5ndWFnZScsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gY2FjaGVVc2VyTGFuZ3VhZ2UobG5nLCBjYWNoZXMpIHtcbiAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgICAgaWYgKCFjYWNoZXMpIGNhY2hlcyA9IHRoaXMub3B0aW9ucy5jYWNoZXM7XG4gICAgICAgIGlmICghY2FjaGVzKSByZXR1cm47XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuZXhjbHVkZUNhY2hlRm9yICYmIHRoaXMub3B0aW9ucy5leGNsdWRlQ2FjaGVGb3IuaW5kZXhPZihsbmcpID4gLTEpIHJldHVybjtcbiAgICAgICAgY2FjaGVzLmZvckVhY2goZnVuY3Rpb24gKGNhY2hlTmFtZSkge1xuICAgICAgICAgIGlmIChfdGhpczIuZGV0ZWN0b3JzW2NhY2hlTmFtZV0pIF90aGlzMi5kZXRlY3RvcnNbY2FjaGVOYW1lXS5jYWNoZVVzZXJMYW5ndWFnZShsbmcsIF90aGlzMi5vcHRpb25zKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfV0pO1xuICAgIHJldHVybiBCcm93c2VyO1xuICB9KCk7XG5cbiAgQnJvd3Nlci50eXBlID0gJ2xhbmd1YWdlRGV0ZWN0b3InO1xuXG4gIHJldHVybiBCcm93c2VyO1xuXG59KSk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9leHRlcm5hbC9pMThuZXh0L3NjcmlwdHMvaTE4bmV4dEJyb3dzZXJMYW5ndWFnZURldGVjdG9yLmpzXG4vLyBtb2R1bGUgaWQgPSA5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwge1xuIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbiBcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG4gXHRcdFx0XHRnZXQ6IGdldHRlclxuIFx0XHRcdH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDEpO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svYm9vdHN0cmFwIGQzNDZkOTExOTNhOTkxZTdiN2U5IiwiLyoqKiBJTVBPUlRTIEZST00gaW1wb3J0cy1sb2FkZXIgKioqL1xuKGZ1bmN0aW9uKCkge1xuXG4vKiFcclxuKiBqUXVlcnkgTW9iaWxlIDEuNC41XHJcbiogR2l0IEhFQUQgaGFzaDogNjhlNTVlNzhiMjkyNjM0ZDM5OTFjNzk1ZjA2ZjVlMzdhNTEyZGVjYyA8PiBEYXRlOiBGcmkgT2N0IDMxIDIwMTQgMTc6MzM6MzAgVVRDXHJcbiogaHR0cDovL2pxdWVyeW1vYmlsZS5jb21cclxuKlxyXG4qIENvcHlyaWdodCAyMDEwLCAyMDE0IGpRdWVyeSBGb3VuZGF0aW9uLCBJbmMuIGFuZCBvdGhlcmNvbnRyaWJ1dG9yc1xyXG4qIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cclxuKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlXHJcbipcclxuKi9cclxuXHJcblxyXG4oZnVuY3Rpb24gKCByb290LCBkb2MsIGZhY3RvcnkgKSB7XHJcblx0aWYgKCB0eXBlb2YgZGVmaW5lID09PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZCApIHtcclxuXHRcdC8vIEFNRC4gUmVnaXN0ZXIgYXMgYW4gYW5vbnltb3VzIG1vZHVsZS5cclxuXHRcdGRlZmluZSggWyBcImpxdWVyeVwiIF0sIGZ1bmN0aW9uICggJCApIHtcclxuXHRcdFx0ZmFjdG9yeSggJCwgcm9vdCwgZG9jICk7XHJcblx0XHRcdHJldHVybiAkLm1vYmlsZTtcclxuXHRcdH0pO1xyXG5cdH0gZWxzZSB7XHJcblx0XHQvLyBCcm93c2VyIGdsb2JhbHNcclxuXHRcdGZhY3RvcnkoIHJvb3QualF1ZXJ5LCByb290LCBkb2MgKTtcclxuXHR9XHJcbn0oIHRoaXMsIGRvY3VtZW50LCBmdW5jdGlvbiAoIGpRdWVyeSwgd2luZG93LCBkb2N1bWVudCwgdW5kZWZpbmVkICkge1xyXG4oZnVuY3Rpb24oICQgKSB7XHJcblx0JC5tb2JpbGUgPSB7fTtcclxufSggalF1ZXJ5ICkpO1xyXG5cclxuLyohXHJcbiAqIGpRdWVyeSBVSSBDb3JlIGMwYWI3MTA1NmI5MzY2MjdlOGE3ODIxZjAzYzA0NGFlYzYyODBhNDBcclxuICogaHR0cDovL2pxdWVyeXVpLmNvbVxyXG4gKlxyXG4gKiBDb3B5cmlnaHQgMjAxMyBqUXVlcnkgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzXHJcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cclxuICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZVxyXG4gKlxyXG4gKiBodHRwOi8vYXBpLmpxdWVyeXVpLmNvbS9jYXRlZ29yeS91aS1jb3JlL1xyXG4gKi9cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG52YXIgdXVpZCA9IDAsXHJcblx0cnVuaXF1ZUlkID0gL151aS1pZC1cXGQrJC87XHJcblxyXG4vLyAkLnVpIG1pZ2h0IGV4aXN0IGZyb20gY29tcG9uZW50cyB3aXRoIG5vIGRlcGVuZGVuY2llcywgZS5nLiwgJC51aS5wb3NpdGlvblxyXG4kLnVpID0gJC51aSB8fCB7fTtcclxuXHJcbiQuZXh0ZW5kKCAkLnVpLCB7XHJcblx0dmVyc2lvbjogXCJjMGFiNzEwNTZiOTM2NjI3ZThhNzgyMWYwM2MwNDRhZWM2MjgwYTQwXCIsXHJcblxyXG5cdGtleUNvZGU6IHtcclxuXHRcdEJBQ0tTUEFDRTogOCxcclxuXHRcdENPTU1BOiAxODgsXHJcblx0XHRERUxFVEU6IDQ2LFxyXG5cdFx0RE9XTjogNDAsXHJcblx0XHRFTkQ6IDM1LFxyXG5cdFx0RU5URVI6IDEzLFxyXG5cdFx0RVNDQVBFOiAyNyxcclxuXHRcdEhPTUU6IDM2LFxyXG5cdFx0TEVGVDogMzcsXHJcblx0XHRQQUdFX0RPV046IDM0LFxyXG5cdFx0UEFHRV9VUDogMzMsXHJcblx0XHRQRVJJT0Q6IDE5MCxcclxuXHRcdFJJR0hUOiAzOSxcclxuXHRcdFNQQUNFOiAzMixcclxuXHRcdFRBQjogOSxcclxuXHRcdFVQOiAzOFxyXG5cdH1cclxufSk7XHJcblxyXG4vLyBwbHVnaW5zXHJcbiQuZm4uZXh0ZW5kKHtcclxuXHRmb2N1czogKGZ1bmN0aW9uKCBvcmlnICkge1xyXG5cdFx0cmV0dXJuIGZ1bmN0aW9uKCBkZWxheSwgZm4gKSB7XHJcblx0XHRcdHJldHVybiB0eXBlb2YgZGVsYXkgPT09IFwibnVtYmVyXCIgP1xyXG5cdFx0XHRcdHRoaXMuZWFjaChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdHZhciBlbGVtID0gdGhpcztcclxuXHRcdFx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRcdCQoIGVsZW0gKS5mb2N1cygpO1xyXG5cdFx0XHRcdFx0XHRpZiAoIGZuICkge1xyXG5cdFx0XHRcdFx0XHRcdGZuLmNhbGwoIGVsZW0gKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fSwgZGVsYXkgKTtcclxuXHRcdFx0XHR9KSA6XHJcblx0XHRcdFx0b3JpZy5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XHJcblx0XHR9O1xyXG5cdH0pKCAkLmZuLmZvY3VzICksXHJcblxyXG5cdHNjcm9sbFBhcmVudDogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgc2Nyb2xsUGFyZW50O1xyXG5cdFx0aWYgKCgkLnVpLmllICYmICgvKHN0YXRpY3xyZWxhdGl2ZSkvKS50ZXN0KHRoaXMuY3NzKFwicG9zaXRpb25cIikpKSB8fCAoL2Fic29sdXRlLykudGVzdCh0aGlzLmNzcyhcInBvc2l0aW9uXCIpKSkge1xyXG5cdFx0XHRzY3JvbGxQYXJlbnQgPSB0aGlzLnBhcmVudHMoKS5maWx0ZXIoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0cmV0dXJuICgvKHJlbGF0aXZlfGFic29sdXRlfGZpeGVkKS8pLnRlc3QoJC5jc3ModGhpcyxcInBvc2l0aW9uXCIpKSAmJiAoLyhhdXRvfHNjcm9sbCkvKS50ZXN0KCQuY3NzKHRoaXMsXCJvdmVyZmxvd1wiKSskLmNzcyh0aGlzLFwib3ZlcmZsb3cteVwiKSskLmNzcyh0aGlzLFwib3ZlcmZsb3cteFwiKSk7XHJcblx0XHRcdH0pLmVxKDApO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0c2Nyb2xsUGFyZW50ID0gdGhpcy5wYXJlbnRzKCkuZmlsdGVyKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHJldHVybiAoLyhhdXRvfHNjcm9sbCkvKS50ZXN0KCQuY3NzKHRoaXMsXCJvdmVyZmxvd1wiKSskLmNzcyh0aGlzLFwib3ZlcmZsb3cteVwiKSskLmNzcyh0aGlzLFwib3ZlcmZsb3cteFwiKSk7XHJcblx0XHRcdH0pLmVxKDApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiAoIC9maXhlZC8gKS50ZXN0KCB0aGlzLmNzcyggXCJwb3NpdGlvblwiKSApIHx8ICFzY3JvbGxQYXJlbnQubGVuZ3RoID8gJCggdGhpc1sgMCBdLm93bmVyRG9jdW1lbnQgfHwgZG9jdW1lbnQgKSA6IHNjcm9sbFBhcmVudDtcclxuXHR9LFxyXG5cclxuXHR1bmlxdWVJZDogZnVuY3Rpb24oKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRpZiAoICF0aGlzLmlkICkge1xyXG5cdFx0XHRcdHRoaXMuaWQgPSBcInVpLWlkLVwiICsgKCsrdXVpZCk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH0sXHJcblxyXG5cdHJlbW92ZVVuaXF1ZUlkOiBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XHJcblx0XHRcdGlmICggcnVuaXF1ZUlkLnRlc3QoIHRoaXMuaWQgKSApIHtcclxuXHRcdFx0XHQkKCB0aGlzICkucmVtb3ZlQXR0ciggXCJpZFwiICk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH1cclxufSk7XHJcblxyXG4vLyBzZWxlY3RvcnNcclxuZnVuY3Rpb24gZm9jdXNhYmxlKCBlbGVtZW50LCBpc1RhYkluZGV4Tm90TmFOICkge1xyXG5cdHZhciBtYXAsIG1hcE5hbWUsIGltZyxcclxuXHRcdG5vZGVOYW1lID0gZWxlbWVudC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO1xyXG5cdGlmICggXCJhcmVhXCIgPT09IG5vZGVOYW1lICkge1xyXG5cdFx0bWFwID0gZWxlbWVudC5wYXJlbnROb2RlO1xyXG5cdFx0bWFwTmFtZSA9IG1hcC5uYW1lO1xyXG5cdFx0aWYgKCAhZWxlbWVudC5ocmVmIHx8ICFtYXBOYW1lIHx8IG1hcC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpICE9PSBcIm1hcFwiICkge1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblx0XHRpbWcgPSAkKCBcImltZ1t1c2VtYXA9I1wiICsgbWFwTmFtZSArIFwiXVwiIClbMF07XHJcblx0XHRyZXR1cm4gISFpbWcgJiYgdmlzaWJsZSggaW1nICk7XHJcblx0fVxyXG5cdHJldHVybiAoIC9pbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9ufG9iamVjdC8udGVzdCggbm9kZU5hbWUgKSA/XHJcblx0XHQhZWxlbWVudC5kaXNhYmxlZCA6XHJcblx0XHRcImFcIiA9PT0gbm9kZU5hbWUgP1xyXG5cdFx0XHRlbGVtZW50LmhyZWYgfHwgaXNUYWJJbmRleE5vdE5hTiA6XHJcblx0XHRcdGlzVGFiSW5kZXhOb3ROYU4pICYmXHJcblx0XHQvLyB0aGUgZWxlbWVudCBhbmQgYWxsIG9mIGl0cyBhbmNlc3RvcnMgbXVzdCBiZSB2aXNpYmxlXHJcblx0XHR2aXNpYmxlKCBlbGVtZW50ICk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHZpc2libGUoIGVsZW1lbnQgKSB7XHJcblx0cmV0dXJuICQuZXhwci5maWx0ZXJzLnZpc2libGUoIGVsZW1lbnQgKSAmJlxyXG5cdFx0ISQoIGVsZW1lbnQgKS5wYXJlbnRzKCkuYWRkQmFjaygpLmZpbHRlcihmdW5jdGlvbigpIHtcclxuXHRcdFx0cmV0dXJuICQuY3NzKCB0aGlzLCBcInZpc2liaWxpdHlcIiApID09PSBcImhpZGRlblwiO1xyXG5cdFx0fSkubGVuZ3RoO1xyXG59XHJcblxyXG4kLmV4dGVuZCggJC5leHByWyBcIjpcIiBdLCB7XHJcblx0ZGF0YTogJC5leHByLmNyZWF0ZVBzZXVkbyA/XHJcblx0XHQkLmV4cHIuY3JlYXRlUHNldWRvKGZ1bmN0aW9uKCBkYXRhTmFtZSApIHtcclxuXHRcdFx0cmV0dXJuIGZ1bmN0aW9uKCBlbGVtICkge1xyXG5cdFx0XHRcdHJldHVybiAhISQuZGF0YSggZWxlbSwgZGF0YU5hbWUgKTtcclxuXHRcdFx0fTtcclxuXHRcdH0pIDpcclxuXHRcdC8vIHN1cHBvcnQ6IGpRdWVyeSA8MS44XHJcblx0XHRmdW5jdGlvbiggZWxlbSwgaSwgbWF0Y2ggKSB7XHJcblx0XHRcdHJldHVybiAhISQuZGF0YSggZWxlbSwgbWF0Y2hbIDMgXSApO1xyXG5cdFx0fSxcclxuXHJcblx0Zm9jdXNhYmxlOiBmdW5jdGlvbiggZWxlbWVudCApIHtcclxuXHRcdHJldHVybiBmb2N1c2FibGUoIGVsZW1lbnQsICFpc05hTiggJC5hdHRyKCBlbGVtZW50LCBcInRhYmluZGV4XCIgKSApICk7XHJcblx0fSxcclxuXHJcblx0dGFiYmFibGU6IGZ1bmN0aW9uKCBlbGVtZW50ICkge1xyXG5cdFx0dmFyIHRhYkluZGV4ID0gJC5hdHRyKCBlbGVtZW50LCBcInRhYmluZGV4XCIgKSxcclxuXHRcdFx0aXNUYWJJbmRleE5hTiA9IGlzTmFOKCB0YWJJbmRleCApO1xyXG5cdFx0cmV0dXJuICggaXNUYWJJbmRleE5hTiB8fCB0YWJJbmRleCA+PSAwICkgJiYgZm9jdXNhYmxlKCBlbGVtZW50LCAhaXNUYWJJbmRleE5hTiApO1xyXG5cdH1cclxufSk7XHJcblxyXG4vLyBzdXBwb3J0OiBqUXVlcnkgPDEuOFxyXG5pZiAoICEkKCBcIjxhPlwiICkub3V0ZXJXaWR0aCggMSApLmpxdWVyeSApIHtcclxuXHQkLmVhY2goIFsgXCJXaWR0aFwiLCBcIkhlaWdodFwiIF0sIGZ1bmN0aW9uKCBpLCBuYW1lICkge1xyXG5cdFx0dmFyIHNpZGUgPSBuYW1lID09PSBcIldpZHRoXCIgPyBbIFwiTGVmdFwiLCBcIlJpZ2h0XCIgXSA6IFsgXCJUb3BcIiwgXCJCb3R0b21cIiBdLFxyXG5cdFx0XHR0eXBlID0gbmFtZS50b0xvd2VyQ2FzZSgpLFxyXG5cdFx0XHRvcmlnID0ge1xyXG5cdFx0XHRcdGlubmVyV2lkdGg6ICQuZm4uaW5uZXJXaWR0aCxcclxuXHRcdFx0XHRpbm5lckhlaWdodDogJC5mbi5pbm5lckhlaWdodCxcclxuXHRcdFx0XHRvdXRlcldpZHRoOiAkLmZuLm91dGVyV2lkdGgsXHJcblx0XHRcdFx0b3V0ZXJIZWlnaHQ6ICQuZm4ub3V0ZXJIZWlnaHRcclxuXHRcdFx0fTtcclxuXHJcblx0XHRmdW5jdGlvbiByZWR1Y2UoIGVsZW0sIHNpemUsIGJvcmRlciwgbWFyZ2luICkge1xyXG5cdFx0XHQkLmVhY2goIHNpZGUsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHNpemUgLT0gcGFyc2VGbG9hdCggJC5jc3MoIGVsZW0sIFwicGFkZGluZ1wiICsgdGhpcyApICkgfHwgMDtcclxuXHRcdFx0XHRpZiAoIGJvcmRlciApIHtcclxuXHRcdFx0XHRcdHNpemUgLT0gcGFyc2VGbG9hdCggJC5jc3MoIGVsZW0sIFwiYm9yZGVyXCIgKyB0aGlzICsgXCJXaWR0aFwiICkgKSB8fCAwO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZiAoIG1hcmdpbiApIHtcclxuXHRcdFx0XHRcdHNpemUgLT0gcGFyc2VGbG9hdCggJC5jc3MoIGVsZW0sIFwibWFyZ2luXCIgKyB0aGlzICkgKSB8fCAwO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHRcdHJldHVybiBzaXplO1xyXG5cdFx0fVxyXG5cclxuXHRcdCQuZm5bIFwiaW5uZXJcIiArIG5hbWUgXSA9IGZ1bmN0aW9uKCBzaXplICkge1xyXG5cdFx0XHRpZiAoIHNpemUgPT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0XHRyZXR1cm4gb3JpZ1sgXCJpbm5lclwiICsgbmFtZSBdLmNhbGwoIHRoaXMgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHQkKCB0aGlzICkuY3NzKCB0eXBlLCByZWR1Y2UoIHRoaXMsIHNpemUgKSArIFwicHhcIiApO1xyXG5cdFx0XHR9KTtcclxuXHRcdH07XHJcblxyXG5cdFx0JC5mblsgXCJvdXRlclwiICsgbmFtZV0gPSBmdW5jdGlvbiggc2l6ZSwgbWFyZ2luICkge1xyXG5cdFx0XHRpZiAoIHR5cGVvZiBzaXplICE9PSBcIm51bWJlclwiICkge1xyXG5cdFx0XHRcdHJldHVybiBvcmlnWyBcIm91dGVyXCIgKyBuYW1lIF0uY2FsbCggdGhpcywgc2l6ZSApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdCQoIHRoaXMpLmNzcyggdHlwZSwgcmVkdWNlKCB0aGlzLCBzaXplLCB0cnVlLCBtYXJnaW4gKSArIFwicHhcIiApO1xyXG5cdFx0XHR9KTtcclxuXHRcdH07XHJcblx0fSk7XHJcbn1cclxuXHJcbi8vIHN1cHBvcnQ6IGpRdWVyeSA8MS44XHJcbmlmICggISQuZm4uYWRkQmFjayApIHtcclxuXHQkLmZuLmFkZEJhY2sgPSBmdW5jdGlvbiggc2VsZWN0b3IgKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5hZGQoIHNlbGVjdG9yID09IG51bGwgP1xyXG5cdFx0XHR0aGlzLnByZXZPYmplY3QgOiB0aGlzLnByZXZPYmplY3QuZmlsdGVyKCBzZWxlY3RvciApXHJcblx0XHQpO1xyXG5cdH07XHJcbn1cclxuXHJcbi8vIHN1cHBvcnQ6IGpRdWVyeSAxLjYuMSwgMS42LjIgKGh0dHA6Ly9idWdzLmpxdWVyeS5jb20vdGlja2V0Lzk0MTMpXHJcbmlmICggJCggXCI8YT5cIiApLmRhdGEoIFwiYS1iXCIsIFwiYVwiICkucmVtb3ZlRGF0YSggXCJhLWJcIiApLmRhdGEoIFwiYS1iXCIgKSApIHtcclxuXHQkLmZuLnJlbW92ZURhdGEgPSAoZnVuY3Rpb24oIHJlbW92ZURhdGEgKSB7XHJcblx0XHRyZXR1cm4gZnVuY3Rpb24oIGtleSApIHtcclxuXHRcdFx0aWYgKCBhcmd1bWVudHMubGVuZ3RoICkge1xyXG5cdFx0XHRcdHJldHVybiByZW1vdmVEYXRhLmNhbGwoIHRoaXMsICQuY2FtZWxDYXNlKCBrZXkgKSApO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHJldHVybiByZW1vdmVEYXRhLmNhbGwoIHRoaXMgKTtcclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHR9KSggJC5mbi5yZW1vdmVEYXRhICk7XHJcbn1cclxuXHJcblxyXG5cclxuXHJcblxyXG4vLyBkZXByZWNhdGVkXHJcbiQudWkuaWUgPSAhIS9tc2llIFtcXHcuXSsvLmV4ZWMoIG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKSApO1xyXG5cclxuJC5zdXBwb3J0LnNlbGVjdHN0YXJ0ID0gXCJvbnNlbGVjdHN0YXJ0XCIgaW4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJkaXZcIiApO1xyXG4kLmZuLmV4dGVuZCh7XHJcblx0ZGlzYWJsZVNlbGVjdGlvbjogZnVuY3Rpb24oKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5iaW5kKCAoICQuc3VwcG9ydC5zZWxlY3RzdGFydCA/IFwic2VsZWN0c3RhcnRcIiA6IFwibW91c2Vkb3duXCIgKSArXHJcblx0XHRcdFwiLnVpLWRpc2FibGVTZWxlY3Rpb25cIiwgZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdH0pO1xyXG5cdH0sXHJcblxyXG5cdGVuYWJsZVNlbGVjdGlvbjogZnVuY3Rpb24oKSB7XHJcblx0XHRyZXR1cm4gdGhpcy51bmJpbmQoIFwiLnVpLWRpc2FibGVTZWxlY3Rpb25cIiApO1xyXG5cdH0sXHJcblxyXG5cdHpJbmRleDogZnVuY3Rpb24oIHpJbmRleCApIHtcclxuXHRcdGlmICggekluZGV4ICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdHJldHVybiB0aGlzLmNzcyggXCJ6SW5kZXhcIiwgekluZGV4ICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCB0aGlzLmxlbmd0aCApIHtcclxuXHRcdFx0dmFyIGVsZW0gPSAkKCB0aGlzWyAwIF0gKSwgcG9zaXRpb24sIHZhbHVlO1xyXG5cdFx0XHR3aGlsZSAoIGVsZW0ubGVuZ3RoICYmIGVsZW1bIDAgXSAhPT0gZG9jdW1lbnQgKSB7XHJcblx0XHRcdFx0Ly8gSWdub3JlIHotaW5kZXggaWYgcG9zaXRpb24gaXMgc2V0IHRvIGEgdmFsdWUgd2hlcmUgei1pbmRleCBpcyBpZ25vcmVkIGJ5IHRoZSBicm93c2VyXHJcblx0XHRcdFx0Ly8gVGhpcyBtYWtlcyBiZWhhdmlvciBvZiB0aGlzIGZ1bmN0aW9uIGNvbnNpc3RlbnQgYWNyb3NzIGJyb3dzZXJzXHJcblx0XHRcdFx0Ly8gV2ViS2l0IGFsd2F5cyByZXR1cm5zIGF1dG8gaWYgdGhlIGVsZW1lbnQgaXMgcG9zaXRpb25lZFxyXG5cdFx0XHRcdHBvc2l0aW9uID0gZWxlbS5jc3MoIFwicG9zaXRpb25cIiApO1xyXG5cdFx0XHRcdGlmICggcG9zaXRpb24gPT09IFwiYWJzb2x1dGVcIiB8fCBwb3NpdGlvbiA9PT0gXCJyZWxhdGl2ZVwiIHx8IHBvc2l0aW9uID09PSBcImZpeGVkXCIgKSB7XHJcblx0XHRcdFx0XHQvLyBJRSByZXR1cm5zIDAgd2hlbiB6SW5kZXggaXMgbm90IHNwZWNpZmllZFxyXG5cdFx0XHRcdFx0Ly8gb3RoZXIgYnJvd3NlcnMgcmV0dXJuIGEgc3RyaW5nXHJcblx0XHRcdFx0XHQvLyB3ZSBpZ25vcmUgdGhlIGNhc2Ugb2YgbmVzdGVkIGVsZW1lbnRzIHdpdGggYW4gZXhwbGljaXQgdmFsdWUgb2YgMFxyXG5cdFx0XHRcdFx0Ly8gPGRpdiBzdHlsZT1cInotaW5kZXg6IC0xMDtcIj48ZGl2IHN0eWxlPVwiei1pbmRleDogMDtcIj48L2Rpdj48L2Rpdj5cclxuXHRcdFx0XHRcdHZhbHVlID0gcGFyc2VJbnQoIGVsZW0uY3NzKCBcInpJbmRleFwiICksIDEwICk7XHJcblx0XHRcdFx0XHRpZiAoICFpc05hTiggdmFsdWUgKSAmJiB2YWx1ZSAhPT0gMCApIHtcclxuXHRcdFx0XHRcdFx0cmV0dXJuIHZhbHVlO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRlbGVtID0gZWxlbS5wYXJlbnQoKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiAwO1xyXG5cdH1cclxufSk7XHJcblxyXG4vLyAkLnVpLnBsdWdpbiBpcyBkZXByZWNhdGVkLiBVc2UgJC53aWRnZXQoKSBleHRlbnNpb25zIGluc3RlYWQuXHJcbiQudWkucGx1Z2luID0ge1xyXG5cdGFkZDogZnVuY3Rpb24oIG1vZHVsZSwgb3B0aW9uLCBzZXQgKSB7XHJcblx0XHR2YXIgaSxcclxuXHRcdFx0cHJvdG8gPSAkLnVpWyBtb2R1bGUgXS5wcm90b3R5cGU7XHJcblx0XHRmb3IgKCBpIGluIHNldCApIHtcclxuXHRcdFx0cHJvdG8ucGx1Z2luc1sgaSBdID0gcHJvdG8ucGx1Z2luc1sgaSBdIHx8IFtdO1xyXG5cdFx0XHRwcm90by5wbHVnaW5zWyBpIF0ucHVzaCggWyBvcHRpb24sIHNldFsgaSBdIF0gKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cdGNhbGw6IGZ1bmN0aW9uKCBpbnN0YW5jZSwgbmFtZSwgYXJncywgYWxsb3dEaXNjb25uZWN0ZWQgKSB7XHJcblx0XHR2YXIgaSxcclxuXHRcdFx0c2V0ID0gaW5zdGFuY2UucGx1Z2luc1sgbmFtZSBdO1xyXG5cclxuXHRcdGlmICggIXNldCApIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggIWFsbG93RGlzY29ubmVjdGVkICYmICggIWluc3RhbmNlLmVsZW1lbnRbIDAgXS5wYXJlbnROb2RlIHx8IGluc3RhbmNlLmVsZW1lbnRbIDAgXS5wYXJlbnROb2RlLm5vZGVUeXBlID09PSAxMSApICkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0Zm9yICggaSA9IDA7IGkgPCBzZXQubGVuZ3RoOyBpKysgKSB7XHJcblx0XHRcdGlmICggaW5zdGFuY2Uub3B0aW9uc1sgc2V0WyBpIF1bIDAgXSBdICkge1xyXG5cdFx0XHRcdHNldFsgaSBdWyAxIF0uYXBwbHkoIGluc3RhbmNlLmVsZW1lbnQsIGFyZ3MgKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxufTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbihmdW5jdGlvbiggJCwgd2luZG93LCB1bmRlZmluZWQgKSB7XHJcblxyXG5cdC8vIFN1YnRyYWN0IHRoZSBoZWlnaHQgb2YgZXh0ZXJuYWwgdG9vbGJhcnMgZnJvbSB0aGUgcGFnZSBoZWlnaHQsIGlmIHRoZSBwYWdlIGRvZXMgbm90IGhhdmVcclxuXHQvLyBpbnRlcm5hbCB0b29sYmFycyBvZiB0aGUgc2FtZSB0eXBlLiBXZSB0YWtlIGNhcmUgdG8gdXNlIHRoZSB3aWRnZXQgb3B0aW9ucyBpZiB3ZSBmaW5kIGFcclxuXHQvLyB3aWRnZXQgaW5zdGFuY2UgYW5kIHRoZSBlbGVtZW50J3MgZGF0YS1hdHRyaWJ1dGVzIG90aGVyd2lzZS5cclxuXHR2YXIgY29tcGVuc2F0ZVRvb2xiYXJzID0gZnVuY3Rpb24oIHBhZ2UsIGRlc2lyZWRIZWlnaHQgKSB7XHJcblx0XHR2YXIgcGFnZVBhcmVudCA9IHBhZ2UucGFyZW50KCksXHJcblx0XHRcdHRvb2xiYXJzQWZmZWN0aW5nSGVpZ2h0ID0gW10sXHJcblxyXG5cdFx0XHQvLyBXZSB1c2UgdGhpcyBmdW5jdGlvbiB0byBmaWx0ZXIgZml4ZWQgdG9vbGJhcnMgd2l0aCBvcHRpb24gdXBkYXRlUGFnZVBhZGRpbmcgc2V0IHRvXHJcblx0XHRcdC8vIHRydWUgKHdoaWNoIGlzIHRoZSBkZWZhdWx0KSBmcm9tIG91ciBoZWlnaHQgc3VidHJhY3Rpb24sIGJlY2F1c2UgZml4ZWQgdG9vbGJhcnMgd2l0aFxyXG5cdFx0XHQvLyBvcHRpb24gdXBkYXRlUGFnZVBhZGRpbmcgc2V0IHRvIHRydWUgY29tcGVuc2F0ZSBmb3IgdGhlaXIgcHJlc2VuY2UgYnkgYWRkaW5nIHBhZGRpbmdcclxuXHRcdFx0Ly8gdG8gdGhlIGFjdGl2ZSBwYWdlLiBXZSB3YW50IHRvIGF2b2lkIGRvdWJsZS1jb3VudGluZyBieSBhbHNvIHN1YnRyYWN0aW5nIHRoZWlyXHJcblx0XHRcdC8vIGhlaWdodCBmcm9tIHRoZSBkZXNpcmVkIHBhZ2UgaGVpZ2h0LlxyXG5cdFx0XHRub1BhZGRlcnMgPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR2YXIgdGhlRWxlbWVudCA9ICQoIHRoaXMgKSxcclxuXHRcdFx0XHRcdHdpZGdldE9wdGlvbnMgPSAkLm1vYmlsZS50b29sYmFyICYmIHRoZUVsZW1lbnQuZGF0YSggXCJtb2JpbGUtdG9vbGJhclwiICkgP1xyXG5cdFx0XHRcdFx0XHR0aGVFbGVtZW50LnRvb2xiYXIoIFwib3B0aW9uXCIgKSA6IHtcclxuXHRcdFx0XHRcdFx0XHRwb3NpdGlvbjogdGhlRWxlbWVudC5hdHRyKCBcImRhdGEtXCIgKyAkLm1vYmlsZS5ucyArIFwicG9zaXRpb25cIiApLFxyXG5cdFx0XHRcdFx0XHRcdHVwZGF0ZVBhZ2VQYWRkaW5nOiAoIHRoZUVsZW1lbnQuYXR0ciggXCJkYXRhLVwiICsgJC5tb2JpbGUubnMgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XCJ1cGRhdGUtcGFnZS1wYWRkaW5nXCIgKSAhPT0gZmFsc2UgKVxyXG5cdFx0XHRcdFx0XHR9O1xyXG5cclxuXHRcdFx0XHRyZXR1cm4gISggd2lkZ2V0T3B0aW9ucy5wb3NpdGlvbiA9PT0gXCJmaXhlZFwiICYmXHJcblx0XHRcdFx0XHR3aWRnZXRPcHRpb25zLnVwZGF0ZVBhZ2VQYWRkaW5nID09PSB0cnVlICk7XHJcblx0XHRcdH0sXHJcblx0XHRcdGV4dGVybmFsSGVhZGVycyA9IHBhZ2VQYXJlbnQuY2hpbGRyZW4oIFwiOmpxbURhdGEocm9sZT0naGVhZGVyJylcIiApLmZpbHRlciggbm9QYWRkZXJzICksXHJcblx0XHRcdGludGVybmFsSGVhZGVycyA9IHBhZ2UuY2hpbGRyZW4oIFwiOmpxbURhdGEocm9sZT0naGVhZGVyJylcIiApLFxyXG5cdFx0XHRleHRlcm5hbEZvb3RlcnMgPSBwYWdlUGFyZW50LmNoaWxkcmVuKCBcIjpqcW1EYXRhKHJvbGU9J2Zvb3RlcicpXCIgKS5maWx0ZXIoIG5vUGFkZGVycyApLFxyXG5cdFx0XHRpbnRlcm5hbEZvb3RlcnMgPSBwYWdlLmNoaWxkcmVuKCBcIjpqcW1EYXRhKHJvbGU9J2Zvb3RlcicpXCIgKTtcclxuXHJcblx0XHQvLyBJZiB3ZSBoYXZlIG5vIGludGVybmFsIGhlYWRlcnMsIGJ1dCB3ZSBkbyBoYXZlIGV4dGVybmFsIGhlYWRlcnMsIHRoZW4gdGhlaXIgaGVpZ2h0XHJcblx0XHQvLyByZWR1Y2VzIHRoZSBwYWdlIGhlaWdodFxyXG5cdFx0aWYgKCBpbnRlcm5hbEhlYWRlcnMubGVuZ3RoID09PSAwICYmIGV4dGVybmFsSGVhZGVycy5sZW5ndGggPiAwICkge1xyXG5cdFx0XHR0b29sYmFyc0FmZmVjdGluZ0hlaWdodCA9IHRvb2xiYXJzQWZmZWN0aW5nSGVpZ2h0LmNvbmNhdCggZXh0ZXJuYWxIZWFkZXJzLnRvQXJyYXkoKSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIElmIHdlIGhhdmUgbm8gaW50ZXJuYWwgZm9vdGVycywgYnV0IHdlIGRvIGhhdmUgZXh0ZXJuYWwgZm9vdGVycywgdGhlbiB0aGVpciBoZWlnaHRcclxuXHRcdC8vIHJlZHVjZXMgdGhlIHBhZ2UgaGVpZ2h0XHJcblx0XHRpZiAoIGludGVybmFsRm9vdGVycy5sZW5ndGggPT09IDAgJiYgZXh0ZXJuYWxGb290ZXJzLmxlbmd0aCA+IDAgKSB7XHJcblx0XHRcdHRvb2xiYXJzQWZmZWN0aW5nSGVpZ2h0ID0gdG9vbGJhcnNBZmZlY3RpbmdIZWlnaHQuY29uY2F0KCBleHRlcm5hbEZvb3RlcnMudG9BcnJheSgpICk7XHJcblx0XHR9XHJcblxyXG5cdFx0JC5lYWNoKCB0b29sYmFyc0FmZmVjdGluZ0hlaWdodCwgZnVuY3Rpb24oIGluZGV4LCB2YWx1ZSApIHtcclxuXHRcdFx0ZGVzaXJlZEhlaWdodCAtPSAkKCB2YWx1ZSApLm91dGVySGVpZ2h0KCk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBIZWlnaHQgbXVzdCBiZSBhdCBsZWFzdCB6ZXJvXHJcblx0XHRyZXR1cm4gTWF0aC5tYXgoIDAsIGRlc2lyZWRIZWlnaHQgKTtcclxuXHR9O1xyXG5cclxuXHQkLmV4dGVuZCggJC5tb2JpbGUsIHtcclxuXHRcdC8vIGRlZmluZSB0aGUgd2luZG93IGFuZCB0aGUgZG9jdW1lbnQgb2JqZWN0c1xyXG5cdFx0d2luZG93OiAkKCB3aW5kb3cgKSxcclxuXHRcdGRvY3VtZW50OiAkKCBkb2N1bWVudCApLFxyXG5cclxuXHRcdC8vIFRPRE86IFJlbW92ZSBhbmQgdXNlICQudWkua2V5Q29kZSBkaXJlY3RseVxyXG5cdFx0a2V5Q29kZTogJC51aS5rZXlDb2RlLFxyXG5cclxuXHRcdC8vIFBsYWNlIHRvIHN0b3JlIHZhcmlvdXMgd2lkZ2V0IGV4dGVuc2lvbnNcclxuXHRcdGJlaGF2aW9yczoge30sXHJcblxyXG5cdFx0Ly8gU2Nyb2xsIHBhZ2UgdmVydGljYWxseTogc2Nyb2xsIHRvIDAgdG8gaGlkZSBpT1MgYWRkcmVzcyBiYXIsIG9yIHBhc3MgYSBZIHZhbHVlXHJcblx0XHRzaWxlbnRTY3JvbGw6IGZ1bmN0aW9uKCB5cG9zICkge1xyXG5cdFx0XHRpZiAoICQudHlwZSggeXBvcyApICE9PSBcIm51bWJlclwiICkge1xyXG5cdFx0XHRcdHlwb3MgPSAkLm1vYmlsZS5kZWZhdWx0SG9tZVNjcm9sbDtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gcHJldmVudCBzY3JvbGxzdGFydCBhbmQgc2Nyb2xsc3RvcCBldmVudHNcclxuXHRcdFx0JC5ldmVudC5zcGVjaWFsLnNjcm9sbHN0YXJ0LmVuYWJsZWQgPSBmYWxzZTtcclxuXHJcblx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0d2luZG93LnNjcm9sbFRvKCAwLCB5cG9zICk7XHJcblx0XHRcdFx0JC5tb2JpbGUuZG9jdW1lbnQudHJpZ2dlciggXCJzaWxlbnRzY3JvbGxcIiwgeyB4OiAwLCB5OiB5cG9zIH0pO1xyXG5cdFx0XHR9LCAyMCApO1xyXG5cclxuXHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHQkLmV2ZW50LnNwZWNpYWwuc2Nyb2xsc3RhcnQuZW5hYmxlZCA9IHRydWU7XHJcblx0XHRcdH0sIDE1MCApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRnZXRDbG9zZXN0QmFzZVVybDogZnVuY3Rpb24oIGVsZSApXHR7XHJcblx0XHRcdC8vIEZpbmQgdGhlIGNsb3Nlc3QgcGFnZSBhbmQgZXh0cmFjdCBvdXQgaXRzIHVybC5cclxuXHRcdFx0dmFyIHVybCA9ICQoIGVsZSApLmNsb3Nlc3QoIFwiLnVpLXBhZ2VcIiApLmpxbURhdGEoIFwidXJsXCIgKSxcclxuXHRcdFx0XHRiYXNlID0gJC5tb2JpbGUucGF0aC5kb2N1bWVudEJhc2UuaHJlZk5vSGFzaDtcclxuXHJcblx0XHRcdGlmICggISQubW9iaWxlLmR5bmFtaWNCYXNlRW5hYmxlZCB8fCAhdXJsIHx8ICEkLm1vYmlsZS5wYXRoLmlzUGF0aCggdXJsICkgKSB7XHJcblx0XHRcdFx0dXJsID0gYmFzZTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cmV0dXJuICQubW9iaWxlLnBhdGgubWFrZVVybEFic29sdXRlKCB1cmwsIGJhc2UgKTtcclxuXHRcdH0sXHJcblx0XHRyZW1vdmVBY3RpdmVMaW5rQ2xhc3M6IGZ1bmN0aW9uKCBmb3JjZVJlbW92YWwgKSB7XHJcblx0XHRcdGlmICggISEkLm1vYmlsZS5hY3RpdmVDbGlja2VkTGluayAmJlxyXG5cdFx0XHRcdCggISQubW9iaWxlLmFjdGl2ZUNsaWNrZWRMaW5rLmNsb3Nlc3QoIFwiLlwiICsgJC5tb2JpbGUuYWN0aXZlUGFnZUNsYXNzICkubGVuZ3RoIHx8XHJcblx0XHRcdFx0XHRmb3JjZVJlbW92YWwgKSApIHtcclxuXHJcblx0XHRcdFx0JC5tb2JpbGUuYWN0aXZlQ2xpY2tlZExpbmsucmVtb3ZlQ2xhc3MoICQubW9iaWxlLmFjdGl2ZUJ0bkNsYXNzICk7XHJcblx0XHRcdH1cclxuXHRcdFx0JC5tb2JpbGUuYWN0aXZlQ2xpY2tlZExpbmsgPSBudWxsO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvLyBERVBSRUNBVEVEIGluIDEuNFxyXG5cdFx0Ly8gRmluZCB0aGUgY2xvc2VzdCBwYXJlbnQgd2l0aCBhIHRoZW1lIGNsYXNzIG9uIGl0LiBOb3RlIHRoYXRcclxuXHRcdC8vIHdlIGFyZSBub3QgdXNpbmcgJC5mbi5jbG9zZXN0KCkgb24gcHVycG9zZSBoZXJlIGJlY2F1c2UgdGhpc1xyXG5cdFx0Ly8gbWV0aG9kIGdldHMgY2FsbGVkIHF1aXRlIGEgYml0IGFuZCB3ZSBuZWVkIGl0IHRvIGJlIGFzIGZhc3RcclxuXHRcdC8vIGFzIHBvc3NpYmxlLlxyXG5cdFx0Z2V0SW5oZXJpdGVkVGhlbWU6IGZ1bmN0aW9uKCBlbCwgZGVmYXVsdFRoZW1lICkge1xyXG5cdFx0XHR2YXIgZSA9IGVsWyAwIF0sXHJcblx0XHRcdFx0bHRyID0gXCJcIixcclxuXHRcdFx0XHRyZSA9IC91aS0oYmFyfGJvZHl8b3ZlcmxheSktKFthLXpdKVxcYi8sXHJcblx0XHRcdFx0YywgbTtcclxuXHRcdFx0d2hpbGUgKCBlICkge1xyXG5cdFx0XHRcdGMgPSBlLmNsYXNzTmFtZSB8fCBcIlwiO1xyXG5cdFx0XHRcdGlmICggYyAmJiAoIG0gPSByZS5leGVjKCBjICkgKSAmJiAoIGx0ciA9IG1bIDIgXSApICkge1xyXG5cdFx0XHRcdFx0Ly8gV2UgZm91bmQgYSBwYXJlbnQgd2l0aCBhIHRoZW1lIGNsYXNzXHJcblx0XHRcdFx0XHQvLyBvbiBpdCBzbyBiYWlsIGZyb20gdGhpcyBsb29wLlxyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRlID0gZS5wYXJlbnROb2RlO1xyXG5cdFx0XHR9XHJcblx0XHRcdC8vIFJldHVybiB0aGUgdGhlbWUgbGV0dGVyIHdlIGZvdW5kLCBpZiBub25lLCByZXR1cm4gdGhlXHJcblx0XHRcdC8vIHNwZWNpZmllZCBkZWZhdWx0LlxyXG5cdFx0XHRyZXR1cm4gbHRyIHx8IGRlZmF1bHRUaGVtZSB8fCBcImFcIjtcclxuXHRcdH0sXHJcblxyXG5cdFx0ZW5oYW5jZWFibGU6IGZ1bmN0aW9uKCBlbGVtZW50cyApIHtcclxuXHRcdFx0cmV0dXJuIHRoaXMuaGF2ZVBhcmVudHMoIGVsZW1lbnRzLCBcImVuaGFuY2VcIiApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRoaWphY2thYmxlOiBmdW5jdGlvbiggZWxlbWVudHMgKSB7XHJcblx0XHRcdHJldHVybiB0aGlzLmhhdmVQYXJlbnRzKCBlbGVtZW50cywgXCJhamF4XCIgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0aGF2ZVBhcmVudHM6IGZ1bmN0aW9uKCBlbGVtZW50cywgYXR0ciApIHtcclxuXHRcdFx0aWYgKCAhJC5tb2JpbGUuaWdub3JlQ29udGVudEVuYWJsZWQgKSB7XHJcblx0XHRcdFx0cmV0dXJuIGVsZW1lbnRzO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR2YXIgY291bnQgPSBlbGVtZW50cy5sZW5ndGgsXHJcblx0XHRcdFx0JG5ld1NldCA9ICQoKSxcclxuXHRcdFx0XHRlLCAkZWxlbWVudCwgZXhjbHVkZWQsXHJcblx0XHRcdFx0aSwgYztcclxuXHJcblx0XHRcdGZvciAoIGkgPSAwOyBpIDwgY291bnQ7IGkrKyApIHtcclxuXHRcdFx0XHQkZWxlbWVudCA9IGVsZW1lbnRzLmVxKCBpICk7XHJcblx0XHRcdFx0ZXhjbHVkZWQgPSBmYWxzZTtcclxuXHRcdFx0XHRlID0gZWxlbWVudHNbIGkgXTtcclxuXHJcblx0XHRcdFx0d2hpbGUgKCBlICkge1xyXG5cdFx0XHRcdFx0YyA9IGUuZ2V0QXR0cmlidXRlID8gZS5nZXRBdHRyaWJ1dGUoIFwiZGF0YS1cIiArICQubW9iaWxlLm5zICsgYXR0ciApIDogXCJcIjtcclxuXHJcblx0XHRcdFx0XHRpZiAoIGMgPT09IFwiZmFsc2VcIiApIHtcclxuXHRcdFx0XHRcdFx0ZXhjbHVkZWQgPSB0cnVlO1xyXG5cdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRlID0gZS5wYXJlbnROb2RlO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0aWYgKCAhZXhjbHVkZWQgKSB7XHJcblx0XHRcdFx0XHQkbmV3U2V0ID0gJG5ld1NldC5hZGQoICRlbGVtZW50ICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRyZXR1cm4gJG5ld1NldDtcclxuXHRcdH0sXHJcblxyXG5cdFx0Z2V0U2NyZWVuSGVpZ2h0OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0Ly8gTmF0aXZlIGlubmVySGVpZ2h0IHJldHVybnMgbW9yZSBhY2N1cmF0ZSB2YWx1ZSBmb3IgdGhpcyBhY3Jvc3MgcGxhdGZvcm1zLFxyXG5cdFx0XHQvLyBqUXVlcnkgdmVyc2lvbiBpcyBoZXJlIGFzIGEgbm9ybWFsaXplZCBmYWxsYmFjayBmb3IgcGxhdGZvcm1zIGxpa2UgU3ltYmlhblxyXG5cdFx0XHRyZXR1cm4gd2luZG93LmlubmVySGVpZ2h0IHx8ICQubW9iaWxlLndpbmRvdy5oZWlnaHQoKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly9zaW1wbHkgc2V0IHRoZSBhY3RpdmUgcGFnZSdzIG1pbmltdW0gaGVpZ2h0IHRvIHNjcmVlbiBoZWlnaHQsIGRlcGVuZGluZyBvbiBvcmllbnRhdGlvblxyXG5cdFx0cmVzZXRBY3RpdmVQYWdlSGVpZ2h0OiBmdW5jdGlvbiggaGVpZ2h0ICkge1xyXG5cdFx0XHR2YXIgcGFnZSA9ICQoIFwiLlwiICsgJC5tb2JpbGUuYWN0aXZlUGFnZUNsYXNzICksXHJcblx0XHRcdFx0cGFnZUhlaWdodCA9IHBhZ2UuaGVpZ2h0KCksXHJcblx0XHRcdFx0cGFnZU91dGVySGVpZ2h0ID0gcGFnZS5vdXRlckhlaWdodCggdHJ1ZSApO1xyXG5cclxuXHRcdFx0aGVpZ2h0ID0gY29tcGVuc2F0ZVRvb2xiYXJzKCBwYWdlLFxyXG5cdFx0XHRcdCggdHlwZW9mIGhlaWdodCA9PT0gXCJudW1iZXJcIiApID8gaGVpZ2h0IDogJC5tb2JpbGUuZ2V0U2NyZWVuSGVpZ2h0KCkgKTtcclxuXHJcblx0XHRcdC8vIFJlbW92ZSBhbnkgcHJldmlvdXMgbWluLWhlaWdodCBzZXR0aW5nXHJcblx0XHRcdHBhZ2UuY3NzKCBcIm1pbi1oZWlnaHRcIiwgXCJcIiApO1xyXG5cclxuXHRcdFx0Ly8gU2V0IHRoZSBtaW5pbXVtIGhlaWdodCBvbmx5IGlmIHRoZSBoZWlnaHQgYXMgZGV0ZXJtaW5lZCBieSBDU1MgaXMgaW5zdWZmaWNpZW50XHJcblx0XHRcdGlmICggcGFnZS5oZWlnaHQoKSA8IGhlaWdodCApIHtcclxuXHRcdFx0XHRwYWdlLmNzcyggXCJtaW4taGVpZ2h0XCIsIGhlaWdodCAtICggcGFnZU91dGVySGVpZ2h0IC0gcGFnZUhlaWdodCApICk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblxyXG5cdFx0bG9hZGluZzogZnVuY3Rpb24oKSB7XHJcblx0XHRcdC8vIElmIHRoaXMgaXMgdGhlIGZpcnN0IGNhbGwgdG8gdGhpcyBmdW5jdGlvbiwgaW5zdGFudGlhdGUgYSBsb2FkZXIgd2lkZ2V0XHJcblx0XHRcdHZhciBsb2FkZXIgPSB0aGlzLmxvYWRpbmcuX3dpZGdldCB8fCAkKCAkLm1vYmlsZS5sb2FkZXIucHJvdG90eXBlLmRlZmF1bHRIdG1sICkubG9hZGVyKCksXHJcblxyXG5cdFx0XHRcdC8vIENhbGwgdGhlIGFwcHJvcHJpYXRlIG1ldGhvZCBvbiB0aGUgbG9hZGVyXHJcblx0XHRcdFx0cmV0dXJuVmFsdWUgPSBsb2FkZXIubG9hZGVyLmFwcGx5KCBsb2FkZXIsIGFyZ3VtZW50cyApO1xyXG5cclxuXHRcdFx0Ly8gTWFrZSBzdXJlIHRoZSBsb2FkZXIgaXMgcmV0YWluZWQgZm9yIGZ1dHVyZSBjYWxscyB0byB0aGlzIGZ1bmN0aW9uLlxyXG5cdFx0XHR0aGlzLmxvYWRpbmcuX3dpZGdldCA9IGxvYWRlcjtcclxuXHJcblx0XHRcdHJldHVybiByZXR1cm5WYWx1ZTtcclxuXHRcdH1cclxuXHR9KTtcclxuXHJcblx0JC5hZGREZXBlbmRlbnRzID0gZnVuY3Rpb24oIGVsZW0sIG5ld0RlcGVuZGVudHMgKSB7XHJcblx0XHR2YXIgJGVsZW0gPSAkKCBlbGVtICksXHJcblx0XHRcdGRlcGVuZGVudHMgPSAkZWxlbS5qcW1EYXRhKCBcImRlcGVuZGVudHNcIiApIHx8ICQoKTtcclxuXHJcblx0XHQkZWxlbS5qcW1EYXRhKCBcImRlcGVuZGVudHNcIiwgJCggZGVwZW5kZW50cyApLmFkZCggbmV3RGVwZW5kZW50cyApICk7XHJcblx0fTtcclxuXHJcblx0Ly8gcGx1Z2luc1xyXG5cdCQuZm4uZXh0ZW5kKHtcclxuXHRcdHJlbW92ZVdpdGhEZXBlbmRlbnRzOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0JC5yZW1vdmVXaXRoRGVwZW5kZW50cyggdGhpcyApO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvLyBFbmhhbmNlIGNoaWxkIGVsZW1lbnRzXHJcblx0XHRlbmhhbmNlV2l0aGluOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIGluZGV4LFxyXG5cdFx0XHRcdHdpZGdldEVsZW1lbnRzID0ge30sXHJcblx0XHRcdFx0a2VlcE5hdGl2ZSA9ICQubW9iaWxlLnBhZ2UucHJvdG90eXBlLmtlZXBOYXRpdmVTZWxlY3RvcigpLFxyXG5cdFx0XHRcdHRoYXQgPSB0aGlzO1xyXG5cclxuXHRcdFx0Ly8gQWRkIG5vIGpzIGNsYXNzIHRvIGVsZW1lbnRzXHJcblx0XHRcdGlmICggJC5tb2JpbGUubm9qcyApIHtcclxuXHRcdFx0XHQkLm1vYmlsZS5ub2pzKCB0aGlzICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIEJpbmQgbGlua3MgZm9yIGFqYXggbmF2XHJcblx0XHRcdGlmICggJC5tb2JpbGUubGlua3MgKSB7XHJcblx0XHRcdFx0JC5tb2JpbGUubGlua3MoIHRoaXMgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gRGVncmFkZSBpbnB1dHMgZm9yIHN0eWxlaW5nXHJcblx0XHRcdGlmICggJC5tb2JpbGUuZGVncmFkZUlucHV0c1dpdGhpbiApIHtcclxuXHRcdFx0XHQkLm1vYmlsZS5kZWdyYWRlSW5wdXRzV2l0aGluKCB0aGlzICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIFJ1biBidXR0b25tYXJrdXBcclxuXHRcdFx0aWYgKCAkLmZuLmJ1dHRvbk1hcmt1cCApIHtcclxuXHRcdFx0XHR0aGlzLmZpbmQoICQuZm4uYnV0dG9uTWFya3VwLmluaXRTZWxlY3RvciApLm5vdCgga2VlcE5hdGl2ZSApXHJcblx0XHRcdFx0LmpxbUVuaGFuY2VhYmxlKCkuYnV0dG9uTWFya3VwKCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIEFkZCBjbGFzc2VzIGZvciBmaWVsZENvbnRhaW5cclxuXHRcdFx0aWYgKCAkLmZuLmZpZWxkY29udGFpbiApIHtcclxuXHRcdFx0XHR0aGlzLmZpbmQoIFwiOmpxbURhdGEocm9sZT0nZmllbGRjb250YWluJylcIiApLm5vdCgga2VlcE5hdGl2ZSApXHJcblx0XHRcdFx0LmpxbUVuaGFuY2VhYmxlKCkuZmllbGRjb250YWluKCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIEVuaGFuY2Ugd2lkZ2V0c1xyXG5cdFx0XHQkLmVhY2goICQubW9iaWxlLndpZGdldHMsIGZ1bmN0aW9uKCBuYW1lLCBjb25zdHJ1Y3RvciApIHtcclxuXHJcblx0XHRcdFx0Ly8gSWYgaW5pdFNlbGVjdG9yIG5vdCBmYWxzZSBmaW5kIGVsZW1lbnRzXHJcblx0XHRcdFx0aWYgKCBjb25zdHJ1Y3Rvci5pbml0U2VsZWN0b3IgKSB7XHJcblxyXG5cdFx0XHRcdFx0Ly8gRmlsdGVyIGVsZW1lbnRzIHRoYXQgc2hvdWxkIG5vdCBiZSBlbmhhbmNlZCBiYXNlZCBvbiBwYXJlbnRzXHJcblx0XHRcdFx0XHR2YXIgZWxlbWVudHMgPSAkLm1vYmlsZS5lbmhhbmNlYWJsZSggdGhhdC5maW5kKCBjb25zdHJ1Y3Rvci5pbml0U2VsZWN0b3IgKSApO1xyXG5cclxuXHRcdFx0XHRcdC8vIElmIGFueSBtYXRjaGluZyBlbGVtZW50cyByZW1haW4gZmlsdGVyIG9uZXMgd2l0aCBrZWVwTmF0aXZlU2VsZWN0b3JcclxuXHRcdFx0XHRcdGlmICggZWxlbWVudHMubGVuZ3RoID4gMCApIHtcclxuXHJcblx0XHRcdFx0XHRcdC8vICQubW9iaWxlLnBhZ2UucHJvdG90eXBlLmtlZXBOYXRpdmVTZWxlY3RvciBpcyBkZXByZWNhdGVkIHRoaXMgaXMganVzdCBmb3IgYmFja2NvbXBhdFxyXG5cdFx0XHRcdFx0XHQvLyBTd2l0Y2ggdG8gJC5tb2JpbGUua2VlcE5hdGl2ZSBpbiAxLjUgd2hpY2ggaXMganVzdCBhIHZhbHVlIG5vdCBhIGZ1bmN0aW9uXHJcblx0XHRcdFx0XHRcdGVsZW1lbnRzID0gZWxlbWVudHMubm90KCBrZWVwTmF0aXZlICk7XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0Ly8gRW5oYW5jZSB3aGF0ZXZlciBpcyBsZWZ0XHJcblx0XHRcdFx0XHRpZiAoIGVsZW1lbnRzLmxlbmd0aCA+IDAgKSB7XHJcblx0XHRcdFx0XHRcdHdpZGdldEVsZW1lbnRzWyBjb25zdHJ1Y3Rvci5wcm90b3R5cGUud2lkZ2V0TmFtZSBdID0gZWxlbWVudHM7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdGZvciAoIGluZGV4IGluIHdpZGdldEVsZW1lbnRzICkge1xyXG5cdFx0XHRcdHdpZGdldEVsZW1lbnRzWyBpbmRleCBdWyBpbmRleCBdKCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHJldHVybiB0aGlzO1xyXG5cdFx0fSxcclxuXHJcblx0XHRhZGREZXBlbmRlbnRzOiBmdW5jdGlvbiggbmV3RGVwZW5kZW50cyApIHtcclxuXHRcdFx0JC5hZGREZXBlbmRlbnRzKCB0aGlzLCBuZXdEZXBlbmRlbnRzICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vIG5vdGUgdGhhdCB0aGlzIGhlbHBlciBkb2Vzbid0IGF0dGVtcHQgdG8gaGFuZGxlIHRoZSBjYWxsYmFja1xyXG5cdFx0Ly8gb3Igc2V0dGluZyBvZiBhbiBodG1sIGVsZW1lbnQncyB0ZXh0LCBpdHMgb25seSBwdXJwb3NlIGlzXHJcblx0XHQvLyB0byByZXR1cm4gdGhlIGh0bWwgZW5jb2RlZCB2ZXJzaW9uIG9mIHRoZSB0ZXh0IGluIGFsbCBjYXNlcy4gKHRodXMgdGhlIG5hbWUpXHJcblx0XHRnZXRFbmNvZGVkVGV4dDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHJldHVybiAkKCBcIjxhPlwiICkudGV4dCggdGhpcy50ZXh0KCkgKS5odG1sKCk7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vIGZsdWVudCBoZWxwZXIgZnVuY3Rpb24gZm9yIHRoZSBtb2JpbGUgbmFtZXNwYWNlZCBlcXVpdmFsZW50XHJcblx0XHRqcW1FbmhhbmNlYWJsZTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHJldHVybiAkLm1vYmlsZS5lbmhhbmNlYWJsZSggdGhpcyApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRqcW1IaWphY2thYmxlOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0cmV0dXJuICQubW9iaWxlLmhpamFja2FibGUoIHRoaXMgKTtcclxuXHRcdH1cclxuXHR9KTtcclxuXHJcblx0JC5yZW1vdmVXaXRoRGVwZW5kZW50cyA9IGZ1bmN0aW9uKCBuYXRpdmVFbGVtZW50ICkge1xyXG5cdFx0dmFyIGVsZW1lbnQgPSAkKCBuYXRpdmVFbGVtZW50ICk7XHJcblxyXG5cdFx0KCBlbGVtZW50LmpxbURhdGEoIFwiZGVwZW5kZW50c1wiICkgfHwgJCgpICkucmVtb3ZlKCk7XHJcblx0XHRlbGVtZW50LnJlbW92ZSgpO1xyXG5cdH07XHJcblx0JC5hZGREZXBlbmRlbnRzID0gZnVuY3Rpb24oIG5hdGl2ZUVsZW1lbnQsIG5ld0RlcGVuZGVudHMgKSB7XHJcblx0XHR2YXIgZWxlbWVudCA9ICQoIG5hdGl2ZUVsZW1lbnQgKSxcclxuXHRcdFx0ZGVwZW5kZW50cyA9IGVsZW1lbnQuanFtRGF0YSggXCJkZXBlbmRlbnRzXCIgKSB8fCAkKCk7XHJcblxyXG5cdFx0ZWxlbWVudC5qcW1EYXRhKCBcImRlcGVuZGVudHNcIiwgJCggZGVwZW5kZW50cyApLmFkZCggbmV3RGVwZW5kZW50cyApICk7XHJcblx0fTtcclxuXHJcblx0JC5maW5kLm1hdGNoZXMgPSBmdW5jdGlvbiggZXhwciwgc2V0ICkge1xyXG5cdFx0cmV0dXJuICQuZmluZCggZXhwciwgbnVsbCwgbnVsbCwgc2V0ICk7XHJcblx0fTtcclxuXHJcblx0JC5maW5kLm1hdGNoZXNTZWxlY3RvciA9IGZ1bmN0aW9uKCBub2RlLCBleHByICkge1xyXG5cdFx0cmV0dXJuICQuZmluZCggZXhwciwgbnVsbCwgbnVsbCwgWyBub2RlIF0gKS5sZW5ndGggPiAwO1xyXG5cdH07XHJcblxyXG59KSggalF1ZXJ5LCB0aGlzICk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHdpbmRvdywgdW5kZWZpbmVkICkge1xyXG5cdCQuZXh0ZW5kKCAkLm1vYmlsZSwge1xyXG5cclxuXHRcdC8vIFZlcnNpb24gb2YgdGhlIGpRdWVyeSBNb2JpbGUgRnJhbWV3b3JrXHJcblx0XHR2ZXJzaW9uOiBcIjEuNC41XCIsXHJcblxyXG5cdFx0Ly8gRGVwcmVjYXRlZCBhbmQgbm8gbG9uZ2VyIHVzZWQgaW4gMS40IHJlbW92ZSBpbiAxLjVcclxuXHRcdC8vIERlZmluZSB0aGUgdXJsIHBhcmFtZXRlciB1c2VkIGZvciByZWZlcmVuY2luZyB3aWRnZXQtZ2VuZXJhdGVkIHN1Yi1wYWdlcy5cclxuXHRcdC8vIFRyYW5zbGF0ZXMgdG8gZXhhbXBsZS5odG1sJnVpLXBhZ2U9c3VicGFnZUlkZW50aWZpZXJcclxuXHRcdC8vIGhhc2ggc2VnbWVudCBiZWZvcmUgJnVpLXBhZ2U9IGlzIHVzZWQgdG8gbWFrZSBBamF4IHJlcXVlc3RcclxuXHRcdHN1YlBhZ2VVcmxLZXk6IFwidWktcGFnZVwiLFxyXG5cclxuXHRcdGhpZGVVcmxCYXI6IHRydWUsXHJcblxyXG5cdFx0Ly8gS2VlcG5hdGl2ZSBTZWxlY3RvclxyXG5cdFx0a2VlcE5hdGl2ZTogXCI6anFtRGF0YShyb2xlPSdub25lJyksIDpqcW1EYXRhKHJvbGU9J25vanMnKVwiLFxyXG5cclxuXHRcdC8vIERlcHJlY2F0ZWQgaW4gMS40IHJlbW92ZSBpbiAxLjVcclxuXHRcdC8vIENsYXNzIGFzc2lnbmVkIHRvIHBhZ2UgY3VycmVudGx5IGluIHZpZXcsIGFuZCBkdXJpbmcgdHJhbnNpdGlvbnNcclxuXHRcdGFjdGl2ZVBhZ2VDbGFzczogXCJ1aS1wYWdlLWFjdGl2ZVwiLFxyXG5cclxuXHRcdC8vIERlcHJlY2F0ZWQgaW4gMS40IHJlbW92ZSBpbiAxLjVcclxuXHRcdC8vIENsYXNzIHVzZWQgZm9yIFwiYWN0aXZlXCIgYnV0dG9uIHN0YXRlLCBmcm9tIENTUyBmcmFtZXdvcmtcclxuXHRcdGFjdGl2ZUJ0bkNsYXNzOiBcInVpLWJ0bi1hY3RpdmVcIixcclxuXHJcblx0XHQvLyBEZXByZWNhdGVkIGluIDEuNCByZW1vdmUgaW4gMS41XHJcblx0XHQvLyBDbGFzcyB1c2VkIGZvciBcImZvY3VzXCIgZm9ybSBlbGVtZW50IHN0YXRlLCBmcm9tIENTUyBmcmFtZXdvcmtcclxuXHRcdGZvY3VzQ2xhc3M6IFwidWktZm9jdXNcIixcclxuXHJcblx0XHQvLyBBdXRvbWF0aWNhbGx5IGhhbmRsZSBjbGlja3MgYW5kIGZvcm0gc3VibWlzc2lvbnMgdGhyb3VnaCBBamF4LCB3aGVuIHNhbWUtZG9tYWluXHJcblx0XHRhamF4RW5hYmxlZDogdHJ1ZSxcclxuXHJcblx0XHQvLyBBdXRvbWF0aWNhbGx5IGxvYWQgYW5kIHNob3cgcGFnZXMgYmFzZWQgb24gbG9jYXRpb24uaGFzaFxyXG5cdFx0aGFzaExpc3RlbmluZ0VuYWJsZWQ6IHRydWUsXHJcblxyXG5cdFx0Ly8gZGlzYWJsZSB0byBwcmV2ZW50IGpxdWVyeSBmcm9tIGJvdGhlcmluZyB3aXRoIGxpbmtzXHJcblx0XHRsaW5rQmluZGluZ0VuYWJsZWQ6IHRydWUsXHJcblxyXG5cdFx0Ly8gU2V0IGRlZmF1bHQgcGFnZSB0cmFuc2l0aW9uIC0gJ25vbmUnIGZvciBubyB0cmFuc2l0aW9uc1xyXG5cdFx0ZGVmYXVsdFBhZ2VUcmFuc2l0aW9uOiBcImZhZGVcIixcclxuXHJcblx0XHQvLyBTZXQgbWF4aW11bSB3aW5kb3cgd2lkdGggZm9yIHRyYW5zaXRpb25zIHRvIGFwcGx5IC0gJ2ZhbHNlJyBmb3Igbm8gbGltaXRcclxuXHRcdG1heFRyYW5zaXRpb25XaWR0aDogZmFsc2UsXHJcblxyXG5cdFx0Ly8gTWluaW11bSBzY3JvbGwgZGlzdGFuY2UgdGhhdCB3aWxsIGJlIHJlbWVtYmVyZWQgd2hlbiByZXR1cm5pbmcgdG8gYSBwYWdlXHJcblx0XHQvLyBEZXByZWNhdGVkIHJlbW92ZSBpbiAxLjVcclxuXHRcdG1pblNjcm9sbEJhY2s6IDAsXHJcblxyXG5cdFx0Ly8gU2V0IGRlZmF1bHQgZGlhbG9nIHRyYW5zaXRpb24gLSAnbm9uZScgZm9yIG5vIHRyYW5zaXRpb25zXHJcblx0XHRkZWZhdWx0RGlhbG9nVHJhbnNpdGlvbjogXCJwb3BcIixcclxuXHJcblx0XHQvLyBFcnJvciByZXNwb25zZSBtZXNzYWdlIC0gYXBwZWFycyB3aGVuIGFuIEFqYXggcGFnZSByZXF1ZXN0IGZhaWxzXHJcblx0XHRwYWdlTG9hZEVycm9yTWVzc2FnZTogXCJFcnJvciBMb2FkaW5nIFBhZ2VcIixcclxuXHJcblx0XHQvLyBGb3IgZXJyb3IgbWVzc2FnZXMsIHdoaWNoIHRoZW1lIGRvZXMgdGhlIGJveCB1c2U/XHJcblx0XHRwYWdlTG9hZEVycm9yTWVzc2FnZVRoZW1lOiBcImFcIixcclxuXHJcblx0XHQvLyByZXBsYWNlIGNhbGxzIHRvIHdpbmRvdy5oaXN0b3J5LmJhY2sgd2l0aCBwaG9uZWdhcHMgbmF2aWdhdGlvbiBoZWxwZXJcclxuXHRcdC8vIHdoZXJlIGl0IGlzIHByb3ZpZGVkIG9uIHRoZSB3aW5kb3cgb2JqZWN0XHJcblx0XHRwaG9uZWdhcE5hdmlnYXRpb25FbmFibGVkOiBmYWxzZSxcclxuXHJcblx0XHQvL2F1dG9tYXRpY2FsbHkgaW5pdGlhbGl6ZSB0aGUgRE9NIHdoZW4gaXQncyByZWFkeVxyXG5cdFx0YXV0b0luaXRpYWxpemVQYWdlOiB0cnVlLFxyXG5cclxuXHRcdHB1c2hTdGF0ZUVuYWJsZWQ6IHRydWUsXHJcblxyXG5cdFx0Ly8gYWxsb3dzIHVzZXJzIHRvIG9wdCBpbiB0byBpZ25vcmluZyBjb250ZW50IGJ5IG1hcmtpbmcgYSBwYXJlbnQgZWxlbWVudCBhc1xyXG5cdFx0Ly8gZGF0YS1pZ25vcmVkXHJcblx0XHRpZ25vcmVDb250ZW50RW5hYmxlZDogZmFsc2UsXHJcblxyXG5cdFx0YnV0dG9uTWFya3VwOiB7XHJcblx0XHRcdGhvdmVyRGVsYXk6IDIwMFxyXG5cdFx0fSxcclxuXHJcblx0XHQvLyBkaXNhYmxlIHRoZSBhbHRlcmF0aW9uIG9mIHRoZSBkeW5hbWljIGJhc2UgdGFnIG9yIGxpbmtzIGluIHRoZSBjYXNlXHJcblx0XHQvLyB0aGF0IGEgZHluYW1pYyBiYXNlIHRhZyBpc24ndCBzdXBwb3J0ZWRcclxuXHRcdGR5bmFtaWNCYXNlRW5hYmxlZDogdHJ1ZSxcclxuXHJcblx0XHQvLyBkZWZhdWx0IHRoZSBwcm9wZXJ0eSB0byByZW1vdmUgZGVwZW5kZW5jeSBvbiBhc3NpZ25tZW50IGluIGluaXQgbW9kdWxlXHJcblx0XHRwYWdlQ29udGFpbmVyOiAkKCksXHJcblxyXG5cdFx0Ly9lbmFibGUgY3Jvc3MtZG9tYWluIHBhZ2Ugc3VwcG9ydFxyXG5cdFx0YWxsb3dDcm9zc0RvbWFpblBhZ2VzOiBmYWxzZSxcclxuXHJcblx0XHRkaWFsb2dIYXNoS2V5OiBcIiZ1aS1zdGF0ZT1kaWFsb2dcIlxyXG5cdH0pO1xyXG59KSggalF1ZXJ5LCB0aGlzICk7XHJcblxyXG4vKiFcclxuICogalF1ZXJ5IFVJIFdpZGdldCBjMGFiNzEwNTZiOTM2NjI3ZThhNzgyMWYwM2MwNDRhZWM2MjgwYTQwXHJcbiAqIGh0dHA6Ly9qcXVlcnl1aS5jb21cclxuICpcclxuICogQ29weXJpZ2h0IDIwMTMgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9yc1xyXG4gKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXHJcbiAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2VcclxuICpcclxuICogaHR0cDovL2FwaS5qcXVlcnl1aS5jb20valF1ZXJ5LndpZGdldC9cclxuICovXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxudmFyIHV1aWQgPSAwLFxyXG5cdHNsaWNlID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLFxyXG5cdF9jbGVhbkRhdGEgPSAkLmNsZWFuRGF0YTtcclxuJC5jbGVhbkRhdGEgPSBmdW5jdGlvbiggZWxlbXMgKSB7XHJcblx0Zm9yICggdmFyIGkgPSAwLCBlbGVtOyAoZWxlbSA9IGVsZW1zW2ldKSAhPSBudWxsOyBpKysgKSB7XHJcblx0XHR0cnkge1xyXG5cdFx0XHQkKCBlbGVtICkudHJpZ2dlckhhbmRsZXIoIFwicmVtb3ZlXCIgKTtcclxuXHRcdC8vIGh0dHA6Ly9idWdzLmpxdWVyeS5jb20vdGlja2V0LzgyMzVcclxuXHRcdH0gY2F0Y2goIGUgKSB7fVxyXG5cdH1cclxuXHRfY2xlYW5EYXRhKCBlbGVtcyApO1xyXG59O1xyXG5cclxuJC53aWRnZXQgPSBmdW5jdGlvbiggbmFtZSwgYmFzZSwgcHJvdG90eXBlICkge1xyXG5cdHZhciBmdWxsTmFtZSwgZXhpc3RpbmdDb25zdHJ1Y3RvciwgY29uc3RydWN0b3IsIGJhc2VQcm90b3R5cGUsXHJcblx0XHQvLyBwcm94aWVkUHJvdG90eXBlIGFsbG93cyB0aGUgcHJvdmlkZWQgcHJvdG90eXBlIHRvIHJlbWFpbiB1bm1vZGlmaWVkXHJcblx0XHQvLyBzbyB0aGF0IGl0IGNhbiBiZSB1c2VkIGFzIGEgbWl4aW4gZm9yIG11bHRpcGxlIHdpZGdldHMgKCM4ODc2KVxyXG5cdFx0cHJveGllZFByb3RvdHlwZSA9IHt9LFxyXG5cdFx0bmFtZXNwYWNlID0gbmFtZS5zcGxpdCggXCIuXCIgKVsgMCBdO1xyXG5cclxuXHRuYW1lID0gbmFtZS5zcGxpdCggXCIuXCIgKVsgMSBdO1xyXG5cdGZ1bGxOYW1lID0gbmFtZXNwYWNlICsgXCItXCIgKyBuYW1lO1xyXG5cclxuXHRpZiAoICFwcm90b3R5cGUgKSB7XHJcblx0XHRwcm90b3R5cGUgPSBiYXNlO1xyXG5cdFx0YmFzZSA9ICQuV2lkZ2V0O1xyXG5cdH1cclxuXHJcblx0Ly8gY3JlYXRlIHNlbGVjdG9yIGZvciBwbHVnaW5cclxuXHQkLmV4cHJbIFwiOlwiIF1bIGZ1bGxOYW1lLnRvTG93ZXJDYXNlKCkgXSA9IGZ1bmN0aW9uKCBlbGVtICkge1xyXG5cdFx0cmV0dXJuICEhJC5kYXRhKCBlbGVtLCBmdWxsTmFtZSApO1xyXG5cdH07XHJcblxyXG5cdCRbIG5hbWVzcGFjZSBdID0gJFsgbmFtZXNwYWNlIF0gfHwge307XHJcblx0ZXhpc3RpbmdDb25zdHJ1Y3RvciA9ICRbIG5hbWVzcGFjZSBdWyBuYW1lIF07XHJcblx0Y29uc3RydWN0b3IgPSAkWyBuYW1lc3BhY2UgXVsgbmFtZSBdID0gZnVuY3Rpb24oIG9wdGlvbnMsIGVsZW1lbnQgKSB7XHJcblx0XHQvLyBhbGxvdyBpbnN0YW50aWF0aW9uIHdpdGhvdXQgXCJuZXdcIiBrZXl3b3JkXHJcblx0XHRpZiAoICF0aGlzLl9jcmVhdGVXaWRnZXQgKSB7XHJcblx0XHRcdHJldHVybiBuZXcgY29uc3RydWN0b3IoIG9wdGlvbnMsIGVsZW1lbnQgKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBhbGxvdyBpbnN0YW50aWF0aW9uIHdpdGhvdXQgaW5pdGlhbGl6aW5nIGZvciBzaW1wbGUgaW5oZXJpdGFuY2VcclxuXHRcdC8vIG11c3QgdXNlIFwibmV3XCIga2V5d29yZCAodGhlIGNvZGUgYWJvdmUgYWx3YXlzIHBhc3NlcyBhcmdzKVxyXG5cdFx0aWYgKCBhcmd1bWVudHMubGVuZ3RoICkge1xyXG5cdFx0XHR0aGlzLl9jcmVhdGVXaWRnZXQoIG9wdGlvbnMsIGVsZW1lbnQgKTtcclxuXHRcdH1cclxuXHR9O1xyXG5cdC8vIGV4dGVuZCB3aXRoIHRoZSBleGlzdGluZyBjb25zdHJ1Y3RvciB0byBjYXJyeSBvdmVyIGFueSBzdGF0aWMgcHJvcGVydGllc1xyXG5cdCQuZXh0ZW5kKCBjb25zdHJ1Y3RvciwgZXhpc3RpbmdDb25zdHJ1Y3Rvciwge1xyXG5cdFx0dmVyc2lvbjogcHJvdG90eXBlLnZlcnNpb24sXHJcblx0XHQvLyBjb3B5IHRoZSBvYmplY3QgdXNlZCB0byBjcmVhdGUgdGhlIHByb3RvdHlwZSBpbiBjYXNlIHdlIG5lZWQgdG9cclxuXHRcdC8vIHJlZGVmaW5lIHRoZSB3aWRnZXQgbGF0ZXJcclxuXHRcdF9wcm90bzogJC5leHRlbmQoIHt9LCBwcm90b3R5cGUgKSxcclxuXHRcdC8vIHRyYWNrIHdpZGdldHMgdGhhdCBpbmhlcml0IGZyb20gdGhpcyB3aWRnZXQgaW4gY2FzZSB0aGlzIHdpZGdldCBpc1xyXG5cdFx0Ly8gcmVkZWZpbmVkIGFmdGVyIGEgd2lkZ2V0IGluaGVyaXRzIGZyb20gaXRcclxuXHRcdF9jaGlsZENvbnN0cnVjdG9yczogW11cclxuXHR9KTtcclxuXHJcblx0YmFzZVByb3RvdHlwZSA9IG5ldyBiYXNlKCk7XHJcblx0Ly8gd2UgbmVlZCB0byBtYWtlIHRoZSBvcHRpb25zIGhhc2ggYSBwcm9wZXJ0eSBkaXJlY3RseSBvbiB0aGUgbmV3IGluc3RhbmNlXHJcblx0Ly8gb3RoZXJ3aXNlIHdlJ2xsIG1vZGlmeSB0aGUgb3B0aW9ucyBoYXNoIG9uIHRoZSBwcm90b3R5cGUgdGhhdCB3ZSdyZVxyXG5cdC8vIGluaGVyaXRpbmcgZnJvbVxyXG5cdGJhc2VQcm90b3R5cGUub3B0aW9ucyA9ICQud2lkZ2V0LmV4dGVuZCgge30sIGJhc2VQcm90b3R5cGUub3B0aW9ucyApO1xyXG5cdCQuZWFjaCggcHJvdG90eXBlLCBmdW5jdGlvbiggcHJvcCwgdmFsdWUgKSB7XHJcblx0XHRpZiAoICEkLmlzRnVuY3Rpb24oIHZhbHVlICkgKSB7XHJcblx0XHRcdHByb3hpZWRQcm90b3R5cGVbIHByb3AgXSA9IHZhbHVlO1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblx0XHRwcm94aWVkUHJvdG90eXBlWyBwcm9wIF0gPSAoZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBfc3VwZXIgPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdHJldHVybiBiYXNlLnByb3RvdHlwZVsgcHJvcCBdLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcclxuXHRcdFx0XHR9LFxyXG5cdFx0XHRcdF9zdXBlckFwcGx5ID0gZnVuY3Rpb24oIGFyZ3MgKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gYmFzZS5wcm90b3R5cGVbIHByb3AgXS5hcHBseSggdGhpcywgYXJncyApO1xyXG5cdFx0XHRcdH07XHJcblx0XHRcdHJldHVybiBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR2YXIgX19zdXBlciA9IHRoaXMuX3N1cGVyLFxyXG5cdFx0XHRcdFx0X19zdXBlckFwcGx5ID0gdGhpcy5fc3VwZXJBcHBseSxcclxuXHRcdFx0XHRcdHJldHVyblZhbHVlO1xyXG5cclxuXHRcdFx0XHR0aGlzLl9zdXBlciA9IF9zdXBlcjtcclxuXHRcdFx0XHR0aGlzLl9zdXBlckFwcGx5ID0gX3N1cGVyQXBwbHk7XHJcblxyXG5cdFx0XHRcdHJldHVyblZhbHVlID0gdmFsdWUuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xyXG5cclxuXHRcdFx0XHR0aGlzLl9zdXBlciA9IF9fc3VwZXI7XHJcblx0XHRcdFx0dGhpcy5fc3VwZXJBcHBseSA9IF9fc3VwZXJBcHBseTtcclxuXHJcblx0XHRcdFx0cmV0dXJuIHJldHVyblZhbHVlO1xyXG5cdFx0XHR9O1xyXG5cdFx0fSkoKTtcclxuXHR9KTtcclxuXHRjb25zdHJ1Y3Rvci5wcm90b3R5cGUgPSAkLndpZGdldC5leHRlbmQoIGJhc2VQcm90b3R5cGUsIHtcclxuXHRcdC8vIFRPRE86IHJlbW92ZSBzdXBwb3J0IGZvciB3aWRnZXRFdmVudFByZWZpeFxyXG5cdFx0Ly8gYWx3YXlzIHVzZSB0aGUgbmFtZSArIGEgY29sb24gYXMgdGhlIHByZWZpeCwgZS5nLiwgZHJhZ2dhYmxlOnN0YXJ0XHJcblx0XHQvLyBkb24ndCBwcmVmaXggZm9yIHdpZGdldHMgdGhhdCBhcmVuJ3QgRE9NLWJhc2VkXHJcblx0XHR3aWRnZXRFdmVudFByZWZpeDogZXhpc3RpbmdDb25zdHJ1Y3RvciA/IChiYXNlUHJvdG90eXBlLndpZGdldEV2ZW50UHJlZml4IHx8IG5hbWUpIDogbmFtZVxyXG5cdH0sIHByb3hpZWRQcm90b3R5cGUsIHtcclxuXHRcdGNvbnN0cnVjdG9yOiBjb25zdHJ1Y3RvcixcclxuXHRcdG5hbWVzcGFjZTogbmFtZXNwYWNlLFxyXG5cdFx0d2lkZ2V0TmFtZTogbmFtZSxcclxuXHRcdHdpZGdldEZ1bGxOYW1lOiBmdWxsTmFtZVxyXG5cdH0pO1xyXG5cclxuXHQvLyBJZiB0aGlzIHdpZGdldCBpcyBiZWluZyByZWRlZmluZWQgdGhlbiB3ZSBuZWVkIHRvIGZpbmQgYWxsIHdpZGdldHMgdGhhdFxyXG5cdC8vIGFyZSBpbmhlcml0aW5nIGZyb20gaXQgYW5kIHJlZGVmaW5lIGFsbCBvZiB0aGVtIHNvIHRoYXQgdGhleSBpbmhlcml0IGZyb21cclxuXHQvLyB0aGUgbmV3IHZlcnNpb24gb2YgdGhpcyB3aWRnZXQuIFdlJ3JlIGVzc2VudGlhbGx5IHRyeWluZyB0byByZXBsYWNlIG9uZVxyXG5cdC8vIGxldmVsIGluIHRoZSBwcm90b3R5cGUgY2hhaW4uXHJcblx0aWYgKCBleGlzdGluZ0NvbnN0cnVjdG9yICkge1xyXG5cdFx0JC5lYWNoKCBleGlzdGluZ0NvbnN0cnVjdG9yLl9jaGlsZENvbnN0cnVjdG9ycywgZnVuY3Rpb24oIGksIGNoaWxkICkge1xyXG5cdFx0XHR2YXIgY2hpbGRQcm90b3R5cGUgPSBjaGlsZC5wcm90b3R5cGU7XHJcblxyXG5cdFx0XHQvLyByZWRlZmluZSB0aGUgY2hpbGQgd2lkZ2V0IHVzaW5nIHRoZSBzYW1lIHByb3RvdHlwZSB0aGF0IHdhc1xyXG5cdFx0XHQvLyBvcmlnaW5hbGx5IHVzZWQsIGJ1dCBpbmhlcml0IGZyb20gdGhlIG5ldyB2ZXJzaW9uIG9mIHRoZSBiYXNlXHJcblx0XHRcdCQud2lkZ2V0KCBjaGlsZFByb3RvdHlwZS5uYW1lc3BhY2UgKyBcIi5cIiArIGNoaWxkUHJvdG90eXBlLndpZGdldE5hbWUsIGNvbnN0cnVjdG9yLCBjaGlsZC5fcHJvdG8gKTtcclxuXHRcdH0pO1xyXG5cdFx0Ly8gcmVtb3ZlIHRoZSBsaXN0IG9mIGV4aXN0aW5nIGNoaWxkIGNvbnN0cnVjdG9ycyBmcm9tIHRoZSBvbGQgY29uc3RydWN0b3JcclxuXHRcdC8vIHNvIHRoZSBvbGQgY2hpbGQgY29uc3RydWN0b3JzIGNhbiBiZSBnYXJiYWdlIGNvbGxlY3RlZFxyXG5cdFx0ZGVsZXRlIGV4aXN0aW5nQ29uc3RydWN0b3IuX2NoaWxkQ29uc3RydWN0b3JzO1xyXG5cdH0gZWxzZSB7XHJcblx0XHRiYXNlLl9jaGlsZENvbnN0cnVjdG9ycy5wdXNoKCBjb25zdHJ1Y3RvciApO1xyXG5cdH1cclxuXHJcblx0JC53aWRnZXQuYnJpZGdlKCBuYW1lLCBjb25zdHJ1Y3RvciApO1xyXG5cclxuXHRyZXR1cm4gY29uc3RydWN0b3I7XHJcbn07XHJcblxyXG4kLndpZGdldC5leHRlbmQgPSBmdW5jdGlvbiggdGFyZ2V0ICkge1xyXG5cdHZhciBpbnB1dCA9IHNsaWNlLmNhbGwoIGFyZ3VtZW50cywgMSApLFxyXG5cdFx0aW5wdXRJbmRleCA9IDAsXHJcblx0XHRpbnB1dExlbmd0aCA9IGlucHV0Lmxlbmd0aCxcclxuXHRcdGtleSxcclxuXHRcdHZhbHVlO1xyXG5cdGZvciAoIDsgaW5wdXRJbmRleCA8IGlucHV0TGVuZ3RoOyBpbnB1dEluZGV4KysgKSB7XHJcblx0XHRmb3IgKCBrZXkgaW4gaW5wdXRbIGlucHV0SW5kZXggXSApIHtcclxuXHRcdFx0dmFsdWUgPSBpbnB1dFsgaW5wdXRJbmRleCBdWyBrZXkgXTtcclxuXHRcdFx0aWYgKCBpbnB1dFsgaW5wdXRJbmRleCBdLmhhc093blByb3BlcnR5KCBrZXkgKSAmJiB2YWx1ZSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRcdC8vIENsb25lIG9iamVjdHNcclxuXHRcdFx0XHRpZiAoICQuaXNQbGFpbk9iamVjdCggdmFsdWUgKSApIHtcclxuXHRcdFx0XHRcdHRhcmdldFsga2V5IF0gPSAkLmlzUGxhaW5PYmplY3QoIHRhcmdldFsga2V5IF0gKSA/XHJcblx0XHRcdFx0XHRcdCQud2lkZ2V0LmV4dGVuZCgge30sIHRhcmdldFsga2V5IF0sIHZhbHVlICkgOlxyXG5cdFx0XHRcdFx0XHQvLyBEb24ndCBleHRlbmQgc3RyaW5ncywgYXJyYXlzLCBldGMuIHdpdGggb2JqZWN0c1xyXG5cdFx0XHRcdFx0XHQkLndpZGdldC5leHRlbmQoIHt9LCB2YWx1ZSApO1xyXG5cdFx0XHRcdC8vIENvcHkgZXZlcnl0aGluZyBlbHNlIGJ5IHJlZmVyZW5jZVxyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHR0YXJnZXRbIGtleSBdID0gdmFsdWU7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cdHJldHVybiB0YXJnZXQ7XHJcbn07XHJcblxyXG4kLndpZGdldC5icmlkZ2UgPSBmdW5jdGlvbiggbmFtZSwgb2JqZWN0ICkge1xyXG5cdHZhciBmdWxsTmFtZSA9IG9iamVjdC5wcm90b3R5cGUud2lkZ2V0RnVsbE5hbWUgfHwgbmFtZTtcclxuXHQkLmZuWyBuYW1lIF0gPSBmdW5jdGlvbiggb3B0aW9ucyApIHtcclxuXHRcdHZhciBpc01ldGhvZENhbGwgPSB0eXBlb2Ygb3B0aW9ucyA9PT0gXCJzdHJpbmdcIixcclxuXHRcdFx0YXJncyA9IHNsaWNlLmNhbGwoIGFyZ3VtZW50cywgMSApLFxyXG5cdFx0XHRyZXR1cm5WYWx1ZSA9IHRoaXM7XHJcblxyXG5cdFx0Ly8gYWxsb3cgbXVsdGlwbGUgaGFzaGVzIHRvIGJlIHBhc3NlZCBvbiBpbml0XHJcblx0XHRvcHRpb25zID0gIWlzTWV0aG9kQ2FsbCAmJiBhcmdzLmxlbmd0aCA/XHJcblx0XHRcdCQud2lkZ2V0LmV4dGVuZC5hcHBseSggbnVsbCwgWyBvcHRpb25zIF0uY29uY2F0KGFyZ3MpICkgOlxyXG5cdFx0XHRvcHRpb25zO1xyXG5cclxuXHRcdGlmICggaXNNZXRob2RDYWxsICkge1xyXG5cdFx0XHR0aGlzLmVhY2goZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0dmFyIG1ldGhvZFZhbHVlLFxyXG5cdFx0XHRcdFx0aW5zdGFuY2UgPSAkLmRhdGEoIHRoaXMsIGZ1bGxOYW1lICk7XHJcblx0XHRcdFx0aWYgKCBvcHRpb25zID09PSBcImluc3RhbmNlXCIgKSB7XHJcblx0XHRcdFx0XHRyZXR1cm5WYWx1ZSA9IGluc3RhbmNlO1xyXG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZiAoICFpbnN0YW5jZSApIHtcclxuXHRcdFx0XHRcdHJldHVybiAkLmVycm9yKCBcImNhbm5vdCBjYWxsIG1ldGhvZHMgb24gXCIgKyBuYW1lICsgXCIgcHJpb3IgdG8gaW5pdGlhbGl6YXRpb247IFwiICtcclxuXHRcdFx0XHRcdFx0XCJhdHRlbXB0ZWQgdG8gY2FsbCBtZXRob2QgJ1wiICsgb3B0aW9ucyArIFwiJ1wiICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmICggISQuaXNGdW5jdGlvbiggaW5zdGFuY2Vbb3B0aW9uc10gKSB8fCBvcHRpb25zLmNoYXJBdCggMCApID09PSBcIl9cIiApIHtcclxuXHRcdFx0XHRcdHJldHVybiAkLmVycm9yKCBcIm5vIHN1Y2ggbWV0aG9kICdcIiArIG9wdGlvbnMgKyBcIicgZm9yIFwiICsgbmFtZSArIFwiIHdpZGdldCBpbnN0YW5jZVwiICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdG1ldGhvZFZhbHVlID0gaW5zdGFuY2VbIG9wdGlvbnMgXS5hcHBseSggaW5zdGFuY2UsIGFyZ3MgKTtcclxuXHRcdFx0XHRpZiAoIG1ldGhvZFZhbHVlICE9PSBpbnN0YW5jZSAmJiBtZXRob2RWYWx1ZSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRcdFx0cmV0dXJuVmFsdWUgPSBtZXRob2RWYWx1ZSAmJiBtZXRob2RWYWx1ZS5qcXVlcnkgP1xyXG5cdFx0XHRcdFx0XHRyZXR1cm5WYWx1ZS5wdXNoU3RhY2soIG1ldGhvZFZhbHVlLmdldCgpICkgOlxyXG5cdFx0XHRcdFx0XHRtZXRob2RWYWx1ZTtcclxuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHZhciBpbnN0YW5jZSA9ICQuZGF0YSggdGhpcywgZnVsbE5hbWUgKTtcclxuXHRcdFx0XHRpZiAoIGluc3RhbmNlICkge1xyXG5cdFx0XHRcdFx0aW5zdGFuY2Uub3B0aW9uKCBvcHRpb25zIHx8IHt9ICkuX2luaXQoKTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0JC5kYXRhKCB0aGlzLCBmdWxsTmFtZSwgbmV3IG9iamVjdCggb3B0aW9ucywgdGhpcyApICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gcmV0dXJuVmFsdWU7XHJcblx0fTtcclxufTtcclxuXHJcbiQuV2lkZ2V0ID0gZnVuY3Rpb24oIC8qIG9wdGlvbnMsIGVsZW1lbnQgKi8gKSB7fTtcclxuJC5XaWRnZXQuX2NoaWxkQ29uc3RydWN0b3JzID0gW107XHJcblxyXG4kLldpZGdldC5wcm90b3R5cGUgPSB7XHJcblx0d2lkZ2V0TmFtZTogXCJ3aWRnZXRcIixcclxuXHR3aWRnZXRFdmVudFByZWZpeDogXCJcIixcclxuXHRkZWZhdWx0RWxlbWVudDogXCI8ZGl2PlwiLFxyXG5cdG9wdGlvbnM6IHtcclxuXHRcdGRpc2FibGVkOiBmYWxzZSxcclxuXHJcblx0XHQvLyBjYWxsYmFja3NcclxuXHRcdGNyZWF0ZTogbnVsbFxyXG5cdH0sXHJcblx0X2NyZWF0ZVdpZGdldDogZnVuY3Rpb24oIG9wdGlvbnMsIGVsZW1lbnQgKSB7XHJcblx0XHRlbGVtZW50ID0gJCggZWxlbWVudCB8fCB0aGlzLmRlZmF1bHRFbGVtZW50IHx8IHRoaXMgKVsgMCBdO1xyXG5cdFx0dGhpcy5lbGVtZW50ID0gJCggZWxlbWVudCApO1xyXG5cdFx0dGhpcy51dWlkID0gdXVpZCsrO1xyXG5cdFx0dGhpcy5ldmVudE5hbWVzcGFjZSA9IFwiLlwiICsgdGhpcy53aWRnZXROYW1lICsgdGhpcy51dWlkO1xyXG5cdFx0dGhpcy5vcHRpb25zID0gJC53aWRnZXQuZXh0ZW5kKCB7fSxcclxuXHRcdFx0dGhpcy5vcHRpb25zLFxyXG5cdFx0XHR0aGlzLl9nZXRDcmVhdGVPcHRpb25zKCksXHJcblx0XHRcdG9wdGlvbnMgKTtcclxuXHJcblx0XHR0aGlzLmJpbmRpbmdzID0gJCgpO1xyXG5cdFx0dGhpcy5ob3ZlcmFibGUgPSAkKCk7XHJcblx0XHR0aGlzLmZvY3VzYWJsZSA9ICQoKTtcclxuXHJcblx0XHRpZiAoIGVsZW1lbnQgIT09IHRoaXMgKSB7XHJcblx0XHRcdCQuZGF0YSggZWxlbWVudCwgdGhpcy53aWRnZXRGdWxsTmFtZSwgdGhpcyApO1xyXG5cdFx0XHR0aGlzLl9vbiggdHJ1ZSwgdGhpcy5lbGVtZW50LCB7XHJcblx0XHRcdFx0cmVtb3ZlOiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHRcdFx0XHRpZiAoIGV2ZW50LnRhcmdldCA9PT0gZWxlbWVudCApIHtcclxuXHRcdFx0XHRcdFx0dGhpcy5kZXN0cm95KCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdFx0dGhpcy5kb2N1bWVudCA9ICQoIGVsZW1lbnQuc3R5bGUgP1xyXG5cdFx0XHRcdC8vIGVsZW1lbnQgd2l0aGluIHRoZSBkb2N1bWVudFxyXG5cdFx0XHRcdGVsZW1lbnQub3duZXJEb2N1bWVudCA6XHJcblx0XHRcdFx0Ly8gZWxlbWVudCBpcyB3aW5kb3cgb3IgZG9jdW1lbnRcclxuXHRcdFx0XHRlbGVtZW50LmRvY3VtZW50IHx8IGVsZW1lbnQgKTtcclxuXHRcdFx0dGhpcy53aW5kb3cgPSAkKCB0aGlzLmRvY3VtZW50WzBdLmRlZmF1bHRWaWV3IHx8IHRoaXMuZG9jdW1lbnRbMF0ucGFyZW50V2luZG93ICk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5fY3JlYXRlKCk7XHJcblx0XHR0aGlzLl90cmlnZ2VyKCBcImNyZWF0ZVwiLCBudWxsLCB0aGlzLl9nZXRDcmVhdGVFdmVudERhdGEoKSApO1xyXG5cdFx0dGhpcy5faW5pdCgpO1xyXG5cdH0sXHJcblx0X2dldENyZWF0ZU9wdGlvbnM6ICQubm9vcCxcclxuXHRfZ2V0Q3JlYXRlRXZlbnREYXRhOiAkLm5vb3AsXHJcblx0X2NyZWF0ZTogJC5ub29wLFxyXG5cdF9pbml0OiAkLm5vb3AsXHJcblxyXG5cdGRlc3Ryb3k6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5fZGVzdHJveSgpO1xyXG5cdFx0Ly8gd2UgY2FuIHByb2JhYmx5IHJlbW92ZSB0aGUgdW5iaW5kIGNhbGxzIGluIDIuMFxyXG5cdFx0Ly8gYWxsIGV2ZW50IGJpbmRpbmdzIHNob3VsZCBnbyB0aHJvdWdoIHRoaXMuX29uKClcclxuXHRcdHRoaXMuZWxlbWVudFxyXG5cdFx0XHQudW5iaW5kKCB0aGlzLmV2ZW50TmFtZXNwYWNlIClcclxuXHRcdFx0LnJlbW92ZURhdGEoIHRoaXMud2lkZ2V0RnVsbE5hbWUgKVxyXG5cdFx0XHQvLyBzdXBwb3J0OiBqcXVlcnkgPDEuNi4zXHJcblx0XHRcdC8vIGh0dHA6Ly9idWdzLmpxdWVyeS5jb20vdGlja2V0Lzk0MTNcclxuXHRcdFx0LnJlbW92ZURhdGEoICQuY2FtZWxDYXNlKCB0aGlzLndpZGdldEZ1bGxOYW1lICkgKTtcclxuXHRcdHRoaXMud2lkZ2V0KClcclxuXHRcdFx0LnVuYmluZCggdGhpcy5ldmVudE5hbWVzcGFjZSApXHJcblx0XHRcdC5yZW1vdmVBdHRyKCBcImFyaWEtZGlzYWJsZWRcIiApXHJcblx0XHRcdC5yZW1vdmVDbGFzcyhcclxuXHRcdFx0XHR0aGlzLndpZGdldEZ1bGxOYW1lICsgXCItZGlzYWJsZWQgXCIgK1xyXG5cdFx0XHRcdFwidWktc3RhdGUtZGlzYWJsZWRcIiApO1xyXG5cclxuXHRcdC8vIGNsZWFuIHVwIGV2ZW50cyBhbmQgc3RhdGVzXHJcblx0XHR0aGlzLmJpbmRpbmdzLnVuYmluZCggdGhpcy5ldmVudE5hbWVzcGFjZSApO1xyXG5cdFx0dGhpcy5ob3ZlcmFibGUucmVtb3ZlQ2xhc3MoIFwidWktc3RhdGUtaG92ZXJcIiApO1xyXG5cdFx0dGhpcy5mb2N1c2FibGUucmVtb3ZlQ2xhc3MoIFwidWktc3RhdGUtZm9jdXNcIiApO1xyXG5cdH0sXHJcblx0X2Rlc3Ryb3k6ICQubm9vcCxcclxuXHJcblx0d2lkZ2V0OiBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiB0aGlzLmVsZW1lbnQ7XHJcblx0fSxcclxuXHJcblx0b3B0aW9uOiBmdW5jdGlvbigga2V5LCB2YWx1ZSApIHtcclxuXHRcdHZhciBvcHRpb25zID0ga2V5LFxyXG5cdFx0XHRwYXJ0cyxcclxuXHRcdFx0Y3VyT3B0aW9uLFxyXG5cdFx0XHRpO1xyXG5cclxuXHRcdGlmICggYXJndW1lbnRzLmxlbmd0aCA9PT0gMCApIHtcclxuXHRcdFx0Ly8gZG9uJ3QgcmV0dXJuIGEgcmVmZXJlbmNlIHRvIHRoZSBpbnRlcm5hbCBoYXNoXHJcblx0XHRcdHJldHVybiAkLndpZGdldC5leHRlbmQoIHt9LCB0aGlzLm9wdGlvbnMgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIHR5cGVvZiBrZXkgPT09IFwic3RyaW5nXCIgKSB7XHJcblx0XHRcdC8vIGhhbmRsZSBuZXN0ZWQga2V5cywgZS5nLiwgXCJmb28uYmFyXCIgPT4geyBmb286IHsgYmFyOiBfX18gfSB9XHJcblx0XHRcdG9wdGlvbnMgPSB7fTtcclxuXHRcdFx0cGFydHMgPSBrZXkuc3BsaXQoIFwiLlwiICk7XHJcblx0XHRcdGtleSA9IHBhcnRzLnNoaWZ0KCk7XHJcblx0XHRcdGlmICggcGFydHMubGVuZ3RoICkge1xyXG5cdFx0XHRcdGN1ck9wdGlvbiA9IG9wdGlvbnNbIGtleSBdID0gJC53aWRnZXQuZXh0ZW5kKCB7fSwgdGhpcy5vcHRpb25zWyBrZXkgXSApO1xyXG5cdFx0XHRcdGZvciAoIGkgPSAwOyBpIDwgcGFydHMubGVuZ3RoIC0gMTsgaSsrICkge1xyXG5cdFx0XHRcdFx0Y3VyT3B0aW9uWyBwYXJ0c1sgaSBdIF0gPSBjdXJPcHRpb25bIHBhcnRzWyBpIF0gXSB8fCB7fTtcclxuXHRcdFx0XHRcdGN1ck9wdGlvbiA9IGN1ck9wdGlvblsgcGFydHNbIGkgXSBdO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRrZXkgPSBwYXJ0cy5wb3AoKTtcclxuXHRcdFx0XHRpZiAoIHZhbHVlID09PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gY3VyT3B0aW9uWyBrZXkgXSA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IGN1ck9wdGlvblsga2V5IF07XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGN1ck9wdGlvblsga2V5IF0gPSB2YWx1ZTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRpZiAoIHZhbHVlID09PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gdGhpcy5vcHRpb25zWyBrZXkgXSA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IHRoaXMub3B0aW9uc1sga2V5IF07XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdG9wdGlvbnNbIGtleSBdID0gdmFsdWU7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl9zZXRPcHRpb25zKCBvcHRpb25zICk7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fSxcclxuXHRfc2V0T3B0aW9uczogZnVuY3Rpb24oIG9wdGlvbnMgKSB7XHJcblx0XHR2YXIga2V5O1xyXG5cclxuXHRcdGZvciAoIGtleSBpbiBvcHRpb25zICkge1xyXG5cdFx0XHR0aGlzLl9zZXRPcHRpb24oIGtleSwgb3B0aW9uc1sga2V5IF0gKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9LFxyXG5cdF9zZXRPcHRpb246IGZ1bmN0aW9uKCBrZXksIHZhbHVlICkge1xyXG5cdFx0dGhpcy5vcHRpb25zWyBrZXkgXSA9IHZhbHVlO1xyXG5cclxuXHRcdGlmICgga2V5ID09PSBcImRpc2FibGVkXCIgKSB7XHJcblx0XHRcdHRoaXMud2lkZ2V0KClcclxuXHRcdFx0XHQudG9nZ2xlQ2xhc3MoIHRoaXMud2lkZ2V0RnVsbE5hbWUgKyBcIi1kaXNhYmxlZFwiLCAhIXZhbHVlICk7XHJcblx0XHRcdHRoaXMuaG92ZXJhYmxlLnJlbW92ZUNsYXNzKCBcInVpLXN0YXRlLWhvdmVyXCIgKTtcclxuXHRcdFx0dGhpcy5mb2N1c2FibGUucmVtb3ZlQ2xhc3MoIFwidWktc3RhdGUtZm9jdXNcIiApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH0sXHJcblxyXG5cdGVuYWJsZTogZnVuY3Rpb24oKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5fc2V0T3B0aW9ucyh7IGRpc2FibGVkOiBmYWxzZSB9KTtcclxuXHR9LFxyXG5cdGRpc2FibGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuIHRoaXMuX3NldE9wdGlvbnMoeyBkaXNhYmxlZDogdHJ1ZSB9KTtcclxuXHR9LFxyXG5cclxuXHRfb246IGZ1bmN0aW9uKCBzdXBwcmVzc0Rpc2FibGVkQ2hlY2ssIGVsZW1lbnQsIGhhbmRsZXJzICkge1xyXG5cdFx0dmFyIGRlbGVnYXRlRWxlbWVudCxcclxuXHRcdFx0aW5zdGFuY2UgPSB0aGlzO1xyXG5cclxuXHRcdC8vIG5vIHN1cHByZXNzRGlzYWJsZWRDaGVjayBmbGFnLCBzaHVmZmxlIGFyZ3VtZW50c1xyXG5cdFx0aWYgKCB0eXBlb2Ygc3VwcHJlc3NEaXNhYmxlZENoZWNrICE9PSBcImJvb2xlYW5cIiApIHtcclxuXHRcdFx0aGFuZGxlcnMgPSBlbGVtZW50O1xyXG5cdFx0XHRlbGVtZW50ID0gc3VwcHJlc3NEaXNhYmxlZENoZWNrO1xyXG5cdFx0XHRzdXBwcmVzc0Rpc2FibGVkQ2hlY2sgPSBmYWxzZTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBubyBlbGVtZW50IGFyZ3VtZW50LCBzaHVmZmxlIGFuZCB1c2UgdGhpcy5lbGVtZW50XHJcblx0XHRpZiAoICFoYW5kbGVycyApIHtcclxuXHRcdFx0aGFuZGxlcnMgPSBlbGVtZW50O1xyXG5cdFx0XHRlbGVtZW50ID0gdGhpcy5lbGVtZW50O1xyXG5cdFx0XHRkZWxlZ2F0ZUVsZW1lbnQgPSB0aGlzLndpZGdldCgpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0Ly8gYWNjZXB0IHNlbGVjdG9ycywgRE9NIGVsZW1lbnRzXHJcblx0XHRcdGVsZW1lbnQgPSBkZWxlZ2F0ZUVsZW1lbnQgPSAkKCBlbGVtZW50ICk7XHJcblx0XHRcdHRoaXMuYmluZGluZ3MgPSB0aGlzLmJpbmRpbmdzLmFkZCggZWxlbWVudCApO1xyXG5cdFx0fVxyXG5cclxuXHRcdCQuZWFjaCggaGFuZGxlcnMsIGZ1bmN0aW9uKCBldmVudCwgaGFuZGxlciApIHtcclxuXHRcdFx0ZnVuY3Rpb24gaGFuZGxlclByb3h5KCkge1xyXG5cdFx0XHRcdC8vIGFsbG93IHdpZGdldHMgdG8gY3VzdG9taXplIHRoZSBkaXNhYmxlZCBoYW5kbGluZ1xyXG5cdFx0XHRcdC8vIC0gZGlzYWJsZWQgYXMgYW4gYXJyYXkgaW5zdGVhZCBvZiBib29sZWFuXHJcblx0XHRcdFx0Ly8gLSBkaXNhYmxlZCBjbGFzcyBhcyBtZXRob2QgZm9yIGRpc2FibGluZyBpbmRpdmlkdWFsIHBhcnRzXHJcblx0XHRcdFx0aWYgKCAhc3VwcHJlc3NEaXNhYmxlZENoZWNrICYmXHJcblx0XHRcdFx0XHRcdCggaW5zdGFuY2Uub3B0aW9ucy5kaXNhYmxlZCA9PT0gdHJ1ZSB8fFxyXG5cdFx0XHRcdFx0XHRcdCQoIHRoaXMgKS5oYXNDbGFzcyggXCJ1aS1zdGF0ZS1kaXNhYmxlZFwiICkgKSApIHtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0cmV0dXJuICggdHlwZW9mIGhhbmRsZXIgPT09IFwic3RyaW5nXCIgPyBpbnN0YW5jZVsgaGFuZGxlciBdIDogaGFuZGxlciApXHJcblx0XHRcdFx0XHQuYXBwbHkoIGluc3RhbmNlLCBhcmd1bWVudHMgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gY29weSB0aGUgZ3VpZCBzbyBkaXJlY3QgdW5iaW5kaW5nIHdvcmtzXHJcblx0XHRcdGlmICggdHlwZW9mIGhhbmRsZXIgIT09IFwic3RyaW5nXCIgKSB7XHJcblx0XHRcdFx0aGFuZGxlclByb3h5Lmd1aWQgPSBoYW5kbGVyLmd1aWQgPVxyXG5cdFx0XHRcdFx0aGFuZGxlci5ndWlkIHx8IGhhbmRsZXJQcm94eS5ndWlkIHx8ICQuZ3VpZCsrO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR2YXIgbWF0Y2ggPSBldmVudC5tYXRjaCggL14oXFx3KylcXHMqKC4qKSQvICksXHJcblx0XHRcdFx0ZXZlbnROYW1lID0gbWF0Y2hbMV0gKyBpbnN0YW5jZS5ldmVudE5hbWVzcGFjZSxcclxuXHRcdFx0XHRzZWxlY3RvciA9IG1hdGNoWzJdO1xyXG5cdFx0XHRpZiAoIHNlbGVjdG9yICkge1xyXG5cdFx0XHRcdGRlbGVnYXRlRWxlbWVudC5kZWxlZ2F0ZSggc2VsZWN0b3IsIGV2ZW50TmFtZSwgaGFuZGxlclByb3h5ICk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0ZWxlbWVudC5iaW5kKCBldmVudE5hbWUsIGhhbmRsZXJQcm94eSApO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9LFxyXG5cclxuXHRfb2ZmOiBmdW5jdGlvbiggZWxlbWVudCwgZXZlbnROYW1lICkge1xyXG5cdFx0ZXZlbnROYW1lID0gKGV2ZW50TmFtZSB8fCBcIlwiKS5zcGxpdCggXCIgXCIgKS5qb2luKCB0aGlzLmV2ZW50TmFtZXNwYWNlICsgXCIgXCIgKSArIHRoaXMuZXZlbnROYW1lc3BhY2U7XHJcblx0XHRlbGVtZW50LnVuYmluZCggZXZlbnROYW1lICkudW5kZWxlZ2F0ZSggZXZlbnROYW1lICk7XHJcblx0fSxcclxuXHJcblx0X2RlbGF5OiBmdW5jdGlvbiggaGFuZGxlciwgZGVsYXkgKSB7XHJcblx0XHRmdW5jdGlvbiBoYW5kbGVyUHJveHkoKSB7XHJcblx0XHRcdHJldHVybiAoIHR5cGVvZiBoYW5kbGVyID09PSBcInN0cmluZ1wiID8gaW5zdGFuY2VbIGhhbmRsZXIgXSA6IGhhbmRsZXIgKVxyXG5cdFx0XHRcdC5hcHBseSggaW5zdGFuY2UsIGFyZ3VtZW50cyApO1xyXG5cdFx0fVxyXG5cdFx0dmFyIGluc3RhbmNlID0gdGhpcztcclxuXHRcdHJldHVybiBzZXRUaW1lb3V0KCBoYW5kbGVyUHJveHksIGRlbGF5IHx8IDAgKTtcclxuXHR9LFxyXG5cclxuXHRfaG92ZXJhYmxlOiBmdW5jdGlvbiggZWxlbWVudCApIHtcclxuXHRcdHRoaXMuaG92ZXJhYmxlID0gdGhpcy5ob3ZlcmFibGUuYWRkKCBlbGVtZW50ICk7XHJcblx0XHR0aGlzLl9vbiggZWxlbWVudCwge1xyXG5cdFx0XHRtb3VzZWVudGVyOiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHRcdFx0JCggZXZlbnQuY3VycmVudFRhcmdldCApLmFkZENsYXNzKCBcInVpLXN0YXRlLWhvdmVyXCIgKTtcclxuXHRcdFx0fSxcclxuXHRcdFx0bW91c2VsZWF2ZTogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0XHRcdCQoIGV2ZW50LmN1cnJlbnRUYXJnZXQgKS5yZW1vdmVDbGFzcyggXCJ1aS1zdGF0ZS1ob3ZlclwiICk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH0sXHJcblxyXG5cdF9mb2N1c2FibGU6IGZ1bmN0aW9uKCBlbGVtZW50ICkge1xyXG5cdFx0dGhpcy5mb2N1c2FibGUgPSB0aGlzLmZvY3VzYWJsZS5hZGQoIGVsZW1lbnQgKTtcclxuXHRcdHRoaXMuX29uKCBlbGVtZW50LCB7XHJcblx0XHRcdGZvY3VzaW46IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdFx0XHQkKCBldmVudC5jdXJyZW50VGFyZ2V0ICkuYWRkQ2xhc3MoIFwidWktc3RhdGUtZm9jdXNcIiApO1xyXG5cdFx0XHR9LFxyXG5cdFx0XHRmb2N1c291dDogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0XHRcdCQoIGV2ZW50LmN1cnJlbnRUYXJnZXQgKS5yZW1vdmVDbGFzcyggXCJ1aS1zdGF0ZS1mb2N1c1wiICk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH0sXHJcblxyXG5cdF90cmlnZ2VyOiBmdW5jdGlvbiggdHlwZSwgZXZlbnQsIGRhdGEgKSB7XHJcblx0XHR2YXIgcHJvcCwgb3JpZyxcclxuXHRcdFx0Y2FsbGJhY2sgPSB0aGlzLm9wdGlvbnNbIHR5cGUgXTtcclxuXHJcblx0XHRkYXRhID0gZGF0YSB8fCB7fTtcclxuXHRcdGV2ZW50ID0gJC5FdmVudCggZXZlbnQgKTtcclxuXHRcdGV2ZW50LnR5cGUgPSAoIHR5cGUgPT09IHRoaXMud2lkZ2V0RXZlbnRQcmVmaXggP1xyXG5cdFx0XHR0eXBlIDpcclxuXHRcdFx0dGhpcy53aWRnZXRFdmVudFByZWZpeCArIHR5cGUgKS50b0xvd2VyQ2FzZSgpO1xyXG5cdFx0Ly8gdGhlIG9yaWdpbmFsIGV2ZW50IG1heSBjb21lIGZyb20gYW55IGVsZW1lbnRcclxuXHRcdC8vIHNvIHdlIG5lZWQgdG8gcmVzZXQgdGhlIHRhcmdldCBvbiB0aGUgbmV3IGV2ZW50XHJcblx0XHRldmVudC50YXJnZXQgPSB0aGlzLmVsZW1lbnRbIDAgXTtcclxuXHJcblx0XHQvLyBjb3B5IG9yaWdpbmFsIGV2ZW50IHByb3BlcnRpZXMgb3ZlciB0byB0aGUgbmV3IGV2ZW50XHJcblx0XHRvcmlnID0gZXZlbnQub3JpZ2luYWxFdmVudDtcclxuXHRcdGlmICggb3JpZyApIHtcclxuXHRcdFx0Zm9yICggcHJvcCBpbiBvcmlnICkge1xyXG5cdFx0XHRcdGlmICggISggcHJvcCBpbiBldmVudCApICkge1xyXG5cdFx0XHRcdFx0ZXZlbnRbIHByb3AgXSA9IG9yaWdbIHByb3AgXTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLmVsZW1lbnQudHJpZ2dlciggZXZlbnQsIGRhdGEgKTtcclxuXHRcdHJldHVybiAhKCAkLmlzRnVuY3Rpb24oIGNhbGxiYWNrICkgJiZcclxuXHRcdFx0Y2FsbGJhY2suYXBwbHkoIHRoaXMuZWxlbWVudFswXSwgWyBldmVudCBdLmNvbmNhdCggZGF0YSApICkgPT09IGZhbHNlIHx8XHJcblx0XHRcdGV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpICk7XHJcblx0fVxyXG59O1xyXG5cclxuJC5lYWNoKCB7IHNob3c6IFwiZmFkZUluXCIsIGhpZGU6IFwiZmFkZU91dFwiIH0sIGZ1bmN0aW9uKCBtZXRob2QsIGRlZmF1bHRFZmZlY3QgKSB7XHJcblx0JC5XaWRnZXQucHJvdG90eXBlWyBcIl9cIiArIG1ldGhvZCBdID0gZnVuY3Rpb24oIGVsZW1lbnQsIG9wdGlvbnMsIGNhbGxiYWNrICkge1xyXG5cdFx0aWYgKCB0eXBlb2Ygb3B0aW9ucyA9PT0gXCJzdHJpbmdcIiApIHtcclxuXHRcdFx0b3B0aW9ucyA9IHsgZWZmZWN0OiBvcHRpb25zIH07XHJcblx0XHR9XHJcblx0XHR2YXIgaGFzT3B0aW9ucyxcclxuXHRcdFx0ZWZmZWN0TmFtZSA9ICFvcHRpb25zID9cclxuXHRcdFx0XHRtZXRob2QgOlxyXG5cdFx0XHRcdG9wdGlvbnMgPT09IHRydWUgfHwgdHlwZW9mIG9wdGlvbnMgPT09IFwibnVtYmVyXCIgP1xyXG5cdFx0XHRcdFx0ZGVmYXVsdEVmZmVjdCA6XHJcblx0XHRcdFx0XHRvcHRpb25zLmVmZmVjdCB8fCBkZWZhdWx0RWZmZWN0O1xyXG5cdFx0b3B0aW9ucyA9IG9wdGlvbnMgfHwge307XHJcblx0XHRpZiAoIHR5cGVvZiBvcHRpb25zID09PSBcIm51bWJlclwiICkge1xyXG5cdFx0XHRvcHRpb25zID0geyBkdXJhdGlvbjogb3B0aW9ucyB9O1xyXG5cdFx0fVxyXG5cdFx0aGFzT3B0aW9ucyA9ICEkLmlzRW1wdHlPYmplY3QoIG9wdGlvbnMgKTtcclxuXHRcdG9wdGlvbnMuY29tcGxldGUgPSBjYWxsYmFjaztcclxuXHRcdGlmICggb3B0aW9ucy5kZWxheSApIHtcclxuXHRcdFx0ZWxlbWVudC5kZWxheSggb3B0aW9ucy5kZWxheSApO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCBoYXNPcHRpb25zICYmICQuZWZmZWN0cyAmJiAkLmVmZmVjdHMuZWZmZWN0WyBlZmZlY3ROYW1lIF0gKSB7XHJcblx0XHRcdGVsZW1lbnRbIG1ldGhvZCBdKCBvcHRpb25zICk7XHJcblx0XHR9IGVsc2UgaWYgKCBlZmZlY3ROYW1lICE9PSBtZXRob2QgJiYgZWxlbWVudFsgZWZmZWN0TmFtZSBdICkge1xyXG5cdFx0XHRlbGVtZW50WyBlZmZlY3ROYW1lIF0oIG9wdGlvbnMuZHVyYXRpb24sIG9wdGlvbnMuZWFzaW5nLCBjYWxsYmFjayApO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0ZWxlbWVudC5xdWV1ZShmdW5jdGlvbiggbmV4dCApIHtcclxuXHRcdFx0XHQkKCB0aGlzIClbIG1ldGhvZCBdKCk7XHJcblx0XHRcdFx0aWYgKCBjYWxsYmFjayApIHtcclxuXHRcdFx0XHRcdGNhbGxiYWNrLmNhbGwoIGVsZW1lbnRbIDAgXSApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRuZXh0KCk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdH07XHJcbn0pO1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB3aW5kb3csIHVuZGVmaW5lZCApIHtcclxuXHR2YXIgbnNOb3JtYWxpemVEaWN0ID0ge30sXHJcblx0XHRvbGRGaW5kID0gJC5maW5kLFxyXG5cdFx0cmJyYWNlID0gLyg/Olxce1tcXHNcXFNdKlxcfXxcXFtbXFxzXFxTXSpcXF0pJC8sXHJcblx0XHRqcW1EYXRhUkUgPSAvOmpxbURhdGFcXCgoW14pXSopXFwpL2c7XHJcblxyXG5cdCQuZXh0ZW5kKCAkLm1vYmlsZSwge1xyXG5cclxuXHRcdC8vIE5hbWVzcGFjZSB1c2VkIGZyYW1ld29yay13aWRlIGZvciBkYXRhLWF0dHJzLiBEZWZhdWx0IGlzIG5vIG5hbWVzcGFjZVxyXG5cclxuXHRcdG5zOiBcIlwiLFxyXG5cclxuXHRcdC8vIFJldHJpZXZlIGFuIGF0dHJpYnV0ZSBmcm9tIGFuIGVsZW1lbnQgYW5kIHBlcmZvcm0gc29tZSBtYXNzYWdpbmcgb2YgdGhlIHZhbHVlXHJcblxyXG5cdFx0Z2V0QXR0cmlidXRlOiBmdW5jdGlvbiggZWxlbWVudCwga2V5ICkge1xyXG5cdFx0XHR2YXIgZGF0YTtcclxuXHJcblx0XHRcdGVsZW1lbnQgPSBlbGVtZW50LmpxdWVyeSA/IGVsZW1lbnRbMF0gOiBlbGVtZW50O1xyXG5cclxuXHRcdFx0aWYgKCBlbGVtZW50ICYmIGVsZW1lbnQuZ2V0QXR0cmlidXRlICkge1xyXG5cdFx0XHRcdGRhdGEgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSggXCJkYXRhLVwiICsgJC5tb2JpbGUubnMgKyBrZXkgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gQ29waWVkIGZyb20gY29yZSdzIHNyYy9kYXRhLmpzOmRhdGFBdHRyKClcclxuXHRcdFx0Ly8gQ29udmVydCBmcm9tIGEgc3RyaW5nIHRvIGEgcHJvcGVyIGRhdGEgdHlwZVxyXG5cdFx0XHR0cnkge1xyXG5cdFx0XHRcdGRhdGEgPSBkYXRhID09PSBcInRydWVcIiA/IHRydWUgOlxyXG5cdFx0XHRcdFx0ZGF0YSA9PT0gXCJmYWxzZVwiID8gZmFsc2UgOlxyXG5cdFx0XHRcdFx0ZGF0YSA9PT0gXCJudWxsXCIgPyBudWxsIDpcclxuXHRcdFx0XHRcdC8vIE9ubHkgY29udmVydCB0byBhIG51bWJlciBpZiBpdCBkb2Vzbid0IGNoYW5nZSB0aGUgc3RyaW5nXHJcblx0XHRcdFx0XHQrZGF0YSArIFwiXCIgPT09IGRhdGEgPyArZGF0YSA6XHJcblx0XHRcdFx0XHRyYnJhY2UudGVzdCggZGF0YSApID8gSlNPTi5wYXJzZSggZGF0YSApIDpcclxuXHRcdFx0XHRcdGRhdGE7XHJcblx0XHRcdH0gY2F0Y2goIGVyciApIHt9XHJcblxyXG5cdFx0XHRyZXR1cm4gZGF0YTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gRXhwb3NlIG91ciBjYWNoZSBmb3IgdGVzdGluZyBwdXJwb3Nlcy5cclxuXHRcdG5zTm9ybWFsaXplRGljdDogbnNOb3JtYWxpemVEaWN0LFxyXG5cclxuXHRcdC8vIFRha2UgYSBkYXRhIGF0dHJpYnV0ZSBwcm9wZXJ0eSwgcHJlcGVuZCB0aGUgbmFtZXNwYWNlXHJcblx0XHQvLyBhbmQgdGhlbiBjYW1lbCBjYXNlIHRoZSBhdHRyaWJ1dGUgc3RyaW5nLiBBZGQgdGhlIHJlc3VsdFxyXG5cdFx0Ly8gdG8gb3VyIG5zTm9ybWFsaXplRGljdCBzbyB3ZSBkb24ndCBoYXZlIHRvIGRvIHRoaXMgYWdhaW4uXHJcblx0XHRuc05vcm1hbGl6ZTogZnVuY3Rpb24oIHByb3AgKSB7XHJcblx0XHRcdHJldHVybiBuc05vcm1hbGl6ZURpY3RbIHByb3AgXSB8fFxyXG5cdFx0XHRcdCggbnNOb3JtYWxpemVEaWN0WyBwcm9wIF0gPSAkLmNhbWVsQ2FzZSggJC5tb2JpbGUubnMgKyBwcm9wICkgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gRmluZCB0aGUgY2xvc2VzdCBqYXZhc2NyaXB0IHBhZ2UgZWxlbWVudCB0byBnYXRoZXIgc2V0dGluZ3MgZGF0YSBqc3BlcmYgdGVzdFxyXG5cdFx0Ly8gaHR0cDovL2pzcGVyZi5jb20vc2luZ2xlLWNvbXBsZXgtc2VsZWN0b3ItdnMtbWFueS1jb21wbGV4LXNlbGVjdG9ycy9lZGl0XHJcblx0XHQvLyBwb3NzaWJseSBuYWl2ZSwgYnV0IGl0IHNob3dzIHRoYXQgdGhlIHBhcnNpbmcgb3ZlcmhlYWQgZm9yICpqdXN0KiB0aGUgcGFnZSBzZWxlY3RvciB2c1xyXG5cdFx0Ly8gdGhlIHBhZ2UgYW5kIGRpYWxvZyBzZWxlY3RvciBpcyBuZWdsaWdhYmxlLiBUaGlzIGNvdWxkIHByb2JhYmx5IGJlIHNwZWVkIHVwIGJ5XHJcblx0XHQvLyBkb2luZyBhIHNpbWlsYXIgcGFyZW50IG5vZGUgdHJhdmVyc2FsIHRvIHRoZSBvbmUgZm91bmQgaW4gdGhlIGluaGVyaXRlZCB0aGVtZSBjb2RlIGFib3ZlXHJcblx0XHRjbG9zZXN0UGFnZURhdGE6IGZ1bmN0aW9uKCAkdGFyZ2V0ICkge1xyXG5cdFx0XHRyZXR1cm4gJHRhcmdldFxyXG5cdFx0XHRcdC5jbG9zZXN0KCBcIjpqcW1EYXRhKHJvbGU9J3BhZ2UnKSwgOmpxbURhdGEocm9sZT0nZGlhbG9nJylcIiApXHJcblx0XHRcdFx0LmRhdGEoIFwibW9iaWxlLXBhZ2VcIiApO1xyXG5cdFx0fVxyXG5cclxuXHR9KTtcclxuXHJcblx0Ly8gTW9iaWxlIHZlcnNpb24gb2YgZGF0YSBhbmQgcmVtb3ZlRGF0YSBhbmQgaGFzRGF0YSBtZXRob2RzXHJcblx0Ly8gZW5zdXJlcyBhbGwgZGF0YSBpcyBzZXQgYW5kIHJldHJpZXZlZCB1c2luZyBqUXVlcnkgTW9iaWxlJ3MgZGF0YSBuYW1lc3BhY2VcclxuXHQkLmZuLmpxbURhdGEgPSBmdW5jdGlvbiggcHJvcCwgdmFsdWUgKSB7XHJcblx0XHR2YXIgcmVzdWx0O1xyXG5cdFx0aWYgKCB0eXBlb2YgcHJvcCAhPT0gXCJ1bmRlZmluZWRcIiApIHtcclxuXHRcdFx0aWYgKCBwcm9wICkge1xyXG5cdFx0XHRcdHByb3AgPSAkLm1vYmlsZS5uc05vcm1hbGl6ZSggcHJvcCApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyB1bmRlZmluZWQgaXMgcGVybWl0dGVkIGFzIGFuIGV4cGxpY2l0IGlucHV0IGZvciB0aGUgc2Vjb25kIHBhcmFtXHJcblx0XHRcdC8vIGluIHRoaXMgY2FzZSBpdCByZXR1cm5zIHRoZSB2YWx1ZSBhbmQgZG9lcyBub3Qgc2V0IGl0IHRvIHVuZGVmaW5lZFxyXG5cdFx0XHRpZiAoIGFyZ3VtZW50cy5sZW5ndGggPCAyIHx8IHZhbHVlID09PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdFx0cmVzdWx0ID0gdGhpcy5kYXRhKCBwcm9wICk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0cmVzdWx0ID0gdGhpcy5kYXRhKCBwcm9wLCB2YWx1ZSApO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gcmVzdWx0O1xyXG5cdH07XHJcblxyXG5cdCQuanFtRGF0YSA9IGZ1bmN0aW9uKCBlbGVtLCBwcm9wLCB2YWx1ZSApIHtcclxuXHRcdHZhciByZXN1bHQ7XHJcblx0XHRpZiAoIHR5cGVvZiBwcm9wICE9PSBcInVuZGVmaW5lZFwiICkge1xyXG5cdFx0XHRyZXN1bHQgPSAkLmRhdGEoIGVsZW0sIHByb3AgPyAkLm1vYmlsZS5uc05vcm1hbGl6ZSggcHJvcCApIDogcHJvcCwgdmFsdWUgKTtcclxuXHRcdH1cclxuXHRcdHJldHVybiByZXN1bHQ7XHJcblx0fTtcclxuXHJcblx0JC5mbi5qcW1SZW1vdmVEYXRhID0gZnVuY3Rpb24oIHByb3AgKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5yZW1vdmVEYXRhKCAkLm1vYmlsZS5uc05vcm1hbGl6ZSggcHJvcCApICk7XHJcblx0fTtcclxuXHJcblx0JC5qcW1SZW1vdmVEYXRhID0gZnVuY3Rpb24oIGVsZW0sIHByb3AgKSB7XHJcblx0XHRyZXR1cm4gJC5yZW1vdmVEYXRhKCBlbGVtLCAkLm1vYmlsZS5uc05vcm1hbGl6ZSggcHJvcCApICk7XHJcblx0fTtcclxuXHJcblx0JC5maW5kID0gZnVuY3Rpb24oIHNlbGVjdG9yLCBjb250ZXh0LCByZXQsIGV4dHJhICkge1xyXG5cdFx0aWYgKCBzZWxlY3Rvci5pbmRleE9mKCBcIjpqcW1EYXRhXCIgKSA+IC0xICkge1xyXG5cdFx0XHRzZWxlY3RvciA9IHNlbGVjdG9yLnJlcGxhY2UoIGpxbURhdGFSRSwgXCJbZGF0YS1cIiArICggJC5tb2JpbGUubnMgfHwgXCJcIiApICsgXCIkMV1cIiApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBvbGRGaW5kLmNhbGwoIHRoaXMsIHNlbGVjdG9yLCBjb250ZXh0LCByZXQsIGV4dHJhICk7XHJcblx0fTtcclxuXHJcblx0JC5leHRlbmQoICQuZmluZCwgb2xkRmluZCApO1xyXG5cclxufSkoIGpRdWVyeSwgdGhpcyApO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG52YXIgcmNhcGl0YWxzID0gL1tBLVpdL2csXHJcblx0cmVwbGFjZUZ1bmN0aW9uID0gZnVuY3Rpb24oIGMgKSB7XHJcblx0XHRyZXR1cm4gXCItXCIgKyBjLnRvTG93ZXJDYXNlKCk7XHJcblx0fTtcclxuXHJcbiQuZXh0ZW5kKCAkLldpZGdldC5wcm90b3R5cGUsIHtcclxuXHRfZ2V0Q3JlYXRlT3B0aW9uczogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgb3B0aW9uLCB2YWx1ZSxcclxuXHRcdFx0ZWxlbSA9IHRoaXMuZWxlbWVudFsgMCBdLFxyXG5cdFx0XHRvcHRpb25zID0ge307XHJcblxyXG5cdFx0Ly9cclxuXHRcdGlmICggISQubW9iaWxlLmdldEF0dHJpYnV0ZSggZWxlbSwgXCJkZWZhdWx0c1wiICkgKSB7XHJcblx0XHRcdGZvciAoIG9wdGlvbiBpbiB0aGlzLm9wdGlvbnMgKSB7XHJcblx0XHRcdFx0dmFsdWUgPSAkLm1vYmlsZS5nZXRBdHRyaWJ1dGUoIGVsZW0sIG9wdGlvbi5yZXBsYWNlKCByY2FwaXRhbHMsIHJlcGxhY2VGdW5jdGlvbiApICk7XHJcblxyXG5cdFx0XHRcdGlmICggdmFsdWUgIT0gbnVsbCApIHtcclxuXHRcdFx0XHRcdG9wdGlvbnNbIG9wdGlvbiBdID0gdmFsdWU7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIG9wdGlvbnM7XHJcblx0fVxyXG59KTtcclxuXHJcbi8vVE9ETzogUmVtb3ZlIGluIDEuNSBmb3IgYmFja2NvbXBhdCBvbmx5XHJcbiQubW9iaWxlLndpZGdldCA9ICQuV2lkZ2V0O1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuXHJcbihmdW5jdGlvbiggJCApIHtcclxuXHQvLyBUT0RPIG1vdmUgbG9hZGVyIGNsYXNzIGRvd24gaW50byB0aGUgd2lkZ2V0IHNldHRpbmdzXHJcblx0dmFyIGxvYWRlckNsYXNzID0gXCJ1aS1sb2FkZXJcIiwgJGh0bWwgPSAkKCBcImh0bWxcIiApO1xyXG5cclxuXHQkLndpZGdldCggXCJtb2JpbGUubG9hZGVyXCIsIHtcclxuXHRcdC8vIE5PVEUgaWYgdGhlIGdsb2JhbCBjb25maWcgc2V0dGluZ3MgYXJlIGRlZmluZWQgdGhleSB3aWxsIG92ZXJyaWRlIHRoZXNlXHJcblx0XHQvLyAgICAgIG9wdGlvbnNcclxuXHRcdG9wdGlvbnM6IHtcclxuXHRcdFx0Ly8gdGhlIHRoZW1lIGZvciB0aGUgbG9hZGluZyBtZXNzYWdlXHJcblx0XHRcdHRoZW1lOiBcImFcIixcclxuXHJcblx0XHRcdC8vIHdoZXRoZXIgdGhlIHRleHQgaW4gdGhlIGxvYWRpbmcgbWVzc2FnZSBpcyBzaG93blxyXG5cdFx0XHR0ZXh0VmlzaWJsZTogZmFsc2UsXHJcblxyXG5cdFx0XHQvLyBjdXN0b20gaHRtbCBmb3IgdGhlIGlubmVyIGNvbnRlbnQgb2YgdGhlIGxvYWRpbmcgbWVzc2FnZVxyXG5cdFx0XHRodG1sOiBcIlwiLFxyXG5cclxuXHRcdFx0Ly8gdGhlIHRleHQgdG8gYmUgZGlzcGxheWVkIHdoZW4gdGhlIHBvcHVwIGlzIHNob3duXHJcblx0XHRcdHRleHQ6IFwibG9hZGluZ1wiXHJcblx0XHR9LFxyXG5cclxuXHRcdGRlZmF1bHRIdG1sOiBcIjxkaXYgY2xhc3M9J1wiICsgbG9hZGVyQ2xhc3MgKyBcIic+XCIgK1xyXG5cdFx0XHRcIjxzcGFuIGNsYXNzPSd1aS1pY29uLWxvYWRpbmcnPjwvc3Bhbj5cIiArXHJcblx0XHRcdFwiPGgxPjwvaDE+XCIgK1xyXG5cdFx0XHRcIjwvZGl2PlwiLFxyXG5cclxuXHRcdC8vIEZvciBub24tZml4ZWQgc3VwcG9ydGluIGJyb3dzZXJzLiBQb3NpdGlvbiBhdCB5IGNlbnRlciAoaWYgc2Nyb2xsVG9wIHN1cHBvcnRlZCksIGFib3ZlIHRoZSBhY3RpdmVCdG4gKGlmIGRlZmluZWQpLCBvciBqdXN0IDEwMHB4IGZyb20gdG9wXHJcblx0XHRmYWtlRml4TG9hZGVyOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIGFjdGl2ZUJ0biA9ICQoIFwiLlwiICsgJC5tb2JpbGUuYWN0aXZlQnRuQ2xhc3MgKS5maXJzdCgpO1xyXG5cclxuXHRcdFx0dGhpcy5lbGVtZW50XHJcblx0XHRcdFx0LmNzcyh7XHJcblx0XHRcdFx0XHR0b3A6ICQuc3VwcG9ydC5zY3JvbGxUb3AgJiYgdGhpcy53aW5kb3cuc2Nyb2xsVG9wKCkgKyB0aGlzLndpbmRvdy5oZWlnaHQoKSAvIDIgfHxcclxuXHRcdFx0XHRcdFx0YWN0aXZlQnRuLmxlbmd0aCAmJiBhY3RpdmVCdG4ub2Zmc2V0KCkudG9wIHx8IDEwMFxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvLyBjaGVjayBwb3NpdGlvbiBvZiBsb2FkZXIgdG8gc2VlIGlmIGl0IGFwcGVhcnMgdG8gYmUgXCJmaXhlZFwiIHRvIGNlbnRlclxyXG5cdFx0Ly8gaWYgbm90LCB1c2UgYWJzIHBvc2l0aW9uaW5nXHJcblx0XHRjaGVja0xvYWRlclBvc2l0aW9uOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIG9mZnNldCA9IHRoaXMuZWxlbWVudC5vZmZzZXQoKSxcclxuXHRcdFx0XHRzY3JvbGxUb3AgPSB0aGlzLndpbmRvdy5zY3JvbGxUb3AoKSxcclxuXHRcdFx0XHRzY3JlZW5IZWlnaHQgPSAkLm1vYmlsZS5nZXRTY3JlZW5IZWlnaHQoKTtcclxuXHJcblx0XHRcdGlmICggb2Zmc2V0LnRvcCA8IHNjcm9sbFRvcCB8fCAoIG9mZnNldC50b3AgLSBzY3JvbGxUb3AgKSA+IHNjcmVlbkhlaWdodCApIHtcclxuXHRcdFx0XHR0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoIFwidWktbG9hZGVyLWZha2VmaXhcIiApO1xyXG5cdFx0XHRcdHRoaXMuZmFrZUZpeExvYWRlcigpO1xyXG5cdFx0XHRcdHRoaXMud2luZG93XHJcblx0XHRcdFx0XHQudW5iaW5kKCBcInNjcm9sbFwiLCB0aGlzLmNoZWNrTG9hZGVyUG9zaXRpb24gKVxyXG5cdFx0XHRcdFx0LmJpbmQoIFwic2Nyb2xsXCIsICQucHJveHkoIHRoaXMuZmFrZUZpeExvYWRlciwgdGhpcyApICk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblxyXG5cdFx0cmVzZXRIdG1sOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50Lmh0bWwoICQoIHRoaXMuZGVmYXVsdEh0bWwgKS5odG1sKCkgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gVHVybiBvbi9vZmYgcGFnZSBsb2FkaW5nIG1lc3NhZ2UuIFRoZW1lIGRvdWJsZXMgYXMgYW4gb2JqZWN0IGFyZ3VtZW50XHJcblx0XHQvLyB3aXRoIHRoZSBmb2xsb3dpbmcgc2hhcGU6IHsgdGhlbWU6ICcnLCB0ZXh0OiAnJywgaHRtbDogJycsIHRleHRWaXNpYmxlOiAnJyB9XHJcblx0XHQvLyBOT1RFIHRoYXQgdGhlICQubW9iaWxlLmxvYWRpbmcqIHNldHRpbmdzIGFuZCBwYXJhbXMgcGFzdCB0aGUgZmlyc3QgYXJlIGRlcHJlY2F0ZWRcclxuXHRcdC8vIFRPRE8gc3dlZXQgamVzdXMgd2UgbmVlZCB0byBicmVhayBzb21lIG9mIHRoaXMgb3V0XHJcblx0XHRzaG93OiBmdW5jdGlvbiggdGhlbWUsIG1zZ1RleHQsIHRleHRvbmx5ICkge1xyXG5cdFx0XHR2YXIgdGV4dFZpc2libGUsIG1lc3NhZ2UsIGxvYWRTZXR0aW5ncztcclxuXHJcblx0XHRcdHRoaXMucmVzZXRIdG1sKCk7XHJcblxyXG5cdFx0XHQvLyB1c2UgdGhlIHByb3RvdHlwZSBvcHRpb25zIHNvIHRoYXQgcGVvcGxlIGNhbiBzZXQgdGhlbSBnbG9iYWxseSBhdFxyXG5cdFx0XHQvLyBtb2JpbGUgaW5pdC4gQ29uc2lzdGVuY3ksIGl0J3Mgd2hhdCdzIGZvciBkaW5uZXJcclxuXHRcdFx0aWYgKCAkLnR5cGUoIHRoZW1lICkgPT09IFwib2JqZWN0XCIgKSB7XHJcblx0XHRcdFx0bG9hZFNldHRpbmdzID0gJC5leHRlbmQoIHt9LCB0aGlzLm9wdGlvbnMsIHRoZW1lICk7XHJcblxyXG5cdFx0XHRcdHRoZW1lID0gbG9hZFNldHRpbmdzLnRoZW1lO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGxvYWRTZXR0aW5ncyA9IHRoaXMub3B0aW9ucztcclxuXHJcblx0XHRcdFx0Ly8gaGVyZSB3ZSBwcmVmZXIgdGhlIHRoZW1lIHZhbHVlIHBhc3NlZCBhcyBhIHN0cmluZyBhcmd1bWVudCwgdGhlblxyXG5cdFx0XHRcdC8vIHdlIHByZWZlciB0aGUgZ2xvYmFsIG9wdGlvbiBiZWNhdXNlIHdlIGNhbid0IHVzZSB1bmRlZmluZWQgZGVmYXVsdFxyXG5cdFx0XHRcdC8vIHByb3RvdHlwZSBvcHRpb25zLCB0aGVuIHRoZSBwcm90b3R5cGUgb3B0aW9uXHJcblx0XHRcdFx0dGhlbWUgPSB0aGVtZSB8fCBsb2FkU2V0dGluZ3MudGhlbWU7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIHNldCB0aGUgbWVzc2FnZSB0ZXh0LCBwcmVmZXIgdGhlIHBhcmFtLCB0aGVuIHRoZSBzZXR0aW5ncyBvYmplY3RcclxuXHRcdFx0Ly8gdGhlbiBsb2FkaW5nIG1lc3NhZ2VcclxuXHRcdFx0bWVzc2FnZSA9IG1zZ1RleHQgfHwgKCBsb2FkU2V0dGluZ3MudGV4dCA9PT0gZmFsc2UgPyBcIlwiIDogbG9hZFNldHRpbmdzLnRleHQgKTtcclxuXHJcblx0XHRcdC8vIHByZXBhcmUgdGhlIGRvbVxyXG5cdFx0XHQkaHRtbC5hZGRDbGFzcyggXCJ1aS1sb2FkaW5nXCIgKTtcclxuXHJcblx0XHRcdHRleHRWaXNpYmxlID0gbG9hZFNldHRpbmdzLnRleHRWaXNpYmxlO1xyXG5cclxuXHRcdFx0Ly8gYWRkIHRoZSBwcm9wZXIgY3NzIGdpdmVuIHRoZSBvcHRpb25zICh0aGVtZSwgdGV4dCwgZXRjKVxyXG5cdFx0XHQvLyBGb3JjZSB0ZXh0IHZpc2liaWxpdHkgaWYgdGhlIHNlY29uZCBhcmd1bWVudCB3YXMgc3VwcGxpZWQsIG9yXHJcblx0XHRcdC8vIGlmIHRoZSB0ZXh0IHdhcyBleHBsaWNpdGx5IHNldCBpbiB0aGUgb2JqZWN0IGFyZ3NcclxuXHRcdFx0dGhpcy5lbGVtZW50LmF0dHIoXCJjbGFzc1wiLCBsb2FkZXJDbGFzcyArXHJcblx0XHRcdFx0XCIgdWktY29ybmVyLWFsbCB1aS1ib2R5LVwiICsgdGhlbWUgK1xyXG5cdFx0XHRcdFwiIHVpLWxvYWRlci1cIiArICggdGV4dFZpc2libGUgfHwgbXNnVGV4dCB8fCB0aGVtZS50ZXh0ID8gXCJ2ZXJib3NlXCIgOiBcImRlZmF1bHRcIiApICtcclxuXHRcdFx0XHQoIGxvYWRTZXR0aW5ncy50ZXh0b25seSB8fCB0ZXh0b25seSA/IFwiIHVpLWxvYWRlci10ZXh0b25seVwiIDogXCJcIiApICk7XHJcblxyXG5cdFx0XHQvLyBUT0RPIHZlcmlmeSB0aGF0IGpxdWVyeS5mbi5odG1sIGlzIG9rIHRvIHVzZSBpbiBib3RoIGNhc2VzIGhlcmVcclxuXHRcdFx0Ly8gICAgICB0aGlzIG1pZ2h0IGJlIG92ZXJseSBkZWZlbnNpdmUgaW4gcHJldmVudGluZyB1bmtub3dpbmcgeHNzXHJcblx0XHRcdC8vIGlmIHRoZSBodG1sIGF0dHJpYnV0ZSBpcyBkZWZpbmVkIG9uIHRoZSBsb2FkaW5nIHNldHRpbmdzLCB1c2UgdGhhdFxyXG5cdFx0XHQvLyBvdGhlcndpc2UgdXNlIHRoZSBmYWxsYmFja3MgZnJvbSBhYm92ZVxyXG5cdFx0XHRpZiAoIGxvYWRTZXR0aW5ncy5odG1sICkge1xyXG5cdFx0XHRcdHRoaXMuZWxlbWVudC5odG1sKCBsb2FkU2V0dGluZ3MuaHRtbCApO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHRoaXMuZWxlbWVudC5maW5kKCBcImgxXCIgKS50ZXh0KCBtZXNzYWdlICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIElmIHRoZSBwYWdlY29udGFpbmVyIHdpZGdldCBoYXMgYmVlbiBkZWZpbmVkIHdlIG1heSB1c2UgdGhlIDptb2JpbGUtcGFnZWNvbnRhaW5lclxyXG5cdFx0XHQvLyBhbmQgYXR0YWNoIHRvIHRoZSBlbGVtZW50IG9uIHdoaWNoIHRoZSBwYWdlY29udGFpbmVyIHdpZGdldCBoYXMgYmVlbiBkZWZpbmVkLiBJZiBub3QsXHJcblx0XHRcdC8vIHdlIGF0dGFjaCB0byB0aGUgYm9keS5cclxuXHRcdFx0dGhpcy5lbGVtZW50LmFwcGVuZFRvKCAkLm1vYmlsZS5wYWdlY29udGFpbmVyID9cclxuXHRcdFx0XHQkKCBcIjptb2JpbGUtcGFnZWNvbnRhaW5lclwiICkgOiAkKCBcImJvZHlcIiApICk7XHJcblxyXG5cdFx0XHQvLyBjaGVjayB0aGF0IHRoZSBsb2FkZXIgaXMgdmlzaWJsZVxyXG5cdFx0XHR0aGlzLmNoZWNrTG9hZGVyUG9zaXRpb24oKTtcclxuXHJcblx0XHRcdC8vIG9uIHNjcm9sbCBjaGVjayB0aGUgbG9hZGVyIHBvc2l0aW9uXHJcblx0XHRcdHRoaXMud2luZG93LmJpbmQoIFwic2Nyb2xsXCIsICQucHJveHkoIHRoaXMuY2hlY2tMb2FkZXJQb3NpdGlvbiwgdGhpcyApICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdGhpZGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHQkaHRtbC5yZW1vdmVDbGFzcyggXCJ1aS1sb2FkaW5nXCIgKTtcclxuXHJcblx0XHRcdGlmICggdGhpcy5vcHRpb25zLnRleHQgKSB7XHJcblx0XHRcdFx0dGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKCBcInVpLWxvYWRlci1mYWtlZml4XCIgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dGhpcy53aW5kb3cudW5iaW5kKCBcInNjcm9sbFwiLCB0aGlzLmZha2VGaXhMb2FkZXIgKTtcclxuXHRcdFx0dGhpcy53aW5kb3cudW5iaW5kKCBcInNjcm9sbFwiLCB0aGlzLmNoZWNrTG9hZGVyUG9zaXRpb24gKTtcclxuXHRcdH1cclxuXHR9KTtcclxuXHJcbn0pKGpRdWVyeSwgdGhpcyk7XHJcblxyXG5cclxuLyohXHJcbiAqIGpRdWVyeSBoYXNoY2hhbmdlIGV2ZW50IC0gdjEuMyAtIDcvMjEvMjAxMFxyXG4gKiBodHRwOi8vYmVuYWxtYW4uY29tL3Byb2plY3RzL2pxdWVyeS1oYXNoY2hhbmdlLXBsdWdpbi9cclxuICogXHJcbiAqIENvcHlyaWdodCAoYykgMjAxMCBcIkNvd2JveVwiIEJlbiBBbG1hblxyXG4gKiBEdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgYW5kIEdQTCBsaWNlbnNlcy5cclxuICogaHR0cDovL2JlbmFsbWFuLmNvbS9hYm91dC9saWNlbnNlL1xyXG4gKi9cclxuXHJcbi8vIFNjcmlwdDogalF1ZXJ5IGhhc2hjaGFuZ2UgZXZlbnRcclxuLy9cclxuLy8gKlZlcnNpb246IDEuMywgTGFzdCB1cGRhdGVkOiA3LzIxLzIwMTAqXHJcbi8vIFxyXG4vLyBQcm9qZWN0IEhvbWUgLSBodHRwOi8vYmVuYWxtYW4uY29tL3Byb2plY3RzL2pxdWVyeS1oYXNoY2hhbmdlLXBsdWdpbi9cclxuLy8gR2l0SHViICAgICAgIC0gaHR0cDovL2dpdGh1Yi5jb20vY293Ym95L2pxdWVyeS1oYXNoY2hhbmdlL1xyXG4vLyBTb3VyY2UgICAgICAgLSBodHRwOi8vZ2l0aHViLmNvbS9jb3dib3kvanF1ZXJ5LWhhc2hjaGFuZ2UvcmF3L21hc3Rlci9qcXVlcnkuYmEtaGFzaGNoYW5nZS5qc1xyXG4vLyAoTWluaWZpZWQpICAgLSBodHRwOi8vZ2l0aHViLmNvbS9jb3dib3kvanF1ZXJ5LWhhc2hjaGFuZ2UvcmF3L21hc3Rlci9qcXVlcnkuYmEtaGFzaGNoYW5nZS5taW4uanMgKDAuOGtiIGd6aXBwZWQpXHJcbi8vIFxyXG4vLyBBYm91dDogTGljZW5zZVxyXG4vLyBcclxuLy8gQ29weXJpZ2h0IChjKSAyMDEwIFwiQ293Ym95XCIgQmVuIEFsbWFuLFxyXG4vLyBEdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgYW5kIEdQTCBsaWNlbnNlcy5cclxuLy8gaHR0cDovL2JlbmFsbWFuLmNvbS9hYm91dC9saWNlbnNlL1xyXG4vLyBcclxuLy8gQWJvdXQ6IEV4YW1wbGVzXHJcbi8vIFxyXG4vLyBUaGVzZSB3b3JraW5nIGV4YW1wbGVzLCBjb21wbGV0ZSB3aXRoIGZ1bGx5IGNvbW1lbnRlZCBjb2RlLCBpbGx1c3RyYXRlIGEgZmV3XHJcbi8vIHdheXMgaW4gd2hpY2ggdGhpcyBwbHVnaW4gY2FuIGJlIHVzZWQuXHJcbi8vIFxyXG4vLyBoYXNoY2hhbmdlIGV2ZW50IC0gaHR0cDovL2JlbmFsbWFuLmNvbS9jb2RlL3Byb2plY3RzL2pxdWVyeS1oYXNoY2hhbmdlL2V4YW1wbGVzL2hhc2hjaGFuZ2UvXHJcbi8vIGRvY3VtZW50LmRvbWFpbiAtIGh0dHA6Ly9iZW5hbG1hbi5jb20vY29kZS9wcm9qZWN0cy9qcXVlcnktaGFzaGNoYW5nZS9leGFtcGxlcy9kb2N1bWVudF9kb21haW4vXHJcbi8vIFxyXG4vLyBBYm91dDogU3VwcG9ydCBhbmQgVGVzdGluZ1xyXG4vLyBcclxuLy8gSW5mb3JtYXRpb24gYWJvdXQgd2hhdCB2ZXJzaW9uIG9yIHZlcnNpb25zIG9mIGpRdWVyeSB0aGlzIHBsdWdpbiBoYXMgYmVlblxyXG4vLyB0ZXN0ZWQgd2l0aCwgd2hhdCBicm93c2VycyBpdCBoYXMgYmVlbiB0ZXN0ZWQgaW4sIGFuZCB3aGVyZSB0aGUgdW5pdCB0ZXN0c1xyXG4vLyByZXNpZGUgKHNvIHlvdSBjYW4gdGVzdCBpdCB5b3Vyc2VsZikuXHJcbi8vIFxyXG4vLyBqUXVlcnkgVmVyc2lvbnMgLSAxLjIuNiwgMS4zLjIsIDEuNC4xLCAxLjQuMlxyXG4vLyBCcm93c2VycyBUZXN0ZWQgLSBJbnRlcm5ldCBFeHBsb3JlciA2LTgsIEZpcmVmb3ggMi00LCBDaHJvbWUgNS02LCBTYWZhcmkgMy4yLTUsXHJcbi8vICAgICAgICAgICAgICAgICAgIE9wZXJhIDkuNi0xMC42MCwgaVBob25lIDMuMSwgQW5kcm9pZCAxLjYtMi4yLCBCbGFja0JlcnJ5IDQuNi01LlxyXG4vLyBVbml0IFRlc3RzICAgICAgLSBodHRwOi8vYmVuYWxtYW4uY29tL2NvZGUvcHJvamVjdHMvanF1ZXJ5LWhhc2hjaGFuZ2UvdW5pdC9cclxuLy8gXHJcbi8vIEFib3V0OiBLbm93biBpc3N1ZXNcclxuLy8gXHJcbi8vIFdoaWxlIHRoaXMgalF1ZXJ5IGhhc2hjaGFuZ2UgZXZlbnQgaW1wbGVtZW50YXRpb24gaXMgcXVpdGUgc3RhYmxlIGFuZFxyXG4vLyByb2J1c3QsIHRoZXJlIGFyZSBhIGZldyB1bmZvcnR1bmF0ZSBicm93c2VyIGJ1Z3Mgc3Vycm91bmRpbmcgZXhwZWN0ZWRcclxuLy8gaGFzaGNoYW5nZSBldmVudC1iYXNlZCBiZWhhdmlvcnMsIGluZGVwZW5kZW50IG9mIGFueSBKYXZhU2NyaXB0XHJcbi8vIHdpbmRvdy5vbmhhc2hjaGFuZ2UgYWJzdHJhY3Rpb24uIFNlZSB0aGUgZm9sbG93aW5nIGV4YW1wbGVzIGZvciBtb3JlXHJcbi8vIGluZm9ybWF0aW9uOlxyXG4vLyBcclxuLy8gQ2hyb21lOiBCYWNrIEJ1dHRvbiAtIGh0dHA6Ly9iZW5hbG1hbi5jb20vY29kZS9wcm9qZWN0cy9qcXVlcnktaGFzaGNoYW5nZS9leGFtcGxlcy9idWctY2hyb21lLWJhY2stYnV0dG9uL1xyXG4vLyBGaXJlZm94OiBSZW1vdGUgWE1MSHR0cFJlcXVlc3QgLSBodHRwOi8vYmVuYWxtYW4uY29tL2NvZGUvcHJvamVjdHMvanF1ZXJ5LWhhc2hjaGFuZ2UvZXhhbXBsZXMvYnVnLWZpcmVmb3gtcmVtb3RlLXhoci9cclxuLy8gV2ViS2l0OiBCYWNrIEJ1dHRvbiBpbiBhbiBJZnJhbWUgLSBodHRwOi8vYmVuYWxtYW4uY29tL2NvZGUvcHJvamVjdHMvanF1ZXJ5LWhhc2hjaGFuZ2UvZXhhbXBsZXMvYnVnLXdlYmtpdC1oYXNoLWlmcmFtZS9cclxuLy8gU2FmYXJpOiBCYWNrIEJ1dHRvbiBmcm9tIGEgZGlmZmVyZW50IGRvbWFpbiAtIGh0dHA6Ly9iZW5hbG1hbi5jb20vY29kZS9wcm9qZWN0cy9qcXVlcnktaGFzaGNoYW5nZS9leGFtcGxlcy9idWctc2FmYXJpLWJhY2stZnJvbS1kaWZmLWRvbWFpbi9cclxuLy8gXHJcbi8vIEFsc28gbm90ZSB0aGF0IHNob3VsZCBhIGJyb3dzZXIgbmF0aXZlbHkgc3VwcG9ydCB0aGUgd2luZG93Lm9uaGFzaGNoYW5nZSBcclxuLy8gZXZlbnQsIGJ1dCBub3QgcmVwb3J0IHRoYXQgaXQgZG9lcywgdGhlIGZhbGxiYWNrIHBvbGxpbmcgbG9vcCB3aWxsIGJlIHVzZWQuXHJcbi8vIFxyXG4vLyBBYm91dDogUmVsZWFzZSBIaXN0b3J5XHJcbi8vIFxyXG4vLyAxLjMgICAtICg3LzIxLzIwMTApIFJlb3JnYW5pemVkIElFNi83IElmcmFtZSBjb2RlIHRvIG1ha2UgaXQgbW9yZVxyXG4vLyAgICAgICAgIFwicmVtb3ZhYmxlXCIgZm9yIG1vYmlsZS1vbmx5IGRldmVsb3BtZW50LiBBZGRlZCBJRTYvNyBkb2N1bWVudC50aXRsZVxyXG4vLyAgICAgICAgIHN1cHBvcnQuIEF0dGVtcHRlZCB0byBtYWtlIElmcmFtZSBhcyBoaWRkZW4gYXMgcG9zc2libGUgYnkgdXNpbmdcclxuLy8gICAgICAgICB0ZWNobmlxdWVzIGZyb20gaHR0cDovL3d3dy5wYWNpZWxsb2dyb3VwLmNvbS9ibG9nLz9wPTYwNC4gQWRkZWQgXHJcbi8vICAgICAgICAgc3VwcG9ydCBmb3IgdGhlIFwic2hvcnRjdXRcIiBmb3JtYXQgJCh3aW5kb3cpLmhhc2hjaGFuZ2UoIGZuICkgYW5kXHJcbi8vICAgICAgICAgJCh3aW5kb3cpLmhhc2hjaGFuZ2UoKSBsaWtlIGpRdWVyeSBwcm92aWRlcyBmb3IgYnVpbHQtaW4gZXZlbnRzLlxyXG4vLyAgICAgICAgIFJlbmFtZWQgalF1ZXJ5Lmhhc2hjaGFuZ2VEZWxheSB0byA8alF1ZXJ5LmZuLmhhc2hjaGFuZ2UuZGVsYXk+IGFuZFxyXG4vLyAgICAgICAgIGxvd2VyZWQgaXRzIGRlZmF1bHQgdmFsdWUgdG8gNTAuIEFkZGVkIDxqUXVlcnkuZm4uaGFzaGNoYW5nZS5kb21haW4+XHJcbi8vICAgICAgICAgYW5kIDxqUXVlcnkuZm4uaGFzaGNoYW5nZS5zcmM+IHByb3BlcnRpZXMgcGx1cyBkb2N1bWVudC1kb21haW4uaHRtbFxyXG4vLyAgICAgICAgIGZpbGUgdG8gYWRkcmVzcyBhY2Nlc3MgZGVuaWVkIGlzc3VlcyB3aGVuIHNldHRpbmcgZG9jdW1lbnQuZG9tYWluIGluXHJcbi8vICAgICAgICAgSUU2LzcuXHJcbi8vIDEuMiAgIC0gKDIvMTEvMjAxMCkgRml4ZWQgYSBidWcgd2hlcmUgY29taW5nIGJhY2sgdG8gYSBwYWdlIHVzaW5nIHRoaXMgcGx1Z2luXHJcbi8vICAgICAgICAgZnJvbSBhIHBhZ2Ugb24gYW5vdGhlciBkb21haW4gd291bGQgY2F1c2UgYW4gZXJyb3IgaW4gU2FmYXJpIDQuIEFsc28sXHJcbi8vICAgICAgICAgSUU2LzcgSWZyYW1lIGlzIG5vdyBpbnNlcnRlZCBhZnRlciB0aGUgYm9keSAodGhpcyBhY3R1YWxseSB3b3JrcyksXHJcbi8vICAgICAgICAgd2hpY2ggcHJldmVudHMgdGhlIHBhZ2UgZnJvbSBzY3JvbGxpbmcgd2hlbiB0aGUgZXZlbnQgaXMgZmlyc3QgYm91bmQuXHJcbi8vICAgICAgICAgRXZlbnQgY2FuIGFsc28gbm93IGJlIGJvdW5kIGJlZm9yZSBET00gcmVhZHksIGJ1dCBpdCB3b24ndCBiZSB1c2FibGVcclxuLy8gICAgICAgICBiZWZvcmUgdGhlbiBpbiBJRTYvNy5cclxuLy8gMS4xICAgLSAoMS8yMS8yMDEwKSBJbmNvcnBvcmF0ZWQgZG9jdW1lbnQuZG9jdW1lbnRNb2RlIHRlc3QgdG8gZml4IElFOCBidWdcclxuLy8gICAgICAgICB3aGVyZSBicm93c2VyIHZlcnNpb24gaXMgaW5jb3JyZWN0bHkgcmVwb3J0ZWQgYXMgOC4wLCBkZXNwaXRlXHJcbi8vICAgICAgICAgaW5jbHVzaW9uIG9mIHRoZSBYLVVBLUNvbXBhdGlibGUgSUU9RW11bGF0ZUlFNyBtZXRhIHRhZy5cclxuLy8gMS4wICAgLSAoMS85LzIwMTApIEluaXRpYWwgUmVsZWFzZS4gQnJva2Ugb3V0IHRoZSBqUXVlcnkgQkJRIGV2ZW50LnNwZWNpYWxcclxuLy8gICAgICAgICB3aW5kb3cub25oYXNoY2hhbmdlIGZ1bmN0aW9uYWxpdHkgaW50byBhIHNlcGFyYXRlIHBsdWdpbiBmb3IgdXNlcnNcclxuLy8gICAgICAgICB3aG8gd2FudCBqdXN0IHRoZSBiYXNpYyBldmVudCAmIGJhY2sgYnV0dG9uIHN1cHBvcnQsIHdpdGhvdXQgYWxsIHRoZVxyXG4vLyAgICAgICAgIGV4dHJhIGF3ZXNvbWVuZXNzIHRoYXQgQkJRIHByb3ZpZGVzLiBUaGlzIHBsdWdpbiB3aWxsIGJlIGluY2x1ZGVkIGFzXHJcbi8vICAgICAgICAgcGFydCBvZiBqUXVlcnkgQkJRLCBidXQgYWxzbyBiZSBhdmFpbGFibGUgc2VwYXJhdGVseS5cclxuXHJcbihmdW5jdGlvbigkLHdpbmRvdyx1bmRlZmluZWQpe1xyXG4gICckOm5vbXVuZ2UnOyAvLyBVc2VkIGJ5IFlVSSBjb21wcmVzc29yLlxyXG4gIFxyXG4gIC8vIFJldXNlZCBzdHJpbmcuXHJcbiAgdmFyIHN0cl9oYXNoY2hhbmdlID0gJ2hhc2hjaGFuZ2UnLFxyXG4gICAgXHJcbiAgICAvLyBNZXRob2QgLyBvYmplY3QgcmVmZXJlbmNlcy5cclxuICAgIGRvYyA9IGRvY3VtZW50LFxyXG4gICAgZmFrZV9vbmhhc2hjaGFuZ2UsXHJcbiAgICBzcGVjaWFsID0gJC5ldmVudC5zcGVjaWFsLFxyXG4gICAgXHJcbiAgICAvLyBEb2VzIHRoZSBicm93c2VyIHN1cHBvcnQgd2luZG93Lm9uaGFzaGNoYW5nZT8gTm90ZSB0aGF0IElFOCBydW5uaW5nIGluXHJcbiAgICAvLyBJRTcgY29tcGF0aWJpbGl0eSBtb2RlIHJlcG9ydHMgdHJ1ZSBmb3IgJ29uaGFzaGNoYW5nZScgaW4gd2luZG93LCBldmVuXHJcbiAgICAvLyB0aG91Z2ggdGhlIGV2ZW50IGlzbid0IHN1cHBvcnRlZCwgc28gYWxzbyB0ZXN0IGRvY3VtZW50LmRvY3VtZW50TW9kZS5cclxuICAgIGRvY19tb2RlID0gZG9jLmRvY3VtZW50TW9kZSxcclxuICAgIHN1cHBvcnRzX29uaGFzaGNoYW5nZSA9ICdvbicgKyBzdHJfaGFzaGNoYW5nZSBpbiB3aW5kb3cgJiYgKCBkb2NfbW9kZSA9PT0gdW5kZWZpbmVkIHx8IGRvY19tb2RlID4gNyApO1xyXG4gIFxyXG4gIC8vIEdldCBsb2NhdGlvbi5oYXNoIChvciB3aGF0IHlvdSdkIGV4cGVjdCBsb2NhdGlvbi5oYXNoIHRvIGJlKSBzYW5zIGFueVxyXG4gIC8vIGxlYWRpbmcgIy4gVGhhbmtzIGZvciBtYWtpbmcgdGhpcyBuZWNlc3NhcnksIEZpcmVmb3ghXHJcbiAgZnVuY3Rpb24gZ2V0X2ZyYWdtZW50KCB1cmwgKSB7XHJcbiAgICB1cmwgPSB1cmwgfHwgbG9jYXRpb24uaHJlZjtcclxuICAgIHJldHVybiAnIycgKyB1cmwucmVwbGFjZSggL15bXiNdKiM/KC4qKSQvLCAnJDEnICk7XHJcbiAgfTtcclxuICBcclxuICAvLyBNZXRob2Q6IGpRdWVyeS5mbi5oYXNoY2hhbmdlXHJcbiAgLy8gXHJcbiAgLy8gQmluZCBhIGhhbmRsZXIgdG8gdGhlIHdpbmRvdy5vbmhhc2hjaGFuZ2UgZXZlbnQgb3IgdHJpZ2dlciBhbGwgYm91bmRcclxuICAvLyB3aW5kb3cub25oYXNoY2hhbmdlIGV2ZW50IGhhbmRsZXJzLiBUaGlzIGJlaGF2aW9yIGlzIGNvbnNpc3RlbnQgd2l0aFxyXG4gIC8vIGpRdWVyeSdzIGJ1aWx0LWluIGV2ZW50IGhhbmRsZXJzLlxyXG4gIC8vIFxyXG4gIC8vIFVzYWdlOlxyXG4gIC8vIFxyXG4gIC8vID4galF1ZXJ5KHdpbmRvdykuaGFzaGNoYW5nZSggWyBoYW5kbGVyIF0gKTtcclxuICAvLyBcclxuICAvLyBBcmd1bWVudHM6XHJcbiAgLy8gXHJcbiAgLy8gIGhhbmRsZXIgLSAoRnVuY3Rpb24pIE9wdGlvbmFsIGhhbmRsZXIgdG8gYmUgYm91bmQgdG8gdGhlIGhhc2hjaGFuZ2VcclxuICAvLyAgICBldmVudC4gVGhpcyBpcyBhIFwic2hvcnRjdXRcIiBmb3IgdGhlIG1vcmUgdmVyYm9zZSBmb3JtOlxyXG4gIC8vICAgIGpRdWVyeSh3aW5kb3cpLmJpbmQoICdoYXNoY2hhbmdlJywgaGFuZGxlciApLiBJZiBoYW5kbGVyIGlzIG9taXR0ZWQsXHJcbiAgLy8gICAgYWxsIGJvdW5kIHdpbmRvdy5vbmhhc2hjaGFuZ2UgZXZlbnQgaGFuZGxlcnMgd2lsbCBiZSB0cmlnZ2VyZWQuIFRoaXNcclxuICAvLyAgICBpcyBhIHNob3J0Y3V0IGZvciB0aGUgbW9yZSB2ZXJib3NlXHJcbiAgLy8gICAgalF1ZXJ5KHdpbmRvdykudHJpZ2dlciggJ2hhc2hjaGFuZ2UnICkuIFRoZXNlIGZvcm1zIGFyZSBkZXNjcmliZWQgaW5cclxuICAvLyAgICB0aGUgPGhhc2hjaGFuZ2UgZXZlbnQ+IHNlY3Rpb24uXHJcbiAgLy8gXHJcbiAgLy8gUmV0dXJuczpcclxuICAvLyBcclxuICAvLyAgKGpRdWVyeSkgVGhlIGluaXRpYWwgalF1ZXJ5IGNvbGxlY3Rpb24gb2YgZWxlbWVudHMuXHJcbiAgXHJcbiAgLy8gQWxsb3cgdGhlIFwic2hvcnRjdXRcIiBmb3JtYXQgJChlbGVtKS5oYXNoY2hhbmdlKCBmbiApIGZvciBiaW5kaW5nIGFuZFxyXG4gIC8vICQoZWxlbSkuaGFzaGNoYW5nZSgpIGZvciB0cmlnZ2VyaW5nLCBsaWtlIGpRdWVyeSBkb2VzIGZvciBidWlsdC1pbiBldmVudHMuXHJcbiAgJC5mblsgc3RyX2hhc2hjaGFuZ2UgXSA9IGZ1bmN0aW9uKCBmbiApIHtcclxuICAgIHJldHVybiBmbiA/IHRoaXMuYmluZCggc3RyX2hhc2hjaGFuZ2UsIGZuICkgOiB0aGlzLnRyaWdnZXIoIHN0cl9oYXNoY2hhbmdlICk7XHJcbiAgfTtcclxuICBcclxuICAvLyBQcm9wZXJ0eTogalF1ZXJ5LmZuLmhhc2hjaGFuZ2UuZGVsYXlcclxuICAvLyBcclxuICAvLyBUaGUgbnVtZXJpYyBpbnRlcnZhbCAoaW4gbWlsbGlzZWNvbmRzKSBhdCB3aGljaCB0aGUgPGhhc2hjaGFuZ2UgZXZlbnQ+XHJcbiAgLy8gcG9sbGluZyBsb29wIGV4ZWN1dGVzLiBEZWZhdWx0cyB0byA1MC5cclxuICBcclxuICAvLyBQcm9wZXJ0eTogalF1ZXJ5LmZuLmhhc2hjaGFuZ2UuZG9tYWluXHJcbiAgLy8gXHJcbiAgLy8gSWYgeW91J3JlIHNldHRpbmcgZG9jdW1lbnQuZG9tYWluIGluIHlvdXIgSmF2YVNjcmlwdCwgYW5kIHlvdSB3YW50IGhhc2hcclxuICAvLyBoaXN0b3J5IHRvIHdvcmsgaW4gSUU2LzcsIG5vdCBvbmx5IG11c3QgdGhpcyBwcm9wZXJ0eSBiZSBzZXQsIGJ1dCB5b3UgbXVzdFxyXG4gIC8vIGFsc28gc2V0IGRvY3VtZW50LmRvbWFpbiBCRUZPUkUgalF1ZXJ5IGlzIGxvYWRlZCBpbnRvIHRoZSBwYWdlLiBUaGlzXHJcbiAgLy8gcHJvcGVydHkgaXMgb25seSBhcHBsaWNhYmxlIGlmIHlvdSBhcmUgc3VwcG9ydGluZyBJRTYvNyAob3IgSUU4IG9wZXJhdGluZ1xyXG4gIC8vIGluIFwiSUU3IGNvbXBhdGliaWxpdHlcIiBtb2RlKS5cclxuICAvLyBcclxuICAvLyBJbiBhZGRpdGlvbiwgdGhlIDxqUXVlcnkuZm4uaGFzaGNoYW5nZS5zcmM+IHByb3BlcnR5IG11c3QgYmUgc2V0IHRvIHRoZVxyXG4gIC8vIHBhdGggb2YgdGhlIGluY2x1ZGVkIFwiZG9jdW1lbnQtZG9tYWluLmh0bWxcIiBmaWxlLCB3aGljaCBjYW4gYmUgcmVuYW1lZCBvclxyXG4gIC8vIG1vZGlmaWVkIGlmIG5lY2Vzc2FyeSAobm90ZSB0aGF0IHRoZSBkb2N1bWVudC5kb21haW4gc3BlY2lmaWVkIG11c3QgYmUgdGhlXHJcbiAgLy8gc2FtZSBpbiBib3RoIHlvdXIgbWFpbiBKYXZhU2NyaXB0IGFzIHdlbGwgYXMgaW4gdGhpcyBmaWxlKS5cclxuICAvLyBcclxuICAvLyBVc2FnZTpcclxuICAvLyBcclxuICAvLyBqUXVlcnkuZm4uaGFzaGNoYW5nZS5kb21haW4gPSBkb2N1bWVudC5kb21haW47XHJcbiAgXHJcbiAgLy8gUHJvcGVydHk6IGpRdWVyeS5mbi5oYXNoY2hhbmdlLnNyY1xyXG4gIC8vIFxyXG4gIC8vIElmLCBmb3Igc29tZSByZWFzb24sIHlvdSBuZWVkIHRvIHNwZWNpZnkgYW4gSWZyYW1lIHNyYyBmaWxlIChmb3IgZXhhbXBsZSxcclxuICAvLyB3aGVuIHNldHRpbmcgZG9jdW1lbnQuZG9tYWluIGFzIGluIDxqUXVlcnkuZm4uaGFzaGNoYW5nZS5kb21haW4+KSwgeW91IGNhblxyXG4gIC8vIGRvIHNvIHVzaW5nIHRoaXMgcHJvcGVydHkuIE5vdGUgdGhhdCB3aGVuIHVzaW5nIHRoaXMgcHJvcGVydHksIGhpc3RvcnlcclxuICAvLyB3b24ndCBiZSByZWNvcmRlZCBpbiBJRTYvNyB1bnRpbCB0aGUgSWZyYW1lIHNyYyBmaWxlIGxvYWRzLiBUaGlzIHByb3BlcnR5XHJcbiAgLy8gaXMgb25seSBhcHBsaWNhYmxlIGlmIHlvdSBhcmUgc3VwcG9ydGluZyBJRTYvNyAob3IgSUU4IG9wZXJhdGluZyBpbiBcIklFN1xyXG4gIC8vIGNvbXBhdGliaWxpdHlcIiBtb2RlKS5cclxuICAvLyBcclxuICAvLyBVc2FnZTpcclxuICAvLyBcclxuICAvLyBqUXVlcnkuZm4uaGFzaGNoYW5nZS5zcmMgPSAncGF0aC90by9maWxlLmh0bWwnO1xyXG4gIFxyXG4gICQuZm5bIHN0cl9oYXNoY2hhbmdlIF0uZGVsYXkgPSA1MDtcclxuICAvKlxyXG4gICQuZm5bIHN0cl9oYXNoY2hhbmdlIF0uZG9tYWluID0gbnVsbDtcclxuICAkLmZuWyBzdHJfaGFzaGNoYW5nZSBdLnNyYyA9IG51bGw7XHJcbiAgKi9cclxuICBcclxuICAvLyBFdmVudDogaGFzaGNoYW5nZSBldmVudFxyXG4gIC8vIFxyXG4gIC8vIEZpcmVkIHdoZW4gbG9jYXRpb24uaGFzaCBjaGFuZ2VzLiBJbiBicm93c2VycyB0aGF0IHN1cHBvcnQgaXQsIHRoZSBuYXRpdmVcclxuICAvLyBIVE1MNSB3aW5kb3cub25oYXNoY2hhbmdlIGV2ZW50IGlzIHVzZWQsIG90aGVyd2lzZSBhIHBvbGxpbmcgbG9vcCBpc1xyXG4gIC8vIGluaXRpYWxpemVkLCBydW5uaW5nIGV2ZXJ5IDxqUXVlcnkuZm4uaGFzaGNoYW5nZS5kZWxheT4gbWlsbGlzZWNvbmRzIHRvXHJcbiAgLy8gc2VlIGlmIHRoZSBoYXNoIGhhcyBjaGFuZ2VkLiBJbiBJRTYvNyAoYW5kIElFOCBvcGVyYXRpbmcgaW4gXCJJRTdcclxuICAvLyBjb21wYXRpYmlsaXR5XCIgbW9kZSksIGEgaGlkZGVuIElmcmFtZSBpcyBjcmVhdGVkIHRvIGFsbG93IHRoZSBiYWNrIGJ1dHRvblxyXG4gIC8vIGFuZCBoYXNoLWJhc2VkIGhpc3RvcnkgdG8gd29yay5cclxuICAvLyBcclxuICAvLyBVc2FnZSBhcyBkZXNjcmliZWQgaW4gPGpRdWVyeS5mbi5oYXNoY2hhbmdlPjpcclxuICAvLyBcclxuICAvLyA+IC8vIEJpbmQgYW4gZXZlbnQgaGFuZGxlci5cclxuICAvLyA+IGpRdWVyeSh3aW5kb3cpLmhhc2hjaGFuZ2UoIGZ1bmN0aW9uKGUpIHtcclxuICAvLyA+ICAgdmFyIGhhc2ggPSBsb2NhdGlvbi5oYXNoO1xyXG4gIC8vID4gICAuLi5cclxuICAvLyA+IH0pO1xyXG4gIC8vID4gXHJcbiAgLy8gPiAvLyBNYW51YWxseSB0cmlnZ2VyIHRoZSBldmVudCBoYW5kbGVyLlxyXG4gIC8vID4galF1ZXJ5KHdpbmRvdykuaGFzaGNoYW5nZSgpO1xyXG4gIC8vIFxyXG4gIC8vIEEgbW9yZSB2ZXJib3NlIHVzYWdlIHRoYXQgYWxsb3dzIGZvciBldmVudCBuYW1lc3BhY2luZzpcclxuICAvLyBcclxuICAvLyA+IC8vIEJpbmQgYW4gZXZlbnQgaGFuZGxlci5cclxuICAvLyA+IGpRdWVyeSh3aW5kb3cpLmJpbmQoICdoYXNoY2hhbmdlJywgZnVuY3Rpb24oZSkge1xyXG4gIC8vID4gICB2YXIgaGFzaCA9IGxvY2F0aW9uLmhhc2g7XHJcbiAgLy8gPiAgIC4uLlxyXG4gIC8vID4gfSk7XHJcbiAgLy8gPiBcclxuICAvLyA+IC8vIE1hbnVhbGx5IHRyaWdnZXIgdGhlIGV2ZW50IGhhbmRsZXIuXHJcbiAgLy8gPiBqUXVlcnkod2luZG93KS50cmlnZ2VyKCAnaGFzaGNoYW5nZScgKTtcclxuICAvLyBcclxuICAvLyBBZGRpdGlvbmFsIE5vdGVzOlxyXG4gIC8vIFxyXG4gIC8vICogVGhlIHBvbGxpbmcgbG9vcCBhbmQgSWZyYW1lIGFyZSBub3QgY3JlYXRlZCB1bnRpbCBhdCBsZWFzdCBvbmUgaGFuZGxlclxyXG4gIC8vICAgaXMgYWN0dWFsbHkgYm91bmQgdG8gdGhlICdoYXNoY2hhbmdlJyBldmVudC5cclxuICAvLyAqIElmIHlvdSBuZWVkIHRoZSBib3VuZCBoYW5kbGVyKHMpIHRvIGV4ZWN1dGUgaW1tZWRpYXRlbHksIGluIGNhc2VzIHdoZXJlXHJcbiAgLy8gICBhIGxvY2F0aW9uLmhhc2ggZXhpc3RzIG9uIHBhZ2UgbG9hZCwgdmlhIGJvb2ttYXJrIG9yIHBhZ2UgcmVmcmVzaCBmb3JcclxuICAvLyAgIGV4YW1wbGUsIHVzZSBqUXVlcnkod2luZG93KS5oYXNoY2hhbmdlKCkgb3IgdGhlIG1vcmUgdmVyYm9zZSBcclxuICAvLyAgIGpRdWVyeSh3aW5kb3cpLnRyaWdnZXIoICdoYXNoY2hhbmdlJyApLlxyXG4gIC8vICogVGhlIGV2ZW50IGNhbiBiZSBib3VuZCBiZWZvcmUgRE9NIHJlYWR5LCBidXQgc2luY2UgaXQgd29uJ3QgYmUgdXNhYmxlXHJcbiAgLy8gICBiZWZvcmUgdGhlbiBpbiBJRTYvNyAoZHVlIHRvIHRoZSBuZWNlc3NhcnkgSWZyYW1lKSwgcmVjb21tZW5kZWQgdXNhZ2UgaXNcclxuICAvLyAgIHRvIGJpbmQgaXQgaW5zaWRlIGEgRE9NIHJlYWR5IGhhbmRsZXIuXHJcbiAgXHJcbiAgLy8gT3ZlcnJpZGUgZXhpc3RpbmcgJC5ldmVudC5zcGVjaWFsLmhhc2hjaGFuZ2UgbWV0aG9kcyAoYWxsb3dpbmcgdGhpcyBwbHVnaW5cclxuICAvLyB0byBiZSBkZWZpbmVkIGFmdGVyIGpRdWVyeSBCQlEgaW4gQkJRJ3Mgc291cmNlIGNvZGUpLlxyXG4gIHNwZWNpYWxbIHN0cl9oYXNoY2hhbmdlIF0gPSAkLmV4dGVuZCggc3BlY2lhbFsgc3RyX2hhc2hjaGFuZ2UgXSwge1xyXG4gICAgXHJcbiAgICAvLyBDYWxsZWQgb25seSB3aGVuIHRoZSBmaXJzdCAnaGFzaGNoYW5nZScgZXZlbnQgaXMgYm91bmQgdG8gd2luZG93LlxyXG4gICAgc2V0dXA6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAvLyBJZiB3aW5kb3cub25oYXNoY2hhbmdlIGlzIHN1cHBvcnRlZCBuYXRpdmVseSwgdGhlcmUncyBub3RoaW5nIHRvIGRvLi5cclxuICAgICAgaWYgKCBzdXBwb3J0c19vbmhhc2hjaGFuZ2UgKSB7IHJldHVybiBmYWxzZTsgfVxyXG4gICAgICBcclxuICAgICAgLy8gT3RoZXJ3aXNlLCB3ZSBuZWVkIHRvIGNyZWF0ZSBvdXIgb3duLiBBbmQgd2UgZG9uJ3Qgd2FudCB0byBjYWxsIHRoaXNcclxuICAgICAgLy8gdW50aWwgdGhlIHVzZXIgYmluZHMgdG8gdGhlIGV2ZW50LCBqdXN0IGluIGNhc2UgdGhleSBuZXZlciBkbywgc2luY2UgaXRcclxuICAgICAgLy8gd2lsbCBjcmVhdGUgYSBwb2xsaW5nIGxvb3AgYW5kIHBvc3NpYmx5IGV2ZW4gYSBoaWRkZW4gSWZyYW1lLlxyXG4gICAgICAkKCBmYWtlX29uaGFzaGNoYW5nZS5zdGFydCApO1xyXG4gICAgfSxcclxuICAgIFxyXG4gICAgLy8gQ2FsbGVkIG9ubHkgd2hlbiB0aGUgbGFzdCAnaGFzaGNoYW5nZScgZXZlbnQgaXMgdW5ib3VuZCBmcm9tIHdpbmRvdy5cclxuICAgIHRlYXJkb3duOiBmdW5jdGlvbigpIHtcclxuICAgICAgLy8gSWYgd2luZG93Lm9uaGFzaGNoYW5nZSBpcyBzdXBwb3J0ZWQgbmF0aXZlbHksIHRoZXJlJ3Mgbm90aGluZyB0byBkby4uXHJcbiAgICAgIGlmICggc3VwcG9ydHNfb25oYXNoY2hhbmdlICkgeyByZXR1cm4gZmFsc2U7IH1cclxuICAgICAgXHJcbiAgICAgIC8vIE90aGVyd2lzZSwgd2UgbmVlZCB0byBzdG9wIG91cnMgKGlmIHBvc3NpYmxlKS5cclxuICAgICAgJCggZmFrZV9vbmhhc2hjaGFuZ2Uuc3RvcCApO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgfSk7XHJcbiAgXHJcbiAgLy8gZmFrZV9vbmhhc2hjaGFuZ2UgZG9lcyBhbGwgdGhlIHdvcmsgb2YgdHJpZ2dlcmluZyB0aGUgd2luZG93Lm9uaGFzaGNoYW5nZVxyXG4gIC8vIGV2ZW50IGZvciBicm93c2VycyB0aGF0IGRvbid0IG5hdGl2ZWx5IHN1cHBvcnQgaXQsIGluY2x1ZGluZyBjcmVhdGluZyBhXHJcbiAgLy8gcG9sbGluZyBsb29wIHRvIHdhdGNoIGZvciBoYXNoIGNoYW5nZXMgYW5kIGluIElFIDYvNyBjcmVhdGluZyBhIGhpZGRlblxyXG4gIC8vIElmcmFtZSB0byBlbmFibGUgYmFjayBhbmQgZm9yd2FyZC5cclxuICBmYWtlX29uaGFzaGNoYW5nZSA9IChmdW5jdGlvbigpe1xyXG4gICAgdmFyIHNlbGYgPSB7fSxcclxuICAgICAgdGltZW91dF9pZCxcclxuICAgICAgXHJcbiAgICAgIC8vIFJlbWVtYmVyIHRoZSBpbml0aWFsIGhhc2ggc28gaXQgZG9lc24ndCBnZXQgdHJpZ2dlcmVkIGltbWVkaWF0ZWx5LlxyXG4gICAgICBsYXN0X2hhc2ggPSBnZXRfZnJhZ21lbnQoKSxcclxuICAgICAgXHJcbiAgICAgIGZuX3JldHZhbCA9IGZ1bmN0aW9uKHZhbCl7IHJldHVybiB2YWw7IH0sXHJcbiAgICAgIGhpc3Rvcnlfc2V0ID0gZm5fcmV0dmFsLFxyXG4gICAgICBoaXN0b3J5X2dldCA9IGZuX3JldHZhbDtcclxuICAgIFxyXG4gICAgLy8gU3RhcnQgdGhlIHBvbGxpbmcgbG9vcC5cclxuICAgIHNlbGYuc3RhcnQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgdGltZW91dF9pZCB8fCBwb2xsKCk7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICAvLyBTdG9wIHRoZSBwb2xsaW5nIGxvb3AuXHJcbiAgICBzZWxmLnN0b3AgPSBmdW5jdGlvbigpIHtcclxuICAgICAgdGltZW91dF9pZCAmJiBjbGVhclRpbWVvdXQoIHRpbWVvdXRfaWQgKTtcclxuICAgICAgdGltZW91dF9pZCA9IHVuZGVmaW5lZDtcclxuICAgIH07XHJcbiAgICBcclxuICAgIC8vIFRoaXMgcG9sbGluZyBsb29wIGNoZWNrcyBldmVyeSAkLmZuLmhhc2hjaGFuZ2UuZGVsYXkgbWlsbGlzZWNvbmRzIHRvIHNlZVxyXG4gICAgLy8gaWYgbG9jYXRpb24uaGFzaCBoYXMgY2hhbmdlZCwgYW5kIHRyaWdnZXJzIHRoZSAnaGFzaGNoYW5nZScgZXZlbnQgb25cclxuICAgIC8vIHdpbmRvdyB3aGVuIG5lY2Vzc2FyeS5cclxuICAgIGZ1bmN0aW9uIHBvbGwoKSB7XHJcbiAgICAgIHZhciBoYXNoID0gZ2V0X2ZyYWdtZW50KCksXHJcbiAgICAgICAgaGlzdG9yeV9oYXNoID0gaGlzdG9yeV9nZXQoIGxhc3RfaGFzaCApO1xyXG4gICAgICBcclxuICAgICAgaWYgKCBoYXNoICE9PSBsYXN0X2hhc2ggKSB7XHJcbiAgICAgICAgaGlzdG9yeV9zZXQoIGxhc3RfaGFzaCA9IGhhc2gsIGhpc3RvcnlfaGFzaCApO1xyXG4gICAgICAgIFxyXG4gICAgICAgICQod2luZG93KS50cmlnZ2VyKCBzdHJfaGFzaGNoYW5nZSApO1xyXG4gICAgICAgIFxyXG4gICAgICB9IGVsc2UgaWYgKCBoaXN0b3J5X2hhc2ggIT09IGxhc3RfaGFzaCApIHtcclxuICAgICAgICBsb2NhdGlvbi5ocmVmID0gbG9jYXRpb24uaHJlZi5yZXBsYWNlKCAvIy4qLywgJycgKSArIGhpc3RvcnlfaGFzaDtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgdGltZW91dF9pZCA9IHNldFRpbWVvdXQoIHBvbGwsICQuZm5bIHN0cl9oYXNoY2hhbmdlIF0uZGVsYXkgKTtcclxuICAgIH07XHJcbiAgICBcclxuICAgIC8vIHZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dlxyXG4gICAgLy8gdnZ2dnZ2dnZ2dnZ2dnZ2dnZ2diBSRU1PVkUgSUYgTk9UIFNVUFBPUlRJTkcgSUU2LzcvOCB2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2XHJcbiAgICAvLyB2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZcclxuICAgIHdpbmRvdy5hdHRhY2hFdmVudCAmJiAhd2luZG93LmFkZEV2ZW50TGlzdGVuZXIgJiYgIXN1cHBvcnRzX29uaGFzaGNoYW5nZSAmJiAoZnVuY3Rpb24oKXtcclxuICAgICAgLy8gTm90IG9ubHkgZG8gSUU2LzcgbmVlZCB0aGUgXCJtYWdpY2FsXCIgSWZyYW1lIHRyZWF0bWVudCwgYnV0IHNvIGRvZXMgSUU4XHJcbiAgICAgIC8vIHdoZW4gcnVubmluZyBpbiBcIklFNyBjb21wYXRpYmlsaXR5XCIgbW9kZS5cclxuICAgICAgXHJcbiAgICAgIHZhciBpZnJhbWUsXHJcbiAgICAgICAgaWZyYW1lX3NyYztcclxuICAgICAgXHJcbiAgICAgIC8vIFdoZW4gdGhlIGV2ZW50IGlzIGJvdW5kIGFuZCBwb2xsaW5nIHN0YXJ0cyBpbiBJRSA2LzcsIGNyZWF0ZSBhIGhpZGRlblxyXG4gICAgICAvLyBJZnJhbWUgZm9yIGhpc3RvcnkgaGFuZGxpbmcuXHJcbiAgICAgIHNlbGYuc3RhcnQgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgIGlmICggIWlmcmFtZSApIHtcclxuICAgICAgICAgIGlmcmFtZV9zcmMgPSAkLmZuWyBzdHJfaGFzaGNoYW5nZSBdLnNyYztcclxuICAgICAgICAgIGlmcmFtZV9zcmMgPSBpZnJhbWVfc3JjICYmIGlmcmFtZV9zcmMgKyBnZXRfZnJhZ21lbnQoKTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgLy8gQ3JlYXRlIGhpZGRlbiBJZnJhbWUuIEF0dGVtcHQgdG8gbWFrZSBJZnJhbWUgYXMgaGlkZGVuIGFzIHBvc3NpYmxlXHJcbiAgICAgICAgICAvLyBieSB1c2luZyB0ZWNobmlxdWVzIGZyb20gaHR0cDovL3d3dy5wYWNpZWxsb2dyb3VwLmNvbS9ibG9nLz9wPTYwNC5cclxuICAgICAgICAgIGlmcmFtZSA9ICQoJzxpZnJhbWUgdGFiaW5kZXg9XCItMVwiIHRpdGxlPVwiZW1wdHlcIi8+JykuaGlkZSgpXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBXaGVuIElmcmFtZSBoYXMgY29tcGxldGVseSBsb2FkZWQsIGluaXRpYWxpemUgdGhlIGhpc3RvcnkgYW5kXHJcbiAgICAgICAgICAgIC8vIHN0YXJ0IHBvbGxpbmcuXHJcbiAgICAgICAgICAgIC5vbmUoICdsb2FkJywgZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICBpZnJhbWVfc3JjIHx8IGhpc3Rvcnlfc2V0KCBnZXRfZnJhZ21lbnQoKSApO1xyXG4gICAgICAgICAgICAgIHBvbGwoKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIExvYWQgSWZyYW1lIHNyYyBpZiBzcGVjaWZpZWQsIG90aGVyd2lzZSBub3RoaW5nLlxyXG4gICAgICAgICAgICAuYXR0ciggJ3NyYycsIGlmcmFtZV9zcmMgfHwgJ2phdmFzY3JpcHQ6MCcgKVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gQXBwZW5kIElmcmFtZSBhZnRlciB0aGUgZW5kIG9mIHRoZSBib2R5IHRvIHByZXZlbnQgdW5uZWNlc3NhcnlcclxuICAgICAgICAgICAgLy8gaW5pdGlhbCBwYWdlIHNjcm9sbGluZyAoeWVzLCB0aGlzIHdvcmtzKS5cclxuICAgICAgICAgICAgLmluc2VydEFmdGVyKCAnYm9keScgKVswXS5jb250ZW50V2luZG93O1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAvLyBXaGVuZXZlciBgZG9jdW1lbnQudGl0bGVgIGNoYW5nZXMsIHVwZGF0ZSB0aGUgSWZyYW1lJ3MgdGl0bGUgdG9cclxuICAgICAgICAgIC8vIHByZXR0aWZ5IHRoZSBiYWNrL25leHQgaGlzdG9yeSBtZW51IGVudHJpZXMuIFNpbmNlIElFIHNvbWV0aW1lc1xyXG4gICAgICAgICAgLy8gZXJyb3JzIHdpdGggXCJVbnNwZWNpZmllZCBlcnJvclwiIHRoZSB2ZXJ5IGZpcnN0IHRpbWUgdGhpcyBpcyBzZXRcclxuICAgICAgICAgIC8vICh5ZXMsIHZlcnkgdXNlZnVsKSB3cmFwIHRoaXMgd2l0aCBhIHRyeS9jYXRjaCBibG9jay5cclxuICAgICAgICAgIGRvYy5vbnByb3BlcnR5Y2hhbmdlID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICBpZiAoIGV2ZW50LnByb3BlcnR5TmFtZSA9PT0gJ3RpdGxlJyApIHtcclxuICAgICAgICAgICAgICAgIGlmcmFtZS5kb2N1bWVudC50aXRsZSA9IGRvYy50aXRsZTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gY2F0Y2goZSkge31cclxuICAgICAgICAgIH07XHJcbiAgICAgICAgICBcclxuICAgICAgICB9XHJcbiAgICAgIH07XHJcbiAgICAgIFxyXG4gICAgICAvLyBPdmVycmlkZSB0aGUgXCJzdG9wXCIgbWV0aG9kIHNpbmNlIGFuIElFNi83IElmcmFtZSB3YXMgY3JlYXRlZC4gRXZlblxyXG4gICAgICAvLyBpZiB0aGVyZSBhcmUgbm8gbG9uZ2VyIGFueSBib3VuZCBldmVudCBoYW5kbGVycywgdGhlIHBvbGxpbmcgbG9vcFxyXG4gICAgICAvLyBpcyBzdGlsbCBuZWNlc3NhcnkgZm9yIGJhY2svbmV4dCB0byB3b3JrIGF0IGFsbCFcclxuICAgICAgc2VsZi5zdG9wID0gZm5fcmV0dmFsO1xyXG4gICAgICBcclxuICAgICAgLy8gR2V0IGhpc3RvcnkgYnkgbG9va2luZyBhdCB0aGUgaGlkZGVuIElmcmFtZSdzIGxvY2F0aW9uLmhhc2guXHJcbiAgICAgIGhpc3RvcnlfZ2V0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIGdldF9mcmFnbWVudCggaWZyYW1lLmxvY2F0aW9uLmhyZWYgKTtcclxuICAgICAgfTtcclxuICAgICAgXHJcbiAgICAgIC8vIFNldCBhIG5ldyBoaXN0b3J5IGl0ZW0gYnkgb3BlbmluZyBhbmQgdGhlbiBjbG9zaW5nIHRoZSBJZnJhbWVcclxuICAgICAgLy8gZG9jdW1lbnQsICp0aGVuKiBzZXR0aW5nIGl0cyBsb2NhdGlvbi5oYXNoLiBJZiBkb2N1bWVudC5kb21haW4gaGFzXHJcbiAgICAgIC8vIGJlZW4gc2V0LCB1cGRhdGUgdGhhdCBhcyB3ZWxsLlxyXG4gICAgICBoaXN0b3J5X3NldCA9IGZ1bmN0aW9uKCBoYXNoLCBoaXN0b3J5X2hhc2ggKSB7XHJcbiAgICAgICAgdmFyIGlmcmFtZV9kb2MgPSBpZnJhbWUuZG9jdW1lbnQsXHJcbiAgICAgICAgICBkb21haW4gPSAkLmZuWyBzdHJfaGFzaGNoYW5nZSBdLmRvbWFpbjtcclxuICAgICAgICBcclxuICAgICAgICBpZiAoIGhhc2ggIT09IGhpc3RvcnlfaGFzaCApIHtcclxuICAgICAgICAgIC8vIFVwZGF0ZSBJZnJhbWUgd2l0aCBhbnkgaW5pdGlhbCBgZG9jdW1lbnQudGl0bGVgIHRoYXQgbWlnaHQgYmUgc2V0LlxyXG4gICAgICAgICAgaWZyYW1lX2RvYy50aXRsZSA9IGRvYy50aXRsZTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgLy8gT3BlbmluZyB0aGUgSWZyYW1lJ3MgZG9jdW1lbnQgYWZ0ZXIgaXQgaGFzIGJlZW4gY2xvc2VkIGlzIHdoYXRcclxuICAgICAgICAgIC8vIGFjdHVhbGx5IGFkZHMgYSBoaXN0b3J5IGVudHJ5LlxyXG4gICAgICAgICAgaWZyYW1lX2RvYy5vcGVuKCk7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIC8vIFNldCBkb2N1bWVudC5kb21haW4gZm9yIHRoZSBJZnJhbWUgZG9jdW1lbnQgYXMgd2VsbCwgaWYgbmVjZXNzYXJ5LlxyXG4gICAgICAgICAgZG9tYWluICYmIGlmcmFtZV9kb2Mud3JpdGUoICdcXHgzY3NjcmlwdD5kb2N1bWVudC5kb21haW49XCInICsgZG9tYWluICsgJ1wiXFx4M2Mvc2NyaXB0PicgKTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgaWZyYW1lX2RvYy5jbG9zZSgpO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAvLyBVcGRhdGUgdGhlIElmcmFtZSdzIGhhc2gsIGZvciBncmVhdCBqdXN0aWNlLlxyXG4gICAgICAgICAgaWZyYW1lLmxvY2F0aW9uLmhhc2ggPSBoYXNoO1xyXG4gICAgICAgIH1cclxuICAgICAgfTtcclxuICAgICAgXHJcbiAgICB9KSgpO1xyXG4gICAgLy8gXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXHJcbiAgICAvLyBeXl5eXl5eXl5eXl5eXl5eXl5eIFJFTU9WRSBJRiBOT1QgU1VQUE9SVElORyBJRTYvNy84IF5eXl5eXl5eXl5eXl5eXl5eXl5cclxuICAgIC8vIF5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXl5eXlxyXG4gICAgXHJcbiAgICByZXR1cm4gc2VsZjtcclxuICB9KSgpO1xyXG4gIFxyXG59KShqUXVlcnksdGhpcyk7XHJcblxyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG5cdC8qISBtYXRjaE1lZGlhKCkgcG9seWZpbGwgLSBUZXN0IGEgQ1NTIG1lZGlhIHR5cGUvcXVlcnkgaW4gSlMuIEF1dGhvcnMgJiBjb3B5cmlnaHQgKGMpIDIwMTI6IFNjb3R0IEplaGwsIFBhdWwgSXJpc2gsIE5pY2hvbGFzIFpha2FzLiBEdWFsIE1JVC9CU0QgbGljZW5zZSAqL1xyXG5cdHdpbmRvdy5tYXRjaE1lZGlhID0gd2luZG93Lm1hdGNoTWVkaWEgfHwgKGZ1bmN0aW9uKCBkb2MsIHVuZGVmaW5lZCApIHtcclxuXHJcblx0XHR2YXIgYm9vbCxcclxuXHRcdFx0ZG9jRWxlbSA9IGRvYy5kb2N1bWVudEVsZW1lbnQsXHJcblx0XHRcdHJlZk5vZGUgPSBkb2NFbGVtLmZpcnN0RWxlbWVudENoaWxkIHx8IGRvY0VsZW0uZmlyc3RDaGlsZCxcclxuXHRcdFx0Ly8gZmFrZUJvZHkgcmVxdWlyZWQgZm9yIDxGRjQgd2hlbiBleGVjdXRlZCBpbiA8aGVhZD5cclxuXHRcdFx0ZmFrZUJvZHkgPSBkb2MuY3JlYXRlRWxlbWVudCggXCJib2R5XCIgKSxcclxuXHRcdFx0ZGl2ID0gZG9jLmNyZWF0ZUVsZW1lbnQoIFwiZGl2XCIgKTtcclxuXHJcblx0XHRkaXYuaWQgPSBcIm1xLXRlc3QtMVwiO1xyXG5cdFx0ZGl2LnN0eWxlLmNzc1RleHQgPSBcInBvc2l0aW9uOmFic29sdXRlO3RvcDotMTAwZW1cIjtcclxuXHRcdGZha2VCb2R5LnN0eWxlLmJhY2tncm91bmQgPSBcIm5vbmVcIjtcclxuXHRcdGZha2VCb2R5LmFwcGVuZENoaWxkKGRpdik7XHJcblxyXG5cdFx0cmV0dXJuIGZ1bmN0aW9uKHEpe1xyXG5cclxuXHRcdFx0ZGl2LmlubmVySFRNTCA9IFwiJnNoeTs8c3R5bGUgbWVkaWE9XFxcIlwiICsgcSArIFwiXFxcIj4gI21xLXRlc3QtMSB7IHdpZHRoOiA0MnB4OyB9PC9zdHlsZT5cIjtcclxuXHJcblx0XHRcdGRvY0VsZW0uaW5zZXJ0QmVmb3JlKCBmYWtlQm9keSwgcmVmTm9kZSApO1xyXG5cdFx0XHRib29sID0gZGl2Lm9mZnNldFdpZHRoID09PSA0MjtcclxuXHRcdFx0ZG9jRWxlbS5yZW1vdmVDaGlsZCggZmFrZUJvZHkgKTtcclxuXHJcblx0XHRcdHJldHVybiB7XHJcblx0XHRcdFx0bWF0Y2hlczogYm9vbCxcclxuXHRcdFx0XHRtZWRpYTogcVxyXG5cdFx0XHR9O1xyXG5cclxuXHRcdH07XHJcblxyXG5cdH0oIGRvY3VtZW50ICkpO1xyXG5cclxuXHQvLyAkLm1vYmlsZS5tZWRpYSB1c2VzIG1hdGNoTWVkaWEgdG8gcmV0dXJuIGEgYm9vbGVhbi5cclxuXHQkLm1vYmlsZS5tZWRpYSA9IGZ1bmN0aW9uKCBxICkge1xyXG5cdFx0cmV0dXJuIHdpbmRvdy5tYXRjaE1lZGlhKCBxICkubWF0Y2hlcztcclxuXHR9O1xyXG5cclxufSkoalF1ZXJ5KTtcclxuXHJcblx0KGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblx0XHR2YXIgc3VwcG9ydCA9IHtcclxuXHRcdFx0dG91Y2g6IFwib250b3VjaGVuZFwiIGluIGRvY3VtZW50XHJcblx0XHR9O1xyXG5cclxuXHRcdCQubW9iaWxlLnN1cHBvcnQgPSAkLm1vYmlsZS5zdXBwb3J0IHx8IHt9O1xyXG5cdFx0JC5leHRlbmQoICQuc3VwcG9ydCwgc3VwcG9ydCApO1xyXG5cdFx0JC5leHRlbmQoICQubW9iaWxlLnN1cHBvcnQsIHN1cHBvcnQgKTtcclxuXHR9KCBqUXVlcnkgKSk7XHJcblxyXG5cdChmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cdFx0JC5leHRlbmQoICQuc3VwcG9ydCwge1xyXG5cdFx0XHRvcmllbnRhdGlvbjogXCJvcmllbnRhdGlvblwiIGluIHdpbmRvdyAmJiBcIm9ub3JpZW50YXRpb25jaGFuZ2VcIiBpbiB3aW5kb3dcclxuXHRcdH0pO1xyXG5cdH0oIGpRdWVyeSApKTtcclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxuLy8gdGh4IE1vZGVybml6clxyXG5mdW5jdGlvbiBwcm9wRXhpc3RzKCBwcm9wICkge1xyXG5cdHZhciB1Y19wcm9wID0gcHJvcC5jaGFyQXQoIDAgKS50b1VwcGVyQ2FzZSgpICsgcHJvcC5zdWJzdHIoIDEgKSxcclxuXHRcdHByb3BzID0gKCBwcm9wICsgXCIgXCIgKyB2ZW5kb3JzLmpvaW4oIHVjX3Byb3AgKyBcIiBcIiApICsgdWNfcHJvcCApLnNwbGl0KCBcIiBcIiApLFxyXG5cdFx0djtcclxuXHJcblx0Zm9yICggdiBpbiBwcm9wcyApIHtcclxuXHRcdGlmICggZmJDU1NbIHByb3BzWyB2IF0gXSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdH1cclxuXHR9XHJcbn1cclxuXHJcbnZhciBmYWtlQm9keSA9ICQoIFwiPGJvZHk+XCIgKS5wcmVwZW5kVG8oIFwiaHRtbFwiICksXHJcblx0ZmJDU1MgPSBmYWtlQm9keVsgMCBdLnN0eWxlLFxyXG5cdHZlbmRvcnMgPSBbIFwiV2Via2l0XCIsIFwiTW96XCIsIFwiT1wiIF0sXHJcblx0d2Vib3MgPSBcInBhbG1HZXRSZXNvdXJjZVwiIGluIHdpbmRvdywgLy9vbmx5IHVzZWQgdG8gcnVsZSBvdXQgc2Nyb2xsVG9wXHJcblx0b3BlcmFtaW5pID0gd2luZG93Lm9wZXJhbWluaSAmJiAoe30pLnRvU3RyaW5nLmNhbGwoIHdpbmRvdy5vcGVyYW1pbmkgKSA9PT0gXCJbb2JqZWN0IE9wZXJhTWluaV1cIixcclxuXHRiYiA9IHdpbmRvdy5ibGFja2JlcnJ5ICYmICFwcm9wRXhpc3RzKCBcIi13ZWJraXQtdHJhbnNmb3JtXCIgKSwgLy9vbmx5IHVzZWQgdG8gcnVsZSBvdXQgYm94IHNoYWRvdywgYXMgaXQncyBmaWxsZWQgb3BhcXVlIG9uIEJCIDUgYW5kIGxvd2VyXHJcblx0bm9raWFMVEU3XzM7XHJcblxyXG4vLyBpbmxpbmUgU1ZHIHN1cHBvcnQgdGVzdFxyXG5mdW5jdGlvbiBpbmxpbmVTVkcoKSB7XHJcblx0Ly8gVGhhbmtzIE1vZGVybml6ciAmIEVyaWsgRGFobHN0cm9tXHJcblx0dmFyIHcgPSB3aW5kb3csXHJcblx0XHRzdmcgPSAhIXcuZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TICYmICEhdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoIFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgXCJzdmdcIiApLmNyZWF0ZVNWR1JlY3QgJiYgISggdy5vcGVyYSAmJiBuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIFwiQ2hyb21lXCIgKSA9PT0gLTEgKSxcclxuXHRcdHN1cHBvcnQgPSBmdW5jdGlvbiggZGF0YSApIHtcclxuXHRcdFx0aWYgKCAhKCBkYXRhICYmIHN2ZyApICkge1xyXG5cdFx0XHRcdCQoIFwiaHRtbFwiICkuYWRkQ2xhc3MoIFwidWktbm9zdmdcIiApO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cdFx0aW1nID0gbmV3IHcuSW1hZ2UoKTtcclxuXHJcblx0aW1nLm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcclxuXHRcdHN1cHBvcnQoIGZhbHNlICk7XHJcblx0fTtcclxuXHRpbWcub25sb2FkID0gZnVuY3Rpb24oKSB7XHJcblx0XHRzdXBwb3J0KCBpbWcud2lkdGggPT09IDEgJiYgaW1nLmhlaWdodCA9PT0gMSApO1xyXG5cdH07XHJcblx0aW1nLnNyYyA9IFwiZGF0YTppbWFnZS9naWY7YmFzZTY0LFIwbEdPRGxoQVFBQkFJQUFBQUFBQVAvLy95d0FBQUFBQVFBQkFBQUNBVXdBT3c9PVwiO1xyXG59XHJcblxyXG5mdW5jdGlvbiB0cmFuc2Zvcm0zZFRlc3QoKSB7XHJcblx0dmFyIG1xUHJvcCA9IFwidHJhbnNmb3JtLTNkXCIsXHJcblx0XHQvLyBCZWNhdXNlIHRoZSBgdHJhbnNsYXRlM2RgIHRlc3QgYmVsb3cgdGhyb3dzIGZhbHNlIHBvc2l0aXZlcyBpbiBBbmRyb2lkOlxyXG5cdFx0cmV0ID0gJC5tb2JpbGUubWVkaWEoIFwiKC1cIiArIHZlbmRvcnMuam9pbiggXCItXCIgKyBtcVByb3AgKyBcIiksKC1cIiApICsgXCItXCIgKyBtcVByb3AgKyBcIiksKFwiICsgbXFQcm9wICsgXCIpXCIgKSxcclxuXHRcdGVsLCB0cmFuc2Zvcm1zLCB0O1xyXG5cclxuXHRpZiAoIHJldCApIHtcclxuXHRcdHJldHVybiAhIXJldDtcclxuXHR9XHJcblxyXG5cdGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJkaXZcIiApO1xyXG5cdHRyYW5zZm9ybXMgPSB7XHJcblx0XHQvLyBXZeKAmXJlIG9taXR0aW5nIE9wZXJhIGZvciB0aGUgdGltZSBiZWluZzsgTVMgdXNlcyB1bnByZWZpeGVkLlxyXG5cdFx0XCJNb3pUcmFuc2Zvcm1cIjogXCItbW96LXRyYW5zZm9ybVwiLFxyXG5cdFx0XCJ0cmFuc2Zvcm1cIjogXCJ0cmFuc2Zvcm1cIlxyXG5cdH07XHJcblxyXG5cdGZha2VCb2R5LmFwcGVuZCggZWwgKTtcclxuXHJcblx0Zm9yICggdCBpbiB0cmFuc2Zvcm1zICkge1xyXG5cdFx0aWYgKCBlbC5zdHlsZVsgdCBdICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdGVsLnN0eWxlWyB0IF0gPSBcInRyYW5zbGF0ZTNkKCAxMDBweCwgMXB4LCAxcHggKVwiO1xyXG5cdFx0XHRyZXQgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSggZWwgKS5nZXRQcm9wZXJ0eVZhbHVlKCB0cmFuc2Zvcm1zWyB0IF0gKTtcclxuXHRcdH1cclxuXHR9XHJcblx0cmV0dXJuICggISFyZXQgJiYgcmV0ICE9PSBcIm5vbmVcIiApO1xyXG59XHJcblxyXG4vLyBUZXN0IGZvciBkeW5hbWljLXVwZGF0aW5nIGJhc2UgdGFnIHN1cHBvcnQgKCBhbGxvd3MgdXMgdG8gYXZvaWQgaHJlZixzcmMgYXR0ciByZXdyaXRpbmcgKVxyXG5mdW5jdGlvbiBiYXNlVGFnVGVzdCgpIHtcclxuXHR2YXIgZmF1eEJhc2UgPSBsb2NhdGlvbi5wcm90b2NvbCArIFwiLy9cIiArIGxvY2F0aW9uLmhvc3QgKyBsb2NhdGlvbi5wYXRobmFtZSArIFwidWktZGlyL1wiLFxyXG5cdFx0YmFzZSA9ICQoIFwiaGVhZCBiYXNlXCIgKSxcclxuXHRcdGZhdXhFbGUgPSBudWxsLFxyXG5cdFx0aHJlZiA9IFwiXCIsXHJcblx0XHRsaW5rLCByZWJhc2U7XHJcblxyXG5cdGlmICggIWJhc2UubGVuZ3RoICkge1xyXG5cdFx0YmFzZSA9IGZhdXhFbGUgPSAkKCBcIjxiYXNlPlwiLCB7IFwiaHJlZlwiOiBmYXV4QmFzZSB9KS5hcHBlbmRUbyggXCJoZWFkXCIgKTtcclxuXHR9IGVsc2Uge1xyXG5cdFx0aHJlZiA9IGJhc2UuYXR0ciggXCJocmVmXCIgKTtcclxuXHR9XHJcblxyXG5cdGxpbmsgPSAkKCBcIjxhIGhyZWY9J3Rlc3R1cmwnIC8+XCIgKS5wcmVwZW5kVG8oIGZha2VCb2R5ICk7XHJcblx0cmViYXNlID0gbGlua1sgMCBdLmhyZWY7XHJcblx0YmFzZVsgMCBdLmhyZWYgPSBocmVmIHx8IGxvY2F0aW9uLnBhdGhuYW1lO1xyXG5cclxuXHRpZiAoIGZhdXhFbGUgKSB7XHJcblx0XHRmYXV4RWxlLnJlbW92ZSgpO1xyXG5cdH1cclxuXHRyZXR1cm4gcmViYXNlLmluZGV4T2YoIGZhdXhCYXNlICkgPT09IDA7XHJcbn1cclxuXHJcbi8vIFRoYW5rcyBNb2Rlcm5penJcclxuZnVuY3Rpb24gY3NzUG9pbnRlckV2ZW50c1Rlc3QoKSB7XHJcblx0dmFyIGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcInhcIiApLFxyXG5cdFx0ZG9jdW1lbnRFbGVtZW50ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LFxyXG5cdFx0Z2V0Q29tcHV0ZWRTdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlLFxyXG5cdFx0c3VwcG9ydHM7XHJcblxyXG5cdGlmICggISggXCJwb2ludGVyRXZlbnRzXCIgaW4gZWxlbWVudC5zdHlsZSApICkge1xyXG5cdFx0cmV0dXJuIGZhbHNlO1xyXG5cdH1cclxuXHJcblx0ZWxlbWVudC5zdHlsZS5wb2ludGVyRXZlbnRzID0gXCJhdXRvXCI7XHJcblx0ZWxlbWVudC5zdHlsZS5wb2ludGVyRXZlbnRzID0gXCJ4XCI7XHJcblx0ZG9jdW1lbnRFbGVtZW50LmFwcGVuZENoaWxkKCBlbGVtZW50ICk7XHJcblx0c3VwcG9ydHMgPSBnZXRDb21wdXRlZFN0eWxlICYmXHJcblx0Z2V0Q29tcHV0ZWRTdHlsZSggZWxlbWVudCwgXCJcIiApLnBvaW50ZXJFdmVudHMgPT09IFwiYXV0b1wiO1xyXG5cdGRvY3VtZW50RWxlbWVudC5yZW1vdmVDaGlsZCggZWxlbWVudCApO1xyXG5cdHJldHVybiAhIXN1cHBvcnRzO1xyXG59XHJcblxyXG5mdW5jdGlvbiBib3VuZGluZ1JlY3QoKSB7XHJcblx0dmFyIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiZGl2XCIgKTtcclxuXHRyZXR1cm4gdHlwZW9mIGRpdi5nZXRCb3VuZGluZ0NsaWVudFJlY3QgIT09IFwidW5kZWZpbmVkXCI7XHJcbn1cclxuXHJcbi8vIG5vbi1VQS1iYXNlZCBJRSB2ZXJzaW9uIGNoZWNrIGJ5IEphbWVzIFBhZG9sc2V5LCBtb2RpZmllZCBieSBqZGFsdG9uIC0gZnJvbSBodHRwOi8vZ2lzdC5naXRodWIuY29tLzUyNzY4M1xyXG4vLyBhbGxvd3MgZm9yIGluY2x1c2lvbiBvZiBJRSA2KywgaW5jbHVkaW5nIFdpbmRvd3MgTW9iaWxlIDdcclxuJC5leHRlbmQoICQubW9iaWxlLCB7IGJyb3dzZXI6IHt9IH0gKTtcclxuJC5tb2JpbGUuYnJvd3Nlci5vbGRJRSA9IChmdW5jdGlvbigpIHtcclxuXHR2YXIgdiA9IDMsXHJcblx0XHRkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImRpdlwiICksXHJcblx0XHRhID0gZGl2LmFsbCB8fCBbXTtcclxuXHJcblx0ZG8ge1xyXG5cdFx0ZGl2LmlubmVySFRNTCA9IFwiPCEtLVtpZiBndCBJRSBcIiArICggKyt2ICkgKyBcIl0+PGJyPjwhW2VuZGlmXS0tPlwiO1xyXG5cdH0gd2hpbGUoIGFbMF0gKTtcclxuXHJcblx0cmV0dXJuIHYgPiA0ID8gdiA6ICF2O1xyXG59KSgpO1xyXG5cclxuZnVuY3Rpb24gZml4ZWRQb3NpdGlvbigpIHtcclxuXHR2YXIgdyA9IHdpbmRvdyxcclxuXHRcdHVhID0gbmF2aWdhdG9yLnVzZXJBZ2VudCxcclxuXHRcdHBsYXRmb3JtID0gbmF2aWdhdG9yLnBsYXRmb3JtLFxyXG5cdFx0Ly8gUmVuZGVyaW5nIGVuZ2luZSBpcyBXZWJraXQsIGFuZCBjYXB0dXJlIG1ham9yIHZlcnNpb25cclxuXHRcdHdrbWF0Y2ggPSB1YS5tYXRjaCggL0FwcGxlV2ViS2l0XFwvKFswLTldKykvICksXHJcblx0XHR3a3ZlcnNpb24gPSAhIXdrbWF0Y2ggJiYgd2ttYXRjaFsgMSBdLFxyXG5cdFx0ZmZtYXRjaCA9IHVhLm1hdGNoKCAvRmVubmVjXFwvKFswLTldKykvICksXHJcblx0XHRmZnZlcnNpb24gPSAhIWZmbWF0Y2ggJiYgZmZtYXRjaFsgMSBdLFxyXG5cdFx0b3BlcmFtbW9iaWxlbWF0Y2ggPSB1YS5tYXRjaCggL09wZXJhIE1vYmlcXC8oWzAtOV0rKS8gKSxcclxuXHRcdG9tdmVyc2lvbiA9ICEhb3BlcmFtbW9iaWxlbWF0Y2ggJiYgb3BlcmFtbW9iaWxlbWF0Y2hbIDEgXTtcclxuXHJcblx0aWYgKFxyXG5cdFx0Ly8gaU9TIDQuMyBhbmQgb2xkZXIgOiBQbGF0Zm9ybSBpcyBpUGhvbmUvUGFkL1RvdWNoIGFuZCBXZWJraXQgdmVyc2lvbiBpcyBsZXNzIHRoYW4gNTM0IChpb3M1KVxyXG5cdFx0KCAoIHBsYXRmb3JtLmluZGV4T2YoIFwiaVBob25lXCIgKSA+IC0xIHx8IHBsYXRmb3JtLmluZGV4T2YoIFwiaVBhZFwiICkgPiAtMSAgfHwgcGxhdGZvcm0uaW5kZXhPZiggXCJpUG9kXCIgKSA+IC0xICkgJiYgd2t2ZXJzaW9uICYmIHdrdmVyc2lvbiA8IDUzNCApIHx8XHJcblx0XHQvLyBPcGVyYSBNaW5pXHJcblx0XHQoIHcub3BlcmFtaW5pICYmICh7fSkudG9TdHJpbmcuY2FsbCggdy5vcGVyYW1pbmkgKSA9PT0gXCJbb2JqZWN0IE9wZXJhTWluaV1cIiApIHx8XHJcblx0XHQoIG9wZXJhbW1vYmlsZW1hdGNoICYmIG9tdmVyc2lvbiA8IDc0NTggKVx0fHxcclxuXHRcdC8vQW5kcm9pZCBsdGUgMi4xOiBQbGF0Zm9ybSBpcyBBbmRyb2lkIGFuZCBXZWJraXQgdmVyc2lvbiBpcyBsZXNzIHRoYW4gNTMzIChBbmRyb2lkIDIuMilcclxuXHRcdCggdWEuaW5kZXhPZiggXCJBbmRyb2lkXCIgKSA+IC0xICYmIHdrdmVyc2lvbiAmJiB3a3ZlcnNpb24gPCA1MzMgKSB8fFxyXG5cdFx0Ly8gRmlyZWZveCBNb2JpbGUgYmVmb3JlIDYuMCAtXHJcblx0XHQoIGZmdmVyc2lvbiAmJiBmZnZlcnNpb24gPCA2ICkgfHxcclxuXHRcdC8vIFdlYk9TIGxlc3MgdGhhbiAzXHJcblx0XHQoIFwicGFsbUdldFJlc291cmNlXCIgaW4gd2luZG93ICYmIHdrdmVyc2lvbiAmJiB3a3ZlcnNpb24gPCA1MzQgKVx0fHxcclxuXHRcdC8vIE1lZUdvXHJcblx0XHQoIHVhLmluZGV4T2YoIFwiTWVlR29cIiApID4gLTEgJiYgdWEuaW5kZXhPZiggXCJOb2tpYUJyb3dzZXIvOC41LjBcIiApID4gLTEgKSApIHtcclxuXHRcdHJldHVybiBmYWxzZTtcclxuXHR9XHJcblxyXG5cdHJldHVybiB0cnVlO1xyXG59XHJcblxyXG4kLmV4dGVuZCggJC5zdXBwb3J0LCB7XHJcblx0Ly8gTm90ZSwgQ2hyb21lIGZvciBpT1MgaGFzIGFuIGV4dHJlbWVseSBxdWlya3kgaW1wbGVtZW50YXRpb24gb2YgcG9wc3RhdGUuXHJcblx0Ly8gV2UndmUgY2hvc2VuIHRvIHRha2UgdGhlIHNob3J0ZXN0IHBhdGggdG8gYSBidWcgZml4IGhlcmUgZm9yIGlzc3VlICM1NDI2XHJcblx0Ly8gU2VlIHRoZSBmb2xsb3dpbmcgbGluayBmb3IgaW5mb3JtYXRpb24gYWJvdXQgdGhlIHJlZ2V4IGNob3NlblxyXG5cdC8vIGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL2Nocm9tZS9tb2JpbGUvZG9jcy91c2VyLWFnZW50I2Nocm9tZV9mb3JfaW9zX3VzZXItYWdlbnRcclxuXHRwdXNoU3RhdGU6IFwicHVzaFN0YXRlXCIgaW4gaGlzdG9yeSAmJlxyXG5cdFx0XCJyZXBsYWNlU3RhdGVcIiBpbiBoaXN0b3J5ICYmXHJcblx0XHQvLyBXaGVuIHJ1bm5pbmcgaW5zaWRlIGEgRkYgaWZyYW1lLCBjYWxsaW5nIHJlcGxhY2VTdGF0ZSBjYXVzZXMgYW4gZXJyb3JcclxuXHRcdCEoIHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIFwiRmlyZWZveFwiICkgPj0gMCAmJiB3aW5kb3cudG9wICE9PSB3aW5kb3cgKSAmJlxyXG5cdFx0KCB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC5zZWFyY2goL0NyaU9TLykgPT09IC0xICksXHJcblxyXG5cdG1lZGlhcXVlcnk6ICQubW9iaWxlLm1lZGlhKCBcIm9ubHkgYWxsXCIgKSxcclxuXHRjc3NQc2V1ZG9FbGVtZW50OiAhIXByb3BFeGlzdHMoIFwiY29udGVudFwiICksXHJcblx0dG91Y2hPdmVyZmxvdzogISFwcm9wRXhpc3RzKCBcIm92ZXJmbG93U2Nyb2xsaW5nXCIgKSxcclxuXHRjc3NUcmFuc2Zvcm0zZDogdHJhbnNmb3JtM2RUZXN0KCksXHJcblx0Ym94U2hhZG93OiAhIXByb3BFeGlzdHMoIFwiYm94U2hhZG93XCIgKSAmJiAhYmIsXHJcblx0Zml4ZWRQb3NpdGlvbjogZml4ZWRQb3NpdGlvbigpLFxyXG5cdHNjcm9sbFRvcDogKFwicGFnZVhPZmZzZXRcIiBpbiB3aW5kb3cgfHxcclxuXHRcdFwic2Nyb2xsVG9wXCIgaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50IHx8XHJcblx0XHRcInNjcm9sbFRvcFwiIGluIGZha2VCb2R5WyAwIF0pICYmICF3ZWJvcyAmJiAhb3BlcmFtaW5pLFxyXG5cclxuXHRkeW5hbWljQmFzZVRhZzogYmFzZVRhZ1Rlc3QoKSxcclxuXHRjc3NQb2ludGVyRXZlbnRzOiBjc3NQb2ludGVyRXZlbnRzVGVzdCgpLFxyXG5cdGJvdW5kaW5nUmVjdDogYm91bmRpbmdSZWN0KCksXHJcblx0aW5saW5lU1ZHOiBpbmxpbmVTVkdcclxufSk7XHJcblxyXG5mYWtlQm9keS5yZW1vdmUoKTtcclxuXHJcbi8vICQubW9iaWxlLmFqYXhCbGFja2xpc3QgaXMgdXNlZCB0byBvdmVycmlkZSBhamF4RW5hYmxlZCBvbiBwbGF0Zm9ybXMgdGhhdCBoYXZlIGtub3duIGNvbmZsaWN0cyB3aXRoIGhhc2ggaGlzdG9yeSB1cGRhdGVzIChCQjUsIFN5bWJpYW4pXHJcbi8vIG9yIHRoYXQgZ2VuZXJhbGx5IHdvcmsgYmV0dGVyIGJyb3dzaW5nIGluIHJlZ3VsYXIgaHR0cCBmb3IgZnVsbCBwYWdlIHJlZnJlc2hlcyAoT3BlcmEgTWluaSlcclxuLy8gTm90ZTogVGhpcyBkZXRlY3Rpb24gYmVsb3cgaXMgdXNlZCBhcyBhIGxhc3QgcmVzb3J0LlxyXG4vLyBXZSByZWNvbW1lbmQgb25seSB1c2luZyB0aGVzZSBkZXRlY3Rpb24gbWV0aG9kcyB3aGVuIGFsbCBvdGhlciBtb3JlIHJlbGlhYmxlL2ZvcndhcmQtbG9va2luZyBhcHByb2FjaGVzIGFyZSBub3QgcG9zc2libGVcclxubm9raWFMVEU3XzMgPSAoZnVuY3Rpb24oKSB7XHJcblxyXG5cdHZhciB1YSA9IHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50O1xyXG5cclxuXHQvL1RoZSBmb2xsb3dpbmcgaXMgYW4gYXR0ZW1wdCB0byBtYXRjaCBOb2tpYSBicm93c2VycyB0aGF0IGFyZSBydW5uaW5nIFN5bWJpYW4vczYwLCB3aXRoIHdlYmtpdCwgdmVyc2lvbiA3LjMgb3Igb2xkZXJcclxuXHRyZXR1cm4gdWEuaW5kZXhPZiggXCJOb2tpYVwiICkgPiAtMSAmJlxyXG5cdFx0XHQoIHVhLmluZGV4T2YoIFwiU3ltYmlhbi8zXCIgKSA+IC0xIHx8IHVhLmluZGV4T2YoIFwiU2VyaWVzNjAvNVwiICkgPiAtMSApICYmXHJcblx0XHRcdHVhLmluZGV4T2YoIFwiQXBwbGVXZWJLaXRcIiApID4gLTEgJiZcclxuXHRcdFx0dWEubWF0Y2goIC8oQnJvd3Nlck5HfE5va2lhQnJvd3NlcilcXC83XFwuWzAtM10vICk7XHJcbn0pKCk7XHJcblxyXG4vLyBTdXBwb3J0IGNvbmRpdGlvbnMgdGhhdCBtdXN0IGJlIG1ldCBpbiBvcmRlciB0byBwcm9jZWVkXHJcbi8vIGRlZmF1bHQgZW5oYW5jZWQgcXVhbGlmaWNhdGlvbnMgYXJlIG1lZGlhIHF1ZXJ5IHN1cHBvcnQgT1IgSUUgNytcclxuXHJcbiQubW9iaWxlLmdyYWRlQSA9IGZ1bmN0aW9uKCkge1xyXG5cdHJldHVybiAoICggJC5zdXBwb3J0Lm1lZGlhcXVlcnkgJiYgJC5zdXBwb3J0LmNzc1BzZXVkb0VsZW1lbnQgKSB8fCAkLm1vYmlsZS5icm93c2VyLm9sZElFICYmICQubW9iaWxlLmJyb3dzZXIub2xkSUUgPj0gOCApICYmICggJC5zdXBwb3J0LmJvdW5kaW5nUmVjdCB8fCAkLmZuLmpxdWVyeS5tYXRjaCgvMVxcLlswLTcrXVxcLlswLTkrXT8vKSAhPT0gbnVsbCApO1xyXG59O1xyXG5cclxuJC5tb2JpbGUuYWpheEJsYWNrbGlzdCA9XHJcblx0XHRcdC8vIEJsYWNrQmVycnkgYnJvd3NlcnMsIHByZS13ZWJraXRcclxuXHRcdFx0d2luZG93LmJsYWNrYmVycnkgJiYgIXdpbmRvdy5XZWJLaXRQb2ludCB8fFxyXG5cdFx0XHQvLyBPcGVyYSBNaW5pXHJcblx0XHRcdG9wZXJhbWluaSB8fFxyXG5cdFx0XHQvLyBTeW1iaWFuIHdlYmtpdHMgcHJlIDcuM1xyXG5cdFx0XHRub2tpYUxURTdfMztcclxuXHJcbi8vIExhc3RseSwgdGhpcyB3b3JrYXJvdW5kIGlzIHRoZSBvbmx5IHdheSB3ZSd2ZSBmb3VuZCBzbyBmYXIgdG8gZ2V0IHByZSA3LjMgU3ltYmlhbiB3ZWJraXQgZGV2aWNlc1xyXG4vLyB0byByZW5kZXIgdGhlIHN0eWxlc2hlZXRzIHdoZW4gdGhleSdyZSByZWZlcmVuY2VkIGJlZm9yZSB0aGlzIHNjcmlwdCwgYXMgd2UnZCByZWNvbW1lbmQgZG9pbmcuXHJcbi8vIFRoaXMgc2ltcGx5IHJlYXBwZW5kcyB0aGUgQ1NTIGluIHBsYWNlLCB3aGljaCBmb3Igc29tZSByZWFzb24gbWFrZXMgaXQgYXBwbHlcclxuaWYgKCBub2tpYUxURTdfMyApIHtcclxuXHQkKGZ1bmN0aW9uKCkge1xyXG5cdFx0JCggXCJoZWFkIGxpbmtbcmVsPSdzdHlsZXNoZWV0J11cIiApLmF0dHIoIFwicmVsXCIsIFwiYWx0ZXJuYXRlIHN0eWxlc2hlZXRcIiApLmF0dHIoIFwicmVsXCIsIFwic3R5bGVzaGVldFwiICk7XHJcblx0fSk7XHJcbn1cclxuXHJcbi8vIEZvciBydWxpbmcgb3V0IHNoYWRvd3MgdmlhIGNzc1xyXG5pZiAoICEkLnN1cHBvcnQuYm94U2hhZG93ICkge1xyXG5cdCQoIFwiaHRtbFwiICkuYWRkQ2xhc3MoIFwidWktbm9ib3hzaGFkb3dcIiApO1xyXG59XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblx0dmFyICR3aW4gPSAkLm1vYmlsZS53aW5kb3csIHNlbGYsXHJcblx0XHRkdW1teUZuVG9Jbml0TmF2aWdhdGUgPSBmdW5jdGlvbigpIHtcclxuXHRcdH07XHJcblxyXG5cdCQuZXZlbnQuc3BlY2lhbC5iZWZvcmVuYXZpZ2F0ZSA9IHtcclxuXHRcdHNldHVwOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0JHdpbi5vbiggXCJuYXZpZ2F0ZVwiLCBkdW1teUZuVG9Jbml0TmF2aWdhdGUgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0dGVhcmRvd246IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHQkd2luLm9mZiggXCJuYXZpZ2F0ZVwiLCBkdW1teUZuVG9Jbml0TmF2aWdhdGUgKTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHQkLmV2ZW50LnNwZWNpYWwubmF2aWdhdGUgPSBzZWxmID0ge1xyXG5cdFx0Ym91bmQ6IGZhbHNlLFxyXG5cclxuXHRcdHB1c2hTdGF0ZUVuYWJsZWQ6IHRydWUsXHJcblxyXG5cdFx0b3JpZ2luYWxFdmVudE5hbWU6IHVuZGVmaW5lZCxcclxuXHJcblx0XHQvLyBJZiBwdXNoc3RhdGUgc3VwcG9ydCBpcyBwcmVzZW50IGFuZCBwdXNoIHN0YXRlIHN1cHBvcnQgaXMgZGVmaW5lZCB0b1xyXG5cdFx0Ly8gYmUgdHJ1ZSBvbiB0aGUgbW9iaWxlIG5hbWVzcGFjZS5cclxuXHRcdGlzUHVzaFN0YXRlRW5hYmxlZDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHJldHVybiAkLnN1cHBvcnQucHVzaFN0YXRlICYmXHJcblx0XHRcdFx0JC5tb2JpbGUucHVzaFN0YXRlRW5hYmxlZCA9PT0gdHJ1ZSAmJlxyXG5cdFx0XHRcdHRoaXMuaXNIYXNoQ2hhbmdlRW5hYmxlZCgpO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvLyAhISBhc3N1bWVzIG1vYmlsZSBuYW1lc3BhY2UgaXMgcHJlc2VudFxyXG5cdFx0aXNIYXNoQ2hhbmdlRW5hYmxlZDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHJldHVybiAkLm1vYmlsZS5oYXNoTGlzdGVuaW5nRW5hYmxlZCA9PT0gdHJ1ZTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gVE9ETyBhIGxvdCBvZiBkdXBsaWNhdGlvbiBiZXR3ZWVuIHBvcHN0YXRlIGFuZCBoYXNoY2hhbmdlXHJcblx0XHRwb3BzdGF0ZTogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0XHR2YXIgbmV3RXZlbnQgPSBuZXcgJC5FdmVudCggXCJuYXZpZ2F0ZVwiICksXHJcblx0XHRcdFx0YmVmb3JlTmF2aWdhdGUgPSBuZXcgJC5FdmVudCggXCJiZWZvcmVuYXZpZ2F0ZVwiICksXHJcblx0XHRcdFx0c3RhdGUgPSBldmVudC5vcmlnaW5hbEV2ZW50LnN0YXRlIHx8IHt9O1xyXG5cclxuXHRcdFx0YmVmb3JlTmF2aWdhdGUub3JpZ2luYWxFdmVudCA9IGV2ZW50O1xyXG5cdFx0XHQkd2luLnRyaWdnZXIoIGJlZm9yZU5hdmlnYXRlICk7XHJcblxyXG5cdFx0XHRpZiAoIGJlZm9yZU5hdmlnYXRlLmlzRGVmYXVsdFByZXZlbnRlZCgpICkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKCBldmVudC5oaXN0b3J5U3RhdGUgKSB7XHJcblx0XHRcdFx0JC5leHRlbmQoc3RhdGUsIGV2ZW50Lmhpc3RvcnlTdGF0ZSk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIE1ha2Ugc3VyZSB0aGUgb3JpZ2luYWwgZXZlbnQgaXMgdHJhY2tlZCBmb3IgdGhlIGVuZFxyXG5cdFx0XHQvLyB1c2VyIHRvIGluc3BlY3QgaW5jYXNlIHRoZXkgd2FudCB0byBkbyBzb21ldGhpbmcgc3BlY2lhbFxyXG5cdFx0XHRuZXdFdmVudC5vcmlnaW5hbEV2ZW50ID0gZXZlbnQ7XHJcblxyXG5cdFx0XHQvLyBOT1RFIHdlIGxldCB0aGUgY3VycmVudCBzdGFjayB1bndpbmQgYmVjYXVzZSBhbnkgYXNzaWdubWVudCB0b1xyXG5cdFx0XHQvLyAgICAgIGxvY2F0aW9uLmhhc2ggd2lsbCBzdG9wIHRoZSB3b3JsZCBhbmQgcnVuIHRoaXMgZXZlbnQgaGFuZGxlci4gQnlcclxuXHRcdFx0Ly8gICAgICBkb2luZyB0aGlzIHdlIGNyZWF0ZSBhIHNpbWlsYXIgYmVoYXZpb3IgdG8gaGFzaGNoYW5nZSBvbiBoYXNoXHJcblx0XHRcdC8vICAgICAgYXNzaWdubWVudFxyXG5cdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdCR3aW4udHJpZ2dlciggbmV3RXZlbnQsIHtcclxuXHRcdFx0XHRcdHN0YXRlOiBzdGF0ZVxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9LCAwKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0aGFzaGNoYW5nZTogZnVuY3Rpb24oIGV2ZW50IC8qLCBkYXRhICovICkge1xyXG5cdFx0XHR2YXIgbmV3RXZlbnQgPSBuZXcgJC5FdmVudCggXCJuYXZpZ2F0ZVwiICksXHJcblx0XHRcdFx0YmVmb3JlTmF2aWdhdGUgPSBuZXcgJC5FdmVudCggXCJiZWZvcmVuYXZpZ2F0ZVwiICk7XHJcblxyXG5cdFx0XHRiZWZvcmVOYXZpZ2F0ZS5vcmlnaW5hbEV2ZW50ID0gZXZlbnQ7XHJcblx0XHRcdCR3aW4udHJpZ2dlciggYmVmb3JlTmF2aWdhdGUgKTtcclxuXHJcblx0XHRcdGlmICggYmVmb3JlTmF2aWdhdGUuaXNEZWZhdWx0UHJldmVudGVkKCkgKSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBNYWtlIHN1cmUgdGhlIG9yaWdpbmFsIGV2ZW50IGlzIHRyYWNrZWQgZm9yIHRoZSBlbmRcclxuXHRcdFx0Ly8gdXNlciB0byBpbnNwZWN0IGluY2FzZSB0aGV5IHdhbnQgdG8gZG8gc29tZXRoaW5nIHNwZWNpYWxcclxuXHRcdFx0bmV3RXZlbnQub3JpZ2luYWxFdmVudCA9IGV2ZW50O1xyXG5cclxuXHRcdFx0Ly8gVHJpZ2dlciB0aGUgaGFzaGNoYW5nZSB3aXRoIHN0YXRlIHByb3ZpZGVkIGJ5IHRoZSB1c2VyXHJcblx0XHRcdC8vIHRoYXQgYWx0ZXJlZCB0aGUgaGFzaFxyXG5cdFx0XHQkd2luLnRyaWdnZXIoIG5ld0V2ZW50LCB7XHJcblx0XHRcdFx0Ly8gVXNlcnMgdGhhdCB3YW50IHRvIGZ1bGx5IG5vcm1hbGl6ZSB0aGUgdHdvIGV2ZW50c1xyXG5cdFx0XHRcdC8vIHdpbGwgbmVlZCB0byBkbyBoaXN0b3J5IG1hbmFnZW1lbnQgZG93biB0aGUgc3RhY2sgYW5kXHJcblx0XHRcdFx0Ly8gYWRkIHRoZSBzdGF0ZSB0byB0aGUgZXZlbnQgYmVmb3JlIHRoaXMgYmluZGluZyBpcyBmaXJlZFxyXG5cdFx0XHRcdC8vIFRPRE8gY29uc2lkZXIgYWxsb3dpbmcgZm9yIHRoZSBleHBsaWNpdCBhZGRpdGlvbiBvZiBjYWxsYmFja3NcclxuXHRcdFx0XHQvLyAgICAgIHRvIGJlIGZpcmVkIGJlZm9yZSB0aGlzIHZhbHVlIGlzIHNldCB0byBhdm9pZCBldmVudCB0aW1pbmcgaXNzdWVzXHJcblx0XHRcdFx0c3RhdGU6IGV2ZW50Lmhhc2hjaGFuZ2VTdGF0ZSB8fCB7fVxyXG5cdFx0XHR9KTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gVE9ETyBXZSByZWFsbHkgb25seSB3YW50IHRvIHNldCB0aGlzIHVwIG9uY2VcclxuXHRcdC8vICAgICAgYnV0IEknbSBub3QgY2xlYXIgaWYgdGhlcmUncyBhIGJldGVyIHdheSB0byBhY2hpZXZlXHJcblx0XHQvLyAgICAgIHRoaXMgd2l0aCB0aGUgalF1ZXJ5IHNwZWNpYWwgZXZlbnQgc3RydWN0dXJlXHJcblx0XHRzZXR1cDogZnVuY3Rpb24oIC8qIGRhdGEsIG5hbWVzcGFjZXMgKi8gKSB7XHJcblx0XHRcdGlmICggc2VsZi5ib3VuZCApIHtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHNlbGYuYm91bmQgPSB0cnVlO1xyXG5cclxuXHRcdFx0aWYgKCBzZWxmLmlzUHVzaFN0YXRlRW5hYmxlZCgpICkge1xyXG5cdFx0XHRcdHNlbGYub3JpZ2luYWxFdmVudE5hbWUgPSBcInBvcHN0YXRlXCI7XHJcblx0XHRcdFx0JHdpbi5iaW5kKCBcInBvcHN0YXRlLm5hdmlnYXRlXCIsIHNlbGYucG9wc3RhdGUgKTtcclxuXHRcdFx0fSBlbHNlIGlmICggc2VsZi5pc0hhc2hDaGFuZ2VFbmFibGVkKCkgKSB7XHJcblx0XHRcdFx0c2VsZi5vcmlnaW5hbEV2ZW50TmFtZSA9IFwiaGFzaGNoYW5nZVwiO1xyXG5cdFx0XHRcdCR3aW4uYmluZCggXCJoYXNoY2hhbmdlLm5hdmlnYXRlXCIsIHNlbGYuaGFzaGNoYW5nZSApO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fTtcclxufSkoIGpRdWVyeSApO1xyXG5cclxuXHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHRcdHZhciBwYXRoLCAkYmFzZSwgZGlhbG9nSGFzaEtleSA9IFwiJnVpLXN0YXRlPWRpYWxvZ1wiO1xyXG5cclxuXHRcdCQubW9iaWxlLnBhdGggPSBwYXRoID0ge1xyXG5cdFx0XHR1aVN0YXRlS2V5OiBcIiZ1aS1zdGF0ZVwiLFxyXG5cclxuXHRcdFx0Ly8gVGhpcyBzY2FyeSBsb29raW5nIHJlZ3VsYXIgZXhwcmVzc2lvbiBwYXJzZXMgYW4gYWJzb2x1dGUgVVJMIG9yIGl0cyByZWxhdGl2ZVxyXG5cdFx0XHQvLyB2YXJpYW50cyAocHJvdG9jb2wsIHNpdGUsIGRvY3VtZW50LCBxdWVyeSwgYW5kIGhhc2gpLCBpbnRvIHRoZSB2YXJpb3VzXHJcblx0XHRcdC8vIGNvbXBvbmVudHMgKHByb3RvY29sLCBob3N0LCBwYXRoLCBxdWVyeSwgZnJhZ21lbnQsIGV0YyB0aGF0IG1ha2UgdXAgdGhlXHJcblx0XHRcdC8vIFVSTCBhcyB3ZWxsIGFzIHNvbWUgb3RoZXIgY29tbW9ubHkgdXNlZCBzdWItcGFydHMuIFdoZW4gdXNlZCB3aXRoIFJlZ0V4cC5leGVjKClcclxuXHRcdFx0Ly8gb3IgU3RyaW5nLm1hdGNoLCBpdCBwYXJzZXMgdGhlIFVSTCBpbnRvIGEgcmVzdWx0cyBhcnJheSB0aGF0IGxvb2tzIGxpa2UgdGhpczpcclxuXHRcdFx0Ly9cclxuXHRcdFx0Ly8gICAgIFswXTogaHR0cDovL2pibGFzOnBhc3N3b3JkQG15Y29tcGFueS5jb206ODA4MC9tYWlsL2luYm94P21zZz0xMjM0JnR5cGU9dW5yZWFkI21zZy1jb250ZW50XHJcblx0XHRcdC8vICAgICBbMV06IGh0dHA6Ly9qYmxhczpwYXNzd29yZEBteWNvbXBhbnkuY29tOjgwODAvbWFpbC9pbmJveD9tc2c9MTIzNCZ0eXBlPXVucmVhZFxyXG5cdFx0XHQvLyAgICAgWzJdOiBodHRwOi8vamJsYXM6cGFzc3dvcmRAbXljb21wYW55LmNvbTo4MDgwL21haWwvaW5ib3hcclxuXHRcdFx0Ly8gICAgIFszXTogaHR0cDovL2pibGFzOnBhc3N3b3JkQG15Y29tcGFueS5jb206ODA4MFxyXG5cdFx0XHQvLyAgICAgWzRdOiBodHRwOlxyXG5cdFx0XHQvLyAgICAgWzVdOiAvL1xyXG5cdFx0XHQvLyAgICAgWzZdOiBqYmxhczpwYXNzd29yZEBteWNvbXBhbnkuY29tOjgwODBcclxuXHRcdFx0Ly8gICAgIFs3XTogamJsYXM6cGFzc3dvcmRcclxuXHRcdFx0Ly8gICAgIFs4XTogamJsYXNcclxuXHRcdFx0Ly8gICAgIFs5XTogcGFzc3dvcmRcclxuXHRcdFx0Ly8gICAgWzEwXTogbXljb21wYW55LmNvbTo4MDgwXHJcblx0XHRcdC8vICAgIFsxMV06IG15Y29tcGFueS5jb21cclxuXHRcdFx0Ly8gICAgWzEyXTogODA4MFxyXG5cdFx0XHQvLyAgICBbMTNdOiAvbWFpbC9pbmJveFxyXG5cdFx0XHQvLyAgICBbMTRdOiAvbWFpbC9cclxuXHRcdFx0Ly8gICAgWzE1XTogaW5ib3hcclxuXHRcdFx0Ly8gICAgWzE2XTogP21zZz0xMjM0JnR5cGU9dW5yZWFkXHJcblx0XHRcdC8vICAgIFsxN106ICNtc2ctY29udGVudFxyXG5cdFx0XHQvL1xyXG5cdFx0XHR1cmxQYXJzZVJFOiAvXlxccyooKCgoW146XFwvI1xcP10rOik/KD86KFxcL1xcLykoKD86KChbXjpAXFwvI1xcP10rKSg/OlxcOihbXjpAXFwvI1xcP10rKSk/KUApPygoW146XFwvI1xcP1xcXVxcW10rfFxcW1teXFwvXFxdQCM/XStcXF0pKD86XFw6KFswLTldKykpPykpPyk/KT8oKFxcLz8oPzpbXlxcL1xcPyNdK1xcLyspKikoW15cXD8jXSopKSk/KFxcP1teI10rKT8pKCMuKik/LyxcclxuXHJcblx0XHRcdC8vIEFic3RyYWN0aW9uIHRvIGFkZHJlc3MgeHNzIChJc3N1ZSAjNDc4NykgYnkgcmVtb3ZpbmcgdGhlIGF1dGhvcml0eSBpblxyXG5cdFx0XHQvLyBicm93c2VycyB0aGF0IGF1dG8tZGVjb2RlIGl0LiBBbGwgcmVmZXJlbmNlcyB0byBsb2NhdGlvbi5ocmVmIHNob3VsZCBiZVxyXG5cdFx0XHQvLyByZXBsYWNlZCB3aXRoIGEgY2FsbCB0byB0aGlzIG1ldGhvZCBzbyB0aGF0IGl0IGNhbiBiZSBkZWFsdCB3aXRoIHByb3Blcmx5IGhlcmVcclxuXHRcdFx0Z2V0TG9jYXRpb246IGZ1bmN0aW9uKCB1cmwgKSB7XHJcblx0XHRcdFx0dmFyIHBhcnNlZFVybCA9IHRoaXMucGFyc2VVcmwoIHVybCB8fCBsb2NhdGlvbi5ocmVmICksXHJcblx0XHRcdFx0XHR1cmkgPSB1cmwgPyBwYXJzZWRVcmwgOiBsb2NhdGlvbixcclxuXHJcblx0XHRcdFx0XHQvLyBNYWtlIHN1cmUgdG8gcGFyc2UgdGhlIHVybCBvciB0aGUgbG9jYXRpb24gb2JqZWN0IGZvciB0aGUgaGFzaCBiZWNhdXNlIHVzaW5nXHJcblx0XHRcdFx0XHQvLyBsb2NhdGlvbi5oYXNoIGlzIGF1dG9kZWNvZGVkIGluIGZpcmVmb3gsIHRoZSByZXN0IG9mIHRoZSB1cmwgc2hvdWxkIGJlIGZyb21cclxuXHRcdFx0XHRcdC8vIHRoZSBvYmplY3QgKGxvY2F0aW9uIHVubGVzcyB3ZSdyZSB0ZXN0aW5nKSB0byBhdm9pZCB0aGUgaW5jbHVzaW9uIG9mIHRoZVxyXG5cdFx0XHRcdFx0Ly8gYXV0aG9yaXR5XHJcblx0XHRcdFx0XHRoYXNoID0gcGFyc2VkVXJsLmhhc2g7XHJcblxyXG5cdFx0XHRcdC8vIG1pbWljIHRoZSBicm93c2VyIHdpdGggYW4gZW1wdHkgc3RyaW5nIHdoZW4gdGhlIGhhc2ggaXMgZW1wdHlcclxuXHRcdFx0XHRoYXNoID0gaGFzaCA9PT0gXCIjXCIgPyBcIlwiIDogaGFzaDtcclxuXHJcblx0XHRcdFx0cmV0dXJuIHVyaS5wcm90b2NvbCArXHJcblx0XHRcdFx0XHRwYXJzZWRVcmwuZG91YmxlU2xhc2ggK1xyXG5cdFx0XHRcdFx0dXJpLmhvc3QgK1xyXG5cclxuXHRcdFx0XHRcdC8vIFRoZSBwYXRobmFtZSBtdXN0IHN0YXJ0IHdpdGggYSBzbGFzaCBpZiB0aGVyZSdzIGEgcHJvdG9jb2wsIGJlY2F1c2UgeW91XHJcblx0XHRcdFx0XHQvLyBjYW4ndCBoYXZlIGEgcHJvdG9jb2wgZm9sbG93ZWQgYnkgYSByZWxhdGl2ZSBwYXRoLiBBbHNvLCBpdCdzIGltcG9zc2libGUgdG9cclxuXHRcdFx0XHRcdC8vIGNhbGN1bGF0ZSBhYnNvbHV0ZSBVUkxzIGZyb20gcmVsYXRpdmUgb25lcyBpZiB0aGUgYWJzb2x1dGUgb25lIGRvZXNuJ3QgaGF2ZVxyXG5cdFx0XHRcdFx0Ly8gYSBsZWFkaW5nIFwiL1wiLlxyXG5cdFx0XHRcdFx0KCAoIHVyaS5wcm90b2NvbCAhPT0gXCJcIiAmJiB1cmkucGF0aG5hbWUuc3Vic3RyaW5nKCAwLCAxICkgIT09IFwiL1wiICkgP1xyXG5cdFx0XHRcdFx0XHRcIi9cIiA6IFwiXCIgKSArXHJcblx0XHRcdFx0XHR1cmkucGF0aG5hbWUgK1xyXG5cdFx0XHRcdFx0dXJpLnNlYXJjaCArXHJcblx0XHRcdFx0XHRoYXNoO1xyXG5cdFx0XHR9LFxyXG5cclxuXHRcdFx0Ly9yZXR1cm4gdGhlIG9yaWdpbmFsIGRvY3VtZW50IHVybFxyXG5cdFx0XHRnZXREb2N1bWVudFVybDogZnVuY3Rpb24oIGFzUGFyc2VkT2JqZWN0ICkge1xyXG5cdFx0XHRcdHJldHVybiBhc1BhcnNlZE9iamVjdCA/ICQuZXh0ZW5kKCB7fSwgcGF0aC5kb2N1bWVudFVybCApIDogcGF0aC5kb2N1bWVudFVybC5ocmVmO1xyXG5cdFx0XHR9LFxyXG5cclxuXHRcdFx0cGFyc2VMb2NhdGlvbjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0cmV0dXJuIHRoaXMucGFyc2VVcmwoIHRoaXMuZ2V0TG9jYXRpb24oKSApO1xyXG5cdFx0XHR9LFxyXG5cclxuXHRcdFx0Ly9QYXJzZSBhIFVSTCBpbnRvIGEgc3RydWN0dXJlIHRoYXQgYWxsb3dzIGVhc3kgYWNjZXNzIHRvXHJcblx0XHRcdC8vYWxsIG9mIHRoZSBVUkwgY29tcG9uZW50cyBieSBuYW1lLlxyXG5cdFx0XHRwYXJzZVVybDogZnVuY3Rpb24oIHVybCApIHtcclxuXHRcdFx0XHQvLyBJZiB3ZSdyZSBwYXNzZWQgYW4gb2JqZWN0LCB3ZSdsbCBhc3N1bWUgdGhhdCBpdCBpc1xyXG5cdFx0XHRcdC8vIGEgcGFyc2VkIHVybCBvYmplY3QgYW5kIGp1c3QgcmV0dXJuIGl0IGJhY2sgdG8gdGhlIGNhbGxlci5cclxuXHRcdFx0XHRpZiAoICQudHlwZSggdXJsICkgPT09IFwib2JqZWN0XCIgKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gdXJsO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0dmFyIG1hdGNoZXMgPSBwYXRoLnVybFBhcnNlUkUuZXhlYyggdXJsIHx8IFwiXCIgKSB8fCBbXTtcclxuXHJcblx0XHRcdFx0XHQvLyBDcmVhdGUgYW4gb2JqZWN0IHRoYXQgYWxsb3dzIHRoZSBjYWxsZXIgdG8gYWNjZXNzIHRoZSBzdWItbWF0Y2hlc1xyXG5cdFx0XHRcdFx0Ly8gYnkgbmFtZS4gTm90ZSB0aGF0IElFIHJldHVybnMgYW4gZW1wdHkgc3RyaW5nIGluc3RlYWQgb2YgdW5kZWZpbmVkLFxyXG5cdFx0XHRcdFx0Ly8gbGlrZSBhbGwgb3RoZXIgYnJvd3NlcnMgZG8sIHNvIHdlIG5vcm1hbGl6ZSBldmVyeXRoaW5nIHNvIGl0cyBjb25zaXN0ZW50XHJcblx0XHRcdFx0XHQvLyBubyBtYXR0ZXIgd2hhdCBicm93c2VyIHdlJ3JlIHJ1bm5pbmcgb24uXHJcblx0XHRcdFx0XHRyZXR1cm4ge1xyXG5cdFx0XHRcdFx0XHRocmVmOiAgICAgICAgIG1hdGNoZXNbICAwIF0gfHwgXCJcIixcclxuXHRcdFx0XHRcdFx0aHJlZk5vSGFzaDogICBtYXRjaGVzWyAgMSBdIHx8IFwiXCIsXHJcblx0XHRcdFx0XHRcdGhyZWZOb1NlYXJjaDogbWF0Y2hlc1sgIDIgXSB8fCBcIlwiLFxyXG5cdFx0XHRcdFx0XHRkb21haW46ICAgICAgIG1hdGNoZXNbICAzIF0gfHwgXCJcIixcclxuXHRcdFx0XHRcdFx0cHJvdG9jb2w6ICAgICBtYXRjaGVzWyAgNCBdIHx8IFwiXCIsXHJcblx0XHRcdFx0XHRcdGRvdWJsZVNsYXNoOiAgbWF0Y2hlc1sgIDUgXSB8fCBcIlwiLFxyXG5cdFx0XHRcdFx0XHRhdXRob3JpdHk6ICAgIG1hdGNoZXNbICA2IF0gfHwgXCJcIixcclxuXHRcdFx0XHRcdFx0dXNlcm5hbWU6ICAgICBtYXRjaGVzWyAgOCBdIHx8IFwiXCIsXHJcblx0XHRcdFx0XHRcdHBhc3N3b3JkOiAgICAgbWF0Y2hlc1sgIDkgXSB8fCBcIlwiLFxyXG5cdFx0XHRcdFx0XHRob3N0OiAgICAgICAgIG1hdGNoZXNbIDEwIF0gfHwgXCJcIixcclxuXHRcdFx0XHRcdFx0aG9zdG5hbWU6ICAgICBtYXRjaGVzWyAxMSBdIHx8IFwiXCIsXHJcblx0XHRcdFx0XHRcdHBvcnQ6ICAgICAgICAgbWF0Y2hlc1sgMTIgXSB8fCBcIlwiLFxyXG5cdFx0XHRcdFx0XHRwYXRobmFtZTogICAgIG1hdGNoZXNbIDEzIF0gfHwgXCJcIixcclxuXHRcdFx0XHRcdFx0ZGlyZWN0b3J5OiAgICBtYXRjaGVzWyAxNCBdIHx8IFwiXCIsXHJcblx0XHRcdFx0XHRcdGZpbGVuYW1lOiAgICAgbWF0Y2hlc1sgMTUgXSB8fCBcIlwiLFxyXG5cdFx0XHRcdFx0XHRzZWFyY2g6ICAgICAgIG1hdGNoZXNbIDE2IF0gfHwgXCJcIixcclxuXHRcdFx0XHRcdFx0aGFzaDogICAgICAgICBtYXRjaGVzWyAxNyBdIHx8IFwiXCJcclxuXHRcdFx0XHRcdH07XHJcblx0XHRcdH0sXHJcblxyXG5cdFx0XHQvL1R1cm4gcmVsUGF0aCBpbnRvIGFuIGFzYm9sdXRlIHBhdGguIGFic1BhdGggaXNcclxuXHRcdFx0Ly9hbiBvcHRpb25hbCBhYnNvbHV0ZSBwYXRoIHdoaWNoIGRlc2NyaWJlcyB3aGF0XHJcblx0XHRcdC8vcmVsUGF0aCBpcyByZWxhdGl2ZSB0by5cclxuXHRcdFx0bWFrZVBhdGhBYnNvbHV0ZTogZnVuY3Rpb24oIHJlbFBhdGgsIGFic1BhdGggKSB7XHJcblx0XHRcdFx0dmFyIGFic1N0YWNrLFxyXG5cdFx0XHRcdFx0cmVsU3RhY2ssXHJcblx0XHRcdFx0XHRpLCBkO1xyXG5cclxuXHRcdFx0XHRpZiAoIHJlbFBhdGggJiYgcmVsUGF0aC5jaGFyQXQoIDAgKSA9PT0gXCIvXCIgKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gcmVsUGF0aDtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdHJlbFBhdGggPSByZWxQYXRoIHx8IFwiXCI7XHJcblx0XHRcdFx0YWJzUGF0aCA9IGFic1BhdGggPyBhYnNQYXRoLnJlcGxhY2UoIC9eXFwvfChcXC9bXlxcL10qfFteXFwvXSspJC9nLCBcIlwiICkgOiBcIlwiO1xyXG5cclxuXHRcdFx0XHRhYnNTdGFjayA9IGFic1BhdGggPyBhYnNQYXRoLnNwbGl0KCBcIi9cIiApIDogW107XHJcblx0XHRcdFx0cmVsU3RhY2sgPSByZWxQYXRoLnNwbGl0KCBcIi9cIiApO1xyXG5cclxuXHRcdFx0XHRmb3IgKCBpID0gMDsgaSA8IHJlbFN0YWNrLmxlbmd0aDsgaSsrICkge1xyXG5cdFx0XHRcdFx0ZCA9IHJlbFN0YWNrWyBpIF07XHJcblx0XHRcdFx0XHRzd2l0Y2ggKCBkICkge1xyXG5cdFx0XHRcdFx0XHRjYXNlIFwiLlwiOlxyXG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0XHRjYXNlIFwiLi5cIjpcclxuXHRcdFx0XHRcdFx0XHRpZiAoIGFic1N0YWNrLmxlbmd0aCApIHtcclxuXHRcdFx0XHRcdFx0XHRcdGFic1N0YWNrLnBvcCgpO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdFx0ZGVmYXVsdDpcclxuXHRcdFx0XHRcdFx0XHRhYnNTdGFjay5wdXNoKCBkICk7XHJcblx0XHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHJldHVybiBcIi9cIiArIGFic1N0YWNrLmpvaW4oIFwiL1wiICk7XHJcblx0XHRcdH0sXHJcblxyXG5cdFx0XHQvL1JldHVybnMgdHJ1ZSBpZiBib3RoIHVybHMgaGF2ZSB0aGUgc2FtZSBkb21haW4uXHJcblx0XHRcdGlzU2FtZURvbWFpbjogZnVuY3Rpb24oIGFic1VybDEsIGFic1VybDIgKSB7XHJcblx0XHRcdFx0cmV0dXJuIHBhdGgucGFyc2VVcmwoIGFic1VybDEgKS5kb21haW4udG9Mb3dlckNhc2UoKSA9PT1cclxuXHRcdFx0XHRcdHBhdGgucGFyc2VVcmwoIGFic1VybDIgKS5kb21haW4udG9Mb3dlckNhc2UoKTtcclxuXHRcdFx0fSxcclxuXHJcblx0XHRcdC8vUmV0dXJucyB0cnVlIGZvciBhbnkgcmVsYXRpdmUgdmFyaWFudC5cclxuXHRcdFx0aXNSZWxhdGl2ZVVybDogZnVuY3Rpb24oIHVybCApIHtcclxuXHRcdFx0XHQvLyBBbGwgcmVsYXRpdmUgVXJsIHZhcmlhbnRzIGhhdmUgb25lIHRoaW5nIGluIGNvbW1vbiwgbm8gcHJvdG9jb2wuXHJcblx0XHRcdFx0cmV0dXJuIHBhdGgucGFyc2VVcmwoIHVybCApLnByb3RvY29sID09PSBcIlwiO1xyXG5cdFx0XHR9LFxyXG5cclxuXHRcdFx0Ly9SZXR1cm5zIHRydWUgZm9yIGFuIGFic29sdXRlIHVybC5cclxuXHRcdFx0aXNBYnNvbHV0ZVVybDogZnVuY3Rpb24oIHVybCApIHtcclxuXHRcdFx0XHRyZXR1cm4gcGF0aC5wYXJzZVVybCggdXJsICkucHJvdG9jb2wgIT09IFwiXCI7XHJcblx0XHRcdH0sXHJcblxyXG5cdFx0XHQvL1R1cm4gdGhlIHNwZWNpZmllZCByZWFsdGl2ZSBVUkwgaW50byBhbiBhYnNvbHV0ZSBvbmUuIFRoaXMgZnVuY3Rpb25cclxuXHRcdFx0Ly9jYW4gaGFuZGxlIGFsbCByZWxhdGl2ZSB2YXJpYW50cyAocHJvdG9jb2wsIHNpdGUsIGRvY3VtZW50LCBxdWVyeSwgZnJhZ21lbnQpLlxyXG5cdFx0XHRtYWtlVXJsQWJzb2x1dGU6IGZ1bmN0aW9uKCByZWxVcmwsIGFic1VybCApIHtcclxuXHRcdFx0XHRpZiAoICFwYXRoLmlzUmVsYXRpdmVVcmwoIHJlbFVybCApICkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIHJlbFVybDtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGlmICggYWJzVXJsID09PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdFx0XHRhYnNVcmwgPSB0aGlzLmRvY3VtZW50QmFzZTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdHZhciByZWxPYmogPSBwYXRoLnBhcnNlVXJsKCByZWxVcmwgKSxcclxuXHRcdFx0XHRcdGFic09iaiA9IHBhdGgucGFyc2VVcmwoIGFic1VybCApLFxyXG5cdFx0XHRcdFx0cHJvdG9jb2wgPSByZWxPYmoucHJvdG9jb2wgfHwgYWJzT2JqLnByb3RvY29sLFxyXG5cdFx0XHRcdFx0ZG91YmxlU2xhc2ggPSByZWxPYmoucHJvdG9jb2wgPyByZWxPYmouZG91YmxlU2xhc2ggOiAoIHJlbE9iai5kb3VibGVTbGFzaCB8fCBhYnNPYmouZG91YmxlU2xhc2ggKSxcclxuXHRcdFx0XHRcdGF1dGhvcml0eSA9IHJlbE9iai5hdXRob3JpdHkgfHwgYWJzT2JqLmF1dGhvcml0eSxcclxuXHRcdFx0XHRcdGhhc1BhdGggPSByZWxPYmoucGF0aG5hbWUgIT09IFwiXCIsXHJcblx0XHRcdFx0XHRwYXRobmFtZSA9IHBhdGgubWFrZVBhdGhBYnNvbHV0ZSggcmVsT2JqLnBhdGhuYW1lIHx8IGFic09iai5maWxlbmFtZSwgYWJzT2JqLnBhdGhuYW1lICksXHJcblx0XHRcdFx0XHRzZWFyY2ggPSByZWxPYmouc2VhcmNoIHx8ICggIWhhc1BhdGggJiYgYWJzT2JqLnNlYXJjaCApIHx8IFwiXCIsXHJcblx0XHRcdFx0XHRoYXNoID0gcmVsT2JqLmhhc2g7XHJcblxyXG5cdFx0XHRcdHJldHVybiBwcm90b2NvbCArIGRvdWJsZVNsYXNoICsgYXV0aG9yaXR5ICsgcGF0aG5hbWUgKyBzZWFyY2ggKyBoYXNoO1xyXG5cdFx0XHR9LFxyXG5cclxuXHRcdFx0Ly9BZGQgc2VhcmNoIChha2EgcXVlcnkpIHBhcmFtcyB0byB0aGUgc3BlY2lmaWVkIHVybC5cclxuXHRcdFx0YWRkU2VhcmNoUGFyYW1zOiBmdW5jdGlvbiggdXJsLCBwYXJhbXMgKSB7XHJcblx0XHRcdFx0dmFyIHUgPSBwYXRoLnBhcnNlVXJsKCB1cmwgKSxcclxuXHRcdFx0XHRcdHAgPSAoIHR5cGVvZiBwYXJhbXMgPT09IFwib2JqZWN0XCIgKSA/ICQucGFyYW0oIHBhcmFtcyApIDogcGFyYW1zLFxyXG5cdFx0XHRcdFx0cyA9IHUuc2VhcmNoIHx8IFwiP1wiO1xyXG5cdFx0XHRcdHJldHVybiB1LmhyZWZOb1NlYXJjaCArIHMgKyAoIHMuY2hhckF0KCBzLmxlbmd0aCAtIDEgKSAhPT0gXCI/XCIgPyBcIiZcIiA6IFwiXCIgKSArIHAgKyAoIHUuaGFzaCB8fCBcIlwiICk7XHJcblx0XHRcdH0sXHJcblxyXG5cdFx0XHRjb252ZXJ0VXJsVG9EYXRhVXJsOiBmdW5jdGlvbiggYWJzVXJsICkge1xyXG5cdFx0XHRcdHZhciByZXN1bHQgPSBhYnNVcmwsXHJcblx0XHRcdFx0XHR1ID0gcGF0aC5wYXJzZVVybCggYWJzVXJsICk7XHJcblxyXG5cdFx0XHRcdGlmICggcGF0aC5pc0VtYmVkZGVkUGFnZSggdSApICkge1xyXG5cdFx0XHRcdFx0Ly8gRm9yIGVtYmVkZGVkIHBhZ2VzLCByZW1vdmUgdGhlIGRpYWxvZyBoYXNoIGtleSBhcyBpbiBnZXRGaWxlUGF0aCgpLFxyXG5cdFx0XHRcdFx0Ly8gYW5kIHJlbW92ZSBvdGhlcndpc2UgdGhlIERhdGEgVXJsIHdvbid0IG1hdGNoIHRoZSBpZCBvZiB0aGUgZW1iZWRkZWQgUGFnZS5cclxuXHRcdFx0XHRcdHJlc3VsdCA9IHUuaGFzaFxyXG5cdFx0XHRcdFx0XHQuc3BsaXQoIGRpYWxvZ0hhc2hLZXkgKVswXVxyXG5cdFx0XHRcdFx0XHQucmVwbGFjZSggL14jLywgXCJcIiApXHJcblx0XHRcdFx0XHRcdC5yZXBsYWNlKCAvXFw/LiokLywgXCJcIiApO1xyXG5cdFx0XHRcdH0gZWxzZSBpZiAoIHBhdGguaXNTYW1lRG9tYWluKCB1LCB0aGlzLmRvY3VtZW50QmFzZSApICkge1xyXG5cdFx0XHRcdFx0cmVzdWx0ID0gdS5ocmVmTm9IYXNoLnJlcGxhY2UoIHRoaXMuZG9jdW1lbnRCYXNlLmRvbWFpbiwgXCJcIiApLnNwbGl0KCBkaWFsb2dIYXNoS2V5IClbMF07XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRyZXR1cm4gd2luZG93LmRlY29kZVVSSUNvbXBvbmVudCggcmVzdWx0ICk7XHJcblx0XHRcdH0sXHJcblxyXG5cdFx0XHQvL2dldCBwYXRoIGZyb20gY3VycmVudCBoYXNoLCBvciBmcm9tIGEgZmlsZSBwYXRoXHJcblx0XHRcdGdldDogZnVuY3Rpb24oIG5ld1BhdGggKSB7XHJcblx0XHRcdFx0aWYgKCBuZXdQYXRoID09PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdFx0XHRuZXdQYXRoID0gcGF0aC5wYXJzZUxvY2F0aW9uKCkuaGFzaDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0cmV0dXJuIHBhdGguc3RyaXBIYXNoKCBuZXdQYXRoICkucmVwbGFjZSggL1teXFwvXSpcXC5bXlxcLypdKyQvLCBcIlwiICk7XHJcblx0XHRcdH0sXHJcblxyXG5cdFx0XHQvL3NldCBsb2NhdGlvbiBoYXNoIHRvIHBhdGhcclxuXHRcdFx0c2V0OiBmdW5jdGlvbiggcGF0aCApIHtcclxuXHRcdFx0XHRsb2NhdGlvbi5oYXNoID0gcGF0aDtcclxuXHRcdFx0fSxcclxuXHJcblx0XHRcdC8vdGVzdCBpZiBhIGdpdmVuIHVybCAoc3RyaW5nKSBpcyBhIHBhdGhcclxuXHRcdFx0Ly9OT1RFIG1pZ2h0IGJlIGV4Y2VwdGlvbmFsbHkgbmFpdmVcclxuXHRcdFx0aXNQYXRoOiBmdW5jdGlvbiggdXJsICkge1xyXG5cdFx0XHRcdHJldHVybiAoIC9cXC8vICkudGVzdCggdXJsICk7XHJcblx0XHRcdH0sXHJcblxyXG5cdFx0XHQvL3JldHVybiBhIHVybCBwYXRoIHdpdGggdGhlIHdpbmRvdydzIGxvY2F0aW9uIHByb3RvY29sL2hvc3RuYW1lL3BhdGhuYW1lIHJlbW92ZWRcclxuXHRcdFx0Y2xlYW46IGZ1bmN0aW9uKCB1cmwgKSB7XHJcblx0XHRcdFx0cmV0dXJuIHVybC5yZXBsYWNlKCB0aGlzLmRvY3VtZW50QmFzZS5kb21haW4sIFwiXCIgKTtcclxuXHRcdFx0fSxcclxuXHJcblx0XHRcdC8vanVzdCByZXR1cm4gdGhlIHVybCB3aXRob3V0IGFuIGluaXRpYWwgI1xyXG5cdFx0XHRzdHJpcEhhc2g6IGZ1bmN0aW9uKCB1cmwgKSB7XHJcblx0XHRcdFx0cmV0dXJuIHVybC5yZXBsYWNlKCAvXiMvLCBcIlwiICk7XHJcblx0XHRcdH0sXHJcblxyXG5cdFx0XHRzdHJpcFF1ZXJ5UGFyYW1zOiBmdW5jdGlvbiggdXJsICkge1xyXG5cdFx0XHRcdHJldHVybiB1cmwucmVwbGFjZSggL1xcPy4qJC8sIFwiXCIgKTtcclxuXHRcdFx0fSxcclxuXHJcblx0XHRcdC8vcmVtb3ZlIHRoZSBwcmVjZWRpbmcgaGFzaCwgYW55IHF1ZXJ5IHBhcmFtcywgYW5kIGRpYWxvZyBub3RhdGlvbnNcclxuXHRcdFx0Y2xlYW5IYXNoOiBmdW5jdGlvbiggaGFzaCApIHtcclxuXHRcdFx0XHRyZXR1cm4gcGF0aC5zdHJpcEhhc2goIGhhc2gucmVwbGFjZSggL1xcPy4qJC8sIFwiXCIgKS5yZXBsYWNlKCBkaWFsb2dIYXNoS2V5LCBcIlwiICkgKTtcclxuXHRcdFx0fSxcclxuXHJcblx0XHRcdGlzSGFzaFZhbGlkOiBmdW5jdGlvbiggaGFzaCApIHtcclxuXHRcdFx0XHRyZXR1cm4gKCAvXiNbXiNdKyQvICkudGVzdCggaGFzaCApO1xyXG5cdFx0XHR9LFxyXG5cclxuXHRcdFx0Ly9jaGVjayB3aGV0aGVyIGEgdXJsIGlzIHJlZmVyZW5jaW5nIHRoZSBzYW1lIGRvbWFpbiwgb3IgYW4gZXh0ZXJuYWwgZG9tYWluIG9yIGRpZmZlcmVudCBwcm90b2NvbFxyXG5cdFx0XHQvL2NvdWxkIGJlIG1haWx0bywgZXRjXHJcblx0XHRcdGlzRXh0ZXJuYWw6IGZ1bmN0aW9uKCB1cmwgKSB7XHJcblx0XHRcdFx0dmFyIHUgPSBwYXRoLnBhcnNlVXJsKCB1cmwgKTtcclxuXHJcblx0XHRcdFx0cmV0dXJuICEhKCB1LnByb3RvY29sICYmXHJcblx0XHRcdFx0XHQoIHUuZG9tYWluLnRvTG93ZXJDYXNlKCkgIT09IHRoaXMuZG9jdW1lbnRVcmwuZG9tYWluLnRvTG93ZXJDYXNlKCkgKSApO1xyXG5cdFx0XHR9LFxyXG5cclxuXHRcdFx0aGFzUHJvdG9jb2w6IGZ1bmN0aW9uKCB1cmwgKSB7XHJcblx0XHRcdFx0cmV0dXJuICggL14oOj9cXHcrOikvICkudGVzdCggdXJsICk7XHJcblx0XHRcdH0sXHJcblxyXG5cdFx0XHRpc0VtYmVkZGVkUGFnZTogZnVuY3Rpb24oIHVybCApIHtcclxuXHRcdFx0XHR2YXIgdSA9IHBhdGgucGFyc2VVcmwoIHVybCApO1xyXG5cclxuXHRcdFx0XHQvL2lmIHRoZSBwYXRoIGlzIGFic29sdXRlLCB0aGVuIHdlIG5lZWQgdG8gY29tcGFyZSB0aGUgdXJsIGFnYWluc3RcclxuXHRcdFx0XHQvL2JvdGggdGhlIHRoaXMuZG9jdW1lbnRVcmwgYW5kIHRoZSBkb2N1bWVudEJhc2UuIFRoZSBtYWluIHJlYXNvbiBmb3IgdGhpc1xyXG5cdFx0XHRcdC8vaXMgdGhhdCBsaW5rcyBlbWJlZGRlZCB3aXRoaW4gZXh0ZXJuYWwgZG9jdW1lbnRzIHdpbGwgcmVmZXIgdG8gdGhlXHJcblx0XHRcdFx0Ly9hcHBsaWNhdGlvbiBkb2N1bWVudCwgd2hlcmVhcyBsaW5rcyBlbWJlZGRlZCB3aXRoaW4gdGhlIGFwcGxpY2F0aW9uXHJcblx0XHRcdFx0Ly9kb2N1bWVudCB3aWxsIGJlIHJlc29sdmVkIGFnYWluc3QgdGhlIGRvY3VtZW50IGJhc2UuXHJcblx0XHRcdFx0aWYgKCB1LnByb3RvY29sICE9PSBcIlwiICkge1xyXG5cdFx0XHRcdFx0cmV0dXJuICggIXRoaXMuaXNQYXRoKHUuaGFzaCkgJiYgdS5oYXNoICYmICggdS5ocmVmTm9IYXNoID09PSB0aGlzLmRvY3VtZW50VXJsLmhyZWZOb0hhc2ggfHwgKCB0aGlzLmRvY3VtZW50QmFzZURpZmZlcnMgJiYgdS5ocmVmTm9IYXNoID09PSB0aGlzLmRvY3VtZW50QmFzZS5ocmVmTm9IYXNoICkgKSApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRyZXR1cm4gKCAvXiMvICkudGVzdCggdS5ocmVmICk7XHJcblx0XHRcdH0sXHJcblxyXG5cdFx0XHRzcXVhc2g6IGZ1bmN0aW9uKCB1cmwsIHJlc29sdXRpb25VcmwgKSB7XHJcblx0XHRcdFx0dmFyIGhyZWYsIGNsZWFuZWRVcmwsIHNlYXJjaCwgc3RhdGVJbmRleCwgZG9jVXJsLFxyXG5cdFx0XHRcdFx0aXNQYXRoID0gdGhpcy5pc1BhdGgoIHVybCApLFxyXG5cdFx0XHRcdFx0dXJpID0gdGhpcy5wYXJzZVVybCggdXJsICksXHJcblx0XHRcdFx0XHRwcmVzZXJ2ZWRIYXNoID0gdXJpLmhhc2gsXHJcblx0XHRcdFx0XHR1aVN0YXRlID0gXCJcIjtcclxuXHJcblx0XHRcdFx0Ly8gcHJvZHVjZSBhIHVybCBhZ2FpbnN0IHdoaWNoIHdlIGNhbiByZXNvbHZlIHRoZSBwcm92aWRlZCBwYXRoXHJcblx0XHRcdFx0aWYgKCAhcmVzb2x1dGlvblVybCApIHtcclxuXHRcdFx0XHRcdGlmICggaXNQYXRoICkge1xyXG5cdFx0XHRcdFx0XHRyZXNvbHV0aW9uVXJsID0gcGF0aC5nZXRMb2NhdGlvbigpO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0ZG9jVXJsID0gcGF0aC5nZXREb2N1bWVudFVybCggdHJ1ZSApO1xyXG5cdFx0XHRcdFx0XHRpZiAoIHBhdGguaXNQYXRoKCBkb2NVcmwuaGFzaCApICkge1xyXG5cdFx0XHRcdFx0XHRcdHJlc29sdXRpb25VcmwgPSBwYXRoLnNxdWFzaCggZG9jVXJsLmhyZWYgKTtcclxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0XHRyZXNvbHV0aW9uVXJsID0gZG9jVXJsLmhyZWY7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vIElmIHRoZSB1cmwgaXMgYW55dGhpbmcgYnV0IGEgc2ltcGxlIHN0cmluZywgcmVtb3ZlIGFueSBwcmVjZWRpbmcgaGFzaFxyXG5cdFx0XHRcdC8vIGVnICNmb28vYmFyIC0+IGZvby9iYXJcclxuXHRcdFx0XHQvLyAgICAjZm9vIC0+ICNmb29cclxuXHRcdFx0XHRjbGVhbmVkVXJsID0gaXNQYXRoID8gcGF0aC5zdHJpcEhhc2goIHVybCApIDogdXJsO1xyXG5cclxuXHRcdFx0XHQvLyBJZiB0aGUgdXJsIGlzIGEgZnVsbCB1cmwgd2l0aCBhIGhhc2ggY2hlY2sgaWYgdGhlIHBhcnNlZCBoYXNoIGlzIGEgcGF0aFxyXG5cdFx0XHRcdC8vIGlmIGl0IGlzLCBzdHJpcCB0aGUgIywgYW5kIHVzZSBpdCBvdGhlcndpc2UgY29udGludWUgd2l0aG91dCBjaGFuZ2VcclxuXHRcdFx0XHRjbGVhbmVkVXJsID0gcGF0aC5pc1BhdGgoIHVyaS5oYXNoICkgPyBwYXRoLnN0cmlwSGFzaCggdXJpLmhhc2ggKSA6IGNsZWFuZWRVcmw7XHJcblxyXG5cdFx0XHRcdC8vIFNwbGl0IHRoZSBVSSBTdGF0ZSBrZXlzIG9mZiB0aGUgaHJlZlxyXG5cdFx0XHRcdHN0YXRlSW5kZXggPSBjbGVhbmVkVXJsLmluZGV4T2YoIHRoaXMudWlTdGF0ZUtleSApO1xyXG5cclxuXHRcdFx0XHQvLyBzdG9yZSB0aGUgdWkgc3RhdGUga2V5cyBmb3IgdXNlXHJcblx0XHRcdFx0aWYgKCBzdGF0ZUluZGV4ID4gLTEgKSB7XHJcblx0XHRcdFx0XHR1aVN0YXRlID0gY2xlYW5lZFVybC5zbGljZSggc3RhdGVJbmRleCApO1xyXG5cdFx0XHRcdFx0Y2xlYW5lZFVybCA9IGNsZWFuZWRVcmwuc2xpY2UoIDAsIHN0YXRlSW5kZXggKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vIG1ha2UgdGhlIGNsZWFuZWRVcmwgYWJzb2x1dGUgcmVsYXRpdmUgdG8gdGhlIHJlc29sdXRpb24gdXJsXHJcblx0XHRcdFx0aHJlZiA9IHBhdGgubWFrZVVybEFic29sdXRlKCBjbGVhbmVkVXJsLCByZXNvbHV0aW9uVXJsICk7XHJcblxyXG5cdFx0XHRcdC8vIGdyYWIgdGhlIHNlYXJjaCBmcm9tIHRoZSByZXNvbHZlZCB1cmwgc2luY2UgcGFyc2luZyBmcm9tXHJcblx0XHRcdFx0Ly8gdGhlIHBhc3NlZCB1cmwgbWF5IG5vdCB5aWVsZCB0aGUgY29ycmVjdCByZXN1bHRcclxuXHRcdFx0XHRzZWFyY2ggPSB0aGlzLnBhcnNlVXJsKCBocmVmICkuc2VhcmNoO1xyXG5cclxuXHRcdFx0XHQvLyBUT0RPIGFsbCB0aGlzIGNyYXAgaXMgdGVycmlibGUsIGNsZWFuIGl0IHVwXHJcblx0XHRcdFx0aWYgKCBpc1BhdGggKSB7XHJcblx0XHRcdFx0XHQvLyByZWplY3QgdGhlIGhhc2ggaWYgaXQncyBhIHBhdGggb3IgaXQncyBqdXN0IGEgZGlhbG9nIGtleVxyXG5cdFx0XHRcdFx0aWYgKCBwYXRoLmlzUGF0aCggcHJlc2VydmVkSGFzaCApIHx8IHByZXNlcnZlZEhhc2gucmVwbGFjZShcIiNcIiwgXCJcIikuaW5kZXhPZiggdGhpcy51aVN0YXRlS2V5ICkgPT09IDApIHtcclxuXHRcdFx0XHRcdFx0cHJlc2VydmVkSGFzaCA9IFwiXCI7XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0Ly8gQXBwZW5kIHRoZSBVSSBTdGF0ZSBrZXlzIHdoZXJlIGl0IGV4aXN0cyBhbmQgaXQncyBiZWVuIHJlbW92ZWRcclxuXHRcdFx0XHRcdC8vIGZyb20gdGhlIHVybFxyXG5cdFx0XHRcdFx0aWYgKCB1aVN0YXRlICYmIHByZXNlcnZlZEhhc2guaW5kZXhPZiggdGhpcy51aVN0YXRlS2V5ICkgPT09IC0xKSB7XHJcblx0XHRcdFx0XHRcdHByZXNlcnZlZEhhc2ggKz0gdWlTdGF0ZTtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHQvLyBtYWtlIHN1cmUgdGhhdCBwb3VuZCBpcyBvbiB0aGUgZnJvbnQgb2YgdGhlIGhhc2hcclxuXHRcdFx0XHRcdGlmICggcHJlc2VydmVkSGFzaC5pbmRleE9mKCBcIiNcIiApID09PSAtMSAmJiBwcmVzZXJ2ZWRIYXNoICE9PSBcIlwiICkge1xyXG5cdFx0XHRcdFx0XHRwcmVzZXJ2ZWRIYXNoID0gXCIjXCIgKyBwcmVzZXJ2ZWRIYXNoO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdC8vIHJlY29uc3RydWN0IGVhY2ggb2YgdGhlIHBpZWNlcyB3aXRoIHRoZSBuZXcgc2VhcmNoIHN0cmluZyBhbmQgaGFzaFxyXG5cdFx0XHRcdFx0aHJlZiA9IHBhdGgucGFyc2VVcmwoIGhyZWYgKTtcclxuXHRcdFx0XHRcdGhyZWYgPSBocmVmLnByb3RvY29sICsgaHJlZi5kb3VibGVTbGFzaCArIGhyZWYuaG9zdCArIGhyZWYucGF0aG5hbWUgKyBzZWFyY2ggK1xyXG5cdFx0XHRcdFx0XHRwcmVzZXJ2ZWRIYXNoO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRocmVmICs9IGhyZWYuaW5kZXhPZiggXCIjXCIgKSA+IC0xID8gdWlTdGF0ZSA6IFwiI1wiICsgdWlTdGF0ZTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdHJldHVybiBocmVmO1xyXG5cdFx0XHR9LFxyXG5cclxuXHRcdFx0aXNQcmVzZXJ2YWJsZUhhc2g6IGZ1bmN0aW9uKCBoYXNoICkge1xyXG5cdFx0XHRcdHJldHVybiBoYXNoLnJlcGxhY2UoIFwiI1wiLCBcIlwiICkuaW5kZXhPZiggdGhpcy51aVN0YXRlS2V5ICkgPT09IDA7XHJcblx0XHRcdH0sXHJcblxyXG5cdFx0XHQvLyBFc2NhcGUgd2VpcmQgY2hhcmFjdGVycyBpbiB0aGUgaGFzaCBpZiBpdCBpcyB0byBiZSB1c2VkIGFzIGEgc2VsZWN0b3JcclxuXHRcdFx0aGFzaFRvU2VsZWN0b3I6IGZ1bmN0aW9uKCBoYXNoICkge1xyXG5cdFx0XHRcdHZhciBoYXNIYXNoID0gKCBoYXNoLnN1YnN0cmluZyggMCwgMSApID09PSBcIiNcIiApO1xyXG5cdFx0XHRcdGlmICggaGFzSGFzaCApIHtcclxuXHRcdFx0XHRcdGhhc2ggPSBoYXNoLnN1YnN0cmluZyggMSApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRyZXR1cm4gKCBoYXNIYXNoID8gXCIjXCIgOiBcIlwiICkgKyBoYXNoLnJlcGxhY2UoIC8oWyFcIiMkJSYnKCkqKywuLzo7PD0+P0BbXFxdXmB7fH1+XSkvZywgXCJcXFxcJDFcIiApO1xyXG5cdFx0XHR9LFxyXG5cclxuXHRcdFx0Ly8gcmV0dXJuIHRoZSBzdWJzdHJpbmcgb2YgYSBmaWxlcGF0aCBiZWZvcmUgdGhlIGRpYWxvZ0hhc2hLZXksIGZvciBtYWtpbmcgYSBzZXJ2ZXJcclxuXHRcdFx0Ly8gcmVxdWVzdFxyXG5cdFx0XHRnZXRGaWxlUGF0aDogZnVuY3Rpb24oIHBhdGggKSB7XHJcblx0XHRcdFx0cmV0dXJuIHBhdGggJiYgcGF0aC5zcGxpdCggZGlhbG9nSGFzaEtleSApWzBdO1xyXG5cdFx0XHR9LFxyXG5cclxuXHRcdFx0Ly8gY2hlY2sgaWYgdGhlIHNwZWNpZmllZCB1cmwgcmVmZXJzIHRvIHRoZSBmaXJzdCBwYWdlIGluIHRoZSBtYWluXHJcblx0XHRcdC8vIGFwcGxpY2F0aW9uIGRvY3VtZW50LlxyXG5cdFx0XHRpc0ZpcnN0UGFnZVVybDogZnVuY3Rpb24oIHVybCApIHtcclxuXHRcdFx0XHQvLyBXZSBvbmx5IGRlYWwgd2l0aCBhYnNvbHV0ZSBwYXRocy5cclxuXHRcdFx0XHR2YXIgdSA9IHBhdGgucGFyc2VVcmwoIHBhdGgubWFrZVVybEFic29sdXRlKCB1cmwsIHRoaXMuZG9jdW1lbnRCYXNlICkgKSxcclxuXHJcblx0XHRcdFx0XHQvLyBEb2VzIHRoZSB1cmwgaGF2ZSB0aGUgc2FtZSBwYXRoIGFzIHRoZSBkb2N1bWVudD9cclxuXHRcdFx0XHRcdHNhbWVQYXRoID0gdS5ocmVmTm9IYXNoID09PSB0aGlzLmRvY3VtZW50VXJsLmhyZWZOb0hhc2ggfHxcclxuXHRcdFx0XHRcdFx0KCB0aGlzLmRvY3VtZW50QmFzZURpZmZlcnMgJiZcclxuXHRcdFx0XHRcdFx0XHR1LmhyZWZOb0hhc2ggPT09IHRoaXMuZG9jdW1lbnRCYXNlLmhyZWZOb0hhc2ggKSxcclxuXHJcblx0XHRcdFx0XHQvLyBHZXQgdGhlIGZpcnN0IHBhZ2UgZWxlbWVudC5cclxuXHRcdFx0XHRcdGZwID0gJC5tb2JpbGUuZmlyc3RQYWdlLFxyXG5cclxuXHRcdFx0XHRcdC8vIEdldCB0aGUgaWQgb2YgdGhlIGZpcnN0IHBhZ2UgZWxlbWVudCBpZiBpdCBoYXMgb25lLlxyXG5cdFx0XHRcdFx0ZnBJZCA9IGZwICYmIGZwWzBdID8gZnBbMF0uaWQgOiB1bmRlZmluZWQ7XHJcblxyXG5cdFx0XHRcdC8vIFRoZSB1cmwgcmVmZXJzIHRvIHRoZSBmaXJzdCBwYWdlIGlmIHRoZSBwYXRoIG1hdGNoZXMgdGhlIGRvY3VtZW50IGFuZFxyXG5cdFx0XHRcdC8vIGl0IGVpdGhlciBoYXMgbm8gaGFzaCB2YWx1ZSwgb3IgdGhlIGhhc2ggaXMgZXhhY3RseSBlcXVhbCB0byB0aGUgaWRcclxuXHRcdFx0XHQvLyBvZiB0aGUgZmlyc3QgcGFnZSBlbGVtZW50LlxyXG5cdFx0XHRcdHJldHVybiBzYW1lUGF0aCAmJlxyXG5cdFx0XHRcdFx0KCAhdS5oYXNoIHx8XHJcblx0XHRcdFx0XHRcdHUuaGFzaCA9PT0gXCIjXCIgfHxcclxuXHRcdFx0XHRcdFx0KCBmcElkICYmIHUuaGFzaC5yZXBsYWNlKCAvXiMvLCBcIlwiICkgPT09IGZwSWQgKSApO1xyXG5cdFx0XHR9LFxyXG5cclxuXHRcdFx0Ly8gU29tZSBlbWJlZGRlZCBicm93c2VycywgbGlrZSB0aGUgd2ViIHZpZXcgaW4gUGhvbmUgR2FwLCBhbGxvd1xyXG5cdFx0XHQvLyBjcm9zcy1kb21haW4gWEhSIHJlcXVlc3RzIGlmIHRoZSBkb2N1bWVudCBkb2luZyB0aGUgcmVxdWVzdCB3YXMgbG9hZGVkXHJcblx0XHRcdC8vIHZpYSB0aGUgZmlsZTovLyBwcm90b2NvbC4gVGhpcyBpcyB1c3VhbGx5IHRvIGFsbG93IHRoZSBhcHBsaWNhdGlvbiB0b1xyXG5cdFx0XHQvLyBcInBob25lIGhvbWVcIiBhbmQgZmV0Y2ggYXBwIHNwZWNpZmljIGRhdGEuIFdlIG5vcm1hbGx5IGxldCB0aGUgYnJvd3NlclxyXG5cdFx0XHQvLyBoYW5kbGUgZXh0ZXJuYWwvY3Jvc3MtZG9tYWluIHVybHMsIGJ1dCBpZiB0aGUgYWxsb3dDcm9zc0RvbWFpblBhZ2VzXHJcblx0XHRcdC8vIG9wdGlvbiBpcyB0cnVlLCB3ZSB3aWxsIGFsbG93IGNyb3NzLWRvbWFpbiBodHRwL2h0dHBzIHJlcXVlc3RzIHRvIGdvXHJcblx0XHRcdC8vIHRocm91Z2ggb3VyIHBhZ2UgbG9hZGluZyBsb2dpYy5cclxuXHRcdFx0aXNQZXJtaXR0ZWRDcm9zc0RvbWFpblJlcXVlc3Q6IGZ1bmN0aW9uKCBkb2NVcmwsIHJlcVVybCApIHtcclxuXHRcdFx0XHRyZXR1cm4gJC5tb2JpbGUuYWxsb3dDcm9zc0RvbWFpblBhZ2VzICYmXHJcblx0XHRcdFx0XHQoZG9jVXJsLnByb3RvY29sID09PSBcImZpbGU6XCIgfHwgZG9jVXJsLnByb3RvY29sID09PSBcImNvbnRlbnQ6XCIpICYmXHJcblx0XHRcdFx0XHRyZXFVcmwuc2VhcmNoKCAvXmh0dHBzPzovICkgIT09IC0xO1xyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cclxuXHRcdHBhdGguZG9jdW1lbnRVcmwgPSBwYXRoLnBhcnNlTG9jYXRpb24oKTtcclxuXHJcblx0XHQkYmFzZSA9ICQoIFwiaGVhZFwiICkuZmluZCggXCJiYXNlXCIgKTtcclxuXHJcblx0XHRwYXRoLmRvY3VtZW50QmFzZSA9ICRiYXNlLmxlbmd0aCA/XHJcblx0XHRcdHBhdGgucGFyc2VVcmwoIHBhdGgubWFrZVVybEFic29sdXRlKCAkYmFzZS5hdHRyKCBcImhyZWZcIiApLCBwYXRoLmRvY3VtZW50VXJsLmhyZWYgKSApIDpcclxuXHRcdFx0cGF0aC5kb2N1bWVudFVybDtcclxuXHJcblx0XHRwYXRoLmRvY3VtZW50QmFzZURpZmZlcnMgPSAocGF0aC5kb2N1bWVudFVybC5ocmVmTm9IYXNoICE9PSBwYXRoLmRvY3VtZW50QmFzZS5ocmVmTm9IYXNoKTtcclxuXHJcblx0XHQvL3JldHVybiB0aGUgb3JpZ2luYWwgZG9jdW1lbnQgYmFzZSB1cmxcclxuXHRcdHBhdGguZ2V0RG9jdW1lbnRCYXNlID0gZnVuY3Rpb24oIGFzUGFyc2VkT2JqZWN0ICkge1xyXG5cdFx0XHRyZXR1cm4gYXNQYXJzZWRPYmplY3QgPyAkLmV4dGVuZCgge30sIHBhdGguZG9jdW1lbnRCYXNlICkgOiBwYXRoLmRvY3VtZW50QmFzZS5ocmVmO1xyXG5cdFx0fTtcclxuXHJcblx0XHQvLyBERVBSRUNBVEVEIGFzIG9mIDEuNC4wIC0gcmVtb3ZlIGluIDEuNS4wXHJcblx0XHQkLmV4dGVuZCggJC5tb2JpbGUsIHtcclxuXHJcblx0XHRcdC8vcmV0dXJuIHRoZSBvcmlnaW5hbCBkb2N1bWVudCB1cmxcclxuXHRcdFx0Z2V0RG9jdW1lbnRVcmw6IHBhdGguZ2V0RG9jdW1lbnRVcmwsXHJcblxyXG5cdFx0XHQvL3JldHVybiB0aGUgb3JpZ2luYWwgZG9jdW1lbnQgYmFzZSB1cmxcclxuXHRcdFx0Z2V0RG9jdW1lbnRCYXNlOiBwYXRoLmdldERvY3VtZW50QmFzZVxyXG5cdFx0fSk7XHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcblxyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblx0JC5tb2JpbGUuSGlzdG9yeSA9IGZ1bmN0aW9uKCBzdGFjaywgaW5kZXggKSB7XHJcblx0XHR0aGlzLnN0YWNrID0gc3RhY2sgfHwgW107XHJcblx0XHR0aGlzLmFjdGl2ZUluZGV4ID0gaW5kZXggfHwgMDtcclxuXHR9O1xyXG5cclxuXHQkLmV4dGVuZCgkLm1vYmlsZS5IaXN0b3J5LnByb3RvdHlwZSwge1xyXG5cdFx0Z2V0QWN0aXZlOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0cmV0dXJuIHRoaXMuc3RhY2tbIHRoaXMuYWN0aXZlSW5kZXggXTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Z2V0TGFzdDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHJldHVybiB0aGlzLnN0YWNrWyB0aGlzLnByZXZpb3VzSW5kZXggXTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Z2V0TmV4dDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHJldHVybiB0aGlzLnN0YWNrWyB0aGlzLmFjdGl2ZUluZGV4ICsgMSBdO1xyXG5cdFx0fSxcclxuXHJcblx0XHRnZXRQcmV2OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0cmV0dXJuIHRoaXMuc3RhY2tbIHRoaXMuYWN0aXZlSW5kZXggLSAxIF07XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vIGFkZE5ldyBpcyB1c2VkIHdoZW5ldmVyIGEgbmV3IHBhZ2UgaXMgYWRkZWRcclxuXHRcdGFkZDogZnVuY3Rpb24oIHVybCwgZGF0YSApIHtcclxuXHRcdFx0ZGF0YSA9IGRhdGEgfHwge307XHJcblxyXG5cdFx0XHQvL2lmIHRoZXJlJ3MgZm9yd2FyZCBoaXN0b3J5LCB3aXBlIGl0XHJcblx0XHRcdGlmICggdGhpcy5nZXROZXh0KCkgKSB7XHJcblx0XHRcdFx0dGhpcy5jbGVhckZvcndhcmQoKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gaWYgdGhlIGhhc2ggaXMgaW5jbHVkZWQgaW4gdGhlIGRhdGEgbWFrZSBzdXJlIHRoZSBzaGFwZVxyXG5cdFx0XHQvLyBpcyBjb25zaXN0ZW50IGZvciBjb21wYXJpc29uXHJcblx0XHRcdGlmICggZGF0YS5oYXNoICYmIGRhdGEuaGFzaC5pbmRleE9mKCBcIiNcIiApID09PSAtMSkge1xyXG5cdFx0XHRcdGRhdGEuaGFzaCA9IFwiI1wiICsgZGF0YS5oYXNoO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRkYXRhLnVybCA9IHVybDtcclxuXHRcdFx0dGhpcy5zdGFjay5wdXNoKCBkYXRhICk7XHJcblx0XHRcdHRoaXMuYWN0aXZlSW5kZXggPSB0aGlzLnN0YWNrLmxlbmd0aCAtIDE7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vd2lwZSB1cmxzIGFoZWFkIG9mIGFjdGl2ZSBpbmRleFxyXG5cdFx0Y2xlYXJGb3J3YXJkOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dGhpcy5zdGFjayA9IHRoaXMuc3RhY2suc2xpY2UoIDAsIHRoaXMuYWN0aXZlSW5kZXggKyAxICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdGZpbmQ6IGZ1bmN0aW9uKCB1cmwsIHN0YWNrLCBlYXJseVJldHVybiApIHtcclxuXHRcdFx0c3RhY2sgPSBzdGFjayB8fCB0aGlzLnN0YWNrO1xyXG5cclxuXHRcdFx0dmFyIGVudHJ5LCBpLCBsZW5ndGggPSBzdGFjay5sZW5ndGgsIGluZGV4O1xyXG5cclxuXHRcdFx0Zm9yICggaSA9IDA7IGkgPCBsZW5ndGg7IGkrKyApIHtcclxuXHRcdFx0XHRlbnRyeSA9IHN0YWNrW2ldO1xyXG5cclxuXHRcdFx0XHRpZiAoIGRlY29kZVVSSUNvbXBvbmVudCh1cmwpID09PSBkZWNvZGVVUklDb21wb25lbnQoZW50cnkudXJsKSB8fFxyXG5cdFx0XHRcdFx0ZGVjb2RlVVJJQ29tcG9uZW50KHVybCkgPT09IGRlY29kZVVSSUNvbXBvbmVudChlbnRyeS5oYXNoKSApIHtcclxuXHRcdFx0XHRcdGluZGV4ID0gaTtcclxuXHJcblx0XHRcdFx0XHRpZiAoIGVhcmx5UmV0dXJuICkge1xyXG5cdFx0XHRcdFx0XHRyZXR1cm4gaW5kZXg7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRyZXR1cm4gaW5kZXg7XHJcblx0XHR9LFxyXG5cclxuXHRcdGNsb3Nlc3Q6IGZ1bmN0aW9uKCB1cmwgKSB7XHJcblx0XHRcdHZhciBjbG9zZXN0LCBhID0gdGhpcy5hY3RpdmVJbmRleDtcclxuXHJcblx0XHRcdC8vIEZpcnN0LCB0YWtlIHRoZSBzbGljZSBvZiB0aGUgaGlzdG9yeSBzdGFjayBiZWZvcmUgdGhlIGN1cnJlbnQgaW5kZXggYW5kIHNlYXJjaFxyXG5cdFx0XHQvLyBmb3IgYSB1cmwgbWF0Y2guIElmIG9uZSBpcyBmb3VuZCwgd2UnbGwgYXZvaWQgYXZvaWQgbG9va2luZyB0aHJvdWdoIGZvcndhcmQgaGlzdG9yeVxyXG5cdFx0XHQvLyBOT1RFIHRoZSBwcmVmZXJlbmNlIGZvciBiYWNrd2FyZCBoaXN0b3J5IG1vdmVtZW50IGlzIGRyaXZlbiBieSB0aGUgZmFjdCB0aGF0XHJcblx0XHRcdC8vICAgICAgbW9zdCBtb2JpbGUgYnJvd3NlcnMgb25seSBoYXZlIGEgZGVkaWNhdGVkIGJhY2sgYnV0dG9uLCBhbmQgdXNlcnMgcmFyZWx5IHVzZVxyXG5cdFx0XHQvLyAgICAgIHRoZSBmb3J3YXJkIGJ1dHRvbiBpbiBkZXNrdG9wIGJyb3dzZXIgYW55aG93XHJcblx0XHRcdGNsb3Nlc3QgPSB0aGlzLmZpbmQoIHVybCwgdGhpcy5zdGFjay5zbGljZSgwLCBhKSApO1xyXG5cclxuXHRcdFx0Ly8gSWYgbm90aGluZyB3YXMgZm91bmQgaW4gYmFja3dhcmQgaGlzdG9yeSBjaGVjayBmb3J3YXJkLiBUaGUgYHRydWVgXHJcblx0XHRcdC8vIHZhbHVlIHBhc3NlZCBhcyB0aGUgdGhpcmQgcGFyYW1ldGVyIGNhdXNlcyB0aGUgZmluZCBtZXRob2QgdG8gYnJlYWtcclxuXHRcdFx0Ly8gb24gdGhlIGZpcnN0IG1hdGNoIGluIHRoZSBmb3J3YXJkIGhpc3Rvcnkgc2xpY2UuIFRoZSBzdGFydGluZyBpbmRleFxyXG5cdFx0XHQvLyBvZiB0aGUgc2xpY2UgbXVzdCB0aGVuIGJlIGFkZGVkIHRvIHRoZSByZXN1bHQgdG8gZ2V0IHRoZSBlbGVtZW50IGluZGV4XHJcblx0XHRcdC8vIGluIHRoZSBvcmlnaW5hbCBoaXN0b3J5IHN0YWNrIDooIDooXHJcblx0XHRcdC8vXHJcblx0XHRcdC8vIFRPRE8gdGhpcyBpcyBoeXBlciBjb25mdXNpbmcgYW5kIHNob3VsZCBiZSBjbGVhbmVkIHVwICh1Z2ggc28gYmFkKVxyXG5cdFx0XHRpZiAoIGNsb3Nlc3QgPT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0XHRjbG9zZXN0ID0gdGhpcy5maW5kKCB1cmwsIHRoaXMuc3RhY2suc2xpY2UoYSksIHRydWUgKTtcclxuXHRcdFx0XHRjbG9zZXN0ID0gY2xvc2VzdCA9PT0gdW5kZWZpbmVkID8gY2xvc2VzdCA6IGNsb3Nlc3QgKyBhO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRyZXR1cm4gY2xvc2VzdDtcclxuXHRcdH0sXHJcblxyXG5cdFx0ZGlyZWN0OiBmdW5jdGlvbiggb3B0cyApIHtcclxuXHRcdFx0dmFyIG5ld0FjdGl2ZUluZGV4ID0gdGhpcy5jbG9zZXN0KCBvcHRzLnVybCApLCBhID0gdGhpcy5hY3RpdmVJbmRleDtcclxuXHJcblx0XHRcdC8vIHNhdmUgbmV3IHBhZ2UgaW5kZXgsIG51bGwgY2hlY2sgdG8gcHJldmVudCBmYWxzZXkgMCByZXN1bHRcclxuXHRcdFx0Ly8gcmVjb3JkIHRoZSBwcmV2aW91cyBpbmRleCBmb3IgcmVmZXJlbmNlXHJcblx0XHRcdGlmICggbmV3QWN0aXZlSW5kZXggIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0XHR0aGlzLmFjdGl2ZUluZGV4ID0gbmV3QWN0aXZlSW5kZXg7XHJcblx0XHRcdFx0dGhpcy5wcmV2aW91c0luZGV4ID0gYTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gaW52b2tlIGNhbGxiYWNrcyB3aGVyZSBhcHByb3ByaWF0ZVxyXG5cdFx0XHQvL1xyXG5cdFx0XHQvLyBUT0RPIHRoaXMgaXMgYWxzbyBjb252b2x1dGVkIGFuZCBjb25mdXNpbmdcclxuXHRcdFx0aWYgKCBuZXdBY3RpdmVJbmRleCA8IGEgKSB7XHJcblx0XHRcdFx0KCBvcHRzLnByZXNlbnQgfHwgb3B0cy5iYWNrIHx8ICQubm9vcCApKCB0aGlzLmdldEFjdGl2ZSgpLCBcImJhY2tcIiApO1xyXG5cdFx0XHR9IGVsc2UgaWYgKCBuZXdBY3RpdmVJbmRleCA+IGEgKSB7XHJcblx0XHRcdFx0KCBvcHRzLnByZXNlbnQgfHwgb3B0cy5mb3J3YXJkIHx8ICQubm9vcCApKCB0aGlzLmdldEFjdGl2ZSgpLCBcImZvcndhcmRcIiApO1xyXG5cdFx0XHR9IGVsc2UgaWYgKCBuZXdBY3RpdmVJbmRleCA9PT0gdW5kZWZpbmVkICYmIG9wdHMubWlzc2luZyApIHtcclxuXHRcdFx0XHRvcHRzLm1pc3NpbmcoIHRoaXMuZ2V0QWN0aXZlKCkgKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH0pO1xyXG59KSggalF1ZXJ5ICk7XHJcblxyXG5cclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cdHZhciBwYXRoID0gJC5tb2JpbGUucGF0aCxcclxuXHRcdGluaXRpYWxIcmVmID0gbG9jYXRpb24uaHJlZjtcclxuXHJcblx0JC5tb2JpbGUuTmF2aWdhdG9yID0gZnVuY3Rpb24oIGhpc3RvcnkgKSB7XHJcblx0XHR0aGlzLmhpc3RvcnkgPSBoaXN0b3J5O1xyXG5cdFx0dGhpcy5pZ25vcmVJbml0aWFsSGFzaENoYW5nZSA9IHRydWU7XHJcblxyXG5cdFx0JC5tb2JpbGUud2luZG93LmJpbmQoe1xyXG5cdFx0XHRcInBvcHN0YXRlLmhpc3RvcnlcIjogJC5wcm94eSggdGhpcy5wb3BzdGF0ZSwgdGhpcyApLFxyXG5cdFx0XHRcImhhc2hjaGFuZ2UuaGlzdG9yeVwiOiAkLnByb3h5KCB0aGlzLmhhc2hjaGFuZ2UsIHRoaXMgKVxyXG5cdFx0fSk7XHJcblx0fTtcclxuXHJcblx0JC5leHRlbmQoJC5tb2JpbGUuTmF2aWdhdG9yLnByb3RvdHlwZSwge1xyXG5cdFx0c3F1YXNoOiBmdW5jdGlvbiggdXJsLCBkYXRhICkge1xyXG5cdFx0XHR2YXIgc3RhdGUsIGhyZWYsIGhhc2ggPSBwYXRoLmlzUGF0aCh1cmwpID8gcGF0aC5zdHJpcEhhc2godXJsKSA6IHVybDtcclxuXHJcblx0XHRcdGhyZWYgPSBwYXRoLnNxdWFzaCggdXJsICk7XHJcblxyXG5cdFx0XHQvLyBtYWtlIHN1cmUgdG8gcHJvdmlkZSB0aGlzIGluZm9ybWF0aW9uIHdoZW4gaXQgaXNuJ3QgZXhwbGljaXRseSBzZXQgaW4gdGhlXHJcblx0XHRcdC8vIGRhdGEgb2JqZWN0IHRoYXQgd2FzIHBhc3NlZCB0byB0aGUgc3F1YXNoIG1ldGhvZFxyXG5cdFx0XHRzdGF0ZSA9ICQuZXh0ZW5kKHtcclxuXHRcdFx0XHRoYXNoOiBoYXNoLFxyXG5cdFx0XHRcdHVybDogaHJlZlxyXG5cdFx0XHR9LCBkYXRhKTtcclxuXHJcblx0XHRcdC8vIHJlcGxhY2UgdGhlIGN1cnJlbnQgdXJsIHdpdGggdGhlIG5ldyBocmVmIGFuZCBzdG9yZSB0aGUgc3RhdGVcclxuXHRcdFx0Ly8gTm90ZSB0aGF0IGluIHNvbWUgY2FzZXMgd2UgbWlnaHQgYmUgcmVwbGFjaW5nIGFuIHVybCB3aXRoIHRoZVxyXG5cdFx0XHQvLyBzYW1lIHVybC4gV2UgZG8gdGhpcyBhbnl3YXlzIGJlY2F1c2Ugd2UgbmVlZCB0byBtYWtlIHN1cmUgdGhhdFxyXG5cdFx0XHQvLyBhbGwgb2Ygb3VyIGhpc3RvcnkgZW50cmllcyBoYXZlIGEgc3RhdGUgb2JqZWN0IGFzc29jaWF0ZWQgd2l0aFxyXG5cdFx0XHQvLyB0aGVtLiBUaGlzIGFsbG93cyB1cyB0byB3b3JrIGFyb3VuZCB0aGUgY2FzZSB3aGVyZSAkLm1vYmlsZS5iYWNrKClcclxuXHRcdFx0Ly8gaXMgY2FsbGVkIHRvIHRyYW5zaXRpb24gZnJvbSBhbiBleHRlcm5hbCBwYWdlIHRvIGFuIGVtYmVkZGVkIHBhZ2UuXHJcblx0XHRcdC8vIEluIHRoYXQgcGFydGljdWxhciBjYXNlLCBhIGhhc2hjaGFuZ2UgZXZlbnQgaXMgKk5PVCogZ2VuZXJhdGVkIGJ5IHRoZSBicm93c2VyLlxyXG5cdFx0XHQvLyBFbnN1cmluZyBlYWNoIGhpc3RvcnkgZW50cnkgaGFzIGEgc3RhdGUgb2JqZWN0IG1lYW5zIHRoYXQgb25Qb3BTdGF0ZSgpXHJcblx0XHRcdC8vIHdpbGwgYWx3YXlzIHRyaWdnZXIgb3VyIGhhc2hjaGFuZ2UgY2FsbGJhY2sgZXZlbiB3aGVuIGEgaGFzaGNoYW5nZSBldmVudFxyXG5cdFx0XHQvLyBpcyBub3QgZmlyZWQuXHJcblx0XHRcdHdpbmRvdy5oaXN0b3J5LnJlcGxhY2VTdGF0ZSggc3RhdGUsIHN0YXRlLnRpdGxlIHx8IGRvY3VtZW50LnRpdGxlLCBocmVmICk7XHJcblxyXG5cdFx0XHRyZXR1cm4gc3RhdGU7XHJcblx0XHR9LFxyXG5cclxuXHRcdGhhc2g6IGZ1bmN0aW9uKCB1cmwsIGhyZWYgKSB7XHJcblx0XHRcdHZhciBwYXJzZWQsIGxvYywgaGFzaCwgcmVzb2x2ZWQ7XHJcblxyXG5cdFx0XHQvLyBHcmFiIHRoZSBoYXNoIGZvciByZWNvcmRpbmcuIElmIHRoZSBwYXNzZWQgdXJsIGlzIGEgcGF0aFxyXG5cdFx0XHQvLyB3ZSB1c2VkIHRoZSBwYXJzZWQgdmVyc2lvbiBvZiB0aGUgc3F1YXNoZWQgdXJsIHRvIHJlY29uc3RydWN0LFxyXG5cdFx0XHQvLyBvdGhlcndpc2Ugd2UgYXNzdW1lIGl0J3MgYSBoYXNoIGFuZCBzdG9yZSBpdCBkaXJlY3RseVxyXG5cdFx0XHRwYXJzZWQgPSBwYXRoLnBhcnNlVXJsKCB1cmwgKTtcclxuXHRcdFx0bG9jID0gcGF0aC5wYXJzZUxvY2F0aW9uKCk7XHJcblxyXG5cdFx0XHRpZiAoIGxvYy5wYXRobmFtZSArIGxvYy5zZWFyY2ggPT09IHBhcnNlZC5wYXRobmFtZSArIHBhcnNlZC5zZWFyY2ggKSB7XHJcblx0XHRcdFx0Ly8gSWYgdGhlIHBhdGhuYW1lIGFuZCBzZWFyY2ggb2YgdGhlIHBhc3NlZCB1cmwgaXMgaWRlbnRpY2FsIHRvIHRoZSBjdXJyZW50IGxvY1xyXG5cdFx0XHRcdC8vIHRoZW4gd2UgbXVzdCB1c2UgdGhlIGhhc2guIE90aGVyd2lzZSB0aGVyZSB3aWxsIGJlIG5vIGV2ZW50XHJcblx0XHRcdFx0Ly8gZWcsIHVybCA9IFwiL2Zvby9iYXI/YmF6I2JhbmdcIiwgbG9jYXRpb24uaHJlZiA9IFwiaHR0cDovL2V4YW1wbGUuY29tL2Zvby9iYXI/YmF6XCJcclxuXHRcdFx0XHRoYXNoID0gcGFyc2VkLmhhc2ggPyBwYXJzZWQuaGFzaCA6IHBhcnNlZC5wYXRobmFtZSArIHBhcnNlZC5zZWFyY2g7XHJcblx0XHRcdH0gZWxzZSBpZiAoIHBhdGguaXNQYXRoKHVybCkgKSB7XHJcblx0XHRcdFx0cmVzb2x2ZWQgPSBwYXRoLnBhcnNlVXJsKCBocmVmICk7XHJcblx0XHRcdFx0Ly8gSWYgdGhlIHBhc3NlZCB1cmwgaXMgYSBwYXRoLCBtYWtlIGl0IGRvbWFpbiByZWxhdGl2ZSBhbmQgcmVtb3ZlIGFueSB0cmFpbGluZyBoYXNoXHJcblx0XHRcdFx0aGFzaCA9IHJlc29sdmVkLnBhdGhuYW1lICsgcmVzb2x2ZWQuc2VhcmNoICsgKHBhdGguaXNQcmVzZXJ2YWJsZUhhc2goIHJlc29sdmVkLmhhc2ggKT8gcmVzb2x2ZWQuaGFzaC5yZXBsYWNlKCBcIiNcIiwgXCJcIiApIDogXCJcIik7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0aGFzaCA9IHVybDtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cmV0dXJuIGhhc2g7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vIFRPRE8gcmVjb25zaWRlciBuYW1lXHJcblx0XHRnbzogZnVuY3Rpb24oIHVybCwgZGF0YSwgbm9FdmVudHMgKSB7XHJcblx0XHRcdHZhciBzdGF0ZSwgaHJlZiwgaGFzaCwgcG9wc3RhdGVFdmVudCxcclxuXHRcdFx0XHRpc1BvcFN0YXRlRXZlbnQgPSAkLmV2ZW50LnNwZWNpYWwubmF2aWdhdGUuaXNQdXNoU3RhdGVFbmFibGVkKCk7XHJcblxyXG5cdFx0XHQvLyBHZXQgdGhlIHVybCBhcyBpdCB3b3VsZCBsb29rIHNxdWFzaGVkIG9uIHRvIHRoZSBjdXJyZW50IHJlc29sdXRpb24gdXJsXHJcblx0XHRcdGhyZWYgPSBwYXRoLnNxdWFzaCggdXJsICk7XHJcblxyXG5cdFx0XHQvLyBzb3J0IG91dCB3aGF0IHRoZSBoYXNoIHNvdWxkIGJlIGZyb20gdGhlIHVybFxyXG5cdFx0XHRoYXNoID0gdGhpcy5oYXNoKCB1cmwsIGhyZWYgKTtcclxuXHJcblx0XHRcdC8vIEhlcmUgd2UgcHJldmVudCB0aGUgbmV4dCBoYXNoIGNoYW5nZSBvciBwb3BzdGF0ZSBldmVudCBmcm9tIGRvaW5nIGFueVxyXG5cdFx0XHQvLyBoaXN0b3J5IG1hbmFnZW1lbnQuIEluIHRoZSBjYXNlIG9mIGhhc2hjaGFuZ2Ugd2UgZG9uJ3Qgc3dhbGxvdyBpdFxyXG5cdFx0XHQvLyBpZiB0aGVyZSB3aWxsIGJlIG5vIGhhc2hjaGFuZ2UgZmlyZWQgKHNpbmNlIHRoYXQgd29uJ3QgcmVzZXQgdGhlIHZhbHVlKVxyXG5cdFx0XHQvLyBhbmQgd2lsbCBzd2FsbG93IHRoZSBmb2xsb3dpbmcgaGFzaGNoYW5nZVxyXG5cdFx0XHRpZiAoIG5vRXZlbnRzICYmIGhhc2ggIT09IHBhdGguc3RyaXBIYXNoKHBhdGgucGFyc2VMb2NhdGlvbigpLmhhc2gpICkge1xyXG5cdFx0XHRcdHRoaXMucHJldmVudE5leHRIYXNoQ2hhbmdlID0gbm9FdmVudHM7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIElNUE9SVEFOVCBpbiB0aGUgY2FzZSB3aGVyZSBwb3BzdGF0ZSBpcyBzdXBwb3J0ZWQgdGhlIGV2ZW50IHdpbGwgYmUgdHJpZ2dlcmVkXHJcblx0XHRcdC8vICAgICAgZGlyZWN0bHksIHN0b3BwaW5nIGZ1cnRoZXIgZXhlY3V0aW9uIC0gaWUsIGludGVydXB0aW5nIHRoZSBmbG93IG9mIHRoaXNcclxuXHRcdFx0Ly8gICAgICBtZXRob2QgY2FsbCB0byBmaXJlIGJpbmRpbmdzIGF0IHRoaXMgZXhwcmVzc2lvbi4gQmVsb3cgdGhlIG5hdmlnYXRlIG1ldGhvZFxyXG5cdFx0XHQvLyAgICAgIHRoZXJlIGlzIGEgYmluZGluZyB0byBjYXRjaCB0aGlzIGV2ZW50IGFuZCBzdG9wIGl0cyBwcm9wYWdhdGlvbi5cclxuXHRcdFx0Ly9cclxuXHRcdFx0Ly8gICAgICBXZSB0aGVuIHRyaWdnZXIgYSBuZXcgcG9wc3RhdGUgZXZlbnQgb24gdGhlIHdpbmRvdyB3aXRoIGEgbnVsbCBzdGF0ZVxyXG5cdFx0XHQvLyAgICAgIHNvIHRoYXQgdGhlIG5hdmlnYXRlIGV2ZW50cyBjYW4gY29uY2x1ZGUgdGhlaXIgd29yayBwcm9wZXJseVxyXG5cdFx0XHQvL1xyXG5cdFx0XHQvLyBpZiB0aGUgdXJsIGlzIGEgcGF0aCB3ZSB3YW50IHRvIHByZXNlcnZlIHRoZSBxdWVyeSBwYXJhbXMgdGhhdCBhcmUgYXZhaWxhYmxlIG9uXHJcblx0XHRcdC8vIHRoZSBjdXJyZW50IHVybC5cclxuXHRcdFx0dGhpcy5wcmV2ZW50SGFzaEFzc2lnblBvcFN0YXRlID0gdHJ1ZTtcclxuXHRcdFx0d2luZG93LmxvY2F0aW9uLmhhc2ggPSBoYXNoO1xyXG5cclxuXHRcdFx0Ly8gSWYgcG9wc3RhdGUgaXMgZW5hYmxlZCBhbmQgdGhlIGJyb3dzZXIgdHJpZ2dlcnMgYHBvcHN0YXRlYCBldmVudHMgd2hlbiB0aGUgaGFzaFxyXG5cdFx0XHQvLyBpcyBzZXQgKHRoaXMgb2Z0ZW4gaGFwcGVucyBpbW1lZGlhdGVseSBpbiBicm93c2VycyBsaWtlIENocm9tZSksIHRoZW4gdGhlXHJcblx0XHRcdC8vIHRoaXMgZmxhZyB3aWxsIGJlIHNldCB0byBmYWxzZSBhbHJlYWR5LiBJZiBpdCdzIGEgYnJvd3NlciB0aGF0IGRvZXMgbm90IHRyaWdnZXJcclxuXHRcdFx0Ly8gYSBgcG9wc3RhdGVgIG9uIGhhc2ggYXNzaWduZW1lbnQgb3IgYHJlcGxhY2VTdGF0ZWAgdGhlbiB3ZSBuZWVkIGF2b2lkIHRoZSBicmFuY2hcclxuXHRcdFx0Ly8gdGhhdCBzd2FsbG93cyB0aGUgZXZlbnQgY3JlYXRlZCBieSB0aGUgcG9wc3RhdGUgZ2VuZXJhdGVkIGJ5IHRoZSBoYXNoIGFzc2lnbm1lbnRcclxuXHRcdFx0Ly8gQXQgdGhlIHRpbWUgb2YgdGhpcyB3cml0aW5nIHRoaXMgaGFwcGVucyB3aXRoIE9wZXJhIDEyIGFuZCBzb21lIHZlcnNpb24gb2YgSUVcclxuXHRcdFx0dGhpcy5wcmV2ZW50SGFzaEFzc2lnblBvcFN0YXRlID0gZmFsc2U7XHJcblxyXG5cdFx0XHRzdGF0ZSA9ICQuZXh0ZW5kKHtcclxuXHRcdFx0XHR1cmw6IGhyZWYsXHJcblx0XHRcdFx0aGFzaDogaGFzaCxcclxuXHRcdFx0XHR0aXRsZTogZG9jdW1lbnQudGl0bGVcclxuXHRcdFx0fSwgZGF0YSk7XHJcblxyXG5cdFx0XHRpZiAoIGlzUG9wU3RhdGVFdmVudCApIHtcclxuXHRcdFx0XHRwb3BzdGF0ZUV2ZW50ID0gbmV3ICQuRXZlbnQoIFwicG9wc3RhdGVcIiApO1xyXG5cdFx0XHRcdHBvcHN0YXRlRXZlbnQub3JpZ2luYWxFdmVudCA9IHtcclxuXHRcdFx0XHRcdHR5cGU6IFwicG9wc3RhdGVcIixcclxuXHRcdFx0XHRcdHN0YXRlOiBudWxsXHJcblx0XHRcdFx0fTtcclxuXHJcblx0XHRcdFx0dGhpcy5zcXVhc2goIHVybCwgc3RhdGUgKTtcclxuXHJcblx0XHRcdFx0Ly8gVHJpZ2dlciBhIG5ldyBmYXV4IHBvcHN0YXRlIGV2ZW50IHRvIHJlcGxhY2UgdGhlIG9uZSB0aGF0IHdlXHJcblx0XHRcdFx0Ly8gY2F1Z2h0IHRoYXQgd2FzIHRyaWdnZXJlZCBieSB0aGUgaGFzaCBzZXR0aW5nIGFib3ZlLlxyXG5cdFx0XHRcdGlmICggIW5vRXZlbnRzICkge1xyXG5cdFx0XHRcdFx0dGhpcy5pZ25vcmVQb3BTdGF0ZSA9IHRydWU7XHJcblx0XHRcdFx0XHQkLm1vYmlsZS53aW5kb3cudHJpZ2dlciggcG9wc3RhdGVFdmVudCApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gcmVjb3JkIHRoZSBoaXN0b3J5IGVudHJ5IHNvIHRoYXQgdGhlIGluZm9ybWF0aW9uIGNhbiBiZSBpbmNsdWRlZFxyXG5cdFx0XHQvLyBpbiBoYXNoY2hhbmdlIGV2ZW50IGRyaXZlbiBuYXZpZ2F0ZSBldmVudHMgaW4gYSBzaW1pbGFyIGZhc2hpb24gdG9cclxuXHRcdFx0Ly8gdGhlIHN0YXRlIHRoYXQncyBwcm92aWRlZCBieSBwb3BzdGF0ZVxyXG5cdFx0XHR0aGlzLmhpc3RvcnkuYWRkKCBzdGF0ZS51cmwsIHN0YXRlICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vIFRoaXMgYmluZGluZyBpcyBpbnRlbmRlZCB0byBjYXRjaCB0aGUgcG9wc3RhdGUgZXZlbnRzIHRoYXQgYXJlIGZpcmVkXHJcblx0XHQvLyB3aGVuIGV4ZWN1dGlvbiBvZiB0aGUgYCQubmF2aWdhdGVgIG1ldGhvZCBzdG9wcyBhdCB3aW5kb3cubG9jYXRpb24uaGFzaCA9IHVybDtcclxuXHRcdC8vIGFuZCBjb21wbGV0ZWx5IHByZXZlbnQgdGhlbSBmcm9tIHByb3BhZ2F0aW5nLiBUaGUgcG9wc3RhdGUgZXZlbnQgd2lsbCB0aGVuIGJlXHJcblx0XHQvLyByZXRyaWdnZXJlZCBhZnRlciBleGVjdXRpb24gcmVzdW1lc1xyXG5cdFx0Ly9cclxuXHRcdC8vIFRPRE8gZ3JhYiB0aGUgb3JpZ2luYWwgZXZlbnQgaGVyZSBhbmQgdXNlIGl0IGZvciB0aGUgc3ludGhldGljIGV2ZW50IGluIHRoZVxyXG5cdFx0Ly8gICAgICBzZWNvbmQgaGFsZiBvZiB0aGUgbmF2aWdhdGUgZXhlY3V0aW9uIHRoYXQgd2lsbCBmb2xsb3cgdGhpcyBiaW5kaW5nXHJcblx0XHRwb3BzdGF0ZTogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0XHR2YXIgaGFzaCwgc3RhdGU7XHJcblxyXG5cdFx0XHQvLyBQYXJ0bHkgdG8gc3VwcG9ydCBvdXIgdGVzdCBzdWl0ZSB3aGljaCBtYW51YWxseSBhbHRlcnMgdGhlIHN1cHBvcnRcclxuXHRcdFx0Ly8gdmFsdWUgdG8gdGVzdCBoYXNoY2hhbmdlLiBQYXJ0bHkgdG8gcHJldmVudCBhbGwgYXJvdW5kIHdlaXJkbmVzc1xyXG5cdFx0XHRpZiAoICEkLmV2ZW50LnNwZWNpYWwubmF2aWdhdGUuaXNQdXNoU3RhdGVFbmFibGVkKCkgKSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBJZiB0aGlzIGlzIHRoZSBwb3BzdGF0ZSB0cmlnZ2VyZWQgYnkgdGhlIGFjdHVhbCBhbHRlcmF0aW9uIG9mIHRoZSBoYXNoXHJcblx0XHRcdC8vIHByZXZlbnQgaXQgY29tcGxldGVseS4gSGlzdG9yeSBpcyB0cmFja2VkIG1hbnVhbGx5XHJcblx0XHRcdGlmICggdGhpcy5wcmV2ZW50SGFzaEFzc2lnblBvcFN0YXRlICkge1xyXG5cdFx0XHRcdHRoaXMucHJldmVudEhhc2hBc3NpZ25Qb3BTdGF0ZSA9IGZhbHNlO1xyXG5cdFx0XHRcdGV2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gaWYgdGhpcyBpcyB0aGUgcG9wc3RhdGUgdHJpZ2dlcmVkIGFmdGVyIHRoZSBgcmVwbGFjZVN0YXRlYCBjYWxsIGluIHRoZSBnb1xyXG5cdFx0XHQvLyBtZXRob2QsIHRoZW4gc2ltcGx5IGlnbm9yZSBpdC4gVGhlIGhpc3RvcnkgZW50cnkgaGFzIGFscmVhZHkgYmVlbiBjYXB0dXJlZFxyXG5cdFx0XHRpZiAoIHRoaXMuaWdub3JlUG9wU3RhdGUgKSB7XHJcblx0XHRcdFx0dGhpcy5pZ25vcmVQb3BTdGF0ZSA9IGZhbHNlO1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gSWYgdGhlcmUgaXMgbm8gc3RhdGUsIGFuZCB0aGUgaGlzdG9yeSBzdGFjayBsZW5ndGggaXMgb25lIHdlcmVcclxuXHRcdFx0Ly8gcHJvYmFibHkgZ2V0dGluZyB0aGUgcGFnZSBsb2FkIHBvcHN0YXRlIGZpcmVkIGJ5IGJyb3dzZXJzIGxpa2UgY2hyb21lXHJcblx0XHRcdC8vIGF2b2lkIGl0IGFuZCBzZXQgdGhlIG9uZSB0aW1lIGZsYWcgdG8gZmFsc2UuXHJcblx0XHRcdC8vIFRPRE86IERvIHdlIHJlYWxseSBuZWVkIGFsbCB0aGVzZSBjb25kaXRpb25zPyBDb21wYXJpbmcgbG9jYXRpb24gaHJlZnNcclxuXHRcdFx0Ly8gc2hvdWxkIGJlIHN1ZmZpY2llbnQuXHJcblx0XHRcdGlmICggIWV2ZW50Lm9yaWdpbmFsRXZlbnQuc3RhdGUgJiZcclxuXHRcdFx0XHR0aGlzLmhpc3Rvcnkuc3RhY2subGVuZ3RoID09PSAxICYmXHJcblx0XHRcdFx0dGhpcy5pZ25vcmVJbml0aWFsSGFzaENoYW5nZSApIHtcclxuXHRcdFx0XHR0aGlzLmlnbm9yZUluaXRpYWxIYXNoQ2hhbmdlID0gZmFsc2U7XHJcblxyXG5cdFx0XHRcdGlmICggbG9jYXRpb24uaHJlZiA9PT0gaW5pdGlhbEhyZWYgKSB7XHJcblx0XHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gYWNjb3VudCBmb3IgZGlyZWN0IG1hbmlwdWxhdGlvbiBvZiB0aGUgaGFzaC4gVGhhdCBpcywgd2Ugd2lsbCByZWNlaXZlIGEgcG9wc3RhdGVcclxuXHRcdFx0Ly8gd2hlbiB0aGUgaGFzaCBpcyBjaGFuZ2VkIGJ5IGFzc2lnbm1lbnQsIGFuZCBpdCB3b24ndCBoYXZlIGEgc3RhdGUgYXNzb2NpYXRlZC4gV2VcclxuXHRcdFx0Ly8gdGhlbiBuZWVkIHRvIHNxdWFzaCB0aGUgaGFzaC4gU2VlIGJlbG93IGZvciBoYW5kbGluZyBvZiBoYXNoIGFzc2lnbm1lbnQgdGhhdFxyXG5cdFx0XHQvLyBtYXRjaGVzIGFuIGV4aXN0aW5nIGhpc3RvcnkgZW50cnlcclxuXHRcdFx0Ly8gVE9ETyBpdCBtaWdodCBiZSBiZXR0ZXIgdG8gb25seSBhZGQgdG8gdGhlIGhpc3Rvcnkgc3RhY2tcclxuXHRcdFx0Ly8gICAgICB3aGVuIHRoZSBoYXNoIGlzIGFkamFjZW50IHRvIHRoZSBhY3RpdmUgaGlzdG9yeSBlbnRyeVxyXG5cdFx0XHRoYXNoID0gcGF0aC5wYXJzZUxvY2F0aW9uKCkuaGFzaDtcclxuXHRcdFx0aWYgKCAhZXZlbnQub3JpZ2luYWxFdmVudC5zdGF0ZSAmJiBoYXNoICkge1xyXG5cdFx0XHRcdC8vIHNxdWFzaCB0aGUgaGFzaCB0aGF0J3MgYmVlbiBhc3NpZ25lZCBvbiB0aGUgVVJMIHdpdGggcmVwbGFjZVN0YXRlXHJcblx0XHRcdFx0Ly8gYWxzbyBncmFiIHRoZSByZXN1bHRpbmcgc3RhdGUgb2JqZWN0IGZvciBzdG9yYWdlXHJcblx0XHRcdFx0c3RhdGUgPSB0aGlzLnNxdWFzaCggaGFzaCApO1xyXG5cclxuXHRcdFx0XHQvLyByZWNvcmQgdGhlIG5ldyBoYXNoIGFzIGFuIGFkZGl0aW9uYWwgaGlzdG9yeSBlbnRyeVxyXG5cdFx0XHRcdC8vIHRvIG1hdGNoIHRoZSBicm93c2VyJ3MgdHJlYXRtZW50IG9mIGhhc2ggYXNzaWdubWVudFxyXG5cdFx0XHRcdHRoaXMuaGlzdG9yeS5hZGQoIHN0YXRlLnVybCwgc3RhdGUgKTtcclxuXHJcblx0XHRcdFx0Ly8gcGFzcyB0aGUgbmV3bHkgY3JlYXRlZCBzdGF0ZSBpbmZvcm1hdGlvblxyXG5cdFx0XHRcdC8vIGFsb25nIHdpdGggdGhlIGV2ZW50XHJcblx0XHRcdFx0ZXZlbnQuaGlzdG9yeVN0YXRlID0gc3RhdGU7XHJcblxyXG5cdFx0XHRcdC8vIGRvIG5vdCBhbHRlciBoaXN0b3J5LCB3ZSd2ZSBhZGRlZCBhIG5ldyBoaXN0b3J5IGVudHJ5XHJcblx0XHRcdFx0Ly8gc28gd2Uga25vdyB3aGVyZSB3ZSBhcmVcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIElmIGFsbCBlbHNlIGZhaWxzIHRoaXMgaXMgYSBwb3BzdGF0ZSB0aGF0IGNvbWVzIGZyb20gdGhlIGJhY2sgb3IgZm9yd2FyZCBidXR0b25zXHJcblx0XHRcdC8vIG1ha2Ugc3VyZSB0byBzZXQgdGhlIHN0YXRlIG9mIG91ciBoaXN0b3J5IHN0YWNrIHByb3Blcmx5LCBhbmQgcmVjb3JkIHRoZSBkaXJlY3Rpb25hbGl0eVxyXG5cdFx0XHR0aGlzLmhpc3RvcnkuZGlyZWN0KHtcclxuXHRcdFx0XHR1cmw6IChldmVudC5vcmlnaW5hbEV2ZW50LnN0YXRlIHx8IHt9KS51cmwgfHwgaGFzaCxcclxuXHJcblx0XHRcdFx0Ly8gV2hlbiB0aGUgdXJsIGlzIGVpdGhlciBmb3J3YXJkIG9yIGJhY2t3YXJkIGluIGhpc3RvcnkgaW5jbHVkZSB0aGUgZW50cnlcclxuXHRcdFx0XHQvLyBhcyBkYXRhIG9uIHRoZSBldmVudCBvYmplY3QgZm9yIG1lcmdpbmcgYXMgZGF0YSBpbiB0aGUgbmF2aWdhdGUgZXZlbnRcclxuXHRcdFx0XHRwcmVzZW50OiBmdW5jdGlvbiggaGlzdG9yeUVudHJ5LCBkaXJlY3Rpb24gKSB7XHJcblx0XHRcdFx0XHQvLyBtYWtlIHN1cmUgdG8gY3JlYXRlIGEgbmV3IG9iamVjdCB0byBwYXNzIGRvd24gYXMgdGhlIG5hdmlnYXRlIGV2ZW50IGRhdGFcclxuXHRcdFx0XHRcdGV2ZW50Lmhpc3RvcnlTdGF0ZSA9ICQuZXh0ZW5kKHt9LCBoaXN0b3J5RW50cnkpO1xyXG5cdFx0XHRcdFx0ZXZlbnQuaGlzdG9yeVN0YXRlLmRpcmVjdGlvbiA9IGRpcmVjdGlvbjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvLyBOT1RFIG11c3QgYmluZCBiZWZvcmUgYG5hdmlnYXRlYCBzcGVjaWFsIGV2ZW50IGhhc2hjaGFuZ2UgYmluZGluZyBvdGhlcndpc2UgdGhlXHJcblx0XHQvLyAgICAgIG5hdmlnYXRpb24gZGF0YSB3b24ndCBiZSBhdHRhY2hlZCB0byB0aGUgaGFzaGNoYW5nZSBldmVudCBpbiB0aW1lIGZvciB0aG9zZVxyXG5cdFx0Ly8gICAgICBiaW5kaW5ncyB0byBhdHRhY2ggaXQgdG8gdGhlIGBuYXZpZ2F0ZWAgc3BlY2lhbCBldmVudFxyXG5cdFx0Ly8gVE9ETyBhZGQgYSBjaGVjayBoZXJlIHRoYXQgYGhhc2hjaGFuZ2UubmF2aWdhdGVgIGlzIGJvdW5kIGFscmVhZHkgb3RoZXJ3aXNlIGl0J3NcclxuXHRcdC8vICAgICAgYnJva2VuIChleGNlcHRpb24/KVxyXG5cdFx0aGFzaGNoYW5nZTogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0XHR2YXIgaGlzdG9yeSwgaGFzaDtcclxuXHJcblx0XHRcdC8vIElmIGhhc2hjaGFuZ2UgbGlzdGVuaW5nIGlzIGV4cGxpY2l0bHkgZGlzYWJsZWQgb3IgcHVzaHN0YXRlIGlzIHN1cHBvcnRlZFxyXG5cdFx0XHQvLyBhdm9pZCBtYWtpbmcgdXNlIG9mIHRoZSBoYXNoY2hhbmdlIGhhbmRsZXIuXHJcblx0XHRcdGlmICghJC5ldmVudC5zcGVjaWFsLm5hdmlnYXRlLmlzSGFzaENoYW5nZUVuYWJsZWQoKSB8fFxyXG5cdFx0XHRcdCQuZXZlbnQuc3BlY2lhbC5uYXZpZ2F0ZS5pc1B1c2hTdGF0ZUVuYWJsZWQoKSApIHtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIE9uIG9jY2FzaW9uIGV4cGxpY2l0bHkgd2FudCB0byBwcmV2ZW50IHRoZSBuZXh0IGhhc2ggZnJvbSBwcm9wb2dhdGluZyBiZWNhdXNlIHdlIG9ubHlcclxuXHRcdFx0Ly8gd2l0aCB0byBhbHRlciB0aGUgdXJsIHRvIHJlcHJlc2VudCB0aGUgbmV3IHN0YXRlIGRvIHNvIGhlcmVcclxuXHRcdFx0aWYgKCB0aGlzLnByZXZlbnROZXh0SGFzaENoYW5nZSApIHtcclxuXHRcdFx0XHR0aGlzLnByZXZlbnROZXh0SGFzaENoYW5nZSA9IGZhbHNlO1xyXG5cdFx0XHRcdGV2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aGlzdG9yeSA9IHRoaXMuaGlzdG9yeTtcclxuXHRcdFx0aGFzaCA9IHBhdGgucGFyc2VMb2NhdGlvbigpLmhhc2g7XHJcblxyXG5cdFx0XHQvLyBJZiB0aGlzIGlzIGEgaGFzaGNoYW5nZSBjYXVzZWQgYnkgdGhlIGJhY2sgb3IgZm9yd2FyZCBidXR0b25cclxuXHRcdFx0Ly8gbWFrZSBzdXJlIHRvIHNldCB0aGUgc3RhdGUgb2Ygb3VyIGhpc3Rvcnkgc3RhY2sgcHJvcGVybHlcclxuXHRcdFx0dGhpcy5oaXN0b3J5LmRpcmVjdCh7XHJcblx0XHRcdFx0dXJsOiBoYXNoLFxyXG5cclxuXHRcdFx0XHQvLyBXaGVuIHRoZSB1cmwgaXMgZWl0aGVyIGZvcndhcmQgb3IgYmFja3dhcmQgaW4gaGlzdG9yeSBpbmNsdWRlIHRoZSBlbnRyeVxyXG5cdFx0XHRcdC8vIGFzIGRhdGEgb24gdGhlIGV2ZW50IG9iamVjdCBmb3IgbWVyZ2luZyBhcyBkYXRhIGluIHRoZSBuYXZpZ2F0ZSBldmVudFxyXG5cdFx0XHRcdHByZXNlbnQ6IGZ1bmN0aW9uKCBoaXN0b3J5RW50cnksIGRpcmVjdGlvbiApIHtcclxuXHRcdFx0XHRcdC8vIG1ha2Ugc3VyZSB0byBjcmVhdGUgYSBuZXcgb2JqZWN0IHRvIHBhc3MgZG93biBhcyB0aGUgbmF2aWdhdGUgZXZlbnQgZGF0YVxyXG5cdFx0XHRcdFx0ZXZlbnQuaGFzaGNoYW5nZVN0YXRlID0gJC5leHRlbmQoe30sIGhpc3RvcnlFbnRyeSk7XHJcblx0XHRcdFx0XHRldmVudC5oYXNoY2hhbmdlU3RhdGUuZGlyZWN0aW9uID0gZGlyZWN0aW9uO1xyXG5cdFx0XHRcdH0sXHJcblxyXG5cdFx0XHRcdC8vIFdoZW4gd2UgZG9uJ3QgZmluZCBhIGhhc2ggaW4gb3VyIGhpc3RvcnkgY2xlYXJseSB3ZSdyZSBhaW1pbmcgdG8gZ28gdGhlcmVcclxuXHRcdFx0XHQvLyByZWNvcmQgdGhlIGVudHJ5IGFzIG5ldyBmb3IgZnV0dXJlIHRyYXZlcnNhbFxyXG5cdFx0XHRcdC8vXHJcblx0XHRcdFx0Ly8gTk9URSBpdCdzIG5vdCBlbnRpcmVseSBjbGVhciB0aGF0IHRoaXMgaXMgdGhlIHJpZ2h0IHRoaW5nIHRvIGRvIGdpdmVuIHRoYXQgd2VcclxuXHRcdFx0XHQvLyAgICAgIGNhbid0IGtub3cgdGhlIHVzZXJzIGludGVudGlvbi4gSXQgbWlnaHQgYmUgYmV0dGVyIHRvIGV4cGxpY2l0bHkgX25vdF9cclxuXHRcdFx0XHQvLyAgICAgIHN1cHBvcnQgbG9jYXRpb24uaGFzaCBhc3NpZ25tZW50IGluIHByZWZlcmVuY2UgdG8gJC5uYXZpZ2F0ZSBjYWxsc1xyXG5cdFx0XHRcdC8vIFRPRE8gZmlyc3QgYXJnIHRvIGFkZCBzaG91bGQgYmUgdGhlIGhyZWYsIGJ1dCBpdCBjYXVzZXMgaXNzdWVzIGluIGlkZW50aWZ5aW5nXHJcblx0XHRcdFx0Ly8gICAgICBlbWJlZGVkIHBhZ2VzXHJcblx0XHRcdFx0bWlzc2luZzogZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRoaXN0b3J5LmFkZCggaGFzaCwge1xyXG5cdFx0XHRcdFx0XHRoYXNoOiBoYXNoLFxyXG5cdFx0XHRcdFx0XHR0aXRsZTogZG9jdW1lbnQudGl0bGVcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0fSk7XHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcblxyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblx0Ly8gVE9ETyBjb25zaWRlciBxdWV1ZWluZyBuYXZpZ2F0aW9uIGFjdGl2aXR5IHVudGlsIHByZXZpb3VzIGFjdGl2aXRpZXMgaGF2ZSBjb21wbGV0ZWRcclxuXHQvLyAgICAgIHNvIHRoYXQgZW5kIHVzZXJzIGRvbid0IGhhdmUgdG8gdGhpbmsgYWJvdXQgaXQuIFB1bnRpbmcgZm9yIG5vd1xyXG5cdC8vIFRPRE8gISEgbW92ZSB0aGUgZXZlbnQgYmluZGluZ3MgaW50byBjYWxsYmFja3Mgb24gdGhlIG5hdmlnYXRlIGV2ZW50XHJcblx0JC5tb2JpbGUubmF2aWdhdGUgPSBmdW5jdGlvbiggdXJsLCBkYXRhLCBub0V2ZW50cyApIHtcclxuXHRcdCQubW9iaWxlLm5hdmlnYXRlLm5hdmlnYXRvci5nbyggdXJsLCBkYXRhLCBub0V2ZW50cyApO1xyXG5cdH07XHJcblxyXG5cdC8vIGV4cG9zZSB0aGUgaGlzdG9yeSBvbiB0aGUgbmF2aWdhdGUgbWV0aG9kIGluIGFudGljaXBhdGlvbiBvZiBmdWxsIGludGVncmF0aW9uIHdpdGhcclxuXHQvLyBleGlzdGluZyBuYXZpZ2F0aW9uIGZ1bmN0aW9uYWx0eSB0aGF0IGlzIHRpZ2h0bHkgY291cGxlZCB0byB0aGUgaGlzdG9yeSBpbmZvcm1hdGlvblxyXG5cdCQubW9iaWxlLm5hdmlnYXRlLmhpc3RvcnkgPSBuZXcgJC5tb2JpbGUuSGlzdG9yeSgpO1xyXG5cclxuXHQvLyBpbnN0YW50aWF0ZSBhbiBpbnN0YW5jZSBvZiB0aGUgbmF2aWdhdG9yIGZvciB1c2Ugd2l0aGluIHRoZSAkLm5hdmlnYXRlIG1ldGhvZFxyXG5cdCQubW9iaWxlLm5hdmlnYXRlLm5hdmlnYXRvciA9IG5ldyAkLm1vYmlsZS5OYXZpZ2F0b3IoICQubW9iaWxlLm5hdmlnYXRlLmhpc3RvcnkgKTtcclxuXHJcblx0dmFyIGxvYyA9ICQubW9iaWxlLnBhdGgucGFyc2VMb2NhdGlvbigpO1xyXG5cdCQubW9iaWxlLm5hdmlnYXRlLmhpc3RvcnkuYWRkKCBsb2MuaHJlZiwge2hhc2g6IGxvYy5oYXNofSApO1xyXG59KSggalF1ZXJ5ICk7XHJcblxyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblx0dmFyIHByb3BzID0ge1xyXG5cdFx0XHRcImFuaW1hdGlvblwiOiB7fSxcclxuXHRcdFx0XCJ0cmFuc2l0aW9uXCI6IHt9XHJcblx0XHR9LFxyXG5cdFx0dGVzdEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImFcIiApLFxyXG5cdFx0dmVuZG9yUHJlZml4ZXMgPSBbIFwiXCIsIFwid2Via2l0LVwiLCBcIm1vei1cIiwgXCJvLVwiIF07XHJcblxyXG5cdCQuZWFjaCggWyBcImFuaW1hdGlvblwiLCBcInRyYW5zaXRpb25cIiBdLCBmdW5jdGlvbiggaSwgdGVzdCApIHtcclxuXHJcblx0XHQvLyBHZXQgY29ycmVjdCBuYW1lIGZvciB0ZXN0XHJcblx0XHR2YXIgdGVzdE5hbWUgPSAoIGkgPT09IDAgKSA/IHRlc3QgKyBcIi1cIiArIFwibmFtZVwiIDogdGVzdDtcclxuXHJcblx0XHQkLmVhY2goIHZlbmRvclByZWZpeGVzLCBmdW5jdGlvbiggaiwgcHJlZml4ICkge1xyXG5cdFx0XHRpZiAoIHRlc3RFbGVtZW50LnN0eWxlWyAkLmNhbWVsQ2FzZSggcHJlZml4ICsgdGVzdE5hbWUgKSBdICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdFx0IHByb3BzWyB0ZXN0IF1bIFwicHJlZml4XCIgXSA9IHByZWZpeDtcclxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIFNldCBldmVudCBhbmQgZHVyYXRpb24gbmFtZXMgZm9yIGxhdGVyIHVzZVxyXG5cdFx0cHJvcHNbIHRlc3QgXVsgXCJkdXJhdGlvblwiIF0gPVxyXG5cdFx0XHQkLmNhbWVsQ2FzZSggcHJvcHNbIHRlc3QgXVsgXCJwcmVmaXhcIiBdICsgdGVzdCArIFwiLVwiICsgXCJkdXJhdGlvblwiICk7XHJcblx0XHRwcm9wc1sgdGVzdCBdWyBcImV2ZW50XCIgXSA9XHJcblx0XHRcdCQuY2FtZWxDYXNlKCBwcm9wc1sgdGVzdCBdWyBcInByZWZpeFwiIF0gKyB0ZXN0ICsgXCItXCIgKyBcImVuZFwiICk7XHJcblxyXG5cdFx0Ly8gQWxsIGxvd2VyIGNhc2UgaWYgbm90IGEgdmVuZG9yIHByb3BcclxuXHRcdGlmICggcHJvcHNbIHRlc3QgXVsgXCJwcmVmaXhcIiBdID09PSBcIlwiICkge1xyXG5cdFx0XHRwcm9wc1sgdGVzdCBdWyBcImV2ZW50XCIgXSA9IHByb3BzWyB0ZXN0IF1bIFwiZXZlbnRcIiBdLnRvTG93ZXJDYXNlKCk7XHJcblx0XHR9XHJcblx0fSk7XHJcblxyXG5cdC8vIElmIGEgdmFsaWQgcHJlZml4IHdhcyBmb3VuZCB0aGVuIHRoZSBpdCBpcyBzdXBwb3J0ZWQgYnkgdGhlIGJyb3dzZXJcclxuXHQkLnN1cHBvcnQuY3NzVHJhbnNpdGlvbnMgPSAoIHByb3BzWyBcInRyYW5zaXRpb25cIiBdWyBcInByZWZpeFwiIF0gIT09IHVuZGVmaW5lZCApO1xyXG5cdCQuc3VwcG9ydC5jc3NBbmltYXRpb25zID0gKCBwcm9wc1sgXCJhbmltYXRpb25cIiBdWyBcInByZWZpeFwiIF0gIT09IHVuZGVmaW5lZCApO1xyXG5cclxuXHQvLyBSZW1vdmUgdGhlIHRlc3RFbGVtZW50XHJcblx0JCggdGVzdEVsZW1lbnQgKS5yZW1vdmUoKTtcclxuXHJcblx0Ly8gQW5pbWF0aW9uIGNvbXBsZXRlIGNhbGxiYWNrXHJcblx0JC5mbi5hbmltYXRpb25Db21wbGV0ZSA9IGZ1bmN0aW9uKCBjYWxsYmFjaywgdHlwZSwgZmFsbGJhY2tUaW1lICkge1xyXG5cdFx0dmFyIHRpbWVyLCBkdXJhdGlvbixcclxuXHRcdFx0dGhhdCA9IHRoaXMsXHJcblx0XHRcdGV2ZW50QmluZGluZyA9IGZ1bmN0aW9uKCkge1xyXG5cclxuXHRcdFx0XHQvLyBDbGVhciB0aGUgdGltZXIgc28gd2UgZG9uJ3QgY2FsbCBjYWxsYmFjayB0d2ljZVxyXG5cdFx0XHRcdGNsZWFyVGltZW91dCggdGltZXIgKTtcclxuXHRcdFx0XHRjYWxsYmFjay5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XHJcblx0XHRcdH0sXHJcblx0XHRcdGFuaW1hdGlvblR5cGUgPSAoICF0eXBlIHx8IHR5cGUgPT09IFwiYW5pbWF0aW9uXCIgKSA/IFwiYW5pbWF0aW9uXCIgOiBcInRyYW5zaXRpb25cIjtcclxuXHJcblx0XHQvLyBNYWtlIHN1cmUgc2VsZWN0ZWQgdHlwZSBpcyBzdXBwb3J0ZWQgYnkgYnJvd3NlclxyXG5cdFx0aWYgKCAoICQuc3VwcG9ydC5jc3NUcmFuc2l0aW9ucyAmJiBhbmltYXRpb25UeXBlID09PSBcInRyYW5zaXRpb25cIiApIHx8XHJcblx0XHRcdCggJC5zdXBwb3J0LmNzc0FuaW1hdGlvbnMgJiYgYW5pbWF0aW9uVHlwZSA9PT0gXCJhbmltYXRpb25cIiApICkge1xyXG5cclxuXHRcdFx0Ly8gSWYgYSBmYWxsYmFjayB0aW1lIHdhcyBub3QgcGFzc2VkIHNldCBvbmVcclxuXHRcdFx0aWYgKCBmYWxsYmFja1RpbWUgPT09IHVuZGVmaW5lZCApIHtcclxuXHJcblx0XHRcdFx0Ly8gTWFrZSBzdXJlIHRoZSB3YXMgbm90IGJvdW5kIHRvIGRvY3VtZW50IGJlZm9yZSBjaGVja2luZyAuY3NzXHJcblx0XHRcdFx0aWYgKCAkKCB0aGlzICkuY29udGV4dCAhPT0gZG9jdW1lbnQgKSB7XHJcblxyXG5cdFx0XHRcdFx0Ly8gUGFyc2UgdGhlIGR1cnJhdGlvbiBzaW5jZSBpdHMgaW4gc2Vjb25kIG11bHRpcGxlIGJ5IDEwMDAgZm9yIG1pbGxpc2Vjb25kc1xyXG5cdFx0XHRcdFx0Ly8gTXVsdGlwbHkgYnkgMyB0byBtYWtlIHN1cmUgd2UgZ2l2ZSB0aGUgYW5pbWF0aW9uIHBsZW50eSBvZiB0aW1lLlxyXG5cdFx0XHRcdFx0ZHVyYXRpb24gPSBwYXJzZUZsb2F0KFxyXG5cdFx0XHRcdFx0XHQkKCB0aGlzICkuY3NzKCBwcm9wc1sgYW5pbWF0aW9uVHlwZSBdLmR1cmF0aW9uIClcclxuXHRcdFx0XHRcdCkgKiAzMDAwO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gSWYgd2UgY291bGQgbm90IHJlYWQgYSBkdXJhdGlvbiB1c2UgdGhlIGRlZmF1bHRcclxuXHRcdFx0XHRpZiAoIGR1cmF0aW9uID09PSAwIHx8IGR1cmF0aW9uID09PSB1bmRlZmluZWQgfHwgaXNOYU4oIGR1cmF0aW9uICkgKSB7XHJcblx0XHRcdFx0XHRkdXJhdGlvbiA9ICQuZm4uYW5pbWF0aW9uQ29tcGxldGUuZGVmYXVsdER1cmF0aW9uO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gU2V0cyB1cCB0aGUgZmFsbGJhY2sgaWYgZXZlbnQgbmV2ZXIgY29tZXNcclxuXHRcdFx0dGltZXIgPSBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHQkKCB0aGF0ICkub2ZmKCBwcm9wc1sgYW5pbWF0aW9uVHlwZSBdLmV2ZW50LCBldmVudEJpbmRpbmcgKTtcclxuXHRcdFx0XHRjYWxsYmFjay5hcHBseSggdGhhdCApO1xyXG5cdFx0XHR9LCBkdXJhdGlvbiApO1xyXG5cclxuXHRcdFx0Ly8gQmluZCB0aGUgZXZlbnRcclxuXHRcdFx0cmV0dXJuICQoIHRoaXMgKS5vbmUoIHByb3BzWyBhbmltYXRpb25UeXBlIF0uZXZlbnQsIGV2ZW50QmluZGluZyApO1xyXG5cdFx0fSBlbHNlIHtcclxuXHJcblx0XHRcdC8vIENTUyBhbmltYXRpb24gLyB0cmFuc2l0aW9ucyBub3Qgc3VwcG9ydGVkXHJcblx0XHRcdC8vIERlZmVyIGV4ZWN1dGlvbiBmb3IgY29uc2lzdGVuY3kgYmV0d2VlbiB3ZWJraXQvbm9uIHdlYmtpdFxyXG5cdFx0XHRzZXRUaW1lb3V0KCAkLnByb3h5KCBjYWxsYmFjaywgdGhpcyApLCAwICk7XHJcblx0XHRcdHJldHVybiAkKCB0aGlzICk7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0Ly8gQWxsb3cgZGVmYXVsdCBjYWxsYmFjayB0byBiZSBjb25maWd1cmVkIG9uIG1vYmlsZUluaXRcclxuXHQkLmZuLmFuaW1hdGlvbkNvbXBsZXRlLmRlZmF1bHREdXJhdGlvbiA9IDEwMDA7XHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbi8vIFRoaXMgcGx1Z2luIGlzIGFuIGV4cGVyaW1lbnQgZm9yIGFic3RyYWN0aW5nIGF3YXkgdGhlIHRvdWNoIGFuZCBtb3VzZVxyXG4vLyBldmVudHMgc28gdGhhdCBkZXZlbG9wZXJzIGRvbid0IGhhdmUgdG8gd29ycnkgYWJvdXQgd2hpY2ggbWV0aG9kIG9mIGlucHV0XHJcbi8vIHRoZSBkZXZpY2UgdGhlaXIgZG9jdW1lbnQgaXMgbG9hZGVkIG9uIHN1cHBvcnRzLlxyXG4vL1xyXG4vLyBUaGUgaWRlYSBoZXJlIGlzIHRvIGFsbG93IHRoZSBkZXZlbG9wZXIgdG8gcmVnaXN0ZXIgbGlzdGVuZXJzIGZvciB0aGVcclxuLy8gYmFzaWMgbW91c2UgZXZlbnRzLCBzdWNoIGFzIG1vdXNlZG93biwgbW91c2Vtb3ZlLCBtb3VzZXVwLCBhbmQgY2xpY2ssXHJcbi8vIGFuZCB0aGUgcGx1Z2luIHdpbGwgdGFrZSBjYXJlIG9mIHJlZ2lzdGVyaW5nIHRoZSBjb3JyZWN0IGxpc3RlbmVyc1xyXG4vLyBiZWhpbmQgdGhlIHNjZW5lcyB0byBpbnZva2UgdGhlIGxpc3RlbmVyIGF0IHRoZSBmYXN0ZXN0IHBvc3NpYmxlIHRpbWVcclxuLy8gZm9yIHRoYXQgZGV2aWNlLCB3aGlsZSBzdGlsbCByZXRhaW5pbmcgdGhlIG9yZGVyIG9mIGV2ZW50IGZpcmluZyBpblxyXG4vLyB0aGUgdHJhZGl0aW9uYWwgbW91c2UgZW52aXJvbm1lbnQsIHNob3VsZCBtdWx0aXBsZSBoYW5kbGVycyBiZSByZWdpc3RlcmVkXHJcbi8vIG9uIHRoZSBzYW1lIGVsZW1lbnQgZm9yIGRpZmZlcmVudCBldmVudHMuXHJcbi8vXHJcbi8vIFRoZSBjdXJyZW50IHZlcnNpb24gZXhwb3NlcyB0aGUgZm9sbG93aW5nIHZpcnR1YWwgZXZlbnRzIHRvIGpRdWVyeSBiaW5kIG1ldGhvZHM6XHJcbi8vIFwidm1vdXNlb3ZlciB2bW91c2Vkb3duIHZtb3VzZW1vdmUgdm1vdXNldXAgdmNsaWNrIHZtb3VzZW91dCB2bW91c2VjYW5jZWxcIlxyXG5cclxuKGZ1bmN0aW9uKCAkLCB3aW5kb3csIGRvY3VtZW50LCB1bmRlZmluZWQgKSB7XHJcblxyXG52YXIgZGF0YVByb3BlcnR5TmFtZSA9IFwidmlydHVhbE1vdXNlQmluZGluZ3NcIixcclxuXHR0b3VjaFRhcmdldFByb3BlcnR5TmFtZSA9IFwidmlydHVhbFRvdWNoSURcIixcclxuXHR2aXJ0dWFsRXZlbnROYW1lcyA9IFwidm1vdXNlb3ZlciB2bW91c2Vkb3duIHZtb3VzZW1vdmUgdm1vdXNldXAgdmNsaWNrIHZtb3VzZW91dCB2bW91c2VjYW5jZWxcIi5zcGxpdCggXCIgXCIgKSxcclxuXHR0b3VjaEV2ZW50UHJvcHMgPSBcImNsaWVudFggY2xpZW50WSBwYWdlWCBwYWdlWSBzY3JlZW5YIHNjcmVlbllcIi5zcGxpdCggXCIgXCIgKSxcclxuXHRtb3VzZUhvb2tQcm9wcyA9ICQuZXZlbnQubW91c2VIb29rcyA/ICQuZXZlbnQubW91c2VIb29rcy5wcm9wcyA6IFtdLFxyXG5cdG1vdXNlRXZlbnRQcm9wcyA9ICQuZXZlbnQucHJvcHMuY29uY2F0KCBtb3VzZUhvb2tQcm9wcyApLFxyXG5cdGFjdGl2ZURvY0hhbmRsZXJzID0ge30sXHJcblx0cmVzZXRUaW1lcklEID0gMCxcclxuXHRzdGFydFggPSAwLFxyXG5cdHN0YXJ0WSA9IDAsXHJcblx0ZGlkU2Nyb2xsID0gZmFsc2UsXHJcblx0Y2xpY2tCbG9ja0xpc3QgPSBbXSxcclxuXHRibG9ja01vdXNlVHJpZ2dlcnMgPSBmYWxzZSxcclxuXHRibG9ja1RvdWNoVHJpZ2dlcnMgPSBmYWxzZSxcclxuXHRldmVudENhcHR1cmVTdXBwb3J0ZWQgPSBcImFkZEV2ZW50TGlzdGVuZXJcIiBpbiBkb2N1bWVudCxcclxuXHQkZG9jdW1lbnQgPSAkKCBkb2N1bWVudCApLFxyXG5cdG5leHRUb3VjaElEID0gMSxcclxuXHRsYXN0VG91Y2hJRCA9IDAsIHRocmVzaG9sZCxcclxuXHRpO1xyXG5cclxuJC52bW91c2UgPSB7XHJcblx0bW92ZURpc3RhbmNlVGhyZXNob2xkOiAxMCxcclxuXHRjbGlja0Rpc3RhbmNlVGhyZXNob2xkOiAxMCxcclxuXHRyZXNldFRpbWVyRHVyYXRpb246IDE1MDBcclxufTtcclxuXHJcbmZ1bmN0aW9uIGdldE5hdGl2ZUV2ZW50KCBldmVudCApIHtcclxuXHJcblx0d2hpbGUgKCBldmVudCAmJiB0eXBlb2YgZXZlbnQub3JpZ2luYWxFdmVudCAhPT0gXCJ1bmRlZmluZWRcIiApIHtcclxuXHRcdGV2ZW50ID0gZXZlbnQub3JpZ2luYWxFdmVudDtcclxuXHR9XHJcblx0cmV0dXJuIGV2ZW50O1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVWaXJ0dWFsRXZlbnQoIGV2ZW50LCBldmVudFR5cGUgKSB7XHJcblxyXG5cdHZhciB0ID0gZXZlbnQudHlwZSxcclxuXHRcdG9lLCBwcm9wcywgbmUsIHByb3AsIGN0LCB0b3VjaCwgaSwgaiwgbGVuO1xyXG5cclxuXHRldmVudCA9ICQuRXZlbnQoIGV2ZW50ICk7XHJcblx0ZXZlbnQudHlwZSA9IGV2ZW50VHlwZTtcclxuXHJcblx0b2UgPSBldmVudC5vcmlnaW5hbEV2ZW50O1xyXG5cdHByb3BzID0gJC5ldmVudC5wcm9wcztcclxuXHJcblx0Ly8gYWRkcmVzc2VzIHNlcGFyYXRpb24gb2YgJC5ldmVudC5wcm9wcyBpbiB0byAkLmV2ZW50Lm1vdXNlSG9vay5wcm9wcyBhbmQgSXNzdWUgMzI4MFxyXG5cdC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9qcXVlcnkvanF1ZXJ5LW1vYmlsZS9pc3N1ZXMvMzI4MFxyXG5cdGlmICggdC5zZWFyY2goIC9eKG1vdXNlfGNsaWNrKS8gKSA+IC0xICkge1xyXG5cdFx0cHJvcHMgPSBtb3VzZUV2ZW50UHJvcHM7XHJcblx0fVxyXG5cclxuXHQvLyBjb3B5IG9yaWdpbmFsIGV2ZW50IHByb3BlcnRpZXMgb3ZlciB0byB0aGUgbmV3IGV2ZW50XHJcblx0Ly8gdGhpcyB3b3VsZCBoYXBwZW4gaWYgd2UgY291bGQgY2FsbCAkLmV2ZW50LmZpeCBpbnN0ZWFkIG9mICQuRXZlbnRcclxuXHQvLyBidXQgd2UgZG9uJ3QgaGF2ZSBhIHdheSB0byBmb3JjZSBhbiBldmVudCB0byBiZSBmaXhlZCBtdWx0aXBsZSB0aW1lc1xyXG5cdGlmICggb2UgKSB7XHJcblx0XHRmb3IgKCBpID0gcHJvcHMubGVuZ3RoLCBwcm9wOyBpOyApIHtcclxuXHRcdFx0cHJvcCA9IHByb3BzWyAtLWkgXTtcclxuXHRcdFx0ZXZlbnRbIHByb3AgXSA9IG9lWyBwcm9wIF07XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvLyBtYWtlIHN1cmUgdGhhdCBpZiB0aGUgbW91c2UgYW5kIGNsaWNrIHZpcnR1YWwgZXZlbnRzIGFyZSBnZW5lcmF0ZWRcclxuXHQvLyB3aXRob3V0IGEgLndoaWNoIG9uZSBpcyBkZWZpbmVkXHJcblx0aWYgKCB0LnNlYXJjaCgvbW91c2UoZG93bnx1cCl8Y2xpY2svKSA+IC0xICYmICFldmVudC53aGljaCApIHtcclxuXHRcdGV2ZW50LndoaWNoID0gMTtcclxuXHR9XHJcblxyXG5cdGlmICggdC5zZWFyY2goL150b3VjaC8pICE9PSAtMSApIHtcclxuXHRcdG5lID0gZ2V0TmF0aXZlRXZlbnQoIG9lICk7XHJcblx0XHR0ID0gbmUudG91Y2hlcztcclxuXHRcdGN0ID0gbmUuY2hhbmdlZFRvdWNoZXM7XHJcblx0XHR0b3VjaCA9ICggdCAmJiB0Lmxlbmd0aCApID8gdFswXSA6ICggKCBjdCAmJiBjdC5sZW5ndGggKSA/IGN0WyAwIF0gOiB1bmRlZmluZWQgKTtcclxuXHJcblx0XHRpZiAoIHRvdWNoICkge1xyXG5cdFx0XHRmb3IgKCBqID0gMCwgbGVuID0gdG91Y2hFdmVudFByb3BzLmxlbmd0aDsgaiA8IGxlbjsgaisrKSB7XHJcblx0XHRcdFx0cHJvcCA9IHRvdWNoRXZlbnRQcm9wc1sgaiBdO1xyXG5cdFx0XHRcdGV2ZW50WyBwcm9wIF0gPSB0b3VjaFsgcHJvcCBdO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRyZXR1cm4gZXZlbnQ7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFZpcnR1YWxCaW5kaW5nRmxhZ3MoIGVsZW1lbnQgKSB7XHJcblxyXG5cdHZhciBmbGFncyA9IHt9LFxyXG5cdFx0YiwgaztcclxuXHJcblx0d2hpbGUgKCBlbGVtZW50ICkge1xyXG5cclxuXHRcdGIgPSAkLmRhdGEoIGVsZW1lbnQsIGRhdGFQcm9wZXJ0eU5hbWUgKTtcclxuXHJcblx0XHRmb3IgKCAgayBpbiBiICkge1xyXG5cdFx0XHRpZiAoIGJbIGsgXSApIHtcclxuXHRcdFx0XHRmbGFnc1sgayBdID0gZmxhZ3MuaGFzVmlydHVhbEJpbmRpbmcgPSB0cnVlO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRlbGVtZW50ID0gZWxlbWVudC5wYXJlbnROb2RlO1xyXG5cdH1cclxuXHRyZXR1cm4gZmxhZ3M7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldENsb3Nlc3RFbGVtZW50V2l0aFZpcnR1YWxCaW5kaW5nKCBlbGVtZW50LCBldmVudFR5cGUgKSB7XHJcblx0dmFyIGI7XHJcblx0d2hpbGUgKCBlbGVtZW50ICkge1xyXG5cclxuXHRcdGIgPSAkLmRhdGEoIGVsZW1lbnQsIGRhdGFQcm9wZXJ0eU5hbWUgKTtcclxuXHJcblx0XHRpZiAoIGIgJiYgKCAhZXZlbnRUeXBlIHx8IGJbIGV2ZW50VHlwZSBdICkgKSB7XHJcblx0XHRcdHJldHVybiBlbGVtZW50O1xyXG5cdFx0fVxyXG5cdFx0ZWxlbWVudCA9IGVsZW1lbnQucGFyZW50Tm9kZTtcclxuXHR9XHJcblx0cmV0dXJuIG51bGw7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGVuYWJsZVRvdWNoQmluZGluZ3MoKSB7XHJcblx0YmxvY2tUb3VjaFRyaWdnZXJzID0gZmFsc2U7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRpc2FibGVUb3VjaEJpbmRpbmdzKCkge1xyXG5cdGJsb2NrVG91Y2hUcmlnZ2VycyA9IHRydWU7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGVuYWJsZU1vdXNlQmluZGluZ3MoKSB7XHJcblx0bGFzdFRvdWNoSUQgPSAwO1xyXG5cdGNsaWNrQmxvY2tMaXN0Lmxlbmd0aCA9IDA7XHJcblx0YmxvY2tNb3VzZVRyaWdnZXJzID0gZmFsc2U7XHJcblxyXG5cdC8vIFdoZW4gbW91c2UgYmluZGluZ3MgYXJlIGVuYWJsZWQsIG91clxyXG5cdC8vIHRvdWNoIGJpbmRpbmdzIGFyZSBkaXNhYmxlZC5cclxuXHRkaXNhYmxlVG91Y2hCaW5kaW5ncygpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBkaXNhYmxlTW91c2VCaW5kaW5ncygpIHtcclxuXHQvLyBXaGVuIG1vdXNlIGJpbmRpbmdzIGFyZSBkaXNhYmxlZCwgb3VyXHJcblx0Ly8gdG91Y2ggYmluZGluZ3MgYXJlIGVuYWJsZWQuXHJcblx0ZW5hYmxlVG91Y2hCaW5kaW5ncygpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzdGFydFJlc2V0VGltZXIoKSB7XHJcblx0Y2xlYXJSZXNldFRpbWVyKCk7XHJcblx0cmVzZXRUaW1lcklEID0gc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XHJcblx0XHRyZXNldFRpbWVySUQgPSAwO1xyXG5cdFx0ZW5hYmxlTW91c2VCaW5kaW5ncygpO1xyXG5cdH0sICQudm1vdXNlLnJlc2V0VGltZXJEdXJhdGlvbiApO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjbGVhclJlc2V0VGltZXIoKSB7XHJcblx0aWYgKCByZXNldFRpbWVySUQgKSB7XHJcblx0XHRjbGVhclRpbWVvdXQoIHJlc2V0VGltZXJJRCApO1xyXG5cdFx0cmVzZXRUaW1lcklEID0gMDtcclxuXHR9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHRyaWdnZXJWaXJ0dWFsRXZlbnQoIGV2ZW50VHlwZSwgZXZlbnQsIGZsYWdzICkge1xyXG5cdHZhciB2ZTtcclxuXHJcblx0aWYgKCAoIGZsYWdzICYmIGZsYWdzWyBldmVudFR5cGUgXSApIHx8XHJcblx0XHRcdFx0KCAhZmxhZ3MgJiYgZ2V0Q2xvc2VzdEVsZW1lbnRXaXRoVmlydHVhbEJpbmRpbmcoIGV2ZW50LnRhcmdldCwgZXZlbnRUeXBlICkgKSApIHtcclxuXHJcblx0XHR2ZSA9IGNyZWF0ZVZpcnR1YWxFdmVudCggZXZlbnQsIGV2ZW50VHlwZSApO1xyXG5cclxuXHRcdCQoIGV2ZW50LnRhcmdldCkudHJpZ2dlciggdmUgKTtcclxuXHR9XHJcblxyXG5cdHJldHVybiB2ZTtcclxufVxyXG5cclxuZnVuY3Rpb24gbW91c2VFdmVudENhbGxiYWNrKCBldmVudCApIHtcclxuXHR2YXIgdG91Y2hJRCA9ICQuZGF0YSggZXZlbnQudGFyZ2V0LCB0b3VjaFRhcmdldFByb3BlcnR5TmFtZSApLFxyXG5cdFx0dmU7XHJcblxyXG5cdGlmICggIWJsb2NrTW91c2VUcmlnZ2VycyAmJiAoICFsYXN0VG91Y2hJRCB8fCBsYXN0VG91Y2hJRCAhPT0gdG91Y2hJRCApICkge1xyXG5cdFx0dmUgPSB0cmlnZ2VyVmlydHVhbEV2ZW50KCBcInZcIiArIGV2ZW50LnR5cGUsIGV2ZW50ICk7XHJcblx0XHRpZiAoIHZlICkge1xyXG5cdFx0XHRpZiAoIHZlLmlzRGVmYXVsdFByZXZlbnRlZCgpICkge1xyXG5cdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKCB2ZS5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpICkge1xyXG5cdFx0XHRcdGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICggdmUuaXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQoKSApIHtcclxuXHRcdFx0XHRldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlVG91Y2hTdGFydCggZXZlbnQgKSB7XHJcblxyXG5cdHZhciB0b3VjaGVzID0gZ2V0TmF0aXZlRXZlbnQoIGV2ZW50ICkudG91Y2hlcyxcclxuXHRcdHRhcmdldCwgZmxhZ3MsIHQ7XHJcblxyXG5cdGlmICggdG91Y2hlcyAmJiB0b3VjaGVzLmxlbmd0aCA9PT0gMSApIHtcclxuXHJcblx0XHR0YXJnZXQgPSBldmVudC50YXJnZXQ7XHJcblx0XHRmbGFncyA9IGdldFZpcnR1YWxCaW5kaW5nRmxhZ3MoIHRhcmdldCApO1xyXG5cclxuXHRcdGlmICggZmxhZ3MuaGFzVmlydHVhbEJpbmRpbmcgKSB7XHJcblxyXG5cdFx0XHRsYXN0VG91Y2hJRCA9IG5leHRUb3VjaElEKys7XHJcblx0XHRcdCQuZGF0YSggdGFyZ2V0LCB0b3VjaFRhcmdldFByb3BlcnR5TmFtZSwgbGFzdFRvdWNoSUQgKTtcclxuXHJcblx0XHRcdGNsZWFyUmVzZXRUaW1lcigpO1xyXG5cclxuXHRcdFx0ZGlzYWJsZU1vdXNlQmluZGluZ3MoKTtcclxuXHRcdFx0ZGlkU2Nyb2xsID0gZmFsc2U7XHJcblxyXG5cdFx0XHR0ID0gZ2V0TmF0aXZlRXZlbnQoIGV2ZW50ICkudG91Y2hlc1sgMCBdO1xyXG5cdFx0XHRzdGFydFggPSB0LnBhZ2VYO1xyXG5cdFx0XHRzdGFydFkgPSB0LnBhZ2VZO1xyXG5cclxuXHRcdFx0dHJpZ2dlclZpcnR1YWxFdmVudCggXCJ2bW91c2VvdmVyXCIsIGV2ZW50LCBmbGFncyApO1xyXG5cdFx0XHR0cmlnZ2VyVmlydHVhbEV2ZW50KCBcInZtb3VzZWRvd25cIiwgZXZlbnQsIGZsYWdzICk7XHJcblx0XHR9XHJcblx0fVxyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVTY3JvbGwoIGV2ZW50ICkge1xyXG5cdGlmICggYmxvY2tUb3VjaFRyaWdnZXJzICkge1xyXG5cdFx0cmV0dXJuO1xyXG5cdH1cclxuXHJcblx0aWYgKCAhZGlkU2Nyb2xsICkge1xyXG5cdFx0dHJpZ2dlclZpcnR1YWxFdmVudCggXCJ2bW91c2VjYW5jZWxcIiwgZXZlbnQsIGdldFZpcnR1YWxCaW5kaW5nRmxhZ3MoIGV2ZW50LnRhcmdldCApICk7XHJcblx0fVxyXG5cclxuXHRkaWRTY3JvbGwgPSB0cnVlO1xyXG5cdHN0YXJ0UmVzZXRUaW1lcigpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVUb3VjaE1vdmUoIGV2ZW50ICkge1xyXG5cdGlmICggYmxvY2tUb3VjaFRyaWdnZXJzICkge1xyXG5cdFx0cmV0dXJuO1xyXG5cdH1cclxuXHJcblx0dmFyIHQgPSBnZXROYXRpdmVFdmVudCggZXZlbnQgKS50b3VjaGVzWyAwIF0sXHJcblx0XHRkaWRDYW5jZWwgPSBkaWRTY3JvbGwsXHJcblx0XHRtb3ZlVGhyZXNob2xkID0gJC52bW91c2UubW92ZURpc3RhbmNlVGhyZXNob2xkLFxyXG5cdFx0ZmxhZ3MgPSBnZXRWaXJ0dWFsQmluZGluZ0ZsYWdzKCBldmVudC50YXJnZXQgKTtcclxuXHJcblx0XHRkaWRTY3JvbGwgPSBkaWRTY3JvbGwgfHxcclxuXHRcdFx0KCBNYXRoLmFicyggdC5wYWdlWCAtIHN0YXJ0WCApID4gbW92ZVRocmVzaG9sZCB8fFxyXG5cdFx0XHRcdE1hdGguYWJzKCB0LnBhZ2VZIC0gc3RhcnRZICkgPiBtb3ZlVGhyZXNob2xkICk7XHJcblxyXG5cdGlmICggZGlkU2Nyb2xsICYmICFkaWRDYW5jZWwgKSB7XHJcblx0XHR0cmlnZ2VyVmlydHVhbEV2ZW50KCBcInZtb3VzZWNhbmNlbFwiLCBldmVudCwgZmxhZ3MgKTtcclxuXHR9XHJcblxyXG5cdHRyaWdnZXJWaXJ0dWFsRXZlbnQoIFwidm1vdXNlbW92ZVwiLCBldmVudCwgZmxhZ3MgKTtcclxuXHRzdGFydFJlc2V0VGltZXIoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlVG91Y2hFbmQoIGV2ZW50ICkge1xyXG5cdGlmICggYmxvY2tUb3VjaFRyaWdnZXJzICkge1xyXG5cdFx0cmV0dXJuO1xyXG5cdH1cclxuXHJcblx0ZGlzYWJsZVRvdWNoQmluZGluZ3MoKTtcclxuXHJcblx0dmFyIGZsYWdzID0gZ2V0VmlydHVhbEJpbmRpbmdGbGFncyggZXZlbnQudGFyZ2V0ICksXHJcblx0XHR2ZSwgdDtcclxuXHR0cmlnZ2VyVmlydHVhbEV2ZW50KCBcInZtb3VzZXVwXCIsIGV2ZW50LCBmbGFncyApO1xyXG5cclxuXHRpZiAoICFkaWRTY3JvbGwgKSB7XHJcblx0XHR2ZSA9IHRyaWdnZXJWaXJ0dWFsRXZlbnQoIFwidmNsaWNrXCIsIGV2ZW50LCBmbGFncyApO1xyXG5cdFx0aWYgKCB2ZSAmJiB2ZS5pc0RlZmF1bHRQcmV2ZW50ZWQoKSApIHtcclxuXHRcdFx0Ly8gVGhlIHRhcmdldCBvZiB0aGUgbW91c2UgZXZlbnRzIHRoYXQgZm9sbG93IHRoZSB0b3VjaGVuZFxyXG5cdFx0XHQvLyBldmVudCBkb24ndCBuZWNlc3NhcmlseSBtYXRjaCB0aGUgdGFyZ2V0IHVzZWQgZHVyaW5nIHRoZVxyXG5cdFx0XHQvLyB0b3VjaC4gVGhpcyBtZWFucyB3ZSBuZWVkIHRvIHJlbHkgb24gY29vcmRpbmF0ZXMgZm9yIGJsb2NraW5nXHJcblx0XHRcdC8vIGFueSBjbGljayB0aGF0IGlzIGdlbmVyYXRlZC5cclxuXHRcdFx0dCA9IGdldE5hdGl2ZUV2ZW50KCBldmVudCApLmNoYW5nZWRUb3VjaGVzWyAwIF07XHJcblx0XHRcdGNsaWNrQmxvY2tMaXN0LnB1c2goe1xyXG5cdFx0XHRcdHRvdWNoSUQ6IGxhc3RUb3VjaElELFxyXG5cdFx0XHRcdHg6IHQuY2xpZW50WCxcclxuXHRcdFx0XHR5OiB0LmNsaWVudFlcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHQvLyBQcmV2ZW50IGFueSBtb3VzZSBldmVudHMgdGhhdCBmb2xsb3cgZnJvbSB0cmlnZ2VyaW5nXHJcblx0XHRcdC8vIHZpcnR1YWwgZXZlbnQgbm90aWZpY2F0aW9ucy5cclxuXHRcdFx0YmxvY2tNb3VzZVRyaWdnZXJzID0gdHJ1ZTtcclxuXHRcdH1cclxuXHR9XHJcblx0dHJpZ2dlclZpcnR1YWxFdmVudCggXCJ2bW91c2VvdXRcIiwgZXZlbnQsIGZsYWdzKTtcclxuXHRkaWRTY3JvbGwgPSBmYWxzZTtcclxuXHJcblx0c3RhcnRSZXNldFRpbWVyKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhc1ZpcnR1YWxCaW5kaW5ncyggZWxlICkge1xyXG5cdHZhciBiaW5kaW5ncyA9ICQuZGF0YSggZWxlLCBkYXRhUHJvcGVydHlOYW1lICksXHJcblx0XHRrO1xyXG5cclxuXHRpZiAoIGJpbmRpbmdzICkge1xyXG5cdFx0Zm9yICggayBpbiBiaW5kaW5ncyApIHtcclxuXHRcdFx0aWYgKCBiaW5kaW5nc1sgayBdICkge1xyXG5cdFx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cdHJldHVybiBmYWxzZTtcclxufVxyXG5cclxuZnVuY3Rpb24gZHVtbXlNb3VzZUhhbmRsZXIoKSB7fVxyXG5cclxuZnVuY3Rpb24gZ2V0U3BlY2lhbEV2ZW50T2JqZWN0KCBldmVudFR5cGUgKSB7XHJcblx0dmFyIHJlYWxUeXBlID0gZXZlbnRUeXBlLnN1YnN0ciggMSApO1xyXG5cclxuXHRyZXR1cm4ge1xyXG5cdFx0c2V0dXA6IGZ1bmN0aW9uKC8qIGRhdGEsIG5hbWVzcGFjZSAqLykge1xyXG5cdFx0XHQvLyBJZiB0aGlzIGlzIHRoZSBmaXJzdCB2aXJ0dWFsIG1vdXNlIGJpbmRpbmcgZm9yIHRoaXMgZWxlbWVudCxcclxuXHRcdFx0Ly8gYWRkIGEgYmluZGluZ3Mgb2JqZWN0IHRvIGl0cyBkYXRhLlxyXG5cclxuXHRcdFx0aWYgKCAhaGFzVmlydHVhbEJpbmRpbmdzKCB0aGlzICkgKSB7XHJcblx0XHRcdFx0JC5kYXRhKCB0aGlzLCBkYXRhUHJvcGVydHlOYW1lLCB7fSApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBJZiBzZXR1cCBpcyBjYWxsZWQsIHdlIGtub3cgaXQgaXMgdGhlIGZpcnN0IGJpbmRpbmcgZm9yIHRoaXNcclxuXHRcdFx0Ly8gZXZlbnRUeXBlLCBzbyBpbml0aWFsaXplIHRoZSBjb3VudCBmb3IgdGhlIGV2ZW50VHlwZSB0byB6ZXJvLlxyXG5cdFx0XHR2YXIgYmluZGluZ3MgPSAkLmRhdGEoIHRoaXMsIGRhdGFQcm9wZXJ0eU5hbWUgKTtcclxuXHRcdFx0YmluZGluZ3NbIGV2ZW50VHlwZSBdID0gdHJ1ZTtcclxuXHJcblx0XHRcdC8vIElmIHRoaXMgaXMgdGhlIGZpcnN0IHZpcnR1YWwgbW91c2UgZXZlbnQgZm9yIHRoaXMgdHlwZSxcclxuXHRcdFx0Ly8gcmVnaXN0ZXIgYSBnbG9iYWwgaGFuZGxlciBvbiB0aGUgZG9jdW1lbnQuXHJcblxyXG5cdFx0XHRhY3RpdmVEb2NIYW5kbGVyc1sgZXZlbnRUeXBlIF0gPSAoIGFjdGl2ZURvY0hhbmRsZXJzWyBldmVudFR5cGUgXSB8fCAwICkgKyAxO1xyXG5cclxuXHRcdFx0aWYgKCBhY3RpdmVEb2NIYW5kbGVyc1sgZXZlbnRUeXBlIF0gPT09IDEgKSB7XHJcblx0XHRcdFx0JGRvY3VtZW50LmJpbmQoIHJlYWxUeXBlLCBtb3VzZUV2ZW50Q2FsbGJhY2sgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gU29tZSBicm93c2VycywgbGlrZSBPcGVyYSBNaW5pLCB3b24ndCBkaXNwYXRjaCBtb3VzZS9jbGljayBldmVudHNcclxuXHRcdFx0Ly8gZm9yIGVsZW1lbnRzIHVubGVzcyB0aGV5IGFjdHVhbGx5IGhhdmUgaGFuZGxlcnMgcmVnaXN0ZXJlZCBvbiB0aGVtLlxyXG5cdFx0XHQvLyBUbyBnZXQgYXJvdW5kIHRoaXMsIHdlIHJlZ2lzdGVyIGR1bW15IGhhbmRsZXJzIG9uIHRoZSBlbGVtZW50cy5cclxuXHJcblx0XHRcdCQoIHRoaXMgKS5iaW5kKCByZWFsVHlwZSwgZHVtbXlNb3VzZUhhbmRsZXIgKTtcclxuXHJcblx0XHRcdC8vIEZvciBub3csIGlmIGV2ZW50IGNhcHR1cmUgaXMgbm90IHN1cHBvcnRlZCwgd2UgcmVseSBvbiBtb3VzZSBoYW5kbGVycy5cclxuXHRcdFx0aWYgKCBldmVudENhcHR1cmVTdXBwb3J0ZWQgKSB7XHJcblx0XHRcdFx0Ly8gSWYgdGhpcyBpcyB0aGUgZmlyc3QgdmlydHVhbCBtb3VzZSBiaW5kaW5nIGZvciB0aGUgZG9jdW1lbnQsXHJcblx0XHRcdFx0Ly8gcmVnaXN0ZXIgb3VyIHRvdWNoc3RhcnQgaGFuZGxlciBvbiB0aGUgZG9jdW1lbnQuXHJcblxyXG5cdFx0XHRcdGFjdGl2ZURvY0hhbmRsZXJzWyBcInRvdWNoc3RhcnRcIiBdID0gKCBhY3RpdmVEb2NIYW5kbGVyc1sgXCJ0b3VjaHN0YXJ0XCIgXSB8fCAwKSArIDE7XHJcblxyXG5cdFx0XHRcdGlmICggYWN0aXZlRG9jSGFuZGxlcnNbIFwidG91Y2hzdGFydFwiIF0gPT09IDEgKSB7XHJcblx0XHRcdFx0XHQkZG9jdW1lbnQuYmluZCggXCJ0b3VjaHN0YXJ0XCIsIGhhbmRsZVRvdWNoU3RhcnQgKVxyXG5cdFx0XHRcdFx0XHQuYmluZCggXCJ0b3VjaGVuZFwiLCBoYW5kbGVUb3VjaEVuZCApXHJcblxyXG5cdFx0XHRcdFx0XHQvLyBPbiB0b3VjaCBwbGF0Zm9ybXMsIHRvdWNoaW5nIHRoZSBzY3JlZW4gYW5kIHRoZW4gZHJhZ2dpbmcgeW91ciBmaW5nZXJcclxuXHRcdFx0XHRcdFx0Ly8gY2F1c2VzIHRoZSB3aW5kb3cgY29udGVudCB0byBzY3JvbGwgYWZ0ZXIgc29tZSBkaXN0YW5jZSB0aHJlc2hvbGQgaXNcclxuXHRcdFx0XHRcdFx0Ly8gZXhjZWVkZWQuIE9uIHRoZXNlIHBsYXRmb3JtcywgYSBzY3JvbGwgcHJldmVudHMgYSBjbGljayBldmVudCBmcm9tIGJlaW5nXHJcblx0XHRcdFx0XHRcdC8vIGRpc3BhdGNoZWQsIGFuZCBvbiBzb21lIHBsYXRmb3JtcywgZXZlbiB0aGUgdG91Y2hlbmQgaXMgc3VwcHJlc3NlZC4gVG9cclxuXHRcdFx0XHRcdFx0Ly8gbWltaWMgdGhlIHN1cHByZXNzaW9uIG9mIHRoZSBjbGljayBldmVudCwgd2UgbmVlZCB0byB3YXRjaCBmb3IgYSBzY3JvbGxcclxuXHRcdFx0XHRcdFx0Ly8gZXZlbnQuIFVuZm9ydHVuYXRlbHksIHNvbWUgcGxhdGZvcm1zIGxpa2UgaU9TIGRvbid0IGRpc3BhdGNoIHNjcm9sbFxyXG5cdFx0XHRcdFx0XHQvLyBldmVudHMgdW50aWwgKkFGVEVSKiB0aGUgdXNlciBsaWZ0cyB0aGVpciBmaW5nZXIgKHRvdWNoZW5kKS4gVGhpcyBtZWFuc1xyXG5cdFx0XHRcdFx0XHQvLyB3ZSBuZWVkIHRvIHdhdGNoIGJvdGggc2Nyb2xsIGFuZCB0b3VjaG1vdmUgZXZlbnRzIHRvIGZpZ3VyZSBvdXQgd2hldGhlclxyXG5cdFx0XHRcdFx0XHQvLyBvciBub3QgYSBzY3JvbGwgaGFwcGVuZW5zIGJlZm9yZSB0aGUgdG91Y2hlbmQgZXZlbnQgaXMgZmlyZWQuXHJcblxyXG5cdFx0XHRcdFx0XHQuYmluZCggXCJ0b3VjaG1vdmVcIiwgaGFuZGxlVG91Y2hNb3ZlIClcclxuXHRcdFx0XHRcdFx0LmJpbmQoIFwic2Nyb2xsXCIsIGhhbmRsZVNjcm9sbCApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHJcblx0XHR0ZWFyZG93bjogZnVuY3Rpb24oLyogZGF0YSwgbmFtZXNwYWNlICovKSB7XHJcblx0XHRcdC8vIElmIHRoaXMgaXMgdGhlIGxhc3QgdmlydHVhbCBiaW5kaW5nIGZvciB0aGlzIGV2ZW50VHlwZSxcclxuXHRcdFx0Ly8gcmVtb3ZlIGl0cyBnbG9iYWwgaGFuZGxlciBmcm9tIHRoZSBkb2N1bWVudC5cclxuXHJcblx0XHRcdC0tYWN0aXZlRG9jSGFuZGxlcnNbIGV2ZW50VHlwZSBdO1xyXG5cclxuXHRcdFx0aWYgKCAhYWN0aXZlRG9jSGFuZGxlcnNbIGV2ZW50VHlwZSBdICkge1xyXG5cdFx0XHRcdCRkb2N1bWVudC51bmJpbmQoIHJlYWxUeXBlLCBtb3VzZUV2ZW50Q2FsbGJhY2sgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKCBldmVudENhcHR1cmVTdXBwb3J0ZWQgKSB7XHJcblx0XHRcdFx0Ly8gSWYgdGhpcyBpcyB0aGUgbGFzdCB2aXJ0dWFsIG1vdXNlIGJpbmRpbmcgaW4gZXhpc3RlbmNlLFxyXG5cdFx0XHRcdC8vIHJlbW92ZSBvdXIgZG9jdW1lbnQgdG91Y2hzdGFydCBsaXN0ZW5lci5cclxuXHJcblx0XHRcdFx0LS1hY3RpdmVEb2NIYW5kbGVyc1sgXCJ0b3VjaHN0YXJ0XCIgXTtcclxuXHJcblx0XHRcdFx0aWYgKCAhYWN0aXZlRG9jSGFuZGxlcnNbIFwidG91Y2hzdGFydFwiIF0gKSB7XHJcblx0XHRcdFx0XHQkZG9jdW1lbnQudW5iaW5kKCBcInRvdWNoc3RhcnRcIiwgaGFuZGxlVG91Y2hTdGFydCApXHJcblx0XHRcdFx0XHRcdC51bmJpbmQoIFwidG91Y2htb3ZlXCIsIGhhbmRsZVRvdWNoTW92ZSApXHJcblx0XHRcdFx0XHRcdC51bmJpbmQoIFwidG91Y2hlbmRcIiwgaGFuZGxlVG91Y2hFbmQgKVxyXG5cdFx0XHRcdFx0XHQudW5iaW5kKCBcInNjcm9sbFwiLCBoYW5kbGVTY3JvbGwgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHZhciAkdGhpcyA9ICQoIHRoaXMgKSxcclxuXHRcdFx0XHRiaW5kaW5ncyA9ICQuZGF0YSggdGhpcywgZGF0YVByb3BlcnR5TmFtZSApO1xyXG5cclxuXHRcdFx0Ly8gdGVhcmRvd24gbWF5IGJlIGNhbGxlZCB3aGVuIGFuIGVsZW1lbnQgd2FzXHJcblx0XHRcdC8vIHJlbW92ZWQgZnJvbSB0aGUgRE9NLiBJZiB0aGlzIGlzIHRoZSBjYXNlLFxyXG5cdFx0XHQvLyBqUXVlcnkgY29yZSBtYXkgaGF2ZSBhbHJlYWR5IHN0cmlwcGVkIHRoZSBlbGVtZW50XHJcblx0XHRcdC8vIG9mIGFueSBkYXRhIGJpbmRpbmdzIHNvIHdlIG5lZWQgdG8gY2hlY2sgaXQgYmVmb3JlXHJcblx0XHRcdC8vIHVzaW5nIGl0LlxyXG5cdFx0XHRpZiAoIGJpbmRpbmdzICkge1xyXG5cdFx0XHRcdGJpbmRpbmdzWyBldmVudFR5cGUgXSA9IGZhbHNlO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBVbnJlZ2lzdGVyIHRoZSBkdW1teSBldmVudCBoYW5kbGVyLlxyXG5cclxuXHRcdFx0JHRoaXMudW5iaW5kKCByZWFsVHlwZSwgZHVtbXlNb3VzZUhhbmRsZXIgKTtcclxuXHJcblx0XHRcdC8vIElmIHRoaXMgaXMgdGhlIGxhc3QgdmlydHVhbCBtb3VzZSBiaW5kaW5nIG9uIHRoZVxyXG5cdFx0XHQvLyBlbGVtZW50LCByZW1vdmUgdGhlIGJpbmRpbmcgZGF0YSBmcm9tIHRoZSBlbGVtZW50LlxyXG5cclxuXHRcdFx0aWYgKCAhaGFzVmlydHVhbEJpbmRpbmdzKCB0aGlzICkgKSB7XHJcblx0XHRcdFx0JHRoaXMucmVtb3ZlRGF0YSggZGF0YVByb3BlcnR5TmFtZSApO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fTtcclxufVxyXG5cclxuLy8gRXhwb3NlIG91ciBjdXN0b20gZXZlbnRzIHRvIHRoZSBqUXVlcnkgYmluZC91bmJpbmQgbWVjaGFuaXNtLlxyXG5cclxuZm9yICggaSA9IDA7IGkgPCB2aXJ0dWFsRXZlbnROYW1lcy5sZW5ndGg7IGkrKyApIHtcclxuXHQkLmV2ZW50LnNwZWNpYWxbIHZpcnR1YWxFdmVudE5hbWVzWyBpIF0gXSA9IGdldFNwZWNpYWxFdmVudE9iamVjdCggdmlydHVhbEV2ZW50TmFtZXNbIGkgXSApO1xyXG59XHJcblxyXG4vLyBBZGQgYSBjYXB0dXJlIGNsaWNrIGhhbmRsZXIgdG8gYmxvY2sgY2xpY2tzLlxyXG4vLyBOb3RlIHRoYXQgd2UgcmVxdWlyZSBldmVudCBjYXB0dXJlIHN1cHBvcnQgZm9yIHRoaXMgc28gaWYgdGhlIGRldmljZVxyXG4vLyBkb2Vzbid0IHN1cHBvcnQgaXQsIHdlIHB1bnQgZm9yIG5vdyBhbmQgcmVseSBzb2xlbHkgb24gbW91c2UgZXZlbnRzLlxyXG5pZiAoIGV2ZW50Q2FwdHVyZVN1cHBvcnRlZCApIHtcclxuXHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCBcImNsaWNrXCIsIGZ1bmN0aW9uKCBlICkge1xyXG5cdFx0dmFyIGNudCA9IGNsaWNrQmxvY2tMaXN0Lmxlbmd0aCxcclxuXHRcdFx0dGFyZ2V0ID0gZS50YXJnZXQsXHJcblx0XHRcdHgsIHksIGVsZSwgaSwgbywgdG91Y2hJRDtcclxuXHJcblx0XHRpZiAoIGNudCApIHtcclxuXHRcdFx0eCA9IGUuY2xpZW50WDtcclxuXHRcdFx0eSA9IGUuY2xpZW50WTtcclxuXHRcdFx0dGhyZXNob2xkID0gJC52bW91c2UuY2xpY2tEaXN0YW5jZVRocmVzaG9sZDtcclxuXHJcblx0XHRcdC8vIFRoZSBpZGVhIGhlcmUgaXMgdG8gcnVuIHRocm91Z2ggdGhlIGNsaWNrQmxvY2tMaXN0IHRvIHNlZSBpZlxyXG5cdFx0XHQvLyB0aGUgY3VycmVudCBjbGljayBldmVudCBpcyBpbiB0aGUgcHJveGltaXR5IG9mIG9uZSBvZiBvdXJcclxuXHRcdFx0Ly8gdmNsaWNrIGV2ZW50cyB0aGF0IGhhZCBwcmV2ZW50RGVmYXVsdCgpIGNhbGxlZCBvbiBpdC4gSWYgd2UgZmluZFxyXG5cdFx0XHQvLyBvbmUsIHRoZW4gd2UgYmxvY2sgdGhlIGNsaWNrLlxyXG5cdFx0XHQvL1xyXG5cdFx0XHQvLyBXaHkgZG8gd2UgaGF2ZSB0byByZWx5IG9uIHByb3hpbWl0eT9cclxuXHRcdFx0Ly9cclxuXHRcdFx0Ly8gQmVjYXVzZSB0aGUgdGFyZ2V0IG9mIHRoZSB0b3VjaCBldmVudCB0aGF0IHRyaWdnZXJlZCB0aGUgdmNsaWNrXHJcblx0XHRcdC8vIGNhbiBiZSBkaWZmZXJlbnQgZnJvbSB0aGUgdGFyZ2V0IG9mIHRoZSBjbGljayBldmVudCBzeW50aGVzaXplZFxyXG5cdFx0XHQvLyBieSB0aGUgYnJvd3Nlci4gVGhlIHRhcmdldCBvZiBhIG1vdXNlL2NsaWNrIGV2ZW50IHRoYXQgaXMgc3ludGhlc2l6ZWRcclxuXHRcdFx0Ly8gZnJvbSBhIHRvdWNoIGV2ZW50IHNlZW1zIHRvIGJlIGltcGxlbWVudGF0aW9uIHNwZWNpZmljLiBGb3IgZXhhbXBsZSxcclxuXHRcdFx0Ly8gc29tZSBicm93c2VycyB3aWxsIGZpcmUgbW91c2UvY2xpY2sgZXZlbnRzIGZvciBhIGxpbmsgdGhhdCBpcyBuZWFyXHJcblx0XHRcdC8vIGEgdG91Y2ggZXZlbnQsIGV2ZW4gdGhvdWdoIHRoZSB0YXJnZXQgb2YgdGhlIHRvdWNoc3RhcnQvdG91Y2hlbmQgZXZlbnRcclxuXHRcdFx0Ly8gc2F5cyB0aGUgdXNlciB0b3VjaGVkIG91dHNpZGUgdGhlIGxpbmsuIEFsc28sIGl0IHNlZW1zIHRoYXQgd2l0aCBtb3N0XHJcblx0XHRcdC8vIGJyb3dzZXJzLCB0aGUgdGFyZ2V0IG9mIHRoZSBtb3VzZS9jbGljayBldmVudCBpcyBub3QgY2FsY3VsYXRlZCB1bnRpbCB0aGVcclxuXHRcdFx0Ly8gdGltZSBpdCBpcyBkaXNwYXRjaGVkLCBzbyBpZiB5b3UgcmVwbGFjZSBhbiBlbGVtZW50IHRoYXQgeW91IHRvdWNoZWRcclxuXHRcdFx0Ly8gd2l0aCBhbm90aGVyIGVsZW1lbnQsIHRoZSB0YXJnZXQgb2YgdGhlIG1vdXNlL2NsaWNrIHdpbGwgYmUgdGhlIG5ld1xyXG5cdFx0XHQvLyBlbGVtZW50IHVuZGVybmVhdGggdGhhdCBwb2ludC5cclxuXHRcdFx0Ly9cclxuXHRcdFx0Ly8gQXNpZGUgZnJvbSBwcm94aW1pdHksIHdlIGFsc28gY2hlY2sgdG8gc2VlIGlmIHRoZSB0YXJnZXQgYW5kIGFueVxyXG5cdFx0XHQvLyBvZiBpdHMgYW5jZXN0b3JzIHdlcmUgdGhlIG9uZXMgdGhhdCBibG9ja2VkIGEgY2xpY2suIFRoaXMgaXMgbmVjZXNzYXJ5XHJcblx0XHRcdC8vIGJlY2F1c2Ugb2YgdGhlIHN0cmFuZ2UgbW91c2UvY2xpY2sgdGFyZ2V0IGNhbGN1bGF0aW9uIGRvbmUgaW4gdGhlXHJcblx0XHRcdC8vIEFuZHJvaWQgMi4xIGJyb3dzZXIsIHdoZXJlIGlmIHlvdSBjbGljayBvbiBhbiBlbGVtZW50LCBhbmQgdGhlcmUgaXMgYVxyXG5cdFx0XHQvLyBtb3VzZS9jbGljayBoYW5kbGVyIG9uIG9uZSBvZiBpdHMgYW5jZXN0b3JzLCB0aGUgdGFyZ2V0IHdpbGwgYmUgdGhlXHJcblx0XHRcdC8vIGlubmVybW9zdCBjaGlsZCBvZiB0aGUgdG91Y2hlZCBlbGVtZW50LCBldmVuIGlmIHRoYXQgY2hpbGQgaXMgbm8gd2hlcmVcclxuXHRcdFx0Ly8gbmVhciB0aGUgcG9pbnQgb2YgdG91Y2guXHJcblxyXG5cdFx0XHRlbGUgPSB0YXJnZXQ7XHJcblxyXG5cdFx0XHR3aGlsZSAoIGVsZSApIHtcclxuXHRcdFx0XHRmb3IgKCBpID0gMDsgaSA8IGNudDsgaSsrICkge1xyXG5cdFx0XHRcdFx0byA9IGNsaWNrQmxvY2tMaXN0WyBpIF07XHJcblx0XHRcdFx0XHR0b3VjaElEID0gMDtcclxuXHJcblx0XHRcdFx0XHRpZiAoICggZWxlID09PSB0YXJnZXQgJiYgTWF0aC5hYnMoIG8ueCAtIHggKSA8IHRocmVzaG9sZCAmJiBNYXRoLmFicyggby55IC0geSApIDwgdGhyZXNob2xkICkgfHxcclxuXHRcdFx0XHRcdFx0XHRcdCQuZGF0YSggZWxlLCB0b3VjaFRhcmdldFByb3BlcnR5TmFtZSApID09PSBvLnRvdWNoSUQgKSB7XHJcblx0XHRcdFx0XHRcdC8vIFhYWDogV2UgbWF5IHdhbnQgdG8gY29uc2lkZXIgcmVtb3ZpbmcgbWF0Y2hlcyBmcm9tIHRoZSBibG9jayBsaXN0XHJcblx0XHRcdFx0XHRcdC8vICAgICAgaW5zdGVhZCBvZiB3YWl0aW5nIGZvciB0aGUgcmVzZXQgdGltZXIgdG8gZmlyZS5cclxuXHRcdFx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGVsZSA9IGVsZS5wYXJlbnROb2RlO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fSwgdHJ1ZSk7XHJcbn1cclxufSkoIGpRdWVyeSwgd2luZG93LCBkb2N1bWVudCApO1xyXG5cclxuXHJcbihmdW5jdGlvbiggJCwgd2luZG93LCB1bmRlZmluZWQgKSB7XHJcblx0dmFyICRkb2N1bWVudCA9ICQoIGRvY3VtZW50ICksXHJcblx0XHRzdXBwb3J0VG91Y2ggPSAkLm1vYmlsZS5zdXBwb3J0LnRvdWNoLFxyXG5cdFx0c2Nyb2xsRXZlbnQgPSBcInRvdWNobW92ZSBzY3JvbGxcIixcclxuXHRcdHRvdWNoU3RhcnRFdmVudCA9IHN1cHBvcnRUb3VjaCA/IFwidG91Y2hzdGFydFwiIDogXCJtb3VzZWRvd25cIixcclxuXHRcdHRvdWNoU3RvcEV2ZW50ID0gc3VwcG9ydFRvdWNoID8gXCJ0b3VjaGVuZFwiIDogXCJtb3VzZXVwXCIsXHJcblx0XHR0b3VjaE1vdmVFdmVudCA9IHN1cHBvcnRUb3VjaCA/IFwidG91Y2htb3ZlXCIgOiBcIm1vdXNlbW92ZVwiO1xyXG5cclxuXHQvLyBzZXR1cCBuZXcgZXZlbnQgc2hvcnRjdXRzXHJcblx0JC5lYWNoKCAoIFwidG91Y2hzdGFydCB0b3VjaG1vdmUgdG91Y2hlbmQgXCIgK1xyXG5cdFx0XCJ0YXAgdGFwaG9sZCBcIiArXHJcblx0XHRcInN3aXBlIHN3aXBlbGVmdCBzd2lwZXJpZ2h0IFwiICtcclxuXHRcdFwic2Nyb2xsc3RhcnQgc2Nyb2xsc3RvcFwiICkuc3BsaXQoIFwiIFwiICksIGZ1bmN0aW9uKCBpLCBuYW1lICkge1xyXG5cclxuXHRcdCQuZm5bIG5hbWUgXSA9IGZ1bmN0aW9uKCBmbiApIHtcclxuXHRcdFx0cmV0dXJuIGZuID8gdGhpcy5iaW5kKCBuYW1lLCBmbiApIDogdGhpcy50cmlnZ2VyKCBuYW1lICk7XHJcblx0XHR9O1xyXG5cclxuXHRcdC8vIGpRdWVyeSA8IDEuOFxyXG5cdFx0aWYgKCAkLmF0dHJGbiApIHtcclxuXHRcdFx0JC5hdHRyRm5bIG5hbWUgXSA9IHRydWU7XHJcblx0XHR9XHJcblx0fSk7XHJcblxyXG5cdGZ1bmN0aW9uIHRyaWdnZXJDdXN0b21FdmVudCggb2JqLCBldmVudFR5cGUsIGV2ZW50LCBidWJibGUgKSB7XHJcblx0XHR2YXIgb3JpZ2luYWxUeXBlID0gZXZlbnQudHlwZTtcclxuXHRcdGV2ZW50LnR5cGUgPSBldmVudFR5cGU7XHJcblx0XHRpZiAoIGJ1YmJsZSApIHtcclxuXHRcdFx0JC5ldmVudC50cmlnZ2VyKCBldmVudCwgdW5kZWZpbmVkLCBvYmogKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdCQuZXZlbnQuZGlzcGF0Y2guY2FsbCggb2JqLCBldmVudCApO1xyXG5cdFx0fVxyXG5cdFx0ZXZlbnQudHlwZSA9IG9yaWdpbmFsVHlwZTtcclxuXHR9XHJcblxyXG5cdC8vIGFsc28gaGFuZGxlcyBzY3JvbGxzdG9wXHJcblx0JC5ldmVudC5zcGVjaWFsLnNjcm9sbHN0YXJ0ID0ge1xyXG5cclxuXHRcdGVuYWJsZWQ6IHRydWUsXHJcblx0XHRzZXR1cDogZnVuY3Rpb24oKSB7XHJcblxyXG5cdFx0XHR2YXIgdGhpc09iamVjdCA9IHRoaXMsXHJcblx0XHRcdFx0JHRoaXMgPSAkKCB0aGlzT2JqZWN0ICksXHJcblx0XHRcdFx0c2Nyb2xsaW5nLFxyXG5cdFx0XHRcdHRpbWVyO1xyXG5cclxuXHRcdFx0ZnVuY3Rpb24gdHJpZ2dlciggZXZlbnQsIHN0YXRlICkge1xyXG5cdFx0XHRcdHNjcm9sbGluZyA9IHN0YXRlO1xyXG5cdFx0XHRcdHRyaWdnZXJDdXN0b21FdmVudCggdGhpc09iamVjdCwgc2Nyb2xsaW5nID8gXCJzY3JvbGxzdGFydFwiIDogXCJzY3JvbGxzdG9wXCIsIGV2ZW50ICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIGlQaG9uZSB0cmlnZ2VycyBzY3JvbGwgYWZ0ZXIgYSBzbWFsbCBkZWxheTsgdXNlIHRvdWNobW92ZSBpbnN0ZWFkXHJcblx0XHRcdCR0aGlzLmJpbmQoIHNjcm9sbEV2ZW50LCBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblxyXG5cdFx0XHRcdGlmICggISQuZXZlbnQuc3BlY2lhbC5zY3JvbGxzdGFydC5lbmFibGVkICkge1xyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0aWYgKCAhc2Nyb2xsaW5nICkge1xyXG5cdFx0XHRcdFx0dHJpZ2dlciggZXZlbnQsIHRydWUgKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGNsZWFyVGltZW91dCggdGltZXIgKTtcclxuXHRcdFx0XHR0aW1lciA9IHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0dHJpZ2dlciggZXZlbnQsIGZhbHNlICk7XHJcblx0XHRcdFx0fSwgNTAgKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9LFxyXG5cdFx0dGVhcmRvd246IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHQkKCB0aGlzICkudW5iaW5kKCBzY3JvbGxFdmVudCApO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdC8vIGFsc28gaGFuZGxlcyB0YXBob2xkXHJcblx0JC5ldmVudC5zcGVjaWFsLnRhcCA9IHtcclxuXHRcdHRhcGhvbGRUaHJlc2hvbGQ6IDc1MCxcclxuXHRcdGVtaXRUYXBPblRhcGhvbGQ6IHRydWUsXHJcblx0XHRzZXR1cDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciB0aGlzT2JqZWN0ID0gdGhpcyxcclxuXHRcdFx0XHQkdGhpcyA9ICQoIHRoaXNPYmplY3QgKSxcclxuXHRcdFx0XHRpc1RhcGhvbGQgPSBmYWxzZTtcclxuXHJcblx0XHRcdCR0aGlzLmJpbmQoIFwidm1vdXNlZG93blwiLCBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHRcdFx0aXNUYXBob2xkID0gZmFsc2U7XHJcblx0XHRcdFx0aWYgKCBldmVudC53aGljaCAmJiBldmVudC53aGljaCAhPT0gMSApIHtcclxuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdHZhciBvcmlnVGFyZ2V0ID0gZXZlbnQudGFyZ2V0LFxyXG5cdFx0XHRcdFx0dGltZXI7XHJcblxyXG5cdFx0XHRcdGZ1bmN0aW9uIGNsZWFyVGFwVGltZXIoKSB7XHJcblx0XHRcdFx0XHRjbGVhclRpbWVvdXQoIHRpbWVyICk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRmdW5jdGlvbiBjbGVhclRhcEhhbmRsZXJzKCkge1xyXG5cdFx0XHRcdFx0Y2xlYXJUYXBUaW1lcigpO1xyXG5cclxuXHRcdFx0XHRcdCR0aGlzLnVuYmluZCggXCJ2Y2xpY2tcIiwgY2xpY2tIYW5kbGVyIClcclxuXHRcdFx0XHRcdFx0LnVuYmluZCggXCJ2bW91c2V1cFwiLCBjbGVhclRhcFRpbWVyICk7XHJcblx0XHRcdFx0XHQkZG9jdW1lbnQudW5iaW5kKCBcInZtb3VzZWNhbmNlbFwiLCBjbGVhclRhcEhhbmRsZXJzICk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRmdW5jdGlvbiBjbGlja0hhbmRsZXIoIGV2ZW50ICkge1xyXG5cdFx0XHRcdFx0Y2xlYXJUYXBIYW5kbGVycygpO1xyXG5cclxuXHRcdFx0XHRcdC8vIE9OTFkgdHJpZ2dlciBhICd0YXAnIGV2ZW50IGlmIHRoZSBzdGFydCB0YXJnZXQgaXNcclxuXHRcdFx0XHRcdC8vIHRoZSBzYW1lIGFzIHRoZSBzdG9wIHRhcmdldC5cclxuXHRcdFx0XHRcdGlmICggIWlzVGFwaG9sZCAmJiBvcmlnVGFyZ2V0ID09PSBldmVudC50YXJnZXQgKSB7XHJcblx0XHRcdFx0XHRcdHRyaWdnZXJDdXN0b21FdmVudCggdGhpc09iamVjdCwgXCJ0YXBcIiwgZXZlbnQgKTtcclxuXHRcdFx0XHRcdH0gZWxzZSBpZiAoIGlzVGFwaG9sZCApIHtcclxuXHRcdFx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdCR0aGlzLmJpbmQoIFwidm1vdXNldXBcIiwgY2xlYXJUYXBUaW1lciApXHJcblx0XHRcdFx0XHQuYmluZCggXCJ2Y2xpY2tcIiwgY2xpY2tIYW5kbGVyICk7XHJcblx0XHRcdFx0JGRvY3VtZW50LmJpbmQoIFwidm1vdXNlY2FuY2VsXCIsIGNsZWFyVGFwSGFuZGxlcnMgKTtcclxuXHJcblx0XHRcdFx0dGltZXIgPSBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdGlmICggISQuZXZlbnQuc3BlY2lhbC50YXAuZW1pdFRhcE9uVGFwaG9sZCApIHtcclxuXHRcdFx0XHRcdFx0aXNUYXBob2xkID0gdHJ1ZTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdHRyaWdnZXJDdXN0b21FdmVudCggdGhpc09iamVjdCwgXCJ0YXBob2xkXCIsICQuRXZlbnQoIFwidGFwaG9sZFwiLCB7IHRhcmdldDogb3JpZ1RhcmdldCB9ICkgKTtcclxuXHRcdFx0XHR9LCAkLmV2ZW50LnNwZWNpYWwudGFwLnRhcGhvbGRUaHJlc2hvbGQgKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9LFxyXG5cdFx0dGVhcmRvd246IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHQkKCB0aGlzICkudW5iaW5kKCBcInZtb3VzZWRvd25cIiApLnVuYmluZCggXCJ2Y2xpY2tcIiApLnVuYmluZCggXCJ2bW91c2V1cFwiICk7XHJcblx0XHRcdCRkb2N1bWVudC51bmJpbmQoIFwidm1vdXNlY2FuY2VsXCIgKTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHQvLyBBbHNvIGhhbmRsZXMgc3dpcGVsZWZ0LCBzd2lwZXJpZ2h0XHJcblx0JC5ldmVudC5zcGVjaWFsLnN3aXBlID0ge1xyXG5cclxuXHRcdC8vIE1vcmUgdGhhbiB0aGlzIGhvcml6b250YWwgZGlzcGxhY2VtZW50LCBhbmQgd2Ugd2lsbCBzdXBwcmVzcyBzY3JvbGxpbmcuXHJcblx0XHRzY3JvbGxTdXByZXNzaW9uVGhyZXNob2xkOiAzMCxcclxuXHJcblx0XHQvLyBNb3JlIHRpbWUgdGhhbiB0aGlzLCBhbmQgaXQgaXNuJ3QgYSBzd2lwZS5cclxuXHRcdGR1cmF0aW9uVGhyZXNob2xkOiAxMDAwLFxyXG5cclxuXHRcdC8vIFN3aXBlIGhvcml6b250YWwgZGlzcGxhY2VtZW50IG11c3QgYmUgbW9yZSB0aGFuIHRoaXMuXHJcblx0XHRob3Jpem9udGFsRGlzdGFuY2VUaHJlc2hvbGQ6IDMwLFxyXG5cclxuXHRcdC8vIFN3aXBlIHZlcnRpY2FsIGRpc3BsYWNlbWVudCBtdXN0IGJlIGxlc3MgdGhhbiB0aGlzLlxyXG5cdFx0dmVydGljYWxEaXN0YW5jZVRocmVzaG9sZDogMzAsXHJcblxyXG5cdFx0Z2V0TG9jYXRpb246IGZ1bmN0aW9uICggZXZlbnQgKSB7XHJcblx0XHRcdHZhciB3aW5QYWdlWCA9IHdpbmRvdy5wYWdlWE9mZnNldCxcclxuXHRcdFx0XHR3aW5QYWdlWSA9IHdpbmRvdy5wYWdlWU9mZnNldCxcclxuXHRcdFx0XHR4ID0gZXZlbnQuY2xpZW50WCxcclxuXHRcdFx0XHR5ID0gZXZlbnQuY2xpZW50WTtcclxuXHJcblx0XHRcdGlmICggZXZlbnQucGFnZVkgPT09IDAgJiYgTWF0aC5mbG9vciggeSApID4gTWF0aC5mbG9vciggZXZlbnQucGFnZVkgKSB8fFxyXG5cdFx0XHRcdGV2ZW50LnBhZ2VYID09PSAwICYmIE1hdGguZmxvb3IoIHggKSA+IE1hdGguZmxvb3IoIGV2ZW50LnBhZ2VYICkgKSB7XHJcblxyXG5cdFx0XHRcdC8vIGlPUzQgY2xpZW50WC9jbGllbnRZIGhhdmUgdGhlIHZhbHVlIHRoYXQgc2hvdWxkIGhhdmUgYmVlblxyXG5cdFx0XHRcdC8vIGluIHBhZ2VYL3BhZ2VZLiBXaGlsZSBwYWdlWC9wYWdlLyBoYXZlIHRoZSB2YWx1ZSAwXHJcblx0XHRcdFx0eCA9IHggLSB3aW5QYWdlWDtcclxuXHRcdFx0XHR5ID0geSAtIHdpblBhZ2VZO1xyXG5cdFx0XHR9IGVsc2UgaWYgKCB5IDwgKCBldmVudC5wYWdlWSAtIHdpblBhZ2VZKSB8fCB4IDwgKCBldmVudC5wYWdlWCAtIHdpblBhZ2VYICkgKSB7XHJcblxyXG5cdFx0XHRcdC8vIFNvbWUgQW5kcm9pZCBicm93c2VycyBoYXZlIHRvdGFsbHkgYm9ndXMgdmFsdWVzIGZvciBjbGllbnRYL1lcclxuXHRcdFx0XHQvLyB3aGVuIHNjcm9sbGluZy96b29taW5nIGEgcGFnZS4gRGV0ZWN0YWJsZSBzaW5jZSBjbGllbnRYL2NsaWVudFlcclxuXHRcdFx0XHQvLyBzaG91bGQgbmV2ZXIgYmUgc21hbGxlciB0aGFuIHBhZ2VYL3BhZ2VZIG1pbnVzIHBhZ2Ugc2Nyb2xsXHJcblx0XHRcdFx0eCA9IGV2ZW50LnBhZ2VYIC0gd2luUGFnZVg7XHJcblx0XHRcdFx0eSA9IGV2ZW50LnBhZ2VZIC0gd2luUGFnZVk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHJldHVybiB7XHJcblx0XHRcdFx0eDogeCxcclxuXHRcdFx0XHR5OiB5XHJcblx0XHRcdH07XHJcblx0XHR9LFxyXG5cclxuXHRcdHN0YXJ0OiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHRcdHZhciBkYXRhID0gZXZlbnQub3JpZ2luYWxFdmVudC50b3VjaGVzID9cclxuXHRcdFx0XHRcdGV2ZW50Lm9yaWdpbmFsRXZlbnQudG91Y2hlc1sgMCBdIDogZXZlbnQsXHJcblx0XHRcdFx0bG9jYXRpb24gPSAkLmV2ZW50LnNwZWNpYWwuc3dpcGUuZ2V0TG9jYXRpb24oIGRhdGEgKTtcclxuXHRcdFx0cmV0dXJuIHtcclxuXHRcdFx0XHRcdFx0dGltZTogKCBuZXcgRGF0ZSgpICkuZ2V0VGltZSgpLFxyXG5cdFx0XHRcdFx0XHRjb29yZHM6IFsgbG9jYXRpb24ueCwgbG9jYXRpb24ueSBdLFxyXG5cdFx0XHRcdFx0XHRvcmlnaW46ICQoIGV2ZW50LnRhcmdldCApXHJcblx0XHRcdFx0XHR9O1xyXG5cdFx0fSxcclxuXHJcblx0XHRzdG9wOiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHRcdHZhciBkYXRhID0gZXZlbnQub3JpZ2luYWxFdmVudC50b3VjaGVzID9cclxuXHRcdFx0XHRcdGV2ZW50Lm9yaWdpbmFsRXZlbnQudG91Y2hlc1sgMCBdIDogZXZlbnQsXHJcblx0XHRcdFx0bG9jYXRpb24gPSAkLmV2ZW50LnNwZWNpYWwuc3dpcGUuZ2V0TG9jYXRpb24oIGRhdGEgKTtcclxuXHRcdFx0cmV0dXJuIHtcclxuXHRcdFx0XHRcdFx0dGltZTogKCBuZXcgRGF0ZSgpICkuZ2V0VGltZSgpLFxyXG5cdFx0XHRcdFx0XHRjb29yZHM6IFsgbG9jYXRpb24ueCwgbG9jYXRpb24ueSBdXHJcblx0XHRcdFx0XHR9O1xyXG5cdFx0fSxcclxuXHJcblx0XHRoYW5kbGVTd2lwZTogZnVuY3Rpb24oIHN0YXJ0LCBzdG9wLCB0aGlzT2JqZWN0LCBvcmlnVGFyZ2V0ICkge1xyXG5cdFx0XHRpZiAoIHN0b3AudGltZSAtIHN0YXJ0LnRpbWUgPCAkLmV2ZW50LnNwZWNpYWwuc3dpcGUuZHVyYXRpb25UaHJlc2hvbGQgJiZcclxuXHRcdFx0XHRNYXRoLmFicyggc3RhcnQuY29vcmRzWyAwIF0gLSBzdG9wLmNvb3Jkc1sgMCBdICkgPiAkLmV2ZW50LnNwZWNpYWwuc3dpcGUuaG9yaXpvbnRhbERpc3RhbmNlVGhyZXNob2xkICYmXHJcblx0XHRcdFx0TWF0aC5hYnMoIHN0YXJ0LmNvb3Jkc1sgMSBdIC0gc3RvcC5jb29yZHNbIDEgXSApIDwgJC5ldmVudC5zcGVjaWFsLnN3aXBlLnZlcnRpY2FsRGlzdGFuY2VUaHJlc2hvbGQgKSB7XHJcblx0XHRcdFx0dmFyIGRpcmVjdGlvbiA9IHN0YXJ0LmNvb3Jkc1swXSA+IHN0b3AuY29vcmRzWyAwIF0gPyBcInN3aXBlbGVmdFwiIDogXCJzd2lwZXJpZ2h0XCI7XHJcblxyXG5cdFx0XHRcdHRyaWdnZXJDdXN0b21FdmVudCggdGhpc09iamVjdCwgXCJzd2lwZVwiLCAkLkV2ZW50KCBcInN3aXBlXCIsIHsgdGFyZ2V0OiBvcmlnVGFyZ2V0LCBzd2lwZXN0YXJ0OiBzdGFydCwgc3dpcGVzdG9wOiBzdG9wIH0pLCB0cnVlICk7XHJcblx0XHRcdFx0dHJpZ2dlckN1c3RvbUV2ZW50KCB0aGlzT2JqZWN0LCBkaXJlY3Rpb24sJC5FdmVudCggZGlyZWN0aW9uLCB7IHRhcmdldDogb3JpZ1RhcmdldCwgc3dpcGVzdGFydDogc3RhcnQsIHN3aXBlc3RvcDogc3RvcCB9ICksIHRydWUgKTtcclxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblxyXG5cdFx0fSxcclxuXHJcblx0XHQvLyBUaGlzIHNlcnZlcyBhcyBhIGZsYWcgdG8gZW5zdXJlIHRoYXQgYXQgbW9zdCBvbmUgc3dpcGUgZXZlbnQgZXZlbnQgaXNcclxuXHRcdC8vIGluIHdvcmsgYXQgYW55IGdpdmVuIHRpbWVcclxuXHRcdGV2ZW50SW5Qcm9ncmVzczogZmFsc2UsXHJcblxyXG5cdFx0c2V0dXA6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgZXZlbnRzLFxyXG5cdFx0XHRcdHRoaXNPYmplY3QgPSB0aGlzLFxyXG5cdFx0XHRcdCR0aGlzID0gJCggdGhpc09iamVjdCApLFxyXG5cdFx0XHRcdGNvbnRleHQgPSB7fTtcclxuXHJcblx0XHRcdC8vIFJldHJpZXZlIHRoZSBldmVudHMgZGF0YSBmb3IgdGhpcyBlbGVtZW50IGFuZCBhZGQgdGhlIHN3aXBlIGNvbnRleHRcclxuXHRcdFx0ZXZlbnRzID0gJC5kYXRhKCB0aGlzLCBcIm1vYmlsZS1ldmVudHNcIiApO1xyXG5cdFx0XHRpZiAoICFldmVudHMgKSB7XHJcblx0XHRcdFx0ZXZlbnRzID0geyBsZW5ndGg6IDAgfTtcclxuXHRcdFx0XHQkLmRhdGEoIHRoaXMsIFwibW9iaWxlLWV2ZW50c1wiLCBldmVudHMgKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRldmVudHMubGVuZ3RoKys7XHJcblx0XHRcdGV2ZW50cy5zd2lwZSA9IGNvbnRleHQ7XHJcblxyXG5cdFx0XHRjb250ZXh0LnN0YXJ0ID0gZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cclxuXHRcdFx0XHQvLyBCYWlsIGlmIHdlJ3JlIGFscmVhZHkgd29ya2luZyBvbiBhIHN3aXBlIGV2ZW50XHJcblx0XHRcdFx0aWYgKCAkLmV2ZW50LnNwZWNpYWwuc3dpcGUuZXZlbnRJblByb2dyZXNzICkge1xyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQkLmV2ZW50LnNwZWNpYWwuc3dpcGUuZXZlbnRJblByb2dyZXNzID0gdHJ1ZTtcclxuXHJcblx0XHRcdFx0dmFyIHN0b3AsXHJcblx0XHRcdFx0XHRzdGFydCA9ICQuZXZlbnQuc3BlY2lhbC5zd2lwZS5zdGFydCggZXZlbnQgKSxcclxuXHRcdFx0XHRcdG9yaWdUYXJnZXQgPSBldmVudC50YXJnZXQsXHJcblx0XHRcdFx0XHRlbWl0dGVkID0gZmFsc2U7XHJcblxyXG5cdFx0XHRcdGNvbnRleHQubW92ZSA9IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdFx0XHRcdGlmICggIXN0YXJ0IHx8IGV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpICkge1xyXG5cdFx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0c3RvcCA9ICQuZXZlbnQuc3BlY2lhbC5zd2lwZS5zdG9wKCBldmVudCApO1xyXG5cdFx0XHRcdFx0aWYgKCAhZW1pdHRlZCApIHtcclxuXHRcdFx0XHRcdFx0ZW1pdHRlZCA9ICQuZXZlbnQuc3BlY2lhbC5zd2lwZS5oYW5kbGVTd2lwZSggc3RhcnQsIHN0b3AsIHRoaXNPYmplY3QsIG9yaWdUYXJnZXQgKTtcclxuXHRcdFx0XHRcdFx0aWYgKCBlbWl0dGVkICkge1xyXG5cclxuXHRcdFx0XHRcdFx0XHQvLyBSZXNldCB0aGUgY29udGV4dCB0byBtYWtlIHdheSBmb3IgdGhlIG5leHQgc3dpcGUgZXZlbnRcclxuXHRcdFx0XHRcdFx0XHQkLmV2ZW50LnNwZWNpYWwuc3dpcGUuZXZlbnRJblByb2dyZXNzID0gZmFsc2U7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdC8vIHByZXZlbnQgc2Nyb2xsaW5nXHJcblx0XHRcdFx0XHRpZiAoIE1hdGguYWJzKCBzdGFydC5jb29yZHNbIDAgXSAtIHN0b3AuY29vcmRzWyAwIF0gKSA+ICQuZXZlbnQuc3BlY2lhbC5zd2lwZS5zY3JvbGxTdXByZXNzaW9uVGhyZXNob2xkICkge1xyXG5cdFx0XHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH07XHJcblxyXG5cdFx0XHRcdGNvbnRleHQuc3RvcCA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0XHRlbWl0dGVkID0gdHJ1ZTtcclxuXHJcblx0XHRcdFx0XHRcdC8vIFJlc2V0IHRoZSBjb250ZXh0IHRvIG1ha2Ugd2F5IGZvciB0aGUgbmV4dCBzd2lwZSBldmVudFxyXG5cdFx0XHRcdFx0XHQkLmV2ZW50LnNwZWNpYWwuc3dpcGUuZXZlbnRJblByb2dyZXNzID0gZmFsc2U7XHJcblx0XHRcdFx0XHRcdCRkb2N1bWVudC5vZmYoIHRvdWNoTW92ZUV2ZW50LCBjb250ZXh0Lm1vdmUgKTtcclxuXHRcdFx0XHRcdFx0Y29udGV4dC5tb3ZlID0gbnVsbDtcclxuXHRcdFx0XHR9O1xyXG5cclxuXHRcdFx0XHQkZG9jdW1lbnQub24oIHRvdWNoTW92ZUV2ZW50LCBjb250ZXh0Lm1vdmUgKVxyXG5cdFx0XHRcdFx0Lm9uZSggdG91Y2hTdG9wRXZlbnQsIGNvbnRleHQuc3RvcCApO1xyXG5cdFx0XHR9O1xyXG5cdFx0XHQkdGhpcy5vbiggdG91Y2hTdGFydEV2ZW50LCBjb250ZXh0LnN0YXJ0ICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdHRlYXJkb3duOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIGV2ZW50cywgY29udGV4dDtcclxuXHJcblx0XHRcdGV2ZW50cyA9ICQuZGF0YSggdGhpcywgXCJtb2JpbGUtZXZlbnRzXCIgKTtcclxuXHRcdFx0aWYgKCBldmVudHMgKSB7XHJcblx0XHRcdFx0Y29udGV4dCA9IGV2ZW50cy5zd2lwZTtcclxuXHRcdFx0XHRkZWxldGUgZXZlbnRzLnN3aXBlO1xyXG5cdFx0XHRcdGV2ZW50cy5sZW5ndGgtLTtcclxuXHRcdFx0XHRpZiAoIGV2ZW50cy5sZW5ndGggPT09IDAgKSB7XHJcblx0XHRcdFx0XHQkLnJlbW92ZURhdGEoIHRoaXMsIFwibW9iaWxlLWV2ZW50c1wiICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoIGNvbnRleHQgKSB7XHJcblx0XHRcdFx0aWYgKCBjb250ZXh0LnN0YXJ0ICkge1xyXG5cdFx0XHRcdFx0JCggdGhpcyApLm9mZiggdG91Y2hTdGFydEV2ZW50LCBjb250ZXh0LnN0YXJ0ICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmICggY29udGV4dC5tb3ZlICkge1xyXG5cdFx0XHRcdFx0JGRvY3VtZW50Lm9mZiggdG91Y2hNb3ZlRXZlbnQsIGNvbnRleHQubW92ZSApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZiAoIGNvbnRleHQuc3RvcCApIHtcclxuXHRcdFx0XHRcdCRkb2N1bWVudC5vZmYoIHRvdWNoU3RvcEV2ZW50LCBjb250ZXh0LnN0b3AgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9O1xyXG5cdCQuZWFjaCh7XHJcblx0XHRzY3JvbGxzdG9wOiBcInNjcm9sbHN0YXJ0XCIsXHJcblx0XHR0YXBob2xkOiBcInRhcFwiLFxyXG5cdFx0c3dpcGVsZWZ0OiBcInN3aXBlLmxlZnRcIixcclxuXHRcdHN3aXBlcmlnaHQ6IFwic3dpcGUucmlnaHRcIlxyXG5cdH0sIGZ1bmN0aW9uKCBldmVudCwgc291cmNlRXZlbnQgKSB7XHJcblxyXG5cdFx0JC5ldmVudC5zcGVjaWFsWyBldmVudCBdID0ge1xyXG5cdFx0XHRzZXR1cDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0JCggdGhpcyApLmJpbmQoIHNvdXJjZUV2ZW50LCAkLm5vb3AgKTtcclxuXHRcdFx0fSxcclxuXHRcdFx0dGVhcmRvd246IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdCQoIHRoaXMgKS51bmJpbmQoIHNvdXJjZUV2ZW50ICk7XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblx0fSk7XHJcblxyXG59KSggalF1ZXJ5LCB0aGlzICk7XHJcblxyXG5cclxuXHQvLyB0aHJvdHRsZWQgcmVzaXplIGV2ZW50XHJcblx0KGZ1bmN0aW9uKCAkICkge1xyXG5cdFx0JC5ldmVudC5zcGVjaWFsLnRocm90dGxlZHJlc2l6ZSA9IHtcclxuXHRcdFx0c2V0dXA6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdCQoIHRoaXMgKS5iaW5kKCBcInJlc2l6ZVwiLCBoYW5kbGVyICk7XHJcblx0XHRcdH0sXHJcblx0XHRcdHRlYXJkb3duOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHQkKCB0aGlzICkudW5iaW5kKCBcInJlc2l6ZVwiLCBoYW5kbGVyICk7XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblxyXG5cdFx0dmFyIHRocm90dGxlID0gMjUwLFxyXG5cdFx0XHRoYW5kbGVyID0gZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0Y3VyciA9ICggbmV3IERhdGUoKSApLmdldFRpbWUoKTtcclxuXHRcdFx0XHRkaWZmID0gY3VyciAtIGxhc3RDYWxsO1xyXG5cclxuXHRcdFx0XHRpZiAoIGRpZmYgPj0gdGhyb3R0bGUgKSB7XHJcblxyXG5cdFx0XHRcdFx0bGFzdENhbGwgPSBjdXJyO1xyXG5cdFx0XHRcdFx0JCggdGhpcyApLnRyaWdnZXIoIFwidGhyb3R0bGVkcmVzaXplXCIgKTtcclxuXHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHJcblx0XHRcdFx0XHRpZiAoIGhlbGRDYWxsICkge1xyXG5cdFx0XHRcdFx0XHRjbGVhclRpbWVvdXQoIGhlbGRDYWxsICk7XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0Ly8gUHJvbWlzZSBhIGhlbGQgY2FsbCB3aWxsIHN0aWxsIGV4ZWN1dGVcclxuXHRcdFx0XHRcdGhlbGRDYWxsID0gc2V0VGltZW91dCggaGFuZGxlciwgdGhyb3R0bGUgLSBkaWZmICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9LFxyXG5cdFx0XHRsYXN0Q2FsbCA9IDAsXHJcblx0XHRcdGhlbGRDYWxsLFxyXG5cdFx0XHRjdXJyLFxyXG5cdFx0XHRkaWZmO1xyXG5cdH0pKCBqUXVlcnkgKTtcclxuXHJcblxyXG4oZnVuY3Rpb24oICQsIHdpbmRvdyApIHtcclxuXHR2YXIgd2luID0gJCggd2luZG93ICksXHJcblx0XHRldmVudF9uYW1lID0gXCJvcmllbnRhdGlvbmNoYW5nZVwiLFxyXG5cdFx0Z2V0X29yaWVudGF0aW9uLFxyXG5cdFx0bGFzdF9vcmllbnRhdGlvbixcclxuXHRcdGluaXRpYWxfb3JpZW50YXRpb25faXNfbGFuZHNjYXBlLFxyXG5cdFx0aW5pdGlhbF9vcmllbnRhdGlvbl9pc19kZWZhdWx0LFxyXG5cdFx0cG9ydHJhaXRfbWFwID0geyBcIjBcIjogdHJ1ZSwgXCIxODBcIjogdHJ1ZSB9LFxyXG5cdFx0d3csIHdoLCBsYW5kc2NhcGVfdGhyZXNob2xkO1xyXG5cclxuXHQvLyBJdCBzZWVtcyB0aGF0IHNvbWUgZGV2aWNlL2Jyb3dzZXIgdmVuZG9ycyB1c2Ugd2luZG93Lm9yaWVudGF0aW9uIHZhbHVlcyAwIGFuZCAxODAgdG9cclxuXHQvLyBkZW5vdGUgdGhlIFwiZGVmYXVsdFwiIG9yaWVudGF0aW9uLiBGb3IgaU9TIGRldmljZXMsIGFuZCBtb3N0IG90aGVyIHNtYXJ0LXBob25lcyB0ZXN0ZWQsXHJcblx0Ly8gdGhlIGRlZmF1bHQgb3JpZW50YXRpb24gaXMgYWx3YXlzIFwicG9ydHJhaXRcIiwgYnV0IGluIHNvbWUgQW5kcm9pZCBhbmQgUklNIGJhc2VkIHRhYmxldHMsXHJcblx0Ly8gdGhlIGRlZmF1bHQgb3JpZW50YXRpb24gaXMgXCJsYW5kc2NhcGVcIi4gVGhlIGZvbGxvd2luZyBjb2RlIGF0dGVtcHRzIHRvIHVzZSB0aGUgd2luZG93XHJcblx0Ly8gZGltZW5zaW9ucyB0byBmaWd1cmUgb3V0IHdoYXQgdGhlIGN1cnJlbnQgb3JpZW50YXRpb24gaXMsIGFuZCB0aGVuIG1ha2VzIGFkanVzdG1lbnRzXHJcblx0Ly8gdG8gdGhlIHRvIHRoZSBwb3J0cmFpdF9tYXAgaWYgbmVjZXNzYXJ5LCBzbyB0aGF0IHdlIGNhbiBwcm9wZXJseSBkZWNvZGUgdGhlXHJcblx0Ly8gd2luZG93Lm9yaWVudGF0aW9uIHZhbHVlIHdoZW5ldmVyIGdldF9vcmllbnRhdGlvbigpIGlzIGNhbGxlZC5cclxuXHQvL1xyXG5cdC8vIE5vdGUgdGhhdCB3ZSB1c2VkIHRvIHVzZSBhIG1lZGlhIHF1ZXJ5IHRvIGZpZ3VyZSBvdXQgd2hhdCB0aGUgb3JpZW50YXRpb24gdGhlIGJyb3dzZXJcclxuXHQvLyB0aGlua3MgaXQgaXMgaW46XHJcblx0Ly9cclxuXHQvLyAgICAgaW5pdGlhbF9vcmllbnRhdGlvbl9pc19sYW5kc2NhcGUgPSAkLm1vYmlsZS5tZWRpYShcImFsbCBhbmQgKG9yaWVudGF0aW9uOiBsYW5kc2NhcGUpXCIpO1xyXG5cdC8vXHJcblx0Ly8gYnV0IHRoZXJlIHdhcyBhbiBpUGhvbmUvaVBvZCBUb3VjaCBidWcgYmVnaW5uaW5nIHdpdGggaU9TIDQuMiwgdXAgdGhyb3VnaCBpT1MgNS4xLFxyXG5cdC8vIHdoZXJlIHRoZSBicm93c2VyICpBTFdBWVMqIGFwcGxpZWQgdGhlIGxhbmRzY2FwZSBtZWRpYSBxdWVyeS4gVGhpcyBidWcgZG9lcyBub3RcclxuXHQvLyBoYXBwZW4gb24gaVBhZC5cclxuXHJcblx0aWYgKCAkLnN1cHBvcnQub3JpZW50YXRpb24gKSB7XHJcblxyXG5cdFx0Ly8gQ2hlY2sgdGhlIHdpbmRvdyB3aWR0aCBhbmQgaGVpZ2h0IHRvIGZpZ3VyZSBvdXQgd2hhdCB0aGUgY3VycmVudCBvcmllbnRhdGlvblxyXG5cdFx0Ly8gb2YgdGhlIGRldmljZSBpcyBhdCB0aGlzIG1vbWVudC4gTm90ZSB0aGF0IHdlJ3ZlIGluaXRpYWxpemVkIHRoZSBwb3J0cmFpdCBtYXBcclxuXHRcdC8vIHZhbHVlcyB0byAwIGFuZCAxODAsICpBTkQqIHdlIHB1cnBvc2VseSBjaGVjayBmb3IgbGFuZHNjYXBlIHNvIHRoYXQgaWYgd2UgZ3Vlc3NcclxuXHRcdC8vIHdyb25nLCAsIHdlIGRlZmF1bHQgdG8gdGhlIGFzc3VtcHRpb24gdGhhdCBwb3J0cmFpdCBpcyB0aGUgZGVmYXVsdCBvcmllbnRhdGlvbi5cclxuXHRcdC8vIFdlIHVzZSBhIHRocmVzaG9sZCBjaGVjayBiZWxvdyBiZWNhdXNlIG9uIHNvbWUgcGxhdGZvcm1zIGxpa2UgaU9TLCB0aGUgaVBob25lXHJcblx0XHQvLyBmb3JtLWZhY3RvciBjYW4gcmVwb3J0IGEgbGFyZ2VyIHdpZHRoIHRoYW4gaGVpZ2h0IGlmIHRoZSB1c2VyIHR1cm5zIG9uIHRoZVxyXG5cdFx0Ly8gZGV2ZWxvcGVyIGNvbnNvbGUuIFRoZSBhY3R1YWwgdGhyZXNob2xkIHZhbHVlIGlzIHNvbWV3aGF0IGFyYml0cmFyeSwgd2UganVzdFxyXG5cdFx0Ly8gbmVlZCB0byBtYWtlIHN1cmUgaXQgaXMgbGFyZ2UgZW5vdWdoIHRvIGV4Y2x1ZGUgdGhlIGRldmVsb3BlciBjb25zb2xlIGNhc2UuXHJcblxyXG5cdFx0d3cgPSB3aW5kb3cuaW5uZXJXaWR0aCB8fCB3aW4ud2lkdGgoKTtcclxuXHRcdHdoID0gd2luZG93LmlubmVySGVpZ2h0IHx8IHdpbi5oZWlnaHQoKTtcclxuXHRcdGxhbmRzY2FwZV90aHJlc2hvbGQgPSA1MDtcclxuXHJcblx0XHRpbml0aWFsX29yaWVudGF0aW9uX2lzX2xhbmRzY2FwZSA9IHd3ID4gd2ggJiYgKCB3dyAtIHdoICkgPiBsYW5kc2NhcGVfdGhyZXNob2xkO1xyXG5cclxuXHRcdC8vIE5vdyBjaGVjayB0byBzZWUgaWYgdGhlIGN1cnJlbnQgd2luZG93Lm9yaWVudGF0aW9uIGlzIDAgb3IgMTgwLlxyXG5cdFx0aW5pdGlhbF9vcmllbnRhdGlvbl9pc19kZWZhdWx0ID0gcG9ydHJhaXRfbWFwWyB3aW5kb3cub3JpZW50YXRpb24gXTtcclxuXHJcblx0XHQvLyBJZiB0aGUgaW5pdGlhbCBvcmllbnRhdGlvbiBpcyBsYW5kc2NhcGUsIGJ1dCB3aW5kb3cub3JpZW50YXRpb24gcmVwb3J0cyAwIG9yIDE4MCwgKk9SKlxyXG5cdFx0Ly8gaWYgdGhlIGluaXRpYWwgb3JpZW50YXRpb24gaXMgcG9ydHJhaXQsIGJ1dCB3aW5kb3cub3JpZW50YXRpb24gcmVwb3J0cyA5MCBvciAtOTAsIHdlXHJcblx0XHQvLyBuZWVkIHRvIGZsaXAgb3VyIHBvcnRyYWl0X21hcCB2YWx1ZXMgYmVjYXVzZSBsYW5kc2NhcGUgaXMgdGhlIGRlZmF1bHQgb3JpZW50YXRpb24gZm9yXHJcblx0XHQvLyB0aGlzIGRldmljZS9icm93c2VyLlxyXG5cdFx0aWYgKCAoIGluaXRpYWxfb3JpZW50YXRpb25faXNfbGFuZHNjYXBlICYmIGluaXRpYWxfb3JpZW50YXRpb25faXNfZGVmYXVsdCApIHx8ICggIWluaXRpYWxfb3JpZW50YXRpb25faXNfbGFuZHNjYXBlICYmICFpbml0aWFsX29yaWVudGF0aW9uX2lzX2RlZmF1bHQgKSApIHtcclxuXHRcdFx0cG9ydHJhaXRfbWFwID0geyBcIi05MFwiOiB0cnVlLCBcIjkwXCI6IHRydWUgfTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdCQuZXZlbnQuc3BlY2lhbC5vcmllbnRhdGlvbmNoYW5nZSA9ICQuZXh0ZW5kKCB7fSwgJC5ldmVudC5zcGVjaWFsLm9yaWVudGF0aW9uY2hhbmdlLCB7XHJcblx0XHRzZXR1cDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdC8vIElmIHRoZSBldmVudCBpcyBzdXBwb3J0ZWQgbmF0aXZlbHksIHJldHVybiBmYWxzZSBzbyB0aGF0IGpRdWVyeVxyXG5cdFx0XHQvLyB3aWxsIGJpbmQgdG8gdGhlIGV2ZW50IHVzaW5nIERPTSBtZXRob2RzLlxyXG5cdFx0XHRpZiAoICQuc3VwcG9ydC5vcmllbnRhdGlvbiAmJiAhJC5ldmVudC5zcGVjaWFsLm9yaWVudGF0aW9uY2hhbmdlLmRpc2FibGVkICkge1xyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gR2V0IHRoZSBjdXJyZW50IG9yaWVudGF0aW9uIHRvIGF2b2lkIGluaXRpYWwgZG91YmxlLXRyaWdnZXJpbmcuXHJcblx0XHRcdGxhc3Rfb3JpZW50YXRpb24gPSBnZXRfb3JpZW50YXRpb24oKTtcclxuXHJcblx0XHRcdC8vIEJlY2F1c2UgdGhlIG9yaWVudGF0aW9uY2hhbmdlIGV2ZW50IGRvZXNuJ3QgZXhpc3QsIHNpbXVsYXRlIHRoZVxyXG5cdFx0XHQvLyBldmVudCBieSB0ZXN0aW5nIHdpbmRvdyBkaW1lbnNpb25zIG9uIHJlc2l6ZS5cclxuXHRcdFx0d2luLmJpbmQoIFwidGhyb3R0bGVkcmVzaXplXCIsIGhhbmRsZXIgKTtcclxuXHRcdH0sXHJcblx0XHR0ZWFyZG93bjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdC8vIElmIHRoZSBldmVudCBpcyBub3Qgc3VwcG9ydGVkIG5hdGl2ZWx5LCByZXR1cm4gZmFsc2Ugc28gdGhhdFxyXG5cdFx0XHQvLyBqUXVlcnkgd2lsbCB1bmJpbmQgdGhlIGV2ZW50IHVzaW5nIERPTSBtZXRob2RzLlxyXG5cdFx0XHRpZiAoICQuc3VwcG9ydC5vcmllbnRhdGlvbiAmJiAhJC5ldmVudC5zcGVjaWFsLm9yaWVudGF0aW9uY2hhbmdlLmRpc2FibGVkICkge1xyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gQmVjYXVzZSB0aGUgb3JpZW50YXRpb25jaGFuZ2UgZXZlbnQgZG9lc24ndCBleGlzdCwgdW5iaW5kIHRoZVxyXG5cdFx0XHQvLyByZXNpemUgZXZlbnQgaGFuZGxlci5cclxuXHRcdFx0d2luLnVuYmluZCggXCJ0aHJvdHRsZWRyZXNpemVcIiwgaGFuZGxlciApO1xyXG5cdFx0fSxcclxuXHRcdGFkZDogZnVuY3Rpb24oIGhhbmRsZU9iaiApIHtcclxuXHRcdFx0Ly8gU2F2ZSBhIHJlZmVyZW5jZSB0byB0aGUgYm91bmQgZXZlbnQgaGFuZGxlci5cclxuXHRcdFx0dmFyIG9sZF9oYW5kbGVyID0gaGFuZGxlT2JqLmhhbmRsZXI7XHJcblxyXG5cdFx0XHRoYW5kbGVPYmouaGFuZGxlciA9IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdFx0XHQvLyBNb2RpZnkgZXZlbnQgb2JqZWN0LCBhZGRpbmcgdGhlIC5vcmllbnRhdGlvbiBwcm9wZXJ0eS5cclxuXHRcdFx0XHRldmVudC5vcmllbnRhdGlvbiA9IGdldF9vcmllbnRhdGlvbigpO1xyXG5cclxuXHRcdFx0XHQvLyBDYWxsIHRoZSBvcmlnaW5hbGx5LWJvdW5kIGV2ZW50IGhhbmRsZXIgYW5kIHJldHVybiBpdHMgcmVzdWx0LlxyXG5cdFx0XHRcdHJldHVybiBvbGRfaGFuZGxlci5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XHJcblx0XHRcdH07XHJcblx0XHR9XHJcblx0fSk7XHJcblxyXG5cdC8vIElmIHRoZSBldmVudCBpcyBub3Qgc3VwcG9ydGVkIG5hdGl2ZWx5LCB0aGlzIGhhbmRsZXIgd2lsbCBiZSBib3VuZCB0b1xyXG5cdC8vIHRoZSB3aW5kb3cgcmVzaXplIGV2ZW50IHRvIHNpbXVsYXRlIHRoZSBvcmllbnRhdGlvbmNoYW5nZSBldmVudC5cclxuXHRmdW5jdGlvbiBoYW5kbGVyKCkge1xyXG5cdFx0Ly8gR2V0IHRoZSBjdXJyZW50IG9yaWVudGF0aW9uLlxyXG5cdFx0dmFyIG9yaWVudGF0aW9uID0gZ2V0X29yaWVudGF0aW9uKCk7XHJcblxyXG5cdFx0aWYgKCBvcmllbnRhdGlvbiAhPT0gbGFzdF9vcmllbnRhdGlvbiApIHtcclxuXHRcdFx0Ly8gVGhlIG9yaWVudGF0aW9uIGhhcyBjaGFuZ2VkLCBzbyB0cmlnZ2VyIHRoZSBvcmllbnRhdGlvbmNoYW5nZSBldmVudC5cclxuXHRcdFx0bGFzdF9vcmllbnRhdGlvbiA9IG9yaWVudGF0aW9uO1xyXG5cdFx0XHR3aW4udHJpZ2dlciggZXZlbnRfbmFtZSApO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0Ly8gR2V0IHRoZSBjdXJyZW50IHBhZ2Ugb3JpZW50YXRpb24uIFRoaXMgbWV0aG9kIGlzIGV4cG9zZWQgcHVibGljbHksIHNob3VsZCBpdFxyXG5cdC8vIGJlIG5lZWRlZCwgYXMgalF1ZXJ5LmV2ZW50LnNwZWNpYWwub3JpZW50YXRpb25jaGFuZ2Uub3JpZW50YXRpb24oKVxyXG5cdCQuZXZlbnQuc3BlY2lhbC5vcmllbnRhdGlvbmNoYW5nZS5vcmllbnRhdGlvbiA9IGdldF9vcmllbnRhdGlvbiA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGlzUG9ydHJhaXQgPSB0cnVlLCBlbGVtID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xyXG5cclxuXHRcdC8vIHByZWZlciB3aW5kb3cgb3JpZW50YXRpb24gdG8gdGhlIGNhbGN1bGF0aW9uIGJhc2VkIG9uIHNjcmVlbnNpemUgYXNcclxuXHRcdC8vIHRoZSBhY3R1YWwgc2NyZWVuIHJlc2l6ZSB0YWtlcyBwbGFjZSBiZWZvcmUgb3IgYWZ0ZXIgdGhlIG9yaWVudGF0aW9uIGNoYW5nZSBldmVudFxyXG5cdFx0Ly8gaGFzIGJlZW4gZmlyZWQgZGVwZW5kaW5nIG9uIGltcGxlbWVudGF0aW9uIChlZyBhbmRyb2lkIDIuMyBpcyBiZWZvcmUsIGlwaG9uZSBhZnRlcikuXHJcblx0XHQvLyBNb3JlIHRlc3RpbmcgaXMgcmVxdWlyZWQgdG8gZGV0ZXJtaW5lIGlmIGEgbW9yZSByZWxpYWJsZSBtZXRob2Qgb2YgZGV0ZXJtaW5pbmcgdGhlIG5ldyBzY3JlZW5zaXplXHJcblx0XHQvLyBpcyBwb3NzaWJsZSB3aGVuIG9yaWVudGF0aW9uY2hhbmdlIGlzIGZpcmVkLiAoZWcsIHVzZSBtZWRpYSBxdWVyaWVzICsgZWxlbWVudCArIG9wYWNpdHkpXHJcblx0XHRpZiAoICQuc3VwcG9ydC5vcmllbnRhdGlvbiApIHtcclxuXHRcdFx0Ly8gaWYgdGhlIHdpbmRvdyBvcmllbnRhdGlvbiByZWdpc3RlcnMgYXMgMCBvciAxODAgZGVncmVlcyByZXBvcnRcclxuXHRcdFx0Ly8gcG9ydHJhaXQsIG90aGVyd2lzZSBsYW5kc2NhcGVcclxuXHRcdFx0aXNQb3J0cmFpdCA9IHBvcnRyYWl0X21hcFsgd2luZG93Lm9yaWVudGF0aW9uIF07XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRpc1BvcnRyYWl0ID0gZWxlbSAmJiBlbGVtLmNsaWVudFdpZHRoIC8gZWxlbS5jbGllbnRIZWlnaHQgPCAxLjE7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIGlzUG9ydHJhaXQgPyBcInBvcnRyYWl0XCIgOiBcImxhbmRzY2FwZVwiO1xyXG5cdH07XHJcblxyXG5cdCQuZm5bIGV2ZW50X25hbWUgXSA9IGZ1bmN0aW9uKCBmbiApIHtcclxuXHRcdHJldHVybiBmbiA/IHRoaXMuYmluZCggZXZlbnRfbmFtZSwgZm4gKSA6IHRoaXMudHJpZ2dlciggZXZlbnRfbmFtZSApO1xyXG5cdH07XHJcblxyXG5cdC8vIGpRdWVyeSA8IDEuOFxyXG5cdGlmICggJC5hdHRyRm4gKSB7XHJcblx0XHQkLmF0dHJGblsgZXZlbnRfbmFtZSBdID0gdHJ1ZTtcclxuXHR9XHJcblxyXG59KCBqUXVlcnksIHRoaXMgKSk7XHJcblxyXG5cclxuXHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcblx0Ly8gZXhpc3RpbmcgYmFzZSB0YWc/XHJcblx0dmFyIGJhc2VFbGVtZW50ID0gJCggXCJoZWFkXCIgKS5jaGlsZHJlbiggXCJiYXNlXCIgKSxcclxuXHJcblx0Ly8gYmFzZSBlbGVtZW50IG1hbmFnZW1lbnQsIGRlZmluZWQgZGVwZW5kaW5nIG9uIGR5bmFtaWMgYmFzZSB0YWcgc3VwcG9ydFxyXG5cdC8vIFRPRE8gbW92ZSB0byBleHRlcm5hbCB3aWRnZXRcclxuXHRiYXNlID0ge1xyXG5cclxuXHRcdC8vIGRlZmluZSBiYXNlIGVsZW1lbnQsIGZvciB1c2UgaW4gcm91dGluZyBhc3NldCB1cmxzIHRoYXQgYXJlIHJlZmVyZW5jZWRcclxuXHRcdC8vIGluIEFqYXgtcmVxdWVzdGVkIG1hcmt1cFxyXG5cdFx0ZWxlbWVudDogKCBiYXNlRWxlbWVudC5sZW5ndGggPyBiYXNlRWxlbWVudCA6XHJcblx0XHRcdCQoIFwiPGJhc2U+XCIsIHsgaHJlZjogJC5tb2JpbGUucGF0aC5kb2N1bWVudEJhc2UuaHJlZk5vSGFzaCB9ICkucHJlcGVuZFRvKCAkKCBcImhlYWRcIiApICkgKSxcclxuXHJcblx0XHRsaW5rU2VsZWN0b3I6IFwiW3NyY10sIGxpbmtbaHJlZl0sIGFbcmVsPSdleHRlcm5hbCddLCA6anFtRGF0YShhamF4PSdmYWxzZScpLCBhW3RhcmdldF1cIixcclxuXHJcblx0XHQvLyBzZXQgdGhlIGdlbmVyYXRlZCBCQVNFIGVsZW1lbnQncyBocmVmIHRvIGEgbmV3IHBhZ2UncyBiYXNlIHBhdGhcclxuXHRcdHNldDogZnVuY3Rpb24oIGhyZWYgKSB7XHJcblxyXG5cdFx0XHQvLyB3ZSBzaG91bGQgZG8gbm90aGluZyBpZiB0aGUgdXNlciB3YW50cyB0byBtYW5hZ2UgdGhlaXIgdXJsIGJhc2VcclxuXHRcdFx0Ly8gbWFudWFsbHlcclxuXHRcdFx0aWYgKCAhJC5tb2JpbGUuZHluYW1pY0Jhc2VFbmFibGVkICkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gd2Ugc2hvdWxkIHVzZSB0aGUgYmFzZSB0YWcgaWYgd2UgY2FuIG1hbmlwdWxhdGUgaXQgZHluYW1pY2FsbHlcclxuXHRcdFx0aWYgKCAkLnN1cHBvcnQuZHluYW1pY0Jhc2VUYWcgKSB7XHJcblx0XHRcdFx0YmFzZS5lbGVtZW50LmF0dHIoIFwiaHJlZlwiLFxyXG5cdFx0XHRcdFx0JC5tb2JpbGUucGF0aC5tYWtlVXJsQWJzb2x1dGUoIGhyZWYsICQubW9iaWxlLnBhdGguZG9jdW1lbnRCYXNlICkgKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHJcblx0XHRyZXdyaXRlOiBmdW5jdGlvbiggaHJlZiwgcGFnZSApIHtcclxuXHRcdFx0dmFyIG5ld1BhdGggPSAkLm1vYmlsZS5wYXRoLmdldCggaHJlZiApO1xyXG5cclxuXHRcdFx0cGFnZS5maW5kKCBiYXNlLmxpbmtTZWxlY3RvciApLmVhY2goZnVuY3Rpb24oIGksIGxpbmsgKSB7XHJcblx0XHRcdFx0dmFyIHRoaXNBdHRyID0gJCggbGluayApLmlzKCBcIltocmVmXVwiICkgPyBcImhyZWZcIiA6XHJcblx0XHRcdFx0XHQkKCBsaW5rICkuaXMoIFwiW3NyY11cIiApID8gXCJzcmNcIiA6IFwiYWN0aW9uXCIsXHJcblx0XHRcdFx0dGhlTG9jYXRpb24gPSAkLm1vYmlsZS5wYXRoLnBhcnNlTG9jYXRpb24oKSxcclxuXHRcdFx0XHR0aGlzVXJsID0gJCggbGluayApLmF0dHIoIHRoaXNBdHRyICk7XHJcblxyXG5cdFx0XHRcdC8vIFhYWF9qYmxhczogV2UgbmVlZCB0byBmaXggdGhpcyBzbyB0aGF0IGl0IHJlbW92ZXMgdGhlIGRvY3VtZW50XHJcblx0XHRcdFx0Ly8gICAgICAgICAgICBiYXNlIFVSTCwgYW5kIHRoZW4gcHJlcGVuZHMgd2l0aCB0aGUgbmV3IHBhZ2UgVVJMLlxyXG5cdFx0XHRcdC8vIGlmIGZ1bGwgcGF0aCBleGlzdHMgYW5kIGlzIHNhbWUsIGNob3AgaXQgLSBoZWxwcyBJRSBvdXRcclxuXHRcdFx0XHR0aGlzVXJsID0gdGhpc1VybC5yZXBsYWNlKCB0aGVMb2NhdGlvbi5wcm90b2NvbCArIHRoZUxvY2F0aW9uLmRvdWJsZVNsYXNoICtcclxuXHRcdFx0XHRcdHRoZUxvY2F0aW9uLmhvc3QgKyB0aGVMb2NhdGlvbi5wYXRobmFtZSwgXCJcIiApO1xyXG5cclxuXHRcdFx0XHRpZiAoICEvXihcXHcrOnwjfFxcLykvLnRlc3QoIHRoaXNVcmwgKSApIHtcclxuXHRcdFx0XHRcdCQoIGxpbmsgKS5hdHRyKCB0aGlzQXR0ciwgbmV3UGF0aCArIHRoaXNVcmwgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvLyBzZXQgdGhlIGdlbmVyYXRlZCBCQVNFIGVsZW1lbnQncyBocmVmIHRvIGEgbmV3IHBhZ2UncyBiYXNlIHBhdGhcclxuXHRcdHJlc2V0OiBmdW5jdGlvbigvKiBocmVmICovKSB7XHJcblx0XHRcdGJhc2UuZWxlbWVudC5hdHRyKCBcImhyZWZcIiwgJC5tb2JpbGUucGF0aC5kb2N1bWVudEJhc2UuaHJlZk5vU2VhcmNoICk7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0JC5tb2JpbGUuYmFzZSA9IGJhc2U7XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcbiQubW9iaWxlLndpZGdldHMgPSB7fTtcclxuXHJcbnZhciBvcmlnaW5hbFdpZGdldCA9ICQud2lkZ2V0LFxyXG5cclxuXHQvLyBSZWNvcmQgdGhlIG9yaWdpbmFsLCBub24tbW9iaWxlaW5pdC1tb2RpZmllZCB2ZXJzaW9uIG9mICQubW9iaWxlLmtlZXBOYXRpdmVcclxuXHQvLyBzbyB3ZSBjYW4gbGF0ZXIgZGV0ZXJtaW5lIHdoZXRoZXIgc29tZW9uZSBoYXMgbW9kaWZpZWQgJC5tb2JpbGUua2VlcE5hdGl2ZVxyXG5cdGtlZXBOYXRpdmVGYWN0b3J5RGVmYXVsdCA9ICQubW9iaWxlLmtlZXBOYXRpdmU7XHJcblxyXG4kLndpZGdldCA9IChmdW5jdGlvbiggb3JpZyApIHtcclxuXHRyZXR1cm4gZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgY29uc3RydWN0b3IgPSBvcmlnLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKSxcclxuXHRcdFx0bmFtZSA9IGNvbnN0cnVjdG9yLnByb3RvdHlwZS53aWRnZXROYW1lO1xyXG5cclxuXHRcdGNvbnN0cnVjdG9yLmluaXRTZWxlY3RvciA9ICggKCBjb25zdHJ1Y3Rvci5wcm90b3R5cGUuaW5pdFNlbGVjdG9yICE9PSB1bmRlZmluZWQgKSA/XHJcblx0XHRcdGNvbnN0cnVjdG9yLnByb3RvdHlwZS5pbml0U2VsZWN0b3IgOiBcIjpqcW1EYXRhKHJvbGU9J1wiICsgbmFtZSArIFwiJylcIiApO1xyXG5cclxuXHRcdCQubW9iaWxlLndpZGdldHNbIG5hbWUgXSA9IGNvbnN0cnVjdG9yO1xyXG5cclxuXHRcdHJldHVybiBjb25zdHJ1Y3RvcjtcclxuXHR9O1xyXG59KSggJC53aWRnZXQgKTtcclxuXHJcbi8vIE1ha2Ugc3VyZSAkLndpZGdldCBzdGlsbCBoYXMgYnJpZGdlIGFuZCBleHRlbmQgbWV0aG9kc1xyXG4kLmV4dGVuZCggJC53aWRnZXQsIG9yaWdpbmFsV2lkZ2V0ICk7XHJcblxyXG4vLyBGb3IgYmFja2NvbXBhdCByZW1vdmUgaW4gMS41XHJcbiQubW9iaWxlLmRvY3VtZW50Lm9uKCBcImNyZWF0ZVwiLCBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0JCggZXZlbnQudGFyZ2V0ICkuZW5oYW5jZVdpdGhpbigpO1xyXG59KTtcclxuXHJcbiQud2lkZ2V0KCBcIm1vYmlsZS5wYWdlXCIsIHtcclxuXHRvcHRpb25zOiB7XHJcblx0XHR0aGVtZTogXCJhXCIsXHJcblx0XHRkb21DYWNoZTogZmFsc2UsXHJcblxyXG5cdFx0Ly8gRGVwcmVjYXRlZCBpbiAxLjQgcmVtb3ZlIGluIDEuNVxyXG5cdFx0a2VlcE5hdGl2ZURlZmF1bHQ6ICQubW9iaWxlLmtlZXBOYXRpdmUsXHJcblxyXG5cdFx0Ly8gRGVwcmVjYXRlZCBpbiAxLjQgcmVtb3ZlIGluIDEuNVxyXG5cdFx0Y29udGVudFRoZW1lOiBudWxsLFxyXG5cdFx0ZW5oYW5jZWQ6IGZhbHNlXHJcblx0fSxcclxuXHJcblx0Ly8gREVQUkVDQVRFRCBmb3IgPiAxLjRcclxuXHQvLyBUT0RPIHJlbW92ZSBhdCAxLjVcclxuXHRfY3JlYXRlV2lkZ2V0OiBmdW5jdGlvbigpIHtcclxuXHRcdCQuV2lkZ2V0LnByb3RvdHlwZS5fY3JlYXRlV2lkZ2V0LmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcclxuXHRcdHRoaXMuX3RyaWdnZXIoIFwiaW5pdFwiICk7XHJcblx0fSxcclxuXHJcblx0X2NyZWF0ZTogZnVuY3Rpb24oKSB7XHJcblx0XHQvLyBJZiBmYWxzZSBpcyByZXR1cm5lZCBieSB0aGUgY2FsbGJhY2tzIGRvIG5vdCBjcmVhdGUgdGhlIHBhZ2VcclxuXHRcdGlmICggdGhpcy5fdHJpZ2dlciggXCJiZWZvcmVjcmVhdGVcIiApID09PSBmYWxzZSApIHtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggIXRoaXMub3B0aW9ucy5lbmhhbmNlZCApIHtcclxuXHRcdFx0dGhpcy5fZW5oYW5jZSgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX29uKCB0aGlzLmVsZW1lbnQsIHtcclxuXHRcdFx0cGFnZWJlZm9yZWhpZGU6IFwicmVtb3ZlQ29udGFpbmVyQmFja2dyb3VuZFwiLFxyXG5cdFx0XHRwYWdlYmVmb3Jlc2hvdzogXCJfaGFuZGxlUGFnZUJlZm9yZVNob3dcIlxyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5lbGVtZW50LmVuaGFuY2VXaXRoaW4oKTtcclxuXHRcdC8vIERpYWxvZyB3aWRnZXQgaXMgZGVwcmVjYXRlZCBpbiAxLjQgcmVtb3ZlIHRoaXMgaW4gMS41XHJcblx0XHRpZiAoICQubW9iaWxlLmdldEF0dHJpYnV0ZSggdGhpcy5lbGVtZW50WzBdLCBcInJvbGVcIiApID09PSBcImRpYWxvZ1wiICYmICQubW9iaWxlLmRpYWxvZyApIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50LmRpYWxvZygpO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9lbmhhbmNlOiBmdW5jdGlvbiAoKSB7XHJcblx0XHR2YXIgYXR0clByZWZpeCA9IFwiZGF0YS1cIiArICQubW9iaWxlLm5zLFxyXG5cdFx0XHRzZWxmID0gdGhpcztcclxuXHJcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5yb2xlICkge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQuYXR0ciggXCJkYXRhLVwiICsgJC5tb2JpbGUubnMgKyBcInJvbGVcIiwgdGhpcy5vcHRpb25zLnJvbGUgKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLmVsZW1lbnRcclxuXHRcdFx0LmF0dHIoIFwidGFiaW5kZXhcIiwgXCIwXCIgKVxyXG5cdFx0XHQuYWRkQ2xhc3MoIFwidWktcGFnZSB1aS1wYWdlLXRoZW1lLVwiICsgdGhpcy5vcHRpb25zLnRoZW1lICk7XHJcblxyXG5cdFx0Ly8gTWFuaXB1bGF0aW9uIG9mIGNvbnRlbnQgb3MgRGVwcmVjYXRlZCBhcyBvZiAxLjQgcmVtb3ZlIGluIDEuNVxyXG5cdFx0dGhpcy5lbGVtZW50LmZpbmQoIFwiW1wiICsgYXR0clByZWZpeCArIFwicm9sZT0nY29udGVudCddXCIgKS5lYWNoKCBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyICR0aGlzID0gJCggdGhpcyApLFxyXG5cdFx0XHRcdHRoZW1lID0gdGhpcy5nZXRBdHRyaWJ1dGUoIGF0dHJQcmVmaXggKyBcInRoZW1lXCIgKSB8fCB1bmRlZmluZWQ7XHJcblx0XHRcdFx0c2VsZi5vcHRpb25zLmNvbnRlbnRUaGVtZSA9IHRoZW1lIHx8IHNlbGYub3B0aW9ucy5jb250ZW50VGhlbWUgfHwgKCBzZWxmLm9wdGlvbnMuZGlhbG9nICYmIHNlbGYub3B0aW9ucy50aGVtZSApIHx8ICggc2VsZi5lbGVtZW50LmpxbURhdGEoXCJyb2xlXCIpID09PSBcImRpYWxvZ1wiICYmICBzZWxmLm9wdGlvbnMudGhlbWUgKTtcclxuXHRcdFx0XHQkdGhpcy5hZGRDbGFzcyggXCJ1aS1jb250ZW50XCIgKTtcclxuXHRcdFx0XHRpZiAoIHNlbGYub3B0aW9ucy5jb250ZW50VGhlbWUgKSB7XHJcblx0XHRcdFx0XHQkdGhpcy5hZGRDbGFzcyggXCJ1aS1ib2R5LVwiICsgKCBzZWxmLm9wdGlvbnMuY29udGVudFRoZW1lICkgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0Ly8gQWRkIEFSSUEgcm9sZVxyXG5cdFx0XHRcdCR0aGlzLmF0dHIoIFwicm9sZVwiLCBcIm1haW5cIiApLmFkZENsYXNzKCBcInVpLWNvbnRlbnRcIiApO1xyXG5cdFx0fSk7XHJcblx0fSxcclxuXHJcblx0YmluZFJlbW92ZTogZnVuY3Rpb24oIGNhbGxiYWNrICkge1xyXG5cdFx0dmFyIHBhZ2UgPSB0aGlzLmVsZW1lbnQ7XHJcblxyXG5cdFx0Ly8gd2hlbiBkb20gY2FjaGluZyBpcyBub3QgZW5hYmxlZCBvciB0aGUgcGFnZSBpcyBlbWJlZGRlZCBiaW5kIHRvIHJlbW92ZSB0aGUgcGFnZSBvbiBoaWRlXHJcblx0XHRpZiAoICFwYWdlLmRhdGEoIFwibW9iaWxlLXBhZ2VcIiApLm9wdGlvbnMuZG9tQ2FjaGUgJiZcclxuXHRcdFx0cGFnZS5pcyggXCI6anFtRGF0YShleHRlcm5hbC1wYWdlPSd0cnVlJylcIiApICkge1xyXG5cclxuXHRcdFx0Ly8gVE9ETyB1c2UgX29uIC0gdGhhdCBpcywgc29ydCBvdXQgd2h5IGl0IGRvZXNuJ3Qgd29yayBpbiB0aGlzIGNhc2VcclxuXHRcdFx0cGFnZS5iaW5kKCBcInBhZ2VoaWRlLnJlbW92ZVwiLCBjYWxsYmFjayB8fCBmdW5jdGlvbiggZSwgZGF0YSApIHtcclxuXHJcblx0XHRcdFx0Ly9jaGVjayBpZiB0aGlzIGlzIGEgc2FtZSBwYWdlIHRyYW5zaXRpb24gYW5kIGlmIHNvIGRvbid0IHJlbW92ZSB0aGUgcGFnZVxyXG5cdFx0XHRcdGlmKCAhZGF0YS5zYW1lUGFnZSApe1xyXG5cdFx0XHRcdFx0dmFyICR0aGlzID0gJCggdGhpcyApLFxyXG5cdFx0XHRcdFx0XHRwckV2ZW50ID0gbmV3ICQuRXZlbnQoIFwicGFnZXJlbW92ZVwiICk7XHJcblxyXG5cdFx0XHRcdFx0JHRoaXMudHJpZ2dlciggcHJFdmVudCApO1xyXG5cclxuXHRcdFx0XHRcdGlmICggIXByRXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkgKSB7XHJcblx0XHRcdFx0XHRcdCR0aGlzLnJlbW92ZVdpdGhEZXBlbmRlbnRzKCk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfc2V0T3B0aW9uczogZnVuY3Rpb24oIG8gKSB7XHJcblx0XHRpZiAoIG8udGhlbWUgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKCBcInVpLXBhZ2UtdGhlbWUtXCIgKyB0aGlzLm9wdGlvbnMudGhlbWUgKS5hZGRDbGFzcyggXCJ1aS1wYWdlLXRoZW1lLVwiICsgby50aGVtZSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggby5jb250ZW50VGhlbWUgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50LmZpbmQoIFwiW2RhdGEtXCIgKyAkLm1vYmlsZS5ucyArIFwiPSdjb250ZW50J11cIiApLnJlbW92ZUNsYXNzKCBcInVpLWJvZHktXCIgKyB0aGlzLm9wdGlvbnMuY29udGVudFRoZW1lIClcclxuXHRcdFx0XHQuYWRkQ2xhc3MoIFwidWktYm9keS1cIiArIG8uY29udGVudFRoZW1lICk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X2hhbmRsZVBhZ2VCZWZvcmVTaG93OiBmdW5jdGlvbigvKiBlICovKSB7XHJcblx0XHR0aGlzLnNldENvbnRhaW5lckJhY2tncm91bmQoKTtcclxuXHR9LFxyXG5cdC8vIERlcHJlY2F0ZWQgaW4gMS40IHJlbW92ZSBpbiAxLjVcclxuXHRyZW1vdmVDb250YWluZXJCYWNrZ3JvdW5kOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuZWxlbWVudC5jbG9zZXN0KCBcIjptb2JpbGUtcGFnZWNvbnRhaW5lclwiICkucGFnZWNvbnRhaW5lcih7IFwidGhlbWVcIjogXCJub25lXCIgfSk7XHJcblx0fSxcclxuXHQvLyBEZXByZWNhdGVkIGluIDEuNCByZW1vdmUgaW4gMS41XHJcblx0Ly8gc2V0IHRoZSBwYWdlIGNvbnRhaW5lciBiYWNrZ3JvdW5kIHRvIHRoZSBwYWdlIHRoZW1lXHJcblx0c2V0Q29udGFpbmVyQmFja2dyb3VuZDogZnVuY3Rpb24oIHRoZW1lICkge1xyXG5cdFx0dGhpcy5lbGVtZW50LnBhcmVudCgpLnBhZ2Vjb250YWluZXIoIHsgXCJ0aGVtZVwiOiB0aGVtZSB8fCB0aGlzLm9wdGlvbnMudGhlbWUgfSApO1xyXG5cdH0sXHJcblx0Ly8gRGVwcmVjYXRlZCBpbiAxLjQgcmVtb3ZlIGluIDEuNVxyXG5cdGtlZXBOYXRpdmVTZWxlY3RvcjogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgb3B0aW9ucyA9IHRoaXMub3B0aW9ucyxcclxuXHRcdFx0a2VlcE5hdGl2ZSA9ICQudHJpbSggb3B0aW9ucy5rZWVwTmF0aXZlIHx8IFwiXCIgKSxcclxuXHRcdFx0Z2xvYmFsVmFsdWUgPSAkLnRyaW0oICQubW9iaWxlLmtlZXBOYXRpdmUgKSxcclxuXHRcdFx0b3B0aW9uVmFsdWUgPSAkLnRyaW0oIG9wdGlvbnMua2VlcE5hdGl2ZURlZmF1bHQgKSxcclxuXHJcblx0XHRcdC8vIENoZWNrIGlmICQubW9iaWxlLmtlZXBOYXRpdmUgaGFzIGNoYW5nZWQgZnJvbSB0aGUgZmFjdG9yeSBkZWZhdWx0XHJcblx0XHRcdG5ld0RlZmF1bHQgPSAoIGtlZXBOYXRpdmVGYWN0b3J5RGVmYXVsdCA9PT0gZ2xvYmFsVmFsdWUgP1xyXG5cdFx0XHRcdFwiXCIgOiBnbG9iYWxWYWx1ZSApLFxyXG5cclxuXHRcdFx0Ly8gSWYgJC5tb2JpbGUua2VlcE5hdGl2ZSBoYXMgbm90IGNoYW5nZWQsIHVzZSBvcHRpb25zLmtlZXBOYXRpdmVEZWZhdWx0XHJcblx0XHRcdG9sZERlZmF1bHQgPSAoIG5ld0RlZmF1bHQgPT09IFwiXCIgPyBvcHRpb25WYWx1ZSA6IFwiXCIgKTtcclxuXHJcblx0XHQvLyBDb25jYXRlbmF0ZSBrZWVwTmF0aXZlIHNlbGVjdG9ycyBmcm9tIGFsbCBzb3VyY2VzIHdoZXJlIHRoZSB2YWx1ZSBoYXNcclxuXHRcdC8vIGNoYW5nZWQgb3IsIGlmIG5vdGhpbmcgaGFzIGNoYW5nZWQsIHJldHVybiB0aGUgZGVmYXVsdFxyXG5cdFx0cmV0dXJuICggKCBrZWVwTmF0aXZlID8gWyBrZWVwTmF0aXZlIF0gOiBbXSApXHJcblx0XHRcdC5jb25jYXQoIG5ld0RlZmF1bHQgPyBbIG5ld0RlZmF1bHQgXSA6IFtdIClcclxuXHRcdFx0LmNvbmNhdCggb2xkRGVmYXVsdCA/IFsgb2xkRGVmYXVsdCBdIDogW10gKVxyXG5cdFx0XHQuam9pbiggXCIsIFwiICkgKTtcclxuXHR9XHJcbn0pO1xyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcblx0JC53aWRnZXQoIFwibW9iaWxlLnBhZ2Vjb250YWluZXJcIiwge1xyXG5cdFx0b3B0aW9uczoge1xyXG5cdFx0XHR0aGVtZTogXCJhXCJcclxuXHRcdH0sXHJcblxyXG5cdFx0aW5pdFNlbGVjdG9yOiBmYWxzZSxcclxuXHJcblx0XHRfY3JlYXRlOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dGhpcy5fdHJpZ2dlciggXCJiZWZvcmVjcmVhdGVcIiApO1xyXG5cdFx0XHR0aGlzLnNldExhc3RTY3JvbGxFbmFibGVkID0gdHJ1ZTtcclxuXHJcblx0XHRcdHRoaXMuX29uKCB0aGlzLndpbmRvdywge1xyXG5cdFx0XHRcdC8vIGRpc2FibGUgYW4gc2Nyb2xsIHNldHRpbmcgd2hlbiBhIGhhc2hjaGFuZ2UgaGFzIGJlZW4gZmlyZWQsXHJcblx0XHRcdFx0Ly8gdGhpcyBvbmx5IHdvcmtzIGJlY2F1c2UgdGhlIHJlY29yZGluZyBvZiB0aGUgc2Nyb2xsIHBvc2l0aW9uXHJcblx0XHRcdFx0Ly8gaXMgZGVsYXllZCBmb3IgMTAwbXMgYWZ0ZXIgdGhlIGJyb3dzZXIgbWlnaHQgaGF2ZSBjaGFuZ2VkIHRoZVxyXG5cdFx0XHRcdC8vIHBvc2l0aW9uIGJlY2F1c2Ugb2YgdGhlIGhhc2hjaGFuZ2VcclxuXHRcdFx0XHRuYXZpZ2F0ZTogXCJfZGlzYWJsZVJlY29yZFNjcm9sbFwiLFxyXG5cclxuXHRcdFx0XHQvLyBiaW5kIHRvIHNjcm9sbHN0b3AgZm9yIHRoZSBmaXJzdCBwYWdlLCBcInBhZ2VjaGFuZ2VcIiB3b24ndCBiZVxyXG5cdFx0XHRcdC8vIGZpcmVkIGluIHRoYXQgY2FzZVxyXG5cdFx0XHRcdHNjcm9sbHN0b3A6IFwiX2RlbGF5ZWRSZWNvcmRTY3JvbGxcIlxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdC8vIFRPRE8gY29uc2lkZXIgbW92aW5nIHRoZSBuYXZpZ2F0aW9uIGhhbmRsZXIgT1VUIG9mIHdpZGdldCBpbnRvXHJcblx0XHRcdC8vICAgICAgc29tZSBvdGhlciBvYmplY3QgYXMgZ2x1ZSBiZXR3ZWVuIHRoZSBuYXZpZ2F0ZSBldmVudCBhbmQgdGhlXHJcblx0XHRcdC8vICAgICAgY29udGVudCB3aWRnZXQgbG9hZCBhbmQgY2hhbmdlIG1ldGhvZHNcclxuXHRcdFx0dGhpcy5fb24oIHRoaXMud2luZG93LCB7IG5hdmlnYXRlOiBcIl9maWx0ZXJOYXZpZ2F0ZUV2ZW50c1wiIH0pO1xyXG5cclxuXHRcdFx0Ly8gVE9ETyBtb3ZlIGZyb20gcGFnZSogZXZlbnRzIHRvIGNvbnRlbnQqIGV2ZW50c1xyXG5cdFx0XHR0aGlzLl9vbih7IHBhZ2VjaGFuZ2U6IFwiX2FmdGVyQ29udGVudENoYW5nZVwiIH0pO1xyXG5cclxuXHRcdFx0Ly8gaGFuZGxlIGluaXRpYWwgaGFzaGNoYW5nZSBmcm9tIGNocm9tZSA6KFxyXG5cdFx0XHR0aGlzLndpbmRvdy5vbmUoIFwibmF2aWdhdGVcIiwgJC5wcm94eShmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR0aGlzLnNldExhc3RTY3JvbGxFbmFibGVkID0gdHJ1ZTtcclxuXHRcdFx0fSwgdGhpcykpO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfc2V0T3B0aW9uczogZnVuY3Rpb24oIG9wdGlvbnMgKSB7XHJcblx0XHRcdGlmICggb3B0aW9ucy50aGVtZSAhPT0gdW5kZWZpbmVkICYmIG9wdGlvbnMudGhlbWUgIT09IFwibm9uZVwiICkge1xyXG5cdFx0XHRcdHRoaXMuZWxlbWVudC5yZW1vdmVDbGFzcyggXCJ1aS1vdmVybGF5LVwiICsgdGhpcy5vcHRpb25zLnRoZW1lIClcclxuXHRcdFx0XHRcdC5hZGRDbGFzcyggXCJ1aS1vdmVybGF5LVwiICsgb3B0aW9ucy50aGVtZSApO1xyXG5cdFx0XHR9IGVsc2UgaWYgKCBvcHRpb25zLnRoZW1lICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdFx0dGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKCBcInVpLW92ZXJsYXktXCIgKyB0aGlzLm9wdGlvbnMudGhlbWUgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dGhpcy5fc3VwZXIoIG9wdGlvbnMgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X2Rpc2FibGVSZWNvcmRTY3JvbGw6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR0aGlzLnNldExhc3RTY3JvbGxFbmFibGVkID0gZmFsc2U7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9lbmFibGVSZWNvcmRTY3JvbGw6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR0aGlzLnNldExhc3RTY3JvbGxFbmFibGVkID0gdHJ1ZTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gVE9ETyBjb25zaWRlciB0aGUgbmFtZSBoZXJlLCBzaW5jZSBpdCdzIHB1cnBvc2Ugc3BlY2lmaWNcclxuXHRcdF9hZnRlckNvbnRlbnRDaGFuZ2U6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHQvLyBvbmNlIHRoZSBwYWdlIGhhcyBjaGFuZ2VkLCByZS1lbmFibGUgdGhlIHNjcm9sbCByZWNvcmRpbmdcclxuXHRcdFx0dGhpcy5zZXRMYXN0U2Nyb2xsRW5hYmxlZCA9IHRydWU7XHJcblxyXG5cdFx0XHQvLyByZW1vdmUgYW55IGJpbmRpbmcgdGhhdCBwcmV2aW91c2x5IGV4aXN0ZWQgb24gdGhlIGdldCBzY3JvbGxcclxuXHRcdFx0Ly8gd2hpY2ggbWF5IG9yIG1heSBub3QgYmUgZGlmZmVyZW50IHRoYW4gdGhlIHNjcm9sbCBlbGVtZW50XHJcblx0XHRcdC8vIGRldGVybWluZWQgZm9yIHRoaXMgcGFnZSBwcmV2aW91c2x5XHJcblx0XHRcdHRoaXMuX29mZiggdGhpcy53aW5kb3csIFwic2Nyb2xsc3RvcFwiICk7XHJcblxyXG5cdFx0XHQvLyBkZXRlcm1pbmUgYW5kIGJpbmQgdG8gdGhlIGN1cnJlbnQgc2NvbGwgZWxlbWVudCB3aGljaCBtYXkgYmUgdGhlXHJcblx0XHRcdC8vIHdpbmRvdyBvciBpbiB0aGUgY2FzZSBvZiB0b3VjaCBvdmVyZmxvdyB0aGUgZWxlbWVudCB0b3VjaCBvdmVyZmxvd1xyXG5cdFx0XHR0aGlzLl9vbiggdGhpcy53aW5kb3csIHsgc2Nyb2xsc3RvcDogXCJfZGVsYXllZFJlY29yZFNjcm9sbFwiIH0pO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfcmVjb3JkU2Nyb2xsOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0Ly8gdGhpcyBiYXJyaWVyIHByZXZlbnRzIHNldHRpbmcgdGhlIHNjcm9sbCB2YWx1ZSBiYXNlZCBvblxyXG5cdFx0XHQvLyB0aGUgYnJvd3NlciBzY3JvbGxpbmcgdGhlIHdpbmRvdyBiYXNlZCBvbiBhIGhhc2hjaGFuZ2VcclxuXHRcdFx0aWYgKCAhdGhpcy5zZXRMYXN0U2Nyb2xsRW5hYmxlZCApIHtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHZhciBhY3RpdmUgPSB0aGlzLl9nZXRBY3RpdmVIaXN0b3J5KCksXHJcblx0XHRcdFx0Y3VycmVudFNjcm9sbCwgbWluU2Nyb2xsLCBkZWZhdWx0U2Nyb2xsO1xyXG5cclxuXHRcdFx0aWYgKCBhY3RpdmUgKSB7XHJcblx0XHRcdFx0Y3VycmVudFNjcm9sbCA9IHRoaXMuX2dldFNjcm9sbCgpO1xyXG5cdFx0XHRcdG1pblNjcm9sbCA9IHRoaXMuX2dldE1pblNjcm9sbCgpO1xyXG5cdFx0XHRcdGRlZmF1bHRTY3JvbGwgPSB0aGlzLl9nZXREZWZhdWx0U2Nyb2xsKCk7XHJcblxyXG5cdFx0XHRcdC8vIFNldCBhY3RpdmUgcGFnZSdzIGxhc3RTY3JvbGwgcHJvcC4gSWYgdGhlIGxvY2F0aW9uIHdlJ3JlXHJcblx0XHRcdFx0Ly8gc2Nyb2xsaW5nIHRvIGlzIGxlc3MgdGhhbiBtaW5TY3JvbGxCYWNrLCBsZXQgaXQgZ28uXHJcblx0XHRcdFx0YWN0aXZlLmxhc3RTY3JvbGwgPSBjdXJyZW50U2Nyb2xsIDwgbWluU2Nyb2xsID8gZGVmYXVsdFNjcm9sbCA6IGN1cnJlbnRTY3JvbGw7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblxyXG5cdFx0X2RlbGF5ZWRSZWNvcmRTY3JvbGw6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRzZXRUaW1lb3V0KCAkLnByb3h5KHRoaXMsIFwiX3JlY29yZFNjcm9sbFwiKSwgMTAwICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9nZXRTY3JvbGw6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRyZXR1cm4gdGhpcy53aW5kb3cuc2Nyb2xsVG9wKCk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9nZXRNaW5TY3JvbGw6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRyZXR1cm4gJC5tb2JpbGUubWluU2Nyb2xsQmFjaztcclxuXHRcdH0sXHJcblxyXG5cdFx0X2dldERlZmF1bHRTY3JvbGw6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRyZXR1cm4gJC5tb2JpbGUuZGVmYXVsdEhvbWVTY3JvbGw7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9maWx0ZXJOYXZpZ2F0ZUV2ZW50czogZnVuY3Rpb24oIGUsIGRhdGEgKSB7XHJcblx0XHRcdHZhciB1cmw7XHJcblxyXG5cdFx0XHRpZiAoIGUub3JpZ2luYWxFdmVudCAmJiBlLm9yaWdpbmFsRXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkgKSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR1cmwgPSBlLm9yaWdpbmFsRXZlbnQudHlwZS5pbmRleE9mKCBcImhhc2hjaGFuZ2VcIiApID4gLTEgPyBkYXRhLnN0YXRlLmhhc2ggOiBkYXRhLnN0YXRlLnVybDtcclxuXHJcblx0XHRcdGlmICggIXVybCApIHtcclxuXHRcdFx0XHR1cmwgPSB0aGlzLl9nZXRIYXNoKCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICggIXVybCB8fCB1cmwgPT09IFwiI1wiIHx8IHVybC5pbmRleE9mKCBcIiNcIiArICQubW9iaWxlLnBhdGgudWlTdGF0ZUtleSApID09PSAwICkge1xyXG5cdFx0XHRcdHVybCA9IGxvY2F0aW9uLmhyZWY7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHRoaXMuX2hhbmRsZU5hdmlnYXRlKCB1cmwsIGRhdGEuc3RhdGUgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X2dldEhhc2g6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRyZXR1cm4gJC5tb2JpbGUucGF0aC5wYXJzZUxvY2F0aW9uKCkuaGFzaDtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gVE9ETyBhY3RpdmUgcGFnZSBzaG91bGQgYmUgbWFuYWdlZCBieSB0aGUgY29udGFpbmVyIChpZSwgaXQgc2hvdWxkIGJlIGEgcHJvcGVydHkpXHJcblx0XHRnZXRBY3RpdmVQYWdlOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0cmV0dXJuIHRoaXMuYWN0aXZlUGFnZTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gVE9ETyB0aGUgZmlyc3QgcGFnZSBzaG91bGQgYmUgYSBwcm9wZXJ0eSBzZXQgZHVyaW5nIF9jcmVhdGUgdXNpbmcgdGhlIGxvZ2ljXHJcblx0XHQvLyAgICAgIHRoYXQgY3VycmVudGx5IHJlc2lkZXMgaW4gaW5pdFxyXG5cdFx0X2dldEluaXRpYWxDb250ZW50OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0cmV0dXJuICQubW9iaWxlLmZpcnN0UGFnZTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gVE9ETyBlYWNoIGNvbnRlbnQgY29udGFpbmVyIHNob3VsZCBoYXZlIGEgaGlzdG9yeSBvYmplY3RcclxuXHRcdF9nZXRIaXN0b3J5OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0cmV0dXJuICQubW9iaWxlLm5hdmlnYXRlLmhpc3Rvcnk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9nZXRBY3RpdmVIaXN0b3J5OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0cmV0dXJuIHRoaXMuX2dldEhpc3RvcnkoKS5nZXRBY3RpdmUoKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gVE9ETyB0aGUgZG9jdW1lbnQgYmFzZSBzaG91bGQgYmUgZGV0ZXJtaW5lZCBhdCBjcmVhdGlvblxyXG5cdFx0X2dldERvY3VtZW50QmFzZTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHJldHVybiAkLm1vYmlsZS5wYXRoLmRvY3VtZW50QmFzZTtcclxuXHRcdH0sXHJcblxyXG5cdFx0YmFjazogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHRoaXMuZ28oIC0xICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdGZvcndhcmQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR0aGlzLmdvKCAxICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdGdvOiBmdW5jdGlvbiggc3RlcHMgKSB7XHJcblxyXG5cdFx0XHQvL2lmIGhhc2hsaXN0ZW5pbmcgaXMgZW5hYmxlZCB1c2UgbmF0aXZlIGhpc3RvcnkgbWV0aG9kXHJcblx0XHRcdGlmICggJC5tb2JpbGUuaGFzaExpc3RlbmluZ0VuYWJsZWQgKSB7XHJcblx0XHRcdFx0d2luZG93Lmhpc3RvcnkuZ28oIHN0ZXBzICk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblxyXG5cdFx0XHRcdC8vd2UgYXJlIG5vdCBsaXN0ZW5pbmcgdG8gdGhlIGhhc2ggc28gaGFuZGxlIGhpc3RvcnkgaW50ZXJuYWxseVxyXG5cdFx0XHRcdHZhciBhY3RpdmVJbmRleCA9ICQubW9iaWxlLm5hdmlnYXRlLmhpc3RvcnkuYWN0aXZlSW5kZXgsXHJcblx0XHRcdFx0XHRpbmRleCA9IGFjdGl2ZUluZGV4ICsgcGFyc2VJbnQoIHN0ZXBzLCAxMCApLFxyXG5cdFx0XHRcdFx0dXJsID0gJC5tb2JpbGUubmF2aWdhdGUuaGlzdG9yeS5zdGFja1sgaW5kZXggXS51cmwsXHJcblx0XHRcdFx0XHRkaXJlY3Rpb24gPSAoIHN0ZXBzID49IDEgKT8gXCJmb3J3YXJkXCIgOiBcImJhY2tcIjtcclxuXHJcblx0XHRcdFx0Ly91cGRhdGUgdGhlIGhpc3Rvcnkgb2JqZWN0XHJcblx0XHRcdFx0JC5tb2JpbGUubmF2aWdhdGUuaGlzdG9yeS5hY3RpdmVJbmRleCA9IGluZGV4O1xyXG5cdFx0XHRcdCQubW9iaWxlLm5hdmlnYXRlLmhpc3RvcnkucHJldmlvdXNJbmRleCA9IGFjdGl2ZUluZGV4O1xyXG5cclxuXHRcdFx0XHQvL2NoYW5nZSB0byB0aGUgbmV3IHBhZ2VcclxuXHRcdFx0XHR0aGlzLmNoYW5nZSggdXJsLCB7IGRpcmVjdGlvbjogZGlyZWN0aW9uLCBjaGFuZ2VIYXNoOiBmYWxzZSwgZnJvbUhhc2hDaGFuZ2U6IHRydWUgfSApO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vIFRPRE8gcmVuYW1lIF9oYW5kbGVEZXN0aW5hdGlvblxyXG5cdFx0X2hhbmRsZURlc3RpbmF0aW9uOiBmdW5jdGlvbiggdG8gKSB7XHJcblx0XHRcdHZhciBoaXN0b3J5O1xyXG5cclxuXHRcdFx0Ly8gY2xlYW4gdGhlIGhhc2ggZm9yIGNvbXBhcmlzb24gaWYgaXQncyBhIHVybFxyXG5cdFx0XHRpZiAoICQudHlwZSh0bykgPT09IFwic3RyaW5nXCIgKSB7XHJcblx0XHRcdFx0dG8gPSAkLm1vYmlsZS5wYXRoLnN0cmlwSGFzaCggdG8gKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKCB0byApIHtcclxuXHRcdFx0XHRoaXN0b3J5ID0gdGhpcy5fZ2V0SGlzdG9yeSgpO1xyXG5cclxuXHRcdFx0XHQvLyBBdCB0aGlzIHBvaW50LCAndG8nIGNhbiBiZSBvbmUgb2YgMyB0aGluZ3MsIGEgY2FjaGVkIHBhZ2VcclxuXHRcdFx0XHQvLyBlbGVtZW50IGZyb20gYSBoaXN0b3J5IHN0YWNrIGVudHJ5LCBhbiBpZCwgb3Igc2l0ZS1yZWxhdGl2ZSAvXHJcblx0XHRcdFx0Ly8gYWJzb2x1dGUgVVJMLiBJZiAndG8nIGlzIGFuIGlkLCB3ZSBuZWVkIHRvIHJlc29sdmUgaXQgYWdhaW5zdFxyXG5cdFx0XHRcdC8vIHRoZSBkb2N1bWVudEJhc2UsIG5vdCB0aGUgbG9jYXRpb24uaHJlZiwgc2luY2UgdGhlIGhhc2hjaGFuZ2VcclxuXHRcdFx0XHQvLyBjb3VsZCd2ZSBiZWVuIHRoZSByZXN1bHQgb2YgYSBmb3J3YXJkL2JhY2t3YXJkIG5hdmlnYXRpb25cclxuXHRcdFx0XHQvLyB0aGF0IGNyb3NzZXMgZnJvbSBhbiBleHRlcm5hbCBwYWdlL2RpYWxvZyB0byBhbiBpbnRlcm5hbFxyXG5cdFx0XHRcdC8vIHBhZ2UvZGlhbG9nLlxyXG5cdFx0XHRcdC8vXHJcblx0XHRcdFx0Ly8gVE9ETyBtb3ZlIGNoZWNrIHRvIGhpc3Rvcnkgb2JqZWN0IG9yIHBhdGggb2JqZWN0P1xyXG5cdFx0XHRcdHRvID0gISQubW9iaWxlLnBhdGguaXNQYXRoKCB0byApID8gKCAkLm1vYmlsZS5wYXRoLm1ha2VVcmxBYnNvbHV0ZSggXCIjXCIgKyB0bywgdGhpcy5fZ2V0RG9jdW1lbnRCYXNlKCkgKSApIDogdG87XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuIHRvIHx8IHRoaXMuX2dldEluaXRpYWxDb250ZW50KCk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF90cmFuc2l0aW9uRnJvbUhpc3Rvcnk6IGZ1bmN0aW9uKCBkaXJlY3Rpb24sIGRlZmF1bHRUcmFuc2l0aW9uICkge1xyXG5cdFx0XHR2YXIgaGlzdG9yeSA9IHRoaXMuX2dldEhpc3RvcnkoKSxcclxuXHRcdFx0XHRlbnRyeSA9ICggZGlyZWN0aW9uID09PSBcImJhY2tcIiA/IGhpc3RvcnkuZ2V0TGFzdCgpIDogaGlzdG9yeS5nZXRBY3RpdmUoKSApO1xyXG5cclxuXHRcdFx0cmV0dXJuICggZW50cnkgJiYgZW50cnkudHJhbnNpdGlvbiApIHx8IGRlZmF1bHRUcmFuc2l0aW9uO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfaGFuZGxlRGlhbG9nOiBmdW5jdGlvbiggY2hhbmdlUGFnZU9wdGlvbnMsIGRhdGEgKSB7XHJcblx0XHRcdHZhciB0bywgYWN0aXZlLCBhY3RpdmVDb250ZW50ID0gdGhpcy5nZXRBY3RpdmVQYWdlKCk7XHJcblxyXG5cdFx0XHQvLyBJZiBjdXJyZW50IGFjdGl2ZSBwYWdlIGlzIG5vdCBhIGRpYWxvZyBza2lwIHRoZSBkaWFsb2cgYW5kIGNvbnRpbnVlXHJcblx0XHRcdC8vIGluIHRoZSBzYW1lIGRpcmVjdGlvblxyXG5cdFx0XHQvLyBOb3RlOiBUaGUgZGlhbG9nIHdpZGdldCBpcyBkZXByZWNhdGVkIGFzIG9mIDEuNC4wIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gMS41LjAuXHJcblx0XHRcdC8vIFRodXMsIGFzIG9mIDEuNS4wIGFjdGl2ZUNvbnRlbnQuZGF0YSggXCJtb2JpbGUtZGlhbG9nXCIgKSB3aWxsIGFsd2F5cyBldmFsdWF0ZSB0b1xyXG5cdFx0XHQvLyBmYWxzeSwgc28gdGhlIHNlY29uZCBjb25kaXRpb24gaW4gdGhlIGlmLXN0YXRlbWVudCBiZWxvdyBjYW4gYmUgcmVtb3ZlZCBhbHRvZ2V0aGVyLlxyXG5cdFx0XHRpZiAoIGFjdGl2ZUNvbnRlbnQgJiYgIWFjdGl2ZUNvbnRlbnQuZGF0YSggXCJtb2JpbGUtZGlhbG9nXCIgKSApIHtcclxuXHRcdFx0XHQvLyBkZXRlcm1pbmUgaWYgd2UncmUgaGVhZGluZyBmb3J3YXJkIG9yIGJhY2t3YXJkIGFuZCBjb250aW51ZVxyXG5cdFx0XHRcdC8vIGFjY29yZGluZ2x5IHBhc3QgdGhlIGN1cnJlbnQgZGlhbG9nXHJcblx0XHRcdFx0aWYgKCBkYXRhLmRpcmVjdGlvbiA9PT0gXCJiYWNrXCIgKSB7XHJcblx0XHRcdFx0XHR0aGlzLmJhY2soKTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0dGhpcy5mb3J3YXJkKCk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBwcmV2ZW50IGNoYW5nZVBhZ2UgY2FsbFxyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQvLyBpZiB0aGUgY3VycmVudCBhY3RpdmUgcGFnZSBpcyBhIGRpYWxvZyBhbmQgd2UncmUgbmF2aWdhdGluZ1xyXG5cdFx0XHRcdC8vIHRvIGEgZGlhbG9nIHVzZSB0aGUgZGlhbG9nIG9iamVjdGVkIHNhdmVkIGluIHRoZSBzdGFja1xyXG5cdFx0XHRcdHRvID0gZGF0YS5wYWdlVXJsO1xyXG5cdFx0XHRcdGFjdGl2ZSA9IHRoaXMuX2dldEFjdGl2ZUhpc3RvcnkoKTtcclxuXHJcblx0XHRcdFx0Ly8gbWFrZSBzdXJlIHRvIHNldCB0aGUgcm9sZSwgdHJhbnNpdGlvbiBhbmQgcmV2ZXJzYWxcclxuXHRcdFx0XHQvLyBhcyBtb3N0IG9mIHRoaXMgaXMgbG9zdCBieSB0aGUgZG9tQ2FjaGUgY2xlYW5pbmdcclxuXHRcdFx0XHQkLmV4dGVuZCggY2hhbmdlUGFnZU9wdGlvbnMsIHtcclxuXHRcdFx0XHRcdHJvbGU6IGFjdGl2ZS5yb2xlLFxyXG5cdFx0XHRcdFx0dHJhbnNpdGlvbjogdGhpcy5fdHJhbnNpdGlvbkZyb21IaXN0b3J5KFxyXG5cdFx0XHRcdFx0XHRkYXRhLmRpcmVjdGlvbixcclxuXHRcdFx0XHRcdFx0Y2hhbmdlUGFnZU9wdGlvbnMudHJhbnNpdGlvbiApLFxyXG5cdFx0XHRcdFx0cmV2ZXJzZTogZGF0YS5kaXJlY3Rpb24gPT09IFwiYmFja1wiXHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHJldHVybiB0bztcclxuXHRcdH0sXHJcblxyXG5cdFx0X2hhbmRsZU5hdmlnYXRlOiBmdW5jdGlvbiggdXJsLCBkYXRhICkge1xyXG5cdFx0XHQvL2ZpbmQgZmlyc3QgcGFnZSB2aWEgaGFzaFxyXG5cdFx0XHQvLyBUT0RPIHN0cmlwcGluZyB0aGUgaGFzaCB0d2ljZSB3aXRoIGhhbmRsZVVybFxyXG5cdFx0XHR2YXIgdG8gPSAkLm1vYmlsZS5wYXRoLnN0cmlwSGFzaCggdXJsICksIGhpc3RvcnkgPSB0aGlzLl9nZXRIaXN0b3J5KCksXHJcblxyXG5cdFx0XHRcdC8vIHRyYW5zaXRpb24gaXMgZmFsc2UgaWYgaXQncyB0aGUgZmlyc3QgcGFnZSwgdW5kZWZpbmVkXHJcblx0XHRcdFx0Ly8gb3RoZXJ3aXNlIChhbmQgbWF5IGJlIG92ZXJyaWRkZW4gYnkgZGVmYXVsdClcclxuXHRcdFx0XHR0cmFuc2l0aW9uID0gaGlzdG9yeS5zdGFjay5sZW5ndGggPT09IDAgPyBcIm5vbmVcIiA6XHJcblx0XHRcdFx0XHR0aGlzLl90cmFuc2l0aW9uRnJvbUhpc3RvcnkoIGRhdGEuZGlyZWN0aW9uICksXHJcblxyXG5cdFx0XHRcdC8vIGRlZmF1bHQgb3B0aW9ucyBmb3IgdGhlIGNoYW5nUGFnZSBjYWxscyBtYWRlIGFmdGVyIGV4YW1pbmluZ1xyXG5cdFx0XHRcdC8vIHRoZSBjdXJyZW50IHN0YXRlIG9mIHRoZSBwYWdlIGFuZCB0aGUgaGFzaCwgTk9URSB0aGF0IHRoZVxyXG5cdFx0XHRcdC8vIHRyYW5zaXRpb24gaXMgZGVyaXZlZCBmcm9tIHRoZSBwcmV2aW91cyBoaXN0b3J5IGVudHJ5XHJcblx0XHRcdFx0Y2hhbmdlUGFnZU9wdGlvbnMgPSB7XHJcblx0XHRcdFx0XHRjaGFuZ2VIYXNoOiBmYWxzZSxcclxuXHRcdFx0XHRcdGZyb21IYXNoQ2hhbmdlOiB0cnVlLFxyXG5cdFx0XHRcdFx0cmV2ZXJzZTogZGF0YS5kaXJlY3Rpb24gPT09IFwiYmFja1wiXHJcblx0XHRcdFx0fTtcclxuXHJcblx0XHRcdCQuZXh0ZW5kKCBjaGFuZ2VQYWdlT3B0aW9ucywgZGF0YSwge1xyXG5cdFx0XHRcdHRyYW5zaXRpb246IHRyYW5zaXRpb25cclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHQvLyBUT0RPIG1vdmUgdG8gX2hhbmRsZURlc3RpbmF0aW9uID9cclxuXHRcdFx0Ly8gSWYgdGhpcyBpc24ndCB0aGUgZmlyc3QgcGFnZSwgaWYgdGhlIGN1cnJlbnQgdXJsIGlzIGEgZGlhbG9nIGhhc2hcclxuXHRcdFx0Ly8ga2V5LCBhbmQgdGhlIGluaXRpYWwgZGVzdGluYXRpb24gaXNuJ3QgZXF1YWwgdG8gdGhlIGN1cnJlbnQgdGFyZ2V0XHJcblx0XHRcdC8vIHBhZ2UsIHVzZSB0aGUgc3BlY2lhbCBkaWFsb2cgaGFuZGxpbmdcclxuXHRcdFx0aWYgKCBoaXN0b3J5LmFjdGl2ZUluZGV4ID4gMCAmJlxyXG5cdFx0XHRcdHRvLmluZGV4T2YoICQubW9iaWxlLmRpYWxvZ0hhc2hLZXkgKSA+IC0xICkge1xyXG5cclxuXHRcdFx0XHR0byA9IHRoaXMuX2hhbmRsZURpYWxvZyggY2hhbmdlUGFnZU9wdGlvbnMsIGRhdGEgKTtcclxuXHJcblx0XHRcdFx0aWYgKCB0byA9PT0gZmFsc2UgKSB7XHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR0aGlzLl9jaGFuZ2VDb250ZW50KCB0aGlzLl9oYW5kbGVEZXN0aW5hdGlvbiggdG8gKSwgY2hhbmdlUGFnZU9wdGlvbnMgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X2NoYW5nZUNvbnRlbnQ6IGZ1bmN0aW9uKCB0bywgb3B0cyApIHtcclxuXHRcdFx0JC5tb2JpbGUuY2hhbmdlUGFnZSggdG8sIG9wdHMgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X2dldEJhc2U6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRyZXR1cm4gJC5tb2JpbGUuYmFzZTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X2dldE5zOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0cmV0dXJuICQubW9iaWxlLm5zO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfZW5oYW5jZTogZnVuY3Rpb24oIGNvbnRlbnQsIHJvbGUgKSB7XHJcblx0XHRcdC8vIFRPRE8gY29uc2lkZXIgc3VwcG9ydGluZyBhIGN1c3RvbSBjYWxsYmFjaywgYW5kIHBhc3NpbmcgaW5cclxuXHRcdFx0Ly8gdGhlIHNldHRpbmdzIHdoaWNoIGluY2x1ZGVzIHRoZSByb2xlXHJcblx0XHRcdHJldHVybiBjb250ZW50LnBhZ2UoeyByb2xlOiByb2xlIH0pO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfaW5jbHVkZTogZnVuY3Rpb24oIHBhZ2UsIHNldHRpbmdzICkge1xyXG5cdFx0XHQvLyBhcHBlbmQgdG8gcGFnZSBhbmQgZW5oYW5jZVxyXG5cdFx0XHRwYWdlLmFwcGVuZFRvKCB0aGlzLmVsZW1lbnQgKTtcclxuXHJcblx0XHRcdC8vIHVzZSB0aGUgcGFnZSB3aWRnZXQgdG8gZW5oYW5jZVxyXG5cdFx0XHR0aGlzLl9lbmhhbmNlKCBwYWdlLCBzZXR0aW5ncy5yb2xlICk7XHJcblxyXG5cdFx0XHQvLyByZW1vdmUgcGFnZSBvbiBoaWRlXHJcblx0XHRcdHBhZ2UucGFnZSggXCJiaW5kUmVtb3ZlXCIgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X2ZpbmQ6IGZ1bmN0aW9uKCBhYnNVcmwgKSB7XHJcblx0XHRcdC8vIFRPRE8gY29uc2lkZXIgc3VwcG9ydGluZyBhIGN1c3RvbSBjYWxsYmFja1xyXG5cdFx0XHR2YXIgZmlsZVVybCA9IHRoaXMuX2NyZWF0ZUZpbGVVcmwoIGFic1VybCApLFxyXG5cdFx0XHRcdGRhdGFVcmwgPSB0aGlzLl9jcmVhdGVEYXRhVXJsKCBhYnNVcmwgKSxcclxuXHRcdFx0XHRwYWdlLCBpbml0aWFsQ29udGVudCA9IHRoaXMuX2dldEluaXRpYWxDb250ZW50KCk7XHJcblxyXG5cdFx0XHQvLyBDaGVjayB0byBzZWUgaWYgdGhlIHBhZ2UgYWxyZWFkeSBleGlzdHMgaW4gdGhlIERPTS5cclxuXHRcdFx0Ly8gTk9URSBkbyBfbm90XyB1c2UgdGhlIDpqcW1EYXRhIHBzZXVkbyBzZWxlY3RvciBiZWNhdXNlIHBhcmVudGhlc2lzXHJcblx0XHRcdC8vICAgICAgYXJlIGEgdmFsaWQgdXJsIGNoYXIgYW5kIGl0IGJyZWFrcyBvbiB0aGUgZmlyc3Qgb2NjdXJlbmNlXHJcblx0XHRcdHBhZ2UgPSB0aGlzLmVsZW1lbnRcclxuXHRcdFx0XHQuY2hpbGRyZW4oIFwiW2RhdGEtXCIgKyB0aGlzLl9nZXROcygpICtcclxuXHRcdFx0XHRcdFwidXJsPSdcIiArICQubW9iaWxlLnBhdGguaGFzaFRvU2VsZWN0b3IoIGRhdGFVcmwgKSArIFwiJ11cIiApO1xyXG5cclxuXHRcdFx0Ly8gSWYgd2UgZmFpbGVkIHRvIGZpbmQgdGhlIHBhZ2UsIGNoZWNrIHRvIHNlZSBpZiB0aGUgdXJsIGlzIGFcclxuXHRcdFx0Ly8gcmVmZXJlbmNlIHRvIGFuIGVtYmVkZGVkIHBhZ2UuIElmIHNvLCBpdCBtYXkgaGF2ZSBiZWVuIGR5bmFtaWNhbGx5XHJcblx0XHRcdC8vIGluamVjdGVkIGJ5IGEgZGV2ZWxvcGVyLCBpbiB3aGljaCBjYXNlIGl0IHdvdWxkIGJlIGxhY2tpbmcgYVxyXG5cdFx0XHQvLyBkYXRhLXVybCBhdHRyaWJ1dGUgYW5kIGluIG5lZWQgb2YgZW5oYW5jZW1lbnQuXHJcblx0XHRcdGlmICggcGFnZS5sZW5ndGggPT09IDAgJiYgZGF0YVVybCAmJiAhJC5tb2JpbGUucGF0aC5pc1BhdGgoIGRhdGFVcmwgKSApIHtcclxuXHRcdFx0XHRwYWdlID0gdGhpcy5lbGVtZW50LmNoaWxkcmVuKCAkLm1vYmlsZS5wYXRoLmhhc2hUb1NlbGVjdG9yKFwiI1wiICsgZGF0YVVybCkgKVxyXG5cdFx0XHRcdFx0LmF0dHIoIFwiZGF0YS1cIiArIHRoaXMuX2dldE5zKCkgKyBcInVybFwiLCBkYXRhVXJsIClcclxuXHRcdFx0XHRcdC5qcW1EYXRhKCBcInVybFwiLCBkYXRhVXJsICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIElmIHdlIGZhaWxlZCB0byBmaW5kIGEgcGFnZSBpbiB0aGUgRE9NLCBjaGVjayB0aGUgVVJMIHRvIHNlZSBpZiBpdFxyXG5cdFx0XHQvLyByZWZlcnMgdG8gdGhlIGZpcnN0IHBhZ2UgaW4gdGhlIGFwcGxpY2F0aW9uLiBBbHNvIGNoZWNrIHRvIG1ha2Ugc3VyZVxyXG5cdFx0XHQvLyBvdXIgY2FjaGVkLWZpcnN0LXBhZ2UgaXMgYWN0dWFsbHkgaW4gdGhlIERPTS4gU29tZSB1c2VyIGRlcGxveWVkXHJcblx0XHRcdC8vIGFwcHMgYXJlIHBydW5pbmcgdGhlIGZpcnN0IHBhZ2UgZnJvbSB0aGUgRE9NIGZvciB2YXJpb3VzIHJlYXNvbnMuXHJcblx0XHRcdC8vIFdlIGNoZWNrIGZvciB0aGlzIGNhc2UgaGVyZSBiZWNhdXNlIHdlIGRvbid0IHdhbnQgYSBmaXJzdC1wYWdlIHdpdGhcclxuXHRcdFx0Ly8gYW4gaWQgZmFsbGluZyB0aHJvdWdoIHRvIHRoZSBub24tZXhpc3RlbnQgZW1iZWRkZWQgcGFnZSBlcnJvciBjYXNlLlxyXG5cdFx0XHRpZiAoIHBhZ2UubGVuZ3RoID09PSAwICYmXHJcblx0XHRcdFx0JC5tb2JpbGUucGF0aC5pc0ZpcnN0UGFnZVVybCggZmlsZVVybCApICYmXHJcblx0XHRcdFx0aW5pdGlhbENvbnRlbnQgJiZcclxuXHRcdFx0XHRpbml0aWFsQ29udGVudC5wYXJlbnQoKS5sZW5ndGggKSB7XHJcblx0XHRcdFx0cGFnZSA9ICQoIGluaXRpYWxDb250ZW50ICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHJldHVybiBwYWdlO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfZ2V0TG9hZGVyOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0cmV0dXJuICQubW9iaWxlLmxvYWRpbmcoKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X3Nob3dMb2FkaW5nOiBmdW5jdGlvbiggZGVsYXksIHRoZW1lLCBtc2csIHRleHRvbmx5ICkge1xyXG5cdFx0XHQvLyBUaGlzIGNvbmZpZ3VyYWJsZSB0aW1lb3V0IGFsbG93cyBjYWNoZWQgcGFnZXMgYSBicmllZlxyXG5cdFx0XHQvLyBkZWxheSB0byBsb2FkIHdpdGhvdXQgc2hvd2luZyBhIG1lc3NhZ2VcclxuXHRcdFx0aWYgKCB0aGlzLl9sb2FkTXNnICkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dGhpcy5fbG9hZE1zZyA9IHNldFRpbWVvdXQoJC5wcm94eShmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR0aGlzLl9nZXRMb2FkZXIoKS5sb2FkZXIoIFwic2hvd1wiLCB0aGVtZSwgbXNnLCB0ZXh0b25seSApO1xyXG5cdFx0XHRcdHRoaXMuX2xvYWRNc2cgPSAwO1xyXG5cdFx0XHR9LCB0aGlzKSwgZGVsYXkgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X2hpZGVMb2FkaW5nOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0Ly8gU3RvcCBtZXNzYWdlIHNob3cgdGltZXJcclxuXHRcdFx0Y2xlYXJUaW1lb3V0KCB0aGlzLl9sb2FkTXNnICk7XHJcblx0XHRcdHRoaXMuX2xvYWRNc2cgPSAwO1xyXG5cclxuXHRcdFx0Ly8gSGlkZSBsb2FkaW5nIG1lc3NhZ2VcclxuXHRcdFx0dGhpcy5fZ2V0TG9hZGVyKCkubG9hZGVyKCBcImhpZGVcIiApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfc2hvd0Vycm9yOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0Ly8gbWFrZSBzdXJlIHRvIHJlbW92ZSB0aGUgY3VycmVudCBsb2FkaW5nIG1lc3NhZ2VcclxuXHRcdFx0dGhpcy5faGlkZUxvYWRpbmcoKTtcclxuXHJcblx0XHRcdC8vIHNob3cgdGhlIGVycm9yIG1lc3NhZ2VcclxuXHRcdFx0dGhpcy5fc2hvd0xvYWRpbmcoIDAsICQubW9iaWxlLnBhZ2VMb2FkRXJyb3JNZXNzYWdlVGhlbWUsICQubW9iaWxlLnBhZ2VMb2FkRXJyb3JNZXNzYWdlLCB0cnVlICk7XHJcblxyXG5cdFx0XHQvLyBoaWRlIHRoZSBlcnJvciBtZXNzYWdlIGFmdGVyIGEgZGVsYXlcclxuXHRcdFx0Ly8gVE9ETyBjb25maWd1cmF0aW9uXHJcblx0XHRcdHNldFRpbWVvdXQoICQucHJveHkodGhpcywgXCJfaGlkZUxvYWRpbmdcIiksIDE1MDAgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X3BhcnNlOiBmdW5jdGlvbiggaHRtbCwgZmlsZVVybCApIHtcclxuXHRcdFx0Ly8gVE9ETyBjb25zaWRlciBhbGxvd2luZyBjdXN0b21pemF0aW9uIG9mIHRoaXMgbWV0aG9kLiBJdCdzIHZlcnkgSlFNIHNwZWNpZmljXHJcblx0XHRcdHZhciBwYWdlLCBhbGwgPSAkKCBcIjxkaXY+PC9kaXY+XCIgKTtcclxuXHJcblx0XHRcdC8vd29ya2Fyb3VuZCB0byBhbGxvdyBzY3JpcHRzIHRvIGV4ZWN1dGUgd2hlbiBpbmNsdWRlZCBpbiBwYWdlIGRpdnNcclxuXHRcdFx0YWxsLmdldCggMCApLmlubmVySFRNTCA9IGh0bWw7XHJcblxyXG5cdFx0XHRwYWdlID0gYWxsLmZpbmQoIFwiOmpxbURhdGEocm9sZT0ncGFnZScpLCA6anFtRGF0YShyb2xlPSdkaWFsb2cnKVwiICkuZmlyc3QoKTtcclxuXHJcblx0XHRcdC8vaWYgcGFnZSBlbGVtIGNvdWxkbid0IGJlIGZvdW5kLCBjcmVhdGUgb25lIGFuZCBpbnNlcnQgdGhlIGJvZHkgZWxlbWVudCdzIGNvbnRlbnRzXHJcblx0XHRcdGlmICggIXBhZ2UubGVuZ3RoICkge1xyXG5cdFx0XHRcdHBhZ2UgPSAkKCBcIjxkaXYgZGF0YS1cIiArIHRoaXMuX2dldE5zKCkgKyBcInJvbGU9J3BhZ2UnPlwiICtcclxuXHRcdFx0XHRcdCggaHRtbC5zcGxpdCggLzxcXC8/Ym9keVtePl0qPi9nbWkgKVsxXSB8fCBcIlwiICkgK1xyXG5cdFx0XHRcdFx0XCI8L2Rpdj5cIiApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBUT0RPIHRhZ2dpbmcgYSBwYWdlIHdpdGggZXh0ZXJuYWwgdG8gbWFrZSBzdXJlIHRoYXQgZW1iZWRkZWQgcGFnZXMgYXJlbid0XHJcblx0XHRcdC8vIHJlbW92ZWQgYnkgdGhlIHZhcmlvdXMgcGFnZSBoYW5kbGluZyBjb2RlIGlzIGJhZC4gSGF2aW5nIHBhZ2UgaGFuZGxpbmcgY29kZVxyXG5cdFx0XHQvLyBpbiBtYW55IHBsYWNlcyBpcyBiYWQuIFNvbHV0aW9ucyBwb3N0IDEuMFxyXG5cdFx0XHRwYWdlLmF0dHIoIFwiZGF0YS1cIiArIHRoaXMuX2dldE5zKCkgKyBcInVybFwiLCB0aGlzLl9jcmVhdGVEYXRhVXJsKCBmaWxlVXJsICkgKVxyXG5cdFx0XHRcdC5hdHRyKCBcImRhdGEtXCIgKyB0aGlzLl9nZXROcygpICsgXCJleHRlcm5hbC1wYWdlXCIsIHRydWUgKTtcclxuXHJcblx0XHRcdHJldHVybiBwYWdlO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfc2V0TG9hZGVkVGl0bGU6IGZ1bmN0aW9uKCBwYWdlLCBodG1sICkge1xyXG5cdFx0XHQvL3BhZ2UgdGl0bGUgcmVnZXhwXHJcblx0XHRcdHZhciBuZXdQYWdlVGl0bGUgPSBodG1sLm1hdGNoKCAvPHRpdGxlW14+XSo+KFtePF0qKS8gKSAmJiBSZWdFeHAuJDE7XHJcblxyXG5cdFx0XHRpZiAoIG5ld1BhZ2VUaXRsZSAmJiAhcGFnZS5qcW1EYXRhKFwidGl0bGVcIikgKSB7XHJcblx0XHRcdFx0bmV3UGFnZVRpdGxlID0gJCggXCI8ZGl2PlwiICsgbmV3UGFnZVRpdGxlICsgXCI8L2Rpdj5cIiApLnRleHQoKTtcclxuXHRcdFx0XHRwYWdlLmpxbURhdGEoIFwidGl0bGVcIiwgbmV3UGFnZVRpdGxlICk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblxyXG5cdFx0X2lzUmV3cml0YWJsZUJhc2VUYWc6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRyZXR1cm4gJC5tb2JpbGUuZHluYW1pY0Jhc2VFbmFibGVkICYmICEkLnN1cHBvcnQuZHluYW1pY0Jhc2VUYWc7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9jcmVhdGVEYXRhVXJsOiBmdW5jdGlvbiggYWJzb2x1dGVVcmwgKSB7XHJcblx0XHRcdHJldHVybiAkLm1vYmlsZS5wYXRoLmNvbnZlcnRVcmxUb0RhdGFVcmwoIGFic29sdXRlVXJsICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9jcmVhdGVGaWxlVXJsOiBmdW5jdGlvbiggYWJzb2x1dGVVcmwgKSB7XHJcblx0XHRcdHJldHVybiAkLm1vYmlsZS5wYXRoLmdldEZpbGVQYXRoKCBhYnNvbHV0ZVVybCApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfdHJpZ2dlcldpdGhEZXByZWNhdGVkOiBmdW5jdGlvbiggbmFtZSwgZGF0YSwgcGFnZSApIHtcclxuXHRcdFx0dmFyIGRlcHJlY2F0ZWRFdmVudCA9ICQuRXZlbnQoIFwicGFnZVwiICsgbmFtZSApLFxyXG5cdFx0XHRcdG5ld0V2ZW50ID0gJC5FdmVudCggdGhpcy53aWRnZXROYW1lICsgbmFtZSApO1xyXG5cclxuXHRcdFx0Ly8gREVQUkVDQVRFRFxyXG5cdFx0XHQvLyB0cmlnZ2VyIHRoZSBvbGQgZGVwcmVjYXRlZCBldmVudCBvbiB0aGUgcGFnZSBpZiBpdCdzIHByb3ZpZGVkXHJcblx0XHRcdCggcGFnZSB8fCB0aGlzLmVsZW1lbnQgKS50cmlnZ2VyKCBkZXByZWNhdGVkRXZlbnQsIGRhdGEgKTtcclxuXHJcblx0XHRcdC8vIHVzZSB0aGUgd2lkZ2V0IHRyaWdnZXIgbWV0aG9kIGZvciB0aGUgbmV3IGNvbnRlbnQqIGV2ZW50XHJcblx0XHRcdHRoaXMuX3RyaWdnZXIoIG5hbWUsIG5ld0V2ZW50LCBkYXRhICk7XHJcblxyXG5cdFx0XHRyZXR1cm4ge1xyXG5cdFx0XHRcdGRlcHJlY2F0ZWRFdmVudDogZGVwcmVjYXRlZEV2ZW50LFxyXG5cdFx0XHRcdGV2ZW50OiBuZXdFdmVudFxyXG5cdFx0XHR9O1xyXG5cdFx0fSxcclxuXHJcblx0XHQvLyBUT0RPIGl0IHdvdWxkIGJlIG5pY2UgdG8gc3BsaXQgdGhpcyB1cCBtb3JlIGJ1dCBldmVyeXRoaW5nIGFwcGVhcnMgdG8gYmUgXCJvbmUgb2ZmXCJcclxuXHRcdC8vICAgICAgb3IgcmVxdWlyZSBvcmRlcmluZyBzdWNoIHRoYXQgb3RoZXIgYml0cyBhcmUgc3ByaW5rbGVkIGluIGJldHdlZW4gcGFydHMgdGhhdFxyXG5cdFx0Ly8gICAgICBjb3VsZCBiZSBhYnN0cmFjdGVkIG91dCBhcyBhIGdyb3VwXHJcblx0XHRfbG9hZFN1Y2Nlc3M6IGZ1bmN0aW9uKCBhYnNVcmwsIHRyaWdnZXJEYXRhLCBzZXR0aW5ncywgZGVmZXJyZWQgKSB7XHJcblx0XHRcdHZhciBmaWxlVXJsID0gdGhpcy5fY3JlYXRlRmlsZVVybCggYWJzVXJsICk7XHJcblxyXG5cdFx0XHRyZXR1cm4gJC5wcm94eShmdW5jdGlvbiggaHRtbCwgdGV4dFN0YXR1cywgeGhyICkge1xyXG5cdFx0XHRcdC8vcHJlLXBhcnNlIGh0bWwgdG8gY2hlY2sgZm9yIGEgZGF0YS11cmwsXHJcblx0XHRcdFx0Ly91c2UgaXQgYXMgdGhlIG5ldyBmaWxlVXJsLCBiYXNlIHBhdGgsIGV0Y1xyXG5cdFx0XHRcdHZhciBjb250ZW50LFxyXG5cclxuXHRcdFx0XHRcdC8vIFRPRE8gaGFuZGxlIGRpYWxvZ3MgYWdhaW5cclxuXHRcdFx0XHRcdHBhZ2VFbGVtUmVnZXggPSBuZXcgUmVnRXhwKCBcIig8W14+XStcXFxcYmRhdGEtXCIgKyB0aGlzLl9nZXROcygpICsgXCJyb2xlPVtcXFwiJ10/cGFnZVtcXFwiJ10/W14+XSo+KVwiICksXHJcblxyXG5cdFx0XHRcdFx0ZGF0YVVybFJlZ2V4ID0gbmV3IFJlZ0V4cCggXCJcXFxcYmRhdGEtXCIgKyB0aGlzLl9nZXROcygpICsgXCJ1cmw9W1xcXCInXT8oW15cXFwiJz5dKilbXFxcIiddP1wiICk7XHJcblxyXG5cdFx0XHRcdC8vIGRhdGEtdXJsIG11c3QgYmUgcHJvdmlkZWQgZm9yIHRoZSBiYXNlIHRhZyBzbyByZXNvdXJjZSByZXF1ZXN0c1xyXG5cdFx0XHRcdC8vIGNhbiBiZSBkaXJlY3RlZCB0byB0aGUgY29ycmVjdCB1cmwuIGxvYWRpbmcgaW50byBhIHRlbXByb3JhcnlcclxuXHRcdFx0XHQvLyBlbGVtZW50IG1ha2VzIHRoZXNlIHJlcXVlc3RzIGltbWVkaWF0ZWx5XHJcblx0XHRcdFx0aWYgKCBwYWdlRWxlbVJlZ2V4LnRlc3QoIGh0bWwgKSAmJlxyXG5cdFx0XHRcdFx0UmVnRXhwLiQxICYmXHJcblx0XHRcdFx0XHRkYXRhVXJsUmVnZXgudGVzdCggUmVnRXhwLiQxICkgJiZcclxuXHRcdFx0XHRcdFJlZ0V4cC4kMSApIHtcclxuXHRcdFx0XHRcdGZpbGVVcmwgPSAkLm1vYmlsZS5wYXRoLmdldEZpbGVQYXRoKCAkKFwiPGRpdj5cIiArIFJlZ0V4cC4kMSArIFwiPC9kaXY+XCIpLnRleHQoKSApO1xyXG5cclxuXHRcdFx0XHRcdC8vIFdlIHNwZWNpZnkgdGhhdCwgaWYgYSBkYXRhLXVybCBhdHRyaWJ1dGUgaXMgZ2l2ZW4gb24gdGhlIHBhZ2UgZGl2LCBpdHMgdmFsdWVcclxuXHRcdFx0XHRcdC8vIG11c3QgYmUgZ2l2ZW4gbm9uLVVSTC1lbmNvZGVkLiBIb3dldmVyLCBpbiB0aGlzIHBhcnQgb2YgdGhlIGNvZGUsIGZpbGVVcmwgaXNcclxuXHRcdFx0XHRcdC8vIGFzc3VtZWQgdG8gYmUgVVJMLWVuY29kZWQsIHNvIHdlIFVSTC1lbmNvZGUgdGhlIHJldHJpZXZlZCB2YWx1ZSBoZXJlXHJcblx0XHRcdFx0XHRmaWxlVXJsID0gdGhpcy53aW5kb3dbIDAgXS5lbmNvZGVVUklDb21wb25lbnQoIGZpbGVVcmwgKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vZG9udCB1cGRhdGUgdGhlIGJhc2UgdGFnIGlmIHdlIGFyZSBwcmVmZXRjaGluZ1xyXG5cdFx0XHRcdGlmICggc2V0dGluZ3MucHJlZmV0Y2ggPT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0XHRcdHRoaXMuX2dldEJhc2UoKS5zZXQoIGZpbGVVcmwgKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGNvbnRlbnQgPSB0aGlzLl9wYXJzZSggaHRtbCwgZmlsZVVybCApO1xyXG5cclxuXHRcdFx0XHR0aGlzLl9zZXRMb2FkZWRUaXRsZSggY29udGVudCwgaHRtbCApO1xyXG5cclxuXHRcdFx0XHQvLyBBZGQgdGhlIGNvbnRlbnQgcmVmZXJlbmNlIGFuZCB4aHIgdG8gb3VyIHRyaWdnZXJEYXRhLlxyXG5cdFx0XHRcdHRyaWdnZXJEYXRhLnhociA9IHhocjtcclxuXHRcdFx0XHR0cmlnZ2VyRGF0YS50ZXh0U3RhdHVzID0gdGV4dFN0YXR1cztcclxuXHJcblx0XHRcdFx0Ly8gREVQUkVDQVRFRFxyXG5cdFx0XHRcdHRyaWdnZXJEYXRhLnBhZ2UgPSBjb250ZW50O1xyXG5cclxuXHRcdFx0XHR0cmlnZ2VyRGF0YS5jb250ZW50ID0gY29udGVudDtcclxuXHJcblx0XHRcdFx0dHJpZ2dlckRhdGEudG9QYWdlID0gY29udGVudDtcclxuXHJcblx0XHRcdFx0Ly8gSWYgdGhlIGRlZmF1bHQgYmVoYXZpb3IgaXMgcHJldmVudGVkLCBzdG9wIGhlcmUhXHJcblx0XHRcdFx0Ly8gTm90ZSB0aGF0IGl0IGlzIHRoZSByZXNwb25zaWJpbGl0eSBvZiB0aGUgbGlzdGVuZXIvaGFuZGxlclxyXG5cdFx0XHRcdC8vIHRoYXQgY2FsbGVkIHByZXZlbnREZWZhdWx0KCksIHRvIHJlc29sdmUvcmVqZWN0IHRoZVxyXG5cdFx0XHRcdC8vIGRlZmVycmVkIG9iamVjdCB3aXRoaW4gdGhlIHRyaWdnZXJEYXRhLlxyXG5cdFx0XHRcdGlmICggdGhpcy5fdHJpZ2dlcldpdGhEZXByZWNhdGVkKCBcImxvYWRcIiwgdHJpZ2dlckRhdGEgKS5ldmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSApIHtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vIHJld3JpdGUgc3JjIGFuZCBocmVmIGF0dHJzIHRvIHVzZSBhIGJhc2UgdXJsIGlmIHRoZSBiYXNlIHRhZyB3b24ndCB3b3JrXHJcblx0XHRcdFx0aWYgKCB0aGlzLl9pc1Jld3JpdGFibGVCYXNlVGFnKCkgJiYgY29udGVudCApIHtcclxuXHRcdFx0XHRcdHRoaXMuX2dldEJhc2UoKS5yZXdyaXRlKCBmaWxlVXJsLCBjb250ZW50ICk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHR0aGlzLl9pbmNsdWRlKCBjb250ZW50LCBzZXR0aW5ncyApO1xyXG5cclxuXHRcdFx0XHQvLyBSZW1vdmUgbG9hZGluZyBtZXNzYWdlLlxyXG5cdFx0XHRcdGlmICggc2V0dGluZ3Muc2hvd0xvYWRNc2cgKSB7XHJcblx0XHRcdFx0XHR0aGlzLl9oaWRlTG9hZGluZygpO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZSggYWJzVXJsLCBzZXR0aW5ncywgY29udGVudCApO1xyXG5cdFx0XHR9LCB0aGlzKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X2xvYWREZWZhdWx0czoge1xyXG5cdFx0XHR0eXBlOiBcImdldFwiLFxyXG5cdFx0XHRkYXRhOiB1bmRlZmluZWQsXHJcblxyXG5cdFx0XHQvLyBERVBSRUNBVEVEXHJcblx0XHRcdHJlbG9hZFBhZ2U6IGZhbHNlLFxyXG5cclxuXHRcdFx0cmVsb2FkOiBmYWxzZSxcclxuXHJcblx0XHRcdC8vIEJ5IGRlZmF1bHQgd2UgcmVseSBvbiB0aGUgcm9sZSBkZWZpbmVkIGJ5IHRoZSBAZGF0YS1yb2xlIGF0dHJpYnV0ZS5cclxuXHRcdFx0cm9sZTogdW5kZWZpbmVkLFxyXG5cclxuXHRcdFx0c2hvd0xvYWRNc2c6IGZhbHNlLFxyXG5cclxuXHRcdFx0Ly8gVGhpcyBkZWxheSBhbGxvd3MgbG9hZHMgdGhhdCBwdWxsIGZyb20gYnJvd3NlciBjYWNoZSB0b1xyXG5cdFx0XHQvLyBvY2N1ciB3aXRob3V0IHNob3dpbmcgdGhlIGxvYWRpbmcgbWVzc2FnZS5cclxuXHRcdFx0bG9hZE1zZ0RlbGF5OiA1MFxyXG5cdFx0fSxcclxuXHJcblx0XHRsb2FkOiBmdW5jdGlvbiggdXJsLCBvcHRpb25zICkge1xyXG5cdFx0XHQvLyBUaGlzIGZ1bmN0aW9uIHVzZXMgZGVmZXJyZWQgbm90aWZpY2F0aW9ucyB0byBsZXQgY2FsbGVyc1xyXG5cdFx0XHQvLyBrbm93IHdoZW4gdGhlIGNvbnRlbnQgaXMgZG9uZSBsb2FkaW5nLCBvciBpZiBhbiBlcnJvciBoYXMgb2NjdXJyZWQuXHJcblx0XHRcdHZhciBkZWZlcnJlZCA9ICggb3B0aW9ucyAmJiBvcHRpb25zLmRlZmVycmVkICkgfHwgJC5EZWZlcnJlZCgpLFxyXG5cclxuXHRcdFx0XHQvLyBFeGFtaW5pbmcgdGhlIG9wdGlvbiBcInJlbG9hZFBhZ2VcIiBwYXNzZWQgYnkgdGhlIHVzZXIgaXMgZGVwcmVjYXRlZCBhcyBvZiAxLjQuMFxyXG5cdFx0XHRcdC8vIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gMS41LjAuXHJcblx0XHRcdFx0Ly8gQ29weSBvcHRpb24gXCJyZWxvYWRQYWdlXCIgdG8gXCJyZWxvYWRcIiwgYnV0IG9ubHkgaWYgb3B0aW9uIFwicmVsb2FkXCIgaXMgbm90IHByZXNlbnRcclxuXHRcdFx0XHRyZWxvYWRPcHRpb25FeHRlbnNpb24gPVxyXG5cdFx0XHRcdFx0KCAoIG9wdGlvbnMgJiYgb3B0aW9ucy5yZWxvYWQgPT09IHVuZGVmaW5lZCAmJlxyXG5cdFx0XHRcdFx0XHRvcHRpb25zLnJlbG9hZFBhZ2UgIT09IHVuZGVmaW5lZCApID9cclxuXHRcdFx0XHRcdFx0XHR7IHJlbG9hZDogb3B0aW9ucy5yZWxvYWRQYWdlIH0gOiB7fSApLFxyXG5cclxuXHRcdFx0XHQvLyBUaGUgZGVmYXVsdCBsb2FkIG9wdGlvbnMgd2l0aCBvdmVycmlkZXMgc3BlY2lmaWVkIGJ5IHRoZSBjYWxsZXIuXHJcblx0XHRcdFx0c2V0dGluZ3MgPSAkLmV4dGVuZCgge30sIHRoaXMuX2xvYWREZWZhdWx0cywgb3B0aW9ucywgcmVsb2FkT3B0aW9uRXh0ZW5zaW9uICksXHJcblxyXG5cdFx0XHRcdC8vIFRoZSBET00gZWxlbWVudCBmb3IgdGhlIGNvbnRlbnQgYWZ0ZXIgaXQgaGFzIGJlZW4gbG9hZGVkLlxyXG5cdFx0XHRcdGNvbnRlbnQgPSBudWxsLFxyXG5cclxuXHRcdFx0XHQvLyBUaGUgYWJzb2x1dGUgdmVyc2lvbiBvZiB0aGUgVVJMIHBhc3NlZCBpbnRvIHRoZSBmdW5jdGlvbi4gVGhpc1xyXG5cdFx0XHRcdC8vIHZlcnNpb24gb2YgdGhlIFVSTCBtYXkgY29udGFpbiBkaWFsb2cvc3ViY29udGVudCBwYXJhbXMgaW4gaXQuXHJcblx0XHRcdFx0YWJzVXJsID0gJC5tb2JpbGUucGF0aC5tYWtlVXJsQWJzb2x1dGUoIHVybCwgdGhpcy5fZmluZEJhc2VXaXRoRGVmYXVsdCgpICksXHJcblx0XHRcdFx0ZmlsZVVybCwgZGF0YVVybCwgcGJsRXZlbnQsIHRyaWdnZXJEYXRhO1xyXG5cclxuXHRcdFx0Ly8gSWYgdGhlIGNhbGxlciBwcm92aWRlZCBkYXRhLCBhbmQgd2UncmUgdXNpbmcgXCJnZXRcIiByZXF1ZXN0LFxyXG5cdFx0XHQvLyBhcHBlbmQgdGhlIGRhdGEgdG8gdGhlIFVSTC5cclxuXHRcdFx0aWYgKCBzZXR0aW5ncy5kYXRhICYmIHNldHRpbmdzLnR5cGUgPT09IFwiZ2V0XCIgKSB7XHJcblx0XHRcdFx0YWJzVXJsID0gJC5tb2JpbGUucGF0aC5hZGRTZWFyY2hQYXJhbXMoIGFic1VybCwgc2V0dGluZ3MuZGF0YSApO1xyXG5cdFx0XHRcdHNldHRpbmdzLmRhdGEgPSB1bmRlZmluZWQ7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIElmIHRoZSBjYWxsZXIgaXMgdXNpbmcgYSBcInBvc3RcIiByZXF1ZXN0LCByZWxvYWQgbXVzdCBiZSB0cnVlXHJcblx0XHRcdGlmICggc2V0dGluZ3MuZGF0YSAmJiBzZXR0aW5ncy50eXBlID09PSBcInBvc3RcIiApIHtcclxuXHRcdFx0XHRzZXR0aW5ncy5yZWxvYWQgPSB0cnVlO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBUaGUgYWJzb2x1dGUgdmVyc2lvbiBvZiB0aGUgVVJMIG1pbnVzIGFueSBkaWFsb2cvc3ViY29udGVudCBwYXJhbXMuXHJcblx0XHRcdC8vIEluIG90aGVyd29yZHMgdGhlIHJlYWwgVVJMIG9mIHRoZSBjb250ZW50IHRvIGJlIGxvYWRlZC5cclxuXHRcdFx0ZmlsZVVybCA9IHRoaXMuX2NyZWF0ZUZpbGVVcmwoIGFic1VybCApO1xyXG5cclxuXHRcdFx0Ly8gVGhlIHZlcnNpb24gb2YgdGhlIFVybCBhY3R1YWxseSBzdG9yZWQgaW4gdGhlIGRhdGEtdXJsIGF0dHJpYnV0ZSBvZlxyXG5cdFx0XHQvLyB0aGUgY29udGVudC4gRm9yIGVtYmVkZGVkIGNvbnRlbnQsIGl0IGlzIGp1c3QgdGhlIGlkIG9mIHRoZSBwYWdlLiBGb3JcclxuXHRcdFx0Ly8gY29udGVudCB3aXRoaW4gdGhlIHNhbWUgZG9tYWluIGFzIHRoZSBkb2N1bWVudCBiYXNlLCBpdCBpcyB0aGUgc2l0ZVxyXG5cdFx0XHQvLyByZWxhdGl2ZSBwYXRoLiBGb3IgY3Jvc3MtZG9tYWluIGNvbnRlbnQgKFBob25lIEdhcCBvbmx5KSB0aGUgZW50aXJlXHJcblx0XHRcdC8vIGFic29sdXRlIFVybCBpcyB1c2VkIHRvIGxvYWQgdGhlIGNvbnRlbnQuXHJcblx0XHRcdGRhdGFVcmwgPSB0aGlzLl9jcmVhdGVEYXRhVXJsKCBhYnNVcmwgKTtcclxuXHJcblx0XHRcdGNvbnRlbnQgPSB0aGlzLl9maW5kKCBhYnNVcmwgKTtcclxuXHJcblx0XHRcdC8vIElmIGl0IGlzbid0IGEgcmVmZXJlbmNlIHRvIHRoZSBmaXJzdCBjb250ZW50IGFuZCByZWZlcnMgdG8gbWlzc2luZ1xyXG5cdFx0XHQvLyBlbWJlZGRlZCBjb250ZW50IHJlamVjdCB0aGUgZGVmZXJyZWQgYW5kIHJldHVyblxyXG5cdFx0XHRpZiAoIGNvbnRlbnQubGVuZ3RoID09PSAwICYmXHJcblx0XHRcdFx0JC5tb2JpbGUucGF0aC5pc0VtYmVkZGVkUGFnZShmaWxlVXJsKSAmJlxyXG5cdFx0XHRcdCEkLm1vYmlsZS5wYXRoLmlzRmlyc3RQYWdlVXJsKGZpbGVVcmwpICkge1xyXG5cdFx0XHRcdGRlZmVycmVkLnJlamVjdCggYWJzVXJsLCBzZXR0aW5ncyApO1xyXG5cdFx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlKCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIFJlc2V0IGJhc2UgdG8gdGhlIGRlZmF1bHQgZG9jdW1lbnQgYmFzZVxyXG5cdFx0XHQvLyBUT0RPIGZpZ3VyZSBvdXQgd2h5IHdlIGRvZSB0aGlzXHJcblx0XHRcdHRoaXMuX2dldEJhc2UoKS5yZXNldCgpO1xyXG5cclxuXHRcdFx0Ly8gSWYgdGhlIGNvbnRlbnQgd2UgYXJlIGludGVyZXN0ZWQgaW4gaXMgYWxyZWFkeSBpbiB0aGUgRE9NLFxyXG5cdFx0XHQvLyBhbmQgdGhlIGNhbGxlciBkaWQgbm90IGluZGljYXRlIHRoYXQgd2Ugc2hvdWxkIGZvcmNlIGFcclxuXHRcdFx0Ly8gcmVsb2FkIG9mIHRoZSBmaWxlLCB3ZSBhcmUgZG9uZS4gUmVzb2x2ZSB0aGUgZGVmZXJycmVkIHNvIHRoYXRcclxuXHRcdFx0Ly8gdXNlcnMgY2FuIGJpbmQgdG8gLmRvbmUgb24gdGhlIHByb21pc2VcclxuXHRcdFx0aWYgKCBjb250ZW50Lmxlbmd0aCAmJiAhc2V0dGluZ3MucmVsb2FkICkge1xyXG5cdFx0XHRcdHRoaXMuX2VuaGFuY2UoIGNvbnRlbnQsIHNldHRpbmdzLnJvbGUgKTtcclxuXHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlKCBhYnNVcmwsIHNldHRpbmdzLCBjb250ZW50ICk7XHJcblxyXG5cdFx0XHRcdC8vaWYgd2UgYXJlIHJlbG9hZGluZyB0aGUgY29udGVudCBtYWtlIHN1cmUgd2UgdXBkYXRlXHJcblx0XHRcdFx0Ly8gdGhlIGJhc2UgaWYgaXRzIG5vdCBhIHByZWZldGNoXHJcblx0XHRcdFx0aWYgKCAhc2V0dGluZ3MucHJlZmV0Y2ggKSB7XHJcblx0XHRcdFx0XHR0aGlzLl9nZXRCYXNlKCkuc2V0KHVybCk7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZSgpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR0cmlnZ2VyRGF0YSA9IHtcclxuXHRcdFx0XHR1cmw6IHVybCxcclxuXHRcdFx0XHRhYnNVcmw6IGFic1VybCxcclxuXHRcdFx0XHR0b1BhZ2U6IHVybCxcclxuXHRcdFx0XHRwcmV2UGFnZTogb3B0aW9ucyA/IG9wdGlvbnMuZnJvbVBhZ2UgOiB1bmRlZmluZWQsXHJcblx0XHRcdFx0ZGF0YVVybDogZGF0YVVybCxcclxuXHRcdFx0XHRkZWZlcnJlZDogZGVmZXJyZWQsXHJcblx0XHRcdFx0b3B0aW9uczogc2V0dGluZ3NcclxuXHRcdFx0fTtcclxuXHJcblx0XHRcdC8vIExldCBsaXN0ZW5lcnMga25vdyB3ZSdyZSBhYm91dCB0byBsb2FkIGNvbnRlbnQuXHJcblx0XHRcdHBibEV2ZW50ID0gdGhpcy5fdHJpZ2dlcldpdGhEZXByZWNhdGVkKCBcImJlZm9yZWxvYWRcIiwgdHJpZ2dlckRhdGEgKTtcclxuXHJcblx0XHRcdC8vIElmIHRoZSBkZWZhdWx0IGJlaGF2aW9yIGlzIHByZXZlbnRlZCwgc3RvcCBoZXJlIVxyXG5cdFx0XHRpZiAoIHBibEV2ZW50LmRlcHJlY2F0ZWRFdmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSB8fFxyXG5cdFx0XHRcdHBibEV2ZW50LmV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpICkge1xyXG5cdFx0XHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlKCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICggc2V0dGluZ3Muc2hvd0xvYWRNc2cgKSB7XHJcblx0XHRcdFx0dGhpcy5fc2hvd0xvYWRpbmcoIHNldHRpbmdzLmxvYWRNc2dEZWxheSApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBSZXNldCBiYXNlIHRvIHRoZSBkZWZhdWx0IGRvY3VtZW50IGJhc2UuXHJcblx0XHRcdC8vIG9ubHkgcmVzZXQgaWYgd2UgYXJlIG5vdCBwcmVmZXRjaGluZ1xyXG5cdFx0XHRpZiAoIHNldHRpbmdzLnByZWZldGNoID09PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdFx0dGhpcy5fZ2V0QmFzZSgpLnJlc2V0KCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICggISggJC5tb2JpbGUuYWxsb3dDcm9zc0RvbWFpblBhZ2VzIHx8XHJcblx0XHRcdFx0JC5tb2JpbGUucGF0aC5pc1NhbWVEb21haW4oJC5tb2JpbGUucGF0aC5kb2N1bWVudFVybCwgYWJzVXJsICkgKSApIHtcclxuXHRcdFx0XHRkZWZlcnJlZC5yZWplY3QoIGFic1VybCwgc2V0dGluZ3MgKTtcclxuXHRcdFx0XHRyZXR1cm4gZGVmZXJyZWQucHJvbWlzZSgpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBMb2FkIHRoZSBuZXcgY29udGVudC5cclxuXHRcdFx0JC5hamF4KHtcclxuXHRcdFx0XHR1cmw6IGZpbGVVcmwsXHJcblx0XHRcdFx0dHlwZTogc2V0dGluZ3MudHlwZSxcclxuXHRcdFx0XHRkYXRhOiBzZXR0aW5ncy5kYXRhLFxyXG5cdFx0XHRcdGNvbnRlbnRUeXBlOiBzZXR0aW5ncy5jb250ZW50VHlwZSxcclxuXHRcdFx0XHRkYXRhVHlwZTogXCJodG1sXCIsXHJcblx0XHRcdFx0c3VjY2VzczogdGhpcy5fbG9hZFN1Y2Nlc3MoIGFic1VybCwgdHJpZ2dlckRhdGEsIHNldHRpbmdzLCBkZWZlcnJlZCApLFxyXG5cdFx0XHRcdGVycm9yOiB0aGlzLl9sb2FkRXJyb3IoIGFic1VybCwgdHJpZ2dlckRhdGEsIHNldHRpbmdzLCBkZWZlcnJlZCApXHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2UoKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X2xvYWRFcnJvcjogZnVuY3Rpb24oIGFic1VybCwgdHJpZ2dlckRhdGEsIHNldHRpbmdzLCBkZWZlcnJlZCApIHtcclxuXHRcdFx0cmV0dXJuICQucHJveHkoZnVuY3Rpb24oIHhociwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24gKSB7XHJcblx0XHRcdFx0Ly9zZXQgYmFzZSBiYWNrIHRvIGN1cnJlbnQgcGF0aFxyXG5cdFx0XHRcdHRoaXMuX2dldEJhc2UoKS5zZXQoICQubW9iaWxlLnBhdGguZ2V0KCkgKTtcclxuXHJcblx0XHRcdFx0Ly8gQWRkIGVycm9yIGluZm8gdG8gb3VyIHRyaWdnZXJEYXRhLlxyXG5cdFx0XHRcdHRyaWdnZXJEYXRhLnhociA9IHhocjtcclxuXHRcdFx0XHR0cmlnZ2VyRGF0YS50ZXh0U3RhdHVzID0gdGV4dFN0YXR1cztcclxuXHRcdFx0XHR0cmlnZ2VyRGF0YS5lcnJvclRocm93biA9IGVycm9yVGhyb3duO1xyXG5cclxuXHRcdFx0XHQvLyBMZXQgbGlzdGVuZXJzIGtub3cgdGhlIHBhZ2UgbG9hZCBmYWlsZWQuXHJcblx0XHRcdFx0dmFyIHBsZkV2ZW50ID0gdGhpcy5fdHJpZ2dlcldpdGhEZXByZWNhdGVkKCBcImxvYWRmYWlsZWRcIiwgdHJpZ2dlckRhdGEgKTtcclxuXHJcblx0XHRcdFx0Ly8gSWYgdGhlIGRlZmF1bHQgYmVoYXZpb3IgaXMgcHJldmVudGVkLCBzdG9wIGhlcmUhXHJcblx0XHRcdFx0Ly8gTm90ZSB0aGF0IGl0IGlzIHRoZSByZXNwb25zaWJpbGl0eSBvZiB0aGUgbGlzdGVuZXIvaGFuZGxlclxyXG5cdFx0XHRcdC8vIHRoYXQgY2FsbGVkIHByZXZlbnREZWZhdWx0KCksIHRvIHJlc29sdmUvcmVqZWN0IHRoZVxyXG5cdFx0XHRcdC8vIGRlZmVycmVkIG9iamVjdCB3aXRoaW4gdGhlIHRyaWdnZXJEYXRhLlxyXG5cdFx0XHRcdGlmICggcGxmRXZlbnQuZGVwcmVjYXRlZEV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpIHx8XHJcblx0XHRcdFx0XHRwbGZFdmVudC5ldmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSApIHtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vIFJlbW92ZSBsb2FkaW5nIG1lc3NhZ2UuXHJcblx0XHRcdFx0aWYgKCBzZXR0aW5ncy5zaG93TG9hZE1zZyApIHtcclxuXHRcdFx0XHRcdHRoaXMuX3Nob3dFcnJvcigpO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0KCBhYnNVcmwsIHNldHRpbmdzICk7XHJcblx0XHRcdH0sIHRoaXMpO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfZ2V0VHJhbnNpdGlvbkhhbmRsZXI6IGZ1bmN0aW9uKCB0cmFuc2l0aW9uICkge1xyXG5cdFx0XHR0cmFuc2l0aW9uID0gJC5tb2JpbGUuX21heWJlRGVncmFkZVRyYW5zaXRpb24oIHRyYW5zaXRpb24gKTtcclxuXHJcblx0XHRcdC8vZmluZCB0aGUgdHJhbnNpdGlvbiBoYW5kbGVyIGZvciB0aGUgc3BlY2lmaWVkIHRyYW5zaXRpb24uIElmIHRoZXJlXHJcblx0XHRcdC8vaXNuJ3Qgb25lIGluIG91ciB0cmFuc2l0aW9uSGFuZGxlcnMgZGljdGlvbmFyeSwgdXNlIHRoZSBkZWZhdWx0IG9uZS5cclxuXHRcdFx0Ly9jYWxsIHRoZSBoYW5kbGVyIGltbWVkaWF0ZWx5IHRvIGtpY2stb2ZmIHRoZSB0cmFuc2l0aW9uLlxyXG5cdFx0XHRyZXR1cm4gJC5tb2JpbGUudHJhbnNpdGlvbkhhbmRsZXJzWyB0cmFuc2l0aW9uIF0gfHwgJC5tb2JpbGUuZGVmYXVsdFRyYW5zaXRpb25IYW5kbGVyO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvLyBUT0RPIG1vdmUgaW50byB0cmFuc2l0aW9uIGhhbmRsZXJzP1xyXG5cdFx0X3RyaWdnZXJDc3NUcmFuc2l0aW9uRXZlbnRzOiBmdW5jdGlvbiggdG8sIGZyb20sIHByZWZpeCApIHtcclxuXHRcdFx0dmFyIHNhbWVQYWdlID0gZmFsc2U7XHJcblxyXG5cdFx0XHRwcmVmaXggPSBwcmVmaXggfHwgXCJcIjtcclxuXHJcblx0XHRcdC8vIFRPRE8gZGVjaWRlIGlmIHRoZXNlIGV2ZW50cyBzaG91bGQgaW4gZmFjdCBiZSB0cmlnZ2VyZWQgb24gdGhlIGNvbnRhaW5lclxyXG5cdFx0XHRpZiAoIGZyb20gKSB7XHJcblxyXG5cdFx0XHRcdC8vQ2hlY2sgaWYgdGhpcyBpcyBhIHNhbWUgcGFnZSB0cmFuc2l0aW9uIGFuZCB0ZWxsIHRoZSBoYW5kbGVyIGluIHBhZ2VcclxuXHRcdFx0XHRpZiggdG9bMF0gPT09IGZyb21bMF0gKXtcclxuXHRcdFx0XHRcdHNhbWVQYWdlID0gdHJ1ZTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vdHJpZ2dlciBiZWZvcmUgc2hvdy9oaWRlIGV2ZW50c1xyXG5cdFx0XHRcdC8vIFRPRE8gZGVwcmVjYXRlIG5leHRQYWdlIGluIGZhdm9yIG9mIG5leHRcclxuXHRcdFx0XHR0aGlzLl90cmlnZ2VyV2l0aERlcHJlY2F0ZWQoIHByZWZpeCArIFwiaGlkZVwiLCB7XHJcblxyXG5cdFx0XHRcdFx0Ly8gRGVwcmVjYXRlZCBpbiAxLjQgcmVtb3ZlIGluIDEuNVxyXG5cdFx0XHRcdFx0bmV4dFBhZ2U6IHRvLFxyXG5cdFx0XHRcdFx0dG9QYWdlOiB0byxcclxuXHRcdFx0XHRcdHByZXZQYWdlOiBmcm9tLFxyXG5cdFx0XHRcdFx0c2FtZVBhZ2U6IHNhbWVQYWdlXHJcblx0XHRcdFx0fSwgZnJvbSApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBUT0RPIGRlcHJlY2F0ZSBwcmV2UGFnZSBpbiBmYXZvciBvZiBwcmV2aW91c1xyXG5cdFx0XHR0aGlzLl90cmlnZ2VyV2l0aERlcHJlY2F0ZWQoIHByZWZpeCArIFwic2hvd1wiLCB7XHJcblx0XHRcdFx0cHJldlBhZ2U6IGZyb20gfHwgJCggXCJcIiApLFxyXG5cdFx0XHRcdHRvUGFnZTogdG9cclxuXHRcdFx0fSwgdG8gKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gVE9ETyBtYWtlIHByaXZhdGUgb25jZSBjaGFuZ2UgaGFzIGJlZW4gZGVmaW5lZCBpbiB0aGUgd2lkZ2V0XHJcblx0XHRfY3NzVHJhbnNpdGlvbjogZnVuY3Rpb24oIHRvLCBmcm9tLCBvcHRpb25zICkge1xyXG5cdFx0XHR2YXIgdHJhbnNpdGlvbiA9IG9wdGlvbnMudHJhbnNpdGlvbixcclxuXHRcdFx0XHRyZXZlcnNlID0gb3B0aW9ucy5yZXZlcnNlLFxyXG5cdFx0XHRcdGRlZmVycmVkID0gb3B0aW9ucy5kZWZlcnJlZCxcclxuXHRcdFx0XHRUcmFuc2l0aW9uSGFuZGxlcixcclxuXHRcdFx0XHRwcm9taXNlO1xyXG5cclxuXHRcdFx0dGhpcy5fdHJpZ2dlckNzc1RyYW5zaXRpb25FdmVudHMoIHRvLCBmcm9tLCBcImJlZm9yZVwiICk7XHJcblxyXG5cdFx0XHQvLyBUT0RPIHB1dCB0aGlzIGluIGEgYmluZGluZyB0byBldmVudHMgKm91dHNpZGUqIHRoZSB3aWRnZXRcclxuXHRcdFx0dGhpcy5faGlkZUxvYWRpbmcoKTtcclxuXHJcblx0XHRcdFRyYW5zaXRpb25IYW5kbGVyID0gdGhpcy5fZ2V0VHJhbnNpdGlvbkhhbmRsZXIoIHRyYW5zaXRpb24gKTtcclxuXHJcblx0XHRcdHByb21pc2UgPSAoIG5ldyBUcmFuc2l0aW9uSGFuZGxlciggdHJhbnNpdGlvbiwgcmV2ZXJzZSwgdG8sIGZyb20gKSApLnRyYW5zaXRpb24oKTtcclxuXHJcblx0XHRcdHByb21pc2UuZG9uZSggJC5wcm94eSggZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0dGhpcy5fdHJpZ2dlckNzc1RyYW5zaXRpb25FdmVudHMoIHRvLCBmcm9tICk7XHJcblx0XHRcdH0sIHRoaXMgKSk7XHJcblxyXG5cdFx0XHQvLyBUT0RPIHRlbXBvcmFyeSBhY2NvbW9kYXRpb24gb2YgYXJndW1lbnQgZGVmZXJyZWRcclxuXHRcdFx0cHJvbWlzZS5kb25lKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdGRlZmVycmVkLnJlc29sdmUuYXBwbHkoIGRlZmVycmVkLCBhcmd1bWVudHMgKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9yZWxlYXNlVHJhbnNpdGlvbkxvY2s6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHQvL3JlbGVhc2UgdHJhbnNpdGlvbiBsb2NrIHNvIG5hdmlnYXRpb24gaXMgZnJlZSBhZ2FpblxyXG5cdFx0XHRpc1BhZ2VUcmFuc2l0aW9uaW5nID0gZmFsc2U7XHJcblx0XHRcdGlmICggcGFnZVRyYW5zaXRpb25RdWV1ZS5sZW5ndGggPiAwICkge1xyXG5cdFx0XHRcdCQubW9iaWxlLmNoYW5nZVBhZ2UuYXBwbHkoIG51bGwsIHBhZ2VUcmFuc2l0aW9uUXVldWUucG9wKCkgKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHJcblx0XHRfcmVtb3ZlQWN0aXZlTGlua0NsYXNzOiBmdW5jdGlvbiggZm9yY2UgKSB7XHJcblx0XHRcdC8vY2xlYXIgb3V0IHRoZSBhY3RpdmUgYnV0dG9uIHN0YXRlXHJcblx0XHRcdCQubW9iaWxlLnJlbW92ZUFjdGl2ZUxpbmtDbGFzcyggZm9yY2UgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X2xvYWRVcmw6IGZ1bmN0aW9uKCB0bywgdHJpZ2dlckRhdGEsIHNldHRpbmdzICkge1xyXG5cdFx0XHQvLyBwcmVzZXJ2ZSB0aGUgb3JpZ2luYWwgdGFyZ2V0IGFzIHRoZSBkYXRhVXJsIHZhbHVlIHdpbGwgYmVcclxuXHRcdFx0Ly8gc2ltcGxpZmllZCBlZywgcmVtb3ZpbmcgdWktc3RhdGUsIGFuZCByZW1vdmluZyBxdWVyeSBwYXJhbXNcclxuXHRcdFx0Ly8gZnJvbSB0aGUgaGFzaCB0aGlzIGlzIHNvIHRoYXQgdXNlcnMgd2hvIHdhbnQgdG8gdXNlIHF1ZXJ5XHJcblx0XHRcdC8vIHBhcmFtcyBoYXZlIGFjY2VzcyB0byB0aGVtIGluIHRoZSBldmVudCBiaW5kaW5ncyBmb3IgdGhlIHBhZ2VcclxuXHRcdFx0Ly8gbGlmZSBjeWNsZSBTZWUgaXNzdWUgIzUwODVcclxuXHRcdFx0c2V0dGluZ3MudGFyZ2V0ID0gdG87XHJcblx0XHRcdHNldHRpbmdzLmRlZmVycmVkID0gJC5EZWZlcnJlZCgpO1xyXG5cclxuXHRcdFx0dGhpcy5sb2FkKCB0bywgc2V0dGluZ3MgKTtcclxuXHJcblx0XHRcdHNldHRpbmdzLmRlZmVycmVkLmRvbmUoJC5wcm94eShmdW5jdGlvbiggdXJsLCBvcHRpb25zLCBjb250ZW50ICkge1xyXG5cdFx0XHRcdGlzUGFnZVRyYW5zaXRpb25pbmcgPSBmYWxzZTtcclxuXHJcblx0XHRcdFx0Ly8gc3RvcmUgdGhlIG9yaWdpbmFsIGFic29sdXRlIHVybCBzbyB0aGF0IGl0IGNhbiBiZSBwcm92aWRlZFxyXG5cdFx0XHRcdC8vIHRvIGV2ZW50cyBpbiB0aGUgdHJpZ2dlckRhdGEgb2YgdGhlIHN1YnNlcXVlbnQgY2hhbmdlUGFnZSBjYWxsXHJcblx0XHRcdFx0b3B0aW9ucy5hYnNVcmwgPSB0cmlnZ2VyRGF0YS5hYnNVcmw7XHJcblxyXG5cdFx0XHRcdHRoaXMudHJhbnNpdGlvbiggY29udGVudCwgdHJpZ2dlckRhdGEsIG9wdGlvbnMgKTtcclxuXHRcdFx0fSwgdGhpcykpO1xyXG5cclxuXHRcdFx0c2V0dGluZ3MuZGVmZXJyZWQuZmFpbCgkLnByb3h5KGZ1bmN0aW9uKC8qIHVybCwgb3B0aW9ucyAqLykge1xyXG5cdFx0XHRcdHRoaXMuX3JlbW92ZUFjdGl2ZUxpbmtDbGFzcyggdHJ1ZSApO1xyXG5cdFx0XHRcdHRoaXMuX3JlbGVhc2VUcmFuc2l0aW9uTG9jaygpO1xyXG5cdFx0XHRcdHRoaXMuX3RyaWdnZXJXaXRoRGVwcmVjYXRlZCggXCJjaGFuZ2VmYWlsZWRcIiwgdHJpZ2dlckRhdGEgKTtcclxuXHRcdFx0fSwgdGhpcykpO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfdHJpZ2dlclBhZ2VCZWZvcmVDaGFuZ2U6IGZ1bmN0aW9uKCB0bywgdHJpZ2dlckRhdGEsIHNldHRpbmdzICkge1xyXG5cdFx0XHR2YXIgcmV0dXJuRXZlbnRzO1xyXG5cclxuXHRcdFx0dHJpZ2dlckRhdGEucHJldlBhZ2UgPSB0aGlzLmFjdGl2ZVBhZ2U7XHJcblx0XHRcdCQuZXh0ZW5kKCB0cmlnZ2VyRGF0YSwge1xyXG5cdFx0XHRcdHRvUGFnZTogdG8sXHJcblx0XHRcdFx0b3B0aW9uczogc2V0dGluZ3NcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHQvLyBOT1RFOiBwcmVzZXJ2ZSB0aGUgb3JpZ2luYWwgdGFyZ2V0IGFzIHRoZSBkYXRhVXJsIHZhbHVlIHdpbGwgYmVcclxuXHRcdFx0Ly8gc2ltcGxpZmllZCBlZywgcmVtb3ZpbmcgdWktc3RhdGUsIGFuZCByZW1vdmluZyBxdWVyeSBwYXJhbXMgZnJvbVxyXG5cdFx0XHQvLyB0aGUgaGFzaCB0aGlzIGlzIHNvIHRoYXQgdXNlcnMgd2hvIHdhbnQgdG8gdXNlIHF1ZXJ5IHBhcmFtcyBoYXZlXHJcblx0XHRcdC8vIGFjY2VzcyB0byB0aGVtIGluIHRoZSBldmVudCBiaW5kaW5ncyBmb3IgdGhlIHBhZ2UgbGlmZSBjeWNsZVxyXG5cdFx0XHQvLyBTZWUgaXNzdWUgIzUwODVcclxuXHRcdFx0aWYgKCAkLnR5cGUodG8pID09PSBcInN0cmluZ1wiICkge1xyXG5cdFx0XHRcdC8vIGlmIHRoZSB0b1BhZ2UgaXMgYSBzdHJpbmcgc2ltcGx5IGNvbnZlcnQgaXRcclxuXHRcdFx0XHR0cmlnZ2VyRGF0YS5hYnNVcmwgPSAkLm1vYmlsZS5wYXRoLm1ha2VVcmxBYnNvbHV0ZSggdG8sIHRoaXMuX2ZpbmRCYXNlV2l0aERlZmF1bHQoKSApO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdC8vIGlmIHRoZSB0b1BhZ2UgaXMgYSBqUXVlcnkgb2JqZWN0IGdyYWIgdGhlIGFic29sdXRlIHVybCBzdG9yZWRcclxuXHRcdFx0XHQvLyBpbiB0aGUgbG9hZFBhZ2UgY2FsbGJhY2sgd2hlcmUgaXQgZXhpc3RzXHJcblx0XHRcdFx0dHJpZ2dlckRhdGEuYWJzVXJsID0gc2V0dGluZ3MuYWJzVXJsO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBMZXQgbGlzdGVuZXJzIGtub3cgd2UncmUgYWJvdXQgdG8gY2hhbmdlIHRoZSBjdXJyZW50IHBhZ2UuXHJcblx0XHRcdHJldHVybkV2ZW50cyA9IHRoaXMuX3RyaWdnZXJXaXRoRGVwcmVjYXRlZCggXCJiZWZvcmVjaGFuZ2VcIiwgdHJpZ2dlckRhdGEgKTtcclxuXHJcblx0XHRcdC8vIElmIHRoZSBkZWZhdWx0IGJlaGF2aW9yIGlzIHByZXZlbnRlZCwgc3RvcCBoZXJlIVxyXG5cdFx0XHRpZiAoIHJldHVybkV2ZW50cy5ldmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSB8fFxyXG5cdFx0XHRcdHJldHVybkV2ZW50cy5kZXByZWNhdGVkRXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkgKSB7XHJcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Y2hhbmdlOiBmdW5jdGlvbiggdG8sIG9wdGlvbnMgKSB7XHJcblx0XHRcdC8vIElmIHdlIGFyZSBpbiB0aGUgbWlkc3Qgb2YgYSB0cmFuc2l0aW9uLCBxdWV1ZSB0aGUgY3VycmVudCByZXF1ZXN0LlxyXG5cdFx0XHQvLyBXZSdsbCBjYWxsIGNoYW5nZVBhZ2UoKSBvbmNlIHdlJ3JlIGRvbmUgd2l0aCB0aGUgY3VycmVudCB0cmFuc2l0aW9uXHJcblx0XHRcdC8vIHRvIHNlcnZpY2UgdGhlIHJlcXVlc3QuXHJcblx0XHRcdGlmICggaXNQYWdlVHJhbnNpdGlvbmluZyApIHtcclxuXHRcdFx0XHRwYWdlVHJhbnNpdGlvblF1ZXVlLnVuc2hpZnQoIGFyZ3VtZW50cyApO1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dmFyIHNldHRpbmdzID0gJC5leHRlbmQoIHt9LCAkLm1vYmlsZS5jaGFuZ2VQYWdlLmRlZmF1bHRzLCBvcHRpb25zICksXHJcblx0XHRcdFx0dHJpZ2dlckRhdGEgPSB7fTtcclxuXHJcblx0XHRcdC8vIE1ha2Ugc3VyZSB3ZSBoYXZlIGEgZnJvbVBhZ2UuXHJcblx0XHRcdHNldHRpbmdzLmZyb21QYWdlID0gc2V0dGluZ3MuZnJvbVBhZ2UgfHwgdGhpcy5hY3RpdmVQYWdlO1xyXG5cclxuXHRcdFx0Ly8gaWYgdGhlIHBhZ2UgYmVmb3JlY2hhbmdlIGRlZmF1bHQgaXMgcHJldmVudGVkIHJldHVybiBlYXJseVxyXG5cdFx0XHRpZiAoICF0aGlzLl90cmlnZ2VyUGFnZUJlZm9yZUNoYW5nZSh0bywgdHJpZ2dlckRhdGEsIHNldHRpbmdzKSApIHtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIFdlIGFsbG93IFwicGFnZWJlZm9yZWNoYW5nZVwiIG9ic2VydmVycyB0byBtb2RpZnkgdGhlIHRvIGluXHJcblx0XHRcdC8vIHRoZSB0cmlnZ2VyIGRhdGEgdG8gYWxsb3cgZm9yIHJlZGlyZWN0cy4gTWFrZSBzdXJlIG91ciB0byBpc1xyXG5cdFx0XHQvLyB1cGRhdGVkLiBXZSBhbHNvIG5lZWQgdG8gcmUtZXZhbHVhdGUgd2hldGhlciBpdCBpcyBhIHN0cmluZyxcclxuXHRcdFx0Ly8gYmVjYXVzZSBhbiBvYmplY3QgY2FuIGFsc28gYmUgcmVwbGFjZWQgYnkgYSBzdHJpbmdcclxuXHRcdFx0dG8gPSB0cmlnZ2VyRGF0YS50b1BhZ2U7XHJcblxyXG5cdFx0XHQvLyBJZiB0aGUgY2FsbGVyIHBhc3NlZCB1cyBhIHVybCwgY2FsbCBsb2FkUGFnZSgpXHJcblx0XHRcdC8vIHRvIG1ha2Ugc3VyZSBpdCBpcyBsb2FkZWQgaW50byB0aGUgRE9NLiBXZSdsbCBsaXN0ZW5cclxuXHRcdFx0Ly8gdG8gdGhlIHByb21pc2Ugb2JqZWN0IGl0IHJldHVybnMgc28gd2Uga25vdyB3aGVuXHJcblx0XHRcdC8vIGl0IGlzIGRvbmUgbG9hZGluZyBvciBpZiBhbiBlcnJvciBvY3VycmVkLlxyXG5cdFx0XHRpZiAoICQudHlwZSh0bykgPT09IFwic3RyaW5nXCIgKSB7XHJcblx0XHRcdFx0Ly8gU2V0IHRoZSBpc1BhZ2VUcmFuc2l0aW9uaW5nIGZsYWcgdG8gcHJldmVudCBhbnkgcmVxdWVzdHMgZnJvbVxyXG5cdFx0XHRcdC8vIGVudGVyaW5nIHRoaXMgbWV0aG9kIHdoaWxlIHdlIGFyZSBpbiB0aGUgbWlkc3Qgb2YgbG9hZGluZyBhIHBhZ2VcclxuXHRcdFx0XHQvLyBvciB0cmFuc2l0aW9uaW5nLlxyXG5cdFx0XHRcdGlzUGFnZVRyYW5zaXRpb25pbmcgPSB0cnVlO1xyXG5cclxuXHRcdFx0XHR0aGlzLl9sb2FkVXJsKCB0bywgdHJpZ2dlckRhdGEsIHNldHRpbmdzICk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0dGhpcy50cmFuc2l0aW9uKCB0bywgdHJpZ2dlckRhdGEsIHNldHRpbmdzICk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblxyXG5cdFx0dHJhbnNpdGlvbjogZnVuY3Rpb24oIHRvUGFnZSwgdHJpZ2dlckRhdGEsIHNldHRpbmdzICkge1xyXG5cdFx0XHR2YXIgZnJvbVBhZ2UsIHVybCwgcGFnZVVybCwgZmlsZVVybCxcclxuXHRcdFx0XHRhY3RpdmUsIGFjdGl2ZUlzSW5pdGlhbFBhZ2UsXHJcblx0XHRcdFx0aGlzdG9yeURpciwgcGFnZVRpdGxlLCBpc0RpYWxvZyxcclxuXHRcdFx0XHRhbHJlYWR5VGhlcmUsIG5ld1BhZ2VUaXRsZSxcclxuXHRcdFx0XHRwYXJhbXMsXHRjc3NUcmFuc2l0aW9uRGVmZXJyZWQsXHJcblx0XHRcdFx0YmVmb3JlVHJhbnNpdGlvbjtcclxuXHJcblx0XHRcdC8vIElmIHdlIGFyZSBpbiB0aGUgbWlkc3Qgb2YgYSB0cmFuc2l0aW9uLCBxdWV1ZSB0aGUgY3VycmVudCByZXF1ZXN0LlxyXG5cdFx0XHQvLyBXZSdsbCBjYWxsIGNoYW5nZVBhZ2UoKSBvbmNlIHdlJ3JlIGRvbmUgd2l0aCB0aGUgY3VycmVudCB0cmFuc2l0aW9uXHJcblx0XHRcdC8vIHRvIHNlcnZpY2UgdGhlIHJlcXVlc3QuXHJcblx0XHRcdGlmICggaXNQYWdlVHJhbnNpdGlvbmluZyApIHtcclxuXHRcdFx0XHQvLyBtYWtlIHN1cmUgdG8gb25seSBxdWV1ZSB0aGUgdG8gYW5kIHNldHRpbmdzIHZhbHVlcyBzbyB0aGUgYXJndW1lbnRzXHJcblx0XHRcdFx0Ly8gd29yayB3aXRoIGEgY2FsbCB0byB0aGUgY2hhbmdlIG1ldGhvZFxyXG5cdFx0XHRcdHBhZ2VUcmFuc2l0aW9uUXVldWUudW5zaGlmdCggW3RvUGFnZSwgc2V0dGluZ3NdICk7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBERVBSRUNBVEVEIC0gdGhpcyBjYWxsIG9ubHksIGluIGZhdm9yIG9mIHRoZSBiZWZvcmUgdHJhbnNpdGlvblxyXG5cdFx0XHQvLyBpZiB0aGUgcGFnZSBiZWZvcmVjaGFuZ2UgZGVmYXVsdCBpcyBwcmV2ZW50ZWQgcmV0dXJuIGVhcmx5XHJcblx0XHRcdGlmICggIXRoaXMuX3RyaWdnZXJQYWdlQmVmb3JlQ2hhbmdlKHRvUGFnZSwgdHJpZ2dlckRhdGEsIHNldHRpbmdzKSApIHtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHRyaWdnZXJEYXRhLnByZXZQYWdlID0gc2V0dGluZ3MuZnJvbVBhZ2U7XHJcblx0XHRcdC8vIGlmIHRoZSAoY29udGVudHxwYWdlKWJlZm9yZXRyYW5zaXRpb24gZGVmYXVsdCBpcyBwcmV2ZW50ZWQgcmV0dXJuIGVhcmx5XHJcblx0XHRcdC8vIE5vdGUsIHdlIGhhdmUgdG8gY2hlY2sgZm9yIGJvdGggdGhlIGRlcHJlY2F0ZWQgYW5kIG5ldyBldmVudHNcclxuXHRcdFx0YmVmb3JlVHJhbnNpdGlvbiA9IHRoaXMuX3RyaWdnZXJXaXRoRGVwcmVjYXRlZCggXCJiZWZvcmV0cmFuc2l0aW9uXCIsIHRyaWdnZXJEYXRhICk7XHJcblx0XHRcdGlmIChiZWZvcmVUcmFuc2l0aW9uLmRlcHJlY2F0ZWRFdmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSB8fFxyXG5cdFx0XHRcdGJlZm9yZVRyYW5zaXRpb24uZXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkgKSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBTZXQgdGhlIGlzUGFnZVRyYW5zaXRpb25pbmcgZmxhZyB0byBwcmV2ZW50IGFueSByZXF1ZXN0cyBmcm9tXHJcblx0XHRcdC8vIGVudGVyaW5nIHRoaXMgbWV0aG9kIHdoaWxlIHdlIGFyZSBpbiB0aGUgbWlkc3Qgb2YgbG9hZGluZyBhIHBhZ2VcclxuXHRcdFx0Ly8gb3IgdHJhbnNpdGlvbmluZy5cclxuXHRcdFx0aXNQYWdlVHJhbnNpdGlvbmluZyA9IHRydWU7XHJcblxyXG5cdFx0XHQvLyBJZiB3ZSBhcmUgZ29pbmcgdG8gdGhlIGZpcnN0LXBhZ2Ugb2YgdGhlIGFwcGxpY2F0aW9uLCB3ZSBuZWVkIHRvIG1ha2VcclxuXHRcdFx0Ly8gc3VyZSBzZXR0aW5ncy5kYXRhVXJsIGlzIHNldCB0byB0aGUgYXBwbGljYXRpb24gZG9jdW1lbnQgdXJsLiBUaGlzIGFsbG93c1xyXG5cdFx0XHQvLyB1cyB0byBhdm9pZCBnZW5lcmF0aW5nIGEgZG9jdW1lbnQgdXJsIHdpdGggYW4gaWQgaGFzaCBpbiB0aGUgY2FzZSB3aGVyZSB0aGVcclxuXHRcdFx0Ly8gZmlyc3QtcGFnZSBvZiB0aGUgZG9jdW1lbnQgaGFzIGFuIGlkIGF0dHJpYnV0ZSBzcGVjaWZpZWQuXHJcblx0XHRcdGlmICggdG9QYWdlWyAwIF0gPT09ICQubW9iaWxlLmZpcnN0UGFnZVsgMCBdICYmICFzZXR0aW5ncy5kYXRhVXJsICkge1xyXG5cdFx0XHRcdHNldHRpbmdzLmRhdGFVcmwgPSAkLm1vYmlsZS5wYXRoLmRvY3VtZW50VXJsLmhyZWZOb0hhc2g7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIFRoZSBjYWxsZXIgcGFzc2VkIHVzIGEgcmVhbCBwYWdlIERPTSBlbGVtZW50LiBVcGRhdGUgb3VyXHJcblx0XHRcdC8vIGludGVybmFsIHN0YXRlIGFuZCB0aGVuIHRyaWdnZXIgYSB0cmFuc2l0aW9uIHRvIHRoZSBwYWdlLlxyXG5cdFx0XHRmcm9tUGFnZSA9IHNldHRpbmdzLmZyb21QYWdlO1xyXG5cdFx0XHR1cmwgPSAoIHNldHRpbmdzLmRhdGFVcmwgJiYgJC5tb2JpbGUucGF0aC5jb252ZXJ0VXJsVG9EYXRhVXJsKHNldHRpbmdzLmRhdGFVcmwpICkgfHxcclxuXHRcdFx0XHR0b1BhZ2UuanFtRGF0YSggXCJ1cmxcIiApO1xyXG5cclxuXHRcdFx0Ly8gVGhlIHBhZ2VVcmwgdmFyIGlzIHVzdWFsbHkgdGhlIHNhbWUgYXMgdXJsLCBleGNlcHQgd2hlbiB1cmwgaXMgb2JzY3VyZWRcclxuXHRcdFx0Ly8gYXMgYSBkaWFsb2cgdXJsLiBwYWdlVXJsIGFsd2F5cyBjb250YWlucyB0aGUgZmlsZSBwYXRoXHJcblx0XHRcdHBhZ2VVcmwgPSB1cmw7XHJcblx0XHRcdGZpbGVVcmwgPSAkLm1vYmlsZS5wYXRoLmdldEZpbGVQYXRoKCB1cmwgKTtcclxuXHRcdFx0YWN0aXZlID0gJC5tb2JpbGUubmF2aWdhdGUuaGlzdG9yeS5nZXRBY3RpdmUoKTtcclxuXHRcdFx0YWN0aXZlSXNJbml0aWFsUGFnZSA9ICQubW9iaWxlLm5hdmlnYXRlLmhpc3RvcnkuYWN0aXZlSW5kZXggPT09IDA7XHJcblx0XHRcdGhpc3RvcnlEaXIgPSAwO1xyXG5cdFx0XHRwYWdlVGl0bGUgPSBkb2N1bWVudC50aXRsZTtcclxuXHRcdFx0aXNEaWFsb2cgPSAoIHNldHRpbmdzLnJvbGUgPT09IFwiZGlhbG9nXCIgfHxcclxuXHRcdFx0XHR0b1BhZ2UuanFtRGF0YSggXCJyb2xlXCIgKSA9PT0gXCJkaWFsb2dcIiApICYmXHJcblx0XHRcdFx0dG9QYWdlLmpxbURhdGEoIFwiZGlhbG9nXCIgKSAhPT0gdHJ1ZTtcclxuXHJcblx0XHRcdC8vIEJ5IGRlZmF1bHQsIHdlIHByZXZlbnQgY2hhbmdlUGFnZSByZXF1ZXN0cyB3aGVuIHRoZSBmcm9tUGFnZSBhbmQgdG9QYWdlXHJcblx0XHRcdC8vIGFyZSB0aGUgc2FtZSBlbGVtZW50LCBidXQgZm9sa3MgdGhhdCBnZW5lcmF0ZSBjb250ZW50XHJcblx0XHRcdC8vIG1hbnVhbGx5L2R5bmFtaWNhbGx5IGFuZCByZXVzZSBwYWdlcyB3YW50IHRvIGJlIGFibGUgdG8gdHJhbnNpdGlvbiB0b1xyXG5cdFx0XHQvLyB0aGUgc2FtZSBwYWdlLiBUbyBhbGxvdyB0aGlzLCB0aGV5IHdpbGwgbmVlZCB0byBjaGFuZ2UgdGhlIGRlZmF1bHRcclxuXHRcdFx0Ly8gdmFsdWUgb2YgYWxsb3dTYW1lUGFnZVRyYW5zaXRpb24gdG8gdHJ1ZSwgKk9SKiwgcGFzcyBpdCBpbiBhcyBhblxyXG5cdFx0XHQvLyBvcHRpb24gd2hlbiB0aGV5IG1hbnVhbGx5IGNhbGwgY2hhbmdlUGFnZSgpLiBJdCBzaG91bGQgYmUgbm90ZWQgdGhhdFxyXG5cdFx0XHQvLyBvdXIgZGVmYXVsdCB0cmFuc2l0aW9uIGFuaW1hdGlvbnMgYXNzdW1lIHRoYXQgdGhlIGZvcm1QYWdlIGFuZCB0b1BhZ2VcclxuXHRcdFx0Ly8gYXJlIGRpZmZlcmVudCBlbGVtZW50cywgc28gdGhleSBtYXkgYmVoYXZlIHVuZXhwZWN0ZWRseS4gSXQgaXMgdXAgdG9cclxuXHRcdFx0Ly8gdGhlIGRldmVsb3BlciB0aGF0IHR1cm5zIG9uIHRoZSBhbGxvd1NhbWVQYWdlVHJhbnNpdGlvbmEgb3B0aW9uIHRvXHJcblx0XHRcdC8vIGVpdGhlciB0dXJuIG9mZiB0cmFuc2l0aW9uIGFuaW1hdGlvbnMsIG9yIG1ha2Ugc3VyZSB0aGF0IGFuIGFwcHJvcHJpYXRlXHJcblx0XHRcdC8vIGFuaW1hdGlvbiB0cmFuc2l0aW9uIGlzIHVzZWQuXHJcblx0XHRcdGlmICggZnJvbVBhZ2UgJiYgZnJvbVBhZ2VbMF0gPT09IHRvUGFnZVswXSAmJlxyXG5cdFx0XHRcdCFzZXR0aW5ncy5hbGxvd1NhbWVQYWdlVHJhbnNpdGlvbiApIHtcclxuXHJcblx0XHRcdFx0aXNQYWdlVHJhbnNpdGlvbmluZyA9IGZhbHNlO1xyXG5cdFx0XHRcdHRoaXMuX3RyaWdnZXJXaXRoRGVwcmVjYXRlZCggXCJ0cmFuc2l0aW9uXCIsIHRyaWdnZXJEYXRhICk7XHJcblx0XHRcdFx0dGhpcy5fdHJpZ2dlcldpdGhEZXByZWNhdGVkKCBcImNoYW5nZVwiLCB0cmlnZ2VyRGF0YSApO1xyXG5cclxuXHRcdFx0XHQvLyBFdmVuIGlmIHRoZXJlIGlzIG5vIHBhZ2UgY2hhbmdlIHRvIGJlIGRvbmUsIHdlIHNob3VsZCBrZWVwIHRoZVxyXG5cdFx0XHRcdC8vIHVybEhpc3RvcnkgaW4gc3luYyB3aXRoIHRoZSBoYXNoIGNoYW5nZXNcclxuXHRcdFx0XHRpZiAoIHNldHRpbmdzLmZyb21IYXNoQ2hhbmdlICkge1xyXG5cdFx0XHRcdFx0JC5tb2JpbGUubmF2aWdhdGUuaGlzdG9yeS5kaXJlY3QoeyB1cmw6IHVybCB9KTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gV2UgbmVlZCB0byBtYWtlIHN1cmUgdGhlIHBhZ2Ugd2UgYXJlIGdpdmVuIGhhcyBhbHJlYWR5IGJlZW4gZW5oYW5jZWQuXHJcblx0XHRcdHRvUGFnZS5wYWdlKHsgcm9sZTogc2V0dGluZ3Mucm9sZSB9KTtcclxuXHJcblx0XHRcdC8vIElmIHRoZSBjaGFuZ2VQYWdlIHJlcXVlc3Qgd2FzIHNlbnQgZnJvbSBhIGhhc2hDaGFuZ2UgZXZlbnQsIGNoZWNrIHRvXHJcblx0XHRcdC8vIHNlZSBpZiB0aGUgcGFnZSBpcyBhbHJlYWR5IHdpdGhpbiB0aGUgdXJsSGlzdG9yeSBzdGFjay4gSWYgc28sIHdlJ2xsXHJcblx0XHRcdC8vIGFzc3VtZSB0aGUgdXNlciBoaXQgdGhlIGZvcndhcmQvYmFjayBidXR0b24gYW5kIHdpbGwgdHJ5IHRvIG1hdGNoIHRoZVxyXG5cdFx0XHQvLyB0cmFuc2l0aW9uIGFjY29yZGluZ2x5LlxyXG5cdFx0XHRpZiAoIHNldHRpbmdzLmZyb21IYXNoQ2hhbmdlICkge1xyXG5cdFx0XHRcdGhpc3RvcnlEaXIgPSBzZXR0aW5ncy5kaXJlY3Rpb24gPT09IFwiYmFja1wiID8gLTEgOiAxO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBLaWxsIHRoZSBrZXlib2FyZC5cclxuXHRcdFx0Ly8gWFhYX2pibGFzOiBXZSBuZWVkIHRvIHN0b3AgY3Jhd2xpbmcgdGhlIGVudGlyZSBkb2N1bWVudCB0byBraWxsIGZvY3VzLlxyXG5cdFx0XHQvLyAgICAgICAgICAgIEluc3RlYWQsIHdlIHNob3VsZCBiZSB0cmFja2luZyBmb2N1cyB3aXRoIGEgZGVsZWdhdGUoKVxyXG5cdFx0XHQvLyAgICAgICAgICAgIGhhbmRsZXIgc28gd2UgYWxyZWFkeSBoYXZlIHRoZSBlbGVtZW50IGluIGhhbmQgYXQgdGhpc1xyXG5cdFx0XHQvLyAgICAgICAgICAgIHBvaW50LlxyXG5cdFx0XHQvLyBXcmFwIHRoaXMgaW4gYSB0cnkvY2F0Y2ggYmxvY2sgc2luY2UgSUU5IHRocm93IFwiVW5zcGVjaWZpZWQgZXJyb3JcIiBpZlxyXG5cdFx0XHQvLyBkb2N1bWVudC5hY3RpdmVFbGVtZW50IGlzIHVuZGVmaW5lZCB3aGVuIHdlIGFyZSBpbiBhbiBJRnJhbWUuXHJcblx0XHRcdHRyeSB7XHJcblx0XHRcdFx0aWYgKCBkb2N1bWVudC5hY3RpdmVFbGVtZW50ICYmXHJcblx0XHRcdFx0XHRkb2N1bWVudC5hY3RpdmVFbGVtZW50Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgIT09IFwiYm9keVwiICkge1xyXG5cclxuXHRcdFx0XHRcdCQoIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgKS5ibHVyKCk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdCQoIFwiaW5wdXQ6Zm9jdXMsIHRleHRhcmVhOmZvY3VzLCBzZWxlY3Q6Zm9jdXNcIiApLmJsdXIoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0gY2F0Y2goIGUgKSB7fVxyXG5cclxuXHRcdFx0Ly8gUmVjb3JkIHdoZXRoZXIgd2UgYXJlIGF0IGEgcGxhY2UgaW4gaGlzdG9yeSB3aGVyZSBhIGRpYWxvZyB1c2VkIHRvIGJlIC1cclxuXHRcdFx0Ly8gaWYgc28sIGRvIG5vdCBhZGQgYSBuZXcgaGlzdG9yeSBlbnRyeSBhbmQgZG8gbm90IGNoYW5nZSB0aGUgaGFzaCBlaXRoZXJcclxuXHRcdFx0YWxyZWFkeVRoZXJlID0gZmFsc2U7XHJcblxyXG5cdFx0XHQvLyBJZiB3ZSdyZSBkaXNwbGF5aW5nIHRoZSBwYWdlIGFzIGEgZGlhbG9nLCB3ZSBkb24ndCB3YW50IHRoZSB1cmxcclxuXHRcdFx0Ly8gZm9yIHRoZSBkaWFsb2cgY29udGVudCB0byBiZSB1c2VkIGluIHRoZSBoYXNoLiBJbnN0ZWFkLCB3ZSB3YW50XHJcblx0XHRcdC8vIHRvIGFwcGVuZCB0aGUgZGlhbG9nSGFzaEtleSB0byB0aGUgdXJsIG9mIHRoZSBjdXJyZW50IHBhZ2UuXHJcblx0XHRcdGlmICggaXNEaWFsb2cgJiYgYWN0aXZlICkge1xyXG5cdFx0XHRcdC8vIG9uIHRoZSBpbml0aWFsIHBhZ2UgbG9hZCBhY3RpdmUudXJsIGlzIHVuZGVmaW5lZCBhbmQgaW4gdGhhdCBjYXNlXHJcblx0XHRcdFx0Ly8gc2hvdWxkIGJlIGFuIGVtcHR5IHN0cmluZy4gTW92aW5nIHRoZSB1bmRlZmluZWQgLT4gZW1wdHkgc3RyaW5nIGJhY2tcclxuXHRcdFx0XHQvLyBpbnRvIHVybEhpc3RvcnkuYWRkTmV3IHNlZW1lZCBpbXBydWRlbnQgZ2l2ZW4gdW5kZWZpbmVkIGJldHRlclxyXG5cdFx0XHRcdC8vIHJlcHJlc2VudHMgdGhlIHVybCBzdGF0ZVxyXG5cclxuXHRcdFx0XHQvLyBJZiB3ZSBhcmUgYXQgYSBwbGFjZSBpbiBoaXN0b3J5IHRoYXQgb25jZSBiZWxvbmdlZCB0byBhIGRpYWxvZywgcmV1c2VcclxuXHRcdFx0XHQvLyB0aGlzIHN0YXRlIHdpdGhvdXQgYWRkaW5nIHRvIHVybEhpc3RvcnkgYW5kIHdpdGhvdXQgbW9kaWZ5aW5nIHRoZVxyXG5cdFx0XHRcdC8vIGhhc2guIEhvd2V2ZXIsIGlmIGEgZGlhbG9nIGlzIGFscmVhZHkgZGlzcGxheWVkIGF0IHRoaXMgcG9pbnQsIGFuZFxyXG5cdFx0XHRcdC8vIHdlJ3JlIGFib3V0IHRvIGRpc3BsYXkgYW5vdGhlciBkaWFsb2csIHRoZW4gd2UgbXVzdCBhZGQgYW5vdGhlciBoYXNoXHJcblx0XHRcdFx0Ly8gYW5kIGhpc3RvcnkgZW50cnkgb24gdG9wIHNvIHRoYXQgb25lIG1heSBuYXZpZ2F0ZSBiYWNrIHRvIHRoZVxyXG5cdFx0XHRcdC8vIG9yaWdpbmFsIGRpYWxvZ1xyXG5cdFx0XHRcdGlmICggYWN0aXZlLnVybCAmJlxyXG5cdFx0XHRcdFx0YWN0aXZlLnVybC5pbmRleE9mKCAkLm1vYmlsZS5kaWFsb2dIYXNoS2V5ICkgPiAtMSAmJlxyXG5cdFx0XHRcdFx0dGhpcy5hY3RpdmVQYWdlICYmXHJcblx0XHRcdFx0XHQhdGhpcy5hY3RpdmVQYWdlLmhhc0NsYXNzKCBcInVpLWRpYWxvZ1wiICkgJiZcclxuXHRcdFx0XHRcdCQubW9iaWxlLm5hdmlnYXRlLmhpc3RvcnkuYWN0aXZlSW5kZXggPiAwICkge1xyXG5cclxuXHRcdFx0XHRcdHNldHRpbmdzLmNoYW5nZUhhc2ggPSBmYWxzZTtcclxuXHRcdFx0XHRcdGFscmVhZHlUaGVyZSA9IHRydWU7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBOb3JtYWxseSwgd2UgdGFjayBvbiBhIGRpYWxvZyBoYXNoIGtleSwgYnV0IGlmIHRoaXMgaXMgdGhlIGxvY2F0aW9uXHJcblx0XHRcdFx0Ly8gb2YgYSBzdGFsZSBkaWFsb2csIHdlIHJldXNlIHRoZSBVUkwgZnJvbSB0aGUgZW50cnlcclxuXHRcdFx0XHR1cmwgPSAoIGFjdGl2ZS51cmwgfHwgXCJcIiApO1xyXG5cclxuXHRcdFx0XHQvLyBhY2NvdW50IGZvciBhYnNvbHV0ZSB1cmxzIGluc3RlYWQgb2YganVzdCByZWxhdGl2ZSB1cmxzIHVzZSBhcyBoYXNoZXNcclxuXHRcdFx0XHRpZiAoICFhbHJlYWR5VGhlcmUgJiYgdXJsLmluZGV4T2YoXCIjXCIpID4gLTEgKSB7XHJcblx0XHRcdFx0XHR1cmwgKz0gJC5tb2JpbGUuZGlhbG9nSGFzaEtleTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0dXJsICs9IFwiI1wiICsgJC5tb2JpbGUuZGlhbG9nSGFzaEtleTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIGlmIHRpdGxlIGVsZW1lbnQgd2Fzbid0IGZvdW5kLCB0cnkgdGhlIHBhZ2UgZGl2IGRhdGEgYXR0ciB0b29cclxuXHRcdFx0Ly8gSWYgdGhpcyBpcyBhIGRlZXAtbGluayBvciBhIHJlbG9hZCAoIGFjdGl2ZSA9PT0gdW5kZWZpbmVkICkgdGhlbiBqdXN0XHJcblx0XHRcdC8vIHVzZSBwYWdlVGl0bGVcclxuXHRcdFx0bmV3UGFnZVRpdGxlID0gKCAhYWN0aXZlICkgPyBwYWdlVGl0bGUgOiB0b1BhZ2UuanFtRGF0YSggXCJ0aXRsZVwiICkgfHxcclxuXHRcdFx0XHR0b1BhZ2UuY2hpbGRyZW4oIFwiOmpxbURhdGEocm9sZT0naGVhZGVyJylcIiApLmZpbmQoIFwiLnVpLXRpdGxlXCIgKS50ZXh0KCk7XHJcblx0XHRcdGlmICggISFuZXdQYWdlVGl0bGUgJiYgcGFnZVRpdGxlID09PSBkb2N1bWVudC50aXRsZSApIHtcclxuXHRcdFx0XHRwYWdlVGl0bGUgPSBuZXdQYWdlVGl0bGU7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKCAhdG9QYWdlLmpxbURhdGEoIFwidGl0bGVcIiApICkge1xyXG5cdFx0XHRcdHRvUGFnZS5qcW1EYXRhKCBcInRpdGxlXCIsIHBhZ2VUaXRsZSApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBNYWtlIHN1cmUgd2UgaGF2ZSBhIHRyYW5zaXRpb24gZGVmaW5lZC5cclxuXHRcdFx0c2V0dGluZ3MudHJhbnNpdGlvbiA9IHNldHRpbmdzLnRyYW5zaXRpb24gfHxcclxuXHRcdFx0XHQoICggaGlzdG9yeURpciAmJiAhYWN0aXZlSXNJbml0aWFsUGFnZSApID8gYWN0aXZlLnRyYW5zaXRpb24gOiB1bmRlZmluZWQgKSB8fFxyXG5cdFx0XHRcdCggaXNEaWFsb2cgPyAkLm1vYmlsZS5kZWZhdWx0RGlhbG9nVHJhbnNpdGlvbiA6ICQubW9iaWxlLmRlZmF1bHRQYWdlVHJhbnNpdGlvbiApO1xyXG5cclxuXHRcdFx0Ly9hZGQgcGFnZSB0byBoaXN0b3J5IHN0YWNrIGlmIGl0J3Mgbm90IGJhY2sgb3IgZm9yd2FyZFxyXG5cdFx0XHRpZiAoICFoaXN0b3J5RGlyICYmIGFscmVhZHlUaGVyZSApIHtcclxuXHRcdFx0XHQkLm1vYmlsZS5uYXZpZ2F0ZS5oaXN0b3J5LmdldEFjdGl2ZSgpLnBhZ2VVcmwgPSBwYWdlVXJsO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBTZXQgdGhlIGxvY2F0aW9uIGhhc2guXHJcblx0XHRcdGlmICggdXJsICYmICFzZXR0aW5ncy5mcm9tSGFzaENoYW5nZSApIHtcclxuXHJcblx0XHRcdFx0Ly8gcmVidWlsZGluZyB0aGUgaGFzaCBoZXJlIHNpbmNlIHdlIGxvb3NlIGl0IGVhcmxpZXIgb25cclxuXHRcdFx0XHQvLyBUT0RPIHByZXNlcnZlIHRoZSBvcmlnaW5hbGx5IHBhc3NlZCBpbiBwYXRoXHJcblx0XHRcdFx0aWYgKCAhJC5tb2JpbGUucGF0aC5pc1BhdGgoIHVybCApICYmIHVybC5pbmRleE9mKCBcIiNcIiApIDwgMCApIHtcclxuXHRcdFx0XHRcdHVybCA9IFwiI1wiICsgdXJsO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gVE9ETyB0aGUgcHJvcGVydHkgbmFtZXMgaGVyZSBhcmUganVzdCBzaWxseVxyXG5cdFx0XHRcdHBhcmFtcyA9IHtcclxuXHRcdFx0XHRcdHRyYW5zaXRpb246IHNldHRpbmdzLnRyYW5zaXRpb24sXHJcblx0XHRcdFx0XHR0aXRsZTogcGFnZVRpdGxlLFxyXG5cdFx0XHRcdFx0cGFnZVVybDogcGFnZVVybCxcclxuXHRcdFx0XHRcdHJvbGU6IHNldHRpbmdzLnJvbGVcclxuXHRcdFx0XHR9O1xyXG5cclxuXHRcdFx0XHRpZiAoIHNldHRpbmdzLmNoYW5nZUhhc2ggIT09IGZhbHNlICYmICQubW9iaWxlLmhhc2hMaXN0ZW5pbmdFbmFibGVkICkge1xyXG5cdFx0XHRcdFx0JC5tb2JpbGUubmF2aWdhdGUoIHRoaXMud2luZG93WyAwIF0uZW5jb2RlVVJJKCB1cmwgKSwgcGFyYW1zLCB0cnVlKTtcclxuXHRcdFx0XHR9IGVsc2UgaWYgKCB0b1BhZ2VbIDAgXSAhPT0gJC5tb2JpbGUuZmlyc3RQYWdlWyAwIF0gKSB7XHJcblx0XHRcdFx0XHQkLm1vYmlsZS5uYXZpZ2F0ZS5oaXN0b3J5LmFkZCggdXJsLCBwYXJhbXMgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vc2V0IHBhZ2UgdGl0bGVcclxuXHRcdFx0ZG9jdW1lbnQudGl0bGUgPSBwYWdlVGl0bGU7XHJcblxyXG5cdFx0XHQvL3NldCBcInRvUGFnZVwiIGFzIGFjdGl2ZVBhZ2UgZGVwcmVjYXRlZCBpbiAxLjQgcmVtb3ZlIGluIDEuNVxyXG5cdFx0XHQkLm1vYmlsZS5hY3RpdmVQYWdlID0gdG9QYWdlO1xyXG5cclxuXHRcdFx0Ly9uZXcgd2F5IHRvIGhhbmRsZSBhY3RpdmVQYWdlXHJcblx0XHRcdHRoaXMuYWN0aXZlUGFnZSA9IHRvUGFnZTtcclxuXHJcblx0XHRcdC8vIElmIHdlJ3JlIG5hdmlnYXRpbmcgYmFjayBpbiB0aGUgVVJMIGhpc3RvcnksIHNldCByZXZlcnNlIGFjY29yZGluZ2x5LlxyXG5cdFx0XHRzZXR0aW5ncy5yZXZlcnNlID0gc2V0dGluZ3MucmV2ZXJzZSB8fCBoaXN0b3J5RGlyIDwgMDtcclxuXHJcblx0XHRcdGNzc1RyYW5zaXRpb25EZWZlcnJlZCA9ICQuRGVmZXJyZWQoKTtcclxuXHJcblx0XHRcdHRoaXMuX2Nzc1RyYW5zaXRpb24odG9QYWdlLCBmcm9tUGFnZSwge1xyXG5cdFx0XHRcdHRyYW5zaXRpb246IHNldHRpbmdzLnRyYW5zaXRpb24sXHJcblx0XHRcdFx0cmV2ZXJzZTogc2V0dGluZ3MucmV2ZXJzZSxcclxuXHRcdFx0XHRkZWZlcnJlZDogY3NzVHJhbnNpdGlvbkRlZmVycmVkXHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0Y3NzVHJhbnNpdGlvbkRlZmVycmVkLmRvbmUoJC5wcm94eShmdW5jdGlvbiggbmFtZSwgcmV2ZXJzZSwgJHRvLCAkZnJvbSwgYWxyZWFkeUZvY3VzZWQgKSB7XHJcblx0XHRcdFx0JC5tb2JpbGUucmVtb3ZlQWN0aXZlTGlua0NsYXNzKCk7XHJcblxyXG5cdFx0XHRcdC8vaWYgdGhlcmUncyBhIGR1cGxpY2F0ZUNhY2hlZFBhZ2UsIHJlbW92ZSBpdCBmcm9tIHRoZSBET00gbm93IHRoYXQgaXQncyBoaWRkZW5cclxuXHRcdFx0XHRpZiAoIHNldHRpbmdzLmR1cGxpY2F0ZUNhY2hlZFBhZ2UgKSB7XHJcblx0XHRcdFx0XHRzZXR0aW5ncy5kdXBsaWNhdGVDYWNoZWRQYWdlLnJlbW92ZSgpO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gZGVzcGl0ZSB2aXNpYmlsaXR5OiBoaWRkZW4gYWRkcmVzc2VzIGlzc3VlICMyOTY1XHJcblx0XHRcdFx0Ly8gaHR0cHM6Ly9naXRodWIuY29tL2pxdWVyeS9qcXVlcnktbW9iaWxlL2lzc3Vlcy8yOTY1XHJcblx0XHRcdFx0aWYgKCAhYWxyZWFkeUZvY3VzZWQgKSB7XHJcblx0XHRcdFx0XHQkLm1vYmlsZS5mb2N1c1BhZ2UoIHRvUGFnZSApO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0dGhpcy5fcmVsZWFzZVRyYW5zaXRpb25Mb2NrKCk7XHJcblx0XHRcdFx0dGhpcy5fdHJpZ2dlcldpdGhEZXByZWNhdGVkKCBcInRyYW5zaXRpb25cIiwgdHJpZ2dlckRhdGEgKTtcclxuXHRcdFx0XHR0aGlzLl90cmlnZ2VyV2l0aERlcHJlY2F0ZWQoIFwiY2hhbmdlXCIsIHRyaWdnZXJEYXRhICk7XHJcblx0XHRcdH0sIHRoaXMpKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly8gZGV0ZXJtaW5lIHRoZSBjdXJyZW50IGJhc2UgdXJsXHJcblx0XHRfZmluZEJhc2VXaXRoRGVmYXVsdDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBjbG9zZXN0QmFzZSA9ICggdGhpcy5hY3RpdmVQYWdlICYmXHJcblx0XHRcdCQubW9iaWxlLmdldENsb3Nlc3RCYXNlVXJsKCB0aGlzLmFjdGl2ZVBhZ2UgKSApO1xyXG5cdFx0cmV0dXJuIGNsb3Nlc3RCYXNlIHx8ICQubW9iaWxlLnBhdGguZG9jdW1lbnRCYXNlLmhyZWZOb0hhc2g7XHJcblx0XHR9XHJcblx0fSk7XHJcblxyXG5cdC8vIFRoZSBmb2xsb3dpbmcgaGFuZGxlcnMgc2hvdWxkIGJlIGJvdW5kIGFmdGVyIG1vYmlsZWluaXQgaGFzIGJlZW4gdHJpZ2dlcmVkXHJcblx0Ly8gdGhlIGZvbGxvd2luZyBkZWZlcnJlZCBpcyByZXNvbHZlZCBpbiB0aGUgaW5pdCBmaWxlXHJcblx0JC5tb2JpbGUubmF2cmVhZHlEZWZlcnJlZCA9ICQuRGVmZXJyZWQoKTtcclxuXHJcblx0Ly90aGVzZSB2YXJpYWJsZXMgbWFrZSBhbGwgcGFnZSBjb250YWluZXJzIHVzZSB0aGUgc2FtZSBxdWV1ZSBhbmQgb25seSBuYXZpZ2F0ZSBvbmUgYXQgYSB0aW1lXHJcblx0Ly8gcXVldWUgdG8gaG9sZCBzaW11bHRhbmlvdXMgcGFnZSB0cmFuc2l0aW9uc1xyXG5cdHZhciBwYWdlVHJhbnNpdGlvblF1ZXVlID0gW10sXHJcblxyXG5cdFx0Ly8gaW5kaWNhdGVzIHdoZXRoZXIgb3Igbm90IHBhZ2UgaXMgaW4gcHJvY2VzcyBvZiB0cmFuc2l0aW9uaW5nXHJcblx0XHRpc1BhZ2VUcmFuc2l0aW9uaW5nID0gZmFsc2U7XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcblx0XHQvLyByZXNvbHZlZCBvbiBkb21yZWFkeVxyXG5cdHZhciBkb21yZWFkeURlZmVycmVkID0gJC5EZWZlcnJlZCgpLFxyXG5cclxuXHRcdC8vIHJlc29sdmVkIGFuZCBudWxsZWQgb24gd2luZG93LmxvYWQoKVxyXG5cdFx0bG9hZERlZmVycmVkID0gJC5EZWZlcnJlZCgpLFxyXG5cclxuXHRcdC8vIGZ1bmN0aW9uIHRoYXQgcmVzb2x2ZXMgdGhlIGFib3ZlIGRlZmVycmVkXHJcblx0XHRwYWdlSXNGdWxseUxvYWRlZCA9IGZ1bmN0aW9uKCkge1xyXG5cclxuXHRcdFx0Ly8gUmVzb2x2ZSBhbmQgbnVsbCB0aGUgZGVmZXJyZWRcclxuXHRcdFx0bG9hZERlZmVycmVkLnJlc29sdmUoKTtcclxuXHRcdFx0bG9hZERlZmVycmVkID0gbnVsbDtcclxuXHRcdH0sXHJcblxyXG5cdFx0ZG9jdW1lbnRVcmwgPSAkLm1vYmlsZS5wYXRoLmRvY3VtZW50VXJsLFxyXG5cclxuXHRcdC8vIHVzZWQgdG8gdHJhY2sgbGFzdCB2Y2xpY2tlZCBlbGVtZW50IHRvIG1ha2Ugc3VyZSBpdHMgdmFsdWUgaXMgYWRkZWQgdG8gZm9ybSBkYXRhXHJcblx0XHQkbGFzdFZDbGlja2VkID0gbnVsbDtcclxuXHJcblx0LyogRXZlbnQgQmluZGluZ3MgLSBoYXNoY2hhbmdlLCBzdWJtaXQsIGFuZCBjbGljayAqL1xyXG5cdGZ1bmN0aW9uIGZpbmRDbG9zZXN0TGluayggZWxlIClcdHtcclxuXHRcdHdoaWxlICggZWxlICkge1xyXG5cdFx0XHQvLyBMb29rIGZvciB0aGUgY2xvc2VzdCBlbGVtZW50IHdpdGggYSBub2RlTmFtZSBvZiBcImFcIi5cclxuXHRcdFx0Ly8gTm90ZSB0aGF0IHdlIGFyZSBjaGVja2luZyBpZiB3ZSBoYXZlIGEgdmFsaWQgbm9kZU5hbWVcclxuXHRcdFx0Ly8gYmVmb3JlIGF0dGVtcHRpbmcgdG8gYWNjZXNzIGl0LiBUaGlzIGlzIGJlY2F1c2UgdGhlXHJcblx0XHRcdC8vIG5vZGUgd2UgZ2V0IGNhbGxlZCB3aXRoIGNvdWxkIGhhdmUgb3JpZ2luYXRlZCBmcm9tIHdpdGhpblxyXG5cdFx0XHQvLyBhbiBlbWJlZGRlZCBTVkcgZG9jdW1lbnQgd2hlcmUgc29tZSBzeW1ib2wgaW5zdGFuY2UgZWxlbWVudHNcclxuXHRcdFx0Ly8gZG9uJ3QgaGF2ZSBub2RlTmFtZSBkZWZpbmVkIG9uIHRoZW0sIG9yIHN0cmluZ3MgYXJlIG9mIHR5cGVcclxuXHRcdFx0Ly8gU1ZHQW5pbWF0ZWRTdHJpbmcuXHJcblx0XHRcdGlmICggKCB0eXBlb2YgZWxlLm5vZGVOYW1lID09PSBcInN0cmluZ1wiICkgJiYgZWxlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09IFwiYVwiICkge1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsZSA9IGVsZS5wYXJlbnROb2RlO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIGVsZTtcclxuXHR9XHJcblxyXG5cdCQubW9iaWxlLmxvYWRQYWdlID0gZnVuY3Rpb24oIHVybCwgb3B0cyApIHtcclxuXHRcdHZhciBjb250YWluZXI7XHJcblxyXG5cdFx0b3B0cyA9IG9wdHMgfHwge307XHJcblx0XHRjb250YWluZXIgPSAoIG9wdHMucGFnZUNvbnRhaW5lciB8fCAkLm1vYmlsZS5wYWdlQ29udGFpbmVyICk7XHJcblxyXG5cdFx0Ly8gY3JlYXRlIHRoZSBkZWZlcnJlZCB0aGF0IHdpbGwgYmUgc3VwcGxpZWQgdG8gbG9hZFBhZ2UgY2FsbGVyc1xyXG5cdFx0Ly8gYW5kIHJlc29sdmVkIGJ5IHRoZSBjb250ZW50IHdpZGdldCdzIGxvYWQgbWV0aG9kXHJcblx0XHRvcHRzLmRlZmVycmVkID0gJC5EZWZlcnJlZCgpO1xyXG5cclxuXHRcdC8vIFByZWZlcnJpbmcgdG8gYWxsb3cgZXhjZXB0aW9ucyBmb3IgdW5pbml0aWFsaXplZCBvcHRzLnBhZ2VDb250YWluZXJcclxuXHRcdC8vIHdpZGdldHMgc28gd2Uga25vdyBpZiB3ZSBuZWVkIHRvIGZvcmNlIGluaXQgaGVyZSBmb3IgdXNlcnNcclxuXHRcdGNvbnRhaW5lci5wYWdlY29udGFpbmVyKCBcImxvYWRcIiwgdXJsLCBvcHRzICk7XHJcblxyXG5cdFx0Ly8gcHJvdmlkZSB0aGUgZGVmZXJyZWRcclxuXHRcdHJldHVybiBvcHRzLmRlZmVycmVkLnByb21pc2UoKTtcclxuXHR9O1xyXG5cclxuXHQvL2RlZmluZSB2YXJzIGZvciBpbnRlcmFsIHVzZVxyXG5cclxuXHQvKiBpbnRlcm5hbCB1dGlsaXR5IGZ1bmN0aW9ucyAqL1xyXG5cclxuXHQvLyBOT1RFIElzc3VlICM0OTUwIEFuZHJvaWQgcGhvbmVnYXAgZG9lc24ndCBuYXZpZ2F0ZSBiYWNrIHByb3Blcmx5XHJcblx0Ly8gICAgICB3aGVuIGEgZnVsbCBwYWdlIHJlZnJlc2ggaGFzIHRha2VuIHBsYWNlLiBJdCBhcHBlYXJzIHRoYXQgaGFzaGNoYW5nZVxyXG5cdC8vICAgICAgYW5kIHJlcGxhY2VzdGF0ZSBoaXN0b3J5IGFsdGVyYXRpb25zIHdvcmsgZmluZSBidXQgd2UgbmVlZCB0byBzdXBwb3J0XHJcblx0Ly8gICAgICBib3RoIGZvcm1zIG9mIGhpc3RvcnkgdHJhdmVyc2FsIGluIG91ciBjb2RlIHRoYXQgdXNlcyBiYWNrd2FyZCBoaXN0b3J5XHJcblx0Ly8gICAgICBtb3ZlbWVudFxyXG5cdCQubW9iaWxlLmJhY2sgPSBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBuYXYgPSB3aW5kb3cubmF2aWdhdG9yO1xyXG5cclxuXHRcdC8vIGlmIHRoZSBzZXR0aW5nIGlzIG9uIGFuZCB0aGUgbmF2aWdhdG9yIG9iamVjdCBpc1xyXG5cdFx0Ly8gYXZhaWxhYmxlIHVzZSB0aGUgcGhvbmVnYXAgbmF2aWdhdGlvbiBjYXBhYmlsaXR5XHJcblx0XHRpZiAoIHRoaXMucGhvbmVnYXBOYXZpZ2F0aW9uRW5hYmxlZCAmJlxyXG5cdFx0XHRuYXYgJiZcclxuXHRcdFx0bmF2LmFwcCAmJlxyXG5cdFx0XHRuYXYuYXBwLmJhY2tIaXN0b3J5ICkge1xyXG5cdFx0XHRuYXYuYXBwLmJhY2tIaXN0b3J5KCk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHQkLm1vYmlsZS5wYWdlQ29udGFpbmVyLnBhZ2Vjb250YWluZXIoIFwiYmFja1wiICk7XHJcblx0XHR9XHJcblx0fTtcclxuXHJcblx0Ly8gRGlyZWN0IGZvY3VzIHRvIHRoZSBwYWdlIHRpdGxlLCBvciBvdGhlcndpc2UgZmlyc3QgZm9jdXNhYmxlIGVsZW1lbnRcclxuXHQkLm1vYmlsZS5mb2N1c1BhZ2UgPSBmdW5jdGlvbiAoIHBhZ2UgKSB7XHJcblx0XHR2YXIgYXV0b2ZvY3VzID0gcGFnZS5maW5kKCBcIlthdXRvZm9jdXNdXCIgKSxcclxuXHRcdFx0cGFnZVRpdGxlID0gcGFnZS5maW5kKCBcIi51aS10aXRsZTplcSgwKVwiICk7XHJcblxyXG5cdFx0aWYgKCBhdXRvZm9jdXMubGVuZ3RoICkge1xyXG5cdFx0XHRhdXRvZm9jdXMuZm9jdXMoKTtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggcGFnZVRpdGxlLmxlbmd0aCApIHtcclxuXHRcdFx0cGFnZVRpdGxlLmZvY3VzKCk7XHJcblx0XHR9IGVsc2V7XHJcblx0XHRcdHBhZ2UuZm9jdXMoKTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuXHQvLyBOby1vcCBpbXBsZW1lbnRhdGlvbiBvZiB0cmFuc2l0aW9uIGRlZ3JhZGF0aW9uXHJcblx0JC5tb2JpbGUuX21heWJlRGVncmFkZVRyYW5zaXRpb24gPSAkLm1vYmlsZS5fbWF5YmVEZWdyYWRlVHJhbnNpdGlvbiB8fCBmdW5jdGlvbiggdHJhbnNpdGlvbiApIHtcclxuXHRcdHJldHVybiB0cmFuc2l0aW9uO1xyXG5cdH07XHJcblxyXG5cdC8vIEV4cG9zZWQgJC5tb2JpbGUgbWV0aG9kc1xyXG5cclxuXHQkLm1vYmlsZS5jaGFuZ2VQYWdlID0gZnVuY3Rpb24oIHRvLCBvcHRpb25zICkge1xyXG5cdFx0JC5tb2JpbGUucGFnZUNvbnRhaW5lci5wYWdlY29udGFpbmVyKCBcImNoYW5nZVwiLCB0bywgb3B0aW9ucyApO1xyXG5cdH07XHJcblxyXG5cdCQubW9iaWxlLmNoYW5nZVBhZ2UuZGVmYXVsdHMgPSB7XHJcblx0XHR0cmFuc2l0aW9uOiB1bmRlZmluZWQsXHJcblx0XHRyZXZlcnNlOiBmYWxzZSxcclxuXHRcdGNoYW5nZUhhc2g6IHRydWUsXHJcblx0XHRmcm9tSGFzaENoYW5nZTogZmFsc2UsXHJcblx0XHRyb2xlOiB1bmRlZmluZWQsIC8vIEJ5IGRlZmF1bHQgd2UgcmVseSBvbiB0aGUgcm9sZSBkZWZpbmVkIGJ5IHRoZSBAZGF0YS1yb2xlIGF0dHJpYnV0ZS5cclxuXHRcdGR1cGxpY2F0ZUNhY2hlZFBhZ2U6IHVuZGVmaW5lZCxcclxuXHRcdHBhZ2VDb250YWluZXI6IHVuZGVmaW5lZCxcclxuXHRcdHNob3dMb2FkTXNnOiB0cnVlLCAvL2xvYWRpbmcgbWVzc2FnZSBzaG93cyBieSBkZWZhdWx0IHdoZW4gcGFnZXMgYXJlIGJlaW5nIGZldGNoZWQgZHVyaW5nIGNoYW5nZVBhZ2VcclxuXHRcdGRhdGFVcmw6IHVuZGVmaW5lZCxcclxuXHRcdGZyb21QYWdlOiB1bmRlZmluZWQsXHJcblx0XHRhbGxvd1NhbWVQYWdlVHJhbnNpdGlvbjogZmFsc2VcclxuXHR9O1xyXG5cclxuXHQkLm1vYmlsZS5fcmVnaXN0ZXJJbnRlcm5hbEV2ZW50cyA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGdldEFqYXhGb3JtRGF0YSA9IGZ1bmN0aW9uKCAkZm9ybSwgY2FsY3VsYXRlT25seSApIHtcclxuXHRcdFx0dmFyIHVybCwgcmV0ID0gdHJ1ZSwgZm9ybURhdGEsIHZjbGlja2VkTmFtZSwgbWV0aG9kO1xyXG5cdFx0XHRpZiAoICEkLm1vYmlsZS5hamF4RW5hYmxlZCB8fFxyXG5cdFx0XHRcdFx0Ly8gdGVzdCB0aGF0IHRoZSBmb3JtIGlzLCBpdHNlbGYsIGFqYXggZmFsc2VcclxuXHRcdFx0XHRcdCRmb3JtLmlzKCBcIjpqcW1EYXRhKGFqYXg9J2ZhbHNlJylcIiApIHx8XHJcblx0XHRcdFx0XHQvLyB0ZXN0IHRoYXQgJC5tb2JpbGUuaWdub3JlQ29udGVudEVuYWJsZWQgaXMgc2V0IGFuZFxyXG5cdFx0XHRcdFx0Ly8gdGhlIGZvcm0gb3Igb25lIG9mIGl0J3MgcGFyZW50cyBpcyBhamF4PWZhbHNlXHJcblx0XHRcdFx0XHQhJGZvcm0uanFtSGlqYWNrYWJsZSgpLmxlbmd0aCB8fFxyXG5cdFx0XHRcdFx0JGZvcm0uYXR0ciggXCJ0YXJnZXRcIiApICkge1xyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dXJsID0gKCAkbGFzdFZDbGlja2VkICYmICRsYXN0VkNsaWNrZWQuYXR0ciggXCJmb3JtYWN0aW9uXCIgKSApIHx8XHJcblx0XHRcdFx0JGZvcm0uYXR0ciggXCJhY3Rpb25cIiApO1xyXG5cdFx0XHRtZXRob2QgPSAoICRmb3JtLmF0dHIoIFwibWV0aG9kXCIgKSB8fCBcImdldFwiICkudG9Mb3dlckNhc2UoKTtcclxuXHJcblx0XHRcdC8vIElmIG5vIGFjdGlvbiBpcyBzcGVjaWZpZWQsIGJyb3dzZXJzIGRlZmF1bHQgdG8gdXNpbmcgdGhlXHJcblx0XHRcdC8vIFVSTCBvZiB0aGUgZG9jdW1lbnQgY29udGFpbmluZyB0aGUgZm9ybS4gU2luY2Ugd2UgZHluYW1pY2FsbHlcclxuXHRcdFx0Ly8gcHVsbCBpbiBwYWdlcyBmcm9tIGV4dGVybmFsIGRvY3VtZW50cywgdGhlIGZvcm0gc2hvdWxkIHN1Ym1pdFxyXG5cdFx0XHQvLyB0byB0aGUgVVJMIGZvciB0aGUgc291cmNlIGRvY3VtZW50IG9mIHRoZSBwYWdlIGNvbnRhaW5pbmdcclxuXHRcdFx0Ly8gdGhlIGZvcm0uXHJcblx0XHRcdGlmICggIXVybCApIHtcclxuXHRcdFx0XHQvLyBHZXQgdGhlIEBkYXRhLXVybCBmb3IgdGhlIHBhZ2UgY29udGFpbmluZyB0aGUgZm9ybS5cclxuXHRcdFx0XHR1cmwgPSAkLm1vYmlsZS5nZXRDbG9zZXN0QmFzZVVybCggJGZvcm0gKTtcclxuXHJcblx0XHRcdFx0Ly8gTk9URTogSWYgdGhlIG1ldGhvZCBpcyBcImdldFwiLCB3ZSBuZWVkIHRvIHN0cmlwIG9mZiB0aGUgcXVlcnkgc3RyaW5nXHJcblx0XHRcdFx0Ly8gYmVjYXVzZSBpdCB3aWxsIGdldCByZXBsYWNlZCB3aXRoIHRoZSBuZXcgZm9ybSBkYXRhLiBTZWUgaXNzdWUgIzU3MTAuXHJcblx0XHRcdFx0aWYgKCBtZXRob2QgPT09IFwiZ2V0XCIgKSB7XHJcblx0XHRcdFx0XHR1cmwgPSAkLm1vYmlsZS5wYXRoLnBhcnNlVXJsKCB1cmwgKS5ocmVmTm9TZWFyY2g7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRpZiAoIHVybCA9PT0gJC5tb2JpbGUucGF0aC5kb2N1bWVudEJhc2UuaHJlZk5vSGFzaCApIHtcclxuXHRcdFx0XHRcdC8vIFRoZSB1cmwgd2UgZ290IGJhY2sgbWF0Y2hlcyB0aGUgZG9jdW1lbnQgYmFzZSxcclxuXHRcdFx0XHRcdC8vIHdoaWNoIG1lYW5zIHRoZSBwYWdlIG11c3QgYmUgYW4gaW50ZXJuYWwvZW1iZWRkZWQgcGFnZSxcclxuXHRcdFx0XHRcdC8vIHNvIGRlZmF1bHQgdG8gdXNpbmcgdGhlIGFjdHVhbCBkb2N1bWVudCB1cmwgYXMgYSBicm93c2VyXHJcblx0XHRcdFx0XHQvLyB3b3VsZC5cclxuXHRcdFx0XHRcdHVybCA9IGRvY3VtZW50VXJsLmhyZWZOb1NlYXJjaDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHVybCA9ICQubW9iaWxlLnBhdGgubWFrZVVybEFic29sdXRlKCAgdXJsLCAkLm1vYmlsZS5nZXRDbG9zZXN0QmFzZVVybCggJGZvcm0gKSApO1xyXG5cclxuXHRcdFx0aWYgKCAoICQubW9iaWxlLnBhdGguaXNFeHRlcm5hbCggdXJsICkgJiYgISQubW9iaWxlLnBhdGguaXNQZXJtaXR0ZWRDcm9zc0RvbWFpblJlcXVlc3QoIGRvY3VtZW50VXJsLCB1cmwgKSApICkge1xyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKCAhY2FsY3VsYXRlT25seSApIHtcclxuXHRcdFx0XHRmb3JtRGF0YSA9ICRmb3JtLnNlcmlhbGl6ZUFycmF5KCk7XHJcblxyXG5cdFx0XHRcdGlmICggJGxhc3RWQ2xpY2tlZCAmJiAkbGFzdFZDbGlja2VkWyAwIF0uZm9ybSA9PT0gJGZvcm1bIDAgXSApIHtcclxuXHRcdFx0XHRcdHZjbGlja2VkTmFtZSA9ICRsYXN0VkNsaWNrZWQuYXR0ciggXCJuYW1lXCIgKTtcclxuXHRcdFx0XHRcdGlmICggdmNsaWNrZWROYW1lICkge1xyXG5cdFx0XHRcdFx0XHQvLyBNYWtlIHN1cmUgdGhlIGxhc3QgY2xpY2tlZCBlbGVtZW50IGlzIGluY2x1ZGVkIGluIHRoZSBmb3JtXHJcblx0XHRcdFx0XHRcdCQuZWFjaCggZm9ybURhdGEsIGZ1bmN0aW9uKCBrZXksIHZhbHVlICkge1xyXG5cdFx0XHRcdFx0XHRcdGlmICggdmFsdWUubmFtZSA9PT0gdmNsaWNrZWROYW1lICkge1xyXG5cdFx0XHRcdFx0XHRcdFx0Ly8gVW5zZXQgdmNsaWNrZWROYW1lIC0gd2UndmUgZm91bmQgaXQgaW4gdGhlIHNlcmlhbGl6ZWQgZGF0YSBhbHJlYWR5XHJcblx0XHRcdFx0XHRcdFx0XHR2Y2xpY2tlZE5hbWUgPSBcIlwiO1xyXG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRcdGlmICggdmNsaWNrZWROYW1lICkge1xyXG5cdFx0XHRcdFx0XHRcdGZvcm1EYXRhLnB1c2goIHsgbmFtZTogdmNsaWNrZWROYW1lLCB2YWx1ZTogJGxhc3RWQ2xpY2tlZC5hdHRyKCBcInZhbHVlXCIgKSB9ICk7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdHJldCA9IHtcclxuXHRcdFx0XHRcdHVybDogdXJsLFxyXG5cdFx0XHRcdFx0b3B0aW9uczoge1xyXG5cdFx0XHRcdFx0XHR0eXBlOlx0XHRtZXRob2QsXHJcblx0XHRcdFx0XHRcdGRhdGE6XHRcdCQucGFyYW0oIGZvcm1EYXRhICksXHJcblx0XHRcdFx0XHRcdHRyYW5zaXRpb246XHQkZm9ybS5qcW1EYXRhKCBcInRyYW5zaXRpb25cIiApLFxyXG5cdFx0XHRcdFx0XHRyZXZlcnNlOlx0JGZvcm0uanFtRGF0YSggXCJkaXJlY3Rpb25cIiApID09PSBcInJldmVyc2VcIixcclxuXHRcdFx0XHRcdFx0cmVsb2FkUGFnZTpcdHRydWVcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9O1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRyZXR1cm4gcmV0O1xyXG5cdFx0fTtcclxuXHJcblx0XHQvL2JpbmQgdG8gZm9ybSBzdWJtaXQgZXZlbnRzLCBoYW5kbGUgd2l0aCBBamF4XHJcblx0XHQkLm1vYmlsZS5kb2N1bWVudC5kZWxlZ2F0ZSggXCJmb3JtXCIsIFwic3VibWl0XCIsIGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdFx0dmFyIGZvcm1EYXRhO1xyXG5cclxuXHRcdFx0aWYgKCAhZXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkgKSB7XHJcblx0XHRcdFx0Zm9ybURhdGEgPSBnZXRBamF4Rm9ybURhdGEoICQoIHRoaXMgKSApO1xyXG5cdFx0XHRcdGlmICggZm9ybURhdGEgKSB7XHJcblx0XHRcdFx0XHQkLm1vYmlsZS5jaGFuZ2VQYWdlKCBmb3JtRGF0YS51cmwsIGZvcm1EYXRhLm9wdGlvbnMgKTtcclxuXHRcdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHQvL2FkZCBhY3RpdmUgc3RhdGUgb24gdmNsaWNrXHJcblx0XHQkLm1vYmlsZS5kb2N1bWVudC5iaW5kKCBcInZjbGlja1wiLCBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHRcdHZhciAkYnRuLCBidG5FbHMsIHRhcmdldCA9IGV2ZW50LnRhcmdldCwgbmVlZENsb3Nlc3QgPSBmYWxzZTtcclxuXHRcdFx0Ly8gaWYgdGhpcyBpc24ndCBhIGxlZnQgY2xpY2sgd2UgZG9uJ3QgY2FyZS4gSXRzIGltcG9ydGFudCB0byBub3RlXHJcblx0XHRcdC8vIHRoYXQgd2hlbiB0aGUgdmlydHVhbCBldmVudCBpcyBnZW5lcmF0ZWQgaXQgd2lsbCBjcmVhdGUgdGhlIHdoaWNoIGF0dHJcclxuXHRcdFx0aWYgKCBldmVudC53aGljaCA+IDEgfHwgISQubW9iaWxlLmxpbmtCaW5kaW5nRW5hYmxlZCApIHtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIFJlY29yZCB0aGF0IHRoaXMgZWxlbWVudCB3YXMgY2xpY2tlZCwgaW4gY2FzZSB3ZSBuZWVkIGl0IGZvciBjb3JyZWN0XHJcblx0XHRcdC8vIGZvcm0gc3VibWlzc2lvbiBkdXJpbmcgdGhlIFwic3VibWl0XCIgaGFuZGxlciBhYm92ZVxyXG5cdFx0XHQkbGFzdFZDbGlja2VkID0gJCggdGFyZ2V0ICk7XHJcblxyXG5cdFx0XHQvLyBUcnkgdG8gZmluZCBhIHRhcmdldCBlbGVtZW50IHRvIHdoaWNoIHRoZSBhY3RpdmUgY2xhc3Mgd2lsbCBiZSBhcHBsaWVkXHJcblx0XHRcdGlmICggJC5kYXRhKCB0YXJnZXQsIFwibW9iaWxlLWJ1dHRvblwiICkgKSB7XHJcblx0XHRcdFx0Ly8gSWYgdGhlIGZvcm0gd2lsbCBub3QgYmUgc3VibWl0dGVkIHZpYSBBSkFYLCBkbyBub3QgYWRkIGFjdGl2ZSBjbGFzc1xyXG5cdFx0XHRcdGlmICggIWdldEFqYXhGb3JtRGF0YSggJCggdGFyZ2V0ICkuY2xvc2VzdCggXCJmb3JtXCIgKSwgdHJ1ZSApICkge1xyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQvLyBXZSB3aWxsIGFwcGx5IHRoZSBhY3RpdmUgc3RhdGUgdG8gdGhpcyBidXR0b24gd2lkZ2V0IC0gdGhlIHBhcmVudFxyXG5cdFx0XHRcdC8vIG9mIHRoZSBpbnB1dCB0aGF0IHdhcyBjbGlja2VkIHdpbGwgaGF2ZSB0aGUgYXNzb2NpYXRlZCBkYXRhXHJcblx0XHRcdFx0aWYgKCB0YXJnZXQucGFyZW50Tm9kZSApIHtcclxuXHRcdFx0XHRcdHRhcmdldCA9IHRhcmdldC5wYXJlbnROb2RlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHR0YXJnZXQgPSBmaW5kQ2xvc2VzdExpbmsoIHRhcmdldCApO1xyXG5cdFx0XHRcdGlmICggISggdGFyZ2V0ICYmICQubW9iaWxlLnBhdGgucGFyc2VVcmwoIHRhcmdldC5nZXRBdHRyaWJ1dGUoIFwiaHJlZlwiICkgfHwgXCIjXCIgKS5oYXNoICE9PSBcIiNcIiApICkge1xyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gVE9ETyB0ZWFjaCAkLm1vYmlsZS5oaWphY2thYmxlIHRvIG9wZXJhdGUgb24gcmF3IGRvbSBlbGVtZW50cyBzbyB0aGVcclxuXHRcdFx0XHQvLyBsaW5rIHdyYXBwaW5nIGNhbiBiZSBhdm9pZGVkXHJcblx0XHRcdFx0aWYgKCAhJCggdGFyZ2V0ICkuanFtSGlqYWNrYWJsZSgpLmxlbmd0aCApIHtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdC8vIEF2b2lkIGNhbGxpbmcgLmNsb3Nlc3QgYnkgdXNpbmcgdGhlIGRhdGEgc2V0IGR1cmluZyAuYnV0dG9uTWFya3VwKClcclxuXHRcdFx0Ly8gTGlzdCBpdGVtcyBoYXZlIHRoZSBidXR0b24gZGF0YSBpbiB0aGUgcGFyZW50IG9mIHRoZSBlbGVtZW50IGNsaWNrZWRcclxuXHRcdFx0aWYgKCAhIX50YXJnZXQuY2xhc3NOYW1lLmluZGV4T2YoIFwidWktbGluay1pbmhlcml0XCIgKSApIHtcclxuXHRcdFx0XHRpZiAoIHRhcmdldC5wYXJlbnROb2RlICkge1xyXG5cdFx0XHRcdFx0YnRuRWxzID0gJC5kYXRhKCB0YXJnZXQucGFyZW50Tm9kZSwgXCJidXR0b25FbGVtZW50c1wiICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHQvLyBPdGhlcndpc2UsIGxvb2sgZm9yIHRoZSBkYXRhIG9uIHRoZSB0YXJnZXQgaXRzZWxmXHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0YnRuRWxzID0gJC5kYXRhKCB0YXJnZXQsIFwiYnV0dG9uRWxlbWVudHNcIiApO1xyXG5cdFx0XHR9XHJcblx0XHRcdC8vIElmIGZvdW5kLCBncmFiIHRoZSBidXR0b24ncyBvdXRlciBlbGVtZW50XHJcblx0XHRcdGlmICggYnRuRWxzICkge1xyXG5cdFx0XHRcdHRhcmdldCA9IGJ0bkVscy5vdXRlcjtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRuZWVkQ2xvc2VzdCA9IHRydWU7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdCRidG4gPSAkKCB0YXJnZXQgKTtcclxuXHRcdFx0Ly8gSWYgdGhlIG91dGVyIGVsZW1lbnQgd2Fzbid0IGZvdW5kIGJ5IHRoZSBvdXIgaGV1cmlzdGljcywgdXNlIC5jbG9zZXN0KClcclxuXHRcdFx0aWYgKCBuZWVkQ2xvc2VzdCApIHtcclxuXHRcdFx0XHQkYnRuID0gJGJ0bi5jbG9zZXN0KCBcIi51aS1idG5cIiApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoICRidG4ubGVuZ3RoID4gMCAmJlxyXG5cdFx0XHRcdCEoICRidG4uaGFzQ2xhc3MoIFwidWktc3RhdGUtZGlzYWJsZWRcIiB8fFxyXG5cclxuXHRcdFx0XHRcdC8vIERFUFJFQ0FURUQgYXMgb2YgMS40LjAgLSByZW1vdmUgYWZ0ZXIgMS40LjAgcmVsZWFzZVxyXG5cdFx0XHRcdFx0Ly8gb25seSB1aS1zdGF0ZS1kaXNhYmxlZCBzaG91bGQgYmUgcHJlc2VudCB0aGVyZWFmdGVyXHJcblx0XHRcdFx0XHQkYnRuLmhhc0NsYXNzKCBcInVpLWRpc2FibGVkXCIgKSApICkgKSB7XHJcblx0XHRcdFx0JC5tb2JpbGUucmVtb3ZlQWN0aXZlTGlua0NsYXNzKCB0cnVlICk7XHJcblx0XHRcdFx0JC5tb2JpbGUuYWN0aXZlQ2xpY2tlZExpbmsgPSAkYnRuO1xyXG5cdFx0XHRcdCQubW9iaWxlLmFjdGl2ZUNsaWNrZWRMaW5rLmFkZENsYXNzKCAkLm1vYmlsZS5hY3RpdmVCdG5DbGFzcyApO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBjbGljayByb3V0aW5nIC0gZGlyZWN0IHRvIEhUVFAgb3IgQWpheCwgYWNjb3JkaW5nbHlcclxuXHRcdCQubW9iaWxlLmRvY3VtZW50LmJpbmQoIFwiY2xpY2tcIiwgZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0XHRpZiAoICEkLm1vYmlsZS5saW5rQmluZGluZ0VuYWJsZWQgfHwgZXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkgKSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR2YXIgbGluayA9IGZpbmRDbG9zZXN0TGluayggZXZlbnQudGFyZ2V0ICksXHJcblx0XHRcdFx0JGxpbmsgPSAkKCBsaW5rICksXHJcblxyXG5cdFx0XHRcdC8vcmVtb3ZlIGFjdGl2ZSBsaW5rIGNsYXNzIGlmIGV4dGVybmFsICh0aGVuIGl0IHdvbid0IGJlIHRoZXJlIGlmIHlvdSBjb21lIGJhY2spXHJcblx0XHRcdFx0aHR0cENsZWFudXAgPSBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkgeyAkLm1vYmlsZS5yZW1vdmVBY3RpdmVMaW5rQ2xhc3MoIHRydWUgKTsgfSwgMjAwICk7XHJcblx0XHRcdFx0fSxcclxuXHRcdFx0XHRiYXNlVXJsLCBocmVmLFxyXG5cdFx0XHRcdHVzZURlZmF1bHRVcmxIYW5kbGluZywgaXNFeHRlcm5hbCxcclxuXHRcdFx0XHR0cmFuc2l0aW9uLCByZXZlcnNlLCByb2xlO1xyXG5cclxuXHRcdFx0Ly8gSWYgYSBidXR0b24gd2FzIGNsaWNrZWQsIGNsZWFuIHVwIHRoZSBhY3RpdmUgY2xhc3MgYWRkZWQgYnkgdmNsaWNrIGFib3ZlXHJcblx0XHRcdGlmICggJC5tb2JpbGUuYWN0aXZlQ2xpY2tlZExpbmsgJiZcclxuXHRcdFx0XHQkLm1vYmlsZS5hY3RpdmVDbGlja2VkTGlua1sgMCBdID09PSBldmVudC50YXJnZXQucGFyZW50Tm9kZSApIHtcclxuXHRcdFx0XHRodHRwQ2xlYW51cCgpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBJZiB0aGVyZSBpcyBubyBsaW5rIGFzc29jaWF0ZWQgd2l0aCB0aGUgY2xpY2sgb3IgaXRzIG5vdCBhIGxlZnRcclxuXHRcdFx0Ly8gY2xpY2sgd2Ugd2FudCB0byBpZ25vcmUgdGhlIGNsaWNrXHJcblx0XHRcdC8vIFRPRE8gdGVhY2ggJC5tb2JpbGUuaGlqYWNrYWJsZSB0byBvcGVyYXRlIG9uIHJhdyBkb20gZWxlbWVudHMgc28gdGhlIGxpbmsgd3JhcHBpbmdcclxuXHRcdFx0Ly8gY2FuIGJlIGF2b2lkZWRcclxuXHRcdFx0aWYgKCAhbGluayB8fCBldmVudC53aGljaCA+IDEgfHwgISRsaW5rLmpxbUhpamFja2FibGUoKS5sZW5ndGggKSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvL2lmIHRoZXJlJ3MgYSBkYXRhLXJlbD1iYWNrIGF0dHIsIGdvIGJhY2sgaW4gaGlzdG9yeVxyXG5cdFx0XHRpZiAoICRsaW5rLmlzKCBcIjpqcW1EYXRhKHJlbD0nYmFjaycpXCIgKSApIHtcclxuXHRcdFx0XHQkLm1vYmlsZS5iYWNrKCk7XHJcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRiYXNlVXJsID0gJC5tb2JpbGUuZ2V0Q2xvc2VzdEJhc2VVcmwoICRsaW5rICk7XHJcblxyXG5cdFx0XHQvL2dldCBocmVmLCBpZiBkZWZpbmVkLCBvdGhlcndpc2UgZGVmYXVsdCB0byBlbXB0eSBoYXNoXHJcblx0XHRcdGhyZWYgPSAkLm1vYmlsZS5wYXRoLm1ha2VVcmxBYnNvbHV0ZSggJGxpbmsuYXR0ciggXCJocmVmXCIgKSB8fCBcIiNcIiwgYmFzZVVybCApO1xyXG5cclxuXHRcdFx0Ly9pZiBhamF4IGlzIGRpc2FibGVkLCBleGl0IGVhcmx5XHJcblx0XHRcdGlmICggISQubW9iaWxlLmFqYXhFbmFibGVkICYmICEkLm1vYmlsZS5wYXRoLmlzRW1iZWRkZWRQYWdlKCBocmVmICkgKSB7XHJcblx0XHRcdFx0aHR0cENsZWFudXAoKTtcclxuXHRcdFx0XHQvL3VzZSBkZWZhdWx0IGNsaWNrIGhhbmRsaW5nXHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBYWFhfamJsYXM6IElkZWFsbHkgbGlua3MgdG8gYXBwbGljYXRpb24gcGFnZXMgc2hvdWxkIGJlIHNwZWNpZmllZCBhc1xyXG5cdFx0XHQvLyAgICAgICAgICAgIGFuIHVybCB0byB0aGUgYXBwbGljYXRpb24gZG9jdW1lbnQgd2l0aCBhIGhhc2ggdGhhdCBpcyBlaXRoZXJcclxuXHRcdFx0Ly8gICAgICAgICAgICB0aGUgc2l0ZSByZWxhdGl2ZSBwYXRoIG9yIGlkIHRvIHRoZSBwYWdlLiBCdXQgc29tZSBvZiB0aGVcclxuXHRcdFx0Ly8gICAgICAgICAgICBpbnRlcm5hbCBjb2RlIHRoYXQgZHluYW1pY2FsbHkgZ2VuZXJhdGVzIHN1Yi1wYWdlcyBmb3IgbmVzdGVkXHJcblx0XHRcdC8vICAgICAgICAgICAgbGlzdHMgYW5kIHNlbGVjdCBkaWFsb2dzLCBqdXN0IHdyaXRlIGEgaGFzaCBpbiB0aGUgbGluayB0aGV5XHJcblx0XHRcdC8vICAgICAgICAgICAgY3JlYXRlLiBUaGlzIG1lYW5zIHRoZSBhY3R1YWwgVVJMIHBhdGggaXMgYmFzZWQgb24gd2hhdGV2ZXJcclxuXHRcdFx0Ly8gICAgICAgICAgICB0aGUgY3VycmVudCB2YWx1ZSBvZiB0aGUgYmFzZSB0YWcgaXMgYXQgdGhlIHRpbWUgdGhpcyBjb2RlXHJcblx0XHRcdC8vICAgICAgICAgICAgaXMgY2FsbGVkLlxyXG5cdFx0XHRpZiAoIGhyZWYuc2VhcmNoKCBcIiNcIiApICE9PSAtMSAmJlxyXG5cdFx0XHRcdCEoICQubW9iaWxlLnBhdGguaXNFeHRlcm5hbCggaHJlZiApICYmICQubW9iaWxlLnBhdGguaXNBYnNvbHV0ZVVybCggaHJlZiApICkgKSB7XHJcblxyXG5cdFx0XHRcdGhyZWYgPSBocmVmLnJlcGxhY2UoIC9bXiNdKiMvLCBcIlwiICk7XHJcblx0XHRcdFx0aWYgKCAhaHJlZiApIHtcclxuXHRcdFx0XHRcdC8vbGluayB3YXMgYW4gZW1wdHkgaGFzaCBtZWFudCBwdXJlbHlcclxuXHRcdFx0XHRcdC8vZm9yIGludGVyYWN0aW9uLCBzbyB3ZSBpZ25vcmUgaXQuXHJcblx0XHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH0gZWxzZSBpZiAoICQubW9iaWxlLnBhdGguaXNQYXRoKCBocmVmICkgKSB7XHJcblx0XHRcdFx0XHQvL3dlIGhhdmUgYXBhdGggc28gbWFrZSBpdCB0aGUgaHJlZiB3ZSB3YW50IHRvIGxvYWQuXHJcblx0XHRcdFx0XHRocmVmID0gJC5tb2JpbGUucGF0aC5tYWtlVXJsQWJzb2x1dGUoIGhyZWYsIGJhc2VVcmwgKTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0Ly93ZSBoYXZlIGEgc2ltcGxlIGlkIHNvIHVzZSB0aGUgZG9jdW1lbnRVcmwgYXMgaXRzIGJhc2UuXHJcblx0XHRcdFx0XHRocmVmID0gJC5tb2JpbGUucGF0aC5tYWtlVXJsQWJzb2x1dGUoIFwiI1wiICsgaHJlZiwgZG9jdW1lbnRVcmwuaHJlZk5vSGFzaCApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gU2hvdWxkIHdlIGhhbmRsZSB0aGlzIGxpbmssIG9yIGxldCB0aGUgYnJvd3NlciBkZWFsIHdpdGggaXQ/XHJcblx0XHRcdHVzZURlZmF1bHRVcmxIYW5kbGluZyA9ICRsaW5rLmlzKCBcIltyZWw9J2V4dGVybmFsJ11cIiApIHx8ICRsaW5rLmlzKCBcIjpqcW1EYXRhKGFqYXg9J2ZhbHNlJylcIiApIHx8ICRsaW5rLmlzKCBcIlt0YXJnZXRdXCIgKTtcclxuXHJcblx0XHRcdC8vIFNvbWUgZW1iZWRkZWQgYnJvd3NlcnMsIGxpa2UgdGhlIHdlYiB2aWV3IGluIFBob25lIEdhcCwgYWxsb3cgY3Jvc3MtZG9tYWluIFhIUlxyXG5cdFx0XHQvLyByZXF1ZXN0cyBpZiB0aGUgZG9jdW1lbnQgZG9pbmcgdGhlIHJlcXVlc3Qgd2FzIGxvYWRlZCB2aWEgdGhlIGZpbGU6Ly8gcHJvdG9jb2wuXHJcblx0XHRcdC8vIFRoaXMgaXMgdXN1YWxseSB0byBhbGxvdyB0aGUgYXBwbGljYXRpb24gdG8gXCJwaG9uZSBob21lXCIgYW5kIGZldGNoIGFwcCBzcGVjaWZpY1xyXG5cdFx0XHQvLyBkYXRhLiBXZSBub3JtYWxseSBsZXQgdGhlIGJyb3dzZXIgaGFuZGxlIGV4dGVybmFsL2Nyb3NzLWRvbWFpbiB1cmxzLCBidXQgaWYgdGhlXHJcblx0XHRcdC8vIGFsbG93Q3Jvc3NEb21haW5QYWdlcyBvcHRpb24gaXMgdHJ1ZSwgd2Ugd2lsbCBhbGxvdyBjcm9zcy1kb21haW4gaHR0cC9odHRwc1xyXG5cdFx0XHQvLyByZXF1ZXN0cyB0byBnbyB0aHJvdWdoIG91ciBwYWdlIGxvYWRpbmcgbG9naWMuXHJcblxyXG5cdFx0XHQvL2NoZWNrIGZvciBwcm90b2NvbCBvciByZWwgYW5kIGl0cyBub3QgYW4gZW1iZWRkZWQgcGFnZVxyXG5cdFx0XHQvL1RPRE8gb3ZlcmxhcCBpbiBsb2dpYyBmcm9tIGlzRXh0ZXJuYWwsIHJlbD1leHRlcm5hbCBjaGVjayBzaG91bGQgYmVcclxuXHRcdFx0Ly8gICAgIG1vdmVkIGludG8gbW9yZSBjb21wcmVoZW5zaXZlIGlzRXh0ZXJuYWxMaW5rXHJcblx0XHRcdGlzRXh0ZXJuYWwgPSB1c2VEZWZhdWx0VXJsSGFuZGxpbmcgfHwgKCAkLm1vYmlsZS5wYXRoLmlzRXh0ZXJuYWwoIGhyZWYgKSAmJiAhJC5tb2JpbGUucGF0aC5pc1Blcm1pdHRlZENyb3NzRG9tYWluUmVxdWVzdCggZG9jdW1lbnRVcmwsIGhyZWYgKSApO1xyXG5cclxuXHRcdFx0aWYgKCBpc0V4dGVybmFsICkge1xyXG5cdFx0XHRcdGh0dHBDbGVhbnVwKCk7XHJcblx0XHRcdFx0Ly91c2UgZGVmYXVsdCBjbGljayBoYW5kbGluZ1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly91c2UgYWpheFxyXG5cdFx0XHR0cmFuc2l0aW9uID0gJGxpbmsuanFtRGF0YSggXCJ0cmFuc2l0aW9uXCIgKTtcclxuXHRcdFx0cmV2ZXJzZSA9ICRsaW5rLmpxbURhdGEoIFwiZGlyZWN0aW9uXCIgKSA9PT0gXCJyZXZlcnNlXCIgfHxcclxuXHRcdFx0XHRcdFx0Ly8gZGVwcmVjYXRlZCAtIHJlbW92ZSBieSAxLjBcclxuXHRcdFx0XHRcdFx0JGxpbmsuanFtRGF0YSggXCJiYWNrXCIgKTtcclxuXHJcblx0XHRcdC8vdGhpcyBtYXkgbmVlZCB0byBiZSBtb3JlIHNwZWNpZmljIGFzIHdlIHVzZSBkYXRhLXJlbCBtb3JlXHJcblx0XHRcdHJvbGUgPSAkbGluay5hdHRyKCBcImRhdGEtXCIgKyAkLm1vYmlsZS5ucyArIFwicmVsXCIgKSB8fCB1bmRlZmluZWQ7XHJcblxyXG5cdFx0XHQkLm1vYmlsZS5jaGFuZ2VQYWdlKCBocmVmLCB7IHRyYW5zaXRpb246IHRyYW5zaXRpb24sIHJldmVyc2U6IHJldmVyc2UsIHJvbGU6IHJvbGUsIGxpbms6ICRsaW5rIH0gKTtcclxuXHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vcHJlZmV0Y2ggcGFnZXMgd2hlbiBhbmNob3JzIHdpdGggZGF0YS1wcmVmZXRjaCBhcmUgZW5jb3VudGVyZWRcclxuXHRcdCQubW9iaWxlLmRvY3VtZW50LmRlbGVnYXRlKCBcIi51aS1wYWdlXCIsIFwicGFnZXNob3cucHJlZmV0Y2hcIiwgZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciB1cmxzID0gW107XHJcblx0XHRcdCQoIHRoaXMgKS5maW5kKCBcImE6anFtRGF0YShwcmVmZXRjaClcIiApLmVhY2goZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0dmFyICRsaW5rID0gJCggdGhpcyApLFxyXG5cdFx0XHRcdFx0dXJsID0gJGxpbmsuYXR0ciggXCJocmVmXCIgKTtcclxuXHJcblx0XHRcdFx0aWYgKCB1cmwgJiYgJC5pbkFycmF5KCB1cmwsIHVybHMgKSA9PT0gLTEgKSB7XHJcblx0XHRcdFx0XHR1cmxzLnB1c2goIHVybCApO1xyXG5cclxuXHRcdFx0XHRcdCQubW9iaWxlLmxvYWRQYWdlKCB1cmwsIHsgcm9sZTogJGxpbmsuYXR0ciggXCJkYXRhLVwiICsgJC5tb2JpbGUubnMgKyBcInJlbFwiICkscHJlZmV0Y2g6IHRydWUgfSApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBUT0RPIGVuc3VyZSB0aGF0IHRoZSBuYXZpZ2F0ZSBiaW5kaW5nIGluIHRoZSBjb250ZW50IHdpZGdldCBoYXBwZW5zIGF0IHRoZSByaWdodCB0aW1lXHJcblx0XHQkLm1vYmlsZS5wYWdlQ29udGFpbmVyLnBhZ2Vjb250YWluZXIoKTtcclxuXHJcblx0XHQvL3NldCBwYWdlIG1pbi1oZWlnaHRzIHRvIGJlIGRldmljZSBzcGVjaWZpY1xyXG5cdFx0JC5tb2JpbGUuZG9jdW1lbnQuYmluZCggXCJwYWdlc2hvd1wiLCBmdW5jdGlvbigpIHtcclxuXHJcblx0XHRcdC8vIFdlIG5lZWQgdG8gd2FpdCBmb3Igd2luZG93LmxvYWQgdG8gbWFrZSBzdXJlIHRoYXQgc3R5bGVzIGhhdmUgYWxyZWFkeSBiZWVuIHJlbmRlcmVkLFxyXG5cdFx0XHQvLyBvdGhlcndpc2UgaGVpZ2h0cyBvZiBleHRlcm5hbCB0b29sYmFycyB3aWxsIGhhdmUgdGhlIHdyb25nIHZhbHVlXHJcblx0XHRcdGlmICggbG9hZERlZmVycmVkICkge1xyXG5cdFx0XHRcdGxvYWREZWZlcnJlZC5kb25lKCAkLm1vYmlsZS5yZXNldEFjdGl2ZVBhZ2VIZWlnaHQgKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQkLm1vYmlsZS5yZXNldEFjdGl2ZVBhZ2VIZWlnaHQoKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0XHQkLm1vYmlsZS53aW5kb3cuYmluZCggXCJ0aHJvdHRsZWRyZXNpemVcIiwgJC5tb2JpbGUucmVzZXRBY3RpdmVQYWdlSGVpZ2h0ICk7XHJcblxyXG5cdH07Ly9uYXZyZWFkeURlZmVycmVkIGRvbmUgY2FsbGJhY2tcclxuXHJcblx0JCggZnVuY3Rpb24oKSB7IGRvbXJlYWR5RGVmZXJyZWQucmVzb2x2ZSgpOyB9ICk7XHJcblxyXG5cdC8vIEFjY291bnQgZm9yIHRoZSBwb3NzaWJpbGl0eSB0aGF0IHRoZSBsb2FkIGV2ZW50IGhhcyBhbHJlYWR5IGZpcmVkXHJcblx0aWYgKCBkb2N1bWVudC5yZWFkeVN0YXRlID09PSBcImNvbXBsZXRlXCIgKSB7XHJcblx0XHRwYWdlSXNGdWxseUxvYWRlZCgpO1xyXG5cdH0gZWxzZSB7XHJcblx0XHQkLm1vYmlsZS53aW5kb3cubG9hZCggcGFnZUlzRnVsbHlMb2FkZWQgKTtcclxuXHR9XHJcblxyXG5cdCQud2hlbiggZG9tcmVhZHlEZWZlcnJlZCwgJC5tb2JpbGUubmF2cmVhZHlEZWZlcnJlZCApLmRvbmUoIGZ1bmN0aW9uKCkgeyAkLm1vYmlsZS5fcmVnaXN0ZXJJbnRlcm5hbEV2ZW50cygpOyB9ICk7XHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcblxyXG4oZnVuY3Rpb24oICQsIHdpbmRvdywgdW5kZWZpbmVkICkge1xyXG5cclxuXHQvLyBUT0RPIHJlbW92ZSBkaXJlY3QgcmVmZXJlbmNlcyB0byAkLm1vYmlsZSBhbmQgcHJvcGVydGllcywgd2Ugc2hvdWxkXHJcblx0Ly8gICAgICBmYXZvciBpbmplY3Rpb24gd2l0aCBwYXJhbXMgdG8gdGhlIGNvbnN0cnVjdG9yXHJcblx0JC5tb2JpbGUuVHJhbnNpdGlvbiA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5pbml0LmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcclxuXHR9O1xyXG5cclxuXHQkLmV4dGVuZCgkLm1vYmlsZS5UcmFuc2l0aW9uLnByb3RvdHlwZSwge1xyXG5cdFx0dG9QcmVDbGFzczogXCIgdWktcGFnZS1wcmUtaW5cIixcclxuXHJcblx0XHRpbml0OiBmdW5jdGlvbiggbmFtZSwgcmV2ZXJzZSwgJHRvLCAkZnJvbSApIHtcclxuXHRcdFx0JC5leHRlbmQodGhpcywge1xyXG5cdFx0XHRcdG5hbWU6IG5hbWUsXHJcblx0XHRcdFx0cmV2ZXJzZTogcmV2ZXJzZSxcclxuXHRcdFx0XHQkdG86ICR0byxcclxuXHRcdFx0XHQkZnJvbTogJGZyb20sXHJcblx0XHRcdFx0ZGVmZXJyZWQ6IG5ldyAkLkRlZmVycmVkKClcclxuXHRcdFx0fSk7XHJcblx0XHR9LFxyXG5cclxuXHRcdGNsZWFuRnJvbTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHRoaXMuJGZyb21cclxuXHRcdFx0XHQucmVtb3ZlQ2xhc3MoICQubW9iaWxlLmFjdGl2ZVBhZ2VDbGFzcyArIFwiIG91dCBpbiByZXZlcnNlIFwiICsgdGhpcy5uYW1lIClcclxuXHRcdFx0XHQuaGVpZ2h0KCBcIlwiICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vIE5PVEUgb3ZlcnJpZGRlbiBieSBjaGlsZCBvYmplY3QgcHJvdG90eXBlcywgbm9vcCdkIGhlcmUgYXMgZGVmYXVsdHNcclxuXHRcdGJlZm9yZURvbmVJbjogZnVuY3Rpb24oKSB7fSxcclxuXHRcdGJlZm9yZURvbmVPdXQ6IGZ1bmN0aW9uKCkge30sXHJcblx0XHRiZWZvcmVTdGFydE91dDogZnVuY3Rpb24oKSB7fSxcclxuXHJcblx0XHRkb25lSW46IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR0aGlzLmJlZm9yZURvbmVJbigpO1xyXG5cclxuXHRcdFx0dGhpcy4kdG8ucmVtb3ZlQ2xhc3MoIFwib3V0IGluIHJldmVyc2UgXCIgKyB0aGlzLm5hbWUgKS5oZWlnaHQoIFwiXCIgKTtcclxuXHJcblx0XHRcdHRoaXMudG9nZ2xlVmlld3BvcnRDbGFzcygpO1xyXG5cclxuXHRcdFx0Ly8gSW4gc29tZSBicm93c2VycyAoaU9TNSksIDNEIHRyYW5zaXRpb25zIGJsb2NrIHRoZSBhYmlsaXR5IHRvIHNjcm9sbCB0byB0aGUgZGVzaXJlZCBsb2NhdGlvbiBkdXJpbmcgdHJhbnNpdGlvblxyXG5cdFx0XHQvLyBUaGlzIGVuc3VyZXMgd2UganVtcCB0byB0aGF0IHNwb3QgYWZ0ZXIgdGhlIGZhY3QsIGlmIHdlIGFyZW4ndCB0aGVyZSBhbHJlYWR5LlxyXG5cdFx0XHRpZiAoICQubW9iaWxlLndpbmRvdy5zY3JvbGxUb3AoKSAhPT0gdGhpcy50b1Njcm9sbCApIHtcclxuXHRcdFx0XHR0aGlzLnNjcm9sbFBhZ2UoKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoICF0aGlzLnNlcXVlbnRpYWwgKSB7XHJcblx0XHRcdFx0dGhpcy4kdG8uYWRkQ2xhc3MoICQubW9iaWxlLmFjdGl2ZVBhZ2VDbGFzcyApO1xyXG5cdFx0XHR9XHJcblx0XHRcdHRoaXMuZGVmZXJyZWQucmVzb2x2ZSggdGhpcy5uYW1lLCB0aGlzLnJldmVyc2UsIHRoaXMuJHRvLCB0aGlzLiRmcm9tLCB0cnVlICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdGRvbmVPdXQ6IGZ1bmN0aW9uKCBzY3JlZW5IZWlnaHQsIHJldmVyc2VDbGFzcywgbm9uZSwgcHJldmVudEZvY3VzICkge1xyXG5cdFx0XHR0aGlzLmJlZm9yZURvbmVPdXQoKTtcclxuXHRcdFx0dGhpcy5zdGFydEluKCBzY3JlZW5IZWlnaHQsIHJldmVyc2VDbGFzcywgbm9uZSwgcHJldmVudEZvY3VzICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdGhpZGVJbjogZnVuY3Rpb24oIGNhbGxiYWNrICkge1xyXG5cdFx0XHQvLyBQcmV2ZW50IGZsaWNrZXJpbmcgaW4gcGhvbmVnYXAgY29udGFpbmVyOiBzZWUgY29tbWVudHMgYXQgIzQwMjQgcmVnYXJkaW5nIGlPU1xyXG5cdFx0XHR0aGlzLiR0by5jc3MoIFwiei1pbmRleFwiLCAtMTAgKTtcclxuXHRcdFx0Y2FsbGJhY2suY2FsbCggdGhpcyApO1xyXG5cdFx0XHR0aGlzLiR0by5jc3MoIFwiei1pbmRleFwiLCBcIlwiICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdHNjcm9sbFBhZ2U6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHQvLyBCeSB1c2luZyBzY3JvbGxUbyBpbnN0ZWFkIG9mIHNpbGVudFNjcm9sbCwgd2UgY2FuIGtlZXAgdGhpbmdzIGJldHRlciBpbiBvcmRlclxyXG5cdFx0XHQvLyBKdXN0IHRvIGJlIHByZWNhdXRpb3MsIGRpc2FibGUgc2Nyb2xsc3RhcnQgbGlzdGVuaW5nIGxpa2Ugc2lsZW50U2Nyb2xsIHdvdWxkXHJcblx0XHRcdCQuZXZlbnQuc3BlY2lhbC5zY3JvbGxzdGFydC5lbmFibGVkID0gZmFsc2U7XHJcblx0XHRcdC8vaWYgd2UgYXJlIGhpZGluZyB0aGUgdXJsIGJhciBvciB0aGUgcGFnZSB3YXMgcHJldmlvdXNseSBzY3JvbGxlZCBzY3JvbGwgdG8gaGlkZSBvciByZXR1cm4gdG8gcG9zaXRpb25cclxuXHRcdFx0aWYgKCAkLm1vYmlsZS5oaWRlVXJsQmFyIHx8IHRoaXMudG9TY3JvbGwgIT09ICQubW9iaWxlLmRlZmF1bHRIb21lU2Nyb2xsICkge1xyXG5cdFx0XHRcdHdpbmRvdy5zY3JvbGxUbyggMCwgdGhpcy50b1Njcm9sbCApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyByZWVuYWJsZSBzY3JvbGxzdGFydCBsaXN0ZW5pbmcgbGlrZSBzaWxlbnRTY3JvbGwgd291bGRcclxuXHRcdFx0c2V0VGltZW91dCggZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0JC5ldmVudC5zcGVjaWFsLnNjcm9sbHN0YXJ0LmVuYWJsZWQgPSB0cnVlO1xyXG5cdFx0XHR9LCAxNTAgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0c3RhcnRJbjogZnVuY3Rpb24oIHNjcmVlbkhlaWdodCwgcmV2ZXJzZUNsYXNzLCBub25lLCBwcmV2ZW50Rm9jdXMgKSB7XHJcblx0XHRcdHRoaXMuaGlkZUluKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHRoaXMuJHRvLmFkZENsYXNzKCAkLm1vYmlsZS5hY3RpdmVQYWdlQ2xhc3MgKyB0aGlzLnRvUHJlQ2xhc3MgKTtcclxuXHJcblx0XHRcdFx0Ly8gU2VuZCBmb2N1cyB0byBwYWdlIGFzIGl0IGlzIG5vdyBkaXNwbGF5OiBibG9ja1xyXG5cdFx0XHRcdGlmICggIXByZXZlbnRGb2N1cyApIHtcclxuXHRcdFx0XHRcdCQubW9iaWxlLmZvY3VzUGFnZSggdGhpcy4kdG8gKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vIFNldCB0byBwYWdlIGhlaWdodFxyXG5cdFx0XHRcdHRoaXMuJHRvLmhlaWdodCggc2NyZWVuSGVpZ2h0ICsgdGhpcy50b1Njcm9sbCApO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICggIW5vbmUgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxQYWdlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0dGhpcy4kdG9cclxuXHRcdFx0XHQucmVtb3ZlQ2xhc3MoIHRoaXMudG9QcmVDbGFzcyApXHJcblx0XHRcdFx0LmFkZENsYXNzKCB0aGlzLm5hbWUgKyBcIiBpbiBcIiArIHJldmVyc2VDbGFzcyApO1xyXG5cclxuXHRcdFx0aWYgKCAhbm9uZSApIHtcclxuXHRcdFx0XHR0aGlzLiR0by5hbmltYXRpb25Db21wbGV0ZSggJC5wcm94eShmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdHRoaXMuZG9uZUluKCk7XHJcblx0XHRcdFx0fSwgdGhpcyApKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHR0aGlzLmRvbmVJbigpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0fSxcclxuXHJcblx0XHRzdGFydE91dDogZnVuY3Rpb24oIHNjcmVlbkhlaWdodCwgcmV2ZXJzZUNsYXNzLCBub25lICkge1xyXG5cdFx0XHR0aGlzLmJlZm9yZVN0YXJ0T3V0KCBzY3JlZW5IZWlnaHQsIHJldmVyc2VDbGFzcywgbm9uZSApO1xyXG5cclxuXHRcdFx0Ly8gU2V0IHRoZSBmcm9tIHBhZ2UncyBoZWlnaHQgYW5kIHN0YXJ0IGl0IHRyYW5zaXRpb25pbmcgb3V0XHJcblx0XHRcdC8vIE5vdGU6IHNldHRpbmcgYW4gZXhwbGljaXQgaGVpZ2h0IGhlbHBzIGVsaW1pbmF0ZSB0aWxpbmcgaW4gdGhlIHRyYW5zaXRpb25zXHJcblx0XHRcdHRoaXMuJGZyb21cclxuXHRcdFx0XHQuaGVpZ2h0KCBzY3JlZW5IZWlnaHQgKyAkLm1vYmlsZS53aW5kb3cuc2Nyb2xsVG9wKCkgKVxyXG5cdFx0XHRcdC5hZGRDbGFzcyggdGhpcy5uYW1lICsgXCIgb3V0XCIgKyByZXZlcnNlQ2xhc3MgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0dG9nZ2xlVmlld3BvcnRDbGFzczogZnVuY3Rpb24oKSB7XHJcblx0XHRcdCQubW9iaWxlLnBhZ2VDb250YWluZXIudG9nZ2xlQ2xhc3MoIFwidWktbW9iaWxlLXZpZXdwb3J0LXRyYW5zaXRpb25pbmcgdmlld3BvcnQtXCIgKyB0aGlzLm5hbWUgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0dHJhbnNpdGlvbjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdC8vIE5PVEUgbWFueSBvZiB0aGVzZSBjb3VsZCBiZSBjYWxjdWxhdGVkL3JlY29yZGVkIGluIHRoZSBjb25zdHJ1Y3RvciwgaXQncyBteVxyXG5cdFx0XHQvLyAgICAgIG9waW5pb24gdGhhdCBiaW5kaW5nIHRoZW0gYXMgbGF0ZSBhcyBwb3NzaWJsZSBoYXMgdmFsdWUgd2l0aCByZWdhcmRzIHRvXHJcblx0XHRcdC8vICAgICAgYmV0dGVyIHRyYW5zaXRpb25zIHdpdGggZmV3ZXIgYnVncy4gSWUsIGl0J3Mgbm90IGd1YXJhbnRlZWQgdGhhdCB0aGVcclxuXHRcdFx0Ly8gICAgICBvYmplY3Qgd2lsbCBiZSBjcmVhdGVkIGFuZCB0cmFuc2l0aW9uIHdpbGwgYmUgcnVuIGltbWVkaWF0ZWx5IGFmdGVyIGFzXHJcblx0XHRcdC8vICAgICAgaXQgaXMgdG9kYXkuIFNvIHdlIHdhaXQgdW50aWwgdHJhbnNpdGlvbiBpcyBpbnZva2VkIHRvIGdhdGhlciB0aGUgZm9sbG93aW5nXHJcblx0XHRcdHZhciBub25lLFxyXG5cdFx0XHRcdHJldmVyc2VDbGFzcyA9IHRoaXMucmV2ZXJzZSA/IFwiIHJldmVyc2VcIiA6IFwiXCIsXHJcblx0XHRcdFx0c2NyZWVuSGVpZ2h0ID0gJC5tb2JpbGUuZ2V0U2NyZWVuSGVpZ2h0KCksXHJcblx0XHRcdFx0bWF4VHJhbnNpdGlvbk92ZXJyaWRlID0gJC5tb2JpbGUubWF4VHJhbnNpdGlvbldpZHRoICE9PSBmYWxzZSAmJlxyXG5cdFx0XHRcdFx0JC5tb2JpbGUud2luZG93LndpZHRoKCkgPiAkLm1vYmlsZS5tYXhUcmFuc2l0aW9uV2lkdGg7XHJcblxyXG5cdFx0XHR0aGlzLnRvU2Nyb2xsID0gJC5tb2JpbGUubmF2aWdhdGUuaGlzdG9yeS5nZXRBY3RpdmUoKS5sYXN0U2Nyb2xsIHx8ICQubW9iaWxlLmRlZmF1bHRIb21lU2Nyb2xsO1xyXG5cclxuXHRcdFx0bm9uZSA9ICEkLnN1cHBvcnQuY3NzVHJhbnNpdGlvbnMgfHwgISQuc3VwcG9ydC5jc3NBbmltYXRpb25zIHx8XHJcblx0XHRcdFx0bWF4VHJhbnNpdGlvbk92ZXJyaWRlIHx8ICF0aGlzLm5hbWUgfHwgdGhpcy5uYW1lID09PSBcIm5vbmVcIiB8fFxyXG5cdFx0XHRcdE1hdGgubWF4KCAkLm1vYmlsZS53aW5kb3cuc2Nyb2xsVG9wKCksIHRoaXMudG9TY3JvbGwgKSA+XHJcblx0XHRcdFx0XHQkLm1vYmlsZS5nZXRNYXhTY3JvbGxGb3JUcmFuc2l0aW9uKCk7XHJcblxyXG5cdFx0XHR0aGlzLnRvZ2dsZVZpZXdwb3J0Q2xhc3MoKTtcclxuXHJcblx0XHRcdGlmICggdGhpcy4kZnJvbSAmJiAhbm9uZSApIHtcclxuXHRcdFx0XHR0aGlzLnN0YXJ0T3V0KCBzY3JlZW5IZWlnaHQsIHJldmVyc2VDbGFzcywgbm9uZSApO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHRoaXMuZG9uZU91dCggc2NyZWVuSGVpZ2h0LCByZXZlcnNlQ2xhc3MsIG5vbmUsIHRydWUgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0cmV0dXJuIHRoaXMuZGVmZXJyZWQucHJvbWlzZSgpO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG59KSggalF1ZXJ5LCB0aGlzICk7XHJcblxyXG5cclxuKGZ1bmN0aW9uKCAkICkge1xyXG5cclxuXHQkLm1vYmlsZS5TZXJpYWxUcmFuc2l0aW9uID0gZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLmluaXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxuXHR9O1xyXG5cclxuXHQkLmV4dGVuZCgkLm1vYmlsZS5TZXJpYWxUcmFuc2l0aW9uLnByb3RvdHlwZSwgJC5tb2JpbGUuVHJhbnNpdGlvbi5wcm90b3R5cGUsIHtcclxuXHRcdHNlcXVlbnRpYWw6IHRydWUsXHJcblxyXG5cdFx0YmVmb3JlRG9uZU91dDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdGlmICggdGhpcy4kZnJvbSApIHtcclxuXHRcdFx0XHR0aGlzLmNsZWFuRnJvbSgpO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHRcdGJlZm9yZVN0YXJ0T3V0OiBmdW5jdGlvbiggc2NyZWVuSGVpZ2h0LCByZXZlcnNlQ2xhc3MsIG5vbmUgKSB7XHJcblx0XHRcdHRoaXMuJGZyb20uYW5pbWF0aW9uQ29tcGxldGUoJC5wcm94eShmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR0aGlzLmRvbmVPdXQoIHNjcmVlbkhlaWdodCwgcmV2ZXJzZUNsYXNzLCBub25lICk7XHJcblx0XHRcdH0sIHRoaXMgKSk7XHJcblx0XHR9XHJcblx0fSk7XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG5cclxuKGZ1bmN0aW9uKCAkICkge1xyXG5cclxuXHQkLm1vYmlsZS5Db25jdXJyZW50VHJhbnNpdGlvbiA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5pbml0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcblx0fTtcclxuXHJcblx0JC5leHRlbmQoJC5tb2JpbGUuQ29uY3VycmVudFRyYW5zaXRpb24ucHJvdG90eXBlLCAkLm1vYmlsZS5UcmFuc2l0aW9uLnByb3RvdHlwZSwge1xyXG5cdFx0c2VxdWVudGlhbDogZmFsc2UsXHJcblxyXG5cdFx0YmVmb3JlRG9uZUluOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0aWYgKCB0aGlzLiRmcm9tICkge1xyXG5cdFx0XHRcdHRoaXMuY2xlYW5Gcm9tKCk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblxyXG5cdFx0YmVmb3JlU3RhcnRPdXQ6IGZ1bmN0aW9uKCBzY3JlZW5IZWlnaHQsIHJldmVyc2VDbGFzcywgbm9uZSApIHtcclxuXHRcdFx0dGhpcy5kb25lT3V0KCBzY3JlZW5IZWlnaHQsIHJldmVyc2VDbGFzcywgbm9uZSApO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuXHJcbihmdW5jdGlvbiggJCApIHtcclxuXHJcblx0Ly8gZ2VuZXJhdGUgdGhlIGhhbmRsZXJzIGZyb20gdGhlIGFib3ZlXHJcblx0dmFyIGRlZmF1bHRHZXRNYXhTY3JvbGxGb3JUcmFuc2l0aW9uID0gZnVuY3Rpb24oKSB7XHJcblx0XHRyZXR1cm4gJC5tb2JpbGUuZ2V0U2NyZWVuSGVpZ2h0KCkgKiAzO1xyXG5cdH07XHJcblxyXG5cdC8vdHJhbnNpdGlvbiBoYW5kbGVyIGRpY3Rpb25hcnkgZm9yIDNyZCBwYXJ0eSB0cmFuc2l0aW9uc1xyXG5cdCQubW9iaWxlLnRyYW5zaXRpb25IYW5kbGVycyA9IHtcclxuXHRcdFwic2VxdWVudGlhbFwiOiAkLm1vYmlsZS5TZXJpYWxUcmFuc2l0aW9uLFxyXG5cdFx0XCJzaW11bHRhbmVvdXNcIjogJC5tb2JpbGUuQ29uY3VycmVudFRyYW5zaXRpb25cclxuXHR9O1xyXG5cclxuXHQvLyBNYWtlIG91ciB0cmFuc2l0aW9uIGhhbmRsZXIgdGhlIHB1YmxpYyBkZWZhdWx0LlxyXG5cdCQubW9iaWxlLmRlZmF1bHRUcmFuc2l0aW9uSGFuZGxlciA9ICQubW9iaWxlLnRyYW5zaXRpb25IYW5kbGVycy5zZXF1ZW50aWFsO1xyXG5cclxuXHQkLm1vYmlsZS50cmFuc2l0aW9uRmFsbGJhY2tzID0ge307XHJcblxyXG5cdC8vIElmIHRyYW5zaXRpb24gaXMgZGVmaW5lZCwgY2hlY2sgaWYgY3NzIDNEIHRyYW5zZm9ybXMgYXJlIHN1cHBvcnRlZCwgYW5kIGlmIG5vdCwgaWYgYSBmYWxsYmFjayBpcyBzcGVjaWZpZWRcclxuXHQkLm1vYmlsZS5fbWF5YmVEZWdyYWRlVHJhbnNpdGlvbiA9IGZ1bmN0aW9uKCB0cmFuc2l0aW9uICkge1xyXG5cdFx0aWYgKCB0cmFuc2l0aW9uICYmICEkLnN1cHBvcnQuY3NzVHJhbnNmb3JtM2QgJiYgJC5tb2JpbGUudHJhbnNpdGlvbkZhbGxiYWNrc1sgdHJhbnNpdGlvbiBdICkge1xyXG5cdFx0XHR0cmFuc2l0aW9uID0gJC5tb2JpbGUudHJhbnNpdGlvbkZhbGxiYWNrc1sgdHJhbnNpdGlvbiBdO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB0cmFuc2l0aW9uO1xyXG5cdH07XHJcblxyXG5cdC8vIFNldCB0aGUgZ2V0TWF4U2Nyb2xsRm9yVHJhbnNpdGlvbiB0byBkZWZhdWx0IGlmIG5vIGltcGxlbWVudGF0aW9uIHdhcyBzZXQgYnkgdXNlclxyXG5cdCQubW9iaWxlLmdldE1heFNjcm9sbEZvclRyYW5zaXRpb24gPSAkLm1vYmlsZS5nZXRNYXhTY3JvbGxGb3JUcmFuc2l0aW9uIHx8IGRlZmF1bHRHZXRNYXhTY3JvbGxGb3JUcmFuc2l0aW9uO1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuLypcclxuKiBmYWxsYmFjayB0cmFuc2l0aW9uIGZvciBmbGlwIGluIG5vbi0zRCBzdXBwb3J0aW5nIGJyb3dzZXJzICh3aGljaCB0ZW5kIHRvIGhhbmRsZSBjb21wbGV4IHRyYW5zaXRpb25zIHBvb3JseSBpbiBnZW5lcmFsXHJcbiovXHJcblxyXG4oZnVuY3Rpb24oICQsIHdpbmRvdywgdW5kZWZpbmVkICkge1xyXG5cclxuJC5tb2JpbGUudHJhbnNpdGlvbkZhbGxiYWNrcy5mbGlwID0gXCJmYWRlXCI7XHJcblxyXG59KSggalF1ZXJ5LCB0aGlzICk7XHJcblxyXG4vKlxyXG4qIGZhbGxiYWNrIHRyYW5zaXRpb24gZm9yIGZsb3cgaW4gbm9uLTNEIHN1cHBvcnRpbmcgYnJvd3NlcnMgKHdoaWNoIHRlbmQgdG8gaGFuZGxlIGNvbXBsZXggdHJhbnNpdGlvbnMgcG9vcmx5IGluIGdlbmVyYWxcclxuKi9cclxuXHJcbihmdW5jdGlvbiggJCwgd2luZG93LCB1bmRlZmluZWQgKSB7XHJcblxyXG4kLm1vYmlsZS50cmFuc2l0aW9uRmFsbGJhY2tzLmZsb3cgPSBcImZhZGVcIjtcclxuXHJcbn0pKCBqUXVlcnksIHRoaXMgKTtcclxuXHJcbi8qXHJcbiogZmFsbGJhY2sgdHJhbnNpdGlvbiBmb3IgcG9wIGluIG5vbi0zRCBzdXBwb3J0aW5nIGJyb3dzZXJzICh3aGljaCB0ZW5kIHRvIGhhbmRsZSBjb21wbGV4IHRyYW5zaXRpb25zIHBvb3JseSBpbiBnZW5lcmFsXHJcbiovXHJcblxyXG4oZnVuY3Rpb24oICQsIHdpbmRvdywgdW5kZWZpbmVkICkge1xyXG5cclxuJC5tb2JpbGUudHJhbnNpdGlvbkZhbGxiYWNrcy5wb3AgPSBcImZhZGVcIjtcclxuXHJcbn0pKCBqUXVlcnksIHRoaXMgKTtcclxuXHJcbi8qXHJcbiogZmFsbGJhY2sgdHJhbnNpdGlvbiBmb3Igc2xpZGUgaW4gbm9uLTNEIHN1cHBvcnRpbmcgYnJvd3NlcnMgKHdoaWNoIHRlbmQgdG8gaGFuZGxlIGNvbXBsZXggdHJhbnNpdGlvbnMgcG9vcmx5IGluIGdlbmVyYWxcclxuKi9cclxuXHJcbihmdW5jdGlvbiggJCwgd2luZG93LCB1bmRlZmluZWQgKSB7XHJcblxyXG4vLyBVc2UgdGhlIHNpbXVsdGFuZW91cyB0cmFuc2l0aW9ucyBoYW5kbGVyIGZvciBzbGlkZSB0cmFuc2l0aW9uc1xyXG4kLm1vYmlsZS50cmFuc2l0aW9uSGFuZGxlcnMuc2xpZGUgPSAkLm1vYmlsZS50cmFuc2l0aW9uSGFuZGxlcnMuc2ltdWx0YW5lb3VzO1xyXG5cclxuLy8gU2V0IHRoZSBzbGlkZSB0cmFuc2l0aW9ucydzIGZhbGxiYWNrIHRvIFwiZmFkZVwiXHJcbiQubW9iaWxlLnRyYW5zaXRpb25GYWxsYmFja3Muc2xpZGUgPSBcImZhZGVcIjtcclxuXHJcbn0pKCBqUXVlcnksIHRoaXMgKTtcclxuXHJcbi8qXHJcbiogZmFsbGJhY2sgdHJhbnNpdGlvbiBmb3Igc2xpZGVkb3duIGluIG5vbi0zRCBzdXBwb3J0aW5nIGJyb3dzZXJzICh3aGljaCB0ZW5kIHRvIGhhbmRsZSBjb21wbGV4IHRyYW5zaXRpb25zIHBvb3JseSBpbiBnZW5lcmFsXHJcbiovXHJcblxyXG4oZnVuY3Rpb24oICQsIHdpbmRvdywgdW5kZWZpbmVkICkge1xyXG5cclxuJC5tb2JpbGUudHJhbnNpdGlvbkZhbGxiYWNrcy5zbGlkZWRvd24gPSBcImZhZGVcIjtcclxuXHJcbn0pKCBqUXVlcnksIHRoaXMgKTtcclxuXHJcbi8qXHJcbiogZmFsbGJhY2sgdHJhbnNpdGlvbiBmb3Igc2xpZGVmYWRlIGluIG5vbi0zRCBzdXBwb3J0aW5nIGJyb3dzZXJzICh3aGljaCB0ZW5kIHRvIGhhbmRsZSBjb21wbGV4IHRyYW5zaXRpb25zIHBvb3JseSBpbiBnZW5lcmFsXHJcbiovXHJcblxyXG4oZnVuY3Rpb24oICQsIHdpbmRvdywgdW5kZWZpbmVkICkge1xyXG5cclxuLy8gU2V0IHRoZSBzbGlkZSB0cmFuc2l0aW9ucydzIGZhbGxiYWNrIHRvIFwiZmFkZVwiXHJcbiQubW9iaWxlLnRyYW5zaXRpb25GYWxsYmFja3Muc2xpZGVmYWRlID0gXCJmYWRlXCI7XHJcblxyXG59KSggalF1ZXJ5LCB0aGlzICk7XHJcblxyXG4vKlxyXG4qIGZhbGxiYWNrIHRyYW5zaXRpb24gZm9yIHNsaWRldXAgaW4gbm9uLTNEIHN1cHBvcnRpbmcgYnJvd3NlcnMgKHdoaWNoIHRlbmQgdG8gaGFuZGxlIGNvbXBsZXggdHJhbnNpdGlvbnMgcG9vcmx5IGluIGdlbmVyYWxcclxuKi9cclxuXHJcbihmdW5jdGlvbiggJCwgd2luZG93LCB1bmRlZmluZWQgKSB7XHJcblxyXG4kLm1vYmlsZS50cmFuc2l0aW9uRmFsbGJhY2tzLnNsaWRldXAgPSBcImZhZGVcIjtcclxuXHJcbn0pKCBqUXVlcnksIHRoaXMgKTtcclxuXHJcbi8qXHJcbiogZmFsbGJhY2sgdHJhbnNpdGlvbiBmb3IgdHVybiBpbiBub24tM0Qgc3VwcG9ydGluZyBicm93c2VycyAod2hpY2ggdGVuZCB0byBoYW5kbGUgY29tcGxleCB0cmFuc2l0aW9ucyBwb29ybHkgaW4gZ2VuZXJhbFxyXG4qL1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB3aW5kb3csIHVuZGVmaW5lZCApIHtcclxuXHJcbiQubW9iaWxlLnRyYW5zaXRpb25GYWxsYmFja3MudHVybiA9IFwiZmFkZVwiO1xyXG5cclxufSkoIGpRdWVyeSwgdGhpcyApO1xyXG5cclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxuJC5tb2JpbGUuZGVncmFkZUlucHV0cyA9IHtcclxuXHRjb2xvcjogZmFsc2UsXHJcblx0ZGF0ZTogZmFsc2UsXHJcblx0ZGF0ZXRpbWU6IGZhbHNlLFxyXG5cdFwiZGF0ZXRpbWUtbG9jYWxcIjogZmFsc2UsXHJcblx0ZW1haWw6IGZhbHNlLFxyXG5cdG1vbnRoOiBmYWxzZSxcclxuXHRudW1iZXI6IGZhbHNlLFxyXG5cdHJhbmdlOiBcIm51bWJlclwiLFxyXG5cdHNlYXJjaDogXCJ0ZXh0XCIsXHJcblx0dGVsOiBmYWxzZSxcclxuXHR0aW1lOiBmYWxzZSxcclxuXHR1cmw6IGZhbHNlLFxyXG5cdHdlZWs6IGZhbHNlXHJcbn07XHJcbi8vIEJhY2tjb21wYXQgcmVtb3ZlIGluIDEuNVxyXG4kLm1vYmlsZS5wYWdlLnByb3RvdHlwZS5vcHRpb25zLmRlZ3JhZGVJbnB1dHMgPSAkLm1vYmlsZS5kZWdyYWRlSW5wdXRzO1xyXG5cclxuLy8gQXV0byBzZWxmLWluaXQgd2lkZ2V0c1xyXG4kLm1vYmlsZS5kZWdyYWRlSW5wdXRzV2l0aGluID0gZnVuY3Rpb24oIHRhcmdldCApIHtcclxuXHJcblx0dGFyZ2V0ID0gJCggdGFyZ2V0ICk7XHJcblxyXG5cdC8vIERlZ3JhZGUgaW5wdXRzIHRvIGF2b2lkIHBvb3JseSBpbXBsZW1lbnRlZCBuYXRpdmUgZnVuY3Rpb25hbGl0eVxyXG5cdHRhcmdldC5maW5kKCBcImlucHV0XCIgKS5ub3QoICQubW9iaWxlLnBhZ2UucHJvdG90eXBlLmtlZXBOYXRpdmVTZWxlY3RvcigpICkuZWFjaChmdW5jdGlvbigpIHtcclxuXHRcdHZhciBlbGVtZW50ID0gJCggdGhpcyApLFxyXG5cdFx0XHR0eXBlID0gdGhpcy5nZXRBdHRyaWJ1dGUoIFwidHlwZVwiICksXHJcblx0XHRcdG9wdFR5cGUgPSAkLm1vYmlsZS5kZWdyYWRlSW5wdXRzWyB0eXBlIF0gfHwgXCJ0ZXh0XCIsXHJcblx0XHRcdGh0bWwsIGhhc1R5cGUsIGZpbmRzdHIsIHJlcHN0cjtcclxuXHJcblx0XHRpZiAoICQubW9iaWxlLmRlZ3JhZGVJbnB1dHNbIHR5cGUgXSApIHtcclxuXHRcdFx0aHRtbCA9ICQoIFwiPGRpdj5cIiApLmh0bWwoIGVsZW1lbnQuY2xvbmUoKSApLmh0bWwoKTtcclxuXHRcdFx0Ly8gSW4gSUUgYnJvd3NlcnMsIHRoZSB0eXBlIHNvbWV0aW1lcyBkb2Vzbid0IGV4aXN0IGluIHRoZSBjbG9uZWQgbWFya3VwLCBzbyB3ZSByZXBsYWNlIHRoZSBjbG9zaW5nIHRhZyBpbnN0ZWFkXHJcblx0XHRcdGhhc1R5cGUgPSBodG1sLmluZGV4T2YoIFwiIHR5cGU9XCIgKSA+IC0xO1xyXG5cdFx0XHRmaW5kc3RyID0gaGFzVHlwZSA/IC9cXHMrdHlwZT1bXCInXT9cXHcrWydcIl0/LyA6IC9cXC8/Pi87XHJcblx0XHRcdHJlcHN0ciA9IFwiIHR5cGU9XFxcIlwiICsgb3B0VHlwZSArIFwiXFxcIiBkYXRhLVwiICsgJC5tb2JpbGUubnMgKyBcInR5cGU9XFxcIlwiICsgdHlwZSArIFwiXFxcIlwiICsgKCBoYXNUeXBlID8gXCJcIiA6IFwiPlwiICk7XHJcblxyXG5cdFx0XHRlbGVtZW50LnJlcGxhY2VXaXRoKCBodG1sLnJlcGxhY2UoIGZpbmRzdHIsIHJlcHN0ciApICk7XHJcblx0XHR9XHJcblx0fSk7XHJcblxyXG59O1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB3aW5kb3csIHVuZGVmaW5lZCApIHtcclxuXHJcbiQud2lkZ2V0KCBcIm1vYmlsZS5wYWdlXCIsICQubW9iaWxlLnBhZ2UsIHtcclxuXHRvcHRpb25zOiB7XHJcblxyXG5cdFx0Ly8gQWNjZXB0cyBsZWZ0LCByaWdodCBhbmQgbm9uZVxyXG5cdFx0Y2xvc2VCdG46IFwibGVmdFwiLFxyXG5cdFx0Y2xvc2VCdG5UZXh0OiBcIkNsb3NlXCIsXHJcblx0XHRvdmVybGF5VGhlbWU6IFwiYVwiLFxyXG5cdFx0Y29ybmVyczogdHJ1ZSxcclxuXHRcdGRpYWxvZzogZmFsc2VcclxuXHR9LFxyXG5cclxuXHRfY3JlYXRlOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX3N1cGVyKCk7XHJcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5kaWFsb2cgKSB7XHJcblxyXG5cdFx0XHQkLmV4dGVuZCggdGhpcywge1xyXG5cdFx0XHRcdF9pbm5lcjogdGhpcy5lbGVtZW50LmNoaWxkcmVuKCksXHJcblx0XHRcdFx0X2hlYWRlckNsb3NlQnV0dG9uOiBudWxsXHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0aWYgKCAhdGhpcy5vcHRpb25zLmVuaGFuY2VkICkge1xyXG5cdFx0XHRcdHRoaXMuX3NldENsb3NlQnRuKCB0aGlzLm9wdGlvbnMuY2xvc2VCdG4gKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9lbmhhbmNlOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX3N1cGVyKCk7XHJcblxyXG5cdFx0Ly8gQ2xhc3MgdGhlIG1hcmt1cCBmb3IgZGlhbG9nIHN0eWxpbmcgYW5kIHdyYXAgaW50ZXJpb3JcclxuXHRcdGlmICggdGhpcy5vcHRpb25zLmRpYWxvZyApIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50LmFkZENsYXNzKCBcInVpLWRpYWxvZ1wiIClcclxuXHRcdFx0XHQud3JhcElubmVyKCAkKCBcIjxkaXYvPlwiLCB7XHJcblxyXG5cdFx0XHRcdFx0Ly8gQVJJQSByb2xlXHJcblx0XHRcdFx0XHRcInJvbGVcIiA6IFwiZGlhbG9nXCIsXHJcblx0XHRcdFx0XHRcImNsYXNzXCIgOiBcInVpLWRpYWxvZy1jb250YWluIHVpLW92ZXJsYXktc2hhZG93XCIgK1xyXG5cdFx0XHRcdFx0XHQoIHRoaXMub3B0aW9ucy5jb3JuZXJzID8gXCIgdWktY29ybmVyLWFsbFwiIDogXCJcIiApXHJcblx0XHRcdFx0fSkpO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9zZXRPcHRpb25zOiBmdW5jdGlvbiggb3B0aW9ucyApIHtcclxuXHRcdHZhciBjbG9zZUJ1dHRvbkxvY2F0aW9uLCBjbG9zZUJ1dHRvblRleHQsXHJcblx0XHRcdGN1cnJlbnRPcHRzID0gdGhpcy5vcHRpb25zO1xyXG5cclxuXHRcdGlmICggb3B0aW9ucy5jb3JuZXJzICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdHRoaXMuX2lubmVyLnRvZ2dsZUNsYXNzKCBcInVpLWNvcm5lci1hbGxcIiwgISFvcHRpb25zLmNvcm5lcnMgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG9wdGlvbnMub3ZlcmxheVRoZW1lICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdGlmICggJC5tb2JpbGUuYWN0aXZlUGFnZVsgMCBdID09PSB0aGlzLmVsZW1lbnRbIDAgXSApIHtcclxuXHRcdFx0XHRjdXJyZW50T3B0cy5vdmVybGF5VGhlbWUgPSBvcHRpb25zLm92ZXJsYXlUaGVtZTtcclxuXHRcdFx0XHR0aGlzLl9oYW5kbGVQYWdlQmVmb3JlU2hvdygpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBvcHRpb25zLmNsb3NlQnRuVGV4dCAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRjbG9zZUJ1dHRvbkxvY2F0aW9uID0gY3VycmVudE9wdHMuY2xvc2VCdG47XHJcblx0XHRcdGNsb3NlQnV0dG9uVGV4dCA9IG9wdGlvbnMuY2xvc2VCdG5UZXh0O1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggb3B0aW9ucy5jbG9zZUJ0biAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRjbG9zZUJ1dHRvbkxvY2F0aW9uID0gb3B0aW9ucy5jbG9zZUJ0bjtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIGNsb3NlQnV0dG9uTG9jYXRpb24gKSB7XHJcblx0XHRcdHRoaXMuX3NldENsb3NlQnRuKCBjbG9zZUJ1dHRvbkxvY2F0aW9uLCBjbG9zZUJ1dHRvblRleHQgKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl9zdXBlciggb3B0aW9ucyApO1xyXG5cdH0sXHJcblxyXG5cdF9oYW5kbGVQYWdlQmVmb3JlU2hvdzogZnVuY3Rpb24gKCkge1xyXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMub3ZlcmxheVRoZW1lICYmIHRoaXMub3B0aW9ucy5kaWFsb2cgKSB7XHJcblx0XHRcdHRoaXMucmVtb3ZlQ29udGFpbmVyQmFja2dyb3VuZCgpO1xyXG5cdFx0XHR0aGlzLnNldENvbnRhaW5lckJhY2tncm91bmQoIHRoaXMub3B0aW9ucy5vdmVybGF5VGhlbWUgKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRoaXMuX3N1cGVyKCk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X3NldENsb3NlQnRuOiBmdW5jdGlvbiggbG9jYXRpb24sIHRleHQgKSB7XHJcblx0XHR2YXIgZHN0LFxyXG5cdFx0XHRidG4gPSB0aGlzLl9oZWFkZXJDbG9zZUJ1dHRvbjtcclxuXHJcblx0XHQvLyBTYW5pdGl6ZSB2YWx1ZVxyXG5cdFx0bG9jYXRpb24gPSBcImxlZnRcIiA9PT0gbG9jYXRpb24gPyBcImxlZnRcIiA6IFwicmlnaHRcIiA9PT0gbG9jYXRpb24gPyBcInJpZ2h0XCIgOiBcIm5vbmVcIjtcclxuXHJcblx0XHRpZiAoIFwibm9uZVwiID09PSBsb2NhdGlvbiApIHtcclxuXHRcdFx0aWYgKCBidG4gKSB7XHJcblx0XHRcdFx0YnRuLnJlbW92ZSgpO1xyXG5cdFx0XHRcdGJ0biA9IG51bGw7XHJcblx0XHRcdH1cclxuXHRcdH0gZWxzZSBpZiAoIGJ0biApIHtcclxuXHRcdFx0YnRuLnJlbW92ZUNsYXNzKCBcInVpLWJ0bi1sZWZ0IHVpLWJ0bi1yaWdodFwiICkuYWRkQ2xhc3MoIFwidWktYnRuLVwiICsgbG9jYXRpb24gKTtcclxuXHRcdFx0aWYgKCB0ZXh0ICkge1xyXG5cdFx0XHRcdGJ0bi50ZXh0KCB0ZXh0ICk7XHJcblx0XHRcdH1cclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGRzdCA9IHRoaXMuX2lubmVyLmZpbmQoIFwiOmpxbURhdGEocm9sZT0naGVhZGVyJylcIiApLmZpcnN0KCk7XHJcblx0XHRcdGJ0biA9ICQoIFwiPGE+PC9hPlwiLCB7XHJcblx0XHRcdFx0XHRcImhyZWZcIjogXCIjXCIsXHJcblx0XHRcdFx0XHRcImNsYXNzXCI6IFwidWktYnRuIHVpLWNvcm5lci1hbGwgdWktaWNvbi1kZWxldGUgdWktYnRuLWljb24tbm90ZXh0IHVpLWJ0bi1cIiArIGxvY2F0aW9uXHJcblx0XHRcdFx0fSlcclxuXHRcdFx0XHQuYXR0ciggXCJkYXRhLVwiICsgJC5tb2JpbGUubnMgKyBcInJlbFwiLCBcImJhY2tcIiApXHJcblx0XHRcdFx0LnRleHQoIHRleHQgfHwgdGhpcy5vcHRpb25zLmNsb3NlQnRuVGV4dCB8fCBcIlwiIClcclxuXHRcdFx0XHQucHJlcGVuZFRvKCBkc3QgKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl9oZWFkZXJDbG9zZUJ1dHRvbiA9IGJ0bjtcclxuXHR9XHJcbn0pO1xyXG5cclxufSkoIGpRdWVyeSwgdGhpcyApO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB3aW5kb3csIHVuZGVmaW5lZCApIHtcclxuXHJcbiQud2lkZ2V0KCBcIm1vYmlsZS5kaWFsb2dcIiwge1xyXG5cdG9wdGlvbnM6IHtcclxuXHJcblx0XHQvLyBBY2NlcHRzIGxlZnQsIHJpZ2h0IGFuZCBub25lXHJcblx0XHRjbG9zZUJ0bjogXCJsZWZ0XCIsXHJcblx0XHRjbG9zZUJ0blRleHQ6IFwiQ2xvc2VcIixcclxuXHRcdG92ZXJsYXlUaGVtZTogXCJhXCIsXHJcblx0XHRjb3JuZXJzOiB0cnVlXHJcblx0fSxcclxuXHJcblx0Ly8gT3ZlcnJpZGUgdGhlIHRoZW1lIHNldCBieSB0aGUgcGFnZSBwbHVnaW4gb24gcGFnZXNob3dcclxuXHRfaGFuZGxlUGFnZUJlZm9yZVNob3c6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5faXNDbG9zZWFibGUgPSB0cnVlO1xyXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMub3ZlcmxheVRoZW1lICkge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnRcclxuXHRcdFx0XHQucGFnZSggXCJyZW1vdmVDb250YWluZXJCYWNrZ3JvdW5kXCIgKVxyXG5cdFx0XHRcdC5wYWdlKCBcInNldENvbnRhaW5lckJhY2tncm91bmRcIiwgdGhpcy5vcHRpb25zLm92ZXJsYXlUaGVtZSApO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9oYW5kbGVQYWdlQmVmb3JlSGlkZTogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9pc0Nsb3NlYWJsZSA9IGZhbHNlO1xyXG5cdH0sXHJcblxyXG5cdC8vIGNsaWNrIGFuZCBzdWJtaXQgZXZlbnRzOlxyXG5cdC8vIC0gY2xpY2tzIGFuZCBzdWJtaXRzIHNob3VsZCB1c2UgdGhlIGNsb3NpbmcgdHJhbnNpdGlvbiB0aGF0IHRoZSBkaWFsb2dcclxuXHQvLyAgIG9wZW5lZCB3aXRoIHVubGVzcyBhIGRhdGEtdHJhbnNpdGlvbiBpcyBzcGVjaWZpZWQgb24gdGhlIGxpbmsvZm9ybVxyXG5cdC8vIC0gaWYgdGhlIGNsaWNrIHdhcyBvbiB0aGUgY2xvc2UgYnV0dG9uLCBvciB0aGUgbGluayBoYXMgYSBkYXRhLXJlbD1cImJhY2tcIlxyXG5cdC8vICAgaXQnbGwgZ28gYmFjayBpbiBoaXN0b3J5IG5hdHVyYWxseVxyXG5cdF9oYW5kbGVWQ2xpY2tTdWJtaXQ6IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdHZhciBhdHRycyxcclxuXHRcdFx0JHRhcmdldCA9ICQoIGV2ZW50LnRhcmdldCApLmNsb3Nlc3QoIGV2ZW50LnR5cGUgPT09IFwidmNsaWNrXCIgPyBcImFcIiA6IFwiZm9ybVwiICk7XHJcblxyXG5cdFx0aWYgKCAkdGFyZ2V0Lmxlbmd0aCAmJiAhJHRhcmdldC5qcW1EYXRhKCBcInRyYW5zaXRpb25cIiApICkge1xyXG5cdFx0XHRhdHRycyA9IHt9O1xyXG5cdFx0XHRhdHRyc1sgXCJkYXRhLVwiICsgJC5tb2JpbGUubnMgKyBcInRyYW5zaXRpb25cIiBdID1cclxuXHRcdFx0XHQoICQubW9iaWxlLm5hdmlnYXRlLmhpc3RvcnkuZ2V0QWN0aXZlKCkgfHwge30gKVsgXCJ0cmFuc2l0aW9uXCIgXSB8fFxyXG5cdFx0XHRcdCQubW9iaWxlLmRlZmF1bHREaWFsb2dUcmFuc2l0aW9uO1xyXG5cdFx0XHRhdHRyc1sgXCJkYXRhLVwiICsgJC5tb2JpbGUubnMgKyBcImRpcmVjdGlvblwiIF0gPSBcInJldmVyc2VcIjtcclxuXHRcdFx0JHRhcmdldC5hdHRyKCBhdHRycyApO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9jcmVhdGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGVsZW0gPSB0aGlzLmVsZW1lbnQsXHJcblx0XHRcdG9wdHMgPSB0aGlzLm9wdGlvbnM7XHJcblxyXG5cdFx0Ly8gQ2xhc3MgdGhlIG1hcmt1cCBmb3IgZGlhbG9nIHN0eWxpbmcgYW5kIHdyYXAgaW50ZXJpb3JcclxuXHRcdGVsZW0uYWRkQ2xhc3MoIFwidWktZGlhbG9nXCIgKVxyXG5cdFx0XHQud3JhcElubmVyKCAkKCBcIjxkaXYvPlwiLCB7XHJcblxyXG5cdFx0XHRcdC8vIEFSSUEgcm9sZVxyXG5cdFx0XHRcdFwicm9sZVwiIDogXCJkaWFsb2dcIixcclxuXHRcdFx0XHRcImNsYXNzXCIgOiBcInVpLWRpYWxvZy1jb250YWluIHVpLW92ZXJsYXktc2hhZG93XCIgK1xyXG5cdFx0XHRcdFx0KCAhIW9wdHMuY29ybmVycyA/IFwiIHVpLWNvcm5lci1hbGxcIiA6IFwiXCIgKVxyXG5cdFx0XHR9KSk7XHJcblxyXG5cdFx0JC5leHRlbmQoIHRoaXMsIHtcclxuXHRcdFx0X2lzQ2xvc2VhYmxlOiBmYWxzZSxcclxuXHRcdFx0X2lubmVyOiBlbGVtLmNoaWxkcmVuKCksXHJcblx0XHRcdF9oZWFkZXJDbG9zZUJ1dHRvbjogbnVsbFxyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5fb24oIGVsZW0sIHtcclxuXHRcdFx0dmNsaWNrOiBcIl9oYW5kbGVWQ2xpY2tTdWJtaXRcIixcclxuXHRcdFx0c3VibWl0OiBcIl9oYW5kbGVWQ2xpY2tTdWJtaXRcIixcclxuXHRcdFx0cGFnZWJlZm9yZXNob3c6IFwiX2hhbmRsZVBhZ2VCZWZvcmVTaG93XCIsXHJcblx0XHRcdHBhZ2ViZWZvcmVoaWRlOiBcIl9oYW5kbGVQYWdlQmVmb3JlSGlkZVwiXHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLl9zZXRDbG9zZUJ0biggb3B0cy5jbG9zZUJ0biApO1xyXG5cdH0sXHJcblxyXG5cdF9zZXRPcHRpb25zOiBmdW5jdGlvbiggb3B0aW9ucyApIHtcclxuXHRcdHZhciBjbG9zZUJ1dHRvbkxvY2F0aW9uLCBjbG9zZUJ1dHRvblRleHQsXHJcblx0XHRcdGN1cnJlbnRPcHRzID0gdGhpcy5vcHRpb25zO1xyXG5cclxuXHRcdGlmICggb3B0aW9ucy5jb3JuZXJzICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdHRoaXMuX2lubmVyLnRvZ2dsZUNsYXNzKCBcInVpLWNvcm5lci1hbGxcIiwgISFvcHRpb25zLmNvcm5lcnMgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG9wdGlvbnMub3ZlcmxheVRoZW1lICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdGlmICggJC5tb2JpbGUuYWN0aXZlUGFnZVsgMCBdID09PSB0aGlzLmVsZW1lbnRbIDAgXSApIHtcclxuXHRcdFx0XHRjdXJyZW50T3B0cy5vdmVybGF5VGhlbWUgPSBvcHRpb25zLm92ZXJsYXlUaGVtZTtcclxuXHRcdFx0XHR0aGlzLl9oYW5kbGVQYWdlQmVmb3JlU2hvdygpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBvcHRpb25zLmNsb3NlQnRuVGV4dCAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRjbG9zZUJ1dHRvbkxvY2F0aW9uID0gY3VycmVudE9wdHMuY2xvc2VCdG47XHJcblx0XHRcdGNsb3NlQnV0dG9uVGV4dCA9IG9wdGlvbnMuY2xvc2VCdG5UZXh0O1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggb3B0aW9ucy5jbG9zZUJ0biAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRjbG9zZUJ1dHRvbkxvY2F0aW9uID0gb3B0aW9ucy5jbG9zZUJ0bjtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIGNsb3NlQnV0dG9uTG9jYXRpb24gKSB7XHJcblx0XHRcdHRoaXMuX3NldENsb3NlQnRuKCBjbG9zZUJ1dHRvbkxvY2F0aW9uLCBjbG9zZUJ1dHRvblRleHQgKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl9zdXBlciggb3B0aW9ucyApO1xyXG5cdH0sXHJcblxyXG5cdF9zZXRDbG9zZUJ0bjogZnVuY3Rpb24oIGxvY2F0aW9uLCB0ZXh0ICkge1xyXG5cdFx0dmFyIGRzdCxcclxuXHRcdFx0YnRuID0gdGhpcy5faGVhZGVyQ2xvc2VCdXR0b247XHJcblxyXG5cdFx0Ly8gU2FuaXRpemUgdmFsdWVcclxuXHRcdGxvY2F0aW9uID0gXCJsZWZ0XCIgPT09IGxvY2F0aW9uID8gXCJsZWZ0XCIgOiBcInJpZ2h0XCIgPT09IGxvY2F0aW9uID8gXCJyaWdodFwiIDogXCJub25lXCI7XHJcblxyXG5cdFx0aWYgKCBcIm5vbmVcIiA9PT0gbG9jYXRpb24gKSB7XHJcblx0XHRcdGlmICggYnRuICkge1xyXG5cdFx0XHRcdGJ0bi5yZW1vdmUoKTtcclxuXHRcdFx0XHRidG4gPSBudWxsO1xyXG5cdFx0XHR9XHJcblx0XHR9IGVsc2UgaWYgKCBidG4gKSB7XHJcblx0XHRcdGJ0bi5yZW1vdmVDbGFzcyggXCJ1aS1idG4tbGVmdCB1aS1idG4tcmlnaHRcIiApLmFkZENsYXNzKCBcInVpLWJ0bi1cIiArIGxvY2F0aW9uICk7XHJcblx0XHRcdGlmICggdGV4dCApIHtcclxuXHRcdFx0XHRidG4udGV4dCggdGV4dCApO1xyXG5cdFx0XHR9XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRkc3QgPSB0aGlzLl9pbm5lci5maW5kKCBcIjpqcW1EYXRhKHJvbGU9J2hlYWRlcicpXCIgKS5maXJzdCgpO1xyXG5cdFx0XHRidG4gPSAkKCBcIjxhPjwvYT5cIiwge1xyXG5cdFx0XHRcdFx0XCJyb2xlXCI6IFwiYnV0dG9uXCIsXHJcblx0XHRcdFx0XHRcImhyZWZcIjogXCIjXCIsXHJcblx0XHRcdFx0XHRcImNsYXNzXCI6IFwidWktYnRuIHVpLWNvcm5lci1hbGwgdWktaWNvbi1kZWxldGUgdWktYnRuLWljb24tbm90ZXh0IHVpLWJ0bi1cIiArIGxvY2F0aW9uXHJcblx0XHRcdFx0fSlcclxuXHRcdFx0XHQudGV4dCggdGV4dCB8fCB0aGlzLm9wdGlvbnMuY2xvc2VCdG5UZXh0IHx8IFwiXCIgKVxyXG5cdFx0XHRcdC5wcmVwZW5kVG8oIGRzdCApO1xyXG5cdFx0XHR0aGlzLl9vbiggYnRuLCB7IGNsaWNrOiBcImNsb3NlXCIgfSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX2hlYWRlckNsb3NlQnV0dG9uID0gYnRuO1xyXG5cdH0sXHJcblxyXG5cdC8vIENsb3NlIG1ldGhvZCBnb2VzIGJhY2sgaW4gaGlzdG9yeVxyXG5cdGNsb3NlOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBoaXN0ID0gJC5tb2JpbGUubmF2aWdhdGUuaGlzdG9yeTtcclxuXHJcblx0XHRpZiAoIHRoaXMuX2lzQ2xvc2VhYmxlICkge1xyXG5cdFx0XHR0aGlzLl9pc0Nsb3NlYWJsZSA9IGZhbHNlO1xyXG5cdFx0XHQvLyBJZiB0aGUgaGFzaCBsaXN0ZW5pbmcgaXMgZW5hYmxlZCBhbmQgdGhlcmUgaXMgYXQgbGVhc3Qgb25lIHByZWNlZGluZyBoaXN0b3J5XHJcblx0XHRcdC8vIGVudHJ5IGl0J3Mgb2sgdG8gZ28gYmFjay4gSW5pdGlhbCBwYWdlcyB3aXRoIHRoZSBkaWFsb2cgaGFzaCBzdGF0ZSBhcmUgYW4gZXhhbXBsZVxyXG5cdFx0XHQvLyB3aGVyZSB0aGUgc3RhY2sgY2hlY2sgaXMgbmVjZXNzYXJ5XHJcblx0XHRcdGlmICggJC5tb2JpbGUuaGFzaExpc3RlbmluZ0VuYWJsZWQgJiYgaGlzdC5hY3RpdmVJbmRleCA+IDAgKSB7XHJcblx0XHRcdFx0JC5tb2JpbGUuYmFjaygpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdCQubW9iaWxlLnBhZ2VDb250YWluZXIucGFnZWNvbnRhaW5lciggXCJiYWNrXCIgKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxufSk7XHJcblxyXG59KSggalF1ZXJ5LCB0aGlzICk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcbnZhciBySW5pdGlhbExldHRlciA9IC8oW0EtWl0pL2csXHJcblxyXG5cdC8vIENvbnN0cnVjdCBpY29ucG9zIGNsYXNzIGZyb20gaWNvbnBvcyB2YWx1ZVxyXG5cdGljb25wb3NDbGFzcyA9IGZ1bmN0aW9uKCBpY29ucG9zICkge1xyXG5cdFx0cmV0dXJuICggXCJ1aS1idG4taWNvbi1cIiArICggaWNvbnBvcyA9PT0gbnVsbCA/IFwibGVmdFwiIDogaWNvbnBvcyApICk7XHJcblx0fTtcclxuXHJcbiQud2lkZ2V0KCBcIm1vYmlsZS5jb2xsYXBzaWJsZVwiLCB7XHJcblx0b3B0aW9uczoge1xyXG5cdFx0ZW5oYW5jZWQ6IGZhbHNlLFxyXG5cdFx0ZXhwYW5kQ3VlVGV4dDogbnVsbCxcclxuXHRcdGNvbGxhcHNlQ3VlVGV4dDogbnVsbCxcclxuXHRcdGNvbGxhcHNlZDogdHJ1ZSxcclxuXHRcdGhlYWRpbmc6IFwiaDEsaDIsaDMsaDQsaDUsaDYsbGVnZW5kXCIsXHJcblx0XHRjb2xsYXBzZWRJY29uOiBudWxsLFxyXG5cdFx0ZXhwYW5kZWRJY29uOiBudWxsLFxyXG5cdFx0aWNvbnBvczogbnVsbCxcclxuXHRcdHRoZW1lOiBudWxsLFxyXG5cdFx0Y29udGVudFRoZW1lOiBudWxsLFxyXG5cdFx0aW5zZXQ6IG51bGwsXHJcblx0XHRjb3JuZXJzOiBudWxsLFxyXG5cdFx0bWluaTogbnVsbFxyXG5cdH0sXHJcblxyXG5cdF9jcmVhdGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGVsZW0gPSB0aGlzLmVsZW1lbnQsXHJcblx0XHRcdHVpID0ge1xyXG5cdFx0XHRcdGFjY29yZGlvbjogZWxlbVxyXG5cdFx0XHRcdFx0LmNsb3Nlc3QoIFwiOmpxbURhdGEocm9sZT0nY29sbGFwc2libGUtc2V0JyksXCIgK1xyXG5cdFx0XHRcdFx0XHRcIjpqcW1EYXRhKHJvbGU9J2NvbGxhcHNpYmxlc2V0JylcIiArXHJcblx0XHRcdFx0XHRcdCggJC5tb2JpbGUuY29sbGFwc2libGVzZXQgPyBcIiwgOm1vYmlsZS1jb2xsYXBzaWJsZXNldFwiIDpcclxuXHRcdFx0XHRcdFx0XHRcIlwiICkgKVxyXG5cdFx0XHRcdFx0LmFkZENsYXNzKCBcInVpLWNvbGxhcHNpYmxlLXNldFwiIClcclxuXHRcdFx0fTtcclxuXHJcblx0XHR0aGlzLl91aSA9IHVpO1xyXG5cdFx0dGhpcy5fcmVuZGVyZWRPcHRpb25zID0gdGhpcy5fZ2V0T3B0aW9ucyggdGhpcy5vcHRpb25zICk7XHJcblxyXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMuZW5oYW5jZWQgKSB7XHJcblx0XHRcdHVpLmhlYWRpbmcgPSB0aGlzLmVsZW1lbnQuY2hpbGRyZW4oIFwiLnVpLWNvbGxhcHNpYmxlLWhlYWRpbmdcIiApO1xyXG5cdFx0XHR1aS5jb250ZW50ID0gdWkuaGVhZGluZy5uZXh0KCk7XHJcblx0XHRcdHVpLmFuY2hvciA9IHVpLmhlYWRpbmcuY2hpbGRyZW4oKTtcclxuXHRcdFx0dWkuc3RhdHVzID0gdWkuYW5jaG9yLmNoaWxkcmVuKCBcIi51aS1jb2xsYXBzaWJsZS1oZWFkaW5nLXN0YXR1c1wiICk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLl9lbmhhbmNlKCBlbGVtLCB1aSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX29uKCB1aS5oZWFkaW5nLCB7XHJcblx0XHRcdFwidGFwXCI6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHVpLmhlYWRpbmcuZmluZCggXCJhXCIgKS5maXJzdCgpLmFkZENsYXNzKCAkLm1vYmlsZS5hY3RpdmVCdG5DbGFzcyApO1xyXG5cdFx0XHR9LFxyXG5cclxuXHRcdFx0XCJjbGlja1wiOiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHRcdFx0dGhpcy5faGFuZGxlRXhwYW5kQ29sbGFwc2UoICF1aS5oZWFkaW5nLmhhc0NsYXNzKCBcInVpLWNvbGxhcHNpYmxlLWhlYWRpbmctY29sbGFwc2VkXCIgKSApO1xyXG5cdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdH0sXHJcblxyXG5cdC8vIEFkanVzdCB0aGUga2V5cyBpbnNpZGUgb3B0aW9ucyBmb3IgaW5oZXJpdGVkIHZhbHVlc1xyXG5cdF9nZXRPcHRpb25zOiBmdW5jdGlvbiggb3B0aW9ucyApIHtcclxuXHRcdHZhciBrZXksXHJcblx0XHRcdGFjY29yZGlvbiA9IHRoaXMuX3VpLmFjY29yZGlvbixcclxuXHRcdFx0YWNjb3JkaW9uV2lkZ2V0ID0gdGhpcy5fdWkuYWNjb3JkaW9uV2lkZ2V0O1xyXG5cclxuXHRcdC8vIENvcHkgb3B0aW9uc1xyXG5cdFx0b3B0aW9ucyA9ICQuZXh0ZW5kKCB7fSwgb3B0aW9ucyApO1xyXG5cclxuXHRcdGlmICggYWNjb3JkaW9uLmxlbmd0aCAmJiAhYWNjb3JkaW9uV2lkZ2V0ICkge1xyXG5cdFx0XHR0aGlzLl91aS5hY2NvcmRpb25XaWRnZXQgPVxyXG5cdFx0XHRhY2NvcmRpb25XaWRnZXQgPSBhY2NvcmRpb24uZGF0YSggXCJtb2JpbGUtY29sbGFwc2libGVzZXRcIiApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZvciAoIGtleSBpbiBvcHRpb25zICkge1xyXG5cclxuXHRcdFx0Ly8gUmV0cmlldmUgdGhlIG9wdGlvbiB2YWx1ZSBmaXJzdCBmcm9tIHRoZSBvcHRpb25zIG9iamVjdCBwYXNzZWQgaW4gYW5kLCBpZlxyXG5cdFx0XHQvLyBudWxsLCBmcm9tIHRoZSBwYXJlbnQgYWNjb3JkaW9uIG9yLCBpZiB0aGF0J3MgbnVsbCB0b28sIG9yIGlmIHRoZXJlJ3Mgbm9cclxuXHRcdFx0Ly8gcGFyZW50IGFjY29yZGlvbiwgdGhlbiBmcm9tIHRoZSBkZWZhdWx0cy5cclxuXHRcdFx0b3B0aW9uc1sga2V5IF0gPVxyXG5cdFx0XHRcdCggb3B0aW9uc1sga2V5IF0gIT0gbnVsbCApID8gb3B0aW9uc1sga2V5IF0gOlxyXG5cdFx0XHRcdCggYWNjb3JkaW9uV2lkZ2V0ICkgPyBhY2NvcmRpb25XaWRnZXQub3B0aW9uc1sga2V5IF0gOlxyXG5cdFx0XHRcdGFjY29yZGlvbi5sZW5ndGggPyAkLm1vYmlsZS5nZXRBdHRyaWJ1dGUoIGFjY29yZGlvblsgMCBdLFxyXG5cdFx0XHRcdFx0a2V5LnJlcGxhY2UoIHJJbml0aWFsTGV0dGVyLCBcIi0kMVwiICkudG9Mb3dlckNhc2UoKSApOlxyXG5cdFx0XHRcdG51bGw7XHJcblxyXG5cdFx0XHRpZiAoIG51bGwgPT0gb3B0aW9uc1sga2V5IF0gKSB7XHJcblx0XHRcdFx0b3B0aW9uc1sga2V5IF0gPSAkLm1vYmlsZS5jb2xsYXBzaWJsZS5kZWZhdWx0c1sga2V5IF07XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gb3B0aW9ucztcclxuXHR9LFxyXG5cclxuXHRfdGhlbWVDbGFzc0Zyb21PcHRpb246IGZ1bmN0aW9uKCBwcmVmaXgsIHZhbHVlICkge1xyXG5cdFx0cmV0dXJuICggdmFsdWUgPyAoIHZhbHVlID09PSBcIm5vbmVcIiA/IFwiXCIgOiBwcmVmaXggKyB2YWx1ZSApIDogXCJcIiApO1xyXG5cdH0sXHJcblxyXG5cdF9lbmhhbmNlOiBmdW5jdGlvbiggZWxlbSwgdWkgKSB7XHJcblx0XHR2YXIgaWNvbmNsYXNzLFxyXG5cdFx0XHRvcHRzID0gdGhpcy5fcmVuZGVyZWRPcHRpb25zLFxyXG5cdFx0XHRjb250ZW50VGhlbWVDbGFzcyA9IHRoaXMuX3RoZW1lQ2xhc3NGcm9tT3B0aW9uKCBcInVpLWJvZHktXCIsIG9wdHMuY29udGVudFRoZW1lICk7XHJcblxyXG5cdFx0ZWxlbS5hZGRDbGFzcyggXCJ1aS1jb2xsYXBzaWJsZSBcIiArXHJcblx0XHRcdCggb3B0cy5pbnNldCA/IFwidWktY29sbGFwc2libGUtaW5zZXQgXCIgOiBcIlwiICkgK1xyXG5cdFx0XHQoIG9wdHMuaW5zZXQgJiYgb3B0cy5jb3JuZXJzID8gXCJ1aS1jb3JuZXItYWxsIFwiIDogXCJcIiApICtcclxuXHRcdFx0KCBjb250ZW50VGhlbWVDbGFzcyA/IFwidWktY29sbGFwc2libGUtdGhlbWVkLWNvbnRlbnQgXCIgOiBcIlwiICkgKTtcclxuXHRcdHVpLm9yaWdpbmFsSGVhZGluZyA9IGVsZW0uY2hpbGRyZW4oIHRoaXMub3B0aW9ucy5oZWFkaW5nICkuZmlyc3QoKSxcclxuXHRcdHVpLmNvbnRlbnQgPSBlbGVtXHJcblx0XHRcdC53cmFwSW5uZXIoIFwiPGRpdiBcIiArXHJcblx0XHRcdFx0XCJjbGFzcz0ndWktY29sbGFwc2libGUtY29udGVudCBcIiArXHJcblx0XHRcdFx0Y29udGVudFRoZW1lQ2xhc3MgKyBcIic+PC9kaXY+XCIgKVxyXG5cdFx0XHQuY2hpbGRyZW4oIFwiLnVpLWNvbGxhcHNpYmxlLWNvbnRlbnRcIiApLFxyXG5cdFx0dWkuaGVhZGluZyA9IHVpLm9yaWdpbmFsSGVhZGluZztcclxuXHJcblx0XHQvLyBSZXBsYWNlIGNvbGxhcHNpYmxlSGVhZGluZyBpZiBpdCdzIGEgbGVnZW5kXHJcblx0XHRpZiAoIHVpLmhlYWRpbmcuaXMoIFwibGVnZW5kXCIgKSApIHtcclxuXHRcdFx0dWkuaGVhZGluZyA9ICQoIFwiPGRpdiByb2xlPSdoZWFkaW5nJz5cIisgdWkuaGVhZGluZy5odG1sKCkgK1wiPC9kaXY+XCIgKTtcclxuXHRcdFx0dWkucGxhY2Vob2xkZXIgPSAkKCBcIjxkaXY+PCEtLSBwbGFjZWhvbGRlciBmb3IgbGVnZW5kIC0tPjwvZGl2PlwiICkuaW5zZXJ0QmVmb3JlKCB1aS5vcmlnaW5hbEhlYWRpbmcgKTtcclxuXHRcdFx0dWkub3JpZ2luYWxIZWFkaW5nLnJlbW92ZSgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGljb25jbGFzcyA9ICggb3B0cy5jb2xsYXBzZWQgPyAoIG9wdHMuY29sbGFwc2VkSWNvbiA/IFwidWktaWNvbi1cIiArIG9wdHMuY29sbGFwc2VkSWNvbiA6IFwiXCIgKTpcclxuXHRcdFx0KCBvcHRzLmV4cGFuZGVkSWNvbiA/IFwidWktaWNvbi1cIiArIG9wdHMuZXhwYW5kZWRJY29uIDogXCJcIiApICk7XHJcblxyXG5cdFx0dWkuc3RhdHVzID0gJCggXCI8c3BhbiBjbGFzcz0ndWktY29sbGFwc2libGUtaGVhZGluZy1zdGF0dXMnPjwvc3Bhbj5cIiApO1xyXG5cdFx0dWkuYW5jaG9yID0gdWkuaGVhZGluZ1xyXG5cdFx0XHQuZGV0YWNoKClcclxuXHRcdFx0Ly9tb2RpZnkgbWFya3VwICYgYXR0cmlidXRlc1xyXG5cdFx0XHQuYWRkQ2xhc3MoIFwidWktY29sbGFwc2libGUtaGVhZGluZ1wiIClcclxuXHRcdFx0LmFwcGVuZCggdWkuc3RhdHVzIClcclxuXHRcdFx0LndyYXBJbm5lciggXCI8YSBocmVmPScjJyBjbGFzcz0ndWktY29sbGFwc2libGUtaGVhZGluZy10b2dnbGUnPjwvYT5cIiApXHJcblx0XHRcdC5maW5kKCBcImFcIiApXHJcblx0XHRcdFx0LmZpcnN0KClcclxuXHRcdFx0XHQuYWRkQ2xhc3MoIFwidWktYnRuIFwiICtcclxuXHRcdFx0XHRcdCggaWNvbmNsYXNzID8gaWNvbmNsYXNzICsgXCIgXCIgOiBcIlwiICkgK1xyXG5cdFx0XHRcdFx0KCBpY29uY2xhc3MgPyBpY29ucG9zQ2xhc3MoIG9wdHMuaWNvbnBvcyApICtcclxuXHRcdFx0XHRcdFx0XCIgXCIgOiBcIlwiICkgK1xyXG5cdFx0XHRcdFx0dGhpcy5fdGhlbWVDbGFzc0Zyb21PcHRpb24oIFwidWktYnRuLVwiLCBvcHRzLnRoZW1lICkgKyBcIiBcIiArXHJcblx0XHRcdFx0XHQoIG9wdHMubWluaSA/IFwidWktbWluaSBcIiA6IFwiXCIgKSApO1xyXG5cclxuXHRcdC8vZHJvcCBoZWFkaW5nIGluIGJlZm9yZSBjb250ZW50XHJcblx0XHR1aS5oZWFkaW5nLmluc2VydEJlZm9yZSggdWkuY29udGVudCApO1xyXG5cclxuXHRcdHRoaXMuX2hhbmRsZUV4cGFuZENvbGxhcHNlKCB0aGlzLm9wdGlvbnMuY29sbGFwc2VkICk7XHJcblxyXG5cdFx0cmV0dXJuIHVpO1xyXG5cdH0sXHJcblxyXG5cdHJlZnJlc2g6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5fYXBwbHlPcHRpb25zKCB0aGlzLm9wdGlvbnMgKTtcclxuXHRcdHRoaXMuX3JlbmRlcmVkT3B0aW9ucyA9IHRoaXMuX2dldE9wdGlvbnMoIHRoaXMub3B0aW9ucyApO1xyXG5cdH0sXHJcblxyXG5cdF9hcHBseU9wdGlvbnM6IGZ1bmN0aW9uKCBvcHRpb25zICkge1xyXG5cdFx0dmFyIGlzQ29sbGFwc2VkLCBuZXdUaGVtZSwgb2xkVGhlbWUsIGhhc0Nvcm5lcnMsIGhhc0ljb24sXHJcblx0XHRcdGVsZW0gPSB0aGlzLmVsZW1lbnQsXHJcblx0XHRcdGN1cnJlbnRPcHRzID0gdGhpcy5fcmVuZGVyZWRPcHRpb25zLFxyXG5cdFx0XHR1aSA9IHRoaXMuX3VpLFxyXG5cdFx0XHRhbmNob3IgPSB1aS5hbmNob3IsXHJcblx0XHRcdHN0YXR1cyA9IHVpLnN0YXR1cyxcclxuXHRcdFx0b3B0cyA9IHRoaXMuX2dldE9wdGlvbnMoIG9wdGlvbnMgKTtcclxuXHJcblx0XHQvLyBGaXJzdCBhbmQgZm9yZW1vc3Qgd2UgbmVlZCB0byBtYWtlIHN1cmUgdGhlIGNvbGxhcHNpYmxlIGlzIGluIHRoZSBwcm9wZXJcclxuXHRcdC8vIHN0YXRlLCBpbiBjYXNlIHNvbWVib2R5IGRlY2lkZWQgdG8gY2hhbmdlIHRoZSBjb2xsYXBzZWQgb3B0aW9uIGF0IHRoZVxyXG5cdFx0Ly8gc2FtZSB0aW1lIGFzIGFub3RoZXIgb3B0aW9uXHJcblx0XHRpZiAoIG9wdGlvbnMuY29sbGFwc2VkICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdHRoaXMuX2hhbmRsZUV4cGFuZENvbGxhcHNlKCBvcHRpb25zLmNvbGxhcHNlZCApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlzQ29sbGFwc2VkID0gZWxlbS5oYXNDbGFzcyggXCJ1aS1jb2xsYXBzaWJsZS1jb2xsYXBzZWRcIiApO1xyXG5cclxuXHRcdC8vIFdlIG9ubHkgbmVlZCB0byBhcHBseSB0aGUgY3VlIHRleHQgZm9yIHRoZSBjdXJyZW50IHN0YXRlIHJpZ2h0IGF3YXkuXHJcblx0XHQvLyBUaGUgY3VlIHRleHQgZm9yIHRoZSBhbHRlcm5hdGUgc3RhdGUgd2lsbCBiZSBzdG9yZWQgaW4gdGhlIG9wdGlvbnNcclxuXHRcdC8vIGFuZCBhcHBsaWVkIHRoZSBuZXh0IHRpbWUgdGhlIGNvbGxhcHNpYmxlJ3Mgc3RhdGUgaXMgdG9nZ2xlZFxyXG5cdFx0aWYgKCBpc0NvbGxhcHNlZCApIHtcclxuXHRcdFx0aWYgKCBvcHRzLmV4cGFuZEN1ZVRleHQgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0XHRzdGF0dXMudGV4dCggb3B0cy5leHBhbmRDdWVUZXh0ICk7XHJcblx0XHRcdH1cclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGlmICggb3B0cy5jb2xsYXBzZUN1ZVRleHQgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0XHRzdGF0dXMudGV4dCggb3B0cy5jb2xsYXBzZUN1ZVRleHQgKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFVwZGF0ZSBpY29uXHJcblxyXG5cdFx0Ly8gSXMgaXQgc3VwcG9zZWQgdG8gaGF2ZSBhbiBpY29uP1xyXG5cdFx0aGFzSWNvbiA9XHJcblxyXG5cdFx0XHQvLyBJZiB0aGUgY29sbGFwc2VkSWNvbiBpcyBiZWluZyBzZXQsIGNvbnN1bHQgdGhhdFxyXG5cdFx0XHQoIG9wdHMuY29sbGFwc2VkSWNvbiAhPT0gdW5kZWZpbmVkID8gb3B0cy5jb2xsYXBzZWRJY29uICE9PSBmYWxzZSA6XHJcblxyXG5cdFx0XHRcdC8vIE90aGVyd2lzZSBjb25zdWx0IHRoZSBleGlzdGluZyBvcHRpb24gdmFsdWVcclxuXHRcdFx0XHRjdXJyZW50T3B0cy5jb2xsYXBzZWRJY29uICE9PSBmYWxzZSApO1xyXG5cclxuXHJcblx0XHQvLyBJZiBhbnkgaWNvbi1yZWxhdGVkIG9wdGlvbnMgaGF2ZSBjaGFuZ2VkLCBtYWtlIHN1cmUgdGhlIG5ldyBpY29uXHJcblx0XHQvLyBzdGF0ZSBpcyByZWZsZWN0ZWQgYnkgZmlyc3QgcmVtb3ZpbmcgYWxsIGljb24tcmVsYXRlZCBjbGFzc2VzXHJcblx0XHQvLyByZWZsZWN0aW5nIHRoZSBjdXJyZW50IHN0YXRlIGFuZCB0aGVuIGFkZGluZyBhbGwgaWNvbi1yZWxhdGVkXHJcblx0XHQvLyBjbGFzc2VzIGZvciB0aGUgbmV3IHN0YXRlXHJcblx0XHRpZiAoICEoIG9wdHMuaWNvbnBvcyA9PT0gdW5kZWZpbmVkICYmXHJcblx0XHRcdG9wdHMuY29sbGFwc2VkSWNvbiA9PT0gdW5kZWZpbmVkICYmXHJcblx0XHRcdG9wdHMuZXhwYW5kZWRJY29uID09PSB1bmRlZmluZWQgKSApIHtcclxuXHJcblx0XHRcdC8vIFJlbW92ZSBhbGwgY3VycmVudCBpY29uLXJlbGF0ZWQgY2xhc3Nlc1xyXG5cdFx0XHRhbmNob3IucmVtb3ZlQ2xhc3MoIFsgaWNvbnBvc0NsYXNzKCBjdXJyZW50T3B0cy5pY29ucG9zICkgXVxyXG5cdFx0XHRcdC5jb25jYXQoICggY3VycmVudE9wdHMuZXhwYW5kZWRJY29uID9cclxuXHRcdFx0XHRcdFsgXCJ1aS1pY29uLVwiICsgY3VycmVudE9wdHMuZXhwYW5kZWRJY29uIF0gOiBbXSApIClcclxuXHRcdFx0XHQuY29uY2F0KCAoIGN1cnJlbnRPcHRzLmNvbGxhcHNlZEljb24gP1xyXG5cdFx0XHRcdFx0WyBcInVpLWljb24tXCIgKyBjdXJyZW50T3B0cy5jb2xsYXBzZWRJY29uIF0gOiBbXSApIClcclxuXHRcdFx0XHQuam9pbiggXCIgXCIgKSApO1xyXG5cclxuXHRcdFx0Ly8gQWRkIG5ldyBjbGFzc2VzIGlmIGFuIGljb24gaXMgc3VwcG9zZWQgdG8gYmUgcHJlc2VudFxyXG5cdFx0XHRpZiAoIGhhc0ljb24gKSB7XHJcblx0XHRcdFx0YW5jaG9yLmFkZENsYXNzKFxyXG5cdFx0XHRcdFx0WyBpY29ucG9zQ2xhc3MoIG9wdHMuaWNvbnBvcyAhPT0gdW5kZWZpbmVkID9cclxuXHRcdFx0XHRcdFx0b3B0cy5pY29ucG9zIDogY3VycmVudE9wdHMuaWNvbnBvcyApIF1cclxuXHRcdFx0XHRcdFx0LmNvbmNhdCggaXNDb2xsYXBzZWQgP1xyXG5cdFx0XHRcdFx0XHRcdFsgXCJ1aS1pY29uLVwiICsgKCBvcHRzLmNvbGxhcHNlZEljb24gIT09IHVuZGVmaW5lZCA/XHJcblx0XHRcdFx0XHRcdFx0XHRvcHRzLmNvbGxhcHNlZEljb24gOlxyXG5cdFx0XHRcdFx0XHRcdFx0Y3VycmVudE9wdHMuY29sbGFwc2VkSWNvbiApIF0gOlxyXG5cdFx0XHRcdFx0XHRcdFsgXCJ1aS1pY29uLVwiICsgKCBvcHRzLmV4cGFuZGVkSWNvbiAhPT0gdW5kZWZpbmVkID9cclxuXHRcdFx0XHRcdFx0XHRcdG9wdHMuZXhwYW5kZWRJY29uIDpcclxuXHRcdFx0XHRcdFx0XHRcdGN1cnJlbnRPcHRzLmV4cGFuZGVkSWNvbiApIF0gKVxyXG5cdFx0XHRcdFx0XHQuam9pbiggXCIgXCIgKSApO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBvcHRzLnRoZW1lICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdG9sZFRoZW1lID0gdGhpcy5fdGhlbWVDbGFzc0Zyb21PcHRpb24oIFwidWktYnRuLVwiLCBjdXJyZW50T3B0cy50aGVtZSApO1xyXG5cdFx0XHRuZXdUaGVtZSA9IHRoaXMuX3RoZW1lQ2xhc3NGcm9tT3B0aW9uKCBcInVpLWJ0bi1cIiwgb3B0cy50aGVtZSApO1xyXG5cdFx0XHRhbmNob3IucmVtb3ZlQ2xhc3MoIG9sZFRoZW1lICkuYWRkQ2xhc3MoIG5ld1RoZW1lICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBvcHRzLmNvbnRlbnRUaGVtZSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRvbGRUaGVtZSA9IHRoaXMuX3RoZW1lQ2xhc3NGcm9tT3B0aW9uKCBcInVpLWJvZHktXCIsXHJcblx0XHRcdFx0Y3VycmVudE9wdHMuY29udGVudFRoZW1lICk7XHJcblx0XHRcdG5ld1RoZW1lID0gdGhpcy5fdGhlbWVDbGFzc0Zyb21PcHRpb24oIFwidWktYm9keS1cIixcclxuXHRcdFx0XHRvcHRzLmNvbnRlbnRUaGVtZSApO1xyXG5cdFx0XHR1aS5jb250ZW50LnJlbW92ZUNsYXNzKCBvbGRUaGVtZSApLmFkZENsYXNzKCBuZXdUaGVtZSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggb3B0cy5pbnNldCAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRlbGVtLnRvZ2dsZUNsYXNzKCBcInVpLWNvbGxhcHNpYmxlLWluc2V0XCIsIG9wdHMuaW5zZXQgKTtcclxuXHRcdFx0aGFzQ29ybmVycyA9ICEhKCBvcHRzLmluc2V0ICYmICggb3B0cy5jb3JuZXJzIHx8IGN1cnJlbnRPcHRzLmNvcm5lcnMgKSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggb3B0cy5jb3JuZXJzICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdGhhc0Nvcm5lcnMgPSAhISggb3B0cy5jb3JuZXJzICYmICggb3B0cy5pbnNldCB8fCBjdXJyZW50T3B0cy5pbnNldCApICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBoYXNDb3JuZXJzICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdGVsZW0udG9nZ2xlQ2xhc3MoIFwidWktY29ybmVyLWFsbFwiLCBoYXNDb3JuZXJzICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBvcHRzLm1pbmkgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0YW5jaG9yLnRvZ2dsZUNsYXNzKCBcInVpLW1pbmlcIiwgb3B0cy5taW5pICk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X3NldE9wdGlvbnM6IGZ1bmN0aW9uKCBvcHRpb25zICkge1xyXG5cdFx0dGhpcy5fYXBwbHlPcHRpb25zKCBvcHRpb25zICk7XHJcblx0XHR0aGlzLl9zdXBlciggb3B0aW9ucyApO1xyXG5cdFx0dGhpcy5fcmVuZGVyZWRPcHRpb25zID0gdGhpcy5fZ2V0T3B0aW9ucyggdGhpcy5vcHRpb25zICk7XHJcblx0fSxcclxuXHJcblx0X2hhbmRsZUV4cGFuZENvbGxhcHNlOiBmdW5jdGlvbiggaXNDb2xsYXBzZSApIHtcclxuXHRcdHZhciBvcHRzID0gdGhpcy5fcmVuZGVyZWRPcHRpb25zLFxyXG5cdFx0XHR1aSA9IHRoaXMuX3VpO1xyXG5cclxuXHRcdHVpLnN0YXR1cy50ZXh0KCBpc0NvbGxhcHNlID8gb3B0cy5leHBhbmRDdWVUZXh0IDogb3B0cy5jb2xsYXBzZUN1ZVRleHQgKTtcclxuXHRcdHVpLmhlYWRpbmdcclxuXHRcdFx0LnRvZ2dsZUNsYXNzKCBcInVpLWNvbGxhcHNpYmxlLWhlYWRpbmctY29sbGFwc2VkXCIsIGlzQ29sbGFwc2UgKVxyXG5cdFx0XHQuZmluZCggXCJhXCIgKS5maXJzdCgpXHJcblx0XHRcdC50b2dnbGVDbGFzcyggXCJ1aS1pY29uLVwiICsgb3B0cy5leHBhbmRlZEljb24sICFpc0NvbGxhcHNlIClcclxuXHJcblx0XHRcdC8vIGxvZ2ljIG9yIGNhdXNlIHNhbWUgaWNvbiBmb3IgZXhwYW5kZWQvY29sbGFwc2VkIHN0YXRlIHdvdWxkIHJlbW92ZSB0aGUgdWktaWNvbi1jbGFzc1xyXG5cdFx0XHQudG9nZ2xlQ2xhc3MoIFwidWktaWNvbi1cIiArIG9wdHMuY29sbGFwc2VkSWNvbiwgKCBpc0NvbGxhcHNlIHx8IG9wdHMuZXhwYW5kZWRJY29uID09PSBvcHRzLmNvbGxhcHNlZEljb24gKSApXHJcblx0XHRcdC5yZW1vdmVDbGFzcyggJC5tb2JpbGUuYWN0aXZlQnRuQ2xhc3MgKTtcclxuXHJcblx0XHR0aGlzLmVsZW1lbnQudG9nZ2xlQ2xhc3MoIFwidWktY29sbGFwc2libGUtY29sbGFwc2VkXCIsIGlzQ29sbGFwc2UgKTtcclxuXHRcdHVpLmNvbnRlbnRcclxuXHRcdFx0LnRvZ2dsZUNsYXNzKCBcInVpLWNvbGxhcHNpYmxlLWNvbnRlbnQtY29sbGFwc2VkXCIsIGlzQ29sbGFwc2UgKVxyXG5cdFx0XHQuYXR0ciggXCJhcmlhLWhpZGRlblwiLCBpc0NvbGxhcHNlIClcclxuXHRcdFx0LnRyaWdnZXIoIFwidXBkYXRlbGF5b3V0XCIgKTtcclxuXHRcdHRoaXMub3B0aW9ucy5jb2xsYXBzZWQgPSBpc0NvbGxhcHNlO1xyXG5cdFx0dGhpcy5fdHJpZ2dlciggaXNDb2xsYXBzZSA/IFwiY29sbGFwc2VcIiA6IFwiZXhwYW5kXCIgKTtcclxuXHR9LFxyXG5cclxuXHRleHBhbmQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5faGFuZGxlRXhwYW5kQ29sbGFwc2UoIGZhbHNlICk7XHJcblx0fSxcclxuXHJcblx0Y29sbGFwc2U6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5faGFuZGxlRXhwYW5kQ29sbGFwc2UoIHRydWUgKTtcclxuXHR9LFxyXG5cclxuXHRfZGVzdHJveTogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgdWkgPSB0aGlzLl91aSxcclxuXHRcdFx0b3B0cyA9IHRoaXMub3B0aW9ucztcclxuXHJcblx0XHRpZiAoIG9wdHMuZW5oYW5jZWQgKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIHVpLnBsYWNlaG9sZGVyICkge1xyXG5cdFx0XHR1aS5vcmlnaW5hbEhlYWRpbmcuaW5zZXJ0QmVmb3JlKCB1aS5wbGFjZWhvbGRlciApO1xyXG5cdFx0XHR1aS5wbGFjZWhvbGRlci5yZW1vdmUoKTtcclxuXHRcdFx0dWkuaGVhZGluZy5yZW1vdmUoKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHVpLnN0YXR1cy5yZW1vdmUoKTtcclxuXHRcdFx0dWkuaGVhZGluZ1xyXG5cdFx0XHRcdC5yZW1vdmVDbGFzcyggXCJ1aS1jb2xsYXBzaWJsZS1oZWFkaW5nIHVpLWNvbGxhcHNpYmxlLWhlYWRpbmctY29sbGFwc2VkXCIgKVxyXG5cdFx0XHRcdC5jaGlsZHJlbigpXHJcblx0XHRcdFx0XHQuY29udGVudHMoKVxyXG5cdFx0XHRcdFx0XHQudW53cmFwKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0dWkuYW5jaG9yLmNvbnRlbnRzKCkudW53cmFwKCk7XHJcblx0XHR1aS5jb250ZW50LmNvbnRlbnRzKCkudW53cmFwKCk7XHJcblx0XHR0aGlzLmVsZW1lbnRcclxuXHRcdFx0LnJlbW92ZUNsYXNzKCBcInVpLWNvbGxhcHNpYmxlIHVpLWNvbGxhcHNpYmxlLWNvbGxhcHNlZCBcIiArXHJcblx0XHRcdFx0XCJ1aS1jb2xsYXBzaWJsZS10aGVtZWQtY29udGVudCB1aS1jb2xsYXBzaWJsZS1pbnNldCB1aS1jb3JuZXItYWxsXCIgKTtcclxuXHR9XHJcbn0pO1xyXG5cclxuLy8gRGVmYXVsdHMgdG8gYmUgdXNlZCBieSBhbGwgaW5zdGFuY2VzIG9mIGNvbGxhcHNpYmxlIGlmIHBlci1pbnN0YW5jZSB2YWx1ZXNcclxuLy8gYXJlIHVuc2V0IG9yIGlmIG5vdGhpbmcgaXMgc3BlY2lmaWVkIGJ5IHdheSBvZiBpbmhlcml0YW5jZSBmcm9tIGFuIGFjY29yZGlvbi5cclxuLy8gTm90ZSB0aGF0IHRoaXMgaGFzaCBkb2VzIG5vdCBjb250YWluIG9wdGlvbnMgXCJjb2xsYXBzZWRcIiBvciBcImhlYWRpbmdcIixcclxuLy8gYmVjYXVzZSB0aG9zZSBhcmUgbm90IGluaGVyaXRhYmxlLlxyXG4kLm1vYmlsZS5jb2xsYXBzaWJsZS5kZWZhdWx0cyA9IHtcclxuXHRleHBhbmRDdWVUZXh0OiBcIiBjbGljayB0byBleHBhbmQgY29udGVudHNcIixcclxuXHRjb2xsYXBzZUN1ZVRleHQ6IFwiIGNsaWNrIHRvIGNvbGxhcHNlIGNvbnRlbnRzXCIsXHJcblx0Y29sbGFwc2VkSWNvbjogXCJwbHVzXCIsXHJcblx0Y29udGVudFRoZW1lOiBcImluaGVyaXRcIixcclxuXHRleHBhbmRlZEljb246IFwibWludXNcIixcclxuXHRpY29ucG9zOiBcImxlZnRcIixcclxuXHRpbnNldDogdHJ1ZSxcclxuXHRjb3JuZXJzOiB0cnVlLFxyXG5cdHRoZW1lOiBcImluaGVyaXRcIixcclxuXHRtaW5pOiBmYWxzZVxyXG59O1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG52YXIgdWlTY3JlZW5IaWRkZW5SZWdleCA9IC9cXGJ1aS1zY3JlZW4taGlkZGVuXFxiLztcclxuZnVuY3Rpb24gbm9IaWRkZW5DbGFzcyggZWxlbWVudHMgKSB7XHJcblx0dmFyIGluZGV4LFxyXG5cdFx0bGVuZ3RoID0gZWxlbWVudHMubGVuZ3RoLFxyXG5cdFx0cmVzdWx0ID0gW107XHJcblxyXG5cdGZvciAoIGluZGV4ID0gMDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KysgKSB7XHJcblx0XHRpZiAoICFlbGVtZW50c1sgaW5kZXggXS5jbGFzc05hbWUubWF0Y2goIHVpU2NyZWVuSGlkZGVuUmVnZXggKSApIHtcclxuXHRcdFx0cmVzdWx0LnB1c2goIGVsZW1lbnRzWyBpbmRleCBdICk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRyZXR1cm4gJCggcmVzdWx0ICk7XHJcbn1cclxuXHJcbiQubW9iaWxlLmJlaGF2aW9ycy5hZGRGaXJzdExhc3RDbGFzc2VzID0ge1xyXG5cdF9nZXRWaXNpYmxlczogZnVuY3Rpb24oICRlbHMsIGNyZWF0ZSApIHtcclxuXHRcdHZhciB2aXNpYmxlcztcclxuXHJcblx0XHRpZiAoIGNyZWF0ZSApIHtcclxuXHRcdFx0dmlzaWJsZXMgPSBub0hpZGRlbkNsYXNzKCAkZWxzICk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR2aXNpYmxlcyA9ICRlbHMuZmlsdGVyKCBcIjp2aXNpYmxlXCIgKTtcclxuXHRcdFx0aWYgKCB2aXNpYmxlcy5sZW5ndGggPT09IDAgKSB7XHJcblx0XHRcdFx0dmlzaWJsZXMgPSBub0hpZGRlbkNsYXNzKCAkZWxzICk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gdmlzaWJsZXM7XHJcblx0fSxcclxuXHJcblx0X2FkZEZpcnN0TGFzdENsYXNzZXM6IGZ1bmN0aW9uKCAkZWxzLCAkdmlzaWJsZXMsIGNyZWF0ZSApIHtcclxuXHRcdCRlbHMucmVtb3ZlQ2xhc3MoIFwidWktZmlyc3QtY2hpbGQgdWktbGFzdC1jaGlsZFwiICk7XHJcblx0XHQkdmlzaWJsZXMuZXEoIDAgKS5hZGRDbGFzcyggXCJ1aS1maXJzdC1jaGlsZFwiICkuZW5kKCkubGFzdCgpLmFkZENsYXNzKCBcInVpLWxhc3QtY2hpbGRcIiApO1xyXG5cdFx0aWYgKCAhY3JlYXRlICkge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQudHJpZ2dlciggXCJ1cGRhdGVsYXlvdXRcIiApO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9yZW1vdmVGaXJzdExhc3RDbGFzc2VzOiBmdW5jdGlvbiggJGVscyApIHtcclxuXHRcdCRlbHMucmVtb3ZlQ2xhc3MoIFwidWktZmlyc3QtY2hpbGQgdWktbGFzdC1jaGlsZFwiICk7XHJcblx0fVxyXG59O1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG52YXIgY2hpbGRDb2xsYXBzaWJsZXNTZWxlY3RvciA9IFwiOm1vYmlsZS1jb2xsYXBzaWJsZSwgXCIgKyAkLm1vYmlsZS5jb2xsYXBzaWJsZS5pbml0U2VsZWN0b3I7XHJcblxyXG4kLndpZGdldCggXCJtb2JpbGUuY29sbGFwc2libGVzZXRcIiwgJC5leHRlbmQoIHtcclxuXHJcblx0Ly8gVGhlIGluaXRTZWxlY3RvciBpcyBkZXByZWNhdGVkIGFzIG9mIDEuNC4wLiBJbiAxLjUuMCB3ZSB3aWxsIHVzZVxyXG5cdC8vIDpqcW1EYXRhKHJvbGU9J2NvbGxhcHNpYmxlc2V0Jykgd2hpY2ggd2lsbCBhbGxvdyB1cyB0byBnZXQgcmlkIG9mIHRoZSBsaW5lXHJcblx0Ly8gYmVsb3cgYWx0b2dldGhlciwgYmVjYXVzZSB0aGUgYXV0b2luaXQgd2lsbCBnZW5lcmF0ZSBzdWNoIGFuIGluaXRTZWxlY3RvclxyXG5cdGluaXRTZWxlY3RvcjogXCI6anFtRGF0YShyb2xlPSdjb2xsYXBzaWJsZS1zZXQnKSw6anFtRGF0YShyb2xlPSdjb2xsYXBzaWJsZXNldCcpXCIsXHJcblxyXG5cdG9wdGlvbnM6ICQuZXh0ZW5kKCB7XHJcblx0XHRlbmhhbmNlZDogZmFsc2VcclxuXHR9LCAkLm1vYmlsZS5jb2xsYXBzaWJsZS5kZWZhdWx0cyApLFxyXG5cclxuXHRfaGFuZGxlQ29sbGFwc2libGVFeHBhbmQ6IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdHZhciBjbG9zZXN0Q29sbGFwc2libGUgPSAkKCBldmVudC50YXJnZXQgKS5jbG9zZXN0KCBcIi51aS1jb2xsYXBzaWJsZVwiICk7XHJcblxyXG5cdFx0aWYgKCBjbG9zZXN0Q29sbGFwc2libGUucGFyZW50KCkuaXMoIFwiOm1vYmlsZS1jb2xsYXBzaWJsZXNldCwgOmpxbURhdGEocm9sZT0nY29sbGFwc2libGUtc2V0JylcIiApICkge1xyXG5cdFx0XHRjbG9zZXN0Q29sbGFwc2libGVcclxuXHRcdFx0XHQuc2libGluZ3MoIFwiLnVpLWNvbGxhcHNpYmxlOm5vdCgudWktY29sbGFwc2libGUtY29sbGFwc2VkKVwiIClcclxuXHRcdFx0XHQuY29sbGFwc2libGUoIFwiY29sbGFwc2VcIiApO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9jcmVhdGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGVsZW0gPSB0aGlzLmVsZW1lbnQsXHJcblx0XHRcdG9wdHMgPSB0aGlzLm9wdGlvbnM7XHJcblxyXG5cdFx0JC5leHRlbmQoIHRoaXMsIHtcclxuXHRcdFx0X2NsYXNzZXM6IFwiXCJcclxuXHRcdH0pO1xyXG5cclxuXHRcdGlmICggIW9wdHMuZW5oYW5jZWQgKSB7XHJcblx0XHRcdGVsZW0uYWRkQ2xhc3MoIFwidWktY29sbGFwc2libGUtc2V0IFwiICtcclxuXHRcdFx0XHR0aGlzLl90aGVtZUNsYXNzRnJvbU9wdGlvbiggXCJ1aS1ncm91cC10aGVtZS1cIiwgb3B0cy50aGVtZSApICsgXCIgXCIgK1xyXG5cdFx0XHRcdCggb3B0cy5jb3JuZXJzICYmIG9wdHMuaW5zZXQgPyBcInVpLWNvcm5lci1hbGwgXCIgOiBcIlwiICkgKTtcclxuXHRcdFx0dGhpcy5lbGVtZW50LmZpbmQoICQubW9iaWxlLmNvbGxhcHNpYmxlLmluaXRTZWxlY3RvciApLmNvbGxhcHNpYmxlKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5fb24oIGVsZW0sIHsgY29sbGFwc2libGVleHBhbmQ6IFwiX2hhbmRsZUNvbGxhcHNpYmxlRXhwYW5kXCIgfSApO1xyXG5cdH0sXHJcblxyXG5cdF90aGVtZUNsYXNzRnJvbU9wdGlvbjogZnVuY3Rpb24oIHByZWZpeCwgdmFsdWUgKSB7XHJcblx0XHRyZXR1cm4gKCB2YWx1ZSA/ICggdmFsdWUgPT09IFwibm9uZVwiID8gXCJcIiA6IHByZWZpeCArIHZhbHVlICkgOiBcIlwiICk7XHJcblx0fSxcclxuXHJcblx0X2luaXQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5fcmVmcmVzaCggdHJ1ZSApO1xyXG5cclxuXHRcdC8vIEJlY2F1c2UgdGhlIGNvcm5lcnMgYXJlIGhhbmRsZWQgYnkgdGhlIGNvbGxhcHNpYmxlIGl0c2VsZiBhbmQgdGhlIGRlZmF1bHQgc3RhdGUgaXMgY29sbGFwc2VkXHJcblx0XHQvLyBUaGF0IHdhcyBjYXVzaW5nIGh0dHBzOi8vZ2l0aHViLmNvbS9qcXVlcnkvanF1ZXJ5LW1vYmlsZS9pc3N1ZXMvNDExNlxyXG5cdFx0dGhpcy5lbGVtZW50XHJcblx0XHRcdC5jaGlsZHJlbiggY2hpbGRDb2xsYXBzaWJsZXNTZWxlY3RvciApXHJcblx0XHRcdC5maWx0ZXIoIFwiOmpxbURhdGEoY29sbGFwc2VkPSdmYWxzZScpXCIgKVxyXG5cdFx0XHQuY29sbGFwc2libGUoIFwiZXhwYW5kXCIgKTtcclxuXHR9LFxyXG5cclxuXHRfc2V0T3B0aW9uczogZnVuY3Rpb24oIG9wdGlvbnMgKSB7XHJcblx0XHR2YXIgcmV0LCBoYXNDb3JuZXJzLFxyXG5cdFx0XHRlbGVtID0gdGhpcy5lbGVtZW50LFxyXG5cdFx0XHR0aGVtZUNsYXNzID0gdGhpcy5fdGhlbWVDbGFzc0Zyb21PcHRpb24oIFwidWktZ3JvdXAtdGhlbWUtXCIsIG9wdGlvbnMudGhlbWUgKTtcclxuXHJcblx0XHRpZiAoIHRoZW1lQ2xhc3MgKSB7XHJcblx0XHRcdGVsZW1cclxuXHRcdFx0XHQucmVtb3ZlQ2xhc3MoIHRoaXMuX3RoZW1lQ2xhc3NGcm9tT3B0aW9uKCBcInVpLWdyb3VwLXRoZW1lLVwiLCB0aGlzLm9wdGlvbnMudGhlbWUgKSApXHJcblx0XHRcdFx0LmFkZENsYXNzKCB0aGVtZUNsYXNzICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBvcHRpb25zLmluc2V0ICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdGhhc0Nvcm5lcnMgPSAhISggb3B0aW9ucy5pbnNldCAmJiAoIG9wdGlvbnMuY29ybmVycyB8fCB0aGlzLm9wdGlvbnMuY29ybmVycyApICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBvcHRpb25zLmNvcm5lcnMgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0aGFzQ29ybmVycyA9ICEhKCBvcHRpb25zLmNvcm5lcnMgJiYgKCBvcHRpb25zLmluc2V0IHx8IHRoaXMub3B0aW9ucy5pbnNldCApICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBoYXNDb3JuZXJzICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdGVsZW0udG9nZ2xlQ2xhc3MoIFwidWktY29ybmVyLWFsbFwiLCBoYXNDb3JuZXJzICk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0ID0gdGhpcy5fc3VwZXIoIG9wdGlvbnMgKTtcclxuXHRcdHRoaXMuZWxlbWVudC5jaGlsZHJlbiggXCI6bW9iaWxlLWNvbGxhcHNpYmxlXCIgKS5jb2xsYXBzaWJsZSggXCJyZWZyZXNoXCIgKTtcclxuXHRcdHJldHVybiByZXQ7XHJcblx0fSxcclxuXHJcblx0X2Rlc3Ryb3k6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGVsID0gdGhpcy5lbGVtZW50O1xyXG5cclxuXHRcdHRoaXMuX3JlbW92ZUZpcnN0TGFzdENsYXNzZXMoIGVsLmNoaWxkcmVuKCBjaGlsZENvbGxhcHNpYmxlc1NlbGVjdG9yICkgKTtcclxuXHRcdGVsXHJcblx0XHRcdC5yZW1vdmVDbGFzcyggXCJ1aS1jb2xsYXBzaWJsZS1zZXQgdWktY29ybmVyLWFsbCBcIiArXHJcblx0XHRcdFx0dGhpcy5fdGhlbWVDbGFzc0Zyb21PcHRpb24oIFwidWktZ3JvdXAtdGhlbWUtXCIsIHRoaXMub3B0aW9ucy50aGVtZSApIClcclxuXHRcdFx0LmNoaWxkcmVuKCBcIjptb2JpbGUtY29sbGFwc2libGVcIiApXHJcblx0XHRcdC5jb2xsYXBzaWJsZSggXCJkZXN0cm95XCIgKTtcclxuXHR9LFxyXG5cclxuXHRfcmVmcmVzaDogZnVuY3Rpb24oIGNyZWF0ZSApIHtcclxuXHRcdHZhciBjb2xsYXBzaWJsZXNJblNldCA9IHRoaXMuZWxlbWVudC5jaGlsZHJlbiggY2hpbGRDb2xsYXBzaWJsZXNTZWxlY3RvciApO1xyXG5cclxuXHRcdHRoaXMuZWxlbWVudC5maW5kKCAkLm1vYmlsZS5jb2xsYXBzaWJsZS5pbml0U2VsZWN0b3IgKS5ub3QoIFwiLnVpLWNvbGxhcHNpYmxlXCIgKS5jb2xsYXBzaWJsZSgpO1xyXG5cclxuXHRcdHRoaXMuX2FkZEZpcnN0TGFzdENsYXNzZXMoIGNvbGxhcHNpYmxlc0luU2V0LCB0aGlzLl9nZXRWaXNpYmxlcyggY29sbGFwc2libGVzSW5TZXQsIGNyZWF0ZSApLCBjcmVhdGUgKTtcclxuXHR9LFxyXG5cclxuXHRyZWZyZXNoOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX3JlZnJlc2goIGZhbHNlICk7XHJcblx0fVxyXG59LCAkLm1vYmlsZS5iZWhhdmlvcnMuYWRkRmlyc3RMYXN0Q2xhc3NlcyApICk7XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcbi8vIERlcHJlY2F0ZWQgaW4gMS40XHJcbiQuZm4uZmllbGRjb250YWluID0gZnVuY3Rpb24oLyogb3B0aW9ucyAqLykge1xyXG5cdHJldHVybiB0aGlzLmFkZENsYXNzKCBcInVpLWZpZWxkLWNvbnRhaW5cIiApO1xyXG59O1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG4kLmZuLmdyaWQgPSBmdW5jdGlvbiggb3B0aW9ucyApIHtcclxuXHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xyXG5cclxuXHRcdHZhciAkdGhpcyA9ICQoIHRoaXMgKSxcclxuXHRcdFx0byA9ICQuZXh0ZW5kKHtcclxuXHRcdFx0XHRncmlkOiBudWxsXHJcblx0XHRcdH0sIG9wdGlvbnMgKSxcclxuXHRcdFx0JGtpZHMgPSAkdGhpcy5jaGlsZHJlbigpLFxyXG5cdFx0XHRncmlkQ29scyA9IHsgc29sbzoxLCBhOjIsIGI6MywgYzo0LCBkOjUgfSxcclxuXHRcdFx0Z3JpZCA9IG8uZ3JpZCxcclxuXHRcdFx0aXRlcmF0b3IsXHJcblx0XHRcdGxldHRlcjtcclxuXHJcblx0XHRcdGlmICggIWdyaWQgKSB7XHJcblx0XHRcdFx0aWYgKCAka2lkcy5sZW5ndGggPD0gNSApIHtcclxuXHRcdFx0XHRcdGZvciAoIGxldHRlciBpbiBncmlkQ29scyApIHtcclxuXHRcdFx0XHRcdFx0aWYgKCBncmlkQ29sc1sgbGV0dGVyIF0gPT09ICRraWRzLmxlbmd0aCApIHtcclxuXHRcdFx0XHRcdFx0XHRncmlkID0gbGV0dGVyO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdGdyaWQgPSBcImFcIjtcclxuXHRcdFx0XHRcdCR0aGlzLmFkZENsYXNzKCBcInVpLWdyaWQtZHVvXCIgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0aXRlcmF0b3IgPSBncmlkQ29sc1tncmlkXTtcclxuXHJcblx0XHQkdGhpcy5hZGRDbGFzcyggXCJ1aS1ncmlkLVwiICsgZ3JpZCApO1xyXG5cclxuXHRcdCRraWRzLmZpbHRlciggXCI6bnRoLWNoaWxkKFwiICsgaXRlcmF0b3IgKyBcIm4rMSlcIiApLmFkZENsYXNzKCBcInVpLWJsb2NrLWFcIiApO1xyXG5cclxuXHRcdGlmICggaXRlcmF0b3IgPiAxICkge1xyXG5cdFx0XHQka2lkcy5maWx0ZXIoIFwiOm50aC1jaGlsZChcIiArIGl0ZXJhdG9yICsgXCJuKzIpXCIgKS5hZGRDbGFzcyggXCJ1aS1ibG9jay1iXCIgKTtcclxuXHRcdH1cclxuXHRcdGlmICggaXRlcmF0b3IgPiAyICkge1xyXG5cdFx0XHQka2lkcy5maWx0ZXIoIFwiOm50aC1jaGlsZChcIiArIGl0ZXJhdG9yICsgXCJuKzMpXCIgKS5hZGRDbGFzcyggXCJ1aS1ibG9jay1jXCIgKTtcclxuXHRcdH1cclxuXHRcdGlmICggaXRlcmF0b3IgPiAzICkge1xyXG5cdFx0XHQka2lkcy5maWx0ZXIoIFwiOm50aC1jaGlsZChcIiArIGl0ZXJhdG9yICsgXCJuKzQpXCIgKS5hZGRDbGFzcyggXCJ1aS1ibG9jay1kXCIgKTtcclxuXHRcdH1cclxuXHRcdGlmICggaXRlcmF0b3IgPiA0ICkge1xyXG5cdFx0XHQka2lkcy5maWx0ZXIoIFwiOm50aC1jaGlsZChcIiArIGl0ZXJhdG9yICsgXCJuKzUpXCIgKS5hZGRDbGFzcyggXCJ1aS1ibG9jay1lXCIgKTtcclxuXHRcdH1cclxuXHR9KTtcclxufTtcclxufSkoIGpRdWVyeSApO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG4kLndpZGdldCggXCJtb2JpbGUubmF2YmFyXCIsIHtcclxuXHRvcHRpb25zOiB7XHJcblx0XHRpY29ucG9zOiBcInRvcFwiLFxyXG5cdFx0Z3JpZDogbnVsbFxyXG5cdH0sXHJcblxyXG5cdF9jcmVhdGU6IGZ1bmN0aW9uKCkge1xyXG5cclxuXHRcdHZhciAkbmF2YmFyID0gdGhpcy5lbGVtZW50LFxyXG5cdFx0XHQkbmF2YnRucyA9ICRuYXZiYXIuZmluZCggXCJhLCBidXR0b25cIiApLFxyXG5cdFx0XHRpY29ucG9zID0gJG5hdmJ0bnMuZmlsdGVyKCBcIjpqcW1EYXRhKGljb24pXCIgKS5sZW5ndGggPyB0aGlzLm9wdGlvbnMuaWNvbnBvcyA6IHVuZGVmaW5lZDtcclxuXHJcblx0XHQkbmF2YmFyLmFkZENsYXNzKCBcInVpLW5hdmJhclwiIClcclxuXHRcdFx0LmF0dHIoIFwicm9sZVwiLCBcIm5hdmlnYXRpb25cIiApXHJcblx0XHRcdC5maW5kKCBcInVsXCIgKVxyXG5cdFx0XHQuanFtRW5oYW5jZWFibGUoKVxyXG5cdFx0XHQuZ3JpZCh7IGdyaWQ6IHRoaXMub3B0aW9ucy5ncmlkIH0pO1xyXG5cclxuXHRcdCRuYXZidG5zXHJcblx0XHRcdC5lYWNoKCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR2YXIgaWNvbiA9ICQubW9iaWxlLmdldEF0dHJpYnV0ZSggdGhpcywgXCJpY29uXCIgKSxcclxuXHRcdFx0XHRcdHRoZW1lID0gJC5tb2JpbGUuZ2V0QXR0cmlidXRlKCB0aGlzLCBcInRoZW1lXCIgKSxcclxuXHRcdFx0XHRcdGNsYXNzZXMgPSBcInVpLWJ0blwiO1xyXG5cclxuXHRcdFx0XHRpZiAoIHRoZW1lICkge1xyXG5cdFx0XHRcdFx0Y2xhc3NlcyArPSBcIiB1aS1idG4tXCIgKyB0aGVtZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWYgKCBpY29uICkge1xyXG5cdFx0XHRcdFx0Y2xhc3NlcyArPSBcIiB1aS1pY29uLVwiICsgaWNvbiArIFwiIHVpLWJ0bi1pY29uLVwiICsgaWNvbnBvcztcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0JCggdGhpcyApLmFkZENsYXNzKCBjbGFzc2VzICk7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdCRuYXZiYXIuZGVsZWdhdGUoIFwiYVwiLCBcInZjbGlja1wiLCBmdW5jdGlvbiggLyogZXZlbnQgKi8gKSB7XHJcblx0XHRcdHZhciBhY3RpdmVCdG4gPSAkKCB0aGlzICk7XHJcblxyXG5cdFx0XHRpZiAoICEoIGFjdGl2ZUJ0bi5oYXNDbGFzcyggXCJ1aS1zdGF0ZS1kaXNhYmxlZFwiICkgfHxcclxuXHJcblx0XHRcdFx0Ly8gREVQUkVDQVRFRCBhcyBvZiAxLjQuMCAtIHJlbW92ZSBhZnRlciAxLjQuMCByZWxlYXNlXHJcblx0XHRcdFx0Ly8gb25seSB1aS1zdGF0ZS1kaXNhYmxlZCBzaG91bGQgYmUgcHJlc2VudCB0aGVyZWFmdGVyXHJcblx0XHRcdFx0YWN0aXZlQnRuLmhhc0NsYXNzKCBcInVpLWRpc2FibGVkXCIgKSB8fFxyXG5cdFx0XHRcdGFjdGl2ZUJ0bi5oYXNDbGFzcyggJC5tb2JpbGUuYWN0aXZlQnRuQ2xhc3MgKSApICkge1xyXG5cclxuXHRcdFx0XHQkbmF2YnRucy5yZW1vdmVDbGFzcyggJC5tb2JpbGUuYWN0aXZlQnRuQ2xhc3MgKTtcclxuXHRcdFx0XHRhY3RpdmVCdG4uYWRkQ2xhc3MoICQubW9iaWxlLmFjdGl2ZUJ0bkNsYXNzICk7XHJcblxyXG5cdFx0XHRcdC8vIFRoZSBjb2RlIGJlbG93IGlzIGEgd29ya2Fyb3VuZCB0byBmaXggIzExODFcclxuXHRcdFx0XHQkKCBkb2N1bWVudCApLm9uZSggXCJwYWdlaGlkZVwiLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdGFjdGl2ZUJ0bi5yZW1vdmVDbGFzcyggJC5tb2JpbGUuYWN0aXZlQnRuQ2xhc3MgKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gQnV0dG9ucyBpbiB0aGUgbmF2YmFyIHdpdGggdWktc3RhdGUtcGVyc2lzdCBjbGFzcyBzaG91bGQgcmVnYWluIHRoZWlyIGFjdGl2ZSBzdGF0ZSBiZWZvcmUgcGFnZSBzaG93XHJcblx0XHQkbmF2YmFyLmNsb3Nlc3QoIFwiLnVpLXBhZ2VcIiApLmJpbmQoIFwicGFnZWJlZm9yZXNob3dcIiwgZnVuY3Rpb24oKSB7XHJcblx0XHRcdCRuYXZidG5zLmZpbHRlciggXCIudWktc3RhdGUtcGVyc2lzdFwiICkuYWRkQ2xhc3MoICQubW9iaWxlLmFjdGl2ZUJ0bkNsYXNzICk7XHJcblx0XHR9KTtcclxuXHR9XHJcbn0pO1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG52YXIgZ2V0QXR0ciA9ICQubW9iaWxlLmdldEF0dHJpYnV0ZTtcclxuXHJcbiQud2lkZ2V0KCBcIm1vYmlsZS5saXN0dmlld1wiLCAkLmV4dGVuZCgge1xyXG5cclxuXHRvcHRpb25zOiB7XHJcblx0XHR0aGVtZTogbnVsbCxcclxuXHRcdGNvdW50VGhlbWU6IG51bGwsIC8qIERlcHJlY2F0ZWQgaW4gMS40ICovXHJcblx0XHRkaXZpZGVyVGhlbWU6IG51bGwsXHJcblx0XHRpY29uOiBcImNhcmF0LXJcIixcclxuXHRcdHNwbGl0SWNvbjogXCJjYXJhdC1yXCIsXHJcblx0XHRzcGxpdFRoZW1lOiBudWxsLFxyXG5cdFx0Y29ybmVyczogdHJ1ZSxcclxuXHRcdHNoYWRvdzogdHJ1ZSxcclxuXHRcdGluc2V0OiBmYWxzZVxyXG5cdH0sXHJcblxyXG5cdF9jcmVhdGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHQgPSB0aGlzLFxyXG5cdFx0XHRsaXN0dmlld0NsYXNzZXMgPSBcIlwiO1xyXG5cclxuXHRcdGxpc3R2aWV3Q2xhc3NlcyArPSB0Lm9wdGlvbnMuaW5zZXQgPyBcIiB1aS1saXN0dmlldy1pbnNldFwiIDogXCJcIjtcclxuXHJcblx0XHRpZiAoICEhdC5vcHRpb25zLmluc2V0ICkge1xyXG5cdFx0XHRsaXN0dmlld0NsYXNzZXMgKz0gdC5vcHRpb25zLmNvcm5lcnMgPyBcIiB1aS1jb3JuZXItYWxsXCIgOiBcIlwiO1xyXG5cdFx0XHRsaXN0dmlld0NsYXNzZXMgKz0gdC5vcHRpb25zLnNoYWRvdyA/IFwiIHVpLXNoYWRvd1wiIDogXCJcIjtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBjcmVhdGUgbGlzdHZpZXcgbWFya3VwXHJcblx0XHR0LmVsZW1lbnQuYWRkQ2xhc3MoIFwiIHVpLWxpc3R2aWV3XCIgKyBsaXN0dmlld0NsYXNzZXMgKTtcclxuXHJcblx0XHR0LnJlZnJlc2goIHRydWUgKTtcclxuXHR9LFxyXG5cclxuXHQvLyBUT0RPOiBSZW1vdmUgaW4gMS41XHJcblx0X2ZpbmRGaXJzdEVsZW1lbnRCeVRhZ05hbWU6IGZ1bmN0aW9uKCBlbGUsIG5leHRQcm9wLCBsY05hbWUsIHVjTmFtZSApIHtcclxuXHRcdHZhciBkaWN0ID0ge307XHJcblx0XHRkaWN0WyBsY05hbWUgXSA9IGRpY3RbIHVjTmFtZSBdID0gdHJ1ZTtcclxuXHRcdHdoaWxlICggZWxlICkge1xyXG5cdFx0XHRpZiAoIGRpY3RbIGVsZS5ub2RlTmFtZSBdICkge1xyXG5cdFx0XHRcdHJldHVybiBlbGU7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxlID0gZWxlWyBuZXh0UHJvcCBdO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIG51bGw7XHJcblx0fSxcclxuXHQvLyBUT0RPOiBSZW1vdmUgaW4gMS41XHJcblx0X2FkZFRodW1iQ2xhc3NlczogZnVuY3Rpb24oIGNvbnRhaW5lcnMgKSB7XHJcblx0XHR2YXIgaSwgaW1nLCBsZW4gPSBjb250YWluZXJzLmxlbmd0aDtcclxuXHRcdGZvciAoIGkgPSAwOyBpIDwgbGVuOyBpKysgKSB7XHJcblx0XHRcdGltZyA9ICQoIHRoaXMuX2ZpbmRGaXJzdEVsZW1lbnRCeVRhZ05hbWUoIGNvbnRhaW5lcnNbIGkgXS5maXJzdENoaWxkLCBcIm5leHRTaWJsaW5nXCIsIFwiaW1nXCIsIFwiSU1HXCIgKSApO1xyXG5cdFx0XHRpZiAoIGltZy5sZW5ndGggKSB7XHJcblx0XHRcdFx0JCggdGhpcy5fZmluZEZpcnN0RWxlbWVudEJ5VGFnTmFtZSggaW1nWyAwIF0ucGFyZW50Tm9kZSwgXCJwYXJlbnROb2RlXCIsIFwibGlcIiwgXCJMSVwiICkgKS5hZGRDbGFzcyggaW1nLmhhc0NsYXNzKCBcInVpLWxpLWljb25cIiApID8gXCJ1aS1saS1oYXMtaWNvblwiIDogXCJ1aS1saS1oYXMtdGh1bWJcIiApO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X2dldENoaWxkcmVuQnlUYWdOYW1lOiBmdW5jdGlvbiggZWxlLCBsY05hbWUsIHVjTmFtZSApIHtcclxuXHRcdHZhciByZXN1bHRzID0gW10sXHJcblx0XHRcdGRpY3QgPSB7fTtcclxuXHRcdGRpY3RbIGxjTmFtZSBdID0gZGljdFsgdWNOYW1lIF0gPSB0cnVlO1xyXG5cdFx0ZWxlID0gZWxlLmZpcnN0Q2hpbGQ7XHJcblx0XHR3aGlsZSAoIGVsZSApIHtcclxuXHRcdFx0aWYgKCBkaWN0WyBlbGUubm9kZU5hbWUgXSApIHtcclxuXHRcdFx0XHRyZXN1bHRzLnB1c2goIGVsZSApO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsZSA9IGVsZS5uZXh0U2libGluZztcclxuXHRcdH1cclxuXHRcdHJldHVybiAkKCByZXN1bHRzICk7XHJcblx0fSxcclxuXHJcblx0X2JlZm9yZUxpc3R2aWV3UmVmcmVzaDogJC5ub29wLFxyXG5cdF9hZnRlckxpc3R2aWV3UmVmcmVzaDogJC5ub29wLFxyXG5cclxuXHRyZWZyZXNoOiBmdW5jdGlvbiggY3JlYXRlICkge1xyXG5cdFx0dmFyIGJ1dHRvbkNsYXNzLCBwb3MsIG51bWxpLCBpdGVtLCBpdGVtQ2xhc3MsIGl0ZW1UaGVtZSwgaXRlbUljb24sIGljb24sIGEsXHJcblx0XHRcdGlzRGl2aWRlciwgc3RhcnRDb3VudCwgbmV3U3RhcnRDb3VudCwgdmFsdWUsIGxhc3QsIHNwbGl0dGhlbWUsIHNwbGl0VGhlbWVDbGFzcywgc3BsaXRpY29uLFxyXG5cdFx0XHRhbHRCdXR0b25DbGFzcywgZGl2aWRlclRoZW1lLCBsaSxcclxuXHRcdFx0byA9IHRoaXMub3B0aW9ucyxcclxuXHRcdFx0JGxpc3QgPSB0aGlzLmVsZW1lbnQsXHJcblx0XHRcdG9sID0gISEkLm5vZGVOYW1lKCAkbGlzdFsgMCBdLCBcIm9sXCIgKSxcclxuXHRcdFx0c3RhcnQgPSAkbGlzdC5hdHRyKCBcInN0YXJ0XCIgKSxcclxuXHRcdFx0aXRlbUNsYXNzRGljdCA9IHt9LFxyXG5cdFx0XHRjb3VudEJ1YmJsZXMgPSAkbGlzdC5maW5kKCBcIi51aS1saS1jb3VudFwiICksXHJcblx0XHRcdGNvdW50VGhlbWUgPSBnZXRBdHRyKCAkbGlzdFsgMCBdLCBcImNvdW50dGhlbWVcIiApIHx8IHRoaXMub3B0aW9ucy5jb3VudFRoZW1lLFxyXG5cdFx0XHRjb3VudFRoZW1lQ2xhc3MgPSBjb3VudFRoZW1lID8gXCJ1aS1ib2R5LVwiICsgY291bnRUaGVtZSA6IFwidWktYm9keS1pbmhlcml0XCI7XHJcblxyXG5cdFx0aWYgKCBvLnRoZW1lICkge1xyXG5cdFx0XHQkbGlzdC5hZGRDbGFzcyggXCJ1aS1ncm91cC10aGVtZS1cIiArIG8udGhlbWUgKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBDaGVjayBpZiBhIHN0YXJ0IGF0dHJpYnV0ZSBoYXMgYmVlbiBzZXQgd2hpbGUgdGFraW5nIGEgdmFsdWUgb2YgMCBpbnRvIGFjY291bnRcclxuXHRcdGlmICggb2wgJiYgKCBzdGFydCB8fCBzdGFydCA9PT0gMCApICkge1xyXG5cdFx0XHRzdGFydENvdW50ID0gcGFyc2VJbnQoIHN0YXJ0LCAxMCApIC0gMTtcclxuXHRcdFx0JGxpc3QuY3NzKCBcImNvdW50ZXItcmVzZXRcIiwgXCJsaXN0bnVtYmVyaW5nIFwiICsgc3RhcnRDb3VudCApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX2JlZm9yZUxpc3R2aWV3UmVmcmVzaCgpO1xyXG5cclxuXHRcdGxpID0gdGhpcy5fZ2V0Q2hpbGRyZW5CeVRhZ05hbWUoICRsaXN0WyAwIF0sIFwibGlcIiwgXCJMSVwiICk7XHJcblxyXG5cdFx0Zm9yICggcG9zID0gMCwgbnVtbGkgPSBsaS5sZW5ndGg7IHBvcyA8IG51bWxpOyBwb3MrKyApIHtcclxuXHRcdFx0aXRlbSA9IGxpLmVxKCBwb3MgKTtcclxuXHRcdFx0aXRlbUNsYXNzID0gXCJcIjtcclxuXHJcblx0XHRcdGlmICggY3JlYXRlIHx8IGl0ZW1bIDAgXS5jbGFzc05hbWUuc2VhcmNoKCAvXFxidWktbGktc3RhdGljXFxifFxcYnVpLWxpLWRpdmlkZXJcXGIvICkgPCAwICkge1xyXG5cdFx0XHRcdGEgPSB0aGlzLl9nZXRDaGlsZHJlbkJ5VGFnTmFtZSggaXRlbVsgMCBdLCBcImFcIiwgXCJBXCIgKTtcclxuXHRcdFx0XHRpc0RpdmlkZXIgPSAoIGdldEF0dHIoIGl0ZW1bIDAgXSwgXCJyb2xlXCIgKSA9PT0gXCJsaXN0LWRpdmlkZXJcIiApO1xyXG5cdFx0XHRcdHZhbHVlID0gaXRlbS5hdHRyKCBcInZhbHVlXCIgKTtcclxuXHRcdFx0XHRpdGVtVGhlbWUgPSBnZXRBdHRyKCBpdGVtWyAwIF0sIFwidGhlbWVcIiApO1xyXG5cclxuXHRcdFx0XHRpZiAoIGEubGVuZ3RoICYmIGFbIDAgXS5jbGFzc05hbWUuc2VhcmNoKCAvXFxidWktYnRuXFxiLyApIDwgMCAmJiAhaXNEaXZpZGVyICkge1xyXG5cdFx0XHRcdFx0aXRlbUljb24gPSBnZXRBdHRyKCBpdGVtWyAwIF0sIFwiaWNvblwiICk7XHJcblx0XHRcdFx0XHRpY29uID0gKCBpdGVtSWNvbiA9PT0gZmFsc2UgKSA/IGZhbHNlIDogKCBpdGVtSWNvbiB8fCBvLmljb24gKTtcclxuXHJcblx0XHRcdFx0XHQvLyBUT0RPOiBSZW1vdmUgaW4gMS41IHRvZ2V0aGVyIHdpdGggbGlua3MuanMgKGxpbmtzLmpzIC8gLnVpLWxpbmsgZGVwcmVjYXRlZCBpbiAxLjQpXHJcblx0XHRcdFx0XHRhLnJlbW92ZUNsYXNzKCBcInVpLWxpbmtcIiApO1xyXG5cclxuXHRcdFx0XHRcdGJ1dHRvbkNsYXNzID0gXCJ1aS1idG5cIjtcclxuXHJcblx0XHRcdFx0XHRpZiAoIGl0ZW1UaGVtZSApIHtcclxuXHRcdFx0XHRcdFx0YnV0dG9uQ2xhc3MgKz0gXCIgdWktYnRuLVwiICsgaXRlbVRoZW1lO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdGlmICggYS5sZW5ndGggPiAxICkge1xyXG5cdFx0XHRcdFx0XHRpdGVtQ2xhc3MgPSBcInVpLWxpLWhhcy1hbHRcIjtcclxuXHJcblx0XHRcdFx0XHRcdGxhc3QgPSBhLmxhc3QoKTtcclxuXHRcdFx0XHRcdFx0c3BsaXR0aGVtZSA9IGdldEF0dHIoIGxhc3RbIDAgXSwgXCJ0aGVtZVwiICkgfHwgby5zcGxpdFRoZW1lIHx8IGdldEF0dHIoIGl0ZW1bIDAgXSwgXCJ0aGVtZVwiLCB0cnVlICk7XHJcblx0XHRcdFx0XHRcdHNwbGl0VGhlbWVDbGFzcyA9IHNwbGl0dGhlbWUgPyBcIiB1aS1idG4tXCIgKyBzcGxpdHRoZW1lIDogXCJcIjtcclxuXHRcdFx0XHRcdFx0c3BsaXRpY29uID0gZ2V0QXR0ciggbGFzdFsgMCBdLCBcImljb25cIiApIHx8IGdldEF0dHIoIGl0ZW1bIDAgXSwgXCJpY29uXCIgKSB8fCBvLnNwbGl0SWNvbjtcclxuXHRcdFx0XHRcdFx0YWx0QnV0dG9uQ2xhc3MgPSBcInVpLWJ0biB1aS1idG4taWNvbi1ub3RleHQgdWktaWNvbi1cIiArIHNwbGl0aWNvbiArIHNwbGl0VGhlbWVDbGFzcztcclxuXHJcblx0XHRcdFx0XHRcdGxhc3RcclxuXHRcdFx0XHRcdFx0XHQuYXR0ciggXCJ0aXRsZVwiLCAkLnRyaW0oIGxhc3QuZ2V0RW5jb2RlZFRleHQoKSApIClcclxuXHRcdFx0XHRcdFx0XHQuYWRkQ2xhc3MoIGFsdEJ1dHRvbkNsYXNzIClcclxuXHRcdFx0XHRcdFx0XHQuZW1wdHkoKTtcclxuXHJcblx0XHRcdFx0XHRcdC8vIFJlZHVjZSB0byB0aGUgZmlyc3QgYW5jaG9yLCBiZWNhdXNlIG9ubHkgdGhlIGZpcnN0IGdldHMgdGhlIGJ1dHRvbkNsYXNzXHJcblx0XHRcdFx0XHRcdGEgPSBhLmZpcnN0KCk7XHJcblx0XHRcdFx0XHR9IGVsc2UgaWYgKCBpY29uICkge1xyXG5cdFx0XHRcdFx0XHRidXR0b25DbGFzcyArPSBcIiB1aS1idG4taWNvbi1yaWdodCB1aS1pY29uLVwiICsgaWNvbjtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHQvLyBBcHBseSBidXR0b25DbGFzcyB0byB0aGUgKGZpcnN0KSBhbmNob3JcclxuXHRcdFx0XHRcdGEuYWRkQ2xhc3MoIGJ1dHRvbkNsYXNzICk7XHJcblx0XHRcdFx0fSBlbHNlIGlmICggaXNEaXZpZGVyICkge1xyXG5cdFx0XHRcdFx0ZGl2aWRlclRoZW1lID0gKCBnZXRBdHRyKCBpdGVtWyAwIF0sIFwidGhlbWVcIiApIHx8IG8uZGl2aWRlclRoZW1lIHx8IG8udGhlbWUgKTtcclxuXHJcblx0XHRcdFx0XHRpdGVtQ2xhc3MgPSBcInVpLWxpLWRpdmlkZXIgdWktYmFyLVwiICsgKCBkaXZpZGVyVGhlbWUgPyBkaXZpZGVyVGhlbWUgOiBcImluaGVyaXRcIiApO1xyXG5cclxuXHRcdFx0XHRcdGl0ZW0uYXR0ciggXCJyb2xlXCIsIFwiaGVhZGluZ1wiICk7XHJcblx0XHRcdFx0fSBlbHNlIGlmICggYS5sZW5ndGggPD0gMCApIHtcclxuXHRcdFx0XHRcdGl0ZW1DbGFzcyA9IFwidWktbGktc3RhdGljIHVpLWJvZHktXCIgKyAoIGl0ZW1UaGVtZSA/IGl0ZW1UaGVtZSA6IFwiaW5oZXJpdFwiICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmICggb2wgJiYgdmFsdWUgKSB7XHJcblx0XHRcdFx0XHRuZXdTdGFydENvdW50ID0gcGFyc2VJbnQoIHZhbHVlICwgMTAgKSAtIDE7XHJcblxyXG5cdFx0XHRcdFx0aXRlbS5jc3MoIFwiY291bnRlci1yZXNldFwiLCBcImxpc3RudW1iZXJpbmcgXCIgKyBuZXdTdGFydENvdW50ICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBJbnN0ZWFkIG9mIHNldHRpbmcgaXRlbSBjbGFzcyBkaXJlY3RseSBvbiB0aGUgbGlzdCBpdGVtXHJcblx0XHRcdC8vIGF0IHRoaXMgcG9pbnQgaW4gdGltZSwgcHVzaCB0aGUgaXRlbSBpbnRvIGEgZGljdGlvbmFyeVxyXG5cdFx0XHQvLyB0aGF0IHRlbGxzIHVzIHdoYXQgY2xhc3MgdG8gc2V0IG9uIGl0IHNvIHdlIGNhbiBkbyB0aGlzIGFmdGVyIHRoaXNcclxuXHRcdFx0Ly8gcHJvY2Vzc2luZyBsb29wIGlzIGZpbmlzaGVkLlxyXG5cclxuXHRcdFx0aWYgKCAhaXRlbUNsYXNzRGljdFsgaXRlbUNsYXNzIF0gKSB7XHJcblx0XHRcdFx0aXRlbUNsYXNzRGljdFsgaXRlbUNsYXNzIF0gPSBbXTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aXRlbUNsYXNzRGljdFsgaXRlbUNsYXNzIF0ucHVzaCggaXRlbVsgMCBdICk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gU2V0IHRoZSBhcHByb3ByaWF0ZSBsaXN0dmlldyBpdGVtIGNsYXNzZXMgb24gZWFjaCBsaXN0IGl0ZW0uXHJcblx0XHQvLyBUaGUgbWFpbiByZWFzb24gd2UgZGlkbid0IGRvIHRoaXNcclxuXHRcdC8vIGluIHRoZSBmb3ItbG9vcCBhYm92ZSBpcyBiZWNhdXNlIHdlIGNhbiBlbGltaW5hdGUgcGVyLWl0ZW0gZnVuY3Rpb24gb3ZlcmhlYWRcclxuXHRcdC8vIGJ5IGNhbGxpbmcgYWRkQ2xhc3MoKSBhbmQgY2hpbGRyZW4oKSBvbmNlIG9yIHR3aWNlIGFmdGVyd2FyZHMuIFRoaXNcclxuXHRcdC8vIGNhbiBnaXZlIHVzIGEgc2lnbmlmaWNhbnQgYm9vc3Qgb24gcGxhdGZvcm1zIGxpa2UgV1A3LjUuXHJcblxyXG5cdFx0Zm9yICggaXRlbUNsYXNzIGluIGl0ZW1DbGFzc0RpY3QgKSB7XHJcblx0XHRcdCQoIGl0ZW1DbGFzc0RpY3RbIGl0ZW1DbGFzcyBdICkuYWRkQ2xhc3MoIGl0ZW1DbGFzcyApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvdW50QnViYmxlcy5lYWNoKCBmdW5jdGlvbigpIHtcclxuXHRcdFx0JCggdGhpcyApLmNsb3Nlc3QoIFwibGlcIiApLmFkZENsYXNzKCBcInVpLWxpLWhhcy1jb3VudFwiICk7XHJcblx0XHR9KTtcclxuXHRcdGlmICggY291bnRUaGVtZUNsYXNzICkge1xyXG5cdFx0XHRjb3VudEJ1YmJsZXMubm90KCBcIltjbGFzcyo9J3VpLWJvZHktJ11cIiApLmFkZENsYXNzKCBjb3VudFRoZW1lQ2xhc3MgKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBEZXByZWNhdGVkIGluIDEuNC4gRnJvbSAxLjUgeW91IGhhdmUgdG8gYWRkIGNsYXNzIHVpLWxpLWhhcy10aHVtYiBvciB1aS1saS1oYXMtaWNvbiB0byB0aGUgTEkuXHJcblx0XHR0aGlzLl9hZGRUaHVtYkNsYXNzZXMoIGxpICk7XHJcblx0XHR0aGlzLl9hZGRUaHVtYkNsYXNzZXMoIGxpLmZpbmQoIFwiLnVpLWJ0blwiICkgKTtcclxuXHJcblx0XHR0aGlzLl9hZnRlckxpc3R2aWV3UmVmcmVzaCgpO1xyXG5cclxuXHRcdHRoaXMuX2FkZEZpcnN0TGFzdENsYXNzZXMoIGxpLCB0aGlzLl9nZXRWaXNpYmxlcyggbGksIGNyZWF0ZSApLCBjcmVhdGUgKTtcclxuXHR9XHJcbn0sICQubW9iaWxlLmJlaGF2aW9ycy5hZGRGaXJzdExhc3RDbGFzc2VzICkgKTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxuZnVuY3Rpb24gZGVmYXVsdEF1dG9kaXZpZGVyc1NlbGVjdG9yKCBlbHQgKSB7XHJcblx0Ly8gbG9vayBmb3IgdGhlIHRleHQgaW4gdGhlIGdpdmVuIGVsZW1lbnRcclxuXHR2YXIgdGV4dCA9ICQudHJpbSggZWx0LnRleHQoKSApIHx8IG51bGw7XHJcblxyXG5cdGlmICggIXRleHQgKSB7XHJcblx0XHRyZXR1cm4gbnVsbDtcclxuXHR9XHJcblxyXG5cdC8vIGNyZWF0ZSB0aGUgdGV4dCBmb3IgdGhlIGRpdmlkZXIgKGZpcnN0IHVwcGVyY2FzZWQgbGV0dGVyKVxyXG5cdHRleHQgPSB0ZXh0LnNsaWNlKCAwLCAxICkudG9VcHBlckNhc2UoKTtcclxuXHJcblx0cmV0dXJuIHRleHQ7XHJcbn1cclxuXHJcbiQud2lkZ2V0KCBcIm1vYmlsZS5saXN0dmlld1wiLCAkLm1vYmlsZS5saXN0dmlldywge1xyXG5cdG9wdGlvbnM6IHtcclxuXHRcdGF1dG9kaXZpZGVyczogZmFsc2UsXHJcblx0XHRhdXRvZGl2aWRlcnNTZWxlY3RvcjogZGVmYXVsdEF1dG9kaXZpZGVyc1NlbGVjdG9yXHJcblx0fSxcclxuXHJcblx0X2JlZm9yZUxpc3R2aWV3UmVmcmVzaDogZnVuY3Rpb24oKSB7XHJcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5hdXRvZGl2aWRlcnMgKSB7XHJcblx0XHRcdHRoaXMuX3JlcGxhY2VEaXZpZGVycygpO1xyXG5cdFx0XHR0aGlzLl9zdXBlckFwcGx5KCBhcmd1bWVudHMgKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfcmVwbGFjZURpdmlkZXJzOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBpLCBsaXMsIGxpLCBkaXZpZGVyVGV4dCxcclxuXHRcdFx0bGFzdERpdmlkZXJUZXh0ID0gbnVsbCxcclxuXHRcdFx0bGlzdCA9IHRoaXMuZWxlbWVudCxcclxuXHRcdFx0ZGl2aWRlcjtcclxuXHJcblx0XHRsaXN0LmNoaWxkcmVuKCBcImxpOmpxbURhdGEocm9sZT0nbGlzdC1kaXZpZGVyJylcIiApLnJlbW92ZSgpO1xyXG5cclxuXHRcdGxpcyA9IGxpc3QuY2hpbGRyZW4oIFwibGlcIiApO1xyXG5cclxuXHRcdGZvciAoIGkgPSAwOyBpIDwgbGlzLmxlbmd0aCA7IGkrKyApIHtcclxuXHRcdFx0bGkgPSBsaXNbIGkgXTtcclxuXHRcdFx0ZGl2aWRlclRleHQgPSB0aGlzLm9wdGlvbnMuYXV0b2RpdmlkZXJzU2VsZWN0b3IoICQoIGxpICkgKTtcclxuXHJcblx0XHRcdGlmICggZGl2aWRlclRleHQgJiYgbGFzdERpdmlkZXJUZXh0ICE9PSBkaXZpZGVyVGV4dCApIHtcclxuXHRcdFx0XHRkaXZpZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJsaVwiICk7XHJcblx0XHRcdFx0ZGl2aWRlci5hcHBlbmRDaGlsZCggZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoIGRpdmlkZXJUZXh0ICkgKTtcclxuXHRcdFx0XHRkaXZpZGVyLnNldEF0dHJpYnV0ZSggXCJkYXRhLVwiICsgJC5tb2JpbGUubnMgKyBcInJvbGVcIiwgXCJsaXN0LWRpdmlkZXJcIiApO1xyXG5cdFx0XHRcdGxpLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKCBkaXZpZGVyLCBsaSApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRsYXN0RGl2aWRlclRleHQgPSBkaXZpZGVyVGV4dDtcclxuXHRcdH1cclxuXHR9XHJcbn0pO1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG52YXIgcmRpdmlkZXIgPSAvKF58XFxzKXVpLWxpLWRpdmlkZXIoJHxcXHMpLyxcclxuXHRyaGlkZGVuID0gLyhefFxccyl1aS1zY3JlZW4taGlkZGVuKCR8XFxzKS87XHJcblxyXG4kLndpZGdldCggXCJtb2JpbGUubGlzdHZpZXdcIiwgJC5tb2JpbGUubGlzdHZpZXcsIHtcclxuXHRvcHRpb25zOiB7XHJcblx0XHRoaWRlRGl2aWRlcnM6IGZhbHNlXHJcblx0fSxcclxuXHJcblx0X2FmdGVyTGlzdHZpZXdSZWZyZXNoOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBpdGVtcywgaWR4LCBpdGVtLCBoaWRlRGl2aWRlciA9IHRydWU7XHJcblxyXG5cdFx0dGhpcy5fc3VwZXJBcHBseSggYXJndW1lbnRzICk7XHJcblxyXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMuaGlkZURpdmlkZXJzICkge1xyXG5cdFx0XHRpdGVtcyA9IHRoaXMuX2dldENoaWxkcmVuQnlUYWdOYW1lKCB0aGlzLmVsZW1lbnRbIDAgXSwgXCJsaVwiLCBcIkxJXCIgKTtcclxuXHRcdFx0Zm9yICggaWR4ID0gaXRlbXMubGVuZ3RoIC0gMSA7IGlkeCA+IC0xIDsgaWR4LS0gKSB7XHJcblx0XHRcdFx0aXRlbSA9IGl0ZW1zWyBpZHggXTtcclxuXHRcdFx0XHRpZiAoIGl0ZW0uY2xhc3NOYW1lLm1hdGNoKCByZGl2aWRlciApICkge1xyXG5cdFx0XHRcdFx0aWYgKCBoaWRlRGl2aWRlciApIHtcclxuXHRcdFx0XHRcdFx0aXRlbS5jbGFzc05hbWUgPSBpdGVtLmNsYXNzTmFtZSArIFwiIHVpLXNjcmVlbi1oaWRkZW5cIjtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGhpZGVEaXZpZGVyID0gdHJ1ZTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0aWYgKCAhaXRlbS5jbGFzc05hbWUubWF0Y2goIHJoaWRkZW4gKSApIHtcclxuXHRcdFx0XHRcdFx0aGlkZURpdmlkZXIgPSBmYWxzZTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcbn0pO1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG4kLm1vYmlsZS5ub2pzID0gZnVuY3Rpb24oIHRhcmdldCApIHtcclxuXHQkKCBcIjpqcW1EYXRhKHJvbGU9J25vanMnKVwiLCB0YXJnZXQgKS5hZGRDbGFzcyggXCJ1aS1ub2pzXCIgKTtcclxufTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxuJC5tb2JpbGUuYmVoYXZpb3JzLmZvcm1SZXNldCA9IHtcclxuXHRfaGFuZGxlRm9ybVJlc2V0OiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX29uKCB0aGlzLmVsZW1lbnQuY2xvc2VzdCggXCJmb3JtXCIgKSwge1xyXG5cdFx0XHRyZXNldDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0dGhpcy5fZGVsYXkoIFwiX3Jlc2V0XCIgKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0fVxyXG59O1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuLypcclxuKiBcImNoZWNrYm94cmFkaW9cIiBwbHVnaW5cclxuKi9cclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxudmFyIGVzY2FwZUlkID0gJC5tb2JpbGUucGF0aC5oYXNoVG9TZWxlY3RvcjtcclxuXHJcbiQud2lkZ2V0KCBcIm1vYmlsZS5jaGVja2JveHJhZGlvXCIsICQuZXh0ZW5kKCB7XHJcblxyXG5cdGluaXRTZWxlY3RvcjogXCJpbnB1dDpub3QoIDpqcW1EYXRhKHJvbGU9J2ZsaXBzd2l0Y2gnICkgKVt0eXBlPSdjaGVja2JveCddLGlucHV0W3R5cGU9J3JhZGlvJ106bm90KCA6anFtRGF0YShyb2xlPSdmbGlwc3dpdGNoJyApKVwiLFxyXG5cclxuXHRvcHRpb25zOiB7XHJcblx0XHR0aGVtZTogXCJpbmhlcml0XCIsXHJcblx0XHRtaW5pOiBmYWxzZSxcclxuXHRcdHdyYXBwZXJDbGFzczogbnVsbCxcclxuXHRcdGVuaGFuY2VkOiBmYWxzZSxcclxuXHRcdGljb25wb3M6IFwibGVmdFwiXHJcblxyXG5cdH0sXHJcblx0X2NyZWF0ZTogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgaW5wdXQgPSB0aGlzLmVsZW1lbnQsXHJcblx0XHRcdG8gPSB0aGlzLm9wdGlvbnMsXHJcblx0XHRcdGluaGVyaXRBdHRyID0gZnVuY3Rpb24oIGlucHV0LCBkYXRhQXR0ciApIHtcclxuXHRcdFx0XHRyZXR1cm4gaW5wdXQuanFtRGF0YSggZGF0YUF0dHIgKSB8fFxyXG5cdFx0XHRcdFx0aW5wdXQuY2xvc2VzdCggXCJmb3JtLCBmaWVsZHNldFwiICkuanFtRGF0YSggZGF0YUF0dHIgKTtcclxuXHRcdFx0fSxcclxuXHRcdFx0bGFiZWwgPSB0aGlzLm9wdGlvbnMuZW5oYW5jZWQgP1xyXG5cdFx0XHRcdHtcclxuXHRcdFx0XHRcdGVsZW1lbnQ6IHRoaXMuZWxlbWVudC5zaWJsaW5ncyggXCJsYWJlbFwiICksXHJcblx0XHRcdFx0XHRpc1BhcmVudDogZmFsc2VcclxuXHRcdFx0XHR9IDpcclxuXHRcdFx0XHR0aGlzLl9maW5kTGFiZWwoKSxcclxuXHRcdFx0aW5wdXR0eXBlID0gaW5wdXRbMF0udHlwZSxcclxuXHRcdFx0Y2hlY2tlZENsYXNzID0gXCJ1aS1cIiArIGlucHV0dHlwZSArIFwiLW9uXCIsXHJcblx0XHRcdHVuY2hlY2tlZENsYXNzID0gXCJ1aS1cIiArIGlucHV0dHlwZSArIFwiLW9mZlwiO1xyXG5cclxuXHRcdGlmICggaW5wdXR0eXBlICE9PSBcImNoZWNrYm94XCIgJiYgaW5wdXR0eXBlICE9PSBcInJhZGlvXCIgKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIHRoaXMuZWxlbWVudFswXS5kaXNhYmxlZCApIHtcclxuXHRcdFx0dGhpcy5vcHRpb25zLmRpc2FibGVkID0gdHJ1ZTtcclxuXHRcdH1cclxuXHJcblx0XHRvLmljb25wb3MgPSBpbmhlcml0QXR0ciggaW5wdXQsIFwiaWNvbnBvc1wiICkgfHxcclxuXHRcdFx0bGFiZWwuZWxlbWVudC5hdHRyKCBcImRhdGEtXCIgKyAkLm1vYmlsZS5ucyArIFwiaWNvbnBvc1wiICkgfHwgby5pY29ucG9zLFxyXG5cclxuXHRcdC8vIEVzdGFibGlzaCBvcHRpb25zXHJcblx0XHRvLm1pbmkgPSBpbmhlcml0QXR0ciggaW5wdXQsIFwibWluaVwiICkgfHwgby5taW5pO1xyXG5cclxuXHRcdC8vIEV4cG9zZSBmb3Igb3RoZXIgbWV0aG9kc1xyXG5cdFx0JC5leHRlbmQoIHRoaXMsIHtcclxuXHRcdFx0aW5wdXQ6IGlucHV0LFxyXG5cdFx0XHRsYWJlbDogbGFiZWwuZWxlbWVudCxcclxuXHRcdFx0bGFiZWxJc1BhcmVudDogbGFiZWwuaXNQYXJlbnQsXHJcblx0XHRcdGlucHV0dHlwZTogaW5wdXR0eXBlLFxyXG5cdFx0XHRjaGVja2VkQ2xhc3M6IGNoZWNrZWRDbGFzcyxcclxuXHRcdFx0dW5jaGVja2VkQ2xhc3M6IHVuY2hlY2tlZENsYXNzXHJcblx0XHR9KTtcclxuXHJcblx0XHRpZiAoICF0aGlzLm9wdGlvbnMuZW5oYW5jZWQgKSB7XHJcblx0XHRcdHRoaXMuX2VuaGFuY2UoKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl9vbiggbGFiZWwuZWxlbWVudCwge1xyXG5cdFx0XHR2bW91c2VvdmVyOiBcIl9oYW5kbGVMYWJlbFZNb3VzZU92ZXJcIixcclxuXHRcdFx0dmNsaWNrOiBcIl9oYW5kbGVMYWJlbFZDbGlja1wiXHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLl9vbiggaW5wdXQsIHtcclxuXHRcdFx0dm1vdXNlZG93bjogXCJfY2FjaGVWYWxzXCIsXHJcblx0XHRcdHZjbGljazogXCJfaGFuZGxlSW5wdXRWQ2xpY2tcIixcclxuXHRcdFx0Zm9jdXM6IFwiX2hhbmRsZUlucHV0Rm9jdXNcIixcclxuXHRcdFx0Ymx1cjogXCJfaGFuZGxlSW5wdXRCbHVyXCJcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMuX2hhbmRsZUZvcm1SZXNldCgpO1xyXG5cdFx0dGhpcy5yZWZyZXNoKCk7XHJcblx0fSxcclxuXHJcblx0X2ZpbmRMYWJlbDogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgcGFyZW50TGFiZWwsIGxhYmVsLCBpc1BhcmVudCxcclxuXHRcdFx0aW5wdXQgPSB0aGlzLmVsZW1lbnQsXHJcblx0XHRcdGxhYmVsc0xpc3QgPSBpbnB1dFsgMCBdLmxhYmVscztcclxuXHJcblx0XHRpZiggbGFiZWxzTGlzdCAmJiBsYWJlbHNMaXN0Lmxlbmd0aCA+IDAgKSB7XHJcblx0XHRcdGxhYmVsID0gJCggbGFiZWxzTGlzdFsgMCBdICk7XHJcblx0XHRcdGlzUGFyZW50ID0gJC5jb250YWlucyggbGFiZWxbIDAgXSwgaW5wdXRbIDAgXSApO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0cGFyZW50TGFiZWwgPSBpbnB1dC5jbG9zZXN0KCBcImxhYmVsXCIgKTtcclxuXHRcdFx0aXNQYXJlbnQgPSAoIHBhcmVudExhYmVsLmxlbmd0aCA+IDAgKTtcclxuXHJcblx0XHRcdC8vIE5PVEU6IFdpbmRvd3MgUGhvbmUgY291bGQgbm90IGZpbmQgdGhlIGxhYmVsIHRocm91Z2ggYSBzZWxlY3RvclxyXG5cdFx0XHQvLyBmaWx0ZXIgd29ya3MgdGhvdWdoLlxyXG5cdFx0XHRsYWJlbCA9IGlzUGFyZW50ID8gcGFyZW50TGFiZWwgOlxyXG5cdFx0XHRcdCQoIHRoaXMuZG9jdW1lbnRbIDAgXS5nZXRFbGVtZW50c0J5VGFnTmFtZSggXCJsYWJlbFwiICkgKVxyXG5cdFx0XHRcdFx0LmZpbHRlciggXCJbZm9yPSdcIiArIGVzY2FwZUlkKCBpbnB1dFsgMCBdLmlkICkgKyBcIiddXCIgKVxyXG5cdFx0XHRcdFx0LmZpcnN0KCk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHtcclxuXHRcdFx0ZWxlbWVudDogbGFiZWwsXHJcblx0XHRcdGlzUGFyZW50OiBpc1BhcmVudFxyXG5cdFx0fTtcclxuXHR9LFxyXG5cclxuXHRfZW5oYW5jZTogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLmxhYmVsLmFkZENsYXNzKCBcInVpLWJ0biB1aS1jb3JuZXItYWxsXCIpO1xyXG5cclxuXHRcdGlmICggdGhpcy5sYWJlbElzUGFyZW50ICkge1xyXG5cdFx0XHR0aGlzLmlucHV0LmFkZCggdGhpcy5sYWJlbCApLndyYXBBbGwoIHRoaXMuX3dyYXBwZXIoKSApO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0Ly90aGlzLmVsZW1lbnQucmVwbGFjZVdpdGgoIHRoaXMuaW5wdXQuYWRkKCB0aGlzLmxhYmVsICkud3JhcEFsbCggdGhpcy5fd3JhcHBlcigpICkgKTtcclxuXHRcdFx0dGhpcy5lbGVtZW50LndyYXAoIHRoaXMuX3dyYXBwZXIoKSApO1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQucGFyZW50KCkucHJlcGVuZCggdGhpcy5sYWJlbCApO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFdyYXAgdGhlIGlucHV0ICsgbGFiZWwgaW4gYSBkaXZcclxuXHJcblx0XHR0aGlzLl9zZXRPcHRpb25zKHtcclxuXHRcdFx0XCJ0aGVtZVwiOiB0aGlzLm9wdGlvbnMudGhlbWUsXHJcblx0XHRcdFwiaWNvbnBvc1wiOiB0aGlzLm9wdGlvbnMuaWNvbnBvcyxcclxuXHRcdFx0XCJtaW5pXCI6IHRoaXMub3B0aW9ucy5taW5pXHJcblx0XHR9KTtcclxuXHJcblx0fSxcclxuXHJcblx0X3dyYXBwZXI6IGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuICQoIFwiPGRpdiBjbGFzcz0nXCIgICtcclxuXHRcdFx0KCB0aGlzLm9wdGlvbnMud3JhcHBlckNsYXNzID8gdGhpcy5vcHRpb25zLndyYXBwZXJDbGFzcyA6IFwiXCIgKSArXHJcblx0XHRcdFwiIHVpLVwiICsgdGhpcy5pbnB1dHR5cGUgK1xyXG5cdFx0XHQoIHRoaXMub3B0aW9ucy5kaXNhYmxlZCA/IFwiIHVpLXN0YXRlLWRpc2FibGVkXCIgOiBcIlwiICkgKyBcIicgPjwvZGl2PlwiICk7XHJcblx0fSxcclxuXHJcblx0X2hhbmRsZUlucHV0Rm9jdXM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5sYWJlbC5hZGRDbGFzcyggJC5tb2JpbGUuZm9jdXNDbGFzcyApO1xyXG5cdH0sXHJcblxyXG5cdF9oYW5kbGVJbnB1dEJsdXI6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5sYWJlbC5yZW1vdmVDbGFzcyggJC5tb2JpbGUuZm9jdXNDbGFzcyApO1xyXG5cdH0sXHJcblxyXG5cdF9oYW5kbGVJbnB1dFZDbGljazogZnVuY3Rpb24oKSB7XHJcblx0XHQvLyBBZGRzIGNoZWNrZWQgYXR0cmlidXRlIHRvIGNoZWNrZWQgaW5wdXQgd2hlbiBrZXlib2FyZCBpcyB1c2VkXHJcblx0XHR0aGlzLmVsZW1lbnQucHJvcCggXCJjaGVja2VkXCIsIHRoaXMuZWxlbWVudC5pcyggXCI6Y2hlY2tlZFwiICkgKTtcclxuXHRcdHRoaXMuX2dldElucHV0U2V0KCkubm90KCB0aGlzLmVsZW1lbnQgKS5wcm9wKCBcImNoZWNrZWRcIiwgZmFsc2UgKTtcclxuXHRcdHRoaXMuX3VwZGF0ZUFsbCggdHJ1ZSApO1xyXG5cdH0sXHJcblxyXG5cdF9oYW5kbGVMYWJlbFZNb3VzZU92ZXI6IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdGlmICggdGhpcy5sYWJlbC5wYXJlbnQoKS5oYXNDbGFzcyggXCJ1aS1zdGF0ZS1kaXNhYmxlZFwiICkgKSB7XHJcblx0XHRcdGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9oYW5kbGVMYWJlbFZDbGljazogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0dmFyIGlucHV0ID0gdGhpcy5lbGVtZW50O1xyXG5cclxuXHRcdGlmICggaW5wdXQuaXMoIFwiOmRpc2FibGVkXCIgKSApIHtcclxuXHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX2NhY2hlVmFscygpO1xyXG5cclxuXHRcdGlucHV0LnByb3AoIFwiY2hlY2tlZFwiLCB0aGlzLmlucHV0dHlwZSA9PT0gXCJyYWRpb1wiICYmIHRydWUgfHwgIWlucHV0LnByb3AoIFwiY2hlY2tlZFwiICkgKTtcclxuXHJcblx0XHQvLyB0cmlnZ2VyIGNsaWNrIGhhbmRsZXIncyBib3VuZCBkaXJlY3RseSB0byB0aGUgaW5wdXQgYXMgYSBzdWJzdGl0dXRlIGZvclxyXG5cdFx0Ly8gaG93IGxhYmVsIGNsaWNrcyBiZWhhdmUgbm9ybWFsbHkgaW4gdGhlIGJyb3dzZXJzXHJcblx0XHQvLyBUT0RPOiBpdCB3b3VsZCBiZSBuaWNlIHRvIGxldCB0aGUgYnJvd3NlcidzIGhhbmRsZSB0aGUgY2xpY2tzIGFuZCBwYXNzIHRoZW1cclxuXHRcdC8vICAgICAgIHRocm91Z2ggdG8gdGhlIGFzc29jaWF0ZSBpbnB1dC4gd2UgY2FuIHN3YWxsb3cgdGhhdCBjbGljayBhdCB0aGUgcGFyZW50XHJcblx0XHQvLyAgICAgICB3cmFwcGVyIGVsZW1lbnQgbGV2ZWxcclxuXHRcdGlucHV0LnRyaWdnZXJIYW5kbGVyKCBcImNsaWNrXCIgKTtcclxuXHJcblx0XHQvLyBJbnB1dCBzZXQgZm9yIGNvbW1vbiByYWRpbyBidXR0b25zIHdpbGwgY29udGFpbiBhbGwgdGhlIHJhZGlvXHJcblx0XHQvLyBidXR0b25zLCBidXQgd2lsbCBub3QgZm9yIGNoZWNrYm94ZXMuIGNsZWFyaW5nIHRoZSBjaGVja2VkIHN0YXR1c1xyXG5cdFx0Ly8gb2Ygb3RoZXIgcmFkaW9zIGVuc3VyZXMgdGhlIGFjdGl2ZSBidXR0b24gc3RhdGUgaXMgYXBwbGllZCBwcm9wZXJseVxyXG5cdFx0dGhpcy5fZ2V0SW5wdXRTZXQoKS5ub3QoIGlucHV0ICkucHJvcCggXCJjaGVja2VkXCIsIGZhbHNlICk7XHJcblxyXG5cdFx0dGhpcy5fdXBkYXRlQWxsKCk7XHJcblx0XHRyZXR1cm4gZmFsc2U7XHJcblx0fSxcclxuXHJcblx0X2NhY2hlVmFsczogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9nZXRJbnB1dFNldCgpLmVhY2goIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHQkKCB0aGlzICkuYXR0cihcImRhdGEtXCIgKyAkLm1vYmlsZS5ucyArIFwiY2FjaGVWYWxcIiwgdGhpcy5jaGVja2VkICk7XHJcblx0XHR9KTtcclxuXHR9LFxyXG5cclxuXHQvLyBSZXR1cm5zIHRob3NlIHJhZGlvIGJ1dHRvbnMgdGhhdCBhcmUgc3VwcG9zZWQgdG8gYmUgaW4gdGhlIHNhbWUgZ3JvdXAgYXNcclxuXHQvLyB0aGlzIHJhZGlvIGJ1dHRvbi4gSW4gdGhlIGNhc2Ugb2YgYSBjaGVja2JveCBvciBhIHJhZGlvIGxhY2tpbmcgYSBuYW1lXHJcblx0Ly8gYXR0cmlidXRlLCBpdCByZXR1cm5zIHRoaXMuZWxlbWVudC5cclxuXHRfZ2V0SW5wdXRTZXQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHNlbGVjdG9yLCBmb3JtSWQsXHJcblx0XHRcdHJhZGlvID0gdGhpcy5lbGVtZW50WyAwIF0sXHJcblx0XHRcdG5hbWUgPSByYWRpby5uYW1lLFxyXG5cdFx0XHRmb3JtID0gcmFkaW8uZm9ybSxcclxuXHRcdFx0ZG9jID0gdGhpcy5lbGVtZW50LnBhcmVudHMoKS5sYXN0KCkuZ2V0KCAwICksXHJcblxyXG5cdFx0XHQvLyBBIHJhZGlvIGlzIGFsd2F5cyBhIG1lbWJlciBvZiBpdHMgb3duIGdyb3VwXHJcblx0XHRcdHJhZGlvcyA9IHRoaXMuZWxlbWVudDtcclxuXHJcblx0XHQvLyBPbmx5IHN0YXJ0IHJ1bm5pbmcgc2VsZWN0b3JzIGlmIHRoaXMgaXMgYW4gYXR0YWNoZWQgcmFkaW8gYnV0dG9uIHdpdGggYSBuYW1lXHJcblx0XHRpZiAoIG5hbWUgJiYgdGhpcy5pbnB1dHR5cGUgPT09IFwicmFkaW9cIiAmJiBkb2MgKSB7XHJcblx0XHRcdHNlbGVjdG9yID0gXCJpbnB1dFt0eXBlPSdyYWRpbyddW25hbWU9J1wiICsgZXNjYXBlSWQoIG5hbWUgKSArIFwiJ11cIjtcclxuXHJcblx0XHRcdC8vIElmIHdlJ3JlIGluc2lkZSBhIGZvcm1cclxuXHRcdFx0aWYgKCBmb3JtICkge1xyXG5cdFx0XHRcdGZvcm1JZCA9IGZvcm0uZ2V0QXR0cmlidXRlKCBcImlkXCIgKTtcclxuXHJcblx0XHRcdFx0Ly8gSWYgdGhlIGZvcm0gaGFzIGFuIElELCBjb2xsZWN0IHJhZGlvcyBzY2F0dGVyZWQgdGhyb3VnaHQgdGhlIGRvY3VtZW50IHdoaWNoXHJcblx0XHRcdFx0Ly8gbmV2ZXJ0aGVsZXNzIGFyZSBwYXJ0IG9mIHRoZSBmb3JtIGJ5IHdheSBvZiB0aGUgdmFsdWUgb2YgdGhlaXIgZm9ybSBhdHRyaWJ1dGVcclxuXHRcdFx0XHRpZiAoIGZvcm1JZCApIHtcclxuXHRcdFx0XHRcdHJhZGlvcyA9ICQoIHNlbGVjdG9yICsgXCJbZm9ybT0nXCIgKyBlc2NhcGVJZCggZm9ybUlkICkgKyBcIiddXCIsIGRvYyApO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0Ly8gQWxzbyBhZGQgdG8gdGhvc2UgdGhlIHJhZGlvcyBpbiB0aGUgZm9ybSBpdHNlbGZcclxuXHRcdFx0XHRyYWRpb3MgPSAkKCBmb3JtICkuZmluZCggc2VsZWN0b3IgKS5maWx0ZXIoIGZ1bmN0aW9uKCkge1xyXG5cclxuXHRcdFx0XHRcdC8vIFNvbWUgcmFkaW9zIGluc2lkZSB0aGUgZm9ybSBtYXkgYmVsb25nIHRvIHNvbWUgb3RoZXIgZm9ybSBieSB2aXJ0dWUgb2ZcclxuXHRcdFx0XHRcdC8vIGhhdmluZyBhIGZvcm0gYXR0cmlidXRlIGRlZmluZWQgb24gdGhlbSwgc28gd2UgbXVzdCBmaWx0ZXIgdGhlbSBvdXQgaGVyZVxyXG5cdFx0XHRcdFx0cmV0dXJuICggdGhpcy5mb3JtID09PSBmb3JtICk7XHJcblx0XHRcdFx0fSkuYWRkKCByYWRpb3MgKTtcclxuXHJcblx0XHRcdC8vIElmIHdlJ3JlIG91dHNpZGUgYSBmb3JtXHJcblx0XHRcdH0gZWxzZSB7XHJcblxyXG5cdFx0XHRcdC8vIENvbGxlY3QgYWxsIHRob3NlIHJhZGlvcyB3aGljaCBhcmUgYWxzbyBvdXRzaWRlIG9mIGEgZm9ybSBhbmQgbWF0Y2ggb3VyIG5hbWVcclxuXHRcdFx0XHRyYWRpb3MgPSAkKCBzZWxlY3RvciwgZG9jICkuZmlsdGVyKCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdHJldHVybiAhdGhpcy5mb3JtO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gcmFkaW9zO1xyXG5cdH0sXHJcblxyXG5cdF91cGRhdGVBbGw6IGZ1bmN0aW9uKCBjaGFuZ2VUcmlnZ2VyZWQgKSB7XHJcblx0XHR2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG5cdFx0dGhpcy5fZ2V0SW5wdXRTZXQoKS5lYWNoKCBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyICR0aGlzID0gJCggdGhpcyApO1xyXG5cclxuXHRcdFx0aWYgKCAoIHRoaXMuY2hlY2tlZCB8fCBzZWxmLmlucHV0dHlwZSA9PT0gXCJjaGVja2JveFwiICkgJiYgIWNoYW5nZVRyaWdnZXJlZCApIHtcclxuXHRcdFx0XHQkdGhpcy50cmlnZ2VyKCBcImNoYW5nZVwiICk7XHJcblx0XHRcdH1cclxuXHRcdH0pXHJcblx0XHQuY2hlY2tib3hyYWRpbyggXCJyZWZyZXNoXCIgKTtcclxuXHR9LFxyXG5cclxuXHRfcmVzZXQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5yZWZyZXNoKCk7XHJcblx0fSxcclxuXHJcblx0Ly8gSXMgdGhlIHdpZGdldCBzdXBwb3NlZCB0byBkaXNwbGF5IGFuIGljb24/XHJcblx0X2hhc0ljb246IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGNvbnRyb2xncm91cCwgY29udHJvbGdyb3VwV2lkZ2V0LFxyXG5cdFx0XHRjb250cm9sZ3JvdXBDb25zdHJ1Y3RvciA9ICQubW9iaWxlLmNvbnRyb2xncm91cDtcclxuXHJcblx0XHQvLyBJZiB0aGUgY29udHJvbGdyb3VwIHdpZGdldCBpcyBkZWZpbmVkIC4uLlxyXG5cdFx0aWYgKCBjb250cm9sZ3JvdXBDb25zdHJ1Y3RvciApIHtcclxuXHRcdFx0Y29udHJvbGdyb3VwID0gdGhpcy5lbGVtZW50LmNsb3Nlc3QoXHJcblx0XHRcdFx0XCI6bW9iaWxlLWNvbnRyb2xncm91cCxcIiArXHJcblx0XHRcdFx0Y29udHJvbGdyb3VwQ29uc3RydWN0b3IucHJvdG90eXBlLmluaXRTZWxlY3RvciApO1xyXG5cclxuXHRcdFx0Ly8gLi4uIGFuZCB0aGUgY2hlY2tib3ggaXMgaW4gYSBjb250cm9sZ3JvdXAgLi4uXHJcblx0XHRcdGlmICggY29udHJvbGdyb3VwLmxlbmd0aCA+IDAgKSB7XHJcblxyXG5cdFx0XHRcdC8vIC4uLiBsb29rIGZvciBhIGNvbnRyb2xncm91cCB3aWRnZXQgaW5zdGFuY2UsIGFuZCAuLi5cclxuXHRcdFx0XHRjb250cm9sZ3JvdXBXaWRnZXQgPSAkLmRhdGEoIGNvbnRyb2xncm91cFsgMCBdLCBcIm1vYmlsZS1jb250cm9sZ3JvdXBcIiApO1xyXG5cclxuXHRcdFx0XHQvLyAuLi4gaWYgZm91bmQsIGRlY2lkZSBiYXNlZCBvbiB0aGUgb3B0aW9uIHZhbHVlLCAuLi5cclxuXHRcdFx0XHRyZXR1cm4gKCAoIGNvbnRyb2xncm91cFdpZGdldCA/IGNvbnRyb2xncm91cFdpZGdldC5vcHRpb25zLnR5cGUgOlxyXG5cclxuXHRcdFx0XHRcdC8vIC4uLiBvdGhlcndpc2UgZGVjaWRlIGJhc2VkIG9uIHRoZSBcInR5cGVcIiBkYXRhIGF0dHJpYnV0ZS5cclxuXHRcdFx0XHRcdGNvbnRyb2xncm91cC5hdHRyKCBcImRhdGEtXCIgKyAkLm1vYmlsZS5ucyArIFwidHlwZVwiICkgKSAhPT0gXCJob3Jpem9udGFsXCIgKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8vIE5vcm1hbGx5LCB0aGUgd2lkZ2V0IGRpc3BsYXlzIGFuIGljb24uXHJcblx0XHRyZXR1cm4gdHJ1ZTtcclxuXHR9LFxyXG5cclxuXHRyZWZyZXNoOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBpc0NoZWNrZWQgPSB0aGlzLmVsZW1lbnRbIDAgXS5jaGVja2VkLFxyXG5cdFx0XHRhY3RpdmUgPSAkLm1vYmlsZS5hY3RpdmVCdG5DbGFzcyxcclxuXHRcdFx0aWNvbnBvc0NsYXNzID0gXCJ1aS1idG4taWNvbi1cIiArIHRoaXMub3B0aW9ucy5pY29ucG9zLFxyXG5cdFx0XHRhZGRDbGFzc2VzID0gW10sXHJcblx0XHRcdHJlbW92ZUNsYXNzZXMgPSBbXTtcclxuXHJcblx0XHRpZiAoIHRoaXMuX2hhc0ljb24oKSApIHtcclxuXHRcdFx0cmVtb3ZlQ2xhc3Nlcy5wdXNoKCBhY3RpdmUgKTtcclxuXHRcdFx0YWRkQ2xhc3Nlcy5wdXNoKCBpY29ucG9zQ2xhc3MgKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHJlbW92ZUNsYXNzZXMucHVzaCggaWNvbnBvc0NsYXNzICk7XHJcblx0XHRcdCggaXNDaGVja2VkID8gYWRkQ2xhc3NlcyA6IHJlbW92ZUNsYXNzZXMgKS5wdXNoKCBhY3RpdmUgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIGlzQ2hlY2tlZCApIHtcclxuXHRcdFx0YWRkQ2xhc3Nlcy5wdXNoKCB0aGlzLmNoZWNrZWRDbGFzcyApO1xyXG5cdFx0XHRyZW1vdmVDbGFzc2VzLnB1c2goIHRoaXMudW5jaGVja2VkQ2xhc3MgKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGFkZENsYXNzZXMucHVzaCggdGhpcy51bmNoZWNrZWRDbGFzcyApO1xyXG5cdFx0XHRyZW1vdmVDbGFzc2VzLnB1c2goIHRoaXMuY2hlY2tlZENsYXNzICk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy53aWRnZXQoKS50b2dnbGVDbGFzcyggXCJ1aS1zdGF0ZS1kaXNhYmxlZFwiLCB0aGlzLmVsZW1lbnQucHJvcCggXCJkaXNhYmxlZFwiICkgKTtcclxuXHJcblx0XHR0aGlzLmxhYmVsXHJcblx0XHRcdC5hZGRDbGFzcyggYWRkQ2xhc3Nlcy5qb2luKCBcIiBcIiApIClcclxuXHRcdFx0LnJlbW92ZUNsYXNzKCByZW1vdmVDbGFzc2VzLmpvaW4oIFwiIFwiICkgKTtcclxuXHR9LFxyXG5cclxuXHR3aWRnZXQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuIHRoaXMubGFiZWwucGFyZW50KCk7XHJcblx0fSxcclxuXHJcblx0X3NldE9wdGlvbnM6IGZ1bmN0aW9uKCBvcHRpb25zICkge1xyXG5cdFx0dmFyIGxhYmVsID0gdGhpcy5sYWJlbCxcclxuXHRcdFx0Y3VycmVudE9wdGlvbnMgPSB0aGlzLm9wdGlvbnMsXHJcblx0XHRcdG91dGVyID0gdGhpcy53aWRnZXQoKSxcclxuXHRcdFx0aGFzSWNvbiA9IHRoaXMuX2hhc0ljb24oKTtcclxuXHJcblx0XHRpZiAoIG9wdGlvbnMuZGlzYWJsZWQgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0dGhpcy5pbnB1dC5wcm9wKCBcImRpc2FibGVkXCIsICEhb3B0aW9ucy5kaXNhYmxlZCApO1xyXG5cdFx0XHRvdXRlci50b2dnbGVDbGFzcyggXCJ1aS1zdGF0ZS1kaXNhYmxlZFwiLCAhIW9wdGlvbnMuZGlzYWJsZWQgKTtcclxuXHRcdH1cclxuXHRcdGlmICggb3B0aW9ucy5taW5pICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdG91dGVyLnRvZ2dsZUNsYXNzKCBcInVpLW1pbmlcIiwgISFvcHRpb25zLm1pbmkgKTtcclxuXHRcdH1cclxuXHRcdGlmICggb3B0aW9ucy50aGVtZSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRsYWJlbFxyXG5cdFx0XHRcdC5yZW1vdmVDbGFzcyggXCJ1aS1idG4tXCIgKyBjdXJyZW50T3B0aW9ucy50aGVtZSApXHJcblx0XHRcdFx0LmFkZENsYXNzKCBcInVpLWJ0bi1cIiArIG9wdGlvbnMudGhlbWUgKTtcclxuXHRcdH1cclxuXHRcdGlmICggb3B0aW9ucy53cmFwcGVyQ2xhc3MgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0b3V0ZXJcclxuXHRcdFx0XHQucmVtb3ZlQ2xhc3MoIGN1cnJlbnRPcHRpb25zLndyYXBwZXJDbGFzcyApXHJcblx0XHRcdFx0LmFkZENsYXNzKCBvcHRpb25zLndyYXBwZXJDbGFzcyApO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCBvcHRpb25zLmljb25wb3MgIT09IHVuZGVmaW5lZCAmJiBoYXNJY29uICkge1xyXG5cdFx0XHRsYWJlbC5yZW1vdmVDbGFzcyggXCJ1aS1idG4taWNvbi1cIiArIGN1cnJlbnRPcHRpb25zLmljb25wb3MgKS5hZGRDbGFzcyggXCJ1aS1idG4taWNvbi1cIiArIG9wdGlvbnMuaWNvbnBvcyApO1xyXG5cdFx0fSBlbHNlIGlmICggIWhhc0ljb24gKSB7XHJcblx0XHRcdGxhYmVsLnJlbW92ZUNsYXNzKCBcInVpLWJ0bi1pY29uLVwiICsgY3VycmVudE9wdGlvbnMuaWNvbnBvcyApO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5fc3VwZXIoIG9wdGlvbnMgKTtcclxuXHR9XHJcblxyXG59LCAkLm1vYmlsZS5iZWhhdmlvcnMuZm9ybVJlc2V0ICkgKTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxuJC53aWRnZXQoIFwibW9iaWxlLmJ1dHRvblwiLCB7XHJcblxyXG5cdGluaXRTZWxlY3RvcjogXCJpbnB1dFt0eXBlPSdidXR0b24nXSwgaW5wdXRbdHlwZT0nc3VibWl0J10sIGlucHV0W3R5cGU9J3Jlc2V0J11cIixcclxuXHJcblx0b3B0aW9uczoge1xyXG5cdFx0dGhlbWU6IG51bGwsXHJcblx0XHRpY29uOiBudWxsLFxyXG5cdFx0aWNvbnBvczogXCJsZWZ0XCIsXHJcblx0XHRpY29uc2hhZG93OiBmYWxzZSwgLyogVE9ETzogRGVwcmVjYXRlZCBpbiAxLjQsIHJlbW92ZSBpbiAxLjUuICovXHJcblx0XHRjb3JuZXJzOiB0cnVlLFxyXG5cdFx0c2hhZG93OiB0cnVlLFxyXG5cdFx0aW5saW5lOiBudWxsLFxyXG5cdFx0bWluaTogbnVsbCxcclxuXHRcdHdyYXBwZXJDbGFzczogbnVsbCxcclxuXHRcdGVuaGFuY2VkOiBmYWxzZVxyXG5cdH0sXHJcblxyXG5cdF9jcmVhdGU6IGZ1bmN0aW9uKCkge1xyXG5cclxuXHRcdGlmICggdGhpcy5lbGVtZW50LmlzKCBcIjpkaXNhYmxlZFwiICkgKSB7XHJcblx0XHRcdHRoaXMub3B0aW9ucy5kaXNhYmxlZCA9IHRydWU7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCAhdGhpcy5vcHRpb25zLmVuaGFuY2VkICkge1xyXG5cdFx0XHR0aGlzLl9lbmhhbmNlKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0JC5leHRlbmQoIHRoaXMsIHtcclxuXHRcdFx0d3JhcHBlcjogdGhpcy5lbGVtZW50LnBhcmVudCgpXHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLl9vbigge1xyXG5cdFx0XHRmb2N1czogZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0dGhpcy53aWRnZXQoKS5hZGRDbGFzcyggJC5tb2JpbGUuZm9jdXNDbGFzcyApO1xyXG5cdFx0XHR9LFxyXG5cclxuXHRcdFx0Ymx1cjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0dGhpcy53aWRnZXQoKS5yZW1vdmVDbGFzcyggJC5tb2JpbGUuZm9jdXNDbGFzcyApO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLnJlZnJlc2goIHRydWUgKTtcclxuXHR9LFxyXG5cclxuXHRfZW5oYW5jZTogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLmVsZW1lbnQud3JhcCggdGhpcy5fYnV0dG9uKCkgKTtcclxuXHR9LFxyXG5cclxuXHRfYnV0dG9uOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zLFxyXG5cdFx0XHRpY29uQ2xhc3NlcyA9IHRoaXMuX2dldEljb25DbGFzc2VzKCB0aGlzLm9wdGlvbnMgKTtcclxuXHJcblx0XHRyZXR1cm4gJChcIjxkaXYgY2xhc3M9J3VpLWJ0biB1aS1pbnB1dC1idG5cIiArXHJcblx0XHRcdCggb3B0aW9ucy53cmFwcGVyQ2xhc3MgPyBcIiBcIiArIG9wdGlvbnMud3JhcHBlckNsYXNzIDogXCJcIiApICtcclxuXHRcdFx0KCBvcHRpb25zLnRoZW1lID8gXCIgdWktYnRuLVwiICsgb3B0aW9ucy50aGVtZSA6IFwiXCIgKSArXHJcblx0XHRcdCggb3B0aW9ucy5jb3JuZXJzID8gXCIgdWktY29ybmVyLWFsbFwiIDogXCJcIiApICtcclxuXHRcdFx0KCBvcHRpb25zLnNoYWRvdyA/IFwiIHVpLXNoYWRvd1wiIDogXCJcIiApICtcclxuXHRcdFx0KCBvcHRpb25zLmlubGluZSA/IFwiIHVpLWJ0bi1pbmxpbmVcIiA6IFwiXCIgKSArXHJcblx0XHRcdCggb3B0aW9ucy5taW5pID8gXCIgdWktbWluaVwiIDogXCJcIiApICtcclxuXHRcdFx0KCBvcHRpb25zLmRpc2FibGVkID8gXCIgdWktc3RhdGUtZGlzYWJsZWRcIiA6IFwiXCIgKSArXHJcblx0XHRcdCggaWNvbkNsYXNzZXMgPyAoIFwiIFwiICsgaWNvbkNsYXNzZXMgKSA6IFwiXCIgKSArXHJcblx0XHRcdFwiJyA+XCIgKyB0aGlzLmVsZW1lbnQudmFsKCkgKyBcIjwvZGl2PlwiICk7XHJcblx0fSxcclxuXHJcblx0d2lkZ2V0OiBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiB0aGlzLndyYXBwZXI7XHJcblx0fSxcclxuXHJcblx0X2Rlc3Ryb3k6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQuaW5zZXJ0QmVmb3JlKCB0aGlzLndyYXBwZXIgKTtcclxuXHRcdFx0dGhpcy53cmFwcGVyLnJlbW92ZSgpO1xyXG5cdH0sXHJcblxyXG5cdF9nZXRJY29uQ2xhc3NlczogZnVuY3Rpb24oIG9wdGlvbnMgKSB7XHJcblx0XHRyZXR1cm4gKCBvcHRpb25zLmljb24gPyAoIFwidWktaWNvbi1cIiArIG9wdGlvbnMuaWNvbiArXHJcblx0XHRcdCggb3B0aW9ucy5pY29uc2hhZG93ID8gXCIgdWktc2hhZG93LWljb25cIiA6IFwiXCIgKSArIC8qIFRPRE86IERlcHJlY2F0ZWQgaW4gMS40LCByZW1vdmUgaW4gMS41LiAqL1xyXG5cdFx0XHRcIiB1aS1idG4taWNvbi1cIiArIG9wdGlvbnMuaWNvbnBvcyApIDogXCJcIiApO1xyXG5cdH0sXHJcblxyXG5cdF9zZXRPcHRpb25zOiBmdW5jdGlvbiggb3B0aW9ucyApIHtcclxuXHRcdHZhciBvdXRlciA9IHRoaXMud2lkZ2V0KCk7XHJcblxyXG5cdFx0aWYgKCBvcHRpb25zLnRoZW1lICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdG91dGVyXHJcblx0XHRcdFx0LnJlbW92ZUNsYXNzKCB0aGlzLm9wdGlvbnMudGhlbWUgKVxyXG5cdFx0XHRcdC5hZGRDbGFzcyggXCJ1aS1idG4tXCIgKyBvcHRpb25zLnRoZW1lICk7XHJcblx0XHR9XHJcblx0XHRpZiAoIG9wdGlvbnMuY29ybmVycyAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRvdXRlci50b2dnbGVDbGFzcyggXCJ1aS1jb3JuZXItYWxsXCIsIG9wdGlvbnMuY29ybmVycyApO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCBvcHRpb25zLnNoYWRvdyAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRvdXRlci50b2dnbGVDbGFzcyggXCJ1aS1zaGFkb3dcIiwgb3B0aW9ucy5zaGFkb3cgKTtcclxuXHRcdH1cclxuXHRcdGlmICggb3B0aW9ucy5pbmxpbmUgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0b3V0ZXIudG9nZ2xlQ2xhc3MoIFwidWktYnRuLWlubGluZVwiLCBvcHRpb25zLmlubGluZSApO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCBvcHRpb25zLm1pbmkgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0b3V0ZXIudG9nZ2xlQ2xhc3MoIFwidWktbWluaVwiLCBvcHRpb25zLm1pbmkgKTtcclxuXHRcdH1cclxuXHRcdGlmICggb3B0aW9ucy5kaXNhYmxlZCAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQucHJvcCggXCJkaXNhYmxlZFwiLCBvcHRpb25zLmRpc2FibGVkICk7XHJcblx0XHRcdG91dGVyLnRvZ2dsZUNsYXNzKCBcInVpLXN0YXRlLWRpc2FibGVkXCIsIG9wdGlvbnMuZGlzYWJsZWQgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG9wdGlvbnMuaWNvbiAhPT0gdW5kZWZpbmVkIHx8XHJcblx0XHRcdFx0b3B0aW9ucy5pY29uc2hhZG93ICE9PSB1bmRlZmluZWQgfHwgLyogVE9ETzogRGVwcmVjYXRlZCBpbiAxLjQsIHJlbW92ZSBpbiAxLjUuICovXHJcblx0XHRcdFx0b3B0aW9ucy5pY29ucG9zICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdG91dGVyXHJcblx0XHRcdFx0LnJlbW92ZUNsYXNzKCB0aGlzLl9nZXRJY29uQ2xhc3NlcyggdGhpcy5vcHRpb25zICkgKVxyXG5cdFx0XHRcdC5hZGRDbGFzcyggdGhpcy5fZ2V0SWNvbkNsYXNzZXMoXHJcblx0XHRcdFx0XHQkLmV4dGVuZCgge30sIHRoaXMub3B0aW9ucywgb3B0aW9ucyApICkgKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl9zdXBlciggb3B0aW9ucyApO1xyXG5cdH0sXHJcblxyXG5cdHJlZnJlc2g6IGZ1bmN0aW9uKCBjcmVhdGUgKSB7XHJcblx0XHR2YXIgb3JpZ2luYWxFbGVtZW50LFxyXG5cdFx0XHRpc0Rpc2FibGVkID0gdGhpcy5lbGVtZW50LnByb3AoIFwiZGlzYWJsZWRcIiApO1xyXG5cclxuXHRcdGlmICggdGhpcy5vcHRpb25zLmljb24gJiYgdGhpcy5vcHRpb25zLmljb25wb3MgPT09IFwibm90ZXh0XCIgJiYgdGhpcy5lbGVtZW50LmF0dHIoIFwidGl0bGVcIiApICkge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQuYXR0ciggXCJ0aXRsZVwiLCB0aGlzLmVsZW1lbnQudmFsKCkgKTtcclxuXHRcdH1cclxuXHRcdGlmICggIWNyZWF0ZSApIHtcclxuXHRcdFx0b3JpZ2luYWxFbGVtZW50ID0gdGhpcy5lbGVtZW50LmRldGFjaCgpO1xyXG5cdFx0XHQkKCB0aGlzLndyYXBwZXIgKS50ZXh0KCB0aGlzLmVsZW1lbnQudmFsKCkgKS5hcHBlbmQoIG9yaWdpbmFsRWxlbWVudCApO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMuZGlzYWJsZWQgIT09IGlzRGlzYWJsZWQgKSB7XHJcblx0XHRcdHRoaXMuX3NldE9wdGlvbnMoeyBkaXNhYmxlZDogaXNEaXNhYmxlZCB9KTtcclxuXHRcdH1cclxuXHR9XHJcbn0pO1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuKGZ1bmN0aW9uKCAkICkge1xyXG5cdHZhclx0bWV0YSA9ICQoIFwibWV0YVtuYW1lPXZpZXdwb3J0XVwiICksXHJcblx0XHRpbml0aWFsQ29udGVudCA9IG1ldGEuYXR0ciggXCJjb250ZW50XCIgKSxcclxuXHRcdGRpc2FibGVkWm9vbSA9IGluaXRpYWxDb250ZW50ICsgXCIsbWF4aW11bS1zY2FsZT0xLCB1c2VyLXNjYWxhYmxlPW5vXCIsXHJcblx0XHRlbmFibGVkWm9vbSA9IGluaXRpYWxDb250ZW50ICsgXCIsbWF4aW11bS1zY2FsZT0xMCwgdXNlci1zY2FsYWJsZT15ZXNcIixcclxuXHRcdGRpc2FibGVkSW5pdGlhbGx5ID0gLyh1c2VyLXNjYWxhYmxlW1xcc10qPVtcXHNdKm5vKXwobWF4aW11bS1zY2FsZVtcXHNdKj1bXFxzXSoxKVskLFxcc10vLnRlc3QoIGluaXRpYWxDb250ZW50ICk7XHJcblxyXG5cdCQubW9iaWxlLnpvb20gPSAkLmV4dGVuZCgge30sIHtcclxuXHRcdGVuYWJsZWQ6ICFkaXNhYmxlZEluaXRpYWxseSxcclxuXHRcdGxvY2tlZDogZmFsc2UsXHJcblx0XHRkaXNhYmxlOiBmdW5jdGlvbiggbG9jayApIHtcclxuXHRcdFx0aWYgKCAhZGlzYWJsZWRJbml0aWFsbHkgJiYgISQubW9iaWxlLnpvb20ubG9ja2VkICkge1xyXG5cdFx0XHRcdG1ldGEuYXR0ciggXCJjb250ZW50XCIsIGRpc2FibGVkWm9vbSApO1xyXG5cdFx0XHRcdCQubW9iaWxlLnpvb20uZW5hYmxlZCA9IGZhbHNlO1xyXG5cdFx0XHRcdCQubW9iaWxlLnpvb20ubG9ja2VkID0gbG9jayB8fCBmYWxzZTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHRcdGVuYWJsZTogZnVuY3Rpb24oIHVubG9jayApIHtcclxuXHRcdFx0aWYgKCAhZGlzYWJsZWRJbml0aWFsbHkgJiYgKCAhJC5tb2JpbGUuem9vbS5sb2NrZWQgfHwgdW5sb2NrID09PSB0cnVlICkgKSB7XHJcblx0XHRcdFx0bWV0YS5hdHRyKCBcImNvbnRlbnRcIiwgZW5hYmxlZFpvb20gKTtcclxuXHRcdFx0XHQkLm1vYmlsZS56b29tLmVuYWJsZWQgPSB0cnVlO1xyXG5cdFx0XHRcdCQubW9iaWxlLnpvb20ubG9ja2VkID0gZmFsc2U7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblx0XHRyZXN0b3JlOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0aWYgKCAhZGlzYWJsZWRJbml0aWFsbHkgKSB7XHJcblx0XHRcdFx0bWV0YS5hdHRyKCBcImNvbnRlbnRcIiwgaW5pdGlhbENvbnRlbnQgKTtcclxuXHRcdFx0XHQkLm1vYmlsZS56b29tLmVuYWJsZWQgPSB0cnVlO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fSk7XHJcblxyXG59KCBqUXVlcnkgKSk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcbiQud2lkZ2V0KCBcIm1vYmlsZS50ZXh0aW5wdXRcIiwge1xyXG5cdGluaXRTZWxlY3RvcjogXCJpbnB1dFt0eXBlPSd0ZXh0J10sXCIgK1xyXG5cdFx0XCJpbnB1dFt0eXBlPSdzZWFyY2gnXSxcIiArXHJcblx0XHRcIjpqcW1EYXRhKHR5cGU9J3NlYXJjaCcpLFwiICtcclxuXHRcdFwiaW5wdXRbdHlwZT0nbnVtYmVyJ10sXCIgK1xyXG5cdFx0XCI6anFtRGF0YSh0eXBlPSdudW1iZXInKSxcIiArXHJcblx0XHRcImlucHV0W3R5cGU9J3Bhc3N3b3JkJ10sXCIgK1xyXG5cdFx0XCJpbnB1dFt0eXBlPSdlbWFpbCddLFwiICtcclxuXHRcdFwiaW5wdXRbdHlwZT0ndXJsJ10sXCIgK1xyXG5cdFx0XCJpbnB1dFt0eXBlPSd0ZWwnXSxcIiArXHJcblx0XHRcInRleHRhcmVhLFwiICtcclxuXHRcdFwiaW5wdXRbdHlwZT0ndGltZSddLFwiICtcclxuXHRcdFwiaW5wdXRbdHlwZT0nZGF0ZSddLFwiICtcclxuXHRcdFwiaW5wdXRbdHlwZT0nbW9udGgnXSxcIiArXHJcblx0XHRcImlucHV0W3R5cGU9J3dlZWsnXSxcIiArXHJcblx0XHRcImlucHV0W3R5cGU9J2RhdGV0aW1lJ10sXCIgK1xyXG5cdFx0XCJpbnB1dFt0eXBlPSdkYXRldGltZS1sb2NhbCddLFwiICtcclxuXHRcdFwiaW5wdXRbdHlwZT0nY29sb3InXSxcIiArXHJcblx0XHRcImlucHV0Om5vdChbdHlwZV0pLFwiICtcclxuXHRcdFwiaW5wdXRbdHlwZT0nZmlsZSddXCIsXHJcblxyXG5cdG9wdGlvbnM6IHtcclxuXHRcdHRoZW1lOiBudWxsLFxyXG5cdFx0Y29ybmVyczogdHJ1ZSxcclxuXHRcdG1pbmk6IGZhbHNlLFxyXG5cdFx0Ly8gVGhpcyBvcHRpb24gZGVmYXVsdHMgdG8gdHJ1ZSBvbiBpT1MgZGV2aWNlcy5cclxuXHRcdHByZXZlbnRGb2N1c1pvb206IC9pUGhvbmV8aVBhZHxpUG9kLy50ZXN0KCBuYXZpZ2F0b3IucGxhdGZvcm0gKSAmJiBuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIFwiQXBwbGVXZWJLaXRcIiApID4gLTEsXHJcblx0XHR3cmFwcGVyQ2xhc3M6IFwiXCIsXHJcblx0XHRlbmhhbmNlZDogZmFsc2VcclxuXHR9LFxyXG5cclxuXHRfY3JlYXRlOiBmdW5jdGlvbigpIHtcclxuXHJcblx0XHR2YXIgb3B0aW9ucyA9IHRoaXMub3B0aW9ucyxcclxuXHRcdFx0aXNTZWFyY2ggPSB0aGlzLmVsZW1lbnQuaXMoIFwiW3R5cGU9J3NlYXJjaCddLCA6anFtRGF0YSh0eXBlPSdzZWFyY2gnKVwiICksXHJcblx0XHRcdGlzVGV4dGFyZWEgPSB0aGlzLmVsZW1lbnRbIDAgXS50YWdOYW1lID09PSBcIlRFWFRBUkVBXCIsXHJcblx0XHRcdGlzUmFuZ2UgPSB0aGlzLmVsZW1lbnQuaXMoIFwiW2RhdGEtXCIgKyAoICQubW9iaWxlLm5zIHx8IFwiXCIgKSArIFwidHlwZT0ncmFuZ2UnXVwiICksXHJcblx0XHRcdGlucHV0TmVlZHNXcmFwID0gKCAodGhpcy5lbGVtZW50LmlzKCBcImlucHV0XCIgKSB8fFxyXG5cdFx0XHRcdHRoaXMuZWxlbWVudC5pcyggXCJbZGF0YS1cIiArICggJC5tb2JpbGUubnMgfHwgXCJcIiApICsgXCJ0eXBlPSdzZWFyY2gnXVwiICkgKSAmJlxyXG5cdFx0XHRcdFx0IWlzUmFuZ2UgKTtcclxuXHJcblx0XHRpZiAoIHRoaXMuZWxlbWVudC5wcm9wKCBcImRpc2FibGVkXCIgKSApIHtcclxuXHRcdFx0b3B0aW9ucy5kaXNhYmxlZCA9IHRydWU7XHJcblx0XHR9XHJcblxyXG5cdFx0JC5leHRlbmQoIHRoaXMsIHtcclxuXHRcdFx0Y2xhc3NlczogdGhpcy5fY2xhc3Nlc0Zyb21PcHRpb25zKCksXHJcblx0XHRcdGlzU2VhcmNoOiBpc1NlYXJjaCxcclxuXHRcdFx0aXNUZXh0YXJlYTogaXNUZXh0YXJlYSxcclxuXHRcdFx0aXNSYW5nZTogaXNSYW5nZSxcclxuXHRcdFx0aW5wdXROZWVkc1dyYXA6IGlucHV0TmVlZHNXcmFwXHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLl9hdXRvQ29ycmVjdCgpO1xyXG5cclxuXHRcdGlmICggIW9wdGlvbnMuZW5oYW5jZWQgKSB7XHJcblx0XHRcdHRoaXMuX2VuaGFuY2UoKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl9vbigge1xyXG5cdFx0XHRcImZvY3VzXCI6IFwiX2hhbmRsZUZvY3VzXCIsXHJcblx0XHRcdFwiYmx1clwiOiBcIl9oYW5kbGVCbHVyXCJcclxuXHRcdH0pO1xyXG5cclxuXHR9LFxyXG5cclxuXHRyZWZyZXNoOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuc2V0T3B0aW9ucyh7XHJcblx0XHRcdFwiZGlzYWJsZWRcIiA6IHRoaXMuZWxlbWVudC5pcyggXCI6ZGlzYWJsZWRcIiApXHJcblx0XHR9KTtcclxuXHR9LFxyXG5cclxuXHRfZW5oYW5jZTogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgZWxlbWVudENsYXNzZXMgPSBbXTtcclxuXHJcblx0XHRpZiAoIHRoaXMuaXNUZXh0YXJlYSApIHtcclxuXHRcdFx0ZWxlbWVudENsYXNzZXMucHVzaCggXCJ1aS1pbnB1dC10ZXh0XCIgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIHRoaXMuaXNUZXh0YXJlYSB8fCB0aGlzLmlzUmFuZ2UgKSB7XHJcblx0XHRcdGVsZW1lbnRDbGFzc2VzLnB1c2goIFwidWktc2hhZG93LWluc2V0XCIgKTtcclxuXHRcdH1cclxuXHJcblx0XHQvL1wic2VhcmNoXCIgYW5kIFwidGV4dFwiIGlucHV0IHdpZGdldHNcclxuXHRcdGlmICggdGhpcy5pbnB1dE5lZWRzV3JhcCApIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50LndyYXAoIHRoaXMuX3dyYXAoKSApO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0ZWxlbWVudENsYXNzZXMgPSBlbGVtZW50Q2xhc3Nlcy5jb25jYXQoIHRoaXMuY2xhc3NlcyApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuZWxlbWVudC5hZGRDbGFzcyggZWxlbWVudENsYXNzZXMuam9pbiggXCIgXCIgKSApO1xyXG5cdH0sXHJcblxyXG5cdHdpZGdldDogZnVuY3Rpb24oKSB7XHJcblx0XHRyZXR1cm4gKCB0aGlzLmlucHV0TmVlZHNXcmFwICkgPyB0aGlzLmVsZW1lbnQucGFyZW50KCkgOiB0aGlzLmVsZW1lbnQ7XHJcblx0fSxcclxuXHJcblx0X2NsYXNzZXNGcm9tT3B0aW9uczogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgb3B0aW9ucyA9IHRoaXMub3B0aW9ucyxcclxuXHRcdFx0Y2xhc3NlcyA9IFtdO1xyXG5cclxuXHRcdGNsYXNzZXMucHVzaCggXCJ1aS1ib2R5LVwiICsgKCAoIG9wdGlvbnMudGhlbWUgPT09IG51bGwgKSA/IFwiaW5oZXJpdFwiIDogb3B0aW9ucy50aGVtZSApICk7XHJcblx0XHRpZiAoIG9wdGlvbnMuY29ybmVycyApIHtcclxuXHRcdFx0Y2xhc3Nlcy5wdXNoKCBcInVpLWNvcm5lci1hbGxcIiApO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCBvcHRpb25zLm1pbmkgKSB7XHJcblx0XHRcdGNsYXNzZXMucHVzaCggXCJ1aS1taW5pXCIgKTtcclxuXHRcdH1cclxuXHRcdGlmICggb3B0aW9ucy5kaXNhYmxlZCApIHtcclxuXHRcdFx0Y2xhc3Nlcy5wdXNoKCBcInVpLXN0YXRlLWRpc2FibGVkXCIgKTtcclxuXHRcdH1cclxuXHRcdGlmICggb3B0aW9ucy53cmFwcGVyQ2xhc3MgKSB7XHJcblx0XHRcdGNsYXNzZXMucHVzaCggb3B0aW9ucy53cmFwcGVyQ2xhc3MgKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gY2xhc3NlcztcclxuXHR9LFxyXG5cclxuXHRfd3JhcDogZnVuY3Rpb24oKSB7XHJcblx0XHRyZXR1cm4gJCggXCI8ZGl2IGNsYXNzPSdcIiArXHJcblx0XHRcdCggdGhpcy5pc1NlYXJjaCA/IFwidWktaW5wdXQtc2VhcmNoIFwiIDogXCJ1aS1pbnB1dC10ZXh0IFwiICkgK1xyXG5cdFx0XHR0aGlzLmNsYXNzZXMuam9pbiggXCIgXCIgKSArIFwiIFwiICtcclxuXHRcdFx0XCJ1aS1zaGFkb3ctaW5zZXQnPjwvZGl2PlwiICk7XHJcblx0fSxcclxuXHJcblx0X2F1dG9Db3JyZWN0OiBmdW5jdGlvbigpIHtcclxuXHRcdC8vIFhYWDogVGVtcG9yYXJ5IHdvcmthcm91bmQgZm9yIGlzc3VlIDc4NSAoQXBwbGUgYnVnIDg5MTA1ODkpLlxyXG5cdFx0Ly8gICAgICBUdXJuIG9mZiBhdXRvY29ycmVjdCBhbmQgYXV0b2NvbXBsZXRlIG9uIG5vbi1pT1MgNSBkZXZpY2VzXHJcblx0XHQvLyAgICAgIHNpbmNlIHRoZSBwb3B1cCB0aGV5IHVzZSBjYW4ndCBiZSBkaXNtaXNzZWQgYnkgdGhlIHVzZXIuIE5vdGVcclxuXHRcdC8vICAgICAgdGhhdCB3ZSB0ZXN0IGZvciB0aGUgcHJlc2VuY2Ugb2YgdGhlIGZlYXR1cmUgYnkgbG9va2luZyBmb3JcclxuXHRcdC8vICAgICAgdGhlIGF1dG9jb3JyZWN0IHByb3BlcnR5IG9uIHRoZSBpbnB1dCBlbGVtZW50LiBXZSBjdXJyZW50bHlcclxuXHRcdC8vICAgICAgaGF2ZSBubyB0ZXN0IGZvciBpT1MgNSBvciBuZXdlciBzbyB3ZSdyZSB0ZW1wb3JhcmlseSB1c2luZ1xyXG5cdFx0Ly8gICAgICB0aGUgdG91Y2hPdmVyZmxvdyBzdXBwb3J0IGZsYWcgZm9yIGpRTSAxLjAuIFllcywgSSBmZWVsIGRpcnR5LlxyXG5cdFx0Ly8gICAgICAtIGpibGFzXHJcblx0XHRpZiAoIHR5cGVvZiB0aGlzLmVsZW1lbnRbMF0uYXV0b2NvcnJlY3QgIT09IFwidW5kZWZpbmVkXCIgJiZcclxuXHRcdFx0ISQuc3VwcG9ydC50b3VjaE92ZXJmbG93ICkge1xyXG5cclxuXHRcdFx0Ly8gU2V0IHRoZSBhdHRyaWJ1dGUgaW5zdGVhZCBvZiB0aGUgcHJvcGVydHkganVzdCBpbiBjYXNlIHRoZXJlXHJcblx0XHRcdC8vIGlzIGNvZGUgdGhhdCBhdHRlbXB0cyB0byBtYWtlIG1vZGlmaWNhdGlvbnMgdmlhIEhUTUwuXHJcblx0XHRcdHRoaXMuZWxlbWVudFswXS5zZXRBdHRyaWJ1dGUoIFwiYXV0b2NvcnJlY3RcIiwgXCJvZmZcIiApO1xyXG5cdFx0XHR0aGlzLmVsZW1lbnRbMF0uc2V0QXR0cmlidXRlKCBcImF1dG9jb21wbGV0ZVwiLCBcIm9mZlwiICk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X2hhbmRsZUJsdXI6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy53aWRnZXQoKS5yZW1vdmVDbGFzcyggJC5tb2JpbGUuZm9jdXNDbGFzcyApO1xyXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMucHJldmVudEZvY3VzWm9vbSApIHtcclxuXHRcdFx0JC5tb2JpbGUuem9vbS5lbmFibGUoIHRydWUgKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfaGFuZGxlRm9jdXM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0Ly8gSW4gbWFueSBzaXR1YXRpb25zLCBpT1Mgd2lsbCB6b29tIGludG8gdGhlIGlucHV0IHVwb24gdGFwLCB0aGlzXHJcblx0XHQvLyBwcmV2ZW50cyB0aGF0IGZyb20gaGFwcGVuaW5nXHJcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5wcmV2ZW50Rm9jdXNab29tICkge1xyXG5cdFx0XHQkLm1vYmlsZS56b29tLmRpc2FibGUoIHRydWUgKTtcclxuXHRcdH1cclxuXHRcdHRoaXMud2lkZ2V0KCkuYWRkQ2xhc3MoICQubW9iaWxlLmZvY3VzQ2xhc3MgKTtcclxuXHR9LFxyXG5cclxuXHRfc2V0T3B0aW9uczogZnVuY3Rpb24gKCBvcHRpb25zICkge1xyXG5cdFx0dmFyIG91dGVyID0gdGhpcy53aWRnZXQoKTtcclxuXHJcblx0XHR0aGlzLl9zdXBlciggb3B0aW9ucyApO1xyXG5cclxuXHRcdGlmICggISggb3B0aW9ucy5kaXNhYmxlZCA9PT0gdW5kZWZpbmVkICYmXHJcblx0XHRcdG9wdGlvbnMubWluaSA9PT0gdW5kZWZpbmVkICYmXHJcblx0XHRcdG9wdGlvbnMuY29ybmVycyA9PT0gdW5kZWZpbmVkICYmXHJcblx0XHRcdG9wdGlvbnMudGhlbWUgPT09IHVuZGVmaW5lZCAmJlxyXG5cdFx0XHRvcHRpb25zLndyYXBwZXJDbGFzcyA9PT0gdW5kZWZpbmVkICkgKSB7XHJcblxyXG5cdFx0XHRvdXRlci5yZW1vdmVDbGFzcyggdGhpcy5jbGFzc2VzLmpvaW4oIFwiIFwiICkgKTtcclxuXHRcdFx0dGhpcy5jbGFzc2VzID0gdGhpcy5fY2xhc3Nlc0Zyb21PcHRpb25zKCk7XHJcblx0XHRcdG91dGVyLmFkZENsYXNzKCB0aGlzLmNsYXNzZXMuam9pbiggXCIgXCIgKSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggb3B0aW9ucy5kaXNhYmxlZCAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQucHJvcCggXCJkaXNhYmxlZFwiLCAhIW9wdGlvbnMuZGlzYWJsZWQgKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfZGVzdHJveTogZnVuY3Rpb24oKSB7XHJcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5lbmhhbmNlZCApIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCB0aGlzLmlucHV0TmVlZHNXcmFwICkge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQudW53cmFwKCk7XHJcblx0XHR9XHJcblx0XHR0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3MoIFwidWktaW5wdXQtdGV4dCBcIiArIHRoaXMuY2xhc3Nlcy5qb2luKCBcIiBcIiApICk7XHJcblx0fVxyXG59KTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxuJC53aWRnZXQoIFwibW9iaWxlLnNsaWRlclwiLCAkLmV4dGVuZCgge1xyXG5cdGluaXRTZWxlY3RvcjogXCJpbnB1dFt0eXBlPSdyYW5nZSddLCA6anFtRGF0YSh0eXBlPSdyYW5nZScpLCA6anFtRGF0YShyb2xlPSdzbGlkZXInKVwiLFxyXG5cclxuXHR3aWRnZXRFdmVudFByZWZpeDogXCJzbGlkZVwiLFxyXG5cclxuXHRvcHRpb25zOiB7XHJcblx0XHR0aGVtZTogbnVsbCxcclxuXHRcdHRyYWNrVGhlbWU6IG51bGwsXHJcblx0XHRjb3JuZXJzOiB0cnVlLFxyXG5cdFx0bWluaTogZmFsc2UsXHJcblx0XHRoaWdobGlnaHQ6IGZhbHNlXHJcblx0fSxcclxuXHJcblx0X2NyZWF0ZTogZnVuY3Rpb24oKSB7XHJcblxyXG5cdFx0Ly8gVE9ETzogRWFjaCBvZiB0aGVzZSBzaG91bGQgaGF2ZSBjb21tZW50cyBleHBsYWluIHdoYXQgdGhleSdyZSBmb3JcclxuXHRcdHZhciBzZWxmID0gdGhpcyxcclxuXHRcdFx0Y29udHJvbCA9IHRoaXMuZWxlbWVudCxcclxuXHRcdFx0dHJhY2tUaGVtZSA9IHRoaXMub3B0aW9ucy50cmFja1RoZW1lIHx8ICQubW9iaWxlLmdldEF0dHJpYnV0ZSggY29udHJvbFsgMCBdLCBcInRoZW1lXCIgKSxcclxuXHRcdFx0dHJhY2tUaGVtZUNsYXNzID0gdHJhY2tUaGVtZSA/IFwiIHVpLWJhci1cIiArIHRyYWNrVGhlbWUgOiBcIiB1aS1iYXItaW5oZXJpdFwiLFxyXG5cdFx0XHRjb3JuZXJDbGFzcyA9ICggdGhpcy5vcHRpb25zLmNvcm5lcnMgfHwgY29udHJvbC5qcW1EYXRhKCBcImNvcm5lcnNcIiApICkgPyBcIiB1aS1jb3JuZXItYWxsXCIgOiBcIlwiLFxyXG5cdFx0XHRtaW5pQ2xhc3MgPSAoIHRoaXMub3B0aW9ucy5taW5pIHx8IGNvbnRyb2wuanFtRGF0YSggXCJtaW5pXCIgKSApID8gXCIgdWktbWluaVwiIDogXCJcIixcclxuXHRcdFx0Y1R5cGUgPSBjb250cm9sWyAwIF0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSxcclxuXHRcdFx0aXNUb2dnbGVTd2l0Y2ggPSAoIGNUeXBlID09PSBcInNlbGVjdFwiICksXHJcblx0XHRcdGlzUmFuZ2VzbGlkZXIgPSBjb250cm9sLnBhcmVudCgpLmlzKCBcIjpqcW1EYXRhKHJvbGU9J3Jhbmdlc2xpZGVyJylcIiApLFxyXG5cdFx0XHRzZWxlY3RDbGFzcyA9ICggaXNUb2dnbGVTd2l0Y2ggKSA/IFwidWktc2xpZGVyLXN3aXRjaFwiIDogXCJcIixcclxuXHRcdFx0Y29udHJvbElEID0gY29udHJvbC5hdHRyKCBcImlkXCIgKSxcclxuXHRcdFx0JGxhYmVsID0gJCggXCJbZm9yPSdcIiArIGNvbnRyb2xJRCArIFwiJ11cIiApLFxyXG5cdFx0XHRsYWJlbElEID0gJGxhYmVsLmF0dHIoIFwiaWRcIiApIHx8IGNvbnRyb2xJRCArIFwiLWxhYmVsXCIsXHJcblx0XHRcdG1pbiA9ICFpc1RvZ2dsZVN3aXRjaCA/IHBhcnNlRmxvYXQoIGNvbnRyb2wuYXR0ciggXCJtaW5cIiApICkgOiAwLFxyXG5cdFx0XHRtYXggPSAgIWlzVG9nZ2xlU3dpdGNoID8gcGFyc2VGbG9hdCggY29udHJvbC5hdHRyKCBcIm1heFwiICkgKSA6IGNvbnRyb2wuZmluZCggXCJvcHRpb25cIiApLmxlbmd0aC0xLFxyXG5cdFx0XHRzdGVwID0gd2luZG93LnBhcnNlRmxvYXQoIGNvbnRyb2wuYXR0ciggXCJzdGVwXCIgKSB8fCAxICksXHJcblx0XHRcdGRvbUhhbmRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiYVwiICksXHJcblx0XHRcdGhhbmRsZSA9ICQoIGRvbUhhbmRsZSApLFxyXG5cdFx0XHRkb21TbGlkZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImRpdlwiICksXHJcblx0XHRcdHNsaWRlciA9ICQoIGRvbVNsaWRlciApLFxyXG5cdFx0XHR2YWx1ZWJnID0gdGhpcy5vcHRpb25zLmhpZ2hsaWdodCAmJiAhaXNUb2dnbGVTd2l0Y2ggPyAoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0dmFyIGJnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJkaXZcIiApO1xyXG5cdFx0XHRcdGJnLmNsYXNzTmFtZSA9IFwidWktc2xpZGVyLWJnIFwiICsgJC5tb2JpbGUuYWN0aXZlQnRuQ2xhc3M7XHJcblx0XHRcdFx0cmV0dXJuICQoIGJnICkucHJlcGVuZFRvKCBzbGlkZXIgKTtcclxuXHRcdFx0fSkoKSA6IGZhbHNlLFxyXG5cdFx0XHRvcHRpb25zLFxyXG5cdFx0XHR3cmFwcGVyLFxyXG5cdFx0XHRqLCBsZW5ndGgsXHJcblx0XHRcdGksIG9wdGlvbnNDb3VudCwgb3JpZ1RhYkluZGV4LFxyXG5cdFx0XHRzaWRlLCBhY3RpdmVDbGFzcywgc2xpZGVySW1nO1xyXG5cclxuXHRcdCRsYWJlbC5hdHRyKCBcImlkXCIsIGxhYmVsSUQgKTtcclxuXHRcdHRoaXMuaXNUb2dnbGVTd2l0Y2ggPSBpc1RvZ2dsZVN3aXRjaDtcclxuXHJcblx0XHRkb21IYW5kbGUuc2V0QXR0cmlidXRlKCBcImhyZWZcIiwgXCIjXCIgKTtcclxuXHRcdGRvbVNsaWRlci5zZXRBdHRyaWJ1dGUoIFwicm9sZVwiLCBcImFwcGxpY2F0aW9uXCIgKTtcclxuXHRcdGRvbVNsaWRlci5jbGFzc05hbWUgPSBbIHRoaXMuaXNUb2dnbGVTd2l0Y2ggPyBcInVpLXNsaWRlciB1aS1zbGlkZXItdHJhY2sgdWktc2hhZG93LWluc2V0IFwiIDogXCJ1aS1zbGlkZXItdHJhY2sgdWktc2hhZG93LWluc2V0IFwiLCBzZWxlY3RDbGFzcywgdHJhY2tUaGVtZUNsYXNzLCBjb3JuZXJDbGFzcywgbWluaUNsYXNzIF0uam9pbiggXCJcIiApO1xyXG5cdFx0ZG9tSGFuZGxlLmNsYXNzTmFtZSA9IFwidWktc2xpZGVyLWhhbmRsZVwiO1xyXG5cdFx0ZG9tU2xpZGVyLmFwcGVuZENoaWxkKCBkb21IYW5kbGUgKTtcclxuXHJcblx0XHRoYW5kbGUuYXR0cih7XHJcblx0XHRcdFwicm9sZVwiOiBcInNsaWRlclwiLFxyXG5cdFx0XHRcImFyaWEtdmFsdWVtaW5cIjogbWluLFxyXG5cdFx0XHRcImFyaWEtdmFsdWVtYXhcIjogbWF4LFxyXG5cdFx0XHRcImFyaWEtdmFsdWVub3dcIjogdGhpcy5fdmFsdWUoKSxcclxuXHRcdFx0XCJhcmlhLXZhbHVldGV4dFwiOiB0aGlzLl92YWx1ZSgpLFxyXG5cdFx0XHRcInRpdGxlXCI6IHRoaXMuX3ZhbHVlKCksXHJcblx0XHRcdFwiYXJpYS1sYWJlbGxlZGJ5XCI6IGxhYmVsSURcclxuXHRcdH0pO1xyXG5cclxuXHRcdCQuZXh0ZW5kKCB0aGlzLCB7XHJcblx0XHRcdHNsaWRlcjogc2xpZGVyLFxyXG5cdFx0XHRoYW5kbGU6IGhhbmRsZSxcclxuXHRcdFx0Y29udHJvbDogY29udHJvbCxcclxuXHRcdFx0dHlwZTogY1R5cGUsXHJcblx0XHRcdHN0ZXA6IHN0ZXAsXHJcblx0XHRcdG1heDogbWF4LFxyXG5cdFx0XHRtaW46IG1pbixcclxuXHRcdFx0dmFsdWViZzogdmFsdWViZyxcclxuXHRcdFx0aXNSYW5nZXNsaWRlcjogaXNSYW5nZXNsaWRlcixcclxuXHRcdFx0ZHJhZ2dpbmc6IGZhbHNlLFxyXG5cdFx0XHRiZWZvcmVTdGFydDogbnVsbCxcclxuXHRcdFx0dXNlck1vZGlmaWVkOiBmYWxzZSxcclxuXHRcdFx0bW91c2VNb3ZlZDogZmFsc2VcclxuXHRcdH0pO1xyXG5cclxuXHRcdGlmICggaXNUb2dnbGVTd2l0Y2ggKSB7XHJcblx0XHRcdC8vIFRPRE86IHJlc3RvcmUgb3JpZ2luYWwgdGFiaW5kZXggKGlmIGFueSkgaW4gYSBkZXN0cm95IG1ldGhvZFxyXG5cdFx0XHRvcmlnVGFiSW5kZXggPSBjb250cm9sLmF0dHIoIFwidGFiaW5kZXhcIiApO1xyXG5cdFx0XHRpZiAoIG9yaWdUYWJJbmRleCApIHtcclxuXHRcdFx0XHRoYW5kbGUuYXR0ciggXCJ0YWJpbmRleFwiLCBvcmlnVGFiSW5kZXggKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRjb250cm9sLmF0dHIoIFwidGFiaW5kZXhcIiwgXCItMVwiICkuZm9jdXMoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0JCggdGhpcyApLmJsdXIoKTtcclxuXHRcdFx0XHRoYW5kbGUuZm9jdXMoKTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHR3cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJkaXZcIiApO1xyXG5cdFx0XHR3cmFwcGVyLmNsYXNzTmFtZSA9IFwidWktc2xpZGVyLWlubmVyb2Zmc2V0XCI7XHJcblxyXG5cdFx0XHRmb3IgKCBqID0gMCwgbGVuZ3RoID0gZG9tU2xpZGVyLmNoaWxkTm9kZXMubGVuZ3RoOyBqIDwgbGVuZ3RoOyBqKysgKSB7XHJcblx0XHRcdFx0d3JhcHBlci5hcHBlbmRDaGlsZCggZG9tU2xpZGVyLmNoaWxkTm9kZXNbal0gKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0ZG9tU2xpZGVyLmFwcGVuZENoaWxkKCB3cmFwcGVyICk7XHJcblxyXG5cdFx0XHQvLyBzbGlkZXIud3JhcElubmVyKCBcIjxkaXYgY2xhc3M9J3VpLXNsaWRlci1pbm5lcm9mZnNldCc+PC9kaXY+XCIgKTtcclxuXHJcblx0XHRcdC8vIG1ha2UgdGhlIGhhbmRsZSBtb3ZlIHdpdGggYSBzbW9vdGggdHJhbnNpdGlvblxyXG5cdFx0XHRoYW5kbGUuYWRkQ2xhc3MoIFwidWktc2xpZGVyLWhhbmRsZS1zbmFwcGluZ1wiICk7XHJcblxyXG5cdFx0XHRvcHRpb25zID0gY29udHJvbC5maW5kKCBcIm9wdGlvblwiICk7XHJcblxyXG5cdFx0XHRmb3IgKCBpID0gMCwgb3B0aW9uc0NvdW50ID0gb3B0aW9ucy5sZW5ndGg7IGkgPCBvcHRpb25zQ291bnQ7IGkrKyApIHtcclxuXHRcdFx0XHRzaWRlID0gIWkgPyBcImJcIiA6IFwiYVwiO1xyXG5cdFx0XHRcdGFjdGl2ZUNsYXNzID0gIWkgPyBcIlwiIDogXCIgXCIgKyAkLm1vYmlsZS5hY3RpdmVCdG5DbGFzcztcclxuXHRcdFx0XHRzbGlkZXJJbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcInNwYW5cIiApO1xyXG5cclxuXHRcdFx0XHRzbGlkZXJJbWcuY2xhc3NOYW1lID0gWyBcInVpLXNsaWRlci1sYWJlbCB1aS1zbGlkZXItbGFiZWwtXCIsIHNpZGUsIGFjdGl2ZUNsYXNzIF0uam9pbiggXCJcIiApO1xyXG5cdFx0XHRcdHNsaWRlckltZy5zZXRBdHRyaWJ1dGUoIFwicm9sZVwiLCBcImltZ1wiICk7XHJcblx0XHRcdFx0c2xpZGVySW1nLmFwcGVuZENoaWxkKCBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSggb3B0aW9uc1tpXS5pbm5lckhUTUwgKSApO1xyXG5cdFx0XHRcdCQoIHNsaWRlckltZyApLnByZXBlbmRUbyggc2xpZGVyICk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHNlbGYuX2xhYmVscyA9ICQoIFwiLnVpLXNsaWRlci1sYWJlbFwiLCBzbGlkZXIgKTtcclxuXHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gbW9uaXRvciB0aGUgaW5wdXQgZm9yIHVwZGF0ZWQgdmFsdWVzXHJcblx0XHRjb250cm9sLmFkZENsYXNzKCBpc1RvZ2dsZVN3aXRjaCA/IFwidWktc2xpZGVyLXN3aXRjaFwiIDogXCJ1aS1zbGlkZXItaW5wdXRcIiApO1xyXG5cclxuXHRcdHRoaXMuX29uKCBjb250cm9sLCB7XHJcblx0XHRcdFwiY2hhbmdlXCI6IFwiX2NvbnRyb2xDaGFuZ2VcIixcclxuXHRcdFx0XCJrZXl1cFwiOiBcIl9jb250cm9sS2V5dXBcIixcclxuXHRcdFx0XCJibHVyXCI6IFwiX2NvbnRyb2xCbHVyXCIsXHJcblx0XHRcdFwidm1vdXNldXBcIjogXCJfY29udHJvbFZNb3VzZVVwXCJcclxuXHRcdH0pO1xyXG5cclxuXHRcdHNsaWRlci5iaW5kKCBcInZtb3VzZWRvd25cIiwgJC5wcm94eSggdGhpcy5fc2xpZGVyVk1vdXNlRG93biwgdGhpcyApIClcclxuXHRcdFx0LmJpbmQoIFwidmNsaWNrXCIsIGZhbHNlICk7XHJcblxyXG5cdFx0Ly8gV2UgaGF2ZSB0byBpbnN0YW50aWF0ZSBhIG5ldyBmdW5jdGlvbiBvYmplY3QgZm9yIHRoZSB1bmJpbmQgdG8gd29yayBwcm9wZXJseVxyXG5cdFx0Ly8gc2luY2UgdGhlIG1ldGhvZCBpdHNlbGYgaXMgZGVmaW5lZCBpbiB0aGUgcHJvdG90eXBlIChjYXVzaW5nIGl0IHRvIHVuYmluZCBldmVyeXRoaW5nKVxyXG5cdFx0dGhpcy5fb24oIGRvY3VtZW50LCB7IFwidm1vdXNlbW92ZVwiOiBcIl9wcmV2ZW50RG9jdW1lbnREcmFnXCIgfSk7XHJcblx0XHR0aGlzLl9vbiggc2xpZGVyLmFkZCggZG9jdW1lbnQgKSwgeyBcInZtb3VzZXVwXCI6IFwiX3NsaWRlclZNb3VzZVVwXCIgfSk7XHJcblxyXG5cdFx0c2xpZGVyLmluc2VydEFmdGVyKCBjb250cm9sICk7XHJcblxyXG5cdFx0Ly8gd3JhcCBpbiBhIGRpdiBmb3Igc3R5bGluZyBwdXJwb3Nlc1xyXG5cdFx0aWYgKCAhaXNUb2dnbGVTd2l0Y2ggJiYgIWlzUmFuZ2VzbGlkZXIgKSB7XHJcblx0XHRcdHdyYXBwZXIgPSB0aGlzLm9wdGlvbnMubWluaSA/IFwiPGRpdiBjbGFzcz0ndWktc2xpZGVyIHVpLW1pbmknPlwiIDogXCI8ZGl2IGNsYXNzPSd1aS1zbGlkZXInPlwiO1xyXG5cclxuXHRcdFx0Y29udHJvbC5hZGQoIHNsaWRlciApLndyYXBBbGwoIHdyYXBwZXIgKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBiaW5kIHRoZSBoYW5kbGUgZXZlbnQgY2FsbGJhY2tzIGFuZCBzZXQgdGhlIGNvbnRleHQgdG8gdGhlIHdpZGdldCBpbnN0YW5jZVxyXG5cdFx0dGhpcy5fb24oIHRoaXMuaGFuZGxlLCB7XHJcblx0XHRcdFwidm1vdXNlZG93blwiOiBcIl9oYW5kbGVWTW91c2VEb3duXCIsXHJcblx0XHRcdFwia2V5ZG93blwiOiBcIl9oYW5kbGVLZXlkb3duXCIsXHJcblx0XHRcdFwia2V5dXBcIjogXCJfaGFuZGxlS2V5dXBcIlxyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5oYW5kbGUuYmluZCggXCJ2Y2xpY2tcIiwgZmFsc2UgKTtcclxuXHJcblx0XHR0aGlzLl9oYW5kbGVGb3JtUmVzZXQoKTtcclxuXHJcblx0XHR0aGlzLnJlZnJlc2goIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB0cnVlICk7XHJcblx0fSxcclxuXHJcblx0X3NldE9wdGlvbnM6IGZ1bmN0aW9uKCBvcHRpb25zICkge1xyXG5cdFx0aWYgKCBvcHRpb25zLnRoZW1lICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdHRoaXMuX3NldFRoZW1lKCBvcHRpb25zLnRoZW1lICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBvcHRpb25zLnRyYWNrVGhlbWUgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0dGhpcy5fc2V0VHJhY2tUaGVtZSggb3B0aW9ucy50cmFja1RoZW1lICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBvcHRpb25zLmNvcm5lcnMgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0dGhpcy5fc2V0Q29ybmVycyggb3B0aW9ucy5jb3JuZXJzICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBvcHRpb25zLm1pbmkgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0dGhpcy5fc2V0TWluaSggb3B0aW9ucy5taW5pICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBvcHRpb25zLmhpZ2hsaWdodCAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHR0aGlzLl9zZXRIaWdobGlnaHQoIG9wdGlvbnMuaGlnaGxpZ2h0ICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBvcHRpb25zLmRpc2FibGVkICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdHRoaXMuX3NldERpc2FibGVkKCBvcHRpb25zLmRpc2FibGVkICk7XHJcblx0XHR9XHJcblx0XHR0aGlzLl9zdXBlciggb3B0aW9ucyApO1xyXG5cdH0sXHJcblxyXG5cdF9jb250cm9sQ2hhbmdlOiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHQvLyBpZiB0aGUgdXNlciBkcmFnZ2VkIHRoZSBoYW5kbGUsIHRoZSBcImNoYW5nZVwiIGV2ZW50IHdhcyB0cmlnZ2VyZWQgZnJvbSBpbnNpZGUgcmVmcmVzaCgpOyBkb24ndCBjYWxsIHJlZnJlc2goKSBhZ2FpblxyXG5cdFx0aWYgKCB0aGlzLl90cmlnZ2VyKCBcImNvbnRyb2xjaGFuZ2VcIiwgZXZlbnQgKSA9PT0gZmFsc2UgKSB7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHRcdGlmICggIXRoaXMubW91c2VNb3ZlZCApIHtcclxuXHRcdFx0dGhpcy5yZWZyZXNoKCB0aGlzLl92YWx1ZSgpLCB0cnVlICk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X2NvbnRyb2xLZXl1cDogZnVuY3Rpb24oLyogZXZlbnQgKi8pIHsgLy8gbmVjZXNzYXJ5P1xyXG5cdFx0dGhpcy5yZWZyZXNoKCB0aGlzLl92YWx1ZSgpLCB0cnVlLCB0cnVlICk7XHJcblx0fSxcclxuXHJcblx0X2NvbnRyb2xCbHVyOiBmdW5jdGlvbigvKiBldmVudCAqLykge1xyXG5cdFx0dGhpcy5yZWZyZXNoKCB0aGlzLl92YWx1ZSgpLCB0cnVlICk7XHJcblx0fSxcclxuXHJcblx0Ly8gaXQgYXBwZWFycyB0aGUgY2xpY2tpbmcgdGhlIHVwIGFuZCBkb3duIGJ1dHRvbnMgaW4gY2hyb21lIG9uXHJcblx0Ly8gcmFuZ2UvbnVtYmVyIGlucHV0cyBkb2Vzbid0IHRyaWdnZXIgYSBjaGFuZ2UgdW50aWwgdGhlIGZpZWxkIGlzXHJcblx0Ly8gYmx1cnJlZC4gSGVyZSB3ZSBjaGVjayB0aGlmIHRoZSB2YWx1ZSBoYXMgY2hhbmdlZCBhbmQgcmVmcmVzaFxyXG5cdF9jb250cm9sVk1vdXNlVXA6IGZ1bmN0aW9uKC8qIGV2ZW50ICovKSB7XHJcblx0XHR0aGlzLl9jaGVja2VkUmVmcmVzaCgpO1xyXG5cdH0sXHJcblxyXG5cdC8vIE5PVEUgZm9yY2UgZm9jdXMgb24gaGFuZGxlXHJcblx0X2hhbmRsZVZNb3VzZURvd246IGZ1bmN0aW9uKC8qIGV2ZW50ICovKSB7XHJcblx0XHR0aGlzLmhhbmRsZS5mb2N1cygpO1xyXG5cdH0sXHJcblxyXG5cdF9oYW5kbGVLZXlkb3duOiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHR2YXIgaW5kZXggPSB0aGlzLl92YWx1ZSgpO1xyXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMuZGlzYWJsZWQgKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBJbiBhbGwgY2FzZXMgcHJldmVudCB0aGUgZGVmYXVsdCBhbmQgbWFyayB0aGUgaGFuZGxlIGFzIGFjdGl2ZVxyXG5cdFx0c3dpdGNoICggZXZlbnQua2V5Q29kZSApIHtcclxuXHRcdFx0Y2FzZSAkLm1vYmlsZS5rZXlDb2RlLkhPTUU6XHJcblx0XHRcdGNhc2UgJC5tb2JpbGUua2V5Q29kZS5FTkQ6XHJcblx0XHRcdGNhc2UgJC5tb2JpbGUua2V5Q29kZS5QQUdFX1VQOlxyXG5cdFx0XHRjYXNlICQubW9iaWxlLmtleUNvZGUuUEFHRV9ET1dOOlxyXG5cdFx0XHRjYXNlICQubW9iaWxlLmtleUNvZGUuVVA6XHJcblx0XHRcdGNhc2UgJC5tb2JpbGUua2V5Q29kZS5SSUdIVDpcclxuXHRcdFx0Y2FzZSAkLm1vYmlsZS5rZXlDb2RlLkRPV046XHJcblx0XHRcdGNhc2UgJC5tb2JpbGUua2V5Q29kZS5MRUZUOlxyXG5cdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG5cdFx0XHRcdGlmICggIXRoaXMuX2tleVNsaWRpbmcgKSB7XHJcblx0XHRcdFx0XHR0aGlzLl9rZXlTbGlkaW5nID0gdHJ1ZTtcclxuXHRcdFx0XHRcdHRoaXMuaGFuZGxlLmFkZENsYXNzKCBcInVpLXN0YXRlLWFjdGl2ZVwiICk7IC8qIFRPRE86IFdlIGRvbid0IHVzZSB0aGlzIGNsYXNzIGZvciBzdHlsaW5nLiBEbyB3ZSBuZWVkIHRvIGFkZCBpdD8gKi9cclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIG1vdmUgdGhlIHNsaWRlciBhY2NvcmRpbmcgdG8gdGhlIGtleXByZXNzXHJcblx0XHRzd2l0Y2ggKCBldmVudC5rZXlDb2RlICkge1xyXG5cdFx0XHRjYXNlICQubW9iaWxlLmtleUNvZGUuSE9NRTpcclxuXHRcdFx0XHR0aGlzLnJlZnJlc2goIHRoaXMubWluICk7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgJC5tb2JpbGUua2V5Q29kZS5FTkQ6XHJcblx0XHRcdFx0dGhpcy5yZWZyZXNoKCB0aGlzLm1heCApO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlICQubW9iaWxlLmtleUNvZGUuUEFHRV9VUDpcclxuXHRcdFx0Y2FzZSAkLm1vYmlsZS5rZXlDb2RlLlVQOlxyXG5cdFx0XHRjYXNlICQubW9iaWxlLmtleUNvZGUuUklHSFQ6XHJcblx0XHRcdFx0dGhpcy5yZWZyZXNoKCBpbmRleCArIHRoaXMuc3RlcCApO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlICQubW9iaWxlLmtleUNvZGUuUEFHRV9ET1dOOlxyXG5cdFx0XHRjYXNlICQubW9iaWxlLmtleUNvZGUuRE9XTjpcclxuXHRcdFx0Y2FzZSAkLm1vYmlsZS5rZXlDb2RlLkxFRlQ6XHJcblx0XHRcdFx0dGhpcy5yZWZyZXNoKCBpbmRleCAtIHRoaXMuc3RlcCApO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0fVxyXG5cdH0sIC8vIHJlbW92ZSBhY3RpdmUgbWFya1xyXG5cclxuXHRfaGFuZGxlS2V5dXA6IGZ1bmN0aW9uKC8qIGV2ZW50ICovKSB7XHJcblx0XHRpZiAoIHRoaXMuX2tleVNsaWRpbmcgKSB7XHJcblx0XHRcdHRoaXMuX2tleVNsaWRpbmcgPSBmYWxzZTtcclxuXHRcdFx0dGhpcy5oYW5kbGUucmVtb3ZlQ2xhc3MoIFwidWktc3RhdGUtYWN0aXZlXCIgKTsgLyogU2VlIGNvbW1lbnQgYWJvdmUuICovXHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X3NsaWRlclZNb3VzZURvd246IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdC8vIE5PVEU6IHdlIGRvbid0IGRvIHRoaXMgaW4gcmVmcmVzaCBiZWNhdXNlIHdlIHN0aWxsIHdhbnQgdG9cclxuXHRcdC8vICAgICAgIHN1cHBvcnQgcHJvZ3JhbW1hdGljIGFsdGVyYXRpb24gb2YgZGlzYWJsZWQgaW5wdXRzXHJcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5kaXNhYmxlZCB8fCAhKCBldmVudC53aGljaCA9PT0gMSB8fCBldmVudC53aGljaCA9PT0gMCB8fCBldmVudC53aGljaCA9PT0gdW5kZWZpbmVkICkgKSB7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHRcdGlmICggdGhpcy5fdHJpZ2dlciggXCJiZWZvcmVzdGFydFwiLCBldmVudCApID09PSBmYWxzZSApIHtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5kcmFnZ2luZyA9IHRydWU7XHJcblx0XHR0aGlzLnVzZXJNb2RpZmllZCA9IGZhbHNlO1xyXG5cdFx0dGhpcy5tb3VzZU1vdmVkID0gZmFsc2U7XHJcblxyXG5cdFx0aWYgKCB0aGlzLmlzVG9nZ2xlU3dpdGNoICkge1xyXG5cdFx0XHR0aGlzLmJlZm9yZVN0YXJ0ID0gdGhpcy5lbGVtZW50WzBdLnNlbGVjdGVkSW5kZXg7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5yZWZyZXNoKCBldmVudCApO1xyXG5cdFx0dGhpcy5fdHJpZ2dlciggXCJzdGFydFwiICk7XHJcblx0XHRyZXR1cm4gZmFsc2U7XHJcblx0fSxcclxuXHJcblx0X3NsaWRlclZNb3VzZVVwOiBmdW5jdGlvbigpIHtcclxuXHRcdGlmICggdGhpcy5kcmFnZ2luZyApIHtcclxuXHRcdFx0dGhpcy5kcmFnZ2luZyA9IGZhbHNlO1xyXG5cclxuXHRcdFx0aWYgKCB0aGlzLmlzVG9nZ2xlU3dpdGNoICkge1xyXG5cdFx0XHRcdC8vIG1ha2UgdGhlIGhhbmRsZSBtb3ZlIHdpdGggYSBzbW9vdGggdHJhbnNpdGlvblxyXG5cdFx0XHRcdHRoaXMuaGFuZGxlLmFkZENsYXNzKCBcInVpLXNsaWRlci1oYW5kbGUtc25hcHBpbmdcIiApO1xyXG5cclxuXHRcdFx0XHRpZiAoIHRoaXMubW91c2VNb3ZlZCApIHtcclxuXHRcdFx0XHRcdC8vIHRoaXMgaXMgYSBkcmFnLCBjaGFuZ2UgdGhlIHZhbHVlIG9ubHkgaWYgdXNlciBkcmFnZ2VkIGVub3VnaFxyXG5cdFx0XHRcdFx0aWYgKCB0aGlzLnVzZXJNb2RpZmllZCApIHtcclxuXHRcdFx0XHRcdFx0dGhpcy5yZWZyZXNoKCB0aGlzLmJlZm9yZVN0YXJ0ID09PSAwID8gMSA6IDAgKTtcclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdHRoaXMucmVmcmVzaCggdGhpcy5iZWZvcmVTdGFydCApO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHQvLyB0aGlzIGlzIGp1c3QgYSBjbGljaywgY2hhbmdlIHRoZSB2YWx1ZVxyXG5cdFx0XHRcdFx0dGhpcy5yZWZyZXNoKCB0aGlzLmJlZm9yZVN0YXJ0ID09PSAwID8gMSA6IDAgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHRoaXMubW91c2VNb3ZlZCA9IGZhbHNlO1xyXG5cdFx0XHR0aGlzLl90cmlnZ2VyKCBcInN0b3BcIiApO1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X3ByZXZlbnREb2N1bWVudERyYWc6IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdFx0Ly8gTk9URTogd2UgZG9uJ3QgZG8gdGhpcyBpbiByZWZyZXNoIGJlY2F1c2Ugd2Ugc3RpbGwgd2FudCB0b1xyXG5cdFx0XHQvLyAgICAgICBzdXBwb3J0IHByb2dyYW1tYXRpYyBhbHRlcmF0aW9uIG9mIGRpc2FibGVkIGlucHV0c1xyXG5cdFx0XHRpZiAoIHRoaXMuX3RyaWdnZXIoIFwiZHJhZ1wiLCBldmVudCApID09PSBmYWxzZSkge1xyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoIHRoaXMuZHJhZ2dpbmcgJiYgIXRoaXMub3B0aW9ucy5kaXNhYmxlZCApIHtcclxuXHJcblx0XHRcdFx0Ly8gdGhpcy5tb3VzZU1vdmVkIG11c3QgYmUgdXBkYXRlZCBiZWZvcmUgcmVmcmVzaCgpIGJlY2F1c2UgaXQgd2lsbCBiZSB1c2VkIGluIHRoZSBjb250cm9sIFwiY2hhbmdlXCIgZXZlbnRcclxuXHRcdFx0XHR0aGlzLm1vdXNlTW92ZWQgPSB0cnVlO1xyXG5cclxuXHRcdFx0XHRpZiAoIHRoaXMuaXNUb2dnbGVTd2l0Y2ggKSB7XHJcblx0XHRcdFx0XHQvLyBtYWtlIHRoZSBoYW5kbGUgbW92ZSBpbiBzeW5jIHdpdGggdGhlIG1vdXNlXHJcblx0XHRcdFx0XHR0aGlzLmhhbmRsZS5yZW1vdmVDbGFzcyggXCJ1aS1zbGlkZXItaGFuZGxlLXNuYXBwaW5nXCIgKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdHRoaXMucmVmcmVzaCggZXZlbnQgKTtcclxuXHJcblx0XHRcdFx0Ly8gb25seSBhZnRlciByZWZyZXNoKCkgeW91IGNhbiBjYWxjdWxhdGUgdGhpcy51c2VyTW9kaWZpZWRcclxuXHRcdFx0XHR0aGlzLnVzZXJNb2RpZmllZCA9IHRoaXMuYmVmb3JlU3RhcnQgIT09IHRoaXMuZWxlbWVudFswXS5zZWxlY3RlZEluZGV4O1xyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHJcblx0X2NoZWNrZWRSZWZyZXNoOiBmdW5jdGlvbigpIHtcclxuXHRcdGlmICggdGhpcy52YWx1ZSAhPT0gdGhpcy5fdmFsdWUoKSApIHtcclxuXHRcdFx0dGhpcy5yZWZyZXNoKCB0aGlzLl92YWx1ZSgpICk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X3ZhbHVlOiBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiAgdGhpcy5pc1RvZ2dsZVN3aXRjaCA/IHRoaXMuZWxlbWVudFswXS5zZWxlY3RlZEluZGV4IDogcGFyc2VGbG9hdCggdGhpcy5lbGVtZW50LnZhbCgpICkgO1xyXG5cdH0sXHJcblxyXG5cdF9yZXNldDogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLnJlZnJlc2goIHVuZGVmaW5lZCwgZmFsc2UsIHRydWUgKTtcclxuXHR9LFxyXG5cclxuXHRyZWZyZXNoOiBmdW5jdGlvbiggdmFsLCBpc2Zyb21Db250cm9sLCBwcmV2ZW50SW5wdXRVcGRhdGUgKSB7XHJcblx0XHQvLyBOT1RFOiB3ZSBkb24ndCByZXR1cm4gaGVyZSBiZWNhdXNlIHdlIHdhbnQgdG8gc3VwcG9ydCBwcm9ncmFtbWF0aWNcclxuXHRcdC8vICAgICAgIGFsdGVyYXRpb24gb2YgdGhlIGlucHV0IHZhbHVlLCB3aGljaCBzaG91bGQgc3RpbGwgdXBkYXRlIHRoZSBzbGlkZXJcclxuXHJcblx0XHR2YXIgc2VsZiA9IHRoaXMsXHJcblx0XHRcdHBhcmVudFRoZW1lID0gJC5tb2JpbGUuZ2V0QXR0cmlidXRlKCB0aGlzLmVsZW1lbnRbIDAgXSwgXCJ0aGVtZVwiICksXHJcblx0XHRcdHRoZW1lID0gdGhpcy5vcHRpb25zLnRoZW1lIHx8IHBhcmVudFRoZW1lLFxyXG5cdFx0XHR0aGVtZUNsYXNzID0gIHRoZW1lID8gXCIgdWktYnRuLVwiICsgdGhlbWUgOiBcIlwiLFxyXG5cdFx0XHR0cmFja1RoZW1lID0gdGhpcy5vcHRpb25zLnRyYWNrVGhlbWUgfHwgcGFyZW50VGhlbWUsXHJcblx0XHRcdHRyYWNrVGhlbWVDbGFzcyA9IHRyYWNrVGhlbWUgPyBcIiB1aS1iYXItXCIgKyB0cmFja1RoZW1lIDogXCIgdWktYmFyLWluaGVyaXRcIixcclxuXHRcdFx0Y29ybmVyQ2xhc3MgPSB0aGlzLm9wdGlvbnMuY29ybmVycyA/IFwiIHVpLWNvcm5lci1hbGxcIiA6IFwiXCIsXHJcblx0XHRcdG1pbmlDbGFzcyA9IHRoaXMub3B0aW9ucy5taW5pID8gXCIgdWktbWluaVwiIDogXCJcIixcclxuXHRcdFx0bGVmdCwgd2lkdGgsIGRhdGEsIHRvbCxcclxuXHRcdFx0cHhTdGVwLCBwZXJjZW50LFxyXG5cdFx0XHRjb250cm9sLCBpc0lucHV0LCBvcHRpb25FbGVtZW50cywgbWluLCBtYXgsIHN0ZXAsXHJcblx0XHRcdG5ld3ZhbCwgdmFsTW9kU3RlcCwgYWxpZ25WYWx1ZSwgcGVyY2VudFBlclN0ZXAsXHJcblx0XHRcdGhhbmRsZVBlcmNlbnQsIGFQZXJjZW50LCBiUGVyY2VudCxcclxuXHRcdFx0dmFsdWVDaGFuZ2VkO1xyXG5cclxuXHRcdHNlbGYuc2xpZGVyWzBdLmNsYXNzTmFtZSA9IFsgdGhpcy5pc1RvZ2dsZVN3aXRjaCA/IFwidWktc2xpZGVyIHVpLXNsaWRlci1zd2l0Y2ggdWktc2xpZGVyLXRyYWNrIHVpLXNoYWRvdy1pbnNldFwiIDogXCJ1aS1zbGlkZXItdHJhY2sgdWktc2hhZG93LWluc2V0XCIsIHRyYWNrVGhlbWVDbGFzcywgY29ybmVyQ2xhc3MsIG1pbmlDbGFzcyBdLmpvaW4oIFwiXCIgKTtcclxuXHRcdGlmICggdGhpcy5vcHRpb25zLmRpc2FibGVkIHx8IHRoaXMuZWxlbWVudC5wcm9wKCBcImRpc2FibGVkXCIgKSApIHtcclxuXHRcdFx0dGhpcy5kaXNhYmxlKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gc2V0IHRoZSBzdG9yZWQgdmFsdWUgZm9yIGNvbXBhcmlzb24gbGF0ZXJcclxuXHRcdHRoaXMudmFsdWUgPSB0aGlzLl92YWx1ZSgpO1xyXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMuaGlnaGxpZ2h0ICYmICF0aGlzLmlzVG9nZ2xlU3dpdGNoICYmIHRoaXMuc2xpZGVyLmZpbmQoIFwiLnVpLXNsaWRlci1iZ1wiICkubGVuZ3RoID09PSAwICkge1xyXG5cdFx0XHR0aGlzLnZhbHVlYmcgPSAoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0dmFyIGJnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJkaXZcIiApO1xyXG5cdFx0XHRcdGJnLmNsYXNzTmFtZSA9IFwidWktc2xpZGVyLWJnIFwiICsgJC5tb2JpbGUuYWN0aXZlQnRuQ2xhc3M7XHJcblx0XHRcdFx0cmV0dXJuICQoIGJnICkucHJlcGVuZFRvKCBzZWxmLnNsaWRlciApO1xyXG5cdFx0XHR9KSgpO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5oYW5kbGUuYWRkQ2xhc3MoIFwidWktYnRuXCIgKyB0aGVtZUNsYXNzICsgXCIgdWktc2hhZG93XCIgKTtcclxuXHJcblx0XHRjb250cm9sID0gdGhpcy5lbGVtZW50O1xyXG5cdFx0aXNJbnB1dCA9ICF0aGlzLmlzVG9nZ2xlU3dpdGNoO1xyXG5cdFx0b3B0aW9uRWxlbWVudHMgPSBpc0lucHV0ID8gW10gOiBjb250cm9sLmZpbmQoIFwib3B0aW9uXCIgKTtcclxuXHRcdG1pbiA9ICBpc0lucHV0ID8gcGFyc2VGbG9hdCggY29udHJvbC5hdHRyKCBcIm1pblwiICkgKSA6IDA7XHJcblx0XHRtYXggPSBpc0lucHV0ID8gcGFyc2VGbG9hdCggY29udHJvbC5hdHRyKCBcIm1heFwiICkgKSA6IG9wdGlvbkVsZW1lbnRzLmxlbmd0aCAtIDE7XHJcblx0XHRzdGVwID0gKCBpc0lucHV0ICYmIHBhcnNlRmxvYXQoIGNvbnRyb2wuYXR0ciggXCJzdGVwXCIgKSApID4gMCApID8gcGFyc2VGbG9hdCggY29udHJvbC5hdHRyKCBcInN0ZXBcIiApICkgOiAxO1xyXG5cclxuXHRcdGlmICggdHlwZW9mIHZhbCA9PT0gXCJvYmplY3RcIiApIHtcclxuXHRcdFx0ZGF0YSA9IHZhbDtcclxuXHRcdFx0Ly8gYSBzbGlnaHQgdG9sZXJhbmNlIGhlbHBlZCBnZXQgdG8gdGhlIGVuZHMgb2YgdGhlIHNsaWRlclxyXG5cdFx0XHR0b2wgPSA4O1xyXG5cclxuXHRcdFx0bGVmdCA9IHRoaXMuc2xpZGVyLm9mZnNldCgpLmxlZnQ7XHJcblx0XHRcdHdpZHRoID0gdGhpcy5zbGlkZXIud2lkdGgoKTtcclxuXHRcdFx0cHhTdGVwID0gd2lkdGgvKChtYXgtbWluKS9zdGVwKTtcclxuXHRcdFx0aWYgKCAhdGhpcy5kcmFnZ2luZyB8fFxyXG5cdFx0XHRcdFx0ZGF0YS5wYWdlWCA8IGxlZnQgLSB0b2wgfHxcclxuXHRcdFx0XHRcdGRhdGEucGFnZVggPiBsZWZ0ICsgd2lkdGggKyB0b2wgKSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICggcHhTdGVwID4gMSApIHtcclxuXHRcdFx0XHRwZXJjZW50ID0gKCAoIGRhdGEucGFnZVggLSBsZWZ0ICkgLyB3aWR0aCApICogMTAwO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHBlcmNlbnQgPSBNYXRoLnJvdW5kKCAoICggZGF0YS5wYWdlWCAtIGxlZnQgKSAvIHdpZHRoICkgKiAxMDAgKTtcclxuXHRcdFx0fVxyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0aWYgKCB2YWwgPT0gbnVsbCApIHtcclxuXHRcdFx0XHR2YWwgPSBpc0lucHV0ID8gcGFyc2VGbG9hdCggY29udHJvbC52YWwoKSB8fCAwICkgOiBjb250cm9sWzBdLnNlbGVjdGVkSW5kZXg7XHJcblx0XHRcdH1cclxuXHRcdFx0cGVyY2VudCA9ICggcGFyc2VGbG9hdCggdmFsICkgLSBtaW4gKSAvICggbWF4IC0gbWluICkgKiAxMDA7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBpc05hTiggcGVyY2VudCApICkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0bmV3dmFsID0gKCBwZXJjZW50IC8gMTAwICkgKiAoIG1heCAtIG1pbiApICsgbWluO1xyXG5cclxuXHRcdC8vZnJvbSBqUXVlcnkgVUkgc2xpZGVyLCB0aGUgZm9sbG93aW5nIHNvdXJjZSB3aWxsIHJvdW5kIHRvIHRoZSBuZWFyZXN0IHN0ZXBcclxuXHRcdHZhbE1vZFN0ZXAgPSAoIG5ld3ZhbCAtIG1pbiApICUgc3RlcDtcclxuXHRcdGFsaWduVmFsdWUgPSBuZXd2YWwgLSB2YWxNb2RTdGVwO1xyXG5cclxuXHRcdGlmICggTWF0aC5hYnMoIHZhbE1vZFN0ZXAgKSAqIDIgPj0gc3RlcCApIHtcclxuXHRcdFx0YWxpZ25WYWx1ZSArPSAoIHZhbE1vZFN0ZXAgPiAwICkgPyBzdGVwIDogKCAtc3RlcCApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHBlcmNlbnRQZXJTdGVwID0gMTAwLygobWF4LW1pbikvc3RlcCk7XHJcblx0XHQvLyBTaW5jZSBKYXZhU2NyaXB0IGhhcyBwcm9ibGVtcyB3aXRoIGxhcmdlIGZsb2F0cywgcm91bmRcclxuXHRcdC8vIHRoZSBmaW5hbCB2YWx1ZSB0byA1IGRpZ2l0cyBhZnRlciB0aGUgZGVjaW1hbCBwb2ludCAoc2VlIGpRdWVyeVVJOiAjNDEyNClcclxuXHRcdG5ld3ZhbCA9IHBhcnNlRmxvYXQoIGFsaWduVmFsdWUudG9GaXhlZCg1KSApO1xyXG5cclxuXHRcdGlmICggdHlwZW9mIHB4U3RlcCA9PT0gXCJ1bmRlZmluZWRcIiApIHtcclxuXHRcdFx0cHhTdGVwID0gd2lkdGggLyAoIChtYXgtbWluKSAvIHN0ZXAgKTtcclxuXHRcdH1cclxuXHRcdGlmICggcHhTdGVwID4gMSAmJiBpc0lucHV0ICkge1xyXG5cdFx0XHRwZXJjZW50ID0gKCBuZXd2YWwgLSBtaW4gKSAqIHBlcmNlbnRQZXJTdGVwICogKCAxIC8gc3RlcCApO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCBwZXJjZW50IDwgMCApIHtcclxuXHRcdFx0cGVyY2VudCA9IDA7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBwZXJjZW50ID4gMTAwICkge1xyXG5cdFx0XHRwZXJjZW50ID0gMTAwO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggbmV3dmFsIDwgbWluICkge1xyXG5cdFx0XHRuZXd2YWwgPSBtaW47XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBuZXd2YWwgPiBtYXggKSB7XHJcblx0XHRcdG5ld3ZhbCA9IG1heDtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLmhhbmRsZS5jc3MoIFwibGVmdFwiLCBwZXJjZW50ICsgXCIlXCIgKTtcclxuXHJcblx0XHR0aGlzLmhhbmRsZVswXS5zZXRBdHRyaWJ1dGUoIFwiYXJpYS12YWx1ZW5vd1wiLCBpc0lucHV0ID8gbmV3dmFsIDogb3B0aW9uRWxlbWVudHMuZXEoIG5ld3ZhbCApLmF0dHIoIFwidmFsdWVcIiApICk7XHJcblxyXG5cdFx0dGhpcy5oYW5kbGVbMF0uc2V0QXR0cmlidXRlKCBcImFyaWEtdmFsdWV0ZXh0XCIsIGlzSW5wdXQgPyBuZXd2YWwgOiBvcHRpb25FbGVtZW50cy5lcSggbmV3dmFsICkuZ2V0RW5jb2RlZFRleHQoKSApO1xyXG5cclxuXHRcdHRoaXMuaGFuZGxlWzBdLnNldEF0dHJpYnV0ZSggXCJ0aXRsZVwiLCBpc0lucHV0ID8gbmV3dmFsIDogb3B0aW9uRWxlbWVudHMuZXEoIG5ld3ZhbCApLmdldEVuY29kZWRUZXh0KCkgKTtcclxuXHJcblx0XHRpZiAoIHRoaXMudmFsdWViZyApIHtcclxuXHRcdFx0dGhpcy52YWx1ZWJnLmNzcyggXCJ3aWR0aFwiLCBwZXJjZW50ICsgXCIlXCIgKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBkcmFnIHRoZSBsYWJlbCB3aWR0aHNcclxuXHRcdGlmICggdGhpcy5fbGFiZWxzICkge1xyXG5cdFx0XHRoYW5kbGVQZXJjZW50ID0gdGhpcy5oYW5kbGUud2lkdGgoKSAvIHRoaXMuc2xpZGVyLndpZHRoKCkgKiAxMDA7XHJcblx0XHRcdGFQZXJjZW50ID0gcGVyY2VudCAmJiBoYW5kbGVQZXJjZW50ICsgKCAxMDAgLSBoYW5kbGVQZXJjZW50ICkgKiBwZXJjZW50IC8gMTAwO1xyXG5cdFx0XHRiUGVyY2VudCA9IHBlcmNlbnQgPT09IDEwMCA/IDAgOiBNYXRoLm1pbiggaGFuZGxlUGVyY2VudCArIDEwMCAtIGFQZXJjZW50LCAxMDAgKTtcclxuXHJcblx0XHRcdHRoaXMuX2xhYmVscy5lYWNoKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHZhciBhYiA9ICQoIHRoaXMgKS5oYXNDbGFzcyggXCJ1aS1zbGlkZXItbGFiZWwtYVwiICk7XHJcblx0XHRcdFx0JCggdGhpcyApLndpZHRoKCAoIGFiID8gYVBlcmNlbnQgOiBiUGVyY2VudCAgKSArIFwiJVwiICk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggIXByZXZlbnRJbnB1dFVwZGF0ZSApIHtcclxuXHRcdFx0dmFsdWVDaGFuZ2VkID0gZmFsc2U7XHJcblxyXG5cdFx0XHQvLyB1cGRhdGUgY29udHJvbFwicyB2YWx1ZVxyXG5cdFx0XHRpZiAoIGlzSW5wdXQgKSB7XHJcblx0XHRcdFx0dmFsdWVDaGFuZ2VkID0gcGFyc2VGbG9hdCggY29udHJvbC52YWwoKSApICE9PSBuZXd2YWw7XHJcblx0XHRcdFx0Y29udHJvbC52YWwoIG5ld3ZhbCApO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHZhbHVlQ2hhbmdlZCA9IGNvbnRyb2xbIDAgXS5zZWxlY3RlZEluZGV4ICE9PSBuZXd2YWw7XHJcblx0XHRcdFx0Y29udHJvbFsgMCBdLnNlbGVjdGVkSW5kZXggPSBuZXd2YWw7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKCB0aGlzLl90cmlnZ2VyKCBcImJlZm9yZWNoYW5nZVwiLCB2YWwgKSA9PT0gZmFsc2UpIHtcclxuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoICFpc2Zyb21Db250cm9sICYmIHZhbHVlQ2hhbmdlZCApIHtcclxuXHRcdFx0XHRjb250cm9sLnRyaWdnZXIoIFwiY2hhbmdlXCIgKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9zZXRIaWdobGlnaHQ6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcclxuXHRcdHZhbHVlID0gISF2YWx1ZTtcclxuXHRcdGlmICggdmFsdWUgKSB7XHJcblx0XHRcdHRoaXMub3B0aW9ucy5oaWdobGlnaHQgPSAhIXZhbHVlO1xyXG5cdFx0XHR0aGlzLnJlZnJlc2goKTtcclxuXHRcdH0gZWxzZSBpZiAoIHRoaXMudmFsdWViZyApIHtcclxuXHRcdFx0dGhpcy52YWx1ZWJnLnJlbW92ZSgpO1xyXG5cdFx0XHR0aGlzLnZhbHVlYmcgPSBmYWxzZTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfc2V0VGhlbWU6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcclxuXHRcdHRoaXMuaGFuZGxlXHJcblx0XHRcdC5yZW1vdmVDbGFzcyggXCJ1aS1idG4tXCIgKyB0aGlzLm9wdGlvbnMudGhlbWUgKVxyXG5cdFx0XHQuYWRkQ2xhc3MoIFwidWktYnRuLVwiICsgdmFsdWUgKTtcclxuXHJcblx0XHR2YXIgY3VycmVudFRoZW1lID0gdGhpcy5vcHRpb25zLnRoZW1lID8gdGhpcy5vcHRpb25zLnRoZW1lIDogXCJpbmhlcml0XCIsXHJcblx0XHRcdG5ld1RoZW1lID0gdmFsdWUgPyB2YWx1ZSA6IFwiaW5oZXJpdFwiO1xyXG5cclxuXHRcdHRoaXMuY29udHJvbFxyXG5cdFx0XHQucmVtb3ZlQ2xhc3MoIFwidWktYm9keS1cIiArIGN1cnJlbnRUaGVtZSApXHJcblx0XHRcdC5hZGRDbGFzcyggXCJ1aS1ib2R5LVwiICsgbmV3VGhlbWUgKTtcclxuXHR9LFxyXG5cclxuXHRfc2V0VHJhY2tUaGVtZTogZnVuY3Rpb24oIHZhbHVlICkge1xyXG5cdFx0dmFyIGN1cnJlbnRUcmFja1RoZW1lID0gdGhpcy5vcHRpb25zLnRyYWNrVGhlbWUgPyB0aGlzLm9wdGlvbnMudHJhY2tUaGVtZSA6IFwiaW5oZXJpdFwiLFxyXG5cdFx0XHRuZXdUcmFja1RoZW1lID0gdmFsdWUgPyB2YWx1ZSA6IFwiaW5oZXJpdFwiO1xyXG5cclxuXHRcdHRoaXMuc2xpZGVyXHJcblx0XHRcdC5yZW1vdmVDbGFzcyggXCJ1aS1ib2R5LVwiICsgY3VycmVudFRyYWNrVGhlbWUgKVxyXG5cdFx0XHQuYWRkQ2xhc3MoIFwidWktYm9keS1cIiArIG5ld1RyYWNrVGhlbWUgKTtcclxuXHR9LFxyXG5cclxuXHRfc2V0TWluaTogZnVuY3Rpb24oIHZhbHVlICkge1xyXG5cdFx0dmFsdWUgPSAhIXZhbHVlO1xyXG5cdFx0aWYgKCAhdGhpcy5pc1RvZ2dsZVN3aXRjaCAmJiAhdGhpcy5pc1Jhbmdlc2xpZGVyICkge1xyXG5cdFx0XHR0aGlzLnNsaWRlci5wYXJlbnQoKS50b2dnbGVDbGFzcyggXCJ1aS1taW5pXCIsIHZhbHVlICk7XHJcblx0XHRcdHRoaXMuZWxlbWVudC50b2dnbGVDbGFzcyggXCJ1aS1taW5pXCIsIHZhbHVlICk7XHJcblx0XHR9XHJcblx0XHR0aGlzLnNsaWRlci50b2dnbGVDbGFzcyggXCJ1aS1taW5pXCIsIHZhbHVlICk7XHJcblx0fSxcclxuXHJcblx0X3NldENvcm5lcnM6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcclxuXHRcdHRoaXMuc2xpZGVyLnRvZ2dsZUNsYXNzKCBcInVpLWNvcm5lci1hbGxcIiwgdmFsdWUgKTtcclxuXHJcblx0XHRpZiAoICF0aGlzLmlzVG9nZ2xlU3dpdGNoICkge1xyXG5cdFx0XHR0aGlzLmNvbnRyb2wudG9nZ2xlQ2xhc3MoIFwidWktY29ybmVyLWFsbFwiLCB2YWx1ZSApO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9zZXREaXNhYmxlZDogZnVuY3Rpb24oIHZhbHVlICkge1xyXG5cdFx0dmFsdWUgPSAhIXZhbHVlO1xyXG5cdFx0dGhpcy5lbGVtZW50LnByb3AoIFwiZGlzYWJsZWRcIiwgdmFsdWUgKTtcclxuXHRcdHRoaXMuc2xpZGVyXHJcblx0XHRcdC50b2dnbGVDbGFzcyggXCJ1aS1zdGF0ZS1kaXNhYmxlZFwiLCB2YWx1ZSApXHJcblx0XHRcdC5hdHRyKCBcImFyaWEtZGlzYWJsZWRcIiwgdmFsdWUgKTtcclxuXHJcblx0XHR0aGlzLmVsZW1lbnQudG9nZ2xlQ2xhc3MoIFwidWktc3RhdGUtZGlzYWJsZWRcIiwgdmFsdWUgKTtcclxuXHR9XHJcblxyXG59LCAkLm1vYmlsZS5iZWhhdmlvcnMuZm9ybVJlc2V0ICkgKTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxudmFyIHBvcHVwO1xyXG5cclxuZnVuY3Rpb24gZ2V0UG9wdXAoKSB7XHJcblx0aWYgKCAhcG9wdXAgKSB7XHJcblx0XHRwb3B1cCA9ICQoIFwiPGRpdj48L2Rpdj5cIiwge1xyXG5cdFx0XHRcImNsYXNzXCI6IFwidWktc2xpZGVyLXBvcHVwIHVpLXNoYWRvdyB1aS1jb3JuZXItYWxsXCJcclxuXHRcdH0pO1xyXG5cdH1cclxuXHRyZXR1cm4gcG9wdXAuY2xvbmUoKTtcclxufVxyXG5cclxuJC53aWRnZXQoIFwibW9iaWxlLnNsaWRlclwiLCAkLm1vYmlsZS5zbGlkZXIsIHtcclxuXHRvcHRpb25zOiB7XHJcblx0XHRwb3B1cEVuYWJsZWQ6IGZhbHNlLFxyXG5cdFx0c2hvd1ZhbHVlOiBmYWxzZVxyXG5cdH0sXHJcblxyXG5cdF9jcmVhdGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5fc3VwZXIoKTtcclxuXHJcblx0XHQkLmV4dGVuZCggdGhpcywge1xyXG5cdFx0XHRfY3VycmVudFZhbHVlOiBudWxsLFxyXG5cdFx0XHRfcG9wdXA6IG51bGwsXHJcblx0XHRcdF9wb3B1cFZpc2libGU6IGZhbHNlXHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLl9zZXRPcHRpb24oIFwicG9wdXBFbmFibGVkXCIsIHRoaXMub3B0aW9ucy5wb3B1cEVuYWJsZWQgKTtcclxuXHJcblx0XHR0aGlzLl9vbiggdGhpcy5oYW5kbGUsIHsgXCJ2bW91c2Vkb3duXCIgOiBcIl9zaG93UG9wdXBcIiB9ICk7XHJcblx0XHR0aGlzLl9vbiggdGhpcy5zbGlkZXIuYWRkKCB0aGlzLmRvY3VtZW50ICksIHsgXCJ2bW91c2V1cFwiIDogXCJfaGlkZVBvcHVwXCIgfSApO1xyXG5cdFx0dGhpcy5fcmVmcmVzaCgpO1xyXG5cdH0sXHJcblxyXG5cdC8vIHBvc2l0aW9uIHRoZSBwb3B1cCBjZW50ZXJlZCA1cHggYWJvdmUgdGhlIGhhbmRsZVxyXG5cdF9wb3NpdGlvblBvcHVwOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBkc3RPZmZzZXQgPSB0aGlzLmhhbmRsZS5vZmZzZXQoKTtcclxuXHJcblx0XHR0aGlzLl9wb3B1cC5vZmZzZXQoIHtcclxuXHRcdFx0bGVmdDogZHN0T2Zmc2V0LmxlZnQgKyAoIHRoaXMuaGFuZGxlLndpZHRoKCkgLSB0aGlzLl9wb3B1cC53aWR0aCgpICkgLyAyLFxyXG5cdFx0XHR0b3A6IGRzdE9mZnNldC50b3AgLSB0aGlzLl9wb3B1cC5vdXRlckhlaWdodCgpIC0gNVxyXG5cdFx0fSk7XHJcblx0fSxcclxuXHJcblx0X3NldE9wdGlvbjogZnVuY3Rpb24oIGtleSwgdmFsdWUgKSB7XHJcblx0XHR0aGlzLl9zdXBlcigga2V5LCB2YWx1ZSApO1xyXG5cclxuXHRcdGlmICgga2V5ID09PSBcInNob3dWYWx1ZVwiICkge1xyXG5cdFx0XHR0aGlzLmhhbmRsZS5odG1sKCB2YWx1ZSAmJiAhdGhpcy5vcHRpb25zLm1pbmkgPyB0aGlzLl92YWx1ZSgpIDogXCJcIiApO1xyXG5cdFx0fSBlbHNlIGlmICgga2V5ID09PSBcInBvcHVwRW5hYmxlZFwiICkge1xyXG5cdFx0XHRpZiAoIHZhbHVlICYmICF0aGlzLl9wb3B1cCApIHtcclxuXHRcdFx0XHR0aGlzLl9wb3B1cCA9IGdldFBvcHVwKClcclxuXHRcdFx0XHRcdC5hZGRDbGFzcyggXCJ1aS1ib2R5LVwiICsgKCB0aGlzLm9wdGlvbnMudGhlbWUgfHwgXCJhXCIgKSApXHJcblx0XHRcdFx0XHQuaGlkZSgpXHJcblx0XHRcdFx0XHQuaW5zZXJ0QmVmb3JlKCB0aGlzLmVsZW1lbnQgKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdC8vIHNob3cgdmFsdWUgb24gdGhlIGhhbmRsZSBhbmQgaW4gcG9wdXBcclxuXHRyZWZyZXNoOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX3N1cGVyLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcclxuXHRcdHRoaXMuX3JlZnJlc2goKTtcclxuXHR9LFxyXG5cclxuXHRfcmVmcmVzaDogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgbyA9IHRoaXMub3B0aW9ucywgbmV3VmFsdWU7XHJcblxyXG5cdFx0aWYgKCBvLnBvcHVwRW5hYmxlZCApIHtcclxuXHRcdFx0Ly8gcmVtb3ZlIHRoZSB0aXRsZSBhdHRyaWJ1dGUgZnJvbSB0aGUgaGFuZGxlICh3aGljaCBpc1xyXG5cdFx0XHQvLyByZXNwb25zaWJsZSBmb3IgdGhlIGFubm95aW5nIHRvb2x0aXApOyBOQiB3ZSBoYXZlXHJcblx0XHRcdC8vIHRvIGRvIGl0IGhlcmUgYXMgdGhlIGpxbSBzbGlkZXIgc2V0cyBpdCBldmVyeSB0aW1lXHJcblx0XHRcdC8vIHRoZSBzbGlkZXIncyB2YWx1ZSBjaGFuZ2VzIDooXHJcblx0XHRcdHRoaXMuaGFuZGxlLnJlbW92ZUF0dHIoIFwidGl0bGVcIiApO1xyXG5cdFx0fVxyXG5cclxuXHRcdG5ld1ZhbHVlID0gdGhpcy5fdmFsdWUoKTtcclxuXHRcdGlmICggbmV3VmFsdWUgPT09IHRoaXMuX2N1cnJlbnRWYWx1ZSApIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5fY3VycmVudFZhbHVlID0gbmV3VmFsdWU7XHJcblxyXG5cdFx0aWYgKCBvLnBvcHVwRW5hYmxlZCAmJiB0aGlzLl9wb3B1cCApIHtcclxuXHRcdFx0dGhpcy5fcG9zaXRpb25Qb3B1cCgpO1xyXG5cdFx0XHR0aGlzLl9wb3B1cC5odG1sKCBuZXdWYWx1ZSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggby5zaG93VmFsdWUgJiYgIXRoaXMub3B0aW9ucy5taW5pICkge1xyXG5cdFx0XHR0aGlzLmhhbmRsZS5odG1sKCBuZXdWYWx1ZSApO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9zaG93UG9wdXA6IGZ1bmN0aW9uKCkge1xyXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMucG9wdXBFbmFibGVkICYmICF0aGlzLl9wb3B1cFZpc2libGUgKSB7XHJcblx0XHRcdHRoaXMuaGFuZGxlLmh0bWwoIFwiXCIgKTtcclxuXHRcdFx0dGhpcy5fcG9wdXAuc2hvdygpO1xyXG5cdFx0XHR0aGlzLl9wb3NpdGlvblBvcHVwKCk7XHJcblx0XHRcdHRoaXMuX3BvcHVwVmlzaWJsZSA9IHRydWU7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X2hpZGVQb3B1cDogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgbyA9IHRoaXMub3B0aW9ucztcclxuXHJcblx0XHRpZiAoIG8ucG9wdXBFbmFibGVkICYmIHRoaXMuX3BvcHVwVmlzaWJsZSApIHtcclxuXHRcdFx0aWYgKCBvLnNob3dWYWx1ZSAmJiAhby5taW5pICkge1xyXG5cdFx0XHRcdHRoaXMuaGFuZGxlLmh0bWwoIHRoaXMuX3ZhbHVlKCkgKTtcclxuXHRcdFx0fVxyXG5cdFx0XHR0aGlzLl9wb3B1cC5oaWRlKCk7XHJcblx0XHRcdHRoaXMuX3BvcHVwVmlzaWJsZSA9IGZhbHNlO1xyXG5cdFx0fVxyXG5cdH1cclxufSk7XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcbiQud2lkZ2V0KCBcIm1vYmlsZS5mbGlwc3dpdGNoXCIsICQuZXh0ZW5kKHtcclxuXHJcblx0b3B0aW9uczoge1xyXG5cdFx0b25UZXh0OiBcIk9uXCIsXHJcblx0XHRvZmZUZXh0OiBcIk9mZlwiLFxyXG5cdFx0dGhlbWU6IG51bGwsXHJcblx0XHRlbmhhbmNlZDogZmFsc2UsXHJcblx0XHR3cmFwcGVyQ2xhc3M6IG51bGwsXHJcblx0XHRjb3JuZXJzOiB0cnVlLFxyXG5cdFx0bWluaTogZmFsc2VcclxuXHR9LFxyXG5cclxuXHRfY3JlYXRlOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0aWYgKCAhdGhpcy5vcHRpb25zLmVuaGFuY2VkICkge1xyXG5cdFx0XHRcdHRoaXMuX2VuaGFuY2UoKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQkLmV4dGVuZCggdGhpcywge1xyXG5cdFx0XHRcdFx0ZmxpcHN3aXRjaDogdGhpcy5lbGVtZW50LnBhcmVudCgpLFxyXG5cdFx0XHRcdFx0b246IHRoaXMuZWxlbWVudC5maW5kKCBcIi51aS1mbGlwc3dpdGNoLW9uXCIgKS5lcSggMCApLFxyXG5cdFx0XHRcdFx0b2ZmOiB0aGlzLmVsZW1lbnQuZmluZCggXCIudWktZmxpcHN3aXRjaC1vZmZcIiApLmVxKDApLFxyXG5cdFx0XHRcdFx0dHlwZTogdGhpcy5lbGVtZW50LmdldCggMCApLnRhZ05hbWVcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dGhpcy5faGFuZGxlRm9ybVJlc2V0KCk7XHJcblxyXG5cdFx0XHQvLyBUcmFuc2ZlciB0YWJpbmRleCB0byBcIm9uXCIgZWxlbWVudCBhbmQgbWFrZSBpbnB1dCB1bmZvY3VzYWJsZVxyXG5cdFx0XHR0aGlzLl9vcmlnaW5hbFRhYkluZGV4ID0gdGhpcy5lbGVtZW50LmF0dHIoIFwidGFiaW5kZXhcIiApO1xyXG5cdFx0XHRpZiAoIHRoaXMuX29yaWdpbmFsVGFiSW5kZXggIT0gbnVsbCApIHtcclxuXHRcdFx0XHR0aGlzLm9uLmF0dHIoIFwidGFiaW5kZXhcIiwgdGhpcy5fb3JpZ2luYWxUYWJJbmRleCApO1xyXG5cdFx0XHR9XHJcblx0XHRcdHRoaXMuZWxlbWVudC5hdHRyKCBcInRhYmluZGV4XCIsIFwiLTFcIiApO1xyXG5cdFx0XHR0aGlzLl9vbih7XHJcblx0XHRcdFx0XCJmb2N1c1wiIDogXCJfaGFuZGxlSW5wdXRGb2N1c1wiXHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0aWYgKCB0aGlzLmVsZW1lbnQuaXMoIFwiOmRpc2FibGVkXCIgKSApIHtcclxuXHRcdFx0XHR0aGlzLl9zZXRPcHRpb25zKHtcclxuXHRcdFx0XHRcdFwiZGlzYWJsZWRcIjogdHJ1ZVxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR0aGlzLl9vbiggdGhpcy5mbGlwc3dpdGNoLCB7XHJcblx0XHRcdFx0XCJjbGlja1wiOiBcIl90b2dnbGVcIixcclxuXHRcdFx0XHRcInN3aXBlbGVmdFwiOiBcIl9sZWZ0XCIsXHJcblx0XHRcdFx0XCJzd2lwZXJpZ2h0XCI6IFwiX3JpZ2h0XCJcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHR0aGlzLl9vbiggdGhpcy5vbiwge1xyXG5cdFx0XHRcdFwia2V5ZG93blwiOiBcIl9rZXlkb3duXCJcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHR0aGlzLl9vbigge1xyXG5cdFx0XHRcdFwiY2hhbmdlXCI6IFwicmVmcmVzaFwiXHJcblx0XHRcdH0pO1xyXG5cdH0sXHJcblxyXG5cdF9oYW5kbGVJbnB1dEZvY3VzOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMub24uZm9jdXMoKTtcclxuXHR9LFxyXG5cclxuXHR3aWRnZXQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuIHRoaXMuZmxpcHN3aXRjaDtcclxuXHR9LFxyXG5cclxuXHRfbGVmdDogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLmZsaXBzd2l0Y2gucmVtb3ZlQ2xhc3MoIFwidWktZmxpcHN3aXRjaC1hY3RpdmVcIiApO1xyXG5cdFx0aWYgKCB0aGlzLnR5cGUgPT09IFwiU0VMRUNUXCIgKSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudC5nZXQoIDAgKS5zZWxlY3RlZEluZGV4ID0gMDtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudC5wcm9wKCBcImNoZWNrZWRcIiwgZmFsc2UgKTtcclxuXHRcdH1cclxuXHRcdHRoaXMuZWxlbWVudC50cmlnZ2VyKCBcImNoYW5nZVwiICk7XHJcblx0fSxcclxuXHJcblx0X3JpZ2h0OiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuZmxpcHN3aXRjaC5hZGRDbGFzcyggXCJ1aS1mbGlwc3dpdGNoLWFjdGl2ZVwiICk7XHJcblx0XHRpZiAoIHRoaXMudHlwZSA9PT0gXCJTRUxFQ1RcIiApIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50LmdldCggMCApLnNlbGVjdGVkSW5kZXggPSAxO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50LnByb3AoIFwiY2hlY2tlZFwiLCB0cnVlICk7XHJcblx0XHR9XHJcblx0XHR0aGlzLmVsZW1lbnQudHJpZ2dlciggXCJjaGFuZ2VcIiApO1xyXG5cdH0sXHJcblxyXG5cdF9lbmhhbmNlOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBmbGlwc3dpdGNoID0gJCggXCI8ZGl2PlwiICksXHJcblx0XHRcdG9wdGlvbnMgPSB0aGlzLm9wdGlvbnMsXHJcblx0XHRcdGVsZW1lbnQgPSB0aGlzLmVsZW1lbnQsXHJcblx0XHRcdHRoZW1lID0gb3B0aW9ucy50aGVtZSA/IG9wdGlvbnMudGhlbWUgOiBcImluaGVyaXRcIixcclxuXHJcblx0XHRcdC8vIFRoZSBcIm9uXCIgYnV0dG9uIGlzIGFuIGFuY2hvciBzbyBpdCdzIGZvY3VzYWJsZVxyXG5cdFx0XHRvbiA9ICQoIFwiPGE+PC9hPlwiLCB7XHJcblx0XHRcdFx0XCJocmVmXCI6IFwiI1wiXHJcblx0XHRcdH0pLFxyXG5cdFx0XHRvZmYgPSAkKCBcIjxzcGFuPjwvc3Bhbj5cIiApLFxyXG5cdFx0XHR0eXBlID0gZWxlbWVudC5nZXQoIDAgKS50YWdOYW1lLFxyXG5cdFx0XHRvblRleHQgPSAoIHR5cGUgPT09IFwiSU5QVVRcIiApID9cclxuXHRcdFx0XHRvcHRpb25zLm9uVGV4dCA6IGVsZW1lbnQuZmluZCggXCJvcHRpb25cIiApLmVxKCAxICkudGV4dCgpLFxyXG5cdFx0XHRvZmZUZXh0ID0gKCB0eXBlID09PSBcIklOUFVUXCIgKSA/XHJcblx0XHRcdFx0b3B0aW9ucy5vZmZUZXh0IDogZWxlbWVudC5maW5kKCBcIm9wdGlvblwiICkuZXEoIDAgKS50ZXh0KCk7XHJcblxyXG5cdFx0XHRvblxyXG5cdFx0XHRcdC5hZGRDbGFzcyggXCJ1aS1mbGlwc3dpdGNoLW9uIHVpLWJ0biB1aS1zaGFkb3cgdWktYnRuLWluaGVyaXRcIiApXHJcblx0XHRcdFx0LnRleHQoIG9uVGV4dCApO1xyXG5cdFx0XHRvZmZcclxuXHRcdFx0XHQuYWRkQ2xhc3MoIFwidWktZmxpcHN3aXRjaC1vZmZcIiApXHJcblx0XHRcdFx0LnRleHQoIG9mZlRleHQgKTtcclxuXHJcblx0XHRcdGZsaXBzd2l0Y2hcclxuXHRcdFx0XHQuYWRkQ2xhc3MoIFwidWktZmxpcHN3aXRjaCB1aS1zaGFkb3ctaW5zZXQgXCIgK1xyXG5cdFx0XHRcdFx0XCJ1aS1iYXItXCIgKyB0aGVtZSArIFwiIFwiICtcclxuXHRcdFx0XHRcdCggb3B0aW9ucy53cmFwcGVyQ2xhc3MgPyBvcHRpb25zLndyYXBwZXJDbGFzcyA6IFwiXCIgKSArIFwiIFwiICtcclxuXHRcdFx0XHRcdCggKCBlbGVtZW50LmlzKCBcIjpjaGVja2VkXCIgKSB8fFxyXG5cdFx0XHRcdFx0XHRlbGVtZW50XHJcblx0XHRcdFx0XHRcdFx0LmZpbmQoIFwib3B0aW9uXCIgKVxyXG5cdFx0XHRcdFx0XHRcdC5lcSggMSApXHJcblx0XHRcdFx0XHRcdFx0LmlzKCBcIjpzZWxlY3RlZFwiICkgKSA/IFwidWktZmxpcHN3aXRjaC1hY3RpdmVcIiA6IFwiXCIgKSArXHJcblx0XHRcdFx0XHQoIGVsZW1lbnQuaXMoXCI6ZGlzYWJsZWRcIikgPyBcIiB1aS1zdGF0ZS1kaXNhYmxlZFwiOiBcIlwiKSArXHJcblx0XHRcdFx0XHQoIG9wdGlvbnMuY29ybmVycyA/IFwiIHVpLWNvcm5lci1hbGxcIjogXCJcIiApICtcclxuXHRcdFx0XHRcdCggb3B0aW9ucy5taW5pID8gXCIgdWktbWluaVwiOiBcIlwiICkgKVxyXG5cdFx0XHRcdC5hcHBlbmQoIG9uLCBvZmYgKTtcclxuXHJcblx0XHRcdGVsZW1lbnRcclxuXHRcdFx0XHQuYWRkQ2xhc3MoIFwidWktZmxpcHN3aXRjaC1pbnB1dFwiIClcclxuXHRcdFx0XHQuYWZ0ZXIoIGZsaXBzd2l0Y2ggKVxyXG5cdFx0XHRcdC5hcHBlbmRUbyggZmxpcHN3aXRjaCApO1xyXG5cclxuXHRcdCQuZXh0ZW5kKCB0aGlzLCB7XHJcblx0XHRcdGZsaXBzd2l0Y2g6IGZsaXBzd2l0Y2gsXHJcblx0XHRcdG9uOiBvbixcclxuXHRcdFx0b2ZmOiBvZmYsXHJcblx0XHRcdHR5cGU6IHR5cGVcclxuXHRcdH0pO1xyXG5cdH0sXHJcblxyXG5cdF9yZXNldDogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLnJlZnJlc2goKTtcclxuXHR9LFxyXG5cclxuXHRyZWZyZXNoOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBkaXJlY3Rpb24sXHJcblx0XHRcdGV4aXN0aW5nRGlyZWN0aW9uID0gdGhpcy5mbGlwc3dpdGNoLmhhc0NsYXNzKCBcInVpLWZsaXBzd2l0Y2gtYWN0aXZlXCIgKSA/IFwiX3JpZ2h0XCIgOiBcIl9sZWZ0XCI7XHJcblxyXG5cdFx0aWYgKCB0aGlzLnR5cGUgPT09IFwiU0VMRUNUXCIgKSB7XHJcblx0XHRcdGRpcmVjdGlvbiA9ICggdGhpcy5lbGVtZW50LmdldCggMCApLnNlbGVjdGVkSW5kZXggPiAwICkgPyBcIl9yaWdodFwiOiBcIl9sZWZ0XCI7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRkaXJlY3Rpb24gPSB0aGlzLmVsZW1lbnQucHJvcCggXCJjaGVja2VkXCIgKSA/IFwiX3JpZ2h0XCI6IFwiX2xlZnRcIjtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIGRpcmVjdGlvbiAhPT0gZXhpc3RpbmdEaXJlY3Rpb24gKSB7XHJcblx0XHRcdHRoaXNbIGRpcmVjdGlvbiBdKCk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X3RvZ2dsZTogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgZGlyZWN0aW9uID0gdGhpcy5mbGlwc3dpdGNoLmhhc0NsYXNzKCBcInVpLWZsaXBzd2l0Y2gtYWN0aXZlXCIgKSA/IFwiX2xlZnRcIiA6IFwiX3JpZ2h0XCI7XHJcblxyXG5cdFx0dGhpc1sgZGlyZWN0aW9uIF0oKTtcclxuXHR9LFxyXG5cclxuXHRfa2V5ZG93bjogZnVuY3Rpb24oIGUgKSB7XHJcblx0XHRpZiAoIGUud2hpY2ggPT09ICQubW9iaWxlLmtleUNvZGUuTEVGVCApIHtcclxuXHRcdFx0dGhpcy5fbGVmdCgpO1xyXG5cdFx0fSBlbHNlIGlmICggZS53aGljaCA9PT0gJC5tb2JpbGUua2V5Q29kZS5SSUdIVCApIHtcclxuXHRcdFx0dGhpcy5fcmlnaHQoKTtcclxuXHRcdH0gZWxzZSBpZiAoIGUud2hpY2ggPT09ICQubW9iaWxlLmtleUNvZGUuU1BBQ0UgKSB7XHJcblx0XHRcdHRoaXMuX3RvZ2dsZSgpO1xyXG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X3NldE9wdGlvbnM6IGZ1bmN0aW9uKCBvcHRpb25zICkge1xyXG5cdFx0aWYgKCBvcHRpb25zLnRoZW1lICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdHZhciBjdXJyZW50VGhlbWUgPSBvcHRpb25zLnRoZW1lID8gb3B0aW9ucy50aGVtZSA6IFwiaW5oZXJpdFwiLFxyXG5cdFx0XHRcdG5ld1RoZW1lID0gb3B0aW9ucy50aGVtZSA/IG9wdGlvbnMudGhlbWUgOiBcImluaGVyaXRcIjtcclxuXHJcblx0XHRcdHRoaXMud2lkZ2V0KClcclxuXHRcdFx0XHQucmVtb3ZlQ2xhc3MoIFwidWktYmFyLVwiICsgY3VycmVudFRoZW1lIClcclxuXHRcdFx0XHQuYWRkQ2xhc3MoIFwidWktYmFyLVwiICsgbmV3VGhlbWUgKTtcclxuXHRcdH1cclxuXHRcdGlmICggb3B0aW9ucy5vblRleHQgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0dGhpcy5vbi50ZXh0KCBvcHRpb25zLm9uVGV4dCApO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCBvcHRpb25zLm9mZlRleHQgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0dGhpcy5vZmYudGV4dCggb3B0aW9ucy5vZmZUZXh0ICk7XHJcblx0XHR9XHJcblx0XHRpZiAoIG9wdGlvbnMuZGlzYWJsZWQgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0dGhpcy53aWRnZXQoKS50b2dnbGVDbGFzcyggXCJ1aS1zdGF0ZS1kaXNhYmxlZFwiLCBvcHRpb25zLmRpc2FibGVkICk7XHJcblx0XHR9XHJcblx0XHRpZiAoIG9wdGlvbnMubWluaSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHR0aGlzLndpZGdldCgpLnRvZ2dsZUNsYXNzKCBcInVpLW1pbmlcIiwgb3B0aW9ucy5taW5pICk7XHJcblx0XHR9XHJcblx0XHRpZiAoIG9wdGlvbnMuY29ybmVycyAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHR0aGlzLndpZGdldCgpLnRvZ2dsZUNsYXNzKCBcInVpLWNvcm5lci1hbGxcIiwgb3B0aW9ucy5jb3JuZXJzICk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5fc3VwZXIoIG9wdGlvbnMgKTtcclxuXHR9LFxyXG5cclxuXHRfZGVzdHJveTogZnVuY3Rpb24oKSB7XHJcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5lbmhhbmNlZCApIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCB0aGlzLl9vcmlnaW5hbFRhYkluZGV4ICE9IG51bGwgKSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudC5hdHRyKCBcInRhYmluZGV4XCIsIHRoaXMuX29yaWdpbmFsVGFiSW5kZXggKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudC5yZW1vdmVBdHRyKCBcInRhYmluZGV4XCIgKTtcclxuXHRcdH1cclxuXHRcdHRoaXMub24ucmVtb3ZlKCk7XHJcblx0XHR0aGlzLm9mZi5yZW1vdmUoKTtcclxuXHRcdHRoaXMuZWxlbWVudC51bndyYXAoKTtcclxuXHRcdHRoaXMuZmxpcHN3aXRjaC5yZW1vdmUoKTtcclxuXHRcdHRoaXMucmVtb3ZlQ2xhc3MoIFwidWktZmxpcHN3aXRjaC1pbnB1dFwiICk7XHJcblx0fVxyXG5cclxufSwgJC5tb2JpbGUuYmVoYXZpb3JzLmZvcm1SZXNldCApICk7XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHQkLndpZGdldCggXCJtb2JpbGUucmFuZ2VzbGlkZXJcIiwgJC5leHRlbmQoIHtcclxuXHJcblx0XHRvcHRpb25zOiB7XHJcblx0XHRcdHRoZW1lOiBudWxsLFxyXG5cdFx0XHR0cmFja1RoZW1lOiBudWxsLFxyXG5cdFx0XHRjb3JuZXJzOiB0cnVlLFxyXG5cdFx0XHRtaW5pOiBmYWxzZSxcclxuXHRcdFx0aGlnaGxpZ2h0OiB0cnVlXHJcblx0XHR9LFxyXG5cclxuXHRcdF9jcmVhdGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgJGVsID0gdGhpcy5lbGVtZW50LFxyXG5cdFx0XHRlbENsYXNzID0gdGhpcy5vcHRpb25zLm1pbmkgPyBcInVpLXJhbmdlc2xpZGVyIHVpLW1pbmlcIiA6IFwidWktcmFuZ2VzbGlkZXJcIixcclxuXHRcdFx0X2lucHV0Rmlyc3QgPSAkZWwuZmluZCggXCJpbnB1dFwiICkuZmlyc3QoKSxcclxuXHRcdFx0X2lucHV0TGFzdCA9ICRlbC5maW5kKCBcImlucHV0XCIgKS5sYXN0KCksXHJcblx0XHRcdF9sYWJlbCA9ICRlbC5maW5kKCBcImxhYmVsXCIgKS5maXJzdCgpLFxyXG5cdFx0XHRfc2xpZGVyV2lkZ2V0Rmlyc3QgPSAkLmRhdGEoIF9pbnB1dEZpcnN0LmdldCggMCApLCBcIm1vYmlsZS1zbGlkZXJcIiApIHx8XHJcblx0XHRcdFx0JC5kYXRhKCBfaW5wdXRGaXJzdC5zbGlkZXIoKS5nZXQoIDAgKSwgXCJtb2JpbGUtc2xpZGVyXCIgKSxcclxuXHRcdFx0X3NsaWRlcldpZGdldExhc3QgPSAkLmRhdGEoIF9pbnB1dExhc3QuZ2V0KDApLCBcIm1vYmlsZS1zbGlkZXJcIiApIHx8XHJcblx0XHRcdFx0JC5kYXRhKCBfaW5wdXRMYXN0LnNsaWRlcigpLmdldCggMCApLCBcIm1vYmlsZS1zbGlkZXJcIiApLFxyXG5cdFx0XHRfc2xpZGVyRmlyc3QgPSBfc2xpZGVyV2lkZ2V0Rmlyc3Quc2xpZGVyLFxyXG5cdFx0XHRfc2xpZGVyTGFzdCA9IF9zbGlkZXJXaWRnZXRMYXN0LnNsaWRlcixcclxuXHRcdFx0Zmlyc3RIYW5kbGUgPSBfc2xpZGVyV2lkZ2V0Rmlyc3QuaGFuZGxlLFxyXG5cdFx0XHRfc2xpZGVycyA9ICQoIFwiPGRpdiBjbGFzcz0ndWktcmFuZ2VzbGlkZXItc2xpZGVycycgLz5cIiApLmFwcGVuZFRvKCAkZWwgKTtcclxuXHJcblx0XHRcdF9pbnB1dEZpcnN0LmFkZENsYXNzKCBcInVpLXJhbmdlc2xpZGVyLWZpcnN0XCIgKTtcclxuXHRcdFx0X2lucHV0TGFzdC5hZGRDbGFzcyggXCJ1aS1yYW5nZXNsaWRlci1sYXN0XCIgKTtcclxuXHRcdFx0JGVsLmFkZENsYXNzKCBlbENsYXNzICk7XHJcblxyXG5cdFx0XHRfc2xpZGVyRmlyc3QuYXBwZW5kVG8oIF9zbGlkZXJzICk7XHJcblx0XHRcdF9zbGlkZXJMYXN0LmFwcGVuZFRvKCBfc2xpZGVycyApO1xyXG5cdFx0XHRfbGFiZWwuaW5zZXJ0QmVmb3JlKCAkZWwgKTtcclxuXHRcdFx0Zmlyc3RIYW5kbGUucHJlcGVuZFRvKCBfc2xpZGVyTGFzdCApO1xyXG5cclxuXHRcdFx0JC5leHRlbmQoIHRoaXMsIHtcclxuXHRcdFx0XHRfaW5wdXRGaXJzdDogX2lucHV0Rmlyc3QsXHJcblx0XHRcdFx0X2lucHV0TGFzdDogX2lucHV0TGFzdCxcclxuXHRcdFx0XHRfc2xpZGVyRmlyc3Q6IF9zbGlkZXJGaXJzdCxcclxuXHRcdFx0XHRfc2xpZGVyTGFzdDogX3NsaWRlckxhc3QsXHJcblx0XHRcdFx0X2xhYmVsOiBfbGFiZWwsXHJcblx0XHRcdFx0X3RhcmdldFZhbDogbnVsbCxcclxuXHRcdFx0XHRfc2xpZGVyVGFyZ2V0OiBmYWxzZSxcclxuXHRcdFx0XHRfc2xpZGVyczogX3NsaWRlcnMsXHJcblx0XHRcdFx0X3Byb3h5OiBmYWxzZVxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdHRoaXMucmVmcmVzaCgpO1xyXG5cdFx0XHR0aGlzLl9vbiggdGhpcy5lbGVtZW50LmZpbmQoIFwiaW5wdXQudWktc2xpZGVyLWlucHV0XCIgKSwge1xyXG5cdFx0XHRcdFwic2xpZGViZWZvcmVzdGFydFwiOiBcIl9zbGlkZWJlZm9yZXN0YXJ0XCIsXHJcblx0XHRcdFx0XCJzbGlkZXN0b3BcIjogXCJfc2xpZGVzdG9wXCIsXHJcblx0XHRcdFx0XCJzbGlkZWRyYWdcIjogXCJfc2xpZGVkcmFnXCIsXHJcblx0XHRcdFx0XCJzbGlkZWJlZm9yZWNoYW5nZVwiOiBcIl9jaGFuZ2VcIixcclxuXHRcdFx0XHRcImJsdXJcIjogXCJfY2hhbmdlXCIsXHJcblx0XHRcdFx0XCJrZXl1cFwiOiBcIl9jaGFuZ2VcIlxyXG5cdFx0XHR9KTtcclxuXHRcdFx0dGhpcy5fb24oe1xyXG5cdFx0XHRcdFwibW91c2Vkb3duXCI6XCJfY2hhbmdlXCJcclxuXHRcdFx0fSk7XHJcblx0XHRcdHRoaXMuX29uKCB0aGlzLmVsZW1lbnQuY2xvc2VzdCggXCJmb3JtXCIgKSwge1xyXG5cdFx0XHRcdFwicmVzZXRcIjpcIl9oYW5kbGVSZXNldFwiXHJcblx0XHRcdH0pO1xyXG5cdFx0XHR0aGlzLl9vbiggZmlyc3RIYW5kbGUsIHtcclxuXHRcdFx0XHRcInZtb3VzZWRvd25cIjogXCJfZHJhZ0ZpcnN0SGFuZGxlXCJcclxuXHRcdFx0fSk7XHJcblx0XHR9LFxyXG5cdFx0X2hhbmRsZVJlc2V0OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cdFx0XHQvL3dlIG11c3Qgd2FpdCBmb3IgdGhlIHN0YWNrIHRvIHVud2luZCBiZWZvcmUgdXBkYXRlaW5nIG90aGVyIHdpc2Ugc2xpZGVycyB3aWxsIG5vdCBoYXZlIHVwZGF0ZWQgeWV0XHJcblx0XHRcdHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHNlbGYuX3VwZGF0ZUhpZ2hsaWdodCgpO1xyXG5cdFx0XHR9LDApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfZHJhZ0ZpcnN0SGFuZGxlOiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHRcdC8vaWYgdGhlIGZpcnN0IGhhbmRsZSBpcyBkcmFnZ2VkIHNlbmQgdGhlIGV2ZW50IHRvIHRoZSBmaXJzdCBzbGlkZXJcclxuXHRcdFx0JC5kYXRhKCB0aGlzLl9pbnB1dEZpcnN0LmdldCgwKSwgXCJtb2JpbGUtc2xpZGVyXCIgKS5kcmFnZ2luZyA9IHRydWU7XHJcblx0XHRcdCQuZGF0YSggdGhpcy5faW5wdXRGaXJzdC5nZXQoMCksIFwibW9iaWxlLXNsaWRlclwiICkucmVmcmVzaCggZXZlbnQgKTtcclxuXHRcdFx0JC5kYXRhKCB0aGlzLl9pbnB1dEZpcnN0LmdldCgwKSwgXCJtb2JpbGUtc2xpZGVyXCIgKS5fdHJpZ2dlciggXCJzdGFydFwiICk7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X3NsaWRlZHJhZzogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0XHR2YXIgZmlyc3QgPSAkKCBldmVudC50YXJnZXQgKS5pcyggdGhpcy5faW5wdXRGaXJzdCApLFxyXG5cdFx0XHRcdG90aGVyU2xpZGVyID0gKCBmaXJzdCApID8gdGhpcy5faW5wdXRMYXN0IDogdGhpcy5faW5wdXRGaXJzdDtcclxuXHJcblx0XHRcdHRoaXMuX3NsaWRlclRhcmdldCA9IGZhbHNlO1xyXG5cdFx0XHQvL2lmIHRoZSBkcmFnIHdhcyBpbml0aWF0ZWQgb24gYW4gZXh0cmVtZSBhbmQgdGhlIG90aGVyIGhhbmRsZSBpcyBmb2N1c2VkIHNlbmQgdGhlIGV2ZW50cyB0b1xyXG5cdFx0XHQvL3RoZSBjbG9zZXN0IGhhbmRsZVxyXG5cdFx0XHRpZiAoICggdGhpcy5fcHJveHkgPT09IFwiZmlyc3RcIiAmJiBmaXJzdCApIHx8ICggdGhpcy5fcHJveHkgPT09IFwibGFzdFwiICYmICFmaXJzdCApICkge1xyXG5cdFx0XHRcdCQuZGF0YSggb3RoZXJTbGlkZXIuZ2V0KDApLCBcIm1vYmlsZS1zbGlkZXJcIiApLmRyYWdnaW5nID0gdHJ1ZTtcclxuXHRcdFx0XHQkLmRhdGEoIG90aGVyU2xpZGVyLmdldCgwKSwgXCJtb2JpbGUtc2xpZGVyXCIgKS5yZWZyZXNoKCBldmVudCApO1xyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHJcblx0XHRfc2xpZGVzdG9wOiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHRcdHZhciBmaXJzdCA9ICQoIGV2ZW50LnRhcmdldCApLmlzKCB0aGlzLl9pbnB1dEZpcnN0ICk7XHJcblxyXG5cdFx0XHR0aGlzLl9wcm94eSA9IGZhbHNlO1xyXG5cdFx0XHQvL3RoaXMgc3RvcHMgZHJhZ2dpbmcgb2YgdGhlIGhhbmRsZSBhbmQgYnJpbmdzIHRoZSBhY3RpdmUgdHJhY2sgdG8gdGhlIGZyb250XHJcblx0XHRcdC8vdGhpcyBtYWtlcyBjbGlja3Mgb24gdGhlIHRyYWNrIGdvIHRoZSB0aGUgbGFzdCBoYW5kbGUgdXNlZFxyXG5cdFx0XHR0aGlzLmVsZW1lbnQuZmluZCggXCJpbnB1dFwiICkudHJpZ2dlciggXCJ2bW91c2V1cFwiICk7XHJcblx0XHRcdHRoaXMuX3NsaWRlckZpcnN0LmNzcyggXCJ6LWluZGV4XCIsIGZpcnN0ID8gMSA6IFwiXCIgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X3NsaWRlYmVmb3Jlc3RhcnQ6IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdFx0dGhpcy5fc2xpZGVyVGFyZ2V0ID0gZmFsc2U7XHJcblx0XHRcdC8vaWYgdGhlIHRyYWNrIGlzIHRoZSB0YXJnZXQgcmVtZW1iZXIgdGhpcyBhbmQgdGhlIG9yaWdpbmFsIHZhbHVlXHJcblx0XHRcdGlmICggJCggZXZlbnQub3JpZ2luYWxFdmVudC50YXJnZXQgKS5oYXNDbGFzcyggXCJ1aS1zbGlkZXItdHJhY2tcIiApICkge1xyXG5cdFx0XHRcdHRoaXMuX3NsaWRlclRhcmdldCA9IHRydWU7XHJcblx0XHRcdFx0dGhpcy5fdGFyZ2V0VmFsID0gJCggZXZlbnQudGFyZ2V0ICkudmFsKCk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblxyXG5cdFx0X3NldE9wdGlvbnM6IGZ1bmN0aW9uKCBvcHRpb25zICkge1xyXG5cdFx0XHRpZiAoIG9wdGlvbnMudGhlbWUgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0XHR0aGlzLl9zZXRUaGVtZSggb3B0aW9ucy50aGVtZSApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoIG9wdGlvbnMudHJhY2tUaGVtZSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRcdHRoaXMuX3NldFRyYWNrVGhlbWUoIG9wdGlvbnMudHJhY2tUaGVtZSApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoIG9wdGlvbnMubWluaSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRcdHRoaXMuX3NldE1pbmkoIG9wdGlvbnMubWluaSApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoIG9wdGlvbnMuaGlnaGxpZ2h0ICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdFx0dGhpcy5fc2V0SGlnaGxpZ2h0KCBvcHRpb25zLmhpZ2hsaWdodCApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoIG9wdGlvbnMuZGlzYWJsZWQgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0XHR0aGlzLl9zZXREaXNhYmxlZCggb3B0aW9ucy5kaXNhYmxlZCApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR0aGlzLl9zdXBlciggb3B0aW9ucyApO1xyXG5cdFx0XHR0aGlzLnJlZnJlc2goKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0cmVmcmVzaDogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciAkZWwgPSB0aGlzLmVsZW1lbnQsXHJcblx0XHRcdFx0byA9IHRoaXMub3B0aW9ucztcclxuXHJcblx0XHRcdGlmICggdGhpcy5faW5wdXRGaXJzdC5pcyggXCI6ZGlzYWJsZWRcIiApIHx8IHRoaXMuX2lucHV0TGFzdC5pcyggXCI6ZGlzYWJsZWRcIiApICkge1xyXG5cdFx0XHRcdHRoaXMub3B0aW9ucy5kaXNhYmxlZCA9IHRydWU7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdCRlbC5maW5kKCBcImlucHV0XCIgKS5zbGlkZXIoe1xyXG5cdFx0XHRcdHRoZW1lOiBvLnRoZW1lLFxyXG5cdFx0XHRcdHRyYWNrVGhlbWU6IG8udHJhY2tUaGVtZSxcclxuXHRcdFx0XHRkaXNhYmxlZDogby5kaXNhYmxlZCxcclxuXHRcdFx0XHRjb3JuZXJzOiBvLmNvcm5lcnMsXHJcblx0XHRcdFx0bWluaTogby5taW5pLFxyXG5cdFx0XHRcdGhpZ2hsaWdodDogby5oaWdobGlnaHRcclxuXHRcdFx0fSkuc2xpZGVyKCBcInJlZnJlc2hcIiApO1xyXG5cdFx0XHR0aGlzLl91cGRhdGVIaWdobGlnaHQoKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X2NoYW5nZTogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0XHRpZiAoIGV2ZW50LnR5cGUgPT09IFwia2V5dXBcIiApIHtcclxuXHRcdFx0XHR0aGlzLl91cGRhdGVIaWdobGlnaHQoKTtcclxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHZhciBzZWxmID0gdGhpcyxcclxuXHRcdFx0XHRtaW4gPSBwYXJzZUZsb2F0KCB0aGlzLl9pbnB1dEZpcnN0LnZhbCgpLCAxMCApLFxyXG5cdFx0XHRcdG1heCA9IHBhcnNlRmxvYXQoIHRoaXMuX2lucHV0TGFzdC52YWwoKSwgMTAgKSxcclxuXHRcdFx0XHRmaXJzdCA9ICQoIGV2ZW50LnRhcmdldCApLmhhc0NsYXNzKCBcInVpLXJhbmdlc2xpZGVyLWZpcnN0XCIgKSxcclxuXHRcdFx0XHR0aGlzU2xpZGVyID0gZmlyc3QgPyB0aGlzLl9pbnB1dEZpcnN0IDogdGhpcy5faW5wdXRMYXN0LFxyXG5cdFx0XHRcdG90aGVyU2xpZGVyID0gZmlyc3QgPyB0aGlzLl9pbnB1dExhc3QgOiB0aGlzLl9pbnB1dEZpcnN0O1xyXG5cclxuXHRcdFx0aWYgKCAoIHRoaXMuX2lucHV0Rmlyc3QudmFsKCkgPiB0aGlzLl9pbnB1dExhc3QudmFsKCkgJiYgZXZlbnQudHlwZSA9PT0gXCJtb3VzZWRvd25cIiAmJiAhJChldmVudC50YXJnZXQpLmhhc0NsYXNzKFwidWktc2xpZGVyLWhhbmRsZVwiKSkgKSB7XHJcblx0XHRcdFx0dGhpc1NsaWRlci5ibHVyKCk7XHJcblx0XHRcdH0gZWxzZSBpZiAoIGV2ZW50LnR5cGUgPT09IFwibW91c2Vkb3duXCIgKSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICggbWluID4gbWF4ICYmICF0aGlzLl9zbGlkZXJUYXJnZXQgKSB7XHJcblx0XHRcdFx0Ly90aGlzIHByZXZlbnRzIG1pbiBmcm9tIGJlaW5nIGdyZWF0ZXIgdGhlbiBtYXhcclxuXHRcdFx0XHR0aGlzU2xpZGVyLnZhbCggZmlyc3QgPyBtYXg6IG1pbiApLnNsaWRlciggXCJyZWZyZXNoXCIgKTtcclxuXHRcdFx0XHR0aGlzLl90cmlnZ2VyKCBcIm5vcm1hbGl6ZVwiICk7XHJcblx0XHRcdH0gZWxzZSBpZiAoIG1pbiA+IG1heCApIHtcclxuXHRcdFx0XHQvL3RoaXMgbWFrZXMgaXQgc28gY2xpY2tzIG9uIHRoZSB0YXJnZXQgb24gZWl0aGVyIGV4dHJlbWUgZ28gdG8gdGhlIGNsb3Nlc3QgaGFuZGxlXHJcblx0XHRcdFx0dGhpc1NsaWRlci52YWwoIHRoaXMuX3RhcmdldFZhbCApLnNsaWRlciggXCJyZWZyZXNoXCIgKTtcclxuXHJcblx0XHRcdFx0Ly9Zb3UgbXVzdCB3YWl0IGZvciB0aGUgc3RhY2sgdG8gdW53aW5kIHNvIGZpcnN0IHNsaWRlciBpcyB1cGRhdGVkIGJlZm9yZSB1cGRhdGluZyBzZWNvbmRcclxuXHRcdFx0XHRzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdG90aGVyU2xpZGVyLnZhbCggZmlyc3QgPyBtaW46IG1heCApLnNsaWRlciggXCJyZWZyZXNoXCIgKTtcclxuXHRcdFx0XHRcdCQuZGF0YSggb3RoZXJTbGlkZXIuZ2V0KDApLCBcIm1vYmlsZS1zbGlkZXJcIiApLmhhbmRsZS5mb2N1cygpO1xyXG5cdFx0XHRcdFx0c2VsZi5fc2xpZGVyRmlyc3QuY3NzKCBcInotaW5kZXhcIiwgZmlyc3QgPyBcIlwiIDogMSApO1xyXG5cdFx0XHRcdFx0c2VsZi5fdHJpZ2dlciggXCJub3JtYWxpemVcIiApO1xyXG5cdFx0XHRcdH0sIDAgKTtcclxuXHRcdFx0XHR0aGlzLl9wcm94eSA9ICggZmlyc3QgKSA/IFwiZmlyc3RcIiA6IFwibGFzdFwiO1xyXG5cdFx0XHR9XHJcblx0XHRcdC8vZml4ZXMgaXNzdWUgd2hlcmUgd2hlbiBib3RoIF9zbGlkZXJzIGFyZSBhdCBtaW4gdGhleSBjYW5ub3QgYmUgYWRqdXN0ZWRcclxuXHRcdFx0aWYgKCBtaW4gPT09IG1heCApIHtcclxuXHRcdFx0XHQkLmRhdGEoIHRoaXNTbGlkZXIuZ2V0KDApLCBcIm1vYmlsZS1zbGlkZXJcIiApLmhhbmRsZS5jc3MoIFwiei1pbmRleFwiLCAxICk7XHJcblx0XHRcdFx0JC5kYXRhKCBvdGhlclNsaWRlci5nZXQoMCksIFwibW9iaWxlLXNsaWRlclwiICkuaGFuZGxlLmNzcyggXCJ6LWluZGV4XCIsIDAgKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQkLmRhdGEoIG90aGVyU2xpZGVyLmdldCgwKSwgXCJtb2JpbGUtc2xpZGVyXCIgKS5oYW5kbGUuY3NzKCBcInotaW5kZXhcIiwgXCJcIiApO1xyXG5cdFx0XHRcdCQuZGF0YSggdGhpc1NsaWRlci5nZXQoMCksIFwibW9iaWxlLXNsaWRlclwiICkuaGFuZGxlLmNzcyggXCJ6LWluZGV4XCIsIFwiXCIgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dGhpcy5fdXBkYXRlSGlnaGxpZ2h0KCk7XHJcblxyXG5cdFx0XHRpZiAoIG1pbiA+PSBtYXggKSB7XHJcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHRcdF91cGRhdGVIaWdobGlnaHQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgbWluID0gcGFyc2VJbnQoICQuZGF0YSggdGhpcy5faW5wdXRGaXJzdC5nZXQoMCksIFwibW9iaWxlLXNsaWRlclwiICkuaGFuZGxlLmdldCgwKS5zdHlsZS5sZWZ0LCAxMCApLFxyXG5cdFx0XHRcdG1heCA9IHBhcnNlSW50KCAkLmRhdGEoIHRoaXMuX2lucHV0TGFzdC5nZXQoMCksIFwibW9iaWxlLXNsaWRlclwiICkuaGFuZGxlLmdldCgwKS5zdHlsZS5sZWZ0LCAxMCApLFxyXG5cdFx0XHRcdHdpZHRoID0gKG1heCAtIG1pbik7XHJcblxyXG5cdFx0XHR0aGlzLmVsZW1lbnQuZmluZCggXCIudWktc2xpZGVyLWJnXCIgKS5jc3Moe1xyXG5cdFx0XHRcdFwibWFyZ2luLWxlZnRcIjogbWluICsgXCIlXCIsXHJcblx0XHRcdFx0XCJ3aWR0aFwiOiB3aWR0aCArIFwiJVwiXHJcblx0XHRcdH0pO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfc2V0VGhlbWU6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcclxuXHRcdFx0dGhpcy5faW5wdXRGaXJzdC5zbGlkZXIoIFwib3B0aW9uXCIsIFwidGhlbWVcIiwgdmFsdWUgKTtcclxuXHRcdFx0dGhpcy5faW5wdXRMYXN0LnNsaWRlciggXCJvcHRpb25cIiwgXCJ0aGVtZVwiLCB2YWx1ZSApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfc2V0VHJhY2tUaGVtZTogZnVuY3Rpb24oIHZhbHVlICkge1xyXG5cdFx0XHR0aGlzLl9pbnB1dEZpcnN0LnNsaWRlciggXCJvcHRpb25cIiwgXCJ0cmFja1RoZW1lXCIsIHZhbHVlICk7XHJcblx0XHRcdHRoaXMuX2lucHV0TGFzdC5zbGlkZXIoIFwib3B0aW9uXCIsIFwidHJhY2tUaGVtZVwiLCB2YWx1ZSApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfc2V0TWluaTogZnVuY3Rpb24oIHZhbHVlICkge1xyXG5cdFx0XHR0aGlzLl9pbnB1dEZpcnN0LnNsaWRlciggXCJvcHRpb25cIiwgXCJtaW5pXCIsIHZhbHVlICk7XHJcblx0XHRcdHRoaXMuX2lucHV0TGFzdC5zbGlkZXIoIFwib3B0aW9uXCIsIFwibWluaVwiLCB2YWx1ZSApO1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQudG9nZ2xlQ2xhc3MoIFwidWktbWluaVwiLCAhIXZhbHVlICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9zZXRIaWdobGlnaHQ6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcclxuXHRcdFx0dGhpcy5faW5wdXRGaXJzdC5zbGlkZXIoIFwib3B0aW9uXCIsIFwiaGlnaGxpZ2h0XCIsIHZhbHVlICk7XHJcblx0XHRcdHRoaXMuX2lucHV0TGFzdC5zbGlkZXIoIFwib3B0aW9uXCIsIFwiaGlnaGxpZ2h0XCIsIHZhbHVlICk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9zZXREaXNhYmxlZDogZnVuY3Rpb24oIHZhbHVlICkge1xyXG5cdFx0XHR0aGlzLl9pbnB1dEZpcnN0LnByb3AoIFwiZGlzYWJsZWRcIiwgdmFsdWUgKTtcclxuXHRcdFx0dGhpcy5faW5wdXRMYXN0LnByb3AoIFwiZGlzYWJsZWRcIiwgdmFsdWUgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X2Rlc3Ryb3k6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR0aGlzLl9sYWJlbC5wcmVwZW5kVG8oIHRoaXMuZWxlbWVudCApO1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3MoIFwidWktcmFuZ2VzbGlkZXIgdWktbWluaVwiICk7XHJcblx0XHRcdHRoaXMuX2lucHV0Rmlyc3QuYWZ0ZXIoIHRoaXMuX3NsaWRlckZpcnN0ICk7XHJcblx0XHRcdHRoaXMuX2lucHV0TGFzdC5hZnRlciggdGhpcy5fc2xpZGVyTGFzdCApO1xyXG5cdFx0XHR0aGlzLl9zbGlkZXJzLnJlbW92ZSgpO1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQuZmluZCggXCJpbnB1dFwiICkucmVtb3ZlQ2xhc3MoIFwidWktcmFuZ2VzbGlkZXItZmlyc3QgdWktcmFuZ2VzbGlkZXItbGFzdFwiICkuc2xpZGVyKCBcImRlc3Ryb3lcIiApO1xyXG5cdFx0fVxyXG5cclxuXHR9LCAkLm1vYmlsZS5iZWhhdmlvcnMuZm9ybVJlc2V0ICkgKTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxuXHQkLndpZGdldCggXCJtb2JpbGUudGV4dGlucHV0XCIsICQubW9iaWxlLnRleHRpbnB1dCwge1xyXG5cdFx0b3B0aW9uczoge1xyXG5cdFx0XHRjbGVhckJ0bjogZmFsc2UsXHJcblx0XHRcdGNsZWFyQnRuVGV4dDogXCJDbGVhciB0ZXh0XCJcclxuXHRcdH0sXHJcblxyXG5cdFx0X2NyZWF0ZTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHRoaXMuX3N1cGVyKCk7XHJcblxyXG5cdFx0XHRpZiAoIHRoaXMuaXNTZWFyY2ggKSB7XHJcblx0XHRcdFx0dGhpcy5vcHRpb25zLmNsZWFyQnRuID0gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKCAhIXRoaXMub3B0aW9ucy5jbGVhckJ0biAmJiB0aGlzLmlucHV0TmVlZHNXcmFwICkge1xyXG5cdFx0XHRcdHRoaXMuX2FkZENsZWFyQnRuKCk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblxyXG5cdFx0Y2xlYXJCdXR0b246IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRyZXR1cm4gJCggXCI8YSBocmVmPScjJyB0YWJpbmRleD0nLTEnIGFyaWEtaGlkZGVuPSd0cnVlJyBcIiArXHJcblx0XHRcdFx0XCJjbGFzcz0ndWktaW5wdXQtY2xlYXIgdWktYnRuIHVpLWljb24tZGVsZXRlIHVpLWJ0bi1pY29uLW5vdGV4dCB1aS1jb3JuZXItYWxsJz5cIiArXHJcblx0XHRcdFx0XCI8L2E+XCIgKVxyXG5cdFx0XHRcdFx0LmF0dHIoIFwidGl0bGVcIiwgdGhpcy5vcHRpb25zLmNsZWFyQnRuVGV4dCApXHJcblx0XHRcdFx0XHQudGV4dCggdGhpcy5vcHRpb25zLmNsZWFyQnRuVGV4dCApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfY2xlYXJCdG5DbGljazogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQudmFsKCBcIlwiIClcclxuXHRcdFx0XHRcdC5mb2N1cygpXHJcblx0XHRcdFx0XHQudHJpZ2dlciggXCJjaGFuZ2VcIiApO1xyXG5cclxuXHRcdFx0dGhpcy5fY2xlYXJCdG4uYWRkQ2xhc3MoIFwidWktaW5wdXQtY2xlYXItaGlkZGVuXCIgKTtcclxuXHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X2FkZENsZWFyQnRuOiBmdW5jdGlvbigpIHtcclxuXHJcblx0XHRcdGlmICggIXRoaXMub3B0aW9ucy5lbmhhbmNlZCApIHtcclxuXHRcdFx0XHR0aGlzLl9lbmhhbmNlQ2xlYXIoKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0JC5leHRlbmQoIHRoaXMsIHtcclxuXHRcdFx0XHRfY2xlYXJCdG46IHRoaXMud2lkZ2V0KCkuZmluZChcImEudWktaW5wdXQtY2xlYXJcIilcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHR0aGlzLl9iaW5kQ2xlYXJFdmVudHMoKTtcclxuXHJcblx0XHRcdHRoaXMuX3RvZ2dsZUNsZWFyKCk7XHJcblxyXG5cdFx0fSxcclxuXHJcblx0XHRfZW5oYW5jZUNsZWFyOiBmdW5jdGlvbigpIHtcclxuXHJcblx0XHRcdHRoaXMuY2xlYXJCdXR0b24oKS5hcHBlbmRUbyggdGhpcy53aWRnZXQoKSApO1xyXG5cdFx0XHR0aGlzLndpZGdldCgpLmFkZENsYXNzKCBcInVpLWlucHV0LWhhcy1jbGVhclwiICk7XHJcblxyXG5cdFx0fSxcclxuXHJcblx0XHRfYmluZENsZWFyRXZlbnRzOiBmdW5jdGlvbigpIHtcclxuXHJcblx0XHRcdHRoaXMuX29uKCB0aGlzLl9jbGVhckJ0biwge1xyXG5cdFx0XHRcdFwiY2xpY2tcIjogXCJfY2xlYXJCdG5DbGlja1wiXHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0dGhpcy5fb24oe1xyXG5cdFx0XHRcdFwia2V5dXBcIjogXCJfdG9nZ2xlQ2xlYXJcIixcclxuXHRcdFx0XHRcImNoYW5nZVwiOiBcIl90b2dnbGVDbGVhclwiLFxyXG5cdFx0XHRcdFwiaW5wdXRcIjogXCJfdG9nZ2xlQ2xlYXJcIixcclxuXHRcdFx0XHRcImZvY3VzXCI6IFwiX3RvZ2dsZUNsZWFyXCIsXHJcblx0XHRcdFx0XCJibHVyXCI6IFwiX3RvZ2dsZUNsZWFyXCIsXHJcblx0XHRcdFx0XCJjdXRcIjogXCJfdG9nZ2xlQ2xlYXJcIixcclxuXHRcdFx0XHRcInBhc3RlXCI6IFwiX3RvZ2dsZUNsZWFyXCJcclxuXHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdH0sXHJcblxyXG5cdFx0X3VuYmluZENsZWFyOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dGhpcy5fb2ZmKCB0aGlzLl9jbGVhckJ0biwgXCJjbGlja1wiKTtcclxuXHRcdFx0dGhpcy5fb2ZmKCB0aGlzLmVsZW1lbnQsIFwia2V5dXAgY2hhbmdlIGlucHV0IGZvY3VzIGJsdXIgY3V0IHBhc3RlXCIgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X3NldE9wdGlvbnM6IGZ1bmN0aW9uKCBvcHRpb25zICkge1xyXG5cdFx0XHR0aGlzLl9zdXBlciggb3B0aW9ucyApO1xyXG5cclxuXHRcdFx0aWYgKCBvcHRpb25zLmNsZWFyQnRuICE9PSB1bmRlZmluZWQgJiZcclxuXHRcdFx0XHQhdGhpcy5lbGVtZW50LmlzKCBcInRleHRhcmVhLCA6anFtRGF0YSh0eXBlPSdyYW5nZScpXCIgKSApIHtcclxuXHRcdFx0XHRpZiAoIG9wdGlvbnMuY2xlYXJCdG4gKSB7XHJcblx0XHRcdFx0XHR0aGlzLl9hZGRDbGVhckJ0bigpO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHR0aGlzLl9kZXN0cm95Q2xlYXIoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICggb3B0aW9ucy5jbGVhckJ0blRleHQgIT09IHVuZGVmaW5lZCAmJiB0aGlzLl9jbGVhckJ0biAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRcdHRoaXMuX2NsZWFyQnRuLnRleHQoIG9wdGlvbnMuY2xlYXJCdG5UZXh0IClcclxuXHRcdFx0XHRcdC5hdHRyKFwidGl0bGVcIiwgb3B0aW9ucy5jbGVhckJ0blRleHQpO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHRcdF90b2dnbGVDbGVhcjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHRoaXMuX2RlbGF5KCBcIl90b2dnbGVDbGVhckNsYXNzXCIsIDAgKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X3RvZ2dsZUNsZWFyQ2xhc3M6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR0aGlzLl9jbGVhckJ0bi50b2dnbGVDbGFzcyggXCJ1aS1pbnB1dC1jbGVhci1oaWRkZW5cIiwgIXRoaXMuZWxlbWVudC52YWwoKSApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfZGVzdHJveUNsZWFyOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dGhpcy53aWRnZXQoKS5yZW1vdmVDbGFzcyggXCJ1aS1pbnB1dC1oYXMtY2xlYXJcIiApO1xyXG5cdFx0XHR0aGlzLl91bmJpbmRDbGVhcigpO1xyXG5cdFx0XHR0aGlzLl9jbGVhckJ0bi5yZW1vdmUoKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X2Rlc3Ryb3k6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR0aGlzLl9zdXBlcigpO1xyXG5cdFx0XHRpZiAoIHRoaXMub3B0aW9ucy5jbGVhckJ0biApIHtcclxuXHRcdFx0XHR0aGlzLl9kZXN0cm95Q2xlYXIoKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHR9KTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxuXHQkLndpZGdldCggXCJtb2JpbGUudGV4dGlucHV0XCIsICQubW9iaWxlLnRleHRpbnB1dCwge1xyXG5cdFx0b3B0aW9uczoge1xyXG5cdFx0XHRhdXRvZ3Jvdzp0cnVlLFxyXG5cdFx0XHRrZXl1cFRpbWVvdXRCdWZmZXI6IDEwMFxyXG5cdFx0fSxcclxuXHJcblx0XHRfY3JlYXRlOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dGhpcy5fc3VwZXIoKTtcclxuXHJcblx0XHRcdGlmICggdGhpcy5vcHRpb25zLmF1dG9ncm93ICYmIHRoaXMuaXNUZXh0YXJlYSApIHtcclxuXHRcdFx0XHR0aGlzLl9hdXRvZ3JvdygpO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHRcdF9hdXRvZ3JvdzogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudC5hZGRDbGFzcyggXCJ1aS10ZXh0aW5wdXQtYXV0b2dyb3dcIiApO1xyXG5cclxuXHRcdFx0dGhpcy5fb24oe1xyXG5cdFx0XHRcdFwia2V5dXBcIjogXCJfdGltZW91dFwiLFxyXG5cdFx0XHRcdFwiY2hhbmdlXCI6IFwiX3RpbWVvdXRcIixcclxuXHRcdFx0XHRcImlucHV0XCI6IFwiX3RpbWVvdXRcIixcclxuXHRcdFx0XHRcInBhc3RlXCI6IFwiX3RpbWVvdXRcIlxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdC8vIEF0dGFjaCB0byB0aGUgdmFyaW91cyB5b3UtaGF2ZS1iZWNvbWUtdmlzaWJsZSBub3RpZmljYXRpb25zIHRoYXQgdGhlXHJcblx0XHRcdC8vIHZhcmlvdXMgZnJhbWV3b3JrIGVsZW1lbnRzIGVtaXQuXHJcblx0XHRcdC8vIFRPRE86IFJlbW92ZSBhbGwgYnV0IHRoZSB1cGRhdGVsYXlvdXQgaGFuZGxlciBvbmNlICM2NDI2IGlzIGZpeGVkLlxyXG5cdFx0XHR0aGlzLl9vbiggdHJ1ZSwgdGhpcy5kb2N1bWVudCwge1xyXG5cclxuXHRcdFx0XHQvLyBUT0RPOiBNb3ZlIHRvIG5vbi1kZXByZWNhdGVkIGV2ZW50XHJcblx0XHRcdFx0XCJwYWdlc2hvd1wiOiBcIl9oYW5kbGVTaG93XCIsXHJcblx0XHRcdFx0XCJwb3B1cGJlZm9yZXBvc2l0aW9uXCI6IFwiX2hhbmRsZVNob3dcIixcclxuXHRcdFx0XHRcInVwZGF0ZWxheW91dFwiOiBcIl9oYW5kbGVTaG93XCIsXHJcblx0XHRcdFx0XCJwYW5lbG9wZW5cIjogXCJfaGFuZGxlU2hvd1wiXHJcblx0XHRcdH0pO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvLyBTeW5jaHJvbm91c2x5IGZpeCB0aGUgd2lkZ2V0IGhlaWdodCBpZiB0aGlzIHdpZGdldCdzIHBhcmVudHMgYXJlIHN1Y2hcclxuXHRcdC8vIHRoYXQgdGhleSBzaG93L2hpZGUgY29udGVudCBhdCBydW50aW1lLiBXZSBzdGlsbCBuZWVkIHRvIGNoZWNrIHdoZXRoZXJcclxuXHRcdC8vIHRoZSB3aWRnZXQgaXMgYWN0dWFsbHkgdmlzaWJsZSBpbiBjYXNlIGl0IGlzIGNvbnRhaW5lZCBpbnNpZGUgbXVsdGlwbGVcclxuXHRcdC8vIHN1Y2ggY29udGFpbmVycy4gRm9yIGV4YW1wbGU6IHBhbmVsIGNvbnRhaW5zIGNvbGxhcHNpYmxlIGNvbnRhaW5zXHJcblx0XHQvLyBhdXRvZ3JvdyB0ZXh0aW5wdXQuIFRoZSBwYW5lbCBtYXkgZW1pdCBcInBhbmVsb3BlblwiIGluZGljYXRpbmcgdGhhdCBpdHNcclxuXHRcdC8vIGNvbnRlbnQgaGFzIGJlY29tZSB2aXNpYmxlLCBidXQgdGhlIGNvbGxhcHNpYmxlIGlzIHN0aWxsIGNvbGxhcHNlZCwgc29cclxuXHRcdC8vIHRoZSBhdXRvZ3JvdyB0ZXh0YXJlYSBpcyBzdGlsbCBub3QgdmlzaWJsZS5cclxuXHRcdF9oYW5kbGVTaG93OiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHRcdGlmICggJC5jb250YWlucyggZXZlbnQudGFyZ2V0LCB0aGlzLmVsZW1lbnRbIDAgXSApICYmXHJcblx0XHRcdFx0dGhpcy5lbGVtZW50LmlzKCBcIjp2aXNpYmxlXCIgKSApIHtcclxuXHJcblx0XHRcdFx0aWYgKCBldmVudC50eXBlICE9PSBcInBvcHVwYmVmb3JlcG9zaXRpb25cIiApIHtcclxuXHRcdFx0XHRcdHRoaXMuZWxlbWVudFxyXG5cdFx0XHRcdFx0XHQuYWRkQ2xhc3MoIFwidWktdGV4dGlucHV0LWF1dG9ncm93LXJlc2l6ZVwiIClcclxuXHRcdFx0XHRcdFx0LmFuaW1hdGlvbkNvbXBsZXRlKFxyXG5cdFx0XHRcdFx0XHRcdCQucHJveHkoIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKCBcInVpLXRleHRpbnB1dC1hdXRvZ3Jvdy1yZXNpemVcIiApO1xyXG5cdFx0XHRcdFx0XHRcdH0sIHRoaXMgKSxcclxuXHRcdFx0XHRcdFx0XCJ0cmFuc2l0aW9uXCIgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0dGhpcy5fcHJlcGFyZUhlaWdodFVwZGF0ZSgpO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHRcdF91bmJpbmRBdXRvZ3JvdzogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudC5yZW1vdmVDbGFzcyggXCJ1aS10ZXh0aW5wdXQtYXV0b2dyb3dcIiApO1xyXG5cdFx0XHR0aGlzLl9vZmYoIHRoaXMuZWxlbWVudCwgXCJrZXl1cCBjaGFuZ2UgaW5wdXQgcGFzdGVcIiApO1xyXG5cdFx0XHR0aGlzLl9vZmYoIHRoaXMuZG9jdW1lbnQsXHJcblx0XHRcdFx0XCJwYWdlc2hvdyBwb3B1cGJlZm9yZXBvc2l0aW9uIHVwZGF0ZWxheW91dCBwYW5lbG9wZW5cIiApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRrZXl1cFRpbWVvdXQ6IG51bGwsXHJcblxyXG5cdFx0X3ByZXBhcmVIZWlnaHRVcGRhdGU6IGZ1bmN0aW9uKCBkZWxheSApIHtcclxuXHRcdFx0aWYgKCB0aGlzLmtleXVwVGltZW91dCApIHtcclxuXHRcdFx0XHRjbGVhclRpbWVvdXQoIHRoaXMua2V5dXBUaW1lb3V0ICk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKCBkZWxheSA9PT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRcdHRoaXMuX3VwZGF0ZUhlaWdodCgpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHRoaXMua2V5dXBUaW1lb3V0ID0gdGhpcy5fZGVsYXkoIFwiX3VwZGF0ZUhlaWdodFwiLCBkZWxheSApO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHRcdF90aW1lb3V0OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dGhpcy5fcHJlcGFyZUhlaWdodFVwZGF0ZSggdGhpcy5vcHRpb25zLmtleXVwVGltZW91dEJ1ZmZlciApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfdXBkYXRlSGVpZ2h0OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIHBhZGRpbmdUb3AsIHBhZGRpbmdCb3R0b20sIHBhZGRpbmdIZWlnaHQsIHNjcm9sbEhlaWdodCwgY2xpZW50SGVpZ2h0LFxyXG5cdFx0XHRcdGJvcmRlclRvcCwgYm9yZGVyQm90dG9tLCBib3JkZXJIZWlnaHQsIGhlaWdodCxcclxuXHRcdFx0XHRzY3JvbGxUb3AgPSB0aGlzLndpbmRvdy5zY3JvbGxUb3AoKTtcclxuXHRcdFx0dGhpcy5rZXl1cFRpbWVvdXQgPSAwO1xyXG5cclxuXHRcdFx0Ly8gSUU4IHRleHRhcmVhcyBoYXZlIHRoZSBvbnBhZ2UgcHJvcGVydHkgLSBvdGhlcnMgZG8gbm90XHJcblx0XHRcdGlmICggISggXCJvbnBhZ2VcIiBpbiB0aGlzLmVsZW1lbnRbIDAgXSApICkge1xyXG5cdFx0XHRcdHRoaXMuZWxlbWVudC5jc3Moe1xyXG5cdFx0XHRcdFx0XCJoZWlnaHRcIjogMCxcclxuXHRcdFx0XHRcdFwibWluLWhlaWdodFwiOiAwLFxyXG5cdFx0XHRcdFx0XCJtYXgtaGVpZ2h0XCI6IDBcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0c2Nyb2xsSGVpZ2h0ID0gdGhpcy5lbGVtZW50WyAwIF0uc2Nyb2xsSGVpZ2h0O1xyXG5cdFx0XHRjbGllbnRIZWlnaHQgPSB0aGlzLmVsZW1lbnRbIDAgXS5jbGllbnRIZWlnaHQ7XHJcblx0XHRcdGJvcmRlclRvcCA9IHBhcnNlRmxvYXQoIHRoaXMuZWxlbWVudC5jc3MoIFwiYm9yZGVyLXRvcC13aWR0aFwiICkgKTtcclxuXHRcdFx0Ym9yZGVyQm90dG9tID0gcGFyc2VGbG9hdCggdGhpcy5lbGVtZW50LmNzcyggXCJib3JkZXItYm90dG9tLXdpZHRoXCIgKSApO1xyXG5cdFx0XHRib3JkZXJIZWlnaHQgPSBib3JkZXJUb3AgKyBib3JkZXJCb3R0b207XHJcblx0XHRcdGhlaWdodCA9IHNjcm9sbEhlaWdodCArIGJvcmRlckhlaWdodCArIDE1O1xyXG5cclxuXHRcdFx0Ly8gSXNzdWUgNjE3OTogUGFkZGluZyBpcyBub3QgaW5jbHVkZWQgaW4gc2Nyb2xsSGVpZ2h0IGFuZFxyXG5cdFx0XHQvLyBjbGllbnRIZWlnaHQgYnkgRmlyZWZveCBpZiBubyBzY3JvbGxiYXIgaXMgdmlzaWJsZS4gQmVjYXVzZVxyXG5cdFx0XHQvLyB0ZXh0YXJlYXMgdXNlIHRoZSBib3JkZXItYm94IGJveC1zaXppbmcgbW9kZWwsIHBhZGRpbmcgc2hvdWxkIGJlXHJcblx0XHRcdC8vIGluY2x1ZGVkIGluIHRoZSBuZXcgKGFzc2lnbmVkKSBoZWlnaHQuIEJlY2F1c2UgdGhlIGhlaWdodCBpcyBzZXRcclxuXHRcdFx0Ly8gdG8gMCwgY2xpZW50SGVpZ2h0ID09IDAgaW4gRmlyZWZveC4gVGhlcmVmb3JlLCB3ZSBjYW4gdXNlIHRoaXMgdG9cclxuXHRcdFx0Ly8gY2hlY2sgaWYgcGFkZGluZyBtdXN0IGJlIGFkZGVkLlxyXG5cdFx0XHRpZiAoIGNsaWVudEhlaWdodCA9PT0gMCApIHtcclxuXHRcdFx0XHRwYWRkaW5nVG9wID0gcGFyc2VGbG9hdCggdGhpcy5lbGVtZW50LmNzcyggXCJwYWRkaW5nLXRvcFwiICkgKTtcclxuXHRcdFx0XHRwYWRkaW5nQm90dG9tID0gcGFyc2VGbG9hdCggdGhpcy5lbGVtZW50LmNzcyggXCJwYWRkaW5nLWJvdHRvbVwiICkgKTtcclxuXHRcdFx0XHRwYWRkaW5nSGVpZ2h0ID0gcGFkZGluZ1RvcCArIHBhZGRpbmdCb3R0b207XHJcblxyXG5cdFx0XHRcdGhlaWdodCArPSBwYWRkaW5nSGVpZ2h0O1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR0aGlzLmVsZW1lbnQuY3NzKHtcclxuXHRcdFx0XHRcImhlaWdodFwiOiBoZWlnaHQsXHJcblx0XHRcdFx0XCJtaW4taGVpZ2h0XCI6IFwiXCIsXHJcblx0XHRcdFx0XCJtYXgtaGVpZ2h0XCI6IFwiXCJcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHR0aGlzLndpbmRvdy5zY3JvbGxUb3AoIHNjcm9sbFRvcCApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRyZWZyZXNoOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0aWYgKCB0aGlzLm9wdGlvbnMuYXV0b2dyb3cgJiYgdGhpcy5pc1RleHRhcmVhICkge1xyXG5cdFx0XHRcdHRoaXMuX3VwZGF0ZUhlaWdodCgpO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHRcdF9zZXRPcHRpb25zOiBmdW5jdGlvbiggb3B0aW9ucyApIHtcclxuXHJcblx0XHRcdHRoaXMuX3N1cGVyKCBvcHRpb25zICk7XHJcblxyXG5cdFx0XHRpZiAoIG9wdGlvbnMuYXV0b2dyb3cgIT09IHVuZGVmaW5lZCAmJiB0aGlzLmlzVGV4dGFyZWEgKSB7XHJcblx0XHRcdFx0aWYgKCBvcHRpb25zLmF1dG9ncm93ICkge1xyXG5cdFx0XHRcdFx0dGhpcy5fYXV0b2dyb3coKTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0dGhpcy5fdW5iaW5kQXV0b2dyb3coKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0fSk7XHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxuJC53aWRnZXQoIFwibW9iaWxlLnNlbGVjdG1lbnVcIiwgJC5leHRlbmQoIHtcclxuXHRpbml0U2VsZWN0b3I6IFwic2VsZWN0Om5vdCggOmpxbURhdGEocm9sZT0nc2xpZGVyJykpOm5vdCggOmpxbURhdGEocm9sZT0nZmxpcHN3aXRjaCcpIClcIixcclxuXHJcblx0b3B0aW9uczoge1xyXG5cdFx0dGhlbWU6IG51bGwsXHJcblx0XHRpY29uOiBcImNhcmF0LWRcIixcclxuXHRcdGljb25wb3M6IFwicmlnaHRcIixcclxuXHRcdGlubGluZTogZmFsc2UsXHJcblx0XHRjb3JuZXJzOiB0cnVlLFxyXG5cdFx0c2hhZG93OiB0cnVlLFxyXG5cdFx0aWNvbnNoYWRvdzogZmFsc2UsIC8qIFRPRE86IERlcHJlY2F0ZWQgaW4gMS40LCByZW1vdmUgaW4gMS41LiAqL1xyXG5cdFx0b3ZlcmxheVRoZW1lOiBudWxsLFxyXG5cdFx0ZGl2aWRlclRoZW1lOiBudWxsLFxyXG5cdFx0aGlkZVBsYWNlaG9sZGVyTWVudUl0ZW1zOiB0cnVlLFxyXG5cdFx0Y2xvc2VUZXh0OiBcIkNsb3NlXCIsXHJcblx0XHRuYXRpdmVNZW51OiB0cnVlLFxyXG5cdFx0Ly8gVGhpcyBvcHRpb24gZGVmYXVsdHMgdG8gdHJ1ZSBvbiBpT1MgZGV2aWNlcy5cclxuXHRcdHByZXZlbnRGb2N1c1pvb206IC9pUGhvbmV8aVBhZHxpUG9kLy50ZXN0KCBuYXZpZ2F0b3IucGxhdGZvcm0gKSAmJiBuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoIFwiQXBwbGVXZWJLaXRcIiApID4gLTEsXHJcblx0XHRtaW5pOiBmYWxzZVxyXG5cdH0sXHJcblxyXG5cdF9idXR0b246IGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuICQoIFwiPGRpdi8+XCIgKTtcclxuXHR9LFxyXG5cclxuXHRfc2V0RGlzYWJsZWQ6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcclxuXHRcdHRoaXMuZWxlbWVudC5hdHRyKCBcImRpc2FibGVkXCIsIHZhbHVlICk7XHJcblx0XHR0aGlzLmJ1dHRvbi5hdHRyKCBcImFyaWEtZGlzYWJsZWRcIiwgdmFsdWUgKTtcclxuXHRcdHJldHVybiB0aGlzLl9zZXRPcHRpb24oIFwiZGlzYWJsZWRcIiwgdmFsdWUgKTtcclxuXHR9LFxyXG5cclxuXHRfZm9jdXNCdXR0b24gOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBzZWxmID0gdGhpcztcclxuXHJcblx0XHRzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcclxuXHRcdFx0c2VsZi5idXR0b24uZm9jdXMoKTtcclxuXHRcdH0sIDQwKTtcclxuXHR9LFxyXG5cclxuXHRfc2VsZWN0T3B0aW9uczogZnVuY3Rpb24oKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5zZWxlY3QuZmluZCggXCJvcHRpb25cIiApO1xyXG5cdH0sXHJcblxyXG5cdC8vIHNldHVwIGl0ZW1zIHRoYXQgYXJlIGdlbmVyYWxseSBuZWNlc3NhcnkgZm9yIHNlbGVjdCBtZW51IGV4dGVuc2lvblxyXG5cdF9wcmVFeHRlbnNpb246IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGlubGluZSA9IHRoaXMub3B0aW9ucy5pbmxpbmUgfHwgdGhpcy5lbGVtZW50LmpxbURhdGEoIFwiaW5saW5lXCIgKSxcclxuXHRcdFx0bWluaSA9IHRoaXMub3B0aW9ucy5taW5pIHx8IHRoaXMuZWxlbWVudC5qcW1EYXRhKCBcIm1pbmlcIiApLFxyXG5cdFx0XHRjbGFzc2VzID0gXCJcIjtcclxuXHRcdC8vIFRPRE86IFBvc3QgMS4xLS1vbmNlIHdlIGhhdmUgdGltZSB0byB0ZXN0IHRob3JvdWdobHktLWFueSBjbGFzc2VzIG1hbnVhbGx5IGFwcGxpZWQgdG8gdGhlIG9yaWdpbmFsIGVsZW1lbnQgc2hvdWxkIGJlIGNhcnJpZWQgb3ZlciB0byB0aGUgZW5oYW5jZWQgZWxlbWVudCwgd2l0aCBhbiBgLWVuaGFuY2VkYCBzdWZmaXguIFNlZSBodHRwczovL2dpdGh1Yi5jb20vanF1ZXJ5L2pxdWVyeS1tb2JpbGUvaXNzdWVzLzM1NzdcclxuXHRcdC8qIGlmICggJGVsWzBdLmNsYXNzTmFtZS5sZW5ndGggKSB7XHJcblx0XHRcdGNsYXNzZXMgPSAkZWxbMF0uY2xhc3NOYW1lO1xyXG5cdFx0fSAqL1xyXG5cdFx0aWYgKCAhIX50aGlzLmVsZW1lbnRbMF0uY2xhc3NOYW1lLmluZGV4T2YoIFwidWktYnRuLWxlZnRcIiApICkge1xyXG5cdFx0XHRjbGFzc2VzID0gXCIgdWktYnRuLWxlZnRcIjtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoICAhIX50aGlzLmVsZW1lbnRbMF0uY2xhc3NOYW1lLmluZGV4T2YoIFwidWktYnRuLXJpZ2h0XCIgKSApIHtcclxuXHRcdFx0Y2xhc3NlcyA9IFwiIHVpLWJ0bi1yaWdodFwiO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggaW5saW5lICkge1xyXG5cdFx0XHRjbGFzc2VzICs9IFwiIHVpLWJ0bi1pbmxpbmVcIjtcclxuXHRcdH1cclxuXHRcdGlmICggbWluaSApIHtcclxuXHRcdFx0Y2xhc3NlcyArPSBcIiB1aS1taW5pXCI7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5zZWxlY3QgPSB0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3MoIFwidWktYnRuLWxlZnQgdWktYnRuLXJpZ2h0XCIgKS53cmFwKCBcIjxkaXYgY2xhc3M9J3VpLXNlbGVjdFwiICsgY2xhc3NlcyArIFwiJz5cIiApO1xyXG5cdFx0dGhpcy5zZWxlY3RJZCAgPSB0aGlzLnNlbGVjdC5hdHRyKCBcImlkXCIgKSB8fCAoIFwic2VsZWN0LVwiICsgdGhpcy51dWlkICk7XHJcblx0XHR0aGlzLmJ1dHRvbklkID0gdGhpcy5zZWxlY3RJZCArIFwiLWJ1dHRvblwiO1xyXG5cdFx0dGhpcy5sYWJlbCA9ICQoIFwibGFiZWxbZm9yPSdcIisgdGhpcy5zZWxlY3RJZCArXCInXVwiICk7XHJcblx0XHR0aGlzLmlzTXVsdGlwbGUgPSB0aGlzLnNlbGVjdFsgMCBdLm11bHRpcGxlO1xyXG5cdH0sXHJcblxyXG5cdF9kZXN0cm95OiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciB3cmFwcGVyID0gdGhpcy5lbGVtZW50LnBhcmVudHMoIFwiLnVpLXNlbGVjdFwiICk7XHJcblx0XHRpZiAoIHdyYXBwZXIubGVuZ3RoID4gMCApIHtcclxuXHRcdFx0aWYgKCB3cmFwcGVyLmlzKCBcIi51aS1idG4tbGVmdCwgLnVpLWJ0bi1yaWdodFwiICkgKSB7XHJcblx0XHRcdFx0dGhpcy5lbGVtZW50LmFkZENsYXNzKCB3cmFwcGVyLmhhc0NsYXNzKCBcInVpLWJ0bi1sZWZ0XCIgKSA/IFwidWktYnRuLWxlZnRcIiA6IFwidWktYnRuLXJpZ2h0XCIgKTtcclxuXHRcdFx0fVxyXG5cdFx0XHR0aGlzLmVsZW1lbnQuaW5zZXJ0QWZ0ZXIoIHdyYXBwZXIgKTtcclxuXHRcdFx0d3JhcHBlci5yZW1vdmUoKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfY3JlYXRlOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX3ByZUV4dGVuc2lvbigpO1xyXG5cclxuXHRcdHRoaXMuYnV0dG9uID0gdGhpcy5fYnV0dG9uKCk7XHJcblxyXG5cdFx0dmFyIHNlbGYgPSB0aGlzLFxyXG5cclxuXHRcdFx0b3B0aW9ucyA9IHRoaXMub3B0aW9ucyxcclxuXHJcblx0XHRcdGljb25wb3MgPSBvcHRpb25zLmljb24gPyAoIG9wdGlvbnMuaWNvbnBvcyB8fCB0aGlzLnNlbGVjdC5qcW1EYXRhKCBcImljb25wb3NcIiApICkgOiBmYWxzZSxcclxuXHJcblx0XHRcdGJ1dHRvbiA9IHRoaXMuYnV0dG9uXHJcblx0XHRcdFx0Lmluc2VydEJlZm9yZSggdGhpcy5zZWxlY3QgKVxyXG5cdFx0XHRcdC5hdHRyKCBcImlkXCIsIHRoaXMuYnV0dG9uSWQgKVxyXG5cdFx0XHRcdC5hZGRDbGFzcyggXCJ1aS1idG5cIiArXHJcblx0XHRcdFx0XHQoIG9wdGlvbnMuaWNvbiA/ICggXCIgdWktaWNvbi1cIiArIG9wdGlvbnMuaWNvbiArIFwiIHVpLWJ0bi1pY29uLVwiICsgaWNvbnBvcyArXHJcblx0XHRcdFx0XHQoIG9wdGlvbnMuaWNvbnNoYWRvdyA/IFwiIHVpLXNoYWRvdy1pY29uXCIgOiBcIlwiICkgKSA6XHRcIlwiICkgKyAvKiBUT0RPOiBSZW1vdmUgaW4gMS41LiAqL1xyXG5cdFx0XHRcdFx0KCBvcHRpb25zLnRoZW1lID8gXCIgdWktYnRuLVwiICsgb3B0aW9ucy50aGVtZSA6IFwiXCIgKSArXHJcblx0XHRcdFx0XHQoIG9wdGlvbnMuY29ybmVycyA/IFwiIHVpLWNvcm5lci1hbGxcIiA6IFwiXCIgKSArXHJcblx0XHRcdFx0XHQoIG9wdGlvbnMuc2hhZG93ID8gXCIgdWktc2hhZG93XCIgOiBcIlwiICkgKTtcclxuXHJcblx0XHR0aGlzLnNldEJ1dHRvblRleHQoKTtcclxuXHJcblx0XHQvLyBPcGVyYSBkb2VzIG5vdCBwcm9wZXJseSBzdXBwb3J0IG9wYWNpdHkgb24gc2VsZWN0IGVsZW1lbnRzXHJcblx0XHQvLyBJbiBNaW5pLCBpdCBoaWRlcyB0aGUgZWxlbWVudCwgYnV0IG5vdCBpdHMgdGV4dFxyXG5cdFx0Ly8gT24gdGhlIGRlc2t0b3AsaXQgc2VlbXMgdG8gZG8gdGhlIG9wcG9zaXRlXHJcblx0XHQvLyBmb3IgdGhlc2UgcmVhc29ucywgdXNpbmcgdGhlIG5hdGl2ZU1lbnUgb3B0aW9uIHJlc3VsdHMgaW4gYSBmdWxsIG5hdGl2ZSBzZWxlY3QgaW4gT3BlcmFcclxuXHRcdGlmICggb3B0aW9ucy5uYXRpdmVNZW51ICYmIHdpbmRvdy5vcGVyYSAmJiB3aW5kb3cub3BlcmEudmVyc2lvbiApIHtcclxuXHRcdFx0YnV0dG9uLmFkZENsYXNzKCBcInVpLXNlbGVjdC1uYXRpdmVvbmx5XCIgKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBBZGQgY291bnRlciBmb3IgbXVsdGkgc2VsZWN0c1xyXG5cdFx0aWYgKCB0aGlzLmlzTXVsdGlwbGUgKSB7XHJcblx0XHRcdHRoaXMuYnV0dG9uQ291bnQgPSAkKCBcIjxzcGFuPlwiIClcclxuXHRcdFx0XHQuYWRkQ2xhc3MoIFwidWktbGktY291bnQgdWktYm9keS1pbmhlcml0XCIgKVxyXG5cdFx0XHRcdC5oaWRlKClcclxuXHRcdFx0XHQuYXBwZW5kVG8oIGJ1dHRvbi5hZGRDbGFzcyggXCJ1aS1saS1oYXMtY291bnRcIiApICk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gRGlzYWJsZSBpZiBzcGVjaWZpZWRcclxuXHRcdGlmICggb3B0aW9ucy5kaXNhYmxlZCB8fCB0aGlzLmVsZW1lbnQuYXR0ciggXCJkaXNhYmxlZFwiICkpIHtcclxuXHRcdFx0dGhpcy5kaXNhYmxlKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gRXZlbnRzIG9uIG5hdGl2ZSBzZWxlY3RcclxuXHRcdHRoaXMuc2VsZWN0LmNoYW5nZShmdW5jdGlvbigpIHtcclxuXHRcdFx0c2VsZi5yZWZyZXNoKCk7XHJcblxyXG5cdFx0XHRpZiAoICEhb3B0aW9ucy5uYXRpdmVNZW51ICkge1xyXG5cdFx0XHRcdHNlbGYuX2RlbGF5KCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdHNlbGYuc2VsZWN0LmJsdXIoKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5faGFuZGxlRm9ybVJlc2V0KCk7XHJcblxyXG5cdFx0dGhpcy5fb24oIHRoaXMuYnV0dG9uLCB7XHJcblx0XHRcdGtleWRvd246IFwiX2hhbmRsZUtleWRvd25cIlxyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5idWlsZCgpO1xyXG5cdH0sXHJcblxyXG5cdGJ1aWxkOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBzZWxmID0gdGhpcztcclxuXHJcblx0XHR0aGlzLnNlbGVjdFxyXG5cdFx0XHQuYXBwZW5kVG8oIHNlbGYuYnV0dG9uIClcclxuXHRcdFx0LmJpbmQoIFwidm1vdXNlZG93blwiLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHQvLyBBZGQgYWN0aXZlIGNsYXNzIHRvIGJ1dHRvblxyXG5cdFx0XHRcdHNlbGYuYnV0dG9uLmFkZENsYXNzKCAkLm1vYmlsZS5hY3RpdmVCdG5DbGFzcyApO1xyXG5cdFx0XHR9KVxyXG5cdFx0XHQuYmluZCggXCJmb2N1c1wiLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRzZWxmLmJ1dHRvbi5hZGRDbGFzcyggJC5tb2JpbGUuZm9jdXNDbGFzcyApO1xyXG5cdFx0XHR9KVxyXG5cdFx0XHQuYmluZCggXCJibHVyXCIsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHNlbGYuYnV0dG9uLnJlbW92ZUNsYXNzKCAkLm1vYmlsZS5mb2N1c0NsYXNzICk7XHJcblx0XHRcdH0pXHJcblx0XHRcdC5iaW5kKCBcImZvY3VzIHZtb3VzZW92ZXJcIiwgZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0c2VsZi5idXR0b24udHJpZ2dlciggXCJ2bW91c2VvdmVyXCIgKTtcclxuXHRcdFx0fSlcclxuXHRcdFx0LmJpbmQoIFwidm1vdXNlbW92ZVwiLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHQvLyBSZW1vdmUgYWN0aXZlIGNsYXNzIG9uIHNjcm9sbC90b3VjaG1vdmVcclxuXHRcdFx0XHRzZWxmLmJ1dHRvbi5yZW1vdmVDbGFzcyggJC5tb2JpbGUuYWN0aXZlQnRuQ2xhc3MgKTtcclxuXHRcdFx0fSlcclxuXHRcdFx0LmJpbmQoIFwiY2hhbmdlIGJsdXIgdm1vdXNlb3V0XCIsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHNlbGYuYnV0dG9uLnRyaWdnZXIoIFwidm1vdXNlb3V0XCIgKVxyXG5cdFx0XHRcdFx0LnJlbW92ZUNsYXNzKCAkLm1vYmlsZS5hY3RpdmVCdG5DbGFzcyApO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHQvLyBJbiBtYW55IHNpdHVhdGlvbnMsIGlPUyB3aWxsIHpvb20gaW50byB0aGUgc2VsZWN0IHVwb24gdGFwLCB0aGlzIHByZXZlbnRzIHRoYXQgZnJvbSBoYXBwZW5pbmdcclxuXHRcdHNlbGYuYnV0dG9uLmJpbmQoIFwidm1vdXNlZG93blwiLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0aWYgKCBzZWxmLm9wdGlvbnMucHJldmVudEZvY3VzWm9vbSApIHtcclxuXHRcdFx0XHRcdCQubW9iaWxlLnpvb20uZGlzYWJsZSggdHJ1ZSApO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHRcdHNlbGYubGFiZWwuYmluZCggXCJjbGljayBmb2N1c1wiLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0aWYgKCBzZWxmLm9wdGlvbnMucHJldmVudEZvY3VzWm9vbSApIHtcclxuXHRcdFx0XHRcdCQubW9iaWxlLnpvb20uZGlzYWJsZSggdHJ1ZSApO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHRcdHNlbGYuc2VsZWN0LmJpbmQoIFwiZm9jdXNcIiwgZnVuY3Rpb24oKSB7XHJcblx0XHRcdGlmICggc2VsZi5vcHRpb25zLnByZXZlbnRGb2N1c1pvb20gKSB7XHJcblx0XHRcdFx0XHQkLm1vYmlsZS56b29tLmRpc2FibGUoIHRydWUgKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0XHRzZWxmLmJ1dHRvbi5iaW5kKCBcIm1vdXNldXBcIiwgZnVuY3Rpb24oKSB7XHJcblx0XHRcdGlmICggc2VsZi5vcHRpb25zLnByZXZlbnRGb2N1c1pvb20gKSB7XHJcblx0XHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdCQubW9iaWxlLnpvb20uZW5hYmxlKCB0cnVlICk7XHJcblx0XHRcdFx0fSwgMCApO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHRcdHNlbGYuc2VsZWN0LmJpbmQoIFwiYmx1clwiLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0aWYgKCBzZWxmLm9wdGlvbnMucHJldmVudEZvY3VzWm9vbSApIHtcclxuXHRcdFx0XHQkLm1vYmlsZS56b29tLmVuYWJsZSggdHJ1ZSApO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0fSxcclxuXHJcblx0c2VsZWN0ZWQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuIHRoaXMuX3NlbGVjdE9wdGlvbnMoKS5maWx0ZXIoIFwiOnNlbGVjdGVkXCIgKTtcclxuXHR9LFxyXG5cclxuXHRzZWxlY3RlZEluZGljZXM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuXHRcdHJldHVybiB0aGlzLnNlbGVjdGVkKCkubWFwKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRyZXR1cm4gc2VsZi5fc2VsZWN0T3B0aW9ucygpLmluZGV4KCB0aGlzICk7XHJcblx0XHR9KS5nZXQoKTtcclxuXHR9LFxyXG5cclxuXHRzZXRCdXR0b25UZXh0OiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBzZWxmID0gdGhpcyxcclxuXHRcdFx0c2VsZWN0ZWQgPSB0aGlzLnNlbGVjdGVkKCksXHJcblx0XHRcdHRleHQgPSB0aGlzLnBsYWNlaG9sZGVyLFxyXG5cdFx0XHRzcGFuID0gJCggZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJzcGFuXCIgKSApO1xyXG5cclxuXHRcdHRoaXMuYnV0dG9uLmNoaWxkcmVuKCBcInNwYW5cIiApLm5vdCggXCIudWktbGktY291bnRcIiApLnJlbW92ZSgpLmVuZCgpLmVuZCgpLnByZXBlbmQoIChmdW5jdGlvbigpIHtcclxuXHRcdFx0aWYgKCBzZWxlY3RlZC5sZW5ndGggKSB7XHJcblx0XHRcdFx0dGV4dCA9IHNlbGVjdGVkLm1hcChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdHJldHVybiAkKCB0aGlzICkudGV4dCgpO1xyXG5cdFx0XHRcdH0pLmdldCgpLmpvaW4oIFwiLCBcIiApO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHRleHQgPSBzZWxmLnBsYWNlaG9sZGVyO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoIHRleHQgKSB7XHJcblx0XHRcdFx0c3Bhbi50ZXh0KCB0ZXh0ICk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblxyXG5cdFx0XHRcdC8vIFNldCB0aGUgY29udGVudHMgdG8gJm5ic3A7IHdoaWNoIHdlIHdyaXRlIGFzICYjMTYwOyB0byBiZSBYSFRNTCBjb21wbGlhbnQgLSBzZWUgZ2gtNjY5OVxyXG5cdFx0XHRcdHNwYW4uaHRtbCggXCImIzE2MDtcIiApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBUT0RPIHBvc3NpYmx5IGFnZ3JlZ2F0ZSBtdWx0aXBsZSBzZWxlY3Qgb3B0aW9uIGNsYXNzZXNcclxuXHRcdFx0cmV0dXJuIHNwYW5cclxuXHRcdFx0XHQuYWRkQ2xhc3MoIHNlbGYuc2VsZWN0LmF0dHIoIFwiY2xhc3NcIiApIClcclxuXHRcdFx0XHQuYWRkQ2xhc3MoIHNlbGVjdGVkLmF0dHIoIFwiY2xhc3NcIiApIClcclxuXHRcdFx0XHQucmVtb3ZlQ2xhc3MoIFwidWktc2NyZWVuLWhpZGRlblwiICk7XHJcblx0XHR9KSgpKTtcclxuXHR9LFxyXG5cclxuXHRzZXRCdXR0b25Db3VudDogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgc2VsZWN0ZWQgPSB0aGlzLnNlbGVjdGVkKCk7XHJcblxyXG5cdFx0Ly8gbXVsdGlwbGUgY291bnQgaW5zaWRlIGJ1dHRvblxyXG5cdFx0aWYgKCB0aGlzLmlzTXVsdGlwbGUgKSB7XHJcblx0XHRcdHRoaXMuYnV0dG9uQ291bnRbIHNlbGVjdGVkLmxlbmd0aCA+IDEgPyBcInNob3dcIiA6IFwiaGlkZVwiIF0oKS50ZXh0KCBzZWxlY3RlZC5sZW5ndGggKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfaGFuZGxlS2V5ZG93bjogZnVuY3Rpb24oIC8qIGV2ZW50ICovICkge1xyXG5cdFx0dGhpcy5fZGVsYXkoIFwiX3JlZnJlc2hCdXR0b25cIiApO1xyXG5cdH0sXHJcblxyXG5cdF9yZXNldDogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLnJlZnJlc2goKTtcclxuXHR9LFxyXG5cclxuXHRfcmVmcmVzaEJ1dHRvbjogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLnNldEJ1dHRvblRleHQoKTtcclxuXHRcdHRoaXMuc2V0QnV0dG9uQ291bnQoKTtcclxuXHR9LFxyXG5cclxuXHRyZWZyZXNoOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX3JlZnJlc2hCdXR0b24oKTtcclxuXHR9LFxyXG5cclxuXHQvLyBvcGVuIGFuZCBjbG9zZSBwcmVzZXJ2ZWQgaW4gbmF0aXZlIHNlbGVjdHNcclxuXHQvLyB0byBzaW1wbGlmeSB1c2VycyBjb2RlIHdoZW4gbG9vcGluZyBvdmVyIHNlbGVjdHNcclxuXHRvcGVuOiAkLm5vb3AsXHJcblx0Y2xvc2U6ICQubm9vcCxcclxuXHJcblx0ZGlzYWJsZTogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9zZXREaXNhYmxlZCggdHJ1ZSApO1xyXG5cdFx0dGhpcy5idXR0b24uYWRkQ2xhc3MoIFwidWktc3RhdGUtZGlzYWJsZWRcIiApO1xyXG5cdH0sXHJcblxyXG5cdGVuYWJsZTogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9zZXREaXNhYmxlZCggZmFsc2UgKTtcclxuXHRcdHRoaXMuYnV0dG9uLnJlbW92ZUNsYXNzKCBcInVpLXN0YXRlLWRpc2FibGVkXCIgKTtcclxuXHR9XHJcbn0sICQubW9iaWxlLmJlaGF2aW9ycy5mb3JtUmVzZXQgKSApO1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG4kLm1vYmlsZS5saW5rcyA9IGZ1bmN0aW9uKCB0YXJnZXQgKSB7XHJcblxyXG5cdC8vbGlua3Mgd2l0aGluIGNvbnRlbnQgYXJlYXMsIHRlc3RzIGluY2x1ZGVkIHdpdGggcGFnZVxyXG5cdCQoIHRhcmdldCApXHJcblx0XHQuZmluZCggXCJhXCIgKVxyXG5cdFx0LmpxbUVuaGFuY2VhYmxlKClcclxuXHRcdC5maWx0ZXIoIFwiOmpxbURhdGEocmVsPSdwb3B1cCcpW2hyZWZdW2hyZWYhPScnXVwiIClcclxuXHRcdC5lYWNoKCBmdW5jdGlvbigpIHtcclxuXHRcdFx0Ly8gQWNjZXNzaWJpbGl0eSBpbmZvIGZvciBwb3B1cHNcclxuXHRcdFx0dmFyIGVsZW1lbnQgPSB0aGlzLFxyXG5cdFx0XHRcdGlkcmVmID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoIFwiaHJlZlwiICkuc3Vic3RyaW5nKCAxICk7XHJcblxyXG5cdFx0XHRpZiAoIGlkcmVmICkge1xyXG5cdFx0XHRcdGVsZW1lbnQuc2V0QXR0cmlidXRlKCBcImFyaWEtaGFzcG9wdXBcIiwgdHJ1ZSApO1xyXG5cdFx0XHRcdGVsZW1lbnQuc2V0QXR0cmlidXRlKCBcImFyaWEtb3duc1wiLCBpZHJlZiApO1xyXG5cdFx0XHRcdGVsZW1lbnQuc2V0QXR0cmlidXRlKCBcImFyaWEtZXhwYW5kZWRcIiwgZmFsc2UgKTtcclxuXHRcdFx0fVxyXG5cdFx0fSlcclxuXHRcdC5lbmQoKVxyXG5cdFx0Lm5vdCggXCIudWktYnRuLCA6anFtRGF0YShyb2xlPSdub25lJyksIDpqcW1EYXRhKHJvbGU9J25vanMnKVwiIClcclxuXHRcdC5hZGRDbGFzcyggXCJ1aS1saW5rXCIgKTtcclxuXHJcbn07XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG5mdW5jdGlvbiBmaXRTZWdtZW50SW5zaWRlU2VnbWVudCggd2luZG93U2l6ZSwgc2VnbWVudFNpemUsIG9mZnNldCwgZGVzaXJlZCApIHtcclxuXHR2YXIgcmV0dXJuVmFsdWUgPSBkZXNpcmVkO1xyXG5cclxuXHRpZiAoIHdpbmRvd1NpemUgPCBzZWdtZW50U2l6ZSApIHtcclxuXHRcdC8vIENlbnRlciBzZWdtZW50IGlmIGl0J3MgYmlnZ2VyIHRoYW4gdGhlIHdpbmRvd1xyXG5cdFx0cmV0dXJuVmFsdWUgPSBvZmZzZXQgKyAoIHdpbmRvd1NpemUgLSBzZWdtZW50U2l6ZSApIC8gMjtcclxuXHR9IGVsc2Uge1xyXG5cdFx0Ly8gT3RoZXJ3aXNlIGNlbnRlciBpdCBhdCB0aGUgZGVzaXJlZCBjb29yZGluYXRlIHdoaWxlIGtlZXBpbmcgaXQgY29tcGxldGVseSBpbnNpZGUgdGhlIHdpbmRvd1xyXG5cdFx0cmV0dXJuVmFsdWUgPSBNYXRoLm1pbiggTWF0aC5tYXgoIG9mZnNldCwgZGVzaXJlZCAtIHNlZ21lbnRTaXplIC8gMiApLCBvZmZzZXQgKyB3aW5kb3dTaXplIC0gc2VnbWVudFNpemUgKTtcclxuXHR9XHJcblxyXG5cdHJldHVybiByZXR1cm5WYWx1ZTtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0V2luZG93Q29vcmRpbmF0ZXMoIHRoZVdpbmRvdyApIHtcclxuXHRyZXR1cm4ge1xyXG5cdFx0eDogdGhlV2luZG93LnNjcm9sbExlZnQoKSxcclxuXHRcdHk6IHRoZVdpbmRvdy5zY3JvbGxUb3AoKSxcclxuXHRcdGN4OiAoIHRoZVdpbmRvd1sgMCBdLmlubmVyV2lkdGggfHwgdGhlV2luZG93LndpZHRoKCkgKSxcclxuXHRcdGN5OiAoIHRoZVdpbmRvd1sgMCBdLmlubmVySGVpZ2h0IHx8IHRoZVdpbmRvdy5oZWlnaHQoKSApXHJcblx0fTtcclxufVxyXG5cclxuJC53aWRnZXQoIFwibW9iaWxlLnBvcHVwXCIsIHtcclxuXHRvcHRpb25zOiB7XHJcblx0XHR3cmFwcGVyQ2xhc3M6IG51bGwsXHJcblx0XHR0aGVtZTogbnVsbCxcclxuXHRcdG92ZXJsYXlUaGVtZTogbnVsbCxcclxuXHRcdHNoYWRvdzogdHJ1ZSxcclxuXHRcdGNvcm5lcnM6IHRydWUsXHJcblx0XHR0cmFuc2l0aW9uOiBcIm5vbmVcIixcclxuXHRcdHBvc2l0aW9uVG86IFwib3JpZ2luXCIsXHJcblx0XHR0b2xlcmFuY2U6IG51bGwsXHJcblx0XHRjbG9zZUxpbmtTZWxlY3RvcjogXCJhOmpxbURhdGEocmVsPSdiYWNrJylcIixcclxuXHRcdGNsb3NlTGlua0V2ZW50czogXCJjbGljay5wb3B1cFwiLFxyXG5cdFx0bmF2aWdhdGVFdmVudHM6IFwibmF2aWdhdGUucG9wdXBcIixcclxuXHRcdGNsb3NlRXZlbnRzOiBcIm5hdmlnYXRlLnBvcHVwIHBhZ2ViZWZvcmVjaGFuZ2UucG9wdXBcIixcclxuXHRcdGRpc21pc3NpYmxlOiB0cnVlLFxyXG5cdFx0ZW5oYW5jZWQ6IGZhbHNlLFxyXG5cclxuXHRcdC8vIE5PVEUgV2luZG93cyBQaG9uZSA3IGhhcyBhIHNjcm9sbCBwb3NpdGlvbiBjYWNoaW5nIGlzc3VlIHRoYXRcclxuXHRcdC8vICAgICAgcmVxdWlyZXMgdXMgdG8gZGlzYWJsZSBwb3B1cCBoaXN0b3J5IG1hbmFnZW1lbnQgYnkgZGVmYXVsdFxyXG5cdFx0Ly8gICAgICBodHRwczovL2dpdGh1Yi5jb20vanF1ZXJ5L2pxdWVyeS1tb2JpbGUvaXNzdWVzLzQ3ODRcclxuXHRcdC8vXHJcblx0XHQvLyBOT1RFIHRoaXMgb3B0aW9uIGlzIG1vZGlmaWVkIGluIF9jcmVhdGUhXHJcblx0XHRoaXN0b3J5OiAhJC5tb2JpbGUuYnJvd3Nlci5vbGRJRVxyXG5cdH0sXHJcblxyXG5cdC8vIFdoZW4gdGhlIHVzZXIgZGVwcmVzc2VzIHRoZSBtb3VzZS9maW5nZXIgb24gYW4gZWxlbWVudCBpbnNpZGUgdGhlIHBvcHVwIHdoaWxlIHRoZSBwb3B1cCBpc1xyXG5cdC8vIG9wZW4sIHdlIGlnbm9yZSByZXNpemUgZXZlbnRzIGZvciBhIHNob3J0IHdoaWxlLiBUaGlzIHByZXZlbnRzICM2OTYxLlxyXG5cdF9oYW5kbGVEb2N1bWVudFZtb3VzZWRvd246IGZ1bmN0aW9uKCB0aGVFdmVudCApIHtcclxuXHRcdGlmICggdGhpcy5faXNPcGVuICYmICQuY29udGFpbnMoIHRoaXMuX3VpLmNvbnRhaW5lclsgMCBdLCB0aGVFdmVudC50YXJnZXQgKSApIHtcclxuXHRcdFx0dGhpcy5faWdub3JlUmVzaXplRXZlbnRzKCk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X2NyZWF0ZTogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgdGhlRWxlbWVudCA9IHRoaXMuZWxlbWVudCxcclxuXHRcdFx0bXlJZCA9IHRoZUVsZW1lbnQuYXR0ciggXCJpZFwiICksXHJcblx0XHRcdGN1cnJlbnRPcHRpb25zID0gdGhpcy5vcHRpb25zO1xyXG5cclxuXHRcdC8vIFdlIG5lZWQgdG8gYWRqdXN0IHRoZSBoaXN0b3J5IG9wdGlvbiB0byBiZSBmYWxzZSBpZiB0aGVyZSdzIG5vIEFKQVggbmF2LlxyXG5cdFx0Ly8gV2UgY2FuJ3QgZG8gaXQgaW4gdGhlIG9wdGlvbiBkZWNsYXJhdGlvbnMgYmVjYXVzZSB0aG9zZSBhcmUgcnVuIGJlZm9yZVxyXG5cdFx0Ly8gaXQgaXMgZGV0ZXJtaW5lZCB3aGV0aGVyIHRoZXJlIHNoYWxsIGJlIEFKQVggbmF2LlxyXG5cdFx0Y3VycmVudE9wdGlvbnMuaGlzdG9yeSA9IGN1cnJlbnRPcHRpb25zLmhpc3RvcnkgJiYgJC5tb2JpbGUuYWpheEVuYWJsZWQgJiYgJC5tb2JpbGUuaGFzaExpc3RlbmluZ0VuYWJsZWQ7XHJcblxyXG5cdFx0dGhpcy5fb24oIHRoaXMuZG9jdW1lbnQsIHtcclxuXHRcdFx0XCJ2bW91c2Vkb3duXCI6IFwiX2hhbmRsZURvY3VtZW50Vm1vdXNlZG93blwiXHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBEZWZpbmUgaW5zdGFuY2UgdmFyaWFibGVzXHJcblx0XHQkLmV4dGVuZCggdGhpcywge1xyXG5cdFx0XHRfc2Nyb2xsVG9wOiAwLFxyXG5cdFx0XHRfcGFnZTogdGhlRWxlbWVudC5jbG9zZXN0KCBcIi51aS1wYWdlXCIgKSxcclxuXHRcdFx0X3VpOiBudWxsLFxyXG5cdFx0XHRfZmFsbGJhY2tUcmFuc2l0aW9uOiBcIlwiLFxyXG5cdFx0XHRfY3VycmVudFRyYW5zaXRpb246IGZhbHNlLFxyXG5cdFx0XHRfcHJlcmVxdWlzaXRlczogbnVsbCxcclxuXHRcdFx0X2lzT3BlbjogZmFsc2UsXHJcblx0XHRcdF90b2xlcmFuY2U6IG51bGwsXHJcblx0XHRcdF9yZXNpemVEYXRhOiBudWxsLFxyXG5cdFx0XHRfaWdub3JlUmVzaXplVG86IDAsXHJcblx0XHRcdF9vcmllbnRhdGlvbmNoYW5nZUluUHJvZ3Jlc3M6IGZhbHNlXHJcblx0XHR9KTtcclxuXHJcblx0XHRpZiAoIHRoaXMuX3BhZ2UubGVuZ3RoID09PSAwICkge1xyXG5cdFx0XHR0aGlzLl9wYWdlID0gJCggXCJib2R5XCIgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIGN1cnJlbnRPcHRpb25zLmVuaGFuY2VkICkge1xyXG5cdFx0XHR0aGlzLl91aSA9IHtcclxuXHRcdFx0XHRjb250YWluZXI6IHRoZUVsZW1lbnQucGFyZW50KCksXHJcblx0XHRcdFx0c2NyZWVuOiB0aGVFbGVtZW50LnBhcmVudCgpLnByZXYoKSxcclxuXHRcdFx0XHRwbGFjZWhvbGRlcjogJCggdGhpcy5kb2N1bWVudFsgMCBdLmdldEVsZW1lbnRCeUlkKCBteUlkICsgXCItcGxhY2Vob2xkZXJcIiApIClcclxuXHRcdFx0fTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRoaXMuX3VpID0gdGhpcy5fZW5oYW5jZSggdGhlRWxlbWVudCwgbXlJZCApO1xyXG5cdFx0XHR0aGlzLl9hcHBseVRyYW5zaXRpb24oIGN1cnJlbnRPcHRpb25zLnRyYW5zaXRpb24gKTtcclxuXHRcdH1cclxuXHRcdHRoaXNcclxuXHRcdFx0Ll9zZXRUb2xlcmFuY2UoIGN1cnJlbnRPcHRpb25zLnRvbGVyYW5jZSApXHJcblx0XHRcdC5fdWkuZm9jdXNFbGVtZW50ID0gdGhpcy5fdWkuY29udGFpbmVyO1xyXG5cclxuXHRcdC8vIEV2ZW50IGhhbmRsZXJzXHJcblx0XHR0aGlzLl9vbiggdGhpcy5fdWkuc2NyZWVuLCB7IFwidmNsaWNrXCI6IFwiX2VhdEV2ZW50QW5kQ2xvc2VcIiB9ICk7XHJcblx0XHR0aGlzLl9vbiggdGhpcy53aW5kb3csIHtcclxuXHRcdFx0b3JpZW50YXRpb25jaGFuZ2U6ICQucHJveHkoIHRoaXMsIFwiX2hhbmRsZVdpbmRvd09yaWVudGF0aW9uY2hhbmdlXCIgKSxcclxuXHRcdFx0cmVzaXplOiAkLnByb3h5KCB0aGlzLCBcIl9oYW5kbGVXaW5kb3dSZXNpemVcIiApLFxyXG5cdFx0XHRrZXl1cDogJC5wcm94eSggdGhpcywgXCJfaGFuZGxlV2luZG93S2V5VXBcIiApXHJcblx0XHR9KTtcclxuXHRcdHRoaXMuX29uKCB0aGlzLmRvY3VtZW50LCB7IFwiZm9jdXNpblwiOiBcIl9oYW5kbGVEb2N1bWVudEZvY3VzSW5cIiB9ICk7XHJcblx0fSxcclxuXHJcblx0X2VuaGFuY2U6IGZ1bmN0aW9uKCB0aGVFbGVtZW50LCBteUlkICkge1xyXG5cdFx0dmFyIGN1cnJlbnRPcHRpb25zID0gdGhpcy5vcHRpb25zLFxyXG5cdFx0XHR3cmFwcGVyQ2xhc3MgPSBjdXJyZW50T3B0aW9ucy53cmFwcGVyQ2xhc3MsXHJcblx0XHRcdHVpID0ge1xyXG5cdFx0XHRcdHNjcmVlbjogJCggXCI8ZGl2IGNsYXNzPSd1aS1zY3JlZW4taGlkZGVuIHVpLXBvcHVwLXNjcmVlbiBcIiArXHJcblx0XHRcdFx0dGhpcy5fdGhlbWVDbGFzc0Zyb21PcHRpb24oIFwidWktb3ZlcmxheS1cIiwgY3VycmVudE9wdGlvbnMub3ZlcmxheVRoZW1lICkgKyBcIic+PC9kaXY+XCIgKSxcclxuXHRcdFx0XHRwbGFjZWhvbGRlcjogJCggXCI8ZGl2IHN0eWxlPSdkaXNwbGF5OiBub25lOyc+PCEtLSBwbGFjZWhvbGRlciAtLT48L2Rpdj5cIiApLFxyXG5cdFx0XHRcdGNvbnRhaW5lcjogJCggXCI8ZGl2IGNsYXNzPSd1aS1wb3B1cC1jb250YWluZXIgdWktcG9wdXAtaGlkZGVuIHVpLXBvcHVwLXRydW5jYXRlXCIgK1xyXG5cdFx0XHRcdFx0KCB3cmFwcGVyQ2xhc3MgPyAoIFwiIFwiICsgd3JhcHBlckNsYXNzICkgOiBcIlwiICkgKyBcIic+PC9kaXY+XCIgKVxyXG5cdFx0XHR9LFxyXG5cdFx0XHRmcmFnbWVudCA9IHRoaXMuZG9jdW1lbnRbIDAgXS5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XHJcblxyXG5cdFx0ZnJhZ21lbnQuYXBwZW5kQ2hpbGQoIHVpLnNjcmVlblsgMCBdICk7XHJcblx0XHRmcmFnbWVudC5hcHBlbmRDaGlsZCggdWkuY29udGFpbmVyWyAwIF0gKTtcclxuXHJcblx0XHRpZiAoIG15SWQgKSB7XHJcblx0XHRcdHVpLnNjcmVlbi5hdHRyKCBcImlkXCIsIG15SWQgKyBcIi1zY3JlZW5cIiApO1xyXG5cdFx0XHR1aS5jb250YWluZXIuYXR0ciggXCJpZFwiLCBteUlkICsgXCItcG9wdXBcIiApO1xyXG5cdFx0XHR1aS5wbGFjZWhvbGRlclxyXG5cdFx0XHRcdC5hdHRyKCBcImlkXCIsIG15SWQgKyBcIi1wbGFjZWhvbGRlclwiIClcclxuXHRcdFx0XHQuaHRtbCggXCI8IS0tIHBsYWNlaG9sZGVyIGZvciBcIiArIG15SWQgKyBcIiAtLT5cIiApO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEFwcGx5IHRoZSBwcm90b1xyXG5cdFx0dGhpcy5fcGFnZVsgMCBdLmFwcGVuZENoaWxkKCBmcmFnbWVudCApO1xyXG5cdFx0Ly8gTGVhdmUgYSBwbGFjZWhvbGRlciB3aGVyZSB0aGUgZWxlbWVudCB1c2VkIHRvIGJlXHJcblx0XHR1aS5wbGFjZWhvbGRlci5pbnNlcnRBZnRlciggdGhlRWxlbWVudCApO1xyXG5cdFx0dGhlRWxlbWVudFxyXG5cdFx0XHQuZGV0YWNoKClcclxuXHRcdFx0LmFkZENsYXNzKCBcInVpLXBvcHVwIFwiICtcclxuXHRcdFx0XHR0aGlzLl90aGVtZUNsYXNzRnJvbU9wdGlvbiggXCJ1aS1ib2R5LVwiLCBjdXJyZW50T3B0aW9ucy50aGVtZSApICsgXCIgXCIgK1xyXG5cdFx0XHRcdCggY3VycmVudE9wdGlvbnMuc2hhZG93ID8gXCJ1aS1vdmVybGF5LXNoYWRvdyBcIiA6IFwiXCIgKSArXHJcblx0XHRcdFx0KCBjdXJyZW50T3B0aW9ucy5jb3JuZXJzID8gXCJ1aS1jb3JuZXItYWxsIFwiIDogXCJcIiApIClcclxuXHRcdFx0LmFwcGVuZFRvKCB1aS5jb250YWluZXIgKTtcclxuXHJcblx0XHRyZXR1cm4gdWk7XHJcblx0fSxcclxuXHJcblx0X2VhdEV2ZW50QW5kQ2xvc2U6IGZ1bmN0aW9uKCB0aGVFdmVudCApIHtcclxuXHRcdHRoZUV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHR0aGVFdmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuXHRcdGlmICggdGhpcy5vcHRpb25zLmRpc21pc3NpYmxlICkge1xyXG5cdFx0XHR0aGlzLmNsb3NlKCk7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gZmFsc2U7XHJcblx0fSxcclxuXHJcblx0Ly8gTWFrZSBzdXJlIHRoZSBzY3JlZW4gY292ZXJzIHRoZSBlbnRpcmUgZG9jdW1lbnQgLSBDU1MgaXMgc29tZXRpbWVzIG5vdFxyXG5cdC8vIGVub3VnaCB0byBhY2NvbXBsaXNoIHRoaXMuXHJcblx0X3Jlc2l6ZVNjcmVlbjogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgc2NyZWVuID0gdGhpcy5fdWkuc2NyZWVuLFxyXG5cdFx0XHRwb3B1cEhlaWdodCA9IHRoaXMuX3VpLmNvbnRhaW5lci5vdXRlckhlaWdodCggdHJ1ZSApLFxyXG5cdFx0XHRzY3JlZW5IZWlnaHQgPSBzY3JlZW4ucmVtb3ZlQXR0ciggXCJzdHlsZVwiICkuaGVpZ2h0KCksXHJcblxyXG5cdFx0XHQvLyBTdWJ0cmFjdGluZyAxIGhlcmUgaXMgbmVjZXNzYXJ5IGZvciBhbiBvYnNjdXJlIEFuZHJkb2lkIDQuMCBidWcgd2hlcmVcclxuXHRcdFx0Ly8gdGhlIGJyb3dzZXIgaGFuZ3MgaWYgdGhlIHNjcmVlbiBjb3ZlcnMgdGhlIGVudGlyZSBkb2N1bWVudCA6L1xyXG5cdFx0XHRkb2N1bWVudEhlaWdodCA9IHRoaXMuZG9jdW1lbnQuaGVpZ2h0KCkgLSAxO1xyXG5cclxuXHRcdGlmICggc2NyZWVuSGVpZ2h0IDwgZG9jdW1lbnRIZWlnaHQgKSB7XHJcblx0XHRcdHNjcmVlbi5oZWlnaHQoIGRvY3VtZW50SGVpZ2h0ICk7XHJcblx0XHR9IGVsc2UgaWYgKCBwb3B1cEhlaWdodCA+IHNjcmVlbkhlaWdodCApIHtcclxuXHRcdFx0c2NyZWVuLmhlaWdodCggcG9wdXBIZWlnaHQgKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfaGFuZGxlV2luZG93S2V5VXA6IGZ1bmN0aW9uKCB0aGVFdmVudCApIHtcclxuXHRcdGlmICggdGhpcy5faXNPcGVuICYmIHRoZUV2ZW50LmtleUNvZGUgPT09ICQubW9iaWxlLmtleUNvZGUuRVNDQVBFICkge1xyXG5cdFx0XHRyZXR1cm4gdGhpcy5fZWF0RXZlbnRBbmRDbG9zZSggdGhlRXZlbnQgKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfZXhwZWN0UmVzaXplRXZlbnQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHdpbmRvd0Nvb3JkaW5hdGVzID0gZ2V0V2luZG93Q29vcmRpbmF0ZXMoIHRoaXMud2luZG93ICk7XHJcblxyXG5cdFx0aWYgKCB0aGlzLl9yZXNpemVEYXRhICkge1xyXG5cdFx0XHRpZiAoIHdpbmRvd0Nvb3JkaW5hdGVzLnggPT09IHRoaXMuX3Jlc2l6ZURhdGEud2luZG93Q29vcmRpbmF0ZXMueCAmJlxyXG5cdFx0XHRcdHdpbmRvd0Nvb3JkaW5hdGVzLnkgPT09IHRoaXMuX3Jlc2l6ZURhdGEud2luZG93Q29vcmRpbmF0ZXMueSAmJlxyXG5cdFx0XHRcdHdpbmRvd0Nvb3JkaW5hdGVzLmN4ID09PSB0aGlzLl9yZXNpemVEYXRhLndpbmRvd0Nvb3JkaW5hdGVzLmN4ICYmXHJcblx0XHRcdFx0d2luZG93Q29vcmRpbmF0ZXMuY3kgPT09IHRoaXMuX3Jlc2l6ZURhdGEud2luZG93Q29vcmRpbmF0ZXMuY3kgKSB7XHJcblx0XHRcdFx0Ly8gdGltZW91dCBub3QgcmVmcmVzaGVkXHJcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdC8vIGNsZWFyIGV4aXN0aW5nIHRpbWVvdXQgLSBpdCB3aWxsIGJlIHJlZnJlc2hlZCBiZWxvd1xyXG5cdFx0XHRcdGNsZWFyVGltZW91dCggdGhpcy5fcmVzaXplRGF0YS50aW1lb3V0SWQgKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX3Jlc2l6ZURhdGEgPSB7XHJcblx0XHRcdHRpbWVvdXRJZDogdGhpcy5fZGVsYXkoIFwiX3Jlc2l6ZVRpbWVvdXRcIiwgMjAwICksXHJcblx0XHRcdHdpbmRvd0Nvb3JkaW5hdGVzOiB3aW5kb3dDb29yZGluYXRlc1xyXG5cdFx0fTtcclxuXHJcblx0XHRyZXR1cm4gdHJ1ZTtcclxuXHR9LFxyXG5cclxuXHRfcmVzaXplVGltZW91dDogZnVuY3Rpb24oKSB7XHJcblx0XHRpZiAoIHRoaXMuX2lzT3BlbiApIHtcclxuXHRcdFx0aWYgKCAhdGhpcy5fZXhwZWN0UmVzaXplRXZlbnQoKSApIHtcclxuXHRcdFx0XHRpZiAoIHRoaXMuX3VpLmNvbnRhaW5lci5oYXNDbGFzcyggXCJ1aS1wb3B1cC1oaWRkZW5cIiApICkge1xyXG5cdFx0XHRcdFx0Ly8gZWZmZWN0aXZlbHkgcmFwaWQtb3BlbiB0aGUgcG9wdXAgd2hpbGUgbGVhdmluZyB0aGUgc2NyZWVuIGludGFjdFxyXG5cdFx0XHRcdFx0dGhpcy5fdWkuY29udGFpbmVyLnJlbW92ZUNsYXNzKCBcInVpLXBvcHVwLWhpZGRlbiB1aS1wb3B1cC10cnVuY2F0ZVwiICk7XHJcblx0XHRcdFx0XHR0aGlzLnJlcG9zaXRpb24oIHsgcG9zaXRpb25UbzogXCJ3aW5kb3dcIiB9ICk7XHJcblx0XHRcdFx0XHR0aGlzLl9pZ25vcmVSZXNpemVFdmVudHMoKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdHRoaXMuX3Jlc2l6ZVNjcmVlbigpO1xyXG5cdFx0XHRcdHRoaXMuX3Jlc2l6ZURhdGEgPSBudWxsO1xyXG5cdFx0XHRcdHRoaXMuX29yaWVudGF0aW9uY2hhbmdlSW5Qcm9ncmVzcyA9IGZhbHNlO1xyXG5cdFx0XHR9XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLl9yZXNpemVEYXRhID0gbnVsbDtcclxuXHRcdFx0dGhpcy5fb3JpZW50YXRpb25jaGFuZ2VJblByb2dyZXNzID0gZmFsc2U7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X3N0b3BJZ25vcmluZ1Jlc2l6ZUV2ZW50czogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9pZ25vcmVSZXNpemVUbyA9IDA7XHJcblx0fSxcclxuXHJcblx0X2lnbm9yZVJlc2l6ZUV2ZW50czogZnVuY3Rpb24oKSB7XHJcblx0XHRpZiAoIHRoaXMuX2lnbm9yZVJlc2l6ZVRvICkge1xyXG5cdFx0XHRjbGVhclRpbWVvdXQoIHRoaXMuX2lnbm9yZVJlc2l6ZVRvICk7XHJcblx0XHR9XHJcblx0XHR0aGlzLl9pZ25vcmVSZXNpemVUbyA9IHRoaXMuX2RlbGF5KCBcIl9zdG9wSWdub3JpbmdSZXNpemVFdmVudHNcIiwgMTAwMCApO1xyXG5cdH0sXHJcblxyXG5cdF9oYW5kbGVXaW5kb3dSZXNpemU6IGZ1bmN0aW9uKC8qIHRoZUV2ZW50ICovKSB7XHJcblx0XHRpZiAoIHRoaXMuX2lzT3BlbiAmJiB0aGlzLl9pZ25vcmVSZXNpemVUbyA9PT0gMCApIHtcclxuXHRcdFx0aWYgKCAoIHRoaXMuX2V4cGVjdFJlc2l6ZUV2ZW50KCkgfHwgdGhpcy5fb3JpZW50YXRpb25jaGFuZ2VJblByb2dyZXNzICkgJiZcclxuXHRcdFx0XHQhdGhpcy5fdWkuY29udGFpbmVyLmhhc0NsYXNzKCBcInVpLXBvcHVwLWhpZGRlblwiICkgKSB7XHJcblx0XHRcdFx0Ly8gZWZmZWN0aXZlbHkgcmFwaWQtY2xvc2UgdGhlIHBvcHVwIHdoaWxlIGxlYXZpbmcgdGhlIHNjcmVlbiBpbnRhY3RcclxuXHRcdFx0XHR0aGlzLl91aS5jb250YWluZXJcclxuXHRcdFx0XHRcdC5hZGRDbGFzcyggXCJ1aS1wb3B1cC1oaWRkZW4gdWktcG9wdXAtdHJ1bmNhdGVcIiApXHJcblx0XHRcdFx0XHQucmVtb3ZlQXR0ciggXCJzdHlsZVwiICk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfaGFuZGxlV2luZG93T3JpZW50YXRpb25jaGFuZ2U6IGZ1bmN0aW9uKC8qIHRoZUV2ZW50ICovKSB7XHJcblx0XHRpZiAoICF0aGlzLl9vcmllbnRhdGlvbmNoYW5nZUluUHJvZ3Jlc3MgJiYgdGhpcy5faXNPcGVuICYmIHRoaXMuX2lnbm9yZVJlc2l6ZVRvID09PSAwICkge1xyXG5cdFx0XHR0aGlzLl9leHBlY3RSZXNpemVFdmVudCgpO1xyXG5cdFx0XHR0aGlzLl9vcmllbnRhdGlvbmNoYW5nZUluUHJvZ3Jlc3MgPSB0cnVlO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdC8vIFdoZW4gdGhlIHBvcHVwIGlzIG9wZW4sIGF0dGVtcHRpbmcgdG8gZm9jdXMgb24gYW4gZWxlbWVudCB0aGF0IGlzIG5vdCBhXHJcblx0Ly8gY2hpbGQgb2YgdGhlIHBvcHVwIHdpbGwgcmVkaXJlY3QgZm9jdXMgdG8gdGhlIHBvcHVwXHJcblx0X2hhbmRsZURvY3VtZW50Rm9jdXNJbjogZnVuY3Rpb24oIHRoZUV2ZW50ICkge1xyXG5cdFx0dmFyIHRhcmdldCxcclxuXHRcdFx0dGFyZ2V0RWxlbWVudCA9IHRoZUV2ZW50LnRhcmdldCxcclxuXHRcdFx0dWkgPSB0aGlzLl91aTtcclxuXHJcblx0XHRpZiAoICF0aGlzLl9pc09wZW4gKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIHRhcmdldEVsZW1lbnQgIT09IHVpLmNvbnRhaW5lclsgMCBdICkge1xyXG5cdFx0XHR0YXJnZXQgPSAkKCB0YXJnZXRFbGVtZW50ICk7XHJcblx0XHRcdGlmICggISQuY29udGFpbnMoIHVpLmNvbnRhaW5lclsgMCBdLCB0YXJnZXRFbGVtZW50ICkgKSB7XHJcblx0XHRcdFx0JCggdGhpcy5kb2N1bWVudFsgMCBdLmFjdGl2ZUVsZW1lbnQgKS5vbmUoIFwiZm9jdXNcIiwgJC5wcm94eSggZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHR0aGlzLl9zYWZlbHlCbHVyKCB0YXJnZXRFbGVtZW50ICk7XHJcblx0XHRcdFx0fSwgdGhpcyApICk7XHJcblx0XHRcdFx0dWkuZm9jdXNFbGVtZW50LmZvY3VzKCk7XHJcblx0XHRcdFx0dGhlRXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHR0aGVFdmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdH0gZWxzZSBpZiAoIHVpLmZvY3VzRWxlbWVudFsgMCBdID09PSB1aS5jb250YWluZXJbIDAgXSApIHtcclxuXHRcdFx0XHR1aS5mb2N1c0VsZW1lbnQgPSB0YXJnZXQ7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl9pZ25vcmVSZXNpemVFdmVudHMoKTtcclxuXHR9LFxyXG5cclxuXHRfdGhlbWVDbGFzc0Zyb21PcHRpb246IGZ1bmN0aW9uKCBwcmVmaXgsIHZhbHVlICkge1xyXG5cdFx0cmV0dXJuICggdmFsdWUgPyAoIHZhbHVlID09PSBcIm5vbmVcIiA/IFwiXCIgOiAoIHByZWZpeCArIHZhbHVlICkgKSA6ICggcHJlZml4ICsgXCJpbmhlcml0XCIgKSApO1xyXG5cdH0sXHJcblxyXG5cdF9hcHBseVRyYW5zaXRpb246IGZ1bmN0aW9uKCB2YWx1ZSApIHtcclxuXHRcdGlmICggdmFsdWUgKSB7XHJcblx0XHRcdHRoaXMuX3VpLmNvbnRhaW5lci5yZW1vdmVDbGFzcyggdGhpcy5fZmFsbGJhY2tUcmFuc2l0aW9uICk7XHJcblx0XHRcdGlmICggdmFsdWUgIT09IFwibm9uZVwiICkge1xyXG5cdFx0XHRcdHRoaXMuX2ZhbGxiYWNrVHJhbnNpdGlvbiA9ICQubW9iaWxlLl9tYXliZURlZ3JhZGVUcmFuc2l0aW9uKCB2YWx1ZSApO1xyXG5cdFx0XHRcdGlmICggdGhpcy5fZmFsbGJhY2tUcmFuc2l0aW9uID09PSBcIm5vbmVcIiApIHtcclxuXHRcdFx0XHRcdHRoaXMuX2ZhbGxiYWNrVHJhbnNpdGlvbiA9IFwiXCI7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHRoaXMuX3VpLmNvbnRhaW5lci5hZGRDbGFzcyggdGhpcy5fZmFsbGJhY2tUcmFuc2l0aW9uICk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9LFxyXG5cclxuXHRfc2V0T3B0aW9uczogZnVuY3Rpb24oIG5ld09wdGlvbnMgKSB7XHJcblx0XHR2YXIgY3VycmVudE9wdGlvbnMgPSB0aGlzLm9wdGlvbnMsXHJcblx0XHRcdHRoZUVsZW1lbnQgPSB0aGlzLmVsZW1lbnQsXHJcblx0XHRcdHNjcmVlbiA9IHRoaXMuX3VpLnNjcmVlbjtcclxuXHJcblx0XHRpZiAoIG5ld09wdGlvbnMud3JhcHBlckNsYXNzICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdHRoaXMuX3VpLmNvbnRhaW5lclxyXG5cdFx0XHRcdC5yZW1vdmVDbGFzcyggY3VycmVudE9wdGlvbnMud3JhcHBlckNsYXNzIClcclxuXHRcdFx0XHQuYWRkQ2xhc3MoIG5ld09wdGlvbnMud3JhcHBlckNsYXNzICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBuZXdPcHRpb25zLnRoZW1lICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdHRoZUVsZW1lbnRcclxuXHRcdFx0XHQucmVtb3ZlQ2xhc3MoIHRoaXMuX3RoZW1lQ2xhc3NGcm9tT3B0aW9uKCBcInVpLWJvZHktXCIsIGN1cnJlbnRPcHRpb25zLnRoZW1lICkgKVxyXG5cdFx0XHRcdC5hZGRDbGFzcyggdGhpcy5fdGhlbWVDbGFzc0Zyb21PcHRpb24oIFwidWktYm9keS1cIiwgbmV3T3B0aW9ucy50aGVtZSApICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBuZXdPcHRpb25zLm92ZXJsYXlUaGVtZSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRzY3JlZW5cclxuXHRcdFx0XHQucmVtb3ZlQ2xhc3MoIHRoaXMuX3RoZW1lQ2xhc3NGcm9tT3B0aW9uKCBcInVpLW92ZXJsYXktXCIsIGN1cnJlbnRPcHRpb25zLm92ZXJsYXlUaGVtZSApIClcclxuXHRcdFx0XHQuYWRkQ2xhc3MoIHRoaXMuX3RoZW1lQ2xhc3NGcm9tT3B0aW9uKCBcInVpLW92ZXJsYXktXCIsIG5ld09wdGlvbnMub3ZlcmxheVRoZW1lICkgKTtcclxuXHJcblx0XHRcdGlmICggdGhpcy5faXNPcGVuICkge1xyXG5cdFx0XHRcdHNjcmVlbi5hZGRDbGFzcyggXCJpblwiICk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG5ld09wdGlvbnMuc2hhZG93ICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdHRoZUVsZW1lbnQudG9nZ2xlQ2xhc3MoIFwidWktb3ZlcmxheS1zaGFkb3dcIiwgbmV3T3B0aW9ucy5zaGFkb3cgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG5ld09wdGlvbnMuY29ybmVycyAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHR0aGVFbGVtZW50LnRvZ2dsZUNsYXNzKCBcInVpLWNvcm5lci1hbGxcIiwgbmV3T3B0aW9ucy5jb3JuZXJzICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBuZXdPcHRpb25zLnRyYW5zaXRpb24gIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0aWYgKCAhdGhpcy5fY3VycmVudFRyYW5zaXRpb24gKSB7XHJcblx0XHRcdFx0dGhpcy5fYXBwbHlUcmFuc2l0aW9uKCBuZXdPcHRpb25zLnRyYW5zaXRpb24gKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggbmV3T3B0aW9ucy50b2xlcmFuY2UgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0dGhpcy5fc2V0VG9sZXJhbmNlKCBuZXdPcHRpb25zLnRvbGVyYW5jZSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggbmV3T3B0aW9ucy5kaXNhYmxlZCAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRpZiAoIG5ld09wdGlvbnMuZGlzYWJsZWQgKSB7XHJcblx0XHRcdFx0dGhpcy5jbG9zZSgpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHRoaXMuX3N1cGVyKCBuZXdPcHRpb25zICk7XHJcblx0fSxcclxuXHJcblx0X3NldFRvbGVyYW5jZTogZnVuY3Rpb24oIHZhbHVlICkge1xyXG5cdFx0dmFyIHRvbCA9IHsgdDogMzAsIHI6IDE1LCBiOiAzMCwgbDogMTUgfSxcclxuXHRcdFx0YXI7XHJcblxyXG5cdFx0aWYgKCB2YWx1ZSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRhciA9IFN0cmluZyggdmFsdWUgKS5zcGxpdCggXCIsXCIgKTtcclxuXHJcblx0XHRcdCQuZWFjaCggYXIsIGZ1bmN0aW9uKCBpZHgsIHZhbCApIHsgYXJbIGlkeCBdID0gcGFyc2VJbnQoIHZhbCwgMTAgKTsgfSApO1xyXG5cclxuXHRcdFx0c3dpdGNoKCBhci5sZW5ndGggKSB7XHJcblx0XHRcdFx0Ly8gQWxsIHZhbHVlcyBhcmUgdG8gYmUgdGhlIHNhbWVcclxuXHRcdFx0XHRjYXNlIDE6XHJcblx0XHRcdFx0XHRpZiAoICFpc05hTiggYXJbIDAgXSApICkge1xyXG5cdFx0XHRcdFx0XHR0b2wudCA9IHRvbC5yID0gdG9sLmIgPSB0b2wubCA9IGFyWyAwIF07XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHJcblx0XHRcdFx0Ly8gVGhlIGZpcnN0IHZhbHVlIGRlbm90ZXMgdG9wL2JvdHRvbSB0b2xlcmFuY2UsIGFuZCB0aGUgc2Vjb25kIHZhbHVlIGRlbm90ZXMgbGVmdC9yaWdodCB0b2xlcmFuY2VcclxuXHRcdFx0XHRjYXNlIDI6XHJcblx0XHRcdFx0XHRpZiAoICFpc05hTiggYXJbIDAgXSApICkge1xyXG5cdFx0XHRcdFx0XHR0b2wudCA9IHRvbC5iID0gYXJbIDAgXTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGlmICggIWlzTmFOKCBhclsgMSBdICkgKSB7XHJcblx0XHRcdFx0XHRcdHRvbC5sID0gdG9sLnIgPSBhclsgMSBdO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblxyXG5cdFx0XHRcdC8vIFRoZSBhcnJheSBjb250YWlucyB2YWx1ZXMgaW4gdGhlIG9yZGVyIHRvcCwgcmlnaHQsIGJvdHRvbSwgbGVmdFxyXG5cdFx0XHRcdGNhc2UgNDpcclxuXHRcdFx0XHRcdGlmICggIWlzTmFOKCBhclsgMCBdICkgKSB7XHJcblx0XHRcdFx0XHRcdHRvbC50ID0gYXJbIDAgXTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGlmICggIWlzTmFOKCBhclsgMSBdICkgKSB7XHJcblx0XHRcdFx0XHRcdHRvbC5yID0gYXJbIDEgXTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGlmICggIWlzTmFOKCBhclsgMiBdICkgKSB7XHJcblx0XHRcdFx0XHRcdHRvbC5iID0gYXJbIDIgXTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGlmICggIWlzTmFOKCBhclsgMyBdICkgKSB7XHJcblx0XHRcdFx0XHRcdHRvbC5sID0gYXJbIDMgXTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cclxuXHRcdFx0XHRkZWZhdWx0OlxyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl90b2xlcmFuY2UgPSB0b2w7XHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9LFxyXG5cclxuXHRfY2xhbXBQb3B1cFdpZHRoOiBmdW5jdGlvbiggaW5mb09ubHkgKSB7XHJcblx0XHR2YXIgbWVudVNpemUsXHJcblx0XHRcdHdpbmRvd0Nvb3JkaW5hdGVzID0gZ2V0V2luZG93Q29vcmRpbmF0ZXMoIHRoaXMud2luZG93ICksXHJcblx0XHRcdC8vIHJlY3RhbmdsZSB3aXRoaW4gd2hpY2ggdGhlIHBvcHVwIG11c3QgZml0XHJcblx0XHRcdHJlY3RhbmdsZSA9IHtcclxuXHRcdFx0XHR4OiB0aGlzLl90b2xlcmFuY2UubCxcclxuXHRcdFx0XHR5OiB3aW5kb3dDb29yZGluYXRlcy55ICsgdGhpcy5fdG9sZXJhbmNlLnQsXHJcblx0XHRcdFx0Y3g6IHdpbmRvd0Nvb3JkaW5hdGVzLmN4IC0gdGhpcy5fdG9sZXJhbmNlLmwgLSB0aGlzLl90b2xlcmFuY2UucixcclxuXHRcdFx0XHRjeTogd2luZG93Q29vcmRpbmF0ZXMuY3kgLSB0aGlzLl90b2xlcmFuY2UudCAtIHRoaXMuX3RvbGVyYW5jZS5iXHJcblx0XHRcdH07XHJcblxyXG5cdFx0aWYgKCAhaW5mb09ubHkgKSB7XHJcblx0XHRcdC8vIENsYW1wIHRoZSB3aWR0aCBvZiB0aGUgbWVudSBiZWZvcmUgZ3JhYmJpbmcgaXRzIHNpemVcclxuXHRcdFx0dGhpcy5fdWkuY29udGFpbmVyLmNzcyggXCJtYXgtd2lkdGhcIiwgcmVjdGFuZ2xlLmN4ICk7XHJcblx0XHR9XHJcblxyXG5cdFx0bWVudVNpemUgPSB7XHJcblx0XHRcdGN4OiB0aGlzLl91aS5jb250YWluZXIub3V0ZXJXaWR0aCggdHJ1ZSApLFxyXG5cdFx0XHRjeTogdGhpcy5fdWkuY29udGFpbmVyLm91dGVySGVpZ2h0KCB0cnVlIClcclxuXHRcdH07XHJcblxyXG5cdFx0cmV0dXJuIHsgcmM6IHJlY3RhbmdsZSwgbWVudVNpemU6IG1lbnVTaXplIH07XHJcblx0fSxcclxuXHJcblx0X2NhbGN1bGF0ZUZpbmFsTG9jYXRpb246IGZ1bmN0aW9uKCBkZXNpcmVkLCBjbGFtcEluZm8gKSB7XHJcblx0XHR2YXIgcmV0dXJuVmFsdWUsXHJcblx0XHRcdHJlY3RhbmdsZSA9IGNsYW1wSW5mby5yYyxcclxuXHRcdFx0bWVudVNpemUgPSBjbGFtcEluZm8ubWVudVNpemU7XHJcblxyXG5cdFx0Ly8gQ2VudGVyIHRoZSBtZW51IG92ZXIgdGhlIGRlc2lyZWQgY29vcmRpbmF0ZXMsIHdoaWxlIG5vdCBnb2luZyBvdXRzaWRlXHJcblx0XHQvLyB0aGUgd2luZG93IHRvbGVyYW5jZXMuIFRoaXMgd2lsbCBjZW50ZXIgd3J0LiB0aGUgd2luZG93IGlmIHRoZSBwb3B1cCBpc1xyXG5cdFx0Ly8gdG9vIGxhcmdlLlxyXG5cdFx0cmV0dXJuVmFsdWUgPSB7XHJcblx0XHRcdGxlZnQ6IGZpdFNlZ21lbnRJbnNpZGVTZWdtZW50KCByZWN0YW5nbGUuY3gsIG1lbnVTaXplLmN4LCByZWN0YW5nbGUueCwgZGVzaXJlZC54ICksXHJcblx0XHRcdHRvcDogZml0U2VnbWVudEluc2lkZVNlZ21lbnQoIHJlY3RhbmdsZS5jeSwgbWVudVNpemUuY3ksIHJlY3RhbmdsZS55LCBkZXNpcmVkLnkgKVxyXG5cdFx0fTtcclxuXHJcblx0XHQvLyBNYWtlIHN1cmUgdGhlIHRvcCBvZiB0aGUgbWVudSBpcyB2aXNpYmxlXHJcblx0XHRyZXR1cm5WYWx1ZS50b3AgPSBNYXRoLm1heCggMCwgcmV0dXJuVmFsdWUudG9wICk7XHJcblxyXG5cdFx0Ly8gSWYgdGhlIGhlaWdodCBvZiB0aGUgbWVudSBpcyBzbWFsbGVyIHRoYW4gdGhlIGhlaWdodCBvZiB0aGUgZG9jdW1lbnRcclxuXHRcdC8vIGFsaWduIHRoZSBib3R0b20gd2l0aCB0aGUgYm90dG9tIG9mIHRoZSBkb2N1bWVudFxyXG5cclxuXHRcdHJldHVyblZhbHVlLnRvcCAtPSBNYXRoLm1pbiggcmV0dXJuVmFsdWUudG9wLFxyXG5cdFx0XHRNYXRoLm1heCggMCwgcmV0dXJuVmFsdWUudG9wICsgbWVudVNpemUuY3kgLSB0aGlzLmRvY3VtZW50LmhlaWdodCgpICkgKTtcclxuXHJcblx0XHRyZXR1cm4gcmV0dXJuVmFsdWU7XHJcblx0fSxcclxuXHJcblx0Ly8gVHJ5IGFuZCBjZW50ZXIgdGhlIG92ZXJsYXkgb3ZlciB0aGUgZ2l2ZW4gY29vcmRpbmF0ZXNcclxuXHRfcGxhY2VtZW50Q29vcmRzOiBmdW5jdGlvbiggZGVzaXJlZCApIHtcclxuXHRcdHJldHVybiB0aGlzLl9jYWxjdWxhdGVGaW5hbExvY2F0aW9uKCBkZXNpcmVkLCB0aGlzLl9jbGFtcFBvcHVwV2lkdGgoKSApO1xyXG5cdH0sXHJcblxyXG5cdF9jcmVhdGVQcmVyZXF1aXNpdGVzOiBmdW5jdGlvbiggc2NyZWVuUHJlcmVxdWlzaXRlLCBjb250YWluZXJQcmVyZXF1aXNpdGUsIHdoZW5Eb25lICkge1xyXG5cdFx0dmFyIHByZXJlcXVpc2l0ZXMsXHJcblx0XHRcdHNlbGYgPSB0aGlzO1xyXG5cclxuXHRcdC8vIEl0IGlzIGltcG9ydGFudCB0byBtYWludGFpbiBib3RoIHRoZSBsb2NhbCB2YXJpYWJsZSBwcmVyZXF1aXNpdGVzIGFuZFxyXG5cdFx0Ly8gc2VsZi5fcHJlcmVxdWlzaXRlcy4gVGhlIGxvY2FsIHZhcmlhYmxlIHJlbWFpbnMgaW4gdGhlIGNsb3N1cmUgb2YgdGhlXHJcblx0XHQvLyBmdW5jdGlvbnMgd2hpY2ggY2FsbCB0aGUgY2FsbGJhY2tzIHBhc3NlZCBpbi4gVGhlIGNvbXBhcmlzb24gYmV0d2VlbiB0aGVcclxuXHRcdC8vIGxvY2FsIHZhcmlhYmxlIGFuZCBzZWxmLl9wcmVyZXF1aXNpdGVzIGlzIG5lY2Vzc2FyeSwgYmVjYXVzZSBvbmNlIGFcclxuXHRcdC8vIGZ1bmN0aW9uIGhhcyBiZWVuIHBhc3NlZCB0byAuYW5pbWF0aW9uQ29tcGxldGUoKSBpdCB3aWxsIGJlIGNhbGxlZCBuZXh0XHJcblx0XHQvLyB0aW1lIGFuIGFuaW1hdGlvbiBjb21wbGV0ZXMsIGV2ZW4gaWYgdGhhdCdzIG5vdCB0aGUgYW5pbWF0aW9uIHdob3NlIGVuZFxyXG5cdFx0Ly8gdGhlIGZ1bmN0aW9uIHdhcyBzdXBwb3NlZCB0byBjYXRjaCAoZm9yIGV4YW1wbGUsIGlmIGFuIGFib3J0IGhhcHBlbnNcclxuXHRcdC8vIGR1cmluZyB0aGUgb3BlbmluZyBhbmltYXRpb24sIHRoZSAuYW5pbWF0aW9uQ29tcGxldGUgaGFuZGxlciBpcyBub3RcclxuXHRcdC8vIGNhbGxlZCBmb3IgdGhhdCBhbmltYXRpb24gYW55bW9yZSwgYnV0IHRoZSBoYW5kbGVyIHJlbWFpbnMgYXR0YWNoZWQsIHNvXHJcblx0XHQvLyBpdCBpcyBjYWxsZWQgdGhlIG5leHQgdGltZSB0aGUgcG9wdXAgaXMgb3BlbmVkIC0gbWFraW5nIGl0IHN0YWxlLlxyXG5cdFx0Ly8gQ29tcGFyaW5nIHRoZSBsb2NhbCB2YXJpYWJsZSBwcmVyZXF1aXNpdGVzIHRvIHRoZSB3aWRnZXQtbGV2ZWwgdmFyaWFibGVcclxuXHRcdC8vIHNlbGYuX3ByZXJlcXVpc2l0ZXMgZW5zdXJlcyB0aGF0IGNhbGxiYWNrcyB0cmlnZ2VyZWQgYnkgYSBzdGFsZVxyXG5cdFx0Ly8gLmFuaW1hdGlvbkNvbXBsZXRlIHdpbGwgYmUgaWdub3JlZC5cclxuXHJcblx0XHRwcmVyZXF1aXNpdGVzID0ge1xyXG5cdFx0XHRzY3JlZW46ICQuRGVmZXJyZWQoKSxcclxuXHRcdFx0Y29udGFpbmVyOiAkLkRlZmVycmVkKClcclxuXHRcdH07XHJcblxyXG5cdFx0cHJlcmVxdWlzaXRlcy5zY3JlZW4udGhlbiggZnVuY3Rpb24oKSB7XHJcblx0XHRcdGlmICggcHJlcmVxdWlzaXRlcyA9PT0gc2VsZi5fcHJlcmVxdWlzaXRlcyApIHtcclxuXHRcdFx0XHRzY3JlZW5QcmVyZXF1aXNpdGUoKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0cHJlcmVxdWlzaXRlcy5jb250YWluZXIudGhlbiggZnVuY3Rpb24oKSB7XHJcblx0XHRcdGlmICggcHJlcmVxdWlzaXRlcyA9PT0gc2VsZi5fcHJlcmVxdWlzaXRlcyApIHtcclxuXHRcdFx0XHRjb250YWluZXJQcmVyZXF1aXNpdGUoKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0JC53aGVuKCBwcmVyZXF1aXNpdGVzLnNjcmVlbiwgcHJlcmVxdWlzaXRlcy5jb250YWluZXIgKS5kb25lKCBmdW5jdGlvbigpIHtcclxuXHRcdFx0aWYgKCBwcmVyZXF1aXNpdGVzID09PSBzZWxmLl9wcmVyZXF1aXNpdGVzICkge1xyXG5cdFx0XHRcdHNlbGYuX3ByZXJlcXVpc2l0ZXMgPSBudWxsO1xyXG5cdFx0XHRcdHdoZW5Eb25lKCk7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdHNlbGYuX3ByZXJlcXVpc2l0ZXMgPSBwcmVyZXF1aXNpdGVzO1xyXG5cdH0sXHJcblxyXG5cdF9hbmltYXRlOiBmdW5jdGlvbiggYXJncyApIHtcclxuXHRcdC8vIE5PVEUgYmVmb3JlIHJlbW92aW5nIHRoZSBkZWZhdWx0IGFuaW1hdGlvbiBvZiB0aGUgc2NyZWVuXHJcblx0XHQvLyAgICAgIHRoaXMgaGFkIGFuIGFuaW1hdGUgY2FsbGJhY2sgdGhhdCB3b3VsZCByZXNvbHZlIHRoZSBkZWZlcnJlZFxyXG5cdFx0Ly8gICAgICBub3cgdGhlIGRlZmVycmVkIGlzIHJlc29sdmVkIGltbWVkaWF0ZWx5XHJcblx0XHQvLyBUT0RPIHJlbW92ZSB0aGUgZGVwZW5kZW5jeSBvbiB0aGUgc2NyZWVuIGRlZmVycmVkXHJcblx0XHR0aGlzLl91aS5zY3JlZW5cclxuXHRcdFx0LnJlbW92ZUNsYXNzKCBhcmdzLmNsYXNzVG9SZW1vdmUgKVxyXG5cdFx0XHQuYWRkQ2xhc3MoIGFyZ3Muc2NyZWVuQ2xhc3NUb0FkZCApO1xyXG5cclxuXHRcdGFyZ3MucHJlcmVxdWlzaXRlcy5zY3JlZW4ucmVzb2x2ZSgpO1xyXG5cclxuXHRcdGlmICggYXJncy50cmFuc2l0aW9uICYmIGFyZ3MudHJhbnNpdGlvbiAhPT0gXCJub25lXCIgKSB7XHJcblx0XHRcdGlmICggYXJncy5hcHBseVRyYW5zaXRpb24gKSB7XHJcblx0XHRcdFx0dGhpcy5fYXBwbHlUcmFuc2l0aW9uKCBhcmdzLnRyYW5zaXRpb24gKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoIHRoaXMuX2ZhbGxiYWNrVHJhbnNpdGlvbiApIHtcclxuXHRcdFx0XHR0aGlzLl91aS5jb250YWluZXJcclxuXHRcdFx0XHRcdC5hZGRDbGFzcyggYXJncy5jb250YWluZXJDbGFzc1RvQWRkIClcclxuXHRcdFx0XHRcdC5yZW1vdmVDbGFzcyggYXJncy5jbGFzc1RvUmVtb3ZlIClcclxuXHRcdFx0XHRcdC5hbmltYXRpb25Db21wbGV0ZSggJC5wcm94eSggYXJncy5wcmVyZXF1aXNpdGVzLmNvbnRhaW5lciwgXCJyZXNvbHZlXCIgKSApO1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0dGhpcy5fdWkuY29udGFpbmVyLnJlbW92ZUNsYXNzKCBhcmdzLmNsYXNzVG9SZW1vdmUgKTtcclxuXHRcdGFyZ3MucHJlcmVxdWlzaXRlcy5jb250YWluZXIucmVzb2x2ZSgpO1xyXG5cdH0sXHJcblxyXG5cdC8vIFRoZSBkZXNpcmVkIGNvb3JkaW5hdGVzIHBhc3NlZCBpbiB3aWxsIGJlIHJldHVybmVkIHVudG91Y2hlZCBpZiBubyByZWZlcmVuY2UgZWxlbWVudCBjYW4gYmUgaWRlbnRpZmllZCB2aWFcclxuXHQvLyBkZXNpcmVkUG9zaXRpb24ucG9zaXRpb25Uby4gTmV2ZXJ0aGVsZXNzLCB0aGlzIGZ1bmN0aW9uIGVuc3VyZXMgdGhhdCBpdHMgcmV0dXJuIHZhbHVlIGFsd2F5cyBjb250YWlucyB2YWxpZFxyXG5cdC8vIHggYW5kIHkgY29vcmRpbmF0ZXMgYnkgc3BlY2lmeWluZyB0aGUgY2VudGVyIG1pZGRsZSBvZiB0aGUgd2luZG93IGlmIHRoZSBjb29yZGluYXRlcyBhcmUgYWJzZW50LlxyXG5cdC8vIG9wdGlvbnM6IHsgeDogY29vcmRpbmF0ZSwgeTogY29vcmRpbmF0ZSwgcG9zaXRpb25Ubzogc3RyaW5nOiBcIm9yaWdpblwiLCBcIndpbmRvd1wiLCBvciBqUXVlcnkgc2VsZWN0b3JcclxuXHRfZGVzaXJlZENvb3JkczogZnVuY3Rpb24oIG9wZW5PcHRpb25zICkge1xyXG5cdFx0dmFyIG9mZnNldCxcclxuXHRcdFx0ZHN0ID0gbnVsbCxcclxuXHRcdFx0d2luZG93Q29vcmRpbmF0ZXMgPSBnZXRXaW5kb3dDb29yZGluYXRlcyggdGhpcy53aW5kb3cgKSxcclxuXHRcdFx0eCA9IG9wZW5PcHRpb25zLngsXHJcblx0XHRcdHkgPSBvcGVuT3B0aW9ucy55LFxyXG5cdFx0XHRwVG8gPSBvcGVuT3B0aW9ucy5wb3NpdGlvblRvO1xyXG5cclxuXHRcdC8vIEVzdGFibGlzaCB3aGljaCBlbGVtZW50IHdpbGwgc2VydmUgYXMgdGhlIHJlZmVyZW5jZVxyXG5cdFx0aWYgKCBwVG8gJiYgcFRvICE9PSBcIm9yaWdpblwiICkge1xyXG5cdFx0XHRpZiAoIHBUbyA9PT0gXCJ3aW5kb3dcIiApIHtcclxuXHRcdFx0XHR4ID0gd2luZG93Q29vcmRpbmF0ZXMuY3ggLyAyICsgd2luZG93Q29vcmRpbmF0ZXMueDtcclxuXHRcdFx0XHR5ID0gd2luZG93Q29vcmRpbmF0ZXMuY3kgLyAyICsgd2luZG93Q29vcmRpbmF0ZXMueTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHR0cnkge1xyXG5cdFx0XHRcdFx0ZHN0ID0gJCggcFRvICk7XHJcblx0XHRcdFx0fSBjYXRjaCggZXJyICkge1xyXG5cdFx0XHRcdFx0ZHN0ID0gbnVsbDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWYgKCBkc3QgKSB7XHJcblx0XHRcdFx0XHRkc3QuZmlsdGVyKCBcIjp2aXNpYmxlXCIgKTtcclxuXHRcdFx0XHRcdGlmICggZHN0Lmxlbmd0aCA9PT0gMCApIHtcclxuXHRcdFx0XHRcdFx0ZHN0ID0gbnVsbDtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHQvLyBJZiBhbiBlbGVtZW50IHdhcyBmb3VuZCwgY2VudGVyIG92ZXIgaXRcclxuXHRcdGlmICggZHN0ICkge1xyXG5cdFx0XHRvZmZzZXQgPSBkc3Qub2Zmc2V0KCk7XHJcblx0XHRcdHggPSBvZmZzZXQubGVmdCArIGRzdC5vdXRlcldpZHRoKCkgLyAyO1xyXG5cdFx0XHR5ID0gb2Zmc2V0LnRvcCArIGRzdC5vdXRlckhlaWdodCgpIC8gMjtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBNYWtlIHN1cmUgeCBhbmQgeSBhcmUgdmFsaWQgbnVtYmVycyAtIGNlbnRlciBvdmVyIHRoZSB3aW5kb3dcclxuXHRcdGlmICggJC50eXBlKCB4ICkgIT09IFwibnVtYmVyXCIgfHwgaXNOYU4oIHggKSApIHtcclxuXHRcdFx0eCA9IHdpbmRvd0Nvb3JkaW5hdGVzLmN4IC8gMiArIHdpbmRvd0Nvb3JkaW5hdGVzLng7XHJcblx0XHR9XHJcblx0XHRpZiAoICQudHlwZSggeSApICE9PSBcIm51bWJlclwiIHx8IGlzTmFOKCB5ICkgKSB7XHJcblx0XHRcdHkgPSB3aW5kb3dDb29yZGluYXRlcy5jeSAvIDIgKyB3aW5kb3dDb29yZGluYXRlcy55O1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB7IHg6IHgsIHk6IHkgfTtcclxuXHR9LFxyXG5cclxuXHRfcmVwb3NpdGlvbjogZnVuY3Rpb24oIG9wZW5PcHRpb25zICkge1xyXG5cdFx0Ly8gV2Ugb25seSBjYXJlIGFib3V0IHBvc2l0aW9uLXJlbGF0ZWQgcGFyYW1ldGVycyBmb3IgcmVwb3NpdGlvbmluZ1xyXG5cdFx0b3Blbk9wdGlvbnMgPSB7XHJcblx0XHRcdHg6IG9wZW5PcHRpb25zLngsXHJcblx0XHRcdHk6IG9wZW5PcHRpb25zLnksXHJcblx0XHRcdHBvc2l0aW9uVG86IG9wZW5PcHRpb25zLnBvc2l0aW9uVG9cclxuXHRcdH07XHJcblx0XHR0aGlzLl90cmlnZ2VyKCBcImJlZm9yZXBvc2l0aW9uXCIsIHVuZGVmaW5lZCwgb3Blbk9wdGlvbnMgKTtcclxuXHRcdHRoaXMuX3VpLmNvbnRhaW5lci5vZmZzZXQoIHRoaXMuX3BsYWNlbWVudENvb3JkcyggdGhpcy5fZGVzaXJlZENvb3Jkcyggb3Blbk9wdGlvbnMgKSApICk7XHJcblx0fSxcclxuXHJcblx0cmVwb3NpdGlvbjogZnVuY3Rpb24oIG9wZW5PcHRpb25zICkge1xyXG5cdFx0aWYgKCB0aGlzLl9pc09wZW4gKSB7XHJcblx0XHRcdHRoaXMuX3JlcG9zaXRpb24oIG9wZW5PcHRpb25zICk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X3NhZmVseUJsdXI6IGZ1bmN0aW9uKCBjdXJyZW50RWxlbWVudCApe1xyXG5cdFx0aWYgKCBjdXJyZW50RWxlbWVudCAhPT0gdGhpcy53aW5kb3dbIDAgXSAmJlxyXG5cdFx0XHRjdXJyZW50RWxlbWVudC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpICE9PSBcImJvZHlcIiApIHtcclxuXHRcdFx0XHQkKCBjdXJyZW50RWxlbWVudCApLmJsdXIoKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfb3BlblByZXJlcXVpc2l0ZXNDb21wbGV0ZTogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgaWQgPSB0aGlzLmVsZW1lbnQuYXR0ciggXCJpZFwiICksXHJcblx0XHRcdGZpcnN0Rm9jdXMgPSB0aGlzLl91aS5jb250YWluZXIuZmluZCggXCI6Zm9jdXNhYmxlXCIgKS5maXJzdCgpO1xyXG5cclxuXHRcdHRoaXMuX3VpLmNvbnRhaW5lci5hZGRDbGFzcyggXCJ1aS1wb3B1cC1hY3RpdmVcIiApO1xyXG5cdFx0dGhpcy5faXNPcGVuID0gdHJ1ZTtcclxuXHRcdHRoaXMuX3Jlc2l6ZVNjcmVlbigpO1xyXG5cclxuXHRcdC8vIENoZWNrIHRvIHNlZSBpZiBjdXJyRWxlbWVudCBpcyBub3QgYSBjaGlsZCBvZiB0aGUgY29udGFpbmVyLiAgSWYgaXQncyBub3QsIGJsdXJcclxuXHRcdGlmICggISQuY29udGFpbnMoIHRoaXMuX3VpLmNvbnRhaW5lclsgMCBdLCB0aGlzLmRvY3VtZW50WyAwIF0uYWN0aXZlRWxlbWVudCApICkge1xyXG5cdFx0XHR0aGlzLl9zYWZlbHlCbHVyKCB0aGlzLmRvY3VtZW50WyAwIF0uYWN0aXZlRWxlbWVudCApO1xyXG5cdFx0fVxyXG5cdFx0aWYgKCBmaXJzdEZvY3VzLmxlbmd0aCA+IDAgKSB7XHJcblx0XHRcdHRoaXMuX3VpLmZvY3VzRWxlbWVudCA9IGZpcnN0Rm9jdXM7XHJcblx0XHR9XHJcblx0XHR0aGlzLl9pZ25vcmVSZXNpemVFdmVudHMoKTtcclxuXHRcdGlmICggaWQgKSB7XHJcblx0XHRcdHRoaXMuZG9jdW1lbnQuZmluZCggXCJbYXJpYS1oYXNwb3B1cD0ndHJ1ZSddW2FyaWEtb3ducz0nXCIgKyAgaWQgKyBcIiddXCIgKS5hdHRyKCBcImFyaWEtZXhwYW5kZWRcIiwgdHJ1ZSApO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5fdHJpZ2dlciggXCJhZnRlcm9wZW5cIiApO1xyXG5cdH0sXHJcblxyXG5cdF9vcGVuOiBmdW5jdGlvbiggb3B0aW9ucyApIHtcclxuXHRcdHZhciBvcGVuT3B0aW9ucyA9ICQuZXh0ZW5kKCB7fSwgdGhpcy5vcHRpb25zLCBvcHRpb25zICksXHJcblx0XHRcdC8vIFRPRE8gbW92ZSBibGFja2xpc3QgdG8gcHJpdmF0ZSBtZXRob2RcclxuXHRcdFx0YW5kcm9pZEJsYWNrbGlzdCA9ICggZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0dmFyIHVhID0gbmF2aWdhdG9yLnVzZXJBZ2VudCxcclxuXHRcdFx0XHRcdC8vIFJlbmRlcmluZyBlbmdpbmUgaXMgV2Via2l0LCBhbmQgY2FwdHVyZSBtYWpvciB2ZXJzaW9uXHJcblx0XHRcdFx0XHR3a21hdGNoID0gdWEubWF0Y2goIC9BcHBsZVdlYktpdFxcLyhbMC05XFwuXSspLyApLFxyXG5cdFx0XHRcdFx0d2t2ZXJzaW9uID0gISF3a21hdGNoICYmIHdrbWF0Y2hbIDEgXSxcclxuXHRcdFx0XHRcdGFuZHJvaWRtYXRjaCA9IHVhLm1hdGNoKCAvQW5kcm9pZCAoXFxkKyg/OlxcLlxcZCspKS8gKSxcclxuXHRcdFx0XHRcdGFuZHZlcnNpb24gPSAhIWFuZHJvaWRtYXRjaCAmJiBhbmRyb2lkbWF0Y2hbIDEgXSxcclxuXHRcdFx0XHRcdGNocm9tZW1hdGNoID0gdWEuaW5kZXhPZiggXCJDaHJvbWVcIiApID4gLTE7XHJcblxyXG5cdFx0XHRcdC8vIFBsYXRmb3JtIGlzIEFuZHJvaWQsIFdlYktpdCB2ZXJzaW9uIGlzIGdyZWF0ZXIgdGhhbiA1MzQuMTMgKCBBbmRyb2lkIDMuMi4xICkgYW5kIG5vdCBDaHJvbWUuXHJcblx0XHRcdFx0aWYgKCBhbmRyb2lkbWF0Y2ggIT09IG51bGwgJiYgYW5kdmVyc2lvbiA9PT0gXCI0LjBcIiAmJiB3a3ZlcnNpb24gJiYgd2t2ZXJzaW9uID4gNTM0LjEzICYmICFjaHJvbWVtYXRjaCApIHtcclxuXHRcdFx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdH0oKSk7XHJcblxyXG5cdFx0Ly8gQ291bnQgZG93biB0byB0cmlnZ2VyaW5nIFwicG9wdXBhZnRlcm9wZW5cIiAtIHdlIGhhdmUgdHdvIHByZXJlcXVpc2l0ZXM6XHJcblx0XHQvLyAxLiBUaGUgcG9wdXAgd2luZG93IGFuaW1hdGlvbiBjb21wbGV0ZXMgKGNvbnRhaW5lcigpKVxyXG5cdFx0Ly8gMi4gVGhlIHNjcmVlbiBvcGFjaXR5IGFuaW1hdGlvbiBjb21wbGV0ZXMgKHNjcmVlbigpKVxyXG5cdFx0dGhpcy5fY3JlYXRlUHJlcmVxdWlzaXRlcyhcclxuXHRcdFx0JC5ub29wLFxyXG5cdFx0XHQkLm5vb3AsXHJcblx0XHRcdCQucHJveHkoIHRoaXMsIFwiX29wZW5QcmVyZXF1aXNpdGVzQ29tcGxldGVcIiApICk7XHJcblxyXG5cdFx0dGhpcy5fY3VycmVudFRyYW5zaXRpb24gPSBvcGVuT3B0aW9ucy50cmFuc2l0aW9uO1xyXG5cdFx0dGhpcy5fYXBwbHlUcmFuc2l0aW9uKCBvcGVuT3B0aW9ucy50cmFuc2l0aW9uICk7XHJcblxyXG5cdFx0dGhpcy5fdWkuc2NyZWVuLnJlbW92ZUNsYXNzKCBcInVpLXNjcmVlbi1oaWRkZW5cIiApO1xyXG5cdFx0dGhpcy5fdWkuY29udGFpbmVyLnJlbW92ZUNsYXNzKCBcInVpLXBvcHVwLXRydW5jYXRlXCIgKTtcclxuXHJcblx0XHQvLyBHaXZlIGFwcGxpY2F0aW9ucyBhIGNoYW5jZSB0byBtb2RpZnkgdGhlIGNvbnRlbnRzIG9mIHRoZSBjb250YWluZXIgYmVmb3JlIGl0IGFwcGVhcnNcclxuXHRcdHRoaXMuX3JlcG9zaXRpb24oIG9wZW5PcHRpb25zICk7XHJcblxyXG5cdFx0dGhpcy5fdWkuY29udGFpbmVyLnJlbW92ZUNsYXNzKCBcInVpLXBvcHVwLWhpZGRlblwiICk7XHJcblxyXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMub3ZlcmxheVRoZW1lICYmIGFuZHJvaWRCbGFja2xpc3QgKSB7XHJcblx0XHRcdC8qIFRPRE86IFRoZSBuYXRpdmUgYnJvd3NlciBvbiBBbmRyb2lkIDQuMC5YIChcIkljZSBDcmVhbSBTYW5kd2ljaFwiKSBzdWZmZXJzIGZyb20gYW4gaXNzdWUgd2hlcmUgdGhlIHBvcHVwIG92ZXJsYXkgYXBwZWFycyB0byBiZSB6LWluZGV4ZWQgYWJvdmUgdGhlIHBvcHVwIGl0c2VsZiB3aGVuIGNlcnRhaW4gb3RoZXIgc3R5bGVzIGV4aXN0IG9uIHRoZSBzYW1lIHBhZ2UgLS0gbmFtZWx5LCBhbnkgZWxlbWVudCBzZXQgdG8gYHBvc2l0aW9uOiBmaXhlZGAgYW5kIGNlcnRhaW4gdHlwZXMgb2YgaW5wdXQuIFRoZXNlIGlzc3VlcyBhcmUgcmVtaW5pc2NlbnQgb2YgcHJldmlvdXNseSB1bmNvdmVyZWQgYnVncyBpbiBvbGRlciB2ZXJzaW9ucyBvZiBBbmRyb2lkJ3MgbmF0aXZlIGJyb3dzZXI6IGh0dHBzOi8vZ2l0aHViLmNvbS9zY290dGplaGwvRGV2aWNlLUJ1Z3MvaXNzdWVzLzNcclxuXHRcdFx0VGhpcyBmaXggY2xvc2VzIHRoZSBmb2xsb3dpbmcgYnVncyAoIEkgdXNlIFwiY2xvc2VzXCIgd2l0aCByZWx1Y3RhbmNlLCBhbmQgc3RyZXNzIHRoYXQgdGhpcyBpc3N1ZSBzaG91bGQgYmUgcmV2aXNpdGVkIGFzIHNvb24gYXMgcG9zc2libGUgKTpcclxuXHRcdFx0aHR0cHM6Ly9naXRodWIuY29tL2pxdWVyeS9qcXVlcnktbW9iaWxlL2lzc3Vlcy80ODE2XHJcblx0XHRcdGh0dHBzOi8vZ2l0aHViLmNvbS9qcXVlcnkvanF1ZXJ5LW1vYmlsZS9pc3N1ZXMvNDg0NFxyXG5cdFx0XHRodHRwczovL2dpdGh1Yi5jb20vanF1ZXJ5L2pxdWVyeS1tb2JpbGUvaXNzdWVzLzQ4NzRcclxuXHRcdFx0Ki9cclxuXHJcblx0XHRcdC8vIFRPRE8gc29ydCBvdXQgd2h5IHRoaXMuX3BhZ2UgaXNuJ3Qgd29ya2luZ1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQuY2xvc2VzdCggXCIudWktcGFnZVwiICkuYWRkQ2xhc3MoIFwidWktcG9wdXAtb3BlblwiICk7XHJcblx0XHR9XHJcblx0XHR0aGlzLl9hbmltYXRlKHtcclxuXHRcdFx0YWRkaXRpb25hbENvbmRpdGlvbjogdHJ1ZSxcclxuXHRcdFx0dHJhbnNpdGlvbjogb3Blbk9wdGlvbnMudHJhbnNpdGlvbixcclxuXHRcdFx0Y2xhc3NUb1JlbW92ZTogXCJcIixcclxuXHRcdFx0c2NyZWVuQ2xhc3NUb0FkZDogXCJpblwiLFxyXG5cdFx0XHRjb250YWluZXJDbGFzc1RvQWRkOiBcImluXCIsXHJcblx0XHRcdGFwcGx5VHJhbnNpdGlvbjogZmFsc2UsXHJcblx0XHRcdHByZXJlcXVpc2l0ZXM6IHRoaXMuX3ByZXJlcXVpc2l0ZXNcclxuXHRcdH0pO1xyXG5cdH0sXHJcblxyXG5cdF9jbG9zZVByZXJlcXVpc2l0ZVNjcmVlbjogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl91aS5zY3JlZW5cclxuXHRcdFx0LnJlbW92ZUNsYXNzKCBcIm91dFwiIClcclxuXHRcdFx0LmFkZENsYXNzKCBcInVpLXNjcmVlbi1oaWRkZW5cIiApO1xyXG5cdH0sXHJcblxyXG5cdF9jbG9zZVByZXJlcXVpc2l0ZUNvbnRhaW5lcjogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl91aS5jb250YWluZXJcclxuXHRcdFx0LnJlbW92ZUNsYXNzKCBcInJldmVyc2Ugb3V0XCIgKVxyXG5cdFx0XHQuYWRkQ2xhc3MoIFwidWktcG9wdXAtaGlkZGVuIHVpLXBvcHVwLXRydW5jYXRlXCIgKVxyXG5cdFx0XHQucmVtb3ZlQXR0ciggXCJzdHlsZVwiICk7XHJcblx0fSxcclxuXHJcblx0X2Nsb3NlUHJlcmVxdWlzaXRlc0RvbmU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGNvbnRhaW5lciA9IHRoaXMuX3VpLmNvbnRhaW5lcixcclxuXHRcdFx0aWQgPSB0aGlzLmVsZW1lbnQuYXR0ciggXCJpZFwiICk7XHJcblxyXG5cdFx0Ly8gcmVtb3ZlIHRoZSBnbG9iYWwgbXV0ZXggZm9yIHBvcHVwc1xyXG5cdFx0JC5tb2JpbGUucG9wdXAuYWN0aXZlID0gdW5kZWZpbmVkO1xyXG5cclxuXHRcdC8vIEJsdXIgZWxlbWVudHMgaW5zaWRlIHRoZSBjb250YWluZXIsIGluY2x1ZGluZyB0aGUgY29udGFpbmVyXHJcblx0XHQkKCBcIjpmb2N1c1wiLCBjb250YWluZXJbIDAgXSApLmFkZCggY29udGFpbmVyWyAwIF0gKS5ibHVyKCk7XHJcblxyXG5cdFx0aWYgKCBpZCApIHtcclxuXHRcdFx0dGhpcy5kb2N1bWVudC5maW5kKCBcIlthcmlhLWhhc3BvcHVwPSd0cnVlJ11bYXJpYS1vd25zPSdcIiArICBpZCArIFwiJ11cIiApLmF0dHIoIFwiYXJpYS1leHBhbmRlZFwiLCBmYWxzZSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIGFsZXJ0IHVzZXJzIHRoYXQgdGhlIHBvcHVwIGlzIGNsb3NlZFxyXG5cdFx0dGhpcy5fdHJpZ2dlciggXCJhZnRlcmNsb3NlXCIgKTtcclxuXHR9LFxyXG5cclxuXHRfY2xvc2U6IGZ1bmN0aW9uKCBpbW1lZGlhdGUgKSB7XHJcblx0XHR0aGlzLl91aS5jb250YWluZXIucmVtb3ZlQ2xhc3MoIFwidWktcG9wdXAtYWN0aXZlXCIgKTtcclxuXHRcdHRoaXMuX3BhZ2UucmVtb3ZlQ2xhc3MoIFwidWktcG9wdXAtb3BlblwiICk7XHJcblxyXG5cdFx0dGhpcy5faXNPcGVuID0gZmFsc2U7XHJcblxyXG5cdFx0Ly8gQ291bnQgZG93biB0byB0cmlnZ2VyaW5nIFwicG9wdXBhZnRlcmNsb3NlXCIgLSB3ZSBoYXZlIHR3byBwcmVyZXF1aXNpdGVzOlxyXG5cdFx0Ly8gMS4gVGhlIHBvcHVwIHdpbmRvdyByZXZlcnNlIGFuaW1hdGlvbiBjb21wbGV0ZXMgKGNvbnRhaW5lcigpKVxyXG5cdFx0Ly8gMi4gVGhlIHNjcmVlbiBvcGFjaXR5IGFuaW1hdGlvbiBjb21wbGV0ZXMgKHNjcmVlbigpKVxyXG5cdFx0dGhpcy5fY3JlYXRlUHJlcmVxdWlzaXRlcyhcclxuXHRcdFx0JC5wcm94eSggdGhpcywgXCJfY2xvc2VQcmVyZXF1aXNpdGVTY3JlZW5cIiApLFxyXG5cdFx0XHQkLnByb3h5KCB0aGlzLCBcIl9jbG9zZVByZXJlcXVpc2l0ZUNvbnRhaW5lclwiICksXHJcblx0XHRcdCQucHJveHkoIHRoaXMsIFwiX2Nsb3NlUHJlcmVxdWlzaXRlc0RvbmVcIiApICk7XHJcblxyXG5cdFx0dGhpcy5fYW5pbWF0ZSgge1xyXG5cdFx0XHRhZGRpdGlvbmFsQ29uZGl0aW9uOiB0aGlzLl91aS5zY3JlZW4uaGFzQ2xhc3MoIFwiaW5cIiApLFxyXG5cdFx0XHR0cmFuc2l0aW9uOiAoIGltbWVkaWF0ZSA/IFwibm9uZVwiIDogKCB0aGlzLl9jdXJyZW50VHJhbnNpdGlvbiApICksXHJcblx0XHRcdGNsYXNzVG9SZW1vdmU6IFwiaW5cIixcclxuXHRcdFx0c2NyZWVuQ2xhc3NUb0FkZDogXCJvdXRcIixcclxuXHRcdFx0Y29udGFpbmVyQ2xhc3NUb0FkZDogXCJyZXZlcnNlIG91dFwiLFxyXG5cdFx0XHRhcHBseVRyYW5zaXRpb246IHRydWUsXHJcblx0XHRcdHByZXJlcXVpc2l0ZXM6IHRoaXMuX3ByZXJlcXVpc2l0ZXNcclxuXHRcdH0pO1xyXG5cdH0sXHJcblxyXG5cdF91bmVuaGFuY2U6IGZ1bmN0aW9uKCkge1xyXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMuZW5oYW5jZWQgKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBQdXQgdGhlIGVsZW1lbnQgYmFjayB0byB3aGVyZSB0aGUgcGxhY2Vob2xkZXIgd2FzIGFuZCByZW1vdmUgdGhlIFwidWktcG9wdXBcIiBjbGFzc1xyXG5cdFx0dGhpcy5fc2V0T3B0aW9ucyggeyB0aGVtZTogJC5tb2JpbGUucG9wdXAucHJvdG90eXBlLm9wdGlvbnMudGhlbWUgfSApO1xyXG5cdFx0dGhpcy5lbGVtZW50XHJcblx0XHRcdC8vIENhbm5vdCBkaXJlY3RseSBpbnNlcnRBZnRlcigpIC0gd2UgbmVlZCB0byBkZXRhY2goKSBmaXJzdCwgYmVjYXVzZVxyXG5cdFx0XHQvLyBpbnNlcnRBZnRlcigpIHdpbGwgZG8gbm90aGluZyBpZiB0aGUgcGF5bG9hZCBkaXYgd2FzIG5vdCBhdHRhY2hlZFxyXG5cdFx0XHQvLyB0byB0aGUgRE9NIGF0IHRoZSB0aW1lIHRoZSB3aWRnZXQgd2FzIGNyZWF0ZWQsIGFuZCBzbyB0aGUgcGF5bG9hZFxyXG5cdFx0XHQvLyB3aWxsIHJlbWFpbiBpbnNpZGUgdGhlIGNvbnRhaW5lciBldmVuIGFmdGVyIHdlIGNhbGwgaW5zZXJ0QWZ0ZXIoKS5cclxuXHRcdFx0Ly8gSWYgdGhhdCBoYXBwZW5zIGFuZCB3ZSByZW1vdmUgdGhlIGNvbnRhaW5lciBhIGZldyBsaW5lcyBiZWxvdywgd2VcclxuXHRcdFx0Ly8gd2lsbCBjYXVzZSBhbiBpbmZpbml0ZSByZWN1cnNpb24gLSAjNTI0NFxyXG5cdFx0XHQuZGV0YWNoKClcclxuXHRcdFx0Lmluc2VydEFmdGVyKCB0aGlzLl91aS5wbGFjZWhvbGRlciApXHJcblx0XHRcdC5yZW1vdmVDbGFzcyggXCJ1aS1wb3B1cCB1aS1vdmVybGF5LXNoYWRvdyB1aS1jb3JuZXItYWxsIHVpLWJvZHktaW5oZXJpdFwiICk7XHJcblx0XHR0aGlzLl91aS5zY3JlZW4ucmVtb3ZlKCk7XHJcblx0XHR0aGlzLl91aS5jb250YWluZXIucmVtb3ZlKCk7XHJcblx0XHR0aGlzLl91aS5wbGFjZWhvbGRlci5yZW1vdmUoKTtcclxuXHR9LFxyXG5cclxuXHRfZGVzdHJveTogZnVuY3Rpb24oKSB7XHJcblx0XHRpZiAoICQubW9iaWxlLnBvcHVwLmFjdGl2ZSA9PT0gdGhpcyApIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50Lm9uZSggXCJwb3B1cGFmdGVyY2xvc2VcIiwgJC5wcm94eSggdGhpcywgXCJfdW5lbmhhbmNlXCIgKSApO1xyXG5cdFx0XHR0aGlzLmNsb3NlKCk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLl91bmVuaGFuY2UoKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9LFxyXG5cclxuXHRfY2xvc2VQb3B1cDogZnVuY3Rpb24oIHRoZUV2ZW50LCBkYXRhICkge1xyXG5cdFx0dmFyIHBhcnNlZERzdCwgdG9VcmwsXHJcblx0XHRcdGN1cnJlbnRPcHRpb25zID0gdGhpcy5vcHRpb25zLFxyXG5cdFx0XHRpbW1lZGlhdGUgPSBmYWxzZTtcclxuXHJcblx0XHRpZiAoICggdGhlRXZlbnQgJiYgdGhlRXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkgKSB8fCAkLm1vYmlsZS5wb3B1cC5hY3RpdmUgIT09IHRoaXMgKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHQvLyByZXN0b3JlIGxvY2F0aW9uIG9uIHNjcmVlblxyXG5cdFx0d2luZG93LnNjcm9sbFRvKCAwLCB0aGlzLl9zY3JvbGxUb3AgKTtcclxuXHJcblx0XHRpZiAoIHRoZUV2ZW50ICYmIHRoZUV2ZW50LnR5cGUgPT09IFwicGFnZWJlZm9yZWNoYW5nZVwiICYmIGRhdGEgKSB7XHJcblx0XHRcdC8vIERldGVybWluZSB3aGV0aGVyIHdlIG5lZWQgdG8gcmFwaWQtY2xvc2UgdGhlIHBvcHVwLCBvciB3aGV0aGVyIHdlIGNhblxyXG5cdFx0XHQvLyB0YWtlIHRoZSB0aW1lIHRvIHJ1biB0aGUgY2xvc2luZyB0cmFuc2l0aW9uXHJcblx0XHRcdGlmICggdHlwZW9mIGRhdGEudG9QYWdlID09PSBcInN0cmluZ1wiICkge1xyXG5cdFx0XHRcdHBhcnNlZERzdCA9IGRhdGEudG9QYWdlO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHBhcnNlZERzdCA9IGRhdGEudG9QYWdlLmpxbURhdGEoIFwidXJsXCIgKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRwYXJzZWREc3QgPSAkLm1vYmlsZS5wYXRoLnBhcnNlVXJsKCBwYXJzZWREc3QgKTtcclxuXHRcdFx0dG9VcmwgPSBwYXJzZWREc3QucGF0aG5hbWUgKyBwYXJzZWREc3Quc2VhcmNoICsgcGFyc2VkRHN0Lmhhc2g7XHJcblxyXG5cdFx0XHRpZiAoIHRoaXMuX215VXJsICE9PSAkLm1vYmlsZS5wYXRoLm1ha2VVcmxBYnNvbHV0ZSggdG9VcmwgKSApIHtcclxuXHRcdFx0XHQvLyBHb2luZyB0byBhIGRpZmZlcmVudCBwYWdlIC0gY2xvc2UgaW1tZWRpYXRlbHlcclxuXHRcdFx0XHRpbW1lZGlhdGUgPSB0cnVlO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHRoZUV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHQvLyByZW1vdmUgbmF2IGJpbmRpbmdzXHJcblx0XHR0aGlzLndpbmRvdy5vZmYoIGN1cnJlbnRPcHRpb25zLmNsb3NlRXZlbnRzICk7XHJcblx0XHQvLyB1bmJpbmQgY2xpY2sgaGFuZGxlcnMgYWRkZWQgd2hlbiBoaXN0b3J5IGlzIGRpc2FibGVkXHJcblx0XHR0aGlzLmVsZW1lbnQudW5kZWxlZ2F0ZSggY3VycmVudE9wdGlvbnMuY2xvc2VMaW5rU2VsZWN0b3IsIGN1cnJlbnRPcHRpb25zLmNsb3NlTGlua0V2ZW50cyApO1xyXG5cclxuXHRcdHRoaXMuX2Nsb3NlKCBpbW1lZGlhdGUgKTtcclxuXHR9LFxyXG5cclxuXHQvLyBhbnkgbmF2aWdhdGlvbiBldmVudCBhZnRlciBhIHBvcHVwIGlzIG9wZW5lZCBzaG91bGQgY2xvc2UgdGhlIHBvcHVwXHJcblx0Ly8gTk9URSB0aGUgcGFnZWJlZm9yZWNoYW5nZSBpcyBib3VuZCB0byBjYXRjaCBuYXZpZ2F0aW9uIGV2ZW50cyB0aGF0IGRvbid0XHJcblx0Ly8gICAgICBhbHRlciB0aGUgdXJsIChlZywgZGlhbG9ncyBmcm9tIHBvcHVwcylcclxuXHRfYmluZENvbnRhaW5lckNsb3NlOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMud2luZG93XHJcblx0XHRcdC5vbiggdGhpcy5vcHRpb25zLmNsb3NlRXZlbnRzLCAkLnByb3h5KCB0aGlzLCBcIl9jbG9zZVBvcHVwXCIgKSApO1xyXG5cdH0sXHJcblxyXG5cdHdpZGdldDogZnVuY3Rpb24oKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5fdWkuY29udGFpbmVyO1xyXG5cdH0sXHJcblxyXG5cdC8vIFRPRE8gbm8gY2xlYXIgZGVsaW5pYXRpb24gb2Ygd2hhdCBzaG91bGQgYmUgaGVyZSBhbmRcclxuXHQvLyB3aGF0IHNob3VsZCBiZSBpbiBfb3Blbi4gU2VlbXMgdG8gYmUgXCJ2aXN1YWxcIiB2cyBcImhpc3RvcnlcIiBmb3Igbm93XHJcblx0b3BlbjogZnVuY3Rpb24oIG9wdGlvbnMgKSB7XHJcblx0XHR2YXIgdXJsLCBoYXNoa2V5LCBhY3RpdmVQYWdlLCBjdXJyZW50SXNEaWFsb2csIGhhc0hhc2gsIHVybEhpc3RvcnksXHJcblx0XHRcdHNlbGYgPSB0aGlzLFxyXG5cdFx0XHRjdXJyZW50T3B0aW9ucyA9IHRoaXMub3B0aW9ucztcclxuXHJcblx0XHQvLyBtYWtlIHN1cmUgb3BlbiBpcyBpZGVtcG90ZW50XHJcblx0XHRpZiAoICQubW9iaWxlLnBvcHVwLmFjdGl2ZSB8fCBjdXJyZW50T3B0aW9ucy5kaXNhYmxlZCApIHtcclxuXHRcdFx0cmV0dXJuIHRoaXM7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gc2V0IHRoZSBnbG9iYWwgcG9wdXAgbXV0ZXhcclxuXHRcdCQubW9iaWxlLnBvcHVwLmFjdGl2ZSA9IHRoaXM7XHJcblx0XHR0aGlzLl9zY3JvbGxUb3AgPSB0aGlzLndpbmRvdy5zY3JvbGxUb3AoKTtcclxuXHJcblx0XHQvLyBpZiBoaXN0b3J5IGFsdGVyYXRpb24gaXMgZGlzYWJsZWQgY2xvc2Ugb24gbmF2aWdhdGUgZXZlbnRzXHJcblx0XHQvLyBhbmQgbGVhdmUgdGhlIHVybCBhcyBpc1xyXG5cdFx0aWYgKCAhKCBjdXJyZW50T3B0aW9ucy5oaXN0b3J5ICkgKSB7XHJcblx0XHRcdHNlbGYuX29wZW4oIG9wdGlvbnMgKTtcclxuXHRcdFx0c2VsZi5fYmluZENvbnRhaW5lckNsb3NlKCk7XHJcblxyXG5cdFx0XHQvLyBXaGVuIGhpc3RveSBpcyBkaXNhYmxlZCB3ZSBoYXZlIHRvIGdyYWIgdGhlIGRhdGEtcmVsXHJcblx0XHRcdC8vIGJhY2sgbGluayBjbGlja3Mgc28gd2UgY2FuIGNsb3NlIHRoZSBwb3B1cCBpbnN0ZWFkIG9mXHJcblx0XHRcdC8vIHJlbHlpbmcgb24gaGlzdG9yeSB0byBkbyBpdCBmb3IgdXNcclxuXHRcdFx0c2VsZi5lbGVtZW50XHJcblx0XHRcdFx0LmRlbGVnYXRlKCBjdXJyZW50T3B0aW9ucy5jbG9zZUxpbmtTZWxlY3RvciwgY3VycmVudE9wdGlvbnMuY2xvc2VMaW5rRXZlbnRzLCBmdW5jdGlvbiggdGhlRXZlbnQgKSB7XHJcblx0XHRcdFx0XHRzZWxmLmNsb3NlKCk7XHJcblx0XHRcdFx0XHR0aGVFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRcdH0pO1xyXG5cclxuXHRcdFx0cmV0dXJuIHRoaXM7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gY2FjaGUgc29tZSB2YWx1ZXMgZm9yIG1pbi9yZWFkYWJpbGl0eVxyXG5cdFx0dXJsSGlzdG9yeSA9ICQubW9iaWxlLm5hdmlnYXRlLmhpc3Rvcnk7XHJcblx0XHRoYXNoa2V5ID0gJC5tb2JpbGUuZGlhbG9nSGFzaEtleTtcclxuXHRcdGFjdGl2ZVBhZ2UgPSAkLm1vYmlsZS5hY3RpdmVQYWdlO1xyXG5cdFx0Y3VycmVudElzRGlhbG9nID0gKCBhY3RpdmVQYWdlID8gYWN0aXZlUGFnZS5oYXNDbGFzcyggXCJ1aS1kaWFsb2dcIiApIDogZmFsc2UgKTtcclxuXHRcdHRoaXMuX215VXJsID0gdXJsID0gdXJsSGlzdG9yeS5nZXRBY3RpdmUoKS51cmw7XHJcblx0XHRoYXNIYXNoID0gKCB1cmwuaW5kZXhPZiggaGFzaGtleSApID4gLTEgKSAmJiAhY3VycmVudElzRGlhbG9nICYmICggdXJsSGlzdG9yeS5hY3RpdmVJbmRleCA+IDAgKTtcclxuXHJcblx0XHRpZiAoIGhhc0hhc2ggKSB7XHJcblx0XHRcdHNlbGYuX29wZW4oIG9wdGlvbnMgKTtcclxuXHRcdFx0c2VsZi5fYmluZENvbnRhaW5lckNsb3NlKCk7XHJcblx0XHRcdHJldHVybiB0aGlzO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIGlmIHRoZSBjdXJyZW50IHVybCBoYXMgbm8gZGlhbG9nIGhhc2gga2V5IHByb2NlZWQgYXMgbm9ybWFsXHJcblx0XHQvLyBvdGhlcndpc2UsIGlmIHRoZSBwYWdlIGlzIGEgZGlhbG9nIHNpbXBseSB0YWNrIG9uIHRoZSBoYXNoIGtleVxyXG5cdFx0aWYgKCB1cmwuaW5kZXhPZiggaGFzaGtleSApID09PSAtMSAmJiAhY3VycmVudElzRGlhbG9nICkge1xyXG5cdFx0XHR1cmwgPSB1cmwgKyAodXJsLmluZGV4T2YoIFwiI1wiICkgPiAtMSA/IGhhc2hrZXkgOiBcIiNcIiArIGhhc2hrZXkpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dXJsID0gJC5tb2JpbGUucGF0aC5wYXJzZUxvY2F0aW9uKCkuaGFzaCArIGhhc2hrZXk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gc3dhbGxvdyB0aGUgdGhlIGluaXRpYWwgbmF2aWdhdGlvbiBldmVudCwgYW5kIGJpbmQgZm9yIHRoZSBuZXh0XHJcblx0XHR0aGlzLndpbmRvdy5vbmUoIFwiYmVmb3JlbmF2aWdhdGVcIiwgZnVuY3Rpb24oIHRoZUV2ZW50ICkge1xyXG5cdFx0XHR0aGVFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRzZWxmLl9vcGVuKCBvcHRpb25zICk7XHJcblx0XHRcdHNlbGYuX2JpbmRDb250YWluZXJDbG9zZSgpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy51cmxBbHRlcmVkID0gdHJ1ZTtcclxuXHRcdCQubW9iaWxlLm5hdmlnYXRlKCB1cmwsIHsgcm9sZTogXCJkaWFsb2dcIiB9ICk7XHJcblxyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fSxcclxuXHJcblx0Y2xvc2U6IGZ1bmN0aW9uKCkge1xyXG5cdFx0Ly8gbWFrZSBzdXJlIGNsb3NlIGlzIGlkZW1wb3RlbnRcclxuXHRcdGlmICggJC5tb2JpbGUucG9wdXAuYWN0aXZlICE9PSB0aGlzICkge1xyXG5cdFx0XHRyZXR1cm4gdGhpcztcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl9zY3JvbGxUb3AgPSB0aGlzLndpbmRvdy5zY3JvbGxUb3AoKTtcclxuXHJcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5oaXN0b3J5ICYmIHRoaXMudXJsQWx0ZXJlZCApIHtcclxuXHRcdFx0JC5tb2JpbGUuYmFjaygpO1xyXG5cdFx0XHR0aGlzLnVybEFsdGVyZWQgPSBmYWxzZTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdC8vIHNpbXVsYXRlIHRoZSBuYXYgYmluZGluZ3MgaGF2aW5nIGZpcmVkXHJcblx0XHRcdHRoaXMuX2Nsb3NlUG9wdXAoKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9XHJcbn0pO1xyXG5cclxuLy8gVE9ETyB0aGlzIGNhbiBiZSBtb3ZlZCBpbnNpZGUgdGhlIHdpZGdldFxyXG4kLm1vYmlsZS5wb3B1cC5oYW5kbGVMaW5rID0gZnVuY3Rpb24oICRsaW5rICkge1xyXG5cdHZhciBvZmZzZXQsXHJcblx0XHRwYXRoID0gJC5tb2JpbGUucGF0aCxcclxuXHJcblx0XHQvLyBOT1RFIG1ha2Ugc3VyZSB0byBnZXQgb25seSB0aGUgaGFzaCBmcm9tIHRoZSBocmVmIGJlY2F1c2UgaWU3ICh3cDcpXHJcblx0XHQvLyAgICAgIHJldHVybnMgdGhlIGFic29sdXRlIGhyZWYgaW4gdGhpcyBjYXNlIHJ1aW5pbmcgdGhlIGVsZW1lbnQgc2VsZWN0aW9uXHJcblx0XHRwb3B1cCA9ICQoIHBhdGguaGFzaFRvU2VsZWN0b3IoIHBhdGgucGFyc2VVcmwoICRsaW5rLmF0dHIoIFwiaHJlZlwiICkgKS5oYXNoICkgKS5maXJzdCgpO1xyXG5cclxuXHRpZiAoIHBvcHVwLmxlbmd0aCA+IDAgJiYgcG9wdXAuZGF0YSggXCJtb2JpbGUtcG9wdXBcIiApICkge1xyXG5cdFx0b2Zmc2V0ID0gJGxpbmsub2Zmc2V0KCk7XHJcblx0XHRwb3B1cC5wb3B1cCggXCJvcGVuXCIsIHtcclxuXHRcdFx0eDogb2Zmc2V0LmxlZnQgKyAkbGluay5vdXRlcldpZHRoKCkgLyAyLFxyXG5cdFx0XHR5OiBvZmZzZXQudG9wICsgJGxpbmsub3V0ZXJIZWlnaHQoKSAvIDIsXHJcblx0XHRcdHRyYW5zaXRpb246ICRsaW5rLmpxbURhdGEoIFwidHJhbnNpdGlvblwiICksXHJcblx0XHRcdHBvc2l0aW9uVG86ICRsaW5rLmpxbURhdGEoIFwicG9zaXRpb24tdG9cIiApXHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdC8vcmVtb3ZlIGFmdGVyIGRlbGF5XHJcblx0c2V0VGltZW91dCggZnVuY3Rpb24oKSB7XHJcblx0XHQkbGluay5yZW1vdmVDbGFzcyggJC5tb2JpbGUuYWN0aXZlQnRuQ2xhc3MgKTtcclxuXHR9LCAzMDAgKTtcclxufTtcclxuXHJcbi8vIFRPRE8gbW92ZSBpbnNpZGUgX2NyZWF0ZVxyXG4kLm1vYmlsZS5kb2N1bWVudC5vbiggXCJwYWdlYmVmb3JlY2hhbmdlXCIsIGZ1bmN0aW9uKCB0aGVFdmVudCwgZGF0YSApIHtcclxuXHRpZiAoIGRhdGEub3B0aW9ucy5yb2xlID09PSBcInBvcHVwXCIgKSB7XHJcblx0XHQkLm1vYmlsZS5wb3B1cC5oYW5kbGVMaW5rKCBkYXRhLm9wdGlvbnMubGluayApO1xyXG5cdFx0dGhlRXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHR9XHJcbn0pO1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuLypcclxuKiBjdXN0b20gXCJzZWxlY3RtZW51XCIgcGx1Z2luXHJcbiovXHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcbnZhciB1bmZvY3VzYWJsZUl0ZW1TZWxlY3RvciA9IFwiLnVpLWRpc2FibGVkLC51aS1zdGF0ZS1kaXNhYmxlZCwudWktbGktZGl2aWRlciwudWktc2NyZWVuLWhpZGRlbiw6anFtRGF0YShyb2xlPSdwbGFjZWhvbGRlcicpXCIsXHJcblx0Z29Ub0FkamFjZW50SXRlbSA9IGZ1bmN0aW9uKCBpdGVtLCB0YXJnZXQsIGRpcmVjdGlvbiApIHtcclxuXHRcdHZhciBhZGphY2VudCA9IGl0ZW1bIGRpcmVjdGlvbiArIFwiQWxsXCIgXSgpXHJcblx0XHRcdC5ub3QoIHVuZm9jdXNhYmxlSXRlbVNlbGVjdG9yIClcclxuXHRcdFx0LmZpcnN0KCk7XHJcblxyXG5cdFx0Ly8gaWYgdGhlcmUncyBhIHByZXZpb3VzIG9wdGlvbiwgZm9jdXMgaXRcclxuXHRcdGlmICggYWRqYWNlbnQubGVuZ3RoICkge1xyXG5cdFx0XHR0YXJnZXRcclxuXHRcdFx0XHQuYmx1cigpXHJcblx0XHRcdFx0LmF0dHIoIFwidGFiaW5kZXhcIiwgXCItMVwiICk7XHJcblxyXG5cdFx0XHRhZGphY2VudC5maW5kKCBcImFcIiApLmZpcnN0KCkuZm9jdXMoKTtcclxuXHRcdH1cclxuXHR9O1xyXG5cclxuJC53aWRnZXQoIFwibW9iaWxlLnNlbGVjdG1lbnVcIiwgJC5tb2JpbGUuc2VsZWN0bWVudSwge1xyXG5cdF9jcmVhdGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIG8gPSB0aGlzLm9wdGlvbnM7XHJcblxyXG5cdFx0Ly8gQ3VzdG9tIHNlbGVjdHMgY2Fubm90IGV4aXN0IGluc2lkZSBwb3B1cHMsIHNvIHJldmVydCB0aGUgXCJuYXRpdmVNZW51XCJcclxuXHRcdC8vIG9wdGlvbiB0byB0cnVlIGlmIGEgcGFyZW50IGlzIGEgcG9wdXBcclxuXHRcdG8ubmF0aXZlTWVudSA9IG8ubmF0aXZlTWVudSB8fCAoIHRoaXMuZWxlbWVudC5wYXJlbnRzKCBcIjpqcW1EYXRhKHJvbGU9J3BvcHVwJyksOm1vYmlsZS1wb3B1cFwiICkubGVuZ3RoID4gMCApO1xyXG5cclxuXHRcdHJldHVybiB0aGlzLl9zdXBlcigpO1xyXG5cdH0sXHJcblxyXG5cdF9oYW5kbGVTZWxlY3RGb2N1czogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLmVsZW1lbnQuYmx1cigpO1xyXG5cdFx0dGhpcy5idXR0b24uZm9jdXMoKTtcclxuXHR9LFxyXG5cclxuXHRfaGFuZGxlS2V5ZG93bjogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0dGhpcy5fc3VwZXIoIGV2ZW50ICk7XHJcblx0XHR0aGlzLl9oYW5kbGVCdXR0b25WY2xpY2tLZXlkb3duKCBldmVudCApO1xyXG5cdH0sXHJcblxyXG5cdF9oYW5kbGVCdXR0b25WY2xpY2tLZXlkb3duOiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5kaXNhYmxlZCB8fCB0aGlzLmlzT3BlbiB8fCB0aGlzLm9wdGlvbnMubmF0aXZlTWVudSApIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmIChldmVudC50eXBlID09PSBcInZjbGlja1wiIHx8XHJcblx0XHRcdFx0ZXZlbnQua2V5Q29kZSAmJiAoZXZlbnQua2V5Q29kZSA9PT0gJC5tb2JpbGUua2V5Q29kZS5FTlRFUiB8fCBldmVudC5rZXlDb2RlID09PSAkLm1vYmlsZS5rZXlDb2RlLlNQQUNFKSkge1xyXG5cclxuXHRcdFx0dGhpcy5fZGVjaWRlRm9ybWF0KCk7XHJcblx0XHRcdGlmICggdGhpcy5tZW51VHlwZSA9PT0gXCJvdmVybGF5XCIgKSB7XHJcblx0XHRcdFx0dGhpcy5idXR0b24uYXR0ciggXCJocmVmXCIsIFwiI1wiICsgdGhpcy5wb3B1cElkICkuYXR0ciggXCJkYXRhLVwiICsgKCAkLm1vYmlsZS5ucyB8fCBcIlwiICkgKyBcInJlbFwiLCBcInBvcHVwXCIgKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHR0aGlzLmJ1dHRvbi5hdHRyKCBcImhyZWZcIiwgXCIjXCIgKyB0aGlzLmRpYWxvZ0lkICkuYXR0ciggXCJkYXRhLVwiICsgKCAkLm1vYmlsZS5ucyB8fCBcIlwiICkgKyBcInJlbFwiLCBcImRpYWxvZ1wiICk7XHJcblx0XHRcdH1cclxuXHRcdFx0dGhpcy5pc09wZW4gPSB0cnVlO1xyXG5cdFx0XHQvLyBEbyBub3QgcHJldmVudCBkZWZhdWx0LCBzbyB0aGUgbmF2aWdhdGlvbiBtYXkgaGF2ZSBhIGNoYW5jZSB0byBhY3R1YWxseSBvcGVuIHRoZSBjaG9zZW4gZm9ybWF0XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X2hhbmRsZUxpc3RGb2N1czogZnVuY3Rpb24oIGUgKSB7XHJcblx0XHR2YXIgcGFyYW1zID0gKCBlLnR5cGUgPT09IFwiZm9jdXNpblwiICkgP1xyXG5cdFx0XHR7IHRhYmluZGV4OiBcIjBcIiwgZXZlbnQ6IFwidm1vdXNlb3ZlclwiIH06XHJcblx0XHRcdHsgdGFiaW5kZXg6IFwiLTFcIiwgZXZlbnQ6IFwidm1vdXNlb3V0XCIgfTtcclxuXHJcblx0XHQkKCBlLnRhcmdldCApXHJcblx0XHRcdC5hdHRyKCBcInRhYmluZGV4XCIsIHBhcmFtcy50YWJpbmRleCApXHJcblx0XHRcdC50cmlnZ2VyKCBwYXJhbXMuZXZlbnQgKTtcclxuXHR9LFxyXG5cclxuXHRfaGFuZGxlTGlzdEtleWRvd246IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdHZhciB0YXJnZXQgPSAkKCBldmVudC50YXJnZXQgKSxcclxuXHRcdFx0bGkgPSB0YXJnZXQuY2xvc2VzdCggXCJsaVwiICk7XHJcblxyXG5cdFx0Ly8gc3dpdGNoIGxvZ2ljIGJhc2VkIG9uIHdoaWNoIGtleSB3YXMgcHJlc3NlZFxyXG5cdFx0c3dpdGNoICggZXZlbnQua2V5Q29kZSApIHtcclxuXHRcdFx0Ly8gdXAgb3IgbGVmdCBhcnJvdyBrZXlzXHJcblx0XHRjYXNlIDM4OlxyXG5cdFx0XHRnb1RvQWRqYWNlbnRJdGVtKCBsaSwgdGFyZ2V0LCBcInByZXZcIiApO1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHRcdC8vIGRvd24gb3IgcmlnaHQgYXJyb3cga2V5c1xyXG5cdFx0Y2FzZSA0MDpcclxuXHRcdFx0Z29Ub0FkamFjZW50SXRlbSggbGksIHRhcmdldCwgXCJuZXh0XCIgKTtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHQvLyBJZiBlbnRlciBvciBzcGFjZSBpcyBwcmVzc2VkLCB0cmlnZ2VyIGNsaWNrXHJcblx0XHRjYXNlIDEzOlxyXG5cdFx0Y2FzZSAzMjpcclxuXHRcdFx0dGFyZ2V0LnRyaWdnZXIoIFwiY2xpY2tcIiApO1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X2hhbmRsZU1lbnVQYWdlSGlkZTogZnVuY3Rpb24oKSB7XHJcblxyXG5cdFx0Ly8gQWZ0ZXIgdGhlIGRpYWxvZydzIGRvbmUsIHdlIG1heSB3YW50IHRvIHRyaWdnZXIgY2hhbmdlIGlmIHRoZSB2YWx1ZSBoYXMgYWN0dWFsbHkgY2hhbmdlZFxyXG5cdFx0dGhpcy5fZGVsYXllZFRyaWdnZXIoKTtcclxuXHJcblx0XHQvLyBUT0RPIGNlbnRyYWxpemUgcGFnZSByZW1vdmFsIGJpbmRpbmcgLyBoYW5kbGluZyBpbiB0aGUgcGFnZSBwbHVnaW4uXHJcblx0XHQvLyBTdWdnZXN0aW9uIGZyb20gQGpibGFzIHRvIGRvIHJlZmNvdW50aW5nXHJcblx0XHQvL1xyXG5cdFx0Ly8gVE9ETyBleHRyZW1lbHkgY29uZnVzaW5nIGRlcGVuZGVuY3kgb24gdGhlIG9wZW4gbWV0aG9kIHdoZXJlIHRoZSBwYWdlaGlkZS5yZW1vdmVcclxuXHRcdC8vIGJpbmRpbmdzIGFyZSBzdHJpcHBlZCB0byBwcmV2ZW50IHRoZSBwYXJlbnQgcGFnZSBmcm9tIGRpc2FwcGVhcmluZy4gVGhlIHdheVxyXG5cdFx0Ly8gd2UncmUga2VlcGluZyBwYWdlcyBpbiB0aGUgRE9NIHJpZ2h0IG5vdyBzdWNrc1xyXG5cdFx0Ly9cclxuXHRcdC8vIHJlYmluZCB0aGUgcGFnZSByZW1vdmUgdGhhdCB3YXMgdW5ib3VuZCBpbiB0aGUgb3BlbiBmdW5jdGlvblxyXG5cdFx0Ly8gdG8gYWxsb3cgZm9yIHRoZSBwYXJlbnQgcGFnZSByZW1vdmFsIGZyb20gYWN0aW9ucyBvdGhlciB0aGFuIHRoZSB1c2VcclxuXHRcdC8vIG9mIGEgZGlhbG9nIHNpemVkIGN1c3RvbSBzZWxlY3RcclxuXHRcdC8vXHJcblx0XHQvLyBkb2luZyB0aGlzIGhlcmUgcHJvdmlkZXMgZm9yIHRoZSBiYWNrIGJ1dHRvbiBvbiB0aGUgY3VzdG9tIHNlbGVjdCBkaWFsb2dcclxuXHRcdHRoaXMudGhpc1BhZ2UucGFnZSggXCJiaW5kUmVtb3ZlXCIgKTtcclxuXHR9LFxyXG5cclxuXHRfaGFuZGxlSGVhZGVyQ2xvc2VDbGljazogZnVuY3Rpb24oKSB7XHJcblx0XHRpZiAoIHRoaXMubWVudVR5cGUgPT09IFwib3ZlcmxheVwiICkge1xyXG5cdFx0XHR0aGlzLmNsb3NlKCk7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfaGFuZGxlTGlzdEl0ZW1DbGljazogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0dmFyIGxpc3RJdGVtID0gJCggZXZlbnQudGFyZ2V0ICkuY2xvc2VzdCggXCJsaVwiICksXHJcblxyXG5cdFx0XHQvLyBJbmRleCBvZiBvcHRpb24gdGFnIHRvIGJlIHNlbGVjdGVkXHJcblx0XHRcdG9sZEluZGV4ID0gdGhpcy5zZWxlY3RbIDAgXS5zZWxlY3RlZEluZGV4LFxyXG5cdFx0XHRuZXdJbmRleCA9ICQubW9iaWxlLmdldEF0dHJpYnV0ZSggbGlzdEl0ZW0sIFwib3B0aW9uLWluZGV4XCIgKSxcclxuXHRcdFx0b3B0aW9uID0gdGhpcy5fc2VsZWN0T3B0aW9ucygpLmVxKCBuZXdJbmRleCApWyAwIF07XHJcblxyXG5cdFx0Ly8gVG9nZ2xlIHNlbGVjdGVkIHN0YXR1cyBvbiB0aGUgdGFnIGZvciBtdWx0aSBzZWxlY3RzXHJcblx0XHRvcHRpb24uc2VsZWN0ZWQgPSB0aGlzLmlzTXVsdGlwbGUgPyAhb3B0aW9uLnNlbGVjdGVkIDogdHJ1ZTtcclxuXHJcblx0XHQvLyBUb2dnbGUgY2hlY2tib3ggY2xhc3MgZm9yIG11bHRpcGxlIHNlbGVjdHNcclxuXHRcdGlmICggdGhpcy5pc011bHRpcGxlICkge1xyXG5cdFx0XHRsaXN0SXRlbS5maW5kKCBcImFcIiApXHJcblx0XHRcdFx0LnRvZ2dsZUNsYXNzKCBcInVpLWNoZWNrYm94LW9uXCIsIG9wdGlvbi5zZWxlY3RlZCApXHJcblx0XHRcdFx0LnRvZ2dsZUNsYXNzKCBcInVpLWNoZWNrYm94LW9mZlwiLCAhb3B0aW9uLnNlbGVjdGVkICk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gSWYgaXQncyBub3QgYSBtdWx0aXBsZSBzZWxlY3QsIHRyaWdnZXIgY2hhbmdlIGFmdGVyIGl0IGhhcyBmaW5pc2hlZCBjbG9zaW5nXHJcblx0XHRpZiAoICF0aGlzLmlzTXVsdGlwbGUgJiYgb2xkSW5kZXggIT09IG5ld0luZGV4ICkge1xyXG5cdFx0XHR0aGlzLl90cmlnZ2VyQ2hhbmdlID0gdHJ1ZTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBUcmlnZ2VyIGNoYW5nZSBpZiBpdCdzIGEgbXVsdGlwbGUgc2VsZWN0XHJcblx0XHQvLyBIaWRlIGN1c3RvbSBzZWxlY3QgZm9yIHNpbmdsZSBzZWxlY3RzIG9ubHkgLSBvdGhlcndpc2UgZm9jdXMgY2xpY2tlZCBpdGVtXHJcblx0XHQvLyBXZSBuZWVkIHRvIGdyYWIgdGhlIGNsaWNrZWQgaXRlbSB0aGUgaGFyZCB3YXksIGJlY2F1c2UgdGhlIGxpc3QgbWF5IGhhdmUgYmVlbiByZWJ1aWx0XHJcblx0XHRpZiAoIHRoaXMuaXNNdWx0aXBsZSApIHtcclxuXHRcdFx0dGhpcy5zZWxlY3QudHJpZ2dlciggXCJjaGFuZ2VcIiApO1xyXG5cdFx0XHR0aGlzLmxpc3QuZmluZCggXCJsaTpub3QoLnVpLWxpLWRpdmlkZXIpXCIgKS5lcSggbmV3SW5kZXggKVxyXG5cdFx0XHRcdC5maW5kKCBcImFcIiApLmZpcnN0KCkuZm9jdXMoKTtcclxuXHRcdH1cclxuXHRcdGVsc2Uge1xyXG5cdFx0XHR0aGlzLmNsb3NlKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHR9LFxyXG5cclxuXHRidWlsZDogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgc2VsZWN0SWQsIHBvcHVwSWQsIGRpYWxvZ0lkLCBsYWJlbCwgdGhpc1BhZ2UsIGlzTXVsdGlwbGUsIG1lbnVJZCxcclxuXHRcdFx0dGhlbWVBdHRyLCBvdmVybGF5VGhlbWUsIG92ZXJsYXlUaGVtZUF0dHIsIGRpdmlkZXJUaGVtZUF0dHIsXHJcblx0XHRcdG1lbnVQYWdlLCBsaXN0Ym94LCBsaXN0LCBoZWFkZXIsIGhlYWRlclRpdGxlLCBtZW51UGFnZUNvbnRlbnQsXHJcblx0XHRcdG1lbnVQYWdlQ2xvc2UsIGhlYWRlckNsb3NlLFxyXG5cdFx0XHRvID0gdGhpcy5vcHRpb25zO1xyXG5cclxuXHRcdGlmICggby5uYXRpdmVNZW51ICkge1xyXG5cdFx0XHRyZXR1cm4gdGhpcy5fc3VwZXIoKTtcclxuXHRcdH1cclxuXHJcblx0XHRzZWxlY3RJZCA9IHRoaXMuc2VsZWN0SWQ7XHJcblx0XHRwb3B1cElkID0gc2VsZWN0SWQgKyBcIi1saXN0Ym94XCI7XHJcblx0XHRkaWFsb2dJZCA9IHNlbGVjdElkICsgXCItZGlhbG9nXCI7XHJcblx0XHRsYWJlbCA9IHRoaXMubGFiZWw7XHJcblx0XHR0aGlzUGFnZSA9IHRoaXMuZWxlbWVudC5jbG9zZXN0KCBcIi51aS1wYWdlXCIgKTtcclxuXHRcdGlzTXVsdGlwbGUgPSB0aGlzLmVsZW1lbnRbIDAgXS5tdWx0aXBsZTtcclxuXHRcdG1lbnVJZCA9IHNlbGVjdElkICsgXCItbWVudVwiO1xyXG5cdFx0dGhlbWVBdHRyID0gby50aGVtZSA/ICggXCIgZGF0YS1cIiArICQubW9iaWxlLm5zICsgXCJ0aGVtZT0nXCIgKyBvLnRoZW1lICsgXCInXCIgKSA6IFwiXCI7XHJcblx0XHRvdmVybGF5VGhlbWUgPSBvLm92ZXJsYXlUaGVtZSB8fCBvLnRoZW1lIHx8IG51bGw7XHJcblx0XHRvdmVybGF5VGhlbWVBdHRyID0gb3ZlcmxheVRoZW1lID8gKCBcIiBkYXRhLVwiICsgJC5tb2JpbGUubnMgK1xyXG5cdFx0XHRcIm92ZXJsYXktdGhlbWU9J1wiICsgb3ZlcmxheVRoZW1lICsgXCInXCIgKSA6IFwiXCI7XHJcblx0XHRkaXZpZGVyVGhlbWVBdHRyID0gKCBvLmRpdmlkZXJUaGVtZSAmJiBpc011bHRpcGxlICkgPyAoIFwiIGRhdGEtXCIgKyAkLm1vYmlsZS5ucyArIFwiZGl2aWRlci10aGVtZT0nXCIgKyBvLmRpdmlkZXJUaGVtZSArIFwiJ1wiICkgOiBcIlwiO1xyXG5cdFx0bWVudVBhZ2UgPSAkKCBcIjxkaXYgZGF0YS1cIiArICQubW9iaWxlLm5zICsgXCJyb2xlPSdkaWFsb2cnIGNsYXNzPSd1aS1zZWxlY3RtZW51JyBpZD0nXCIgKyBkaWFsb2dJZCArIFwiJ1wiICsgdGhlbWVBdHRyICsgb3ZlcmxheVRoZW1lQXR0ciArIFwiPlwiICtcclxuXHRcdFx0XCI8ZGl2IGRhdGEtXCIgKyAkLm1vYmlsZS5ucyArIFwicm9sZT0naGVhZGVyJz5cIiArXHJcblx0XHRcdFwiPGRpdiBjbGFzcz0ndWktdGl0bGUnPjwvZGl2PlwiK1xyXG5cdFx0XHRcIjwvZGl2PlwiK1xyXG5cdFx0XHRcIjxkaXYgZGF0YS1cIiArICQubW9iaWxlLm5zICsgXCJyb2xlPSdjb250ZW50Jz48L2Rpdj5cIitcclxuXHRcdFx0XCI8L2Rpdj5cIiApO1xyXG5cdFx0bGlzdGJveCA9ICQoIFwiPGRpdlwiICsgdGhlbWVBdHRyICsgb3ZlcmxheVRoZW1lQXR0ciArIFwiIGlkPSdcIiArIHBvcHVwSWQgK1xyXG5cdFx0XHRcdFwiJyBjbGFzcz0ndWktc2VsZWN0bWVudSc+PC9kaXY+XCIgKVxyXG5cdFx0XHQuaW5zZXJ0QWZ0ZXIoIHRoaXMuc2VsZWN0IClcclxuXHRcdFx0LnBvcHVwKCk7XHJcblx0XHRsaXN0ID0gJCggXCI8dWwgY2xhc3M9J3VpLXNlbGVjdG1lbnUtbGlzdCcgaWQ9J1wiICsgbWVudUlkICsgXCInIHJvbGU9J2xpc3Rib3gnIGFyaWEtbGFiZWxsZWRieT0nXCIgKyB0aGlzLmJ1dHRvbklkICsgXCInXCIgKyB0aGVtZUF0dHIgKyBkaXZpZGVyVGhlbWVBdHRyICsgXCI+PC91bD5cIiApLmFwcGVuZFRvKCBsaXN0Ym94ICk7XHJcblx0XHRoZWFkZXIgPSAkKCBcIjxkaXYgY2xhc3M9J3VpLWhlYWRlciB1aS1iYXItXCIgKyAoIG8udGhlbWUgPyBvLnRoZW1lIDogXCJpbmhlcml0XCIgKSArIFwiJz48L2Rpdj5cIiApLnByZXBlbmRUbyggbGlzdGJveCApO1xyXG5cdFx0aGVhZGVyVGl0bGUgPSAkKCBcIjxoMSBjbGFzcz0ndWktdGl0bGUnPjwvaDE+XCIgKS5hcHBlbmRUbyggaGVhZGVyICk7XHJcblxyXG5cdFx0aWYgKCB0aGlzLmlzTXVsdGlwbGUgKSB7XHJcblx0XHRcdGhlYWRlckNsb3NlID0gJCggXCI8YT5cIiwge1xyXG5cdFx0XHRcdFwicm9sZVwiOiBcImJ1dHRvblwiLFxyXG5cdFx0XHRcdFwidGV4dFwiOiBvLmNsb3NlVGV4dCxcclxuXHRcdFx0XHRcImhyZWZcIjogXCIjXCIsXHJcblx0XHRcdFx0XCJjbGFzc1wiOiBcInVpLWJ0biB1aS1jb3JuZXItYWxsIHVpLWJ0bi1sZWZ0IHVpLWJ0bi1pY29uLW5vdGV4dCB1aS1pY29uLWRlbGV0ZVwiXHJcblx0XHRcdH0pLmFwcGVuZFRvKCBoZWFkZXIgKTtcclxuXHRcdH1cclxuXHJcblx0XHQkLmV4dGVuZCggdGhpcywge1xyXG5cdFx0XHRzZWxlY3RJZDogc2VsZWN0SWQsXHJcblx0XHRcdG1lbnVJZDogbWVudUlkLFxyXG5cdFx0XHRwb3B1cElkOiBwb3B1cElkLFxyXG5cdFx0XHRkaWFsb2dJZDogZGlhbG9nSWQsXHJcblx0XHRcdHRoaXNQYWdlOiB0aGlzUGFnZSxcclxuXHRcdFx0bWVudVBhZ2U6IG1lbnVQYWdlLFxyXG5cdFx0XHRsYWJlbDogbGFiZWwsXHJcblx0XHRcdGlzTXVsdGlwbGU6IGlzTXVsdGlwbGUsXHJcblx0XHRcdHRoZW1lOiBvLnRoZW1lLFxyXG5cdFx0XHRsaXN0Ym94OiBsaXN0Ym94LFxyXG5cdFx0XHRsaXN0OiBsaXN0LFxyXG5cdFx0XHRoZWFkZXI6IGhlYWRlcixcclxuXHRcdFx0aGVhZGVyVGl0bGU6IGhlYWRlclRpdGxlLFxyXG5cdFx0XHRoZWFkZXJDbG9zZTogaGVhZGVyQ2xvc2UsXHJcblx0XHRcdG1lbnVQYWdlQ29udGVudDogbWVudVBhZ2VDb250ZW50LFxyXG5cdFx0XHRtZW51UGFnZUNsb3NlOiBtZW51UGFnZUNsb3NlLFxyXG5cdFx0XHRwbGFjZWhvbGRlcjogXCJcIlxyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gQ3JlYXRlIGxpc3QgZnJvbSBzZWxlY3QsIHVwZGF0ZSBzdGF0ZVxyXG5cdFx0dGhpcy5yZWZyZXNoKCk7XHJcblxyXG5cdFx0aWYgKCB0aGlzLl9vcmlnVGFiSW5kZXggPT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0Ly8gTWFwIHVuZGVmaW5lZCB0byBmYWxzZSwgYmVjYXVzZSB0aGlzLl9vcmlnVGFiSW5kZXggPT09IHVuZGVmaW5lZFxyXG5cdFx0XHQvLyBpbmRpY2F0ZXMgdGhhdCB3ZSBoYXZlIG5vdCB5ZXQgY2hlY2tlZCB3aGV0aGVyIHRoZSBzZWxlY3QgaGFzXHJcblx0XHRcdC8vIG9yaWdpbmFsbHkgaGFkIGEgdGFiaW5kZXggYXR0cmlidXRlLCB3aGVyZWFzIGZhbHNlIGluZGljYXRlcyB0aGF0XHJcblx0XHRcdC8vIHdlIGhhdmUgY2hlY2tlZCB0aGUgc2VsZWN0IGZvciBzdWNoIGFuIGF0dHJpYnV0ZSwgYW5kIGhhdmUgZm91bmRcclxuXHRcdFx0Ly8gbm9uZSBwcmVzZW50LlxyXG5cdFx0XHR0aGlzLl9vcmlnVGFiSW5kZXggPSAoIHRoaXMuc2VsZWN0WyAwIF0uZ2V0QXR0cmlidXRlKCBcInRhYmluZGV4XCIgKSA9PT0gbnVsbCApID8gZmFsc2UgOiB0aGlzLnNlbGVjdC5hdHRyKCBcInRhYmluZGV4XCIgKTtcclxuXHRcdH1cclxuXHRcdHRoaXMuc2VsZWN0LmF0dHIoIFwidGFiaW5kZXhcIiwgXCItMVwiICk7XHJcblx0XHR0aGlzLl9vbiggdGhpcy5zZWxlY3QsIHsgZm9jdXMgOiBcIl9oYW5kbGVTZWxlY3RGb2N1c1wiIH0gKTtcclxuXHJcblx0XHQvLyBCdXR0b24gZXZlbnRzXHJcblx0XHR0aGlzLl9vbiggdGhpcy5idXR0b24sIHtcclxuXHRcdFx0dmNsaWNrOiBcIl9oYW5kbGVCdXR0b25WY2xpY2tLZXlkb3duXCJcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIEV2ZW50cyBmb3IgbGlzdCBpdGVtc1xyXG5cdFx0dGhpcy5saXN0LmF0dHIoIFwicm9sZVwiLCBcImxpc3Rib3hcIiApO1xyXG5cdFx0dGhpcy5fb24oIHRoaXMubGlzdCwge1xyXG5cdFx0XHRcImZvY3VzaW5cIjogXCJfaGFuZGxlTGlzdEZvY3VzXCIsXHJcblx0XHRcdFwiZm9jdXNvdXRcIjogXCJfaGFuZGxlTGlzdEZvY3VzXCIsXHJcblx0XHRcdFwia2V5ZG93blwiOiBcIl9oYW5kbGVMaXN0S2V5ZG93blwiLFxyXG5cdFx0XHRcImNsaWNrIGxpOm5vdCgudWktZGlzYWJsZWQsLnVpLXN0YXRlLWRpc2FibGVkLC51aS1saS1kaXZpZGVyKVwiOiBcIl9oYW5kbGVMaXN0SXRlbUNsaWNrXCJcclxuXHRcdH0pO1xyXG5cclxuXHRcdC8vIGJ1dHRvbiByZWZvY3VzIGVuc3VyZXMgcHJvcGVyIGhlaWdodCBjYWxjdWxhdGlvblxyXG5cdFx0Ly8gYnkgcmVtb3ZpbmcgdGhlIGlubGluZSBzdHlsZSBhbmQgZW5zdXJpbmcgcGFnZSBpbmNsdXNpb25cclxuXHRcdHRoaXMuX29uKCB0aGlzLm1lbnVQYWdlLCB7IHBhZ2VoaWRlOiBcIl9oYW5kbGVNZW51UGFnZUhpZGVcIiB9ICk7XHJcblxyXG5cdFx0Ly8gRXZlbnRzIG9uIHRoZSBwb3B1cFxyXG5cdFx0dGhpcy5fb24oIHRoaXMubGlzdGJveCwgeyBwb3B1cGFmdGVyY2xvc2U6IFwiX3BvcHVwQ2xvc2VkXCIgfSApO1xyXG5cclxuXHRcdC8vIENsb3NlIGJ1dHRvbiBvbiBzbWFsbCBvdmVybGF5c1xyXG5cdFx0aWYgKCB0aGlzLmlzTXVsdGlwbGUgKSB7XHJcblx0XHRcdHRoaXMuX29uKCB0aGlzLmhlYWRlckNsb3NlLCB7IGNsaWNrOiBcIl9oYW5kbGVIZWFkZXJDbG9zZUNsaWNrXCIgfSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH0sXHJcblxyXG5cdF9wb3B1cENsb3NlZDogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLmNsb3NlKCk7XHJcblx0XHR0aGlzLl9kZWxheWVkVHJpZ2dlcigpO1xyXG5cdH0sXHJcblxyXG5cdF9kZWxheWVkVHJpZ2dlcjogZnVuY3Rpb24oKSB7XHJcblx0XHRpZiAoIHRoaXMuX3RyaWdnZXJDaGFuZ2UgKSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudC50cmlnZ2VyKCBcImNoYW5nZVwiICk7XHJcblx0XHR9XHJcblx0XHR0aGlzLl90cmlnZ2VyQ2hhbmdlID0gZmFsc2U7XHJcblx0fSxcclxuXHJcblx0X2lzUmVidWlsZFJlcXVpcmVkOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBsaXN0ID0gdGhpcy5saXN0LmZpbmQoIFwibGlcIiApLFxyXG5cdFx0XHRvcHRpb25zID0gdGhpcy5fc2VsZWN0T3B0aW9ucygpLm5vdCggXCIudWktc2NyZWVuLWhpZGRlblwiICk7XHJcblxyXG5cdFx0Ly8gVE9ETyBleGNlZWRpbmdseSBuYWl2ZSBtZXRob2QgdG8gZGV0ZXJtaW5lIGRpZmZlcmVuY2VcclxuXHRcdC8vIGlnbm9yZXMgdmFsdWUgY2hhbmdlcyBldGMgaW4gZmF2b3Igb2YgYSBmb3JjZWRSZWJ1aWxkXHJcblx0XHQvLyBmcm9tIHRoZSB1c2VyIGluIHRoZSByZWZyZXNoIG1ldGhvZFxyXG5cdFx0cmV0dXJuIG9wdGlvbnMudGV4dCgpICE9PSBsaXN0LnRleHQoKTtcclxuXHR9LFxyXG5cclxuXHRzZWxlY3RlZDogZnVuY3Rpb24oKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5fc2VsZWN0T3B0aW9ucygpLmZpbHRlciggXCI6c2VsZWN0ZWQ6bm90KCA6anFtRGF0YShwbGFjZWhvbGRlcj0ndHJ1ZScpIClcIiApO1xyXG5cdH0sXHJcblxyXG5cdHJlZnJlc2g6IGZ1bmN0aW9uKCBmb3JjZSApIHtcclxuXHRcdHZhciBzZWxmLCBpbmRpY2VzO1xyXG5cclxuXHRcdGlmICggdGhpcy5vcHRpb25zLm5hdGl2ZU1lbnUgKSB7XHJcblx0XHRcdHJldHVybiB0aGlzLl9zdXBlciggZm9yY2UgKTtcclxuXHRcdH1cclxuXHJcblx0XHRzZWxmID0gdGhpcztcclxuXHRcdGlmICggZm9yY2UgfHwgdGhpcy5faXNSZWJ1aWxkUmVxdWlyZWQoKSApIHtcclxuXHRcdFx0c2VsZi5fYnVpbGRMaXN0KCk7XHJcblx0XHR9XHJcblxyXG5cdFx0aW5kaWNlcyA9IHRoaXMuc2VsZWN0ZWRJbmRpY2VzKCk7XHJcblxyXG5cdFx0c2VsZi5zZXRCdXR0b25UZXh0KCk7XHJcblx0XHRzZWxmLnNldEJ1dHRvbkNvdW50KCk7XHJcblxyXG5cdFx0c2VsZi5saXN0LmZpbmQoIFwibGk6bm90KC51aS1saS1kaXZpZGVyKVwiIClcclxuXHRcdFx0LmZpbmQoIFwiYVwiICkucmVtb3ZlQ2xhc3MoICQubW9iaWxlLmFjdGl2ZUJ0bkNsYXNzICkuZW5kKClcclxuXHRcdFx0LmF0dHIoIFwiYXJpYS1zZWxlY3RlZFwiLCBmYWxzZSApXHJcblx0XHRcdC5lYWNoKGZ1bmN0aW9uKCBpICkge1xyXG5cdFx0XHRcdHZhciBpdGVtID0gJCggdGhpcyApO1xyXG5cdFx0XHRcdGlmICggJC5pbkFycmF5KCBpLCBpbmRpY2VzICkgPiAtMSApIHtcclxuXHJcblx0XHRcdFx0XHQvLyBBcmlhIHNlbGVjdGVkIGF0dHJcclxuXHRcdFx0XHRcdGl0ZW0uYXR0ciggXCJhcmlhLXNlbGVjdGVkXCIsIHRydWUgKTtcclxuXHJcblx0XHRcdFx0XHQvLyBNdWx0aXBsZSBzZWxlY3RzOiBhZGQgdGhlIFwib25cIiBjaGVja2JveCBzdGF0ZSB0byB0aGUgaWNvblxyXG5cdFx0XHRcdFx0aWYgKCBzZWxmLmlzTXVsdGlwbGUgKSB7XHJcblx0XHRcdFx0XHRcdGl0ZW0uZmluZCggXCJhXCIgKS5yZW1vdmVDbGFzcyggXCJ1aS1jaGVja2JveC1vZmZcIiApLmFkZENsYXNzKCBcInVpLWNoZWNrYm94LW9uXCIgKTtcclxuXHRcdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRcdGlmICggaXRlbS5oYXNDbGFzcyggXCJ1aS1zY3JlZW4taGlkZGVuXCIgKSApIHtcclxuXHRcdFx0XHRcdFx0XHRpdGVtLm5leHQoKS5maW5kKCBcImFcIiApLmFkZENsYXNzKCAkLm1vYmlsZS5hY3RpdmVCdG5DbGFzcyApO1xyXG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdGl0ZW0uZmluZCggXCJhXCIgKS5hZGRDbGFzcyggJC5tb2JpbGUuYWN0aXZlQnRuQ2xhc3MgKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0gZWxzZSBpZiAoIHNlbGYuaXNNdWx0aXBsZSApIHtcclxuXHRcdFx0XHRcdGl0ZW0uZmluZCggXCJhXCIgKS5yZW1vdmVDbGFzcyggXCJ1aS1jaGVja2JveC1vblwiICkuYWRkQ2xhc3MoIFwidWktY2hlY2tib3gtb2ZmXCIgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdH0sXHJcblxyXG5cdGNsb3NlOiBmdW5jdGlvbigpIHtcclxuXHRcdGlmICggdGhpcy5vcHRpb25zLmRpc2FibGVkIHx8ICF0aGlzLmlzT3BlbiApIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdHZhciBzZWxmID0gdGhpcztcclxuXHJcblx0XHRpZiAoIHNlbGYubWVudVR5cGUgPT09IFwicGFnZVwiICkge1xyXG5cdFx0XHRzZWxmLm1lbnVQYWdlLmRpYWxvZyggXCJjbG9zZVwiICk7XHJcblx0XHRcdHNlbGYubGlzdC5hcHBlbmRUbyggc2VsZi5saXN0Ym94ICk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRzZWxmLmxpc3Rib3gucG9wdXAoIFwiY2xvc2VcIiApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHNlbGYuX2ZvY3VzQnV0dG9uKCk7XHJcblx0XHQvLyBhbGxvdyB0aGUgZGlhbG9nIHRvIGJlIGNsb3NlZCBhZ2FpblxyXG5cdFx0c2VsZi5pc09wZW4gPSBmYWxzZTtcclxuXHR9LFxyXG5cclxuXHRvcGVuOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuYnV0dG9uLmNsaWNrKCk7XHJcblx0fSxcclxuXHJcblx0X2ZvY3VzTWVudUl0ZW06IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHNlbGVjdG9yID0gdGhpcy5saXN0LmZpbmQoIFwiYS5cIiArICQubW9iaWxlLmFjdGl2ZUJ0bkNsYXNzICk7XHJcblx0XHRpZiAoIHNlbGVjdG9yLmxlbmd0aCA9PT0gMCApIHtcclxuXHRcdFx0c2VsZWN0b3IgPSB0aGlzLmxpc3QuZmluZCggXCJsaTpub3QoXCIgKyB1bmZvY3VzYWJsZUl0ZW1TZWxlY3RvciArIFwiKSBhLnVpLWJ0blwiICk7XHJcblx0XHR9XHJcblx0XHRzZWxlY3Rvci5maXJzdCgpLmZvY3VzKCk7XHJcblx0fSxcclxuXHJcblx0X2RlY2lkZUZvcm1hdDogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgc2VsZiA9IHRoaXMsXHJcblx0XHRcdCR3aW5kb3cgPSB0aGlzLndpbmRvdyxcclxuXHRcdFx0c2VsZkxpc3RQYXJlbnQgPSBzZWxmLmxpc3QucGFyZW50KCksXHJcblx0XHRcdG1lbnVIZWlnaHQgPSBzZWxmTGlzdFBhcmVudC5vdXRlckhlaWdodCgpLFxyXG5cdFx0XHRzY3JvbGxUb3AgPSAkd2luZG93LnNjcm9sbFRvcCgpLFxyXG5cdFx0XHRidG5PZmZzZXQgPSBzZWxmLmJ1dHRvbi5vZmZzZXQoKS50b3AsXHJcblx0XHRcdHNjcmVlbkhlaWdodCA9ICR3aW5kb3cuaGVpZ2h0KCk7XHJcblxyXG5cdFx0aWYgKCBtZW51SGVpZ2h0ID4gc2NyZWVuSGVpZ2h0IC0gODAgfHwgISQuc3VwcG9ydC5zY3JvbGxUb3AgKSB7XHJcblxyXG5cdFx0XHRzZWxmLm1lbnVQYWdlLmFwcGVuZFRvKCAkLm1vYmlsZS5wYWdlQ29udGFpbmVyICkucGFnZSgpO1xyXG5cdFx0XHRzZWxmLm1lbnVQYWdlQ29udGVudCA9IHNlbGYubWVudVBhZ2UuZmluZCggXCIudWktY29udGVudFwiICk7XHJcblx0XHRcdHNlbGYubWVudVBhZ2VDbG9zZSA9IHNlbGYubWVudVBhZ2UuZmluZCggXCIudWktaGVhZGVyIGFcIiApO1xyXG5cclxuXHRcdFx0Ly8gcHJldmVudCB0aGUgcGFyZW50IHBhZ2UgZnJvbSBiZWluZyByZW1vdmVkIGZyb20gdGhlIERPTSxcclxuXHRcdFx0Ly8gb3RoZXJ3aXNlIHRoZSByZXN1bHRzIG9mIHNlbGVjdGluZyBhIGxpc3QgaXRlbSBpbiB0aGUgZGlhbG9nXHJcblx0XHRcdC8vIGZhbGwgaW50byBhIGJsYWNrIGhvbGVcclxuXHRcdFx0c2VsZi50aGlzUGFnZS51bmJpbmQoIFwicGFnZWhpZGUucmVtb3ZlXCIgKTtcclxuXHJcblx0XHRcdC8vZm9yIFdlYk9TL09wZXJhIE1pbmkgKHNldCBsYXN0c2Nyb2xsIHVzaW5nIGJ1dHRvbiBvZmZzZXQpXHJcblx0XHRcdGlmICggc2Nyb2xsVG9wID09PSAwICYmIGJ0bk9mZnNldCA+IHNjcmVlbkhlaWdodCApIHtcclxuXHRcdFx0XHRzZWxmLnRoaXNQYWdlLm9uZSggXCJwYWdlaGlkZVwiLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdCQoIHRoaXMgKS5qcW1EYXRhKCBcImxhc3RTY3JvbGxcIiwgYnRuT2Zmc2V0ICk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHNlbGYubWVudVBhZ2Uub25lKCB7XHJcblx0XHRcdFx0cGFnZXNob3c6ICQucHJveHkoIHRoaXMsIFwiX2ZvY3VzTWVudUl0ZW1cIiApLFxyXG5cdFx0XHRcdHBhZ2VoaWRlOiAkLnByb3h5KCB0aGlzLCBcImNsb3NlXCIgKVxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdHNlbGYubWVudVR5cGUgPSBcInBhZ2VcIjtcclxuXHRcdFx0c2VsZi5tZW51UGFnZUNvbnRlbnQuYXBwZW5kKCBzZWxmLmxpc3QgKTtcclxuXHRcdFx0c2VsZi5tZW51UGFnZVxyXG5cdFx0XHRcdC5maW5kKCBcImRpdiAudWktdGl0bGVcIiApXHJcblx0XHRcdFx0XHQudGV4dCggc2VsZi5sYWJlbC5nZXRFbmNvZGVkVGV4dCgpIHx8IHNlbGYucGxhY2Vob2xkZXIgKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHNlbGYubWVudVR5cGUgPSBcIm92ZXJsYXlcIjtcclxuXHJcblx0XHRcdHNlbGYubGlzdGJveC5vbmUoIHsgcG9wdXBhZnRlcm9wZW46ICQucHJveHkoIHRoaXMsIFwiX2ZvY3VzTWVudUl0ZW1cIiApIH0gKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfYnVpbGRMaXN0OiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBzZWxmID0gdGhpcyxcclxuXHRcdFx0byA9IHRoaXMub3B0aW9ucyxcclxuXHRcdFx0cGxhY2Vob2xkZXIgPSB0aGlzLnBsYWNlaG9sZGVyLFxyXG5cdFx0XHRuZWVkUGxhY2Vob2xkZXIgPSB0cnVlLFxyXG5cdFx0XHRkYXRhSWNvbiA9IFwiZmFsc2VcIixcclxuXHRcdFx0JG9wdGlvbnMsIG51bU9wdGlvbnMsIHNlbGVjdCxcclxuXHRcdFx0ZGF0YVByZWZpeCA9IFwiZGF0YS1cIiArICQubW9iaWxlLm5zLFxyXG5cdFx0XHRkYXRhSW5kZXhBdHRyID0gZGF0YVByZWZpeCArIFwib3B0aW9uLWluZGV4XCIsXHJcblx0XHRcdGRhdGFJY29uQXR0ciA9IGRhdGFQcmVmaXggKyBcImljb25cIixcclxuXHRcdFx0ZGF0YVJvbGVBdHRyID0gZGF0YVByZWZpeCArIFwicm9sZVwiLFxyXG5cdFx0XHRkYXRhUGxhY2Vob2xkZXJBdHRyID0gZGF0YVByZWZpeCArIFwicGxhY2Vob2xkZXJcIixcclxuXHRcdFx0ZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksXHJcblx0XHRcdGlzUGxhY2Vob2xkZXJJdGVtID0gZmFsc2UsXHJcblx0XHRcdG9wdEdyb3VwLFxyXG5cdFx0XHRpLFxyXG5cdFx0XHRvcHRpb24sICRvcHRpb24sIHBhcmVudCwgdGV4dCwgYW5jaG9yLCBjbGFzc2VzLFxyXG5cdFx0XHRvcHRMYWJlbCwgZGl2aWRlciwgaXRlbTtcclxuXHJcblx0XHRzZWxmLmxpc3QuZW1wdHkoKS5maWx0ZXIoIFwiLnVpLWxpc3R2aWV3XCIgKS5saXN0dmlldyggXCJkZXN0cm95XCIgKTtcclxuXHRcdCRvcHRpb25zID0gdGhpcy5fc2VsZWN0T3B0aW9ucygpO1xyXG5cdFx0bnVtT3B0aW9ucyA9ICRvcHRpb25zLmxlbmd0aDtcclxuXHRcdHNlbGVjdCA9IHRoaXMuc2VsZWN0WyAwIF07XHJcblxyXG5cdFx0Zm9yICggaSA9IDA7IGkgPCBudW1PcHRpb25zO2krKywgaXNQbGFjZWhvbGRlckl0ZW0gPSBmYWxzZSkge1xyXG5cdFx0XHRvcHRpb24gPSAkb3B0aW9uc1tpXTtcclxuXHRcdFx0JG9wdGlvbiA9ICQoIG9wdGlvbiApO1xyXG5cclxuXHRcdFx0Ly8gRG8gbm90IGNyZWF0ZSBvcHRpb25zIGJhc2VkIG9uIHVpLXNjcmVlbi1oaWRkZW4gc2VsZWN0IG9wdGlvbnNcclxuXHRcdFx0aWYgKCAkb3B0aW9uLmhhc0NsYXNzKCBcInVpLXNjcmVlbi1oaWRkZW5cIiApICkge1xyXG5cdFx0XHRcdGNvbnRpbnVlO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRwYXJlbnQgPSBvcHRpb24ucGFyZW50Tm9kZTtcclxuXHRcdFx0Y2xhc3NlcyA9IFtdO1xyXG5cclxuXHRcdFx0Ly8gQWx0aG91Z2ggdXNpbmcgLnRleHQoKSBoZXJlIHJhaXNlcyB0aGUgcmlzayB0aGF0LCB3aGVuIHdlIGxhdGVyIHBhc3RlIHRoaXMgaW50byB0aGVcclxuXHRcdFx0Ly8gbGlzdCBpdGVtIHdlIGVuZCB1cCBwYXN0aW5nIHBvc3NpYmx5IG1hbGljaW91cyB0aGluZ3MgbGlrZSA8c2NyaXB0PiB0YWdzLCB0aGF0IHJpc2tcclxuXHRcdFx0Ly8gb25seSBhcmlzZXMgaWYgd2UgZG8gc29tZXRoaW5nIGxpa2UgJCggXCI8bGk+PGEgaHJlZj0nIyc+XCIgKyB0ZXh0ICsgXCI8L2E+PC9saT5cIiApLiBXZVxyXG5cdFx0XHQvLyBkb24ndCBkbyB0aGF0LiBXZSBkbyBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSggdGV4dCApIGluc3RlYWQsIHdoaWNoIGd1YXJhbnRlZXMgdGhhdFxyXG5cdFx0XHQvLyB3aGF0ZXZlciB3ZSBwYXN0ZSBpbiB3aWxsIGVuZCB1cCBhcyB0ZXh0LCB3aXRoIGNoYXJhY3RlcnMgbGlrZSA8LCA+IGFuZCAmIGVzY2FwZWQuXHJcblx0XHRcdHRleHQgPSAkb3B0aW9uLnRleHQoKTtcclxuXHRcdFx0YW5jaG9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJhXCIgKTtcclxuXHRcdFx0YW5jaG9yLnNldEF0dHJpYnV0ZSggXCJocmVmXCIsIFwiI1wiICk7XHJcblx0XHRcdGFuY2hvci5hcHBlbmRDaGlsZCggZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoIHRleHQgKSApO1xyXG5cclxuXHRcdFx0Ly8gQXJlIHdlIGluc2lkZSBhbiBvcHRncm91cD9cclxuXHRcdFx0aWYgKCBwYXJlbnQgIT09IHNlbGVjdCAmJiBwYXJlbnQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gXCJvcHRncm91cFwiICkge1xyXG5cdFx0XHRcdG9wdExhYmVsID0gcGFyZW50LmdldEF0dHJpYnV0ZSggXCJsYWJlbFwiICk7XHJcblx0XHRcdFx0aWYgKCBvcHRMYWJlbCAhPT0gb3B0R3JvdXAgKSB7XHJcblx0XHRcdFx0XHRkaXZpZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJsaVwiICk7XHJcblx0XHRcdFx0XHRkaXZpZGVyLnNldEF0dHJpYnV0ZSggZGF0YVJvbGVBdHRyLCBcImxpc3QtZGl2aWRlclwiICk7XHJcblx0XHRcdFx0XHRkaXZpZGVyLnNldEF0dHJpYnV0ZSggXCJyb2xlXCIsIFwib3B0aW9uXCIgKTtcclxuXHRcdFx0XHRcdGRpdmlkZXIuc2V0QXR0cmlidXRlKCBcInRhYmluZGV4XCIsIFwiLTFcIiApO1xyXG5cdFx0XHRcdFx0ZGl2aWRlci5hcHBlbmRDaGlsZCggZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoIG9wdExhYmVsICkgKTtcclxuXHRcdFx0XHRcdGZyYWdtZW50LmFwcGVuZENoaWxkKCBkaXZpZGVyICk7XHJcblx0XHRcdFx0XHRvcHRHcm91cCA9IG9wdExhYmVsO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKCBuZWVkUGxhY2Vob2xkZXIgJiYgKCAhb3B0aW9uLmdldEF0dHJpYnV0ZSggXCJ2YWx1ZVwiICkgfHwgdGV4dC5sZW5ndGggPT09IDAgfHwgJG9wdGlvbi5qcW1EYXRhKCBcInBsYWNlaG9sZGVyXCIgKSApICkge1xyXG5cdFx0XHRcdG5lZWRQbGFjZWhvbGRlciA9IGZhbHNlO1xyXG5cdFx0XHRcdGlzUGxhY2Vob2xkZXJJdGVtID0gdHJ1ZTtcclxuXHJcblx0XHRcdFx0Ly8gSWYgd2UgaGF2ZSBpZGVudGlmaWVkIGEgcGxhY2Vob2xkZXIsIHJlY29yZCB0aGUgZmFjdCB0aGF0IGl0IHdhc1xyXG5cdFx0XHRcdC8vIHVzIHdobyBoYXZlIGFkZGVkIHRoZSBwbGFjZWhvbGRlciB0byB0aGUgb3B0aW9uIGFuZCBtYXJrIGl0XHJcblx0XHRcdFx0Ly8gcmV0cm9hY3RpdmVseSBpbiB0aGUgc2VsZWN0IGFzIHdlbGxcclxuXHRcdFx0XHRpZiAoIG51bGwgPT09IG9wdGlvbi5nZXRBdHRyaWJ1dGUoIGRhdGFQbGFjZWhvbGRlckF0dHIgKSApIHtcclxuXHRcdFx0XHRcdHRoaXMuX3JlbW92ZVBsYWNlaG9sZGVyQXR0ciA9IHRydWU7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdG9wdGlvbi5zZXRBdHRyaWJ1dGUoIGRhdGFQbGFjZWhvbGRlckF0dHIsIHRydWUgKTtcclxuXHRcdFx0XHRpZiAoIG8uaGlkZVBsYWNlaG9sZGVyTWVudUl0ZW1zICkge1xyXG5cdFx0XHRcdFx0Y2xhc3Nlcy5wdXNoKCBcInVpLXNjcmVlbi1oaWRkZW5cIiApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZiAoIHBsYWNlaG9sZGVyICE9PSB0ZXh0ICkge1xyXG5cdFx0XHRcdFx0cGxhY2Vob2xkZXIgPSBzZWxmLnBsYWNlaG9sZGVyID0gdGV4dDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImxpXCIgKTtcclxuXHRcdFx0aWYgKCBvcHRpb24uZGlzYWJsZWQgKSB7XHJcblx0XHRcdFx0Y2xhc3Nlcy5wdXNoKCBcInVpLXN0YXRlLWRpc2FibGVkXCIgKTtcclxuXHRcdFx0XHRpdGVtLnNldEF0dHJpYnV0ZSggXCJhcmlhLWRpc2FibGVkXCIsIHRydWUgKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpdGVtLnNldEF0dHJpYnV0ZSggZGF0YUluZGV4QXR0ciwgaSApO1xyXG5cdFx0XHRpdGVtLnNldEF0dHJpYnV0ZSggZGF0YUljb25BdHRyLCBkYXRhSWNvbiApO1xyXG5cdFx0XHRpZiAoIGlzUGxhY2Vob2xkZXJJdGVtICkge1xyXG5cdFx0XHRcdGl0ZW0uc2V0QXR0cmlidXRlKCBkYXRhUGxhY2Vob2xkZXJBdHRyLCB0cnVlICk7XHJcblx0XHRcdH1cclxuXHRcdFx0aXRlbS5jbGFzc05hbWUgPSBjbGFzc2VzLmpvaW4oIFwiIFwiICk7XHJcblx0XHRcdGl0ZW0uc2V0QXR0cmlidXRlKCBcInJvbGVcIiwgXCJvcHRpb25cIiApO1xyXG5cdFx0XHRhbmNob3Iuc2V0QXR0cmlidXRlKCBcInRhYmluZGV4XCIsIFwiLTFcIiApO1xyXG5cdFx0XHRpZiAoIHRoaXMuaXNNdWx0aXBsZSApIHtcclxuXHRcdFx0XHQkKCBhbmNob3IgKS5hZGRDbGFzcyggXCJ1aS1idG4gdWktY2hlY2tib3gtb2ZmIHVpLWJ0bi1pY29uLXJpZ2h0XCIgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aXRlbS5hcHBlbmRDaGlsZCggYW5jaG9yICk7XHJcblx0XHRcdGZyYWdtZW50LmFwcGVuZENoaWxkKCBpdGVtICk7XHJcblx0XHR9XHJcblxyXG5cdFx0c2VsZi5saXN0WzBdLmFwcGVuZENoaWxkKCBmcmFnbWVudCApO1xyXG5cclxuXHRcdC8vIEhpZGUgaGVhZGVyIGlmIGl0J3Mgbm90IGEgbXVsdGlzZWxlY3QgYW5kIHRoZXJlJ3Mgbm8gcGxhY2Vob2xkZXJcclxuXHRcdGlmICggIXRoaXMuaXNNdWx0aXBsZSAmJiAhcGxhY2Vob2xkZXIubGVuZ3RoICkge1xyXG5cdFx0XHR0aGlzLmhlYWRlci5hZGRDbGFzcyggXCJ1aS1zY3JlZW4taGlkZGVuXCIgKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRoaXMuaGVhZGVyVGl0bGUudGV4dCggdGhpcy5wbGFjZWhvbGRlciApO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIE5vdyBwb3B1bGF0ZWQsIGNyZWF0ZSBsaXN0dmlld1xyXG5cdFx0c2VsZi5saXN0Lmxpc3R2aWV3KCk7XHJcblx0fSxcclxuXHJcblx0X2J1dHRvbjogZnVuY3Rpb24oKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5vcHRpb25zLm5hdGl2ZU1lbnUgP1xyXG5cdFx0XHR0aGlzLl9zdXBlcigpIDpcclxuXHRcdFx0JCggXCI8YT5cIiwge1xyXG5cdFx0XHRcdFwiaHJlZlwiOiBcIiNcIixcclxuXHRcdFx0XHRcInJvbGVcIjogXCJidXR0b25cIixcclxuXHRcdFx0XHQvLyBUT0RPIHZhbHVlIGlzIHVuZGVmaW5lZCBhdCBjcmVhdGlvblxyXG5cdFx0XHRcdFwiaWRcIjogdGhpcy5idXR0b25JZCxcclxuXHRcdFx0XHRcImFyaWEtaGFzcG9wdXBcIjogXCJ0cnVlXCIsXHJcblxyXG5cdFx0XHRcdC8vIFRPRE8gdmFsdWUgaXMgdW5kZWZpbmVkIGF0IGNyZWF0aW9uXHJcblx0XHRcdFx0XCJhcmlhLW93bnNcIjogdGhpcy5tZW51SWRcclxuXHRcdFx0fSk7XHJcblx0fSxcclxuXHJcblx0X2Rlc3Ryb3k6IGZ1bmN0aW9uKCkge1xyXG5cclxuXHRcdGlmICggIXRoaXMub3B0aW9ucy5uYXRpdmVNZW51ICkge1xyXG5cdFx0XHR0aGlzLmNsb3NlKCk7XHJcblxyXG5cdFx0XHQvLyBSZXN0b3JlIHRoZSB0YWJpbmRleCBhdHRyaWJ1dGUgdG8gaXRzIG9yaWdpbmFsIHZhbHVlXHJcblx0XHRcdGlmICggdGhpcy5fb3JpZ1RhYkluZGV4ICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdFx0aWYgKCB0aGlzLl9vcmlnVGFiSW5kZXggIT09IGZhbHNlICkge1xyXG5cdFx0XHRcdFx0dGhpcy5zZWxlY3QuYXR0ciggXCJ0YWJpbmRleFwiLCB0aGlzLl9vcmlnVGFiSW5kZXggKTtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0dGhpcy5zZWxlY3QucmVtb3ZlQXR0ciggXCJ0YWJpbmRleFwiICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBSZW1vdmUgdGhlIHBsYWNlaG9sZGVyIGF0dHJpYnV0ZSBpZiB3ZSB3ZXJlIHRoZSBvbmVzIHRvIGFkZCBpdFxyXG5cdFx0XHRpZiAoIHRoaXMuX3JlbW92ZVBsYWNlaG9sZGVyQXR0ciApIHtcclxuXHRcdFx0XHR0aGlzLl9zZWxlY3RPcHRpb25zKCkucmVtb3ZlQXR0ciggXCJkYXRhLVwiICsgJC5tb2JpbGUubnMgKyBcInBsYWNlaG9sZGVyXCIgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gUmVtb3ZlIHRoZSBwb3B1cFxyXG5cdFx0XHR0aGlzLmxpc3Rib3gucmVtb3ZlKCk7XHJcblxyXG5cdFx0XHQvLyBSZW1vdmUgdGhlIGRpYWxvZ1xyXG5cdFx0XHR0aGlzLm1lbnVQYWdlLnJlbW92ZSgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIENoYWluIHVwXHJcblx0XHR0aGlzLl9zdXBlcigpO1xyXG5cdH1cclxufSk7XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG5cclxuLy8gYnV0dG9uTWFya3VwIGlzIGRlcHJlY2F0ZWQgYXMgb2YgMS40LjAgYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiAxLjUuMC5cclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxuLy8gR2VuZXJhbCBwb2xpY3k6IERvIG5vdCBhY2Nlc3MgZGF0YS0qIGF0dHJpYnV0ZXMgZXhjZXB0IGR1cmluZyBlbmhhbmNlbWVudC5cclxuLy8gSW4gYWxsIG90aGVyIGNhc2VzIHdlIGRldGVybWluZSB0aGUgc3RhdGUgb2YgdGhlIGJ1dHRvbiBleGNsdXNpdmVseSBmcm9tIGl0c1xyXG4vLyBjbGFzc05hbWUuIFRoYXQncyB3aHkgb3B0aW9uc1RvQ2xhc3NlcyBleHBlY3RzIGEgZnVsbCBjb21wbGVtZW50IG9mIG9wdGlvbnMsXHJcbi8vIGFuZCB0aGUgalF1ZXJ5IHBsdWdpbiBjb21wbGV0ZXMgdGhlIHNldCBvZiBvcHRpb25zIGZyb20gdGhlIGRlZmF1bHQgdmFsdWVzLlxyXG5cclxuLy8gTWFwIGNsYXNzZXMgdG8gYnV0dG9uTWFya3VwIGJvb2xlYW4gb3B0aW9ucyAtIHVzZWQgaW4gY2xhc3NOYW1lVG9PcHRpb25zKClcclxudmFyIHJldmVyc2VCb29sT3B0aW9uTWFwID0ge1xyXG5cdFx0XCJ1aS1zaGFkb3dcIiA6IFwic2hhZG93XCIsXHJcblx0XHRcInVpLWNvcm5lci1hbGxcIiA6IFwiY29ybmVyc1wiLFxyXG5cdFx0XCJ1aS1idG4taW5saW5lXCIgOiBcImlubGluZVwiLFxyXG5cdFx0XCJ1aS1zaGFkb3ctaWNvblwiIDogXCJpY29uc2hhZG93XCIsIC8qIFRPRE86IFJlbW92ZSBpbiAxLjUgKi9cclxuXHRcdFwidWktbWluaVwiIDogXCJtaW5pXCJcclxuXHR9LFxyXG5cdGdldEF0dHJGaXhlZCA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHJldCA9ICQubW9iaWxlLmdldEF0dHJpYnV0ZS5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XHJcblxyXG5cdFx0cmV0dXJuICggcmV0ID09IG51bGwgPyB1bmRlZmluZWQgOiByZXQgKTtcclxuXHR9LFxyXG5cdGNhcGl0YWxMZXR0ZXJzUkUgPSAvW0EtWl0vZztcclxuXHJcbi8vIG9wdGlvbnNUb0NsYXNzZXM6XHJcbi8vIEBvcHRpb25zOiBBIGNvbXBsZXRlIHNldCBvZiBvcHRpb25zIHRvIGNvbnZlcnQgdG8gY2xhc3MgbmFtZXMuXHJcbi8vIEBleGlzdGluZ0NsYXNzZXM6IGV4dHJhIGNsYXNzZXMgdG8gYWRkIHRvIHRoZSByZXN1bHRcclxuLy9cclxuLy8gQ29udmVydHMgQG9wdGlvbnMgdG8gYnV0dG9uTWFya3VwIGNsYXNzZXMgYW5kIHJldHVybnMgdGhlIHJlc3VsdCBhcyBhbiBhcnJheVxyXG4vLyB0aGF0IGNhbiBiZSBjb252ZXJ0ZWQgdG8gYW4gZWxlbWVudCdzIGNsYXNzTmFtZSB3aXRoIC5qb2luKCBcIiBcIiApLiBBbGxcclxuLy8gcG9zc2libGUgb3B0aW9ucyBtdXN0IGJlIHNldCBpbnNpZGUgQG9wdGlvbnMuIFVzZSAkLmZuLmJ1dHRvbk1hcmt1cC5kZWZhdWx0c1xyXG4vLyB0byBnZXQgYSBjb21wbGV0ZSBzZXQgYW5kIHVzZSAkLmV4dGVuZCB0byBvdmVycmlkZSB5b3VyIGNob2ljZSBvZiBvcHRpb25zXHJcbi8vIGZyb20gdGhhdCBzZXQuXHJcbmZ1bmN0aW9uIG9wdGlvbnNUb0NsYXNzZXMoIG9wdGlvbnMsIGV4aXN0aW5nQ2xhc3NlcyApIHtcclxuXHR2YXIgY2xhc3NlcyA9IGV4aXN0aW5nQ2xhc3NlcyA/IGV4aXN0aW5nQ2xhc3NlcyA6IFtdO1xyXG5cclxuXHQvLyBBZGQgY2xhc3NlcyB0byB0aGUgYXJyYXkgLSBmaXJzdCB1aS1idG5cclxuXHRjbGFzc2VzLnB1c2goIFwidWktYnRuXCIgKTtcclxuXHJcblx0Ly8gSWYgdGhlcmUgaXMgYSB0aGVtZVxyXG5cdGlmICggb3B0aW9ucy50aGVtZSApIHtcclxuXHRcdGNsYXNzZXMucHVzaCggXCJ1aS1idG4tXCIgKyBvcHRpb25zLnRoZW1lICk7XHJcblx0fVxyXG5cclxuXHQvLyBJZiB0aGVyZSdzIGFuIGljb24sIGFkZCB0aGUgaWNvbi1yZWxhdGVkIGNsYXNzZXNcclxuXHRpZiAoIG9wdGlvbnMuaWNvbiApIHtcclxuXHRcdGNsYXNzZXMgPSBjbGFzc2VzLmNvbmNhdChbXHJcblx0XHRcdFwidWktaWNvbi1cIiArIG9wdGlvbnMuaWNvbixcclxuXHRcdFx0XCJ1aS1idG4taWNvbi1cIiArIG9wdGlvbnMuaWNvbnBvc1xyXG5cdFx0XSk7XHJcblx0XHRpZiAoIG9wdGlvbnMuaWNvbnNoYWRvdyApIHtcclxuXHRcdFx0Y2xhc3Nlcy5wdXNoKCBcInVpLXNoYWRvdy1pY29uXCIgKTsgLyogVE9ETzogUmVtb3ZlIGluIDEuNSAqL1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0Ly8gQWRkIHRoZSBhcHByb3ByaWF0ZSBjbGFzcyBmb3IgZWFjaCBib29sZWFuIG9wdGlvblxyXG5cdGlmICggb3B0aW9ucy5pbmxpbmUgKSB7XHJcblx0XHRjbGFzc2VzLnB1c2goIFwidWktYnRuLWlubGluZVwiICk7XHJcblx0fVxyXG5cdGlmICggb3B0aW9ucy5zaGFkb3cgKSB7XHJcblx0XHRjbGFzc2VzLnB1c2goIFwidWktc2hhZG93XCIgKTtcclxuXHR9XHJcblx0aWYgKCBvcHRpb25zLmNvcm5lcnMgKSB7XHJcblx0XHRjbGFzc2VzLnB1c2goIFwidWktY29ybmVyLWFsbFwiICk7XHJcblx0fVxyXG5cdGlmICggb3B0aW9ucy5taW5pICkge1xyXG5cdFx0Y2xhc3Nlcy5wdXNoKCBcInVpLW1pbmlcIiApO1xyXG5cdH1cclxuXHJcblx0Ly8gQ3JlYXRlIGEgc3RyaW5nIGZyb20gdGhlIGFycmF5IGFuZCByZXR1cm4gaXRcclxuXHRyZXR1cm4gY2xhc3NlcztcclxufVxyXG5cclxuLy8gY2xhc3NOYW1lVG9PcHRpb25zOlxyXG4vLyBAY2xhc3NlczogQSBzdHJpbmcgY29udGFpbmluZyBhIC5jbGFzc05hbWUtc3R5bGUgc3BhY2Utc2VwYXJhdGVkIGNsYXNzIGxpc3RcclxuLy9cclxuLy8gTG9vcHMgb3ZlciBAY2xhc3NlcyBhbmQgY2FsY3VsYXRlcyBhbiBvcHRpb25zIG9iamVjdCBiYXNlZCBvbiB0aGVcclxuLy8gYnV0dG9uTWFya3VwLXJlbGF0ZWQgY2xhc3NlcyBpdCBmaW5kcy4gSXQgcmVjb3JkcyB1bnJlY29nbml6ZWQgY2xhc3NlcyBpbiBhblxyXG4vLyBhcnJheS5cclxuLy9cclxuLy8gUmV0dXJuczogQW4gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIGZvbGxvd2luZyBpdGVtczpcclxuLy9cclxuLy8gXCJvcHRpb25zXCI6IGJ1dHRvbk1hcmt1cCBvcHRpb25zIGZvdW5kIHRvIGJlIHByZXNlbnQgYmVjYXVzZSBvZiB0aGVcclxuLy8gcHJlc2VuY2UvYWJzZW5jZSBvZiBjb3JyZXNwb25kaW5nIGNsYXNzZXNcclxuLy9cclxuLy8gXCJ1bmtub3duQ2xhc3Nlc1wiOiBhIHN0cmluZyBjb250YWluaW5nIGFsbCB0aGUgbm9uLWJ1dHRvbk1hcmt1cC1yZWxhdGVkXHJcbi8vIGNsYXNzZXMgZm91bmQgaW4gQGNsYXNzZXNcclxuLy9cclxuLy8gXCJhbHJlYWR5RW5oYW5jZWRcIjogQSBib29sZWFuIGluZGljYXRpbmcgd2hldGhlciB0aGUgdWktYnRuIGNsYXNzIHdhcyBhbW9uZ1xyXG4vLyB0aG9zZSBmb3VuZCB0byBiZSBwcmVzZW50XHJcbmZ1bmN0aW9uIGNsYXNzTmFtZVRvT3B0aW9ucyggY2xhc3NlcyApIHtcclxuXHR2YXIgaWR4LCBtYXAsIHVua25vd25DbGFzcyxcclxuXHRcdGFscmVhZHlFbmhhbmNlZCA9IGZhbHNlLFxyXG5cdFx0bm9JY29uID0gdHJ1ZSxcclxuXHRcdG8gPSB7XHJcblx0XHRcdGljb246IFwiXCIsXHJcblx0XHRcdGlubGluZTogZmFsc2UsXHJcblx0XHRcdHNoYWRvdzogZmFsc2UsXHJcblx0XHRcdGNvcm5lcnM6IGZhbHNlLFxyXG5cdFx0XHRpY29uc2hhZG93OiBmYWxzZSxcclxuXHRcdFx0bWluaTogZmFsc2VcclxuXHRcdH0sXHJcblx0XHR1bmtub3duQ2xhc3NlcyA9IFtdO1xyXG5cclxuXHRjbGFzc2VzID0gY2xhc3Nlcy5zcGxpdCggXCIgXCIgKTtcclxuXHJcblx0Ly8gTG9vcCBvdmVyIHRoZSBjbGFzc2VzXHJcblx0Zm9yICggaWR4ID0gMCA7IGlkeCA8IGNsYXNzZXMubGVuZ3RoIDsgaWR4KysgKSB7XHJcblxyXG5cdFx0Ly8gQXNzdW1lIGl0J3MgYW4gdW5yZWNvZ25pemVkIGNsYXNzXHJcblx0XHR1bmtub3duQ2xhc3MgPSB0cnVlO1xyXG5cclxuXHRcdC8vIFJlY29nbml6ZSBib29sZWFuIG9wdGlvbnMgZnJvbSB0aGUgcHJlc2VuY2Ugb2YgY2xhc3Nlc1xyXG5cdFx0bWFwID0gcmV2ZXJzZUJvb2xPcHRpb25NYXBbIGNsYXNzZXNbIGlkeCBdIF07XHJcblx0XHRpZiAoIG1hcCAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHR1bmtub3duQ2xhc3MgPSBmYWxzZTtcclxuXHRcdFx0b1sgbWFwIF0gPSB0cnVlO1xyXG5cclxuXHRcdC8vIFJlY29nbml6ZSB0aGUgcHJlc2VuY2Ugb2YgYW4gaWNvbiBhbmQgZXN0YWJsaXNoIHRoZSBpY29uIHBvc2l0aW9uXHJcblx0XHR9IGVsc2UgaWYgKCBjbGFzc2VzWyBpZHggXS5pbmRleE9mKCBcInVpLWJ0bi1pY29uLVwiICkgPT09IDAgKSB7XHJcblx0XHRcdHVua25vd25DbGFzcyA9IGZhbHNlO1xyXG5cdFx0XHRub0ljb24gPSBmYWxzZTtcclxuXHRcdFx0by5pY29ucG9zID0gY2xhc3Nlc1sgaWR4IF0uc3Vic3RyaW5nKCAxMiApO1xyXG5cclxuXHRcdC8vIEVzdGFibGlzaCB3aGljaCBpY29uIGlzIHByZXNlbnRcclxuXHRcdH0gZWxzZSBpZiAoIGNsYXNzZXNbIGlkeCBdLmluZGV4T2YoIFwidWktaWNvbi1cIiApID09PSAwICkge1xyXG5cdFx0XHR1bmtub3duQ2xhc3MgPSBmYWxzZTtcclxuXHRcdFx0by5pY29uID0gY2xhc3Nlc1sgaWR4IF0uc3Vic3RyaW5nKCA4ICk7XHJcblxyXG5cdFx0Ly8gRXN0YWJsaXNoIHRoZSB0aGVtZSAtIHRoaXMgcmVjb2duaXplcyBvbmUtbGV0dGVyIHRoZW1lIHN3YXRjaCBuYW1lc1xyXG5cdFx0fSBlbHNlIGlmICggY2xhc3Nlc1sgaWR4IF0uaW5kZXhPZiggXCJ1aS1idG4tXCIgKSA9PT0gMCAmJiBjbGFzc2VzWyBpZHggXS5sZW5ndGggPT09IDggKSB7XHJcblx0XHRcdHVua25vd25DbGFzcyA9IGZhbHNlO1xyXG5cdFx0XHRvLnRoZW1lID0gY2xhc3Nlc1sgaWR4IF0uc3Vic3RyaW5nKCA3ICk7XHJcblxyXG5cdFx0Ly8gUmVjb2duaXplIHRoYXQgdGhpcyBlbGVtZW50IGhhcyBhbHJlYWR5IGJlZW4gYnV0dG9uTWFya3VwLWVuaGFuY2VkXHJcblx0XHR9IGVsc2UgaWYgKCBjbGFzc2VzWyBpZHggXSA9PT0gXCJ1aS1idG5cIiApIHtcclxuXHRcdFx0dW5rbm93bkNsYXNzID0gZmFsc2U7XHJcblx0XHRcdGFscmVhZHlFbmhhbmNlZCA9IHRydWU7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gSWYgdGhpcyBjbGFzcyBoYXMgbm90IGJlZW4gcmVjb2duaXplZCwgYWRkIGl0IHRvIHRoZSBsaXN0XHJcblx0XHRpZiAoIHVua25vd25DbGFzcyApIHtcclxuXHRcdFx0dW5rbm93bkNsYXNzZXMucHVzaCggY2xhc3Nlc1sgaWR4IF0gKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8vIElmIGEgXCJ1aS1idG4taWNvbi0qXCIgaWNvbiBwb3NpdGlvbiBjbGFzcyBpcyBhYnNlbnQgdGhlcmUgY2Fubm90IGJlIGFuIGljb25cclxuXHRpZiAoIG5vSWNvbiApIHtcclxuXHRcdG8uaWNvbiA9IFwiXCI7XHJcblx0fVxyXG5cclxuXHRyZXR1cm4ge1xyXG5cdFx0b3B0aW9uczogbyxcclxuXHRcdHVua25vd25DbGFzc2VzOiB1bmtub3duQ2xhc3NlcyxcclxuXHRcdGFscmVhZHlFbmhhbmNlZDogYWxyZWFkeUVuaGFuY2VkXHJcblx0fTtcclxufVxyXG5cclxuZnVuY3Rpb24gY2FtZWxDYXNlMkh5cGhlbmF0ZWQoIGMgKSB7XHJcblx0cmV0dXJuIFwiLVwiICsgYy50b0xvd2VyQ2FzZSgpO1xyXG59XHJcblxyXG4vLyAkLmZuLmJ1dHRvbk1hcmt1cDpcclxuLy8gRE9NOiBnZXRzL3NldHMgLmNsYXNzTmFtZVxyXG4vL1xyXG4vLyBAb3B0aW9uczogb3B0aW9ucyB0byBhcHBseSB0byB0aGUgZWxlbWVudHMgaW4gdGhlIGpRdWVyeSBvYmplY3RcclxuLy8gQG92ZXJ3cml0ZUNsYXNzZXM6IGJvb2xlYW4gaW5kaWNhdGluZyB3aGV0aGVyIHRvIGhvbm91ciBleGlzdGluZyBjbGFzc2VzXHJcbi8vXHJcbi8vIENhbGN1bGF0ZXMgdGhlIGNsYXNzZXMgdG8gYXBwbHkgdG8gdGhlIGVsZW1lbnRzIGluIHRoZSBqUXVlcnkgb2JqZWN0IGJhc2VkIG9uXHJcbi8vIHRoZSBvcHRpb25zIHBhc3NlZCBpbi4gSWYgQG92ZXJ3cml0ZUNsYXNzZXMgaXMgdHJ1ZSwgaXQgc2V0cyB0aGUgY2xhc3NOYW1lXHJcbi8vIHByb3BlcnR5IG9mIGVhY2ggZWxlbWVudCBpbiB0aGUgalF1ZXJ5IG9iamVjdCB0byB0aGUgYnV0dG9uTWFya3VwIGNsYXNzZXNcclxuLy8gaXQgY2FsY3VsYXRlcyBiYXNlZCBvbiB0aGUgb3B0aW9ucyBwYXNzZWQgaW4uXHJcbi8vXHJcbi8vIElmIHlvdSB3aXNoIHRvIHByZXNlcnZlIGFueSBjbGFzc2VzIHRoYXQgYXJlIGFscmVhZHkgcHJlc2VudCBvbiB0aGUgZWxlbWVudHNcclxuLy8gaW5zaWRlIHRoZSBqUXVlcnkgb2JqZWN0LCBpbmNsdWRpbmcgYnV0dG9uTWFya3VwLXJlbGF0ZWQgY2xhc3NlcyB0aGF0IHdlcmVcclxuLy8gYWRkZWQgYnkgYSBwcmV2aW91cyBjYWxsIHRvICQuZm4uYnV0dG9uTWFya3VwKCkgb3IgZHVyaW5nIHBhZ2UgZW5oYW5jZW1lbnRcclxuLy8gdGhlbiB5b3Ugc2hvdWxkIG9taXQgQG92ZXJ3cml0ZUNsYXNzZXMgb3Igc2V0IGl0IHRvIGZhbHNlLlxyXG4kLmZuLmJ1dHRvbk1hcmt1cCA9IGZ1bmN0aW9uKCBvcHRpb25zLCBvdmVyd3JpdGVDbGFzc2VzICkge1xyXG5cdHZhciBpZHgsIGRhdGEsIGVsLCByZXRyaWV2ZWRPcHRpb25zLCBvcHRpb25LZXksXHJcblx0XHRkZWZhdWx0cyA9ICQuZm4uYnV0dG9uTWFya3VwLmRlZmF1bHRzO1xyXG5cclxuXHRmb3IgKCBpZHggPSAwIDsgaWR4IDwgdGhpcy5sZW5ndGggOyBpZHgrKyApIHtcclxuXHRcdGVsID0gdGhpc1sgaWR4IF07XHJcblx0XHRkYXRhID0gb3ZlcndyaXRlQ2xhc3NlcyA/XHJcblxyXG5cdFx0XHQvLyBBc3N1bWUgdGhpcyBlbGVtZW50IGlzIG5vdCBlbmhhbmNlZCBhbmQgaWdub3JlIGl0cyBjbGFzc2VzXHJcblx0XHRcdHsgYWxyZWFkeUVuaGFuY2VkOiBmYWxzZSwgdW5rbm93bkNsYXNzZXM6IFtdIH0gOlxyXG5cclxuXHRcdFx0Ly8gT3RoZXJ3aXNlIGFuYWx5emUgZXhpc3RpbmcgY2xhc3NlcyB0byBlc3RhYmxpc2ggZXhpc3Rpbmcgb3B0aW9ucyBhbmRcclxuXHRcdFx0Ly8gY2xhc3Nlc1xyXG5cdFx0XHRjbGFzc05hbWVUb09wdGlvbnMoIGVsLmNsYXNzTmFtZSApO1xyXG5cclxuXHRcdHJldHJpZXZlZE9wdGlvbnMgPSAkLmV4dGVuZCgge30sXHJcblxyXG5cdFx0XHQvLyBJZiB0aGUgZWxlbWVudCBhbHJlYWR5IGhhcyB0aGUgY2xhc3MgdWktYnRuLCB0aGVuIHdlIGFzc3VtZSB0aGF0XHJcblx0XHRcdC8vIGl0IGhhcyBwYXNzZWQgdGhyb3VnaCBidXR0b25NYXJrdXAgYmVmb3JlIC0gb3RoZXJ3aXNlLCB0aGUgb3B0aW9uc1xyXG5cdFx0XHQvLyByZXR1cm5lZCBieSBjbGFzc05hbWVUb09wdGlvbnMgZG8gbm90IGNvcnJlY3RseSByZWZsZWN0IHRoZSBzdGF0ZSBvZlxyXG5cdFx0XHQvLyB0aGUgZWxlbWVudFxyXG5cdFx0XHQoIGRhdGEuYWxyZWFkeUVuaGFuY2VkID8gZGF0YS5vcHRpb25zIDoge30gKSxcclxuXHJcblx0XHRcdC8vIEZpbmFsbHksIGFwcGx5IHRoZSBvcHRpb25zIHBhc3NlZCBpblxyXG5cdFx0XHRvcHRpb25zICk7XHJcblxyXG5cdFx0Ly8gSWYgdGhpcyBpcyB0aGUgZmlyc3QgY2FsbCBvbiB0aGlzIGVsZW1lbnQsIHJldHJpZXZlIHJlbWFpbmluZyBvcHRpb25zXHJcblx0XHQvLyBmcm9tIHRoZSBkYXRhLWF0dHJpYnV0ZXNcclxuXHRcdGlmICggIWRhdGEuYWxyZWFkeUVuaGFuY2VkICkge1xyXG5cdFx0XHRmb3IgKCBvcHRpb25LZXkgaW4gZGVmYXVsdHMgKSB7XHJcblx0XHRcdFx0aWYgKCByZXRyaWV2ZWRPcHRpb25zWyBvcHRpb25LZXkgXSA9PT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRcdFx0cmV0cmlldmVkT3B0aW9uc1sgb3B0aW9uS2V5IF0gPSBnZXRBdHRyRml4ZWQoIGVsLFxyXG5cdFx0XHRcdFx0XHRvcHRpb25LZXkucmVwbGFjZSggY2FwaXRhbExldHRlcnNSRSwgY2FtZWxDYXNlMkh5cGhlbmF0ZWQgKVxyXG5cdFx0XHRcdFx0KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRlbC5jbGFzc05hbWUgPSBvcHRpb25zVG9DbGFzc2VzKFxyXG5cclxuXHRcdFx0Ly8gTWVyZ2UgYWxsIHRoZSBvcHRpb25zIGFuZCBhcHBseSB0aGVtIGFzIGNsYXNzZXNcclxuXHRcdFx0JC5leHRlbmQoIHt9LFxyXG5cclxuXHRcdFx0XHQvLyBUaGUgZGVmYXVsdHMgZm9ybSB0aGUgYmFzaXNcclxuXHRcdFx0XHRkZWZhdWx0cyxcclxuXHJcblx0XHRcdFx0Ly8gQWRkIHRoZSBjb21wdXRlZCBvcHRpb25zXHJcblx0XHRcdFx0cmV0cmlldmVkT3B0aW9uc1xyXG5cdFx0XHQpLFxyXG5cclxuXHRcdFx0Ly8gLi4uIGFuZCByZS1hcHBseSBhbnkgdW5yZWNvZ25pemVkIGNsYXNzZXMgdGhhdCB3ZXJlIGZvdW5kXHJcblx0XHRcdGRhdGEudW5rbm93bkNsYXNzZXMgKS5qb2luKCBcIiBcIiApO1xyXG5cdFx0aWYgKCBlbC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgIT09IFwiYnV0dG9uXCIgKSB7XHJcblx0XHRcdGVsLnNldEF0dHJpYnV0ZSggXCJyb2xlXCIsIFwiYnV0dG9uXCIgKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdHJldHVybiB0aGlzO1xyXG59O1xyXG5cclxuLy8gYnV0dG9uTWFya3VwIGRlZmF1bHRzLiBUaGlzIG11c3QgYmUgYSBjb21wbGV0ZSBzZXQsIGkuZS4sIGEgdmFsdWUgbXVzdCBiZVxyXG4vLyBnaXZlbiBoZXJlIGZvciBhbGwgcmVjb2duaXplZCBvcHRpb25zXHJcbiQuZm4uYnV0dG9uTWFya3VwLmRlZmF1bHRzID0ge1xyXG5cdGljb246IFwiXCIsXHJcblx0aWNvbnBvczogXCJsZWZ0XCIsXHJcblx0dGhlbWU6IG51bGwsXHJcblx0aW5saW5lOiBmYWxzZSxcclxuXHRzaGFkb3c6IHRydWUsXHJcblx0Y29ybmVyczogdHJ1ZSxcclxuXHRpY29uc2hhZG93OiBmYWxzZSwgLyogVE9ETzogUmVtb3ZlIGluIDEuNS4gT3B0aW9uIGRlcHJlY2F0ZWQgaW4gMS40LiAqL1xyXG5cdG1pbmk6IGZhbHNlXHJcbn07XHJcblxyXG4kLmV4dGVuZCggJC5mbi5idXR0b25NYXJrdXAsIHtcclxuXHRpbml0U2VsZWN0b3I6IFwiYTpqcW1EYXRhKHJvbGU9J2J1dHRvbicpLCAudWktYmFyID4gYSwgLnVpLWJhciA+IDpqcW1EYXRhKHJvbGU9J2NvbnRyb2xncm91cCcpID4gYSwgYnV0dG9uOm5vdCg6anFtRGF0YShyb2xlPSduYXZiYXInKSBidXR0b24pXCJcclxufSk7XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG4kLndpZGdldCggXCJtb2JpbGUuY29udHJvbGdyb3VwXCIsICQuZXh0ZW5kKCB7XHJcblx0b3B0aW9uczoge1xyXG5cdFx0ZW5oYW5jZWQ6IGZhbHNlLFxyXG5cdFx0dGhlbWU6IG51bGwsXHJcblx0XHRzaGFkb3c6IGZhbHNlLFxyXG5cdFx0Y29ybmVyczogdHJ1ZSxcclxuXHRcdGV4Y2x1ZGVJbnZpc2libGU6IHRydWUsXHJcblx0XHR0eXBlOiBcInZlcnRpY2FsXCIsXHJcblx0XHRtaW5pOiBmYWxzZVxyXG5cdH0sXHJcblxyXG5cdF9jcmVhdGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGVsZW0gPSB0aGlzLmVsZW1lbnQsXHJcblx0XHRcdG9wdHMgPSB0aGlzLm9wdGlvbnMsXHJcblx0XHRcdGtlZXBOYXRpdmUgPSAkLm1vYmlsZS5wYWdlLnByb3RvdHlwZS5rZWVwTmF0aXZlU2VsZWN0b3IoKTtcclxuXHJcblx0XHQvLyBSdW4gYnV0dG9ubWFya3VwXHJcblx0XHRpZiAoICQuZm4uYnV0dG9uTWFya3VwICkge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnRcclxuXHRcdFx0XHQuZmluZCggJC5mbi5idXR0b25NYXJrdXAuaW5pdFNlbGVjdG9yIClcclxuXHRcdFx0XHQubm90KCBrZWVwTmF0aXZlIClcclxuXHRcdFx0XHQuYnV0dG9uTWFya3VwKCk7XHJcblx0XHR9XHJcblx0XHQvLyBFbmhhbmNlIGNoaWxkIHdpZGdldHNcclxuXHRcdCQuZWFjaCggdGhpcy5fY2hpbGRXaWRnZXRzLCAkLnByb3h5KCBmdW5jdGlvbiggbnVtYmVyLCB3aWRnZXROYW1lICkge1xyXG5cdFx0XHRpZiAoICQubW9iaWxlWyB3aWRnZXROYW1lIF0gKSB7XHJcblx0XHRcdFx0dGhpcy5lbGVtZW50XHJcblx0XHRcdFx0XHQuZmluZCggJC5tb2JpbGVbIHdpZGdldE5hbWUgXS5pbml0U2VsZWN0b3IgKVxyXG5cdFx0XHRcdFx0Lm5vdCgga2VlcE5hdGl2ZSApWyB3aWRnZXROYW1lIF0oKTtcclxuXHRcdFx0fVxyXG5cdFx0fSwgdGhpcyApKTtcclxuXHJcblx0XHQkLmV4dGVuZCggdGhpcywge1xyXG5cdFx0XHRfdWk6IG51bGwsXHJcblx0XHRcdF9pbml0aWFsUmVmcmVzaDogdHJ1ZVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0aWYgKCBvcHRzLmVuaGFuY2VkICkge1xyXG5cdFx0XHR0aGlzLl91aSA9IHtcclxuXHRcdFx0XHRncm91cExlZ2VuZDogZWxlbS5jaGlsZHJlbiggXCIudWktY29udHJvbGdyb3VwLWxhYmVsXCIgKS5jaGlsZHJlbigpLFxyXG5cdFx0XHRcdGNoaWxkV3JhcHBlcjogZWxlbS5jaGlsZHJlbiggXCIudWktY29udHJvbGdyb3VwLWNvbnRyb2xzXCIgKVxyXG5cdFx0XHR9O1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhpcy5fdWkgPSB0aGlzLl9lbmhhbmNlKCk7XHJcblx0XHR9XHJcblxyXG5cdH0sXHJcblxyXG5cdF9jaGlsZFdpZGdldHM6IFsgXCJjaGVja2JveHJhZGlvXCIsIFwic2VsZWN0bWVudVwiLCBcImJ1dHRvblwiIF0sXHJcblxyXG5cdF90aGVtZUNsYXNzRnJvbU9wdGlvbjogZnVuY3Rpb24oIHZhbHVlICkge1xyXG5cdFx0cmV0dXJuICggdmFsdWUgPyAoIHZhbHVlID09PSBcIm5vbmVcIiA/IFwiXCIgOiBcInVpLWdyb3VwLXRoZW1lLVwiICsgdmFsdWUgKSA6IFwiXCIgKTtcclxuXHR9LFxyXG5cclxuXHRfZW5oYW5jZTogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgZWxlbSA9IHRoaXMuZWxlbWVudCxcclxuXHRcdFx0b3B0cyA9IHRoaXMub3B0aW9ucyxcclxuXHRcdFx0dWkgPSB7XHJcblx0XHRcdFx0Z3JvdXBMZWdlbmQ6IGVsZW0uY2hpbGRyZW4oIFwibGVnZW5kXCIgKSxcclxuXHRcdFx0XHRjaGlsZFdyYXBwZXI6IGVsZW1cclxuXHRcdFx0XHRcdC5hZGRDbGFzcyggXCJ1aS1jb250cm9sZ3JvdXAgXCIgK1xyXG5cdFx0XHRcdFx0XHRcInVpLWNvbnRyb2xncm91cC1cIiArXHJcblx0XHRcdFx0XHRcdFx0KCBvcHRzLnR5cGUgPT09IFwiaG9yaXpvbnRhbFwiID8gXCJob3Jpem9udGFsXCIgOiBcInZlcnRpY2FsXCIgKSArIFwiIFwiICtcclxuXHRcdFx0XHRcdFx0dGhpcy5fdGhlbWVDbGFzc0Zyb21PcHRpb24oIG9wdHMudGhlbWUgKSArIFwiIFwiICtcclxuXHRcdFx0XHRcdFx0KCBvcHRzLmNvcm5lcnMgPyBcInVpLWNvcm5lci1hbGwgXCIgOiBcIlwiICkgK1xyXG5cdFx0XHRcdFx0XHQoIG9wdHMubWluaSA/IFwidWktbWluaSBcIiA6IFwiXCIgKSApXHJcblx0XHRcdFx0XHQud3JhcElubmVyKCBcIjxkaXYgXCIgK1xyXG5cdFx0XHRcdFx0XHRcImNsYXNzPSd1aS1jb250cm9sZ3JvdXAtY29udHJvbHMgXCIgK1xyXG5cdFx0XHRcdFx0XHRcdCggb3B0cy5zaGFkb3cgPT09IHRydWUgPyBcInVpLXNoYWRvd1wiIDogXCJcIiApICsgXCInPjwvZGl2PlwiIClcclxuXHRcdFx0XHRcdC5jaGlsZHJlbigpXHJcblx0XHRcdH07XHJcblxyXG5cdFx0aWYgKCB1aS5ncm91cExlZ2VuZC5sZW5ndGggPiAwICkge1xyXG5cdFx0XHQkKCBcIjxkaXYgcm9sZT0naGVhZGluZycgY2xhc3M9J3VpLWNvbnRyb2xncm91cC1sYWJlbCc+PC9kaXY+XCIgKVxyXG5cdFx0XHRcdC5hcHBlbmQoIHVpLmdyb3VwTGVnZW5kIClcclxuXHRcdFx0XHQucHJlcGVuZFRvKCBlbGVtICk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHVpO1xyXG5cdH0sXHJcblxyXG5cdF9pbml0OiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMucmVmcmVzaCgpO1xyXG5cdH0sXHJcblxyXG5cdF9zZXRPcHRpb25zOiBmdW5jdGlvbiggb3B0aW9ucyApIHtcclxuXHRcdHZhciBjYWxsUmVmcmVzaCwgcmV0dXJuVmFsdWUsXHJcblx0XHRcdGVsZW0gPSB0aGlzLmVsZW1lbnQ7XHJcblxyXG5cdFx0Ly8gTXVzdCBoYXZlIG9uZSBvZiBob3Jpem9udGFsIG9yIHZlcnRpY2FsXHJcblx0XHRpZiAoIG9wdGlvbnMudHlwZSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRlbGVtXHJcblx0XHRcdFx0LnJlbW92ZUNsYXNzKCBcInVpLWNvbnRyb2xncm91cC1ob3Jpem9udGFsIHVpLWNvbnRyb2xncm91cC12ZXJ0aWNhbFwiIClcclxuXHRcdFx0XHQuYWRkQ2xhc3MoIFwidWktY29udHJvbGdyb3VwLVwiICsgKCBvcHRpb25zLnR5cGUgPT09IFwiaG9yaXpvbnRhbFwiID8gXCJob3Jpem9udGFsXCIgOiBcInZlcnRpY2FsXCIgKSApO1xyXG5cdFx0XHRjYWxsUmVmcmVzaCA9IHRydWU7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBvcHRpb25zLnRoZW1lICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdGVsZW1cclxuXHRcdFx0XHQucmVtb3ZlQ2xhc3MoIHRoaXMuX3RoZW1lQ2xhc3NGcm9tT3B0aW9uKCB0aGlzLm9wdGlvbnMudGhlbWUgKSApXHJcblx0XHRcdFx0LmFkZENsYXNzKCB0aGlzLl90aGVtZUNsYXNzRnJvbU9wdGlvbiggb3B0aW9ucy50aGVtZSApICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBvcHRpb25zLmNvcm5lcnMgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0ZWxlbS50b2dnbGVDbGFzcyggXCJ1aS1jb3JuZXItYWxsXCIsIG9wdGlvbnMuY29ybmVycyApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggb3B0aW9ucy5taW5pICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdGVsZW0udG9nZ2xlQ2xhc3MoIFwidWktbWluaVwiLCBvcHRpb25zLm1pbmkgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG9wdGlvbnMuc2hhZG93ICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdHRoaXMuX3VpLmNoaWxkV3JhcHBlci50b2dnbGVDbGFzcyggXCJ1aS1zaGFkb3dcIiwgb3B0aW9ucy5zaGFkb3cgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG9wdGlvbnMuZXhjbHVkZUludmlzaWJsZSAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHR0aGlzLm9wdGlvbnMuZXhjbHVkZUludmlzaWJsZSA9IG9wdGlvbnMuZXhjbHVkZUludmlzaWJsZTtcclxuXHRcdFx0Y2FsbFJlZnJlc2ggPSB0cnVlO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVyblZhbHVlID0gdGhpcy5fc3VwZXIoIG9wdGlvbnMgKTtcclxuXHJcblx0XHRpZiAoIGNhbGxSZWZyZXNoICkge1xyXG5cdFx0XHR0aGlzLnJlZnJlc2goKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gcmV0dXJuVmFsdWU7XHJcblx0fSxcclxuXHJcblx0Y29udGFpbmVyOiBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiB0aGlzLl91aS5jaGlsZFdyYXBwZXI7XHJcblx0fSxcclxuXHJcblx0cmVmcmVzaDogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgJGVsID0gdGhpcy5jb250YWluZXIoKSxcclxuXHRcdFx0ZWxzID0gJGVsLmZpbmQoIFwiLnVpLWJ0blwiICkubm90KCBcIi51aS1zbGlkZXItaGFuZGxlXCIgKSxcclxuXHRcdFx0Y3JlYXRlID0gdGhpcy5faW5pdGlhbFJlZnJlc2g7XHJcblx0XHRpZiAoICQubW9iaWxlLmNoZWNrYm94cmFkaW8gKSB7XHJcblx0XHRcdCRlbC5maW5kKCBcIjptb2JpbGUtY2hlY2tib3hyYWRpb1wiICkuY2hlY2tib3hyYWRpbyggXCJyZWZyZXNoXCIgKTtcclxuXHRcdH1cclxuXHRcdHRoaXMuX2FkZEZpcnN0TGFzdENsYXNzZXMoIGVscyxcclxuXHRcdFx0dGhpcy5vcHRpb25zLmV4Y2x1ZGVJbnZpc2libGUgPyB0aGlzLl9nZXRWaXNpYmxlcyggZWxzLCBjcmVhdGUgKSA6IGVscyxcclxuXHRcdFx0Y3JlYXRlICk7XHJcblx0XHR0aGlzLl9pbml0aWFsUmVmcmVzaCA9IGZhbHNlO1xyXG5cdH0sXHJcblxyXG5cdC8vIENhdmVhdDogSWYgdGhlIGxlZ2VuZCBpcyBub3QgdGhlIGZpcnN0IGNoaWxkIG9mIHRoZSBjb250cm9sZ3JvdXAgYXQgZW5oYW5jZVxyXG5cdC8vIHRpbWUsIGl0IHdpbGwgYmUgYWZ0ZXIgX2Rlc3Ryb3koKS5cclxuXHRfZGVzdHJveTogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgdWksIGJ1dHRvbnMsXHJcblx0XHRcdG9wdHMgPSB0aGlzLm9wdGlvbnM7XHJcblxyXG5cdFx0aWYgKCBvcHRzLmVuaGFuY2VkICkge1xyXG5cdFx0XHRyZXR1cm4gdGhpcztcclxuXHRcdH1cclxuXHJcblx0XHR1aSA9IHRoaXMuX3VpO1xyXG5cdFx0YnV0dG9ucyA9IHRoaXMuZWxlbWVudFxyXG5cdFx0XHQucmVtb3ZlQ2xhc3MoIFwidWktY29udHJvbGdyb3VwIFwiICtcclxuXHRcdFx0XHRcInVpLWNvbnRyb2xncm91cC1ob3Jpem9udGFsIHVpLWNvbnRyb2xncm91cC12ZXJ0aWNhbCB1aS1jb3JuZXItYWxsIHVpLW1pbmkgXCIgK1xyXG5cdFx0XHRcdHRoaXMuX3RoZW1lQ2xhc3NGcm9tT3B0aW9uKCBvcHRzLnRoZW1lICkgKVxyXG5cdFx0XHQuZmluZCggXCIudWktYnRuXCIgKVxyXG5cdFx0XHQubm90KCBcIi51aS1zbGlkZXItaGFuZGxlXCIgKTtcclxuXHJcblx0XHR0aGlzLl9yZW1vdmVGaXJzdExhc3RDbGFzc2VzKCBidXR0b25zICk7XHJcblxyXG5cdFx0dWkuZ3JvdXBMZWdlbmQudW53cmFwKCk7XHJcblx0XHR1aS5jaGlsZFdyYXBwZXIuY2hpbGRyZW4oKS51bndyYXAoKTtcclxuXHR9XHJcbn0sICQubW9iaWxlLmJlaGF2aW9ycy5hZGRGaXJzdExhc3RDbGFzc2VzICkgKTtcclxuXHJcbn0pKGpRdWVyeSk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcblx0JC53aWRnZXQoIFwibW9iaWxlLnRvb2xiYXJcIiwge1xyXG5cdFx0aW5pdFNlbGVjdG9yOiBcIjpqcW1EYXRhKHJvbGU9J2Zvb3RlcicpLCA6anFtRGF0YShyb2xlPSdoZWFkZXInKVwiLFxyXG5cclxuXHRcdG9wdGlvbnM6IHtcclxuXHRcdFx0dGhlbWU6IG51bGwsXHJcblx0XHRcdGFkZEJhY2tCdG46IGZhbHNlLFxyXG5cdFx0XHRiYWNrQnRuVGhlbWU6IG51bGwsXHJcblx0XHRcdGJhY2tCdG5UZXh0OiBcIkJhY2tcIlxyXG5cdFx0fSxcclxuXHJcblx0XHRfY3JlYXRlOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIGxlZnRidG4sIHJpZ2h0YnRuLFxyXG5cdFx0XHRcdHJvbGUgPSAgdGhpcy5lbGVtZW50LmlzKCBcIjpqcW1EYXRhKHJvbGU9J2hlYWRlcicpXCIgKSA/IFwiaGVhZGVyXCIgOiBcImZvb3RlclwiLFxyXG5cdFx0XHRcdHBhZ2UgPSB0aGlzLmVsZW1lbnQuY2xvc2VzdCggXCIudWktcGFnZVwiICk7XHJcblx0XHRcdGlmICggcGFnZS5sZW5ndGggPT09IDAgKSB7XHJcblx0XHRcdFx0cGFnZSA9IGZhbHNlO1xyXG5cdFx0XHRcdHRoaXMuX29uKCB0aGlzLmRvY3VtZW50LCB7XHJcblx0XHRcdFx0XHRcInBhZ2VzaG93XCI6IFwicmVmcmVzaFwiXHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdFx0JC5leHRlbmQoIHRoaXMsIHtcclxuXHRcdFx0XHRyb2xlOiByb2xlLFxyXG5cdFx0XHRcdHBhZ2U6IHBhZ2UsXHJcblx0XHRcdFx0bGVmdGJ0bjogbGVmdGJ0bixcclxuXHRcdFx0XHRyaWdodGJ0bjogcmlnaHRidG5cclxuXHRcdFx0fSk7XHJcblx0XHRcdHRoaXMuZWxlbWVudC5hdHRyKCBcInJvbGVcIiwgcm9sZSA9PT0gXCJoZWFkZXJcIiA/IFwiYmFubmVyXCIgOiBcImNvbnRlbnRpbmZvXCIgKS5hZGRDbGFzcyggXCJ1aS1cIiArIHJvbGUgKTtcclxuXHRcdFx0dGhpcy5yZWZyZXNoKCk7XHJcblx0XHRcdHRoaXMuX3NldE9wdGlvbnMoIHRoaXMub3B0aW9ucyApO1xyXG5cdFx0fSxcclxuXHRcdF9zZXRPcHRpb25zOiBmdW5jdGlvbiggbyApIHtcclxuXHRcdFx0aWYgKCBvLmFkZEJhY2tCdG4gIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0XHR0aGlzLl91cGRhdGVCYWNrQnV0dG9uKCk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKCBvLmJhY2tCdG5UaGVtZSAhPSBudWxsICkge1xyXG5cdFx0XHRcdHRoaXMuZWxlbWVudFxyXG5cdFx0XHRcdFx0LmZpbmQoIFwiLnVpLXRvb2xiYXItYmFjay1idG5cIiApXHJcblx0XHRcdFx0XHQuYWRkQ2xhc3MoIFwidWktYnRuIHVpLWJ0bi1cIiArIG8uYmFja0J0blRoZW1lICk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKCBvLmJhY2tCdG5UZXh0ICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdFx0dGhpcy5lbGVtZW50LmZpbmQoIFwiLnVpLXRvb2xiYXItYmFjay1idG4gLnVpLWJ0bi10ZXh0XCIgKS50ZXh0KCBvLmJhY2tCdG5UZXh0ICk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKCBvLnRoZW1lICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdFx0dmFyIGN1cnJlbnRUaGVtZSA9IHRoaXMub3B0aW9ucy50aGVtZSA/IHRoaXMub3B0aW9ucy50aGVtZSA6IFwiaW5oZXJpdFwiLFxyXG5cdFx0XHRcdFx0bmV3VGhlbWUgPSBvLnRoZW1lID8gby50aGVtZSA6IFwiaW5oZXJpdFwiO1xyXG5cclxuXHRcdFx0XHR0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3MoIFwidWktYmFyLVwiICsgY3VycmVudFRoZW1lICkuYWRkQ2xhc3MoIFwidWktYmFyLVwiICsgbmV3VGhlbWUgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dGhpcy5fc3VwZXIoIG8gKTtcclxuXHRcdH0sXHJcblx0XHRyZWZyZXNoOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0aWYgKCB0aGlzLnJvbGUgPT09IFwiaGVhZGVyXCIgKSB7XHJcblx0XHRcdFx0dGhpcy5fYWRkSGVhZGVyQnV0dG9uQ2xhc3NlcygpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICggIXRoaXMucGFnZSApIHtcclxuXHRcdFx0XHR0aGlzLl9zZXRSZWxhdGl2ZSgpO1xyXG5cdFx0XHRcdGlmICggdGhpcy5yb2xlID09PSBcImZvb3RlclwiICkge1xyXG5cdFx0XHRcdFx0dGhpcy5lbGVtZW50LmFwcGVuZFRvKCBcImJvZHlcIiApO1xyXG5cdFx0XHRcdH0gZWxzZSBpZiAoIHRoaXMucm9sZSA9PT0gXCJoZWFkZXJcIiApIHtcclxuXHRcdFx0XHRcdHRoaXMuX3VwZGF0ZUJhY2tCdXR0b24oKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0dGhpcy5fYWRkSGVhZGluZ0NsYXNzZXMoKTtcclxuXHRcdFx0dGhpcy5fYnRuTWFya3VwKCk7XHJcblx0XHR9LFxyXG5cclxuXHRcdC8vd2Ugb25seSB3YW50IHRoaXMgdG8gcnVuIG9uIG5vbiBmaXhlZCB0b29sYmFycyBzbyBtYWtlIGl0IGVhc3kgdG8gb3ZlcnJpZGVcclxuXHRcdF9zZXRSZWxhdGl2ZTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdCQoIFwiW2RhdGEtXCIrICQubW9iaWxlLm5zICsgXCJyb2xlPSdwYWdlJ11cIiApLmNzcyh7IFwicG9zaXRpb25cIjogXCJyZWxhdGl2ZVwiIH0pO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvLyBEZXByZWNhdGVkIGluIDEuNC4gQXMgZnJvbSAxLjUgYnV0dG9uIGNsYXNzZXMgaGF2ZSB0byBiZSBwcmVzZW50IGluIHRoZSBtYXJrdXAuXHJcblx0XHRfYnRuTWFya3VwOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50XHJcblx0XHRcdFx0LmNoaWxkcmVuKCBcImFcIiApXHJcblx0XHRcdFx0LmZpbHRlciggXCI6bm90KFtkYXRhLVwiICsgJC5tb2JpbGUubnMgKyBcInJvbGU9J25vbmUnXSlcIiApXHJcblx0XHRcdFx0LmF0dHIoIFwiZGF0YS1cIiArICQubW9iaWxlLm5zICsgXCJyb2xlXCIsIFwiYnV0dG9uXCIgKTtcclxuXHRcdFx0dGhpcy5lbGVtZW50LnRyaWdnZXIoIFwiY3JlYXRlXCIgKTtcclxuXHRcdH0sXHJcblx0XHQvLyBEZXByZWNhdGVkIGluIDEuNC4gQXMgZnJvbSAxLjUgdWktYnRuLWxlZnQvcmlnaHQgY2xhc3NlcyBoYXZlIHRvIGJlIHByZXNlbnQgaW4gdGhlIG1hcmt1cC5cclxuXHRcdF9hZGRIZWFkZXJCdXR0b25DbGFzc2VzOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIGhlYWRlckFuY2hvcnMgPSB0aGlzLmVsZW1lbnQuY2hpbGRyZW4oIFwiYSwgYnV0dG9uXCIgKTtcclxuXHJcblx0XHRcdC8vIERvIG5vdCBtaXN0YWtlIGEgYmFjayBidXR0b24gZm9yIGEgbGVmdCB0b29sYmFyIGJ1dHRvblxyXG5cdFx0XHR0aGlzLmxlZnRidG4gPSBoZWFkZXJBbmNob3JzLmhhc0NsYXNzKCBcInVpLWJ0bi1sZWZ0XCIgKSAmJlxyXG5cdFx0XHRcdCFoZWFkZXJBbmNob3JzLmhhc0NsYXNzKCBcInVpLXRvb2xiYXItYmFjay1idG5cIiApO1xyXG5cclxuXHRcdFx0dGhpcy5yaWdodGJ0biA9IGhlYWRlckFuY2hvcnMuaGFzQ2xhc3MoIFwidWktYnRuLXJpZ2h0XCIgKTtcclxuXHJcblx0XHRcdC8vIEZpbHRlciBvdXQgcmlnaHQgYnV0dG9ucyBhbmQgYmFjayBidXR0b25zXHJcblx0XHRcdHRoaXMubGVmdGJ0biA9IHRoaXMubGVmdGJ0biB8fFxyXG5cdFx0XHRcdGhlYWRlckFuY2hvcnMuZXEoIDAgKVxyXG5cdFx0XHRcdFx0Lm5vdCggXCIudWktYnRuLXJpZ2h0LC51aS10b29sYmFyLWJhY2stYnRuXCIgKVxyXG5cdFx0XHRcdFx0LmFkZENsYXNzKCBcInVpLWJ0bi1sZWZ0XCIgKVxyXG5cdFx0XHRcdFx0Lmxlbmd0aDtcclxuXHJcblx0XHRcdHRoaXMucmlnaHRidG4gPSB0aGlzLnJpZ2h0YnRuIHx8IGhlYWRlckFuY2hvcnMuZXEoIDEgKS5hZGRDbGFzcyggXCJ1aS1idG4tcmlnaHRcIiApLmxlbmd0aDtcclxuXHRcdH0sXHJcblx0XHRfdXBkYXRlQmFja0J1dHRvbjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBiYWNrQnV0dG9uLFxyXG5cdFx0XHRcdG9wdGlvbnMgPSB0aGlzLm9wdGlvbnMsXHJcblx0XHRcdFx0dGhlbWUgPSBvcHRpb25zLmJhY2tCdG5UaGVtZSB8fCBvcHRpb25zLnRoZW1lO1xyXG5cclxuXHRcdFx0Ly8gUmV0cmlldmUgdGhlIGJhY2sgYnV0dG9uIG9yIGNyZWF0ZSBhIG5ldywgZW1wdHkgb25lXHJcblx0XHRcdGJhY2tCdXR0b24gPSB0aGlzLl9iYWNrQnV0dG9uID0gKCB0aGlzLl9iYWNrQnV0dG9uIHx8IHt9ICk7XHJcblxyXG5cdFx0XHQvLyBXZSBhZGQgYSBiYWNrIGJ1dHRvbiBvbmx5IGlmIHRoZSBvcHRpb24gdG8gZG8gc28gaXMgb25cclxuXHRcdFx0aWYgKCB0aGlzLm9wdGlvbnMuYWRkQmFja0J0biAmJlxyXG5cclxuXHRcdFx0XHRcdC8vIFRoaXMgbXVzdCBhbHNvIGJlIGEgaGVhZGVyIHRvb2xiYXJcclxuXHRcdFx0XHRcdHRoaXMucm9sZSA9PT0gXCJoZWFkZXJcIiAmJlxyXG5cclxuXHRcdFx0XHRcdC8vIFRoZXJlIG11c3QgYmUgbXVsdGlwbGUgcGFnZXMgaW4gdGhlIERPTVxyXG5cdFx0XHRcdFx0JCggXCIudWktcGFnZVwiICkubGVuZ3RoID4gMSAmJlxyXG5cdFx0XHRcdFx0KCB0aGlzLnBhZ2UgP1xyXG5cclxuXHRcdFx0XHRcdFx0Ly8gSWYgdGhlIHRvb2xiYXIgaXMgaW50ZXJuYWwgdGhlIHBhZ2UncyBVUkwgbXVzdCBkaWZmZXIgZnJvbSB0aGUgaGFzaFxyXG5cdFx0XHRcdFx0XHQoIHRoaXMucGFnZVsgMCBdLmdldEF0dHJpYnV0ZSggXCJkYXRhLVwiICsgJC5tb2JpbGUubnMgKyBcInVybFwiICkgIT09XHJcblx0XHRcdFx0XHRcdFx0JC5tb2JpbGUucGF0aC5zdHJpcEhhc2goIGxvY2F0aW9uLmhhc2ggKSApIDpcclxuXHJcblx0XHRcdFx0XHRcdC8vIE90aGVyd2lzZSwgaWYgdGhlIHRvb2xiYXIgaXMgZXh0ZXJuYWwgdGhlcmUgbXVzdCBiZSBhdCBsZWFzdCBvbmVcclxuXHRcdFx0XHRcdFx0Ly8gaGlzdG9yeSBpdGVtIHRvIHdoaWNoIG9uZSBjYW4gZ28gYmFja1xyXG5cdFx0XHRcdFx0XHQoICQubW9iaWxlLm5hdmlnYXRlICYmICQubW9iaWxlLm5hdmlnYXRlLmhpc3RvcnkgJiZcclxuXHRcdFx0XHRcdFx0XHQkLm1vYmlsZS5uYXZpZ2F0ZS5oaXN0b3J5LmFjdGl2ZUluZGV4ID4gMCApICkgJiZcclxuXHJcblx0XHRcdFx0XHQvLyBUaGUgdG9vbGJhciBkb2VzIG5vdCBoYXZlIGEgbGVmdCBidXR0b25cclxuXHRcdFx0XHRcdCF0aGlzLmxlZnRidG4gKSB7XHJcblxyXG5cdFx0XHRcdC8vIFNraXAgYmFjayBidXR0b24gY3JlYXRpb24gaWYgb25lIGlzIGFscmVhZHkgcHJlc2VudFxyXG5cdFx0XHRcdGlmICggIWJhY2tCdXR0b24uYXR0YWNoZWQgKSB7XHJcblx0XHRcdFx0XHR0aGlzLmJhY2tCdXR0b24gPSBiYWNrQnV0dG9uLmVsZW1lbnQgPSAoIGJhY2tCdXR0b24uZWxlbWVudCB8fFxyXG5cdFx0XHRcdFx0XHQkKCBcIjxhIHJvbGU9J2J1dHRvbicgaHJlZj0namF2YXNjcmlwdDp2b2lkKDApOycgXCIgK1xyXG5cdFx0XHRcdFx0XHRcdFwiY2xhc3M9J3VpLWJ0biB1aS1jb3JuZXItYWxsIHVpLXNoYWRvdyB1aS1idG4tbGVmdCBcIiArXHJcblx0XHRcdFx0XHRcdFx0XHQoIHRoZW1lID8gXCJ1aS1idG4tXCIgKyB0aGVtZSArIFwiIFwiIDogXCJcIiApICtcclxuXHRcdFx0XHRcdFx0XHRcdFwidWktdG9vbGJhci1iYWNrLWJ0biB1aS1pY29uLWNhcmF0LWwgdWktYnRuLWljb24tbGVmdCcgXCIgK1xyXG5cdFx0XHRcdFx0XHRcdFwiZGF0YS1cIiArICQubW9iaWxlLm5zICsgXCJyZWw9J2JhY2snPlwiICsgb3B0aW9ucy5iYWNrQnRuVGV4dCArXHJcblx0XHRcdFx0XHRcdFx0XCI8L2E+XCIgKSApXHJcblx0XHRcdFx0XHRcdFx0LnByZXBlbmRUbyggdGhpcy5lbGVtZW50ICk7XHJcblx0XHRcdFx0XHRiYWNrQnV0dG9uLmF0dGFjaGVkID0gdHJ1ZTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBJZiB3ZSBhcmUgbm90IGFkZGluZyBhIGJhY2sgYnV0dG9uLCB0aGVuIHJlbW92ZSB0aGUgb25lIHByZXNlbnQsIGlmIGFueVxyXG5cdFx0XHR9IGVsc2UgaWYgKCBiYWNrQnV0dG9uLmVsZW1lbnQgKSB7XHJcblx0XHRcdFx0YmFja0J1dHRvbi5lbGVtZW50LmRldGFjaCgpO1xyXG5cdFx0XHRcdGJhY2tCdXR0b24uYXR0YWNoZWQgPSBmYWxzZTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHRcdF9hZGRIZWFkaW5nQ2xhc3NlczogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudC5jaGlsZHJlbiggXCJoMSwgaDIsIGgzLCBoNCwgaDUsIGg2XCIgKVxyXG5cdFx0XHRcdC5hZGRDbGFzcyggXCJ1aS10aXRsZVwiIClcclxuXHRcdFx0XHQvLyBSZWdhcmRsZXNzIG9mIGggZWxlbWVudCBudW1iZXIgaW4gc3JjLCBpdCBiZWNvbWVzIGgxIGZvciB0aGUgZW5oYW5jZWQgcGFnZVxyXG5cdFx0XHRcdC5hdHRyKHtcclxuXHRcdFx0XHRcdFwicm9sZVwiOiBcImhlYWRpbmdcIixcclxuXHRcdFx0XHRcdFwiYXJpYS1sZXZlbFwiOiBcIjFcIlxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fSxcclxuXHRcdF9kZXN0cm95OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIGN1cnJlbnRUaGVtZTtcclxuXHJcblx0XHRcdHRoaXMuZWxlbWVudC5jaGlsZHJlbiggXCJoMSwgaDIsIGgzLCBoNCwgaDUsIGg2XCIgKVxyXG5cdFx0XHRcdC5yZW1vdmVDbGFzcyggXCJ1aS10aXRsZVwiIClcclxuXHRcdFx0XHQucmVtb3ZlQXR0ciggXCJyb2xlXCIgKVxyXG5cdFx0XHRcdC5yZW1vdmVBdHRyKCBcImFyaWEtbGV2ZWxcIiApO1xyXG5cclxuXHRcdFx0aWYgKCB0aGlzLnJvbGUgPT09IFwiaGVhZGVyXCIgKSB7XHJcblx0XHRcdFx0dGhpcy5lbGVtZW50LmNoaWxkcmVuKCBcImEsIGJ1dHRvblwiIClcclxuXHRcdFx0XHRcdC5yZW1vdmVDbGFzcyggXCJ1aS1idG4tbGVmdCB1aS1idG4tcmlnaHQgdWktYnRuIHVpLXNoYWRvdyB1aS1jb3JuZXItYWxsXCIgKTtcclxuXHRcdFx0XHRpZiAoIHRoaXMuYmFja0J1dHRvbikge1xyXG5cdFx0XHRcdFx0dGhpcy5iYWNrQnV0dG9uLnJlbW92ZSgpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Y3VycmVudFRoZW1lID0gdGhpcy5vcHRpb25zLnRoZW1lID8gdGhpcy5vcHRpb25zLnRoZW1lIDogXCJpbmhlcml0XCI7XHJcblx0XHRcdHRoaXMuZWxlbWVudC5yZW1vdmVDbGFzcyggXCJ1aS1iYXItXCIgKyBjdXJyZW50VGhlbWUgKTtcclxuXHJcblx0XHRcdHRoaXMuZWxlbWVudC5yZW1vdmVDbGFzcyggXCJ1aS1cIiArIHRoaXMucm9sZSApLnJlbW92ZUF0dHIoIFwicm9sZVwiICk7XHJcblx0XHR9XHJcblx0fSk7XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcblx0JC53aWRnZXQoIFwibW9iaWxlLnRvb2xiYXJcIiwgJC5tb2JpbGUudG9vbGJhciwge1xyXG5cdFx0b3B0aW9uczoge1xyXG5cdFx0XHRwb3NpdGlvbjpudWxsLFxyXG5cdFx0XHR2aXNpYmxlT25QYWdlU2hvdzogdHJ1ZSxcclxuXHRcdFx0ZGlzYWJsZVBhZ2Vab29tOiB0cnVlLFxyXG5cdFx0XHR0cmFuc2l0aW9uOiBcInNsaWRlXCIsIC8vY2FuIGJlIG5vbmUsIGZhZGUsIHNsaWRlIChzbGlkZSBtYXBzIHRvIHNsaWRldXAgb3Igc2xpZGVkb3duKVxyXG5cdFx0XHRmdWxsc2NyZWVuOiBmYWxzZSxcclxuXHRcdFx0dGFwVG9nZ2xlOiB0cnVlLFxyXG5cdFx0XHR0YXBUb2dnbGVCbGFja2xpc3Q6IFwiYSwgYnV0dG9uLCBpbnB1dCwgc2VsZWN0LCB0ZXh0YXJlYSwgLnVpLWhlYWRlci1maXhlZCwgLnVpLWZvb3Rlci1maXhlZCwgLnVpLWZsaXBzd2l0Y2gsIC51aS1wb3B1cCwgLnVpLXBhbmVsLCAudWktcGFuZWwtZGlzbWlzcy1vcGVuXCIsXHJcblx0XHRcdGhpZGVEdXJpbmdGb2N1czogXCJpbnB1dCwgdGV4dGFyZWEsIHNlbGVjdFwiLFxyXG5cdFx0XHR1cGRhdGVQYWdlUGFkZGluZzogdHJ1ZSxcclxuXHRcdFx0dHJhY2tQZXJzaXN0ZW50VG9vbGJhcnM6IHRydWUsXHJcblxyXG5cdFx0XHQvLyBCcm93c2VyIGRldGVjdGlvbiEgV2VlZWUsIGhlcmUgd2UgZ28uLi5cclxuXHRcdFx0Ly8gVW5mb3J0dW5hdGVseSwgcG9zaXRpb246Zml4ZWQgaXMgY29zdGx5LCBub3QgdG8gbWVudGlvbiBwcm9iYWJseSBpbXBvc3NpYmxlLCB0byBmZWF0dXJlLWRldGVjdCBhY2N1cmF0ZWx5LlxyXG5cdFx0XHQvLyBTb21lIHRlc3RzIGV4aXN0LCBidXQgdGhleSBjdXJyZW50bHkgcmV0dXJuIGZhbHNlIHJlc3VsdHMgaW4gY3JpdGljYWwgZGV2aWNlcyBhbmQgYnJvd3NlcnMsIHdoaWNoIGNvdWxkIGxlYWQgdG8gYSBicm9rZW4gZXhwZXJpZW5jZS5cclxuXHRcdFx0Ly8gVGVzdGluZyBmaXhlZCBwb3NpdGlvbmluZyBpcyBhbHNvIHByZXR0eSBvYnRydXNpdmUgdG8gcGFnZSBsb2FkLCByZXF1aXJpbmcgaW5qZWN0ZWQgZWxlbWVudHMgYW5kIHNjcm9sbGluZyB0aGUgd2luZG93XHJcblx0XHRcdC8vIFRoZSBmb2xsb3dpbmcgZnVuY3Rpb24gc2VydmVzIHRvIHJ1bGUgb3V0IHNvbWUgcG9wdWxhciBicm93c2VycyB3aXRoIGtub3duIGZpeGVkLXBvc2l0aW9uaW5nIGlzc3Vlc1xyXG5cdFx0XHQvLyBUaGlzIGlzIGEgcGx1Z2luIG9wdGlvbiBsaWtlIGFueSBvdGhlciwgc28gZmVlbCBmcmVlIHRvIGltcHJvdmUgb3Igb3ZlcndyaXRlIGl0XHJcblx0XHRcdHN1cHBvcnRCbGFja2xpc3Q6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHJldHVybiAhJC5zdXBwb3J0LmZpeGVkUG9zaXRpb247XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblxyXG5cdFx0X2NyZWF0ZTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHRoaXMuX3N1cGVyKCk7XHJcblx0XHRcdHRoaXMucGFnZWNvbnRhaW5lciA9ICQoIFwiOm1vYmlsZS1wYWdlY29udGFpbmVyXCIgKTtcclxuXHRcdFx0aWYgKCB0aGlzLm9wdGlvbnMucG9zaXRpb24gPT09IFwiZml4ZWRcIiAmJiAhdGhpcy5vcHRpb25zLnN1cHBvcnRCbGFja2xpc3QoKSApIHtcclxuXHRcdFx0XHR0aGlzLl9tYWtlRml4ZWQoKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHJcblx0XHRfbWFrZUZpeGVkOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50LmFkZENsYXNzKCBcInVpLVwiKyB0aGlzLnJvbGUgK1wiLWZpeGVkXCIgKTtcclxuXHRcdFx0dGhpcy51cGRhdGVQYWdlUGFkZGluZygpO1xyXG5cdFx0XHR0aGlzLl9hZGRUcmFuc2l0aW9uQ2xhc3MoKTtcclxuXHRcdFx0dGhpcy5fYmluZFBhZ2VFdmVudHMoKTtcclxuXHRcdFx0dGhpcy5fYmluZFRvZ2dsZUhhbmRsZXJzKCk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9zZXRPcHRpb25zOiBmdW5jdGlvbiggbyApIHtcclxuXHRcdFx0aWYgKCBvLnBvc2l0aW9uID09PSBcImZpeGVkXCIgJiYgdGhpcy5vcHRpb25zLnBvc2l0aW9uICE9PSBcImZpeGVkXCIgKSB7XHJcblx0XHRcdFx0dGhpcy5fbWFrZUZpeGVkKCk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKCB0aGlzLm9wdGlvbnMucG9zaXRpb24gPT09IFwiZml4ZWRcIiAmJiAhdGhpcy5vcHRpb25zLnN1cHBvcnRCbGFja2xpc3QoKSApIHtcclxuXHRcdFx0XHR2YXIgJHBhZ2UgPSAoICEhdGhpcy5wYWdlICk/IHRoaXMucGFnZTogKCAkKFwiLnVpLXBhZ2UtYWN0aXZlXCIpLmxlbmd0aCA+IDAgKT8gJChcIi51aS1wYWdlLWFjdGl2ZVwiKTogJChcIi51aS1wYWdlXCIpLmVxKDApO1xyXG5cclxuXHRcdFx0XHRpZiAoIG8uZnVsbHNjcmVlbiAhPT0gdW5kZWZpbmVkKSB7XHJcblx0XHRcdFx0XHRpZiAoIG8uZnVsbHNjcmVlbiApIHtcclxuXHRcdFx0XHRcdFx0dGhpcy5lbGVtZW50LmFkZENsYXNzKCBcInVpLVwiKyB0aGlzLnJvbGUgK1wiLWZ1bGxzY3JlZW5cIiApO1xyXG5cdFx0XHRcdFx0XHQkcGFnZS5hZGRDbGFzcyggXCJ1aS1wYWdlLVwiICsgdGhpcy5yb2xlICsgXCItZnVsbHNjcmVlblwiICk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHQvLyBJZiBub3QgZnVsbHNjcmVlbiwgYWRkIGNsYXNzIHRvIHBhZ2UgdG8gc2V0IHRvcCBvciBib3R0b20gcGFkZGluZ1xyXG5cdFx0XHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0XHRcdHRoaXMuZWxlbWVudC5yZW1vdmVDbGFzcyggXCJ1aS1cIisgdGhpcy5yb2xlICtcIi1mdWxsc2NyZWVuXCIgKTtcclxuXHRcdFx0XHRcdFx0JHBhZ2UucmVtb3ZlQ2xhc3MoIFwidWktcGFnZS1cIiArIHRoaXMucm9sZSArIFwiLWZ1bGxzY3JlZW5cIiApLmFkZENsYXNzKCBcInVpLXBhZ2UtXCIgKyB0aGlzLnJvbGUrIFwiLWZpeGVkXCIgKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0dGhpcy5fc3VwZXIobyk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9hZGRUcmFuc2l0aW9uQ2xhc3M6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgdGNsYXNzID0gdGhpcy5vcHRpb25zLnRyYW5zaXRpb247XHJcblxyXG5cdFx0XHRpZiAoIHRjbGFzcyAmJiB0Y2xhc3MgIT09IFwibm9uZVwiICkge1xyXG5cdFx0XHRcdC8vIHVzZSBhcHByb3ByaWF0ZSBzbGlkZSBmb3IgaGVhZGVyIG9yIGZvb3RlclxyXG5cdFx0XHRcdGlmICggdGNsYXNzID09PSBcInNsaWRlXCIgKSB7XHJcblx0XHRcdFx0XHR0Y2xhc3MgPSB0aGlzLmVsZW1lbnQuaGFzQ2xhc3MoIFwidWktaGVhZGVyXCIgKSA/IFwic2xpZGVkb3duXCIgOiBcInNsaWRldXBcIjtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdHRoaXMuZWxlbWVudC5hZGRDbGFzcyggdGNsYXNzICk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblxyXG5cdFx0X2JpbmRQYWdlRXZlbnRzOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIHBhZ2UgPSAoICEhdGhpcy5wYWdlICk/IHRoaXMuZWxlbWVudC5jbG9zZXN0KCBcIi51aS1wYWdlXCIgKTogdGhpcy5kb2N1bWVudDtcclxuXHRcdFx0Ly9wYWdlIGV2ZW50IGJpbmRpbmdzXHJcblx0XHRcdC8vIEZpeGVkIHRvb2xiYXJzIHJlcXVpcmUgcGFnZSB6b29tIHRvIGJlIGRpc2FibGVkLCBvdGhlcndpc2UgdXNhYmlsaXR5IGlzc3VlcyBjcm9wIHVwXHJcblx0XHRcdC8vIFRoaXMgbWV0aG9kIGlzIG1lYW50IHRvIGRpc2FibGUgem9vbSB3aGlsZSBhIGZpeGVkLXBvc2l0aW9uZWQgdG9vbGJhciBwYWdlIGlzIHZpc2libGVcclxuXHRcdFx0dGhpcy5fb24oIHBhZ2UgLCB7XHJcblx0XHRcdFx0XCJwYWdlYmVmb3Jlc2hvd1wiOiBcIl9oYW5kbGVQYWdlQmVmb3JlU2hvd1wiLFxyXG5cdFx0XHRcdFwid2Via2l0QW5pbWF0aW9uU3RhcnRcIjpcIl9oYW5kbGVBbmltYXRpb25TdGFydFwiLFxyXG5cdFx0XHRcdFwiYW5pbWF0aW9uc3RhcnRcIjpcIl9oYW5kbGVBbmltYXRpb25TdGFydFwiLFxyXG5cdFx0XHRcdFwidXBkYXRlbGF5b3V0XCI6IFwiX2hhbmRsZUFuaW1hdGlvblN0YXJ0XCIsXHJcblx0XHRcdFx0XCJwYWdlc2hvd1wiOiBcIl9oYW5kbGVQYWdlU2hvd1wiLFxyXG5cdFx0XHRcdFwicGFnZWJlZm9yZWhpZGVcIjogXCJfaGFuZGxlUGFnZUJlZm9yZUhpZGVcIlxyXG5cdFx0XHR9KTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X2hhbmRsZVBhZ2VCZWZvcmVTaG93OiBmdW5jdGlvbiggKSB7XHJcblx0XHRcdHZhciBvID0gdGhpcy5vcHRpb25zO1xyXG5cdFx0XHRpZiAoIG8uZGlzYWJsZVBhZ2Vab29tICkge1xyXG5cdFx0XHRcdCQubW9iaWxlLnpvb20uZGlzYWJsZSggdHJ1ZSApO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICggIW8udmlzaWJsZU9uUGFnZVNob3cgKSB7XHJcblx0XHRcdFx0dGhpcy5oaWRlKCB0cnVlICk7XHJcblx0XHRcdH1cclxuXHRcdH0sXHJcblxyXG5cdFx0X2hhbmRsZUFuaW1hdGlvblN0YXJ0OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0aWYgKCB0aGlzLm9wdGlvbnMudXBkYXRlUGFnZVBhZGRpbmcgKSB7XHJcblx0XHRcdFx0dGhpcy51cGRhdGVQYWdlUGFkZGluZyggKCAhIXRoaXMucGFnZSApPyB0aGlzLnBhZ2U6IFwiLnVpLXBhZ2UtYWN0aXZlXCIgKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHJcblx0XHRfaGFuZGxlUGFnZVNob3c6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR0aGlzLnVwZGF0ZVBhZ2VQYWRkaW5nKCAoICEhdGhpcy5wYWdlICk/IHRoaXMucGFnZTogXCIudWktcGFnZS1hY3RpdmVcIiApO1xyXG5cdFx0XHRpZiAoIHRoaXMub3B0aW9ucy51cGRhdGVQYWdlUGFkZGluZyApIHtcclxuXHRcdFx0XHR0aGlzLl9vbiggdGhpcy53aW5kb3csIHsgXCJ0aHJvdHRsZWRyZXNpemVcIjogXCJ1cGRhdGVQYWdlUGFkZGluZ1wiIH0gKTtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHJcblx0XHRfaGFuZGxlUGFnZUJlZm9yZUhpZGU6IGZ1bmN0aW9uKCBlLCB1aSApIHtcclxuXHRcdFx0dmFyIG8gPSB0aGlzLm9wdGlvbnMsXHJcblx0XHRcdFx0dGhpc0Zvb3RlciwgdGhpc0hlYWRlciwgbmV4dEZvb3RlciwgbmV4dEhlYWRlcjtcclxuXHJcblx0XHRcdGlmICggby5kaXNhYmxlUGFnZVpvb20gKSB7XHJcblx0XHRcdFx0JC5tb2JpbGUuem9vbS5lbmFibGUoIHRydWUgKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoIG8udXBkYXRlUGFnZVBhZGRpbmcgKSB7XHJcblx0XHRcdFx0dGhpcy5fb2ZmKCB0aGlzLndpbmRvdywgXCJ0aHJvdHRsZWRyZXNpemVcIiApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoIG8udHJhY2tQZXJzaXN0ZW50VG9vbGJhcnMgKSB7XHJcblx0XHRcdFx0dGhpc0Zvb3RlciA9ICQoIFwiLnVpLWZvb3Rlci1maXhlZDpqcW1EYXRhKGlkKVwiLCB0aGlzLnBhZ2UgKTtcclxuXHRcdFx0XHR0aGlzSGVhZGVyID0gJCggXCIudWktaGVhZGVyLWZpeGVkOmpxbURhdGEoaWQpXCIsIHRoaXMucGFnZSApO1xyXG5cdFx0XHRcdG5leHRGb290ZXIgPSB0aGlzRm9vdGVyLmxlbmd0aCAmJiB1aS5uZXh0UGFnZSAmJiAkKCBcIi51aS1mb290ZXItZml4ZWQ6anFtRGF0YShpZD0nXCIgKyB0aGlzRm9vdGVyLmpxbURhdGEoIFwiaWRcIiApICsgXCInKVwiLCB1aS5uZXh0UGFnZSApIHx8ICQoKTtcclxuXHRcdFx0XHRuZXh0SGVhZGVyID0gdGhpc0hlYWRlci5sZW5ndGggJiYgdWkubmV4dFBhZ2UgJiYgJCggXCIudWktaGVhZGVyLWZpeGVkOmpxbURhdGEoaWQ9J1wiICsgdGhpc0hlYWRlci5qcW1EYXRhKCBcImlkXCIgKSArIFwiJylcIiwgdWkubmV4dFBhZ2UgKSB8fCAkKCk7XHJcblxyXG5cdFx0XHRcdGlmICggbmV4dEZvb3Rlci5sZW5ndGggfHwgbmV4dEhlYWRlci5sZW5ndGggKSB7XHJcblxyXG5cdFx0XHRcdFx0bmV4dEZvb3Rlci5hZGQoIG5leHRIZWFkZXIgKS5hcHBlbmRUbyggJC5tb2JpbGUucGFnZUNvbnRhaW5lciApO1xyXG5cclxuXHRcdFx0XHRcdHVpLm5leHRQYWdlLm9uZSggXCJwYWdlc2hvd1wiLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdFx0bmV4dEhlYWRlci5wcmVwZW5kVG8oIHRoaXMgKTtcclxuXHRcdFx0XHRcdFx0bmV4dEZvb3Rlci5hcHBlbmRUbyggdGhpcyApO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHRcdF92aXNpYmxlOiB0cnVlLFxyXG5cclxuXHRcdC8vIFRoaXMgd2lsbCBzZXQgdGhlIGNvbnRlbnQgZWxlbWVudCdzIHRvcCBvciBib3R0b20gcGFkZGluZyBlcXVhbCB0byB0aGUgdG9vbGJhcidzIGhlaWdodFxyXG5cdFx0dXBkYXRlUGFnZVBhZGRpbmc6IGZ1bmN0aW9uKCB0YlBhZ2UgKSB7XHJcblx0XHRcdHZhciAkZWwgPSB0aGlzLmVsZW1lbnQsXHJcblx0XHRcdFx0aGVhZGVyID0gKCB0aGlzLnJvbGUgPT09XCJoZWFkZXJcIiApLFxyXG5cdFx0XHRcdHBvcyA9IHBhcnNlRmxvYXQoICRlbC5jc3MoIGhlYWRlciA/IFwidG9wXCIgOiBcImJvdHRvbVwiICkgKTtcclxuXHJcblx0XHRcdC8vIFRoaXMgYmVoYXZpb3Igb25seSBhcHBsaWVzIHRvIFwiZml4ZWRcIiwgbm90IFwiZnVsbHNjcmVlblwiXHJcblx0XHRcdGlmICggdGhpcy5vcHRpb25zLmZ1bGxzY3JlZW4gKSB7IHJldHVybjsgfVxyXG5cdFx0XHQvLyB0YlBhZ2UgYXJndW1lbnQgY2FuIGJlIGEgUGFnZSBvYmplY3Qgb3IgYW4gZXZlbnQsIGlmIGNvbWluZyBmcm9tIHRocm90dGxlZCByZXNpemUuXHJcblx0XHRcdHRiUGFnZSA9ICggdGJQYWdlICYmIHRiUGFnZS50eXBlID09PSB1bmRlZmluZWQgJiYgdGJQYWdlICkgfHwgdGhpcy5wYWdlIHx8ICRlbC5jbG9zZXN0KCBcIi51aS1wYWdlXCIgKTtcclxuXHRcdFx0dGJQYWdlID0gKCAhIXRoaXMucGFnZSApPyB0aGlzLnBhZ2U6IFwiLnVpLXBhZ2UtYWN0aXZlXCI7XHJcblx0XHRcdCQoIHRiUGFnZSApLmNzcyggXCJwYWRkaW5nLVwiICsgKCBoZWFkZXIgPyBcInRvcFwiIDogXCJib3R0b21cIiApLCAkZWwub3V0ZXJIZWlnaHQoKSArIHBvcyApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRfdXNlVHJhbnNpdGlvbjogZnVuY3Rpb24oIG5vdHJhbnNpdGlvbiApIHtcclxuXHRcdFx0dmFyICR3aW4gPSB0aGlzLndpbmRvdyxcclxuXHRcdFx0XHQkZWwgPSB0aGlzLmVsZW1lbnQsXHJcblx0XHRcdFx0c2Nyb2xsID0gJHdpbi5zY3JvbGxUb3AoKSxcclxuXHRcdFx0XHRlbEhlaWdodCA9ICRlbC5oZWlnaHQoKSxcclxuXHRcdFx0XHRwSGVpZ2h0ID0gKCAhIXRoaXMucGFnZSApPyAkZWwuY2xvc2VzdCggXCIudWktcGFnZVwiICkuaGVpZ2h0KCk6JChcIi51aS1wYWdlLWFjdGl2ZVwiKS5oZWlnaHQoKSxcclxuXHRcdFx0XHR2aWV3cG9ydEhlaWdodCA9ICQubW9iaWxlLmdldFNjcmVlbkhlaWdodCgpO1xyXG5cclxuXHRcdFx0cmV0dXJuICFub3RyYW5zaXRpb24gJiZcclxuXHRcdFx0XHQoIHRoaXMub3B0aW9ucy50cmFuc2l0aW9uICYmIHRoaXMub3B0aW9ucy50cmFuc2l0aW9uICE9PSBcIm5vbmVcIiAmJlxyXG5cdFx0XHRcdChcclxuXHRcdFx0XHRcdCggdGhpcy5yb2xlID09PSBcImhlYWRlclwiICYmICF0aGlzLm9wdGlvbnMuZnVsbHNjcmVlbiAmJiBzY3JvbGwgPiBlbEhlaWdodCApIHx8XHJcblx0XHRcdFx0XHQoIHRoaXMucm9sZSA9PT0gXCJmb290ZXJcIiAmJiAhdGhpcy5vcHRpb25zLmZ1bGxzY3JlZW4gJiYgc2Nyb2xsICsgdmlld3BvcnRIZWlnaHQgPCBwSGVpZ2h0IC0gZWxIZWlnaHQgKVxyXG5cdFx0XHRcdCkgfHwgdGhpcy5vcHRpb25zLmZ1bGxzY3JlZW5cclxuXHRcdFx0XHQpO1xyXG5cdFx0fSxcclxuXHJcblx0XHRzaG93OiBmdW5jdGlvbiggbm90cmFuc2l0aW9uICkge1xyXG5cdFx0XHR2YXIgaGlkZUNsYXNzID0gXCJ1aS1maXhlZC1oaWRkZW5cIixcclxuXHRcdFx0XHQkZWwgPSB0aGlzLmVsZW1lbnQ7XHJcblxyXG5cdFx0XHRpZiAoIHRoaXMuX3VzZVRyYW5zaXRpb24oIG5vdHJhbnNpdGlvbiApICkge1xyXG5cdFx0XHRcdCRlbFxyXG5cdFx0XHRcdFx0LnJlbW92ZUNsYXNzKCBcIm91dCBcIiArIGhpZGVDbGFzcyApXHJcblx0XHRcdFx0XHQuYWRkQ2xhc3MoIFwiaW5cIiApXHJcblx0XHRcdFx0XHQuYW5pbWF0aW9uQ29tcGxldGUoZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRcdFx0XHQkZWwucmVtb3ZlQ2xhc3MoIFwiaW5cIiApO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0JGVsLnJlbW92ZUNsYXNzKCBoaWRlQ2xhc3MgKTtcclxuXHRcdFx0fVxyXG5cdFx0XHR0aGlzLl92aXNpYmxlID0gdHJ1ZTtcclxuXHRcdH0sXHJcblxyXG5cdFx0aGlkZTogZnVuY3Rpb24oIG5vdHJhbnNpdGlvbiApIHtcclxuXHRcdFx0dmFyIGhpZGVDbGFzcyA9IFwidWktZml4ZWQtaGlkZGVuXCIsXHJcblx0XHRcdFx0JGVsID0gdGhpcy5lbGVtZW50LFxyXG5cdFx0XHRcdC8vIGlmIGl0J3MgYSBzbGlkZSB0cmFuc2l0aW9uLCBvdXIgbmV3IHRyYW5zaXRpb25zIG5lZWQgdGhlIHJldmVyc2UgY2xhc3MgYXMgd2VsbCB0byBzbGlkZSBvdXR3YXJkXHJcblx0XHRcdFx0b3V0Y2xhc3MgPSBcIm91dFwiICsgKCB0aGlzLm9wdGlvbnMudHJhbnNpdGlvbiA9PT0gXCJzbGlkZVwiID8gXCIgcmV2ZXJzZVwiIDogXCJcIiApO1xyXG5cclxuXHRcdFx0aWYgKCB0aGlzLl91c2VUcmFuc2l0aW9uKCBub3RyYW5zaXRpb24gKSApIHtcclxuXHRcdFx0XHQkZWxcclxuXHRcdFx0XHRcdC5hZGRDbGFzcyggb3V0Y2xhc3MgKVxyXG5cdFx0XHRcdFx0LnJlbW92ZUNsYXNzKCBcImluXCIgKVxyXG5cdFx0XHRcdFx0LmFuaW1hdGlvbkNvbXBsZXRlKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0XHQkZWwuYWRkQ2xhc3MoIGhpZGVDbGFzcyApLnJlbW92ZUNsYXNzKCBvdXRjbGFzcyApO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0JGVsLmFkZENsYXNzKCBoaWRlQ2xhc3MgKS5yZW1vdmVDbGFzcyggb3V0Y2xhc3MgKTtcclxuXHRcdFx0fVxyXG5cdFx0XHR0aGlzLl92aXNpYmxlID0gZmFsc2U7XHJcblx0XHR9LFxyXG5cclxuXHRcdHRvZ2dsZTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHRoaXNbIHRoaXMuX3Zpc2libGUgPyBcImhpZGVcIiA6IFwic2hvd1wiIF0oKTtcclxuXHRcdH0sXHJcblxyXG5cdFx0X2JpbmRUb2dnbGVIYW5kbGVyczogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBzZWxmID0gdGhpcyxcclxuXHRcdFx0XHRvID0gc2VsZi5vcHRpb25zLFxyXG5cdFx0XHRcdGRlbGF5U2hvdywgZGVsYXlIaWRlLFxyXG5cdFx0XHRcdGlzVmlzaWJsZSA9IHRydWUsXHJcblx0XHRcdFx0cGFnZSA9ICggISF0aGlzLnBhZ2UgKT8gdGhpcy5wYWdlOiAkKFwiLnVpLXBhZ2VcIik7XHJcblxyXG5cdFx0XHQvLyB0YXAgdG9nZ2xlXHJcblx0XHRcdHBhZ2VcclxuXHRcdFx0XHQuYmluZCggXCJ2Y2xpY2tcIiwgZnVuY3Rpb24oIGUgKSB7XHJcblx0XHRcdFx0XHRpZiAoIG8udGFwVG9nZ2xlICYmICEkKCBlLnRhcmdldCApLmNsb3Nlc3QoIG8udGFwVG9nZ2xlQmxhY2tsaXN0ICkubGVuZ3RoICkge1xyXG5cdFx0XHRcdFx0XHRzZWxmLnRvZ2dsZSgpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0pXHJcblx0XHRcdFx0LmJpbmQoIFwiZm9jdXNpbiBmb2N1c291dFwiLCBmdW5jdGlvbiggZSApIHtcclxuXHRcdFx0XHRcdC8vdGhpcyBoaWRlcyB0aGUgdG9vbGJhcnMgb24gYSBrZXlib2FyZCBwb3AgdG8gZ2l2ZSBtb3JlIHNjcmVlbiByb29tIGFuZCBwcmV2ZW50IGlvcyBidWcgd2hpY2hcclxuXHRcdFx0XHRcdC8vcG9zaXRpb25zIGZpeGVkIHRvb2xiYXJzIGluIHRoZSBtaWRkbGUgb2YgdGhlIHNjcmVlbiBvbiBwb3AgaWYgdGhlIGlucHV0IGlzIG5lYXIgdGhlIHRvcCBvclxyXG5cdFx0XHRcdFx0Ly9ib3R0b20gb2YgdGhlIHNjcmVlbiBhZGRyZXNzZXMgaXNzdWVzICM0NDEwIEZvb3RlciBuYXZiYXIgbW92ZXMgdXAgd2hlbiBjbGlja2luZyBvbiBhIHRleHRib3ggaW4gYW4gQW5kcm9pZCBlbnZpcm9ubWVudFxyXG5cdFx0XHRcdFx0Ly9hbmQgaXNzdWUgIzQxMTMgSGVhZGVyIGFuZCBmb290ZXIgY2hhbmdlIHRoZWlyIHBvc2l0aW9uIGFmdGVyIGtleWJvYXJkIHBvcHVwIC0gaU9TXHJcblx0XHRcdFx0XHQvL2FuZCBpc3N1ZSAjNDQxMCBGb290ZXIgbmF2YmFyIG1vdmVzIHVwIHdoZW4gY2xpY2tpbmcgb24gYSB0ZXh0Ym94IGluIGFuIEFuZHJvaWQgZW52aXJvbm1lbnRcclxuXHRcdFx0XHRcdGlmICggc2NyZWVuLndpZHRoIDwgMTAyNSAmJiAkKCBlLnRhcmdldCApLmlzKCBvLmhpZGVEdXJpbmdGb2N1cyApICYmICEkKCBlLnRhcmdldCApLmNsb3Nlc3QoIFwiLnVpLWhlYWRlci1maXhlZCwgLnVpLWZvb3Rlci1maXhlZFwiICkubGVuZ3RoICkge1xyXG5cdFx0XHRcdFx0XHQvL0ZpeCBmb3IgaXNzdWUgIzQ3MjQgTW92aW5nIHRocm91Z2ggZm9ybSBpbiBNb2JpbGUgU2FmYXJpIHdpdGggXCJOZXh0XCIgYW5kIFwiUHJldmlvdXNcIiBzeXN0ZW1cclxuXHRcdFx0XHRcdFx0Ly9jb250cm9scyBjYXVzZXMgZml4ZWQgcG9zaXRpb24sIHRhcC10b2dnbGUgZmFsc2UgSGVhZGVyIHRvIHJldmVhbCBpdHNlbGZcclxuXHRcdFx0XHRcdFx0Ly8gaXNWaXNpYmxlIGluc3RlYWQgb2Ygc2VsZi5fdmlzaWJsZSBiZWNhdXNlIHRoZSBmb2N1c2luIGFuZCBmb2N1c291dCBldmVudHMgZmlyZSB0d2ljZSBhdCB0aGUgc2FtZSB0aW1lXHJcblx0XHRcdFx0XHRcdC8vIEFsc28gdXNlIGEgZGVsYXkgZm9yIGhpZGluZyB0aGUgdG9vbGJhcnMgYmVjYXVzZSBvbiBBbmRyb2lkIG5hdGl2ZSBicm93c2VyIGZvY3VzaW4gaXMgZGlyZWNsdHkgZm9sbG93ZWRcclxuXHRcdFx0XHRcdFx0Ly8gYnkgYSBmb2N1c291dCB3aGVuIGEgbmF0aXZlIHNlbGVjdHMgb3BlbnMgYW5kIHRoZSBvdGhlciB3YXkgYXJvdW5kIHdoZW4gaXQgY2xvc2VzLlxyXG5cdFx0XHRcdFx0XHRpZiAoIGUudHlwZSA9PT0gXCJmb2N1c291dFwiICYmICFpc1Zpc2libGUgKSB7XHJcblx0XHRcdFx0XHRcdFx0aXNWaXNpYmxlID0gdHJ1ZTtcclxuXHRcdFx0XHRcdFx0XHQvL3dhaXQgZm9yIHRoZSBzdGFjayB0byB1bndpbmQgYW5kIHNlZSBpZiB3ZSBoYXZlIGp1bXBlZCB0byBhbm90aGVyIGlucHV0XHJcblx0XHRcdFx0XHRcdFx0Y2xlYXJUaW1lb3V0KCBkZWxheUhpZGUgKTtcclxuXHRcdFx0XHRcdFx0XHRkZWxheVNob3cgPSBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdFx0XHRcdHNlbGYuc2hvdygpO1xyXG5cdFx0XHRcdFx0XHRcdH0sIDAgKTtcclxuXHRcdFx0XHRcdFx0fSBlbHNlIGlmICggZS50eXBlID09PSBcImZvY3VzaW5cIiAmJiAhIWlzVmlzaWJsZSApIHtcclxuXHRcdFx0XHRcdFx0XHQvL2lmIHdlIGhhdmUganVtcGVkIHRvIGFub3RoZXIgaW5wdXQgY2xlYXIgdGhlIHRpbWUgb3V0IHRvIGNhbmNlbCB0aGUgc2hvdy5cclxuXHRcdFx0XHRcdFx0XHRjbGVhclRpbWVvdXQoIGRlbGF5U2hvdyApO1xyXG5cdFx0XHRcdFx0XHRcdGlzVmlzaWJsZSA9IGZhbHNlO1xyXG5cdFx0XHRcdFx0XHRcdGRlbGF5SGlkZSA9IHNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0XHRcdFx0c2VsZi5oaWRlKCk7XHJcblx0XHRcdFx0XHRcdFx0fSwgMCApO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSk7XHJcblx0XHR9LFxyXG5cclxuXHRcdF9zZXRSZWxhdGl2ZTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdGlmKCB0aGlzLm9wdGlvbnMucG9zaXRpb24gIT09IFwiZml4ZWRcIiApe1xyXG5cdFx0XHRcdCQoIFwiW2RhdGEtXCIrICQubW9iaWxlLm5zICsgXCJyb2xlPSdwYWdlJ11cIiApLmNzcyh7IFwicG9zaXRpb25cIjogXCJyZWxhdGl2ZVwiIH0pO1xyXG5cdFx0XHR9XHJcblx0XHR9LFxyXG5cclxuXHRcdF9kZXN0cm95OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIHBhZ2VDbGFzc2VzLCB0b29sYmFyQ2xhc3NlcywgaGFzRml4ZWQsIGhlYWRlciwgaGFzRnVsbHNjcmVlbixcclxuXHRcdFx0XHRwYWdlID0gdGhpcy5wYWdlY29udGFpbmVyLnBhZ2Vjb250YWluZXIoIFwiZ2V0QWN0aXZlUGFnZVwiICk7XHJcblxyXG5cdFx0XHR0aGlzLl9zdXBlcigpO1xyXG5cdFx0XHRpZiAoIHRoaXMub3B0aW9ucy5wb3NpdGlvbiA9PT0gXCJmaXhlZFwiICkge1xyXG5cdFx0XHRcdGhhc0ZpeGVkID0gJCggIFwiYm9keT4udWktXCIgKyB0aGlzLnJvbGUgKyBcIi1maXhlZFwiIClcclxuXHRcdFx0XHRcdFx0XHQuYWRkKCBwYWdlLmZpbmQoIFwiLnVpLVwiICsgdGhpcy5vcHRpb25zLnJvbGUgKyBcIi1maXhlZFwiICkgKVxyXG5cdFx0XHRcdFx0XHRcdC5ub3QoIHRoaXMuZWxlbWVudCApLmxlbmd0aCA+IDA7XHJcblx0XHRcdFx0aGFzRnVsbHNjcmVlbiA9ICQoICBcImJvZHk+LnVpLVwiICsgdGhpcy5yb2xlICsgXCItZml4ZWRcIiApXHJcblx0XHRcdFx0XHRcdFx0LmFkZCggcGFnZS5maW5kKCBcIi51aS1cIiArIHRoaXMub3B0aW9ucy5yb2xlICsgXCItZnVsbHNjcmVlblwiICkgKVxyXG5cdFx0XHRcdFx0XHRcdC5ub3QoIHRoaXMuZWxlbWVudCApLmxlbmd0aCA+IDA7XHJcblx0XHRcdFx0dG9vbGJhckNsYXNzZXMgPSAgXCJ1aS1oZWFkZXItZml4ZWQgdWktZm9vdGVyLWZpeGVkIHVpLWhlYWRlci1mdWxsc2NyZWVuIGluIG91dFwiICtcclxuXHRcdFx0XHRcdFwiIHVpLWZvb3Rlci1mdWxsc2NyZWVuIGZhZGUgc2xpZGVkb3duIHNsaWRldXAgdWktZml4ZWQtaGlkZGVuXCI7XHJcblx0XHRcdFx0dGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKCB0b29sYmFyQ2xhc3NlcyApO1xyXG5cdFx0XHRcdGlmICggIWhhc0Z1bGxzY3JlZW4gKSB7XHJcblx0XHRcdFx0XHRwYWdlQ2xhc3NlcyA9IFwidWktcGFnZS1cIiArIHRoaXMucm9sZSArIFwiLWZ1bGxzY3JlZW5cIjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWYgKCAhaGFzRml4ZWQgKSB7XHJcblx0XHRcdFx0XHRoZWFkZXIgPSB0aGlzLnJvbGUgPT09IFwiaGVhZGVyXCI7XHJcblx0XHRcdFx0XHRwYWdlQ2xhc3NlcyArPSBcIiB1aS1wYWdlLVwiICsgdGhpcy5yb2xlICsgXCItZml4ZWRcIjtcclxuXHRcdFx0XHRcdHBhZ2UuY3NzKCBcInBhZGRpbmctXCIgKyAoIGhlYWRlciA/IFwidG9wXCIgOiBcImJvdHRvbVwiICksIFwiXCIgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0cGFnZS5yZW1vdmVDbGFzcyggcGFnZUNsYXNzZXMgKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHR9KTtcclxufSkoIGpRdWVyeSApO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblx0JC53aWRnZXQoIFwibW9iaWxlLnRvb2xiYXJcIiwgJC5tb2JpbGUudG9vbGJhciwge1xyXG5cclxuXHRcdF9tYWtlRml4ZWQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR0aGlzLl9zdXBlcigpO1xyXG5cdFx0XHR0aGlzLl93b3JrYXJvdW5kcygpO1xyXG5cdFx0fSxcclxuXHJcblx0XHQvL2NoZWNrIHRoZSBicm93c2VyIGFuZCB2ZXJzaW9uIGFuZCBydW4gbmVlZGVkIHdvcmthcm91bmRzXHJcblx0XHRfd29ya2Fyb3VuZHM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgdWEgPSBuYXZpZ2F0b3IudXNlckFnZW50LFxyXG5cdFx0XHRwbGF0Zm9ybSA9IG5hdmlnYXRvci5wbGF0Zm9ybSxcclxuXHRcdFx0Ly8gUmVuZGVyaW5nIGVuZ2luZSBpcyBXZWJraXQsIGFuZCBjYXB0dXJlIG1ham9yIHZlcnNpb25cclxuXHRcdFx0d2ttYXRjaCA9IHVhLm1hdGNoKCAvQXBwbGVXZWJLaXRcXC8oWzAtOV0rKS8gKSxcclxuXHRcdFx0d2t2ZXJzaW9uID0gISF3a21hdGNoICYmIHdrbWF0Y2hbIDEgXSxcclxuXHRcdFx0b3MgPSBudWxsLFxyXG5cdFx0XHRzZWxmID0gdGhpcztcclxuXHRcdFx0Ly9zZXQgdGhlIG9zIHdlIGFyZSB3b3JraW5nIGluIGlmIGl0IGRvc2VudCBtYXRjaCBvbmUgd2l0aCB3b3JrYXJvdW5kcyByZXR1cm5cclxuXHRcdFx0aWYgKCBwbGF0Zm9ybS5pbmRleE9mKCBcImlQaG9uZVwiICkgPiAtMSB8fCBwbGF0Zm9ybS5pbmRleE9mKCBcImlQYWRcIiApID4gLTEgIHx8IHBsYXRmb3JtLmluZGV4T2YoIFwiaVBvZFwiICkgPiAtMSApIHtcclxuXHRcdFx0XHRvcyA9IFwiaW9zXCI7XHJcblx0XHRcdH0gZWxzZSBpZiAoIHVhLmluZGV4T2YoIFwiQW5kcm9pZFwiICkgPiAtMSApIHtcclxuXHRcdFx0XHRvcyA9IFwiYW5kcm9pZFwiO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cdFx0XHQvL2NoZWNrIG9zIHZlcnNpb24gaWYgaXQgZG9zZW50IG1hdGNoIG9uZSB3aXRoIHdvcmthcm91bmRzIHJldHVyblxyXG5cdFx0XHRpZiAoIG9zID09PSBcImlvc1wiICkge1xyXG5cdFx0XHRcdC8vaU9TICB3b3JrYXJvdW5kc1xyXG5cdFx0XHRcdHNlbGYuX2JpbmRTY3JvbGxXb3JrYXJvdW5kKCk7XHJcblx0XHRcdH0gZWxzZSBpZiAoIG9zID09PSBcImFuZHJvaWRcIiAmJiB3a3ZlcnNpb24gJiYgd2t2ZXJzaW9uIDwgNTM0ICkge1xyXG5cdFx0XHRcdC8vQW5kcm9pZCAyLjMgcnVuIGFsbCBBbmRyb2lkIDIuMyB3b3JrYXJvdW5kXHJcblx0XHRcdFx0c2VsZi5fYmluZFNjcm9sbFdvcmthcm91bmQoKTtcclxuXHRcdFx0XHRzZWxmLl9iaW5kTGlzdFRodW1iV29ya2Fyb3VuZCgpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cdFx0fSxcclxuXHJcblx0XHQvL1V0aWxpdHkgY2xhc3MgZm9yIGNoZWNraW5nIGhlYWRlciBhbmQgZm9vdGVyIHBvc2l0aW9ucyByZWxhdGl2ZSB0byB2aWV3cG9ydFxyXG5cdFx0X3ZpZXdwb3J0T2Zmc2V0OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyICRlbCA9IHRoaXMuZWxlbWVudCxcclxuXHRcdFx0XHRoZWFkZXIgPSAkZWwuaGFzQ2xhc3MoIFwidWktaGVhZGVyXCIgKSxcclxuXHRcdFx0XHRvZmZzZXQgPSBNYXRoLmFicyggJGVsLm9mZnNldCgpLnRvcCAtIHRoaXMud2luZG93LnNjcm9sbFRvcCgpICk7XHJcblx0XHRcdGlmICggIWhlYWRlciApIHtcclxuXHRcdFx0XHRvZmZzZXQgPSBNYXRoLnJvdW5kKCBvZmZzZXQgLSB0aGlzLndpbmRvdy5oZWlnaHQoKSArICRlbC5vdXRlckhlaWdodCgpICkgLSA2MDtcclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gb2Zmc2V0O1xyXG5cdFx0fSxcclxuXHJcblx0XHQvL2JpbmQgZXZlbnRzIGZvciBfdHJpZ2dlclJlZHJhdygpIGZ1bmN0aW9uXHJcblx0XHRfYmluZFNjcm9sbFdvcmthcm91bmQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgc2VsZiA9IHRoaXM7XHJcblx0XHRcdC8vYmluZCB0byBzY3JvbGxzdG9wIGFuZCBjaGVjayBpZiB0aGUgdG9vbGJhcnMgYXJlIGNvcnJlY3RseSBwb3NpdGlvbmVkXHJcblx0XHRcdHRoaXMuX29uKCB0aGlzLndpbmRvdywgeyBzY3JvbGxzdG9wOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR2YXIgdmlld3BvcnRPZmZzZXQgPSBzZWxmLl92aWV3cG9ydE9mZnNldCgpO1xyXG5cdFx0XHRcdC8vY2hlY2sgaWYgdGhlIGhlYWRlciBpcyB2aXNpYmxlIGFuZCBpZiBpdHMgaW4gdGhlIHJpZ2h0IHBsYWNlXHJcblx0XHRcdFx0aWYgKCB2aWV3cG9ydE9mZnNldCA+IDIgJiYgc2VsZi5fdmlzaWJsZSApIHtcclxuXHRcdFx0XHRcdHNlbGYuX3RyaWdnZXJSZWRyYXcoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH19KTtcclxuXHRcdH0sXHJcblxyXG5cdFx0Ly90aGlzIGFkZHJlc3NlcyBpc3N1ZSAjNDI1MCBQZXJzaXN0ZW50IGZvb3RlciBpbnN0YWJpbGl0eSBpbiB2MS4xIHdpdGggbG9uZyBzZWxlY3QgbGlzdHMgaW4gQW5kcm9pZCAyLjMuM1xyXG5cdFx0Ly9hbmQgaXNzdWUgIzM3NDggQW5kcm9pZCAyLng6IFBhZ2UgdHJhbnNpdGlvbnMgYnJva2VuIHdoZW4gZml4ZWQgdG9vbGJhcnMgdXNlZFxyXG5cdFx0Ly90aGUgYWJzb2x1dGVseSBwb3NpdGlvbmVkIHRodW1ibmFpbCBpbiBhIGxpc3QgdmlldyBjYXVzZXMgcHJvYmxlbXMgd2l0aCBmaXhlZCBwb3NpdGlvbiBidXR0b25zIGFib3ZlIGluIGEgbmF2IGJhclxyXG5cdFx0Ly9zZXR0aW5nIHRoZSBsaSdzIHRvIC13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZTNkKDAsMCwwKTsgc29sdmVzIHRoaXMgcHJvYmxlbSB0byBhdm9pZGUgcG90ZW50aWFsIGlzc3VlcyBpbiBvdGhlclxyXG5cdFx0Ly9wbGF0Zm9ybXMgd2Ugc2NvcGUgdGhpcyB3aXRoIHRoZSBjbGFzcyB1aS1hbmRyb2lkLTJ4LWZpeFxyXG5cdFx0X2JpbmRMaXN0VGh1bWJXb3JrYXJvdW5kOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50LmNsb3Nlc3QoIFwiLnVpLXBhZ2VcIiApLmFkZENsYXNzKCBcInVpLWFuZHJvaWQtMngtZml4ZWRcIiApO1xyXG5cdFx0fSxcclxuXHRcdC8vdGhpcyBhZGRyZXNzZXMgaXNzdWVzICM0MzM3IEZpeGVkIGhlYWRlciBwcm9ibGVtIGFmdGVyIHNjcm9sbGluZyBjb250ZW50IG9uIGlPUyBhbmQgQW5kcm9pZFxyXG5cdFx0Ly9hbmQgZGV2aWNlIGJ1Z3MgcHJvamVjdCBpc3N1ZSAjMSBGb3JtIGVsZW1lbnRzIGNhbiBsb3NlIGNsaWNrIGhpdCBhcmVhIGluIHBvc2l0aW9uOiBmaXhlZCBjb250YWluZXJzLlxyXG5cdFx0Ly90aGlzIGFsc28gYWRkcmVzc2VzIG5vdCBvbiBmaXhlZCB0b29sYmFycyBwYWdlIGluIGRvY3NcclxuXHRcdC8vYWRkaW5nIDFweCBvZiBwYWRkaW5nIHRvIHRoZSBib3R0b20gdGhlbiByZW1vdmluZyBpdCBjYXVzZXMgYSBcInJlZHJhd1wiXHJcblx0XHQvL3doaWNoIHBvc2l0aW9ucyB0aGUgdG9vbGJhcnMgY29ycmVjdGx5ICh0aGV5IHdpbGwgYWx3YXlzIGJlIHZpc3VhbGx5IGNvcnJlY3QpXHJcblx0XHRfdHJpZ2dlclJlZHJhdzogZnVuY3Rpb24oKSB7XHJcblx0XHRcdHZhciBwYWRkaW5nQm90dG9tID0gcGFyc2VGbG9hdCggJCggXCIudWktcGFnZS1hY3RpdmVcIiApLmNzcyggXCJwYWRkaW5nLWJvdHRvbVwiICkgKTtcclxuXHRcdFx0Ly90cmlnZ2VyIHBhZ2UgcmVkcmF3IHRvIGZpeCBpbmNvcnJlY3RseSBwb3NpdGlvbmVkIGZpeGVkIGVsZW1lbnRzXHJcblx0XHRcdCQoIFwiLnVpLXBhZ2UtYWN0aXZlXCIgKS5jc3MoIFwicGFkZGluZy1ib3R0b21cIiwgKCBwYWRkaW5nQm90dG9tICsgMSApICsgXCJweFwiICk7XHJcblx0XHRcdC8vaWYgdGhlIHBhZGRpbmcgaXMgcmVzZXQgd2l0aCBvdXQgYSB0aW1lb3V0IHRoZSByZXBvc2l0aW9uIHdpbGwgbm90IG9jY3VyZS5cclxuXHRcdFx0Ly90aGlzIGlzIGluZGVwZW5kYW50IG9mIEpRTSB0aGUgYnJvd3NlciBzZWVtcyB0byBuZWVkIHRoZSB0aW1lIHRvIHJlYWN0LlxyXG5cdFx0XHRzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHQkKCBcIi51aS1wYWdlLWFjdGl2ZVwiICkuY3NzKCBcInBhZGRpbmctYm90dG9tXCIsIHBhZGRpbmdCb3R0b20gKyBcInB4XCIgKTtcclxuXHRcdFx0fSwgMCApO1xyXG5cdFx0fSxcclxuXHJcblx0XHRkZXN0cm95OiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dGhpcy5fc3VwZXIoKTtcclxuXHRcdFx0Ly9SZW1vdmUgdGhlIGNsYXNzIHdlIGFkZGVkIHRvIHRoZSBwYWdlIHByZXZpb3VzbHkgaW4gYW5kcm9pZCAyLnhcclxuXHRcdFx0dGhpcy5lbGVtZW50LmNsb3Nlc3QoIFwiLnVpLXBhZ2UtYWN0aXZlXCIgKS5yZW1vdmVDbGFzcyggXCJ1aS1hbmRyb2lkLTJ4LWZpeFwiICk7XHJcblx0XHR9XHJcblx0fSk7XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG5cclxuKCBmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxudmFyIGllSGFjayA9ICggJC5tb2JpbGUuYnJvd3Nlci5vbGRJRSAmJiAkLm1vYmlsZS5icm93c2VyLm9sZElFIDw9IDggKSxcclxuXHR1aVRlbXBsYXRlID0gJChcclxuXHRcdFwiPGRpdiBjbGFzcz0ndWktcG9wdXAtYXJyb3ctZ3VpZGUnPjwvZGl2PlwiICtcclxuXHRcdFwiPGRpdiBjbGFzcz0ndWktcG9wdXAtYXJyb3ctY29udGFpbmVyXCIgKyAoIGllSGFjayA/IFwiIGllXCIgOiBcIlwiICkgKyBcIic+XCIgK1xyXG5cdFx0XHRcIjxkaXYgY2xhc3M9J3VpLXBvcHVwLWFycm93Jz48L2Rpdj5cIiArXHJcblx0XHRcIjwvZGl2PlwiXHJcblx0KTtcclxuXHJcbmZ1bmN0aW9uIGdldEFycm93KCkge1xyXG5cdHZhciBjbG9uZSA9IHVpVGVtcGxhdGUuY2xvbmUoKSxcclxuXHRcdGdkID0gY2xvbmUuZXEoIDAgKSxcclxuXHRcdGN0ID0gY2xvbmUuZXEoIDEgKSxcclxuXHRcdGFyID0gY3QuY2hpbGRyZW4oKTtcclxuXHJcblx0cmV0dXJuIHsgYXJFbHM6IGN0LmFkZCggZ2QgKSwgZ2Q6IGdkLCBjdDogY3QsIGFyOiBhciB9O1xyXG59XHJcblxyXG4kLndpZGdldCggXCJtb2JpbGUucG9wdXBcIiwgJC5tb2JpbGUucG9wdXAsIHtcclxuXHRvcHRpb25zOiB7XHJcblxyXG5cdFx0YXJyb3c6IFwiXCJcclxuXHR9LFxyXG5cclxuXHRfY3JlYXRlOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBhcixcclxuXHRcdFx0cmV0ID0gdGhpcy5fc3VwZXIoKTtcclxuXHJcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5hcnJvdyApIHtcclxuXHRcdFx0dGhpcy5fdWkuYXJyb3cgPSBhciA9IHRoaXMuX2FkZEFycm93KCk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHJldDtcclxuXHR9LFxyXG5cclxuXHRfYWRkQXJyb3c6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHRoZW1lLFxyXG5cdFx0XHRvcHRzID0gdGhpcy5vcHRpb25zLFxyXG5cdFx0XHRhciA9IGdldEFycm93KCk7XHJcblxyXG5cdFx0dGhlbWUgPSB0aGlzLl90aGVtZUNsYXNzRnJvbU9wdGlvbiggXCJ1aS1ib2R5LVwiLCBvcHRzLnRoZW1lICk7XHJcblx0XHRhci5hci5hZGRDbGFzcyggdGhlbWUgKyAoIG9wdHMuc2hhZG93ID8gXCIgdWktb3ZlcmxheS1zaGFkb3dcIiA6IFwiXCIgKSApO1xyXG5cdFx0YXIuYXJFbHMuaGlkZSgpLmFwcGVuZFRvKCB0aGlzLmVsZW1lbnQgKTtcclxuXHJcblx0XHRyZXR1cm4gYXI7XHJcblx0fSxcclxuXHJcblx0X3VuZW5oYW5jZTogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgYXIgPSB0aGlzLl91aS5hcnJvdztcclxuXHJcblx0XHRpZiAoIGFyICkge1xyXG5cdFx0XHRhci5hckVscy5yZW1vdmUoKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gdGhpcy5fc3VwZXIoKTtcclxuXHR9LFxyXG5cclxuXHQvLyBQcmV0ZW5kIHRvIHNob3cgYW4gYXJyb3cgZGVzY3JpYmVkIGJ5IEBwIGFuZCBAZGlyIGFuZCBjYWxjdWxhdGUgdGhlXHJcblx0Ly8gZGlzdGFuY2UgZnJvbSB0aGUgZGVzaXJlZCBwb2ludC4gSWYgYSBiZXN0LWRpc3RhbmNlIGlzIHBhc3NlZCBpbiwgcmV0dXJuXHJcblx0Ly8gdGhlIG1pbmltdW0gb2YgdGhlIG9uZSBwYXNzZWQgaW4gYW5kIHRoZSBvbmUgY2FsY3VsYXRlZC5cclxuXHRfdHJ5QW5BcnJvdzogZnVuY3Rpb24oIHAsIGRpciwgZGVzaXJlZCwgcywgYmVzdCApIHtcclxuXHRcdHZhciByZXN1bHQsIHIsIGRpZmYsIGRlc2lyZWRGb3JBcnJvdyA9IHt9LCB0aXAgPSB7fTtcclxuXHJcblx0XHQvLyBJZiB0aGUgYXJyb3cgaGFzIG5vIHdpZ2dsZSByb29tIGFsb25nIHRoZSBlZGdlIG9mIHRoZSBwb3B1cCwgaXQgY2Fubm90XHJcblx0XHQvLyBiZSBkaXNwbGF5ZWQgYWxvbmcgdGhlIHJlcXVlc3RlZCBlZGdlIHdpdGhvdXQgaXQgc3RpY2tpbmcgb3V0LlxyXG5cdFx0aWYgKCBzLmFyRnVsbFsgcC5kaW1LZXkgXSA+IHMuZ3VpZGVEaW1zWyBwLmRpbUtleSBdICkge1xyXG5cdFx0XHRyZXR1cm4gYmVzdDtcclxuXHRcdH1cclxuXHJcblx0XHRkZXNpcmVkRm9yQXJyb3dbIHAuZnN0IF0gPSBkZXNpcmVkWyBwLmZzdCBdICtcclxuXHRcdFx0KCBzLmFySGFsZlsgcC5vRGltS2V5IF0gKyBzLm1lbnVIYWxmWyBwLm9EaW1LZXkgXSApICogcC5vZmZzZXRGYWN0b3IgLVxyXG5cdFx0XHRzLmNvbnRlbnRCb3hbIHAuZnN0IF0gKyAoIHMuY2xhbXBJbmZvLm1lbnVTaXplWyBwLm9EaW1LZXkgXSAtIHMuY29udGVudEJveFsgcC5vRGltS2V5IF0gKSAqIHAuYXJyb3dPZmZzZXRGYWN0b3I7XHJcblx0XHRkZXNpcmVkRm9yQXJyb3dbIHAuc25kIF0gPSBkZXNpcmVkWyBwLnNuZCBdO1xyXG5cclxuXHRcdHJlc3VsdCA9IHMucmVzdWx0IHx8IHRoaXMuX2NhbGN1bGF0ZUZpbmFsTG9jYXRpb24oIGRlc2lyZWRGb3JBcnJvdywgcy5jbGFtcEluZm8gKTtcclxuXHRcdHIgPSB7IHg6IHJlc3VsdC5sZWZ0LCB5OiByZXN1bHQudG9wIH07XHJcblxyXG5cdFx0dGlwWyBwLmZzdCBdID0gclsgcC5mc3QgXSArIHMuY29udGVudEJveFsgcC5mc3QgXSArIHAudGlwT2Zmc2V0O1xyXG5cdFx0dGlwWyBwLnNuZCBdID0gTWF0aC5tYXgoIHJlc3VsdFsgcC5wcm9wIF0gKyBzLmd1aWRlT2Zmc2V0WyBwLnByb3AgXSArIHMuYXJIYWxmWyBwLmRpbUtleSBdLFxyXG5cdFx0XHRNYXRoLm1pbiggcmVzdWx0WyBwLnByb3AgXSArIHMuZ3VpZGVPZmZzZXRbIHAucHJvcCBdICsgcy5ndWlkZURpbXNbIHAuZGltS2V5IF0gLSBzLmFySGFsZlsgcC5kaW1LZXkgXSxcclxuXHRcdFx0XHRkZXNpcmVkWyBwLnNuZCBdICkgKTtcclxuXHJcblx0XHRkaWZmID0gTWF0aC5hYnMoIGRlc2lyZWQueCAtIHRpcC54ICkgKyBNYXRoLmFicyggZGVzaXJlZC55IC0gdGlwLnkgKTtcclxuXHRcdGlmICggIWJlc3QgfHwgZGlmZiA8IGJlc3QuZGlmZiApIHtcclxuXHRcdFx0Ly8gQ29udmVydCB0aXAgb2Zmc2V0IHRvIGNvb3JkaW5hdGVzIGluc2lkZSB0aGUgcG9wdXBcclxuXHRcdFx0dGlwWyBwLnNuZCBdIC09IHMuYXJIYWxmWyBwLmRpbUtleSBdICsgcmVzdWx0WyBwLnByb3AgXSArIHMuY29udGVudEJveFsgcC5zbmQgXTtcclxuXHRcdFx0YmVzdCA9IHsgZGlyOiBkaXIsIGRpZmY6IGRpZmYsIHJlc3VsdDogcmVzdWx0LCBwb3NQcm9wOiBwLnByb3AsIHBvc1ZhbDogdGlwWyBwLnNuZCBdIH07XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIGJlc3Q7XHJcblx0fSxcclxuXHJcblx0X2dldFBsYWNlbWVudFN0YXRlOiBmdW5jdGlvbiggY2xhbXAgKSB7XHJcblx0XHR2YXIgb2Zmc2V0LCBnZE9mZnNldCxcclxuXHRcdFx0YXIgPSB0aGlzLl91aS5hcnJvdyxcclxuXHRcdFx0c3RhdGUgPSB7XHJcblx0XHRcdFx0Y2xhbXBJbmZvOiB0aGlzLl9jbGFtcFBvcHVwV2lkdGgoICFjbGFtcCApLFxyXG5cdFx0XHRcdGFyRnVsbDogeyBjeDogYXIuY3Qud2lkdGgoKSwgY3k6IGFyLmN0LmhlaWdodCgpIH0sXHJcblx0XHRcdFx0Z3VpZGVEaW1zOiB7IGN4OiBhci5nZC53aWR0aCgpLCBjeTogYXIuZ2QuaGVpZ2h0KCkgfSxcclxuXHRcdFx0XHRndWlkZU9mZnNldDogYXIuZ2Qub2Zmc2V0KClcclxuXHRcdFx0fTtcclxuXHJcblx0XHRvZmZzZXQgPSB0aGlzLmVsZW1lbnQub2Zmc2V0KCk7XHJcblxyXG5cdFx0YXIuZ2QuY3NzKCB7IGxlZnQ6IDAsIHRvcDogMCwgcmlnaHQ6IDAsIGJvdHRvbTogMCB9ICk7XHJcblx0XHRnZE9mZnNldCA9IGFyLmdkLm9mZnNldCgpO1xyXG5cdFx0c3RhdGUuY29udGVudEJveCA9IHtcclxuXHRcdFx0eDogZ2RPZmZzZXQubGVmdCAtIG9mZnNldC5sZWZ0LFxyXG5cdFx0XHR5OiBnZE9mZnNldC50b3AgLSBvZmZzZXQudG9wLFxyXG5cdFx0XHRjeDogYXIuZ2Qud2lkdGgoKSxcclxuXHRcdFx0Y3k6IGFyLmdkLmhlaWdodCgpXHJcblx0XHR9O1xyXG5cdFx0YXIuZ2QucmVtb3ZlQXR0ciggXCJzdHlsZVwiICk7XHJcblxyXG5cdFx0Ly8gVGhlIGFycm93IGJveCBtb3ZlcyBiZXR3ZWVuIGd1aWRlT2Zmc2V0IGFuZCBndWlkZU9mZnNldCArIGd1aWRlRGltcyAtIGFyRnVsbFxyXG5cdFx0c3RhdGUuZ3VpZGVPZmZzZXQgPSB7IGxlZnQ6IHN0YXRlLmd1aWRlT2Zmc2V0LmxlZnQgLSBvZmZzZXQubGVmdCwgdG9wOiBzdGF0ZS5ndWlkZU9mZnNldC50b3AgLSBvZmZzZXQudG9wIH07XHJcblx0XHRzdGF0ZS5hckhhbGYgPSB7IGN4OiBzdGF0ZS5hckZ1bGwuY3ggLyAyLCBjeTogc3RhdGUuYXJGdWxsLmN5IC8gMiB9O1xyXG5cdFx0c3RhdGUubWVudUhhbGYgPSB7IGN4OiBzdGF0ZS5jbGFtcEluZm8ubWVudVNpemUuY3ggLyAyLCBjeTogc3RhdGUuY2xhbXBJbmZvLm1lbnVTaXplLmN5IC8gMiB9O1xyXG5cclxuXHRcdHJldHVybiBzdGF0ZTtcclxuXHR9LFxyXG5cclxuXHRfcGxhY2VtZW50Q29vcmRzOiBmdW5jdGlvbiggZGVzaXJlZCApIHtcclxuXHRcdHZhciBzdGF0ZSwgYmVzdCwgcGFyYW1zLCBlbE9mZnNldCwgYmdSZWYsXHJcblx0XHRcdG9wdGlvblZhbHVlID0gdGhpcy5vcHRpb25zLmFycm93LFxyXG5cdFx0XHRhciA9IHRoaXMuX3VpLmFycm93O1xyXG5cclxuXHRcdGlmICggIWFyICkge1xyXG5cdFx0XHRyZXR1cm4gdGhpcy5fc3VwZXIoIGRlc2lyZWQgKTtcclxuXHRcdH1cclxuXHJcblx0XHRhci5hckVscy5zaG93KCk7XHJcblxyXG5cdFx0YmdSZWYgPSB7fTtcclxuXHRcdHN0YXRlID0gdGhpcy5fZ2V0UGxhY2VtZW50U3RhdGUoIHRydWUgKTtcclxuXHRcdHBhcmFtcyA9IHtcclxuXHRcdFx0XCJsXCI6IHsgZnN0OiBcInhcIiwgc25kOiBcInlcIiwgcHJvcDogXCJ0b3BcIiwgZGltS2V5OiBcImN5XCIsIG9EaW1LZXk6IFwiY3hcIiwgb2Zmc2V0RmFjdG9yOiAxLCB0aXBPZmZzZXQ6ICAtc3RhdGUuYXJIYWxmLmN4LCBhcnJvd09mZnNldEZhY3RvcjogMCB9LFxyXG5cdFx0XHRcInJcIjogeyBmc3Q6IFwieFwiLCBzbmQ6IFwieVwiLCBwcm9wOiBcInRvcFwiLCBkaW1LZXk6IFwiY3lcIiwgb0RpbUtleTogXCJjeFwiLCBvZmZzZXRGYWN0b3I6IC0xLCB0aXBPZmZzZXQ6IHN0YXRlLmFySGFsZi5jeCArIHN0YXRlLmNvbnRlbnRCb3guY3gsIGFycm93T2Zmc2V0RmFjdG9yOiAxIH0sXHJcblx0XHRcdFwiYlwiOiB7IGZzdDogXCJ5XCIsIHNuZDogXCJ4XCIsIHByb3A6IFwibGVmdFwiLCBkaW1LZXk6IFwiY3hcIiwgb0RpbUtleTogXCJjeVwiLCBvZmZzZXRGYWN0b3I6IC0xLCB0aXBPZmZzZXQ6IHN0YXRlLmFySGFsZi5jeSArIHN0YXRlLmNvbnRlbnRCb3guY3ksIGFycm93T2Zmc2V0RmFjdG9yOiAxIH0sXHJcblx0XHRcdFwidFwiOiB7IGZzdDogXCJ5XCIsIHNuZDogXCJ4XCIsIHByb3A6IFwibGVmdFwiLCBkaW1LZXk6IFwiY3hcIiwgb0RpbUtleTogXCJjeVwiLCBvZmZzZXRGYWN0b3I6IDEsIHRpcE9mZnNldDogLXN0YXRlLmFySGFsZi5jeSwgYXJyb3dPZmZzZXRGYWN0b3I6IDAgfVxyXG5cdFx0fTtcclxuXHJcblx0XHQvLyBUcnkgZWFjaCBzaWRlIHNwZWNpZmllZCBpbiB0aGUgb3B0aW9ucyB0byBzZWUgb24gd2hpY2ggb25lIHRoZSBhcnJvd1xyXG5cdFx0Ly8gc2hvdWxkIGJlIHBsYWNlZCBzdWNoIHRoYXQgdGhlIGRpc3RhbmNlIGJldHdlZW4gdGhlIHRpcCBvZiB0aGUgYXJyb3cgYW5kXHJcblx0XHQvLyB0aGUgZGVzaXJlZCBjb29yZGluYXRlcyBpcyB0aGUgc2hvcnRlc3QuXHJcblx0XHQkLmVhY2goICggb3B0aW9uVmFsdWUgPT09IHRydWUgPyBcImwsdCxyLGJcIiA6IG9wdGlvblZhbHVlICkuc3BsaXQoIFwiLFwiICksXHJcblx0XHRcdCQucHJveHkoIGZ1bmN0aW9uKCBrZXksIHZhbHVlICkge1xyXG5cdFx0XHRcdGJlc3QgPSB0aGlzLl90cnlBbkFycm93KCBwYXJhbXNbIHZhbHVlIF0sIHZhbHVlLCBkZXNpcmVkLCBzdGF0ZSwgYmVzdCApO1xyXG5cdFx0XHR9LCB0aGlzICkgKTtcclxuXHJcblx0XHQvLyBDb3VsZCBub3QgcGxhY2UgdGhlIGFycm93IGFsb25nIGFueSBvZiB0aGUgZWRnZXMgLSBiZWhhdmUgYXMgaWYgc2hvd2luZ1xyXG5cdFx0Ly8gdGhlIGFycm93IHdhcyB0dXJuZWQgb2ZmLlxyXG5cdFx0aWYgKCAhYmVzdCApIHtcclxuXHRcdFx0YXIuYXJFbHMuaGlkZSgpO1xyXG5cdFx0XHRyZXR1cm4gdGhpcy5fc3VwZXIoIGRlc2lyZWQgKTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBNb3ZlIHRoZSBhcnJvdyBpbnRvIHBsYWNlXHJcblx0XHRhci5jdFxyXG5cdFx0XHQucmVtb3ZlQ2xhc3MoIFwidWktcG9wdXAtYXJyb3ctbCB1aS1wb3B1cC1hcnJvdy10IHVpLXBvcHVwLWFycm93LXIgdWktcG9wdXAtYXJyb3ctYlwiIClcclxuXHRcdFx0LmFkZENsYXNzKCBcInVpLXBvcHVwLWFycm93LVwiICsgYmVzdC5kaXIgKVxyXG5cdFx0XHQucmVtb3ZlQXR0ciggXCJzdHlsZVwiICkuY3NzKCBiZXN0LnBvc1Byb3AsIGJlc3QucG9zVmFsIClcclxuXHRcdFx0LnNob3coKTtcclxuXHJcblx0XHQvLyBEbyBub3QgbW92ZS9zaXplIHRoZSBiYWNrZ3JvdW5kIGRpdiBvbiBJRSwgYmVjYXVzZSB3ZSB1c2UgdGhlIGFycm93IGRpdiBmb3IgYmFja2dyb3VuZCBhcyB3ZWxsLlxyXG5cdFx0aWYgKCAhaWVIYWNrICkge1xyXG5cdFx0XHRlbE9mZnNldCA9IHRoaXMuZWxlbWVudC5vZmZzZXQoKTtcclxuXHRcdFx0YmdSZWZbIHBhcmFtc1sgYmVzdC5kaXIgXS5mc3QgXSA9IGFyLmN0Lm9mZnNldCgpO1xyXG5cdFx0XHRiZ1JlZlsgcGFyYW1zWyBiZXN0LmRpciBdLnNuZCBdID0ge1xyXG5cdFx0XHRcdGxlZnQ6IGVsT2Zmc2V0LmxlZnQgKyBzdGF0ZS5jb250ZW50Qm94LngsXHJcblx0XHRcdFx0dG9wOiBlbE9mZnNldC50b3AgKyBzdGF0ZS5jb250ZW50Qm94LnlcclxuXHRcdFx0fTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gYmVzdC5yZXN1bHQ7XHJcblx0fSxcclxuXHJcblx0X3NldE9wdGlvbnM6IGZ1bmN0aW9uKCBvcHRzICkge1xyXG5cdFx0dmFyIG5ld1RoZW1lLFxyXG5cdFx0XHRvbGRUaGVtZSA9IHRoaXMub3B0aW9ucy50aGVtZSxcclxuXHRcdFx0YXIgPSB0aGlzLl91aS5hcnJvdyxcclxuXHRcdFx0cmV0ID0gdGhpcy5fc3VwZXIoIG9wdHMgKTtcclxuXHJcblx0XHRpZiAoIG9wdHMuYXJyb3cgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0aWYgKCAhYXIgJiYgb3B0cy5hcnJvdyApIHtcclxuXHRcdFx0XHR0aGlzLl91aS5hcnJvdyA9IHRoaXMuX2FkZEFycm93KCk7XHJcblxyXG5cdFx0XHRcdC8vIEltcG9ydGFudCB0byByZXR1cm4gaGVyZSBzbyB3ZSBkb24ndCBzZXQgdGhlIHNhbWUgb3B0aW9ucyBhbGwgb3ZlclxyXG5cdFx0XHRcdC8vIGFnYWluIGJlbG93LlxyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fSBlbHNlIGlmICggYXIgJiYgIW9wdHMuYXJyb3cgKSB7XHJcblx0XHRcdFx0YXIuYXJFbHMucmVtb3ZlKCk7XHJcblx0XHRcdFx0dGhpcy5fdWkuYXJyb3cgPSBudWxsO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gUmVhc3NpZ24gd2l0aCBwb3RlbnRpYWxseSBuZXcgYXJyb3dcclxuXHRcdGFyID0gdGhpcy5fdWkuYXJyb3c7XHJcblxyXG5cdFx0aWYgKCBhciApIHtcclxuXHRcdFx0aWYgKCBvcHRzLnRoZW1lICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdFx0b2xkVGhlbWUgPSB0aGlzLl90aGVtZUNsYXNzRnJvbU9wdGlvbiggXCJ1aS1ib2R5LVwiLCBvbGRUaGVtZSApO1xyXG5cdFx0XHRcdG5ld1RoZW1lID0gdGhpcy5fdGhlbWVDbGFzc0Zyb21PcHRpb24oIFwidWktYm9keS1cIiwgb3B0cy50aGVtZSApO1xyXG5cdFx0XHRcdGFyLmFyLnJlbW92ZUNsYXNzKCBvbGRUaGVtZSApLmFkZENsYXNzKCBuZXdUaGVtZSApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoIG9wdHMuc2hhZG93ICE9PSB1bmRlZmluZWQgKSB7XHJcblx0XHRcdFx0YXIuYXIudG9nZ2xlQ2xhc3MoIFwidWktb3ZlcmxheS1zaGFkb3dcIiwgb3B0cy5zaGFkb3cgKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiByZXQ7XHJcblx0fSxcclxuXHJcblx0X2Rlc3Ryb3k6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGFyID0gdGhpcy5fdWkuYXJyb3c7XHJcblxyXG5cdFx0aWYgKCBhciApIHtcclxuXHRcdFx0YXIuYXJFbHMucmVtb3ZlKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIHRoaXMuX3N1cGVyKCk7XHJcblx0fVxyXG59KTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcbiQud2lkZ2V0KCBcIm1vYmlsZS5wYW5lbFwiLCB7XHJcblx0b3B0aW9uczoge1xyXG5cdFx0Y2xhc3Nlczoge1xyXG5cdFx0XHRwYW5lbDogXCJ1aS1wYW5lbFwiLFxyXG5cdFx0XHRwYW5lbE9wZW46IFwidWktcGFuZWwtb3BlblwiLFxyXG5cdFx0XHRwYW5lbENsb3NlZDogXCJ1aS1wYW5lbC1jbG9zZWRcIixcclxuXHRcdFx0cGFuZWxGaXhlZDogXCJ1aS1wYW5lbC1maXhlZFwiLFxyXG5cdFx0XHRwYW5lbElubmVyOiBcInVpLXBhbmVsLWlubmVyXCIsXHJcblx0XHRcdG1vZGFsOiBcInVpLXBhbmVsLWRpc21pc3NcIixcclxuXHRcdFx0bW9kYWxPcGVuOiBcInVpLXBhbmVsLWRpc21pc3Mtb3BlblwiLFxyXG5cdFx0XHRwYWdlQ29udGFpbmVyOiBcInVpLXBhbmVsLXBhZ2UtY29udGFpbmVyXCIsXHJcblx0XHRcdHBhZ2VXcmFwcGVyOiBcInVpLXBhbmVsLXdyYXBwZXJcIixcclxuXHRcdFx0cGFnZUZpeGVkVG9vbGJhcjogXCJ1aS1wYW5lbC1maXhlZC10b29sYmFyXCIsXHJcblx0XHRcdHBhZ2VDb250ZW50UHJlZml4OiBcInVpLXBhbmVsLXBhZ2UtY29udGVudFwiLCAvKiBVc2VkIGZvciB3cmFwcGVyIGFuZCBmaXhlZCB0b29sYmFycyBwb3NpdGlvbiwgZGlzcGxheSBhbmQgb3BlbiBjbGFzc2VzLiAqL1xyXG5cdFx0XHRhbmltYXRlOiBcInVpLXBhbmVsLWFuaW1hdGVcIlxyXG5cdFx0fSxcclxuXHRcdGFuaW1hdGU6IHRydWUsXHJcblx0XHR0aGVtZTogbnVsbCxcclxuXHRcdHBvc2l0aW9uOiBcImxlZnRcIixcclxuXHRcdGRpc21pc3NpYmxlOiB0cnVlLFxyXG5cdFx0ZGlzcGxheTogXCJyZXZlYWxcIiwgLy9hY2NlcHRzIHJldmVhbCwgcHVzaCwgb3ZlcmxheVxyXG5cdFx0c3dpcGVDbG9zZTogdHJ1ZSxcclxuXHRcdHBvc2l0aW9uRml4ZWQ6IGZhbHNlXHJcblx0fSxcclxuXHJcblx0X2Nsb3NlTGluazogbnVsbCxcclxuXHRfcGFyZW50UGFnZTogbnVsbCxcclxuXHRfcGFnZTogbnVsbCxcclxuXHRfbW9kYWw6IG51bGwsXHJcblx0X3BhbmVsSW5uZXI6IG51bGwsXHJcblx0X3dyYXBwZXI6IG51bGwsXHJcblx0X2ZpeGVkVG9vbGJhcnM6IG51bGwsXHJcblxyXG5cdF9jcmVhdGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGVsID0gdGhpcy5lbGVtZW50LFxyXG5cdFx0XHRwYXJlbnRQYWdlID0gZWwuY2xvc2VzdCggXCIudWktcGFnZSwgOmpxbURhdGEocm9sZT0ncGFnZScpXCIgKTtcclxuXHJcblx0XHQvLyBleHBvc2Ugc29tZSBwcml2YXRlIHByb3BzIHRvIG90aGVyIG1ldGhvZHNcclxuXHRcdCQuZXh0ZW5kKCB0aGlzLCB7XHJcblx0XHRcdF9jbG9zZUxpbms6IGVsLmZpbmQoIFwiOmpxbURhdGEocmVsPSdjbG9zZScpXCIgKSxcclxuXHRcdFx0X3BhcmVudFBhZ2U6ICggcGFyZW50UGFnZS5sZW5ndGggPiAwICkgPyBwYXJlbnRQYWdlIDogZmFsc2UsXHJcblx0XHRcdF9vcGVuZWRQYWdlOiBudWxsLFxyXG5cdFx0XHRfcGFnZTogdGhpcy5fZ2V0UGFnZSxcclxuXHRcdFx0X3BhbmVsSW5uZXI6IHRoaXMuX2dldFBhbmVsSW5uZXIoKSxcclxuXHRcdFx0X2ZpeGVkVG9vbGJhcnM6IHRoaXMuX2dldEZpeGVkVG9vbGJhcnNcclxuXHRcdH0pO1xyXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMuZGlzcGxheSAhPT0gXCJvdmVybGF5XCIgKXtcclxuXHRcdFx0dGhpcy5fZ2V0V3JhcHBlcigpO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5fYWRkUGFuZWxDbGFzc2VzKCk7XHJcblxyXG5cdFx0Ly8gaWYgYW5pbWF0aW5nLCBhZGQgdGhlIGNsYXNzIHRvIGRvIHNvXHJcblx0XHRpZiAoICQuc3VwcG9ydC5jc3NUcmFuc2Zvcm0zZCAmJiAhIXRoaXMub3B0aW9ucy5hbmltYXRlICkge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoIHRoaXMub3B0aW9ucy5jbGFzc2VzLmFuaW1hdGUgKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl9iaW5kVXBkYXRlTGF5b3V0KCk7XHJcblx0XHR0aGlzLl9iaW5kQ2xvc2VFdmVudHMoKTtcclxuXHRcdHRoaXMuX2JpbmRMaW5rTGlzdGVuZXJzKCk7XHJcblx0XHR0aGlzLl9iaW5kUGFnZUV2ZW50cygpO1xyXG5cclxuXHRcdGlmICggISF0aGlzLm9wdGlvbnMuZGlzbWlzc2libGUgKSB7XHJcblx0XHRcdHRoaXMuX2NyZWF0ZU1vZGFsKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5fYmluZFN3aXBlRXZlbnRzKCk7XHJcblx0fSxcclxuXHJcblx0X2dldFBhbmVsSW5uZXI6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHBhbmVsSW5uZXIgPSB0aGlzLmVsZW1lbnQuZmluZCggXCIuXCIgKyB0aGlzLm9wdGlvbnMuY2xhc3Nlcy5wYW5lbElubmVyICk7XHJcblxyXG5cdFx0aWYgKCBwYW5lbElubmVyLmxlbmd0aCA9PT0gMCApIHtcclxuXHRcdFx0cGFuZWxJbm5lciA9IHRoaXMuZWxlbWVudC5jaGlsZHJlbigpLndyYXBBbGwoIFwiPGRpdiBjbGFzcz0nXCIgKyB0aGlzLm9wdGlvbnMuY2xhc3Nlcy5wYW5lbElubmVyICsgXCInIC8+XCIgKS5wYXJlbnQoKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gcGFuZWxJbm5lcjtcclxuXHR9LFxyXG5cclxuXHRfY3JlYXRlTW9kYWw6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHNlbGYgPSB0aGlzLFxyXG5cdFx0XHR0YXJnZXQgPSBzZWxmLl9wYXJlbnRQYWdlID8gc2VsZi5fcGFyZW50UGFnZS5wYXJlbnQoKSA6IHNlbGYuZWxlbWVudC5wYXJlbnQoKTtcclxuXHJcblx0XHRzZWxmLl9tb2RhbCA9ICQoIFwiPGRpdiBjbGFzcz0nXCIgKyBzZWxmLm9wdGlvbnMuY2xhc3Nlcy5tb2RhbCArIFwiJz48L2Rpdj5cIiApXHJcblx0XHRcdC5vbiggXCJtb3VzZWRvd25cIiwgZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0c2VsZi5jbG9zZSgpO1xyXG5cdFx0XHR9KVxyXG5cdFx0XHQuYXBwZW5kVG8oIHRhcmdldCApO1xyXG5cdH0sXHJcblxyXG5cdF9nZXRQYWdlOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBwYWdlID0gdGhpcy5fb3BlbmVkUGFnZSB8fCB0aGlzLl9wYXJlbnRQYWdlIHx8ICQoIFwiLlwiICsgJC5tb2JpbGUuYWN0aXZlUGFnZUNsYXNzICk7XHJcblxyXG5cdFx0cmV0dXJuIHBhZ2U7XHJcblx0fSxcclxuXHJcblx0X2dldFdyYXBwZXI6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHdyYXBwZXIgPSB0aGlzLl9wYWdlKCkuZmluZCggXCIuXCIgKyB0aGlzLm9wdGlvbnMuY2xhc3Nlcy5wYWdlV3JhcHBlciApO1xyXG5cdFx0aWYgKCB3cmFwcGVyLmxlbmd0aCA9PT0gMCApIHtcclxuXHRcdFx0d3JhcHBlciA9IHRoaXMuX3BhZ2UoKS5jaGlsZHJlbiggXCIudWktaGVhZGVyOm5vdCgudWktaGVhZGVyLWZpeGVkKSwgLnVpLWNvbnRlbnQ6bm90KC51aS1wb3B1cCksIC51aS1mb290ZXI6bm90KC51aS1mb290ZXItZml4ZWQpXCIgKVxyXG5cdFx0XHRcdC53cmFwQWxsKCBcIjxkaXYgY2xhc3M9J1wiICsgdGhpcy5vcHRpb25zLmNsYXNzZXMucGFnZVdyYXBwZXIgKyBcIic+PC9kaXY+XCIgKVxyXG5cdFx0XHRcdC5wYXJlbnQoKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl93cmFwcGVyID0gd3JhcHBlcjtcclxuXHR9LFxyXG5cclxuXHRfZ2V0Rml4ZWRUb29sYmFyczogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgZXh0Rml4ZWRUb29sYmFycyA9ICQoIFwiYm9keVwiICkuY2hpbGRyZW4oIFwiLnVpLWhlYWRlci1maXhlZCwgLnVpLWZvb3Rlci1maXhlZFwiICksXHJcblx0XHRcdGludEZpeGVkVG9vbGJhcnMgPSB0aGlzLl9wYWdlKCkuZmluZCggXCIudWktaGVhZGVyLWZpeGVkLCAudWktZm9vdGVyLWZpeGVkXCIgKSxcclxuXHRcdFx0Zml4ZWRUb29sYmFycyA9IGV4dEZpeGVkVG9vbGJhcnMuYWRkKCBpbnRGaXhlZFRvb2xiYXJzICkuYWRkQ2xhc3MoIHRoaXMub3B0aW9ucy5jbGFzc2VzLnBhZ2VGaXhlZFRvb2xiYXIgKTtcclxuXHJcblx0XHRyZXR1cm4gZml4ZWRUb29sYmFycztcclxuXHR9LFxyXG5cclxuXHRfZ2V0UG9zRGlzcGxheUNsYXNzZXM6IGZ1bmN0aW9uKCBwcmVmaXggKSB7XHJcblx0XHRyZXR1cm4gcHJlZml4ICsgXCItcG9zaXRpb24tXCIgKyB0aGlzLm9wdGlvbnMucG9zaXRpb24gKyBcIiBcIiArIHByZWZpeCArIFwiLWRpc3BsYXktXCIgKyB0aGlzLm9wdGlvbnMuZGlzcGxheTtcclxuXHR9LFxyXG5cclxuXHRfZ2V0UGFuZWxDbGFzc2VzOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBwYW5lbENsYXNzZXMgPSB0aGlzLm9wdGlvbnMuY2xhc3Nlcy5wYW5lbCArXHJcblx0XHRcdFwiIFwiICsgdGhpcy5fZ2V0UG9zRGlzcGxheUNsYXNzZXMoIHRoaXMub3B0aW9ucy5jbGFzc2VzLnBhbmVsICkgK1xyXG5cdFx0XHRcIiBcIiArIHRoaXMub3B0aW9ucy5jbGFzc2VzLnBhbmVsQ2xvc2VkICtcclxuXHRcdFx0XCIgXCIgKyBcInVpLWJvZHktXCIgKyAoIHRoaXMub3B0aW9ucy50aGVtZSA/IHRoaXMub3B0aW9ucy50aGVtZSA6IFwiaW5oZXJpdFwiICk7XHJcblxyXG5cdFx0aWYgKCAhIXRoaXMub3B0aW9ucy5wb3NpdGlvbkZpeGVkICkge1xyXG5cdFx0XHRwYW5lbENsYXNzZXMgKz0gXCIgXCIgKyB0aGlzLm9wdGlvbnMuY2xhc3Nlcy5wYW5lbEZpeGVkO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBwYW5lbENsYXNzZXM7XHJcblx0fSxcclxuXHJcblx0X2FkZFBhbmVsQ2xhc3NlczogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoIHRoaXMuX2dldFBhbmVsQ2xhc3NlcygpICk7XHJcblx0fSxcclxuXHJcblx0X2hhbmRsZUNsb3NlQ2xpY2s6IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdGlmICggIWV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpICkge1xyXG5cdFx0XHR0aGlzLmNsb3NlKCk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X2JpbmRDbG9zZUV2ZW50czogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9vbiggdGhpcy5fY2xvc2VMaW5rLCB7XHJcblx0XHRcdFwiY2xpY2tcIjogXCJfaGFuZGxlQ2xvc2VDbGlja1wiXHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLl9vbih7XHJcblx0XHRcdFwiY2xpY2sgYTpqcW1EYXRhKGFqYXg9J2ZhbHNlJylcIjogXCJfaGFuZGxlQ2xvc2VDbGlja1wiXHJcblx0XHR9KTtcclxuXHR9LFxyXG5cclxuXHRfcG9zaXRpb25QYW5lbDogZnVuY3Rpb24oIHNjcm9sbFRvVG9wICkge1xyXG5cdFx0dmFyIHNlbGYgPSB0aGlzLFxyXG5cdFx0XHRwYW5lbElubmVySGVpZ2h0ID0gc2VsZi5fcGFuZWxJbm5lci5vdXRlckhlaWdodCgpLFxyXG5cdFx0XHRleHBhbmQgPSBwYW5lbElubmVySGVpZ2h0ID4gJC5tb2JpbGUuZ2V0U2NyZWVuSGVpZ2h0KCk7XHJcblxyXG5cdFx0aWYgKCBleHBhbmQgfHwgIXNlbGYub3B0aW9ucy5wb3NpdGlvbkZpeGVkICkge1xyXG5cdFx0XHRpZiAoIGV4cGFuZCApIHtcclxuXHRcdFx0XHRzZWxmLl91bmZpeFBhbmVsKCk7XHJcblx0XHRcdFx0JC5tb2JpbGUucmVzZXRBY3RpdmVQYWdlSGVpZ2h0KCBwYW5lbElubmVySGVpZ2h0ICk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKCBzY3JvbGxUb1RvcCApIHtcclxuXHRcdFx0XHR0aGlzLndpbmRvd1sgMCBdLnNjcm9sbFRvKCAwLCAkLm1vYmlsZS5kZWZhdWx0SG9tZVNjcm9sbCApO1xyXG5cdFx0XHR9XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHRzZWxmLl9maXhQYW5lbCgpO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9iaW5kRml4TGlzdGVuZXI6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5fb24oICQoIHdpbmRvdyApLCB7IFwidGhyb3R0bGVkcmVzaXplXCI6IFwiX3Bvc2l0aW9uUGFuZWxcIiB9KTtcclxuXHR9LFxyXG5cclxuXHRfdW5iaW5kRml4TGlzdGVuZXI6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5fb2ZmKCAkKCB3aW5kb3cgKSwgXCJ0aHJvdHRsZWRyZXNpemVcIiApO1xyXG5cdH0sXHJcblxyXG5cdF91bmZpeFBhbmVsOiBmdW5jdGlvbigpIHtcclxuXHRcdGlmICggISF0aGlzLm9wdGlvbnMucG9zaXRpb25GaXhlZCAmJiAkLnN1cHBvcnQuZml4ZWRQb3NpdGlvbiApIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKCB0aGlzLm9wdGlvbnMuY2xhc3Nlcy5wYW5lbEZpeGVkICk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X2ZpeFBhbmVsOiBmdW5jdGlvbigpIHtcclxuXHRcdGlmICggISF0aGlzLm9wdGlvbnMucG9zaXRpb25GaXhlZCAmJiAkLnN1cHBvcnQuZml4ZWRQb3NpdGlvbiApIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50LmFkZENsYXNzKCB0aGlzLm9wdGlvbnMuY2xhc3Nlcy5wYW5lbEZpeGVkICk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X2JpbmRVcGRhdGVMYXlvdXQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuXHRcdHNlbGYuZWxlbWVudC5vbiggXCJ1cGRhdGVsYXlvdXRcIiwgZnVuY3Rpb24oLyogZSAqLykge1xyXG5cdFx0XHRpZiAoIHNlbGYuX29wZW4gKSB7XHJcblx0XHRcdFx0c2VsZi5fcG9zaXRpb25QYW5lbCgpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9LFxyXG5cclxuXHRfYmluZExpbmtMaXN0ZW5lcnM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5fb24oIFwiYm9keVwiLCB7XHJcblx0XHRcdFwiY2xpY2sgYVwiOiBcIl9oYW5kbGVDbGlja1wiXHJcblx0XHR9KTtcclxuXHJcblx0fSxcclxuXHJcblx0X2hhbmRsZUNsaWNrOiBmdW5jdGlvbiggZSApIHtcclxuXHRcdHZhciBsaW5rLFxyXG5cdFx0XHRwYW5lbElkID0gdGhpcy5lbGVtZW50LmF0dHIoIFwiaWRcIiApO1xyXG5cclxuXHRcdGlmICggZS5jdXJyZW50VGFyZ2V0LmhyZWYuc3BsaXQoIFwiI1wiIClbIDEgXSA9PT0gcGFuZWxJZCAmJiBwYW5lbElkICE9PSB1bmRlZmluZWQgKSB7XHJcblxyXG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdGxpbmsgPSAkKCBlLnRhcmdldCApO1xyXG5cdFx0XHRpZiAoIGxpbmsuaGFzQ2xhc3MoIFwidWktYnRuXCIgKSApIHtcclxuXHRcdFx0XHRsaW5rLmFkZENsYXNzKCAkLm1vYmlsZS5hY3RpdmVCdG5DbGFzcyApO1xyXG5cdFx0XHRcdHRoaXMuZWxlbWVudC5vbmUoIFwicGFuZWxvcGVuIHBhbmVsY2xvc2VcIiwgZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHRsaW5rLnJlbW92ZUNsYXNzKCAkLm1vYmlsZS5hY3RpdmVCdG5DbGFzcyApO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHRcdHRoaXMudG9nZ2xlKCk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X2JpbmRTd2lwZUV2ZW50czogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgc2VsZiA9IHRoaXMsXHJcblx0XHRcdGFyZWEgPSBzZWxmLl9tb2RhbCA/IHNlbGYuZWxlbWVudC5hZGQoIHNlbGYuX21vZGFsICkgOiBzZWxmLmVsZW1lbnQ7XHJcblxyXG5cdFx0Ly8gb24gc3dpcGUsIGNsb3NlIHRoZSBwYW5lbFxyXG5cdFx0aWYgKCAhIXNlbGYub3B0aW9ucy5zd2lwZUNsb3NlICkge1xyXG5cdFx0XHRpZiAoIHNlbGYub3B0aW9ucy5wb3NpdGlvbiA9PT0gXCJsZWZ0XCIgKSB7XHJcblx0XHRcdFx0YXJlYS5vbiggXCJzd2lwZWxlZnQucGFuZWxcIiwgZnVuY3Rpb24oLyogZSAqLykge1xyXG5cdFx0XHRcdFx0c2VsZi5jbG9zZSgpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGFyZWEub24oIFwic3dpcGVyaWdodC5wYW5lbFwiLCBmdW5jdGlvbigvKiBlICovKSB7XHJcblx0XHRcdFx0XHRzZWxmLmNsb3NlKCk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfYmluZFBhZ2VFdmVudHM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuXHRcdHRoaXMuZG9jdW1lbnRcclxuXHRcdFx0Ly8gQ2xvc2UgdGhlIHBhbmVsIGlmIGFub3RoZXIgcGFuZWwgb24gdGhlIHBhZ2Ugb3BlbnNcclxuXHRcdFx0Lm9uKCBcInBhbmVsYmVmb3Jlb3BlblwiLCBmdW5jdGlvbiggZSApIHtcclxuXHRcdFx0XHRpZiAoIHNlbGYuX29wZW4gJiYgZS50YXJnZXQgIT09IHNlbGYuZWxlbWVudFsgMCBdICkge1xyXG5cdFx0XHRcdFx0c2VsZi5jbG9zZSgpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSlcclxuXHRcdFx0Ly8gT24gZXNjYXBlLCBjbG9zZT8gbWlnaHQgbmVlZCB0byBoYXZlIGEgdGFyZ2V0IGNoZWNrIHRvby4uLlxyXG5cdFx0XHQub24oIFwia2V5dXAucGFuZWxcIiwgZnVuY3Rpb24oIGUgKSB7XHJcblx0XHRcdFx0aWYgKCBlLmtleUNvZGUgPT09IDI3ICYmIHNlbGYuX29wZW4gKSB7XHJcblx0XHRcdFx0XHRzZWxmLmNsb3NlKCk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdGlmICggIXRoaXMuX3BhcmVudFBhZ2UgJiYgdGhpcy5vcHRpb25zLmRpc3BsYXkgIT09IFwib3ZlcmxheVwiICkge1xyXG5cdFx0XHR0aGlzLl9vbiggdGhpcy5kb2N1bWVudCwge1xyXG5cdFx0XHRcdFwicGFnZXNob3dcIjogZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHR0aGlzLl9vcGVuZWRQYWdlID0gbnVsbDtcclxuXHRcdFx0XHRcdHRoaXMuX2dldFdyYXBwZXIoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdFx0Ly8gQ2xlYW4gdXAgb3BlbiBwYW5lbHMgYWZ0ZXIgcGFnZSBoaWRlXHJcblx0XHRpZiAoIHNlbGYuX3BhcmVudFBhZ2UgKSB7XHJcblx0XHRcdHRoaXMuZG9jdW1lbnQub24oIFwicGFnZWhpZGVcIiwgXCI6anFtRGF0YShyb2xlPSdwYWdlJylcIiwgZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0aWYgKCBzZWxmLl9vcGVuICkge1xyXG5cdFx0XHRcdFx0c2VsZi5jbG9zZSggdHJ1ZSApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLmRvY3VtZW50Lm9uKCBcInBhZ2ViZWZvcmVoaWRlXCIsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdGlmICggc2VsZi5fb3BlbiApIHtcclxuXHRcdFx0XHRcdHNlbGYuY2xvc2UoIHRydWUgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdC8vIHN0YXRlIHN0b3JhZ2Ugb2Ygb3BlbiBvciBjbG9zZWRcclxuXHRfb3BlbjogZmFsc2UsXHJcblx0X3BhZ2VDb250ZW50T3BlbkNsYXNzZXM6IG51bGwsXHJcblx0X21vZGFsT3BlbkNsYXNzZXM6IG51bGwsXHJcblxyXG5cdG9wZW46IGZ1bmN0aW9uKCBpbW1lZGlhdGUgKSB7XHJcblx0XHRpZiAoICF0aGlzLl9vcGVuICkge1xyXG5cdFx0XHR2YXIgc2VsZiA9IHRoaXMsXHJcblx0XHRcdFx0byA9IHNlbGYub3B0aW9ucyxcclxuXHJcblx0XHRcdFx0X29wZW5QYW5lbCA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0c2VsZi5fb2ZmKCBzZWxmLmRvY3VtZW50ICwgXCJwYW5lbGNsb3NlXCIgKTtcclxuXHRcdFx0XHRcdHNlbGYuX3BhZ2UoKS5qcW1EYXRhKCBcInBhbmVsXCIsIFwib3BlblwiICk7XHJcblxyXG5cdFx0XHRcdFx0aWYgKCAkLnN1cHBvcnQuY3NzVHJhbnNmb3JtM2QgJiYgISFvLmFuaW1hdGUgJiYgby5kaXNwbGF5ICE9PSBcIm92ZXJsYXlcIiApIHtcclxuXHRcdFx0XHRcdFx0c2VsZi5fd3JhcHBlci5hZGRDbGFzcyggby5jbGFzc2VzLmFuaW1hdGUgKTtcclxuXHRcdFx0XHRcdFx0c2VsZi5fZml4ZWRUb29sYmFycygpLmFkZENsYXNzKCBvLmNsYXNzZXMuYW5pbWF0ZSApO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdGlmICggIWltbWVkaWF0ZSAmJiAkLnN1cHBvcnQuY3NzVHJhbnNmb3JtM2QgJiYgISFvLmFuaW1hdGUgKSB7XHJcblx0XHRcdFx0XHRcdCggc2VsZi5fd3JhcHBlciB8fCBzZWxmLmVsZW1lbnQgKVxyXG5cdFx0XHRcdFx0XHRcdC5hbmltYXRpb25Db21wbGV0ZSggY29tcGxldGUsIFwidHJhbnNpdGlvblwiICk7XHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCBjb21wbGV0ZSwgMCApO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdGlmICggby50aGVtZSAmJiBvLmRpc3BsYXkgIT09IFwib3ZlcmxheVwiICkge1xyXG5cdFx0XHRcdFx0XHRzZWxmLl9wYWdlKCkucGFyZW50KClcclxuXHRcdFx0XHRcdFx0XHQuYWRkQ2xhc3MoIG8uY2xhc3Nlcy5wYWdlQ29udGFpbmVyICsgXCItdGhlbWVkIFwiICsgby5jbGFzc2VzLnBhZ2VDb250YWluZXIgKyBcIi1cIiArIG8udGhlbWUgKTtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRzZWxmLmVsZW1lbnRcclxuXHRcdFx0XHRcdFx0LnJlbW92ZUNsYXNzKCBvLmNsYXNzZXMucGFuZWxDbG9zZWQgKVxyXG5cdFx0XHRcdFx0XHQuYWRkQ2xhc3MoIG8uY2xhc3Nlcy5wYW5lbE9wZW4gKTtcclxuXHJcblx0XHRcdFx0XHRzZWxmLl9wb3NpdGlvblBhbmVsKCB0cnVlICk7XHJcblxyXG5cdFx0XHRcdFx0c2VsZi5fcGFnZUNvbnRlbnRPcGVuQ2xhc3NlcyA9IHNlbGYuX2dldFBvc0Rpc3BsYXlDbGFzc2VzKCBvLmNsYXNzZXMucGFnZUNvbnRlbnRQcmVmaXggKTtcclxuXHJcblx0XHRcdFx0XHRpZiAoIG8uZGlzcGxheSAhPT0gXCJvdmVybGF5XCIgKSB7XHJcblx0XHRcdFx0XHRcdHNlbGYuX3BhZ2UoKS5wYXJlbnQoKS5hZGRDbGFzcyggby5jbGFzc2VzLnBhZ2VDb250YWluZXIgKTtcclxuXHRcdFx0XHRcdFx0c2VsZi5fd3JhcHBlci5hZGRDbGFzcyggc2VsZi5fcGFnZUNvbnRlbnRPcGVuQ2xhc3NlcyApO1xyXG5cdFx0XHRcdFx0XHRzZWxmLl9maXhlZFRvb2xiYXJzKCkuYWRkQ2xhc3MoIHNlbGYuX3BhZ2VDb250ZW50T3BlbkNsYXNzZXMgKTtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRzZWxmLl9tb2RhbE9wZW5DbGFzc2VzID0gc2VsZi5fZ2V0UG9zRGlzcGxheUNsYXNzZXMoIG8uY2xhc3Nlcy5tb2RhbCApICsgXCIgXCIgKyBvLmNsYXNzZXMubW9kYWxPcGVuO1xyXG5cdFx0XHRcdFx0aWYgKCBzZWxmLl9tb2RhbCApIHtcclxuXHRcdFx0XHRcdFx0c2VsZi5fbW9kYWxcclxuXHRcdFx0XHRcdFx0XHQuYWRkQ2xhc3MoIHNlbGYuX21vZGFsT3BlbkNsYXNzZXMgKVxyXG5cdFx0XHRcdFx0XHRcdC5oZWlnaHQoIE1hdGgubWF4KCBzZWxmLl9tb2RhbC5oZWlnaHQoKSwgc2VsZi5kb2N1bWVudC5oZWlnaHQoKSApICk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSxcclxuXHRcdFx0XHRjb21wbGV0ZSA9IGZ1bmN0aW9uKCkge1xyXG5cclxuXHRcdFx0XHRcdC8vIEJhaWwgaWYgdGhlIHBhbmVsIHdhcyBjbG9zZWQgYmVmb3JlIHRoZSBvcGVuaW5nIGFuaW1hdGlvbiBoYXMgY29tcGxldGVkXHJcblx0XHRcdFx0XHRpZiAoICFzZWxmLl9vcGVuICkge1xyXG5cdFx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0aWYgKCBvLmRpc3BsYXkgIT09IFwib3ZlcmxheVwiICkge1xyXG5cdFx0XHRcdFx0XHRzZWxmLl93cmFwcGVyLmFkZENsYXNzKCBvLmNsYXNzZXMucGFnZUNvbnRlbnRQcmVmaXggKyBcIi1vcGVuXCIgKTtcclxuXHRcdFx0XHRcdFx0c2VsZi5fZml4ZWRUb29sYmFycygpLmFkZENsYXNzKCBvLmNsYXNzZXMucGFnZUNvbnRlbnRQcmVmaXggKyBcIi1vcGVuXCIgKTtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRzZWxmLl9iaW5kRml4TGlzdGVuZXIoKTtcclxuXHJcblx0XHRcdFx0XHRzZWxmLl90cmlnZ2VyKCBcIm9wZW5cIiApO1xyXG5cclxuXHRcdFx0XHRcdHNlbGYuX29wZW5lZFBhZ2UgPSBzZWxmLl9wYWdlKCk7XHJcblx0XHRcdFx0fTtcclxuXHJcblx0XHRcdHNlbGYuX3RyaWdnZXIoIFwiYmVmb3Jlb3BlblwiICk7XHJcblxyXG5cdFx0XHRpZiAoIHNlbGYuX3BhZ2UoKS5qcW1EYXRhKCBcInBhbmVsXCIgKSA9PT0gXCJvcGVuXCIgKSB7XHJcblx0XHRcdFx0c2VsZi5fb24oIHNlbGYuZG9jdW1lbnQsIHtcclxuXHRcdFx0XHRcdFwicGFuZWxjbG9zZVwiOiBfb3BlblBhbmVsXHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0X29wZW5QYW5lbCgpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRzZWxmLl9vcGVuID0gdHJ1ZTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRjbG9zZTogZnVuY3Rpb24oIGltbWVkaWF0ZSApIHtcclxuXHRcdGlmICggdGhpcy5fb3BlbiApIHtcclxuXHRcdFx0dmFyIHNlbGYgPSB0aGlzLFxyXG5cdFx0XHRcdG8gPSB0aGlzLm9wdGlvbnMsXHJcblxyXG5cdFx0XHRcdF9jbG9zZVBhbmVsID0gZnVuY3Rpb24oKSB7XHJcblxyXG5cdFx0XHRcdFx0c2VsZi5lbGVtZW50LnJlbW92ZUNsYXNzKCBvLmNsYXNzZXMucGFuZWxPcGVuICk7XHJcblxyXG5cdFx0XHRcdFx0aWYgKCBvLmRpc3BsYXkgIT09IFwib3ZlcmxheVwiICkge1xyXG5cdFx0XHRcdFx0XHRzZWxmLl93cmFwcGVyLnJlbW92ZUNsYXNzKCBzZWxmLl9wYWdlQ29udGVudE9wZW5DbGFzc2VzICk7XHJcblx0XHRcdFx0XHRcdHNlbGYuX2ZpeGVkVG9vbGJhcnMoKS5yZW1vdmVDbGFzcyggc2VsZi5fcGFnZUNvbnRlbnRPcGVuQ2xhc3NlcyApO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdGlmICggIWltbWVkaWF0ZSAmJiAkLnN1cHBvcnQuY3NzVHJhbnNmb3JtM2QgJiYgISFvLmFuaW1hdGUgKSB7XHJcblx0XHRcdFx0XHRcdCggc2VsZi5fd3JhcHBlciB8fCBzZWxmLmVsZW1lbnQgKVxyXG5cdFx0XHRcdFx0XHRcdC5hbmltYXRpb25Db21wbGV0ZSggY29tcGxldGUsIFwidHJhbnNpdGlvblwiICk7XHJcblx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRzZXRUaW1lb3V0KCBjb21wbGV0ZSwgMCApO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdGlmICggc2VsZi5fbW9kYWwgKSB7XHJcblx0XHRcdFx0XHRcdHNlbGYuX21vZGFsXHJcblx0XHRcdFx0XHRcdFx0LnJlbW92ZUNsYXNzKCBzZWxmLl9tb2RhbE9wZW5DbGFzc2VzIClcclxuXHRcdFx0XHRcdFx0XHQuaGVpZ2h0KCBcIlwiICk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSxcclxuXHRcdFx0XHRjb21wbGV0ZSA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0aWYgKCBvLnRoZW1lICYmIG8uZGlzcGxheSAhPT0gXCJvdmVybGF5XCIgKSB7XHJcblx0XHRcdFx0XHRcdHNlbGYuX3BhZ2UoKS5wYXJlbnQoKS5yZW1vdmVDbGFzcyggby5jbGFzc2VzLnBhZ2VDb250YWluZXIgKyBcIi10aGVtZWQgXCIgKyBvLmNsYXNzZXMucGFnZUNvbnRhaW5lciArIFwiLVwiICsgby50aGVtZSApO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdHNlbGYuZWxlbWVudC5hZGRDbGFzcyggby5jbGFzc2VzLnBhbmVsQ2xvc2VkICk7XHJcblxyXG5cdFx0XHRcdFx0aWYgKCBvLmRpc3BsYXkgIT09IFwib3ZlcmxheVwiICkge1xyXG5cdFx0XHRcdFx0XHRzZWxmLl9wYWdlKCkucGFyZW50KCkucmVtb3ZlQ2xhc3MoIG8uY2xhc3Nlcy5wYWdlQ29udGFpbmVyICk7XHJcblx0XHRcdFx0XHRcdHNlbGYuX3dyYXBwZXIucmVtb3ZlQ2xhc3MoIG8uY2xhc3Nlcy5wYWdlQ29udGVudFByZWZpeCArIFwiLW9wZW5cIiApO1xyXG5cdFx0XHRcdFx0XHRzZWxmLl9maXhlZFRvb2xiYXJzKCkucmVtb3ZlQ2xhc3MoIG8uY2xhc3Nlcy5wYWdlQ29udGVudFByZWZpeCArIFwiLW9wZW5cIiApO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdGlmICggJC5zdXBwb3J0LmNzc1RyYW5zZm9ybTNkICYmICEhby5hbmltYXRlICYmIG8uZGlzcGxheSAhPT0gXCJvdmVybGF5XCIgKSB7XHJcblx0XHRcdFx0XHRcdHNlbGYuX3dyYXBwZXIucmVtb3ZlQ2xhc3MoIG8uY2xhc3Nlcy5hbmltYXRlICk7XHJcblx0XHRcdFx0XHRcdHNlbGYuX2ZpeGVkVG9vbGJhcnMoKS5yZW1vdmVDbGFzcyggby5jbGFzc2VzLmFuaW1hdGUgKTtcclxuXHRcdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0XHRzZWxmLl9maXhQYW5lbCgpO1xyXG5cdFx0XHRcdFx0c2VsZi5fdW5iaW5kRml4TGlzdGVuZXIoKTtcclxuXHRcdFx0XHRcdCQubW9iaWxlLnJlc2V0QWN0aXZlUGFnZUhlaWdodCgpO1xyXG5cclxuXHRcdFx0XHRcdHNlbGYuX3BhZ2UoKS5qcW1SZW1vdmVEYXRhKCBcInBhbmVsXCIgKTtcclxuXHJcblx0XHRcdFx0XHRzZWxmLl90cmlnZ2VyKCBcImNsb3NlXCIgKTtcclxuXHJcblx0XHRcdFx0XHRzZWxmLl9vcGVuZWRQYWdlID0gbnVsbDtcclxuXHRcdFx0XHR9O1xyXG5cclxuXHRcdFx0c2VsZi5fdHJpZ2dlciggXCJiZWZvcmVjbG9zZVwiICk7XHJcblxyXG5cdFx0XHRfY2xvc2VQYW5lbCgpO1xyXG5cclxuXHRcdFx0c2VsZi5fb3BlbiA9IGZhbHNlO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdHRvZ2dsZTogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzWyB0aGlzLl9vcGVuID8gXCJjbG9zZVwiIDogXCJvcGVuXCIgXSgpO1xyXG5cdH0sXHJcblxyXG5cdF9kZXN0cm95OiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBvdGhlclBhbmVscyxcclxuXHRcdG8gPSB0aGlzLm9wdGlvbnMsXHJcblx0XHRtdWx0aXBsZVBhbmVscyA9ICggJCggXCJib2R5ID4gOm1vYmlsZS1wYW5lbFwiICkubGVuZ3RoICsgJC5tb2JpbGUuYWN0aXZlUGFnZS5maW5kKCBcIjptb2JpbGUtcGFuZWxcIiApLmxlbmd0aCApID4gMTtcclxuXHJcblx0XHRpZiAoIG8uZGlzcGxheSAhPT0gXCJvdmVybGF5XCIgKSB7XHJcblxyXG5cdFx0XHQvLyAgcmVtb3ZlIHRoZSB3cmFwcGVyIGlmIG5vdCBpbiB1c2UgYnkgYW5vdGhlciBwYW5lbFxyXG5cdFx0XHRvdGhlclBhbmVscyA9ICQoIFwiYm9keSA+IDptb2JpbGUtcGFuZWxcIiApLmFkZCggJC5tb2JpbGUuYWN0aXZlUGFnZS5maW5kKCBcIjptb2JpbGUtcGFuZWxcIiApICk7XHJcblx0XHRcdGlmICggb3RoZXJQYW5lbHMubm90KCBcIi51aS1wYW5lbC1kaXNwbGF5LW92ZXJsYXlcIiApLm5vdCggdGhpcy5lbGVtZW50ICkubGVuZ3RoID09PSAwICkge1xyXG5cdFx0XHRcdHRoaXMuX3dyYXBwZXIuY2hpbGRyZW4oKS51bndyYXAoKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKCB0aGlzLl9vcGVuICkge1xyXG5cclxuXHRcdFx0XHR0aGlzLl9maXhlZFRvb2xiYXJzKCkucmVtb3ZlQ2xhc3MoIG8uY2xhc3Nlcy5wYWdlQ29udGVudFByZWZpeCArIFwiLW9wZW5cIiApO1xyXG5cclxuXHRcdFx0XHRpZiAoICQuc3VwcG9ydC5jc3NUcmFuc2Zvcm0zZCAmJiAhIW8uYW5pbWF0ZSApIHtcclxuXHRcdFx0XHRcdHRoaXMuX2ZpeGVkVG9vbGJhcnMoKS5yZW1vdmVDbGFzcyggby5jbGFzc2VzLmFuaW1hdGUgKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdHRoaXMuX3BhZ2UoKS5wYXJlbnQoKS5yZW1vdmVDbGFzcyggby5jbGFzc2VzLnBhZ2VDb250YWluZXIgKTtcclxuXHJcblx0XHRcdFx0aWYgKCBvLnRoZW1lICkge1xyXG5cdFx0XHRcdFx0dGhpcy5fcGFnZSgpLnBhcmVudCgpLnJlbW92ZUNsYXNzKCBvLmNsYXNzZXMucGFnZUNvbnRhaW5lciArIFwiLXRoZW1lZCBcIiArIG8uY2xhc3Nlcy5wYWdlQ29udGFpbmVyICsgXCItXCIgKyBvLnRoZW1lICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCAhbXVsdGlwbGVQYW5lbHMgKSB7XHJcblxyXG5cdFx0XHR0aGlzLmRvY3VtZW50Lm9mZiggXCJwYW5lbG9wZW4gcGFuZWxjbG9zZVwiICk7XHJcblxyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggdGhpcy5fb3BlbiApIHtcclxuXHRcdFx0dGhpcy5fcGFnZSgpLmpxbVJlbW92ZURhdGEoIFwicGFuZWxcIiApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX3BhbmVsSW5uZXIuY2hpbGRyZW4oKS51bndyYXAoKTtcclxuXHJcblx0XHR0aGlzLmVsZW1lbnRcclxuXHRcdFx0LnJlbW92ZUNsYXNzKCBbIHRoaXMuX2dldFBhbmVsQ2xhc3NlcygpLCBvLmNsYXNzZXMucGFuZWxPcGVuLCBvLmNsYXNzZXMuYW5pbWF0ZSBdLmpvaW4oIFwiIFwiICkgKVxyXG5cdFx0XHQub2ZmKCBcInN3aXBlbGVmdC5wYW5lbCBzd2lwZXJpZ2h0LnBhbmVsXCIgKVxyXG5cdFx0XHQub2ZmKCBcInBhbmVsYmVmb3Jlb3BlblwiIClcclxuXHRcdFx0Lm9mZiggXCJwYW5lbGhpZGVcIiApXHJcblx0XHRcdC5vZmYoIFwia2V5dXAucGFuZWxcIiApXHJcblx0XHRcdC5vZmYoIFwidXBkYXRlbGF5b3V0XCIgKTtcclxuXHJcblx0XHRpZiAoIHRoaXMuX21vZGFsICkge1xyXG5cdFx0XHR0aGlzLl9tb2RhbC5yZW1vdmUoKTtcclxuXHRcdH1cclxuXHR9XHJcbn0pO1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG4kLndpZGdldCggXCJtb2JpbGUudGFibGVcIiwge1xyXG5cdG9wdGlvbnM6IHtcclxuXHRcdGNsYXNzZXM6IHtcclxuXHRcdFx0dGFibGU6IFwidWktdGFibGVcIlxyXG5cdFx0fSxcclxuXHRcdGVuaGFuY2VkOiBmYWxzZVxyXG5cdH0sXHJcblxyXG5cdF9jcmVhdGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0aWYgKCAhdGhpcy5vcHRpb25zLmVuaGFuY2VkICkge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoIHRoaXMub3B0aW9ucy5jbGFzc2VzLnRhYmxlICk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gZXh0ZW5kIGhlcmUsIGFzc2lnbiBvbiByZWZyZXNoID4gX3NldEhlYWRlcnNcclxuXHRcdCQuZXh0ZW5kKCB0aGlzLCB7XHJcblxyXG5cdFx0XHQvLyBFeHBvc2UgaGVhZGVycyBhbmQgYWxsSGVhZGVycyBwcm9wZXJ0aWVzIG9uIHRoZSB3aWRnZXRcclxuXHRcdFx0Ly8gaGVhZGVycyByZWZlcmVuY2VzIHRoZSBUSHMgd2l0aGluIHRoZSBmaXJzdCBUUiBpbiB0aGUgdGFibGVcclxuXHRcdFx0aGVhZGVyczogdW5kZWZpbmVkLFxyXG5cclxuXHRcdFx0Ly8gYWxsSGVhZGVycyByZWZlcmVuY2VzIGhlYWRlcnMsIHBsdXMgYWxsIFRIcyBpbiB0aGUgdGhlYWQsIHdoaWNoIG1heVxyXG5cdFx0XHQvLyBpbmNsdWRlIHNldmVyYWwgcm93cywgb3Igbm90XHJcblx0XHRcdGFsbEhlYWRlcnM6IHVuZGVmaW5lZFxyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5fcmVmcmVzaCggdHJ1ZSApO1xyXG5cdH0sXHJcblxyXG5cdF9zZXRIZWFkZXJzOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciB0cnMgPSB0aGlzLmVsZW1lbnQuZmluZCggXCJ0aGVhZCB0clwiICk7XHJcblxyXG5cdFx0dGhpcy5oZWFkZXJzID0gdGhpcy5lbGVtZW50LmZpbmQoIFwidHI6ZXEoMClcIiApLmNoaWxkcmVuKCk7XHJcblx0XHR0aGlzLmFsbEhlYWRlcnMgPSB0aGlzLmhlYWRlcnMuYWRkKCB0cnMuY2hpbGRyZW4oKSApO1xyXG5cdH0sXHJcblxyXG5cdHJlZnJlc2g6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5fcmVmcmVzaCgpO1xyXG5cdH0sXHJcblxyXG5cdHJlYnVpbGQ6ICQubm9vcCxcclxuXHJcblx0X3JlZnJlc2g6IGZ1bmN0aW9uKCAvKiBjcmVhdGUgKi8gKSB7XHJcblx0XHR2YXIgdGFibGUgPSB0aGlzLmVsZW1lbnQsXHJcblx0XHRcdHRycyA9IHRhYmxlLmZpbmQoIFwidGhlYWQgdHJcIiApO1xyXG5cclxuXHRcdC8vIHVwZGF0aW5nIGhlYWRlcnMgb24gcmVmcmVzaCAoZml4ZXMgIzU4ODApXHJcblx0XHR0aGlzLl9zZXRIZWFkZXJzKCk7XHJcblxyXG5cdFx0Ly8gSXRlcmF0ZSBvdmVyIHRoZSB0cnNcclxuXHRcdHRycy5lYWNoKCBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIGNvbHVtbkNvdW50ID0gMDtcclxuXHJcblx0XHRcdC8vIEl0ZXJhdGUgb3ZlciB0aGUgY2hpbGRyZW4gb2YgdGhlIHRyXHJcblx0XHRcdCQoIHRoaXMgKS5jaGlsZHJlbigpLmVhY2goIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHZhciBzcGFuID0gcGFyc2VJbnQoIHRoaXMuZ2V0QXR0cmlidXRlKCBcImNvbHNwYW5cIiApLCAxMCApLFxyXG5cdFx0XHRcdFx0c2VsZWN0b3IgPSBcIjpudGgtY2hpbGQoXCIgKyAoIGNvbHVtbkNvdW50ICsgMSApICsgXCIpXCIsXHJcblx0XHRcdFx0XHRqO1xyXG5cclxuXHRcdFx0XHR0aGlzLnNldEF0dHJpYnV0ZSggXCJkYXRhLVwiICsgJC5tb2JpbGUubnMgKyBcImNvbHN0YXJ0XCIsIGNvbHVtbkNvdW50ICsgMSApO1xyXG5cclxuXHRcdFx0XHRpZiAoIHNwYW4gKSB7XHJcblx0XHRcdFx0XHRmb3IoIGogPSAwOyBqIDwgc3BhbiAtIDE7IGorKyApIHtcclxuXHRcdFx0XHRcdFx0Y29sdW1uQ291bnQrKztcclxuXHRcdFx0XHRcdFx0c2VsZWN0b3IgKz0gXCIsIDpudGgtY2hpbGQoXCIgKyAoIGNvbHVtbkNvdW50ICsgMSApICsgXCIpXCI7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHQvLyBTdG9yZSBcImNlbGxzXCIgZGF0YSBvbiBoZWFkZXIgYXMgYSByZWZlcmVuY2UgdG8gYWxsIGNlbGxzIGluIHRoZVxyXG5cdFx0XHRcdC8vIHNhbWUgY29sdW1uIGFzIHRoaXMgVEhcclxuXHRcdFx0XHQkKCB0aGlzICkuanFtRGF0YSggXCJjZWxsc1wiLCB0YWJsZS5maW5kKCBcInRyXCIgKS5ub3QoIHRycy5lcSggMCApICkubm90KCB0aGlzICkuY2hpbGRyZW4oIHNlbGVjdG9yICkgKTtcclxuXHJcblx0XHRcdFx0Y29sdW1uQ291bnQrKztcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHR9XHJcbn0pO1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxuJC53aWRnZXQoIFwibW9iaWxlLnRhYmxlXCIsICQubW9iaWxlLnRhYmxlLCB7XHJcblx0b3B0aW9uczoge1xyXG5cdFx0bW9kZTogXCJjb2x1bW50b2dnbGVcIixcclxuXHRcdGNvbHVtbkJ0blRoZW1lOiBudWxsLFxyXG5cdFx0Y29sdW1uUG9wdXBUaGVtZTogbnVsbCxcclxuXHRcdGNvbHVtbkJ0blRleHQ6IFwiQ29sdW1ucy4uLlwiLFxyXG5cdFx0Y2xhc3NlczogJC5leHRlbmQoICQubW9iaWxlLnRhYmxlLnByb3RvdHlwZS5vcHRpb25zLmNsYXNzZXMsIHtcclxuXHRcdFx0cG9wdXA6IFwidWktdGFibGUtY29sdW1udG9nZ2xlLXBvcHVwXCIsXHJcblx0XHRcdGNvbHVtbkJ0bjogXCJ1aS10YWJsZS1jb2x1bW50b2dnbGUtYnRuXCIsXHJcblx0XHRcdHByaW9yaXR5UHJlZml4OiBcInVpLXRhYmxlLXByaW9yaXR5LVwiLFxyXG5cdFx0XHRjb2x1bW5Ub2dnbGVUYWJsZTogXCJ1aS10YWJsZS1jb2x1bW50b2dnbGVcIlxyXG5cdFx0fSlcclxuXHR9LFxyXG5cclxuXHRfY3JlYXRlOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX3N1cGVyKCk7XHJcblxyXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMubW9kZSAhPT0gXCJjb2x1bW50b2dnbGVcIiApIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdCQuZXh0ZW5kKCB0aGlzLCB7XHJcblx0XHRcdF9tZW51OiBudWxsXHJcblx0XHR9KTtcclxuXHJcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5lbmhhbmNlZCApIHtcclxuXHRcdFx0dGhpcy5fbWVudSA9ICQoIHRoaXMuZG9jdW1lbnRbIDAgXS5nZXRFbGVtZW50QnlJZCggdGhpcy5faWQoKSArIFwiLXBvcHVwXCIgKSApLmNoaWxkcmVuKCkuZmlyc3QoKTtcclxuXHRcdFx0dGhpcy5fYWRkVG9nZ2xlcyggdGhpcy5fbWVudSwgdHJ1ZSApO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhpcy5fbWVudSA9IHRoaXMuX2VuaGFuY2VDb2xUb2dnbGUoKTtcclxuXHRcdFx0dGhpcy5lbGVtZW50LmFkZENsYXNzKCB0aGlzLm9wdGlvbnMuY2xhc3Nlcy5jb2x1bW5Ub2dnbGVUYWJsZSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX3NldHVwRXZlbnRzKCk7XHJcblxyXG5cdFx0dGhpcy5fc2V0VG9nZ2xlU3RhdGUoKTtcclxuXHR9LFxyXG5cclxuXHRfaWQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0cmV0dXJuICggdGhpcy5lbGVtZW50LmF0dHIoIFwiaWRcIiApIHx8ICggdGhpcy53aWRnZXROYW1lICsgdGhpcy51dWlkICkgKTtcclxuXHR9LFxyXG5cclxuXHRfc2V0dXBFdmVudHM6IGZ1bmN0aW9uKCkge1xyXG5cdFx0Ly9OT1RFOiBpbnB1dHMgYXJlIGJvdW5kIGluIGJpbmRUb2dnbGVzLFxyXG5cdFx0Ly8gc28gaXQgY2FuIGJlIGNhbGxlZCBvbiByZWZyZXNoLCB0b29cclxuXHJcblx0XHQvLyB1cGRhdGUgY29sdW1uIHRvZ2dsZXMgb24gcmVzaXplXHJcblx0XHR0aGlzLl9vbiggdGhpcy53aW5kb3csIHtcclxuXHRcdFx0dGhyb3R0bGVkcmVzaXplOiBcIl9zZXRUb2dnbGVTdGF0ZVwiXHJcblx0XHR9KTtcclxuXHRcdHRoaXMuX29uKCB0aGlzLl9tZW51LCB7XHJcblx0XHRcdFwiY2hhbmdlIGlucHV0XCI6IFwiX21lbnVJbnB1dENoYW5nZVwiXHJcblx0XHR9KTtcclxuXHR9LFxyXG5cclxuXHRfYWRkVG9nZ2xlczogZnVuY3Rpb24oIG1lbnUsIGtlZXAgKSB7XHJcblx0XHR2YXIgaW5wdXRzLFxyXG5cdFx0XHRjaGVja2JveEluZGV4ID0gMCxcclxuXHRcdFx0b3B0cyA9IHRoaXMub3B0aW9ucyxcclxuXHRcdFx0Y29udGFpbmVyID0gbWVudS5jb250cm9sZ3JvdXAoIFwiY29udGFpbmVyXCIgKTtcclxuXHJcblx0XHQvLyBhbGxvdyB1cGRhdGUgb2YgbWVudSBvbiByZWZyZXNoIChmaXhlcyAjNTg4MClcclxuXHRcdGlmICgga2VlcCApIHtcclxuXHRcdFx0aW5wdXRzID0gbWVudS5maW5kKCBcImlucHV0XCIgKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGNvbnRhaW5lci5lbXB0eSgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIGNyZWF0ZSB0aGUgaGlkZS9zaG93IHRvZ2dsZXNcclxuXHRcdHRoaXMuaGVhZGVycy5ub3QoIFwidGRcIiApLmVhY2goIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgaW5wdXQsIGNlbGxzLFxyXG5cdFx0XHRcdGhlYWRlciA9ICQoIHRoaXMgKSxcclxuXHRcdFx0XHRwcmlvcml0eSA9ICQubW9iaWxlLmdldEF0dHJpYnV0ZSggdGhpcywgXCJwcmlvcml0eVwiICk7XHJcblxyXG5cdFx0XHRpZiAoIHByaW9yaXR5ICkge1xyXG5cdFx0XHRcdGNlbGxzID0gaGVhZGVyLmFkZCggaGVhZGVyLmpxbURhdGEoIFwiY2VsbHNcIiApICk7XHJcblx0XHRcdFx0Y2VsbHMuYWRkQ2xhc3MoIG9wdHMuY2xhc3Nlcy5wcmlvcml0eVByZWZpeCArIHByaW9yaXR5ICk7XHJcblxyXG5cdFx0XHRcdC8vIE1ha2Ugc3VyZSB0aGUgKG5ldz8pIGNoZWNrYm94IGlzIGFzc29jaWF0ZWQgd2l0aCBpdHMgaGVhZGVyIHZpYSAuanFtRGF0YSgpIGFuZFxyXG5cdFx0XHRcdC8vIHRoYXQsIHZpY2UgdmVyc2EsIHRoZSBoZWFkZXIgaXMgYWxzbyBhc3NvY2lhdGVkIHdpdGggdGhlIGNoZWNrYm94XHJcblx0XHRcdFx0aW5wdXQgPSAoIGtlZXAgPyBpbnB1dHMuZXEoIGNoZWNrYm94SW5kZXgrKyApIDpcclxuXHRcdFx0XHRcdCQoXCI8bGFiZWw+PGlucHV0IHR5cGU9J2NoZWNrYm94JyBjaGVja2VkIC8+XCIgK1xyXG5cdFx0XHRcdFx0XHQoIGhlYWRlci5jaGlsZHJlbiggXCJhYmJyXCIgKS5maXJzdCgpLmF0dHIoIFwidGl0bGVcIiApIHx8XHJcblx0XHRcdFx0XHRcdFx0aGVhZGVyLnRleHQoKSApICtcclxuXHRcdFx0XHRcdFx0XCI8L2xhYmVsPlwiIClcclxuXHRcdFx0XHRcdFx0LmFwcGVuZFRvKCBjb250YWluZXIgKVxyXG5cdFx0XHRcdFx0XHQuY2hpbGRyZW4oIDAgKVxyXG5cdFx0XHRcdFx0XHQuY2hlY2tib3hyYWRpbygge1xyXG5cdFx0XHRcdFx0XHRcdHRoZW1lOiBvcHRzLmNvbHVtblBvcHVwVGhlbWVcclxuXHRcdFx0XHRcdFx0fSkgKVxyXG5cclxuXHRcdFx0XHRcdFx0Ly8gQXNzb2NpYXRlIHRoZSBoZWFkZXIgd2l0aCB0aGUgY2hlY2tib3hcclxuXHRcdFx0XHRcdFx0LmpxbURhdGEoIFwiaGVhZGVyXCIsIGhlYWRlciApXHJcblx0XHRcdFx0XHRcdC5qcW1EYXRhKCBcImNlbGxzXCIsIGNlbGxzICk7XHJcblxyXG5cdFx0XHRcdC8vIEFzc29jaWF0ZSB0aGUgY2hlY2tib3ggd2l0aCB0aGUgaGVhZGVyXHJcblx0XHRcdFx0aGVhZGVyLmpxbURhdGEoIFwiaW5wdXRcIiwgaW5wdXQgKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0Ly8gc2V0IGJpbmRpbmdzIGhlcmVcclxuXHRcdGlmICggIWtlZXAgKSB7XHJcblx0XHRcdG1lbnUuY29udHJvbGdyb3VwKCBcInJlZnJlc2hcIiApO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9tZW51SW5wdXRDaGFuZ2U6IGZ1bmN0aW9uKCBldnQgKSB7XHJcblx0XHR2YXIgaW5wdXQgPSAkKCBldnQudGFyZ2V0ICksXHJcblx0XHRcdGNoZWNrZWQgPSBpbnB1dFsgMCBdLmNoZWNrZWQ7XHJcblxyXG5cdFx0aW5wdXQuanFtRGF0YSggXCJjZWxsc1wiIClcclxuXHRcdFx0LnRvZ2dsZUNsYXNzKCBcInVpLXRhYmxlLWNlbGwtaGlkZGVuXCIsICFjaGVja2VkIClcclxuXHRcdFx0LnRvZ2dsZUNsYXNzKCBcInVpLXRhYmxlLWNlbGwtdmlzaWJsZVwiLCBjaGVja2VkICk7XHJcblx0fSxcclxuXHJcblx0X3VubG9ja0NlbGxzOiBmdW5jdGlvbiggY2VsbHMgKSB7XHJcblx0XHQvLyBhbGxvdyBoaWRlL3Nob3cgdmlhIENTUyBvbmx5ID0gcmVtb3ZlIGFsbCB0b2dnbGUtbG9ja3NcclxuXHRcdGNlbGxzLnJlbW92ZUNsYXNzKCBcInVpLXRhYmxlLWNlbGwtaGlkZGVuIHVpLXRhYmxlLWNlbGwtdmlzaWJsZVwiKTtcclxuXHR9LFxyXG5cclxuXHRfZW5oYW5jZUNvbFRvZ2dsZTogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgaWQgLCBtZW51QnV0dG9uLCBwb3B1cCwgbWVudSxcclxuXHRcdFx0dGFibGUgPSB0aGlzLmVsZW1lbnQsXHJcblx0XHRcdG9wdHMgPSB0aGlzLm9wdGlvbnMsXHJcblx0XHRcdG5zID0gJC5tb2JpbGUubnMsXHJcblx0XHRcdGZyYWdtZW50ID0gdGhpcy5kb2N1bWVudFsgMCBdLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcclxuXHJcblx0XHRpZCA9IHRoaXMuX2lkKCkgKyBcIi1wb3B1cFwiO1xyXG5cdFx0bWVudUJ1dHRvbiA9ICQoIFwiPGEgaHJlZj0nI1wiICsgaWQgKyBcIicgXCIgK1xyXG5cdFx0XHRcImNsYXNzPSdcIiArIG9wdHMuY2xhc3Nlcy5jb2x1bW5CdG4gKyBcIiB1aS1idG4gXCIgK1xyXG5cdFx0XHRcInVpLWJ0bi1cIiArICggb3B0cy5jb2x1bW5CdG5UaGVtZSB8fCBcImFcIiApICtcclxuXHRcdFx0XCIgdWktY29ybmVyLWFsbCB1aS1zaGFkb3cgdWktbWluaScgXCIgK1xyXG5cdFx0XHRcImRhdGEtXCIgKyBucyArIFwicmVsPSdwb3B1cCc+XCIgKyBvcHRzLmNvbHVtbkJ0blRleHQgKyBcIjwvYT5cIiApO1xyXG5cdFx0cG9wdXAgPSAkKCBcIjxkaXYgY2xhc3M9J1wiICsgb3B0cy5jbGFzc2VzLnBvcHVwICsgXCInIGlkPSdcIiArIGlkICsgXCInPjwvZGl2PlwiICk7XHJcblx0XHRtZW51ID0gJCggXCI8ZmllbGRzZXQ+PC9maWVsZHNldD5cIiApLmNvbnRyb2xncm91cCgpO1xyXG5cclxuXHRcdC8vIHNldCBleHRlbnNpb24gaGVyZSwgc2VuZCBcImZhbHNlXCIgdG8gdHJpZ2dlciBidWlsZC9yZWJ1aWxkXHJcblx0XHR0aGlzLl9hZGRUb2dnbGVzKCBtZW51LCBmYWxzZSApO1xyXG5cclxuXHRcdG1lbnUuYXBwZW5kVG8oIHBvcHVwICk7XHJcblxyXG5cdFx0ZnJhZ21lbnQuYXBwZW5kQ2hpbGQoIHBvcHVwWyAwIF0gKTtcclxuXHRcdGZyYWdtZW50LmFwcGVuZENoaWxkKCBtZW51QnV0dG9uWyAwIF0gKTtcclxuXHRcdHRhYmxlLmJlZm9yZSggZnJhZ21lbnQgKTtcclxuXHJcblx0XHRwb3B1cC5wb3B1cCgpO1xyXG5cclxuXHRcdHJldHVybiBtZW51O1xyXG5cdH0sXHJcblxyXG5cdHJlYnVpbGQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5fc3VwZXIoKTtcclxuXHJcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5tb2RlID09PSBcImNvbHVtbnRvZ2dsZVwiICkge1xyXG5cdFx0XHQvLyBOT1RFOiByZWJ1aWxkIHBhc3NlcyBcImZhbHNlXCIsIHdoaWxlIHJlZnJlc2ggcGFzc2VzIFwidW5kZWZpbmVkXCJcclxuXHRcdFx0Ly8gYm90aCByZWZyZXNoIHRoZSB0YWJsZSwgYnV0IGluc2lkZSBhZGRUb2dnbGVzLCAhZmFsc2Ugd2lsbCBiZSB0cnVlLFxyXG5cdFx0XHQvLyBzbyBhIHJlYnVpbGQgY2FsbCBjYW4gYmUgaW5kZW50aWZpZWRcclxuXHRcdFx0dGhpcy5fcmVmcmVzaCggZmFsc2UgKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfcmVmcmVzaDogZnVuY3Rpb24oIGNyZWF0ZSApIHtcclxuXHRcdHZhciBoZWFkZXJzLCBoaWRkZW5Db2x1bW5zLCBpbmRleDtcclxuXHJcblx0XHQvLyBDYWxsaW5nIF9zdXBlcigpIGhlcmUgdXBkYXRlcyB0aGlzLmhlYWRlcnNcclxuXHRcdHRoaXMuX3N1cGVyKCBjcmVhdGUgKTtcclxuXHJcblx0XHRpZiAoICFjcmVhdGUgJiYgdGhpcy5vcHRpb25zLm1vZGUgPT09IFwiY29sdW1udG9nZ2xlXCIgKSB7XHJcblx0XHRcdGhlYWRlcnMgPSB0aGlzLmhlYWRlcnM7XHJcblx0XHRcdGhpZGRlbkNvbHVtbnMgPSBbXTtcclxuXHJcblx0XHRcdC8vIEZpbmQgdGhlIGluZGV4IG9mIHRoZSBjb2x1bW4gaGVhZGVyIGFzc29jaWF0ZWQgd2l0aCBlYWNoIG9sZCBjaGVja2JveCBhbW9uZyB0aGVcclxuXHRcdFx0Ly8gcG9zdC1yZWZyZXNoIGhlYWRlcnMgYW5kLCBpZiB0aGUgaGVhZGVyIGlzIHN0aWxsIHRoZXJlLCBtYWtlIHN1cmUgdGhlIGNvcnJlc3BvbmRpbmdcclxuXHRcdFx0Ly8gY29sdW1uIHdpbGwgYmUgaGlkZGVuIGlmIHRoZSBwcmUtcmVmcmVzaCBjaGVja2JveCBpbmRpY2F0ZXMgdGhhdCB0aGUgY29sdW1uIGlzXHJcblx0XHRcdC8vIGhpZGRlbiBieSByZWNvcmRpbmcgaXRzIGluZGV4IGluIHRoZSBhcnJheSBvZiBoaWRkZW4gY29sdW1ucy5cclxuXHRcdFx0dGhpcy5fbWVudS5maW5kKCBcImlucHV0XCIgKS5lYWNoKCBmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR2YXIgaW5wdXQgPSAkKCB0aGlzICksXHJcblx0XHRcdFx0XHRoZWFkZXIgPSBpbnB1dC5qcW1EYXRhKCBcImhlYWRlclwiICksXHJcblx0XHRcdFx0XHRpbmRleCA9IGhlYWRlcnMuaW5kZXgoIGhlYWRlclsgMCBdICk7XHJcblxyXG5cdFx0XHRcdGlmICggaW5kZXggPiAtMSAmJiAhaW5wdXQucHJvcCggXCJjaGVja2VkXCIgKSApIHtcclxuXHJcblx0XHRcdFx0XHQvLyBUaGUgY29sdW1uIGhlYWRlciBhc3NvY2lhdGVkIHdpdGggL3RoaXMvIGNoZWNrYm94IGlzIHN0aWxsIHByZXNlbnQgaW4gdGhlXHJcblx0XHRcdFx0XHQvLyBwb3N0LXJlZnJlc2ggdGFibGUgYW5kIHRoZSBjaGVja2JveCBpcyBub3QgY2hlY2tlZCwgc28gdGhlIGNvbHVtbiBhc3NvY2lhdGVkXHJcblx0XHRcdFx0XHQvLyB3aXRoIHRoaXMgY29sdW1uIGhlYWRlciBpcyBjdXJyZW50bHkgaGlkZGVuLiBMZXQncyByZWNvcmQgdGhhdC5cclxuXHRcdFx0XHRcdGhpZGRlbkNvbHVtbnMucHVzaCggaW5kZXggKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0Ly8gY29sdW1ucyBub3QgYmVpbmcgcmVwbGFjZWQgbXVzdCBiZSBjbGVhcmVkIGZyb20gaW5wdXQgdG9nZ2xlLWxvY2tzXHJcblx0XHRcdHRoaXMuX3VubG9ja0NlbGxzKCB0aGlzLmVsZW1lbnQuZmluZCggXCIudWktdGFibGUtY2VsbC1oaWRkZW4sIFwiICtcclxuXHRcdFx0XHRcIi51aS10YWJsZS1jZWxsLXZpc2libGVcIiApICk7XHJcblxyXG5cdFx0XHQvLyB1cGRhdGUgY29sdW1udG9nZ2xlcyBhbmQgY2VsbHNcclxuXHRcdFx0dGhpcy5fYWRkVG9nZ2xlcyggdGhpcy5fbWVudSwgY3JlYXRlICk7XHJcblxyXG5cdFx0XHQvLyBBdCB0aGlzIHBvaW50IGFsbCBjb2x1bW5zIGFyZSB2aXNpYmxlLCBzbyB1bmNoZWNrIHRoZSBjaGVja2JveGVzIHRoYXQgY29ycmVzcG9uZCB0b1xyXG5cdFx0XHQvLyB0aG9zZSBjb2x1bW5zIHdlJ3ZlIGZvdW5kIHRvIGJlIGhpZGRlblxyXG5cdFx0XHRmb3IgKCBpbmRleCA9IGhpZGRlbkNvbHVtbnMubGVuZ3RoIC0gMSA7IGluZGV4ID4gLTEgOyBpbmRleC0tICkge1xyXG5cdFx0XHRcdGhlYWRlcnMuZXEoIGhpZGRlbkNvbHVtbnNbIGluZGV4IF0gKS5qcW1EYXRhKCBcImlucHV0XCIgKVxyXG5cdFx0XHRcdFx0LnByb3AoIFwiY2hlY2tlZFwiLCBmYWxzZSApXHJcblx0XHRcdFx0XHQuY2hlY2tib3hyYWRpbyggXCJyZWZyZXNoXCIgKVxyXG5cdFx0XHRcdFx0LnRyaWdnZXIoIFwiY2hhbmdlXCIgKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9zZXRUb2dnbGVTdGF0ZTogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9tZW51LmZpbmQoIFwiaW5wdXRcIiApLmVhY2goIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgY2hlY2tib3ggPSAkKCB0aGlzICk7XHJcblxyXG5cdFx0XHR0aGlzLmNoZWNrZWQgPSBjaGVja2JveC5qcW1EYXRhKCBcImNlbGxzXCIgKS5lcSggMCApLmNzcyggXCJkaXNwbGF5XCIgKSA9PT0gXCJ0YWJsZS1jZWxsXCI7XHJcblx0XHRcdGNoZWNrYm94LmNoZWNrYm94cmFkaW8oIFwicmVmcmVzaFwiICk7XHJcblx0XHR9KTtcclxuXHR9LFxyXG5cclxuXHRfZGVzdHJveTogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9zdXBlcigpO1xyXG5cdH1cclxufSk7XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcbiQud2lkZ2V0KCBcIm1vYmlsZS50YWJsZVwiLCAkLm1vYmlsZS50YWJsZSwge1xyXG5cdG9wdGlvbnM6IHtcclxuXHRcdG1vZGU6IFwicmVmbG93XCIsXHJcblx0XHRjbGFzc2VzOiAkLmV4dGVuZCggJC5tb2JpbGUudGFibGUucHJvdG90eXBlLm9wdGlvbnMuY2xhc3Nlcywge1xyXG5cdFx0XHRyZWZsb3dUYWJsZTogXCJ1aS10YWJsZS1yZWZsb3dcIixcclxuXHRcdFx0Y2VsbExhYmVsczogXCJ1aS10YWJsZS1jZWxsLWxhYmVsXCJcclxuXHRcdH0pXHJcblx0fSxcclxuXHJcblx0X2NyZWF0ZTogZnVuY3Rpb24oKSB7XHJcblx0XHR0aGlzLl9zdXBlcigpO1xyXG5cclxuXHRcdC8vIElmIGl0J3Mgbm90IHJlZmxvdyBtb2RlLCByZXR1cm4gaGVyZS5cclxuXHRcdGlmICggdGhpcy5vcHRpb25zLm1vZGUgIT09IFwicmVmbG93XCIgKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoICF0aGlzLm9wdGlvbnMuZW5oYW5jZWQgKSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudC5hZGRDbGFzcyggdGhpcy5vcHRpb25zLmNsYXNzZXMucmVmbG93VGFibGUgKTtcclxuXHJcblx0XHRcdHRoaXMuX3VwZGF0ZVJlZmxvdygpO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdHJlYnVpbGQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5fc3VwZXIoKTtcclxuXHJcblx0XHRpZiAoIHRoaXMub3B0aW9ucy5tb2RlID09PSBcInJlZmxvd1wiICkge1xyXG5cdFx0XHR0aGlzLl9yZWZyZXNoKCBmYWxzZSApO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9yZWZyZXNoOiBmdW5jdGlvbiggY3JlYXRlICkge1xyXG5cdFx0dGhpcy5fc3VwZXIoIGNyZWF0ZSApO1xyXG5cdFx0aWYgKCAhY3JlYXRlICYmIHRoaXMub3B0aW9ucy5tb2RlID09PSBcInJlZmxvd1wiICkge1xyXG5cdFx0XHR0aGlzLl91cGRhdGVSZWZsb3coICk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X3VwZGF0ZVJlZmxvdzogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgdGFibGUgPSB0aGlzLFxyXG5cdFx0XHRvcHRzID0gdGhpcy5vcHRpb25zO1xyXG5cclxuXHRcdC8vIGdldCBoZWFkZXJzIGluIHJldmVyc2Ugb3JkZXIgc28gdGhhdCB0b3AtbGV2ZWwgaGVhZGVycyBhcmUgYXBwZW5kZWQgbGFzdFxyXG5cdFx0JCggdGFibGUuYWxsSGVhZGVycy5nZXQoKS5yZXZlcnNlKCkgKS5lYWNoKCBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIGNlbGxzID0gJCggdGhpcyApLmpxbURhdGEoIFwiY2VsbHNcIiApLFxyXG5cdFx0XHRcdGNvbHN0YXJ0ID0gJC5tb2JpbGUuZ2V0QXR0cmlidXRlKCB0aGlzLCBcImNvbHN0YXJ0XCIgKSxcclxuXHRcdFx0XHRoaWVyYXJjaHlDbGFzcyA9IGNlbGxzLm5vdCggdGhpcyApLmZpbHRlciggXCJ0aGVhZCB0aFwiICkubGVuZ3RoICYmIFwiIHVpLXRhYmxlLWNlbGwtbGFiZWwtdG9wXCIsXHJcblx0XHRcdFx0Y29udGVudHMgPSAkKCB0aGlzICkuY2xvbmUoKS5jb250ZW50cygpLFxyXG5cdFx0XHRcdGl0ZXJhdGlvbiwgZmlsdGVyO1xyXG5cclxuXHRcdFx0XHRpZiAoIGNvbnRlbnRzLmxlbmd0aCA+IDAgICkge1xyXG5cclxuXHRcdFx0XHRcdGlmICggaGllcmFyY2h5Q2xhc3MgKSB7XHJcblx0XHRcdFx0XHRcdGl0ZXJhdGlvbiA9IHBhcnNlSW50KCB0aGlzLmdldEF0dHJpYnV0ZSggXCJjb2xzcGFuXCIgKSwgMTAgKTtcclxuXHRcdFx0XHRcdFx0ZmlsdGVyID0gXCJcIjtcclxuXHJcblx0XHRcdFx0XHRcdGlmICggaXRlcmF0aW9uICkge1xyXG5cdFx0XHRcdFx0XHRcdGZpbHRlciA9IFwidGQ6bnRoLWNoaWxkKFwiKyBpdGVyYXRpb24gK1wibiArIFwiICsgKCBjb2xzdGFydCApICtcIilcIjtcclxuXHRcdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdFx0dGFibGUuX2FkZExhYmVscyggY2VsbHMuZmlsdGVyKCBmaWx0ZXIgKSxcclxuXHRcdFx0XHRcdFx0XHRvcHRzLmNsYXNzZXMuY2VsbExhYmVscyArIGhpZXJhcmNoeUNsYXNzLCBjb250ZW50cyApO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0dGFibGUuX2FkZExhYmVscyggY2VsbHMsIG9wdHMuY2xhc3Nlcy5jZWxsTGFiZWxzLCBjb250ZW50cyApO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9LFxyXG5cclxuXHRfYWRkTGFiZWxzOiBmdW5jdGlvbiggY2VsbHMsIGxhYmVsLCBjb250ZW50cyApIHtcclxuXHRcdGlmICggY29udGVudHMubGVuZ3RoID09PSAxICYmIGNvbnRlbnRzWyAwIF0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gXCJhYmJyXCIgKSB7XHJcblx0XHRcdGNvbnRlbnRzID0gY29udGVudHMuZXEoIDAgKS5hdHRyKCBcInRpdGxlXCIgKTtcclxuXHRcdH1cclxuXHRcdC8vIC5ub3QgZml4ZXMgIzYwMDZcclxuXHRcdGNlbGxzXHJcblx0XHRcdC5ub3QoIFwiOmhhcyhiLlwiICsgbGFiZWwgKyBcIilcIiApXHJcblx0XHRcdFx0LnByZXBlbmQoICQoIFwiPGIgY2xhc3M9J1wiICsgbGFiZWwgKyBcIic+PC9iPlwiICkuYXBwZW5kKCBjb250ZW50cyApICk7XHJcblx0fVxyXG59KTtcclxuXHJcbn0pKCBqUXVlcnkgKTtcclxuXHJcbihmdW5jdGlvbiggJCwgdW5kZWZpbmVkICkge1xyXG5cclxuLy8gVE9ETyByZW5hbWUgZmlsdGVyQ2FsbGJhY2svZGVwcmVjYXRlIGFuZCBkZWZhdWx0IHRvIHRoZSBpdGVtIGl0c2VsZiBhcyB0aGUgZmlyc3QgYXJndW1lbnRcclxudmFyIGRlZmF1bHRGaWx0ZXJDYWxsYmFjayA9IGZ1bmN0aW9uKCBpbmRleCwgc2VhcmNoVmFsdWUgKSB7XHJcblx0cmV0dXJuICggKCBcIlwiICsgKCAkLm1vYmlsZS5nZXRBdHRyaWJ1dGUoIHRoaXMsIFwiZmlsdGVydGV4dFwiICkgfHwgJCggdGhpcyApLnRleHQoKSApIClcclxuXHRcdC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoIHNlYXJjaFZhbHVlICkgPT09IC0xICk7XHJcbn07XHJcblxyXG4kLndpZGdldCggXCJtb2JpbGUuZmlsdGVyYWJsZVwiLCB7XHJcblxyXG5cdGluaXRTZWxlY3RvcjogXCI6anFtRGF0YShmaWx0ZXI9J3RydWUnKVwiLFxyXG5cclxuXHRvcHRpb25zOiB7XHJcblx0XHRmaWx0ZXJSZXZlYWw6IGZhbHNlLFxyXG5cdFx0ZmlsdGVyQ2FsbGJhY2s6IGRlZmF1bHRGaWx0ZXJDYWxsYmFjayxcclxuXHRcdGVuaGFuY2VkOiBmYWxzZSxcclxuXHRcdGlucHV0OiBudWxsLFxyXG5cdFx0Y2hpbGRyZW46IFwiPiBsaSwgPiBvcHRpb24sID4gb3B0Z3JvdXAgb3B0aW9uLCA+IHRib2R5IHRyLCA+IC51aS1jb250cm9sZ3JvdXAtY29udHJvbHMgPiAudWktYnRuLCA+IC51aS1jb250cm9sZ3JvdXAtY29udHJvbHMgPiAudWktY2hlY2tib3gsID4gLnVpLWNvbnRyb2xncm91cC1jb250cm9scyA+IC51aS1yYWRpb1wiXHJcblx0fSxcclxuXHJcblx0X2NyZWF0ZTogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgb3B0cyA9IHRoaXMub3B0aW9ucztcclxuXHJcblx0XHQkLmV4dGVuZCggdGhpcywge1xyXG5cdFx0XHRfc2VhcmNoOiBudWxsLFxyXG5cdFx0XHRfdGltZXI6IDBcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMuX3NldElucHV0KCBvcHRzLmlucHV0ICk7XHJcblx0XHRpZiAoICFvcHRzLmVuaGFuY2VkICkge1xyXG5cdFx0XHR0aGlzLl9maWx0ZXJJdGVtcyggKCAoIHRoaXMuX3NlYXJjaCAmJiB0aGlzLl9zZWFyY2gudmFsKCkgKSB8fCBcIlwiICkudG9Mb3dlckNhc2UoKSApO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9vbktleVVwOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciB2YWwsIGxhc3R2YWwsXHJcblx0XHRcdHNlYXJjaCA9IHRoaXMuX3NlYXJjaDtcclxuXHJcblx0XHRpZiAoIHNlYXJjaCApIHtcclxuXHRcdFx0dmFsID0gc2VhcmNoLnZhbCgpLnRvTG93ZXJDYXNlKCksXHJcblx0XHRcdGxhc3R2YWwgPSAkLm1vYmlsZS5nZXRBdHRyaWJ1dGUoIHNlYXJjaFsgMCBdLCBcImxhc3R2YWxcIiApICsgXCJcIjtcclxuXHJcblx0XHRcdGlmICggbGFzdHZhbCAmJiBsYXN0dmFsID09PSB2YWwgKSB7XHJcblx0XHRcdFx0Ly8gRXhlY3V0ZSB0aGUgaGFuZGxlciBvbmx5IG9uY2UgcGVyIHZhbHVlIGNoYW5nZVxyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKCB0aGlzLl90aW1lciApIHtcclxuXHRcdFx0XHR3aW5kb3cuY2xlYXJUaW1lb3V0KCB0aGlzLl90aW1lciApO1xyXG5cdFx0XHRcdHRoaXMuX3RpbWVyID0gMDtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dGhpcy5fdGltZXIgPSB0aGlzLl9kZWxheSggZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0aWYgKCB0aGlzLl90cmlnZ2VyKCBcImJlZm9yZWZpbHRlclwiLCBudWxsLCB7IGlucHV0OiBzZWFyY2ggfSApID09PSBmYWxzZSApIHtcclxuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdC8vIENoYW5nZSB2YWwgYXMgbGFzdHZhbCBmb3IgbmV4dCBleGVjdXRpb25cclxuXHRcdFx0XHRzZWFyY2hbIDAgXS5zZXRBdHRyaWJ1dGUoIFwiZGF0YS1cIiArICQubW9iaWxlLm5zICsgXCJsYXN0dmFsXCIsIHZhbCApO1xyXG5cclxuXHRcdFx0XHR0aGlzLl9maWx0ZXJJdGVtcyggdmFsICk7XHJcblx0XHRcdFx0dGhpcy5fdGltZXIgPSAwO1xyXG5cdFx0XHR9LCAyNTAgKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfZ2V0RmlsdGVyYWJsZUl0ZW1zOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBlbGVtID0gdGhpcy5lbGVtZW50LFxyXG5cdFx0XHRjaGlsZHJlbiA9IHRoaXMub3B0aW9ucy5jaGlsZHJlbixcclxuXHRcdFx0aXRlbXMgPSAhY2hpbGRyZW4gPyB7IGxlbmd0aDogMCB9OlxyXG5cdFx0XHRcdCQuaXNGdW5jdGlvbiggY2hpbGRyZW4gKSA/IGNoaWxkcmVuKCk6XHJcblx0XHRcdFx0Y2hpbGRyZW4ubm9kZU5hbWUgPyAkKCBjaGlsZHJlbiApOlxyXG5cdFx0XHRcdGNoaWxkcmVuLmpxdWVyeSA/IGNoaWxkcmVuOlxyXG5cdFx0XHRcdHRoaXMuZWxlbWVudC5maW5kKCBjaGlsZHJlbiApO1xyXG5cclxuXHRcdGlmICggaXRlbXMubGVuZ3RoID09PSAwICkge1xyXG5cdFx0XHRpdGVtcyA9IGVsZW0uY2hpbGRyZW4oKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gaXRlbXM7XHJcblx0fSxcclxuXHJcblx0X2ZpbHRlckl0ZW1zOiBmdW5jdGlvbiggdmFsICkge1xyXG5cdFx0dmFyIGlkeCwgY2FsbGJhY2ssIGxlbmd0aCwgZHN0LFxyXG5cdFx0XHRzaG93ID0gW10sXHJcblx0XHRcdGhpZGUgPSBbXSxcclxuXHRcdFx0b3B0cyA9IHRoaXMub3B0aW9ucyxcclxuXHRcdFx0ZmlsdGVySXRlbXMgPSB0aGlzLl9nZXRGaWx0ZXJhYmxlSXRlbXMoKTtcclxuXHJcblx0XHRpZiAoIHZhbCAhPSBudWxsICkge1xyXG5cdFx0XHRjYWxsYmFjayA9IG9wdHMuZmlsdGVyQ2FsbGJhY2sgfHwgZGVmYXVsdEZpbHRlckNhbGxiYWNrO1xyXG5cdFx0XHRsZW5ndGggPSBmaWx0ZXJJdGVtcy5sZW5ndGg7XHJcblxyXG5cdFx0XHQvLyBQYXJ0aXRpb24gdGhlIGl0ZW1zIGludG8gdGhvc2UgdG8gYmUgaGlkZGVuIGFuZCB0aG9zZSB0byBiZSBzaG93blxyXG5cdFx0XHRmb3IgKCBpZHggPSAwIDsgaWR4IDwgbGVuZ3RoIDsgaWR4KysgKSB7XHJcblx0XHRcdFx0ZHN0ID0gKCBjYWxsYmFjay5jYWxsKCBmaWx0ZXJJdGVtc1sgaWR4IF0sIGlkeCwgdmFsICkgKSA/IGhpZGUgOiBzaG93O1xyXG5cdFx0XHRcdGRzdC5wdXNoKCBmaWx0ZXJJdGVtc1sgaWR4IF0gKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8vIElmIG5vdGhpbmcgaXMgaGlkZGVuLCB0aGVuIHRoZSBkZWNpc2lvbiB3aGV0aGVyIHRvIGhpZGUgb3Igc2hvdyB0aGUgaXRlbXNcclxuXHRcdC8vIGlzIGJhc2VkIG9uIHRoZSBcImZpbHRlclJldmVhbFwiIG9wdGlvbi5cclxuXHRcdGlmICggaGlkZS5sZW5ndGggPT09IDAgKSB7XHJcblx0XHRcdGZpbHRlckl0ZW1zWyAoIG9wdHMuZmlsdGVyUmV2ZWFsICYmIHZhbC5sZW5ndGggPT09IDAgKSA/XHJcblx0XHRcdFx0XCJhZGRDbGFzc1wiIDogXCJyZW1vdmVDbGFzc1wiIF0oIFwidWktc2NyZWVuLWhpZGRlblwiICk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHQkKCBoaWRlICkuYWRkQ2xhc3MoIFwidWktc2NyZWVuLWhpZGRlblwiICk7XHJcblx0XHRcdCQoIHNob3cgKS5yZW1vdmVDbGFzcyggXCJ1aS1zY3JlZW4taGlkZGVuXCIgKTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl9yZWZyZXNoQ2hpbGRXaWRnZXQoKTtcclxuXHJcblx0XHR0aGlzLl90cmlnZ2VyKCBcImZpbHRlclwiLCBudWxsLCB7XHJcblx0XHRcdGl0ZW1zOiBmaWx0ZXJJdGVtc1xyXG5cdFx0fSk7XHJcblx0fSxcclxuXHJcblx0Ly8gVGhlIERlZmF1bHQgaW1wbGVtZW50YXRpb24gb2YgX3JlZnJlc2hDaGlsZFdpZGdldCBhdHRlbXB0cyB0byBjYWxsXHJcblx0Ly8gcmVmcmVzaCBvbiBjb2xsYXBzaWJsZXNldCwgY29udHJvbGdyb3VwLCBzZWxlY3RtZW51LCBvciBsaXN0dmlld1xyXG5cdF9yZWZyZXNoQ2hpbGRXaWRnZXQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHdpZGdldCwgaWR4LFxyXG5cdFx0XHRyZWNvZ25pemVkV2lkZ2V0cyA9IFsgXCJjb2xsYXBzaWJsZXNldFwiLCBcInNlbGVjdG1lbnVcIiwgXCJjb250cm9sZ3JvdXBcIiwgXCJsaXN0dmlld1wiIF07XHJcblxyXG5cdFx0Zm9yICggaWR4ID0gcmVjb2duaXplZFdpZGdldHMubGVuZ3RoIC0gMSA7IGlkeCA+IC0xIDsgaWR4LS0gKSB7XHJcblx0XHRcdHdpZGdldCA9IHJlY29nbml6ZWRXaWRnZXRzWyBpZHggXTtcclxuXHRcdFx0aWYgKCAkLm1vYmlsZVsgd2lkZ2V0IF0gKSB7XHJcblx0XHRcdFx0d2lkZ2V0ID0gdGhpcy5lbGVtZW50LmRhdGEoIFwibW9iaWxlLVwiICsgd2lkZ2V0ICk7XHJcblx0XHRcdFx0aWYgKCB3aWRnZXQgJiYgJC5pc0Z1bmN0aW9uKCB3aWRnZXQucmVmcmVzaCApICkge1xyXG5cdFx0XHRcdFx0d2lkZ2V0LnJlZnJlc2goKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHQvLyBUT0RPOiBXaGVuIHRoZSBpbnB1dCBpcyBub3QgaW50ZXJuYWwsIGRvIG5vdCBldmVuIHN0b3JlIGl0IGluIHRoaXMuX3NlYXJjaFxyXG5cdF9zZXRJbnB1dDogZnVuY3Rpb24gKCBzZWxlY3RvciApIHtcclxuXHRcdHZhciBzZWFyY2ggPSB0aGlzLl9zZWFyY2g7XHJcblxyXG5cdFx0Ly8gU3RvcCBhIHBlbmRpbmcgZmlsdGVyIG9wZXJhdGlvblxyXG5cdFx0aWYgKCB0aGlzLl90aW1lciApIHtcclxuXHRcdFx0d2luZG93LmNsZWFyVGltZW91dCggdGhpcy5fdGltZXIgKTtcclxuXHRcdFx0dGhpcy5fdGltZXIgPSAwO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggc2VhcmNoICkge1xyXG5cdFx0XHR0aGlzLl9vZmYoIHNlYXJjaCwgXCJrZXl1cCBjaGFuZ2UgaW5wdXRcIiApO1xyXG5cdFx0XHRzZWFyY2ggPSBudWxsO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggc2VsZWN0b3IgKSB7XHJcblx0XHRcdHNlYXJjaCA9IHNlbGVjdG9yLmpxdWVyeSA/IHNlbGVjdG9yOlxyXG5cdFx0XHRcdHNlbGVjdG9yLm5vZGVOYW1lID8gJCggc2VsZWN0b3IgKTpcclxuXHRcdFx0XHR0aGlzLmRvY3VtZW50LmZpbmQoIHNlbGVjdG9yICk7XHJcblxyXG5cdFx0XHR0aGlzLl9vbiggc2VhcmNoLCB7XHJcblx0XHRcdFx0a2V5ZG93bjogXCJfb25LZXlEb3duXCIsXHJcblx0XHRcdFx0a2V5cHJlc3M6IFwiX29uS2V5UHJlc3NcIixcclxuXHRcdFx0XHRrZXl1cDogXCJfb25LZXlVcFwiLFxyXG5cdFx0XHRcdGNoYW5nZTogXCJfb25LZXlVcFwiLFxyXG5cdFx0XHRcdGlucHV0OiBcIl9vbktleVVwXCJcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5fc2VhcmNoID0gc2VhcmNoO1xyXG5cdH0sXHJcblxyXG5cdC8vIFByZXZlbnQgZm9ybSBzdWJtaXNzaW9uXHJcblx0X29uS2V5RG93bjogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0aWYgKCBldmVudC5rZXlDb2RlID09PSAkLnVpLmtleUNvZGUuRU5URVIgKSB7XHJcblx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdHRoaXMuX3ByZXZlbnRLZXlQcmVzcyA9IHRydWU7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X29uS2V5UHJlc3M6IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdGlmICggdGhpcy5fcHJldmVudEtleVByZXNzICkge1xyXG5cdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHR0aGlzLl9wcmV2ZW50S2V5UHJlc3MgPSBmYWxzZTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfc2V0T3B0aW9uczogZnVuY3Rpb24oIG9wdGlvbnMgKSB7XHJcblx0XHR2YXIgcmVmaWx0ZXIgPSAhKCAoIG9wdGlvbnMuZmlsdGVyUmV2ZWFsID09PSB1bmRlZmluZWQgKSAmJlxyXG5cdFx0XHRcdCggb3B0aW9ucy5maWx0ZXJDYWxsYmFjayA9PT0gdW5kZWZpbmVkICkgJiZcclxuXHRcdFx0XHQoIG9wdGlvbnMuY2hpbGRyZW4gPT09IHVuZGVmaW5lZCApICk7XHJcblxyXG5cdFx0dGhpcy5fc3VwZXIoIG9wdGlvbnMgKTtcclxuXHJcblx0XHRpZiAoIG9wdGlvbnMuaW5wdXQgIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0dGhpcy5fc2V0SW5wdXQoIG9wdGlvbnMuaW5wdXQgKTtcclxuXHRcdFx0cmVmaWx0ZXIgPSB0cnVlO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggcmVmaWx0ZXIgKSB7XHJcblx0XHRcdHRoaXMucmVmcmVzaCgpO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9kZXN0cm95OiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBvcHRzID0gdGhpcy5vcHRpb25zLFxyXG5cdFx0XHRpdGVtcyA9IHRoaXMuX2dldEZpbHRlcmFibGVJdGVtcygpO1xyXG5cclxuXHRcdGlmICggb3B0cy5lbmhhbmNlZCApIHtcclxuXHRcdFx0aXRlbXMudG9nZ2xlQ2xhc3MoIFwidWktc2NyZWVuLWhpZGRlblwiLCBvcHRzLmZpbHRlclJldmVhbCApO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0aXRlbXMucmVtb3ZlQ2xhc3MoIFwidWktc2NyZWVuLWhpZGRlblwiICk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0cmVmcmVzaDogZnVuY3Rpb24oKSB7XHJcblx0XHRpZiAoIHRoaXMuX3RpbWVyICkge1xyXG5cdFx0XHR3aW5kb3cuY2xlYXJUaW1lb3V0KCB0aGlzLl90aW1lciApO1xyXG5cdFx0XHR0aGlzLl90aW1lciA9IDA7XHJcblx0XHR9XHJcblx0XHR0aGlzLl9maWx0ZXJJdGVtcyggKCAoIHRoaXMuX3NlYXJjaCAmJiB0aGlzLl9zZWFyY2gudmFsKCkgKSB8fCBcIlwiICkudG9Mb3dlckNhc2UoKSApO1xyXG5cdH1cclxufSk7XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHVuZGVmaW5lZCApIHtcclxuXHJcbi8vIENyZWF0ZSBhIGZ1bmN0aW9uIHRoYXQgd2lsbCByZXBsYWNlIHRoZSBfc2V0T3B0aW9ucyBmdW5jdGlvbiBvZiBhIHdpZGdldCxcclxuLy8gYW5kIHdpbGwgcGFzcyB0aGUgb3B0aW9ucyBvbiB0byB0aGUgaW5wdXQgb2YgdGhlIGZpbHRlcmFibGUuXHJcbnZhciByZXBsYWNlU2V0T3B0aW9ucyA9IGZ1bmN0aW9uKCBzZWxmLCBvcmlnICkge1xyXG5cdFx0cmV0dXJuIGZ1bmN0aW9uKCBvcHRpb25zICkge1xyXG5cdFx0XHRvcmlnLmNhbGwoIHRoaXMsIG9wdGlvbnMgKTtcclxuXHRcdFx0c2VsZi5fc3luY1RleHRJbnB1dE9wdGlvbnMoIG9wdGlvbnMgKTtcclxuXHRcdH07XHJcblx0fSxcclxuXHRyRGl2aWRlckxpc3RJdGVtID0gLyhefFxccyl1aS1saS1kaXZpZGVyKFxcc3wkKS8sXHJcblx0b3JpZ0RlZmF1bHRGaWx0ZXJDYWxsYmFjayA9ICQubW9iaWxlLmZpbHRlcmFibGUucHJvdG90eXBlLm9wdGlvbnMuZmlsdGVyQ2FsbGJhY2s7XHJcblxyXG4vLyBPdmVycmlkZSB0aGUgZGVmYXVsdCBmaWx0ZXIgY2FsbGJhY2sgd2l0aCBvbmUgdGhhdCBkb2VzIG5vdCBoaWRlIGxpc3QgZGl2aWRlcnNcclxuJC5tb2JpbGUuZmlsdGVyYWJsZS5wcm90b3R5cGUub3B0aW9ucy5maWx0ZXJDYWxsYmFjayA9IGZ1bmN0aW9uKCBpbmRleCwgc2VhcmNoVmFsdWUgKSB7XHJcblx0cmV0dXJuICF0aGlzLmNsYXNzTmFtZS5tYXRjaCggckRpdmlkZXJMaXN0SXRlbSApICYmXHJcblx0XHRvcmlnRGVmYXVsdEZpbHRlckNhbGxiYWNrLmNhbGwoIHRoaXMsIGluZGV4LCBzZWFyY2hWYWx1ZSApO1xyXG59O1xyXG5cclxuJC53aWRnZXQoIFwibW9iaWxlLmZpbHRlcmFibGVcIiwgJC5tb2JpbGUuZmlsdGVyYWJsZSwge1xyXG5cdG9wdGlvbnM6IHtcclxuXHRcdGZpbHRlclBsYWNlaG9sZGVyOiBcIkZpbHRlciBpdGVtcy4uLlwiLFxyXG5cdFx0ZmlsdGVyVGhlbWU6IG51bGxcclxuXHR9LFxyXG5cclxuXHRfY3JlYXRlOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBpZHgsIHdpZGdldE5hbWUsXHJcblx0XHRcdGVsZW0gPSB0aGlzLmVsZW1lbnQsXHJcblx0XHRcdHJlY29nbml6ZWRXaWRnZXRzID0gWyBcImNvbGxhcHNpYmxlc2V0XCIsIFwic2VsZWN0bWVudVwiLCBcImNvbnRyb2xncm91cFwiLCBcImxpc3R2aWV3XCIgXSxcclxuXHRcdFx0Y3JlYXRlSGFuZGxlcnMgPSB7fTtcclxuXHJcblx0XHR0aGlzLl9zdXBlcigpO1xyXG5cclxuXHRcdCQuZXh0ZW5kKCB0aGlzLCB7XHJcblx0XHRcdF93aWRnZXQ6IG51bGxcclxuXHRcdH0pO1xyXG5cclxuXHRcdGZvciAoIGlkeCA9IHJlY29nbml6ZWRXaWRnZXRzLmxlbmd0aCAtIDEgOyBpZHggPiAtMSA7IGlkeC0tICkge1xyXG5cdFx0XHR3aWRnZXROYW1lID0gcmVjb2duaXplZFdpZGdldHNbIGlkeCBdO1xyXG5cdFx0XHRpZiAoICQubW9iaWxlWyB3aWRnZXROYW1lIF0gKSB7XHJcblx0XHRcdFx0aWYgKCB0aGlzLl9zZXRXaWRnZXQoIGVsZW0uZGF0YSggXCJtb2JpbGUtXCIgKyB3aWRnZXROYW1lICkgKSApIHtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRjcmVhdGVIYW5kbGVyc1sgd2lkZ2V0TmFtZSArIFwiY3JlYXRlXCIgXSA9IFwiX2hhbmRsZUNyZWF0ZVwiO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggIXRoaXMuX3dpZGdldCApIHtcclxuXHRcdFx0dGhpcy5fb24oIGVsZW0sIGNyZWF0ZUhhbmRsZXJzICk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X2hhbmRsZUNyZWF0ZTogZnVuY3Rpb24oIGV2dCApIHtcclxuXHRcdHRoaXMuX3NldFdpZGdldCggdGhpcy5lbGVtZW50LmRhdGEoIFwibW9iaWxlLVwiICsgZXZ0LnR5cGUuc3Vic3RyaW5nKCAwLCBldnQudHlwZS5sZW5ndGggLSA2ICkgKSApO1xyXG5cdH0sXHJcblxyXG5cdF90cmlnZ2VyOiBmdW5jdGlvbiggdHlwZSwgZXZlbnQsIGRhdGEgKSB7XHJcblx0XHRpZiAoIHRoaXMuX3dpZGdldCAmJiB0aGlzLl93aWRnZXQud2lkZ2V0RnVsbE5hbWUgPT09IFwibW9iaWxlLWxpc3R2aWV3XCIgJiZcclxuXHRcdFx0dHlwZSA9PT0gXCJiZWZvcmVmaWx0ZXJcIiApIHtcclxuXHJcblx0XHRcdC8vIEFsc28gdHJpZ2dlciBsaXN0dmlld2JlZm9yZWZpbHRlciBpZiB0aGlzIHdpZGdldCBpcyBhbHNvIGEgbGlzdHZpZXdcclxuXHRcdFx0dGhpcy5fd2lkZ2V0Ll90cmlnZ2VyKCBcImJlZm9yZWZpbHRlclwiLCBldmVudCwgZGF0YSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFBhc3NpbmcgYmFjayB0aGUgcmVzcG9uc2UgZW5hYmxlcyBjYWxsaW5nIHByZXZlbnREZWZhdWx0KClcclxuXHRcdHJldHVybiB0aGlzLl9zdXBlciggdHlwZSwgZXZlbnQsIGRhdGEgKTtcclxuXHR9LFxyXG5cclxuXHRfc2V0V2lkZ2V0OiBmdW5jdGlvbiggd2lkZ2V0ICkge1xyXG5cdFx0aWYgKCAhdGhpcy5fd2lkZ2V0ICYmIHdpZGdldCApIHtcclxuXHRcdFx0dGhpcy5fd2lkZ2V0ID0gd2lkZ2V0O1xyXG5cdFx0XHR0aGlzLl93aWRnZXQuX3NldE9wdGlvbnMgPSByZXBsYWNlU2V0T3B0aW9ucyggdGhpcywgdGhpcy5fd2lkZ2V0Ll9zZXRPcHRpb25zICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCAhIXRoaXMuX3dpZGdldCApIHtcclxuXHRcdFx0dGhpcy5fc3luY1RleHRJbnB1dE9wdGlvbnMoIHRoaXMuX3dpZGdldC5vcHRpb25zICk7XHJcblx0XHRcdGlmICggdGhpcy5fd2lkZ2V0LndpZGdldE5hbWUgPT09IFwibGlzdHZpZXdcIiApIHtcclxuXHRcdFx0XHR0aGlzLl93aWRnZXQub3B0aW9ucy5oaWRlRGl2aWRlcnMgPSB0cnVlO1xyXG5cdFx0XHRcdHRoaXMuX3dpZGdldC5lbGVtZW50Lmxpc3R2aWV3KCBcInJlZnJlc2hcIiApO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuICEhdGhpcy5fd2lkZ2V0O1xyXG5cdH0sXHJcblxyXG5cdF9pc1NlYXJjaEludGVybmFsOiBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiAoIHRoaXMuX3NlYXJjaCAmJiB0aGlzLl9zZWFyY2guanFtRGF0YSggXCJ1aS1maWx0ZXJhYmxlLVwiICsgdGhpcy51dWlkICsgXCItaW50ZXJuYWxcIiApICk7XHJcblx0fSxcclxuXHJcblx0X3NldElucHV0OiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7XHJcblx0XHR2YXIgb3B0cyA9IHRoaXMub3B0aW9ucyxcclxuXHRcdFx0dXBkYXRlUGxhY2Vob2xkZXIgPSB0cnVlLFxyXG5cdFx0XHR0ZXh0aW5wdXRPcHRzID0ge307XHJcblxyXG5cdFx0aWYgKCAhc2VsZWN0b3IgKSB7XHJcblx0XHRcdGlmICggdGhpcy5faXNTZWFyY2hJbnRlcm5hbCgpICkge1xyXG5cclxuXHRcdFx0XHQvLyBJZ25vcmUgdGhlIGNhbGwgdG8gc2V0IGEgbmV3IGlucHV0IGlmIHRoZSBzZWxlY3RvciBnb2VzIHRvIGZhbHN5IGFuZFxyXG5cdFx0XHRcdC8vIHRoZSBjdXJyZW50IHRleHRpbnB1dCBpcyBhbHJlYWR5IG9mIHRoZSBpbnRlcm5hbGx5IGdlbmVyYXRlZCB2YXJpZXR5LlxyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHJcblx0XHRcdFx0Ly8gR2VuZXJhdGluZyBhIG5ldyB0ZXh0aW5wdXQgd2lkZ2V0LiBObyBuZWVkIHRvIHNldCB0aGUgcGxhY2Vob2xkZXJcclxuXHRcdFx0XHQvLyBmdXJ0aGVyIGRvd24gdGhlIGZ1bmN0aW9uLlxyXG5cdFx0XHRcdHVwZGF0ZVBsYWNlaG9sZGVyID0gZmFsc2U7XHJcblx0XHRcdFx0c2VsZWN0b3IgPSAkKCBcIjxpbnB1dCBcIiArXHJcblx0XHRcdFx0XHRcImRhdGEtXCIgKyAkLm1vYmlsZS5ucyArIFwidHlwZT0nc2VhcmNoJyBcIiArXHJcblx0XHRcdFx0XHRcInBsYWNlaG9sZGVyPSdcIiArIG9wdHMuZmlsdGVyUGxhY2Vob2xkZXIgKyBcIic+PC9pbnB1dD5cIiApXHJcblx0XHRcdFx0XHQuanFtRGF0YSggXCJ1aS1maWx0ZXJhYmxlLVwiICsgdGhpcy51dWlkICsgXCItaW50ZXJuYWxcIiwgdHJ1ZSApO1xyXG5cdFx0XHRcdCQoIFwiPGZvcm0gY2xhc3M9J3VpLWZpbHRlcmFibGUnPjwvZm9ybT5cIiApXHJcblx0XHRcdFx0XHQuYXBwZW5kKCBzZWxlY3RvciApXHJcblx0XHRcdFx0XHQuc3VibWl0KCBmdW5jdGlvbiggZXZ0ICkge1xyXG5cdFx0XHRcdFx0XHRldnQucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHRcdFx0c2VsZWN0b3IuYmx1cigpO1xyXG5cdFx0XHRcdFx0fSlcclxuXHRcdFx0XHRcdC5pbnNlcnRCZWZvcmUoIHRoaXMuZWxlbWVudCApO1xyXG5cdFx0XHRcdGlmICggJC5tb2JpbGUudGV4dGlucHV0ICkge1xyXG5cdFx0XHRcdFx0aWYgKCB0aGlzLm9wdGlvbnMuZmlsdGVyVGhlbWUgIT0gbnVsbCApIHtcclxuXHRcdFx0XHRcdFx0dGV4dGlucHV0T3B0c1sgXCJ0aGVtZVwiIF0gPSBvcHRzLmZpbHRlclRoZW1lO1xyXG5cdFx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHRcdHNlbGVjdG9yLnRleHRpbnB1dCggdGV4dGlucHV0T3B0cyApO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuX3N1cGVyKCBzZWxlY3RvciApO1xyXG5cclxuXHRcdGlmICggdGhpcy5faXNTZWFyY2hJbnRlcm5hbCgpICYmIHVwZGF0ZVBsYWNlaG9sZGVyICkge1xyXG5cdFx0XHR0aGlzLl9zZWFyY2guYXR0ciggXCJwbGFjZWhvbGRlclwiLCB0aGlzLm9wdGlvbnMuZmlsdGVyUGxhY2Vob2xkZXIgKTtcclxuXHRcdH1cclxuXHR9LFxyXG5cclxuXHRfc2V0T3B0aW9uczogZnVuY3Rpb24oIG9wdGlvbnMgKSB7XHJcblx0XHR2YXIgcmV0ID0gdGhpcy5fc3VwZXIoIG9wdGlvbnMgKTtcclxuXHJcblx0XHQvLyBOZWVkIHRvIHNldCB0aGUgZmlsdGVyUGxhY2Vob2xkZXIgYWZ0ZXIgaGF2aW5nIGVzdGFibGlzaGVkIHRoZSBzZWFyY2ggaW5wdXRcclxuXHRcdGlmICggb3B0aW9ucy5maWx0ZXJQbGFjZWhvbGRlciAhPT0gdW5kZWZpbmVkICkge1xyXG5cdFx0XHRpZiAoIHRoaXMuX2lzU2VhcmNoSW50ZXJuYWwoKSApIHtcclxuXHRcdFx0XHR0aGlzLl9zZWFyY2guYXR0ciggXCJwbGFjZWhvbGRlclwiLCBvcHRpb25zLmZpbHRlclBsYWNlaG9sZGVyICk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIG9wdGlvbnMuZmlsdGVyVGhlbWUgIT09IHVuZGVmaW5lZCAmJiB0aGlzLl9zZWFyY2ggJiYgJC5tb2JpbGUudGV4dGlucHV0ICkge1xyXG5cdFx0XHR0aGlzLl9zZWFyY2gudGV4dGlucHV0KCBcIm9wdGlvblwiLCBcInRoZW1lXCIsIG9wdGlvbnMuZmlsdGVyVGhlbWUgKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gcmV0O1xyXG5cdH0sXHJcblxyXG5cdC8vIFRoZSBsaXN0dmlldyBpbXBsZW1lbnRhdGlvbiBhY2NvbXBhbnlpbmcgdGhpcyBmaWx0ZXJhYmxlIGJhY2tjb21wYXQgbGF5ZXIgd2lsbCBjYWxsXHJcblx0Ly8gZmlsdGVyYWJsZS5yZWZyZXNoKCkgYWZ0ZXIgaXQncyBkb25lIHJlZnJlc2hpbmcgdGhlIGxpc3R2aWV3IHRvIG1ha2Ugc3VyZSB0aGUgZmlsdGVyYWJsZVxyXG5cdC8vIGZpbHRlcnMgb3V0IGFueSBuZXcgaXRlbXMgYWRkZWQuIEhvd2V2ZXIsIHdoZW4gdGhlIGxpc3R2aWV3IHJlZnJlc2ggaGFzIGJlZW4gaW5pdGlhdGVkIGJ5XHJcblx0Ly8gdGhlIGZpbHRlcmFibGUgaXRzZWxmLCB0aGVuIHN1Y2ggZmlsdGVyaW5nIGhhcyBhbHJlYWR5IHRha2VuIHBsYWNlLCBhbmQgY2FsbGluZyB0aGVcclxuXHQvLyBmaWx0ZXJhYmxlJ3MgcmVmcmVzaCgpIG1ldGhvZCB3aWxsIGNhdXNlIGFuIGluZmluaXRlIHJlY3Vyc2lvbi4gV2Ugc3RvcCB0aGlzIGJ5IHNldHRpbmcgYVxyXG5cdC8vIGZsYWcgdGhhdCB3aWxsIGNhdXNlIHRoZSBmaWx0ZXJhYmxlJ3MgcmVmcmVzaCgpIG1ldGhvZCB0byBzaG9ydC1jaXJjdWl0LlxyXG5cdF9yZWZyZXNoQ2hpbGRXaWRnZXQ6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dGhpcy5fcmVmcmVzaGluZ0NoaWxkV2lkZ2V0ID0gdHJ1ZTtcclxuXHRcdHRoaXMuX3N1cGVyQXBwbHkoIGFyZ3VtZW50cyApO1xyXG5cdFx0dGhpcy5fcmVmcmVzaGluZ0NoaWxkV2lkZ2V0ID0gZmFsc2U7XHJcblx0fSxcclxuXHJcblx0cmVmcmVzaDogZnVuY3Rpb24oKSB7XHJcblx0XHRpZiAoICF0aGlzLl9yZWZyZXNoaW5nQ2hpbGRXaWRnZXQgKSB7XHJcblx0XHRcdHRoaXMuX3N1cGVyQXBwbHkoIGFyZ3VtZW50cyApO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9kZXN0cm95OiBmdW5jdGlvbigpIHtcclxuXHRcdGlmICggdGhpcy5faXNTZWFyY2hJbnRlcm5hbCgpICkge1xyXG5cdFx0XHR0aGlzLl9zZWFyY2gucmVtb3ZlKCk7XHJcblx0XHR9XHJcblx0XHR0aGlzLl9zdXBlcigpO1xyXG5cdH0sXHJcblxyXG5cdF9zeW5jVGV4dElucHV0T3B0aW9uczogZnVuY3Rpb24oIG9wdGlvbnMgKSB7XHJcblx0XHR2YXIgaWR4LFxyXG5cdFx0XHR0ZXh0aW5wdXRPcHRpb25zID0ge307XHJcblxyXG5cdFx0Ly8gV2Ugb25seSBzeW5jIG9wdGlvbnMgaWYgdGhlIGZpbHRlcmFibGUncyB0ZXh0aW5wdXQgaXMgb2YgdGhlIGludGVybmFsbHlcclxuXHRcdC8vIGdlbmVyYXRlZCB2YXJpZXR5LCByYXRoZXIgdGhhbiBvbmUgc3BlY2lmaWVkIGJ5IHRoZSB1c2VyLlxyXG5cdFx0aWYgKCB0aGlzLl9pc1NlYXJjaEludGVybmFsKCkgJiYgJC5tb2JpbGUudGV4dGlucHV0ICkge1xyXG5cclxuXHRcdFx0Ly8gQXBwbHkgb25seSB0aGUgb3B0aW9ucyB1bmRlcnN0b29kIGJ5IHRleHRpbnB1dFxyXG5cdFx0XHRmb3IgKCBpZHggaW4gJC5tb2JpbGUudGV4dGlucHV0LnByb3RvdHlwZS5vcHRpb25zICkge1xyXG5cdFx0XHRcdGlmICggb3B0aW9uc1sgaWR4IF0gIT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0XHRcdGlmICggaWR4ID09PSBcInRoZW1lXCIgJiYgdGhpcy5vcHRpb25zLmZpbHRlclRoZW1lICE9IG51bGwgKSB7XHJcblx0XHRcdFx0XHRcdHRleHRpbnB1dE9wdGlvbnNbIGlkeCBdID0gdGhpcy5vcHRpb25zLmZpbHRlclRoZW1lO1xyXG5cdFx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdFx0dGV4dGlucHV0T3B0aW9uc1sgaWR4IF0gPSBvcHRpb25zWyBpZHggXTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0dGhpcy5fc2VhcmNoLnRleHRpbnB1dCggXCJvcHRpb25cIiwgdGV4dGlucHV0T3B0aW9ucyApO1xyXG5cdFx0fVxyXG5cdH1cclxufSk7XHJcblxyXG4vLyBJbnN0YW50aWF0ZSBhIGZpbHRlcmFibGUgb24gYSBsaXN0dmlldyB0aGF0IGhhcyB0aGUgZGF0YS1maWx0ZXI9XCJ0cnVlXCIgYXR0cmlidXRlXHJcbi8vIFRoaXMgaXMgbm90IG5lY2Vzc2FyeSBmb3Igc3RhdGljIGNvbnRlbnQsIGJlY2F1c2UgdGhlIGF1dG8tZW5oYW5jZSB0YWtlcyBjYXJlIG9mIGluc3RhbnRpYXRpbmdcclxuLy8gdGhlIGZpbHRlcmFibGUgdXBvbiBlbmNvdW50ZXJpbmcgZGF0YS1maWx0ZXI9XCJ0cnVlXCIuIEhvd2V2ZXIsIGJlY2F1c2Ugb2YgMS4zLnggaXQgaXMgZXhwZWN0ZWRcclxuLy8gdGhhdCBhIGxpc3R2aWV3IHdpdGggZGF0YS1maWx0ZXI9XCJ0cnVlXCIgd2lsbCBiZSBmaWx0ZXJhYmxlIGV2ZW4gaWYgeW91IGp1c3QgaW5zdGFudGlhdGUgYVxyXG4vLyBsaXN0dmlldyBvbiBpdC4gVGhlIGV4dGVuc2lvbiBiZWxvdyBlbnN1cmVzIHRoYXQgdGhpcyBjb250aW51ZXMgdG8gaGFwcGVuIGluIDEuNC54LlxyXG4kLndpZGdldCggXCJtb2JpbGUubGlzdHZpZXdcIiwgJC5tb2JpbGUubGlzdHZpZXcsIHtcclxuXHRvcHRpb25zOiB7XHJcblx0XHRmaWx0ZXI6IGZhbHNlXHJcblx0fSxcclxuXHRfY3JlYXRlOiBmdW5jdGlvbigpIHtcclxuXHRcdGlmICggdGhpcy5vcHRpb25zLmZpbHRlciA9PT0gdHJ1ZSAmJlxyXG5cdFx0XHRcdCF0aGlzLmVsZW1lbnQuZGF0YSggXCJtb2JpbGUtZmlsdGVyYWJsZVwiICkgKSB7XHJcblx0XHRcdHRoaXMuZWxlbWVudC5maWx0ZXJhYmxlKCk7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gdGhpcy5fc3VwZXIoKTtcclxuXHR9LFxyXG5cclxuXHRyZWZyZXNoOiBmdW5jdGlvbigpIHtcclxuXHRcdHZhciBmaWx0ZXJhYmxlO1xyXG5cclxuXHRcdHRoaXMuX3N1cGVyQXBwbHkoIGFyZ3VtZW50cyApO1xyXG5cclxuXHRcdGlmICggdGhpcy5vcHRpb25zLmZpbHRlciA9PT0gdHJ1ZSApIHtcclxuXHRcdFx0ZmlsdGVyYWJsZSA9IHRoaXMuZWxlbWVudC5kYXRhKCBcIm1vYmlsZS1maWx0ZXJhYmxlXCIgKTtcclxuXHJcblx0XHRcdGlmICggZmlsdGVyYWJsZSApIHtcclxuXHRcdFx0XHRmaWx0ZXJhYmxlLnJlZnJlc2goKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxufSk7XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4vKiFcclxuICogalF1ZXJ5IFVJIFRhYnMgZmFkZjJiMzEyYTA1MDQwNDM2NDUxYzY0YmJmYWY0ODE0YmM2MmM1NlxyXG4gKiBodHRwOi8vanF1ZXJ5dWkuY29tXHJcbiAqXHJcbiAqIENvcHlyaWdodCAyMDEzIGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnNcclxuICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxyXG4gKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlXHJcbiAqXHJcbiAqIGh0dHA6Ly9hcGkuanF1ZXJ5dWkuY29tL3RhYnMvXHJcbiAqXHJcbiAqIERlcGVuZHM6XHJcbiAqXHRqcXVlcnkudWkuY29yZS5qc1xyXG4gKlx0anF1ZXJ5LnVpLndpZGdldC5qc1xyXG4gKi9cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG52YXIgdGFiSWQgPSAwLFxyXG5cdHJoYXNoID0gLyMuKiQvO1xyXG5cclxuZnVuY3Rpb24gZ2V0TmV4dFRhYklkKCkge1xyXG5cdHJldHVybiArK3RhYklkO1xyXG59XHJcblxyXG5mdW5jdGlvbiBpc0xvY2FsKCBhbmNob3IgKSB7XHJcblx0cmV0dXJuIGFuY2hvci5oYXNoLmxlbmd0aCA+IDEgJiZcclxuXHRcdGRlY29kZVVSSUNvbXBvbmVudCggYW5jaG9yLmhyZWYucmVwbGFjZSggcmhhc2gsIFwiXCIgKSApID09PVxyXG5cdFx0XHRkZWNvZGVVUklDb21wb25lbnQoIGxvY2F0aW9uLmhyZWYucmVwbGFjZSggcmhhc2gsIFwiXCIgKSApO1xyXG59XHJcblxyXG4kLndpZGdldCggXCJ1aS50YWJzXCIsIHtcclxuXHR2ZXJzaW9uOiBcImZhZGYyYjMxMmEwNTA0MDQzNjQ1MWM2NGJiZmFmNDgxNGJjNjJjNTZcIixcclxuXHRkZWxheTogMzAwLFxyXG5cdG9wdGlvbnM6IHtcclxuXHRcdGFjdGl2ZTogbnVsbCxcclxuXHRcdGNvbGxhcHNpYmxlOiBmYWxzZSxcclxuXHRcdGV2ZW50OiBcImNsaWNrXCIsXHJcblx0XHRoZWlnaHRTdHlsZTogXCJjb250ZW50XCIsXHJcblx0XHRoaWRlOiBudWxsLFxyXG5cdFx0c2hvdzogbnVsbCxcclxuXHJcblx0XHQvLyBjYWxsYmFja3NcclxuXHRcdGFjdGl2YXRlOiBudWxsLFxyXG5cdFx0YmVmb3JlQWN0aXZhdGU6IG51bGwsXHJcblx0XHRiZWZvcmVMb2FkOiBudWxsLFxyXG5cdFx0bG9hZDogbnVsbFxyXG5cdH0sXHJcblxyXG5cdF9jcmVhdGU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIHRoYXQgPSB0aGlzLFxyXG5cdFx0XHRvcHRpb25zID0gdGhpcy5vcHRpb25zO1xyXG5cclxuXHRcdHRoaXMucnVubmluZyA9IGZhbHNlO1xyXG5cclxuXHRcdHRoaXMuZWxlbWVudFxyXG5cdFx0XHQuYWRkQ2xhc3MoIFwidWktdGFicyB1aS13aWRnZXQgdWktd2lkZ2V0LWNvbnRlbnQgdWktY29ybmVyLWFsbFwiIClcclxuXHRcdFx0LnRvZ2dsZUNsYXNzKCBcInVpLXRhYnMtY29sbGFwc2libGVcIiwgb3B0aW9ucy5jb2xsYXBzaWJsZSApXHJcblx0XHRcdC8vIFByZXZlbnQgdXNlcnMgZnJvbSBmb2N1c2luZyBkaXNhYmxlZCB0YWJzIHZpYSBjbGlja1xyXG5cdFx0XHQuZGVsZWdhdGUoIFwiLnVpLXRhYnMtbmF2ID4gbGlcIiwgXCJtb3VzZWRvd25cIiArIHRoaXMuZXZlbnROYW1lc3BhY2UsIGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdFx0XHRpZiAoICQoIHRoaXMgKS5pcyggXCIudWktc3RhdGUtZGlzYWJsZWRcIiApICkge1xyXG5cdFx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pXHJcblx0XHRcdC8vIHN1cHBvcnQ6IElFIDw5XHJcblx0XHRcdC8vIFByZXZlbnRpbmcgdGhlIGRlZmF1bHQgYWN0aW9uIGluIG1vdXNlZG93biBkb2Vzbid0IHByZXZlbnQgSUVcclxuXHRcdFx0Ly8gZnJvbSBmb2N1c2luZyB0aGUgZWxlbWVudCwgc28gaWYgdGhlIGFuY2hvciBnZXRzIGZvY3VzZWQsIGJsdXIuXHJcblx0XHRcdC8vIFdlIGRvbid0IGhhdmUgdG8gd29ycnkgYWJvdXQgZm9jdXNpbmcgdGhlIHByZXZpb3VzbHkgZm9jdXNlZFxyXG5cdFx0XHQvLyBlbGVtZW50IHNpbmNlIGNsaWNraW5nIG9uIGEgbm9uLWZvY3VzYWJsZSBlbGVtZW50IHNob3VsZCBmb2N1c1xyXG5cdFx0XHQvLyB0aGUgYm9keSBhbnl3YXkuXHJcblx0XHRcdC5kZWxlZ2F0ZSggXCIudWktdGFicy1hbmNob3JcIiwgXCJmb2N1c1wiICsgdGhpcy5ldmVudE5hbWVzcGFjZSwgZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0aWYgKCAkKCB0aGlzICkuY2xvc2VzdCggXCJsaVwiICkuaXMoIFwiLnVpLXN0YXRlLWRpc2FibGVkXCIgKSApIHtcclxuXHRcdFx0XHRcdHRoaXMuYmx1cigpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5fcHJvY2Vzc1RhYnMoKTtcclxuXHRcdG9wdGlvbnMuYWN0aXZlID0gdGhpcy5faW5pdGlhbEFjdGl2ZSgpO1xyXG5cclxuXHRcdC8vIFRha2UgZGlzYWJsaW5nIHRhYnMgdmlhIGNsYXNzIGF0dHJpYnV0ZSBmcm9tIEhUTUxcclxuXHRcdC8vIGludG8gYWNjb3VudCBhbmQgdXBkYXRlIG9wdGlvbiBwcm9wZXJseS5cclxuXHRcdGlmICggJC5pc0FycmF5KCBvcHRpb25zLmRpc2FibGVkICkgKSB7XHJcblx0XHRcdG9wdGlvbnMuZGlzYWJsZWQgPSAkLnVuaXF1ZSggb3B0aW9ucy5kaXNhYmxlZC5jb25jYXQoXHJcblx0XHRcdFx0JC5tYXAoIHRoaXMudGFicy5maWx0ZXIoIFwiLnVpLXN0YXRlLWRpc2FibGVkXCIgKSwgZnVuY3Rpb24oIGxpICkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIHRoYXQudGFicy5pbmRleCggbGkgKTtcclxuXHRcdFx0XHR9KVxyXG5cdFx0XHQpICkuc29ydCgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIGNoZWNrIGZvciBsZW5ndGggYXZvaWRzIGVycm9yIHdoZW4gaW5pdGlhbGl6aW5nIGVtcHR5IGxpc3RcclxuXHRcdGlmICggdGhpcy5vcHRpb25zLmFjdGl2ZSAhPT0gZmFsc2UgJiYgdGhpcy5hbmNob3JzLmxlbmd0aCApIHtcclxuXHRcdFx0dGhpcy5hY3RpdmUgPSB0aGlzLl9maW5kQWN0aXZlKCBvcHRpb25zLmFjdGl2ZSApO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0dGhpcy5hY3RpdmUgPSAkKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5fcmVmcmVzaCgpO1xyXG5cclxuXHRcdGlmICggdGhpcy5hY3RpdmUubGVuZ3RoICkge1xyXG5cdFx0XHR0aGlzLmxvYWQoIG9wdGlvbnMuYWN0aXZlICk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X2luaXRpYWxBY3RpdmU6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGFjdGl2ZSA9IHRoaXMub3B0aW9ucy5hY3RpdmUsXHJcblx0XHRcdGNvbGxhcHNpYmxlID0gdGhpcy5vcHRpb25zLmNvbGxhcHNpYmxlLFxyXG5cdFx0XHRsb2NhdGlvbkhhc2ggPSBsb2NhdGlvbi5oYXNoLnN1YnN0cmluZyggMSApO1xyXG5cclxuXHRcdGlmICggYWN0aXZlID09PSBudWxsICkge1xyXG5cdFx0XHQvLyBjaGVjayB0aGUgZnJhZ21lbnQgaWRlbnRpZmllciBpbiB0aGUgVVJMXHJcblx0XHRcdGlmICggbG9jYXRpb25IYXNoICkge1xyXG5cdFx0XHRcdHRoaXMudGFicy5lYWNoKGZ1bmN0aW9uKCBpLCB0YWIgKSB7XHJcblx0XHRcdFx0XHRpZiAoICQoIHRhYiApLmF0dHIoIFwiYXJpYS1jb250cm9sc1wiICkgPT09IGxvY2F0aW9uSGFzaCApIHtcclxuXHRcdFx0XHRcdFx0YWN0aXZlID0gaTtcclxuXHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBjaGVjayBmb3IgYSB0YWIgbWFya2VkIGFjdGl2ZSB2aWEgYSBjbGFzc1xyXG5cdFx0XHRpZiAoIGFjdGl2ZSA9PT0gbnVsbCApIHtcclxuXHRcdFx0XHRhY3RpdmUgPSB0aGlzLnRhYnMuaW5kZXgoIHRoaXMudGFicy5maWx0ZXIoIFwiLnVpLXRhYnMtYWN0aXZlXCIgKSApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBubyBhY3RpdmUgdGFiLCBzZXQgdG8gZmFsc2VcclxuXHRcdFx0aWYgKCBhY3RpdmUgPT09IG51bGwgfHwgYWN0aXZlID09PSAtMSApIHtcclxuXHRcdFx0XHRhY3RpdmUgPSB0aGlzLnRhYnMubGVuZ3RoID8gMCA6IGZhbHNlO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gaGFuZGxlIG51bWJlcnM6IG5lZ2F0aXZlLCBvdXQgb2YgcmFuZ2VcclxuXHRcdGlmICggYWN0aXZlICE9PSBmYWxzZSApIHtcclxuXHRcdFx0YWN0aXZlID0gdGhpcy50YWJzLmluZGV4KCB0aGlzLnRhYnMuZXEoIGFjdGl2ZSApICk7XHJcblx0XHRcdGlmICggYWN0aXZlID09PSAtMSApIHtcclxuXHRcdFx0XHRhY3RpdmUgPSBjb2xsYXBzaWJsZSA/IGZhbHNlIDogMDtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8vIGRvbid0IGFsbG93IGNvbGxhcHNpYmxlOiBmYWxzZSBhbmQgYWN0aXZlOiBmYWxzZVxyXG5cdFx0aWYgKCAhY29sbGFwc2libGUgJiYgYWN0aXZlID09PSBmYWxzZSAmJiB0aGlzLmFuY2hvcnMubGVuZ3RoICkge1xyXG5cdFx0XHRhY3RpdmUgPSAwO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBhY3RpdmU7XHJcblx0fSxcclxuXHJcblx0X2dldENyZWF0ZUV2ZW50RGF0YTogZnVuY3Rpb24oKSB7XHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHR0YWI6IHRoaXMuYWN0aXZlLFxyXG5cdFx0XHRwYW5lbDogIXRoaXMuYWN0aXZlLmxlbmd0aCA/ICQoKSA6IHRoaXMuX2dldFBhbmVsRm9yVGFiKCB0aGlzLmFjdGl2ZSApXHJcblx0XHR9O1xyXG5cdH0sXHJcblxyXG5cdF90YWJLZXlkb3duOiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHR2YXIgZm9jdXNlZFRhYiA9ICQoIHRoaXMuZG9jdW1lbnRbMF0uYWN0aXZlRWxlbWVudCApLmNsb3Nlc3QoIFwibGlcIiApLFxyXG5cdFx0XHRzZWxlY3RlZEluZGV4ID0gdGhpcy50YWJzLmluZGV4KCBmb2N1c2VkVGFiICksXHJcblx0XHRcdGdvaW5nRm9yd2FyZCA9IHRydWU7XHJcblxyXG5cdFx0aWYgKCB0aGlzLl9oYW5kbGVQYWdlTmF2KCBldmVudCApICkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0c3dpdGNoICggZXZlbnQua2V5Q29kZSApIHtcclxuXHRcdFx0Y2FzZSAkLnVpLmtleUNvZGUuUklHSFQ6XHJcblx0XHRcdGNhc2UgJC51aS5rZXlDb2RlLkRPV046XHJcblx0XHRcdFx0c2VsZWN0ZWRJbmRleCsrO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlICQudWkua2V5Q29kZS5VUDpcclxuXHRcdFx0Y2FzZSAkLnVpLmtleUNvZGUuTEVGVDpcclxuXHRcdFx0XHRnb2luZ0ZvcndhcmQgPSBmYWxzZTtcclxuXHRcdFx0XHRzZWxlY3RlZEluZGV4LS07XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgJC51aS5rZXlDb2RlLkVORDpcclxuXHRcdFx0XHRzZWxlY3RlZEluZGV4ID0gdGhpcy5hbmNob3JzLmxlbmd0aCAtIDE7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgJC51aS5rZXlDb2RlLkhPTUU6XHJcblx0XHRcdFx0c2VsZWN0ZWRJbmRleCA9IDA7XHJcblx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdGNhc2UgJC51aS5rZXlDb2RlLlNQQUNFOlxyXG5cdFx0XHRcdC8vIEFjdGl2YXRlIG9ubHksIG5vIGNvbGxhcHNpbmdcclxuXHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRcdGNsZWFyVGltZW91dCggdGhpcy5hY3RpdmF0aW5nICk7XHJcblx0XHRcdFx0dGhpcy5fYWN0aXZhdGUoIHNlbGVjdGVkSW5kZXggKTtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdGNhc2UgJC51aS5rZXlDb2RlLkVOVEVSOlxyXG5cdFx0XHRcdC8vIFRvZ2dsZSAoY2FuY2VsIGRlbGF5ZWQgYWN0aXZhdGlvbiwgYWxsb3cgY29sbGFwc2luZylcclxuXHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRcdGNsZWFyVGltZW91dCggdGhpcy5hY3RpdmF0aW5nICk7XHJcblx0XHRcdFx0Ly8gRGV0ZXJtaW5lIGlmIHdlIHNob3VsZCBjb2xsYXBzZSBvciBhY3RpdmF0ZVxyXG5cdFx0XHRcdHRoaXMuX2FjdGl2YXRlKCBzZWxlY3RlZEluZGV4ID09PSB0aGlzLm9wdGlvbnMuYWN0aXZlID8gZmFsc2UgOiBzZWxlY3RlZEluZGV4ICk7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRkZWZhdWx0OlxyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBGb2N1cyB0aGUgYXBwcm9wcmlhdGUgdGFiLCBiYXNlZCBvbiB3aGljaCBrZXkgd2FzIHByZXNzZWRcclxuXHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRjbGVhclRpbWVvdXQoIHRoaXMuYWN0aXZhdGluZyApO1xyXG5cdFx0c2VsZWN0ZWRJbmRleCA9IHRoaXMuX2ZvY3VzTmV4dFRhYiggc2VsZWN0ZWRJbmRleCwgZ29pbmdGb3J3YXJkICk7XHJcblxyXG5cdFx0Ly8gTmF2aWdhdGluZyB3aXRoIGNvbnRyb2wga2V5IHdpbGwgcHJldmVudCBhdXRvbWF0aWMgYWN0aXZhdGlvblxyXG5cdFx0aWYgKCAhZXZlbnQuY3RybEtleSApIHtcclxuXHRcdFx0Ly8gVXBkYXRlIGFyaWEtc2VsZWN0ZWQgaW1tZWRpYXRlbHkgc28gdGhhdCBBVCB0aGluayB0aGUgdGFiIGlzIGFscmVhZHkgc2VsZWN0ZWQuXHJcblx0XHRcdC8vIE90aGVyd2lzZSBBVCBtYXkgY29uZnVzZSB0aGUgdXNlciBieSBzdGF0aW5nIHRoYXQgdGhleSBuZWVkIHRvIGFjdGl2YXRlIHRoZSB0YWIsXHJcblx0XHRcdC8vIGJ1dCB0aGUgdGFiIHdpbGwgYWxyZWFkeSBiZSBhY3RpdmF0ZWQgYnkgdGhlIHRpbWUgdGhlIGFubm91bmNlbWVudCBmaW5pc2hlcy5cclxuXHRcdFx0Zm9jdXNlZFRhYi5hdHRyKCBcImFyaWEtc2VsZWN0ZWRcIiwgXCJmYWxzZVwiICk7XHJcblx0XHRcdHRoaXMudGFicy5lcSggc2VsZWN0ZWRJbmRleCApLmF0dHIoIFwiYXJpYS1zZWxlY3RlZFwiLCBcInRydWVcIiApO1xyXG5cclxuXHRcdFx0dGhpcy5hY3RpdmF0aW5nID0gdGhpcy5fZGVsYXkoZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0dGhpcy5vcHRpb24oIFwiYWN0aXZlXCIsIHNlbGVjdGVkSW5kZXggKTtcclxuXHRcdFx0fSwgdGhpcy5kZWxheSApO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9wYW5lbEtleWRvd246IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdGlmICggdGhpcy5faGFuZGxlUGFnZU5hdiggZXZlbnQgKSApIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEN0cmwrdXAgbW92ZXMgZm9jdXMgdG8gdGhlIGN1cnJlbnQgdGFiXHJcblx0XHRpZiAoIGV2ZW50LmN0cmxLZXkgJiYgZXZlbnQua2V5Q29kZSA9PT0gJC51aS5rZXlDb2RlLlVQICkge1xyXG5cdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHR0aGlzLmFjdGl2ZS5mb2N1cygpO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdC8vIEFsdCtwYWdlIHVwL2Rvd24gbW92ZXMgZm9jdXMgdG8gdGhlIHByZXZpb3VzL25leHQgdGFiIChhbmQgYWN0aXZhdGVzKVxyXG5cdF9oYW5kbGVQYWdlTmF2OiBmdW5jdGlvbiggZXZlbnQgKSB7XHJcblx0XHRpZiAoIGV2ZW50LmFsdEtleSAmJiBldmVudC5rZXlDb2RlID09PSAkLnVpLmtleUNvZGUuUEFHRV9VUCApIHtcclxuXHRcdFx0dGhpcy5fYWN0aXZhdGUoIHRoaXMuX2ZvY3VzTmV4dFRhYiggdGhpcy5vcHRpb25zLmFjdGl2ZSAtIDEsIGZhbHNlICkgKTtcclxuXHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHR9XHJcblx0XHRpZiAoIGV2ZW50LmFsdEtleSAmJiBldmVudC5rZXlDb2RlID09PSAkLnVpLmtleUNvZGUuUEFHRV9ET1dOICkge1xyXG5cdFx0XHR0aGlzLl9hY3RpdmF0ZSggdGhpcy5fZm9jdXNOZXh0VGFiKCB0aGlzLm9wdGlvbnMuYWN0aXZlICsgMSwgdHJ1ZSApICk7XHJcblx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9maW5kTmV4dFRhYjogZnVuY3Rpb24oIGluZGV4LCBnb2luZ0ZvcndhcmQgKSB7XHJcblx0XHR2YXIgbGFzdFRhYkluZGV4ID0gdGhpcy50YWJzLmxlbmd0aCAtIDE7XHJcblxyXG5cdFx0ZnVuY3Rpb24gY29uc3RyYWluKCkge1xyXG5cdFx0XHRpZiAoIGluZGV4ID4gbGFzdFRhYkluZGV4ICkge1xyXG5cdFx0XHRcdGluZGV4ID0gMDtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoIGluZGV4IDwgMCApIHtcclxuXHRcdFx0XHRpbmRleCA9IGxhc3RUYWJJbmRleDtcclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gaW5kZXg7XHJcblx0XHR9XHJcblxyXG5cdFx0d2hpbGUgKCAkLmluQXJyYXkoIGNvbnN0cmFpbigpLCB0aGlzLm9wdGlvbnMuZGlzYWJsZWQgKSAhPT0gLTEgKSB7XHJcblx0XHRcdGluZGV4ID0gZ29pbmdGb3J3YXJkID8gaW5kZXggKyAxIDogaW5kZXggLSAxO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBpbmRleDtcclxuXHR9LFxyXG5cclxuXHRfZm9jdXNOZXh0VGFiOiBmdW5jdGlvbiggaW5kZXgsIGdvaW5nRm9yd2FyZCApIHtcclxuXHRcdGluZGV4ID0gdGhpcy5fZmluZE5leHRUYWIoIGluZGV4LCBnb2luZ0ZvcndhcmQgKTtcclxuXHRcdHRoaXMudGFicy5lcSggaW5kZXggKS5mb2N1cygpO1xyXG5cdFx0cmV0dXJuIGluZGV4O1xyXG5cdH0sXHJcblxyXG5cdF9zZXRPcHRpb246IGZ1bmN0aW9uKCBrZXksIHZhbHVlICkge1xyXG5cdFx0aWYgKCBrZXkgPT09IFwiYWN0aXZlXCIgKSB7XHJcblx0XHRcdC8vIF9hY3RpdmF0ZSgpIHdpbGwgaGFuZGxlIGludmFsaWQgdmFsdWVzIGFuZCB1cGRhdGUgdGhpcy5vcHRpb25zXHJcblx0XHRcdHRoaXMuX2FjdGl2YXRlKCB2YWx1ZSApO1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCBrZXkgPT09IFwiZGlzYWJsZWRcIiApIHtcclxuXHRcdFx0Ly8gZG9uJ3QgdXNlIHRoZSB3aWRnZXQgZmFjdG9yeSdzIGRpc2FibGVkIGhhbmRsaW5nXHJcblx0XHRcdHRoaXMuX3NldHVwRGlzYWJsZWQoIHZhbHVlICk7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLl9zdXBlcigga2V5LCB2YWx1ZSk7XHJcblxyXG5cdFx0aWYgKCBrZXkgPT09IFwiY29sbGFwc2libGVcIiApIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50LnRvZ2dsZUNsYXNzKCBcInVpLXRhYnMtY29sbGFwc2libGVcIiwgdmFsdWUgKTtcclxuXHRcdFx0Ly8gU2V0dGluZyBjb2xsYXBzaWJsZTogZmFsc2Ugd2hpbGUgY29sbGFwc2VkOyBvcGVuIGZpcnN0IHBhbmVsXHJcblx0XHRcdGlmICggIXZhbHVlICYmIHRoaXMub3B0aW9ucy5hY3RpdmUgPT09IGZhbHNlICkge1xyXG5cdFx0XHRcdHRoaXMuX2FjdGl2YXRlKCAwICk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIGtleSA9PT0gXCJldmVudFwiICkge1xyXG5cdFx0XHR0aGlzLl9zZXR1cEV2ZW50cyggdmFsdWUgKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoIGtleSA9PT0gXCJoZWlnaHRTdHlsZVwiICkge1xyXG5cdFx0XHR0aGlzLl9zZXR1cEhlaWdodFN0eWxlKCB2YWx1ZSApO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF90YWJJZDogZnVuY3Rpb24oIHRhYiApIHtcclxuXHRcdHJldHVybiB0YWIuYXR0ciggXCJhcmlhLWNvbnRyb2xzXCIgKSB8fCBcInVpLXRhYnMtXCIgKyBnZXROZXh0VGFiSWQoKTtcclxuXHR9LFxyXG5cclxuXHRfc2FuaXRpemVTZWxlY3RvcjogZnVuY3Rpb24oIGhhc2ggKSB7XHJcblx0XHRyZXR1cm4gaGFzaCA/IGhhc2gucmVwbGFjZSggL1shXCIkJSYnKCkqKywuXFwvOjs8PT4/QFxcW1xcXVxcXmB7fH1+XS9nLCBcIlxcXFwkJlwiICkgOiBcIlwiO1xyXG5cdH0sXHJcblxyXG5cdHJlZnJlc2g6IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnMsXHJcblx0XHRcdGxpcyA9IHRoaXMudGFibGlzdC5jaGlsZHJlbiggXCI6aGFzKGFbaHJlZl0pXCIgKTtcclxuXHJcblx0XHQvLyBnZXQgZGlzYWJsZWQgdGFicyBmcm9tIGNsYXNzIGF0dHJpYnV0ZSBmcm9tIEhUTUxcclxuXHRcdC8vIHRoaXMgd2lsbCBnZXQgY29udmVydGVkIHRvIGEgYm9vbGVhbiBpZiBuZWVkZWQgaW4gX3JlZnJlc2goKVxyXG5cdFx0b3B0aW9ucy5kaXNhYmxlZCA9ICQubWFwKCBsaXMuZmlsdGVyKCBcIi51aS1zdGF0ZS1kaXNhYmxlZFwiICksIGZ1bmN0aW9uKCB0YWIgKSB7XHJcblx0XHRcdHJldHVybiBsaXMuaW5kZXgoIHRhYiApO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5fcHJvY2Vzc1RhYnMoKTtcclxuXHJcblx0XHQvLyB3YXMgY29sbGFwc2VkIG9yIG5vIHRhYnNcclxuXHRcdGlmICggb3B0aW9ucy5hY3RpdmUgPT09IGZhbHNlIHx8ICF0aGlzLmFuY2hvcnMubGVuZ3RoICkge1xyXG5cdFx0XHRvcHRpb25zLmFjdGl2ZSA9IGZhbHNlO1xyXG5cdFx0XHR0aGlzLmFjdGl2ZSA9ICQoKTtcclxuXHRcdC8vIHdhcyBhY3RpdmUsIGJ1dCBhY3RpdmUgdGFiIGlzIGdvbmVcclxuXHRcdH0gZWxzZSBpZiAoIHRoaXMuYWN0aXZlLmxlbmd0aCAmJiAhJC5jb250YWlucyggdGhpcy50YWJsaXN0WyAwIF0sIHRoaXMuYWN0aXZlWyAwIF0gKSApIHtcclxuXHRcdFx0Ly8gYWxsIHJlbWFpbmluZyB0YWJzIGFyZSBkaXNhYmxlZFxyXG5cdFx0XHRpZiAoIHRoaXMudGFicy5sZW5ndGggPT09IG9wdGlvbnMuZGlzYWJsZWQubGVuZ3RoICkge1xyXG5cdFx0XHRcdG9wdGlvbnMuYWN0aXZlID0gZmFsc2U7XHJcblx0XHRcdFx0dGhpcy5hY3RpdmUgPSAkKCk7XHJcblx0XHRcdC8vIGFjdGl2YXRlIHByZXZpb3VzIHRhYlxyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHRoaXMuX2FjdGl2YXRlKCB0aGlzLl9maW5kTmV4dFRhYiggTWF0aC5tYXgoIDAsIG9wdGlvbnMuYWN0aXZlIC0gMSApLCBmYWxzZSApICk7XHJcblx0XHRcdH1cclxuXHRcdC8vIHdhcyBhY3RpdmUsIGFjdGl2ZSB0YWIgc3RpbGwgZXhpc3RzXHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHQvLyBtYWtlIHN1cmUgYWN0aXZlIGluZGV4IGlzIGNvcnJlY3RcclxuXHRcdFx0b3B0aW9ucy5hY3RpdmUgPSB0aGlzLnRhYnMuaW5kZXgoIHRoaXMuYWN0aXZlICk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5fcmVmcmVzaCgpO1xyXG5cdH0sXHJcblxyXG5cdF9yZWZyZXNoOiBmdW5jdGlvbigpIHtcclxuXHRcdHRoaXMuX3NldHVwRGlzYWJsZWQoIHRoaXMub3B0aW9ucy5kaXNhYmxlZCApO1xyXG5cdFx0dGhpcy5fc2V0dXBFdmVudHMoIHRoaXMub3B0aW9ucy5ldmVudCApO1xyXG5cdFx0dGhpcy5fc2V0dXBIZWlnaHRTdHlsZSggdGhpcy5vcHRpb25zLmhlaWdodFN0eWxlICk7XHJcblxyXG5cdFx0dGhpcy50YWJzLm5vdCggdGhpcy5hY3RpdmUgKS5hdHRyKHtcclxuXHRcdFx0XCJhcmlhLXNlbGVjdGVkXCI6IFwiZmFsc2VcIixcclxuXHRcdFx0dGFiSW5kZXg6IC0xXHJcblx0XHR9KTtcclxuXHRcdHRoaXMucGFuZWxzLm5vdCggdGhpcy5fZ2V0UGFuZWxGb3JUYWIoIHRoaXMuYWN0aXZlICkgKVxyXG5cdFx0XHQuaGlkZSgpXHJcblx0XHRcdC5hdHRyKHtcclxuXHRcdFx0XHRcImFyaWEtZXhwYW5kZWRcIjogXCJmYWxzZVwiLFxyXG5cdFx0XHRcdFwiYXJpYS1oaWRkZW5cIjogXCJ0cnVlXCJcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0Ly8gTWFrZSBzdXJlIG9uZSB0YWIgaXMgaW4gdGhlIHRhYiBvcmRlclxyXG5cdFx0aWYgKCAhdGhpcy5hY3RpdmUubGVuZ3RoICkge1xyXG5cdFx0XHR0aGlzLnRhYnMuZXEoIDAgKS5hdHRyKCBcInRhYkluZGV4XCIsIDAgKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRoaXMuYWN0aXZlXHJcblx0XHRcdFx0LmFkZENsYXNzKCBcInVpLXRhYnMtYWN0aXZlIHVpLXN0YXRlLWFjdGl2ZVwiIClcclxuXHRcdFx0XHQuYXR0cih7XHJcblx0XHRcdFx0XHRcImFyaWEtc2VsZWN0ZWRcIjogXCJ0cnVlXCIsXHJcblx0XHRcdFx0XHR0YWJJbmRleDogMFxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR0aGlzLl9nZXRQYW5lbEZvclRhYiggdGhpcy5hY3RpdmUgKVxyXG5cdFx0XHRcdC5zaG93KClcclxuXHRcdFx0XHQuYXR0cih7XHJcblx0XHRcdFx0XHRcImFyaWEtZXhwYW5kZWRcIjogXCJ0cnVlXCIsXHJcblx0XHRcdFx0XHRcImFyaWEtaGlkZGVuXCI6IFwiZmFsc2VcIlxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9wcm9jZXNzVGFiczogZnVuY3Rpb24oKSB7XHJcblx0XHR2YXIgdGhhdCA9IHRoaXM7XHJcblxyXG5cdFx0dGhpcy50YWJsaXN0ID0gdGhpcy5fZ2V0TGlzdCgpXHJcblx0XHRcdC5hZGRDbGFzcyggXCJ1aS10YWJzLW5hdiB1aS1oZWxwZXItcmVzZXQgdWktaGVscGVyLWNsZWFyZml4IHVpLXdpZGdldC1oZWFkZXIgdWktY29ybmVyLWFsbFwiIClcclxuXHRcdFx0LmF0dHIoIFwicm9sZVwiLCBcInRhYmxpc3RcIiApO1xyXG5cclxuXHRcdHRoaXMudGFicyA9IHRoaXMudGFibGlzdC5maW5kKCBcIj4gbGk6aGFzKGFbaHJlZl0pXCIgKVxyXG5cdFx0XHQuYWRkQ2xhc3MoIFwidWktc3RhdGUtZGVmYXVsdCB1aS1jb3JuZXItdG9wXCIgKVxyXG5cdFx0XHQuYXR0cih7XHJcblx0XHRcdFx0cm9sZTogXCJ0YWJcIixcclxuXHRcdFx0XHR0YWJJbmRleDogLTFcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5hbmNob3JzID0gdGhpcy50YWJzLm1hcChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRyZXR1cm4gJCggXCJhXCIsIHRoaXMgKVsgMCBdO1xyXG5cdFx0XHR9KVxyXG5cdFx0XHQuYWRkQ2xhc3MoIFwidWktdGFicy1hbmNob3JcIiApXHJcblx0XHRcdC5hdHRyKHtcclxuXHRcdFx0XHRyb2xlOiBcInByZXNlbnRhdGlvblwiLFxyXG5cdFx0XHRcdHRhYkluZGV4OiAtMVxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHR0aGlzLnBhbmVscyA9ICQoKTtcclxuXHJcblx0XHR0aGlzLmFuY2hvcnMuZWFjaChmdW5jdGlvbiggaSwgYW5jaG9yICkge1xyXG5cdFx0XHR2YXIgc2VsZWN0b3IsIHBhbmVsLCBwYW5lbElkLFxyXG5cdFx0XHRcdGFuY2hvcklkID0gJCggYW5jaG9yICkudW5pcXVlSWQoKS5hdHRyKCBcImlkXCIgKSxcclxuXHRcdFx0XHR0YWIgPSAkKCBhbmNob3IgKS5jbG9zZXN0KCBcImxpXCIgKSxcclxuXHRcdFx0XHRvcmlnaW5hbEFyaWFDb250cm9scyA9IHRhYi5hdHRyKCBcImFyaWEtY29udHJvbHNcIiApO1xyXG5cclxuXHRcdFx0Ly8gaW5saW5lIHRhYlxyXG5cdFx0XHRpZiAoIGlzTG9jYWwoIGFuY2hvciApICkge1xyXG5cdFx0XHRcdHNlbGVjdG9yID0gYW5jaG9yLmhhc2g7XHJcblx0XHRcdFx0cGFuZWwgPSB0aGF0LmVsZW1lbnQuZmluZCggdGhhdC5fc2FuaXRpemVTZWxlY3Rvciggc2VsZWN0b3IgKSApO1xyXG5cdFx0XHQvLyByZW1vdGUgdGFiXHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0cGFuZWxJZCA9IHRoYXQuX3RhYklkKCB0YWIgKTtcclxuXHRcdFx0XHRzZWxlY3RvciA9IFwiI1wiICsgcGFuZWxJZDtcclxuXHRcdFx0XHRwYW5lbCA9IHRoYXQuZWxlbWVudC5maW5kKCBzZWxlY3RvciApO1xyXG5cdFx0XHRcdGlmICggIXBhbmVsLmxlbmd0aCApIHtcclxuXHRcdFx0XHRcdHBhbmVsID0gdGhhdC5fY3JlYXRlUGFuZWwoIHBhbmVsSWQgKTtcclxuXHRcdFx0XHRcdHBhbmVsLmluc2VydEFmdGVyKCB0aGF0LnBhbmVsc1sgaSAtIDEgXSB8fCB0aGF0LnRhYmxpc3QgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0cGFuZWwuYXR0ciggXCJhcmlhLWxpdmVcIiwgXCJwb2xpdGVcIiApO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoIHBhbmVsLmxlbmd0aCkge1xyXG5cdFx0XHRcdHRoYXQucGFuZWxzID0gdGhhdC5wYW5lbHMuYWRkKCBwYW5lbCApO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICggb3JpZ2luYWxBcmlhQ29udHJvbHMgKSB7XHJcblx0XHRcdFx0dGFiLmRhdGEoIFwidWktdGFicy1hcmlhLWNvbnRyb2xzXCIsIG9yaWdpbmFsQXJpYUNvbnRyb2xzICk7XHJcblx0XHRcdH1cclxuXHRcdFx0dGFiLmF0dHIoe1xyXG5cdFx0XHRcdFwiYXJpYS1jb250cm9sc1wiOiBzZWxlY3Rvci5zdWJzdHJpbmcoIDEgKSxcclxuXHRcdFx0XHRcImFyaWEtbGFiZWxsZWRieVwiOiBhbmNob3JJZFxyXG5cdFx0XHR9KTtcclxuXHRcdFx0cGFuZWwuYXR0ciggXCJhcmlhLWxhYmVsbGVkYnlcIiwgYW5jaG9ySWQgKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdHRoaXMucGFuZWxzXHJcblx0XHRcdC5hZGRDbGFzcyggXCJ1aS10YWJzLXBhbmVsIHVpLXdpZGdldC1jb250ZW50IHVpLWNvcm5lci1ib3R0b21cIiApXHJcblx0XHRcdC5hdHRyKCBcInJvbGVcIiwgXCJ0YWJwYW5lbFwiICk7XHJcblx0fSxcclxuXHJcblx0Ly8gYWxsb3cgb3ZlcnJpZGluZyBob3cgdG8gZmluZCB0aGUgbGlzdCBmb3IgcmFyZSB1c2FnZSBzY2VuYXJpb3MgKCM3NzE1KVxyXG5cdF9nZXRMaXN0OiBmdW5jdGlvbigpIHtcclxuXHRcdHJldHVybiB0aGlzLmVsZW1lbnQuZmluZCggXCJvbCx1bFwiICkuZXEoIDAgKTtcclxuXHR9LFxyXG5cclxuXHRfY3JlYXRlUGFuZWw6IGZ1bmN0aW9uKCBpZCApIHtcclxuXHRcdHJldHVybiAkKCBcIjxkaXY+XCIgKVxyXG5cdFx0XHQuYXR0ciggXCJpZFwiLCBpZCApXHJcblx0XHRcdC5hZGRDbGFzcyggXCJ1aS10YWJzLXBhbmVsIHVpLXdpZGdldC1jb250ZW50IHVpLWNvcm5lci1ib3R0b21cIiApXHJcblx0XHRcdC5kYXRhKCBcInVpLXRhYnMtZGVzdHJveVwiLCB0cnVlICk7XHJcblx0fSxcclxuXHJcblx0X3NldHVwRGlzYWJsZWQ6IGZ1bmN0aW9uKCBkaXNhYmxlZCApIHtcclxuXHRcdGlmICggJC5pc0FycmF5KCBkaXNhYmxlZCApICkge1xyXG5cdFx0XHRpZiAoICFkaXNhYmxlZC5sZW5ndGggKSB7XHJcblx0XHRcdFx0ZGlzYWJsZWQgPSBmYWxzZTtcclxuXHRcdFx0fSBlbHNlIGlmICggZGlzYWJsZWQubGVuZ3RoID09PSB0aGlzLmFuY2hvcnMubGVuZ3RoICkge1xyXG5cdFx0XHRcdGRpc2FibGVkID0gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8vIGRpc2FibGUgdGFic1xyXG5cdFx0Zm9yICggdmFyIGkgPSAwLCBsaTsgKCBsaSA9IHRoaXMudGFic1sgaSBdICk7IGkrKyApIHtcclxuXHRcdFx0aWYgKCBkaXNhYmxlZCA9PT0gdHJ1ZSB8fCAkLmluQXJyYXkoIGksIGRpc2FibGVkICkgIT09IC0xICkge1xyXG5cdFx0XHRcdCQoIGxpIClcclxuXHRcdFx0XHRcdC5hZGRDbGFzcyggXCJ1aS1zdGF0ZS1kaXNhYmxlZFwiIClcclxuXHRcdFx0XHRcdC5hdHRyKCBcImFyaWEtZGlzYWJsZWRcIiwgXCJ0cnVlXCIgKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHQkKCBsaSApXHJcblx0XHRcdFx0XHQucmVtb3ZlQ2xhc3MoIFwidWktc3RhdGUtZGlzYWJsZWRcIiApXHJcblx0XHRcdFx0XHQucmVtb3ZlQXR0ciggXCJhcmlhLWRpc2FibGVkXCIgKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMub3B0aW9ucy5kaXNhYmxlZCA9IGRpc2FibGVkO1xyXG5cdH0sXHJcblxyXG5cdF9zZXR1cEV2ZW50czogZnVuY3Rpb24oIGV2ZW50ICkge1xyXG5cdFx0dmFyIGV2ZW50cyA9IHtcclxuXHRcdFx0Y2xpY2s6IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cdFx0aWYgKCBldmVudCApIHtcclxuXHRcdFx0JC5lYWNoKCBldmVudC5zcGxpdChcIiBcIiksIGZ1bmN0aW9uKCBpbmRleCwgZXZlbnROYW1lICkge1xyXG5cdFx0XHRcdGV2ZW50c1sgZXZlbnROYW1lIF0gPSBcIl9ldmVudEhhbmRsZXJcIjtcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5fb2ZmKCB0aGlzLmFuY2hvcnMuYWRkKCB0aGlzLnRhYnMgKS5hZGQoIHRoaXMucGFuZWxzICkgKTtcclxuXHRcdHRoaXMuX29uKCB0aGlzLmFuY2hvcnMsIGV2ZW50cyApO1xyXG5cdFx0dGhpcy5fb24oIHRoaXMudGFicywgeyBrZXlkb3duOiBcIl90YWJLZXlkb3duXCIgfSApO1xyXG5cdFx0dGhpcy5fb24oIHRoaXMucGFuZWxzLCB7IGtleWRvd246IFwiX3BhbmVsS2V5ZG93blwiIH0gKTtcclxuXHJcblx0XHR0aGlzLl9mb2N1c2FibGUoIHRoaXMudGFicyApO1xyXG5cdFx0dGhpcy5faG92ZXJhYmxlKCB0aGlzLnRhYnMgKTtcclxuXHR9LFxyXG5cclxuXHRfc2V0dXBIZWlnaHRTdHlsZTogZnVuY3Rpb24oIGhlaWdodFN0eWxlICkge1xyXG5cdFx0dmFyIG1heEhlaWdodCxcclxuXHRcdFx0cGFyZW50ID0gdGhpcy5lbGVtZW50LnBhcmVudCgpO1xyXG5cclxuXHRcdGlmICggaGVpZ2h0U3R5bGUgPT09IFwiZmlsbFwiICkge1xyXG5cdFx0XHRtYXhIZWlnaHQgPSBwYXJlbnQuaGVpZ2h0KCk7XHJcblx0XHRcdG1heEhlaWdodCAtPSB0aGlzLmVsZW1lbnQub3V0ZXJIZWlnaHQoKSAtIHRoaXMuZWxlbWVudC5oZWlnaHQoKTtcclxuXHJcblx0XHRcdHRoaXMuZWxlbWVudC5zaWJsaW5ncyggXCI6dmlzaWJsZVwiICkuZWFjaChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR2YXIgZWxlbSA9ICQoIHRoaXMgKSxcclxuXHRcdFx0XHRcdHBvc2l0aW9uID0gZWxlbS5jc3MoIFwicG9zaXRpb25cIiApO1xyXG5cclxuXHRcdFx0XHRpZiAoIHBvc2l0aW9uID09PSBcImFic29sdXRlXCIgfHwgcG9zaXRpb24gPT09IFwiZml4ZWRcIiApIHtcclxuXHRcdFx0XHRcdHJldHVybjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0bWF4SGVpZ2h0IC09IGVsZW0ub3V0ZXJIZWlnaHQoIHRydWUgKTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHR0aGlzLmVsZW1lbnQuY2hpbGRyZW4oKS5ub3QoIHRoaXMucGFuZWxzICkuZWFjaChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRtYXhIZWlnaHQgLT0gJCggdGhpcyApLm91dGVySGVpZ2h0KCB0cnVlICk7XHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0dGhpcy5wYW5lbHMuZWFjaChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHQkKCB0aGlzICkuaGVpZ2h0KCBNYXRoLm1heCggMCwgbWF4SGVpZ2h0IC1cclxuXHRcdFx0XHRcdCQoIHRoaXMgKS5pbm5lckhlaWdodCgpICsgJCggdGhpcyApLmhlaWdodCgpICkgKTtcclxuXHRcdFx0fSlcclxuXHRcdFx0LmNzcyggXCJvdmVyZmxvd1wiLCBcImF1dG9cIiApO1xyXG5cdFx0fSBlbHNlIGlmICggaGVpZ2h0U3R5bGUgPT09IFwiYXV0b1wiICkge1xyXG5cdFx0XHRtYXhIZWlnaHQgPSAwO1xyXG5cdFx0XHR0aGlzLnBhbmVscy5lYWNoKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdG1heEhlaWdodCA9IE1hdGgubWF4KCBtYXhIZWlnaHQsICQoIHRoaXMgKS5oZWlnaHQoIFwiXCIgKS5oZWlnaHQoKSApO1xyXG5cdFx0XHR9KS5oZWlnaHQoIG1heEhlaWdodCApO1xyXG5cdFx0fVxyXG5cdH0sXHJcblxyXG5cdF9ldmVudEhhbmRsZXI6IGZ1bmN0aW9uKCBldmVudCApIHtcclxuXHRcdHZhciBvcHRpb25zID0gdGhpcy5vcHRpb25zLFxyXG5cdFx0XHRhY3RpdmUgPSB0aGlzLmFjdGl2ZSxcclxuXHRcdFx0YW5jaG9yID0gJCggZXZlbnQuY3VycmVudFRhcmdldCApLFxyXG5cdFx0XHR0YWIgPSBhbmNob3IuY2xvc2VzdCggXCJsaVwiICksXHJcblx0XHRcdGNsaWNrZWRJc0FjdGl2ZSA9IHRhYlsgMCBdID09PSBhY3RpdmVbIDAgXSxcclxuXHRcdFx0Y29sbGFwc2luZyA9IGNsaWNrZWRJc0FjdGl2ZSAmJiBvcHRpb25zLmNvbGxhcHNpYmxlLFxyXG5cdFx0XHR0b1Nob3cgPSBjb2xsYXBzaW5nID8gJCgpIDogdGhpcy5fZ2V0UGFuZWxGb3JUYWIoIHRhYiApLFxyXG5cdFx0XHR0b0hpZGUgPSAhYWN0aXZlLmxlbmd0aCA/ICQoKSA6IHRoaXMuX2dldFBhbmVsRm9yVGFiKCBhY3RpdmUgKSxcclxuXHRcdFx0ZXZlbnREYXRhID0ge1xyXG5cdFx0XHRcdG9sZFRhYjogYWN0aXZlLFxyXG5cdFx0XHRcdG9sZFBhbmVsOiB0b0hpZGUsXHJcblx0XHRcdFx0bmV3VGFiOiBjb2xsYXBzaW5nID8gJCgpIDogdGFiLFxyXG5cdFx0XHRcdG5ld1BhbmVsOiB0b1Nob3dcclxuXHRcdFx0fTtcclxuXHJcblx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuXHRcdGlmICggdGFiLmhhc0NsYXNzKCBcInVpLXN0YXRlLWRpc2FibGVkXCIgKSB8fFxyXG5cdFx0XHRcdC8vIHRhYiBpcyBhbHJlYWR5IGxvYWRpbmdcclxuXHRcdFx0XHR0YWIuaGFzQ2xhc3MoIFwidWktdGFicy1sb2FkaW5nXCIgKSB8fFxyXG5cdFx0XHRcdC8vIGNhbid0IHN3aXRjaCBkdXJuaW5nIGFuIGFuaW1hdGlvblxyXG5cdFx0XHRcdHRoaXMucnVubmluZyB8fFxyXG5cdFx0XHRcdC8vIGNsaWNrIG9uIGFjdGl2ZSBoZWFkZXIsIGJ1dCBub3QgY29sbGFwc2libGVcclxuXHRcdFx0XHQoIGNsaWNrZWRJc0FjdGl2ZSAmJiAhb3B0aW9ucy5jb2xsYXBzaWJsZSApIHx8XHJcblx0XHRcdFx0Ly8gYWxsb3cgY2FuY2VsaW5nIGFjdGl2YXRpb25cclxuXHRcdFx0XHQoIHRoaXMuX3RyaWdnZXIoIFwiYmVmb3JlQWN0aXZhdGVcIiwgZXZlbnQsIGV2ZW50RGF0YSApID09PSBmYWxzZSApICkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0b3B0aW9ucy5hY3RpdmUgPSBjb2xsYXBzaW5nID8gZmFsc2UgOiB0aGlzLnRhYnMuaW5kZXgoIHRhYiApO1xyXG5cclxuXHRcdHRoaXMuYWN0aXZlID0gY2xpY2tlZElzQWN0aXZlID8gJCgpIDogdGFiO1xyXG5cdFx0aWYgKCB0aGlzLnhociApIHtcclxuXHRcdFx0dGhpcy54aHIuYWJvcnQoKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoICF0b0hpZGUubGVuZ3RoICYmICF0b1Nob3cubGVuZ3RoICkge1xyXG5cdFx0XHQkLmVycm9yKCBcImpRdWVyeSBVSSBUYWJzOiBNaXNtYXRjaGluZyBmcmFnbWVudCBpZGVudGlmaWVyLlwiICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCB0b1Nob3cubGVuZ3RoICkge1xyXG5cdFx0XHR0aGlzLmxvYWQoIHRoaXMudGFicy5pbmRleCggdGFiICksIGV2ZW50ICk7XHJcblx0XHR9XHJcblx0XHR0aGlzLl90b2dnbGUoIGV2ZW50LCBldmVudERhdGEgKTtcclxuXHR9LFxyXG5cclxuXHQvLyBoYW5kbGVzIHNob3cvaGlkZSBmb3Igc2VsZWN0aW5nIHRhYnNcclxuXHRfdG9nZ2xlOiBmdW5jdGlvbiggZXZlbnQsIGV2ZW50RGF0YSApIHtcclxuXHRcdHZhciB0aGF0ID0gdGhpcyxcclxuXHRcdFx0dG9TaG93ID0gZXZlbnREYXRhLm5ld1BhbmVsLFxyXG5cdFx0XHR0b0hpZGUgPSBldmVudERhdGEub2xkUGFuZWw7XHJcblxyXG5cdFx0dGhpcy5ydW5uaW5nID0gdHJ1ZTtcclxuXHJcblx0XHRmdW5jdGlvbiBjb21wbGV0ZSgpIHtcclxuXHRcdFx0dGhhdC5ydW5uaW5nID0gZmFsc2U7XHJcblx0XHRcdHRoYXQuX3RyaWdnZXIoIFwiYWN0aXZhdGVcIiwgZXZlbnQsIGV2ZW50RGF0YSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdGZ1bmN0aW9uIHNob3coKSB7XHJcblx0XHRcdGV2ZW50RGF0YS5uZXdUYWIuY2xvc2VzdCggXCJsaVwiICkuYWRkQ2xhc3MoIFwidWktdGFicy1hY3RpdmUgdWktc3RhdGUtYWN0aXZlXCIgKTtcclxuXHJcblx0XHRcdGlmICggdG9TaG93Lmxlbmd0aCAmJiB0aGF0Lm9wdGlvbnMuc2hvdyApIHtcclxuXHRcdFx0XHR0aGF0Ll9zaG93KCB0b1Nob3csIHRoYXQub3B0aW9ucy5zaG93LCBjb21wbGV0ZSApO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHRvU2hvdy5zaG93KCk7XHJcblx0XHRcdFx0Y29tcGxldGUoKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8vIHN0YXJ0IG91dCBieSBoaWRpbmcsIHRoZW4gc2hvd2luZywgdGhlbiBjb21wbGV0aW5nXHJcblx0XHRpZiAoIHRvSGlkZS5sZW5ndGggJiYgdGhpcy5vcHRpb25zLmhpZGUgKSB7XHJcblx0XHRcdHRoaXMuX2hpZGUoIHRvSGlkZSwgdGhpcy5vcHRpb25zLmhpZGUsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdGV2ZW50RGF0YS5vbGRUYWIuY2xvc2VzdCggXCJsaVwiICkucmVtb3ZlQ2xhc3MoIFwidWktdGFicy1hY3RpdmUgdWktc3RhdGUtYWN0aXZlXCIgKTtcclxuXHRcdFx0XHRzaG93KCk7XHJcblx0XHRcdH0pO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0ZXZlbnREYXRhLm9sZFRhYi5jbG9zZXN0KCBcImxpXCIgKS5yZW1vdmVDbGFzcyggXCJ1aS10YWJzLWFjdGl2ZSB1aS1zdGF0ZS1hY3RpdmVcIiApO1xyXG5cdFx0XHR0b0hpZGUuaGlkZSgpO1xyXG5cdFx0XHRzaG93KCk7XHJcblx0XHR9XHJcblxyXG5cdFx0dG9IaWRlLmF0dHIoe1xyXG5cdFx0XHRcImFyaWEtZXhwYW5kZWRcIjogXCJmYWxzZVwiLFxyXG5cdFx0XHRcImFyaWEtaGlkZGVuXCI6IFwidHJ1ZVwiXHJcblx0XHR9KTtcclxuXHRcdGV2ZW50RGF0YS5vbGRUYWIuYXR0ciggXCJhcmlhLXNlbGVjdGVkXCIsIFwiZmFsc2VcIiApO1xyXG5cdFx0Ly8gSWYgd2UncmUgc3dpdGNoaW5nIHRhYnMsIHJlbW92ZSB0aGUgb2xkIHRhYiBmcm9tIHRoZSB0YWIgb3JkZXIuXHJcblx0XHQvLyBJZiB3ZSdyZSBvcGVuaW5nIGZyb20gY29sbGFwc2VkIHN0YXRlLCByZW1vdmUgdGhlIHByZXZpb3VzIHRhYiBmcm9tIHRoZSB0YWIgb3JkZXIuXHJcblx0XHQvLyBJZiB3ZSdyZSBjb2xsYXBzaW5nLCB0aGVuIGtlZXAgdGhlIGNvbGxhcHNpbmcgdGFiIGluIHRoZSB0YWIgb3JkZXIuXHJcblx0XHRpZiAoIHRvU2hvdy5sZW5ndGggJiYgdG9IaWRlLmxlbmd0aCApIHtcclxuXHRcdFx0ZXZlbnREYXRhLm9sZFRhYi5hdHRyKCBcInRhYkluZGV4XCIsIC0xICk7XHJcblx0XHR9IGVsc2UgaWYgKCB0b1Nob3cubGVuZ3RoICkge1xyXG5cdFx0XHR0aGlzLnRhYnMuZmlsdGVyKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHJldHVybiAkKCB0aGlzICkuYXR0ciggXCJ0YWJJbmRleFwiICkgPT09IDA7XHJcblx0XHRcdH0pXHJcblx0XHRcdC5hdHRyKCBcInRhYkluZGV4XCIsIC0xICk7XHJcblx0XHR9XHJcblxyXG5cdFx0dG9TaG93LmF0dHIoe1xyXG5cdFx0XHRcImFyaWEtZXhwYW5kZWRcIjogXCJ0cnVlXCIsXHJcblx0XHRcdFwiYXJpYS1oaWRkZW5cIjogXCJmYWxzZVwiXHJcblx0XHR9KTtcclxuXHRcdGV2ZW50RGF0YS5uZXdUYWIuYXR0cih7XHJcblx0XHRcdFwiYXJpYS1zZWxlY3RlZFwiOiBcInRydWVcIixcclxuXHRcdFx0dGFiSW5kZXg6IDBcclxuXHRcdH0pO1xyXG5cdH0sXHJcblxyXG5cdF9hY3RpdmF0ZTogZnVuY3Rpb24oIGluZGV4ICkge1xyXG5cdFx0dmFyIGFuY2hvcixcclxuXHRcdFx0YWN0aXZlID0gdGhpcy5fZmluZEFjdGl2ZSggaW5kZXggKTtcclxuXHJcblx0XHQvLyB0cnlpbmcgdG8gYWN0aXZhdGUgdGhlIGFscmVhZHkgYWN0aXZlIHBhbmVsXHJcblx0XHRpZiAoIGFjdGl2ZVsgMCBdID09PSB0aGlzLmFjdGl2ZVsgMCBdICkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gdHJ5aW5nIHRvIGNvbGxhcHNlLCBzaW11bGF0ZSBhIGNsaWNrIG9uIHRoZSBjdXJyZW50IGFjdGl2ZSBoZWFkZXJcclxuXHRcdGlmICggIWFjdGl2ZS5sZW5ndGggKSB7XHJcblx0XHRcdGFjdGl2ZSA9IHRoaXMuYWN0aXZlO1xyXG5cdFx0fVxyXG5cclxuXHRcdGFuY2hvciA9IGFjdGl2ZS5maW5kKCBcIi51aS10YWJzLWFuY2hvclwiIClbIDAgXTtcclxuXHRcdHRoaXMuX2V2ZW50SGFuZGxlcih7XHJcblx0XHRcdHRhcmdldDogYW5jaG9yLFxyXG5cdFx0XHRjdXJyZW50VGFyZ2V0OiBhbmNob3IsXHJcblx0XHRcdHByZXZlbnREZWZhdWx0OiAkLm5vb3BcclxuXHRcdH0pO1xyXG5cdH0sXHJcblxyXG5cdF9maW5kQWN0aXZlOiBmdW5jdGlvbiggaW5kZXggKSB7XHJcblx0XHRyZXR1cm4gaW5kZXggPT09IGZhbHNlID8gJCgpIDogdGhpcy50YWJzLmVxKCBpbmRleCApO1xyXG5cdH0sXHJcblxyXG5cdF9nZXRJbmRleDogZnVuY3Rpb24oIGluZGV4ICkge1xyXG5cdFx0Ly8gbWV0YS1mdW5jdGlvbiB0byBnaXZlIHVzZXJzIG9wdGlvbiB0byBwcm92aWRlIGEgaHJlZiBzdHJpbmcgaW5zdGVhZCBvZiBhIG51bWVyaWNhbCBpbmRleC5cclxuXHRcdGlmICggdHlwZW9mIGluZGV4ID09PSBcInN0cmluZ1wiICkge1xyXG5cdFx0XHRpbmRleCA9IHRoaXMuYW5jaG9ycy5pbmRleCggdGhpcy5hbmNob3JzLmZpbHRlciggXCJbaHJlZiQ9J1wiICsgaW5kZXggKyBcIiddXCIgKSApO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBpbmRleDtcclxuXHR9LFxyXG5cclxuXHRfZGVzdHJveTogZnVuY3Rpb24oKSB7XHJcblx0XHRpZiAoIHRoaXMueGhyICkge1xyXG5cdFx0XHR0aGlzLnhoci5hYm9ydCgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuZWxlbWVudC5yZW1vdmVDbGFzcyggXCJ1aS10YWJzIHVpLXdpZGdldCB1aS13aWRnZXQtY29udGVudCB1aS1jb3JuZXItYWxsIHVpLXRhYnMtY29sbGFwc2libGVcIiApO1xyXG5cclxuXHRcdHRoaXMudGFibGlzdFxyXG5cdFx0XHQucmVtb3ZlQ2xhc3MoIFwidWktdGFicy1uYXYgdWktaGVscGVyLXJlc2V0IHVpLWhlbHBlci1jbGVhcmZpeCB1aS13aWRnZXQtaGVhZGVyIHVpLWNvcm5lci1hbGxcIiApXHJcblx0XHRcdC5yZW1vdmVBdHRyKCBcInJvbGVcIiApO1xyXG5cclxuXHRcdHRoaXMuYW5jaG9yc1xyXG5cdFx0XHQucmVtb3ZlQ2xhc3MoIFwidWktdGFicy1hbmNob3JcIiApXHJcblx0XHRcdC5yZW1vdmVBdHRyKCBcInJvbGVcIiApXHJcblx0XHRcdC5yZW1vdmVBdHRyKCBcInRhYkluZGV4XCIgKVxyXG5cdFx0XHQucmVtb3ZlVW5pcXVlSWQoKTtcclxuXHJcblx0XHR0aGlzLnRhYnMuYWRkKCB0aGlzLnBhbmVscyApLmVhY2goZnVuY3Rpb24oKSB7XHJcblx0XHRcdGlmICggJC5kYXRhKCB0aGlzLCBcInVpLXRhYnMtZGVzdHJveVwiICkgKSB7XHJcblx0XHRcdFx0JCggdGhpcyApLnJlbW92ZSgpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdCQoIHRoaXMgKVxyXG5cdFx0XHRcdFx0LnJlbW92ZUNsYXNzKCBcInVpLXN0YXRlLWRlZmF1bHQgdWktc3RhdGUtYWN0aXZlIHVpLXN0YXRlLWRpc2FibGVkIFwiICtcclxuXHRcdFx0XHRcdFx0XCJ1aS1jb3JuZXItdG9wIHVpLWNvcm5lci1ib3R0b20gdWktd2lkZ2V0LWNvbnRlbnQgdWktdGFicy1hY3RpdmUgdWktdGFicy1wYW5lbFwiIClcclxuXHRcdFx0XHRcdC5yZW1vdmVBdHRyKCBcInRhYkluZGV4XCIgKVxyXG5cdFx0XHRcdFx0LnJlbW92ZUF0dHIoIFwiYXJpYS1saXZlXCIgKVxyXG5cdFx0XHRcdFx0LnJlbW92ZUF0dHIoIFwiYXJpYS1idXN5XCIgKVxyXG5cdFx0XHRcdFx0LnJlbW92ZUF0dHIoIFwiYXJpYS1zZWxlY3RlZFwiIClcclxuXHRcdFx0XHRcdC5yZW1vdmVBdHRyKCBcImFyaWEtbGFiZWxsZWRieVwiIClcclxuXHRcdFx0XHRcdC5yZW1vdmVBdHRyKCBcImFyaWEtaGlkZGVuXCIgKVxyXG5cdFx0XHRcdFx0LnJlbW92ZUF0dHIoIFwiYXJpYS1leHBhbmRlZFwiIClcclxuXHRcdFx0XHRcdC5yZW1vdmVBdHRyKCBcInJvbGVcIiApO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLnRhYnMuZWFjaChmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIGxpID0gJCggdGhpcyApLFxyXG5cdFx0XHRcdHByZXYgPSBsaS5kYXRhKCBcInVpLXRhYnMtYXJpYS1jb250cm9sc1wiICk7XHJcblx0XHRcdGlmICggcHJldiApIHtcclxuXHRcdFx0XHRsaVxyXG5cdFx0XHRcdFx0LmF0dHIoIFwiYXJpYS1jb250cm9sc1wiLCBwcmV2IClcclxuXHRcdFx0XHRcdC5yZW1vdmVEYXRhKCBcInVpLXRhYnMtYXJpYS1jb250cm9sc1wiICk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0bGkucmVtb3ZlQXR0ciggXCJhcmlhLWNvbnRyb2xzXCIgKTtcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5wYW5lbHMuc2hvdygpO1xyXG5cclxuXHRcdGlmICggdGhpcy5vcHRpb25zLmhlaWdodFN0eWxlICE9PSBcImNvbnRlbnRcIiApIHtcclxuXHRcdFx0dGhpcy5wYW5lbHMuY3NzKCBcImhlaWdodFwiLCBcIlwiICk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0ZW5hYmxlOiBmdW5jdGlvbiggaW5kZXggKSB7XHJcblx0XHR2YXIgZGlzYWJsZWQgPSB0aGlzLm9wdGlvbnMuZGlzYWJsZWQ7XHJcblx0XHRpZiAoIGRpc2FibGVkID09PSBmYWxzZSApIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggaW5kZXggPT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0ZGlzYWJsZWQgPSBmYWxzZTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdGluZGV4ID0gdGhpcy5fZ2V0SW5kZXgoIGluZGV4ICk7XHJcblx0XHRcdGlmICggJC5pc0FycmF5KCBkaXNhYmxlZCApICkge1xyXG5cdFx0XHRcdGRpc2FibGVkID0gJC5tYXAoIGRpc2FibGVkLCBmdW5jdGlvbiggbnVtICkge1xyXG5cdFx0XHRcdFx0cmV0dXJuIG51bSAhPT0gaW5kZXggPyBudW0gOiBudWxsO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGRpc2FibGVkID0gJC5tYXAoIHRoaXMudGFicywgZnVuY3Rpb24oIGxpLCBudW0gKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gbnVtICE9PSBpbmRleCA/IG51bSA6IG51bGw7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHRoaXMuX3NldHVwRGlzYWJsZWQoIGRpc2FibGVkICk7XHJcblx0fSxcclxuXHJcblx0ZGlzYWJsZTogZnVuY3Rpb24oIGluZGV4ICkge1xyXG5cdFx0dmFyIGRpc2FibGVkID0gdGhpcy5vcHRpb25zLmRpc2FibGVkO1xyXG5cdFx0aWYgKCBkaXNhYmxlZCA9PT0gdHJ1ZSApIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICggaW5kZXggPT09IHVuZGVmaW5lZCApIHtcclxuXHRcdFx0ZGlzYWJsZWQgPSB0cnVlO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0aW5kZXggPSB0aGlzLl9nZXRJbmRleCggaW5kZXggKTtcclxuXHRcdFx0aWYgKCAkLmluQXJyYXkoIGluZGV4LCBkaXNhYmxlZCApICE9PSAtMSApIHtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKCAkLmlzQXJyYXkoIGRpc2FibGVkICkgKSB7XHJcblx0XHRcdFx0ZGlzYWJsZWQgPSAkLm1lcmdlKCBbIGluZGV4IF0sIGRpc2FibGVkICkuc29ydCgpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdGRpc2FibGVkID0gWyBpbmRleCBdO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHR0aGlzLl9zZXR1cERpc2FibGVkKCBkaXNhYmxlZCApO1xyXG5cdH0sXHJcblxyXG5cdGxvYWQ6IGZ1bmN0aW9uKCBpbmRleCwgZXZlbnQgKSB7XHJcblx0XHRpbmRleCA9IHRoaXMuX2dldEluZGV4KCBpbmRleCApO1xyXG5cdFx0dmFyIHRoYXQgPSB0aGlzLFxyXG5cdFx0XHR0YWIgPSB0aGlzLnRhYnMuZXEoIGluZGV4ICksXHJcblx0XHRcdGFuY2hvciA9IHRhYi5maW5kKCBcIi51aS10YWJzLWFuY2hvclwiICksXHJcblx0XHRcdHBhbmVsID0gdGhpcy5fZ2V0UGFuZWxGb3JUYWIoIHRhYiApLFxyXG5cdFx0XHRldmVudERhdGEgPSB7XHJcblx0XHRcdFx0dGFiOiB0YWIsXHJcblx0XHRcdFx0cGFuZWw6IHBhbmVsXHJcblx0XHRcdH07XHJcblxyXG5cdFx0Ly8gbm90IHJlbW90ZVxyXG5cdFx0aWYgKCBpc0xvY2FsKCBhbmNob3JbIDAgXSApICkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy54aHIgPSAkLmFqYXgoIHRoaXMuX2FqYXhTZXR0aW5ncyggYW5jaG9yLCBldmVudCwgZXZlbnREYXRhICkgKTtcclxuXHJcblx0XHQvLyBzdXBwb3J0OiBqUXVlcnkgPDEuOFxyXG5cdFx0Ly8galF1ZXJ5IDwxLjggcmV0dXJucyBmYWxzZSBpZiB0aGUgcmVxdWVzdCBpcyBjYW5jZWxlZCBpbiBiZWZvcmVTZW5kLFxyXG5cdFx0Ly8gYnV0IGFzIG9mIDEuOCwgJC5hamF4KCkgYWx3YXlzIHJldHVybnMgYSBqcVhIUiBvYmplY3QuXHJcblx0XHRpZiAoIHRoaXMueGhyICYmIHRoaXMueGhyLnN0YXR1c1RleHQgIT09IFwiY2FuY2VsZWRcIiApIHtcclxuXHRcdFx0dGFiLmFkZENsYXNzKCBcInVpLXRhYnMtbG9hZGluZ1wiICk7XHJcblx0XHRcdHBhbmVsLmF0dHIoIFwiYXJpYS1idXN5XCIsIFwidHJ1ZVwiICk7XHJcblxyXG5cdFx0XHR0aGlzLnhoclxyXG5cdFx0XHRcdC5zdWNjZXNzKGZ1bmN0aW9uKCByZXNwb25zZSApIHtcclxuXHRcdFx0XHRcdC8vIHN1cHBvcnQ6IGpRdWVyeSA8MS44XHJcblx0XHRcdFx0XHQvLyBodHRwOi8vYnVncy5qcXVlcnkuY29tL3RpY2tldC8xMTc3OFxyXG5cdFx0XHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdFx0cGFuZWwuaHRtbCggcmVzcG9uc2UgKTtcclxuXHRcdFx0XHRcdFx0dGhhdC5fdHJpZ2dlciggXCJsb2FkXCIsIGV2ZW50LCBldmVudERhdGEgKTtcclxuXHRcdFx0XHRcdH0sIDEgKTtcclxuXHRcdFx0XHR9KVxyXG5cdFx0XHRcdC5jb21wbGV0ZShmdW5jdGlvbigganFYSFIsIHN0YXR1cyApIHtcclxuXHRcdFx0XHRcdC8vIHN1cHBvcnQ6IGpRdWVyeSA8MS44XHJcblx0XHRcdFx0XHQvLyBodHRwOi8vYnVncy5qcXVlcnkuY29tL3RpY2tldC8xMTc3OFxyXG5cdFx0XHRcdFx0c2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdFx0aWYgKCBzdGF0dXMgPT09IFwiYWJvcnRcIiApIHtcclxuXHRcdFx0XHRcdFx0XHR0aGF0LnBhbmVscy5zdG9wKCBmYWxzZSwgdHJ1ZSApO1xyXG5cdFx0XHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdFx0XHR0YWIucmVtb3ZlQ2xhc3MoIFwidWktdGFicy1sb2FkaW5nXCIgKTtcclxuXHRcdFx0XHRcdFx0cGFuZWwucmVtb3ZlQXR0ciggXCJhcmlhLWJ1c3lcIiApO1xyXG5cclxuXHRcdFx0XHRcdFx0aWYgKCBqcVhIUiA9PT0gdGhhdC54aHIgKSB7XHJcblx0XHRcdFx0XHRcdFx0ZGVsZXRlIHRoYXQueGhyO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9LCAxICk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHR9XHJcblx0fSxcclxuXHJcblx0X2FqYXhTZXR0aW5nczogZnVuY3Rpb24oIGFuY2hvciwgZXZlbnQsIGV2ZW50RGF0YSApIHtcclxuXHRcdHZhciB0aGF0ID0gdGhpcztcclxuXHRcdHJldHVybiB7XHJcblx0XHRcdHVybDogYW5jaG9yLmF0dHIoIFwiaHJlZlwiICksXHJcblx0XHRcdGJlZm9yZVNlbmQ6IGZ1bmN0aW9uKCBqcVhIUiwgc2V0dGluZ3MgKSB7XHJcblx0XHRcdFx0cmV0dXJuIHRoYXQuX3RyaWdnZXIoIFwiYmVmb3JlTG9hZFwiLCBldmVudCxcclxuXHRcdFx0XHRcdCQuZXh0ZW5kKCB7IGpxWEhSIDoganFYSFIsIGFqYXhTZXR0aW5nczogc2V0dGluZ3MgfSwgZXZlbnREYXRhICkgKTtcclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHR9LFxyXG5cclxuXHRfZ2V0UGFuZWxGb3JUYWI6IGZ1bmN0aW9uKCB0YWIgKSB7XHJcblx0XHR2YXIgaWQgPSAkKCB0YWIgKS5hdHRyKCBcImFyaWEtY29udHJvbHNcIiApO1xyXG5cdFx0cmV0dXJuIHRoaXMuZWxlbWVudC5maW5kKCB0aGlzLl9zYW5pdGl6ZVNlbGVjdG9yKCBcIiNcIiArIGlkICkgKTtcclxuXHR9XHJcbn0pO1xyXG5cclxufSkoIGpRdWVyeSApO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB1bmRlZmluZWQgKSB7XHJcblxyXG59KSggalF1ZXJ5ICk7XHJcblxyXG4oZnVuY3Rpb24oICQsIHdpbmRvdyApIHtcclxuXHJcblx0JC5tb2JpbGUuaW9zb3JpZW50YXRpb25maXhFbmFibGVkID0gdHJ1ZTtcclxuXHJcblx0Ly8gVGhpcyBmaXggYWRkcmVzc2VzIGFuIGlPUyBidWcsIHNvIHJldHVybiBlYXJseSBpZiB0aGUgVUEgY2xhaW1zIGl0J3Mgc29tZXRoaW5nIGVsc2UuXHJcblx0dmFyIHVhID0gbmF2aWdhdG9yLnVzZXJBZ2VudCxcclxuXHRcdHpvb20sXHJcblx0XHRldnQsIHgsIHksIHosIGFpZztcclxuXHRpZiAoICEoIC9pUGhvbmV8aVBhZHxpUG9kLy50ZXN0KCBuYXZpZ2F0b3IucGxhdGZvcm0gKSAmJiAvT1MgWzEtNV1fWzAtOV9dKiBsaWtlIE1hYyBPUyBYL2kudGVzdCggdWEgKSAmJiB1YS5pbmRleE9mKCBcIkFwcGxlV2ViS2l0XCIgKSA+IC0xICkgKSB7XHJcblx0XHQkLm1vYmlsZS5pb3NvcmllbnRhdGlvbmZpeEVuYWJsZWQgPSBmYWxzZTtcclxuXHRcdHJldHVybjtcclxuXHR9XHJcblxyXG5cdHpvb20gPSAkLm1vYmlsZS56b29tO1xyXG5cclxuXHRmdW5jdGlvbiBjaGVja1RpbHQoIGUgKSB7XHJcblx0XHRldnQgPSBlLm9yaWdpbmFsRXZlbnQ7XHJcblx0XHRhaWcgPSBldnQuYWNjZWxlcmF0aW9uSW5jbHVkaW5nR3Jhdml0eTtcclxuXHJcblx0XHR4ID0gTWF0aC5hYnMoIGFpZy54ICk7XHJcblx0XHR5ID0gTWF0aC5hYnMoIGFpZy55ICk7XHJcblx0XHR6ID0gTWF0aC5hYnMoIGFpZy56ICk7XHJcblxyXG5cdFx0Ly8gSWYgcG9ydHJhaXQgb3JpZW50YXRpb24gYW5kIGluIG9uZSBvZiB0aGUgZGFuZ2VyIHpvbmVzXHJcblx0XHRpZiAoICF3aW5kb3cub3JpZW50YXRpb24gJiYgKCB4ID4gNyB8fCAoICggeiA+IDYgJiYgeSA8IDggfHwgeiA8IDggJiYgeSA+IDYgKSAmJiB4ID4gNSApICkgKSB7XHJcblx0XHRcdFx0aWYgKCB6b29tLmVuYWJsZWQgKSB7XHJcblx0XHRcdFx0XHR6b29tLmRpc2FibGUoKTtcclxuXHRcdFx0XHR9XHJcblx0XHR9XHRlbHNlIGlmICggIXpvb20uZW5hYmxlZCApIHtcclxuXHRcdFx0XHR6b29tLmVuYWJsZSgpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0JC5tb2JpbGUuZG9jdW1lbnQub24oIFwibW9iaWxlaW5pdFwiLCBmdW5jdGlvbigpIHtcclxuXHRcdGlmICggJC5tb2JpbGUuaW9zb3JpZW50YXRpb25maXhFbmFibGVkICkge1xyXG5cdFx0XHQkLm1vYmlsZS53aW5kb3dcclxuXHRcdFx0XHQuYmluZCggXCJvcmllbnRhdGlvbmNoYW5nZS5pb3NvcmllbnRhdGlvbmZpeFwiLCB6b29tLmVuYWJsZSApXHJcblx0XHRcdFx0LmJpbmQoIFwiZGV2aWNlbW90aW9uLmlvc29yaWVudGF0aW9uZml4XCIsIGNoZWNrVGlsdCApO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG5cclxufSggalF1ZXJ5LCB0aGlzICkpO1xyXG5cclxuKGZ1bmN0aW9uKCAkLCB3aW5kb3csIHVuZGVmaW5lZCApIHtcclxuXHR2YXJcdCRodG1sID0gJCggXCJodG1sXCIgKSxcclxuXHRcdCR3aW5kb3cgPSAkLm1vYmlsZS53aW5kb3c7XHJcblxyXG5cdC8vcmVtb3ZlIGluaXRpYWwgYnVpbGQgY2xhc3MgKG9ubHkgcHJlc2VudCBvbiBmaXJzdCBwYWdlc2hvdylcclxuXHRmdW5jdGlvbiBoaWRlUmVuZGVyaW5nQ2xhc3MoKSB7XHJcblx0XHQkaHRtbC5yZW1vdmVDbGFzcyggXCJ1aS1tb2JpbGUtcmVuZGVyaW5nXCIgKTtcclxuXHR9XHJcblxyXG5cdC8vIHRyaWdnZXIgbW9iaWxlaW5pdCBldmVudCAtIHVzZWZ1bCBob29rIGZvciBjb25maWd1cmluZyAkLm1vYmlsZSBzZXR0aW5ncyBiZWZvcmUgdGhleSdyZSB1c2VkXHJcblx0JCggd2luZG93LmRvY3VtZW50ICkudHJpZ2dlciggXCJtb2JpbGVpbml0XCIgKTtcclxuXHJcblx0Ly8gc3VwcG9ydCBjb25kaXRpb25zXHJcblx0Ly8gaWYgZGV2aWNlIHN1cHBvcnQgY29uZGl0aW9uKHMpIGFyZW4ndCBtZXQsIGxlYXZlIHRoaW5ncyBhcyB0aGV5IGFyZSAtPiBhIGJhc2ljLCB1c2FibGUgZXhwZXJpZW5jZSxcclxuXHQvLyBvdGhlcndpc2UsIHByb2NlZWQgd2l0aCB0aGUgZW5oYW5jZW1lbnRzXHJcblx0aWYgKCAhJC5tb2JpbGUuZ3JhZGVBKCkgKSB7XHJcblx0XHRyZXR1cm47XHJcblx0fVxyXG5cclxuXHQvLyBvdmVycmlkZSBhamF4RW5hYmxlZCBvbiBwbGF0Zm9ybXMgdGhhdCBoYXZlIGtub3duIGNvbmZsaWN0cyB3aXRoIGhhc2ggaGlzdG9yeSB1cGRhdGVzXHJcblx0Ly8gb3IgZ2VuZXJhbGx5IHdvcmsgYmV0dGVyIGJyb3dzaW5nIGluIHJlZ3VsYXIgaHR0cCBmb3IgZnVsbCBwYWdlIHJlZnJlc2hlcyAoQkI1LCBPcGVyYSBNaW5pKVxyXG5cdGlmICggJC5tb2JpbGUuYWpheEJsYWNrbGlzdCApIHtcclxuXHRcdCQubW9iaWxlLmFqYXhFbmFibGVkID0gZmFsc2U7XHJcblx0fVxyXG5cclxuXHQvLyBBZGQgbW9iaWxlLCBpbml0aWFsIGxvYWQgXCJyZW5kZXJpbmdcIiBjbGFzc2VzIHRvIGRvY0VsXHJcblx0JGh0bWwuYWRkQ2xhc3MoIFwidWktbW9iaWxlIHVpLW1vYmlsZS1yZW5kZXJpbmdcIiApO1xyXG5cclxuXHQvLyBUaGlzIGlzIGEgZmFsbGJhY2suIElmIGFueXRoaW5nIGdvZXMgd3JvbmcgKEpTIGVycm9ycywgZXRjKSwgb3IgZXZlbnRzIGRvbid0IGZpcmUsXHJcblx0Ly8gdGhpcyBlbnN1cmVzIHRoZSByZW5kZXJpbmcgY2xhc3MgaXMgcmVtb3ZlZCBhZnRlciA1IHNlY29uZHMsIHNvIGNvbnRlbnQgaXMgdmlzaWJsZSBhbmQgYWNjZXNzaWJsZVxyXG5cdHNldFRpbWVvdXQoIGhpZGVSZW5kZXJpbmdDbGFzcywgNTAwMCApO1xyXG5cclxuXHQkLmV4dGVuZCggJC5tb2JpbGUsIHtcclxuXHRcdC8vIGZpbmQgYW5kIGVuaGFuY2UgdGhlIHBhZ2VzIGluIHRoZSBkb20gYW5kIHRyYW5zaXRpb24gdG8gdGhlIGZpcnN0IHBhZ2UuXHJcblx0XHRpbml0aWFsaXplUGFnZTogZnVuY3Rpb24oKSB7XHJcblx0XHRcdC8vIGZpbmQgcHJlc2VudCBwYWdlc1xyXG5cdFx0XHR2YXIgcGF0aCA9ICQubW9iaWxlLnBhdGgsXHJcblx0XHRcdFx0JHBhZ2VzID0gJCggXCI6anFtRGF0YShyb2xlPSdwYWdlJyksIDpqcW1EYXRhKHJvbGU9J2RpYWxvZycpXCIgKSxcclxuXHRcdFx0XHRoYXNoID0gcGF0aC5zdHJpcEhhc2goIHBhdGguc3RyaXBRdWVyeVBhcmFtcyhwYXRoLnBhcnNlTG9jYXRpb24oKS5oYXNoKSApLFxyXG5cdFx0XHRcdHRoZUxvY2F0aW9uID0gJC5tb2JpbGUucGF0aC5wYXJzZUxvY2F0aW9uKCksXHJcblx0XHRcdFx0aGFzaFBhZ2UgPSBoYXNoID8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIGhhc2ggKSA6IHVuZGVmaW5lZDtcclxuXHJcblx0XHRcdC8vIGlmIG5vIHBhZ2VzIGFyZSBmb3VuZCwgY3JlYXRlIG9uZSB3aXRoIGJvZHkncyBpbm5lciBodG1sXHJcblx0XHRcdGlmICggISRwYWdlcy5sZW5ndGggKSB7XHJcblx0XHRcdFx0JHBhZ2VzID0gJCggXCJib2R5XCIgKS53cmFwSW5uZXIoIFwiPGRpdiBkYXRhLVwiICsgJC5tb2JpbGUubnMgKyBcInJvbGU9J3BhZ2UnPjwvZGl2PlwiICkuY2hpbGRyZW4oIDAgKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gYWRkIGRpYWxvZ3MsIHNldCBkYXRhLXVybCBhdHRyc1xyXG5cdFx0XHQkcGFnZXMuZWFjaChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHR2YXIgJHRoaXMgPSAkKCB0aGlzICk7XHJcblxyXG5cdFx0XHRcdC8vIHVubGVzcyB0aGUgZGF0YSB1cmwgaXMgYWxyZWFkeSBzZXQgc2V0IGl0IHRvIHRoZSBwYXRobmFtZVxyXG5cdFx0XHRcdGlmICggISR0aGlzWyAwIF0uZ2V0QXR0cmlidXRlKCBcImRhdGEtXCIgKyAkLm1vYmlsZS5ucyArIFwidXJsXCIgKSApIHtcclxuXHRcdFx0XHRcdCR0aGlzLmF0dHIoIFwiZGF0YS1cIiArICQubW9iaWxlLm5zICsgXCJ1cmxcIiwgJHRoaXMuYXR0ciggXCJpZFwiICkgfHxcclxuXHRcdFx0XHRcdFx0cGF0aC5jb252ZXJ0VXJsVG9EYXRhVXJsKCB0aGVMb2NhdGlvbi5wYXRobmFtZSArIHRoZUxvY2F0aW9uLnNlYXJjaCApICk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdC8vIGRlZmluZSBmaXJzdCBwYWdlIGluIGRvbSBjYXNlIG9uZSBiYWNrcyBvdXQgdG8gdGhlIGRpcmVjdG9yeSByb290IChub3QgYWx3YXlzIHRoZSBmaXJzdCBwYWdlIHZpc2l0ZWQsIGJ1dCBkZWZpbmVkIGFzIGZhbGxiYWNrKVxyXG5cdFx0XHQkLm1vYmlsZS5maXJzdFBhZ2UgPSAkcGFnZXMuZmlyc3QoKTtcclxuXHJcblx0XHRcdC8vIGRlZmluZSBwYWdlIGNvbnRhaW5lclxyXG5cdFx0XHQkLm1vYmlsZS5wYWdlQ29udGFpbmVyID0gJC5tb2JpbGUuZmlyc3RQYWdlXHJcblx0XHRcdFx0LnBhcmVudCgpXHJcblx0XHRcdFx0LmFkZENsYXNzKCBcInVpLW1vYmlsZS12aWV3cG9ydFwiIClcclxuXHRcdFx0XHQucGFnZWNvbnRhaW5lcigpO1xyXG5cclxuXHRcdFx0Ly8gaW5pdGlhbGl6ZSBuYXZpZ2F0aW9uIGV2ZW50cyBub3csIGFmdGVyIG1vYmlsZWluaXQgaGFzIG9jY3VycmVkIGFuZCB0aGUgcGFnZSBjb250YWluZXJcclxuXHRcdFx0Ly8gaGFzIGJlZW4gY3JlYXRlZCBidXQgYmVmb3JlIHRoZSByZXN0IG9mIHRoZSBsaWJyYXJ5IGlzIGFsZXJ0ZWQgdG8gdGhhdCBmYWN0XHJcblx0XHRcdCQubW9iaWxlLm5hdnJlYWR5RGVmZXJyZWQucmVzb2x2ZSgpO1xyXG5cclxuXHRcdFx0Ly8gYWxlcnQgbGlzdGVuZXJzIHRoYXQgdGhlIHBhZ2Vjb250YWluZXIgaGFzIGJlZW4gZGV0ZXJtaW5lZCBmb3IgYmluZGluZ1xyXG5cdFx0XHQvLyB0byBldmVudHMgdHJpZ2dlcmVkIG9uIGl0XHJcblx0XHRcdCR3aW5kb3cudHJpZ2dlciggXCJwYWdlY29udGFpbmVyY3JlYXRlXCIgKTtcclxuXHJcblx0XHRcdC8vIGN1ZSBwYWdlIGxvYWRpbmcgbWVzc2FnZVxyXG5cdFx0XHQkLm1vYmlsZS5sb2FkaW5nKCBcInNob3dcIiApO1xyXG5cclxuXHRcdFx0Ly9yZW1vdmUgaW5pdGlhbCBidWlsZCBjbGFzcyAob25seSBwcmVzZW50IG9uIGZpcnN0IHBhZ2VzaG93KVxyXG5cdFx0XHRoaWRlUmVuZGVyaW5nQ2xhc3MoKTtcclxuXHJcblx0XHRcdC8vIGlmIGhhc2hjaGFuZ2UgbGlzdGVuaW5nIGlzIGRpc2FibGVkLCB0aGVyZSdzIG5vIGhhc2ggZGVlcGxpbmssXHJcblx0XHRcdC8vIHRoZSBoYXNoIGlzIG5vdCB2YWxpZCAoY29udGFpbnMgbW9yZSB0aGFuIG9uZSAjIG9yIGRvZXMgbm90IHN0YXJ0IHdpdGggIylcclxuXHRcdFx0Ly8gb3IgdGhlcmUgaXMgbm8gcGFnZSB3aXRoIHRoYXQgaGFzaCwgY2hhbmdlIHRvIHRoZSBmaXJzdCBwYWdlIGluIHRoZSBET01cclxuXHRcdFx0Ly8gUmVtZW1iZXIsIGhvd2V2ZXIsIHRoYXQgdGhlIGhhc2ggY2FuIGFsc28gYmUgYSBwYXRoIVxyXG5cdFx0XHRpZiAoICEgKCAkLm1vYmlsZS5oYXNoTGlzdGVuaW5nRW5hYmxlZCAmJlxyXG5cdFx0XHRcdCQubW9iaWxlLnBhdGguaXNIYXNoVmFsaWQoIGxvY2F0aW9uLmhhc2ggKSAmJlxyXG5cdFx0XHRcdCggJCggaGFzaFBhZ2UgKS5pcyggXCI6anFtRGF0YShyb2xlPSdwYWdlJylcIiApIHx8XHJcblx0XHRcdFx0XHQkLm1vYmlsZS5wYXRoLmlzUGF0aCggaGFzaCApIHx8XHJcblx0XHRcdFx0XHRoYXNoID09PSAkLm1vYmlsZS5kaWFsb2dIYXNoS2V5ICkgKSApIHtcclxuXHJcblx0XHRcdFx0Ly8gbWFrZSBzdXJlIHRvIHNldCBpbml0aWFsIHBvcHN0YXRlIHN0YXRlIGlmIGl0IGV4aXN0c1xyXG5cdFx0XHRcdC8vIHNvIHRoYXQgbmF2aWdhdGlvbiBiYWNrIHRvIHRoZSBpbml0aWFsIHBhZ2Ugd29ya3MgcHJvcGVybHlcclxuXHRcdFx0XHRpZiAoICQuZXZlbnQuc3BlY2lhbC5uYXZpZ2F0ZS5pc1B1c2hTdGF0ZUVuYWJsZWQoKSApIHtcclxuXHRcdFx0XHRcdCQubW9iaWxlLm5hdmlnYXRlLm5hdmlnYXRvci5zcXVhc2goIHBhdGgucGFyc2VMb2NhdGlvbigpLmhyZWYgKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdCQubW9iaWxlLmNoYW5nZVBhZ2UoICQubW9iaWxlLmZpcnN0UGFnZSwge1xyXG5cdFx0XHRcdFx0dHJhbnNpdGlvbjogXCJub25lXCIsXHJcblx0XHRcdFx0XHRyZXZlcnNlOiB0cnVlLFxyXG5cdFx0XHRcdFx0Y2hhbmdlSGFzaDogZmFsc2UsXHJcblx0XHRcdFx0XHRmcm9tSGFzaENoYW5nZTogdHJ1ZVxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdC8vIHRyaWdnZXIgaGFzaGNoYW5nZSBvciBuYXZpZ2F0ZSB0byBzcXVhc2ggYW5kIHJlY29yZCB0aGUgY29ycmVjdFxyXG5cdFx0XHRcdC8vIGhpc3RvcnkgZW50cnkgZm9yIGFuIGluaXRpYWwgaGFzaCBwYXRoXHJcblx0XHRcdFx0aWYgKCAhJC5ldmVudC5zcGVjaWFsLm5hdmlnYXRlLmlzUHVzaFN0YXRlRW5hYmxlZCgpICkge1xyXG5cdFx0XHRcdFx0JHdpbmRvdy50cmlnZ2VyKCBcImhhc2hjaGFuZ2VcIiwgW3RydWVdICk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdC8vIFRPRE8gZmlndXJlIG91dCBob3cgdG8gc2ltcGxpZnkgdGhpcyBpbnRlcmFjdGlvbiB3aXRoIHRoZSBpbml0aWFsIGhpc3RvcnkgZW50cnlcclxuXHRcdFx0XHRcdC8vIGF0IHRoZSBib3R0b20ganMvbmF2aWdhdGUvbmF2aWdhdGUuanNcclxuXHRcdFx0XHRcdCQubW9iaWxlLm5hdmlnYXRlLmhpc3Rvcnkuc3RhY2sgPSBbXTtcclxuXHRcdFx0XHRcdCQubW9iaWxlLm5hdmlnYXRlKCAkLm1vYmlsZS5wYXRoLmlzUGF0aCggbG9jYXRpb24uaGFzaCApID8gbG9jYXRpb24uaGFzaCA6IGxvY2F0aW9uLmhyZWYgKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9KTtcclxuXHJcblx0JChmdW5jdGlvbigpIHtcclxuXHRcdC8vUnVuIGlubGluZVNWRyBzdXBwb3J0IHRlc3RcclxuXHRcdCQuc3VwcG9ydC5pbmxpbmVTVkcoKTtcclxuXHJcblx0XHQvLyBjaGVjayB3aGljaCBzY3JvbGxUb3AgdmFsdWUgc2hvdWxkIGJlIHVzZWQgYnkgc2Nyb2xsaW5nIHRvIDEgaW1tZWRpYXRlbHkgYXQgZG9tcmVhZHlcclxuXHRcdC8vIHRoZW4gY2hlY2sgd2hhdCB0aGUgc2Nyb2xsIHRvcCBpcy4gQW5kcm9pZCB3aWxsIHJlcG9ydCAwLi4uIG90aGVycyAxXHJcblx0XHQvLyBub3RlIHRoYXQgdGhpcyBpbml0aWFsIHNjcm9sbCB3b24ndCBoaWRlIHRoZSBhZGRyZXNzIGJhci4gSXQncyBqdXN0IGZvciB0aGUgY2hlY2suXHJcblxyXG5cdFx0Ly8gaGlkZSBpT1MgYnJvd3NlciBjaHJvbWUgb24gbG9hZCBpZiBoaWRlVXJsQmFyIGlzIHRydWUgdGhpcyBpcyB0byB0cnkgYW5kIGRvIGl0IGFzIHNvb24gYXMgcG9zc2libGVcclxuXHRcdGlmICggJC5tb2JpbGUuaGlkZVVybEJhciApIHtcclxuXHRcdFx0d2luZG93LnNjcm9sbFRvKCAwLCAxICk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gaWYgZGVmYXVsdEhvbWVTY3JvbGwgaGFzbid0IGJlZW4gc2V0IHlldCwgc2VlIGlmIHNjcm9sbFRvcCBpcyAxXHJcblx0XHQvLyBpdCBzaG91bGQgYmUgMSBpbiBtb3N0IGJyb3dzZXJzLCBidXQgYW5kcm9pZCB0cmVhdHMgMSBhcyAwIChmb3IgaGlkaW5nIGFkZHIgYmFyKVxyXG5cdFx0Ly8gc28gaWYgaXQncyAxLCB1c2UgMCBmcm9tIG5vdyBvblxyXG5cdFx0JC5tb2JpbGUuZGVmYXVsdEhvbWVTY3JvbGwgPSAoICEkLnN1cHBvcnQuc2Nyb2xsVG9wIHx8ICQubW9iaWxlLndpbmRvdy5zY3JvbGxUb3AoKSA9PT0gMSApID8gMCA6IDE7XHJcblxyXG5cdFx0Ly9kb20tcmVhZHkgaW5pdHNcclxuXHRcdGlmICggJC5tb2JpbGUuYXV0b0luaXRpYWxpemVQYWdlICkge1xyXG5cdFx0XHQkLm1vYmlsZS5pbml0aWFsaXplUGFnZSgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIHdpbmRvdyBsb2FkIGV2ZW50XHJcblx0XHQvLyBoaWRlIGlPUyBicm93c2VyIGNocm9tZSBvbiBsb2FkIGlmIGhpZGVVcmxCYXIgaXMgdHJ1ZSB0aGlzIGlzIGFzIGZhbGwgYmFjayBpbmNhc2Ugd2Ugd2VyZSB0b28gZWFybHkgYmVmb3JlXHJcblx0XHRpZiAoICQubW9iaWxlLmhpZGVVcmxCYXIgKSB7XHJcblx0XHRcdCR3aW5kb3cubG9hZCggJC5tb2JpbGUuc2lsZW50U2Nyb2xsICk7XHJcblx0XHR9XHJcblxyXG5cdFx0aWYgKCAhJC5zdXBwb3J0LmNzc1BvaW50ZXJFdmVudHMgKSB7XHJcblx0XHRcdC8vIElFIGFuZCBPcGVyYSBkb24ndCBzdXBwb3J0IENTUyBwb2ludGVyLWV2ZW50czogbm9uZSB0aGF0IHdlIHVzZSB0byBkaXNhYmxlIGxpbmstYmFzZWQgYnV0dG9uc1xyXG5cdFx0XHQvLyBieSBhZGRpbmcgdGhlICd1aS1kaXNhYmxlZCcgY2xhc3MgdG8gdGhlbS4gVXNpbmcgYSBKYXZhU2NyaXB0IHdvcmthcm91bmQgZm9yIHRob3NlIGJyb3dzZXIuXHJcblx0XHRcdC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9qcXVlcnkvanF1ZXJ5LW1vYmlsZS9pc3N1ZXMvMzU1OFxyXG5cclxuXHRcdFx0Ly8gREVQUkVDQVRFRCBhcyBvZiAxLjQuMCAtIHJlbW92ZSB1aS1kaXNhYmxlZCBhZnRlciAxLjQuMCByZWxlYXNlXHJcblx0XHRcdC8vIG9ubHkgdWktc3RhdGUtZGlzYWJsZWQgc2hvdWxkIGJlIHByZXNlbnQgdGhlcmVhZnRlclxyXG5cdFx0XHQkLm1vYmlsZS5kb2N1bWVudC5kZWxlZ2F0ZSggXCIudWktc3RhdGUtZGlzYWJsZWQsLnVpLWRpc2FibGVkXCIsIFwidmNsaWNrXCIsXHJcblx0XHRcdFx0ZnVuY3Rpb24oIGUgKSB7XHJcblx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdFx0XHRlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0KTtcclxuXHRcdH1cclxuXHR9KTtcclxufSggalF1ZXJ5LCB0aGlzICkpO1xyXG5cclxuXHJcbn0pKTtcclxuXG59LmNhbGwod2luZG93KSk7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9leHRlcm5hbC9qcXVlcnkvc2NyaXB0cy9qcXVlcnkubW9iaWxlLmpzXG4vLyBtb2R1bGUgaWQgPSAwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8vLyA8cmVmZXJlbmNlIHR5cGVzPVwiYmFja2JvbmVcIiAvPlxyXG5cclxubmFtZXNwYWNlIENEUC5GcmFtZXdvcmsge1xyXG5cclxuICAgIC8vIEJhY2tib25lIHNob3J0IGN1dFxyXG4gICAgZXhwb3J0IHR5cGUgIE1vZGVsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA9IEJhY2tib25lLk1vZGVsO1xyXG4gICAgZXhwb3J0IGNvbnN0IE1vZGVsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA9IEJhY2tib25lLk1vZGVsO1xyXG4gICAgZXhwb3J0IHR5cGUgIENvbGxlY3Rpb248VE1vZGVsIGV4dGVuZHMgTW9kZWw+ICAgICAgICAgICA9IEJhY2tib25lLkNvbGxlY3Rpb248VE1vZGVsPjtcclxuICAgIGV4cG9ydCBjb25zdCBDb2xsZWN0aW9uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPSBCYWNrYm9uZS5Db2xsZWN0aW9uO1xyXG4gICAgZXhwb3J0IHR5cGUgIFZpZXc8VE1vZGVsIGV4dGVuZHMgTW9kZWwgPSBNb2RlbD4gICAgICAgICA9IEJhY2tib25lLlZpZXc8VE1vZGVsPjtcclxuICAgIGV4cG9ydCBjb25zdCBWaWV3ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPSBCYWNrYm9uZS5WaWV3O1xyXG4gICAgZXhwb3J0IHR5cGUgIEV2ZW50cyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA9IEJhY2tib25lLkV2ZW50cztcclxuICAgIGV4cG9ydCBjb25zdCBFdmVudHMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPSBCYWNrYm9uZS5FdmVudHM7XHJcbiAgICBleHBvcnQgdHlwZSBNb2RlbFNldE9wdGlvbnMgICAgICAgICAgICAgICAgICAgICAgICAgICAgID0gQmFja2JvbmUuTW9kZWxTZXRPcHRpb25zO1xyXG4gICAgZXhwb3J0IHR5cGUgTW9kZWxGZXRjaE9wdGlvbnMgICAgICAgICAgICAgICAgICAgICAgICAgICA9IEJhY2tib25lLk1vZGVsRmV0Y2hPcHRpb25zO1xyXG4gICAgZXhwb3J0IHR5cGUgTW9kZWxTYXZlT3B0aW9ucyAgICAgICAgICAgICAgICAgICAgICAgICAgICA9IEJhY2tib25lLk1vZGVsU2F2ZU9wdGlvbnM7XHJcbiAgICBleHBvcnQgdHlwZSBNb2RlbERlc3Ryb3lPcHRpb25zICAgICAgICAgICAgICAgICAgICAgICAgID0gQmFja2JvbmUuTW9kZWxEZXN0cm95T3B0aW9ucztcclxuICAgIGV4cG9ydCB0eXBlIFZpZXdPcHRpb25zPFRNb2RlbCBleHRlbmRzIE1vZGVsID0gTW9kZWw+ICAgPSBCYWNrYm9uZS5WaWV3T3B0aW9uczxUTW9kZWw+O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICogQHR5cGUgIFBhZ2VUcmFuc2l0aW9uRGlyZWN0aW9uXHJcbiAgICAgKiBAYnJpZWYgZGlyZWN0aW9uIGRlZmluaXRpb25zLlxyXG4gICAgICpcclxuICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgKiBAdHlwZSAgUGFnZVRyYW5zaXRpb25EaXJlY3Rpb25cclxuICAgICAqIEBicmllZiDpgbfnp7vmlrnlkJHjga7lrprnvqkuXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCB0eXBlIFBhZ2VUcmFuc2l0aW9uRGlyZWN0aW9uID0gXCJiYWNrXCIgfCBcImZvcndhcmRcIiB8IFwic2FtZVwiIHwgXCJ1bmtub3duXCI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgKiBAaW50ZXJmYWNlIFNob3dFdmVudERhdGFcclxuICAgICAqIEBicmllZiAgICAgQXJndW1lbnQgb2Ygb25TaG93L29uQmVmb3JlU2hvdyBtZXRob2QuXHJcbiAgICAgKlxyXG4gICAgICogXFx+amFwYW5lc2VcclxuICAgICAqIEBpbnRlcmZhY2UgU2hvd0V2ZW50RGF0YVxyXG4gICAgICogQGJyaWVmICAgICBvblNob3cvb25CZWZvcmVTaG93IOOBp+a4oeOBleOCjOOCi+W8leaVsFxyXG4gICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIFNob3dFdmVudERhdGEge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBBIGpRdWVyeSBjb2xsZWN0aW9uIG9iamVjdCB0aGF0IGNvbnRhaW5zIHRoZSBzb3VyY2UgcGFnZSBET00gZWxlbWVudC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICog6YG356e75YmN44Gu55S76Z2i5oOF5aCx44KS5qC857SNXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJldlBhZ2U6IEpRdWVyeTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIEEgalF1ZXJ5IGNvbGxlY3Rpb24gb2JqZWN0IHRoYXQgY29udGFpbnMgdGhlIGRlc3RpbmF0aW9uIHBhZ2UgRE9NIGVsZW1lbnQuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIOmBt+enu+W+jOOBrueUu+mdouaDheWgseOCkuagvOe0jVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRvUGFnZTogSlF1ZXJ5O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogcGFnZSB0cmFuc2l0aW9uIGRpcmVjdGlvbi5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICog6YG356e75pa55ZCR44KS5qC857SNXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZGlyZWN0aW9uOiBQYWdlVHJhbnNpdGlvbkRpcmVjdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAqIEBpbnRlcmZhY2UgSGlkZUV2ZW50RGF0YVxyXG4gICAgICogQGJyaWVmICAgICBBcmd1bWVudCBvZiBvbkhpZGUvb25CZWZvcmVIaWRlIG1ldGhvZC5cclxuICAgICAqXHJcbiAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICogQGludGVyZmFjZSBIaWRlRXZlbnREYXRhXHJcbiAgICAgKiBAYnJpZWYgICAgIG9uSGlkZS9vbkJlZm9yZUhpZGUg44Gn5rih44GV44KM44KL5byV5pWwXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSGlkZUV2ZW50RGF0YSB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIEEgalF1ZXJ5IGNvbGxlY3Rpb24gb2JqZWN0IHRoYXQgY29udGFpbnMgdGhlIHBhZ2UgRE9NIGVsZW1lbnQgdG8gd2hpY2ggd2UganVzdCB0cmFuc2l0aW9uZWQuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIOODiOODqeODs+OCuOOCt+ODp+ODs+WujOS6huOBl+OBn+eUu+mdouaDheWgseOCkuagvOe0jVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG5leHRQYWdlOiBKUXVlcnk7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBBIGpRdWVyeSBjb2xsZWN0aW9uIG9iamVjdCB0aGF0IGNvbnRhaW5zIHRoZSBkZXN0aW5hdGlvbiBwYWdlIERPTSBlbGVtZW50LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiDpgbfnp7vlvozjga7nlLvpnaLmg4XloLHjgpLmoLzntI1cclxuICAgICAgICAgKi9cclxuICAgICAgICB0b1BhZ2U6IEpRdWVyeTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIEEgalF1ZXJ5IGNvbGxlY3Rpb24gb2JqZWN0IHRoYXQgY29udGFpbnMgdGhlIGZyb20gcGFnZSBET00gZWxlbWVudC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICog6YG356e75YmN44Gu55S76Z2i5oOF5aCx44KS5qC857SNXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJldlBhZ2U6IEpRdWVyeTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIHBhZ2UgdHJhbnNpdGlvbiBkaXJlY3Rpb24uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIOmBt+enu+aWueWQkeOCkuagvOe0jVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGRpcmVjdGlvbjogUGFnZVRyYW5zaXRpb25EaXJlY3Rpb247XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgKiBAaW50ZXJmYWNlIEludGVudFxyXG4gICAgICogQGJyaWVmICAgICBEZWxlZ2F0ZSBpbnRlcmZhY2Ugb2YgYWRkaXRpb25hbCBkYXRhIGZvciBQYWdlIGNsYXNzLlxyXG4gICAgICogICAgICAgICAgICBDbGllbnQgY2FuIGRlZmluZSBleHRlbmQgdHlwZSBmcm9tIGl0LlxyXG4gICAgICpcclxuICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgKiBAaW50ZXJmYWNlIEludGVudFxyXG4gICAgICogQGJyaWVmICAgICDku7vmhI/jga7mg4XloLHjgpLmoLzntI3jgZnjgovjgqTjg7Pjgr/jg7zjg5XjgqfjgqTjgrlcclxuICAgICAqICAgICAgICAgICAgUGFnZSDjgavmuKHjgZXjgozjgovjg4fjg7zjgr/jgILmi6HlvLXjgZfjgabkvb/nlKjlj6/og71cclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJbnRlbnQge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBhbnkgcGFyYW1ldGVyLlxyXG4gICAgICAgICAqIHBhcmFtc1tcInF1ZXJ5UGFyYW1zXCJdIGlzIHVzZWQgYnkgZnJhbWV3b3JrIGZvciBxdWVyeSBwYXJhbWV0ZXJzLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiDku7vmhI/jga7jg5Hjg6njg6Hjg7zjgr9cclxuICAgICAgICAgKiBwYXJhbXNbXCJxdWVyeVBhcmFtc1wiXSDjgavjga/jgIFxdWVyeSBwYXJhbWV0ZXIg44GM44OV44Os44O844Og44Ov44O844Kv44Gr44KI44KK5qC857SN44GV44KM44KL44CCXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcGFyYW1zPzogb2JqZWN0O1xyXG4gICAgICAgIC8vISBhbnlcclxuICAgICAgICBba2V5OiBzdHJpbmddOiBhbnk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgKiBAaW50ZXJmYWNlIFBhZ2VTdGFja1xyXG4gICAgICogQGJyaWVmIEFyZ3VtZW50cyBpbnRlcmZhY2Ugb2YgUm91dGVyLnJlZ2lzdGVyUGFnZVN0YWNrKCkgbWV0aG9kLlxyXG4gICAgICpcclxuICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgKiBAaW50ZXJmYWNlIFBhZ2VTdGFja1xyXG4gICAgICogQGJyaWVmIFJvdXRlci5yZWdpc3RlclBhZ2VTdGFjaygpIOOBq+aMh+WumuOBmeOCi+OCpOODs+OCv+ODvOODleOCp+OCpOOCuVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIFBhZ2VTdGFjayB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIHJvdXRlIHN0cmluZywgaXQgY2FuIGJlIHJlZ3VsYXIgZXhwcmVzc2lvbi5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICog44Or44O844OG44Kj44Oz44Kw5paH5a2X5YiXIC8g5q2j6KaP6KGo54++XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcm91dGU6IHN0cmluZztcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIHBhZ2UgdGl0bGUgc3RyaW5nLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiDjg5rjg7zjgrjjgr/jgqTjg4jjg6vmloflrZfliJdcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aXRsZT86IHN0cmluZztcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIHBhZ2UgdHJhbnNpdGlvbiBzdHJpbmcuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIOmBt+enu+ODiOODqeODs+OCuOOCt+ODp+ODs+aWh+Wtl+WIl1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRyYW5zaXRpb24/OiBzdHJpbmc7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgKiBAaW50ZXJmYWNlIFN1YkZsb3dQYXJhbVxyXG4gICAgICogQGJyaWVmIGludGVyZmFjZSBvZiBSb3V0ZXIncyBTdWIgRmxvdyBwYXJhbWVudGVycy5cclxuICAgICAqXHJcbiAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICogQGludGVyZmFjZSBTdWJGbG93UGFyYW1cclxuICAgICAqIEBicmllZiBSb3V0ZXIg44GuIFN1YiBGbG93IOOBq+aMh+WumuOBmeOCi+ODkeODqeODoeODvOOCv+OCpOODs+OCv+ODvOODleOCp+OCpOOCuVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIFN1YkZsb3dQYXJhbSB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIHNldCBzdWIgZmxvdyBvcGVyYXRpb24gW2JlZ2luIHwgZW5kXS5cclxuICAgICAgICAgKiBXaGVuIFwiYmVnaW5cIiBpcyBzZXQgYW5kIHRoZW4gXCJlbmRcIiBpcyBjYWxsZWQsIGl0IGNhbiByZXR1cm4gdG8gdGhlIFVSTCBzcGVjaWZpZWQgYXMgXCJiYXNlXCIgd2l0aCB0cmVhdGluZyBicm93c2VyIGhpc3RvcnkuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIFN1YiBGbG93IOWHpueQhuOCkuaMh+WumiBbYmVnaW4gfCBlbmRdXHJcbiAgICAgICAgICogXCJiZWdpblwiIOOBjOaMh+WumuOBleOCjOOAgeasoeOBqyBcImVuZFwiIOOCkuWRvOOBtuOBqOOBjeOAgVwiYmFzZVwiIOOBq+aMh+WumuOBl+OBnyB1cmwg44G+44Gn44OW44Op44Km44K25bGl5q2044KS44Gf44Gp44KL44CCXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb3BlcmF0aW9uOiBcImJlZ2luXCIgfCBcImVuZFwiO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogUGFnZSBVUkwvSGFzaCB1c2VkIGFzIHRoZSByZWZlcmVuY2UgcG9pbnQgb2YgU3ViIEZsb3cgaXMgc3BlY2lmaWVkLlxyXG4gICAgICAgICAqIFdoZW4gU3ViIEZsb3cgb3BlcmF0aW9uID09IFwiZW5kXCIgaXMgc3BlY2lmaWVkLCBVUkwgc3BlY2lmaWVkIGFzIG5hdmlnYXRlIGlzIGRpc3JlZ2FyZGVkLlxyXG4gICAgICAgICAqIElmIG5vdCBzZXQsIHRoaXMgcGFyYW1ldGVyIGlzIGFzc2lnbmVkIHRoZSBwYWdlIGNhbGxlZCBSb3V0ZXIubmF2aWdhdGUoKSB3aXRoIHN1YkZsb3cgcHJvcGVydHkuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIFN1YiBGbG93IOOBruWfuueCueOBqOOBquOCi+ODmuODvOOCuCBVUkwvSGFzaCDjgpLmjIflrprjgIJcclxuICAgICAgICAgKiBTdWIgRmxvdyBvcGVyYXRpb24gPT0gXCJlbmRcIiDjgYzmjIflrprjgZXjgozjgovloLTlkIjjga/jgIFuYXZpZ2F0ZSDjgavmjIflrprjgZXjgozjgosgVVJMIOOBr+eEoeimluOBleOCjOOCi+OAglxyXG4gICAgICAgICAqIOaMh+WumuOBjOOBquOBhOWgtOWQiOOBryBSb3V0ZXIubmF2aWdhdGUoKSDmmYLjgasgc3ViRmxvdyDjgpLmjIflrprjga7lkbzjgbPlh7rjgZflhYPjgYzjgqLjgrXjgqTjg7PjgZXjgozjgovjgIJcclxuICAgICAgICAgKi9cclxuICAgICAgICBkZXN0QmFzZT86IHN0cmluZztcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIFBhZ2VTdGFjayBmcm9tIFwiZGVzdEJhc2VcIiB3aGljaCBjaGFuZ2VzIHBhZ2UgYXQgdGhlIHRpbWUgb2YgdGhlIGVuZCBvZiBTdWIgRmxvdyBpcyBzcGVjaWZpZWQuXHJcbiAgICAgICAgICogV2hlbiB0aGlzIHBhcmFtZXRlciBpcyBubyBzZXQsIGl0IGNoYW5nZXMgcGFnZSB0byBcImRlc3RCYXNlXCIuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIFN1YiBGbG93IOe1guS6huaZguOBq+mBt+enu+OBmeOCiyBcImRlc3RCYXNlXCIg44GL44KJ44GuIFBhZ2VTdGFjayDjgpLmjIflrprjgILmjIflrprjgYzjgarjgYTloLTlkIjjga/jgIFcImRlc3RCYXNlXCIg44Gr6YG356e744GZ44KL44CCXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZGVzdFN0YWNrcz86IFBhZ2VTdGFja1tdO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICogQGludGVyZmFjZSBSb3V0ZXJPcHRpb25zXHJcbiAgICAgKiBAYnJpZWYgT3B0aW9ucyBpbnRlcmZhY2Ugb2YgUm91dGVyLnN0YXJ0KCkgbWV0aG9kLlxyXG4gICAgICpcclxuICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgKiBAaW50ZXJmYWNlIFJvdXRlck9wdGlvbnNcclxuICAgICAqIEBicmllZiBSb3V0ZXIuc3RhcnQoKSDjgavmjIflrprjgZnjgovjgqrjg5fjgrfjg6fjg7PjgqTjg7Pjgr/jg7zjg5XjgqfjgqTjgrlcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBSb3V0ZXJPcHRpb25zIGV4dGVuZHMgQmFja2JvbmUuSGlzdG9yeU9wdGlvbnMge1xyXG4gICAgICAgIHBhZ2VDb25zdHJ1Y3Q/OiBib29sZWFuOyAgICAvLyDnmbvpjLLmuIjjgb/jg5rjg7zjgrjjgpLmp4vnr4njgZnjgovloLTlkIggdHJ1ZS4gZGVmYXVsdDogdHJ1ZVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICogQGludGVyZmFjZSBOYXZpZ2F0ZU9wdGlvbnNcclxuICAgICAqIEBicmllZiBPcHRpb25zIGludGVyZmFjZSBvZiBSb3V0ZXIubmF2aWdhdGUoKSBtZXRob2QuXHJcbiAgICAgKlxyXG4gICAgICogXFx+amFwYW5lc2VcclxuICAgICAqIEBpbnRlcmZhY2UgTmF2aWdhdGVPcHRpb25zXHJcbiAgICAgKiBAYnJpZWYgUm91dGVyLm5hdmlnYXRlKCkg44Gr5oyH5a6a44GZ44KL44Kq44OX44K344On44Oz44Kk44Oz44K/44O844OV44Kn44Kk44K5XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgTmF2aWdhdGVPcHRpb25zIGV4dGVuZHMgQmFja2JvbmUuTmF2aWdhdGVPcHRpb25zIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogb3ZlcndyaXRlOiB0cmlnZ2VyIGRlZmF1bHQgdmFsdWUgaXMgdHJ1ZS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICogdHJpZ2dlciDjga7ml6LlrprlgKTjga8gdHJ1ZSDjgajjgZfjgabmibHjgYZcclxuICAgICAgICAgKi9cclxuICAgICAgICB0cmlnZ2VyPzogYm9vbGVhbjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIFN1YkZsb3dQYXJhbSBpcyBzcGVjaWZpZWQgd2hlbiBwZXJmb3JtaW5nIFN1YiBGbG93IHByb2Nlc3NpbmcuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIFN1YiBGbG93IOWHpueQhuOCkuihjOOBhuWgtOWQiOOAgVN1YkZsb3dQYXJhbSDjgpLmjIflrppcclxuICAgICAgICAgKi9cclxuICAgICAgICBzdWJGbG93PzogU3ViRmxvd1BhcmFtO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogc2V0IGJhY2sgb3BlcmF0aW9uIGRlc3RpbmF0aW9uLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiBb5oi744KLXSDmmYLjgavpgbfnp7vjgZnjgovjg5rjg7zjgrggVVJMIOOCkuaMh+WumlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGJhY2tEZXN0aW5hdGlvbj86IHN0cmluZztcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIG5vIGhhc2ggY2hhbmdlIGZsYWcgaW4gbmF2aWdhdGUgb3BlcmF0aW9uLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiBOYXZpZ2F0ZSDmmYLjgasgSGFzaCDlpInmm7TjgZfjgarjgYTjg5Xjg6njgrBcclxuICAgICAgICAgKi9cclxuICAgICAgICBub0hhc2hDaGFuZ2U/OiBib29sZWFuO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogYWRkaXRpb25hbCBpbmZvIGludGVyZmFjZS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICog5LuY5Yqg5oOF5aCx44Kk44Oz44K/44O844OV44Kn44Kk44K5XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgaW50ZW50PzogSW50ZW50O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICogQGludGVyZmFjZSBJT3JpZW50YXRpb25DaGFuZ2VkTGlzdGVuZXJcclxuICAgICAqIEBicmllZiBIYW5kbGUgb3JpZW50YXRpb24gY2hhbmdlZCBub3RpZnkgaW50ZXJmYWNlLlxyXG4gICAgICpcclxuICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgKiBAaW50ZXJmYWNlIElPcmllbnRhdGlvbkNoYW5nZWRMaXN0ZW5lclxyXG4gICAgICogQGJyaWVmIE9yaWVudGF0aW9uIOOBruWkieabtOaknOefpeOCkuWPl+S/oeOBmeOCi+OCpOODs+OCv+ODvOODleOCp+OCpOOCuVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElPcmllbnRhdGlvbkNoYW5nZWRMaXN0ZW5lciB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIFJlY2VpdmVkIG9yaWVudGF0aW9uIGNvZGUgd2hlbiB0aGF0IGlzIGNoYW5nZWQuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gbmV3T3JpZW50YXRpb24ge09yaWVudGF0aW9ufSBbaW5dIG5ldyBvcmllbnRhdGlvbiBjb2RlLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiBPcmllbnRhdGlvbiDjga7lpInmm7TjgpLlj5fkv6FcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBuZXdPcmllbnRhdGlvbiB7T3JpZW50YXRpb259IFtpbl0gbmV3IG9yaWVudGF0aW9uIGNvZGUuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb25PcmllbnRhdGlvbkNoYW5nZWQobmV3T3JpZW50YXRpb246IE9yaWVudGF0aW9uKTogdm9pZDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAqIEBpbnRlcmZhY2UgSUJhY2tCdXR0b25FdmVudExpc3RlbmVyXHJcbiAgICAgKiBAYnJpZWYgSGFuZGxlIEgvVyBiYWNrIGJ1dHRvbiBldmVudCBub3RpZnkgaW50ZXJmYWNlLlxyXG4gICAgICpcclxuICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgKiBAaW50ZXJmYWNlIElCYWNrQnV0dG9uRXZlbnRMaXN0ZW5lclxyXG4gICAgICogQGJyaWVmIEgvVyBCYWNrIGJ1dHRvbiDjga4gZXZlbnQg44KS5Y+X5L+h44GZ44KL44Kk44Oz44K/44O844OV44Kn44Kk44K5XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSUJhY2tCdXR0b25FdmVudExpc3RlbmVyIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogUmVjZWl2ZWQgSC9XIEJhY2sgQnV0dG9uIGV2ZW50XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gIGV2ZW50IHtKUXVlcnkuRXZlbnR9IFtpbl0gZXZlbnQgb2JqZWN0XHJcbiAgICAgICAgICogQHJldHVybiB7Qm9vbGVhbn0gdHJ1ZTogY29udGludWUgZGVmYXVsdCBvcGVyYXRpb24gLyBmYWxzZTogc3RvcCBkZWZhdWx0IG9wZXJhdGlvblxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiBIL1cgQmFjayBCdXR0b24g44OP44Oz44OJ44OpXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gIGV2ZW50IHtKUXVlcnkuRXZlbnR9IFtpbl0gZXZlbnQgb2JqZWN0XHJcbiAgICAgICAgICogQHJldHVybiB7Qm9vbGVhbn0gdHJ1ZTog5pei5a6a44Gu5Yem55CG44KS6KGM44KP44Gq44GEIC8gZmFsc2U6IOaXouWumuOBruWHpueQhuOCkuihjOOBhlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9uSGFyZHdhcmVCYWNrQnV0dG9uKGV2ZW50PzogSlF1ZXJ5LkV2ZW50KTogYm9vbGVhbjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAqIEBpbnRlcmZhY2UgSUNvbW1hbmRMaXN0ZW5lclxyXG4gICAgICogQGJyaWVmIEZyYW1ld29yayBnZW5lcmljIGNvbW1hbmQgY2FsbGJhY2sgaW50ZXJmYWNlLlxyXG4gICAgICpcclxuICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgKiBAaW50ZXJmYWNlIElDb21tYW5kTGlzdGVuZXJcclxuICAgICAqIEBicmllZiDmsY7nlKjjgrPjg57jg7Pjg4njgrPjg7zjg6vjg5Djg4Pjgq/jgqTjg7Pjgr/jg7zjg5XjgqfjgqTjgrlcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJQ29tbWFuZExpc3RlbmVyIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogUmVjZWl2ZWQgZ2VuZXJpYyBjb21tYW5kXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gIGV2ZW50IHtKUXVlcnkuRXZlbnR9IFtpbl0gZXZlbnQgb2JqZWN0XHJcbiAgICAgICAgICogQHBhcmFtICBldmVudCB7a2luZH0gICAgICAgICAgICAgIFtpbl0gY29tbWFuZCBraW5kIHN0cmluZ1xyXG4gICAgICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IHRydWU6IGNvbnRpbnVlIGRlZmF1bHQgb3BlcmF0aW9uIC8gZmFsc2U6IHN0b3AgZGVmYXVsdCBvcGVyYXRpb25cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICog5rGO55So44Kz44Oe44Oz44OJ44KS5Y+X5L+hXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gIGV2ZW50IHtKUXVlcnkuRXZlbnR9IFtpbl0gZXZlbnQgb2JqZWN0XHJcbiAgICAgICAgICogQHBhcmFtICBldmVudCB7a2luZH0gICAgICAgICAgICAgIFtpbl0gY29tbWFuZCBraW5kIHN0cmluZ1xyXG4gICAgICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IHRydWU6IOaXouWumuOBruWHpueQhuOCkuihjOOCj+OBquOBhCAvIGZhbHNlOiDml6Llrprjga7lh6bnkIbjgpLooYzjgYZcclxuICAgICAgICAgKi9cclxuICAgICAgICBvbkNvbW1hbmQoZXZlbnQ/OiBKUXVlcnkuRXZlbnQsIGtpbmQ/OiBzdHJpbmcpOiBib29sZWFuO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICogQGludGVyZmFjZSBQYWdlQ29uc3RydWN0T3B0aW9uc1xyXG4gICAgICogQGJyaWVmIEludGVyZmFjZSBjbGFzcyBmb3Igc3RvcmluZyByZWdpc3RyYXRpb24gaW5mbywgdXNpbmcgYnkgUm91dGVyLnJlZ2lzdGVyKCkgbWV0aG9kLlxyXG4gICAgICpcclxuICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgKiBAaW50ZXJmYWNlIFBhZ2VDb25zdHJ1Y3RPcHRpb25zXHJcbiAgICAgKiBAYnJpZWYgUm91dGVyLnJlZ2lzdGVyKCkg44Gn5oyH5a6a44GZ44KL55m76Yyy5oOF5aCx44KS5qC857SN44GZ44KL44Kk44Oz44K/44O844OV44Kn44Kk44K544Kv44Op44K5XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgUGFnZUNvbnN0cnVjdE9wdGlvbnMge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiByb3V0ZSBpZGVudGlmaWVyXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIHJvdXRlIOitmOWIpeWtkFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHJvdXRlPzogc3RyaW5nO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogY2FsbGJhY2sgb24gY2hhbmdpbmcgcm91dGUuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIHJvdXRlIOWkieabtOaZguOBq+WRvOOBs+WHuuOBleOCjOOCi+OCs+ODvOODq+ODkOODg+OCr1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGNhbGxiYWNrPzogKC4uLmFyZ3M6IGFueVtdKSA9PiBib29sZWFuO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogc2V0IFwidHJ1ZVwiIGlmIGFwcGxpY2F0aW9uJ3MgdG9wIHZpZXcuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIOOCouODl+ODquOCseODvOOCt+ODp+ODs+OBriB0b3Ag55S76Z2i44Gn44GC44KL5aC05ZCIIHRydWUg44KS5oyH5a6aXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdG9wPzogYm9vbGVhbjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIFRoZSBpbnN0YW5jZSBvZiBQYWdlIGV2ZW50IGxpc3RlbmVyIGluc3RhbmNlLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiBQYWdlIOOCpOODmeODs+ODiOOCkuWPl+S/oeOBmeOCi+ODquOCueODiuODvOOCpOODs+OCueOCv+ODs+OCuVxyXG4gICAgICAgICAqIOapn+iDveaLoeW8teaZguOBq+aMh+WumuOBmeOCi1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG93bmVyPzogSVBhZ2U7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBpbnRlbnQgaW5zdGFuY2UgaXMgY29tbXVuaWNhdGVkIG5leHQgcGFnZSB3aGVuIFwiaW50ZW50XCIgaXNuJ3QgZGVzaWduYXRlZCBzcGVjaWZpY2FsbHkgaW4gbmF2aWdhdGlvbi5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICog5piO56S655qE44GrIGludGVudCDjgYzmjIflrprjgZXjgozjgarjgYTloLTlkIjjgavjgYrjgYTjgabjgoJcclxuICAgICAgICAgKiBpbnRlbnQg44KS56C05qOE44GX44Gq44GE5aC05ZCI44GvIHRydWUg44KS5oyH5a6aXHJcbiAgICAgICAgICovXHJcbiAgICAgICAga2VlcEludGVudD86IGJvb2xlYW47XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgKiBAaW50ZXJmYWNlIElQYWdlXHJcbiAgICAgKiBAYnJpZWYgSW50ZXJmYWNlIG9mIFBhZ2UgY2xhc3MuXHJcbiAgICAgKlxyXG4gICAgICogXFx+amFwYW5lc2VcclxuICAgICAqIEBpbnRlcmZhY2UgSVBhZ2VcclxuICAgICAqIEBicmllZiDjg5rjg7zjgrjjgq/jg6njgrnjga7jgqTjg7Pjgr/jg7zjg5XjgqfjgqTjgrnjgq/jg6njgrlcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJUGFnZSBleHRlbmRzIElPcmllbnRhdGlvbkNoYW5nZWRMaXN0ZW5lciwgSUJhY2tCdXR0b25FdmVudExpc3RlbmVyLCBJQ29tbWFuZExpc3RlbmVyIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogUmV0dXJuIHRydWUgaWYgcGFnZSBpcyBhY3RpdmUuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIOODmuODvOOCuOOBjOOCouOCr+ODhuOCo+ODluOBp+OBguOCi+aZgiB0cnVlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgYWN0aXZlOiBib29sZWFuO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogU3RvcmVkIHRhcmdldCBwYWdlIHVybC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICog5a++6LGh44Gu44Oa44O844K4IFVSTCDjgpLmoLzntI1cclxuICAgICAgICAgKi9cclxuICAgICAgICB1cmw6IHN0cmluZztcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIFN0b3JlZCB0YXJnZXQgcGFnZSBJRC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICog5a++6LGh44Gu44Oa44O844K4IElEIOOCkuagvOe0jVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGlkOiBzdHJpbmc7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBqUXVlcnkgb2JqZWN0IG9mIHBhZ2UuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIOODmuODvOOCuOOBriBqUXVlcnkg44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgJHBhZ2U6IEpRdWVyeTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIGpRdWVyeSBvYmplY3Qgb2YgcGFnZSdzIGhlYWRlci5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICog44Oa44O844K444OY44OD44OA44GuIGpRdWVyeSDjgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAgICAgKi9cclxuICAgICAgICAkaGVhZGVyOiBKUXVlcnk7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBqUXVlcnkgb2JqZWN0IG9mIHBhZ2UncyBmb290ZXIuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIOODmuODvOOCuOODleODg+OCv+OBriBqUXVlcnkg44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgJGZvb3RlcjogSlF1ZXJ5O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogaW50ZW50IHBhcmFtZXRlciBwYXNzaW5nIGJldHdlZW4gcGFnZXMuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIOODmuODvOOCuOmWk+OBp+WPl+OBkea4oeOBleOCjOOCiyBpbnRlbnQg44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgaW50ZW50OiBJbnRlbnQ7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBSZWNlaXZlZCBSb3V0ZXIgXCJiZWZvcmUgcm91dGUgY2hhbmdlXCIgZXZlbnQuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHtJUHJvbWlzZUJhc2V9IGpRdWVyeVByb21pc2UgT2JqZWN0XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIFJvdXRlciBcImJlZm9yZSByb3V0ZSBjaGFuZ2VcIiDjg4/jg7Pjg4njg6lcclxuICAgICAgICAgKiDjg5rjg7zjgrjpgbfnp7vnm7TliY3jgavpnZ7lkIzmnJ/lh6bnkIbjgpLooYzjgYbjgZPjgajjgYzlj6/og71cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge0lQcm9taXNlQmFzZX0gUHJvbWlzZSDjgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAgICAgKi9cclxuICAgICAgICBvbkJlZm9yZVJvdXRlQ2hhbmdlKCk6IElQcm9taXNlQmFzZTxhbnk+O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogSXQncyBjYWxsZWQgb25seSB3aGVuIGJlZm9yZSB0aGUgZmlyc3QgT25QYWdlSW5pdCgpLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGV2ZW50IHtKUXVlcnkuRXZlbnR9IFtpbl0gZXZlbnQgb2JqZWN0XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIOacgOWIneOBriBPblBhZ2VJbml0KCkg44Gu44Go44GN44Gr44Gu44G/44Kz44O844Or44GV44KM44KLXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gZXZlbnQge0pRdWVyeS5FdmVudH0gW2luXSDjgqTjg5njg7Pjg4jjgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAgICAgKi9cclxuICAgICAgICBvbkluaXRpYWxpemUoZXZlbnQ6IEpRdWVyeS5FdmVudCk6IHZvaWQ7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBFdmVudCBoYW5kbGVyIG9mIGpRTSBldmVudDogXCJwYWdlYmVmb3JlY3JlYXRlXCIuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gZXZlbnQge0pRdWVyeS5FdmVudH0gW2luXSBldmVudCBvYmplY3RcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICogalFNIGV2ZW50OiBcInBhZ2ViZWZvcmVjcmVhdGVcIiDjgavlr77lv5xcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBldmVudCB7SlF1ZXJ5LkV2ZW50fSBbaW5dIOOCpOODmeODs+ODiOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9uUGFnZUJlZm9yZUNyZWF0ZShldmVudDogSlF1ZXJ5LkV2ZW50KTogdm9pZDtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIEV2ZW50IGhhbmRsZXIgb2YgalFNIGV2ZW50OiBcInBhZ2VjcmVhdGVcIiAocHJldmlvdXMgdmVyc2lvbiBkZWZpbmVkIFwicGFnZWluaXRcIikuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gZXZlbnQge0pRdWVyeS5FdmVudH0gW2luXSBldmVudCBvYmplY3RcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICogalFNIGV2ZW50OiBcInBhZ2VjcmVhdGVcIiAo5penOlwicGFnZWluaXRcIikg44Gr5a++5b+cXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gZXZlbnQge0pRdWVyeS5FdmVudH0gW2luXSDjgqTjg5njg7Pjg4jjgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAgICAgKi9cclxuICAgICAgICBvblBhZ2VJbml0KGV2ZW50OiBKUXVlcnkuRXZlbnQpOiB2b2lkO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogRXZlbnQgaGFuZGxlciBvZiBqUU0gZXZlbnQ6IFwicGFnZWJlZm9yZXNob3dcIlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGV2ZW50IHtKUXVlcnkuRXZlbnR9IFtpbl0gZXZlbnQgb2JqZWN0XHJcbiAgICAgICAgICogQHBhcmFtIGRhdGEgIHtTaG93RXZlbnREYXRhfSAgICAgW2luXSBhZGRpdGlvbmFsIGluZm9cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICogalFNIGV2ZW50OiBcInBhZ2ViZWZvcmVzaG93XCIg44Gr5a++5b+cXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gZXZlbnQge0pRdWVyeS5FdmVudH0gW2luXSDjgqTjg5njg7Pjg4jjgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAgICAgKiBAcGFyYW0gZGF0YSAge1Nob3dFdmVudERhdGF9ICAgICBbaW5dIOS7mOWKoOaDheWgsVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9uUGFnZUJlZm9yZVNob3coZXZlbnQ6IEpRdWVyeS5FdmVudCwgZGF0YT86IFNob3dFdmVudERhdGEpOiB2b2lkO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogRXZlbnQgaGFuZGxlciBvZiBqUU0gZXZlbnQ6IFwicGFnZWNvbnRhaW5lcnNob3dcIiAocHJldmlvdXMgdmVyc2lvbiBkZWZpbmVkIFwicGFnZXNob3dcIikuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gZXZlbnQge0pRdWVyeS5FdmVudH0gW2luXSBldmVudCBvYmplY3RcclxuICAgICAgICAgKiBAcGFyYW0gZGF0YSAge1Nob3dFdmVudERhdGF9ICAgICBbaW5dIGFkZGl0aW9uYWwgaW5mb1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiBqUU0gZXZlbnQ6IFwicGFnZWNvbnRhaW5lcnNob3dcIiAo5penOlwicGFnZXNob3dcIikg44Gr5a++5b+cXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gZXZlbnQge0pRdWVyeS5FdmVudH0gW2luXSDjgqTjg5njg7Pjg4jjgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAgICAgKiBAcGFyYW0gZGF0YSAge1Nob3dFdmVudERhdGF9ICAgICBbaW5dIOS7mOWKoOaDheWgsVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9uUGFnZVNob3coZXZlbnQ6IEpRdWVyeS5FdmVudCwgZGF0YT86IFNob3dFdmVudERhdGEpOiB2b2lkO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogRXZlbnQgaGFuZGxlciBvZiBqUU0gZXZlbnQ6IFwicGFnZWJlZm9yZWhpZGVcIi5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBldmVudCB7SlF1ZXJ5LkV2ZW50fSBbaW5dIGV2ZW50IG9iamVjdFxyXG4gICAgICAgICAqIEBwYXJhbSBkYXRhICB7SGlkZUV2ZW50RGF0YX0gICAgIFtpbl0gYWRkaXRpb25hbCBpbmZvXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIGpRTSBldmVudDogXCJwYWdlYmVmb3JlaGlkZVwiIOOBq+WvvuW/nFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGV2ZW50IHtKUXVlcnkuRXZlbnR9IFtpbl0g44Kk44OZ44Oz44OI44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgICAgICogQHBhcmFtIGRhdGEgIHtIaWRlRXZlbnREYXRhfSAgICAgW2luXSDku5jliqDmg4XloLFcclxuICAgICAgICAgKi9cclxuICAgICAgICBvblBhZ2VCZWZvcmVIaWRlKGV2ZW50OiBKUXVlcnkuRXZlbnQsIGRhdGE/OiBIaWRlRXZlbnREYXRhKTogdm9pZDtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIEV2ZW50IGhhbmRsZXIgb2YgalFNIGV2ZW50OiBcInBhZ2Vjb250YWluZXJoaWRlXCIgKHByZXZpb3VzIHZlcnNpb24gZGVmaW5lZCBcInBhZ2VoaWRlXCIpLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGV2ZW50IHtKUXVlcnkuRXZlbnR9IFtpbl0gZXZlbnQgb2JqZWN0XHJcbiAgICAgICAgICogQHBhcmFtIGRhdGEgIHtIaWRlRXZlbnREYXRhfSAgICAgW2luXSBhZGRpdGlvbmFsIGluZm9cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICogalFNIGV2ZW50OiBcInBhZ2Vjb250YWluZXJoaWRlXCIgKOaXpzpcInBhZ2VoaWRlXCIpIOOBq+WvvuW/nFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGV2ZW50IHtKUXVlcnkuRXZlbnR9IFtpbl0g44Kk44OZ44Oz44OI44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgICAgICogQHBhcmFtIGRhdGEgIHtIaWRlRXZlbnREYXRhfSAgICAgW2luXSDku5jliqDmg4XloLFcclxuICAgICAgICAgKi9cclxuICAgICAgICBvblBhZ2VIaWRlKGV2ZW50OiBKUXVlcnkuRXZlbnQsIGRhdGE/OiBIaWRlRXZlbnREYXRhKTogdm9pZDtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIEV2ZW50IGhhbmRsZXIgb2YgalFNIGV2ZW50OiBcInBhZ2VyZW1vdmVcIi5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBldmVudCB7SlF1ZXJ5LkV2ZW50fSBbaW5dIGV2ZW50IG9iamVjdFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiBqUU0gZXZlbnQ6IFwicGFnZXJlbW92ZVwiIOOBq+WvvuW/nFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGV2ZW50IHtKUXVlcnkuRXZlbnR9IFtpbl0g44Kk44OZ44Oz44OI44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb25QYWdlUmVtb3ZlKGV2ZW50OiBKUXVlcnkuRXZlbnQpOiB2b2lkO1xyXG4gICAgfVxyXG59XHJcblxyXG5kZWNsYXJlIG1vZHVsZSBcImNkcC5mcmFtZXdvcmsuanFtXCIge1xyXG4gICAgY29uc3QgRnJhbWV3b3JrOiB0eXBlb2YgQ0RQLkZyYW1ld29yaztcclxuICAgIGV4cG9ydCA9IEZyYW1ld29yaztcclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gY2RwOi8vL0NEUC9GcmFtZXdvcmsvSW50ZXJmYWNlcy50cyIsIi8qIHRzbGludDpkaXNhYmxlOm1heC1saW5lLWxlbmd0aCAqL1xyXG5cclxubmFtZXNwYWNlIENEUC5GcmFtZXdvcmsge1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogcGxhdGZvcm0g5Yik5a6a44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgKiBb5Y+C6ICDXSBodHRwczovL3czZy5qcC9ibG9nL3Rvb2xzL2pzX2Jyb3dzZXJfc25pZmZpbmdcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGNvbnN0IFBsYXRmb3JtID0gKCgpID0+IHtcclxuICAgICAgICBjb25zdCB1YSA9IG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKTtcclxuXHJcbiAgICAgICAgY29uc3QgbWFqb3JWZXJzaW9uID0gZnVuY3Rpb24gKGJyb3dzZXI6IHN0cmluZyk6IG51bWJlciB7XHJcbiAgICAgICAgICAgIGNvbnN0IHZlcnNpb24gPSB1YS5tYXRjaChuZXcgUmVnRXhwKFwiKFwiICsgYnJvd3NlciArIFwiKSggfC8pKFswLTldKylcIikpO1xyXG4gICAgICAgICAgICBpZiAoIXZlcnNpb24gfHwgdmVyc2lvbi5sZW5ndGggPCA0KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcGFyc2VJbnQodmVyc2lvblszXSwgMTApO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGx0SUU2OiB0eXBlb2Ygd2luZG93LmFkZEV2ZW50TGlzdGVuZXIgPT09IFwidW5kZWZpbmVkXCIgJiYgdHlwZW9mICg8YW55PmRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkuc3R5bGUubWF4SGVpZ2h0ID09PSBcInVuZGVmaW5lZFwiLFxyXG4gICAgICAgICAgICBsdElFNzogdHlwZW9mIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyID09PSBcInVuZGVmaW5lZFwiICYmIHR5cGVvZiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsID09PSBcInVuZGVmaW5lZFwiLFxyXG4gICAgICAgICAgICBsdElFODogdHlwZW9mIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyID09PSBcInVuZGVmaW5lZFwiICYmIHR5cGVvZiBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lID09PSBcInVuZGVmaW5lZFwiLFxyXG4gICAgICAgICAgICBsdElFOTogKDxhbnk+ZG9jdW1lbnQpLnVuaXF1ZUlEICYmIHR5cGVvZiB3aW5kb3cubWF0Y2hNZWRpYSA9PT0gXCJ1bmRlZmluZWRcIixcclxuICAgICAgICAgICAgZ3RJRTEwOiAoPGFueT5kb2N1bWVudCkudW5pcXVlSUQgJiYgd2luZG93Lm1hdGNoTWVkaWEsXHJcbiAgICAgICAgICAgIFRyaWRlbnQ6ICg8YW55PmRvY3VtZW50KS51bmlxdWVJRCxcclxuICAgICAgICAgICAgR2Vja286IFwiTW96QXBwZWFyYW5jZVwiIGluICg8YW55PmRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkuc3R5bGUsXHJcbiAgICAgICAgICAgIFByZXN0bzogZ2xvYmFsLm9wZXJhLFxyXG4gICAgICAgICAgICBCbGluazogZ2xvYmFsLmNocm9tZSxcclxuICAgICAgICAgICAgV2Via2l0OiB0eXBlb2YgZ2xvYmFsLmNocm9tZSA9PT0gXCJ1bmRlZmluZWRcIiAmJiBcIldlYmtpdEFwcGVhcmFuY2VcIiBpbiAoPGFueT5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpLnN0eWxlLFxyXG4gICAgICAgICAgICBUb3VjaDogdHlwZW9mIGdsb2JhbC5vbnRvdWNoc3RhcnQgIT09IFwidW5kZWZpbmVkXCIsXHJcbiAgICAgICAgICAgIE1vYmlsZTogKHR5cGVvZiBnbG9iYWwub3JpZW50YXRpb24gIT09IFwidW5kZWZpbmVkXCIpIHx8ICh1YS5pbmRleE9mKFwiV2luZG93cyBQaG9uZVwiKSAhPT0gLTEpLFxyXG4gICAgICAgICAgICBsdEFkNF80OiB0eXBlb2YgZ2xvYmFsLm9yaWVudGF0aW9uICE9PSBcInVuZGVmaW5lZFwiICYmICh0eXBlb2YgZ2xvYmFsLkV2ZW50U291cmNlID09PSBcInVuZGVmaW5lZFwiIHx8IDMwID4gbWFqb3JWZXJzaW9uKFwiY2hyb21lXCIpKSxcclxuICAgICAgICAgICAgUG9pbnRlcjogZ2xvYmFsLm5hdmlnYXRvci5wb2ludGVyRW5hYmxlZCxcclxuICAgICAgICAgICAgTVNQb25pdGVyOiBnbG9iYWwubmF2aWdhdG9yLm1zUG9pbnRlckVuYWJsZWQsXHJcbiAgICAgICAgICAgIEFuZHJvaWQ6ICh1YS5pbmRleE9mKFwiYW5kcm9pZFwiKSAhPT0gLTEpLFxyXG4gICAgICAgICAgICBpT1M6ICh1YS5pbmRleE9mKFwiaXBob25lXCIpICE9PSAtMSB8fCB1YS5pbmRleE9mKFwiaXBhZFwiKSAhPT0gLTEgfHwgdWEuaW5kZXhPZihcImlwb2RcIikgIT09IC0xKSxcclxuICAgICAgICB9O1xyXG4gICAgfSkoKTtcclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gY2RwOi8vL0NEUC9GcmFtZXdvcmsvUGxhdGZvcm0udHMiLCIvKiB0c2xpbnQ6ZGlzYWJsZTp0eXBlZGVmIG5vLWJpdHdpc2UgKi9cclxuXHJcbm5hbWVzcGFjZSBDRFAuRnJhbWV3b3JrIHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIHZjbGljayBwYXRjaFxyXG4gICAgICovXHJcbiAgICBjb25zdCBfdmNsaWNrUGF0Y2ggPSAoKTogdm9pZCA9PiB7XHJcbiAgICAgICAgY29uc3QganF1ZXJ5X29uID0gJC5mbi5vbixcclxuICAgICAgICAgICAganF1ZXJ5X29mZiA9ICQuZm4ub2ZmO1xyXG5cclxuICAgICAgICBjb25zdCBjdXN0b21fb24gPSBmdW5jdGlvbiAodHlwZXMsIHNlbGVjdG9yLCBkYXRhLCBmbiwgLypJTlRFUk5BTCovIG9uZSkge1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHR5cGVzID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgICAgICAgICAgICB0eXBlcyA9IHR5cGVzLnJlcGxhY2UoL3ZjbGljay9nLCBcImNsaWNrXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiAoPGFueT5fLmJpbmQoanF1ZXJ5X29uLCB0aGlzKSkodHlwZXMsIHNlbGVjdG9yLCBkYXRhLCBmbiwgb25lKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBjb25zdCBjdXN0b21fb2ZmID0gZnVuY3Rpb24gKHR5cGVzLCBzZWxlY3RvciwgZm4pIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiB0eXBlcyA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgICAgICAgICAgdHlwZXMgPSB0eXBlcy5yZXBsYWNlKC92Y2xpY2svZywgXCJjbGlja1wiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gKDxhbnk+Xy5iaW5kKGpxdWVyeV9vZmYsIHRoaXMpKSh0eXBlcywgc2VsZWN0b3IsIGZuKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyByZXBsYWNlIGZ1bmN0aW9ucy5cclxuICAgICAgICAoPGFueT4kLmZuKS5vbiA9IGN1c3RvbV9vbjtcclxuICAgICAgICAoPGFueT4kLmZuKS5vZmYgPSBjdXN0b21fb2ZmO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqICQubW9iaWxlLndpZGdldC5wb3B1cCBwYXRjaCBmb3IgXCJfY3JlYXRlUHJlcmVxdWlzaXRlc1wiXHJcbiAgICAgKlxyXG4gICAgICogcGF0Y2ggY29kZSBmcm9tIGpxbSAxLjVcclxuICAgICAqIGh0dHBzOi8vZ2l0aHViLmNvbS9qcXVlcnkvanF1ZXJ5LW1vYmlsZS9jb21taXQvZDM0Yzg2YWUxNGQ0ZWE2MDMzNTdiZTVlMzI2ZGUxZmI4YzMxZGJmOVxyXG4gICAgICovXHJcbiAgICBjb25zdCBfYXBwbHlfanFtX3BvcHVwX2NyZWF0ZVByZXJlcXVpc2l0ZXMgPSAoKTogdm9pZCA9PiB7XHJcbiAgICAgICAgY29uc3QgX3NhZmVDcmVhdGVQcmVyZXF1aXNpdGVzID0gZnVuY3Rpb24gKHNjcmVlblByZXJlcXVpc2l0ZTogYW55LCBjb250YWluZXJQcmVyZXF1aXNpdGU6IGFueSwgd2hlbkRvbmU6IGFueSk6IHZvaWQge1xyXG4gICAgICAgICAgICBsZXQgcHJlcmVxdWlzaXRlcztcclxuICAgICAgICAgICAgY29uc3Qgc2VsZjogYW55ID0gdGhpcztcclxuXHJcbiAgICAgICAgICAgIHByZXJlcXVpc2l0ZXMgPSB7XHJcbiAgICAgICAgICAgICAgICBzY3JlZW46ICQuRGVmZXJyZWQoKSxcclxuICAgICAgICAgICAgICAgIGNvbnRhaW5lcjogJC5EZWZlcnJlZCgpXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBwcmVyZXF1aXNpdGVzLnNjcmVlbi5kb25lKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGlmIChwcmVyZXF1aXNpdGVzID09PSBzZWxmLl9wcmVyZXF1aXNpdGVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2NyZWVuUHJlcmVxdWlzaXRlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgcHJlcmVxdWlzaXRlcy5jb250YWluZXIuZG9uZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocHJlcmVxdWlzaXRlcyA9PT0gc2VsZi5fcHJlcmVxdWlzaXRlcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lclByZXJlcXVpc2l0ZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICQud2hlbihwcmVyZXF1aXNpdGVzLnNjcmVlbiwgcHJlcmVxdWlzaXRlcy5jb250YWluZXIpLmRvbmUoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHByZXJlcXVpc2l0ZXMgPT09IHNlbGYuX3ByZXJlcXVpc2l0ZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLl9wcmVyZXF1aXNpdGVzID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICB3aGVuRG9uZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHNlbGYuX3ByZXJlcXVpc2l0ZXMgPSBwcmVyZXF1aXNpdGVzO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNvbnN0ICRtb2JpbGU6IGFueSA9ICQubW9iaWxlO1xyXG4gICAgICAgIGlmICgkbW9iaWxlLndpZGdldHMgJiYgJG1vYmlsZS53aWRnZXRzLnBvcHVwKSB7XHJcbiAgICAgICAgICAgICRtb2JpbGUud2lkZ2V0cy5wb3B1cC5wcm90b3R5cGUuX2NyZWF0ZVByZXJlcXVpc2l0ZXMgPSBfc2FmZUNyZWF0ZVByZXJlcXVpc2l0ZXM7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqICQubW9iaWxlLndpZGdldC5wb3B1cCBwYXRjaCBmb3IgXCJfaGFuZGxlV2luZG93UmVzaXplXCJcclxuICAgICAqXHJcbiAgICAgKiBwYXRjaCBjb2RlIGZyb20gc3RhY2sgb3ZlcmZsb3dcclxuICAgICAqIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzI3MDkwNDQ1L2pxbW9iaWxlLXJlLXBvc2l0aW9ucy1wb3B1cC13aW5kb3ctZXZlcnktdGltZS13aGVuLWFuZHJvaWQtb3BlbnMtb3duLXZpcnR1YWwta2V5XHJcbiAgICAgKi9cclxuICAgIGNvbnN0IF9hcHBseV9qcW1fcG9wdXBfaGFuZGxlV2luZG93UmVzaXplID0gKCk6IHZvaWQgPT4ge1xyXG4gICAgICAgIGNvbnN0IF9zYWZlSGFuZGxlV2luZG93UmVzaXplID0gZnVuY3Rpb24gKC8qIHRoZUV2ZW50ICovKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9pc09wZW4gJiYgdGhpcy5faWdub3JlUmVzaXplVG8gPT09IDApIHtcclxuICAgICAgICAgICAgICAgIGlmICgodGhpcy5fZXhwZWN0UmVzaXplRXZlbnQoKSB8fCB0aGlzLl9vcmllbnRhdGlvbmNoYW5nZUluUHJvZ3Jlc3MpICYmXHJcbiAgICAgICAgICAgICAgICAgICAgIXRoaXMuX3VpLmNvbnRhaW5lci5oYXNDbGFzcyhcInVpLXBvcHVwLWhpZGRlblwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGVmZmVjdGl2ZWx5IHJhcGlkLWNsb3NlIHRoZSBwb3B1cCB3aGlsZSBsZWF2aW5nIHRoZSBzY3JlZW4gaW50YWN0XHJcbiAgICAgICAgICAgICAgICAgICAgLy9qdWRnZSB1c2VyIGlzIGluIGlucHV0IG1vZGUgb3Igbm90LlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghKCQoXCI6Zm9jdXNcIikuaXMoXCJpbnB1dFwiKSB8fCAkKFwiOmZvY3VzXCIpLmlzKFwidGV4dGFyZWFcIikpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3VpLmNvbnRhaW5lclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFkZENsYXNzKFwidWktcG9wdXAtaGlkZGVuIHVpLXBvcHVwLXRydW5jYXRlXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVtb3ZlQXR0cihcInN0eWxlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNvbnN0ICRtb2JpbGU6IGFueSA9ICQubW9iaWxlO1xyXG4gICAgICAgIGlmICgkbW9iaWxlLndpZGdldHMgJiYgJG1vYmlsZS53aWRnZXRzLnBvcHVwKSB7XHJcbiAgICAgICAgICAgICRtb2JpbGUud2lkZ2V0cy5wb3B1cC5wcm90b3R5cGUuX2hhbmRsZVdpbmRvd1Jlc2l6ZSA9IF9zYWZlSGFuZGxlV2luZG93UmVzaXplO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiAkLm1vYmlsZS53aWRnZXQucG9wdXAgcGF0Y2hcclxuICAgICAqL1xyXG4gICAgY29uc3QgX21vYmlsZVBvcHVwUGF0Y2ggPSAoKTogdm9pZCA9PiB7XHJcbiAgICAgICAgY29uc3QganF1ZXJ5TWFqb3IgPSB+fiQuZm4uanF1ZXJ5LnNwbGl0KFwiLlwiKVswXTtcclxuICAgICAgICBjb25zdCBqcW1WZXJzaW9uID0gJC5tb2JpbGUudmVyc2lvbi5zcGxpdChcIi5cIik7XHJcbiAgICAgICAgY29uc3QganFtTWFqb3IgPSB+fmpxbVZlcnNpb25bMF07XHJcbiAgICAgICAgY29uc3QganFtTWluZXIgPSB+fmpxbVZlcnNpb25bMV07XHJcblxyXG4gICAgICAgIGlmICgzIDw9IGpxdWVyeU1ham9yICYmIGpxbU1ham9yIDwgMiAmJiBqcW1NaW5lciA8IDUpIHtcclxuICAgICAgICAgICAgX2FwcGx5X2pxbV9wb3B1cF9jcmVhdGVQcmVyZXF1aXNpdGVzKCk7XHJcbiAgICAgICAgICAgIF9hcHBseV9qcW1fcG9wdXBfaGFuZGxlV2luZG93UmVzaXplKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvL19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18vL1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGNsYXNzIFBhdGNoXHJcbiAgICAgKiBAYnJpZWYgcGF0Y2ggY2xhc3MgZm9yIGpxbSBmcmFtZXdvcmsuXHJcbiAgICAgKiAgICAgICBbcmV2aWV3XSB2Y2xpY2sg44Gu44OR44OD44OB44KS5b2T44Gm44KL44GT44Go44GM44KP44GL44KL44Go44KI44GEXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBjbGFzcyBQYXRjaCB7XHJcblxyXG4gICAgICAgIHN0YXRpYyBzX3ZjbGlja0V2ZW50ID0gXCJ2Y2xpY2tcIjtcclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBwdWJsaWMgc3RhdGljIG1ldGhvZHNcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIEFwcGx5IHBhdGNoIGJlZm9yZSBpbml0aWFsaXplLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiDliJ3mnJ/ljJbliY3jga7jg5Hjg4Pjg4Hjga7pgannlKhcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGFwcGx5QmVmb3JlSW5pdCgpOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKCFQYXRjaC5pc1N1cHBvcnRlZFZjbGljaygpKSB7XHJcbiAgICAgICAgICAgICAgICBfdmNsaWNrUGF0Y2goKTtcclxuICAgICAgICAgICAgICAgIFBhdGNoLnNfdmNsaWNrRXZlbnQgPSBcImNsaWNrXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBBcHBseSBwYXRjaCBhZnRlciBpbml0aWFsaXplLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiDliJ3mnJ/ljJblvozjga7jg5Hjg4Pjg4Hjga7pgannlKhcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGFwcGx5QWZ0ZXJJbml0KCk6IHZvaWQge1xyXG4gICAgICAgICAgICBfbW9iaWxlUG9wdXBQYXRjaCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIGlmIFwidmNsaWNrXCIgZXZlbnQgaXMgdW5zdXBwb3J0ZWQsIHJldHVybnMgZmFsc2UuIGV4OiBBbmRyb2lkIDQuNCAoS2l0a2F0KVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiBcInZjbGlja1wiIGV2ZW50IOOBjOmdnuOCteODneODvOODiOOBp+OBguOCiyBwbGF0Zm9ybSAoS2l0S2F0KSDjga8gZmFsc2Ug44KS6L+U44GZ44CCXHJcbiAgICAgICAgICogalFNIOOBriB2ZXJzaW9uIHVwIOOBq+OCiOOCiuOAgeino+axuuOBleOCjOOCi+WgtOWQiOOBr+eEoeWKueOBi+OBmeOCi+OAglxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaXNTdXBwb3J0ZWRWY2xpY2soKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIC8vIGZvciBBbmRyb2lkIDQuNCsgKEtpdGthdCDvvZ4pXHJcbiAgICAgICAgICAgIGlmIChQbGF0Zm9ybS5BbmRyb2lkICYmICFQbGF0Zm9ybS5sdEFkNF80KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBjZHA6Ly8vQ0RQL0ZyYW1ld29yay9QYXRjaC50cyIsIm5hbWVzcGFjZSBDRFAuRnJhbWV3b3JrIHtcclxuICAgIC8qKlxyXG4gICAgICogQGVudW0gT3JpZW50YXRpb25cclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGVudW0gT3JpZW50YXRpb24ge1xyXG4gICAgICAgIFBPUlRSQUlUID0gMCxcclxuICAgICAgICBMQU5EU0NBUEUgPSAxLFxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICogR2V0IE9yaWVudGF0aW9uIGVudW0gY29kZVxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm4ge051bWJlcn0gT3JpZW50YXRpb24gQ29kZS5cclxuICAgICAqXHJcbiAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICogT3JpZW50YXRpb24g44Gu5Y+W5b6XXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybiB7TnVtYmVyfSBPcmllbnRhdGlvbiBDb2RlLlxyXG4gICAgICovXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gZ2V0T3JpZW50YXRpb24oKTogT3JpZW50YXRpb24ge1xyXG4gICAgICAgIGNvbnN0ICR3aW5kb3cgPSAkKHdpbmRvdyk7XHJcbiAgICAgICAgcmV0dXJuICgkd2luZG93LndpZHRoKCkgPCAkd2luZG93LmhlaWdodCgpKSA/IE9yaWVudGF0aW9uLlBPUlRSQUlUIDogT3JpZW50YXRpb24uTEFORFNDQVBFO1xyXG4gICAgfVxyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBjZHA6Ly8vQ0RQL0ZyYW1ld29yay9PcmllbnRhdGlvbi50cyIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi9AdHlwZXMvanF1ZXJ5Lm1vYmlsZS5kLnRzXCIgLz5cclxuLyogdHNsaW50OmRpc2FibGU6bWF4LWxpbmUtbGVuZ3RoIGZvcmluIG5vLWJpdHdpc2UgKi9cclxuXHJcbm5hbWVzcGFjZSBDRFAge1xyXG5cclxuICAgIGltcG9ydCBQcm9taXNlID0gQ0RQLlByb21pc2U7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgKiBUaGUgZnVuY3Rpb24gcmV0dXJuZWQgUHJvbWlzZSB3YWl0cyB1bnRpbCBQaG9uZUdhcCBpcyByZWFkeS5cclxuICAgICAqIFtOb3RlXSBlbXVsYXRlIHdoZW4gUEMgZW52aXJvbWVudC5cclxuICAgICAqXHJcbiAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICogUGhvbmVHYXAg44GM5pyJ5Yq544Gr44Gq44KL44G+44Gn5b6F5qmfXHJcbiAgICAgKiBQQyDnkrDlooPjgafjga/jgqjjg5/jg6Xjg6zjg7zjg4jjgZXjgozjgovjgIJcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIHdhaXRGb3JEZXZpY2VSZWFkeSgpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2U8dm9pZD4oKHJlc29sdmUpID0+IHtcclxuICAgICAgICAgICAgaWYgKCFDRFAuRnJhbWV3b3JrLlBsYXRmb3JtLk1vYmlsZSkge1xyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgfSwgMTAwKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChudWxsID09IGdsb2JhbC5jb3Jkb3ZhIHx8IG51bGwgPT0gZ2xvYmFsLmNvcmRvdmEuZXhlYykge1xyXG4gICAgICAgICAgICAgICAgICAgICQoZG9jdW1lbnQpLm9uZShcImRldmljZXJlYWR5XCIsICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgX2RlZmF1bHRCYWNrQnV0dG9uSGFuZGxlcjogKGV2ZW50PzogSlF1ZXJ5LkV2ZW50KSA9PiB2b2lkID0gbnVsbDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAqIFNldHVwIEgvVyBCYWNrIGtleSBoYW5kbGVyLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSAge0Z1bmN0aW9ufSBoYW5kbGVyIGZ1bmN0aW9uLlxyXG4gICAgICogQHJldHVybiB7RnVuY3Rpb259IG9sZCBoYW5kbGVyIGZ1bmN0aW9uLlxyXG4gICAgICpcclxuICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtICB7RnVuY3Rpb259IGhhbmRsZXIg5oyH5a6aLlxyXG4gICAgICogQHJldHVybiB7RnVuY3Rpb259IOS7peWJjeOBriBoYW5kbGVyLlxyXG4gICAgICovXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gc2V0QmFja0J1dHRvbkhhbmRsZXIoaGFuZGxlcjogKGV2ZW50PzogSlF1ZXJ5LkV2ZW50KSA9PiB2b2lkKTogKGV2ZW50PzogSlF1ZXJ5LkV2ZW50KSA9PiB2b2lkIHtcclxuICAgICAgICBjb25zdCBvbGRIYW5kbGVyID0gX2RlZmF1bHRCYWNrQnV0dG9uSGFuZGxlcjtcclxuICAgICAgICBfZGVmYXVsdEJhY2tCdXR0b25IYW5kbGVyID0gaGFuZGxlcjtcclxuICAgICAgICByZXR1cm4gb2xkSGFuZGxlcjtcclxuICAgIH1cclxuXHJcbiAgICAvLyBiYWNrIGtleSBoYW5kbGVyIGltcGxlbWVudC5cclxuICAgICgoKSA9PiB7XHJcbiAgICAgICAgd2FpdEZvckRldmljZVJlYWR5KClcclxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgJChkb2N1bWVudCkub24oXCJiYWNrYnV0dG9uXCIsIChldmVudDogSlF1ZXJ5LkV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKF9kZWZhdWx0QmFja0J1dHRvbkhhbmRsZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2RlZmF1bHRCYWNrQnV0dG9uSGFuZGxlcihldmVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfSkoKTtcclxuXHJcblxyXG4gICAgLy9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fLy9cclxuXHJcblxyXG4gICAgZXhwb3J0IG5hbWVzcGFjZSBGcmFtZXdvcmsge1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAaW50ZXJmYWNlIFBsYWluU2V0dGluZ3NcclxuICAgICAgICAgKiBAYnJpZWYgalF1ZXJ5IOOBq+ioreWumuWPr+iDveOBquOCquODl+OCt+ODp+ODs1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGV4cG9ydCBpbnRlcmZhY2UgUGxhaW5TZXR0aW5nczxUID0gYW55PiB7XHJcbiAgICAgICAgICAgIFtrZXk6IHN0cmluZ106IFQ7ICAgICAgICAgICAgICAgICAgIC8vIGFqYXhTZXR1cCDku6XlpJbjga7jgqrjg5fjgrfjg6fjg7NcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBpbnRlcmZhY2UgSlF1ZXJ5U2V0dGluZ3NcclxuICAgICAgICAgKiBAYnJpZWYgalF1ZXJ5IOOBq+ioreWumuWPr+iDveOBquOCquODl+OCt+ODp+ODs1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGV4cG9ydCBpbnRlcmZhY2UgSlF1ZXJ5U2V0dGluZ3MgZXh0ZW5kcyBQbGFpblNldHRpbmdzIHtcclxuICAgICAgICAgICAgYWpheFNldHVwPzogSlF1ZXJ5LkFqYXhTZXR0aW5nczsgICAgLy8gJC5hamF4IOOBruaXouWumuOCquODl+OCt+ODp+ODs1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGludGVyZmFjZSBGcmFtZXdvcmtPcHRpb25zXHJcbiAgICAgICAgICogQGJyaWVmIEZyYW1ld29yayDjgavoqK3lrprlj6/og73jgarjgqrjg5fjgrfjg6fjg7NcclxuICAgICAgICAgKi9cclxuICAgICAgICBleHBvcnQgaW50ZXJmYWNlIEZyYW1ld29ya09wdGlvbnMge1xyXG4gICAgICAgICAgICBqcXVlcnk/OiBKUXVlcnlTZXR0aW5ncztcclxuICAgICAgICAgICAganF1ZXJ5bW9iaWxlPzogUGxhaW5TZXR0aW5ncztcclxuICAgICAgICAgICAgaTE4bj86IENEUC5JMThOU2V0dGluZ3M7XHJcbiAgICAgICAgICAgIGFwcGx5SlF1ZXJ5Q29uZmlnPzogKCkgPT4gdm9pZDtcclxuICAgICAgICAgICAgYXBwbHlKUXVlcnlNb2JpbGVDb25maWc/OiAoKSA9PiB2b2lkO1xyXG4gICAgICAgICAgICBhcHBseVBhdGNoPzogYm9vbGVhbjtcclxuICAgICAgICAgICAgYW5jaG9yVmNsaWNrPzogYm9vbGVhbjtcclxuICAgICAgICAgICAgZmlyc3RQYWdlVHJhbnNpdGlvbj86IGJvb2xlYW47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpbnRlcmZhY2UgT3JpZW50YXRpb25MaXN0ZW5lckhvbGRlciB7XHJcbiAgICAgICAgICAgIFtrZXk6IHN0cmluZ106IElPcmllbnRhdGlvbkNoYW5nZWRMaXN0ZW5lcjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IFRBRyA9IFwiW0NEUC5GcmFtZXdvcmtdIFwiO1xyXG5cclxuICAgICAgICBsZXQgX2RmSW5pdGlhbGl6ZTogSlF1ZXJ5RGVmZXJyZWQ8dm9pZD4gPSAkLkRlZmVycmVkPHZvaWQ+KCk7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBJbml0aWFsaXphdGlvbiBmdW5jdGlvbiBvZiBGcmFtZXdvcmsuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIEZyYW1ld29yayDjga7liJ3mnJ/ljJbplqLmlbBcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBvcHRpb25zIHtGcmFtZXdvcmtPcHRpb25zfSBbaW5dIG9wdGlvbnMgb2JqZWN0LlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGV4cG9ydCBmdW5jdGlvbiBpbml0aWFsaXplKG9wdGlvbnM/OiBGcmFtZXdvcmtPcHRpb25zKTogSVByb21pc2VCYXNlPHZvaWQ+IHtcclxuICAgICAgICAgICAgaWYgKFwicGVuZGluZ1wiICE9PSBfZGZJbml0aWFsaXplLnN0YXRlKCkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiA8YW55Pl9kZkluaXRpYWxpemUucHJvbWlzZSgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBDRFAg55Kw5aKD44Gu5Yid5pyf5YyWXHJcbiAgICAgICAgICAgIC8vIOePvueKtuOBr+OAgWNvbnNvbGUg44Kq44OW44K444Kn44Kv44OI44Gu5L+d6Ki844GoIGpRdWVyeSDjga4gV2luUlQg5a++5b+c44CCXHJcbiAgICAgICAgICAgIENEUC5pbml0aWFsaXplKHtcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb25maWcgPSBnZXRDb25maWcob3B0aW9ucyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEZyYW1ld29yayDnlKjjga4gUGF0Y2gg6YGp55SoIChGcmFtZXdvcmsg5Yid5pyf5YyW5YmNKVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb25maWcuYXBwbHlQYXRjaCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBGcmFtZXdvcmsuUGF0Y2guYXBwbHlCZWZvcmVJbml0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBjb25maWcg44Gu5Y+N5pigOiBqcXVlcnlcclxuICAgICAgICAgICAgICAgICAgICBjb25maWcuYXBwbHlKUXVlcnlDb25maWcoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8galF1ZXJ5IE1vYmlsZSDjga7liJ3mnJ/ljJZcclxuICAgICAgICAgICAgICAgICAgICAkKGRvY3VtZW50KS5vbihcIm1vYmlsZWluaXRcIiwgKCk6IHZvaWQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25maWcg44Gu5Y+N5pigOiBqcXVlcnkgbW9iaWxlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZy5hcHBseUpRdWVyeU1vYmlsZUNvbmZpZygpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2RwLmkxOG4g44Gu5Yid5pyf5YyWXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIENEUC5pbml0aWFsaXplSTE4Tihjb25maWcuaTE4bilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hbHdheXMoKGluZm8pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpMThuZXh0IOOBruWIneacn+WMluaZguOBruOCqOODqeODvOOBr+eEoeimluOBmeOCiy4gaW5mbyDjgYwgYXJyYXkg44Gu5aC05ZCI44CB44Ko44Op44O85oOF5aCx44GM5qC857SN44GV44KM44Gm44GE44KLLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoZG9jdW1lbnQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vbmUoXCJwYWdlYmVmb3JlY2hhbmdlXCIsIChldmVudDogSlF1ZXJ5LkV2ZW50LCBkYXRhOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICg8Q2hhbmdlUGFnZU9wdGlvbnM+ZGF0YS5vcHRpb25zKS5zaG93TG9hZE1zZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAub24oXCJwYWdlYmVmb3JlY3JlYXRlXCIsIChldmVudDogSlF1ZXJ5LkV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpMThuZXh044Op44Kk44OW44Op44Oq44Gr44KI44KLaHRtbCBmcmFnbWVudOOBrue/u+ios+WHpueQhlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKDxhbnk+JChldmVudC50YXJnZXQpKS5sb2NhbGl6ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUm91dGVyIOOBruWIneacn+WMllxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChSb3V0ZXIuaW5pdGlhbGl6ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuY2hvclZjbGljazogY29uZmlnLmFuY2hvclZjbGljayxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RQYWdlVHJhbnNpdGlvbjogY29uZmlnLmZpcnN0UGFnZVRyYW5zaXRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRnJhbWV3b3JrIOeUqOOBriBQYXRjaCDpgannlKggKEZyYW1ld29yayDliJ3mnJ/ljJblvowpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb25maWcuYXBwbHlQYXRjaCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRnJhbWV3b3JrLlBhdGNoLmFwcGx5QWZ0ZXJJbml0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2RmSW5pdGlhbGl6ZS5yZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihUQUcgKyBcImVycm9yLiBDRFAuRnJhbWV3b3JrLlJvdXRlci5pbml0aWFsaXplKCkgZmFpbGVkLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2RmSW5pdGlhbGl6ZS5yZWplY3QoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2RmSW5pdGlhbGl6ZSA9ICQuRGVmZXJyZWQ8dm9pZD4oKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgeyAvLyBqUXVlcnkgTW9iaWxlIOOBruODreODvOODiVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBqcXVlcnkgMytcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QganF1ZXJ5TWFqb3IgPSB+fiQuZm4uanF1ZXJ5LnNwbGl0KFwiLlwiKVswXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKDMgPD0ganF1ZXJ5TWFqb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICg0IDw9IGpxdWVyeU1ham9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFRBRyArIFwianF1ZXJ5LW1pZ3JhdGUgZm9yIDMuMC4wKyBpbiB1c2UuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZShbXCJqcXVlcnktbWlncmF0ZVwiXSwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmUoW1wianF1ZXJ5Lm1vYmlsZVwiXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmUoW1wianF1ZXJ5Lm1vYmlsZVwiXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZmFpbDogKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihUQUcgKyBcImVycm9yLiBDRFAuaW5pdGlhbGl6ZSgpIGZhaWxlZC5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgX2RmSW5pdGlhbGl6ZS5yZWplY3QoKTtcclxuICAgICAgICAgICAgICAgICAgICBfZGZJbml0aWFsaXplID0gJC5EZWZlcnJlZDx2b2lkPigpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gPGFueT5fZGZJbml0aWFsaXplLnByb21pc2UoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBDaGVjayBmb3IgaW5pdGlhbGl6YXRpb24gc3RhdHVzLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7Qm9vbGVhbn0gdHJ1ZTogaW5pdGlhbGl6ZWQgLyBmYWxzZTogdW5pbml0aWFsaXplZFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiDliJ3mnJ/ljJbmuIjjgb/jgYvliKTlrppcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IHRydWU6IOWIneacn+WMlua4iOOBvyAvIGZhbHNlOiDmnKrliJ3mnJ/ljJZcclxuICAgICAgICAgKi9cclxuICAgICAgICBleHBvcnQgZnVuY3Rpb24gaXNJbml0aWFsaXplZCgpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgcmV0dXJuIFwicmVzb2x2ZWRcIiA9PT0gX2RmSW5pdGlhbGl6ZS5zdGF0ZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIFdhaXQgZm9yIGluaXRpYWxpemF0aW9uIHN0YXR1cy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge0lQcm9taXNlQmFzZTx2b2lkPn1cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICog5Yid5pyf5YyW5b6F44GhXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHtJUHJvbWlzZUJhc2U8dm9pZD59XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZXhwb3J0IGZ1bmN0aW9uIHdhaXRGb3JJbml0aWFsaXplKCk6IElQcm9taXNlQmFzZTx2b2lkPiB7XHJcbiAgICAgICAgICAgIHJldHVybiA8YW55Pl9kZkluaXRpYWxpemUucHJvbWlzZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgX29yaWVudGF0aW9uTGlzdGVuZXJIb2xkZXI6IE9yaWVudGF0aW9uTGlzdGVuZXJIb2xkZXIgPSB7fTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIFJlZ2lzdGVyIElPcmllbnRhdGlvbkNoYW5nZWRMaXN0ZW5lciB0byBmcmFtZXdvcmsuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ga2V5ICAgICAge1N0cmluZ30gICAgICAgICAgICAgICAgICAgICAgW2luXSBJRCBrZXlcclxuICAgICAgICAgKiBAcGFyYW0gbGlzdGVuZXIge0lPcmllbnRhdGlvbkNoYW5nZWRMaXN0ZW5lcn0gW2luXSBJT3JpZW50YXRpb25DaGFuZ2VkTGlzdGVuZXIgaW5zdGFuY2VcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICogSU9yaWVudGF0aW9uQ2hhbmdlZExpc3RlbmVyIOOCkiBGcmFtZXdvcmsg44Gr55m76YyyXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ga2V5ICAgICAge1N0cmluZ30gICAgICAgICAgICAgICAgICAgICAgW2luXSBJRCBrZXlcclxuICAgICAgICAgKiBAcGFyYW0gbGlzdGVuZXIge0lPcmllbnRhdGlvbkNoYW5nZWRMaXN0ZW5lcn0gW2luXSBJT3JpZW50YXRpb25DaGFuZ2VkTGlzdGVuZXIgaW5zdGFuY2VcclxuICAgICAgICAgKi9cclxuICAgICAgICBleHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJPcmllbnRhdGlvbkNoYW5nZWRMaXN0ZW5lcihrZXk6IHN0cmluZywgbGlzdGVuZXI6IElPcmllbnRhdGlvbkNoYW5nZWRMaXN0ZW5lcik6IHZvaWQge1xyXG4gICAgICAgICAgICBfb3JpZW50YXRpb25MaXN0ZW5lckhvbGRlcltrZXldID0gbGlzdGVuZXI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogVW5yZWdpc3RlciBJT3JpZW50YXRpb25DaGFuZ2VkTGlzdGVuZXIgZnJvbSBmcmFtZXdvcmsuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ga2V5IHtTdHJpbmd9IFtpbl0gSUQga2V5XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIElPcmllbnRhdGlvbkNoYW5nZWRMaXN0ZW5lciDjgpIgRnJhbWV3b3JrIOOBi+OCieeZu+mMsuino+mZpFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGtleSB7U3RyaW5nfSBbaW5dIElEIGtleVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGV4cG9ydCBmdW5jdGlvbiB1bnJlZ2lzdGVyT3JpZW50YXRpb25DaGFuZ2VkTGlzdGVuZXIoa2V5OiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICAgICAgZGVsZXRlIF9vcmllbnRhdGlvbkxpc3RlbmVySG9sZGVyW2tleV07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgX2FjdGl2ZVBhZ2U6IElQYWdlID0gbnVsbDtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIFNldHVwIGV2ZW50IGhhbmRsZXJzIHdoZW4gYWZ0ZXIgcm91dGVyIGluaXRpYWxpemVkLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICog44Kk44OZ44Oz44OI44OP44Oz44OJ44Op44Gu6Kit5a6aLiBSb3V0ZXIg5Yid5pyf5YyW5b6M44GrIEZyYW1ld29yayDjgYzjgrPjg7zjg6vjgZnjgosuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGV4cG9ydCBmdW5jdGlvbiBzZXR1cEV2ZW50SGFuZGxlcnMoKTogdm9pZCB7XHJcbiAgICAgICAgICAgICgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBvbGRCYWNrQnV0dG9uSGFuZGxlciA9IENEUC5zZXRCYWNrQnV0dG9uSGFuZGxlcihudWxsKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGJhc2VCYWNrQnV0dG9uSGFuZGxlciA9IChldmVudD86IEpRdWVyeS5FdmVudCk6IHZvaWQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChfYWN0aXZlUGFnZSAmJiBfYWN0aXZlUGFnZS5vbkhhcmR3YXJlQmFja0J1dHRvbihldmVudCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g44Kv44Op44Kk44Ki44Oz44OI5YG044Gn44OP44Oz44OJ44Oq44Oz44Kw5riI44G/44Go5oyH5a6a44GV44KM44Gf5aC05ZCI44CB5pei5a6a44Gu5Yem55CG44KS6KGM44KP44Gq44GEXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbGRCYWNrQnV0dG9uSGFuZGxlcihldmVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIENEUC5zZXRCYWNrQnV0dG9uSGFuZGxlcihiYXNlQmFja0J1dHRvbkhhbmRsZXIpO1xyXG4gICAgICAgICAgICB9KSgpO1xyXG4gICAgICAgICAgICAoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgb2xkUm91dGVDaGFuZ2VIYW5kbGVyID0gQ0RQLkZyYW1ld29yay5zZXRCZWZvcmVSb3V0ZUNoYW5nZUhhbmRsZXIobnVsbCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBiYXNlUm91dGVDaGFuZ2VIYW5kbGVyID0gKCk6IElQcm9taXNlQmFzZTxhbnk+ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoX2FjdGl2ZVBhZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9hY3RpdmVQYWdlLm9uQmVmb3JlUm91dGVDaGFuZ2UoKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb2xkUm91dGVDaGFuZ2VIYW5kbGVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIENEUC5GcmFtZXdvcmsuc2V0QmVmb3JlUm91dGVDaGFuZ2VIYW5kbGVyKGJhc2VSb3V0ZUNoYW5nZUhhbmRsZXIpO1xyXG4gICAgICAgICAgICB9KSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IF9sYXN0T3JpZW50YXRpb246IE9yaWVudGF0aW9uID0gbnVsbDtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIFNldHVwIGFjdGl2ZSBJUGFnZSBpbnN0YW5jZS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICogQHBhcmFtIHBhZ2Uge0lQYWdlfSBbaW5dIElQYWdlIGluc3RhbmNlLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiBhY3RpdmUgUGFnZSDjga7oqK3lrpouIEZyYW1ld29yayDjgYzjgrPjg7zjg6vjgZnjgosuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqIEBwYXJhbSBwYWdlIHtJUGFnZX0gW2luXSBJUGFnZSBpbnN0YW5jZS5cclxuICAgICAgICAgKi9cclxuICAgICAgICBleHBvcnQgZnVuY3Rpb24gc2V0QWN0aXZlUGFnZShwYWdlOiBJUGFnZSk6IHZvaWQge1xyXG4gICAgICAgICAgICBfYWN0aXZlUGFnZSA9IHBhZ2U7XHJcbiAgICAgICAgICAgIGlmIChfYWN0aXZlUGFnZSkge1xyXG4gICAgICAgICAgICAgICAgX2xhc3RPcmllbnRhdGlvbiA9IGdldE9yaWVudGF0aW9uKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBSZXRlcm5zIGZyYW1ld29yayBkZWZhdWx0IGNsaWNrIGV2ZW50IHN0cmluZy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIEZyYW1ld29yayDjgYzml6Llrprjgavkvb/nlKjjgZnjgovjgq/jg6rjg4Pjgq/jgqTjg5njg7Pjg4jmloflrZfliJfjgpLlj5blvpdcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICogQHJldHVybiB7U3RyaW5nfSBcInZjbGlja1wiIC8gXCJjbGlja1wiXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZXhwb3J0IGZ1bmN0aW9uIGdldERlZmF1bHRDbGlja0V2ZW50KCk6IHN0cmluZyB7XHJcbiAgICAgICAgICAgIHJldHVybiBQYXRjaC5zX3ZjbGlja0V2ZW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IF9wYWdlQ29uc3RydWN0b3JzOiAobmV3ICgpID0+IElQYWdlKVtdID0gW107XHJcbiAgICAgICAgbGV0IF9wYWdlSW5zdGFuY2VzOiBJUGFnZVtdID0gW107XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFBhZ2Ug44Gu55m76YyyXHJcbiAgICAgICAgICogY29uc3RydWN0b3Ig44KS5oyH5a6a44GZ44KLLiDlvJXmlbDjgYzjgYLjgovloLTlkIjjga/jgIFiaW5kIOOCkuihjOOBhuOBk+OBqFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtjb25zdHJ1Y3Rvcn0gY3RvciBbaW5dIOOCs+ODs+OCueODiOODqeOCr+OCv+OCkuaMh+WumlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGV4cG9ydCBmdW5jdGlvbiByZWdpc3RlclBhZ2UoY3RvcjogbmV3ICgpID0+IElQYWdlKTogdm9pZCB7XHJcbiAgICAgICAgICAgIF9wYWdlQ29uc3RydWN0b3JzLnB1c2goY3Rvcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDkuojntITjgZXjgozjgZ/jgrPjg7Pjgrnjg4jjg6njgq/jgr/jgYvjgolQYWdlIOOCpOODs+OCueOCv+ODs+OCueOCkueUn+aIkFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGV4cG9ydCBmdW5jdGlvbiBjb25zdHJ1Y3RQYWdlcygpOiB2b2lkIHtcclxuICAgICAgICAgICAgX3BhZ2VDb25zdHJ1Y3RvcnMuZm9yRWFjaCgoY3RvcjogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBfcGFnZUluc3RhbmNlcy5wdXNoKG5ldyBjdG9yKCkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgX3BhZ2VDb25zdHJ1Y3RvcnMgPSBbXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFBhZ2Ug44Kk44Oz44K544K/44Oz44K544Gu5Y+C54Wn44KS56C05qOEXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZXhwb3J0IGZ1bmN0aW9uIGRpc3Bvc2VQYWdlcygpOiB2b2lkIHtcclxuICAgICAgICAgICAgX3BhZ2VJbnN0YW5jZXMgPSBbXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBHZXQgQ29uZmlnIG9iamVjdC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICogQHJldHVybiB7RnJhbWV3b3JrT3B0aW9uc30gQ29uZmlnIG9iamVjdC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICogQ29uZmlnIG9iamVjdCDjga7lj5blvpdcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICogQHJldHVybiB7RnJhbWV3b3JrT3B0aW9uc30gQ29uZmlnIG9iamVjdC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBnZXRDb25maWcob3B0aW9uczogRnJhbWV3b3JrT3B0aW9ucyk6IEZyYW1ld29ya09wdGlvbnMge1xyXG4gICAgICAgICAgICBjb25zdCBkZWZDb25maWcgPSB7XHJcbiAgICAgICAgICAgICAgICAvLyBmb3IgZmFpbCBzYWZlLCBkZWZhdWx0IHNldHRpbmdzLlxyXG4gICAgICAgICAgICAgICAganF1ZXJ5OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWpheFNldHVwOiB7IGNhY2hlOiBmYWxzZSB9LFxyXG4gICAgICAgICAgICAgICAgICAgIG1pZ3JhdGVNdXRlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgICAgICBqcXVlcnltb2JpbGU6IHtcclxuICAgICAgICAgICAgICAgICAgICBhbGxvd0Nyb3NzRG9tYWluUGFnZXM6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFBhZ2VUcmFuc2l0aW9uOiBcInBsYXRmb3JtLWRlZmF1bHRcIixcclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0RGlhbG9nVHJhbnNpdGlvbjogXCJwbGF0Zm9ybS1kZWZhdWx0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgaGFzaExpc3RlbmluZ0VuYWJsZWQ6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIHB1c2hTdGF0ZUVuYWJsZWQ6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEBzZWUganF1ZXJ5Lm1vYmlsZS5qcyBMSU5FIDYzOTRcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uSGFuZGxlcjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0SGFuZGxlcjogXCJzaW11bHRhbmVvdXNcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VxdWVudGlhbDogW1wiZmFkZVwiLCBcImZsaXBcIiwgXCJmbG93XCJdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaW11bHRhbmVvdXM6IFtdLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgICAgIGkxOG46IHtcclxuICAgICAgICAgICAgICAgICAgICBmYWxsYmFja1Jlc291cmNlczoge30sXHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uczoge30sXHJcbiAgICAgICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgICAgIGFwcGx5UGF0Y2g6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBhbmNob3JWY2xpY2s6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBmaXJzdFBhZ2VUcmFuc2l0aW9uOiBmYWxzZSxcclxuXHJcbiAgICAgICAgICAgICAgICBhcHBseUpRdWVyeUNvbmZpZzogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKHRoaXMuanF1ZXJ5KS5mb3JFYWNoKChrZXkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFwiYWpheFNldHVwXCIgPT09IGtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJC5hamF4U2V0dXAodGhpcy5qcXVlcnkuYWpheFNldHVwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRba2V5XSA9IHRoaXMuanF1ZXJ5W2tleV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAgICAgYXBwbHlKUXVlcnlNb2JpbGVDb25maWc6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAkLm1vYmlsZS5sb2FkZXIucHJvdG90eXBlLm9wdGlvbnMudGV4dCA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyh0aGlzLmpxdWVyeW1vYmlsZSkuZm9yRWFjaCgoa2V5KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcInRyYW5zaXRpb25IYW5kbGVyXCIgPT09IGtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgJG1vYmlsZTogYW55ID0gJC5tb2JpbGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBkZWZhdWx0IGhhbmRsZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRtb2JpbGUuZGVmYXVsdFRyYW5zaXRpb25IYW5kbGVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPSAkbW9iaWxlLnRyYW5zaXRpb25IYW5kbGVyc1t0aGlzLmpxdWVyeW1vYmlsZS50cmFuc2l0aW9uSGFuZGxlci5kZWZhdWx0SGFuZGxlcl07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzaW11bHRhbmVvdXMgaGFuZGxlclxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5qcXVlcnltb2JpbGUudHJhbnNpdGlvbkhhbmRsZXIuc2ltdWx0YW5lb3VzLmZvckVhY2goKHRyYW5zaXRpb24pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkbW9iaWxlLnRyYW5zaXRpb25IYW5kbGVyc1t0cmFuc2l0aW9uXSA9ICRtb2JpbGUudHJhbnNpdGlvbkhhbmRsZXJzLnNpbXVsdGFuZW91cztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2VxdWVudGlhbCBoYW5kbGVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmpxdWVyeW1vYmlsZS50cmFuc2l0aW9uSGFuZGxlci5zZXF1ZW50aWFsLmZvckVhY2goKHRyYW5zaXRpb24pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkbW9iaWxlLnRyYW5zaXRpb25IYW5kbGVyc1t0cmFuc2l0aW9uXSA9ICRtb2JpbGUudHJhbnNpdGlvbkhhbmRsZXJzLnNlcXVlbnRpYWw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQubW9iaWxlW2tleV0gPSB0aGlzLmpxdWVyeW1vYmlsZVtrZXldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuICQuZXh0ZW5kKHRydWUsIHt9LCBkZWZDb25maWcsIENEUC5Db25maWcsIG9wdGlvbnMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBjbG9zdXJlIG1ldGhvZHNcclxuXHJcbiAgICAgICAgLy8gcmVzaXplIGhhbmRsZXJcclxuICAgICAgICAkKHdpbmRvdykub24oXCJyZXNpemVcIiwgKGV2ZW50OiBKUXVlcnkuRXZlbnQpOiB2b2lkID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbmV3T3JpZW50YXRpb24gPSBnZXRPcmllbnRhdGlvbigpO1xyXG4gICAgICAgICAgICBpZiAoX2xhc3RPcmllbnRhdGlvbiAhPT0gbmV3T3JpZW50YXRpb24pIHtcclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIF9vcmllbnRhdGlvbkxpc3RlbmVySG9sZGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX29yaWVudGF0aW9uTGlzdGVuZXJIb2xkZXJba2V5XS5vbk9yaWVudGF0aW9uQ2hhbmdlZChuZXdPcmllbnRhdGlvbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoX2FjdGl2ZVBhZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBfYWN0aXZlUGFnZS5vbk9yaWVudGF0aW9uQ2hhbmdlZChuZXdPcmllbnRhdGlvbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBfbGFzdE9yaWVudGF0aW9uID0gbmV3T3JpZW50YXRpb247XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gY2RwOi8vL0NEUC9GcmFtZXdvcmsvQ29yZUFQSS50cyIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi9AdHlwZXMvanF1ZXJ5Lm1vYmlsZS5kLnRzXCIgLz5cclxuLyogdHNsaW50OmRpc2FibGU6bWF4LWxpbmUtbGVuZ3RoIG5vLXN0cmluZy1saXRlcmFsICovXHJcblxyXG5uYW1lc3BhY2UgQ0RQLkZyYW1ld29yayB7XHJcblxyXG4gICAgaW1wb3J0IFByb21pc2UgPSBDRFAuUHJvbWlzZTtcclxuXHJcbiAgICBjb25zdCBUQUcgPSBcIltDRFAuRnJhbWV3b3JrLlJvdXRlcl0gXCI7XHJcblxyXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgIC8vIGNsb3N1cmUgbWV0aG9kc1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICogQ29udmVydCBwYXRoIHRvIFVSTC5cclxuICAgICAqIElmIHRoZSBwYXRoIHN0YXJ0cyBmcm9tIFwiL1wiLCB0aGUgZnVuY3Rpb24gdHJhbnNsYXRlIHRoZSBwYXRoIGFzIGNoaWxkIGZvbGRlciBvZiBcIndlYiByb290XCIuXHJcbiAgICAgKiBPdGhlcndpc2UsIGl0IGludGVycHJldHMgYXMgcmVsYXRpdmUgcGF0aCBmcm9tIGN1cnJlbnQgcGFnZS5cclxuICAgICAqIFtOb3RlXSBUaGlzIGJlaGF2aW9yIGdvIGFsb25nIHdpdGggalFNLCBOT1Qgd2l0aCByZXF1aXJlLnRvVXJsKCkuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHBhdGgge1N0cmluZ30gW2luXSBwYXRoIHN0cmluZ1xyXG4gICAgICpcclxuICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgKiBwYXRoIOOCkiBVUkwg44Gr5aSJ5o+bXHJcbiAgICAgKiBcIi9cIiDjgYvjgonlp4vjgb7jgovjgoLjga7jga8gd2ViIHJvb3Qg44GL44KJ44CB44Gd44KM5Lul5aSW44Gv54++5Zyo44Gu44Oa44O844K444GL44KJ57W25a++44OR44K5VVJM44Gr5aSJ5o+b44GZ44KL44CCXHJcbiAgICAgKiBqUU0g44Gu5oyZ5YuV44Gr44GC44KP44Gb44Gm44GK44KK44CBcmVxdWlyZS50b1VybCgpIOOBqOeVsOOBquOCi+OBruOBp+azqOaEj+OAglxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBwYXRoIHtTdHJpbmd9IFtpbl0g44OR44K544KS5oyH5a6a44CCXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBmdW5jdGlvbiB0b1VybChwYXRoOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgICAgIGlmIChudWxsICE9IHBhdGhbMF0gJiYgXCIvXCIgPT09IHBhdGhbMF0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIENEUC53ZWJSb290ICsgcGF0aC5zbGljZSgxKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gJC5tb2JpbGUucGF0aC5tYWtlVXJsQWJzb2x1dGUocGF0aCwgZ2V0Q3VycmVudERvY3VtZW50VXJsKCkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAqIEdldCBjdXJyZW50IGRvY3VtZW50IHVybC5cclxuICAgICAqXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICpcclxuICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgKiDnj77lnKjooajnpLrjgZfjgabjgYTjgovjg4njgq3jg6Xjg6Hjg7Pjg4jjga4gVVJMIOOCkuWPluW+l1xyXG4gICAgICpcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGdldEN1cnJlbnREb2N1bWVudFVybCgpOiBzdHJpbmcge1xyXG4gICAgICAgIGNvbnN0ICRhY3RpdmVQYWdlID0gKDxhbnk+JChcImJvZHlcIikpLnBhZ2Vjb250YWluZXIoXCJnZXRBY3RpdmVQYWdlXCIpO1xyXG4gICAgICAgIGlmIChudWxsID09ICRhY3RpdmVQYWdlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkLm1vYmlsZS5wYXRoLmRvY3VtZW50QmFzZS5ocmVmTm9IYXNoO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgYmFzZSA9ICQubW9iaWxlLnBhdGguZG9jdW1lbnRCYXNlLmhyZWZOb0hhc2g7XHJcbiAgICAgICAgbGV0IHVybCA9ICQubW9iaWxlLmFjdGl2ZVBhZ2UuY2xvc2VzdChcIi51aS1wYWdlXCIpLmpxbURhdGEoXCJ1cmxcIik7XHJcblxyXG4gICAgICAgIGlmICghdXJsIHx8ICEkLm1vYmlsZS5wYXRoLmlzUGF0aCh1cmwpKSB7XHJcbiAgICAgICAgICAgIHVybCA9IGJhc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gJC5tb2JpbGUucGF0aC5tYWtlVXJsQWJzb2x1dGUodXJsLCBiYXNlKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAqIERlZmF1bHQgXCJiZWZvcmUgcm91dGUgY2hhbmdlXCIgaGFuZGxlci5cclxuICAgICAqXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICpcclxuICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgKiDml6Llrprjga4gXCJiZWZvcmUgcm91dGUgY2hhbmdlXCIg44OP44Oz44OJ44OpXHJcbiAgICAgKlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgbGV0IF9iZWZvcmVSb3V0ZUNoYW5nZSA9ICgpOiBJUHJvbWlzZUJhc2U8YW55PiA9PiB7XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBkZWZhdWx0IFwiYmVmb3JlIHJvdXRlIGNoYW5nZVwiIGhhbm5kbGVyXHJcbiAgICBjb25zdCBfZGVmYXVsdEJlZm9yZVJvdXRlQ2hhbmdlID0gX2JlZm9yZVJvdXRlQ2hhbmdlO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICogU2V0dXAgXCJiZWZvcmUgcm91dGUgY2hhbmdlXCIgaGFuZGxlci5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gIHtGdW5jdGlvbn0gaGFuZGxlciBmdW5jdGlvbi5cclxuICAgICAqIEByZXR1cm4ge0Z1bmN0aW9ufSBvbGQgaGFuZGxlciBmdW5jdGlvbi5cclxuICAgICAqXHJcbiAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICogXCJiZWZvcmUgcm91dGUgY2hhbmdlXCIg44OP44Oz44OJ44Op6Kit5a6aXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtICB7RnVuY3Rpb259IGhhbmRsZXIg5oyH5a6aLlxyXG4gICAgICogQHJldHVybiB7RnVuY3Rpb259IOS7peWJjeOBriBoYW5kbGVyLlxyXG4gICAgICovXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gc2V0QmVmb3JlUm91dGVDaGFuZ2VIYW5kbGVyKGhhbmRsZXI6ICgpID0+IElQcm9taXNlQmFzZTxhbnk+KTogKCkgPT4gSVByb21pc2VCYXNlPGFueT4ge1xyXG4gICAgICAgIGlmIChudWxsID09IGhhbmRsZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9iZWZvcmVSb3V0ZUNoYW5nZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBvbGRIYW5kbGVyID0gX2JlZm9yZVJvdXRlQ2hhbmdlO1xyXG4gICAgICAgICAgICBfYmVmb3JlUm91dGVDaGFuZ2UgPSBoYW5kbGVyO1xyXG4gICAgICAgICAgICByZXR1cm4gb2xkSGFuZGxlcjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fLy9cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAqIEBpbnRlcmZhY2UgSW5pdE9wdGlvbnNcclxuICAgICAqIEBicmllZiBpbml0aWFsaXplIG9wdGlvbiBkZWZpbml0aW9uLlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqXHJcbiAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICogQGludGVyZmFjZSBJbml0T3B0aW9uc1xyXG4gICAgICogQGJyaWVmIOWIneacn+WMluOCquODl+OCt+ODp+ODs1xyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJbml0T3B0aW9ucyB7XHJcbiAgICAgICAgYW5jaG9yVmNsaWNrPzogYm9vbGVhbjsgICAgICAgICAvLyDmmpfpu5njga4gYW5jaG9yIHZjbGljayDjgpLjgrXjg53jg7zjg4hcclxuICAgICAgICBmaXJzdFBhZ2VUcmFuc2l0aW9uPzogYm9vbGVhbjsgIC8vIOWIneacn+ODmuODvOOCuOODiOODqeODs+OCuOOCt+ODp+ODs1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICogQGludGVyZmFjZSBSb3V0ZUNvbnRleHRcclxuICAgICAqIEBicmllZiBNYW5hZ2VtZW50IGluZm8gZm9yIHBhZ2UuXHJcbiAgICAgKiAgICAgICAgVGhpcyBpbnRlcmZhY2Ugcm9sZSBpcyBub3Qgc2FtZSBhcyBCYWNrYm9uZS5Sb3V0ZXIucm91dGVzLlxyXG4gICAgICogICAgICAgIFVzaW5nIGZvciByZXNvbHZpbmcgcmVsYXRpb24gYSBrbm93biBmcmFnbWVudCB2YWx1ZSBhbmQgYSBwYWdlIHBhdGguXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICpcclxuICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgKiBAaW50ZXJmYWNlIFJvdXRlQ29udGV4dFxyXG4gICAgICogQGJyaWVmIOODmuODvOOCuOeuoeeQhuaDheWgsVxyXG4gICAgICogICAgICAgIEJhY2tib25lLlJvdXRlci5yb3V0ZXMg44Go5ZCM44GY5b255Ymy44Gn44Gv44Gq44GE44CCXHJcbiAgICAgKiAgICAgICAg6YG356e744GX44Gf44GT44Go44GM44GC44KL44OV44Op44Kw44Oh44Oz44OI5YCk44Go44Oa44O844K444Gu44OR44K544Gu6Kej5rG644Gr5L2/55So44GV44KM44KL44CCXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBpbnRlcmZhY2UgUm91dGVDb250ZXh0IHtcclxuICAgICAgICByb3V0ZTogc3RyaW5nO1xyXG4gICAgICAgIHJlZ2V4cDogUmVnRXhwO1xyXG4gICAgICAgIHBhZ2U6IHN0cmluZztcclxuICAgICAgICB0b3A6IGJvb2xlYW47XHJcbiAgICAgICAgY2FsbGJhY2s6ICguLi5hcmdzOiBhbnlbXSkgPT4gYm9vbGVhbjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAqIEBpbnRlcmZhY2UgTmF2aWdhdGVJbmZvXHJcbiAgICAgKiBAYnJpZWYgU3RvcmVkIGFkZGl0aW9uYWwgaW5mbyBpbnRlcmZhY2Ugb24gbmF2aWdhdGUuXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICpcclxuICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgKiBAaW50ZXJmYWNlIE5hdmlnYXRlSW5mb1xyXG4gICAgICogQGJyaWVmIOODmuODvOOCuOmBt+enu+OBq+mWouOBmeOCi+S7mOWKoOaDheWgseOCkuagvOe0jeOBmeOCi+OCpOODs+OCv+ODvOODleOCp+OCpOOCuVxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgaW50ZXJmYWNlIE5hdmlnYXRlSW5mbyB7XHJcbiAgICAgICAgdXJsPzogc3RyaW5nO1xyXG4gICAgICAgIHRyYW5zaXRpb24/OiBzdHJpbmc7XHJcbiAgICAgICAgcmV2ZXJzZT86IGJvb2xlYW47XHJcbiAgICAgICAgYmFja0Rlc3RpbmF0aW9uPzogc3RyaW5nO1xyXG4gICAgICAgIG5vSGFzaENoYW5nZT86IGJvb2xlYW47XHJcbiAgICAgICAgaW50ZW50PzogSW50ZW50O1xyXG4gICAgICAgIC8vIHN0YXR1cyBwYXJhbXNcclxuICAgICAgICBwb3NpdGl2ZU5hdmlnYXRlPzogYm9vbGVhbjtcclxuICAgICAgICBjYWxsZWRCZWZvcmVSb3V0ZUNoYW5nZT86IGJvb2xlYW47XHJcbiAgICAgICAgaW5OYXZpZ2F0aW9uPzogYm9vbGVhbjtcclxuICAgICAgICBpbkFkZGl0aW9uYWxCYWNrPzogYm9vbGVhbjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAqIEBpbnRlcmZhY2UgU3ViRmxvd1BhcmFtRXhcclxuICAgICAqIEBicmllZiBFeHRlbmVkIFN1YkZsb3dQYXJhbSBpbnRlcmZhY2UgaW4gRnJhbWV3b3JrIHVzZS5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKlxyXG4gICAgICogXFx+amFwYW5lc2VcclxuICAgICAqIEBpbnRlcmZhY2UgU3ViRmxvd1BhcmFtRXhcclxuICAgICAqIEBicmllZiBGcmFtZXdvcmsg44GM5L2/55So44GZ44KLIFN1YkZsb3dQYXJhbSDmi6HlvLXjgqTjg7Pjgr/jg7zjg5XjgqfjgqTjgrlcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIGludGVyZmFjZSBTdWJGbG93UGFyYW1FeCBleHRlbmRzIFN1YkZsb3dQYXJhbSB7XHJcbiAgICAgICAgYWRkaXRpb25hbERpc3RhbmNlPzogbnVtYmVyO1xyXG4gICAgfVxyXG5cclxuICAgIC8vX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXy8vXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgKiBAY2xhc3MgUm91dGVyXHJcbiAgICAgKiBAYnJpZWYgUm91dGVyIGNsYXNzIGZvciBhZGp1c3RpbmcgalF1ZXJ5TW9iaWxlIGZ1bmN0aW9ucyBhbmQgQmFja2JvbmUuUm91dGVyIGZ1bmN0aW9ucy5cclxuICAgICAqICAgICAgICBFdmVuIGlmIEJhY2tib25lLlJvdXRlciBkb2VzIG5vdCBzdGFydCByb3V0aW5nLCBuYXRpZ2F0ZSgpIG1ldGhvZCB3b3JrcyBnb29kIHdpdGggalFNIGZyYW1ld29yay5cclxuICAgICAqXHJcbiAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICogQGNsYXNzIFJvdXRlclxyXG4gICAgICogQGJyaWVmIGpRdWVyeU1vYmlsZSDjgaggQmFja2JvbmUuUm91dGVyIOOCkuiqv+WBnOOBmeOCiyBSb3V0ZXIg44Kv44Op44K5XHJcbiAgICAgKiAgICAgICAg44Or44O844OG44Kj44Oz44Kw44KS6ZaL5aeL44GX44Gm44GE44Gq44GE5aC05ZCI44Gr44KC44CBbmF2aWdhdGUoKSDjga8galFNIOODleODrOODvOODoOODr+ODvOOCr+OCkuS9v+eUqOOBl+OBpuapn+iDveOBmeOCi+OAglxyXG4gICAgICovXHJcbiAgICBleHBvcnQgY2xhc3MgUm91dGVyIHtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgc19pbml0T3B0aW9uczogSW5pdE9wdGlvbnMgPSB7fTtcclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBzX3JvdXRlcjogQmFja2JvbmUuUm91dGVyID0gbnVsbDtcclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBzX3Jvb3RDb250ZXh0czogT2JqZWN0ID0ge307XHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgc19sYXN0TmF2aWdhdGVJbmZvOiBOYXZpZ2F0ZUluZm8gPSB7fTtcclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBzX2xhc3RDbGlja2VkVGltZTogbnVtYmVyID0gbnVsbDtcclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBzX2xhc3RJbnRlbnQ6IEludGVudCA9IHt9O1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIHNfZmlyc3RDaGFuZ2VQYWdlOiBib29sZWFuID0gdHJ1ZTtcclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBzX2xvYWRVcmw6IChmcmFnbWVudDogc3RyaW5nKSA9PiBib29sZWFuID0gbnVsbDtcclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBzX2JhY2s6ICgpID0+IHZvaWQgPSBudWxsO1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIERFTEFZX1RJTUUgPSAyMDA7ICAgICAgICAvLyBUQkQ6IOaaq+WumuWApFxyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIERBVEFfQkFDS19ERVNUSU5BVElPTiA9IFwiZGF0YS1iYWNrLWRzdFwiO1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIERBVEFfTk9fSEFTSF9DSEFOR0UgPSBcImRhdGEtbm8taGFzaC1jaGFuZ2VcIjtcclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBEQVRBX05PX1ZDTElDS19IQU5ETEUgPSBcImRhdGEtbm8tdmNsaWNrLWhhbmRsZVwiO1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIEJBQ0tfREVTVElOQVRJT05fVVJMID0gXCJiYWNrRHN0VXJsXCI7XHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgU1VCRkxPV19QQVJBTSA9IFwic3ViRmxvd1BhcmFtXCI7XHJcblxyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIHNfZGVmYXVsdEluaXRPcHRpb25zOiBJbml0T3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgYW5jaG9yVmNsaWNrOiB0cnVlLFxyXG4gICAgICAgICAgICBmaXJzdFBhZ2VUcmFuc2l0aW9uOiBmYWxzZSxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBzX2RlZmF1bHROYXZpZ2F0ZU9wdGlvbnM6IE5hdmlnYXRlT3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgdHJpZ2dlcjogdHJ1ZSxcclxuICAgICAgICAgICAgcmVwbGFjZTogZmFsc2UsXHJcbiAgICAgICAgICAgIGludGVudDogbnVsbCxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIHB1YmxpYyBzdGF0aWMgbWV0aG9kc1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogZm9yIGluaXRpYWxpemUgUm91dGVyLiB0aGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCBpbiBmcmFtZXdvcmsuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHtCb29sZWFufSB0cnVlOiBzdWNjZWVkZWQgLyBmYWxzZTogZmFpbGVkLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiDliJ3mnJ/ljJZcclxuICAgICAgICAgKiDjgZPjga7plqLmlbDjga/jg5Xjg6zjg7zjg6Djg6/jg7zjgq/lhoXpg6jjgafkvb/nlKjjgZXjgozjgovjgIJcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSAgb3B0aW9ucyB7T2JqZWN0fSBbaW5dIOOCquODl+OCt+ODp+ODs1xyXG4gICAgICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IOaIkOWQplxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW5pdGlhbGl6ZShvcHRpb25zOiBJbml0T3B0aW9ucyk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICBjb25zdCAkYm9keSA9ICQoXCJib2R5XCIpO1xyXG4gICAgICAgICAgICBpZiAoISFSb3V0ZXIuc19yb3V0ZXIpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihUQUcgKyBcImxvZ2ljIGVycm9yLiBpbml0aWFsaXplIGNhbGwgdHdpY2UuXCIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBSb3V0ZXIuc19pbml0T3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCBSb3V0ZXIuc19kZWZhdWx0SW5pdE9wdGlvbnMsIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICBpZiAoUm91dGVyLnNfaW5pdE9wdGlvbnMuZmlyc3RQYWdlVHJhbnNpdGlvbikge1xyXG4gICAgICAgICAgICAgICAgUm91dGVyLnNfZmlyc3RDaGFuZ2VQYWdlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIEJhY2tib25lLlJvdXRlciDjgYzjgIFyb3V0ZSDjgpLop6PmsbrjgafjgY3jgarjgYvjgaPjgZ/loLTlkIjjgavjgoLpgJrnn6XjgpLmjZXmjYnjgZnjgovjgZ/jgoHjga7jgrPjg7zjg6vjg5Djg4Pjgq/jgpLoqK3lrppcclxuICAgICAgICAgICAgUm91dGVyLnNfbG9hZFVybCA9IF8uYmluZChCYWNrYm9uZS5oaXN0b3J5LmxvYWRVcmwsIEJhY2tib25lLmhpc3RvcnkpO1xyXG4gICAgICAgICAgICBCYWNrYm9uZS5oaXN0b3J5LmxvYWRVcmwgPSBSb3V0ZXIuY3VzdG9tTG9hZFVybDtcclxuICAgICAgICAgICAgUm91dGVyLnNfcm91dGVyID0gbmV3IEJhY2tib25lLlJvdXRlcigpO1xyXG4gICAgICAgICAgICBSb3V0ZXIuc19yb3V0ZXIub24oXCJyb3V0ZVwiLCBSb3V0ZXIub25Sb3V0ZVN1Y2NlZWRlZCk7XHJcblxyXG4gICAgICAgICAgICAvLyBCYWNrYm9uZS5Sb3V0ZXIg44KS5L2/55So44GX44Gm44GE44KL5aC05ZCI44CBJC5tb2JpbGUuYmFjaygpIOOBruaMmeWLleOCkuODluODqeOCpuOCtuOBrlvmiLvjgotd44Gr57Wx5LiAXHJcbiAgICAgICAgICAgIGlmICghJC5tb2JpbGUuaGFzaExpc3RlbmluZ0VuYWJsZWQpIHtcclxuICAgICAgICAgICAgICAgIFJvdXRlci5zX2JhY2sgPSBfLmJpbmQoJC5tb2JpbGUuYmFjaywgJC5tb2JpbGUpO1xyXG4gICAgICAgICAgICAgICAgJC5tb2JpbGUuYmFjayA9IFJvdXRlci5jdXN0b21KcW1CYWNrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBjaGFuZ2VQYWdlIOOCkuOCteODneODvOODiFxyXG4gICAgICAgICAgICBpZiAobnVsbCA9PSAkLm1vYmlsZS5jaGFuZ2VQYWdlKSB7XHJcbiAgICAgICAgICAgICAgICAkLm1vYmlsZS5jaGFuZ2VQYWdlID0gKHRvOiBhbnksIG9wdD86IENoYW5nZVBhZ2VPcHRpb25zKTogdm9pZCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgKDxhbnk+JGJvZHkpLnBhZ2Vjb250YWluZXIoXCJjaGFuZ2VcIiwgdG8sIG9wdCk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBSb3V0ZXIuYmluZEV2ZW50cygpO1xyXG4gICAgICAgICAgICAvLyBGcmFtZXdvcmsg44Gu44Kk44OZ44Oz44OI44OP44Oz44OJ44Op44KS5pu05pawXHJcbiAgICAgICAgICAgIEZyYW1ld29yay5zZXR1cEV2ZW50SGFuZGxlcnMoKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIFJlZ2lzdGVyIHRvIFJvdXRlci5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSByb3V0ZSAgICB7U3RyaW5nfSAgIFtpbl0gcm91dGUgc3RyaW5nLCBpdCBjYW4gYmUgcmVndWxhciBleHByZXNzaW9uLlxyXG4gICAgICAgICAqIEBwYXJhbSBwYWdlICAgICB7U3RyaW5nfSAgIFtpbl0gcGFnZSB0ZW1wbGF0ZSBwYXRoLlxyXG4gICAgICAgICAqIEBwYXJhbSB0b3AgICAgICB7Qm9vbGVhbn0gIFtpbl0gc2V0IFwidHJ1ZVwiIGlmIGFwcGxpY2F0aW9uJ3MgdG9wIHZpZXcuIChvcHRpb25hbClcclxuICAgICAgICAgKiBAcGFyYW0gY2FsbGJhY2sge0Z1bmN0aW9ufSBbaW5dIGNhbGxiYWNrIGZvciBjdXN0b20gcGFnZSB0cmFuc2l0aW9uLiBJZiB5b3UgZG9uJ3Qgd2FudCB0byB0cmlnZ2VyIGpRTS5jaGFuZ2VQYWdlKCksIHJldHVybiB0cnVlIGJ5IHRoaXMgY2FsbGJhY2suIChvcHRpb25hbClcclxuICAgICAgICAgKiBAcmV0dXJuIHtSb3V0ZXJ9IFJvdXRlciBpbnN0YW5jZS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICog55m76YyyXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gcm91dGUgICAge1N0cmluZ30gICBbaW5dIOODq+ODvOODhuOCo+ODs+OCsOaWh+Wtl+WIlyAvIOato+imj+ihqOePvlxyXG4gICAgICAgICAqIEBwYXJhbSBwYWdlICAgICB7U3RyaW5nfSAgIFtpbl0gcGFnZSB0ZW1wbGF0ZSBwYXRoLiDjgqTjg5njg7Pjg4jlkI3jgavjgoLkvb/nlKjjgZXjgozjgotcclxuICAgICAgICAgKiBAcGFyYW0gdG9wICAgICAge0Jvb2xlYW59ICBbaW5dIFRvcCDjg5rjg7zjgrjjga7loLTlkIjjga8gdHJ1ZSDjgpLmjIflrpogKOS7u+aEjylcclxuICAgICAgICAgKiBAcGFyYW0gY2FsbGJhY2sge0Z1bmN0aW9ufSBbaW5dIOmBt+enu+OCkuiHqui6q+OBp+euoeeQhuOBmeOCi+WgtOWQiOOBq+aMh+WumuOBl+OAgeaIu+OCiuWApOOCkiB0cnVlIOOBq+ioreWumuOBmeOCi+OBqCBjaGFuZ2VQYWdlIOOCkuOCs+ODvOODq+OBl+OBquOBhCAo5Lu75oSPKVxyXG4gICAgICAgICAqIEByZXR1cm4ge1JvdXRlcn0g44Kk44Oz44K544K/44Oz44K544CC44Gf44Gg44GXIG1ldGhvZCBjaGFpbiDjgpLjgZfjgZ/jgYTloLTlkIjjga/jgIFhbnkgY2FzdCDjgYzlv4XopoHjgIJcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHJlZ2lzdGVyKHJvdXRlOiBzdHJpbmcsIHBhZ2U6IHN0cmluZywgdG9wOiBib29sZWFuID0gZmFsc2UsIGNhbGxiYWNrPzogKC4uLmFyZ3M6IGFueVtdKSA9PiBib29sZWFuKTogUm91dGVyIHtcclxuICAgICAgICAgICAgLy8gQmFja2JvbmUuUm91dGVyIOOBuOOBrueZu+mMsuOBryBoaXN0b3J5IOOBruWBnOatouOBjOW/heimgVxyXG4gICAgICAgICAgICBjb25zdCByZXN0YXJ0ID0gUm91dGVyLnN0b3AoKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG5hbWUgPSByb3V0ZSArIHBhZ2U7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRleHQ6IFJvdXRlQ29udGV4dCA9IHtcclxuICAgICAgICAgICAgICAgIHJvdXRlOiByb3V0ZSxcclxuICAgICAgICAgICAgICAgIHJlZ2V4cDogKDxhbnk+Um91dGVyLnNfcm91dGVyKS5fcm91dGVUb1JlZ0V4cChyb3V0ZSksXHJcbiAgICAgICAgICAgICAgICBwYWdlOiBwYWdlLFxyXG4gICAgICAgICAgICAgICAgdG9wOiB0b3AsXHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjazogY2FsbGJhY2sgfHwgZnVuY3Rpb24gKCkgeyByZXR1cm4gZmFsc2U7IH1cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGlmIChSb3V0ZXIucHVzaENvbnRleHQobmFtZSwgY29udGV4dCkpIHtcclxuICAgICAgICAgICAgICAgIFJvdXRlci5zX3JvdXRlci5yb3V0ZShyb3V0ZSwgbmFtZSwgKCkgPT4gey8qIG5vb3AgKi8gfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChyZXN0YXJ0KSB7XHJcbiAgICAgICAgICAgICAgICAvLyDlho3plovmmYLjga/lho3oqq3jgb/ovrzjgb/jgZfjgarjgYTjgIJcclxuICAgICAgICAgICAgICAgIFJvdXRlci5zdGFydCh7IHNpbGVudDogdHJ1ZSwgcGFnZUNvbnN0cnVjdDogZmFsc2UgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBSb3V0ZXI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogU3RhcnQgbGlzdGVuaW5nIGhhc2ggY2hhbmdlLlxyXG4gICAgICAgICAqIEl0IHNob3VsZCBiZSBjYWxsZWQgYWZ0ZXIgcmVnaXN0ZXIoKS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBvcHRpb25zIHtPYmplY3R9IFtpbl0gb3B0aW9ucyBvYmplY3QgZm9yIEJhY2tib25lLkhpc3RvcnkuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIOWxpeattOebo+imluOBrumWi+Wni1xyXG4gICAgICAgICAqIOeZu+mMsuWujOS6huW+jOOBq+WRvOOBs+WHuuOBmeOAglxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIG9wdGlvbnMge09iamVjdH0gW2luXSBCYWNrYm9uZS5IaXN0b3J5IOOBq+OCj+OBn+OCi+OCquODl+OCt+ODp+ODs1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgc3RhcnQob3B0aW9ucz86IFJvdXRlck9wdGlvbnMpOiB2b2lkIHtcclxuICAgICAgICAgICAgY29uc3Qgb3B0ID0gJC5leHRlbmQoeyBwYWdlQ29uc3RydWN0OiB0cnVlIH0sIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICBpZiAob3B0LnBhZ2VDb25zdHJ1Y3QpIHtcclxuICAgICAgICAgICAgICAgIEZyYW1ld29yay5jb25zdHJ1Y3RQYWdlcygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICgkLm1vYmlsZS5oYXNoTGlzdGVuaW5nRW5hYmxlZCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihUQUcgKyBcInNldHRpbmcgZXJyb3IuIGNvbmZpY3Q6ICQubW9iaWxlLmhhc2hMaXN0ZW5pbmdFbmFibGVkID0gdHJ1ZSwgY2Fubm90IHN0YXJ0LlwiKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBCYWNrYm9uZS5oaXN0b3J5LnN0YXJ0KG9wdCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogU3RvcCBsaXN0ZW5pbmcgaGFzaCBjaGFuZ2UuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHtCb29sZWFufSBwcmV2aW91cyBzdGF0dXMuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIOWxpeattOebo+imluOBrue1guS6hlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7Qm9vbGVhbn0g5Lul5YmN44Gu6ZaL5aeL54q25oWL44KS6L+U5Y20XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBzdG9wKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICBjb25zdCBwcmV2U3RhdGUgPSAoPGFueT5CYWNrYm9uZS5IaXN0b3J5KS5zdGFydGVkO1xyXG4gICAgICAgICAgICBCYWNrYm9uZS5oaXN0b3J5LnN0b3AoKTtcclxuICAgICAgICAgICAgcmV0dXJuIHByZXZTdGF0ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBDaGVjayByb3V0aW5nIHN0YXR1cy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IHRydWU6IHJvdXRpbmcgLyBmYWxzZTogbm90IHJvdXRpbmdcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICog44Or44O844OG44Kj44Oz44Kw44KS6ZaL5aeL44GX44Gm44GE44KL44GL5Yik5a6aXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHtCb29sZWFufSB0cnVlOiDmnInlirkgLyBmYWxzZTog54Sh5Yq5XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpc1JvdXRpbmcoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIHJldHVybiAoPGFueT5CYWNrYm9uZS5IaXN0b3J5KS5zdGFydGVkO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIFVSTCBuYXZpZ2F0aW9uLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHVybCAgICAgICAge1N0cmluZ30gICAgICAgICAgW2luXSBzZXQgYSBuYXZpZ2F0ZSBVUkwuIChyZWxhdGl2ZSBwYXRoIC8gYWJzb2x1dGUgcGF0aCAvIGZyYWdtZW50KVxyXG4gICAgICAgICAqIEBwYXJhbSB0cmFuc2l0aW9uIHtTdHJpbmd9ICAgICAgICAgIFtpbl0gc2V0IGEgdHJhbnNpdGlvbiBzdHJpbmcgKG9wdGlvbmFsKVxyXG4gICAgICAgICAqIEBwYXJhbSByZXZlcnNlICAgIHtCb29sZWFufSAgICAgICAgIFtpbl0gc2V0IGEgZGlyZWN0aW9uIHN0cmluZyBmb3IgdHJhbnNpdGlvbi4gdHJ1ZTpyZXZlcnNlIC8gZmFsc2U6bm9tYWwgKG9wdGlvbmFsKVxyXG4gICAgICAgICAqIEBwYXJhbSBvcHRpb25zICAgIHtOYXZpZ2F0ZU9wdGlvbnN9IFtpbl0gc2V0IGEgb3B0aW9ucyBvYmplY3QgZm9yIEJhY2tib25lLlJvdXRlci5uYXZpZ2F0ZSgpLiAob3B0aW9uYWwpXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIFVSTOmBt+enu1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHVybCAgICAgICAge1N0cmluZ30gICAgICAgICAgW2luXSDpgbfnp7sgVVJMIOOCkuaMh+WumiAo55u45a++44OR44K5L+e1tuWvvuODkeOCuS/jg5Xjg6njgrDjg6Hjg7Pjg4gpXHJcbiAgICAgICAgICogQHBhcmFtIHRyYW5zaXRpb24ge1N0cmluZ30gICAgICAgICAgW2luXSB0cmFuc2l0aW9uIOOBq+S9v+eUqOOBmeOCiyBlZmZlY3Qg44KS5oyH5a6aICjku7vmhI8pXHJcbiAgICAgICAgICogQHBhcmFtIHJldmVyc2UgICAge0Jvb2xlYW59ICAgICAgICAgW2luXSB0cmFuc2l0aW9uIOOBq+S9v+eUqOOBmeOCiyBkaXJlY3Rpb24g44KS5oyH5a6aIHRydWU6cmV2ZXJzZS9mYWxzZTrpgJrluLggKOS7u+aEjylcclxuICAgICAgICAgKiBAcGFyYW0gb3B0aW9ucyAgICB7TmF2aWdhdGVPcHRpb25zfSBbaW5dIEJhY2tib25lLlJvdXRlci5uYXZpZ2F0ZSgpIOOBq+a4oeOBleOCjOOCi+OCquODl+OCt+ODp+ODsyAo5Lu75oSPKVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgbmF2aWdhdGUodXJsOiBzdHJpbmcsIHRyYW5zaXRpb24/OiBzdHJpbmcsIHJldmVyc2U/OiBib29sZWFuLCBvcHRpb25zPzogTmF2aWdhdGVPcHRpb25zKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmICghIVJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8uaW5OYXZpZ2F0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAvLyDjgZnjgafjgasgTmF2aWdhdGlvbiDkuK3jgafjgYLjgozjgbDmipHmraJcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihUQUcgKyBcIlJvdXRlci5uYXZpZ2F0ZSgpIGNhbGxlZCBpbiBuYXZpZ2F0aW9uIHByb2MuXCIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKFJvdXRlci5pbml0Rmlyc3RQYWdlSWZOZWVkZWQodXJsKSkgeyAvLyBhdXRvSW5pdGlhbGl6ZVBhZ2Ug44GM5oyH5a6a44GV44KM44Gm44GE44Gq44GE44Go44GNXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG5hdk9wdGlvbnM6IE5hdmlnYXRlT3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCBSb3V0ZXIuc19kZWZhdWx0TmF2aWdhdGVPcHRpb25zLCBvcHRpb25zKTtcclxuXHJcbiAgICAgICAgICAgIC8vIOODmuODvOOCuOmBt+enu+mWi+Wni+mAmuefpS4gU3ViIEZsb3cg44Gr44Gm44GZ44Gn44Gr44Kz44O844Or44GV44KM44Gm44GE44KL5aC05ZCI44Gv5pei5a6a44Gu5L2V44KC44GX44Gq44GE44Kz44O844Or44OQ44OD44Kv44KS5L2/55So44GZ44KLLlxyXG4gICAgICAgICAgICBjb25zdCBub3RpZnlCZWZvcmVSb3V0ZUNoYW5nZSA9IFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8uY2FsbGVkQmVmb3JlUm91dGVDaGFuZ2UgPyBfZGVmYXVsdEJlZm9yZVJvdXRlQ2hhbmdlIDogX2JlZm9yZVJvdXRlQ2hhbmdlO1xyXG5cclxuICAgICAgICAgICAgUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mbyA9IHtcclxuICAgICAgICAgICAgICAgIHVybDogdXJsLFxyXG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogdHJhbnNpdGlvbixcclxuICAgICAgICAgICAgICAgIHJldmVyc2U6IHJldmVyc2UsXHJcbiAgICAgICAgICAgICAgICBiYWNrRGVzdGluYXRpb246IG5hdk9wdGlvbnMuYmFja0Rlc3RpbmF0aW9uLFxyXG4gICAgICAgICAgICAgICAgbm9IYXNoQ2hhbmdlOiBuYXZPcHRpb25zLm5vSGFzaENoYW5nZSxcclxuICAgICAgICAgICAgICAgIGludGVudDogbmF2T3B0aW9ucy5pbnRlbnQgfHwge30sXHJcbiAgICAgICAgICAgICAgICBwb3NpdGl2ZU5hdmlnYXRlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgY2FsbGVkQmVmb3JlUm91dGVDaGFuZ2U6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBpbk5hdmlnYXRpb246IHRydWUsXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvLyDjg5rjg7zjgrjpgbfnp7vplovlp4vpgJrnn6VcclxuICAgICAgICAgICAgbm90aWZ5QmVmb3JlUm91dGVDaGFuZ2UoKVxyXG4gICAgICAgICAgICAgICAgLmZhaWwoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGJlZm9yZVJvdXRlQ2hhbmdlKCkg44GM5aSx5pWX44GX44Gf5aC05ZCI44CB6Ie05ZG955qE44Gq5LiN5YW35ZCI44Go44Gq44KL44Gf44KB44CBZXJyb3Ig6KiY6Yyy44Gu44G/44Gr44GX44Gm5YWI44Gr6YCy44KA44CCXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihUQUcgKyBcImJlZm9yZSByb3V0ZSBjaGFuZ2UgY2FsbCwgZmFpbGVkLlwiKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuYWx3YXlzKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoUm91dGVyLmlzUm91dGluZygpICYmICFSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLm5vSGFzaENoYW5nZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobmF2T3B0aW9ucy5zdWJGbG93KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG5hdk9wdGlvbnMuc3ViRmxvdy5vcGVyYXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiYmVnaW5cIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUm91dGVyLnN0YXJ0U3ViRmxvdyhuYXZPcHRpb25zLnN1YkZsb3cpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZW5kXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJvdXRlci5maW5pc2hTdWJGbG93KG5hdk9wdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47IC8vIG5hdmlnYXRpb24g44Gv5ZG844Gw44Gq44GEXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFRBRyArIFwidW5rbm93biBzdWJGbG93Lm9wZXJhdGlvbi4gb3BlcmF0aW9uOiBcIiArIG5hdk9wdGlvbnMuc3ViRmxvdy5vcGVyYXRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBCYWNrYm9uZS5oaXN0b3J5Lm5hdmlnYXRlKHVybCwgbmF2T3B0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJhY2tib25lLmhpc3RvcnkubG9hZFVybCgpIOOBjOOCs+ODvOODq+OBleOCjOOBquOBi+OBo+OBn+WgtOWQiCwgbmF2aWdhdGlvbiDntYLkuoZcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXN1bHQgfHwgXCJzdHJpbmdcIiA9PT0gdHlwZW9mIHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5pbk5hdmlnYXRpb24gPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuYXZPcHRpb25zLnN1YkZsb3cpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihUQUcgKyBcInN1YkZsb3cgb25seSBzdXBwb3J0ZWQgdW5kZXIgcm91dGluZyBhbmQgaGFzaCBjaGFuZ2UgY29uZGl0aW9uLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBmcmFnbWVudCA9IEJhY2tib25lLmhpc3RvcnkuZ2V0RnJhZ21lbnQodXJsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNvbnRleHQ6IFJvdXRlQ29udGV4dDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8ubm9IYXNoQ2hhbmdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBub0hhc2hDaGFuZ2Ug44GM5oyH5a6a44GV44KM44Gf44Go44GNXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0ID0gPFJvdXRlQ29udGV4dD5fLmZpbmQoPGFueT5Sb3V0ZXIuc19yb290Q29udGV4dHMsIChjdHg6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjdHgucmVnZXhwLnRlc3QoZnJhZ21lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBCYWNrYm9uZS5Sb3V0ZXIg44GM5pyJ5Yq544Gn44Gq44GE44Go44GNXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0ID0gPFJvdXRlQ29udGV4dD5fLmZpbmRXaGVyZSg8YW55PlJvdXRlci5zX3Jvb3RDb250ZXh0cywgeyByb3V0ZTogZnJhZ21lbnQgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRleHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybCA9IGNvbnRleHQucGFnZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBSb3V0ZXIuY2hhbmdlUGFnZSh1cmwpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIE5hdmlnYXRlIGZyb20gVG9wIFBhZ2UuXHJcbiAgICAgICAgICogSWYgU3ViRmxvdyBzZXQgdXAsIHRoZSBwYXJhbSBpcyBjbGVhcmVkLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHRvICAgICAgICAge1N0cmluZ3xQYWdlU3RhY2t8UGFnZVN0YWNrW119IFtpbl0gc2V0IGEgbmF2aWdhdGUgVVJMIG9yIFBhZ2VTdGFja09wdGlvbnMgb2JqZWN0IG9yIGFycmF5LlxyXG4gICAgICAgICAqIEBwYXJhbSB0cmFuc2l0aW9uIHtTdHJpbmd9ICAgICAgICAgICAgICAgICAgICAgICBbaW5dIHNldCBhIHRyYW5zaXRpb24gc3RyaW5nIChvcHRpb25hbClcclxuICAgICAgICAgKiBAcGFyYW0gcmV2ZXJzZSAgICB7Qm9vbGVhbn0gICAgICAgICAgICAgICAgICAgICAgW2luXSBzZXQgYSBkaXJlY3Rpb24gc3RyaW5nIGZvciB0cmFuc2l0aW9uLiB0cnVlOnJldmVyc2UgLyBmYWxzZTpub21hbCAob3B0aW9uYWwpXHJcbiAgICAgICAgICogQHBhcmFtIG9wdGlvbnMgICAge05hdmlnYXRlT3B0aW9uc30gICAgICAgICAgICAgIFtpbl0gc2V0IGEgb3B0aW9ucyBvYmplY3QgZm9yIEJhY2tib25lLlJvdXRlci5uYXZpZ2F0ZSgpLiAob3B0aW9uYWwpXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIOODiOODg+ODl+ODmuODvOOCuOOBi+OCieOBrueUu+mdoumBt+enu1xyXG4gICAgICAgICAqIFN1YkZsb3cg44GM5oyH5a6a44GV44KM44Gm44GE44Gf5aC05ZCI44Gv44Kv44Oq44Ki44GV44KM44KLXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gdG8gICAgICAgICB7U3RyaW5nfFBhZ2VTdGFja3xQYWdlU3RhY2tbXX0gW2luXSDpgbfnp7sgVVJMIC8gUGFnZVN0YWNrT3B0aW9ucyDjgqrjg5bjgrjjgqfjgq/jg4gv6YWN5YiXXHJcbiAgICAgICAgICogQHBhcmFtIHRyYW5zaXRpb24ge1N0cmluZ30gICAgICAgICAgICAgICAgICAgICAgIFtpbl0gdHJhbnNpdGlvbiDjgavkvb/nlKjjgZnjgosgZWZmZWN0IOOCkuaMh+WumiAo5Lu75oSPKVxyXG4gICAgICAgICAqIEBwYXJhbSByZXZlcnNlICAgIHtCb29sZWFufSAgICAgICAgICAgICAgICAgICAgICBbaW5dIHRyYW5zaXRpb24g44Gr5L2/55So44GZ44KLIGRpcmVjdGlvbiDjgpLmjIflrpogdHJ1ZTpyZXZlcnNlL2ZhbHNlOumAmuW4uCAo5Lu75oSPKVxyXG4gICAgICAgICAqIEBwYXJhbSBvcHRpb25zICAgIHtOYXZpZ2F0ZU9wdGlvbnN9ICAgICAgICAgICAgICBbaW5dIEJhY2tib25lLlJvdXRlci5uYXZpZ2F0ZSgpIOOBq+a4oeOBleOCjOOCi+OCquODl+OCt+ODp+ODsyAo5Lu75oSPKVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgbmF2aWdhdGVGcm9tVG9wKFxyXG4gICAgICAgICAgICB0bz86IHN0cmluZyB8IFBhZ2VTdGFjayB8IFBhZ2VTdGFja1tdLFxyXG4gICAgICAgICAgICB0cmFuc2l0aW9uPzogc3RyaW5nLFxyXG4gICAgICAgICAgICByZXZlcnNlPzogYm9vbGVhbixcclxuICAgICAgICAgICAgb3B0aW9ucz86IE5hdmlnYXRlT3B0aW9uc1xyXG4gICAgICAgICk6IHZvaWQge1xyXG4gICAgICAgICAgICBjb25zdCBzdGFjayA9IFJvdXRlci5nZXRKcW1IaXN0b3J5KCkuc3RhY2s7XHJcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRQYWdlID0gc3RhY2tbUm91dGVyLmdldEpxbUhpc3RvcnkoKS5hY3RpdmVJbmRleF07XHJcbiAgICAgICAgICAgIGNvbnN0IF90cmFuc2l0aW9uID0gdHJhbnNpdGlvbiB8fCBjdXJyZW50UGFnZS50cmFuc2l0aW9uO1xyXG4gICAgICAgICAgICBjb25zdCBfcmV2ZXJzZSA9IChudWxsICE9IHJldmVyc2UpID8gcmV2ZXJzZSA6IHRydWU7XHJcbiAgICAgICAgICAgIGNvbnN0IGRlc3RTdGFja3M6IFBhZ2VTdGFja1tdID0gKCgpOiBQYWdlU3RhY2tbXSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRvKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFwic3RyaW5nXCIgPT09IHR5cGVvZiB0bykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiA8UGFnZVN0YWNrW10+W3sgcm91dGU6IHRvIH1dO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0byBpbnN0YW5jZW9mIEFycmF5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRvO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gPFBhZ2VTdGFja1tdPlt0b107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pKCk7XHJcblxyXG4gICAgICAgICAgICAvLyDmjIflrprjgZXjgozjgZ8gU3ViRmxvdyDjgpLliYrpmaRcclxuICAgICAgICAgICAgc3RhY2suZm9yRWFjaCgodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSB2YWx1ZVtSb3V0ZXIuU1VCRkxPV19QQVJBTV07XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8g5Yid5pyf44Oa44O844K444GrIFN1YkZsb3cg44OR44Op44Oh44O844K/44KS5oyH5a6aXHJcbiAgICAgICAgICAgIHN0YWNrWzBdW1JvdXRlci5TVUJGTE9XX1BBUkFNXSA9IHtcclxuICAgICAgICAgICAgICAgIG9wZXJhdGlvbjogXCJiZWdpblwiLFxyXG4gICAgICAgICAgICAgICAgZGVzdEJhc2U6IHN0YWNrWzBdLmhhc2gsICAgIC8vIOWIneacn+ODmuODvOOCuOOBruODj+ODg+OCt+ODpVxyXG4gICAgICAgICAgICAgICAgZGVzdFN0YWNrczogZGVzdFN0YWNrcyxcclxuICAgICAgICAgICAgICAgIGFkZGl0aW9uYWxEaXN0YW5jZTogMCxcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIFJvdXRlci5uYXZpZ2F0ZShudWxsLCBfdHJhbnNpdGlvbiwgX3JldmVyc2UsICQuZXh0ZW5kKHt9LCBvcHRpb25zLCB7XHJcbiAgICAgICAgICAgICAgICBzdWJGbG93OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3BlcmF0aW9uOiBcImVuZFwiLFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogQmFjayB0byBwcmV2aW91cyBoaXN0b3J5LlxyXG4gICAgICAgICAqIEl0J3Mgc2FtZSBhcyBicm93c2VyIGJhY2sgYnV0dG9uJ3MgYmVoYXZpb3VyLlxyXG4gICAgICAgICAqIFtOb3RlXSBJZiBzZXQgdGhlIGpRTTogZGF0YS1yZWw9XCJiYWNrXCIsIHdvcmsgYXMgd2VsbC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICog5bGl5q2044KS5oi744KLXHJcbiAgICAgICAgICog44OW44Op44Km44K244Gu5oi744KL44Oc44K/44Oz44Go5ZCM44GY5oyZ5YuV44CCXHJcbiAgICAgICAgICogalFNOiBkYXRhLXJlbD1cImJhY2tcIiDjgpLmjIflrprjgZfjgabjgoLlkIzjgZjjgafjgYLjgovjgZPjgajjgavms6jmhI/jgIJcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGJhY2soKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmICghIVJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8uaW5OYXZpZ2F0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAvLyDjgZnjgafjgasgTmF2aWdhdGlvbiDkuK3jgafjgYLjgozjgbDmipHmraJcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihUQUcgKyBcIlJvdXRlci5iYWNrKCkgY2FsbGVkIGluIG5hdmlnYXRpb24gcHJvYy5cIik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoUm91dGVyLmlzVG9wUGFnZSgpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBUb3Ag44Oa44O844K444Gr5oyH5a6a44GV44KM44Gm44GE44KM44Gw57WC5LqGXHJcbiAgICAgICAgICAgICAgICBjb25zdCBhcHAgPSAoPGFueT5uYXZpZ2F0b3IpLmFwcCB8fCB7fTtcclxuICAgICAgICAgICAgICAgIGlmICghIWFwcC5leGl0QXBwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXBwLmV4aXRBcHAoKTsgICAgLy8gbm90ZTogbmV2ZXIgZXhpdCBvbiBpT1NcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8gPSB7XHJcbiAgICAgICAgICAgICAgICBpbk5hdmlnYXRpb246IHRydWUsXHJcbiAgICAgICAgICAgICAgICBjYWxsZWRCZWZvcmVSb3V0ZUNoYW5nZTogdHJ1ZSxcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8vIOODmuODvOOCuOmBt+enu+mWi+Wni+mAmuefpVxyXG4gICAgICAgICAgICBfYmVmb3JlUm91dGVDaGFuZ2UoKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICQubW9iaWxlLmJhY2soKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuZmFpbCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcImJlZm9yZSByb3V0ZSBjaGFuZ2UgY2FsbCwgZmFpbGVkLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvID0ge307XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBTdG9yZSBJbnRlbnQgb2JqZWN0LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiBJbnRlbnQg44KS5qC857SNXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBwdXNoSW50ZW50KGludGVudDogSW50ZW50KTogdm9pZCB7XHJcbiAgICAgICAgICAgIFJvdXRlci5zX2xhc3RJbnRlbnQgPSAkLmV4dGVuZCh0cnVlLCBSb3V0ZXIuc19sYXN0SW50ZW50LCBpbnRlbnQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIEdldCBJbnRlbnQgb2JqZWN0LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiBJbnRlbnQg44KS5Y+W5b6XXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBwb3BJbnRlbnQoKTogSW50ZW50IHtcclxuICAgICAgICAgICAgY29uc3QgaW50ZW50ID0gUm91dGVyLnNfbGFzdEludGVudDtcclxuICAgICAgICAgICAgUm91dGVyLnNfbGFzdEludGVudCA9IHt9O1xyXG4gICAgICAgICAgICByZXR1cm4gaW50ZW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIEdldCBxdWVyeSBwYXJhbWV0ZXJzLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiBxdWVyeSBwYXJhbWV0ZXIg44Gr5oyH5a6a44GV44KM44Gf5byV5pWw44Gu5Y+W5b6XXHJcbiAgICAgICAgICog44Oa44O844K46YG356e75Lit44Gr44Gu44G/44Ki44Kv44K744K55Y+v6IO9IChwYWdlYmVmb3JlY3JlYXRlIO+9niBwYWdlY2hhbmdlKVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgZ2V0UXVlcnlQYXJhbWV0ZXJzKCk6IGFueSB7XHJcbiAgICAgICAgICAgIGlmIChSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLmludGVudCAmJiBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLmludGVudC5wYXJhbXMpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLmludGVudC5wYXJhbXNbXCJxdWVyeVBhcmFtc1wiXTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogQmVnaW4gc3ViIGZsb3cgdHJhbnNhY3Rpb24uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gdXJsICAgICAgICB7U3RyaW5nfSAgICAgICAgICBbaW5dIHNldCBhIG5hdmlnYXRlIFVSTC4gKHJlbGF0aXZlIHBhdGggLyBhYnNvbHV0ZSBwYXRoIC8gZnJhZ21lbnQpXHJcbiAgICAgICAgICogQHBhcmFtIG9wdGlvbnMgICAge05hdmlnYXRlT3B0aW9uc30gW2luXSBzZXQgYSBvcHRpb25zIG9iamVjdCBmb3IgQmFja2JvbmUuUm91dGVyLm5hdmlnYXRlKCkuIChvcHRpb25hbClcclxuICAgICAgICAgKiBAcGFyYW0gdHJhbnNpdGlvbiB7U3RyaW5nfSAgICAgICAgICBbaW5dIHNldCBhIHRyYW5zaXRpb24gc3RyaW5nIChvcHRpb25hbClcclxuICAgICAgICAgKiBAcGFyYW0gcmV2ZXJzZSAgICB7Qm9vbGVhbn0gICAgICAgICBbaW5dIHNldCBhIGRpcmVjdGlvbiBzdHJpbmcgZm9yIHRyYW5zaXRpb24uIHRydWU6cmV2ZXJzZSAvIGZhbHNlOm5vbWFsIChvcHRpb25hbClcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICogc3ViIGZsb3cg44OI44Op44Oz44K244Kv44K344On44Oz44Gu6ZaL5aeLLlxyXG4gICAgICAgICAqIG5hdmlnYXRlKCkg44GuIOezluiho+ani+aWh1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHVybCAgICAgICAge1N0cmluZ30gICAgICAgICAgW2luXSDpgbfnp7sgVVJMIOOCkuaMh+WumiAo55u45a++44OR44K5L+e1tuWvvuODkeOCuS/jg5Xjg6njgrDjg6Hjg7Pjg4gpXHJcbiAgICAgICAgICogQHBhcmFtIG9wdGlvbnMgICAge05hdmlnYXRlT3B0aW9uc30gW2luXSBCYWNrYm9uZS5Sb3V0ZXIubmF2aWdhdGUoKSDjgavmuKHjgZXjgozjgovjgqrjg5fjgrfjg6fjg7MgKOS7u+aEjylcclxuICAgICAgICAgKiBAcGFyYW0gdHJhbnNpdGlvbiB7U3RyaW5nfSAgICAgICAgICBbaW5dIHRyYW5zaXRpb24g44Gr5L2/55So44GZ44KLIGVmZmVjdCDjgpLmjIflrpogKOS7u+aEjylcclxuICAgICAgICAgKiBAcGFyYW0gcmV2ZXJzZSAgICB7Qm9vbGVhbn0gICAgICAgICBbaW5dIHRyYW5zaXRpb24g44Gr5L2/55So44GZ44KLIGRpcmVjdGlvbiDjgpLmjIflrpogdHJ1ZTpyZXZlcnNlL2ZhbHNlOumAmuW4uCAo5Lu75oSPKVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgYmVnaW5TdWJGbG93KHVybDogc3RyaW5nLCBvcHRpb25zOiBOYXZpZ2F0ZU9wdGlvbnMsIHRyYW5zaXRpb24/OiBzdHJpbmcsIHJldmVyc2U/OiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGNvbnN0IG9wdDogTmF2aWdhdGVPcHRpb25zID0gJC5leHRlbmQoe30sIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICBvcHQuc3ViRmxvdyA9IG9wdC5zdWJGbG93IHx8IHsgb3BlcmF0aW9uOiBcImJlZ2luXCIgfTtcclxuICAgICAgICAgICAgaWYgKFwiYmVnaW5cIiAhPT0gb3B0LnN1YkZsb3cub3BlcmF0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFRBRyArIFwibG9naWMgZXJyb3IuIGludmFsaWQgc3ViZmxvdyBvcGVyYXRpb24uIFtvcGVyYXRpb246IFwiICsgb3B0LnN1YkZsb3cub3BlcmF0aW9uICsgXCJdXCIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFJvdXRlci5uYXZpZ2F0ZSh1cmwsIHRyYW5zaXRpb24sIHJldmVyc2UsIG9wdCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogQ29tbWl0IHN1YiBmbG93IHRyYW5zYWN0aW9uLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHRyYW5zaXRpb24ge1N0cmluZ30gIFtpbl0gc2V0IGEgdHJhbnNpdGlvbiBzdHJpbmcgKG9wdGlvbmFsKVxyXG4gICAgICAgICAqIEBwYXJhbSByZXZlcnNlICAgIHtCb29sZWFufSBbaW5dIHNldCBhIGRpcmVjdGlvbiBzdHJpbmcgZm9yIHRyYW5zaXRpb24uIHRydWU6cmV2ZXJzZSAvIGZhbHNlOm5vbWFsIChvcHRpb25hbClcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICogc3ViIGZsb3cg44OI44Op44Oz44K244Kv44K344On44Oz44Gu57WC5LqGLlxyXG4gICAgICAgICAqIG5hdmlnYXRlKCkg44GuIOezluiho+ani+aWh1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHRyYW5zaXRpb24ge1N0cmluZ30gIFtpbl0gdHJhbnNpdGlvbiDjgavkvb/nlKjjgZnjgosgZWZmZWN0IOOCkuaMh+WumiAo5Lu75oSPKVxyXG4gICAgICAgICAqIEBwYXJhbSByZXZlcnNlICAgIHtCb29sZWFufSBbaW5dIHRyYW5zaXRpb24g44Gr5L2/55So44GZ44KLIGRpcmVjdGlvbiDjgpLmjIflrpogdHJ1ZTpyZXZlcnNlL2ZhbHNlOumAmuW4uCAo5Lu75oSPKVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgY29tbWl0U3ViRmxvdyh0cmFuc2l0aW9uPzogc3RyaW5nLCByZXZlcnNlPzogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgICAgICAgICBSb3V0ZXIubmF2aWdhdGUobnVsbCwgdHJhbnNpdGlvbiwgcmV2ZXJzZSwge1xyXG4gICAgICAgICAgICAgICAgc3ViRmxvdzoge1xyXG4gICAgICAgICAgICAgICAgICAgIG9wZXJhdGlvbjogXCJlbmRcIixcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogQ2FuY2VsIHN1YiBmbG93IHRyYW5zYWN0aW9uLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHRyYW5zaXRpb24ge1N0cmluZ30gIFtpbl0gc2V0IGEgdHJhbnNpdGlvbiBzdHJpbmcgKG9wdGlvbmFsKVxyXG4gICAgICAgICAqIEBwYXJhbSByZXZlcnNlICAgIHtCb29sZWFufSBbaW5dIHNldCBhIGRpcmVjdGlvbiBzdHJpbmcgZm9yIHRyYW5zaXRpb24uIHRydWU6cmV2ZXJzZVtkZWZhdWx0XSAvIGZhbHNlOm5vbWFsIChvcHRpb25hbClcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICogc3ViIGZsb3cg44OI44Op44Oz44K244Kv44K344On44Oz44Gu44Kt44Oj44Oz44K744OrLlxyXG4gICAgICAgICAqIG5hdmlnYXRlKCkg44GuIOezluiho+ani+aWh1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHRyYW5zaXRpb24ge1N0cmluZ30gIFtpbl0gdHJhbnNpdGlvbiDjgavkvb/nlKjjgZnjgosgZWZmZWN0IOOCkuaMh+WumiAo5Lu75oSPKVxyXG4gICAgICAgICAqIEBwYXJhbSByZXZlcnNlICAgIHtCb29sZWFufSBbaW5dIHRyYW5zaXRpb24g44Gr5L2/55So44GZ44KLIGRpcmVjdGlvbiDjgpLmjIflrpogdHJ1ZTpyZXZlcnNlW+aXouWuml0vZmFsc2U66YCa5bi4ICjku7vmhI8pXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBjYW5jZWxTdWJGbG93KHRyYW5zaXRpb24/OiBzdHJpbmcsIHJldmVyc2U/OiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgICAgICAgIC8vIOi1t+eCueOBruODmuODvOOCuOOBq+aIu+OCi1xyXG4gICAgICAgICAgICBjb25zdCBiYXNlSW5mbyA9IFJvdXRlci5kZXRlY3RTdWJGbG93QmFzZUluZm8oKTtcclxuICAgICAgICAgICAgYmFzZUluZm8uc3ViRmxvd1BhcmFtLmFkZGl0aW9uYWxEaXN0YW5jZSA9IDA7XHJcbiAgICAgICAgICAgIFJvdXRlci5uYXZpZ2F0ZShudWxsLCB0cmFuc2l0aW9uLFxyXG4gICAgICAgICAgICAgICAgKG51bGwgIT0gcmV2ZXJzZSkgPyByZXZlcnNlIDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBzdWJGbG93OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wZXJhdGlvbjogXCJlbmRcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVzdFN0YWNrczogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBDaGVjayBpbiBzdWIgZmxvdy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICogc3ViIGZsb3cg5YaF44Gn44GC44KL44GL5Yik5a6aXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpc0luU3ViRmxvdygpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgY29uc3Qgc3RhY2sgPSBSb3V0ZXIuZ2V0SnFtSGlzdG9yeSgpLnN0YWNrO1xyXG4gICAgICAgICAgICBjb25zdCBoYXMgPSBfLnNvbWUoc3RhY2ssICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICEhdmFsdWVbUm91dGVyLlNVQkZMT1dfUEFSQU1dO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIGhhcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBDaGVjayBmcm9tIGhhc2ggY2hhbmdlZCBuYXZpZ2F0aW9uLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiBIYXNoIOWkieabtOOBq+OCiOOBo+OBpiBOYXZpZ2F0ZSDjgYzotbfjgZPjgaPjgZ/jgYvliKTlrppcclxuICAgICAgICAgKiBcInBhZ2VjaGFuZ2VcIiDjgYznmbrnlJ/jgZnjgovjgb7jgafjgavliKTlrprlj6/og71cclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGZyb21IYXNoQ2hhbmdlZCgpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgLy8gcG9zaXRpdmVOYXZpZ2F0ZSA9IGZhbHNlIOOBr+WQq+OCgeOBquOBhFxyXG4gICAgICAgICAgICByZXR1cm4gUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5pbk5hdmlnYXRpb24gJiYgKG51bGwgPT0gUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5wb3NpdGl2ZU5hdmlnYXRlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBSZWdpc3RlciBwYWdlIHN0YWNrLlxyXG4gICAgICAgICAqIFNldCByZWdpc3RlcmVkIHJvdXRlKHMpIHRvIGFkZCB0byBwYWdlIHN0YWNrIG9uIHRoZSBiYXNpcyBvZiB0aGUgcHJlc2VudCBzdGFjayBwb3NpdGlvbi5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBwYWdlU3RhY2sgICAge1BhZ2VTdGFja3xQYWdlU3RhY2tbXX0gICBbaW5dIFBhZ2VTdGFja09wdGlvbnMgb2JqZWN0IG9yIGFycmF5LlxyXG4gICAgICAgICAqIEBwYXJhbSB3aXRoTmF2aWdhdGUge0Jvb2xlYW59ICAgICAgICAgICAgICAgICBbaW5dIHRydWU6IHdpdGggbmF2aWdhdGUgZmluYWwgc3RhY2suIChkZWZhdWx0KSAvIGZhbHNlOiBub3QgbmF2aWdhdGUuXHJcbiAgICAgICAgICogQHBhcmFtIG9wdGlvbnMgICAgICB7TmF2aWdhdGVPcHRpb25zfSAgICAgICAgIFtpbl0gc2V0IGEgb3B0aW9ucyBvYmplY3QgZm9yIEJhY2tib25lLlJvdXRlci5uYXZpZ2F0ZSgpLihvcHRpb25hbClcclxuICAgICAgICAgKiBAcmV0dXJuIHtCb29sZWFufSB0cnVlOiBzdWNjZWVkZWQgLyBmYWxzZTogZmFpbGVkXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIOODmuODvOOCuOOCueOCv+ODg+OCr+eZu+mMslxyXG4gICAgICAgICAqIOeZu+mMsua4iOOBv+OBriByb3V0ZSDjgpLmjIflrprjgZfjgabjgIHnj77lnKjjga7kvY3nva7jgpLln7rngrnjgavjg5rjg7zjgrjjgrnjgr/jg4Pjgq/jgavnmbvpjLJcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBwYWdlU3RhY2sgICAge1BhZ2VTdGFja3xQYWdlU3RhY2tbXX0gICBbaW5dIFBhZ2VTdGFja09wdGlvbnMg44Kq44OW44K444Kn44Kv44OIL+mFjeWIl1xyXG4gICAgICAgICAqIEBwYXJhbSB3aXRoTmF2aWdhdGUge0Jvb2xlYW59ICAgICAgICAgICAgICAgICBbaW5dIHRydWU6IOacgOW+jOOBruOCueOCv+ODg+OCr+OBq+WvvuOBl+OBpuODmuODvOOCuOmBt+enu+OBmeOCiy4gKGRlZmF1bHQpIC8gZmFsc2U6IOODmuODvOOCuOmBt+enu+OBl+OBquOBhC5cclxuICAgICAgICAgKiBAcGFyYW0gb3B0aW9ucyAgICAgIHtOYXZpZ2F0ZU9wdGlvbnN9ICAgICAgICAgW2luXSBCYWNrYm9uZS5Sb3V0ZXIubmF2aWdhdGUoKSDjgavmuKHjgZXjgozjgovjgqrjg5fjgrfjg6fjg7MgKOS7u+aEjylcclxuICAgICAgICAgKiBAcmV0dXJuIHtCb29sZWFufSB0cnVlOiDmiJDlip8gLyBmYWxzZTog5aSx5pWX44CCXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyByZWdpc3RlclBhZ2VTdGFjayhwYWdlU3RhY2s6IFBhZ2VTdGFjaywgd2l0aE5hdmlnYXRlPzogYm9vbGVhbiwgb3B0aW9ucz86IE5hdmlnYXRlT3B0aW9ucyk6IGJvb2xlYW47XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyByZWdpc3RlclBhZ2VTdGFjayhwYWdlU3RhY2s6IFBhZ2VTdGFja1tdLCB3aXRoTmF2aWdhdGU/OiBib29sZWFuLCBvcHRpb25zPzogTmF2aWdhdGVPcHRpb25zKTogYm9vbGVhbjtcclxuICAgICAgICBwdWJsaWMgc3RhdGljIHJlZ2lzdGVyUGFnZVN0YWNrKHBhZ2VTdGFjazogYW55LCB3aXRoTmF2aWdhdGU/OiBib29sZWFuLCBvcHRpb25zPzogTmF2aWdhdGVPcHRpb25zKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5ld1N0YWNrcyA9IFtdO1xyXG4gICAgICAgICAgICBsZXQgZmFpbGVkID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICBwYWdlU3RhY2sgPSAocGFnZVN0YWNrIGluc3RhbmNlb2YgQXJyYXkpID8gcGFnZVN0YWNrIDogW3BhZ2VTdGFja107XHJcbiAgICAgICAgICAgIHdpdGhOYXZpZ2F0ZSA9IChudWxsID09IHdpdGhOYXZpZ2F0ZSkgPyBmYWxzZSA6IHdpdGhOYXZpZ2F0ZTtcclxuXHJcbiAgICAgICAgICAgICgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtYWtlU3RhY2sgPSAoaW5mbzogUGFnZVN0YWNrKTogYW55ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgdXJsOiBzdHJpbmc7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZyYWdtZW50ID0gQmFja2JvbmUuaGlzdG9yeS5nZXRGcmFnbWVudChpbmZvLnJvdXRlKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb250ZXh0ID0gPFJvdXRlQ29udGV4dD5fLmZpbmQoPGFueT5Sb3V0ZXIuc19yb290Q29udGV4dHMsIChjdHg6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3R4LnJlZ2V4cC50ZXN0KGZyYWdtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbnRleHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFRBRyArIFwicm91dGUgaXMgbm90IHJlZ2lzdGVyZWQuIHJvdXRlOiBcIiArIGluZm8ucm91dGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1cmwgPSBSb3V0ZXIucGF0aFRvSnFtRGF0YVVybChjb250ZXh0LnBhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RhY2sgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvdXRlOiBpbmZvLnJvdXRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYWdlVXJsOiB1cmwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBpbmZvLnRpdGxlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uOiBpbmZvLnRyYW5zaXRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVybDogdXJsLFxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0YWNrO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMCwgbiA9IHBhZ2VTdGFjay5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzdGFjayA9IG1ha2VTdGFjayhwYWdlU3RhY2tbaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghc3RhY2spIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmFpbGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3U3RhY2tzLnB1c2goc3RhY2spO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSkoKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChmYWlsZWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIFJvdXRlciDjga7lgZzmraJcclxuICAgICAgICAgICAgICAgIGxldCByZXN0YXJ0ID0gUm91dGVyLnN0b3AoKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNpbGVudExlbmd0aCA9IG5ld1N0YWNrcy5sZW5ndGggLSAxO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZmluYWxJbmRleCA9IG5ld1N0YWNrcy5sZW5ndGggLSAxO1xyXG5cclxuICAgICAgICAgICAgICAgIFJvdXRlci5nZXRKcW1IaXN0b3J5KCkuY2xlYXJGb3J3YXJkKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIG4gPSBzaWxlbnRMZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5oYXNoID0gbmV3U3RhY2tzW2ldLnJvdXRlO1xyXG4gICAgICAgICAgICAgICAgICAgIFJvdXRlci5nZXRKcW1IaXN0b3J5KCkuc3RhY2sucHVzaChuZXdTdGFja3NbaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIFJvdXRlci5nZXRKcW1IaXN0b3J5KCkuYWN0aXZlSW5kZXggPSBSb3V0ZXIuZ2V0SnFtSGlzdG9yeSgpLnN0YWNrLmxlbmd0aCAtIDE7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gZmluYWwgc3RhY2sgd2l0aCBuYXZpZ2F0ZVxyXG4gICAgICAgICAgICAgICAgaWYgKHdpdGhOYXZpZ2F0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRyYW5zaXRpb24gPSAoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPSBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLnRyYW5zaXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLnRyYW5zaXRpb247XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3U3RhY2tzW2ZpbmFsSW5kZXhdLnRyYW5zaXRpb247XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KSgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXZlcnNlID0gKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgIT0gUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5yZXZlcnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5yZXZlcnNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSkoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdGFydCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIFJvdXRlci5zdGFydCh7IHNpbGVudDogdHJ1ZSB9KTtcclxuICAgICAgICAgICAgICAgICAgICBSb3V0ZXIubmF2aWdhdGUobmV3U3RhY2tzW2ZpbmFsSW5kZXhdLnJvdXRlLCB0cmFuc2l0aW9uLCByZXZlcnNlLCBvcHRpb25zKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24uaGFzaCA9IG5ld1N0YWNrc1tmaW5hbEluZGV4XS5yb3V0ZTtcclxuICAgICAgICAgICAgICAgICAgICBSb3V0ZXIuZ2V0SnFtSGlzdG9yeSgpLnN0YWNrLnB1c2gobmV3U3RhY2tzW2ZpbmFsSW5kZXhdKTtcclxuICAgICAgICAgICAgICAgICAgICBSb3V0ZXIuZ2V0SnFtSGlzdG9yeSgpLmFjdGl2ZUluZGV4ID0gUm91dGVyLmdldEpxbUhpc3RvcnkoKS5zdGFjay5sZW5ndGggLSAxO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIFJvdXRlciDjga7lho3plotcclxuICAgICAgICAgICAgICAgIGlmIChyZXN0YXJ0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgUm91dGVyLnN0YXJ0KHsgc2lsZW50OiB0cnVlIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KSgpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogR2V0IGpRTSdzIGhpc3Rvcnkgb2JqZWN0XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIGpRTSDjga4gSGlzdG9yeSDjgqrjg5bjgrjjgqfjgq/jg4jjga7lj5blvpdcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgZ2V0SnFtSGlzdG9yeSgpOiBhbnkge1xyXG4gICAgICAgICAgICByZXR1cm4gJC5tb2JpbGUubmF2aWdhdGUuaGlzdG9yeTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gcHJpdmF0ZSBzdGF0aWMgbWV0aG9kc1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogT3ZlcnJpZGU6IEJhY2tib25lLkhpc3RvcnkubG9hZFVybCgpLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICogQmFja2JvbmUuSGlzdG9yeS5sb2FkVXJsKCkg44Gu44Kq44O844OQ44O844Op44Kk44OJXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGN1c3RvbUxvYWRVcmwoZnJhZ21lbnQ6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICBjb25zdCBoYW5kbGVkID0gUm91dGVyLnNfbG9hZFVybChmcmFnbWVudCk7XHJcbiAgICAgICAgICAgIGlmICghaGFuZGxlZCkge1xyXG4gICAgICAgICAgICAgICAgUm91dGVyLm9uUm91dGVGYWlsZWQoZnJhZ21lbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIE92ZXJyaWRlOiAkLm1vYmlsZS5iYWNrKCkuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBmYWlsIHNhZmUgcHJvY2Vzc2luZy5cclxuICAgICAgICAgKiAgSWYgdXNpbmcgQmFja2JvbmUncyBSb3V0ZXIsXHJcbiAgICAgICAgICogIHRoaXMgY2xhc3MgdW51c2VzIGhpc3Rvcnkgb2JqZWN0IG9mIGpRdWVyeSBNb2JpbGUgMS40LFxyXG4gICAgICAgICAqICBhbmQgc3RhbmRhcmRpemUgYXMgYnJvd3NlciBiYWNrIGJ1dHRvbidzIGJlaGF2aW91ci4gKGpRTSAxLjMgY29tcGFyYWJsZSlcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqICQubW9iaWxlLmJhY2soKSDjga7jgqrjg7zjg5Djg7zjg6njgqTjg4lcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFtUQkRdIGZhaWwgc2FmZSDlh6bnkIZcclxuICAgICAgICAgKiAgQmFja2JvbmUg44GuIFJvdXRlciDjgpLkvb/nlKjjgZfjgabjgYTjgovloLTlkIjjgIFcclxuICAgICAgICAgKiAgalF1ZXJ5IE1vYmlsZSAxLjQg5Lul6ZmN44Gu5YaF6YOo44GuIEhpc3Rvcnkg566h55CG44Gv5L2/55So44Gb44Ga44GrXHJcbiAgICAgICAgICogIDEuMyDnm7jlvZPjga7jg5bjg6njgqbjgrbjga5b5oi744KLXeOBruaMmeWLleOBq+e1seS4gOOBmeOCi+OAglxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBjdXN0b21KcW1CYWNrKCk6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAoUm91dGVyLmlzUm91dGluZygpKSB7XHJcbiAgICAgICAgICAgICAgICBoaXN0b3J5LmJhY2soKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIGpRTSDml6Llrprlh6bnkIZcclxuICAgICAgICAgICAgICAgIFJvdXRlci5zX2JhY2soKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIEJpbmQgZXZlbnRzLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICog44Kk44OZ44Oz44OI44OQ44Kk44Oz44OJXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGJpbmRFdmVudHMoKTogdm9pZCB7XHJcbiAgICAgICAgICAgICQoZG9jdW1lbnQpXHJcbiAgICAgICAgICAgICAgICAub25lKFwicGFnZWNoYW5nZVwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKFJvdXRlci5zX2luaXRPcHRpb25zLmFuY2hvclZjbGljaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBhbmNob3IgdmNsaWNrXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoZG9jdW1lbnQpLm9uKFwidmNsaWNrXCIsIFwiW2hyZWZdXCIsIChldmVudDogSlF1ZXJ5LkV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBSb3V0ZXIub25BbmNob3JWY2xpY2tlZChldmVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAub24oXCJwYWdlYmVmb3Jlc2hvd1wiLCAoZXZlbnQ6IEpRdWVyeS5FdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFwiZGF0YS1iYWNrLWRzdFwiIOOCkiBwYWdlIOOBq+ioreWumlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9IFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8uYmFja0Rlc3RpbmF0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFjdGl2ZTogT2JqZWN0ID0gUm91dGVyLmdldEpxbUhpc3RvcnkoKS5nZXRBY3RpdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlW1JvdXRlci5CQUNLX0RFU1RJTkFUSU9OX1VSTF0gPSBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLmJhY2tEZXN0aW5hdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLm9uKFwicGFnZXNob3dcIiwgKGV2ZW50OiBKUXVlcnkuRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBhY3RpdmU6IE9iamVjdCA9IFJvdXRlci5nZXRKcW1IaXN0b3J5KCkuZ2V0QWN0aXZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFjdGl2ZVtSb3V0ZXIuU1VCRkxPV19QQVJBTV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIGFjdGl2ZVtSb3V0ZXIuU1VCRkxPV19QQVJBTV07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5vbihcInBhZ2VjaGFuZ2UgcGFnZWNvbnRhaW5lcmxvYWRmYWlsZWRcIiwgKGV2ZW50OiBKUXVlcnkuRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvID0ge307XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgO1xyXG5cclxuICAgICAgICAgICAgLy8gYmFjayBrZXkgYXNzaWduXHJcbiAgICAgICAgICAgIENEUC5zZXRCYWNrQnV0dG9uSGFuZGxlcihSb3V0ZXIuYmFjayk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogU3RvcmUgdGhlIFJvb3RDb250ZXh0LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKiBAcGFyYW0gbmFtZSAgICB7U3RyaW5nfSAgICAgICBbaW5dIG5hbWUgb2Ygcm91dGVcclxuICAgICAgICAgKiBAcGFyYW0gY29udGV4dCB7Um91dGVDb250ZXh0fSBbaW5dIGNvbnRleHQgb2JqZWN0XHJcbiAgICAgICAgICogQHJldHVybiB0cnVlOiBzdWNjZWVkZWQgLyBmYWxzZTogYWxyZWFkeSByZWdpc3RlcmVkXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIFJvb3RDb250ZXh0IOOBruagvOe0jVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKiBAcGFyYW0gbmFtZSAgICB7U3RyaW5nfSAgICAgICBbaW5dIHJvdXRlIOWQjVxyXG4gICAgICAgICAqIEBwYXJhbSBjb250ZXh0IHtSb3V0ZUNvbnRleHR9IFtpbl0gY29udGV4dCDjgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAgICAgKiBAcmV0dXJuIHRydWU6IOeZu+mMsuaIkOWKnyAvIGZhbHNlOiDjgZnjgafjgavnmbvpjLLjgZXjgozjgabjgYTjgotcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBwdXNoQ29udGV4dChuYW1lOiBzdHJpbmcsIGNvbnRleHQ6IFJvdXRlQ29udGV4dCk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICBpZiAoISFSb3V0ZXIuc19yb290Q29udGV4dHNbbmFtZV0pIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoVEFHICsgXCJsb2dpYyBlcnJvci4gcm91dGUgaXMgYWxyZWFkeSByZWdpc3RlcmVkLiBuYW1lOiBcIiArIG5hbWUpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFJvdXRlci5zX3Jvb3RDb250ZXh0c1tuYW1lXSA9IGNvbnRleHQ7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIENoZWNrIGlmICQubW9iaWxlLmluaXRpYWxpemVQYWdlKCkgaXMgY2FsbGVkIG9yIG5vdCwgYW5kIGNhbGwgaXQgaWYgbmVlZGVkLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKiBAcGFyYW0gdXJsIHtTdHJpbmd9ICBbaW5dIHNldCBhIG5hdmlnYXRlIFVSTC4gKHJlbGF0aXZlIHBhdGggLyBhYnNvbHV0ZSBwYXRoIC8gZnJhZ21lbnQpXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqICQubW9iaWxlLmluaXRpYWxpemVQYWdlKCkg44GM5ZG844Gw44KM44Gm44GE44KL44GL56K66KqN44GX44CB5b+F6KaB44Gq44KJ5Yid5pyf5YyW44GZ44KL44CCXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqIEBwYXJhbSB1cmwge1N0cmluZ30gW2luXSDpgbfnp7sgVVJMIOOCkuaMh+WumiAo55u45a++44OR44K5L+e1tuWvvuODkeOCuS/jg5Xjg6njgrDjg6Hjg7Pjg4gpXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgaW5pdEZpcnN0UGFnZUlmTmVlZGVkKHVybDogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIGlmICghJC5tb2JpbGUuYXV0b0luaXRpYWxpemVQYWdlKSB7XHJcbiAgICAgICAgICAgICAgICAkKGRvY3VtZW50KS5vbmUoXCJwYWdlYmVmb3JlY2hhbmdlXCIsIChldmVudDogSlF1ZXJ5LkV2ZW50LCBkYXRhOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhLnRvUGFnZSA9IEZyYW1ld29yay50b1VybCh1cmwpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAkLm1vYmlsZS5pbml0aWFsaXplUGFnZSgpO1xyXG4gICAgICAgICAgICAgICAgJC5tb2JpbGUuYXV0b0luaXRpYWxpemVQYWdlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBDaGVjayBmb3IgY3VycmVudCBwYWdlIGlzIHRvcC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICogQHJldHVybiB0cnVlOiB0b3AgcGFnZSAvIGZhbHNlOiBub3QgdG9wIHBhZ2VcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICog54++5Zyo44Gu44Oa44O844K444GMIHRvcCDjgavmjIflrprjgZXjgozjgabjgYTjgovjgYvliKTlrppcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICogQHJldHVybiB0cnVlOiB0b3Ag5oyH5a6aIC8gZmFsc2U6IHRvcCDjgafjga/jgarjgYRcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBpc1RvcFBhZ2UoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZyYWdtZW50ID0gQmFja2JvbmUuaGlzdG9yeS5nZXRGcmFnbWVudCgkLm1vYmlsZS5wYXRoLnBhcnNlVXJsKGxvY2F0aW9uLmhyZWYpLmhhc2gpO1xyXG4gICAgICAgICAgICBjb25zdCBjb250ZXh0ID0gPFJvdXRlQ29udGV4dD5fLmZpbmQoPGFueT5Sb3V0ZXIuc19yb290Q29udGV4dHMsIChjdHg6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGN0eC5yZWdleHAudGVzdChmcmFnbWVudCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gKG51bGwgPT0gY29udGV4dCkgPyBmYWxzZSA6IGNvbnRleHQudG9wO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIENhbGxlZCB3aGVuIGFuY2hvciByZWNlaXZlZCBcInZjbGlja1wiIGV2ZW50LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKiBAcmV0dXJuIHRydWU6IG5lZWQgZGVmYXVsdCBwcm9jZXNzaW5nIC8gZmFsc2U6IG5lZWQgY3VzdG9tIHByb2Nlc3NpbmdcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICogYW5jaG9yIOOBjCB2Y2xpY2sg44GV44KM44Gf44Go44GN44Gr44Kz44O844Or44GV44KM44KLXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqIEByZXR1cm4gdHJ1ZTogZGVmYXVsdCDlh6bnkIYgLyBmYWxzZTog44Kr44K544K/44Og5Yem55CGXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgb25BbmNob3JWY2xpY2tlZChldmVudDogSlF1ZXJ5LkV2ZW50KTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIGlmIChSb3V0ZXIuaXNKdXN0QmVmb3JlVmNsaWNrZWQoKSkge1xyXG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gUm91dGVyLmZvbGxvd0FuY2hvcihldmVudCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogQW5jaG9yIHByb2Nlc3NpbmcuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiBhbmNob3Ig5Yem55CGXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGZvbGxvd0FuY2hvcihldmVudDogSlF1ZXJ5LkV2ZW50KTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIGNvbnN0ICR0YXJnZXQgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpO1xyXG4gICAgICAgICAgICBjb25zdCB1cmw6IHN0cmluZyA9ICR0YXJnZXQuanFtRGF0YShcImhyZWZcIikgfHwgJHRhcmdldC5hdHRyKFwiaHJlZlwiKTtcclxuICAgICAgICAgICAgY29uc3QgdHJhbnNpdGlvbjogc3RyaW5nID0gJHRhcmdldC5qcW1EYXRhKFwidHJhbnNpdGlvblwiKTtcclxuICAgICAgICAgICAgY29uc3QgZGlyZWN0aW9uOiBzdHJpbmcgPSAkdGFyZ2V0LmpxbURhdGEoXCJkaXJlY3Rpb25cIik7XHJcbiAgICAgICAgICAgIGNvbnN0IGJhY2tEc3Q6IGFueSA9ICR0YXJnZXQuYXR0cihSb3V0ZXIuREFUQV9CQUNLX0RFU1RJTkFUSU9OKTtcclxuICAgICAgICAgICAgY29uc3Qgbm9IYXNoQ2hhbmdlOiBib29sZWFuID0gJHRhcmdldC5hdHRyKFJvdXRlci5EQVRBX05PX0hBU0hfQ0hBTkdFKSA/XHJcbiAgICAgICAgICAgICAgICAkdGFyZ2V0LmF0dHIoUm91dGVyLkRBVEFfTk9fSEFTSF9DSEFOR0UpID09PSBcInRydWVcIiA6IGZhbHNlO1xyXG4gICAgICAgICAgICBjb25zdCBub0hyZWZIYW5kbGU6IGJvb2xlYW4gPSAkdGFyZ2V0LmF0dHIoUm91dGVyLkRBVEFfTk9fVkNMSUNLX0hBTkRMRSkgP1xyXG4gICAgICAgICAgICAgICAgJHRhcmdldC5hdHRyKFJvdXRlci5EQVRBX05PX1ZDTElDS19IQU5ETEUpID09PSBcInRydWVcIiA6IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgLypcclxuICAgICAgICAgICAgICogLSDmmI7npLrnmoTjgavjg4/jg7Pjg4njg6vjgZfjgarjgYTmjIflrprjgYzjgYLjgovloLTlkIhcclxuICAgICAgICAgICAgICogLSBqUU0g44Gu44OV44Op44Kw44Oh44Oz44OI44Gu5aC05ZCIXHJcbiAgICAgICAgICAgICAqIOaXouWumuOBruWHpueQhuOCkuihjOOBhlxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgaWYgKG5vSHJlZkhhbmRsZSB8fCBSb3V0ZXIubmVlZERlZmF1bHRPcGVyYXRpb24odXJsKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIGN1c3RvbSBiZWhhdmllclxyXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKFJvdXRlci5pc0JhY2tCdXR0b25DbGlja2VkKGV2ZW50KSkge1xyXG4gICAgICAgICAgICAgICAgUm91dGVyLmJhY2soKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIFJvdXRlci5uYXZpZ2F0ZSh1cmwsIHRyYW5zaXRpb24sICEhZGlyZWN0aW9uLCB7IG5vSGFzaENoYW5nZTogbm9IYXNoQ2hhbmdlLCBiYWNrRGVzdGluYXRpb246IGJhY2tEc3QgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBDaGVjayBkZWZhdWx0IHByb2Nlc3NpbmcgbmVlZGVkLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKiBAcGFyYW0gIHVybCB7U3RyaW5nfSBbaW5dIHVybCBzdHJpbmdcclxuICAgICAgICAgKiBAcmV0dXJuIHRydWU6IG5lZWQgZGVmYXVsdCBwcm9jZXNzaW5nIC8gZmFsc2U6IG5lZWQgbm90XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIOaXouWumuOBruWHpueQhuOCkuihjOOCj+OBm+OCi+OBi+WIpOWumlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKiBAcGFyYW0gIHVybCB7U3RyaW5nfSBbaW5dIHVybCDmloflrZfliJdcclxuICAgICAgICAgKiBAcmV0dXJuIHRydWU6IOaXouWumuOBruWHpueQhuOBjOW/heimgSAvIGZhbHNlOiDkuI3opoFcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBuZWVkRGVmYXVsdE9wZXJhdGlvbih1cmw6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICBpZiAoIXVybCB8fCAoXCIjXCIgPT09IHVybCkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKFwiI1wiID09PSB1cmxbMF0pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAhUm91dGVyLmNhblJlc29sdmVSb3V0ZSh1cmwpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogQ2hlY2sgc3RhdHVzIG9mIEJhY2tib25lLlJvdXRlciBpZiB0aGV5IGNhbiByZXNvbHZlIHJvdXRlLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKiBAcGFyYW0gIHVybCB7U3RyaW5nfSBbaW5dIHVybCDmloflrZfliJdcclxuICAgICAgICAgKiBAcmV0dXJuIHRydWU6IGNhbiByZXNvbHZlIC8gZmFsc2U6IGNhbiBub3RcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICogQmFja2JvbmUuUm91dGVyIOOBjCByb3V0ZSDjgpLop6Pmsbrlj6/og73jgYvliKTlrppcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICogQHBhcmFtICB1cmwge1N0cmluZ30gW2luXSB1cmwg5paH5a2X5YiXXHJcbiAgICAgICAgICogQHJldHVybiB0cnVlOiDop6Pmsbrlj6/og70gLyBmYWxzZTog6Kej5rG65LiN5Y+vXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgY2FuUmVzb2x2ZVJvdXRlKHVybDogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZyYWdtZW50ID0gQmFja2JvbmUuaGlzdG9yeS5nZXRGcmFnbWVudCh1cmwpO1xyXG4gICAgICAgICAgICByZXR1cm4gXy5hbnkoQmFja2JvbmUuaGlzdG9yeS5oYW5kbGVycywgZnVuY3Rpb24gKGhhbmRsZXI6IGFueSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGhhbmRsZXIucm91dGUudGVzdChmcmFnbWVudCkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogQ2hlY2sgXCJ2Y2xpY2tcIiBmaXJlZCBhdCB0aGUgbGFzdCBtaW51dGUuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiDnm7TliY3jgasgdmNsaWNrIOOBjOWRvOOBsOOCjOOBn+OBi+WIpOWumlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBpc0p1c3RCZWZvcmVWY2xpY2tlZCgpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgY29uc3QgaXNCZWZvcmUgPSAoRGF0ZS5ub3coKSAtIFJvdXRlci5zX2xhc3RDbGlja2VkVGltZSkgPCBSb3V0ZXIuREVMQVlfVElNRSAqIDI7XHJcbiAgICAgICAgICAgIFJvdXRlci5zX2xhc3RDbGlja2VkVGltZSA9IERhdGUubm93KCk7XHJcbiAgICAgICAgICAgIHJldHVybiBpc0JlZm9yZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBDaGVjayBiYWNrIGJ1dHRvbiBjbGlja2VkLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICogQmFjayBCdXR0b24g44GM44Kv44Oq44OD44Kv44GV44KM44Gf44GL5Yik5a6aXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGlzQmFja0J1dHRvbkNsaWNrZWQoZXZlbnQ6IEpRdWVyeS5FdmVudCk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICBpZiAoJChldmVudC5jdXJyZW50VGFyZ2V0KS5qcW1EYXRhKFwicmVsXCIpID09PSBcImJhY2tcIikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBJdCBjYWxsZWQgb24gc3VjY2VlZCByb3V0aW5nIHRyaWdnZXJlZCBieSBjaGFuZ2luZyBoYXNoLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKiBAcGFyYW0gbmFtZSB7U3RyaW5nfSBbaW5dIG5hbWUgb2Ygcm91dGVcclxuICAgICAgICAgKiBAcGFyYW0gYXJncyB7QXJyYXl9ICBbaW5dIGFycmF5IG9mIHBhcmFtdGVyXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIOODj+ODg+OCt+ODpeWApOOBjOWkieabtOOBleOCjOOAgeODq+ODvOODhuOCo+ODs+OCsOOBjOaIkOWKn+OBl+OBn+OBqOOBjeOBq+OCs+ODvOODq+OBleOCjOOCi1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKiBAcGFyYW0gbmFtZSB7U3RyaW5nfSBbaW5dIHJvdXRlIOWQjeOAgnBhZ2Ug44Gu5YCk44GM5rih44KL44CCXHJcbiAgICAgICAgICogQHBhcmFtIGFyZ3Mge0FycmF5fSAgW2luXSDjg5Hjg6njg6Hjg7zjgr/phY3liJfjgIJcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBvblJvdXRlU3VjY2VlZGVkKG5hbWU6IHN0cmluZywgLi4uYXJnczogYW55W10pOiB2b2lkIHtcclxuICAgICAgICAgICAgY29uc3QgY29udGV4dCA9IDxSb3V0ZUNvbnRleHQ+Um91dGVyLnNfcm9vdENvbnRleHRzW25hbWVdO1xyXG4gICAgICAgICAgICBpZiAoISFjb250ZXh0KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbnRlbnQgPSB7IHBhcmFtczogeyBxdWVyeVBhcmFtczogYXJncyB9IH07XHJcbiAgICAgICAgICAgICAgICBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLmluTmF2aWdhdGlvbiA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBpZiAobnVsbCAhPSBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLmludGVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGludGVudC5wYXJhbXMgPSAkLmV4dGVuZCh7fSwgaW50ZW50LnBhcmFtcywgUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5pbnRlbnQucGFyYW1zIHx8IHt9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8uaW50ZW50ID0gJC5leHRlbmQoe30sIFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8uaW50ZW50LCBpbnRlbnQpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaGFuZGxlZCA9IGNvbnRleHQuY2FsbGJhY2soYXJncyk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWhhbmRsZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBSb3V0ZXIuY2hhbmdlUGFnZShjb250ZXh0LnBhZ2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogSXQgY2FsbGVkIG9uIGZhaWxlZCByb3V0aW5nIHRyaWdnZXJlZCBieSBjaGFuZ2luZyBoYXNoLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKiBAcGFyYW0gbmFtZSB7U3RyaW5nfSBbaW5dIG5hbWUgb2Ygcm91dGVcclxuICAgICAgICAgKiBAcGFyYW0gYXJncyB7QXJyYXl9ICBbaW5dIGFycmF5IG9mIHBhcmFtdGVyXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIOODj+ODg+OCt+ODpeWApOOBjOWkieabtOOBleOCjOOAgeODq+ODvOODhuOCo+ODs+OCsOOBjOWkseaVl+OBl+OBn+OBqOOBjeOBq+OCs+ODvOODq+OBleOCjOOCi1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKiBAcGFyYW0gbmFtZSB7U3RyaW5nfSBbaW5dIHJvdXRlIOWQjeOAgnBhZ2Ug44Gu5YCk44GM5rih44KL44CCXHJcbiAgICAgICAgICogQHBhcmFtIGFyZ3Mge0FycmF5fSAgW2luXSDjg5Hjg6njg6Hjg7zjgr/phY3liJfjgIJcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBvblJvdXRlRmFpbGVkKGZyYWdtZW50OiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICAgICAgUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5pbk5hdmlnYXRpb24gPSB0cnVlO1xyXG4gICAgICAgICAgICBpZiAobnVsbCA9PSBmcmFnbWVudCkge1xyXG4gICAgICAgICAgICAgICAgZnJhZ21lbnQgPSBCYWNrYm9uZS5oaXN0b3J5LmdldEZyYWdtZW50KCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIHJvdXRlIOOBjOino+axuuOBp+OBjeOBquOBi+OBo+OBn+OCguOBruOCkueuoeeQhuS4i+OBq1xyXG4gICAgICAgICAgICBpZiAoUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5wb3NpdGl2ZU5hdmlnYXRlKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgY29udGV4dCA9IDxSb3V0ZUNvbnRleHQ+Um91dGVyLnNfcm9vdENvbnRleHRzW2ZyYWdtZW50XTtcclxuICAgICAgICAgICAgICAgIGlmIChudWxsID09IGNvbnRleHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250ZXh0ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByb3V0ZTogZnJhZ21lbnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2V4cDogKDxhbnk+Um91dGVyLnNfcm91dGVyKS5fcm91dGVUb1JlZ0V4cChmcmFnbWVudCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2U6IFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8udXJsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3A6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjazogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIFJvdXRlci5wdXNoQ29udGV4dChmcmFnbWVudCwgY29udGV4dCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIGZyYWdtZW50IOOBi+OCiSBwYXRoIOOCkuino+axulxyXG4gICAgICAgICAgICBsZXQgcGF0aCA9IGZyYWdtZW50O1xyXG4gICAgICAgICAgICBpZiAobnVsbCAhPSBSb3V0ZXIuc19yb290Q29udGV4dHNbZnJhZ21lbnRdKSB7XHJcbiAgICAgICAgICAgICAgICBwYXRoID0gUm91dGVyLnNfcm9vdENvbnRleHRzW2ZyYWdtZW50XS5wYWdlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBSb3V0ZXIuY2hhbmdlUGFnZShwYXRoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBUaGlzIGZ1bmN0aW9uIGp1c3QgY2FsbHMgalF1ZXJ5IE1vYmlsZSdzIG5hdmlnYXRpb24gbWV0aG9kLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKiBAcGFyYW0gcGF0aCB7U3RyaW5nfSBbaW5dIHRvIHBhZ2UgcGF0aFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiBqUXVlcnkgTW9iaWxlIOOBq+OCiOOCi+ODmuODvOOCuOmBt+enu+aMh+WumlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKiBAcGFyYW0gcGF0aCB7U3RyaW5nfSBbaW5dIOmBt+enu+WFiOODkeOCueOCkuaMh+WumlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGNoYW5nZVBhZ2UocGF0aDogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGxldCBub3RpZnlCZWZvcmVSb3V0ZUNoYW5nZTogKCkgPT4gSVByb21pc2VCYXNlPGFueT47XHJcblxyXG4gICAgICAgICAgICAvLyBkYXRhLXJlbD1cImJhY2tcIiwg44OW44Op44Km44K244Oc44K/44OzLCBIL1cgQmFjayBLZXkg44GM5oq85LiL44GV44KM44Gf44Go44GNXHJcbiAgICAgICAgICAgIGlmICghUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5wb3NpdGl2ZU5hdmlnYXRlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5pbkFkZGl0aW9uYWxCYWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5pbkFkZGl0aW9uYWxCYWNrID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIFJvdXRlci5kZWNpZGVEaXJlY3Rpb24ocGF0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g5oyH5a6a5YWI44Gr5oi744KL44GL5Yik5a6aXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYWRkaXRpb25hbCA9IFJvdXRlci5kZXRlY3RBZGRpdGlvbmFsQmFja0Rpc3RhbmNlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKDAgPCBhZGRpdGlvbmFsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIDLlm57nm67ku6XpmY3jga4gaGFzaCBjaGFuZ2Ug44Gr44Gv5Y+N5b+c44GV44Gb44Gq44GELlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLmluQWRkaXRpb25hbEJhY2sgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBSb3V0ZXIuZ2V0SnFtSGlzdG9yeSgpLmFjdGl2ZUluZGV4IC09IGFkZGl0aW9uYWw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpc3RvcnkuZ28oLWFkZGl0aW9uYWwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIOmBt+enu+WFiOOBjCBzdWJmbG93IOmWi+Wni+eCueOBp+OBguOCi+WgtOWQiOOAgXBhcmFtIOOCkuWJiumZpFxyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3ViRmxvd0luZm8gPSBSb3V0ZXIuZGV0ZWN0U3ViRmxvd0Jhc2VJbmZvKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoc3ViRmxvd0luZm8uaXNDdXJyZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHN1YkZsb3dJbmZvLnN0YWNrW1JvdXRlci5TVUJGTE9XX1BBUkFNXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIOiDveWLleeahOmBt+enu+OBruWgtOWQiCBwcmV2aW91c0luZGV4IOOCkuabtOaWsFxyXG4gICAgICAgICAgICAgICAgUm91dGVyLmdldEpxbUhpc3RvcnkoKS5wcmV2aW91c0luZGV4ID0gUm91dGVyLmdldEpxbUhpc3RvcnkoKS5hY3RpdmVJbmRleDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8g44Oa44O844K46YG356e76ZaL5aeL6YCa55+lLiDjgZnjgafjgavjgrPjg7zjg6vjgZXjgozjgabjgYTjgovloLTlkIjjga/ml6Llrprjga7kvZXjgoLjgZfjgarjgYTjgrPjg7zjg6vjg5Djg4Pjgq/jgpLkvb/nlKjjgZnjgosuXHJcbiAgICAgICAgICAgIG5vdGlmeUJlZm9yZVJvdXRlQ2hhbmdlID0gUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5jYWxsZWRCZWZvcmVSb3V0ZUNoYW5nZSA/IF9kZWZhdWx0QmVmb3JlUm91dGVDaGFuZ2UgOiBfYmVmb3JlUm91dGVDaGFuZ2U7XHJcblxyXG4gICAgICAgICAgICBub3RpZnlCZWZvcmVSb3V0ZUNoYW5nZSgpXHJcbiAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g5LuY5Yqg5oOF5aCxXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8uaW50ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFJvdXRlci5wdXNoSW50ZW50KFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8uaW50ZW50KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIFJvdXRlci50cmVhdFVybEhpc3RvcnkoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFnZVRyYW5zaXRpb24gPSAoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby50cmFuc2l0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby50cmFuc2l0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFJvdXRlci5zX2ZpcnN0Q2hhbmdlUGFnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgUm91dGVyLnNfZmlyc3RDaGFuZ2VQYWdlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJub25lXCI7ICAvLyBzcGxhc2gg44GL44KJ44Gu6YG356e7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJC5tb2JpbGUuZGVmYXVsdFBhZ2VUcmFuc2l0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSkoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJC5tb2JpbGUuY2hhbmdlUGFnZShGcmFtZXdvcmsudG9VcmwocGF0aCksIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0xvYWRNc2c6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbGxvd1NhbWVQYWdlVHJhbnNpdGlvbjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogcGFnZVRyYW5zaXRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldmVyc2U6IFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8ucmV2ZXJzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZnJvbUhhc2hDaGFuZ2U6ICFSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLnBvc2l0aXZlTmF2aWdhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZUhhc2g6ICFSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLm5vSGFzaENoYW5nZSxcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuZmFpbCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihUQUcgKyBcImJlZm9yZSByb3V0ZSBjaGFuZ2UgY2FsbCwgZmFpbGVkLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvID0ge307XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBEZWNpZGUgZGlyZWN0aW9uIHBhcmFtZXRlci5cclxuICAgICAgICAgKiBJdCdzIGFzIHNhbWUgYXMgalFNIGludGVybmFsIGltcGxlbWVudC4gKGltcGVyZmVjdGlvbilcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICogQHBhcmFtIHBhdGgge1N0cmluZ30gW2luXSB0byBwYWdlIHBhdGhcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICogZGlyZWN0aW9uIOOBruWIpOWumlxyXG4gICAgICAgICAqIGpRTSDjga7lhoXpg6jlrp/oo4XjgajnrYnkvqEgKOS4jeWujOWFqClcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICogQHBhcmFtIHBhdGgge1N0cmluZ30gW2luXSDpgbfnp7vlhYjjg5HjgrnjgpLmjIflrppcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBkZWNpZGVEaXJlY3Rpb24ocGF0aDogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGNvbnN0IHVybCA9ICQubW9iaWxlLnBhdGguY29udmVydFVybFRvRGF0YVVybChGcmFtZXdvcmsudG9VcmwocGF0aCkpO1xyXG5cclxuICAgICAgICAgICAgaWYgKG51bGwgPT0gUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby50cmFuc2l0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLnRyYW5zaXRpb24gPSBSb3V0ZXIuZ2V0SnFtSGlzdG9yeSgpLmdldEFjdGl2ZSgpLnRyYW5zaXRpb247XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIFJvdXRlci5nZXRKcW1IaXN0b3J5KCkuZGlyZWN0KHtcclxuICAgICAgICAgICAgICAgIHVybDogdXJsLFxyXG4gICAgICAgICAgICAgICAgcHJlc2VudDogZnVuY3Rpb24gKG5ld1BhZ2U6IGFueSwgZGlyZWN0aW9uOiBzdHJpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGRpcmVjdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiYmFja1wiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgPT0gUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5yZXZlcnNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5yZXZlcnNlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZm9yd2FyZFwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgPT0gUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby50cmFuc2l0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby50cmFuc2l0aW9uID0gbmV3UGFnZS50cmFuc2l0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oVEFHICsgXCJ1bmtub3duIGRpcmVjdGlvbjogXCIgKyBkaXJlY3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIG1pc3Npbmc6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAvLyDliJ3mnJ/jg5rjg7zjgrggVVJMIOOBr+WIpOWumuOBp+OBjeOBquOBhOOAguato+W4uOezu+OAglxyXG4gICAgICAgICAgICAgICAgICAgIGlmICgxID09PSBSb3V0ZXIuZ2V0SnFtSGlzdG9yeSgpLmFjdGl2ZUluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFJvdXRlci5nZXRKcW1IaXN0b3J5KCkucHJldmlvdXNJbmRleCA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFJvdXRlci5nZXRKcW1IaXN0b3J5KCkuYWN0aXZlSW5kZXggPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCA9PSBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLnJldmVyc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFJvdXRlci5zX2xhc3ROYXZpZ2F0ZUluZm8ucmV2ZXJzZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKDAgIT09IFJvdXRlci5nZXRKcW1IaXN0b3J5KCkuYWN0aXZlSW5kZXgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFRBRyArIFwidW5rbm93biBkaXJlY3Rpb24uXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogUmV0dXJuIGFkZGl0aW9uYWwgYmFjayBkaXN0YW5jZSBjb3VudCB3aGVuIGJhY2sgZGVzdGluYXRpb24gc2V0LlxyXG4gICAgICAgICAqIChjb25zdCBmdW5jdGlvbilcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICogQHJldHVybiB7TnVtYmVyfSBjb3VudCBvZiBhZGRpdGlvbmEgYmFjayBkaXN0YW5jZS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICog5oi744KK5YWI44GM5oyH5a6a44GV44KM44Gm44GE44KL44Go44GN44CB6L+95Yqg44GuIEJhY2sg5pWw44KS6L+U44GX44G+44GZ44CCXHJcbiAgICAgICAgICogKOOBk+OBrumWouaVsOOBryBSb3V0ZXIg44Gu54q25oWL44KS5aSJ5pu044GX44G+44Gb44KT44CCKVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKiBAcmV0dXJuIHtTdHJpbmd9IOi/veWKoOOBpyBCYWNrIOOBq+W/heimgeOBqui3nemboi5cclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBkZXRlY3RBZGRpdGlvbmFsQmFja0Rpc3RhbmNlKCk6IG51bWJlciB7XHJcbiAgICAgICAgICAgIGNvbnN0IHN0YWNrID0gUm91dGVyLmdldEpxbUhpc3RvcnkoKS5zdGFjaztcclxuICAgICAgICAgICAgY29uc3QgaGlzdG9yeUFjdGl2ZUluZGV4ID0gUm91dGVyLmdldEpxbUhpc3RvcnkoKS5hY3RpdmVJbmRleDsgICAgLy8gZGVjaWRlRGlyZWN0aW9uKCkg44GuIFJvdXRlci5nZXRKcW1IaXN0b3J5KCkuZGlyZWN0KCkg44Gr44KI44Gj44Gm44CBaGlzdG9yeSDjga4gYWN0aXZlSW5kZXgg44Gv44GZ44Gn44Gr5aSJ44KP44Gj44Gm44GE44KLXHJcbiAgICAgICAgICAgIGNvbnN0IHByZXZpb3VzSW5kZXggPSBSb3V0ZXIuZ2V0SnFtSGlzdG9yeSgpLnByZXZpb3VzSW5kZXg7ICAgICAgIC8vIFvmiLvjgotd44GM5oq85LiL44GV44KM44Gf5aC05ZCI44Gr5YCk44GM5YWl44KLXHJcbiAgICAgICAgICAgIGxldCBpLCBiYWNrRHN0LCBkaXN0YW5jZSwgZnJhZ21lbnQsIGNvbnRleHQsIGpxbURhdGFVcmw7XHJcblxyXG4gICAgICAgICAgICAvLyBjaGVjayBcIm9wZXJhdGlvblwiLiBb5oi744KLXeOBiuOCiOOBsyBjbGVhckZvcndhcmQoKSDjgZXjgozjgabjgYTjgarjgYTnirbms4HjgpLjg4Hjgqfjg4Pjgq9cclxuICAgICAgICAgICAgaWYgKCFSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLnJldmVyc2UgfHwgbnVsbCA9PSBwcmV2aW91c0luZGV4IHx8ICFzdGFja1twcmV2aW91c0luZGV4XSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFwiYmFja0RzdCBleGlzdHNcIi4gW+aIu+OCiuWFiF3jgYzmjIflrprjgZXjgozjgabjgYTjgovjgYvjg4Hjgqfjg4Pjgq9cclxuICAgICAgICAgICAgYmFja0RzdCA9IHN0YWNrW3ByZXZpb3VzSW5kZXhdW1JvdXRlci5CQUNLX0RFU1RJTkFUSU9OX1VSTF07XHJcbiAgICAgICAgICAgIGlmICgobnVsbCA9PSBiYWNrRHN0KSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZyYWdtZW50ID0gQmFja2JvbmUuaGlzdG9yeS5nZXRGcmFnbWVudChiYWNrRHN0KTtcclxuXHJcbiAgICAgICAgICAgIC8vIOWIneacn+ODmuODvOOCuFxyXG4gICAgICAgICAgICBpZiAoXCJcIiA9PT0gZnJhZ21lbnQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBoaXN0b3J5QWN0aXZlSW5kZXg7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIHJvb3RDb250ZXh0IOOBi+OCiSBwYXRoIOOCkumAhuW8leOBjVxyXG4gICAgICAgICAgICBjb250ZXh0ID0gPFJvdXRlQ29udGV4dD5fLmZpbmQoPGFueT5Sb3V0ZXIuc19yb290Q29udGV4dHMsIChjdHg6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGN0eC5yZWdleHAudGVzdChmcmFnbWVudCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpZiAobnVsbCA9PSBjb250ZXh0KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oVEFHICsgXCJiYWNrIGRlc3RpbmF0aW9uIGlzIG5vdCByZWdpc3RlcmVkLiBiYWNrLWRzdDogXCIgKyBiYWNrRHN0KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBkYXRhVXJsIOOCkuWFg+OBqyBqUU0gSGlzdG9yeSDjgpLmpJzntKJcclxuICAgICAgICAgICAganFtRGF0YVVybCA9IFJvdXRlci5wYXRoVG9KcW1EYXRhVXJsKGNvbnRleHQucGFnZSk7XHJcbiAgICAgICAgICAgIGZvciAoaSA9IGhpc3RvcnlBY3RpdmVJbmRleCwgZGlzdGFuY2UgPSAwOyAwIDw9IGk7IGktLSAsIGRpc3RhbmNlKyspIHtcclxuICAgICAgICAgICAgICAgIGlmIChqcW1EYXRhVXJsID09PSBzdGFja1tpXS5wYWdlVXJsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGkgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oVEFHICsgXCJiYWNrIGRlc3RpbmF0aW9uIGRvZXMgbm90IGV4aXN0IGluIGhpc3RvcnkuIGJhY2stZHN0OiBcIiArIGJhY2tEc3QpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBkaXN0YW5jZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBTdGFydCBzdWIgZmxvd1xyXG4gICAgICAgICAqIEF0dGFjaCBTdWJGbG93UGFyYW0gdG8ganFtIGhpc3Rvcnkgc3RhY2sgb2JqZWN0LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHN1YkZsb3dQYXJhbSB7U3ViRmxvd1BhcmFtfSBbaW5dIFN1YiBGbG93IHBhcmFtZXRlclxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiBTdWIgRmxvdyDjga7plovlp4tcclxuICAgICAgICAgKiBTdWJGbG93UGFyYW0g44KSIGpxbSBoaXN0b3J5IHN0YWNrIOOBq+OCouOCv+ODg+ODgVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHN1YkZsb3dQYXJhbSB7U3ViRmxvd1BhcmFtfSBbaW5dIFN1YiBGbG93IOODkeODqeODoeODvOOCv1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIHN0YXJ0U3ViRmxvdyhzdWJGbG93UGFyYW06IFN1YkZsb3dQYXJhbSk6IHZvaWQge1xyXG4gICAgICAgICAgICBjb25zdCBhY3RpdmUgPSBSb3V0ZXIuZ2V0SnFtSGlzdG9yeSgpLmdldEFjdGl2ZSgpO1xyXG4gICAgICAgICAgICBjb25zdCBwYXJhbSA9IDxTdWJGbG93UGFyYW1FeD5zdWJGbG93UGFyYW07XHJcbiAgICAgICAgICAgIGlmIChzdWJGbG93UGFyYW0uZGVzdEJhc2UpIHtcclxuICAgICAgICAgICAgICAgIGxldCBkaXN0YW5jZSA9IDA7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBmcmFnbWVudCA9IEJhY2tib25lLmhpc3RvcnkuZ2V0RnJhZ21lbnQoc3ViRmxvd1BhcmFtLmRlc3RCYXNlKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRleHQgPSA8Um91dGVDb250ZXh0Pl8uZmluZCg8YW55PlJvdXRlci5zX3Jvb3RDb250ZXh0cywgKGN0eDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGN0eC5yZWdleHAudGVzdChmcmFnbWVudCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGlmIChudWxsID09IGNvbnRleHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oVEFHICsgXCJiYXNlIGRlc3RpbmF0aW9uIGlzIG5vdCByZWdpc3RlcmVkLiBkZXN0QmFzZTogXCIgKyBzdWJGbG93UGFyYW0uZGVzdEJhc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBkYXRhVXJsIOOCkuWFg+OBqyBqUU0gSGlzdG9yeSDjgpLmpJzntKJcclxuICAgICAgICAgICAgICAgIGNvbnN0IGpxbURhdGFVcmwgPSBSb3V0ZXIucGF0aFRvSnFtRGF0YVVybChjb250ZXh0LnBhZ2UpO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3RhY2sgPSBSb3V0ZXIuZ2V0SnFtSGlzdG9yeSgpLnN0YWNrO1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IFJvdXRlci5nZXRKcW1IaXN0b3J5KCkuYWN0aXZlSW5kZXg7IDAgPD0gaTsgaS0tICwgZGlzdGFuY2UrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChqcW1EYXRhVXJsID09PSBzdGFja1tpXS5wYWdlVXJsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtLmFkZGl0aW9uYWxEaXN0YW5jZSA9IGRpc3RhbmNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBwYXJhbS5kZXN0QmFzZSA9IGxvY2F0aW9uLmhhc2g7XHJcbiAgICAgICAgICAgICAgICBwYXJhbS5hZGRpdGlvbmFsRGlzdGFuY2UgPSAwO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBhY3RpdmVbUm91dGVyLlNVQkZMT1dfUEFSQU1dID0gcGFyYW07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogRW5kIHN1YiBmbG93XHJcbiAgICAgICAgICogbmF2aWdhdGUgYW5kIGRlbGV0ZSBTdWJGbG93UGFyYW0gZnJvbSBqcW0gaGlzdG9yeSBzdGFjayBvYmplY3QuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gbmF2T3B0aW9ucyB7TmF2aWdhdGVPcHRpb25zfSBbaW5dIFN1YiBGbG93IHBhcmFtZXRlclxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiBTdWIgRmxvdyDjga7ntYLkuoZcclxuICAgICAgICAgKiDpgbfnp7vjgaggU3ViRmxvd1BhcmFtIOOCkiBqcW0gaGlzdG9yeSBzdGFjayDjgYvjgonliYrpmaRcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBuYXZPcHRpb25zIHtOYXZpZ2F0ZU9wdGlvbnN9IFtpbl0gU3ViIEZsb3cg44OR44Op44Oh44O844K/XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgZmluaXNoU3ViRmxvdyhvcHRpb25zOiBOYXZpZ2F0ZU9wdGlvbnMpOiB2b2lkIHtcclxuICAgICAgICAgICAgY29uc3QgbmF2T3B0aW9uczogTmF2aWdhdGVPcHRpb25zID0gJC5leHRlbmQodHJ1ZSwge30sIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICBjb25zdCBiYXNlSW5mbyA9IFJvdXRlci5kZXRlY3RTdWJGbG93QmFzZUluZm8oKTtcclxuICAgICAgICAgICAgLy8gXCJlbmRcIiDmmYLjgavmm7TmlrDjgZXjgozjgZ/jgoLjga7jgpLkuIrmm7jjgY1cclxuICAgICAgICAgICAgY29uc3QgcGFyYW06IFN1YkZsb3dQYXJhbSA9ICQuZXh0ZW5kKHt9LCBiYXNlSW5mby5zdWJGbG93UGFyYW0sIG5hdk9wdGlvbnMuc3ViRmxvdyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGRpc3RhbmNlID0gYmFzZUluZm8uZGlzdGFuY2U7XHJcbiAgICAgICAgICAgIGNvbnN0IHN0YWNrID0gYmFzZUluZm8uc3RhY2s7XHJcbiAgICAgICAgICAgIGxldCByZXRyeSA9IDA7XHJcbiAgICAgICAgICAgIGNvbnN0IE5BVklHQVRFX0lOVEVSVkFMID0gMTAwO1xyXG4gICAgICAgICAgICBjb25zdCBNQVhfUkVUUllfQ09VTlQgPSAxMDtcclxuXHJcbiAgICAgICAgICAgIC8vIGhhc2gg5aSJ5pu044GM5a6M5LqG44GX44Gf5b6M44GrIG5hdmlnYXRlIOOCkuWun+ihjFxyXG4gICAgICAgICAgICBjb25zdCBfbmF2aWdhdGUgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoTUFYX1JFVFJZX0NPVU5UIDw9IHJldHJ5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihUQUcgKyBcInJlYWNoZWQgbmF2aWdhdGUgbWF4IHJldHJ5IGNvdW50LlwiKTtcclxuICAgICAgICAgICAgICAgICAgICBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvID0ge307XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHBhcmFtLmRlc3RCYXNlICE9PSBsb2NhdGlvbi5oYXNoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0cnkrKztcclxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KF9uYXZpZ2F0ZSwgTkFWSUdBVEVfSU5URVJWQUwpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLmluTmF2aWdhdGlvbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIFJvdXRlci5yZWdpc3RlclBhZ2VTdGFjayhwYXJhbS5kZXN0U3RhY2tzLCB0cnVlLCBuYXZPcHRpb25zKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGlmIChzdGFjaykge1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIHN0YWNrW1JvdXRlci5TVUJGTE9XX1BBUkFNXTtcclxuXHJcbiAgICAgICAgICAgICAgICBSb3V0ZXIuZ2V0SnFtSGlzdG9yeSgpLmFjdGl2ZUluZGV4IC09IGRpc3RhbmNlO1xyXG4gICAgICAgICAgICAgICAgUm91dGVyLmdldEpxbUhpc3RvcnkoKS5jbGVhckZvcndhcmQoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocGFyYW0uZGVzdFN0YWNrcykge1xyXG4gICAgICAgICAgICAgICAgICAgIFJvdXRlci5zdG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaU9TIOeSsOWig+OBq+OBiuOBhOOBpiBpbmRleC5odG1sIOOCiOOCiiBoaXN0b3J5LmdvKDApIOOBjOeZuueUn+OBmeOCi+OBqOODquODreODvOODieOBjOeZuueUn+OBmeOCiy5cclxuICAgICAgICAgICAgICAgICAgICAvLyDjgZ3jga7lvoznlLvpnaLpgbfnp7vjgpLmjqfjgYjjgovjgZ/jgoEsIOWxpeattOOCkuaIu+OCi+W/heimgeOBjOOBguOCi+OBqOOBjeOBq+OBruOBv+mZkOWumuOBmeOCiy5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoMCAhPT0gZGlzdGFuY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGlzdG9yeS5nbygtZGlzdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBkZWxldGUgbmF2T3B0aW9ucy5zdWJGbG93OyAgICAvLyBzdWJGbG93IOODl+ODreODkeODhuOCo+OBruegtOajhFxyXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoX25hdmlnYXRlLCAwKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgUm91dGVyLnNfbGFzdE5hdmlnYXRlSW5mby5wb3NpdGl2ZU5hdmlnYXRlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgaGlzdG9yeS5nbygtZGlzdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFRBRyArIFwic3ViRmxvdyBiZWdpbiBzdGF0dXMgZG9lcyBub3QgZXhpc3QgaW4gaGlzdG9yeS5cIik7XHJcbiAgICAgICAgICAgICAgICBSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvID0ge307XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBSZXR1cm4gZGVzdGluYXRpb24gU3ViIEZsb3cgaW5mb3JtYXRpb24uXHJcbiAgICAgICAgICogKGNvbnN0IGZ1bmN0aW9uKVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKiBAcmV0dXJuIHtPYmplY3R9IHN1YiBmbG93IGluZm8uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIFN1YiBGbG93IOaDheWgseOCkui/lOWNtFxyXG4gICAgICAgICAqICjjgZPjga7plqLmlbDjga8gUm91dGVyIOOBrueKtuaFi+OCkuWkieabtOOBl+OBvuOBm+OCk+OAgilcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICogQHJldHVybiB7T2JqZWN0fSBTdWIgRmxvdyDmg4XloLEuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgZGV0ZWN0U3ViRmxvd0Jhc2VJbmZvKCk6IGFueSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHN0YWNrID0gUm91dGVyLmdldEpxbUhpc3RvcnkoKS5zdGFjaztcclxuICAgICAgICAgICAgY29uc3QgaGlzdG9yeUFjdGl2ZUluZGV4ID0gUm91dGVyLmdldEpxbUhpc3RvcnkoKS5hY3RpdmVJbmRleDtcclxuICAgICAgICAgICAgbGV0IGk6IG51bWJlciwgZGlzdGFuY2U6IG51bWJlcjtcclxuICAgICAgICAgICAgbGV0IHBhcmFtOiBTdWJGbG93UGFyYW1FeCA9IDxTdWJGbG93UGFyYW1FeD57fTtcclxuICAgICAgICAgICAgbGV0IHRhcmdldDogT2JqZWN0O1xyXG5cclxuICAgICAgICAgICAgZm9yIChpID0gaGlzdG9yeUFjdGl2ZUluZGV4LCBkaXN0YW5jZSA9IDA7IDAgPD0gaTsgaS0tICwgZGlzdGFuY2UrKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHN0YWNrW2ldW1JvdXRlci5TVUJGTE9XX1BBUkFNXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldCA9IHN0YWNrW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIHBhcmFtID0gPFN1YkZsb3dQYXJhbUV4PnN0YWNrW2ldW1JvdXRlci5TVUJGTE9XX1BBUkFNXTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKG51bGwgPT0gcGFyYW0uYWRkaXRpb25hbERpc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICBwYXJhbS5hZGRpdGlvbmFsRGlzdGFuY2UgPSAwO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgc3RhY2s6IHRhcmdldCxcclxuICAgICAgICAgICAgICAgIHN1YkZsb3dQYXJhbTogcGFyYW0sXHJcbiAgICAgICAgICAgICAgICBkaXN0YW5jZTogZGlzdGFuY2UgKyBwYXJhbS5hZGRpdGlvbmFsRGlzdGFuY2UsXHJcbiAgICAgICAgICAgICAgICBpc0N1cnJlbnQ6ICgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldCAmJiAwID09PSBkaXN0YW5jZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSkoKSxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBDb252ZXJ0IHBhdGggdG8galFNIGRhdGFVcmwuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqIEByZXR1cm4ge1N0cmluZ30galFNIGRhdGEgdXJsLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiDjg5HjgrnjgpIgalFNIGRhdGFVcmwg44Gr5aSJ5o+bXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqIEByZXR1cm4ge1N0cmluZ30galFNIGRhdGEgdXJsLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIHBhdGhUb0pxbURhdGFVcmwocGF0aDogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgICAgICAgICAgY29uc3QgdXJsID0gRnJhbWV3b3JrLnRvVXJsKHBhdGgpO1xyXG4gICAgICAgICAgICBjb25zdCBkYXRhVXJsID0gJC5tb2JpbGUucGF0aC5jb252ZXJ0VXJsVG9EYXRhVXJsKHVybCk7XHJcbiAgICAgICAgICAgIHJldHVybiBkYXRhVXJsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIFVwZGF0ZSBqUU0gdXJsSGlzdG9yeSBieSB3aW5kb3cuaGlzdG9yeSBvYmplY3QuXHJcbiAgICAgICAgICogVG8gYmUgbmF0dXJhbCBicm93c2luZyBoaXN0b3J5IGJlaGF2aW9yLCBhcHBsaWNhdGlvbiBuZWVkcyB0byB1cGRhdGUgalFNIHVybEhpc3RvcnlcclxuICAgICAgICAgKiB3aGVuIGNsaWNraW5nIGJhY2sgb3IgbmV4dCBidXR0b24gb2YgYnJvd3Nlci4gKGltcGVyZmVjdGlvbiBmb3IgZGVjaWRlRGlyZWN0aW9uKCkpXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiDjg5bjg6njgqbjgrbjga7lsaXmrbTjgavln7rjgaXjgY0galFNIHVybEhpc3Rvcnkg44KS5pu05pawXHJcbiAgICAgICAgICogW+aIu+OCi10vW+mAsuOCgF3jgYzmirzkuIvjgZXjgozjgZ/lvozjgIHjg5rjg7zjgrjpgbfnp7vjgZXjgozjgovjgajjgY3jgIFqUU0gdXJsSGlzdG9yeSDjgpLmm7TmlrDjgZnjgovjgIIoZGVjaWRlRGlyZWN0aW9uKCkg44Gr44KI44KK5LiN5a6M5YWoKVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyB0cmVhdFVybEhpc3RvcnkoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmIChSb3V0ZXIuc19sYXN0TmF2aWdhdGVJbmZvLnBvc2l0aXZlTmF2aWdhdGUgfHwgaGlzdG9yeS5sZW5ndGggPCBSb3V0ZXIuZ2V0SnFtSGlzdG9yeSgpLnN0YWNrLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgUm91dGVyLmdldEpxbUhpc3RvcnkoKS5jbGVhckZvcndhcmQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gY2RwOi8vL0NEUC9GcmFtZXdvcmsvUm91dGVyLnRzIiwibmFtZXNwYWNlIENEUC5GcmFtZXdvcmsge1xyXG5cclxuICAgIGltcG9ydCBQcm9taXNlID0gQ0RQLlByb21pc2U7XHJcblxyXG4gICAgY29uc3QgVEFHID0gXCJbQ0RQLkZyYW1ld29yay5QYWdlXSBcIjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAqIEBpbnRlcmZhY2UgTWFuYWdlZEludGVudFxyXG4gICAgICogQGJyaWVmIEludGVybmFsIEludGVudCBpbnRlcmZhY2UgZm9yIG1hbmFnZWQgdXBkYXRlIGluZm8uXHJcbiAgICAgKlxyXG4gICAgICogXFx+amFwYW5lc2VcclxuICAgICAqIEBpbnRlcmZhY2UgTWFuYWdlZEludGVudFxyXG4gICAgICogQGJyaWVmIOabtOaWsOaDheWgseOBjOeuoeeQhuOBleOCjOOBn+WGhemDqCBJbnRlbnQg44Kk44Oz44K/44O844OV44Kn44Kk44K544Kv44Op44K5XHJcbiAgICAgKi9cclxuICAgIGludGVyZmFjZSBNYW5hZ2VkSW50ZW50IGV4dGVuZHMgSW50ZW50IHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogc2V0IFwidHJ1ZVwiIHdoZW4gdXBkYXRlIGluIFBhZ2UgY2xhc3MuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIOODmuODvOOCuOWGheOBp+abtOaWsOOBleOCjOOBn+WgtOWQiCB0cnVlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgX3VwZGF0ZTogYm9vbGVhbjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAqIEBjbGFzcyBQYWdlXHJcbiAgICAgKiBAYnJpZWYgQmFzZSBjbGFzcyBvZiBhbGwgcGFnZSB1bml0LlxyXG4gICAgICpcclxuICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgKiBAY2xhc3MgUGFnZVxyXG4gICAgICogQGJyaWVmIOOBmeOBueOBpuOBruODmuODvOOCuOOBruWfuuacrOOBqOOBquOCi+aXouWumuOCr+ODqeOCuVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgY2xhc3MgUGFnZSBpbXBsZW1lbnRzIElQYWdlIHtcclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gZGF0YSBtZW1iZXJcclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIF9vd25lcjogSVBhZ2U7XHJcbiAgICAgICAgcHJpdmF0ZSBfJHBhZ2U6IEpRdWVyeTtcclxuICAgICAgICBwcml2YXRlIF8kaGVhZGVyOiBKUXVlcnk7XHJcbiAgICAgICAgcHJpdmF0ZSBfJGZvb3RlcjogSlF1ZXJ5O1xyXG4gICAgICAgIHByaXZhdGUgX2ludGVudDogTWFuYWdlZEludGVudDtcclxuICAgICAgICBwcml2YXRlIF9rZWVwSW50ZW50OiBib29sZWFuO1xyXG4gICAgICAgIHByaXZhdGUgX2luaXRpYWxpemVkOiBib29sZWFuO1xyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBwdWJsaWMgbWV0aG9kc1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogY29uc3RydWN0b3JcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBfdXJsICAgIHtTdHJpbmd9ICAgICAgICAgICAgICAgW2luXSBwYWdlJ3MgVVJMXHJcbiAgICAgICAgICogQHBhcmFtIF9pZCAgICAge1N0cmluZ30gICAgICAgICAgICAgICBbaW5dIHBhZ2UncyBJRFxyXG4gICAgICAgICAqIEBwYXJhbSBvcHRpb25zIHtQYWdlQ29uc3RydWN0T3B0aW9uc30gW2luXSBvcHRpb25zXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIGNvbnN0cnVjdG9yXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gX3VybCAgICB7U3RyaW5nfSAgICAgICAgICAgICAgIFtpbl0g44Oa44O844K4IFVSTFxyXG4gICAgICAgICAqIEBwYXJhbSBfaWQgICAgIHtTdHJpbmd9ICAgICAgICAgICAgICAgW2luXSDjg5rjg7zjgrggSURcclxuICAgICAgICAgKiBAcGFyYW0gb3B0aW9ucyB7UGFnZUNvbnN0cnVjdE9wdGlvbnN9IFtpbl0g44Kq44OX44K344On44OzXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgY29uc3RydWN0b3IocHJpdmF0ZSBfdXJsOiBzdHJpbmcsIHByaXZhdGUgX2lkOiBzdHJpbmcsIG9wdGlvbnM/OiBQYWdlQ29uc3RydWN0T3B0aW9ucykge1xyXG4gICAgICAgICAgICB0aGlzLnNldHVwKG9wdGlvbnMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gcHVibGljIGFjY2Vzc29yXHJcblxyXG4gICAgICAgIGdldCBhY3RpdmUoKTogYm9vbGVhbiAgICAgICAgICAgeyByZXR1cm4gISF0aGlzLl8kcGFnZSAmJiB0aGlzLl8kcGFnZS5oYXNDbGFzcyhcInVpLXBhZ2UtYWN0aXZlXCIpOyAgIH1cclxuICAgICAgICBnZXQgdXJsKCk6IHN0cmluZyAgICAgICAgICAgICAgIHsgcmV0dXJuIHRoaXMuX3VybDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgIGdldCBpZCgpOiBzdHJpbmcgICAgICAgICAgICAgICAgeyByZXR1cm4gdGhpcy5faWQ7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgZ2V0ICRwYWdlKCk6IEpRdWVyeSAgICAgICAgICAgICB7IHJldHVybiB0aGlzLl8kcGFnZTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICBnZXQgJGhlYWRlcigpOiBKUXVlcnkgICAgICAgICAgIHsgcmV0dXJuIHRoaXMuXyRoZWFkZXI7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgIGdldCAkZm9vdGVyKCk6IEpRdWVyeSAgICAgICAgICAgeyByZXR1cm4gdGhpcy5fJGZvb3RlcjsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgZ2V0IGludGVudCgpOiBJbnRlbnQgICAgICAgICAgICB7IHJldHVybiB0aGlzLl9pbnRlbnQ7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICBzZXQgaW50ZW50KG5ld0ludGVudDogSW50ZW50KSAgIHsgdGhpcy5faW50ZW50ID0gPGFueT5uZXdJbnRlbnQ7IHRoaXMuX2ludGVudC5fdXBkYXRlID0gdHJ1ZTsgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBwdWJsaWMgRXZlbnQgSGFuZGxlclxyXG5cclxuICAgICAgICAvLyEgT3JpZW50YXRpb24g44Gu5aSJ5pu044KS5Y+X5L+hXHJcbiAgICAgICAgcHVibGljIG9uT3JpZW50YXRpb25DaGFuZ2VkKG5ld09yaWVudGF0aW9uOiBPcmllbnRhdGlvbik6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fb3duZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX293bmVyLm9uT3JpZW50YXRpb25DaGFuZ2VkKG5ld09yaWVudGF0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIEgvVyBCYWNrIEJ1dHRvbiDjg4/jg7Pjg4njg6lcclxuICAgICAgICBwdWJsaWMgb25IYXJkd2FyZUJhY2tCdXR0b24oZXZlbnQ/OiBKUXVlcnkuRXZlbnQpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX293bmVyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fb3duZXIub25IYXJkd2FyZUJhY2tCdXR0b24oZXZlbnQpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgUm91dGVyIFwiYmVmb3JlIHJvdXRlIGNoYW5nZVwiIOODj+ODs+ODieODqVxyXG4gICAgICAgIHB1YmxpYyBvbkJlZm9yZVJvdXRlQ2hhbmdlKCk6IElQcm9taXNlQmFzZTxhbnk+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX293bmVyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fb3duZXIub25CZWZvcmVSb3V0ZUNoYW5nZSgpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg5rGO55So44Kz44Oe44Oz44OJ44KS5Y+X5L+hXHJcbiAgICAgICAgcHVibGljIG9uQ29tbWFuZChldmVudD86IEpRdWVyeS5FdmVudCwga2luZD86IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fb3duZXIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9vd25lci5vbkNvbW1hbmQoZXZlbnQsIGtpbmQpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg5pyA5Yid44GuIE9uUGFnZUluaXQoKSDjga7jgajjgY3jgavjga7jgb/jgrPjg7zjg6vjgZXjgozjgotcclxuICAgICAgICBwdWJsaWMgb25Jbml0aWFsaXplKGV2ZW50OiBKUXVlcnkuRXZlbnQpOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX293bmVyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9vd25lci5vbkluaXRpYWxpemUoZXZlbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgalFNIGV2ZW50OiBcInBhZ2ViZWZvcmVjcmVhdGVcIiDjgavlr77lv5xcclxuICAgICAgICBwdWJsaWMgb25QYWdlQmVmb3JlQ3JlYXRlKGV2ZW50OiBKUXVlcnkuRXZlbnQpOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX293bmVyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9vd25lci5vblBhZ2VCZWZvcmVDcmVhdGUoZXZlbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgalFNIGV2ZW50OiBcInBhZ2VjcmVhdGVcIiAo5penOlwicGFnZWluaXRcIikg44Gr5a++5b+cXHJcbiAgICAgICAgcHVibGljIG9uUGFnZUluaXQoZXZlbnQ6IEpRdWVyeS5FdmVudCk6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fb3duZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX293bmVyLm9uUGFnZUluaXQoZXZlbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgalFNIGV2ZW50OiBcInBhZ2ViZWZvcmVzaG93XCIg44Gr5a++5b+cXHJcbiAgICAgICAgcHVibGljIG9uUGFnZUJlZm9yZVNob3coZXZlbnQ6IEpRdWVyeS5FdmVudCwgZGF0YT86IFNob3dFdmVudERhdGEpOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX293bmVyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9vd25lci5vblBhZ2VCZWZvcmVTaG93KGV2ZW50LCBkYXRhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIGpRTSBldmVudDogXCJwYWdlY29udGFpbmVyc2hvd1wiICjml6c6XCJwYWdlc2hvd1wiKSDjgavlr77lv5xcclxuICAgICAgICBwdWJsaWMgb25QYWdlU2hvdyhldmVudDogSlF1ZXJ5LkV2ZW50LCBkYXRhPzogU2hvd0V2ZW50RGF0YSk6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fb3duZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX293bmVyLm9uUGFnZVNob3coZXZlbnQsIGRhdGEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgalFNIGV2ZW50OiBcInBhZ2ViZWZvcmVoaWRlXCIg44Gr5a++5b+cXHJcbiAgICAgICAgcHVibGljIG9uUGFnZUJlZm9yZUhpZGUoZXZlbnQ6IEpRdWVyeS5FdmVudCwgZGF0YT86IEhpZGVFdmVudERhdGEpOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX293bmVyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9vd25lci5vblBhZ2VCZWZvcmVIaWRlKGV2ZW50LCBkYXRhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIGpRTSBldmVudDogXCJwYWdlY29udGFpbmVyaGlkZVwiICjml6c6XCJwYWdlaGlkZVwiKSDjgavlr77lv5xcclxuICAgICAgICBwdWJsaWMgb25QYWdlSGlkZShldmVudDogSlF1ZXJ5LkV2ZW50LCBkYXRhPzogSGlkZUV2ZW50RGF0YSk6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fb3duZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX293bmVyLm9uUGFnZUhpZGUoZXZlbnQsIGRhdGEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgalFNIGV2ZW50OiBcInBhZ2VyZW1vdmVcIiDjgavlr77lv5xcclxuICAgICAgICBwdWJsaWMgb25QYWdlUmVtb3ZlKGV2ZW50OiBKUXVlcnkuRXZlbnQpOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX293bmVyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9vd25lci5vblBhZ2VSZW1vdmUoZXZlbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBwcml2YXRlIG1ldGhvZHNcclxuXHJcbiAgICAgICAgLy8hIG1peGluIOeUqOeWkeS8vOOCs+ODs+OCueODiOODqeOCr+OCv1xyXG4gICAgICAgIHByaXZhdGUgc2V0dXAob3B0aW9uczogUGFnZUNvbnN0cnVjdE9wdGlvbnMpOiB2b2lkIHtcclxuICAgICAgICAgICAgLy8gbWl4aW4gZGVzdGluYXRpb24g55So44Gu5YaN5Yid5pyf5YyWXHJcbiAgICAgICAgICAgIHRoaXMuX2luaXRpYWxpemVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIHRoaXMuX2ludGVudCA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICAvLyDjgqTjg5njg7Pjg4jjg5DjgqTjg7Pjg4lcclxuICAgICAgICAgICAgY29uc3Qgc2VsZWN0b3I6IHN0cmluZyA9IFwiI1wiICsgdGhpcy5faWQ7XHJcbiAgICAgICAgICAgICQoZG9jdW1lbnQpXHJcbiAgICAgICAgICAgICAgICAub2ZmKFwicGFnZWJlZm9yZWNyZWF0ZVwiLCBzZWxlY3RvcilcclxuICAgICAgICAgICAgICAgIC5vbihcInBhZ2ViZWZvcmVjcmVhdGVcIiwgc2VsZWN0b3IsIChldmVudDogSlF1ZXJ5LkV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fJHBhZ2UgPSAkKHNlbGVjdG9yKS5maXJzdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuXyRoZWFkZXIgPSB0aGlzLl8kcGFnZS5jaGlsZHJlbihcIjpqcW1EYXRhKHJvbGU9aGVhZGVyKVwiKS5maXJzdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuXyRmb290ZXIgPSB0aGlzLl8kcGFnZS5jaGlsZHJlbihcIjpqcW1EYXRhKHJvbGU9Zm9vdGVyKVwiKS5maXJzdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuXyRwYWdlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbihcInBhZ2VjcmVhdGVcIiwgKGV2OiBKUXVlcnkuRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFnZUluaXQoZXYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAub24oXCJwYWdlYmVmb3Jlc2hvd1wiLCAoZXY6IEpRdWVyeS5FdmVudCwgZGF0YTogU2hvd0V2ZW50RGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYWdlQmVmb3JlU2hvdyhldiwgZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFtOb3RlXWluc3RlYWQgZnV0dXJlIHZlcnNpb24gXCJwYWdlY29udGFpbmVyc2hvd1wiLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAub24oXCJwYWdlc2hvd1wiLCAoZXY6IEpRdWVyeS5FdmVudCwgZGF0YTogU2hvd0V2ZW50RGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYWdlU2hvdyhldiwgZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbihcInBhZ2ViZWZvcmVoaWRlXCIsIChldjogSlF1ZXJ5LkV2ZW50LCBkYXRhOiBIaWRlRXZlbnREYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhZ2VCZWZvcmVIaWRlKGV2LCBkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gW05vdGVdaW5zdGVhZCBmdXR1cmUgdmVyc2lvbiBcInBhZ2Vjb250YWluZXJoaWRlXCIuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbihcInBhZ2VoaWRlXCIsIChldjogSlF1ZXJ5LkV2ZW50LCBkYXRhOiBIaWRlRXZlbnREYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhZ2VIaWRlKGV2LCBkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uKFwicGFnZXJlbW92ZVwiLCAoZXY6IEpRdWVyeS5FdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYWdlUmVtb3ZlKGV2KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYWdlQmVmb3JlQ3JlYXRlKGV2ZW50KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XHJcblxyXG4gICAgICAgICAgICAvLyBvd25lciDoqK3lrppcclxuICAgICAgICAgICAgdGhpcy5fb3duZXIgPSBvcHRpb25zLm93bmVyO1xyXG4gICAgICAgICAgICAvLyBpbnRlbnQg6Kit5a6aXHJcbiAgICAgICAgICAgIHRoaXMuX2tlZXBJbnRlbnQgPSBvcHRpb25zLmtlZXBJbnRlbnQ7XHJcblxyXG4gICAgICAgICAgICAvLyBSb3V0ZXIg44G455m76YyyXHJcbiAgICAgICAgICAgIGlmIChudWxsID09IG9wdGlvbnMucm91dGUpIHtcclxuICAgICAgICAgICAgICAgIG9wdGlvbnMucm91dGUgPSB0aGlzLl9pZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBSb3V0ZXIucmVnaXN0ZXIob3B0aW9ucy5yb3V0ZSwgdGhpcy5fdXJsLCBvcHRpb25zLnRvcCwgb3B0aW9ucy5jYWxsYmFjayk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgUGFnZVRyYW5zaXRpb25EaXJlY3Rpb24g44Gu5Yik5a6aXHJcbiAgICAgICAgcHJpdmF0ZSBnZXREaXJlY3Rpb24oKTogUGFnZVRyYW5zaXRpb25EaXJlY3Rpb24ge1xyXG4gICAgICAgICAgICBjb25zdCBhY3RpdmVJbmRleCA9IFJvdXRlci5nZXRKcW1IaXN0b3J5KCkuYWN0aXZlSW5kZXg7XHJcbiAgICAgICAgICAgIGNvbnN0IHByZXZJbmRleCA9IFJvdXRlci5nZXRKcW1IaXN0b3J5KCkucHJldmlvdXNJbmRleDtcclxuXHJcbiAgICAgICAgICAgIGlmIChudWxsID09IGFjdGl2ZUluZGV4IHx8IG51bGwgPT0gcHJldkluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJ1bmtub3duXCI7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocHJldkluZGV4ID09PSBhY3RpdmVJbmRleCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwic2FtZVwiO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGFjdGl2ZUluZGV4IDwgcHJldkluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJiYWNrXCI7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJmb3J3YXJkXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgcGFnZUJlZm9yZUNyZWF0ZShldmVudDogSlF1ZXJ5LkV2ZW50KTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMub25QYWdlQmVmb3JlQ3JlYXRlKGV2ZW50KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgcGFnZUluaXQoZXZlbnQ6IEpRdWVyeS5FdmVudCk6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuX2luaXRpYWxpemVkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uSW5pdGlhbGl6ZShldmVudCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9pbml0aWFsaXplZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5vblBhZ2VJbml0KGV2ZW50KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgcGFnZUJlZm9yZVNob3coZXZlbnQ6IEpRdWVyeS5FdmVudCwgZGF0YTogU2hvd0V2ZW50RGF0YSk6IHZvaWQge1xyXG4gICAgICAgICAgICBGcmFtZXdvcmsuc2V0QWN0aXZlUGFnZSh0aGlzKTtcclxuICAgICAgICAgICAgdGhpcy5faW50ZW50ID0gPE1hbmFnZWRJbnRlbnQ+Um91dGVyLnBvcEludGVudCgpO1xyXG4gICAgICAgICAgICB0aGlzLm9uUGFnZUJlZm9yZVNob3coZXZlbnQsICQuZXh0ZW5kKGRhdGEsIHsgZGlyZWN0aW9uOiB0aGlzLmdldERpcmVjdGlvbigpIH0pKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgcGFnZVNob3coZXZlbnQ6IEpRdWVyeS5FdmVudCwgZGF0YTogU2hvd0V2ZW50RGF0YSk6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLm9uUGFnZVNob3coZXZlbnQsICQuZXh0ZW5kKGRhdGEsIHsgZGlyZWN0aW9uOiB0aGlzLmdldERpcmVjdGlvbigpIH0pKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgcGFnZUJlZm9yZUhpZGUoZXZlbnQ6IEpRdWVyeS5FdmVudCwgZGF0YTogSGlkZUV2ZW50RGF0YSk6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLm9uUGFnZUJlZm9yZUhpZGUoZXZlbnQsICQuZXh0ZW5kKGRhdGEsIHsgZGlyZWN0aW9uOiB0aGlzLmdldERpcmVjdGlvbigpIH0pKTtcclxuICAgICAgICAgICAgaWYgKG51bGwgIT0gdGhpcy5faW50ZW50ICYmICh0aGlzLl9rZWVwSW50ZW50IHx8IHRoaXMuX2ludGVudC5fdXBkYXRlKSkgeyAgICAvLyBpbnRlbnQg44Gr5pu05paw44GM44GC44Gj44Gf5aC05ZCIXHJcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5faW50ZW50Ll91cGRhdGU7XHJcbiAgICAgICAgICAgICAgICBSb3V0ZXIucHVzaEludGVudCh0aGlzLl9pbnRlbnQpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKFJvdXRlci5mcm9tSGFzaENoYW5nZWQoKSAmJiBSb3V0ZXIuaXNJblN1YkZsb3coKSkgeyAgICAvLyBTdWIgRmxvdyDlhoXjgacgYmFjayDjgZXjgozjgZ/loLTlkIhcclxuICAgICAgICAgICAgICAgIFJvdXRlci5wdXNoSW50ZW50KHRoaXMuX2ludGVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5faW50ZW50ID0gbnVsbDtcclxuICAgICAgICAgICAgRnJhbWV3b3JrLnNldEFjdGl2ZVBhZ2UobnVsbCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHBhZ2VIaWRlKGV2ZW50OiBKUXVlcnkuRXZlbnQsIGRhdGE6IEhpZGVFdmVudERhdGEpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5vblBhZ2VIaWRlKGV2ZW50LCAkLmV4dGVuZChkYXRhLCB7IGRpcmVjdGlvbjogdGhpcy5nZXREaXJlY3Rpb24oKSB9KSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHBhZ2VSZW1vdmUoZXZlbnQ6IEpRdWVyeS5FdmVudCk6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLm9uUGFnZVJlbW92ZShldmVudCk7XHJcbiAgICAgICAgICAgIHRoaXMuXyRwYWdlLm9mZigpO1xyXG4gICAgICAgICAgICB0aGlzLl8kcGFnZSA9IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMuXyRoZWFkZXIub2ZmKCk7XHJcbiAgICAgICAgICAgIHRoaXMuXyRoZWFkZXIgPSBudWxsO1xyXG4gICAgICAgICAgICB0aGlzLl8kZm9vdGVyLm9mZigpO1xyXG4gICAgICAgICAgICB0aGlzLl8kZm9vdGVyID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgIC8vIGNsb3N1cmUgbWV0aG9kc1xyXG5cclxuICAgIC8qXHJcbiAgICAgKiBqUU0xLjQg44Gr44Gm44CBZHVwbGljYXRlIOOBqOOBleOCjOOBpuOBhOOCiyBcInBhZ2VzaG93XCIsIFwicGFnZWhpZGVcIiDjga/jgb7jgaDmja7jgYjnva7jgY3jgIJcclxuICAgICAqIGh0dHA6Ly9qcXVlcnltb2JpbGUuY29tL3VwZ3JhZGUtZ3VpZGUvMS40LyNuYXZpZ2F0aW9uXHJcbiAgICAgKlxyXG4gICAgICog54m55a6a44Oa44O844K444Gr5a++44GX44Gm44CB44Kk44OZ44Oz44OI44KS5Y+W5b6X44Gn44GN44Gq44GE44Gf44KB44CCXHJcbiAgICAgKiBGb3J1bSDjgafjgoLorbDoq5bkuK3jgarjga7jgafjgIHmsbrnnYDjgYzjgaTjgYTjgabjgYvjgonlr77lv5zjgpLogIPmha7jgZnjgovjgIJcclxuICAgICAqIGh0dHBzOi8vZ2l0aHViLmNvbS9qcXVlcnkvanF1ZXJ5LW1vYmlsZS9pc3N1ZXMvNjg2NVxyXG4gICAgICpcclxuICAgICAqIFvlj4LogINdIOOCiOOBj+OCj+OBi+OCi+OCpOODmeODs+ODiOODgeODvOODiOOCt+ODvOODiFxyXG4gICAgICogIC0g5pys5a62KDEuNCspIGh0dHA6Ly9qcW10cmlja3Mud29yZHByZXNzLmNvbS8yMDE0LzAzLzI2L2pxdWVyeS1tb2JpbGUtcGFnZS1ldmVudHMvXHJcbiAgICAgKiAgLSDmnInlv5cofjEuMykgaHR0cDovL2Rldi5zY3Jldy1heGlzLmNvbS9kb2MvanF1ZXJ5X21vYmlsZS9yZXNvdXJjZXMvY2hlYXRzaGVldC9cclxuICAgICAqXHJcbiAgICAgKiDku6XkuIvjga/kuI3lrozlhajjgarlr77lv5zkuojlrprjgrPjg7zjg4lcclxuICAgICAqXHJcbiAgICAgKiDnibnjgavmjK/jgovoiJ7jgYTjgYzlpInjgo/jgovjga7jga/jgIFcInBhZ2VoaWRlXCIg44Gn44CB5qSc6KiO44GV44KM44Gm44GE44KL5LuV5qeY44Gn44GvXHJcbiAgICAgKiBET00g44KS54m55a6a44Gn44GN44Gq44GE44Gf44KB44CBb25QYWdlSGlkZSgpIOOCkuOCpOODs+OCueOCv+ODs+OCueOBq+S8neOBiOOCi+OBk+OBqOOBjOOBp+OBjeOBquOBhOOAglxyXG4gICAgICpcclxuICAgICAqIOS7leanmOOBjOWkieOCj+OCieOBquOBhOWgtOWQiOOBr1xyXG4gICAgICogb25QYWdlQmVmb3JlSGlkZSgpIOOBruS4reOBpyBwb3N0IOOBl+OBpiBvblBhZ2VIaWRlKCkg44KS55m66KGM44GZ44KL5LqI5a6aKOmBjuWOu+S6kuaPm+S/neiovClcclxuICAgICAqXHJcbiAgICAgKiAyMDE1LzAzLzI1IOi/veiomDpcclxuICAgICAqIOS7leanmOOBr+eiuuWumi4galFNMS42IOOCiOOCiuWJiumZpOOBleOCjOOCi+S6iOWumlxyXG4gICAgICogIGpRTTEuNCDnm7jlvZPjga7lj4LogIPlrp/oo4UgcGx1Z2luIOOBjOOBguOCiuOAgeOBk+OBruWun+ijheebuOW9k+OBruapn+iDveOCkiBjZHAuZnJhbWV3b3JrLmpxbSDjgafmirHjgYjjgovkuojlrppcclxuICAgICAqICBodHRwczovL2dpdGh1Yi5jb20vYXJzY2htaXR6L2pxdWVyeS1tb2JpbGUtb25wYWdlXHJcbiAgICAgKlxyXG4gICAgICog5YWs5byP6KaL6KejXHJcbiAgICAgKiBodHRwczovL2dpdGh1Yi5jb20vanF1ZXJ5L2pxdWVyeS1tb2JpbGUvaXNzdWVzLzcyODMjaXNzdWVjb21tZW50LTQwNzQ2NjIyXHJcbiAgICAgKi9cclxuLypcclxuICAgIC8vIGJpbmQgXCJwYWdlY29udGFpbmVyc2hvd1wiLCBhbmQgXCJwYWdlY29udGFpbmVyaGlkZVwiLlxyXG4gICAgKCgpID0+IHtcclxuICAgICAgICBsZXQgJGJvZHk6IGFueSA9ICQoXCJib2R5XCIpO1xyXG4gICAgICAgICQoZG9jdW1lbnQpXHJcbiAgICAgICAgICAgIC5vbihcInBhZ2Vjb250YWluZXJzaG93XCIsIChldmVudDogSlF1ZXJ5LkV2ZW50LCBkYXRhOiBTaG93RXZlbnREYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoMCA8IGRhdGEucHJldlBhZ2UubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXCJwYWdlY29udGFpbmVyc2hvd1wiIOOBryBcInBhZ2Vjb250YWluZXJoaWRlXCIg44KI44KK44KC6YGF44GE44Gu44Gn44CB44KE44Gv44KKIERPTSDjgavjga/jgqLjgq/jgrvjgrnjgafjgY3jgarjgYRcclxuICAgICAgICAgICAgICAgICAgICBsZXQgJHByZXZwYWdlID0gJChcIiNcIiArIGRhdGEucHJldlBhZ2VbMF0uaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICRwcmV2cGFnZS50cmlnZ2VyKFwiX3BhZ2VoaWRlXCIsIGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8g5Lul5LiL44Gu5a++5b+c44Gn44CBXCJwYWdlY29udGFpbmVyc2hvd1wiIOOBryBcInBhZ2VzaG93XCIg5ZCM562J44Gu5oyv44KL6Iie44GE44Gr44GZ44KL44GT44Go44GM5Y+v6IO9XHJcbiAgICAgICAgICAgICAgICBsZXQgcGFnZUlkID0gJGJvZHkucGFnZWNvbnRhaW5lcihcImdldEFjdGl2ZVBhZ2VcIikucHJvcChcImlkXCIpO1xyXG4gICAgICAgICAgICAgICAgbGV0ICRwYWdlID0gJChcIiNcIiArIHBhZ2VJZCk7XHJcbiAgICAgICAgICAgICAgICAkcGFnZS50cmlnZ2VyKFwiX3BhZ2VzaG93XCIsIGRhdGEpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAub24oXCJwYWdlY29udGFpbmVyaGlkZVwiLCAoZXZlbnQ6IEpRdWVyeS5FdmVudCwgZGF0YTogSGlkZUV2ZW50RGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gXCJwYWdlY29udGFpbmVyaGlkZVwiIOOCkuWPl+OBkeOBn+OBqOOBjeOBr+aXouOBqyBET00g44GL44KJ5raI44GI44Gm44GE44KL44Gf44KB44CBcGFnZSDjga/nibnlrprjgafjgY3jgarjgYTjgIJcclxuICAgICAgICAgICAgICAgIC8vbGV0IHBhZ2VJZCA9ICRib2R5LnBhZ2Vjb250YWluZXIoJ2dldEFjdGl2ZVBhZ2UnKS5wcm9wKFwiaWRcIik7XHJcbiAgICAgICAgICAgICAgICAvL2xldCAkcGFnZSA9ICQoXCIjXCIgKyBwYWdlSWQpO1xyXG4gICAgICAgICAgICAgICAgLy8kcGFnZS50cmlnZ2VyKFwiX3BhZ2VoaWRlXCIsIGRhdGEpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAub24oXCJwYWdlY29udGFpbmVydHJhbnNpdGlvblwiLCAoZXZlbnQ6IEpRdWVyeS5FdmVudCwgZGF0YTogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyBcInBhZ2Vjb250YWluZXJ0cmFuc2l0aW9uXCIg44Gr44GvIHRvUGFnZSDjgavjgZfjgYvjgqLjgq/jgrvjgrnjga/jgafjgY3jgarjgYRcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICA7XHJcbiAgICB9KSgpO1xyXG4qL1xyXG59XHJcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBjZHA6Ly8vQ0RQL0ZyYW1ld29yay9QYWdlLnRzIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzJfXztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCB7XCJyb290XCI6XCJDRFBcIixcImNvbW1vbmpzXCI6XCJjZHAuaTE4blwiLFwiY29tbW9uanMyXCI6XCJjZHAuaTE4blwiLFwiYW1kXCI6XCJjZHAuaTE4blwifVxuLy8gbW9kdWxlIGlkID0gMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfM19fO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIHtcInJvb3RcIjpcIkJhY2tib25lXCIsXCJjb21tb25qc1wiOlwiYmFja2JvbmVcIixcImNvbW1vbmpzMlwiOlwiYmFja2JvbmVcIixcImFtZFwiOlwiYmFja2JvbmVcIn1cbi8vIG1vZHVsZSBpZCA9IDNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiLyoqKiBJTVBPUlRTIEZST00gaW1wb3J0cy1sb2FkZXIgKioqL1xuKGZ1bmN0aW9uKCkge1xuXG4vKiFcclxuICogalF1ZXJ5IE1pZ3JhdGUgLSB2My4wLjEtaG90Zml4IC0gMjAxNy0wMS0xMVxyXG4gKiBDb3B5cmlnaHQgalF1ZXJ5IEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9yc1xyXG4gKi9cclxuOyAoZnVuY3Rpb24gKGZhY3RvcnkpIHtcclxuICAgIGlmICh0eXBlb2YgZGVmaW5lID09PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZCkge1xyXG4gICAgICAgIC8vIEFNRC4gUmVnaXN0ZXIgYXMgYW4gYW5vbnltb3VzIG1vZHVsZS5cclxuICAgICAgICBkZWZpbmUoW1wianF1ZXJ5XCJdLCBmdW5jdGlvbiAoJCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFjdG9yeSgkLCB3aW5kb3cpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgbW9kdWxlID09PSBcIm9iamVjdFwiICYmIG1vZHVsZS5leHBvcnRzKSB7XHJcbiAgICAgICAgLy8gTm9kZS9Db21tb25KU1xyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZlxyXG4gICAgICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShyZXF1aXJlKFwianF1ZXJ5XCIpLCB3aW5kb3cpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBCcm93c2VyIGdsb2JhbHNcclxuICAgICAgICBmYWN0b3J5KGpRdWVyeSwgd2luZG93KTtcclxuICAgIH1cclxufSkoZnVuY3Rpb24gKGpRdWVyeSwgd2luZG93KSB7XHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICBqUXVlcnkubWlncmF0ZVZlcnNpb24gPSBcIjMuMC4xLWhvdGZpeFwiOyAvLyB3aXRoIGhvdGZpeFxyXG5cclxuICAgIC8qIGV4cG9ydGVkIG1pZ3JhdGVXYXJuLCBtaWdyYXRlV2FybkZ1bmMsIG1pZ3JhdGVXYXJuUHJvcCAqL1xyXG5cclxuICAgIChmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgIC8vIFN1cHBvcnQ6IElFOSBvbmx5XHJcbiAgICAgICAgLy8gSUU5IG9ubHkgY3JlYXRlcyBjb25zb2xlIG9iamVjdCB3aGVuIGRldiB0b29scyBhcmUgZmlyc3Qgb3BlbmVkXHJcbiAgICAgICAgLy8gQWxzbywgYXZvaWQgRnVuY3Rpb24jYmluZCBoZXJlIHRvIHNpbXBsaWZ5IFBoYW50b21KUyB1c2FnZVxyXG4gICAgICAgIHZhciBsb2cgPSB3aW5kb3cuY29uc29sZSAmJiB3aW5kb3cuY29uc29sZS5sb2cgJiZcclxuICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgd2luZG93LmNvbnNvbGUubG9nLmFwcGx5KHdpbmRvdy5jb25zb2xlLCBhcmd1bWVudHMpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICByYmFkVmVyc2lvbnMgPSAvXlsxMl1cXC4vO1xyXG5cclxuICAgICAgICBpZiAoIWxvZykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBOZWVkIGpRdWVyeSAzLjAuMCsgYW5kIG5vIG9sZGVyIE1pZ3JhdGUgbG9hZGVkXHJcbiAgICAgICAgaWYgKCFqUXVlcnkgfHwgcmJhZFZlcnNpb25zLnRlc3QoalF1ZXJ5LmZuLmpxdWVyeSkpIHtcclxuICAgICAgICAgICAgbG9nKFwiSlFNSUdSQVRFOiBqUXVlcnkgMy4wLjArIFJFUVVJUkVEXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoalF1ZXJ5Lm1pZ3JhdGVXYXJuaW5ncykge1xyXG4gICAgICAgICAgICBsb2coXCJKUU1JR1JBVEU6IE1pZ3JhdGUgcGx1Z2luIGxvYWRlZCBtdWx0aXBsZSB0aW1lc1wiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFNob3cgYSBtZXNzYWdlIG9uIHRoZSBjb25zb2xlIHNvIGRldnMga25vdyB3ZSdyZSBhY3RpdmVcclxuICAgICAgICBpZiAoIWpRdWVyeS5taWdyYXRlTXV0ZSkge1xyXG4gICAgICAgICAgICBsb2coXCJKUU1JR1JBVEU6IE1pZ3JhdGUgaXMgaW5zdGFsbGVkXCIgK1xyXG4gICAgICAgICAgICAgICAgKGpRdWVyeS5taWdyYXRlTXV0ZSA/IFwiXCIgOiBcIiB3aXRoIGxvZ2dpbmcgYWN0aXZlXCIpICtcclxuICAgICAgICAgICAgICAgIFwiLCB2ZXJzaW9uIFwiICsgalF1ZXJ5Lm1pZ3JhdGVWZXJzaW9uKTtcclxuICAgICAgICB9XHJcbiAgICB9KSgpO1xyXG5cclxuICAgIHZhciB3YXJuZWRBYm91dCA9IHt9O1xyXG5cclxuICAgIC8vIExpc3Qgb2Ygd2FybmluZ3MgYWxyZWFkeSBnaXZlbjsgcHVibGljIHJlYWQgb25seVxyXG4gICAgalF1ZXJ5Lm1pZ3JhdGVXYXJuaW5ncyA9IFtdO1xyXG5cclxuICAgIC8vIFNldCB0byBmYWxzZSB0byBkaXNhYmxlIHRyYWNlcyB0aGF0IGFwcGVhciB3aXRoIHdhcm5pbmdzXHJcbiAgICBpZiAoalF1ZXJ5Lm1pZ3JhdGVUcmFjZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgalF1ZXJ5Lm1pZ3JhdGVUcmFjZSA9IHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gRm9yZ2V0IGFueSB3YXJuaW5ncyB3ZSd2ZSBhbHJlYWR5IGdpdmVuOyBwdWJsaWNcclxuICAgIGpRdWVyeS5taWdyYXRlUmVzZXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgd2FybmVkQWJvdXQgPSB7fTtcclxuICAgICAgICBqUXVlcnkubWlncmF0ZVdhcm5pbmdzLmxlbmd0aCA9IDA7XHJcbiAgICB9O1xyXG5cclxuICAgIGZ1bmN0aW9uIG1pZ3JhdGVXYXJuKG1zZykge1xyXG4gICAgICAgIHZhciBjb25zb2xlID0gd2luZG93LmNvbnNvbGU7XHJcbiAgICAgICAgaWYgKCF3YXJuZWRBYm91dFttc2ddKSB7XHJcbiAgICAgICAgICAgIHdhcm5lZEFib3V0W21zZ10gPSB0cnVlO1xyXG4gICAgICAgICAgICBqUXVlcnkubWlncmF0ZVdhcm5pbmdzLnB1c2gobXNnKTtcclxuICAgICAgICAgICAgaWYgKGNvbnNvbGUgJiYgY29uc29sZS53YXJuICYmICFqUXVlcnkubWlncmF0ZU11dGUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIkpRTUlHUkFURTogXCIgKyBtc2cpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGpRdWVyeS5taWdyYXRlVHJhY2UgJiYgY29uc29sZS50cmFjZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUudHJhY2UoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBtaWdyYXRlV2FyblByb3Aob2JqLCBwcm9wLCB2YWx1ZSwgbXNnKSB7XHJcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwgcHJvcCwge1xyXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgbWlncmF0ZVdhcm4obXNnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAobmV3VmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIG1pZ3JhdGVXYXJuKG1zZyk7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IG5ld1ZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gbWlncmF0ZVdhcm5GdW5jKG9iaiwgcHJvcCwgbmV3RnVuYywgbXNnKSB7XHJcbiAgICAgICAgb2JqW3Byb3BdID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBtaWdyYXRlV2Fybihtc2cpO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3RnVuYy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHdpbmRvdy5kb2N1bWVudC5jb21wYXRNb2RlID09PSBcIkJhY2tDb21wYXRcIikge1xyXG4gICAgICAgIC8vIEpRdWVyeSBoYXMgbmV2ZXIgc3VwcG9ydGVkIG9yIHRlc3RlZCBRdWlya3MgTW9kZVxyXG4gICAgICAgIG1pZ3JhdGVXYXJuKFwialF1ZXJ5IGlzIG5vdCBjb21wYXRpYmxlIHdpdGggUXVpcmtzIE1vZGVcIik7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIHZhciBvbGRJbml0ID0galF1ZXJ5LmZuLmluaXQsXHJcbiAgICAgICAgb2xkSXNOdW1lcmljID0galF1ZXJ5LmlzTnVtZXJpYyxcclxuICAgICAgICBvbGRGaW5kID0galF1ZXJ5LmZpbmQsXHJcbiAgICAgICAgcmF0dHJIYXNoVGVzdCA9IC9cXFsoXFxzKlstXFx3XStcXHMqKShbfnxeJCpdPz0pXFxzKihbLVxcdyNdKj8jWy1cXHcjXSopXFxzKlxcXS8sXHJcbiAgICAgICAgcmF0dHJIYXNoR2xvYiA9IC9cXFsoXFxzKlstXFx3XStcXHMqKShbfnxeJCpdPz0pXFxzKihbLVxcdyNdKj8jWy1cXHcjXSopXFxzKlxcXS9nO1xyXG5cclxuICAgIGpRdWVyeS5mbi5pbml0ID0gZnVuY3Rpb24gKGFyZzEpIHtcclxuICAgICAgICB2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7XHJcblxyXG4gICAgICAgIGlmICh0eXBlb2YgYXJnMSA9PT0gXCJzdHJpbmdcIiAmJiBhcmcxID09PSBcIiNcIikge1xyXG4gICAgICAgICAgICAvLyBKUXVlcnkoIFwiI1wiICkgaXMgYSBib2d1cyBJRCBzZWxlY3RvciwgYnV0IGl0IHJldHVybmVkIGFuIGVtcHR5IHNldCBiZWZvcmUgalF1ZXJ5IDMuMFxyXG4gICAgICAgICAgICBtaWdyYXRlV2FybihcImpRdWVyeSggJyMnICkgaXMgbm90IGEgdmFsaWQgc2VsZWN0b3JcIik7XHJcbiAgICAgICAgICAgIGFyZ3NbMF0gPSBbXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBvbGRJbml0LmFwcGx5KHRoaXMsIGFyZ3MpO1xyXG4gICAgfTtcclxuICAgIGpRdWVyeS5mbi5pbml0LnByb3RvdHlwZSA9IGpRdWVyeS5mbjtcclxuXHJcbiAgICBqUXVlcnkuZmluZCA9IGZ1bmN0aW9uIChzZWxlY3Rvcikge1xyXG4gICAgICAgIHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTtcclxuXHJcbiAgICAgICAgLy8gU3VwcG9ydDogUGhhbnRvbUpTIDEueFxyXG4gICAgICAgIC8vIFN0cmluZyNtYXRjaCBmYWlscyB0byBtYXRjaCB3aGVuIHVzZWQgd2l0aCBhIC8vZyBSZWdFeHAsIG9ubHkgb24gc29tZSBzdHJpbmdzXHJcbiAgICAgICAgaWYgKHR5cGVvZiBzZWxlY3RvciA9PT0gXCJzdHJpbmdcIiAmJiByYXR0ckhhc2hUZXN0LnRlc3Qoc2VsZWN0b3IpKSB7XHJcbiAgICAgICAgICAgIC8vIFRoZSBub25zdGFuZGFyZCBhbmQgdW5kb2N1bWVudGVkIHVucXVvdGVkLWhhc2ggd2FzIHJlbW92ZWQgaW4galF1ZXJ5IDEuMTIuMFxyXG4gICAgICAgICAgICAvLyBGaXJzdCBzZWUgaWYgcVMgdGhpbmtzIGl0J3MgYSB2YWxpZCBzZWxlY3RvciwgaWYgc28gYXZvaWQgYSBmYWxzZSBwb3NpdGl2ZVxyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgd2luZG93LmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xyXG4gICAgICAgICAgICB9IGNhdGNoIChlcnIxKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBEaWRuJ3QgKmxvb2sqIHZhbGlkIHRvIHFTQSwgd2FybiBhbmQgdHJ5IHF1b3Rpbmcgd2hhdCB3ZSB0aGluayBpcyB0aGUgdmFsdWVcclxuICAgICAgICAgICAgICAgIHNlbGVjdG9yID0gc2VsZWN0b3IucmVwbGFjZShyYXR0ckhhc2hHbG9iLCBmdW5jdGlvbiAoXywgYXR0ciwgb3AsIHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwiW1wiICsgYXR0ciArIG9wICsgXCJcXFwiXCIgKyB2YWx1ZSArIFwiXFxcIl1cIjtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIElmIHRoZSByZWdleHAgKm1heSogaGF2ZSBjcmVhdGVkIGFuIGludmFsaWQgc2VsZWN0b3IsIGRvbid0IHVwZGF0ZSBpdFxyXG4gICAgICAgICAgICAgICAgLy8gTm90ZSB0aGF0IHRoZXJlIG1heSBiZSBmYWxzZSBhbGFybXMgaWYgc2VsZWN0b3IgdXNlcyBqUXVlcnkgZXh0ZW5zaW9uc1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cuZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgbWlncmF0ZVdhcm4oXCJBdHRyaWJ1dGUgc2VsZWN0b3Igd2l0aCAnIycgbXVzdCBiZSBxdW90ZWQ6IFwiICsgYXJnc1swXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXJnc1swXSA9IHNlbGVjdG9yO1xyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyMikge1xyXG4gICAgICAgICAgICAgICAgICAgIG1pZ3JhdGVXYXJuKFwiQXR0cmlidXRlIHNlbGVjdG9yIHdpdGggJyMnIHdhcyBub3QgZml4ZWQ6IFwiICsgYXJnc1swXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBvbGRGaW5kLmFwcGx5KHRoaXMsIGFyZ3MpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBDb3B5IHByb3BlcnRpZXMgYXR0YWNoZWQgdG8gb3JpZ2luYWwgalF1ZXJ5LmZpbmQgbWV0aG9kIChlLmcuIC5hdHRyLCAuaXNYTUwpXHJcbiAgICB2YXIgZmluZFByb3A7XHJcbiAgICBmb3IgKGZpbmRQcm9wIGluIG9sZEZpbmQpIHtcclxuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9sZEZpbmQsIGZpbmRQcm9wKSkge1xyXG4gICAgICAgICAgICBqUXVlcnkuZmluZFtmaW5kUHJvcF0gPSBvbGRGaW5kW2ZpbmRQcm9wXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gVGhlIG51bWJlciBvZiBlbGVtZW50cyBjb250YWluZWQgaW4gdGhlIG1hdGNoZWQgZWxlbWVudCBzZXRcclxuICAgIGpRdWVyeS5mbi5zaXplID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIG1pZ3JhdGVXYXJuKFwialF1ZXJ5LmZuLnNpemUoKSBpcyBkZXByZWNhdGVkIGFuZCByZW1vdmVkOyB1c2UgdGhlIC5sZW5ndGggcHJvcGVydHlcIik7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubGVuZ3RoO1xyXG4gICAgfTtcclxuXHJcbiAgICBqUXVlcnkucGFyc2VKU09OID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIG1pZ3JhdGVXYXJuKFwialF1ZXJ5LnBhcnNlSlNPTiBpcyBkZXByZWNhdGVkOyB1c2UgSlNPTi5wYXJzZVwiKTtcclxuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZS5hcHBseShudWxsLCBhcmd1bWVudHMpO1xyXG4gICAgfTtcclxuXHJcbiAgICBqUXVlcnkuaXNOdW1lcmljID0gZnVuY3Rpb24gKHZhbCkge1xyXG4gICAgICAgIC8vIFRoZSBqUXVlcnkgMi4yLjMgaW1wbGVtZW50YXRpb24gb2YgaXNOdW1lcmljXHJcbiAgICAgICAgZnVuY3Rpb24gaXNOdW1lcmljMihvYmopIHtcclxuICAgICAgICAgICAgdmFyIHJlYWxTdHJpbmdPYmogPSBvYmogJiYgb2JqLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgIHJldHVybiAhalF1ZXJ5LmlzQXJyYXkob2JqKSAmJiAocmVhbFN0cmluZ09iaiAtIHBhcnNlRmxvYXQocmVhbFN0cmluZ09iaikgKyAxKSA+PSAwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIG5ld1ZhbHVlID0gb2xkSXNOdW1lcmljKHZhbCksXHJcbiAgICAgICAgICAgIG9sZFZhbHVlID0gaXNOdW1lcmljMih2YWwpO1xyXG5cclxuICAgICAgICBpZiAobmV3VmFsdWUgIT09IG9sZFZhbHVlKSB7XHJcbiAgICAgICAgICAgIG1pZ3JhdGVXYXJuKFwialF1ZXJ5LmlzTnVtZXJpYygpIHNob3VsZCBub3QgYmUgY2FsbGVkIG9uIGNvbnN0cnVjdGVkIG9iamVjdHNcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gb2xkVmFsdWU7XHJcbiAgICB9O1xyXG5cclxuICAgIG1pZ3JhdGVXYXJuRnVuYyhqUXVlcnksIFwidW5pcXVlXCIsIGpRdWVyeS51bmlxdWVTb3J0LFxyXG4gICAgICAgIFwialF1ZXJ5LnVuaXF1ZSBpcyBkZXByZWNhdGVkOyB1c2UgalF1ZXJ5LnVuaXF1ZVNvcnRcIik7XHJcblxyXG4gICAgLy8gTm93IGpRdWVyeS5leHByLnBzZXVkb3MgaXMgdGhlIHN0YW5kYXJkIGluY2FudGF0aW9uXHJcbiAgICBtaWdyYXRlV2FyblByb3AoalF1ZXJ5LmV4cHIsIFwiZmlsdGVyc1wiLCBqUXVlcnkuZXhwci5wc2V1ZG9zLFxyXG4gICAgICAgIFwialF1ZXJ5LmV4cHIuZmlsdGVycyBpcyBkZXByZWNhdGVkOyB1c2UgalF1ZXJ5LmV4cHIucHNldWRvc1wiKTtcclxuICAgIG1pZ3JhdGVXYXJuUHJvcChqUXVlcnkuZXhwciwgXCI6XCIsIGpRdWVyeS5leHByLnBzZXVkb3MsXHJcbiAgICAgICAgXCJqUXVlcnkuZXhwclsnOiddIGlzIGRlcHJlY2F0ZWQ7IHVzZSBqUXVlcnkuZXhwci5wc2V1ZG9zXCIpO1xyXG5cclxuXHJcbiAgICB2YXIgb2xkQWpheCA9IGpRdWVyeS5hamF4O1xyXG5cclxuICAgIGpRdWVyeS5hamF4ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBqUVhIUiA9IG9sZEFqYXguYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxuXHJcbiAgICAgICAgLy8gQmUgc3VyZSB3ZSBnb3QgYSBqUVhIUiAoZS5nLiwgbm90IHN5bmMpXHJcbiAgICAgICAgaWYgKGpRWEhSLnByb21pc2UpIHtcclxuICAgICAgICAgICAgbWlncmF0ZVdhcm5GdW5jKGpRWEhSLCBcInN1Y2Nlc3NcIiwgalFYSFIuZG9uZSxcclxuICAgICAgICAgICAgICAgIFwialFYSFIuc3VjY2VzcyBpcyBkZXByZWNhdGVkIGFuZCByZW1vdmVkXCIpO1xyXG4gICAgICAgICAgICBtaWdyYXRlV2FybkZ1bmMoalFYSFIsIFwiZXJyb3JcIiwgalFYSFIuZmFpbCxcclxuICAgICAgICAgICAgICAgIFwialFYSFIuZXJyb3IgaXMgZGVwcmVjYXRlZCBhbmQgcmVtb3ZlZFwiKTtcclxuICAgICAgICAgICAgbWlncmF0ZVdhcm5GdW5jKGpRWEhSLCBcImNvbXBsZXRlXCIsIGpRWEhSLmFsd2F5cyxcclxuICAgICAgICAgICAgICAgIFwialFYSFIuY29tcGxldGUgaXMgZGVwcmVjYXRlZCBhbmQgcmVtb3ZlZFwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBqUVhIUjtcclxuICAgIH07XHJcblxyXG5cclxuICAgIHZhciBvbGRSZW1vdmVBdHRyID0galF1ZXJ5LmZuLnJlbW92ZUF0dHIsXHJcbiAgICAgICAgb2xkVG9nZ2xlQ2xhc3MgPSBqUXVlcnkuZm4udG9nZ2xlQ2xhc3MsXHJcbiAgICAgICAgcm1hdGNoTm9uU3BhY2UgPSAvXFxTKy9nO1xyXG5cclxuICAgIGpRdWVyeS5mbi5yZW1vdmVBdHRyID0gZnVuY3Rpb24gKG5hbWUpIHtcclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgICAgIGpRdWVyeS5lYWNoKG5hbWUubWF0Y2gocm1hdGNoTm9uU3BhY2UpLCBmdW5jdGlvbiAoaSwgYXR0cikge1xyXG4gICAgICAgICAgICBpZiAoalF1ZXJ5LmV4cHIubWF0Y2guYm9vbC50ZXN0KGF0dHIpKSB7XHJcbiAgICAgICAgICAgICAgICBtaWdyYXRlV2FybihcImpRdWVyeS5mbi5yZW1vdmVBdHRyIG5vIGxvbmdlciBzZXRzIGJvb2xlYW4gcHJvcGVydGllczogXCIgKyBhdHRyKTtcclxuICAgICAgICAgICAgICAgIHNlbGYucHJvcChhdHRyLCBmYWxzZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG9sZFJlbW92ZUF0dHIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxuICAgIH07XHJcblxyXG4gICAgalF1ZXJ5LmZuLnRvZ2dsZUNsYXNzID0gZnVuY3Rpb24gKHN0YXRlKSB7XHJcbiAgICAgICAgLy8gT25seSBkZXByZWNhdGluZyBuby1hcmdzIG9yIHNpbmdsZSBib29sZWFuIGFyZ1xyXG4gICAgICAgIGlmIChzdGF0ZSAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBzdGF0ZSAhPT0gXCJib29sZWFuXCIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG9sZFRvZ2dsZUNsYXNzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBtaWdyYXRlV2FybihcImpRdWVyeS5mbi50b2dnbGVDbGFzcyggYm9vbGVhbiApIGlzIGRlcHJlY2F0ZWRcIik7XHJcblxyXG4gICAgICAgIC8vIFRvZ2dsZSBlbnRpcmUgY2xhc3MgbmFtZSBvZiBlYWNoIGVsZW1lbnRcclxuICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGNsYXNzTmFtZSA9IHRoaXMuZ2V0QXR0cmlidXRlICYmIHRoaXMuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIikgfHwgXCJcIjtcclxuXHJcbiAgICAgICAgICAgIGlmIChjbGFzc05hbWUpIHtcclxuICAgICAgICAgICAgICAgIGpRdWVyeS5kYXRhKHRoaXMsIFwiX19jbGFzc05hbWVfX1wiLCBjbGFzc05hbWUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBJZiB0aGUgZWxlbWVudCBoYXMgYSBjbGFzcyBuYW1lIG9yIGlmIHdlJ3JlIHBhc3NlZCBgZmFsc2VgLFxyXG4gICAgICAgICAgICAvLyB0aGVuIHJlbW92ZSB0aGUgd2hvbGUgY2xhc3NuYW1lIChpZiB0aGVyZSB3YXMgb25lLCB0aGUgYWJvdmUgc2F2ZWQgaXQpLlxyXG4gICAgICAgICAgICAvLyBPdGhlcndpc2UgYnJpbmcgYmFjayB3aGF0ZXZlciB3YXMgcHJldmlvdXNseSBzYXZlZCAoaWYgYW55dGhpbmcpLFxyXG4gICAgICAgICAgICAvLyBmYWxsaW5nIGJhY2sgdG8gdGhlIGVtcHR5IHN0cmluZyBpZiBub3RoaW5nIHdhcyBzdG9yZWQuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNldEF0dHJpYnV0ZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZSB8fCBzdGF0ZSA9PT0gZmFsc2UgP1xyXG4gICAgICAgICAgICAgICAgICAgIFwiXCIgOlxyXG4gICAgICAgICAgICAgICAgICAgIGpRdWVyeS5kYXRhKHRoaXMsIFwiX19jbGFzc05hbWVfX1wiKSB8fCBcIlwiXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICB2YXIgaW50ZXJuYWxTd2FwQ2FsbCA9IGZhbHNlO1xyXG5cclxuICAgIC8vIElmIHRoaXMgdmVyc2lvbiBvZiBqUXVlcnkgaGFzIC5zd2FwKCksIGRvbid0IGZhbHNlLWFsYXJtIG9uIGludGVybmFsIHVzZXNcclxuICAgIGlmIChqUXVlcnkuc3dhcCkge1xyXG4gICAgICAgIGpRdWVyeS5lYWNoKFtcImhlaWdodFwiLCBcIndpZHRoXCIsIFwicmVsaWFibGVNYXJnaW5SaWdodFwiXSwgZnVuY3Rpb24gKF8sIG5hbWUpIHtcclxuICAgICAgICAgICAgdmFyIG9sZEhvb2sgPSBqUXVlcnkuY3NzSG9va3NbbmFtZV0gJiYgalF1ZXJ5LmNzc0hvb2tzW25hbWVdLmdldDtcclxuXHJcbiAgICAgICAgICAgIGlmIChvbGRIb29rKSB7XHJcbiAgICAgICAgICAgICAgICBqUXVlcnkuY3NzSG9va3NbbmFtZV0uZ2V0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciByZXQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGludGVybmFsU3dhcENhbGwgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldCA9IG9sZEhvb2suYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxuICAgICAgICAgICAgICAgICAgICBpbnRlcm5hbFN3YXBDYWxsID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJldDtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBqUXVlcnkuc3dhcCA9IGZ1bmN0aW9uIChlbGVtLCBvcHRpb25zLCBjYWxsYmFjaywgYXJncykge1xyXG4gICAgICAgIHZhciByZXQsIG5hbWUsXHJcbiAgICAgICAgICAgIG9sZCA9IHt9O1xyXG5cclxuICAgICAgICBpZiAoIWludGVybmFsU3dhcENhbGwpIHtcclxuICAgICAgICAgICAgbWlncmF0ZVdhcm4oXCJqUXVlcnkuc3dhcCgpIGlzIHVuZG9jdW1lbnRlZCBhbmQgZGVwcmVjYXRlZFwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFJlbWVtYmVyIHRoZSBvbGQgdmFsdWVzLCBhbmQgaW5zZXJ0IHRoZSBuZXcgb25lc1xyXG4gICAgICAgIGZvciAobmFtZSBpbiBvcHRpb25zKSB7XHJcbiAgICAgICAgICAgIG9sZFtuYW1lXSA9IGVsZW0uc3R5bGVbbmFtZV07XHJcbiAgICAgICAgICAgIGVsZW0uc3R5bGVbbmFtZV0gPSBvcHRpb25zW25hbWVdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0ID0gY2FsbGJhY2suYXBwbHkoZWxlbSwgYXJncyB8fCBbXSk7XHJcblxyXG4gICAgICAgIC8vIFJldmVydCB0aGUgb2xkIHZhbHVlc1xyXG4gICAgICAgIGZvciAobmFtZSBpbiBvcHRpb25zKSB7XHJcbiAgICAgICAgICAgIGVsZW0uc3R5bGVbbmFtZV0gPSBvbGRbbmFtZV07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gcmV0O1xyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgb2xkRGF0YSA9IGpRdWVyeS5kYXRhO1xyXG5cclxuICAgIGpRdWVyeS5kYXRhID0gZnVuY3Rpb24gKGVsZW0sIG5hbWUsIHZhbHVlKSB7XHJcbiAgICAgICAgdmFyIGN1ckRhdGE7XHJcblxyXG4gICAgICAgIC8vIE5hbWUgY2FuIGJlIGFuIG9iamVjdCwgYW5kIGVhY2ggZW50cnkgaW4gdGhlIG9iamVjdCBpcyBtZWFudCB0byBiZSBzZXQgYXMgZGF0YVxyXG4gICAgICAgIGlmIChuYW1lICYmIHR5cGVvZiBuYW1lID09PSBcIm9iamVjdFwiICYmIGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIHtcclxuICAgICAgICAgICAgY3VyRGF0YSA9IGpRdWVyeS5oYXNEYXRhKGVsZW0pICYmIG9sZERhdGEuY2FsbCh0aGlzLCBlbGVtKTtcclxuICAgICAgICAgICAgdmFyIHNhbWVLZXlzID0ge307XHJcbiAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBuYW1lKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoa2V5ICE9PSBqUXVlcnkuY2FtZWxDYXNlKGtleSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBtaWdyYXRlV2FybihcImpRdWVyeS5kYXRhKCkgYWx3YXlzIHNldHMvZ2V0cyBjYW1lbENhc2VkIG5hbWVzOiBcIiArIGtleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY3VyRGF0YVtrZXldID0gbmFtZVtrZXldO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBzYW1lS2V5c1trZXldID0gbmFtZVtrZXldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBvbGREYXRhLmNhbGwodGhpcywgZWxlbSwgc2FtZUtleXMpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG5hbWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBJZiB0aGUgbmFtZSBpcyB0cmFuc2Zvcm1lZCwgbG9vayBmb3IgdGhlIHVuLXRyYW5zZm9ybWVkIG5hbWUgaW4gdGhlIGRhdGEgb2JqZWN0XHJcbiAgICAgICAgaWYgKG5hbWUgJiYgdHlwZW9mIG5hbWUgPT09IFwic3RyaW5nXCIgJiYgbmFtZSAhPT0galF1ZXJ5LmNhbWVsQ2FzZShuYW1lKSkge1xyXG4gICAgICAgICAgICBjdXJEYXRhID0galF1ZXJ5Lmhhc0RhdGEoZWxlbSkgJiYgb2xkRGF0YS5jYWxsKHRoaXMsIGVsZW0pO1xyXG4gICAgICAgICAgICBpZiAoY3VyRGF0YSAmJiBuYW1lIGluIGN1ckRhdGEpIHtcclxuICAgICAgICAgICAgICAgIG1pZ3JhdGVXYXJuKFwialF1ZXJ5LmRhdGEoKSBhbHdheXMgc2V0cy9nZXRzIGNhbWVsQ2FzZWQgbmFtZXM6IFwiICsgbmFtZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA+IDIpIHtcclxuICAgICAgICAgICAgICAgICAgICBjdXJEYXRhW25hbWVdID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY3VyRGF0YVtuYW1lXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG9sZERhdGEuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxuICAgIH07XHJcblxyXG4gICAgdmFyIG9sZFR3ZWVuUnVuID0galF1ZXJ5LlR3ZWVuLnByb3RvdHlwZS5ydW47XHJcblxyXG4gICAgalF1ZXJ5LlR3ZWVuLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKGpRdWVyeS5lYXNpbmdbdGhpcy5lYXNpbmddLmxlbmd0aCA+IDEpIHtcclxuICAgICAgICAgICAgbWlncmF0ZVdhcm4oXHJcbiAgICAgICAgICAgICAgICBcImVhc2luZyBmdW5jdGlvbiBcIiArXHJcbiAgICAgICAgICAgICAgICBcIlxcXCJqUXVlcnkuZWFzaW5nLlwiICsgdGhpcy5lYXNpbmcudG9TdHJpbmcoKSArXHJcbiAgICAgICAgICAgICAgICBcIlxcXCIgc2hvdWxkIHVzZSBvbmx5IGZpcnN0IGFyZ3VtZW50XCJcclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBvbGRFYXNpbmcgPSBqUXVlcnkuZWFzaW5nW3RoaXMuZWFzaW5nXTtcclxuICAgICAgICAgICAgalF1ZXJ5LmVhc2luZ1t0aGlzLmVhc2luZ10gPSBmdW5jdGlvbiAocGVyY2VudCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9sZEVhc2luZy5jYWxsKGpRdWVyeS5lYXNpbmcsIHBlcmNlbnQsIHBlcmNlbnQsIDAsIDEsIDEpO1xyXG4gICAgICAgICAgICB9LmJpbmQodGhpcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBvbGRUd2VlblJ1bi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG4gICAgfTtcclxuXHJcbiAgICBqUXVlcnkuZnguaW50ZXJ2YWwgPSBqUXVlcnkuZnguaW50ZXJ2YWwgfHwgMTM7XHJcblxyXG4gICAgLy8gU3VwcG9ydDogSUU5LCBBbmRyb2lkIDw9NC40XHJcbiAgICAvLyBBdm9pZCBmYWxzZSBwb3NpdGl2ZXMgb24gYnJvd3NlcnMgdGhhdCBsYWNrIHJBRlxyXG4gICAgaWYgKHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUpIHtcclxuICAgICAgICBtaWdyYXRlV2FyblByb3AoalF1ZXJ5LmZ4LCBcImludGVydmFsXCIsIGpRdWVyeS5meC5pbnRlcnZhbCxcclxuICAgICAgICAgICAgXCJqUXVlcnkuZnguaW50ZXJ2YWwgaXMgZGVwcmVjYXRlZFwiKTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgb2xkTG9hZCA9IGpRdWVyeS5mbi5sb2FkLFxyXG4gICAgICAgIG9sZEV2ZW50QWRkID0galF1ZXJ5LmV2ZW50LmFkZCxcclxuICAgICAgICBvcmlnaW5hbEZpeCA9IGpRdWVyeS5ldmVudC5maXg7XHJcblxyXG4gICAgalF1ZXJ5LmV2ZW50LnByb3BzID0gW107XHJcbiAgICBqUXVlcnkuZXZlbnQuZml4SG9va3MgPSB7fTtcclxuXHJcbiAgICBtaWdyYXRlV2FyblByb3AoalF1ZXJ5LmV2ZW50LnByb3BzLCBcImNvbmNhdFwiLCBqUXVlcnkuZXZlbnQucHJvcHMuY29uY2F0LFxyXG4gICAgICAgIFwialF1ZXJ5LmV2ZW50LnByb3BzLmNvbmNhdCgpIGlzIGRlcHJlY2F0ZWQgYW5kIHJlbW92ZWRcIik7XHJcblxyXG4gICAgalF1ZXJ5LmV2ZW50LmZpeCA9IGZ1bmN0aW9uIChvcmlnaW5hbEV2ZW50KSB7XHJcbiAgICAgICAgdmFyIGV2ZW50LFxyXG4gICAgICAgICAgICB0eXBlID0gb3JpZ2luYWxFdmVudC50eXBlLFxyXG4gICAgICAgICAgICBmaXhIb29rID0gdGhpcy5maXhIb29rc1t0eXBlXSxcclxuICAgICAgICAgICAgcHJvcHMgPSBqUXVlcnkuZXZlbnQucHJvcHM7XHJcblxyXG4gICAgICAgIGlmIChwcm9wcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgbWlncmF0ZVdhcm4oXCJqUXVlcnkuZXZlbnQucHJvcHMgYXJlIGRlcHJlY2F0ZWQgYW5kIHJlbW92ZWQ6IFwiICsgcHJvcHMuam9pbigpKTtcclxuICAgICAgICAgICAgd2hpbGUgKHByb3BzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgalF1ZXJ5LmV2ZW50LmFkZFByb3AocHJvcHMucG9wKCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoZml4SG9vayAmJiAhZml4SG9vay5fbWlncmF0ZWRfKSB7XHJcbiAgICAgICAgICAgIGZpeEhvb2suX21pZ3JhdGVkXyA9IHRydWU7XHJcbiAgICAgICAgICAgIG1pZ3JhdGVXYXJuKFwialF1ZXJ5LmV2ZW50LmZpeEhvb2tzIGFyZSBkZXByZWNhdGVkIGFuZCByZW1vdmVkOiBcIiArIHR5cGUpO1xyXG4gICAgICAgICAgICBpZiAoKHByb3BzID0gZml4SG9vay5wcm9wcykgJiYgcHJvcHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAocHJvcHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgalF1ZXJ5LmV2ZW50LmFkZFByb3AocHJvcHMucG9wKCkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBldmVudCA9IG9yaWdpbmFsRml4LmNhbGwodGhpcywgb3JpZ2luYWxFdmVudCk7XHJcblxyXG4gICAgICAgIHJldHVybiBmaXhIb29rICYmIGZpeEhvb2suZmlsdGVyID8gZml4SG9vay5maWx0ZXIoZXZlbnQsIG9yaWdpbmFsRXZlbnQpIDogZXZlbnQ7XHJcbiAgICB9O1xyXG5cclxuICAgIGpRdWVyeS5ldmVudC5hZGQgPSBmdW5jdGlvbiAoZWxlbSwgdHlwZXMpIHtcclxuICAgICAgICAvLyBUaGlzIG1pc3NlcyB0aGUgbXVsdGlwbGUtdHlwZXMgY2FzZSBidXQgdGhhdCBzZWVtcyBhd2Z1bGx5IHJhcmVcclxuICAgICAgICBpZiAoZWxlbSA9PT0gd2luZG93ICYmIHR5cGVzID09PSBcImxvYWRcIiAmJiB3aW5kb3cuZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gXCJjb21wbGV0ZVwiKSB7XHJcbiAgICAgICAgICAgIG1pZ3JhdGVXYXJuKFwialF1ZXJ5KHdpbmRvdykub24oJ2xvYWQnLi4uKSBjYWxsZWQgYWZ0ZXIgbG9hZCBldmVudCBvY2N1cnJlZFwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG9sZEV2ZW50QWRkLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbiAgICB9O1xyXG5cclxuICAgIGpRdWVyeS5lYWNoKFtcImxvYWRcIiwgXCJ1bmxvYWRcIiwgXCJlcnJvclwiXSwgZnVuY3Rpb24gKF8sIG5hbWUpIHtcclxuXHJcbiAgICAgICAgalF1ZXJ5LmZuW25hbWVdID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMCk7XHJcblxyXG4gICAgICAgICAgICAvLyBJZiB0aGlzIGlzIGFuIGFqYXggbG9hZCgpIHRoZSBmaXJzdCBhcmcgc2hvdWxkIGJlIHRoZSBzdHJpbmcgVVJMO1xyXG4gICAgICAgICAgICAvLyB0ZWNobmljYWxseSB0aGlzIGNvdWxkIGFsc28gYmUgdGhlIFwiQW55dGhpbmdcIiBhcmcgb2YgdGhlIGV2ZW50IC5sb2FkKClcclxuICAgICAgICAgICAgLy8gd2hpY2gganVzdCBnb2VzIHRvIHNob3cgd2h5IHRoaXMgZHVtYiBzaWduYXR1cmUgaGFzIGJlZW4gZGVwcmVjYXRlZCFcclxuICAgICAgICAgICAgLy8galF1ZXJ5IGN1c3RvbSBidWlsZHMgdGhhdCBleGNsdWRlIHRoZSBBamF4IG1vZHVsZSBqdXN0aWZpYWJseSBkaWUgaGVyZS5cclxuICAgICAgICAgICAgaWYgKG5hbWUgPT09IFwibG9hZFwiICYmIHR5cGVvZiBhcmdzWzBdID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gb2xkTG9hZC5hcHBseSh0aGlzLCBhcmdzKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbWlncmF0ZVdhcm4oXCJqUXVlcnkuZm4uXCIgKyBuYW1lICsgXCIoKSBpcyBkZXByZWNhdGVkXCIpO1xyXG5cclxuICAgICAgICAgICAgYXJncy5zcGxpY2UoMCwgMCwgbmFtZSk7XHJcbiAgICAgICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5vbi5hcHBseSh0aGlzLCBhcmdzKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gVXNlIC50cmlnZ2VySGFuZGxlciBoZXJlIGJlY2F1c2U6XHJcbiAgICAgICAgICAgIC8vIC0gbG9hZCBhbmQgdW5sb2FkIGV2ZW50cyBkb24ndCBuZWVkIHRvIGJ1YmJsZSwgb25seSBhcHBsaWVkIHRvIHdpbmRvdyBvciBpbWFnZVxyXG4gICAgICAgICAgICAvLyAtIGVycm9yIGV2ZW50IHNob3VsZCBub3QgYnViYmxlIHRvIHdpbmRvdywgYWx0aG91Z2ggaXQgZG9lcyBwcmUtMS43XHJcbiAgICAgICAgICAgIC8vIFNlZSBodHRwOi8vYnVncy5qcXVlcnkuY29tL3RpY2tldC8xMTgyMFxyXG4gICAgICAgICAgICB0aGlzLnRyaWdnZXJIYW5kbGVyLmFwcGx5KHRoaXMsIGFyZ3MpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9O1xyXG5cclxuICAgIH0pO1xyXG5cclxuICAgIC8vIFRyaWdnZXIgXCJyZWFkeVwiIGV2ZW50IG9ubHkgb25jZSwgb24gZG9jdW1lbnQgcmVhZHlcclxuICAgIGpRdWVyeShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgalF1ZXJ5KHdpbmRvdy5kb2N1bWVudCkudHJpZ2dlckhhbmRsZXIoXCJyZWFkeVwiKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGpRdWVyeS5ldmVudC5zcGVjaWFsLnJlYWR5ID0ge1xyXG4gICAgICAgIHNldHVwOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzID09PSB3aW5kb3cuZG9jdW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIG1pZ3JhdGVXYXJuKFwiJ3JlYWR5JyBldmVudCBpcyBkZXByZWNhdGVkXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBqUXVlcnkuZm4uZXh0ZW5kKHtcclxuICAgICAgICBiaW5kOiBmdW5jdGlvbiAodHlwZXMsIGRhdGEsIGZuKSB7XHJcbiAgICAgICAgICAgIG1pZ3JhdGVXYXJuKFwialF1ZXJ5LmZuLmJpbmQoKSBpcyBkZXByZWNhdGVkXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vbih0eXBlcywgbnVsbCwgZGF0YSwgZm4pO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdW5iaW5kOiBmdW5jdGlvbiAodHlwZXMsIGZuKSB7XHJcbiAgICAgICAgICAgIG1pZ3JhdGVXYXJuKFwialF1ZXJ5LmZuLnVuYmluZCgpIGlzIGRlcHJlY2F0ZWRcIik7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm9mZih0eXBlcywgbnVsbCwgZm4pO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZGVsZWdhdGU6IGZ1bmN0aW9uIChzZWxlY3RvciwgdHlwZXMsIGRhdGEsIGZuKSB7XHJcbiAgICAgICAgICAgIG1pZ3JhdGVXYXJuKFwialF1ZXJ5LmZuLmRlbGVnYXRlKCkgaXMgZGVwcmVjYXRlZFwiKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMub24odHlwZXMsIHNlbGVjdG9yLCBkYXRhLCBmbik7XHJcbiAgICAgICAgfSxcclxuICAgICAgICB1bmRlbGVnYXRlOiBmdW5jdGlvbiAoc2VsZWN0b3IsIHR5cGVzLCBmbikge1xyXG4gICAgICAgICAgICBtaWdyYXRlV2FybihcImpRdWVyeS5mbi51bmRlbGVnYXRlKCkgaXMgZGVwcmVjYXRlZFwiKTtcclxuICAgICAgICAgICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPT09IDEgP1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vZmYoc2VsZWN0b3IsIFwiKipcIikgOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5vZmYodHlwZXMsIHNlbGVjdG9yIHx8IFwiKipcIiwgZm4pO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuXHJcbiAgICB2YXIgb2xkT2Zmc2V0ID0galF1ZXJ5LmZuLm9mZnNldDtcclxuXHJcbiAgICBqUXVlcnkuZm4ub2Zmc2V0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBkb2NFbGVtLFxyXG4gICAgICAgICAgICBlbGVtID0gdGhpc1swXSxcclxuICAgICAgICAgICAgb3JpZ2luID0geyB0b3A6IDAsIGxlZnQ6IDAgfTtcclxuXHJcbiAgICAgICAgaWYgKCFlbGVtIHx8ICFlbGVtLm5vZGVUeXBlKSB7XHJcbiAgICAgICAgICAgIG1pZ3JhdGVXYXJuKFwialF1ZXJ5LmZuLm9mZnNldCgpIHJlcXVpcmVzIGEgdmFsaWQgRE9NIGVsZW1lbnRcIik7XHJcbiAgICAgICAgICAgIHJldHVybiBvcmlnaW47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBkb2NFbGVtID0gKGVsZW0ub3duZXJEb2N1bWVudCB8fCB3aW5kb3cuZG9jdW1lbnQpLmRvY3VtZW50RWxlbWVudDtcclxuICAgICAgICBpZiAoIWpRdWVyeS5jb250YWlucyhkb2NFbGVtLCBlbGVtKSkge1xyXG4gICAgICAgICAgICBtaWdyYXRlV2FybihcImpRdWVyeS5mbi5vZmZzZXQoKSByZXF1aXJlcyBhbiBlbGVtZW50IGNvbm5lY3RlZCB0byBhIGRvY3VtZW50XCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gb3JpZ2luO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG9sZE9mZnNldC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG4gICAgfTtcclxuXHJcblxyXG4gICAgdmFyIG9sZFBhcmFtID0galF1ZXJ5LnBhcmFtO1xyXG5cclxuICAgIGpRdWVyeS5wYXJhbSA9IGZ1bmN0aW9uIChkYXRhLCB0cmFkaXRpb25hbCkge1xyXG4gICAgICAgIHZhciBhamF4VHJhZGl0aW9uYWwgPSBqUXVlcnkuYWpheFNldHRpbmdzICYmIGpRdWVyeS5hamF4U2V0dGluZ3MudHJhZGl0aW9uYWw7XHJcblxyXG4gICAgICAgIGlmICh0cmFkaXRpb25hbCA9PT0gdW5kZWZpbmVkICYmIGFqYXhUcmFkaXRpb25hbCkge1xyXG4gICAgICAgICAgICBtaWdyYXRlV2FybihcImpRdWVyeS5wYXJhbSgpIG5vIGxvbmdlciB1c2VzIGpRdWVyeS5hamF4U2V0dGluZ3MudHJhZGl0aW9uYWxcIik7XHJcbiAgICAgICAgICAgIHRyYWRpdGlvbmFsID0gYWpheFRyYWRpdGlvbmFsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG9sZFBhcmFtLmNhbGwodGhpcywgZGF0YSwgdHJhZGl0aW9uYWwpO1xyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgb2xkU2VsZiA9IGpRdWVyeS5mbi5hbmRTZWxmIHx8IGpRdWVyeS5mbi5hZGRCYWNrO1xyXG5cclxuICAgIGpRdWVyeS5mbi5hbmRTZWxmID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIG1pZ3JhdGVXYXJuKFwialF1ZXJ5LmZuLmFuZFNlbGYoKSBpcyBkZXByZWNhdGVkIGFuZCByZW1vdmVkLCB1c2UgalF1ZXJ5LmZuLmFkZEJhY2soKVwiKTtcclxuICAgICAgICByZXR1cm4gb2xkU2VsZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xyXG4gICAgfTtcclxuXHJcblxyXG4gICAgdmFyIG9sZERlZmVycmVkID0galF1ZXJ5LkRlZmVycmVkLFxyXG4gICAgICAgIHR1cGxlcyA9IFtcclxuICAgICAgICAgICAgLy8gQWN0aW9uLCBhZGQgbGlzdGVuZXIsIGNhbGxiYWNrcywgLnRoZW4gaGFuZGxlcnMsIGZpbmFsIHN0YXRlXHJcbiAgICAgICAgICAgIFtcInJlc29sdmVcIiwgXCJkb25lXCIsIGpRdWVyeS5DYWxsYmFja3MoXCJvbmNlIG1lbW9yeVwiKSxcclxuICAgICAgICAgICAgICAgIGpRdWVyeS5DYWxsYmFja3MoXCJvbmNlIG1lbW9yeVwiKSwgXCJyZXNvbHZlZFwiXSxcclxuICAgICAgICAgICAgW1wicmVqZWN0XCIsIFwiZmFpbFwiLCBqUXVlcnkuQ2FsbGJhY2tzKFwib25jZSBtZW1vcnlcIiksXHJcbiAgICAgICAgICAgICAgICBqUXVlcnkuQ2FsbGJhY2tzKFwib25jZSBtZW1vcnlcIiksIFwicmVqZWN0ZWRcIl0sXHJcbiAgICAgICAgICAgIFtcIm5vdGlmeVwiLCBcInByb2dyZXNzXCIsIGpRdWVyeS5DYWxsYmFja3MoXCJtZW1vcnlcIiksXHJcbiAgICAgICAgICAgICAgICBqUXVlcnkuQ2FsbGJhY2tzKFwibWVtb3J5XCIpXVxyXG4gICAgICAgIF07XHJcblxyXG4gICAgalF1ZXJ5LkRlZmVycmVkID0gZnVuY3Rpb24gKGZ1bmMpIHtcclxuICAgICAgICB2YXIgZGVmZXJyZWQgPSBvbGREZWZlcnJlZCgpLFxyXG4gICAgICAgICAgICBwcm9taXNlID0gZGVmZXJyZWQucHJvbWlzZSgpO1xyXG5cclxuICAgICAgICBkZWZlcnJlZC5waXBlID0gcHJvbWlzZS5waXBlID0gZnVuY3Rpb24gKCAvKiBmbkRvbmUsIGZuRmFpbCwgZm5Qcm9ncmVzcyAqLykge1xyXG4gICAgICAgICAgICB2YXIgZm5zID0gYXJndW1lbnRzO1xyXG5cclxuICAgICAgICAgICAgbWlncmF0ZVdhcm4oXCJkZWZlcnJlZC5waXBlKCkgaXMgZGVwcmVjYXRlZFwiKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBqUXVlcnkuRGVmZXJyZWQoZnVuY3Rpb24gKG5ld0RlZmVyKSB7XHJcbiAgICAgICAgICAgICAgICBqUXVlcnkuZWFjaCh0dXBsZXMsIGZ1bmN0aW9uIChpLCB0dXBsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBmbiA9IGpRdWVyeS5pc0Z1bmN0aW9uKGZuc1tpXSkgJiYgZm5zW2ldO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBEZWZlcnJlZC5kb25lKGZ1bmN0aW9uKCkgeyBiaW5kIHRvIG5ld0RlZmVyIG9yIG5ld0RlZmVyLnJlc29sdmUgfSlcclxuICAgICAgICAgICAgICAgICAgICAvLyBkZWZlcnJlZC5mYWlsKGZ1bmN0aW9uKCkgeyBiaW5kIHRvIG5ld0RlZmVyIG9yIG5ld0RlZmVyLnJlamVjdCB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGRlZmVycmVkLnByb2dyZXNzKGZ1bmN0aW9uKCkgeyBiaW5kIHRvIG5ld0RlZmVyIG9yIG5ld0RlZmVyLm5vdGlmeSB9KVxyXG4gICAgICAgICAgICAgICAgICAgIGRlZmVycmVkW3R1cGxlWzFdXShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXR1cm5lZCA9IGZuICYmIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXR1cm5lZCAmJiBqUXVlcnkuaXNGdW5jdGlvbihyZXR1cm5lZC5wcm9taXNlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuZWQucHJvbWlzZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmRvbmUobmV3RGVmZXIucmVzb2x2ZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuZmFpbChuZXdEZWZlci5yZWplY3QpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnByb2dyZXNzKG5ld0RlZmVyLm5vdGlmeSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdEZWZlclt0dXBsZVswXSArIFwiV2l0aFwiXShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzID09PSBwcm9taXNlID8gbmV3RGVmZXIucHJvbWlzZSgpIDogdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmbiA/IFtyZXR1cm5lZF0gOiBhcmd1bWVudHNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgZm5zID0gbnVsbDtcclxuICAgICAgICAgICAgfSkucHJvbWlzZSgpO1xyXG5cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBpZiAoZnVuYykge1xyXG4gICAgICAgICAgICBmdW5jLmNhbGwoZGVmZXJyZWQsIGRlZmVycmVkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBkZWZlcnJlZDtcclxuICAgIH07XHJcblxyXG5cclxuICAgIHJldHVybiBqUXVlcnk7XHJcbn0pO1xyXG5cbn0uY2FsbCh3aW5kb3cpKTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL2V4dGVybmFsL2pxdWVyeS9zY3JpcHRzL2pxdWVyeS1taWdyYXRlLmpzXG4vLyBtb2R1bGUgaWQgPSA0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIi8qKlxyXG4gKiBAZmlsZSAgVXRpbHMuXHJcbiAqIEBicmllZiBUb29scyDlsILnlKjjga7jg6bjg7zjg4bjgqPjg6rjg4bjgqNcclxuICovXHJcbm5hbWVzcGFjZSBDRFAuVG9vbHMge1xyXG4gICAgLy8gY2RwLnRvb2xzIOOBryBjZHAuY29yZSDjgavkvp3lrZjjgZfjgarjgYTjgZ/jgoHjgIHni6zoh6rjgatnbG9iYWwg44KS5o+Q5L6b44GZ44KLXHJcbiAgICBleHBvcnQgY29uc3QgZ2xvYmFsID0gKDxhbnk+Q0RQKS5nbG9iYWwgfHwgRnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpO1xyXG59XHJcbiIsIm5hbWVzcGFjZSBDRFAuVG9vbHMge1xyXG5cclxuICAgIGNvbnN0IFRBRyA9IFwiW0NEUC5Ub29scy5CbG9iXSBcIjtcclxuXHJcbiAgICBleHBvcnQgbW9kdWxlIEJsb2Ige1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBHZXQgQmxvYkJ1aWxkZXJcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge2FueX0gQmxvYkJ1aWxkZXJcclxuICAgICAgICAgKi9cclxuICAgICAgICBmdW5jdGlvbiBnZXRCbG9iQnVpbGRlcigpOiBhbnkge1xyXG4gICAgICAgICAgICByZXR1cm4gZ2xvYmFsLkJsb2JCdWlsZGVyIHx8IGdsb2JhbC5XZWJLaXRCbG9iQnVpbGRlciB8fCBnbG9iYWwuTW96QmxvYkJ1aWxkZXIgfHwgZ2xvYmFsLk1TQmxvYkJ1aWxkZXI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBcnJheUJ1ZmZlciB0byBCbG9iXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gYnVmIHtBcnJheUJ1ZmZlcn0gW2luXSBBcnJheUJ1ZmZlciBkYXRhXHJcbiAgICAgICAgICogQHBhcmFtIG1pbWVUeXBlIHtzdHJpbmd9IFtpbl0gTWltZVR5cGUgb2YgZGF0YVxyXG4gICAgICAgICAqIEByZXR1cm4ge0Jsb2J9IEJsb2IgZGF0YVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGV4cG9ydCBmdW5jdGlvbiBhcnJheUJ1ZmZlclRvQmxvYihidWY6IEFycmF5QnVmZmVyLCBtaW1lVHlwZTogc3RyaW5nKTogQmxvYiB7XHJcbiAgICAgICAgICAgIGxldCBibG9iOiBCbG9iID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGJsb2JCdWlsZGVyT2JqZWN0OiBhbnkgPSBnZXRCbG9iQnVpbGRlcigpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGJsb2JCdWlsZGVyT2JqZWN0ICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGJsb2JCdWlsZGVyOiBhbnkgPSBuZXcgYmxvYkJ1aWxkZXJPYmplY3QoKTtcclxuICAgICAgICAgICAgICAgIGJsb2JCdWlsZGVyLmFwcGVuZChidWYpO1xyXG4gICAgICAgICAgICAgICAgYmxvYiA9IGJsb2JCdWlsZGVyLmdldEJsb2IobWltZVR5cGUpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gQW5kcm9pZCA0LjQgS2l0S2F0IENocm9taXVtIFdlYlZpZXdcclxuICAgICAgICAgICAgICAgIGJsb2IgPSBuZXcgZ2xvYmFsLkJsb2IoW2J1Zl0sIHsgdHlwZTogbWltZVR5cGUgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGJsb2I7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBCYXNlNjQgc3RyaW5nIHRvIEJsb2JcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBiYXNlNjQge3N0cmluZ30gW2luXSBCYXNlNjQgc3RyaW5nIGRhdGFcclxuICAgICAgICAgKiBAcGFyYW0gbWltZVR5cGUge3N0cmluZ30gW2luXSBNaW1lVHlwZSBvZiBkYXRhXHJcbiAgICAgICAgICogQHJldHVybiB7QmxvYn0gQmxvYiBkYXRhXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZXhwb3J0IGZ1bmN0aW9uIGJhc2U2NFRvQmxvYihiYXNlNjQ6IHN0cmluZywgbWltZVR5cGU6IHN0cmluZyk6IEJsb2Ige1xyXG4gICAgICAgICAgICBsZXQgYmxvYjogQmxvYiA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBibG9iQnVpbGRlck9iamVjdDogYW55ID0gZ2V0QmxvYkJ1aWxkZXIoKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChibG9iQnVpbGRlck9iamVjdCAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBibG9iQnVpbGRlcjogYW55ID0gbmV3IGJsb2JCdWlsZGVyT2JqZWN0KCk7XHJcbiAgICAgICAgICAgICAgICBibG9iQnVpbGRlci5hcHBlbmQoYmFzZTY0VG9BcnJheUJ1ZmZlcihiYXNlNjQpKTtcclxuICAgICAgICAgICAgICAgIGJsb2IgPSBibG9iQnVpbGRlci5nZXRCbG9iKG1pbWVUeXBlKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIEFuZHJvaWQgNC40IEtpdEthdCBDaHJvbWl1bSBXZWJWaWV3XHJcbiAgICAgICAgICAgICAgICBibG9iID0gbmV3IGdsb2JhbC5CbG9iKFtiYXNlNjRUb0FycmF5QnVmZmVyKGJhc2U2NCldLCB7IHR5cGU6IG1pbWVUeXBlIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBibG9iO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQmFzZTY0IHN0cmluZyB0byBBcnJheUJ1ZmZlclxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGJhc2U2NCB7c3RyaW5nfSBbaW5dIEJhc2U2NCBzdHJpbmcgZGF0YVxyXG4gICAgICAgICAqIEByZXR1cm4ge0FycmF5QnVmZmVyfSBBcnJheUJ1ZmZlciBkYXRhXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZXhwb3J0IGZ1bmN0aW9uIGJhc2U2NFRvQXJyYXlCdWZmZXIoYmFzZTY0OiBzdHJpbmcpOiBBcnJheUJ1ZmZlciB7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ5dGVzID0gd2luZG93LmF0b2IoYmFzZTY0KTtcclxuICAgICAgICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIoYnl0ZXMubGVuZ3RoKTtcclxuICAgICAgICAgICAgY29uc3QgZGF0YSA9IG5ldyBVaW50OEFycmF5KGFycmF5QnVmZmVyKTtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSBieXRlcy5sZW5ndGg7IGkgPCBsZW47ICsraSkge1xyXG4gICAgICAgICAgICAgICAgZGF0YVtpXSA9IGJ5dGVzLmNoYXJDb2RlQXQoaSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGFycmF5QnVmZmVyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQmFzZTY0IHN0cmluZyB0byBVaW50OEFycmF5XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gYmFzZTY0IHtzdHJpbmd9IFtpbl0gQmFzZTY0IHN0cmluZyBkYXRhXHJcbiAgICAgICAgICogQHJldHVybiB7VWludDhBcnJheX0gVWludDhBcnJheSBkYXRhXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZXhwb3J0IGZ1bmN0aW9uIGJhc2U2NFRvVWludDhBcnJheShlbmNvZGVkOiBzdHJpbmcpOiBVaW50OEFycmF5IHtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZXMgPSB3aW5kb3cuYXRvYihlbmNvZGVkKTtcclxuICAgICAgICAgICAgY29uc3QgZGF0YSA9IG5ldyBVaW50OEFycmF5KGJ5dGVzLmxlbmd0aCk7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMCwgbGVuID0gYnl0ZXMubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHtcclxuICAgICAgICAgICAgICAgIGRhdGFbaV0gPSBieXRlcy5jaGFyQ29kZUF0KGkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQXJyYXlCdWZmZXIgdG8gYmFzZTY0IHN0cmluZ1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGFycmF5QnVmZmVyIHtBcnJheUJ1ZmZlcn0gW2luXSBBcnJheUJ1ZmZlciBkYXRhXHJcbiAgICAgICAgICogQHJldHVybiB7c3RyaW5nfSBiYXNlNjQgZGF0YVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGV4cG9ydCBmdW5jdGlvbiBhcnJheUJ1ZmZlclRvQmFzZTY0KGFycmF5QnVmZmVyOiBBcnJheUJ1ZmZlcik6IHN0cmluZyB7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXlCdWZmZXIpO1xyXG4gICAgICAgICAgICByZXR1cm4gdWludDhBcnJheVRvQmFzZTY0KGJ5dGVzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFVpbnQ4QXJyYXkgdG8gYmFzZTY0IHN0cmluZ1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGJ5dGVzIHtVaW50OEFycmF5fSBbaW5dIFVpbnQ4QXJyYXkgZGF0YVxyXG4gICAgICAgICAqIEByZXR1cm4ge3N0cmluZ30gYmFzZTY0IGRhdGFcclxuICAgICAgICAgKi9cclxuICAgICAgICBleHBvcnQgZnVuY3Rpb24gdWludDhBcnJheVRvQmFzZTY0KGJ5dGVzOiBVaW50OEFycmF5KTogc3RyaW5nIHtcclxuICAgICAgICAgICAgbGV0IGRhdGE6IHN0cmluZyA9IFwiXCI7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMCwgbGVuID0gYnl0ZXMuYnl0ZUxlbmd0aDsgaSA8IGxlbjsgKytpKSB7XHJcbiAgICAgICAgICAgICAgICBkYXRhICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnl0ZXNbaV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB3aW5kb3cuYnRvYShkYXRhKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFVSTCBPYmplY3RcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge2FueX0gVVJMIE9iamVjdFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGV4cG9ydCBjb25zdCBVUkwgPSAoKCkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gZ2xvYmFsLlVSTCB8fCBnbG9iYWwud2Via2l0VVJMO1xyXG4gICAgICAgIH0pKCk7XHJcbiAgICB9XHJcbn1cclxuIiwiLyoqXHJcbiAqIEBmaWxlICBCaW5hcnlUcmFuc3BvcnQudHNcclxuICogQGJyaWVmIGpRdWVyeSBhamF4IHRyYW5zcG9ydCBmb3IgbWFraW5nIGJpbmFyeSBkYXRhIHR5cGUgcmVxdWVzdHMuXHJcbiAqXHJcbiAqICAgICAgICBvcmlnaW5hbDogaHR0cHM6Ly9naXRodWIuY29tL2hlbnJ5YS9qcy1qcXVlcnkvYmxvYi9tYXN0ZXIvQmluYXJ5VHJhbnNwb3J0L2pxdWVyeS5iaW5hcnl0cmFuc3BvcnQuanNcclxuICogICAgICAgIGF1dGhvcjogICBIZW5yeSBBbGd1cyA8aGVucnlhbGd1c0BnbWFpbC5jb20+XHJcbiAqL1xyXG5uYW1lc3BhY2UgQ0RQLlRvb2xzIHtcclxuICAgIC8vIFN1cHBvcnQgZmlsZSBwcm90b2NvbC4gKGFzIHNhbWUgYXMgb2ZmaWNpYWwgd2F5KVxyXG4gICAgY29uc3QgeGhyU3VjY2Vzc1N0YXR1cyA9IHtcclxuICAgICAgICAwOiAyMDAsXHJcbiAgICAgICAgMTIyMzogMjA0XHJcbiAgICB9O1xyXG5cclxuICAgICQuYWpheFRyYW5zcG9ydChcIitiaW5hcnlcIiwgKG9wdGlvbnM6IEpRdWVyeS5BamF4U2V0dGluZ3MsIG9yaWdpbmFsT3B0aW9uczogSlF1ZXJ5LkFqYXhTZXR0aW5ncywganFYSFI6IEpRdWVyeVhIUikgPT4ge1xyXG4gICAgICAgIGlmIChnbG9iYWwuRm9ybURhdGEgJiZcclxuICAgICAgICAgICAgKChvcHRpb25zLmRhdGFUeXBlICYmIChvcHRpb25zLmRhdGFUeXBlID09PSBcImJpbmFyeVwiKSkgfHxcclxuICAgICAgICAgICAgKG9wdGlvbnMuZGF0YSAmJiAoKGdsb2JhbC5BcnJheUJ1ZmZlciAmJiBvcHRpb25zLmRhdGEgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikgfHxcclxuICAgICAgICAgICAgKGdsb2JhbC5CbG9iICYmIG9wdGlvbnMuZGF0YSBpbnN0YW5jZW9mIGdsb2JhbC5CbG9iKSkpKSkge1xyXG4gICAgICAgICAgICBsZXQgYWJvcnRDYWxsYmFjazogKCkgPT4gdm9pZDtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHNlbmQ6IGZ1bmN0aW9uIChoZWFkZXJzOiBKUXVlcnkuUGxhaW5PYmplY3QsIGNhbGxiYWNrOiBKUXVlcnkuVHJhbnNwb3J0LlN1Y2Nlc3NDYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHNldHVwIGFsbCB2YXJpYWJsZXNcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB1cmwgPSBvcHRpb25zLnVybDtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB0eXBlID0gb3B0aW9ucy50eXBlO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFzeW5jID0gb3B0aW9ucy5hc3luYyB8fCB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBibG9iIG9yIGFycmF5YnVmZmVyLiBEZWZhdWx0IGlzIGJsb2JcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRhVHlwZSA9ICg8YW55Pm9wdGlvbnMpLnJlc3BvbnNlVHlwZSB8fCBcImJsb2JcIjtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gb3B0aW9ucy5kYXRhIHx8IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdXNlcm5hbWUgPSBvcHRpb25zLnVzZXJuYW1lIHx8IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFzc3dvcmQgPSBvcHRpb25zLnBhc3N3b3JkIHx8IG51bGw7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IF9jYWxsYmFjazogSlF1ZXJ5LlRyYW5zcG9ydC5TdWNjZXNzQ2FsbGJhY2sgPSBjYWxsYmFjayB8fCAoKCkgPT4geyAvKiBub29wICovIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBzdWNjZWVkZWQgaGFuZGxlclxyXG4gICAgICAgICAgICAgICAgICAgIHhoci5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IF9kYXRhID0ge307XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9kYXRhW29wdGlvbnMuZGF0YVR5cGVdID0geGhyLnJlc3BvbnNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfY2FsbGJhY2soXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4aHJTdWNjZXNzU3RhdHVzW3hoci5zdGF0dXNdIHx8IHhoci5zdGF0dXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SlF1ZXJ5LkFqYXguVGV4dFN0YXR1cz54aHIuc3RhdHVzVGV4dCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9kYXRhLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGVycm9yIGhhbmRsZXJcclxuICAgICAgICAgICAgICAgICAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgX2RhdGEgPSB7fTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2RhdGFbb3B0aW9ucy5kYXRhVHlwZV0gPSB4aHIucmVzcG9uc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG1ha2UgY2FsbGJhY2sgYW5kIHNlbmQgZGF0YVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfY2FsbGJhY2soXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4aHIuc3RhdHVzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPEpRdWVyeS5BamF4LlRleHRTdGF0dXM+eGhyLnN0YXR1c1RleHQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfZGF0YSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHhoci5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBhYm9ydCBoYW5kbGVyXHJcbiAgICAgICAgICAgICAgICAgICAgeGhyLmFkZEV2ZW50TGlzdGVuZXIoXCJhYm9ydFwiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IF9kYXRhID0ge307XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9kYXRhW29wdGlvbnMuZGF0YVR5cGVdID0geGhyLnJlc3BvbnNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBtYWtlIGNhbGxiYWNrIGFuZCBzZW5kIGRhdGFcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2NhbGxiYWNrKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeGhyLnN0YXR1cyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxKUXVlcnkuQWpheC5UZXh0U3RhdHVzPnhoci5zdGF0dXNUZXh0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2RhdGEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4aHIuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYWJvcnQgY2FsbGJhY2tcclxuICAgICAgICAgICAgICAgICAgICBhYm9ydENhbGxiYWNrID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB4aHIuYWJvcnQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB4aHIub3Blbih0eXBlLCB1cmwsIGFzeW5jLCB1c2VybmFtZSwgcGFzc3dvcmQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBzZXR1cCBjdXN0b20gaGVhZGVyc1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgaSBpbiBoZWFkZXJzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoZWFkZXJzLmhhc093blByb3BlcnR5KGkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihpLCBoZWFkZXJzW2ldKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgeGhyLnJlc3BvbnNlVHlwZSA9IGRhdGFUeXBlO1xyXG4gICAgICAgICAgICAgICAgICAgIHhoci5zZW5kKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGFib3J0OiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFib3J0Q2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWJvcnRDYWxsYmFjaygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG4iLCIvKiB0c2xpbnQ6ZGlzYWJsZTptYXgtbGluZS1sZW5ndGggKi9cclxuXHJcbm5hbWVzcGFjZSBDRFAuVG9vbHMge1xyXG5cclxuICAgIGNvbnN0IFRBRyA9IFwiW0NEUC5Ub29scy5EYXRlVGltZV0gXCI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAY2xhc3MgRGF0ZVRpbWVcclxuICAgICAqIEBicmllZiDmmYLliLvmk43kvZzjga7jg6bjg7zjg4bjgqPjg6rjg4bjgqPjgq/jg6njgrlcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGNsYXNzIERhdGVUaW1lIHtcclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBwdWJsaWMgc3RhdGljIG1ldGhvZFxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDln7rngrnjgajjgarjgovml6Xku5jjgYvjgonjgIFu5pel5b6M44CBbuaXpeWJjeOCkueul+WHulxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGJhc2UgICAge0RhdGV9ICAgW2luXSDln7rmupbml6VcclxuICAgICAgICAgKiBAcGFyYW0gYWRkRGF5cyB7TnVtYmVyfSBbaW5dIOWKoOeul+aXpS4g44Oe44Kk44OK44K55oyH5a6a44GnbuaXpeWJjeOCguioreWumuWPr+iDvVxyXG4gICAgICAgICAqIEByZXR1cm4ge0RhdGV9IOaXpeS7mOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgY29tcHV0ZURhdGUoYmFzZTogRGF0ZSwgYWRkRGF5czogbnVtYmVyKTogRGF0ZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGR0ID0gbmV3IERhdGUoYmFzZS5nZXRUaW1lKCkpO1xyXG4gICAgICAgICAgICBjb25zdCBiYXNlU2VjID0gZHQuZ2V0VGltZSgpO1xyXG4gICAgICAgICAgICBjb25zdCBhZGRTZWMgPSBhZGREYXlzICogODY0MDAwMDA7ICAgIC8v5pel5pWwICogMeaXpeOBruODn+ODquenkuaVsFxyXG4gICAgICAgICAgICBjb25zdCB0YXJnZXRTZWMgPSBiYXNlU2VjICsgYWRkU2VjO1xyXG4gICAgICAgICAgICBkdC5zZXRUaW1lKHRhcmdldFNlYyk7XHJcbiAgICAgICAgICAgIHJldHVybiBkdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENvbnZlcnQgc3RyaW5nIHRvIGRhdGUgb2JqZWN0XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gZGF0ZSBzdHJpbmcgZXgpIFlZWVktTU0tRERUSEg6bW06U1MuU1NTXHJcbiAgICAgICAgICogQHJldHVybiB7T2JqZWN0fSBkYXRlIG9iamVjdFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgY29udmVydElTT1N0cmluZ1RvRGF0ZShkYXRlU3RyaW5nOiBzdHJpbmcpOiBEYXRlIHtcclxuICAgICAgICAgICAgY29uc3QgZGF0ZVRpbWUgPSBkYXRlU3RyaW5nLnNwbGl0KFwiVFwiKSxcclxuICAgICAgICAgICAgICAgIGRhdGVBcnJheSA9IGRhdGVUaW1lWzBdLnNwbGl0KFwiLVwiKTtcclxuICAgICAgICAgICAgbGV0IHRpbWVBcnJheSwgc2VjQXJyYXksIGRhdGVPYmplY3Q7XHJcblxyXG4gICAgICAgICAgICBpZiAoZGF0ZVRpbWVbMV0pIHtcclxuICAgICAgICAgICAgICAgIHRpbWVBcnJheSA9IGRhdGVUaW1lWzFdLnNwbGl0KFwiOlwiKTtcclxuICAgICAgICAgICAgICAgIHNlY0FycmF5ID0gdGltZUFycmF5WzJdLnNwbGl0KFwiLlwiKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHRpbWVBcnJheSkge1xyXG4gICAgICAgICAgICAgICAgZGF0ZU9iamVjdCA9IG5ldyBEYXRlKDxhbnk+ZGF0ZUFycmF5WzBdLCA8YW55PmRhdGVBcnJheVsxXSAtIDEsIDxhbnk+ZGF0ZUFycmF5WzJdLFxyXG4gICAgICAgICAgICAgICAgICAgIDxhbnk+dGltZUFycmF5WzBdLCA8YW55PnRpbWVBcnJheVsxXSwgPGFueT5zZWNBcnJheVswXSwgPGFueT5zZWNBcnJheVsxXSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0ZUFycmF5WzJdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZU9iamVjdCA9IG5ldyBEYXRlKDxhbnk+ZGF0ZUFycmF5WzBdLCA8YW55PmRhdGVBcnJheVsxXSAtIDEsIDxhbnk+ZGF0ZUFycmF5WzJdKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZGF0ZUFycmF5WzFdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0ZU9iamVjdCA9IG5ldyBEYXRlKDxhbnk+ZGF0ZUFycmF5WzBdLCA8YW55PmRhdGVBcnJheVsxXSAtIDEpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRlT2JqZWN0ID0gbmV3IERhdGUoPGFueT5kYXRlQXJyYXlbMF0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZGF0ZU9iamVjdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqICBDb252ZXJ0IGEgZGF0ZSBvYmplY3QgaW50byBhIHN0cmluZyBpbiBQTU9BUEkgcmVjb3JkZWRfZGF0ZSBmb3JtYXQodGhlIElTTyA4NjAxIEV4dGVuZGVkIEZvcm1hdClcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBkYXRlICAge0RhdGV9ICAgW2luXSBkYXRlIG9iamVjdFxyXG4gICAgICAgICAqIEBwYXJhbSB0YXJnZXQge1N0cmluZ30gW2luXSB7eWVhciB8IG1vbnRoIHwgZGF0ZSB8IGhvdXIgfCBtaW4gfCBzZWMgfCBtc2VjIH1cclxuICAgICAgICAgKiBAcmV0dXJuIHtTdHJpbmd9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBjb252ZXJ0RGF0ZVRvSVNPU3RyaW5nKGRhdGU6IERhdGUsIHRhcmdldDogc3RyaW5nID0gXCJtc2VjXCIpOiBzdHJpbmcge1xyXG4gICAgICAgICAgICBsZXQgaXNvRGF0ZVN0cmluZztcclxuXHJcbiAgICAgICAgICAgIHN3aXRjaCAodGFyZ2V0KSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwieWVhclwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSBcIm1vbnRoXCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiZGF0ZVwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSBcImhvdXJcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJtaW5cIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJzZWNcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJtc2VjXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihUQUcgKyBcInVua25vd24gdGFyZ2V0OiBcIiArIHRhcmdldCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0ID0gXCJtc2VjXCI7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlzb0RhdGVTdHJpbmcgPSBkYXRlLmdldEZ1bGxZZWFyKCk7XHJcbiAgICAgICAgICAgIGlmIChcInllYXJcIiA9PT0gdGFyZ2V0KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaXNvRGF0ZVN0cmluZztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaXNvRGF0ZVN0cmluZyArPSAoXCItXCIgKyBEYXRlVGltZS5udW1iZXJUb0RvdWJsZURpZ2l0c1N0cmluZyhkYXRlLmdldE1vbnRoKCkgKyAxKSk7XHJcbiAgICAgICAgICAgIGlmIChcIm1vbnRoXCIgPT09IHRhcmdldCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGlzb0RhdGVTdHJpbmc7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlzb0RhdGVTdHJpbmcgKz0gKFwiLVwiICsgRGF0ZVRpbWUubnVtYmVyVG9Eb3VibGVEaWdpdHNTdHJpbmcoZGF0ZS5nZXREYXRlKCkpKTtcclxuICAgICAgICAgICAgaWYgKFwiZGF0ZVwiID09PSB0YXJnZXQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBpc29EYXRlU3RyaW5nO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpc29EYXRlU3RyaW5nICs9IChcIlRcIiArIERhdGVUaW1lLm51bWJlclRvRG91YmxlRGlnaXRzU3RyaW5nKGRhdGUuZ2V0SG91cnMoKSkpO1xyXG4gICAgICAgICAgICBpZiAoXCJob3VyXCIgPT09IHRhcmdldCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGlzb0RhdGVTdHJpbmc7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlzb0RhdGVTdHJpbmcgKz0gKFwiOlwiICsgRGF0ZVRpbWUubnVtYmVyVG9Eb3VibGVEaWdpdHNTdHJpbmcoZGF0ZS5nZXRNaW51dGVzKCkpKTtcclxuICAgICAgICAgICAgaWYgKFwibWluXCIgPT09IHRhcmdldCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGlzb0RhdGVTdHJpbmc7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlzb0RhdGVTdHJpbmcgKz0gKFwiOlwiICsgRGF0ZVRpbWUubnVtYmVyVG9Eb3VibGVEaWdpdHNTdHJpbmcoZGF0ZS5nZXRTZWNvbmRzKCkpKTtcclxuICAgICAgICAgICAgaWYgKFwic2VjXCIgPT09IHRhcmdldCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGlzb0RhdGVTdHJpbmc7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlzb0RhdGVTdHJpbmcgKz0gKFwiLlwiICsgU3RyaW5nKChkYXRlLmdldE1pbGxpc2Vjb25kcygpIC8gMTAwMCkudG9GaXhlZCgzKSkuc2xpY2UoMiwgNSkpO1xyXG4gICAgICAgICAgICByZXR1cm4gaXNvRGF0ZVN0cmluZztcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDb252ZXJ0IGZpbGUgc3lzdGVtIGNvbXBhdGlibGUgc3RyaW5nIHRvIGRhdGUgb2JqZWN0XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gZGF0ZSBzdHJpbmcgZXgpIHl5eXlfTU1fZGRUSEhfbW1fc3NfU1NTXHJcbiAgICAgICAgICogQHJldHVybiB7T2JqZWN0fSBkYXRlIG9iamVjdFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgY29udmVydEZpbGVTeXN0ZW1TdHJpbmdUb0RhdGUoZGF0ZVN0cmluZzogc3RyaW5nKTogRGF0ZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGVUaW1lID0gZGF0ZVN0cmluZy5zcGxpdChcIlRcIiksXHJcbiAgICAgICAgICAgICAgICBkYXRlQXJyYXkgPSBkYXRlVGltZVswXS5zcGxpdChcIl9cIik7XHJcbiAgICAgICAgICAgIGxldCB0aW1lQXJyYXksIGRhdGVPYmplY3Q7XHJcblxyXG4gICAgICAgICAgICBpZiAoZGF0ZVRpbWVbMV0pIHtcclxuICAgICAgICAgICAgICAgIHRpbWVBcnJheSA9IGRhdGVUaW1lWzFdLnNwbGl0KFwiX1wiKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHRpbWVBcnJheSkge1xyXG4gICAgICAgICAgICAgICAgZGF0ZU9iamVjdCA9IG5ldyBEYXRlKDxhbnk+ZGF0ZUFycmF5WzBdLCA8YW55PmRhdGVBcnJheVsxXSAtIDEsIDxhbnk+ZGF0ZUFycmF5WzJdLFxyXG4gICAgICAgICAgICAgICAgICAgIDxhbnk+dGltZUFycmF5WzBdLCA8YW55PnRpbWVBcnJheVsxXSwgPGFueT50aW1lQXJyYXlbMl0sIDxhbnk+dGltZUFycmF5WzNdKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChkYXRlQXJyYXlbMl0pIHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRlT2JqZWN0ID0gbmV3IERhdGUoPGFueT5kYXRlQXJyYXlbMF0sIDxhbnk+ZGF0ZUFycmF5WzFdIC0gMSwgPGFueT5kYXRlQXJyYXlbMl0pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkYXRlQXJyYXlbMV0pIHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRlT2JqZWN0ID0gbmV3IERhdGUoPGFueT5kYXRlQXJyYXlbMF0sIDxhbnk+ZGF0ZUFycmF5WzFdIC0gMSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGVPYmplY3QgPSBuZXcgRGF0ZSg8YW55PmRhdGVBcnJheVswXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBkYXRlT2JqZWN0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogIENvbnZlcnQgYSBkYXRlIG9iamVjdCBpbnRvIGEgc3RyaW5nIGluIGZpbGUgc3lzdGVtIGNvbXBhdGlibGUgZm9ybWF0KHl5eXlfTU1fZGRUSEhfbW1fc3NfU1NTKVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGRhdGUgICB7RGF0ZX0gICBbaW5dIGRhdGUgb2JqZWN0XHJcbiAgICAgICAgICogQHBhcmFtIHRhcmdldCB7U3RyaW5nfSBbaW5dIHt5ZWFyIHwgbW9udGggfCBkYXRlIHwgaG91ciB8IG1pbiB8IHNlYyB8IG1zZWMgfVxyXG4gICAgICAgICAqIEByZXR1cm4ge1N0cmluZ31cclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGNvbnZlcnREYXRlVG9GaWxlU3lzdGVtU3RyaW5nKGRhdGU6IERhdGUsIHRhcmdldDogc3RyaW5nID0gXCJtc2VjXCIpOiBzdHJpbmcge1xyXG4gICAgICAgICAgICBsZXQgZmlsZVN5c3RlbVN0cmluZztcclxuXHJcbiAgICAgICAgICAgIHN3aXRjaCAodGFyZ2V0KSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwieWVhclwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSBcIm1vbnRoXCI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiZGF0ZVwiOlxyXG4gICAgICAgICAgICAgICAgY2FzZSBcImhvdXJcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJtaW5cIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJzZWNcIjpcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJtc2VjXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihUQUcgKyBcInVua25vd24gdGFyZ2V0OiBcIiArIHRhcmdldCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0ID0gXCJtc2VjXCI7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZpbGVTeXN0ZW1TdHJpbmcgPSBkYXRlLmdldEZ1bGxZZWFyKCk7XHJcbiAgICAgICAgICAgIGlmIChcInllYXJcIiA9PT0gdGFyZ2V0KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmlsZVN5c3RlbVN0cmluZztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZmlsZVN5c3RlbVN0cmluZyArPSAoXCJfXCIgKyBEYXRlVGltZS5udW1iZXJUb0RvdWJsZURpZ2l0c1N0cmluZyhkYXRlLmdldE1vbnRoKCkgKyAxKSk7XHJcbiAgICAgICAgICAgIGlmIChcIm1vbnRoXCIgPT09IHRhcmdldCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZpbGVTeXN0ZW1TdHJpbmc7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZpbGVTeXN0ZW1TdHJpbmcgKz0gKFwiX1wiICsgRGF0ZVRpbWUubnVtYmVyVG9Eb3VibGVEaWdpdHNTdHJpbmcoZGF0ZS5nZXREYXRlKCkpKTtcclxuICAgICAgICAgICAgaWYgKFwiZGF0ZVwiID09PSB0YXJnZXQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmaWxlU3lzdGVtU3RyaW5nO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmaWxlU3lzdGVtU3RyaW5nICs9IChcIlRcIiArIERhdGVUaW1lLm51bWJlclRvRG91YmxlRGlnaXRzU3RyaW5nKGRhdGUuZ2V0SG91cnMoKSkpO1xyXG4gICAgICAgICAgICBpZiAoXCJob3VyXCIgPT09IHRhcmdldCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZpbGVTeXN0ZW1TdHJpbmc7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZpbGVTeXN0ZW1TdHJpbmcgKz0gKFwiX1wiICsgRGF0ZVRpbWUubnVtYmVyVG9Eb3VibGVEaWdpdHNTdHJpbmcoZGF0ZS5nZXRNaW51dGVzKCkpKTtcclxuICAgICAgICAgICAgaWYgKFwibWluXCIgPT09IHRhcmdldCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZpbGVTeXN0ZW1TdHJpbmc7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZpbGVTeXN0ZW1TdHJpbmcgKz0gKFwiX1wiICsgRGF0ZVRpbWUubnVtYmVyVG9Eb3VibGVEaWdpdHNTdHJpbmcoZGF0ZS5nZXRTZWNvbmRzKCkpKTtcclxuICAgICAgICAgICAgaWYgKFwic2VjXCIgPT09IHRhcmdldCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZpbGVTeXN0ZW1TdHJpbmc7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZpbGVTeXN0ZW1TdHJpbmcgKz0gKFwiX1wiICsgU3RyaW5nKChkYXRlLmdldE1pbGxpc2Vjb25kcygpIC8gMTAwMCkudG9GaXhlZCgzKSkuc2xpY2UoMiwgNSkpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmlsZVN5c3RlbVN0cmluZztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gcHJpdmF0ZSBzdGF0aWMgbWV0aG9kXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENvbnZlcnQgbnVtIHRvIHN0cmluZyhkb3VibGUgZGlnaXRzKVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtICB7TnVtYmVyfSBudW1iZXIgKDAgPG51bWJlciA8IDEwMClcclxuICAgICAgICAgKiBAcmV0dXJuIHtTdHJpbmd9IGRvdWJsZSBkaWdpdHMgc3RyaW5nXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgbnVtYmVyVG9Eb3VibGVEaWdpdHNTdHJpbmcobnVtOiBudW1iZXIpOiBzdHJpbmcge1xyXG4gICAgICAgICAgICBpZiAobnVtIDwgMCB8fCBudW0gPiAxMDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChudW0gPCAxMCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiMFwiICsgbnVtO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBcIlwiICsgbnVtO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvLy8gPHJlZmVyZW5jZSB0eXBlcz1cImpxdWVyeVwiIC8+XHJcblxyXG5uYW1lc3BhY2UgQ0RQLlRvb2xzIHtcclxuXHJcbiAgICBjb25zdCBUQUcgPSBcIltDRFAuVG9vbHMuRnVuY3Rpb25zXSBcIjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIE1hdGguYWJzIOOCiOOCiuOCgumrmOmAn+OBqiBhYnNcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGFicyh4OiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB4ID49IDAgPyB4IDogLXg7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBNYXRoLm1heCDjgojjgorjgoLpq5jpgJ/jgaogbWF4XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBtYXgobGhzOiBudW1iZXIsIHJoczogbnVtYmVyKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gbGhzID49IHJocyA/IGxocyA6IHJocztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIE1hdGgubWluIOOCiOOCiuOCgumrmOmAn+OBqiBtaW5cclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIG1pbihsaHM6IG51bWJlciwgcmhzOiBudW1iZXIpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiBsaHMgPD0gcmhzID8gbGhzIDogcmhzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5pWw5YCk44KSIDAg6Kmw44KB44GX44Gm5paH5a2X5YiX44KS55Sf5oiQXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBmdW5jdGlvbiB0b1plcm9QYWRkaW5nKG5vOiBudW1iZXIsIGxpbWl0OiBudW1iZXIpOiBzdHJpbmcge1xyXG4gICAgICAgIGxldCBzaWduZWQgPSBcIlwiO1xyXG4gICAgICAgIG5vID0gTnVtYmVyKG5vKTtcclxuXHJcbiAgICAgICAgaWYgKGlzTmFOKG5vKSB8fCBpc05hTihsaW1pdCkgfHwgbGltaXQgPD0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChubyA8IDApIHtcclxuICAgICAgICAgICAgbm8gPSBUb29scy5hYnMobm8pO1xyXG4gICAgICAgICAgICBzaWduZWQgPSBcIi1cIjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBzaWduZWQgKyAoQXJyYXkobGltaXQpLmpvaW4oXCIwXCIpICsgbm8pLnNsaWNlKC1saW1pdCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDlpJrph43ntpnmib/jga7jgZ/jgoHjga7lrp/ooYzmmYLntpnmib/plqLmlbBcclxuICAgICAqXHJcbiAgICAgKiBTdWIgQ2xhc3Mg5YCZ6KOc44Kq44OW44K444Kn44Kv44OI44Gr5a++44GX44GmIFN1cGVyIENsYXNzIOWAmeijnOOCquODluOCuOOCp+OCr+ODiOOCkuebtOWJjeOBriBTdXBlciBDbGFzcyDjgajjgZfjgabmjL/lhaXjgZnjgovjgIJcclxuICAgICAqIHByb3RvdHlwZSDjga7jgb/jgrPjg5Tjg7zjgZnjgovjgIJcclxuICAgICAqIOOCpOODs+OCueOCv+ODs+OCueODoeODs+ODkOOCkuOCs+ODlOODvOOBl+OBn+OBhOWgtOWQiOOAgVN1cGVyIENsYXNzIOOBjOeWkeS8vOOCs+ODs+OCueODiOODqeOCr+OCv+OCkuaPkOS+m+OBmeOCi+W/heimgeOBjOOBguOCi+OAglxyXG4gICAgICog6Kmz57Sw44GvIGNkcC50b29scy5GdW5jdGlvbnMuc3BlYy50cyDjgpLlj4LnhafjgIJcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gc3ViQ2xhc3MgICB7Y29uc3RydWN0b3J9IFtpbl0g44Kq44OW44K444Kn44Kv44OI44GuIGNvbnN0cnVjdG9yIOOCkuaMh+WumlxyXG4gICAgICogQHBhcmFtIHN1cGVyQ2xhc3Mge2NvbnN0cnVjdG9yfSBbaW5dIOOCquODluOCuOOCp+OCr+ODiOOBriBjb25zdHJ1Y3RvciDjgpLmjIflrppcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGluaGVyaXQoc3ViQ2xhc3M6IGFueSwgc3VwZXJDbGFzczogYW55KTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgX3Byb3RvdHlwZSA9IHN1YkNsYXNzLnByb3RvdHlwZTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gX2luaGVyaXQoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29uc3RydWN0b3IgPSBzdWJDbGFzcztcclxuICAgICAgICB9XHJcbiAgICAgICAgX2luaGVyaXQucHJvdG90eXBlID0gc3VwZXJDbGFzcy5wcm90b3R5cGU7XHJcbiAgICAgICAgc3ViQ2xhc3MucHJvdG90eXBlID0gbmV3IF9pbmhlcml0KCk7XHJcblxyXG4gICAgICAgICQuZXh0ZW5kKHN1YkNsYXNzLnByb3RvdHlwZSwgX3Byb3RvdHlwZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBtaXhpbiDplqLmlbBcclxuICAgICAqXHJcbiAgICAgKiBUeXBlU2NyaXB0IE9mZmljaWFsIFNpdGUg44Gr6LyJ44Gj44Gm44GE44KLIG1peGluIOmWouaVsFxyXG4gICAgICogaHR0cDovL3d3dy50eXBlc2NyaXB0bGFuZy5vcmcvSGFuZGJvb2sjbWl4aW5zXHJcbiAgICAgKiDml6LjgavlrprnvqnjgZXjgozjgabjgYTjgovjgqrjg5bjgrjjgqfjgq/jg4jjgYvjgonjgIHmlrDopo/jgavjgqrjg5bjgrjjgqfjgq/jg4jjgpLlkIjmiJDjgZnjgovjgIJcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gZGVyaXZlZCB7Y29uc3RydWN0b3J9ICAgIFtpbl0g5ZCI5oiQ44GV44KM44KL44Kq44OW44K444Kn44Kv44OI44GuIGNvbnN0cnVjdG9yIOOCkuaMh+WumlxyXG4gICAgICogQHBhcmFtIGJhc2VzICAge2NvbnN0cnVjdG9yLi4ufSBbaW5dIOWQiOaIkOWFg+OCquODluOCuOOCp+OCr+ODiOOBriBjb25zdHJ1Y3RvciDjgpLmjIflrpogKOWPr+WkieW8leaVsClcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIG1peGluKGRlcml2ZWQ6IGFueSwgLi4uYmFzZXM6IGFueVtdKTogdm9pZCB7XHJcbiAgICAgICAgYmFzZXMuZm9yRWFjaCgoYmFzZSkgPT4ge1xyXG4gICAgICAgICAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhiYXNlLnByb3RvdHlwZSkuZm9yRWFjaChuYW1lID0+IHtcclxuICAgICAgICAgICAgICAgIGRlcml2ZWQucHJvdG90eXBlW25hbWVdID0gYmFzZS5wcm90b3R5cGVbbmFtZV07XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICogSGVscGVyIGZ1bmN0aW9uIHRvIGNvcnJlY3RseSBzZXQgdXAgdGhlIHByb3RvdHlwZSBjaGFpbiwgZm9yIHN1YmNsYXNzZXMuXHJcbiAgICAgKiBUaGUgZnVuY3Rpb24gYmVoYXZpb3IgaXMgc2FtZSBhcyBleHRlbmQoKSBmdW5jdGlvbiBvZiBCYWNrYm9uZS5qcy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gcHJvdG9Qcm9wcyAge09iamVjdH0gW2luXSBzZXQgcHJvdG90eXBlIHByb3BlcnRpZXMgYXMgb2JqZWN0LlxyXG4gICAgICogQHBhcmFtIHN0YXRpY1Byb3BzIHtPYmplY3R9IFtpbl0gc2V0IHN0YXRpYyBwcm9wZXJ0aWVzIGFzIG9iamVjdC5cclxuICAgICAqIEByZXR1cm4ge09iamVjdH0gc3ViY2xhc3MgY29uc3RydWN0b3IuXHJcbiAgICAgKlxyXG4gICAgICogXFx+amFwYW5lc2VcclxuICAgICAqIOOCr+ODqeOCuee2meaJv+OBruOBn+OCgeOBruODmOODq+ODkeODvOmWouaVsFxyXG4gICAgICogQmFja2JvbmUuanMgZXh0ZW5kKCkg6Zai5pWw44Go5ZCM562JXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHByb3RvUHJvcHMgIHtPYmplY3R9IFtpbl0gcHJvdG90eXBlIHByb3BlcnRpZXMg44KS44Kq44OW44K444Kn44Kv44OI44Gn5oyH5a6aXHJcbiAgICAgKiBAcGFyYW0gc3RhdGljUHJvcHMge09iamVjdH0gW2luXSBzdGF0aWMgcHJvcGVydGllcyDjgpLjgqrjg5bjgrjjgqfjgq/jg4jjgafmjIflrppcclxuICAgICAqIEByZXR1cm4ge09iamVjdH0g44K144OW44Kv44Op44K544Gu44Kz44Oz44K544OI44Op44Kv44K/XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBleHRlbmQocHJvdG9Qcm9wczogT2JqZWN0LCBzdGF0aWNQcm9wcz86IE9iamVjdCk6IE9iamVjdCB7XHJcbiAgICAgICAgY29uc3QgcGFyZW50ID0gdGhpcztcclxuICAgICAgICBsZXQgY2hpbGQ7XHJcblxyXG4gICAgICAgIGlmIChwcm90b1Byb3BzICYmIHByb3RvUHJvcHMuaGFzT3duUHJvcGVydHkoXCJjb25zdHJ1Y3RvclwiKSkge1xyXG4gICAgICAgICAgICBjaGlsZCA9IHByb3RvUHJvcHMuY29uc3RydWN0b3I7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY2hpbGQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyZW50LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkLmV4dGVuZChjaGlsZCwgcGFyZW50LCBzdGF0aWNQcm9wcyk7XHJcblxyXG4gICAgICAgIGNvbnN0IFN1cnJvZ2F0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgU3Vycm9nYXRlLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7XHJcbiAgICAgICAgY2hpbGQucHJvdG90eXBlID0gbmV3IFN1cnJvZ2F0ZTtcclxuXHJcbiAgICAgICAgaWYgKHByb3RvUHJvcHMpIHtcclxuICAgICAgICAgICAgJC5leHRlbmQoY2hpbGQucHJvdG90eXBlLCBwcm90b1Byb3BzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7XHJcblxyXG4gICAgICAgIHJldHVybiBjaGlsZDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIERQSSDlj5blvpdcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGdldERldmljZVBpeGNlbFJhdGlvKCk6IG51bWJlciB7XHJcbiAgICAgICAgbGV0IG1lZGlhUXVlcnk7XHJcbiAgICAgICAgY29uc3QgaXNfZmlyZWZveCA9IG5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKS5pbmRleE9mKFwiZmlyZWZveFwiKSA+IC0xO1xyXG4gICAgICAgIGlmIChudWxsICE9IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvICYmICFpc19maXJlZm94KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbztcclxuICAgICAgICB9IGVsc2UgaWYgKHdpbmRvdy5tYXRjaE1lZGlhKSB7XHJcbiAgICAgICAgICAgIG1lZGlhUXVlcnkgPVxyXG4gICAgICAgICAgICAgICAgXCIoLXdlYmtpdC1taW4tZGV2aWNlLXBpeGVsLXJhdGlvOiAxLjUpLFxcXHJcbiAgICAgICAgICAgICAgICAgICAgKG1pbi0tbW96LWRldmljZS1waXhlbC1yYXRpbzogMS41KSxcXFxyXG4gICAgICAgICAgICAgICAgICAgICgtby1taW4tZGV2aWNlLXBpeGVsLXJhdGlvOiAzLzIpLFxcXHJcbiAgICAgICAgICAgICAgICAgICAgKG1pbi1yZXNvbHV0aW9uOiAxLjVkcHB4KVwiO1xyXG4gICAgICAgICAgICBpZiAod2luZG93Lm1hdGNoTWVkaWEobWVkaWFRdWVyeSkubWF0Y2hlcykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDEuNTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBtZWRpYVF1ZXJ5ID1cclxuICAgICAgICAgICAgICAgIFwiKC13ZWJraXQtbWluLWRldmljZS1waXhlbC1yYXRpbzogMiksXFxcclxuICAgICAgICAgICAgICAgICAgICAobWluLS1tb3otZGV2aWNlLXBpeGVsLXJhdGlvOiAyKSxcXFxyXG4gICAgICAgICAgICAgICAgICAgICgtby1taW4tZGV2aWNlLXBpeGVsLXJhdGlvOiAyLzEpLFxcXHJcbiAgICAgICAgICAgICAgICAgICAgKG1pbi1yZXNvbHV0aW9uOiAyZHBweClcIjtcclxuICAgICAgICAgICAgaWYgKHdpbmRvdy5tYXRjaE1lZGlhKG1lZGlhUXVlcnkpLm1hdGNoZXMpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG1lZGlhUXVlcnkgPVxyXG4gICAgICAgICAgICAgICAgXCIoLXdlYmtpdC1taW4tZGV2aWNlLXBpeGVsLXJhdGlvOiAwLjc1KSxcXFxyXG4gICAgICAgICAgICAgICAgICAgIChtaW4tLW1vei1kZXZpY2UtcGl4ZWwtcmF0aW86IDAuNzUpLFxcXHJcbiAgICAgICAgICAgICAgICAgICAgKC1vLW1pbi1kZXZpY2UtcGl4ZWwtcmF0aW86IDMvNCksXFxcclxuICAgICAgICAgICAgICAgICAgICAobWluLXJlc29sdXRpb246IDAuNzVkcHB4KVwiO1xyXG4gICAgICAgICAgICBpZiAod2luZG93Lm1hdGNoTWVkaWEobWVkaWFRdWVyeSkubWF0Y2hlcykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDAuNztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvLy8gPHJlZmVyZW5jZSB0eXBlcz1cImpxdWVyeVwiIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHR5cGVzPVwidW5kZXJzY29yZVwiIC8+XHJcblxyXG5uYW1lc3BhY2UgQ0RQLlRvb2xzIHtcclxuXHJcbiAgICBjb25zdCBUQUcgPSBcIltDRFAuVG9vbHMuVGVtcGxhdGVdIFwiO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGludGVyZmFjZSBKU1RcclxuICAgICAqIEBicmllZiDjgrPjg7Pjg5HjgqTjg6vmuIjjgb8g44OG44Oz44OX44Os44O844OI5qC857SN44Kk44Oz44K/44O844OV44Kn44Kk44K5XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSlNUIHtcclxuICAgICAgICAoZGF0YT86IGFueSk6IHN0cmluZztcclxuICAgIH1cclxuXHJcbiAgICAvL19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18vL1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGNsYXNzIFRlbXBsYXRlXHJcbiAgICAgKiBAYnJpZWYgdGVtcGxhdGUgc2NyaXB0IOOCkueuoeeQhuOBmeOCi+ODpuODvOODhuOCo+ODquODhuOCo+OCr+ODqeOCuVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgY2xhc3MgVGVtcGxhdGUge1xyXG5cclxuICAgICAgICBzdGF0aWMgX21hcEVsZW1lbnQ6IGFueTsgICAgLy8hPCDjgq3jg7zjgaggSlF1ZXJ5IEVsZW1lbnQg44GuIE1hcCDjgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAgICBzdGF0aWMgX21hcFNvdXJjZTogYW55OyAgICAgLy8hPCBVUkwg44GoIOOCveODvOOCueODleOCoeOCpOODqyhIVE1MKSDjga4gTWFwIOOCquODluOCuOOCp+OCr+ODiFxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIOWFrOmWi+ODoeOCveODg+ODiVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDmjIflrprjgZfjgZ8gaWQsIGNsYXNzIOWQjSwgVGFnIOWQjeOCkuOCreODvOOBq+ODhuODs+ODl+ODrOODvOODiOOBriBKUXVlcnkgRWxlbWVudCDjgpLlj5blvpfjgZnjgovjgIJcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSAga2V5ICAgICBbaW5dIGlkLCBjbGFzcywgdGFnIOOCkuihqOOBmeaWh+Wtl+WIl1xyXG4gICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSAgW3NyY10gICBbaW5dIOWklumDqCBodG1sIOOCkuaMh+WumuOBmeOCi+WgtOWQiOOBryB1cmwg44KS6Kit5a6aXHJcbiAgICAgICAgICogQHBhcmFtIHtCb29sZWFufSBbY2FjaGVdIFtpbl0gc3JjIGh0bWwg44KS44Kt44Oj44OD44K344Ol44GZ44KL5aC05ZCI44GvIHRydWUuIHNyYyDjgYzmjIflrprjgZXjgozjgabjgYTjgovjgajjgY3jga7jgb/mnInlirlcclxuICAgICAgICAgKiBAcmV0dXJuIHRlbXBsYXRlIOOBjOagvOe0jeOBleOCjOOBpuOBhOOCiyBKUXVlcnkgRWxlbWVudFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHN0YXRpYyBnZXRUZW1wbGF0ZUVsZW1lbnQoa2V5OiBzdHJpbmcsIHNyYzogc3RyaW5nID0gbnVsbCwgY2FjaGU6IGJvb2xlYW4gPSB0cnVlKTogSlF1ZXJ5IHtcclxuICAgICAgICAgICAgY29uc3QgbWFwRWxlbWVudCA9IFRlbXBsYXRlLmdldEVsZW1lbnRNYXAoKTtcclxuICAgICAgICAgICAgbGV0ICRlbGVtZW50ID0gbWFwRWxlbWVudFtrZXldO1xyXG5cclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGlmICghJGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc3JjKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGh0bWwgPSBUZW1wbGF0ZS5maW5kSHRtbEZyb21Tb3VyY2Uoc3JjKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJGVsZW1lbnQgPSAkKGh0bWwpLmZpbmQoa2V5KTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkZWxlbWVudCA9ICQoa2V5KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g6KaB57Sg44Gu5qSc6Ki8XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCRlbGVtZW50IDw9IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgKFwiaW52YWxpZCBba2V5LCBzcmNdID0gW1wiICsga2V5ICsgXCIsIFwiICsgc3JjICsgXCJdXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoc3JjICYmIGNhY2hlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcEVsZW1lbnRba2V5XSA9ICRlbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBjYXRjaCAoZXhjZXB0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFRBRyArIGV4Y2VwdGlvbik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuICRlbGVtZW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogTWFwIOOCquODluOCuOOCp+OCr+ODiOOBruWJiumZpFxyXG4gICAgICAgICAqIOaYjuekuueahOOBq+OCreODo+ODg+OCt+ODpeOCkumWi+aUvuOBmeOCi+WgtOWQiOOBr+acrOODoeOCveODg+ODieOCkuOCs+ODvOODq+OBmeOCi1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHN0YXRpYyBlbXB0eSgpOiB2b2lkIHtcclxuICAgICAgICAgICAgVGVtcGxhdGUuX21hcEVsZW1lbnQgPSBudWxsO1xyXG4gICAgICAgICAgICBUZW1wbGF0ZS5fbWFwU291cmNlID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOaMh+WumuOBl+OBnyBpZCwgY2xhc3Mg5ZCNLCBUYWcg5ZCN44KS44Kt44O844GrIEpTVCDjgpLlj5blvpfjgZnjgovjgIJcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7U3RyaW5nIHwgalF1ZXJ5fSBrZXkgICAgIFtpbl0gaWQsIGNsYXNzLCB0YWcg44KS6KGo44GZ5paH5a2X5YiXIOOBvuOBn+OBryDjg4bjg7Pjg5fjg6zjg7zjg4jmloflrZfliJcsIOOBvuOBn+OBryBqUXVlcnkg44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9ICAgICAgICAgIFtzcmNdICAgW2luXSDlpJbpg6ggaHRtbCDjgpLmjIflrprjgZnjgovloLTlkIjjga8gdXJsIOOCkuioreWumlxyXG4gICAgICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gICAgICAgICBbY2FjaGVdIFtpbl0gc3JjIGh0bWwg44KS44Kt44Oj44OD44K344Ol44GZ44KL5aC05ZCI44GvIHRydWUuIHNyYyDjgYzmjIflrprjgZXjgozjgabjgYTjgovjgajjgY3jga7jgb/mnInlirlcclxuICAgICAgICAgKiBAcmV0dXJuIOOCs+ODs+ODkeOCpOODq+OBleOCjOOBnyBKU1Qg44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgc3RhdGljIGdldEpTVChrZXk6IEpRdWVyeSk6IEpTVDtcclxuICAgICAgICBzdGF0aWMgZ2V0SlNUKGtleTogc3RyaW5nLCBzcmM/OiBzdHJpbmcsIGNhY2hlPzogYm9vbGVhbik6IEpTVDtcclxuICAgICAgICBzdGF0aWMgZ2V0SlNUKGtleTogYW55LCBzcmM/OiBzdHJpbmcsIGNhY2hlPzogYm9vbGVhbik6IEpTVCB7XHJcbiAgICAgICAgICAgIGxldCB0ZW1wbGF0ZTogYW55ID0gbnVsbDtcclxuICAgICAgICAgICAgbGV0IGpzdDogSlNUO1xyXG4gICAgICAgICAgICBsZXQgJGVsZW1lbnQ6IEpRdWVyeTtcclxuICAgICAgICAgICAgaWYgKGtleSBpbnN0YW5jZW9mIGpRdWVyeSkge1xyXG4gICAgICAgICAgICAgICAgJGVsZW1lbnQgPSBrZXk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkZWxlbWVudCA9IFRlbXBsYXRlLmdldFRlbXBsYXRlRWxlbWVudChrZXksIHNyYywgY2FjaGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChudWxsICE9IGdsb2JhbC5Ib2dhbikge1xyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGUgPSBIb2dhbi5jb21waWxlKCRlbGVtZW50LnRleHQoKSk7XHJcbiAgICAgICAgICAgICAgICBqc3QgPSBmdW5jdGlvbiAoZGF0YT86IGFueSk6IHN0cmluZyB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXBsYXRlLnJlbmRlcihkYXRhKTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZSA9IF8udGVtcGxhdGUoJGVsZW1lbnQuaHRtbCgpKTtcclxuICAgICAgICAgICAgICAgIGpzdCA9IGZ1bmN0aW9uIChkYXRhPzogYW55KTogc3RyaW5nIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyDmlLnooYzjgajjgr/jg5bjga/liYrpmaTjgZnjgotcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGVtcGxhdGUoZGF0YSkucmVwbGFjZSgvXFxufFxcdC9nLCBcIlwiKTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGpzdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8g5YaF6YOo44Oh44K944OD44OJXHJcblxyXG4gICAgICAgIC8vISBFbGVtZW50IE1hcCDjgqrjg5bjgrjjgqfjgq/jg4jjga7lj5blvpdcclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBnZXRFbGVtZW50TWFwKCk6IGFueSB7XHJcbiAgICAgICAgICAgIGlmICghVGVtcGxhdGUuX21hcEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIFRlbXBsYXRlLl9tYXBFbGVtZW50ID0ge307XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIFRlbXBsYXRlLl9tYXBFbGVtZW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIFVSTCBNYXAg44Kq44OW44K444Kn44Kv44OI44Gu5Y+W5b6XXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgZ2V0U291cmNlTWFwKCk6IGFueSB7XHJcbiAgICAgICAgICAgIGlmICghVGVtcGxhdGUuX21hcFNvdXJjZSkge1xyXG4gICAgICAgICAgICAgICAgVGVtcGxhdGUuX21hcFNvdXJjZSA9IHt9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBUZW1wbGF0ZS5fbWFwU291cmNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIFVSTCBNYXAg44GL44KJIEhUTUwg44KS5qSc57SiLiDlpLHmlZfjgZfjgZ/loLTlkIjjga8gdW5kZWZpbmVkIOOBjOi/lOOCi1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGZpbmRIdG1sRnJvbVNvdXJjZShzcmM6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1hcFNvdXJjZSA9IFRlbXBsYXRlLmdldFNvdXJjZU1hcCgpO1xyXG4gICAgICAgICAgICBsZXQgaHRtbCA9IG1hcFNvdXJjZVtzcmNdO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFodG1sKSB7XHJcbiAgICAgICAgICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICAgICAgICAgIHVybDogc3JjLFxyXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgICAgICAgICAgICAgICAgICBhc3luYzogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6IFwiaHRtbFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IChkYXRhOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaHRtbCA9IGRhdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogKGRhdGE6IGFueSwgc3RhdHVzOiBzdHJpbmcpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgKFwiYWpheCByZXF1ZXN0IGZhaWxlZC4gc3RhdHVzOiBcIiArIHN0YXR1cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAvLyDjgq3jg6Pjg4Pjgrfjg6XjgavmoLzntI1cclxuICAgICAgICAgICAgICAgIG1hcFNvdXJjZVtzcmNdID0gaHRtbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gaHRtbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vIDxyZWZlcmVuY2UgdHlwZXM9XCJqcXVlcnlcIiAvPlxyXG4vLy8gPHJlZmVyZW5jZSB0eXBlcz1cImJhY2tib25lXCIgLz5cclxuXHJcbm5hbWVzcGFjZSBDRFAuVUkge1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGludGVyZmFjZSBMaXN0Vmlld09wdGlvbnNcclxuICAgICAqIEBicmllZiBMaXN0VmlldyDjga7liJ3mnJ/ljJbmg4XloLHjgpLmoLzntI3jgZnjgovjgqTjg7Pjgr/jg7zjg5XjgqfjgqTjgrnjgq/jg6njgrlcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBMaXN0Vmlld09wdGlvbnMge1xyXG4gICAgICAgIC8vISDkvb/nlKjjgZnjgosgSVNjcm9sbGVyIOOCkuWkieabtOOBmeOCi+WgtOWQiOOBq+aMh+WumiAgW2RlZmF1bHQ6IFNjcm9sbGVyTmF0aXZlLmdldEZhY3RvcnkoKV1cclxuICAgICAgICBzY3JvbGxlckZhY3Rvcnk/OiAoZWxlbWVudDogYW55LCBvcHRpb25zOiBMaXN0Vmlld09wdGlvbnMpID0+IElTY3JvbGxlcjtcclxuICAgICAgICBlbmFibGVIaWRkZW5QYWdlPzogYm9vbGVhbjsgICAgICAgICAvLyE8IHBsZWxvYWQg5a++6LGh44KSIHZpc2liaWxpdHk6IFwiaGlkZGVuXCIg44Gr44GZ44KL5aC05ZCI44GvIHRydWUuICAgICAgICAgICAgICAgIFtkZWZhdWx0OiBmYWxzZV1cclxuICAgICAgICBlbmFibGVUcmFuc2Zvcm1PZmZzZXQ/OiBib29sZWFuOyAgICAvLyE8IGxpc3QgaXRlbSDjga4gb2Zmc2V0IOOCkiB0cmFuc2Zvcm0g44Gn6Kit5a6a44GZ44KLICjjgYLjgb7jgorjgojjgY/jgarjgYQpICAgICAgICAgIFtkZWZhdWx0OiBmYWxzZV1cclxuICAgICAgICBzY3JvbGxNYXBSZWZyZXNoSW50ZXJ2YWw/OiBudW1iZXI7ICAvLyE8IHNjcm9sbCBtYXAg6aCY5Z+f44Gu5pu05paw56K66KqN6ZaT6ZqULiBpc2Nyb2xsIOetieOAgemdniBET00g5pON5L2c5pmC44Gr5L2/55SoICAgICAgICBbZGVmYXVsdDogMjAwXVxyXG4gICAgICAgIHNjcm9sbFJlZnJlc2hEaXN0YW5jZT86IG51bWJlcjsgICAgIC8vITwgTGlzdFZpZXcg5pu05paw5Yem55CG44KS6KGM44GGIHNjcm9sbCDnp7vli5Xph48gKOOCouODq+OCtOODquOCuuODoOimi+ebtOOBl+OCguimlumHjikgICAgICBbZGVmYXVsdDogMjAwXVxyXG4gICAgICAgIHBhZ2VQcmVwYXJlQ291bnQ/OiBudW1iZXI7ICAgICAgICAgIC8vITwg6KGo56S66aCY5Z+f5aSW44Gn5a6M5YWo44Gq54q25oWL44Gn6L+95Yqg44GV44KM44KLIHBhZ2Ug5pWwICjliY3mlrnjg7vlvozmlrnlkIjjgo/jgZvjgaYgMuWAjSkgICBbZGVmYXVsdDogM11cclxuICAgICAgICBwYWdlUHJlbG9hZENvdW50PzogbnVtYmVyOyAgICAgICAgICAvLyE8IOihqOekuumgmOWfn+WkluOBpyBoaWRkZW4g54q25oWL44Gn6L+95Yqg44GV44KM44KLIHBhZ2Ug5pWwICjliY3mlrnjg7vlvozmlrnlkIjjgo/jgZvjgaYgMuWAjSkgW2RlZmF1bHQ6IDFdXHJcbiAgICAgICAgZW5hYmxlQW5pbWF0aW9uPzogYm9vbGVhbjsgICAgICAgICAgLy8hPCDjgqLjg4vjg6Hjg7zjgrfjg6fjg7PjgpLmnInlirnjgavjgZnjgovloLTlkIjjga8gdHJ1ZS4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtkZWZhdWx0OiB0cnVlXVxyXG4gICAgICAgIGFuaW1hdGlvbkR1cmF0aW9uPzogbnVtYmVyOyAgICAgICAgIC8vITwg44Ki44OL44Oh44O844K344On44Oz44Gu6LK744KE44GZ5pmC6ZaTIChtc2VjKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbZGVmYXVsdDogMF1cclxuICAgICAgICBiYXNlRGVwdGg/OiBzdHJpbmc7ICAgICAgICAgICAgICAgICAvLyE8IOWfuua6luOBqOOBmeOCiyB6LWluZGV4LiBcImNvbGxhcHNlXCIg5pmC44Gu44Ki44OL44Oh44O844K344On44Oz5pmC44Gr5L2/55SoICAgICAgICAgICAgIFtkZWZhdWx0OiBhdXRvXVxyXG4gICAgICAgIGl0ZW1UYWdOYW1lPzogc3RyaW5nOyAgICAgICAgICAgICAgIC8vITwgTGlzdEl0ZW1WaWV3IOOBjOS9v+eUqOOBmeOCi+OCv+OCsOWQjSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW2RlZmF1bHQ6IGRpdl1cclxuICAgICAgICByZW1vdmVJdGVtV2l0aFRyYW5zaXRpb24/OiBib29sZWFuOyAvLyE8IHJlbW92ZUl0ZW0oKSDmmYLjgavlv4XopoHjgavlv5zjgZjjgaboh6rli5XjgacgdHJhbnNpdGlvbiDjgpLjgYvjgZHjgovloLTlkIjjga8gdHJ1ZSAgICBbZGVmYXVsdDogdHJ1ZV1cclxuICAgICAgICAvLyEg6Z2e44Ki44Kv44OG44Kj44OW44GqIHNjcm9sbCBtYXAg44Gr5a++44GX44GmIER1bW15IOOCkuS9v+eUqOOBmeOCi+WgtOWQiOOBryB0cnVlLiAoZmxpcHNuYXAg5YiH44KK5pu/44GI5pmC562JLiDlirnmnpzjga/jgYLjgb7jgorjgarjgZcpICBbZGVmYXVsdDogZmFsc2VdXHJcbiAgICAgICAgdXNlRHVtbXlJbmFjdGl2ZVNjcm9sbE1hcD86IGJvb2xlYW47XHJcbiAgICB9XHJcblxyXG4gICAgLy9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fLy9cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBpbnRlcmZhY2UgSUxpc3RWaWV3RnJhbWV3b3JrXHJcbiAgICAgKiBAYnJpZWYgTGlzdFZpZXcgRnJhbWV3b3JrIOOBjOS9v+eUqOOBmeOCi+OCpOODs+OCv+ODvOODleOCp+OCpOOCueWumue+qVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElMaXN0Vmlld0ZyYW1ld29yayB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogU2Nyb2xsIE1hcCDjga7pq5jjgZXjgpLlj5blvpdcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge051bWJlcn0g54++5Zyo44Gu6auY44GVIFtweF1cclxuICAgICAgICAgKi9cclxuICAgICAgICBnZXRTY3JvbGxNYXBIZWlnaHQoKTogbnVtYmVyO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBTY3JvbGwgTWFwIOOBrumrmOOBleOCkuabtOaWsFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGRlbHRlIHtOdW1iZXJ9IFtpbl0g5aSJ5YyW6YeP44KS5oyH5a6aXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdXBkYXRlU2Nyb2xsTWFwSGVpZ2h0KGRlbHRhOiBudW1iZXIpOiB2b2lkO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDlhoXpg6ggUHJvZmlsZSDjga7mm7TmlrBcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBmcm9tIHtOdW1iZXJ9IFtpbl0g5pu05paw6ZaL5aeL44Kk44Oz44OH44OD44Kv44K544KS5oyH5a6aXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdXBkYXRlUHJvZmlsZXMoZnJvbTogbnVtYmVyKTogdm9pZDtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogU2Nyb2xsIE1hcCBFbGVtZW50IOOCkuWPluW+l1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7alF1ZXJ5fSBzY3JvbGwgbWFwIGVsZW1lbnRcclxuICAgICAgICAgKi9cclxuICAgICAgICBnZXRTY3JvbGxNYXBFbGVtZW50KCk6IEpRdWVyeTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog44Oq44K144Kk44Kv44Or5Y+v6IO944GqIEVsZW1lbnQg44KS5Y+W5b6XXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHtqUXVlcnl9IHJlY3ljbGUgZWxlbWVudHNcclxuICAgICAgICAgKi9cclxuICAgICAgICBmaW5kUmVjeWNsZUVsZW1lbnRzKCk6IEpRdWVyeTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogTGlzdFZpZXdPcHRpb25zIOOCkuWPluW+l1xyXG4gICAgICAgICAqIOOBmeOBueOBpuOBruODl+ODreODkeODhuOCo+OCouOCr+OCu+OCueOCkuS/neiovOOBmeOCi+OAglxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7TGlzdFZpZXdPcHRpb25zfSBvcHRpb24g44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZ2V0TGlzdFZpZXdPcHRpb25zKCk6IExpc3RWaWV3T3B0aW9ucztcclxuICAgIH1cclxuXHJcbiAgICAvL19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18vL1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGludGVyZmFjZSBJU2Nyb2xsZXJcclxuICAgICAqIEBicmllZiBTY3JvbGxlciDjgqTjg7Pjgr/jg7zjg5XjgqfjgqTjgrlcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJU2Nyb2xsZXIge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFNjcm9sbGVyIOOBruWei+aDheWgseOCkuWPluW+l1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGdldFR5cGUoKTogc3RyaW5nO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBwb3NpdGlvbiDlj5blvpdcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge051bWJlcn0gOiBwb3NpdGlvblxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGdldFBvcygpOiBudW1iZXI7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIHBvc2l0aW9uIOOBruacgOWkp+WApOOCkuWPluW+l1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7TnVtYmVyfSA6IHBvc2l0aW9uXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZ2V0UG9zTWF4KCk6IG51bWJlcjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog44Kk44OZ44Oz44OI55m76YyyXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gdHlwZSB7U3RyaW5nfSAgIFtpbl0gZXZlbnQg5ZCNXHJcbiAgICAgICAgICogQHBhcmFtIGZ1bmMge0Z1bmN0aW9ufSBbaW5dIGV2ZW50IGhhbmRsZXJcclxuICAgICAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9IDogcG9zaXRpb25cclxuICAgICAgICAgKi9cclxuICAgICAgICBvbih0eXBlOiBzdHJpbmcsIGZ1bmM6IChldmVudDogSlF1ZXJ5LkV2ZW50KSA9PiB2b2lkKTogdm9pZDtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog44Kk44OZ44Oz44OI55m76Yyy6Kej6ZmkXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gdHlwZSB7U3RyaW5nfSAgIFtpbl0gZXZlbnQg5ZCNXHJcbiAgICAgICAgICogQHBhcmFtIGZ1bmMge0Z1bmN0aW9ufSBbaW5dIGV2ZW50IGhhbmRsZXJcclxuICAgICAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9IDogcG9zaXRpb25cclxuICAgICAgICAgKi9cclxuICAgICAgICBvZmYodHlwZTogc3RyaW5nLCBmdW5jOiAoZXZlbnQ6IEpRdWVyeS5FdmVudCkgPT4gdm9pZCk6IHZvaWQ7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOOCueOCr+ODreODvOODq+S9jee9ruOCkuaMh+WumlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHBvcyAgICAge051bWJlcn0gIFtpbl0g44K544Kv44Ot44O844Or5L2N572uICgwIC0gcG9zTWF4KVxyXG4gICAgICAgICAqIEBwYXJhbSBhbmltYXRlIHtCb29sZWFufSBbaW5dIOOCouODi+ODoeODvOOCt+ODp+ODs+OBruacieeEoVxyXG4gICAgICAgICAqIEBwYXJhbSB0aW1lICAgIHtOdW1iZXJ9ICBbaW5dIOOCouODi+ODoeODvOOCt+ODp+ODs+OBq+iyu+OChOOBmeaZgumWkyBbbXNlY11cclxuICAgICAgICAgKi9cclxuICAgICAgICBzY3JvbGxUbyhwb3M6IG51bWJlciwgYW5pbWF0ZT86IGJvb2xlYW4sIHRpbWU/OiBudW1iZXIpOiB2b2lkO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBTY3JvbGxlciDjga7nirbmhYvmm7TmlrBcclxuICAgICAgICAgKi9cclxuICAgICAgICB1cGRhdGUoKTogdm9pZDtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogU2Nyb2xsZXIg44Gu56C05qOEXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZGVzdHJveSgpOiB2b2lkO1xyXG4gICAgfVxyXG5cclxuICAgIC8vX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXy8vXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAaW50ZXJmYWNlIElTY3JvbGxhYmxlXHJcbiAgICAgKiBAYnJpZWYgU2Nyb2xsIOOCpOODs+OCv+ODvOODleOCp+OCpOOCuVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElTY3JvbGxhYmxlIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDjgrnjgq/jg63jg7zjg6vjgqTjg5njg7Pjg4jjg4/jg7Pjg4njg6noqK3lrpov6Kej6ZmkXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gaGFuZGxlciB7RnVuY3Rpb259IFtpbl0g44OP44Oz44OJ44Op6Zai5pWwXHJcbiAgICAgICAgICogQHBhcmFtIG9uICAgICAge0Jvb2xlYW59ICBbaW5dIHRydWU6IOioreWumiAvIGZhbHNlOiDop6PpmaRcclxuICAgICAgICAgKi9cclxuICAgICAgICBzZXRTY3JvbGxIYW5kbGVyKGhhbmRsZXI6IChldmVudDogSlF1ZXJ5LkV2ZW50KSA9PiB2b2lkLCBvbjogYm9vbGVhbik6IHZvaWQ7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOOCueOCr+ODreODvOODq+e1guS6huOCpOODmeODs+ODiOODj+ODs+ODieODqeioreWumi/op6PpmaRcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBoYW5kbGVyIHtGdW5jdGlvbn0gW2luXSDjg4/jg7Pjg4njg6nplqLmlbBcclxuICAgICAgICAgKiBAcGFyYW0gb24gICAgICB7Qm9vbGVhbn0gIFtpbl0gdHJ1ZTog6Kit5a6aIC8gZmFsc2U6IOino+mZpFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHNldFNjcm9sbFN0b3BIYW5kbGVyKGhhbmRsZXI6IChldmVudDogSlF1ZXJ5LkV2ZW50KSA9PiB2b2lkLCBvbjogYm9vbGVhbik6IHZvaWQ7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOOCueOCr+ODreODvOODq+S9jee9ruOCkuWPluW+l1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7TnVtYmVyfSA6IHBvc2l0aW9uXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZ2V0U2Nyb2xsUG9zKCk6IG51bWJlcjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog44K544Kv44Ot44O844Or5L2N572u44Gu5pyA5aSn5YCk44KS5Y+W5b6XXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9IDogcG9zaXRpb25cclxuICAgICAgICAgKi9cclxuICAgICAgICBnZXRTY3JvbGxQb3NNYXgoKTogbnVtYmVyO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDjgrnjgq/jg63jg7zjg6vkvY3nva7jgpLmjIflrppcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBwb3MgICAgIHtOdW1iZXJ9ICBbaW5dIOOCueOCr+ODreODvOODq+S9jee9riAoMCAtIHBvc01heClcclxuICAgICAgICAgKiBAcGFyYW0gYW5pbWF0ZSB7Qm9vbGVhbn0gW2luXSDjgqLjg4vjg6Hjg7zjgrfjg6fjg7Pjga7mnInnhKFcclxuICAgICAgICAgKiBAcGFyYW0gdGltZSAgICB7TnVtYmVyfSAgW2luXSDjgqLjg4vjg6Hjg7zjgrfjg6fjg7PjgavosrvjgoTjgZnmmYLplpMgW21zZWNdXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgc2Nyb2xsVG8ocG9zOiBudW1iZXIsIGFuaW1hdGU/OiBib29sZWFuLCB0aW1lPzogbnVtYmVyKTogdm9pZDtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog5oyH5a6a44GV44KM44GfIExpc3RJdGVtVmlldyDjga7ooajnpLrjgpLkv53oqLxcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBpbmRleCAgIHtOdW1iZXJ9ICAgICAgICAgICAgICAgW2luXSBMaXN0SXRlbVZpZXcg44Gu44Kk44Oz44OH44OD44Kv44K5XHJcbiAgICAgICAgICogQHBhcmFtIG9wdGlvbnMge0Vuc3VyZVZpc2libGVPcHRpb25zfSBbaW5dIOOCquODl+OCt+ODp+ODs1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGVuc3VyZVZpc2libGUoaW5kZXg6IG51bWJlciwgb3B0aW9ucz86IEVuc3VyZVZpc2libGVPcHRpb25zKTogdm9pZDtcclxuICAgIH1cclxuXHJcbiAgICAvL19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18vL1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGludGVyZmFjZSBJQmFja3VwUmVzdG9yZVxyXG4gICAgICogQGJyaWVmIEJhY2t1cC9SZXN0b3JlIOOBruOCpOODs+OCv+ODvOODleOCp+OCpOOCuVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElCYWNrdXBSZXN0b3JlIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDlhoXpg6jjg4fjg7zjgr/jgpLjg5Djg4Pjgq/jgqLjg4Pjg5dcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBrZXkge1N0cmluZ30gW2luXSDjg5Djg4Pjgq/jgqLjg4Pjg5fjgq3jg7zjgpLmjIflrppcclxuICAgICAgICAgKiBAcmV0dXJuIHtCb29sZWFufSB0cnVlOiDmiJDlip8gLyBmYWxzZTog5aSx5pWXXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgYmFja3VwKGtleTogc3RyaW5nKTogYm9vbGVhbjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog5YaF6YOo44OH44O844K/44KS44Oq44K544OI44KiXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ga2V5ICAgICB7U3RyaW5nfSAgW2luXSDjg5Djg4Pjgq/jgqLjg4Pjg5fjgq3jg7zjgpLmjIflrppcclxuICAgICAgICAgKiBAcGFyYW0gcmVidWlsZCB7Qm9vbGVhbn0gW2luXSByZWJ1aWxkIOOCkuWun+ihjOOBmeOCi+WgtOWQiOOBryB0cnVlIOOCkuaMh+WumlxyXG4gICAgICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IHRydWU6IOaIkOWKnyAvIGZhbHNlOiDlpLHmlZdcclxuICAgICAgICAgKi9cclxuICAgICAgICByZXN0b3JlKGtleTogc3RyaW5nLCByZWJ1aWxkOiBib29sZWFuKTogYm9vbGVhbjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog44OQ44OD44Kv44Ki44OD44OX44OH44O844K/44Gu5pyJ54ShXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ga2V5IHtTdHJpbmd9IFtpbl0g44OQ44OD44Kv44Ki44OD44OX44Kt44O844KS5oyH5a6aXHJcbiAgICAgICAgICogQHJldHVybiB7Qm9vbGVhbn0gdHJ1ZTog5pyJIC8gZmFsc2U6IOeEoVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGhhc0JhY2t1cChrZXk6IHN0cmluZyk6IGJvb2xlYW47XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOODkOODg+OCr+OCouODg+ODl+ODh+ODvOOCv+OBruegtOajhFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGtleSB7U3RyaW5nfSBbaW5dIOODkOODg+OCr+OCouODg+ODl+OCreODvOOCkuaMh+WumlxyXG4gICAgICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IHRydWU6IOaIkOWKnyAvIGZhbHNlOiDlpLHmlZdcclxuICAgICAgICAgKi9cclxuICAgICAgICBjbGVhckJhY2t1cChrZXk/OiBzdHJpbmcpOiBib29sZWFuO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDjg5Djg4Pjgq/jgqLjg4Pjg5fjg4fjg7zjgr/jgavjgqLjgq/jgrvjgrlcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge2FueX0g44OQ44OD44Kv44Ki44OD44OX44OH44O844K/44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgYmFja3VwRGF0YTogYW55O1xyXG4gICAgfVxyXG5cclxuICAgIC8vX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXy8vXHJcblxyXG4gICAgZXhwb3J0IHR5cGUgVmlld0NvbnN0cnVjdG9yID0gbmV3IChvcHRpb25zPzogQmFja2JvbmUuVmlld09wdGlvbnM8QmFja2JvbmUuTW9kZWw+KSA9PiBCYWNrYm9uZS5WaWV3PEJhY2tib25lLk1vZGVsPjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBpbnRlcmZhY2UgSUNvbXBvc2FibGVWaWV3XHJcbiAgICAgKiBAYnJpZWYgSUNvbXBvc2FibGVWaWV3U3RhdGljIOOBruODl+ODreOCreOCt+OCpOODs+OCv+ODvOODleOCp+OCpOOCuSAoZXhwZXJpbWVudGFsKVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElDb21wb3NhYmxlVmlldyB7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAaW50ZXJmYWNlIElDb21wb3NhYmxlVmlld1N0YXRpY1xyXG4gICAgICogQGJyaWVmIFZpZXcgY29tcG9zZSDjgqTjg7Pjgr/jg7zjg5XjgqfjgqTjgrlcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJQ29tcG9zYWJsZVZpZXdTdGF0aWMge1xyXG4gICAgICAgIG5ldyAoKTogSUNvbXBvc2FibGVWaWV3O1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOOBmeOBp+OBq+Wumue+qeOBleOCjOOBnyBCYWNrYm9uZS5WaWV3IOOCkuWfuuW6leOCr+ODqeOCueOBq+ioreWumuOBl+OAgWV4dGVuZCDjgpLlrp/ooYzjgZnjgovjgIJcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBkZXJpdmVzICAgICAgICAge0JhY2tib25lLlZpZXd8QmFja2JvbmUuVmlld1tdfSBbaW5dIOWQiOaIkOWFg+OBriBWaWV3IOOCr+ODqeOCuVxyXG4gICAgICAgICAqIEBwYXJhbSBwcm9wZXJ0aWVzICAgICAge09iamVjdH0gICAgICAgICAgICAgICAgICAgICAgICBbaW5dIHByb3RvdHlwZSDjg5fjg63jg5Hjg4bjgqNcclxuICAgICAgICAgKiBAcGFyYW0gY2xhc3NQcm9wZXJ0aWVzIHtPYmplY3R9ICAgICAgICAgICAgICAgICAgICAgICAgW2luXSBzdGF0aWMg44OX44Ot44OR44OG44KjXHJcbiAgICAgICAgICogQHJldHVybiB7QmFja2JvbmUuVmlld3xCYWNrYm9uZS5WaWV3W119IOaWsOimj+OBq+eUn+aIkOOBleOCjOOBnyBWaWV3IOOBruOCs+ODs+OCueODiOODqeOCr+OCv1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGNvbXBvc2UoZGVyaXZlczogVmlld0NvbnN0cnVjdG9yIHwgVmlld0NvbnN0cnVjdG9yW10sIHByb3BlcnRpZXM6IGFueSwgY2xhc3NQcm9wZXJ0aWVzPzogYW55KTogVmlld0NvbnN0cnVjdG9yO1xyXG4gICAgfVxyXG5cclxuICAgIC8vX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXy8vXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAaW50ZXJmYWNlIFVwZGF0ZUhlaWdodE9wdGlvbnNcclxuICAgICAqIEBicmllZiBJTGlzdEl0ZW1WaWV3LnVwZGF0ZUhlaWdodCgpIOOBq+a4oeOBm+OCi+OCquODl+OCt+ODp+ODs1xyXG4gICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIFVwZGF0ZUhlaWdodE9wdGlvbnMge1xyXG4gICAgICAgIHJlZmxlY3RBbGw/OiBib29sZWFuOyAgICAvLyE8IGxpbmUg44Gu6auY44GV5pu05paw5pmC44Gr5b2x6Z+/44GZ44KL44GZ44G544Gm44GuIExpbmVQcm9maWxlIOOBruWGjeioiOeul+OCkuihjOOBhuWgtOWQiOOBryB0cnVlXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAaW50ZXJmYWNlIElMaXN0SXRlbVZpZXdcclxuICAgICAqIEBicmllZiAgICAgTGlzdFZpZXcg44GuIDHooYzliIbjgpLmp4vmiJDjgZnjgosgQ2hpbGQgVmlldyDjgqTjg7Pjgr/jg7zjg5XjgqfjgqTjgrlcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJTGlzdEl0ZW1WaWV3IHtcclxuICAgICAgICAvLyEg6Ieq6Lqr44GuIExpbmUg44Kk44Oz44OH44OD44Kv44K544KS5Y+W5b6XXHJcbiAgICAgICAgZ2V0SW5kZXgoKTogbnVtYmVyO1xyXG4gICAgICAgIC8vISDoh6rouqvjgavmjIflrprjgZXjgozjgZ/pq5jjgZXjgpLlj5blvpdcclxuICAgICAgICBnZXRTcGVjaWZpZWRIZWlnaHQoKTogbnVtYmVyO1xyXG4gICAgICAgIC8vISBjaGlsZCBub2RlIOOBjOWtmOWcqOOBmeOCi+OBi+WIpOWumlxyXG4gICAgICAgIGhhc0NoaWxkTm9kZSgpOiBib29sZWFuO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDpq5jjgZXjgpLmm7TmlrBcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBuZXdIZWlnaHQge051bWJlcn0gICAgICAgICAgICAgIFtpbl0g5paw44GX44GE6auY44GVXHJcbiAgICAgICAgICogQHBhcmFtIG9wdGlvbnMgICB7VXBkYXRlSGVpZ2h0T3B0aW9uc30gW2luXSBsaW5lIOOBrumrmOOBleabtOaWsOaZguOBq+W9semfv+OBmeOCi+OBmeOBueOBpuOBriBMaW5lUHJvZmlsZSDjga7lho3oqIjnrpfjgpLooYzjgYbloLTlkIjjga8geyByZWZsZWN0QWxsOiB0cnVlIH1cclxuICAgICAgICAgKiBAcmV0dXJuIHtJTGlzdEl0ZW1WaWV3fSDjgqTjg7Pjgrnjgr/jg7PjgrlcclxuICAgICAgICAgKi9cclxuICAgICAgICB1cGRhdGVIZWlnaHQobmV3SGVpZ2h0OiBudW1iZXIsIG9wdGlvbnM/OiBVcGRhdGVIZWlnaHRPcHRpb25zKTogSUxpc3RJdGVtVmlldztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBpbnRlcmZhY2UgQmFzZUxpc3RJdGVtVmlld1xyXG4gICAgICogQGJyaWVmICAgICBJTGlzdEl0ZW1WaWV3IOOBriBhbGlhc1xyXG4gICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIEJhc2VMaXN0SXRlbVZpZXcgZXh0ZW5kcyBJTGlzdEl0ZW1WaWV3LCBCYWNrYm9uZS5WaWV3PEJhY2tib25lLk1vZGVsPiB7IH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBpbnRlcmZhY2UgRW5zdXJlVmlzaWJsZU9wdGlvbnNcclxuICAgICAqIEBicmllZiBJTGlzdFZpZXcuZW5zdXJlVmlzaWJsZSgpIOOBq+a4oeOBm+OCi+OCquODl+OCt+ODp+ODs1xyXG4gICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIEVuc3VyZVZpc2libGVPcHRpb25zIHtcclxuICAgICAgICBwYXJ0aWFsT0s/OiBib29sZWFuOyAgICAvLyE8IOmDqOWIhueahOihqOekuuOCkuioseWPr+OBmeOCi+WgtOWQiCB0cnVlLCBkZWZhdWx0OiB0cnVlLlxyXG4gICAgICAgIHNldFRvcD86IGJvb2xlYW47ICAgICAgIC8vITwg5by35Yi255qE44Gr44K544Kv44Ot44O844Or6aCY5Z+f44Gu5LiK6YOo44Gr56e75YuV44GZ44KL5aC05ZCIIHRydWUsIGRlZmF1bHQ6IGZhbHNlLlxyXG4gICAgICAgIGFuaW1hdGU/OiBib29sZWFuOyAgICAgIC8vITwg44Ki44OL44Oh44O844K344On44Oz44GZ44KL5aC05ZCIIHRydWUuIGRlZmF1bHQ6IExpc3RWaWV3T3B0aW9ucy5lbmFibGVBbmltYXRpb24g44Gu6Kit5a6a44Go5ZCM5pyfXHJcbiAgICAgICAgdGltZT86IG51bWJlcjsgICAgICAgICAgLy8hPCDjgqLjg4vjg6Hjg7zjgrfjg6fjg7PjgavosrvjgoTjgZnmmYLplpMgW21zZWNdXHJcbiAgICAgICAgY2FsbGJhY2s/OiAoKSA9PiB2b2lkOyAgLy8hPCDjgqLjg4vjg6Hjg7zjgrfjg6fjg7PntYLkuobjga7jgr/jgqTjg5/jg7PjgrDjgafjgrPjg7zjg6vjgZXjgozjgosuICjnlpHkvLznmoQpXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAaW50ZXJmYWNlIElMaXN0Vmlld1xyXG4gICAgICogQGJyaWVmIExpc3RWaWV3IOOBruOCpOODs+OCv+ODvOODleOCp+OCpOOCuVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElMaXN0VmlldyBleHRlbmRzIElTY3JvbGxhYmxlLCBJQmFja3VwUmVzdG9yZSB7XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gUHJvZmlsZSDnrqHnkIZcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog5Yid5pyf5YyW5riI44G/44GL5Yik5a6aXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHtCb29sZWFufSB0cnVlOiDliJ3mnJ/ljJbmuIjjgb8gLyBmYWxzZTog5pyq5Yid5pyf5YyWXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgaXNJbml0aWFsaXplZCgpOiBib29sZWFuO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBJdGVtIOeZu+mMslxyXG4gICAgICAgICAqIOODl+ODreODkeODhuOCo+OCkuaMh+WumuOBl+OBpuOAgUxpc3RJdGVtIOOCkueuoeeQhlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGhlaWdodCAgICAgIHtOdW1iZXJ9ICAgW2luXSDjg6njgqTjg7Pjga7pq5jjgZVcclxuICAgICAgICAgKiBAcGFyYW0gaW5pdGlhbGl6ZXIge0Z1bmN0aW9ufSBbaW5dIExpc3RJdGVtVmlldyDmtL7nlJ/jgq/jg6njgrnjga7jgrPjg7Pjgrnjg4jjg6njgq/jgr9cclxuICAgICAgICAgKiBAcGFyYW0gaW5mbyAgICAgICAge09iamVjdH0gICBbaW5dIGluaXRpYWxpemVyIOOBq+a4oeOBleOCjOOCi+OCquODl+OCt+ODp+ODs+W8leaVsFxyXG4gICAgICAgICAqIEBwYXJhbSBpbnNlcnRUbyAgICB7TnVtYmVyfSAgIFtpbl0g44Op44Kk44Oz44Gu5oy/5YWl5L2N572u44KS44Kk44Oz44OH44OD44Kv44K544Gn5oyH5a6aXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgYWRkSXRlbShoZWlnaHQ6IG51bWJlciwgaW5pdGlhbGl6ZXI6IG5ldyAob3B0aW9ucz86IGFueSkgPT4gQmFzZUxpc3RJdGVtVmlldywgaW5mbzogYW55LCBpbnNlcnRUbz86IG51bWJlcik6IHZvaWQ7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOaMh+WumuOBl+OBnyBJdGVtIOOCkuWJiumZpFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGluZGV4IHtOdW1iZXJ8TnVtYmVyW119IFtpbl0g6Kej6Zmk6ZaL5aeL44Gu44Kk44Oz44OH44OD44Kv44K544KS5oyH5a6aLiDphY3liJfniYjjga8gcmV2ZXJzZSBpbmRleCDjgpLmjIflrprjgZnjgovjgbvjgYbjgYzlirnnjofnmoRcclxuICAgICAgICAgKiBAcGFyYW0gc2l6ZSAge051bWJlcn0gICAgICAgICAgW2luXSDop6PpmaTjgZnjgovjg6njgqTjg7Pjga7nt4/mlbAuIOaXouWumjogMVxyXG4gICAgICAgICAqIEBwYXJhbSBkZWxheSB7TnVtYmVyfSAgICAgICAgICBbaW5dIOWun+mam+OBq+imgee0oOOCkuWJiumZpOOBmeOCiyBkZWxheSB0aW1lIOaXouWumjogMCAo5Y2z5pmC5YmK6ZmkKVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHJlbW92ZUl0ZW0oaW5kZXg6IG51bWJlciwgc2l6ZT86IG51bWJlciwgZGVsYXk/OiBudW1iZXIpOiB2b2lkO1xyXG4gICAgICAgIHJlbW92ZUl0ZW0oaW5kZXg6IG51bWJlcltdLCBkZWxheT86IG51bWJlcik6IHZvaWQ7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOaMh+WumuOBl+OBnyBJdGVtIOOBq+ioreWumuOBl+OBn+aDheWgseOCkuWPluW+l1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHRhcmdldCB7TnVtYmVyfEpRdWVyeS5FdmVudH0gW2luXSDorZjliKXlrZAuIFtpbmRleCB8IGV2ZW50IG9iamVjdF1cclxuICAgICAgICAgKiBAcmV0dXJuIHtPYmplY3R9IF9hZGRMaW5lKCkg44Gr5oyH5a6a44GX44GfIGluZm8g44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZ2V0SXRlbUluZm8odGFyZ2V0OiBudW1iZXIpOiBhbnk7XHJcbiAgICAgICAgZ2V0SXRlbUluZm8odGFyZ2V0OiBKUXVlcnkuRXZlbnQpOiBhbnk7XHJcblxyXG4gICAgICAgIC8vISDjgqLjgq/jg4bjgqPjg5bjg5rjg7zjgrjjgpLmm7TmlrBcclxuICAgICAgICByZWZyZXNoKCk6IHZvaWQ7XHJcbiAgICAgICAgLy8hIOacquOCouOCteOCpOODs+ODmuODvOOCuOOCkuani+eviVxyXG4gICAgICAgIHVwZGF0ZSgpOiB2b2lkO1xyXG4gICAgICAgIC8vISDjg5rjg7zjgrjjgqLjgrXjgqTjg7PjgpLlho3mp4vmiJBcclxuICAgICAgICByZWJ1aWxkKCk6IHZvaWQ7XHJcbiAgICAgICAgLy8hIOeuoei9hOODh+ODvOOCv+OCkuegtOajhFxyXG4gICAgICAgIHJlbGVhc2UoKTogdm9pZDtcclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBQcm9wZXJ0aWVzOlxyXG5cclxuICAgICAgICAvLyEgY29yZSBmcmFtZXdvcmsgYWNjZXNzXHJcbiAgICAgICAgY29yZTogSUxpc3RWaWV3RnJhbWV3b3JrO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGludGVyZmFjZSBJTGlzdFZpZXdcclxuICAgICAqIEBicmllZiBMaXN0VmlldyDjga7jgqTjg7Pjgr/jg7zjg5XjgqfjgqTjgrlcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJTGlzdFZpZXcge1xyXG4gICAgICAgIC8vISDnmbvpjLIgZnJhbWV3b3JrIOOBjOS9v+eUqOOBmeOCi1xyXG4gICAgICAgIF9hZGRMaW5lPyhfbGluZTogTGluZVByb2ZpbGUsIGluc2VydFRvPzogbnVtYmVyKTogdm9pZDtcclxuICAgICAgICBfYWRkTGluZT8oX2xpbmU6IExpbmVQcm9maWxlW10sIGluc2VydFRvPzogbnVtYmVyKTogdm9pZDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBpbnRlcmZhY2UgQmFzZUxpc3RWaWV3XHJcbiAgICAgKiBAYnJpZWYgICAgIElMaXN0VmlldyDjga4gYWxpYXNcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBCYXNlTGlzdFZpZXcgZXh0ZW5kcyBJTGlzdFZpZXcsIEJhY2tib25lLlZpZXc8QmFja2JvbmUuTW9kZWw+IHsgfVxyXG5cclxuICAgIC8vX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXy8vXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAaW50ZXJmYWNlIElTdGF0dXNNYW5hZ2VyXHJcbiAgICAgKiBAYnJpZWYg54q25oWL566h55CG44Kk44Oz44K/44O844OV44Kn44Kk44K5XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSVN0YXR1c01hbmFnZXIge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOeKtuaFi+WkieaVsOOBruWPgueFp+OCq+OCpuODs+ODiOOBruOCpOODs+OCr+ODquODoeODs+ODiFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHN0YXR1cyB7U3RyaW5nfSBbaW5dIOeKtuaFi+itmOWIpeWtkFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHN0YXR1c0FkZFJlZihzdGF0dXM6IHN0cmluZyk6IG51bWJlcjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog54q25oWL5aSJ5pWw44Gu5Y+C54Wn44Kr44Km44Oz44OI44Gu44OH44Kv44Oq44Oh44Oz44OIXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gc3RhdHVzIHtTdHJpbmd9IFtpbl0g54q25oWL6K2Y5Yil5a2QXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgc3RhdHVzUmVsZWFzZShzdGF0dXM6IHN0cmluZyk6IG51bWJlcjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog5Yem55CG44K544Kz44O844OX5q+O44Gr54q25oWL5aSJ5pWw44KS6Kit5a6aXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gc3RhdHVzICAge1N0cmluZ30gICBbaW5dIOeKtuaFi+itmOWIpeWtkFxyXG4gICAgICAgICAqIEBwYXJhbSBjYWxsYmFjayB7RnVuY3Rpb259IFtpbl0g5Yem55CG44Kz44O844Or44OQ44OD44KvXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgc3RhdHVzU2NvcGUoc3RhdHVzOiBzdHJpbmcsIGNhbGxiYWNrOiAoKSA9PiB2b2lkKTogdm9pZDtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog5oyH5a6a44GX44Gf54q25oWL5Lit44Gn44GC44KL44GL56K66KqNXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gc3RhdHVzIHtTdHJpbmd9ICAgW2luXSDnirbmhYvorZjliKXlrZBcclxuICAgICAgICAgKiBAcmV0dXJuIHtCb29sZWFufSB0cnVlOiDnirbmhYvlhoUgLyBmYWxzZTog54q25oWL5aSWXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgaXNTdGF0dXNJbihzdGF0dXM6IHN0cmluZyk6IGJvb2xlYW47XHJcbiAgICB9XHJcblxyXG4gICAgLy9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fLy9cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBpbnRlcmZhY2UgSUV4cGFuZE1hbmFnZXJcclxuICAgICAqIEBicmllZiDplovplonnrqHnkIbjgqTjg7Pjgr/jg7zjg5XjgqfjgqTjgrlcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJRXhwYW5kTWFuYWdlciBleHRlbmRzIElCYWNrdXBSZXN0b3JlLCBJU3RhdHVzTWFuYWdlciB7XHJcbiAgICAgICAgbGF5b3V0S2V5OiBzdHJpbmc7ICAgIC8vIGxheW91dCBrZXkgKHBvcnRyYXRlL2xhbmRzY2FwZeOBlOOBqOOBqyBsYXlvdXTmg4XloLHjgavjgqLjgq/jgrvjgrkpXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOaWsOimjyBHcm91cFByb2ZpbGUg44KS5L2c5oiQXHJcbiAgICAgICAgICog55m76Yyy5riI44G/44Gu5aC05ZCI44Gv44Gd44Gu44Kq44OW44K444Kn44Kv44OI44KS6L+U5Y20XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFybWEgaWQge1N0cmluZ30gW2luXSDmlrDopo/jgavkvZzmiJDjgZnjgosgR3JvdXAgSUQg44KS5oyH5a6aLiDmjIflrprjgZfjgarjgYTloLTlkIjjga/oh6rli5XlibLjgormjK/jgopcclxuICAgICAgICAgKiBAcmV0dXJuIHtHcm91cFByb2ZpbGV9IEdyb3VwUHJvZmlsZSDjgqTjg7Pjgrnjgr/jg7PjgrlcclxuICAgICAgICAgKi9cclxuICAgICAgICBuZXdHcm91cChpZD86IHN0cmluZyk6IEdyb3VwUHJvZmlsZTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog55m76Yyy5riI44G/IEdyb3VwIOOCkuWPluW+l1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcm1hIGlkIHtTdHJpbmd9IFtpbl0g5Y+W5b6X44GZ44KLIEdyb3VwIElEIOOCkuaMh+WumlxyXG4gICAgICAgICAqIEByZXR1cm4ge0dyb3VwUHJvZmlsZX0gR3JvdXBQcm9maWxlIOOCpOODs+OCueOCv+ODs+OCuSAvIG51bGxcclxuICAgICAgICAgKi9cclxuICAgICAgICBnZXRHcm91cChpZDogc3RyaW5nKTogR3JvdXBQcm9maWxlO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDnrKwx6ZqO5bGk44GuIEdyb3VwIOeZu+mMslxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHRvcEdyb3VwIHtHcm91cFByb2ZpbGV9IFtpbl0g5qeL56+J5riI44G/IEdyb3VwUHJvZmlsZSDjgqTjg7Pjgrnjgr/jg7PjgrlcclxuICAgICAgICAgKi9cclxuICAgICAgICByZWdpc3RlclRvcEdyb3VwKHRvcEdyb3VwOiBHcm91cFByb2ZpbGUpOiB2b2lkO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDnrKwx6ZqO5bGk44GuIEdyb3VwIOOCkuWPluW+l1xyXG4gICAgICAgICAqIOOCs+ODlOODvOmFjeWIl+OBjOi/lOOBleOCjOOCi+OBn+OCgeOAgeOCr+ODqeOCpOOCouODs+ODiOOBr+OCreODo+ODg+OCt+ODpeS4jeWPr1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7R3JvdXBQcm9maWxlW119IEdyb3VwUHJvZmlsZSDphY3liJdcclxuICAgICAgICAgKi9cclxuICAgICAgICBnZXRUb3BHcm91cHMoKTogR3JvdXBQcm9maWxlW107XHJcblxyXG4gICAgICAgIC8vISDjgZnjgbnjgabjga7jgrDjg6vjg7zjg5fjgpLlsZXplosgKDHpmo7lsaQpXHJcbiAgICAgICAgZXhwYW5kQWxsKCk6IHZvaWQ7XHJcblxyXG4gICAgICAgIC8vISDjgZnjgbnjgabjga7jgrDjg6vjg7zjg5fjgpLlj47mnZ8gKDHpmo7lsaQpXHJcbiAgICAgICAgY29sbGFwc2VBbGwoZGVsYXk/OiBudW1iZXIpOiB2b2lkO1xyXG5cclxuICAgICAgICAvLyEg5bGV6ZaL5Lit44GL5Yik5a6aXHJcbiAgICAgICAgaXNFeHBhbmRpbmcoKTogYm9vbGVhbjtcclxuXHJcbiAgICAgICAgLy8hIOWPjuadn+S4reOBi+WIpOWumlxyXG4gICAgICAgIGlzQ29sbGFwc2luZygpOiBib29sZWFuO1xyXG5cclxuICAgICAgICAvLyEg6ZaL6ZaJ5Lit44GL5Yik5a6aXHJcbiAgICAgICAgaXNTd2l0Y2hpbmcoKTogYm9vbGVhbjtcclxuICAgIH1cclxuXHJcbiAgICAvL19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18vL1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGludGVyZmFjZSBFeHBhbmRhYmxlTGlzdFZpZXdcclxuICAgICAqIEBicmllZiDplovplonjg6rjgrnjg4jjg5Pjg6Xjg7zjgqTjg7Pjgr/jg7zjg5XjgqfjgqTjgrlcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJRXhwYW5kYWJsZUxpc3RWaWV3IGV4dGVuZHMgSUxpc3RWaWV3LCBJRXhwYW5kTWFuYWdlciB7IH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBpbnRlcmZhY2UgQmFzZUV4cGFuZGFibGVMaXN0Vmlld1xyXG4gICAgICogQGJyaWVmICAgICBJRXhwYW5kYWJsZUxpc3RWaWV3IOOBriBhbGlhc1xyXG4gICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIEJhc2VFeHBhbmRhYmxlTGlzdFZpZXcgZXh0ZW5kcyBJRXhwYW5kYWJsZUxpc3RWaWV3LCBCYWNrYm9uZS5WaWV3PEJhY2tib25lLk1vZGVsPiB7IH1cclxufVxyXG5cclxuZGVjbGFyZSBtb2R1bGUgXCJjZHAudWkubGlzdHZpZXdcIiB7XHJcbiAgICBjb25zdCBVSTogdHlwZW9mIENEUC5VSTtcclxuICAgIGV4cG9ydCA9IFVJO1xyXG59XHJcbiIsIm5hbWVzcGFjZSBDRFAuVUkge1xyXG4gICAgLyoqXHJcbiAgICAgKiBAY2xhc3MgTGlzdFZpZXdHbG9iYWxDb25maWdcclxuICAgICAqIEBicmllZiBjZHAudWkubGlzdHZpZXcg44GuIGdsb2JhbCBjb25maW5nXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBtb2R1bGUgTGlzdFZpZXdHbG9iYWxDb25maWcge1xyXG4gICAgICAgIGV4cG9ydCBsZXQgV1JBUFBFUl9DTEFTUyAgICAgICAgICAgICAgICA9IFwidWktbGlzdHZpZXctd3JhcHBlclwiO1xyXG4gICAgICAgIGV4cG9ydCBsZXQgV1JBUFBFUl9TRUxFQ1RPUiAgICAgICAgICAgICA9IFwiLlwiICsgV1JBUFBFUl9DTEFTUztcclxuICAgICAgICBleHBvcnQgbGV0IFNDUk9MTF9NQVBfQ0xBU1MgICAgICAgICAgICAgPSBcInVpLWxpc3R2aWV3LXNjcm9sbC1tYXBcIjtcclxuICAgICAgICBleHBvcnQgbGV0IFNDUk9MTF9NQVBfU0VMRUNUT1IgICAgICAgICAgPSBcIi5cIiArIFNDUk9MTF9NQVBfQ0xBU1M7XHJcbiAgICAgICAgZXhwb3J0IGxldCBJTkFDVElWRV9DTEFTUyAgICAgICAgICAgICAgID0gXCJpbmFjdGl2ZVwiO1xyXG4gICAgICAgIGV4cG9ydCBsZXQgSU5BQ1RJVkVfQ0xBU1NfU0VMRUNUT1IgICAgICA9IFwiLlwiICsgSU5BQ1RJVkVfQ0xBU1M7XHJcbiAgICAgICAgZXhwb3J0IGxldCBSRUNZQ0xFX0NMQVNTICAgICAgICAgICAgICAgID0gXCJ1aS1saXN0dmlldy1yZWN5Y2xlXCI7XHJcbiAgICAgICAgZXhwb3J0IGxldCBSRUNZQ0xFX0NMQVNTX1NFTEVDVE9SICAgICAgID0gXCIuXCIgKyBSRUNZQ0xFX0NMQVNTO1xyXG4gICAgICAgIGV4cG9ydCBsZXQgTElTVElURU1fQkFTRV9DTEFTUyAgICAgICAgICA9IFwidWktbGlzdHZpZXctaXRlbS1iYXNlXCI7XHJcbiAgICAgICAgZXhwb3J0IGxldCBMSVNUSVRFTV9CQVNFX0NMQVNTX1NFTEVDVE9SID0gXCIuXCIgKyBMSVNUSVRFTV9CQVNFX0NMQVNTO1xyXG4gICAgICAgIGV4cG9ydCBsZXQgREFUQV9QQUdFX0lOREVYICAgICAgICAgICAgICA9IFwiZGF0YS1wYWdlLWluZGV4XCI7XHJcbiAgICAgICAgZXhwb3J0IGxldCBEQVRBX0NPTlRBSU5FUl9JTkRFWCAgICAgICAgID0gXCJkYXRhLWNvbnRhaW5lci1pbmRleFwiO1xyXG4gICAgfVxyXG59XHJcbiIsIm5hbWVzcGFjZSBDRFAuVUkge1xyXG5cclxuICAgIC8vIGNkcC51aS5saXN0dmlldyDjga8gY2RwLmNvcmUg44Gr5L6d5a2Y44GX44Gq44GE44Gf44KB44CB54us6Ieq44GrZ2xvYmFsIOOCkuaPkOS+m+OBmeOCi1xyXG4gICAgLypqc2hpbnQgZXZpbDp0cnVlICovXHJcbiAgICBleHBvcnQgY29uc3QgZ2xvYmFsID0gKDxhbnk+Q0RQKS5nbG9iYWwgfHwgRnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpO1xyXG4gICAgLypqc2hpbnQgZXZpbDpmYWxzZSAqL1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQmFja2JvbmUuVmlldyDjga7mlrDopo/lkIjmiJBcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gYmFzZSAgICB7QmFja2JvbmUuVmlld30gICAgICAgICAgICAgICAgIFtpbl0gcHJvdG90eXBlIGNoYWluIOacgOS4i+S9jeOBriBWaWV3IOOCr+ODqeOCuVxyXG4gICAgICogQHBhcmFtIGRlcml2ZXMge0JhY2tib25lLlZpZXd8QmFja2JvbmUuVmlld1tdfSBbaW5dIOa0vueUn+OBleOCjOOCi+OBriBWaWV3IOOCr+ODqeOCuVxyXG4gICAgICogQHJldHVybiB7QmFja2JvbmUuVmlld3xCYWNrYm9uZS5WaWV3W119IOaWsOimj+OBq+eUn+aIkOOBleOCjOOBnyBWaWV3IOOBruOCs+ODs+OCueODiOODqeOCr+OCv1xyXG4gICAgICovXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gY29tcG9zZVZpZXdzKGJhc2U6IFZpZXdDb25zdHJ1Y3RvciwgZGVyaXZlczogVmlld0NvbnN0cnVjdG9yIHwgVmlld0NvbnN0cnVjdG9yW10pOiBWaWV3Q29uc3RydWN0b3Ige1xyXG4gICAgICAgIGxldCBfY29tcG9zZWQgPSBiYXNlO1xyXG4gICAgICAgIGNvbnN0IF9kZXJpdmVzID0gPFZpZXdDb25zdHJ1Y3RvcltdPihkZXJpdmVzIGluc3RhbmNlb2YgQXJyYXkgPyBkZXJpdmVzIDogW2Rlcml2ZXNdKTtcclxuICAgICAgICBfZGVyaXZlcy5mb3JFYWNoKChkZXJpdmUpID0+IHtcclxuICAgICAgICAgICAgY29uc3Qgc2VlZCA9IHt9O1xyXG4gICAgICAgICAgICBfLmV4dGVuZE93bihzZWVkLCBkZXJpdmUucHJvdG90eXBlKTtcclxuICAgICAgICAgICAgZGVsZXRlIHNlZWQuY29uc3RydWN0b3I7XHJcbiAgICAgICAgICAgIF9jb21wb3NlZCA9ICg8YW55Pl9jb21wb3NlZCkuZXh0ZW5kKHNlZWQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBfY29tcG9zZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBCYWNrYm9uZS5WaWV3IOOBruWQiOaIkFxyXG4gICAgICogcHJvdG90eXBlIGNoYWluIOOCkuS9nOOCi+WQiOaIkFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBkZXJpdmVkIHtCYWNrYm9uZS5WaWV3fSAgICAgICAgICAgICAgICAgW2luXSBwcm90b3R5cGUgY2hhaW4g5pyA5LiK5L2N44GuIFZpZXcg44Kv44Op44K5XHJcbiAgICAgKiBAcGFyYW0gYmFzZXMgICB7QmFja2JvbmUuVmlld3xCYWNrYm9uZS5WaWV3W119IFtpbl0g5ZCI5oiQ5YWD44GuVmlldyDjgq/jg6njgrlcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGRlcml2ZVZpZXdzKGRlcml2ZWQ6IFZpZXdDb25zdHJ1Y3RvciwgYmFzZXM6IFZpZXdDb25zdHJ1Y3RvciB8IFZpZXdDb25zdHJ1Y3RvcltdKTogdm9pZCB7XHJcbiAgICAgICAgbGV0IF9jb21wb3NlZDogVmlld0NvbnN0cnVjdG9yO1xyXG4gICAgICAgIGNvbnN0IF9iYXNlcyA9IDxWaWV3Q29uc3RydWN0b3JbXT4oYmFzZXMgaW5zdGFuY2VvZiBBcnJheSA/IGJhc2VzIDogW2Jhc2VzXSk7XHJcbiAgICAgICAgaWYgKDIgPD0gX2Jhc2VzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBfY29tcG9zZWQgPSBjb21wb3NlVmlld3MoX2Jhc2VzWzBdLCBfYmFzZXMuc2xpY2UoMSkpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIF9jb21wb3NlZCA9IF9iYXNlc1swXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZGVyaXZlZCA9IGNvbXBvc2VWaWV3cyhfY29tcG9zZWQsIGRlcml2ZWQpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQmFja2JvbmUuVmlldyDjga7lkIjmiJBcclxuICAgICAqIHByb3RvdHlwZSBjaGFpbiDjgpLkvZzjgonjgarjgYTlkIjmiJBcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gZGVyaXZlZCB7QmFja2JvbmUuVmlld30gICAgICAgICAgICAgICAgIFtpbl0g5YWD44Go44Gq44KLIFZpZXcg44Kv44Op44K5XHJcbiAgICAgKiBAcGFyYW0gYmFzZXMgICB7QmFja2JvbmUuVmlld3xCYWNrYm9uZS5WaWV3W119IFtpbl0g5ZCI5oiQ5YWD44GuVmlldyDjgq/jg6njgrlcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIG1peGluVmlld3MoZGVyaXZlZDogVmlld0NvbnN0cnVjdG9yLCBiYXNlczogVmlld0NvbnN0cnVjdG9yIHwgVmlld0NvbnN0cnVjdG9yW10pOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBfYmFzZXMgPSA8Vmlld0NvbnN0cnVjdG9yW10+KGJhc2VzIGluc3RhbmNlb2YgQXJyYXkgPyBiYXNlcyA6IFtiYXNlc10pO1xyXG4gICAgICAgIF9iYXNlcy5mb3JFYWNoKChiYXNlKSA9PiB7XHJcbiAgICAgICAgICAgIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGJhc2UucHJvdG90eXBlKS5mb3JFYWNoKG5hbWUgPT4ge1xyXG4gICAgICAgICAgICAgICAgZGVyaXZlZC5wcm90b3R5cGVbbmFtZV0gPSBiYXNlLnByb3RvdHlwZVtuYW1lXTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fLy9cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBjbGFzcyBfTGlzdFZpZXdVdGlsc1xyXG4gICAgICogQGJyaWVmIOWGhemDqOOBp+S9v+eUqOOBmeOCi+S+v+WIqemWouaVsFxyXG4gICAgICogICAgICAgIFRvb2xzIOOBi+OCieOBruacgOS9jumZkOOBrua1geeUqFxyXG4gICAgICovXHJcbiAgICBleHBvcnQgbW9kdWxlIF9MaXN0Vmlld1V0aWxzIHtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogY3NzIOOBriB2ZW5kZXIg5ouh5by1IHByZWZpeCDjgpLov5TjgZlcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge0FycmF5fSBwcmVmaXhcclxuICAgICAgICAgKi9cclxuICAgICAgICBleHBvcnQgY29uc3QgY3NzUHJlZml4ZXMgPSBbXCItd2Via2l0LVwiLCBcIi1tb3otXCIsIFwiLW1zLVwiLCBcIi1vLVwiLCBcIlwiXTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogY3NzIOOBriBtYXRyaXgg44Gu5YCk44KS5Y+W5b6XLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGVsZW1lbnQge2pRdWVyeX0gW2luXSDlr77osaHjga4galF1ZXJ5IOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICAgICAqIEBwYXJhbSB0eXBlICAgIHtTdHJpbmd9IFtpbl0gbWF0cml4IHR5cGUgc3RyaW5nIFt0cmFuc2xhdGVYIHwgdHJhbnNsYXRlWSB8IHNjYWxlWCB8IHNjYWxlWV1cclxuICAgICAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9IHZhbHVlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZXhwb3J0IGNvbnN0IGdldENzc01hdHJpeFZhbHVlID0gKGVsZW1lbnQ6IEpRdWVyeSwgdHlwZTogc3RyaW5nKTogbnVtYmVyID0+IHtcclxuICAgICAgICAgICAgbGV0IHRyYW5zWCA9IDA7XHJcbiAgICAgICAgICAgIGxldCB0cmFuc1kgPSAwO1xyXG4gICAgICAgICAgICBsZXQgc2NhbGVYID0gMDtcclxuICAgICAgICAgICAgbGV0IHNjYWxlWSA9IDA7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY3NzUHJlZml4ZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGxldCBtYXRyaXggPSAkKGVsZW1lbnQpLmNzcyhjc3NQcmVmaXhlc1tpXSArIFwidHJhbnNmb3JtXCIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG1hdHJpeCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzM2RNYXRyaXggPSBtYXRyaXguaW5kZXhPZihcIjNkXCIpICE9PSAtMSA/IHRydWUgOiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBtYXRyaXggPSBtYXRyaXgucmVwbGFjZShcIm1hdHJpeDNkXCIsIFwiXCIpLnJlcGxhY2UoXCJtYXRyaXhcIiwgXCJcIikucmVwbGFjZSgvW15cXGQuLC1dL2csIFwiXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFyciA9IG1hdHJpeC5zcGxpdChcIixcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNYID0gTnVtYmVyKGFycltpczNkTWF0cml4ID8gMTIgOiA0XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNZID0gTnVtYmVyKGFycltpczNkTWF0cml4ID8gMTMgOiA1XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2NhbGVYID0gTnVtYmVyKGFyclswXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2NhbGVZID0gTnVtYmVyKGFycltpczNkTWF0cml4ID8gNSA6IDNdKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJ0cmFuc2xhdGVYXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlzTmFOKHRyYW5zWCkgPyAwIDogdHJhbnNYO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcInRyYW5zbGF0ZVlcIjpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXNOYU4odHJhbnNZKSA/IDAgOiB0cmFuc1k7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwic2NhbGVYXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlzTmFOKHNjYWxlWCkgPyAxIDogc2NhbGVYO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcInNjYWxlWVwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpc05hTihzY2FsZVkpID8gMSA6IHNjYWxlWTtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcInRyYW5zaXRpb25lbmRcIiDjga7jgqTjg5njg7Pjg4jlkI3phY3liJfjgpLov5TjgZlcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge0FycmF5fSB0cmFuc2l0aW9uZW5kIOOCpOODmeODs+ODiOWQjVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGV4cG9ydCBjb25zdCB0cmFuc2l0aW9uRW5kID0gXCJ0cmFuc2l0aW9uZW5kIHdlYmtpdFRyYW5zaXRpb25FbmQgb1RyYW5zaXRpb25FbmQgTVNUcmFuc2l0aW9uRW5kXCI7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIHRyYW5zaXRpb24g6Kit5a6aXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBlbGVtZW50XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZXhwb3J0IGNvbnN0IHNldFRyYW5zZm9ybXNUcmFuc2l0aW9ucyA9IChlbGVtZW50OiBKUXVlcnksIHByb3A6IHN0cmluZywgbXNlYzogbnVtYmVyLCB0aW1pbmdGdW5jdGlvbjogc3RyaW5nKTogdm9pZCA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0ICRlbGVtZW50ID0gJChlbGVtZW50KTtcclxuICAgICAgICAgICAgY29uc3QgdHJhbnNpdGlvbnMgPSB7fTtcclxuICAgICAgICAgICAgY29uc3Qgc2Vjb25kID0gKG1zZWMgLyAxMDAwKSArIFwic1wiO1xyXG4gICAgICAgICAgICBjb25zdCBhbmltYXRpb24gPSBcIiBcIiArIHNlY29uZCArIFwiIFwiICsgdGltaW5nRnVuY3Rpb247XHJcbiAgICAgICAgICAgIGNvbnN0IHRyYW5zZm9ybSA9IFwiLCB0cmFuc2Zvcm1cIiArIGFuaW1hdGlvbjtcclxuXHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY3NzUHJlZml4ZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHRyYW5zaXRpb25zW2Nzc1ByZWZpeGVzW2ldICsgXCJ0cmFuc2l0aW9uXCJdID0gcHJvcCArIGFuaW1hdGlvbiArIHRyYW5zZm9ybTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgJGVsZW1lbnQuY3NzKHRyYW5zaXRpb25zKTtcclxuICAgICAgICB9O1xyXG5cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogdHJhbnNpdGlvbiDoqK3lrprjga7liYrpmaRcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IGVsZW1lbnRcclxuICAgICAgICAgKi9cclxuICAgICAgICBleHBvcnQgY29uc3QgY2xlYXJUcmFuc2l0aW9ucyA9IChlbGVtZW50OiBKUXVlcnkpOiB2b2lkID0+IHtcclxuICAgICAgICAgICAgY29uc3QgJGVsZW1lbnQgPSAkKGVsZW1lbnQpO1xyXG5cclxuICAgICAgICAgICAgJGVsZW1lbnQub2ZmKHRyYW5zaXRpb25FbmQpO1xyXG4gICAgICAgICAgICBjb25zdCB0cmFuc2l0aW9ucyA9IHt9O1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNzc1ByZWZpeGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uc1tjc3NQcmVmaXhlc1tpXSArIFwidHJhbnNpdGlvblwiXSA9IFwiXCI7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICRlbGVtZW50LmNzcyh0cmFuc2l0aW9ucyk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogTWF0aC5hYnMg44KI44KK44KC6auY6YCf44GqIGFic1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGV4cG9ydCBjb25zdCBhYnMgPSAoeDogbnVtYmVyKTogbnVtYmVyID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHggPj0gMCA/IHggOiAteDtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBNYXRoLm1heCDjgojjgorjgoLpq5jpgJ/jgaogbWF4XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZXhwb3J0IGNvbnN0IG1heCA9IChsaHM6IG51bWJlciwgcmhzOiBudW1iZXIpOiBudW1iZXIgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gbGhzID49IHJocyA/IGxocyA6IHJocztcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59XHJcbiIsIm5hbWVzcGFjZSBDRFAuVUkge1xyXG5cclxuICAgIGNvbnN0IFRBRyA9IFwiW0NEUC5VSS5TdGF0dXNNYW5hZ2VyXSBcIjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBjbGFzcyBTdGF0dXNNYW5hZ2VyXHJcbiAgICAgKiBAYnJpZWYgVUkg55So54q25oWL566h55CG44Kv44Op44K5XHJcbiAgICAgKiAgICAgICAgU3RhdHVzTWFuYWdlciDjga7jgqTjg7Pjgrnjgr/jg7PjgrnjgZTjgajjgavku7vmhI/jga7nirbmhYvnrqHnkIbjgYzjgafjgY3jgotcclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBjbGFzcyBTdGF0dXNNYW5hZ2VyIGltcGxlbWVudHMgSVN0YXR1c01hbmFnZXIge1xyXG5cclxuICAgICAgICBwcml2YXRlIF9zdGF0dXM6IGFueSA9IHt9OyAgICAvLyE8IHN0YXR1c1Njb3BlKCkg44Gr5L2/55So44GV44KM44KL54q25oWL566h55CG44Kq44OW44K444Kn44Kv44OIXHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gSW1wbGVtZW50czogSVN0YXR1c01hbmFnZXJcclxuXHJcbiAgICAgICAgLy8hIOeKtuaFi+WkieaVsOOBruWPgueFp+OCq+OCpuODs+ODiOOBruOCpOODs+OCr+ODquODoeODs+ODiFxyXG4gICAgICAgIHB1YmxpYyBzdGF0dXNBZGRSZWYoc3RhdHVzOiBzdHJpbmcpOiBudW1iZXIge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuX3N0YXR1c1tzdGF0dXNdKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zdGF0dXNbc3RhdHVzXSA9IDE7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zdGF0dXNbc3RhdHVzXSsrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zdGF0dXNbc3RhdHVzXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDnirbmhYvlpInmlbDjga7lj4Lnhafjgqvjgqbjg7Pjg4jjga7jg4fjgq/jg6rjg6Hjg7Pjg4hcclxuICAgICAgICBwdWJsaWMgc3RhdHVzUmVsZWFzZShzdGF0dXM6IHN0cmluZyk6IG51bWJlciB7XHJcbiAgICAgICAgICAgIGxldCByZXR2YWw6IG51bWJlcjtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLl9zdGF0dXNbc3RhdHVzXSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dmFsID0gMDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3N0YXR1c1tzdGF0dXNdLS07XHJcbiAgICAgICAgICAgICAgICByZXR2YWwgPSB0aGlzLl9zdGF0dXNbc3RhdHVzXTtcclxuICAgICAgICAgICAgICAgIGlmICgwID09PSByZXR2YWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5fc3RhdHVzW3N0YXR1c107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHJldHZhbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDlh6bnkIbjgrnjgrPjg7zjg5fmr47jgavnirbmhYvlpInmlbDjgpLoqK3lrppcclxuICAgICAgICBwdWJsaWMgc3RhdHVzU2NvcGUoc3RhdHVzOiBzdHJpbmcsIGNhbGxiYWNrOiAoKSA9PiB2b2lkIHwgUHJvbWlzZTxhbnk+KTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhdHVzQWRkUmVmKHN0YXR1cyk7XHJcbiAgICAgICAgICAgIGNvbnN0IHByb21pc2UgPSBjYWxsYmFjaygpO1xyXG4gICAgICAgICAgICBpZiAoIXByb21pc2UpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhdHVzUmVsZWFzZShzdGF0dXMpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcHJvbWlzZS50aGVuKFxyXG4gICAgICAgICAgICAgICAgICAgICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0dXNSZWxlYXNlKHN0YXR1cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdHVzUmVsZWFzZShzdGF0dXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDmjIflrprjgZfjgZ/nirbmhYvkuK3jgafjgYLjgovjgYvnorroqo1cclxuICAgICAgICBwdWJsaWMgaXNTdGF0dXNJbihzdGF0dXM6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICByZXR1cm4gISF0aGlzLl9zdGF0dXNbc3RhdHVzXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwibmFtZXNwYWNlIENEUC5VSSB7XHJcblxyXG4gICAgaW1wb3J0IF9Db25maWcgPSBDRFAuVUkuTGlzdFZpZXdHbG9iYWxDb25maWc7XHJcbiAgICBpbXBvcnQgX1Rvb2xDU1MgPSBDRFAuVUkuX0xpc3RWaWV3VXRpbHM7XHJcblxyXG4gICAgY29uc3QgVEFHID0gXCJbQ0RQLlVJLkxpbmVQcm9maWxlXSBcIjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBjbGFzcyBMaW5lUHJvZmlsZVxyXG4gICAgICogQGJyaWVmIDEg44Op44Kk44Oz44Gr6Zai44GZ44KL44OX44Ot44OV44Kh44Kk44Or44Kv44Op44K5XHJcbiAgICAgKiAgICAgICAgZnJhbWV3b3JrIOOBjOS9v+eUqOOBmeOCi1xyXG4gICAgICovXHJcbiAgICBleHBvcnQgY2xhc3MgTGluZVByb2ZpbGUge1xyXG4gICAgICAgIHByaXZhdGUgX2luZGV4OiBudW1iZXIgPSBudWxsOyAgICAgICAgICAgICAgLy8hPCBnbG9iYWwgaW5kZXhcclxuICAgICAgICBwcml2YXRlIF9wYWdlSW5kZXg6IG51bWJlciA9IG51bGw7ICAgICAgICAgIC8vITwg5omA5bGe44GZ44KLIHBhZ2UgaW5kZXhcclxuICAgICAgICBwcml2YXRlIF9vZmZzZXQ6IG51bWJlciA9IG51bGw7ICAgICAgICAgICAgIC8vITwgZ2xvYmFsIG9mZnNldFxyXG4gICAgICAgIHByaXZhdGUgXyRiYXNlOiBKUXVlcnkgPSBudWxsOyAgICAgICAgICAgICAgLy8hPCDlnJ/lj7DjgajjgarjgosgRE9NIOOCpOODs+OCueOCv+ODs+OCueOCkuagvOe0jVxyXG4gICAgICAgIHByaXZhdGUgX2luc3RhbmNlOiBCYXNlTGlzdEl0ZW1WaWV3ID0gbnVsbDsgLy8hPCBMaXN0SXRlbVZpZXcg44Kk44Oz44K544K/44Oz44K544KS5qC857SNXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIGNvbnN0cnVjdG9yXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gX293bmVyICAgICAgIHtJTGlzdFZpZXdGcmFtZXdvcmt9IFtpbl0g566h55CG6ICF44Gn44GC44KLIElMaXN0Vmlld0ZyYW1ld29yayDjgqTjg7Pjgrnjgr/jg7PjgrlcclxuICAgICAgICAgKiBAcGFyYW0gX2hlaWdodCAgICAgIHtOdW1iZXJ9ICAgICAgICAgICAgIFtpbl0g5Yid5pyf44Gu6auY44GVXHJcbiAgICAgICAgICogQHBhcmFtIF9pbml0aWFsaXplciB7RnVuY3Rpb259ICAgICAgICAgICBbaW5dIExpc3RJdGVtVmlldyDmtL7nlJ/jgq/jg6njgrnjga7jgrPjg7Pjgrnjg4jjg6njgq/jgr9cclxuICAgICAgICAgKiBAcGFyYW0gX2luZm8gICAgICAgIHtPYmplY3R9ICAgICAgICAgICAgIFtpbl0gTGlzdEl0ZW1WaWV3IOOCs+ODs+OCueODiOODqeOCr+OCv+OBq+a4oeOBleOCjOOCi+OCquODl+OCt+ODp+ODs1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgICAgICBwcml2YXRlIF9vd25lcjogSUxpc3RWaWV3RnJhbWV3b3JrLFxyXG4gICAgICAgICAgICBwcml2YXRlIF9oZWlnaHQ6IG51bWJlcixcclxuICAgICAgICAgICAgcHJpdmF0ZSBfaW5pdGlhbGl6ZXI6IG5ldyAob3B0aW9ucz86IGFueSkgPT4gQmFzZUxpc3RJdGVtVmlldyxcclxuICAgICAgICAgICAgcHJpdmF0ZSBfaW5mbzogYW55KSB7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIHB1YmxpYyBtZXRob2RzXHJcblxyXG4gICAgICAgIC8vISDmnInlirnljJZcclxuICAgICAgICBwdWJsaWMgYWN0aXZhdGUoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmIChudWxsID09IHRoaXMuX2luc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgb3B0aW9ucztcclxuICAgICAgICAgICAgICAgIHRoaXMuXyRiYXNlID0gdGhpcy5wcmVwYXJlQmFzZUVsZW1lbnQoKTtcclxuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSAkLmV4dGVuZCh7fSwge1xyXG4gICAgICAgICAgICAgICAgICAgIGVsOiB0aGlzLl8kYmFzZSxcclxuICAgICAgICAgICAgICAgICAgICBvd25lcjogdGhpcy5fb3duZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgbGluZVByb2ZpbGU6IHRoaXMsXHJcbiAgICAgICAgICAgICAgICB9LCB0aGlzLl9pbmZvKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2luc3RhbmNlID0gbmV3IHRoaXMuX2luaXRpYWxpemVyKG9wdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgaWYgKFwibm9uZVwiID09PSB0aGlzLl8kYmFzZS5jc3MoXCJkaXNwbGF5XCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fJGJhc2UuY3NzKFwiZGlzcGxheVwiLCBcImJsb2NrXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlUGFnZUluZGV4KHRoaXMuXyRiYXNlKTtcclxuICAgICAgICAgICAgaWYgKFwidmlzaWJsZVwiICE9PSB0aGlzLl8kYmFzZS5jc3MoXCJ2aXNpYmlsaXR5XCIpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl8kYmFzZS5jc3MoXCJ2aXNpYmlsaXR5XCIsIFwidmlzaWJsZVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOS4jeWPr+imluWMllxyXG4gICAgICAgIHB1YmxpYyBoaWRlKCk6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAobnVsbCA9PSB0aGlzLl9pbnN0YW5jZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hY3RpdmF0ZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChcImhpZGRlblwiICE9PSB0aGlzLl8kYmFzZS5jc3MoXCJ2aXNpYmlsaXR5XCIpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl8kYmFzZS5jc3MoXCJ2aXNpYmlsaXR5XCIsIFwiaGlkZGVuXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg54Sh5Yq55YyWXHJcbiAgICAgICAgcHVibGljIGluYWN0aXZhdGUoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmIChudWxsICE9IHRoaXMuX2luc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyB4cGVyaWEgQVggSmVsbHkgQmVhbiAoNC4xLjIp44Gr44Gm44CBIGhpZGRlbiBlbGVtZW50IOOBruWJiumZpOOBp+ODoeODouODquODvOODquODvOOCr+OBmeOCi+OBn+OCgeWPr+imluWMluOBmeOCi+OAglxyXG4gICAgICAgICAgICAgICAgaWYgKFwidmlzaWJsZVwiICE9PSB0aGlzLl8kYmFzZS5jc3MoXCJ2aXNpYmlsaXR5XCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fJGJhc2UuY3NzKFwidmlzaWJpbGl0eVwiLCBcInZpc2libGVcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9pbnN0YW5jZS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2luc3RhbmNlID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIHRoaXMuXyRiYXNlLmFkZENsYXNzKF9Db25maWcuUkVDWUNMRV9DTEFTUyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl8kYmFzZS5jc3MoXCJkaXNwbGF5XCIsIFwibm9uZVwiKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuXyRiYXNlID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOabtOaWsFxyXG4gICAgICAgIHB1YmxpYyByZWZyZXNoKCk6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAobnVsbCAhPSB0aGlzLl9pbnN0YW5jZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5faW5zdGFuY2UucmVuZGVyKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDmnInlirnnhKHlirnliKTlrppcclxuICAgICAgICBwdWJsaWMgaXNBY3RpdmUoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsICE9IHRoaXMuX2luc3RhbmNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOmrmOOBleaDheWgseOBruabtOaWsC4gTGlzdEl0ZW1WaWV3IOOBi+OCieOCs+ODvOODq+OBleOCjOOCi+OAglxyXG4gICAgICAgIHB1YmxpYyB1cGRhdGVIZWlnaHQobmV3SGVpZ2h0OiBudW1iZXIsIG9wdGlvbnM/OiBVcGRhdGVIZWlnaHRPcHRpb25zKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRlbHRhID0gbmV3SGVpZ2h0IC0gdGhpcy5faGVpZ2h0O1xyXG4gICAgICAgICAgICB0aGlzLl9oZWlnaHQgPSBuZXdIZWlnaHQ7XHJcbiAgICAgICAgICAgIHRoaXMuX293bmVyLnVwZGF0ZVNjcm9sbE1hcEhlaWdodChkZWx0YSk7XHJcbiAgICAgICAgICAgIGlmIChudWxsICE9IG9wdGlvbnMgJiYgb3B0aW9ucy5yZWZsZWN0QWxsKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9vd25lci51cGRhdGVQcm9maWxlcyh0aGlzLl9pbmRleCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISB6LWluZGV4IOOBruODquOCu+ODg+ODiC4gU2Nyb2xsTWFuYWdlci5yZW1vdmVJdGVtKCkg44GL44KJ44Kz44O844Or44GV44KM44KL44CCXHJcbiAgICAgICAgcHVibGljIHJlc2V0RGVwdGgoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmIChudWxsICE9IHRoaXMuX2luc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl8kYmFzZS5jc3MoXCJ6LWluZGV4XCIsIHRoaXMuX293bmVyLmdldExpc3RWaWV3T3B0aW9ucygpLmJhc2VEZXB0aCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gZ2V0dGVyL3NldHRlciBtZXRob2RzXHJcblxyXG4gICAgICAgIC8vISBnZXR0ZXI6IOODqeOCpOODs+OBrumrmOOBlVxyXG4gICAgICAgIHB1YmxpYyBnZXQgaGVpZ2h0KCk6IG51bWJlciB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9oZWlnaHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgZ2V0dGVyOiBnbG9iYWwgaW5kZXhcclxuICAgICAgICBwdWJsaWMgZ2V0IGluZGV4KCk6IG51bWJlciB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9pbmRleDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISBzZXR0ZXI6IGdsb2JhbCBpbmRleFxyXG4gICAgICAgIHB1YmxpYyBzZXQgaW5kZXgoaW5kZXg6IG51bWJlcikge1xyXG4gICAgICAgICAgICB0aGlzLl9pbmRleCA9IGluZGV4O1xyXG4gICAgICAgICAgICBpZiAobnVsbCAhPSB0aGlzLl8kYmFzZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVJbmRleCh0aGlzLl8kYmFzZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISBnZXR0ZXI6IOaJgOWxnuODmuODvOOCuCBpbmRleFxyXG4gICAgICAgIHB1YmxpYyBnZXQgcGFnZUluZGV4KCk6IG51bWJlciB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9wYWdlSW5kZXg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgc2V0dGVyOiDmiYDlsZ7jg5rjg7zjgrggaW5kZXhcclxuICAgICAgICBwdWJsaWMgc2V0IHBhZ2VJbmRleChpbmRleDogbnVtYmVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3BhZ2VJbmRleCA9IGluZGV4O1xyXG4gICAgICAgICAgICBpZiAobnVsbCAhPSB0aGlzLl8kYmFzZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVQYWdlSW5kZXgodGhpcy5fJGJhc2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgZ2V0dGVyOiBsaW5lIG9mZnNldFxyXG4gICAgICAgIHB1YmxpYyBnZXQgb2Zmc2V0KCk6IG51bWJlciB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9vZmZzZXQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgc2V0dGVyOiBsaW5lIG9mZnNldFxyXG4gICAgICAgIHB1YmxpYyBzZXQgb2Zmc2V0KG9mZnNldDogbnVtYmVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX29mZnNldCA9IG9mZnNldDtcclxuICAgICAgICAgICAgaWYgKG51bGwgIT0gdGhpcy5fJGJhc2UpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlT2Zmc2V0KHRoaXMuXyRiYXNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIGdldHRlcjogaW5mb1xyXG4gICAgICAgIHB1YmxpYyBnZXQgaW5mbygpOiBhbnkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5faW5mbztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gcHJpdmF0ZSBtZXRob2RzXHJcblxyXG4gICAgICAgIC8vISBCYXNlIGpRdWVyeSDjgqrjg5bjgrjjgqfjgq/jg4jjga7nlJ/miJBcclxuICAgICAgICBwcml2YXRlIHByZXBhcmVCYXNlRWxlbWVudCgpOiBKUXVlcnkge1xyXG4gICAgICAgICAgICBsZXQgJGJhc2U6IEpRdWVyeTtcclxuICAgICAgICAgICAgY29uc3QgJG1hcCA9IHRoaXMuX293bmVyLmdldFNjcm9sbE1hcEVsZW1lbnQoKTtcclxuICAgICAgICAgICAgY29uc3QgJHJlY3ljbGUgPSB0aGlzLl9vd25lci5maW5kUmVjeWNsZUVsZW1lbnRzKCkuZmlyc3QoKTtcclxuICAgICAgICAgICAgY29uc3QgaXRlbVRhZ05hbWUgPSB0aGlzLl9vd25lci5nZXRMaXN0Vmlld09wdGlvbnMoKS5pdGVtVGFnTmFtZTtcclxuXHJcbiAgICAgICAgICAgIGlmIChudWxsICE9IHRoaXMuXyRiYXNlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oVEFHICsgXCJ0aGlzLl8kYmFzZSBpcyBub3QgbnVsbC5cIik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fJGJhc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICgwIDwgJHJlY3ljbGUubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAkYmFzZSA9ICRyZWN5Y2xlO1xyXG4gICAgICAgICAgICAgICAgJGJhc2UucmVtb3ZlQXR0cihcInotaW5kZXhcIik7XHJcbiAgICAgICAgICAgICAgICAkYmFzZS5yZW1vdmVDbGFzcyhfQ29uZmlnLlJFQ1lDTEVfQ0xBU1MpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJGJhc2UgPSAkKFwiPFwiICsgaXRlbVRhZ05hbWUgKyBcIiBjbGFzcz0nXCIgKyBfQ29uZmlnLkxJU1RJVEVNX0JBU0VfQ0xBU1MgKyBcIic+PC9cIiArIGl0ZW1UYWdOYW1lICsgXCI+XCIpO1xyXG4gICAgICAgICAgICAgICAgJGJhc2UuY3NzKFwiZGlzcGxheVwiLCBcIm5vbmVcIik7XHJcbiAgICAgICAgICAgICAgICAkbWFwLmFwcGVuZCgkYmFzZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIOmrmOOBleOBruabtOaWsFxyXG4gICAgICAgICAgICBpZiAoJGJhc2UuaGVpZ2h0KCkgIT09IHRoaXMuX2hlaWdodCkge1xyXG4gICAgICAgICAgICAgICAgJGJhc2UuaGVpZ2h0KHRoaXMuX2hlaWdodCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIGluZGV4IOOBruioreWumlxyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUluZGV4KCRiYXNlKTtcclxuICAgICAgICAgICAgLy8gb2Zmc2V0IOOBruabtOaWsFxyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZU9mZnNldCgkYmFzZSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gJGJhc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgZ2xvYmFsIGluZGV4IOOBruabtOaWsFxyXG4gICAgICAgIHByaXZhdGUgdXBkYXRlSW5kZXgoJGJhc2U6IEpRdWVyeSk6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAoJGJhc2UuYXR0cihfQ29uZmlnLkRBVEFfQ09OVEFJTkVSX0lOREVYKSAhPT0gdGhpcy5faW5kZXgudG9TdHJpbmcoKSkge1xyXG4gICAgICAgICAgICAgICAgJGJhc2UuYXR0cihfQ29uZmlnLkRBVEFfQ09OVEFJTkVSX0lOREVYLCB0aGlzLl9pbmRleC50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIHBhZ2UgaW5kZXgg44Gu5pu05pawXHJcbiAgICAgICAgcHJpdmF0ZSB1cGRhdGVQYWdlSW5kZXgoJGJhc2U6IEpRdWVyeSk6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAoJGJhc2UuYXR0cihfQ29uZmlnLkRBVEFfUEFHRV9JTkRFWCkgIT09IHRoaXMuX3BhZ2VJbmRleC50b1N0cmluZygpKSB7XHJcbiAgICAgICAgICAgICAgICAkYmFzZS5hdHRyKF9Db25maWcuREFUQV9QQUdFX0lOREVYLCB0aGlzLl9wYWdlSW5kZXgudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISBvZmZzZXQg44Gu5pu05pawXHJcbiAgICAgICAgcHJpdmF0ZSB1cGRhdGVPZmZzZXQoJGJhc2U6IEpRdWVyeSk6IHZvaWQge1xyXG4gICAgICAgICAgICBjb25zdCB0cmFuc2Zvcm0gPSB7fTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX293bmVyLmdldExpc3RWaWV3T3B0aW9ucygpLmVuYWJsZVRyYW5zZm9ybU9mZnNldCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKF9Ub29sQ1NTLmdldENzc01hdHJpeFZhbHVlKCRiYXNlLCBcInRyYW5zbGF0ZVlcIikgIT09IHRoaXMuX29mZnNldCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgX1Rvb2xDU1MuY3NzUHJlZml4ZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtW19Ub29sQ1NTLmNzc1ByZWZpeGVzW2ldICsgXCJ0cmFuc2Zvcm1cIl0gPSBcInRyYW5zbGF0ZTNkKDBweCxcIiArIHRoaXMuX29mZnNldCArIFwicHgsMHB4KVwiO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAkYmFzZS5jc3ModHJhbnNmb3JtKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChwYXJzZUludCgkYmFzZS5jc3MoXCJ0b3BcIiksIDEwKSAhPT0gdGhpcy5fb2Zmc2V0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJGJhc2UuY3NzKFwidG9wXCIsIHRoaXMuX29mZnNldCArIFwicHhcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwibmFtZXNwYWNlIENEUC5VSSB7XHJcblxyXG4gICAgY29uc3QgVEFHID0gXCJbQ0RQLlVJLlBhZ2VQcm9maWxlXSBcIjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBjbGFzcyBQYWdlUHJvZmlsZVxyXG4gICAgICogQGJyaWVmIDEg44Oa44O844K444Gr6Zai44GZ44KL44OX44Ot44OV44Kh44Kk44Or44Kv44Op44K5XHJcbiAgICAgKiAgICAgICAgZnJhbWV3b3JrIOOBjOS9v+eUqOOBmeOCi1xyXG4gICAgICogICAgICAgIOacrOOCr+ODqeOCueOBp+OBr+ebtOaOpSBET00g44KS5pON5L2c44GX44Gm44Gv44GE44GR44Gq44GEXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBjbGFzcyBQYWdlUHJvZmlsZSB7XHJcbiAgICAgICAgcHJpdmF0ZSBfaW5kZXg6IG51bWJlciA9IDA7ICAgICAgICAgICAgIC8vITwgcGFnZSBpbmRleFxyXG4gICAgICAgIHByaXZhdGUgX29mZnNldDogbnVtYmVyID0gMDsgICAgICAgICAgICAvLyE8IHBhZ2Ug44GuIFRvcCDjgYvjgonjga7jgqrjg5Xjgrvjg4Pjg4hcclxuICAgICAgICBwcml2YXRlIF9oZWlnaHQ6IG51bWJlciA9IDA7ICAgICAgICAgICAgLy8hPCBwYWdlIOOBrumrmOOBlVxyXG4gICAgICAgIHByaXZhdGUgX2xpbmVzOiBMaW5lUHJvZmlsZVtdID0gW107ICAgICAvLyE8IHBhZ2Ug5YaF44Gn566h55CG44GV44KM44KLIExpbmVQcm9maWxlXHJcbiAgICAgICAgcHJpdmF0ZSBfc3RhdHVzOiBzdHJpbmcgPSBcImluYWN0aXZlXCI7ICAgLy8hPCBwYWdlIOOBrueKtuaFiyBbIGluYWN0aXZlIHwgaGlkZGVuIHwgYWN0aXZlIF1cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBwdWJsaWMgbWV0aG9kc1xyXG5cclxuICAgICAgICAvLyEg5pyJ5Yq55YyWXHJcbiAgICAgICAgcHVibGljIGFjdGl2YXRlKCk6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAoXCJhY3RpdmVcIiAhPT0gdGhpcy5fc3RhdHVzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9saW5lcy5mb3JFYWNoKChsaW5lOiBMaW5lUHJvZmlsZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxpbmUuYWN0aXZhdGUoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuX3N0YXR1cyA9IFwiYWN0aXZlXCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg54Sh5Y+v6KaW5YyWXHJcbiAgICAgICAgcHVibGljIGhpZGUoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmIChcImhpZGRlblwiICE9PSB0aGlzLl9zdGF0dXMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2xpbmVzLmZvckVhY2goKGxpbmU6IExpbmVQcm9maWxlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGluZS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLl9zdGF0dXMgPSBcImhpZGRlblwiO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOeEoeWKueWMllxyXG4gICAgICAgIHB1YmxpYyBpbmFjdGl2YXRlKCk6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAoXCJpbmFjdGl2ZVwiICE9PSB0aGlzLl9zdGF0dXMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2xpbmVzLmZvckVhY2goKGxpbmU6IExpbmVQcm9maWxlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGluZS5pbmFjdGl2YXRlKCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLl9zdGF0dXMgPSBcImluYWN0aXZlXCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgTGluZVByb2ZpbGUg44KS6Kit5a6aXHJcbiAgICAgICAgcHVibGljIHB1c2gobGluZTogTGluZVByb2ZpbGUpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5fbGluZXMucHVzaChsaW5lKTtcclxuICAgICAgICAgICAgdGhpcy5faGVpZ2h0ICs9IGxpbmUuaGVpZ2h0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOmFjeS4i+OBriBMaW5lUHJvZmlsZSDjgZnjgbnjgabjgYzmnInlirnjgafjgarjgYTloLTlkIjjgIFQYWdlIOOCueODhuODvOOCv+OCueOCkueEoeWKueOBq+OBmeOCi1xyXG4gICAgICAgIHB1YmxpYyBub3JtYWxpemUoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVuYWJsZUFsbCA9IF8uZXZlcnkodGhpcy5fbGluZXMsIChsaW5lOiBMaW5lUHJvZmlsZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGxpbmUuaXNBY3RpdmUoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmICghZW5hYmxlQWxsKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zdGF0dXMgPSBcImluYWN0aXZlXCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISBMaW5lUHJvZmlsZSDjgpLlj5blvpdcclxuICAgICAgICBwdWJsaWMgZ2V0TGluZVByb2ZpbGUoaW5kZXg6IG51bWJlcik6IExpbmVQcm9maWxlIHtcclxuICAgICAgICAgICAgaWYgKDAgPD0gaW5kZXggJiYgaW5kZXggPCB0aGlzLl9saW5lcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9saW5lc1tpbmRleF07XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOacgOWIneOBriBMaW5lUHJvZmlsZSDjgpLlj5blvpdcclxuICAgICAgICBwdWJsaWMgZ2V0TGluZVByb2ZpbGVGaXJzdCgpOiBMaW5lUHJvZmlsZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldExpbmVQcm9maWxlKDApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOacgOW+jOOBriBMaW5lUHJvZmlsZSDjgpLlj5blvpdcclxuICAgICAgICBwdWJsaWMgZ2V0TGluZVByb2ZpbGVMYXN0KCk6IExpbmVQcm9maWxlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TGluZVByb2ZpbGUodGhpcy5fbGluZXMubGVuZ3RoIC0gMSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIGdldHRlci9zZXR0ZXIgbWV0aG9kc1xyXG5cclxuICAgICAgICAvLyEgZ2V0dGVyOiBwYWdlIGluZGV4XHJcbiAgICAgICAgcHVibGljIGdldCBpbmRleCgpOiBudW1iZXIge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5faW5kZXg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgc2V0dGVyOiBwYWdlIGluZGV4XHJcbiAgICAgICAgcHVibGljIHNldCBpbmRleChpbmRleDogbnVtYmVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2luZGV4ID0gaW5kZXg7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgZ2V0dGVyOiBwYWdlIG9mZnNldFxyXG4gICAgICAgIHB1YmxpYyBnZXQgb2Zmc2V0KCk6IG51bWJlciB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9vZmZzZXQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgc2V0dGVyOiBwYWdlIG9mZnNldFxyXG4gICAgICAgIHB1YmxpYyBzZXQgb2Zmc2V0KG9mZnNldDogbnVtYmVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX29mZnNldCA9IG9mZnNldDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISBnZXR0ZXI6IOWun+mam+OBq+ODmuODvOOCuOOBq+WJsuOCiuW9k+OBpuOCieOCjOOBpuOBhOOCi+mrmOOBlVxyXG4gICAgICAgIHB1YmxpYyBnZXQgaGVpZ2h0KCk6IG51bWJlciB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9oZWlnaHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgZ2V0dGVyOiDnirbmhYvlj5blvpdcclxuICAgICAgICBwdWJsaWMgZ2V0IHN0YXR1cygpOiBzdHJpbmcge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc3RhdHVzO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJuYW1lc3BhY2UgQ0RQLlVJIHtcclxuXHJcbiAgICBjb25zdCBUQUcgPSBcIltDRFAuVUkuR3JvdXBQcm9maWxlXSBcIjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBjbGFzcyBHcm91cFByb2ZpbGVcclxuICAgICAqIEBicmllZiDjg6njgqTjg7PjgpLjgrDjg6vjg7zjg5fnrqHnkIbjgZnjgovjg5fjg63jg5XjgqHjgqTjg6vjgq/jg6njgrlcclxuICAgICAqICAgICAgICDmnKzjgq/jg6njgrnjgafjga/nm7TmjqUgRE9NIOOCkuaTjeS9nOOBl+OBpuOBr+OBhOOBkeOBquOBhFxyXG4gICAgICovXHJcbiAgICBleHBvcnQgY2xhc3MgR3JvdXBQcm9maWxlIHtcclxuICAgICAgICBwcml2YXRlIF9wYXJlbnQ6IEdyb3VwUHJvZmlsZSA9IG51bGw7ICAgICAgIC8vITwg6KaqIEdyb3VwUHJvZmlsZSDjgqTjg7Pjgrnjgr/jg7PjgrlcclxuICAgICAgICBwcml2YXRlIF9jaGlsZHJlbjogR3JvdXBQcm9maWxlW10gPSBbXTsgICAgIC8vITwg5a2QIEdyb3VwUHJvZmlsZSDjgqTjg7Pjgrnjgr/jg7PjgrlcclxuICAgICAgICBwcml2YXRlIF9leHBhbmRlZDogYm9vbGVhbiA9IGZhbHNlOyAgICAgICAgIC8vITwg6ZaL6ZaJ5oOF5aCxXHJcbiAgICAgICAgcHJpdmF0ZSBfc3RhdHVzOiBzdHJpbmcgPSBcInVucmVnaXN0ZXJlZFwiOyAgIC8vITwgX293bmVyIOOBuOOBrueZu+mMsueKtuaFiyBbIHVucmVnaXN0ZXJlZCB8IHJlZ2lzdGVyZWQgXVxyXG4gICAgICAgIHByaXZhdGUgX21hcExpbmVzID0ge307ICAgICAgICAgICAgICAgICAgICAgLy8hPCDoh6rouqvjgYznrqHovYTjgZnjgosgTGluZVByb2ZpbGUg44KSIGtleSDjgajjgajjgoLjgavmoLzntI1cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBMQVlPVVRfS0VZX0RFRkFVTFQgPSBcIi1sYXlvdXQtZGVmYXVsdFwiO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBjb25zdHJ1Y3RvclxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIF9pZCAgICB7U3RyaW5nfSAgICAgICAgICAgICBbaW5dIEdyb3VwUHJvZmlsZSDjga4gSURcclxuICAgICAgICAgKiBAcGFyYW0gX293bmVyIHtFeHBhbmRhYmxlTGlzdFZpZXd9IFtpbl0g566h55CG6ICF44Gn44GC44KLIEV4cGFuZGFibGVMaXN0VmlldyDjgqTjg7Pjgrnjgr/jg7PjgrlcclxuICAgICAgICAgKi9cclxuICAgICAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIF9pZDogc3RyaW5nLCBwcml2YXRlIF9vd25lcjogQmFzZUV4cGFuZGFibGVMaXN0Vmlldykge1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBwdWJsaWMgbWV0aG9kXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOacrCBHcm91cFByb2ZpbGUg44GM566h55CG44GZ44KLIExpc3Qg44KS5L2c5oiQ44GX44Gm55m76YyyXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gaGVpZ2h0ICAgICAge051bWJlcn0gICBbaW5dIOODqeOCpOODs+OBrumrmOOBlVxyXG4gICAgICAgICAqIEBwYXJhbSBpbml0aWFsaXplciB7RnVuY3Rpb259IFtpbl0gTGlzdEl0ZW1WaWV3IOa0vueUn+OCr+ODqeOCueOBruOCs+ODs+OCueODiOODqeOCr+OCv1xyXG4gICAgICAgICAqIEBwYXJhbSBpbmZvICAgICAgICB7T2JqZWN0fSAgIFtpbl0gaW5pdGlhbGl6ZXIg44Gr5rih44GV44KM44KL44Kq44OX44K344On44Oz5byV5pWwXHJcbiAgICAgICAgICogQHBhcmFtIGxheW91dEtleSAgIHtTdHJpbmd9ICAgW2luXSBsYXlvdXQg5q+O44Gr5L2/55So44GZ44KL6K2Y5Yil5a2QICjjgqrjg5fjgrfjg6fjg4rjg6spXHJcbiAgICAgICAgICogQHJldHVybiB7R3JvdXBQcm9maWxlfSDmnKzjgqTjg7Pjgrnjgr/jg7PjgrlcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgYWRkSXRlbShcclxuICAgICAgICAgICAgaGVpZ2h0OiBudW1iZXIsXHJcbiAgICAgICAgICAgIGluaXRpYWxpemVyOiBuZXcgKG9wdGlvbnM/OiBhbnkpID0+IEJhc2VMaXN0SXRlbVZpZXcsXHJcbiAgICAgICAgICAgIGluZm86IGFueSxcclxuICAgICAgICAgICAgbGF5b3V0S2V5Pzogc3RyaW5nXHJcbiAgICAgICAgKTogR3JvdXBQcm9maWxlIHtcclxuICAgICAgICAgICAgbGV0IGxpbmU6IExpbmVQcm9maWxlO1xyXG4gICAgICAgICAgICBjb25zdCBvcHRpb25zID0gJC5leHRlbmQoe30sIHsgZ3JvdXBQcm9maWxlOiB0aGlzIH0sIGluZm8pO1xyXG5cclxuICAgICAgICAgICAgaWYgKG51bGwgPT0gbGF5b3V0S2V5KSB7XHJcbiAgICAgICAgICAgICAgICBsYXlvdXRLZXkgPSBHcm91cFByb2ZpbGUuTEFZT1VUX0tFWV9ERUZBVUxUO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChudWxsID09IHRoaXMuX21hcExpbmVzW2xheW91dEtleV0pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX21hcExpbmVzW2xheW91dEtleV0gPSBbXTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbGluZSA9IG5ldyBMaW5lUHJvZmlsZSh0aGlzLl9vd25lci5jb3JlLCBNYXRoLmZsb29yKGhlaWdodCksIGluaXRpYWxpemVyLCBvcHRpb25zKTtcclxuXHJcbiAgICAgICAgICAgIC8vIF9vd25lciDjga7nrqHnkIbkuIvjgavjgYLjgovjgajjgY3jga/pgJ/jgoTjgYvjgavov73liqBcclxuICAgICAgICAgICAgaWYgKChcInJlZ2lzdGVyZWRcIiA9PT0gdGhpcy5fc3RhdHVzKSAmJlxyXG4gICAgICAgICAgICAgICAgKG51bGwgPT0gdGhpcy5fb3duZXIubGF5b3V0S2V5IHx8IGxheW91dEtleSA9PT0gdGhpcy5fb3duZXIubGF5b3V0S2V5KSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fb3duZXIuX2FkZExpbmUobGluZSwgdGhpcy5nZXRMYXN0TGluZUluZGV4KCkgKyAxKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX293bmVyLnVwZGF0ZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuX21hcExpbmVzW2xheW91dEtleV0ucHVzaChsaW5lKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDlrZAgR3JvdXAg44KS6L+95YqgXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gdGFyZ2V0IHtHcm91cFByb2ZpbGV8R3JvdXBQcm9maWxlW119IFtpbl0gR3JvdXBQcm9maWxlIOOCpOODs+OCueOCv+ODs+OCuVxyXG4gICAgICAgICAqIEByZXR1cm4ge0dyb3VwUHJvZmlsZX0g5pys44Kk44Oz44K544K/44Oz44K5XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIGFkZENoaWxkcmVuKHRhcmdldDogR3JvdXBQcm9maWxlKTogR3JvdXBQcm9maWxlO1xyXG4gICAgICAgIHB1YmxpYyBhZGRDaGlsZHJlbih0YXJnZXQ6IEdyb3VwUHJvZmlsZVtdKTogR3JvdXBQcm9maWxlO1xyXG4gICAgICAgIHB1YmxpYyBhZGRDaGlsZHJlbih0YXJnZXQ6IGFueSk6IEdyb3VwUHJvZmlsZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkcmVuOiBHcm91cFByb2ZpbGVbXSA9ICh0YXJnZXQgaW5zdGFuY2VvZiBBcnJheSkgPyB0YXJnZXQgOiBbdGFyZ2V0XTtcclxuICAgICAgICAgICAgY2hpbGRyZW4uZm9yRWFjaCgoY2hpbGQpID0+IHtcclxuICAgICAgICAgICAgICAgIGNoaWxkLnNldFBhcmVudCh0aGlzKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuX2NoaWxkcmVuID0gdGhpcy5fY2hpbGRyZW4uY29uY2F0KGNoaWxkcmVuKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDopqogR3JvdXBQcm9maWxlIOOCkuWPluW+l1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7R3JvdXBQcm9maWxlfSBHcm91cFByb2ZpbGUg6KaqIOOCpOODs+OCueOCv+ODs+OCuVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBnZXRQYXJlbnQoKTogR3JvdXBQcm9maWxlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3BhcmVudDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOWtkCBHcm91cFByb2ZpbGUg44KS5Y+W5b6XXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHtHcm91cFByb2ZpbGVbXX0gR3JvdXBQcm9maWxlIOWtkCDjgqTjg7Pjgrnjgr/jg7PjgrnphY3liJdcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgZ2V0Q2hpbGRyZW4oKTogR3JvdXBQcm9maWxlW10ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY2hpbGRyZW47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDlrZAgR3JvdXAg44KS5oyB44Gj44Gm44GE44KL44GL5Yik5a6aXHJcbiAgICAgICAgICogbGF5b3V0S2V5IOOBjOaMh+WumuOBleOCjOOCjOOBsOOAgWxheW91dCDjga7nirbmhYvjgb7jgafliKTlrppcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBsYXlvdXRLZXkge1N0cmluZ30gW2luXSBsYXlvdXQg5q+O44Gr5L2/55So44GZ44KL6K2Y5Yil5a2QICjjgqrjg5fjgrfjg6fjg4rjg6spXHJcbiAgICAgICAgICogQHJldHVybiB7Qm9vbGVhbn0gdHJ1ZTog5pyJLCBmYWxzZTog54ShXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIGhhc0NoaWxkcmVuKGxheW91dEtleT86IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fY2hpbGRyZW4ubGVuZ3RoIDw9IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChudWxsICE9IGxheW91dEtleSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NoaWxkcmVuWzBdLmhhc0xheW91dEtleU9mKGxheW91dEtleSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogbGF5b3V0IOOBrueKtuaFi+OCkuWIpOWumlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGxheW91dEtleSB7U3RyaW5nfSBbaW5dIGxheW91dCDmr47jgavkvb/nlKjjgZnjgovorZjliKXlrZBcclxuICAgICAgICAgKiBAcmV0dXJuIHtCb29sZWFufSB0cnVlOiDmnIksIGZhbHNlOiDnhKFcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgaGFzTGF5b3V0S2V5T2YobGF5b3V0S2V5OiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgaWYgKG51bGwgPT0gbGF5b3V0S2V5KSB7XHJcbiAgICAgICAgICAgICAgICBsYXlvdXRLZXkgPSBHcm91cFByb2ZpbGUuTEFZT1VUX0tFWV9ERUZBVUxUO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiAobnVsbCAhPSB0aGlzLl9tYXBMaW5lc1tsYXlvdXRLZXldKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOOCsOODq+ODvOODl+WxlemWi1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBleHBhbmQoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGxldCBsaW5lczogTGluZVByb2ZpbGVbXSA9IFtdO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fbGluZXMubGVuZ3RoIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFRBRyArIFwidGhpcyBncm91cCBoYXMgbm8gbGluZXMuXCIpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLmhhc0NoaWxkcmVuKCkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihUQUcgKyBcInRoaXMgZ3JvdXAgaGFzIG5vIGNoaWxkcmVuLlwiKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICghdGhpcy5pc0V4cGFuZGVkKCkpIHtcclxuICAgICAgICAgICAgICAgIGxpbmVzID0gdGhpcy5xdWVyeU9wZXJhdGlvblRhcmdldChcInJlZ2lzdGVyZWRcIik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9leHBhbmRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBpZiAoMCA8IGxpbmVzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX293bmVyLnN0YXR1c1Njb3BlKFwiZXhwYW5kaW5nXCIsICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g6Ieq6Lqr44KS5pu05pawXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2xpbmVzLmZvckVhY2goKGxpbmU6IExpbmVQcm9maWxlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5lLnJlZnJlc2goKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOmFjeS4i+OCkuabtOaWsFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9vd25lci5fYWRkTGluZShsaW5lcywgdGhpcy5nZXRMYXN0TGluZUluZGV4KCkgKyAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fb3duZXIudXBkYXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOOCsOODq+ODvOODl+WPjuadn1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGRlbGF5IHtOdW1iZXJ9IFtpbl0g6KaB57Sg5YmK6Zmk44Gr6LK744KE44GZ6YGF5bu25pmC6ZaTLiDml6Llrpo6IGFuaW1hdGlvbkR1cmF0aW9uIOWApFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBjb2xsYXBzZShkZWxheT86IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgICAgICBsZXQgbGluZXM6IExpbmVQcm9maWxlW10gPSBbXTtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmhhc0NoaWxkcmVuKCkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihUQUcgKyBcInRoaXMgZ3JvdXAgaGFzIG5vIGNoaWxkcmVuLlwiKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmlzRXhwYW5kZWQoKSkge1xyXG4gICAgICAgICAgICAgICAgbGluZXMgPSB0aGlzLnF1ZXJ5T3BlcmF0aW9uVGFyZ2V0KFwidW5yZWdpc3RlcmVkXCIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fZXhwYW5kZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGlmICgwIDwgbGluZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVsYXkgPSAobnVsbCAhPSBkZWxheSkgPyBkZWxheSA6IHRoaXMuX293bmVyLmNvcmUuZ2V0TGlzdFZpZXdPcHRpb25zKCkuYW5pbWF0aW9uRHVyYXRpb247XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fb3duZXIuc3RhdHVzU2NvcGUoXCJjb2xsYXBzaW5nXCIsICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g6Ieq6Lqr44KS5pu05pawXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2xpbmVzLmZvckVhY2goKGxpbmU6IExpbmVQcm9maWxlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5lLnJlZnJlc2goKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOmFjeS4i+OCkuabtOaWsFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9vd25lci5yZW1vdmVJdGVtKGxpbmVzWzBdLmluZGV4LCBsaW5lcy5sZW5ndGgsIGRlbGF5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fb3duZXIudXBkYXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOiHqui6q+OCkuODquOCueODiOOBruWPr+imlumgmOWfn+OBq+ihqOekulxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIG9wdGlvbnMge0Vuc3VyZVZpc2libGVPcHRpb25zfSBbaW5dIOOCquODl+OCt+ODp+ODs1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGVuc3VyZVZpc2libGUob3B0aW9ucz86IEVuc3VyZVZpc2libGVPcHRpb25zKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmICgwIDwgdGhpcy5fbGluZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9vd25lci5lbnN1cmVWaXNpYmxlKHRoaXMuX2xpbmVzWzBdLmluZGV4LCBvcHRpb25zKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChudWxsICE9IG9wdGlvbnMuY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgIG9wdGlvbnMuY2FsbGJhY2soKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog6ZaL6ZaJ44Gu44OI44Kw44OrXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gZGVsYXkge051bWJlcn0gW2luXSBjb2xsYXBzZSDjga7opoHntKDliYrpmaTjgavosrvjgoTjgZnpgYXlu7bmmYLplpMuIOaXouWumjogYW5pbWF0aW9uRHVyYXRpb24g5YCkXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHRvZ2dsZShkZWxheT86IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fZXhwYW5kZWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29sbGFwc2UoZGVsYXkpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5leHBhbmQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog5bGV6ZaL54q25oWL44KS5Yik5a6aXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHtCb29sZWFufSB0cnVlOiDlsZXplossIGZhbHNlOuWPjuadn1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBpc0V4cGFuZGVkKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZXhwYW5kZWQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBsaXN0IHZpZXcg44G455m76YyyXHJcbiAgICAgICAgICogVG9wIEdyb3VwIOOBruOBv+eZu+mMsuWPr+iDvVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGluc2VydFRvIHtOdW1iZXJ9IOaMv+WFpeS9jee9ruOCkiBpbmRleCDjgafmjIflrppcclxuICAgICAgICAgKiBAcmV0dXJuIHtHcm91cFByb2ZpbGV9IOacrOOCpOODs+OCueOCv+ODs+OCuVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyByZWdpc3RlcihpbnNlcnRUbzogbnVtYmVyKTogR3JvdXBQcm9maWxlIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX3BhcmVudCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihUQUcgKyBcImxvZ2ljIGVycm9yOiAncmVnaXN0ZXInIG1ldGhvZCBpcyBhY2NlcHRhYmxlIG9ubHkgdG9wIGdyb3VwLlwiKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX293bmVyLl9hZGRMaW5lKHRoaXMucHJlcHJvY2VzcyhcInJlZ2lzdGVyZWRcIiksIGluc2VydFRvKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIGxpc3QgdmlldyDjgbjlvqnlhYNcclxuICAgICAgICAgKiBUb3AgR3JvdXAg44Gu44G/55m76Yyy5Y+v6IO9XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHtHcm91cFByb2ZpbGV9IOacrOOCpOODs+OCueOCv+ODs+OCuVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyByZXN0b3JlKCk6IEdyb3VwUHJvZmlsZSB7XHJcbiAgICAgICAgICAgIGxldCBsaW5lczogTGluZVByb2ZpbGVbXSA9IFtdO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fcGFyZW50KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFRBRyArIFwibG9naWMgZXJyb3I6ICdyZXN0b3JlJyBtZXRob2QgaXMgYWNjZXB0YWJsZSBvbmx5IHRvcCBncm91cC5cIik7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5fbGluZXMpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9leHBhbmRlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxpbmVzID0gdGhpcy5fbGluZXMuY29uY2F0KHRoaXMucXVlcnlPcGVyYXRpb25UYXJnZXQoXCJhY3RpdmVcIikpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBsaW5lcyA9IHRoaXMuX2xpbmVzO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5fb3duZXIuX2FkZExpbmUobGluZXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog6YWN5LiL44Gu5pyA5b6M44GuIGxpbmUgaW5kZXgg44KS5Y+W5b6XXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gd2l0aEFjdGl2ZUNoaWxkcmVuIHtCb29sZWFufSBbaW5dIOeZu+mMsua4iOOBv+OBruWtkCBHcm91cFByb2ZpbGUg44KS5ZCr44KB44Gm5qSc57Si44GZ44KL5aC05ZCI44GvIHRydWUg44KS5oyH5a6aXHJcbiAgICAgICAgICogQHJldHVybiB7TnVtYmVyfSBpbmRleC4g44Ko44Op44O844Gu5aC05ZCI44GvIG51bGwuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIGdldExhc3RMaW5lSW5kZXgod2l0aEFjdGl2ZUNoaWxkcmVuOiBib29sZWFuID0gZmFsc2UpOiBudW1iZXIge1xyXG4gICAgICAgICAgICBjb25zdCBsaW5lczogTGluZVByb2ZpbGVbXSA9ICgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgX2xpbmVzOiBMaW5lUHJvZmlsZVtdO1xyXG4gICAgICAgICAgICAgICAgaWYgKHdpdGhBY3RpdmVDaGlsZHJlbikge1xyXG4gICAgICAgICAgICAgICAgICAgIF9saW5lcyA9IHRoaXMucXVlcnlPcGVyYXRpb25UYXJnZXQoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAobnVsbCA9PSBsaW5lcyB8fCBsaW5lcy5sZW5ndGggPD0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIF9saW5lcyA9IHRoaXMuX2xpbmVzO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF9saW5lcztcclxuICAgICAgICAgICAgfSkoKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChsaW5lcy5sZW5ndGggPD0gMCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihUQUcgKyBcImxvZ2ljIGVycm9yOiB0aGlzIGdyb3VwIGlzIHN0aWwgbm90IHJlZ2lzdGVyZWQuXCIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbGluZXNbbGluZXMubGVuZ3RoIC0gMV0uaW5kZXg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIElEIOOCkuWPluW+l1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7U3RyaW5nfSDlibLjgormjK/jgonjgozjgZ8gSURcclxuICAgICAgICAgKi9cclxuICAgICAgICBnZXQgaWQoKTogc3RyaW5nIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2lkO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog44K544OG44O844K/44K544KS5Y+W5b6XXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHtTdHJpbmd9IOOCueODhuODvOOCv+OCueaWh+Wtl+WIl1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGdldCBzdGF0dXMoKTogc3RyaW5nIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3N0YXR1cztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gcHJpdmF0ZSBtZXRob2RcclxuXHJcbiAgICAgICAgLyogdHNsaW50OmRpc2FibGU6bm8tdW51c2VkLXZhcmlhYmxlICovXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOimqiBHcm91cCDmjIflrppcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBwYXJlbnQge0dyb3VwUHJvZmlsZX0gW2luXSDopqogR3JvdXBQcm9maWxlIOOCpOODs+OCueOCv+ODs+OCuVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByaXZhdGUgc2V0UGFyZW50KHBhcmVudDogR3JvdXBQcm9maWxlKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuX3BhcmVudCA9IHBhcmVudDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qIHRzbGludDplbmFibGU6bm8tdW51c2VkLXZhcmlhYmxlICovXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIHJlZ2lzdGVyIC8gdW5yZWdpc3RlciDjga7liY3lh6bnkIZcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBuZXdTdGF0dXMge1N0cmluZ30gW2luXSDmlrDjgrnjg4bjg7zjgr/jgrnmloflrZfliJdcclxuICAgICAgICAgKiBAcmV0dXJuIHtMaW5lUHJvZmlsZVtdfSDmm7TmlrDjgZnjgbnjgY0gTGluZVByb2ZpbGUg44Gu6YWN5YiXXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSBwcmVwcm9jZXNzKG5ld1N0YXR1czogc3RyaW5nKTogTGluZVByb2ZpbGVbXSB7XHJcbiAgICAgICAgICAgIGxldCBsaW5lczogTGluZVByb2ZpbGVbXSA9IFtdO1xyXG4gICAgICAgICAgICBpZiAobmV3U3RhdHVzICE9PSB0aGlzLl9zdGF0dXMgJiYgbnVsbCAhPSB0aGlzLl9saW5lcykge1xyXG4gICAgICAgICAgICAgICAgbGluZXMgPSB0aGlzLl9saW5lcztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLl9zdGF0dXMgPSBuZXdTdGF0dXM7XHJcbiAgICAgICAgICAgIHJldHVybiBsaW5lcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOaTjeS9nOWvvuixoeOBriBMaW5lUHJvZmlsZSDphY3liJfjgpLlj5blvpdcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBuZXdTdGF0dXMge1N0cmluZ30gW2luXSDmlrDjgrnjg4bjg7zjgr/jgrnmloflrZfliJdcclxuICAgICAgICAgKiBAcmV0dXJuIHtMaW5lUHJvZmlsZVtdfSDmk43kvZzlr77osaHjga4gTGluZVByb2ZpbGUg44Gu6YWN5YiXXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSBxdWVyeU9wZXJhdGlvblRhcmdldChvcGVyYXRpb246IHN0cmluZyk6IExpbmVQcm9maWxlW10ge1xyXG4gICAgICAgICAgICBjb25zdCBmaW5kVGFyZ2V0cyA9IChncm91cDogR3JvdXBQcm9maWxlKTogTGluZVByb2ZpbGVbXSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgbGluZXM6IExpbmVQcm9maWxlW10gPSBbXTtcclxuICAgICAgICAgICAgICAgIGdyb3VwLl9jaGlsZHJlbi5mb3JFYWNoKChjaGlsZDogR3JvdXBQcm9maWxlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChvcGVyYXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInJlZ2lzdGVyZWRcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVzID0gbGluZXMuY29uY2F0KGNoaWxkLnByZXByb2Nlc3Mob3BlcmF0aW9uKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcInVucmVnaXN0ZXJlZFwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGluZXMgPSBsaW5lcy5jb25jYXQoY2hpbGQucHJlcHJvY2VzcyhvcGVyYXRpb24pKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiYWN0aXZlXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPSBjaGlsZC5fbGluZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5lcyA9IGxpbmVzLmNvbmNhdChjaGlsZC5fbGluZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oVEFHICsgXCJ1bmtub3duIG9wZXJhdGlvbjogXCIgKyBvcGVyYXRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2hpbGQuaXNFeHBhbmRlZCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVzID0gbGluZXMuY29uY2F0KGZpbmRUYXJnZXRzKGNoaWxkKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbGluZXM7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHJldHVybiBmaW5kVGFyZ2V0cyh0aGlzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOiHqui6q+OBrueuoeeQhuOBmeOCi+OCouOCr+ODhuOCo+ODluOBqiBMaW5lUHJvZmllIOOCkuWPluW+l1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7TGluZVByb2ZpbGVbXX0gTGluZVByb2ZpZSDphY3liJdcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlIGdldCBfbGluZXMoKTogTGluZVByb2ZpbGVbXSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGtleSA9IHRoaXMuX293bmVyLmxheW91dEtleTtcclxuICAgICAgICAgICAgaWYgKG51bGwgIT0ga2V5KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fbWFwTGluZXNba2V5XTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9tYXBMaW5lc1tHcm91cFByb2ZpbGUuTEFZT1VUX0tFWV9ERUZBVUxUXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJuYW1lc3BhY2UgQ0RQLlVJIHtcclxuXHJcbiAgICBpbXBvcnQgX1V0aWxzID0gQ0RQLlVJLl9MaXN0Vmlld1V0aWxzO1xyXG5cclxuICAgIGNvbnN0IFRBRyA9IFwiW0NEUC5VSS5TY3JvbGxlckVsZW1lbnRdIFwiO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGNsYXNzIFNjcm9sbGVyRWxlbWVudFxyXG4gICAgICogQGJyaWVmIEhUTUxFbGVtZW50IOOBriBTY3JvbGxlciDjgq/jg6njgrlcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGNsYXNzIFNjcm9sbGVyRWxlbWVudCBpbXBsZW1lbnRzIElTY3JvbGxlciB7XHJcbiAgICAgICAgcHJpdmF0ZSBfJHRhcmdldDogSlF1ZXJ5ID0gbnVsbDtcclxuICAgICAgICBwcml2YXRlIF8kc2Nyb2xsTWFwOiBKUXVlcnkgPSBudWxsO1xyXG4gICAgICAgIHByaXZhdGUgX2xpc3R2aWV3T3B0aW9uczogTGlzdFZpZXdPcHRpb25zID0gbnVsbDtcclxuXHJcbiAgICAgICAgLy8hIGNvbnN0cnVjdG9yXHJcbiAgICAgICAgY29uc3RydWN0b3IoZWxlbWVudDogc3RyaW5nLCBvcHRpb25zOiBMaXN0Vmlld09wdGlvbnMpO1xyXG4gICAgICAgIGNvbnN0cnVjdG9yKGVsZW1lbnQ6IEhUTUxFbGVtZW50LCBvcHRpb25zOiBMaXN0Vmlld09wdGlvbnMpO1xyXG4gICAgICAgIGNvbnN0cnVjdG9yKGVsZW1lbnQ6IGFueSwgb3B0aW9uczogTGlzdFZpZXdPcHRpb25zKSB7XHJcbiAgICAgICAgICAgIHRoaXMuXyR0YXJnZXQgPSAkKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICB0aGlzLl9saXN0dmlld09wdGlvbnMgPSBvcHRpb25zO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIFNjcm9sbGVyIOOBruWei+OCkuWPluW+l1xyXG4gICAgICAgIGdldFR5cGUoKTogc3RyaW5nIHtcclxuICAgICAgICAgICAgcmV0dXJuIFNjcm9sbGVyRWxlbWVudC5UWVBFO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIHBvc2l0aW9uIOWPluW+l1xyXG4gICAgICAgIGdldFBvcygpOiBudW1iZXIge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fJHRhcmdldC5zY3JvbGxUb3AoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISBwb3NpdGlvbiDjga7mnIDlpKflgKTjgpLlj5blvpdcclxuICAgICAgICBnZXRQb3NNYXgoKTogbnVtYmVyIHtcclxuICAgICAgICAgICAgaWYgKG51bGwgPT0gdGhpcy5fJHNjcm9sbE1hcCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fJHNjcm9sbE1hcCA9IHRoaXMuXyR0YXJnZXQuY2hpbGRyZW4oKS5maXJzdCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBfVXRpbHMubWF4KHRoaXMuXyRzY3JvbGxNYXAuaGVpZ2h0KCkgLSB0aGlzLl8kdGFyZ2V0LmhlaWdodCgpLCAwKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDjgqTjg5njg7Pjg4jnmbvpjLJcclxuICAgICAgICBvbih0eXBlOiBzdHJpbmcsIGZ1bmM6IChldmVudDogSlF1ZXJ5LkV2ZW50KSA9PiB2b2lkKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAodHlwZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcInNjcm9sbFwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuXyR0YXJnZXQub24oXCJzY3JvbGxcIiwgZnVuYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwic2Nyb2xsc3RvcFwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuXyR0YXJnZXQub24oXCJzY3JvbGxzdG9wXCIsIGZ1bmMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oVEFHICsgXCJ1bnN1cHBvcnRlZCB0eXBlOiBcIiArIHR5cGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg44Kk44OZ44Oz44OI55m76Yyy6Kej6ZmkXHJcbiAgICAgICAgb2ZmKHR5cGU6IHN0cmluZywgZnVuYzogKGV2ZW50OiBKUXVlcnkuRXZlbnQpID0+IHZvaWQpOiB2b2lkIHtcclxuICAgICAgICAgICAgc3dpdGNoICh0eXBlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwic2Nyb2xsXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fJHRhcmdldC5vZmYoXCJzY3JvbGxcIiwgZnVuYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwic2Nyb2xsc3RvcFwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuXyR0YXJnZXQub2ZmKFwic2Nyb2xsc3RvcFwiLCBmdW5jKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFRBRyArIFwidW5zdXBwb3J0ZWQgdHlwZTogXCIgKyB0eXBlKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOOCueOCr+ODreODvOODq+S9jee9ruOCkuaMh+WumlxyXG4gICAgICAgIHNjcm9sbFRvKHBvczogbnVtYmVyLCBhbmltYXRlPzogYm9vbGVhbiwgdGltZT86IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuX2xpc3R2aWV3T3B0aW9ucy5lbmFibGVBbmltYXRpb24gfHwgIWFuaW1hdGUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuXyR0YXJnZXQuc2Nyb2xsVG9wKHBvcyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobnVsbCA9PSB0aW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGltZSA9IHRoaXMuX2xpc3R2aWV3T3B0aW9ucy5hbmltYXRpb25EdXJhdGlvbjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuXyR0YXJnZXQuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsVG9wOiBwb3NcclxuICAgICAgICAgICAgICAgIH0sIHRpbWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgU2Nyb2xsZXIg44Gu54q25oWL5pu05pawXHJcbiAgICAgICAgdXBkYXRlKCk6IHZvaWQge1xyXG4gICAgICAgICAgICAvLyBub29wLlxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIFNjcm9sbGVyIOOBruegtOajhFxyXG4gICAgICAgIGRlc3Ryb3koKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuXyRzY3JvbGxNYXAgPSBudWxsO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fJHRhcmdldCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fJHRhcmdldC5vZmYoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuXyR0YXJnZXQgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg44K/44Kk44OX5a6a576pXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBnZXQgVFlQRSgpOiBzdHJpbmcge1xyXG4gICAgICAgICAgICByZXR1cm4gXCJlbGVtZW50LW92ZXJmbG93XCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgZmFjdG9yeSDlj5blvpdcclxuICAgICAgICBwdWJsaWMgc3RhdGljIGdldEZhY3RvcnkoKTogKGVsZW1lbnQ6IGFueSwgb3B0aW9uczogTGlzdFZpZXdPcHRpb25zKSA9PiBJU2Nyb2xsZXIge1xyXG4gICAgICAgICAgICBjb25zdCBmYWN0b3J5ID0gKGVsZW1lbnQ6IGFueSwgb3B0aW9uczogTGlzdFZpZXdPcHRpb25zKTogSVNjcm9sbGVyID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgU2Nyb2xsZXJFbGVtZW50KGVsZW1lbnQsIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAvLyBzZXQgdHlwZSBzaWduYXR1cmUuXHJcbiAgICAgICAgICAgICg8YW55PmZhY3RvcnkpLnR5cGUgPSBTY3JvbGxlckVsZW1lbnQuVFlQRTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhY3Rvcnk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIm5hbWVzcGFjZSBDRFAuVUkge1xyXG5cclxuICAgIGltcG9ydCBfVXRpbHMgPSBDRFAuVUkuX0xpc3RWaWV3VXRpbHM7XHJcblxyXG4gICAgY29uc3QgVEFHID0gXCJbQ0RQLlVJLlNjcm9sbGVyTmF0aXZlXSBcIjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBjbGFzcyBTY3JvbGxlck5hdGl2ZVxyXG4gICAgICogQGJyaWVmIEJyb3dzZXIgTmF0aXZlIOOBriBTY3JvbGxlciDjgq/jg6njgrlcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGNsYXNzIFNjcm9sbGVyTmF0aXZlIGltcGxlbWVudHMgSVNjcm9sbGVyIHtcclxuICAgICAgICBwcml2YXRlIF8kYm9keTogSlF1ZXJ5ID0gbnVsbDtcclxuICAgICAgICBwcml2YXRlIF8kdGFyZ2V0OiBKUXVlcnkgPSBudWxsO1xyXG4gICAgICAgIHByaXZhdGUgXyRzY3JvbGxNYXA6IEpRdWVyeSA9IG51bGw7XHJcbiAgICAgICAgcHJpdmF0ZSBfbGlzdHZpZXdPcHRpb25zOiBMaXN0Vmlld09wdGlvbnMgPSBudWxsO1xyXG5cclxuICAgICAgICAvLyEgY29uc3RydWN0b3JcclxuICAgICAgICBjb25zdHJ1Y3RvcihvcHRpb25zOiBMaXN0Vmlld09wdGlvbnMpIHtcclxuICAgICAgICAgICAgdGhpcy5fJHRhcmdldCA9ICQoZG9jdW1lbnQpO1xyXG4gICAgICAgICAgICB0aGlzLl8kYm9keSA9ICQoXCJib2R5XCIpO1xyXG4gICAgICAgICAgICB0aGlzLl9saXN0dmlld09wdGlvbnMgPSBvcHRpb25zO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIFNjcm9sbGVyIOOBruWei+OCkuWPluW+l1xyXG4gICAgICAgIGdldFR5cGUoKTogc3RyaW5nIHtcclxuICAgICAgICAgICAgcmV0dXJuIFNjcm9sbGVyTmF0aXZlLlRZUEU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgcG9zaXRpb24g5Y+W5b6XXHJcbiAgICAgICAgZ2V0UG9zKCk6IG51bWJlciB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl8kdGFyZ2V0LnNjcm9sbFRvcCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIHBvc2l0aW9uIOOBruacgOWkp+WApOOCkuWPluW+l1xyXG4gICAgICAgIGdldFBvc01heCgpOiBudW1iZXIge1xyXG4gICAgICAgICAgICByZXR1cm4gX1V0aWxzLm1heCh0aGlzLl8kdGFyZ2V0LmhlaWdodCgpIC0gd2luZG93LmlubmVySGVpZ2h0LCAwKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDjgqTjg5njg7Pjg4jnmbvpjLJcclxuICAgICAgICBvbih0eXBlOiBzdHJpbmcsIGZ1bmM6IChldmVudDogSlF1ZXJ5LkV2ZW50KSA9PiB2b2lkKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAodHlwZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcInNjcm9sbFwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuXyR0YXJnZXQub24oXCJzY3JvbGxcIiwgZnVuYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwic2Nyb2xsc3RvcFwiOlxyXG4gICAgICAgICAgICAgICAgICAgICQod2luZG93KS5vbihcInNjcm9sbHN0b3BcIiwgZnVuYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihUQUcgKyBcInVuc3VwcG9ydGVkIHR5cGU6IFwiICsgdHlwZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDjgqTjg5njg7Pjg4jnmbvpjLLop6PpmaRcclxuICAgICAgICBvZmYodHlwZTogc3RyaW5nLCBmdW5jOiAoZXZlbnQ6IEpRdWVyeS5FdmVudCkgPT4gdm9pZCk6IHZvaWQge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJzY3JvbGxcIjpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl8kdGFyZ2V0Lm9mZihcInNjcm9sbFwiLCBmdW5jKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJzY3JvbGxzdG9wXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgJCh3aW5kb3cpLm9mZihcInNjcm9sbHN0b3BcIiwgZnVuYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihUQUcgKyBcInVuc3VwcG9ydGVkIHR5cGU6IFwiICsgdHlwZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDjgrnjgq/jg63jg7zjg6vkvY3nva7jgpLmjIflrppcclxuICAgICAgICBzY3JvbGxUbyhwb3M6IG51bWJlciwgYW5pbWF0ZT86IGJvb2xlYW4sIHRpbWU/OiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLl9saXN0dmlld09wdGlvbnMuZW5hYmxlQW5pbWF0aW9uIHx8ICFhbmltYXRlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl8kYm9keS5zY3JvbGxUb3AocG9zKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChudWxsID09IHRpbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aW1lID0gdGhpcy5fbGlzdHZpZXdPcHRpb25zLmFuaW1hdGlvbkR1cmF0aW9uO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5fJGJvZHkuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsVG9wOiBwb3NcclxuICAgICAgICAgICAgICAgIH0sIHRpbWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgU2Nyb2xsZXIg44Gu54q25oWL5pu05pawXHJcbiAgICAgICAgdXBkYXRlKCk6IHZvaWQge1xyXG4gICAgICAgICAgICAvLyBub29wLlxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIFNjcm9sbGVyIOOBruegtOajhFxyXG4gICAgICAgIGRlc3Ryb3koKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuXyRzY3JvbGxNYXAgPSBudWxsO1xyXG4gICAgICAgICAgICB0aGlzLl8kdGFyZ2V0ID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDjgr/jgqTjg5flrprnvqlcclxuICAgICAgICBwdWJsaWMgc3RhdGljIGdldCBUWVBFKCk6IHN0cmluZyB7XHJcbiAgICAgICAgICAgIHJldHVybiBcIm5hdGl2ZS1zY3JvbGxcIjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISBmYWN0b3J5IOWPluW+l1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgZ2V0RmFjdG9yeSgpOiAoZWxlbWVudDogYW55LCBvcHRpb25zOiBMaXN0Vmlld09wdGlvbnMpID0+IElTY3JvbGxlciB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZhY3RvcnkgPSAoZWxlbWVudDogYW55LCBvcHRpb25zOiBMaXN0Vmlld09wdGlvbnMpOiBJU2Nyb2xsZXIgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBTY3JvbGxlck5hdGl2ZShvcHRpb25zKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgLy8gc2V0IHR5cGUgc2lnbmF0dXJlLlxyXG4gICAgICAgICAgICAoPGFueT5mYWN0b3J5KS50eXBlID0gU2Nyb2xsZXJOYXRpdmUuVFlQRTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhY3Rvcnk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8vIGZvciBub24gaXNjcm9sbCB1c2VyLiBjZHAudWkubGlzdHZpZXcuZC50cyBpbnRlcm5hbCBkZWZpbml0aW9uLlxyXG5pbnRlcmZhY2UgSVNjcm9sbE9wdGlvbnMge1xyXG4gICAgW3g6IHN0cmluZ106IGFueTtcclxuICAgIHByb2JlVHlwZT86IG51bWJlcjsgLy8gW2NhbG0gOjEgPCAyIDwgMzogYWdncmVzc2l2ZV1cclxufVxyXG5cclxubmFtZXNwYWNlIENEUC5VSSB7XHJcblxyXG4gICAgaW1wb3J0IF9Db25maWcgID0gQ0RQLlVJLkxpc3RWaWV3R2xvYmFsQ29uZmlnO1xyXG4gICAgaW1wb3J0IF9VdGlscyAgID0gQ0RQLlVJLl9MaXN0Vmlld1V0aWxzO1xyXG5cclxuICAgIGNvbnN0IFRBRyA9IFwiW0NEUC5VSS5TY3JvbGxlcklTY3JvbGxdIFwiO1xyXG5cclxuICAgIGludGVyZmFjZSBJU2Nyb2xsRXggZXh0ZW5kcyBJU2Nyb2xsIHtcclxuICAgICAgICBvbjogKHR5cGU6IHN0cmluZywgZm46IChldmVudDogYW55KSA9PiB2b2lkKSA9PiB2b2lkO1xyXG4gICAgICAgIG9mZjogKHR5cGU6IHN0cmluZywgZm46IChldmVudDogYW55KSA9PiB2b2lkKSA9PiB2b2lkO1xyXG4gICAgICAgIHdyYXBwZXI6IEhUTUxFbGVtZW50O1xyXG4gICAgICAgIHNjcm9sbGVyOiBIVE1MRWxlbWVudDtcclxuICAgICAgICBzY3JvbGxlcldpZHRoOiBudW1iZXI7XHJcbiAgICAgICAgc2Nyb2xsZXJIZWlnaHQ6IG51bWJlcjtcclxuICAgICAgICBtYXhTY3JvbGxYOiBudW1iZXI7XHJcbiAgICAgICAgbWF4U2Nyb2xsWTogbnVtYmVyO1xyXG4gICAgICAgIGdldENvbXB1dGVkUG9zaXRpb24oKTogYW55O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGNsYXNzIFNjcm9sbGVySVNjcm9sbFxyXG4gICAgICogQGJyaWVmIGlTY3JvbGwg44KS5L2/55So44GX44GfIFNjcm9sbGVyIOOCr+ODqeOCuVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgY2xhc3MgU2Nyb2xsZXJJU2Nyb2xsIGltcGxlbWVudHMgSVNjcm9sbGVyIHtcclxuICAgICAgICBwcml2YXRlIF8kb3duZXI6IEpRdWVyeSA9IG51bGw7XHJcbiAgICAgICAgcHJpdmF0ZSBfaXNjcm9sbDogSVNjcm9sbEV4ID0gbnVsbDtcclxuICAgICAgICBwcml2YXRlIF9yZWZyZXNoVGltZXJJZDogbnVtYmVyID0gbnVsbDtcclxuICAgICAgICBwcml2YXRlIF8kd3JhcHBlcjogSlF1ZXJ5ID0gbnVsbDtcclxuICAgICAgICBwcml2YXRlIF8kc2Nyb2xsZXI6IEpRdWVyeSA9IG51bGw7XHJcbiAgICAgICAgcHJpdmF0ZSBfbGlzdHZpZXdPcHRpb25zOiBMaXN0Vmlld09wdGlvbnMgPSBudWxsO1xyXG5cclxuICAgICAgICAvLyEgY29uc3RydWN0b3JcclxuICAgICAgICBjb25zdHJ1Y3Rvcigkb3duZXI6IEpRdWVyeSwgZWxlbWVudDogc3RyaW5nLCBpc2Nyb2xsT3B0aW9uczogSVNjcm9sbE9wdGlvbnMsIGxpc3R2aWV3T3B0aW9uczogTGlzdFZpZXdPcHRpb25zKTtcclxuICAgICAgICBjb25zdHJ1Y3Rvcigkb3duZXI6IEpRdWVyeSwgZWxlbWVudDogSFRNTEVsZW1lbnQsIGlzY3JvbGxPcHRpb25zOiBJU2Nyb2xsT3B0aW9ucywgbGlzdHZpZXdPcHRpb25zOiBMaXN0Vmlld09wdGlvbnMpO1xyXG4gICAgICAgIGNvbnN0cnVjdG9yKCRvd25lcjogSlF1ZXJ5LCBlbGVtZW50OiBhbnksIGlzY3JvbGxPcHRpb25zOiBJU2Nyb2xsT3B0aW9ucywgbGlzdHZpZXdPcHRpb25zOiBMaXN0Vmlld09wdGlvbnMpIHtcclxuICAgICAgICAgICAgaWYgKG51bGwgIT0gZ2xvYmFsLklTY3JvbGwpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuXyRvd25lciA9ICRvd25lcjtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2lzY3JvbGwgPSA8SVNjcm9sbEV4Pm5ldyBJU2Nyb2xsKGVsZW1lbnQsIGlzY3JvbGxPcHRpb25zKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuXyR3cmFwcGVyID0gJCh0aGlzLl9pc2Nyb2xsLndyYXBwZXIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fJHNjcm9sbGVyID0gJCh0aGlzLl9pc2Nyb2xsLnNjcm9sbGVyKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2xpc3R2aWV3T3B0aW9ucyA9IGxpc3R2aWV3T3B0aW9ucztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoVEFHICsgXCJpc2Nyb2xsIG1vZHVsZSBkb2Vzbid0IGxvYWQuXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgU2Nyb2xsZXIg44Gu5Z6L44KS5Y+W5b6XXHJcbiAgICAgICAgZ2V0VHlwZSgpOiBzdHJpbmcge1xyXG4gICAgICAgICAgICByZXR1cm4gU2Nyb2xsZXJJU2Nyb2xsLlRZUEU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgcG9zaXRpb24g5Y+W5b6XXHJcbiAgICAgICAgZ2V0UG9zKCk6IG51bWJlciB7XHJcbiAgICAgICAgICAgIGxldCBwb3MgPSB0aGlzLl9pc2Nyb2xsLmdldENvbXB1dGVkUG9zaXRpb24oKS55O1xyXG4gICAgICAgICAgICBpZiAoXy5pc05hTihwb3MpKSB7XHJcbiAgICAgICAgICAgICAgICBwb3MgPSAwO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcG9zID0gLXBvcztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcG9zO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIHBvc2l0aW9uIOOBruacgOWkp+WApOOCkuWPluW+l1xyXG4gICAgICAgIGdldFBvc01heCgpOiBudW1iZXIge1xyXG4gICAgICAgICAgICByZXR1cm4gX1V0aWxzLm1heCgtdGhpcy5faXNjcm9sbC5tYXhTY3JvbGxZLCAwKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDjgqTjg5njg7Pjg4jnmbvpjLJcclxuICAgICAgICBvbih0eXBlOiBzdHJpbmcsIGZ1bmM6IChldmVudDogSlF1ZXJ5LkV2ZW50KSA9PiB2b2lkKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAodHlwZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcInNjcm9sbFwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2lzY3JvbGwub24oXCJzY3JvbGxcIiwgZnVuYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwic2Nyb2xsc3RvcFwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2lzY3JvbGwub24oXCJzY3JvbGxFbmRcIiwgZnVuYyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihUQUcgKyBcInVuc3VwcG9ydGVkIHR5cGU6IFwiICsgdHlwZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDjgqTjg5njg7Pjg4jnmbvpjLLop6PpmaRcclxuICAgICAgICBvZmYodHlwZTogc3RyaW5nLCBmdW5jOiAoZXZlbnQ6IEpRdWVyeS5FdmVudCkgPT4gdm9pZCk6IHZvaWQge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJzY3JvbGxcIjpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9pc2Nyb2xsLm9mZihcInNjcm9sbFwiLCBmdW5jKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJzY3JvbGxzdG9wXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5faXNjcm9sbC5vbihcInNjcm9sbEVuZFwiLCBmdW5jKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFRBRyArIFwidW5zdXBwb3J0ZWQgdHlwZTogXCIgKyB0eXBlKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOOCueOCr+ODreODvOODq+S9jee9ruOCkuaMh+WumlxyXG4gICAgICAgIHNjcm9sbFRvKHBvczogbnVtYmVyLCBhbmltYXRlPzogYm9vbGVhbiwgdGltZT86IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgICAgICB0aW1lID0gMDtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2xpc3R2aWV3T3B0aW9ucy5lbmFibGVBbmltYXRpb24gJiYgYW5pbWF0ZSkge1xyXG4gICAgICAgICAgICAgICAgdGltZSA9IHRpbWUgfHwgdGhpcy5fbGlzdHZpZXdPcHRpb25zLmFuaW1hdGlvbkR1cmF0aW9uO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuX2lzY3JvbGwuc2Nyb2xsVG8oMCwgLXBvcywgdGltZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgU2Nyb2xsZXIg44Gu54q25oWL5pu05pawXHJcbiAgICAgICAgdXBkYXRlKCk6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fJG93bmVyKSB7XHJcbiAgICAgICAgICAgICAgICAvLyB1cGRhdGUgd3JhcHBlclxyXG4gICAgICAgICAgICAgICAgKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBvd25lckhlaWdodCA9IHRoaXMuXyRvd25lci5oZWlnaHQoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAob3duZXJIZWlnaHQgIT09IHRoaXMuXyR3cmFwcGVyLmhlaWdodCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuXyR3cmFwcGVyLmhlaWdodChvd25lckhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSkoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAobnVsbCAhPSB0aGlzLl9yZWZyZXNoVGltZXJJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLl9yZWZyZXNoVGltZXJJZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgcHJvYyA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fJHNjcm9sbGVyICYmIHRoaXMuXyRzY3JvbGxlci5oZWlnaHQoKSAhPT0gdGhpcy5faXNjcm9sbC5zY3JvbGxlckhlaWdodCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9pc2Nyb2xsLnJlZnJlc2goKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fcmVmcmVzaFRpbWVySWQgPSBzZXRUaW1lb3V0KHByb2MsIHRoaXMuX2xpc3R2aWV3T3B0aW9ucy5zY3JvbGxNYXBSZWZyZXNoSW50ZXJ2YWwpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3JlZnJlc2hUaW1lcklkID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuX2lzY3JvbGwucmVmcmVzaCgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcmVmcmVzaFRpbWVySWQgPSBzZXRUaW1lb3V0KHByb2MsIHRoaXMuX2xpc3R2aWV3T3B0aW9ucy5zY3JvbGxNYXBSZWZyZXNoSW50ZXJ2YWwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgU2Nyb2xsZXIg44Gu56C05qOEXHJcbiAgICAgICAgZGVzdHJveSgpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5fJHNjcm9sbGVyID0gbnVsbDtcclxuICAgICAgICAgICAgdGhpcy5fJHdyYXBwZXIgPSBudWxsO1xyXG4gICAgICAgICAgICB0aGlzLl9pc2Nyb2xsLmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgdGhpcy5fJG93bmVyID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDjgr/jgqTjg5flrprnvqlcclxuICAgICAgICBwdWJsaWMgc3RhdGljIGdldCBUWVBFKCk6IHN0cmluZyB7XHJcbiAgICAgICAgICAgIHJldHVybiBcImlzY3JvbGxcIjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISBmYWN0b3J5IOWPluW+l1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgZ2V0RmFjdG9yeShvcHRpb25zPzogSVNjcm9sbE9wdGlvbnMpOiAoZWxlbWVudDogYW55LCBvcHRpb25zOiBMaXN0Vmlld09wdGlvbnMpID0+IElTY3JvbGxlciB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRlZmF1bHRPcHQgPSB7XHJcbiAgICAgICAgICAgICAgICBzY3JvbGxYOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGJvdW5jZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICB0YXA6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBjbGljazogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIG1vdXNlV2hlZWw6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBzY3JvbGxiYXJzOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgaW50ZXJhY3RpdmVTY3JvbGxiYXJzOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgc2hyaW5rU2Nyb2xsYmFyczogXCJzY2FsZVwiLFxyXG4gICAgICAgICAgICAgICAgZmFkZVNjcm9sbGJhcnM6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBwcmV2ZW50RGVmYXVsdDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBkaXNhYmxlUG9pbnRlcjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGRpc2FibGVNb3VzZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBkaXNhYmxlVG91Y2g6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgcHJvYmVUeXBlOiAyLFxyXG4vLyAgICAgICAgICAgICAgIGV2ZW50UGFzc3Rocm91Z2g6IHRydWUsXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBjb25zdCBpc2Nyb2xsT3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCBkZWZhdWx0T3B0LCBvcHRpb25zKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGZhY3RvcnkgPSAoZWxlbWVudDogYW55LCBsaXN0dmlld09wdGlvbnM6IExpc3RWaWV3T3B0aW9ucyk6IElTY3JvbGxlciA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCAkb3duZXIgPSAkKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgJG1hcCA9ICRvd25lci5maW5kKF9Db25maWcuU0NST0xMX01BUF9TRUxFQ1RPUik7XHJcbiAgICAgICAgICAgICAgICBjb25zdCAkd3JhcHBlciA9ICQoXCI8ZGl2IGNsYXNzPSdcIiArIF9Db25maWcuV1JBUFBFUl9DTEFTUyArIFwiJz48L2Rpdj5cIilcclxuICAgICAgICAgICAgICAgICAgICAuY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IFwiYWJzb2x1dGVcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IFwiMTAwJVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IFwiMTAwJVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvdmVyZmxvdzogXCJoaWRkZW5cIixcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICRtYXAud3JhcCgkd3JhcHBlcik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFNjcm9sbGVySVNjcm9sbCgkb3duZXIsIF9Db25maWcuV1JBUFBFUl9TRUxFQ1RPUiwgaXNjcm9sbE9wdGlvbnMsIGxpc3R2aWV3T3B0aW9ucyk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIC8vIHNldCB0eXBlIHNpZ25hdHVyZS5cclxuICAgICAgICAgICAgKDxhbnk+ZmFjdG9yeSkudHlwZSA9IFNjcm9sbGVySVNjcm9sbC5UWVBFO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGZhY3Rvcnk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIm5hbWVzcGFjZSBDRFAuVUkge1xyXG5cclxuICAgIGNvbnN0IFRBRyA9IFwiW0NEUC5VSS5MaXN0SXRlbVZpZXddIFwiO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGludGVyZmFjZSBMaXN0SXRlbVZpZXdPcHRpb25zXHJcbiAgICAgKiBAYnJpZWYgTGlzdEl0ZW1WaWV3IOOBruOCquODl+OCt+ODp+ODs1xyXG4gICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIExpc3RJdGVtVmlld09wdGlvbnM8VE1vZGVsIGV4dGVuZHMgQmFja2JvbmUuTW9kZWwgPSBCYWNrYm9uZS5Nb2RlbD5cclxuICAgICAgICBleHRlbmRzIEJhY2tib25lLlZpZXdPcHRpb25zPFRNb2RlbD4ge1xyXG4gICAgICAgIG93bmVyOiBCYXNlTGlzdFZpZXc7XHJcbiAgICAgICAgJGVsPzogSlF1ZXJ5O1xyXG4gICAgICAgIGxpbmVQcm9maWxlOiBMaW5lUHJvZmlsZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBjbGFzcyBMaXN0SXRlbVZpZXdcclxuICAgICAqIEBicmllZiBMaXN0VmlldyDjgYzmibHjgYYgTGlzdEl0ZW0g44Kz44Oz44OG44OK44Kv44Op44K5XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBjbGFzcyBMaXN0SXRlbVZpZXc8VE1vZGVsIGV4dGVuZHMgQmFja2JvbmUuTW9kZWwgPSBCYWNrYm9uZS5Nb2RlbD5cclxuICAgICAgICBleHRlbmRzIEJhY2tib25lLlZpZXc8VE1vZGVsPiBpbXBsZW1lbnRzIElMaXN0SXRlbVZpZXcsIElDb21wb3NhYmxlVmlldyB7XHJcblxyXG4gICAgICAgIHByaXZhdGUgX293bmVyOiBCYXNlTGlzdFZpZXcgPSBudWxsO1xyXG4gICAgICAgIHByaXZhdGUgX2xpbmVQcm9maWxlOiBMaW5lUHJvZmlsZSA9IG51bGw7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIGNvbnN0cnVjdG9yXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgY29uc3RydWN0b3Iob3B0aW9uczogTGlzdEl0ZW1WaWV3T3B0aW9uczxUTW9kZWw+KSB7XHJcbiAgICAgICAgICAgIHN1cGVyKG9wdGlvbnMpO1xyXG4gICAgICAgICAgICB0aGlzLl9vd25lciA9IG9wdGlvbnMub3duZXI7XHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zLiRlbCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGVsZWdhdGVzID0gKDxhbnk+dGhpcykuZXZlbnRzID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRFbGVtZW50KG9wdGlvbnMuJGVsLCBkZWxlZ2F0ZXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuX2xpbmVQcm9maWxlID0gb3B0aW9ucy5saW5lUHJvZmlsZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gSW1wbGVtZW50czogTGlzdEl0ZW1WaWV3XHJcblxyXG4gICAgICAgIC8vISDmj4/nlLs6IGZyYW1ld29yayDjgYvjgonlkbzjgbPlh7rjgZXjgozjgovjgZ/jgoHjgIHjgqrjg7zjg5Djg7zjg6njgqTjg4nlv4XpoIhcclxuICAgICAgICByZW5kZXIoKTogTGlzdEl0ZW1WaWV3PFRNb2RlbD4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oVEFHICsgXCJuZWVkIG92ZXJyaWRlICdyZW5kZXIoKScgbWV0aG9kLlwiKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg6Ieq6Lqr44GuIExpbmUg44Kk44Oz44OH44OD44Kv44K544KS5Y+W5b6XXHJcbiAgICAgICAgZ2V0SW5kZXgoKTogbnVtYmVyIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2xpbmVQcm9maWxlLmluZGV4O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOiHqui6q+OBq+aMh+WumuOBleOCjOOBn+mrmOOBleOCkuWPluW+l1xyXG4gICAgICAgIGdldFNwZWNpZmllZEhlaWdodCgpOiBudW1iZXIge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fbGluZVByb2ZpbGUuaGVpZ2h0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIGNoaWxkIG5vZGUg44GM5a2Y5Zyo44GZ44KL44GL5Yik5a6aXHJcbiAgICAgICAgaGFzQ2hpbGROb2RlKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuJGVsKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gMCA8IHRoaXMuJGVsLmNoaWxkcmVuKCkubGVuZ3RoO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDpq5jjgZXjgpLmm7TmlrBcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBuZXdIZWlnaHQge051bWJlcn0gICAgICAgICAgICAgIFtpbl0g5paw44GX44GE6auY44GVXHJcbiAgICAgICAgICogQHBhcmFtIG9wdGlvbnMgICB7VXBkYXRlSGVpZ2h0T3B0aW9uc30gW2luXSBsaW5lIOOBrumrmOOBleabtOaWsOaZguOBq+W9semfv+OBmeOCi+OBmeOBueOBpuOBriBMaW5lUHJvZmlsZSDjga7lho3oqIjnrpfjgpLooYzjgYbloLTlkIjjga8geyByZWZsZWN0QWxsOiB0cnVlIH1cclxuICAgICAgICAgKiBAcmV0dXJuIHtMaXN0SXRlbVZpZXd9IOOCpOODs+OCueOCv+ODs+OCuVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHVwZGF0ZUhlaWdodChuZXdIZWlnaHQ6IG51bWJlciwgb3B0aW9ucz86IFVwZGF0ZUhlaWdodE9wdGlvbnMpOiBMaXN0SXRlbVZpZXc8VE1vZGVsPiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLiRlbCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZ2V0U3BlY2lmaWVkSGVpZ2h0KCkgIT09IG5ld0hlaWdodCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2xpbmVQcm9maWxlLnVwZGF0ZUhlaWdodChuZXdIZWlnaHQsIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJGVsLmhlaWdodChuZXdIZWlnaHQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBJbXBsZW1lbnRzOiBJQ29tcG9zYWJsZVZpZXdcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog44GZ44Gn44Gr5a6a576p44GV44KM44GfIEJhY2tib25lLlZpZXcg44KS5Z+65bqV44Kv44Op44K544Gr6Kit5a6a44GX44CBZXh0ZW5kIOOCkuWun+ihjOOBmeOCi+OAglxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGRlcml2ZXMgICAgICAgICB7QmFja2JvbmUuVmlld3xCYWNrYm9uZS5WaWV3W119IFtpbl0g5ZCI5oiQ5YWD44GuIFZpZXcg44Kv44Op44K5XHJcbiAgICAgICAgICogQHBhcmFtIHByb3BlcnRpZXMgICAgICB7T2JqZWN0fSAgICAgICAgICAgICAgICAgICAgICAgIFtpbl0gcHJvdG90eXBlIOODl+ODreODkeODhuOCo1xyXG4gICAgICAgICAqIEBwYXJhbSBjbGFzc1Byb3BlcnRpZXMge09iamVjdH0gICAgICAgICAgICAgICAgICAgICAgICBbaW5dIHN0YXRpYyDjg5fjg63jg5Hjg4bjgqNcclxuICAgICAgICAgKiBAcmV0dXJuIHtCYWNrYm9uZS5WaWV3fEJhY2tib25lLlZpZXdbXX0g5paw6KaP44Gr55Sf5oiQ44GV44KM44GfIFZpZXcg44Gu44Kz44Oz44K544OI44Op44Kv44K/XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgc3RhdGljIGNvbXBvc2UoZGVyaXZlczogVmlld0NvbnN0cnVjdG9yIHwgVmlld0NvbnN0cnVjdG9yW10sIHByb3BlcnRpZXM6IGFueSwgY2xhc3NQcm9wZXJ0aWVzPzogYW55KTogVmlld0NvbnN0cnVjdG9yIHtcclxuICAgICAgICAgICAgY29uc3QgY29tcG9zZWQ6IGFueSA9IGNvbXBvc2VWaWV3cyhMaXN0SXRlbVZpZXcsIGRlcml2ZXMpO1xyXG4gICAgICAgICAgICByZXR1cm4gY29tcG9zZWQuZXh0ZW5kKHByb3BlcnRpZXMsIGNsYXNzUHJvcGVydGllcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIE92ZXJyaWRlOiBCYWNrYm9uZS5WaWV3XHJcblxyXG4gICAgICAgIC8vISDplovmlL5cclxuICAgICAgICByZW1vdmUoKTogTGlzdEl0ZW1WaWV3PFRNb2RlbD4ge1xyXG4gICAgICAgICAgICAvLyB4cGVyaWEgQVggSmVsbHkgQmVhbiAoNC4xLjIp44Gr44Gm44CB44Oh44Oi44Oq44O844Oq44O844Kv44KS6Lu95rib44GV44Gb44KL5Yq55p6cXHJcbiAgICAgICAgICAgIHRoaXMuJGVsLmZpbmQoXCJmaWd1cmVcIikuY3NzKFwiYmFja2dyb3VuZC1pbWFnZVwiLCBcIm5vbmVcIik7XHJcbiAgICAgICAgICAgIC8vIHRoaXMuJGVsIOOBr+WGjeWIqeeUqOOBmeOCi+OBn+OCgeegtOajhOOBl+OBquOBhFxyXG4gICAgICAgICAgICB0aGlzLiRlbC5jaGlsZHJlbigpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICB0aGlzLiRlbC5vZmYoKTtcclxuICAgICAgICAgICAgdGhpcy4kZWwgPSBudWxsO1xyXG4gICAgICAgICAgICB0aGlzLnN0b3BMaXN0ZW5pbmcoKTtcclxuICAgICAgICAgICAgdGhpcy5fbGluZVByb2ZpbGUgPSBudWxsO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gc2hvcnQgY3V0IG1ldGhvZHNcclxuXHJcbiAgICAgICAgLy8hIE93bmVyIOWPluW+l1xyXG4gICAgICAgIGdldCBvd25lcigpOiBCYXNlTGlzdFZpZXcge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fb3duZXI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8qIHRzbGludDpkaXNhYmxlOm5vLWJpdHdpc2Ugbm8tdW51c2VkLWV4cHJlc3Npb24gKi9cclxuLyoganNoaW50IC1XMDMwICovICAvLyBmb3IgXCJFeHBlY3RlZCBhbiBhc3NpZ25tZW50IG9yIGZ1bmN0aW9uIGNhbGwgYW5kIGluc3RlYWQgc2F3IGFuIGV4cHJlc3Npb25cIlxyXG5cclxubmFtZXNwYWNlIENEUC5VSSB7XHJcblxyXG4gICAgaW1wb3J0IF9Db25maWcgID0gQ0RQLlVJLkxpc3RWaWV3R2xvYmFsQ29uZmlnO1xyXG4gICAgaW1wb3J0IF9VdGlscyAgID0gQ0RQLlVJLl9MaXN0Vmlld1V0aWxzO1xyXG5cclxuICAgIGNvbnN0IFRBRyA9IFwiW0NEUC5VSS5TY3JvbGxNYW5hZ2VyXSBcIjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBjbGFzcyBTY3JvbGxNYW5hZ2VyXHJcbiAgICAgKiBAYnJpZWYg44Oh44Oi44Oq566h55CG44KS6KGM44GG44K544Kv44Ot44O844Or5Yem55CG44Gu44Kz44Ki44Ot44K444OD44Kv5a6f6KOF44Kv44Op44K5XHJcbiAgICAgKiAgICAgICAg5pys44Kv44Op44K544GvIElMaXN0VmlldyDjgqTjg7Pjgr/jg7zjg5XjgqfjgqTjgrnjgpLmjIHjgaEgRE9NIOOBq+OCouOCr+OCu+OCueOBmeOCi+OBjOOAgUJhY2tib25lLlZpZXcg44KS57aZ5om/44GX44Gq44GEXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBjbGFzcyBTY3JvbGxNYW5hZ2VyIGltcGxlbWVudHMgSUxpc3RWaWV3RnJhbWV3b3JrLCBJU2Nyb2xsYWJsZSwgSUJhY2t1cFJlc3RvcmUge1xyXG5cclxuICAgICAgICBwcml2YXRlIF8kcm9vdDogSlF1ZXJ5ID0gbnVsbDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8hPCBTY3JvbGwg5a++6LGh44Gu44Or44O844OI44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgICAgcHJpdmF0ZSBfJG1hcDogSlF1ZXJ5ID0gbnVsbDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vITwgU2Nyb2xsIE1hcCBlbGVtZW50IOOCkuagvOe0jVxyXG4gICAgICAgIHByaXZhdGUgX21hcEhlaWdodDogbnVtYmVyID0gMDsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyE8IFNjcm9sbCBNYXAg44Gu6auY44GV44KS5qC857SNIChfJG1hcCDjga7nirbmhYvjgavkvp3lrZjjgZXjgZvjgarjgYQpXHJcbiAgICAgICAgcHJpdmF0ZSBfc2Nyb2xsZXI6IElTY3JvbGxlciA9IG51bGw7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vITwgU2Nyb2xsIOOBq+S9v+eUqOOBmeOCiyBJU2Nyb2xsZXIg44Kk44Oz44K544K/44Oz44K5XHJcbiAgICAgICAgcHJpdmF0ZSBfc2V0dGluZ3M6IExpc3RWaWV3T3B0aW9ucyA9IG51bGw7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vITwgU2Nyb2xsTWFuYWdlciDjgqrjg5fjgrfjg6fjg7PjgpLmoLzntI1cclxuICAgICAgICBwcml2YXRlIF9hY3RpdmUgPSB0cnVlOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8hPCBVSSDooajnpLrkuK3jga8gdHJ1ZSDjgavmjIflrppcclxuICAgICAgICBwcml2YXRlIF9zY3JvbGxFdmVudEhhbmRsZXI6IChldmVudDogSlF1ZXJ5LkV2ZW50KSA9PiB2b2lkID0gbnVsbDsgICAgIC8vITwgU2Nyb2xsIEV2ZW50IEhhbmRsZXJcclxuICAgICAgICBwcml2YXRlIF9zY3JvbGxTdG9wRXZlbnRIYW5kbGVyOiAoZXZlbnQ6IEpRdWVyeS5FdmVudCkgPT4gdm9pZCA9IG51bGw7IC8vITwgU2Nyb2xsIFN0b3AgRXZlbnQgSGFuZGxlclxyXG4gICAgICAgIHByaXZhdGUgX2Jhc2VIZWlnaHQ6IG51bWJlciA9IDA7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyE8IOmrmOOBleOBruWfuua6luWApFxyXG4gICAgICAgIHByaXZhdGUgX2xpbmVzOiBMaW5lUHJvZmlsZVtdID0gW107ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyE8IOeuoeeQhuS4i+OBq+OBguOCiyBMaW5lUHJvZmlsZSDphY3liJdcclxuICAgICAgICBwcml2YXRlIF9wYWdlczogUGFnZVByb2ZpbGVbXSA9IFtdOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8hPCDnrqHnkIbkuIvjgavjgYLjgosgUGFnZVByb2ZpbGUg6YWN5YiXXHJcbiAgICAgICAgLy8hIOacgOaWsOOBruihqOekuumgmOWfn+aDheWgseOCkuagvOe0jSAoU2Nyb2xsIOS4reOBruabtOaWsOWHpueQhuOBq+S9v+eUqClcclxuICAgICAgICBwcml2YXRlIF9sYXN0QWN0aXZlUGFnZUNvbnRleHQgPSB7XHJcbiAgICAgICAgICAgIGluZGV4OiAwLFxyXG4gICAgICAgICAgICBmcm9tOiAwLFxyXG4gICAgICAgICAgICB0bzogMCxcclxuICAgICAgICAgICAgcG9zOiAwLCAgICAvLyBzY3JvbGwgcG9zaXRpb25cclxuICAgICAgICB9O1xyXG4gICAgICAgIHByb3RlY3RlZCBfYmFja3VwID0ge307ICAgIC8vITwg44OH44O844K/44GuIGJhY2t1cCDpoJjln58uIGtleSDjgaggX2xpbmVzIOOCkuagvOe0jeOAgua0vueUn+OCr+ODqeOCueOBp+aLoeW8teWPr+iDveOAglxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBjb25zdHJ1Y3RvclxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIF8kcm9vdCAge0pRdWVyeX0gW2luXSDnrqHnkIblr77osaHjga7jg6vjg7zjg4jjgqjjg6zjg6Hjg7Pjg4hcclxuICAgICAgICAgKiBAcGFyYW0gb3B0aW9ucyB7TGlzdFZpZXdPcHRpb25zfSBbaW5dIOOCquODl+OCt+ODp+ODs1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGNvbnN0cnVjdG9yKG9wdGlvbnM/OiBMaXN0Vmlld09wdGlvbnMpIHtcclxuICAgICAgICAgICAgLy8gTGlzdFZpZXdPcHRpb25zIOaXouWumuWApFxyXG4gICAgICAgICAgICBjb25zdCBkZWZPcHRpb25zOiBMaXN0Vmlld09wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgICAgICBzY3JvbGxlckZhY3Rvcnk6IFNjcm9sbGVyTmF0aXZlLmdldEZhY3RvcnkoKSxcclxuICAgICAgICAgICAgICAgIGVuYWJsZUhpZGRlblBhZ2U6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgZW5hYmxlVHJhbnNmb3JtT2Zmc2V0OiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIHNjcm9sbE1hcFJlZnJlc2hJbnRlcnZhbDogMjAwLFxyXG4gICAgICAgICAgICAgICAgc2Nyb2xsUmVmcmVzaERpc3RhbmNlOiAyMDAsXHJcbiAgICAgICAgICAgICAgICBwYWdlUHJlcGFyZUNvdW50OiAzLFxyXG4gICAgICAgICAgICAgICAgcGFnZVByZWxvYWRDb3VudDogMSxcclxuICAgICAgICAgICAgICAgIGVuYWJsZUFuaW1hdGlvbjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGFuaW1hdGlvbkR1cmF0aW9uOiAwLFxyXG4gICAgICAgICAgICAgICAgYmFzZURlcHRoOiBcImF1dG9cIixcclxuICAgICAgICAgICAgICAgIGl0ZW1UYWdOYW1lOiBcImRpdlwiLFxyXG4gICAgICAgICAgICAgICAgcmVtb3ZlSXRlbVdpdGhUcmFuc2l0aW9uOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgdXNlRHVtbXlJbmFjdGl2ZVNjcm9sbE1hcDogZmFsc2UsXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvLyDoqK3lrprmoLzntI1cclxuICAgICAgICAgICAgdGhpcy5fc2V0dGluZ3MgPSAkLmV4dGVuZCh7fSwgZGVmT3B0aW9ucywgb3B0aW9ucyk7XHJcblxyXG4gICAgICAgICAgICAvLyDjgrnjgq/jg63jg7zjg6vjgqTjg5njg7Pjg4hcclxuICAgICAgICAgICAgdGhpcy5fc2Nyb2xsRXZlbnRIYW5kbGVyID0gKGV2ZW50OiBKUXVlcnkuRXZlbnQpOiB2b2lkID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMub25TY3JvbGwodGhpcy5fc2Nyb2xsZXIuZ2V0UG9zKCkpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAvLyDjgrnjgq/jg63jg7zjg6vlgZzmraLjgqTjg5njg7Pjg4hcclxuICAgICAgICAgICAgdGhpcy5fc2Nyb2xsU3RvcEV2ZW50SGFuZGxlciA9IChldmVudDogSlF1ZXJ5LkV2ZW50KTogdm9pZCA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uU2Nyb2xsU3RvcCh0aGlzLl9zY3JvbGxlci5nZXRQb3MoKSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIHB1YmxpYyBtZXRob2RcclxuXHJcbiAgICAgICAgLy8hIOWGhemDqOOCquODluOCuOOCp+OCr+ODiOOBruWIneacn+WMllxyXG4gICAgICAgIHB1YmxpYyBpbml0aWFsaXplKCRyb290OiBKUXVlcnksIGhlaWdodDogbnVtYmVyKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIC8vIOaXouOBq+ani+evieOBleOCjOOBpuOBhOOBn+WgtOWQiOOBr+egtOajhFxyXG4gICAgICAgICAgICBpZiAodGhpcy5fJHJvb3QpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGVzdHJveSgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLl8kcm9vdCA9ICRyb290O1xyXG4gICAgICAgICAgICB0aGlzLl8kbWFwID0gJHJvb3QuaGFzQ2xhc3MoX0NvbmZpZy5TQ1JPTExfTUFQX0NMQVNTKSA/ICRyb290IDogJHJvb3QuZmluZChfQ29uZmlnLlNDUk9MTF9NQVBfU0VMRUNUT1IpO1xyXG4gICAgICAgICAgICAvLyBfJG1hcCDjgYznhKHjgYTloLTlkIjjga/liJ3mnJ/ljJbjgZfjgarjgYRcclxuICAgICAgICAgICAgaWYgKHRoaXMuXyRtYXAubGVuZ3RoIDw9IDApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuXyRyb290ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5fc2Nyb2xsZXIgPSB0aGlzLmNyZWF0ZVNjcm9sbGVyKCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0QmFzZUhlaWdodChoZWlnaHQpO1xyXG4gICAgICAgICAgICB0aGlzLnNldFNjcm9sbGVyQ29uZGl0aW9uKCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDlhoXpg6jjgqrjg5bjgrjjgqfjgq/jg4jjga7noLTmo4RcclxuICAgICAgICBwdWJsaWMgZGVzdHJveSgpOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX3Njcm9sbGVyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlc2V0U2Nyb2xsZXJDb25kaXRpb24oKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3Njcm9sbGVyLmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3Njcm9sbGVyID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnJlbGVhc2UoKTtcclxuICAgICAgICAgICAgdGhpcy5fJG1hcCA9IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMuXyRyb290ID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDjg5rjg7zjgrjjga7ln7rmupblgKTjgpLlj5blvpdcclxuICAgICAgICBwdWJsaWMgc2V0QmFzZUhlaWdodChoZWlnaHQ6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLl9iYXNlSGVpZ2h0ID0gaGVpZ2h0O1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fYmFzZUhlaWdodCA8PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oVEFHICsgXCJpbnZhbGlkIGJhc2UgaGVpZ2h0OiBcIiArIHRoaXMuX2Jhc2VIZWlnaHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9zY3JvbGxlcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fc2Nyb2xsZXIudXBkYXRlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISBhY3RpdmUg54q25oWL6Kit5a6aXHJcbiAgICAgICAgcHVibGljIHNldEFjdGl2ZVN0YXRlKGFjdGl2ZTogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLl9hY3RpdmUgPSBhY3RpdmU7XHJcbiAgICAgICAgICAgIHRoaXMudHJlYXRTY3JvbGxQb3NpdGlvbigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIGFjdGl2ZSDnirbmhYvliKTlrppcclxuICAgICAgICBwdWJsaWMgaXNBY3RpdmUoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9hY3RpdmU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgc2Nyb2xsZXIg44Gu56iu6aGe44KS5Y+W5b6XXHJcbiAgICAgICAgcHVibGljIGdldFNjcm9sbGVyVHlwZSgpOiBzdHJpbmcge1xyXG4gICAgICAgICAgICByZXR1cm4gKDxhbnk+dGhpcy5fc2V0dGluZ3Muc2Nyb2xsZXJGYWN0b3J5KS50eXBlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog54q25oWL44Gr5b+c44GY44Gf44K544Kv44Ot44O844Or5L2N572u44Gu5L+d5a2YL+W+qeWFg1xyXG4gICAgICAgICAqIGNkcC51aS5mcy5qczogUGFnZVRhYkxpc3RWaWV3IOOBjOWun+mok+eahOOBq+S9v+eUqFxyXG4gICAgICAgICAqIFRPRE86IOKAu2lzY3JvbGwg44Gv5pyq5a++5b+cXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHRyZWF0U2Nyb2xsUG9zaXRpb24oKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGxldCBpOiBudW1iZXI7XHJcbiAgICAgICAgICAgIGNvbnN0IHRyYW5zZm9ybSA9IHt9O1xyXG5cclxuICAgICAgICAgICAgY29uc3QgdXBkYXRlT2Zmc2V0ID0gKCR0YXJnZXQ6IEpRdWVyeSwgb2Zmc2V0PzogbnVtYmVyKTogSlF1ZXJ5ID0+IHtcclxuICAgICAgICAgICAgICAgIG9mZnNldCA9IG9mZnNldCB8fCAodGhpcy5fc2Nyb2xsZXIuZ2V0UG9zKCkgLSB0aGlzLl9sYXN0QWN0aXZlUGFnZUNvbnRleHQucG9zKTtcclxuICAgICAgICAgICAgICAgIGlmIChfVXRpbHMuZ2V0Q3NzTWF0cml4VmFsdWUoJHRhcmdldCwgXCJ0cmFuc2xhdGVZXCIpICE9PSBvZmZzZXQpIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgX1V0aWxzLmNzc1ByZWZpeGVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybVtfVXRpbHMuY3NzUHJlZml4ZXNbaV0gKyBcInRyYW5zZm9ybVwiXSA9IFwidHJhbnNsYXRlM2QoMHB4LFwiICsgb2Zmc2V0ICsgXCJweCwwcHgpXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICR0YXJnZXQuY3NzKHRyYW5zZm9ybSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICR0YXJnZXQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBjb25zdCBjbGVhck9mZnNldCA9ICgkdGFyZ2V0OiBKUXVlcnkpOiBKUXVlcnkgPT4ge1xyXG4gICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IF9VdGlscy5jc3NQcmVmaXhlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybVtfVXRpbHMuY3NzUHJlZml4ZXNbaV0gKyBcInRyYW5zZm9ybVwiXSA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAkdGFyZ2V0LmNzcyh0cmFuc2Zvcm0pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICR0YXJnZXQ7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5fYWN0aXZlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyDku6XkuIvjga7jgrnjgrPjg7zjg5fjga7lh6bnkIbjgavlr77jgZfjgabnlLvpnaLmm7TmlrDjgpIx5Zue44Gr44Gn44GN44Gq44GE44Gf44KB44CBSkIsIElDUyDjgafjga/jgaHjgonjgaTjgY3jgYznmbrnlJ/jgZnjgovjgIJLaXRrYXQg5Lul6ZmN44Gv6Imv5aW944CCXHJcbiAgICAgICAgICAgICAgICAoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9zY3JvbGxlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9zY3JvbGxlci5zY3JvbGxUbyh0aGlzLl9sYXN0QWN0aXZlUGFnZUNvbnRleHQucG9zLCBmYWxzZSwgMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGNsZWFyT2Zmc2V0KHRoaXMuXyRtYXApLmNzcyhcImRpc3BsYXlcIiwgXCJibG9ja1wiKTtcclxuICAgICAgICAgICAgICAgIH0pKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fc2V0dGluZ3MudXNlRHVtbXlJbmFjdGl2ZVNjcm9sbE1hcCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJlcGFyZUluYWN0aXZlTWFwKCkucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fc2V0dGluZ3MudXNlRHVtbXlJbmFjdGl2ZVNjcm9sbE1hcCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZU9mZnNldCh0aGlzLnByZXBhcmVJbmFjdGl2ZU1hcCgpKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlT2Zmc2V0KHRoaXMuXyRtYXApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgaW5hY3RpdmUg55SoIE1hcCDjga7nlJ/miJBcclxuICAgICAgICBwcml2YXRlIHByZXBhcmVJbmFjdGl2ZU1hcCgpOiBKUXVlcnkge1xyXG4gICAgICAgICAgICBjb25zdCAkcGFyZW50ID0gdGhpcy5fJG1hcC5wYXJlbnQoKTtcclxuICAgICAgICAgICAgbGV0ICRpbmFjdGl2ZU1hcCA9ICRwYXJlbnQuZmluZChfQ29uZmlnLklOQUNUSVZFX0NMQVNTX1NFTEVDVE9SKTtcclxuICAgICAgICAgICAgaWYgKCRpbmFjdGl2ZU1hcC5sZW5ndGggPD0gMCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY3VycmVudFBhZ2VJbmRleCA9IHRoaXMuZ2V0UGFnZUluZGV4KCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCAkbGlzdEl0ZW1WaWV3cyA9IHRoaXMuXyRtYXAuY2xvbmUoKS5jaGlsZHJlbigpLmZpbHRlcigoaW5kZXg6IG51bWJlciwgZWxlbWVudDogSFRNTEVsZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwYWdlSW5kZXggPSB+fiQoZWxlbWVudCkuYXR0cihfQ29uZmlnLkRBVEFfUEFHRV9JTkRFWCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRQYWdlSW5kZXggLSAxIDw9IHBhZ2VJbmRleCB8fCBwYWdlSW5kZXggPD0gY3VycmVudFBhZ2VJbmRleCArIDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgJGluYWN0aXZlTWFwID0gJChcIjxzZWN0aW9uIGNsYXNzPSdcIiArIF9Db25maWcuU0NST0xMX01BUF9DTEFTUyArIFwiIFwiICsgX0NvbmZpZy5JTkFDVElWRV9DTEFTUyArIFwiJz48L3NlY3Rpb24+XCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgkbGlzdEl0ZW1WaWV3cylcclxuICAgICAgICAgICAgICAgICAgICAuaGVpZ2h0KHRoaXMuX21hcEhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICAkcGFyZW50LmFwcGVuZCgkaW5hY3RpdmVNYXApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fJG1hcC5jc3MoXCJkaXNwbGF5XCIsIFwibm9uZVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gJGluYWN0aXZlTWFwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBJbXBsZW1lbnRzOiBJTGlzdFZpZXcg44OX44Ot44OV44Kh44Kk44Or566h55CGXHJcblxyXG4gICAgICAgIC8vISDliJ3mnJ/ljJbmuIjjgb/jgYvliKTlrppcclxuICAgICAgICBpc0luaXRpYWxpemVkKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICByZXR1cm4gISF0aGlzLl8kcm9vdDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDjg5fjg63jg5Hjg4bjgqPjgpLmjIflrprjgZfjgabjgIFMaW5lUHJvZmlsZSDjgpLnrqHnkIZcclxuICAgICAgICBhZGRJdGVtKFxyXG4gICAgICAgICAgICBoZWlnaHQ6IG51bWJlcixcclxuICAgICAgICAgICAgaW5pdGlhbGl6ZXI6IG5ldyAob3B0aW9ucz86IGFueSkgPT4gQmFzZUxpc3RJdGVtVmlldyxcclxuICAgICAgICAgICAgaW5mbzogYW55LFxyXG4gICAgICAgICAgICBpbnNlcnRUbz86IG51bWJlclxyXG4gICAgICAgICk6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLl9hZGRMaW5lKG5ldyBMaW5lUHJvZmlsZSh0aGlzLCBNYXRoLmZsb29yKGhlaWdodCksIGluaXRpYWxpemVyLCBpbmZvKSwgaW5zZXJ0VG8pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOODl+ODreODkeODhuOCo+OCkuaMh+WumuOBl+OBpuOAgUxpbmVQcm9maWxlIOOCkueuoeeQhi4g55m76YyyIGZyYW1ld29yayDjgYzkvb/nlKjjgZnjgotcclxuICAgICAgICBwdWJsaWMgX2FkZExpbmUoX2xpbmU6IGFueSwgaW5zZXJ0VG8/OiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICAgICAgY29uc3QgbGluZXM6IExpbmVQcm9maWxlW10gPSAoX2xpbmUgaW5zdGFuY2VvZiBBcnJheSkgPyA8TGluZVByb2ZpbGVbXT5fbGluZSA6IFtfbGluZV07XHJcbiAgICAgICAgICAgIGxldCBpOiBudW1iZXIsIG46IG51bWJlcjtcclxuICAgICAgICAgICAgbGV0IGRlbHRhSGVpZ2h0ID0gMDtcclxuICAgICAgICAgICAgbGV0IGFkZFRhaWwgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIGlmIChudWxsID09IGluc2VydFRvKSB7XHJcbiAgICAgICAgICAgICAgICBpbnNlcnRUbyA9IHRoaXMuX2xpbmVzLmxlbmd0aDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGluc2VydFRvID09PSB0aGlzLl9saW5lcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIGFkZFRhaWwgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBzY3JvbGwgbWFwIOOBruabtOaWsFxyXG4gICAgICAgICAgICBmb3IgKGkgPSAwLCBuID0gbGluZXMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBkZWx0YUhlaWdodCArPSBsaW5lc1tpXS5oZWlnaHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy51cGRhdGVTY3JvbGxNYXBIZWlnaHQoZGVsdGFIZWlnaHQpO1xyXG5cclxuICAgICAgICAgICAgLy8g5oy/5YWlXHJcbiAgICAgICAgICAgIGZvciAoaSA9IGxpbmVzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9saW5lcy5zcGxpY2UoaW5zZXJ0VG8sIDAsIGxpbmVzW2ldKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gcGFnZSDoqK3lrprjga7op6PpmaRcclxuICAgICAgICAgICAgaWYgKCFhZGRUYWlsKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoMCA9PT0gaW5zZXJ0VG8pIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsZWFyUGFnZSgpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChudWxsICE9IHRoaXMuX2xpbmVzW2luc2VydFRvIC0gMV0ucGFnZUluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGVhclBhZ2UodGhpcy5fbGluZXNbaW5zZXJ0VG8gLSAxXS5wYWdlSW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBvZmZzZXQg44Gu5YaN6KiI566XXHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlUHJvZmlsZXMoaW5zZXJ0VG8pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOaMh+WumuOBl+OBnyBJdGVtIOOCkuWJiumZpFxyXG4gICAgICAgIHJlbW92ZUl0ZW0oaW5kZXg6IG51bWJlciwgc2l6ZT86IG51bWJlciwgZGVsYXk/OiBudW1iZXIpOiB2b2lkO1xyXG4gICAgICAgIHJlbW92ZUl0ZW0oaW5kZXg6IG51bWJlcltdLCBkZWxheT86IG51bWJlcik6IHZvaWQ7XHJcbiAgICAgICAgcmVtb3ZlSXRlbShpbmRleDogYW55LCBhcmcyPzogbnVtYmVyLCBhcmczPzogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmIChpbmRleCBpbnN0YW5jZW9mIEFycmF5KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9yZW1vdmVMaW5lcyhpbmRleCwgYXJnMik7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9yZW1vdmVMaW5lKGluZGV4LCBhcmcyLCBhcmczKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOaMh+WumuOBl+OBnyBMaW5lUHJvZmlsZSDjgpLliYrpmaQ6IOmAo+e2miBpbmRleCDniYhcclxuICAgICAgICBwdWJsaWMgX3JlbW92ZUxpbmUoaW5kZXg6IG51bWJlciwgc2l6ZT86IG51bWJlciwgZGVsYXk/OiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKG51bGwgPT0gc2l6ZSkge1xyXG4gICAgICAgICAgICAgICAgc2l6ZSA9IDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGluZGV4IDwgMCB8fCB0aGlzLl9saW5lcy5sZW5ndGggPCBpbmRleCArIHNpemUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoVEFHICsgXCJsb2dpYyBlcnJvci4gcmVtb3ZlSXRlbSgpLCBpbnZhbGlkIGluZGV4OiBcIiArIGluZGV4KTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZGVsYXkgPSAobnVsbCAhPSBkZWxheSkgPyBkZWxheSA6IDA7XHJcblxyXG4gICAgICAgICAgICBjb25zdCByZW1vdmVkOiBMaW5lUHJvZmlsZVtdID0gW107XHJcbiAgICAgICAgICAgIGxldCBkZWx0YSA9IDA7XHJcbiAgICAgICAgICAgIGxldCBtYXBUcmFuc2l0aW9uID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAvLyDliYrpmaTlgJnoo5zjgajlpInljJbph4/jga7nrpflh7pcclxuICAgICAgICAgICAgKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBsaW5lOiBMaW5lUHJvZmlsZTtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2l6ZTsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGluZSA9IHRoaXMuX2xpbmVzW2luZGV4ICsgaV07XHJcbiAgICAgICAgICAgICAgICAgICAgZGVsdGEgKz0gbGluZS5oZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g5YmK6Zmk6KaB57Sg44GuIHotaW5kZXgg44Gu5Yid5pyf5YyWXHJcbiAgICAgICAgICAgICAgICAgICAgbGluZS5yZXNldERlcHRoKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlZC5wdXNoKGxpbmUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8g6Ieq5YuV6Kit5a6a44O75YmK6Zmk6YGF5bu25pmC6ZaT44GM6Kit5a6a44GV44KM44GL44Gk44CB44K544Kv44Ot44O844Or44Od44K444K344On44Oz44Gr5aSJ5pu044GM44GC44KL5aC05ZCI44GvIHRyYW5zaXRpb24g6Kit5a6aXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fc2V0dGluZ3MucmVtb3ZlSXRlbVdpdGhUcmFuc2l0aW9uICYmICgwIDwgZGVsYXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY3VycmVudCA9IHRoaXMuZ2V0U2Nyb2xsUG9zKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcG9zTWF4ID0gdGhpcy5nZXRTY3JvbGxQb3NNYXgoKSAtIGRlbHRhO1xyXG4gICAgICAgICAgICAgICAgICAgIG1hcFRyYW5zaXRpb24gPSAocG9zTWF4IDwgY3VycmVudCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pKCk7XHJcblxyXG4gICAgICAgICAgICAvLyDmm7TmlrBcclxuICAgICAgICAgICAgKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIHRyYW5zaXRpb24g6Kit5a6aXHJcbiAgICAgICAgICAgICAgICBpZiAobWFwVHJhbnNpdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0dXBTY3JvbGxNYXBUcmFuc2l0aW9uKHRoaXMuXyRtYXAsIGRlbGF5KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIHBhZ2Ug6Kit5a6a44Gu6Kej6ZmkXHJcbiAgICAgICAgICAgICAgICBpZiAobnVsbCAhPSB0aGlzLl9saW5lc1tpbmRleF0ucGFnZUluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGVhclBhZ2UodGhpcy5fbGluZXNbaW5kZXhdLnBhZ2VJbmRleCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyDjgrnjgq/jg63jg7zjg6vpoJjln5/jga7mm7TmlrBcclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlU2Nyb2xsTWFwSGVpZ2h0KC1kZWx0YSk7XHJcbiAgICAgICAgICAgICAgICAvLyDphY3liJfjgYvjgonliYrpmaRcclxuICAgICAgICAgICAgICAgIHRoaXMuX2xpbmVzLnNwbGljZShpbmRleCwgc2l6ZSk7XHJcbiAgICAgICAgICAgICAgICAvLyBvZmZzZXQg44Gu5YaN6KiI566XXHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVByb2ZpbGVzKGluZGV4KTtcclxuICAgICAgICAgICAgICAgIC8vIOmBheW7tuWJiumZpFxyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlZC5mb3JFYWNoKChsaW5lKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmUuaW5hY3RpdmF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSwgZGVsYXkpO1xyXG4gICAgICAgICAgICB9KSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOaMh+WumuOBl+OBnyBMaW5lUHJvZmlsZSDjgpLliYrpmaQ6IHJhbmRvbSBhY2Nlc3Mg54mIXHJcbiAgICAgICAgcHVibGljIF9yZW1vdmVMaW5lcyhpbmRleGVzOiBudW1iZXJbXSwgZGVsYXk/OiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICAgICAgZGVsYXkgPSAobnVsbCAhPSBkZWxheSkgPyBkZWxheSA6IDA7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMCwgbiA9IGluZGV4ZXMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaSA8IDAgfHwgdGhpcy5fbGluZXMubGVuZ3RoIDwgaSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoVEFHICsgXCJsb2dpYyBlcnJvci4gcmVtb3ZlSXRlbSgpLCBpbnZhbGlkIGluZGV4OiBcIiArIGkpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgcmVtb3ZlZDogTGluZVByb2ZpbGVbXSA9IFtdO1xyXG4gICAgICAgICAgICBsZXQgZGVsdGEgPSAwO1xyXG4gICAgICAgICAgICBsZXQgbWFwVHJhbnNpdGlvbiA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgLy8g5YmK6Zmk5YCZ6KOc44Go5aSJ5YyW6YeP44Gu566X5Ye6XHJcbiAgICAgICAgICAgICgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgbGluZTogTGluZVByb2ZpbGU7XHJcbiAgICAgICAgICAgICAgICBpbmRleGVzLmZvckVhY2goKGluZGV4OiBudW1iZXIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBsaW5lID0gdGhpcy5fbGluZXNbaW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbHRhICs9IGxpbmUuaGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIOWJiumZpOimgee0oOOBriB6LWluZGV4IOOBruWIneacn+WMllxyXG4gICAgICAgICAgICAgICAgICAgIGxpbmUucmVzZXREZXB0aCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZWQucHVzaChsaW5lKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgLy8g6Ieq5YuV6Kit5a6a44O75YmK6Zmk6YGF5bu25pmC6ZaT44GM6Kit5a6a44GV44KM44GL44Gk44CB44K544Kv44Ot44O844Or44Od44K444K344On44Oz44Gr5aSJ5pu044GM44GC44KL5aC05ZCI44GvIHRyYW5zaXRpb24g6Kit5a6aXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fc2V0dGluZ3MucmVtb3ZlSXRlbVdpdGhUcmFuc2l0aW9uICYmICgwIDwgZGVsYXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY3VycmVudCA9IHRoaXMuZ2V0U2Nyb2xsUG9zKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcG9zTWF4ID0gdGhpcy5nZXRTY3JvbGxQb3NNYXgoKSAtIGRlbHRhO1xyXG4gICAgICAgICAgICAgICAgICAgIG1hcFRyYW5zaXRpb24gPSAocG9zTWF4IDwgY3VycmVudCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pKCk7XHJcblxyXG4gICAgICAgICAgICAvLyDmm7TmlrBcclxuICAgICAgICAgICAgKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIHRyYW5zaXRpb24g6Kit5a6aXHJcbiAgICAgICAgICAgICAgICBpZiAobWFwVHJhbnNpdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0dXBTY3JvbGxNYXBUcmFuc2l0aW9uKHRoaXMuXyRtYXAsIGRlbGF5KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGluZGV4ZXMuZm9yRWFjaCgoaW5kZXg6IG51bWJlcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHBhZ2Ug6Kit5a6a44Gu6Kej6ZmkXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgIT0gdGhpcy5fbGluZXNbaW5kZXhdLnBhZ2VJbmRleCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsZWFyUGFnZSh0aGlzLl9saW5lc1tpbmRleF0ucGFnZUluZGV4KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy8g6YWN5YiX44GL44KJ5YmK6ZmkXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbGluZXMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBvZmZzZXQg44Gu5YaN6KiI566XXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVQcm9maWxlcyhpbmRleCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIC8vIOOCueOCr+ODreODvOODq+mgmOWfn+OBruabtOaWsFxyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVTY3JvbGxNYXBIZWlnaHQoLWRlbHRhKTtcclxuICAgICAgICAgICAgICAgIC8vIOmBheW7tuWJiumZpFxyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlZC5mb3JFYWNoKChsaW5lKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmUuaW5hY3RpdmF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSwgZGVsYXkpO1xyXG4gICAgICAgICAgICB9KSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIHNjcm9sbCBtYXAg44Gu44OI44Op44Oz44K444K344On44Oz6Kit5a6aXHJcbiAgICAgICAgcHJpdmF0ZSBzZXR1cFNjcm9sbE1hcFRyYW5zaXRpb24oJG1hcDogSlF1ZXJ5LCBkZWxheTogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRyYW5zaXRpb25FbmRIYW5kbGVyID0gKGV2ZW50OiBKUXVlcnkuRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICRtYXAub2ZmKF9VdGlscy50cmFuc2l0aW9uRW5kKTtcclxuICAgICAgICAgICAgICAgIF9VdGlscy5jbGVhclRyYW5zaXRpb25zKCRtYXApO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB0aGlzLl8kbWFwLm9uKF9VdGlscy50cmFuc2l0aW9uRW5kLCB0cmFuc2l0aW9uRW5kSGFuZGxlcik7XHJcbiAgICAgICAgICAgIF9VdGlscy5zZXRUcmFuc2Zvcm1zVHJhbnNpdGlvbnMoJG1hcCwgXCJoZWlnaHRcIiwgZGVsYXksIFwiZWFzZVwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDmjIflrprjgZfjgZ8gSXRlbSDjgavoqK3lrprjgZfjgZ/mg4XloLHjgpLlj5blvpdcclxuICAgICAgICBnZXRJdGVtSW5mbyh0YXJnZXQ6IG51bWJlcik6IGFueTtcclxuICAgICAgICBnZXRJdGVtSW5mbyh0YXJnZXQ6IEpRdWVyeS5FdmVudCk6IGFueTtcclxuICAgICAgICBnZXRJdGVtSW5mbyh0YXJnZXQ6IGFueSk6IGFueSB7XHJcbiAgICAgICAgICAgIGxldCBpbmRleDogbnVtYmVyO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgcGFyc2VyID0gKCR0YXJnZXQ6IEpRdWVyeSk6IG51bWJlciA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoJHRhcmdldC5oYXNDbGFzcyhfQ29uZmlnLkxJU1RJVEVNX0JBU0VfQ0xBU1MpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIH5+JHRhcmdldC5hdHRyKF9Db25maWcuREFUQV9DT05UQUlORVJfSU5ERVgpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICgkdGFyZ2V0Lmhhc0NsYXNzKF9Db25maWcuU0NST0xMX01BUF9DTEFTUykgfHwgJHRhcmdldC5sZW5ndGggPD0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihUQUcgKyBcImNhbm5vdCBkaXRlY3QgbGluZSBmcm9tIGV2ZW50IG9iamVjdC5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZXIoJHRhcmdldC5wYXJlbnQoKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBpZiAodGFyZ2V0IGluc3RhbmNlb2YgJC5FdmVudCkge1xyXG4gICAgICAgICAgICAgICAgaW5kZXggPSBwYXJzZXIoJCh0YXJnZXQuY3VycmVudFRhcmdldCkpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiB0YXJnZXQgPT09IFwibnVtYmVyXCIpIHtcclxuICAgICAgICAgICAgICAgIGluZGV4ID0gdGFyZ2V0O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAobnVsbCA9PSBpbmRleCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihUQUcgKyBcImxvZ2ljIGVycm9yLiB1bnN1cHBvcnRlZCBhcmcgdHlwZS4gdHlwZTogXCIgKyB0eXBlb2YgdGFyZ2V0KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGluZGV4IDwgMCB8fCB0aGlzLl9saW5lcy5sZW5ndGggPD0gaW5kZXgpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoVEFHICsgXCJsb2dpYyBlcnJvci4gaW52YWxpZCByYW5nZS4gaW5kZXg6IFwiICsgaW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9saW5lc1tpbmRleF0uaW5mbztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDjgqLjgq/jg4bjgqPjg5bjg5rjg7zjgrjjgpLmm7TmlrBcclxuICAgICAgICByZWZyZXNoKCk6IHZvaWQge1xyXG4gICAgICAgICAgICBjb25zdCB0YXJnZXRzOiBhbnkgPSB7fTtcclxuICAgICAgICAgICAgY29uc3Qgc2VhcmNoQ291bnQgPSB0aGlzLl9zZXR0aW5ncy5wYWdlUHJlcGFyZUNvdW50ICsgdGhpcy5fc2V0dGluZ3MucGFnZVByZWxvYWRDb3VudDtcclxuICAgICAgICAgICAgY29uc3QgY3VycmVudFBhZ2VJbmRleCA9IHRoaXMuZ2V0UGFnZUluZGV4KCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGhpZ2hQcmlvcml0eUluZGV4OiBudW1iZXJbXSA9IFtdO1xyXG5cclxuICAgICAgICAgICAgY29uc3Qgb2xkRXhzaXN0UGFnZSA9IF8uZmlsdGVyKHRoaXMuX3BhZ2VzLCAocGFnZTogUGFnZVByb2ZpbGUpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBcImluYWN0aXZlXCIgIT09IHBhZ2Uuc3RhdHVzO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGNoYW5nZVN0YXRlID0gKGluZGV4OiBudW1iZXIpOiB2b2lkID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChpbmRleCA9PT0gY3VycmVudFBhZ2VJbmRleCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldHNbaW5kZXhdID0gXCJhY3RpdmF0ZVwiO1xyXG4gICAgICAgICAgICAgICAgICAgIGhpZ2hQcmlvcml0eUluZGV4LnB1c2goaW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChfVXRpbHMuYWJzKGN1cnJlbnRQYWdlSW5kZXggLSBpbmRleCkgPD0gdGhpcy5fc2V0dGluZ3MucGFnZVByZXBhcmVDb3VudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldHNbaW5kZXhdID0gXCJhY3RpdmF0ZVwiO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fc2V0dGluZ3MuZW5hYmxlSGlkZGVuUGFnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRzW2luZGV4XSA9IFwiaGlkZVwiO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldHNbaW5kZXhdID0gXCJhY3RpdmF0ZVwiO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIGN1cnJlbnQgcGFnZSDjga4g5YmN5b6M44GvIGhpZ2ggcHJpb3JpdHkg44Gr44GZ44KLXHJcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudFBhZ2VJbmRleCArIDEgPT09IGluZGV4IHx8IGN1cnJlbnRQYWdlSW5kZXggLSAxID09PSBpbmRleCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGhpZ2hQcmlvcml0eUluZGV4LnB1c2goaW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLy8g5a++6LGh54Sh44GXXHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9saW5lcy5sZW5ndGggPD0gMCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IGkgPSAwO1xyXG4gICAgICAgICAgICAgICAgbGV0IHBhZ2VJbmRleCA9IDA7XHJcbiAgICAgICAgICAgICAgICBsZXQgb3ZlcmZsb3dQcmV2ID0gMCwgb3ZlcmZsb3dOZXh0ID0gMDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGJlZ2luSW5kZXggPSBjdXJyZW50UGFnZUluZGV4IC0gc2VhcmNoQ291bnQ7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBlbmRJbmRleCA9IGN1cnJlbnRQYWdlSW5kZXggKyBzZWFyY2hDb3VudDtcclxuICAgICAgICAgICAgICAgIGZvciAocGFnZUluZGV4ID0gYmVnaW5JbmRleDsgcGFnZUluZGV4IDw9IGVuZEluZGV4OyBwYWdlSW5kZXgrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwYWdlSW5kZXggPCAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJmbG93UHJldisrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX3BhZ2VzLmxlbmd0aCA8PSBwYWdlSW5kZXgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3dOZXh0Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjaGFuZ2VTdGF0ZShwYWdlSW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmICgwIDwgb3ZlcmZsb3dQcmV2KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gMCwgcGFnZUluZGV4ID0gY3VycmVudFBhZ2VJbmRleCArIHNlYXJjaENvdW50ICsgMTsgaSA8IG92ZXJmbG93UHJldjsgaSsrICwgcGFnZUluZGV4KyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX3BhZ2VzLmxlbmd0aCA8PSBwYWdlSW5kZXgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZVN0YXRlKHBhZ2VJbmRleCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmICgwIDwgb3ZlcmZsb3dOZXh0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gMCwgcGFnZUluZGV4ID0gY3VycmVudFBhZ2VJbmRleCAtIHNlYXJjaENvdW50IC0gMTsgaSA8IG92ZXJmbG93TmV4dDsgaSsrICwgcGFnZUluZGV4LS0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhZ2VJbmRleCA8IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZVN0YXRlKHBhZ2VJbmRleCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KSgpO1xyXG5cclxuICAgICAgICAgICAgLy8g5LiN6KaB44Gr44Gq44Gj44GfIHBhZ2Ug44GuIGluYWN0aXZhdGVcclxuICAgICAgICAgICAgb2xkRXhzaXN0UGFnZS5mb3JFYWNoKChwYWdlOiBQYWdlUHJvZmlsZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSBwYWdlLmluZGV4O1xyXG4gICAgICAgICAgICAgICAgaWYgKG51bGwgPT0gdGFyZ2V0c1tpbmRleF0pIHtcclxuICAgICAgICAgICAgICAgICAgICBwYWdlLmluYWN0aXZhdGUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyDlhKrlhYggcGFnZSDjga4gYWN0aXZhdGVcclxuICAgICAgICAgICAgaGlnaFByaW9yaXR5SW5kZXhcclxuICAgICAgICAgICAgICAgIC5zb3J0KChsaHM6IG51bWJlciwgcmhzOiBudW1iZXIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobGhzIDwgcmhzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAtMTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGxocyA+IHJocykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmZvckVhY2goKGluZGV4OiBudW1iZXIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNJbml0aWFsaXplZCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9wYWdlc1tpbmRleF0gJiYgdGhpcy5fcGFnZXNbaW5kZXhdLmFjdGl2YXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9LCAwKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8g44Gd44Gu44G744GL44GuIHBhZ2Ug44GuIOeKtuaFi+WkieabtFxyXG4gICAgICAgICAgICBfLmVhY2godGFyZ2V0cywgKGFjdGlvbjogc3RyaW5nLCBrZXk6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNJbml0aWFsaXplZCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gfn5rZXk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoYWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiYWN0aXZhdGVcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9wYWdlc1tpbmRleF0gJiYgdGhpcy5fcGFnZXNbaW5kZXhdLmFjdGl2YXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiaGlkZVwiOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3BhZ2VzW2luZGV4XSAmJiB0aGlzLl9wYWdlc1tpbmRleF0uaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImluYWN0aXZhdGVcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oVEFHICsgXCJ1bmV4cGVjdGVkIG9wZXJhdGlvbjogaW5hY3RpdmF0ZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFRBRyArIFwidW5rbm93biBvcGVyYXRpb246IFwiICsgdGFyZ2V0c1trZXldKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sIDApO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIC8vIOabtOaWsOW+jOOBq+S9v+eUqOOBl+OBquOBi+OBo+OBnyBET00g44KS5YmK6ZmkXHJcbiAgICAgICAgICAgIHRoaXMuZmluZFJlY3ljbGVFbGVtZW50cygpLnJlbW92ZSgpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fbGFzdEFjdGl2ZVBhZ2VDb250ZXh0LmZyb20gPSB0aGlzLl9wYWdlc1tjdXJyZW50UGFnZUluZGV4XS5nZXRMaW5lUHJvZmlsZUZpcnN0KCkgP1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcGFnZXNbY3VycmVudFBhZ2VJbmRleF0uZ2V0TGluZVByb2ZpbGVGaXJzdCgpLmluZGV4IDogMDtcclxuICAgICAgICAgICAgdGhpcy5fbGFzdEFjdGl2ZVBhZ2VDb250ZXh0LnRvID0gdGhpcy5fcGFnZXNbY3VycmVudFBhZ2VJbmRleF0uZ2V0TGluZVByb2ZpbGVMYXN0KCkgP1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcGFnZXNbY3VycmVudFBhZ2VJbmRleF0uZ2V0TGluZVByb2ZpbGVMYXN0KCkuaW5kZXggOiAwO1xyXG4gICAgICAgICAgICB0aGlzLl9sYXN0QWN0aXZlUGFnZUNvbnRleHQuaW5kZXggPSBjdXJyZW50UGFnZUluZGV4O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOacquOCouOCteOCpOODs+ODmuODvOOCuOOCkuani+eviVxyXG4gICAgICAgIHVwZGF0ZSgpOiB2b2lkIHtcclxuICAgICAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLl9wYWdlcy5sZW5ndGg7XHJcbiAgICAgICAgICAgIHRoaXMuYXNzaWduUGFnZShpbmRleCk7XHJcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOODmuODvOOCuOOCouOCteOCpOODs+OCkuWGjeani+aIkFxyXG4gICAgICAgIHJlYnVpbGQoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xlYXJQYWdlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuYXNzaWduUGFnZSgpO1xyXG4gICAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDnrqHovYTjg4fjg7zjgr/jgpLnoLTmo4RcclxuICAgICAgICByZWxlYXNlKCk6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLl9saW5lcy5mb3JFYWNoKChsaW5lOiBMaW5lUHJvZmlsZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGluZS5pbmFjdGl2YXRlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLl9wYWdlcyA9IFtdO1xyXG4gICAgICAgICAgICB0aGlzLl9saW5lcyA9IFtdO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fJG1hcCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbWFwSGVpZ2h0ID0gMDtcclxuICAgICAgICAgICAgICAgIHRoaXMuXyRtYXAuaGVpZ2h0KDApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIEltcGxlbWVudHM6IElMaXN0VmlldyBCYWNrdXAgLyBSZXN0b3JlXHJcblxyXG4gICAgICAgIC8vISDlhoXpg6jjg4fjg7zjgr/jgpLjg5Djg4Pjgq/jgqLjg4Pjg5dcclxuICAgICAgICBiYWNrdXAoa2V5OiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgaWYgKG51bGwgPT0gdGhpcy5fYmFja3VwW2tleV0pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2JhY2t1cFtrZXldID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxpbmVzOiB0aGlzLl9saW5lcyxcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg5YaF6YOo44OH44O844K/44KS44Oq44K544OI44KiXHJcbiAgICAgICAgcmVzdG9yZShrZXk6IHN0cmluZywgcmVidWlsZDogYm9vbGVhbiA9IHRydWUpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgaWYgKG51bGwgPT0gdGhpcy5fYmFja3VwW2tleV0pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoMCA8IHRoaXMuX2xpbmVzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWxlYXNlKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuX2FkZExpbmUodGhpcy5fYmFja3VwW2tleV0ubGluZXMpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHJlYnVpbGQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVidWlsZCgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDjg5Djg4Pjgq/jgqLjg4Pjg5fjg4fjg7zjgr/jga7mnInnhKFcclxuICAgICAgICBoYXNCYWNrdXAoa2V5OiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgaWYgKG51bGwgIT0gdGhpcy5fYmFja3VwW2tleV0pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg44OQ44OD44Kv44Ki44OD44OX44OH44O844K/44Gu56C05qOEXHJcbiAgICAgICAgY2xlYXJCYWNrdXAoa2V5Pzogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIGlmIChudWxsID09IGtleSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fYmFja3VwID0ge307XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChudWxsICE9IHRoaXMuX2JhY2t1cFtrZXldKSB7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5fYmFja3VwW2tleV07XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOODkOODg+OCr+OCouODg+ODl+ODh+ODvOOCv+OBq+OCouOCr+OCu+OCuVxyXG4gICAgICAgIGdldCBiYWNrdXBEYXRhKCk6IGFueSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9iYWNrdXA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIEltcGxlbWVudHM6IElMaXN0VmlldyBTY3JvbGxcclxuXHJcbiAgICAgICAgLy8hIOOCueOCr+ODreODvOODq+OCpOODmeODs+ODiOODj+ODs+ODieODqeioreWumi/op6PpmaRcclxuICAgICAgICBzZXRTY3JvbGxIYW5kbGVyKGhhbmRsZXI6IChldmVudDogSlF1ZXJ5LkV2ZW50KSA9PiB2b2lkLCBvbjogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fc2Nyb2xsZXIpIHtcclxuICAgICAgICAgICAgICAgIGlmIChvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3Njcm9sbGVyLm9uKFwic2Nyb2xsXCIsIGhhbmRsZXIpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9zY3JvbGxlci5vZmYoXCJzY3JvbGxcIiwgaGFuZGxlcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDjgrnjgq/jg63jg7zjg6vntYLkuobjgqTjg5njg7Pjg4jjg4/jg7Pjg4njg6noqK3lrpov6Kej6ZmkXHJcbiAgICAgICAgc2V0U2Nyb2xsU3RvcEhhbmRsZXIoaGFuZGxlcjogKGV2ZW50OiBKUXVlcnkuRXZlbnQpID0+IHZvaWQsIG9uOiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9zY3JvbGxlcikge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2Nyb2xsZXIub24oXCJzY3JvbGxzdG9wXCIsIGhhbmRsZXIpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9zY3JvbGxlci5vZmYoXCJzY3JvbGxzdG9wXCIsIGhhbmRsZXIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg44K544Kv44Ot44O844Or5L2N572u44KS5Y+W5b6XXHJcbiAgICAgICAgZ2V0U2Nyb2xsUG9zKCk6IG51bWJlciB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zY3JvbGxlciA/IHRoaXMuX3Njcm9sbGVyLmdldFBvcygpIDogMDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDjgrnjgq/jg63jg7zjg6vkvY3nva7jga7mnIDlpKflgKTjgpLlj5blvpdcclxuICAgICAgICBnZXRTY3JvbGxQb3NNYXgoKTogbnVtYmVyIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Njcm9sbGVyID8gdGhpcy5fc2Nyb2xsZXIuZ2V0UG9zTWF4KCkgOiAwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOOCueOCr+ODreODvOODq+S9jee9ruOCkuaMh+WumlxyXG4gICAgICAgIHNjcm9sbFRvKHBvczogbnVtYmVyLCBhbmltYXRlPzogYm9vbGVhbiwgdGltZT86IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fc2Nyb2xsZXIpIHtcclxuICAgICAgICAgICAgICAgIGlmIChwb3MgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFRBRyArIFwiaW52YWxpZCBwb3NpdGlvbiwgdG9vIHNtYWxsLiBbcG9zOiBcIiArIHBvcyArIFwiXVwiKTtcclxuICAgICAgICAgICAgICAgICAgICBwb3MgPSAwO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9zY3JvbGxlci5nZXRQb3NNYXgoKSA8IHBvcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihUQUcgKyBcImludmFsaWQgcG9zaXRpb24sIHRvbyBiaWcuIFtwb3M6IFwiICsgcG9zICsgXCJdXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHBvcyA9IHRoaXMuX3Njcm9sbGVyLmdldFBvc01heCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gcG9zIOOBruOBv+WFiOmnhuOBkeOBpuabtOaWsFxyXG4gICAgICAgICAgICAgICAgdGhpcy5fbGFzdEFjdGl2ZVBhZ2VDb250ZXh0LnBvcyA9IHBvcztcclxuICAgICAgICAgICAgICAgIGlmIChwb3MgIT09IHRoaXMuX3Njcm9sbGVyLmdldFBvcygpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2Nyb2xsZXIuc2Nyb2xsVG8ocG9zLCBhbmltYXRlLCB0aW1lKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOaMh+WumuOBleOCjOOBnyBMaXN0SXRlbVZpZXcg44Gu6KGo56S644KS5L+d6Ki8XHJcbiAgICAgICAgZW5zdXJlVmlzaWJsZShpbmRleDogbnVtYmVyLCBvcHRpb25zPzogRW5zdXJlVmlzaWJsZU9wdGlvbnMpOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKGluZGV4IDwgMCB8fCB0aGlzLl9saW5lcy5sZW5ndGggPD0gaW5kZXgpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihUQUcgKyBcImVuc3VyZVZpc2libGUoKSwgaW52YWxpZCBpbmRleCwgbm9vcC4gW2luZGV4OiBcIiArIGluZGV4ICsgXCJdXCIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLl9zY3JvbGxlcikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFRBRyArIFwic2Nyb2xsZXIgaXMgbm90IHJlYWR5LlwiKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IHRoaXMuX2xpbmVzW2luZGV4XTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBkZWZhdWx0T3B0aW9uczogRW5zdXJlVmlzaWJsZU9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFydGlhbE9LOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIHNldFRvcDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgYW5pbWF0ZTogdGhpcy5fc2V0dGluZ3MuZW5hYmxlQW5pbWF0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgIHRpbWU6IHRoaXMuX3NldHRpbmdzLmFuaW1hdGlvbkR1cmF0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrOiAoKTogdm9pZCA9PiB7IC8qIG5vb3AgKi8gfSxcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBjb25zdCBvcGVyYXRpb246IEVuc3VyZVZpc2libGVPcHRpb25zID0gJC5leHRlbmQoe30sIGRlZmF1bHRPcHRpb25zLCBvcHRpb25zKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50U2NvcGUgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZnJvbTogdGhpcy5fc2Nyb2xsZXIuZ2V0UG9zKCksXHJcbiAgICAgICAgICAgICAgICAgICAgdG86IHRoaXMuX3Njcm9sbGVyLmdldFBvcygpICsgdGhpcy5fYmFzZUhlaWdodCxcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXRTY29wZSA9IHtcclxuICAgICAgICAgICAgICAgICAgICBmcm9tOiB0YXJnZXQub2Zmc2V0LFxyXG4gICAgICAgICAgICAgICAgICAgIHRvOiB0YXJnZXQub2Zmc2V0ICsgdGFyZ2V0LmhlaWdodCxcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgaXNJblNjb3BlID0gKCk6IGJvb2xlYW4gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcGVyYXRpb24ucGFydGlhbE9LKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0YXJnZXRTY29wZS5mcm9tIDw9IGN1cnJlbnRTY29wZS5mcm9tKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudFNjb3BlLmZyb20gPD0gdGFyZ2V0U2NvcGUudG8pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldFNjb3BlLmZyb20gPD0gY3VycmVudFNjb3BlLnRvKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50U2NvcGUuZnJvbSA8PSB0YXJnZXRTY29wZS5mcm9tICYmIHRhcmdldFNjb3BlLnRvIDw9IGN1cnJlbnRTY29wZS50bykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGRldGVjdFBvc2l0aW9uID0gKCk6IG51bWJlciA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldFNjb3BlLmZyb20gPCBjdXJyZW50U2NvcGUuZnJvbSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGFyZ2V0U2NvcGUuZnJvbTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRTY29wZS5mcm9tIDwgdGFyZ2V0U2NvcGUuZnJvbSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGFyZ2V0Lm9mZnNldCAtIHRhcmdldC5oZWlnaHQ7IC8vIGJvdHRvbSDlkIjjgo/jgZvjga/mg4XloLHkuI3otrPjgavjgojjgorkuI3lj69cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oVEFHICsgXCJsb2dpYyBlcnJvci5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IHBvczogbnVtYmVyO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChvcGVyYXRpb24uc2V0VG9wKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9zID0gdGFyZ2V0U2NvcGUuZnJvbTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaXNJblNjb3BlKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBub29wLlxyXG4gICAgICAgICAgICAgICAgICAgIG9wZXJhdGlvbi5jYWxsYmFjaygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9zID0gZGV0ZWN0UG9zaXRpb24oKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyDoo5zmraNcclxuICAgICAgICAgICAgICAgIGlmIChwb3MgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9zID0gMDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5fc2Nyb2xsZXIuZ2V0UG9zTWF4KCkgPCBwb3MpIHtcclxuICAgICAgICAgICAgICAgICAgICBwb3MgPSB0aGlzLl9zY3JvbGxlci5nZXRQb3NNYXgoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KG9wZXJhdGlvbi5jYWxsYmFjaywgb3BlcmF0aW9uLnRpbWUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxUbyhwb3MsIG9wZXJhdGlvbi5hbmltYXRlLCBvcGVyYXRpb24udGltZSk7XHJcbiAgICAgICAgICAgIH0pKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIGltcGxlbWVudHM6IElMaXN0Vmlld0ZyYW1ld29yazpcclxuXHJcbiAgICAgICAgLy8hIFNjcm9sbCBNYXAg44Gu6auY44GV44KS5Y+W5b6XXHJcbiAgICAgICAgZ2V0U2Nyb2xsTWFwSGVpZ2h0KCk6IG51bWJlciB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl8kbWFwID8gdGhpcy5fbWFwSGVpZ2h0IDogMDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISBTY3JvbGwgTWFwIOOBrumrmOOBleOCkuabtOaWsC4gZnJhbWV3b3JrIOOBjOS9v+eUqOOBmeOCiy5cclxuICAgICAgICB1cGRhdGVTY3JvbGxNYXBIZWlnaHQoZGVsdGE6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fJG1hcCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbWFwSGVpZ2h0ICs9IGRlbHRhO1xyXG4gICAgICAgICAgICAgICAgLy8gZm9yIGZhaWwgc2FmZS5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9tYXBIZWlnaHQgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbWFwSGVpZ2h0ID0gMDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuXyRtYXAuaGVpZ2h0KHRoaXMuX21hcEhlaWdodCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDlhoXpg6ggUHJvZmlsZSDjga7mm7TmlrAuIGZyYW1ld29yayDjgYzkvb/nlKjjgZnjgosuXHJcbiAgICAgICAgdXBkYXRlUHJvZmlsZXMoZnJvbTogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGxldCBpOiBudW1iZXIsIG46IG51bWJlcjtcclxuICAgICAgICAgICAgbGV0IGxhc3Q6IExpbmVQcm9maWxlO1xyXG4gICAgICAgICAgICBmb3IgKGkgPSBmcm9tLCBuID0gdGhpcy5fbGluZXMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoMCA8IGkpIHtcclxuICAgICAgICAgICAgICAgICAgICBsYXN0ID0gdGhpcy5fbGluZXNbaSAtIDFdO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2xpbmVzW2ldLmluZGV4ID0gbGFzdC5pbmRleCArIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbGluZXNbaV0ub2Zmc2V0ID0gbGFzdC5vZmZzZXQgKyBsYXN0LmhlaWdodDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbGluZXNbaV0uaW5kZXggPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2xpbmVzW2ldLm9mZnNldCA9IDA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISBTY3JvbGwgTWFwIEVsZW1lbnQg44KS5Y+W5b6XLiBmcmFtZXdvcmsg44GM5L2/55So44GZ44KLLlxyXG4gICAgICAgIGdldFNjcm9sbE1hcEVsZW1lbnQoKTogSlF1ZXJ5IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuXyRtYXAgfHwgJChcIlwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDjg6rjgrXjgqTjgq/jg6vlj6/og73jgaogRWxlbWVudCDjgpLlj5blvpcuIGZyYW1ld29yayDjgYzkvb/nlKjjgZnjgosuXHJcbiAgICAgICAgZmluZFJlY3ljbGVFbGVtZW50cygpOiBKUXVlcnkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fJG1hcCA/IHRoaXMuXyRtYXAuZmluZChfQ29uZmlnLlJFQ1lDTEVfQ0xBU1NfU0VMRUNUT1IpIDogJChcIlwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISBMaXN0Vmlld09wdGlvbnMg44KS5Y+W5b6XLiBmcmFtZXdvcmsg44GM5L2/55So44GZ44KLLlxyXG4gICAgICAgIGdldExpc3RWaWV3T3B0aW9ucygpOiBMaXN0Vmlld09wdGlvbnMge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc2V0dGluZ3M7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIHByaXZhdGUgbWV0aG9kOlxyXG5cclxuICAgICAgICAvLyEgU2Nyb2xsZXIg55So55Kw5aKD6Kit5a6aXHJcbiAgICAgICAgcHJpdmF0ZSBzZXRTY3JvbGxlckNvbmRpdGlvbigpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5fc2Nyb2xsZXIub24oXCJzY3JvbGxcIiwgdGhpcy5fc2Nyb2xsRXZlbnRIYW5kbGVyKTtcclxuICAgICAgICAgICAgdGhpcy5fc2Nyb2xsZXIub24oXCJzY3JvbGxzdG9wXCIsIHRoaXMuX3Njcm9sbFN0b3BFdmVudEhhbmRsZXIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIFNjcm9sbGVyIOeUqOeSsOWig+egtOajhFxyXG4gICAgICAgIHByaXZhdGUgcmVzZXRTY3JvbGxlckNvbmRpdGlvbigpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5fc2Nyb2xsZXIub2ZmKFwic2Nyb2xsc3RvcFwiLCB0aGlzLl9zY3JvbGxTdG9wRXZlbnRIYW5kbGVyKTtcclxuICAgICAgICAgICAgdGhpcy5fc2Nyb2xsZXIub2ZmKFwic2Nyb2xsXCIsIHRoaXMuX3Njcm9sbEV2ZW50SGFuZGxlcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg5pei5a6a44GuIFNjcm9sbGVyIOOCquODluOCuOOCp+OCr+ODiOOBruS9nOaIkFxyXG4gICAgICAgIHByaXZhdGUgY3JlYXRlU2Nyb2xsZXIoKTogSVNjcm9sbGVyIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3NldHRpbmdzLnNjcm9sbGVyRmFjdG9yeSh0aGlzLl8kcm9vdFswXSwgdGhpcy5fc2V0dGluZ3MpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOePvuWcqOOBriBQYWdlIEluZGV4IOOCkuWPluW+l1xyXG4gICAgICAgIHByaXZhdGUgZ2V0UGFnZUluZGV4KCk6IG51bWJlciB7XHJcbiAgICAgICAgICAgIGxldCBpOiBudW1iZXIsIG46IG51bWJlcjtcclxuICAgICAgICAgICAgbGV0IHBhZ2U6IFBhZ2VQcm9maWxlO1xyXG4gICAgICAgICAgICBsZXQgY2FuZGlkYXRlOiBudW1iZXI7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBzY3JvbGxQb3MgPSB0aGlzLl9zY3JvbGxlciA/IHRoaXMuX3Njcm9sbGVyLmdldFBvcygpIDogMDtcclxuICAgICAgICAgICAgY29uc3Qgc2Nyb2xsUG9zTWF4ID0gdGhpcy5fc2Nyb2xsZXIgPyB0aGlzLl9zY3JvbGxlci5nZXRQb3NNYXgoKSA6IDA7XHJcbiAgICAgICAgICAgIGNvbnN0IHNjcm9sbE1hcFNpemUgPSAoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbGFzdFBhZ2UgPSB0aGlzLmdldExhc3RQYWdlKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAobnVsbCAhPSBsYXN0UGFnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBsYXN0UGFnZS5vZmZzZXQgKyBsYXN0UGFnZS5oZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9iYXNlSGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KSgpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgcG9zID0gKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICgwID09PSBzY3JvbGxQb3NNYXggfHwgc2Nyb2xsUG9zTWF4IDw9IHRoaXMuX2Jhc2VIZWlnaHQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNjcm9sbFBvcyAqIHNjcm9sbE1hcFNpemUgLyBzY3JvbGxQb3NNYXg7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pKCk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCB2YWxpZFJhbmdlID0gKF9wYWdlOiBQYWdlUHJvZmlsZSk6IGJvb2xlYW4gPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKG51bGwgPT0gX3BhZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKF9wYWdlLm9mZnNldCA8PSBwb3MgJiYgcG9zIDw9IF9wYWdlLm9mZnNldCArIF9wYWdlLmhlaWdodCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5fYmFzZUhlaWdodCA8PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFRBRyArIFwiaW52YWxpZCBiYXNlIGhlaWdodDogXCIgKyB0aGlzLl9iYXNlSGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjYW5kaWRhdGUgPSBNYXRoLmZsb29yKHBvcyAvIHRoaXMuX2Jhc2VIZWlnaHQpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fcGFnZXMubGVuZ3RoIDw9IGNhbmRpZGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgY2FuZGlkYXRlID0gdGhpcy5fcGFnZXMubGVuZ3RoIC0gMTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcGFnZSA9IHRoaXMuX3BhZ2VzW2NhbmRpZGF0ZV07XHJcbiAgICAgICAgICAgIGlmICh2YWxpZFJhbmdlKHBhZ2UpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFnZS5pbmRleDtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChwb3MgPCBwYWdlLm9mZnNldCkge1xyXG4gICAgICAgICAgICAgICAgZm9yIChpID0gY2FuZGlkYXRlIC0gMTsgaSA+PSAwOyBpLS0pIHtcclxuICAgICAgICAgICAgICAgICAgICBwYWdlID0gdGhpcy5fcGFnZXNbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbGlkUmFuZ2UocGFnZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhZ2UuaW5kZXg7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFRBRyArIFwidW5rbm93biBwYWdlIGluZGV4LlwiKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZm9yIChpID0gY2FuZGlkYXRlICsgMSwgbiA9IHRoaXMuX3BhZ2VzLmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhZ2UgPSB0aGlzLl9wYWdlc1tpXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodmFsaWRSYW5nZShwYWdlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcGFnZS5pbmRleDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oVEFHICsgXCJ1bmtub3duIHBhZ2UgaW5kZXguXCIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3BhZ2VzLmxlbmd0aCAtIDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOOCueOCr+ODreODvOODq+OCpOODmeODs+ODiFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHBvcyB7TnVtYmVyfSBbaW5dIOOCueOCr+ODreODvOODq+ODneOCuOOCt+ODp+ODs1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByaXZhdGUgb25TY3JvbGwocG9zOiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2FjdGl2ZSAmJiAwIDwgdGhpcy5fcGFnZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50UGFnZUluZGV4ID0gdGhpcy5nZXRQYWdlSW5kZXgoKTtcclxuICAgICAgICAgICAgICAgIC8vIFRPRE86IOiqv+aVtFxyXG4gICAgICAgICAgICAgICAgaWYgKF9VdGlscy5hYnMocG9zIC0gdGhpcy5fbGFzdEFjdGl2ZVBhZ2VDb250ZXh0LnBvcykgPCB0aGlzLl9zZXR0aW5ncy5zY3JvbGxSZWZyZXNoRGlzdGFuY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fbGFzdEFjdGl2ZVBhZ2VDb250ZXh0LmluZGV4ICE9PSBjdXJyZW50UGFnZUluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuX2xhc3RBY3RpdmVQYWdlQ29udGV4dC5wb3MgPSBwb3M7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOOCueOCr+ODreODvOODq+WBnOatouOCpOODmeODs+ODiFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHBvcyB7TnVtYmVyfSBbaW5dIOOCueOCr+ODreODvOODq+ODneOCuOOCt+ODp+ODs1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByaXZhdGUgb25TY3JvbGxTdG9wKHBvczogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9hY3RpdmUgJiYgMCA8IHRoaXMuX3BhZ2VzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY3VycmVudFBhZ2VJbmRleCA9IHRoaXMuZ2V0UGFnZUluZGV4KCk7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fbGFzdEFjdGl2ZVBhZ2VDb250ZXh0LmluZGV4ICE9PSBjdXJyZW50UGFnZUluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9sYXN0QWN0aXZlUGFnZUNvbnRleHQucG9zID0gcG9zO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg5pyA5b6M44Gu44Oa44O844K444KS5Y+W5b6XXHJcbiAgICAgICAgcHJpdmF0ZSBnZXRMYXN0UGFnZSgpOiBQYWdlUHJvZmlsZSB7XHJcbiAgICAgICAgICAgIGlmICgwIDwgdGhpcy5fcGFnZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fcGFnZXNbdGhpcy5fcGFnZXMubGVuZ3RoIC0gMV07XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog44Oa44O844K45Yy65YiG44Gu44Ki44K144Kk44OzXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gZnJvbSB7TnVtYmVyfSBbaW5dIHBhZ2UgaW5kZXgg44KS5oyH5a6aXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSBhc3NpZ25QYWdlKGZyb20/OiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICAgICAgbGV0IGk6IG51bWJlciwgbjogbnVtYmVyO1xyXG4gICAgICAgICAgICBpZiAobnVsbCA9PSBmcm9tKSB7XHJcbiAgICAgICAgICAgICAgICBmcm9tID0gMDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJQYWdlKGZyb20pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IGxpbmVJbmRleCA9IDA7XHJcbiAgICAgICAgICAgICAgICBsZXQgbGFzdFBhZ2UgPSB0aGlzLmdldExhc3RQYWdlKCk7XHJcbiAgICAgICAgICAgICAgICBsZXQgbGFzdExpbmU6IExpbmVQcm9maWxlO1xyXG4gICAgICAgICAgICAgICAgbGV0IHRlbXBQYWdlOiBQYWdlUHJvZmlsZTtcclxuICAgICAgICAgICAgICAgIGlmIChudWxsID09IGxhc3RQYWdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGFzdFBhZ2UgPSBuZXcgUGFnZVByb2ZpbGUoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9wYWdlcy5wdXNoKGxhc3RQYWdlKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGFzdExpbmUgPSBsYXN0UGFnZS5nZXRMaW5lUHJvZmlsZUxhc3QoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPSBsYXN0TGluZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsaW5lSW5kZXggPSBsYXN0TGluZS5pbmRleCArIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGFzaWduZWUgPSB0aGlzLl9saW5lcy5zbGljZShsaW5lSW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgZm9yIChpID0gMCwgbiA9IGFzaWduZWUubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX2Jhc2VIZWlnaHQgPD0gbGFzdFBhZ2UuaGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RQYWdlLm5vcm1hbGl6ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wUGFnZSA9IGxhc3RQYWdlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wUGFnZSA9IG5ldyBQYWdlUHJvZmlsZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wUGFnZS5pbmRleCA9IGxhc3RQYWdlLmluZGV4ICsgMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcFBhZ2Uub2Zmc2V0ID0gbGFzdFBhZ2Uub2Zmc2V0ICsgbGFzdFBhZ2UuaGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXN0UGFnZSA9IHRlbXBQYWdlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9wYWdlcy5wdXNoKGxhc3RQYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYXNpZ25lZVtpXS5wYWdlSW5kZXggPSBsYXN0UGFnZS5pbmRleDtcclxuICAgICAgICAgICAgICAgICAgICBsYXN0UGFnZS5wdXNoKGFzaWduZWVbaV0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgbGFzdFBhZ2Uubm9ybWFsaXplKCk7XHJcbiAgICAgICAgICAgIH0pKCk7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5fc2Nyb2xsZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3Njcm9sbGVyLnVwZGF0ZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDjg5rjg7zjgrjljLrliIbjga7op6PpmaRcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBmcm9tIHtOdW1iZXJ9IFtpbl0gcGFnZSBpbmRleCDjgpLmjIflrppcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlIGNsZWFyUGFnZShmcm9tPzogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmIChudWxsID09IGZyb20pIHtcclxuICAgICAgICAgICAgICAgIGZyb20gPSAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuX3BhZ2VzID0gdGhpcy5fcGFnZXMuc2xpY2UoMCwgZnJvbSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIm5hbWVzcGFjZSBDRFAuVUkge1xyXG5cclxuICAgIGNvbnN0IFRBRyA9IFwiW0NEUC5VSS5MaXN0Vmlld10gXCI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAaW50ZXJmYWNlIExpc3RWaWV3Q29uc3RydWN0T3B0aW9uc1xyXG4gICAgICogQGJyaWVmIExpc3RWaWV3IOOBuOOBruWIneacn+WMluaDheWgseOCkuagvOe0jeOBmeOCi+OCpOODs+OCv+ODvOODleOCp+OCpOOCueOCr+ODqeOCuVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIExpc3RWaWV3Q29uc3RydWN0T3B0aW9uczxUTW9kZWwgZXh0ZW5kcyBCYWNrYm9uZS5Nb2RlbCA9IEJhY2tib25lLk1vZGVsPlxyXG4gICAgICAgIGV4dGVuZHMgTGlzdFZpZXdPcHRpb25zLCBCYWNrYm9uZS5WaWV3T3B0aW9uczxUTW9kZWw+IHtcclxuICAgICAgICAkZWw/OiBKUXVlcnk7XHJcbiAgICAgICAgaW5pdGlhbEhlaWdodD86IG51bWJlcjsgICAgLy8hPCDpq5jjgZXjga7liJ3mnJ/lgKRcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBjbGFzcyBMaXN0Vmlld1xyXG4gICAgICogQGJyaWVmIOODoeODouODqueuoeeQhuapn+iDveOCkuaPkOS+m+OBmeOCi+S7ruaDs+ODquOCueODiOODk+ODpeODvOOCr+ODqeOCuVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgY2xhc3MgTGlzdFZpZXc8VE1vZGVsIGV4dGVuZHMgQmFja2JvbmUuTW9kZWwgPSBCYWNrYm9uZS5Nb2RlbD5cclxuICAgICAgICBleHRlbmRzIEJhY2tib25lLlZpZXc8VE1vZGVsPiBpbXBsZW1lbnRzIElMaXN0VmlldywgSUNvbXBvc2FibGVWaWV3IHtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBfc2Nyb2xsTWdyOiBTY3JvbGxNYW5hZ2VyID0gbnVsbDsgICAgLy8hPCBzY3JvbGwg44Kz44Ki44Ot44K444OD44KvXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIGNvbnN0cnVjdG9yXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gb3B0aW9ucyB7TGlzdFZpZXdDb25zdHJ1Y3RPcHRpb25zfSBbaW5dIOOCquODl+OCt+ODp+ODs1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGNvbnN0cnVjdG9yKG9wdGlvbnM/OiBMaXN0Vmlld0NvbnN0cnVjdE9wdGlvbnM8VE1vZGVsPikge1xyXG4gICAgICAgICAgICBzdXBlcihvcHRpb25zKTtcclxuICAgICAgICAgICAgY29uc3Qgb3B0ID0gb3B0aW9ucyB8fCB7fTtcclxuICAgICAgICAgICAgdGhpcy5fc2Nyb2xsTWdyID0gbmV3IFNjcm9sbE1hbmFnZXIob3B0aW9ucyk7XHJcbiAgICAgICAgICAgIGlmIChvcHQuJGVsKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkZWxlZ2F0ZXMgPSAoPGFueT50aGlzKS5ldmVudHMgPyB0cnVlIDogZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldEVsZW1lbnQob3B0LiRlbCwgZGVsZWdhdGVzKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGhlaWdodCA9IG9wdC5pbml0aWFsSGVpZ2h0IHx8IHRoaXMuJGVsLmhlaWdodCgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fc2Nyb2xsTWdyLmluaXRpYWxpemUodGhpcy4kZWwsIGhlaWdodCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gT3ZlcnJpZGU6IEJhY2tib25lLlZpZXdcclxuXHJcbiAgICAgICAgLy8hIOWvvuixoSBlbGVtZW50IOOBruioreWumlxyXG4gICAgICAgIHNldEVsZW1lbnQoZWxlbWVudDogSFRNTEVsZW1lbnQsIGRlbGVnYXRlPzogYm9vbGVhbik6IEJhY2tib25lLlZpZXc8VE1vZGVsPjtcclxuICAgICAgICBzZXRFbGVtZW50KGVsZW1lbnQ6IEpRdWVyeSwgZGVsZWdhdGU/OiBib29sZWFuKTogQmFja2JvbmUuVmlldzxUTW9kZWw+O1xyXG4gICAgICAgIHNldEVsZW1lbnQoZWxlbWVudDogYW55LCBkZWxlZ2F0ZT86IGJvb2xlYW4pOiBCYWNrYm9uZS5WaWV3PFRNb2RlbD4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fc2Nyb2xsTWdyKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCAkZWwgPSAkKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fc2Nyb2xsTWdyLmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3Njcm9sbE1nci5pbml0aWFsaXplKCRlbCwgJGVsLmhlaWdodCgpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gc3VwZXIuc2V0RWxlbWVudChlbGVtZW50LCBkZWxlZ2F0ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg56C05qOEXHJcbiAgICAgICAgcmVtb3ZlKCk6IEJhY2tib25lLlZpZXc8VE1vZGVsPiB7XHJcbiAgICAgICAgICAgIHRoaXMuX3Njcm9sbE1nci5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgIHJldHVybiBzdXBlci5yZW1vdmUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gSW1wbGVtZW50czogSUxpc3RWaWV3IFByb2ZpbGUg566h55CGXHJcblxyXG4gICAgICAgIC8vISDliJ3mnJ/ljJbmuIjjgb/jgYvliKTlrppcclxuICAgICAgICBpc0luaXRpYWxpemVkKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc2Nyb2xsTWdyLmlzSW5pdGlhbGl6ZWQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDjg5fjg63jg5Hjg4bjgqPjgpLmjIflrprjgZfjgabjgIFMaW5lUHJvZmlsZSDjgpLnrqHnkIZcclxuICAgICAgICBhZGRJdGVtKFxyXG4gICAgICAgICAgICBoZWlnaHQ6IG51bWJlcixcclxuICAgICAgICAgICAgaW5pdGlhbGl6ZXI6IG5ldyAob3B0aW9ucz86IGFueSkgPT4gQmFzZUxpc3RJdGVtVmlldyxcclxuICAgICAgICAgICAgaW5mbzogYW55LFxyXG4gICAgICAgICAgICBpbnNlcnRUbz86IG51bWJlclxyXG4gICAgICAgICk6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLl9hZGRMaW5lKG5ldyBMaW5lUHJvZmlsZSh0aGlzLl9zY3JvbGxNZ3IsIE1hdGguZmxvb3IoaGVpZ2h0KSwgaW5pdGlhbGl6ZXIsIGluZm8pLCBpbnNlcnRUbyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg5oyH5a6a44GX44GfIEl0ZW0g44KS5YmK6ZmkXHJcbiAgICAgICAgcmVtb3ZlSXRlbShpbmRleDogbnVtYmVyLCBzaXplPzogbnVtYmVyLCBkZWxheT86IG51bWJlcik6IHZvaWQ7XHJcbiAgICAgICAgcmVtb3ZlSXRlbShpbmRleDogbnVtYmVyW10sIGRlbGF5PzogbnVtYmVyKTogdm9pZDtcclxuICAgICAgICByZW1vdmVJdGVtKGluZGV4OiBhbnksIGFyZzI/OiBudW1iZXIsIGFyZzM/OiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5fc2Nyb2xsTWdyLnJlbW92ZUl0ZW0oaW5kZXgsIGFyZzIsIGFyZzMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOaMh+WumuOBl+OBnyBJdGVtIOOBq+ioreWumuOBl+OBn+aDheWgseOCkuWPluW+l1xyXG4gICAgICAgIGdldEl0ZW1JbmZvKHRhcmdldDogbnVtYmVyKTogYW55O1xyXG4gICAgICAgIGdldEl0ZW1JbmZvKHRhcmdldDogSlF1ZXJ5LkV2ZW50KTogYW55O1xyXG4gICAgICAgIGdldEl0ZW1JbmZvKHRhcmdldDogYW55KTogYW55IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Njcm9sbE1nci5nZXRJdGVtSW5mbyh0YXJnZXQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOOCouOCr+ODhuOCo+ODluODmuODvOOCuOOCkuabtOaWsFxyXG4gICAgICAgIHJlZnJlc2goKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuX3Njcm9sbE1nci5yZWZyZXNoKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg5pyq44Ki44K144Kk44Oz44Oa44O844K444KS5qeL56+JXHJcbiAgICAgICAgdXBkYXRlKCk6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLl9zY3JvbGxNZ3IudXBkYXRlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg44Oa44O844K444Ki44K144Kk44Oz44KS5YaN5qeL5oiQXHJcbiAgICAgICAgcmVidWlsZCgpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5fc2Nyb2xsTWdyLnJlYnVpbGQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDnrqHovYTjg4fjg7zjgr/jgpLnoLTmo4RcclxuICAgICAgICByZWxlYXNlKCk6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLl9zY3JvbGxNZ3IucmVsZWFzZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBJbXBsZW1lbnRzOiBJTGlzdFZpZXcgUHJvZmlsZSBCYWNrdXAgLyBSZXN0b3JlXHJcblxyXG4gICAgICAgIC8vISDlhoXpg6jjg4fjg7zjgr/jgpLjg5Djg4Pjgq/jgqLjg4Pjg5dcclxuICAgICAgICBiYWNrdXAoa2V5OiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Njcm9sbE1nci5iYWNrdXAoa2V5KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDlhoXpg6jjg4fjg7zjgr/jgpLjg6rjgrnjg4jjgqJcclxuICAgICAgICByZXN0b3JlKGtleTogc3RyaW5nLCByZWJ1aWxkOiBib29sZWFuID0gdHJ1ZSk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc2Nyb2xsTWdyLnJlc3RvcmUoa2V5LCByZWJ1aWxkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDjg5Djg4Pjgq/jgqLjg4Pjg5fjg4fjg7zjgr/jga7mnInnhKFcclxuICAgICAgICBoYXNCYWNrdXAoa2V5OiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Njcm9sbE1nci5oYXNCYWNrdXAoa2V5KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDjg5Djg4Pjgq/jgqLjg4Pjg5fjg4fjg7zjgr/jga7noLTmo4RcclxuICAgICAgICBjbGVhckJhY2t1cChrZXk/OiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Njcm9sbE1nci5jbGVhckJhY2t1cChrZXkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOODkOODg+OCr+OCouODg+ODl+ODh+ODvOOCv+OBq+OCouOCr+OCu+OCuVxyXG4gICAgICAgIGdldCBiYWNrdXBEYXRhKCk6IGFueSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zY3JvbGxNZ3IgPyB0aGlzLl9zY3JvbGxNZ3IuYmFja3VwRGF0YSA6IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIEltcGxlbWVudHM6IElMaXN0VmlldyBTY3JvbGxcclxuXHJcbiAgICAgICAgLy8hIOOCueOCr+ODreODvOODq+OCpOODmeODs+ODiOODj+ODs+ODieODqeioreWumi/op6PpmaRcclxuICAgICAgICBzZXRTY3JvbGxIYW5kbGVyKGhhbmRsZXI6IChldmVudDogSlF1ZXJ5LkV2ZW50KSA9PiB2b2lkLCBvbjogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLl9zY3JvbGxNZ3Iuc2V0U2Nyb2xsSGFuZGxlcihoYW5kbGVyLCBvbik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg44K544Kv44Ot44O844Or57WC5LqG44Kk44OZ44Oz44OI44OP44Oz44OJ44Op6Kit5a6aL+ino+mZpFxyXG4gICAgICAgIHNldFNjcm9sbFN0b3BIYW5kbGVyKGhhbmRsZXI6IChldmVudDogSlF1ZXJ5LkV2ZW50KSA9PiB2b2lkLCBvbjogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLl9zY3JvbGxNZ3Iuc2V0U2Nyb2xsU3RvcEhhbmRsZXIoaGFuZGxlciwgb24pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOOCueOCr+ODreODvOODq+S9jee9ruOCkuWPluW+l1xyXG4gICAgICAgIGdldFNjcm9sbFBvcygpOiBudW1iZXIge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc2Nyb2xsTWdyLmdldFNjcm9sbFBvcygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOOCueOCr+ODreODvOODq+S9jee9ruOBruacgOWkp+WApOOCkuWPluW+l1xyXG4gICAgICAgIGdldFNjcm9sbFBvc01heCgpOiBudW1iZXIge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc2Nyb2xsTWdyLmdldFNjcm9sbFBvc01heCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOOCueOCr+ODreODvOODq+S9jee9ruOCkuaMh+WumlxyXG4gICAgICAgIHNjcm9sbFRvKHBvczogbnVtYmVyLCBhbmltYXRlPzogYm9vbGVhbiwgdGltZT86IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLl9zY3JvbGxNZ3Iuc2Nyb2xsVG8ocG9zLCBhbmltYXRlLCB0aW1lKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDmjIflrprjgZXjgozjgZ8gTGlzdEl0ZW1WaWV3IOOBruihqOekuuOCkuS/neiovFxyXG4gICAgICAgIGVuc3VyZVZpc2libGUoaW5kZXg6IG51bWJlciwgb3B0aW9ucz86IEVuc3VyZVZpc2libGVPcHRpb25zKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuX3Njcm9sbE1nci5lbnN1cmVWaXNpYmxlKGluZGV4LCBvcHRpb25zKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gSW1wbGVtZW50czogSUxpc3RWaWV3IFByb3BlcnRpZXNcclxuXHJcbiAgICAgICAgLy8hIGNvcmUgZnJhbWV3b3JrIGFjY2Vzc1xyXG4gICAgICAgIGdldCBjb3JlKCk6IElMaXN0Vmlld0ZyYW1ld29yayB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zY3JvbGxNZ3I7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIEltcGxlbWVudHM6IElMaXN0VmlldyBJbnRlcm5hbCBJL0ZcclxuXHJcbiAgICAgICAgLy8hIOeZu+mMsiBmcmFtZXdvcmsg44GM5L2/55So44GZ44KLXHJcbiAgICAgICAgX2FkZExpbmUoX2xpbmU6IGFueSwgaW5zZXJ0VG8/OiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5fc2Nyb2xsTWdyLl9hZGRMaW5lKF9saW5lLCBpbnNlcnRUbyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIEltcGxlbWVudHM6IElDb21wb3NhYmxlVmlld1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDjgZnjgafjgavlrprnvqnjgZXjgozjgZ8gQmFja2JvbmUuVmlldyDjgpLln7rlupXjgq/jg6njgrnjgavoqK3lrprjgZfjgIFleHRlbmQg44KS5a6f6KGM44GZ44KL44CCXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gZGVyaXZlcyAgICAgICAgIHtCYWNrYm9uZS5WaWV3fEJhY2tib25lLlZpZXdbXX0gW2luXSDlkIjmiJDlhYPjga4gVmlldyDjgq/jg6njgrlcclxuICAgICAgICAgKiBAcGFyYW0gcHJvcGVydGllcyAgICAgIHtPYmplY3R9ICAgICAgICAgICAgICAgICAgICAgICAgW2luXSBwcm90b3R5cGUg44OX44Ot44OR44OG44KjXHJcbiAgICAgICAgICogQHBhcmFtIGNsYXNzUHJvcGVydGllcyB7T2JqZWN0fSAgICAgICAgICAgICAgICAgICAgICAgIFtpbl0gc3RhdGljIOODl+ODreODkeODhuOCo1xyXG4gICAgICAgICAqIEByZXR1cm4ge0JhY2tib25lLlZpZXd8QmFja2JvbmUuVmlld1tdfSDmlrDopo/jgavnlJ/miJDjgZXjgozjgZ8gVmlldyDjga7jgrPjg7Pjgrnjg4jjg6njgq/jgr9cclxuICAgICAgICAgKi9cclxuICAgICAgICBzdGF0aWMgY29tcG9zZShkZXJpdmVzOiBWaWV3Q29uc3RydWN0b3IgfCBWaWV3Q29uc3RydWN0b3JbXSwgcHJvcGVydGllczogYW55LCBjbGFzc1Byb3BlcnRpZXM/OiBhbnkpOiBWaWV3Q29uc3RydWN0b3Ige1xyXG4gICAgICAgICAgICBjb25zdCBjb21wb3NlZDogYW55ID0gY29tcG9zZVZpZXdzKExpc3RWaWV3LCBkZXJpdmVzKTtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbXBvc2VkLmV4dGVuZChwcm9wZXJ0aWVzLCBjbGFzc1Byb3BlcnRpZXMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJuYW1lc3BhY2UgQ0RQLlVJIHtcclxuXHJcbiAgICBjb25zdCBUQUcgPSBcIltDRFAuVUkuR3JvdXBMaXN0SXRlbVZpZXddIFwiO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGludGVyZmFjZSBHcm91cExpc3RJdGVtVmlld09wdGlvbnNcclxuICAgICAqIEBicmllZiBHcm91cExpc3RJdGVtVmlldyDjga7jgqrjg5fjgrfjg6fjg7NcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBHcm91cExpc3RJdGVtVmlld09wdGlvbnM8VE1vZGVsIGV4dGVuZHMgQmFja2JvbmUuTW9kZWwgPSBCYWNrYm9uZS5Nb2RlbD4gZXh0ZW5kcyBMaXN0SXRlbVZpZXdPcHRpb25zPFRNb2RlbD4ge1xyXG4gICAgICAgIGdyb3VwUHJvZmlsZT86IEdyb3VwUHJvZmlsZTsgICAgLy8hPCBHcm91cFByb2ZpbGUg44Kk44Oz44K544K/44Oz44K5XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAY2xhc3MgR3JvdXBMaXN0SXRlbVZpZXdcclxuICAgICAqIEBicmllZiBFeHBhbmRhYmxlTGlzdFZpZXcg44GM5omx44GGIExpc3RJdGVtIOOCs+ODs+ODhuODiuOCr+ODqeOCuVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgY2xhc3MgR3JvdXBMaXN0SXRlbVZpZXc8VE1vZGVsIGV4dGVuZHMgQmFja2JvbmUuTW9kZWwgPSBCYWNrYm9uZS5Nb2RlbD4gZXh0ZW5kcyBMaXN0SXRlbVZpZXc8VE1vZGVsPiB7XHJcblxyXG4gICAgICAgIHByaXZhdGUgX2dyb3VwUHJvZmlsZTogR3JvdXBQcm9maWxlID0gbnVsbDsgICAgLy8hPCDnrqHovYTjga4gR3JvdXBQcm9maWxlXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIGNvbnN0cnVjdG9yXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gb3B0aW9ucyB7R3JvdXBMaW5lVmlld09wdGlvbnN9IFtpbl0g44Kq44OX44K344On44OzXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgY29uc3RydWN0b3Iob3B0aW9uczogR3JvdXBMaXN0SXRlbVZpZXdPcHRpb25zPFRNb2RlbD4pIHtcclxuICAgICAgICAgICAgc3VwZXIob3B0aW9ucyk7XHJcbiAgICAgICAgICAgIHRoaXMuX2dyb3VwUHJvZmlsZSA9IG9wdGlvbnMuZ3JvdXBQcm9maWxlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBwcm90ZWN0ZWQgbWV0aG9kc1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDlsZXplovnirbmhYvjgpLliKTlrppcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IHRydWU6IOWxlemWiywgZmFsc2U65Y+O5p2fXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJvdGVjdGVkIGlzRXhwYW5kZWQoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9ncm91cFByb2ZpbGUuaXNFeHBhbmRlZCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOWxlemWi+S4reOBi+WIpOWumlxyXG4gICAgICAgIHByb3RlY3RlZCBpc0V4cGFuZGluZygpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgcmV0dXJuICg8QmFzZUV4cGFuZGFibGVMaXN0Vmlldz50aGlzLm93bmVyKS5pc0V4cGFuZGluZygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOWPjuadn+S4reOBi+WIpOWumlxyXG4gICAgICAgIHByb3RlY3RlZCBpc0NvbGxhcHNpbmcoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIHJldHVybiAoPEJhc2VFeHBhbmRhYmxlTGlzdFZpZXc+dGhpcy5vd25lcikuaXNDb2xsYXBzaW5nKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg6ZaL6ZaJ5Lit44GL5Yik5a6aXHJcbiAgICAgICAgcHJvdGVjdGVkIGlzU3dpdGNoaW5nKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICByZXR1cm4gKDxCYXNlRXhwYW5kYWJsZUxpc3RWaWV3PnRoaXMub3duZXIpLmlzU3dpdGNoaW5nKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg5a2QIEdyb3VwIOOCkuaMgeOBo+OBpuOBhOOCi+OBi+WIpOWumlxyXG4gICAgICAgIHByb3RlY3RlZCBoYXNDaGlsZHJlbihsYXlvdXRLZXk/OiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2dyb3VwUHJvZmlsZS5oYXNDaGlsZHJlbihsYXlvdXRLZXkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvKiB0c2xpbnQ6ZGlzYWJsZTpuby1iaXR3aXNlICovXHJcblxyXG5uYW1lc3BhY2UgQ0RQLlVJIHtcclxuXHJcbiAgICBjb25zdCBUQUcgPSBcIltDRFAuVUkuRXhwYW5kTWFuYWdlcl0gXCI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAY2xhc3MgRXhwYW5kTWFuYWdlclxyXG4gICAgICogQGJyaWVmIOmWi+mWieeKtuaFi+euoeeQhuOCr+ODqeOCuVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgY2xhc3MgRXhwYW5kTWFuYWdlciBpbXBsZW1lbnRzIElFeHBhbmRNYW5hZ2VyIHtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBfb3duZXI6IEJhc2VFeHBhbmRhYmxlTGlzdFZpZXcgPSBudWxsO1xyXG4gICAgICAgIHByaXZhdGUgX21hcEdyb3VwczogT2JqZWN0ID0ge307ICAgICAgICAgICAgICAgIC8vITwge2lkLCBHcm91cFByb2ZpbGV9IOOBriBtYXBcclxuICAgICAgICBwcml2YXRlIF9hcnlUb3BHcm91cHM6IEdyb3VwUHJvZmlsZVtdID0gW107ICAgICAvLyE8IOesrDHpmo7lsaQgR3JvdXBQcm9maWxlIOOCkuagvOe0jVxyXG4gICAgICAgIHByaXZhdGUgX2xheW91dEtleTogc3RyaW5nID0gbnVsbDtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogY29uc3RydWN0b3JcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBvd25lciB7QmFzZUV4cGFuZGFibGVMaXN0Vmlld30gW2luXSDopqpWaWV3IOOBruOCpOODs+OCueOCv+ODs+OCuVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGNvbnN0cnVjdG9yKG93bmVyOiBCYXNlRXhwYW5kYWJsZUxpc3RWaWV3KSB7XHJcbiAgICAgICAgICAgIHRoaXMuX293bmVyID0gb3duZXI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIEltcGxlbWVudHM6IElFeHBhbmRNYW5hZ2VyXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOaWsOimjyBHcm91cFByb2ZpbGUg44KS5L2c5oiQXHJcbiAgICAgICAgICog55m76Yyy5riI44G/44Gu5aC05ZCI44Gv44Gd44Gu44Kq44OW44K444Kn44Kv44OI44KS6L+U5Y20XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFybWEgaWQge1N0cmluZ30gW2luXSDmlrDopo/jgavkvZzmiJDjgZnjgosgR3JvdXAgSUQg44KS5oyH5a6aLiDmjIflrprjgZfjgarjgYTloLTlkIjjga/oh6rli5XlibLjgormjK/jgopcclxuICAgICAgICAgKiBAcmV0dXJuIHtHcm91cFByb2ZpbGV9IEdyb3VwUHJvZmlsZSDjgqTjg7Pjgrnjgr/jg7PjgrlcclxuICAgICAgICAgKi9cclxuICAgICAgICBuZXdHcm91cChpZD86IHN0cmluZyk6IEdyb3VwUHJvZmlsZSB7XHJcbiAgICAgICAgICAgIGxldCBncm91cDogR3JvdXBQcm9maWxlO1xyXG4gICAgICAgICAgICBpZiAobnVsbCA9PSBpZCkge1xyXG4gICAgICAgICAgICAgICAgaWQgPSBcImdyb3VwLWlkOlwiICsgKFwiMDAwMFwiICsgKE1hdGgucmFuZG9tKCkgKiBNYXRoLnBvdygzNiwgNCkgPDwgMCkudG9TdHJpbmcoMzYpKS5zbGljZSgtNCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG51bGwgIT0gdGhpcy5fbWFwR3JvdXBzW2lkXSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX21hcEdyb3Vwc1tpZF07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZ3JvdXAgPSBuZXcgR3JvdXBQcm9maWxlKGlkLCB0aGlzLl9vd25lcik7XHJcbiAgICAgICAgICAgIHRoaXMuX21hcEdyb3Vwc1tpZF0gPSBncm91cDtcclxuICAgICAgICAgICAgcmV0dXJuIGdyb3VwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog55m76Yyy5riI44G/IEdyb3VwIOOCkuWPluW+l1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcm1hIGlkIHtTdHJpbmd9IFtpbl0g5Y+W5b6X44GZ44KLIEdyb3VwIElEIOOCkuaMh+WumlxyXG4gICAgICAgICAqIEByZXR1cm4ge0dyb3VwUHJvZmlsZX0gR3JvdXBQcm9maWxlIOOCpOODs+OCueOCv+ODs+OCuSAvIG51bGxcclxuICAgICAgICAgKi9cclxuICAgICAgICBnZXRHcm91cChpZDogc3RyaW5nKTogR3JvdXBQcm9maWxlIHtcclxuICAgICAgICAgICAgaWYgKG51bGwgPT0gdGhpcy5fbWFwR3JvdXBzW2lkXSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFRBRyArIFwiZ3JvdXAgaWQ6IFwiICsgaWQgKyBcIiBpcyBub3QgcmVnaXN0ZXJlZC5cIik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fbWFwR3JvdXBzW2lkXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOesrDHpmo7lsaTjga4gR3JvdXAg55m76YyyXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gdG9wR3JvdXAge0dyb3VwUHJvZmlsZX0gW2luXSDmp4vnr4nmuIjjgb8gR3JvdXBQcm9maWxlIOOCpOODs+OCueOCv+ODs+OCuVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHJlZ2lzdGVyVG9wR3JvdXAodG9wR3JvdXA6IEdyb3VwUHJvZmlsZSk6IHZvaWQge1xyXG4gICAgICAgICAgICBsZXQgbGFzdEdyb3VwOiBHcm91cFByb2ZpbGU7XHJcbiAgICAgICAgICAgIGxldCBpbnNlcnRUbzogbnVtYmVyO1xyXG5cclxuICAgICAgICAgICAgLy8g44GZ44Gn44Gr55m76Yyy5riI44G/44Gu5aC05ZCI44GvIHJlc3RvcmUg44GX44GmIGxheW91dCDjgq3jg7zjgZTjgajjgavlvqnlhYPjgZnjgovjgIJcclxuICAgICAgICAgICAgaWYgKFwicmVnaXN0ZXJlZFwiID09PSB0b3BHcm91cC5zdGF0dXMpIHtcclxuICAgICAgICAgICAgICAgIC8vIFRPRE86IG9yaWVudGF0aW9uIGNoYW5nZWQg5pmC44GuIGxheW91dCDjgq3jg7zlpInmm7Tlr77lv5zjgaDjgYzjgIHjgq3jg7zjgavlpInmm7TjgYznhKHjgYTjgajjgY3jga/kuI3lhbflkIjjgajjgarjgovjgIJcclxuICAgICAgICAgICAgICAgIC8vIOOBk+OBriBBUEkg44Gr5a6f6KOF44GM5b+F6KaB44GL44KC5ZCr44KB44Gm6KaL55u044GX44GM5b+F6KaBXHJcbiAgICAgICAgICAgICAgICB0b3BHcm91cC5yZXN0b3JlKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxhc3RHcm91cCA9ICgwIDwgdGhpcy5fYXJ5VG9wR3JvdXBzLmxlbmd0aCkgPyB0aGlzLl9hcnlUb3BHcm91cHNbdGhpcy5fYXJ5VG9wR3JvdXBzLmxlbmd0aCAtIDFdIDogbnVsbDtcclxuICAgICAgICAgICAgaW5zZXJ0VG8gPSAobnVsbCAhPSBsYXN0R3JvdXApID8gbGFzdEdyb3VwLmdldExhc3RMaW5lSW5kZXgodHJ1ZSkgKyAxIDogMDtcclxuICAgICAgICAgICAgaWYgKF8uaXNOYU4oaW5zZXJ0VG8pKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFRBRyArIFwibG9naWMgZXJyb3IsICdpbnNlcnRUbycgaXMgTmFOLlwiKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5fYXJ5VG9wR3JvdXBzLnB1c2godG9wR3JvdXApO1xyXG4gICAgICAgICAgICB0b3BHcm91cC5yZWdpc3RlcihpbnNlcnRUbyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDnrKwx6ZqO5bGk44GuIEdyb3VwIOOCkuWPluW+l1xyXG4gICAgICAgICAqIOOCs+ODlOODvOmFjeWIl+OBjOi/lOOBleOCjOOCi+OBn+OCgeOAgeOCr+ODqeOCpOOCouODs+ODiOOBr+OCreODo+ODg+OCt+ODpeS4jeWPr1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7R3JvdXBQcm9maWxlW119IEdyb3VwUHJvZmlsZSDphY3liJdcclxuICAgICAgICAgKi9cclxuICAgICAgICBnZXRUb3BHcm91cHMoKTogR3JvdXBQcm9maWxlW10ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fYXJ5VG9wR3JvdXBzLnNsaWNlKDApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOOBmeOBueOBpuOBruOCsOODq+ODvOODl+OCkuWxlemWiyAoMemajuWxpClcclxuICAgICAgICBleHBhbmRBbGwoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuX2FyeVRvcEdyb3Vwcy5mb3JFYWNoKChncm91cDogR3JvdXBQcm9maWxlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZ3JvdXAuaGFzQ2hpbGRyZW4oKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGdyb3VwLmV4cGFuZCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDjgZnjgbnjgabjga7jgrDjg6vjg7zjg5fjgpLlj47mnZ8gKDHpmo7lsaQpXHJcbiAgICAgICAgY29sbGFwc2VBbGwoZGVsYXk/OiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5fYXJ5VG9wR3JvdXBzLmZvckVhY2goKGdyb3VwOiBHcm91cFByb2ZpbGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChncm91cC5oYXNDaGlsZHJlbigpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXAuY29sbGFwc2UoZGVsYXkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDlsZXplovkuK3jgYvliKTlrppcclxuICAgICAgICBpc0V4cGFuZGluZygpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX293bmVyLmlzU3RhdHVzSW4oXCJleHBhbmRpbmdcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg5Y+O5p2f5Lit44GL5Yik5a6aXHJcbiAgICAgICAgaXNDb2xsYXBzaW5nKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fb3duZXIuaXNTdGF0dXNJbihcImNvbGxhcHNpbmdcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg6ZaL6ZaJ5Lit44GL5Yik5a6aXHJcbiAgICAgICAgaXNTd2l0Y2hpbmcoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmlzRXhwYW5kaW5nKCkgfHwgdGhpcy5pc0NvbGxhcHNpbmcoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDnirbmhYvlpInmlbDjga7lj4Lnhafjgqvjgqbjg7Pjg4jjga7jgqTjg7Pjgq/jg6rjg6Hjg7Pjg4hcclxuICAgICAgICBzdGF0dXNBZGRSZWYoc3RhdHVzOiBzdHJpbmcpOiBudW1iZXIge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fb3duZXIuc3RhdHVzQWRkUmVmKHN0YXR1cyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg54q25oWL5aSJ5pWw44Gu5Y+C54Wn44Kr44Km44Oz44OI44Gu44OH44Kv44Oq44Oh44Oz44OIXHJcbiAgICAgICAgc3RhdHVzUmVsZWFzZShzdGF0dXM6IHN0cmluZyk6IG51bWJlciB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9vd25lci5zdGF0dXNSZWxlYXNlKHN0YXR1cyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg5Yem55CG44K544Kz44O844OX5q+O44Gr54q25oWL5aSJ5pWw44KS6Kit5a6aXHJcbiAgICAgICAgc3RhdHVzU2NvcGUoc3RhdHVzOiBzdHJpbmcsIGNhbGxiYWNrOiAoKSA9PiB2b2lkKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuX293bmVyLnN0YXR1c1Njb3BlKHN0YXR1cywgY2FsbGJhY2spO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOaMh+WumuOBl+OBn+eKtuaFi+S4reOBp+OBguOCi+OBi+eiuuiqjVxyXG4gICAgICAgIGlzU3RhdHVzSW4oc3RhdHVzOiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX293bmVyLmlzU3RhdHVzSW4oc3RhdHVzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISBsYXlvdXQga2V5IOOCkuWPluW+l1xyXG4gICAgICAgIGdldCBsYXlvdXRLZXkoKTogc3RyaW5nIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2xheW91dEtleTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISBsYXlvdXQga2V5IOOCkuioreWumlxyXG4gICAgICAgIHNldCBsYXlvdXRLZXkoa2V5OiBzdHJpbmcpIHtcclxuICAgICAgICAgICAgdGhpcy5fbGF5b3V0S2V5ID0ga2V5O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOODh+ODvOOCv+OCkuegtOajhFxyXG4gICAgICAgIHJlbGVhc2UoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuX21hcEdyb3VwcyA9IHt9O1xyXG4gICAgICAgICAgICB0aGlzLl9hcnlUb3BHcm91cHMgPSBbXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gSW1wbGVtZW50ZXM6IElCYWNrdXBSZXN0b3JlXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOWGhemDqOODh+ODvOOCv+OCkuODkOODg+OCr+OCouODg+ODl1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGtleSB7U3RyaW5nfSBbaW5dIOODkOODg+OCr+OCouODg+ODl+OCreODvOOCkuaMh+WumlxyXG4gICAgICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IHRydWU6IOaIkOWKnyAvIGZhbHNlOiDlpLHmlZdcclxuICAgICAgICAgKi9cclxuICAgICAgICBiYWNrdXAoa2V5OiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgY29uc3QgX2JhY2t1cCA9IHRoaXMuYmFja3VwRGF0YTtcclxuICAgICAgICAgICAgaWYgKG51bGwgPT0gX2JhY2t1cFtrZXldKSB7XHJcbiAgICAgICAgICAgICAgICBfYmFja3VwW2tleV0gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFwOiB0aGlzLl9tYXBHcm91cHMsXHJcbiAgICAgICAgICAgICAgICAgICAgdG9wczogdGhpcy5fYXJ5VG9wR3JvdXBzLFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOWGhemDqOODh+ODvOOCv+OCkuODquOCueODiOOColxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGtleSAgICAge1N0cmluZ30gIFtpbl0g44OQ44OD44Kv44Ki44OD44OX44Kt44O844KS5oyH5a6aXHJcbiAgICAgICAgICogQHBhcmFtIHJlYnVpbGQge0Jvb2xlYW59IFtpbl0gcmVidWlsZCDjgpLlrp/ooYzjgZnjgovloLTlkIjjga8gdHJ1ZSDjgpLmjIflrppcclxuICAgICAgICAgKiBAcmV0dXJuIHtCb29sZWFufSB0cnVlOiDmiJDlip8gLyBmYWxzZTog5aSx5pWXXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcmVzdG9yZShrZXk6IHN0cmluZywgcmVidWlsZDogYm9vbGVhbiA9IHRydWUpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgY29uc3QgX2JhY2t1cCA9IHRoaXMuYmFja3VwRGF0YTtcclxuXHJcbiAgICAgICAgICAgIGlmIChudWxsID09IF9iYWNrdXBba2V5XSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICgwIDwgdGhpcy5fYXJ5VG9wR3JvdXBzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWxlYXNlKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuX21hcEdyb3VwcyA9IF9iYWNrdXBba2V5XS5tYXA7XHJcbiAgICAgICAgICAgIHRoaXMuX2FyeVRvcEdyb3VwcyA9IF9iYWNrdXBba2V5XS50b3BzO1xyXG5cclxuICAgICAgICAgICAgLy8gbGF5b3V0IOaDheWgseOBrueiuuiqjVxyXG4gICAgICAgICAgICBpZiAodGhpcy5fYXJ5VG9wR3JvdXBzLmxlbmd0aCA8PSAwIHx8ICF0aGlzLl9hcnlUb3BHcm91cHNbMF0uaGFzTGF5b3V0S2V5T2YodGhpcy5sYXlvdXRLZXkpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIOWxlemWi+OBl+OBpuOBhOOCi+OCguOBruOCkueZu+mMslxyXG4gICAgICAgICAgICB0aGlzLl9hcnlUb3BHcm91cHMuZm9yRWFjaCgoZ3JvdXA6IEdyb3VwUHJvZmlsZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgZ3JvdXAucmVzdG9yZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIC8vIOWGjeani+evieOBruS6iOe0hFxyXG4gICAgICAgICAgICBpZiAocmVidWlsZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fb3duZXIucmVidWlsZCgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDjg5Djg4Pjgq/jgqLjg4Pjg5fjg4fjg7zjgr/jga7mnInnhKFcclxuICAgICAgICBoYXNCYWNrdXAoa2V5OiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX293bmVyLmhhc0JhY2t1cChrZXkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOODkOODg+OCr+OCouODg+ODl+ODh+ODvOOCv+OBruegtOajhFxyXG4gICAgICAgIGNsZWFyQmFja3VwKGtleT86IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fb3duZXIuY2xlYXJCYWNrdXAoa2V5KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDjg5Djg4Pjgq/jgqLjg4Pjg5fjg4fjg7zjgr/jgavjgqLjgq/jgrvjgrlcclxuICAgICAgICBnZXQgYmFja3VwRGF0YSgpOiBhbnkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fb3duZXIuYmFja3VwRGF0YTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwibmFtZXNwYWNlIENEUC5VSSB7XHJcblxyXG4gICAgY29uc3QgVEFHID0gXCJbQ0RQLlVJLkV4cGFuZGFibGVMaXN0Vmlld10gXCI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAY2xhc3MgRXhwYW5kYWJsZUxpc3RWaWV3XHJcbiAgICAgKiBAYnJpZWYg6ZaL6ZaJ5qmf6IO944KS5YKZ44GI44Gf5Luu5oOz44Oq44K544OI44OT44Ol44O844Kv44Op44K5XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBjbGFzcyBFeHBhbmRhYmxlTGlzdFZpZXc8VE1vZGVsIGV4dGVuZHMgQmFja2JvbmUuTW9kZWwgPSBCYWNrYm9uZS5Nb2RlbD5cclxuICAgICAgICBleHRlbmRzIExpc3RWaWV3PFRNb2RlbD4gaW1wbGVtZW50cyBJRXhwYW5kYWJsZUxpc3RWaWV3IHtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBfc3RhdHVzTWdyOiBTdGF0dXNNYW5hZ2VyID0gbnVsbDtcclxuICAgICAgICBwcml2YXRlIF9leHBhbmRNYW5hZ2VyOiBFeHBhbmRNYW5hZ2VyID0gbnVsbDtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogY29uc3RydWN0b3JcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBvcHRpb25zIHtMaXN0Vmlld0NvbnN0cnVjdE9wdGlvbnN9IFtpbl0g44Kq44OX44K344On44OzXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgY29uc3RydWN0b3Iob3B0aW9ucz86IExpc3RWaWV3Q29uc3RydWN0T3B0aW9uczxUTW9kZWw+KSB7XHJcbiAgICAgICAgICAgIHN1cGVyKG9wdGlvbnMpO1xyXG4gICAgICAgICAgICB0aGlzLl9zdGF0dXNNZ3IgPSBuZXcgU3RhdHVzTWFuYWdlcigpO1xyXG4gICAgICAgICAgICB0aGlzLl9leHBhbmRNYW5hZ2VyID0gbmV3IEV4cGFuZE1hbmFnZXIodGhpcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIEltcGxlbWVudHM6IElFeHBhbmRhYmxlTGlzdFZpZXdcclxuXHJcbiAgICAgICAgLy8hIOaWsOimjyBHcm91cFByb2ZpbGUg44KS5L2c5oiQXHJcbiAgICAgICAgbmV3R3JvdXAoaWQ/OiBzdHJpbmcpOiBHcm91cFByb2ZpbGUge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZXhwYW5kTWFuYWdlci5uZXdHcm91cChpZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg55m76Yyy5riI44G/IEdyb3VwIOOCkuWPluW+l1xyXG4gICAgICAgIGdldEdyb3VwKGlkOiBzdHJpbmcpOiBHcm91cFByb2ZpbGUge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZXhwYW5kTWFuYWdlci5nZXRHcm91cChpZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg56ysMemajuWxpOOBriBHcm91cCDnmbvpjLJcclxuICAgICAgICByZWdpc3RlclRvcEdyb3VwKHRvcEdyb3VwOiBHcm91cFByb2ZpbGUpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5fZXhwYW5kTWFuYWdlci5yZWdpc3RlclRvcEdyb3VwKHRvcEdyb3VwKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDnrKwx6ZqO5bGk44GuIEdyb3VwIOOCkuWPluW+l1xyXG4gICAgICAgIGdldFRvcEdyb3VwcygpOiBHcm91cFByb2ZpbGVbXSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9leHBhbmRNYW5hZ2VyLmdldFRvcEdyb3VwcygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOOBmeOBueOBpuOBruOCsOODq+ODvOODl+OCkuWxlemWiyAoMemajuWxpClcclxuICAgICAgICBleHBhbmRBbGwoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuX2V4cGFuZE1hbmFnZXIuZXhwYW5kQWxsKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg44GZ44G544Gm44Gu44Kw44Or44O844OX44KS5Y+O5p2fICgx6ZqO5bGkKVxyXG4gICAgICAgIGNvbGxhcHNlQWxsKGRlbGF5PzogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuX2V4cGFuZE1hbmFnZXIuY29sbGFwc2VBbGwoZGVsYXkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOWxlemWi+S4reOBi+WIpOWumlxyXG4gICAgICAgIGlzRXhwYW5kaW5nKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZXhwYW5kTWFuYWdlci5pc0V4cGFuZGluZygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOWPjuadn+S4reOBi+WIpOWumlxyXG4gICAgICAgIGlzQ29sbGFwc2luZygpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2V4cGFuZE1hbmFnZXIuaXNDb2xsYXBzaW5nKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg6ZaL6ZaJ5Lit44GL5Yik5a6aXHJcbiAgICAgICAgaXNTd2l0Y2hpbmcoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9leHBhbmRNYW5hZ2VyLmlzU3dpdGNoaW5nKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg54q25oWL5aSJ5pWw44Gu5Y+C54Wn44Kr44Km44Oz44OI44Gu44Kk44Oz44Kv44Oq44Oh44Oz44OIXHJcbiAgICAgICAgc3RhdHVzQWRkUmVmKHN0YXR1czogc3RyaW5nKTogbnVtYmVyIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3N0YXR1c01nci5zdGF0dXNBZGRSZWYoc3RhdHVzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDnirbmhYvlpInmlbDjga7lj4Lnhafjgqvjgqbjg7Pjg4jjga7jg4fjgq/jg6rjg6Hjg7Pjg4hcclxuICAgICAgICBzdGF0dXNSZWxlYXNlKHN0YXR1czogc3RyaW5nKTogbnVtYmVyIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3N0YXR1c01nci5zdGF0dXNSZWxlYXNlKHN0YXR1cyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg5Yem55CG44K544Kz44O844OX5q+O44Gr54q25oWL5aSJ5pWw44KS6Kit5a6aXHJcbiAgICAgICAgc3RhdHVzU2NvcGUoc3RhdHVzOiBzdHJpbmcsIGNhbGxiYWNrOiAoKSA9PiB2b2lkKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuX3N0YXR1c01nci5zdGF0dXNTY29wZShzdGF0dXMsIGNhbGxiYWNrKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDmjIflrprjgZfjgZ/nirbmhYvkuK3jgafjgYLjgovjgYvnorroqo1cclxuICAgICAgICBpc1N0YXR1c0luKHN0YXR1czogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zdGF0dXNNZ3IuaXNTdGF0dXNJbihzdGF0dXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIGxheW91dCBrZXkg44KS5Y+W5b6XXHJcbiAgICAgICAgZ2V0IGxheW91dEtleSgpOiBzdHJpbmcge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZXhwYW5kTWFuYWdlci5sYXlvdXRLZXk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgbGF5b3V0IGtleSDjgpLoqK3lrppcclxuICAgICAgICBzZXQgbGF5b3V0S2V5KGtleTogc3RyaW5nKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2V4cGFuZE1hbmFnZXIubGF5b3V0S2V5ID0ga2V5O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBPdmVycmlkZTogTGlzdFZpZXdcclxuXHJcbiAgICAgICAgLy8hIOODh+ODvOOCv+OCkuegtOajhFxyXG4gICAgICAgIHJlbGVhc2UoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHN1cGVyLnJlbGVhc2UoKTtcclxuICAgICAgICAgICAgdGhpcy5fZXhwYW5kTWFuYWdlci5yZWxlYXNlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg5YaF6YOo44OH44O844K/44KS44OQ44OD44Kv44Ki44OD44OXXHJcbiAgICAgICAgYmFja3VwKGtleTogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9leHBhbmRNYW5hZ2VyLmJhY2t1cChrZXkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOWGhemDqOODh+ODvOOCv+OCkuODquOCueODiOOColxyXG4gICAgICAgIHJlc3RvcmUoa2V5OiBzdHJpbmcsIHJlYnVpbGQ6IGJvb2xlYW4gPSB0cnVlKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9leHBhbmRNYW5hZ2VyLnJlc3RvcmUoa2V5LCByZWJ1aWxkKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwibmFtZXNwYWNlIENEUC5VSSB7XHJcblxyXG4gICAgaW1wb3J0IENvbmZpZyAgICAgICA9IENEUC5Db25maWc7XHJcbiAgICBpbXBvcnQgRnJhbWV3b3JrICAgID0gQ0RQLkZyYW1ld29yaztcclxuXHJcbiAgICBjb25zdCBUQUcgPSBcIltDRFAuVUkuVGhlbWVdIFwiO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGludGVyZmFjZSBQbGF0Zm9ybVRyYW5zaXRpb25cclxuICAgICAqIEBicmllZiDjg5fjg6njg4Pjg4jjg5Xjgqnjg7zjg6DjgZTjgajjga4gVHJhbnNpdGlvbiDjgpLmoLzntI1cclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBQbGF0Zm9ybVRyYW5zaXRpb24ge1xyXG4gICAgICAgIFtwbGF0Zm9ybTogc3RyaW5nXTogc3RyaW5nOyAgICAgLy8gZXgpIGlvczogXCJzbGlkZVwiXHJcbiAgICAgICAgZmFsbGJhY2s6IHN0cmluZzsgICAgICAgICAgICAgICAvLyBmYWxsYmFjayB0cmFuc2l0aW9uIHByb3BcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBpbnRlcmZhY2UgVHJhbnNpdGlvbk1hcFxyXG4gICAgICogQGJyaWVmIOODiOODqeODs+OCuOOCt+ODp+ODs+ODnuODg+ODl1xyXG4gICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIFRyYW5zaXRpb25NYXAge1xyXG4gICAgICAgIFt0cmFuc2l0aW9uTmFtZTogc3RyaW5nXTogUGxhdGZvcm1UcmFuc2l0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGludGVyZmFjZSBUaGVtZUluaXRPcHRpb25zXHJcbiAgICAgKiBAYnJpZWYg44OI44Op44Oz44K444K344On44Oz44Oe44OD44OXXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgVGhlbWVJbml0T3B0aW9ucyB7XHJcbiAgICAgICAgcGxhdGZvcm0/OiBzdHJpbmc7ICAgICAgICAgICAgICAgICAgLy8gcGxhdGZvcm0g44KS5oyH5a6aLiBkZWZhdWx0OlwiYXV0b1wiXHJcbiAgICAgICAgcmVzZXJ2ZVNjcm9sbGJhclJlZ2lvbj86IGJvb2xlYW47ICAgLy8gUEMg44OH44OQ44OD44Kw55Kw5aKD44Gn44Gv44K544Kv44Ot44O844Or44OQ44O844KS6KGo56S6LiBkZWZhdWx0OiBcInRydWVcIlxyXG4gICAgfVxyXG5cclxuICAgIC8vX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXy8vXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAY2xhc3MgVGhlbWVcclxuICAgICAqIEBicmllZiBVSSBUaGVtZSDoqK3lrprjgpLooYzjgYbjg6bjg7zjg4bjgqPjg6rjg4bjgqPjgq/jg6njgrlcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGNsYXNzIFRoZW1lIHtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgc19wbGF0Zm9ybXM6IHN0cmluZ1tdID0gW1wiaW9zXCIsIFwiYW5kcm9pZFwiXTtcclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBzX3BhZ2VUcmFuc2l0aW9uTWFwOiBUcmFuc2l0aW9uTWFwID0ge1xyXG4gICAgICAgICAgICBcInBsYXRmb3JtLWRlZmF1bHRcIjoge1xyXG4gICAgICAgICAgICAgICAgaW9zOiBcInNsaWRlXCIsXHJcbiAgICAgICAgICAgICAgICBhbmRyb2lkOiBcImZsb2F0dXBcIixcclxuICAgICAgICAgICAgICAgIGZhbGxiYWNrOiBcInNsaWRlXCIsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIFwicGxhdGZvcm0tYWx0ZXJuYXRpdmVcIjoge1xyXG4gICAgICAgICAgICAgICAgaW9zOiBcInNsaWRldXBcIixcclxuICAgICAgICAgICAgICAgIGFuZHJvaWQ6IFwiZmxvYXR1cFwiLFxyXG4gICAgICAgICAgICAgICAgZmFsbGJhY2s6IFwic2xpZGV1cFwiLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgc19kaWFsb2dUcmFuc2l0aW9uTWFwOiBUcmFuc2l0aW9uTWFwID0ge1xyXG4gICAgICAgICAgICBcInBsYXRmb3JtLWRlZmF1bHRcIjoge1xyXG4gICAgICAgICAgICAgICAgaW9zOiBcInBvcHpvb21cIixcclxuICAgICAgICAgICAgICAgIGFuZHJvaWQ6IFwiY3Jvc3N6b29tXCIsXHJcbiAgICAgICAgICAgICAgICBmYWxsYmFjazogXCJub25lXCIsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBwdWJsaWMgc3RhdGljIG1ldGhvZHM6XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZW1lIOOBruWIneacn+WMllxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIG9wdGlvbnMg44Kq44OX44K344On44Oz5oyH5a6aXHJcbiAgICAgICAgICogQHJldHVybnMgdHJ1ZTog5oiQ5YqfIC8gZmFsc2U6IOWkseaVl1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW5pdGlhbGl6ZShvcHRpb25zPzogVGhlbWVJbml0T3B0aW9ucyk6IHN0cmluZyB7XHJcbiAgICAgICAgICAgIGNvbnN0IG9wdCA9ICQuZXh0ZW5kKHt9LCB7XHJcbiAgICAgICAgICAgICAgICBwbGF0Zm9ybTogXCJhdXRvXCIsXHJcbiAgICAgICAgICAgICAgICByZXNlcnZlU2Nyb2xsYmFyUmVnaW9uOiB0cnVlLFxyXG4gICAgICAgICAgICB9LCBvcHRpb25zKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChcImF1dG9cIiA9PT0gb3B0LnBsYXRmb3JtKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gVGhlbWUuZGV0ZWN0VUlQbGF0Zm9ybShvcHQucmVzZXJ2ZVNjcm9sbGJhclJlZ2lvbik7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoVGhlbWUuc2V0Q3VycmVudFVJUGxhdGZvcm0ob3B0LnBsYXRmb3JtKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvcHQucGxhdGZvcm07XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihUQUcgKyBcInNldEN1cnJlbnRVSVBsYXRmb3JtKCksIGZhaWxlZC4gcGxhdGZvcm06IFwiICsgb3B0LnBsYXRmb3JtKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog54++5Zyo5oyH5a6a44GV44KM44Gm44GE44KLIFVJIFBsYXRmb3JtIOOCkuWPluW+l1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7U3RyaW5nfSBleCkgXCJpb3NcIlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgZ2V0Q3VycmVudFVJUGxhdGZvcm0oKTogc3RyaW5nIHtcclxuICAgICAgICAgICAgY29uc3QgJGh0bXMgPSAkKFwiaHRtbFwiKTtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIG4gPSBUaGVtZS5zX3BsYXRmb3Jtcy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGlmICgkaHRtcy5oYXNDbGFzcyhcInVpLXBsYXRmb3JtLVwiICsgVGhlbWUuc19wbGF0Zm9ybXNbaV0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFRoZW1lLnNfcGxhdGZvcm1zW2ldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVUkgUGxhdGZvcm0g44KS6Kit5a6aXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHtTdHJpbmd9IHRydWU6IOaIkOWKnyAvIGZhbHNlOiDlpLHmlZdcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHNldEN1cnJlbnRVSVBsYXRmb3JtKHBsYXRmb3JtOiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgaWYgKG51bGwgPT0gcGxhdGZvcm0gfHwgVGhlbWUuc19wbGF0Zm9ybXMuaW5kZXhPZihwbGF0Zm9ybSkgPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgJGh0bXMgPSAkKFwiaHRtbFwiKTtcclxuICAgICAgICAgICAgICAgIFRoZW1lLnNfcGxhdGZvcm1zLmZvckVhY2goKHRhcmdldCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICRodG1zLnJlbW92ZUNsYXNzKFwidWktcGxhdGZvcm0tXCIgKyB0YXJnZXQpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBpZiAocGxhdGZvcm0pIHtcclxuICAgICAgICAgICAgICAgICAgICAkaHRtcy5hZGRDbGFzcyhcInVpLXBsYXRmb3JtLVwiICsgcGxhdGZvcm0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOePvuWcqOOBriBQbGF0Zm9ybSDjgpLliKTlrprjgZfmnIDpganjgaogcGxhdGZvcm0g44KS6Ieq5YuV5rG65a6aXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gcmVzZXJ2ZVNjcm9sbGJhclJlZ2lvbiBQQyDjg4fjg5Djg4PjgrDnkrDlooPjgafjga/jgrnjgq/jg63jg7zjg6vjg5Djg7zjgpLooajnpLouIGRlZmF1bHQ6IHRydWVcclxuICAgICAgICAgKiBAcmV0dXJucyBleCkgXCJpb3NcIlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgZGV0ZWN0VUlQbGF0Zm9ybShyZXNlcnZlU2Nyb2xsYmFyUmVnaW9uOiBib29sZWFuID0gdHJ1ZSk6IHN0cmluZyB7XHJcbiAgICAgICAgICAgIGxldCBwbGF0Zm9ybSA9IFwiXCI7XHJcbiAgICAgICAgICAgIC8vIHBsYXRmb3JtIOOBruioreWumlxyXG4gICAgICAgICAgICBpZiAoRnJhbWV3b3JrLlBsYXRmb3JtLmlPUykge1xyXG4gICAgICAgICAgICAgICAgJChcImh0bWxcIikuYWRkQ2xhc3MoXCJ1aS1wbGF0Zm9ybS1pb3NcIik7XHJcbiAgICAgICAgICAgICAgICBwbGF0Zm9ybSA9IFwiaW9zXCI7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkKFwiaHRtbFwiKS5hZGRDbGFzcyhcInVpLXBsYXRmb3JtLWFuZHJvaWRcIik7XHJcbiAgICAgICAgICAgICAgICBwbGF0Zm9ybSA9IFwiYW5kcm9pZFwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIFBDIOODh+ODkOODg+OCsOeSsOWig+OBp+OBr+OCueOCr+ODreODvOODq+ODkOODvOOCkuihqOekulxyXG4gICAgICAgICAgICBpZiAoQ29uZmlnLkRFQlVHICYmIHJlc2VydmVTY3JvbGxiYXJSZWdpb24gJiYgIUZyYW1ld29yay5QbGF0Zm9ybS5Nb2JpbGUpIHtcclxuICAgICAgICAgICAgICAgICQoXCJib2R5XCIpLmNzcyhcIm92ZXJmbG93LXlcIiwgXCJzY3JvbGxcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHBsYXRmb3JtO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogcGxhdGZvcm0g44KS6YWN5YiX44Gn55m76YyyXHJcbiAgICAgICAgICog5LiK5pu444GN44GV44KM44KLXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ1tdfSBwbGF0Zm9ybXMgW2luXSBPUyBleCk6IFtcImlvc1wiLCBcImFuZHJvaWRcIl1cclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHJlZ2lzdGVyVUlQbGF0Zm9ybXMocGxhdGZvcm1zOiBzdHJpbmdbXSk6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAocGxhdGZvcm1zKSB7XHJcbiAgICAgICAgICAgICAgICBUaGVtZS5zX3BsYXRmb3JtcyA9IHBsYXRmb3JtcztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogcGFnZSB0cmFuc2l0aW9uIOOCkueZu+mMslxyXG4gICAgICAgICAqIOS4iuabuOOBjeOBleOCjOOCi1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtUcmFuc2l0aW9uTWFwfSBtYXAgW2luXSBUcmFuc2l0aW9uTWFwIOOCkuaMh+WumlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgcmVnaXN0ZXJQYWdlVHJhbnNpdGlvbk1hcChtYXA6IFRyYW5zaXRpb25NYXApOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKG1hcCkge1xyXG4gICAgICAgICAgICAgICAgVGhlbWUuc19wYWdlVHJhbnNpdGlvbk1hcCA9IG1hcDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogZGlhbG9nIHRyYW5zaXRpb24g44KS55m76YyyXHJcbiAgICAgICAgICog5LiK5pu444GN44GV44KM44KLXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge1RyYW5zaXRpb25NYXB9IG1hcCBbaW5dIFRyYW5zaXRpb25NYXAg44KS5oyH5a6aXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyByZWdpc3RlckRpYWxvZ1RyYW5zaXRpb25NYXAobWFwOiBUcmFuc2l0aW9uTWFwKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmIChtYXApIHtcclxuICAgICAgICAgICAgICAgIFRoZW1lLnNfZGlhbG9nVHJhbnNpdGlvbk1hcCA9IG1hcDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogcGFnZSB0cmFuc2l0aW9uIOOCkuWPluW+l1xyXG4gICAgICAgICAqIFRyYW5zaXRpb25NYXAg44Gr44Ki44K144Kk44Oz44GV44KM44Gm44GE44KL44KC44Gu44Gn44GC44KM44Gw5aSJ5o+bXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHtTdHJpbmdbXX0gXCJzbGlkZVwiXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBxdWVyeVBhZ2VUcmFuc2l0aW9uKG9yaWdpbmFsOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgICAgICAgICBjb25zdCBjb252ZXJ0ID0gVGhlbWUuc19wYWdlVHJhbnNpdGlvbk1hcFtvcmlnaW5hbF07XHJcbiAgICAgICAgICAgIGlmIChjb252ZXJ0KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY29udmVydFtUaGVtZS5nZXRDdXJyZW50VUlQbGF0Zm9ybSgpXSB8fCBjb252ZXJ0LmZhbGxiYWNrO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9yaWdpbmFsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBkaWFsb2cgdHJhbnNpdGlvbiDjgpLlj5blvpdcclxuICAgICAgICAgKiBUcmFuc2l0aW9uTWFwIOOBq+OCouOCteOCpOODs+OBleOCjOOBpuOBhOOCi+OCguOBruOBp+OBguOCjOOBsOWkieaPm1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybiB7U3RyaW5nW119IFwic2xpZGVcIlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgcXVlcnlEaWFsb2dUcmFuc2l0aW9uKG9yaWdpbmFsOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgICAgICAgICBjb25zdCBjb252ZXJ0ID0gVGhlbWUuc19kaWFsb2dUcmFuc2l0aW9uTWFwW29yaWdpbmFsXTtcclxuICAgICAgICAgICAgaWYgKGNvbnZlcnQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBjb252ZXJ0W1RoZW1lLmdldEN1cnJlbnRVSVBsYXRmb3JtKCldIHx8IGNvbnZlcnQuZmFsbGJhY2s7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gb3JpZ2luYWw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fLy9cclxuXHJcbiAgICAvLyBqcXVleS5tb2JpbGUuY2hhbmdlUGFnZSgpIOOBriBIb29rLlxyXG4gICAgZnVuY3Rpb24gYXBwbHlDdXN0b21DaGFuZ2VQYWdlKCkge1xyXG4gICAgICAgIGNvbnN0IGpxbUNoYW5nZVBhZ2U6ICh0bzogYW55LCBvcHRpb25zPzogQ2hhbmdlUGFnZU9wdGlvbnMpID0+IHZvaWQgPSBfLmJpbmQoJC5tb2JpbGUuY2hhbmdlUGFnZSwgJC5tb2JpbGUpO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBjdXN0b21DaGFuZ2VQYWdlKHRvOiBhbnksIG9wdGlvbnM/OiBDaGFuZ2VQYWdlT3B0aW9ucyk6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAoXy5pc1N0cmluZyh0bykpIHtcclxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMudHJhbnNpdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMudHJhbnNpdGlvbiA9IFRoZW1lLnF1ZXJ5UGFnZVRyYW5zaXRpb24ob3B0aW9ucy50cmFuc2l0aW9uKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBqcW1DaGFuZ2VQYWdlKHRvLCBvcHRpb25zKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICQubW9iaWxlLmNoYW5nZVBhZ2UgPSBjdXN0b21DaGFuZ2VQYWdlO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGZyYW1ld29yayDliJ3mnJ/ljJblvozjgavpgannlKhcclxuICAgIEZyYW1ld29yay53YWl0Rm9ySW5pdGlhbGl6ZSgpXHJcbiAgICAgICAgLmRvbmUoKCkgPT4ge1xyXG4gICAgICAgICAgICBhcHBseUN1c3RvbUNoYW5nZVBhZ2UoKTtcclxuICAgICAgICB9KTtcclxufVxyXG4iLCJuYW1lc3BhY2UgQ0RQLlVJIHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBpbnRlcmZhY2UgRG9tRXh0ZW5zaW9uT3B0aW9uc1xyXG4gICAgICogQGJyZWlmIERvbUV4dGVuc2lvbiDjgavmuKHjgZnjgqrjg5fjgrfjg6fjg7PjgqTjg7Pjgr/jg7zjg5XjgqfjgqTjgrlcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBEb21FeHRlbnNpb25PcHRpb25zIHtcclxuICAgICAgICBba2V5OiBzdHJpbmddOiBhbnk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAdHlwZSBEb21FeHRlbnNpb25cclxuICAgICAqIEBicmllZiBET00g5ouh5by16Zai5pWwXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCB0eXBlIERvbUV4dGVuc2lvbiA9ICgkdGFyZ2V0OiBKUXVlcnksIERvbUV4dGVuc2lvbk9wdGlvbnM/OiBPYmplY3QpID0+IEpRdWVyeTtcclxuXHJcbiAgICAvL19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18vL1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGNsYXNzIEV4dGVuc2lvbk1hbmFnZXJcclxuICAgICAqIEBicmllZiDmi6HlvLXmqZ/og73jgpLnrqHnkIbjgZnjgovjg6bjg7zjg4bjgqPjg6rjg4bjgqPjgq/jg6njgrlcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGNsYXNzIEV4dGVuc2lvbk1hbmFnZXIge1xyXG5cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBzX2RvbUV4dGVuc2lvbnM6IERvbUV4dGVuc2lvbltdID0gW107XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIERPTSDmi6HlvLXplqLmlbDjga7nmbvpjLJcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB7RG9tRXh0ZW5zaW9ufSBmdW5jIFtpbl0gRE9NIOaLoeW8temWouaVsFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgcmVnaXN0ZXJEb21FeHRlbnNpb24oZnVuYzogRG9tRXh0ZW5zaW9uKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuc19kb21FeHRlbnNpb25zLnB1c2goZnVuYyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBET00g5ouh5by144KS6YGp55SoXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0ge2pRdWVyeX0gJHVpICAgICAgIFtpbl0g5ouh5by15a++6LGh44GuIERPTVxyXG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gW2luXSDjgqrjg5fjgrfjg6fjg7NcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGFwcGx5RG9tRXh0ZW5zaW9uKCR1aTogSlF1ZXJ5LCBvcHRpb25zPzogRG9tRXh0ZW5zaW9uT3B0aW9ucyk6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLnNfZG9tRXh0ZW5zaW9ucy5mb3JFYWNoKChmdW5jOiBEb21FeHRlbnNpb24pID0+IHtcclxuICAgICAgICAgICAgICAgIGZ1bmMoJHVpLCBvcHRpb25zKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8qIHRzbGludDpkaXNhYmxlOm5vLWJpdHdpc2UgKi9cclxuXHJcbm5hbWVzcGFjZSBDRFAuVUkge1xyXG5cclxuICAgIGNvbnN0IFRBRyA9IFwiW0NEUC5VSS5Ub2FzdF0gXCI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAY2xhc3MgVG9hc3RcclxuICAgICAqIEBicmllZiBBbmRyb2lkIFNESyDjga4gVG9hc3Qg44Kv44Op44K544Gu44KI44GG44Gr6Ieq5YuV5raI5ruF44GZ44KL44Oh44OD44K744O844K45Ye65Yqb44Om44O844OG44Kj44Oq44OG44KjXHJcbiAgICAgKiAgICAgICAg5YWl44KM5a2Q44Gu6Zai5L+C44KS5a6f54++44GZ44KL44Gf44KB44GrIG1vZHVsZSDjgaflrp/oo4VcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IG1vZHVsZSBUb2FzdCB7XHJcblxyXG4gICAgICAgIC8vIOihqOekuuaZgumWk+OBruWumue+qVxyXG4gICAgICAgIGV4cG9ydCBsZXQgTEVOR1RIX1NIT1JUID0gMTUwMDsgICAvLyE8IOefreOBhDoxNTAwIG1zZWNcclxuICAgICAgICBleHBvcnQgbGV0IExFTkdUSF9MT05HICA9IDQwMDA7ICAgLy8hPCDplbfjgYQ6NDAwMCBtc2VjXHJcblxyXG4gICAgICAgIC8vISBAZW51bSDjgqrjg5Xjgrvjg4Pjg4jjga7ln7rmupZcclxuICAgICAgICBleHBvcnQgZW51bSBPZmZzZXRYIHtcclxuICAgICAgICAgICAgTEVGVCAgICA9IDB4MDAwMSxcclxuICAgICAgICAgICAgUklHSFQgICA9IDB4MDAwMixcclxuICAgICAgICAgICAgQ0VOVEVSICA9IDB4MDAwNCxcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISBAZW51bSDjgqrjg5Xjgrvjg4Pjg4jjga7ln7rmupZcclxuICAgICAgICBleHBvcnQgZW51bSBPZmZzZXRZIHtcclxuICAgICAgICAgICAgVE9QICAgICA9IDB4MDAxMCxcclxuICAgICAgICAgICAgQk9UVE9NICA9IDB4MDAyMCxcclxuICAgICAgICAgICAgQ0VOVEVSICA9IDB4MDA0MCxcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBpbnRlcmZhY2UgU3R5bGVCdWlsZGVyXHJcbiAgICAgICAgICogQGJyaWVmICAgICDjgrnjgr/jgqTjg6vlpInmm7TmmYLjgavkvb/nlKjjgZnjgovjgqTjg7Pjgr/jg7zjg5XjgqfjgqTjgrlcclxuICAgICAgICAgKiAgICAgICAgICAgIGNzcyDjgavjgrnjgr/jgqTjg6vjgpLpgIPjgYzjgZnloLTlkIjjgIHni6zoh6rjga4gY2xhc3Mg44KS6Kit5a6a44GX44CBZ2V0U3R5bGUg44GvIG51bGwg44KS6L+U44GZ44GT44Go44CCXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZXhwb3J0IGludGVyZmFjZSBTdHlsZUJ1aWxkZXIge1xyXG4gICAgICAgICAgICAvLyEgY2xhc3MgYXR0cmlidXRlIOOBq+ioreWumuOBmeOCi+aWh+Wtl+WIl+OCkuWPluW+l1xyXG4gICAgICAgICAgICBnZXRDbGFzcygpOiBzdHJpbmc7XHJcbiAgICAgICAgICAgIC8vISBzdHlsZSBhdHRyaWJ1dGUg44Gr6Kit5a6a44GZ44KLIEpTT04g44Kq44OW44K444Kn44Kv44OI44KS5Y+W5b6XXHJcbiAgICAgICAgICAgIGdldFN0eWxlKCk6IGFueTtcclxuICAgICAgICAgICAgLy8hIOOCquODleOCu+ODg+ODiOOBruWfuua6luS9jee9ruOCkuWPluW+l1xyXG4gICAgICAgICAgICBnZXRPZmZzZXRQb2ludCgpOiBudW1iZXI7XHJcbiAgICAgICAgICAgIC8vISBYIOW6p+aomeOBruOCquODleOCu+ODg+ODiOWApOOCkuWPluW+l1xyXG4gICAgICAgICAgICBnZXRPZmZzZXRYKCk6IG51bWJlcjtcclxuICAgICAgICAgICAgLy8hIFkg5bqn5qiZ44Gu44Kq44OV44K744OD44OI5YCk44KS5Y+W5b6XXHJcbiAgICAgICAgICAgIGdldE9mZnNldFkoKTogbnVtYmVyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQGNsYXNzIFN0eWxlQnVpbGRlckRlZmF1bHRcclxuICAgICAgICAgKiBAYnJpZWYg44K544K/44Kk44Or5aSJ5pu05pmC44Gr5L2/55So44GZ44KL5pei5a6a44Gu5qeL6YCg5L2T44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZXhwb3J0IGNsYXNzIFN0eWxlQnVpbGRlckRlZmF1bHQgaW1wbGVtZW50cyBTdHlsZUJ1aWxkZXIge1xyXG5cclxuICAgICAgICAgICAgLy8hIGNsYXNzIGF0dHJpYnV0ZSDjgavoqK3lrprjgZnjgovmloflrZfliJfjgpLlj5blvpdcclxuICAgICAgICAgICAgZ2V0Q2xhc3MoKTogc3RyaW5nIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBcInVpLWxvYWRlciB1aS1vdmVybGF5LXNoYWRvdyB1aS1jb3JuZXItYWxsXCI7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vISBzdHlsZSBhdHRyaWJ1dGUg44Gr6Kit5a6a44GZ44KLIEpTT04g44Kq44OW44K444Kn44Kv44OI44KS5Y+W5b6XXHJcbiAgICAgICAgICAgIGdldFN0eWxlKCk6IGFueSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzdHlsZSA9IHtcclxuICAgICAgICAgICAgICAgICAgICBcInBhZGRpbmdcIjogICAgICAgICAgXCI3cHggMjVweCA3cHggMjVweFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiZGlzcGxheVwiOiAgICAgICAgICBcImJsb2NrXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJiYWNrZ3JvdW5kLWNvbG9yXCI6IFwiIzFkMWQxZFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiYm9yZGVyLWNvbG9yXCI6ICAgICBcIiMxYjFiMWJcIixcclxuICAgICAgICAgICAgICAgICAgICBcImNvbG9yXCI6ICAgICAgICAgICAgXCIjZmZmXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJ0ZXh0LXNoYWRvd1wiOiAgICAgIFwiMCAxcHggMCAjMTExXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJmb250LXdlaWdodFwiOiAgICAgIFwiYm9sZFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwib3BhY2l0eVwiOiAgICAgICAgICAwLjgsXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0eWxlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyEg44Kq44OV44K744OD44OI44Gu5Z+65rqW5L2N572u44KS5Y+W5b6XXHJcbiAgICAgICAgICAgIGdldE9mZnNldFBvaW50KCk6IG51bWJlciB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gT2Zmc2V0WC5DRU5URVIgfCBPZmZzZXRZLkJPVFRPTTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8hIFgg5bqn5qiZ44Gu44Kq44OV44K744OD44OI5YCk44KS5Y+W5b6XXHJcbiAgICAgICAgICAgIGdldE9mZnNldFgoKTogbnVtYmVyIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyEgWSDluqfmqJnjga7jgqrjg5Xjgrvjg4Pjg4jlgKTjgpLlj5blvpdcclxuICAgICAgICAgICAgZ2V0T2Zmc2V0WSgpOiBudW1iZXIge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIC03NTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVG9hc3Qg6KGo56S6XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gbWVzc2FnZSAgW2luXSDjg6Hjg4Pjgrvjg7zjgrhcclxuICAgICAgICAgKiBAcGFyYW0gZHVyYXRpb24gW2luXSDooajnpLrmmYLplpPjgpLoqK3lrpogKG1zZWMpIGRlZmF1bHQ6IExFTkdUSF9TSE9SVFxyXG4gICAgICAgICAqIEBwYXJhbSBzdHlsZSAgICBbaW5dIOOCueOCv+OCpOODq+WkieabtOOBmeOCi+WgtOWQiOOBq+OBr+a0vueUn+OCr+ODqeOCueOCquODluOCuOOCp+OCr+ODiOOCkuaMh+WumlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGV4cG9ydCBmdW5jdGlvbiBzaG93KG1lc3NhZ2U6IHN0cmluZywgZHVyYXRpb246IG51bWJlciA9IFRvYXN0LkxFTkdUSF9TSE9SVCwgc3R5bGU/OiBTdHlsZUJ1aWxkZXIpOiB2b2lkIHtcclxuICAgICAgICAgICAgY29uc3QgJG1vYmlsZSA9ICQubW9iaWxlO1xyXG4gICAgICAgICAgICBjb25zdCBpbmZvID0gc3R5bGUgfHwgbmV3IFN0eWxlQnVpbGRlckRlZmF1bHQoKTtcclxuICAgICAgICAgICAgY29uc3Qgc2V0Q1NTID0gaW5mby5nZXRTdHlsZSgpID8gdHJ1ZSA6IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgLy8g5pS56KGM44Kz44O844OJ44GvIDxici8+IOOBq+e9ruaPm+OBmeOCi1xyXG4gICAgICAgICAgICBjb25zdCBtc2cgPSBtZXNzYWdlLnJlcGxhY2UoL1xcbi9nLCBcIjxici8+XCIpO1xyXG5cclxuICAgICAgICAgICAgLy8g44Oh44OD44K744O844K4IGVsZW1lbnQg44Gu5YuV55qE55Sf5oiQXHJcbiAgICAgICAgICAgIGNvbnN0IGh0bWwgPSBcIjxkaXY+XCIgKyBtc2cgKyBcIjwvZGl2PlwiO1xyXG4gICAgICAgICAgICBjb25zdCBib3ggPSAkKGh0bWwpLmFkZENsYXNzKGluZm8uZ2V0Q2xhc3MoKSk7XHJcbiAgICAgICAgICAgIGlmIChzZXRDU1MpIHtcclxuICAgICAgICAgICAgICAgIGJveC5jc3MoaW5mby5nZXRTdHlsZSgpKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8g6Ieq5YuV5pS56KGM44GV44KM44Gm44KC44KI44GE44KI44GG44Gr44CB5Z+654K544KS6Kit5a6a44GX44Gm44GL44KJ6L+95YqgXHJcbiAgICAgICAgICAgIGJveC5jc3Moe1xyXG4gICAgICAgICAgICAgICAgXCJ0b3BcIjogMCxcclxuICAgICAgICAgICAgICAgIFwibGVmdFwiOiAwLFxyXG4gICAgICAgICAgICB9KS5hcHBlbmRUbygkbW9iaWxlLnBhZ2VDb250YWluZXIpO1xyXG5cclxuICAgICAgICAgICAgLy8g6YWN572u5L2N572u44Gu5rG65a6aXHJcbiAgICAgICAgICAgIGNvbnN0IG9mZnNldFBvaW50ID0gaW5mby5nZXRPZmZzZXRQb2ludCgpO1xyXG4gICAgICAgICAgICBjb25zdCAkd2luZG93ID0gJCh3aW5kb3cpO1xyXG4gICAgICAgICAgICBsZXQgcG9zWCwgcG9zWTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGJveF93aWR0aCA9IGJveC53aWR0aCgpICsgcGFyc2VJbnQoYm94LmNzcyhcInBhZGRpbmctbGVmdFwiKSwgMTApICsgcGFyc2VJbnQoYm94LmNzcyhcInBhZGRpbmctcmlnaHRcIiksIDEwKTtcclxuICAgICAgICAgICAgY29uc3QgYm94X2hlaWdodCA9IGJveC5oZWlnaHQoKSArIHBhcnNlSW50KGJveC5jc3MoXCJwYWRkaW5nLXRvcFwiKSwgMTApICsgcGFyc2VJbnQoYm94LmNzcyhcInBhZGRpbmctYm90dG9tXCIpLCAxMCk7XHJcblxyXG4gICAgICAgICAgICBzd2l0Y2ggKG9mZnNldFBvaW50ICYgMHgwMDBGKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIE9mZnNldFguTEVGVDpcclxuICAgICAgICAgICAgICAgICAgICBwb3NYID0gMCArIGluZm8uZ2V0T2Zmc2V0WCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBPZmZzZXRYLlJJR0hUOlxyXG4gICAgICAgICAgICAgICAgICAgIHBvc1ggPSAkd2luZG93LndpZHRoKCkgLSBib3hfd2lkdGggKyBpbmZvLmdldE9mZnNldFgoKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgT2Zmc2V0WC5DRU5URVI6XHJcbiAgICAgICAgICAgICAgICAgICAgcG9zWCA9ICgkd2luZG93LndpZHRoKCkgLyAyKSAtIChib3hfd2lkdGggLyAyKSArIGluZm8uZ2V0T2Zmc2V0WCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oVEFHICsgXCJ3YXJuLiB1bmtub3duIG9mZnNldFBvaW50OlwiICsgKG9mZnNldFBvaW50ICYgMHgwMDBGKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9zWCA9ICgkd2luZG93LndpZHRoKCkgLyAyKSAtIChib3hfd2lkdGggLyAyKSArIGluZm8uZ2V0T2Zmc2V0WCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBzd2l0Y2ggKG9mZnNldFBvaW50ICYgMHgwMEYwKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIE9mZnNldFkuVE9QOlxyXG4gICAgICAgICAgICAgICAgICAgIHBvc1kgPSAwICsgaW5mby5nZXRPZmZzZXRZKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIE9mZnNldFkuQk9UVE9NOlxyXG4gICAgICAgICAgICAgICAgICAgIHBvc1kgPSAkd2luZG93LmhlaWdodCgpIC0gYm94X2hlaWdodCArIGluZm8uZ2V0T2Zmc2V0WSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBPZmZzZXRZLkNFTlRFUjpcclxuICAgICAgICAgICAgICAgICAgICBwb3NZID0gKCR3aW5kb3cuaGVpZ2h0KCkgLyAyKSAtIChib3hfaGVpZ2h0IC8gMikgKyBpbmZvLmdldE9mZnNldFkoKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFRBRyArIFwid2Fybi4gdW5rbm93biBvZmZzZXRQb2ludDpcIiArIChvZmZzZXRQb2ludCAmIDB4MDBGMCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIHBvc1kgPSAoJHdpbmRvdy5oZWlnaHQoKSAvIDIpIC0gKGJveF9oZWlnaHQgLyAyKSArIGluZm8uZ2V0T2Zmc2V0WSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyDooajnpLpcclxuICAgICAgICAgICAgYm94LmNzcyh7XHJcbiAgICAgICAgICAgICAgICBcInRvcFwiOiBwb3NZLFxyXG4gICAgICAgICAgICAgICAgXCJsZWZ0XCI6IHBvc1gsXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5kZWxheShkdXJhdGlvbilcclxuICAgICAgICAgICAgLmZhZGVPdXQoNDAwLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwibmFtZXNwYWNlIENEUC5VSSB7XHJcblxyXG4gICAgaW1wb3J0IFByb21pc2UgICAgICA9IENEUC5Qcm9taXNlO1xyXG4gICAgaW1wb3J0IEZyYW1ld29yayAgICA9IENEUC5GcmFtZXdvcms7XHJcblxyXG4gICAgY29uc3QgVEFHID0gXCJbQ0RQLlVJLkRpYWxvZ10gXCI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBIL1cgQmFjayBLZXkgSG9vayDplqLmlbBcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IHR5cGUgRGlhbG9nQmFja0tleUhhbmRsZXIgPSAoZXZlbnQ/OiBKUXVlcnkuRXZlbnQpID0+IHZvaWQ7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAaW50ZXJmYWNlIERpYWxvZ09wdGlvbnNcclxuICAgICAqICAgICAgICAgICAg44OA44Kk44Ki44Ot44Kw44Kq44OX44K344On44Oz44Kk44Oz44K/44O844OV44Kn44Kk44K5XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgRGlhbG9nT3B0aW9ucyBleHRlbmRzIFBvcHVwT3B0aW9ucyB7XHJcbiAgICAgICAgc3JjPzogc3RyaW5nOyAgICAgICAgICAgICAgICAgICAvLyE8IHtTdHJpbmd9IHRlbXBsYXRlIOODleOCoeOCpOODq+OBruODkeOCuSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHVuZGVmaW5lZFxyXG4gICAgICAgIHRpdGxlPzogc3RyaW5nOyAgICAgICAgICAgICAgICAgLy8hPCB7U3RyaW5nfSDjg4DjgqTjgqLjg63jgrDjgr/jgqTjg4jjg6sgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHVuZGVmaW5lZFxyXG4gICAgICAgIG1lc3NhZ2U/OiBzdHJpbmc7ICAgICAgICAgICAgICAgLy8hPCB7U3RyaW5nfSDjg6HjgqTjg7Pjg6Hjg4Pjgrvjg7zjgrggICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogdW5kZWZpbmVkXHJcbiAgICAgICAgaWRQb3NpdGl2ZT86IHN0cmluZzsgICAgICAgICAgICAvLyE8IHtTdHJpbmd9IFBvc2l0aXZlIOODnOOCv+ODs+OBrklEICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IFwiZGxnLWJ0bi1wb3NpdGl2ZVwiXHJcbiAgICAgICAgaWROZWdhdGl2ZT86IHN0cmluZzsgICAgICAgICAgICAvLyE8IHtTdHJpbmd9IE5hZ2F0aXZlIOODnOOCv+ODs+OBrklEICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IFwiZGxnLWJ0bi1uZWdhdGl2ZVwiXHJcbiAgICAgICAgZXZlbnQ/OiBzdHJpbmc7ICAgICAgICAgICAgICAgICAvLyE8IHtTdHJpbmd9IERpYWxvZyDjgq/jg6njgrnjgYznrqHnkIbjgZnjgovjgqTjg5njg7Pjg4ggICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogXCJ2Y2xpY2tcIlxyXG4gICAgICAgIGRlZmF1bHRBdXRvQ2xvc2U/OiBib29sZWFuOyAgICAgLy8hPCB7Qm9vbGVhbn0gZGF0YS1hdXRvLWNsb3NlIOOBjOaMh+WumuOBleOCjOOBpuOBhOOBquOBhOWgtOWQiOOBruaXouWumuWApCAgICAgICAgIGRlZmF1bHQ6IGZhbHNlXHJcbiAgICAgICAgZm9yY2VPdmVyd3JpdGVBZnRlckNsb3NlPzogYm9vbGVhbjsgLy8hPCB7Qm9vbGVhbn0gYWZ0ZXJjbG9zZSDjgqrjg5fjgrfjg6fjg7PjgpLlvLfliLbkuIrmm7jjgY3jgZnjgovjgZ/jgoHjga7oqK3lrpogICAgZGVmYXVsdDogZmFsc2VcclxuICAgICAgICBsYWJlbFBvc2l0aXZlPzogc3RyaW5nOyAgICAgICAgIC8vITwge1N0cmluZ30gUG9zaXRpdmUg44Oc44K/44Oz44Op44OZ44OrICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBcIk9LXCJcclxuICAgICAgICBsYWJlbE5lZ2F0aXZlPzogc3RyaW5nOyAgICAgICAgIC8vITwge1N0cmluZ30gTmVnYXRpdmUg44Oc44K/44Oz44Op44OZ44OrICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBcIkNhbmNlbFwiXHJcbiAgICAgICAgYmFja0tleT86IFwiY2xvc2VcIiB8IFwiZGVueVwiIHwgRGlhbG9nQmFja0tleUhhbmRsZXI7ICAvLyE8IEgvVyBiYWNrS2V5IOOBruaMr+OCi+iInuOBhCAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogXCJjbG9zZVwiXHJcbiAgICAgICAgc2Nyb2xsRXZlbnQ/OiBcImRlbnlcIiB8IFwiYWxsb3dcIiB8IFwiYWRqdXN0XCI7ICAgLy8hPCB7U3RyaW5nfSBzY3JvbGzjga7mipHmraLmlrnlvI8gICjigLsgYWRqdXN0IOOBr+ippumok+eahCkgICAgIGRlZmF1bHQ6IFwiZGVueVwiXHJcbiAgICAgICAgZG9tRXh0ZW5zaW9uT3B0aW9ucz86IERvbUV4dGVuc2lvbk9wdGlvbnM7ICAgLy8hPCBET03mi6HlvLXjgqrjg5fjgrfjg6fjg7MuIG51bGx8dW5kZWZpbmVkIOOBp+aLoeW8teOBl+OBquOBhCAgICAgIGRlZmF1bHQ6IHt9XHJcbiAgICAgICAgW3g6IHN0cmluZ106IGFueTsgICAgICAgICAgICAgICAvLyE8IGFueSBkaWFsb2cgdGVtcGxhdGUgcGFyYW1ldGVycy5cclxuICAgIH1cclxuXHJcbiAgICAvL19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18vL1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGNsYXNzIERpYWxvZ1xyXG4gICAgICogQGJyaWVmIOaxjueUqOODgOOCpOOCouODreOCsOOCr+ODqeOCuVxyXG4gICAgICogICAgICAgIGpRTSDjga4gcG9wdXAgd2lkZ2V0IOOBq+OCiOOBo+OBpuWun+ijhVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgY2xhc3MgRGlhbG9nIHtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBfdGVtcGxhdGU6IFRvb2xzLkpTVCA9IG51bGw7XHJcbiAgICAgICAgcHJpdmF0ZSBfc2V0dGluZ3M6IERpYWxvZ09wdGlvbnMgPSBudWxsO1xyXG4gICAgICAgIHByaXZhdGUgXyRkaWFsb2c6IEpRdWVyeSA9IG51bGw7XHJcblxyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIHNfYWN0aXZlRGlhbG9nOiBEaWFsb2cgPSBudWxsO1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIHNfb2xkQmFja0tleUhhbmRsZXI6IChldmVudD86IEpRdWVyeS5FdmVudCkgPT4gdm9pZCA9IG51bGw7XHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgc19kZWZhdWx0T3B0aW9uczogRGlhbG9nT3B0aW9ucyA9IG51bGw7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIGNvbnN0cnVjdG9yXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gaWQgICAgICB7U3RyaW5nfSAgICAgICAgW2luXSDjg4DjgqTjgqLjg63jgrAgRE9NIElEIOOCkuaMh+WumiBleCkgI2RpYWxvZy1ob2dlXHJcbiAgICAgICAgICogQHBhcmFtIG9wdGlvbnMge0RpYWxvZ09wdGlvbnN9IFtpbl0g44Kq44OX44K344On44OzXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgY29uc3RydWN0b3IoaWQ6IHN0cmluZywgb3B0aW9ucz86IERpYWxvZ09wdGlvbnMpIHtcclxuICAgICAgICAgICAgLy8gRGlhbG9nIOWFsemAmuioreWumuOBruWIneacn+WMllxyXG4gICAgICAgICAgICBEaWFsb2cuaW5pdENvbW1vbkNvbmRpdGlvbigpO1xyXG4gICAgICAgICAgICAvLyDoqK3lrprjgpLmm7TmlrBcclxuICAgICAgICAgICAgdGhpcy5fc2V0dGluZ3MgPSAkLmV4dGVuZCh7fSwgRGlhbG9nLnNfZGVmYXVsdE9wdGlvbnMsIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICAvLyDjg4DjgqTjgqLjg63jgrDjg4bjg7Pjg5fjg6zjg7zjg4jjgpLkvZzmiJBcclxuICAgICAgICAgICAgdGhpcy5fdGVtcGxhdGUgPSBUb29scy5UZW1wbGF0ZS5nZXRKU1QoaWQsIHRoaXMuX3NldHRpbmdzLnNyYyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIHB1YmxpYyBtZXRob2RzXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOihqOekulxyXG4gICAgICAgICAqIOihqOekuuOCkuOBl+OBpuWni+OCgeOBpiBET00g44GM5pyJ5Yq544Gr44Gq44KL44CCXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gb3B0aW9ucyB7RGlhbG9nT3B0aW9uc30gW2luXSDjgqrjg5fjgrfjg6fjg7MgKHNyYyDjga/nhKHoppbjgZXjgozjgospXHJcbiAgICAgICAgICogQHJldHVybiDjg4DjgqTjgqLjg63jgrDjga4galF1ZXJ5IOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzaG93KG9wdGlvbnM/OiBEaWFsb2dPcHRpb25zKTogSlF1ZXJ5IHtcclxuICAgICAgICAgICAgY29uc3QgJGRvY3VtZW50ID0gJChkb2N1bWVudCk7XHJcbiAgICAgICAgICAgIGNvbnN0ICRib2R5ID0gJChcImJvZHlcIik7XHJcbiAgICAgICAgICAgIGNvbnN0ICRwYWdlID0gKDxhbnk+JGJvZHkpLnBhZ2Vjb250YWluZXIoXCJnZXRBY3RpdmVQYWdlXCIpO1xyXG5cclxuICAgICAgICAgICAgY29uc3Qgb2ZjSGlkZGVuID0ge1xyXG4gICAgICAgICAgICAgICAgXCJvdmVyZmxvd1wiOiAgICAgXCJoaWRkZW5cIixcclxuICAgICAgICAgICAgICAgIFwib3ZlcmZsb3cteFwiOiAgIFwiaGlkZGVuXCIsXHJcbiAgICAgICAgICAgICAgICBcIm92ZXJmbG93LXlcIjogICBcImhpZGRlblwiLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBjb25zdCBvZmNCb2R5ID0geyAvLyBib2R5IG92ZXJmbG93IGNvbnRleHRcclxuICAgICAgICAgICAgICAgIFwib3ZlcmZsb3dcIjogICAgICRib2R5LmNzcyhcIm92ZXJmbG93XCIpLFxyXG4gICAgICAgICAgICAgICAgXCJvdmVyZmxvdy14XCI6ICAgJGJvZHkuY3NzKFwib3ZlcmZsb3cteFwiKSxcclxuICAgICAgICAgICAgICAgIFwib3ZlcmZsb3cteVwiOiAgICRib2R5LmNzcyhcIm92ZXJmbG93LXlcIiksXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGNvbnN0IHBhcmVudFNjcm9sbFBvcyA9ICRib2R5LnNjcm9sbFRvcCgpO1xyXG4gICAgICAgICAgICBjb25zdCBvZmNQYWdlID0geyAvLyBwYWdlIG92ZXJmbG93IGNvbnRleHRcclxuICAgICAgICAgICAgICAgIFwib3ZlcmZsb3dcIjogICAgICRwYWdlLmNzcyhcIm92ZXJmbG93XCIpLFxyXG4gICAgICAgICAgICAgICAgXCJvdmVyZmxvdy14XCI6ICAgJHBhZ2UuY3NzKFwib3ZlcmZsb3cteFwiKSxcclxuICAgICAgICAgICAgICAgIFwib3ZlcmZsb3cteVwiOiAgICRwYWdlLmNzcyhcIm92ZXJmbG93LXlcIiksXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBjb25zdCBzY3JvbGxFdmVudCA9IFwic2Nyb2xsIHRvdWNobW92ZSBtb3VzZW1vdmUgTVNQb2ludGVyTW92ZVwiO1xyXG5cclxuICAgICAgICAgICAgY29uc3Qgc2Nyb2xsSGFuZGVyID0gKGV2ZW50OiBKUXVlcnkuRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChcImRlbnlcIiA9PT0gdGhpcy5fc2V0dGluZ3Muc2Nyb2xsRXZlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChcImFkanVzdFwiID09PSB0aGlzLl9zZXR0aW5ncy5zY3JvbGxFdmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICRib2R5LnNjcm9sbFRvcChwYXJlbnRTY3JvbGxQb3MpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLy8gb3B0aW9uIOOBjOaMh+WumuOBleOCjOOBpuOBhOOBn+WgtOWQiOabtOaWsFxyXG4gICAgICAgICAgICBpZiAobnVsbCAhPSBvcHRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zZXR0aW5ncyA9ICQuZXh0ZW5kKHt9LCB0aGlzLl9zZXR0aW5ncywgb3B0aW9ucyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIGFmdGVyY2xvc2Ug5Yem55CG44GvIERpYWxvZyDjga7noLTmo4Tlh6bnkIbjgpLlrp/oo4XjgZnjgovjgZ/jgoHln7rmnKznmoTjgavoqK3lrprnpoHmraIgKOW8t+WItuS4iuabuOOBjeODouODvOODieOCkuioreWumuS9v+eUqOWPrylcclxuICAgICAgICAgICAgaWYgKHRoaXMuX3NldHRpbmdzLmFmdGVyY2xvc2UgJiYgIXRoaXMuX3NldHRpbmdzLmZvcmNlT3ZlcndyaXRlQWZ0ZXJDbG9zZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFRBRyArIFwiY2Fubm90IGFjY2VwdCAnYWZ0ZXJjbG9zZScgb3B0aW9uLiBwbGVhc2UgaW5zdGVhZCB1c2luZyAncG9wdXBhZnRlcmNsb3NlJyBldmVudC5cIik7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5fc2V0dGluZ3MuYWZ0ZXJjbG9zZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gdGl0bGUg44Gu5pyJ54ShXHJcbiAgICAgICAgICAgICg8YW55PnRoaXMuX3NldHRpbmdzKS5fdGl0bGVTdGF0ZSA9IHRoaXMuX3NldHRpbmdzLnRpdGxlID8gXCJ1aS1oYXMtdGl0bGVcIiA6IFwidWktbm8tdGl0bGVcIjtcclxuXHJcbiAgICAgICAgICAgIC8qXHJcbiAgICAgICAgICAgICAqIHRlbXBsYXRlIOOBi+OCiSBqUXVlcnkg44Kq44OW44K444Kn44Kv44OI44KS5L2c5oiQ44GX44CBXHJcbiAgICAgICAgICAgICAqIDxib2R5PiDnm7TkuIvjgavov73liqAuXHJcbiAgICAgICAgICAgICAqICRwYWdlIOOBp+OBryBCYWNrYm9uZSBldmVudCDjgpLlj5fjgZHjgonjgozjgarjgYTjgZPjgajjgavms6jmhI9cclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIHRoaXMuXyRkaWFsb2cgPSAkKHRoaXMuX3RlbXBsYXRlKHRoaXMuX3NldHRpbmdzKSk7XHJcbiAgICAgICAgICAgIHRoaXMuXyRkaWFsb2cubG9jYWxpemUoKTtcclxuICAgICAgICAgICAgJGJvZHkuYXBwZW5kKHRoaXMuXyRkaWFsb2cpO1xyXG5cclxuICAgICAgICAgICAgLy8gdGhlbWUg44KS6Kej5rG6XHJcbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZVRoZW1lKCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl8kZGlhbG9nXHJcbiAgICAgICAgICAgICAgICAub24oXCJwb3B1cGNyZWF0ZVwiLCAoZXZlbnQ6IEpRdWVyeS5FdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIOOCueOCr+ODreODvOODq+OCkuaKkeatolxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChcImFsbG93XCIgIT09IHRoaXMuX3NldHRpbmdzLnNjcm9sbEV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRkb2N1bWVudC5vbihzY3JvbGxFdmVudCwgc2Nyb2xsSGFuZGVyKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgJGJvZHkuY3NzKG9mY0hpZGRlbik7XHJcbiAgICAgICAgICAgICAgICAgICAgJHBhZ2UuY3NzKG9mY0hpZGRlbik7XHJcbiAgICAgICAgICAgICAgICAgICAgRGlhbG9nLnJlZ2lzdGVyKHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5lbmhhbmNlV2l0aGluKCk7XHJcblxyXG4gICAgICAgICAgICAvLyBET00g5ouh5by1XHJcbiAgICAgICAgICAgIGlmIChudWxsICE9IHRoaXMuX3NldHRpbmdzLmRvbUV4dGVuc2lvbk9wdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIEV4dGVuc2lvbk1hbmFnZXIuYXBwbHlEb21FeHRlbnNpb24odGhpcy5fJGRpYWxvZywgdGhpcy5fc2V0dGluZ3MuZG9tRXh0ZW5zaW9uT3B0aW9ucyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMub25CZWZvcmVTaG93KClcclxuICAgICAgICAgICAgICAgIC5kb25lKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAvLyDooajnpLpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl8kZGlhbG9nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5wb3B1cCgkLmV4dGVuZCh7fSwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb25UbzogXCJ3aW5kb3dcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFmdGVyY2xvc2U6IChldmVudDogSlF1ZXJ5LkV2ZW50LCB1aTogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g44K544Kv44Ot44O844Or54q25oWL44KS5oi744GZXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHBhZ2UuY3NzKG9mY1BhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRib2R5LmNzcyhvZmNCb2R5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXCJhbGxvd1wiICE9PSB0aGlzLl9zZXR0aW5ncy5zY3JvbGxFdmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkZG9jdW1lbnQub2ZmKHNjcm9sbEV2ZW50LCBzY3JvbGxIYW5kZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEaWFsb2cucmVnaXN0ZXIobnVsbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fJGRpYWxvZy5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl8kZGlhbG9nID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHRoaXMuX3NldHRpbmdzKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnBvcHVwKFwib3BlblwiKS5vbih0aGlzLl9zZXR0aW5ncy5ldmVudCwgKGV2ZW50OiBKUXVlcnkuRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFwiZGF0YS1hdXRvLWNsb3NlPSdmYWxzZSdcIiDjgYzmjIflrprjgZXjgozjgabjgYTjgovopoHntKDjga8gZGlhbG9nIOOCkumWieOBmOOBquOBhFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGF1dG9DbG9zZSA9ICQoZXZlbnQudGFyZ2V0KS5hdHRyKFwiZGF0YS1hdXRvLWNsb3NlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgPT0gYXV0b0Nsb3NlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXV0b0Nsb3NlID0gdGhpcy5fc2V0dGluZ3MuZGVmYXVsdEF1dG9DbG9zZSA/IFwidHJ1ZVwiIDogXCJmYWxzZVwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFwiZmFsc2VcIiA9PT0gYXV0b0Nsb3NlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5mYWlsKChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoVEFHICsgXCJEaWFsb2cuc2hvdygpIGZhaWxlZC5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuXyRkaWFsb2cpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fJGRpYWxvZy50cmlnZ2VyKFwiZXJyb3JcIiwgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuXyRkaWFsb2c7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDntYLkuoZcclxuICAgICAgICAgKiDln7rmnKznmoTjgavjga/oh6rli5XjgafplonjgZjjgovjgYzjgIFcclxuICAgICAgICAgKiDooajnpLrkuK3jga7jg4DjgqTjgqLjg63jgrDjgpLjgq/jg6njgqTjgqLjg7Pjg4jlgbTjgYvjgonplonjgZjjgovjg6Hjgr3jg4Pjg4lcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgY2xvc2UoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl8kZGlhbG9nKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl8kZGlhbG9nLnBvcHVwKFwiY2xvc2VcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDjg4DjgqTjgqLjg63jgrAgZWxlbWVudCDjgpLlj5blvpdcclxuICAgICAgICBwdWJsaWMgZ2V0ICRlbCgpOiBKUXVlcnkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fJGRpYWxvZztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gcHJvdGVjdGVkIG1ldGhvZHM6IE92ZXJyaWRlXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOODgOOCpOOCouODreOCsOihqOekuuOBruebtOWJjVxyXG4gICAgICAgICAqIERPTSDjgpLmk43kvZzjgafjgY3jgovjgr/jgqTjg5/jg7PjgrDjgaflkbzjgbPlh7rjgZXjgozjgosuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcmV0dXJuIHtJUHJvbWlzZUJhc2V9IHByb21pc2Ug44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJvdGVjdGVkIG9uQmVmb3JlU2hvdygpOiBJUHJvbWlzZUJhc2U8dm9pZD4ge1xyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlPHZvaWQ+KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDjg4DjgqTjgqLjg63jgrDjga7kvb/nlKjjgZnjgosgVGhlbWUg44KS6Kej5rG6XHJcbiAgICAgICAgICog5LiN6KaB44Gq5aC05ZCI44Gv44Kq44O844OQ44O844Op44Kk44OJ44GZ44KL44GT44Go44KC5Y+v6IO9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJvdGVjdGVkIHJlc29sdmVUaGVtZSgpOiB2b2lkIHtcclxuICAgICAgICAgICAgY29uc3QgcXVlcnlUaGVtZSA9ICgpOiBzdHJpbmcgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICQoXCIudWktcGFnZS1hY3RpdmVcIikuanFtRGF0YShcInRoZW1lXCIpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgbGV0IGNhbmRpZGF0ZVRoZW1lOiBzdHJpbmc7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXRoaXMuX3NldHRpbmdzLnRoZW1lKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkb21UaGVtZSA9IHRoaXMuXyRkaWFsb2cuanFtRGF0YShcInRoZW1lXCIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFkb21UaGVtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3NldHRpbmdzLnRoZW1lID0gY2FuZGlkYXRlVGhlbWUgPSBxdWVyeVRoZW1lKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5fc2V0dGluZ3Mub3ZlcmxheVRoZW1lKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkb21PdmVybGF5VGhlbWUgPSB0aGlzLl8kZGlhbG9nLmpxbURhdGEoXCJvdmVybGF5LXRoZW1lXCIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFkb21PdmVybGF5VGhlbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9zZXR0aW5ncy5vdmVybGF5VGhlbWUgPSBjYW5kaWRhdGVUaGVtZSB8fCBxdWVyeVRoZW1lKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIHRyYW5zaXRpb24g44Gu5pu05pawXHJcbiAgICAgICAgICAgIHRoaXMuX3NldHRpbmdzLnRyYW5zaXRpb24gPSBUaGVtZS5xdWVyeURpYWxvZ1RyYW5zaXRpb24odGhpcy5fc2V0dGluZ3MudHJhbnNpdGlvbik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIHB1YmxpYyBzdGF0aWMgbWV0aG9kc1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBEaWFsb2cg44Gu5pei5a6a44Kq44OX44K344On44Oz44KS5pu05pawXHJcbiAgICAgICAgICog44GZ44G644Gm44GuIERpYWxvZyDjgYzkvb/nlKjjgZnjgovlhbHpgJroqK3lrppcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBvcHRpb25zIHtEaWFsb2dPcHRpb25zfSBbaW5dIOODgOOCpOOCouODreOCsOOCquODl+OCt+ODp+ODs1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgc2V0RGVmYXVsdE9wdGlvbnMob3B0aW9uczogRGlhbG9nT3B0aW9ucyk6IHZvaWQge1xyXG4gICAgICAgICAgICAvLyBEaWFsb2cg5YWx6YCa6Kit5a6a44Gu5Yid5pyf5YyWXHJcbiAgICAgICAgICAgIERpYWxvZy5pbml0Q29tbW9uQ29uZGl0aW9uKCk7XHJcbiAgICAgICAgICAgICQuZXh0ZW5kKHRydWUsIERpYWxvZy5zX2RlZmF1bHRPcHRpb25zLCBvcHRpb25zKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gcHJpdmF0ZSBtZXRob2RzXHJcblxyXG4gICAgICAgIC8vISDnj77lnKggYWN0aXZlIOOBquODgOOCpOOCouODreOCsOOBqOOBl+OBpueZu+mMsuOBmeOCi1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIHJlZ2lzdGVyKGRpYWxvZzogRGlhbG9nKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmIChudWxsICE9IGRpYWxvZyAmJiBudWxsICE9IERpYWxvZy5zX2FjdGl2ZURpYWxvZykge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFRBRyArIFwibmV3IGRpYWxvZyBwcm9jIGlzIGNhbGxlZCBpbiB0aGUgcGFzdCBkaWFsb2cncyBvbmUuIHVzZSBzZXRUaW1lb3V0KCkgZm9yIHBvc3QgcHJvY2Vzcy5cIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgRGlhbG9nLnNfYWN0aXZlRGlhbG9nID0gZGlhbG9nO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRGlhbG9nIOWFsemAmuioreWumuOBruWIneacn+WMllxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGluaXRDb21tb25Db25kaXRpb24oKTogdm9pZCB7XHJcbiAgICAgICAgICAgIC8vIEZyYW1ld29yayDjga7liJ3mnJ/ljJblvozjgavlh6bnkIbjgZnjgovlv4XopoHjgYzjgYLjgotcclxuICAgICAgICAgICAgaWYgKCFGcmFtZXdvcmsuaXNJbml0aWFsaXplZCgpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oVEFHICsgXCJpbml0Q29tbW9uQ29uZGl0aW9uKCkgc2hvdWxkIGJlIGNhbGxlZCBhZnRlciBGcmFtZXdvcmsuaW5pdGlhbGl6ZWQuXCIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAobnVsbCA9PSBEaWFsb2cuc19vbGRCYWNrS2V5SGFuZGxlcikge1xyXG4gICAgICAgICAgICAgICAgLy8gQmFjayBCdXR0b24gSGFuZGxlclxyXG4gICAgICAgICAgICAgICAgRGlhbG9nLnNfb2xkQmFja0tleUhhbmRsZXIgPSBDRFAuc2V0QmFja0J1dHRvbkhhbmRsZXIobnVsbCk7XHJcbiAgICAgICAgICAgICAgICBDRFAuc2V0QmFja0J1dHRvbkhhbmRsZXIoRGlhbG9nLmN1c3RvbUJhY2tLZXlIYW5kbGVyKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyDml6Llrprjgqrjg5fjgrfjg6fjg7NcclxuICAgICAgICAgICAgICAgIERpYWxvZy5zX2RlZmF1bHRPcHRpb25zID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlkUG9zaXRpdmU6ICAgICAgICAgICAgIFwiZGxnLWJ0bi1wb3NpdGl2ZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGlkTmVnYXRpdmU6ICAgICAgICAgICAgIFwiZGxnLWJ0bi1uZWdhdGl2ZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50OiAgICAgICAgICAgICAgICAgIEZyYW1ld29yay5nZXREZWZhdWx0Q2xpY2tFdmVudCgpLFxyXG4gICAgICAgICAgICAgICAgICAgIGRpc21pc3NpYmxlOiAgICAgICAgICAgIGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHRBdXRvQ2xvc2U6ICAgICAgIGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb246ICAgICAgICAgICAgIFwicGxhdGZvcm0tZGVmYXVsdFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsUG9zaXRpdmU6ICAgICAgICAgIFwiT0tcIixcclxuICAgICAgICAgICAgICAgICAgICBsYWJlbE5lZ2F0aXZlOiAgICAgICAgICBcIkNhbmNlbFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGJhY2tLZXk6ICAgICAgICAgICAgICAgIFwiY2xvc2VcIixcclxuICAgICAgICAgICAgICAgICAgICBzY3JvbGxFdmVudDogICAgICAgICAgICBcImRlbnlcIixcclxuICAgICAgICAgICAgICAgICAgICBkb21FeHRlbnNpb25PcHRpb25zOiAgICB7fSxcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEgvVyBCYWNrIEJ1dHRvbiBIYW5kbGVyXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgY3VzdG9tQmFja0tleUhhbmRsZXIoZXZlbnQ/OiBKUXVlcnkuRXZlbnQpOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKG51bGwgIT0gRGlhbG9nLnNfYWN0aXZlRGlhbG9nKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoXCJjbG9zZVwiID09PSBEaWFsb2cuc19hY3RpdmVEaWFsb2cuX3NldHRpbmdzLmJhY2tLZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICBEaWFsb2cuc19hY3RpdmVEaWFsb2cuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXCJmdW5jdGlvblwiID09PSB0eXBlb2YgRGlhbG9nLnNfYWN0aXZlRGlhbG9nLl9zZXR0aW5ncy5iYWNrS2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgKDxEaWFsb2dCYWNrS2V5SGFuZGxlcj5EaWFsb2cuc19hY3RpdmVEaWFsb2cuX3NldHRpbmdzLmJhY2tLZXkpKGV2ZW50KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybjsgLy8gRGlhbG9nIOOBjCBhY3RpdmUg44Gq5aC05ZCI44CB5bi444Gr5pei5a6a44Gu44OP44Oz44OJ44Op44Gr44Gv5rih44GV44Gq44GEXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgRGlhbG9nLnNfb2xkQmFja0tleUhhbmRsZXIoZXZlbnQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvKiB0c2xpbnQ6ZGlzYWJsZTptYXgtbGluZS1sZW5ndGggKi9cclxuXHJcbm5hbWVzcGFjZSBDRFAuVUkge1xyXG5cclxuICAgIGNvbnN0IFRBRyA9IFwiW0NEUC5VSS5EaWFsb2dDb21tb25zXSBcIjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEFsZXJ0XHJcbiAgICAgKiBhbGVydCDjg6Hjg4Pjgrvjg7zjgrjooajnpLpcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gbWVzc2FnZSAgIFtpbl0g6KGo56S65paH5a2X5YiXXHJcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gW29wdGlvbnNdIFtpbl0g44OA44Kk44Ki44Ot44Kw44Kq44OX44K344On44OzXHJcbiAgICAgKiBAcmV0dXJuIHtqUXVlcnl9IOODgOOCpOOCouODreOCsOOBriBET00g44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBhbGVydChtZXNzYWdlOiBzdHJpbmcsIG9wdGlvbnM/OiBEaWFsb2dPcHRpb25zKTogSlF1ZXJ5IHtcclxuICAgICAgICBjb25zdCB0ZW1wbGF0ZSA9IGBcclxuICAgICAgICAgICAgPHNjcmlwdCB0eXBlPVwidGV4dC90ZW1wbGF0ZVwiPlxyXG4gICAgICAgICAgICAgICAgPHNlY3Rpb24gY2xhc3M9XCJ1aS1tb2RhbFwiIGRhdGEtcm9sZT1cInBvcHVwXCIgZGF0YS1jb3JuZXJzPVwiZmFsc2VcIj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidWktY29udGVudFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8aDEgY2xhc3M9XCJ1aS10aXRsZSB7e190aXRsZVN0YXRlfX1cIj57e3RpdGxlfX08L2gxPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz1cInVpLW1lc3NhZ2VcIj57e21lc3NhZ2V9fTwvcD5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidWktbW9kYWwtZm9vdGVyIHVpLWdyaWQtc29sb1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPVwie3tpZFBvc2l0aXZlfX1cIiBjbGFzcz1cInVpLWJ0biB1aS1ibG9jay1hIHVpLXRleHQtZW1waGFzaXNcIiBkYXRhLWF1dG8tY2xvc2U9XCJ0cnVlXCI+e3tsYWJlbFBvc2l0aXZlfX08L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvc2VjdGlvbj5cclxuICAgICAgICAgICAgPC9zY3JpcHQ+XHJcbiAgICAgICAgYDtcclxuXHJcbiAgICAgICAgY29uc3QgZGxnQWxlcnQgPSBuZXcgRGlhbG9nKHRlbXBsYXRlLCAkLmV4dGVuZCh7fSwge1xyXG4gICAgICAgICAgICBzcmM6IG51bGwsXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2UsXHJcbiAgICAgICAgfSwgb3B0aW9ucykpO1xyXG5cclxuICAgICAgICByZXR1cm4gZGxnQWxlcnQuc2hvdygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ29uZmlybVxyXG4gICAgICog56K66KqN44Oh44OD44K744O844K46KGo56S6XHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG1lc3NhZ2UgICBbaW5dIOihqOekuuaWh+Wtl+WIl1xyXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IFtvcHRpb25zXSBbaW5dIOODgOOCpOOCouODreOCsOOCquODl+OCt+ODp+ODs1xyXG4gICAgICogQHJldHVybiB7alF1ZXJ5fSDjg4DjgqTjgqLjg63jgrDjga4gRE9NIOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICovXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gY29uZmlybShtZXNzYWdlOiBzdHJpbmcsIG9wdGlvbnM/OiBEaWFsb2dPcHRpb25zKTogSlF1ZXJ5IHtcclxuICAgICAgICBjb25zdCB0ZW1wbGF0ZSA9IGBcclxuICAgICAgICAgICAgPHNjcmlwdCB0eXBlPVwidGV4dC90ZW1wbGF0ZVwiPlxyXG4gICAgICAgICAgICAgICAgPHNlY3Rpb24gY2xhc3M9XCJ1aS1tb2RhbFwiIGRhdGEtcm9sZT1cInBvcHVwXCIgZGF0YS1jb3JuZXJzPVwiZmFsc2VcIj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidWktY29udGVudFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8aDEgY2xhc3M9XCJ1aS10aXRsZSB7e190aXRsZVN0YXRlfX1cIj57e3RpdGxlfX08L2gxPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz1cInVpLW1lc3NhZ2VcIj57e21lc3NhZ2V9fTwvcD5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidWktbW9kYWwtZm9vdGVyIHVpLWdyaWQtYVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPVwie3tpZE5lZ2F0aXZlfX1cIiBjbGFzcz1cInVpLWJ0biB1aS1ibG9jay1hXCIgZGF0YS1hdXRvLWNsb3NlPVwidHJ1ZVwiPnt7bGFiZWxOZWdhdGl2ZX19PC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9XCJ7e2lkUG9zaXRpdmV9fVwiIGNsYXNzPVwidWktYnRuIHVpLWJsb2NrLWIgdWktdGV4dC1lbXBoYXNpc1wiIGRhdGEtYXV0by1jbG9zZT1cInRydWVcIj57e2xhYmVsUG9zaXRpdmV9fTwvYnV0dG9uPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9zZWN0aW9uPlxyXG4gICAgICAgICAgICA8L3NjcmlwdD5cclxuICAgICAgICBgO1xyXG5cclxuICAgICAgICBjb25zdCBkbGdDb25maXJtID0gbmV3IERpYWxvZyh0ZW1wbGF0ZSwgJC5leHRlbmQoe30sIHtcclxuICAgICAgICAgICAgc3JjOiBudWxsLFxyXG4gICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLFxyXG4gICAgICAgIH0sIG9wdGlvbnMpKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGRsZ0NvbmZpcm0uc2hvdygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGludGVyZmFjZSBEaWFsb2dDb21tb25zT3B0aW9uc1xyXG4gICAgICogQGJyaWVmIHByb21wdCDjga7jgqrjg5fjgrfjg6fjg7NcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBEaWFsb2dQcm9tcHRPcHRpb25zIGV4dGVuZHMgRGlhbG9nT3B0aW9ucyB7XHJcbiAgICAgICAgZXZlbnRPSz86IHN0cmluZzsgLy8hPCBPSyDjg5zjgr/jg7PmirzkuIvmmYLjga4gZXZlbnQ6IGRlZmF1bHQ6IHByb21wdG9rXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAY2xhc3MgRGlhbG9nUHJvbXB0XHJcbiAgICAgKiBAYnJpZWYgcHJvbXB0IOODgOOCpOOCouODreOCsCAo6Z2e5YWs6ZaLKVxyXG4gICAgICovXHJcbiAgICBjbGFzcyBEaWFsb2dQcm9tcHQgZXh0ZW5kcyBEaWFsb2cge1xyXG5cclxuICAgICAgICBwcml2YXRlIF9ldmVudE9LOiBzdHJpbmc7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIGNvbnN0cnVjdG9yXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKi9cclxuICAgICAgICBjb25zdHJ1Y3RvcihpZDogc3RyaW5nLCBvcHRpb25zPzogRGlhbG9nUHJvbXB0T3B0aW9ucykge1xyXG4gICAgICAgICAgICBzdXBlcihpZCwgb3B0aW9ucyk7XHJcbiAgICAgICAgICAgIHRoaXMuX2V2ZW50T0sgPSBvcHRpb25zLmV2ZW50T0sgfHwgXCJwcm9tcHRva1wiO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOODgOOCpOOCouODreOCsOihqOekuuOBruebtOWJjVxyXG4gICAgICAgIHByb3RlY3RlZCBvbkJlZm9yZVNob3coKTogSVByb21pc2VCYXNlPHZvaWQ+IHtcclxuICAgICAgICAgICAgY29uc3Qgb25Db21taXQgPSAoZXZlbnQ6IEpRdWVyeS5FdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGV4dCA9IHRoaXMuJGVsLmZpbmQoXCIjX3VpLXByb21wdFwiKS52YWwoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuJGVsLnRyaWdnZXIodGhpcy5fZXZlbnRPSywgdGV4dCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgdGhpcy4kZWxcclxuICAgICAgICAgICAgICAgIC5vbihcInZjbGlja1wiLCBcIi5jb21tYW5kLXByb21wdC1vayBcIiwgKGV2ZW50OiBKUXVlcnkuRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBvbkNvbW1pdChldmVudCk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLm9uKFwia2V5ZG93blwiLCBcIiNfdWktcHJvbXB0XCIsIChldmVudDogSlF1ZXJ5LkV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgRU5URVJfS0VZX0NPREUgPSAxMztcclxuICAgICAgICAgICAgICAgICAgICBpZiAoRU5URVJfS0VZX0NPREUgPT09IGV2ZW50LmtleUNvZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb25Db21taXQoZXZlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHN1cGVyLm9uQmVmb3JlU2hvdygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFByb21wdFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXNzYWdlICAgW2luXSDooajnpLrmloflrZfliJdcclxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBbb3B0aW9uc10gW2luXSDjg4DjgqTjgqLjg63jgrDjgqrjg5fjgrfjg6fjg7NcclxuICAgICAqIEByZXR1cm4ge2pRdWVyeX0g44OA44Kk44Ki44Ot44Kw44GuIERPTSDjgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIHByb21wdChtZXNzYWdlOiBzdHJpbmcsIG9wdGlvbnM/OiBEaWFsb2dQcm9tcHRPcHRpb25zKTogSlF1ZXJ5IHtcclxuICAgICAgICBjb25zdCB0ZW1wbGF0ZSA9IGBcclxuICAgICAgICAgICAgPHNjcmlwdCB0eXBlPVwidGV4dC90ZW1wbGF0ZVwiPlxyXG4gICAgICAgICAgICAgICAgPHNlY3Rpb24gY2xhc3M9XCJ1aS1tb2RhbFwiIGRhdGEtcm9sZT1cInBvcHVwXCIgZGF0YS1jb3JuZXJzPVwiZmFsc2VcIj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidWktY29udGVudFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8aDEgY2xhc3M9XCJ1aS10aXRsZSB7e190aXRsZVN0YXRlfX1cIj57e3RpdGxlfX08L2gxPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz1cInVpLW1lc3NhZ2VcIj57e21lc3NhZ2V9fTwvcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIGZvcj1cIl91aS1wcm9tcHRcIiBjbGFzcz1cInVpLWhpZGRlbi1hY2Nlc3NpYmxlXCI+PC9sYWJlbD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbmFtZT1cIl91aS1wcm9tcHRcIiBpZD1cIl91aS1wcm9tcHRcIj5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidWktbW9kYWwtZm9vdGVyIHVpLWdyaWQtYVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPVwie3tpZE5lZ2F0aXZlfX1cIiBjbGFzcz1cInVpLWJ0biB1aS1ibG9jay1hXCIgZGF0YS1hdXRvLWNsb3NlPVwidHJ1ZVwiPnt7bGFiZWxOZWdhdGl2ZX19PC9idXR0b24+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9XCJ7e2lkUG9zaXRpdmV9fVwiIGNsYXNzPVwiY29tbWFuZC1wcm9tcHQtb2sgdWktYnRuIHVpLWJsb2NrLWIgdWktdGV4dC1lbXBoYXNpc1wiIGRhdGEtYXV0by1jbG9zZT1cImZhbHNlXCI+e3tsYWJlbFBvc2l0aXZlfX08L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvc2VjdGlvbj5cclxuICAgICAgICAgICAgPC9zY3JpcHQ+XHJcbiAgICAgICAgYDtcclxuXHJcbiAgICAgICAgY29uc3QgZGxnUHJvbXB0ID0gbmV3IERpYWxvZ1Byb21wdCh0ZW1wbGF0ZSwgJC5leHRlbmQoe30sIHtcclxuICAgICAgICAgICAgc3JjOiBudWxsLFxyXG4gICAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLFxyXG4gICAgICAgIH0sIG9wdGlvbnMpKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGRsZ1Byb21wdC5zaG93KCk7XHJcbiAgICB9XHJcbn1cclxuIiwibmFtZXNwYWNlIENEUC5VSSB7XHJcblxyXG4gICAgaW1wb3J0IFJvdXRlciAgICAgICA9IENEUC5GcmFtZXdvcmsuUm91dGVyO1xyXG4gICAgaW1wb3J0IElQYWdlICAgICAgICA9IENEUC5GcmFtZXdvcmsuSVBhZ2U7XHJcbiAgICBpbXBvcnQgTW9kZWwgICAgICAgID0gQ0RQLkZyYW1ld29yay5Nb2RlbDtcclxuICAgIGltcG9ydCBWaWV3ICAgICAgICAgPSBDRFAuRnJhbWV3b3JrLlZpZXc7XHJcbiAgICBpbXBvcnQgVmlld09wdGlvbnMgID0gQ0RQLkZyYW1ld29yay5WaWV3T3B0aW9ucztcclxuICAgIGltcG9ydCBUZW1wbGF0ZSAgICAgPSBDRFAuVG9vbHMuVGVtcGxhdGU7XHJcbiAgICBpbXBvcnQgSlNUICAgICAgICAgID0gQ0RQLlRvb2xzLkpTVDtcclxuXHJcbiAgICBjb25zdCBUQUc6IHN0cmluZyA9IFwiW0NEUC5VSS5CYXNlSGVhZGVyVmlld10gXCI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAaW50ZXJmYWNlIEJhc2VIZWFkZXJWaWV3T3B0aW9uc1xyXG4gICAgICogQGJyaWVmIEJhc2VIZWFkZXJWaWV3IOOBq+aMh+WumuOBmeOCi+OCquODl+OCt+ODp+ODs+OCpOODs+OCv+ODvOODleOCp+OCpOOCuVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIEJhc2VIZWFkZXJWaWV3T3B0aW9uczxUTW9kZWwgZXh0ZW5kcyBNb2RlbCA9IE1vZGVsPiBleHRlbmRzIFZpZXdPcHRpb25zPFRNb2RlbD4ge1xyXG4gICAgICAgIGJhc2VUZW1wbGF0ZT86IEpTVDsgICAgICAgICAgICAgLy8hPCDlm7rlrprjg5jjg4Pjg4DnlKggSmF2YVNjcmlwdCDjg4bjg7Pjg5fjg6zjg7zjg4guXHJcbiAgICAgICAgYmFja0NvbW1hbmRTZWxlY3Rvcj86IHN0cmluZzsgICAvLyE8IFwi5oi744KLXCLjgrPjg57jg7Pjg4njgrvjg6zjgq/jgr8uIGRlZmF1bHQ6IFwiY29tbWFuZC1iYWNrXCJcclxuICAgICAgICBiYWNrQ29tbWFuZEtpbmQ/OiBzdHJpbmc7ICAgICAgIC8vITwgXCLmiLvjgotcIuOCs+ODnuODs+ODieeoruWIpSAob25Db21tYW5kIOesrDLlvJXmlbApLiBkZWZhdWx0OiBcInBhZ2ViYWNrXCJcclxuICAgIH1cclxuXHJcbiAgICAvL19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18vL1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGNsYXNzIEJhc2VIZWFkZXJWaWV3XHJcbiAgICAgKiBAYnJpZWYg5YWx6YCa44OY44OD44OA44KS5pON5L2c44GZ44KL44Kv44Op44K5XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBjbGFzcyBCYXNlSGVhZGVyVmlldzxUTW9kZWwgZXh0ZW5kcyBNb2RlbCA9IE1vZGVsPiBleHRlbmRzIFZpZXc8VE1vZGVsPiB7XHJcblxyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIHNfJGhlYWRlckJhc2U6IEpRdWVyeTsgICAvLyE8IOODmuODvOOCuOWkluOBq+mFjee9ruOBleOCjOOCi+WFsemAmuODmOODg+ODgOOBruODmeODvOOCuemDqOWTgeeUqCBqUXVlcnkg44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgc19yZWZDb3VudCA9IDA7ICAgICAgICAgIC8vITwg5Y+C54Wn44Kr44Km44Oz44OIXHJcbiAgICAgICAgcHJpdmF0ZSBfdGVtcGxhdGU6IEpTVDtcclxuICAgICAgICBwcml2YXRlIF9oYXNCYWNrSW5kaWNhdG9yOiBib29sZWFuO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBjb25zdHJ1Y3RvclxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtJUGFnZX0gX293bmVyIFtpbl0g44Kq44O844OK44O844Oa44O844K444Kk44Oz44K544K/44Oz44K5XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgY29uc3RydWN0b3IocHJpdmF0ZSBfb3duZXI6IElQYWdlLCBwcml2YXRlIF9vcHRpb25zPzogQmFzZUhlYWRlclZpZXdPcHRpb25zPFRNb2RlbD4pIHtcclxuICAgICAgICAgICAgc3VwZXIoX29wdGlvbnMgPSAkLmV4dGVuZCh7XHJcbiAgICAgICAgICAgICAgICBlbDogX293bmVyLiRwYWdlLmZpbmQoXCJbZGF0YS1yb2xlPSdoZWFkZXInXVwiKSxcclxuICAgICAgICAgICAgICAgIGJhY2tDb21tYW5kU2VsZWN0b3I6IFwiLmNvbW1hbmQtYmFja1wiLFxyXG4gICAgICAgICAgICAgICAgYmFja0NvbW1hbmRLaW5kOiBcInBhZ2ViYWNrXCIsXHJcbiAgICAgICAgICAgIH0sIF9vcHRpb25zKSk7XHJcblxyXG4gICAgICAgICAgICAvLyB0ZW1wbGF0ZSDoqK3lrppcclxuICAgICAgICAgICAgaWYgKF9vcHRpb25zLmJhc2VUZW1wbGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fdGVtcGxhdGUgPSBfb3B0aW9ucy5iYXNlVGVtcGxhdGU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl90ZW1wbGF0ZSA9IFRlbXBsYXRlLmdldEpTVChgXHJcbiAgICAgICAgICAgICAgICAgICAgPHNjcmlwdCB0eXBlPSd0ZXh0L3RlbXBsYXRlJz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGhlYWRlciBjbGFzcz0ndWktaGVhZGVyLWJhc2UgdWktYm9keS17e3RoZW1lfX0nPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ndWktZml4ZWQtYmFjay1pbmRpY2F0b3InPjwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2hlYWRlcj5cclxuICAgICAgICAgICAgICAgICAgICA8L3NjcmlwdD5cclxuICAgICAgICAgICAgICAgIGApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBCYWNrYm9uZS5WaWV3IOeUqOOBruWIneacn+WMllxyXG4gICAgICAgICAgICB0aGlzLnNldEVsZW1lbnQodGhpcy4kZWwsIHRydWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBwdWJsaWMgbWV0aG9kc1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDliJ3mnJ/ljJZcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgY3JlYXRlKCk6IEpRdWVyeSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZUhlYWRlckJhc2UoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOacieWKueWMllxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBhY3RpdmF0ZSgpOiBKUXVlcnkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zaG93SW5kaWNhdG9yKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDnhKHlirnljJZcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgaW5hY3RpdmF0ZSgpOiBKUXVlcnkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5oaWRlSW5kaWNhdG9yKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDnoLTmo4RcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgcmVsZWFzZSgpOiBKUXVlcnkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZWxlYXNlSGVhZGVyQmFzZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBwcml2YXRlIG1ldGhvZHNcclxuXHJcbiAgICAgICAgLy8hIOWFsemAmuODmOODg+ODgOOBruODmeODvOOCueOCkua6luWCmVxyXG4gICAgICAgIHByaXZhdGUgY3JlYXRlSGVhZGVyQmFzZSgpOiBKUXVlcnkge1xyXG4gICAgICAgICAgICAvLyDlm7rlrprjg5jjg4Pjg4Djga7jgajjgY3jgavmnInlirnljJZcclxuICAgICAgICAgICAgaWYgKFwiZml4ZWRcIiA9PT0gdGhpcy5fb3duZXIuJGhlYWRlci5qcW1EYXRhKFwicG9zaXRpb25cIikpIHtcclxuICAgICAgICAgICAgICAgIGlmIChudWxsID09IEJhc2VIZWFkZXJWaWV3LnNfJGhlYWRlckJhc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBCYXNlSGVhZGVyVmlldy5zXyRoZWFkZXJCYXNlID0gJCh0aGlzLl90ZW1wbGF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoZW1lOiB0aGlzLl9vd25lci4kcGFnZS5qcW1EYXRhKFwidGhlbWVcIiksXHJcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgQmFzZUhlYWRlclZpZXcuc19yZWZDb3VudCsrO1xyXG4gICAgICAgICAgICAgICAgQmFzZUhlYWRlclZpZXcuc18kaGVhZGVyQmFzZS5hcHBlbmRUbygkKGRvY3VtZW50LmJvZHkpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBCYWNrIEluZGljYXRvciDjgpLmjIHjgaPjgabjgYTjgovjgYvliKTlrppcclxuICAgICAgICAgICAgaWYgKDAgPCB0aGlzLiRlbC5maW5kKFwiLnVpLWJhY2staW5kaWNhdG9yXCIpLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5faGFzQmFja0luZGljYXRvciA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIEJhc2VIZWFkZXJWaWV3LnNfJGhlYWRlckJhc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgaW5kaWNhdG9yIOOBruihqOekulxyXG4gICAgICAgIHByaXZhdGUgc2hvd0luZGljYXRvcigpOiBKUXVlcnkge1xyXG4gICAgICAgICAgICAvLyBCYWNrIEluZGljYXRvciDjgpLmjIHjgaPjgabjgYTjgarjgYTloLTlkIjooajnpLrjgZfjgarjgYRcclxuICAgICAgICAgICAgaWYgKG51bGwgIT0gQmFzZUhlYWRlclZpZXcuc18kaGVhZGVyQmFzZSAmJiB0aGlzLl9oYXNCYWNrSW5kaWNhdG9yKSB7XHJcbiAgICAgICAgICAgICAgICBCYXNlSGVhZGVyVmlldy5zXyRoZWFkZXJCYXNlLmZpbmQoXCIudWktZml4ZWQtYmFjay1pbmRpY2F0b3JcIikuYWRkQ2xhc3MoXCJzaG93XCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBCYXNlSGVhZGVyVmlldy5zXyRoZWFkZXJCYXNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIGluZGljYXRvciDjga7pnZ7ooajnpLpcclxuICAgICAgICBwcml2YXRlIGhpZGVJbmRpY2F0b3IoKTogSlF1ZXJ5IHtcclxuICAgICAgICAgICAgaWYgKG51bGwgIT0gQmFzZUhlYWRlclZpZXcuc18kaGVhZGVyQmFzZSkge1xyXG4gICAgICAgICAgICAgICAgQmFzZUhlYWRlclZpZXcuc18kaGVhZGVyQmFzZS5maW5kKFwiLnVpLWZpeGVkLWJhY2staW5kaWNhdG9yXCIpLnJlbW92ZUNsYXNzKFwic2hvd1wiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gQmFzZUhlYWRlclZpZXcuc18kaGVhZGVyQmFzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDlhbHpgJrjg5jjg4Pjg4Djga7jg5njg7zjgrnjgpLnoLTmo4RcclxuICAgICAgICBwcml2YXRlIHJlbGVhc2VIZWFkZXJCYXNlKCk6IEpRdWVyeSB7XHJcbiAgICAgICAgICAgIC8vIOWbuuWumuODmOODg+ODgOaZguOBq+WPgueFp+OCq+OCpuODs+ODiOOCkueuoeeQhlxyXG4gICAgICAgICAgICBpZiAoXCJmaXhlZFwiID09PSB0aGlzLl9vd25lci4kaGVhZGVyLmpxbURhdGEoXCJwb3NpdGlvblwiKSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG51bGwgIT0gQmFzZUhlYWRlclZpZXcuc18kaGVhZGVyQmFzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIEJhc2VIZWFkZXJWaWV3LnNfcmVmQ291bnQtLTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoMCA9PT0gQmFzZUhlYWRlclZpZXcuc19yZWZDb3VudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBCYXNlSGVhZGVyVmlldy5zXyRoZWFkZXJCYXNlLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBCYXNlSGVhZGVyVmlldy5zXyRoZWFkZXJCYXNlID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIEJhc2VIZWFkZXJWaWV3LnNfJGhlYWRlckJhc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIE92ZXJyaWRlOiBCYWNrYm9uZS5WaWV3XHJcblxyXG4gICAgICAgIC8vISBldmVudHMgYmluZGluZ1xyXG4gICAgICAgIGV2ZW50cygpOiBhbnkge1xyXG4gICAgICAgICAgICBjb25zdCBldmVudE1hcCA9IHt9O1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fb3B0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgZXZlbnRNYXBbXCJ2Y2xpY2sgXCIgKyB0aGlzLl9vcHRpb25zLmJhY2tDb21tYW5kU2VsZWN0b3JdID0gdGhpcy5vbkNvbW1hbmRCYWNrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBldmVudE1hcDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISBiYWNrIOOBruODj+ODs+ODieODqVxyXG4gICAgICAgIHByaXZhdGUgb25Db21tYW5kQmFjayhldmVudDogSlF1ZXJ5LkV2ZW50KTogdm9pZCB7XHJcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIGxldCBoYW5kbGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9vd25lcikge1xyXG4gICAgICAgICAgICAgICAgaGFuZGxlZCA9IHRoaXMuX293bmVyLm9uQ29tbWFuZChldmVudCwgdGhpcy5fb3B0aW9ucy5iYWNrQ29tbWFuZEtpbmQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICghaGFuZGxlZCkge1xyXG4gICAgICAgICAgICAgICAgUm91dGVyLmJhY2soKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvKiB0c2xpbnQ6ZGlzYWJsZTptYXgtbGluZS1sZW5ndGggKi9cclxuXHJcbm5hbWVzcGFjZSBDRFAuVUkge1xyXG5cclxuICAgIGltcG9ydCBGcmFtZXdvcmsgPSBDRFAuRnJhbWV3b3JrO1xyXG5cclxuICAgIGNvbnN0IFRBRzogc3RyaW5nID0gXCJbQ0RQLlVJLkJhc2VQYWdlXSBcIjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBpbnRlcmZhY2UgQmFzZVBhZ2VPcHRpb25zXHJcbiAgICAgKiBAYnJpZWYgQmFzZVBhZ2Ug44Gr5oyH5a6a44GZ44KL44Kq44OX44K344On44Oz44Kk44Oz44K/44O844OV44Kn44Kk44K5XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgQmFzZVBhZ2VPcHRpb25zPFRNb2RlbCBleHRlbmRzIEZyYW1ld29yay5Nb2RlbCA9IEZyYW1ld29yay5Nb2RlbD4gZXh0ZW5kcyBGcmFtZXdvcmsuUGFnZUNvbnN0cnVjdE9wdGlvbnMsIEJhc2VIZWFkZXJWaWV3T3B0aW9uczxUTW9kZWw+IHtcclxuICAgICAgICBiYXNlSGVhZGVyPzogbmV3IChvd25lcjogRnJhbWV3b3JrLklQYWdlLCBvcHRpb25zPzogQmFzZUhlYWRlclZpZXdPcHRpb25zPFRNb2RlbD4pID0+IEJhc2VIZWFkZXJWaWV3PFRNb2RlbD47ICAgLy8hPCBIZWFkZXIg5qmf6IO944KS5o+Q5L6b44GZ44KL5Z+65bqV44Kk44Oz44K544K/44Oz44K5XHJcbiAgICAgICAgYmFja0NvbW1hbmRIYW5kbGVyPzogc3RyaW5nOyAgICAgICAgICAgICAgICAvLyE8IFwi5oi744KLXCIg44Kz44Oe44Oz44OJ44OP44Oz44OJ44Op44Oh44K944OD44OJ5ZCNLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogb25QYWdlQmFja1xyXG4gICAgICAgIGRvbUV4dGVuc2lvbk9wdGlvbnM/OiBEb21FeHRlbnNpb25PcHRpb25zOyAgLy8hPCBET03mi6HlvLXjgavmuKHjgZnjgqrjg5fjgrfjg6fjg7MuIG51bGx8dW5kZWZpbmVkIOOCkuaMh+WumuOBmeOCi+OBqOaLoeW8teOBl+OBquOBhCBkZWZhdWx0OiB7fVxyXG4gICAgfVxyXG5cclxuICAgIC8vX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXy8vXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAY2xhc3MgQmFzZVBhZ2VcclxuICAgICAqIEBicmllZiBIZWFkZXIg44KS5YKZ44GI44KLIFBhZ2Ug44Kv44Op44K5XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBjbGFzcyBCYXNlUGFnZTxUTW9kZWwgZXh0ZW5kcyBGcmFtZXdvcmsuTW9kZWwgPSBGcmFtZXdvcmsuTW9kZWw+IGV4dGVuZHMgRnJhbWV3b3JrLlBhZ2Uge1xyXG5cclxuICAgICAgICBwcml2YXRlIF9iYXNlSGVhZGVyOiBCYXNlSGVhZGVyVmlldzxUTW9kZWw+OyAgICAvLyE8IOODmOODg+ODgOOCr+ODqeOCuVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBjb25zdHJ1Y3RvclxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9ICAgICAgICAgIHVybCAgICAgICBbaW5dIOODmuODvOOCuCBVUkxcclxuICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gICAgICAgICAgaWQgICAgICAgIFtpbl0g44Oa44O844K4IElEXHJcbiAgICAgICAgICogQHBhcmFtIHtCYXNlUGFnZU9wdGlvbnN9IFtvcHRpb25zXSBbaW5dIOOCquODl+OCt+ODp+ODs1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGNvbnN0cnVjdG9yKHVybDogc3RyaW5nLCBpZDogc3RyaW5nLCBwcml2YXRlIF9vcHRpb25zPzogQmFzZVBhZ2VPcHRpb25zPFRNb2RlbD4pIHtcclxuICAgICAgICAgICAgc3VwZXIodXJsLCBpZCwgX29wdGlvbnMgPSAkLmV4dGVuZCh7XHJcbiAgICAgICAgICAgICAgICBiYXNlSGVhZGVyOiBCYXNlSGVhZGVyVmlldyxcclxuICAgICAgICAgICAgICAgIGJhY2tDb21tYW5kSGFuZGxlcjogXCJvblBhZ2VCYWNrXCIsXHJcbiAgICAgICAgICAgICAgICBiYWNrQ29tbWFuZEtpbmQ6IFwicGFnZWJhY2tcIixcclxuICAgICAgICAgICAgICAgIGRvbUV4dGVuc2lvbk9wdGlvbnM6IHt9LFxyXG4gICAgICAgICAgICB9LCBfb3B0aW9ucykpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBPdmVycmlkZTogRnJhbWV3b3JrIFBhZ2VcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogalFNIGV2ZW50OiBcInBhZ2ViZWZvcmVjcmVhdGVcIiDjgavlr77lv5xcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBldmVudCB7SlF1ZXJ5LkV2ZW50fSBbaW5dIOOCpOODmeODs+ODiOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9uUGFnZUJlZm9yZUNyZWF0ZShldmVudDogSlF1ZXJ5LkV2ZW50KTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9vcHRpb25zLmJhc2VIZWFkZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2Jhc2VIZWFkZXIgPSBuZXcgdGhpcy5fb3B0aW9ucy5iYXNlSGVhZGVyKHRoaXMsIHRoaXMuX29wdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fYmFzZUhlYWRlci5jcmVhdGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzdXBlci5vblBhZ2VCZWZvcmVDcmVhdGUoZXZlbnQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogalFNIGV2ZW50OiBcInBhZ2VjcmVhdGVcIiDjgavlr77lv5xcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBldmVudCB7SlF1ZXJ5LkV2ZW50fSBbaW5dIOOCpOODmeODs+ODiOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9uUGFnZUluaXQoZXZlbnQ6IEpRdWVyeS5FdmVudCk6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAobnVsbCAhPSB0aGlzLl9vcHRpb25zLmRvbUV4dGVuc2lvbk9wdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIEV4dGVuc2lvbk1hbmFnZXIuYXBwbHlEb21FeHRlbnNpb24odGhpcy4kcGFnZSwgdGhpcy5fb3B0aW9ucy5kb21FeHRlbnNpb25PcHRpb25zKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzdXBlci5vblBhZ2VJbml0KGV2ZW50KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIGpRTSBldmVudDogXCJwYWdlYmVmb3Jlc2hvd1wiIOOBq+WvvuW/nFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGV2ZW50IHtKUXVlcnkuRXZlbnR9IFtpbl0g44Kk44OZ44Oz44OI44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgICAgICogQHBhcmFtIGRhdGEgIHtTaG93RXZlbnREYXRhfSAgICAgW2luXSDku5jliqDmg4XloLFcclxuICAgICAgICAgKi9cclxuICAgICAgICBvblBhZ2VCZWZvcmVTaG93KGV2ZW50OiBKUXVlcnkuRXZlbnQsIGRhdGE/OiBGcmFtZXdvcmsuU2hvd0V2ZW50RGF0YSk6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fYmFzZUhlYWRlcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fYmFzZUhlYWRlci5hY3RpdmF0ZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHN1cGVyLm9uUGFnZUJlZm9yZVNob3coZXZlbnQsIGRhdGEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogalFNIGV2ZW50OiBcInBhZ2ViZWZvcmVoaWRlXCIg44Gr5a++5b+cXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gZXZlbnQge0pRdWVyeS5FdmVudH0gW2luXSDjgqTjg5njg7Pjg4jjgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAgICAgKiBAcGFyYW0gZGF0YSAge0hpZGVFdmVudERhdGF9ICAgICBbaW5dIOS7mOWKoOaDheWgsVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9uUGFnZUJlZm9yZUhpZGUoZXZlbnQ6IEpRdWVyeS5FdmVudCwgZGF0YT86IEZyYW1ld29yay5IaWRlRXZlbnREYXRhKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9iYXNlSGVhZGVyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9iYXNlSGVhZGVyLmluYWN0aXZhdGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzdXBlci5vblBhZ2VCZWZvcmVIaWRlKGV2ZW50LCBkYXRhKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIGpRTSBldmVudDogXCJwYWdlcmVtb3ZlXCIg44Gr5a++5b+cXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gZXZlbnQge0pRdWVyeS5FdmVudH0gW2luXSDjgqTjg5njg7Pjg4jjgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAgICAgKi9cclxuICAgICAgICBvblBhZ2VSZW1vdmUoZXZlbnQ6IEpRdWVyeS5FdmVudCk6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fYmFzZUhlYWRlcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fYmFzZUhlYWRlci5yZWxlYXNlKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9iYXNlSGVhZGVyID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzdXBlci5vblBhZ2VSZW1vdmUoZXZlbnQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSC9XIEJhY2sgQnV0dG9uIOODj+ODs+ODieODqVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtICBldmVudCB7SlF1ZXJ5LkV2ZW50fSBbaW5dIGV2ZW50IG9iamVjdFxyXG4gICAgICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IHRydWU6IOaXouWumuOBruWHpueQhuOCkuihjOOCj+OBquOBhCAvIGZhbHNlOiDml6Llrprjga7lh6bnkIbjgpLooYzjgYZcclxuICAgICAgICAgKi9cclxuICAgICAgICBvbkhhcmR3YXJlQmFja0J1dHRvbihldmVudD86IEpRdWVyeS5FdmVudCk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICBsZXQgcmV0dmFsID0gc3VwZXIub25IYXJkd2FyZUJhY2tCdXR0b24oZXZlbnQpO1xyXG4gICAgICAgICAgICBpZiAoIXJldHZhbCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dmFsID0gdGhpcy5vbkNvbW1hbmQoZXZlbnQsIHRoaXMuX29wdGlvbnMuYmFja0NvbW1hbmRLaW5kKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcmV0dmFsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBPdmVycmlkZTogQ3VzdG9tIEV2ZW50XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFwi5oi744KLXCIgZXZlbnQg55m66KGM5pmC44Gr44Kz44O844Or44GV44KM44KLXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gZXZlbnQge0pRdWVyeS5FdmVudH0gW2luXSDjgqTjg5njg7Pjg4jjgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAgICAgKiBAcmV0dXJuIHtCb29sZWFufSB0cnVlOiDml6Llrprjga7lh6bnkIbjgpLooYzjgo/jgarjgYQgLyBmYWxzZTog5pei5a6a44Gu5Yem55CG44KS6KGM44GGXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb25Db21tYW5kKGV2ZW50OiBKUXVlcnkuRXZlbnQsIGtpbmQ6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fb3B0aW9ucy5iYWNrQ29tbWFuZEtpbmQgPT09IGtpbmQpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9vd25lciAmJiB0aGlzLl9vd25lclt0aGlzLl9vcHRpb25zLmJhY2tDb21tYW5kSGFuZGxlcl0pIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fb3duZXJbdGhpcy5fb3B0aW9ucy5iYWNrQ29tbWFuZEhhbmRsZXJdKGV2ZW50KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8qIHRzbGludDpkaXNhYmxlOm1heC1saW5lLWxlbmd0aCAqL1xyXG5cclxubmFtZXNwYWNlIENEUC5VSSB7XHJcbiAgICBpbXBvcnQgUHJvbWlzZSAgICAgID0gQ0RQLlByb21pc2U7XHJcbiAgICBpbXBvcnQgRnJhbWV3b3JrICAgID0gQ0RQLkZyYW1ld29yaztcclxuXHJcbiAgICBjb25zdCBUQUcgPSBcIltDRFAuVUkuUGFnZVZpZXddIFwiO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGludGVyZmFjZSBQYWdlVmlld0NvbnN0cnVjdE9wdGlvbnNcclxuICAgICAqIEBicmllZiBSb3V0ZXIg44G444Gu55m76Yyy5oOF5aCx44GoIEJhY2tib25lLlZpZXcg44G444Gu5Yid5pyf5YyW5oOF5aCx44KS5qC857SN44GZ44KL44Kk44Oz44K/44O844OV44Kn44Kk44K544Kv44Op44K5XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgUGFnZVZpZXdDb25zdHJ1Y3RPcHRpb25zPFRNb2RlbCBleHRlbmRzIEZyYW1ld29yay5Nb2RlbCA9IEZyYW1ld29yay5Nb2RlbD4gZXh0ZW5kcyBCYXNlUGFnZU9wdGlvbnM8VE1vZGVsPiB7XHJcbiAgICAgICAgYmFzZVBhZ2U/OiBuZXcgKHVybDogc3RyaW5nLCBpZDogc3RyaW5nLCBvcHRpb25zPzogRnJhbWV3b3JrLlBhZ2VDb25zdHJ1Y3RPcHRpb25zKSA9PiBGcmFtZXdvcmsuUGFnZTsgICAgLy8hPCBQYWdlIOapn+iDveOCkuaPkOS+m+OBmeOCi+WfuuW6leOCpOODs+OCueOCv+ODs+OCuVxyXG4gICAgfVxyXG5cclxuICAgIC8qIHRzbGludDpkaXNhYmxlOm5vLXVzZS1iZWZvcmUtZGVjbGFyZSAqL1xyXG4gICAgLyoqXHJcbiAgICAgKiBAaW50ZXJmYWNlIFBhZ2VDb250YWluZXJWaWV3T3B0aW9uc1xyXG4gICAgICogQGJyaWVmIFBhZ2VDb250YWluZXIg44Gu44Kq44OX44K344On44OzXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgUGFnZUNvbnRhaW5lclZpZXdPcHRpb25zPFRNb2RlbCBleHRlbmRzIEZyYW1ld29yay5Nb2RlbCA9IEZyYW1ld29yay5Nb2RlbD4gZXh0ZW5kcyBGcmFtZXdvcmsuVmlld09wdGlvbnM8VE1vZGVsPiB7XHJcbiAgICAgICAgb3duZXI6IFBhZ2VWaWV3O1xyXG4gICAgICAgICRlbD86IEpRdWVyeTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBjbGFzcyBQYWdlQ29udGFpbmVyVmlld1xyXG4gICAgICogQGJyaWVmIFBhZ2VWaWV3IOOBqOmAo+aQuuWPr+iDveOBqiDjgrPjg7Pjg4bjg4rjg5Pjg6Xjg7zjgq/jg6njgrlcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGNsYXNzIFBhZ2VDb250YWluZXJWaWV3PFRNb2RlbCBleHRlbmRzIEZyYW1ld29yay5Nb2RlbCA9IEZyYW1ld29yay5Nb2RlbD4gZXh0ZW5kcyBGcmFtZXdvcmsuVmlldzxUTW9kZWw+IHtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBfb3duZXI6IFBhZ2VWaWV3ID0gbnVsbDtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogY29uc3RydWN0b3JcclxuICAgICAgICAgKi9cclxuICAgICAgICBjb25zdHJ1Y3RvcihvcHRpb25zOiBQYWdlQ29udGFpbmVyVmlld09wdGlvbnM8VE1vZGVsPikge1xyXG4gICAgICAgICAgICBzdXBlcihvcHRpb25zKTtcclxuICAgICAgICAgICAgdGhpcy5fb3duZXIgPSBvcHRpb25zLm93bmVyO1xyXG4gICAgICAgICAgICBpZiAob3B0aW9ucy4kZWwpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRlbGVnYXRlcyA9ICg8YW55PnRoaXMpLmV2ZW50cyA/IHRydWUgOiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0RWxlbWVudChvcHRpb25zLiRlbCwgZGVsZWdhdGVzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBzaG9ydCBjdXQgbWV0aG9kc1xyXG5cclxuICAgICAgICAvLyEgT3duZXIg5Y+W5b6XXHJcbiAgICAgICAgZ2V0IG93bmVyKCk6IFBhZ2VWaWV3IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX293bmVyO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qIHRzbGludDplbmFibGU6bm8tdXNlLWJlZm9yZS1kZWNsYXJlICovXHJcblxyXG4gICAgLy9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fLy9cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBjbGFzcyBQYWdlVmlld1xyXG4gICAgICogQGJyaWVmIENEUC5GcmFtZXdvcmsuUGFnZSDjgaggQmFja2JvbmUuVmlldyDjga7kuKHmlrnjga7mqZ/og73jgpLmj5DkvpvjgZnjgovjg5rjg7zjgrjjga7ln7rlupXjgq/jg6njgrlcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGNsYXNzIFBhZ2VWaWV3PFRNb2RlbCBleHRlbmRzIEZyYW1ld29yay5Nb2RlbCA9IEZyYW1ld29yay5Nb2RlbD4gZXh0ZW5kcyBGcmFtZXdvcmsuVmlldzxUTW9kZWw+IGltcGxlbWVudHMgRnJhbWV3b3JrLklQYWdlLCBJU3RhdHVzTWFuYWdlciB7XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBfcGFnZU9wdGlvbnM6IFBhZ2VWaWV3Q29uc3RydWN0T3B0aW9uczxUTW9kZWw+ID0gbnVsbDtcclxuICAgICAgICBwcm90ZWN0ZWQgX2Jhc2VQYWdlOiBGcmFtZXdvcmsuUGFnZSA9IG51bGw7XHJcbiAgICAgICAgcHJpdmF0ZSBfc3RhdHVzTWdyOiBTdGF0dXNNYW5hZ2VyID0gbnVsbDtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogY29uc3RydWN0b3JcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSB1cmwgICAgIHtTdHJpbmd9ICAgICAgICAgICAgICAgICAgIFtpbl0g44Oa44O844K4IFVSTFxyXG4gICAgICAgICAqIEBwYXJhbSBpZCAgICAgIHtTdHJpbmd9ICAgICAgICAgICAgICAgICAgIFtpbl0g44Oa44O844K4IElEXHJcbiAgICAgICAgICogQHBhcmFtIG9wdGlvbnMge1BhZ2VWaWV3Q29uc3RydWN0T3B0aW9uc30gW2luXSDjgqrjg5fjgrfjg6fjg7NcclxuICAgICAgICAgKi9cclxuICAgICAgICBjb25zdHJ1Y3Rvcih1cmw6IHN0cmluZywgaWQ6IHN0cmluZywgb3B0aW9ucz86IFBhZ2VWaWV3Q29uc3RydWN0T3B0aW9uczxUTW9kZWw+KSB7XHJcbiAgICAgICAgICAgIHN1cGVyKG9wdGlvbnMpO1xyXG5cclxuICAgICAgICAgICAgLy8gUGFnZVZpZXcg6Kit5a6aXHJcbiAgICAgICAgICAgIHRoaXMuX3BhZ2VPcHRpb25zID0gJC5leHRlbmQoe30sIHsgb3duZXI6IHRoaXMgfSwgb3B0aW9ucyk7XHJcbiAgICAgICAgICAgIHRoaXMuX2Jhc2VQYWdlID0gdGhpcy5fcGFnZU9wdGlvbnMuYmFzZVBhZ2UgPyBuZXcgdGhpcy5fcGFnZU9wdGlvbnMuYmFzZVBhZ2UodXJsLCBpZCwgdGhpcy5fcGFnZU9wdGlvbnMpIDogbmV3IEJhc2VQYWdlKHVybCwgaWQsIHRoaXMuX3BhZ2VPcHRpb25zKTtcclxuXHJcbiAgICAgICAgICAgIC8vIFN0YXR1c01hbmFnZXJcclxuICAgICAgICAgICAgdGhpcy5fc3RhdHVzTWdyID0gbmV3IFN0YXR1c01hbmFnZXIoKTtcclxuICAgICAgICAgICAgLy8gQmFja2JvbmUuVmlldyDnlKjjga7liJ3mnJ/ljJZcclxuICAgICAgICAgICAgY29uc3QgZGVsZWdhdGVzID0gKDxhbnk+dGhpcykuZXZlbnRzID8gdHJ1ZSA6IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLnNldEVsZW1lbnQodGhpcy4kcGFnZSwgZGVsZWdhdGVzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gSW1wbGVtZW50czogSVN0YXR1c01hbmFnZXIg54q25oWL566h55CGXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOeKtuaFi+WkieaVsOOBruWPgueFp+OCq+OCpuODs+ODiOOBruOCpOODs+OCr+ODquODoeODs+ODiFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHN0YXR1cyB7U3RyaW5nfSBbaW5dIOeKtuaFi+itmOWIpeWtkFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHN0YXR1c0FkZFJlZihzdGF0dXM6IHN0cmluZyk6IG51bWJlciB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zdGF0dXNNZ3Iuc3RhdHVzQWRkUmVmKHN0YXR1cyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDnirbmhYvlpInmlbDjga7lj4Lnhafjgqvjgqbjg7Pjg4jjga7jg4fjgq/jg6rjg6Hjg7Pjg4hcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBzdGF0dXMge1N0cmluZ30gW2luXSDnirbmhYvorZjliKXlrZBcclxuICAgICAgICAgKi9cclxuICAgICAgICBzdGF0dXNSZWxlYXNlKHN0YXR1czogc3RyaW5nKTogbnVtYmVyIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3N0YXR1c01nci5zdGF0dXNSZWxlYXNlKHN0YXR1cyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDlh6bnkIbjgrnjgrPjg7zjg5fmr47jgavnirbmhYvlpInmlbDjgpLoqK3lrppcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBzdGF0dXMgICB7U3RyaW5nfSAgIFtpbl0g54q25oWL6K2Y5Yil5a2QXHJcbiAgICAgICAgICogQHBhcmFtIGNhbGxiYWNrIHtGdW5jdGlvbn0gW2luXSDlh6bnkIbjgrPjg7zjg6vjg5Djg4Pjgq9cclxuICAgICAgICAgKi9cclxuICAgICAgICBzdGF0dXNTY29wZShzdGF0dXM6IHN0cmluZywgY2FsbGJhY2s6ICgpID0+IHZvaWQpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5fc3RhdHVzTWdyLnN0YXR1c1Njb3BlKHN0YXR1cywgY2FsbGJhY2spO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog5oyH5a6a44GX44Gf54q25oWL5Lit44Gn44GC44KL44GL56K66KqNXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gc3RhdHVzIHtTdHJpbmd9ICAgW2luXSDnirbmhYvorZjliKXlrZBcclxuICAgICAgICAgKiBAcmV0dXJuIHtCb29sZWFufSB0cnVlOiDnirbmhYvlhoUgLyBmYWxzZTog54q25oWL5aSWXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgaXNTdGF0dXNJbihzdGF0dXM6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc3RhdHVzTWdyLmlzU3RhdHVzSW4oc3RhdHVzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gSVBhZ2Ugc3R1YiBzdHVmZi5cclxuXHJcbiAgICAgICAgZ2V0IGFjdGl2ZSgpOiBib29sZWFuICAgICAgICAgICAgICAgICAgIHsgcmV0dXJuIHRoaXMuX2Jhc2VQYWdlLmFjdGl2ZTsgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgZ2V0IHVybCgpOiBzdHJpbmcgICAgICAgICAgICAgICAgICAgICAgIHsgcmV0dXJuIHRoaXMuX2Jhc2VQYWdlLnVybDsgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgZ2V0IGlkKCk6IHN0cmluZyAgICAgICAgICAgICAgICAgICAgICAgIHsgcmV0dXJuIHRoaXMuX2Jhc2VQYWdlID8gdGhpcy5fYmFzZVBhZ2UuaWQgOiBudWxsOyB9XHJcbiAgICAgICAgZ2V0ICRwYWdlKCk6IEpRdWVyeSAgICAgICAgICAgICAgICAgICAgIHsgcmV0dXJuIHRoaXMuX2Jhc2VQYWdlLiRwYWdlOyAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgZ2V0ICRoZWFkZXIoKTogSlF1ZXJ5ICAgICAgICAgICAgICAgICAgIHsgcmV0dXJuIHRoaXMuX2Jhc2VQYWdlLiRoZWFkZXI7ICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgZ2V0ICRmb290ZXIoKTogSlF1ZXJ5ICAgICAgICAgICAgICAgICAgIHsgcmV0dXJuIHRoaXMuX2Jhc2VQYWdlLiRmb290ZXI7ICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgZ2V0IGludGVudCgpOiBGcmFtZXdvcmsuSW50ZW50ICAgICAgICAgIHsgcmV0dXJuIHRoaXMuX2Jhc2VQYWdlLmludGVudDsgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgc2V0IGludGVudChuZXdJbnRlbnQ6IEZyYW1ld29yay5JbnRlbnQpIHsgdGhpcy5fYmFzZVBhZ2UuaW50ZW50ID0gbmV3SW50ZW50OyAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIE9yaWVudGF0aW9uIOOBruWkieabtOOCkuWPl+S/oVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIG5ld09yaWVudGF0aW9uIHtPcmllbnRhdGlvbn0gW2luXSBuZXcgb3JpZW50YXRpb24gY29kZS5cclxuICAgICAgICAgKi9cclxuICAgICAgICBvbk9yaWVudGF0aW9uQ2hhbmdlZChuZXdPcmllbnRhdGlvbjogRnJhbWV3b3JrLk9yaWVudGF0aW9uKTogdm9pZCB7XHJcbiAgICAgICAgICAgIC8vIE92ZXJyaWRlXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBIL1cgQmFjayBCdXR0b24g44OP44Oz44OJ44OpXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gIGV2ZW50IHtKUXVlcnkuRXZlbnR9IFtpbl0gZXZlbnQgb2JqZWN0XHJcbiAgICAgICAgICogQHJldHVybiB7Qm9vbGVhbn0gdHJ1ZTog5pei5a6a44Gu5Yem55CG44KS6KGM44KP44Gq44GEIC8gZmFsc2U6IOaXouWumuOBruWHpueQhuOCkuihjOOBhlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9uSGFyZHdhcmVCYWNrQnV0dG9uKGV2ZW50PzogSlF1ZXJ5LkV2ZW50KTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFJvdXRlciBcImJlZm9yZSByb3V0ZSBjaGFuZ2VcIiDjg4/jg7Pjg4njg6lcclxuICAgICAgICAgKiDjg5rjg7zjgrjpgbfnp7vnm7TliY3jgavpnZ7lkIzmnJ/lh6bnkIbjgpLooYzjgYbjgZPjgajjgYzlj6/og71cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZXR1cm4ge0lQcm9taXNlQmFzZX0gUHJvbWlzZSDjgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAgICAgKi9cclxuICAgICAgICBvbkJlZm9yZVJvdXRlQ2hhbmdlKCk6IElQcm9taXNlQmFzZTxhbnk+IHtcclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog5rGO55So44Kz44Oe44Oz44OJ44KS5Y+X5L+hXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gIGV2ZW50IHtKUXVlcnkuRXZlbnR9IFtpbl0gZXZlbnQgb2JqZWN0XHJcbiAgICAgICAgICogQHBhcmFtICBldmVudCB7a2luZH0gICAgICAgICAgICAgIFtpbl0gY29tbWFuZCBraW5kIHN0cmluZ1xyXG4gICAgICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IHRydWU6IOaXouWumuOBruWHpueQhuOCkuihjOOCj+OBquOBhCAvIGZhbHNlOiDml6Llrprjga7lh6bnkIbjgpLooYzjgYZcclxuICAgICAgICAgKi9cclxuICAgICAgICBvbkNvbW1hbmQoZXZlbnQ/OiBKUXVlcnkuRXZlbnQsIGtpbmQ/OiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog5pyA5Yid44GuIE9uUGFnZUluaXQoKSDjga7jgajjgY3jgavjga7jgb/jgrPjg7zjg6vjgZXjgozjgotcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBldmVudCB7SlF1ZXJ5LkV2ZW50fSBbaW5dIOOCpOODmeODs+ODiOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9uSW5pdGlhbGl6ZShldmVudDogSlF1ZXJ5LkV2ZW50KTogdm9pZCB7XHJcbiAgICAgICAgICAgIC8vIE92ZXJyaWRlXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBqUU0gZXZlbnQ6IFwicGFnZWJlZm9yZWNyZWF0ZVwiIOOBq+WvvuW/nFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGV2ZW50IHtKUXVlcnkuRXZlbnR9IFtpbl0g44Kk44OZ44Oz44OI44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb25QYWdlQmVmb3JlQ3JlYXRlKGV2ZW50OiBKUXVlcnkuRXZlbnQpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRFbGVtZW50KHRoaXMuJHBhZ2UsIHRydWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogalFNIGV2ZW50OiBcInBhZ2VjcmVhdGVcIiAo5penOlwicGFnZWluaXRcIikg44Gr5a++5b+cXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gZXZlbnQge0pRdWVyeS5FdmVudH0gW2luXSDjgqTjg5njg7Pjg4jjgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAgICAgKi9cclxuICAgICAgICBvblBhZ2VJbml0KGV2ZW50OiBKUXVlcnkuRXZlbnQpOiB2b2lkIHtcclxuICAgICAgICAgICAgLy8gT3ZlcnJpZGVcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIGpRTSBldmVudDogXCJwYWdlYmVmb3Jlc2hvd1wiIOOBq+WvvuW/nFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGV2ZW50IHtKUXVlcnkuRXZlbnR9IFtpbl0g44Kk44OZ44Oz44OI44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgICAgICogQHBhcmFtIGRhdGEgIHtTaG93RXZlbnREYXRhfSAgICAgW2luXSDku5jliqDmg4XloLFcclxuICAgICAgICAgKi9cclxuICAgICAgICBvblBhZ2VCZWZvcmVTaG93KGV2ZW50OiBKUXVlcnkuRXZlbnQsIGRhdGE/OiBGcmFtZXdvcmsuU2hvd0V2ZW50RGF0YSk6IHZvaWQge1xyXG4gICAgICAgICAgICAvLyBPdmVycmlkZVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogalFNIGV2ZW50OiBcInBhZ2Vjb250YWluZXJzaG93XCIgKOaXpzpcInBhZ2VzaG93XCIpIOOBq+WvvuW/nFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGV2ZW50IHtKUXVlcnkuRXZlbnR9IFtpbl0g44Kk44OZ44Oz44OI44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgICAgICogQHBhcmFtIGRhdGEgIHtTaG93RXZlbnREYXRhfSAgICAgW2luXSDku5jliqDmg4XloLFcclxuICAgICAgICAgKi9cclxuICAgICAgICBvblBhZ2VTaG93KGV2ZW50OiBKUXVlcnkuRXZlbnQsIGRhdGE/OiBGcmFtZXdvcmsuU2hvd0V2ZW50RGF0YSk6IHZvaWQge1xyXG4gICAgICAgICAgICAvLyBPdmVycmlkZVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogalFNIGV2ZW50OiBcInBhZ2ViZWZvcmVoaWRlXCIg44Gr5a++5b+cXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gZXZlbnQge0pRdWVyeS5FdmVudH0gW2luXSDjgqTjg5njg7Pjg4jjgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAgICAgKiBAcGFyYW0gZGF0YSAge0hpZGVFdmVudERhdGF9ICAgICBbaW5dIOS7mOWKoOaDheWgsVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9uUGFnZUJlZm9yZUhpZGUoZXZlbnQ6IEpRdWVyeS5FdmVudCwgZGF0YT86IEZyYW1ld29yay5IaWRlRXZlbnREYXRhKTogdm9pZCB7XHJcbiAgICAgICAgICAgIC8vIE92ZXJyaWRlXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBqUU0gZXZlbnQ6IFwicGFnZWNvbnRhaW5lcmhpZGVcIiAo5penOlwicGFnZWhpZGVcIikg44Gr5a++5b+cXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gZXZlbnQge0pRdWVyeS5FdmVudH0gW2luXSDjgqTjg5njg7Pjg4jjgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAgICAgKiBAcGFyYW0gZGF0YSAge0hpZGVFdmVudERhdGF9ICAgICBbaW5dIOS7mOWKoOaDheWgsVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG9uUGFnZUhpZGUoZXZlbnQ6IEpRdWVyeS5FdmVudCwgZGF0YT86IEZyYW1ld29yay5IaWRlRXZlbnREYXRhKTogdm9pZCB7XHJcbiAgICAgICAgICAgIC8vIE92ZXJyaWRlXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBqUU0gZXZlbnQ6IFwicGFnZXJlbW92ZVwiIOOBq+WvvuW/nFxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGV2ZW50IHtKUXVlcnkuRXZlbnR9IFtpbl0g44Kk44OZ44Oz44OI44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb25QYWdlUmVtb3ZlKGV2ZW50OiBKUXVlcnkuRXZlbnQpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5yZW1vdmUoKTtcclxuICAgICAgICAgICAgdGhpcy5lbCAgPSBudWxsO1xyXG4gICAgICAgICAgICB0aGlzLiRlbCA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8qIHRzbGludDpkaXNhYmxlOm1heC1saW5lLWxlbmd0aCAqL1xyXG5cclxubmFtZXNwYWNlIENEUC5VSSB7XHJcblxyXG4gICAgaW1wb3J0IE1vZGVsID0gQ0RQLkZyYW1ld29yay5Nb2RlbDtcclxuXHJcbiAgICBjb25zdCBUQUcgPSBcIltDRFAuVUkuUGFnZUxpc3RWaWV3XSBcIjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBpbnRlcmZhY2UgUGFnZUxpc3RWaWV3Q29uc3RydWN0T3B0aW9uc1xyXG4gICAgICogQGJyaWVmIFBhZ2VMaXN0VmlldyDjgbjjga7liJ3mnJ/ljJbmg4XloLHjgpLmoLzntI3jgZnjgovjgqTjg7Pjgr/jg7zjg5XjgqfjgqTjgrnjgq/jg6njgrlcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBQYWdlTGlzdFZpZXdDb25zdHJ1Y3RPcHRpb25zPFRNb2RlbCBleHRlbmRzIE1vZGVsID0gTW9kZWw+IGV4dGVuZHMgTGlzdFZpZXdPcHRpb25zLCBQYWdlVmlld0NvbnN0cnVjdE9wdGlvbnM8VE1vZGVsPiB7XHJcbiAgICAgICAgYXV0b0Rlc3RvcnlFbGVtZW50PzogYm9vbGVhbjsgICAgICAgIC8vITwg44Oa44O844K46YG356e75YmN44GrIExpc3QgRWxlbWVudCDjgpLnoLTmo4TjgZnjgovloLTlkIjjga8gdHJ1ZSDjgpLmjIflrppcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBjbGFzcyBQYWdlTGlzdFZpZXdcclxuICAgICAqIEBicmllZiDku67mg7Pjg6rjgrnjg4jjg5Pjg6Xjg7zmqZ/og73jgpLmjIHjgaQgUGFnZVZpZXcg44Kv44Op44K5XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBjbGFzcyBQYWdlTGlzdFZpZXc8VE1vZGVsIGV4dGVuZHMgTW9kZWwgPSBNb2RlbD4gZXh0ZW5kcyBQYWdlVmlldzxUTW9kZWw+IGltcGxlbWVudHMgSUxpc3RWaWV3IHtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBfc2Nyb2xsTWdyOiBTY3JvbGxNYW5hZ2VyID0gbnVsbDsgICAgLy8hPCBzY3JvbGwg44Kz44Ki44Ot44K444OD44KvXHJcbiAgICAgICAgcHJpdmF0ZSBfbmVlZFJlYnVpbGQ6IGJvb2xlYW4gPSBmYWxzZTsgICAgICAgLy8hPCDjg5rjg7zjgrjooajnpLrmmYLjgasgcmVidWlsZCgpIOOCkuOCs+ODvOODq+OBmeOCi+OBn+OCgeOBruWGhemDqOWkieaVsFxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBjb25zdHJ1Y3RvclxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHVybCAgICAge1N0cmluZ30gICAgICAgICAgICAgICAgICAgICAgIFtpbl0gcGFnZSB0ZW1wbGF0ZSDjgavkvb/nlKjjgZnjgosgVVJMXHJcbiAgICAgICAgICogQHBhcmFtIGlkICAgICAge1N0cmluZ30gICAgICAgICAgICAgICAgICAgICAgIFtpbl0gcGFnZSDjgavmjK/jgonjgozjgZ8gSURcclxuICAgICAgICAgKiBAcGFyYW0gb3B0aW9ucyB7UGFnZUxpc3RWaWV3Q29uc3RydWN0T3B0aW9uc30gW2luXSDjgqrjg5fjgrfjg6fjg7NcclxuICAgICAgICAgKi9cclxuICAgICAgICBjb25zdHJ1Y3Rvcih1cmw6IHN0cmluZywgaWQ6IHN0cmluZywgb3B0aW9ucz86IFBhZ2VMaXN0Vmlld0NvbnN0cnVjdE9wdGlvbnM8VE1vZGVsPikge1xyXG4gICAgICAgICAgICBzdXBlcih1cmwsIGlkLCAkLmV4dGVuZCh7fSwge1xyXG4gICAgICAgICAgICAgICAgYXV0b0Rlc3RvcnlFbGVtZW50OiBmYWxzZSxcclxuICAgICAgICAgICAgfSwgb3B0aW9ucykpO1xyXG4gICAgICAgICAgICB0aGlzLl9zY3JvbGxNZ3IgPSBuZXcgU2Nyb2xsTWFuYWdlcihvcHRpb25zKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISByZWJ1aWxkKCkg44Gu44K544Kx44K444Ol44O844Oq44Oz44KwXHJcbiAgICAgICAgcHVibGljIHJlc2VydmVSZWJ1aWxkKCk6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLl9uZWVkUmVidWlsZCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIE92ZXJyaWRlOiBQYWdlVmlld1xyXG5cclxuICAgICAgICAvLyEgT3JpZW50YXRpb24g44Gu5aSJ5pu05qSc55+lXHJcbiAgICAgICAgb25PcmllbnRhdGlvbkNoYW5nZWQobmV3T3JpZW50YXRpb246IEZyYW1ld29yay5PcmllbnRhdGlvbik6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLl9zY3JvbGxNZ3Iuc2V0QmFzZUhlaWdodCh0aGlzLmdldFBhZ2VCYXNlSGVpZ2h0KCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOODmuODvOOCuOmBt+enu+ebtOWJjeOCpOODmeODs+ODiOWHpueQhlxyXG4gICAgICAgIG9uQmVmb3JlUm91dGVDaGFuZ2UoKTogSVByb21pc2VCYXNlPGFueT4ge1xyXG4gICAgICAgICAgICBpZiAoKDxQYWdlTGlzdFZpZXdDb25zdHJ1Y3RPcHRpb25zPFRNb2RlbD4+dGhpcy5fcGFnZU9wdGlvbnMpLmF1dG9EZXN0b3J5RWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fc2Nyb2xsTWdyLmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gc3VwZXIub25CZWZvcmVSb3V0ZUNoYW5nZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIGpRTSBldmVudDogXCJwYWdlYmVmb3Jlc2hvd1wiIOOBq+WvvuW/nFxyXG4gICAgICAgIG9uUGFnZUJlZm9yZVNob3coZXZlbnQ6IEpRdWVyeS5FdmVudCwgZGF0YT86IEZyYW1ld29yay5TaG93RXZlbnREYXRhKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHN1cGVyLm9uUGFnZUJlZm9yZVNob3coZXZlbnQsIGRhdGEpO1xyXG4gICAgICAgICAgICB0aGlzLl9zY3JvbGxNZ3IuaW5pdGlhbGl6ZSh0aGlzLiRwYWdlLCB0aGlzLmdldFBhZ2VCYXNlSGVpZ2h0KCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIGpRTSBldmVudDogXCJwYWdlY29udGFpbmVyc2hvd1wiICjml6c6XCJwYWdlc2hvd1wiKSDjgavlr77lv5xcclxuICAgICAgICBvblBhZ2VTaG93KGV2ZW50OiBKUXVlcnkuRXZlbnQsIGRhdGE/OiBGcmFtZXdvcmsuU2hvd0V2ZW50RGF0YSk6IHZvaWQge1xyXG4gICAgICAgICAgICBzdXBlci5vblBhZ2VTaG93KGV2ZW50LCBkYXRhKTtcclxuICAgICAgICAgICAgdGhpcy5fc2Nyb2xsTWdyLnNldEJhc2VIZWlnaHQodGhpcy5nZXRQYWdlQmFzZUhlaWdodCgpKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX25lZWRSZWJ1aWxkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlYnVpbGQoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX25lZWRSZWJ1aWxkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISBqUU0gZXZlbnQ6IFwicGFnZXJlbW92ZVwiIOOBq+WvvuW/nFxyXG4gICAgICAgIG9uUGFnZVJlbW92ZShldmVudDogSlF1ZXJ5LkV2ZW50KTogdm9pZCB7XHJcbiAgICAgICAgICAgIHN1cGVyLm9uUGFnZVJlbW92ZShldmVudCk7XHJcbiAgICAgICAgICAgIHRoaXMucmVsZWFzZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBJbXBsZW1lbnRzOiBJTGlzdFZpZXcgUHJvZmlsZSDnrqHnkIZcclxuXHJcbiAgICAgICAgLy8hIOWIneacn+WMlua4iOOBv+OBi+WIpOWumlxyXG4gICAgICAgIGlzSW5pdGlhbGl6ZWQoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zY3JvbGxNZ3IuaXNJbml0aWFsaXplZCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOODl+ODreODkeODhuOCo+OCkuaMh+WumuOBl+OBpuOAgUxpc3RJdGVtIOOCkueuoeeQhlxyXG4gICAgICAgIGFkZEl0ZW0oXHJcbiAgICAgICAgICAgIGhlaWdodDogbnVtYmVyLFxyXG4gICAgICAgICAgICBpbml0aWFsaXplcjogbmV3IChvcHRpb25zPzogYW55KSA9PiBCYXNlTGlzdEl0ZW1WaWV3LFxyXG4gICAgICAgICAgICBpbmZvOiBhbnksXHJcbiAgICAgICAgICAgIGluc2VydFRvPzogbnVtYmVyXHJcbiAgICAgICAgICAgICk6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLl9hZGRMaW5lKG5ldyBMaW5lUHJvZmlsZSh0aGlzLl9zY3JvbGxNZ3IsIE1hdGguZmxvb3IoaGVpZ2h0KSwgaW5pdGlhbGl6ZXIsIGluZm8pLCBpbnNlcnRUbyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg5oyH5a6a44GX44GfIEl0ZW0g44KS5YmK6ZmkXHJcbiAgICAgICAgcmVtb3ZlSXRlbShpbmRleDogbnVtYmVyLCBzaXplPzogbnVtYmVyLCBkZWxheT86IG51bWJlcik6IHZvaWQ7XHJcbiAgICAgICAgcmVtb3ZlSXRlbShpbmRleDogbnVtYmVyW10sIGRlbGF5PzogbnVtYmVyKTogdm9pZDtcclxuICAgICAgICByZW1vdmVJdGVtKGluZGV4OiBhbnksIGFyZzI/OiBudW1iZXIsIGFyZzM/OiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5fc2Nyb2xsTWdyLnJlbW92ZUl0ZW0oaW5kZXgsIGFyZzIsIGFyZzMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOaMh+WumuOBl+OBnyBJdGVtIOOBq+ioreWumuOBl+OBn+aDheWgseOCkuWPluW+l1xyXG4gICAgICAgIGdldEl0ZW1JbmZvKHRhcmdldDogbnVtYmVyKTogYW55O1xyXG4gICAgICAgIGdldEl0ZW1JbmZvKHRhcmdldDogSlF1ZXJ5LkV2ZW50KTogYW55O1xyXG4gICAgICAgIGdldEl0ZW1JbmZvKHRhcmdldDogYW55KTogYW55IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Njcm9sbE1nci5nZXRJdGVtSW5mbyh0YXJnZXQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOOCouOCr+ODhuOCo+ODluODmuODvOOCuOOCkuabtOaWsFxyXG4gICAgICAgIHJlZnJlc2goKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuX3Njcm9sbE1nci5yZWZyZXNoKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg5pyq44Ki44K144Kk44Oz44Oa44O844K444KS5qeL56+JXHJcbiAgICAgICAgdXBkYXRlKCk6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLl9zY3JvbGxNZ3IudXBkYXRlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg44Oa44O844K444Ki44K144Kk44Oz44KS5YaN5qeL5oiQXHJcbiAgICAgICAgcmVidWlsZCgpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5fc2Nyb2xsTWdyLnJlYnVpbGQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDnrqHovYTjg4fjg7zjgr/jgpLnoLTmo4RcclxuICAgICAgICByZWxlYXNlKCk6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLl9zY3JvbGxNZ3IucmVsZWFzZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBJbXBsZW1lbnRzOiBJTGlzdFZpZXcgUHJvZmlsZSBCYWNrdXAgLyBSZXN0b3JlXHJcblxyXG4gICAgICAgIC8vISDlhoXpg6jjg4fjg7zjgr/jgpLjg5Djg4Pjgq/jgqLjg4Pjg5dcclxuICAgICAgICBiYWNrdXAoa2V5OiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Njcm9sbE1nci5iYWNrdXAoa2V5KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDlhoXpg6jjg4fjg7zjgr/jgpLjg6rjgrnjg4jjgqJcclxuICAgICAgICByZXN0b3JlKGtleTogc3RyaW5nLCByZWJ1aWxkOiBib29sZWFuID0gdHJ1ZSk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICBjb25zdCByZXR2YWwgPSB0aGlzLl9zY3JvbGxNZ3IucmVzdG9yZShrZXksIHJlYnVpbGQpO1xyXG4gICAgICAgICAgICBpZiAocmV0dmFsICYmICFyZWJ1aWxkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlc2VydmVSZWJ1aWxkKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHJldHZhbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDjg5Djg4Pjgq/jgqLjg4Pjg5fjg4fjg7zjgr/jga7mnInnhKFcclxuICAgICAgICBoYXNCYWNrdXAoa2V5OiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Njcm9sbE1nci5oYXNCYWNrdXAoa2V5KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDjg5Djg4Pjgq/jgqLjg4Pjg5fjg4fjg7zjgr/jga7noLTmo4RcclxuICAgICAgICBjbGVhckJhY2t1cChrZXk/OiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Njcm9sbE1nci5jbGVhckJhY2t1cChrZXkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOODkOODg+OCr+OCouODg+ODl+ODh+ODvOOCv+OBq+OCouOCr+OCu+OCuVxyXG4gICAgICAgIGdldCBiYWNrdXBEYXRhKCk6IGFueSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zY3JvbGxNZ3IuYmFja3VwRGF0YTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gSW1wbGVtZW50czogSUxpc3RWaWV3IFNjcm9sbFxyXG5cclxuICAgICAgICAvLyEg44K544Kv44Ot44O844Or44Kk44OZ44Oz44OI44OP44Oz44OJ44Op6Kit5a6aL+ino+mZpFxyXG4gICAgICAgIHNldFNjcm9sbEhhbmRsZXIoaGFuZGxlcjogKGV2ZW50OiBKUXVlcnkuRXZlbnQpID0+IHZvaWQsIG9uOiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuX3Njcm9sbE1nci5zZXRTY3JvbGxIYW5kbGVyKGhhbmRsZXIsIG9uKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDjgrnjgq/jg63jg7zjg6vntYLkuobjgqTjg5njg7Pjg4jjg4/jg7Pjg4njg6noqK3lrpov6Kej6ZmkXHJcbiAgICAgICAgc2V0U2Nyb2xsU3RvcEhhbmRsZXIoaGFuZGxlcjogKGV2ZW50OiBKUXVlcnkuRXZlbnQpID0+IHZvaWQsIG9uOiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuX3Njcm9sbE1nci5zZXRTY3JvbGxTdG9wSGFuZGxlcihoYW5kbGVyLCBvbik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg44K544Kv44Ot44O844Or5L2N572u44KS5Y+W5b6XXHJcbiAgICAgICAgZ2V0U2Nyb2xsUG9zKCk6IG51bWJlciB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zY3JvbGxNZ3IuZ2V0U2Nyb2xsUG9zKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg44K544Kv44Ot44O844Or5L2N572u44Gu5pyA5aSn5YCk44KS5Y+W5b6XXHJcbiAgICAgICAgZ2V0U2Nyb2xsUG9zTWF4KCk6IG51bWJlciB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zY3JvbGxNZ3IuZ2V0U2Nyb2xsUG9zTWF4KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg44K544Kv44Ot44O844Or5L2N572u44KS5oyH5a6aXHJcbiAgICAgICAgc2Nyb2xsVG8ocG9zOiBudW1iZXIsIGFuaW1hdGU/OiBib29sZWFuLCB0aW1lPzogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuX3Njcm9sbE1nci5zY3JvbGxUbyhwb3MsIGFuaW1hdGUsIHRpbWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOaMh+WumuOBleOCjOOBnyBMaXN0SXRlbVZpZXcg44Gu6KGo56S644KS5L+d6Ki8XHJcbiAgICAgICAgZW5zdXJlVmlzaWJsZShpbmRleDogbnVtYmVyLCBvcHRpb25zPzogRW5zdXJlVmlzaWJsZU9wdGlvbnMpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5fc2Nyb2xsTWdyLmVuc3VyZVZpc2libGUoaW5kZXgsIG9wdGlvbnMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBJbXBsZW1lbnRzOiBJTGlzdFZpZXcgUHJvcGVydGllc1xyXG5cclxuICAgICAgICAvLyEgY29yZSBmcmFtZXdvcmsgYWNjZXNzXHJcbiAgICAgICAgZ2V0IGNvcmUoKTogSUxpc3RWaWV3RnJhbWV3b3JrIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Njcm9sbE1ncjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gSW1wbGVtZW50czogSUxpc3RWaWV3IEludGVybmFsIEkvRlxyXG5cclxuICAgICAgICAvLyEg55m76YyyIGZyYW1ld29yayDjgYzkvb/nlKjjgZnjgotcclxuICAgICAgICBfYWRkTGluZShfbGluZTogYW55LCBpbnNlcnRUbz86IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLl9zY3JvbGxNZ3IuX2FkZExpbmUoX2xpbmUsIGluc2VydFRvKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gcHJpdmF0ZSBtZXRob2Q6XHJcblxyXG4gICAgICAgIC8vISDjg5rjg7zjgrjjga7ln7rmupblgKTjgpLlj5blvpdcclxuICAgICAgICBwcml2YXRlIGdldFBhZ2VCYXNlSGVpZ2h0KCk6IG51bWJlciB7XHJcbiAgICAgICAgICAgIHJldHVybiAkKHdpbmRvdykuaGVpZ2h0KCkgLSBwYXJzZUludCh0aGlzLiRwYWdlLmNzcyhcInBhZGRpbmctdG9wXCIpLCAxMCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIm5hbWVzcGFjZSBDRFAuVUkge1xyXG5cclxuICAgIGltcG9ydCBNb2RlbCA9IENEUC5GcmFtZXdvcmsuTW9kZWw7XHJcblxyXG4gICAgY29uc3QgVEFHID0gXCJbQ0RQLlVJLlBhZ2VFeHBhbmRhYmxlTGlzdFZpZXddIFwiO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGNsYXNzIFBhZ2VFeHBhbmRhYmxlTGlzdFZpZXdcclxuICAgICAqIEBicmllZiDplovplonjg6rjgrnjg4jjg5Pjg6Xjg7zmqZ/og73jgpLmjIHjgaQgUGFnZVZpZXcg44Kv44Op44K5XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBjbGFzcyBQYWdlRXhwYW5kYWJsZUxpc3RWaWV3PFRNb2RlbCBleHRlbmRzIE1vZGVsID0gTW9kZWw+IGV4dGVuZHMgUGFnZUxpc3RWaWV3PFRNb2RlbD4gaW1wbGVtZW50cyBJRXhwYW5kYWJsZUxpc3RWaWV3IHtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBfZXhwYW5kTWFuYWdlcjogRXhwYW5kTWFuYWdlciA9IG51bGw7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIGNvbnN0cnVjdG9yXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gdXJsICAgICB7U3RyaW5nfSAgICAgICAgICAgICAgICAgICAgICAgW2luXSBwYWdlIHRlbXBsYXRlIOOBq+S9v+eUqOOBmeOCiyBVUkxcclxuICAgICAgICAgKiBAcGFyYW0gaWQgICAgICB7U3RyaW5nfSAgICAgICAgICAgICAgICAgICAgICAgW2luXSBwYWdlIOOBq+aMr+OCieOCjOOBnyBJRFxyXG4gICAgICAgICAqIEBwYXJhbSBvcHRpb25zIHtQYWdlTGlzdFZpZXdDb25zdHJ1Y3RPcHRpb25zfSBbaW5dIOOCquODl+OCt+ODp+ODs1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGNvbnN0cnVjdG9yKHVybDogc3RyaW5nLCBpZDogc3RyaW5nLCBvcHRpb25zPzogUGFnZUxpc3RWaWV3Q29uc3RydWN0T3B0aW9uczxUTW9kZWw+KSB7XHJcbiAgICAgICAgICAgIHN1cGVyKHVybCwgaWQsIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICB0aGlzLl9leHBhbmRNYW5hZ2VyID0gbmV3IEV4cGFuZE1hbmFnZXIodGhpcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIEltcGxlbWVudHM6IElFeHBhbmRhYmxlTGlzdFZpZXdcclxuXHJcbiAgICAgICAgLy8hIOaWsOimjyBHcm91cFByb2ZpbGUg44KS5L2c5oiQXHJcbiAgICAgICAgbmV3R3JvdXAoaWQ/OiBzdHJpbmcpOiBHcm91cFByb2ZpbGUge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZXhwYW5kTWFuYWdlci5uZXdHcm91cChpZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg55m76Yyy5riI44G/IEdyb3VwIOOCkuWPluW+l1xyXG4gICAgICAgIGdldEdyb3VwKGlkOiBzdHJpbmcpOiBHcm91cFByb2ZpbGUge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZXhwYW5kTWFuYWdlci5nZXRHcm91cChpZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg56ysMemajuWxpOOBriBHcm91cCDnmbvpjLJcclxuICAgICAgICByZWdpc3RlclRvcEdyb3VwKHRvcEdyb3VwOiBHcm91cFByb2ZpbGUpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5fZXhwYW5kTWFuYWdlci5yZWdpc3RlclRvcEdyb3VwKHRvcEdyb3VwKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISDnrKwx6ZqO5bGk44GuIEdyb3VwIOOCkuWPluW+l1xyXG4gICAgICAgIGdldFRvcEdyb3VwcygpOiBHcm91cFByb2ZpbGVbXSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9leHBhbmRNYW5hZ2VyLmdldFRvcEdyb3VwcygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOOBmeOBueOBpuOBruOCsOODq+ODvOODl+OCkuWxlemWiyAoMemajuWxpClcclxuICAgICAgICBleHBhbmRBbGwoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuX2V4cGFuZE1hbmFnZXIuZXhwYW5kQWxsKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg44GZ44G544Gm44Gu44Kw44Or44O844OX44KS5Y+O5p2fICgx6ZqO5bGkKVxyXG4gICAgICAgIGNvbGxhcHNlQWxsKGRlbGF5PzogbnVtYmVyKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuX2V4cGFuZE1hbmFnZXIuY29sbGFwc2VBbGwoZGVsYXkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOWxlemWi+S4reOBi+WIpOWumlxyXG4gICAgICAgIGlzRXhwYW5kaW5nKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZXhwYW5kTWFuYWdlci5pc0V4cGFuZGluZygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOWPjuadn+S4reOBi+WIpOWumlxyXG4gICAgICAgIGlzQ29sbGFwc2luZygpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2V4cGFuZE1hbmFnZXIuaXNDb2xsYXBzaW5nKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg6ZaL6ZaJ5Lit44GL5Yik5a6aXHJcbiAgICAgICAgaXNTd2l0Y2hpbmcoKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9leHBhbmRNYW5hZ2VyLmlzU3dpdGNoaW5nKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEgbGF5b3V0IGtleSDjgpLlj5blvpdcclxuICAgICAgICBnZXQgbGF5b3V0S2V5KCk6IHN0cmluZyB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9leHBhbmRNYW5hZ2VyLmxheW91dEtleTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vISBsYXlvdXQga2V5IOOCkuioreWumlxyXG4gICAgICAgIHNldCBsYXlvdXRLZXkoa2V5OiBzdHJpbmcpIHtcclxuICAgICAgICAgICAgdGhpcy5fZXhwYW5kTWFuYWdlci5sYXlvdXRLZXkgPSBrZXk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIE92ZXJyaWRlOiBQYWdlTGlzdFZpZXdcclxuXHJcbiAgICAgICAgLy8hIOODh+ODvOOCv+OCkuegtOajhFxyXG4gICAgICAgIHJlbGVhc2UoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHN1cGVyLnJlbGVhc2UoKTtcclxuICAgICAgICAgICAgdGhpcy5fZXhwYW5kTWFuYWdlci5yZWxlYXNlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyEg5YaF6YOo44OH44O844K/44KS44OQ44OD44Kv44Ki44OD44OXXHJcbiAgICAgICAgYmFja3VwKGtleTogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9leHBhbmRNYW5hZ2VyLmJhY2t1cChrZXkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8hIOWGhemDqOODh+ODvOOCv+OCkuODquOCueODiOOColxyXG4gICAgICAgIHJlc3RvcmUoa2V5OiBzdHJpbmcsIHJlYnVpbGQ6IGJvb2xlYW4gPSB0cnVlKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9leHBhbmRNYW5hZ2VyLnJlc3RvcmUoa2V5LCByZWJ1aWxkKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLyoqXHJcbiAqIGpRdWVyeSBwbHVnaW4gZGVmaW5pdGlvblxyXG4gKi9cclxuaW50ZXJmYWNlIEpRdWVyeSB7XHJcbiAgICByaXBwbGUob3B0aW9ucz86IENEUC5VSS5Eb21FeHRlbnNpb25PcHRpb25zKTogSlF1ZXJ5O1xyXG59XHJcblxyXG5uYW1lc3BhY2UgQ0RQLlVJLkV4dGVuc2lvbiB7XHJcblxyXG4gICAgaW1wb3J0IEZyYW1ld29yayA9IENEUC5GcmFtZXdvcms7XHJcblxyXG4gICAgLy8galF1ZXJ5IHBsdWdpblxyXG4gICAgJC5mbi5yaXBwbGUgPSBmdW5jdGlvbiAob3B0aW9ucz86IERvbUV4dGVuc2lvbk9wdGlvbnMpOiBKUXVlcnkge1xyXG4gICAgICAgIGNvbnN0ICRlbCA9ICQodGhpcyk7XHJcbiAgICAgICAgaWYgKCRlbC5sZW5ndGggPD0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJGVsO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gJGVsLm9uKEZyYW1ld29yay5QYXRjaC5zX3ZjbGlja0V2ZW50LCBmdW5jdGlvbiAoZXZlbnQ6IEpRdWVyeS5FdmVudCkge1xyXG4gICAgICAgICAgICBjb25zdCBzdXJmYWNlID0gJCh0aGlzKTtcclxuXHJcbiAgICAgICAgICAgIC8vIGNyZWF0ZSBzdXJmYWNlIGlmIGl0IGRvZXNuJ3QgZXhpc3RcclxuICAgICAgICAgICAgaWYgKHN1cmZhY2UuZmluZChcIi51aS1yaXBwbGUtaW5rXCIpLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgc3VyZmFjZS5wcmVwZW5kKFwiPGRpdiBjbGFzcz0ndWktcmlwcGxlLWluayc+PC9kaXY+XCIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsZXQgaW5rID0gc3VyZmFjZS5maW5kKFwiLnVpLXJpcHBsZS1pbmtcIik7XHJcblxyXG4gICAgICAgICAgICAvLyBzdG9wIHRoZSBwcmV2aW91cyBhbmltYXRpb25cclxuICAgICAgICAgICAgaW5rLnJlbW92ZUNsYXNzKFwidWktcmlwcGxlLWFuaW1hdGVcIik7XHJcblxyXG4gICAgICAgICAgICAvLyBpbmsgc2l6ZTpcclxuICAgICAgICAgICAgaWYgKCFpbmsuaGVpZ2h0KCkgJiYgIWluay53aWR0aCgpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkID0gTWF0aC5tYXgoc3VyZmFjZS5vdXRlcldpZHRoKCksIHN1cmZhY2Uub3V0ZXJIZWlnaHQoKSk7XHJcbiAgICAgICAgICAgICAgICBpbmsuY3NzKHsgaGVpZ2h0OiBkLCB3aWR0aDogZCB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgeCA9IGV2ZW50LnBhZ2VYIC0gc3VyZmFjZS5vZmZzZXQoKS5sZWZ0IC0gKGluay53aWR0aCgpIC8gMik7XHJcbiAgICAgICAgICAgIGNvbnN0IHkgPSBldmVudC5wYWdlWSAtIHN1cmZhY2Uub2Zmc2V0KCkudG9wIC0gKGluay5oZWlnaHQoKSAvIDIpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgcmlwcGxlQ29sb3IgPSBzdXJmYWNlLmRhdGEoXCJyaXBwbGUtY29sb3JcIik7XHJcblxyXG4gICAgICAgICAgICAvLyBhbmltYXRpb24gZW5kIGhhbmRsZXJcclxuICAgICAgICAgICAgY29uc3QgQU5JTUFUSU9OX0VORF9FVkVOVCA9IFwiYW5pbWF0aW9uZW5kIHdlYmtpdEFuaW1hdGlvbkVuZFwiO1xyXG4gICAgICAgICAgICBpbmsub24oQU5JTUFUSU9OX0VORF9FVkVOVCwgZnVuY3Rpb24gKGV2OiBKUXVlcnkuRXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIGluay5vZmYoKTtcclxuICAgICAgICAgICAgICAgIGluay5yZW1vdmVDbGFzcyhcInVpLXJpcHBsZS1hbmltYXRlXCIpO1xyXG4gICAgICAgICAgICAgICAgaW5rID0gbnVsbDtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyBzZXQgdGhlIHBvc2l0aW9uIGFuZCBhZGQgY2xhc3MgLmFuaW1hdGVcclxuICAgICAgICAgICAgaW5rLmNzcyh7XHJcbiAgICAgICAgICAgICAgICB0b3A6IHkgKyBcInB4XCIsXHJcbiAgICAgICAgICAgICAgICBsZWZ0OiB4ICsgXCJweFwiLFxyXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogcmlwcGxlQ29sb3JcclxuICAgICAgICAgICAgfSkuYWRkQ2xhc3MoXCJ1aS1yaXBwbGUtYW5pbWF0ZVwiKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBNYXRlcmlhbCBEZXNpZ24gUmlwcGxlIOaLoeW8tVxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7alF1ZXJ5fSAgICAgICAgICAgICAgJHVpICAgICAgIFtpbl0g5qSc57Si5a++6LGh44GuIGpRdWVyeSDjgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAqIEBwYXJhbSB7RG9tRXh0ZW5zaW9uT3B0aW9uc30gW29wdGlvbnNdIFtpbl0g44Kq44OX44K344On44OzXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGFwcGx5RG9tRXh0ZW5zaW9uKCR1aTogSlF1ZXJ5LCBvcHRpb25zPzogRG9tRXh0ZW5zaW9uT3B0aW9ucyk6IEpRdWVyeSB7XHJcbiAgICAgICAgY29uc3QgTk9fUklQUExFX0NMQVNTID0gW1xyXG4gICAgICAgICAgICBcIi51aS1yaXBwbGUtbm9uZVwiLFxyXG4gICAgICAgICAgICBcIi51aS1mbGlwc3dpdGNoLW9uXCIsXHJcbiAgICAgICAgICAgIFwiLnVpLXNsaWRlci1oYW5kbGVcIixcclxuICAgICAgICAgICAgXCIudWktaW5wdXQtY2xlYXJcIixcclxuICAgICAgICBdO1xyXG5cclxuICAgICAgICBsZXQgc2VsZWN0b3IgPSBcIi51aS1idG5cIjtcclxuICAgICAgICBpZiAoJHVpLmhhc0NsYXNzKFwidWktcGFnZVwiKSkge1xyXG4gICAgICAgICAgICBzZWxlY3RvciA9IFwiLnVpLWNvbnRlbnQgLnVpLWJ0blwiOyAvLyBoZWFkZXIg44Gv6Ieq5YuVIHJpcHBsZSDljJblr77osaHlpJZcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICR1aS5maW5kKHNlbGVjdG9yKVxyXG4gICAgICAgICAgICAuZmlsdGVyKChpbmRleCwgZWxlbSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgJGVsZW0gPSAkKGVsZW0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKCRlbGVtLmlzKE5PX1JJUFBMRV9DTEFTUy5qb2luKFwiLFwiKSkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuYWRkQ2xhc3MoXCJ1aS1yaXBwbGVcIik7XHJcblxyXG4gICAgICAgIC8vIHJpcHBsaWZ5XHJcbi8vICAgICAgICAkdWkuZmluZChcIi51aS1yaXBwbGVcIikucmlwcGxlKG9wdGlvbnMpO1xyXG4gICAgICAgICR1aS5maW5kKFwiLnVpLXJpcHBsZVwiKVxyXG4gICAgICAgICAgICAuZWFjaCgoaW5kZXg6IG51bWJlciwgZWxlbTogRWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgJChlbGVtKS5yaXBwbGUob3B0aW9ucyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiAkdWk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g55m76YyyXHJcbiAgICBFeHRlbnNpb25NYW5hZ2VyLnJlZ2lzdGVyRG9tRXh0ZW5zaW9uKGFwcGx5RG9tRXh0ZW5zaW9uKTtcclxufVxyXG4iLCIvKipcclxuICogalF1ZXJ5IHBsdWdpbiBkZWZpbml0aW9uXHJcbiAqL1xyXG5pbnRlcmZhY2UgSlF1ZXJ5IHtcclxuICAgIHNwaW5uZXIob3B0aW9ucz86IENEUC5VSS5Eb21FeHRlbnNpb25PcHRpb25zIHwgXCJyZWZyZXNoXCIpOiBKUXVlcnk7XHJcbn1cclxuXHJcbm5hbWVzcGFjZSBDRFAuVUkuRXh0ZW5zaW9uIHtcclxuXHJcbiAgICBpbXBvcnQgVGVtcGxhdGUgPSBDRFAuVG9vbHMuVGVtcGxhdGU7XHJcbiAgICBpbXBvcnQgSlNUICAgICAgPSBDRFAuVG9vbHMuSlNUO1xyXG5cclxuICAgIGxldCBfdGVtcGxhdGU6IEpTVDtcclxuXHJcbiAgICAvLyBqUXVlcnkgcGx1Z2luXHJcbiAgICAkLmZuLnNwaW5uZXIgPSBmdW5jdGlvbiAob3B0aW9ucz86IERvbUV4dGVuc2lvbk9wdGlvbnMgfCBcInJlZnJlc2hcIikge1xyXG4gICAgICAgIGlmIChcInN0cmluZ1wiID09PSB0eXBlb2Ygb3B0aW9ucykge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVmcmVzaCgkKHRoaXMpKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gc3Bpbm5lcmlmeSgkKHRoaXMpLCBvcHRpb25zKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGZ1bmN0aW9uIHNwaW5uZXJpZnkoJHRhcmdldDogSlF1ZXJ5LCBvcHRpb25zPzogRG9tRXh0ZW5zaW9uT3B0aW9ucyk6IEpRdWVyeSB7XHJcbiAgICAgICAgaWYgKCR0YXJnZXQubGVuZ3RoIDw9IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuICR0YXJnZXQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIV90ZW1wbGF0ZSkge1xyXG4gICAgICAgICAgICBfdGVtcGxhdGUgPSBUZW1wbGF0ZS5nZXRKU1QoYFxyXG4gICAgICAgICAgICAgICAgPHNjcmlwdCB0eXBlPVwidGV4dC90ZW1wbGF0ZVwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwidWktc3Bpbm5lci1iYXNlXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwidWktc3Bpbm5lci1pbm5lclwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJ1aS1zcGlubmVyLWlubmVyLWdhcFwiIHt7Ym9yZGVyVG9wfX0+PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJ1aS1zcGlubmVyLWlubmVyLWxlZnRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInVpLXNwaW5uZXItaW5uZXItaGFsZi1jaXJjbGVcIiB7e2JvcmRlcn19Pjwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwidWktc3Bpbm5lci1pbm5lci1yaWdodFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwidWktc3Bpbm5lci1pbm5lci1oYWxmLWNpcmNsZVwiIHt7Ym9yZGVyfX0+PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPC9zY3JpcHQ+XHJcbiAgICAgICAgICAgIGApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgbWFrZVRlbXBsYXRlUGFyYW0gPSAoY2xyOiBzdHJpbmcpOiBvYmplY3QgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgYm9yZGVyVG9wOiBcInN0eWxlPWJvcmRlci10b3AtY29sb3I6XCIgKyBjbHIgKyBcIjtcIixcclxuICAgICAgICAgICAgICAgIGJvcmRlcjogXCJzdHlsZT1ib3JkZXItY29sb3I6XCIgKyBjbHIgKyBcIjtcIixcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBjb25zdCBjb2xvciA9ICR0YXJnZXQuZGF0YShcInNwaW5uZXItY29sb3JcIik7XHJcbiAgICAgICAgbGV0IHBhcmFtID0gbnVsbDtcclxuICAgICAgICBpZiAoY29sb3IpIHtcclxuICAgICAgICAgICAgJHRhcmdldC5jc3MoeyBcImJhY2tncm91bmQtY29sb3JcIjogY29sb3IgfSk7XHJcbiAgICAgICAgICAgIHBhcmFtID0gbWFrZVRlbXBsYXRlUGFyYW0oY29sb3IpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAkdGFyZ2V0LmFwcGVuZChfdGVtcGxhdGUocGFyYW0pKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHJlZnJlc2goJHRhcmdldCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gaU9TIDEwLjIrIFNWRyBTTUlMIOOCouODi+ODoeODvOOCt+ODp+ODs+OBjCAy5Zue55uu5Lul6ZmN5YuV44GL44Gq44GE5ZWP6aGM44Gu5a++562WXHJcbiAgICAvLyBkYXRhOmltYWdlL3N2Zyt4bWw7PGNhY2hlIGJ1c3Qgc3RyaW5nPjtiYXNlNjQsLi4uIOOBqOOBmeOCi+OBk+OBqOOBpyBkYXRhLXVybCDjgavjgoIgY2FjaGUgYnVzdGluZyDjgYzmnInlirnjgavjgarjgotcclxuICAgIGZ1bmN0aW9uIHJlZnJlc2goJHRhcmdldDogSlF1ZXJ5KTogSlF1ZXJ5IHtcclxuICAgICAgICBjb25zdCBQUkVGSVggPSBbXCItd2Via2l0LVwiLCBcIlwiXTtcclxuXHJcbiAgICAgICAgY29uc3QgdmFsaWQgPSAocHJvcCkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gKHByb3AgJiYgXCJub25lXCIgIT09IHByb3ApO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGxldCBkYXRhVXJsOiBzdHJpbmc7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIG4gPSBQUkVGSVgubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmICghdmFsaWQoZGF0YVVybCkpIHtcclxuICAgICAgICAgICAgICAgIGRhdGFVcmwgPSAkdGFyZ2V0LmNzcyhQUkVGSVhbaV0gKyBcIm1hc2staW1hZ2VcIik7XHJcbiAgICAgICAgICAgICAgICBpZiAodmFsaWQoZGF0YVVybCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBpT1Mg44Gn44GvIHVybChkYXRhKioqKTsg5YaF44GrICdcIicg44Gv5YWl44KJ44Gq44GEXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWF0Y2ggPSBkYXRhVXJsLm1hdGNoKC8odXJsXFwoZGF0YTppbWFnZVxcL3N2Z1xcK3htbDspKFtcXHNcXFNdKik/KGJhc2U2NCxbXFxzXFxTXSpcXCkpLyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1hdGNoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFVcmwgPSBgJHttYXRjaFsxXX1idXN0PSR7RGF0ZS5ub3coKS50b1N0cmluZygzNil9OyR7bWF0Y2hbM119YDtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhVXJsID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHZhbGlkKGRhdGFVcmwpKSB7XHJcbiAgICAgICAgICAgICAgICAkdGFyZ2V0LmNzcyhQUkVGSVhbaV0gKyBcIm1hc2staW1hZ2VcIiwgZGF0YVVybCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiAkdGFyZ2V0O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTWF0ZXJpYWwgRGVzaWduIFNwaW5uZXIg5ouh5by1XHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtqUXVlcnl9ICAgICAgICAgICAgICAkdWkgICAgICAgW2luXSDmpJzntKLlr77osaHjga4galF1ZXJ5IOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICogQHBhcmFtIHtEb21FeHRlbnNpb25PcHRpb25zfSBbb3B0aW9uc10gW2luXSDjgqrjg5fjgrfjg6fjg7NcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gYXBwbHlEb21FeHRlbnNpb24oJHVpOiBKUXVlcnksIG9wdGlvbnM/OiBEb21FeHRlbnNpb25PcHRpb25zKTogSlF1ZXJ5IHtcclxuICAgICAgICAkdWkuZmluZChcIi51aS1zcGlubmVyLCAudWktaWNvbi1sb2FkaW5nXCIpXHJcbiAgICAgICAgICAgIC5lYWNoKChpbmRleDogbnVtYmVyLCBlbGVtOiBFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAkKGVsZW0pLnNwaW5uZXIob3B0aW9ucyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiAkdWk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g55m76YyyXHJcbiAgICBFeHRlbnNpb25NYW5hZ2VyLnJlZ2lzdGVyRG9tRXh0ZW5zaW9uKGFwcGx5RG9tRXh0ZW5zaW9uKTtcclxufVxyXG4iLCJuYW1lc3BhY2UgQ0RQLlVJLkV4dGVuc2lvbiB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUZXh0IElucHV0IOeUqCBGbG9hdGluZyBMYWJlbCDmi6HlvLVcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge2pRdWVyeX0gICAgICAgICAgICAgICR1aSAgICAgICBbaW5dIOaknOe0ouWvvuixoeOBriBqUXVlcnkg44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgKiBAcGFyYW0ge0RvbUV4dGVuc2lvbk9wdGlvbnN9IFtvcHRpb25zXSBbaW5dIOOCquODl+OCt+ODp+ODs1xyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBhcHBseURvbUV4dGVuc2lvbigkdWk6IEpRdWVyeSwgb3B0aW9ucz86IERvbUV4dGVuc2lvbk9wdGlvbnMpOiBKUXVlcnkge1xyXG4gICAgICAgIGNvbnN0IHVwZGF0ZSA9IChlbGVtOiBFbGVtZW50LCBmbG9hdGluZzogYm9vbGVhbikgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCAkZWxlbSA9ICQoZWxlbSk7XHJcbiAgICAgICAgICAgIGlmIChmbG9hdGluZykge1xyXG4gICAgICAgICAgICAgICAgJGVsZW0uYWRkQ2xhc3MoXCJ1aS1mbG9hdC1sYWJlbC1mbG9hdGluZ1wiKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICRlbGVtLnJlbW92ZUNsYXNzKFwidWktZmxvYXQtbGFiZWwtZmxvYXRpbmdcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBjb25zdCBmbG9hdGluZ2lmeSA9IChlbGVtOiBFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGlkID0gJChlbGVtKS5hdHRyKFwiZm9yXCIpO1xyXG4gICAgICAgICAgICBjb25zdCAkaW5wdXQgPSAkdWkuZmluZChcIiNcIiArIGlkKTtcclxuICAgICAgICAgICAgaWYgKFwic2VhcmNoXCIgPT09ICRpbnB1dC5qcW1EYXRhKFwidHlwZVwiKSkge1xyXG4gICAgICAgICAgICAgICAgJChlbGVtKS5hZGRDbGFzcyhcInVpLWZsb2F0LWxhYmVsLWhhcy1pY29uXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHVwZGF0ZShlbGVtLCAhISRpbnB1dC52YWwoKSk7XHJcbiAgICAgICAgICAgICRpbnB1dC5vbihcImtleXVwIGNoYW5nZSBpbnB1dCBmb2N1cyBibHVyIGN1dCBwYXN0ZVwiLCAoZXZlbnQ6IEpRdWVyeS5FdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdXBkYXRlKGVsZW0sICEhJChldmVudC50YXJnZXQpLnZhbCgpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJHVpLmZpbmQoXCJsYWJlbC51aS1mbG9hdC1sYWJlbCwgLnVpLWZsb2F0LWxhYmVsIGxhYmVsXCIpXHJcbiAgICAgICAgICAgIC5lYWNoKChpbmRleDogbnVtYmVyLCBlbGVtOiBFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBmbG9hdGluZ2lmeShlbGVtKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiAkdWk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g55m76YyyXHJcbiAgICBFeHRlbnNpb25NYW5hZ2VyLnJlZ2lzdGVyRG9tRXh0ZW5zaW9uKGFwcGx5RG9tRXh0ZW5zaW9uKTtcclxufVxyXG4iLCJuYW1lc3BhY2UgQ0RQLlVJLkV4dGVuc2lvbiB7XHJcblxyXG4gICAgaW1wb3J0IEZyYW1ld29yayA9IENEUC5GcmFtZXdvcms7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBqUXVlcnkgTW9iaWxlIEZsaXAgU3dpdGNoIOaLoeW8tVxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7alF1ZXJ5fSAgICAgICAgICAgICAgJHVpICAgICAgIFtpbl0g5qSc57Si5a++6LGh44GuIGpRdWVyeSDjgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAqIEBwYXJhbSB7RG9tRXh0ZW5zaW9uT3B0aW9uc30gW29wdGlvbnNdIFtpbl0g44Kq44OX44K344On44OzXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGFwcGx5RG9tRXh0ZW5zaW9uKCR1aTogSlF1ZXJ5LCBvcHRpb25zPzogRG9tRXh0ZW5zaW9uT3B0aW9ucyk6IEpRdWVyeSB7XHJcbiAgICAgICAgLypcclxuICAgICAgICAgKiBmbGlwc3dpdGNoIOOBq+e0kOOBpeOBjyBsYWJlbCDjga8gT1Mg44Gr44KI44Gj44GmIGV2ZW50IOeZuuihjOW9ouW8j+OBjOeVsOOBquOCi+OBn+OCgeODleODg+OCr+OBl+OBpueLrOiHquOCpOODmeODs+ODiOOBp+WvvuW/nOOBmeOCiy5cclxuICAgICAgICAgKiDjgb7jgZ8gZmxpcHN3aXRjaCDjga/lhoXpg6jjgacgY2xpY2sg44KS55m66KGM44GX44Gm44GE44KL44GM44CBdmNsaWNrIOOBq+WkieabtOOBmeOCiy5cclxuICAgICAgICAgKi9cclxuXHJcbiAgICAgICAgY29uc3QgX2dldEFsbFN3aXRjaGVzID0gKCk6IEpRdWVyeSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiAkdWkuZmluZChcIi51aS1mbGlwc3dpdGNoXCIpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNvbnN0IF9nZXRJbnB1dEZyb21Td2l0Y2ggPSAoJHN3aXRjaDogSlF1ZXJ5KTogSlF1ZXJ5ID0+IHtcclxuICAgICAgICAgICAgY29uc3QgJGlucHV0ID0gJHN3aXRjaC5maW5kKFwiaW5wdXRcIik7XHJcbiAgICAgICAgICAgIGlmICgkaW5wdXQubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJGlucHV0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0ICRzZWxlY3QgPSAkc3dpdGNoLmZpbmQoXCJzZWxlY3RcIik7XHJcbiAgICAgICAgICAgIGlmICgkc2VsZWN0Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICRzZWxlY3Q7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgY29uc3QgX2NoYW5nZSA9ICgkaW5wdXQ6IEpRdWVyeSwgdG86IGJvb2xlYW4pOiB2b2lkID0+IHtcclxuICAgICAgICAgICAgaWYgKCRpbnB1dCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKFwiSU5QVVRcIiA9PT0gJGlucHV0WzBdLm5vZGVOYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJGlucHV0LnByb3AoXCJjaGVja2VkXCIsIHRvKS5mbGlwc3dpdGNoKFwicmVmcmVzaFwiKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXCJTRUxFQ1RcIiA9PT0gJGlucHV0WzBdLm5vZGVOYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJGlucHV0LnZhbCh0byA/IFwib25cIiA6IFwib2ZmXCIpLmZsaXBzd2l0Y2goXCJyZWZyZXNoXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgY29uc3QgX2dldExhYmVsc0Zyb21Td2l0Y2ggPSAoJHN3aXRjaDogSlF1ZXJ5KTogSlF1ZXJ5ID0+IHtcclxuICAgICAgICAgICAgY29uc3QgJGlucHV0ID0gX2dldElucHV0RnJvbVN3aXRjaCgkc3dpdGNoKTtcclxuICAgICAgICAgICAgaWYgKCRpbnB1dCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbGFiZWxzID0gKDxhbnk+JGlucHV0WzBdKS5sYWJlbHM7XHJcbiAgICAgICAgICAgICAgICBpZiAobGFiZWxzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICQobGFiZWxzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gJCgpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNvbnN0IF9nZXRTd2l0Y2hGcm9tTGFiZWwgPSAoJGxhYmVsOiBKUXVlcnkpOiBKUXVlcnkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBuYW1lID0gJGxhYmVsLmF0dHIoXCJmb3JcIik7XHJcbiAgICAgICAgICAgIHJldHVybiBfZ2V0QWxsU3dpdGNoZXMoKS5maW5kKFwiW25hbWU9J1wiICsgbmFtZSArIFwiJ11cIik7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgX2dldEFsbFN3aXRjaGVzKClcclxuICAgICAgICAgICAgLm9uKFwidmNsaWNrIF9jaGFuZ2VfZmxpcHN3aWNoXCIsIChldmVudDogSlF1ZXJ5LkV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCAkc3dpdGNoID0gJChldmVudC5jdXJyZW50VGFyZ2V0KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0ICR0YXJnZXQgPSAkKGV2ZW50LnRhcmdldCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCAkaW5wdXQgPSBfZ2V0SW5wdXRGcm9tU3dpdGNoKCRzd2l0Y2gpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY2hhbmdlVG8gPSAhJHN3aXRjaC5oYXNDbGFzcyhcInVpLWZsaXBzd2l0Y2gtYWN0aXZlXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICgkdGFyZ2V0Lmhhc0NsYXNzKFwidWktZmxpcHN3aXRjaC1pbnB1dFwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIF9jaGFuZ2UoJGlucHV0LCBjaGFuZ2VUbyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCR0YXJnZXQuaGFzQ2xhc3MoXCJ1aS1mbGlwc3dpdGNoLW9uXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKEZyYW1ld29yay5QbGF0Zm9ybS5Nb2JpbGUgJiYgRnJhbWV3b3JrLlBhdGNoLmlzU3VwcG9ydGVkVmNsaWNrKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX2NoYW5nZSgkaW5wdXQsIGNoYW5nZVRvKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5lYWNoKChpbmRleDogbnVtYmVyLCBmbGlwc3dpdGNoOiBFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBfZ2V0TGFiZWxzRnJvbVN3aXRjaCgkKGZsaXBzd2l0Y2gpKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbihcInZjbGlja1wiLCAoZXZlbnQ6IEpRdWVyeS5FdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCAkc3dpdGNoID0gX2dldFN3aXRjaEZyb21MYWJlbCgkKGV2ZW50LnRhcmdldCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISRzd2l0Y2gucGFyZW50KCkuaGFzQ2xhc3MoXCJ1aS1zdGF0ZS1kaXNhYmxlZFwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHN3aXRjaC50cmlnZ2VyKFwiX2NoYW5nZV9mbGlwc3dpY2hcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiAkdWk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g55m76YyyXHJcbiAgICBFeHRlbnNpb25NYW5hZ2VyLnJlZ2lzdGVyRG9tRXh0ZW5zaW9uKGFwcGx5RG9tRXh0ZW5zaW9uKTtcclxufVxyXG4iLCJuYW1lc3BhY2UgQ0RQLlVJLkV4dGVuc2lvbiB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBqUXVlcnkgTW9iaWxlIFNsaWRlciDmi6HlvLVcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge2pRdWVyeX0gICAgICAgICAgICAgICR1aSAgICAgICBbaW5dIOaknOe0ouWvvuixoeOBriBqUXVlcnkg44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgKiBAcGFyYW0ge0RvbUV4dGVuc2lvbk9wdGlvbnN9IFtvcHRpb25zXSBbaW5dIOOCquODl+OCt+ODp+ODs1xyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBhcHBseURvbUV4dGVuc2lvbigkdWk6IEpRdWVyeSwgb3B0aW9ucz86IERvbUV4dGVuc2lvbk9wdGlvbnMpOiBKUXVlcnkge1xyXG4gICAgICAgICR1aS5maW5kKFwiLnVpLXNsaWRlci1pbnB1dFwiKVxyXG4gICAgICAgICAgICAub24oXCJzbGlkZXN0b3BcIiwgKGV2ZW50OiBKUXVlcnkuRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0ICRoYW5kbGVzID0gJChldmVudC5jdXJyZW50VGFyZ2V0KVxyXG4gICAgICAgICAgICAgICAgICAgIC5wYXJlbnQoKVxyXG4gICAgICAgICAgICAgICAgICAgIC5maW5kKFwiLnVpLXNsaWRlci1oYW5kbGVcIik7XHJcbiAgICAgICAgICAgICAgICAkaGFuZGxlcy5ibHVyKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiAkdWk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g55m76YyyXHJcbiAgICBFeHRlbnNpb25NYW5hZ2VyLnJlZ2lzdGVyRG9tRXh0ZW5zaW9uKGFwcGx5RG9tRXh0ZW5zaW9uKTtcclxufVxyXG4iLCJuYW1lc3BhY2UgQ0RQLlVJLkV4dGVuc2lvbiB7XHJcblxyXG4gICAgLy8hIGlTY3JvbGwuY2xpY2sgcGF0Y2hcclxuICAgIGNvbnN0IHBhdGNoX0lTY3JvbGxfdXRpbHNfY2xpY2sgPSBmdW5jdGlvbiAoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgdGFyZ2V0OiBhbnkgPSBldmVudC50YXJnZXQ7XHJcbiAgICAgICAgY29uc3QgZTogYW55ID0gZXZlbnQ7XHJcbiAgICAgICAgbGV0IGV2OiBNb3VzZUV2ZW50O1xyXG5cclxuICAgICAgICAvLyBbQ0RQIG1vZGlmaWVkXTogc2V0IHRhcmdldC5jbGllbnRYLlxyXG4gICAgICAgIGlmIChudWxsID09IHRhcmdldC5jbGllbnRYIHx8IG51bGwgPT0gdGFyZ2V0LmNsaWVudFkpIHtcclxuICAgICAgICAgICAgaWYgKG51bGwgIT0gZS5wYWdlWCAmJiBudWxsICE9IGUucGFnZVkpIHtcclxuICAgICAgICAgICAgICAgIHRhcmdldC5jbGllbnRYID0gZS5wYWdlWDtcclxuICAgICAgICAgICAgICAgIHRhcmdldC5jbGllbnRZID0gZS5wYWdlWTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChlLmNoYW5nZWRUb3VjaGVzICYmIGUuY2hhbmdlZFRvdWNoZXNbMF0pIHtcclxuICAgICAgICAgICAgICAgIHRhcmdldC5jbGllbnRYID0gZS5jaGFuZ2VkVG91Y2hlc1swXS5wYWdlWDtcclxuICAgICAgICAgICAgICAgIHRhcmdldC5jbGllbnRZID0gZS5jaGFuZ2VkVG91Y2hlc1swXS5wYWdlWTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCEoLyhTRUxFQ1R8SU5QVVR8VEVYVEFSRUEpL2kpLnRlc3QodGFyZ2V0LnRhZ05hbWUpKSB7XHJcbiAgICAgICAgICAgIGV2ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoXCJNb3VzZUV2ZW50c1wiKTtcclxuICAgICAgICAgICAgZXYuaW5pdE1vdXNlRXZlbnQoXCJjbGlja1wiLCB0cnVlLCB0cnVlLCBlLnZpZXcsIDEsXHJcbiAgICAgICAgICAgICAgICB0YXJnZXQuc2NyZWVuWCwgdGFyZ2V0LnNjcmVlblksIHRhcmdldC5jbGllbnRYLCB0YXJnZXQuY2xpZW50WSxcclxuICAgICAgICAgICAgICAgIGUuY3RybEtleSwgZS5hbHRLZXksIGUuc2hpZnRLZXksIGUubWV0YUtleSxcclxuICAgICAgICAgICAgICAgIDAsIG51bGwpO1xyXG5cclxuICAgICAgICAgICAgKDxhbnk+ZXYpLl9jb25zdHJ1Y3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIHRhcmdldC5kaXNwYXRjaEV2ZW50KGV2KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGxldCBzX2FwcGxpZWQgPSBmYWxzZTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIGlTY3JvbGwgUGF0Y2gg5ouh5by1XHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtqUXVlcnl9ICAgICAgICAgICAgICAkdWkgICAgICAgW2luXSDmpJzntKLlr77osaHjga4galF1ZXJ5IOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICogQHBhcmFtIHtEb21FeHRlbnNpb25PcHRpb25zfSBbb3B0aW9uc10gW2luXSDjgqrjg5fjgrfjg6fjg7NcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gYXBwbHlQYXRjaCgkdWk6IEpRdWVyeSwgb3B0aW9ucz86IERvbUV4dGVuc2lvbk9wdGlvbnMpOiBKUXVlcnkge1xyXG4gICAgICAgIGlmICghc19hcHBsaWVkICYmIGdsb2JhbC5JU2Nyb2xsICYmIGdsb2JhbC5JU2Nyb2xsLnV0aWxzKSB7XHJcbiAgICAgICAgICAgIGdsb2JhbC5JU2Nyb2xsLnV0aWxzLmNsaWNrID0gcGF0Y2hfSVNjcm9sbF91dGlsc19jbGljaztcclxuICAgICAgICAgICAgc19hcHBsaWVkID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuICR1aTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDnmbvpjLJcclxuICAgIEV4dGVuc2lvbk1hbmFnZXIucmVnaXN0ZXJEb21FeHRlbnNpb24oYXBwbHlQYXRjaCk7XHJcbn1cclxuIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uL0B0eXBlcy9jZHAucGx1Z2luLm5hdGl2ZWJyaWRnZS5kLnRzXCIgLz5cclxuXHJcbm5hbWVzcGFjZSBDRFAuTmF0aXZlQnJpZGdlIHtcclxuXHJcbiAgICBpbXBvcnQgUGx1Z2luICAgPSBDRFAuUGx1Z2luLk5hdGl2ZUJyaWRnZTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAqIEBpbnRlcmZhY2UgRmVhdHVyZVxyXG4gICAgICogQGJyaWVmIGZlYXR1cmUgaW5mb3JtYXRpb24uXHJcbiAgICAgKlxyXG4gICAgICogXFx+amFwYW5lc2VcclxuICAgICAqIEBpbnRlcmZhY2UgRmVhdHVyZVxyXG4gICAgICogQGJyaWVmIOapn+iDveaDheWgsVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIEZlYXR1cmUgZXh0ZW5kcyBQbHVnaW4uRmVhdHVyZSB7IH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAqIEBpbnRlcmZhY2UgQ29uc3RydWN0T3B0aW9uc1xyXG4gICAgICogQGJyaWVmIE5hdGl2ZUJyaWRnZSBjbGFzcydzIGNvbnNydHJ1Y3Rpb24gb3B0aW9ucy5cclxuICAgICAqXHJcbiAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICogQGludGVyZmFjZSBDb25zdHJ1Y3RPcHRpb25zXHJcbiAgICAgKiBAYnJpZWYg5Yid5pyf5YyW44Gr5oyH5a6a44GZ44KL44Kq44OX44K344On44OzXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgQ29uc3RydWN0T3B0aW9ucyBleHRlbmRzIFBsdWdpbi5Db25zdHJ1Y3RPcHRpb25zIHtcclxuICAgICAgICByZWNlaXZlUGFyYW1zPzogYm9vbGVhbjsgLy8gZXhlYyDmiJDlip/mmYLjgassIC4uLnBhcmFtcywgSVJlc3VsdCDjgafov5TljbTjgZnjgovloLTlkIggdHJ1ZSAo5pei5a6a5YCkKVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICogQGludGVyZmFjZSBJUmVzdWx0XHJcbiAgICAgKiBAYnJpZWYgTmF0aXZlQnJpZGdlIGJhc2UgcmVzdWx0IGluZm9ybWF0aW9uLlxyXG4gICAgICpcclxuICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgKiBAaW50ZXJmYWNlIElSZXN1bHRcclxuICAgICAqIEBicmllZiBOYXRpdmVCcmlkZ2Ug44Gu5Z+65bqVIFJlc3VsdCDmg4XloLFcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJUmVzdWx0IGV4dGVuZHMgUGx1Z2luLklSZXN1bHQgeyB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgKiBAaW50ZXJmYWNlIEV4ZWNPcHRpb25zXHJcbiAgICAgKiBAYnJpZWYgZXhlYygpIG1ldGhvZCBvcHRpb25zLlxyXG4gICAgICpcclxuICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgKiBAaW50ZXJmYWNlIEV4ZWNPcHRpb25zXHJcbiAgICAgKiBAYnJpZWYgZXhlYygpIOOBq+a4oeOBmeOCquODl+OCt+ODp+ODs1xyXG4gICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIEV4ZWNPcHRpb25zIGV4dGVuZHMgUGx1Z2luLkV4ZWNPcHRpb25zIHtcclxuICAgICAgICByZWNlaXZlUGFyYW1zPzogYm9vbGVhbjsgLy8gZXhlYyDmiJDlip/mmYLjgassIC4uLnBhcmFtcywgSVJlc3VsdCDjgafov5TljbTjgZnjgovloLTlkIggdHJ1ZVxyXG4gICAgfVxyXG59XHJcblxyXG5kZWNsYXJlIG1vZHVsZSBcImNkcC5uYXRpdmVicmlkZ2VcIiB7XHJcbiAgICBjb25zdCBOYXRpdmVCcmlkZ2U6IHR5cGVvZiBDRFAuTmF0aXZlQnJpZGdlO1xyXG4gICAgZXhwb3J0ID0gTmF0aXZlQnJpZGdlO1xyXG59XHJcbiIsIm5hbWVzcGFjZSBDRFAuTmF0aXZlQnJpZGdlIHtcclxuXHJcbiAgICBpbXBvcnQgSVByb21pc2VCYXNlID0gQ0RQLklQcm9taXNlQmFzZTtcclxuICAgIGltcG9ydCBJUHJvbWlzZSAgICAgPSBDRFAuSVByb21pc2U7XHJcblxyXG4gICAgY29uc3QgVEFHID0gXCJbQ0RQLk5hdGl2ZUJyaWRnZS5VdGlsc10gXCI7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgKiBAY2xhc3MgVXRpbHNcclxuICAgICAqIEBicmllZiBUaGUgdXRpbGl0eSBjbGFzcyBmb3IgQ0RQLk5hdGl2ZUJyaWRnZS5cclxuICAgICAqXHJcbiAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICogQGNsYXNzIFV0aWxzXHJcbiAgICAgKiBAYnJpZWYgQ0RQLk5hdGl2ZUJyaWRnZSDjgYzkvb/nlKjjgZnjgovjg6bjg7zjg4bjgqPjg6rjg4bjgqPjgq/jg6njgrlcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGNsYXNzIFV0aWxzIHtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgc19wbHVnaW5SZWFkeSA9IGZhbHNlO1xyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIHB1YmxpYyBzdGF0aWMgbWV0aG9kc1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogRGVmaW5lcyBlcnJvciBjb2RlIG1hcCBmcm9tIHRoZSBwbHVnaW4gcmVzdWx0IHRvIENEUC5OYXRpdmVCcmlkZ2UgcmVzdWx0IGNvZGUuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gZXJyb3JDb2RlIFtpbl0gc2V0IHJlc3VsdCBjb2RlIHN0cmluZy4gZXgpOiBcIlNVQ0NFU1NfT0tcIlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiBwbHVnaW4g44GuIFJlc3VsdCBDb2RlIOOCkiBDRFAuTmF0aXZlQnJpZGdlIOOBq+ODnuODg+ODl+OBmeOCi1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGVycm9yQ29kZSBbaW5dIFJlc3VsdCBDb2RlIOaWh+Wtl+WIl+OCkuaMh+WumiBleCk6IFwiU1VDQ0VTU19PS1wiXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBkZWZpbmVSZXN1bHRDb2RlKGVycm9yQ29kZTogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShOYXRpdmVCcmlkZ2UsIGVycm9yQ29kZSwge1xyXG4gICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKFV0aWxzLnNfcGx1Z2luUmVhZHkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFBsdWdpbi5OYXRpdmVCcmlkZ2VbZXJyb3JDb2RlXTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBXYWl0IGZvciBjb3Jkb3ZhIFwiZGV2aWNlcmVhZHlcIiBldmVudCBmaXJlZC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICogY29yZG92YSDjgYwg5L2/55So5Y+v6IO944Gr44Gq44KL44G+44Gn5b6F5qmfXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyB3YWl0Rm9yUGx1Z2luUmVhZHkoKTogSVByb21pc2VCYXNlPHZvaWQ+IHtcclxuICAgICAgICAgICAgY29uc3QgZGYgPSAkLkRlZmVycmVkPHZvaWQ+KCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoVXRpbHMuc19wbHVnaW5SZWFkeSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICQuRGVmZXJyZWQ8dm9pZD4oKS5yZXNvbHZlKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjaGFubmVsID0gY29yZG92YS5yZXF1aXJlKFwiY29yZG92YS9jaGFubmVsXCIpO1xyXG4gICAgICAgICAgICAgICAgY2hhbm5lbC5vbkNvcmRvdmFSZWFkeS5zdWJzY3JpYmUoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9IENEUC5QbHVnaW4uTmF0aXZlQnJpZGdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFV0aWxzLnNfcGx1Z2luUmVhZHkgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZi5yZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGYucmVqZWN0KFRBRyArIFwiJ2NvcmRvdmEtcGx1Z2luLWNkcC1uYXRpdmVicmlkZ2UnIGNvcmRvdmEgcGx1Z2luIHJlcXVpcmVkLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIGRmLnJlamVjdChUQUcgKyBcImNvcmRvdmEgcmVxdWlyZWQuXCIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZGYucHJvbWlzZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIENyZWF0ZSBOYXRpdmVCcmlkZ2UuUHJvbWlzZSBvYmplY3QgZnJvbSBqUXVlcnlEZWZlcnJlZCBvYmplY3QuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gZGYgW2luXSBzZXQgalF1ZXJ5RGVmZXJyZWQgaW5zdGFuY2UuXHJcbiAgICAgICAgICogQHJldHVybnMgTmF0aXZlQnJpZGdlLlByb21pc2Ugb2JqZWN0LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiBQcm9taXNlIOOCquODluOCuOOCp+OCr+ODiOOBruS9nOaIkFxyXG4gICAgICAgICAqIGpRdWVyeURlZmVycmVkIOOCquODluOCuOOCp+OCr+ODiOOBi+OCieOAgU5hdGl2ZUJyaWRnZS5Qcm9taXNlIOOCquODluOCuOOCp+OCr+ODiOOCkuS9nOaIkOOBmeOCi1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGRmIFtpbl0galF1ZXJ5RGVmZXJyZWQgaW5zdGFuY2Ug44KS5oyH5a6aXHJcbiAgICAgICAgICogQHJldHVybnMgTmF0aXZlQnJpZGdlLlByb21pc2Ug44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBtYWtlUHJvbWlzZShkZjogSlF1ZXJ5RGVmZXJyZWQ8SVJlc3VsdD4pOiBJUHJvbWlzZTxJUmVzdWx0PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBDRFAubWFrZVByb21pc2UoZGYsIHtcclxuICAgICAgICAgICAgICAgIF9icmlkZ2U6IG51bGwsXHJcbiAgICAgICAgICAgICAgICBfdGFza0lkOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgYWJvcnQ6IGZ1bmN0aW9uIChpbmZvPzogYW55KTogdm9pZCB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGV0YWlsID0gJC5leHRlbmQoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiBOYXRpdmVCcmlkZ2UuRVJST1JfQ0FOQ0VMLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcImFib3J0XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IFRBRyArIFwiRVJST1JfQ0FOQ0VMXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2tJZDogdGhpcy5fdGFza0lkLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sIGluZm8pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjYW5jZWwgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9IHRoaXMuX2JyaWRnZSAmJiBudWxsICE9IHRoaXMuX3Rhc2tJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fYnJpZGdlLmNhbmNlbCh0aGlzLl90YXNrSWQsIGRldGFpbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZGYucmVqZWN0KGRldGFpbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgIT0gdGhpcy5kZXBlbmRlbmN5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmRlcGVuZGVuY3kuYWJvcnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVwZW5kZW5jeS5hYm9ydChkZXRhaWwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihUQUcgKyBcIltjYWxsXSBkZXBlbmRlbmN5IG9iamVjdCBkb2Vzbid0IGhhdmUgJ2Fib3J0KCknIG1ldGhvZC5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY2FsbFJlamVjdCAmJiBcInBlbmRpbmdcIiA9PT0gdGhpcy5zdGF0ZSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5jZWwoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoXCJwZW5kaW5nXCIgPT09IHRoaXMuc3RhdGUoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYW5jZWwoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIEhlbHBlciBmdW5jdGlvbiB0byBjb3JyZWN0bHkgc2V0IHVwIHRoZSBwcm90b3R5cGUgY2hhaW4sIGZvciBzdWJjbGFzc2VzLlxyXG4gICAgICAgICAqIFRoZSBmdW5jdGlvbiBiZWhhdmlvciBpcyBzYW1lIGFzIGV4dGVuZCgpIGZ1bmN0aW9uIG9mIEJhY2tib25lLmpzLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHByb3RvUHJvcHMgIFtpbl0gc2V0IHByb3RvdHlwZSBwcm9wZXJ0aWVzIGFzIG9iamVjdC5cclxuICAgICAgICAgKiBAcGFyYW0gc3RhdGljUHJvcHMgW2luXSBzZXQgc3RhdGljIHByb3BlcnRpZXMgYXMgb2JqZWN0LlxyXG4gICAgICAgICAqIEByZXR1cm5zIHN1YmNsYXNzIGNvbnN0cnVjdG9yLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiDjgq/jg6njgrnntpnmib/jga7jgZ/jgoHjga7jg5jjg6vjg5Hjg7zplqLmlbBcclxuICAgICAgICAgKiBCYWNrYm9uZS5qcyBleHRlbmQoKSDplqLmlbDjgajlkIznrYlcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBwcm90b1Byb3BzICBbaW5dIHByb3RvdHlwZSBwcm9wZXJ0aWVzIOOCkuOCquODluOCuOOCp+OCr+ODiOOBp+aMh+WumlxyXG4gICAgICAgICAqIEBwYXJhbSBzdGF0aWNQcm9wcyBbaW5dIHN0YXRpYyBwcm9wZXJ0aWVzIOOCkuOCquODluOCuOOCp+OCr+ODiOOBp+aMh+WumlxyXG4gICAgICAgICAqIEByZXR1cm5zIOOCteODluOCr+ODqeOCueOBruOCs+ODs+OCueODiOODqeOCr+OCv1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgZXh0ZW5kKHByb3RvUHJvcHM6IG9iamVjdCwgc3RhdGljUHJvcHM/OiBvYmplY3QpOiBvYmplY3Qge1xyXG4gICAgICAgICAgICBjb25zdCBwYXJlbnQgPSB0aGlzO1xyXG4gICAgICAgICAgICBsZXQgY2hpbGQ7XHJcblxyXG4gICAgICAgICAgICBpZiAocHJvdG9Qcm9wcyAmJiBwcm90b1Byb3BzLmhhc093blByb3BlcnR5KFwiY29uc3RydWN0b3JcIikpIHtcclxuICAgICAgICAgICAgICAgIGNoaWxkID0gcHJvdG9Qcm9wcy5jb25zdHJ1Y3RvcjtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNoaWxkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJlbnQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICQuZXh0ZW5kKGNoaWxkLCBwYXJlbnQsIHN0YXRpY1Byb3BzKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IFN1cnJvZ2F0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29uc3RydWN0b3IgPSBjaGlsZDtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgU3Vycm9nYXRlLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7XHJcbiAgICAgICAgICAgIGNoaWxkLnByb3RvdHlwZSA9IG5ldyBTdXJyb2dhdGU7XHJcblxyXG4gICAgICAgICAgICBpZiAocHJvdG9Qcm9wcykge1xyXG4gICAgICAgICAgICAgICAgJC5leHRlbmQoY2hpbGQucHJvdG90eXBlLCBwcm90b1Byb3BzKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY2hpbGQuX19zdXBlcl9fID0gcGFyZW50LnByb3RvdHlwZTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBjaGlsZDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwibmFtZXNwYWNlIENEUC5OYXRpdmVCcmlkZ2Uge1xyXG5cclxuICAgIGltcG9ydCBJUHJvbWlzZSAgICAgPSBDRFAuSVByb21pc2U7XHJcbiAgICBpbXBvcnQgSVByb21pc2VCYXNlID0gQ0RQLklQcm9taXNlQmFzZTtcclxuXHJcbiAgICBjb25zdCBUQUc6IHN0cmluZyA9IFwiW0NEUC5OYXRpdmVCcmlkZ2UuR2F0ZV0gXCI7XHJcblxyXG4gICAgLy8gUmVzdWx0IGNvZGVcclxuXHJcbiAgICBleHBvcnQgbGV0IFNVQ0NFU1NfT0s6IG51bWJlcjsgICAgICAgICAgICAgIFV0aWxzLmRlZmluZVJlc3VsdENvZGUoXCJTVUNDRVNTX09LXCIpO1xyXG4gICAgZXhwb3J0IGxldCBTVUNDRVNTX1BST0dSRVNTOiBudW1iZXI7ICAgICAgICBVdGlscy5kZWZpbmVSZXN1bHRDb2RlKFwiU1VDQ0VTU19QUk9HUkVTU1wiKTtcclxuICAgIGV4cG9ydCBsZXQgRVJST1JfRkFJTDogbnVtYmVyOyAgICAgICAgICAgICAgVXRpbHMuZGVmaW5lUmVzdWx0Q29kZShcIkVSUk9SX0ZBSUxcIik7XHJcbiAgICBleHBvcnQgbGV0IEVSUk9SX0NBTkNFTDogbnVtYmVyOyAgICAgICAgICAgIFV0aWxzLmRlZmluZVJlc3VsdENvZGUoXCJFUlJPUl9DQU5DRUxcIik7XHJcbiAgICBleHBvcnQgbGV0IEVSUk9SX0lOVkFMSURfQVJHOiBudW1iZXI7ICAgICAgIFV0aWxzLmRlZmluZVJlc3VsdENvZGUoXCJFUlJPUl9JTlZBTElEX0FSR1wiKTtcclxuICAgIGV4cG9ydCBsZXQgRVJST1JfTk9UX0lNUExFTUVOVDogbnVtYmVyOyAgICAgVXRpbHMuZGVmaW5lUmVzdWx0Q29kZShcIkVSUk9SX05PVF9JTVBMRU1FTlRcIik7XHJcbiAgICBleHBvcnQgbGV0IEVSUk9SX05PVF9TVVBQT1JUOiBudW1iZXI7ICAgICAgIFV0aWxzLmRlZmluZVJlc3VsdENvZGUoXCJFUlJPUl9OT1RfU1VQUE9SVFwiKTtcclxuICAgIGV4cG9ydCBsZXQgRVJST1JfSU5WQUxJRF9PUEVSQVRJT046IG51bWJlcjsgVXRpbHMuZGVmaW5lUmVzdWx0Q29kZShcIkVSUk9SX0lOVkFMSURfT1BFUkFUSU9OXCIpO1xyXG4gICAgZXhwb3J0IGxldCBFUlJPUl9DTEFTU19OT1RfRk9VTkQ6IG51bWJlcjsgICBVdGlscy5kZWZpbmVSZXN1bHRDb2RlKFwiRVJST1JfQ0xBU1NfTk9UX0ZPVU5EXCIpO1xyXG4gICAgZXhwb3J0IGxldCBFUlJPUl9NRVRIT0RfTk9UX0ZPVU5EOiBudW1iZXI7ICBVdGlscy5kZWZpbmVSZXN1bHRDb2RlKFwiRVJST1JfTUVUSE9EX05PVF9GT1VORFwiKTtcclxuXHJcbiAgICAvL19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18vL1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICogQGNsYXNzIEdhdGVcclxuICAgICAqIEBicmllZiBUaGUgYmFzZSBjbGFzcyBmb3IgTmF0aXZlQnJpZGdlIGNvbW11bmljYXRpb24uXHJcbiAgICAgKiAgICAgICAgWW91IGNhbiBkZXJpdmUgYW55IEdhdGUgY2xhc3MgZnJvbSB0aGlzIGNsYXNzLlxyXG4gICAgICpcclxuICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgKiBAY2xhc3MgR2F0ZVxyXG4gICAgICogQGJyaWVmIE5hdGl2ZUJyaWRnZSDjgajpgJrkv6HjgZnjgovjg5njg7zjgrnjgq/jg6njgrlcclxuICAgICAqICAgICAgICDjgZPjga7jgq/jg6njgrnjgYvjgonku7vmhI/jga4gR2F0ZSDjgq/jg6njgrnjgpLmtL7nlJ/jgZfjgablrp/oo4Xlj6/og71cclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGNsYXNzIEdhdGUge1xyXG5cclxuICAgICAgICBwcml2YXRlIF9icmlkZ2U6IFBsdWdpbi5OYXRpdmVCcmlkZ2U7XHJcbiAgICAgICAgcHJpdmF0ZSBfb3B0aW9uczogQ29uc3RydWN0T3B0aW9ucztcclxuXHJcbiAgICAgICAgLyogdHNsaW50OmRpc2FibGU6bm8tdW51c2VkLXZhcmlhYmxlICovXHJcbiAgICAgICAgLy8gRm9yIHB1cmUgamF2YXNjcmlwdCBleHRlbmQgaGVscGVyLlxyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGV4dGVuZCA9IFV0aWxzLmV4dGVuZDtcclxuICAgICAgICAvKiB0c2xpbnQ6ZW5hYmxlOm5vLXVudXNlZC12YXJpYWJsZSAqL1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogY29uc3RydWN0b3JcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBmZWF0dXJlIFtpbl0gZmVhdHVyZSBpbmZvcm1hdGlvbi5cclxuICAgICAgICAgKiBAcGFyYW0gb3B0aW9ucyBbaW5dIGNvbnN0cnVjdGlvbiBvcHRpb25zLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiBjb25zdHJ1Y3RvclxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGZlYXR1cmUgW2luXSDliJ3mnJ/ljJbmg4XloLHjgpLmjIflrppcclxuICAgICAgICAgKiBAcGFyYW0gb3B0aW9ucyBbaW5dIOOCquODl+OCt+ODp+ODs+OCkuaMh+WumlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGNvbnN0cnVjdG9yKGZlYXR1cmU6IEZlYXR1cmUsIG9wdGlvbnM/OiBDb25zdHJ1Y3RPcHRpb25zKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX29wdGlvbnMgPSAkLmV4dGVuZCh7IHJlY2VpdmVQYXJhbXM6IHRydWUgfSwgb3B0aW9ucyk7XHJcbiAgICAgICAgICAgIFV0aWxzLndhaXRGb3JQbHVnaW5SZWFkeSgpXHJcbiAgICAgICAgICAgICAgICAuZG9uZSgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fYnJpZGdlID0gbmV3IFBsdWdpbi5OYXRpdmVCcmlkZ2UoZmVhdHVyZSwgb3B0aW9ucyk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmNhdGNoKChyZWFzb24pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcihyZWFzb24pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIG92ZXJyaWRlIG1ldGhvZHNcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogXFx+ZW5nbGlzaFxyXG4gICAgICAgICAqIEV4ZWN1dGUgdGFzay5cclxuICAgICAgICAgKiB0aGUgZnVuY3Rpb24gY2FsbHMgdGhlIE5hdGl2ZSBjbGFzcyBtZXRob2QgZnJvbSBjb3JyZXNwb25kZW50IG1ldGhvZCBuYW1lLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIG1ldGhvZCAgW2luXSBtZXRob2QgbmFtZSBvZiBOYXRpdmUgY2xhc3NcclxuICAgICAgICAgKiBAcGFyYW0gYXJncyAgICBbaW5dIHNldCBhcmd1bWVudHMgYnkgYXJyYXkgdHlwZS5cclxuICAgICAgICAgKiBAcGFyYW0gb3B0aW9ucyBbaW5dIHNldCBleGVjIG9wdGlvbnMuXHJcbiAgICAgICAgICogQHJldHVybnMgUHJvbWlzZSBvYmplY3QuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIOOCv+OCueOCr+OBruWun+ihjFxyXG4gICAgICAgICAqIOaMh+WumuOBl+OBnyBtZXRob2Qg5ZCN44Gr5a++5b+c44GZ44KLIE5hdGl2ZSBDbGFzcyDjga4gbWV0aG9kIOOCkuWRvOOBs+WHuuOBmeOAglxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIG1ldGhvZCAgW2luXSBOYXRpdmUgQ2xhc3Mg44Gu44Oh44K944OD44OJ5ZCN44KS5oyH5a6aXHJcbiAgICAgICAgICogQHBhcmFtIGFyZ3MgICAgW2luXSDlvJXmlbDjgpLphY3liJfjgafmjIflrppcclxuICAgICAgICAgKiBAcGFyYW0gb3B0aW9ucyBbaW5dIOWun+ihjOOCquODl+OCt+ODp+ODs+OCkuaMh+WumlxyXG4gICAgICAgICAqIEByZXR1cm5zIFByb21pc2Ug44Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIGV4ZWMobWV0aG9kOiBzdHJpbmcsIGFyZ3M/OiBhbnlbXSwgb3B0aW9ucz86IEV4ZWNPcHRpb25zKTogSVByb21pc2U8YW55PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRmID0gJC5EZWZlcnJlZCgpO1xyXG4gICAgICAgICAgICBjb25zdCBwcm9taXNlID0gVXRpbHMubWFrZVByb21pc2UoZGYpO1xyXG4gICAgICAgICAgICBjb25zdCBvcHQgPSAkLmV4dGVuZCh7fSwgdGhpcy5fb3B0aW9ucywgb3B0aW9ucyk7XHJcblxyXG4gICAgICAgICAgICBVdGlscy53YWl0Rm9yUGx1Z2luUmVhZHkoKVxyXG4gICAgICAgICAgICAgICAgLmRvbmUoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhc2tJZCA9IHRoaXMuX2JyaWRnZS5leGVjKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAocmVzdWx0OiBJUmVzdWx0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoU1VDQ0VTU19QUk9HUkVTUyA9PT0gcmVzdWx0LmNvZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0LnJlY2VpdmVQYXJhbXMgJiYgbnVsbCAhPSByZXN1bHQucGFyYW1zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRmLm5vdGlmeSguLi5bLi4ucmVzdWx0LnBhcmFtcywgcmVzdWx0XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGYubm90aWZ5KHJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAob3B0LnJlY2VpdmVQYXJhbXMgJiYgbnVsbCAhPSByZXN1bHQucGFyYW1zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRmLnJlc29sdmUoLi4uWy4uLnJlc3VsdC5wYXJhbXMsIHJlc3VsdF0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRmLnJlc29sdmUocmVzdWx0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChlcnJvcjogSVJlc3VsdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGYucmVqZWN0KGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kLCBhcmdzLCBvcHRpb25zXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gc2V0IGludGVybmFsIHByb3BlcnRpZXMuXHJcbiAgICAgICAgICAgICAgICAgICAgKDxhbnk+cHJvbWlzZSkuX2JyaWRnZSA9IHRoaXMuX2JyaWRnZTtcclxuICAgICAgICAgICAgICAgICAgICAoPGFueT5wcm9taXNlKS5fdGFza0lkID0gdGFza0lkO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5jYXRjaCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGYucmVqZWN0KHRoaXMubWFrZUZhdGFsKCkpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcHJvbWlzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFxcfmVuZ2xpc2hcclxuICAgICAgICAgKiBDYW5jZWwgYWxsIHRhc2tzLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIG9wdGlvbnMgW2luXSBzZXQgZXhlY3V0ZSBvcHRpb25zLlxyXG4gICAgICAgICAqIEByZXR1cm5zIFByb21pc2Ugb2JqZWN0LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogXFx+amFwYW5lc2VcclxuICAgICAgICAgKiDjgZnjgbnjgabjga7jgr/jgrnjgq/jga7jgq3jg6Pjg7Pjgrvjg6tcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBvcHRpb25zIFtpbl0g5a6f6KGM44Kq44OX44K344On44Oz44KS5oyH5a6aXHJcbiAgICAgICAgICogQHJldHVybnMgUHJvbWlzZSDjgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgY2FuY2VsKG9wdGlvbnM/OiBFeGVjT3B0aW9ucyk6IElQcm9taXNlQmFzZTxJUmVzdWx0PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRmID0gJC5EZWZlcnJlZCgpO1xyXG4gICAgICAgICAgICBVdGlscy53YWl0Rm9yUGx1Z2luUmVhZHkoKVxyXG4gICAgICAgICAgICAgICAgLmRvbmUoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2JyaWRnZS5jYW5jZWwobnVsbCwgb3B0aW9ucyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKHJlc3VsdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGYucmVzb2x2ZShyZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRmLnJlamVjdChlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5jYXRjaCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGYucmVqZWN0KHRoaXMubWFrZUZhdGFsKCkpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBkZi5wcm9taXNlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogRGVzdHJ1Y3Rpb24gZm9yIHRoZSBpbnN0YW5jZS5cclxuICAgICAgICAgKiByZWxlYXNlIE5hdGl2ZSBjbGFzcyByZWZlcmVuY2UuIGFmdGVyIHRoYXQsIGV4ZWMoKSBiZWNvbWVzIGludmFsaWQuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gb3B0aW9ucyBbaW5dIHNldCBleGVjdXRlIG9wdGlvbnMuXHJcbiAgICAgICAgICogQHJldHVybnMgUHJvbWlzZSBvYmplY3QuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBcXH5qYXBhbmVzZVxyXG4gICAgICAgICAqIOOCpOODs+OCueOCv+ODs+OCueOBruegtOajhFxyXG4gICAgICAgICAqIE5hdGl2ZSDjga7lj4LnhafjgpLop6PpmaTjgZnjgovjgILku6XpmY3jgIFleGVjIOOBr+eEoeWKueOBqOOBquOCi+OAglxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIG9wdGlvbnMgW2luXSDlrp/ooYzjgqrjg5fjgrfjg6fjg7PjgpLmjIflrppcclxuICAgICAgICAgKiBAcmV0dXJucyBQcm9taXNlIOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBkaXNwb3NlKG9wdGlvbnM/OiBFeGVjT3B0aW9ucyk6IElQcm9taXNlQmFzZTxJUmVzdWx0PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRmID0gJC5EZWZlcnJlZCgpO1xyXG4gICAgICAgICAgICBVdGlscy53YWl0Rm9yUGx1Z2luUmVhZHkoKVxyXG4gICAgICAgICAgICAgICAgLmRvbmUoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2JyaWRnZS5kaXNwb3NlKG9wdGlvbnMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChyZXN1bHQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRmLnJlc29sdmUocmVzdWx0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZi5yZWplY3QoZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuY2F0Y2goKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGRmLnJlamVjdCh0aGlzLm1ha2VGYXRhbCgpKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gZGYucHJvbWlzZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBwcm90ZWN0ZWQgbWV0aG9kc1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBcXH5lbmdsaXNoXHJcbiAgICAgICAgICogQWNjZXNzIHRvIFBsdWdpbi5OYXRpdmVCcmlkZ2Ugb2JqZWN0LlxyXG4gICAgICAgICAqIElmIHlvdSB3YW50IHRvIHVzZSBsb3cgbGV2ZWwgZXhlYygpLCB5b3UgY2FuIHVzZSB0aGlzIGFjY2Vzc29yLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybnMgUGx1Z2luLk5hdGl2ZUJyaWRnZSBpbnN0YW5jZS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFxcfmphcGFuZXNlXHJcbiAgICAgICAgICogUGx1Z2luLk5hdGl2ZUJyaWRnZSDjgqrjg5bjgrjjgqfjgq/jg4jjgbjjga7jgqLjgq/jgrvjgrlcclxuICAgICAgICAgKiDkvY7jg6zjg5njg6sgZXhlYygpIOOCkuS9v+eUqOOBl+OBn+OBhOWgtOWQiOOBq+WIqeeUqOWPr+iDvVxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJldHVybnMgUGx1Z2luLk5hdGl2ZUJyaWRnZSDjgqTjg7Pjgrnjgr/jg7PjgrkuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJvdGVjdGVkIGdldCBicmlkZ2UoKTogUGx1Z2luLk5hdGl2ZUJyaWRnZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9icmlkZ2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIHByaXZhdGUgbWV0aG9kc1xyXG5cclxuICAgICAgICAvLyEgTWFrZSBmYXRhbCBlcnJvciBvYmplY3QuXHJcbiAgICAgICAgcHJpdmF0ZSBtYWtlRmF0YWwoKTogSVJlc3VsdCB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1zZyA9IFRBRyArIFwiZmF0YWwgZXJyb3IuICdjb3Jkb3ZhLXBsdWdpbi1jZHAtbmF0aXZlYnJpZGdlJyBpcyBub3QgYXZhaWxhYmxlLlwiO1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKG1zZyk7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBjb2RlOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgbmFtZTogVEFHICsgXCJFUlJPUl9GQVRBTFwiLFxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogbXNnLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgX2NvcmUgPSByZXF1aXJlKFwiY2RwLmNvcmVcIik7XHJcblxyXG4vLyBDRFAgc3R1ZmZcclxuZXhwb3J0IGNvbnN0IGdsb2JhbCAgICAgICAgID0gX2NvcmUuZ2xvYmFsO1xyXG5leHBvcnQgY29uc3QgY29yZUluaXRpYWxpemUgPSBfY29yZS5pbml0aWFsaXplO1xyXG5leHBvcnQgY29uc3Qgd2ViUm9vdCAgICAgICAgPSBfY29yZS53ZWJSb290O1xyXG5leHBvcnQgY29uc3QgQ29uZmlnICAgICAgICAgPSBfY29yZS5Db25maWc7XHJcblxyXG4vLyBlcnJvciB1dGlsc1xyXG5leHBvcnQgdHlwZSAgRXJyb3JJbmZvICAgICAgICAgICAgICAgICAgPSBfY29yZS5FcnJvckluZm87XHJcbmV4cG9ydCBjb25zdCBtYWtlRXJyb3JJbmZvICAgICAgICAgICAgICA9IF9jb3JlLm1ha2VFcnJvckluZm87XHJcbmV4cG9ydCBjb25zdCBpc0NhbmNlbGVkRXJyb3IgICAgICAgICAgICA9IF9jb3JlLmlzQ2FuY2VsZWRFcnJvcjtcclxuZXhwb3J0IHR5cGUgIFJFU1VMVF9DT0RFICAgICAgICAgICAgICAgID0gX2NvcmUuUkVTVUxUX0NPREU7XHJcbmV4cG9ydCBjb25zdCBSRVNVTFRfQ09ERSAgICAgICAgICAgICAgICA9IF9jb3JlLlJFU1VMVF9DT0RFO1xyXG5leHBvcnQgY29uc3QgREVDTEFSRV9FUlJPUl9DT0RFICAgICAgICAgPSBfY29yZS5ERUNMQVJFX0VSUk9SX0NPREU7XHJcbmV4cG9ydCBjb25zdCBBU1NJR05fUkVTVUxUX0NPREUgICAgICAgICA9IF9jb3JlLkFTU0lHTl9SRVNVTFRfQ09ERTtcclxuZXhwb3J0IGNvbnN0IE1PRFVMRV9SRVNVTFRfQ09ERV9SQU5HRSAgID0gX2NvcmUuTU9EVUxFX1JFU1VMVF9DT0RFX1JBTkdFO1xyXG5leHBvcnQgdHlwZSAgUkVTVUxUX0NPREVfQkFTRSAgICAgICAgICAgPSBfY29yZS5SRVNVTFRfQ09ERV9CQVNFO1xyXG5leHBvcnQgY29uc3QgUkVTVUxUX0NPREVfQkFTRSAgICAgICAgICAgPSBfY29yZS5SRVNVTFRfQ09ERV9CQVNFO1xyXG5leHBvcnQgY29uc3QgQVNTSUdOX1JFU1VMVF9DT0RFX0JBU0UgICAgPSBfY29yZS5BU1NJR05fUkVTVUxUX0NPREVfQkFTRTtcclxuXHJcbi8vIGludGVyZmFjZXNcclxuZXhwb3J0IHR5cGUgQ29yZUluaXRPcHRpb25zID0gX2NvcmUuQ29yZUluaXRPcHRpb25zO1xyXG4iLCJpbXBvcnQgX3Byb21pc2UgPSByZXF1aXJlKFwiY2RwLnByb21pc2VcIik7XHJcblxyXG4vLyBQcm9taXNlIG1ldGhvZHNcclxuZXhwb3J0IGNvbnN0IG1ha2VQcm9taXNlICAgID0gX3Byb21pc2UubWFrZVByb21pc2U7XHJcbmV4cG9ydCBjb25zdCB3YWl0ICAgICAgICAgICA9IF9wcm9taXNlLndhaXQ7XHJcblxyXG4vLyBAY2xhc3MgUHJvbWlzZU1hbmFnZXJcclxuZXhwb3J0IHR5cGUgIFByb21pc2VNYW5hZ2VyID0gQ0RQLlByb21pc2VNYW5hZ2VyO1xyXG5leHBvcnQgY29uc3QgUHJvbWlzZU1hbmFnZXIgPSBfcHJvbWlzZS5Qcm9taXNlTWFuYWdlcjtcclxuXHJcbi8vIEBjbGFzcyBlczIwMTUgUHJvbWlzZVxyXG5leHBvcnQgdHlwZSAgUHJvbWlzZUNvbnN0cnVjdG9yPFQ+ID0gQ0RQLlByb21pc2VDb25zdHJ1Y3RvcjxUPjtcclxuZXhwb3J0IGNvbnN0IFByb21pc2UgPSBfcHJvbWlzZS5Qcm9taXNlO1xyXG5cclxuLy8gaW50ZXJmYWNlc1xyXG5leHBvcnQgdHlwZSBJUHJvbWlzZUJhc2U8VD4gPSBDRFAuSVByb21pc2VCYXNlPFQ+O1xyXG5leHBvcnQgdHlwZSBJUHJvbWlzZTxUPiAgICAgPSBDRFAuSVByb21pc2U8VD47XHJcbiIsImltcG9ydCBfaTE4biA9IHJlcXVpcmUoXCJjZHAuaTE4blwiKTtcclxuaW1wb3J0IGkxOG4gPSBDRFAuaTE4bjtcclxuXHJcbi8vIENEUCBzdHVmZlxyXG5leHBvcnQgeyBpMThuIH07XHJcblxyXG4vLyBpbnRlcmZhY2VzXHJcbmV4cG9ydCB0eXBlIEkxOE5TZXR0aW5ncyA9IF9pMThuLkkxOE5TZXR0aW5ncztcclxuIiwiLy8vIDxhbWQtZGVwZW5kZW5jeSBwYXRoPVwiY2RwLmZyYW1ld29yay5qcW1cIiAvPlxyXG5cclxuLy8gQ0RQIG1ldGhvZHNcclxuZXhwb3J0IGNvbnN0IHdhaXRGb3JEZXZpY2VSZWFkeSAgID0gQ0RQLndhaXRGb3JEZXZpY2VSZWFkeTtcclxuZXhwb3J0IGNvbnN0IHNldEJhY2tCdXR0b25IYW5kbGVyID0gQ0RQLnNldEJhY2tCdXR0b25IYW5kbGVyO1xyXG4iLCJleHBvcnQgKiBmcm9tIFwiLi9jb3JlL2NvcmVcIjtcclxuZXhwb3J0ICogZnJvbSBcIi4vY29yZS9wcm9taXNlXCI7XHJcbmV4cG9ydCAqIGZyb20gXCIuL2NvcmUvaTE4blwiO1xyXG5leHBvcnQgKiBmcm9tIFwiLi9jb3JlL2ZyYW1ld29yay5qcW1cIjtcclxuIiwiaW1wb3J0IF9mcmFtZXdvcmsgPSByZXF1aXJlKFwiY2RwLmZyYW1ld29yay5qcW1cIik7XHJcblxyXG4vLyBAbW9kdWxlIFBsYXRmb3JtXHJcbmV4cG9ydCBjb25zdCBQbGF0Zm9ybSA9IF9mcmFtZXdvcmsuUGxhdGZvcm07XHJcblxyXG4vLyBGcmFtZXdvcmsgbWV0aG9kc1xyXG5leHBvcnQgY29uc3QgZ2V0T3JpZW50YXRpb24gICAgICAgICAgICAgICAgID0gX2ZyYW1ld29yay5nZXRPcmllbnRhdGlvbjtcclxuZXhwb3J0IGNvbnN0IHRvVXJsICAgICAgICAgICAgICAgICAgICAgICAgICA9IF9mcmFtZXdvcmsudG9Vcmw7XHJcbmV4cG9ydCBjb25zdCBzZXRCZWZvcmVSb3V0ZUNoYW5nZUhhbmRsZXIgICAgPSBfZnJhbWV3b3JrLnNldEJlZm9yZVJvdXRlQ2hhbmdlSGFuZGxlcjtcclxuXHJcbi8vIEBjbGFzcyBSb3V0ZXJcclxuZXhwb3J0IHR5cGUgIFJvdXRlciA9IENEUC5GcmFtZXdvcmsuUm91dGVyO1xyXG5leHBvcnQgY29uc3QgUm91dGVyID0gX2ZyYW1ld29yay5Sb3V0ZXI7XHJcblxyXG4vLyBGcmFtZXdvcmsgQ29yZSBBUElzXHJcbmV4cG9ydCBjb25zdCBpbml0aWFsaXplICAgICAgICAgICAgICAgICAgICAgICAgICAgICA9IF9mcmFtZXdvcmsuaW5pdGlhbGl6ZTtcclxuZXhwb3J0IGNvbnN0IGlzSW5pdGlhbGl6ZWQgICAgICAgICAgICAgICAgICAgICAgICAgID0gX2ZyYW1ld29yay5pc0luaXRpYWxpemVkO1xyXG5leHBvcnQgY29uc3Qgd2FpdEZvckluaXRpYWxpemUgICAgICAgICAgICAgICAgICAgICAgPSBfZnJhbWV3b3JrLndhaXRGb3JJbml0aWFsaXplO1xyXG5leHBvcnQgY29uc3QgcmVnaXN0ZXJPcmllbnRhdGlvbkNoYW5nZWRMaXN0ZW5lciAgICAgPSBfZnJhbWV3b3JrLnJlZ2lzdGVyT3JpZW50YXRpb25DaGFuZ2VkTGlzdGVuZXI7XHJcbmV4cG9ydCBjb25zdCB1bnJlZ2lzdGVyT3JpZW50YXRpb25DaGFuZ2VkTGlzdGVuZXIgICA9IF9mcmFtZXdvcmsudW5yZWdpc3Rlck9yaWVudGF0aW9uQ2hhbmdlZExpc3RlbmVyO1xyXG5leHBvcnQgY29uc3QgZ2V0RGVmYXVsdENsaWNrRXZlbnQgICAgICAgICAgICAgICAgICAgPSBfZnJhbWV3b3JrLmdldERlZmF1bHRDbGlja0V2ZW50O1xyXG5leHBvcnQgY29uc3QgcmVnaXN0ZXJQYWdlICAgICAgICAgICAgICAgICAgICAgICAgICAgPSBfZnJhbWV3b3JrLnJlZ2lzdGVyUGFnZTtcclxuZXhwb3J0IGNvbnN0IGNvbnN0cnVjdFBhZ2VzICAgICAgICAgICAgICAgICAgICAgICAgID0gX2ZyYW1ld29yay5jb25zdHJ1Y3RQYWdlcztcclxuZXhwb3J0IGNvbnN0IGRpc3Bvc2VQYWdlcyAgICAgICAgICAgICAgICAgICAgICAgICAgID0gX2ZyYW1ld29yay5kaXNwb3NlUGFnZXM7XHJcbmV4cG9ydCBjb25zdCBzZXRCYWNrQnV0dG9uSGFuZGxlciAgICAgICAgICAgICAgICAgICA9IENEUC5zZXRCYWNrQnV0dG9uSGFuZGxlcjtcclxuXHJcbi8vIEBjbGFzcyBQYWdlXHJcbmV4cG9ydCB0eXBlICBQYWdlID0gQ0RQLkZyYW1ld29yay5QYWdlO1xyXG5leHBvcnQgY29uc3QgUGFnZSA9IF9mcmFtZXdvcmsuUGFnZTtcclxuXHJcbi8vIGludGVyZmFjZXNcclxuZXhwb3J0IHR5cGUgIE1vZGVsICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA9IENEUC5GcmFtZXdvcmsuTW9kZWw7XHJcbmV4cG9ydCBjb25zdCBNb2RlbCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPSBfZnJhbWV3b3JrLk1vZGVsO1xyXG5leHBvcnQgdHlwZSAgQ29sbGVjdGlvbjxUTW9kZWwgZXh0ZW5kcyBNb2RlbD4gICAgICAgICAgID0gQ0RQLkZyYW1ld29yay5Db2xsZWN0aW9uPFRNb2RlbD47XHJcbmV4cG9ydCBjb25zdCBDb2xsZWN0aW9uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPSBfZnJhbWV3b3JrLkNvbGxlY3Rpb247XHJcbmV4cG9ydCB0eXBlICBWaWV3PFRNb2RlbCBleHRlbmRzIE1vZGVsID0gTW9kZWw+ICAgICAgICAgPSBDRFAuRnJhbWV3b3JrLlZpZXc8VE1vZGVsPjtcclxuZXhwb3J0IGNvbnN0IFZpZXcgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA9IF9mcmFtZXdvcmsuVmlldztcclxuZXhwb3J0IHR5cGUgIEV2ZW50cyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA9IENEUC5GcmFtZXdvcmsuRXZlbnRzO1xyXG5leHBvcnQgY29uc3QgRXZlbnRzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID0gX2ZyYW1ld29yay5FdmVudHM7XHJcbmV4cG9ydCB0eXBlICBNb2RlbFNldE9wdGlvbnMgICAgICAgICAgICAgICAgICAgICAgICAgICAgPSBDRFAuRnJhbWV3b3JrLk1vZGVsU2V0T3B0aW9ucztcclxuZXhwb3J0IHR5cGUgIE1vZGVsRmV0Y2hPcHRpb25zICAgICAgICAgICAgICAgICAgICAgICAgICA9IENEUC5GcmFtZXdvcmsuTW9kZWxGZXRjaE9wdGlvbnM7XHJcbmV4cG9ydCB0eXBlICBNb2RlbFNhdmVPcHRpb25zICAgICAgICAgICAgICAgICAgICAgICAgICAgPSBDRFAuRnJhbWV3b3JrLk1vZGVsU2F2ZU9wdGlvbnM7XHJcbmV4cG9ydCB0eXBlICBNb2RlbERlc3Ryb3lPcHRpb25zICAgICAgICAgICAgICAgICAgICAgICAgPSBDRFAuRnJhbWV3b3JrLk1vZGVsRGVzdHJveU9wdGlvbnM7XHJcbmV4cG9ydCB0eXBlICBWaWV3T3B0aW9uczxUTW9kZWwgZXh0ZW5kcyBNb2RlbCA9IE1vZGVsPiAgPSBDRFAuRnJhbWV3b3JrLlZpZXdPcHRpb25zPFRNb2RlbD47XHJcbmV4cG9ydCB0eXBlICBPcmllbnRhdGlvbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPSBDRFAuRnJhbWV3b3JrLk9yaWVudGF0aW9uO1xyXG5leHBvcnQgY29uc3QgT3JpZW50YXRpb24gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID0gX2ZyYW1ld29yay5PcmllbnRhdGlvbjtcclxuZXhwb3J0IHR5cGUgIFBhZ2VUcmFuc2l0aW9uRGlyZWN0aW9uICAgICAgICAgICAgICAgICAgICA9IENEUC5GcmFtZXdvcmsuUGFnZVRyYW5zaXRpb25EaXJlY3Rpb247XHJcbmV4cG9ydCB0eXBlICBJbnRlbnQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPSBDRFAuRnJhbWV3b3JrLkludGVudDtcclxuZXhwb3J0IHR5cGUgIFBhZ2VTdGFjayAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA9IENEUC5GcmFtZXdvcmsuUGFnZVN0YWNrO1xyXG5leHBvcnQgdHlwZSAgU3ViRmxvd1BhcmFtICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID0gQ0RQLkZyYW1ld29yay5TdWJGbG93UGFyYW07XHJcbmV4cG9ydCB0eXBlICBSb3V0ZXJPcHRpb25zICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPSBDRFAuRnJhbWV3b3JrLlJvdXRlck9wdGlvbnM7XHJcbmV4cG9ydCB0eXBlICBOYXZpZ2F0ZU9wdGlvbnMgICAgICAgICAgICAgICAgICAgICAgICAgICAgPSBDRFAuRnJhbWV3b3JrLk5hdmlnYXRlT3B0aW9ucztcclxuZXhwb3J0IHR5cGUgIElPcmllbnRhdGlvbkNoYW5nZWRMaXN0ZW5lciAgICAgICAgICAgICAgICA9IENEUC5GcmFtZXdvcmsuSU9yaWVudGF0aW9uQ2hhbmdlZExpc3RlbmVyO1xyXG5leHBvcnQgdHlwZSAgSUJhY2tCdXR0b25FdmVudExpc3RlbmVyICAgICAgICAgICAgICAgICAgID0gQ0RQLkZyYW1ld29yay5JQmFja0J1dHRvbkV2ZW50TGlzdGVuZXI7XHJcbmV4cG9ydCB0eXBlICBJQ29tbWFuZExpc3RlbmVyICAgICAgICAgICAgICAgICAgICAgICAgICAgPSBDRFAuRnJhbWV3b3JrLklDb21tYW5kTGlzdGVuZXI7XHJcbmV4cG9ydCB0eXBlICBQYWdlQ29uc3RydWN0T3B0aW9ucyAgICAgICAgICAgICAgICAgICAgICAgPSBDRFAuRnJhbWV3b3JrLlBhZ2VDb25zdHJ1Y3RPcHRpb25zO1xyXG5leHBvcnQgdHlwZSAgSVBhZ2UgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID0gQ0RQLkZyYW1ld29yay5JUGFnZTtcclxuZXhwb3J0IHR5cGUgIFNob3dFdmVudERhdGEgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA9IENEUC5GcmFtZXdvcmsuU2hvd0V2ZW50RGF0YTtcclxuZXhwb3J0IHR5cGUgIEhpZGVFdmVudERhdGEgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA9IENEUC5GcmFtZXdvcmsuSGlkZUV2ZW50RGF0YTtcclxuZXhwb3J0IHR5cGUgIEZyYW1ld29ya09wdGlvbnMgICAgICAgICAgICAgICAgICAgICAgICAgICA9IENEUC5GcmFtZXdvcmsuRnJhbWV3b3JrT3B0aW9ucztcclxuIiwiaW1wb3J0ICogYXMgX2Vycm9ycyBmcm9tIFwiLi9jb3JlL2NvcmVcIjtcclxuZXhwb3J0ICogZnJvbSBcIi4vY29yZS9wcm9taXNlXCI7XHJcbmV4cG9ydCAqIGZyb20gXCIuL2ZyYW1ld29yay9qcW1cIjtcclxuXHJcbi8vIGNvcmUgZXJyb3IgdXRpbHNcclxuZXhwb3J0IHR5cGUgIEVycm9ySW5mbyAgICAgICAgICAgICAgICAgID0gX2Vycm9ycy5FcnJvckluZm87XHJcbmV4cG9ydCBjb25zdCBtYWtlRXJyb3JJbmZvICAgICAgICAgICAgICA9IF9lcnJvcnMubWFrZUVycm9ySW5mbztcclxuZXhwb3J0IGNvbnN0IGlzQ2FuY2VsZWRFcnJvciAgICAgICAgICAgID0gX2Vycm9ycy5pc0NhbmNlbGVkRXJyb3I7XHJcbmV4cG9ydCB0eXBlICBSRVNVTFRfQ09ERSAgICAgICAgICAgICAgICA9IF9lcnJvcnMuUkVTVUxUX0NPREU7XHJcbmV4cG9ydCBjb25zdCBSRVNVTFRfQ09ERSAgICAgICAgICAgICAgICA9IF9lcnJvcnMuUkVTVUxUX0NPREU7XHJcbmV4cG9ydCBjb25zdCBERUNMQVJFX0VSUk9SX0NPREUgICAgICAgICA9IF9lcnJvcnMuREVDTEFSRV9FUlJPUl9DT0RFO1xyXG5leHBvcnQgY29uc3QgQVNTSUdOX1JFU1VMVF9DT0RFICAgICAgICAgPSBfZXJyb3JzLkFTU0lHTl9SRVNVTFRfQ09ERTtcclxuZXhwb3J0IGNvbnN0IE1PRFVMRV9SRVNVTFRfQ09ERV9SQU5HRSAgID0gX2Vycm9ycy5NT0RVTEVfUkVTVUxUX0NPREVfUkFOR0U7XHJcbmV4cG9ydCB0eXBlICBSRVNVTFRfQ09ERV9CQVNFICAgICAgICAgICA9IF9lcnJvcnMuUkVTVUxUX0NPREVfQkFTRTtcclxuZXhwb3J0IGNvbnN0IFJFU1VMVF9DT0RFX0JBU0UgICAgICAgICAgID0gX2Vycm9ycy5SRVNVTFRfQ09ERV9CQVNFO1xyXG5leHBvcnQgY29uc3QgQVNTSUdOX1JFU1VMVF9DT0RFX0JBU0UgICAgPSBfZXJyb3JzLkFTU0lHTl9SRVNVTFRfQ09ERV9CQVNFO1xyXG4iLCJpbXBvcnQgX3Rvb2xzID0gcmVxdWlyZShcImNkcC50b29sc1wiKTtcclxuXHJcbi8vIEBtb2R1bGUgQmxvYlxyXG5leHBvcnQgbW9kdWxlIEJsb2Ige1xyXG4gICAgLy8gQmxvYiBtZXRob2RzXHJcbiAgICBleHBvcnQgY29uc3QgYXJyYXlCdWZmZXJUb0Jsb2IgICAgICA9IF90b29scy5CbG9iLmFycmF5QnVmZmVyVG9CbG9iO1xyXG4gICAgZXhwb3J0IGNvbnN0IGJhc2U2NFRvQmxvYiAgICAgICAgICAgPSBfdG9vbHMuQmxvYi5iYXNlNjRUb0Jsb2I7XHJcbiAgICBleHBvcnQgY29uc3QgYmFzZTY0VG9BcnJheUJ1ZmZlciAgICA9IF90b29scy5CbG9iLmJhc2U2NFRvQXJyYXlCdWZmZXI7XHJcbiAgICBleHBvcnQgY29uc3QgYmFzZTY0VG9VaW50OEFycmF5ICAgICA9IF90b29scy5CbG9iLmJhc2U2NFRvVWludDhBcnJheTtcclxuICAgIGV4cG9ydCBjb25zdCBhcnJheUJ1ZmZlclRvQmFzZTY0ICAgID0gX3Rvb2xzLkJsb2IuYXJyYXlCdWZmZXJUb0Jhc2U2NDtcclxuICAgIGV4cG9ydCBjb25zdCB1aW50OEFycmF5VG9CYXNlNjQgICAgID0gX3Rvb2xzLkJsb2IudWludDhBcnJheVRvQmFzZTY0O1xyXG4gICAgLy8gQmxvYiBzdHVmZlxyXG4gICAgZXhwb3J0IGNvbnN0IFVSTCA9IF90b29scy5CbG9iLlVSTDtcclxufVxyXG5cclxuLy8gQGNsYXNzIERhdGVUaW1lXHJcbmV4cG9ydCB0eXBlICBEYXRlVGltZSA9IENEUC5Ub29scy5EYXRlVGltZTtcclxuZXhwb3J0IGNvbnN0IERhdGVUaW1lID0gX3Rvb2xzLkRhdGVUaW1lO1xyXG5cclxuLy8gVG9vbHMgQVBJc1xyXG5leHBvcnQgY29uc3QgYWJzICAgICAgICAgICAgICAgICAgICA9IF90b29scy5hYnM7XHJcbmV4cG9ydCBjb25zdCBtYXggICAgICAgICAgICAgICAgICAgID0gX3Rvb2xzLm1heDtcclxuZXhwb3J0IGNvbnN0IG1pbiAgICAgICAgICAgICAgICAgICAgPSBfdG9vbHMubWluO1xyXG5leHBvcnQgY29uc3QgdG9aZXJvUGFkZGluZyAgICAgICAgICA9IF90b29scy50b1plcm9QYWRkaW5nO1xyXG5leHBvcnQgY29uc3QgaW5oZXJpdCAgICAgICAgICAgICAgICA9IF90b29scy5pbmhlcml0O1xyXG5leHBvcnQgY29uc3QgbWl4aW4gICAgICAgICAgICAgICAgICA9IF90b29scy5taXhpbjtcclxuZXhwb3J0IGNvbnN0IGV4dGVuZCAgICAgICAgICAgICAgICAgPSBfdG9vbHMuZXh0ZW5kO1xyXG5leHBvcnQgY29uc3QgZ2V0RGV2aWNlUGl4Y2VsUmF0aW8gICA9IF90b29scy5nZXREZXZpY2VQaXhjZWxSYXRpbztcclxuXHJcbi8vIEBjbGFzcyBUZW1wbGF0ZVxyXG5leHBvcnQgdHlwZSAgVGVtcGxhdGUgPSBDRFAuVG9vbHMuVGVtcGxhdGU7XHJcbmV4cG9ydCBjb25zdCBUZW1wbGF0ZSA9IF90b29scy5UZW1wbGF0ZTtcclxuXHJcbi8vIGludGVyZmFjZXNcclxuZXhwb3J0IHR5cGUgSlNUID0gQ0RQLlRvb2xzLkpTVDtcclxuIiwiZXhwb3J0ICogZnJvbSBcIi4vdG9vbHMvdG9vbHNcIjtcclxuIiwiaW1wb3J0IF91aSA9IHJlcXVpcmUoXCJjZHAudWkubGlzdHZpZXdcIik7XHJcblxyXG4vLyBnbG9iYWwgY29uZmlnXHJcbmV4cG9ydCBjb25zdCBMaXN0Vmlld0dsb2JhbENvbmZpZyA9IF91aS5MaXN0Vmlld0dsb2JhbENvbmZpZztcclxuXHJcbi8vIEBjbGFzcyBMaW5lUHJvZmlsZVxyXG5leHBvcnQgdHlwZSAgTGluZVByb2ZpbGUgPSBDRFAuVUkuTGluZVByb2ZpbGU7XHJcbmV4cG9ydCBjb25zdCBMaW5lUHJvZmlsZSA9IF91aS5MaW5lUHJvZmlsZTtcclxuXHJcbi8vIEBjbGFzcyBHcm91cFByb2ZpbGVcclxuZXhwb3J0IHR5cGUgR3JvdXBQcm9maWxlID0gQ0RQLlVJLkdyb3VwUHJvZmlsZTtcclxuZXhwb3J0IGNvbnN0ICBHcm91cFByb2ZpbGUgPSBfdWkuR3JvdXBQcm9maWxlO1xyXG5cclxuLy8gTGlzdFZpZXcgQVBJc1xyXG5leHBvcnQgY29uc3QgY29tcG9zZVZpZXdzID0gX3VpLmNvbXBvc2VWaWV3cztcclxuZXhwb3J0IGNvbnN0IGRlcml2ZVZpZXdzICA9IF91aS5kZXJpdmVWaWV3cztcclxuZXhwb3J0IGNvbnN0IG1peGluVmlld3MgICA9IF91aS5taXhpblZpZXdzO1xyXG5cclxuLy8gQGNsYXNzIFN0YXR1c01hbmFnZXJcclxuZXhwb3J0IHR5cGUgIFN0YXR1c01hbmFnZXIgPSBDRFAuVUkuU3RhdHVzTWFuYWdlcjtcclxuZXhwb3J0IGNvbnN0IFN0YXR1c01hbmFnZXIgPSBfdWkuU3RhdHVzTWFuYWdlcjtcclxuXHJcbi8vIEBjbGFzcyBQYWdlUHJvZmlsZVxyXG5leHBvcnQgdHlwZSAgUGFnZVByb2ZpbGUgPSBDRFAuVUkuUGFnZVByb2ZpbGU7XHJcbmV4cG9ydCBjb25zdCBQYWdlUHJvZmlsZSA9IF91aS5QYWdlUHJvZmlsZTtcclxuXHJcbi8vIEBjbGFzcyBTY3JvbGxlckVsZW1lbnRcclxuZXhwb3J0IHR5cGUgIFNjcm9sbGVyRWxlbWVudCA9IENEUC5VSS5TY3JvbGxlckVsZW1lbnQ7XHJcbmV4cG9ydCBjb25zdCBTY3JvbGxlckVsZW1lbnQgPSBfdWkuU2Nyb2xsZXJFbGVtZW50O1xyXG5cclxuLy8gQGNsYXNzIFNjcm9sbGVyTmF0aXZlXHJcbmV4cG9ydCBjb25zdCBTY3JvbGxlck5hdGl2ZSA9IF91aS5TY3JvbGxlck5hdGl2ZTtcclxuXHJcbi8vIEBjbGFzcyBTY3JvbGxlcklTY3JvbGxcclxuZXhwb3J0IHR5cGUgIFNjcm9sbGVySVNjcm9sbCA9IENEUC5VSS5TY3JvbGxlcklTY3JvbGw7XHJcbmV4cG9ydCBjb25zdCBTY3JvbGxlcklTY3JvbGwgPSBfdWkuU2Nyb2xsZXJJU2Nyb2xsO1xyXG5cclxuLy8gQGNsYXNzIExpc3RJdGVtVmlld1xyXG5leHBvcnQgdHlwZSBMaXN0SXRlbVZpZXc8VE1vZGVsIGV4dGVuZHMgQmFja2JvbmUuTW9kZWwgPSBCYWNrYm9uZS5Nb2RlbD4gPSBDRFAuVUkuTGlzdEl0ZW1WaWV3PFRNb2RlbD47XHJcbmV4cG9ydCBjb25zdCBMaXN0SXRlbVZpZXcgPSBfdWkuTGlzdEl0ZW1WaWV3O1xyXG5cclxuLy8gQGNsYXNzIFNjcm9sbE1hbmFnZXJcclxuZXhwb3J0IHR5cGUgIFNjcm9sbE1hbmFnZXIgPSBDRFAuVUkuU2Nyb2xsTWFuYWdlcjtcclxuZXhwb3J0IGNvbnN0IFNjcm9sbE1hbmFnZXIgPSBfdWkuU2Nyb2xsTWFuYWdlcjtcclxuXHJcbi8vIEBjbGFzcyBMaXN0Vmlld1xyXG5leHBvcnQgdHlwZSBMaXN0VmlldzxUTW9kZWwgZXh0ZW5kcyBCYWNrYm9uZS5Nb2RlbCA9IEJhY2tib25lLk1vZGVsPiA9IENEUC5VSS5MaXN0VmlldzxUTW9kZWw+O1xyXG5leHBvcnQgY29uc3QgTGlzdFZpZXcgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID0gX3VpLkxpc3RWaWV3O1xyXG5cclxuLy8gQGNsYXNzIEdyb3VwTGlzdEl0ZW1WaWV3XHJcbmV4cG9ydCB0eXBlIEdyb3VwTGlzdEl0ZW1WaWV3PFRNb2RlbCBleHRlbmRzIEJhY2tib25lLk1vZGVsID0gQmFja2JvbmUuTW9kZWw+ID0gQ0RQLlVJLkdyb3VwTGlzdEl0ZW1WaWV3PFRNb2RlbD47XHJcbmV4cG9ydCBjb25zdCBHcm91cExpc3RJdGVtVmlldyA9IF91aS5Hcm91cExpc3RJdGVtVmlldztcclxuXHJcbi8vIEBjbGFzcyBFeHBhbmRNYW5hZ2VyXHJcbmV4cG9ydCB0eXBlICBFeHBhbmRNYW5hZ2VyID0gQ0RQLlVJLkV4cGFuZE1hbmFnZXI7XHJcbmV4cG9ydCBjb25zdCBFeHBhbmRNYW5hZ2VyID0gX3VpLkV4cGFuZE1hbmFnZXI7XHJcblxyXG4vLyBAY2xhc3MgRXhwYW5kYWJsZUxpc3RWaWV3XHJcbmV4cG9ydCB0eXBlIEV4cGFuZGFibGVMaXN0VmlldzxUTW9kZWwgZXh0ZW5kcyBCYWNrYm9uZS5Nb2RlbCA9IEJhY2tib25lLk1vZGVsPiA9IENEUC5VSS5FeHBhbmRhYmxlTGlzdFZpZXc8VE1vZGVsPjtcclxuZXhwb3J0IGNvbnN0IEV4cGFuZGFibGVMaXN0VmlldyA9IF91aS5FeHBhbmRhYmxlTGlzdFZpZXc7XHJcblxyXG4vLyBpbnRlcmZhY2VzXHJcbmV4cG9ydCB0eXBlIExpc3RWaWV3T3B0aW9ucyAgICAgICAgID0gQ0RQLlVJLkxpc3RWaWV3T3B0aW9ucztcclxuZXhwb3J0IHR5cGUgSUxpc3RWaWV3RnJhbWV3b3JrICAgICAgPSBDRFAuVUkuSUxpc3RWaWV3RnJhbWV3b3JrO1xyXG5leHBvcnQgdHlwZSBJU2Nyb2xsZXIgICAgICAgICAgICAgICA9IENEUC5VSS5JU2Nyb2xsZXI7XHJcbmV4cG9ydCB0eXBlIElTY3JvbGxhYmxlICAgICAgICAgICAgID0gQ0RQLlVJLklTY3JvbGxhYmxlO1xyXG5leHBvcnQgdHlwZSBJQmFja3VwUmVzdG9yZSAgICAgICAgICA9IENEUC5VSS5JQmFja3VwUmVzdG9yZTtcclxuZXhwb3J0IHR5cGUgVmlld0NvbnN0cnVjdG9yICAgICAgICAgPSBDRFAuVUkuVmlld0NvbnN0cnVjdG9yO1xyXG5leHBvcnQgdHlwZSBJQ29tcG9zYWJsZVZpZXcgICAgICAgICA9IENEUC5VSS5JQ29tcG9zYWJsZVZpZXc7XHJcbmV4cG9ydCB0eXBlIElDb21wb3NhYmxlVmlld1N0YXRpYyAgID0gQ0RQLlVJLklDb21wb3NhYmxlVmlld1N0YXRpYztcclxuZXhwb3J0IHR5cGUgVXBkYXRlSGVpZ2h0T3B0aW9ucyAgICAgPSBDRFAuVUkuVXBkYXRlSGVpZ2h0T3B0aW9ucztcclxuZXhwb3J0IHR5cGUgSUxpc3RJdGVtVmlldyAgICAgICAgICAgPSBDRFAuVUkuSUxpc3RJdGVtVmlldztcclxuZXhwb3J0IHR5cGUgQmFzZUxpc3RJdGVtVmlldyAgICAgICAgPSBDRFAuVUkuQmFzZUxpc3RJdGVtVmlldztcclxuZXhwb3J0IHR5cGUgRW5zdXJlVmlzaWJsZU9wdGlvbnMgICAgPSBDRFAuVUkuRW5zdXJlVmlzaWJsZU9wdGlvbnM7XHJcbmV4cG9ydCB0eXBlIElMaXN0VmlldyAgICAgICAgICAgICAgID0gQ0RQLlVJLklMaXN0VmlldztcclxuZXhwb3J0IHR5cGUgQmFzZUxpc3RWaWV3ICAgICAgICAgICAgPSBDRFAuVUkuQmFzZUxpc3RWaWV3O1xyXG5leHBvcnQgdHlwZSBJU3RhdHVzTWFuYWdlciAgICAgICAgICA9IENEUC5VSS5JU3RhdHVzTWFuYWdlcjtcclxuZXhwb3J0IHR5cGUgSUV4cGFuZE1hbmFnZXIgICAgICAgICAgPSBDRFAuVUkuSUV4cGFuZE1hbmFnZXI7XHJcbmV4cG9ydCB0eXBlIElFeHBhbmRhYmxlTGlzdFZpZXcgICAgID0gQ0RQLlVJLklFeHBhbmRhYmxlTGlzdFZpZXc7XHJcbmV4cG9ydCB0eXBlIEJhc2VFeHBhbmRhYmxlTGlzdFZpZXcgID0gQ0RQLlVJLkJhc2VFeHBhbmRhYmxlTGlzdFZpZXc7XHJcbmV4cG9ydCB0eXBlIExpc3RJdGVtVmlld09wdGlvbnM8VE1vZGVsIGV4dGVuZHMgQmFja2JvbmUuTW9kZWwgPSBCYWNrYm9uZS5Nb2RlbD4gICAgICA9IENEUC5VSS5MaXN0SXRlbVZpZXdPcHRpb25zPFRNb2RlbD47XHJcbmV4cG9ydCB0eXBlIExpc3RWaWV3Q29uc3RydWN0T3B0aW9uczxUTW9kZWwgZXh0ZW5kcyBCYWNrYm9uZS5Nb2RlbCA9IEJhY2tib25lLk1vZGVsPiA9IENEUC5VSS5MaXN0Vmlld0NvbnN0cnVjdE9wdGlvbnM8VE1vZGVsPjtcclxuZXhwb3J0IHR5cGUgR3JvdXBMaXN0SXRlbVZpZXdPcHRpb25zPFRNb2RlbCBleHRlbmRzIEJhY2tib25lLk1vZGVsID0gQmFja2JvbmUuTW9kZWw+ID0gQ0RQLlVJLkdyb3VwTGlzdEl0ZW1WaWV3T3B0aW9uczxUTW9kZWw+O1xyXG4iLCJpbXBvcnQgX3VpID0gcmVxdWlyZShcImNkcC51aS5qcW1cIik7XHJcblxyXG4vLyBAY2xhc3MgVGhlbWVcclxuZXhwb3J0IHR5cGUgIFRoZW1lICAgPSBDRFAuVUkuVGhlbWU7XHJcbmV4cG9ydCBjb25zdCBUaGVtZSAgID0gX3VpLlRoZW1lO1xyXG5cclxuZXhwb3J0IHR5cGUgUGxhdGZvcm1UcmFuc2l0aW9uICA9IENEUC5VSS5QbGF0Zm9ybVRyYW5zaXRpb247XHJcbmV4cG9ydCB0eXBlIFRyYW5zaXRpb25NYXAgICAgICAgPSBDRFAuVUkuVHJhbnNpdGlvbk1hcDtcclxuZXhwb3J0IHR5cGUgVGhlbWVJbml0T3B0aW9ucyAgICA9IENEUC5VSS5UaGVtZUluaXRPcHRpb25zO1xyXG5cclxuLy8gQGNsYXNzIEV4dGVuc2lvbk1hbmFnZXJcclxuZXhwb3J0IHR5cGUgIEV4dGVuc2lvbk1hbmFnZXIgICAgPSBDRFAuVUkuRXh0ZW5zaW9uTWFuYWdlcjtcclxuZXhwb3J0IGNvbnN0IEV4dGVuc2lvbk1hbmFnZXIgICAgPSBfdWkuRXh0ZW5zaW9uTWFuYWdlcjtcclxuXHJcbmV4cG9ydCB0eXBlIERvbUV4dGVuc2lvbk9wdGlvbnMgPSBDRFAuVUkuRG9tRXh0ZW5zaW9uT3B0aW9ucztcclxuZXhwb3J0IHR5cGUgRG9tRXh0ZW5zaW9uICAgICAgICA9IENEUC5VSS5Eb21FeHRlbnNpb247XHJcblxyXG4vLyBAbW9kdWxlIFRvYXN0XHJcbmV4cG9ydCBtb2R1bGUgVG9hc3Qge1xyXG4gICAgLy8gVG9hc3Qgc3R1ZmZcclxuICAgIGV4cG9ydCBjb25zdCBMRU5HVEhfU0hPUlQgICAgICAgICA9IF91aS5Ub2FzdC5MRU5HVEhfU0hPUlQ7XHJcbiAgICBleHBvcnQgY29uc3QgTEVOR1RIX0xPTkcgICAgICAgICAgPSBfdWkuVG9hc3QuTEVOR1RIX0xPTkc7XHJcbiAgICBleHBvcnQgY29uc3QgU3R5bGVCdWlsZGVyRGVmYXVsdCAgPSBfdWkuVG9hc3QuU3R5bGVCdWlsZGVyRGVmYXVsdDtcclxuICAgIGV4cG9ydCBjb25zdCBzaG93ICAgICAgICAgICAgICAgICA9IF91aS5Ub2FzdC5zaG93O1xyXG4gICAgLy8gaW50ZXJmYWNlc1xyXG4gICAgZXhwb3J0IHR5cGUgT2Zmc2V0WCAgICAgICAgICAgICA9IENEUC5VSS5Ub2FzdC5PZmZzZXRYO1xyXG4gICAgZXhwb3J0IHR5cGUgT2Zmc2V0WSAgICAgICAgICAgICA9IENEUC5VSS5Ub2FzdC5PZmZzZXRZO1xyXG4gICAgZXhwb3J0IHR5cGUgU3R5bGVCdWlsZGVyICAgICAgICA9IENEUC5VSS5Ub2FzdC5TdHlsZUJ1aWxkZXI7XHJcbn1cclxuXHJcbi8vIEBjbGFzcyBEaWFsb2dcclxuZXhwb3J0IHR5cGUgIERpYWxvZyA9IENEUC5VSS5EaWFsb2c7XHJcbmV4cG9ydCBjb25zdCBEaWFsb2cgPSBfdWkuRGlhbG9nO1xyXG5cclxuZXhwb3J0IHR5cGUgRGlhbG9nT3B0aW9ucyA9IENEUC5VSS5EaWFsb2dPcHRpb25zO1xyXG5cclxuLy8gQGZ1bmN0aW9ucyBEaWFsb2dDb21tb25zXHJcbmV4cG9ydCBjb25zdCBhbGVydCAgICA9IF91aS5hbGVydDtcclxuZXhwb3J0IGNvbnN0IGNvbmZpcm0gID0gX3VpLmNvbmZpcm07XHJcbmV4cG9ydCBjb25zdCBwcm9tcHQgICA9IF91aS5wcm9tcHQ7XHJcblxyXG5pbXBvcnQgTW9kZWwgPSBDRFAuRnJhbWV3b3JrLk1vZGVsO1xyXG5cclxuLy8gQGNsYXNzIEJhc2VIZWFkZXJWaWV3XHJcbmV4cG9ydCB0eXBlIEJhc2VIZWFkZXJWaWV3PFRNb2RlbCBleHRlbmRzIE1vZGVsID0gTW9kZWw+ID0gQ0RQLlVJLkJhc2VIZWFkZXJWaWV3PFRNb2RlbD47XHJcbmV4cG9ydCBjb25zdCBCYXNlSGVhZGVyVmlldyA9IF91aS5CYXNlSGVhZGVyVmlldztcclxuXHJcbmV4cG9ydCB0eXBlIEJhc2VIZWFkZXJWaWV3T3B0aW9uczxUTW9kZWwgZXh0ZW5kcyBNb2RlbCA9IE1vZGVsPiA9IENEUC5VSS5CYXNlSGVhZGVyVmlld09wdGlvbnM8VE1vZGVsPjtcclxuXHJcblxyXG4vLyBAY2xhc3MgQmFzZVBhZ2VcclxuZXhwb3J0IHR5cGUgQmFzZVBhZ2U8VE1vZGVsIGV4dGVuZHMgTW9kZWwgPSBNb2RlbD4gPSBDRFAuVUkuQmFzZVBhZ2U8VE1vZGVsPjtcclxuZXhwb3J0IGNvbnN0IEJhc2VQYWdlID0gX3VpLkJhc2VQYWdlO1xyXG5leHBvcnQgdHlwZSBCYXNlUGFnZU9wdGlvbnM8VE1vZGVsIGV4dGVuZHMgTW9kZWwgPSBNb2RlbD4gPSBDRFAuVUkuQmFzZVBhZ2VPcHRpb25zPFRNb2RlbD47XHJcblxyXG4vLyBAY2xhc3MgUGFnZUNvbnRhaW5lclZpZXdcclxuZXhwb3J0IHR5cGUgUGFnZUNvbnRhaW5lclZpZXc8VE1vZGVsIGV4dGVuZHMgTW9kZWwgPSBNb2RlbD4gICAgPSBDRFAuVUkuUGFnZUNvbnRhaW5lclZpZXc8VE1vZGVsPjtcclxuZXhwb3J0IGNvbnN0IFBhZ2VDb250YWluZXJWaWV3ID0gX3VpLlBhZ2VDb250YWluZXJWaWV3O1xyXG5cclxuZXhwb3J0IHR5cGUgUGFnZUNvbnRhaW5lclZpZXdPcHRpb25zPFRNb2RlbCBleHRlbmRzIE1vZGVsID0gTW9kZWw+ID0gQ0RQLlVJLlBhZ2VDb250YWluZXJWaWV3T3B0aW9uczxUTW9kZWw+O1xyXG5cclxuXHJcbi8vIEBjbGFzcyBQYWdlVmlld1xyXG5leHBvcnQgdHlwZSBQYWdlVmlldzxUTW9kZWwgZXh0ZW5kcyBNb2RlbCA9IE1vZGVsPiA9IENEUC5VSS5QYWdlVmlldzxUTW9kZWw+O1xyXG5leHBvcnQgY29uc3QgUGFnZVZpZXcgPSBfdWkuUGFnZVZpZXc7XHJcblxyXG5leHBvcnQgdHlwZSBQYWdlVmlld0NvbnN0cnVjdE9wdGlvbnM8VE1vZGVsIGV4dGVuZHMgTW9kZWwgPSBNb2RlbD4gPSBDRFAuVUkuUGFnZVZpZXdDb25zdHJ1Y3RPcHRpb25zPFRNb2RlbD47XHJcblxyXG4vLyBAY2xhc3MgUGFnZUxpc3RWaWV3XHJcbmV4cG9ydCB0eXBlIFBhZ2VMaXN0VmlldzxUTW9kZWwgZXh0ZW5kcyBNb2RlbCA9IE1vZGVsPiA9IENEUC5VSS5QYWdlTGlzdFZpZXc8VE1vZGVsPjtcclxuZXhwb3J0IGNvbnN0IFBhZ2VMaXN0VmlldyA9IF91aS5QYWdlTGlzdFZpZXc7XHJcblxyXG5leHBvcnQgdHlwZSBQYWdlTGlzdFZpZXdDb25zdHJ1Y3RPcHRpb25zPFRNb2RlbCBleHRlbmRzIE1vZGVsID0gTW9kZWw+ID0gQ0RQLlVJLlBhZ2VMaXN0Vmlld0NvbnN0cnVjdE9wdGlvbnM8VE1vZGVsPjtcclxuXHJcbi8vIEBjbGFzcyBQYWdlRXhwYW5kYWJsZUxpc3RWaWV3XHJcbmV4cG9ydCB0eXBlIFBhZ2VFeHBhbmRhYmxlTGlzdFZpZXc8VE1vZGVsIGV4dGVuZHMgTW9kZWwgPSBNb2RlbD4gICA9IENEUC5VSS5QYWdlRXhwYW5kYWJsZUxpc3RWaWV3PFRNb2RlbD47XHJcbmV4cG9ydCBjb25zdCBQYWdlRXhwYW5kYWJsZUxpc3RWaWV3ID0gX3VpLlBhZ2VFeHBhbmRhYmxlTGlzdFZpZXc7XHJcbiIsImltcG9ydCAqIGFzIF9mcmFtZXdvcmsgZnJvbSBcIi4vZnJhbWV3b3JrL2pxbVwiO1xyXG5pbXBvcnQgKiBhcyBfdG9vbHMgZnJvbSBcIi4vdG9vbHMvdG9vbHNcIjtcclxuZXhwb3J0ICogZnJvbSBcIi4vY29yZS9wcm9taXNlXCI7XHJcbmV4cG9ydCAqIGZyb20gXCIuL3VpL2xpc3R2aWV3XCI7XHJcbmV4cG9ydCAqIGZyb20gXCIuL3VpL2pxbVwiO1xyXG5cclxuLy8gZnJhbWV3b3JrIHVpIHR5cGVzXHJcbmV4cG9ydCB0eXBlIElQYWdlICAgICAgICAgICA9IF9mcmFtZXdvcmsuSVBhZ2U7XHJcbmV4cG9ydCB0eXBlIFBhZ2UgICAgICAgICAgICA9IF9mcmFtZXdvcmsuUGFnZTtcclxuZXhwb3J0IHR5cGUgT3JpZW50YXRpb24gICAgID0gX2ZyYW1ld29yay5PcmllbnRhdGlvbjtcclxuZXhwb3J0IHR5cGUgU2hvd0V2ZW50RGF0YSAgID0gX2ZyYW1ld29yay5TaG93RXZlbnREYXRhO1xyXG5leHBvcnQgdHlwZSBIaWRlRXZlbnREYXRhID0gX2ZyYW1ld29yay5IaWRlRXZlbnREYXRhO1xyXG5cclxuZXhwb3J0IHR5cGUgIFZpZXc8VE1vZGVsIGV4dGVuZHMgX2ZyYW1ld29yay5Nb2RlbCA9IF9mcmFtZXdvcmsuTW9kZWw+ID0gQ0RQLkZyYW1ld29yay5WaWV3PFRNb2RlbD47XHJcbmV4cG9ydCBjb25zdCBWaWV3ID0gX2ZyYW1ld29yay5WaWV3O1xyXG5cclxuLy8gZnJhbWV3b3JrIHVpIHV0aWxzXHJcbmV4cG9ydCBjb25zdCB0b1VybCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA9IF9mcmFtZXdvcmsudG9Vcmw7XHJcbmV4cG9ydCBjb25zdCByZWdpc3RlclBhZ2UgICAgICAgICAgICAgICAgICAgICAgICAgICA9IF9mcmFtZXdvcmsucmVnaXN0ZXJQYWdlO1xyXG5leHBvcnQgY29uc3QgT3JpZW50YXRpb24gICAgICAgICAgICAgICAgICAgICAgICAgICAgPSBfZnJhbWV3b3JrLk9yaWVudGF0aW9uO1xyXG5leHBvcnQgY29uc3QgZ2V0T3JpZW50YXRpb24gICAgICAgICAgICAgICAgICAgICAgICAgPSBfZnJhbWV3b3JrLmdldE9yaWVudGF0aW9uO1xyXG5leHBvcnQgY29uc3QgcmVnaXN0ZXJPcmllbnRhdGlvbkNoYW5nZWRMaXN0ZW5lciAgICAgPSBfZnJhbWV3b3JrLnJlZ2lzdGVyT3JpZW50YXRpb25DaGFuZ2VkTGlzdGVuZXI7XHJcbmV4cG9ydCBjb25zdCB1bnJlZ2lzdGVyT3JpZW50YXRpb25DaGFuZ2VkTGlzdGVuZXIgICA9IF9mcmFtZXdvcmsudW5yZWdpc3Rlck9yaWVudGF0aW9uQ2hhbmdlZExpc3RlbmVyO1xyXG5cclxuLy8gdG9vbHMgdWkgdHlwZXMgJiB1dGlsc1xyXG5leHBvcnQgdHlwZSBKU1QgICAgICAgICAgICAgPSBfdG9vbHMuSlNUO1xyXG5leHBvcnQgY29uc3QgZ2V0VGVtcGxhdGUgICAgPSBfdG9vbHMuVGVtcGxhdGUuZ2V0SlNUO1xyXG4iLCJpbXBvcnQgX2JyaWRnZSA9IHJlcXVpcmUoXCJjZHAubmF0aXZlYnJpZGdlXCIpO1xyXG5cclxuLy8gQGNsYXNzIEdhdGVcclxuZXhwb3J0IHR5cGUgIEdhdGUgPSBDRFAuTmF0aXZlQnJpZGdlLkdhdGU7XHJcbmV4cG9ydCBjb25zdCBHYXRlID0gX2JyaWRnZS5HYXRlO1xyXG5cclxuLy8gaW50ZXJmYWNlc1xyXG5leHBvcnQgdHlwZSBGZWF0dXJlICAgICAgICAgICAgID0gQ0RQLk5hdGl2ZUJyaWRnZS5GZWF0dXJlO1xyXG5leHBvcnQgdHlwZSBDb25zdHJ1Y3RPcHRpb25zICAgID0gQ0RQLk5hdGl2ZUJyaWRnZS5Db25zdHJ1Y3RPcHRpb25zO1xyXG5leHBvcnQgdHlwZSBJUmVzdWx0ICAgICAgICAgICAgID0gQ0RQLk5hdGl2ZUJyaWRnZS5JUmVzdWx0O1xyXG5leHBvcnQgdHlwZSBFeGVjT3B0aW9ucyAgICAgICAgID0gQ0RQLk5hdGl2ZUJyaWRnZS5FeGVjT3B0aW9ucztcclxuIiwiZXhwb3J0ICogZnJvbSBcIi4vYnJpZGdlL25hdGl2ZWJyaWRnZVwiO1xyXG4iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiQHR5cGVzL2NkcC5jb3JlLmQudHNcIiAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiQHR5cGVzL2NkcC5wcm9taXNlLmQudHNcIiAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiQHR5cGVzL2NkcC5uYXRpdmVicmlkZ2UuZC50c1wiIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJAdHlwZXMvY2RwLmkxOG4uZC50c1wiIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJAdHlwZXMvY2RwLmZyYW1ld29yay5qcW0uZC50c1wiIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCJAdHlwZXMvY2RwLnRvb2xzLmQudHNcIiAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiQHR5cGVzL2NkcC51aS5saXN0dmlldy5kLnRzXCIgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIkB0eXBlcy9jZHAudWkuanFtLmQudHNcIiAvPlxyXG4vLy8gPGFtZC1tb2R1bGUgbmFtZT1cImNkcFwiIC8+XHJcblxyXG5leHBvcnQgKiBmcm9tIFwiLi9jZHAvY29yZVwiO1xyXG5cclxuaW1wb3J0ICogYXMgRnJhbWV3b3JrIGZyb20gXCIuL2NkcC9mcmFtZXdvcmtcIjtcclxuaW1wb3J0ICogYXMgVG9vbHMgZnJvbSBcIi4vY2RwL3Rvb2xzXCI7XHJcbmltcG9ydCAqIGFzIFVJIGZyb20gXCIuL2NkcC91aVwiO1xyXG5pbXBvcnQgKiBhcyBOYXRpdmVCcmlkZ2UgZnJvbSBcIi4vY2RwL2JyaWRnZVwiO1xyXG5cclxuZXhwb3J0IHsgRnJhbWV3b3JrLCBUb29scywgVUksIE5hdGl2ZUJyaWRnZSB9O1xyXG5cclxuLy8gc2hvcnQgY3V0IGZvciBpbml0aWFsaXplIG1ldGhvZFxyXG5leHBvcnQgY29uc3QgaW5pdGlhbGl6ZSAgICAgICAgICAgPSBGcmFtZXdvcmsuaW5pdGlhbGl6ZTtcclxuZXhwb3J0IGNvbnN0IGlzSW5pdGlhbGl6ZWQgICAgICAgID0gRnJhbWV3b3JrLmlzSW5pdGlhbGl6ZWQ7XHJcbmV4cG9ydCBjb25zdCB3YWl0Rm9ySW5pdGlhbGl6ZSAgICA9IEZyYW1ld29yay53YWl0Rm9ySW5pdGlhbGl6ZTtcclxuIiwiZGVjbGFyZSBtb2R1bGUgXCJjZHAudG9vbHNcIiB7XHJcbiAgICBjb25zdCBUb29sczogdHlwZW9mIENEUC5Ub29scztcclxuICAgIGV4cG9ydCA9IFRvb2xzO1xyXG59XHJcbiIsImRlY2xhcmUgbW9kdWxlIFwiY2RwLnVpLmpxbVwiIHtcclxuICAgIGNvbnN0IFVJOiB0eXBlb2YgQ0RQLlVJO1xyXG4gICAgZXhwb3J0ID0gVUk7XHJcbn1cclxuIl19