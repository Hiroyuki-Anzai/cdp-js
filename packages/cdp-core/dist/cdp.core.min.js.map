{"version":3,"sources":["dist/cdp.core.js"],"names":["root","factory","define","amd","exports","module","this","self","global","TAG","CDP","Patch","_apply","console","error","_consolePatch","MSApp","_nodePatch","count","groupEnd","time","timeEnd","trace","group","dirxml","debug","groupCollapsed","select","info","profile","assert","msIsIndependentlyComposed","clear","dir","warn","log","profileEnd","originalAppendChild","Node","prototype","appendChild","node","_this","execUnsafeLocalFunction","call","originalInsertBefore","insertBefore","newElement","referenceElement","apply","_webRoot","location","baseUrl","exec","href","_init","options","setTimeout","success","msg","message","fail","Config","initialize","webRoot"],"mappings":";;;;;CAKC,SAAWA,KAAMC,SACd,UAAWC,SAAW,YAAcA,OAAOC,IAAK,CAE5CD,OAAO,WACH,OAAOD,QAAQD,aAEhB,UAAWI,UAAY,SAAU,CAEpCC,OAAOD,QAAUH,QAAQD,UACtB,CAEHC,QAAQD,UAEXM,MAAQ,GAAGC,MAAQC,OAAS,SAAUR,MAEvC,IAAIS,IAAM,SAGV,IAAIC,IAAMV,KAAKU,MAAQV,KAAKU,QAW5B,IAAIC,MAAQ,WACR,SAASA,SAUT,SAASC,SACL,GAAI,MAAQZ,KAAKa,SAAW,MAAQb,KAAKa,QAAQC,MAAO,CACpDC,gBAGJ,UAAWC,QAAU,SAAU,CAC3BC,cAIR,SAASF,gBACLf,KAAKa,SACDK,MAAO,aAEPC,SAAU,aAEVC,KAAM,aAENC,QAAS,aAETC,MAAO,aAEPC,MAAO,aAEPC,OAAQ,aAERC,MAAO,aAEPC,eAAgB,aAEhBC,OAAQ,aAERC,KAAM,aAENC,QAAS,aAETC,OAAQ,aAERC,0BAA2B,aAE3BC,MAAO,aAEPC,IAAK,aAELC,KAAM,aAENpB,MAAO,aAEPqB,IAAK,aAELC,WAAY,cAKpB,SAASnB,aACL,IAAIoB,oBAAsBC,KAAKC,UAAUC,YACzCF,KAAKC,UAAUC,YAAc,SAAUC,MACnC,IAAIC,MAAQpC,KACZ,OAAOU,MAAM2B,wBAAwB,WACjC,OAAON,oBAAoBO,KAAKF,MAAOD,SAI/C,IAAII,qBAAuBP,KAAKC,UAAUO,aAC1CR,KAAKC,UAAUO,aAAe,SAAUC,WAAYC,kBAChD,IAAIN,MAAQpC,KACZ,OAAOU,MAAM2B,wBAAwB,WACjC,OAAOE,qBAAqBD,KAAKF,MAAOK,WAAYC,qBAKhErC,MAAMsC,MAAQrC,OAEd,OAAOD,SAUX,IAAIuC,SAAW,WACX,GAAIlD,KAAKmD,SAAU,CACf,IAAIC,QAAU,oBAAoBC,KAAKrD,KAAKmD,SAASG,MACrD,IAAKF,QAAS,CACVA,QAAU,SAASC,KAAKrD,KAAKmD,SAASG,MAE1C,OAAOF,QAAQ,OAgBvB,SAASG,MAAMC,SACXC,WAAW,WACP,IACI9C,MAAMsC,QACN,GAAIO,gBAAkBA,QAAQE,UAAY,WAAY,CAClDF,QAAQE,WAEd,MAAO5C,OACL,IAAI6C,IAAO7C,OAASA,MAAM8C,QAAW9C,MAAM8C,QAAU,qBACrD/C,QAAQC,MAAML,IAAMkD,KACpB,GAAIH,gBAAkBA,QAAQK,OAAS,WAAY,CAC/CL,QAAQK,KAAK/C,WAM7BJ,IAAIF,OAASR,KACbU,IAAIoD,OAASpD,IAAIoD,QAAU9D,KAAK8D,WAChCpD,IAAIqD,WAAaR,MACjB7C,IAAIsD,QAAUd,SAEd,OAAOxC","sourcesContent":["﻿/*!\n * cdp.core.js 2.0.0\n *\n * Date: 2017-07-14T09:29:55.017Z\n */\n((function (root, factory) {\n    if (typeof define === \"function\" && define.amd) {\n        // AMD\n        define(function () {\n            return factory(root);\n        });\n    } else if (typeof exports === \"object\") {\n        // CommonJS\n        module.exports = factory(root);\n    } else {\n        // Browser globals\n        factory(root);\n    }\n})(((this || 0).self || global), function (root) {\n\n    var TAG = \"[CDP] \";\n\n    // \"CDP\" global exports.\n    var CDP = root.CDP || (root.CDP = {});\n\n    /**\n     * \\~english\n     * @class Patch\n     * @brief This class applies patch codes to 3rd party libraries for they works good with the others.\n     *\n     * \\~japanese\n     * @class Patch\n     * @brief 外部ライブラリに Patch を当てるクラス\n     */\n    var Patch = (function () {\n        function Patch() {\n        }\n\n        /**\n         * \\~english\n         * Apply patch.\n         *\n         * \\~japanese\n         * パッチの適用\n         */\n        function _apply() {\n            if (null == root.console || null == root.console.error) {\n                _consolePatch();\n            }\n\n            if (typeof MSApp === \"object\") {\n                _nodePatch();\n            }\n        }\n\n        function _consolePatch() {\n            root.console = {\n                count: function () {\n                },\n                groupEnd: function () {\n                },\n                time: function () {\n                },\n                timeEnd: function () {\n                },\n                trace: function () {\n                },\n                group: function () {\n                },\n                dirxml: function () {\n                },\n                debug: function () {\n                },\n                groupCollapsed: function () {\n                },\n                select: function () {\n                },\n                info: function () {\n                },\n                profile: function () {\n                },\n                assert: function () {\n                },\n                msIsIndependentlyComposed: function () {\n                },\n                clear: function () {\n                },\n                dir: function () {\n                },\n                warn: function () {\n                },\n                error: function () {\n                },\n                log: function () {\n                },\n                profileEnd: function () {\n                }\n            };\n        }\n\n        function _nodePatch() {\n            var originalAppendChild = Node.prototype.appendChild;\n            Node.prototype.appendChild = function (node) {\n                var _this = this;\n                return MSApp.execUnsafeLocalFunction(function () {\n                    return originalAppendChild.call(_this, node);\n                });\n            };\n\n            var originalInsertBefore = Node.prototype.insertBefore;\n            Node.prototype.insertBefore = function (newElement, referenceElement) {\n                var _this = this;\n                return MSApp.execUnsafeLocalFunction(function () {\n                    return originalInsertBefore.call(_this, newElement, referenceElement);\n                });\n            };\n        }\n\n        Patch.apply = _apply;\n\n        return Patch;\n    })();\n\n    /**\n     * \\~english\n     * Get web root.\n     *\n     * \\~japanese\n     * web root を取得\n     */\n    var _webRoot = (function () {\n        if (root.location) {\n            var baseUrl = /(.+\\/)[^/]*#[^/]+/.exec(root.location.href);\n            if (!baseUrl) {\n                baseUrl = /(.+\\/)/.exec(root.location.href);\n            }\n            return baseUrl[1];\n        }\n    })();\n\n    /**\n     * \\~english\n     * Initialization function of environment.\n     *\n     * @param options {CoreInitOptions} [in] init options.\n     *\n     * \\~japanese\n     * Framework の初期化関数\n     * v1.2.0+ より options のコールバックに変更\n     *\n     * @param options {CoreInitOptions} [in] 初期化オプション.\n     */\n    function _init(options) {\n        setTimeout(function () {\n            try {\n                Patch.apply();\n                if (options && typeof options.success === \"function\") {\n                    options.success();\n                }\n            } catch (error) {\n                var msg = (error && error.message) ? error.message : \"initialize failed.\";\n                console.error(TAG + msg);\n                if (options && typeof options.fail === \"function\") {\n                    options.fail(error);\n                }\n            }\n        });\n    }\n\n    CDP.global = root;\n    CDP.Config = CDP.Config || root.Config || {};\n    CDP.initialize = _init;\n    CDP.webRoot = _webRoot;\n\n    return CDP;\n}));\n"]}