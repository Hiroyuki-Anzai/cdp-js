{"version":3,"sources":["dist/cdp.core.js"],"names":["root","factory","define","amd","CDP","exports","module","this","self","global","TAG","Function","webRoot","location","baseUrl","exec","href","Config","initialize","options","setTimeout","Patch","apply","success","error","errorInfo","makeErrorInfo","RESULT_CODE","ERROR_CDP_INITIALIZE_FAILED","message","console","fail","consolePatch","nodePatch","count","groupEnd","time","timeEnd","trace","group","dirxml","debug","groupCollapsed","select","info","profile","assert","msIsIndependentlyComposed","clear","dir","warn","log","profileEnd","MSApp","_MSApp_1","originalAppendChild_1","Node","prototype","appendChild","node","execUnsafeLocalFunction","call","originalInsertBefore_1","insertBefore","newElement","referenceElement","__assign","Object","assign","t","s","i","n","arguments","length","p","hasOwnProperty","CANCELED_MESSAGE","s_code2message","0","-1","MODULE_RESULT_CODE_RANGE","resultCode","tag","cause","canceled","msg","code","SUCCEEDED","Error","messageFromResultCode","name","buildErrorName","makeCanceledErrorInfo","isCanceledError","RESULT_CODE_BASE","ASSIGN_RESULT_CODE_BASE","DECLARE_ERROR_CODE","baseName","localCode","declareResultCode","resultCodeBase","ASSIGN_RESULT_CODE","FUNCTION_CODE_RANGE","LOCAL_CODE_BASE","CORE","base","moduleCode","prefix"],"mappings":";;;;;CAKC,SAAUA,KAAMC,SAAW,UAAWC,SAAW,YAAcA,OAAOC,IAAK,CAAED,OAAO,WAAc,OAAOD,QAAQD,KAAKI,MAAQJ,KAAKI,gBAAuB,UAAWC,UAAY,SAAU,CAAEC,OAAOD,QAAUJ,QAAQD,KAAKI,MAAQJ,KAAKI,aAAmB,CAAEH,QAAQD,KAAKI,MAAQJ,KAAKI,WAAxR,EAA0SG,MAAQ,GAAGC,MAAQC,OAAS,SAAUL,KAChV,IAAIA,KACJ,SAAWA,KACP,IAAIM,IAAM,SAKVN,IAAIK,OAASE,SAAS,iBAItBP,IAAIQ,QAAU,WACV,GAAIR,IAAIK,OAAOI,SAAU,CACrB,IAAIC,QAAU,oBAAoBC,KAAKX,IAAIK,OAAOI,SAASG,MAC3D,IAAKF,QAAS,CACVA,QAAU,SAASC,KAAKX,IAAIK,OAAOI,SAASG,MAEhD,OAAOF,QAAQ,IANT,GAYdV,IAAIa,OAASb,IAAIa,QAAUb,IAAIK,OAAOQ,WAItC,SAASC,WAAWC,SAChBC,WAAW,WACP,IACIhB,IAAIiB,MAAMC,QACV,GAAIH,gBAAkBA,QAAQI,UAAY,WAAY,CAClDJ,QAAQI,WAGhB,MAAOC,OACH,IAAIC,UAAYrB,IAAIsB,cAActB,IAAIuB,YAAYC,4BAA6BlB,IAAMc,OAASA,MAAMK,QAAWL,MAAMK,QAAU,KAAML,OACrIM,QAAQN,MAAMC,UAAUI,SACxB,GAAIV,gBAAkBA,QAAQY,OAAS,WAAY,CAC/CZ,QAAQY,KAAKP,WAK7BpB,IAAIc,WAAaA,YA3CrB,CA4CGd,MAAQA,SACX,IAAIA,KACJ,SAAWA,KACP,IAAIM,IAAM,eAKV,IAAIW,MAAS,WACT,SAASA,SAOTA,MAAMC,MAAQ,WACVD,MAAMW,eACNX,MAAMY,aAKVZ,MAAMW,aAAe,WACjB,GAAI,MAAQ5B,IAAIK,OAAOqB,SAAW,MAAQ1B,IAAIK,OAAOqB,QAAQN,MAAO,CAChEpB,IAAIK,OAAOqB,SACPI,MAAO,aACPC,SAAU,aACVC,KAAM,aACNC,QAAS,aACTC,MAAO,aACPC,MAAO,aACPC,OAAQ,aACRC,MAAO,aACPC,eAAgB,aAChBC,OAAQ,aACRC,KAAM,aACNC,QAAS,aACTC,OAAQ,aACRC,0BAA2B,aAC3BC,MAAO,aACPC,IAAK,aACLC,KAAM,aACN1B,MAAO,aACP2B,IAAK,aACLC,WAAY,gBAKxB/B,MAAMY,UAAY,WACd,GAAI,kBAAoBoB,MAAO,CAC3B,IAAIC,SAAWD,MACf,IAAIE,sBAAwBC,KAAKC,UAAUC,YAC3CF,KAAKC,UAAUC,YAAc,SAAUC,MACnC,IAAInD,KAAOD,KACX,OAAO+C,SAASM,wBAAwB,WACpC,OAAOL,sBAAsBM,KAAKrD,KAAMmD,SAGhD,IAAIG,uBAAyBN,KAAKC,UAAUM,aAC5CP,KAAKC,UAAUM,aAAe,SAAUC,WAAYC,kBAChD,IAAIzD,KAAOD,KACX,OAAO+C,SAASM,wBAAwB,WACpC,OAAOE,uBAAuBD,KAAKrD,KAAMwD,WAAYC,uBAKrE,OAAO5C,MA7DC,GA+DZjB,IAAIiB,MAAQA,OArEhB,CAsEGjB,MAAQA,SACX,IAAI8D,SAAY3D,MAAQA,KAAK2D,UAAaC,OAAOC,QAAU,SAASC,GAChE,IAAK,IAAIC,EAAGC,EAAI,EAAGC,EAAIC,UAAUC,OAAQH,EAAIC,EAAGD,IAAK,CACjDD,EAAIG,UAAUF,GACd,IAAK,IAAII,KAAKL,EAAG,GAAIH,OAAOV,UAAUmB,eAAef,KAAKS,EAAGK,GACzDN,EAAEM,GAAKL,EAAEK,GAEjB,OAAON,GAEX,IAAIjE,KACJ,SAAWA,KACP,IAAIyE,iBAAmB,QACvB,IAAIC,gBACAC,EAAK,uBACLC,KAAM,qBAQV,IAAIrD,aACJ,SAAWA,aACPA,YAAYA,YAAY,aAAe,GAAK,YAC5CA,YAAYA,YAAY,WAAa,GAAK,UAF9C,CAGGA,YAAcvB,IAAIuB,cAAgBvB,IAAIuB,iBAEzCvB,IAAI6E,yBAA2B,IAU/B,SAASvD,cAAcwD,WAAYC,IAAKtD,QAASuD,OAC7C,IAAIC,SAAYD,OAASP,mBAAqBO,MAAMvD,QAAW,KAAO,MACtE,IAAIyD,IAAMD,SAAWR,iBAAmBhD,QACxC,IAAI0D,KAAOF,SAAW1D,YAAY6D,UAAYN,WAC9C,OAAOhB,YAAa,IAAIuB,MAAMH,KAAOI,sBAAsBH,QACvDI,KAAMC,eAAeL,KAAMJ,KAC3BI,KAAMA,KACNH,MAAOA,QAGfhF,IAAIsB,cAAgBA,cAQpB,SAASmE,sBAAsBT,MAAOD,KAClC,OAAOzD,cAAcC,YAAY6D,UAAWL,IAAKN,iBAAkBO,OAEvEhF,IAAIyF,sBAAwBA,sBAO5B,SAASC,gBAAgBtE,OACrB,IAAIC,UAAYD,MAChB,GAAIC,UAAW,CACX,GAAIE,YAAY6D,YAAc/D,UAAU8D,MAAQV,mBAAqBpD,UAAUI,QAAS,CACpF,OAAO,MAGf,OAAO,MAEXzB,IAAI0F,gBAAkBA,gBAMtB,IAAIC,kBACJ,SAAWA,kBACPA,iBAAiBA,iBAAiB,gCAAkC,GAAK,+BAIzEA,iBAAiBA,iBAAiB,OAAS,IAAM3F,IAAI6E,0BAA4B,OALrF,CAMGc,iBAAmB3F,IAAI2F,mBAAqB3F,IAAI2F,sBACnDC,wBAAwBD,kBAExB,SAASE,mBAAmBC,SAAUC,UAAWtE,SAC7C,OAAOuE,kBAAkBhG,IAAI2F,iBAAiBG,UAAWC,UAAWtE,SAExEzB,IAAI6F,mBAAqBA,mBAIzB,SAASD,wBAAwBK,gBAC7BjG,IAAI2F,iBAAmB7B,YAAa9D,IAAI2F,iBAAkBM,gBAE9DjG,IAAI4F,wBAA0BA,wBAI9B,SAASM,mBAAmBpB,YACxB9E,IAAIuB,YAAcuC,YAAa9D,IAAIuB,YAAauD,YAEpD9E,IAAIkG,mBAAqBA,mBAGzB,IAAIC,oBAAsB,GAK1B,IAAIC,iBACJ,SAAWA,iBACPA,gBAAgBA,gBAAgB,QAAU,GAAK,OAC/CA,gBAAgBA,gBAAgB,SAAW,EAAID,qBAAuB,SAF1E,CAGGC,kBAAoBA,sBAMvB,SAAW7E,aACPA,YAAYA,YAAY,2BAA6B,GAAK,0BAC1DA,YAAYA,YAAY,+BAAiCsE,mBAAmB,MAAOO,gBAAgBC,KAAO,EAAG,wBAA0B,+BAF3I,CAGG9E,YAAcvB,IAAIuB,cAAgBvB,IAAIuB,iBACzCqE,wBAAwBrE,aAWxB,SAASyE,kBAAkBM,KAAMC,WAAY9E,SACzC,GAAI8E,YAAc,GAAKvG,IAAI6E,0BAA4B0B,WAAY,CAC/D7E,QAAQN,MAAM,6DAA+DmF,WAAa,KAC1F,OAEJ,IAAIzB,WAAawB,KAAOC,WACxB7B,eAAeI,YAAcrD,QAAUA,QAAW,iBAAmBqD,WAAa,IAClF,OAAOA,WAQX,SAASQ,sBAAsBR,YAC3B,GAAIJ,eAAeI,YAAa,CAC5B,OAAOJ,eAAeI,gBAErB,CACD,MAAO,2CAA6CA,WAAa,KAUzE,SAASU,eAAeV,WAAYC,KAChC,IAAIyB,OAASzB,KAAO,GACpB,GAAIxD,YAAYuD,YAAa,CACzB,OAAO0B,OAASjF,YAAYuD,YAAc,SAEzC,CACD,OAAO0B,UAvKnB,CA0KGxG,MAAQA,SAEX,OAAOA","sourcesContent":["﻿/*!\n * cdp.core.js 2.0.0\n *\n * Date: 2017-07-24T08:33:19.320Z\n */\n(function (root, factory) { if (typeof define === \"function\" && define.amd) { define(function () { return factory(root.CDP || (root.CDP = {})); }); } else if (typeof exports === \"object\") { module.exports = factory(root.CDP || (root.CDP = {})); } else { factory(root.CDP || (root.CDP = {})); } }(((this || 0).self || global), function (CDP) {\nvar CDP;\n(function (CDP) {\n    var TAG = \"[CDP] \";\n    /**\n     * システムの global オブジェクトにアクセス\n     * 通常は Window オブジェクトとなる\n     */\n    CDP.global = Function(\"return this\")();\n    /**\n     * Web root location にアクセス\n     */\n    CDP.webRoot = (function () {\n        if (CDP.global.location) {\n            var baseUrl = /(.+\\/)[^/]*#[^/]+/.exec(CDP.global.location.href);\n            if (!baseUrl) {\n                baseUrl = /(.+\\/)/.exec(CDP.global.location.href);\n            }\n            return baseUrl[1];\n        }\n    })();\n    /**\n     * Config オブジェクトにアクセス\n     */\n    CDP.Config = CDP.Config || CDP.global.Config || {};\n    /**\n     * core の初期化\n     */\n    function initialize(options) {\n        setTimeout(function () {\n            try {\n                CDP.Patch.apply();\n                if (options && typeof options.success === \"function\") {\n                    options.success();\n                }\n            }\n            catch (error) {\n                var errorInfo = CDP.makeErrorInfo(CDP.RESULT_CODE.ERROR_CDP_INITIALIZE_FAILED, TAG, (error && error.message) ? error.message : null, error);\n                console.error(errorInfo.message);\n                if (options && typeof options.fail === \"function\") {\n                    options.fail(error);\n                }\n            }\n        });\n    }\n    CDP.initialize = initialize;\n})(CDP || (CDP = {}));\nvar CDP;\n(function (CDP) {\n    var TAG = \"[CDP.Patch] \";\n    /**\n     * @class Patch\n     * @brief 実行環境用 Patch 適用ユーティリティクラス\n     */\n    var Patch = (function () {\n        function Patch() {\n        }\n        ///////////////////////////////////////////////////////////////////////\n        // public static methods:\n        /**\n         * パッチの適用\n         */\n        Patch.apply = function () {\n            Patch.consolePatch();\n            Patch.nodePatch();\n        };\n        ///////////////////////////////////////////////////////////////////////\n        // private static methods:\n        // console 用 patch\n        Patch.consolePatch = function () {\n            if (null == CDP.global.console || null == CDP.global.console.error) {\n                CDP.global.console = {\n                    count: function () { },\n                    groupEnd: function () { },\n                    time: function () { },\n                    timeEnd: function () { },\n                    trace: function () { },\n                    group: function () { },\n                    dirxml: function () { },\n                    debug: function () { },\n                    groupCollapsed: function () { },\n                    select: function () { },\n                    info: function () { },\n                    profile: function () { },\n                    assert: function () { },\n                    msIsIndependentlyComposed: function () { },\n                    clear: function () { },\n                    dir: function () { },\n                    warn: function () { },\n                    error: function () { },\n                    log: function () { },\n                    profileEnd: function () { }\n                };\n            }\n        };\n        // WinRT 用 patch\n        Patch.nodePatch = function () {\n            if (\"object\" === typeof MSApp) {\n                var _MSApp_1 = MSApp;\n                var originalAppendChild_1 = Node.prototype.appendChild;\n                Node.prototype.appendChild = function (node) {\n                    var self = this;\n                    return _MSApp_1.execUnsafeLocalFunction(function () {\n                        return originalAppendChild_1.call(self, node);\n                    });\n                };\n                var originalInsertBefore_1 = Node.prototype.insertBefore;\n                Node.prototype.insertBefore = function (newElement, referenceElement) {\n                    var self = this;\n                    return _MSApp_1.execUnsafeLocalFunction(function () {\n                        return originalInsertBefore_1.call(self, newElement, referenceElement);\n                    });\n                };\n            }\n        };\n        return Patch;\n    }());\n    CDP.Patch = Patch;\n})(CDP || (CDP = {}));\nvar __assign = (this && this.__assign) || Object.assign || function(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n        s = arguments[i];\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n            t[p] = s[p];\n    }\n    return t;\n};\nvar CDP;\n(function (CDP) {\n    var CANCELED_MESSAGE = \"abort\";\n    var s_code2message = {\n        \"0\": \"operation succeeded.\",\n        \"-1\": \"operation failed.\"\n    };\n    ///////////////////////////////////////////////////////////////////////\n    // error utilities:\n    /**\n     * @enum  RESULT_CODE\n     * @brief アプリケーション全体で使用する共通エラーコード定義\n     */\n    var RESULT_CODE;\n    (function (RESULT_CODE) {\n        RESULT_CODE[RESULT_CODE[\"SUCCEEDED\"] = 0] = \"SUCCEEDED\";\n        RESULT_CODE[RESULT_CODE[\"FAILED\"] = -1] = \"FAILED\";\n    })(RESULT_CODE = CDP.RESULT_CODE || (CDP.RESULT_CODE = {}));\n    // ローカルリザルトコードのアサイン可能数\n    CDP.MODULE_RESULT_CODE_RANGE = 1000;\n    /**\n     * エラー情報生成\n     *\n     * @param resultCode [in] RESULT_CODE を指定\n     * @param [tag]      [in] TAG を指定\n     * @param [message]  [in] メッセージを指定\n     * @param [cause]    [in] 下位のエラーを指定\n     * @returns エラーオブジェクト\n     */\n    function makeErrorInfo(resultCode, tag, message, cause) {\n        var canceled = (cause && CANCELED_MESSAGE === cause.message) ? true : false;\n        var msg = canceled ? CANCELED_MESSAGE : message;\n        var code = canceled ? RESULT_CODE.SUCCEEDED : resultCode;\n        return __assign({}, new Error(msg || messageFromResultCode(code)), {\n            name: buildErrorName(code, tag),\n            code: code,\n            cause: cause,\n        });\n    }\n    CDP.makeErrorInfo = makeErrorInfo;\n    /**\n     * キャンセルエラー情報生成\n     *\n     * @param [cause]    [in] 下位のエラーを指定\n     * @param [tag]      [in] TAG を指定\n     * @returns エラーオブジェクト\n     */\n    function makeCanceledErrorInfo(cause, tag) {\n        return makeErrorInfo(RESULT_CODE.SUCCEEDED, tag, CANCELED_MESSAGE, cause);\n    }\n    CDP.makeCanceledErrorInfo = makeCanceledErrorInfo;\n    /**\n     * エラー情報がキャンセルされたものか判定\n     *\n     * @param error [in] エラー情報\n     * @returns true: キャンセル / false: その他エラー\n     */\n    function isCanceledError(error) {\n        var errorInfo = error;\n        if (errorInfo) {\n            if (RESULT_CODE.SUCCEEDED === errorInfo.code || CANCELED_MESSAGE === errorInfo.message) {\n                return true;\n            }\n        }\n        return false;\n    }\n    CDP.isCanceledError = isCanceledError;\n    /**\n     * @enum  RESULT_CODE_BASE\n     * @brief リザルトコードのオフセット値\n     *        エラーコード対応するモジュール内で 定義を拡張する.\n     */\n    var RESULT_CODE_BASE;\n    (function (RESULT_CODE_BASE) {\n        RESULT_CODE_BASE[RESULT_CODE_BASE[\"RESULT_CODE_BASE_DECLARATION\"] = 0] = \"RESULT_CODE_BASE_DECLARATION\";\n        //      MODULE_A = 1 * MODULE_RESULT_CODE_RANGE, // ex) moduleA: 1001 ～ 1999\n        //      MODULE_B = 2 * MODULE_RESULT_CODE_RANGE, // ex) moduleB: 2001 ～ 2999\n        //      MODULE_C = 3 * MODULE_RESULT_CODE_RANGE, // ex) moduleC: 3001 ～ 3999\n        RESULT_CODE_BASE[RESULT_CODE_BASE[\"CDP\"] = 101 * CDP.MODULE_RESULT_CODE_RANGE] = \"CDP\";\n    })(RESULT_CODE_BASE = CDP.RESULT_CODE_BASE || (CDP.RESULT_CODE_BASE = {}));\n    ASSIGN_RESULT_CODE_BASE(RESULT_CODE_BASE);\n    // エラーコード生成\n    function DECLARE_ERROR_CODE(baseName, localCode, message) {\n        return declareResultCode(CDP.RESULT_CODE_BASE[baseName], localCode, message);\n    }\n    CDP.DECLARE_ERROR_CODE = DECLARE_ERROR_CODE;\n    /**\n     * RESULT_CODE_BASE のアサイン\n     */\n    function ASSIGN_RESULT_CODE_BASE(resultCodeBase) {\n        CDP.RESULT_CODE_BASE = __assign({}, CDP.RESULT_CODE_BASE, resultCodeBase);\n    }\n    CDP.ASSIGN_RESULT_CODE_BASE = ASSIGN_RESULT_CODE_BASE;\n    /**\n     * RESULT_CODE のアサイン\n     */\n    function ASSIGN_RESULT_CODE(resultCode) {\n        CDP.RESULT_CODE = __assign({}, CDP.RESULT_CODE, resultCode);\n    }\n    CDP.ASSIGN_RESULT_CODE = ASSIGN_RESULT_CODE;\n    ///////////////////////////////////////////////////////////////////////\n    // module error declaration:\n    var FUNCTION_CODE_RANGE = 10;\n    /**\n     * @enum  LOCAL_CODE_BASE\n     * @brief cdp.core 内のローカルコードオフセット値\n     */\n    var LOCAL_CODE_BASE;\n    (function (LOCAL_CODE_BASE) {\n        LOCAL_CODE_BASE[LOCAL_CODE_BASE[\"CORE\"] = 0] = \"CORE\";\n        LOCAL_CODE_BASE[LOCAL_CODE_BASE[\"PATCH\"] = 1 * FUNCTION_CODE_RANGE] = \"PATCH\";\n    })(LOCAL_CODE_BASE || (LOCAL_CODE_BASE = {}));\n    /**\n     * @enum  RESULT_CODE\n     * @brief FES.Utils のエラーコード定義\n     *        モジュール別に拡張可能\n     */\n    (function (RESULT_CODE) {\n        RESULT_CODE[RESULT_CODE[\"RESULT_CODE_DECLARATION\"] = 0] = \"RESULT_CODE_DECLARATION\";\n        RESULT_CODE[RESULT_CODE[\"ERROR_CDP_INITIALIZE_FAILED\"] = DECLARE_ERROR_CODE(\"CDP\", LOCAL_CODE_BASE.CORE + 1, \"initialized failed.\")] = \"ERROR_CDP_INITIALIZE_FAILED\";\n    })(RESULT_CODE = CDP.RESULT_CODE || (CDP.RESULT_CODE = {}));\n    ASSIGN_RESULT_CODE_BASE(RESULT_CODE);\n    ///////////////////////////////////////////////////////////////////////\n    // private static methods:\n    /**\n     * リザルトコードの登録\n     *\n     * @param base       [in] RESULT_CODE_BASE を指定\n     * @param moduleCode [in] モジュールで一意になる数値 (0 < localCode < 1000)\n     * @param [message]  [in] リザルトコードに紐づくメッセージ\n     * @returns リザルトコード\n     */\n    function declareResultCode(base, moduleCode, message) {\n        if (moduleCode <= 0 || CDP.MODULE_RESULT_CODE_RANGE <= moduleCode) {\n            console.error(\"declareResultCode(), invalid localCode range. [localCode: \" + moduleCode + \"]\");\n            return;\n        }\n        var resultCode = base + moduleCode;\n        s_code2message[resultCode] = message ? message : (\"[RESULT_CODE: \" + resultCode + \"]\");\n        return resultCode;\n    }\n    /**\n     * リザルトコードから登録されているメッセージを取得\n     *\n     * @param resultCode [in] リザルトコード\n     * @returns エラーメッセージ\n     */\n    function messageFromResultCode(resultCode) {\n        if (s_code2message[resultCode]) {\n            return s_code2message[resultCode];\n        }\n        else {\n            return \"unregistered result code. [RESULT_CODE: \" + resultCode + \"]\";\n        }\n    }\n    /**\n     * リザルトコードから登録されているリザルトコード文字列を取得\n     *\n     * @param resultCode [in] リザルトコード\n     * @param tag        [in] TAG を指定\n     * @returns リザルトコード識別文字列\n     */\n    function buildErrorName(resultCode, tag) {\n        var prefix = tag || \"\";\n        if (RESULT_CODE[resultCode]) {\n            return prefix + RESULT_CODE[resultCode] + \": \";\n        }\n        else {\n            return prefix;\n        }\n    }\n})(CDP || (CDP = {}));\n\nreturn CDP; }));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNkcDovLy9DRFAvQ29yZS50cyIsImNkcDovLy9DRFAvUGF0Y2gudHMiLCJjZHA6Ly8vQ0RQL0Vycm9yRGVmcy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxJQUFVLEdBQUcsQ0E4RFo7QUE5REQsV0FBVSxHQUFHO0lBRVQsSUFBTSxHQUFHLEdBQUcsUUFBUSxDQUFDO0lBRXJCOzs7T0FHRztJQUNVLFVBQU0sR0FBUSxRQUFRLENBQUMsYUFBYSxDQUFDLEVBQUUsQ0FBQztJQUdyRDs7T0FFRztJQUNVLFdBQU8sR0FBVyxDQUFDO1FBQzVCLEVBQUUsQ0FBQyxDQUFDLFVBQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDO1lBQ2xCLElBQUksT0FBTyxHQUFHLG1CQUFtQixDQUFDLElBQUksQ0FBQyxVQUFNLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQzdELEVBQUUsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztnQkFDWCxPQUFPLEdBQUcsUUFBUSxDQUFDLElBQUksQ0FBQyxVQUFNLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ2xELENBQUM7WUFDRCxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3RCLENBQUM7SUFDTCxDQUFDLENBQUMsRUFBRSxDQUFDO0lBRUw7O09BRUc7SUFDVSxVQUFNLEdBQVEsR0FBRyxDQUFDLE1BQU0sSUFBSSxVQUFNLENBQUMsTUFBTSxJQUFJLEVBQUUsQ0FBQztJQVc3RDs7T0FFRztJQUNILG9CQUEyQixPQUF5QjtRQUNoRCxVQUFVLENBQUM7WUFDUCxJQUFJLENBQUM7Z0JBQ0QsU0FBSyxDQUFDLEtBQUssRUFBRSxDQUFDO2dCQUNkLEVBQUUsQ0FBQyxDQUFDLE9BQU8sSUFBSSxPQUFPLE9BQU8sQ0FBQyxPQUFPLEtBQUssVUFBVSxDQUFDLENBQUMsQ0FBQztvQkFDbkQsT0FBTyxDQUFDLE9BQU8sRUFBRSxDQUFDO2dCQUN0QixDQUFD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Q0FBQyxDQUFDO1lBQ0osTUFBTSxDQUFDLE1BQU0sQ0FBQztRQUNsQixDQUFDO0lBQ0wsQ0FBQztBQUNMLENBQUMsRUFoTVMsR0FBRyxLQUFILEdBQUcsUUFnTVoiLCJzb3VyY2VzQ29udGVudCI6WyJuYW1lc3BhY2UgQ0RQIHtcclxuXHJcbiAgICBjb25zdCBUQUcgPSBcIltDRFBdIFwiO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICog44K344K544OG44Og44GuIGdsb2JhbCDjgqrjg5bjgrjjgqfjgq/jg4jjgavjgqLjgq/jgrvjgrlcclxuICAgICAqIOmAmuW4uOOBryBXaW5kb3cg44Kq44OW44K444Kn44Kv44OI44Go44Gq44KLXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBjb25zdCBnbG9iYWw6IGFueSA9IEZ1bmN0aW9uKFwicmV0dXJuIHRoaXNcIikoKTtcclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBXZWIgcm9vdCBsb2NhdGlvbiDjgavjgqLjgq/jgrvjgrlcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGNvbnN0IHdlYlJvb3Q6IHN0cmluZyA9ICgoKSA9PiB7XHJcbiAgICAgICAgaWYgKGdsb2JhbC5sb2NhdGlvbikge1xyXG4gICAgICAgICAgICBsZXQgYmFzZVVybCA9IC8oLitcXC8pW14vXSojW14vXSsvLmV4ZWMoZ2xvYmFsLmxvY2F0aW9uLmhyZWYpO1xyXG4gICAgICAgICAgICBpZiAoIWJhc2VVcmwpIHtcclxuICAgICAgICAgICAgICAgIGJhc2VVcmwgPSAvKC4rXFwvKS8uZXhlYyhnbG9iYWwubG9jYXRpb24uaHJlZik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGJhc2VVcmxbMV07XHJcbiAgICAgICAgfVxyXG4gICAgfSkoKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbmZpZyDjgqrjg5bjgrjjgqfjgq/jg4jjgavjgqLjgq/jgrvjgrlcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGNvbnN0IENvbmZpZzogYW55ID0gQ0RQLkNvbmZpZyB8fCBnbG9iYWwuQ29uZmlnIHx8IHt9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICog5Yid5pyf5YyW44Kq44OX44K344On44Oz44Kk44Oz44K/44O844OV44Kn44Kk44K5XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgQ29yZUluaXRPcHRpb25zIHtcclxuICAgICAgICBzdWNjZXNzPzogKCkgPT4gdm9pZDtcclxuICAgICAgICBmYWlsPzogKGVycm9yPzogYW55KSA9PiB2b2lkO1xyXG4gICAgICAgIFtrZXk6IHN0cmluZ106IGFueTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIGNvcmUg44Gu5Yid5pyf5YyWXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBpbml0aWFsaXplKG9wdGlvbnM/OiBDb3JlSW5pdE9wdGlvbnMpOiB2b2lkIHtcclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIFBhdGNoLmFwcGx5KCk7XHJcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucyAmJiB0eXBlb2Ygb3B0aW9ucy5zdWNjZXNzID09PSBcImZ1bmN0aW9uXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnN1Y2Nlc3MoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9ySW5mbyA9IG1ha2VFcnJvckluZm8oXHJcbiAgICAgICAgICAgICAgICAgICAgUkVTVUxUX0NPREUuRVJST1JfQ0RQX0lOSVRJQUxJWkVfRkFJTEVELFxyXG4gICAgICAgICAgICAgICAgICAgIFRBRyxcclxuICAgICAgICAgICAgICAgICAgICAoZXJyb3IgJiYgZXJyb3IubWVzc2FnZSkgPyBlcnJvci5tZXNzYWdlIDogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBlcnJvclxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3JJbmZvLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMgJiYgdHlwZW9mIG9wdGlvbnMuZmFpbCA9PT0gXCJmdW5jdGlvblwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5mYWlsKGVycm9yKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcblxyXG5kZWNsYXJlIG1vZHVsZSBcImNkcC5jb3JlXCIge1xyXG4gICAgZXhwb3J0ID0gQ0RQO1xyXG59XHJcbiIsIm5hbWVzcGFjZSBDRFAge1xyXG5cclxuICAgIGNvbnN0IFRBRzogc3RyaW5nID0gXCJbQ0RQLlBhdGNoXSBcIjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBjbGFzcyBQYXRjaFxyXG4gICAgICogQGJyaWVmIOWun+ihjOeSsOWig+eUqCBQYXRjaCDpgannlKjjg6bjg7zjg4bjgqPjg6rjg4bjgqPjgq/jg6njgrlcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGNsYXNzIFBhdGNoIHtcclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgICAgIC8vIHB1YmxpYyBzdGF0aWMgbWV0aG9kczpcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog44OR44OD44OB44Gu6YGp55SoXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBhcHBseSgpOiB2b2lkIHtcclxuICAgICAgICAgICAgUGF0Y2guY29uc29sZVBhdGNoKCk7XHJcbiAgICAgICAgICAgIFBhdGNoLm5vZGVQYXRjaCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICAvLyBwcml2YXRlIHN0YXRpYyBtZXRob2RzOlxyXG5cclxuICAgICAgICAvLyBjb25zb2xlIOeUqCBwYXRjaFxyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGNvbnNvbGVQYXRjaCgpOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKG51bGwgPT0gZ2xvYmFsLmNvbnNvbGUgfHwgbnVsbCA9PSBnbG9iYWwuY29uc29sZS5lcnJvcikge1xyXG4gICAgICAgICAgICAgICAgZ2xvYmFsLmNvbnNvbGUgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY291bnQ6ICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsgLyogZHVtbXkgKi8gfSxcclxuICAgICAgICAgICAgICAgICAgICBncm91cEVuZDogICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkgeyAvKiBkdW1teSAqLyB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHRpbWU6ICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7IC8qIGR1bW15ICovIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgdGltZUVuZDogICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsgLyogZHVtbXkgKi8gfSxcclxuICAgICAgICAgICAgICAgICAgICB0cmFjZTogICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkgeyAvKiBkdW1teSAqLyB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGdyb3VwOiAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7IC8qIGR1bW15ICovIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgZGlyeG1sOiAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsgLyogZHVtbXkgKi8gfSxcclxuICAgICAgICAgICAgICAgICAgICBkZWJ1ZzogICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkgeyAvKiBkdW1teSAqLyB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGdyb3VwQ29sbGFwc2VkOiAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7IC8qIGR1bW15ICovIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0OiAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsgLyogZHVtbXkgKi8gfSxcclxuICAgICAgICAgICAgICAgICAgICBpbmZvOiAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkgeyAvKiBkdW1teSAqLyB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHByb2ZpbGU6ICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7IC8qIGR1bW15ICovIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgYXNzZXJ0OiAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsgLyogZHVtbXkgKi8gfSxcclxuICAgICAgICAgICAgICAgICAgICBtc0lzSW5kZXBlbmRlbnRseUNvbXBvc2VkOiAgZnVuY3Rpb24gKCkgeyAvKiBkdW1teSAqLyB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGNsZWFyOiAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7IC8qIGR1bW15ICovIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgZGlyOiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsgLyogZHVtbXkgKi8gfSxcclxuICAgICAgICAgICAgICAgICAgICB3YXJuOiAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkgeyAvKiBkdW1teSAqLyB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7IC8qIGR1bW15ICovIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgbG9nOiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHsgLyogZHVtbXkgKi8gfSxcclxuICAgICAgICAgICAgICAgICAgICBwcm9maWxlRW5kOiAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkgeyAvKiBkdW1teSAqLyB9XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBXaW5SVCDnlKggcGF0Y2hcclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBub2RlUGF0Y2goKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmIChcIm9iamVjdFwiID09PSB0eXBlb2YgTVNBcHApIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IF9NU0FwcDogYW55ID0gTVNBcHA7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3Qgb3JpZ2luYWxBcHBlbmRDaGlsZCA9IE5vZGUucHJvdG90eXBlLmFwcGVuZENoaWxkO1xyXG4gICAgICAgICAgICAgICAgTm9kZS5wcm90b3R5cGUuYXBwZW5kQ2hpbGQgPSBmdW5jdGlvbiAobm9kZTogYW55KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9NU0FwcC5leGVjVW5zYWZlTG9jYWxGdW5jdGlvbihmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvcmlnaW5hbEFwcGVuZENoaWxkLmNhbGwoc2VsZiwgbm9kZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IG9yaWdpbmFsSW5zZXJ0QmVmb3JlID0gTm9kZS5wcm90b3R5cGUuaW5zZXJ0QmVmb3JlO1xyXG4gICAgICAgICAgICAgICAgTm9kZS5wcm90b3R5cGUuaW5zZXJ0QmVmb3JlID0gZnVuY3Rpb24gKG5ld0VsZW1lbnQ6IGFueSwgcmVmZXJlbmNlRWxlbWVudDogTm9kZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfTVNBcHAuZXhlY1Vuc2FmZUxvY2FsRnVuY3Rpb24oZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb3JpZ2luYWxJbnNlcnRCZWZvcmUuY2FsbChzZWxmLCBuZXdFbGVtZW50LCByZWZlcmVuY2VFbGVtZW50KTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwibmFtZXNwYWNlIENEUCB7XHJcblxyXG4gICAgY29uc3QgQ0FOQ0VMRURfTUVTU0FHRSA9IFwiYWJvcnRcIjtcclxuICAgIGNvbnN0IHNfY29kZTJtZXNzYWdlOiB7IFtyZXN1bHRDb2RlOiBzdHJpbmddOiBzdHJpbmcgfSA9IHtcclxuICAgICAgICBcIjBcIjogXCJvcGVyYXRpb24gc3VjY2VlZGVkLlwiLFxyXG4gICAgICAgIFwiLTFcIjogXCJvcGVyYXRpb24gZmFpbGVkLlwiXHJcbiAgICB9O1xyXG5cclxuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAvLyBlcnJvciB1dGlsaXRpZXM6XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAZW51bSAgUkVTVUxUX0NPREVcclxuICAgICAqIEBicmllZiDjgqLjg5fjg6rjgrHjg7zjgrfjg6fjg7PlhajkvZPjgafkvb/nlKjjgZnjgovlhbHpgJrjgqjjg6njg7zjgrPjg7zjg4nlrprnvqlcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGVudW0gUkVTVUxUX0NPREUge1xyXG4gICAgICAgIFNVQ0NFRURFRCA9IDAsICAvLyDmsY7nlKjmiJDlip9cclxuICAgICAgICBGQUlMRUQgPSAtMSwgICAgLy8g5rGO55So44Gu44Ko44Op44O8XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAaW50ZXJmYWNlIEVycm9ySW5mb1xyXG4gICAgICogQGJyaWVmICAgICDjgqjjg6njg7zkvJ3pgZTjgqrjg5bjgrjjgqfjgq/jg4hcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBFcnJvckluZm8gZXh0ZW5kcyBFcnJvciB7XHJcbiAgICAgICAgY29kZTogUkVTVUxUX0NPREU7ICAgLy8g44Ki44OX44Oq44Kx44O844K344On44OzL+ODqeOCpOODluODqeODquOBp+Wumue+qeOBmeOCi+ODquOCtuODq+ODiOOCs+ODvOODiVxyXG4gICAgICAgIGNhdXNlPzogRXJyb3I7ICAgICAgIC8vIOOCqOODqeODvOOBruips+e0sFxyXG4gICAgfVxyXG5cclxuICAgIC8vIOODreODvOOCq+ODq+ODquOCtuODq+ODiOOCs+ODvOODieOBruOCouOCteOCpOODs+WPr+iDveaVsFxyXG4gICAgZXhwb3J0IGNvbnN0IE1PRFVMRV9SRVNVTFRfQ09ERV9SQU5HRSA9IDEwMDA7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDjgqjjg6njg7zmg4XloLHnlJ/miJBcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gcmVzdWx0Q29kZSBbaW5dIFJFU1VMVF9DT0RFIOOCkuaMh+WumlxyXG4gICAgICogQHBhcmFtIFt0YWddICAgICAgW2luXSBUQUcg44KS5oyH5a6aXHJcbiAgICAgKiBAcGFyYW0gW21lc3NhZ2VdICBbaW5dIOODoeODg+OCu+ODvOOCuOOCkuaMh+WumlxyXG4gICAgICogQHBhcmFtIFtjYXVzZV0gICAgW2luXSDkuIvkvY3jga7jgqjjg6njg7zjgpLmjIflrppcclxuICAgICAqIEByZXR1cm5zIOOCqOODqeODvOOCquODluOCuOOCp+OCr+ODiFxyXG4gICAgICovXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gbWFrZUVycm9ySW5mbyhyZXN1bHRDb2RlOiBudW1iZXIsIHRhZz86IHN0cmluZywgbWVzc2FnZT86IHN0cmluZywgY2F1c2U/OiBFcnJvcik6IEVycm9ySW5mbyB7XHJcbiAgICAgICAgY29uc3QgY2FuY2VsZWQgPSAoY2F1c2UgJiYgQ0FOQ0VMRURfTUVTU0FHRSA9PT0gY2F1c2UubWVzc2FnZSkgPyB0cnVlIDogZmFsc2U7XHJcbiAgICAgICAgY29uc3QgbXNnID0gY2FuY2VsZWQgPyBDQU5DRUxFRF9NRVNTQUdFIDogbWVzc2FnZTtcclxuICAgICAgICBjb25zdCBjb2RlID0gY2FuY2VsZWQgPyBSRVNVTFRfQ09ERS5TVUNDRUVERUQgOiByZXN1bHRDb2RlO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIC4uLm5ldyBFcnJvcihtc2cgfHwgbWVzc2FnZUZyb21SZXN1bHRDb2RlKGNvZGUpKSxcclxuICAgICAgICAgICAgLi4ue1xyXG4gICAgICAgICAgICAgICAgbmFtZTogYnVpbGRFcnJvck5hbWUoY29kZSwgdGFnKSxcclxuICAgICAgICAgICAgICAgIGNvZGU6IGNvZGUsXHJcbiAgICAgICAgICAgICAgICBjYXVzZTogY2F1c2UsXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog44Kt44Oj44Oz44K744Or44Ko44Op44O85oOF5aCx55Sf5oiQXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIFtjYXVzZV0gICAgW2luXSDkuIvkvY3jga7jgqjjg6njg7zjgpLmjIflrppcclxuICAgICAqIEBwYXJhbSBbdGFnXSAgICAgIFtpbl0gVEFHIOOCkuaMh+WumlxyXG4gICAgICogQHJldHVybnMg44Ko44Op44O844Kq44OW44K444Kn44Kv44OIXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBtYWtlQ2FuY2VsZWRFcnJvckluZm8oY2F1c2U/OiBFcnJvciwgdGFnPzogc3RyaW5nKTogRXJyb3JJbmZvIHtcclxuICAgICAgICByZXR1cm4gbWFrZUVycm9ySW5mbyhSRVNVTFRfQ09ERS5TVUNDRUVERUQsIHRhZywgQ0FOQ0VMRURfTUVTU0FHRSwgY2F1c2UpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog44Ko44Op44O85oOF5aCx44GM44Kt44Oj44Oz44K744Or44GV44KM44Gf44KC44Gu44GL5Yik5a6aXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGVycm9yIFtpbl0g44Ko44Op44O85oOF5aCxXHJcbiAgICAgKiBAcmV0dXJucyB0cnVlOiDjgq3jg6Pjg7Pjgrvjg6sgLyBmYWxzZTog44Gd44Gu5LuW44Ko44Op44O8XHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBmdW5jdGlvbiBpc0NhbmNlbGVkRXJyb3IoZXJyb3I6IEVycm9yKTogYm9vbGVhbiB7XHJcbiAgICAgICAgY29uc3QgZXJyb3JJbmZvID0gPEVycm9ySW5mbz5lcnJvcjtcclxuICAgICAgICBpZiAoZXJyb3JJbmZvKSB7XHJcbiAgICAgICAgICAgIGlmIChSRVNVTFRfQ09ERS5TVUNDRUVERUQgPT09IGVycm9ySW5mby5jb2RlIHx8IENBTkNFTEVEX01FU1NBR0UgPT09IGVycm9ySW5mby5tZXNzYWdlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQGVudW0gIFJFU1VMVF9DT0RFX0JBU0VcclxuICAgICAqIEBicmllZiDjg6rjgrbjg6vjg4jjgrPjg7zjg4njga7jgqrjg5Xjgrvjg4Pjg4jlgKRcclxuICAgICAqICAgICAgICDjgqjjg6njg7zjgrPjg7zjg4nlr77lv5zjgZnjgovjg6Ljgrjjg6Xjg7zjg6vlhoXjgacg5a6a576p44KS5ouh5by144GZ44KLLlxyXG4gICAgICovXHJcbiAgICBleHBvcnQgZW51bSBSRVNVTFRfQ09ERV9CQVNFIHtcclxuICAgICAgICBSRVNVTFRfQ09ERV9CQVNFX0RFQ0xBUkFUSU9OID0gMCwgICAgICAgLy8gVFMyNDMyIOWvvuetllxyXG4vLyAgICAgIE1PRFVMRV9BID0gMSAqIE1PRFVMRV9SRVNVTFRfQ09ERV9SQU5HRSwgLy8gZXgpIG1vZHVsZUE6IDEwMDEg772eIDE5OTlcclxuLy8gICAgICBNT0RVTEVfQiA9IDIgKiBNT0RVTEVfUkVTVUxUX0NPREVfUkFOR0UsIC8vIGV4KSBtb2R1bGVCOiAyMDAxIO+9niAyOTk5XHJcbi8vICAgICAgTU9EVUxFX0MgPSAzICogTU9EVUxFX1JFU1VMVF9DT0RFX1JBTkdFLCAvLyBleCkgbW9kdWxlQzogMzAwMSDvvZ4gMzk5OVxyXG4gICAgICAgIENEUCA9IDEwMSAqIE1PRFVMRV9SRVNVTFRfQ09ERV9SQU5HRSwgICAgLy8gY2RwIHJlc2VydmVkLiAxMDEsMDAwIO+9nlxyXG4gICAgfVxyXG4gICAgQVNTSUdOX1JFU1VMVF9DT0RFX0JBU0UoUkVTVUxUX0NPREVfQkFTRSk7XHJcblxyXG4gICAgLy8g44Ko44Op44O844Kz44O844OJ55Sf5oiQXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gREVDTEFSRV9FUlJPUl9DT0RFKGJhc2VOYW1lOiBzdHJpbmcsIGxvY2FsQ29kZTogbnVtYmVyLCBtZXNzYWdlPzogc3RyaW5nKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gZGVjbGFyZVJlc3VsdENvZGUoQ0RQLlJFU1VMVF9DT0RFX0JBU0VbYmFzZU5hbWVdLCBsb2NhbENvZGUsIG1lc3NhZ2UpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUkVTVUxUX0NPREVfQkFTRSDjga7jgqLjgrXjgqTjg7NcclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGZ1bmN0aW9uIEFTU0lHTl9SRVNVTFRfQ09ERV9CQVNFKHJlc3VsdENvZGVCYXNlOiBvYmplY3QpOiB2b2lkIHtcclxuICAgICAgICBDRFAuUkVTVUxUX0NPREVfQkFTRSA9IDxhbnk+eyAuLi5DRFAuUkVTVUxUX0NPREVfQkFTRSwgLi4ucmVzdWx0Q29kZUJhc2UgfTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJFU1VMVF9DT0RFIOOBruOCouOCteOCpOODs1xyXG4gICAgICovXHJcbiAgICBleHBvcnQgZnVuY3Rpb24gQVNTSUdOX1JFU1VMVF9DT0RFKHJlc3VsdENvZGU6IG9iamVjdCk6IHZvaWQge1xyXG4gICAgICAgIENEUC5SRVNVTFRfQ09ERSA9IDxhbnk+eyAuLi5DRFAuUkVTVUxUX0NPREUsIC4uLnJlc3VsdENvZGUgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgLy8gbW9kdWxlIGVycm9yIGRlY2xhcmF0aW9uOlxyXG5cclxuICAgIGNvbnN0IEZVTkNUSU9OX0NPREVfUkFOR0UgPSAxMDtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlbnVtICBMT0NBTF9DT0RFX0JBU0VcclxuICAgICAqIEBicmllZiBjZHAuY29yZSDlhoXjga7jg63jg7zjgqvjg6vjgrPjg7zjg4njgqrjg5Xjgrvjg4Pjg4jlgKRcclxuICAgICAqL1xyXG4gICAgZW51bSBMT0NBTF9DT0RFX0JBU0Uge1xyXG4gICAgICAgIENPUkUgICAgPSAwLFxyXG4gICAgICAgIFBBVENIICAgPSAxICogRlVOQ1RJT05fQ09ERV9SQU5HRSxcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEBlbnVtICBSRVNVTFRfQ09ERVxyXG4gICAgICogQGJyaWVmIEZFUy5VdGlscyDjga7jgqjjg6njg7zjgrPjg7zjg4nlrprnvqlcclxuICAgICAqICAgICAgICDjg6Ljgrjjg6Xjg7zjg6vliKXjgavmi6HlvLXlj6/og71cclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGVudW0gUkVTVUxUX0NPREUge1xyXG4gICAgICAgIFJFU1VMVF9DT0RFX0RFQ0xBUkFUSU9OID0gMCwgICAgLy8gVFMyNDMyIOWvvuetllxyXG4gICAgICAgIEVSUk9SX0NEUF9JTklUSUFMSVpFX0ZBSUxFRCA9IERFQ0xBUkVfRVJST1JfQ09ERShcIkNEUFwiLCBMT0NBTF9DT0RFX0JBU0UuQ09SRSArIDEsIFwiaW5pdGlhbGl6ZWQgZmFpbGVkLlwiKSxcclxuICAgIH1cclxuICAgIEFTU0lHTl9SRVNVTFRfQ09ERV9CQVNFKFJFU1VMVF9DT0RFKTtcclxuXHJcbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgLy8gcHJpdmF0ZSBzdGF0aWMgbWV0aG9kczpcclxuXHJcbiAgICAvKipcclxuICAgICAqIOODquOCtuODq+ODiOOCs+ODvOODieOBrueZu+mMslxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBiYXNlICAgICAgIFtpbl0gUkVTVUxUX0NPREVfQkFTRSDjgpLmjIflrppcclxuICAgICAqIEBwYXJhbSBtb2R1bGVDb2RlIFtpbl0g44Oi44K444Ol44O844Or44Gn5LiA5oSP44Gr44Gq44KL5pWw5YCkICgwIDwgbG9jYWxDb2RlIDwgMTAwMClcclxuICAgICAqIEBwYXJhbSBbbWVzc2FnZV0gIFtpbl0g44Oq44K244Or44OI44Kz44O844OJ44Gr57SQ44Gl44GP44Oh44OD44K744O844K4XHJcbiAgICAgKiBAcmV0dXJucyDjg6rjgrbjg6vjg4jjgrPjg7zjg4lcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gZGVjbGFyZVJlc3VsdENvZGUoYmFzZTogUkVTVUxUX0NPREVfQkFTRSwgbW9kdWxlQ29kZTogbnVtYmVyLCBtZXNzYWdlPzogc3RyaW5nKTogbnVtYmVyIHtcclxuICAgICAgICBpZiAobW9kdWxlQ29kZSA8PSAwIHx8IE1PRFVMRV9SRVNVTFRfQ09ERV9SQU5HRSA8PSBtb2R1bGVDb2RlKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYGRlY2xhcmVSZXN1bHRDb2RlKCksIGludmFsaWQgbG9jYWxDb2RlIHJhbmdlLiBbbG9jYWxDb2RlOiAke21vZHVsZUNvZGV9XWApO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHJlc3VsdENvZGUgPSBiYXNlICsgbW9kdWxlQ29kZTtcclxuICAgICAgICBzX2NvZGUybWVzc2FnZVtyZXN1bHRDb2RlXSA9IG1lc3NhZ2UgPyBtZXNzYWdlIDogKGBbUkVTVUxUX0NPREU6ICR7cmVzdWx0Q29kZX1dYCk7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdENvZGU7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICog44Oq44K244Or44OI44Kz44O844OJ44GL44KJ55m76Yyy44GV44KM44Gm44GE44KL44Oh44OD44K744O844K444KS5Y+W5b6XXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHJlc3VsdENvZGUgW2luXSDjg6rjgrbjg6vjg4jjgrPjg7zjg4lcclxuICAgICAqIEByZXR1cm5zIOOCqOODqeODvOODoeODg+OCu+ODvOOCuFxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBtZXNzYWdlRnJvbVJlc3VsdENvZGUocmVzdWx0Q29kZTogbnVtYmVyKTogc3RyaW5nIHtcclxuICAgICAgICBpZiAoc19jb2RlMm1lc3NhZ2VbcmVzdWx0Q29kZV0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHNfY29kZTJtZXNzYWdlW3Jlc3VsdENvZGVdO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBgdW5yZWdpc3RlcmVkIHJlc3VsdCBjb2RlLiBbUkVTVUxUX0NPREU6ICR7cmVzdWx0Q29kZX1dYDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDjg6rjgrbjg6vjg4jjgrPjg7zjg4njgYvjgonnmbvpjLLjgZXjgozjgabjgYTjgovjg6rjgrbjg6vjg4jjgrPjg7zjg4nmloflrZfliJfjgpLlj5blvpdcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gcmVzdWx0Q29kZSBbaW5dIOODquOCtuODq+ODiOOCs+ODvOODiVxyXG4gICAgICogQHBhcmFtIHRhZyAgICAgICAgW2luXSBUQUcg44KS5oyH5a6aXHJcbiAgICAgKiBAcmV0dXJucyDjg6rjgrbjg6vjg4jjgrPjg7zjg4norZjliKXmloflrZfliJdcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gYnVpbGRFcnJvck5hbWUocmVzdWx0Q29kZTogbnVtYmVyLCB0YWc6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgY29uc3QgcHJlZml4ID0gdGFnIHx8IFwiXCI7XHJcbiAgICAgICAgaWYgKFJFU1VMVF9DT0RFW3Jlc3VsdENvZGVdKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBwcmVmaXggKyBSRVNVTFRfQ09ERVtyZXN1bHRDb2RlXSArIFwiOiBcIjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gcHJlZml4O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iXX0="]}