/*!
 * cdp.tools.js 2.0.0
 *
 * Date: 2017-07-07T07:55:21.580Z
 */
(function(root,factory){if(typeof define==="function"&&define.amd){define(["jquery","underscore"],function($,_){return factory(root.CDP||(root.CDP={}),$,_)})}else if(typeof exports==="object"){module.exports=factory(root.CDP||(root.CDP={}),require("jquery"),require("underscore"))}else{factory(root.CDP||(root.CDP={}),root.jQuery||root.$,root._)}})((this||0).self||global,function(CDP,$,_){CDP.Tools=CDP.Tools||{};var CDP;(function(CDP){var Tools;(function(Tools){Tools.global=CDP.global||Function("return this")()})(Tools=CDP.Tools||(CDP.Tools={}))})(CDP||(CDP={}));var CDP;(function(CDP){var Tools;(function(Tools){var TAG="[CDP.Tools.Blob] ";var Blob;(function(Blob){function getBlobBuilder(){return Tools.global.BlobBuilder||Tools.global.WebKitBlobBuilder||Tools.global.MozBlobBuilder||Tools.global.MSBlobBuilder}function arrayBufferToBlob(buf,mimeType){var blob=null;var blobBuilderObject=getBlobBuilder();if(blobBuilderObject!=null){var blobBuilder=new blobBuilderObject;blobBuilder.append(buf);blob=blobBuilder.getBlob(mimeType)}else{blob=new Tools.global.Blob([buf],{type:mimeType})}return blob}Blob.arrayBufferToBlob=arrayBufferToBlob;function base64ToBlob(base64,mimeType){var blob=null;var blobBuilderObject=getBlobBuilder();if(blobBuilderObject!=null){var blobBuilder=new blobBuilderObject;blobBuilder.append(base64ToArrayBuffer(base64));blob=blobBuilder.getBlob(mimeType)}else{blob=new Tools.global.Blob([base64ToArrayBuffer(base64)],{type:mimeType})}return blob}Blob.base64ToBlob=base64ToBlob;function base64ToArrayBuffer(base64){var bytes=window.atob(base64);var arrayBuffer=new ArrayBuffer(bytes.length);var data=new Uint8Array(arrayBuffer);for(var i=0,len=bytes.length;i<len;++i){data[i]=bytes.charCodeAt(i)}return arrayBuffer}Blob.base64ToArrayBuffer=base64ToArrayBuffer;function base64ToUint8Array(encoded){var bytes=window.atob(encoded);var data=new Uint8Array(bytes.length);for(var i=0,len=bytes.length;i<len;++i){data[i]=bytes.charCodeAt(i)}return data}Blob.base64ToUint8Array=base64ToUint8Array;function arrayBufferToBase64(arrayBuffer){var bytes=new Uint8Array(arrayBuffer);return uint8ArrayToBase64(bytes)}Blob.arrayBufferToBase64=arrayBufferToBase64;function uint8ArrayToBase64(bytes){var data="";for(var i=0,len=bytes.byteLength;i<len;++i){data+=String.fromCharCode(bytes[i])}return window.btoa(data)}Blob.uint8ArrayToBase64=uint8ArrayToBase64;Blob.URL=function(){return Tools.global.URL||Tools.global.webkitURL}()})(Blob=Tools.Blob||(Tools.Blob={}))})(Tools=CDP.Tools||(CDP.Tools={}))})(CDP||(CDP={}));var CDP;(function(CDP){var Tools;(function(Tools){var xhrSuccessStatus={0:200,1223:204};$.ajaxTransport("+binary",function(options,originalOptions,jqXHR){if(Tools.global.FormData&&(options.dataType&&options.dataType==="binary"||options.data&&(Tools.global.ArrayBuffer&&options.data instanceof ArrayBuffer||Tools.global.Blob&&options.data instanceof Tools.global.Blob))){var abortCallback_1;return{send:function(headers,callback){var xhr=new XMLHttpRequest;var url=options.url;var type=options.type;var async=options.async||true;var dataType=options.responseType||"blob";var data=options.data||null;var username=options.username||null;var password=options.password||null;var _callback=callback||function(){};xhr.addEventListener("load",function(){var _data={};_data[options.dataType]=xhr.response;_callback(xhrSuccessStatus[xhr.status]||xhr.status,xhr.statusText,_data,xhr.getAllResponseHeaders())});xhr.addEventListener("error",function(){var _data={};_data[options.dataType]=xhr.response;_callback(xhr.status,xhr.statusText,_data,xhr.getAllResponseHeaders())});xhr.addEventListener("abort",function(){var _data={};_data[options.dataType]=xhr.response;_callback(xhr.status,xhr.statusText,_data,xhr.getAllResponseHeaders())});abortCallback_1=function(){xhr.abort()};xhr.open(type,url,async,username,password);for(var i in headers){if(headers.hasOwnProperty(i)){xhr.setRequestHeader(i,headers[i])}}xhr.responseType=dataType;xhr.send(data)},abort:function(){if(abortCallback_1){abortCallback_1()}}}}})})(Tools=CDP.Tools||(CDP.Tools={}))})(CDP||(CDP={}));var CDP;(function(CDP){var Tools;(function(Tools){var TAG="[CDP.Tools.DateTime] ";var DateTime=function(){function DateTime(){}DateTime.computeDate=function(base,addDays){var dt=new Date(base.getTime());var baseSec=dt.getTime();var addSec=addDays*864e5;var targetSec=baseSec+addSec;dt.setTime(targetSec);return dt};DateTime.convertISOStringToDate=function(dateString){var dateTime=dateString.split("T"),dateArray=dateTime[0].split("-");var timeArray,secArray,dateObject;if(dateTime[1]){timeArray=dateTime[1].split(":");secArray=timeArray[2].split(".")}if(timeArray){dateObject=new Date(dateArray[0],dateArray[1]-1,dateArray[2],timeArray[0],timeArray[1],secArray[0],secArray[1])}else{if(dateArray[2]){dateObject=new Date(dateArray[0],dateArray[1]-1,dateArray[2])}else if(dateArray[1]){dateObject=new Date(dateArray[0],dateArray[1]-1)}else{dateObject=new Date(dateArray[0])}}return dateObject};DateTime.convertDateToISOString=function(date,target){if(target===void 0){target="msec"}var isoDateString;switch(target){case"year":case"month":case"date":case"hour":case"min":case"sec":case"msec":break;default:console.warn(TAG+"unknown target: "+target);target="msec"}isoDateString=date.getFullYear();if("year"===target){return isoDateString}isoDateString+="-"+DateTime.numberToDoubleDigitsString(date.getMonth()+1);if("month"===target){return isoDateString}isoDateString+="-"+DateTime.numberToDoubleDigitsString(date.getDate());if("date"===target){return isoDateString}isoDateString+="T"+DateTime.numberToDoubleDigitsString(date.getHours());if("hour"===target){return isoDateString}isoDateString+=":"+DateTime.numberToDoubleDigitsString(date.getMinutes());if("min"===target){return isoDateString}isoDateString+=":"+DateTime.numberToDoubleDigitsString(date.getSeconds());if("sec"===target){return isoDateString}isoDateString+="."+String((date.getMilliseconds()/1e3).toFixed(3)).slice(2,5);return isoDateString};DateTime.convertFileSystemStringToDate=function(dateString){var dateTime=dateString.split("T"),dateArray=dateTime[0].split("_");var timeArray,dateObject;if(dateTime[1]){timeArray=dateTime[1].split("_")}if(timeArray){dateObject=new Date(dateArray[0],dateArray[1]-1,dateArray[2],timeArray[0],timeArray[1],timeArray[2],timeArray[3])}else{if(dateArray[2]){dateObject=new Date(dateArray[0],dateArray[1]-1,dateArray[2])}else if(dateArray[1]){dateObject=new Date(dateArray[0],dateArray[1]-1)}else{dateObject=new Date(dateArray[0])}}return dateObject};DateTime.convertDateToFileSystemString=function(date,target){if(target===void 0){target="msec"}var fileSystemString;switch(target){case"year":case"month":case"date":case"hour":case"min":case"sec":case"msec":break;default:console.warn(TAG+"unknown target: "+target);target="msec"}fileSystemString=date.getFullYear();if("year"===target){return fileSystemString}fileSystemString+="_"+DateTime.numberToDoubleDigitsString(date.getMonth()+1);if("month"===target){return fileSystemString}fileSystemString+="_"+DateTime.numberToDoubleDigitsString(date.getDate());if("date"===target){return fileSystemString}fileSystemString+="T"+DateTime.numberToDoubleDigitsString(date.getHours());if("hour"===target){return fileSystemString}fileSystemString+="_"+DateTime.numberToDoubleDigitsString(date.getMinutes());if("min"===target){return fileSystemString}fileSystemString+="_"+DateTime.numberToDoubleDigitsString(date.getSeconds());if("sec"===target){return fileSystemString}fileSystemString+="_"+String((date.getMilliseconds()/1e3).toFixed(3)).slice(2,5);return fileSystemString};DateTime.numberToDoubleDigitsString=function(num){if(num<0||num>100){return null}if(num<10){return"0"+num}return""+num};return DateTime}();Tools.DateTime=DateTime})(Tools=CDP.Tools||(CDP.Tools={}))})(CDP||(CDP={}));var CDP;(function(CDP){var Tools;(function(Tools){var TAG="[CDP.Tools.Functions] ";function abs(x){return x>=0?x:-x}Tools.abs=abs;function max(lhs,rhs){return lhs>=rhs?lhs:rhs}Tools.max=max;function min(lhs,rhs){return lhs<=rhs?lhs:rhs}Tools.min=min;function toZeroPadding(no,limit){var signed="";no=Number(no);if(isNaN(no)||isNaN(limit)||limit<=0){return null}if(no<0){no=Tools.abs(no);signed="-"}return signed+(Array(limit).join("0")+no).slice(-limit)}Tools.toZeroPadding=toZeroPadding;function inherit(subClass,superClass){var _prototype=subClass.prototype;function _inherit(){this.constructor=subClass}_inherit.prototype=superClass.prototype;subClass.prototype=new _inherit;$.extend(subClass.prototype,_prototype)}Tools.inherit=inherit;function mixin(derived){var bases=[];for(var _i=1;_i<arguments.length;_i++){bases[_i-1]=arguments[_i]}bases.forEach(function(base){Object.getOwnPropertyNames(base.prototype).forEach(function(name){derived.prototype[name]=base.prototype[name]})})}Tools.mixin=mixin;function extend(protoProps,staticProps){var parent=this;var child;if(protoProps&&protoProps.hasOwnProperty("constructor")){child=protoProps.constructor}else{child=function(){return parent.apply(this,arguments)}}$.extend(child,parent,staticProps);var Surrogate=function(){this.constructor=child};Surrogate.prototype=parent.prototype;child.prototype=new Surrogate;if(protoProps){$.extend(child.prototype,protoProps)}child.__super__=parent.prototype;return child}Tools.extend=extend;function getDevicePixcelRatio(){var mediaQuery;var is_firefox=navigator.userAgent.toLowerCase().indexOf("firefox")>-1;if(null!=window.devicePixelRatio&&!is_firefox){return window.devicePixelRatio}else if(window.matchMedia){mediaQuery="(-webkit-min-device-pixel-ratio: 1.5),                    (min--moz-device-pixel-ratio: 1.5),                    (-o-min-device-pixel-ratio: 3/2),                    (min-resolution: 1.5dppx)";if(window.matchMedia(mediaQuery).matches){return 1.5}mediaQuery="(-webkit-min-device-pixel-ratio: 2),                    (min--moz-device-pixel-ratio: 2),                    (-o-min-device-pixel-ratio: 2/1),                    (min-resolution: 2dppx)";if(window.matchMedia(mediaQuery).matches){return 2}mediaQuery="(-webkit-min-device-pixel-ratio: 0.75),                    (min--moz-device-pixel-ratio: 0.75),                    (-o-min-device-pixel-ratio: 3/4),                    (min-resolution: 0.75dppx)";if(window.matchMedia(mediaQuery).matches){return.7}}else{return 1}}Tools.getDevicePixcelRatio=getDevicePixcelRatio})(Tools=CDP.Tools||(CDP.Tools={}))})(CDP||(CDP={}));var CDP;(function(CDP){var Tools;(function(Tools){var TAG="[CDP.Tools.Template] ";var Template=function(){function Template(){}Template.getTemplateElement=function(key,src,cache){if(src===void 0){src=null}if(cache===void 0){cache=true}var mapElement=Template.getElementMap();var $element=mapElement[key];try{if(!$element){if(src){var html=Template.findHtmlFromSource(src);$element=$(html).find(key)}else{$element=$(key)}if($element<=0){throw"invalid [key, src] = ["+key+", "+src+"]"}if(src&&cache){mapElement[key]=$element}}}catch(exception){console.error(TAG+exception);return null}return $element};Template.empty=function(){Template._mapElement=null;Template._mapSource=null};Template.getJST=function(key,src,cache){var template=null;var jst;var $element;if(key instanceof jQuery){$element=key}else{$element=Template.getTemplateElement(key,src,cache)}if(null!=Tools.global.Hogan){template=Hogan.compile($element.text());jst=function(data){return template.render(data)}}else{template=_.template($element.html());jst=function(data){return template(data).replace(/\n|\t/g,"")}}return jst};Template.getElementMap=function(){if(!Template._mapElement){Template._mapElement={}}return Template._mapElement};Template.getSourceMap=function(){if(!Template._mapSource){Template._mapSource={}}return Template._mapSource};Template.findHtmlFromSource=function(src){var mapSource=Template.getSourceMap();var html=mapSource[src];if(!html){$.ajax({url:src,method:"GET",async:false,dataType:"html",success:function(data){html=data},error:function(data,status){throw"ajax request failed. status: "+status}});mapSource[src]=html}return html};return Template}();Tools.Template=Template})(Tools=CDP.Tools||(CDP.Tools={}))})(CDP||(CDP={}));return CDP.Tools});
//# sourceMappingURL=cdp.tools.min.js.map