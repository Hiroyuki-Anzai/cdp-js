/*!
 * cdp.ui.jqm.js 2.0.0
 *
 * Date: 2017-07-03T07:15:24.231Z
 */
(function(root,factory){if(typeof define==="function"&&define.amd){define(["cdp.framework.jqm","cdp.tools","cdp.ui.listview"],function(){return factory(root.CDP||(root.CDP={}))})}else{factory(root.CDP||(root.CDP={}))}})(this,function(CDP){CDP.UI=CDP.UI||{};var CDP;(function(CDP){var UI;(function(UI){var Config=CDP.Config;var Framework=CDP.Framework;var Theme=function(){function Theme(){}Theme.getCurrentUIPlatform=function(){var $htms=$("html");for(var i=0,n=this.s_platforms.length;i<n;i++){if($htms.hasClass("ui-platform-"+this.s_platforms[i])){return this.s_platforms[i]}}return null};Theme.setCurrentUIPlatform=function(platform){if(null==platform||this.s_platforms.indexOf(platform)>=0){var $htms_1=$("html");this.s_platforms.forEach(function(target){$htms_1.removeClass("ui-platform-"+target)});if(platform){$htms_1.addClass("ui-platform-"+platform)}return true}else{return false}};Theme.detectUIPlatform=function(){if(Framework.Platform.iOS){$("html").addClass("ui-platform-ios")}else{$("html").addClass("ui-platform-android")}if(Config.DEBUG&&!Framework.Platform.Mobile){$("body").css("overflow-y","scroll")}};Theme.setUIPlatforms=function(platforms){if(platforms){this.s_platforms=platforms}};Theme.setPageTransitionMap=function(map){if(map){this.s_pageTransitionMap=map}};Theme.setDialogTransitionMap=function(map){if(map){this.s_dialogTransitionMap=map}};Theme.queryPageTransition=function(original){var convert=this.s_pageTransitionMap[original];if(convert){return convert[this.getCurrentUIPlatform()]||convert.fallback}else{return original}};Theme.queryDialogTransition=function(original){var convert=this.s_dialogTransitionMap[original];if(convert){return convert[this.getCurrentUIPlatform()]||convert.fallback}else{return original}};Theme.s_platforms=["ios","android"];Theme.s_pageTransitionMap={"platform-default":{ios:"slide",android:"floatup",fallback:"slide"},"platform-alternative":{ios:"slideup",android:"floatup",fallback:"slideup"}};Theme.s_dialogTransitionMap={"platform-default":{ios:"popzoom",android:"crosszoom",fallback:"none"}};return Theme}();UI.Theme=Theme;function applyCustomChangePage(){var jqmChangePage=_.bind($.mobile.changePage,$.mobile);function customChangePage(to,options){if(_.isString(to)){if(options&&options.transition){options.transition=Theme.queryPageTransition(options.transition)}}jqmChangePage(to,options)}$.mobile.changePage=customChangePage}Framework.waitForInitialize().done(function(){applyCustomChangePage()})})(UI=CDP.UI||(CDP.UI={}))})(CDP||(CDP={}));var CDP;(function(CDP){var UI;(function(UI){var ExtensionManager=function(){function ExtensionManager(){}ExtensionManager.registerDomExtension=function(func){this.s_domExtensions.push(func)};ExtensionManager.applyDomExtension=function($ui,options){this.s_domExtensions.forEach(function(func){func($ui,options)})};ExtensionManager.s_domExtensions=[];return ExtensionManager}();UI.ExtensionManager=ExtensionManager})(UI=CDP.UI||(CDP.UI={}))})(CDP||(CDP={}));var CDP;(function(CDP){var UI;(function(UI){var TAG="[CDP.UI.Toast] ";var Toast;(function(Toast){Toast.LENGTH_SHORT=1500;Toast.LENGTH_LONG=4e3;var OffsetX;(function(OffsetX){OffsetX[OffsetX["LEFT"]=1]="LEFT";OffsetX[OffsetX["RIGHT"]=2]="RIGHT";OffsetX[OffsetX["CENTER"]=4]="CENTER"})(OffsetX=Toast.OffsetX||(Toast.OffsetX={}));var OffsetY;(function(OffsetY){OffsetY[OffsetY["TOP"]=16]="TOP";OffsetY[OffsetY["BOTTOM"]=32]="BOTTOM";OffsetY[OffsetY["CENTER"]=64]="CENTER"})(OffsetY=Toast.OffsetY||(Toast.OffsetY={}));var StyleBuilderDefault=function(){function StyleBuilderDefault(){}StyleBuilderDefault.prototype.getClass=function(){return"ui-loader ui-overlay-shadow ui-corner-all"};StyleBuilderDefault.prototype.getStyle=function(){var style={padding:"7px 25px 7px 25px",display:"block","background-color":"#1d1d1d","border-color":"#1b1b1b",color:"#fff","text-shadow":"0 1px 0 #111","font-weight":"bold",opacity:.8};return style};StyleBuilderDefault.prototype.getOffsetPoint=function(){return OffsetX.CENTER|OffsetY.BOTTOM};StyleBuilderDefault.prototype.getOffsetX=function(){return 0};StyleBuilderDefault.prototype.getOffsetY=function(){return-75};return StyleBuilderDefault}();Toast.StyleBuilderDefault=StyleBuilderDefault;function show(message,duration,style){if(duration===void 0){duration=Toast.LENGTH_SHORT}var $mobile=$.mobile;var info=style||new StyleBuilderDefault;var setCSS=info.getStyle()?true:false;var msg=message.replace(/\n/g,"<br/>");var html="<div>"+msg+"</div>";var box=$(html).addClass(info.getClass());if(setCSS){box.css(info.getStyle())}box.css({top:0,left:0}).appendTo($mobile.pageContainer);var offsetPoint=info.getOffsetPoint();var $window=$(window);var posX,posY;var box_width=box.width()+parseInt(box.css("padding-left"),10)+parseInt(box.css("padding-right"),10);var box_height=box.height()+parseInt(box.css("padding-top"),10)+parseInt(box.css("padding-bottom"),10);switch(offsetPoint&15){case OffsetX.LEFT:posX=0+info.getOffsetX();break;case OffsetX.RIGHT:posX=$window.width()-box_width+info.getOffsetX();break;case OffsetX.CENTER:posX=$window.width()/2-box_width/2+info.getOffsetX();break;default:console.warn(TAG+"warn. unknown offsetPoint:"+(offsetPoint&15));posX=$window.width()/2-box_width/2+info.getOffsetX();break}switch(offsetPoint&240){case OffsetY.TOP:posY=0+info.getOffsetY();break;case OffsetY.BOTTOM:posY=$window.height()-box_height+info.getOffsetY();break;case OffsetY.CENTER:posY=$window.height()/2-box_height/2+info.getOffsetY();break;default:console.warn(TAG+"warn. unknown offsetPoint:"+(offsetPoint&240));posY=$window.height()/2-box_height/2+info.getOffsetY();break}box.css({top:posY,left:posX}).delay(duration).fadeOut(400,function(){$(this).remove()})}Toast.show=show})(Toast=UI.Toast||(UI.Toast={}))})(UI=CDP.UI||(CDP.UI={}))})(CDP||(CDP={}));var CDP;(function(CDP){var UI;(function(UI){var Promise=CDP.Promise;var Framework=CDP.Framework;var TAG="[CDP.UI.Dialog] ";var Dialog=function(){function Dialog(id,options){this._template=null;this._settings=null;this._$dialog=null;Dialog.initCommonCondition();this._settings=$.extend({},Dialog.s_defaultOptions,options);this._template=CDP.Tools.Template.getJST(id,this._settings.src)}Dialog.prototype.show=function(options){var _this=this;var $document=$(document);var $body=$("body");var $page=$body.pagecontainer("getActivePage");var ofcHidden={overflow:"hidden","overflow-x":"hidden","overflow-y":"hidden"};var ofcBody={overflow:$body.css("overflow"),"overflow-x":$body.css("overflow-x"),"overflow-y":$body.css("overflow-y")};var parentScrollPos=$body.scrollTop();var ofcPage={overflow:$page.css("overflow"),"overflow-x":$page.css("overflow-x"),"overflow-y":$page.css("overflow-y")};var scrollEvent="scroll touchmove mousemove MSPointerMove";var scrollHander=function(event){if("deny"===_this._settings.scrollEvent){event.preventDefault()}else if("adjust"===_this._settings.scrollEvent){$body.scrollTop(parentScrollPos)}};if(null!=options){this._settings=$.extend({},this._settings,options)}if(this._settings.afterclose&&!this._settings.forceOverwriteAfterClose){console.warn(TAG+"cannot accept 'afterclose' option. please instead using 'popupafterclose' event.");delete this._settings.afterclose}this._settings._titleState=this._settings.title?"ui-has-title":"ui-no-title";this._$dialog=$(this._template(this._settings));this._$dialog.localize();$body.append(this._$dialog);this.resolveTheme();this._$dialog.on("popupcreate",function(event){if("allow"!==_this._settings.scrollEvent){$document.on(scrollEvent,scrollHander)}$body.css(ofcHidden);$page.css(ofcHidden);Dialog.register(_this)}).enhanceWithin();if(null!=this._settings.domExtensionOptions){UI.ExtensionManager.applyDomExtension(this._$dialog,this._settings.domExtensionOptions)}this.onBeforeShow().done(function(){_this._$dialog.popup($.extend({},{positionTo:"window",afterclose:function(event,ui){$page.css(ofcPage);$body.css(ofcBody);if("allow"!==_this._settings.scrollEvent){$document.off(scrollEvent,scrollHander)}Dialog.register(null);_this._$dialog.remove();_this._$dialog=null}},_this._settings)).popup("open").on(_this._settings.event,function(event){var autoClose=$(event.target).attr("data-auto-close");if(null==autoClose){autoClose=_this._settings.defaultAutoClose?"true":"false"}if("false"===autoClose){return}_this.close();event.preventDefault()})}).fail(function(error){console.error(TAG+"Dialog.show() failed.");if(_this._$dialog){_this._$dialog.trigger("error",error)}});return this._$dialog};Dialog.prototype.close=function(){if(this._$dialog){this._$dialog.popup("close")}};Object.defineProperty(Dialog.prototype,"$el",{get:function(){return this._$dialog},enumerable:true,configurable:true});Dialog.prototype.onBeforeShow=function(){return Promise.resolve()};Dialog.prototype.resolveTheme=function(){var queryTheme=function(){return $(".ui-page-active").jqmData("theme")};var candidateTheme;if(!this._settings.theme){var domTheme=this._$dialog.jqmData("theme");if(!domTheme){this._settings.theme=candidateTheme=queryTheme()}}if(!this._settings.overlayTheme){var domOverlayTheme=this._$dialog.jqmData("overlay-theme");if(!domOverlayTheme){this._settings.overlayTheme=candidateTheme||queryTheme()}}this._settings.transition=UI.Theme.queryDialogTransition(this._settings.transition)};Dialog.setDefaultOptions=function(options){Dialog.initCommonCondition();$.extend(true,Dialog.s_defaultOptions,options)};Dialog.register=function(dialog){if(null!=dialog&&null!=Dialog.s_activeDialog){console.warn(TAG+"new dialog proc is called in the past dialog's one. use setTimeout() for post process.")}Dialog.s_activeDialog=dialog};Dialog.initCommonCondition=function(){if(!Framework.isInitialized()){console.warn(TAG+"initCommonCondition() should be called after Framework.initialized.");return}if(null==Dialog.s_oldBackKeyHandler){Dialog.s_oldBackKeyHandler=CDP.setBackButtonHandler(null);CDP.setBackButtonHandler(Dialog.customBackKeyHandler);Dialog.s_defaultOptions={idPositive:"dlg-btn-positive",idNegative:"dlg-btn-negative",event:Framework.getDefaultClickEvent(),dismissible:false,defaultAutoClose:false,transition:"platform-default",labelPositive:"OK",labelNegative:"Cancel",backKey:"close",scrollEvent:"deny",domExtensionOptions:{}}}};Dialog.customBackKeyHandler=function(event){if(null!=Dialog.s_activeDialog){if("close"===Dialog.s_activeDialog._settings.backKey){Dialog.s_activeDialog.close()}else if("function"===typeof Dialog.s_activeDialog._settings.backKey){Dialog.s_activeDialog._settings.backKey(event)}return}Dialog.s_oldBackKeyHandler(event)};Dialog.s_activeDialog=null;Dialog.s_oldBackKeyHandler=null;Dialog.s_defaultOptions=null;return Dialog}();UI.Dialog=Dialog})(UI=CDP.UI||(CDP.UI={}))})(CDP||(CDP={}));var __extends=this&&this.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p]};return function(d,b){extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}();var CDP;(function(CDP){var UI;(function(UI){var TAG="[CDP.UI.DialogCommons] ";function alert(message,options){var template='\n            <script type="text/template">\n                <section class="ui-modal" data-role="popup" data-corners="false">\n                    <div class="ui-content">\n                        <h1 class="ui-title {{_titleState}}">{{title}}</h1>\n                        <p class="ui-message">{{message}}</p>\n                    </div>\n                    <div class="ui-modal-footer ui-grid-solo">\n                        <button id="{{idPositive}}" class="ui-btn ui-block-a ui-text-emphasis" data-auto-close="true">{{labelPositive}}</button>\n                    </div>\n                </section>\n            <\/script>\n        ';var dlgAlert=new UI.Dialog(template,$.extend({},{src:null,message:message},options));return dlgAlert.show()}UI.alert=alert;function confirm(message,options){var template='\n            <script type="text/template">\n                <section class="ui-modal" data-role="popup" data-corners="false">\n                    <div class="ui-content">\n                        <h1 class="ui-title {{_titleState}}">{{title}}</h1>\n                        <p class="ui-message">{{message}}</p>\n                    </div>\n                    <div class="ui-modal-footer ui-grid-a">\n                        <button id="{{idNegative}}" class="ui-btn ui-block-a" data-auto-close="true">{{labelNegative}}</button>\n                        <button id="{{idPositive}}" class="ui-btn ui-block-b ui-text-emphasis" data-auto-close="true">{{labelPositive}}</button>\n                    </div>\n                </section>\n            <\/script>\n        ';var dlgConfirm=new UI.Dialog(template,$.extend({},{src:null,message:message},options));return dlgConfirm.show()}UI.confirm=confirm;var DialogPrompt=function(_super){__extends(DialogPrompt,_super);function DialogPrompt(id,options){var _this=_super.call(this,id,options)||this;_this._eventOK=options.eventOK||"promptok";return _this}DialogPrompt.prototype.onBeforeShow=function(){var _this=this;this.$el.on("vclick",".command-prompt-ok ",function(event){var text=_this.$el.find("#_ui-prompt").val();_this.$el.trigger(_this._eventOK,text);_this.close();event.preventDefault()});return _super.prototype.onBeforeShow.call(this)};return DialogPrompt}(UI.Dialog);function prompt(message,options){var template='\n            <script type="text/template">\n                <section class="ui-modal" data-role="popup" data-corners="false">\n                    <div class="ui-content">\n                        <h1 class="ui-title {{_titleState}}">{{title}}</h1>\n                        <p class="ui-message">{{message}}</p>\n                        <label for="_ui-prompt" class="ui-hidden-accessible"></label>\n                        <input type="text" name="_ui-prompt" id="_ui-prompt">\n                    </div>\n                    <div class="ui-modal-footer ui-grid-a">\n                        <button id="{{idNegative}}" class="ui-btn ui-block-a" data-auto-close="true">{{labelNegative}}</button>\n                        <button id="{{idPositive}}" class="command-prompt-ok ui-btn ui-block-b ui-text-emphasis" data-auto-close="false">{{labelPositive}}</button>\n                    </div>\n                </section>\n            <\/script>\n        ';var dlgPrompt=new DialogPrompt(template,$.extend({},{src:null,message:message},options));return dlgPrompt.show()}UI.prompt=prompt})(UI=CDP.UI||(CDP.UI={}))})(CDP||(CDP={}));var CDP;(function(CDP){var UI;(function(UI){var Router=CDP.Framework.Router;var View=CDP.Framework.View;var Template=CDP.Tools.Template;var TAG="[CDP.UI.BaseHeaderView] ";var BaseHeaderView=function(_super){__extends(BaseHeaderView,_super);function BaseHeaderView(_owner,_options){var _this=_super.call(this,_options=$.extend({el:_owner.$page.find("[data-role='header']"),backCommandSelector:".command-back",backCommandKind:"pageback"},_options))||this;_this._owner=_owner;_this._options=_options;if(_options.baseTemplate){_this._template=_options.baseTemplate}else{_this._template=Template.getJST("\n                    <script type='text/template'>\n                        <header class='ui-header-base ui-body-{{theme}}'>\n                            <div class='ui-fixed-back-indicator'></div>\n                        </header>\n                    <\/script>\n                ")}_this.setElement(_this.$el,true);return _this}BaseHeaderView.prototype.create=function(){return this.createHeaderBase()};BaseHeaderView.prototype.activate=function(){return this.showIndicator()};BaseHeaderView.prototype.inactivate=function(){return this.hideIndicator()};BaseHeaderView.prototype.release=function(){return this.releaseHeaderBase()};BaseHeaderView.prototype.createHeaderBase=function(){if("fixed"===this._owner.$header.jqmData("position")){if(null==BaseHeaderView.s_$headerBase){BaseHeaderView.s_$headerBase=$(this._template({theme:this._owner.$page.jqmData("theme")}))}BaseHeaderView.s_refCount++;BaseHeaderView.s_$headerBase.appendTo($(document.body))}if(0<this.$el.find(".ui-back-indicator").length){this._hasBackIndicator=true}return BaseHeaderView.s_$headerBase};BaseHeaderView.prototype.showIndicator=function(){if(null!=BaseHeaderView.s_$headerBase&&this._hasBackIndicator){BaseHeaderView.s_$headerBase.find(".ui-fixed-back-indicator").addClass("show")}return BaseHeaderView.s_$headerBase};BaseHeaderView.prototype.hideIndicator=function(){if(null!=BaseHeaderView.s_$headerBase){BaseHeaderView.s_$headerBase.find(".ui-fixed-back-indicator").removeClass("show")}return BaseHeaderView.s_$headerBase};BaseHeaderView.prototype.releaseHeaderBase=function(){if(null!=BaseHeaderView.s_$headerBase){BaseHeaderView.s_refCount--;if(0===BaseHeaderView.s_refCount){BaseHeaderView.s_$headerBase.remove();BaseHeaderView.s_$headerBase=null}}return BaseHeaderView.s_$headerBase};BaseHeaderView.prototype.events=function(){var eventMap={};if(this._options){eventMap["vclick "+this._options.backCommandSelector]=this.onCommandBack}return eventMap};BaseHeaderView.prototype.onCommandBack=function(event){event.preventDefault();var handled=false;if(this._owner){handled=this._owner.onCommand(event,this._options.backCommandKind)}if(!handled){Router.back()}};BaseHeaderView.s_refCount=0;return BaseHeaderView}(View);UI.BaseHeaderView=BaseHeaderView})(UI=CDP.UI||(CDP.UI={}))})(CDP||(CDP={}));var CDP;(function(CDP){var UI;(function(UI){var Framework=CDP.Framework;var TAG="[CDP.UI.BasePage] ";var BasePage=function(_super){__extends(BasePage,_super);function BasePage(url,id,_options){var _this=_super.call(this,url,id,_options=$.extend({baseHeader:UI.BaseHeaderView,backCommandHandler:"onPageBack",backCommandKind:"pageback",domExtensionOptions:{}},_options))||this;_this._options=_options;return _this}BasePage.prototype.onPageBeforeCreate=function(event){if(this._options.baseHeader){this._baseHeader=new this._options.baseHeader(this,this._options);this._baseHeader.create()}_super.prototype.onPageBeforeCreate.call(this,event)};BasePage.prototype.onPageInit=function(event){if(null!=this._options.domExtensionOptions){UI.ExtensionManager.applyDomExtension(this.$page,this._options.domExtensionOptions)}_super.prototype.onPageInit.call(this,event)};BasePage.prototype.onPageBeforeShow=function(event,data){if(this._baseHeader){this._baseHeader.activate()}_super.prototype.onPageBeforeShow.call(this,event,data)};BasePage.prototype.onPageBeforeHide=function(event,data){if(this._baseHeader){this._baseHeader.inactivate()}_super.prototype.onPageBeforeHide.call(this,event,data)};BasePage.prototype.onPageRemove=function(event){if(this._baseHeader){this._baseHeader.release();this._baseHeader=null}_super.prototype.onPageRemove.call(this,event)};BasePage.prototype.onHardwareBackButton=function(event){var retval=_super.prototype.onHardwareBackButton.call(this,event);if(!retval){retval=this.onCommand(event,this._options.backCommandKind)}return retval};BasePage.prototype.onCommand=function(event,kind){if(this._options.backCommandKind===kind){if(this._owner&&this._owner[this._options.backCommandHandler]){return this._owner[this._options.backCommandHandler](event)}}return false};return BasePage}(Framework.Page);UI.BasePage=BasePage})(UI=CDP.UI||(CDP.UI={}))})(CDP||(CDP={}));var CDP;(function(CDP){var UI;(function(UI){var Promise=CDP.Promise;var Framework=CDP.Framework;var TAG="[CDP.UI.PageView] ";var PageContainerView=function(_super){__extends(PageContainerView,_super);function PageContainerView(options){var _this=_super.call(this,options)||this;_this._owner=null;_this._owner=options.owner;if(options.$el){var delegates=_this.events?true:false;_this.setElement(options.$el,delegates)}return _this}Object.defineProperty(PageContainerView.prototype,"owner",{get:function(){return this._owner},enumerable:true,configurable:true});return PageContainerView}(Framework.View);UI.PageContainerView=PageContainerView;var PageView=function(_super){__extends(PageView,_super);function PageView(url,id,options){var _this=_super.call(this,options)||this;_this._pageOptions=null;_this._basePage=null;_this._statusMgr=null;_this._pageOptions=$.extend({},{owner:_this},options);_this._basePage=_this._pageOptions.basePage?new _this._pageOptions.basePage(url,id,_this._pageOptions):new UI.BasePage(url,id,_this._pageOptions);_this._statusMgr=new UI.StatusManager;var delegates=_this.events?true:false;_this.setElement(_this.$page,delegates);return _this}PageView.prototype.statusAddRef=function(status){return this._statusMgr.statusAddRef(status)};PageView.prototype.statusRelease=function(status){return this._statusMgr.statusRelease(status)};PageView.prototype.statusScope=function(status,callback){this._statusMgr.statusScope(status,callback)};PageView.prototype.isStatusIn=function(status){return this._statusMgr.isStatusIn(status)};Object.defineProperty(PageView.prototype,"active",{get:function(){return this._basePage.active},enumerable:true,configurable:true});Object.defineProperty(PageView.prototype,"url",{get:function(){return this._basePage.url},enumerable:true,configurable:true});Object.defineProperty(PageView.prototype,"id",{get:function(){return this._basePage?this._basePage.id:null},enumerable:true,configurable:true});Object.defineProperty(PageView.prototype,"$page",{get:function(){return this._basePage.$page},enumerable:true,configurable:true});Object.defineProperty(PageView.prototype,"$header",{get:function(){return this._basePage.$header},enumerable:true,configurable:true});Object.defineProperty(PageView.prototype,"$footer",{get:function(){return this._basePage.$footer},enumerable:true,configurable:true});Object.defineProperty(PageView.prototype,"intent",{get:function(){return this._basePage.intent},set:function(newIntent){this._basePage.intent=newIntent},enumerable:true,configurable:true});PageView.prototype.onOrientationChanged=function(newOrientation){};PageView.prototype.onHardwareBackButton=function(event){return false};PageView.prototype.onBeforeRouteChange=function(){return Promise.resolve()};PageView.prototype.onCommand=function(event,kind){return false};PageView.prototype.onInitialize=function(event){};PageView.prototype.onPageBeforeCreate=function(event){this.setElement(this.$page,true)};PageView.prototype.onPageInit=function(event){};PageView.prototype.onPageBeforeShow=function(event,data){};PageView.prototype.onPageShow=function(event,data){};PageView.prototype.onPageBeforeHide=function(event,data){};PageView.prototype.onPageHide=function(event,data){};PageView.prototype.onPageRemove=function(event){this.remove()};return PageView}(Framework.View);UI.PageView=PageView})(UI=CDP.UI||(CDP.UI={}))})(CDP||(CDP={}));var CDP;(function(CDP){var UI;(function(UI){var TAG="[CDP.UI.PageListView] ";var PageListView=function(_super){__extends(PageListView,_super);function PageListView(url,id,options){var _this=_super.call(this,url,id,$.extend({},{autoDestoryElement:false},options))||this;_this._scrollMgr=null;_this._needRebuild=false;_this._scrollMgr=new UI.ScrollManager(options);return _this}PageListView.prototype.reserveRebuild=function(){this._needRebuild=true};PageListView.prototype.onOrientationChanged=function(newOrientation){this._scrollMgr.setBaseHeight(this.getPageBaseHeight())};PageListView.prototype.onBeforeRouteChange=function(){if(this._pageOptions.autoDestoryElement){this._scrollMgr.destroy()}return _super.prototype.onBeforeRouteChange.call(this)};PageListView.prototype.onPageBeforeShow=function(event,data){_super.prototype.onPageBeforeShow.call(this,event,data);this._scrollMgr.initialize(this.$page,this.getPageBaseHeight())};PageListView.prototype.onPageShow=function(event,data){_super.prototype.onPageShow.call(this,event,data);this._scrollMgr.setBaseHeight(this.getPageBaseHeight());if(this._needRebuild){this.rebuild();this._needRebuild=false}};PageListView.prototype.onPageRemove=function(event){_super.prototype.onPageRemove.call(this,event);this.release()};PageListView.prototype.isInitialized=function(){return this._scrollMgr.isInitialized()};PageListView.prototype.addItem=function(height,initializer,info,insertTo){this._addLine(new UI.LineProfile(this._scrollMgr,Math.floor(height),initializer,info),insertTo)};PageListView.prototype.removeItem=function(index,arg2,arg3){this._scrollMgr.removeItem(index,arg2,arg3)};PageListView.prototype.getItemInfo=function(target){return this._scrollMgr.getItemInfo(target)};PageListView.prototype.refresh=function(){this._scrollMgr.refresh()};PageListView.prototype.update=function(){this._scrollMgr.update()};PageListView.prototype.rebuild=function(){this._scrollMgr.rebuild()};PageListView.prototype.release=function(){this._scrollMgr.release()};PageListView.prototype.backup=function(key){return this._scrollMgr.backup(key)};PageListView.prototype.restore=function(key,rebuild){if(rebuild===void 0){rebuild=true}var retval=this._scrollMgr.restore(key,rebuild);if(retval&&!rebuild){this.reserveRebuild()}return retval};PageListView.prototype.hasBackup=function(key){return this._scrollMgr.hasBackup(key)};PageListView.prototype.clearBackup=function(key){return this._scrollMgr.clearBackup(key)};Object.defineProperty(PageListView.prototype,"backupData",{get:function(){return this._scrollMgr.backupData},enumerable:true,configurable:true});PageListView.prototype.setScrollHandler=function(handler,on){this._scrollMgr.setScrollHandler(handler,on)};PageListView.prototype.setScrollStopHandler=function(handler,on){this._scrollMgr.setScrollStopHandler(handler,on)};PageListView.prototype.getScrollPos=function(){return this._scrollMgr.getScrollPos()};PageListView.prototype.getScrollPosMax=function(){return this._scrollMgr.getScrollPosMax()};PageListView.prototype.scrollTo=function(pos,animate,time){this._scrollMgr.scrollTo(pos,animate,time)};PageListView.prototype.ensureVisible=function(index,options){this._scrollMgr.ensureVisible(index,options)};Object.defineProperty(PageListView.prototype,"core",{get:function(){return this._scrollMgr},enumerable:true,configurable:true});PageListView.prototype._addLine=function(_line,insertTo){this._scrollMgr._addLine(_line,insertTo)};PageListView.prototype.getPageBaseHeight=function(){return $(window).height()-parseInt(this.$page.css("padding-top"),10)};return PageListView}(UI.PageView);UI.PageListView=PageListView})(UI=CDP.UI||(CDP.UI={}))})(CDP||(CDP={}));var CDP;(function(CDP){var UI;(function(UI){var TAG="[CDP.UI.PageExpandableListView] ";var PageExpandableListView=function(_super){__extends(PageExpandableListView,_super);function PageExpandableListView(url,id,options){var _this=_super.call(this,url,id,options)||this;_this._expandManager=null;_this._expandManager=new UI.ExpandManager(_this);return _this}PageExpandableListView.prototype.newGroup=function(id){return this._expandManager.newGroup(id)};PageExpandableListView.prototype.getGroup=function(id){return this._expandManager.getGroup(id)};PageExpandableListView.prototype.registerTopGroup=function(topGroup){this._expandManager.registerTopGroup(topGroup)};PageExpandableListView.prototype.getTopGroups=function(){return this._expandManager.getTopGroups()};PageExpandableListView.prototype.expandAll=function(){this._expandManager.expandAll()};PageExpandableListView.prototype.collapseAll=function(delay){this._expandManager.collapseAll(delay)};PageExpandableListView.prototype.isExpanding=function(){return this._expandManager.isExpanding()};PageExpandableListView.prototype.isCollapsing=function(){return this._expandManager.isCollapsing()};PageExpandableListView.prototype.isSwitching=function(){return this._expandManager.isSwitching()};Object.defineProperty(PageExpandableListView.prototype,"layoutKey",{get:function(){return this._expandManager.layoutKey},set:function(key){this._expandManager.layoutKey=key},enumerable:true,configurable:true});PageExpandableListView.prototype.release=function(){_super.prototype.release.call(this);this._expandManager.release()};PageExpandableListView.prototype.backup=function(key){return this._expandManager.backup(key)};PageExpandableListView.prototype.restore=function(key,rebuild){if(rebuild===void 0){rebuild=true}return this._expandManager.restore(key,rebuild)};return PageExpandableListView}(UI.PageListView);UI.PageExpandableListView=PageExpandableListView})(UI=CDP.UI||(CDP.UI={}))})(CDP||(CDP={}));var CDP;(function(CDP){var UI;(function(UI){var Extension;(function(Extension){var Framework=CDP.Framework;$.fn.ripple=function(options){var $el=$(this);return $el.on(Framework.Patch.s_vclickEvent,function(event){var surface=$(this);if(surface.find(".ui-ripple-ink").length===0){surface.prepend("<div class='ui-ripple-ink'></div>")}var ink=surface.find(".ui-ripple-ink");ink.removeClass("ui-ripple-animate");if(!ink.height()&&!ink.width()){var d=Math.max(surface.outerWidth(),surface.outerHeight());ink.css({height:d,width:d})}var x=event.pageX-surface.offset().left-ink.width()/2;var y=event.pageY-surface.offset().top-ink.height()/2;var rippleColor=surface.data("ripple-color");var ANIMATION_END_EVENT="animationend webkitAnimationEnd";ink.on(ANIMATION_END_EVENT,function(ev){ink.off();ink.removeClass("ui-ripple-animate");ink=null});ink.css({top:y+"px",left:x+"px",background:rippleColor}).addClass("ui-ripple-animate")})};function applyDomExtension($ui,options){var NO_RIPPLE_CLASS=[".ui-ripple-none",".ui-flipswitch-on",".ui-slider-handle",".ui-input-clear"];var selector=".ui-btn";if($ui.hasClass("ui-page")){selector=".ui-content .ui-btn"}$ui.find(selector).filter(function(index,elem){var $elem=$(elem);if($elem.is(NO_RIPPLE_CLASS.join(","))){return false}else{return true}}).addClass("ui-ripple");$ui.find(".ui-ripple").ripple();return $ui}UI.ExtensionManager.registerDomExtension(applyDomExtension)})(Extension=UI.Extension||(UI.Extension={}))})(UI=CDP.UI||(CDP.UI={}))})(CDP||(CDP={}));var CDP;(function(CDP){var UI;(function(UI){var Extension;(function(Extension){var Template=CDP.Tools.Template;var _template;function applyDomExtension($target,options){if(!_template){_template=Template.getJST('\n                <script type="text/template">\n                    <span class="ui-spinner-base">\n                        <span class="ui-spinner-inner">\n                            <span class="ui-spinner-inner-gap" {{borderTop}}></span>\n                            <span class="ui-spinner-inner-left">\n                                <span class="ui-spinner-inner-half-circle" {{border}}></span>\n                            </span>\n                            <span class="ui-spinner-inner-right">\n                                <span class="ui-spinner-inner-half-circle" {{border}}></span>\n                            </span>\n                        </span>\n                    </span>\n                <\/script>\n            ')}var makeTemplateParam=function(color){return{borderTop:"style=border-top-color:"+color+";",border:"style=border-color:"+color+";"}};var spinnerify=function(elem){var $elem=$(elem);var color=$elem.data("spinner-color");var param=null;if(color){$elem.css({"background-color":color});param=makeTemplateParam(color)}$elem.append(_template(param))};$target.find(".ui-spinner, .ui-icon-loading").each(function(index,elem){spinnerify(elem)});return $target}$.fn.spinner=function(options){return applyDomExtension($(this),options)};UI.ExtensionManager.registerDomExtension(applyDomExtension)})(Extension=UI.Extension||(UI.Extension={}))})(UI=CDP.UI||(CDP.UI={}))})(CDP||(CDP={}));var CDP;(function(CDP){var UI;(function(UI){var Extension;(function(Extension){function applyDomExtension($ui,options){var update=function(elem,floating){var $elem=$(elem);if(floating){$elem.addClass("ui-float-label-floating")}else{$elem.removeClass("ui-float-label-floating")}};var floatingify=function(elem){var id=$(elem).attr("for");var $input=$ui.find("#"+id);if("search"===$input.jqmData("type")){$(elem).addClass("ui-float-label-has-icon")}update(elem,!!$input.val());$input.on("keyup change input focus blur cut paste",function(event){update(elem,!!$(event.target).val())})};$ui.find("label.ui-float-label, .ui-float-label label").each(function(index,elem){floatingify(elem)});return $ui}UI.ExtensionManager.registerDomExtension(applyDomExtension)})(Extension=UI.Extension||(UI.Extension={}))})(UI=CDP.UI||(CDP.UI={}))})(CDP||(CDP={}));var CDP;(function(CDP){var UI;(function(UI){var Extension;(function(Extension){var Framework=CDP.Framework;function applyDomExtension($ui,options){var _getAllSwitches=function(){return $ui.find(".ui-flipswitch")};var _getInputFromSwitch=function($switch){var $input=$switch.find("input");if($input.length){return $input}var $select=$switch.find("select");if($select.length){return $select}return null};var _change=function($input,to){if($input){if("INPUT"===$input[0].nodeName){$input.prop("checked",to).flipswitch("refresh")}else if("SELECT"===$input[0].nodeName){$input.val(to?"on":"off").flipswitch("refresh")}}};var _getLabelsFromSwitch=function($switch){var $input=_getInputFromSwitch($switch);if($input){var labels=$input[0].labels;if(labels){return $(labels)}}return $()};var _getSwitchFromLabel=function($label){var name=$label.attr("for");return _getAllSwitches().find("[name='"+name+"']")};_getAllSwitches().on("vclick _change_flipswich",function(event){var $switch=$(event.currentTarget);var $target=$(event.target);var $input=_getInputFromSwitch($switch);var changeTo=!$switch.hasClass("ui-flipswitch-active");if($target.hasClass("ui-flipswitch-input")){_change($input,changeTo)}else if($target.hasClass("ui-flipswitch-on")){if(Framework.Platform.Mobile&&Framework.Patch.isSupportedVclick()){_change($input,changeTo);event.preventDefault()}}}).each(function(index,flipswitch){_getLabelsFromSwitch($(flipswitch)).on("vclick",function(event){var $switch=_getSwitchFromLabel($(event.target));if(!$switch.parent().hasClass("ui-state-disabled")){$switch.trigger("_change_flipswich")}event.preventDefault()})});return $ui}UI.ExtensionManager.registerDomExtension(applyDomExtension)})(Extension=UI.Extension||(UI.Extension={}))})(UI=CDP.UI||(CDP.UI={}))})(CDP||(CDP={}));var CDP;(function(CDP){var UI;(function(UI){var Extension;(function(Extension){function applyDomExtension($ui,options){$ui.find(".ui-slider-input").on("slidestop",function(event){var $handles=$(event.currentTarget).parent().find(".ui-slider-handle");$handles.blur()});return $ui}UI.ExtensionManager.registerDomExtension(applyDomExtension)})(Extension=UI.Extension||(UI.Extension={}))})(UI=CDP.UI||(CDP.UI={}))})(CDP||(CDP={}));var CDP;(function(CDP){var UI;(function(UI){var Extension;(function(Extension){var patch_IScroll_utils_click=function(event){var target=event.target;var e=event;var ev;if(null==target.clientX||null==target.clientY){if(null!=e.pageX&&null!=e.pageY){target.clientX=e.pageX;target.clientY=e.pageY}else if(e.changedTouches&&e.changedTouches[0]){target.clientX=e.changedTouches[0].pageX;target.clientY=e.changedTouches[0].pageY}}if(!/(SELECT|INPUT|TEXTAREA)/i.test(target.tagName)){ev=document.createEvent("MouseEvents");ev.initMouseEvent("click",true,true,e.view,1,target.screenX,target.screenY,target.clientX,target.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,0,null);ev._constructed=true;target.dispatchEvent(ev)}};var s_applied=false;function applyPatch($ui,options){if(!s_applied&&UI.global.IScroll&&UI.global.IScroll.utils){UI.global.IScroll.utils.click=patch_IScroll_utils_click;s_applied=true}return $ui}UI.ExtensionManager.registerDomExtension(applyPatch)})(Extension=UI.Extension||(UI.Extension={}))})(UI=CDP.UI||(CDP.UI={}))})(CDP||(CDP={}));return CDP.UI});
//# sourceMappingURL=cdp.ui.jqm.min.js.map