/*!
 * cdp.ui.jqm.js 2.0.0
 *
 * Date: 2017-07-31T02:22:50.193Z
 */
!function(t,e){"function"==typeof define&&define.amd?define(["cdp.framework.jqm","cdp.tools","cdp.ui.listview"],function(){return e(t.CDP||(t.CDP={}))}):e(t.CDP||(t.CDP={}))}(this,function(t){t.UI=t.UI||{};!function(t){!function(e){function n(){var t=$.mobile.changePage.bind($.mobile);$.mobile.changePage=function(e,n){_.isString(e)&&n&&n.transition&&(n.transition=a.queryPageTransition(n.transition)),t(e,n)}}var o=t.Config,i=t.Framework,a=function(){function t(){}return t.initialize=function(e){var n=$.extend({},{platform:"auto",reserveScrollbarRegion:!0},e);return"auto"===n.platform?t.detectUIPlatform(n.reserveScrollbarRegion):t.setCurrentUIPlatform(n.platform)?n.platform:void console.warn("[CDP.UI.Theme] setCurrentUIPlatform(), failed. platform: "+n.platform)},t.getCurrentUIPlatform=function(){for(var e=$("html"),n=0,o=t.s_platforms.length;n<o;n++)if(e.hasClass("ui-platform-"+t.s_platforms[n]))return t.s_platforms[n];return null},t.setCurrentUIPlatform=function(e){if(null==e||t.s_platforms.indexOf(e)>=0){var n=$("html");return t.s_platforms.forEach(function(t){n.removeClass("ui-platform-"+t)}),e&&n.addClass("ui-platform-"+e),!0}return!1},t.detectUIPlatform=function(t){void 0===t&&(t=!0);var e="";return i.Platform.iOS?($("html").addClass("ui-platform-ios"),e="ios"):($("html").addClass("ui-platform-android"),e="android"),o.DEBUG&&t&&!i.Platform.Mobile&&$("body").css("overflow-y","scroll"),e},t.registerUIPlatforms=function(e){e&&(t.s_platforms=e)},t.registerPageTransitionMap=function(e){e&&(t.s_pageTransitionMap=e)},t.registerDialogTransitionMap=function(e){e&&(t.s_dialogTransitionMap=e)},t.queryPageTransition=function(e){var n=t.s_pageTransitionMap[e];return n?n[t.getCurrentUIPlatform()]||n.fallback:e},t.queryDialogTransition=function(e){var n=t.s_dialogTransitionMap[e];return n?n[t.getCurrentUIPlatform()]||n.fallback:e},t.s_platforms=["ios","android"],t.s_pageTransitionMap={"platform-default":{ios:"slide",android:"floatup",fallback:"slide"},"platform-alternative":{ios:"slideup",android:"floatup",fallback:"slideup"}},t.s_dialogTransitionMap={"platform-default":{ios:"popzoom",android:"crosszoom",fallback:"none"}},t}();e.Theme=a,i.waitForInitialize().done(function(){n()})}(t.UI||(t.UI={}))}(t||(t={}));!function(t){!function(t){var e=function(){function t(){}return t.registerDomExtension=function(t){this.s_domExtensions.push(t)},t.applyDomExtension=function(t,e){this.s_domExtensions.forEach(function(n){n(t,e)})},t.s_domExtensions=[],t}();t.ExtensionManager=e}(t.UI||(t.UI={}))}(t||(t={}));!function(t){!function(t){var e="[CDP.UI.Toast] ";!function(t){t.LENGTH_SHORT=1500,t.LENGTH_LONG=4e3;var n;!function(t){t[t.LEFT=1]="LEFT",t[t.RIGHT=2]="RIGHT",t[t.CENTER=4]="CENTER"}(n=t.OffsetX||(t.OffsetX={}));var o;!function(t){t[t.TOP=16]="TOP",t[t.BOTTOM=32]="BOTTOM",t[t.CENTER=64]="CENTER"}(o=t.OffsetY||(t.OffsetY={}));var i=function(){function t(){}return t.prototype.getClass=function(){return"ui-loader ui-overlay-shadow ui-corner-all"},t.prototype.getStyle=function(){return{padding:"7px 25px 7px 25px",display:"block","background-color":"#1d1d1d","border-color":"#1b1b1b",color:"#fff","text-shadow":"0 1px 0 #111","font-weight":"bold",opacity:.8}},t.prototype.getOffsetPoint=function(){return n.CENTER|o.BOTTOM},t.prototype.getOffsetX=function(){return 0},t.prototype.getOffsetY=function(){return-75},t}();t.StyleBuilderDefault=i,t.show=function(a,r,s){void 0===r&&(r=t.LENGTH_SHORT);var l=$.mobile,c=s||new i,u=!!c.getStyle(),p="<div>"+a.replace(/\n/g,"<br/>")+"</div>",f=$(p).addClass(c.getClass());u&&f.css(c.getStyle()),f.css({top:0,left:0}).appendTo(l.pageContainer);var d,h,g=c.getOffsetPoint(),_=$(window),b=f.width()+parseInt(f.css("padding-left"),10)+parseInt(f.css("padding-right"),10),v=f.height()+parseInt(f.css("padding-top"),10)+parseInt(f.css("padding-bottom"),10);switch(15&g){case n.LEFT:d=0+c.getOffsetX();break;case n.RIGHT:d=_.width()-b+c.getOffsetX();break;case n.CENTER:d=_.width()/2-b/2+c.getOffsetX();break;default:console.warn(e+"warn. unknown offsetPoint:"+(15&g)),d=_.width()/2-b/2+c.getOffsetX()}switch(240&g){case o.TOP:h=0+c.getOffsetY();break;case o.BOTTOM:h=_.height()-v+c.getOffsetY();break;case o.CENTER:h=_.height()/2-v/2+c.getOffsetY();break;default:console.warn(e+"warn. unknown offsetPoint:"+(240&g)),h=_.height()/2-v/2+c.getOffsetY()}f.css({top:h,left:d}).delay(r).fadeOut(400,function(){$(this).remove()})}}(t.Toast||(t.Toast={}))}(t.UI||(t.UI={}))}(t||(t={}));!function(t){!function(e){var n=t.Promise,o=t.Framework,i="[CDP.UI.Dialog] ",a=function(){function a(e,n){this._template=null,this._settings=null,this._$dialog=null,a.initCommonCondition(),this._settings=$.extend({},a.s_defaultOptions,n),this._template=t.Tools.Template.getJST(e,this._settings.src)}return a.prototype.show=function(t){var n=this,o=$(document),r=$("body"),s=r.pagecontainer("getActivePage"),l={overflow:"hidden","overflow-x":"hidden","overflow-y":"hidden"},c={overflow:r.css("overflow"),"overflow-x":r.css("overflow-x"),"overflow-y":r.css("overflow-y")},u=r.scrollTop(),p={overflow:s.css("overflow"),"overflow-x":s.css("overflow-x"),"overflow-y":s.css("overflow-y")},f="scroll touchmove mousemove MSPointerMove",d=function(t){"deny"===n._settings.scrollEvent?t.preventDefault():"adjust"===n._settings.scrollEvent&&r.scrollTop(u)};return null!=t&&(this._settings=$.extend({},this._settings,t)),this._settings.afterclose&&!this._settings.forceOverwriteAfterClose&&(console.warn(i+"cannot accept 'afterclose' option. please instead using 'popupafterclose' event."),delete this._settings.afterclose),this._settings._titleState=this._settings.title?"ui-has-title":"ui-no-title",this._$dialog=$(this._template(this._settings)),this._$dialog.localize(),r.append(this._$dialog),this.resolveTheme(),this._$dialog.on("popupcreate",function(t){"allow"!==n._settings.scrollEvent&&o.on(f,d),r.css(l),s.css(l),a.register(n)}).enhanceWithin(),null!=this._settings.domExtensionOptions&&e.ExtensionManager.applyDomExtension(this._$dialog,this._settings.domExtensionOptions),this.onBeforeShow().done(function(){n._$dialog.popup($.extend({},{positionTo:"window",afterclose:function(t,e){s.css(p),r.css(c),"allow"!==n._settings.scrollEvent&&o.off(f,d),a.register(null),n._$dialog.remove(),n._$dialog=null}},n._settings)).popup("open").on(n._settings.event,function(t){var e=$(t.target).attr("data-auto-close");null==e&&(e=n._settings.defaultAutoClose?"true":"false"),"false"!==e&&(n.close(),t.preventDefault())})}).fail(function(t){console.error(i+"Dialog.show() failed."),n._$dialog&&n._$dialog.trigger("error",t)}),this._$dialog},a.prototype.close=function(){this._$dialog&&this._$dialog.popup("close")},Object.defineProperty(a.prototype,"$el",{get:function(){return this._$dialog},enumerable:!0,configurable:!0}),a.prototype.onBeforeShow=function(){return n.resolve()},a.prototype.resolveTheme=function(){var t,n=function(){return $(".ui-page-active").jqmData("theme")};this._settings.theme||this._$dialog.jqmData("theme")||(this._settings.theme=t=n()),this._settings.overlayTheme||this._$dialog.jqmData("overlay-theme")||(this._settings.overlayTheme=t||n()),this._settings.transition=e.Theme.queryDialogTransition(this._settings.transition)},a.setDefaultOptions=function(t){a.initCommonCondition(),$.extend(!0,a.s_defaultOptions,t)},a.register=function(t){null!=t&&null!=a.s_activeDialog&&console.warn(i+"new dialog proc is called in the past dialog's one. use setTimeout() for post process."),a.s_activeDialog=t},a.initCommonCondition=function(){o.isInitialized()?null==a.s_oldBackKeyHandler&&(a.s_oldBackKeyHandler=t.setBackButtonHandler(null),t.setBackButtonHandler(a.customBackKeyHandler),a.s_defaultOptions={idPositive:"dlg-btn-positive",idNegative:"dlg-btn-negative",event:o.getDefaultClickEvent(),dismissible:!1,defaultAutoClose:!1,transition:"platform-default",labelPositive:"OK",labelNegative:"Cancel",backKey:"close",scrollEvent:"deny",domExtensionOptions:{}}):console.warn(i+"initCommonCondition() should be called after Framework.initialized.")},a.customBackKeyHandler=function(t){null==a.s_activeDialog?a.s_oldBackKeyHandler(t):"close"===a.s_activeDialog._settings.backKey?a.s_activeDialog.close():"function"==typeof a.s_activeDialog._settings.backKey&&a.s_activeDialog._settings.backKey(t)},a.s_activeDialog=null,a.s_oldBackKeyHandler=null,a.s_defaultOptions=null,a}();e.Dialog=a}(t.UI||(t.UI={}))}(t||(t={}));var e=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();!function(t){!function(t){t.alert=function(e,n){return new t.Dialog('\n            <script type="text/template">\n                <section class="ui-modal" data-role="popup" data-corners="false">\n                    <div class="ui-content">\n                        <h1 class="ui-title {{_titleState}}">{{title}}</h1>\n                        <p class="ui-message">{{message}}</p>\n                    </div>\n                    <div class="ui-modal-footer ui-grid-solo">\n                        <button id="{{idPositive}}" class="ui-btn ui-block-a ui-text-emphasis" data-auto-close="true">{{labelPositive}}</button>\n                    </div>\n                </section>\n            <\/script>\n        ',$.extend({},{src:null,message:e},n)).show()},t.confirm=function(e,n){return new t.Dialog('\n            <script type="text/template">\n                <section class="ui-modal" data-role="popup" data-corners="false">\n                    <div class="ui-content">\n                        <h1 class="ui-title {{_titleState}}">{{title}}</h1>\n                        <p class="ui-message">{{message}}</p>\n                    </div>\n                    <div class="ui-modal-footer ui-grid-a">\n                        <button id="{{idNegative}}" class="ui-btn ui-block-a" data-auto-close="true">{{labelNegative}}</button>\n                        <button id="{{idPositive}}" class="ui-btn ui-block-b ui-text-emphasis" data-auto-close="true">{{labelPositive}}</button>\n                    </div>\n                </section>\n            <\/script>\n        ',$.extend({},{src:null,message:e},n)).show()};var n=function(t){function n(e,n){var o=t.call(this,e,n)||this;return o._eventOK=n.eventOK||"promptok",o}return e(n,t),n.prototype.onBeforeShow=function(){var e=this,n=function(t){var n=e.$el.find("#_ui-prompt").val();e.$el.trigger(e._eventOK,n),e.close(),t.preventDefault()};return this.$el.on("vclick",".command-prompt-ok ",function(t){n(t)}).on("keydown","#_ui-prompt",function(t){13===t.keyCode&&n(t)}),t.prototype.onBeforeShow.call(this)},n}(t.Dialog);t.prompt=function(t,e){return new n('\n            <script type="text/template">\n                <section class="ui-modal" data-role="popup" data-corners="false">\n                    <div class="ui-content">\n                        <h1 class="ui-title {{_titleState}}">{{title}}</h1>\n                        <p class="ui-message">{{message}}</p>\n                        <label for="_ui-prompt" class="ui-hidden-accessible"></label>\n                        <input type="text" name="_ui-prompt" id="_ui-prompt">\n                    </div>\n                    <div class="ui-modal-footer ui-grid-a">\n                        <button id="{{idNegative}}" class="ui-btn ui-block-a" data-auto-close="true">{{labelNegative}}</button>\n                        <button id="{{idPositive}}" class="command-prompt-ok ui-btn ui-block-b ui-text-emphasis" data-auto-close="false">{{labelPositive}}</button>\n                    </div>\n                </section>\n            <\/script>\n        ',$.extend({},{src:null,message:t},e)).show()}}(t.UI||(t.UI={}))}(t||(t={}));!function(t){!function(n){var o=t.Framework.Router,i=t.Framework.View,a=t.Tools.Template,r=function(t){function n(e,n){var o=t.call(this,n=$.extend({el:e.$page.find("[data-role='header']"),backCommandSelector:".command-back",backCommandKind:"pageback"},n))||this;return o._owner=e,o._options=n,n.baseTemplate?o._template=n.baseTemplate:o._template=a.getJST("\n                    <script type='text/template'>\n                        <header class='ui-header-base ui-body-{{theme}}'>\n                            <div class='ui-fixed-back-indicator'></div>\n                        </header>\n                    <\/script>\n                "),o.setElement(o.$el,!0),o}return e(n,t),n.prototype.create=function(){return this.createHeaderBase()},n.prototype.activate=function(){return this.showIndicator()},n.prototype.inactivate=function(){return this.hideIndicator()},n.prototype.release=function(){return this.releaseHeaderBase()},n.prototype.createHeaderBase=function(){return"fixed"===this._owner.$header.jqmData("position")&&(null==n.s_$headerBase&&(n.s_$headerBase=$(this._template({theme:this._owner.$page.jqmData("theme")}))),n.s_refCount++,n.s_$headerBase.appendTo($(document.body))),0<this.$el.find(".ui-back-indicator").length&&(this._hasBackIndicator=!0),n.s_$headerBase},n.prototype.showIndicator=function(){return null!=n.s_$headerBase&&this._hasBackIndicator&&n.s_$headerBase.find(".ui-fixed-back-indicator").addClass("show"),n.s_$headerBase},n.prototype.hideIndicator=function(){return null!=n.s_$headerBase&&n.s_$headerBase.find(".ui-fixed-back-indicator").removeClass("show"),n.s_$headerBase},n.prototype.releaseHeaderBase=function(){return"fixed"===this._owner.$header.jqmData("position")&&null!=n.s_$headerBase&&0===--n.s_refCount&&(n.s_$headerBase.remove(),n.s_$headerBase=null),n.s_$headerBase},n.prototype.events=function(){var t={};return this._options&&(t["vclick "+this._options.backCommandSelector]=this.onCommandBack),t},n.prototype.onCommandBack=function(t){t.preventDefault();var e=!1;this._owner&&(e=this._owner.onCommand(t,this._options.backCommandKind)),e||o.back()},n.s_refCount=0,n}(i);n.BaseHeaderView=r}(t.UI||(t.UI={}))}(t||(t={}));!function(t){!function(n){var o=function(t){function o(e,o,i){var a=t.call(this,e,o,i=$.extend({baseHeader:n.BaseHeaderView,backCommandHandler:"onPageBack",backCommandKind:"pageback",domExtensionOptions:{}},i))||this;return a._options=i,a}return e(o,t),o.prototype.onPageBeforeCreate=function(e){this._options.baseHeader&&(this._baseHeader=new this._options.baseHeader(this,this._options),this._baseHeader.create()),t.prototype.onPageBeforeCreate.call(this,e)},o.prototype.onPageInit=function(e){null!=this._options.domExtensionOptions&&n.ExtensionManager.applyDomExtension(this.$page,this._options.domExtensionOptions),t.prototype.onPageInit.call(this,e)},o.prototype.onPageBeforeShow=function(e,n){this._baseHeader&&this._baseHeader.activate(),t.prototype.onPageBeforeShow.call(this,e,n)},o.prototype.onPageBeforeHide=function(e,n){this._baseHeader&&this._baseHeader.inactivate(),t.prototype.onPageBeforeHide.call(this,e,n)},o.prototype.onPageRemove=function(e){this._baseHeader&&(this._baseHeader.release(),this._baseHeader=null),t.prototype.onPageRemove.call(this,e)},o.prototype.onHardwareBackButton=function(e){var n=t.prototype.onHardwareBackButton.call(this,e);return n||(n=this.onCommand(e,this._options.backCommandKind)),n},o.prototype.onCommand=function(t,e){return!(this._options.backCommandKind!==e||!this._owner||!this._owner[this._options.backCommandHandler])&&this._owner[this._options.backCommandHandler](t)},o}(t.Framework.Page);n.BasePage=o}(t.UI||(t.UI={}))}(t||(t={}));!function(t){!function(n){var o=t.Promise,i=t.Framework,a=function(t){function n(e){var n=t.call(this,e)||this;if(n._owner=null,n._owner=e.owner,e.$el){var o=!!n.events;n.setElement(e.$el,o)}return n}return e(n,t),Object.defineProperty(n.prototype,"owner",{get:function(){return this._owner},enumerable:!0,configurable:!0}),n}(i.View);n.PageContainerView=a;var r=function(t){function i(e,o,i){var a=t.call(this,i)||this;a._pageOptions=null,a._basePage=null,a._statusMgr=null,a._pageOptions=$.extend({},{owner:a},i),a._basePage=a._pageOptions.basePage?new a._pageOptions.basePage(e,o,a._pageOptions):new n.BasePage(e,o,a._pageOptions),a._statusMgr=new n.StatusManager;var r=!!a.events;return a.setElement(a.$page,r),a}return e(i,t),i.prototype.statusAddRef=function(t){return this._statusMgr.statusAddRef(t)},i.prototype.statusRelease=function(t){return this._statusMgr.statusRelease(t)},i.prototype.statusScope=function(t,e){this._statusMgr.statusScope(t,e)},i.prototype.isStatusIn=function(t){return this._statusMgr.isStatusIn(t)},Object.defineProperty(i.prototype,"active",{get:function(){return this._basePage.active},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"url",{get:function(){return this._basePage.url},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"id",{get:function(){return this._basePage?this._basePage.id:null},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"$page",{get:function(){return this._basePage.$page},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"$header",{get:function(){return this._basePage.$header},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"$footer",{get:function(){return this._basePage.$footer},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"intent",{get:function(){return this._basePage.intent},set:function(t){this._basePage.intent=t},enumerable:!0,configurable:!0}),i.prototype.onOrientationChanged=function(t){},i.prototype.onHardwareBackButton=function(t){return!1},i.prototype.onBeforeRouteChange=function(){return o.resolve()},i.prototype.onCommand=function(t,e){return!1},i.prototype.onInitialize=function(t){},i.prototype.onPageBeforeCreate=function(t){this.setElement(this.$page,!0)},i.prototype.onPageInit=function(t){},i.prototype.onPageBeforeShow=function(t,e){},i.prototype.onPageShow=function(t,e){},i.prototype.onPageBeforeHide=function(t,e){},i.prototype.onPageHide=function(t,e){},i.prototype.onPageRemove=function(t){this.remove(),this.el=null,this.$el=null},i}(i.View);n.PageView=r}(t.UI||(t.UI={}))}(t||(t={}));!function(t){!function(t){var n,o="[CDP.UI.TabHostView] ";!function(t){t.TABVIEW_CLASS="ui-tabview",t.TABVIEW_SELECTOR="."+t.TABVIEW_CLASS,t.TABHOST_CLASS="ui-tabhost",t.TABHOST_SELECTOR="."+t.TABHOST_CLASS,t.TABHOST_REFRESH_COEFF=1,t.TABHOST_REFRESH_INTERVAL=200}(n||(n={}));var i=function(i){function a(e){var a=i.call(this,e)||this;if(a._tabs=[],a._activeTabIndex=0,a._flipsnap=null,a._flipEndEventHandler=null,a._flipMoveEventHandler=null,a._flipDeltaCache=0,a._scrollEndEventHandler=null,a._scrollMoveEventHandler=null,a._refreshTimerId=null,a._$contentsHolder=null,a._hostEventHooks={},null==t.global.Flipsnap)return console.error(o+"flipsnap module doesn't load."),a;a._settings=$.extend({tabContexts:[],tabMoveHandler:function(t){},tabStopHandler:function(t,e){}},e),a._flipEndEventHandler=function(t){var e=t.originalEvent;a._flipDeltaCache=0,a.onTabChanged(e.newPoint,e.moved)},a._flipMoveEventHandler=function(t){var e=t.originalEvent;a._flipDeltaCache+=e.delta,!a._settings.enableBounce&&(-1===e.direction&&0===a._activeTabIndex&&0<a._flipDeltaCache||1===e.direction&&a._activeTabIndex===a._tabs.length-1&&a._flipDeltaCache<0)?(t.preventDefault(),a._flipsnap.moveToPoint(e.newPoint)):(a.onTabMoving(e.delta),a._tabs.forEach(function(t){t.onTabScrolling(a._activeTabIndex,e.delta)}),a.preprocess(a._activeTabIndex))},a._scrollEndEventHandler=function(t){a.onScrollStop()},a._scrollMoveEventHandler=function(t){a.onScroll()},a._hostEventHooks.onOrientationChanged=a.owner.onOrientationChanged.bind(a.owner),a.owner.onOrientationChanged=a.onOrientationChanged.bind(a),a._hostEventHooks.onPageShow=a.owner.onPageShow.bind(a.owner),a.owner.onPageShow=a.onPageShow.bind(a),a._settings.initialWidth?a.$el.width(a._settings.initialWidth):a.$el.width(a.owner.$el.width()),a._settings.initialHeight&&a.$el.height(a._settings.initialHeight);var r=a.$el.width(),s=a.$el.height(),l=a._settings.tabContexts.slice();0<l.length?l.forEach(function(t){new t.ctor($.extend({initialHeight:s},t.options,{host:a,delayRegister:!1}))}):a.onTabViewSetupRequest(s);var c=a.$el.find(n.TABVIEW_SELECTOR);return a._tabs.forEach(function(t,e){t.onInitialize(a,$(c[e]))}),a._$contentsHolder=a.$el.find(n.TABHOST_SELECTOR).parent(),a.setFlipsnapCondition($.extend({},{distance:r},a._settings)),a.setActiveTab(a._activeTabIndex,0,!0),a}return e(a,i),a.prototype.destroy=function(){this.resetFlipsnapCondition(),this._tabs.forEach(function(t){t.onDestroy()}),this._tabs=[],this._$contentsHolder=null},a.prototype.getBaseHeight=function(){return this.$el.height()},a.prototype.registerTabView=function(t){null==this.getTabIndexOf(t)?this._tabs.push(t):console.warn(o+"tab instance already registered.")},a.prototype.getTabIndexOf=function(t){for(var e=0,n=this._tabs.length;e<n;e++)if(t===this._tabs[e])return e;return null},a.prototype.resetTabPosition=function(){this._tabs.forEach(function(t){t.scrollTo(0,!1,0),t.refresh()}),this.setActiveTab(0,0,!0)},a.prototype.onTabViewSetupRequest=function(t){},a.prototype.setActiveTab=function(t,e,o){var i=this;if(this.validTab(t)&&(o||this._activeTabIndex!==t)){this.preprocess(t);var a=this._activeTabIndex;this._activeTabIndex=t,this._flipsnap.moveToPoint(this._activeTabIndex,e);var r=function(){i.postprocess(a),i.onTabChanged(i._activeTabIndex,!1)};return 0===(e=e||parseInt(this._flipsnap.transitionDuration,10))?r():setTimeout(function(){r()},e*n.TABHOST_REFRESH_COEFF),!0}return!1},a.prototype.getTabCount=function(){return this._tabs.length},a.prototype.getActiveTabIndex=function(){return this._activeTabIndex},a.prototype.getSwipeDelta=function(){return this._flipDeltaCache},a.prototype.onTabMoving=function(t){this.trigger(a.EVENT_TAB_MOVE,t)},a.prototype.onTabChanged=function(t,e){e&&this.setActiveTab(t),this.trigger(a.EVENT_TAB_STOP,t,e)},a.prototype.getScrollPos=function(){return this._activeTabView?this._activeTabView.getScrollPos():0},a.prototype.getScrollPosMax=function(){return this._activeTabView?this._activeTabView.getScrollPosMax():0},a.prototype.scrollTo=function(t,e,n){this._activeTabView&&this._activeTabView.scrollTo(t,e,n)},a.prototype.onScroll=function(){this.trigger(a.EVENT_SCROLL_MOVE)},a.prototype.onScrollStop=function(){this.trigger(a.EVENT_SCROLL_STOP)},a.prototype.setScrollHandler=function(t,e){this._activeTabView&&this._activeTabView.setScrollHandler(t,e)},a.prototype.setScrollStopHandler=function(t,e){this._activeTabView&&this._activeTabView.setScrollStopHandler(t,e)},a.prototype.onOrientationChanged=function(t){var e=this;this._hostEventHooks.onOrientationChanged(t),this._tabs.forEach(function(e){e.onOrientationChanged(t)}),null!=this._refreshTimerId&&clearTimeout(this._refreshTimerId),this._flipsnap&&0<this._tabs.length&&function(){var t=function(){e._flipsnap&&e._flipsnap._maxPoint!==e._tabs.length-1?(e._flipsnap.refresh(),e._refreshTimerId=setTimeout(t,n.TABHOST_REFRESH_INTERVAL)):e._refreshTimerId=null};e._flipsnap.refresh(),e._refreshTimerId=setTimeout(t,n.TABHOST_REFRESH_INTERVAL)}()},a.prototype.onPageShow=function(t,e){this._hostEventHooks.onPageShow(t,e),this.rebuild()},a.prototype.rebuild=function(){this._tabs.forEach(function(t){t.needRebuild&&(t.rebuild(),t.needRebuild=!1)})},a.prototype.setFlipsnapCondition=function(e){this._flipsnap=t.global.Flipsnap(n.TABHOST_SELECTOR,e),$(this._flipsnap.element).on("fstouchend",this._flipEndEventHandler.bind(this)),$(this._flipsnap.element).on("fstouchmove",this._flipMoveEventHandler.bind(this))},a.prototype.resetFlipsnapCondition=function(){this._flipsnap&&($(this._flipsnap.element).off("fstouchmove",this._flipMoveEventHandler.bind(this)),$(this._flipsnap.element).off("fstouchend",this._flipEndEventHandler.bind(this)),this._flipsnap.destroy(),this._flipsnap=null),this._flipDeltaCache=0},a.prototype.preprocess=function(t){var e=this;this._tabs.forEach(function(n,o){o!==e._activeTabIndex&&n.treatScrollPosition(),(e._activeTabIndex<t&&e._activeTabIndex<o&&o<=t||t<e._activeTabIndex&&t<=o&&o<e._activeTabIndex)&&n.$el.css("visibility","visible")})},a.prototype.postprocess=function(t){var e=this;this._tabs.forEach(function(n,o){if(null!=e._settings.inactiveVisibleTabDistance){var i=e._settings.inactiveVisibleTabDistance;e._activeTabIndex-i<=o&&o<=e._activeTabIndex+i?(n.$el.css("visibility","visible"),n.onVisibilityChanged(!0)):(n.$el.css("visibility","hidden"),n.onVisibilityChanged(!1))}o===e._activeTabIndex?(n.onTabSelected(),n.setScrollHandler(e._scrollMoveEventHandler,!0),n.setScrollStopHandler(e._scrollEndEventHandler,!0)):o===t&&(n.setScrollHandler(e._scrollMoveEventHandler,!1),n.setScrollStopHandler(e._scrollEndEventHandler,!1),n.onTabReleased())})},a.prototype.validTab=function(t){return 0!==this._tabs.length&&(0<=t&&t<this._tabs.length||(console.error(o+"invalid tab index. index: "+t),!1))},Object.defineProperty(a.prototype,"_activeTabView",{get:function(){return this._tabs[this._activeTabIndex]},enumerable:!0,configurable:!0}),a.EVENT_SCROLL_MOVE="tabhost:scrollmove",a.EVENT_SCROLL_STOP="tabhost:scrollstop",a.EVENT_TAB_MOVE="tabhost:tabmove",a.EVENT_TAB_STOP="tabhost:tavstop",a}(t.PageContainerView);t.TabHostView=i}(t.UI||(t.UI={}))}(t||(t={}));!function(t){!function(t){var n=1,o=function(t){function o(e){var o=t.call(this,$.extend({},{initialHeight:n},e))||this;return o._host=null,o._needRebuild=!1,o._host=e.host,e.delayRegister||o._host.registerTabView(o),o}return e(o,t),Object.defineProperty(o.prototype,"host",{get:function(){return this._host},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"needRebuild",{get:function(){return this._needRebuild},set:function(t){this._needRebuild=t},enumerable:!0,configurable:!0}),o.prototype.treatScrollPosition=function(){this.core.treatScrollPosition()},o.prototype.onInitialize=function(t,e){this._host=t,this.core.initialize(e,t.getBaseHeight()),Backbone.View.prototype.setElement.call(this,e,!0)},o.prototype.onDestroy=function(){this.remove(),this._host=null},o.prototype.onVisibilityChanged=function(t){},o.prototype.onTabSelected=function(){this.core.setActiveState(!0)},o.prototype.onTabReleased=function(){this.core.setActiveState(!1)},o.prototype.onTabScrolling=function(t,e){},o.prototype.onOrientationChanged=function(t){},Object.defineProperty(o.prototype,"core",{get:function(){return this._scrollMgr},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"tabIndex",{get:function(){return null==this._tabIndex&&(this._tabIndex=this._host.getTabIndexOf(this)),this._tabIndex},enumerable:!0,configurable:!0}),o.prototype.isActive=function(){return this.tabIndex===this._host.getActiveTabIndex()},o}(t.ListView);t.TabView=o}(t.UI||(t.UI={}))}(t||(t={}));!function(t){!function(t){var n=function(n){function o(e,o,i){var a=n.call(this,e,o,$.extend({},{autoDestoryElement:!1},i))||this;return a._scrollMgr=null,a._needRebuild=!1,a._scrollMgr=new t.ScrollManager(i),a}return e(o,n),o.prototype.reserveRebuild=function(){this._needRebuild=!0},o.prototype.onOrientationChanged=function(t){this._scrollMgr.setBaseHeight(this.getPageBaseHeight())},o.prototype.onBeforeRouteChange=function(){return this._pageOptions.autoDestoryElement&&this._scrollMgr.destroy(),n.prototype.onBeforeRouteChange.call(this)},o.prototype.onPageBeforeShow=function(t,e){n.prototype.onPageBeforeShow.call(this,t,e),this._scrollMgr.initialize(this.$page,this.getPageBaseHeight())},o.prototype.onPageShow=function(t,e){n.prototype.onPageShow.call(this,t,e),this._scrollMgr.setBaseHeight(this.getPageBaseHeight()),this._needRebuild&&(this.rebuild(),this._needRebuild=!1)},o.prototype.onPageRemove=function(t){n.prototype.onPageRemove.call(this,t),this.release()},o.prototype.isInitialized=function(){return this._scrollMgr.isInitialized()},o.prototype.addItem=function(e,n,o,i){this._addLine(new t.LineProfile(this._scrollMgr,Math.floor(e),n,o),i)},o.prototype.removeItem=function(t,e,n){this._scrollMgr.removeItem(t,e,n)},o.prototype.getItemInfo=function(t){return this._scrollMgr.getItemInfo(t)},o.prototype.refresh=function(){this._scrollMgr.refresh()},o.prototype.update=function(){this._scrollMgr.update()},o.prototype.rebuild=function(){this._scrollMgr.rebuild()},o.prototype.release=function(){this._scrollMgr.release()},o.prototype.backup=function(t){return this._scrollMgr.backup(t)},o.prototype.restore=function(t,e){void 0===e&&(e=!0);var n=this._scrollMgr.restore(t,e);return n&&!e&&this.reserveRebuild(),n},o.prototype.hasBackup=function(t){return this._scrollMgr.hasBackup(t)},o.prototype.clearBackup=function(t){return this._scrollMgr.clearBackup(t)},Object.defineProperty(o.prototype,"backupData",{get:function(){return this._scrollMgr.backupData},enumerable:!0,configurable:!0}),o.prototype.setScrollHandler=function(t,e){this._scrollMgr.setScrollHandler(t,e)},o.prototype.setScrollStopHandler=function(t,e){this._scrollMgr.setScrollStopHandler(t,e)},o.prototype.getScrollPos=function(){return this._scrollMgr.getScrollPos()},o.prototype.getScrollPosMax=function(){return this._scrollMgr.getScrollPosMax()},o.prototype.scrollTo=function(t,e,n){this._scrollMgr.scrollTo(t,e,n)},o.prototype.ensureVisible=function(t,e){this._scrollMgr.ensureVisible(t,e)},Object.defineProperty(o.prototype,"core",{get:function(){return this._scrollMgr},enumerable:!0,configurable:!0}),o.prototype._addLine=function(t,e){this._scrollMgr._addLine(t,e)},o.prototype.getPageBaseHeight=function(){return $(window).height()-parseInt(this.$page.css("padding-top"),10)},o}(t.PageView);t.PageListView=n}(t.UI||(t.UI={}))}(t||(t={}));!function(t){!function(t){var n=function(n){function o(e,o,i){var a=n.call(this,e,o,i)||this;return a._expandManager=null,a._expandManager=new t.ExpandManager(a),a}return e(o,n),o.prototype.newGroup=function(t){return this._expandManager.newGroup(t)},o.prototype.getGroup=function(t){return this._expandManager.getGroup(t)},o.prototype.registerTopGroup=function(t){this._expandManager.registerTopGroup(t)},o.prototype.getTopGroups=function(){return this._expandManager.getTopGroups()},o.prototype.expandAll=function(){this._expandManager.expandAll()},o.prototype.collapseAll=function(t){this._expandManager.collapseAll(t)},o.prototype.isExpanding=function(){return this._expandManager.isExpanding()},o.prototype.isCollapsing=function(){return this._expandManager.isCollapsing()},o.prototype.isSwitching=function(){return this._expandManager.isSwitching()},Object.defineProperty(o.prototype,"layoutKey",{get:function(){return this._expandManager.layoutKey},set:function(t){this._expandManager.layoutKey=t},enumerable:!0,configurable:!0}),o.prototype.release=function(){n.prototype.release.call(this),this._expandManager.release()},o.prototype.backup=function(t){return this._expandManager.backup(t)},o.prototype.restore=function(t,e){return void 0===e&&(e=!0),this._expandManager.restore(t,e)},o}(t.PageListView);t.PageExpandableListView=n}(t.UI||(t.UI={}))}(t||(t={}));!function(t){!function(e){!function(n){var o=t.Framework;$.fn.ripple=function(t){var e=$(this);return e.length<=0?e:e.on(o.Patch.s_vclickEvent,function(t){var e=$(this);0===e.find(".ui-ripple-ink").length&&e.prepend("<div class='ui-ripple-ink'></div>");var n=e.find(".ui-ripple-ink");if(n.removeClass("ui-ripple-animate"),!n.height()&&!n.width()){var o=Math.max(e.outerWidth(),e.outerHeight());n.css({height:o,width:o})}var i=t.pageX-e.offset().left-n.width()/2,a=t.pageY-e.offset().top-n.height()/2,r=e.data("ripple-color");n.on("animationend webkitAnimationEnd",function(t){n.off(),n.removeClass("ui-ripple-animate"),n=null}),n.css({top:a+"px",left:i+"px",background:r}).addClass("ui-ripple-animate")})},e.ExtensionManager.registerDomExtension(function(t,e){var n=[".ui-ripple-none",".ui-flipswitch-on",".ui-slider-handle",".ui-input-clear"],o=".ui-btn";return t.hasClass("ui-page")&&(o=".ui-content .ui-btn"),t.find(o).filter(function(t,e){return!$(e).is(n.join(","))}).addClass("ui-ripple"),t.find(".ui-ripple").each(function(t,n){$(n).ripple(e)}),t})}(e.Extension||(e.Extension={}))}(t.UI||(t.UI={}))}(t||(t={}));!function(t){!function(e){!function(n){function o(t,e){if(t.length<=0)return t;a||(a=r.getJST('\n                <script type="text/template">\n                    <span class="ui-spinner-base">\n                        <span class="ui-spinner-inner">\n                            <span class="ui-spinner-inner-gap" {{borderTop}}></span>\n                            <span class="ui-spinner-inner-left">\n                                <span class="ui-spinner-inner-half-circle" {{border}}></span>\n                            </span>\n                            <span class="ui-spinner-inner-right">\n                                <span class="ui-spinner-inner-half-circle" {{border}}></span>\n                            </span>\n                        </span>\n                    </span>\n                <\/script>\n            '));var n=t.data("spinner-color"),o=null;return n&&(t.css({"background-color":n}),o=function(t){return{borderTop:"style=border-top-color:"+t+";",border:"style=border-color:"+t+";"}}(n)),t.append(a(o)),i(t)}function i(t){for(var e,n=["-webkit-",""],o=function(t){return t&&"none"!==t},i=0,a=n.length;i<a;i++){if(!o(e)&&(e=t.css(n[i]+"mask-image"),o(e))){var r=e.match(/(url\(data:image\/svg\+xml;)([\s\S]*)?(base64,[\s\S]*\))/);e=r?r[1]+"bust="+Date.now().toString(36)+";"+r[3]:null}o(e)&&t.css(n[i]+"mask-image",e)}return t}var a,r=t.Tools.Template;$.fn.spinner=function(t){return"string"==typeof t?i($(this)):o($(this))},e.ExtensionManager.registerDomExtension(function(t,e){return t.find(".ui-spinner, .ui-icon-loading").each(function(t,n){$(n).spinner(e)}),t})}(e.Extension||(e.Extension={}))}(t.UI||(t.UI={}))}(t||(t={}));!function(t){!function(t){!function(e){t.ExtensionManager.registerDomExtension(function(t,e){var n=function(t,e){var n=$(t);e?n.addClass("ui-float-label-floating"):n.removeClass("ui-float-label-floating")},o=function(e){var o=$(e).attr("for"),i=t.find("#"+o);"search"===i.jqmData("type")&&$(e).addClass("ui-float-label-has-icon"),n(e,!!i.val()),i.on("keyup change input focus blur cut paste",function(t){n(e,!!$(t.target).val())})};return t.find("label.ui-float-label, .ui-float-label label").each(function(t,e){o(e)}),t})}(t.Extension||(t.Extension={}))}(t.UI||(t.UI={}))}(t||(t={}));!function(t){!function(e){!function(n){var o=t.Framework;e.ExtensionManager.registerDomExtension(function(t,e){var n=function(){return t.find(".ui-flipswitch")},i=function(t){var e=t.find("input");if(e.length)return e;var n=t.find("select");return n.length?n:null},a=function(t,e){t&&("INPUT"===t[0].nodeName?t.prop("checked",e).flipswitch("refresh"):"SELECT"===t[0].nodeName&&t.val(e?"on":"off").flipswitch("refresh"))},r=function(t){var e=i(t);if(e){var n=e[0].labels;if(n)return $(n)}return $()},s=function(t){var e=t.attr("for");return n().find("[name='"+e+"']")};return n().on("vclick _change_flipswich",function(t){var e=$(t.currentTarget),n=$(t.target),r=i(e),s=!e.hasClass("ui-flipswitch-active");n.hasClass("ui-flipswitch-input")?a(r,s):n.hasClass("ui-flipswitch-on")&&o.Platform.Mobile&&o.Patch.isSupportedVclick()&&(a(r,s),t.preventDefault())}).each(function(t,e){r($(e)).on("vclick",function(t){var e=s($(t.target));e.parent().hasClass("ui-state-disabled")||e.trigger("_change_flipswich"),t.preventDefault()})}),t})}(e.Extension||(e.Extension={}))}(t.UI||(t.UI={}))}(t||(t={}));!function(t){!function(t){!function(e){t.ExtensionManager.registerDomExtension(function(t,e){return t.find(".ui-slider-input").on("slidestop",function(t){$(t.currentTarget).parent().find(".ui-slider-handle").blur()}),t})}(t.Extension||(t.Extension={}))}(t.UI||(t.UI={}))}(t||(t={}));var t;return function(t){!function(t){!function(e){var n=function(t){var e,n=t.target,o=t;null!=n.clientX&&null!=n.clientY||(null!=o.pageX&&null!=o.pageY?(n.clientX=o.pageX,n.clientY=o.pageY):o.changedTouches&&o.changedTouches[0]&&(n.clientX=o.changedTouches[0].pageX,n.clientY=o.changedTouches[0].pageY)),/(SELECT|INPUT|TEXTAREA)/i.test(n.tagName)||((e=document.createEvent("MouseEvents")).initMouseEvent("click",!0,!0,o.view,1,n.screenX,n.screenY,n.clientX,n.clientY,o.ctrlKey,o.altKey,o.shiftKey,o.metaKey,0,null),e._constructed=!0,n.dispatchEvent(e))},o=!1;t.ExtensionManager.registerDomExtension(function(e,i){return!o&&t.global.IScroll&&t.global.IScroll.utils&&(t.global.IScroll.utils.click=n,o=!0),e})}(t.Extension||(t.Extension={}))}(t.UI||(t.UI={}))}(t||(t={})),t.UI});
//# sourceMappingURL=cdp.ui.jqm.min.js.map