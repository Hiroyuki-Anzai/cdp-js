/*!
 * cdp.ui.jqm.js 2.0.0
 *
 * Date: 2017-08-02T08:32:03.018Z
 */
!function(e,t){"function"==typeof define&&define.amd?define(["cdp.framework.jqm","cdp.tools","cdp.ui.listview"],function(){return t(e.CDP||(e.CDP={}))}):t(e.CDP||(e.CDP={}))}(this,function(e){e.UI=e.UI||{};!function(e){!function(t){function n(){var e=$.mobile.changePage.bind($.mobile);$.mobile.changePage=function(t,n){_.isString(t)&&n&&n.transition&&(n.transition=a.queryPageTransition(n.transition)),e(t,n)}}var o=e.Config,i=e.Framework,a=function(){function e(){}return e.initialize=function(t){var n=$.extend({},{platform:"auto",reserveScrollbarRegion:!0},t);return"auto"===n.platform?e.detectUIPlatform(n.reserveScrollbarRegion):e.setCurrentUIPlatform(n.platform)?n.platform:void console.warn("[CDP.UI.Theme] setCurrentUIPlatform(), failed. platform: "+n.platform)},e.getCurrentUIPlatform=function(){for(var t=$("html"),n=0,o=e.s_platforms.length;n<o;n++)if(t.hasClass("ui-platform-"+e.s_platforms[n]))return e.s_platforms[n];return null},e.setCurrentUIPlatform=function(t){if(null==t||e.s_platforms.indexOf(t)>=0){var n=$("html");return e.s_platforms.forEach(function(e){n.removeClass("ui-platform-"+e)}),t&&n.addClass("ui-platform-"+t),!0}return!1},e.detectUIPlatform=function(e){void 0===e&&(e=!0);var t="";return i.Platform.iOS?($("html").addClass("ui-platform-ios"),t="ios"):($("html").addClass("ui-platform-android"),t="android"),o.DEBUG&&e&&!i.Platform.Mobile&&$("body").css("overflow-y","scroll"),t},e.registerUIPlatforms=function(t){t&&(e.s_platforms=t)},e.registerPageTransitionMap=function(t){t&&(e.s_pageTransitionMap=t)},e.registerDialogTransitionMap=function(t){t&&(e.s_dialogTransitionMap=t)},e.queryPageTransition=function(t){var n=e.s_pageTransitionMap[t];return n?n[e.getCurrentUIPlatform()]||n.fallback:t},e.queryDialogTransition=function(t){var n=e.s_dialogTransitionMap[t];return n?n[e.getCurrentUIPlatform()]||n.fallback:t},e.s_platforms=["ios","android"],e.s_pageTransitionMap={"platform-default":{ios:"slide",android:"floatup",fallback:"slide"},"platform-alternative":{ios:"slideup",android:"floatup",fallback:"slideup"}},e.s_dialogTransitionMap={"platform-default":{ios:"popzoom",android:"crosszoom",fallback:"none"}},e}();t.Theme=a,i.waitForInitialize().done(function(){n()})}(e.UI||(e.UI={}))}(e||(e={}));!function(e){!function(e){var t=function(){function e(){}return e.registerDomExtension=function(e){this.s_domExtensions.push(e)},e.applyDomExtension=function(e,t){this.s_domExtensions.forEach(function(n){n(e,t)})},e.s_domExtensions=[],e}();e.ExtensionManager=t}(e.UI||(e.UI={}))}(e||(e={}));!function(e){!function(e){var t="[CDP.UI.Toast] ";!function(e){e.LENGTH_SHORT=1500,e.LENGTH_LONG=4e3;var n;!function(e){e[e.LEFT=1]="LEFT",e[e.RIGHT=2]="RIGHT",e[e.CENTER=4]="CENTER"}(n=e.OffsetX||(e.OffsetX={}));var o;!function(e){e[e.TOP=16]="TOP",e[e.BOTTOM=32]="BOTTOM",e[e.CENTER=64]="CENTER"}(o=e.OffsetY||(e.OffsetY={}));var i=function(){function e(){}return e.prototype.getClass=function(){return"ui-loader ui-overlay-shadow ui-corner-all"},e.prototype.getStyle=function(){return{padding:"7px 25px 7px 25px",display:"block","background-color":"#1d1d1d","border-color":"#1b1b1b",color:"#fff","text-shadow":"0 1px 0 #111","font-weight":"bold",opacity:.8}},e.prototype.getOffsetPoint=function(){return n.CENTER|o.BOTTOM},e.prototype.getOffsetX=function(){return 0},e.prototype.getOffsetY=function(){return-75},e}();e.StyleBuilderDefault=i,e.show=function(a,r,s){void 0===r&&(r=e.LENGTH_SHORT);var l=$.mobile,c=s||new i,u=!!c.getStyle(),p="<div>"+a.replace(/\n/g,"<br/>")+"</div>",f=$(p).addClass(c.getClass());u&&f.css(c.getStyle()),f.css({top:0,left:0}).appendTo(l.pageContainer);var d,h,g=c.getOffsetPoint(),_=$(window),b=f.width()+parseInt(f.css("padding-left"),10)+parseInt(f.css("padding-right"),10),v=f.height()+parseInt(f.css("padding-top"),10)+parseInt(f.css("padding-bottom"),10);switch(15&g){case n.LEFT:d=0+c.getOffsetX();break;case n.RIGHT:d=_.width()-b+c.getOffsetX();break;case n.CENTER:d=_.width()/2-b/2+c.getOffsetX();break;default:console.warn(t+"warn. unknown offsetPoint:"+(15&g)),d=_.width()/2-b/2+c.getOffsetX()}switch(240&g){case o.TOP:h=0+c.getOffsetY();break;case o.BOTTOM:h=_.height()-v+c.getOffsetY();break;case o.CENTER:h=_.height()/2-v/2+c.getOffsetY();break;default:console.warn(t+"warn. unknown offsetPoint:"+(240&g)),h=_.height()/2-v/2+c.getOffsetY()}f.css({top:h,left:d}).delay(r).fadeOut(400,function(){$(this).remove()})}}(e.Toast||(e.Toast={}))}(e.UI||(e.UI={}))}(e||(e={}));!function(e){!function(t){var n=e.Promise,o=e.Framework,i="[CDP.UI.Dialog] ",a=function(){function a(t,n){this._template=null,this._settings=null,this._$dialog=null,a.initCommonCondition(),this._settings=$.extend({},a.s_defaultOptions,n),this._template=e.Tools.Template.getJST(t,this._settings.src)}return a.prototype.show=function(e){var n=this,o=$(document),r=$("body"),s=r.pagecontainer("getActivePage"),l={overflow:"hidden","overflow-x":"hidden","overflow-y":"hidden"},c={overflow:r.css("overflow"),"overflow-x":r.css("overflow-x"),"overflow-y":r.css("overflow-y")},u=r.scrollTop(),p={overflow:s.css("overflow"),"overflow-x":s.css("overflow-x"),"overflow-y":s.css("overflow-y")},f="scroll touchmove mousemove MSPointerMove",d=function(e){"deny"===n._settings.scrollEvent?e.preventDefault():"adjust"===n._settings.scrollEvent&&r.scrollTop(u)};return null!=e&&(this._settings=$.extend({},this._settings,e)),this._settings.afterclose&&!this._settings.forceOverwriteAfterClose&&(console.warn(i+"cannot accept 'afterclose' option. please instead using 'popupafterclose' event."),delete this._settings.afterclose),this._settings._titleState=this._settings.title?"ui-has-title":"ui-no-title",this._$dialog=$(this._template(this._settings)),this._$dialog.localize(),r.append(this._$dialog),this.resolveTheme(),this._$dialog.on("popupcreate",function(e){"allow"!==n._settings.scrollEvent&&o.on(f,d),r.css(l),s.css(l),a.register(n)}).enhanceWithin(),null!=this._settings.domExtensionOptions&&t.ExtensionManager.applyDomExtension(this._$dialog,this._settings.domExtensionOptions),this.onBeforeShow().done(function(){n._$dialog.popup($.extend({},{positionTo:"window",afterclose:function(e,t){s.css(p),r.css(c),"allow"!==n._settings.scrollEvent&&o.off(f,d),a.register(null),n._$dialog.remove(),n._$dialog=null}},n._settings)).popup("open").on(n._settings.event,function(e){var t=$(e.target).attr("data-auto-close");null==t&&(t=n._settings.defaultAutoClose?"true":"false"),"false"!==t&&(n.close(),e.preventDefault())})}).fail(function(e){console.error(i+"Dialog.show() failed."),n._$dialog&&n._$dialog.trigger("error",e)}),this._$dialog},a.prototype.close=function(){this._$dialog&&this._$dialog.popup("close")},Object.defineProperty(a.prototype,"$el",{get:function(){return this._$dialog},enumerable:!0,configurable:!0}),a.prototype.onBeforeShow=function(){return n.resolve()},a.prototype.resolveTheme=function(){var e,n=function(){return $(".ui-page-active").jqmData("theme")};this._settings.theme||this._$dialog.jqmData("theme")||(this._settings.theme=e=n()),this._settings.overlayTheme||this._$dialog.jqmData("overlay-theme")||(this._settings.overlayTheme=e||n()),this._settings.transition=t.Theme.queryDialogTransition(this._settings.transition)},a.setDefaultOptions=function(e){a.initCommonCondition(),$.extend(!0,a.s_defaultOptions,e)},a.register=function(e){null!=e&&null!=a.s_activeDialog&&console.warn(i+"new dialog proc is called in the past dialog's one. use setTimeout() for post process."),a.s_activeDialog=e},a.initCommonCondition=function(){o.isInitialized()?null==a.s_oldBackKeyHandler&&(a.s_oldBackKeyHandler=e.setBackButtonHandler(null),e.setBackButtonHandler(a.customBackKeyHandler),a.s_defaultOptions={idPositive:"dlg-btn-positive",idNegative:"dlg-btn-negative",event:o.getDefaultClickEvent(),dismissible:!1,defaultAutoClose:!1,transition:"platform-default",labelPositive:"OK",labelNegative:"Cancel",backKey:"close",scrollEvent:"deny",domExtensionOptions:{}}):console.warn(i+"initCommonCondition() should be called after Framework.initialized.")},a.customBackKeyHandler=function(e){null==a.s_activeDialog?a.s_oldBackKeyHandler(e):"close"===a.s_activeDialog._settings.backKey?a.s_activeDialog.close():"function"==typeof a.s_activeDialog._settings.backKey&&a.s_activeDialog._settings.backKey(e)},a.s_activeDialog=null,a.s_oldBackKeyHandler=null,a.s_defaultOptions=null,a}();t.Dialog=a}(e.UI||(e.UI={}))}(e||(e={}));var t=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();!function(e){!function(e){e.alert=function(t,n){return new e.Dialog('\n            <script type="text/template">\n                <section class="ui-modal" data-role="popup" data-corners="false">\n                    <div class="ui-content">\n                        <h1 class="ui-title {{_titleState}}">{{title}}</h1>\n                        <p class="ui-message">{{message}}</p>\n                    </div>\n                    <div class="ui-modal-footer ui-grid-solo">\n                        <button id="{{idPositive}}" class="ui-btn ui-block-a ui-text-emphasis" data-auto-close="true">{{labelPositive}}</button>\n                    </div>\n                </section>\n            <\/script>\n        ',$.extend({},{src:null,message:t},n)).show()},e.confirm=function(t,n){return new e.Dialog('\n            <script type="text/template">\n                <section class="ui-modal" data-role="popup" data-corners="false">\n                    <div class="ui-content">\n                        <h1 class="ui-title {{_titleState}}">{{title}}</h1>\n                        <p class="ui-message">{{message}}</p>\n                    </div>\n                    <div class="ui-modal-footer ui-grid-a">\n                        <button id="{{idNegative}}" class="ui-btn ui-block-a" data-auto-close="true">{{labelNegative}}</button>\n                        <button id="{{idPositive}}" class="ui-btn ui-block-b ui-text-emphasis" data-auto-close="true">{{labelPositive}}</button>\n                    </div>\n                </section>\n            <\/script>\n        ',$.extend({},{src:null,message:t},n)).show()};var n=function(e){function n(t,n){var o=e.call(this,t,n)||this;return o._eventOK=n.eventOK||"promptok",o}return t(n,e),n.prototype.onBeforeShow=function(){var t=this,n=function(e){var n=t.$el.find("#_ui-prompt").val();t.$el.trigger(t._eventOK,n),t.close(),e.preventDefault()};return this.$el.on("vclick",".command-prompt-ok ",function(e){n(e)}).on("keydown","#_ui-prompt",function(e){13===e.keyCode&&n(e)}),e.prototype.onBeforeShow.call(this)},n}(e.Dialog);e.prompt=function(e,t){return new n('\n            <script type="text/template">\n                <section class="ui-modal" data-role="popup" data-corners="false">\n                    <div class="ui-content">\n                        <h1 class="ui-title {{_titleState}}">{{title}}</h1>\n                        <p class="ui-message">{{message}}</p>\n                        <label for="_ui-prompt" class="ui-hidden-accessible"></label>\n                        <input type="text" name="_ui-prompt" id="_ui-prompt">\n                    </div>\n                    <div class="ui-modal-footer ui-grid-a">\n                        <button id="{{idNegative}}" class="ui-btn ui-block-a" data-auto-close="true">{{labelNegative}}</button>\n                        <button id="{{idPositive}}" class="command-prompt-ok ui-btn ui-block-b ui-text-emphasis" data-auto-close="false">{{labelPositive}}</button>\n                    </div>\n                </section>\n            <\/script>\n        ',$.extend({},{src:null,message:e},t)).show()}}(e.UI||(e.UI={}))}(e||(e={}));!function(e){!function(n){var o=e.Framework.Router,i=e.Framework.View,a=e.Tools.Template,r=function(e){function n(t,n){var o=e.call(this,n=$.extend({el:t.$page.find("[data-role='header']"),backCommandSelector:".command-back",backCommandKind:"pageback"},n))||this;return o._owner=t,o._options=n,n.baseTemplate?o._template=n.baseTemplate:o._template=a.getJST("\n                    <script type='text/template'>\n                        <header class='ui-header-base ui-body-{{theme}}'>\n                            <div class='ui-fixed-back-indicator'></div>\n                        </header>\n                    <\/script>\n                "),o.setElement(o.$el,!0),o}return t(n,e),n.prototype.create=function(){return this.createHeaderBase()},n.prototype.activate=function(){return this.showIndicator()},n.prototype.inactivate=function(){return this.hideIndicator()},n.prototype.release=function(){return this.releaseHeaderBase()},n.prototype.createHeaderBase=function(){return"fixed"===this._owner.$header.jqmData("position")&&(null==n.s_$headerBase&&(n.s_$headerBase=$(this._template({theme:this._owner.$page.jqmData("theme")}))),n.s_refCount++,n.s_$headerBase.appendTo($(document.body))),0<this.$el.find(".ui-back-indicator").length&&(this._hasBackIndicator=!0),n.s_$headerBase},n.prototype.showIndicator=function(){return null!=n.s_$headerBase&&this._hasBackIndicator&&n.s_$headerBase.find(".ui-fixed-back-indicator").addClass("show"),n.s_$headerBase},n.prototype.hideIndicator=function(){return null!=n.s_$headerBase&&n.s_$headerBase.find(".ui-fixed-back-indicator").removeClass("show"),n.s_$headerBase},n.prototype.releaseHeaderBase=function(){return"fixed"===this._owner.$header.jqmData("position")&&null!=n.s_$headerBase&&0===--n.s_refCount&&(n.s_$headerBase.remove(),n.s_$headerBase=null),n.s_$headerBase},n.prototype.events=function(){var e={};return this._options&&(e["vclick "+this._options.backCommandSelector]=this.onCommandBack),e},n.prototype.onCommandBack=function(e){e.preventDefault();var t=!1;this._owner&&(t=this._owner.onCommand(e,this._options.backCommandKind)),t||o.back()},n.s_refCount=0,n}(i);n.BaseHeaderView=r}(e.UI||(e.UI={}))}(e||(e={}));!function(e){!function(n){var o=function(e){function o(t,o,i){var a=e.call(this,t,o,i=$.extend({baseHeader:n.BaseHeaderView,backCommandHandler:"onPageBack",backCommandKind:"pageback",domExtensionOptions:{}},i))||this;return a._options=i,a}return t(o,e),o.prototype.onPageBeforeCreate=function(t){this._options.baseHeader&&(this._baseHeader=new this._options.baseHeader(this,this._options),this._baseHeader.create()),e.prototype.onPageBeforeCreate.call(this,t)},o.prototype.onPageInit=function(t){null!=this._options.domExtensionOptions&&n.ExtensionManager.applyDomExtension(this.$page,this._options.domExtensionOptions),e.prototype.onPageInit.call(this,t)},o.prototype.onPageBeforeShow=function(t,n){this._baseHeader&&this._baseHeader.activate(),e.prototype.onPageBeforeShow.call(this,t,n)},o.prototype.onPageBeforeHide=function(t,n){this._baseHeader&&this._baseHeader.inactivate(),e.prototype.onPageBeforeHide.call(this,t,n)},o.prototype.onPageRemove=function(t){this._baseHeader&&(this._baseHeader.release(),this._baseHeader=null),e.prototype.onPageRemove.call(this,t)},o.prototype.onHardwareBackButton=function(t){var n=e.prototype.onHardwareBackButton.call(this,t);return n||(n=this.onCommand(t,this._options.backCommandKind)),n},o.prototype.onCommand=function(e,t){return!(this._options.backCommandKind!==t||!this._owner||!this._owner[this._options.backCommandHandler])&&this._owner[this._options.backCommandHandler](e)},o}(e.Framework.Page);n.BasePage=o}(e.UI||(e.UI={}))}(e||(e={}));!function(e){!function(n){var o=e.Promise,i=function(e){function i(t,o,i){var a=e.call(this,i)||this;a._pageOptions=null,a._basePage=null,a._statusMgr=null,a._pageOptions=$.extend({},{owner:a},i),a._basePage=a._pageOptions.basePage?new a._pageOptions.basePage(t,o,a._pageOptions):new n.BasePage(t,o,a._pageOptions),a._statusMgr=new n.StatusManager;var r=!!a.events;return a.setElement(a.$page,r),a}return t(i,e),i.prototype.statusAddRef=function(e){return this._statusMgr.statusAddRef(e)},i.prototype.statusRelease=function(e){return this._statusMgr.statusRelease(e)},i.prototype.statusScope=function(e,t){this._statusMgr.statusScope(e,t)},i.prototype.isStatusIn=function(e){return this._statusMgr.isStatusIn(e)},Object.defineProperty(i.prototype,"active",{get:function(){return this._basePage.active},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"url",{get:function(){return this._basePage.url},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"id",{get:function(){return this._basePage?this._basePage.id:null},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"$page",{get:function(){return this._basePage.$page},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"$header",{get:function(){return this._basePage.$header},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"$footer",{get:function(){return this._basePage.$footer},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"intent",{get:function(){return this._basePage.intent},set:function(e){this._basePage.intent=e},enumerable:!0,configurable:!0}),i.prototype.onOrientationChanged=function(e){this.trigger("pageview:orientation-changed",e)},i.prototype.onHardwareBackButton=function(e){return!1},i.prototype.onBeforeRouteChange=function(){return o.resolve()},i.prototype.onCommand=function(e,t){return!1},i.prototype.onInitialize=function(e){this.trigger("pageview:initialize",e)},i.prototype.onPageBeforeCreate=function(e){this.setElement(this.$page,!0),this.trigger("pageview:before-create",e)},i.prototype.onPageInit=function(e){this.trigger("pageview:page-init",e)},i.prototype.onPageBeforeShow=function(e,t){this.trigger("pageview:before-show",e,t)},i.prototype.onPageShow=function(e,t){this.trigger("pageview:show",e,t)},i.prototype.onPageBeforeHide=function(e,t){this.trigger("pageview:before-hide",e,t)},i.prototype.onPageHide=function(e,t){this.trigger("pageview:hide",e,t)},i.prototype.onPageRemove=function(e){this.trigger("pageview:remove",e),this.remove(),this.el=null,this.$el=null},i}(e.Framework.View);n.PageView=i}(e.UI||(e.UI={}))}(e||(e={}));!function(e){!function(n){var o=function(e){function n(t){var n=e.call(this,t)||this;if(n._owner=null,n._owner=t.owner,t.$el){var o=!!n.events;n.setElement(t.$el,o)}return n.listenTo(n._owner,"pageview:orientation-changed",n.onOrientationChanged.bind(n)),n.listenTo(n._owner,"pageview:initialize",n.onInitialize.bind(n)),n.listenTo(n._owner,"pageview:before-create",n.onPageBeforeCreate.bind(n)),n.listenTo(n._owner,"pageview:page-init",n.onPageInit.bind(n)),n.listenTo(n._owner,"pageview:before-show",n.onPageBeforeShow.bind(n)),n.listenTo(n._owner,"pageview:show",n.onPageShow.bind(n)),n.listenTo(n._owner,"pageview:before-hide",n.onPageBeforeHide.bind(n)),n.listenTo(n._owner,"pageview:hide",n.onPageHide.bind(n)),n.listenTo(n._owner,"pageview:remove",n.onPageRemove.bind(n)),n}return t(n,e),Object.defineProperty(n.prototype,"owner",{get:function(){return this._owner},enumerable:!0,configurable:!0}),n.prototype.onOrientationChanged=function(e){},n.prototype.onInitialize=function(e){},n.prototype.onPageBeforeCreate=function(e){},n.prototype.onPageInit=function(e){},n.prototype.onPageBeforeShow=function(e,t){},n.prototype.onPageShow=function(e,t){},n.prototype.onPageBeforeHide=function(e,t){},n.prototype.onPageHide=function(e,t){},n.prototype.onPageRemove=function(e){this.stopListening()},n}(e.Framework.View);n.PageContainerView=o}(e.UI||(e.UI={}))}(e||(e={}));!function(e){!function(e){var n,o="[CDP.UI.TabHostView] ";!function(e){e.TABVIEW_CLASS="ui-tabview",e.TABVIEW_SELECTOR="."+e.TABVIEW_CLASS,e.TABHOST_CLASS="ui-tabhost",e.TABHOST_SELECTOR="."+e.TABHOST_CLASS,e.TABHOST_REFRESH_COEFF=1,e.TABHOST_REFRESH_INTERVAL=200}(n||(n={}));var i=function(i){function a(t){var a=i.call(this,t)||this;if(a._tabs=[],a._activeTabIndex=0,a._flipsnap=null,a._flipEndEventHandler=null,a._flipMoveEventHandler=null,a._flipDeltaCache=0,a._scrollEndEventHandler=null,a._scrollMoveEventHandler=null,a._refreshTimerId=null,a._$contentsHolder=null,null==e.global.Flipsnap)return console.error(o+"flipsnap module doesn't load."),a;a._settings=$.extend({tabContexts:[],tabMoveHandler:function(e){},tabStopHandler:function(e,t){}},t),a._flipEndEventHandler=function(e){var t=e.originalEvent;a._flipDeltaCache=0,a.onTabChanged(t.newPoint,t.moved)},a._flipMoveEventHandler=function(e){var t=e.originalEvent;a._flipDeltaCache+=t.delta,!a._settings.enableBounce&&(-1===t.direction&&0===a._activeTabIndex&&0<a._flipDeltaCache||1===t.direction&&a._activeTabIndex===a._tabs.length-1&&a._flipDeltaCache<0)?(e.preventDefault(),a._flipsnap.moveToPoint(t.newPoint)):(a.onTabMoving(t.delta),a._tabs.forEach(function(e){e.onTabScrolling(a._activeTabIndex,t.delta)}),a.preprocess(a._activeTabIndex))},a._scrollEndEventHandler=function(e){a.onScrollStop()},a._scrollMoveEventHandler=function(e){a.onScroll()},a._settings.initialWidth&&a.$el.width(a._settings.initialWidth),a._settings.initialHeight&&a.$el.height(a._settings.initialHeight);var r=a._settings.initialWidth,s=a.$el.height(),l=a._settings.tabContexts.slice();return 0<l.length?l.forEach(function(e){new e.ctor($.extend({initialHeight:s},e.options,{host:a,delayRegister:!1}))}):a.onTabViewSetupRequest(s),a._settings.initImmediate&&a.initializeTabViews(),a._$contentsHolder=a.$el.find(n.TABHOST_SELECTOR).parent(),a.setFlipsnapCondition($.extend({},{distance:r},a._settings)),a.setActiveTab(a._activeTabIndex,0,!0),a}return t(a,i),a.prototype.initializeTabViews=function(){var e=this,t=this.$el.find(n.TABVIEW_SELECTOR);this._tabs.forEach(function(n,o){n.onInitialize(e,$(t[o]))})},a.prototype.destroy=function(){this.resetFlipsnapCondition(),this._tabs.forEach(function(e){e.onDestroy()}),this._tabs=[],this._$contentsHolder=null},a.prototype.getBaseHeight=function(){return this.$el.height()},a.prototype.registerTabView=function(e){null==this.getTabIndexOf(e)?this._tabs.push(e):console.warn(o+"tab instance already registered.")},a.prototype.getTabIndexOf=function(e){for(var t=0,n=this._tabs.length;t<n;t++)if(e===this._tabs[t])return t;return null},a.prototype.resetTabPosition=function(){this._tabs.forEach(function(e){e.scrollTo(0,!1,0),e.refresh()}),this.setActiveTab(0,0,!0)},a.prototype.onTabViewSetupRequest=function(e){},a.prototype.setActiveTab=function(e,t,o){var i=this;if(this.validTab(e)&&(o||this._activeTabIndex!==e)){this.preprocess(e);var a=this._activeTabIndex;this._activeTabIndex=e,this._flipsnap.moveToPoint(this._activeTabIndex,t);var r=function(){i.postprocess(a),i.onTabChanged(i._activeTabIndex,!1)};return 0===(t=t||parseInt(this._flipsnap.transitionDuration,10))?r():setTimeout(function(){r()},t*n.TABHOST_REFRESH_COEFF),!0}return!1},a.prototype.getTabCount=function(){return this._tabs.length},a.prototype.getActiveTabIndex=function(){return this._activeTabIndex},a.prototype.getSwipeDelta=function(){return this._flipDeltaCache},a.prototype.onTabMoving=function(e){this.trigger(a.EVENT_TAB_MOVE,e)},a.prototype.onTabChanged=function(e,t){t&&this.setActiveTab(e),this.trigger(a.EVENT_TAB_STOP,e,t)},a.prototype.getScrollPos=function(){return this._activeTabView?this._activeTabView.getScrollPos():0},a.prototype.getScrollPosMax=function(){return this._activeTabView?this._activeTabView.getScrollPosMax():0},a.prototype.scrollTo=function(e,t,n){this._activeTabView&&this._activeTabView.scrollTo(e,t,n)},a.prototype.onScroll=function(){this.trigger(a.EVENT_SCROLL_MOVE)},a.prototype.onScrollStop=function(){this.trigger(a.EVENT_SCROLL_STOP)},a.prototype.setScrollHandler=function(e,t){this._activeTabView&&this._activeTabView.setScrollHandler(e,t)},a.prototype.setScrollStopHandler=function(e,t){this._activeTabView&&this._activeTabView.setScrollStopHandler(e,t)},a.prototype.onOrientationChanged=function(e){var t=this;if(i.prototype.onOrientationChanged.call(this,e),this._tabs.forEach(function(t){t.onOrientationChanged(e)}),null!=this._refreshTimerId&&clearTimeout(this._refreshTimerId),this._flipsnap&&0<this._tabs.length){var o=function(){t._flipsnap&&t._flipsnap._maxPoint!==t._tabs.length-1?(t._flipsnap.refresh(),t._refreshTimerId=setTimeout(o,n.TABHOST_REFRESH_INTERVAL)):t._refreshTimerId=null};this._flipsnap.refresh(),this._refreshTimerId=setTimeout(o,n.TABHOST_REFRESH_INTERVAL)}},a.prototype.onPageShow=function(e,t){i.prototype.onPageShow.call(this,e,t),this.rebuild()},a.prototype.rebuild=function(){this._tabs.forEach(function(e){e.needRebuild&&(e.rebuild(),e.needRebuild=!1)})},a.prototype.setFlipsnapCondition=function(t){this._flipsnap=e.global.Flipsnap(n.TABHOST_SELECTOR,t),$(this._flipsnap.element).on("fstouchend",this._flipEndEventHandler.bind(this)),$(this._flipsnap.element).on("fstouchmove",this._flipMoveEventHandler.bind(this))},a.prototype.resetFlipsnapCondition=function(){this._flipsnap&&($(this._flipsnap.element).off("fstouchmove",this._flipMoveEventHandler.bind(this)),$(this._flipsnap.element).off("fstouchend",this._flipEndEventHandler.bind(this)),this._flipsnap.destroy(),this._flipsnap=null),this._flipDeltaCache=0},a.prototype.preprocess=function(e){var t=this;this._tabs.forEach(function(n,o){o!==t._activeTabIndex&&n.treatScrollPosition(),(t._activeTabIndex<e&&t._activeTabIndex<o&&o<=e||e<t._activeTabIndex&&e<=o&&o<t._activeTabIndex)&&n.$el.css("visibility","visible")})},a.prototype.postprocess=function(e){var t=this;this._tabs.forEach(function(n,o){if(null!=t._settings.inactiveVisibleTabDistance){var i=t._settings.inactiveVisibleTabDistance;t._activeTabIndex-i<=o&&o<=t._activeTabIndex+i?(n.$el.css("visibility","visible"),n.onVisibilityChanged(!0)):(n.$el.css("visibility","hidden"),n.onVisibilityChanged(!1))}o===t._activeTabIndex?(n.onTabSelected(),n.setScrollHandler(t._scrollMoveEventHandler,!0),n.setScrollStopHandler(t._scrollEndEventHandler,!0)):o===e&&(n.setScrollHandler(t._scrollMoveEventHandler,!1),n.setScrollStopHandler(t._scrollEndEventHandler,!1),n.onTabReleased())})},a.prototype.validTab=function(e){return 0!==this._tabs.length&&(0<=e&&e<this._tabs.length||(console.error(o+"invalid tab index. index: "+e),!1))},Object.defineProperty(a.prototype,"_activeTabView",{get:function(){return this._tabs[this._activeTabIndex]},enumerable:!0,configurable:!0}),a.EVENT_SCROLL_MOVE="tabhost:scrollmove",a.EVENT_SCROLL_STOP="tabhost:scrollstop",a.EVENT_TAB_MOVE="tabhost:tabmove",a.EVENT_TAB_STOP="tabhost:tavstop",a}(e.PageContainerView);e.TabHostView=i}(e.UI||(e.UI={}))}(e||(e={}));!function(e){!function(e){var n=1,o=function(e){function o(t){var o=e.call(this,$.extend({},{initialHeight:n},t))||this;return o._host=null,o._needRebuild=!1,o._host=t.host,t.delayRegister||o._host.registerTabView(o),o}return t(o,e),Object.defineProperty(o.prototype,"host",{get:function(){return this._host},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"needRebuild",{get:function(){return this._needRebuild},set:function(e){this._needRebuild=e},enumerable:!0,configurable:!0}),o.prototype.treatScrollPosition=function(){this.core.treatScrollPosition()},o.prototype.onInitialize=function(e,t){this._host=e,this.core.initialize(t,e.getBaseHeight()),Backbone.View.prototype.setElement.call(this,t,!0)},o.prototype.onDestroy=function(){this.remove(),this._host=null},o.prototype.onVisibilityChanged=function(e){},o.prototype.onTabSelected=function(){this.core.setActiveState(!0)},o.prototype.onTabReleased=function(){this.core.setActiveState(!1)},o.prototype.onTabScrolling=function(e,t){},o.prototype.onOrientationChanged=function(e){},Object.defineProperty(o.prototype,"core",{get:function(){return this._scrollMgr},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"tabIndex",{get:function(){return null==this._tabIndex&&(this._tabIndex=this._host.getTabIndexOf(this)),this._tabIndex},enumerable:!0,configurable:!0}),o.prototype.isActive=function(){return this.tabIndex===this._host.getActiveTabIndex()},o}(e.ListView);e.TabView=o}(e.UI||(e.UI={}))}(e||(e={}));!function(e){!function(e){var n=function(n){function o(t,o,i){var a=n.call(this,t,o,$.extend({},{autoDestoryElement:!1},i))||this;return a._scrollMgr=null,a._needRebuild=!1,a._scrollMgr=new e.ScrollManager(i),a}return t(o,n),o.prototype.reserveRebuild=function(){this._needRebuild=!0},o.prototype.onOrientationChanged=function(e){this._scrollMgr.setBaseHeight(this.getPageBaseHeight())},o.prototype.onBeforeRouteChange=function(){return this._pageOptions.autoDestoryElement&&this._scrollMgr.destroy(),n.prototype.onBeforeRouteChange.call(this)},o.prototype.onPageBeforeShow=function(e,t){n.prototype.onPageBeforeShow.call(this,e,t),this._scrollMgr.initialize(this.$page,this.getPageBaseHeight())},o.prototype.onPageShow=function(e,t){n.prototype.onPageShow.call(this,e,t),this._scrollMgr.setBaseHeight(this.getPageBaseHeight()),this._needRebuild&&(this.rebuild(),this._needRebuild=!1)},o.prototype.onPageRemove=function(e){n.prototype.onPageRemove.call(this,e),this.release()},o.prototype.isInitialized=function(){return this._scrollMgr.isInitialized()},o.prototype.addItem=function(t,n,o,i){this._addLine(new e.LineProfile(this._scrollMgr,Math.floor(t),n,o),i)},o.prototype.removeItem=function(e,t,n){this._scrollMgr.removeItem(e,t,n)},o.prototype.getItemInfo=function(e){return this._scrollMgr.getItemInfo(e)},o.prototype.refresh=function(){this._scrollMgr.refresh()},o.prototype.update=function(){this._scrollMgr.update()},o.prototype.rebuild=function(){this._scrollMgr.rebuild()},o.prototype.release=function(){this._scrollMgr.release()},o.prototype.backup=function(e){return this._scrollMgr.backup(e)},o.prototype.restore=function(e,t){void 0===t&&(t=!0);var n=this._scrollMgr.restore(e,t);return n&&!t&&this.reserveRebuild(),n},o.prototype.hasBackup=function(e){return this._scrollMgr.hasBackup(e)},o.prototype.clearBackup=function(e){return this._scrollMgr.clearBackup(e)},Object.defineProperty(o.prototype,"backupData",{get:function(){return this._scrollMgr.backupData},enumerable:!0,configurable:!0}),o.prototype.setScrollHandler=function(e,t){this._scrollMgr.setScrollHandler(e,t)},o.prototype.setScrollStopHandler=function(e,t){this._scrollMgr.setScrollStopHandler(e,t)},o.prototype.getScrollPos=function(){return this._scrollMgr.getScrollPos()},o.prototype.getScrollPosMax=function(){return this._scrollMgr.getScrollPosMax()},o.prototype.scrollTo=function(e,t,n){this._scrollMgr.scrollTo(e,t,n)},o.prototype.ensureVisible=function(e,t){this._scrollMgr.ensureVisible(e,t)},Object.defineProperty(o.prototype,"core",{get:function(){return this._scrollMgr},enumerable:!0,configurable:!0}),o.prototype._addLine=function(e,t){this._scrollMgr._addLine(e,t)},o.prototype.getPageBaseHeight=function(){return $(window).height()-parseInt(this.$page.css("padding-top"),10)},o}(e.PageView);e.PageListView=n}(e.UI||(e.UI={}))}(e||(e={}));!function(e){!function(e){var n=function(n){function o(t,o,i){var a=n.call(this,t,o,i)||this;return a._expandManager=null,a._expandManager=new e.ExpandManager(a),a}return t(o,n),o.prototype.newGroup=function(e){return this._expandManager.newGroup(e)},o.prototype.getGroup=function(e){return this._expandManager.getGroup(e)},o.prototype.registerTopGroup=function(e){this._expandManager.registerTopGroup(e)},o.prototype.getTopGroups=function(){return this._expandManager.getTopGroups()},o.prototype.expandAll=function(){this._expandManager.expandAll()},o.prototype.collapseAll=function(e){this._expandManager.collapseAll(e)},o.prototype.isExpanding=function(){return this._expandManager.isExpanding()},o.prototype.isCollapsing=function(){return this._expandManager.isCollapsing()},o.prototype.isSwitching=function(){return this._expandManager.isSwitching()},Object.defineProperty(o.prototype,"layoutKey",{get:function(){return this._expandManager.layoutKey},set:function(e){this._expandManager.layoutKey=e},enumerable:!0,configurable:!0}),o.prototype.release=function(){n.prototype.release.call(this),this._expandManager.release()},o.prototype.backup=function(e){return this._expandManager.backup(e)},o.prototype.restore=function(e,t){return void 0===t&&(t=!0),this._expandManager.restore(e,t)},o}(e.PageListView);e.PageExpandableListView=n}(e.UI||(e.UI={}))}(e||(e={}));!function(e){!function(t){!function(n){var o=e.Framework;$.fn.ripple=function(e){var t=$(this);return t.length<=0?t:t.on(o.Patch.s_vclickEvent,function(e){var t=$(this);0===t.find(".ui-ripple-ink").length&&t.prepend("<div class='ui-ripple-ink'></div>");var n=t.find(".ui-ripple-ink");if(n.removeClass("ui-ripple-animate"),!n.height()&&!n.width()){var o=Math.max(t.outerWidth(),t.outerHeight());n.css({height:o,width:o})}var i=e.pageX-t.offset().left-n.width()/2,a=e.pageY-t.offset().top-n.height()/2,r=t.data("ripple-color");n.on("animationend webkitAnimationEnd",function(e){n.off(),n.removeClass("ui-ripple-animate"),n=null}),n.css({top:a+"px",left:i+"px",background:r}).addClass("ui-ripple-animate")})},t.ExtensionManager.registerDomExtension(function(e,t){var n=[".ui-ripple-none",".ui-flipswitch-on",".ui-slider-handle",".ui-input-clear"],o=".ui-btn";return e.hasClass("ui-page")&&(o=".ui-content .ui-btn"),e.find(o).filter(function(e,t){return!$(t).is(n.join(","))}).addClass("ui-ripple"),e.find(".ui-ripple").each(function(e,n){$(n).ripple(t)}),e})}(t.Extension||(t.Extension={}))}(e.UI||(e.UI={}))}(e||(e={}));!function(e){!function(t){!function(n){function o(e,t){if(e.length<=0)return e;a||(a=r.getJST('\n                <script type="text/template">\n                    <span class="ui-spinner-base">\n                        <span class="ui-spinner-inner">\n                            <span class="ui-spinner-inner-gap" {{borderTop}}></span>\n                            <span class="ui-spinner-inner-left">\n                                <span class="ui-spinner-inner-half-circle" {{border}}></span>\n                            </span>\n                            <span class="ui-spinner-inner-right">\n                                <span class="ui-spinner-inner-half-circle" {{border}}></span>\n                            </span>\n                        </span>\n                    </span>\n                <\/script>\n            '));var n=e.data("spinner-color"),o=null;return n&&(e.css({"background-color":n}),o=function(e){return{borderTop:"style=border-top-color:"+e+";",border:"style=border-color:"+e+";"}}(n)),e.append(a(o)),i(e)}function i(e){for(var t,n=["-webkit-",""],o=function(e){return e&&"none"!==e},i=0,a=n.length;i<a;i++){if(!o(t)&&(t=e.css(n[i]+"mask-image"),o(t))){var r=t.match(/(url\(data:image\/svg\+xml;)([\s\S]*)?(base64,[\s\S]*\))/);t=r?r[1]+"bust="+Date.now().toString(36)+";"+r[3]:null}o(t)&&e.css(n[i]+"mask-image",t)}return e}var a,r=e.Tools.Template;$.fn.spinner=function(e){return"string"==typeof e?i($(this)):o($(this))},t.ExtensionManager.registerDomExtension(function(e,t){return e.find(".ui-spinner, .ui-icon-loading").each(function(e,n){$(n).spinner(t)}),e})}(t.Extension||(t.Extension={}))}(e.UI||(e.UI={}))}(e||(e={}));!function(e){!function(e){!function(t){e.ExtensionManager.registerDomExtension(function(e,t){var n=function(e,t){var n=$(e);t?n.addClass("ui-float-label-floating"):n.removeClass("ui-float-label-floating")},o=function(t){var o=$(t).attr("for"),i=e.find("#"+o);"search"===i.jqmData("type")&&$(t).addClass("ui-float-label-has-icon"),n(t,!!i.val()),i.on("keyup change input focus blur cut paste",function(e){n(t,!!$(e.target).val())})};return e.find("label.ui-float-label, .ui-float-label label").each(function(e,t){o(t)}),e})}(e.Extension||(e.Extension={}))}(e.UI||(e.UI={}))}(e||(e={}));!function(e){!function(t){!function(n){var o=e.Framework;t.ExtensionManager.registerDomExtension(function(e,t){var n=function(){return e.find(".ui-flipswitch")},i=function(e){var t=e.find("input");if(t.length)return t;var n=e.find("select");return n.length?n:null},a=function(e,t){e&&("INPUT"===e[0].nodeName?e.prop("checked",t).flipswitch("refresh"):"SELECT"===e[0].nodeName&&e.val(t?"on":"off").flipswitch("refresh"))},r=function(e){var t=i(e);if(t){var n=t[0].labels;if(n)return $(n)}return $()},s=function(e){var t=e.attr("for");return n().find("[name='"+t+"']")};return n().on("vclick _change_flipswich",function(e){var t=$(e.currentTarget),n=$(e.target),r=i(t),s=!t.hasClass("ui-flipswitch-active");n.hasClass("ui-flipswitch-input")?a(r,s):n.hasClass("ui-flipswitch-on")&&o.Platform.Mobile&&o.Patch.isSupportedVclick()&&(a(r,s),e.preventDefault())}).each(function(e,t){r($(t)).on("vclick",function(e){var t=s($(e.target));t.parent().hasClass("ui-state-disabled")||t.trigger("_change_flipswich"),e.preventDefault()})}),e})}(t.Extension||(t.Extension={}))}(e.UI||(e.UI={}))}(e||(e={}));!function(e){!function(e){!function(t){e.ExtensionManager.registerDomExtension(function(e,t){return e.find(".ui-slider-input").on("slidestop",function(e){$(e.currentTarget).parent().find(".ui-slider-handle").blur()}),e})}(e.Extension||(e.Extension={}))}(e.UI||(e.UI={}))}(e||(e={}));var e;return function(e){!function(e){!function(t){var n=function(e){var t,n=e.target,o=e;null!=n.clientX&&null!=n.clientY||(null!=o.pageX&&null!=o.pageY?(n.clientX=o.pageX,n.clientY=o.pageY):o.changedTouches&&o.changedTouches[0]&&(n.clientX=o.changedTouches[0].pageX,n.clientY=o.changedTouches[0].pageY)),/(SELECT|INPUT|TEXTAREA)/i.test(n.tagName)||((t=document.createEvent("MouseEvents")).initMouseEvent("click",!0,!0,o.view,1,n.screenX,n.screenY,n.clientX,n.clientY,o.ctrlKey,o.altKey,o.shiftKey,o.metaKey,0,null),t._constructed=!0,n.dispatchEvent(t))},o=!1;e.ExtensionManager.registerDomExtension(function(t,i){return!o&&e.global.IScroll&&e.global.IScroll.utils&&(e.global.IScroll.utils.click=n,o=!0),t})}(e.Extension||(e.Extension={}))}(e.UI||(e.UI={}))}(e||(e={})),e.UI});
//# sourceMappingURL=cdp.ui.jqm.min.js.map